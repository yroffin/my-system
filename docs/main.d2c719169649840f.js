(self.webpackChunkfront=self.webpackChunkfront||[]).push([[179],{9231:(Ve,Ae,W)=>{"use strict";function Y(i){return"function"==typeof i}function L(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const G=L(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function U(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class j{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(Y(n))try{n()}catch(s){t=s instanceof G?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{q(s)}catch(o){t=t??[],o instanceof G?t=[...t,...o.errors]:t.push(o)}}if(t)throw new G(t)}}add(t){var e;if(t&&t!==this)if(this.closed)q(t);else{if(t instanceof j){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&U(e,t)}remove(t){const{_finalizers:e}=this;e&&U(e,t),t instanceof j&&t._removeParent(this)}}j.EMPTY=(()=>{const i=new j;return i.closed=!0,i})();const D=j.EMPTY;function R(i){return i instanceof j||i&&"closed"in i&&Y(i.remove)&&Y(i.add)&&Y(i.unsubscribe)}function q(i){Y(i)?i():i.unsubscribe()}const ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},te={setTimeout(i,t,...e){const{delegate:n}=te;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=te;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function se(i){te.setTimeout(()=>{const{onUnhandledError:t}=ne;if(!t)throw i;t(i)})}function ee(){}const K=Ce("C",void 0,void 0);function Ce(i,t,e){return{kind:i,value:t,error:e}}let Re=null;function ie(i){if(ne.useDeprecatedSynchronousErrorHandling){const t=!Re;if(t&&(Re={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=Re;if(Re=null,e)throw n}}else i()}class N extends j{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,R(t)&&t.add(this)):this.destination=at}static create(t,e,n){return new ke(t,e,n)}next(t){this.isStopped?Le(function ce(i){return Ce("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Le(function z(i){return Ce("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Le(K,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const V=Function.prototype.bind;function J(i,t){return V.call(i,t)}class fe{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Pe(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Pe(n)}else Pe(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Pe(e)}}}class ke extends N{constructor(t,e,n){let r;if(super(),Y(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&ne.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&J(t.next,s),error:t.error&&J(t.error,s),complete:t.complete&&J(t.complete,s)}):r=t}this.destination=new fe(r)}}function Pe(i){ne.useDeprecatedSynchronousErrorHandling?function oe(i){ne.useDeprecatedSynchronousErrorHandling&&Re&&(Re.errorThrown=!0,Re.error=i)}(i):se(i)}function Le(i,t){const{onStoppedNotification:e}=ne;e&&te.setTimeout(()=>e(i,t))}const at={closed:!0,next:ee,error:function nt(i){throw i},complete:ee},It="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ge(i){return i}function mt(i){return 0===i.length?Ge:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let _t=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function Pn(i){return i&&i instanceof N||function Ot(i){return i&&Y(i.next)&&Y(i.error)&&Y(i.complete)}(i)&&R(i)}(e)?e:new ke(e,n,r);return ie(()=>{const{operator:o,source:l}=this;s.add(o?o.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Fn(n))((r,s)=>{const o=new ke({next:l=>{try{e(l)}catch(u){s(u),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[It](){return this}pipe(...e){return mt(e)(this)}toPromise(e){return new(e=Fn(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function Fn(i){var t;return null!==(t=i??ne.Promise)&&void 0!==t?t:Promise}const nn=L(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ze=(()=>{class i extends _t{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new Ct(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new nn}next(e){ie(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){ie(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){ie(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?D:(this.currentObservers=null,s.push(e),new j(()=>{this.currentObservers=null,U(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new _t;return e.source=this,e}}return i.create=(t,e)=>new Ct(t,e),i})();class Ct extends Ze{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:D}}function cn(i){return Y(i?.lift)}function wn(i){return t=>{if(cn(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function An(i,t,e,n,r){return new $e(i,t,e,n,r)}class $e extends N{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(l){try{e(l)}catch(u){t.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function le(i,t){return wn((e,n)=>{let r=0;e.subscribe(An(n,s=>{n.next(i.call(t,s,r++))}))})}function os(i){return this instanceof os?(this.v=i,this):new os(i)}function qs(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(I){n[I]&&(r[I]=function(T){return new Promise(function(k,H){s.push([I,T,k,H])>1||l(I,T)})})}function l(I,T){try{!function u(I){I.value instanceof os?Promise.resolve(I.value.v).then(p,v):w(s[0][2],I)}(n[I](T))}catch(k){w(s[0][3],k)}}function p(I){l("next",I)}function v(I){l("throw",I)}function w(I,T){I(T),s.shift(),s.length&&l(s[0][0],s[0][1])}}function ra(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function dn(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(l,u){!function r(s,o,l,u){Promise.resolve(u).then(function(p){s({value:p,done:l})},o)}(l,u,(o=i[s](o)).done,o.value)})}}}const Ja=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function Go(i){return Y(i?.then)}function Rt(i){return Y(i[It])}function fn(i){return Symbol.asyncIterator&&Y(i?.[Symbol.asyncIterator])}function gn(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const qe=function yn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function kt(i){return Y(i?.[qe])}function on(i){return qs(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield os(e.read());if(r)return yield os(void 0);yield yield os(n)}}finally{e.releaseLock()}})}function En(i){return Y(i?.getReader)}function Nn(i){if(i instanceof _t)return i;if(null!=i){if(Rt(i))return function hi(i){return new _t(t=>{const e=i[It]();if(Y(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(Ja(i))return function ar(i){return new _t(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(Go(i))return function qr(i){return new _t(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,se)})}(i);if(fn(i))return xs(i);if(kt(i))return function Ss(i){return new _t(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(En(i))return function xo(i){return xs(on(i))}(i)}throw gn(i)}function xs(i){return new _t(t=>{(function lo(i,t){var e,n,r,s;return function We(i,t,e,n){return new(e||(e=Promise))(function(s,o){function l(v){try{p(n.next(v))}catch(w){o(w)}}function u(v){try{p(n.throw(v))}catch(w){o(w)}}function p(v){v.done?s(v.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(v.value).then(l,u)}p((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=ra(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function Kr(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function Ns(i,t,e=1/0){return Y(t)?Ns((n,r)=>le((s,o)=>t(n,s,r,o))(Nn(i(n,r))),e):("number"==typeof t&&(e=t),wn((n,r)=>function Ga(i,t,e,n,r,s,o,l){const u=[];let p=0,v=0,w=!1;const I=()=>{w&&!u.length&&!p&&t.complete()},T=H=>p<n?k(H):u.push(H),k=H=>{s&&t.next(H),p++;let X=!1;Nn(e(H,v++)).subscribe(An(t,ue=>{r?.(ue),s?T(ue):t.next(ue)},()=>{X=!0},void 0,()=>{if(X)try{for(p--;u.length&&p<n;){const ue=u.shift();o?Kr(t,o,()=>k(ue)):k(ue)}I()}catch(ue){t.error(ue)}}))};return i.subscribe(An(t,T,()=>{w=!0,I()})),()=>{l?.()}}(n,r,i,e)))}function ya(i=1/0){return Ns(Ge,i)}const sa=new _t(i=>i.complete());function je(i){return i&&Y(i.schedule)}function dt(i){return i[i.length-1]}function et(i){return Y(dt(i))?i.pop():void 0}function pe(i){return je(dt(i))?i.pop():void 0}function Qe(i,t=0){return wn((e,n)=>{e.subscribe(An(n,r=>Kr(n,i,()=>n.next(r),t),()=>Kr(n,i,()=>n.complete(),t),r=>Kr(n,i,()=>n.error(r),t)))})}function Mt(i,t=0){return wn((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function xi(i,t){if(!i)throw new Error("Iterable cannot be null");return new _t(e=>{Kr(e,t,()=>{const n=i[Symbol.asyncIterator]();Kr(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function gr(i,t){return t?function _r(i,t){if(null!=i){if(Rt(i))return function Xt(i,t){return Nn(i).pipe(Mt(t),Qe(t))}(i,t);if(Ja(i))return function vi(i,t){return new _t(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(Go(i))return function xn(i,t){return Nn(i).pipe(Mt(t),Qe(t))}(i,t);if(fn(i))return xi(i,t);if(kt(i))return function mi(i,t){return new _t(e=>{let n;return Kr(e,t,()=>{n=i[qe](),Kr(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>Y(n?.return)&&n.return()})}(i,t);if(En(i))return function Dr(i,t){return xi(on(i),t)}(i,t)}throw gn(i)}(i,t):Nn(i)}function ys(i={}){const{connector:t=(()=>new Ze),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,l,u,p=0,v=!1,w=!1;const I=()=>{l?.unsubscribe(),l=void 0},T=()=>{I(),o=u=void 0,v=w=!1},k=()=>{const H=o;T(),H?.unsubscribe()};return wn((H,X)=>{p++,!w&&!v&&I();const ue=u=u??t();X.add(()=>{p--,0===p&&!w&&!v&&(l=Bs(k,r))}),ue.subscribe(X),!o&&p>0&&(o=new ke({next:xe=>ue.next(xe),error:xe=>{w=!0,I(),l=Bs(T,e,xe),ue.error(xe)},complete:()=>{v=!0,I(),l=Bs(T,n),ue.complete()}}),Nn(H).subscribe(o))})(s)}}function Bs(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new ke({next:()=>{n.unsubscribe(),i()}});return t(...e).subscribe(n)}function Pr(i){for(let t in i)if(i[t]===Pr)return t;throw Error("Could not find renamed property on target object.")}function _o(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function hs(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(hs).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Io(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const Vl=Pr({__forward_ref__:Pr});function Zr(i){return i.__forward_ref__=Zr,i.toString=function(){return hs(this())},i}function Qr(i){return el(i)?i():i}function el(i){return"function"==typeof i&&i.hasOwnProperty(Vl)&&i.__forward_ref__===Zr}class Ei extends Error{constructor(t,e){super(function wl(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function zs(i){return"string"==typeof i?i:null==i?"":String(i)}function js(i,t){throw new Ei(-201,!1)}function Qc(i,t){null==i&&function Do(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function cr(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Vr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Jc(i){return Dy(i,ep)||Dy(i,xm)}function Dy(i,t){return i.hasOwnProperty(t)?i[t]:null}function Fa(i){return i&&(i.hasOwnProperty(qp)||i.hasOwnProperty(Im))?i[qp]:null}const ep=Pr({\u0275prov:Pr}),qp=Pr({\u0275inj:Pr}),xm=Pr({ngInjectableDef:Pr}),Im=Pr({ngInjectorDef:Pr});var Es=(()=>((Es=Es||{})[Es.Default=0]="Default",Es[Es.Host=1]="Host",Es[Es.Self=2]="Self",Es[Es.SkipSelf=4]="SkipSelf",Es[Es.Optional=8]="Optional",Es))();let bv;function rd(i){const t=bv;return bv=i,t}function yc(i,t,e){const n=Jc(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&Es.Optional?null:void 0!==t?t:void js(hs(i))}function Id(i){return{toString:i}.toString()}var Sd=(()=>((Sd=Sd||{})[Sd.OnPush=0]="OnPush",Sd[Sd.Default=1]="Default",Sd))(),nl=(()=>{return(i=nl||(nl={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",nl;var i})();const Lo=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Yh={},Wo=[],Al=Pr({\u0275cmp:Pr}),tp=Pr({\u0275dir:Pr}),xl=Pr({\u0275pipe:Pr}),Dl=Pr({\u0275mod:Pr}),ku=Pr({\u0275fac:Pr}),Ed=Pr({__NG_ELEMENT_ID__:Pr});let np=0;function Rr(i){return Id(()=>{const e=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Sd.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Wo,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||nl.Emulated,id:"c"+np++,styles:i.styles||Wo,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=Ry(i.inputs,n),r.outputs=Ry(i.outputs),o&&o.forEach(l=>l(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Xd).filter(Ef):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(rl).filter(Ef):null,r})}function Xd(i){return Ca(i)||ac(i)}function Ef(i){return null!==i}function Xr(i){return Id(()=>({type:i.type,bootstrap:i.bootstrap||Wo,declarations:i.declarations||Wo,imports:i.imports||Wo,exports:i.exports||Wo,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Ry(i,t){if(null==i)return Yh;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}const fs=Rr;function Ou(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ca(i){return i[Al]||null}function ac(i){return i[tp]||null}function rl(i){return i[xl]||null}function Fu(i,t){const e=i[Dl]||null;if(!e&&!0===t)throw new Error(`Type ${hs(i)} does not have '\u0275mod' property.`);return e}function Au(i){return Array.isArray(i)&&"object"==typeof i[1]}function Yd(i){return Array.isArray(i)&&!0===i[1]}function wv(i){return 0!=(8&i.flags)}function Ng(i){return 2==(2&i.flags)}function Bg(i){return 1==(1&i.flags)}function Kd(i){return null!==i.template}function Tm(i){return 0!=(256&i[2])}function up(i,t){return i.hasOwnProperty(ku)?i[ku]:null}class Lm{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Na(){return Df}function Df(i){return i.type.prototype.ngOnChanges&&(i.setInput=dp),Fy}function Fy(){const i=Pm(this),t=i?.current;if(t){const e=i.previous;if(e===Yh)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function dp(i,t,e,n){const r=Pm(i)||function Vg(i,t){return i[Tv]=t}(i,{previous:Yh,current:null}),s=r.current||(r.current={}),o=r.previous,l=this.declaredInputs[e],u=o[l];s[l]=new Lm(u&&u.currentValue,t,o===Yh),i[n]=t}Na.ngInherit=!0;const Tv="__ngSimpleChanges__";function Pm(i){return i[Tv]||null}function Da(i){for(;Array.isArray(i);)i=i[0];return i}function Gg(i,t){return Da(t[i])}function Ld(i,t){return Da(t[i.index])}function Us(i,t){return i.data[t]}function Ul(i,t){return i[t]}function tu(i,t){const e=t[i];return Au(e)?e:e[0]}function jo(i){return 4==(4&i[2])}function oa(i){return 64==(64&i[2])}function go(i,t){return null==t?null:i[t]}function ps(i){i[18]=0}function Wg(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const Is={lFrame:Ya(null),bindingsEnabled:!0};function zy(){return Is.bindingsEnabled}function Pi(){return Is.lFrame.lView}function Zs(){return Is.lFrame.tView}function Lt(i){return Is.lFrame.contextLView=i,i[8]}function Pt(i){return Is.lFrame.contextLView=null,i}function bt(){let i=aa();for(;null!==i&&64===i.type;)i=i.parent;return i}function aa(){return Is.lFrame.currentTNode}function La(i,t){const e=Is.lFrame;e.currentTNode=i,e.isParent=t}function to(){return Is.lFrame.isParent}function Jp(){Is.lFrame.isParent=!1}function la(){const i=Is.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function Qd(){return Is.lFrame.bindingIndex++}function Hl(i){const t=Is.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function Qh(i,t){const e=Is.lFrame;e.bindingIndex=e.bindingRootIndex=i,sd(t)}function sd(i){Is.lFrame.currentDirectiveIndex=i}function iu(){return Is.lFrame.currentQueryIndex}function jg(i){Is.lFrame.currentQueryIndex=i}function Qs(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function Dv(i,t,e){if(e&Es.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&Es.Host||(r=Qs(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,i=s}const n=Is.lFrame=Wr();return n.currentTNode=t,n.lView=i,!0}function $g(i){const t=Wr(),e=i[1];Is.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Wr(){const i=Is.lFrame,t=null===i?null:i.child;return null===t?Ya(i):t}function Ya(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function cc(){const i=Is.lFrame;return Is.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Pa=cc;function gl(){const i=cc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Bc(){return Is.lFrame.selectedIndex}function Pf(i){Is.lFrame.selectedIndex=i}function ml(){const i=Is.lFrame;return Us(i.tView,i.selectedIndex)}function kf(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:p,ngOnDestroy:v}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-e,o),l&&((i.contentHooks||(i.contentHooks=[])).push(e,l),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,l)),u&&(i.viewHooks||(i.viewHooks=[])).push(-e,u),p&&((i.viewHooks||(i.viewHooks=[])).push(e,p),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,p)),null!=v&&(i.destroyHooks||(i.destroyHooks=[])).push(e,v)}}function ef(i,t,e){Of(i,t,3,e)}function Yg(i,t,e,n){(3&i[2])===e&&Of(i,t,e,n)}function Jd(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function Of(i,t,e,n){const s=n??-1,o=t.length-1;let l=0;for(let u=void 0!==n?65535&i[18]:0;u<o;u++)if("number"==typeof t[u+1]){if(l=t[u],null!=n&&l>=n)break}else t[u]<0&&(i[18]+=65536),(l<s||-1==s)&&(Ff(i,e,t,u),i[18]=(4294901760&i[18])+u+2),u++}function Ff(i,t,e,n){const r=e[n]<0,s=e[n+1],l=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(l)}finally{}}}else try{s.call(l)}finally{}}class eg{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function tg(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],l=e[n++];i.setAttribute(t,o,l,s)}else{const s=r,o=e[++n];nf(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function Rl(i){return 3===i||4===i||6===i}function nf(i){return 64===i.charCodeAt(0)}function eh(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||ru(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function ru(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const l=i[s++];if("number"==typeof l){if(l===t){o=-1;break}if(l>t){o=s-1;break}}}for(;s<i.length;){const l=i[s];if("number"==typeof l)break;if(l===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function th(i){return-1!==i}function Pd(i){return 32767&i}function zu(i,t){let e=function od(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let Ra=!0;function wh(i){const t=Ra;return Ra=i,t}let Vu=0;const $o={};function po(i,t){const e=mp(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,gp(n.data,i),gp(t,null),gp(n.blueprint,null));const r=ou(i,t),s=i.injectorIndex;if(th(r)){const o=Pd(r),l=zu(r,t),u=l[1].data;for(let p=0;p<8;p++)t[s+p]=l[o+p]|u[o+p]}return t[s+8]=r,s}function gp(i,t){i.push(0,0,0,0,0,0,0,0,t)}function mp(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function ou(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=Il(r),null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function vp(i,t,e){!function su(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Ed)&&(n=e[Ed]),null==n&&(n=e[Ed]=Vu++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function Rd(i,t,e){if(e&Es.Optional)return i;js()}function rf(i,t,e,n){if(e&Es.Optional&&void 0===n&&(n=null),0==(e&(Es.Self|Es.Host))){const r=i[9],s=rd(void 0);try{return r?r.get(t,n,e&Es.Optional):yc(t,n,e&Es.Optional)}finally{rd(s)}}return Rd(n,0,e)}function sf(i,t,e,n=Es.Default,r){if(null!==i){if(1024&t[2]){const o=function ih(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const l=wc(s,o,e,n|Es.Self,$o);if(l!==$o)return l;let u=s.parent;if(!u){const p=o[21];if(p){const v=p.get(e,$o,n);if(v!==$o)return v}u=Il(o),o=o[15]}s=u}return r}(i,t,e,n,$o);if(o!==$o)return o}const s=wc(i,t,e,n,$o);if(s!==$o)return s}return rf(t,e,n,r)}function wc(i,t,e,n,r){const s=function Ah(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(Ed)?i[Ed]:void 0;return"number"==typeof t?t>=0?255&t:ng:t}(e);if("function"==typeof s){if(!Dv(t,i,n))return n&Es.Host?Rd(r,0,n):rf(t,e,n,r);try{const o=s(n);if(null!=o||n&Es.Optional)return o;js()}finally{Pa()}}else if("number"==typeof s){let o=null,l=mp(i,t),u=-1,p=n&Es.Host?t[16][6]:null;for((-1===l||n&Es.SkipSelf)&&(u=-1===l?ou(i,t):t[l+8],-1!==u&&yp(n,!1)?(o=t[1],l=Pd(u),t=zu(u,t)):l=-1);-1!==l;){const v=t[1];if(af(s,l,v.data)){const w=Ol(l,t,e,o,n,p);if(w!==$o)return w}u=t[l+8],-1!==u&&yp(n,t[1].data[l+8]===p)&&af(s,l,t)?(o=v,l=Pd(u),t=zu(u,t)):l=-1}}return r}function Ol(i,t,e,n,r,s){const o=t[1],l=o.data[i+8],v=nh(l,o,e,null==n?Ng(l)&&Ra:n!=o&&0!=(3&l.type),r&Es.Host&&s===l);return null!==v?Iu(t,o,v,l):$o}function nh(i,t,e,n,r){const s=i.providerIndexes,o=t.data,l=1048575&s,u=i.directiveStart,v=s>>20,I=r?l+v:i.directiveEnd;for(let T=n?l:l+v;T<I;T++){const k=o[T];if(T<u&&e===k||T>=u&&k.type===e)return T}if(r){const T=o[u];if(T&&Kd(T)&&T.type===e)return u}return null}function Iu(i,t,e,n){let r=i[e];const s=t.data;if(function Vy(i){return i instanceof eg}(r)){const o=r;o.resolving&&function id(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new Ei(-200,`Circular dependency in DI detected for ${i}${e}`)}(function wo(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():zs(i)}(s[e]));const l=wh(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?rd(o.injectImpl):null;Dv(i,n,Es.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function km(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=Df(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==u&&rd(u),wh(l),o.resolving=!1,Pa()}}return r}function af(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function yp(i,t){return!(i&Es.Self||i&Es.Host&&t)}class kd{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return sf(this._tNode,this._lView,t,n,e)}}function ng(){return new kd(bt(),Pi())}function pa(i){return Id(()=>{const t=i.prototype.constructor,e=t[ku]||lf(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[ku]||lf(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function lf(i){return el(i)?()=>{const t=lf(Qr(i));return t&&t()}:up(i)}function Il(i){const t=i[1],e=t.type;return 2===e?t.declTNode:1===e?i[6]:null}function xh(i){return function Zg(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(Rl(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(bt(),i)}const rh="__parameters__";function ka(i,t,e){return Id(()=>{const n=function Ih(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return l.annotation=o,l;function l(u,p,v){const w=u.hasOwnProperty(rh)?u[rh]:Object.defineProperty(u,rh,{value:[]})[rh];for(;w.length<=v;)w.push(null);return(w[v]=w[v]||[]).push(o),u}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class vr{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=cr({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vl(i,t){void 0===t&&(t=i);for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)?(t===i&&(t=i.slice(0,e)),vl(n,t)):t!==i&&t.push(n)}return t}function Uu(i,t){i.forEach(e=>Array.isArray(e)?Uu(e,t):t(e))}function cd(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function ud(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Ql(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function Jl(i,t,e){let n=Qo(i,t);return n>=0?i[1|n]=e:(n=~n,function _p(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function Vc(i,t){const e=Qo(i,t);if(e>=0)return i[1|e]}function Qo(i,t){return function Ic(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const Gu={},zf="__NG_DI_FLAG__",Vf="ngTempTokenPath",Hc=/\n/gm,ah="__source";let uf;function dd(i){const t=uf;return uf=i,t}function Sh(i,t=Es.Default){if(void 0===uf)throw new Ei(-203,!1);return null===uf?yc(i,void 0,t):uf.get(i,t&Es.Optional?null:void 0,t)}function ai(i,t=Es.Default){return(function Cv(){return bv}()||Sh)(Qr(i),t)}function Ba(i,t=Es.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),ai(i,t)}function df(i){const t=[];for(let e=0;e<i.length;e++){const n=Qr(i[e]);if(Array.isArray(n)){if(0===n.length)throw new Ei(900,!1);let r,s=Es.Default;for(let o=0;o<n.length;o++){const l=n[o],u=zm(l);"number"==typeof u?-1===u?r=l.token:s|=u:r=l}t.push(ai(r,s))}else t.push(ai(n))}return t}function Wu(i,t){return i[zf]=t,i.prototype[zf]=t,i}function zm(i){return i[zf]}const hd=Wu(ka("Inject",i=>({token:i})),-1),tc=Wu(ka("Optional"),8),Fd=Wu(ka("SkipSelf"),4);let Bd,au,pd;function Gc(i){return function cl(){if(void 0===au&&(au=null,Lo.trustedTypes))try{au=Lo.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return au}()?.createHTML(i)||i}function Mh(i){return function Gf(){if(void 0===pd&&(pd=null,Lo.trustedTypes))try{pd=Lo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return pd}()?.createHTML(i)||i}class Tu{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Dh extends Tu{getTypeName(){return"HTML"}}class Sp extends Tu{getTypeName(){return"Style"}}class Wm extends Tu{getTypeName(){return"Script"}}class $_ extends Tu{getTypeName(){return"URL"}}class sm extends Tu{getTypeName(){return"ResourceURL"}}function jl(i){return i instanceof Tu?i.changingThisBreaksApplicationSecurity:i}function Oa(i,t){const e=function Wf(i){return i instanceof Tu&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}class dg{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Gc(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class gd{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Gc(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Gc(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const hg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,fg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function pg(i){return(i=String(i)).match(hg)||i.match(fg)?i:"unsafe:"+i}function lu(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function jf(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const jm=lu("area,br,col,hr,img,wbr"),Hy=lu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gy=lu("rp,rt"),Fl=jf(jm,jf(Hy,lu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),jf(Gy,lu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),jf(Gy,Hy)),$m=lu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$f=lu("srcset"),Wy=jf($m,$f,lu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),lu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jy=lu("script,style,template");class q_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Fl.hasOwnProperty(e))return this.sanitizedSomething=!0,!jy.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,l=o.toLowerCase();if(!Wy.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=s.value;$m[l]&&(u=pg(u)),$f[l]&&(i=u,u=(i=String(i)).split(",").map(t=>pg(t.trim())).join(", ")),this.buf.push(" ",o,'="',$y(u),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Fl.hasOwnProperty(e)&&!jm.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push($y(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const X_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Y_=/([^\#-~ |!])/g;function $y(i){return i.replace(/&/g,"&amp;").replace(X_,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Y_,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qm;function Bv(i,t){let e=null;try{qm=qm||function Ph(i){const t=new gd(i);return function uh(){try{return!!(new window.DOMParser).parseFromString(Gc(""),"text/html")}catch{return!1}}()?new dg(t):t}(i);let n=t?String(t):"";e=qm.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=qm.getInertBodyElement(n)}while(n!==s);return Gc((new q_).sanitizeChildren($u(e)||e))}finally{if(e){const n=$u(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function $u(i){return"content"in i&&function K_(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var za=(()=>((za=za||{})[za.NONE=0]="NONE",za[za.HTML=1]="HTML",za[za.STYLE=2]="STYLE",za[za.SCRIPT=3]="SCRIPT",za[za.URL=4]="URL",za[za.RESOURCE_URL=5]="RESOURCE_URL",za))();function Ka(i){const t=lm();return t?Mh(t.sanitize(za.HTML,i)||""):Oa(i,"HTML")?Mh(jl(i)):Bv(function Hm(){return void 0!==Bd?Bd:typeof document<"u"?document:void 0}(),zs(i))}function dh(i){const t=lm();return t?t.sanitize(za.URL,i)||"":Oa(i,"URL")?jl(i):pg(zs(i))}function lm(){const i=Pi();return i&&i[12]}const Uv=new vr("ENVIRONMENT_INITIALIZER"),Yy=new vr("INJECTOR",-1),Ky=new vr("INJECTOR_DEF_TYPES");class a{get(t,e=Gu){if(e===Gu){const n=new Error(`NullInjectorError: No provider for ${hs(t)}!`);throw n.name="NullInjectorError",n}return e}}function d(...i){return{\u0275providers:g(0,i)}}function g(i,...t){const e=[],n=new Set;let r;return Uu(t,s=>{const o=s;x(o,e,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&y(r,e),e}function y(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];Uu(r,s=>{t.push(s)})}}function x(i,t,e,n){if(!(i=Qr(i)))return!1;let r=null,s=Fa(i);const o=!s&&Ca(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const u=i.ngModule;if(s=Fa(u),!s)return!1;r=u}const l=n.has(r);if(o){if(l)return!1;if(n.add(r),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const p of u)x(p,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let p;n.add(r);try{Uu(s.imports,v=>{x(v,t,e,n)&&(p||(p=[]),p.push(v))})}finally{}void 0!==p&&y(p,t)}if(!l){const p=up(r)||(()=>new r);t.push({provide:r,useFactory:p,deps:Wo},{provide:Ky,useValue:r,multi:!0},{provide:Uv,useValue:()=>ai(r),multi:!0})}const u=s.providers;null==u||l||Uu(u,v=>{t.push(v)})}}return r!==i&&void 0!==i.providers}const O=Pr({provide:String,useValue:Pr});function B(i){return null!==i&&"object"==typeof i&&O in i}function me(i){return"function"==typeof i}const Oe=new vr("Set Injector scope."),Fe={},Ne={};let ut;function ct(){return void 0===ut&&(ut=new a),ut}class rt{}class At extends rt{constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ii(t,o=>this.processProvider(o)),this.records.set(Yy,pn(void 0,this)),r.has("environment")&&this.records.set(rt,pn(void 0,this));const s=this.records.get(Oe);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ky.multi,Wo,Es.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=dd(this),n=rd(void 0);try{return t()}finally{dd(e),rd(n)}}get(t,e=Gu,n=Es.Default){this.assertNotDestroyed();const r=dd(this),s=rd(void 0);try{if(!(n&Es.SkipSelf)){let l=this.records.get(t);if(void 0===l){const u=function $n(i){return"function"==typeof i||"object"==typeof i&&i instanceof vr}(t)&&Jc(t);l=u&&this.injectableDefInScope(u)?pn(St(t),Fe):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(n&Es.Self?ct():this.parent).get(t,e=n&Es.Optional&&e===Gu?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Vf]=o[Vf]||[]).unshift(hs(t)),r)throw o;return function em(i,t,e,n){const r=i[Vf];throw t[ah]&&r.unshift(t[ah]),i.message=function Cp(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=hs(t);if(Array.isArray(t))r=t.map(hs).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let l=t[o];s.push(o+":"+("string"==typeof l?JSON.stringify(l):hs(l)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(Hc,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[Vf]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{rd(s),dd(r)}}resolveInjectorInitializers(){const t=dd(this),e=rd(void 0);try{const n=this.get(Uv.multi,Wo,Es.Self);for(const r of n)r()}finally{dd(t),rd(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(hs(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ei(205,!1)}processProvider(t){let e=me(t=Qr(t))?t:Qr(t&&t.provide);const n=function $t(i){return B(i)?pn(void 0,i.useValue):pn(Cn(i),Fe)}(t);if(me(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=pn(void 0,Fe,!0),r.factory=()=>df(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===Fe&&(e.value=Ne,e.value=e.factory()),"object"==typeof e.value&&e.value&&function In(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Qr(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function St(i){const t=Jc(i),e=null!==t?t.factory:up(i);if(null!==e)return e;if(i instanceof vr)throw new Ei(204,!1);if(i instanceof Function)return function tn(i){const t=i.length;if(t>0)throw Ql(t,"?"),new Ei(204,!1);const e=function B_(i){const t=i&&(i[ep]||i[xm]);if(t){const e=function tl(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new Ei(204,!1)}function Cn(i,t,e){let n;if(me(i)){const r=Qr(i);return up(r)||St(r)}if(B(i))n=()=>Qr(i.useValue);else if(function re(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...df(i.deps||[]));else if(function ae(i){return!(!i||!i.useExisting)}(i))n=()=>ai(Qr(i.useExisting));else{const r=Qr(i&&(i.useClass||i.provide));if(!function ln(i){return!!i.deps}(i))return up(r)||St(r);n=()=>new r(...df(i.deps))}return n}function pn(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function zi(i){return!!i.\u0275providers}function Ii(i,t){for(const e of i)Array.isArray(e)?Ii(e,t):zi(e)?Ii(e.\u0275providers,t):t(e)}class en{}class ki{resolveComponentFactory(t){throw function si(i){const t=Error(`No component factory found for ${hs(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let Ti=(()=>{class i{}return i.NULL=new ki,i})();function Cr(){return Ji(bt(),Pi())}function Ji(i,t){return new oi(Ld(i,t))}let oi=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=Cr,i})();function ii(i){return i instanceof oi?i.nativeElement:i}class c{}let h=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function m(){const i=Pi(),e=tu(bt().index,i);return(Au(e)?e:i)[11]}(),i})(),_=(()=>{class i{}return i.\u0275prov=cr({token:i,providedIn:"root",factory:()=>null}),i})();class C{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const A=new C("14.1.3"),E={};function Yt(i){return i.ngOriginalError}class lt{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Yt(t);for(;e&&Yt(e);)e=Yt(e);return e||null}}const Vn=new Map;let ci=0;const wr="__ngContext__";function as(i,t){Au(t)?(i[wr]=t[20],function Oi(i){Vn.set(i[20],i)}(t)):i[wr]=t}function _s(i){const t=i[wr];return"number"==typeof t?function Mi(i){return Vn.get(i)||null}(t):t||null}function Mr(i){const t=_s(i);return t?Au(t)?t:t.lView:null}const Nt=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Lo))();function li(i){return i.ownerDocument.defaultView}function vn(i){return i instanceof Function?i():i}var Ki=(()=>((Ki=Ki||{})[Ki.Important=1]="Important",Ki[Ki.DashCase=2]="DashCase",Ki))();function fr(i,t){return undefined(i,t)}function ma(i){const t=i[3];return Yd(t)?t[3]:t}function Ur(i){return pc(i[13])}function yl(i){return pc(i[4])}function pc(i){for(;null!==i&&!Yd(i);)i=i[4];return i}function cu(i,t,e,n,r){if(null!=n){let s,o=!1;Yd(n)?s=n:Au(n)&&(o=!0,n=n[0]);const l=Da(n);0===i&&null!==e?null==r?n0(t,e,l):mg(t,e,l,r||null,!0):1===i&&null!==e?mg(t,e,l,r||null,!0):2===i?function Nx(i,t,e){const n=Gv(i,t);n&&function vf(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,l,o):3===i&&t.destroyNode(l),null!=s&&function hT(i,t,e,n,r){const s=e[7];s!==Da(e)&&cu(t,i,n,s,r);for(let l=10;l<e.length;l++){const u=e[l];qu(u[1],u,i,t,n,s)}}(t,i,s,e,r)}}function Ec(i,t,e){return i.createElement(t,e)}function J_(i,t){const e=i[9],n=e.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,Wg(r,-1)),e.splice(n,1)}function e0(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&J_(r,n),t>0&&(i[e-1][4]=n[4]);const s=ud(i,10+t);!function du(i,t){qu(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function Ea(i,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&qu(i,t,e,3,null,null),function Co(i){let t=i[13];if(!t)return t0(i[1],i);for(;t;){let e=null;if(Au(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)Au(t)&&t0(t[1],t),t=t[3];null===t&&(t=i),Au(t)&&t0(t[1],t),e=t&&t[4]}t=e}}(t)}}function t0(i,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function gg(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof eg)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const l=r[s[o]],u=s[o+1];try{u.call(l)}finally{}}else try{s.call(r)}finally{}}}}(i,t),function bb(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],l="function"==typeof o?o(t):Da(t[o]),u=n[r=e[s+2]],p=e[s+3];"boolean"==typeof p?l.removeEventListener(e[s],u,p):p>=0?n[r=p]():n[r=-p].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[7]=null}}(i,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Yd(t[3])){e!==t[3]&&J_(e,t);const n=t[19];null!==n&&n.detachView(i)}!function Si(i){Vn.delete(i[20])}(t)}}function Zy(i,t,e){return function Hv(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===nl.None||r===nl.Emulated)return null}return Ld(n,e)}(i,t.parent,e)}function mg(i,t,e,n,r){i.insertBefore(t,e,n,r)}function n0(i,t,e){i.appendChild(t,e)}function Cb(i,t,e,n,r){null!==n?mg(i,t,e,n,r):n0(i,t,e)}function Gv(i,t){return i.parentNode(t)}function kh(i,t,e){return Ox(i,t,e)}let Ox=function Ab(i,t,e){return 40&i.type?Ld(i,e):null};function Ib(i,t,e,n){const r=Zy(i,n,t),s=t[11],l=kh(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let u=0;u<e.length;u++)Cb(s,r,e[u],l,!1);else Cb(s,r,e,l,!1)}function Qy(i,t){if(null!==t){const e=t.type;if(3&e)return Ld(t,i);if(4&e)return uw(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return Qy(i,n);{const r=i[t.index];return Yd(r)?uw(-1,r):Da(r)}}if(32&e)return fr(t,i)()||Da(i[t.index]);{const n=Fx(i,t);return null!==n?Array.isArray(n)?n[0]:Qy(ma(i[16]),n):Qy(i,t.next)}}return null}function Fx(i,t){return null!==t?i[16][6].projection[t.projection]:null}function uw(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return Qy(n,r)}return t[7]}function fu(i,t,e,n,r,s,o){for(;null!=e;){const l=n[e.index],u=e.type;if(o&&0===t&&(l&&as(Da(l),n),e.flags|=4),64!=(64&e.flags))if(8&u)fu(i,t,e.child,n,r,s,!1),cu(t,i,r,l,s);else if(32&u){const p=fr(e,n);let v;for(;v=p();)cu(t,i,r,v,s);cu(t,i,r,l,s)}else 16&u?Bx(i,t,n,e,r,s):cu(t,i,r,l,s);e=o?e.projectionNext:e.next}}function qu(i,t,e,n,r,s){fu(e,n,i.firstChild,t,r,s,!1)}function Bx(i,t,e,n,r,s){const o=e[16],u=o[6].projection[n.projection];if(Array.isArray(u))for(let p=0;p<u.length;p++)cu(t,i,r,u[p],s);else fu(i,t,u,o[3],r,s,!0)}function Vx(i,t,e){i.setAttribute(t,"style",e)}function dw(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function Ux(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const Hx="ng-template";function pT(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==Ux(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function Gx(i){return 4===i.type&&i.value!==Hx}function Wx(i,t,e){return t===(4!==i.type||e?i.value:Hx)}function jx(i,t,e){let n=4;const r=i.attrs||[],s=function Jy(i){for(let t=0;t<i.length;t++)if(Rl(i[t]))return t;return i.length}(r);let o=!1;for(let l=0;l<t.length;l++){const u=t[l];if("number"!=typeof u){if(!o)if(4&n){if(n=2|1&n,""!==u&&!Wx(i,u,e)||""===u&&1===t.length){if(Dp(n))return!1;o=!0}}else{const p=8&n?u:t[++l];if(8&n&&null!==i.attrs){if(!pT(i.attrs,p,e)){if(Dp(n))return!1;o=!0}continue}const w=gT(8&n?"class":u,r,Gx(i),e);if(-1===w){if(Dp(n))return!1;o=!0;continue}if(""!==p){let I;I=w>s?"":r[w+1].toLowerCase();const T=8&n?I:null;if(T&&-1!==Ux(T,p,0)||2&n&&p!==I){if(Dp(n))return!1;o=!0}}}}else{if(!o&&!Dp(n)&&!Dp(u))return!1;if(o&&Dp(u))continue;o=!1,n=u|1&n}}return Dp(n)||o}function Dp(i){return 0==(1&i)}function gT(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let l=t[++r];for(;"string"==typeof l;)l=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function vT(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function $x(i,t,e=!1){for(let n=0;n<t.length;n++)if(jx(i,t[n],e))return!0;return!1}function yT(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function qx(i,t){return i?":not("+t.trim()+")":t}function _T(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const l=i[++e];r+="["+o+(l.length>0?'="'+l+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Dp(o)&&(t+=qx(s,r),r=""),n=o,s=s||!Dp(n);e++}return""!==r&&(t+=qx(s,r)),t}const mo={};function we(i){Yx(Zs(),Pi(),Bc()+i,!1)}function Yx(i,t,e,n){if(!n)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&ef(t,s,e)}else{const s=i.preOrderHooks;null!==s&&Yg(t,s,0,e)}Pf(e)}function Jx(i,t=null,e=null,n){const r=eI(i,t,e,n);return r.resolveInjectorInitializers(),r}function eI(i,t=null,e=null,n,r=new Set){const s=[e||Wo,d(i)];return n=n||("object"==typeof i?void 0:hs(i)),new At(s,t||ct(),n||null,r)}let Xu=(()=>{class i{static create(e,n){if(Array.isArray(e))return Jx({name:""},n,e,"");{const r=e.name??"";return Jx({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=Gu,i.NULL=new a,i.\u0275prov=cr({token:i,providedIn:"any",factory:()=>ai(Yy)}),i.__NG_ELEMENT_ID__=-1,i})();function qt(i,t=Es.Default){const e=Pi();return null===e?ai(i,t):sf(bt(),e,Qr(i),t)}function _w(){throw new Error("invalid")}function r0(i,t){return i<<17|t<<2}function Lp(i){return i>>17&32767}function s0(i){return 2|i}function Pp(i){return(131068&i)>>2}function bw(i,t){return-131069&i|t<<2}function Cw(i){return 1|i}function sk(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];if(-1!==s){const o=i.data[s];jg(r),o.contentQueries(2,t[s],s)}}}function pI(i,t,e,n,r,s,o,l,u,p,v){const w=t.blueprint.slice();return w[0]=r,w[2]=76|n,(null!==v||i&&1024&i[2])&&(w[2]|=1024),ps(w),w[3]=w[15]=i,w[8]=e,w[10]=o||i&&i[10],w[11]=l||i&&i[11],w[12]=u||i&&i[12]||null,w[9]=p||i&&i[9]||null,w[6]=s,w[20]=function Ai(){return ci++}(),w[21]=v,w[16]=2==t.type?i[16]:w,w}function Db(i,t,e,n,r){let s=i.data[t];if(null===s)s=function UT(i,t,e,n,r){const s=aa(),o=to(),u=i.data[t]=function K6(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(i,t,e,n,r),function Zh(){return Is.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function Zo(){const i=Is.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return La(s,!0),s}function Lb(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function gI(i,t,e){$g(t);try{const n=i.viewQuery;null!==n&&KT(1,n,e);const r=i.template;null!==r&&ok(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&sk(i,t),i.staticViewQueries&&KT(2,i.viewQuery,e);const s=i.components;null!==s&&function $6(i,t){for(let e=0;e<t.length;e++)hW(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,gl()}}function Iw(i,t,e,n){const r=t[2];if(128!=(128&r)){$g(t);try{ps(t),function Tr(i){return Is.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&ok(i,t,e,2,n);const o=3==(3&r);if(o){const p=i.preOrderCheckHooks;null!==p&&ef(t,p,null)}else{const p=i.preOrderHooks;null!==p&&Yg(t,p,0,null),Jd(t,0)}if(function uW(i){for(let t=Ur(i);null!==t;t=yl(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n],s=r[3];0==(512&r[2])&&Wg(s,1),r[2]|=512}}}(t),function cW(i){for(let t=Ur(i);null!==t;t=yl(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];oa(n)&&Iw(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&sk(i,t),o){const p=i.contentCheckHooks;null!==p&&ef(t,p)}else{const p=i.contentHooks;null!==p&&Yg(t,p,1),Jd(t,1)}!function fI(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)Pf(~r);else{const s=r,o=e[++n],l=e[++n];Qh(o,s),l(2,t[s])}}}finally{Pf(-1)}}(i,t);const l=i.components;null!==l&&function j6(i,t){for(let e=0;e<t.length;e++)dW(i,t[e])}(t,l);const u=i.viewQuery;if(null!==u&&KT(2,u,n),o){const p=i.viewCheckHooks;null!==p&&ef(t,p)}else{const p=i.viewHooks;null!==p&&Yg(t,p,2),Jd(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Wg(t[3],-1))}finally{gl()}}}function q6(i,t,e,n){const r=t[10],o=jo(t);try{!o&&r.begin&&r.begin(),o&&gI(i,t,n),Iw(i,t,e,n)}finally{!o&&r.end&&r.end()}}function ok(i,t,e,n,r){const s=Bc(),o=2&n;try{Pf(-1),o&&t.length>22&&Yx(i,t,22,!1),e(n,r)}finally{Pf(s)}}function ak(i,t,e){if(wv(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function HT(i,t,e){!zy()||(function tW(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;i.firstCreatePass||po(e,t),as(n,t);const o=e.initialInputs;for(let l=r;l<s;l++){const u=i.data[l],p=Kd(u);p&&oW(t,e,u);const v=Iu(t,i,l,e);as(v,t),null!==o&&aW(0,l-r,v,u,0,o),p&&(tu(e.index,t)[8]=v)}}(i,t,e,Ld(e,t)),128==(128&e.flags)&&function nW(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function Lf(){return Is.lFrame.currentDirectiveIndex}();try{Pf(s);for(let l=n;l<r;l++){const u=i.data[l],p=t[l];sd(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&pk(u,p)}}finally{Pf(-1),sd(o)}}(i,t,e))}function GT(i,t,e=Ld){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],l=-1===o?e(t,i):i[o];i[r++]=l}}}function lk(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=WT(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function WT(i,t,e,n,r,s,o,l,u,p){const v=22+n,w=v+r,I=function X6(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:mo);return e}(v,w),T="function"==typeof p?p():p;return I[1]={type:i,blueprint:I,template:e,queries:null,viewQuery:l,declTNode:t,data:I.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1}}function ck(i,t,e,n){const r=Ck(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&wk(i).push(n,r.length-1))}function uk(i,t,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}return e}function dk(i,t){const n=t.directiveEnd,r=i.data,s=t.attrs,o=[];let l=null,u=null;for(let p=t.directiveStart;p<n;p++){const v=r[p],w=v.inputs,I=null===s||Gx(t)?null:lW(w,s);o.push(I),l=uk(w,p,l),u=uk(v.outputs,p,u)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=16),l.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=l,t.outputs=u}function Op(i,t,e,n,r,s,o,l){const u=Ld(t,e);let v,p=t.inputs;!l&&null!=p&&(v=p[n])?(ZT(i,e,v,n,r),Ng(t)&&hk(e,t.index)):3&t.type&&(n=function Z6(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(u,n,r))}function hk(i,t){const e=tu(t,i);16&e[2]||(e[2]|=32)}function jT(i,t,e,n){let r=!1;if(zy()){const s=function iW(i,t,e){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];$x(e,o.selectors,!1)&&(r||(r=[]),vp(po(e,t),i,o.type),Kd(o)?(gk(i,e),r.unshift(o)):r.push(o))}return r}(i,t,e),o=null===n?null:{"":-1};if(null!==s){r=!0,mk(e,i.data.length,s.length);for(let v=0;v<s.length;v++){const w=s[v];w.providersResolver&&w.providersResolver(w)}let l=!1,u=!1,p=Lb(i,t,s.length,null);for(let v=0;v<s.length;v++){const w=s[v];e.mergedAttrs=eh(e.mergedAttrs,w.hostAttrs),vk(i,e,t,p,w),sW(p,w,o),null!==w.contentQueries&&(e.flags|=8),(null!==w.hostBindings||null!==w.hostAttrs||0!==w.hostVars)&&(e.flags|=128);const I=w.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),l=!0),!u&&(I.ngOnChanges||I.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),u=!0),p++}dk(i,e)}o&&function rW(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new Ei(-301,!1);n.push(t[r],s)}}}(e,n,o)}return e.mergedAttrs=eh(e.mergedAttrs,e.attrs),r}function fk(i,t,e,n,r,s){const o=s.hostBindings;if(o){let l=i.hostBindingOpCodes;null===l&&(l=i.hostBindingOpCodes=[]);const u=~t.index;(function eW(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(l)!=u&&l.push(u),l.push(n,r,o)}}function pk(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function gk(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function sW(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Kd(t)&&(e[""]=i)}}function mk(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function vk(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=up(r.type)),o=new eg(s,Kd(r),qt);i.blueprint[n]=o,e[n]=o,fk(i,t,0,n,Lb(i,e,r.hostVars,mo),r)}function oW(i,t,e){const n=Ld(t,i),r=lk(e),s=i[10],o=mI(i,pI(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=o}function Km(i,t,e,n,r,s){const o=Ld(i,t);!function $T(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const l=null==o?zs(s):o(s,n||"",r);i.setAttribute(t,r,l,e)}}(t[11],o,s,i.value,e,n,r)}function aW(i,t,e,n,r,s){const o=s[t];if(null!==o){const l=n.setInput;for(let u=0;u<o.length;){const p=o[u++],v=o[u++],w=o[u++];null!==l?n.setInput(e,w,p,v):e[v]=w}}}function lW(i,t){let e=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,i[r],t[n+1])),n+=2}else n+=2;else n+=4}return e}function yk(i,t,e,n){return new Array(i,!0,!1,t,null,0,n,e,null,null)}function dW(i,t){const e=tu(t,i);if(oa(e)){const n=e[1];48&e[2]?Iw(n,e,n.template,e[8]):e[5]>0&&qT(e)}}function qT(i){for(let n=Ur(i);null!==n;n=yl(n))for(let r=10;r<n.length;r++){const s=n[r];if(oa(s))if(512&s[2]){const o=s[1];Iw(o,s,o.template,s[8])}else s[5]>0&&qT(s)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=tu(e[n],i);oa(r)&&r[5]>0&&qT(r)}}function hW(i,t){const e=tu(t,i),n=e[1];(function fW(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),gI(n,e,e[8])}function mI(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function XT(i){for(;i;){i[2]|=32;const t=ma(i);if(Tm(i)&&!t)return i;i=t}return null}function bk(i){!function _k(i){for(let t=0;t<i.components.length;t++){const e=i.components[t],n=Mr(e);if(null!==n){const r=n[1];q6(r,n,r.template,e)}}}(i[8])}function KT(i,t,e){jg(0),t(i,e)}const gW=(()=>Promise.resolve(null))();function Ck(i){return i[7]||(i[7]=[])}function wk(i){return i.cleanup||(i.cleanup=[])}function xk(i,t){const e=i[9],n=e?e.get(lt,null):null;n&&n.handleError(t)}function ZT(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],l=e[s++],u=t[o],p=i.data[o];null!==p.setInput?p.setInput(u,r,n,l):u[l]=r}}function jv(i,t,e){const n=Gg(t,i);!function qf(i,t,e){i.setValue(t,e)}(i[11],n,e)}function vI(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const l=t[o];"number"==typeof l?s=l:1==s?r=Io(r,l):2==s&&(n=Io(n,l+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function yI(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(Da(s)),Yd(s))for(let l=10;l<s.length;l++){const u=s[l],p=u[1].firstChild;null!==p&&yI(u[1],u,p,n)}const o=e.type;if(8&o)yI(i,t,e.child,n);else if(32&o){const l=fr(e,t);let u;for(;u=l();)n.push(u)}else if(16&o){const l=Fx(t,e);if(Array.isArray(l))n.push(...l);else{const u=ma(t[16]);yI(u[1],u,l,n,!0)}}e=r?e.projectionNext:e.next}return n}class Sw{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return yI(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Yd(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(e0(t,n),ud(e,n))}this._attachedToViewContainer=!1}Ea(this._lView[1],this._lView)}onDestroy(t){ck(this._lView[1],this._lView,null,t)}markForCheck(){XT(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function YT(i,t,e){const n=t[10];n.begin&&n.begin();try{Iw(i,t,i.template,e)}catch(r){throw xk(t,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ei(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hu(i,t){qu(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ei(902,!1);this._appRef=t}}class mW extends Sw{constructor(t){super(t),this._view=t}detectChanges(){bk(this._view)}checkNoChanges(){}get context(){return null}}class QT extends Ti{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ca(t);return new Ew(e,this.ngModule)}}function Ik(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class yW{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){const r=this.injector.get(t,E,n);return r!==E||e===E?r:this.parentInjector.get(t,e,n)}}class Ew extends en{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function bT(i){return i.map(_T).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ik(this.componentDef.inputs)}get outputs(){return Ik(this.componentDef.outputs)}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof rt?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new yW(t,s):t,l=o.get(c,null);if(null===l)throw new Ei(407,!1);const u=o.get(_,null),p=l.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=n?function Y6(i,t,e){return i.selectRootElement(t,e===nl.ShadowDom)}(p,n,this.componentDef.encapsulation):Ec(l.createRenderer(null,this.componentDef),v,function vW(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(v)),I=this.componentDef.onPush?288:272,T=function AW(i,t){return{components:[],scheduler:i||Nt,clean:gW,playerHandler:t||null,flags:0}}(),k=WT(0,null,null,1,0,null,null,null,null,null),H=pI(null,k,T,I,null,null,l,p,u,o,null);let X,ue;$g(H);try{const xe=function CW(i,t,e,n,r,s){const o=e[1];e[22]=i;const u=Db(o,22,2,"#host",null),p=u.mergedAttrs=t.hostAttrs;null!==p&&(vI(u,p,!0),null!==i&&(tg(r,i,p),null!==u.classes&&dw(r,i,u.classes),null!==u.styles&&Vx(r,i,u.styles)));const v=n.createRenderer(i,t),w=pI(e,lk(t),null,t.onPush?32:16,e[22],u,n,v,s||null,null,null);return o.firstCreatePass&&(vp(po(u,e),o,t.type),gk(o,u),mk(u,e.length,1)),mI(e,w),e[22]=w}(w,this.componentDef,H,l,p);if(w)if(n)tg(p,w,["ng-version",A.full]);else{const{attrs:be,classes:Se}=function Xx(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!Dp(r))break;r=s}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);be&&tg(p,w,be),Se&&Se.length>0&&dw(p,w,Se.join(" "))}if(ue=Us(k,22),void 0!==e){const be=ue.projection=[];for(let Se=0;Se<this.ngContentSelectors.length;Se++){const Ye=e[Se];be.push(null!=Ye?Array.from(Ye):null)}}X=function wW(i,t,e,n,r){const s=e[1],o=function J6(i,t,e){const n=bt();i.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),vk(i,n,t,Lb(i,t,1,null),e),dk(i,n));const r=Iu(t,i,n.directiveStart,n);as(r,t);const s=Ld(n,t);return s&&as(s,t),r}(s,e,t);if(n.components.push(o),i[8]=o,null!==r)for(const u of r)u(o,t);if(t.contentQueries){const u=bt();t.contentQueries(1,o,u.directiveStart)}const l=bt();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Pf(l.index),fk(e[1],l,0,l.directiveStart,l.directiveEnd,t),pk(t,o)),o}(xe,this.componentDef,H,T,[xW]),gI(k,H,null)}finally{gl()}return new bW(this.componentType,X,Ji(ue,H),H,ue)}}class bW extends class Qt{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new mW(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;ZT(s[1],s,r,t,e),hk(s,this._tNode.index)}}get injector(){return new kd(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function xW(){const i=bt();kf(Pi()[1],i)}function Sl(i){let t=function Sk(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(Kd(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ei(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=JT(i.inputs),o.declaredInputs=JT(i.declaredInputs),o.outputs=JT(i.outputs);const l=r.hostBindings;l&&TW(i,l);const u=r.viewQuery,p=r.contentQueries;if(u&&SW(i,u),p&&EW(i,p),_o(i.inputs,r.inputs),_o(i.declaredInputs,r.declaredInputs),_o(i.outputs,r.outputs),Kd(r)&&r.data.animation){const v=i.data;v.animation=(v.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const l=s[o];l&&l.ngInherit&&l(i),l===Sl&&(e=!1)}}t=Object.getPrototypeOf(t)}!function IW(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=eh(r.hostAttrs,e=eh(e,r.hostAttrs))}}(n)}function JT(i){return i===Yh?{}:i===Wo?[]:i}function SW(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function EW(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function TW(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let _I=null;function o0(){if(!_I){const i=Lo.Symbol;if(i&&i.iterator)_I=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(_I=n)}}}return _I}function Tw(i){return!!eM(i)&&(Array.isArray(i)||!(i instanceof Map)&&o0()in i)}function eM(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Zm(i,t,e){return i[t]=e}function Mw(i,t){return i[t]}function Fh(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function a0(i,t,e,n){const r=Fh(i,t,e);return Fh(i,t+1,n)||r}function bI(i,t,e,n,r){const s=a0(i,t,e,n);return Fh(i,t+2,r)||s}function vg(i,t,e,n,r,s){const o=a0(i,t,e,n);return a0(i,t+2,r,s)||o}function Lr(i,t,e,n){const r=Pi();return Fh(r,Qd(),t)&&(Zs(),Km(ml(),r,i,t,e,n)),Lr}function Rb(i,t,e,n){return Fh(i,Qd(),e)?t+zs(e)+n:mo}function kb(i,t,e,n,r,s){const l=a0(i,function pl(){return Is.lFrame.bindingIndex}(),e,r);return Hl(2),l?t+zs(e)+n+zs(r)+s:mo}function ze(i,t,e,n,r,s,o,l){const u=Pi(),p=Zs(),v=i+22,w=p.firstCreatePass?function NW(i,t,e,n,r,s,o,l,u){const p=t.consts,v=Db(t,i,4,o||null,go(p,l));jT(t,e,v,go(p,u)),kf(t,v);const w=v.tViews=WT(2,v,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,p);return null!==t.queries&&(t.queries.template(t,v),w.queries=t.queries.embeddedTView(v)),v}(v,p,u,t,e,n,r,s,o):p.data[v];La(w,!1);const I=u[11].createComment("");Ib(p,u,I,w),as(I,u),mI(u,u[v]=yk(I,u,I,w)),Bg(w)&&HT(p,u,w),null!=o&&GT(u,w,l)}function Po(i){return Ul(function Or(){return Is.lFrame.contextLView}(),22+i)}function de(i,t,e){const n=Pi();return Fh(n,Qd(),t)&&Op(Zs(),ml(),n,i,t,n[11],e,!1),de}function tM(i,t,e,n,r){const o=r?"class":"style";ZT(i,e,t.inputs[o],o,n)}function Xe(i,t,e,n){const r=Pi(),s=Zs(),o=22+i,l=r[11],u=r[o]=Ec(l,t,function Rf(){return Is.lFrame.currentNamespace}()),p=s.firstCreatePass?function zW(i,t,e,n,r,s,o){const l=t.consts,p=Db(t,i,2,r,go(l,s));return jT(t,e,p,go(l,o)),null!==p.attrs&&vI(p,p.attrs,!1),null!==p.mergedAttrs&&vI(p,p.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,p),p}(o,s,r,0,t,e,n):s.data[o];La(p,!0);const v=p.mergedAttrs;null!==v&&tg(l,u,v);const w=p.classes;null!==w&&dw(l,u,w);const I=p.styles;return null!==I&&Vx(l,u,I),64!=(64&p.flags)&&Ib(s,r,u,p),0===function bh(){return Is.lFrame.elementDepthCount}()&&as(u,r),function Qp(){Is.lFrame.elementDepthCount++}(),Bg(p)&&(HT(s,r,p),ak(s,p,r)),null!==n&&GT(r,p),Xe}function Ke(){let i=bt();to()?Jp():(i=i.parent,La(i,!1));const t=i;!function W_(){Is.lFrame.elementDepthCount--}();const e=Zs();return e.firstCreatePass&&(kf(e,i),wv(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function Rv(i){return 0!=(16&i.flags)}(t)&&tM(e,t,Pi(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function j_(i){return 0!=(32&i.flags)}(t)&&tM(e,t,Pi(),t.stylesWithoutHost,!1),Ke}function Kn(i,t,e,n){return Xe(i,t,e,n),Ke(),Kn}function is(i,t,e){const n=Pi(),r=Zs(),s=i+22,o=r.firstCreatePass?function VW(i,t,e,n,r){const s=t.consts,o=go(s,n),l=Db(t,i,8,"ng-container",o);return null!==o&&vI(l,o,!0),jT(t,e,l,go(s,r)),null!==t.queries&&t.queries.elementStart(t,l),l}(s,r,n,t,e):r.data[s];La(o,!0);const l=n[s]=n[11].createComment("");return Ib(r,n,l,o),as(l,n),Bg(o)&&(HT(r,n,o),ak(r,o,n)),null!=e&&GT(n,o),is}function rs(){let i=bt();const t=Zs();return to()?Jp():(i=i.parent,La(i,!1)),t.firstCreatePass&&(kf(t,i),wv(i)&&t.queries.elementEnd(i)),rs}function qi(i,t,e){return is(i,t,e),rs(),qi}function Di(){return Pi()}function Dw(i){return!!i&&"function"==typeof i.then}const nM=function Fk(i){return!!i&&"function"==typeof i.subscribe};function _n(i,t,e,n){const r=Pi(),s=Zs(),o=bt();return function Bk(i,t,e,n,r,s,o,l){const u=Bg(n),v=i.firstCreatePass&&wk(i),w=t[8],I=Ck(t);let T=!0;if(3&n.type||l){const X=Ld(n,t),ue=l?l(X):X,xe=I.length,be=l?Ye=>l(Da(Ye[n.index])):n.index;let Se=null;if(!l&&u&&(Se=function UW(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const l=t[7],u=r[s+2];return l.length>u?l[u]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==Se)(Se.__ngLastListenerFn__||Se).__ngNextListenerFn__=s,Se.__ngLastListenerFn__=s,T=!1;else{s=Vk(n,t,w,s,!1);const Ye=e.listen(ue,r,s);I.push(s,Ye),v&&v.push(r,be,xe,xe+1)}}else s=Vk(n,t,w,s,!1);const k=n.outputs;let H;if(T&&null!==k&&(H=k[r])){const X=H.length;if(X)for(let ue=0;ue<X;ue+=2){const gt=t[H[ue]][H[ue+1]].subscribe(s),zt=I.length;I.push(s,gt),v&&v.push(r,n.index,zt,-(zt+1))}}}(s,r,r[11],o,i,t,0,n),_n}function zk(i,t,e,n){try{return!1!==e(n)}catch(r){return xk(i,r),!1}}function Vk(i,t,e,n,r){return function s(o){if(o===Function)return n;XT(2&i.flags?tu(i.index,t):t);let u=zk(t,0,n,o),p=s.__ngNextListenerFn__;for(;p;)u=zk(t,0,p,o)&&u,p=p.__ngNextListenerFn__;return r&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function ye(i=1){return function Kl(i){return(Is.lFrame.contextLView=function Jh(i,t){for(;i>0;)t=t[15],i--;return t}(i,Is.lFrame.contextLView))[8]}(i)}function HW(i,t){let e=null;const n=function mT(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?$x(i,s,!0):yT(n,s))return r}else e=r}return e}function Xf(i){const t=Pi()[16][6];if(!t.projection){const n=t.projection=Ql(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?HW(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function Mu(i,t=0,e){const n=Pi(),r=Zs(),s=Db(r,22+i,16,null,e||null);null===s.projection&&(s.projection=t),Jp(),64!=(64&s.flags)&&function dT(i,t,e){Bx(t[11],0,t,e,Zy(i,e,t),kh(e.parent||t[6],e,t))}(r,n,s)}function l0(i,t,e){return CI(i,"",t,"",e),l0}function CI(i,t,e,n,r){const s=Pi(),o=Rb(s,t,e,n);return o!==mo&&Op(Zs(),ml(),s,i,o,s[11],r,!1),CI}function Yk(i,t,e,n,r){const s=i[e+1],o=null===t;let l=n?Lp(s):Pp(s),u=!1;for(;0!==l&&(!1===u||o);){const v=i[l+1];jW(i[l],t)&&(u=!0,i[l+1]=n?Cw(v):s0(v)),l=n?Lp(v):Pp(v)}u&&(i[e+1]=n?s0(s):Cw(s))}function jW(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Qo(i,t)>=0}const md={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Kk(i){return i.substring(md.key,md.keyEnd)}function $W(i){return i.substring(md.value,md.valueEnd)}function Zk(i,t){const e=md.textEnd;return e===t?-1:(t=md.keyEnd=function YW(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,md.key=t,e),Ub(i,t,e))}function Qk(i,t){const e=md.textEnd;let n=md.key=Ub(i,t,e);return e===n?-1:(n=md.keyEnd=function KW(i,t,e){let n;for(;t<e&&(45===(n=i.charCodeAt(t))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)t++;return t}(i,n,e),n=eO(i,n,e),n=md.value=Ub(i,n,e),n=md.valueEnd=function ZW(i,t,e){let n=-1,r=-1,s=-1,o=t,l=o;for(;o<e;){const u=i.charCodeAt(o++);if(59===u)return l;34===u||39===u?l=o=tO(i,u,o,e):t===o-4&&85===s&&82===r&&76===n&&40===u?l=o=tO(i,41,o,e):u>32&&(l=o),s=r,r=n,n=-33&u}return l}(i,n,e),eO(i,n,e))}function Jk(i){md.key=0,md.keyEnd=0,md.value=0,md.valueEnd=0,md.textEnd=i.length}function Ub(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function eO(i,t,e,n){return(t=Ub(i,t,e))<e&&t++,t}function tO(i,t,e,n){let r=-1,s=e;for(;s<n;){const o=i.charCodeAt(s++);if(o==t&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function Nh(i,t,e){return cm(i,t,e,!1),Nh}function Fp(i,t){return cm(i,t,null,!0),Fp}function To(i){um(rO,QW,i,!1)}function QW(i,t){for(let e=function XW(i){return Jk(i),Qk(i,Ub(i,0,md.textEnd))}(t);e>=0;e=Qk(t,e))rO(i,Kk(t),$W(t))}function Yr(i){um(Jl,Qm,i,!0)}function Qm(i,t){for(let e=function qW(i){return Jk(i),Zk(i,Ub(i,0,md.textEnd))}(t);e>=0;e=Zk(t,e))Jl(i,Kk(t),!0)}function cm(i,t,e,n){const r=Pi(),s=Zs(),o=Hl(2);s.firstUpdatePass&&iO(s,i,o,n),t!==mo&&Fh(r,o,t)&&sO(s,s.data[Bc()],r,r[11],i,r[o+1]=function o9(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=hs(jl(i)))),i}(t,e),n,o)}function um(i,t,e,n){const r=Zs(),s=Hl(2);r.firstUpdatePass&&iO(r,null,s,n);const o=Pi();if(e!==mo&&Fh(o,s,e)){const l=r.data[Bc()];if(aO(l,n)&&!nO(r,s)){let u=n?l.classesWithoutHost:l.stylesWithoutHost;null!==u&&(e=Io(u,e||"")),tM(r,l,o,e,n)}else!function s9(i,t,e,n,r,s,o,l){r===mo&&(r=Wo);let u=0,p=0,v=0<r.length?r[0]:null,w=0<s.length?s[0]:null;for(;null!==v||null!==w;){const I=u<r.length?r[u+1]:void 0,T=p<s.length?s[p+1]:void 0;let H,k=null;v===w?(u+=2,p+=2,I!==T&&(k=w,H=T)):null===w||null!==v&&v<w?(u+=2,k=v):(p+=2,k=w,H=T),null!==k&&sO(i,t,e,n,k,H,o,l),v=u<r.length?r[u]:null,w=p<s.length?s[p]:null}}(r,l,o,o[11],o[s+1],o[s+1]=function r9(i,t,e){if(null==e||""===e)return Wo;const n=[],r=jl(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}function nO(i,t){return t>=i.expandoStartIndex}function iO(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[Bc()],o=nO(i,e);aO(s,n)&&null===t&&!o&&(t=!1),t=function JW(i,t,e,n){const r=function Ms(i){const t=Is.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=Lw(e=iM(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=iM(r,i,t,e,n),null===s){let u=function e9(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==Pp(n))return i[Lp(n)]}(i,t,n);void 0!==u&&Array.isArray(u)&&(u=iM(null,i,t,u[1],n),u=Lw(u,t.attrs,n),function t9(i,t,e,n){i[Lp(e?t.classBindings:t.styleBindings)]=n}(i,t,n,u))}else s=function n9(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=Lw(n,i[s].hostAttrs,e);return Lw(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function GW(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,l=Lp(o),u=Pp(o);i[n]=e;let v,p=!1;if(Array.isArray(e)){const w=e;v=w[1],(null===v||Qo(w,v)>0)&&(p=!0)}else v=e;if(r)if(0!==u){const I=Lp(i[l+1]);i[n+1]=r0(I,l),0!==I&&(i[I+1]=bw(i[I+1],n)),i[l+1]=function OT(i,t){return 131071&i|t<<17}(i[l+1],n)}else i[n+1]=r0(l,0),0!==l&&(i[l+1]=bw(i[l+1],n)),l=n;else i[n+1]=r0(u,0),0===l?l=n:i[u+1]=bw(i[u+1],n),u=n;p&&(i[n+1]=s0(i[n+1])),Yk(i,v,n,!0),Yk(i,v,n,!1),function WW(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Qo(s,t)>=0&&(e[n+1]=Cw(e[n+1]))}(t,v,i,n,s),o=r0(l,u),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function iM(i,t,e,n,r){let s=null;const o=e.directiveEnd;let l=e.directiveStylingLast;for(-1===l?l=e.directiveStart:l++;l<o&&(s=t[l],n=Lw(n,s.hostAttrs,r),s!==i);)l++;return null!==i&&(e.directiveStylingLast=l),n}function Lw(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Jl(i,o,!!e||t[++s]))}return void 0===i?null:i}function rO(i,t,e){Jl(i,t,jl(e))}function sO(i,t,e,n,r,s,o,l){if(!(3&t.type))return;const u=i.data,p=u[l+1];wI(function cI(i){return 1==(1&i)}(p)?oO(u,t,e,r,Pp(p),o):void 0)||(wI(s)||function lI(i){return 2==(2&i)}(p)&&(s=oO(u,null,e,r,l,o)),function zx(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:Ki.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ki.Important),i.setStyle(e,n,r,s))}}(n,o,Gg(Bc(),e),r,s))}function oO(i,t,e,n,r,s){const o=null===t;let l;for(;r>0;){const u=i[r],p=Array.isArray(u),v=p?u[1]:u,w=null===v;let I=e[r+1];I===mo&&(I=w?Wo:void 0);let T=w?Vc(I,n):v===n?I:void 0;if(p&&!wI(T)&&(T=Vc(u,n)),wI(T)&&(l=T,o))return l;const k=i[r+1];r=o?Lp(k):Pp(k)}if(null!==t){let u=s?t.residualClasses:t.residualStyles;null!=u&&(l=Vc(u,n))}return l}function wI(i){return void 0!==i}function aO(i,t){return 0!=(i.flags&(t?16:32))}function bi(i,t=""){const e=Pi(),n=Zs(),r=i+22,s=n.firstCreatePass?Db(n,r,1,t,null):n.data[r],o=e[r]=function Tp(i,t){return i.createText(t)}(e[11],t);Ib(n,e,o,s),La(s,!1)}function As(i){return jc("",i,""),As}function jc(i,t,e){const n=Pi(),r=Rb(n,i,t,e);return r!==mo&&jv(n,Bc(),r),jc}function AI(i,t,e,n,r){const s=Pi(),o=kb(s,i,t,e,n,r);return o!==mo&&jv(s,Bc(),o),AI}const c0=void 0;var S9=["en",[["a","p"],["AM","PM"],c0],[["AM","PM"],c0,c0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],c0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],c0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",c0,"{1} 'at' {0}",c0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function I9(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Hb={};function yf(i){const t=function E9(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=EO(t);if(e)return e;const n=t.split("-")[0];if(e=EO(n),e)return e;if("en"===n)return S9;throw new Ei(701,!1)}function EO(i){return i in Hb||(Hb[i]=Lo.ng&&Lo.ng.common&&Lo.ng.common.locales&&Lo.ng.common.locales[i]),Hb[i]}var ss=(()=>((ss=ss||{})[ss.LocaleId=0]="LocaleId",ss[ss.DayPeriodsFormat=1]="DayPeriodsFormat",ss[ss.DayPeriodsStandalone=2]="DayPeriodsStandalone",ss[ss.DaysFormat=3]="DaysFormat",ss[ss.DaysStandalone=4]="DaysStandalone",ss[ss.MonthsFormat=5]="MonthsFormat",ss[ss.MonthsStandalone=6]="MonthsStandalone",ss[ss.Eras=7]="Eras",ss[ss.FirstDayOfWeek=8]="FirstDayOfWeek",ss[ss.WeekendRange=9]="WeekendRange",ss[ss.DateFormat=10]="DateFormat",ss[ss.TimeFormat=11]="TimeFormat",ss[ss.DateTimeFormat=12]="DateTimeFormat",ss[ss.NumberSymbols=13]="NumberSymbols",ss[ss.NumberFormats=14]="NumberFormats",ss[ss.CurrencyCode=15]="CurrencyCode",ss[ss.CurrencySymbol=16]="CurrencySymbol",ss[ss.CurrencyName=17]="CurrencyName",ss[ss.Currencies=18]="Currencies",ss[ss.Directionality=19]="Directionality",ss[ss.PluralCase=20]="PluralCase",ss[ss.ExtraData=21]="ExtraData",ss))();const Gb="en-US";let TO=Gb;function oM(i,t,e,n,r){if(i=Qr(i),Array.isArray(i))for(let s=0;s<i.length;s++)oM(i[s],t,e,n,r);else{const s=Zs(),o=Pi();let l=me(i)?i:Qr(i.provide),u=Cn(i);const p=bt(),v=1048575&p.providerIndexes,w=p.directiveStart,I=p.providerIndexes>>20;if(me(i)||!i.multi){const T=new eg(u,r,qt),k=lM(l,t,r?v:v+I,w);-1===k?(vp(po(p,o),s,l),aM(s,i,t.length),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(T),o.push(T)):(e[k]=T,o[k]=T)}else{const T=lM(l,t,v+I,w),k=lM(l,t,v,v+I),H=T>=0&&e[T],X=k>=0&&e[k];if(r&&!X||!r&&!H){vp(po(p,o),s,l);const ue=function I7(i,t,e,n,r){const s=new eg(i,e,qt);return s.multi=[],s.index=t,s.componentProviders=0,JO(s,r,n&&!e),s}(r?x7:A7,e.length,r,n,u);!r&&X&&(e[k].providerFactory=ue),aM(s,i,t.length,0),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(ue),o.push(ue)}else aM(s,i,T>-1?T:k,JO(e[r?k:T],u,!r&&n));!r&&n&&X&&e[k].componentProviders++}}}function aM(i,t,e,n){const r=me(t),s=function _e(i){return!!i.useClass}(t);if(r||s){const u=(s?Qr(t.useClass):t).prototype.ngOnDestroy;if(u){const p=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const v=p.indexOf(e);-1===v?p.push(e,[n,u]):p[v+1].push(n,u)}else p.push(e,u)}}}function JO(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function lM(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function A7(i,t,e,n){return cM(this.multi,[])}function x7(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,l=Iu(e,e[1],this.providerFactory.index,n);s=l.slice(0,o),cM(r,s);for(let u=o;u<l.length;u++)s.push(l[u])}else s=[],cM(r,s);return s}function cM(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function Xo(i,t=[]){return e=>{e.providersResolver=(n,r)=>function w7(i,t,e){const n=Zs();if(n.firstCreatePass){const r=Kd(i);oM(e,n.data,n.blueprint,r,!0),oM(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class u0{}class eF{}class tF extends u0{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new QT(this);const n=Fu(t);this._bootstrapComponents=vn(n.bootstrap),this._r3Injector=eI(t,e,[{provide:u0,useValue:this},{provide:Ti,useValue:this.componentFactoryResolver}],hs(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class uM extends eF{constructor(t){super(),this.moduleType=t}create(t){return new tF(this.moduleType,t)}}class E7 extends u0{constructor(t,e,n){super(),this.componentFactoryResolver=new QT(this),this.instance=null;const r=new At([...t,{provide:u0,useValue:this},{provide:Ti,useValue:this.componentFactoryResolver}],e||ct(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function TI(i,t,e=null){return new E7(i,t,e).injector}function Oo(i,t,e){const n=la()+i,r=Pi();return r[n]===mo?Zm(r,n,e?t.call(e):t()):Mw(r,n)}function Li(i,t,e,n){return cF(Pi(),la(),i,t,e,n)}function Ts(i,t,e,n,r){return function uF(i,t,e,n,r,s,o){const l=t+e;return a0(i,l,r,s)?Zm(i,l+2,o?n.call(o,r,s):n(r,s)):Fw(i,l+2)}(Pi(),la(),i,t,e,n,r)}function Yu(i,t,e,n,r,s){return function dF(i,t,e,n,r,s,o,l){const u=t+e;return bI(i,u,r,s,o)?Zm(i,u+3,l?n.call(l,r,s,o):n(r,s,o)):Fw(i,u+3)}(Pi(),la(),i,t,e,n,r,s)}function _f(i,t,e,n,r,s,o){return function hF(i,t,e,n,r,s,o,l,u){const p=t+e;return vg(i,p,r,s,o,l)?Zm(i,p+4,u?n.call(u,r,s,o,l):n(r,s,o,l)):Fw(i,p+4)}(Pi(),la(),i,t,e,n,r,s,o)}function d0(i,t,e,n,r,s,o,l){const u=la()+i,p=Pi(),v=vg(p,u,e,n,r,s);return Fh(p,u+4,o)||v?Zm(p,u+5,l?t.call(l,e,n,r,s,o):t(e,n,r,s,o)):Mw(p,u+5)}function jb(i,t,e,n,r,s,o,l,u){const p=la()+i,v=Pi(),w=vg(v,p,e,n,r,s);return a0(v,p+4,o,l)||w?Zm(v,p+6,u?t.call(u,e,n,r,s,o,l):t(e,n,r,s,o,l)):Mw(v,p+6)}function hM(i,t,e,n){return function fF(i,t,e,n,r,s){let o=t+e,l=!1;for(let u=0;u<r.length;u++)Fh(i,o++,r[u])&&(l=!0);return l?Zm(i,o,n.apply(s,r)):Fw(i,o)}(Pi(),la(),i,t,e,n)}function Fw(i,t){const e=i[t];return e===mo?void 0:e}function cF(i,t,e,n,r,s){const o=t+e;return Fh(i,o,r)?Zm(i,o+1,s?n.call(s,r):n(r)):Fw(i,o+1)}function fM(i){return t=>{setTimeout(i,void 0,t)}}const qn=class W7 extends Ze{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const u=t;r=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=fM(s),r&&(r=fM(r)),o&&(o=fM(o)));const l=super.subscribe({next:r,error:s,complete:o});return t instanceof j&&t.add(l),l}};function j7(){return this._results[o0()]()}class pM{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=o0(),n=pM.prototype;n[e]||(n[e]=j7)}get changes(){return this._changes||(this._changes=new qn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=vl(t);(this._changesDetected=!function cf(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dm=(()=>{class i{}return i.__NG_ELEMENT_ID__=X7,i})();const $7=dm,q7=class extends $7{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tViews,r=pI(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),gI(n,r,t),new Sw(r)}};function X7(){return MI(bt(),Pi())}function MI(i,t){return 4&i.type?new q7(t,i,Ji(i,t)):null}let yg=(()=>{class i{}return i.__NG_ELEMENT_ID__=Y7,i})();function Y7(){return yF(bt(),Pi())}const K7=yg,mF=class extends K7{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ji(this._hostTNode,this._hostLView)}get injector(){return new kd(this._hostTNode,this._hostLView)}get parentInjector(){const t=ou(this._hostTNode,this._hostLView);if(th(t)){const e=zu(t,this._hostLView),n=Pd(t);return new kd(e[1].data[n+8],e)}return new kd(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=vF(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,n,r,s){const o=t&&!function Zl(i){return"function"==typeof i}(t);let l;if(o)l=e;else{const w=e||{};l=w.index,n=w.injector,r=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const u=o?t:new Ew(Ca(t)),p=n||this.parentInjector;if(!s&&null==u.ngModule){const I=(o?p:this.parentInjector).get(rt,null);I&&(s=I)}const v=u.create(p,r,void 0,s);return this.insert(v.hostView,l),v}insert(t,e){const n=t._lView,r=n[1];if(function ts(i){return Yd(i[3])}(n)){const v=this.indexOf(t);if(-1!==v)this.detach(v);else{const w=n[3],I=new mF(w,w[6],w[3]);I.detach(I.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function _b(i,t,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=t),n<s-10?(t[4]=e[r],cd(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function Rh(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(o,t);const l=t[19];null!==l&&l.insertView(i),t[2]|=64}(r,n,o,s);const l=uw(s,o),u=n[11],p=Gv(u,o[7]);return null!==p&&function Mp(i,t,e,n,r,s){n[0]=r,n[6]=t,qu(i,n,e,1,r,s)}(r,o[6],u,n,p,l),t.attachToViewContainerRef(),cd(gM(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=vF(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=e0(this._lContainer,e);n&&(ud(gM(this._lContainer),e),Ea(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=e0(this._lContainer,e);return n&&null!=ud(gM(this._lContainer),e)?new Sw(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function vF(i){return i[8]}function gM(i){return i[8]||(i[8]=[])}function yF(i,t){let e;const n=t[i.index];if(Yd(n))e=n;else{let r;if(8&i.type)r=Da(n);else{const s=t[11];r=s.createComment("");const o=Ld(i,t);mg(s,Gv(s,o),r,function Wv(i,t){return i.nextSibling(t)}(s,o),!1)}t[i.index]=e=yk(n,t,r,i),mI(t,e)}return new mF(e,i,t)}class mM{constructor(t){this.queryList=t,this.matches=null}clone(){return new mM(this.queryList)}setDirty(){this.queryList.setDirty()}}class vM{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new vM(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==AF(t,e).matches&&this.queries[e].setDirty()}}class _F{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class yM{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new yM(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class _M{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new _M(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,J7(e,s)),this.matchTNodeWithReadOption(t,e,nh(e,t,s,!1,!1))}else n===dm?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,nh(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===oi||r===yg||r===dm&&4&e.type)this.addMatch(e.index,-2);else{const s=nh(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function J7(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function tj(i,t,e,n){return-1===e?function ej(i,t){return 11&i.type?Ji(i,t):4&i.type?MI(i,t):null}(t,i):-2===e?function nj(i,t,e){return e===oi?Ji(t,i):e===dm?MI(t,i):e===yg?yF(t,i):void 0}(i,t,n):Iu(i,i[1],e,t)}function bF(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const s=i.data,o=e.matches,l=[];for(let u=0;u<o.length;u+=2){const p=o[u];l.push(p<0?null:tj(t,s[p],o[u+1],e.metadata.read))}r.matches=l}return r.matches}function bM(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=bF(i,t,r,e);for(let l=0;l<s.length;l+=2){const u=s[l];if(u>0)n.push(o[l/2]);else{const p=s[l+1],v=t[-u];for(let w=10;w<v.length;w++){const I=v[w];I[17]===I[3]&&bM(I[1],I,p,n)}if(null!==v[9]){const w=v[9];for(let I=0;I<w.length;I++){const T=w[I];bM(T[1],T,p,n)}}}}}return n}function tr(i){const t=Pi(),e=Zs(),n=iu();jg(n+1);const r=AF(e,n);if(i.dirty&&jo(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?bM(e,t,n,[]):bF(e,t,r,n);i.reset(s,ii),i.notifyOnChanges()}return!0}return!1}function Hr(i,t,e){const n=Zs();n.firstCreatePass&&(wF(n,new _F(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),CF(n,Pi(),t)}function dl(i,t,e,n){const r=Zs();if(r.firstCreatePass){const s=bt();wF(r,new _F(t,e,n),s.index),function rj(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}CF(r,Pi(),e)}function nr(){return function ij(i,t){return i[19].queries[t].queryList}(Pi(),iu())}function CF(i,t,e){const n=new pM(4==(4&e));ck(i,t,n,n.destroy),null===t[19]&&(t[19]=new vM),t[19].queries.push(new mM(n))}function wF(i,t,e){null===i.queries&&(i.queries=new yM),i.queries.track(new _M(t,e))}function AF(i,t){return i.queries.getByIndex(t)}function Mc(i,t){return MI(i,t)}function LI(...i){}const zw=new vr("Application Initializer");let PI=(()=>{class i{constructor(e){this.appInits=e,this.resolve=LI,this.reject=LI,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Dw(s))e.push(s);else if(nM(s)){const o=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(ai(zw,8))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Vw=new vr("AppId",{providedIn:"root",factory:function HF(){return`${IM()}${IM()}${IM()}`}});function IM(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GF=new vr("Platform Initializer"),Yb=new vr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),WF=new vr("appBootstrapListener"),jF=new vr("AnimationModuleType");let xj=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const $v=new vr("LocaleId",{providedIn:"root",factory:()=>Ba($v,Es.Optional|Es.SkipSelf)||function Ij(){return typeof $localize<"u"&&$localize.locale||Gb}()});class Ej{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let SM=(()=>{class i{compileModuleSync(e){return new uM(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=vn(Fu(e).declarations).reduce((o,l)=>{const u=Ca(l);return u&&o.push(new Ew(u)),o},[]);return new Ej(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Dj=(()=>Promise.resolve(0))();function EM(i){typeof Zone>"u"?Dj.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ua{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qn(!1),this.onMicrotaskEmpty=new qn(!1),this.onStable=new qn(!1),this.onError=new qn(!1),typeof Zone>"u")throw new Ei(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Lj(){let i=Lo.requestAnimationFrame,t=Lo.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function kj(i){const t=()=>{!function Rj(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Lo,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,MM(i),i.isCheckStableRunning=!0,TM(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),MM(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,l)=>{try{return XF(i),e.invokeTask(r,s,o,l)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),YF(i)}},onInvoke:(e,n,r,s,o,l,u)=>{try{return XF(i),e.invoke(r,s,o,l,u)}finally{i.shouldCoalesceRunChangeDetection&&t(),YF(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,MM(i),TM(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ua.isInAngularZone())throw new Ei(909,!1)}static assertNotInAngularZone(){if(ua.isInAngularZone())throw new Ei(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,Pj,LI,LI);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Pj={};function TM(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function MM(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function XF(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function YF(i){i._nesting--,TM(i)}class Oj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qn,this.onMicrotaskEmpty=new qn,this.onStable=new qn,this.onError=new qn}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const KF=new vr(""),RI=new vr("");let PM,DM=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,PM||(function Fj(i){PM=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ua.assertNotInAngularZone(),EM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())EM(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(ai(ua),ai(LM),ai(RI))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),LM=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return PM?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),e_=null;const ZF=new vr("AllowMultipleToken"),RM=new vr("PlatformDestroyListeners");class QF{constructor(t,e){this.name=t,this.token=e}}function eN(i,t,e=[]){const n=`Platform: ${t}`,r=new vr(n);return(s=[])=>{let o=kM();if(!o||o.injector.get(ZF,!1)){const l=[...e,...s,{provide:r,useValue:!0}];i?i(l):function zj(i){if(e_&&!e_.get(ZF,!1))throw new Ei(400,!1);e_=i;const t=i.get(nN);(function JF(i){const t=i.get(GF,null);t&&t.forEach(e=>e())})(i)}(function tN(i=[],t){return Xu.create({name:t,providers:[{provide:Oe,useValue:"platform"},{provide:RM,useValue:new Set([()=>e_=null])},...i]})}(l,n))}return function Uj(i){const t=kM();if(!t)throw new Ei(401,!1);return t}()}}function kM(){return e_?.get(nN)??null}let nN=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function Hj(i,t){let e;return e="noop"===i?new Oj:("zone.js"===i?void 0:i)||new ua(t),e}(n?.ngZone,function iN(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:ua,useValue:r}];return r.run(()=>{const o=Xu.create({providers:s,parent:this.injector,name:e.moduleType.name}),l=e.create(o),u=l.injector.get(lt,null);if(!u)throw new Ei(402,!1);return r.runOutsideAngular(()=>{const p=r.onError.subscribe({next:v=>{u.handleError(v)}});l.onDestroy(()=>{kI(this._modules,l),p.unsubscribe()})}),function rN(i,t,e){try{const n=e();return Dw(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(u,r,()=>{const p=l.injector.get(PI);return p.runInitializers(),p.donePromise.then(()=>(function MO(i){Qc(i,"Expected localeId to be defined"),"string"==typeof i&&(TO=i.toLowerCase().replace(/_/g,"-"))}(l.injector.get($v,Gb)||Gb),this._moduleDoBootstrap(l),l))})})}bootstrapModule(e,n=[]){const r=sN({},n);return function Nj(i,t,e){const n=new uM(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(Uw);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Ei(403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ei(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(RM,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(ai(Xu))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function sN(i,t){return Array.isArray(t)?t.reduce(sN,i):{...i,...t}}let Uw=(()=>{class i{constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new _t(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),o=new _t(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{ua.assertNotInAngularZone(),EM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const p=this._zone.onUnstable.subscribe(()=>{ua.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),p.unsubscribe()}});this.isStable=function dr(...i){const t=pe(i),e=function Te(i,t){return"number"==typeof dt(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?Nn(n[0]):ya(e)(gr(n,t)):sa}(s,o.pipe(ys()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){const r=e instanceof en;if(!this._injector.get(PI).done)throw!r&&function qb(i){const t=Ca(i)||ac(i)||rl(i);return null!==t&&t.standalone}(e),new Ei(405,false);let o;o=r?e:this._injector.get(Ti).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const l=function Bj(i){return i.isBoundToModule}(o)?void 0:this._injector.get(u0),p=o.create(Xu.NULL,[],n||o.selector,l),v=p.location.nativeElement,w=p.injector.get(KF,null);return w?.registerApplication(v),p.onDestroy(()=>{this.detachView(p.hostView),kI(this.components,p),w?.unregisterApplication(v)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new Ei(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;kI(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(WF,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>kI(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new Ei(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(ai(ua),ai(rt),ai(lt))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function kI(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let aN=!0,lN=!1;function cN(){return lN=!0,aN}let Yo=(()=>{class i{}return i.__NG_ELEMENT_ID__=jj,i})();function jj(i){return function $j(i,t,e){if(Ng(i)&&!e){const n=tu(i.index,t);return new Sw(n,n)}return 47&i.type?new Sw(t[16],t):null}(bt(),Pi(),16==(16&i))}class fN{constructor(){}supports(t){return Tw(t)}create(t){return new Qj(t)}}const Zj=(i,t)=>t;class Qj{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Zj}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<gN(n,r,s)?e:n,l=gN(o,r,s),u=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const p=l-r,v=u-r;if(p!=v){for(let I=0;I<p;I++){const T=I<s.length?s[I]:s[I]=0,k=T+I;v<=k&&k<p&&(s[I]=T+1)}s[o.previousIndex]=v-p}}l!==u&&t(o,l,u)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Tw(t))throw new Ei(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)s=t[l],o=this._trackByFn(l,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,l)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,l),n=!0),e=e._next}else r=0,function RW(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[o0()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,l=>{o=this._trackByFn(r,l),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,l,o,r)),Object.is(e.item,l)||this._addIdentityChange(e,l)):(e=this._mismatch(e,l,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new Jj(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new pN),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pN),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Jj{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class e${constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class pN{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new e$,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gN(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class mN{constructor(){}supports(t){return t instanceof Map||eM(t)}create(){return new t$}}class t${constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||eM(t)))throw new Ei(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new n$(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class n${constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vN(){return new NI([new fN])}let NI=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||vN()),deps:[[i,new Fd,new tc]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new Ei(901,!1)}}return i.\u0275prov=cr({token:i,providedIn:"root",factory:vN}),i})();function yN(){return new Hw([new mN])}let Hw=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||yN()),deps:[[i,new Fd,new tc]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new Ei(901,!1)}}return i.\u0275prov=cr({token:i,providedIn:"root",factory:yN}),i})();const s$=eN(null,"core",[]);let o$=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(ai(Uw))},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({}),i})();function Xv(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}let BI=null;function Jm(){return BI}const vd=new vr("DocumentToken");let zM=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:function(){return function u$(){return ai(_N)}()},providedIn:"platform"}),i})();const d$=new vr("Location Initialized");let _N=(()=>{class i extends zM{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jm().getBaseHref(this._doc)}onPopState(e){const n=Jm().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Jm().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){bN()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){bN()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(ai(vd))},i.\u0275prov=cr({token:i,factory:function(){return function h$(){return new _N(ai(vd))}()},providedIn:"platform"}),i})();function bN(){return!!window.history.pushState}function VM(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function CN(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function Yv(i){return i&&"?"!==i[0]?"?"+i:i}let f0=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:function(){return Ba(AN)},providedIn:"root"}),i})();const wN=new vr("appBaseHref");let AN=(()=>{class i extends f0{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Ba(vd).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return VM(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Yv(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+Yv(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+Yv(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(ai(zM),ai(wN,8))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),f$=(()=>{class i extends f0{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=VM(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+Yv(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+Yv(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(ai(zM),ai(wN,8))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),UM=(()=>{class i{constructor(e){this._subject=new qn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._baseHref=CN(xN(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Yv(n))}normalize(e){return i.stripTrailingSlash(function g$(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,xN(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Yv(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Yv(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=Yv,i.joinWithSlash=VM,i.stripTrailingSlash=CN,i.\u0275fac=function(e){return new(e||i)(ai(f0))},i.\u0275prov=cr({token:i,factory:function(){return function p$(){return new UM(ai(f0))}()},providedIn:"root"}),i})();function xN(i){return i.replace(/\/index.html$/,"")}var Du=(()=>((Du=Du||{})[Du.Format=0]="Format",Du[Du.Standalone=1]="Standalone",Du))(),va=(()=>((va=va||{})[va.Narrow=0]="Narrow",va[va.Abbreviated=1]="Abbreviated",va[va.Wide=2]="Wide",va[va.Short=3]="Short",va))(),$c=(()=>(($c=$c||{})[$c.Short=0]="Short",$c[$c.Medium=1]="Medium",$c[$c.Long=2]="Long",$c[$c.Full=3]="Full",$c))(),no=(()=>((no=no||{})[no.Decimal=0]="Decimal",no[no.Group=1]="Group",no[no.List=2]="List",no[no.PercentSign=3]="PercentSign",no[no.PlusSign=4]="PlusSign",no[no.MinusSign=5]="MinusSign",no[no.Exponential=6]="Exponential",no[no.SuperscriptingExponent=7]="SuperscriptingExponent",no[no.PerMille=8]="PerMille",no[no.Infinity=9]="Infinity",no[no.NaN=10]="NaN",no[no.TimeSeparator=11]="TimeSeparator",no[no.CurrencyDecimal=12]="CurrencyDecimal",no[no.CurrencyGroup=13]="CurrencyGroup",no))();function zI(i,t){return bg(yf(i)[ss.DateFormat],t)}function VI(i,t){return bg(yf(i)[ss.TimeFormat],t)}function UI(i,t){return bg(yf(i)[ss.DateTimeFormat],t)}function _g(i,t){const e=yf(i),n=e[ss.NumberSymbols][t];if(typeof n>"u"){if(t===no.CurrencyDecimal)return e[ss.NumberSymbols][no.Decimal];if(t===no.CurrencyGroup)return e[ss.NumberSymbols][no.Group]}return n}function SN(i){if(!i[ss.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[ss.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function bg(i,t){for(let e=t;e>-1;e--)if(typeof i[e]<"u")return i[e];throw new Error("Locale data API: locale data undefined")}function GM(i){const[t,e]=i.split(":");return{hours:+t,minutes:+e}}const T$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Gw={},M$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var yd=(()=>((yd=yd||{})[yd.Short=0]="Short",yd[yd.ShortGMT=1]="ShortGMT",yd[yd.Long=2]="Long",yd[yd.Extended=3]="Extended",yd))(),uo=(()=>((uo=uo||{})[uo.FullYear=0]="FullYear",uo[uo.Month=1]="Month",uo[uo.Date=2]="Date",uo[uo.Hours=3]="Hours",uo[uo.Minutes=4]="Minutes",uo[uo.Seconds=5]="Seconds",uo[uo.FractionalSeconds=6]="FractionalSeconds",uo[uo.Day=7]="Day",uo))(),zo=(()=>((zo=zo||{})[zo.DayPeriods=0]="DayPeriods",zo[zo.Days=1]="Days",zo[zo.Months=2]="Months",zo[zo.Eras=3]="Eras",zo))();function D$(i,t,e,n){let r=function z$(i){if(MN(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){const[r,s=1,o=1]=i.split("-").map(l=>+l);return HI(r,s-1,o)}const e=parseFloat(i);if(!isNaN(i-e))return new Date(e);let n;if(n=i.match(T$))return function V$(i){const t=new Date(0);let e=0,n=0;const r=i[8]?t.setUTCFullYear:t.setFullYear,s=i[8]?t.setUTCHours:t.setHours;i[9]&&(e=Number(i[9]+i[10]),n=Number(i[9]+i[11])),r.call(t,Number(i[1]),Number(i[2])-1,Number(i[3]));const o=Number(i[4]||0)-e,l=Number(i[5]||0)-n,u=Number(i[6]||0),p=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return s.call(t,o,l,u,p),t}(n)}const t=new Date(i);if(!MN(t))throw new Error(`Unable to convert "${i}" into a date`);return t}(i);t=Kv(e,t)||t;let l,o=[];for(;t;){if(l=M$.exec(t),!l){o.push(t);break}{o=o.concat(l.slice(1));const v=o.pop();if(!v)break;t=v}}let u=r.getTimezoneOffset();n&&(u=TN(n,u),r=function B$(i,t,e){const n=e?-1:1,r=i.getTimezoneOffset();return function N$(i,t){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+t),i}(i,n*(TN(t,r)-r))}(r,n,!0));let p="";return o.forEach(v=>{const w=function F$(i){if(jM[i])return jM[i];let t;switch(i){case"G":case"GG":case"GGG":t=nc(zo.Eras,va.Abbreviated);break;case"GGGG":t=nc(zo.Eras,va.Wide);break;case"GGGGG":t=nc(zo.Eras,va.Narrow);break;case"y":t=Zu(uo.FullYear,1,0,!1,!0);break;case"yy":t=Zu(uo.FullYear,2,0,!0,!0);break;case"yyy":t=Zu(uo.FullYear,3,0,!1,!0);break;case"yyyy":t=Zu(uo.FullYear,4,0,!1,!0);break;case"Y":t=$I(1);break;case"YY":t=$I(2,!0);break;case"YYY":t=$I(3);break;case"YYYY":t=$I(4);break;case"M":case"L":t=Zu(uo.Month,1,1);break;case"MM":case"LL":t=Zu(uo.Month,2,1);break;case"MMM":t=nc(zo.Months,va.Abbreviated);break;case"MMMM":t=nc(zo.Months,va.Wide);break;case"MMMMM":t=nc(zo.Months,va.Narrow);break;case"LLL":t=nc(zo.Months,va.Abbreviated,Du.Standalone);break;case"LLLL":t=nc(zo.Months,va.Wide,Du.Standalone);break;case"LLLLL":t=nc(zo.Months,va.Narrow,Du.Standalone);break;case"w":t=WM(1);break;case"ww":t=WM(2);break;case"W":t=WM(1,!0);break;case"d":t=Zu(uo.Date,1);break;case"dd":t=Zu(uo.Date,2);break;case"c":case"cc":t=Zu(uo.Day,1);break;case"ccc":t=nc(zo.Days,va.Abbreviated,Du.Standalone);break;case"cccc":t=nc(zo.Days,va.Wide,Du.Standalone);break;case"ccccc":t=nc(zo.Days,va.Narrow,Du.Standalone);break;case"cccccc":t=nc(zo.Days,va.Short,Du.Standalone);break;case"E":case"EE":case"EEE":t=nc(zo.Days,va.Abbreviated);break;case"EEEE":t=nc(zo.Days,va.Wide);break;case"EEEEE":t=nc(zo.Days,va.Narrow);break;case"EEEEEE":t=nc(zo.Days,va.Short);break;case"a":case"aa":case"aaa":t=nc(zo.DayPeriods,va.Abbreviated);break;case"aaaa":t=nc(zo.DayPeriods,va.Wide);break;case"aaaaa":t=nc(zo.DayPeriods,va.Narrow);break;case"b":case"bb":case"bbb":t=nc(zo.DayPeriods,va.Abbreviated,Du.Standalone,!0);break;case"bbbb":t=nc(zo.DayPeriods,va.Wide,Du.Standalone,!0);break;case"bbbbb":t=nc(zo.DayPeriods,va.Narrow,Du.Standalone,!0);break;case"B":case"BB":case"BBB":t=nc(zo.DayPeriods,va.Abbreviated,Du.Format,!0);break;case"BBBB":t=nc(zo.DayPeriods,va.Wide,Du.Format,!0);break;case"BBBBB":t=nc(zo.DayPeriods,va.Narrow,Du.Format,!0);break;case"h":t=Zu(uo.Hours,1,-12);break;case"hh":t=Zu(uo.Hours,2,-12);break;case"H":t=Zu(uo.Hours,1);break;case"HH":t=Zu(uo.Hours,2);break;case"m":t=Zu(uo.Minutes,1);break;case"mm":t=Zu(uo.Minutes,2);break;case"s":t=Zu(uo.Seconds,1);break;case"ss":t=Zu(uo.Seconds,2);break;case"S":t=Zu(uo.FractionalSeconds,1);break;case"SS":t=Zu(uo.FractionalSeconds,2);break;case"SSS":t=Zu(uo.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=WI(yd.Short);break;case"ZZZZZ":t=WI(yd.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=WI(yd.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=WI(yd.Long);break;default:return null}return jM[i]=t,t}(v);p+=w?w(r,e,u):"''"===v?"'":v.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),p}function HI(i,t,e){const n=new Date(0);return n.setFullYear(i,t,e),n.setHours(0,0,0),n}function Kv(i,t){const e=function m$(i){return yf(i)[ss.LocaleId]}(i);if(Gw[e]=Gw[e]||{},Gw[e][t])return Gw[e][t];let n="";switch(t){case"shortDate":n=zI(i,$c.Short);break;case"mediumDate":n=zI(i,$c.Medium);break;case"longDate":n=zI(i,$c.Long);break;case"fullDate":n=zI(i,$c.Full);break;case"shortTime":n=VI(i,$c.Short);break;case"mediumTime":n=VI(i,$c.Medium);break;case"longTime":n=VI(i,$c.Long);break;case"fullTime":n=VI(i,$c.Full);break;case"short":const r=Kv(i,"shortTime"),s=Kv(i,"shortDate");n=GI(UI(i,$c.Short),[r,s]);break;case"medium":const o=Kv(i,"mediumTime"),l=Kv(i,"mediumDate");n=GI(UI(i,$c.Medium),[o,l]);break;case"long":const u=Kv(i,"longTime"),p=Kv(i,"longDate");n=GI(UI(i,$c.Long),[u,p]);break;case"full":const v=Kv(i,"fullTime"),w=Kv(i,"fullDate");n=GI(UI(i,$c.Full),[v,w])}return n&&(Gw[e][t]=n),n}function GI(i,t){return t&&(i=i.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),i}function fm(i,t,e="-",n,r){let s="";(i<0||r&&i<=0)&&(r?i=1-i:(i=-i,s=e));let o=String(i);for(;o.length<t;)o="0"+o;return n&&(o=o.slice(o.length-t)),s+o}function Zu(i,t,e=0,n=!1,r=!1){return function(s,o){let l=function P$(i,t){switch(i){case uo.FullYear:return t.getFullYear();case uo.Month:return t.getMonth();case uo.Date:return t.getDate();case uo.Hours:return t.getHours();case uo.Minutes:return t.getMinutes();case uo.Seconds:return t.getSeconds();case uo.FractionalSeconds:return t.getMilliseconds();case uo.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}(i,s);if((e>0||l>-e)&&(l+=e),i===uo.Hours)0===l&&-12===e&&(l=12);else if(i===uo.FractionalSeconds)return function L$(i,t){return fm(i,3).substring(0,t)}(l,t);const u=_g(o,no.MinusSign);return fm(l,t,u,n,r)}}function nc(i,t,e=Du.Format,n=!1){return function(r,s){return function R$(i,t,e,n,r,s){switch(e){case zo.Months:return function _$(i,t,e){const n=yf(i),s=bg([n[ss.MonthsFormat],n[ss.MonthsStandalone]],t);return bg(s,e)}(t,r,n)[i.getMonth()];case zo.Days:return function y$(i,t,e){const n=yf(i),s=bg([n[ss.DaysFormat],n[ss.DaysStandalone]],t);return bg(s,e)}(t,r,n)[i.getDay()];case zo.DayPeriods:const o=i.getHours(),l=i.getMinutes();if(s){const p=function A$(i){const t=yf(i);return SN(t),(t[ss.ExtraData][2]||[]).map(n=>"string"==typeof n?GM(n):[GM(n[0]),GM(n[1])])}(t),v=function x$(i,t,e){const n=yf(i);SN(n);const s=bg([n[ss.ExtraData][0],n[ss.ExtraData][1]],t)||[];return bg(s,e)||[]}(t,r,n),w=p.findIndex(I=>{if(Array.isArray(I)){const[T,k]=I,H=o>=T.hours&&l>=T.minutes,X=o<k.hours||o===k.hours&&l<k.minutes;if(T.hours<k.hours){if(H&&X)return!0}else if(H||X)return!0}else if(I.hours===o&&I.minutes===l)return!0;return!1});if(-1!==w)return v[w]}return function v$(i,t,e){const n=yf(i),s=bg([n[ss.DayPeriodsFormat],n[ss.DayPeriodsStandalone]],t);return bg(s,e)}(t,r,n)[o<12?0:1];case zo.Eras:return function b$(i,t){return bg(yf(i)[ss.Eras],t)}(t,n)[i.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,i,t,e,n)}}function WI(i){return function(t,e,n){const r=-1*n,s=_g(e,no.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case yd.Short:return(r>=0?"+":"")+fm(o,2,s)+fm(Math.abs(r%60),2,s);case yd.ShortGMT:return"GMT"+(r>=0?"+":"")+fm(o,1,s);case yd.Long:return"GMT"+(r>=0?"+":"")+fm(o,2,s)+":"+fm(Math.abs(r%60),2,s);case yd.Extended:return 0===n?"Z":(r>=0?"+":"")+fm(o,2,s)+":"+fm(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${i}"`)}}}function EN(i){return HI(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))}function WM(i,t=!1){return function(e,n){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{const s=EN(e),o=function O$(i){const t=HI(i,0,1).getDay();return HI(i,0,1+(t<=4?4:11)-t)}(s.getFullYear()),l=s.getTime()-o.getTime();r=1+Math.round(l/6048e5)}return fm(r,i,_g(n,no.MinusSign))}}function $I(i,t=!1){return function(e,n){return fm(EN(e).getFullYear(),i,_g(n,no.MinusSign),t)}}const jM={};function TN(i,t){i=i.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(e)?t:e}function MN(i){return i instanceof Date&&!isNaN(i.valueOf())}function RN(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let Mo=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Tw(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${hs(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(qt(NI),qt(Hw),qt(oi),qt(h))},i.\u0275dir=fs({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class J${constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let mu=(()=>{class i{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new J$(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const l=n.get(s);n.move(l,o),FN(l,r)}});for(let r=0,s=n.length;r<s;r++){const l=n.get(r).context;l.index=r,l.count=s,l.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{FN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(qt(yg),qt(dm),qt(NI))},i.\u0275dir=fs({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function FN(i,t){i.context.$implicit=t.item}let Fo=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new tq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){NN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){NN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(qt(yg),qt(dm))},i.\u0275dir=fs({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class tq{constructor(){this.$implicit=null,this.ngIf=null}}function NN(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${hs(t)}'.`)}let ea=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:Ki.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(Hw),qt(h))},i.\u0275dir=fs({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),El=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(qt(yg))},i.\u0275dir=fs({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Na]}),i})();const pq=new vr("DATE_PIPE_DEFAULT_TIMEZONE");let zN=(()=>{class i{constructor(e,n){this.locale=e,this.defaultTimezone=n}transform(e,n="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return D$(e,n,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw function pm(i,t){return new Ei(2100,!1)}()}}}return i.\u0275fac=function(e){return new(e||i)(qt($v,16),qt(pq,24))},i.\u0275pipe=Ou({name:"date",type:i,pure:!0,standalone:!0}),i})(),VN=(()=>{class i{transform(e){return JSON.stringify(e,null,2)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=Ou({name:"json",type:i,pure:!1,standalone:!0}),i})(),io=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({}),i})();const HN="browser";function tD(i){return i===HN}let Eq=(()=>{class i{}return i.\u0275prov=cr({token:i,providedIn:"root",factory:()=>new Tq(ai(vd),window)}),i})();class Tq{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Mq(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=GN(this.window.history)||GN(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function GN(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class WN{}class nD extends class Dq extends class c${}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function l$(i){BI||(BI=i)}(new nD)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Lq(){return jw=jw||document.querySelector("base"),jw?jw.getAttribute("href"):null}();return null==e?null:function Pq(i){XI=XI||document.createElement("a"),XI.setAttribute("href",i);const t=XI.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){jw=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return RN(document.cookie,t)}}let XI,jw=null;const jN=new vr("TRANSITION_ID"),kq=[{provide:zw,useFactory:function Rq(i,t,e){return()=>{e.get(PI).donePromise.then(()=>{const n=Jm(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[jN,vd,Xu],multi:!0}];let Fq=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const YI=new vr("EventManagerPlugins");let KI=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(ai(YI),ai(ua))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();class $N{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Jm().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let qN=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),$w=(()=>{class i extends qN{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(XN),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(XN))}}return i.\u0275fac=function(e){return new(e||i)(ai(vd))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();function XN(i){Jm().remove(i)}const iD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rD=/%COMP%/g;function ZI(i,t,e){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?ZI(i,r,e):(r=r.replace(rD,i),e.push(r))}return e}function ZN(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let QI=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new sD(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case nl.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new Hq(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case nl.ShadowDom:return new Gq(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=ZI(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(ai(KI),ai($w),ai(Vw))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();class sD{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(iD[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(JN(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(JN(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=iD[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=iD[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Ki.DashCase|Ki.Important)?t.style.setProperty(e,n,r&Ki.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Ki.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ZN(n)):this.eventManager.addEventListener(t,e,ZN(n))}}function JN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Hq extends sD{constructor(t,e,n,r){super(t),this.component=n;const s=ZI(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=function zq(i){return"_ngcontent-%COMP%".replace(rD,i)}(r+"-"+n.id),this.hostAttr=function Vq(i){return"_nghost-%COMP%".replace(rD,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Gq extends sD{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ZI(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const l=document.createElement("style");l.textContent=s[o],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Wq=(()=>{class i extends $N{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(ai(vd))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const e3=["alt","control","meta","shift"],$q={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},t3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qq={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Xq=(()=>{class i extends $N{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jm().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if(e3.forEach(u=>{const p=n.indexOf(u);p>-1&&(n.splice(p,1),o+=u+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static getEventFullKey(e){let n="",r=function Yq(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&t3.hasOwnProperty(t)&&(t=t3[t]))}return $q[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),e3.forEach(s=>{s!=r&&(0,qq[s])(e)&&(n+=s+".")}),n+=r,n}static eventCallback(e,n,r){return s=>{i.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(ai(vd))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const Jq=eN(s$,"browser",[{provide:Yb,useValue:HN},{provide:GF,useValue:function Kq(){nD.makeCurrent()},multi:!0},{provide:vd,useFactory:function Qq(){return function lg(i){Bd=i}(document),document},deps:[]}]),r3=new vr(""),s3=[{provide:RI,useClass:class Oq{addToWindow(t){Lo.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},Lo.getAllAngularTestabilities=()=>t.getAllTestabilities(),Lo.getAllAngularRootElements=()=>t.getAllRootElements(),Lo.frameworkStabilizers||(Lo.frameworkStabilizers=[]),Lo.frameworkStabilizers.push(n=>{const r=Lo.getAllAngularTestabilities();let s=r.length,o=!1;const l=function(u){o=o||u,s--,0==s&&n(o)};r.forEach(function(u){u.whenStable(l)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Jm().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:KF,useClass:DM,deps:[ua,LM,RI]},{provide:DM,useClass:DM,deps:[ua,LM,RI]}],o3=[{provide:Oe,useValue:"root"},{provide:lt,useFactory:function Zq(){return new lt},deps:[]},{provide:YI,useClass:Wq,multi:!0,deps:[vd,ua,Yb]},{provide:YI,useClass:Xq,multi:!0,deps:[vd]},{provide:QI,useClass:QI,deps:[KI,$w,Vw]},{provide:c,useExisting:QI},{provide:qN,useExisting:$w},{provide:$w,useClass:$w,deps:[vd]},{provide:KI,useClass:KI,deps:[YI,ua]},{provide:WN,useClass:Fq,deps:[]},[]];let a3=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:Vw,useValue:e.appId},{provide:jN,useExisting:Vw},kq]}}}return i.\u0275fac=function(e){return new(e||i)(ai(r3,12))},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({providers:[...o3,...s3],imports:[io,o$]}),i})(),aD=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(ai(vd))},i.\u0275prov=cr({token:i,factory:function(e){let n=null;return n=e?new e:function tX(){return new aD(ai(vd))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let u3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:function(e){let n=null;return n=e?new(e||i):ai(d3),n},providedIn:"root"}),i})(),d3=(()=>{class i extends u3{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case za.NONE:return n;case za.HTML:return Oa(n,"HTML")?jl(n):Bv(this._doc,String(n)).toString();case za.STYLE:return Oa(n,"Style")?jl(n):n;case za.SCRIPT:if(Oa(n,"Script"))return jl(n);throw new Error("unsafe value used in a script context");case za.URL:return Oa(n,"URL")?jl(n):pg(String(n));case za.RESOURCE_URL:if(Oa(n,"ResourceURL"))return jl(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function ug(i){return new Dh(i)}(e)}bypassSecurityTrustStyle(e){return function lh(i){return new Sp(i)}(e)}bypassSecurityTrustScript(e){return function ch(i){return new Wm(i)}(e)}bypassSecurityTrustUrl(e){return function Lh(i){return new $_(i)}(e)}bypassSecurityTrustResourceUrl(e){return function gf(i){return new sm(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(ai(vd))},i.\u0275prov=cr({token:i,factory:function(e){let n=null;return n=e?new e:function lX(i){return new d3(i.get(vd))}(ai(Xu)),n},providedIn:"root"}),i})();function ds(...i){return gr(i,pe(i))}function Zv(i,t){return Y(t)?Ns(i,t,1):Ns(i,1)}function Cg(i,t){return wn((e,n)=>{let r=0;e.subscribe(An(n,s=>i.call(t,s,r++)&&n.next(s)))})}class h3{}class JI{}class ev{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ev?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ev;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ev?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(l=>-1===s.indexOf(l)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class cX{encodeKey(t){return f3(t)}encodeValue(t){return f3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const dX=/%(\d[a-f0-9])/gi,hX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function f3(i){return encodeURIComponent(i).replace(dX,(t,e)=>hX[e]??t)}function e1(i){return`${i}`}class Qv{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new cX,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function uX(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,l]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],u=e.get(o)||[];u.push(l),e.set(o,u)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(e1):[e1(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Qv({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(e1(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(e1(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class fX{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function p3(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function g3(i){return typeof Blob<"u"&&i instanceof Blob}function m3(i){return typeof FormData<"u"&&i instanceof FormData}class p0{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function pX(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ev),this.context||(this.context=new fX),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const l=e.indexOf("?");this.urlWithParams=e+(-1===l?"?":l<e.length-1?"&":"")+o}}else this.params=new Qv,this.urlWithParams=e}serializeBody(){return null===this.body?null:p3(this.body)||g3(this.body)||m3(this.body)||function gX(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qv?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||m3(this.body)?null:g3(this.body)?this.body.type||null:p3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qv?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,p=t.params||this.params;const v=t.context??this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((w,I)=>w.set(I,t.setHeaders[I]),u)),t.setParams&&(p=Object.keys(t.setParams).reduce((w,I)=>w.set(I,t.setParams[I]),p)),new p0(e,n,s,{params:p,headers:u,context:v,reportProgress:l,responseType:r,withCredentials:o})}}var qc=(()=>((qc=qc||{})[qc.Sent=0]="Sent",qc[qc.UploadProgress=1]="UploadProgress",qc[qc.ResponseHeader=2]="ResponseHeader",qc[qc.DownloadProgress=3]="DownloadProgress",qc[qc.Response=4]="Response",qc[qc.User=5]="User",qc))();class cD{constructor(t,e=200,n="OK"){this.headers=t.headers||new ev,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class uD extends cD{constructor(t={}){super(t),this.type=qc.ResponseHeader}clone(t={}){return new uD({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Kb extends cD{constructor(t={}){super(t),this.type=qc.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Kb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class v3 extends cD{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function dD(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let t1=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof p0)s=e;else{let u,p;u=r.headers instanceof ev?r.headers:new ev(r.headers),r.params&&(p=r.params instanceof Qv?r.params:new Qv({fromObject:r.params})),s=new p0(e,n,void 0!==r.body?r.body:null,{headers:u,context:r.context,params:p,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=ds(s).pipe(Zv(u=>this.handler.handle(u)));if(e instanceof p0||"events"===r.observe)return o;const l=o.pipe(Cg(u=>u instanceof Kb));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(le(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(le(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(le(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return l.pipe(le(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Qv).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,dD(r,n))}post(e,n,r={}){return this.request("POST",e,dD(r,n))}put(e,n,r={}){return this.request("PUT",e,dD(r,n))}}return i.\u0275fac=function(e){return new(e||i)(ai(h3))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();class y3{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const _3=new vr("HTTP_INTERCEPTORS");let mX=(()=>{class i{intercept(e,n){return n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const vX=/^\)\]\}',?\n/;let b3=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new _t(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((T,k)=>r.setRequestHeader(T,k.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const T=e.detectContentTypeHeader();null!==T&&r.setRequestHeader("Content-Type",T)}if(e.responseType){const T=e.responseType.toLowerCase();r.responseType="json"!==T?T:"text"}const s=e.serializeBody();let o=null;const l=()=>{if(null!==o)return o;const T=r.statusText||"OK",k=new ev(r.getAllResponseHeaders()),H=function yX(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new uD({headers:k,status:r.status,statusText:T,url:H}),o},u=()=>{let{headers:T,status:k,statusText:H,url:X}=l(),ue=null;204!==k&&(ue=typeof r.response>"u"?r.responseText:r.response),0===k&&(k=ue?200:0);let xe=k>=200&&k<300;if("json"===e.responseType&&"string"==typeof ue){const be=ue;ue=ue.replace(vX,"");try{ue=""!==ue?JSON.parse(ue):null}catch(Se){ue=be,xe&&(xe=!1,ue={error:Se,text:ue})}}xe?(n.next(new Kb({body:ue,headers:T,status:k,statusText:H,url:X||void 0})),n.complete()):n.error(new v3({error:ue,headers:T,status:k,statusText:H,url:X||void 0}))},p=T=>{const{url:k}=l(),H=new v3({error:T,status:r.status||0,statusText:r.statusText||"Unknown Error",url:k||void 0});n.error(H)};let v=!1;const w=T=>{v||(n.next(l()),v=!0);let k={type:qc.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(k.total=T.total),"text"===e.responseType&&!!r.responseText&&(k.partialText=r.responseText),n.next(k)},I=T=>{let k={type:qc.UploadProgress,loaded:T.loaded};T.lengthComputable&&(k.total=T.total),n.next(k)};return r.addEventListener("load",u),r.addEventListener("error",p),r.addEventListener("timeout",p),r.addEventListener("abort",p),e.reportProgress&&(r.addEventListener("progress",w),null!==s&&r.upload&&r.upload.addEventListener("progress",I)),r.send(s),n.next({type:qc.Sent}),()=>{r.removeEventListener("error",p),r.removeEventListener("abort",p),r.removeEventListener("load",u),r.removeEventListener("timeout",p),e.reportProgress&&(r.removeEventListener("progress",w),null!==s&&r.upload&&r.upload.removeEventListener("progress",I)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(ai(WN))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const hD=new vr("XSRF_COOKIE_NAME"),fD=new vr("XSRF_HEADER_NAME");class C3{}let _X=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=RN(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(ai(vd),ai(Yb),ai(hD))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),pD=(()=>{class i{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(ai(C3),ai(fD))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),bX=(()=>{class i{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(_3,[]);this.chain=n.reduceRight((r,s)=>new y3(r,s),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(ai(JI),ai(Xu))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),CX=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:pD,useClass:mX}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:hD,useValue:e.cookieName}:[],e.headerName?{provide:fD,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({providers:[pD,{provide:_3,useExisting:pD,multi:!0},{provide:C3,useClass:_X},{provide:hD,useValue:"XSRF-TOKEN"},{provide:fD,useValue:"X-XSRF-TOKEN"}]}),i})(),w3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({providers:[t1,{provide:h3,useClass:bX},b3,{provide:JI,useExisting:b3}],imports:[CX.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),i})();class Kf extends Ze{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const n1=L(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:wX}=Array,{getPrototypeOf:AX,prototype:xX,keys:IX}=Object;function A3(i){if(1===i.length){const t=i[0];if(wX(t))return{args:t,keys:null};if(function SX(i){return i&&"object"==typeof i&&AX(i)===xX}(t)){const e=IX(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:EX}=Array;function x3(i){return le(t=>function TX(i,t){return EX(t)?i(...t):i(t)}(i,t))}function I3(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function S3(...i){const t=pe(i),e=et(i),{args:n,keys:r}=A3(i);if(0===n.length)return gr([],t);const s=new _t(function MX(i,t,e=Ge){return n=>{E3(t,()=>{const{length:r}=i,s=new Array(r);let o=r,l=r;for(let u=0;u<r;u++)E3(t,()=>{const p=gr(i[u],t);let v=!1;p.subscribe(An(n,w=>{s[u]=w,v||(v=!0,l--),l||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>I3(r,o):Ge));return e?s.pipe(x3(e)):s}function E3(i,t,e){i?Kr(e,i,t):t()}function gD(...i){return function DX(){return ya(1)}()(gr(i,pe(i)))}function T3(i){return new _t(t=>{Nn(i()).subscribe(t)})}function Zb(i,t){const e=Y(i)?i:()=>i,n=r=>r.error(e());return new _t(t?r=>t.schedule(n,0,r):n)}function mD(){return wn((i,t)=>{let e=null;i._refCount++;const n=An(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class M3 extends _t{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,cn(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new j;const e=this.getSubject();t.add(this.source.subscribe(An(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=j.EMPTY)}return t}refCount(){return mD()(this)}}function gm(i,t){return wn((e,n)=>{let r=null,s=0,o=!1;const l=()=>o&&!r&&n.complete();e.subscribe(An(n,u=>{r?.unsubscribe();let p=0;const v=s++;Nn(i(u,v)).subscribe(r=An(n,w=>n.next(t?t(u,w,v,p++):w),()=>{r=null,l()}))},()=>{o=!0,l()}))})}function Qb(i){return i<=0?()=>sa:wn((t,e)=>{let n=0;t.subscribe(An(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function r1(i){return wn((t,e)=>{let n=!1;t.subscribe(An(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function D3(i=PX){return wn((t,e)=>{let n=!1;t.subscribe(An(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function PX(){return new n1}function n_(i,t){const e=arguments.length>=2;return n=>n.pipe(i?Cg((r,s)=>i(r,s,n)):Ge,Qb(1),e?r1(t):D3(()=>new n1))}function Bh(i,t,e){const n=Y(i)||t||e?{next:i,error:t,complete:e}:i;return n?wn((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let l=!0;r.subscribe(An(s,u=>{var p;null===(p=n.next)||void 0===p||p.call(n,u),s.next(u)},()=>{var u;l=!1,null===(u=n.complete)||void 0===u||u.call(n),s.complete()},u=>{var p;l=!1,null===(p=n.error)||void 0===p||p.call(n,u),s.error(u)},()=>{var u,p;l&&(null===(u=n.unsubscribe)||void 0===u||u.call(n)),null===(p=n.finalize)||void 0===p||p.call(n)}))}):Ge}function tv(i){return wn((t,e)=>{let s,n=null,r=!1;n=t.subscribe(An(e,void 0,void 0,o=>{s=Nn(i(o,tv(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function RX(i,t,e,n,r){return(s,o)=>{let l=e,u=t,p=0;s.subscribe(An(o,v=>{const w=p++;u=l?i(u,v,w):(l=!0,v),n&&o.next(u)},r&&(()=>{l&&o.next(u),o.complete()})))}}function vD(i,t){return wn(RX(i,t,arguments.length>=2,!0))}function yD(i){return i<=0?()=>sa:wn((t,e)=>{let n=[];t.subscribe(An(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function L3(i,t){const e=arguments.length>=2;return n=>n.pipe(i?Cg((r,s)=>i(r,s,n)):Ge,yD(1),e?r1(t):D3(()=>new n1))}function _D(i){return wn((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const ta="primary";class FX{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Jb(i){return new FX(i)}function NX(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],l=i[s];if(o.startsWith(":"))r[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function nv(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!P3(i[r],t[r]))return!1;return!0}function P3(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function R3(i){return Array.prototype.concat.apply([],i)}function k3(i){return i.length>0?i[i.length-1]:null}function ph(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Jv(i){return nM(i)?i:Dw(i)?gr(Promise.resolve(i)):ds(i)}const VX={exact:function N3(i,t,e){if(!m0(i.segments,t.segments)||!s1(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!N3(i.children[n],t.children[n],e))return!1;return!0},subset:B3},O3={exact:function UX(i,t){return nv(i,t)},subset:function HX(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>P3(i[e],t[e]))},ignored:()=>!0};function F3(i,t,e){return VX[e.paths](i.root,t.root,e.matrixParams)&&O3[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function B3(i,t,e){return z3(i,t,t.segments,e)}function z3(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!m0(r,e)||t.hasChildren()||!s1(r,e,n))}if(i.segments.length===e.length){if(!m0(i.segments,e)||!s1(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!B3(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(m0(i.segments,r)&&s1(i.segments,r,n)&&i.children[ta])&&z3(i.children[ta],t,s,n)}}function s1(i,t,e){return t.every((n,r)=>O3[e](i[r].parameters,n.parameters))}class g0{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jb(this.queryParams)),this._queryParamMap}toString(){return jX.serialize(this)}}class da{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ph(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return o1(this)}}class qw{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Jb(this.parameters)),this._parameterMap}toString(){return G3(this)}}function m0(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let V3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:function(){return new CD},providedIn:"root"}),i})();class CD{parse(t){const e=new eY(t);return new g0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Xw(t.root,!0)}`,n=function XX(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${a1(e)}=${a1(r)}`).join("&"):`${a1(e)}=${a1(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function $X(i){return encodeURI(i)}(t.fragment)}`:""}`}}const jX=new CD;function o1(i){return i.segments.map(t=>G3(t)).join("/")}function Xw(i,t){if(!i.hasChildren())return o1(i);if(t){const e=i.children[ta]?Xw(i.children[ta],!1):"",n=[];return ph(i.children,(r,s)=>{s!==ta&&n.push(`${s}:${Xw(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function WX(i,t){let e=[];return ph(i.children,(n,r)=>{r===ta&&(e=e.concat(t(n,r)))}),ph(i.children,(n,r)=>{r!==ta&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===ta?[Xw(i.children[ta],!1)]:[`${r}:${Xw(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[ta]?`${o1(i)}/${e[0]}`:`${o1(i)}/(${e.join("//")})`}}function U3(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function a1(i){return U3(i).replace(/%3B/gi,";")}function wD(i){return U3(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function l1(i){return decodeURIComponent(i)}function H3(i){return l1(i.replace(/\+/g,"%20"))}function G3(i){return`${wD(i.path)}${function qX(i){return Object.keys(i).map(t=>`;${wD(t)}=${wD(i[t])}`).join("")}(i.parameters)}`}const YX=/^[^\/()?;=#]+/;function c1(i){const t=i.match(YX);return t?t[0]:""}const KX=/^[^=?&#]+/,QX=/^[^&#]+/;class eY{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new da([],{}):new da([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[ta]=new da(t,e)),n}parseSegment(){const t=c1(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Ei(4009,!1);return this.capture(t),new qw(l1(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=c1(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=c1(this.remaining);r&&(n=r,this.capture(n))}t[l1(e)]=l1(n)}parseQueryParam(t){const e=function ZX(i){const t=i.match(KX);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function JX(i){const t=i.match(QX);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=H3(e),s=H3(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=c1(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Ei(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=ta);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[ta]:new da([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Ei(4011,!1)}}function AD(i){return i.segments.length>0?new da([],{[ta]:i}):i}function u1(i){const t={};for(const n of Object.keys(i.children)){const s=u1(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function tY(i){if(1===i.numberOfChildren&&i.children[ta]){const t=i.children[ta];return new da(i.segments.concat(t.segments),t.children)}return i}(new da(i.segments,t))}function v0(i){return i instanceof g0}function rY(i,t,e,n,r){if(0===e.length)return eC(t.root,t.root,t.root,n,r);const s=function $3(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new j3(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return ph(s.outlets,(u,p)=>{l[p]="string"==typeof u?u.split("/"):u}),[...r,{outlets:l}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?e=!0:".."===l?t++:""!=l&&r.push(l))}),r):[...r,s]},[]);return new j3(e,t,n)}(e);return s.toRoot()?eC(t.root,t.root,new da([],{}),n,r):function o(u){const p=function oY(i,t,e,n){if(i.isAbsolute)return new tC(t.root,!0,0);if(-1===n)return new tC(e,e===t.root,0);return function q3(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new Ei(4005,!1);r=n.segments.length}return new tC(n,!1,r-s)}(e,n+(Yw(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,u),v=p.processChildren?Zw(p.segmentGroup,p.index,s.commands):ID(p.segmentGroup,p.index,s.commands);return eC(t.root,p.segmentGroup,v,n,r)}(i.snapshot?._lastPathIndex)}function Yw(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Kw(i){return"object"==typeof i&&null!=i&&i.outlets}function eC(i,t,e,n,r){let o,s={};n&&ph(n,(u,p)=>{s[p]=Array.isArray(u)?u.map(v=>`${v}`):`${u}`}),o=i===t?e:W3(i,t,e);const l=AD(u1(o));return new g0(l,s,r)}function W3(i,t,e){const n={};return ph(i.children,(r,s)=>{n[s]=r===t?e:W3(r,t,e)}),new da(i.segments,n)}class j3{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Yw(n[0]))throw new Ei(4003,!1);const r=n.find(Kw);if(r&&r!==k3(n))throw new Ei(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tC{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ID(i,t,e){if(i||(i=new da([],{})),0===i.segments.length&&i.hasChildren())return Zw(i,t,e);const n=function lY(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],l=e[n];if(Kw(l))break;const u=`${l}`,p=n<e.length-1?e[n+1]:null;if(r>0&&void 0===u)break;if(u&&p&&"object"==typeof p&&void 0===p.outlets){if(!Y3(u,p,o))return s;n+=2}else{if(!Y3(u,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new da(i.segments.slice(0,n.pathIndex),{});return s.children[ta]=new da(i.segments.slice(n.pathIndex),i.children),Zw(s,0,r)}return n.match&&0===r.length?new da(i.segments,{}):n.match&&!i.hasChildren()?SD(i,t,e):n.match?Zw(i,0,r):SD(i,t,e)}function Zw(i,t,e){if(0===e.length)return new da(i.segments,{});{const n=function aY(i){return Kw(i[0])?i[0].outlets:{[ta]:i}}(e),r={};return ph(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=ID(i.children[o],t,s))}),ph(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new da(i.segments,r)}}function SD(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Kw(s)){const u=cY(s.outlets);return new da(n,u)}if(0===r&&Yw(e[0])){n.push(new qw(i.segments[t].path,X3(e[0]))),r++;continue}const o=Kw(s)?s.outlets[ta]:`${s}`,l=r<e.length-1?e[r+1]:null;o&&l&&Yw(l)?(n.push(new qw(o,X3(l))),r+=2):(n.push(new qw(o,{})),r++)}return new da(n,{})}function cY(i){const t={};return ph(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=SD(new da([],{}),0,e))}),t}function X3(i){const t={};return ph(i,(e,n)=>t[n]=`${e}`),t}function Y3(i,t,e){return i==e.path&&nv(t,e.parameters)}class ey{constructor(t,e){this.id=t,this.url=e}}class ED extends ey{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class y0 extends ey{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class d1 extends ey{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class K3 extends ey{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hY extends ey{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gY{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mY{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vY{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yY{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _Y{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bY{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z3{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Q3{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=TD(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=TD(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=MD(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return MD(t,this._root).map(e=>e.value)}}function TD(i,t){if(i===t.value)return t;for(const e of t.children){const n=TD(i,e);if(n)return n}return null}function MD(i,t){if(i===t.value)return[t];for(const e of t.children){const n=MD(i,e);if(n.length)return n.unshift(t),n}return[]}class ty{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function nC(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class J3 extends Q3{constructor(t,e){super(t),this.snapshot=e,DD(this,t)}toString(){return this.snapshot.toString()}}function eB(i,t){const e=function wY(i,t){const o=new h1([],{},{},"",{},ta,t,null,i.root,-1,{});return new nB("",new ty(o,[]))}(i,t),n=new Kf([new qw("",{})]),r=new Kf({}),s=new Kf({}),o=new Kf({}),l=new Kf(""),u=new i_(n,r,o,l,s,ta,t,e.root);return u.snapshot=e.root,new J3(new ty(u,[]),e)}class i_{constructor(t,e,n,r,s,o,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(le(t=>Jb(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(le(t=>Jb(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tB(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function AY(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class h1{constructor(t,e,n,r,s,o,l,u,p,v,w,I){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this.routeConfig=u,this._urlSegment=p,this._lastPathIndex=v,this._correctedLastPathIndex=I??v,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class nB extends Q3{constructor(t,e){super(e),this.url=t,DD(this,e)}toString(){return iB(this._root)}}function DD(i,t){t.value._routerState=i,t.children.forEach(e=>DD(i,e))}function iB(i){const t=i.children.length>0?` { ${i.children.map(iB).join(", ")} } `:"";return`${i.value}${t}`}function LD(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,nv(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),nv(t.params,e.params)||i.params.next(e.params),function BX(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!nv(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),nv(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function PD(i,t){const e=nv(i.params,t.params)&&function GX(i,t){return m0(i,t)&&i.every((e,n)=>nv(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||PD(i.parent,t.parent))}function Qw(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function IY(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Qw(i,n,r);return Qw(i,n)})}(i,t,e);return new ty(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(l=>Qw(i,l)),o}}const n=function SY(i){return new i_(new Kf(i.url),new Kf(i.params),new Kf(i.queryParams),new Kf(i.fragment),new Kf(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>Qw(i,s));return new ty(n,r)}}const RD="ngNavigationCancelingError";function rB(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=v0(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=sB(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function sB(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[RD]=!0,n.cancellationCode=t,e&&(n.url=e),n}function oB(i){return aB(i)&&v0(i.url)}function aB(i){return i&&i[RD]}class EY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Jw,this.attachRef=null}}let Jw=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new EY,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const f1=!1;let kD=(()=>{class i{constructor(e,n,r,s,o){this.parentContexts=e,this.location=n,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new qn,this.deactivateEvents=new qn,this.attachEvents=new qn,this.detachEvents=new qn,this.name=r||ta,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ei(4012,f1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ei(4012,f1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ei(4012,f1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Ei(4013,f1);this._activatedRoute=e;const r=this.location,o=e._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new TY(e,l,r.injector);if(n&&function MY(i){return!!i.resolveComponentFactory}(n)){const p=n.resolveComponentFactory(o);this.activated=r.createComponent(p,r.length,u)}else this.activated=r.createComponent(o,{index:r.length,injector:u,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(qt(Jw),qt(yg),xh("name"),qt(Yo),qt(rt))},i.\u0275dir=fs({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class TY{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===i_?this.route:t===Jw?this.childContexts:this.parent.get(t,e)}}let lB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Rr({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&Kn(0,"router-outlet")},dependencies:[kD],encapsulation:2}),i})();function cB(i,t){return i.providers&&!i._injector&&(i._injector=TI(i.providers,t,`Route: ${i.path}`)),i._injector??t}function FD(i){const t=i.children&&i.children.map(FD),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==ta&&(e.component=lB),e}function wg(i){return i.outlet||ta}function uB(i,t){const e=i.filter(n=>wg(n)===t);return e.push(...i.filter(n=>wg(n)!==t)),e}function dB(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class kY{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),LD(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=nC(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),ph(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=nC(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=nC(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=nC(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new bY(s.value.snapshot))}),t.children.length&&this.forwardEvent(new yY(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(LD(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),LD(l.route.value),this.activateChildRoutes(t,null,o.children)}else{const l=dB(r.snapshot),u=l?.get(Ti)??null;o.attachRef=null,o.route=r,o.resolver=u,o.injector=l,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class hB{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class p1{constructor(t,e){this.component=t,this.route=e}}function OY(i,t,e){const n=i._root;return eA(n,t?t._root:null,e,[n.value])}function g1(i,t,e){return(dB(t)??e).get(i)}function eA(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=nC(t);return i.children.forEach(o=>{(function NY(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,l=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function BY(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!m0(i.url,t.url);case"pathParamsOrQueryParamsChange":return!m0(i.url,t.url)||!nv(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!PD(i,t)||!nv(i.queryParams,t.queryParams);default:return!PD(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new hB(n)):(s.data=o.data,s._resolvedData=o._resolvedData),eA(i,t,s.component?l?l.children:null:e,n,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new p1(l.outlet.component,o))}else o&&tA(t,l,r),r.canActivateChecks.push(new hB(n)),eA(i,null,s.component?l?l.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),ph(s,(o,l)=>tA(o,e.getContext(l),r)),r}function tA(i,t,e){const n=nC(i),r=i.value;ph(n,(s,o)=>{tA(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new p1(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function nA(i){return"function"==typeof i}function ND(i){return i instanceof n1||"EmptyError"===i?.name}const m1=Symbol("INITIAL_VALUE");function iC(){return gm(i=>S3(i.map(t=>t.pipe(Qb(1),function LX(...i){const t=pe(i);return wn((e,n)=>{(t?gD(i,e,t):gD(i,e)).subscribe(n)})}(m1)))).pipe(le(t=>{for(const e of t)if(!0!==e){if(e===m1)return m1;if(!1===e||e instanceof g0)return e}return!0}),Cg(t=>t!==m1),Qb(1)))}function fB(i){return function yt(...i){return mt(i)}(Bh(t=>{if(v0(t))throw rB(0,t)}),le(t=>!0===t))}const BD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pB(i,t,e,n,r){const s=zD(i,t,e);return s.matched?function tK(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?ds(r.map(o=>{const l=i.get(o),u=function WY(i){return i&&nA(i.canMatch)}(l)?l.canMatch(t,e):l(t,e);return Jv(u)})).pipe(iC(),fB()):ds(!0)}(n=cB(t,n),t,e).pipe(le(o=>!0===o?s:{...BD})):ds(s)}function zD(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...BD}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||NX)(e,i,t);if(!r)return{...BD};const s={};ph(r.posParams,(l,u)=>{s[u]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function v1(i,t,e,n,r="corrected"){if(e.length>0&&function rK(i,t,e){return e.some(n=>y1(i,t,n)&&wg(n)!==ta)}(i,e,n)){const o=new da(t,function iK(i,t,e,n){const r={};r[ta]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&wg(s)!==ta){const o=new da([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[wg(s)]=o}return r}(i,t,n,new da(e,i.children)));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function sK(i,t,e){return e.some(n=>y1(i,t,n))}(i,e,n)){const o=new da(i.segments,function nK(i,t,e,n,r,s){const o={};for(const l of n)if(y1(i,e,l)&&!r[wg(l)]){const u=new da([],{});u._sourceSegment=i,u._segmentIndexShift="legacy"===s?i.segments.length:t.length,o[wg(l)]=u}return{...r,...o}}(i,t,e,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new da(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function y1(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function gB(i,t,e,n){return!!(wg(i)===n||n!==ta&&y1(t,e,i))&&("**"===i.path||zD(t,i,e).matched)}function mB(i,t,e){return 0===t.length&&!i.children[e]}const _1=!1;class b1{constructor(t){this.segmentGroup=t||null}}class vB{constructor(t){this.urlTree=t}}function iA(i){return Zb(new b1(i))}function yB(i){return Zb(new vB(i))}class cK{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=v1(this.urlTree.root,[],[],this.config).segmentGroup,e=new da(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,ta).pipe(le(s=>this.createUrlTree(u1(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(tv(s=>{if(s instanceof vB)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof b1?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,ta).pipe(le(r=>this.createUrlTree(u1(r),t.queryParams,t.fragment))).pipe(tv(r=>{throw r instanceof b1?this.noMatchError(r):r}))}noMatchError(t){return new Ei(4002,_1)}createUrlTree(t,e,n){const r=AD(t);return new g0(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(le(s=>new da([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return gr(r).pipe(Zv(s=>{const o=n.children[s],l=uB(e,s);return this.expandSegmentGroup(t,l,o,s).pipe(le(u=>({segment:u,outlet:s})))}),vD((s,o)=>(s[o.outlet]=o.segment,s),{}),L3())}expandSegment(t,e,n,r,s,o){return gr(n).pipe(Zv(l=>this.expandSegmentAgainstRoute(t,e,n,l,r,s,o).pipe(tv(p=>{if(p instanceof b1)return ds(null);throw p}))),n_(l=>!!l),tv((l,u)=>{if(ND(l))return mB(e,r,s)?ds(new da([],{})):iA(e);throw l}))}expandSegmentAgainstRoute(t,e,n,r,s,o,l){return gB(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):iA(e):iA(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?yB(s):this.lineralizeSegments(n,s).pipe(Ns(o=>{const l=new da(o,{});return this.expandSegment(t,l,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:l,consumedSegments:u,remainingSegments:p,positionalParamSegments:v}=zD(e,r,s);if(!l)return iA(e);const w=this.applyRedirectCommands(u,r.redirectTo,v);return r.redirectTo.startsWith("/")?yB(w):this.lineralizeSegments(r,w).pipe(Ns(I=>this.expandSegment(t,e,n,I.concat(p),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=cB(n,t),n.loadChildren?(n._loadedRoutes?ds({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(le(l=>(n._loadedRoutes=l.routes,n._loadedInjector=l.injector,new da(r,{})))):ds(new da(r,{}))):pB(e,n,r,t).pipe(gm(({matched:o,consumedSegments:l,remainingSegments:u})=>o?this.getChildConfig(t=n._injector??t,n,r).pipe(Ns(v=>{const w=v.injector??t,I=v.routes,{segmentGroup:T,slicedSegments:k}=v1(e,l,u,I),H=new da(T.segments,T.children);if(0===k.length&&H.hasChildren())return this.expandChildren(w,I,H).pipe(le(be=>new da(l,be)));if(0===I.length&&0===k.length)return ds(new da(l,{}));const X=wg(n)===s;return this.expandSegment(w,H,I,k,X?ta:s,!0).pipe(le(xe=>new da(l.concat(xe.segments),xe.children)))})):iA(e)))}getChildConfig(t,e,n){return e.children?ds({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?ds({routes:e._loadedRoutes,injector:e._loadedInjector}):function eK(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?ds(!0):ds(r.map(o=>{const l=i.get(o),u=function VY(i){return i&&nA(i.canLoad)}(l)?l.canLoad(t,e):l(t,e);return Jv(u)})).pipe(iC(),fB())}(t,e,n).pipe(Ns(r=>r?this.configLoader.loadChildren(t,e).pipe(Bh(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function aK(i){return Zb(sB(_1,3))}())):ds({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return ds(n);if(r.numberOfChildren>1||!r.children[ta])return Zb(new Ei(4e3,_1));r=r.children[ta]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new g0(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ph(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const l=r.substring(1);n[s]=e[l]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return ph(e.children,(l,u)=>{o[u]=this.createSegmentGroup(t,l,n,r)}),new da(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Ei(4001,_1);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class dK{}class pK{constructor(t,e,n,r,s,o,l,u){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=l,this.urlSerializer=u}recognize(){const t=v1(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,ta).pipe(le(e=>{if(null===e)return null;const n=new h1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ta,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ty(n,e),s=new nB(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=tB(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return gr(Object.keys(n.children)).pipe(Zv(r=>{const s=n.children[r],o=uB(e,r);return this.processSegmentGroup(t,o,s,r)}),vD((r,s)=>r&&s?(r.push(...s),r):null),function kX(i,t=!1){return wn((e,n)=>{let r=0;e.subscribe(An(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}(r=>null!==r),r1(null),L3(),le(r=>{if(null===r)return null;const s=_B(r);return function gK(i){i.sort((t,e)=>t.value.outlet===ta?-1:e.value.outlet===ta?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return gr(e).pipe(Zv(o=>this.processSegmentAgainstRoute(o._injector??t,o,n,r,s)),n_(o=>!!o),tv(o=>{if(ND(o))return mB(n,r,s)?ds([]):ds(null);throw o}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!gB(e,n,r,s))return ds(null);let o;if("**"===e.path){const l=r.length>0?k3(r).parameters:{},u=CB(n)+r.length;o=ds({snapshot:new h1(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AB(e),wg(e),e.component??e._loadedComponent??null,e,bB(n),u,xB(e),u),consumedSegments:[],remainingSegments:[]})}else o=pB(n,e,r,t).pipe(le(({matched:l,consumedSegments:u,remainingSegments:p,parameters:v})=>{if(!l)return null;const w=CB(n)+u.length;return{snapshot:new h1(u,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AB(e),wg(e),e.component??e._loadedComponent??null,e,bB(n),w,xB(e),w),consumedSegments:u,remainingSegments:p}}));return o.pipe(gm(l=>{if(null===l)return ds(null);const{snapshot:u,consumedSegments:p,remainingSegments:v}=l;t=e._injector??t;const w=e._loadedInjector??t,I=function mK(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:T,slicedSegments:k}=v1(n,p,v,I.filter(X=>void 0===X.redirectTo),this.relativeLinkResolution);if(0===k.length&&T.hasChildren())return this.processChildren(w,I,T).pipe(le(X=>null===X?null:[new ty(u,X)]));if(0===I.length&&0===k.length)return ds([new ty(u,[])]);const H=wg(e)===s;return this.processSegment(w,I,T,k,H?ta:s).pipe(le(X=>null===X?null:[new ty(u,X)]))}))}}function vK(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function _B(i){const t=[],e=new Set;for(const n of i){if(!vK(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=_B(n.children);t.push(new ty(n.value,r))}return t.filter(n=>!e.has(n))}function bB(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function CB(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function AB(i){return i.data||{}}function xB(i){return i.resolve||{}}const VD=Symbol("RouteTitle");function IB(i){return"string"==typeof i.title||null===i.title}function UD(i){return gm(t=>{const e=i(t);return e?gr(e).pipe(le(()=>t)):ds(t)})}let SB=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===ta);return n}getResolvedTitleForRoute(e){return e.data[VD]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:function(){return Ba(EB)},providedIn:"root"}),i})(),EB=(()=>{class i extends SB{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(ai(aD))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class IK{}class EK extends class SK{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const HD=new vr("",{providedIn:"root",factory:()=>({})}),GD=new vr("ROUTES");let WD=(()=>{class i{constructor(e,n){this.injector=e,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ds(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Jv(e.loadComponent()).pipe(Bh(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),_D(()=>{this.componentLoaders.delete(e)})),r=new M3(n,()=>new Ze).pipe(mD());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ds({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(le(l=>{this.onLoadEndListener&&this.onLoadEndListener(n);let u,p,v=!1;Array.isArray(l)?p=l:(u=l.create(e).injector,p=R3(u.get(GD,[],Es.Self|Es.Optional)));return{routes:p.map(FD),injector:u}}),_D(()=>{this.childrenLoaders.delete(n)})),o=new M3(s,()=>new Ze).pipe(mD());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(e){return Jv(e()).pipe(Ns(n=>n instanceof eF||Array.isArray(n)?ds(n):gr(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(e){return new(e||i)(ai(Xu),ai(SM))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class MK{}class DK{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function LK(i){throw i}function PK(i,t,e){return t.parse("/")}const RK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function MB(){const i=Ba(V3),t=Ba(Jw),e=Ba(UM),n=Ba(Xu),r=Ba(SM),s=Ba(GD,{optional:!0})??[],o=Ba(HD,{optional:!0})??{},l=Ba(EB),u=Ba(SB,{optional:!0}),p=Ba(MK,{optional:!0}),v=Ba(IK,{optional:!0}),w=new Vd(null,i,t,e,n,r,R3(s));return p&&(w.urlHandlingStrategy=p),v&&(w.routeReuseStrategy=v),w.titleStrategy=u??l,function OK(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(o,w),w}let Vd=(()=>{class i{constructor(e,n,r,s,o,l,u){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ze,this.errorHandler=LK,this.malformedUriErrorHandler=PK,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ds(void 0),this.urlHandlingStrategy=new DK,this.routeReuseStrategy=new EK,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(WD),this.configLoader.onLoadEndListener=I=>this.triggerEvent(new mY(I)),this.configLoader.onLoadStartListener=I=>this.triggerEvent(new gY(I)),this.ngModule=o.get(u0),this.console=o.get(xj);const w=o.get(ua);this.isNgZoneEnabled=w instanceof ua&&ua.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function zX(){return new g0(new da([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=eB(this.currentUrlTree,this.rootComponentType),this.transitions=new Kf({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(Cg(r=>0!==r.id),le(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),gm(r=>{let s=!1,o=!1;return ds(r).pipe(Bh(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gm(l=>{const u=this.browserUrlTree.toString(),p=!this.navigated||l.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||p)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return DB(l.source)&&(this.browserUrlTree=l.extractedUrl),ds(l).pipe(gm(w=>{const I=this.transitions.getValue();return n.next(new ED(w.id,this.serializeUrl(w.extractedUrl),w.source,w.restoredState)),I!==this.transitions.getValue()?sa:Promise.resolve(w)}),function uK(i,t,e,n){return gm(r=>function lK(i,t,e,n,r){return new cK(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(le(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Bh(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},r.urlAfterRedirects=w.urlAfterRedirects}),function _K(i,t,e,n,r,s){return Ns(o=>function fK(i,t,e,n,r,s,o="emptyOnly",l="legacy"){return new pK(i,t,e,n,r,o,l,s).recognize().pipe(gm(u=>null===u?function hK(i){return new _t(t=>t.error(i))}(new dK):ds(u)))}(i,t,e,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,r,s).pipe(le(l=>({...o,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Bh(w=>{if(r.targetSnapshot=w.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!w.extras.skipLocationChange){const T=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);this.setBrowserUrl(T,w)}this.browserUrlTree=w.urlAfterRedirects}const I=new uY(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);n.next(I)}));if(p&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:T,source:k,restoredState:H,extras:X}=l,ue=new ED(I,this.serializeUrl(T),k,H);n.next(ue);const xe=eB(T,this.rootComponentType).snapshot;return ds(r={...l,targetSnapshot:xe,urlAfterRedirects:T,extras:{...X,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=l.rawUrl,l.resolve(null),sa}),Bh(l=>{const u=new dY(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),le(l=>r={...l,guards:OY(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function $Y(i,t){return Ns(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?ds({...e,guardsResult:!0}):function qY(i,t,e,n){return gr(i).pipe(Ns(r=>function JY(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ds(s.map(l=>{const u=g1(l,t,r);return Jv(function GY(i){return i&&nA(i.canDeactivate)}(u)?u.canDeactivate(i,t,e,n):u(i,t,e,n)).pipe(n_())})).pipe(iC()):ds(!0)}(r.component,r.route,e,t,n)),n_(r=>!0!==r,!0))}(o,n,r,i).pipe(Ns(l=>l&&function zY(i){return"boolean"==typeof i}(l)?function XY(i,t,e,n){return gr(t).pipe(Zv(r=>gD(function KY(i,t){return null!==i&&t&&t(new vY(i)),ds(!0)}(r.route.parent,n),function YY(i,t){return null!==i&&t&&t(new _Y(i)),ds(!0)}(r.route,n),function QY(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function FY(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>T3(()=>ds(o.guards.map(u=>{const p=g1(u,o.node,e);return Jv(function HY(i){return i&&nA(i.canActivateChild)}(p)?p.canActivateChild(n,i):p(n,i)).pipe(n_())})).pipe(iC())));return ds(s).pipe(iC())}(i,r.path,e),function ZY(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return ds(!0);const r=n.map(s=>T3(()=>{const o=g1(s,t,e);return Jv(function UY(i){return i&&nA(i.canActivate)}(o)?o.canActivate(t,i):o(t,i)).pipe(n_())}));return ds(r).pipe(iC())}(i,r.route,e))),n_(r=>!0!==r,!0))}(n,s,i,t):ds(l)),le(l=>({...e,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),Bh(l=>{if(r.guardsResult=l.guardsResult,v0(l.guardsResult))throw rB(0,l.guardsResult);const u=new hY(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(u)}),Cg(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),UD(l=>{if(l.guards.canActivateChecks.length)return ds(l).pipe(Bh(u=>{const p=new fY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}),gm(u=>{let p=!1;return ds(u).pipe(function bK(i,t){return Ns(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return ds(e);let s=0;return gr(r).pipe(Zv(o=>function CK(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!IB(r)&&(s[VD]=r.title),function wK(i,t,e,n){const r=function AK(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return ds({});const s={};return gr(r).pipe(Ns(o=>function xK(i,t,e,n){const r=g1(i,t,n);return Jv(r.resolve?r.resolve(t,e):r(t,e))}(i[o],t,e,n).pipe(n_(),Bh(l=>{s[o]=l}))),yD(1),function OX(i){return le(()=>i)}(s),tv(o=>ND(o)?sa:Zb(o)))}(s,i,t,n).pipe(le(o=>(i._resolvedData=o,i.data=tB(i,e).resolve,r&&IB(r)&&(i.data[VD]=r.title),null)))}(o.route,n,i,t)),Bh(()=>s++),yD(1),Ns(o=>s===r.length?ds(e):sa))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Bh({next:()=>p=!0,complete:()=>{p||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),Bh(u=>{const p=new pY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}))}),UD(l=>{const u=p=>{const v=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(p.routeConfig).pipe(Bh(w=>{p.component=w}),le(()=>{})));for(const w of p.children)v.push(...u(w));return v};return S3(u(l.targetSnapshot.root)).pipe(r1(),Qb(1))}),UD(()=>this.afterPreactivation()),le(l=>{const u=function xY(i,t,e){const n=Qw(i,t._root,e?e._root:void 0);return new J3(n,t)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:u}}),Bh(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((i,t,e)=>le(n=>(new kY(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),Bh({next(){s=!0},complete(){s=!0}}),_D(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),tv(l=>{if(o=!0,aB(l)){oB(l)||(this.navigated=!0,this.restoreHistory(r,!0));const u=new d1(r.id,this.serializeUrl(r.extractedUrl),l.message,l.cancellationCode);if(n.next(u),oB(l)){const p=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||DB(r.source)};this.scheduleNavigation(p,"imperative",null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const u=new K3(r.id,this.serializeUrl(r.extractedUrl),l,r.targetSnapshot??void 0);n.next(u);try{r.resolve(this.errorHandler(l))}catch(p){r.reject(p)}}return sa}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(FD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:u}=n,p=r||this.routerState.root,v=u?this.currentUrlTree.fragment:o;let w=null;switch(l){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),rY(p,this.currentUrlTree,e,w,v??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=v0(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function FK(i){for(let t=0;t<i.length;t++){if(null==i[t])throw new Ei(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...RK}:!1===n?{...kK}:n,v0(e))return F3(this.currentUrlTree,e,r);const s=this.parseUrl(e);return F3(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new y0(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let l,u,p;o?(l=o.resolve,u=o.reject,p=o.promise):p=new Promise((I,T)=>{l=I,u=T});const v=++this.navigationId;let w;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),w=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):w=0,this.setTransition({id:v,targetPageId:w,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:l,reject:u,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(I=>Promise.reject(I))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n,r){const s=new d1(e.id,this.serializeUrl(e.extractedUrl),n,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){_w()},i.\u0275prov=cr({token:i,factory:function(){return MB()},providedIn:"root"}),i})();function DB(i){return"imperative"!==i}let jD=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new Ze,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const n=this.renderer,r=this.el.nativeElement;null!==e?n.setAttribute(r,"tabindex",e):n.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Xv(this.skipLocationChange),replaceUrl:Xv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xv(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(qt(Vd),qt(i_),xh("tabindex"),qt(h),qt(oi))},i.\u0275dir=fs({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,n){1&e&&_n("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Na]}),i})(),rC=(()=>{class i{constructor(e,n,r){this.router=e,this.route=n,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new Ze,this.subscription=e.events.subscribe(s=>{s instanceof y0&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,r,s,o){if(0!==e||n||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const l={skipLocationChange:Xv(this.skipLocationChange),replaceUrl:Xv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xv(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(qt(Vd),qt(i_),qt(f0))},i.\u0275dir=fs({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&_n("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&Lr("target",n.target)("href",n.href,dh)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Na]}),i})(),$D=(()=>{class i{constructor(e,n,r,s,o,l){this.router=e,this.element=n,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new qn,this.routerEventsSubscription=e.events.subscribe(u=>{u instanceof y0&&this.update()})}ngAfterContentInit(){ds(this.links.changes,this.linksWithHrefs.changes,ds(null)).pipe(ya()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=gr(e).pipe(ya()).subscribe(n=>{this.isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const n=function NK(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,n)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(qt(Vd),qt(oi),qt(h),qt(Yo),qt(jD,8),qt(rC,8))},i.\u0275dir=fs({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,n,r){if(1&e&&(dl(r,jD,5),dl(r,rC,5)),2&e){let s;tr(s=nr())&&(n.links=s),tr(s=nr())&&(n.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Na]}),i})();class LB{}let PB=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Cg(e=>e instanceof y0),Zv(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=TI(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,l=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(l,s.children??s._loadedRoutes))}return gr(r).pipe(ya())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):ds(null);const s=r.pipe(Ns(o=>null===o?ds(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?gr([s,this.loader.loadComponent(n)]).pipe(ya()):s})}}return i.\u0275fac=function(e){return new(e||i)(ai(Vd),ai(SM),ai(rt),ai(LB),ai(WD))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const RB=new vr("");let BK=(()=>{class i{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ED?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof y0&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Z3&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new Z3(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){_w()},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const kB=new vr("ROUTER_FORROOT_GUARD"),OB=new vr(""),zK=[UM,{provide:V3,useClass:CD},{provide:Vd,useFactory:MB},Jw,{provide:i_,useFactory:function VK(i){return i.routerState.root},deps:[Vd]},WD];function UK(){return new QF("Router",Vd)}let s_=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[zK,[],FB(e),{provide:kB,useFactory:jK,deps:[[Vd,new tc,new Fd]]},{provide:HD,useValue:n||{}},n?.useHash?{provide:f0,useClass:f$}:{provide:f0,useClass:AN},{provide:RB,useFactory:()=>{const i=Ba(Vd),t=Ba(Eq),e=Ba(HD);return e.scrollOffset&&t.setOffset(e.scrollOffset),new BK(i,t,e)}},n?.preloadingStrategy?QK(n.preloadingStrategy):[],{provide:QF,multi:!0,useFactory:UK},n?.initialNavigation?qK(n):[],[{provide:NB,useFactory:$K},{provide:WF,multi:!0,useExisting:NB}]]}}static forChild(e){return{ngModule:i,providers:[FB(e)]}}}return i.\u0275fac=function(e){return new(e||i)(ai(kB,8))},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({}),i})();function jK(i){return"guarded"}function FB(i){return[{provide:GD,multi:!0,useValue:i}]}function $K(){const i=Ba(Xu);return t=>{const e=i.get(Uw);if(t!==e.components[0])return;const n=i.get(Vd),r=i.get(BB);1===i.get(qD)&&n.initialNavigation(),i.get(OB,null,Es.Optional)?.setUpPreloading(),i.get(RB,null,Es.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const NB=new vr("");function qK(i){return["disabled"===i.initialNavigation?[{provide:zw,multi:!0,useFactory:()=>{const i=Ba(Vd);return()=>{i.setUpLocationChangeListener()}}},{provide:qD,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:qD,useValue:0},{provide:zw,multi:!0,deps:[Xu],useFactory:i=>{const t=i.get(d$,Promise.resolve(null));let e=!1;return()=>t.then(()=>new Promise(r=>{const s=i.get(Vd),o=i.get(BB);(function n(r){i.get(Vd).events.pipe(Cg(o=>o instanceof y0||o instanceof d1||o instanceof K3),le(o=>o instanceof y0||o instanceof d1&&(0===o.code||1===o.code)&&null),Cg(o=>null!==o),Qb(1)).subscribe(()=>{r()})})(()=>{r(!0),e=!0}),s.afterPreactivation=()=>(r(!0),e||o.closed?ds(void 0):o),s.initialNavigation()}))}}]:[]]}const BB=new vr("",{factory:()=>new Ze}),qD=new vr("",{providedIn:"root",factory:()=>1});function QK(i){return[PB,{provide:OB,useExisting:PB},{provide:LB,useExisting:i}]}var pr=W(7489);class ur{static equals(t,e,n){return n?this.resolveFieldData(t,n)===this.resolveFieldData(e,n):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,o,l,n=Array.isArray(t),r=Array.isArray(e);if(n&&r){if((o=t.length)!=e.length)return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(n!=r)return!1;var u=t instanceof Date,p=e instanceof Date;if(u!=p)return!1;if(u&&p)return t.getTime()==e.getTime();var v=t instanceof RegExp,w=e instanceof RegExp;if(v!=w)return!1;if(v&&w)return t.toString()==e.toString();var I=Object.keys(t);if((o=I.length)!==Object.keys(e).length)return!1;for(s=o;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,I[s]))return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[l=I[s]],e[l]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let n=e.split("."),r=t;for(let s=0,o=n.length;s<o;++s){if(null==r)return null;r=r[n[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,n,r){if(n.length>0){let s=!1;for(let o=0;o<n.length;o++)if(this.findIndexInList(n[o],r)>e){n.splice(o,0,t),s=!0;break}s||n.push(t)}else n.push(t)}static findIndexInList(t,e){let n=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){n=r;break}return n}static contains(t,e){if(null!=t&&e&&e.length)for(let n of e)if(this.equals(t,n))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}}var zB=0;function sC(){return"pr_id_"+ ++zB}var ic=function JK(){let i=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,l)=>{o&&(o.style.zIndex=String(((s,o)=>{let l=i.length>0?i[i.length-1]:{key:s,value:o},u=l.value+(l.key===s?0:o)+1;return i.push({key:s,value:u}),u})(s,l)))},clear:s=>{s&&((s=>{i=i.filter(o=>o.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const VB=["*"];let gh=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.IN="in",i.LESS_THAN="lt",i.LESS_THAN_OR_EQUAL_TO="lte",i.GREATER_THAN="gt",i.GREATER_THAN_OR_EQUAL_TO="gte",i.BETWEEN="between",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.DATE_IS="dateIs",i.DATE_IS_NOT="dateIsNot",i.DATE_BEFORE="dateBefore",i.DATE_AFTER="dateAfter",i})(),Np=(()=>{class i{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[gh.STARTS_WITH,gh.CONTAINS,gh.NOT_CONTAINS,gh.ENDS_WITH,gh.EQUALS,gh.NOT_EQUALS],numeric:[gh.EQUALS,gh.NOT_EQUALS,gh.LESS_THAN,gh.LESS_THAN_OR_EQUAL_TO,gh.GREATER_THAN,gh.GREATER_THAN_OR_EQUAL_TO],date:[gh.DATE_IS,gh.DATE_IS_NOT,gh.DATE_BEFORE,gh.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Ze,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),vu=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.NO_FILTER="noFilter",i.LT="lt",i.LTE="lte",i.GT="gt",i.GTE="gte",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.CLEAR="clear",i.APPLY="apply",i.MATCH_ALL="matchAll",i.MATCH_ANY="matchAny",i.ADD_RULE="addRule",i.REMOVE_RULE="removeRule",i.ACCEPT="accept",i.REJECT="reject",i.CHOOSE="choose",i.UPLOAD="upload",i.CANCEL="cancel",i.DAY_NAMES="dayNames",i.DAY_NAMES_SHORT="dayNamesShort",i.DAY_NAMES_MIN="dayNamesMin",i.MONTH_NAMES="monthNames",i.MONTH_NAMES_SHORT="monthNamesShort",i.FIRST_DAY_OF_WEEK="firstDayOfWeek",i.TODAY="today",i.WEEK_HEADER="weekHeader",i.WEAK="weak",i.MEDIUM="medium",i.STRONG="strong",i.PASSWORD_PROMPT="passwordPrompt",i.EMPTY_MESSAGE="emptyMessage",i.EMPTY_FILTER_MESSAGE="emptyFilterMessage",i})(),rA=(()=>{class i{constructor(){this.requireConfirmationSource=new Ze,this.acceptConfirmationSource=new Ze,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),sA=(()=>{class i{constructor(){this.filters={startsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=ur.removeAccents(n.toString()).toLocaleLowerCase(r);return ur.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=ur.removeAccents(n.toString()).toLocaleLowerCase(r);return-1!==ur.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=ur.removeAccents(n.toString()).toLocaleLowerCase(r);return-1===ur.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=ur.removeAccents(n.toString()).toLocaleLowerCase(r),o=ur.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==o.indexOf(s,o.length-s.length)},equals:(e,n,r)=>null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():ur.removeAccents(e.toString()).toLocaleLowerCase(r)==ur.removeAccents(n.toString()).toLocaleLowerCase(r)),notEquals:(e,n,r)=>!(null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():ur.removeAccents(e.toString()).toLocaleLowerCase(r)==ur.removeAccents(n.toString()).toLocaleLowerCase(r))),in:(e,n)=>{if(null==n||0===n.length)return!0;for(let r=0;r<n.length;r++)if(ur.equals(e,n[r]))return!0;return!1},between:(e,n)=>null==n||null==n[0]||null==n[1]||null!=e&&(e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]),lt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<n.getTime():e<n),lte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n),gt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>n.getTime():e>n),gte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n),is:(e,n,r)=>this.filters.equals(e,n,r),isNot:(e,n,r)=>this.filters.notEquals(e,n,r),before:(e,n,r)=>this.filters.lt(e,n,r),after:(e,n,r)=>this.filters.gt(e,n,r),dateIs:(e,n)=>null==n||null!=e&&e.toDateString()===n.toDateString(),dateIsNot:(e,n)=>null==n||null!=e&&e.toDateString()!==n.toDateString(),dateBefore:(e,n)=>null==n||null!=e&&e.getTime()<n.getTime(),dateAfter:(e,n)=>null==n||null!=e&&e.getTime()>n.getTime()}}filter(e,n,r,s,o){let l=[];if(e)for(let u of e)for(let p of n){let v=ur.resolveFieldData(u,p);if(this.filters[s](v,r,o)){l.push(u);break}}return l}register(e,n){this.filters[e]=n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),UB=(()=>{class i{constructor(){this.activeItemKeyChange=new Ze,this.activeItemKeyChange$=this.activeItemKeyChange.asObservable()}changeKey(e){this.activeItemKey=e,this.activeItemKeyChange.next(this.activeItemKey)}reset(){this.activeItemKey=null,this.activeItemKeyChange.next(this.activeItemKey)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),iv=(()=>{class i{constructor(){this.messageSource=new Ze,this.clearSource=new Ze,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),oA=(()=>{class i{constructor(){this.clickSource=new Ze,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),HB=(()=>{class i{}return i.AND="and",i.OR="or",i})(),XD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Rr({type:i,selectors:[["p-header"]],ngContentSelectors:VB,decls:1,vars:0,template:function(e,n){1&e&&(Xf(),Mu(0))},encapsulation:2}),i})(),A1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Rr({type:i,selectors:[["p-footer"]],ngContentSelectors:VB,decls:1,vars:0,template:function(e,n){1&e&&(Xf(),Mu(0))},encapsulation:2}),i})(),hl=(()=>{class i{constructor(e){this.template=e}getType(){return this.name}}return i.\u0275fac=function(e){return new(e||i)(qt(dm))},i.\u0275dir=fs({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),i})(),Za=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})(),eZ=(()=>{class i{constructor(){this.dragStartSource=new Ze,this.dragStopSource=new Ze,this.dragStart$=this.dragStartSource.asObservable(),this.dragStop$=this.dragStopSource.asObservable()}startDrag(e){this.dragStartSource.next(e)}stopDrag(e){this.dragStopSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();class tZ extends j{constructor(t,e){super()}schedule(t,e=0){return this}}const x1={setInterval(i,t,...e){const{delegate:n}=x1;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=x1;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class GB extends tZ{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return x1.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;x1.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,U(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const YD={now:()=>(YD.delegate||Date).now(),delegate:void 0};class aA{constructor(t,e=aA.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}aA.now=YD.now;class WB extends aA{constructor(t,e=aA.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const rZ=new class iZ extends WB{}(class nZ extends GB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!=n&&n>0||null==n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});function jB(i,t=Ge){return i=i??aZ,wn((e,n)=>{let r,s=!0;e.subscribe(An(n,o=>{const l=t(o);(s||!i(r,l))&&(s=!1,r=l,n.next(o))}))})}function aZ(i,t){return i===t}const lA={};function oC(i,t){if(lA[i]=(lA[i]||0)+1,"function"==typeof t)return KD(i,(...n)=>({...t(...n),type:i}));switch(t?t._as:"empty"){case"empty":return KD(i,()=>({type:i}));case"props":return KD(i,n=>({...n,type:i}));default:throw new Error("Unexpected config.")}}function KD(i,t){return Object.defineProperty(t,"type",{value:i,writable:!1})}const $B="@ngrx/store/init";let lC=(()=>{class i extends Kf{constructor(){super({type:$B})}next(e){if("function"==typeof e)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof e>"u")throw new TypeError("Actions must be objects");if(typeof e.type>"u")throw new TypeError("Actions must have a type property");super.next(e)}complete(){}ngOnDestroy(){super.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const uZ=[lC],qB=new vr("@ngrx/store Internal Root Guard"),XB=new vr("@ngrx/store Internal Initial State"),QD=new vr("@ngrx/store Initial State"),YB=new vr("@ngrx/store Reducer Factory"),KB=new vr("@ngrx/store Internal Reducer Factory Provider"),ZB=new vr("@ngrx/store Initial Reducers"),JD=new vr("@ngrx/store Internal Initial Reducers"),QB=new vr("@ngrx/store Store Features"),JB=new vr("@ngrx/store Internal Store Reducers"),e2=new vr("@ngrx/store Internal Feature Reducers"),ez=new vr("@ngrx/store Internal Feature Configs"),tz=new vr("@ngrx/store Internal Store Features"),nz=new vr("@ngrx/store Internal Feature Reducers Token"),iz=new vr("@ngrx/store Feature Reducers"),rz=new vr("@ngrx/store User Provided Meta Reducers"),I1=new vr("@ngrx/store Meta Reducers"),sz=new vr("@ngrx/store Internal Resolved Meta Reducers"),oz=new vr("@ngrx/store User Runtime Checks Config"),az=new vr("@ngrx/store Internal User Runtime Checks Config"),cA=new vr("@ngrx/store Internal Runtime Checks"),t2=new vr("@ngrx/store Check if Action types are unique");function n2(i,t={}){const e=Object.keys(i),n={};for(let s=0;s<e.length;s++){const o=e[s];"function"==typeof i[o]&&(n[o]=i[o])}const r=Object.keys(n);return function(o,l){o=void 0===o?t:o;let u=!1;const p={};for(let v=0;v<r.length;v++){const w=r[v],T=o[w],k=(0,n[w])(T,l);p[w]=k,u=u||k!==T}return u?p:o}}function lz(...i){return function(t){if(0===i.length)return t;const e=i[i.length-1];return i.slice(0,-1).reduceRight((r,s)=>s(r),e(t))}}function cz(i,t){return Array.isArray(t)&&t.length>0&&(i=lz.apply(null,[...t,i])),(e,n)=>{const r=i(e);return(s,o)=>r(s=void 0===s?n:s,o)}}class r2 extends _t{}class uz extends lC{}let S1=(()=>{class i extends Kf{constructor(e,n,r,s){super(s(r,n)),this.dispatcher=e,this.initialState=n,this.reducers=r,this.reducerFactory=s}get currentReducers(){return this.reducers}addFeature(e){this.addFeatures([e])}addFeatures(e){const n=e.reduce((r,{reducers:s,reducerFactory:o,metaReducers:l,initialState:u,key:p})=>{const v="function"==typeof s?function hZ(i){const t=Array.isArray(i)&&i.length>0?lz(...i):e=>e;return(e,n)=>(e=t(e),(r,s)=>e(r=void 0===r?n:r,s))}(l)(s,u):cz(o,l)(s,u);return r[p]=v,r},{});this.addReducers(n)}removeFeature(e){this.removeFeatures([e])}removeFeatures(e){this.removeReducers(e.map(n=>n.key))}addReducer(e,n){this.addReducers({[e]:n})}addReducers(e){this.reducers={...this.reducers,...e},this.updateReducers(Object.keys(e))}removeReducer(e){this.removeReducers([e])}removeReducers(e){e.forEach(n=>{this.reducers=function dZ(i,t){return Object.keys(i).filter(e=>e!==t).reduce((e,n)=>Object.assign(e,{[n]:i[n]}),{})}(this.reducers,n)}),this.updateReducers(e)}updateReducers(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:e})}ngOnDestroy(){this.complete()}}return i.\u0275fac=function(e){return new(e||i)(ai(uz),ai(QD),ai(ZB),ai(YB))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const pZ=[S1,{provide:r2,useExisting:S1},{provide:uz,useExisting:lC}];let s2=(()=>{class i extends Ze{ngOnDestroy(){this.complete()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pa(i)))(n||i)}}(),i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const gZ=[s2];class dz extends _t{}let hz=(()=>{class i extends Kf{constructor(e,n,r,s){super(s);const l=e.pipe(Qe(rZ)).pipe(function sZ(...i){const t=et(i);return wn((e,n)=>{const r=i.length,s=new Array(r);let o=i.map(()=>!1),l=!1;for(let u=0;u<r;u++)Nn(i[u]).subscribe(An(n,p=>{s[u]=p,!l&&!o[u]&&(o[u]=!0,(l=o.every(Ge))&&(o=null))},ee));e.subscribe(An(n,u=>{if(l){const p=[u,...s];n.next(t?t(...p):p)}}))})}(n)),p=l.pipe(vD(mZ,{state:s}));this.stateSubscription=p.subscribe(({state:v,action:w})=>{this.next(v),r.next(w)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return i.INIT=$B,i.\u0275fac=function(e){return new(e||i)(ai(lC),ai(r2),ai(s2),ai(QD))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();function mZ(i={state:void 0},[t,e]){const{state:n}=i;return{state:e(n,t),action:t}}const vZ=[hz,{provide:dz,useExisting:hz}];let ny=(()=>{class i extends _t{constructor(e,n,r){super(),this.actionsObserver=n,this.reducerManager=r,this.source=e}select(e,...n){return _Z.call(null,e,...n)(this)}lift(e){const n=new i(this,this.actionsObserver,this.reducerManager);return n.operator=e,n}dispatch(e){this.actionsObserver.next(e)}next(e){this.actionsObserver.next(e)}error(e){this.actionsObserver.error(e)}complete(){this.actionsObserver.complete()}addReducer(e,n){this.reducerManager.addReducer(e,n)}removeReducer(e){this.reducerManager.removeReducer(e)}}return i.\u0275fac=function(e){return new(e||i)(ai(dz),ai(lC),ai(S1))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const yZ=[ny];function _Z(i,t,...e){return function(r){let s;if("string"==typeof i){const o=[t,...e].filter(Boolean);s=r.pipe(function oZ(...i){const t=i.length;if(0===t)throw new Error("list of properties cannot be empty.");return le(e=>{let n=e;for(let r=0;r<t;r++){const s=n?.[i[r]];if(!(typeof s<"u"))return;n=s}return n})}(i,...o))}else{if("function"!=typeof i)throw new TypeError(`Unexpected type '${typeof i}' in select operator, expected 'string' or 'function'`);s=r.pipe(le(o=>i(o,t)))}return s.pipe(jB())}}const o2="https://ngrx.io/guide/store/configuration/runtime-checks";function fz(i){return void 0===i}function pz(i){return null===i}function gz(i){return Array.isArray(i)}function mz(i){return"object"==typeof i&&null!==i}function a2(i){return"function"==typeof i}function l2(i,t){return i===t}function EZ(i,t,e){for(let n=0;n<i.length;n++)if(!e(i[n],t[n]))return!0;return!1}function c2(i,t=l2,e=l2){let s,n=null,r=null;return{memoized:function p(){if(void 0!==s)return s.result;if(!n)return r=i.apply(null,arguments),n=arguments,r;if(!EZ(arguments,n,t))return r;const v=i.apply(null,arguments);return n=arguments,e(r,v)?r:(r=v,v)},reset:function o(){n=null,r=null},setResult:function l(v){s={result:v}},clearResult:function u(){s=void 0}}}function TZ(i,t,e,n){if(void 0===e){const s=t.map(o=>o(i));return n.memoized.apply(null,s)}const r=t.map(s=>s(i,e));return n.memoized.apply(null,[...r,e])}function uA(i){return function _z(...i){return function MZ(i,t={stateFn:TZ}){return function(...e){let n=e;if(Array.isArray(n[0])){const[v,...w]=n;n=[...v,...w]}const r=n.slice(0,n.length-1),s=n[n.length-1],o=r.filter(v=>v.release&&"function"==typeof v.release),l=i(function(...v){return s.apply(null,v)}),u=c2(function(v,w){return t.stateFn.apply(null,[v,r,w,l])});return Object.assign(u.memoized,{release:function p(){u.reset(),l.reset(),o.forEach(v=>v.release())},projector:l.memoized,setResult:u.setResult,clearResult:u.clearResult})}}(c2)(...i)}(t=>{const e=t[i];return cN()&&!(i in t)&&console.warn(`@ngrx/store: The feature name "${i}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${i}', ...) or StoreModule.forFeature('${i}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),e},t=>t)}function u2(i){Object.freeze(i);const t=a2(i);return Object.getOwnPropertyNames(i).forEach(e=>{if(!e.startsWith("\u0275")&&function IZ(i,t){return Object.prototype.hasOwnProperty.call(i,t)}(i,e)&&(!t||"caller"!==e&&"callee"!==e&&"arguments"!==e)){const n=i[e];(mz(n)||a2(n))&&!Object.isFrozen(n)&&u2(n)}}),i}function d2(i,t=[]){return(fz(i)||pz(i))&&0===t.length?{path:["root"],value:i}:Object.keys(i).reduce((n,r)=>{if(n)return n;const s=i[r];return function xZ(i){return a2(i)&&i.hasOwnProperty("\u0275cmp")}(s)?n:!(fz(s)||pz(s)||function wZ(i){return"number"==typeof i}(s)||function CZ(i){return"boolean"==typeof i}(s)||function bZ(i){return"string"==typeof i}(s)||gz(s))&&(function vz(i){if(!function AZ(i){return mz(i)&&!gz(i)}(i))return!1;const t=Object.getPrototypeOf(i);return t===Object.prototype||null===t}(s)?d2(s,[...t,r]):{path:[...t,r],value:s})},!1)}function bz(i,t){if(!1===i)return;const e=i.path.join("."),n=new Error(`Detected unserializable ${t} at "${e}". ${o2}#strict${t}serializability`);throw n.value=i.value,n.unserializablePath=e,n}function OZ(i){return cN()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...i}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function FZ({strictActionSerializability:i,strictStateSerializability:t}){return e=>i||t?function RZ(i,t){return function(e,n){t.action(n)&&bz(d2(n),"action");const r=i(e,n);return t.state()&&bz(d2(r),"state"),r}}(e,{action:n=>i&&!h2(n),state:()=>t}):e}function NZ({strictActionImmutability:i,strictStateImmutability:t}){return e=>i||t?function PZ(i,t){return function(e,n){const r=t.action(n)?u2(n):n,s=i(e,r);return t.state()?u2(s):s}}(e,{action:n=>i&&!h2(n),state:()=>t}):e}function h2(i){return i.type.startsWith("@ngrx")}function BZ({strictActionWithinNgZone:i}){return t=>i?function kZ(i,t){return function(e,n){if(t.action(n)&&!ua.isInAngularZone())throw new Error(`Action '${n.type}' running outside NgZone. ${o2}#strictactionwithinngzone`);return i(e,n)}}(t,{action:e=>i&&!h2(e)}):t}function zZ(i){return[{provide:az,useValue:i},{provide:oz,useFactory:VZ,deps:[az]},{provide:cA,deps:[oz],useFactory:OZ},{provide:I1,multi:!0,deps:[cA],useFactory:NZ},{provide:I1,multi:!0,deps:[cA],useFactory:FZ},{provide:I1,multi:!0,deps:[cA],useFactory:BZ}]}function Cz(){return[{provide:t2,multi:!0,deps:[cA],useFactory:UZ}]}function VZ(i){return i}function UZ(i){if(!i.strictActionTypeUniqueness)return;const t=Object.entries(lA).filter(([,e])=>e>1).map(([e])=>e);if(t.length)throw new Error(`Action types are registered more than once, ${t.map(e=>`"${e}"`).join(", ")}. ${o2}#strictactiontypeuniqueness`)}let wz=(()=>{class i{constructor(e,n,r,s,o,l){}}return i.\u0275fac=function(e){return new(e||i)(ai(lC),ai(r2),ai(s2),ai(ny),ai(qB,8),ai(t2,8))},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({}),i})(),HZ=(()=>{class i{constructor(e,n,r,s,o){this.features=e,this.featureReducers=n,this.reducerManager=r;const l=e.map((u,p)=>{const w=n.shift()[p];return{...u,reducers:w,initialState:Az(u.initialState)}});r.addFeatures(l)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return i.\u0275fac=function(e){return new(e||i)(ai(tz),ai(iz),ai(S1),ai(wz),ai(t2,8))},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({}),i})(),GZ=(()=>{class i{static forRoot(e,n={}){return{ngModule:wz,providers:[{provide:qB,useFactory:XZ,deps:[[ny,new tc,new Fd]]},{provide:XB,useValue:n.initialState},{provide:QD,useFactory:Az,deps:[XB]},{provide:JD,useValue:e},{provide:JB,useExisting:e instanceof vr?e:JD},{provide:ZB,deps:[Xu,JD,[new hd(JB)]],useFactory:WZ},{provide:rz,useValue:n.metaReducers?n.metaReducers:[]},{provide:sz,deps:[I1,rz],useFactory:qZ},{provide:KB,useValue:n.reducerFactory?n.reducerFactory:n2},{provide:YB,deps:[KB,sz],useFactory:cz},uZ,pZ,gZ,vZ,yZ,zZ(n.runtimeChecks),Cz()]}}static forFeature(e,n,r={}){return{ngModule:HZ,providers:[{provide:ez,multi:!0,useValue:e instanceof Object?{}:r},{provide:QB,multi:!0,useValue:{key:e instanceof Object?e.name:e,reducerFactory:r instanceof vr||!r.reducerFactory?n2:r.reducerFactory,metaReducers:r instanceof vr||!r.metaReducers?[]:r.metaReducers,initialState:r instanceof vr||!r.initialState?void 0:r.initialState}},{provide:tz,deps:[Xu,ez,QB],useFactory:jZ},{provide:e2,multi:!0,useValue:e instanceof Object?e.reducer:n},{provide:nz,multi:!0,useExisting:n instanceof vr?n:e2},{provide:iz,multi:!0,deps:[Xu,e2,[new hd(nz)]],useFactory:$Z},Cz()]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({}),i})();function WZ(i,t){return t instanceof vr?i.get(t):t}function jZ(i,t,e){return e.map((n,r)=>{if(t[r]instanceof vr){const s=i.get(t[r]);return{key:n.key,reducerFactory:s.reducerFactory?s.reducerFactory:n2,metaReducers:s.metaReducers?s.metaReducers:[],initialState:s.initialState}}return n})}function $Z(i,t){return t.map(n=>n instanceof vr?i.get(n):n)}function Az(i){return"function"==typeof i?i():i}function qZ(i,t){return i.concat(t)}function XZ(i){if(i)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function dA(...i){return{reducer:i.pop(),types:i.map(n=>n.type)}}function hA(i,...t){const e=new Map;for(const n of t)for(const r of n.types){const s=e.get(r);e.set(r,s?(l,u)=>n.reducer(s(l,u),u):n.reducer)}return function(n=i,r){const s=e.get(r.type);return s?s(n,r):n}}const fA=oC("[SysGraph List/API] Retrieve Graphs Success",{_as:"props",_p:void 0}),E1=oC("[SysGraph List/API] Retrieve Graph Success",{_as:"props",_p:void 0}),f2=uA("graphs"),p2=uA("graph"),KZ=new WB(GB);class eQ extends Ze{constructor(t=1/0,e=1/0,n=YD){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(n.push(t),!r&&n.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=n?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const o=e.now();let l=0;for(let u=1;u<n.length&&n[u]<=o;u+=2)l=u;l&&n.splice(0,l+1)}}}function g2(i,t,e){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=i):n=i??1/0,ys({connector:()=>new eQ(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}var xz={},Iz={};function tQ(i){for(var t=[],e=0,n=0,r=0;r<i.length;r+=1){var s=xz[i[r]];if(void 0===s)throw new Error("Invalid character ("+i[r]+")");var o=32&s;if(n+=(s&=31)<<e,o)e+=5;else{var l=1&n;n>>>=1,t.push(l?0===n?-2147483648:-n:n),n=e=0}}return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(i,t){xz[i]=t,Iz[t]=i});const T1="TOKEN_LOGGER_CONFIG";class nQ{constructor(t){this.config=this._clone(t)}get level(){return this.config.level}get serverLogLevel(){return this.config.serverLogLevel}updateConfig(t){this.config=this._clone(t)}partialUpdateConfig(t){!t||Object.keys(t).forEach(e=>{this.config[e]=t[e]})}getConfig(){return this._clone(this.config)}_clone(t){const e={level:null};return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}}const pA="TOKEN_LOGGER_CONFIG_ENGINE_FACTORY";class iQ{provideConfigEngine(t){return new nQ(t)}}const gA="TOKEN_LOGGER_MAPPER_SERVICE";let rQ=(()=>{class i{constructor(e){this.httpBackend=e,this.sourceMapCache=new Map,this.logPositionCache=new Map}getLogPosition(e,n){const r=this.getStackLine(e);if(!r)return ds({fileName:"",lineNumber:0,columnNumber:0});const s=this.getLocalPosition(r);if(!e.enableSourceMaps)return ds(s);const o=this.getSourceMapLocation(r);return this.getSourceMap(o,s)}getStackLine(e){const n=new Error;try{throw n}catch{try{let s=4;return n.stack.split("\n")[0].includes(".js:")||(s+=1),n.stack.split("\n")[s+(e.proxiedSteps||0)]}catch{return null}}}getLocalPosition(e){const n=e.lastIndexOf("/");let r=e.indexOf(")");r<0&&(r=void 0);const o=e.substring(n+1,r).split(":");return 3===o.length?{fileName:o[0],lineNumber:+o[1],columnNumber:+o[2]}:{fileName:"unknown",lineNumber:0,columnNumber:0}}getTranspileLocation(e){let n=e.indexOf("(");n<0&&(n=e.lastIndexOf("@"),n<0&&(n=e.lastIndexOf(" ")));let r=e.indexOf(")");return r<0&&(r=void 0),e.substring(n+1,r)}getSourceMapLocation(e){const n=this.getTranspileLocation(e),r=n.substring(0,n.lastIndexOf(":"));return r.substring(0,r.lastIndexOf(":"))+".map"}getMapping(e,n){let r=0,s=0,o=0;const l=e.mappings.split(";");for(let u=0;u<l.length;u++){let p=0;const v=l[u].split(",");for(let w=0;w<v.length;w++){const I=tQ(v[w]);if(I.length>=4&&(p+=I[0],r+=I[1],s+=I[2],o+=I[3]),u===n.lineNumber){if(p===n.columnNumber)return{fileName:e.sources[r],lineNumber:s,columnNumber:o};if(w+1===v.length)return{fileName:e.sources[r],lineNumber:s,columnNumber:0}}}}return{fileName:"unknown",lineNumber:0,columnNumber:0}}getSourceMap(e,n){const r=new p0("GET",e),s=`${n.fileName}:${n.lineNumber}:${n.columnNumber}`;if(this.logPositionCache.has(s))return this.logPositionCache.get(s);this.sourceMapCache.has(e)||(this.httpBackend?this.sourceMapCache.set(e,this.httpBackend.handle(r).pipe(Cg(l=>l instanceof Kb),le(l=>l.body),function JZ(i=1/0){let t;t=i&&"object"==typeof i?i:{count:i};const{count:e=1/0,delay:n,resetOnSuccess:r=!1}=t;return e<=0?Ge:wn((s,o)=>{let u,l=0;const p=()=>{let v=!1;u=s.subscribe(An(o,w=>{r&&(l=0),o.next(w)},void 0,w=>{if(l++<e){const I=()=>{u?(u.unsubscribe(),u=null,p()):v=!0};if(null!=n){const T="number"==typeof n?function QZ(i=0,t,e=KZ){let n=-1;return null!=t&&(je(t)?e=t:n=t),new _t(r=>{let s=function ZZ(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}(n):Nn(n(w,l)),k=An(o,()=>{k.unsubscribe(),I()},()=>{o.complete()});T.subscribe(k)}else I()}else o.error(w)})),v&&(u.unsubscribe(),u=null,p())};p()})}(3),g2(1))):(console.error("NGXLogger : Can't get sourcemap because HttpBackend is not provided. You need to import HttpClientModule"),this.sourceMapCache.set(e,ds(null))));const o=this.sourceMapCache.get(e).pipe(le(l=>l?this.getMapping(l,n):n),tv(()=>ds(n)),g2(1));return this.logPositionCache.set(s,o),o}}return i.\u0275fac=function(e){return new(e||i)(ai(JI,8))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const mA="TOKEN_LOGGER_METADATA_SERVICE";let sQ=(()=>{class i{constructor(e){this.datePipe=e}computeTimestamp(e){const n=()=>(new Date).toISOString();return e.timestampFormat?this.datePipe?this.datePipe.transform(new Date,e.timestampFormat):(console.error("NGXLogger : Can't use timeStampFormat because DatePipe is not provided. You need to provide DatePipe"),n()):n()}getMetadata(e,n,r,s){const o={level:e,additional:s};return o.message=r&&"function"==typeof r?r():r,o.timestamp=this.computeTimestamp(n),o}}return i.\u0275fac=function(e){return new(e||i)(ai(zN,8))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const vA="TOKEN_LOGGER_RULES_SERVICE";let oQ=(()=>{class i{shouldCallWriter(e,n,r,s){return!n.disableConsoleLogging&&e>=n.level}shouldCallServer(e,n,r,s){return!!n.serverLoggingUrl&&e>=n.serverLogLevel}shouldCallMonitor(e,n,r,s){return this.shouldCallWriter(e,n,r,s)||this.shouldCallServer(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const yA="TOKEN_LOGGER_SERVER_SERVICE";let aQ=(()=>{class i{constructor(e){this.httpBackend=e}secureErrorObject(e){return e?.stack}secureAdditionalParameters(e){return null==e?null:e.map((n,r)=>{try{return n instanceof Error?this.secureErrorObject(n):("object"==typeof n&&JSON.stringify(n),n)}catch{return`The additional[${r}] value could not be parsed using JSON.stringify().`}})}secureMessage(e){try{if(e instanceof Error)return this.secureErrorObject(e);"string"!=typeof e&&(e=JSON.stringify(e,null,2))}catch{e='The provided "message" value could not be parsed with JSON.stringify().'}return e}alterHttpRequest(e){return e}logOnServer(e,n,r){if(!this.httpBackend)return console.error("NGXLogger : Can't log on server because HttpBackend is not provided. You need to import HttpClientModule"),ds(null);let s=new p0("POST",e,n,r||{}),o=ds(s);const l=this.alterHttpRequest(s);return function YZ(i){return!!i&&(i instanceof _t||Y(i.lift)&&Y(i.subscribe))}(l)?o=l:l?o=ds(l):console.warn("NGXLogger : alterHttpRequest returned an invalid request. Using default one instead"),o.pipe(Zv(u=>u?this.httpBackend.handle(u):(console.warn("NGXLogger : alterHttpRequest returned an invalid request (observable). Using default one instead"),this.httpBackend.handle(s))),Cg(u=>u instanceof Kb),le(u=>u.body))}customiseRequestBody(e){return e}sendToServer(e,n){const r={...e};r.additional=this.secureAdditionalParameters(r.additional),r.message=this.secureMessage(r.message);const s=this.customiseRequestBody(r),o=n.customHttpHeaders||new ev;o.has("Content-Type")||o.set("Content-Type","application/json"),this.logOnServer(n.serverLoggingUrl,s,{headers:o,params:n.customHttpParams||new Qv,responseType:n.httpResponseType||"json",withCredentials:n.withCredentials||!1}).pipe(tv(l=>(console.error("NGXLogger: Failed to log on server",l),Zb(l)))).subscribe()}}return i.\u0275fac=function(e){return new(e||i)(ai(JI,8))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();const _A="TOKEN_LOGGER_WRITER_SERVICE";var Dc=(()=>{return(i=Dc||(Dc={}))[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.LOG=3]="LOG",i[i.WARN=4]="WARN",i[i.ERROR=5]="ERROR",i[i.FATAL=6]="FATAL",i[i.OFF=7]="OFF",Dc;var i})();const lQ=["purple","teal","gray","gray","red","red","red"];let cQ=(()=>{class i{constructor(e){this.platformId=e,this.prepareMetaStringFuncs=[this.getTimestampToWrite,this.getLevelToWrite,this.getFileDetailsToWrite,this.getContextToWrite],this.isIE=tD(e)&&navigator&&navigator.userAgent&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.logFunc=this.isIE?this.logIE.bind(this):this.logModern.bind(this)}getTimestampToWrite(e,n){return e.timestamp}getLevelToWrite(e,n){return Dc[e.level]}getFileDetailsToWrite(e,n){return!0===n.disableFileDetails?"":`[${e.fileName}:${e.lineNumber}:${e.columnNumber}]`}getContextToWrite(e,n){return n.context?`{${n.context}}`:""}prepareMetaString(e,n){let r="";return this.prepareMetaStringFuncs.forEach(s=>{const o=s(e,n);o&&(r=r+" "+o)}),r.trim()}getColor(e,n){if(e.level!==Dc.OFF)return(n.colorScheme??lQ)[e.level]}logIE(e,n,r){const s=e.additional||[];switch(e.level){case Dc.WARN:console.warn(`${r} `,e.message,...s);break;case Dc.ERROR:case Dc.FATAL:console.error(`${r} `,e.message,...s);break;case Dc.INFO:console.info(`${r} `,e.message,...s);break;default:console.log(`${r} `,e.message,...s)}}logModern(e,n,r){const s=this.getColor(e,n),o=e.additional||[];switch(e.level){case Dc.WARN:console.warn(`%c${r}`,`color:${s}`,e.message,...o);break;case Dc.ERROR:case Dc.FATAL:console.error(`%c${r}`,`color:${s}`,e.message,...o);break;case Dc.INFO:console.info(`%c${r}`,`color:${s}`,e.message,...o);break;case Dc.DEBUG:console.debug(`%c${r}`,`color:${s}`,e.message,...o);break;default:console.log(`%c${r}`,`color:${s}`,e.message,...o)}}writeMessage(e,n){const r=this.prepareMetaString(e,n);this.logFunc(e,n,r)}}return i.\u0275fac=function(e){return new(e||i)(ai(Yb))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),zh=(()=>{class i{constructor(e,n,r,s,o,l,u){this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u,this.configEngine=n.provideConfigEngine(e)}get level(){return this.configEngine.level}get serverLogLevel(){return this.configEngine.serverLogLevel}trace(e,...n){this._log(Dc.TRACE,e,n)}debug(e,...n){this._log(Dc.DEBUG,e,n)}info(e,...n){this._log(Dc.INFO,e,n)}log(e,...n){this._log(Dc.LOG,e,n)}warn(e,...n){this._log(Dc.WARN,e,n)}error(e,...n){this._log(Dc.ERROR,e,n)}fatal(e,...n){this._log(Dc.FATAL,e,n)}setCustomHttpHeaders(e){const n=this.getConfigSnapshot();n.customHttpHeaders=e,this.updateConfig(n)}setCustomParams(e){const n=this.getConfigSnapshot();n.customHttpParams=e,this.updateConfig(n)}setWithCredentialsOptionValue(e){const n=this.getConfigSnapshot();n.withCredentials=e,this.updateConfig(n)}registerMonitor(e){this._loggerMonitor=e}updateConfig(e){this.configEngine.updateConfig(e)}partialUpdateConfig(e){this.configEngine.partialUpdateConfig(e)}getConfigSnapshot(){return this.configEngine.getConfig()}_log(e,n,r=[]){const s=this.configEngine.getConfig(),o=this.ruleService.shouldCallWriter(e,s,n,r),l=this.ruleService.shouldCallServer(e,s,n,r),u=this.ruleService.shouldCallMonitor(e,s,n,r);if(!o&&!l&&!u)return;const p=this.metadataService.getMetadata(e,s,n,r);this.mapperService.getLogPosition(s,p).pipe(Qb(1)).subscribe(v=>{v&&(p.fileName=v.fileName,p.lineNumber=v.lineNumber,p.columnNumber=v.columnNumber),u&&this._loggerMonitor&&this._loggerMonitor.onLog(p,s),o&&this.writerService.writeMessage(p,s),l&&this.serverService.sendToServer(p,s)})}}return i.\u0275fac=function(e){return new(e||i)(ai(T1),ai(pA),ai(mA),ai(vA),ai(gA),ai(_A),ai(yA))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),uQ=(()=>{class i{constructor(e,n,r,s,o,l,u){this.logger=e,this.configEngineFactory=n,this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u}create(e,n,r,s){return this.getNewInstance({config:e,serverService:n,logMonitor:r,mapperService:s})}getNewInstance(e){const n=new zh(e?.config??this.logger.getConfigSnapshot(),e?.configEngineFactory??this.configEngineFactory,e?.metadataService??this.metadataService,e?.ruleService??this.ruleService,e?.mapperService??this.mapperService,e?.writerService??this.writerService,e?.serverService??this.serverService);return e?.partialConfig&&n.partialUpdateConfig(e.partialConfig),e?.logMonitor&&n.registerMonitor(e.logMonitor),n}}return i.\u0275fac=function(e){return new(e||i)(ai(zh),ai(pA),ai(mA),ai(vA),ai(gA),ai(_A),ai(yA))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),dQ=(()=>{class i{static forRoot(e,n){if(n||(n={}),n.configProvider){if(n.configProvider.provide!==T1)throw new Error(`Wrong injection token for configProvider, it should be ${T1} and you used ${n.configProvider.provide}`)}else n.configProvider={provide:T1,useValue:e||{}};if(n.configEngineFactoryProvider){if(n.configEngineFactoryProvider.provide!==pA)throw new Error(`Wrong injection token for configEngineFactoryProvider, it should be '${pA}' and you used '${n.configEngineFactoryProvider.provide}'`)}else n.configEngineFactoryProvider={provide:pA,useClass:iQ};if(n.metadataProvider){if(n.metadataProvider.provide!==mA)throw new Error(`Wrong injection token for metadataProvider, it should be '${mA}' and you used '${n.metadataProvider.provide}'`)}else n.metadataProvider={provide:mA,useClass:sQ};if(n.ruleProvider){if(n.ruleProvider.provide!==vA)throw new Error(`Wrong injection token for ruleProvider, it should be '${vA}' and you used '${n.ruleProvider.provide}'`)}else n.ruleProvider={provide:vA,useClass:oQ};if(n.mapperProvider){if(n.mapperProvider.provide!==gA)throw new Error(`Wrong injection token for mapperProvider, it should be '${gA}' and you used '${n.mapperProvider.provide}'`)}else n.mapperProvider={provide:gA,useClass:rQ};if(n.writerProvider){if(n.writerProvider.provide!==_A)throw new Error(`Wrong injection token for writerProvider, it should be '${_A}' and you used '${n.writerProvider.provide}'`)}else n.writerProvider={provide:_A,useClass:cQ};if(n.serverProvider){if(n.serverProvider.provide!==yA)throw new Error(`Wrong injection token for serverProvider, it should be '${yA}' and you used '${n.writerProvider.provide}'`)}else n.serverProvider={provide:yA,useClass:aQ};return{ngModule:i,providers:[zh,n.configProvider,n.configEngineFactoryProvider,n.metadataProvider,n.ruleProvider,n.mapperProvider,n.writerProvider,n.serverProvider,uQ]}}static forChild(){return{ngModule:i}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[[io]]}),i})();function Ez(i,t,e,n,r,s,o){try{var l=i[s](o),u=l.value}catch(p){return void e(p)}l.done?t(u):Promise.resolve(u).then(n,r)}function iy(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(u){Ez(s,n,r,o,l,"next",u)}function l(u){Ez(s,n,r,o,l,"throw",u)}o(void 0)})}}var Tz=W(5452);class M1{init(t,e,n){this.storage=e,this.logger=n,this.selector=`my-system-${t}`,this.findAll()||this.storage.store(this.selector,[])}findOne(t){let e=this.findAll(),n=pr.find(e,r=>t===r.id);if(n)return this.logger.info(`${this.selector} FINDONE`,n),n}delete(t){let e=this.findAll();return pr.remove(e,n=>t===n.id),this.storage.store(this.selector,e),this.logger.info("DELETE",t),e}store(t,e){let n=this.findAll(),r=pr.find(n,s=>t.id===s.id);return r?(r.id=t.id,e(r),this.logger.info("STORE/UPDATE",r)):(n.push(t),this.logger.info("STORE/INSERT",t)),this.storage.store(this.selector,n),n}findAll(){let t=this.storage.retrieve(this.selector);if(t){let e=JSON.parse(JSON.stringify(t));return this.logger.info(`${this.selector} FINDALL`,e),e}return this.storage.store(this.selector,[]),[]}reset(){return this.logger.info("RESET",this.selector),this.storage.store(this.selector,[]),[]}}var mm=(()=>{return(i=mm||(mm={})).Local="local_strategy",i.Session="session_strategy",i.InMemory="in_memory_strategy",mm;var i})();function D1(){}let rv=(()=>{class i{static normalize(e){return e=i.isCaseSensitive?e:e.toLowerCase(),`${i.prefix}${i.separator}${e}`}static isNormalizedKey(e){return 0===e.indexOf(i.prefix+i.separator)}static setPrefix(e){i.prefix=e}static setSeparator(e){i.separator=e}static setCaseSensitive(e){i.isCaseSensitive=e}static consumeConfiguration(e){"prefix"in e&&this.setPrefix(e.prefix),"separator"in e&&this.setSeparator(e.separator),"caseSensitive"in e&&this.setCaseSensitive(e.caseSensitive)}}return i.prefix="ngx-webstorage",i.separator="|",i.isCaseSensitive=!1,i})();class L1{constructor(t){this.strategy=t}retrieve(t){let e;return this.strategy.get(rv.normalize(t)).subscribe(n=>e=typeof n>"u"?null:n),e}store(t,e){return this.strategy.set(rv.normalize(t),e).subscribe(D1),e}clear(t){void 0!==t?this.strategy.del(rv.normalize(t)).subscribe(D1):this.strategy.clear().subscribe(D1)}getStrategyName(){return this.strategy.name}observe(t){return t=rv.normalize(t),this.strategy.keyChanges.pipe(Cg(e=>null===e||e===t),gm(()=>this.strategy.get(t)),jB(),g2({refCount:!0,bufferSize:1}))}}let m2=(()=>{class i{constructor(){this.caches={}}get(e,n){return this.getCacheStore(e)[n]}set(e,n,r){this.getCacheStore(e)[n]=r}del(e,n){delete this.getCacheStore(e)[n]}clear(e){this.caches[e]={}}getCacheStore(e){return e in this.caches?this.caches[e]:this.caches[e]={}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Mz=new vr("window_local_storage"),vQ={provide:Mz,useFactory:function mQ(){return typeof window<"u"?window.localStorage:null}},Dz=new vr("window_session_storage"),_Q={provide:Dz,useFactory:function yQ(){return typeof window<"u"?window.sessionStorage:null}};class Lz{constructor(t,e){this.storage=t,this.cache=e,this.keyChanges=new Ze}get isAvailable(){return void 0===this._isAvailable&&(this._isAvailable=class hQ{static isStorageAvailable(t){let e=!0;try{"object"==typeof t?(t.setItem("test-storage","foobar"),t.removeItem("test-storage")):e=!1}catch{e=!1}return e}}.isStorageAvailable(this.storage)),this._isAvailable}get(t){let e=this.cache.get(this.name,t);if(void 0!==e)return ds(e);try{const n=this.storage.getItem(t);null!==n&&(e=JSON.parse(n),this.cache.set(this.name,t,e))}catch(n){console.warn(n)}return ds(e)}set(t,e){const n=JSON.stringify(e);return this.storage.setItem(t,n),this.cache.set(this.name,t,e),this.keyChanges.next(t),ds(e)}del(t){return this.storage.removeItem(t),this.cache.del(this.name,t),this.keyChanges.next(t),ds(null)}clear(){return this.storage.clear(),this.cache.clear(this.name),this.keyChanges.next(null),ds(null)}}class ry extends Lz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=ry.strategyName,tD(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==e?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}ry.strategyName=mm.Local,ry.\u0275fac=function(t){return new(t||ry)(ai(Mz),ai(m2),ai(Yb),ai(ua))},ry.\u0275prov=cr({token:ry,factory:ry.\u0275fac});class sy extends Lz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=sy.strategyName,tD(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==t.key?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}sy.strategyName=mm.Session,sy.\u0275fac=function(t){return new(t||sy)(ai(Dz),ai(m2),ai(Yb),ai(ua))},sy.\u0275prov=cr({token:sy,factory:sy.\u0275fac});class oy{constructor(t){this.cache=t,this.keyChanges=new Ze,this.isAvailable=!0,this.name=oy.strategyName}get(t){return ds(this.cache.get(this.name,t))}set(t,e){return this.cache.set(this.name,t,e),this.keyChanges.next(t),ds(e)}del(t){return this.cache.del(this.name,t),this.keyChanges.next(t),ds(null)}clear(){return this.cache.clear(this.name),this.keyChanges.next(null),ds(null)}}oy.strategyName=mm.InMemory,oy.\u0275fac=function(t){return new(t||oy)(ai(m2))},oy.\u0275prov=cr({token:oy,factory:oy.\u0275fac});const P1=new vr("STORAGE_STRATEGIES"),bQ=[{provide:P1,useClass:oy,multi:!0},{provide:P1,useClass:ry,multi:!0},{provide:P1,useClass:sy,multi:!0}],Pz="invalid_strategy";let _0=(()=>{class i{constructor(e){this.strategies=e,this.registration$=new Ze,e||(e=[]),this.strategies=e.reverse().map((n,r,s)=>n.name).map((n,r,s)=>s.indexOf(n)===r?r:null).filter(n=>null!==n).map(n=>e[n])}static get(e){if(!this.isStrategyRegistered(e))throw Error(Pz);let n=this.index[e];return n.isAvailable||(n=this.index[mm.InMemory]),n}static set(e,n){this.index[e]=n}static clear(e){void 0!==e?delete this.index[e]:this.index={}}static isStrategyRegistered(e){return e in this.index}static hasRegistredStrategies(){return Object.keys(this.index).length>0}getStrategy(e){return i.get(e)}indexStrategies(){this.strategies.forEach(e=>this.register(e.name,e))}indexStrategy(e,n=!1){if(i.isStrategyRegistered(e)&&!n)return i.get(e);const r=this.strategies.find(s=>s.name===e);if(!r)throw new Error(Pz);return this.register(e,r,n),r}register(e,n,r=!1){(!i.isStrategyRegistered(e)||r)&&(i.set(e,n),this.registration$.next(e))}}return i.index={},i.\u0275fac=function(e){return new(e||i)(ai(P1,8))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class bA extends L1{}const EQ=[{provide:bA,useFactory:function wQ(i){const t=i.indexStrategy(mm.Local);return new L1(t)},deps:[_0]},{provide:class xQ extends L1{},useFactory:function IQ(i){const t=i.indexStrategy(mm.Session);return new L1(t)},deps:[_0]}],kz=new vr("ngx_webstorage_config");function TQ(i){return i.indexStrategies(),()=>_0.index}let MQ=(()=>{class i{constructor(e,n){n?rv.consumeConfiguration(n):console.error("NgxWebstorage : Possible misconfiguration (The forRoot method usage is mandatory since the 3.0.0)")}static forRoot(e={}){return{ngModule:i,providers:[{provide:kz,useValue:e},vQ,_Q,...EQ,...bQ,{provide:zw,useFactory:TQ,deps:[_0],multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)(ai(_0),ai(kz,8))},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({}),i})(),v2=(()=>{class i{constructor(){}ascii_to_u8a(e){return new Uint8Array(e.length).map((r,s)=>e.codePointAt(s)??0)}u8a_to_hex(e){let n="";for(const r of e)n+=r.toString(16).padStart(2,"0");return n}hex_to_u8a(e){if(e.length%2)throw new Error("odd string length");const n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const s=e.slice(2*r,2*r+2);n[r]=parseInt(s,16)}return n}u8a_to_ascii(e){let n="";for(const r of e)n+=String.fromCharCode(r);return n}encode(e){return this.u8a_to_hex(this.ascii_to_u8a(e))}decode(e){return this.u8a_to_ascii(this.hex_to_u8a(e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Oz=new Tz.Parser;let R1=(()=>{class i extends M1{constructor(e,n,r,s){super(),this._logger=e,this._storage=n,this.base16=r,this.messageService=s,this.init("graphs",this._storage,this._logger)}outputNodes(e){return pr.map(pr.sortBy(e?.nodes,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,x:n.x,y:n.y,group:void 0===n.group?null:n.group,tag:void 0===n.tag?null:n.tag};return n.parent&&(r.parent=this.base16.decode(n.parent)),n.cdata&&(r.cdata=n.cdata),n.alias&&(r.alias=n.alias),r})}outputEdges(e){return pr.map(pr.sortBy(e?.edges,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,source:this.base16.decode(n.source),target:this.base16.decode(n.target),tag:void 0===n.tag?null:n.tag};return n.cdata&&(r.cdata=n.cdata),r})}computeInstance(e,n){return e[n]?e[n].count++:e[n]={count:1},e[n]}buildId(e,n){let r=this.computeInstance(e,`${n.source}:${n.target}`),s="";return r.count>1&&(s="@"+(r.count-1)),`${n.source}:${n.target}${s}`}toGexf(e){this._logger.info("toGexf",e);let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),n.push('<meta lastmodifieddate="2009-03-20">'),n.push("<creator>Gexf.net</creator>"),n.push("<description>A hello world! file</description>"),n.push("</meta>"),n.push(`<graph mode="static" defaultedgetype="directed" style="${e?.style}" rules="${e?.rules}">`),n.push("<nodes>"),pr.each(pr.sortBy(this.outputNodes(e),"uid"),o=>{let l=" />";o.cdata&&(l=">"),null==o.alias&&(o.alias=""),n.push(null===o.tag?o.parent?`<node id="${o.uid}" parent="${parent}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}"${l}`:`<node id="${o.uid}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}"${l}`:o.parent?`<node id="${o.uid}" parent="${o.parent}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}" tag="${o.tag}"${l}`:`<node id="${o.uid}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}" tag="${o.tag}"${l}`),o.cdata&&(n.push(`<![CDATA[${o.cdata}]]>`),n.push("</node>"))}),n.push("</nodes>"),n.push("<edges>");let r=pr.map(this.outputEdges(e),o=>(o.uid=`${o.source}:${o.target}`,o)),s={};return pr.each(pr.sortBy(r,"uid"),o=>{let l=" />";o.cdata&&(l=">"),n.push(null===o.tag?`<edge id="${this.buildId(s,o)}" source="${o.source}" target="${o.target}" label="${o.label}"${l}`:`<edge id="${this.buildId(s,o)}" source="${o.source}" target="${o.target}" label="${o.label}" tag="${o.tag}"${l}`),o.cdata&&(n.push(`<![CDATA[${o.cdata}]]>`),n.push("</edge>"))}),n.push("</edges>"),n.push("</graph>"),n.push("</gexf>"),n}toGraphml(e){let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">'),n.push(`<graph id="G" edgedefault="undirected" style="${e?.style}">`),pr.each(this.outputNodes(e),s=>{let o=" />";s.cdata&&(o=">"),n.push(null===s.tag?s.parent?`<node id="${s.uid}" parent="${parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:s.parent?`<node id="${s.uid}" parent="${s.parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</node>"))});let r={};return pr.each(this.outputEdges(e),s=>{let o=" />";s.cdata&&(o=">"),n.push(null===s.tag?`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}"${o}`:`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</edge>"))}),n.push("</graph>"),n.push("</graphml>"),n}filterCDATA(e){if(e){let n="";for(let r=1;r<e.length-1;r++)n+=e.charAt(r);return n}}loadGraphGexf(e,n,r){var s=this;return iy(function*(){return s._logger.info(`loadGraphGexf: ${e}`),new Promise(o=>{Oz.parseString(r,(l,u)=>{if(l)throw s._logger.error(l),l;let p={id:e,style:"default",rules:"default",label:n,nodes:[],edges:[]};pr.each(u.gexf.graph,v=>{p.style=v.$.style,p.rules=v.$.rules;let w={};s._logger.info("loading nodes",v.nodes),pr.each(v.nodes,I=>{pr.each(I.node,T=>{let k={id:s.base16.encode(T.$.id),x:parseFloat(T.$.x),y:parseFloat(T.$.y),cdata:s.filterCDATA(T._),alias:T.$.alias?T.$.alias:"",label:T.$.label?T.$.label:"",group:T.$.group?T.$.group:"",tag:T.$.tag?T.$.tag:""};w[k.id]=!0,T.$.parent&&(k.parent=s.base16.encode(T.$.parent)),p.nodes.push(k)})}),s._logger.info("loading edges",v.edges),pr.each(v.edges,I=>{pr.each(I.edge,T=>{let k={id:s.base16.encode(T.$.id),source:s.base16.encode(T.$.source),target:s.base16.encode(T.$.target),cdata:s.filterCDATA(T._),label:T.$.label?T.$.label:"",tag:T.$.tag?T.$.tag:""};if(!w[k.source])throw s._logger.error("source unkown",T.$),new Error(`source unkown ${T.$.source}`);if(!w[k.target])throw s._logger.error("target unkown",T.$),new Error(`target unkown ${T.$.target}`);p.edges.push(k)})})}),s._logger.info(p),o(p)})})})()}extractMlData(e,n){let r=pr.find(e.data,s=>{if(s.$.key===n)return s});return r?r._:0}loadGraphMl(e,n,r){var s=this;return iy(function*(){return s._logger.info(`loadGraphMl: ${e}`),new Promise(o=>{Oz.parseString(r,(l,u)=>{if(l)throw l;let p={id:e,style:"default",rules:"default",label:n,nodes:[],edges:[]},v=[];pr.each(u.graphml.graph.key,w=>{v.push({label:w.id,type:w["attr.type"]})}),pr.each(u.graphml.graph,w=>{pr.each(w.node,I=>{let T={id:I.$.id,label:s.extractMlData(I,"tooltip"),x:parseFloat(s.extractMlData(I,"x")),y:parseFloat(s.extractMlData(I,"y"))};p.nodes.push(T)}),pr.each(w.edge,I=>{p.edges.push({id:I.$.id,label:"default",source:I.$.source,target:I.$.target})})}),o(p)})})})()}uploadHandler(e,n,r){var s=this;return new Promise(o=>{let l=new FileReader;l.addEventListener("loadend",iy(function*(){let u=new String(l.result),p={id:n,style:"default",rules:"default",label:r,nodes:[],edges:[]};u.includes('xmlns="http://gexf')&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GEXF file to ${r}`}),p=yield s.loadGraphGexf(n,r,u.toString())),u.includes("http://graphml.graphdrawing.org")&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GRAPHML file to ${r}`}),p=yield s.loadGraphMl(n,r,u.toString())),0==p.nodes.length&&s.messageService.add({severity:"warn",summary:"warn",detail:`No node for ${r}`}),o(p)})),l.readAsText(e)})}}return i.\u0275fac=function(e){return new(e||i)(ai(zh),ai(bA),ai(v2),ai(iv))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),k1=(()=>{class i{constructor(e){this.logger=e}fallbackCopyTextToClipboard(e){var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{var r=document.execCommand("copy");this.logger.info("Fallback: Copying text command was "+(r?"successful":"unsuccessful"))}catch(o){this.logger.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(n)}copyTextToClipboard(e){navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{this.logger.info("Async: Copying to clipboard was successful!")},n=>{this.logger.error("Async: Could not copy text: ",n)}):this.fallbackCopyTextToClipboard(e)}}return i.\u0275fac=function(e){return new(e||i)(ai(zh))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Fz=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(qt(h),qt(oi))},i.\u0275dir=fs({type:i}),i})(),b0=(()=>{class i extends Fz{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pa(i)))(n||i)}}(),i.\u0275dir=fs({type:i,features:[Sl]}),i})();const Xc=new vr("NgValueAccessor"),PQ={provide:Xc,useExisting:Zr(()=>C0),multi:!0},kQ=new vr("CompositionEventMode");let C0=(()=>{class i extends Fz{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function RQ(){const i=Jm()?Jm().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(qt(h),qt(oi),qt(kQ,8))},i.\u0275dir=fs({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&_n("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Xo([PQ]),Sl]}),i})();const Vh=new vr("NgValidators"),a_=new vr("NgAsyncValidators");function qz(i){return null!=i}function Xz(i){return Dw(i)?gr(i):i}function Yz(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Kz(i,t){return t.map(e=>e(i))}function Zz(i){return i.map(t=>function NQ(i){return!i.validate}(t)?t:e=>t.validate(e))}function y2(i){return null!=i?function Qz(i){if(!i)return null;const t=i.filter(qz);return 0==t.length?null:function(e){return Yz(Kz(e,t))}}(Zz(i)):null}function _2(i){return null!=i?function Jz(i){if(!i)return null;const t=i.filter(qz);return 0==t.length?null:function(e){return function DQ(...i){const t=et(i),{args:e,keys:n}=A3(i),r=new _t(s=>{const{length:o}=e;if(!o)return void s.complete();const l=new Array(o);let u=o,p=o;for(let v=0;v<o;v++){let w=!1;Nn(e[v]).subscribe(An(s,I=>{w||(w=!0,p--),l[v]=I},()=>u--,void 0,()=>{(!u||!w)&&(p||s.next(n?I3(n,l):l),s.complete())}))}});return t?r.pipe(x3(t)):r}(Kz(e,t).map(Xz)).pipe(le(Yz))}}(Zz(i)):null}function eV(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function b2(i){return i?Array.isArray(i)?i:[i]:[]}function F1(i,t){return Array.isArray(i)?i.includes(t):i===t}function iV(i,t){const e=b2(t);return b2(i).forEach(r=>{F1(e,r)||e.push(r)}),e}function rV(i,t){return b2(t).filter(e=>!F1(i,e))}class sV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=y2(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=_2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Cf extends sV{get formDirective(){return null}get path(){return null}}class sv extends sV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let cC=(()=>{class i extends class oV{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(qt(sv,2))},i.\u0275dir=fs({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&Fp("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[Sl]}),i})();const CA="VALID",B1="INVALID",uC="PENDING",wA="DISABLED";function lV(i){return Array.isArray(i)?y2(i):i||null}function cV(i){return Array.isArray(i)?_2(i):i||null}function z1(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function AA(i,t){(function E2(i,t){const e=function tV(i){return i._rawValidators}(i);null!==t.validator?i.setValidators(eV(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=function nV(i){return i._rawAsyncValidators}(i);null!==t.asyncValidator?i.setAsyncValidators(eV(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();H1(t._rawValidators,r),H1(t._rawAsyncValidators,r)})(i,t),t.valueAccessor.writeValue(i.value),i.disabled&&t.valueAccessor.setDisabledState?.(!0),function qQ(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&fV(i,t)})}(i,t),function YQ(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function XQ(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&fV(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function $Q(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function H1(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function fV(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function vV(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function yV(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const iJ={provide:sv,useExisting:Zr(()=>ay)},wV=(()=>Promise.resolve(null))();let ay=(()=>{class i extends sv{constructor(e,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class hV{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=lV(this._rawValidators),this._composedAsyncValidatorFn=cV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===CA}get invalid(){return this.status===B1}get pending(){return this.status==uC}get disabled(){return this.status===wA}get enabled(){return this.status!==wA}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=lV(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=cV(t)}addValidators(t){this.setValidators(iV(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(iV(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(rV(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(rV(t,this._rawAsyncValidators))}hasValidator(t){return F1(this._rawValidators,t)}hasAsyncValidator(t){return F1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=uC,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wA,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=CA,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===CA||this.status===uC)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wA:CA}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=uC,this._hasOwnPendingAsyncValidator=!0;const e=Xz(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new qn,this.statusChanges=new qn}_calculateStatus(){return this._allControlsDisabled()?wA:this.errors?B1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(uC)?uC:this._anyControlsHaveStatus(B1)?B1:CA}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){z1(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,n){super(function x2(i){return(z1(i)?i.validators:i)||null}(e),function I2(i,t){return(z1(t)?t.asyncValidators:i)||null}(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),z1(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=yV(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){vV(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){vV(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){yV(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new qn,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function M2(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===C0?e=s:function QQ(i){return Object.getPrototypeOf(i.constructor)===b0}(s)?n=s:r=s}),r||n||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function T2(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){AA(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){wV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&Xv(n);wV.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function V1(i,t){return[...t.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(qt(Cf,9),qt(Vh,10),qt(a_,10),qt(Xc,10),qt(Yo,8))},i.\u0275dir=fs({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xo([iJ]),Sl,Na]}),i})(),xV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({}),i})(),TJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[xV]}),i})(),W1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[TJ]}),i})();class HV{}const ly="*";function cy(i,t){return{type:7,name:i,definitions:t,options:{}}}function Yc(i,t=null){return{type:4,styles:t,timings:i}}function GV(i,t=null){return{type:2,steps:i,options:t}}function Tl(i){return{type:6,styles:i,offset:null}}function A0(i,t,e){return{type:0,name:i,styles:t,options:e}}function Qu(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function dC(i,t=null){return{type:8,animation:i,options:t}}function LJ(i=null){return{type:9,options:i}}function WV(i,t=null){return{type:10,animation:i,options:t}}function PJ(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function jV(i){Promise.resolve(null).then(i)}class IA{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){jV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class $V{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?jV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,l)=>Math.max(o,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}let Ft=(()=>{class i{static addClass(e,n){e.classList?e.classList.add(n):e.className+=" "+n}static addMultipleClasses(e,n){if(e.classList){let r=n.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=n.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,n){return e.classList?e.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(n){return n!==e})}static find(e,n){return Array.from(e.querySelectorAll(n))}static findSingle(e,n){return e?e.querySelector(n):null}static index(e){let n=e.parentNode.childNodes,r=0;for(var s=0;s<n.length;s++){if(n[s]==e)return r;1==n[s].nodeType&&r++}return-1}static indexWithinGroup(e,n){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var o=0;o<r.length;o++){if(r[o]==e)return s;r[o].attributes&&r[o].attributes[n]&&1==r[o].nodeType&&s++}return-1}static relativePosition(e,n){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=n.offsetHeight,o=n.getBoundingClientRect(),l=this.getViewport();let u,p;o.top+s+r.height>l.height?(u=-1*r.height,e.style.transformOrigin="bottom",o.top+u<0&&(u=-1*o.top)):(u=s,e.style.transformOrigin="top"),p=r.width>l.width?-1*o.left:o.left+r.width>l.width?-1*(o.left+r.width-l.width):0,e.style.top=u+"px",e.style.left=p+"px"}static absolutePosition(e,n){let T,k,r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,o=r.width,l=n.offsetHeight,u=n.offsetWidth,p=n.getBoundingClientRect(),v=this.getWindowScrollTop(),w=this.getWindowScrollLeft(),I=this.getViewport();p.top+l+s>I.height?(T=p.top+v-s,e.style.transformOrigin="bottom",T<0&&(T=v)):(T=l+p.top+v,e.style.transformOrigin="top"),k=p.left+o>I.width?Math.max(0,p.left+w+u-o):p.left+w,e.style.top=T+"px",e.style.left=k+"px"}static getParents(e,n=[]){return null===e.parentNode?n:this.getParents(e.parentNode,n.concat([e.parentNode]))}static getScrollableParents(e){let n=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,o=l=>{let u=window.getComputedStyle(l,null);return s.test(u.getPropertyValue("overflow"))||s.test(u.getPropertyValue("overflowX"))||s.test(u.getPropertyValue("overflowY"))};for(let l of r){let u=1===l.nodeType&&l.dataset.scrollselectors;if(u){let p=u.split(",");for(let v of p){let w=this.findSingle(l,v);w&&o(w)&&n.push(w)}}9!==l.nodeType&&o(l)&&n.push(l)}}return n}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementDimensions(e){let n={};return e.style.visibility="hidden",e.style.display="block",n.width=e.offsetWidth,n.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",n}static scrollInView(e,n){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(e).getPropertyValue("paddingTop"),l=o?parseFloat(o):0,u=e.getBoundingClientRect(),v=n.getBoundingClientRect().top+document.body.scrollTop-(u.top+document.body.scrollTop)-s-l,w=e.scrollTop,I=e.clientHeight,T=this.getOuterHeight(n);v<0?e.scrollTop=w+v:v+T>I&&(e.scrollTop=w+v-I+T)}static fadeIn(e,n){e.style.opacity=0;let r=+new Date,s=0,o=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/n,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(e,n){var r=1,l=50/n;let u=setInterval(()=>{(r-=l)<=0&&(r=0,clearInterval(u)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(o){return-1!==[].indexOf.call(document.querySelectorAll(o),this)}).call(e,n)}static getOuterWidth(e,n){let r=e.offsetWidth;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let n=getComputedStyle(e);return parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)}static getHorizontalMargin(e){let n=getComputedStyle(e);return parseFloat(n.marginLeft)+parseFloat(n.marginRight)}static innerWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static width(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static getInnerHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n}static getOuterHeight(e,n){let r=e.offsetHeight;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),n}static getWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),n}static getViewport(){let e=window,n=document,r=n.documentElement,s=n.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var n=e.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,n){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(n,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,n){if(this.isElement(n))n.appendChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot append "+n+" to "+e;n.el.nativeElement.appendChild(e)}}static removeChild(e,n){if(this.isElement(n))n.removeChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot remove "+e+" from "+n;n.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let n=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let n=document.createElement("div");n.className="p-scrollbar-measure",document.body.appendChild(n);let r=n.offsetWidth-n.clientWidth;return document.body.removeChild(n),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=n,n}static invokeElementMethod(e,n,r){e[n].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let n=i.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of n)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return i.zindex=1e3,i.calculatedScrollbarWidth=null,i.calculatedScrollbarHeight=null,i})();class SA{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=Ft.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let ov=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Ft.appendChild(this.container,this.el.nativeElement):Ft.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Ft.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?ic.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&ic.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+Ft.getWindowScrollLeft(),top:e.top+Ft.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),n=e.left+Ft.getOuterWidth(this.el.nativeElement),r=e.top+(Ft.getOuterHeight(this.el.nativeElement)-Ft.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),n=e.left-Ft.getOuterWidth(this.container),r=e.top+(Ft.getOuterHeight(this.el.nativeElement)-Ft.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),n=e.left+(Ft.getOuterWidth(this.el.nativeElement)-Ft.getOuterWidth(this.container))/2,r=e.top-Ft.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),n=e.left+(Ft.getOuterWidth(this.el.nativeElement)-Ft.getOuterWidth(this.container))/2,r=e.top+Ft.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return Ft.hasClass(e,"p-inputwrapper")?Ft.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let e=this.container.getBoundingClientRect(),n=e.top,r=e.left,s=Ft.getOuterWidth(this.container),o=Ft.getOuterHeight(this.container),l=Ft.getViewport();return r+s>l.width||r<0||n<0||n+o>l.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Ft.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&ic.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(ua),qt(Np))},i.\u0275dir=fs({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[Na]}),i})(),av=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();const RJ=["element"],kJ=["content"];function OJ(i,t){1&i&&qi(0)}const B2=function(i,t){return{$implicit:i,options:t}};function FJ(i,t){if(1&i&&(is(0),ze(1,OJ,1,0,"ng-container",7),rs()),2&i){const e=ye(2);we(1),de("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",Ts(2,B2,e.loadedItems,e.getContentOptions()))}}function NJ(i,t){1&i&&qi(0)}function BJ(i,t){if(1&i&&(is(0),ze(1,NJ,1,0,"ng-container",7),rs()),2&i){const e=t.$implicit,n=t.index,r=ye(3);we(1),de("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",Ts(2,B2,e,r.getOptions(n)))}}const zJ=function(i){return{"p-scroller-loading":i}};function VJ(i,t){if(1&i&&(Xe(0,"div",8,9),ze(2,BJ,2,5,"ng-container",10),Ke()),2&i){const e=ye(2);de("ngClass",Li(4,zJ,e.d_loading))("ngStyle",e.contentStyle),we(2),de("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function UJ(i,t){1&i&&Kn(0,"div",11),2&i&&de("ngStyle",ye(2).spacerStyle)}function HJ(i,t){1&i&&qi(0)}const GJ=function(i){return{numCols:i}},qV=function(i){return{options:i}};function WJ(i,t){if(1&i&&(is(0),ze(1,HJ,1,0,"ng-container",7),rs()),2&i){const e=t.index,n=ye(4);we(1),de("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",Li(4,qV,n.getLoaderOptions(e,n.both&&Li(2,GJ,n._numItemsInViewport.cols))))}}function jJ(i,t){if(1&i&&(is(0),ze(1,WJ,2,6,"ng-container",14),rs()),2&i){const e=ye(3);we(1),de("ngForOf",e.loaderArr)}}function $J(i,t){1&i&&qi(0)}const qJ=function(){return{styleClass:"p-scroller-loading-icon"}};function XJ(i,t){if(1&i&&(is(0),ze(1,$J,1,0,"ng-container",7),rs()),2&i){const e=ye(4);we(1),de("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",Li(3,qV,Oo(2,qJ)))}}function YJ(i,t){1&i&&Kn(0,"i",16)}function KJ(i,t){if(1&i&&(ze(0,XJ,2,5,"ng-container",0),ze(1,YJ,1,0,"ng-template",null,15,Mc)),2&i){const e=Po(2);de("ngIf",ye(3).loaderIconTemplate)("ngIfElse",e)}}const ZJ=function(i){return{"p-component-overlay":i}};function QJ(i,t){if(1&i&&(Xe(0,"div",12),ze(1,jJ,2,1,"ng-container",0),ze(2,KJ,3,2,"ng-template",null,13,Mc),Ke()),2&i){const e=Po(3),n=ye(2);de("ngClass",Li(3,ZJ,!n.loaderTemplate)),we(1),de("ngIf",n.loaderTemplate)("ngIfElse",e)}}const JJ=function(i,t){return{"p-scroller":!0,"p-both-scroll":i,"p-horizontal-scroll":t}};function eee(i,t){if(1&i){const e=Di();is(0),Xe(1,"div",2,3),_n("scroll",function(r){return Lt(e),Pt(ye().onContainerScroll(r))}),ze(3,FJ,2,5,"ng-container",0),ze(4,VJ,3,6,"ng-template",null,4,Mc),ze(6,UJ,1,1,"div",5),ze(7,QJ,4,5,"div",6),Ke(),rs()}if(2&i){const e=Po(5),n=ye();we(1),Yr(n._styleClass),de("ngStyle",n._style)("ngClass",Ts(10,JJ,n.both,n.horizontal)),Lr("id",n._id)("tabindex",n.tabindex),we(2),de("ngIf",n.contentTemplate)("ngIfElse",e),we(3),de("ngIf",n._showSpacer),we(1),de("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function tee(i,t){1&i&&qi(0)}const nee=function(i,t){return{rows:i,columns:t}};function iee(i,t){if(1&i&&(is(0),ze(1,tee,1,0,"ng-container",7),rs()),2&i){const e=ye(2);we(1),de("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",Ts(5,B2,e.items,Ts(2,nee,e._items,e.loadedColumns)))}}function ree(i,t){if(1&i&&(Mu(0),ze(1,iee,2,8,"ng-container",17)),2&i){const e=ye();we(1),de("ngIf",e.contentTemplate)}}const see=["*"];let EA=(()=>{class i{constructor(e,n){this.cd=e,this.zone=n,this.onLazyLoad=new qn,this.onScroll=new qn,this.onScrollIndexChange=new qn,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._delay=0,this._resizeDelay=10,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1,this._disabled||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([n,r])=>this[`_${n}`]!==r&&(this[`_${n}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}ngOnInit(){this.setInitialState()}ngOnChanges(e){let n=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,n=!0)}if(this.initialized&&!n&&(e.items||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init(),e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.setContentEl(this.contentEl),this.init(),this.defaultWidth=Ft.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=Ft.getHeight(this.elementViewChild.nativeElement),this.initialized=!0}ngAfterViewChecked(){this.calculateAutoSize()}ngOnDestroy(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||Ft.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems}getElementRef(){return this.elementViewChild}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,n="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),o=(p=0,v)=>p<=v?0:p,l=(p,v,w)=>p*v+w,u=(p=0,v=0)=>this.scrollTo({left:p,top:v,behavior:n});if(this.both){const p={rows:o(e[0],r[0]),cols:o(e[1],r[1])};(p.rows!==this.first.rows||p.cols!==this.first.cols)&&u(l(p.cols,this._itemSize[1],s.left),l(p.rows,this._itemSize[0],s.top))}else{const p=o(e,r);p!==this.first&&(this.horizontal?u(l(p,this._itemSize,s.left),0):u(0,l(p,this._itemSize,s.top)))}}scrollInView(e,n,r="auto"){if(n){const{first:s,viewport:o}=this.getRenderedRange(),l=(v=0,w=0)=>this.scrollTo({left:v,top:w,behavior:r}),p="to-end"===n;if("to-start"===n){if(this.both)o.first.rows-s.rows>e[0]?l(o.first.cols*this._itemSize[1],(o.first.rows-1)*this._itemSize[0]):o.first.cols-s.cols>e[1]&&l((o.first.cols-1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.first-s>e){const v=(o.first-1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else if(p)if(this.both)o.last.rows-s.rows<=e[0]+1?l(o.first.cols*this._itemSize[1],(o.first.rows+1)*this._itemSize[0]):o.last.cols-s.cols<=e[1]+1&&l((o.first.cols+1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.last-s<=e+1){const v=(o.first+1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,o)=>Math.floor(s/(o||s));let n=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:o}=this.elementViewChild.nativeElement;this.both?(n={rows:e(s,this._itemSize[0]),cols:e(o,this._itemSize[1])},r={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols}):(n=e(this.horizontal?o:s,this._itemSize),r=n+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:n,last:r}}}calculateNumItems(){const e=this.getContentPosition(),n=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(p,v)=>Math.ceil(p/(v||p)),o=p=>Math.ceil(p/2),l=this.both?{rows:s(r,this._itemSize[0]),cols:s(n,this._itemSize[1])}:s(this.horizontal?n:r,this._itemSize);return{numItemsInViewport:l,numToleratedItems:this.d_numToleratedItems||(this.both?[o(l.rows),o(l.cols)]:o(l))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),r=(l,u,p,v=!1)=>this.getLast(l+u+(l<p?2:3)*p,v),s=this.first,o=this.both?{rows:r(this.first.rows,e.rows,n[0]),cols:r(this.first.cols,e.cols,n[1],!0)}:r(this.first,e,n);this.last=o,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&this.handleEvents("onLazyLoad",{first:s,last:o})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:n}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(n<this.defaultHeight?n:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),n=parseInt(e.paddingLeft,10)+Math.max(parseInt(e.left,10),0),r=parseInt(e.paddingRight,10)+Math.max(parseInt(e.right,10),0),s=parseInt(e.paddingTop,10)+Math.max(parseInt(e.top,10),0),o=parseInt(e.paddingBottom,10)+Math.max(parseInt(e.bottom,10),0);return{left:n,right:r,top:s,bottom:o,x:n+r,y:s+o}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(o,l)=>this.elementViewChild.nativeElement.style[o]=l;this.both||this.horizontal?(s("height",r),s("width",n)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),n=(r,s,o,l=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*o+l+"px"};this.both?(n("height",this._items,this._itemSize[0],e.y),n("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,e.x):n("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl){const n=e?e.first:this.first,r=(o,l)=>o*l,s=(o=0,l=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${o}px, ${l}px, 0)`};if(this.both)s(r(n.cols,this._itemSize[1]),r(n.rows,this._itemSize[0]));else{const o=r(n,this._itemSize);this.horizontal?s(o,0):s(0,o)}}}onScrollPositionChange(e){const n=e.target,r=this.getContentPosition(),s=(X,ue)=>X?X>ue?X-ue:X:0,o=(X,ue)=>Math.floor(X/(ue||X)),l=(X,ue,xe,be,Se,Ye)=>X<=Se?Se:Ye?xe-be-Se:ue+Se-1,u=(X,ue,xe,be,Se,Ye,gt)=>X<=Ye?0:Math.max(0,gt?X<ue?xe:X-Ye:X>ue?xe:X-2*Ye),p=(X,ue,xe,be,Se,Ye=!1)=>{let gt=ue+be+2*Se;return X>=Se&&(gt+=Se+1),this.getLast(gt,Ye)},v=s(n.scrollTop,r.top),w=s(n.scrollLeft,r.left);let I=this.both?{rows:0,cols:0}:0,T=this.last,k=!1,H=this.lastScrollPos;if(this.both){const X=this.lastScrollPos.top<=v,ue=this.lastScrollPos.left<=w,xe={rows:o(v,this._itemSize[0]),cols:o(w,this._itemSize[1])},be={rows:l(xe.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],X),cols:l(xe.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],ue)};I={rows:u(xe.rows,be.rows,this.first.rows,0,0,this.d_numToleratedItems[0],X),cols:u(xe.cols,be.cols,this.first.cols,0,0,this.d_numToleratedItems[1],ue)},T={rows:p(xe.rows,I.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:p(xe.cols,I.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},k=I.rows!==this.first.rows||T.rows!==this.last.rows||I.cols!==this.first.cols||T.cols!==this.last.cols,H={top:v,left:w}}else{const X=this.horizontal?w:v,ue=this.lastScrollPos<=X,xe=o(X,this._itemSize);I=u(xe,l(xe,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,ue),this.first,0,0,this.d_numToleratedItems,ue),T=p(xe,I,0,this.numItemsInViewport,this.d_numToleratedItems),k=I!==this.first||T!==this.last,H=X}return{first:I,last:T,isRangeChanged:k,scrollPos:H}}onScrollChange(e){const{first:n,last:r,isRangeChanged:s,scrollPos:o}=this.onScrollPositionChange(e);if(s){const l={first:n,last:r};this.setContentPosition(l),this.first=n,this.last=r,this.lastScrollPos=o,this.handleEvents("onScrollIndexChange",l),this._lazy&&this.handleEvents("onLazyLoad",l)}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:n}=this.onScrollPositionChange(e);n&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.cd.detectChanges())},this._delay)}else this.onScrollChange(e)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(this.elementViewChild){const[e,n]=[Ft.getWidth(this.elementViewChild.nativeElement),Ft.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,n!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=n,this.init()})}},this._resizeDelay)}handleEvents(e,n){return this.options&&this.options[e]?this.options[e](n):this[e].emit(n)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,n)=>this.getLoaderOptions(e,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const n=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:n,first:0===r,last:r===n-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,n){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...n}}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo),qt(ua))},i.\u0275cmp=Rr({type:i,selectors:[["p-scroller"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(RJ,5),Hr(kJ,5)),2&e){let r;tr(r=nr())&&(n.elementViewChild=r.first),tr(r=nr())&&(n.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",delay:"delay",resizeDelay:"resizeDelay",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[Na],ngContentSelectors:see,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,n){if(1&e&&(Xf(),ze(0,eee,8,13,"ng-container",0),ze(1,ree,2,1,"ng-template",null,1,Mc)),2&e){const r=Po(2);de("ngIf",!n._disabled)("ngIfElse",r)}},dependencies:[Mo,mu,Fo,El,ea],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}\n"],encapsulation:2}),i})(),lv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})(),Ju=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let n=this.getInk();if(!n||"none"===getComputedStyle(n,null).display)return;if(Ft.removeClass(n,"p-ink-active"),!Ft.getHeight(n)&&!Ft.getWidth(n)){let l=Math.max(Ft.getOuterWidth(this.el.nativeElement),Ft.getOuterHeight(this.el.nativeElement));n.style.height=l+"px",n.style.width=l+"px"}let r=Ft.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-Ft.getWidth(n)/2,o=e.pageY-r.top+document.body.scrollLeft-Ft.getHeight(n)/2;n.style.top=o+"px",n.style.left=s+"px",Ft.addClass(n,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&Ft.removeClass(e,"p-ink-active")}onAnimationEnd(e){Ft.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),Ft.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(ua),qt(Np,8))},i.\u0275dir=fs({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),i})(),yu=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})(),oee=(()=>{class i{constructor(e){this.host=e,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=Ft.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return i.\u0275fac=function(e){return new(e||i)(qt(oi))},i.\u0275dir=fs({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:["pAutoFocus","autofocus"]}}),i})(),aee=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();function lee(i,t){if(1&i&&(Xe(0,"span"),bi(1),Ke()),2&i){const e=ye();we(1),As(e.label||"empty")}}function cee(i,t){1&i&&qi(0)}const TA=function(i){return{height:i}},uee=function(i,t){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":t}},z2=function(i){return{$implicit:i}},dee=["container"],hee=["filter"],fee=["in"],pee=["editableInput"],gee=["items"],mee=["scroller"];function vee(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(2);we(1),As(e.label||"empty")}}function yee(i,t){1&i&&qi(0)}const _ee=function(i){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":i}};function bee(i,t){if(1&i&&(Xe(0,"span",12),ze(1,vee,2,1,"ng-container",13),ze(2,yee,1,0,"ng-container",14),Ke()),2&i){const e=ye();de("ngClass",Li(9,_ee,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),Lr("id",e.labelId),we(1),de("ngIf",!e.selectedItemTemplate),we(1),de("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",Li(11,z2,e.selectedOption))}}const Cee=function(i){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":i}};function wee(i,t){if(1&i&&(Xe(0,"span",15),bi(1),Ke()),2&i){const e=ye();de("ngClass",Li(2,Cee,null==e.placeholder||0===e.placeholder.length)),we(1),As(e.placeholder||"empty")}}function Aee(i,t){if(1&i){const e=Di();Xe(0,"input",16,17),_n("click",function(){return Lt(e),Pt(ye().onEditableInputClick())})("input",function(r){return Lt(e),Pt(ye().onEditableInputChange(r))})("focus",function(r){return Lt(e),Pt(ye().onEditableInputFocus(r))})("blur",function(r){return Lt(e),Pt(ye().onInputBlur(r))}),Ke()}if(2&i){const e=ye();de("disabled",e.disabled),Lr("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function xee(i,t){if(1&i){const e=Di();Xe(0,"i",18),_n("click",function(r){return Lt(e),Pt(ye().clear(r))}),Ke()}}function Iee(i,t){1&i&&qi(0)}function See(i,t){1&i&&qi(0)}const XV=function(i){return{options:i}};function Eee(i,t){if(1&i&&(is(0),ze(1,See,1,0,"ng-container",14),rs()),2&i){const e=ye(3);we(1),de("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Li(2,XV,e.filterOptions))}}function Tee(i,t){if(1&i){const e=Di();Xe(0,"div",27)(1,"input",28,29),_n("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){return Lt(e),Pt(ye(3).onKeydown(r,!1))})("input",function(r){return Lt(e),Pt(ye(3).onFilterInputChange(r))}),Ke(),Kn(3,"span",30),Ke()}if(2&i){const e=ye(3);we(1),de("value",e.filterValue||""),Lr("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function Mee(i,t){if(1&i&&(Xe(0,"div",24),_n("click",function(n){return n.stopPropagation()}),ze(1,Eee,2,4,"ng-container",25),ze(2,Tee,4,4,"ng-template",null,26,Mc),Ke()),2&i){const e=Po(3),n=ye(2);we(1),de("ngIf",n.filterTemplate)("ngIfElse",e)}}function Dee(i,t){1&i&&qi(0)}const YV=function(i,t){return{$implicit:i,options:t}};function Lee(i,t){if(1&i&&ze(0,Dee,1,0,"ng-container",14),2&i){const e=t.$implicit,n=t.options;ye(2),de("ngTemplateOutlet",Po(7))("ngTemplateOutletContext",Ts(2,YV,e,n))}}function Pee(i,t){1&i&&qi(0)}function Ree(i,t){if(1&i&&ze(0,Pee,1,0,"ng-container",14),2&i){const e=t.options;de("ngTemplateOutlet",ye(4).loaderTemplate)("ngTemplateOutletContext",Li(2,XV,e))}}function kee(i,t){1&i&&(is(0),ze(1,Ree,1,4,"ng-template",34),rs())}function Oee(i,t){if(1&i){const e=Di();Xe(0,"p-scroller",31,32),_n("onLazyLoad",function(r){return Lt(e),Pt(ye(2).onLazyLoad.emit(r))}),ze(2,Lee,1,5,"ng-template",33),ze(3,kee,2,0,"ng-container",13),Ke()}if(2&i){const e=ye(2);To(Li(8,TA,e.scrollHeight)),de("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),we(3),de("ngIf",e.loaderTemplate)}}function Fee(i,t){1&i&&qi(0)}const Nee=function(){return{}};function Bee(i,t){if(1&i&&(is(0),ze(1,Fee,1,0,"ng-container",14),rs()),2&i){ye();const e=Po(7),n=ye();we(1),de("ngTemplateOutlet",e)("ngTemplateOutletContext",Ts(3,YV,n.optionsToDisplay,Oo(2,Nee)))}}function zee(i,t){if(1&i&&(Xe(0,"span"),bi(1),Ke()),2&i){const e=ye().$implicit,n=ye(4);we(1),As(n.getOptionGroupLabel(e)||"empty")}}function Vee(i,t){1&i&&qi(0)}function Uee(i,t){1&i&&qi(0)}const KV=function(i,t){return{$implicit:i,selectedOption:t}};function Hee(i,t){if(1&i&&(Xe(0,"li",40),ze(1,zee,2,1,"span",13),ze(2,Vee,1,0,"ng-container",14),Ke(),ze(3,Uee,1,0,"ng-container",14)),2&i){const e=t.$implicit,n=ye(2).options,r=Po(5),s=ye(2);de("ngStyle",Li(6,TA,n.itemSize+"px")),we(1),de("ngIf",!s.groupTemplate),we(1),de("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",Li(8,z2,e)),we(1),de("ngTemplateOutlet",r)("ngTemplateOutletContext",Ts(10,KV,s.getOptionGroupChildren(e),s.selectedOption))}}function Gee(i,t){if(1&i&&(is(0),ze(1,Hee,4,13,"ng-template",39),rs()),2&i){const e=ye().$implicit;we(1),de("ngForOf",e)}}function Wee(i,t){1&i&&qi(0)}function jee(i,t){if(1&i&&(is(0),ze(1,Wee,1,0,"ng-container",14),rs()),2&i){const e=ye().$implicit,n=Po(5),r=ye(2);we(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",Ts(2,KV,e,r.selectedOption))}}function $ee(i,t){if(1&i){const e=Di();Xe(0,"p-dropdownItem",41),_n("onClick",function(r){return Lt(e),Pt(ye(4).onItemClick(r))}),Ke()}if(2&i){const e=t.$implicit,n=ye().selectedOption,r=ye(3);de("option",e)("selected",n==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function qee(i,t){1&i&&ze(0,$ee,1,5,"ng-template",39),2&i&&de("ngForOf",t.$implicit)}function Xee(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(4);we(1),jc(" ",e.emptyFilterMessageLabel," ")}}function Yee(i,t){1&i&&qi(0,null,43)}function Kee(i,t){if(1&i&&(Xe(0,"li",42),ze(1,Xee,2,1,"ng-container",25),ze(2,Yee,2,0,"ng-container",19),Ke()),2&i){const e=ye().options,n=ye(2);de("ngStyle",Li(4,TA,e.itemSize+"px")),we(1),de("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),we(1),de("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function Zee(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(4);we(1),jc(" ",e.emptyMessageLabel," ")}}function Qee(i,t){1&i&&qi(0,null,44)}function Jee(i,t){if(1&i&&(Xe(0,"li",42),ze(1,Zee,2,1,"ng-container",25),ze(2,Qee,2,0,"ng-container",19),Ke()),2&i){const e=ye().options,n=ye(2);de("ngStyle",Li(4,TA,e.itemSize+"px")),we(1),de("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),we(1),de("ngTemplateOutlet",n.emptyTemplate)}}function ete(i,t){if(1&i&&(Xe(0,"ul",35,36),ze(2,Gee,2,1,"ng-container",13),ze(3,jee,2,5,"ng-container",13),ze(4,qee,1,1,"ng-template",null,37,Mc),ze(6,Kee,3,6,"li",38),ze(7,Jee,3,6,"li",38),Ke()),2&i){const e=t.options,n=ye(2);To(e.contentStyle),de("ngClass",e.contentStyleClass),Lr("id",n.listId),we(2),de("ngIf",n.group),we(1),de("ngIf",!n.group),we(3),de("ngIf",n.filterValue&&n.isEmpty()),we(1),de("ngIf",!n.filterValue&&n.isEmpty())}}function tte(i,t){1&i&&qi(0)}const nte=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},ite=function(i){return{value:"visible",params:i}};function rte(i,t){if(1&i){const e=Di();Xe(0,"div",0),_n("click",function(r){return Lt(e),Pt(ye().onOverlayClick(r))})("@overlayAnimation.start",function(r){return Lt(e),Pt(ye().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return Lt(e),Pt(ye().onOverlayAnimationEnd(r))}),ze(1,Iee,1,0,"ng-container",19),ze(2,Mee,4,2,"div",20),Xe(3,"div",21),ze(4,Oee,4,10,"p-scroller",22),ze(5,Bee,2,6,"ng-container",13),ze(6,ete,8,8,"ng-template",null,23,Mc),Ke(),ze(8,tte,1,0,"ng-container",19),Ke()}if(2&i){const e=ye();Yr(e.panelStyleClass),de("ngClass","p-dropdown-panel p-component")("@overlayAnimation",Li(15,ite,Ts(12,nte,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),we(1),de("ngTemplateOutlet",e.headerTemplate),we(1),de("ngIf",e.filter),we(1),Nh("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),we(1),de("ngIf",e.virtualScroll),we(1),de("ngIf",!e.virtualScroll),we(3),de("ngTemplateOutlet",e.footerTemplate)}}const ste=function(i,t,e,n){return{"p-dropdown p-component":!0,"p-disabled":i,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":n}},ote={provide:Xc,useExisting:Zr(()=>V2),multi:!0};let ate=(()=>{class i{constructor(){this.onClick=new qn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Rr({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Xe(0,"li",0),_n("click",function(s){return n.onOptionClick(s)}),ze(1,lee,2,1,"span",1),ze(2,cee,1,0,"ng-container",2),Ke()),2&e&&(de("ngStyle",Li(8,TA,n.itemSize+"px"))("id",n.selected?"p-highlighted-option":"")("ngClass",Ts(10,uee,n.selected,n.disabled)),Lr("aria-label",n.label)("aria-selected",n.selected),we(1),de("ngIf",!n.template),we(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Li(13,z2,n.option)))},dependencies:[Mo,Fo,El,ea,Ju],encapsulation:2}),i})(),V2=(()=>{class i{constructor(e,n,r,s,o,l,u){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.filterService=o,this.config=l,this.overlayService=u,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new qn,this.onFilter=new qn,this.onFocus=new qn,this.onBlur=new qn,this.onClick=new qn,this.onShow=new qn,this.onHide=new qn,this.onClear=new qn,this.onLazyLoad=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=sC()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&ur.isNotEmpty(this.value)&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(vu.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(vu.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?ur.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?ur.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?ur.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?ur.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ur.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const n=e.option;this.isOptionDisabled(n)||(this.selectItem(e.originalEvent,n),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},150)}selectItem(e,n){this.selectedOption!=n&&(this.selectedOption=n,this.value=this.getOptionValue(n),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(Ft.findSingle(this.overlay,"li.p-highlight")&&Ft.scrollInView(this.itemsWrapper,Ft.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return Ft.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=Ft.findSingle(this.overlay,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&ic.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length)if(this.virtualScroll){const n=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==n&&this.scroller.scrollToIndex(n)}else{let n=Ft.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");n&&n.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){"void"===e.toState&&ic.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Ft.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Ft.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?Ft.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Ft.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}findNextEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}onKeydown(e,n){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let o=this.optionsToDisplay[r.groupIndex-1];o&&(this.selectItem(e,this.getOptionGroupChildren(o)[this.getOptionGroupChildren(o).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:n&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:n&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const n=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=n,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+n:n,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let n;return this.searchValue&&(n=this.searchOptionInRange(e,this.optionsToDisplay.length),n||(n=this.searchOptionInRange(0,e))),n}searchOptionInRange(e,n){for(let r=e;r<n;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}}return null}findOptionIndex(e,n){let r=-1;if(n)for(let s=0;s<n.length;s++)if(null==e&&null==this.getOptionValue(n[s])||ur.equals(e,this.getOptionValue(n[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,n){let r,s;if(n)for(let o=0;o<n.length&&(r=o,s=this.findOptionIndex(e,this.getOptionGroupChildren(n[o])),-1===s);o++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,n,r){if(this.group&&!r){let s;if(n&&n.length)for(let o of n)if(s=this.findOption(e,this.getOptionGroupChildren(o),!0),s)break;return s}{let s=this.findOptionIndex(e,n);return-1!=s?n[s]:null}}onFilterInputChange(e){let n=e.target.value;n&&n.length?(this._filterValue=n,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=n}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?Ft.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():Ft.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Ft.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&ic.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(h),qt(Yo),qt(ua),qt(sA),qt(Np),qt(oA))},i.\u0275cmp=Rr({type:i,selectors:[["p-dropdown"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(dee,5),Hr(hee,5),Hr(fee,5),Hr(pee,5),Hr(gee,5),Hr(mee,5)),2&e){let r;tr(r=nr())&&(n.containerViewChild=r.first),tr(r=nr())&&(n.filterViewChild=r.first),tr(r=nr())&&(n.accessibleViewChild=r.first),tr(r=nr())&&(n.editableInputViewChild=r.first),tr(r=nr())&&(n.itemsViewChild=r.first),tr(r=nr())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,n){2&e&&Fp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused||n.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[Xo([ote])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","pAutoFocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,n){1&e&&(Xe(0,"div",0,1),_n("click",function(s){return n.onMouseclick(s)}),Xe(2,"div",2)(3,"input",3,4),_n("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)})("keydown",function(s){return n.onKeydown(s,!0)}),Ke()(),ze(5,bee,3,13,"span",5),ze(6,wee,2,4,"span",6),ze(7,Aee,2,4,"input",7),ze(8,xee,1,0,"i",8),Xe(9,"div",9),Kn(10,"span",10),Ke(),ze(11,rte,9,17,"div",11),Ke()),2&e&&(Yr(n.styleClass),de("ngClass",_f(20,ste,n.disabled,n.overlayVisible,n.focused,n.showClear&&!n.disabled))("ngStyle",n.style),we(3),de("disabled",n.disabled)("pAutoFocus",n.autofocus),Lr("id",n.inputId)("placeholder",n.placeholder)("aria-label",n.ariaLabel)("aria-expanded",!1)("aria-labelledby",n.ariaLabelledBy)("tabindex",n.tabindex)("aria-activedescendant",n.overlayVisible?n.labelId:null),we(2),de("ngIf",!n.editable&&null!=n.label),we(1),de("ngIf",!n.editable&&null==n.label),we(1),de("ngIf",n.editable),we(1),de("ngIf",null!=n.value&&n.showClear&&!n.disabled),we(1),Lr("aria-expanded",n.overlayVisible),we(1),de("ngClass",n.dropdownIcon),we(1),de("ngIf",n.overlayVisible))},dependencies:[Mo,mu,Fo,El,ea,hl,ov,EA,oee,ate],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[cy("overlayAnimation",[Qu(":enter",[Tl({opacity:0,transform:"scaleY(0.8)"}),Yc("{{showTransitionParams}}")]),Qu(":leave",[Yc("{{hideTransitionParams}}",Tl({opacity:0}))])])]},changeDetection:0}),i})(),j1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za,av,yu,lv,aee,Za,lv]}),i})(),hC=(()=>{class i{constructor(e,n,r){this.el=e,this.ngModel=n,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(ay,8),qt(Yo))},i.\u0275dir=fs({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,n){1&e&&_n("input",function(s){return n.onInput(s)}),2&e&&Fp("p-filled",n.filled)}}),i})(),U2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();function lte(i,t){1&i&&qi(0)}const cte=function(i,t,e,n){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":n}};function ute(i,t){if(1&i&&Kn(0,"span",4),2&i){const e=ye();Yr(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),de("ngClass",_f(4,cte,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),Lr("aria-hidden",!0)}}function dte(i,t){if(1&i&&(Xe(0,"span",5),bi(1),Ke()),2&i){const e=ye();Lr("aria-hidden",e.icon&&!e.label),we(1),As(e.label||"\xa0")}}function hte(i,t){if(1&i&&(Xe(0,"span",4),bi(1),Ke()),2&i){const e=ye();Yr(e.badgeClass),de("ngClass",e.badgeStyleClass()),we(1),As(e.badge)}}const fte=function(i,t,e,n,r){return{"p-button p-component":!0,"p-button-icon-only":i,"p-button-vertical":t,"p-disabled":e,"p-button-loading":n,"p-button-loading-label-only":r}},pte=["*"];let x0=(()=>{class i{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,Ft.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let n=this.label?"p-button-icon-"+this.iconPos:null;n&&Ft.addClass(e,n);let r=this.getIconClass();r&&Ft.addMultipleClasses(e,r);let s=Ft.findSingle(this.el.nativeElement,".p-button-label");s?this.el.nativeElement.insertBefore(e,s):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=Ft.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=Ft.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(Ft.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(qt(oi))},i.\u0275dir=fs({type:i,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),i})(),$1=(()=>{class i{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new qn,this.onFocus=new qn,this.onBlur=new qn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Rr({type:i,selectors:[["p-button"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:pte,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,n){1&e&&(Xf(),Xe(0,"button",0),_n("click",function(s){return n.onClick.emit(s)})("focus",function(s){return n.onFocus.emit(s)})("blur",function(s){return n.onBlur.emit(s)}),Mu(1),ze(2,lte,1,0,"ng-container",1),ze(3,ute,1,9,"span",2),ze(4,dte,2,2,"span",3),ze(5,hte,2,4,"span",2),Ke()),2&e&&(Yr(n.styleClass),de("ngStyle",n.style)("disabled",n.disabled||n.loading)("ngClass",d0(11,fte,n.icon&&!n.label,("top"===n.iconPos||"bottom"===n.iconPos)&&n.label,n.disabled||n.loading,n.loading,n.loading&&!n.icon&&n.label)),Lr("type",n.type)("aria-label",n.ariaLabel),we(2),de("ngTemplateOutlet",n.contentTemplate),we(1),de("ngIf",!n.contentTemplate&&(n.icon||n.loading)),we(1),de("ngIf",!n.contentTemplate),we(1),de("ngIf",!n.contentTemplate&&n.badge))},dependencies:[Mo,Fo,El,ea,Ju],encapsulation:2,changeDetection:0}),i})(),cv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,yu]}),i})();const gte=["input"];function mte(i,t){if(1&i){const e=Di();Xe(0,"i",6),_n("click",function(){return Lt(e),Pt(ye().clear())}),Ke()}}const ZV=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},QV=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function vte(i,t){if(1&i){const e=Di();Xe(0,"span",7)(1,"button",8),_n("mousedown",function(r){return Lt(e),Pt(ye().onUpButtonMouseDown(r))})("mouseup",function(){return Lt(e),Pt(ye().onUpButtonMouseUp())})("mouseleave",function(){return Lt(e),Pt(ye().onUpButtonMouseLeave())})("keydown",function(r){return Lt(e),Pt(ye().onUpButtonKeyDown(r))})("keyup",function(){return Lt(e),Pt(ye().onUpButtonKeyUp())}),Ke(),Xe(2,"button",8),_n("mousedown",function(r){return Lt(e),Pt(ye().onDownButtonMouseDown(r))})("mouseup",function(){return Lt(e),Pt(ye().onDownButtonMouseUp())})("mouseleave",function(){return Lt(e),Pt(ye().onDownButtonMouseLeave())})("keydown",function(r){return Lt(e),Pt(ye().onDownButtonKeyDown(r))})("keyup",function(){return Lt(e),Pt(ye().onDownButtonKeyUp())}),Ke()()}if(2&i){const e=ye();we(1),Yr(e.incrementButtonClass),de("ngClass",Oo(10,ZV))("icon",e.incrementButtonIcon)("disabled",e.disabled),we(1),Yr(e.decrementButtonClass),de("ngClass",Oo(11,QV))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function yte(i,t){if(1&i){const e=Di();Xe(0,"button",8),_n("mousedown",function(r){return Lt(e),Pt(ye().onUpButtonMouseDown(r))})("mouseup",function(){return Lt(e),Pt(ye().onUpButtonMouseUp())})("mouseleave",function(){return Lt(e),Pt(ye().onUpButtonMouseLeave())})("keydown",function(r){return Lt(e),Pt(ye().onUpButtonKeyDown(r))})("keyup",function(){return Lt(e),Pt(ye().onUpButtonKeyUp())}),Ke()}if(2&i){const e=ye();Yr(e.incrementButtonClass),de("ngClass",Oo(5,ZV))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function _te(i,t){if(1&i){const e=Di();Xe(0,"button",8),_n("mousedown",function(r){return Lt(e),Pt(ye().onDownButtonMouseDown(r))})("mouseup",function(){return Lt(e),Pt(ye().onDownButtonMouseUp())})("mouseleave",function(){return Lt(e),Pt(ye().onDownButtonMouseLeave())})("keydown",function(r){return Lt(e),Pt(ye().onDownButtonKeyDown(r))})("keyup",function(){return Lt(e),Pt(ye().onDownButtonKeyUp())}),Ke()}if(2&i){const e=ye();Yr(e.decrementButtonClass),de("ngClass",Oo(5,QV))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const bte=function(i,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},Cte={provide:Xc,useExisting:Zr(()=>JV),multi:!0};let JV=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new qn,this.onFocus=new qn,this.onBlur=new qn,this.onKeyDown=new qn,this.onClear=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),n=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>n.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if("-"===n)return n;let r=+n;return isNaN(r)?null:r}return null}repeat(e,n,r){if(this.readonly)return;let s=n||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,n){let r=this.step*n,s=this.parseValue(this.input.nativeElement.value)||0,o=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(o).length||(this.updateInput(o,null,"spin",null),this.updateModel(e,o),this.handleOnInput(e,s,o))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let n=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,o=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(s.charAt(n-1))||e.preventDefault();break;case 39:this.isNumeralChar(s.charAt(n))||e.preventDefault();break;case 13:o=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(e,o);break;case 8:if(e.preventDefault(),n===r){const l=s.charAt(n-1),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n-2)+s.slice(n-1);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n-1,n-1):o=s.slice(0,n-1)+s.slice(n);else if(u>0&&n>u){const w=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n-1)+w+s.slice(n)}else 1===p?(o=s.slice(0,n-1)+"0"+s.slice(n),o=this.parseValue(o)>0?o:""):o=s.slice(0,n-1)+s.slice(n)}this.updateValue(e,o,null,"delete-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range");break;case 46:if(e.preventDefault(),n===r){const l=s.charAt(n),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n)+s.slice(n+2);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n+1,n+1):o=s.slice(0,n)+s.slice(n+1);else if(u>0&&n>u){const w=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n)+w+s.slice(n+1)}else 1===p?(o=s.slice(0,n)+"0"+s.slice(n+1),o=this.parseValue(o)>0?o:""):o=s.slice(0,n)+s.slice(n+1)}this.updateValue(e,o,null,"delete-back-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let n=e.which||e.keyCode,r=String.fromCharCode(n);const s=this.isDecimalSign(r),o=this.isMinusSign(r);(48<=n&&n<=57||o||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:o})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let n=(e.clipboardData||window.clipboardData).getData("Text");if(n){let r=this.parseValue(n);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let n=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){const n=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const o=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:o}}insert(e,n,r={isDecimalSign:!1,isMinusSign:!1}){const s=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let o=this.input.nativeElement.selectionStart,l=this.input.nativeElement.selectionEnd,u=this.input.nativeElement.value.trim();const{decimalCharIndex:p,minusCharIndex:v,suffixCharIndex:w,currencyCharIndex:I}=this.getCharIndexes(u);let T;if(r.isMinusSign)0===o&&(T=u,(-1===v||0!==l)&&(T=this.insertText(u,n,0,l)),this.updateValue(e,T,n,"insert"));else if(r.isDecimalSign)p>0&&o===p?this.updateValue(e,u,n,"insert"):(p>o&&p<l||-1===p&&this.maxFractionDigits)&&(T=this.insertText(u,n,o,l),this.updateValue(e,T,n,"insert"));else{const k=this.numberFormat.resolvedOptions().maximumFractionDigits,H=o!==l?"range-insert":"insert";if(p>0&&o>p){if(o+n.length-(p+1)<=k){const X=I>=o?I-1:w>=o?w:u.length;T=u.slice(0,o)+n+u.slice(o+n.length,X)+u.slice(X),this.updateValue(e,T,n,H)}}else T=this.insertText(u,n,o,l),this.updateValue(e,T,n,H)}}insertText(e,n,r,s){if(2===("."===n?n:n.split(".")).length){const l=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,l>0?e.slice(0,r)+this.formatValue(n)+e.slice(s):e||this.formatValue(n)}return s-r===e.length?this.formatValue(n):0===r?n+e.slice(s):s===e.length?e.slice(0,r)+n:e.slice(0,r)+n+e.slice(s)}deleteRange(e,n,r){let s;return s=r-n===e.length?"":0===n?e.slice(r):r===e.length?e.slice(0,n):e.slice(0,n)+e.slice(r),s}initCursor(){let e=this.input.nativeElement.selectionStart,n=this.input.nativeElement.value,r=n.length,s=null,o=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e-=o;let l=n.charAt(e);if(this.isNumeralChar(l))return e+o;let u=e-1;for(;u>=0;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u--}if(null!==s)this.input.nativeElement.setSelectionRange(s+1,s+1);else{for(u=e;u<r;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u++}null!==s&&this.input.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,n,r,s){let o=this.input.nativeElement.value,l=null;null!=n&&(l=this.parseValue(n),l=l||this.allowEmpty?l:0,this.updateInput(l,r,s,n),this.handleOnInput(e,o,l))}handleOnInput(e,n,r){this.isValueChanged(n,r)&&this.onInput.emit({originalEvent:e,value:r})}isValueChanged(e,n){return null===n&&null!==e||null!=n&&n!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,n,r,s){n=n||"";let o=this.input.nativeElement.value,l=this.formatValue(e),u=o.length;if(l!==s&&(l=this.concatValues(l,s)),0===u){this.input.nativeElement.value=l,this.input.nativeElement.setSelectionRange(0,0);const v=this.initCursor()+n.length;this.input.nativeElement.setSelectionRange(v,v)}else{let p=this.input.nativeElement.selectionStart,v=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<l.length)return;this.input.nativeElement.value=l;let w=l.length;if("range-insert"===r){const I=this.parseValue((o||"").slice(0,p)),k=(null!==I?I.toString():"").split("").join(`(${this.groupChar})?`),H=new RegExp(k,"g");H.test(l);const X=n.split("").join(`(${this.groupChar})?`),ue=new RegExp(X,"g");ue.test(l.slice(H.lastIndex)),v=H.lastIndex+ue.lastIndex,this.input.nativeElement.setSelectionRange(v,v)}else if(w===u)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(v+1,v+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(v-1,v-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(v,v);else if("delete-back-single"===r){let I=o.charAt(v-1),T=o.charAt(v),k=u-w,H=this._group.test(T);H&&1===k?v+=1:!H&&this.isNumeralChar(I)&&(v+=-1*k+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(v,v)}else if("-"===o&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const T=this.initCursor()+n.length+1;this.input.nativeElement.setSelectionRange(T,T)}else v+=w-u,this.input.nativeElement.setSelectionRange(v,v)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,n){if(e&&n){let r=n.search(this._decimal);return this._decimal.lastIndex=0,-1!==r?e.split(this._decimal)[0]+n.slice(r):e}return e}getDecimalLength(e){if(e){const n=e.split(this._decimal);if(2===n.length)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let n=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(n),this.input.nativeElement.setAttribute("aria-valuenow",n),this.updateModel(e,n),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,n){this.value!==n&&(this.value=n,this.onModelChange(n)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-inputNumber"]],viewQuery:function(e,n){if(1&e&&Hr(gte,5),2&e){let r;tr(r=nr())&&(n.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Fp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused)("p-inputnumber-clearable",n.showClear&&"vertical"!=n.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Xo([Cte]),Na],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,n){1&e&&(Xe(0,"span",0)(1,"input",1,2),_n("input",function(s){return n.onUserInput(s)})("keydown",function(s){return n.onInputKeyDown(s)})("keypress",function(s){return n.onInputKeyPress(s)})("paste",function(s){return n.onPaste(s)})("click",function(){return n.onInputClick()})("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)}),Ke(),ze(3,mte,1,0,"i",3),ze(4,vte,3,12,"span",4),ze(5,yte,1,6,"button",5),ze(6,_te,1,6,"button",5),Ke()),2&e&&(Yr(n.styleClass),de("ngClass",Yu(28,bte,n.showButtons&&"stacked"===n.buttonLayout,n.showButtons&&"horizontal"===n.buttonLayout,n.showButtons&&"vertical"===n.buttonLayout))("ngStyle",n.style),we(1),Yr(n.inputStyleClass),de("ngClass","p-inputnumber-input")("ngStyle",n.inputStyle)("value",n.formattedValue())("disabled",n.disabled)("readonly",n.readonly),Lr("placeholder",n.placeholder)("title",n.title)("id",n.inputId)("size",n.size)("name",n.name)("autocomplete",n.autocomplete)("maxlength",n.maxlength)("tabindex",n.tabindex)("aria-label",n.ariaLabel)("aria-required",n.ariaRequired)("required",n.required)("min",n.min)("max",n.max),we(2),de("ngIf","vertical"!=n.buttonLayout&&n.showClear&&n.value),we(1),de("ngIf",n.showButtons&&"stacked"===n.buttonLayout),we(1),de("ngIf",n.showButtons&&"stacked"!==n.buttonLayout),we(1),de("ngIf",n.showButtons&&"stacked"!==n.buttonLayout))},dependencies:[Mo,Fo,ea,hC,x0],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),q1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,U2,cv]}),i})();function wte(i,t){1&i&&qi(0)}const H2=function(i){return{$implicit:i}};function Ate(i,t){if(1&i&&(Xe(0,"div",15),ze(1,wte,1,0,"ng-container",16),Ke()),2&i){const e=ye(2);we(1),de("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",Li(2,H2,e.paginatorState))}}function xte(i,t){if(1&i&&(Xe(0,"span",17),bi(1),Ke()),2&i){const e=ye(2);we(1),As(e.currentPageReport)}}const X1=function(i){return{"p-disabled":i}};function Ite(i,t){if(1&i){const e=Di();Xe(0,"button",18),_n("click",function(r){return Lt(e),Pt(ye(2).changePageToFirst(r))}),Kn(1,"span",19),Ke()}if(2&i){const e=ye(2);de("disabled",e.isFirstPage()||e.empty())("ngClass",Li(2,X1,e.isFirstPage()||e.empty()))}}const Ste=function(i){return{"p-highlight":i}};function Ete(i,t){if(1&i){const e=Di();Xe(0,"button",22),_n("click",function(r){const o=Lt(e).$implicit;return Pt(ye(3).onPageLinkClick(r,o-1))}),bi(1),Ke()}if(2&i){const e=t.$implicit,n=ye(3);de("ngClass",Li(2,Ste,e-1==n.getPage())),we(1),As(e)}}function Tte(i,t){if(1&i&&(Xe(0,"span",20),ze(1,Ete,2,4,"button",21),Ke()),2&i){const e=ye(2);we(1),de("ngForOf",e.pageLinks)}}function Mte(i,t){1&i&&bi(0),2&i&&As(ye(3).currentPageReport)}function Dte(i,t){if(1&i){const e=Di();Xe(0,"p-dropdown",23),_n("onChange",function(r){return Lt(e),Pt(ye(2).onPageDropdownChange(r))}),ze(1,Mte,1,1,"ng-template",24),Ke()}if(2&i){const e=ye(2);de("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function Lte(i,t){if(1&i){const e=Di();Xe(0,"button",25),_n("click",function(r){return Lt(e),Pt(ye(2).changePageToLast(r))}),Kn(1,"span",26),Ke()}if(2&i){const e=ye(2);de("disabled",e.isLastPage()||e.empty())("ngClass",Li(2,X1,e.isLastPage()||e.empty()))}}function Pte(i,t){if(1&i){const e=Di();Xe(0,"p-inputNumber",27),_n("ngModelChange",function(r){return Lt(e),Pt(ye(2).changePage(r-1))}),Ke()}if(2&i){const e=ye(2);de("ngModel",e.currentPage())("disabled",e.empty())}}function Rte(i,t){1&i&&qi(0)}function kte(i,t){if(1&i&&ze(0,Rte,1,0,"ng-container",16),2&i){const e=t.$implicit;de("ngTemplateOutlet",ye(4).dropdownItemTemplate)("ngTemplateOutletContext",Li(2,H2,e))}}function Ote(i,t){1&i&&(is(0),ze(1,kte,1,4,"ng-template",30),rs())}function Fte(i,t){if(1&i){const e=Di();Xe(0,"p-dropdown",28),_n("ngModelChange",function(r){return Lt(e),Pt(ye(2).rows=r)})("onChange",function(r){return Lt(e),Pt(ye(2).onRppChange(r))}),ze(1,Ote,2,0,"ng-container",29),Ke()}if(2&i){const e=ye(2);de("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),we(1),de("ngIf",e.dropdownItemTemplate)}}function Nte(i,t){1&i&&qi(0)}function Bte(i,t){if(1&i&&(Xe(0,"div",31),ze(1,Nte,1,0,"ng-container",16),Ke()),2&i){const e=ye(2);we(1),de("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",Li(2,H2,e.paginatorState))}}function zte(i,t){if(1&i){const e=Di();Xe(0,"div",1),ze(1,Ate,2,4,"div",2),ze(2,xte,2,1,"span",3),ze(3,Ite,2,4,"button",4),Xe(4,"button",5),_n("click",function(r){return Lt(e),Pt(ye().changePageToPrev(r))}),Kn(5,"span",6),Ke(),ze(6,Tte,2,1,"span",7),ze(7,Dte,2,5,"p-dropdown",8),Xe(8,"button",9),_n("click",function(r){return Lt(e),Pt(ye().changePageToNext(r))}),Kn(9,"span",10),Ke(),ze(10,Lte,2,4,"button",11),ze(11,Pte,1,2,"p-inputNumber",12),ze(12,Fte,2,6,"p-dropdown",13),ze(13,Bte,2,4,"div",14),Ke()}if(2&i){const e=ye();Yr(e.styleClass),de("ngStyle",e.style)("ngClass","p-paginator p-component"),we(1),de("ngIf",e.templateLeft),we(1),de("ngIf",e.showCurrentPageReport),we(1),de("ngIf",e.showFirstLastIcon),we(1),de("disabled",e.isFirstPage()||e.empty())("ngClass",Li(17,X1,e.isFirstPage()||e.empty())),we(2),de("ngIf",e.showPageLinks),we(1),de("ngIf",e.showJumpToPageDropdown),we(1),de("disabled",e.isLastPage()||e.empty())("ngClass",Li(19,X1,e.isLastPage()||e.empty())),we(2),de("ngIf",e.showFirstLastIcon),we(1),de("ngIf",e.showJumpToPageInput),we(1),de("ngIf",e.rowsPerPageOptions),we(1),de("ngIf",e.templateRight)}}let e4=(()=>{class i{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new qn,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),n=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-n/2)),s=Math.min(e-1,r+n-1);return r=Math.max(0,r-(this.pageLinkSize-(s-r+1))),[r,s]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let s=e[0];s<=r;s++)this.pageLinks.push(s+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let s=0;s<this.getPageCount();s++)this.pageItems.push({label:String(s+1),value:s})}}changePage(e){var n=this.getPageCount();if(e>=0&&e<n){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:n};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,n){this.changePage(n),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[Na],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,n){1&e&&ze(0,zte,14,21,"div",0),2&e&&de("ngIf",!!n.alwaysShow||n.pageLinks&&n.pageLinks.length>1)},dependencies:[Mo,mu,Fo,El,ea,V2,hl,JV,cC,ay,Ju],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),t4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,j1,q1,W1,Za,yu,j1,q1,W1,Za]}),i})();function Vte(i,t){1&i&&Kn(0,"span",8),2&i&&(Yr(ye(2).$implicit.icon),de("ngClass","p-button-icon p-button-icon-left"))}function Ute(i,t){if(1&i&&(is(0),ze(1,Vte,1,3,"span",6),Xe(2,"span",7),bi(3),Ke(),rs()),2&i){const e=ye().$implicit,n=ye();we(1),de("ngIf",e.icon),we(2),As(n.getOptionLabel(e))}}function Hte(i,t){1&i&&qi(0)}const Gte=function(i,t){return{$implicit:i,index:t}};function Wte(i,t){if(1&i&&ze(0,Hte,1,0,"ng-container",9),2&i){const e=ye(),n=e.$implicit,r=e.index;de("ngTemplateOutlet",ye().itemTemplate)("ngTemplateOutletContext",Ts(2,Gte,n,r))}}const jte=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-button-icon-only":e}};function $te(i,t){if(1&i){const e=Di();Xe(0,"div",2,3),_n("click",function(r){const s=Lt(e),o=s.$implicit,l=s.index;return Pt(ye().onItemClick(r,o,l))})("keydown.enter",function(r){const s=Lt(e),o=s.$implicit,l=s.index;return Pt(ye().onItemClick(r,o,l))})("blur",function(){return Lt(e),Pt(ye().onBlur())}),ze(2,Ute,4,2,"ng-container",4),ze(3,Wte,1,5,"ng-template",null,5,Mc),Ke()}if(2&i){const e=t.$implicit,n=Po(4),r=ye();Yr(e.styleClass),de("ngClass",Yu(10,jte,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),Lr("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),we(2),de("ngIf",!r.itemTemplate)("ngIfElse",n)}}const qte={provide:Xc,useExisting:Zr(()=>Xte),multi:!0};let Xte=(()=>{class i{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new qn,this.onChange=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?ur.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ur.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?ur.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,n,r){if(!this.disabled&&!this.isOptionDisabled(n)){if(this.multiple)this.isSelected(n)?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let s=this.getOptionValue(n);this.value!==s&&(this.value=this.getOptionValue(n),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:n,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(n=>!ur.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(ur.equals(s,r,this.dataKey)){n=!0;break}}else n=ur.equals(this.getOptionValue(e),this.value,this.dataKey);return n}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-selectButton"]],contentQueries:function(e,n,r){if(1&e&&dl(r,dm,5),2&e){let s;tr(s=nr())&&(n.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[Xo([qte])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Xe(0,"div",0),ze(1,$te,5,14,"div",1),Ke()),2&e&&(Yr(n.styleClass),de("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",n.style),we(1),de("ngForOf",n.options))},dependencies:[Mo,mu,Fo,El,ea,Ju],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Yte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,yu]}),i})();const Kte=function(i,t,e){return{"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function Zte(i,t){if(1&i){const e=Di();Xe(0,"label",7),_n("click",function(r){Lt(e);const s=ye(),o=Po(3);return Pt(s.onClick(r,o))}),bi(1),Ke()}if(2&i){const e=ye();de("ngClass",Yu(3,Kte,null!=e.value,e.disabled,e.focused)),Lr("for",e.inputId),we(1),As(e.label)}}const Qte=function(i,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":t}},Jte=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},ene={provide:Xc,useExisting:Zr(()=>tne),multi:!0};let tne=(()=>{class i{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,n.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[Xo([ene])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,n){if(1&e){const r=Di();Xe(0,"div",0)(1,"div",1)(2,"input",2,3),_n("keyup",function(o){return n.onKeyup(o)})("keydown",function(o){return n.onKeydown(o)})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),Ke()(),Xe(4,"div",4),_n("click",function(o){Lt(r);const l=Po(3);return Pt(n.onClick(o,l))}),Kn(5,"span",5),Ke()(),ze(6,Zte,2,7,"label",6)}2&e&&(Yr(n.styleClass),de("ngStyle",n.style)("ngClass",Ts(14,Qte,n.disabled,n.focused)),we(2),de("name",n.name)("readonly",n.readonly)("disabled",n.disabled),Lr("id",n.inputId)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy),we(2),de("ngClass",Yu(17,Jte,null!=n.value,n.disabled,n.focused)),Lr("aria-checked",!0===n.value),we(1),de("ngClass",!0===n.value?n.checkboxTrueIcon:!1===n.value?n.checkboxFalseIcon:""),we(1),de("ngIf",n.label))},dependencies:[Mo,Fo,ea],encapsulation:2,changeDetection:0}),i})(),nne=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();const ine=["container"],rne=["inputfield"],sne=["contentWrapper"];function one(i,t){if(1&i){const e=Di();Xe(0,"i",8),_n("click",function(){return Lt(e),Pt(ye(2).clear())}),Ke()}}function ane(i,t){if(1&i){const e=Di();Xe(0,"button",9),_n("click",function(r){Lt(e),ye();const s=Po(1);return Pt(ye().onButtonClick(r,s))}),Ke()}if(2&i){const e=ye(2);de("icon",e.icon)("disabled",e.disabled),Lr("aria-label",e.iconAriaLabel)}}function lne(i,t){if(1&i){const e=Di();Xe(0,"input",4,5),_n("focus",function(r){return Lt(e),Pt(ye().onInputFocus(r))})("keydown",function(r){return Lt(e),Pt(ye().onInputKeydown(r))})("click",function(){return Lt(e),Pt(ye().onInputClick())})("blur",function(r){return Lt(e),Pt(ye().onInputBlur(r))})("input",function(r){return Lt(e),Pt(ye().onUserInput(r))}),Ke(),ze(2,one,1,0,"i",6),ze(3,ane,1,3,"button",7)}if(2&i){const e=ye();Yr(e.inputStyleClass),de("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),Lr("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),we(2),de("ngIf",e.showClear&&!e.disabled&&null!=e.value),we(1),de("ngIf",e.showIcon)}}function cne(i,t){1&i&&qi(0)}function une(i,t){if(1&i){const e=Di();Xe(0,"button",30),_n("keydown",function(r){return Lt(e),Pt(ye(4).onContainerButtonKeydown(r))})("click",function(r){return Lt(e),Pt(ye(4).onPrevButtonClick(r))}),Kn(1,"span",31),Ke()}}function dne(i,t){if(1&i){const e=Di();Xe(0,"button",32),_n("click",function(r){return Lt(e),Pt(ye(4).switchToMonthView(r))})("keydown",function(r){return Lt(e),Pt(ye(4).onContainerButtonKeydown(r))}),bi(1),Ke()}if(2&i){const e=ye().$implicit,n=ye(3);de("disabled",n.switchViewButtonDisabled()),we(1),jc(" ",n.getMonthName(e.month)," ")}}function hne(i,t){if(1&i){const e=Di();Xe(0,"button",33),_n("click",function(r){return Lt(e),Pt(ye(4).switchToYearView(r))})("keydown",function(r){return Lt(e),Pt(ye(4).onContainerButtonKeydown(r))}),bi(1),Ke()}if(2&i){const e=ye().$implicit,n=ye(3);de("disabled",n.switchViewButtonDisabled()),we(1),jc(" ",n.getYear(e)," ")}}function fne(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(5);we(1),AI("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function pne(i,t){1&i&&qi(0)}const n4=function(i){return{$implicit:i}};function gne(i,t){if(1&i&&(Xe(0,"span",34),ze(1,fne,2,2,"ng-container",13),ze(2,pne,1,0,"ng-container",35),Ke()),2&i){const e=ye(4);we(1),de("ngIf",!e.decadeTemplate),we(1),de("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",Li(3,n4,e.yearPickerValues))}}function mne(i,t){if(1&i&&(Xe(0,"th",41)(1,"span"),bi(2),Ke()()),2&i){const e=ye(5);we(2),As(e.getTranslation("weekHeader"))}}function vne(i,t){if(1&i&&(Xe(0,"th",42)(1,"span"),bi(2),Ke()()),2&i){const e=t.$implicit;we(2),As(e)}}function yne(i,t){if(1&i&&(Xe(0,"td",45)(1,"span",46),bi(2),Ke()()),2&i){const e=ye().index,n=ye(2).$implicit;we(2),jc(" ",n.weekNumbers[e]," ")}}function _ne(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(2).$implicit;we(1),As(e.day)}}function bne(i,t){1&i&&qi(0)}const Cne=function(i,t){return{"p-highlight":i,"p-disabled":t}};function wne(i,t){if(1&i){const e=Di();is(0),Xe(1,"span",48),_n("click",function(r){Lt(e);const s=ye().$implicit;return Pt(ye(6).onDateSelect(r,s))})("keydown",function(r){Lt(e);const s=ye().$implicit,o=ye(3).index;return Pt(ye(3).onDateCellKeydown(r,s,o))}),ze(2,_ne,2,1,"ng-container",13),ze(3,bne,1,0,"ng-container",35),Ke(),rs()}if(2&i){const e=ye().$implicit,n=ye(6);we(1),de("ngClass",Ts(4,Cne,n.isSelected(e),!e.selectable)),we(1),de("ngIf",!n.dateTemplate),we(1),de("ngTemplateOutlet",n.dateTemplate)("ngTemplateOutletContext",Li(7,n4,e))}}const Ane=function(i,t){return{"p-datepicker-other-month":i,"p-datepicker-today":t}};function xne(i,t){if(1&i&&(Xe(0,"td",47),ze(1,wne,4,9,"ng-container",13),Ke()),2&i){const e=t.$implicit,n=ye(6);de("ngClass",Ts(2,Ane,e.otherMonth,e.today)),we(1),de("ngIf",!e.otherMonth||n.showOtherMonths)}}function Ine(i,t){if(1&i&&(Xe(0,"tr"),ze(1,yne,3,1,"td",43),ze(2,xne,2,5,"td",44),Ke()),2&i){const e=t.$implicit,n=ye(5);we(1),de("ngIf",n.showWeek),we(1),de("ngForOf",e)}}function Sne(i,t){if(1&i&&(Xe(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),ze(4,mne,3,1,"th",38),ze(5,vne,3,1,"th",39),Ke()(),Xe(6,"tbody"),ze(7,Ine,3,2,"tr",40),Ke()()()),2&i){const e=ye().$implicit,n=ye(3);we(4),de("ngIf",n.showWeek),we(1),de("ngForOf",n.weekDays),we(2),de("ngForOf",e.dates)}}function Ene(i,t){if(1&i){const e=Di();Xe(0,"div",20)(1,"div",21),ze(2,une,2,0,"button",22),Xe(3,"div",23),ze(4,dne,2,2,"button",24),ze(5,hne,2,2,"button",25),ze(6,gne,3,5,"span",26),Ke(),Xe(7,"button",27),_n("keydown",function(r){return Lt(e),Pt(ye(3).onContainerButtonKeydown(r))})("click",function(r){return Lt(e),Pt(ye(3).onNextButtonClick(r))}),Kn(8,"span",28),Ke()(),ze(9,Sne,8,3,"div",29),Ke()}if(2&i){const e=t.index,n=ye(3);we(2),de("ngIf",0===e),we(2),de("ngIf","date"===n.currentView),we(1),de("ngIf","year"!==n.currentView),we(1),de("ngIf","year"===n.currentView),we(1),Nh("display",1===n.numberOfMonths||e===n.numberOfMonths-1?"inline-flex":"none"),we(2),de("ngIf","date"===n.currentView)}}const r4=function(i){return{"p-highlight":i}};function Tne(i,t){if(1&i){const e=Di();Xe(0,"span",51),_n("click",function(r){const o=Lt(e).index;return Pt(ye(4).onMonthSelect(r,o))})("keydown",function(r){const o=Lt(e).index;return Pt(ye(4).onMonthCellKeydown(r,o))}),bi(1),Ke()}if(2&i){const e=t.$implicit,n=t.index,r=ye(4);de("ngClass",Li(2,r4,r.isMonthSelected(n))),we(1),jc(" ",e," ")}}function Mne(i,t){if(1&i&&(Xe(0,"div",49),ze(1,Tne,2,4,"span",50),Ke()),2&i){const e=ye(3);we(1),de("ngForOf",e.monthPickerValues())}}function Dne(i,t){if(1&i){const e=Di();Xe(0,"span",54),_n("click",function(r){const o=Lt(e).$implicit;return Pt(ye(4).onYearSelect(r,o))})("keydown",function(r){const o=Lt(e).$implicit;return Pt(ye(4).onYearCellKeydown(r,o))}),bi(1),Ke()}if(2&i){const e=t.$implicit,n=ye(4);de("ngClass",Li(2,r4,n.isYearSelected(e))),we(1),jc(" ",e," ")}}function Lne(i,t){if(1&i&&(Xe(0,"div",52),ze(1,Dne,2,4,"span",53),Ke()),2&i){const e=ye(3);we(1),de("ngForOf",e.yearPickerValues())}}function Pne(i,t){if(1&i&&(is(0),Xe(1,"div",16),ze(2,Ene,10,7,"div",17),Ke(),ze(3,Mne,2,1,"div",18),ze(4,Lne,2,1,"div",19),rs()),2&i){const e=ye(2);we(2),de("ngForOf",e.months),we(1),de("ngIf","month"===e.currentView),we(1),de("ngIf","year"===e.currentView)}}function Rne(i,t){1&i&&(is(0),bi(1,"0"),rs())}function kne(i,t){1&i&&(is(0),bi(1,"0"),rs())}function One(i,t){if(1&i&&(Xe(0,"div",60)(1,"span"),bi(2),Ke()()),2&i){const e=ye(3);we(2),As(e.timeSeparator)}}function Fne(i,t){1&i&&(is(0),bi(1,"0"),rs())}function Nne(i,t){if(1&i){const e=Di();Xe(0,"div",65)(1,"button",57),_n("keydown",function(r){return Lt(e),Pt(ye(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(3).incrementSecond(r))})("keydown.space",function(r){return Lt(e),Pt(ye(3).incrementSecond(r))})("mousedown",function(r){return Lt(e),Pt(ye(3).onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){return Lt(e),Pt(ye(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Lt(e),Pt(ye(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Lt(e),Pt(ye(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Lt(e),Pt(ye(3).onTimePickerElementMouseLeave())}),Kn(2,"span",58),Ke(),Xe(3,"span"),ze(4,Fne,2,0,"ng-container",13),bi(5),Ke(),Xe(6,"button",57),_n("keydown",function(r){return Lt(e),Pt(ye(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(3).decrementSecond(r))})("keydown.space",function(r){return Lt(e),Pt(ye(3).decrementSecond(r))})("mousedown",function(r){return Lt(e),Pt(ye(3).onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){return Lt(e),Pt(ye(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Lt(e),Pt(ye(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Lt(e),Pt(ye(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Lt(e),Pt(ye(3).onTimePickerElementMouseLeave())}),Kn(7,"span",59),Ke()()}if(2&i){const e=ye(3);we(4),de("ngIf",e.currentSecond<10),we(1),As(e.currentSecond)}}function Bne(i,t){if(1&i){const e=Di();Xe(0,"div",66)(1,"button",67),_n("keydown",function(r){return Lt(e),Pt(ye(3).onContainerButtonKeydown(r))})("click",function(r){return Lt(e),Pt(ye(3).toggleAMPM(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(3).toggleAMPM(r))}),Kn(2,"span",58),Ke(),Xe(3,"span"),bi(4),Ke(),Xe(5,"button",67),_n("keydown",function(r){return Lt(e),Pt(ye(3).onContainerButtonKeydown(r))})("click",function(r){return Lt(e),Pt(ye(3).toggleAMPM(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(3).toggleAMPM(r))}),Kn(6,"span",59),Ke()()}if(2&i){const e=ye(3);we(4),As(e.pm?"PM":"AM")}}function zne(i,t){if(1&i){const e=Di();Xe(0,"div",55)(1,"div",56)(2,"button",57),_n("keydown",function(r){return Lt(e),Pt(ye(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(2).incrementHour(r))})("keydown.space",function(r){return Lt(e),Pt(ye(2).incrementHour(r))})("mousedown",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Lt(e),Pt(ye(2).onTimePickerElementMouseLeave())}),Kn(3,"span",58),Ke(),Xe(4,"span"),ze(5,Rne,2,0,"ng-container",13),bi(6),Ke(),Xe(7,"button",57),_n("keydown",function(r){return Lt(e),Pt(ye(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(2).decrementHour(r))})("keydown.space",function(r){return Lt(e),Pt(ye(2).decrementHour(r))})("mousedown",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Lt(e),Pt(ye(2).onTimePickerElementMouseLeave())}),Kn(8,"span",59),Ke()(),Xe(9,"div",60)(10,"span"),bi(11),Ke()(),Xe(12,"div",61)(13,"button",57),_n("keydown",function(r){return Lt(e),Pt(ye(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(2).incrementMinute(r))})("keydown.space",function(r){return Lt(e),Pt(ye(2).incrementMinute(r))})("mousedown",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Lt(e),Pt(ye(2).onTimePickerElementMouseLeave())}),Kn(14,"span",58),Ke(),Xe(15,"span"),ze(16,kne,2,0,"ng-container",13),bi(17),Ke(),Xe(18,"button",57),_n("keydown",function(r){return Lt(e),Pt(ye(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(2).decrementMinute(r))})("keydown.space",function(r){return Lt(e),Pt(ye(2).decrementMinute(r))})("mousedown",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Lt(e),Pt(ye(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Lt(e),Pt(ye(2).onTimePickerElementMouseLeave())}),Kn(19,"span",59),Ke()(),ze(20,One,3,1,"div",62),ze(21,Nne,8,2,"div",63),ze(22,Bne,7,1,"div",64),Ke()}if(2&i){const e=ye(2);we(5),de("ngIf",e.currentHour<10),we(1),As(e.currentHour),we(5),As(e.timeSeparator),we(5),de("ngIf",e.currentMinute<10),we(1),As(e.currentMinute),we(3),de("ngIf",e.showSeconds),we(1),de("ngIf",e.showSeconds),we(1),de("ngIf","12"==e.hourFormat)}}const s4=function(i){return[i]};function Vne(i,t){if(1&i){const e=Di();Xe(0,"div",68)(1,"button",69),_n("keydown",function(r){return Lt(e),Pt(ye(2).onContainerButtonKeydown(r))})("click",function(r){return Lt(e),Pt(ye(2).onTodayButtonClick(r))}),Ke(),Xe(2,"button",69),_n("keydown",function(r){return Lt(e),Pt(ye(2).onContainerButtonKeydown(r))})("click",function(r){return Lt(e),Pt(ye(2).onClearButtonClick(r))}),Ke()()}if(2&i){const e=ye(2);we(1),de("label",e.getTranslation("today"))("ngClass",Li(4,s4,e.todayButtonStyleClass)),we(1),de("label",e.getTranslation("clear"))("ngClass",Li(6,s4,e.clearButtonStyleClass))}}function Une(i,t){1&i&&qi(0)}const Hne=function(i,t,e,n,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":n,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},o4=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Gne=function(i){return{value:"visibleTouchUI",params:i}},Wne=function(i){return{value:"visible",params:i}};function jne(i,t){if(1&i){const e=Di();Xe(0,"div",10,11),_n("@overlayAnimation.start",function(r){return Lt(e),Pt(ye().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return Lt(e),Pt(ye().onOverlayAnimationDone(r))})("click",function(r){return Lt(e),Pt(ye().onOverlayClick(r))}),Mu(2),ze(3,cne,1,0,"ng-container",12),ze(4,Pne,5,3,"ng-container",13),ze(5,zne,23,8,"div",14),ze(6,Vne,3,8,"div",15),Mu(7,1),ze(8,Une,1,0,"ng-container",12),Ke()}if(2&i){const e=ye();Yr(e.panelStyleClass),de("ngStyle",e.panelStyle)("ngClass",jb(11,Hne,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?Li(21,Gne,Ts(18,o4,e.showTransitionOptions,e.hideTransitionOptions)):Li(26,Wne,Ts(23,o4,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),we(3),de("ngTemplateOutlet",e.headerTemplate),we(1),de("ngIf",!e.timeOnly),we(1),de("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),we(1),de("ngIf",e.showButtonBar),we(2),de("ngTemplateOutlet",e.footerTemplate)}}const $ne=[[["p-header"]],[["p-footer"]]],qne=function(i,t,e,n){return{"p-calendar":!0,"p-calendar-w-btn":i,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":n}},Xne=["p-header","p-footer"],Yne={provide:Xc,useExisting:Zr(()=>Kne),multi:!0};let Kne=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.config=o,this.overlayService=l,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new qn,this.onBlur=new qn,this.onClose=new qn,this.onSelect=new qn,this.onClear=new qn,this.onInput=new qn,this.onTodayClick=new qn,this.onClearClick=new qn,this.onMonthChange=new qn,this.onYearChange=new qn,this.onClickOutside=new qn,this.onShow=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(u,p){return"12"==this.hourFormat?12===u?p?12:0:p?u+12:u:u}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const n=e||new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.initTime(n),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const n=e.split(":"),r=parseInt(n[0]),s=parseInt(n[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=sC();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=Ft.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,n){this.yearOptions=[];for(let r=e;r<=n;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),n=this.getTranslation(vu.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(n[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let n=0;n<=11;n++)e.push(this.config.getTranslation("monthNamesShort")[n]);return e}yearPickerValues(){let e=[],n=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(n+r);return e}createMonths(e,n){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,o=n;s>11&&(s=s%11-1,o=n+1),this.months.push(this.createMonth(s,o))}}getWeekNumber(e){let n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));let r=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((r-n.getTime())/864e5)/7)+1}createMonth(e,n){let r=[],s=this.getFirstDayOfMonthIndex(e,n),o=this.getDaysCountInMonth(e,n),l=this.getDaysCountInPrevMonth(e,n),u=1,p=new Date,v=[],w=Math.ceil((o+s)/7);for(let I=0;I<w;I++){let T=[];if(0==I){for(let H=l-s+1;H<=l;H++){let X=this.getPreviousMonthAndYear(e,n);T.push({day:H,month:X.month,year:X.year,otherMonth:!0,today:this.isToday(p,H,X.month,X.year),selectable:this.isSelectable(H,X.month,X.year,!0)})}let k=7-T.length;for(let H=0;H<k;H++)T.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)}),u++}else for(let k=0;k<7;k++){if(u>o){let H=this.getNextMonthAndYear(e,n);T.push({day:u-o,month:H.month,year:H.year,otherMonth:!0,today:this.isToday(p,u-o,H.month,H.year),selectable:this.isSelectable(u-o,H.month,H.year,!0)})}else T.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)});u++}this.showWeek&&v.push(this.getWeekNumber(new Date(T[0].year,T[0].month,T[0].day))),r.push(T)}return{month:e,year:n,dates:r,weekNumbers:v}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,n){!this.disabled&&n.selectable?(this.isMultipleSelection()&&this.isSelected(n)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,n)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(n)&&this.selectDate(n),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,n){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:n,day:1,selectable:!0}):(this.currentMonth=n,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,n){"year"===this.view?this.onDateSelect(e,{year:n,month:0,day:1,selectable:!0}):(this.currentYear=n,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let n=0;n<this.value.length;n++)e+=this.formatDateTime(this.value[n]),n!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let n=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?n=this.formatTime(e):(n=this.formatDate(e,this.getDateFormat()),this.showTime&&(n+=" "+this.formatTime(e)))),n}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let n=new Date(e.year,e.month,e.day);if(this.showTime&&(n.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.currentSecond)),this.minDate&&this.minDate>n&&(n=this.minDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.maxDate&&this.maxDate<n&&(n=this.maxDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.isSingleSelection())this.updateModel(n);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,n]:[n]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&n.getTime()>=r.getTime()?s=n:(r=n,s=null),this.updateModel([r,s])}else this.updateModel([n,null]);this.onSelect.emit(n)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let n=null;this.value&&(n=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(n)}}getFirstDayOfMonthIndex(e,n){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(n);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,n){return 32-this.daylightSavingAdjust(new Date(n,e,32)).getDate()}getDaysCountInPrevMonth(e,n){let r=this.getPreviousMonthAndYear(e,n);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,n){let r,s;return 0===e?(r=11,s=n-1):(r=e-1,s=n),{month:r,year:s}}getNextMonthAndYear(e,n){let r,s;return 11===e?(r=0,s=n+1):(r=e+1,s=n),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let n=!1;for(let r of this.value)if(n=this.isDateEquals(r,e),n)break;return n}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getMonth()===e&&n.getFullYear()===this.currentYear}return!1}isYearSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getFullYear()===e}return!1}isDateEquals(e,n){return!!(e&&e instanceof Date)&&e.getDate()===n.day&&e.getMonth()===n.month&&e.getFullYear()===n.year}isDateBetween(e,n,r){if(e&&n){let o=new Date(r.year,r.month,r.day);return e.getTime()<=o.getTime()&&n.getTime()>=o.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,n,r,s){return e.getDate()===n&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,n,r,s){let o=!0,l=!0,u=!0,p=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>n||this.minDate.getMonth()===n&&this.minDate.getDate()>e))&&(o=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<n||this.maxDate.getMonth()===n&&this.maxDate.getDate()<e))&&(l=!1),this.disabledDates&&(u=!this.isDateDisabled(e,n,r)),this.disabledDays&&(p=!this.isDayDisabled(e,n,r)),o&&l&&u&&p)}isDateDisabled(e,n,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===n&&s.getDate()===e)return!0;return!1}isDayDisabled(e,n,r){if(this.disabledDays){let o=new Date(r,n,e).getDay();return-1!==this.disabledDays.indexOf(o)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,n){this.overlayVisible?this.hideOverlay():(n.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(Ft.getFocusableElements(this.contentViewChild.nativeElement).forEach(n=>n.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,n,r){const s=e.currentTarget,o=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let l=Ft.index(o),u=o.parentElement.nextElementSibling;u?Ft.hasClass(u.children[l].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(u.children[l].children[0].tabIndex="0",u.children[l].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let l=Ft.index(o),u=o.parentElement.previousElementSibling;if(u){let p=u.children[l].children[0];Ft.hasClass(p,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(p.tabIndex="0",p.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let l=o.previousElementSibling;if(l){let u=l.children[0];Ft.hasClass(u,"p-disabled")||Ft.hasClass(u.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let l=o.nextElementSibling;if(l){let u=l.children[0];Ft.hasClass(u,"p-disabled")?this.navigateToMonth(!1,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Ft.index(r);let l=s[40===e.which?o+3:o-3];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,n),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Ft.index(r);let l=s[40===e.which?o+2:o-2];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,n){if(e)if(1===this.numberOfMonths||0===n)this.navigationState={backward:!0},this.navBackward(event);else{let s=Ft.find(this.contentViewChild.nativeElement.children[n-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),o=s[s.length-1];o.tabIndex="0",o.focus()}else if(1===this.numberOfMonths||n===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=Ft.findSingle(this.contentViewChild.nativeElement.children[n+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?Ft.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():Ft.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let n;n=Ft.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),n&&n.length>0&&(e=n[n.length-1])}else e=Ft.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.currentView){let n=Ft.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=Ft.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Ft.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if("year"===this.currentView){let n=Ft.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=Ft.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Ft.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if(e=Ft.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){let n=Ft.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");e=n||Ft.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{e.focus()},1),this.preventFocus=!1)}trapFocus(e){let n=Ft.getFocusableElements(this.contentViewChild.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)n[n.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else n[r-1].focus();else if(-1==r||r===n.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();n[0].focus()}else n[r+1].focus()}else n[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,n,r,s){let o=this.value;const l=this.convertTo24Hour(e,s);this.isRangeSelection()&&(o=this.value[1]||this.value[0]),this.isMultipleSelection()&&(o=this.value[this.value.length-1]);const u=o?o.toDateString():null;return!(this.minDate&&u&&this.minDate.toDateString()===u&&(this.minDate.getHours()>l||this.minDate.getHours()===l&&(this.minDate.getMinutes()>n||this.minDate.getMinutes()===n&&this.minDate.getSeconds()>r))||this.maxDate&&u&&this.maxDate.toDateString()===u&&(this.maxDate.getHours()<l||this.maxDate.getHours()===l&&(this.maxDate.getMinutes()<n||this.maxDate.getMinutes()===n&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,n,r){this.disabled||(this.repeat(e,null,n,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,n,r,s){let o=n||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},o),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let n=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?n=n<0?24+n:n:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),n=n<=0?12+n:n),this.validateTime(n,this.currentMinute,this.currentSecond,r)&&(this.currentHour=n,this.pm=r),e.preventDefault()}incrementMinute(e){let n=this.currentMinute+this.stepMinute;n=n>59?n-60:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}decrementMinute(e){let n=this.currentMinute-this.stepMinute;n=n<0?60+n:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}incrementSecond(e){let n=this.currentSecond+this.stepSecond;n=n>59?n-60:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}decrementSecond(e){let n=this.currentSecond-this.stepSecond;n=n<0?60+n:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const n=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,n)&&(this.pm=n,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let n=e.target.value;try{let r=this.parseValueFromString(n);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?n:null)}this.filled=null!=n&&n.length,this.onInput.emit(e)}isValidSelection(e){let n=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(n=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(n=e.length>1&&e[1]>e[0]),n}parseValueFromString(e){if(!e||0===e.trim().length)return null;let n;if(this.isSingleSelection())n=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);n=[];for(let s of r)n.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");n=[];for(let s=0;s<r.length;s++)n[s]=this.parseDateTime(r[s].trim())}return n}parseDateTime(e){let n,r=e.split(" ");if(this.timeOnly)n=new Date,this.populateTime(n,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let o="12"==this.hourFormat?r.pop():null,l=r.pop();n=this.parseDate(r.join(" "),s),this.populateTime(n,l,o)}else n=this.parseDate(e,s)}return n}populateTime(e,n,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(n);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&ur.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let n=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?ic.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):ic.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&ic.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Ft.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=Ft.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=Ft.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=Ft.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",Ft.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):Ft.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),Ft.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),Ft.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(Ft.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let n,e=document.body.children;for(let r=0;r<e.length;r++)if(Ft.hasClass(e[r],"p-datepicker-mask-scrollblocker")){n=!0;break}n||Ft.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(vu.FIRST_DAY_OF_WEEK)}formatDate(e,n){if(!e)return"";let r;const s=v=>{const w=r+1<n.length&&n.charAt(r+1)===v;return w&&r++,w},o=(v,w,I)=>{let T=""+w;if(s(v))for(;T.length<I;)T="0"+T;return T},l=(v,w,I,T)=>s(v)?T[w]:I[w];let u="",p=!1;if(e)for(r=0;r<n.length;r++)if(p)"'"!==n.charAt(r)||s("'")?u+=n.charAt(r):p=!1;else switch(n.charAt(r)){case"d":u+=o("d",e.getDate(),2);break;case"D":u+=l("D",e.getDay(),this.getTranslation(vu.DAY_NAMES_SHORT),this.getTranslation(vu.DAY_NAMES));break;case"o":u+=o("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=o("m",e.getMonth()+1,2);break;case"M":u+=l("M",e.getMonth(),this.getTranslation(vu.MONTH_NAMES_SHORT),this.getTranslation(vu.MONTH_NAMES));break;case"y":u+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?u+="'":p=!0;break;default:u+=n.charAt(r)}return u}formatTime(e){if(!e)return"";let n="",r=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),n+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,n+=":",n+=s<10?"0"+s:s,this.showSeconds&&(n+=":",n+=o<10?"0"+o:o),"12"==this.hourFormat&&(n+=e.getHours()>11?" PM":" AM"),n}parseTime(e){let n=e.split(":");if(n.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(n[0]),o=parseInt(n[1]),l=this.showSeconds?parseInt(n[2]):null;if(isNaN(s)||isNaN(o)||s>23||o>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(l)||l>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:o,second:l}}parseDate(e,n){if(null==n||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,o,k,l=0,u="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),p=-1,v=-1,w=-1,I=-1,T=!1,H=be=>{let Se=r+1<n.length&&n.charAt(r+1)===be;return Se&&r++,Se},X=be=>{let Se=H(be),Ye="@"===be?14:"!"===be?20:"y"===be&&Se?4:"o"===be?3:2,zt=new RegExp("^\\d{"+("y"===be?Ye:1)+","+Ye+"}"),it=e.substring(l).match(zt);if(!it)throw"Missing number at position "+l;return l+=it[0].length,parseInt(it[0],10)},ue=(be,Se,Ye)=>{let gt=-1,zt=H(be)?Ye:Se,it=[];for(let Tt=0;Tt<zt.length;Tt++)it.push([Tt,zt[Tt]]);it.sort((Tt,un)=>-(Tt[1].length-un[1].length));for(let Tt=0;Tt<it.length;Tt++){let un=it[Tt][1];if(e.substr(l,un.length).toLowerCase()===un.toLowerCase()){gt=it[Tt][0],l+=un.length;break}}if(-1!==gt)return gt+1;throw"Unknown name at position "+l},xe=()=>{if(e.charAt(l)!==n.charAt(r))throw"Unexpected literal at position "+l;l++};for("month"===this.view&&(w=1),r=0;r<n.length;r++)if(T)"'"!==n.charAt(r)||H("'")?xe():T=!1;else switch(n.charAt(r)){case"d":w=X("d");break;case"D":ue("D",this.getTranslation(vu.DAY_NAMES_SHORT),this.getTranslation(vu.DAY_NAMES));break;case"o":I=X("o");break;case"m":v=X("m");break;case"M":v=ue("M",this.getTranslation(vu.MONTH_NAMES_SHORT),this.getTranslation(vu.MONTH_NAMES));break;case"y":p=X("y");break;case"@":k=new Date(X("@")),p=k.getFullYear(),v=k.getMonth()+1,w=k.getDate();break;case"!":k=new Date((X("!")-this.ticksTo1970)/1e4),p=k.getFullYear(),v=k.getMonth()+1,w=k.getDate();break;case"'":H("'")?xe():T=!0;break;default:xe()}if(l<e.length&&(o=e.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)),I>-1)for(v=1,w=I;s=this.getDaysCountInMonth(p,v-1),!(w<=s);)v++,w-=s;if("year"===this.view&&(v=-1===v?1:v,w=-1===w?1:w),k=this.daylightSavingAdjust(new Date(p,v-1,w)),k.getFullYear()!==p||k.getMonth()+1!==v||k.getDate()!==w)throw"Invalid date";return k}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let n=new Date,r={day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),otherMonth:n.getMonth()!==this.currentMonth||n.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let n=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<n.length;r++){let{breakpoint:s,numMonths:o}=n[r],l=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${o}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let u=o;u<this.numberOfMonths;u++)l+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${u+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${l}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",n=>{this.isOutsideClicked(n)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(n),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return Ft.hasClass(e.target,"p-datepicker-prev")||Ft.hasClass(e.target,"p-datepicker-prev-icon")||Ft.hasClass(e.target,"p-datepicker-next")||Ft.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!Ft.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&ic.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(h),qt(Yo),qt(ua),qt(Np),qt(oA))},i.\u0275cmp=Rr({type:i,selectors:[["p-calendar"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(ine,5),Hr(rne,5),Hr(sne,5)),2&e){let r;tr(r=nr())&&(n.containerViewChild=r.first),tr(r=nr())&&(n.inputfieldViewChild=r.first),tr(r=nr())&&(n.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Fp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus)("p-calendar-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[Xo([Yne])],ngContentSelectors:Xne,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,n){1&e&&(Xf($ne),Xe(0,"span",0,1),ze(2,lne,4,17,"ng-template",2),ze(3,jne,9,28,"div",3),Ke()),2&e&&(Yr(n.styleClass),de("ngClass",_f(6,qne,n.showIcon,n.timeOnly,n.disabled,n.focus))("ngStyle",n.style),we(2),de("ngIf",!n.inline),we(1),de("ngIf",n.inline||n.overlayVisible))},dependencies:[Mo,mu,Fo,El,ea,x0,Ju],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[cy("overlayAnimation",[A0("visibleTouchUI",Tl({transform:"translate(-50%,-50%)",opacity:1})),Qu("void => visible",[Tl({opacity:0,transform:"scaleY(0.8)"}),Yc("{{showTransitionParams}}",Tl({opacity:1,transform:"*"}))]),Qu("visible => void",[Yc("{{hideTransitionParams}}",Tl({opacity:0}))]),Qu("void => visibleTouchUI",[Tl({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),Yc("{{showTransitionParams}}")]),Qu("visibleTouchUI => void",[Yc("{{hideTransitionParams}}",Tl({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),i})(),a4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,cv,Za,yu,cv,Za]}),i})();const Zne=["container"],Qne=["resizeHelper"],Jne=["reorderIndicatorUp"],eie=["reorderIndicatorDown"],tie=["wrapper"],nie=["table"],iie=["tableHeader"],rie=["scroller"];function sie(i,t){if(1&i&&(Xe(0,"div",15),Kn(1,"i"),Ke()),2&i){const e=ye();we(1),Yr("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function oie(i,t){1&i&&qi(0)}function aie(i,t){if(1&i&&(Xe(0,"div",16),ze(1,oie,1,0,"ng-container",17),Ke()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.captionTemplate)}}function lie(i,t){if(1&i){const e=Di();Xe(0,"p-paginator",18),_n("onPageChange",function(r){return Lt(e),Pt(ye().onPageChange(r))}),Ke()}if(2&i){const e=ye();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function cie(i,t){1&i&&qi(0)}const l4=function(i,t){return{$implicit:i,options:t}};function uie(i,t){if(1&i&&ze(0,cie,1,0,"ng-container",22),2&i){const e=t.$implicit,n=t.options;ye(2),de("ngTemplateOutlet",Po(10))("ngTemplateOutletContext",Ts(2,l4,e,n))}}const die=function(i){return{height:i}};function hie(i,t){if(1&i){const e=Di();Xe(0,"p-scroller",19,20),_n("onLazyLoad",function(r){return Lt(e),Pt(ye().onLazyItemLoad(r))}),ze(2,uie,1,5,"ng-template",21),Ke()}if(2&i){const e=ye();To(Li(12,die,"flex"!==e.scrollHeight?e.scrollHeight:void 0)),de("items",e.processedData)("columns",e.columns)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("delay",e.lazy?e.virtualScrollDelay:0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)}}function fie(i,t){1&i&&qi(0)}const pie=function(i){return{columns:i}};function gie(i,t){if(1&i&&(is(0),ze(1,fie,1,0,"ng-container",22),rs()),2&i){const e=ye(),n=Po(10);we(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",Ts(4,l4,e.processedData,Li(2,pie,e.columns)))}}function mie(i,t){1&i&&qi(0)}function vie(i,t){1&i&&qi(0)}function yie(i,t){if(1&i&&Kn(0,"tbody",29),2&i){const e=ye().options,n=ye();de("value",n.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",n.frozenBodyTemplate)("frozen",!0)}}function _ie(i,t){1&i&&qi(0)}const MA=function(i){return{$implicit:i}};function bie(i,t){if(1&i&&(Xe(0,"tfoot",30),ze(1,_ie,1,0,"ng-container",22),Ke()),2&i){const e=ye().options,n=ye();we(1),de("ngTemplateOutlet",n.footerGroupedTemplate||n.footerTemplate)("ngTemplateOutletContext",Li(2,MA,e.columns))}}function Cie(i,t){if(1&i&&(Xe(0,"table",23,24),ze(2,mie,1,0,"ng-container",22),Xe(3,"thead",25),ze(4,vie,1,0,"ng-container",22),Ke(),ze(5,yie,1,5,"tbody",26),Kn(6,"tbody",27),ze(7,bie,2,4,"tfoot",28),Ke()),2&i){const e=t.options,n=ye();To(e.spacerStyle),de("ngClass",n.tableStyleClass)("ngStyle",n.tableStyle),Lr("id",n.id+"-table"),we(2),de("ngTemplateOutlet",n.colGroupTemplate)("ngTemplateOutletContext",Li(18,MA,e.columns)),we(2),de("ngTemplateOutlet",n.headerGroupedTemplate||n.headerTemplate)("ngTemplateOutletContext",Li(20,MA,e.columns)),we(1),de("ngIf",n.frozenValue||n.frozenBodyTemplate),we(1),To(e.contentStyle),de("ngClass",e.contentStyleClass)("value",n.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",n.bodyTemplate)("scrollerOptions",e),we(1),de("ngIf",n.footerGroupedTemplate||n.footerTemplate)}}function wie(i,t){if(1&i){const e=Di();Xe(0,"p-paginator",31),_n("onPageChange",function(r){return Lt(e),Pt(ye().onPageChange(r))}),Ke()}if(2&i){const e=ye();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function Aie(i,t){1&i&&qi(0)}function xie(i,t){if(1&i&&(Xe(0,"div",32),ze(1,Aie,1,0,"ng-container",17),Ke()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.summaryTemplate)}}function Iie(i,t){1&i&&Kn(0,"div",33,34)}function Sie(i,t){1&i&&Kn(0,"span",35,36)}function Eie(i,t){1&i&&Kn(0,"span",37,38)}const Tie=function(i,t,e,n,r,s,o,l,u,p,v,w,I,T){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":i,"p-datatable-auto-layout":t,"p-datatable-resizable":e,"p-datatable-resizable-fit":n,"p-datatable-scrollable":r,"p-datatable-scrollable-vertical":s,"p-datatable-scrollable-horizontal":o,"p-datatable-scrollable-both":l,"p-datatable-flex-scrollable":u,"p-datatable-responsive-stack":p,"p-datatable-responsive-scroll":v,"p-datatable-responsive":w,"p-datatable-grouped-header":I,"p-datatable-grouped-footer":T}},Mie=function(i){return{maxHeight:i}},Die=["pTableBody",""];function Lie(i,t){1&i&&qi(0)}const Y1=function(i,t,e,n,r){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r}};function Pie(i,t){if(1&i&&(is(0,3),ze(1,Lie,1,0,"ng-container",4),rs()),2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye(2);we(1),de("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",d0(2,Y1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Rie(i,t){1&i&&qi(0)}function kie(i,t){if(1&i&&(is(0),ze(1,Rie,1,0,"ng-container",4),rs()),2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye(2);we(1),de("ngTemplateOutlet",s.template)("ngTemplateOutletContext",d0(2,Y1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Oie(i,t){1&i&&qi(0)}const Fie=function(i,t,e,n,r,s,o){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r,rowgroup:s,rowspan:o}};function Nie(i,t){if(1&i&&(is(0),ze(1,Oie,1,0,"ng-container",4),rs()),2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye(2);we(1),de("ngTemplateOutlet",s.template)("ngTemplateOutletContext",function lF(i,t,e,n,r,s,o,l,u,p){const v=la()+i,w=Pi();let I=vg(w,v,e,n,r,s);return bI(w,v+4,o,l,u)||I?Zm(w,v+7,p?t.call(p,e,n,r,s,o,l,u):t(e,n,r,s,o,l,u)):Mw(w,v+7)}(2,Fie,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen,s.shouldRenderRowspan(s.value,n,s.getRowIndex(r)),s.calculateRowGroupSize(s.value,n,s.getRowIndex(r))))}}function Bie(i,t){1&i&&qi(0)}function zie(i,t){if(1&i&&(is(0,3),ze(1,Bie,1,0,"ng-container",4),rs()),2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye(2);we(1),de("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",d0(2,Y1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Vie(i,t){if(1&i&&(ze(0,Pie,2,8,"ng-container",2),ze(1,kie,2,8,"ng-container",0),ze(2,Nie,2,10,"ng-container",0),ze(3,zie,2,8,"ng-container",2)),2&i){const e=t.$implicit,n=t.index,r=ye(2);de("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),we(1),de("ngIf","rowspan"!==r.dt.rowGroupMode),we(1),de("ngIf","rowspan"===r.dt.rowGroupMode),we(1),de("ngIf",r.dt.groupFooterTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,r.getRowIndex(n)))}}function Uie(i,t){if(1&i&&(is(0),ze(1,Vie,4,4,"ng-template",1),rs()),2&i){const e=ye();we(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Hie(i,t){1&i&&qi(0)}function Gie(i,t){if(1&i&&ze(0,Hie,1,0,"ng-container",4),2&i){const e=t.$implicit,n=t.index,r=ye(2);de("ngTemplateOutlet",e?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",d0(2,Y1,e,r.getRowIndex(n),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen))}}function Wie(i,t){if(1&i&&(is(0),ze(1,Gie,1,8,"ng-template",1),rs()),2&i){const e=ye();we(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function jie(i,t){1&i&&qi(0)}const K1=function(i,t,e,n,r,s){return{$implicit:i,rowIndex:t,columns:e,expanded:n,editing:r,frozen:s}};function $ie(i,t){if(1&i&&(is(0),ze(1,jie,1,0,"ng-container",4),rs()),2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye(2);we(1),de("ngTemplateOutlet",s.template)("ngTemplateOutletContext",jb(2,K1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function qie(i,t){1&i&&qi(0)}function Xie(i,t){if(1&i&&(is(0,3),ze(1,qie,1,0,"ng-container",4),rs()),2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye(2);we(1),de("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",jb(2,K1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Yie(i,t){1&i&&qi(0)}function Kie(i,t){1&i&&qi(0)}function Zie(i,t){if(1&i&&(is(0,3),ze(1,Kie,1,0,"ng-container",4),rs()),2&i){const e=ye(2),n=e.$implicit,r=e.index,s=ye(2);we(1),de("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",jb(2,K1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}const c4=function(i,t,e,n){return{$implicit:i,rowIndex:t,columns:e,frozen:n}};function Qie(i,t){if(1&i&&(is(0),ze(1,Yie,1,0,"ng-container",4),ze(2,Zie,2,9,"ng-container",2),rs()),2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye(2);we(1),de("ngTemplateOutlet",s.dt.expandedRowTemplate)("ngTemplateOutletContext",_f(3,c4,n,s.getRowIndex(r),s.columns,s.frozen)),we(1),de("ngIf",s.dt.groupFooterTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,n,s.getRowIndex(r)))}}function Jie(i,t){if(1&i&&(ze(0,$ie,2,9,"ng-container",0),ze(1,Xie,2,9,"ng-container",2),ze(2,Qie,3,8,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=ye(2);de("ngIf",!r.dt.groupHeaderTemplate),we(1),de("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),we(1),de("ngIf",r.dt.isRowExpanded(e))}}function ere(i,t){if(1&i&&(is(0),ze(1,Jie,3,3,"ng-template",1),rs()),2&i){const e=ye();we(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function tre(i,t){1&i&&qi(0)}function nre(i,t){1&i&&qi(0)}function ire(i,t){if(1&i&&(is(0),ze(1,nre,1,0,"ng-container",4),rs()),2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye(2);we(1),de("ngTemplateOutlet",s.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",_f(2,c4,n,s.getRowIndex(r),s.columns,s.frozen))}}function rre(i,t){if(1&i&&(ze(0,tre,1,0,"ng-container",4),ze(1,ire,2,7,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=ye(2);de("ngTemplateOutlet",r.template)("ngTemplateOutletContext",jb(3,K1,e,r.getRowIndex(n),r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),we(1),de("ngIf",r.dt.isRowExpanded(e))}}function sre(i,t){if(1&i&&(is(0),ze(1,rre,2,10,"ng-template",1),rs()),2&i){const e=ye();we(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function ore(i,t){1&i&&qi(0)}const u4=function(i,t){return{$implicit:i,frozen:t}};function are(i,t){if(1&i&&(is(0),ze(1,ore,1,0,"ng-container",4),rs()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",Ts(2,u4,e.columns,e.frozen))}}function lre(i,t){1&i&&qi(0)}function cre(i,t){if(1&i&&(is(0),ze(1,lre,1,0,"ng-container",4),rs()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",Ts(2,u4,e.columns,e.frozen))}}function ure(i,t){if(1&i&&(Xe(0,"span",2),bi(1),Ke()),2&i){const e=ye();we(1),As(e.getBadgeValue())}}const dre=function(i,t,e){return{"pi-sort-amount-up-alt":i,"pi-sort-amount-down":t,"pi-sort-alt":e}},d4=function(i,t){return{"p-checkbox-focused":i,"p-checkbox-disabled":t}},pre=function(i,t,e){return{"p-checkbox-box p-component":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}},h4=function(i){return{"pi pi-check":i}},gre=function(i,t,e){return{"p-checkbox-box":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}};let DA=(()=>{class i{constructor(){this.sortSource=new Ze,this.selectionSource=new Ze,this.contextMenuSource=new Ze,this.valueSource=new Ze,this.totalRecordsSource=new Ze,this.columnsSource=new Ze,this.resetSource=new Ze,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),l_=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.zone=n,this.tableService=r,this.cd=s,this.filterService=o,this.overlayService=l,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new qn,this.selectionChange=new qn,this.contextMenuSelectionChange=new qn,this.contextMenuSelectionMode="separate",this.rowTrackBy=(u,p)=>p,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new qn,this.onRowUnselect=new qn,this.onPage=new qn,this.onSort=new qn,this.onFilter=new qn,this.onLazyLoad=new qn,this.onRowExpand=new qn,this.onRowCollapse=new qn,this.onContextMenuSelect=new qn,this.onColResize=new qn,this.onColReorder=new qn,this.onRowReorder=new qn,this.onEditInit=new qn,this.onEditComplete=new qn,this.onEditCancel=new qn,this.onHeaderCheckboxToggle=new qn,this.sortFunction=new qn,this.firstChange=new qn,this.rowsChange=new qn,this.onStateSave=new qn,this.onStateRestore=new qn,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=sC()}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get processedData(){return this.filteredValue||this.value||[]}dataToRender(e){const n=e||this.processedData;if(n&&this.paginator){const r=this.lazy?0:this.first;return n.slice(r,r+this.rows)}return n}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(ur.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(ur.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,n=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&n){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:n}):(this.value.sort((s,o)=>{let l=ur.resolveFieldData(s,e),u=ur.resolveFieldData(o,e),p=null;return p=null==l&&null!=u?-1:null!=l&&null==u?1:null==l&&null==u?0:"string"==typeof l&&"string"==typeof u?l.localeCompare(u):l<u?-1:l>u?1:0,n*p}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:n};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,n)=>this.multisortField(e,n,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,n,r,s){let o=ur.resolveFieldData(e,r[s].field),l=ur.resolveFieldData(n,r[s].field),u=null;if(null==o&&null!=l)u=-1;else if(null!=o&&null==l)u=1;else if(null==o&&null==l)u=0;else if("string"==typeof o||o instanceof String){if(o.localeCompare&&o!=l)return r[s].order*o.localeCompare(l)}else u=o<l?-1:1;return o==l?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*u}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}handleRowClick(e){let n=e.originalEvent.target,r=n.nodeName,s=n.parentElement&&n.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!Ft.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let o=e.rowData,l=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)Ft.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=l,this.selectRange(e.originalEvent,l);else{let u=this.isSelected(o);if(!u&&!this.isRowSelectable(o,l))return;let p=!this.rowTouched&&this.metaKeySelection,v=this.dataKey?String(ur.resolveFieldData(o,this.dataKey)):null;if(this.anchorRowIndex=l,this.rangeRowIndex=l,p){let w=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(u&&w){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let I=this.findIndexInSelection(o);this._selection=this.selection.filter((T,k)=>k!=I),this.selectionChange.emit(this.selection),v&&delete this.selectionKeys[v]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row"})}else this.isSingleSelectionMode()?(this._selection=o,this.selectionChange.emit(o),v&&(this.selectionKeys={},this.selectionKeys[v]=1)):this.isMultipleSelectionMode()&&(w?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,o],this.selectionChange.emit(this.selection),v&&(this.selectionKeys[v]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})}else if("single"===this.selectionMode)u?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})):(this._selection=o,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys={},this.selectionKeys[v]=1));else if("multiple"===this.selectionMode)if(u){let w=this.findIndexInSelection(o);this._selection=this.selection.filter((I,T)=>T!=w),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&delete this.selectionKeys[v]}else this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys[v]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:n,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let s=this.isSelected(n),o=this.dataKey?String(ur.resolveFieldData(n,this.dataKey)):null;if(!s){if(!this.isRowSelectable(n,r))return;this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n),o&&(this.selectionKeys={},this.selectionKeys[o]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),o&&(this.selectionKeys[o]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:n,index:e.rowIndex})}}}selectRange(e,n){let r,s;this.anchorRowIndex>n?(r=n,s=this.anchorRowIndex):this.anchorRowIndex<n?(r=this.anchorRowIndex,s=n):(r=n,s=n),this.lazy&&this.paginator&&(r-=this.first,s-=this.first);let o=[];for(let l=r;l<=s;l++){let u=this.filteredValue?this.filteredValue[l]:this.value[l];if(!this.isSelected(u)){if(!this.isRowSelectable(u,n))continue;o.push(u),this._selection=[...this.selection,u];let p=this.dataKey?String(ur.resolveFieldData(u,this.dataKey)):null;p&&(this.selectionKeys[p]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:o,type:"row"})}clearSelectionRange(e){let n,r;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,r=this.anchorRowIndex):(n=this.rangeRowIndex,r=this.rangeRowIndex);for(let s=n;s<=r;s++){let o=this.value[s],l=this.findIndexInSelection(o);this._selection=this.selection.filter((p,v)=>v!=l);let u=this.dataKey?String(ur.resolveFieldData(o,this.dataKey)):null;u&&delete this.selectionKeys[u],this.onRowUnselect.emit({originalEvent:e,data:o,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[ur.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isRowSelectable(e,n){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:n}))}toggleRowWithRadio(e,n){if(this.preventSelectionSetterPropagation=!0,this.selection!=n){if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=n,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(ur.resolveFieldData(n,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,n){this.selection=this.selection||[];let r=this.isSelected(n),s=this.dataKey?String(ur.resolveFieldData(n,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let o=this.findIndexInSelection(n);this._selection=this.selection.filter((l,u)=>u!=o),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&delete this.selectionKeys[s]}else{if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&(this.selectionKeys[s]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,n){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:n});else{const r=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let s=this.selectionPageOnly&&this._selection?this._selection.filter(o=>!r.some(l=>this.equals(o,l))):[];n&&(s=this.frozenValue?[...s,...this.frozenValue,...r]:[...s,...r],s=this.rowSelectable?s.filter((o,l)=>this.rowSelectable({data:o,index:l})):s),this._selection=s,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n}),this.isStateful()&&this.saveState()}}equals(e,n){return"equals"===this.compareSelectionBy?e===n:ur.equals(e,n,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let n=0;n<this.value.length;n++){let l,r=!0,s=!1,o=!1;for(let u in this.filters)if(this.filters.hasOwnProperty(u)&&"global"!==u){o=!0;let p=u,v=this.filters[p];if(Array.isArray(v)){for(let w of v)if(r=this.executeLocalFilter(p,this.value[n],w),w.operator===HB.OR&&r||w.operator===HB.AND&&!r)break}else r=this.executeLocalFilter(p,this.value[n],v);if(!r)break}if(this.filters.global&&!s&&e)for(let u=0;u<e.length&&(s=this.filterService.filters[this.filters.global.matchMode](ur.resolveFieldData(this.value[n],e[u].field||e[u]),this.filters.global.value,this.filterLocale),!s);u++);l=this.filters.global?o?o&&r&&s:s:o&&r,l&&this.filteredValue.push(this.value[n])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,n,r){let s=r.value,o=r.matchMode||gh.STARTS_WITH,l=ur.resolveFieldData(n,e);return(0,this.filterService.filters[o])(l,s,this.filterLocale)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let n,r="",s=this.columns;e&&e.selectionOnly?n=this.selection||[]:(n=this.filteredValue||this.value,this.frozenValue&&(n=n?[...this.frozenValue,...n]:this.frozenValue));for(let u=0;u<s.length;u++){let p=s[u];!1!==p.exportable&&p.field&&(r+='"'+this.getExportHeader(p)+'"',u<s.length-1&&(r+=this.csvSeparator))}n.forEach((u,p)=>{r+="\n";for(let v=0;v<s.length;v++){let w=s[v];if(!1!==w.exportable&&w.field){let I=ur.resolveFieldData(u,w.field);I=null!=I?this.exportFunction?this.exportFunction({data:I,field:w.field}):String(I).replace(/"/g,'""'):"",r+='"'+I+'"',v<s.length-1&&(r+=this.csvSeparator)}}});let o=new Blob([r],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.style.display="none",document.body.appendChild(l),void 0!==l.download?(l.setAttribute("href",URL.createObjectURL(o)),l.setAttribute("download",this.exportFilename+".csv"),l.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(l)}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,n,r,s){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.editingCellRowIndex=s,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Ft.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(Ft.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let n=String(ur.resolveFieldData(e,this.dataKey));this.editingRowKeys[n]=!0}saveRowEdit(e,n){if(0===Ft.find(n,".ng-invalid.ng-dirty").length){let r=String(ur.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let n=String(ur.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[n]}toggleRow(e,n){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(ur.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:n,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:n,data:e})),n&&n.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(ur.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(ur.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let n=Ft.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let n=Ft.getOffset(this.containerViewChild.nativeElement).left;Ft.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let l=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&l>15&&this.resizeTableCells(r,l)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+e+"px"),this.resizeTableCells(r,null));this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",Ft.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,n){let r=Ft.index(this.resizeColumnElement),s=[];const o=Ft.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");Ft.find(o,"tr > th").forEach(p=>s.push(Ft.getOuterWidth(p))),this.destroyStyleElement(),this.createStyleElement();let u="";s.forEach((p,v)=>{let w=v===r?e:n&&v===r+1?n:p;u+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${v+1}),\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${v+1}),\n                #${this.id} .p-datatable-tfoot > tr > td:nth-child(${v+1}) {\n                    ${this.scrollable?`flex: 1 1 ${w}px !important`:`width: ${w}px !important`}\n                }\n            `}),this.styleElement.innerHTML=u}onColumnDragStart(e,n){this.reorderIconWidth=Ft.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Ft.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=Ft.getOffset(this.containerViewChild.nativeElement),s=Ft.getOffset(n);if(this.draggedColumn!=n){let o=Ft.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),l=Ft.indexWithinGroup(n,"preorderablecolumn"),u=s.left-r.left,v=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>v?(this.reorderIndicatorUpViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),l-o==1&&-1===this.dropPosition||l-o==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=Ft.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=Ft.indexWithinGroup(n,"preorderablecolumn"),o=r!=s;o&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(o=!1),o&&s<r&&1===this.dropPosition&&(s+=1),o&&s>r&&-1===this.dropPosition&&(s-=1),o&&(ur.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,n){this.rowDragging=!0,this.draggedRowIndex=n,e.dataTransfer.setData("text","b")}onRowDragOver(e,n,r){if(this.rowDragging&&this.draggedRowIndex!==n){let s=Ft.getOffset(r).top+Ft.getWindowScrollTop(),o=e.pageY,l=s+Ft.getOuterHeight(r)/2,u=r.previousElementSibling;o<l?(Ft.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=n,u?Ft.addClass(u,"p-datatable-dragpoint-bottom"):Ft.addClass(r,"p-datatable-dragpoint-top")):(u?Ft.removeClass(u,"p-datatable-dragpoint-bottom"):Ft.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=n+1,Ft.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,n){let r=n.previousElementSibling;r&&Ft.removeClass(r,"p-datatable-dragpoint-bottom"),Ft.removeClass(n,"p-datatable-dragpoint-bottom"),Ft.removeClass(n,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,n){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;ur.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,n),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let n={};this.paginator&&(n.first=this.first,n.rows=this.rows),this.sortField&&(n.sortField=this.sortField,n.sortOrder=this.sortOrder),this.multiSortMeta&&(n.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&this.saveColumnOrder(n),this.selection&&(n.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(n.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(n)),this.onStateSave.emit(n)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const n=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(n){let o=JSON.parse(n,function(o,l){return"string"==typeof l&&r.test(l)?new Date(l):l});this.paginator&&(void 0!==this.first&&(this.first=o.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=o.rows,this.rowsChange.emit(this.rows))),o.sortField&&(this.restoringSort=!0,this._sortField=o.sortField,this._sortOrder=o.sortOrder),o.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=o.multiSortMeta),o.filters&&(this.restoringFilter=!0,this.filters=o.filters),this.resizableColumns&&(this.columnWidthsState=o.columnWidths,this.tableWidthState=o.tableWidth),o.expandedRowKeys&&(this.expandedRowKeys=o.expandedRowKeys),o.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(o.selection)),this.stateRestored=!0,this.onStateRestore.emit(o)}}saveColumnWidths(e){let n=[];Ft.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(s=>n.push(Ft.getOuterWidth(s))),e.columnWidths=n.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=Ft.getOuterWidth(this.tableViewChild.nativeElement)+"px")}setResizeTableWidth(e){if(this.virtualScroll){const n=Ft.findSingle(this.containerViewChild.nativeElement,".p-scroller > table > tbody");n.style.width=e,n.style.minWidth=e}this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),ur.isNotEmpty(e)){this.createStyleElement();let n="";e.forEach((r,s)=>{n+=`\n                        #${this.id} .p-datatable-thead > tr > th:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tbody > tr > td:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tfoot > tr > td:nth-child(${s+1}) {\n                            ${this.scrollable?`flex: 1 1 ${r}px !important`:`width: ${r}px !important`}\n                        }\n                    `}),this.styleElement.innerHTML=n}}}saveColumnOrder(e){if(this.columns){let n=[];this.columns.map(r=>{n.push(r.field||r.key)}),e.columnOrder=n}}restoreColumnOrder(){const n=this.getStorage().getItem(this.stateKey);if(n){let s=JSON.parse(n).columnOrder;if(s){let o=[];s.map(l=>{let u=this.findColumnByKey(l);u&&o.push(u)}),this.columnOrderStateRestored=!0,this.columns=o}}}findColumnByKey(e){if(!this.columns)return null;for(let n of this.columns)if(n.key===e||n.field===e)return n}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(ua),qt(DA),qt(Yo),qt(sA),qt(oA))},i.\u0275cmp=Rr({type:i,selectors:[["p-table"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(Zne,5),Hr(Qne,5),Hr(Jne,5),Hr(eie,5),Hr(tie,5),Hr(nie,5),Hr(iie,5),Hr(rie,5)),2&e){let r;tr(r=nr())&&(n.containerViewChild=r.first),tr(r=nr())&&(n.resizeHelperViewChild=r.first),tr(r=nr())&&(n.reorderIndicatorUpViewChild=r.first),tr(r=nr())&&(n.reorderIndicatorDownViewChild=r.first),tr(r=nr())&&(n.wrapperViewChild=r.first),tr(r=nr())&&(n.tableViewChild=r.first),tr(r=nr())&&(n.tableHeaderViewChild=r.first),tr(r=nr())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[Xo([DA]),Na],decls:16,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(Xe(0,"div",0,1),ze(2,sie,2,2,"div",2),ze(3,aie,2,1,"div",3),ze(4,lie,1,17,"p-paginator",4),Xe(5,"div",5,6),ze(7,hie,3,14,"p-scroller",7),ze(8,gie,2,7,"ng-container",8),ze(9,Cie,8,22,"ng-template",null,9,Mc),Ke(),ze(11,wie,1,17,"p-paginator",10),ze(12,xie,2,1,"div",11),ze(13,Iie,2,0,"div",12),ze(14,Sie,2,0,"span",13),ze(15,Eie,2,0,"span",14),Ke()),2&e&&(Yr(n.styleClass),de("ngStyle",n.style)("ngClass",hM(16,Tie,[n.rowHover||n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable,n.scrollable&&"vertical"===n.scrollDirection,n.scrollable&&"horizontal"===n.scrollDirection,n.scrollable&&"both"===n.scrollDirection,n.scrollable&&"flex"===n.scrollHeight,"stack"===n.responsiveLayout,"scroll"===n.responsiveLayout,n.responsive,null!=n.headerGroupedTemplate,null!=n.footerGroupedTemplate])),Lr("id",n.id),we(2),de("ngIf",n.loading&&n.showLoader),we(1),de("ngIf",n.captionTemplate),we(1),de("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),we(1),de("ngStyle",Li(31,Mie,n.virtualScroll?"":n.scrollHeight)),we(2),de("ngIf",n.virtualScroll),we(1),de("ngIf",!n.virtualScroll),we(3),de("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),we(1),de("ngIf",n.summaryTemplate),we(1),de("ngIf",n.resizableColumns),we(1),de("ngIf",n.reorderableColumns),we(1),de("ngIf",n.reorderableColumns))},dependencies:function(){return[Mo,Fo,El,ea,e4,hl,EA,Bre]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;min-width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper>table,.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-thead,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot{display:block}.p-datatable-scrollable .p-datatable-thead>tr,.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-thead>tr>th,.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-thead,.p-datatable-scrollable>.p-datatable-wrapper>.p-scroller-viewport>.p-scroller>.p-datatable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th .p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td{display:table-cell}.p-datatable-scrollable .p-scroller>.p-datatable-table{display:inline-block}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-thead>tr>th,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),Bre=(()=>{class i{constructor(e,n,r,s){this.dt=e,this.tableService=n,this.cd=r,this.el=s,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition(),this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.updateScrollerPosition()}ngOnChanges(e){if(e.scrollerOptions){const{previousValue:n,currentValue:r}=e.scrollerOptions;this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.getScrollerOption("itemSize",n)!==this.getScrollerOption("itemSize",r)&&this.updateScrollerPosition()}}shouldRenderRowGroupHeader(e,n,r){let s=ur.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==ur.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,n,r){let s=ur.resolveFieldData(n,this.dt.groupRowsBy),o=e[r+1];return!o||s!==ur.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowspan(e,n,r){let s=ur.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==ur.resolveFieldData(o,this.dt.groupRowsBy)}calculateRowGroupSize(e,n,r){let s=ur.resolveFieldData(n,this.dt.groupRowsBy),o=s,l=0;for(;s===o;){l++;let u=e[++r];if(!u)break;o=ur.resolveFieldData(u,this.dt.groupRowsBy)}return 1===l?null:l}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=Ft.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=Ft.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}updateScrollerPosition(){const e=Ft.getOuterHeight(this.el.nativeElement.previousElementSibling);this.el.nativeElement.style.top=(this.el.nativeElement.style.top||0)+e+"px"}getScrollerOption(e,n){return this.dt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.dt.paginator?this.dt.first+e:e,r=this.getScrollerOption("getItemOptions");return r?r(n).index:n}}return i.\u0275fac=function(e){return new(e||i)(qt(l_),qt(DA),qt(Yo),qt(oi))},i.\u0275cmp=Rr({type:i,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},features:[Na],attrs:Die,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(ze(0,Uie,2,2,"ng-container",0),ze(1,Wie,2,2,"ng-container",0),ze(2,ere,2,2,"ng-container",0),ze(3,sre,2,2,"ng-container",0),ze(4,are,2,5,"ng-container",0),ze(5,cre,2,5,"ng-container",0)),2&e&&(de("ngIf",!n.dt.expandedRowTemplate&&!n.dt.virtualScroll),we(1),de("ngIf",!n.dt.expandedRowTemplate&&n.dt.virtualScroll),we(1),de("ngIf",n.dt.expandedRowTemplate&&!(n.frozen&&n.dt.frozenExpandedRowTemplate)),we(1),de("ngIf",n.dt.frozenExpandedRowTemplate&&n.frozen),we(1),de("ngIf",n.dt.loading),we(1),de("ngIf",n.dt.isEmpty()&&!n.dt.loading))},dependencies:[mu,Fo,El],encapsulation:2}),i})(),G2=(()=>{class i{constructor(e){this.dt=e,this.isEnabled()&&(this.subscription=this.dt.tableService.sortSource$.subscribe(n=>{this.updateSortState()}))}ngOnInit(){this.isEnabled()&&this.updateSortState()}updateSortState(){this.sorted=this.dt.isSorted(this.field),this.sortOrder=this.sorted?1===this.dt.sortOrder?"ascending":"descending":"none"}onClick(e){this.isEnabled()&&!this.isFilterElement(e.target)&&(this.updateSortState(),this.dt.sort({originalEvent:e,field:this.field}),Ft.clearSelection())}onEnterKey(e){this.onClick(e)}isEnabled(){return!0!==this.pSortableColumnDisabled}isFilterElement(e){return Ft.hasClass(e,"pi-filter-icon")||Ft.hasClass(e,"p-column-filter-menu-button")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(l_))},i.\u0275dir=fs({type:i,selectors:[["","pSortableColumn",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(e,n){1&e&&_n("click",function(s){return n.onClick(s)})("keydown.enter",function(s){return n.onEnterKey(s)}),2&e&&(Lr("tabindex",n.isEnabled()?"0":null)("role","columnheader")("aria-sort",n.sortOrder),Fp("p-sortable-column",n.isEnabled())("p-highlight",n.sorted))},inputs:{field:["pSortableColumn","field"],pSortableColumnDisabled:"pSortableColumnDisabled"}}),i})(),W2=(()=>{class i{constructor(e,n){this.dt=e,this.cd=n,this.subscription=this.dt.tableService.sortSource$.subscribe(r=>{this.updateSortState()})}ngOnInit(){this.updateSortState()}onClick(e){e.preventDefault()}updateSortState(){if("single"===this.dt.sortMode)this.sortOrder=this.dt.isSorted(this.field)?this.dt.sortOrder:0;else if("multiple"===this.dt.sortMode){let e=this.dt.getSortMeta(this.field);this.sortOrder=e?e.order:0}this.cd.markForCheck()}getMultiSortMetaIndex(){let e=this.dt._multiSortMeta,n=-1;if(e&&"multiple"===this.dt.sortMode&&(this.dt.showInitialSortBadge||e.length>1))for(let r=0;r<e.length;r++){let s=e[r];if(s.field===this.field||s.field===this.field){n=r;break}}return n}getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.dt.groupRowsBy&&e>-1?e:e+1}isMultiSorted(){return"multiple"===this.dt.sortMode&&this.getMultiSortMetaIndex()>-1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(l_),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-sortIcon"]],hostAttrs:[1,"p-element"],inputs:{field:"field"},decls:2,vars:6,consts:[[1,"p-sortable-column-icon","pi","pi-fw",3,"ngClass"],["class","p-sortable-column-badge",4,"ngIf"],[1,"p-sortable-column-badge"]],template:function(e,n){1&e&&(Kn(0,"i",0),ze(1,ure,2,1,"span",1)),2&e&&(de("ngClass",Yu(2,dre,1===n.sortOrder,-1===n.sortOrder,0===n.sortOrder)),we(1),de("ngIf",n.isMultiSorted()))},dependencies:[Mo,Fo],encapsulation:2,changeDetection:0}),i})(),j2=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.dt.isSelected(this.value),this.cd.markForCheck()})}ngOnInit(){this.checked=this.dt.isSelected(this.value)}onClick(e){this.disabled||this.dt.toggleRowWithCheckbox({originalEvent:e,rowIndex:this.index},this.value),Ft.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(l_),qt(DA),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-tableCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",value:"value",index:"index",inputId:"inputId",name:"name",required:"required",ariaLabel:"ariaLabel"},decls:6,vars:19,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(Xe(0,"div",0),_n("click",function(s){return n.onClick(s)}),Xe(1,"div",1)(2,"input",2),_n("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),Ke()(),Xe(3,"div",3,4),Kn(5,"span",5),Ke()()),2&e&&(de("ngClass",Ts(10,d4,n.focused,n.disabled)),we(2),de("checked",n.checked)("disabled",n.disabled),Lr("id",n.inputId)("name",n.name)("required",n.required)("aria-label",n.ariaLabel),we(1),de("ngClass",Yu(13,pre,n.checked,n.focused,n.disabled)),Lr("aria-checked",n.checked),we(2),de("ngClass",Li(17,h4,n.checked)))},dependencies:[Mo],encapsulation:2,changeDetection:0}),i})(),$2=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.valueChangeSubscription=this.dt.tableService.valueSource$.subscribe(()=>{this.checked=this.updateCheckedState()}),this.selectionChangeSubscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.updateCheckedState()})}ngOnInit(){this.checked=this.updateCheckedState()}onClick(e){this.disabled||this.dt.value&&this.dt.value.length>0&&this.dt.toggleRowsWithCheckbox(e,!this.checked),Ft.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}isDisabled(){return this.disabled||!this.dt.value||!this.dt.value.length}ngOnDestroy(){this.selectionChangeSubscription&&this.selectionChangeSubscription.unsubscribe(),this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe()}updateCheckedState(){if(this.cd.markForCheck(),null!==this.dt._selectAll)return this.dt._selectAll;{const e=this.dt.selectionPageOnly?this.dt.dataToRender(this.dt.processedData):this.dt.processedData,n=this.dt.frozenValue?[...this.dt.frozenValue,...e]:e,r=this.dt.rowSelectable?n.filter((s,o)=>this.dt.rowSelectable({data:s,index:o})):n;return ur.isNotEmpty(r)&&ur.isNotEmpty(this.dt.selection)&&r.every(s=>this.dt.selection.some(o=>this.dt.equals(s,o)))}}}return i.\u0275fac=function(e){return new(e||i)(qt(l_),qt(DA),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-tableHeaderCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",inputId:"inputId",name:"name",ariaLabel:"ariaLabel"},decls:7,vars:18,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["cb",""],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(Xe(0,"div",0),_n("click",function(s){return n.onClick(s)}),Xe(1,"div",1)(2,"input",2,3),_n("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),Ke()(),Xe(4,"div",4,5),Kn(6,"span",6),Ke()()),2&e&&(de("ngClass",Ts(9,d4,n.focused,n.isDisabled())),we(2),de("checked",n.checked)("disabled",n.isDisabled()),Lr("id",n.inputId)("name",n.name)("aria-label",n.ariaLabel),we(2),de("ngClass",Yu(12,gre,n.checked,n.focused,n.isDisabled())),Lr("aria-checked",n.checked),we(2),de("ngClass",Li(16,h4,n.checked)))},dependencies:[Mo],encapsulation:2,changeDetection:0}),i})(),zre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,t4,U2,j1,W1,cv,Yte,a4,q1,nne,lv,Za,lv]}),i})(),Vre=(()=>{class i{constructor(e){this.el=e}onkeydown(e){if(!0!==this.pFocusTrapDisabled){e.preventDefault();let n=Ft.getFocusableElements(this.el.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}}return i.\u0275fac=function(e){return new(e||i)(qt(oi))},i.\u0275dir=fs({type:i,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,n){1&e&&_n("keydown.tab",function(s){return n.onkeydown(s)})("keydown.shift.tab",function(s){return n.onkeydown(s)})},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),i})(),Ure=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();const Hre=["titlebar"],Gre=["content"],Wre=["footer"];function jre(i,t){if(1&i){const e=Di();Xe(0,"div",11),_n("mousedown",function(r){return Lt(e),Pt(ye(3).initResize(r))}),Ke()}}function $re(i,t){if(1&i&&(Xe(0,"span",18),bi(1),Ke()),2&i){const e=ye(4);Lr("id",e.id+"-label"),we(1),As(e.header)}}function qre(i,t){1&i&&(Xe(0,"span",18),Mu(1,1),Ke()),2&i&&Lr("id",ye(4).id+"-label")}function Xre(i,t){1&i&&qi(0)}const Yre=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function Kre(i,t){if(1&i){const e=Di();Xe(0,"button",19),_n("click",function(){return Lt(e),Pt(ye(4).maximize())})("keydown.enter",function(){return Lt(e),Pt(ye(4).maximize())}),Kn(1,"span",20),Ke()}if(2&i){const e=ye(4);de("ngClass",Oo(2,Yre)),we(1),de("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}const Zre=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function Qre(i,t){if(1&i){const e=Di();Xe(0,"button",21),_n("click",function(r){return Lt(e),Pt(ye(4).close(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(4).close(r))}),Kn(1,"span",22),Ke()}if(2&i){const e=ye(4);de("ngClass",Oo(4,Zre)),Lr("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),we(1),de("ngClass",e.closeIcon)}}function Jre(i,t){if(1&i){const e=Di();Xe(0,"div",12,13),_n("mousedown",function(r){return Lt(e),Pt(ye(3).initDrag(r))}),ze(2,$re,2,2,"span",14),ze(3,qre,2,1,"span",14),ze(4,Xre,1,0,"ng-container",9),Xe(5,"div",15),ze(6,Kre,2,3,"button",16),ze(7,Qre,2,5,"button",17),Ke()()}if(2&i){const e=ye(3);we(2),de("ngIf",!e.headerFacet&&!e.headerTemplate),we(1),de("ngIf",e.headerFacet),we(1),de("ngTemplateOutlet",e.headerTemplate),we(2),de("ngIf",e.maximizable),we(1),de("ngIf",e.closable)}}function ese(i,t){1&i&&qi(0)}function tse(i,t){1&i&&qi(0)}function nse(i,t){if(1&i&&(Xe(0,"div",23,24),Mu(2,2),ze(3,tse,1,0,"ng-container",9),Ke()),2&i){const e=ye(3);we(3),de("ngTemplateOutlet",e.footerTemplate)}}const ise=function(i,t,e,n){return{"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":t,"p-dialog-resizable":e,"p-dialog-maximized":n}},rse=function(i,t){return{transform:i,transition:t}},sse=function(i){return{value:"visible",params:i}};function ose(i,t){if(1&i){const e=Di();Xe(0,"div",3,4),_n("@animation.start",function(r){return Lt(e),Pt(ye(2).onAnimationStart(r))})("@animation.done",function(r){return Lt(e),Pt(ye(2).onAnimationEnd(r))}),ze(2,jre,1,0,"div",5),ze(3,Jre,8,5,"div",6),Xe(4,"div",7,8),Mu(6),ze(7,ese,1,0,"ng-container",9),Ke(),ze(8,nse,4,1,"div",10),Ke()}if(2&i){const e=ye(2);Yr(e.styleClass),de("ngClass",_f(15,ise,e.rtl,e.draggable,e.resizable,e.maximized))("ngStyle",e.style)("pFocusTrapDisabled",!1===e.focusTrap)("@animation",Li(23,sse,Ts(20,rse,e.transformOptions,e.transitionOptions))),Lr("aria-labelledby",e.id+"-label"),we(2),de("ngIf",e.resizable),we(1),de("ngIf",e.showHeader),we(1),Yr(e.contentStyleClass),de("ngClass","p-dialog-content")("ngStyle",e.contentStyle),we(3),de("ngTemplateOutlet",e.contentTemplate),we(1),de("ngIf",e.footerFacet||e.footerTemplate)}}const ase=function(i,t,e,n,r,s,o,l,u,p){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":t,"p-dialog-left":e,"p-dialog-right":n,"p-dialog-top":r,"p-dialog-top-left":s,"p-dialog-top-right":o,"p-dialog-bottom":l,"p-dialog-bottom-left":u,"p-dialog-bottom-right":p}};function lse(i,t){if(1&i&&(Xe(0,"div",1),ze(1,ose,9,25,"div",2),Ke()),2&i){const e=ye();Yr(e.maskStyleClass),de("ngClass",hM(4,ase,[e.modal,e.modal||e.blockScroll,"left"===e.position,"right"===e.position,"top"===e.position,"topleft"===e.position||"top-left"===e.position,"topright"===e.position||"top-right"===e.position,"bottom"===e.position,"bottomleft"===e.position||"bottom-left"===e.position,"bottomright"===e.position||"bottom-right"===e.position])),we(1),de("ngIf",e.visible)}}const cse=["*",[["p-header"]],[["p-footer"]]],use=["*","p-header","p-footer"],dse=dC([Tl({transform:"{{transform}}",opacity:0}),Yc("{{transition}}")]),hse=dC([Yc("{{transition}}",Tl({transform:"{{transform}}",opacity:0}))]);let Z1=(()=>{class i{constructor(e,n,r,s,o){this.el=e,this.renderer=n,this.zone=r,this.cd=s,this.config=o,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.closeTabindex="-1",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new qn,this.onHide=new qn,this.visibleChange=new qn,this.onResizeInit=new qn,this.onResizeEnd=new qn,this.onDragEnd=new qn,this.onMaximize=new qn,this.id=sC(),this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle()}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style={...e},this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let e=Ft.findSingle(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&Ft.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&Ft.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?Ft.addClass(document.body,"p-overflow-hidden"):Ft.removeClass(document.body,"p-overflow-hidden")),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(ic.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints)e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[n]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}initDrag(e){Ft.hasClass(e.target,"p-dialog-header-icon")||Ft.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",Ft.addClass(document.body,"p-unselectable-text"))}onKeydown(e){if(this.focusTrap&&9===e.which){e.preventDefault();let n=Ft.getFocusableElements(this.container);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}onDrag(e){if(this.dragging){let n=Ft.getOuterWidth(this.container),r=Ft.getOuterHeight(this.container),s=e.pageX-this.lastPageX,o=e.pageY-this.lastPageY,l=this.container.getBoundingClientRect(),u=l.left+s,p=l.top+o,v=Ft.getViewport();this.container.style.position="fixed",this.keepInViewport?(u>=this.minX&&u+n<v.width&&(this._style.left=u+"px",this.lastPageX=e.pageX,this.container.style.left=u+"px"),p>=this.minY&&p+r<v.height&&(this._style.top=p+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")):(this.lastPageX=e.pageX,this.container.style.left=u+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,Ft.removeClass(document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,Ft.addClass(document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let n=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,s=Ft.getOuterWidth(this.container),o=Ft.getOuterHeight(this.container),l=Ft.getOuterHeight(this.contentViewChild.nativeElement),u=s+n,p=o+r,v=this.container.style.minWidth,w=this.container.style.minHeight,I=this.container.getBoundingClientRect(),T=Ft.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(u+=n,p+=r),(!v||u>parseInt(v))&&I.left+u<T.width&&(this._style.width=u+"px",this.container.style.width=this._style.width),(!w||p>parseInt(w))&&I.top+p<T.height&&(this.contentViewChild.nativeElement.style.height=l+p-o+"px",this._style.height&&(this._style.height=p+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,Ft.removeClass(document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{27==n.which&&this.close(n)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):Ft.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&Ft.addClass(document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&Ft.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(Ft.removeClass(document.body,"p-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&Ft.removeClass(document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&ic.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?{...this.originalStyle}:{}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(h),qt(ua),qt(Yo),qt(Np))},i.\u0275cmp=Rr({type:i,selectors:[["p-dialog"]],contentQueries:function(e,n,r){if(1&e&&(dl(r,XD,5),dl(r,A1,5),dl(r,hl,4)),2&e){let s;tr(s=nr())&&(n.headerFacet=s.first),tr(s=nr())&&(n.footerFacet=s.first),tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(Hre,5),Hr(Gre,5),Hr(Wre,5)),2&e){let r;tr(r=nr())&&(n.headerViewChild=r.first),tr(r=nr())&&(n.contentViewChild=r.first),tr(r=nr())&&(n.footerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:"draggable",resizable:"resizable",positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:"modal",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",rtl:"rtl",closable:"closable",responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",showHeader:"showHeader",breakpoint:"breakpoint",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",maximizable:"maximizable",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},ngContentSelectors:use,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["content",""],[4,"ngTemplateOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"],["footer",""]],template:function(e,n){1&e&&(Xf(cse),ze(0,lse,2,15,"div",0)),2&e&&de("ngIf",n.maskVisible)},dependencies:[Mo,Fo,El,ea,Vre,Ju],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translate(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0px!important;left:0px!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[cy("animation",[Qu("void => visible",[WV(dse)]),Qu("visible => void",[WV(hse)])])]},changeDetection:0}),i})(),fse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Ure,yu,Za]}),i})();const f4=["container"],pse=function(i,t,e,n){return{"pi-info-circle":i,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":n}};function gse(i,t){if(1&i&&(is(0),Kn(1,"span",6),Xe(2,"div",7)(3,"div",8),bi(4),Ke(),Xe(5,"div",9),bi(6),Ke()(),rs()),2&i){const e=ye();we(1),Yr("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),de("ngClass",_f(5,pse,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),we(3),As(e.message.summary),we(2),As(e.message.detail)}}function mse(i,t){1&i&&qi(0)}function vse(i,t){if(1&i){const e=Di();Xe(0,"button",10),_n("click",function(r){return Lt(e),Pt(ye().onCloseIconClick(r))})("keydown.enter",function(r){return Lt(e),Pt(ye().onCloseIconClick(r))}),Kn(1,"span",11),Ke()}}const yse=function(i){return[i,"p-toast-message"]},_se=function(i,t,e,n){return{showTransformParams:i,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:n}},bse=function(i){return{value:"visible",params:i}},Cse=function(i){return{$implicit:i}};function wse(i,t){if(1&i){const e=Di();Xe(0,"p-toastItem",3),_n("onClose",function(r){return Lt(e),Pt(ye().onMessageClose(r))})("@toastAnimation.start",function(r){return Lt(e),Pt(ye().onAnimationStart(r))})("@toastAnimation.done",function(r){return Lt(e),Pt(ye().onAnimationEnd(r))}),Ke()}if(2&i){const e=t.$implicit,n=t.index,r=ye();de("message",e)("index",n)("template",r.template)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}let Ase=(()=>{class i{constructor(e){this.zone=e,this.onClose=new qn}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return i.\u0275fac=function(e){return new(e||i)(qt(ua))},i.\u0275cmp=Rr({type:i,selectors:[["p-toastItem"]],viewQuery:function(e,n){if(1&e&&Hr(f4,5),2&e){let r;tr(r=nr())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,n){1&e&&(Xe(0,"div",0,1),_n("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()}),Xe(2,"div",2),ze(3,gse,7,10,"ng-container",3),ze(4,mse,1,0,"ng-container",4),ze(5,vse,2,0,"button",5),Ke()()),2&e&&(Yr(n.message.styleClass),de("ngClass",Li(10,yse,"p-toast-message-"+n.message.severity))("@messageState",Li(17,bse,_f(12,_se,n.showTransformOptions,n.hideTransformOptions,n.showTransitionOptions,n.hideTransitionOptions))),Lr("id",n.message.id),we(2),de("ngClass",n.message.contentStyleClass),we(1),de("ngIf",!n.template),we(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Li(19,Cse,n.message)),we(1),de("ngIf",!1!==n.message.closable))},dependencies:[Mo,Fo,El,Ju],encapsulation:2,data:{animation:[cy("messageState",[A0("visible",Tl({transform:"translateY(0)",opacity:1})),Qu("void => *",[Tl({transform:"{{showTransformParams}}",opacity:0}),Yc("{{showTransitionParams}}")]),Qu("* => void",[Yc("{{hideTransitionParams}}",Tl({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),i})(),LA=(()=>{class i{constructor(e,n,r){this.messageService=e,this.cd=n,this.config=r,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new qn,this.id=sC()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const n=e.filter(r=>this.canAdd(r));this.add(n)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let n=this.key===e.key;return n&&this.preventOpenDuplicates&&(n=!this.containsMessage(this.messages,e)),n&&this.preventDuplicates&&(n=!this.containsMessage(this.messagesArchieve,e)),n}containsMessage(e,n){return!!e&&null!=e.find(r=>r.summary===n.summary&&r.detail==n.detail&&r.severity===n.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&ic.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&ur.isEmpty(this.messages)&&ic.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints){let r="";for(let s in this.breakpoints[n])r+=s+":"+this.breakpoints[n][s]+" !important;";e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-toast[${this.id}] {\n                           ${r}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&ic.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(qt(iv),qt(Yo),qt(Np))},i.\u0275cmp=Rr({type:i,selectors:[["p-toast"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&Hr(f4,5),2&e){let r;tr(r=nr())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,n){1&e&&(Xe(0,"div",0,1),ze(2,wse,1,8,"p-toastItem",2),Ke()),2&e&&(Yr(n.styleClass),de("ngClass","p-toast p-component p-toast-"+n.position)("ngStyle",n.style),we(2),de("ngForOf",n.messages))},dependencies:[Mo,mu,ea,Ase],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[cy("toastAnimation",[Qu(":enter, :leave",[PJ("@*",LJ())])])]},changeDetection:0}),i})(),p4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,yu,Za]}),i})();function xse(i,t){1&i&&Kn(0,"span",11),2&i&&de("innerHTML",ye(2).$implicit.summary,Ka)}function Ise(i,t){1&i&&Kn(0,"span",12),2&i&&de("innerHTML",ye(2).$implicit.detail,Ka)}function Sse(i,t){if(1&i&&(is(0),ze(1,xse,1,1,"span",9),ze(2,Ise,1,1,"span",10),rs()),2&i){const e=ye().$implicit;we(1),de("ngIf",e.summary),we(1),de("ngIf",e.detail)}}function Ese(i,t){if(1&i&&(Xe(0,"span",15),bi(1),Ke()),2&i){const e=ye(2).$implicit;we(1),As(e.summary)}}function Tse(i,t){if(1&i&&(Xe(0,"span",16),bi(1),Ke()),2&i){const e=ye(2).$implicit;we(1),As(e.detail)}}function Mse(i,t){if(1&i&&(ze(0,Ese,2,1,"span",13),ze(1,Tse,2,1,"span",14)),2&i){const e=ye().$implicit;de("ngIf",e.summary),we(1),de("ngIf",e.detail)}}function Dse(i,t){if(1&i){const e=Di();Xe(0,"button",17),_n("click",function(){Lt(e);const r=ye().index;return Pt(ye(2).removeMessage(r))}),Kn(1,"i",18),Ke()}}const Lse=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Pse=function(i){return{value:"visible",params:i}},Rse=function(i,t,e,n){return{"pi-info-circle":i,"pi-check":t,"pi-exclamation-triangle":e,"pi-times-circle":n}};function kse(i,t){if(1&i&&(Xe(0,"div",4)(1,"div",5),Kn(2,"span",6),ze(3,Sse,3,2,"ng-container",1),ze(4,Mse,2,2,"ng-template",null,7,Mc),ze(6,Dse,2,0,"button",8),Ke()()),2&i){const e=t.$implicit,n=Po(5),r=ye(2);Yr("p-message p-message-"+e.severity),de("@messageAnimation",Li(12,Pse,Ts(9,Lse,r.showTransitionOptions,r.hideTransitionOptions))),we(2),Yr("p-message-icon pi"+(e.icon?" "+e.icon:"")),de("ngClass",_f(14,Rse,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),we(1),de("ngIf",!r.escape)("ngIfElse",n),we(3),de("ngIf",r.closable)}}function Ose(i,t){if(1&i&&(is(0),ze(1,kse,7,19,"div",3),rs()),2&i){const e=ye();we(1),de("ngForOf",e.value)}}function Fse(i,t){1&i&&qi(0)}function Nse(i,t){if(1&i&&(Xe(0,"div",19)(1,"div",5),ze(2,Fse,1,0,"ng-container",20),Ke()()),2&i){const e=ye();de("ngClass","p-message p-message-"+e.severity),we(2),de("ngTemplateOutlet",e.contentTemplate)}}let Bse=(()=>{class i{constructor(e,n,r){this.messageService=e,this.el=n,this.cd=r,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new qn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){if(e instanceof Array){let n=e.filter(r=>this.key===r.key);this.value=this.value?[...this.value,...n]:[...n]}else this.key===e.key&&(this.value=this.value?[...this.value,e]:[e]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(e){this.value=this.value.filter((n,r)=>r!==e),this.valueChange.emit(this.value)}get icon(){const e=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(iv,8),qt(oi),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-messages"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(Xe(0,"div",0),ze(1,Ose,2,1,"ng-container",1),ze(2,Nse,3,2,"ng-template",null,2,Mc),Ke()),2&e){const r=Po(3);Yr(n.styleClass),de("ngStyle",n.style),we(1),de("ngIf",!n.contentTemplate)("ngIfElse",r)}},dependencies:[Mo,mu,Fo,El,ea,Ju],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[cy("messageAnimation",[Qu(":enter",[Tl({opacity:0,transform:"translateY(-25%)"}),Yc("{{showTransitionParams}}")]),Qu(":leave",[Yc("{{hideTransitionParams}}",Tl({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),i})(),g4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,yu]}),i})();function zse(i,t){if(1&i&&(Xe(0,"div",5),bi(1),Ke()),2&i){const e=ye(2);Nh("display",null!=e.value&&0!==e.value?"flex":"none"),we(1),AI("",e.value,"",e.unit,"")}}function Vse(i,t){if(1&i&&(Xe(0,"div",3),ze(1,zse,2,4,"div",4),Ke()),2&i){const e=ye();Nh("width",e.value+"%"),we(1),de("ngIf",e.showValue)}}function Use(i,t){1&i&&(Xe(0,"div",6),Kn(1,"div",7),Ke())}const Hse=function(i,t){return{"p-progressbar p-component":!0,"p-progressbar-determinate":i,"p-progressbar-indeterminate":t}};let Gse=(()=>{class i{constructor(){this.showValue=!0,this.unit="%",this.mode="determinate"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Rr({type:i,selectors:[["p-progressBar"]],hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",style:"style",styleClass:"styleClass",unit:"unit",mode:"mode"},decls:3,vars:10,consts:[["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],["class","p-progressbar-label",3,"display",4,"ngIf"],[1,"p-progressbar-label"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(e,n){1&e&&(Xe(0,"div",0),ze(1,Vse,2,3,"div",1),ze(2,Use,2,0,"div",2),Ke()),2&e&&(Yr(n.styleClass),de("ngStyle",n.style)("ngClass",Ts(7,Hse,"determinate"===n.mode,"indeterminate"===n.mode)),Lr("aria-valuenow",n.value),we(1),de("ngIf","determinate"===n.mode),we(1),de("ngIf","indeterminate"===n.mode))},dependencies:[Mo,Fo,ea],styles:['.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0}),i})(),q2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();const Wse=["advancedfileinput"],jse=["basicfileinput"],$se=["content"];function qse(i,t){if(1&i){const e=Di();Xe(0,"p-button",17),_n("onClick",function(){return Lt(e),Pt(ye(2).upload())}),Ke()}if(2&i){const e=ye(2);de("label",e.uploadButtonLabel)("icon",e.uploadIcon)("disabled",!e.hasFiles()||e.isFileLimitExceeded())}}function Xse(i,t){if(1&i){const e=Di();Xe(0,"p-button",17),_n("onClick",function(){return Lt(e),Pt(ye(2).clear())}),Ke()}if(2&i){const e=ye(2);de("label",e.cancelButtonLabel)("icon",e.cancelIcon)("disabled",!e.hasFiles()||e.uploading)}}function Yse(i,t){1&i&&qi(0)}function Kse(i,t){1&i&&Kn(0,"p-progressBar",18),2&i&&de("value",ye(2).progress)("showValue",!1)}function Zse(i,t){if(1&i&&Kn(0,"img",26),2&i){const e=ye().$implicit,n=ye(4);de("src",e.objectURL,dh)("width",n.previewWidth)}}function Qse(i,t){if(1&i){const e=Di();Xe(0,"div",22)(1,"div"),ze(2,Zse,1,2,"img",23),Ke(),Xe(3,"div",24),bi(4),Ke(),Xe(5,"div"),bi(6),Ke(),Xe(7,"div")(8,"button",25),_n("click",function(r){const o=Lt(e).index;return Pt(ye(4).remove(r,o))}),Ke()()()}if(2&i){const e=t.$implicit,n=ye(4);we(2),de("ngIf",n.isImage(e)),we(2),As(e.name),we(2),As(n.formatSize(e.size)),we(2),de("disabled",n.uploading)}}function Jse(i,t){if(1&i&&(Xe(0,"div"),ze(1,Qse,9,4,"div",21),Ke()),2&i){const e=ye(3);we(1),de("ngForOf",e.files)}}function eoe(i,t){}function toe(i,t){if(1&i&&(Xe(0,"div"),ze(1,eoe,0,0,"ng-template",27),Ke()),2&i){const e=ye(3);we(1),de("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function noe(i,t){if(1&i&&(Xe(0,"div",19),ze(1,Jse,2,1,"div",20),ze(2,toe,2,2,"div",20),Ke()),2&i){const e=ye(2);we(1),de("ngIf",!e.fileTemplate),we(1),de("ngIf",e.fileTemplate)}}function ioe(i,t){1&i&&qi(0)}const roe=function(i,t){return{"p-focus":i,"p-disabled":t}},soe=function(i){return{$implicit:i}};function ooe(i,t){if(1&i){const e=Di();Xe(0,"div",2)(1,"div",3)(2,"span",4),_n("focus",function(){return Lt(e),Pt(ye().onFocus())})("blur",function(){return Lt(e),Pt(ye().onBlur())})("click",function(){return Lt(e),Pt(ye().choose())})("keydown.enter",function(){return Lt(e),Pt(ye().choose())}),Xe(3,"input",5,6),_n("change",function(r){return Lt(e),Pt(ye().onFileSelect(r))}),Ke(),Kn(5,"span",7),Xe(6,"span",8),bi(7),Ke()(),ze(8,qse,1,3,"p-button",9),ze(9,Xse,1,3,"p-button",9),ze(10,Yse,1,0,"ng-container",10),Ke(),Xe(11,"div",11,12),_n("dragenter",function(r){return Lt(e),Pt(ye().onDragEnter(r))})("dragleave",function(r){return Lt(e),Pt(ye().onDragLeave(r))})("drop",function(r){return Lt(e),Pt(ye().onDrop(r))}),ze(13,Kse,1,2,"p-progressBar",13),Kn(14,"p-messages",14),ze(15,noe,3,2,"div",15),ze(16,ioe,1,0,"ng-container",16),Ke()()}if(2&i){const e=ye();Yr(e.styleClass),de("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),we(2),de("ngClass",Ts(22,roe,e.focus,e.disabled||e.isChooseDisabled())),we(1),de("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),Lr("title",""),we(2),Yr(e.chooseIcon),de("ngClass","p-button-icon p-button-icon-left"),we(2),As(e.chooseButtonLabel),we(1),de("ngIf",!e.auto&&e.showUploadButton),we(1),de("ngIf",!e.auto&&e.showCancelButton),we(1),de("ngTemplateOutlet",e.toolbarTemplate),we(3),de("ngIf",e.hasFiles()),we(1),de("value",e.msgs)("enableService",!1),we(1),de("ngIf",e.hasFiles()),we(1),de("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",Li(25,soe,e.files))}}function aoe(i,t){if(1&i){const e=Di();Xe(0,"input",32,33),_n("change",function(r){return Lt(e),Pt(ye(2).onFileSelect(r))})("focus",function(){return Lt(e),Pt(ye(2).onFocus())})("blur",function(){return Lt(e),Pt(ye(2).onBlur())}),Ke()}if(2&i){const e=ye(2);de("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled)}}const loe=function(i,t,e,n){return{"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":i,"p-fileupload-choose-selected":t,"p-focus":e,"p-disabled":n}};function coe(i,t){if(1&i){const e=Di();Xe(0,"div",28),Kn(1,"p-messages",14),Xe(2,"span",29),_n("mouseup",function(){return Lt(e),Pt(ye().onBasicUploaderClick())})("keydown",function(r){return Lt(e),Pt(ye().onBasicKeydown(r))}),Kn(3,"span",30),Xe(4,"span",8),bi(5),Ke(),ze(6,aoe,2,3,"input",31),Ke()()}if(2&i){const e=ye();we(1),de("value",e.msgs)("enableService",!1),we(1),Yr(e.styleClass),de("ngClass",_f(9,loe,!e.chooseLabel,e.hasFiles(),e.focus,e.disabled))("ngStyle",e.style),we(1),de("ngClass",e.hasFiles()&&!e.auto?e.uploadIcon:e.chooseIcon),we(2),As(e.auto?e.chooseLabel:e.hasFiles()?e.files[0].name:e.chooseLabel),we(1),de("ngIf",!e.hasFiles())}}let m4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.sanitizer=n,this.zone=r,this.http=s,this.cd=o,this.config=l,this.method="post",this.invalidFileSizeMessageSummary="{0}: Invalid file size, ",this.invalidFileSizeMessageDetail="maximum upload size is {0}.",this.invalidFileTypeMessageSummary="{0}: Invalid file type, ",this.invalidFileTypeMessageDetail="allowed file types: {0}.",this.invalidFileLimitMessageDetail="limit is {0} at most.",this.invalidFileLimitMessageSummary="Maximum number of files exceeded, ",this.previewWidth=50,this.chooseIcon="pi pi-plus",this.uploadIcon="pi pi-upload",this.cancelIcon="pi pi-times",this.showUploadButton=!0,this.showCancelButton=!0,this.mode="advanced",this.onBeforeUpload=new qn,this.onSend=new qn,this.onUpload=new qn,this.onError=new qn,this.onClear=new qn,this.onRemove=new qn,this.onSelect=new qn,this.onProgress=new qn,this.uploadHandler=new qn,this._files=[],this.progress=0,this.uploadedFileCount=0}set files(e){this._files=[];for(let n=0;n<e.length;n++){let r=e[n];this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[n]))),this._files.push(e[n]))}}get files(){return this._files}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"file":default:this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){"advanced"===this.mode&&this.zone.runOutsideAngular(()=>{this.content&&this.content.nativeElement.addEventListener("dragover",this.onDragOver.bind(this))})}choose(){this.advancedFileInput.nativeElement.click()}onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.msgs=[],this.multiple||(this.files=[]);let n=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let r=0;r<n.length;r++){let s=n[r];this.isFileSelected(s)||this.validate(s)&&(this.isImage(s)&&(s.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(n[r]))),this.files.push(n[r]))}this.onSelect.emit({originalEvent:e,files:n,currentFiles:this.files}),this.fileLimit&&"advanced"==this.mode&&this.checkFileLimit(),this.hasFiles()&&this.auto&&("advanced"!==this.mode||!this.isFileLimitExceeded())&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let n of this.files)if(n.name+n.type+n.size===e.name+e.type+e.size)return!0;return!1}isIE11(){return!!window.MSInputMethodContext&&!!document.documentMode}validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):!(this.maxFileSize&&e.size>this.maxFileSize&&(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),1))}isFileTypeValid(e){let n=this.accept.split(",").map(r=>r.trim());for(let r of n)if(this.isWildcard(r)?this.getTypeClass(e.type)===this.getTypeClass(r):e.type==r||this.getFileExtension(e).toLowerCase()===r.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return-1!==e.indexOf("*")}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let n=0;n<this.files.length;n++)e.append(this.name,this.files[n],this.files[n].name);this.http[this.method](this.url,e,{headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(n=>{switch(n.type){case qc.Sent:this.onSend.emit({originalEvent:n,formData:e});break;case qc.Response:this.uploading=!1,this.progress=0,n.status>=200&&n.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:n,files:this.files})):this.onError.emit({files:this.files}),this.clear();break;case qc.UploadProgress:n.loaded&&(this.progress=Math.round(100*n.loaded/n.total)),this.onProgress.emit({originalEvent:n,progress:this.progress})}this.cd.markForCheck()},n=>{this.uploading=!1,this.onError.emit({files:this.files,error:n})})}}clear(){this.files=[],this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,n){this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[n]}),this.files.splice(n,1)}isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount}isChooseDisabled(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(){this.isFileLimitExceeded()&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(Ft.addClass(this.content.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||Ft.removeClass(this.content.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){Ft.removeClass(this.content.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let n=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||n&&1===n.length)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){if(0==e)return"0 B";let o=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,o)).toFixed(3))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault()}}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(vu.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(vu.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(vu.CANCEL)}ngOnDestroy(){this.content&&this.content.nativeElement&&this.content.nativeElement.removeEventListener("dragover",this.onDragOver),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(u3),qt(ua),qt(t1),qt(Yo),qt(Np))},i.\u0275cmp=Rr({type:i,selectors:[["p-fileUpload"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(Wse,5),Hr(jse,5),Hr($se,5)),2&e){let r;tr(r=nr())&&(n.advancedFileInput=r.first),tr(r=nr())&&(n.basicFileInput=r.first),tr(r=nr())&&(n.content=r.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:"multiple",accept:"accept",disabled:"disabled",auto:"auto",withCredentials:"withCredentials",maxFileSize:"maxFileSize",invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:"previewWidth",chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:"showUploadButton",showCancelButton:"showCancelButton",mode:"mode",headers:"headers",customUpload:"customUpload",fileLimit:"fileLimit",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler"},decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"p-fileupload-buttonbar"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"ngClass","focus","blur","click","keydown.enter"],["type","file",3,"multiple","accept","disabled","change"],["advancedfileinput",""],[3,"ngClass"],[1,"p-button-label"],["type","button",3,"label","icon","disabled","onClick",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],["content",""],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"label","icon","disabled","onClick"],[3,"value","showValue"],[1,"p-fileupload-files"],[4,"ngIf"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[3,"src","width",4,"ngIf"],[1,"p-fileupload-filename"],["type","button","icon","pi pi-times","pButton","",3,"disabled","click"],[3,"src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"ngClass","ngStyle","mouseup","keydown"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur"],["basicfileinput",""]],template:function(e,n){1&e&&(ze(0,ooe,17,27,"div",0),ze(1,coe,7,14,"div",1)),2&e&&(de("ngIf","advanced"===n.mode),we(1),de("ngIf","basic"===n.mode))},dependencies:[Mo,mu,Fo,El,ea,x0,$1,Gse,Bse,Ju],styles:[".p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}\n"],encapsulation:2,changeDetection:0}),i})(),uoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za,cv,q2,g4,yu,Za,cv,q2,g4]}),i})();function doe(i,t){1&i&&qi(0)}function hoe(i,t){if(1&i&&(Xe(0,"div",3),ze(1,doe,1,0,"ng-container",4),Ke()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.leftTemplate)}}function foe(i,t){1&i&&qi(0)}function poe(i,t){if(1&i&&(Xe(0,"div",5),ze(1,foe,1,0,"ng-container",4),Ke()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.rightTemplate)}}const goe=["*"];let X2=(()=>{class i{constructor(e){this.el=e}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"left":this.leftTemplate=e.template;break;case"right":this.rightTemplate=e.template}})}}return i.\u0275fac=function(e){return new(e||i)(qt(oi))},i.\u0275cmp=Rr({type:i,selectors:[["p-toolbar"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:goe,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(e,n){1&e&&(Xf(),Xe(0,"div",0),Mu(1),ze(2,hoe,2,1,"div",1),ze(3,poe,2,1,"div",2),Ke()),2&e&&(Yr(n.styleClass),de("ngClass","p-toolbar p-component")("ngStyle",n.style),we(2),de("ngIf",n.leftTemplate),we(1),de("ngIf",n.rightTemplate))},dependencies:[Mo,Fo,El,ea],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),i})(),moe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();function voe(i,t){1&i&&Kn(0,"i",8),2&i&&(Yr(ye(2).confirmation.icon),de("ngClass","p-confirm-popup-icon"))}function yoe(i,t){if(1&i){const e=Di();Xe(0,"button",9),_n("click",function(){return Lt(e),Pt(ye(2).reject())}),Ke()}if(2&i){const e=ye(2);Yr(e.confirmation.rejectButtonStyleClass||"p-button-text"),de("icon",e.confirmation.rejectIcon)("label",e.rejectButtonLabel)("ngClass","p-confirm-popup-reject p-button-sm"),Lr("aria-label",e.rejectButtonLabel)}}function _oe(i,t){if(1&i){const e=Di();Xe(0,"button",9),_n("click",function(){return Lt(e),Pt(ye(2).accept())}),Ke()}if(2&i){const e=ye(2);Yr(e.confirmation.acceptButtonStyleClass),de("icon",e.confirmation.acceptIcon)("label",e.acceptButtonLabel)("ngClass","p-confirm-popup-accept p-button-sm"),Lr("aria-label",e.acceptButtonLabel)}}const boe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Coe=function(i){return{value:"open",params:i}};function woe(i,t){if(1&i){const e=Di();Xe(0,"div",1),_n("click",function(r){return Lt(e),Pt(ye().onOverlayClick(r))})("@animation.start",function(r){return Lt(e),Pt(ye().onAnimationStart(r))})("@animation.done",function(r){return Lt(e),Pt(ye().onAnimationEnd(r))}),Xe(1,"div",2,3),ze(3,voe,1,3,"i",4),Xe(4,"span",5),bi(5),Ke()(),Xe(6,"div",6),ze(7,yoe,1,6,"button",7),ze(8,_oe,1,6,"button",7),Ke()()}if(2&i){const e=ye();Yr(e.styleClass),de("ngClass","p-confirm-popup p-component")("ngStyle",e.style)("@animation",Li(12,Coe,Ts(9,boe,e.showTransitionOptions,e.hideTransitionOptions))),we(3),de("ngIf",e.confirmation.icon),we(2),As(e.confirmation.message),we(2),de("ngIf",!1!==e.confirmation.rejectVisible),we(1),de("ngIf",!1!==e.confirmation.acceptVisible)}}let Y2=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.confirmationService=n,this.renderer=r,this.cd=s,this.config=o,this.overlayService=l,this.defaultFocus="accept",this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autoZIndex=!0,this.baseZIndex=0,this.subscription=this.confirmationService.requireConfirmation$.subscribe(u=>{u?u.key===this.key&&(this.confirmation=u,this.confirmation.accept&&(this.confirmation.acceptEvent=new qn,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new qn,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this.cd.markForCheck()}onAnimationStart(e){if("open"===e.toState){this.container=e.element,document.body.appendChild(this.container),this.align(),this.bindListeners();const n=this.getElementToFocus();n&&n.focus()}}onAnimationEnd(e){"void"===e.toState&&this.onContainerDestroy()}getElementToFocus(){switch(this.defaultFocus){case"accept":return Ft.findSingle(this.container,".p-confirm-popup-accept");case"reject":return Ft.findSingle(this.container,".p-confirm-popup-reject");case"none":return null}}align(){this.autoZIndex&&ic.set("overlay",this.container,this.config.zIndex.overlay),Ft.absolutePosition(this.container,this.confirmation.target);const e=Ft.getOffset(this.container),n=Ft.getOffset(this.confirmation.target);let r=0;e.left<n.left&&(r=n.left-e.left),this.container.style.setProperty("--overlayArrowLeft",`${r}px`),e.top<n.top&&Ft.addClass(this.container,"p-confirm-popup-flipped")}hide(){this.visible=!1}accept(){this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide()}reject(){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(),this.hide()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}bindListeners(){this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener()}unbindListeners(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}bindDocumentClickListener(){if(!this.documentClickListener){let e=Ft.isIOS()?"touchstart":"click";const n=this.el?this.el.nativeElement.ownerDocument:document;this.documentClickListener=this.renderer.listen(n,e,r=>{let s=this.confirmation.target;this.container!==r.target&&!this.container.contains(r.target)&&s!==r.target&&!s.contains(r.target)&&this.hide()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}onWindowResize(){this.visible&&!Ft.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.confirmation.target,()=>{this.visible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unsubscribeConfirmationSubscriptions(){this.confirmation&&(this.confirmation.acceptEvent&&this.confirmation.acceptEvent.unsubscribe(),this.confirmation.rejectEvent&&this.confirmation.rejectEvent.unsubscribe())}onContainerDestroy(){this.unbindListeners(),this.unsubscribeConfirmationSubscriptions(),this.autoZIndex&&ic.clear(this.container),this.confirmation=null,this.container=null}restoreAppend(){this.container&&document.body.removeChild(this.container),this.onContainerDestroy()}get acceptButtonLabel(){return this.confirmation.acceptLabel||this.config.getTranslation(vu.ACCEPT)}get rejectButtonLabel(){return this.confirmation.rejectLabel||this.config.getTranslation(vu.REJECT)}ngOnDestroy(){this.restoreAppend(),this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(rA),qt(h),qt(Yo),qt(Np),qt(oA))},i.\u0275cmp=Rr({type:i,selectors:[["p-confirmPopup"]],hostAttrs:[1,"p-element"],inputs:{key:"key",defaultFocus:"defaultFocus",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",visible:"visible"},decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-confirm-popup-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-popup-message"],[1,"p-confirm-popup-footer"],["type","button","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],[3,"ngClass"],["type","button","pButton","",3,"icon","label","ngClass","click"]],template:function(e,n){1&e&&ze(0,woe,9,14,"div",0),2&e&&de("ngIf",n.visible)},dependencies:[Mo,Fo,ea,x0],styles:['.p-confirm-popup{position:absolute;margin-top:10px;top:0;left:0}.p-confirm-popup-flipped{margin-top:0;margin-bottom:10px}.p-confirm-popup:after,.p-confirm-popup:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-confirm-popup:after{border-width:8px;margin-left:-8px}.p-confirm-popup:before{border-width:10px;margin-left:-10px}.p-confirm-popup-flipped:after,.p-confirm-popup-flipped:before{bottom:auto;top:100%}.p-confirm-popup.p-confirm-popup-flipped:after{border-bottom-color:transparent}.p-confirm-popup.p-confirm-popup-flipped:before{border-bottom-color:transparent}.p-confirm-popup .p-confirm-popup-content{display:flex;align-items:center}\n'],encapsulation:2,data:{animation:[cy("animation",[A0("void",Tl({transform:"scaleY(0.8)",opacity:0})),A0("open",Tl({transform:"translateY(0)",opacity:1})),Qu("void => open",Yc("{{showTransitionParams}}")),Qu("open => void",Yc("{{hideTransitionParams}}"))])]},changeDetection:0}),i})(),Aoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,cv]}),i})();function xoe(i,t){if(1&i){const e=Di();Xe(0,"span",13)(1,"input",14),_n("ngModelChange",function(r){return Lt(e),Pt(ye().newGraph=r)}),Ke(),Xe(2,"label",15),bi(3,"Name"),Ke(),Xe(4,"button",16),_n("click",function(){Lt(e);const r=ye();return Pt(r.openNew(r.newGraph))}),Ke()()}if(2&i){const e=ye();we(1),de("ngModel",e.newGraph)}}function Ioe(i,t){}function Soe(i,t){1&i&&(Xe(0,"div",17)(1,"h5",18),bi(2,"Manage Graphs"),Ke(),Xe(3,"span",19),Kn(4,"i",20)(5,"input",21),Ke()())}function Eoe(i,t){1&i&&(Xe(0,"tr")(1,"th",22),Kn(2,"p-tableHeaderCheckbox"),Ke(),Xe(3,"th",23),bi(4,"Label "),Kn(5,"p-sortIcon",24),Ke(),Xe(6,"th"),bi(7,"Action(s) "),Ke()())}function Toe(i,t){if(1&i){const e=Di();Xe(0,"tr")(1,"td"),Kn(2,"p-tableCheckbox",25),Ke(),Xe(3,"td"),bi(4),Ke(),Xe(5,"td")(6,"button",26),_n("click",function(){const s=Lt(e).$implicit;return Pt(ye().showImport(s))}),Ke(),Xe(7,"span"),bi(8,"\xa0"),Ke(),Xe(9,"button",27),_n("click",function(){const s=Lt(e).$implicit;return Pt(ye().gexf(s))}),Ke(),Xe(10,"span"),bi(11,"\xa0"),Ke(),Xe(12,"button",28),_n("click",function(r){const o=Lt(e).$implicit;return Pt(ye().confirm(r,o))}),Ke(),Xe(13,"span"),bi(14,"\xa0"),Ke(),Xe(15,"button",29),_n("click",function(){const s=Lt(e).$implicit;return Pt(ye().selectCytoscape(s))}),Ke(),Xe(16,"span"),bi(17,"\xa0"),Ke(),Xe(18,"button",30),_n("click",function(){const s=Lt(e).$implicit;return Pt(ye().selectThreejs(s))}),Ke()()()}if(2&i){const e=t.$implicit;we(2),de("value",e),we(2),As(e.label)}}function Moe(i,t){if(1&i){const e=Di();Xe(0,"p-button",31),_n("click",function(){return Lt(e),Pt(ye().displayExport=!1)}),Ke()}}const Doe=function(){return["label"]},Loe=function(){return{width:"50vw"}};let Poe=(()=>{class i{constructor(e,n,r,s,o,l,u){this.router=e,this.logger=n,this.graphsService=r,this.clipboardService=s,this.confirmationService=o,this.messageService=l,this.store=u,this.graph=void 0,this.graphs=[],this.displayImport=!1,this.displayExport=!1,this.exportData=[],this.exportDataHtml="",this.Delete="false",this.xml=[],this.graph$=this.store.select(p2),this.graphs$=this.store.select(f2),this.graph$.subscribe(p=>{!p||(this.graph=p)}),this.graphs$.subscribe(p=>{!p||(this.graphs=pr.map(p,v=>({id:v.id,style:v.style,rules:v.rules,label:v.label,nodes:v.nodes,edges:v.edges})))})}ngOnInit(){let e=this.graphsService.findAll();this.store.dispatch(fA({graphs:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteGraph(n)},reject:()=>{}})}deleteGraph(e){let n=this.graphsService.delete(e.id);this.store.dispatch(fA({graphs:n}))}showImport(e){this.displayImport=!0,this.selectedGraph=e}openNew(e){if(e){this.graphsService.store({id:e,style:"default",rules:"default",label:e,edges:[],nodes:[]},r=>{r.style="default",r.rules="default",r.label=e,r.edges=[],r.nodes=[]});let n=this.graphsService.findAll();this.store.dispatch(fA({graphs:n}))}}uploadHandler(e,n){n&&this.graphsService.uploadHandler(e.files[0],n.id,n.id).then(r=>{this.graphsService.store(r,s=>{s.style="default",s.rules="default",s.label=r.label,s.edges=[],s.nodes=[]}),this.displayImport=!1})}gexf(e){let n=this.graphsService.findOne(e.id+"");this.exportData=this.graphsService.toGexf(n),this.exportDataHtml=this.exportData.join("\n"),this.clipboardService.copyTextToClipboard(this.exportData.join("\n")),this.displayExport=!0}selectCytoscape(e){this.router.navigate(["graphs","cytoscape",e.id])}selectThreejs(e){this.router.navigate(["graphs","threejs",e.id])}}return i.\u0275fac=function(e){return new(e||i)(qt(Vd),qt(zh),qt(R1),qt(k1),qt(rA),qt(iv),qt(ny))},i.\u0275cmp=Rr({type:i,selectors:[["app-graph-selector"]],features:[Xo([iv])],decls:17,vars:17,consts:[[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"modal","header","visible","visibleChange"],["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","baseZIndex","visibleChange"],["pTemplate","footer"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","type","button","pTooltip","Import","tooltipPosition","top","icon","pi pi-cloud-upload",3,"click"],["pButton","","pRipple","","pTooltip","Copy to clipboard","tooltipPosition","top","icon","pi pi-cloud-download",3,"click"],["pButton","","pRipple","","pTooltip","Remove this graph","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph for 3D preview","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"]],template:function(e,n){1&e&&(Xe(0,"div",0)(1,"p-toolbar",1),ze(2,xoe,5,1,"ng-template",2),ze(3,Ioe,0,0,"ng-template",3),Ke(),Kn(4,"p-toast"),Xe(5,"p-table",4,5),ze(7,Soe,6,0,"ng-template",6),ze(8,Eoe,8,0,"ng-template",7),ze(9,Toe,19,2,"ng-template",8),Ke()(),Kn(10,"p-confirmPopup"),Xe(11,"p-dialog",9),_n("visibleChange",function(s){return n.displayImport=s}),Xe(12,"p-fileUpload",10),_n("uploadHandler",function(s){return n.uploadHandler(s,n.selectedGraph)}),Ke()(),Xe(13,"p-dialog",11),_n("visibleChange",function(s){return n.displayExport=s}),Xe(14,"pre"),bi(15),Ke(),ze(16,Moe,1,0,"ng-template",12),Ke()),2&e&&(we(5),de("value",n.graphs)("rows",10)("paginator",!0)("globalFilterFields",Oo(15,Doe))("rowHover",!0)("showCurrentPageReport",!0),we(6),CI("header","Import ",null==n.selectedGraph?null:n.selectedGraph.label,""),de("modal",!0)("visible",n.displayImport),we(1),de("customUpload",!0),we(1),To(Oo(16,Loe)),de("visible",n.displayExport)("baseZIndex",1e4),we(2),As(n.exportDataHtml))},dependencies:[l_,hl,G2,W2,j2,$2,x0,$1,Z1,ov,LA,hC,m4,X2,C0,cC,ay,Y2]}),i})();var Roe=W(5595),koe=W.n(Roe),Ooe=W(3424),Foe=W.n(Ooe),Noe=W(756),Boe=W.n(Noe);const zoe=["myGraph"];function Voe(i,t){if(1&i&&(Xe(0,"pre"),bi(1),Ke()),2&i){const e=t.$implicit;we(1),jc("",e,"\n")}}let Uoe=(()=>{class i{constructor(e,n,r,s){this.http=e,this.logger=n,this.graphsService=r,this.store=s,this.subscription=null,this.graph=new(koe()),this.display=!1,this.xml=[],this.graphs$=this.store.select(f2),this.graphs$.subscribe(o=>{o&&0!==o.length&&(this.graph.clear(),pr.each(o[0].nodes,u=>{this.graph.addNode(u.id,{x:u.x,y:u.y,label:u.label,color:u.color,size:u.size,uid:u.id})}),pr.each(o[0].edges,u=>{u.source&&u.target?this.graph.addEdge(u.source,u.target,{label:u.label,type:"arrow",size:5,uid:u.id,source:u.source,target:u.target}):this.logger.info(u)}),new(Foe())(this.graph,{isNodeFixed:(u,p)=>p.highlighted}))})}ngOnInit(){let e=this.graphsService.findAll();this.store.dispatch(fA({graphs:e}))}ngAfterViewInit(){let e=null,n=!1;this.renderer=new(Boe())(this.graph,this.myGraph?.nativeElement,{renderEdgeLabels:!0}),this.renderer.on("downNode",r=>{n=!0,e=r.node,this.graph.setNodeAttribute(e,"highlighted",!0)}),this.renderer.getMouseCaptor().on("mousemovebody",r=>{if(!n||!e||!this.renderer)return;const s=this.renderer.viewportToGraph(r);this.graph.setNodeAttribute(e,"x",s.x),this.graph.setNodeAttribute(e,"y",s.y),r.preventSigmaDefault(),r.original.preventDefault(),r.original.stopPropagation()}),this.renderer.getMouseCaptor().on("mouseup",()=>{e&&this.graph.removeNodeAttribute(e,"highlighted"),n=!1,e=null}),this.renderer.getMouseCaptor().on("mousedown",()=>{this.renderer?.getCustomBBox()||this.renderer?.setCustomBBox(this.renderer.getBBox())})}gexf(e){this.xml=[],this.xml.push('<?xml version="1.0" encoding="UTF-8"?>'),this.xml.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),this.xml.push('<meta lastmodifieddate="2009-03-20">'),this.xml.push("<creator>Gexf.net</creator>"),this.xml.push("<description>A hello world! file</description>"),this.xml.push("</meta>"),this.xml.push(`<graph mode="static" defaultedgetype="directed" style="${e}">`),this.xml.push("<nodes>"),this.graph.forEachNode(n=>{let r=this.graph.getNodeAttribute(n,"uid"),s=this.graph.getNodeAttribute(n,"label"),o=this.graph.getNodeAttribute(n,"x"),l=this.graph.getNodeAttribute(n,"y");this.xml.push(`<node id="${r}" label="${s}" x="${o}" y="${l}" />`)}),this.xml.push("</nodes>"),this.xml.push("<edges>"),this.graph.forEachEdge(n=>{let r=this.graph.getEdgeAttribute(n,"uid"),s=this.graph.getEdgeAttribute(n,"label"),o=this.graph.getEdgeAttribute(n,"source"),l=this.graph.getEdgeAttribute(n,"target");this.xml.push(`<edge id="${r}" source="${o}" target="${l}" label="${s}" />`)}),this.xml.push("</edges>"),this.xml.push("</graph>"),this.xml.push("</gexf>"),this.display=!0}uploadHandler(e){let n=new FileReader;n.addEventListener("loadend",()=>{}),n.readAsText(e.files[0])}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(t1),qt(zh),qt(R1),qt(ny))},i.\u0275cmp=Rr({type:i,selectors:[["app-graph"]],viewQuery:function(e,n){if(1&e&&Hr(zoe,5),2&e){let r;tr(r=nr())&&(n.myGraph=r.first)}},hostBindings:function(e,n){1&e&&_n("beforeunload",function(s){return n.ngOnDestroy(s)},0,li)},decls:6,vars:3,consts:[["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","visibleChange"],[4,"ngFor","ngForOf"],["label","Gexf",3,"onClick"],[1,"sigma-container"],["myGraph",""]],template:function(e,n){1&e&&(Xe(0,"p-fileUpload",0),_n("uploadHandler",function(s){return n.uploadHandler(s)}),Ke(),Xe(1,"p-dialog",1),_n("visibleChange",function(s){return n.display=s}),ze(2,Voe,2,1,"pre",2),Ke(),Xe(3,"p-button",3),_n("onClick",function(){return n.gexf("default")}),Ke(),Kn(4,"div",4,5)),2&e&&(de("customUpload",!0),we(1),de("visible",n.display),we(1),de("ngForOf",n.xml))},dependencies:[mu,$1,Z1,m4],styles:[".sigma-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}"]}),i})();const v4={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Q1;const Hoe=new Uint8Array(16);function Goe(){if(!Q1&&(Q1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Q1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Q1(Hoe)}const mh=[];for(let i=0;i<256;++i)mh.push((i+256).toString(16).slice(1));const _4=function Woe(i,t,e){if(v4.randomUUID&&!t&&!i)return v4.randomUUID();const n=(i=i||{}).random||(i.rng||Goe)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=n[r];return t}return function y4(i,t=0){return(mh[i[t+0]]+mh[i[t+1]]+mh[i[t+2]]+mh[i[t+3]]+"-"+mh[i[t+4]]+mh[i[t+5]]+"-"+mh[i[t+6]]+mh[i[t+7]]+"-"+mh[i[t+8]]+mh[i[t+9]]+"-"+mh[i[t+10]]+mh[i[t+11]]+mh[i[t+12]]+mh[i[t+13]]+mh[i[t+14]]+mh[i[t+15]]).toLowerCase()}(n)};var J1=W(6864);class K2 extends class $oe extends class joe{ready(t){console.debug(`layout ready, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}stop(t){console.debug(`layout stop, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}}{constructor(){super(...arguments),this.zoom=null,this.pan=null,this.animate=!1,this.animationDuration=500,this.animationEasing=void 0,this.animateFilter=(t,e)=>!0}}{constructor(){super(...arguments),this.fit=!0,this.padding=30,this.boundingBox=null,this.avoidOverlap=!0,this.nodeDimensionsIncludeLabels=!1,this.spacingFactor=1.75,this.sort=null,this.transform=(t,e)=>e}}class qoe extends K2{constructor(){super(...arguments),this.name="circle",this.startAngle=1.5*Math.PI,this.sweep=null,this.clockwise=!0}}class Xoe{constructor(){this.name="concentric",this.startAngle=1.5*Math.PI,this.equidistant=!1,this.minNodeSpacing=10,this.boundingBox=null,this.height=null,this.width=null,this.spacingFactor=null}concentric(t){return 0}levelWidth(t){return 0}}class Yoe extends K2{constructor(){super(...arguments),this.name="breadthfirst",this.directed=!1,this.circle=!1,this.maximal=!1,this.grid=!1,this.nodeDimensionsIncludeLabels=!1}}class Koe extends K2{constructor(){super(...arguments),this.name="cose",this.animationThreshold=250,this.refresh=20,this.randomize=!1,this.componentSpacing=40,this.nodeOverlap=4e3,this.nestingFactor=1.2,this.gravity=1,this.numIter=1e3,this.initialTemp=1e3,this.coolingFactor=.99,this.minTemp=1,this.nodeRepulsion=t=>2048,this.idealEdgeLength=t=>32,this.edgeElasticity=t=>32}}const PA=oC("[SysTags List/API] Retrieve Styles Success",{_as:"props",_p:void 0}),b4=oC("[SysTags List/API] Retrieve Style Success",{_as:"props",_p:void 0});let C4=(()=>{class i extends M1{constructor(e,n){super(),this._logger=e,this._storage=n,this.init("styles",this._storage,this._logger)}}return i.\u0275fac=function(e){return new(e||i)(ai(zh),ai(bA))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var w4=W(397);let A4=(()=>{class i extends M1{constructor(e,n,r){super(),this._logger=e,this._storage=n,this.base16=r,this.init("rules",this._storage,this._logger)}load(e,n){this.store({id:e,rules:n},r=>{r.rules=n})}jsondataEngine(e,n,r,s){let o=this.findOne(e)?.rules;if(o){let l=[];pr.each(o,p=>{l.push({name:p.name,sets:p.sets,asserts:p.asserts})});let u=[];return pr.each(l,p=>{let v=[];pr.each(p.sets,w=>{let I=w4(w).evaluate(n);I.length||(I=[I]),this._logger.info(I),pr.each(I,T=>{v.push(T)})}),pr.each(v,w=>{let I=!1;pr.each(p.asserts,T=>{w4(T).evaluate(w)&&(I=!0)}),u.push({fact:w,ruleResult:{name:p.name,result:I}})})}),new Promise(p=>{p({success:pr.filter(u,v=>v.ruleResult.result),failure:pr.filter(u,v=>!v.ruleResult.result),treenodes:pr.map(l,v=>({data:{id:v.name,fail:pr.filter(pr.map(u,w=>({name:w.ruleResult.name,result:w.ruleResult.result})),w=>w.name===v.name&&0==w.result),success:pr.filter(pr.map(u,w=>({name:w.ruleResult.name,result:w.ruleResult.result})),w=>w.name===v.name&&1==w.result)},children:pr.filter(pr.map(u,w=>({data:{uid:this.base16.encode(w.fact.data.id),id:w.fact.data.id,alias:w.fact.data.alias,label:w.fact.data.label,tag:w.fact.data.tag,rule:w.ruleResult.name,valid:w.ruleResult.result},children:[]})),w=>w.data.rule===v.name&&(w.data.valid===r||w.data.valid===s))}))})})}return new Promise(l=>{l({success:[],failure:[],treenodes:[]})})}}return i.\u0275fac=function(e){return new(e||i)(ai(zh),ai(bA),ai(v2))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();new Tz.Parser;let x4=(()=>{class i extends M1{constructor(e,n){super(),this._logger=e,this._storage=n,this.init("preferences",this._storage,this._logger),this.findOne("default")||this.store({id:"default",full:!1,grid:!1,debug:!1,applyRules:!1,info:!1,maxWidth:16384,maxHeight:16384},r=>{})}apply(){var n;this.findOne("default")?.debug?((n=this._logger.getConfigSnapshot()).level=Dc.DEBUG,this._logger.updateConfig(n)):((n=this._logger.getConfigSnapshot()).level=Dc.INFO,this._logger.updateConfig(n))}}return i.\u0275fac=function(e){return new(e||i)(ai(zh),ai(bA))},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Qoe=["sublist"],Joe=["menuitem"],eae=function(i){return{"p-hidden":i}};function tae(i,t){if(1&i&&Kn(0,"li",5,6),2&i){const e=ye().$implicit;de("ngClass",Li(1,eae,!1===e.visible))}}function nae(i,t){if(1&i&&Kn(0,"span",17),2&i){const e=ye(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function iae(i,t){if(1&i&&(Xe(0,"span",18),bi(1),Ke()),2&i){const e=ye(3).$implicit;we(1),As(e.label)}}function rae(i,t){1&i&&Kn(0,"span",19),2&i&&de("innerHTML",ye(3).$implicit.label,Ka)}function sae(i,t){if(1&i&&(Xe(0,"span",20),bi(1),Ke()),2&i){const e=ye(3).$implicit;de("ngClass",e.badgeStyleClass),we(1),As(e.badge)}}function oae(i,t){1&i&&Kn(0,"span",21)}const I4=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function aae(i,t){if(1&i){const e=Di();Xe(0,"a",11),_n("click",function(r){Lt(e),ye();const s=Po(1),o=ye(),l=o.$implicit,u=o.index,p=ye();return Pt(p.onItemClick(r,l,s,p.getKey(u)))}),ze(1,nae,1,2,"span",12),ze(2,iae,2,1,"span",13),ze(3,rae,1,1,"ng-template",null,14,Mc),ze(5,sae,2,2,"span",15),ze(6,oae,1,0,"span",16),Ke()}if(2&i){const e=Po(4),n=ye(2),r=n.$implicit,s=n.index,o=ye();de("target",r.target)("ngClass",Li(13,I4,r.disabled)),Lr("href",r.url?r.url:null,dh)("title",r.title)("id",r.id)("tabindex",r.disabled?null:"0")("aria-haspopup",null!=o.item.items)("aria-expanded",o.isActive(o.getKey(s))),we(1),de("ngIf",r.icon),we(1),de("ngIf",!1!==r.escape)("ngIfElse",e),we(3),de("ngIf",r.badge),we(1),de("ngIf",r.items)}}function lae(i,t){if(1&i&&Kn(0,"span",17),2&i){const e=ye(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function cae(i,t){if(1&i&&(Xe(0,"span",18),bi(1),Ke()),2&i){const e=ye(3).$implicit;we(1),As(e.label)}}function uae(i,t){1&i&&Kn(0,"span",19),2&i&&de("innerHTML",ye(3).$implicit.label,Ka)}function dae(i,t){if(1&i&&(Xe(0,"span",20),bi(1),Ke()),2&i){const e=ye(3).$implicit;de("ngClass",e.badgeStyleClass),we(1),As(e.badge)}}function hae(i,t){1&i&&Kn(0,"span",21)}const fae=function(){return{exact:!1}};function pae(i,t){if(1&i){const e=Di();Xe(0,"a",22),_n("click",function(r){Lt(e),ye();const s=Po(1),o=ye(),l=o.$implicit,u=o.index,p=ye();return Pt(p.onItemClick(r,l,s,p.getKey(u)))}),ze(1,lae,1,2,"span",12),ze(2,cae,2,1,"span",13),ze(3,uae,1,1,"ng-template",null,23,Mc),ze(5,dae,2,2,"span",15),ze(6,hae,1,0,"span",16),Ke()}if(2&i){const e=Po(4),n=ye(2).$implicit;de("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||Oo(20,fae))("target",n.target)("ngClass",Li(21,I4,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),Lr("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),we(1),de("ngIf",n.icon),we(1),de("ngIf",!1!==n.escape)("ngIfElse",e),we(3),de("ngIf",n.badge),we(1),de("ngIf",n.items)}}function gae(i,t){if(1&i){const e=Di();Xe(0,"p-contextMenuSub",24),_n("leafClick",function(){return Lt(e),Pt(ye(3).onLeafClick())}),Ke()}if(2&i){const e=ye(2),n=e.index,r=e.$implicit;de("parentItemKey",ye().getKey(n))("item",r)}}const mae=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function vae(i,t){if(1&i){const e=Di();Xe(0,"li",7,6),_n("mouseenter",function(r){Lt(e);const s=ye(),o=s.$implicit,l=s.index,u=ye();return Pt(u.onItemMouseEnter(r,o,u.getKey(l)))})("mouseleave",function(r){Lt(e);const s=ye().$implicit;return Pt(ye().onItemMouseLeave(r,s))}),ze(2,aae,7,15,"a",8),ze(3,pae,7,23,"a",9),ze(4,gae,1,2,"p-contextMenuSub",10),Ke()}if(2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye();Yr(n.styleClass),de("ngClass",Ts(9,mae,s.isActive(s.getKey(r)),!1===n.visible))("ngStyle",n.style)("tooltipOptions",n.tooltipOptions),Lr("data-ik",s.getKey(r)),we(2),de("ngIf",!n.routerLink),we(1),de("ngIf",n.routerLink),we(1),de("ngIf",n.items)}}function yae(i,t){if(1&i&&(ze(0,tae,2,3,"li",3),ze(1,vae,5,12,"li",4)),2&i){const e=t.$implicit;de("ngIf",e.separator),we(1),de("ngIf",!e.separator)}}const _ae=function(i){return{"p-submenu-list":i}},bae=["container"];let Cae=(()=>{class i{constructor(e){this.leafClick=new qn,this.contextMenu=e}ngOnInit(){this.activeItemKeyChangeSubscription=this.contextMenu.contextMenuService.activeItemKeyChange$.pipe(function Zoe(i){return wn((t,e)=>{Nn(i).subscribe(An(e,()=>e.complete(),ee)),!e.closed&&t.subscribe(e)})}(this.contextMenu.ngDestroy$)).subscribe(e=>{this.activeItemKey=e,this.isActive(this.parentItemKey)&&Ft.hasClass(this.sublistViewChild.nativeElement,"p-submenu-list-active")&&this.contextMenu.positionSubmenu(this.sublistViewChild.nativeElement),this.contextMenu.cd.markForCheck()})}onItemMouseEnter(e,n,r){if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),n.disabled)this.activeItemKey=null;else{if(n.items){let s=Ft.findSingle(e.currentTarget,".p-submenu-list");Ft.addClass(s,"p-submenu-list-active")}this.contextMenu.contextMenuService.changeKey(r)}}onItemMouseLeave(e,n){n.disabled||this.contextMenu.el.nativeElement.contains(e.toElement)&&(n.items&&this.contextMenu.removeActiveFromSubLists(e.currentTarget),this.root||this.contextMenu.contextMenuService.changeKey(this.parentItemKey))}onItemClick(e,n,r,s){if(n.disabled)e.preventDefault();else{if(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items){let o=Ft.findSingle(r,".p-submenu-list");o&&(this.isActive(s)&&Ft.hasClass(o,"p-submenu-list-active")?this.contextMenu.removeActiveFromSubLists(r):Ft.addClass(o,"p-submenu-list-active"),this.contextMenu.contextMenuService.changeKey(s))}n.items||this.onLeafClick()}}onLeafClick(){this.root&&this.contextMenu.hide(),this.leafClick.emit()}getKey(e){return this.root?String(e):this.parentItemKey+"_"+e}isActive(e){return this.activeItemKey&&(this.activeItemKey.startsWith(e+"_")||this.activeItemKey===e)}}return i.\u0275fac=function(e){return new(e||i)(qt(Zr(()=>S4)))},i.\u0275cmp=Rr({type:i,selectors:[["p-contextMenuSub"]],viewQuery:function(e,n){if(1&e&&(Hr(Qoe,5),Hr(Joe,5)),2&e){let r;tr(r=nr())&&(n.sublistViewChild=r.first),tr(r=nr())&&(n.menuitemViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",parentItemKey:"parentItemKey"},outputs:{leafClick:"leafClick"},decls:3,vars:4,consts:[[3,"ngClass"],["sublist",""],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["pTooltip","","role","none",3,"ngClass","ngStyle","class","tooltipOptions","mouseenter","mouseleave",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["menuitem",""],["pTooltip","","role","none",3,"ngClass","ngStyle","tooltipOptions","mouseenter","mouseleave"],["pRipple","",3,"target","ngClass","click",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click",4,"ngIf"],[3,"parentItemKey","item","leafClick",4,"ngIf"],["pRipple","",3,"target","ngClass","click"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi pi-angle-right",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi","pi-angle-right"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click"],["htmlRouteLabel",""],[3,"parentItemKey","item","leafClick"]],template:function(e,n){1&e&&(Xe(0,"ul",0,1),ze(2,yae,2,2,"ng-template",2),Ke()),2&e&&(de("ngClass",Li(2,_ae,!n.root)),we(2),de("ngForOf",n.root?n.item:n.item.items))},dependencies:[Mo,mu,Fo,ea,rC,$D,Ju,ov,i],encapsulation:2}),i})(),S4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.contextMenuService=o,this.config=l,this.autoZIndex=!0,this.baseZIndex=0,this.triggerEvent="contextmenu",this.onShow=new qn,this.onHide=new qn,this.ngDestroy$=new Ze,this.preventDocumentDefault=!1}ngAfterViewInit(){this.global?this.triggerEventListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document",this.triggerEvent,n=>{this.show(n),n.preventDefault()}):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,this.triggerEvent,e=>{this.show(e),e.preventDefault()})),this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):Ft.appendChild(this.containerViewChild.nativeElement,this.appendTo))}show(e){this.clearActiveItem(),this.position(e),this.moveOnTop(),this.containerViewChild.nativeElement.style.display="block",this.preventDocumentDefault=!0,Ft.fadeIn(this.containerViewChild.nativeElement,250),this.bindGlobalListeners(),e&&e.preventDefault(),this.onShow.emit()}hide(){this.containerViewChild.nativeElement.style.display="none",this.autoZIndex&&ic.clear(this.containerViewChild.nativeElement),this.clearActiveItem(),this.unbindGlobalListeners(),this.onHide.emit()}moveOnTop(){this.autoZIndex&&this.containerViewChild&&"block"!==this.containerViewChild.nativeElement.style.display&&ic.set("menu",this.containerViewChild.nativeElement,this.baseZIndex+this.config.zIndex.menu)}toggle(e){this.containerViewChild.nativeElement.offsetParent?this.hide():this.show(e)}position(e){if(e){let n=e.pageX+1,r=e.pageY+1,s=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetWidth:Ft.getHiddenElementOuterWidth(this.containerViewChild.nativeElement),o=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetHeight:Ft.getHiddenElementOuterHeight(this.containerViewChild.nativeElement),l=Ft.getViewport();n+s-document.body.scrollLeft>l.width&&(n-=s),r+o-document.body.scrollTop>l.height&&(r-=o),n<document.body.scrollLeft&&(n=document.body.scrollLeft),r<document.body.scrollTop&&(r=document.body.scrollTop),this.containerViewChild.nativeElement.style.left=n+"px",this.containerViewChild.nativeElement.style.top=r+"px"}}positionSubmenu(e){let n=e.parentElement.parentElement,r=Ft.getViewport(),s=e.offsetParent?e.offsetWidth:Ft.getHiddenElementOuterWidth(e),o=e.offsetHeight?e.offsetHeight:Ft.getHiddenElementOuterHeight(e),l=Ft.getOuterWidth(n.children[0]),u=Ft.getOuterHeight(n.children[0]),p=Ft.getOffset(n.parentElement);e.style.zIndex=++Ft.zindex,parseInt(p.top)+u+o>r.height-Ft.calculateScrollbarHeight()?(e.style.removeProperty("top"),e.style.bottom="0px"):(e.style.removeProperty("bottom"),e.style.top="0px"),e.style.left=parseInt(p.left)+l+s>r.width-Ft.calculateScrollbarWidth()?-s+"px":l+"px"}isItemMatched(e){return Ft.hasClass(e,"p-menuitem")&&!Ft.hasClass(e.children[0],"p-disabled")}findNextItem(e,n){let r=e.nextElementSibling;if(r)return this.isItemMatched(r)?r:this.findNextItem(r,n);{let s=e.parentElement.children[0];return this.isItemMatched(s)?s:n?null:this.findNextItem(s,!0)}}findPrevItem(e,n){let r=e.previousElementSibling;if(r)return this.isItemMatched(r)?r:this.findPrevItem(r,n);{let s=e.parentElement.children[e.parentElement.children.length-1];return this.isItemMatched(s)?s:n?null:this.findPrevItem(s,!0)}}getActiveItem(){let e=this.contextMenuService.activeItemKey;return null==e?null:Ft.findSingle(this.containerViewChild.nativeElement,'.p-menuitem[data-ik="'+e+'"]')}clearActiveItem(){this.contextMenuService.activeItemKey&&(this.removeActiveFromSubLists(this.containerViewChild.nativeElement),this.contextMenuService.reset())}removeActiveFromSubLists(e){let n=Ft.find(e,".p-submenu-list-active");for(let r of n)Ft.removeClass(r,"p-submenu-list-active")}removeActiveFromSublist(e){e&&Ft.findSingle(e,".p-submenu-list")&&Ft.hasClass(e,"p-submenu-list-active")&&Ft.removeClass(e,"p-submenu-list-active")}bindGlobalListeners(){if(!this.documentClickListener){const e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!n.ctrlKey&&2!==n.button&&this.hide()}),this.documentTriggerListener=this.renderer.listen(e,this.triggerEvent,n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!this.preventDocumentDefault&&this.hide(),this.preventDocumentDefault=!1})}this.zone.runOutsideAngular(()=>{this.windowResizeListener||(this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener))}),this.documentKeydownListener||(this.documentKeydownListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{let r=this.getActiveItem();switch(n.key){case"ArrowDown":if(r)this.removeActiveFromSublist(r),r=this.findNextItem(r);else{let s=Ft.findSingle(this.containerViewChild.nativeElement,".p-menuitem-link").parentElement;r=this.isItemMatched(s)?s:this.findNextItem(s)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowUp":if(r)this.removeActiveFromSublist(r),r=this.findPrevItem(r);else{let s=Ft.findSingle(this.containerViewChild.nativeElement,"ul"),o=s.children[s.children.length-1];r=this.isItemMatched(o)?o:this.findPrevItem(o)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowRight":if(r){let s=Ft.findSingle(r,".p-submenu-list");s&&(Ft.addClass(s,"p-submenu-list-active"),r=Ft.findSingle(s,".p-menuitem-link:not(.p-disabled)").parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"ArrowLeft":if(r){let s=r.parentElement;s&&Ft.hasClass(s,"p-submenu-list-active")&&(Ft.removeClass(s,"p-submenu-list-active"),r=s.parentElement.parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"Escape":this.hide(),n.preventDefault();break;case"Enter":r&&this.handleItemClick(n,this.findModelItemFromKey(this.contextMenuService.activeItemKey),r),n.preventDefault()}}))}findModelItemFromKey(e){return null!=e&&this.model?e.split("_").reduce((r,s)=>r?r.items[s]:this.model[s],null):null}handleItemClick(e,n,r){if(n&&!n.disabled){if(n.command&&n.command({originalEvent:e,item:n}),n.items){let s=Ft.findSingle(r,".p-submenu-list");s&&(Ft.hasClass(s,"p-submenu-list-active")?this.removeActiveFromSubLists(r):(Ft.addClass(s,"p-submenu-list-active"),this.positionSubmenu(s)))}n.items||this.hide()}}unbindGlobalListeners(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null),this.documentTriggerListener&&(this.documentTriggerListener(),this.documentTriggerListener=null),this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null),this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}onWindowResize(e){this.containerViewChild.nativeElement.offsetParent&&this.hide()}isOutsideClicked(e){return!(this.containerViewChild.nativeElement.isSameNode(e.target)||this.containerViewChild.nativeElement.contains(e.target))}ngOnDestroy(){this.unbindGlobalListeners(),this.triggerEventListener&&this.triggerEventListener(),this.containerViewChild&&this.autoZIndex&&ic.clear(this.containerViewChild.nativeElement),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement),this.ngDestroy$.next(!0),this.ngDestroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(h),qt(Yo),qt(ua),qt(UB),qt(Np))},i.\u0275cmp=Rr({type:i,selectors:[["p-contextMenu"]],viewQuery:function(e,n){if(1&e&&Hr(bae,5),2&e){let r;tr(r=nr())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",global:"global",target:"target",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",triggerEvent:"triggerEvent"},outputs:{onShow:"onShow",onHide:"onHide"},decls:3,vars:6,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"item","root"]],template:function(e,n){1&e&&(Xe(0,"div",0,1),Kn(2,"p-contextMenuSub",2),Ke()),2&e&&(Yr(n.styleClass),de("ngClass","p-contextmenu p-component")("ngStyle",n.style),we(2),de("item",n.model)("root",!0))},dependencies:[Mo,ea,Cae],styles:[".p-contextmenu{position:absolute;display:none}.p-contextmenu ul{margin:0;padding:0;list-style:none}.p-contextmenu .p-submenu-list{position:absolute;min-width:100%;z-index:1;display:none}.p-contextmenu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-contextmenu .p-menuitem-text{line-height:1}.p-contextmenu .p-menuitem{position:relative}.p-contextmenu .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-contextmenu .p-menuitem-active>p-contextmenusub>.p-submenu-list.p-submenu-list-active{display:block!important}\n"],encapsulation:2,changeDetection:0}),i})(),wae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({providers:[UB],imports:[io,s_,yu,av,s_,av]}),i})(),Aae=(()=>{class i{constructor(e,n,r,s){this.el=e,this.ngModel=n,this.control=r,this.cd=s,this.onResize=new qn}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(e){this.autoResize&&this.resize(e)}onBlur(e){this.autoResize&&this.resize(e)}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(ay,8),qt(sv,8),qt(Yo))},i.\u0275dir=fs({type:i,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(e,n){1&e&&_n("input",function(s){return n.onInput(s)})("focus",function(s){return n.onFocus(s)})("blur",function(s){return n.onBlur(s)}),2&e&&Fp("p-filled",n.filled)("p-inputtextarea-resizable",n.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),i})(),xae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();const Iae=["container"];function Sae(i,t){1&i&&qi(0)}function Eae(i,t){if(1&i){const e=Di();Xe(0,"div",5),_n("mousedown",function(r){Lt(e);const s=ye().index;return Pt(ye().onGutterMouseDown(r,s))})("touchstart",function(r){Lt(e);const s=ye().index;return Pt(ye().onGutterTouchStart(r,s))}),Kn(1,"div",6),Ke()}2&i&&de("ngStyle",ye(2).gutterStyle())}function Tae(i,t){if(1&i&&(Xe(0,"div",0),ze(1,Sae,1,0,"ng-container",3),Ke(),ze(2,Eae,2,1,"div",4)),2&i){const e=t.$implicit,n=t.index,r=ye();Yr(r.panelStyleClass),de("ngClass",r.panelContainerClass())("ngStyle",r.panelStyle),we(1),de("ngTemplateOutlet",e),we(1),de("ngIf",n!==r.panels.length-1)}}let E4=(()=>{class i{constructor(e,n){this.cd=e,this.el=n,this.stateStorage="session",this.stateKey=null,this.layout="horizontal",this.gutterSize=4,this.minSizes=[],this.onResizeEnd=new qn,this.onResizeStart=new qn,this.nested=!1,this.panels=[],this.dragging=!1,this.mouseMoveListener=null,this.mouseUpListener=null,this.touchMoveListener=null,this.touchEndListener=null,this.size=null,this.gutterElement=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.nextPanelSize=null,this.prevPanelSize=null,this._panelSizes=[],this.prevPanelIndex=null}get panelSizes(){return this._panelSizes}set panelSizes(e){if(this._panelSizes=e,this.el&&this.el.nativeElement&&this.panels.length>0){let n=[...this.el.nativeElement.children[0].children].filter(s=>Ft.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"})}}ngOnInit(){this.nested=this.isNested()}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.panels.push(e.template)})}ngAfterViewInit(){if(this.panels&&this.panels.length){let e=!1;if(this.isStateful()&&(e=this.restoreState()),!e){let n=[...this.el.nativeElement.children[0].children].filter(s=>Ft.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),this._panelSizes=r}}}resizeStart(e,n){this.gutterElement=e.currentTarget,this.size=this.horizontal()?Ft.getWidth(this.containerViewChild.nativeElement):Ft.getHeight(this.containerViewChild.nativeElement),this.dragging=!0,this.startPos=this.horizontal()?e.pageX||e.changedTouches[0].pageX:e.pageY||e.changedTouches[0].pageY,this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,this.prevPanelSize=100*(this.horizontal()?Ft.getOuterWidth(this.prevPanelElement,!0):Ft.getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal()?Ft.getOuterWidth(this.nextPanelElement,!0):Ft.getOuterHeight(this.nextPanelElement,!0))/this.size,this.prevPanelIndex=n,Ft.addClass(this.gutterElement,"p-splitter-gutter-resizing"),Ft.addClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.onResizeStart.emit({originalEvent:e,sizes:this._panelSizes})}onResize(e){let n;n=this.horizontal()?100*e.pageX/this.size-100*this.startPos/this.size:100*e.pageY/this.size-100*this.startPos/this.size;let r=this.prevPanelSize+n,s=this.nextPanelSize-n;this.validateResize(r,s)&&(this.prevPanelElement.style.flexBasis="calc("+r+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+s+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this._panelSizes[this.prevPanelIndex]=r,this._panelSizes[this.prevPanelIndex+1]=s)}resizeEnd(e){this.isStateful()&&this.saveState(),this.onResizeEnd.emit({originalEvent:e,sizes:this._panelSizes}),Ft.removeClass(this.gutterElement,"p-splitter-gutter-resizing"),Ft.removeClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.clear()}onGutterMouseDown(e,n){this.resizeStart(e,n),this.bindMouseListeners()}onGutterTouchStart(e,n){e.cancelable&&(this.resizeStart(e,n),this.bindTouchListeners(),e.preventDefault())}onGutterTouchEnd(e){this.resizeEnd(e),this.unbindTouchListeners(),e.cancelable&&e.preventDefault()}validateResize(e,n){return!(this.minSizes.length>=1&&this.minSizes[0]&&this.minSizes[0]>e||this.minSizes.length>1&&this.minSizes[1]&&this.minSizes[1]>n)}bindMouseListeners(){this.mouseMoveListener||(this.mouseMoveListener=e=>this.onResize(e),document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=e=>{this.resizeEnd(e),this.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))}bindTouchListeners(){this.touchMoveListener||(this.touchMoveListener=e=>this.onResize(e.changedTouches[0]),document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=e=>{this.resizeEnd(e),this.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))}unbindMouseListeners(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)}unbindTouchListeners(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)}clear(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null}isNested(){if(this.el.nativeElement){let e=this.el.nativeElement.parentElement;for(;e&&!Ft.hasClass(e,"p-splitter");)e=e.parentElement;return null!==e}return!1}isStateful(){return null!=this.stateKey}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}saveState(){this.getStorage().setItem(this.stateKey,JSON.stringify(this._panelSizes))}restoreState(){const n=this.getStorage().getItem(this.stateKey);return!!n&&(this._panelSizes=JSON.parse(n),[...this.containerViewChild.nativeElement.children].filter(s=>Ft.hasClass(s,"p-splitter-panel")).forEach((s,o)=>{s.style.flexBasis="calc("+this._panelSizes[o]+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),!0)}containerClass(){return{"p-splitter p-component":!0,"p-splitter-horizontal":"horizontal"===this.layout,"p-splitter-vertical":"vertical"===this.layout}}panelContainerClass(){return{"p-splitter-panel":!0,"p-splitter-panel-nested":!0}}gutterStyle(){return this.horizontal()?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}}horizontal(){return"horizontal"===this.layout}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo),qt(oi))},i.\u0275cmp=Rr({type:i,selectors:[["p-splitter"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&Hr(Iae,5),2&e){let r;tr(r=nr())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(e,n){2&e&&Fp("p-splitter-panel-nested",n.nested)},inputs:{styleClass:"styleClass",panelStyleClass:"panelStyleClass",style:"style",panelStyle:"panelStyle",stateStorage:"stateStorage",stateKey:"stateKey",layout:"layout",gutterSize:"gutterSize",minSizes:"minSizes",panelSizes:"panelSizes"},outputs:{onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],["ngFor","",3,"ngForOf"],[4,"ngTemplateOutlet"],["class","p-splitter-gutter",3,"ngStyle","mousedown","touchstart",4,"ngIf"],[1,"p-splitter-gutter",3,"ngStyle","mousedown","touchstart"],[1,"p-splitter-gutter-handle"]],template:function(e,n){1&e&&(Xe(0,"div",0,1),ze(2,Tae,3,6,"ng-template",2),Ke()),2&e&&(Yr(n.styleClass),de("ngClass",n.containerClass())("ngStyle",n.style),we(2),de("ngForOf",n.panels))},dependencies:[Mo,mu,Fo,El,ea],styles:[".p-splitter{display:flex;flex-wrap:nowrap}.p-splitter-vertical{flex-direction:column}.p-splitter-panel{flex-grow:1}.p-splitter-panel-nested{display:flex}.p-splitter-panel p-splitter{flex-grow:1}.p-splitter-panel .p-splitter{flex-grow:1;border:0 none}.p-splitter-gutter{flex-grow:0;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:col-resize}.p-splitter-horizontal.p-splitter-resizing{cursor:col-resize;-webkit-user-select:none;user-select:none}.p-splitter-horizontal>.p-splitter-gutter>.p-splitter-gutter-handle{height:24px;width:100%}.p-splitter-horizontal>.p-splitter-gutter{cursor:col-resize}.p-splitter-vertical.p-splitter-resizing{cursor:row-resize;-webkit-user-select:none;user-select:none}.p-splitter-vertical>.p-splitter-gutter{cursor:row-resize}.p-splitter-vertical>.p-splitter-gutter>.p-splitter-gutter-handle{width:24px;height:100%}\n"],encapsulation:2,changeDetection:0}),i})(),Mae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za]}),i})();function Dae(i,t){1&i&&qi(0)}function Lae(i,t){if(1&i&&(is(0),ze(1,Dae,1,0,"ng-container",3),rs()),2&i){const e=ye(2);we(1),de("ngTemplateOutlet",e.contentTemplate)}}function Pae(i,t){if(1&i&&(Xe(0,"div",1),Mu(1),ze(2,Lae,2,1,"ng-container",2),Ke()),2&i){const e=ye();de("hidden",!e.selected),Lr("id",e.id)("aria-hidden",!e.selected)("aria-labelledby",e.id+"-label"),we(2),de("ngIf",e.contentTemplate&&(e.cache?e.loaded:e.selected))}}const T4=["*"],Rae=["content"],kae=["navbar"],Oae=["prevBtn"],Fae=["nextBtn"],Nae=["inkbar"];function Bae(i,t){if(1&i){const e=Di();Xe(0,"button",12,13),_n("click",function(){return Lt(e),Pt(ye().navBackward())}),Kn(2,"span",14),Ke()}}function zae(i,t){1&i&&Kn(0,"span",24),2&i&&de("ngClass",ye(3).$implicit.leftIcon)}function Vae(i,t){1&i&&Kn(0,"span",25),2&i&&de("ngClass",ye(3).$implicit.rightIcon)}function Uae(i,t){if(1&i&&(is(0),ze(1,zae,1,1,"span",21),Xe(2,"span",22),bi(3),Ke(),ze(4,Vae,1,1,"span",23),rs()),2&i){const e=ye(2).$implicit;we(1),de("ngIf",e.leftIcon),we(2),As(e.header),we(1),de("ngIf",e.rightIcon)}}function Hae(i,t){1&i&&qi(0)}function Gae(i,t){if(1&i){const e=Di();Xe(0,"span",26),_n("click",function(r){Lt(e);const s=ye(2).$implicit;return Pt(ye().close(r,s))}),Ke()}}const Wae=function(i,t){return{"p-highlight":i,"p-disabled":t}};function jae(i,t){if(1&i){const e=Di();Xe(0,"li",16)(1,"a",17),_n("click",function(r){Lt(e);const s=ye().$implicit;return Pt(ye().open(r,s))})("keydown.enter",function(r){Lt(e);const s=ye().$implicit;return Pt(ye().open(r,s))}),ze(2,Uae,5,3,"ng-container",18),ze(3,Hae,1,0,"ng-container",19),ze(4,Gae,1,0,"span",20),Ke()()}if(2&i){const e=ye().$implicit;Yr(e.headerStyleClass),de("ngClass",Ts(16,Wae,e.selected,e.disabled))("ngStyle",e.headerStyle),we(1),de("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),Lr("id",e.id+"-label")("aria-selected",e.selected)("aria-controls",e.id)("aria-selected",e.selected)("tabindex",e.disabled?null:"0"),we(1),de("ngIf",!e.headerTemplate),we(1),de("ngTemplateOutlet",e.headerTemplate),we(1),de("ngIf",e.closable)}}function $ae(i,t){1&i&&ze(0,jae,5,19,"li",15),2&i&&de("ngIf",!t.$implicit.closed)}function qae(i,t){if(1&i){const e=Di();Xe(0,"button",27,28),_n("click",function(){return Lt(e),Pt(ye().navForward())}),Kn(2,"span",29),Ke()}}const Xae=function(i){return{"p-tabview p-component":!0,"p-tabview-scrollable":i}};let Yae=0,M4=(()=>{class i{constructor(e,n,r){this.viewContainer=n,this.cd=r,this.cache=!0,this.tooltipPosition="top",this.tooltipPositionStyle="absolute",this.id="p-tabpanel-"+Yae++,this.tabView=e}ngAfterContentInit(){this.templates.forEach(e=>{"header"===e.getType()?this.headerTemplate=e.template:this.contentTemplate=e.template})}get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||this.cd.detectChanges(),e&&(this.loaded=!0)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.tabView.cd.markForCheck()}get header(){return this._header}set header(e){this._header=e,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(e){this._leftIcon=e,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(e){this._rightIcon=e,this.tabView.cd.markForCheck()}ngOnDestroy(){this.view=null}}return i.\u0275fac=function(e){return new(e||i)(qt(Zr(()=>D4)),qt(yg),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-tabPanel"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:"cache",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},ngContentSelectors:T4,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(e,n){1&e&&(Xf(),ze(0,Pae,3,5,"div",0)),2&e&&de("ngIf",!n.closed)},dependencies:[Fo,El],encapsulation:2}),i})(),D4=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.orientation="top",this.onChange=new qn,this.onClose=new qn,this.activeIndexChange=new qn,this.backwardIsDisabled=!0,this.forwardIsDisabled=!1}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(e=>{this.initTabs()})}ngAfterViewChecked(){this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe()}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}open(e,n){if(n.disabled)e&&e.preventDefault();else{if(!n.selected){let r=this.findSelectedTab();r&&(r.selected=!1),this.tabChanged=!0,n.selected=!0;let s=this.findTabIndex(n);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(s),this.onChange.emit({originalEvent:e,index:s}),this.updateScrollBar(s)}e&&e.preventDefault()}}close(e,n){this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(n),close:()=>{this.closeTab(n)}}):(this.closeTab(n),this.onClose.emit({originalEvent:e,index:this.findTabIndex(n)})),e.stopPropagation()}closeTab(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(let n=0;n<this.tabs.length;n++){let r=this.tabs[n];if(!r.closed&&!e.disabled){r.selected=!0;break}}}e.closed=!0}}findSelectedTab(){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}findTabIndex(e){let n=-1;for(let r=0;r<this.tabs.length;r++)if(this.tabs[r]==e){n=r;break}return n}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(e))}updateInkBar(){if(this.navbar){const e=Ft.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!e)return;this.inkbar.nativeElement.style.width=Ft.getWidth(e)+"px",this.inkbar.nativeElement.style.left=Ft.getOffset(e).left-Ft.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(e){this.navbar.nativeElement.children[e].scrollIntoView({block:"nearest"})}updateButtonState(){const e=this.content.nativeElement,{scrollLeft:n,scrollWidth:r}=e,s=Ft.getWidth(e);this.backwardIsDisabled=0===n,this.forwardIsDisabled=parseInt(n)===r-s}onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((e,n)=>n?e+Ft.getWidth(n):e,0)}navBackward(){const e=this.content.nativeElement,n=Ft.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft-n;e.scrollLeft=r<=0?0:r}navForward(){const e=this.content.nativeElement,n=Ft.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft+n,s=e.scrollWidth-n;e.scrollLeft=r>=s?s:r}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-tabView"]],contentQueries:function(e,n,r){if(1&e&&dl(r,M4,4),2&e){let s;tr(s=nr())&&(n.tabPanels=s)}},viewQuery:function(e,n){if(1&e&&(Hr(Rae,5),Hr(kae,5),Hr(Oae,5),Hr(Fae,5),Hr(Nae,5)),2&e){let r;tr(r=nr())&&(n.content=r.first),tr(r=nr())&&(n.navbar=r.first),tr(r=nr())&&(n.prevBtn=r.first),tr(r=nr())&&(n.nextBtn=r.first),tr(r=nr())&&(n.inkbar=r.first)}},hostAttrs:[1,"p-element"],inputs:{orientation:"orientation",style:"style",styleClass:"styleClass",controlClose:"controlClose",scrollable:"scrollable",activeIndex:"activeIndex"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:T4,decls:13,vars:9,consts:[[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["content",""],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],["prevBtn",""],[1,"pi","pi-chevron-left"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown.enter"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tabview-close pi pi-times",3,"click",4,"ngIf"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-close","pi","pi-times",3,"click"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"],["nextBtn",""],[1,"pi","pi-chevron-right"]],template:function(e,n){1&e&&(Xf(),Xe(0,"div",0)(1,"div",1),ze(2,Bae,3,0,"button",2),Xe(3,"div",3,4),_n("scroll",function(s){return n.onScroll(s)}),Xe(5,"ul",5,6),ze(7,$ae,1,1,"ng-template",7),Kn(8,"li",8,9),Ke()(),ze(10,qae,3,0,"button",10),Ke(),Xe(11,"div",11),Mu(12),Ke()()),2&e&&(Yr(n.styleClass),de("ngClass",Li(7,Xae,n.scrollable))("ngStyle",n.style),we(2),de("ngIf",n.scrollable&&!n.backwardIsDisabled),we(5),de("ngForOf",n.tabs),we(3),de("ngIf",n.scrollable&&!n.forwardIsDisabled))},dependencies:[Mo,mu,Fo,El,ea,ov,Ju],styles:[".p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:flex;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Kae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za,av,yu,Za]}),i})();const L4=function(i){return{"p-treenode-droppoint-active":i}};function Zae(i,t){if(1&i){const e=Di();Xe(0,"li",4),_n("drop",function(r){return Lt(e),Pt(ye(2).onDropPoint(r,-1))})("dragover",function(r){return Lt(e),Pt(ye(2).onDropPointDragOver(r))})("dragenter",function(r){return Lt(e),Pt(ye(2).onDropPointDragEnter(r,-1))})("dragleave",function(r){return Lt(e),Pt(ye(2).onDropPointDragLeave(r))}),Ke()}if(2&i){const e=ye(2);de("ngClass",Li(1,L4,e.draghoverPrev))}}const Qae=function(i){return{"p-checkbox-disabled":i}},Jae=function(i,t){return{"p-highlight":i,"p-indeterminate":t}},ele=function(i,t){return{"pi-check":i,"pi-minus":t}};function tle(i,t){if(1&i&&(Xe(0,"div",13)(1,"div",14),Kn(2,"span",15),Ke()()),2&i){const e=ye(3);de("ngClass",Li(4,Qae,!1===e.node.selectable)),Lr("aria-checked",e.isSelected()),we(1),de("ngClass",Ts(6,Jae,e.isSelected(),e.node.partialSelected)),we(1),de("ngClass",Ts(9,ele,e.isSelected(),e.node.partialSelected))}}function nle(i,t){1&i&&Kn(0,"span"),2&i&&Yr(ye(3).getIcon())}function ile(i,t){if(1&i&&(Xe(0,"span"),bi(1),Ke()),2&i){const e=ye(3);we(1),As(e.node.label)}}function rle(i,t){1&i&&qi(0)}const P4=function(i){return{$implicit:i}};function sle(i,t){if(1&i&&(Xe(0,"span"),ze(1,rle,1,0,"ng-container",16),Ke()),2&i){const e=ye(3);we(1),de("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",Li(2,P4,e.node))}}function ole(i,t){if(1&i&&Kn(0,"p-treeNode",19),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=ye(4);de("node",e)("parentNode",o.node)("firstChild",n)("lastChild",r)("index",s)("itemSize",o.itemSize)("level",o.level+1)}}function ale(i,t){if(1&i&&(Xe(0,"ul",17),ze(1,ole,1,7,"p-treeNode",18),Ke()),2&i){const e=ye(3);Nh("display",e.node.expanded?"block":"none"),we(1),de("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const lle=function(i,t){return["p-treenode",i,t]},R4=function(i){return{height:i}},cle=function(i,t,e){return{"p-treenode-selectable":i,"p-treenode-dragover":t,"p-highlight":e}},ule=function(i,t){return{"pi-chevron-right":i,"pi-chevron-down":t}};function dle(i,t){if(1&i){const e=Di();Xe(0,"li",5)(1,"div",6),_n("click",function(r){return Lt(e),Pt(ye(2).onNodeClick(r))})("contextmenu",function(r){return Lt(e),Pt(ye(2).onNodeRightClick(r))})("touchend",function(){return Lt(e),Pt(ye(2).onNodeTouchEnd())})("drop",function(r){return Lt(e),Pt(ye(2).onDropNode(r))})("dragover",function(r){return Lt(e),Pt(ye(2).onDropNodeDragOver(r))})("dragenter",function(r){return Lt(e),Pt(ye(2).onDropNodeDragEnter(r))})("dragleave",function(r){return Lt(e),Pt(ye(2).onDropNodeDragLeave(r))})("dragstart",function(r){return Lt(e),Pt(ye(2).onDragStart(r))})("dragend",function(r){return Lt(e),Pt(ye(2).onDragStop(r))})("keydown",function(r){return Lt(e),Pt(ye(2).onKeyDown(r))}),Xe(2,"button",7),_n("click",function(r){return Lt(e),Pt(ye(2).toggle(r))}),Kn(3,"span",8),Ke(),ze(4,tle,3,12,"div",9),ze(5,nle,1,2,"span",3),Xe(6,"span",10),ze(7,ile,2,1,"span",11),ze(8,sle,2,4,"span",11),Ke()(),ze(9,ale,2,4,"ul",12),Ke()}if(2&i){const e=ye(2);de("ngClass",Ts(18,lle,e.node.styleClass||"",e.isLeaf()?"p-treenode-leaf":""))("ngStyle",Li(21,R4,e.itemSize+"px")),we(1),Nh("padding-left",e.level*e.indentation+"rem"),de("draggable",e.tree.draggableNodes)("ngClass",Yu(23,cle,e.tree.selectionMode&&!1!==e.node.selectable,e.draghoverNode,e.isSelected())),Lr("tabindex",0)("aria-posinset",e.index+1)("aria-expanded",e.node.expanded)("aria-selected",e.isSelected())("aria-label",e.node.label),we(1),Lr("aria-label",e.tree.togglerAriaLabel),we(1),de("ngClass",Ts(27,ule,!e.node.expanded,e.node.expanded)),we(1),de("ngIf","checkbox"==e.tree.selectionMode),we(1),de("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),we(2),de("ngIf",!e.tree.getTemplateForNode(e.node)),we(1),de("ngIf",e.tree.getTemplateForNode(e.node)),we(1),de("ngIf",!e.tree.virtualScroll&&e.node.children&&e.node.expanded)}}function hle(i,t){if(1&i){const e=Di();Xe(0,"li",4),_n("drop",function(r){return Lt(e),Pt(ye(2).onDropPoint(r,1))})("dragover",function(r){return Lt(e),Pt(ye(2).onDropPointDragOver(r))})("dragenter",function(r){return Lt(e),Pt(ye(2).onDropPointDragEnter(r,1))})("dragleave",function(r){return Lt(e),Pt(ye(2).onDropPointDragLeave(r))}),Ke()}if(2&i){const e=ye(2);de("ngClass",Li(1,L4,e.draghoverNext))}}const k4=function(i){return{"p-treenode-connector-line":i}};function fle(i,t){if(1&i&&(Xe(0,"td",25)(1,"table",26)(2,"tbody")(3,"tr"),Kn(4,"td",27),Ke(),Xe(5,"tr"),Kn(6,"td",27),Ke()()()()),2&i){const e=ye(3);we(4),de("ngClass",Li(2,k4,!e.firstChild)),we(2),de("ngClass",Li(4,k4,!e.lastChild))}}const ple=function(i,t){return{"pi-plus":i,"pi-minus":t}};function gle(i,t){if(1&i){const e=Di();Xe(0,"span",28),_n("click",function(r){return Lt(e),Pt(ye(3).toggle(r))}),Ke()}if(2&i){const e=ye(3);de("ngClass",Ts(2,ple,!e.node.expanded,e.node.expanded)),Lr("aria-label",e.tree.togglerAriaLabel)}}function mle(i,t){1&i&&Kn(0,"span"),2&i&&Yr(ye(3).getIcon())}function vle(i,t){if(1&i&&(Xe(0,"span"),bi(1),Ke()),2&i){const e=ye(3);we(1),As(e.node.label)}}function yle(i,t){1&i&&qi(0)}function _le(i,t){if(1&i&&(Xe(0,"span"),ze(1,yle,1,0,"ng-container",16),Ke()),2&i){const e=ye(3);we(1),de("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",Li(2,P4,e.node))}}function ble(i,t){if(1&i&&Kn(0,"p-treeNode",32),2&i){const n=t.first,r=t.last;de("node",t.$implicit)("firstChild",n)("lastChild",r)}}function Cle(i,t){if(1&i&&(Xe(0,"td",29)(1,"div",30),ze(2,ble,1,3,"p-treeNode",31),Ke()()),2&i){const e=ye(3);Nh("display",e.node.expanded?"table-cell":"none"),we(2),de("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const wle=function(i){return{"p-treenode-collapsed":i}},Ale=function(i,t){return{"p-treenode-selectable":i,"p-highlight":t}};function xle(i,t){if(1&i){const e=Di();Xe(0,"table")(1,"tbody")(2,"tr"),ze(3,fle,7,6,"td",20),Xe(4,"td",21)(5,"div",22),_n("click",function(r){return Lt(e),Pt(ye(2).onNodeClick(r))})("contextmenu",function(r){return Lt(e),Pt(ye(2).onNodeRightClick(r))})("touchend",function(){return Lt(e),Pt(ye(2).onNodeTouchEnd())})("keydown",function(r){return Lt(e),Pt(ye(2).onNodeKeydown(r))}),ze(6,gle,1,5,"span",23),ze(7,mle,1,2,"span",3),Xe(8,"span",10),ze(9,vle,2,1,"span",11),ze(10,_le,2,4,"span",11),Ke()()(),ze(11,Cle,3,4,"td",24),Ke()()()}if(2&i){const e=ye(2);Yr(e.node.styleClass),we(3),de("ngIf",!e.root),we(1),de("ngClass",Li(10,wle,!e.node.expanded)),we(1),de("ngClass",Ts(12,Ale,e.tree.selectionMode,e.isSelected())),we(1),de("ngIf",!e.isLeaf()),we(1),de("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),we(2),de("ngIf",!e.tree.getTemplateForNode(e.node)),we(1),de("ngIf",e.tree.getTemplateForNode(e.node)),we(1),de("ngIf",e.node.children&&e.node.expanded)}}function Ile(i,t){if(1&i&&(ze(0,Zae,1,3,"li",1),ze(1,dle,10,30,"li",2),ze(2,hle,1,3,"li",1),ze(3,xle,12,15,"table",3)),2&i){const e=ye();de("ngIf",e.tree.droppableNodes),we(1),de("ngIf",!e.tree.horizontal),we(1),de("ngIf",e.tree.droppableNodes&&e.lastChild),we(1),de("ngIf",e.tree.horizontal)}}const Sle=["filter"],Ele=["scroller"],Tle=["wrapper"];function Mle(i,t){if(1&i&&(Xe(0,"div",9),Kn(1,"i"),Ke()),2&i){const e=ye(2);we(1),Yr("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function Dle(i,t){1&i&&qi(0)}function Lle(i,t){if(1&i){const e=Di();Xe(0,"div",10)(1,"input",11,12),_n("keydown.enter",function(r){return r.preventDefault()})("input",function(r){return Lt(e),Pt(ye(2)._filter(r.target.value))}),Ke(),Kn(3,"span",13),Ke()}if(2&i){const e=ye(2);we(1),Lr("placeholder",e.filterPlaceholder)}}function Ple(i,t){if(1&i&&Kn(0,"p-treeNode",20),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=ye(2).options,l=ye(3);de("level",e.level)("rowNode",e)("node",e.node)("firstChild",n)("lastChild",r)("index",l.getIndex(o,s))("itemSize",o.itemSize)("indentation",l.indentation)}}function Rle(i,t){if(1&i&&(Xe(0,"ul",18),ze(1,Ple,1,8,"p-treeNode",19),Ke()),2&i){const e=ye(),n=e.options,r=e.$implicit,s=ye(3);To(n.contentStyle),de("ngClass",n.contentStyleClass),Lr("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledBy),we(1),de("ngForOf",r)("ngForTrackBy",s.trackBy)}}function kle(i,t){1&i&&ze(0,Rle,2,7,"ul",17),2&i&&de("ngIf",t.$implicit)}function Ole(i,t){1&i&&qi(0)}const Fle=function(i){return{options:i}};function Nle(i,t){if(1&i&&ze(0,Ole,1,0,"ng-container",22),2&i){const e=t.options;de("ngTemplateOutlet",ye(4).loaderTemplate)("ngTemplateOutletContext",Li(2,Fle,e))}}function Ble(i,t){1&i&&(is(0),ze(1,Nle,1,4,"ng-template",21),rs())}function zle(i,t){if(1&i){const e=Di();Xe(0,"p-scroller",14,15),_n("onScroll",function(r){return Lt(e),Pt(ye(2).onScroll.emit(r))})("onScrollIndexChange",function(r){return Lt(e),Pt(ye(2).onScrollIndexChange.emit(r))})("onLazyLoad",function(r){return Lt(e),Pt(ye(2).onLazyLoad.emit(r))}),ze(2,kle,1,1,"ng-template",16),ze(3,Ble,2,0,"ng-container",7),Ke()}if(2&i){const e=ye(2);To(Li(7,R4,e.scrollHeight)),de("items",e.serializedValue)("itemSize",e.virtualScrollItemSize||e._virtualNodeHeight)("lazy",e.lazy)("options",e.virtualScrollOptions),we(3),de("ngIf",e.loaderTemplate)}}function Vle(i,t){if(1&i&&Kn(0,"p-treeNode",28),2&i){const n=t.first,r=t.last,s=t.index;de("node",t.$implicit)("firstChild",n)("lastChild",r)("index",s)("level",0)}}function Ule(i,t){if(1&i&&(Xe(0,"ul",26),ze(1,Vle,1,5,"p-treeNode",27),Ke()),2&i){const e=ye(3);Lr("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),we(1),de("ngForOf",e.getRootNode())("ngForTrackBy",e.trackBy)}}function Hle(i,t){if(1&i&&(is(0),Xe(1,"div",23,24),ze(3,Ule,2,4,"ul",25),Ke(),rs()),2&i){const e=ye(2);we(1),Nh("max-height",e.scrollHeight),we(2),de("ngIf",e.getRootNode())}}function Gle(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(3);we(1),jc(" ",e.emptyMessageLabel," ")}}function Wle(i,t){1&i&&qi(0,null,31)}function jle(i,t){if(1&i&&(Xe(0,"div",29),ze(1,Gle,2,1,"ng-container",30),ze(2,Wle,2,0,"ng-container",4),Ke()),2&i){const e=ye(2);we(1),de("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),we(1),de("ngTemplateOutlet",e.emptyMessageTemplate)}}function $le(i,t){1&i&&qi(0)}const qle=function(i,t,e,n){return{"p-tree p-component":!0,"p-tree-selectable":i,"p-treenode-dragover":t,"p-tree-loading":e,"p-tree-flex-scrollable":n}};function Xle(i,t){if(1&i){const e=Di();Xe(0,"div",2),_n("drop",function(r){return Lt(e),Pt(ye().onDrop(r))})("dragover",function(r){return Lt(e),Pt(ye().onDragOver(r))})("dragenter",function(){return Lt(e),Pt(ye().onDragEnter())})("dragleave",function(r){return Lt(e),Pt(ye().onDragLeave(r))}),ze(1,Mle,2,2,"div",3),ze(2,Dle,1,0,"ng-container",4),ze(3,Lle,4,1,"div",5),ze(4,zle,4,9,"p-scroller",6),ze(5,Hle,4,3,"ng-container",7),ze(6,jle,3,3,"div",8),ze(7,$le,1,0,"ng-container",4),Ke()}if(2&i){const e=ye();Yr(e.styleClass),de("ngClass",_f(11,qle,e.selectionMode,e.dragHover,e.loading,"flex"===e.scrollHeight))("ngStyle",e.style),we(1),de("ngIf",e.loading),we(1),de("ngTemplateOutlet",e.headerTemplate),we(1),de("ngIf",e.filter),we(1),de("ngIf",e.virtualScroll),we(1),de("ngIf",!e.virtualScroll),we(1),de("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),we(1),de("ngTemplateOutlet",e.footerTemplate)}}function Yle(i,t){1&i&&qi(0)}function Kle(i,t){if(1&i&&(Xe(0,"div",34),Kn(1,"i"),Ke()),2&i){const e=ye(2);we(1),Yr("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function Zle(i,t){if(1&i&&(Xe(0,"table"),Kn(1,"p-treeNode",35),Ke()),2&i){const e=ye(2);we(1),de("node",e.value[0])("root",!0)}}function Qle(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(3);we(1),jc(" ",e.emptyMessageLabel," ")}}function Jle(i,t){1&i&&qi(0,null,31)}function ece(i,t){if(1&i&&(Xe(0,"div",29),ze(1,Qle,2,1,"ng-container",30),ze(2,Jle,2,0,"ng-container",4),Ke()),2&i){const e=ye(2);we(1),de("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),we(1),de("ngTemplateOutlet",e.emptyMessageTemplate)}}function tce(i,t){1&i&&qi(0)}const nce=function(i){return{"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":i}};function ice(i,t){if(1&i&&(Xe(0,"div",32),ze(1,Yle,1,0,"ng-container",4),ze(2,Kle,2,2,"div",33),ze(3,Zle,2,2,"table",7),ze(4,ece,3,3,"div",8),ze(5,tce,1,0,"ng-container",4),Ke()),2&i){const e=ye();Yr(e.styleClass),de("ngClass",Li(9,nce,e.selectionMode))("ngStyle",e.style),we(1),de("ngTemplateOutlet",e.headerTemplate),we(1),de("ngIf",e.loading),we(1),de("ngIf",e.value&&e.value[0]),we(1),de("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),we(1),de("ngTemplateOutlet",e.footerTemplate)}}let rce=(()=>{class i{constructor(e){this.tree=e}ngOnInit(){this.node.parent=this.parentNode,this.parentNode&&this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value))}getIcon(){let e;return e=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children.length?this.node.expandedIcon:this.node.collapsedIcon,i.ICON_CLASS+" "+e}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(e){this.node.expanded?this.collapse(e):this.expand(e)}expand(e){this.node.expanded=!0,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeExpand.emit({originalEvent:e,node:this.node})}collapse(e){this.node.expanded=!1,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeCollapse.emit({originalEvent:e,node:this.node})}onNodeClick(e){this.tree.onNodeClick(e,this.node)}onNodeKeydown(e){13===e.which&&this.tree.onNodeClick(e,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(e){this.tree.onNodeRightClick(e,this.node)}isSelected(){return this.tree.isSelected(this.node)}onDropPoint(e,n){e.preventDefault();let r=this.tree.dragNode,l=this.tree.dragNodeTree!==this.tree||1===n||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(r,this.node,this.tree.dragNodeScope)&&l){let u={...this.createDropPointEventMetadata(n)};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index,accept:()=>{this.processPointDrop(u)}}):(this.processPointDrop(u),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(e){let n=e.dropNode.parent?e.dropNode.parent.children:this.tree.value;e.dragNodeSubNodes.splice(e.dragNodeIndex,1);let r=this.index;e.position<0?(r=e.dragNodeSubNodes===n?e.dragNodeIndex>e.index?e.index:e.index-1:e.index,n.splice(r,0,e.dragNode)):(r=n.length,n.push(e.dragNode)),this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:e.dragNodeIndex})}createDropPointEventMetadata(e){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:e}}onDropPointDragOver(e){e.dataTransfer.dropEffect="move",e.preventDefault()}onDropPointDragEnter(e,n){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(n<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(e){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(e){this.tree.draggableNodes&&!1!==this.node.draggable?(e.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):e.preventDefault()}onDragStop(e){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(e){e.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(e.preventDefault(),e.stopPropagation())}onDropNode(e){if(this.tree.droppableNodes&&!1!==this.node.droppable){let n=this.tree.dragNode;if(this.tree.allowDrop(n,this.node,this.tree.dragNodeScope)){let r={...this.createDropNodeEventMetadata()};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index,accept:()=>{this.processNodeDrop(r)}}):(this.processNodeDrop(r),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index}))}}e.preventDefault(),e.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(e){let n=e.dragNodeIndex;e.dragNodeSubNodes.splice(n,1),e.dropNode.children?e.dropNode.children.push(e.dragNode):e.dropNode.children=[e.dragNode],this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:n})}onDropNodeDragEnter(e){this.tree.droppableNodes&&!1!==this.node.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(e){if(this.tree.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>=Math.floor(n.top+n.height)||e.y<n.top)&&(this.draghoverNode=!1)}}onKeyDown(e){const n=e.target.parentElement.parentElement;if(!("P-TREENODE"!==n.nodeName||this.tree.contextMenu&&"block"===this.tree.contextMenu.containerViewChild.nativeElement.style.display))switch(e.which){case 40:const r=this.tree.droppableNodes?n.children[1].children[1]:n.children[0].children[1];if(r&&r.children.length>0)this.focusNode(r.children[0]);else{const s=n.nextElementSibling;if(s)this.focusNode(s);else{let o=this.findNextSiblingOfAncestor(n);o&&this.focusNode(o)}}e.preventDefault();break;case 38:if(n.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(n.previousElementSibling));else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 39:!this.node.expanded&&!this.tree.isNodeLeaf(this.node)&&this.expand(e),e.preventDefault();break;case 37:if(this.node.expanded)this.collapse(e);else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 13:this.tree.onNodeClick(e,this.node),e.preventDefault()}}findNextSiblingOfAncestor(e){let n=this.getParentNodeElement(e);return n?n.nextElementSibling?n.nextElementSibling:this.findNextSiblingOfAncestor(n):null}findLastVisibleDescendant(e){const r=Array.from(e.children).find(s=>Ft.hasClass(s,"p-treenode")).children[1];return r&&r.children.length>0?this.findLastVisibleDescendant(r.children[r.children.length-1]):e}getParentNodeElement(e){const n=e.parentElement.parentElement.parentElement;return"P-TREENODE"===n.tagName?n:null}focusNode(e){this.tree.droppableNodes?e.children[1].children[0].focus():e.children[0].children[0].focus()}}return i.ICON_CLASS="p-treenode-icon ",i.\u0275fac=function(e){return new(e||i)(qt(Zr(()=>O4)))},i.\u0275cmp=Rr({type:i,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:"root",index:"index",firstChild:"firstChild",lastChild:"lastChild",level:"level",indentation:"indentation",itemSize:"itemSize"},decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave"],[3,"ngClass","ngStyle"],["role","treeitem",1,"p-treenode-content",3,"draggable","ngClass","click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","keydown"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[1,"p-tree-toggler-icon","pi","pi-fw",3,"ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],[4,"ngIf"],["class","p-treenode-children","style","display: none;","role","group",3,"display",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon","pi",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"p-treenode-children",2,"display","none"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"ngClass","click","contextmenu","touchend","keydown"],["class","p-tree-toggler pi pi-fw",3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"display",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[3,"ngClass"],[1,"p-tree-toggler","pi","pi-fw",3,"ngClass","click"],[1,"p-treenode-children-container"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(e,n){1&e&&ze(0,Ile,4,4,"ng-template",0),2&e&&de("ngIf",n.node)},dependencies:[Mo,mu,Fo,El,ea,Ju,i],encapsulation:2}),i})(),O4=(()=>{class i{constructor(e,n,r){this.el=e,this.dragDropService=n,this.config=r,this.layout="vertical",this.metaKeySelection=!0,this.propagateSelectionUp=!0,this.propagateSelectionDown=!0,this.loadingIcon="pi pi-spinner",this.emptyMessage="",this.filterBy="label",this.filterMode="lenient",this.lazy=!1,this.indentation=1.5,this.trackBy=(s,o)=>o,this.selectionChange=new qn,this.onNodeSelect=new qn,this.onNodeUnselect=new qn,this.onNodeExpand=new qn,this.onNodeCollapse=new qn,this.onNodeContextMenuSelect=new qn,this.onNodeDrop=new qn,this.onLazyLoad=new qn,this.onScroll=new qn,this.onScrollIndexChange=new qn,this.onFilter=new qn}get virtualNodeHeight(){return this._virtualNodeHeight}set virtualNodeHeight(e){this._virtualNodeHeight=e,console.warn("The virtualNodeHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(e=>{this.dragNodeTree=e.tree,this.dragNode=e.node,this.dragNodeSubNodes=e.subNodes,this.dragNodeIndex=e.index,this.dragNodeScope=e.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(e=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(e){e.value&&this.updateSerializedValue()}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(vu.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"empty":this.emptyMessageTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;default:this.templateMap[e.name]=e.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let o of n){o.parent=e;const l={node:o,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(l),l.visible&&o.expanded&&this.serializeNodes(o,o.children,r+1,l.visible)}}onNodeClick(e,n){let r=e.target;if(!Ft.hasClass(r,"p-tree-toggler")&&!Ft.hasClass(r,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===n.selectable||this.hasFilteredNodes()&&!(n=this.getNodeWithKey(n.key,this.value)))return;let s=this.findIndexInSelection(n),o=s>=0;if(this.isCheckboxSelectionMode())o?(this.propagateSelectionDown?this.propagateDown(n,!1):this.selection=this.selection.filter((l,u)=>u!=s),this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown?this.propagateDown(n,!0):this.selection=[...this.selection||[],n],this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n}));else if(!this.nodeTouched&&this.metaKeySelection){let u=e.metaKey||e.ctrlKey;o&&u?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((p,v)=>v!=s),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.isMultipleSelectionMode()&&(this.selection=u&&this.selection||[],this.selection=[...this.selection,n],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:e,node:n}))}else this.isSingleSelectionMode()?o?(this.selection=null,this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=n,this.onNodeSelect.emit({originalEvent:e,node:n})):o?(this.selection=this.selection.filter((u,p)=>p!=s),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=[...this.selection||[],n],this.onNodeSelect.emit({originalEvent:e,node:n})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(e,n){if(this.contextMenu){let r=e.target;if(r.className&&0===r.className.indexOf("p-tree-toggler"))return;this.findIndexInSelection(n)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.selectionChange.emit([n])),this.contextMenu.show(e),this.onNodeContextMenuSelect.emit({originalEvent:e,node:n})}}findIndexInSelection(e){let n=-1;if(this.selectionMode&&this.selection)if(this.isSingleSelectionMode())n=this.selection.key&&this.selection.key===e.key||this.selection==e?0:-1;else for(let r=0;r<this.selection.length;r++){let s=this.selection[r];if(s.key&&s.key===e.key||s==e){n=r;break}}return n}syncNodeOption(e,n,r,s){const o=this.hasFilteredNodes()?this.getNodeWithKey(e.key,n):null;o&&(o[r]=s||e[r])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}getNodeWithKey(e,n){for(let r of n){if(r.key===e)return r;if(r.children){let s=this.getNodeWithKey(e,r.children);if(s)return s}}}propagateUp(e,n){if(e.children&&e.children.length){let s=0,o=!1;for(let l of e.children)this.isSelected(l)?s++:l.partialSelected&&(o=!0);if(n&&s==e.children.length)this.selection=[...this.selection||[],e],e.partialSelected=!1;else{if(!n){let l=this.findIndexInSelection(e);l>=0&&(this.selection=this.selection.filter((u,p)=>p!=l))}e.partialSelected=!!(o||s>0&&s!=e.children.length)}this.syncNodeOption(e,this.filteredNodes,"partialSelected")}let r=e.parent;r&&this.propagateUp(r,n)}propagateDown(e,n){let r=this.findIndexInSelection(e);if(n&&-1==r?this.selection=[...this.selection||[],e]:!n&&r>-1&&(this.selection=this.selection.filter((s,o)=>o!=r)),e.partialSelected=!1,this.syncNodeOption(e,this.filteredNodes,"partialSelected"),e.children&&e.children.length)for(let s of e.children)this.propagateDown(s,n)}isSelected(e){return-1!=this.findIndexInSelection(e)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(e){return 0!=e.leaf&&!(e.children&&e.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(e){return this.templateMap?e.type?this.templateMap[e.type]:this.templateMap.default:null}onDragOver(e){this.droppableNodes&&(!this.value||0===this.value.length)&&(e.dataTransfer.dropEffect="move",e.preventDefault())}onDrop(e){if(this.droppableNodes&&(!this.value||0===this.value.length)){e.preventDefault();let n=this.dragNode;if(this.allowDrop(n,null,this.dragNodeScope)){let r=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r,accept:()=>{this.processTreeDrop(n,r)}}):(this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r}),this.processTreeDrop(n,r))}}}processTreeDrop(e,n){this.dragNodeSubNodes.splice(n,1),this.value.push(e),this.dragDropService.stopDrag({node:e})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(e){if(this.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>n.top+n.height||e.y<n.top)&&(this.dragHover=!1)}}allowDrop(e,n,r){if(e){if(this.isValidDragScope(r)){let s=!0;if(n)if(e===n)s=!1;else{let o=n.parent;for(;null!=o;){if(o===e){s=!1;break}o=o.parent}}return s}return!1}return!1}isValidDragScope(e){let n=this.droppableScope;if(n){if("string"==typeof n){if("string"==typeof e)return n===e;if(e instanceof Array)return-1!=e.indexOf(n)}else if(n instanceof Array){if("string"==typeof e)return-1!=n.indexOf(e);if(e instanceof Array)for(let r of n)for(let s of e)if(r===s)return!0}return!1}return!0}_filter(e){let n=e;if(""===n)this.filteredNodes=null;else{this.filteredNodes=[];const r=this.filterBy.split(","),s=ur.removeAccents(n).toLocaleLowerCase(this.filterLocale),o="strict"===this.filterMode;for(let l of this.value){let u={...l},p={searchFields:r,filterText:s,isStrictMode:o};(o&&(this.findFilteredNodes(u,p)||this.isFilterMatched(u,p))||!o&&(this.isFilterMatched(u,p)||this.findFilteredNodes(u,p)))&&this.filteredNodes.push(u)}}this.updateSerializedValue(),this.onFilter.emit({filter:n,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let o of s){let l={...o};this.isFilterMatched(l,n)&&(r=!0,e.children.push(l))}}if(r)return e.expanded=!0,!0}}isFilterMatched(e,{searchFields:n,filterText:r,isStrictMode:s}){let o=!1;for(let l of n)ur.removeAccents(String(ur.resolveFieldData(e,l))).toLocaleLowerCase(this.filterLocale).indexOf(r)>-1&&(o=!0);return(!o||s&&!this.isNodeLeaf(e))&&(o=this.findFilteredNodes(e,{searchFields:n,filterText:r,isStrictMode:s})||o),o}getIndex(e,n){const r=e.getItemOptions;return r?r(n).index:n}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(eZ,8),qt(Np))},i.\u0275cmp=Rr({type:i,selectors:[["p-tree"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(Sle,5),Hr(Ele,5),Hr(Tle,5)),2&e){let r;tr(r=nr())&&(n.filterViewChild=r.first),tr(r=nr())&&(n.scroller=r.first),tr(r=nr())&&(n.wrapperViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:"draggableNodes",droppableNodes:"droppableNodes",metaKeySelection:"metaKeySelection",propagateSelectionUp:"propagateSelectionUp",propagateSelectionDown:"propagateSelectionDown",loading:"loading",loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:"validateDrop",filter:"filter",filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filteredNodes:"filteredNodes",filterLocale:"filterLocale",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",indentation:"indentation",trackBy:"trackBy",virtualNodeHeight:"virtualNodeHeight"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange",onFilter:"onFilter"},features:[Na],decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle","drop","dragover","dragenter","dragleave"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],["styleClass","p-tree-wrapper",3,"items","style","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[1,"p-tree-filter-container"],["type","text","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],["filter",""],[1,"p-tree-filter-icon","pi","pi-search"],["styleClass","p-tree-wrapper",3,"items","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad"],["scroller",""],["pTemplate","content"],["class","p-tree-container","role","tree",3,"ngClass","style",4,"ngIf"],["role","tree",1,"p-tree-container",3,"ngClass"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation",4,"ngFor","ngForOf","ngForTrackBy"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation"],["pTemplate","loader"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-tree-wrapper"],["wrapper",""],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level"],[1,"p-tree-empty-message"],[4,"ngIf","ngIfElse"],["emptyFilter",""],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(e,n){1&e&&(ze(0,Xle,8,16,"div",0),ze(1,ice,6,11,"div",1)),2&e&&(de("ngIf",!n.horizontal),we(1),de("ngIf",n.horizontal))},dependencies:[Mo,mu,Fo,El,ea,hl,EA,rce],styles:[".p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex-shrink:0}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}.p-scroller .p-tree-container{overflow:visible}\n"],encapsulation:2}),i})(),sce=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za,yu,lv,Za,lv]}),i})();const oce=["container"],ace=["resizeHelper"],lce=["reorderIndicatorUp"],cce=["reorderIndicatorDown"],uce=["table"],dce=["scrollableView"],hce=["scrollableFrozenView"];function fce(i,t){if(1&i&&(Xe(0,"div",12)(1,"div",13),Kn(2,"i"),Ke()()),2&i){const e=ye();we(2),Yr("p-treetable-loading-icon pi-spin "+e.loadingIcon)}}function pce(i,t){1&i&&qi(0)}function gce(i,t){if(1&i&&(Xe(0,"div",14),ze(1,pce,1,0,"ng-container",15),Ke()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.captionTemplate)}}function mce(i,t){if(1&i){const e=Di();Xe(0,"p-paginator",16),_n("onPageChange",function(r){return Lt(e),Pt(ye().onPageChange(r))}),Ke()}if(2&i){const e=ye();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function vce(i,t){1&i&&qi(0)}function yce(i,t){1&i&&qi(0)}function _ce(i,t){1&i&&qi(0)}const c_=function(i){return{$implicit:i}};function bce(i,t){if(1&i&&(Xe(0,"div",17)(1,"table",18,19),ze(3,vce,1,0,"ng-container",20),Xe(4,"thead",21),ze(5,yce,1,0,"ng-container",20),Ke(),Kn(6,"tbody",22),Xe(7,"tfoot",23),ze(8,_ce,1,0,"ng-container",20),Ke()()()),2&i){const e=ye();we(1),de("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),we(2),de("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",Li(10,c_,e.columns)),we(2),de("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",Li(12,c_,e.columns)),we(1),de("pTreeTableBody",e.columns)("pTreeTableBodyTemplate",e.bodyTemplate),we(2),de("ngTemplateOutlet",e.footerTemplate)("ngTemplateOutletContext",Li(14,c_,e.columns))}}const Cce=function(i){return{width:i}};function wce(i,t){if(1&i&&Kn(0,"div",28,29),2&i){const e=ye(2);de("ttScrollableView",e.frozenColumns)("frozen",!0)("ngStyle",Li(4,Cce,e.frozenWidth))("scrollHeight",e.scrollHeight)}}const Ace=function(i,t){return{left:i,width:t}};function xce(i,t){if(1&i&&(Xe(0,"div",24),ze(1,wce,2,6,"div",25),Kn(2,"div",26,27),Ke()),2&i){const e=ye();we(1),de("ngIf",e.frozenColumns||e.frozenBodyTemplate),we(1),de("ttScrollableView",e.columns)("frozen",!1)("scrollHeight",e.scrollHeight)("ngStyle",Ts(5,Ace,e.frozenWidth,"calc(100% - "+e.frozenWidth+")"))}}function Ice(i,t){if(1&i){const e=Di();Xe(0,"p-paginator",30),_n("onPageChange",function(r){return Lt(e),Pt(ye().onPageChange(r))}),Ke()}if(2&i){const e=ye();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function Sce(i,t){1&i&&qi(0)}function Ece(i,t){if(1&i&&(Xe(0,"div",31),ze(1,Sce,1,0,"ng-container",15),Ke()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.summaryTemplate)}}function Tce(i,t){1&i&&Kn(0,"div",32,33)}function Mce(i,t){1&i&&Kn(0,"span",34,35)}function Dce(i,t){1&i&&Kn(0,"span",36,37)}const Lce=function(i,t,e,n,r){return{"p-treetable p-component":!0,"p-treetable-hoverable-rows":i,"p-treetable-auto-layout":t,"p-treetable-resizable":e,"p-treetable-resizable-fit":n,"p-treetable-flex-scrollable":r}},Pce=["pTreeTableBody",""];function Rce(i,t){1&i&&qi(0)}const kce=function(i,t,e,n){return{$implicit:i,node:t,rowData:e,columns:n}};function Oce(i,t){if(1&i&&(is(0),ze(1,Rce,1,0,"ng-container",2),rs()),2&i){const e=ye().$implicit,n=ye();we(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",_f(2,kce,e,e.node,e.node.data,n.columns))}}function Fce(i,t){1&i&&ze(0,Oce,2,7,"ng-container",1),2&i&&de("ngIf",t.$implicit.visible)}function Nce(i,t){1&i&&qi(0)}const Bce=function(i,t){return{$implicit:i,frozen:t}};function zce(i,t){if(1&i&&(is(0),ze(1,Nce,1,0,"ng-container",2),rs()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.tt.emptyMessageTemplate)("ngTemplateOutletContext",Ts(2,Bce,e.columns,e.frozen))}}const Vce=["scrollHeader"],Uce=["scrollHeaderBox"],Hce=["scrollBody"],Gce=["scrollTable"],Wce=["loadingTable"],jce=["scrollFooter"],$ce=["scrollFooterBox"],qce=["scrollableAligner"],Xce=["scroller"],Yce=["ttScrollableView",""];function Kce(i,t){1&i&&qi(0)}function Zce(i,t){1&i&&qi(0)}function Qce(i,t){1&i&&qi(0)}const F4=function(i,t){return{$implicit:i,options:t}};function Jce(i,t){if(1&i&&ze(0,Qce,1,0,"ng-container",5),2&i){const e=t.$implicit,n=t.options;ye(2),de("ngTemplateOutlet",Po(11))("ngTemplateOutletContext",Ts(2,F4,e,n))}}function eue(i,t){1&i&&qi(0)}const tue=function(i){return{options:i}};function nue(i,t){if(1&i&&ze(0,eue,1,0,"ng-container",5),2&i){const e=t.options;de("ngTemplateOutlet",ye(3).loaderTemplate)("ngTemplateOutletContext",Li(2,tue,e))}}function iue(i,t){1&i&&(is(0),ze(1,nue,1,4,"ng-template",14),rs())}const rue=function(i){return{height:i}};function sue(i,t){if(1&i){const e=Di();Xe(0,"p-scroller",11,12),_n("onLazyLoad",function(r){return Lt(e),Pt(ye().tt.onLazyItemLoad(r))}),ze(2,Jce,1,5,"ng-template",13),ze(3,iue,2,0,"ng-container",8),Ke()}if(2&i){const e=ye();To(Li(8,rue,"flex"!==e.tt.scrollHeight?e.tt.scrollHeight:void 0)),de("items",e.tt.serializedValue)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.tt.virtualScrollItemSize||e.tt._virtualRowHeight)("lazy",e.tt.lazy)("options",e.tt.virtualScrollOptions),we(3),de("ngIf",e.loaderTemplate)}}function oue(i,t){1&i&&qi(0)}const aue=function(i,t){return{"max-height":i,"overflow-y":t}},lue=function(){return{}};function cue(i,t){if(1&i&&(is(0),Xe(1,"div",15,16),ze(3,oue,1,0,"ng-container",5),Ke(),rs()),2&i){const e=ye(),n=Po(11);we(1),de("ngStyle",Ts(3,aue,"flex"!==e.tt.scrollHeight?e.scrollHeight:void 0,!e.frozen&&e.tt.scrollHeight?"scroll":void 0)),we(2),de("ngTemplateOutlet",n)("ngTemplateOutletContext",Ts(7,F4,e.serializedValue,Oo(6,lue)))}}function uue(i,t){1&i&&qi(0)}function due(i,t){1&i&&Kn(0,"div",21,22)}function hue(i,t){if(1&i&&(Xe(0,"table",17,18),ze(2,uue,1,0,"ng-container",5),Kn(3,"tbody",19),Ke(),ze(4,due,2,0,"div",20)),2&i){const e=t.$implicit,n=t.options,r=ye();To(n.contentStyle),Yr(r.tt.tableStyleClass),de("ngClass",n.contentStyleClass)("ngStyle",r.tt.tableStyle),we(2),de("ngTemplateOutlet",r.frozen&&r.tt.frozenColGroupTemplate||r.tt.colGroupTemplate)("ngTemplateOutletContext",Li(13,c_,r.columns)),we(1),de("pTreeTableBody",r.columns)("pTreeTableBodyTemplate",r.frozen&&r.tt.frozenBodyTemplate||r.tt.bodyTemplate)("serializedNodes",e)("frozen",r.frozen),we(1),de("ngIf",r.frozen)}}function fue(i,t){1&i&&qi(0)}function pue(i,t){1&i&&qi(0)}function gue(i,t){if(1&i&&(Xe(0,"div",23,24)(2,"div",25,26)(4,"table",27),ze(5,fue,1,0,"ng-container",5),Xe(6,"tfoot",28),ze(7,pue,1,0,"ng-container",5),Ke()()()()),2&i){const e=ye();we(4),de("ngClass",e.tt.tableStyleClass)("ngStyle",e.tt.tableStyle),we(1),de("ngTemplateOutlet",e.frozen&&e.tt.frozenColGroupTemplate||e.tt.colGroupTemplate)("ngTemplateOutletContext",Li(6,c_,e.columns)),we(2),de("ngTemplateOutlet",e.frozen&&e.tt.frozenFooterTemplate||e.tt.footerTemplate)("ngTemplateOutletContext",Li(8,c_,e.columns))}}let Z2=(()=>{class i{constructor(){this.sortSource=new Ze,this.selectionSource=new Ze,this.contextMenuSource=new Ze,this.uiUpdateSource=new Ze,this.totalRecordsSource=new Ze,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.uiUpdateSource$=this.uiUpdateSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onUIUpdate(e){this.uiUpdateSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),eS=(()=>{class i{constructor(e,n,r,s,o){this.el=e,this.cd=n,this.zone=r,this.tableService=s,this.filterService=o,this.lazy=!1,this.lazyLoadOnInit=!0,this.first=0,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectionChange=new qn,this.contextMenuSelectionChange=new qn,this.contextMenuSelectionMode="separate",this.compareSelectionBy="deepEquals",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.virtualScrollDelay=150,this.columnResizeMode="fit",this.rowTrackBy=(l,u)=>u,this.filters={},this.filterDelay=300,this.filterMode="lenient",this.onFilter=new qn,this.onNodeExpand=new qn,this.onNodeCollapse=new qn,this.onPage=new qn,this.onSort=new qn,this.onLazyLoad=new qn,this.sortFunction=new qn,this.onColResize=new qn,this.onColReorder=new qn,this.onNodeSelect=new qn,this.onNodeUnselect=new qn,this.onContextMenuSelect=new qn,this.onHeaderCheckboxToggle=new qn,this.onEditInit=new qn,this.onEditComplete=new qn,this.onEditCancel=new qn,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._sortOrder=1,this.selectionKeys={}}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&!this.virtualScroll&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template}})}ngOnChanges(e){e.value&&(this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&this.sortField?this.sortSingle():"multiple"==this.sortMode&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.updateSerializedValue(),this.tableService.onUIUpdate(this.value)),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}updateSerializedValue(){this.serializedValue=[],this.paginator?this.serializePageNodes():this.serializeNodes(null,this.filteredNodes||this.value,0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let o of n){o.parent=e;const l={node:o,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(l),l.visible&&o.expanded&&this.serializeNodes(o,o.children,r+1,l.visible)}}serializePageNodes(){let e=this.filteredNodes||this.value;if(this.serializedValue=[],e&&e.length){const n=this.lazy?0:this.first;for(let r=n;r<n+this.rows;r++){let s=e[r];s&&(this.serializedValue.push({node:s,parent:null,level:0,visible:!0}),this.serializeNodes(s,s.children,1,!0))}}}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(ur.resolveFieldData(e.data,this.dataKey))]=1;else this.selectionKeys[String(ur.resolveFieldData(this._selection.data,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.serializePageNodes(),this.onPage.emit({first:this.first,rows:this.rows}),this.tableService.onUIUpdate(this.value),this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.sortSingle(),this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}}sortSingle(){if(this.sortField&&this.sortOrder){this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortNodes(this.value),this.hasFilter()&&this._filter());let e={field:this.sortField,order:this.sortOrder};this.onSort.emit(e),this.tableService.onSort(e),this.updateSerializedValue()}}sortNodes(e){if(e&&0!==e.length){this.customSort?this.sortFunction.emit({data:e,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):e.sort((n,r)=>{let s=ur.resolveFieldData(n.data,this.sortField),o=ur.resolveFieldData(r.data,this.sortField),l=null;return l=null==s&&null!=o?-1:null!=s&&null==o?1:null==s&&null==o?0:"string"==typeof s&&"string"==typeof o?s.localeCompare(o,void 0,{numeric:!0}):s<o?-1:s>o?1:0,this.sortOrder*l});for(let n of e)this.sortNodes(n.children)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortMultipleNodes(this.value),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.updateSerializedValue(),this.tableService.onSort(this.multiSortMeta))}sortMultipleNodes(e){if(e&&0!==e.length){this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):e.sort((n,r)=>this.multisortField(n,r,this.multiSortMeta,0));for(let n of e)this.sortMultipleNodes(n.children)}}multisortField(e,n,r,s){let o=ur.resolveFieldData(e.data,r[s].field),l=ur.resolveFieldData(n.data,r[s].field),u=null;if(null==o&&null!=l?u=-1:null!=o&&null==l?u=1:null==o&&null==l&&(u=0),"string"==typeof o||o instanceof String){if(o.localeCompare&&o!=l)return r[s].order*o.localeCompare(l,void 0,{numeric:!0})}else u=o<l?-1:1;return o==l?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*u}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.scrollableViewChild&&this.scrollableViewChild.scrollToVirtualIndex(e),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollToVirtualIndex(e)}scrollTo(e){this.scrollableViewChild&&this.scrollableViewChild.scrollTo(e),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollTo(e)}isEmpty(){let e=this.filteredNodes||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}onColumnResizeBegin(e){let n=Ft.getOffset(this.containerViewChild.nativeElement).left;this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,e.preventDefault()}onColumnResize(e){let n=Ft.getOffset(this.containerViewChild.nativeElement).left;Ft.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(e,n){let r=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,s=n.offsetWidth,o=s+r;if(s+r>parseInt(n.style.minWidth||15)){if("fit"===this.columnResizeMode){let u=n.nextElementSibling;for(;!u.offsetParent;)u=u.nextElementSibling;if(u){let p=u.offsetWidth-r,v=u.style.minWidth||15;if(o>15&&p>parseInt(v))if(this.scrollable){let w=this.findParentScrollableView(n),I=Ft.findSingle(w,".p-treetable-scrollable-body table")||Ft.findSingle(w,".p-scroller-viewport table"),T=Ft.findSingle(w,"table.p-treetable-scrollable-header-table"),k=Ft.findSingle(w,"table.p-treetable-scrollable-footer-table"),H=Ft.index(n);this.resizeColGroup(T,H,o,p),this.resizeColGroup(I,H,o,p),this.resizeColGroup(k,H,o,p)}else n.style.width=o+"px",u&&(u.style.width=p+"px")}}else if("expand"===this.columnResizeMode)if(this.scrollable){let u=this.findParentScrollableView(n),p=Ft.findSingle(u,".p-treetable-scrollable-body")||Ft.findSingle(u,".p-scroller-viewport"),v=Ft.findSingle(u,".p-treetable-scrollable-header"),w=Ft.findSingle(u,".p-treetable-scrollable-footer"),I=Ft.findSingle(u,".p-treetable-scrollable-body table")||Ft.findSingle(u,".p-scroller-viewport table"),T=Ft.findSingle(u,"table.p-treetable-scrollable-header-table"),k=Ft.findSingle(u,"table.p-treetable-scrollable-footer-table");I.style.width=I.offsetWidth+r+"px",T.style.width=T.offsetWidth+r+"px",k&&(k.style.width=k.offsetWidth+r+"px");let H=Ft.index(n);const X=n?I.offsetWidth+r:o,ue=n?T.offsetWidth+r:o,xe=this.containerViewChild.nativeElement.offsetWidth>=X;let be=(Se,Ye,gt,zt)=>{Se&&Ye&&(Se.style.width=zt?gt+Ft.calculateScrollbarWidth(p)+"px":"auto",Ye.style.width=gt+"px")};be(p,I,X,xe),be(v,T,ue,xe),be(w,k,ue,xe),this.resizeColGroup(T,H,o,null),this.resizeColGroup(I,H,o,null),this.resizeColGroup(k,H,o,null)}else this.tableViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.offsetWidth+r+"px",n.style.width=o+"px",this.containerViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.style.width+"px";this.onColResize.emit({element:n,delta:r})}this.resizeHelperViewChild.nativeElement.style.display="none",Ft.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}findParentScrollableView(e){if(e){let n=e.parentElement;for(;n&&!Ft.hasClass(n,"p-treetable-scrollable-view");)n=n.parentElement;return n}return null}resizeColGroup(e,n,r,s){if(e){let o="COLGROUP"===e.children[0].nodeName?e.children[0]:null;if(!o)throw"Scrollable tables require a colgroup to support resizable columns";{let l=o.children[n],u=l.nextElementSibling;l.style.width=r+"px",u&&s&&(u.style.width=s+"px")}}}onColumnDragStart(e,n){this.reorderIconWidth=Ft.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Ft.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=Ft.getOffset(this.containerViewChild.nativeElement),s=Ft.getOffset(n);if(this.draggedColumn!=n){let o=s.left-r.left,u=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>u?(this.reorderIndicatorUpViewChild.nativeElement.style.left=o+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=o+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=o-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=o-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=Ft.indexWithinGroup(this.draggedColumn,"ttreorderablecolumn"),s=Ft.indexWithinGroup(n,"ttreorderablecolumn"),o=r!=s;o&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(o=!1),o&&s<r&&1===this.dropPosition&&(s+=1),o&&s>r&&-1===this.dropPosition&&(s-=1),o&&(ur.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}handleRowClick(e){let n=e.originalEvent.target.nodeName;if("INPUT"!=n&&"BUTTON"!=n&&"A"!=n&&!Ft.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){this.preventSelectionSetterPropagation=!0;let r=e.rowNode,s=this.isSelected(r.node),o=!this.rowTouched&&this.metaKeySelection,l=this.dataKey?String(ur.resolveFieldData(r.node.data,this.dataKey)):null;if(o){let u=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(s&&u){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let p=this.findIndexInSelection(r.node);this._selection=this.selection.filter((v,w)=>w!=p),this.selectionChange.emit(this.selection),l&&delete this.selectionKeys[l]}this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})}else this.isSingleSelectionMode()?(this._selection=r.node,this.selectionChange.emit(r.node),l&&(this.selectionKeys={},this.selectionKeys[l]=1)):this.isMultipleSelectionMode()&&(u?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,r.node],this.selectionChange.emit(this.selection),l&&(this.selectionKeys[l]=1)),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex})}else if("single"===this.selectionMode)s?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})):(this._selection=r.node,this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),l&&(this.selectionKeys={},this.selectionKeys[l]=1));else if("multiple"===this.selectionMode)if(s){let u=this.findIndexInSelection(r.node);this._selection=this.selection.filter((p,v)=>v!=u),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"}),l&&delete this.selectionKeys[l]}else this._selection=this.selection?[...this.selection,r.node]:[r.node],this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),l&&(this.selectionKeys[l]=1);this.tableService.onSelectionChange()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowNode.node;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:n}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let r=this.isSelected(n),s=this.dataKey?String(ur.resolveFieldData(n.data,this.dataKey)):null;r||(this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n)):this.isMultipleSelectionMode()&&(this.selection=[n],this.selectionChange.emit(this.selection)),s&&(this.selectionKeys[s]=1)),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:n})}}}toggleNodeWithCheckbox(e){this.selection=this.selection||[],this.preventSelectionSetterPropagation=!0;let n=e.rowNode.node;this.isSelected(n)?(this.propagateSelectionDown(n,!1),e.rowNode.parent&&this.propagateSelectionUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown(n,!0),e.rowNode.parent&&this.propagateSelectionUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n})),this.tableService.onSelectionChange()}toggleNodesWithCheckbox(e,n){let r=this.filteredNodes||this.value;if(this._selection=n&&r?r.slice():[],n){if(r&&r.length)for(let s of r)this.propagateSelectionDown(s,!0)}else this._selection=[],this.selectionKeys={};this.preventSelectionSetterPropagation=!0,this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n})}propagateSelectionUp(e,n){if(e.children&&e.children.length){let s=0,o=!1,l=this.dataKey?String(ur.resolveFieldData(e.data,this.dataKey)):null;for(let u of e.children)this.isSelected(u)?s++:u.partialSelected&&(o=!0);if(n&&s==e.children.length)this._selection=[...this.selection||[],e],e.partialSelected=!1,l&&(this.selectionKeys[l]=1);else{if(!n){let u=this.findIndexInSelection(e);u>=0&&(this._selection=this.selection.filter((p,v)=>v!=u),l&&delete this.selectionKeys[l])}e.partialSelected=!!(o||s>0&&s!=e.children.length)}}let r=e.parent;r&&this.propagateSelectionUp(r,n)}propagateSelectionDown(e,n){let r=this.findIndexInSelection(e),s=this.dataKey?String(ur.resolveFieldData(e.data,this.dataKey)):null;if(n&&-1==r?(this._selection=[...this.selection||[],e],s&&(this.selectionKeys[s]=1)):!n&&r>-1&&(this._selection=this.selection.filter((o,l)=>l!=r),s&&delete this.selectionKeys[s]),e.partialSelected=!1,e.children&&e.children.length)for(let o of e.children)this.propagateSelectionDown(o,n)}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[ur.resolveFieldData(e.data,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}equals(e,n){return"equals"===this.compareSelectionBy?e===n:ur.equals(e.data,n.data,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay)}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let n;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");n=this.globalFilterFields||this.columns}this.filteredNodes=[];const r="strict"===this.filterMode;let s=!1;for(let o of this.value){let v,l={...o},u=!0,p=!1;for(let I in this.filters)if(this.filters.hasOwnProperty(I)&&"global"!==I){let T=this.filters[I];if(v={filterField:I,filterValue:T.value,filterConstraint:this.filterService.filters[T.matchMode||"startsWith"],isStrictMode:r},(r&&!(this.findFilteredNodes(l,v)||this.isFilterMatched(l,v))||!r&&!(this.isFilterMatched(l,v)||this.findFilteredNodes(l,v)))&&(u=!1),!u)break}if(this.filters.global&&!p&&n)for(let I=0;I<n.length;I++){let T={...l};v={filterField:n[I].field||n[I],filterValue:this.filters.global.value,filterConstraint:this.filterService.filters[this.filters.global.matchMode],isStrictMode:r},(r&&(this.findFilteredNodes(T,v)||this.isFilterMatched(T,v))||!r&&(this.isFilterMatched(T,v)||this.findFilteredNodes(T,v)))&&(p=!0,l=T)}let w=u;this.filters.global&&(w=u&&p),w&&this.filteredNodes.push(l),s=s||!u||p||u&&this.filteredNodes.length>0||!p&&0===this.filteredNodes.length}s||(this.filteredNodes=null),this.paginator&&(this.totalRecords=this.filteredNodes?this.filteredNodes.length:this.value?this.value.length:0)}else this.filteredNodes=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.first=0;const e=this.filteredNodes||this.value;this.onFilter.emit({filters:this.filters,filteredValue:e}),this.tableService.onUIUpdate(e),this.updateSerializedValue(),this.scrollable&&this.resetScrollTop()}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let o of s){let l={...o};this.isFilterMatched(l,n)&&(r=!0,e.children.push(l))}}if(r)return!0}}isFilterMatched(e,{filterField:n,filterValue:r,filterConstraint:s,isStrictMode:o}){let l=!1;return s(ur.resolveFieldData(e.data,n),r,this.filterLocale)&&(l=!0),(!l||o&&!this.isNodeLeaf(e))&&(l=this.findFilteredNodes(e,{filterField:n,filterValue:r,filterConstraint:s,isStrictMode:o})||l),l}isNodeLeaf(e){return!1!==e.leaf&&!(e.children&&e.children.length)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}reset(){this._sortField=null,this._sortOrder=1,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredNodes=null,this.filters={},this.first=0,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}updateEditingCell(e,n,r){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Ft.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.editingCellClick&&this.isEditingCellValid()&&(Ft.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData}),this.editingCellField=null,this.editingCellData=null,this.unbindDocumentEditListener()),this.editingCellClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.editingCellField=null,this.editingCellData=null,this.initialized=null}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(Yo),qt(ua),qt(Z2),qt(sA))},i.\u0275cmp=Rr({type:i,selectors:[["p-treeTable"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(oce,5),Hr(ace,5),Hr(lce,5),Hr(cce,5),Hr(uce,5),Hr(dce,5),Hr(hce,5)),2&e){let r;tr(r=nr())&&(n.containerViewChild=r.first),tr(r=nr())&&(n.resizeHelperViewChild=r.first),tr(r=nr())&&(n.reorderIndicatorUpViewChild=r.first),tr(r=nr())&&(n.reorderIndicatorDownViewChild=r.first),tr(r=nr())&&(n.tableViewChild=r.first),tr(r=nr())&&(n.scrollableViewChild=r.first),tr(r=nr())&&(n.scrollableFrozenViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{columns:"columns",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",autoLayout:"autoLayout",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",paginator:"paginator",rows:"rows",first:"first",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",customSort:"customSort",selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",compareSelectionBy:"compareSelectionBy",rowHover:"rowHover",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",scrollable:"scrollable",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",frozenColumns:"frozenColumns",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",contextMenu:"contextMenu",rowTrackBy:"rowTrackBy",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterMode:"filterMode",filterLocale:"filterLocale",virtualRowHeight:"virtualRowHeight",value:"value",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onFilter:"onFilter",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onPage:"onPage",onSort:"onSort",onLazyLoad:"onLazyLoad",sortFunction:"sortFunction",onColResize:"onColResize",onColReorder:"onColReorder",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onContextMenuSelect:"onContextMenuSelect",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel"},features:[Xo([Z2]),Na],decls:12,vars:20,consts:[["data-scrollselectors",".p-treetable-scrollable-body",3,"ngStyle","ngClass"],["container",""],["class","p-treetable-loading",4,"ngIf"],["class","p-treetable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-wrapper",4,"ngIf"],["class","p-treetable-scrollable-wrapper",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-treetable-reorder-indicator-up",4,"ngIf"],["class","pi pi-arrow-up p-treetable-reorder-indicator-down",4,"ngIf"],[1,"p-treetable-loading"],[1,"p-treetable-loading-overlay","p-component-overlay"],[1,"p-treetable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-treetable-wrapper"],[3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate"],[1,"p-treetable-tfoot"],[1,"p-treetable-scrollable-wrapper"],["class","p-treetable-scrollable-view p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight",4,"ngIf"],[1,"p-treetable-scrollable-view",3,"ttScrollableView","frozen","scrollHeight","ngStyle"],["scrollableView",""],[1,"p-treetable-scrollable-view","p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight"],["scrollableFrozenView",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-treetable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-treetable-reorder-indicator-up"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-treetable-reorder-indicator-down"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(Xe(0,"div",0,1),ze(2,fce,3,2,"div",2),ze(3,gce,2,1,"div",3),ze(4,mce,1,15,"p-paginator",4),ze(5,bce,9,16,"div",5),ze(6,xce,4,8,"div",6),ze(7,Ice,1,15,"p-paginator",7),ze(8,Ece,2,1,"div",8),ze(9,Tce,2,0,"div",9),ze(10,Mce,2,0,"span",10),ze(11,Dce,2,0,"span",11),Ke()),2&e&&(Yr(n.styleClass),de("ngStyle",n.style)("ngClass",d0(14,Lce,n.rowHover||"single"===n.selectionMode||"multiple"===n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable&&"flex"===n.scrollHeight)),we(2),de("ngIf",n.loading&&n.showLoader),we(1),de("ngIf",n.captionTemplate),we(1),de("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),we(1),de("ngIf",!n.scrollable),we(1),de("ngIf",n.scrollable),we(1),de("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),we(1),de("ngIf",n.summaryTemplate),we(1),de("ngIf",n.resizableColumns),we(1),de("ngIf",n.reorderableColumns),we(1),de("ngIf",n.reorderableColumns))},dependencies:function(){return[Mo,Fo,El,ea,e4,yue,N4]},styles:[".p-treetable{position:relative}.p-treetable table{border-collapse:collapse;width:100%;table-layout:fixed}.p-treetable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-treetable .p-sortable-column .p-column-title,.p-treetable .p-sortable-column .p-sortable-column-icon,.p-treetable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-treetable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-treetable-auto-layout>.p-treetable-wrapper{overflow-x:auto}.p-treetable-auto-layout>.p-treetable-wrapper>table{table-layout:auto}.p-treetable-hoverable-rows .p-treetable-tbody>tr{cursor:pointer}.p-treetable-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;overflow:hidden;position:relative}p-treetabletoggler+p-treetablecheckbox .p-checkbox{vertical-align:middle}p-treetabletoggler+p-treetablecheckbox+span{vertical-align:middle}.p-treetable-scrollable-wrapper{position:relative}.p-treetable-scrollable-header,.p-treetable-scrollable-footer{overflow:hidden}.p-treetable-scrollable-body{overflow:auto;position:relative}.p-treetable-scrollable-body>table>.p-treetable-tbody>tr:first-child>td{border-top:0 none}.p-treetable-virtual-table{position:absolute}.p-treetable-frozen-view .p-treetable-scrollable-body{overflow:hidden}.p-treetable-frozen-view>.p-treetable-scrollable-body>table>.p-treetable-tbody>tr>td:last-child{border-right:0 none}.p-treetable-unfrozen-view{position:absolute;top:0}.p-treetable-flex-scrollable,.p-treetable-flex-scrollable .p-treetable-scrollable-wrapper,.p-treetable-flex-scrollable .p-treetable-scrollable-view{display:flex;flex-direction:column;flex:1;height:100%}.p-treetable-flex-scrollable .p-treetable-virtual-scrollable-body{flex:1}.p-treetable-resizable>.p-treetable-wrapper{overflow-x:auto}.p-treetable-resizable .p-treetable-thead>tr>th,.p-treetable-resizable .p-treetable-tfoot>tr>td,.p-treetable-resizable .p-treetable-tbody>tr>td{overflow:hidden}.p-treetable-resizable .p-resizable-column{background-clip:padding-box;position:relative}.p-treetable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-treetable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-treetable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-treetable .p-row-editor-init,.p-treetable .p-row-editor-save,.p-treetable .p-row-editor-cancel,.p-treetable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-treetable-reorder-indicator-up,.p-treetable-reorder-indicator-down{position:absolute;display:none}[ttReorderableColumn]{cursor:move}.p-treetable .p-treetable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-treetable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),N4=(()=>{class i{constructor(e,n,r){this.tt=e,this.treeTableService=n,this.cd=r,this.subscription=this.tt.tableService.uiUpdateSource$.subscribe(()=>{this.tt.virtualScroll&&this.cd.detectChanges()})}getScrollerOption(e,n){return this.tt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.getScrollerOption("getItemOptions");return n?n(e).index:e}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(eS),qt(Z2),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["","pTreeTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTreeTableBody","columns"],template:["pTreeTableBodyTemplate","template"],frozen:"frozen",serializedNodes:"serializedNodes",scrollerOptions:"scrollerOptions"},attrs:Pce,decls:2,vars:3,consts:[["ngFor","",3,"ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(ze(0,Fce,1,1,"ng-template",0),ze(1,zce,2,5,"ng-container",1)),2&e&&(de("ngForOf",n.serializedNodes||n.tt.serializedValue)("ngForTrackBy",n.tt.rowTrackBy),we(1),de("ngIf",n.tt.isEmpty()))},dependencies:[mu,Fo,El],encapsulation:2}),i})(),yue=(()=>{class i{constructor(e,n,r){this.tt=e,this.el=n,this.zone=r}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e,null!=e&&(e.includes("%")||e.includes("calc"))&&console.log('Percentage scroll height calculation is removed in favor of the more performant CSS based flex mode, use scrollHeight="flex" instead.')}ngAfterViewInit(){if(this.frozen)this.scrollableAlignerViewChild&&this.scrollableAlignerViewChild.nativeElement&&(this.scrollableAlignerViewChild.nativeElement.style.height=Ft.calculateScrollbarHeight()+"px");else{(this.tt.frozenColumns||this.tt.frozenBodyTemplate)&&Ft.addClass(this.el.nativeElement,"p-treetable-unfrozen-view");let e=this.el.nativeElement.previousElementSibling;e&&(this.frozenSiblingBody=Ft.findSingle(e,this.tt.virtualScroll?".p-scroller-viewport":".p-treetable-scrollable-body"));let n=Ft.calculateScrollbarWidth();this.scrollHeaderBoxViewChild.nativeElement.style.paddingRight=n+"px",this.scrollFooterBoxViewChild&&this.scrollFooterBoxViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.paddingRight=n+"px")}this.bindEvents()}bindEvents(){this.zone.runOutsideAngular(()=>{this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.headerScrollListener=this.onHeaderScroll.bind(this),this.scrollHeaderBoxViewChild.nativeElement.addEventListener("scroll",this.headerScrollListener)),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.footerScrollListener=this.onFooterScroll.bind(this),this.scrollFooterViewChild.nativeElement.addEventListener("scroll",this.footerScrollListener)),this.frozen||(this.bodyScrollListener=this.onBodyScroll.bind(this),this.tt.virtualScroll?this.scroller.getElementRef().nativeElement.addEventListener("scroll",this.bodyScrollListener):this.scrollBodyViewChild.nativeElement.addEventListener("scroll",this.bodyScrollListener))})}unbindEvents(){this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&this.scrollHeaderBoxViewChild.nativeElement.removeEventListener("scroll",this.headerScrollListener),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&this.scrollFooterViewChild.nativeElement.removeEventListener("scroll",this.footerScrollListener),this.scrollBodyViewChild&&this.scrollBodyViewChild.nativeElement&&this.scrollBodyViewChild.nativeElement.removeEventListener("scroll",this.bodyScrollListener),this.scroller&&this.scroller.getElementRef()&&this.scroller.getElementRef().nativeElement.removeEventListener("scroll",this.bodyScrollListener)}onHeaderScroll(){const e=this.scrollHeaderViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onFooterScroll(){const e=this.scrollFooterViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onBodyScroll(e){this.preventBodyScrollPropagation?this.preventBodyScrollPropagation=!1:(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.frozenSiblingBody&&(this.frozenSiblingBody.scrollTop=e.target.scrollTop))}scrollToVirtualIndex(e){this.scroller&&this.scroller.scrollToIndex(e)}scrollTo(e){this.scroller?this.scroller.scrollTo(e):this.scrollBodyViewChild.nativeElement.scrollTo?this.scrollBodyViewChild.nativeElement.scrollTo(e):(this.scrollBodyViewChild.nativeElement.scrollLeft=e.left,this.scrollBodyViewChild.nativeElement.scrollTop=e.top)}ngOnDestroy(){this.unbindEvents(),this.frozenSiblingBody=null}}return i.\u0275fac=function(e){return new(e||i)(qt(eS),qt(oi),qt(ua))},i.\u0275cmp=Rr({type:i,selectors:[["","ttScrollableView",""]],viewQuery:function(e,n){if(1&e&&(Hr(Vce,5),Hr(Uce,5),Hr(Hce,5),Hr(Gce,5),Hr(Wce,5),Hr(jce,5),Hr($ce,5),Hr(qce,5),Hr(Xce,5)),2&e){let r;tr(r=nr())&&(n.scrollHeaderViewChild=r.first),tr(r=nr())&&(n.scrollHeaderBoxViewChild=r.first),tr(r=nr())&&(n.scrollBodyViewChild=r.first),tr(r=nr())&&(n.scrollTableViewChild=r.first),tr(r=nr())&&(n.scrollLoadingTableViewChild=r.first),tr(r=nr())&&(n.scrollFooterViewChild=r.first),tr(r=nr())&&(n.scrollFooterBoxViewChild=r.first),tr(r=nr())&&(n.scrollableAlignerViewChild=r.first),tr(r=nr())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{columns:["ttScrollableView","columns"],frozen:"frozen",scrollHeight:"scrollHeight"},attrs:Yce,decls:13,vars:13,consts:[[1,"p-treetable-scrollable-header"],["scrollHeader",""],[1,"p-treetable-scrollable-header-box"],["scrollHeaderBox",""],[1,"p-treetable-scrollable-header-table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],["styleClass","p-treetable-scrollable-body",3,"items","style","scrollHeight","itemSize","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInItems",""],["class","p-treetable-scrollable-footer",4,"ngIf"],["styleClass","p-treetable-scrollable-body",3,"items","scrollHeight","itemSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],[1,"p-treetable-scrollable-body",3,"ngStyle"],["scrollBody",""],[3,"ngClass","ngStyle"],["scrollTable",""],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate","serializedNodes","frozen"],["style","background-color:transparent",4,"ngIf"],[2,"background-color","transparent"],["scrollableAligner",""],[1,"p-treetable-scrollable-footer"],["scrollFooter",""],[1,"p-treetable-scrollable-footer-box"],["scrollFooterBox",""],[1,"p-treetable-scrollable-footer-table",3,"ngClass","ngStyle"],[1,"p-treetable-tfoot"]],template:function(e,n){1&e&&(Xe(0,"div",0,1)(2,"div",2,3)(4,"table",4),ze(5,Kce,1,0,"ng-container",5),Xe(6,"thead",6),ze(7,Zce,1,0,"ng-container",5),Ke()()()(),ze(8,sue,4,10,"p-scroller",7),ze(9,cue,4,10,"ng-container",8),ze(10,hue,5,15,"ng-template",null,9,Mc),ze(12,gue,8,10,"div",10)),2&e&&(we(4),de("ngClass",n.tt.tableStyleClass)("ngStyle",n.tt.tableStyle),we(1),de("ngTemplateOutlet",n.frozen&&n.tt.frozenColGroupTemplate||n.tt.colGroupTemplate)("ngTemplateOutletContext",Li(9,c_,n.columns)),we(2),de("ngTemplateOutlet",n.frozen&&n.tt.frozenHeaderTemplate||n.tt.headerTemplate)("ngTemplateOutletContext",Li(11,c_,n.columns)),we(1),de("ngIf",n.tt.virtualScroll),we(1),de("ngIf",!n.tt.virtualScroll),we(3),de("ngIf",n.tt.footerTemplate))},dependencies:[Mo,Fo,El,ea,hl,EA,N4],encapsulation:2}),i})(),_ue=(()=>{class i{constructor(e){this.tt=e}onClick(e){this.rowNode.node.expanded=!this.rowNode.node.expanded,this.rowNode.node.expanded?this.tt.onNodeExpand.emit({originalEvent:e,node:this.rowNode.node}):this.tt.onNodeCollapse.emit({originalEvent:e,node:this.rowNode.node}),this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),e.preventDefault()}}return i.\u0275fac=function(e){return new(e||i)(qt(eS))},i.\u0275cmp=Rr({type:i,selectors:[["p-treeTableToggler"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode"},decls:2,vars:5,consts:[["type","button","tabindex","-1","pRipple","",1,"p-treetable-toggler","p-link",3,"click"],[3,"ngClass"]],template:function(e,n){1&e&&(Xe(0,"button",0),_n("click",function(s){return n.onClick(s)}),Kn(1,"i",1),Ke()),2&e&&(Nh("visibility",!1===n.rowNode.node.leaf||n.rowNode.node.children&&n.rowNode.node.children.length?"visible":"hidden")("margin-left",16*n.rowNode.level+"px"),we(1),de("ngClass",n.rowNode.node.expanded?"pi pi-fw pi-chevron-down":"pi pi-fw pi-chevron-right"))},dependencies:[Mo,Ju],encapsulation:2}),i})(),bue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,t4,yu,lv,Za,lv]}),i})();function Cue(i,t){if(1&i&&Kn(0,"span",11),2&i){const e=ye(2).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function wue(i,t){1&i&&qi(0)}const B4=function(i){return{"p-disabled":i}},Aue=function(){return{exact:!1}},z4=function(i){return{$implicit:i}};function xue(i,t){if(1&i){const e=Di();Xe(0,"a",8),_n("click",function(r){Lt(e);const s=ye().$implicit;return Pt(ye().onItemClick(r,s))})("keydown.enter",function(r){Lt(e);const s=ye(),o=s.$implicit,l=s.index;return Pt(ye().onItemClick(r,o,l))}),ze(1,Cue,1,2,"span",9),ze(2,wue,1,0,"ng-container",10),Ke()}if(2&i){const e=ye().$implicit,n=ye();de("routerLink",e.routerLink)("queryParams",e.queryParams)("ngClass",Li(17,B4,e.disabled))("routerLinkActiveOptions",e.routerLinkActiveOptions||Oo(19,Aue))("target",e.target)("tooltipOptions",e.tooltipOptions)("fragment",e.fragment)("queryParamsHandling",e.queryParamsHandling)("preserveFragment",e.preserveFragment)("skipLocationChange",e.skipLocationChange)("replaceUrl",e.replaceUrl)("state",e.state),Lr("id",e.id)("tabindex",e.disabled||n.readonly?null:e.tabindex?e.tabindex:"0"),we(1),de("ngIf",e.icon&&!n.itemTemplate),we(1),de("ngTemplateOutlet",n.itemTemplate)("ngTemplateOutletContext",Li(20,z4,e))}}function Iue(i,t){if(1&i&&Kn(0,"span",11),2&i){const e=ye(2).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Sue(i,t){1&i&&qi(0)}function Eue(i,t){if(1&i){const e=Di();Xe(0,"a",12),_n("click",function(r){Lt(e);const s=ye().$implicit;return Pt(ye().onItemClick(r,s))})("keydown.enter",function(r){Lt(e);const s=ye(),o=s.$implicit,l=s.index;return Pt(ye().onItemClick(r,o,l))}),ze(1,Iue,1,2,"span",9),ze(2,Sue,1,0,"ng-container",10),Ke()}if(2&i){const e=ye(),n=e.$implicit,r=e.index,s=ye();de("tooltipPosition",n.tooltipPosition)("tooltipOptions",n.tooltipOptions)("ngClass",Li(10,B4,n.disabled))("target",n.target),Lr("href",n.url||null,dh)("id",n.id)("tabindex",n.disabled||r!==s.activeIndex&&s.readonly?null:n.tabindex?n.tabindex:"0"),we(1),de("ngIf",n.icon&&!s.itemTemplate),we(1),de("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",Li(12,z4,n))}}function Tue(i,t){if(1&i){const e=Di();Xe(0,"li",5),_n("mouseenter",function(){const s=Lt(e).index;return Pt(ye().onItemMouseEnter(s))}),ze(1,xue,3,22,"a",6),ze(2,Eue,3,14,"ng-template",null,7,Mc),Ke()}if(2&i){const e=t.$implicit,n=t.index,r=Po(3),s=ye();de("ngClass",s.itemClass(n)),we(1),de("ngIf",s.isClickableRouterLink(e))("ngIfElse",r)}}let Mue=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.model=null,this.position="bottom",this.currentIndex=-3}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.itemTemplate=e.template})}onListMouseLeave(){this.currentIndex=-3,this.cd.markForCheck()}onItemMouseEnter(e){this.currentIndex=e,this.cd.markForCheck()}onItemClick(e,n){n.command&&n.command({originalEvent:e,item:n})}get containerClass(){return{[`p-dock p-component  p-dock-${this.position}`]:!0}}isClickableRouterLink(e){return e.routerLink&&!e.disabled}itemClass(e){return{"p-dock-item":!0,"p-dock-item-second-prev":this.currentIndex-2===e,"p-dock-item-prev":this.currentIndex-1===e,"p-dock-item-current":this.currentIndex===e,"p-dock-item-next":this.currentIndex+1===e,"p-dock-item-second-next":this.currentIndex+2===e}}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-dock"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",model:"model",position:"position"},decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],[1,"p-dock-list-container"],["role","menu",1,"p-dock-list",3,"mouseleave"],["list",""],[3,"ngClass","mouseenter",4,"ngFor","ngForOf"],[3,"ngClass","mouseenter"],["pRipple","","class","p-dock-action","role","menuitem","pTooltip","",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter",4,"ngIf","ngIfElse"],["elseBlock",""],["pRipple","","role","menuitem","pTooltip","",1,"p-dock-action",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter"],["class","p-dock-action-icon",3,"ngClass","ngStyle",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-dock-action-icon",3,"ngClass","ngStyle"],["role","menuitem","pRipple","","pTooltip","",1,"p-dock-action",3,"tooltipPosition","tooltipOptions","ngClass","target","click","keydown.enter"]],template:function(e,n){1&e&&(Xe(0,"div",0)(1,"div",1)(2,"ul",2,3),_n("mouseleave",function(){return n.onListMouseLeave()}),ze(4,Tue,4,3,"li",4),Ke()()()),2&e&&(Yr(n.styleClass),de("ngClass",n.containerClass)("ngStyle",n.style),Lr("id",n.id),we(4),de("ngForOf",n.model))},dependencies:[Mo,mu,Fo,El,ea,rC,Ju,ov],styles:[".p-dock{position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dock-list-container{display:flex;pointer-events:auto}.p-dock-list{margin:0;padding:0;list-style:none;display:flex;align-items:center;justify-content:center}.p-dock-item{transition:all .2s cubic-bezier(.4,0,.2,1);will-change:transform}.p-dock-action{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;cursor:default}.p-dock-item-second-prev,.p-dock-item-second-next{transform:scale(1.2)}.p-dock-item-prev,.p-dock-item-next{transform:scale(1.4)}.p-dock-item-current{transform:scale(1.6);z-index:1}.p-dock-top{left:0;top:0;width:100%}.p-dock-top .p-dock-item{transform-origin:center top}.p-dock-bottom{left:0;bottom:0;width:100%}.p-dock-bottom .p-dock-item{transform-origin:center bottom}.p-dock-right{right:0;top:0;height:100%}.p-dock-right .p-dock-item{transform-origin:center right}.p-dock-right .p-dock-list{flex-direction:column}.p-dock-left{left:0;top:0;height:100%}.p-dock-left .p-dock-item{transform-origin:center left}.p-dock-left .p-dock-list{flex-direction:column}\n"],encapsulation:2,changeDetection:0}),i})(),Due=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,s_,yu,av,Za,av,s_]}),i})();const Lue=["cb"],Pue=function(i,t,e){return{"p-checkbox-label":!0,"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function Rue(i,t){if(1&i){const e=Di();Xe(0,"label",7),_n("click",function(r){Lt(e);const s=ye(),o=Po(3);return Pt(s.onClick(r,o,!0))}),bi(1),Ke()}if(2&i){const e=ye();Yr(e.labelStyleClass),de("ngClass",Yu(5,Pue,e.checked(),e.disabled,e.focused)),Lr("for",e.inputId),we(1),As(e.label)}}const kue=function(i,t,e){return{"p-checkbox p-component":!0,"p-checkbox-checked":i,"p-checkbox-disabled":t,"p-checkbox-focused":e}},Oue=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},Fue={provide:Xc,useExisting:Zr(()=>V4),multi:!0};let V4=(()=>{class i{constructor(e){this.cd=e,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(e,n,r){e.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(e),r&&n.focus())}updateModel(e){let n;this.binary?(n=this.checked()?this.falseValue:this.trueValue,this.model=n,this.onModelChange(n)):(n=this.checked()?this.model.filter(r=>!ur.equals(r,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(n),this.model=n,this.formControl&&this.formControl.setValue(n)),this.onChange.emit({checked:n,originalEvent:e})}handleChange(e){this.readonly||this.updateModel(e)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(e){this.model=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:ur.contains(this.value,this.model)}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-checkbox"]],viewQuery:function(e,n){if(1&e&&Hr(Lue,5),2&e){let r;tr(r=nr())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[Xo([Fue])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(e,n){if(1&e){const r=Di();Xe(0,"div",0)(1,"div",1)(2,"input",2,3),_n("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("change",function(o){return n.handleChange(o)}),Ke()(),Xe(4,"div",4),_n("click",function(o){Lt(r);const l=Po(3);return Pt(n.onClick(o,l,!0))}),Kn(5,"span",5),Ke()(),ze(6,Rue,2,9,"label",6)}2&e&&(Yr(n.styleClass),de("ngStyle",n.style)("ngClass",Yu(18,kue,n.checked(),n.disabled,n.focused)),we(2),de("readonly",n.readonly)("value",n.value)("checked",n.checked())("disabled",n.disabled),Lr("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("aria-checked",n.checked())("required",n.required),we(2),de("ngClass",Yu(22,Oue,n.checked(),n.disabled,n.focused)),we(1),de("ngClass",n.checked()?n.checkboxIcon:null),we(1),de("ngIf",n.label))},dependencies:[Mo,Fo,ea],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),i})(),Nue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();function uy(){}const Bue=function(){let i=0;return function(){return i++}}();function Va(i){return null===i||typeof i>"u"}function rc(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function xa(i){return null!==i&&"[object Object]"===Object.prototype.toString.call(i)}const Lu=i=>("number"==typeof i||i instanceof Number)&&isFinite(+i);function Ag(i,t){return Lu(i)?i:t}function Vo(i,t){return typeof i>"u"?t:i}const U4=(i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100*t:+i;function sc(i,t,e){if(i&&"function"==typeof i.call)return i.apply(e,t)}function Ml(i,t,e,n){let r,s,o;if(rc(i))if(s=i.length,n)for(r=s-1;r>=0;r--)t.call(e,i[r],r);else for(r=0;r<s;r++)t.call(e,i[r],r);else if(xa(i))for(o=Object.keys(i),s=o.length,r=0;r<s;r++)t.call(e,i[o[r]],o[r])}function tS(i,t){let e,n,r,s;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function nS(i){if(rc(i))return i.map(nS);if(xa(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let r=0;for(;r<n;++r)t[e[r]]=nS(i[e[r]]);return t}return i}function H4(i){return-1===["__proto__","prototype","constructor"].indexOf(i)}function Vue(i,t,e,n){if(!H4(i))return;const r=t[i],s=e[i];xa(r)&&xa(s)?RA(r,s,n):t[i]=nS(s)}function RA(i,t,e){const n=rc(t)?t:[t],r=n.length;if(!xa(i))return i;const s=(e=e||{}).merger||Vue;for(let o=0;o<r;++o){if(!xa(t=n[o]))continue;const l=Object.keys(t);for(let u=0,p=l.length;u<p;++u)s(l[u],i,t,e)}return i}function kA(i,t){return RA(i,t,{merger:Uue})}function Uue(i,t,e){if(!H4(i))return;const n=t[i],r=e[i];xa(n)&&xa(r)?kA(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=nS(r))}const G4={"":i=>i,x:i=>i.x,y:i=>i.y};function u_(i,t){return(G4[t]||(G4[t]=function Hue(i){const t=function Gue(i){const t=i.split("."),e=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}(i);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t)))(i)}function Q2(i){return i.charAt(0).toUpperCase()+i.slice(1)}const xg=i=>typeof i<"u",d_=i=>"function"==typeof i,W4=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0},Lc=Math.PI,Nl=2*Lc,jue=Nl+Lc,iS=Number.POSITIVE_INFINITY,$ue=Lc/180,_u=Lc/2,OA=Lc/4,j4=2*Lc/3,Ig=Math.log10,uv=Math.sign;function $4(i){const t=Math.round(i);i=FA(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(Ig(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function fC(i){return!isNaN(parseFloat(i))&&isFinite(i)}function FA(i,t,e){return Math.abs(i-t)<e}function q4(i,t,e){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function vm(i){return i*(Lc/180)}function J2(i){return i*(180/Lc)}function X4(i){if(!Lu(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function Y4(i,t){const e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n);let s=Math.atan2(n,e);return s<-.5*Lc&&(s+=Nl),{angle:s,distance:r}}function eL(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Yue(i,t){return(i-t+jue)%Nl-Lc}function Bp(i){return(i%Nl+Nl)%Nl}function NA(i,t,e,n){const r=Bp(i),s=Bp(t),o=Bp(e),l=Bp(s-r),u=Bp(o-r),p=Bp(r-s),v=Bp(r-o);return r===s||r===o||n&&s===o||l>u&&p<v}function Ud(i,t,e){return Math.max(t,Math.min(e,i))}function dy(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function tL(i,t,e){e=e||(o=>i[o]<t);let s,n=i.length-1,r=0;for(;n-r>1;)s=r+n>>1,e(s)?r=s:n=s;return{lo:r,hi:n}}const hy=(i,t,e,n)=>tL(i,e,n?r=>i[r][t]<=e:r=>i[r][t]<e),Zue=(i,t,e)=>tL(i,e,n=>i[n][t]>=e),K4=["push","pop","shift","splice","unshift"];function Z4(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,r=n.indexOf(t);-1!==r&&n.splice(r,1),!(n.length>0)&&(K4.forEach(s=>{delete i[s]}),delete i._chartjs)}function Q4(i){const t=new Set;let e,n;for(e=0,n=i.length;e<n;++e)t.add(i[e]);return t.size===n?i:Array.from(t)}const J4=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function eU(i,t,e){const n=e||(o=>Array.prototype.slice.call(o));let r=!1,s=[];return function(...o){s=n(o),r||(r=!0,J4.call(window,()=>{r=!1,i.apply(t,s)}))}}const nL=i=>"start"===i?"left":"end"===i?"right":"center",Uh=(i,t,e)=>"start"===i?t:"end"===i?e:(t+e)/2;function tU(i,t,e){const n=t.length;let r=0,s=n;if(i._sorted){const{iScale:o,_parsed:l}=i,u=o.axis,{min:p,max:v,minDefined:w,maxDefined:I}=o.getUserBounds();w&&(r=Ud(Math.min(hy(l,o.axis,p).lo,e?n:hy(t,u,o.getPixelForValue(p)).lo),0,n-1)),s=I?Ud(Math.max(hy(l,o.axis,v,!0).hi+1,e?0:hy(t,u,o.getPixelForValue(v),!0).hi+1),r,n)-r:n-r}return{start:r,count:s}}function nU(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=r,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,r),s}const rS=i=>0===i||1===i,iU=(i,t,e)=>-Math.pow(2,10*(i-=1))*Math.sin((i-t)*Nl/e),rU=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*Nl/e)+1,BA={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*_u),easeOutSine:i=>Math.sin(i*_u),easeInOutSine:i=>-.5*(Math.cos(Lc*i)-1),easeInExpo:i=>0===i?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>1===i?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>rS(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>rS(i)?i:iU(i,.075,.3),easeOutElastic:i=>rS(i)?i:rU(i,.075,.3),easeInOutElastic:i=>rS(i)?i:i<.5?.5*iU(2*i,.1125,.45):.5+.5*rU(2*i-1,.1125,.45),easeInBack:i=>i*i*(2.70158*i-1.70158),easeOutBack:i=>(i-=1)*i*(2.70158*i+1.70158)+1,easeInOutBack(i){let t=1.70158;return(i/=.5)<1?i*i*((1+(t*=1.525))*i-t)*.5:.5*((i-=2)*i*((1+(t*=1.525))*i+t)+2)},easeInBounce:i=>1-BA.easeOutBounce(1-i),easeOutBounce:i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,easeInOutBounce:i=>i<.5?.5*BA.easeInBounce(2*i):.5*BA.easeOutBounce(2*i-1)+.5};function zA(i){return i+.5|0}const h_=(i,t,e)=>Math.max(Math.min(i,e),t);function VA(i){return h_(zA(2.55*i),0,255)}function f_(i){return h_(zA(255*i),0,255)}function fy(i){return h_(zA(i/2.55)/100,0,1)}function sU(i){return h_(zA(100*i),0,100)}const Sg={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},iL=[..."0123456789ABCDEF"],nde=i=>iL[15&i],ide=i=>iL[(240&i)>>4]+iL[15&i],sS=i=>(240&i)>>4==(15&i);const lde=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function oU(i,t,e){const n=t*Math.min(e,1-e),r=(s,o=(s+i/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function cde(i,t,e){const n=(r,s=(r+i/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function ude(i,t,e){const n=oU(i,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function rL(i){const e=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(e,n,r),o=Math.min(e,n,r),l=(s+o)/2;let u,p,v;return s!==o&&(v=s-o,p=l>.5?v/(2-s-o):v/(s+o),u=function dde(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}(e,n,r,v,s),u=60*u+.5),[0|u,p||0,l]}function sL(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(f_)}function oL(i,t,e){return sL(oU,i,t,e)}function aU(i){return(i%360+360)%360}const lU={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cU={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let oS;const _de=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,aL=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,pC=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function aS(i,t,e){if(i){let n=rL(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,0===t?360:1)),n=oL(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function uU(i,t){return i&&Object.assign(t||{},i)}function dU(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=f_(i[3]))):(t=uU(i,{r:0,g:0,b:0,a:1})).a=f_(t.a),t}function Ade(i){return"r"===i.charAt(0)?function bde(i){const t=_de.exec(i);let n,r,s,e=255;if(t){if(t[7]!==n){const o=+t[7];e=t[8]?VA(o):h_(255*o,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?VA(n):h_(n,0,255)),r=255&(t[4]?VA(r):h_(r,0,255)),s=255&(t[6]?VA(s):h_(s,0,255)),{r:n,g:r,b:s,a:e}}}(i):function pde(i){const t=lde.exec(i);let n,e=255;if(!t)return;t[5]!==n&&(e=t[6]?VA(+t[5]):f_(+t[5]));const r=aU(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function hde(i,t,e){return sL(ude,i,t,e)}(r,s,o):"hsv"===t[1]?function fde(i,t,e){return sL(cde,i,t,e)}(r,s,o):oL(r,s,o),{r:n[0],g:n[1],b:n[2],a:e}}(i)}class lS{constructor(t){if(t instanceof lS)return t;const e=typeof t;let n;"object"===e?n=dU(t):"string"===e&&(n=function sde(i){var e,t=i.length;return"#"===i[0]&&(4===t||5===t?e={r:255&17*Sg[i[1]],g:255&17*Sg[i[2]],b:255&17*Sg[i[3]],a:5===t?17*Sg[i[4]]:255}:(7===t||9===t)&&(e={r:Sg[i[1]]<<4|Sg[i[2]],g:Sg[i[3]]<<4|Sg[i[4]],b:Sg[i[5]]<<4|Sg[i[6]],a:9===t?Sg[i[7]]<<4|Sg[i[8]]:255})),e}(t)||function yde(i){oS||(oS=function vde(){const i={},t=Object.keys(cU),e=Object.keys(lU);let n,r,s,o,l;for(n=0;n<t.length;n++){for(o=l=t[n],r=0;r<e.length;r++)s=e[r],l=l.replace(s,lU[s]);s=parseInt(cU[o],16),i[l]=[s>>16&255,s>>8&255,255&s]}return i}(),oS.transparent=[0,0,0,0]);const t=oS[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||Ade(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=uU(this._rgb);return t&&(t.a=fy(t.a)),t}set rgb(t){this._rgb=dU(t)}rgbString(){return this._valid?function Cde(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${fy(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}(this._rgb):void 0}hexString(){return this._valid?function ade(i){var t=(i=>sS(i.r)&&sS(i.g)&&sS(i.b)&&sS(i.a))(i)?nde:ide;return i?"#"+t(i.r)+t(i.g)+t(i.b)+((i,t)=>i<255?t(i):"")(i.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function mde(i){if(!i)return;const t=rL(i),e=t[0],n=sU(t[1]),r=sU(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${fy(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,l=2*o-1,u=n.a-r.a,p=((l*u==-1?l:(l+u)/(1+l*u))+1)/2;s=1-p,n.r=255&p*n.r+s*r.r+.5,n.g=255&p*n.g+s*r.g+.5,n.b=255&p*n.b+s*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function wde(i,t,e){const n=pC(fy(i.r)),r=pC(fy(i.g)),s=pC(fy(i.b));return{r:f_(aL(n+e*(pC(fy(t.r))-n))),g:f_(aL(r+e*(pC(fy(t.g))-r))),b:f_(aL(s+e*(pC(fy(t.b))-s))),a:i.a+e*(t.a-i.a)}}(this._rgb,t._rgb,e)),this}clone(){return new lS(this.rgb)}alpha(t){return this._rgb.a=f_(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=zA(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return aS(this._rgb,2,t),this}darken(t){return aS(this._rgb,2,-t),this}saturate(t){return aS(this._rgb,1,t),this}desaturate(t){return aS(this._rgb,1,-t),this}rotate(t){return function gde(i,t){var e=rL(i);e[0]=aU(e[0]+t),e=oL(e),i.r=e[0],i.g=e[1],i.b=e[2]}(this._rgb,t),this}}function hU(i){return new lS(i)}function fU(i){if(i&&"object"==typeof i){const t=i.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function pU(i){return fU(i)?i:hU(i)}function lL(i){return fU(i)?i:hU(i).saturate(.5).darken(.1).hexString()}const I0=Object.create(null),cL=Object.create(null);function UA(i,t){if(!t)return i;const e=t.split(".");for(let n=0,r=e.length;n<r;++n){const s=e[n];i=i[s]||(i[s]=Object.create(null))}return i}function uL(i,t,e){return"string"==typeof t?RA(UA(i,t),e):RA(UA(i,""),t)}var Ta=new class xde{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,n)=>lL(n.backgroundColor),this.hoverBorderColor=(e,n)=>lL(n.borderColor),this.hoverColor=(e,n)=>lL(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return uL(this,t,e)}get(t){return UA(this,t)}describe(t,e){return uL(cL,t,e)}override(t,e){return uL(I0,t,e)}route(t,e,n,r){const s=UA(this,t),o=UA(this,n),l="_"+e;Object.defineProperties(s,{[l]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const u=this[l],p=o[r];return xa(u)?Object.assign({},p,u):Vo(u,p)},set(u){this[l]=u}}})}}({_scriptable:i=>!i.startsWith("on"),_indexable:i=>"events"!==i,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function cS(i,t,e,n,r){let s=t[r];return s||(s=t[r]=i.measureText(r).width,e.push(r)),s>n&&(n=s),n}function Sde(i,t,e,n){let r=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),i.save(),i.font=t;let o=0;const l=e.length;let u,p,v,w,I;for(u=0;u<l;u++)if(w=e[u],null!=w&&!0!==rc(w))o=cS(i,r,s,o,w);else if(rc(w))for(p=0,v=w.length;p<v;p++)I=w[p],null!=I&&!rc(I)&&(o=cS(i,r,s,o,I));i.restore();const T=s.length/2;if(T>e.length){for(u=0;u<T;u++)delete r[s[u]];s.splice(0,T)}return o}function S0(i,t,e){const n=i.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function gU(i,t){(t=t||i.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function dL(i,t,e,n){mU(i,t,e,n,null)}function mU(i,t,e,n,r){let s,o,l,u,p,v;const w=t.pointStyle,I=t.rotation,T=t.radius;let k=(I||0)*$ue;if(w&&"object"==typeof w&&(s=w.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return i.save(),i.translate(e,n),i.rotate(k),i.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),void i.restore();if(!(isNaN(T)||T<=0)){switch(i.beginPath(),w){default:r?i.ellipse(e,n,r/2,T,0,0,Nl):i.arc(e,n,T,0,Nl),i.closePath();break;case"triangle":i.moveTo(e+Math.sin(k)*T,n-Math.cos(k)*T),k+=j4,i.lineTo(e+Math.sin(k)*T,n-Math.cos(k)*T),k+=j4,i.lineTo(e+Math.sin(k)*T,n-Math.cos(k)*T),i.closePath();break;case"rectRounded":p=.516*T,u=T-p,o=Math.cos(k+OA)*u,l=Math.sin(k+OA)*u,i.arc(e-o,n-l,p,k-Lc,k-_u),i.arc(e+l,n-o,p,k-_u,k),i.arc(e+o,n+l,p,k,k+_u),i.arc(e-l,n+o,p,k+_u,k+Lc),i.closePath();break;case"rect":if(!I){u=Math.SQRT1_2*T,v=r?r/2:u,i.rect(e-v,n-u,2*v,2*u);break}k+=OA;case"rectRot":o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+l,n-o),i.lineTo(e+o,n+l),i.lineTo(e-l,n+o),i.closePath();break;case"crossRot":k+=OA;case"cross":o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"star":o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o),k+=OA,o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"line":o=r?r/2:Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(k)*T,n+Math.sin(k)*T)}i.fill(),t.borderWidth>0&&i.stroke()}}function HA(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function uS(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function dS(i){i.restore()}function Ede(i,t,e,n,r){if(!t)return i.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;i.lineTo(s,t.y),i.lineTo(s,e.y)}else"after"===r!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function Tde(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function E0(i,t,e,n,r,s={}){const o=rc(t)?t:[t],l=s.strokeWidth>0&&""!==s.strokeColor;let u,p;for(i.save(),i.font=r.string,function Mde(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),Va(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}(i,s),u=0;u<o.length;++u)p=o[u],l&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),Va(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(p,e,n,s.maxWidth)),i.fillText(p,e,n,s.maxWidth),Dde(i,e,n,p,s),n+=r.lineHeight;i.restore()}function Dde(i,t,e,n,r){if(r.strikethrough||r.underline){const s=i.measureText(n),o=t-s.actualBoundingBoxLeft,l=t+s.actualBoundingBoxRight,u=e-s.actualBoundingBoxAscent,p=e+s.actualBoundingBoxDescent,v=r.strikethrough?(u+p)/2:p;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,v),i.lineTo(l,v),i.stroke()}}function GA(i,t){const{x:e,y:n,w:r,h:s,radius:o}=t;i.arc(e+o.topLeft,n+o.topLeft,o.topLeft,-_u,Lc,!0),i.lineTo(e,n+s-o.bottomLeft),i.arc(e+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,Lc,_u,!0),i.lineTo(e+r-o.bottomRight,n+s),i.arc(e+r-o.bottomRight,n+s-o.bottomRight,o.bottomRight,_u,0,!0),i.lineTo(e+r,n+o.topRight),i.arc(e+r-o.topRight,n+o.topRight,o.topRight,0,-_u,!0),i.lineTo(e+o.topLeft,n)}const Lde=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),Pde=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Rde(i,t){const e=(""+i).match(Lde);if(!e||"normal"===e[1])return 1.2*t;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100}return t*i}const kde=i=>+i||0;function hL(i,t){const e={},n=xa(t),r=n?Object.keys(t):t,s=xa(i)?n?o=>Vo(i[o],i[t[o]]):o=>i[o]:()=>i;for(const o of r)e[o]=kde(s(o));return e}function vU(i){return hL(i,{top:"y",right:"x",bottom:"y",left:"x"})}function T0(i){return hL(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Hh(i){const t=vU(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function _d(i,t){let e=Vo((i=i||{}).size,(t=t||Ta.font).size);"string"==typeof e&&(e=parseInt(e,10));let n=Vo(i.style,t.style);n&&!(""+n).match(Pde)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const r={family:Vo(i.family,t.family),lineHeight:Rde(Vo(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:Vo(i.weight,t.weight),string:""};return r.string=function Ide(i){return!i||Va(i.size)||Va(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}(r),r}function WA(i,t,e,n){let s,o,l,r=!0;for(s=0,o=i.length;s<o;++s)if(l=i[s],void 0!==l&&(void 0!==t&&"function"==typeof l&&(l=l(t),r=!1),void 0!==e&&rc(l)&&(l=l[e%l.length],r=!1),void 0!==l))return n&&!r&&(n.cacheable=!1),l}function p_(i,t){return Object.assign(Object.create(i),t)}function fL(i,t=[""],e=i,n,r=(()=>i[0])){xg(n)||(n=wU("_fallback",i));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:e,_fallback:n,_getTarget:r,override:o=>fL([o,...i],t,e,n)};return new Proxy(s,{deleteProperty:(o,l)=>(delete o[l],delete o._keys,delete i[0][l],!0),get:(o,l)=>_U(o,l,()=>function Gde(i,t,e,n){let r;for(const s of t)if(r=wU(Fde(s,i),e),xg(r))return pL(i,r)?gL(e,n,i,r):r}(l,t,i,o)),getOwnPropertyDescriptor:(o,l)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(o,l)=>AU(o).includes(l),ownKeys:o=>AU(o),set(o,l,u){const p=o._storage||(o._storage=r());return o[l]=p[l]=u,delete o._keys,!0}})}function gC(i,t,e,n){const r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:yU(i,n),setContext:s=>gC(i,s,e,n),override:s=>gC(i.override(s),t,e,n)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete i[o],!0),get:(s,o,l)=>_U(s,o,()=>function Nde(i,t,e){const{_proxy:n,_context:r,_subProxy:s,_descriptors:o}=i;let l=n[t];return d_(l)&&o.isScriptable(t)&&(l=function Bde(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_stack:l}=e;if(l.has(i))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+i);return l.add(i),t=t(s,o||n),l.delete(i),pL(i,t)&&(t=gL(r._scopes,r,i,t)),t}(t,l,i,e)),rc(l)&&l.length&&(l=function zde(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=e;if(xg(s.index)&&n(i))t=t[s.index%t.length];else if(xa(t[0])){const u=t,p=r._scopes.filter(v=>v!==u);t=[];for(const v of u){const w=gL(p,r,i,v);t.push(gC(w,s,o&&o[i],l))}}return t}(t,l,i,o.isIndexable)),pL(t,l)&&(l=gC(l,r,s&&s[t],o)),l}(s,o,l)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(s,o)=>Reflect.has(i,o),ownKeys:()=>Reflect.ownKeys(i),set:(s,o,l)=>(i[o]=l,delete s[o],!0)})}function yU(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:d_(e)?e:()=>e,isIndexable:d_(n)?n:()=>n}}const Fde=(i,t)=>i?i+Q2(t):t,pL=(i,t)=>xa(t)&&"adapters"!==i&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function _U(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];const n=e();return i[t]=n,n}function bU(i,t,e){return d_(i)?i(t,e):i}const Vde=(i,t)=>!0===i?t:"string"==typeof i?u_(t,i):void 0;function Ude(i,t,e,n,r){for(const s of t){const o=Vde(e,s);if(o){i.add(o);const l=bU(o._fallback,e,r);if(xg(l)&&l!==e&&l!==n)return l}else if(!1===o&&xg(n)&&e!==n)return null}return!1}function gL(i,t,e,n){const r=t._rootScopes,s=bU(t._fallback,e,n),o=[...i,...r],l=new Set;l.add(n);let u=CU(l,o,e,s||e,n);return!(null===u||xg(s)&&s!==e&&(u=CU(l,o,s,u,n),null===u))&&fL(Array.from(l),[""],r,s,()=>function Hde(i,t,e){const n=i._getTarget();t in n||(n[t]={});const r=n[t];return rc(r)&&xa(e)?e:r}(t,e,n))}function CU(i,t,e,n,r){for(;e;)e=Ude(i,t,e,n,r);return e}function wU(i,t){for(const e of t){if(!e)continue;const n=e[i];if(xg(n))return n}}function AU(i){let t=i._keys;return t||(t=i._keys=function Wde(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}(i._scopes)),t}function xU(i,t,e,n){const{iScale:r}=i,{key:s="r"}=this._parsing,o=new Array(n);let l,u,p,v;for(l=0,u=n;l<u;++l)p=l+e,v=t[p],o[l]={r:r.parse(u_(v,s),p)};return o}const jde=Number.EPSILON||1e-14,mC=(i,t)=>t<i.length&&!i[t].skip&&i[t],IU=i=>"x"===i?"y":"x";function $de(i,t,e,n){const r=i.skip?t:i,s=t,o=e.skip?t:e,l=eL(s,r),u=eL(o,s);let p=l/(l+u),v=u/(l+u);p=isNaN(p)?0:p,v=isNaN(v)?0:v;const w=n*p,I=n*v;return{previous:{x:s.x-w*(o.x-r.x),y:s.y-w*(o.y-r.y)},next:{x:s.x+I*(o.x-r.x),y:s.y+I*(o.y-r.y)}}}function hS(i,t,e){return Math.max(Math.min(i,e),t)}function Zde(i,t,e,n,r){let s,o,l,u;if(t.spanGaps&&(i=i.filter(p=>!p.skip)),"monotone"===t.cubicInterpolationMode)!function Yde(i,t="x"){const e=IU(t),n=i.length,r=Array(n).fill(0),s=Array(n);let o,l,u,p=mC(i,0);for(o=0;o<n;++o)if(l=u,u=p,p=mC(i,o+1),u){if(p){const v=p[t]-u[t];r[o]=0!==v?(p[e]-u[e])/v:0}s[o]=l?p?uv(r[o-1])!==uv(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function qde(i,t,e){const n=i.length;let r,s,o,l,u,p=mC(i,0);for(let v=0;v<n-1;++v)if(u=p,p=mC(i,v+1),u&&p){if(FA(t[v],0,jde)){e[v]=e[v+1]=0;continue}r=e[v]/t[v],s=e[v+1]/t[v],l=Math.pow(r,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),e[v]=r*o*t[v],e[v+1]=s*o*t[v])}})(i,r,s),function Xde(i,t,e="x"){const n=IU(e),r=i.length;let s,o,l,u=mC(i,0);for(let p=0;p<r;++p){if(o=l,l=u,u=mC(i,p+1),!l)continue;const v=l[e],w=l[n];o&&(s=(v-o[e])/3,l[`cp1${e}`]=v-s,l[`cp1${n}`]=w-s*t[p]),u&&(s=(u[e]-v)/3,l[`cp2${e}`]=v+s,l[`cp2${n}`]=w+s*t[p])}}(i,s,t)}(i,r);else{let p=n?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)l=i[s],u=$de(p,l,i[Math.min(s+1,o-(n?0:1))%o],t.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,p=l}t.capBezierPoints&&function Kde(i,t){let e,n,r,s,o,l=HA(i[0],t);for(e=0,n=i.length;e<n;++e)o=s,s=l,l=e<n-1&&HA(i[e+1],t),s&&(r=i[e],o&&(r.cp1x=hS(r.cp1x,t.left,t.right),r.cp1y=hS(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=hS(r.cp2x,t.left,t.right),r.cp2y=hS(r.cp2y,t.top,t.bottom)))}(i,e)}function SU(){return typeof window<"u"&&typeof document<"u"}function mL(i){let t=i.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function fS(i,t,e){let n;return"string"==typeof i?(n=parseInt(i,10),-1!==i.indexOf("%")&&(n=n/100*t.parentNode[e])):n=i,n}const pS=i=>window.getComputedStyle(i,null),Jde=["top","right","bottom","left"];function M0(i,t,e){const n={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=Jde[r];n[s]=parseFloat(i[t+"-"+s+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function D0(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,r=pS(e),s="border-box"===r.boxSizing,o=M0(r,"padding"),l=M0(r,"border","width"),{x:u,y:p,box:v}=function the(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:s}=n;let l,u,o=!1;if(((i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot))(r,s,i.target))l=r,u=s;else{const p=t.getBoundingClientRect();l=n.clientX-p.left,u=n.clientY-p.top,o=!0}return{x:l,y:u,box:o}}(i,e),w=o.left+(v&&l.left),I=o.top+(v&&l.top);let{width:T,height:k}=t;return s&&(T-=o.width+l.width,k-=o.height+l.height),{x:Math.round((u-w)/T*e.width/n),y:Math.round((p-I)/k*e.height/n)}}const vL=i=>Math.round(10*i)/10;function EU(i,t,e){const n=t||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=r/n,i.width=s/n;const o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==n||o.height!==r||o.width!==s)&&(i.currentDevicePixelRatio=n,o.height=r,o.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0)}const rhe=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return i}();function TU(i,t){const e=function Qde(i,t){return pS(i).getPropertyValue(t)}(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function L0(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function she(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:"middle"===n?e<.5?i.y:t.y:"after"===n?e<1?i.y:t.y:e>0?t.y:i.y}}function ohe(i,t,e,n){const r={x:i.cp2x,y:i.cp2y},s={x:t.cp1x,y:t.cp1y},o=L0(i,r,e),l=L0(r,s,e),u=L0(s,t,e),p=L0(o,l,e),v=L0(l,u,e);return L0(p,v,e)}const MU=new Map;function jA(i,t,e){return function ahe(i,t){t=t||{};const e=i+JSON.stringify(t);let n=MU.get(e);return n||(n=new Intl.NumberFormat(i,t),MU.set(e,n)),n}(t,e).format(i)}function vC(i,t,e){return i?function(i,t){return{x:e=>i+i+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,n)=>e-n,leftForLtr:(e,n)=>e-n}}(t,e):{x:i=>i,setWidth(i){},textAlign:i=>i,xPlus:(i,t)=>i+t,leftForLtr:(i,t)=>i}}function DU(i,t){let e,n;("ltr"===t||"rtl"===t)&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function LU(i,t){void 0!==t&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function PU(i){return"angle"===i?{between:NA,compare:Yue,normalize:Bp}:{between:dy,compare:(t,e)=>t-e,normalize:t=>t}}function RU({start:i,end:t,count:e,loop:n,style:r}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e==0,style:r}}function kU(i,t,e){if(!e)return[i];const{property:n,start:r,end:s}=e,o=t.length,{compare:l,between:u,normalize:p}=PU(n),{start:v,end:w,loop:I,style:T}=function uhe(i,t,e){const{property:n,start:r,end:s}=e,{between:o,normalize:l}=PU(n),u=t.length;let I,T,{start:p,end:v,loop:w}=i;if(w){for(p+=u,v+=u,I=0,T=u;I<T&&o(l(t[p%u][n]),r,s);++I)p--,v--;p%=u,v%=u}return v<p&&(v+=u),{start:p,end:v,loop:w,style:i.style}}(i,t,e),k=[];let ue,xe,be,H=!1,X=null;for(let it=v,Tt=v;it<=w;++it)xe=t[it%o],!xe.skip&&(ue=p(xe[n]),ue!==be&&(H=u(ue,r,s),null===X&&(H||u(r,be,ue)&&0!==l(r,be))&&(X=0===l(ue,r)?it:Tt),null!==X&&(!H||0===l(s,ue)||u(s,be,ue))&&(k.push(RU({start:X,end:it,loop:I,count:o,style:T})),X=null),Tt=it,be=ue));return null!==X&&k.push(RU({start:X,end:w,loop:I,count:o,style:T})),k}function OU(i,t){const e=[],n=i.segments;for(let r=0;r<n.length;r++){const s=kU(n[r],i.points,t);s.length&&e.push(...s)}return e}function NU(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function ghe(i,t){return t&&JSON.stringify(i)!==JSON.stringify(t)}var py=new class mhe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const o=e.duration;e.listeners[r].forEach(l=>l({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=J4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let u,o=s.length-1,l=!1;for(;o>=0;--o)u=s[o],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(t),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,n,t,"progress")),s.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const BU="transparent",vhe={boolean:(i,t,e)=>e>.5?t:i,color(i,t,e){const n=pU(i||BU),r=n.valid&&pU(t||BU);return r&&r.valid?r.mix(n,e).hexString():t},number:(i,t,e)=>i+(t-i)*e};class yhe{constructor(t,e,n,r){const s=e[n];r=WA([t.to,r,s,t.from]);const o=WA([t.from,s,r]);this._active=!0,this._fn=t.fn||vhe[t.type||typeof o],this._easing=BA[t.easing]||BA.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=WA([t.to,e,r,t.from]),this._from=WA([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,s=this._from,o=this._loop,l=this._to;let u;if(this._active=s!==l&&(o||e<n),!this._active)return this._target[r]=l,void this._notify(!0);e<0?this._target[r]=s:(u=e/n%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(s,l,u))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}Ta.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Che=Object.keys(Ta.animation);Ta.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>"onProgress"!==i&&"onComplete"!==i&&"fn"!==i}),Ta.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Ta.describe("animations",{_fallback:"animation"}),Ta.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>0|i}}}});class zU{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!xa(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!xa(r))return;const s={};for(const o of Che)s[o]=r[o];(rc(r.properties)&&r.properties||[n]).forEach(o=>{(o===n||!e.has(o))&&e.set(o,s)})})}_animateOptions(t,e){const n=e.options,r=function Ahe(i,t){if(!t)return;let e=i.options;if(e)return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;i.options=t}(t,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function whe(i,t){const e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const s=i[n[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,e){const n=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),l=Date.now();let u;for(u=o.length-1;u>=0;--u){const p=o[u];if("$"===p.charAt(0))continue;if("options"===p){r.push(...this._animateOptions(t,e));continue}const v=e[p];let w=s[p];const I=n.get(p);if(w){if(I&&w.active()){w.update(I,v,l);continue}w.cancel()}I&&I.duration?(s[p]=w=new yhe(I,t,p,v),r.push(w)):t[p]=v}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(py.add(this._chart,n),!0):void 0}}function VU(i,t){const e=i&&i.options||{},n=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:n?s:r,end:n?r:s}}function UU(i,t){const e=[],n=i._getSortedDatasetMetas(t);let r,s;for(r=0,s=n.length;r<s;++r)e.push(n[r].index);return e}function HU(i,t,e,n={}){const r=i.keys,s="single"===n.mode;let o,l,u,p;if(null!==t){for(o=0,l=r.length;o<l;++o){if(u=+r[o],u===e){if(n.all)continue;break}p=i.values[u],Lu(p)&&(s||0===t||uv(t)===uv(p))&&(t+=p)}return t}}function GU(i,t){const e=i&&i.options.stacked;return e||void 0===e&&void 0!==t.stack}function Mhe(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function WU(i,t,e,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const s=i[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function jU(i,t){const{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:l}=n,u=s.axis,p=o.axis,v=function Ehe(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}(s,o,n),w=t.length;let I;for(let T=0;T<w;++T){const k=t[T],{[u]:H,[p]:X}=k;I=(k._stacks||(k._stacks={}))[p]=Mhe(r,v,H),I[l]=X,I._top=WU(I,o,!0,n.type),I._bottom=WU(I,o,!1,n.type)}}function yL(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function $A(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[n]||void 0===s[n][e])return;delete s[n][e]}}}const _L=i=>"reset"===i||"none"===i,$U=(i,t)=>t?i:Object.assign({},i);let dv=(()=>{class i{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=GU(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&$A(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(I,T,k,H)=>"x"===I?T:"r"===I?H:k,o=n.xAxisID=Vo(r.xAxisID,yL(e,"x")),l=n.yAxisID=Vo(r.yAxisID,yL(e,"y")),u=n.rAxisID=Vo(r.rAxisID,yL(e,"r")),p=n.indexAxis,v=n.iAxisID=s(p,o,l,u),w=n.vAxisID=s(p,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(v),n.vScale=this.getScaleForId(w)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Z4(this._data,this),e._stacked&&$A(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(xa(n))this._data=function She(i){const t=Object.keys(i),e=new Array(t.length);let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],e[n]={x:s,y:i[s]};return e}(n);else if(r!==n){if(r){Z4(r,this);const s=this._cachedMeta;$A(s),s._parsed=[]}n&&Object.isExtensible(n)&&function Jue(i,t){i._chartjs?i._chartjs.listeners.push(t):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),K4.forEach(e=>{const n="_onData"+Q2(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return i._chartjs.listeners.forEach(l=>{"function"==typeof l[n]&&l[n](...s)}),o}})}))}(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=n._stacked;n._stacked=GU(n.vScale,n),n.stack!==r.stack&&(s=!0,$A(n),n.stack=r.stack),this._resyncElements(e),(s||o!==n._stacked)&&jU(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:l}=r,u=o.axis;let w,I,T,p=0===e&&n===s.length||r._sorted,v=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,T=s;else{T=rc(s[e])?this.parseArrayData(r,s,e,n):xa(s[e])?this.parseObjectData(r,s,e,n):this.parsePrimitiveData(r,s,e,n);const k=()=>null===I[u]||v&&I[u]<v[u];for(w=0;w<n;++w)r._parsed[w+e]=I=T[w],p&&(k()&&(p=!1),v=I);r._sorted=p}l&&jU(this,T)}parsePrimitiveData(e,n,r,s){const{iScale:o,vScale:l}=e,u=o.axis,p=l.axis,v=o.getLabels(),w=o===l,I=new Array(s);let T,k,H;for(T=0,k=s;T<k;++T)H=T+r,I[T]={[u]:w||o.parse(v[H],H),[p]:l.parse(n[H],H)};return I}parseArrayData(e,n,r,s){const{xScale:o,yScale:l}=e,u=new Array(s);let p,v,w,I;for(p=0,v=s;p<v;++p)w=p+r,I=n[w],u[p]={x:o.parse(I[0],w),y:l.parse(I[1],w)};return u}parseObjectData(e,n,r,s){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v=new Array(s);let w,I,T,k;for(w=0,I=s;w<I;++w)T=w+r,k=n[T],v[w]={x:o.parse(u_(k,u),T),y:l.parse(u_(k,p),T)};return v}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const o=this._cachedMeta,l=n[e.axis];return HU({keys:UU(this.chart,!0),values:n._stacks[e.axis]},l,o.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const o=r[n.axis];let l=null===o?NaN:o;const u=s&&r._stacks[n.axis];s&&u&&(s.values=u,l=HU(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,l=s.length,u=this._getOtherScale(e),p=((i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:UU(this.chart,!0),values:null})(n,r),v={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:w,max:I}=function The(i){const{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(u);let T,k;function H(){k=s[T];const X=k[u.axis];return!Lu(k[e.axis])||w>X||I<X}for(T=0;T<l&&(H()||(this.updateRangeFromParsed(v,e,k,p),!o));++T);if(o)for(T=l-1;T>=0;--T)if(!H()){this.updateRangeFromParsed(v,e,k,p);break}return v}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,o,l;for(s=0,o=n.length;s<o;++s)l=n[s][e.axis],Lu(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=function Ihe(i){let t,e,n,r;return xa(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:!1===i}}(Vo(this.options.clip,function xhe(i,t,e){if(!1===e)return!1;const n=VU(i,e),r=VU(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,l=[],u=this._drawStart||0,p=this._drawCount||s.length-u,v=this.options.drawActiveElementsOnTop;let w;for(r.dataset&&r.dataset.draw(e,o,u,p),w=u;w<u+p;++w){const I=s[w];I.hidden||(I.active&&v?l.push(I):I.draw(e,o))}for(w=0;w<l.length;++w)l[w].draw(e,o)}getStyle(e,n){const r=n?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=function Lhe(i,t,e){return p_(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function Dhe(i,t){return p_(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s="active"===n,o=this._cachedDataOpts,l=e+"-"+n,u=o[l],p=this.enableOptionSharing&&xg(r);if(u)return $U(u,p);const v=this.chart.config,w=v.datasetElementScopeKeys(this._type,e),I=s?[`${e}Hover`,"hover",e,""]:[e,""],T=v.getOptionScopes(this.getDataset(),w),k=Object.keys(Ta.elements[e]),X=v.resolveNamedOptions(T,k,()=>this.getContext(r,s),I);return X.$shared&&(X.$shared=p,o[l]=Object.freeze($U(X,p))),X}_resolveAnimations(e,n,r){const s=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let p;if(!1!==s.options.animation){const w=this.chart.config,I=w.datasetAnimationScopeKeys(this._type,n),T=w.getOptionScopes(this.getDataset(),I);p=w.createResolver(T,this.getContext(e,r,n))}const v=new zU(s,p&&p.animations);return p&&p._cacheable&&(o[l]=Object.freeze(v)),v}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||_L(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,r),{sharedOptions:o,includeOptions:l}}updateElement(e,n,r,s){_L(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!_L(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const o=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[u,p,v]of this._syncList)this[u](p,v);this._syncList=[];const s=r.length,o=n.length,l=Math.min(o,s);l&&this.parse(0,l),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,n,r=!0){const s=this._cachedMeta,o=s.data,l=e+n;let u;const p=v=>{for(v.length+=n,u=v.length-1;u>=l;u--)v[u]=v[u-n]};for(p(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&p(s._parsed),this.parse(e,n),r&&this.updateElements(o,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&$A(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i.defaults={},i})();function khe(i){const t=i.iScale,e=function Rhe(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let r=0,s=e.length;r<s;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=Q4(n.sort((r,s)=>r-s))}return i._cache.$bar}(t,i.type);let r,s,o,l,n=t._length;const u=()=>{32767===o||-32768===o||(xg(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),u();for(l=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),u();return n}function qU(i,t,e,n){return rc(i)?function Nhe(i,t,e,n){const r=e.parse(i[0],n),s=e.parse(i[1],n),o=Math.min(r,s),l=Math.max(r,s);let u=o,p=l;Math.abs(o)>Math.abs(l)&&(u=l,p=o),t[e.axis]=p,t._custom={barStart:u,barEnd:p,start:r,end:s,min:o,max:l}}(i,t,e,n):t[e.axis]=e.parse(i,n),t}function XU(i,t,e,n){const r=i.iScale,s=i.vScale,o=r.getLabels(),l=r===s,u=[];let p,v,w,I;for(p=e,v=e+n;p<v;++p)I=t[p],w={},w[r.axis]=l||r.parse(o[p],p),u.push(qU(I,w,s,p));return u}function bL(i){return i&&void 0!==i.barStart&&void 0!==i.barEnd}function Vhe(i,t,e,n){let r=t.borderSkipped;const s={};if(!r)return void(i.borderSkipped=s);if(!0===r)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:l,reverse:u,top:p,bottom:v}=function zhe(i){let t,e,n,r,s;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:n,reverse:t,top:r,bottom:s}}(i);"middle"===r&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=p:(e._bottom||0)===n?r=v:(s[YU(v,o,l,u)]=!0,r=p)),s[YU(r,o,l,u)]=!0,i.borderSkipped=s}function YU(i,t,e,n){return n?(i=function Uhe(i,t,e){return i===t?e:i===e?t:i}(i,t,e),i=KU(i,e,t)):i=KU(i,t,e),i}function KU(i,t,e){return"start"===i?t:"end"===i?e:i}function Hhe(i,{inflateAmount:t},e){i.inflateAmount="auto"===t?1===e?.33:0:t}dv.prototype.datasetElementType=null,dv.prototype.dataElementType=null;let Ghe=(()=>{class i extends dv{parsePrimitiveData(e,n,r,s){return XU(e,n,r,s)}parseArrayData(e,n,r,s){return XU(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:o,vScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v="x"===o.axis?u:p,w="x"===l.axis?u:p,I=[];let T,k,H,X;for(T=r,k=r+s;T<k;++T)X=n[T],H={},H[o.axis]=o.parse(u_(X,v),T),I.push(qU(u_(X,w),H,l,T));return I}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const o=r._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,o=this.getParsed(e),l=o._custom,u=bL(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const o="reset"===s,{index:l,_cachedMeta:{vScale:u}}=this,p=u.getBasePixel(),v=u.isHorizontal(),w=this._getRuler(),{sharedOptions:I,includeOptions:T}=this._getSharedOptions(n,s);for(let k=n;k<n+r;k++){const H=this.getParsed(k),X=o||Va(H[u.axis])?{base:p,head:p}:this._calculateBarValuePixels(k),ue=this._calculateBarIndexPixels(k,w),xe=(H._stacks||{})[u.axis],be={horizontal:v,base:X.base,enableBorderRadius:!xe||bL(H._custom)||l===xe._top||l===xe._bottom,x:v?X.head:ue.center,y:v?ue.center:X.head,height:v?ue.size:Math.abs(X.size),width:v?Math.abs(X.size):ue.size};T&&(be.options=I||this.resolveDataElementOptions(k,e[k].active?"active":s));const Se=be.options||e[k].options;Vhe(be,Se,xe,l),Hhe(be,Se,w.ratio),this.updateElement(e[k],k,be,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=r.options.stacked,l=[],u=p=>{const v=p.controller.getParsed(n),w=v&&v[p.vScale.axis];if(Va(w)||isNaN(w))return!0};for(const p of s)if((void 0===n||!u(p))&&((!1===o||-1===l.indexOf(p.stack)||void 0===o&&void 0===p.stack)&&l.push(p.stack),p.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),o=void 0!==n?s.indexOf(n):-1;return-1===o?s.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let o,l;for(o=0,l=n.data.length;o<l;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const u=e.barThickness;return{min:u||khe(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r},options:{base:s,minBarLength:o}}=this,l=s||0,u=this.getParsed(e),p=u._custom,v=bL(p);let k,H,w=u[n.axis],I=0,T=r?this.applyStack(n,u,r):w;T!==w&&(I=T-w,T=w),v&&(w=p.barStart,T=p.barEnd-p.barStart,0!==w&&uv(w)!==uv(p.barEnd)&&(I=0),I+=w);const X=Va(s)||v?I:s;let ue=n.getPixelForValue(X);if(k=this.chart.getDataVisibility(e)?n.getPixelForValue(I+T):ue,H=k-ue,Math.abs(H)<o){H=function Bhe(i,t,e){return 0!==i?uv(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(H,n,l)*o,w===l&&(ue-=H/2);const xe=n.getPixelForDecimal(0),be=n.getPixelForDecimal(1),Se=Math.min(xe,be),Ye=Math.max(xe,be);ue=Math.max(Math.min(ue,Ye),Se),k=ue+H}if(ue===n.getPixelForValue(l)){const xe=uv(H)*n.getLineWidthForValue(l)/2;ue+=xe,H-=xe}return{size:H,base:ue,head:k,center:k+H/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,o=s.skipNull,l=Vo(s.maxBarThickness,1/0);let u,p;if(n.grouped){const v=o?this._getStackCount(e):n.stackCount,w="flex"===s.barThickness?function Fhe(i,t,e,n){const r=t.pixels,s=r[i];let o=i>0?r[i-1]:null,l=i<r.length-1?r[i+1]:null;const u=e.categoryPercentage;null===o&&(o=s-(null===l?t.end-t.start:l-s)),null===l&&(l=s+s-o);const p=s-(s-Math.min(o,l))/2*u;return{chunk:Math.abs(l-o)/2*u/n,ratio:e.barPercentage,start:p}}(e,n,s,v):function Ohe(i,t,e,n){const r=e.barThickness;let s,o;return Va(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*n,o=1),{chunk:s/n,ratio:o,start:t.pixels[i]-s/2}}(e,n,s,v),I=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);u=w.start+w.chunk*I+w.chunk/2,p=Math.min(l,w.chunk*w.ratio)}else u=r.getPixelForValue(this.getParsed(e)[r.axis],e),p=Math.min(l,n.min*n.ratio);return{base:u-p/2,head:u+p/2,center:u,size:p}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[n.axis]&&r[o].draw(this._ctx)}}return i.id="bar",i.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},i.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},i})(),Whe=(()=>{class i extends dv{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,s){const o=super.parsePrimitiveData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+r).radius;return o}parseArrayData(e,n,r,s){const o=super.parseArrayData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=Vo(n[r+l][2],this.resolveDataElementOptions(l+r).radius);return o}parseObjectData(e,n,r,s){const o=super.parseObjectData(e,n,r,s);for(let l=0;l<o.length;l++){const u=n[r+l];o[l]._custom=Vo(u&&u.r&&+u.r,this.resolveDataElementOptions(l+r).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,{xScale:r,yScale:s}=n,o=this.getParsed(e),l=r.getLabelForValue(o.x),u=s.getLabelForValue(o.y),p=o._custom;return{label:n.label,value:"("+l+", "+u+(p?", "+p:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u}=this._cachedMeta,{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,s),w=l.axis,I=u.axis;for(let T=n;T<n+r;T++){const k=e[T],H=!o&&this.getParsed(T),X={},ue=X[w]=o?l.getPixelForDecimal(.5):l.getPixelForValue(H[w]),xe=X[I]=o?u.getBasePixel():u.getPixelForValue(H[I]);X.skip=isNaN(ue)||isNaN(xe),v&&(X.options=p||this.resolveDataElementOptions(T,k.active?"active":s),o&&(X.options.radius=0)),this.updateElement(k,T,X,s)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==n&&(s.radius=0),s.radius+=Vo(r&&r._custom,o),s}}return i.id="bubble",i.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},i.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},i})(),ZU=(()=>{class i extends dv{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let l,u,o=p=>+r[p];if(xa(r[e])){const{key:p="value"}=this._parsing;o=v=>+u_(r[v],p)}for(l=e,u=e+n;l<u;++l)s._parsed[l]=o(l)}}_getRotation(){return vm(this.options.rotation-90)}_getCircumference(){return vm(this.options.circumference)}_getRotationExtents(){let e=Nl,n=-Nl;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),l=s._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,o=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(r.width,r.height)-l)/2,0),p=Math.min(((i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100:i/t)(this.options.cutout,u),1),v=this._getRingWeight(this.index),{circumference:w,rotation:I}=this._getRotationExtents(),{ratioX:T,ratioY:k,offsetX:H,offsetY:X}=function jhe(i,t,e){let n=1,r=1,s=0,o=0;if(t<Nl){const l=i,u=l+t,p=Math.cos(l),v=Math.sin(l),w=Math.cos(u),I=Math.sin(u),T=(be,Se,Ye)=>NA(be,l,u,!0)?1:Math.max(Se,Se*e,Ye,Ye*e),k=(be,Se,Ye)=>NA(be,l,u,!0)?-1:Math.min(Se,Se*e,Ye,Ye*e),H=T(0,p,w),X=T(_u,v,I),ue=k(Lc,p,w),xe=k(Lc+_u,v,I);n=(H-ue)/2,r=(X-xe)/2,s=-(H+ue)/2,o=-(X+xe)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:o}}(I,w,p),be=Math.max(Math.min((r.width-l)/T,(r.height-l)/k)/2,0),Se=U4(this.options.radius,be),gt=(Se-Math.max(Se*p,0))/this._getVisibleDatasetWeightTotal();this.offsetX=H*Se,this.offsetY=X*Se,s.total=this.calculateTotal(),this.outerRadius=Se-gt*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-gt*v,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/Nl)}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,u=l.chartArea,w=(u.left+u.right)/2,I=(u.top+u.bottom)/2,T=o&&l.options.animation.animateScale,k=T?0:this.innerRadius,H=T?0:this.outerRadius,{sharedOptions:X,includeOptions:ue}=this._getSharedOptions(n,s);let be,xe=this._getRotation();for(be=0;be<n;++be)xe+=this._circumference(be,o);for(be=n;be<n+r;++be){const Se=this._circumference(be,o),Ye=e[be],gt={x:w+this.offsetX,y:I+this.offsetY,startAngle:xe,endAngle:xe+Se,circumference:Se,outerRadius:H,innerRadius:k};ue&&(gt.options=X||this.resolveDataElementOptions(be,Ye.active?"active":s)),xe+=Se,this.updateElement(Ye,be,gt,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s,r=0;for(s=0;s<n.length;s++){const o=e._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Nl*(Math.abs(e)/n):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=jA(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,o,l,u,p;if(!e)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){l=r.getDatasetMeta(s),e=l.data,u=l.controller;break}if(!e)return 0;for(s=0,o=e.length;s<o;++s)p=u.resolveDataElementOptions(s),"inner"!==p.borderAlign&&(n=Math.max(n,p.borderWidth||0,p.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Vo(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i.id="doughnut",i.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},i.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return rc(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}},i})(),$he=(()=>{class i extends dv{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:p}=tU(n,s,l);this._drawStart=u,this._drawCount=p,nU(n)&&(u=0,p=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const v=this.resolveDatasetElementOptions(e);this.options.showLine||(v.borderWidth=0),v.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:v},e),this.updateElements(s,u,p,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,{sharedOptions:w,includeOptions:I}=this._getSharedOptions(n,s),T=l.axis,k=u.axis,{spanGaps:H,segment:X}=this.options,ue=fC(H)?H:Number.POSITIVE_INFINITY,xe=this.chart._animationsDisabled||o||"none"===s;let be=n>0&&this.getParsed(n-1);for(let Se=n;Se<n+r;++Se){const Ye=e[Se],gt=this.getParsed(Se),zt=xe?Ye:{},it=Va(gt[k]),Tt=zt[T]=l.getPixelForValue(gt[T],Se),un=zt[k]=o||it?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,gt,p):gt[k],Se);zt.skip=isNaN(Tt)||isNaN(un)||it,zt.stop=Se>0&&Math.abs(gt[T]-be[T])>ue,X&&(zt.parsed=gt,zt.raw=v.data[Se]),I&&(zt.options=w||this.resolveDataElementOptions(Se,Ye.active?"active":s)),xe||this.updateElement(Ye,Se,zt,s),be=gt}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i.id="line",i.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},i.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},i})(),qhe=(()=>{class i extends dv{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=jA(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,n,r,s){return xU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(s/2,0),u=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,p=l.options.animation,v=this._cachedMeta.rScale,w=v.xCenter,I=v.yCenter,T=v.getIndexAngle(0)-.5*Lc;let H,k=T;const X=360/this.countVisibleElements();for(H=0;H<n;++H)k+=this._computeAngle(H,s,X);for(H=n;H<n+r;H++){const ue=e[H];let xe=k,be=k+this._computeAngle(H,s,X),Se=l.getDataVisibility(H)?v.getDistanceFromCenterForValue(this.getParsed(H).r):0;k=be,o&&(p.animateScale&&(Se=0),p.animateRotate&&(xe=be=T));const Ye={x:w,y:I,innerRadius:0,outerRadius:Se,startAngle:xe,endAngle:be,options:this.resolveDataElementOptions(H,ue.active?"active":s)};this.updateElement(ue,H,Ye,s)}}countVisibleElements(){let n=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?vm(this.resolveDataElementOptions(e,n).angle||r):0}}return i.id="polarArea",i.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},i})(),Xhe=(()=>{class i extends ZU{}return i.id="pie",i.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},i})(),Yhe=(()=>{class i extends dv{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return xU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta,r=n.dataset,s=n.data||[],o=n.iScale.getLabels();if(r.points=s,"resize"!==e){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:l},e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){const o=this._cachedMeta.rScale,l="reset"===s;for(let u=n;u<n+r;u++){const p=e[u],v=this.resolveDataElementOptions(u,p.active?"active":s),w=o.getPointPositionForValue(u,this.getParsed(u).r),I=l?o.xCenter:w.x,T=l?o.yCenter:w.y,k={x:I,y:T,angle:w.angle,skip:isNaN(I)||isNaN(T),options:v};this.updateElement(p,u,k,s)}}}return i.id="radar",i.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},i.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},i})();class ym{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return fC(this.x)&&fC(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}}ym.defaults={},ym.defaultRoutes=void 0;const QU={values:i=>rc(i)?i:""+i,numeric(i,t,e){if(0===i)return"0";const n=this.chart.options.locale;let r,s=i;if(e.length>1){const p=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),s=function Khe(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}(i,e)}const o=Ig(Math.abs(s)),l=Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),jA(i,n,u)},logarithmic(i,t,e){if(0===i)return"0";const n=i/Math.pow(10,Math.floor(Ig(i)));return 1===n||2===n||5===n?QU.numeric.call(this,i,t,e):""}};var gS={formatters:QU};function mS(i,t,e,n,r){const s=Vo(n,0),o=Math.min(Vo(r,i.length),i.length);let u,p,v,l=0;for(e=Math.ceil(e),r&&(u=r-n,e=u/Math.floor(u/e)),v=s;v<0;)l++,v=Math.round(s+l*e);for(p=Math.max(s,0);p<o;p++)p===v&&(t.push(i[p]),l++,v=Math.round(s+l*e))}Ta.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,t)=>t.lineWidth,tickColor:(i,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Ta.route("scale.ticks","color","","color"),Ta.route("scale.grid","color","","borderColor"),Ta.route("scale.grid","borderColor","","borderColor"),Ta.route("scale.title","color","","color"),Ta.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&"callback"!==i&&"parser"!==i,_indexable:i=>"borderDash"!==i&&"tickBorderDash"!==i}),Ta.describe("scales",{_fallback:"scale"}),Ta.describe("scale.ticks",{_scriptable:i=>"backdropPadding"!==i&&"callback"!==i,_indexable:i=>"backdropPadding"!==i});const JU=(i,t,e)=>"top"===t||"left"===t?i[t]+e:i[t]-e;function eH(i,t){const e=[],n=i.length/t,r=i.length;let s=0;for(;s<r;s+=n)e.push(i[Math.floor(s)]);return e}function rfe(i,t,e){const n=i.ticks.length,r=Math.min(t,n-1),s=i._startPixel,o=i._endPixel,l=1e-6;let p,u=i.getPixelForTick(r);if(!(e&&(p=1===n?Math.max(u-s,o-u):0===t?(i.getPixelForTick(1)-u)/2:(u-i.getPixelForTick(r-1))/2,u+=r<t?p:-p,u<s-l||u>o+l)))return u}function qA(i){return i.drawTicks?i.tickLength:0}function tH(i,t){if(!i.display)return 0;const e=_d(i.font,t),n=Hh(i.padding);return(rc(i.text)?i.text.length:1)*e.lineHeight+n.height}function lfe(i,t,e){let n=nL(i);return(e&&"right"!==t||!e&&"right"===t)&&(n=(i=>"left"===i?"right":"right"===i?"left":i)(n)),n}class P0 extends ym{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=Ag(t,Number.POSITIVE_INFINITY),e=Ag(e,Number.NEGATIVE_INFINITY),n=Ag(n,Number.POSITIVE_INFINITY),r=Ag(r,Number.NEGATIVE_INFINITY),{min:Ag(t,n),max:Ag(e,r),minDefined:Lu(t),maxDefined:Lu(e)}}getMinMax(t){let o,{min:e,max:n,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:n};const l=this.getMatchingVisibleMetas();for(let u=0,p=l.length;u<p;++u)o=l[u].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(n=Math.max(n,o.max));return e=s&&e>n?n:e,n=r&&e>n?e:n,{min:Ag(e,Ag(n,e)),max:Ag(n,Ag(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){sc(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function Ode(i,t,e){const{min:n,max:r}=i,s=U4(t,(r-n)/2),o=(l,u)=>e&&0===l?0:l+u;return{min:o(n,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?eH(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function Zhe(i,t){const e=i.options.ticks,n=e.maxTicksLimit||function Qhe(i){const t=i.options.offset,e=i._tickSize();return Math.floor(Math.min(i._length/e+(t?0:1),i._maxLength/e))}(i),r=e.major.enabled?function efe(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}(t):[],s=r.length,o=r[0],l=r[s-1],u=[];if(s>n)return function tfe(i,t,e,n){let o,r=0,s=e[0];for(n=Math.ceil(n),o=0;o<i.length;o++)o===s&&(t.push(i[o]),r++,s=e[r*n])}(t,u,r,s/n),u;const p=function Jhe(i,t,e){const n=function nfe(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}(i),r=t.length/e;if(!n)return Math.max(r,1);const s=function que(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n==0&&(t.push(n),t.push(i/n));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(n);for(let o=0,l=s.length-1;o<l;o++){const u=s[o];if(u>r)return u}return Math.max(r,1)}(r,t,n);if(s>0){let v,w;const I=s>1?Math.round((l-o)/(s-1)):null;for(mS(t,u,p,Va(I)?0:o-I,o),v=0,w=s-1;v<w;v++)mS(t,u,p,r[v],r[v+1]);return mS(t,u,p,l,Va(I)?t.length:l+I),u}return mS(t,u,p),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,n,t=this.options.reverse;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){sc(this.options.afterUpdate,[this])}beforeSetDimensions(){sc(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){sc(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),sc(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){sc(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.label=sc(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){sc(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){sc(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,r=e.minRotation||0,s=e.maxRotation;let l,u,p,o=r;if(!this._isVisible()||!e.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const v=this._getLabelSizes(),w=v.widest.width,I=v.highest.height,T=Ud(this.chart.width-w,0,this.maxWidth);l=t.offset?this.maxWidth/n:T/(n-1),w+6>l&&(l=T/(n-(t.offset?.5:1)),u=this.maxHeight-qA(t.grid)-e.padding-tH(t.title,this.chart.options.font),p=Math.sqrt(w*w+I*I),o=J2(Math.min(Math.asin(Ud((v.highest.height+6)/l,-1,1)),Math.asin(Ud(u/p,-1,1))-Math.asin(Ud(I/p,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){sc(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){sc(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const u=tH(r,e.options.font);if(l?(t.width=this.maxWidth,t.height=qA(s)+u):(t.height=this.maxHeight,t.width=qA(s)+u),n.display&&this.ticks.length){const{first:p,last:v,widest:w,highest:I}=this._getLabelSizes(),T=2*n.padding,k=vm(this.labelRotation),H=Math.cos(k),X=Math.sin(k);l?t.height=Math.min(this.maxHeight,t.height+(n.mirror?0:X*w.width+H*I.height)+T):t.width=Math.min(this.maxWidth,t.width+(n.mirror?0:H*w.width+X*I.height)+T),this._calculatePadding(p,v,X,H)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:s,padding:o},position:l}=this.options,u=0!==this.labelRotation,p="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let I=0,T=0;u?p?(I=r*t.width,T=n*e.height):(I=n*t.height,T=r*e.width):"start"===s?T=e.width:"end"===s?I=t.width:"inner"!==s&&(I=t.width/2,T=e.width/2),this.paddingLeft=Math.max((I-v+o)*this.width/(this.width-v),0),this.paddingRight=Math.max((T-w+o)*this.width/(this.width-w),0)}else{let v=e.height/2,w=t.height/2;"start"===s?(v=0,w=t.height):"end"===s&&(v=e.height,w=0),this.paddingTop=v+o,this.paddingBottom=w+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){sc(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)Va(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=eH(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:r}=this,s=[],o=[];let p,v,w,I,T,k,H,X,ue,xe,be,l=0,u=0;for(p=0;p<e;++p){if(I=t[p].label,T=this._resolveTickFontOptions(p),n.font=k=T.string,H=r[k]=r[k]||{data:{},gc:[]},X=T.lineHeight,ue=xe=0,Va(I)||rc(I)){if(rc(I))for(v=0,w=I.length;v<w;++v)be=I[v],!Va(be)&&!rc(be)&&(ue=cS(n,H.data,H.gc,ue,be),xe+=X)}else ue=cS(n,H.data,H.gc,ue,I),xe=X;s.push(ue),o.push(xe),l=Math.max(ue,l),u=Math.max(xe,u)}!function sfe(i,t){Ml(i,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(r,e);const Se=s.indexOf(l),Ye=o.indexOf(u),gt=zt=>({width:s[zt]||0,height:o[zt]||0});return{first:gt(0),last:gt(e-1),widest:gt(Se),highest:gt(Ye),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function Kue(i){return Ud(i,-32768,32767)}(this._alignToPixels?S0(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function afe(i,t,e){return p_(i,{tick:e,index:t,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=function ofe(i,t){return p_(i,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=vm(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,l=s?s.widest.width+o:0,u=s?s.highest.height+o:0;return this.isHorizontal()?u*n>l*r?l/n:u/r:u*r<l*n?u/n:l/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:s,position:o}=r,l=s.offset,u=this.isHorizontal(),v=this.ticks.length+(l?1:0),w=qA(s),I=[],T=s.setContext(this.getContext()),k=T.drawBorder?T.borderWidth:0,H=k/2,X=function(Zn){return S0(n,Zn,k)};let ue,xe,be,Se,Ye,gt,zt,it,Tt,un,ei,fi;if("top"===o)ue=X(this.bottom),gt=this.bottom-w,it=ue-H,un=X(t.top)+H,fi=t.bottom;else if("bottom"===o)ue=X(this.top),un=t.top,fi=X(t.bottom)-H,gt=ue+H,it=this.top+w;else if("left"===o)ue=X(this.right),Ye=this.right-w,zt=ue-H,Tt=X(t.left)+H,ei=t.right;else if("right"===o)ue=X(this.left),Tt=t.left,ei=X(t.right)-H,Ye=ue+H,zt=this.left+w;else if("x"===e){if("center"===o)ue=X((t.top+t.bottom)/2+.5);else if(xa(o)){const Zn=Object.keys(o)[0];ue=X(this.chart.scales[Zn].getPixelForValue(o[Zn]))}un=t.top,fi=t.bottom,gt=ue+H,it=gt+w}else if("y"===e){if("center"===o)ue=X((t.left+t.right)/2);else if(xa(o)){const Zn=Object.keys(o)[0];ue=X(this.chart.scales[Zn].getPixelForValue(o[Zn]))}Ye=ue-H,zt=Ye-w,Tt=t.left,ei=t.right}const ni=Vo(r.ticks.maxTicksLimit,v),Bn=Math.max(1,Math.ceil(v/ni));for(xe=0;xe<v;xe+=Bn){const Zn=s.setContext(this.getContext(xe)),Rn=Zn.lineWidth,ti=Zn.color,Yn=Zn.borderDash||[],kn=Zn.borderDashOffset,Qn=Zn.tickWidth,or=Zn.tickColor,Bi=Zn.tickBorderDash||[],yr=Zn.tickBorderDashOffset;be=rfe(this,xe,l),void 0!==be&&(Se=S0(n,be,Rn),u?Ye=zt=Tt=ei=Se:gt=it=un=fi=Se,I.push({tx1:Ye,ty1:gt,tx2:zt,ty2:it,x1:Tt,y1:un,x2:ei,y2:fi,width:Rn,color:ti,borderDash:Yn,borderDashOffset:kn,tickWidth:Qn,tickColor:or,tickBorderDash:Bi,tickBorderDashOffset:yr}))}return this._ticksLength=v,this._borderValue=ue,I}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:s}=n,o=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:p,padding:v,mirror:w}=s,I=qA(n.grid),T=I+v,k=w?-v:T,H=-vm(this.labelRotation),X=[];let ue,xe,be,Se,Ye,gt,zt,it,Tt,un,ei,fi,ni="middle";if("top"===r)gt=this.bottom-k,zt=this._getXAxisLabelAlignment();else if("bottom"===r)gt=this.top+k,zt=this._getXAxisLabelAlignment();else if("left"===r){const Zn=this._getYAxisLabelAlignment(I);zt=Zn.textAlign,Ye=Zn.x}else if("right"===r){const Zn=this._getYAxisLabelAlignment(I);zt=Zn.textAlign,Ye=Zn.x}else if("x"===e){if("center"===r)gt=(t.top+t.bottom)/2+T;else if(xa(r)){const Zn=Object.keys(r)[0];gt=this.chart.scales[Zn].getPixelForValue(r[Zn])+T}zt=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)Ye=(t.left+t.right)/2-T;else if(xa(r)){const Zn=Object.keys(r)[0];Ye=this.chart.scales[Zn].getPixelForValue(r[Zn])}zt=this._getYAxisLabelAlignment(I).textAlign}"y"===e&&("start"===u?ni="top":"end"===u&&(ni="bottom"));const Bn=this._getLabelSizes();for(ue=0,xe=l.length;ue<xe;++ue){be=l[ue],Se=be.label;const Zn=s.setContext(this.getContext(ue));it=this.getPixelForTick(ue)+s.labelOffset,Tt=this._resolveTickFontOptions(ue),un=Tt.lineHeight,ei=rc(Se)?Se.length:1;const Rn=ei/2,ti=Zn.color,Yn=Zn.textStrokeColor,kn=Zn.textStrokeWidth;let or,Qn=zt;if(o?(Ye=it,"inner"===zt&&(Qn=ue===xe-1?this.options.reverse?"left":"right":0===ue?this.options.reverse?"right":"left":"center"),fi="top"===r?"near"===p||0!==H?-ei*un+un/2:"center"===p?-Bn.highest.height/2-Rn*un+un:un/2-Bn.highest.height:"near"===p||0!==H?un/2:"center"===p?Bn.highest.height/2-Rn*un:Bn.highest.height-ei*un,w&&(fi*=-1)):(gt=it,fi=(1-ei)*un/2),Zn.showLabelBackdrop){const Bi=Hh(Zn.backdropPadding),yr=Bn.heights[ue],Sr=Bn.widths[ue];let Ys=gt+fi-Bi.top,Ui=Ye-Bi.left;switch(ni){case"middle":Ys-=yr/2;break;case"bottom":Ys-=yr}switch(zt){case"center":Ui-=Sr/2;break;case"right":Ui-=Sr}or={left:Ui,top:Ys,width:Sr+Bi.width,height:yr+Bi.height,color:Zn.backdropColor}}X.push({rotation:H,label:Se,font:Tt,color:ti,strokeColor:Yn,strokeWidth:kn,textOffset:fi,textAlign:Qn,textBaseline:ni,translation:[Ye,gt],backdrop:or})}return X}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-vm(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,l=t+s,u=this._getLabelSizes().widest.width;let p,v;return"left"===e?r?(v=this.right+s,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v+=u)):(v=this.right-l,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v=this.left)):"right"===e?r?(v=this.left+s,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v-=u)):(v=this.left+l,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const l=(u,p,v)=>{!v.width||!v.color||(n.save(),n.lineWidth=v.width,n.strokeStyle=v.color,n.setLineDash(v.borderDash||[]),n.lineDashOffset=v.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(p.x,p.y),n.stroke(),n.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const u=r[s];e.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),e.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,r=n.setContext(this.getContext()),s=n.drawBorder?r.borderWidth:0;if(!s)return;const o=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,p,v,w;this.isHorizontal()?(u=S0(t,this.left,s)-s/2,p=S0(t,this.right,o)+o/2,v=w=l):(v=S0(t,this.top,s)-s/2,w=S0(t,this.bottom,o)+o/2,u=p=l),e.save(),e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(u,v),e.lineTo(p,w),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&uS(n,r);const s=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,l;for(o=0,l=s.length;o<l;++o){const u=s[o],p=u.font,v=u.label;u.backdrop&&(n.fillStyle=u.backdrop.color,n.fillRect(u.backdrop.left,u.backdrop.top,u.backdrop.width,u.backdrop.height)),E0(n,v,0,u.textOffset,p,u)}r&&dS(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const s=_d(n.font),o=Hh(n.padding),l=n.align;let u=s.lineHeight/2;"bottom"===e||"center"===e||xa(e)?(u+=o.bottom,rc(n.text)&&(u+=s.lineHeight*(n.text.length-1))):u+=o.top;const{titleX:p,titleY:v,maxWidth:w,rotation:I}=function cfe(i,t,e,n){const{top:r,left:s,bottom:o,right:l,chart:u}=i,{chartArea:p,scales:v}=u;let I,T,k,w=0;const H=o-r,X=l-s;if(i.isHorizontal()){if(T=Uh(n,s,l),xa(e)){const ue=Object.keys(e)[0];k=v[ue].getPixelForValue(e[ue])+H-t}else k="center"===e?(p.bottom+p.top)/2+H-t:JU(i,e,t);I=l-s}else{if(xa(e)){const ue=Object.keys(e)[0];T=v[ue].getPixelForValue(e[ue])-X+t}else T="center"===e?(p.left+p.right)/2-X+t:JU(i,e,t);k=Uh(n,o,r),w="left"===e?-_u:_u}return{titleX:T,titleY:k,maxWidth:I,rotation:w}}(this,u,e,l);E0(t,n.text,0,0,s,{color:n.color,maxWidth:w,rotation:I,textAlign:lfe(l,e,r),textBaseline:"middle",translation:[p,v]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Vo(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===P0.prototype.draw?[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]:[{z:e,draw:r=>{this.draw(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const l=e[s];l[n]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){return _d(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class vS{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function hfe(i){return"id"in i&&"defaults"in i})(e)&&(n=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function ufe(i,t,e){const n=RA(Object.create(null),[e?Ta.get(e):{},Ta.get(t),i.defaults]);Ta.set(t,n),i.defaultRoutes&&function dfe(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),r=n.pop(),s=[i].concat(n).join("."),o=t[e].split("."),l=o.pop(),u=o.join(".");Ta.route(s,r,u,l)})}(t,i.defaultRoutes),i.descriptors&&Ta.describe(t,i.descriptors)}(t,o,n),this.override&&Ta.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in Ta[r]&&(delete Ta[r][n],this.override&&delete I0[n])}}var hv=new class ffe{constructor(){this.controllers=new vS(dv,"datasets",!0),this.elements=new vS(ym,"elements"),this.plugins=new vS(Object,"plugins"),this.scales=new vS(P0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{const s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Ml(r,o=>{const l=n||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,e,n){const r=Q2(t);sc(n["before"+r],[],n),e[t](n),sc(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}},pfe=Object.freeze({__proto__:null,BarController:Ghe,BubbleController:Whe,DoughnutController:ZU,LineController:$he,PolarAreaController:qhe,PieController:Xhe,RadarController:Yhe,ScatterController:(()=>{class i extends dv{update(e){const n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled;let{start:o,count:l}=tU(n,r,s);if(this._drawStart=o,this._drawCount=l,nU(n)&&(o=0,l=r.length),this.options.showLine){const{dataset:u,_dataset:p}=n;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!p._decimated,u.points=r;const v=this.resolveDatasetElementOptions(e);v.segment=this.options.segment,this.updateElement(u,void 0,{animated:!s,options:v},e)}this.updateElements(r,o,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=hv.getElement("line")),super.addElements()}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,w=this.resolveDataElementOptions(n,s),I=this.getSharedOptions(w),T=this.includeOptions(s,I),k=l.axis,H=u.axis,{spanGaps:X,segment:ue}=this.options,xe=fC(X)?X:Number.POSITIVE_INFINITY,be=this.chart._animationsDisabled||o||"none"===s;let Se=n>0&&this.getParsed(n-1);for(let Ye=n;Ye<n+r;++Ye){const gt=e[Ye],zt=this.getParsed(Ye),it=be?gt:{},Tt=Va(zt[H]),un=it[k]=l.getPixelForValue(zt[k],Ye),ei=it[H]=o||Tt?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,zt,p):zt[H],Ye);it.skip=isNaN(un)||isNaN(ei)||Tt,it.stop=Ye>0&&Math.abs(zt[k]-Se[k])>xe,ue&&(it.parsed=zt,it.raw=v.data[Ye]),T&&(it.options=I||this.resolveDataElementOptions(Ye,gt.active?"active":s)),be||this.updateElement(gt,Ye,it,s),Se=zt}this.updateSharedOptions(I,s,w)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let u=0;for(let p=n.length-1;p>=0;--p)u=Math.max(u,n[p].size(this.resolveDataElementOptions(p))/2);return u>0&&u}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,l)/2}}return i.id="scatter",i.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},i.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},i})()});function R0(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var gfe={_date:(()=>{class i{constructor(e){this.options=e||{}}init(e){}formats(){return R0()}parse(e,n){return R0()}format(e,n){return R0()}add(e,n,r){return R0()}diff(e,n,r){return R0()}startOf(e,n,r){return R0()}endOf(e,n){return R0()}}return i.override=function(t){Object.assign(i.prototype,t)},i})()};function mfe(i,t,e,n){const{controller:r,data:s,_sorted:o}=i,l=r._cachedMeta.iScale;if(l&&t===l.axis&&"r"!==t&&o&&s.length){const u=l._reversePixels?Zue:hy;if(!n)return u(s,t,e);if(r._sharedOptions){const p=s[0],v="function"==typeof p.getRange&&p.getRange(t);if(v){const w=u(s,t,e-v),I=u(s,t,e+v);return{lo:w.lo,hi:I.hi}}}}return{lo:0,hi:s.length-1}}function XA(i,t,e,n,r){const s=i.getSortedVisibleDatasetMetas(),o=e[t];for(let l=0,u=s.length;l<u;++l){const{index:p,data:v}=s[l],{lo:w,hi:I}=mfe(s[l],t,o,r);for(let T=w;T<=I;++T){const k=v[T];k.skip||n(k,p,T)}}}function CL(i,t,e,n,r){const s=[];return!r&&!i.isPointInArea(t)||XA(i,e,t,function(l,u,p){!r&&!HA(l,i.chartArea,0)||l.inRange(t.x,t.y,n)&&s.push({element:l,datasetIndex:u,index:p})},!0),s}function wL(i,t,e,n,r,s){return s||i.isPointInArea(t)?"r"!==e||n?function _fe(i,t,e,n,r,s){let o=[];const l=function vfe(i){const t=-1!==i.indexOf("x"),e=-1!==i.indexOf("y");return function(n,r){const s=t?Math.abs(n.x-r.x):0,o=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(e);let u=Number.POSITIVE_INFINITY;return XA(i,e,t,function p(v,w,I){const T=v.inRange(t.x,t.y,r);if(n&&!T)return;const k=v.getCenterPoint(r);if(!s&&!i.isPointInArea(k)&&!T)return;const X=l(t,k);X<u?(o=[{element:v,datasetIndex:w,index:I}],u=X):X===u&&o.push({element:v,datasetIndex:w,index:I})}),o}(i,t,e,n,r,s):function yfe(i,t,e,n){let r=[];return XA(i,e,t,function s(o,l,u){const{startAngle:p,endAngle:v}=o.getProps(["startAngle","endAngle"],n),{angle:w}=Y4(o,{x:t.x,y:t.y});NA(w,p,v)&&r.push({element:o,datasetIndex:l,index:u})}),r}(i,t,e,r):[]}function nH(i,t,e,n,r){const s=[],o="x"===e?"inXRange":"inYRange";let l=!1;return XA(i,e,t,(u,p,v)=>{u[o](t[e],r)&&(s.push({element:u,datasetIndex:p,index:v}),l=l||u.inRange(t.x,t.y,r))}),n&&!l?[]:s}var bfe={evaluateInteractionItems:XA,modes:{index(i,t,e,n){const r=D0(t,i),s=e.axis||"x",o=e.includeInvisible||!1,l=e.intersect?CL(i,r,s,n,o):wL(i,r,s,!1,n,o),u=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(p=>{const v=l[0].index,w=p.data[v];w&&!w.skip&&u.push({element:w,datasetIndex:p.index,index:v})}),u):[]},dataset(i,t,e,n){const r=D0(t,i),s=e.axis||"xy",o=e.includeInvisible||!1;let l=e.intersect?CL(i,r,s,n,o):wL(i,r,s,!1,n,o);if(l.length>0){const u=l[0].datasetIndex,p=i.getDatasetMeta(u).data;l=[];for(let v=0;v<p.length;++v)l.push({element:p[v],datasetIndex:u,index:v})}return l},point:(i,t,e,n)=>CL(i,D0(t,i),e.axis||"xy",n,e.includeInvisible||!1),nearest:(i,t,e,n)=>wL(i,D0(t,i),e.axis||"xy",e.intersect,n,e.includeInvisible||!1),x:(i,t,e,n)=>nH(i,D0(t,i),"x",e.intersect,n),y:(i,t,e,n)=>nH(i,D0(t,i),"y",e.intersect,n)}};const iH=["left","top","right","bottom"];function YA(i,t){return i.filter(e=>e.pos===t)}function rH(i,t){return i.filter(e=>-1===iH.indexOf(e.pos)&&e.box.axis===t)}function KA(i,t){return i.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function sH(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function oH(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Ife(i,t,e,n){const{pos:r,box:s}=e,o=i.maxPadding;if(!xa(r)){e.size&&(i[r]-=e.size);const w=n[e.stack]||{size:0,count:1};w.size=Math.max(w.size,e.horizontal?s.height:s.width),e.size=w.size/w.count,i[r]+=e.size}s.getPadding&&oH(o,s.getPadding());const l=Math.max(0,t.outerWidth-sH(o,i,"left","right")),u=Math.max(0,t.outerHeight-sH(o,i,"top","bottom")),p=l!==i.w,v=u!==i.h;return i.w=l,i.h=u,e.horizontal?{same:p,other:v}:{same:v,other:p}}function Efe(i,t){const e=t.maxPadding;return function n(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}(i?["left","right"]:["top","bottom"])}function ZA(i,t,e,n){const r=[];let s,o,l,u,p,v;for(s=0,o=i.length,p=0;s<o;++s){l=i[s],u=l.box,u.update(l.width||t.w,l.height||t.h,Efe(l.horizontal,t));const{same:w,other:I}=Ife(t,e,l,n);p|=w&&r.length,v=v||I,u.fullSize||r.push(l)}return p&&ZA(r,t,e,n)||v}function yS(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function aH(i,t,e,n){const r=e.padding;let{x:s,y:o}=t;for(const l of i){const u=l.box,p=n[l.stack]||{count:1,placed:0,weight:1},v=l.stackWeight/p.weight||1;if(l.horizontal){const w=t.w*v,I=p.size||u.height;xg(p.start)&&(o=p.start),u.fullSize?yS(u,r.left,o,e.outerWidth-r.right-r.left,I):yS(u,t.left+p.placed,o,w,I),p.start=o,p.placed+=w,o=u.bottom}else{const w=t.h*v,I=p.size||u.width;xg(p.start)&&(s=p.start),u.fullSize?yS(u,s,r.top,I,e.outerHeight-r.bottom-r.top):yS(u,s,t.top+p.placed,I,w),p.start=s,p.placed+=w,s=u.right}}t.x=s,t.y=o}Ta.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Gh={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;-1!==e&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const r=Hh(i.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),l=function xfe(i){const t=function Cfe(i){const t=[];let e,n,r,s,o,l;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],({position:s,options:{stack:o,stackWeight:l=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:l});return t}(i),e=KA(t.filter(p=>p.box.fullSize),!0),n=KA(YA(t,"left"),!0),r=KA(YA(t,"right")),s=KA(YA(t,"top"),!0),o=KA(YA(t,"bottom")),l=rH(t,"x"),u=rH(t,"y");return{fullSize:e,leftAndTop:n.concat(s),rightAndBottom:r.concat(u).concat(o).concat(l),chartArea:YA(t,"chartArea"),vertical:n.concat(r).concat(u),horizontal:s.concat(o).concat(l)}}(i.boxes),u=l.vertical,p=l.horizontal;Ml(i.boxes,H=>{"function"==typeof H.beforeLayout&&H.beforeLayout()});const v=u.reduce((H,X)=>X.box.options&&!1===X.box.options.display?H:H+1,0)||1,w=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/v,hBoxMaxHeight:o/2}),I=Object.assign({},r);oH(I,Hh(n));const T=Object.assign({maxPadding:I,w:s,h:o,x:r.left,y:r.top},r),k=function Afe(i,t){const e=function wfe(i){const t={};for(const e of i){const{stack:n,pos:r,stackWeight:s}=e;if(!n||!iH.includes(r))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let s,o,l;for(s=0,o=i.length;s<o;++s){l=i[s];const{fullSize:u}=l.box,p=e[l.stack],v=p&&l.stackWeight/p.weight;l.horizontal?(l.width=v?v*n:u&&t.availableWidth,l.height=r):(l.width=n,l.height=v?v*r:u&&t.availableHeight)}return e}(u.concat(p),w);ZA(l.fullSize,T,w,k),ZA(u,T,w,k),ZA(p,T,w,k)&&ZA(u,T,w,k),function Sfe(i){const t=i.maxPadding;function e(n){const r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}(T),aH(l.leftAndTop,T,w,k),T.x+=T.w,T.y+=T.h,aH(l.rightAndBottom,T,w,k),i.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},Ml(l.chartArea,H=>{const X=H.box;Object.assign(X,i.chartArea),X.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class lH{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class Tfe extends lH{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const _S="$chartjs",Mfe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},cH=i=>null===i||""===i,uH=!!rhe&&{passive:!0};function Pfe(i,t,e){i.canvas.removeEventListener(t,e,uH)}function bS(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function kfe(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||bS(l.addedNodes,n),o=o&&!bS(l.removedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Ofe(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||bS(l.removedNodes,n),o=o&&!bS(l.addedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const QA=new Map;let dH=0;function hH(){const i=window.devicePixelRatio;i!==dH&&(dH=i,QA.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function Bfe(i,t,e){const n=i.canvas,r=n&&mL(n);if(!r)return;const s=eU((l,u)=>{const p=r.clientWidth;e(l,u),p<r.clientWidth&&e()},window),o=new ResizeObserver(l=>{const u=l[0],p=u.contentRect.width,v=u.contentRect.height;0===p&&0===v||s(p,v)});return o.observe(r),function Ffe(i,t){QA.size||window.addEventListener("resize",hH),QA.set(i,t)}(i,s),o}function AL(i,t,e){e&&e.disconnect(),"resize"===t&&function Nfe(i){QA.delete(i),QA.size||window.removeEventListener("resize",hH)}(i)}function zfe(i,t,e){const n=i.canvas,r=eU(s=>{null!==i.ctx&&e(function Rfe(i,t){const e=Mfe[i.type]||i.type,{x:n,y:r}=D0(i,t);return{type:e,chart:t,native:i,x:void 0!==n?n:null,y:void 0!==r?r:null}}(s,i))},i,s=>{const o=s[0];return[o,o.offsetX,o.offsetY]});return function Lfe(i,t,e){i.addEventListener(t,e,uH)}(n,t,r),r}class Vfe extends lH{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function Dfe(i,t){const e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[_S]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",cH(r)){const s=TU(i,"width");void 0!==s&&(i.width=s)}if(cH(n))if(""===i.style.height)i.height=i.width/(t||2);else{const s=TU(i,"height");void 0!==s&&(i.height=s)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[_S])return!1;const n=e[_S].initial;["height","width"].forEach(s=>{const o=n[s];Va(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=n.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[_S],!0}addEventListener(t,e,n){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:kfe,detach:Ofe,resize:Bfe}[e]||zfe)(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];r&&(({attach:AL,detach:AL,resize:AL}[e]||Pfe)(t,e,r),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return function ihe(i,t,e,n){const r=pS(i),s=M0(r,"margin"),o=fS(r.maxWidth,i,"clientWidth")||iS,l=fS(r.maxHeight,i,"clientHeight")||iS,u=function nhe(i,t,e){let n,r;if(void 0===t||void 0===e){const s=mL(i);if(s){const o=s.getBoundingClientRect(),l=pS(s),u=M0(l,"border","width"),p=M0(l,"padding");t=o.width-p.width-u.width,e=o.height-p.height-u.height,n=fS(l.maxWidth,s,"clientWidth"),r=fS(l.maxHeight,s,"clientHeight")}else t=i.clientWidth,e=i.clientHeight}return{width:t,height:e,maxWidth:n||iS,maxHeight:r||iS}}(i,t,e);let{width:p,height:v}=u;if("content-box"===r.boxSizing){const w=M0(r,"border","width"),I=M0(r,"padding");p-=I.width+w.width,v-=I.height+w.height}return p=Math.max(0,p-s.width),v=Math.max(0,n?Math.floor(p/n):v-s.height),p=vL(Math.min(p,o,u.maxWidth)),v=vL(Math.min(v,l,u.maxHeight)),p&&!v&&(v=vL(p/2)),{width:p,height:v}}(t,e,n,r)}isAttached(t){const e=mL(t);return!(!e||!e.isConnected)}}class Hfe{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,n);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(const s of t){const o=s.plugin;if(!1===sc(o[n],[e,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){Va(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=Vo(n.options&&n.options.plugins,{}),s=function Gfe(i){const t={},e=[],n=Object.keys(hv.plugins.items);for(let s=0;s<n.length;s++)e.push(hv.getPlugin(n[s]));const r=i.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===e.indexOf(o)&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}(n);return!1!==r||e?function jfe(i,{plugins:t,localIds:e},n,r){const s=[],o=i.getContext();for(const l of t){const u=l.id,p=Wfe(n[u],r);null!==p&&s.push({plugin:l,options:$fe(i.config,{plugin:l,local:e[u]},p,o)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(s,o)=>s.filter(l=>!o.some(u=>l.plugin.id===u.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function Wfe(i,t){return t||!1!==i?!0===i?{}:i:null}function $fe(i,{plugin:t,local:e},n,r){const s=i.pluginScopeKeys(t),o=i.getOptionScopes(n,s);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xL(i,t){return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||(Ta.datasets[i]||{}).indexAxis||"x"}function IL(i,t){return"x"===i||"y"===i?i:t.axis||function Yfe(i){return"top"===i||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0}(t.position)||i.charAt(0).toLowerCase()}function fH(i){const t=i.options||(i.options={});t.plugins=Vo(t.plugins,{}),t.scales=function Kfe(i,t){const e=I0[i.type]||{scales:{}},n=t.scales||{},r=xL(i.type,t),s=Object.create(null),o=Object.create(null);return Object.keys(n).forEach(l=>{const u=n[l];if(!xa(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const p=IL(l,u),v=function Xfe(i,t){return i===t?"_index_":"_value_"}(p,r),w=e.scales||{};s[p]=s[p]||l,o[l]=kA(Object.create(null),[{axis:p},u,w[p],w[v]])}),i.data.datasets.forEach(l=>{const u=l.type||i.type,p=l.indexAxis||xL(u,t),w=(I0[u]||{}).scales||{};Object.keys(w).forEach(I=>{const T=function qfe(i,t){let e=i;return"_index_"===i?e=t:"_value_"===i&&(e="x"===t?"y":"x"),e}(I,p),k=l[T+"AxisID"]||s[T]||T;o[k]=o[k]||Object.create(null),kA(o[k],[{axis:T},n[k],w[I]])})}),Object.keys(o).forEach(l=>{const u=o[l];kA(u,[Ta.scales[u.type],Ta.scale])}),o}(i,t)}function pH(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}const gH=new Map,mH=new Set;function CS(i,t){let e=gH.get(i);return e||(e=t(),gH.set(i,e),mH.add(e)),e}const JA=(i,t,e)=>{const n=u_(t,e);void 0!==n&&i.add(n)};class Qfe{constructor(t){this._config=function Zfe(i){return(i=i||{}).data=pH(i.data),fH(i),i}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=pH(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),fH(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return CS(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return CS(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return CS(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return CS(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:s}=this,o=this._cachedScopes(t,n),l=o.get(e);if(l)return l;const u=new Set;e.forEach(v=>{t&&(u.add(t),v.forEach(w=>JA(u,t,w))),v.forEach(w=>JA(u,r,w)),v.forEach(w=>JA(u,I0[s]||{},w)),v.forEach(w=>JA(u,Ta,w)),v.forEach(w=>JA(u,cL,w))});const p=Array.from(u);return 0===p.length&&p.push(Object.create(null)),mH.has(e)&&o.set(e,p),p}chartOptionScopes(){const{options:t,type:e}=this;return[t,I0[e]||{},Ta.datasets[e]||{},{type:e},Ta,cL]}resolveNamedOptions(t,e,n,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=vH(this._resolverCache,t,r);let u=o;(function epe(i,t){const{isScriptable:e,isIndexable:n}=yU(i);for(const r of t){const s=e(r),o=n(r),l=(o||s)&&i[r];if(s&&(d_(l)||Jfe(l))||o&&rc(l))return!0}return!1})(o,e)&&(s.$shared=!1,u=gC(o,n=d_(n)?n():n,this.createResolver(t,n,l)));for(const p of e)s[p]=u[p];return s}createResolver(t,e,n=[""],r){const{resolver:s}=vH(this._resolverCache,t,n);return xa(e)?gC(s,e,void 0,r):s}}function vH(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const r=e.join();let s=n.get(r);return s||(s={resolver:fL(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,s)),s}const Jfe=i=>xa(i)&&Object.getOwnPropertyNames(i).reduce((t,e)=>t||d_(i[e]),!1),npe=["top","bottom","left","right","chartArea"];function yH(i,t){return"top"===i||"bottom"===i||-1===npe.indexOf(i)&&"x"===t}function _H(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function bH(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),sc(e&&e.onComplete,[i],t)}function ipe(i){const t=i.chart,e=t.options.animation;sc(e&&e.onProgress,[i],t)}function CH(i){return SU()&&"string"==typeof i?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const wS={},wH=i=>{const t=CH(i);return Object.values(wS).filter(e=>e.canvas===t).pop()};function rpe(i,t,e){const n=Object.keys(i);for(const r of n){const s=+r;if(s>=t){const o=i[r];delete i[r],(e>0||s>t)&&(i[s+e]=o)}}}class AS{constructor(t,e){const n=this.config=new Qfe(e),r=CH(t),s=wH(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function Ufe(i){return!SU()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Tfe:Vfe}(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),u=l&&l.canvas,p=u&&u.height,v=u&&u.width;this.id=Bue(),this.ctx=l,this.canvas=u,this.width=v,this.height=p,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hfe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function ede(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}(w=>this.update(w),o.resizeDelay||0),this._dataChanges=[],wS[this.id]=this,l&&u?(py.listen(this,"complete",bH),py.listen(this,"progress",ipe),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:s}=this;return Va(t)?e&&s?s:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():EU(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gU(this.canvas,this.ctx),this}stop(){return py.stop(this),this}resize(t,e){py.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,o=this.platform.getMaximumSize(this.canvas,t,e,n.maintainAspectRatio&&this.aspectRatio),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,EU(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),sc(n.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){Ml(this.options.scales||{},(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const l=e[o],u=IL(o,l),p="r"===u,v="x"===u;return{options:l,dposition:p?"chartArea":v?"bottom":"left",dtype:p?"radialLinear":v?"category":"linear"}}))),Ml(s,o=>{const l=o.options,u=l.id,p=IL(u,l),v=Vo(l.type,o.dtype);(void 0===l.position||yH(l.position,p)!==yH(o.dposition))&&(l.position=o.dposition),r[u]=!0;let w=null;u in n&&n[u].type===v?w=n[u]:(w=new(hv.getScale(v))({id:u,type:v,ctx:this.ctx,chart:this}),n[w.id]=w),w.init(l,t)}),Ml(r,(o,l)=>{o||delete n[l]}),Ml(n,o=>{Gh.configure(this,o,o.options),Gh.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((r,s)=>r.index-s.index),n>e){for(let r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(_H("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,r)=>{0===e.filter(s=>s===n._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const s=e[n];let o=this.getDatasetMeta(n);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=s.indexAxis||xL(l,this.options),o.order=s.order||0,o.index=n,o.label=""+s.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const u=hv.getController(l),{datasetElementType:p,dataElementType:v}=Ta.datasets[l];Object.assign(u.prototype,{dataElementType:hv.getElement(v),datasetElementType:p&&hv.getElement(p)}),o.controller=new u(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Ml(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let p=0,v=this.data.datasets.length;p<v;p++){const{controller:w}=this.getDatasetMeta(p),I=!r&&-1===s.indexOf(w);w.buildOrUpdateElements(I),o=Math.max(+w.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||Ml(s,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(_H("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ml(this.scales,t=>{Gh.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!W4(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of e)rpe(t,r,"_removeElements"===n?-s:s)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=s=>new Set(t.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let s=1;s<e;s++)if(!W4(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Gh.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Ml(this.boxes,r=>{n&&"chartArea"===r.position||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,d_(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(py.has(this)?this.attached&&!py.running(this)&&py.start(this):(this.draw(),bH({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,s=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&uS(e,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?this.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?this.height:s.bottom+n.bottom}),t.controller.draw(),r&&dS(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return HA(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const s=bfe.modes[e];return"function"==typeof s?s(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=p_(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);xg(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(s,{visible:n}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),py.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),gU(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete wS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};Ml(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(u,p)=>{e.addEventListener(this,u,p),t[u]=p},r=(u,p)=>{t[u]&&(e.removeEventListener(this,u,p),delete t[u])},s=(u,p)=>{this.canvas&&this.resize(u,p)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",s),n("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",l)},e.isAttached(this.canvas)?l():o()}unbindEvents(){Ml(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Ml(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let s,o,l,u;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),l=0,u=t.length;l<u;++l){o=t[l];const p=o&&this.getDatasetMeta(o.datasetIndex).controller;p&&p[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!tS(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const r=this.options.hover,s=(u,p)=>u.filter(v=>!p.some(w=>v.datasetIndex===w.datasetIndex&&v.index===w.index)),o=s(e,t),l=n?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:s}=this,l=this._getActiveElements(t,r,n,e),u=function Wue(i){return"mouseup"===i.type||"click"===i.type||"contextmenu"===i.type}(t),p=function spe(i,t,e,n){return e&&"mouseout"!==i.type?n?t:i:null}(t,this._lastEvent,n,u);n&&(this._lastEvent=null,sc(s.onHover,[t,l,this],this),u&&sc(s.onClick,[t,l,this],this));const v=!tS(l,r);return(v||e)&&(this._active=l,this._updateHoverStyles(l,r,e)),this._lastEvent=p,v}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}const AH=()=>Ml(AS.instances,i=>i._plugins.invalidate()),g_=!0;function xH(i,t,e){const{startAngle:n,pixelMargin:r,x:s,y:o,outerRadius:l,innerRadius:u}=t;let p=r/l;i.beginPath(),i.arc(s,o,l,n-p,e+p),u>r?(p=r/u,i.arc(s,o,u,e+p,n-p,!0)):i.arc(s,o,r,e+_u,n-_u),i.closePath(),i.clip()}function yC(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function SL(i,t,e,n,r,s){const{x:o,y:l,startAngle:u,pixelMargin:p,innerRadius:v}=t,w=Math.max(t.outerRadius+n+e-p,0),I=v>0?v+n+e+p:0;let T=0;const k=r-u;if(n){const ti=((v>0?v-n:0)+(w>0?w-n:0))/2;T=(k-(0!==ti?k*ti/(ti+n):k))/2}const X=(k-Math.max(.001,k*w-e/Lc)/w)/2,ue=u+X+T,xe=r-X-T,{outerStart:be,outerEnd:Se,innerStart:Ye,innerEnd:gt}=function ape(i,t,e,n){const r=function ope(i){return hL(i,["outerStart","outerEnd","innerStart","innerEnd"])}(i.options.borderRadius),s=(e-t)/2,o=Math.min(s,n*t/2),l=u=>{const p=(e-Math.min(s,u))*n/2;return Ud(u,0,Math.min(s,p))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Ud(r.innerStart,0,o),innerEnd:Ud(r.innerEnd,0,o)}}(t,I,w,xe-ue),zt=w-be,it=w-Se,Tt=ue+be/zt,un=xe-Se/it,ei=I+Ye,fi=I+gt,ni=ue+Ye/ei,Bn=xe-gt/fi;if(i.beginPath(),s){if(i.arc(o,l,w,Tt,un),Se>0){const ti=yC(it,un,o,l);i.arc(ti.x,ti.y,Se,un,xe+_u)}const Zn=yC(fi,xe,o,l);if(i.lineTo(Zn.x,Zn.y),gt>0){const ti=yC(fi,Bn,o,l);i.arc(ti.x,ti.y,gt,xe+_u,Bn+Math.PI)}if(i.arc(o,l,I,xe-gt/I,ue+Ye/I,!0),Ye>0){const ti=yC(ei,ni,o,l);i.arc(ti.x,ti.y,Ye,ni+Math.PI,ue-_u)}const Rn=yC(zt,ue,o,l);if(i.lineTo(Rn.x,Rn.y),be>0){const ti=yC(zt,Tt,o,l);i.arc(ti.x,ti.y,be,ue-_u,Tt)}}else{i.moveTo(o,l);const Zn=Math.cos(Tt)*w+o,Rn=Math.sin(Tt)*w+l;i.lineTo(Zn,Rn);const ti=Math.cos(un)*w+o,Yn=Math.sin(un)*w+l;i.lineTo(ti,Yn)}i.closePath()}Object.defineProperties(AS,{defaults:{enumerable:g_,value:Ta},instances:{enumerable:g_,value:wS},overrides:{enumerable:g_,value:I0},registry:{enumerable:g_,value:hv},version:{enumerable:g_,value:"3.9.1"},getChart:{enumerable:g_,value:wH},register:{enumerable:g_,value:(...i)=>{hv.add(...i),AH()}},unregister:{enumerable:g_,value:(...i)=>{hv.remove(...i),AH()}}});class xS extends ym{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:s,distance:o}=Y4(r,{x:t,y:e}),{startAngle:l,endAngle:u,innerRadius:p,outerRadius:v,circumference:w}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),I=this.options.spacing/2,k=Vo(w,u-l)>=Nl||NA(s,l,u),H=dy(o,p+I,v+I);return k&&H}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:u,spacing:p}=this.options,v=(r+s)/2,w=(o+l+p+u)/2;return{x:e+Math.cos(v)*w,y:n+Math.sin(v)*w}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/2,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>Nl?Math.floor(n/Nl):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let l=0;if(r){l=r/2;const p=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(p)*l,Math.sin(p)*l),this.circumference>=Lc&&(l=r)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const u=function lpe(i,t,e,n,r){const{fullCircles:s,startAngle:o,circumference:l}=t;let u=t.endAngle;if(s){SL(i,t,e,n,o+Nl,r);for(let p=0;p<s;++p)i.fill();isNaN(l)||(u=o+l%Nl,l%Nl==0&&(u+=Nl))}return SL(i,t,e,n,u,r),i.fill(),u}(t,this,l,s,o);(function upe(i,t,e,n,r,s){const{options:o}=t,{borderWidth:l,borderJoinStyle:u}=o,p="inner"===o.borderAlign;!l||(p?(i.lineWidth=2*l,i.lineJoin=u||"round"):(i.lineWidth=l,i.lineJoin=u||"bevel"),t.fullCircles&&function cpe(i,t,e){const{x:n,y:r,startAngle:s,pixelMargin:o,fullCircles:l}=t,u=Math.max(t.outerRadius-o,0),p=t.innerRadius+o;let v;for(e&&xH(i,t,s+Nl),i.beginPath(),i.arc(n,r,p,s+Nl,s,!0),v=0;v<l;++v)i.stroke();for(i.beginPath(),i.arc(n,r,u,s,s+Nl),v=0;v<l;++v)i.stroke()}(i,t,p),p&&xH(i,t,r),SL(i,t,e,n,r,s),i.stroke())})(t,this,l,s,u,o),t.restore()}}function IH(i,t,e=t){i.lineCap=Vo(e.borderCapStyle,t.borderCapStyle),i.setLineDash(Vo(e.borderDash,t.borderDash)),i.lineDashOffset=Vo(e.borderDashOffset,t.borderDashOffset),i.lineJoin=Vo(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=Vo(e.borderWidth,t.borderWidth),i.strokeStyle=Vo(e.borderColor,t.borderColor)}function dpe(i,t,e){i.lineTo(e.x,e.y)}function SH(i,t,e={}){const n=i.length,{start:r=0,end:s=n-1}=e,{start:o,end:l}=t,u=Math.max(r,o),p=Math.min(s,l);return{count:n,start:u,loop:t.loop,ilen:p<u&&!(r<o&&s<o||r>l&&s>l)?n+p-u:p-u}}function fpe(i,t,e,n){const{points:r,options:s}=t,{count:o,start:l,loop:u,ilen:p}=SH(r,e,n),v=function hpe(i){return i.stepped?Ede:i.tension||"monotone"===i.cubicInterpolationMode?Tde:dpe}(s);let T,k,H,{move:w=!0,reverse:I}=n||{};for(T=0;T<=p;++T)k=r[(l+(I?p-T:T))%o],!k.skip&&(w?(i.moveTo(k.x,k.y),w=!1):v(i,H,k,I,s.stepped),H=k);return u&&(k=r[(l+(I?p:0))%o],v(i,H,k,I,s.stepped)),!!u}function ppe(i,t,e,n){const r=t.points,{count:s,start:o,ilen:l}=SH(r,e,n),{move:u=!0,reverse:p}=n||{};let I,T,k,H,X,ue,v=0,w=0;const xe=Se=>(o+(p?l-Se:Se))%s,be=()=>{H!==X&&(i.lineTo(v,X),i.lineTo(v,H),i.lineTo(v,ue))};for(u&&(T=r[xe(0)],i.moveTo(T.x,T.y)),I=0;I<=l;++I){if(T=r[xe(I)],T.skip)continue;const Se=T.x,Ye=T.y,gt=0|Se;gt===k?(Ye<H?H=Ye:Ye>X&&(X=Ye),v=(w*v+Se)/++w):(be(),i.lineTo(Se,Ye),k=gt,w=0,H=X=Ye),ue=Ye}be()}function EL(i){const t=i.options;return i._decimated||i._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?fpe:ppe}xS.id="arc",xS.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},xS.defaultRoutes={backgroundColor:"backgroundColor"};const ype="function"==typeof Path2D;let IS=(()=>{class i extends ym{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(Zde(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,n),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function fhe(i,t){const e=i.points,n=i.options.spanGaps,r=e.length;if(!r)return[];const s=!!i._loop,{start:o,end:l}=function dhe(i,t,e,n){let r=0,s=t-1;if(e&&!n)for(;r<t&&!i[r].skip;)r++;for(;r<t&&i[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&i[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,n);return function FU(i,t,e,n){return n&&n.setContext&&e?function phe(i,t,e,n){const r=i._chart.getContext(),s=NU(i.options),{_datasetIndex:o,options:{spanGaps:l}}=i,u=e.length,p=[];let v=s,w=t[0].start,I=w;function T(k,H,X,ue){const xe=l?-1:1;if(k!==H){for(k+=u;e[k%u].skip;)k-=xe;for(;e[H%u].skip;)H+=xe;k%u!=H%u&&(p.push({start:k%u,end:H%u,loop:X,style:ue}),v=ue,w=H%u)}}for(const k of t){w=l?w:k.start;let X,H=e[w%u];for(I=w+1;I<=k.end;I++){const ue=e[I%u];X=NU(n.setContext(p_(r,{type:"segment",p0:H,p1:ue,p0DataIndex:(I-1)%u,p1DataIndex:I%u,datasetIndex:o}))),ghe(X,v)&&T(w,I-1,k.loop,v),H=ue,v=X}w<I-1&&T(w,I-1,k.loop,v)}return p}(i,t,e,n):t}(i,!0===n?[{start:o,end:l,loop:s}]:function hhe(i,t,e,n){const r=i.length,s=[];let u,o=t,l=i[t];for(u=t+1;u<=e;++u){const p=i[u%r];p.skip||p.stop?l.skip||(s.push({start:t%r,end:(u-1)%r,loop:n=!1}),t=o=p.stop?u:null):(o=u,l.skip&&(t=u)),l=p}return null!==o&&s.push({start:t%r,end:o%r,loop:n}),s}(e,o,l<o?l+r:l,!!i._fullLoop&&0===o&&l===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],o=this.points,l=OU(this,{property:n,start:s,end:s});if(!l.length)return;const u=[],p=function gpe(i){return i.stepped?she:i.tension||"monotone"===i.cubicInterpolationMode?ohe:L0}(r);let v,w;for(v=0,w=l.length;v<w;++v){const{start:I,end:T}=l[v],k=o[I],H=o[T];if(k===H){u.push(k);continue}const ue=p(k,H,Math.abs((s-k[n])/(H[n]-k[n])),r.stepped);ue[n]=e[n],u.push(ue)}return 1===u.length?u[0]:u}pathSegment(e,n,r){return EL(this)(e,this,n,r)}path(e,n,r){const s=this.segments,o=EL(this);let l=this._loop;n=n||0,r=r||this.points.length-n;for(const u of s)l&=o(e,this,u,{start:n,end:n+r-1});return!!l}draw(e,n,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function _pe(i,t,e,n){ype&&!t.options.segment?function mpe(i,t,e,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,n)&&r.closePath()),IH(i,t.options),i.stroke(r)}(i,t,e,n):function vpe(i,t,e,n){const{segments:r,options:s}=t,o=EL(t);for(const l of r)IH(i,s,l.style),i.beginPath(),o(i,t,l,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}(i,t,e,n)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i.id="line",i.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t},i})();function EH(i,t,e,n){const r=i.options,{[e]:s}=i.getProps([e],n);return Math.abs(t-s)<r.radius+r.hitRadius}let bpe=(()=>{class i extends ym{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return EH(this,e,"x",n)}inYRange(e,n){return EH(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){let n=(e=e||this.options||{}).radius||0;return n=Math.max(n,n&&e.hoverRadius||0),2*(n+(n&&e.borderWidth||0))}draw(e,n){const r=this.options;this.skip||r.radius<.1||!HA(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,dL(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return i.id="point",i.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i})();function TH(i,t){const{x:e,y:n,base:r,width:s,height:o}=i.getProps(["x","y","base","width","height"],t);let l,u,p,v,w;return i.horizontal?(w=o/2,l=Math.min(e,r),u=Math.max(e,r),p=n-w,v=n+w):(w=s/2,l=e-w,u=e+w,p=Math.min(n,r),v=Math.max(n,r)),{left:l,top:p,right:u,bottom:v}}function m_(i,t,e,n){return i?0:Ud(t,e,n)}function TL(i,t,e,n){const r=null===t,s=null===e,l=i&&!(r&&s)&&TH(i,n);return l&&(r||dy(t,l.left,l.right))&&(s||dy(e,l.top,l.bottom))}function Ipe(i,t){i.rect(t.x,t.y,t.w,t.h)}function ML(i,t,e={}){const n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0;return{x:i.x+n,y:i.y+r,w:i.w+((i.x+i.w!==e.x+e.w?t:0)-n),h:i.h+((i.y+i.h!==e.y+e.h?t:0)-r),radius:i.radius}}class SS extends ym{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:o}=function Ape(i){const t=TH(i),e=t.right-t.left,n=t.bottom-t.top,r=function Cpe(i,t,e){const r=i.borderSkipped,s=vU(i.options.borderWidth);return{t:m_(r.top,s.top,0,e),r:m_(r.right,s.right,0,t),b:m_(r.bottom,s.bottom,0,e),l:m_(r.left,s.left,0,t)}}(i,e/2,n/2),s=function wpe(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=T0(r),o=Math.min(t,e),l=i.borderSkipped,u=n||xa(r);return{topLeft:m_(!u||l.top||l.left,s.topLeft,0,o),topRight:m_(!u||l.top||l.right,s.topRight,0,o),bottomLeft:m_(!u||l.bottom||l.left,s.bottomLeft,0,o),bottomRight:m_(!u||l.bottom||l.right,s.bottomRight,0,o)}}(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),l=function xpe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}(o.radius)?GA:Ipe;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),l(t,ML(o,e,s)),t.clip(),l(t,ML(s,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),l(t,ML(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return TL(this,t,e,n)}inXRange(t,e){return TL(this,t,null,e)}inYRange(t,e){return TL(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}SS.id="bar",SS.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},SS.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Spe=Object.freeze({__proto__:null,ArcElement:xS,LineElement:IS,PointElement:bpe,BarElement:SS});function MH(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:t})}}function DH(i){i.data.datasets.forEach(t=>{MH(t)})}var Dpe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled)return void DH(i);const n=i.width;i.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:l}=r,u=i.getDatasetMeta(s),p=o||r.data;if("y"===WA([l,i.options.indexAxis])||!u.controller.supportsDecimation)return;const v=i.scales[u.xAxisID];if("linear"!==v.type&&"time"!==v.type||i.options.parsing)return;let k,{start:w,count:I}=function Mpe(i,t){const e=t.length;let r,n=0;const{iScale:s}=i,{min:o,max:l,minDefined:u,maxDefined:p}=s.getUserBounds();return u&&(n=Ud(hy(t,s.axis,o).lo,0,e-1)),r=p?Ud(hy(t,s.axis,l).hi+1,n,e)-n:e-n,{start:n,count:r}}(u,p);if(I<=(e.threshold||4*n))MH(r);else{switch(Va(o)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(H){this._data=H}})),e.algorithm){case"lttb":k=function Epe(i,t,e,n,r){const s=r.samples||n;if(s>=e)return i.slice(t,t+e);const o=[],l=(e-2)/(s-2);let u=0;const p=t+e-1;let w,I,T,k,H,v=t;for(o[u++]=i[v],w=0;w<s-2;w++){let xe,X=0,ue=0;const be=Math.floor((w+1)*l)+1+t,Se=Math.min(Math.floor((w+2)*l)+1,e)+t,Ye=Se-be;for(xe=be;xe<Se;xe++)X+=i[xe].x,ue+=i[xe].y;X/=Ye,ue/=Ye;const gt=Math.floor(w*l)+1+t,zt=Math.min(Math.floor((w+1)*l)+1,e)+t,{x:it,y:Tt}=i[v];for(T=k=-1,xe=gt;xe<zt;xe++)k=.5*Math.abs((it-X)*(i[xe].y-Tt)-(it-i[xe].x)*(ue-Tt)),k>T&&(T=k,I=i[xe],H=xe);o[u++]=I,v=H}return o[u++]=i[p],o}(p,w,I,n,e);break;case"min-max":k=function Tpe(i,t,e,n){let o,l,u,p,v,w,I,T,k,H,r=0,s=0;const X=[],xe=i[t].x,Se=i[t+e-1].x-xe;for(o=t;o<t+e;++o){l=i[o],u=(l.x-xe)/Se*n,p=l.y;const Ye=0|u;if(Ye===v)p<k?(k=p,w=o):p>H&&(H=p,I=o),r=(s*r+l.x)/++s;else{const gt=o-1;if(!Va(w)&&!Va(I)){const zt=Math.min(w,I),it=Math.max(w,I);zt!==T&&zt!==gt&&X.push({...i[zt],x:r}),it!==T&&it!==gt&&X.push({...i[it],x:r})}o>0&&gt!==T&&X.push(i[gt]),X.push(l),v=Ye,s=0,k=H=p,w=I=T=o}}return X}(p,w,I,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=k}})},destroy(i){DH(i)}};function DL(i,t,e,n){if(n)return;let r=t[i],s=e[i];return"angle"===i&&(r=Bp(r),s=Bp(s)),{property:i,start:r,end:s}}function LL(i,t,e){for(;t>i;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function LH(i,t,e,n){return i&&t?n(i[e],t[e]):i?i[e]:t?t[e]:0}function PH(i,t){let e=[],n=!1;return rc(i)?(n=!0,e=i):e=function Ppe(i,t){const{x:e=null,y:n=null}=i||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:l})=>{l=LL(o,l,r);const u=r[o],p=r[l];null!==n?(s.push({x:u.x,y:n}),s.push({x:p.x,y:n})):null!==e&&(s.push({x:e,y:u.y}),s.push({x:e,y:p.y}))}),s}(i,t),e.length?new IS({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function RH(i){return i&&!1!==i.fill}function Rpe(i,t,e){let r=i[t].fill;const s=[t];let o;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!Lu(r))return r;if(o=i[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function kpe(i,t,e){const n=function Bpe(i){const t=i.options,e=t.fill;let n=Vo(e&&e.target,e);return void 0===n&&(n=!!t.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(i);if(xa(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return Lu(r)&&Math.floor(r)===r?function Ope(i,t,e,n){return("-"===i||"+"===i)&&(e=t+e),!(e===t||e<0||e>=n)&&e}(n[0],t,r,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Upe(i,t,e){const n=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:l,point:u}=Hpe(s,t,"x");if(!(!u||o&&l))if(o)n.unshift(u);else if(i.push(u),!l)break}i.push(...n)}function Hpe(i,t,e){const n=i.interpolate(t,e);if(!n)return{};const r=n[e],s=i.segments,o=i.points;let l=!1,u=!1;for(let p=0;p<s.length;p++){const v=s[p],w=o[v.start][e],I=o[v.end][e];if(dy(r,w,I)){l=r===w,u=r===I;break}}return{first:l,last:u,point:n}}class kH{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:s,radius:o}=this;return t.arc(r,s,o,(e=e||{start:0,end:Nl}).end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function PL(i,t,e){const n=function Gpe(i){const{chart:t,fill:e,line:n}=i;if(Lu(e))return function Wpe(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function zpe(i){const{scale:t,index:e,line:n}=i,r=[],s=n.segments,o=n.points,l=function Vpe(i,t){const e=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const s=n[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);l.push(PH({x:null,y:t.bottom},n));for(let u=0;u<s.length;u++){const p=s[u];for(let v=p.start;v<=p.end;v++)Upe(r,o[v],l)}return new IS({points:r,options:{}})}(i);if("shape"===e)return!0;const r=function jpe(i){return(i.scale||{}).getPointPositionForValue?function qpe(i){const{scale:t,fill:e}=i,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,o=function Npe(i,t,e){let n;return n="start"===i?e:"end"===i?t.options.reverse?t.min:t.max:xa(i)?i.value:t.getBaseValue(),n}(e,t,s),l=[];if(n.grid.circular){const u=t.getPointPositionForValue(0,s);return new kH({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(let u=0;u<r;++u)l.push(t.getPointPositionForValue(u,o));return l}(i):function $pe(i){const{scale:t={},fill:e}=i,n=function Fpe(i,t){let e=null;return"start"===i?e=t.bottom:"end"===i?e=t.top:xa(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(Lu(n)){const r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}(i)}(i);return r instanceof kH?r:PH(r,n)}(t),{line:r,scale:s,axis:o}=t,l=r.options,u=l.fill,p=l.backgroundColor,{above:v=p,below:w=p}=u||{};n&&r.points.length&&(uS(i,e),function Xpe(i,t){const{line:e,target:n,above:r,below:s,area:o,scale:l}=t,u=e._loop?"angle":t.axis;i.save(),"x"===u&&s!==r&&(OH(i,n,o.top),FH(i,{line:e,target:n,color:r,scale:l,property:u}),i.restore(),i.save(),OH(i,n,o.bottom)),FH(i,{line:e,target:n,color:s,scale:l,property:u}),i.restore()}(i,{line:r,target:n,above:v,below:w,area:e,scale:s,axis:o}),dS(i))}function OH(i,t,e){const{segments:n,points:r}=t;let s=!0,o=!1;i.beginPath();for(const l of n){const{start:u,end:p}=l,v=r[u],w=r[LL(u,p,r)];s?(i.moveTo(v.x,v.y),s=!1):(i.lineTo(v.x,e),i.lineTo(v.x,v.y)),o=!!t.pathSegment(i,l,{move:o}),o?i.closePath():i.lineTo(w.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function FH(i,t){const{line:e,target:n,property:r,color:s,scale:o}=t,l=function Lpe(i,t,e){const n=i.segments,r=i.points,s=t.points,o=[];for(const l of n){let{start:u,end:p}=l;p=LL(u,p,r);const v=DL(e,r[u],r[p],l.loop);if(!t.segments){o.push({source:l,target:v,start:r[u],end:r[p]});continue}const w=OU(t,v);for(const I of w){const T=DL(e,s[I.start],s[I.end],I.loop),k=kU(l,r,T);for(const H of k)o.push({source:H,target:I,start:{[e]:LH(v,T,"start",Math.max)},end:{[e]:LH(v,T,"end",Math.min)}})}}return o}(e,n,r);for(const{source:u,target:p,start:v,end:w}of l){const{style:{backgroundColor:I=s}={}}=u,T=!0!==n;i.save(),i.fillStyle=I,Ype(i,o,T&&DL(r,v,w)),i.beginPath();const k=!!e.pathSegment(i,u);let H;if(T){k?i.closePath():NH(i,n,w,r);const X=!!n.pathSegment(i,p,{move:k,reverse:!0});H=k&&X,H||NH(i,n,v,r)}i.closePath(),i.fill(H?"evenodd":"nonzero"),i.restore()}}function Ype(i,t,e){const{top:n,bottom:r}=t.chart.chartArea,{property:s,start:o,end:l}=e||{};"x"===s&&(i.beginPath(),i.rect(o,n,l-o,r-n),i.clip())}function NH(i,t,e,n){const r=t.interpolate(e,n);r&&i.lineTo(r.x,r.y)}var Kpe={id:"filler",afterDatasetsUpdate(i,t,e){const n=(i.data.datasets||[]).length,r=[];let s,o,l,u;for(o=0;o<n;++o)s=i.getDatasetMeta(o),l=s.dataset,u=null,l&&l.options&&l instanceof IS&&(u={visible:i.isDatasetVisible(o),index:o,fill:kpe(l,o,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=u,r.push(u);for(o=0;o<n;++o)u=r[o],u&&!1!==u.fill&&(u.fill=Rpe(r,o,e.propagate))},beforeDraw(i,t,e){const n="beforeDraw"===e.drawTime,r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;!l||(l.line.updateControlPoints(s,l.axis),n&&l.fill&&PL(i.ctx,l,s))}},beforeDatasetsDraw(i,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const s=n[r].$filler;RH(s)&&PL(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,t,e){const n=t.meta.$filler;!RH(n)||"beforeDatasetDraw"!==e.drawTime||PL(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const BH=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}};class zH extends ym{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=sc(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=_d(n.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=BH(n,s);let p,v;e.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(o,s,l,u)+10):(v=this.maxHeight,p=this._fitCols(o,s,l,u)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+l;let w=t;s.textAlign="left",s.textBaseline="middle";let I=-1,T=-v;return this.legendItems.forEach((k,H)=>{const X=n+e/2+s.measureText(k.text).width;(0===H||p[p.length-1]+X+2*l>o)&&(w+=v,p[p.length-(H>0?0:1)]=0,T+=v,I++),u[H]={left:0,top:T,row:I,width:X,height:r},p[p.length-1]+=X+l}),w}_fitCols(t,e,n,r){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.columnSizes=[],v=o-t;let w=l,I=0,T=0,k=0,H=0;return this.legendItems.forEach((X,ue)=>{const xe=n+e/2+s.measureText(X.text).width;ue>0&&T+r+2*l>v&&(w+=I+l,p.push({width:I,height:T}),k+=I+l,H++,I=T=0),u[ue]={left:k,top:T,col:H,width:xe,height:r},I=Math.max(I,xe),T+=r+l}),w+=I,p.push({width:I,height:T}),w}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:s}}=this,o=vC(s,this.left,this.width);if(this.isHorizontal()){let l=0,u=Uh(n,this.left+r,this.right-this.lineWidths[l]);for(const p of e)l!==p.row&&(l=p.row,u=Uh(n,this.left+r,this.right-this.lineWidths[l])),p.top+=this.top+t+r,p.left=o.leftForLtr(o.x(u),p.width),u+=p.width+r}else{let l=0,u=Uh(n,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const p of e)p.col!==l&&(l=p.col,u=Uh(n,this.top+t+r,this.bottom-this.columnSizes[l].height)),p.top=u,p.left+=this.left+r,p.left=o.leftForLtr(o.x(p.left),p.width),u+=p.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;uS(t,this),this._draw(),dS(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:s,labels:o}=t,l=Ta.color,u=vC(t.rtl,this.left,this.width),p=_d(o.font),{color:v,padding:w}=o,I=p.size,T=I/2;let k;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:H,boxHeight:X,itemHeight:ue}=BH(o,I),Se=this.isHorizontal(),Ye=this._computeTitleHeight();k=Se?{x:Uh(s,this.left+w,this.right-n[0]),y:this.top+w+Ye,line:0}:{x:this.left+w,y:Uh(s,this.top+Ye+w,this.bottom-e[0].height),line:0},DU(this.ctx,t.textDirection);const gt=ue+w;this.legendItems.forEach((zt,it)=>{r.strokeStyle=zt.fontColor||v,r.fillStyle=zt.fontColor||v;const Tt=r.measureText(zt.text).width,un=u.textAlign(zt.textAlign||(zt.textAlign=o.textAlign)),ei=H+T+Tt;let fi=k.x,ni=k.y;u.setWidth(this.width),Se?it>0&&fi+ei+w>this.right&&(ni=k.y+=gt,k.line++,fi=k.x=Uh(s,this.left+w,this.right-n[k.line])):it>0&&ni+gt>this.bottom&&(fi=k.x=fi+e[k.line].width+w,k.line++,ni=k.y=Uh(s,this.top+Ye+w,this.bottom-e[k.line].height)),function(zt,it,Tt){if(isNaN(H)||H<=0||isNaN(X)||X<0)return;r.save();const un=Vo(Tt.lineWidth,1);if(r.fillStyle=Vo(Tt.fillStyle,l),r.lineCap=Vo(Tt.lineCap,"butt"),r.lineDashOffset=Vo(Tt.lineDashOffset,0),r.lineJoin=Vo(Tt.lineJoin,"miter"),r.lineWidth=un,r.strokeStyle=Vo(Tt.strokeStyle,l),r.setLineDash(Vo(Tt.lineDash,[])),o.usePointStyle){const ei={radius:X*Math.SQRT2/2,pointStyle:Tt.pointStyle,rotation:Tt.rotation,borderWidth:un},fi=u.xPlus(zt,H/2);mU(r,ei,fi,it+T,o.pointStyleWidth&&H)}else{const ei=it+Math.max((I-X)/2,0),fi=u.leftForLtr(zt,H),ni=T0(Tt.borderRadius);r.beginPath(),Object.values(ni).some(Bn=>0!==Bn)?GA(r,{x:fi,y:ei,w:H,h:X,radius:ni}):r.rect(fi,ei,H,X),r.fill(),0!==un&&r.stroke()}r.restore()}(u.x(fi),ni,zt),fi=((i,t,e,n)=>i===(n?"left":"right")?e:"center"===i?(t+e)/2:t)(un,fi+H+T,Se?fi+ei:this.right,t.rtl),function(zt,it,Tt){E0(r,Tt.text,zt,it+ue/2,p,{strikethrough:Tt.hidden,textAlign:u.textAlign(Tt.textAlign)})}(u.x(fi),ni,zt),Se?k.x+=ei+w:k.y+=gt}),LU(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=_d(e.font),r=Hh(e.padding);if(!e.display)return;const s=vC(t.rtl,this.left,this.width),o=this.ctx,l=e.position,p=r.top+n.size/2;let v,w=this.left,I=this.width;if(this.isHorizontal())I=Math.max(...this.lineWidths),v=this.top+p,w=Uh(t.align,w,this.right-I);else{const k=this.columnSizes.reduce((H,X)=>Math.max(H,X.height),0);v=p+Uh(t.align,this.top,this.bottom-k-t.labels.padding-this._computeTitleHeight())}const T=Uh(l,w,w+I);o.textAlign=s.textAlign(nL(l)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,E0(o,e.text,T,v,n)}_computeTitleHeight(){const t=this.options.title,e=_d(t.font),n=Hh(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,s;if(dy(t,this.left,this.right)&&dy(e,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],dy(t,r.left,r.left+r.width)&&dy(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function Qpe(i,t){return!(("mousemove"!==i&&"mouseout"!==i||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==i&&"mouseup"!==i))}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((i,t)=>null!==i&&null!==t&&i.datasetIndex===t.datasetIndex&&i.index===t.index)(r,n);r&&!s&&sc(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!s&&sc(e.onHover,[t,n,this],this)}else n&&sc(e.onClick,[t,n,this],this)}}var Jpe={id:"legend",_element:zH,start(i,t,e){const n=i.legend=new zH({ctx:i.ctx,options:e,chart:i});Gh.configure(i,n,e),Gh.addBox(i,n)},stop(i){Gh.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;Gh.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:s}}=i.legend.options;return i._getSortedDatasetMetas().map(o=>{const l=o.controller.getStyle(e?0:void 0),u=Hh(l.borderWidth);return{text:t[o.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!o.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class RL extends ym{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=rc(n.text)?n.text.length:1;this._padding=Hh(n.padding);const s=r*_d(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:s,options:o}=this,l=o.align;let p,v,w,u=0;return this.isHorizontal()?(v=Uh(l,n,s),w=e+t,p=s-n):("left"===o.position?(v=n+t,w=Uh(l,r,e),u=-.5*Lc):(v=s-t,w=Uh(l,e,r),u=.5*Lc),p=r-e),{titleX:v,titleY:w,maxWidth:p,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=_d(e.font),s=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:u,rotation:p}=this._drawArgs(s);E0(t,e.text,0,0,n,{color:e.color,maxWidth:u,rotation:p,textAlign:nL(e.align),textBaseline:"middle",translation:[o,l]})}}var tge={id:"title",_element:RL,start(i,t,e){!function ege(i,t){const e=new RL({ctx:i.ctx,options:t,chart:i});Gh.configure(i,e,t),Gh.addBox(i,e),i.titleBlock=e}(i,e)},stop(i){Gh.removeBox(i,i.titleBlock),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;Gh.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ES=new WeakMap;var nge={id:"subtitle",start(i,t,e){const n=new RL({ctx:i.ctx,options:e,chart:i});Gh.configure(i,n,e),Gh.addBox(i,n),ES.set(i,n)},stop(i){Gh.removeBox(i,ES.get(i)),ES.delete(i)},beforeUpdate(i,t,e){const n=ES.get(i);Gh.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ex={average(i){if(!i.length)return!1;let t,e,n=0,r=0,s=0;for(t=0,e=i.length;t<e;++t){const o=i[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n+=l.x,r+=l.y,++s}}return{x:n/s,y:r/s}},nearest(i,t){if(!i.length)return!1;let s,o,l,e=t.x,n=t.y,r=Number.POSITIVE_INFINITY;for(s=0,o=i.length;s<o;++s){const u=i[s].element;if(u&&u.hasValue()){const v=eL(t,u.getCenterPoint());v<r&&(r=v,l=u)}}if(l){const u=l.tooltipPosition();e=u.x,n=u.y}return{x:e,y:n}}};function fv(i,t){return t&&(rc(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function gy(i){return("string"==typeof i||i instanceof String)&&i.indexOf("\n")>-1?i.split("\n"):i}function ige(i,t){const{element:e,datasetIndex:n,index:r}=t,s=i.getDatasetMeta(n).controller,{label:o,value:l}=s.getLabelAndValue(r);return{chart:i,label:o,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function VH(i,t){const e=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:o,boxHeight:l}=t,u=_d(t.bodyFont),p=_d(t.titleFont),v=_d(t.footerFont),w=s.length,I=r.length,T=n.length,k=Hh(t.padding);let H=k.height,X=0,ue=n.reduce((Se,Ye)=>Se+Ye.before.length+Ye.lines.length+Ye.after.length,0);ue+=i.beforeBody.length+i.afterBody.length,w&&(H+=w*p.lineHeight+(w-1)*t.titleSpacing+t.titleMarginBottom),ue&&(H+=T*(t.displayColors?Math.max(l,u.lineHeight):u.lineHeight)+(ue-T)*u.lineHeight+(ue-1)*t.bodySpacing),I&&(H+=t.footerMarginTop+I*v.lineHeight+(I-1)*t.footerSpacing);let xe=0;const be=function(Se){X=Math.max(X,e.measureText(Se).width+xe)};return e.save(),e.font=p.string,Ml(i.title,be),e.font=u.string,Ml(i.beforeBody.concat(i.afterBody),be),xe=t.displayColors?o+2+t.boxPadding:0,Ml(n,Se=>{Ml(Se.before,be),Ml(Se.lines,be),Ml(Se.after,be)}),xe=0,e.font=v.string,Ml(i.footer,be),e.restore(),X+=k.width,{width:X,height:H}}function oge(i,t,e,n){const{x:r,width:s}=e,{width:o,chartArea:{left:l,right:u}}=i;let p="center";return"center"===n?p=r<=(l+u)/2?"left":"right":r<=s/2?p="left":r>=o-s/2&&(p="right"),function sge(i,t,e,n){const{x:r,width:s}=n,o=e.caretSize+e.caretPadding;if("left"===i&&r+s+o>t.width||"right"===i&&r-s-o<0)return!0}(p,i,t,e)&&(p="center"),p}function UH(i,t,e){const n=e.yAlign||t.yAlign||function rge(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}(i,e);return{xAlign:e.xAlign||t.xAlign||oge(i,t,e,n),yAlign:n}}function HH(i,t,e,n){const{caretSize:r,caretPadding:s,cornerRadius:o}=i,{xAlign:l,yAlign:u}=e,p=r+s,{topLeft:v,topRight:w,bottomLeft:I,bottomRight:T}=T0(o);let k=function age(i,t){let{x:e,width:n}=i;return"right"===t?e-=n:"center"===t&&(e-=n/2),e}(t,l);const H=function lge(i,t,e){let{y:n,height:r}=i;return"top"===t?n+=e:n-="bottom"===t?r+e:r/2,n}(t,u,p);return"center"===u?"left"===l?k+=p:"right"===l&&(k-=p):"left"===l?k-=Math.max(v,I)+r:"right"===l&&(k+=Math.max(w,T)+r),{x:Ud(k,0,n.width-t.width),y:Ud(H,0,n.height-t.height)}}function TS(i,t,e){const n=Hh(e.padding);return"center"===t?i.x+i.width/2:"right"===t?i.x+i.width-n.right:i.x+n.left}function GH(i){return fv([],gy(i))}function WH(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}let jH=(()=>{class i extends ym{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,o=new zU(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function cge(i,t,e){return p_(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=r.beforeTitle.apply(this,[e]),o=r.title.apply(this,[e]),l=r.afterTitle.apply(this,[e]);let u=[];return u=fv(u,gy(s)),u=fv(u,gy(o)),u=fv(u,gy(l)),u}getBeforeBody(e,n){return GH(n.callbacks.beforeBody.apply(this,[e]))}getBody(e,n){const{callbacks:r}=n,s=[];return Ml(e,o=>{const l={before:[],lines:[],after:[]},u=WH(r,o);fv(l.before,gy(u.beforeLabel.call(this,o))),fv(l.lines,u.label.call(this,o)),fv(l.after,gy(u.afterLabel.call(this,o))),s.push(l)}),s}getAfterBody(e,n){return GH(n.callbacks.afterBody.apply(this,[e]))}getFooter(e,n){const{callbacks:r}=n,s=r.beforeFooter.apply(this,[e]),o=r.footer.apply(this,[e]),l=r.afterFooter.apply(this,[e]);let u=[];return u=fv(u,gy(s)),u=fv(u,gy(o)),u=fv(u,gy(l)),u}_createItems(e){const n=this._active,r=this.chart.data,s=[],o=[],l=[];let p,v,u=[];for(p=0,v=n.length;p<v;++p)u.push(ige(this.chart,n[p]));return e.filter&&(u=u.filter((w,I,T)=>e.filter(w,I,T,r))),e.itemSort&&(u=u.sort((w,I)=>e.itemSort(w,I,r))),Ml(u,w=>{const I=WH(e.callbacks,w);s.push(I.labelColor.call(this,w)),o.push(I.labelPointStyle.call(this,w)),l.push(I.labelTextColor.call(this,w))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let o,l=[];if(s.length){const u=ex[r.position].call(this,s,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const p=this._size=VH(this,r),v=Object.assign({},u,p),w=UH(this.chart,r,v),I=HH(r,v,w,this.chart);this.xAlign=w.xAlign,this.yAlign=w.yAlign,o={opacity:1,x:I.x,y:I.y,width:p.width,height:p.height,caretX:u.x,caretY:u.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const o=this.getCaretPosition(e,r,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:o}=this,{caretSize:l,cornerRadius:u}=r,{topLeft:p,topRight:v,bottomLeft:w,bottomRight:I}=T0(u),{x:T,y:k}=e,{width:H,height:X}=n;let ue,xe,be,Se,Ye,gt;return"center"===o?(Ye=k+X/2,"left"===s?(ue=T,xe=ue-l,Se=Ye+l,gt=Ye-l):(ue=T+H,xe=ue+l,Se=Ye-l,gt=Ye+l),be=ue):(xe="left"===s?T+Math.max(p,w)+l:"right"===s?T+H-Math.max(v,I)-l:this.caretX,"top"===o?(Se=k,Ye=Se-l,ue=xe-l,be=xe+l):(Se=k+X,Ye=Se+l,ue=xe+l,be=xe-l),gt=Se),{x1:ue,x2:xe,x3:be,y1:Se,y2:Ye,y3:gt}}drawTitle(e,n,r){const s=this.title,o=s.length;let l,u,p;if(o){const v=vC(r.rtl,this.x,this.width);for(e.x=TS(this,r.titleAlign,r),n.textAlign=v.textAlign(r.titleAlign),n.textBaseline="middle",l=_d(r.titleFont),u=r.titleSpacing,n.fillStyle=r.titleColor,n.font=l.string,p=0;p<o;++p)n.fillText(s[p],v.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,p+1===o&&(e.y+=r.titleMarginBottom-u)}}_drawColorBox(e,n,r,s,o){const l=this.labelColors[r],u=this.labelPointStyles[r],{boxHeight:p,boxWidth:v,boxPadding:w}=o,I=_d(o.bodyFont),T=TS(this,"left",o),k=s.x(T),X=n.y+(p<I.lineHeight?(I.lineHeight-p)/2:0);if(o.usePointStyle){const ue={radius:Math.min(v,p)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},xe=s.leftForLtr(k,v)+v/2,be=X+p/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,dL(e,ue,xe,be),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,dL(e,ue,xe,be)}else{e.lineWidth=xa(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const ue=s.leftForLtr(k,v-w),xe=s.leftForLtr(s.xPlus(k,1),v-w-2),be=T0(l.borderRadius);Object.values(be).some(Se=>0!==Se)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,GA(e,{x:ue,y:X,w:v,h:p,radius:be}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),GA(e,{x:xe,y:X+1,w:v-2,h:p-2,radius:be}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(ue,X,v,p),e.strokeRect(ue,X,v,p),e.fillStyle=l.backgroundColor,e.fillRect(xe,X+1,v-2,p-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:p,boxWidth:v,boxPadding:w}=r,I=_d(r.bodyFont);let T=I.lineHeight,k=0;const H=vC(r.rtl,this.x,this.width),X=function(Tt){n.fillText(Tt,H.x(e.x+k),e.y+T/2),e.y+=T+o},ue=H.textAlign(l);let xe,be,Se,Ye,gt,zt,it;for(n.textAlign=l,n.textBaseline="middle",n.font=I.string,e.x=TS(this,ue,r),n.fillStyle=r.bodyColor,Ml(this.beforeBody,X),k=u&&"right"!==ue?"center"===l?v/2+w:v+2+w:0,Ye=0,zt=s.length;Ye<zt;++Ye){for(xe=s[Ye],be=this.labelTextColors[Ye],n.fillStyle=be,Ml(xe.before,X),Se=xe.lines,u&&Se.length&&(this._drawColorBox(n,e,Ye,H,r),T=Math.max(I.lineHeight,p)),gt=0,it=Se.length;gt<it;++gt)X(Se[gt]),T=I.lineHeight;Ml(xe.after,X)}k=0,T=I.lineHeight,Ml(this.afterBody,X),e.y-=o}drawFooter(e,n,r){const s=this.footer,o=s.length;let l,u;if(o){const p=vC(r.rtl,this.x,this.width);for(e.x=TS(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=p.textAlign(r.footerAlign),n.textBaseline="middle",l=_d(r.footerFont),n.fillStyle=r.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(s[u],p.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:o,yAlign:l}=this,{x:u,y:p}=e,{width:v,height:w}=r,{topLeft:I,topRight:T,bottomLeft:k,bottomRight:H}=T0(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(u+I,p),"top"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+v-T,p),n.quadraticCurveTo(u+v,p,u+v,p+T),"center"===l&&"right"===o&&this.drawCaret(e,n,r,s),n.lineTo(u+v,p+w-H),n.quadraticCurveTo(u+v,p+w,u+v-H,p+w),"bottom"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+k,p+w),n.quadraticCurveTo(u,p+w,u,p+w-k),"center"===l&&"left"===o&&this.drawCaret(e,n,r,s),n.lineTo(u,p+I),n.quadraticCurveTo(u,p,u+I,p),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const l=ex[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=VH(this,e),p=Object.assign({},l,this._size),v=UH(n,e,p),w=HH(e,p,v,n);(s._to!==w.x||o._to!==w.y)&&(this.xAlign=v.xAlign,this.yAlign=v.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,w))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=Hh(n.padding);n.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,n),DU(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),LU(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:u,index:p})=>{const v=this.chart.getDatasetMeta(u);if(!v)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:v.data[p],index:p}}),o=!tS(r,s),l=this._positionChanged(s,n);(o||l)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,r),u=this._positionChanged(l,e),p=n||!tS(l,o)||u;return p&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),p}_getActiveElements(e,n,r,s){const o=this.options;if("mouseout"===e.type)return[];if(!s)return n;const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:r,caretY:s,options:o}=this,l=ex[o.position].call(this,e,n);return!1!==l&&(r!==l.x||s!==l.y)}}return i.positioners=ex,i})();var dge=Object.freeze({__proto__:null,Decimation:Dpe,Filler:Kpe,Legend:Jpe,SubTitle:nge,Title:tge,Tooltip:{id:"tooltip",_element:jH,positioners:ex,afterInit(i,t,e){e&&(i.tooltip=new jH({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===i.notifyPlugins("beforeTooltipDraw",e))return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){i.tooltip&&i.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:uy,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:uy,beforeBody:uy,beforeLabel:uy,label(i){if(this&&this.options&&"dataset"===this.options.mode)return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return Va(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:uy,afterBody:uy,beforeFooter:uy,footer:uy,afterFooter:uy}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>"filter"!==i&&"itemSort"!==i&&"external"!==i,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class MS extends P0{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:r,label:s}of e)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Va(t))return null;const n=this.getLabels();return((i,t)=>null===i?null:Ud(Math.round(i),0,t))(e=isFinite(e)&&n[e]===t?e:function fge(i,t,e,n){const r=i.indexOf(t);return-1===r?((i,t,e,n)=>("string"==typeof t?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(i,t,e,n):r!==i.lastIndexOf(t)?e:r}(n,t,Vo(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function $H(i,t,{horizontal:e,minRotation:n}){const r=vm(n),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+i).length)}MS.id="category",MS.defaults={ticks:{callback:MS.prototype.getLabelForValue}};class DS extends P0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Va(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const o=u=>r=e?r:u,l=u=>s=n?s:u;if(t){const u=uv(r),p=uv(s);u<0&&p<0?l(0):u>0&&p>0&&o(0)}if(r===s){let u=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(u=Math.abs(.05*s)),l(s+u),t||o(r-u)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:n}=t;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o=function gge(i,t){const e=[],{bounds:r,step:s,min:o,max:l,precision:u,count:p,maxTicks:v,maxDigits:w,includeBounds:I}=i,T=s||1,k=v-1,{min:H,max:X}=t,ue=!Va(o),xe=!Va(l),be=!Va(p),Se=(X-H)/(w+1);let gt,zt,it,Tt,Ye=$4((X-H)/k/T)*T;if(Ye<1e-14&&!ue&&!xe)return[{value:H},{value:X}];Tt=Math.ceil(X/Ye)-Math.floor(H/Ye),Tt>k&&(Ye=$4(Tt*Ye/k/T)*T),Va(u)||(gt=Math.pow(10,u),Ye=Math.ceil(Ye*gt)/gt),"ticks"===r?(zt=Math.floor(H/Ye)*Ye,it=Math.ceil(X/Ye)*Ye):(zt=H,it=X),ue&&xe&&s&&function Xue(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}((l-o)/s,Ye/1e3)?(Tt=Math.round(Math.min((l-o)/Ye,v)),Ye=(l-o)/Tt,zt=o,it=l):be?(zt=ue?o:zt,it=xe?l:it,Tt=p-1,Ye=(it-zt)/Tt):(Tt=(it-zt)/Ye,Tt=FA(Tt,Math.round(Tt),Ye/1e3)?Math.round(Tt):Math.ceil(Tt));const un=Math.max(X4(Ye),X4(zt));gt=Math.pow(10,Va(u)?un:u),zt=Math.round(zt*gt)/gt,it=Math.round(it*gt)/gt;let ei=0;for(ue&&(I&&zt!==o?(e.push({value:o}),zt<o&&ei++,FA(Math.round((zt+ei*Ye)*gt)/gt,o,$H(o,Se,i))&&ei++):zt<o&&ei++);ei<Tt;++ei)e.push({value:Math.round((zt+ei*Ye)*gt)/gt});return xe&&I&&it!==l?e.length&&FA(e[e.length-1].value,l,$H(l,Se,i))?e[e.length-1].value=l:e.push({value:l}):(!xe||it===l)&&e.push({value:it}),e}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&q4(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return jA(t,this.chart.options.locale,this.options.ticks.format)}}class kL extends DS{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Lu(t)?t:0,this.max=Lu(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=vm(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function qH(i){return i/Math.pow(10,Math.floor(Ig(i)))==1}kL.id="linear",kL.defaults={ticks:{callback:gS.formatters.numeric}};class OL extends P0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=DS.prototype.parse.apply(this,[t,e]);if(0!==n)return Lu(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Lu(t)?Math.max(0,t):null,this.max=Lu(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const s=u=>n=t?n:u,o=u=>r=e?r:u,l=(u,p)=>Math.pow(10,Math.floor(Ig(u))+p);n===r&&(n<=0?(s(1),o(10)):(s(l(n,-1)),o(l(r,1)))),n<=0&&s(l(r,-1)),r<=0&&o(l(n,1)),this._zero&&this.min!==this._suggestedMin&&n===l(this.min,0)&&s(l(n,-1)),this.min=n,this.max=r}buildTicks(){const t=this.options,n=function mge(i,t){const e=Math.floor(Ig(t.max)),n=Math.ceil(t.max/Math.pow(10,e)),r=[];let s=Ag(i.min,Math.pow(10,Math.floor(Ig(t.min)))),o=Math.floor(Ig(s)),l=Math.floor(s/Math.pow(10,o)),u=o<0?Math.pow(10,Math.abs(o)):1;do{r.push({value:s,major:qH(s)}),++l,10===l&&(l=1,++o,u=o>=0?1:u),s=Math.round(l*Math.pow(10,o)*u)/u}while(o<e||o===e&&l<n);const p=Ag(i.max,s);return r.push({value:p,major:qH(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&q4(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":jA(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ig(t),this._valueRange=Ig(this.max)-Ig(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ig(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function FL(i){const t=i.ticks;if(t.display&&i.display){const e=Hh(t.backdropPadding);return Vo(t.font&&t.font.size,Ta.font.size)+e.height}return 0}function vge(i,t,e){return e=rc(e)?e:[e],{w:Sde(i,t.string,e),h:e.length*t.lineHeight}}function XH(i,t,e,n,r){return i===n||i===r?{start:t-e/2,end:t+e/2}:i<n||i>r?{start:t-e,end:t}:{start:t,end:t+e}}function _ge(i,t,e,n,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let l=0,u=0;n.start<t.l?(l=(t.l-n.start)/s,i.l=Math.min(i.l,t.l-l)):n.end>t.r&&(l=(n.end-t.r)/s,i.r=Math.max(i.r,t.r+l)),r.start<t.t?(u=(t.t-r.start)/o,i.t=Math.min(i.t,t.t-u)):r.end>t.b&&(u=(r.end-t.b)/o,i.b=Math.max(i.b,t.b+u))}function Cge(i){return 0===i||180===i?"center":i<180?"left":"right"}function wge(i,t,e){return"right"===e?i-=t:"center"===e&&(i-=t/2),i}function Age(i,t,e){return 90===e||270===e?i-=t/2:(e>270||e<90)&&(i-=t),i}function YH(i,t,e,n){const{ctx:r}=i;if(e)r.arc(i.xCenter,i.yCenter,t,0,Nl);else{let s=i.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<n;o++)s=i.getPointPosition(o,t),r.lineTo(s.x,s.y)}}OL.id="logarithmic",OL.defaults={ticks:{callback:gS.formatters.logarithmic,major:{enabled:!0}}};class tx extends DS{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Hh(FL(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Lu(t)&&!isNaN(t)?t:0,this.max=Lu(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/FL(this.options))}generateTickLabels(t){DS.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const r=sc(this.options.pointLabels.callback,[e,n],this);return r||0===r?r:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?function yge(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),n=[],r=[],s=i._pointLabels.length,o=i.options.pointLabels,l=o.centerPointLabels?Lc/s:0;for(let u=0;u<s;u++){const p=o.setContext(i.getPointLabelContext(u));r[u]=p.padding;const v=i.getPointPosition(u,i.drawingArea+r[u],l),w=_d(p.font),I=vge(i.ctx,w,i._pointLabels[u]);n[u]=I;const T=Bp(i.getIndexAngle(u)+l),k=Math.round(J2(T));_ge(e,t,T,XH(k,v.x,I.w,0,180),XH(k,v.y,I.h,90,270))}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=function bge(i,t,e){const n=[],r=i._pointLabels.length,s=i.options,o=FL(s)/2,l=i.drawingArea,u=s.pointLabels.centerPointLabels?Lc/r:0;for(let p=0;p<r;p++){const v=i.getPointPosition(p,l+o+e[p],u),w=Math.round(J2(Bp(v.angle+_u))),I=t[p],T=Age(v.y,I.h,w),k=Cge(w),H=wge(v.x,I.w,k);n.push({x:v.x,y:T,textAlign:k,left:H,top:T,right:H+I.w,bottom:T+I.h})}return n}(i,n,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return Bp(t*(Nl/(this._pointLabels.length||1))+vm(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(Va(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Va(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function Sge(i,t,e){return p_(i,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-_u+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),YH(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r}=e,s=this._pointLabels.length;let o,l,u;if(e.pointLabels.display&&function xge(i,t){const{ctx:e,options:{pointLabels:n}}=i;for(let r=t-1;r>=0;r--){const s=n.setContext(i.getPointLabelContext(r)),o=_d(s.font),{x:l,y:u,textAlign:p,left:v,top:w,right:I,bottom:T}=i._pointLabelItems[r],{backdropColor:k}=s;if(!Va(k)){const H=T0(s.borderRadius),X=Hh(s.backdropPadding);e.fillStyle=k;const ue=v-X.left,xe=w-X.top,be=I-v+X.width,Se=T-w+X.height;Object.values(H).some(Ye=>0!==Ye)?(e.beginPath(),GA(e,{x:ue,y:xe,w:be,h:Se,radius:H}),e.fill()):e.fillRect(ue,xe,be,Se)}E0(e,i._pointLabels[r],l,u+o.lineHeight/2,o,{color:s.color,textAlign:p,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((p,v)=>{0!==v&&(l=this.getDistanceFromCenterForValue(p.value),function Ige(i,t,e,n){const r=i.ctx,s=t.circular,{color:o,lineWidth:l}=t;!s&&!n||!o||!l||e<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),YH(i,e,s,n),r.closePath(),r.stroke(),r.restore())}(this,r.setContext(this.getContext(v-1)),l,s))}),n.display){for(t.save(),o=s-1;o>=0;o--){const p=n.setContext(this.getPointLabelContext(o)),{color:v,lineWidth:w}=p;!w||!v||(t.lineWidth=w,t.strokeStyle=v,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),u=this.getPointPosition(o,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,u)=>{if(0===u&&!e.reverse)return;const p=n.setContext(this.getContext(u)),v=_d(p.font);if(s=this.getDistanceFromCenterForValue(this.ticks[u].value),p.showLabelBackdrop){t.font=v.string,o=t.measureText(l.label).width,t.fillStyle=p.backdropColor;const w=Hh(p.backdropPadding);t.fillRect(-o/2-w.left,-s-v.size/2-w.top,o+w.width,v.size+w.height)}E0(t,l.label,0,-s,v,{color:p.color})}),t.restore()}drawTitle(){}}tx.id="radialLinear",tx.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:gS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:i=>i,padding:5,centerPointLabels:!1}},tx.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},tx.descriptors={angleLines:{_fallback:"grid"}};const LS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Zf=Object.keys(LS);function Ege(i,t){return i-t}function KH(i,t){if(Va(t))return null;const e=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts;let o=t;return"function"==typeof n&&(o=n(o)),Lu(o)||(o="string"==typeof n?e.parse(o,n):e.parse(o)),null===o?null:(r&&(o="week"!==r||!fC(s)&&!0!==s?e.startOf(o,r):e.startOf(o,"isoWeek",s)),+o)}function ZH(i,t,e,n){const r=Zf.length;for(let s=Zf.indexOf(i);s<r-1;++s){const o=LS[Zf[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(l*o.size))<=n)return Zf[s]}return Zf[r-1]}function QH(i,t,e){if(e){if(e.length){const{lo:n,hi:r}=tL(e,t);i[e[n]>=t?e[n]:e[r]]=!0}}else i[t]=!0}function JH(i,t,e){const n=[],r={},s=t.length;let o,l;for(o=0;o<s;++o)l=t[o],r[l]=o,n.push({value:l,major:!1});return 0!==s&&e?function Dge(i,t,e,n){const r=i._adapter,s=+r.startOf(t[0].value,n),o=t[t.length-1].value;let l,u;for(l=s;l<=o;l=+r.add(l,1,n))u=e[l],u>=0&&(t[u].major=!0);return t}(i,n,r,e):n}let NL=(()=>{class i extends P0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n){const r=e.time||(e.time={}),s=this._adapter=new gfe._date(e.adapters.date);s.init(n),kA(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return void 0===e?null:KH(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function p(v){!l&&!isNaN(v.min)&&(s=Math.min(s,v.min)),!u&&!isNaN(v.max)&&(o=Math.max(o,v.max))}(!l||!u)&&(p(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&p(this.getMinMax(!1))),s=Lu(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),o=Lu(o)&&!isNaN(o)?o:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,u=function Que(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}(s,o,this.max);return this._unit=n.unit||(r.autoSkip?ZH(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):function Tge(i,t,e,n,r){for(let s=Zf.length-1;s>=Zf.indexOf(e);s--){const o=Zf[s];if(LS[o].common&&i._adapter.diff(r,n,o)>=t-1)return o}return Zf[e?Zf.indexOf(e):0]}(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function Mge(i){for(let t=Zf.indexOf(i)+1,e=Zf.length;t<e;++t)if(LS[Zf[t]].common)return Zf[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&u.reverse(),JH(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let s,o,n=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),n=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),r=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=Ud(n,0,l),r=Ud(r,0,l),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,o=s.time,l=o.unit||ZH(o.minUnit,n,r,this._getLabelCapacity(n)),u=Vo(o.stepSize,1),p="week"===l&&o.isoWeekday,v=fC(p)||!0===p,w={};let T,k,I=n;if(v&&(I=+e.startOf(I,"isoWeek",p)),I=+e.startOf(I,v?"day":l),e.diff(r,n,l)>1e5*u)throw new Error(n+" and "+r+" are too far apart with stepSize of "+u+" "+l);const H="data"===s.ticks.source&&this.getDataTimestamps();for(T=I,k=0;T<r;T=+e.add(T,u,l),k++)QH(w,T,H);return(T===r||"ticks"===s.bounds||1===k)&&QH(w,T,H),Object.keys(w).sort((X,ue)=>X-ue).map(X=>+X)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}_tickFormatFunction(e,n,r,s){const o=this.options,l=o.time.displayFormats,u=this._unit,p=this._majorUnit,w=p&&l[p],I=r[n],k=this._adapter.format(e,s||(p&&w&&I&&I.major?w:u&&l[u])),H=o.ticks.callback;return H?sc(H,[k,n,r],this):k}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=vm(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:r*o+u*l,h:r*l+u*o}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,o=this._tickFormatFunction(e,0,JH(this,[e],this._majorUnit),s),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let n,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(KH(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Q4(e.sort(Ege))}}return i.id="time",i.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},i})();function PS(i,t,e){let s,o,l,u,n=0,r=i.length-1;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=hy(i,"pos",t)),({pos:s,time:l}=i[n]),({pos:o,time:u}=i[r])):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=hy(i,"time",t)),({time:s,pos:l}=i[n]),({time:o,pos:u}=i[r]));const p=o-s;return p?l+(u-l)*(t-s)/p:l}class BL extends NL{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=PS(e,this.min),this._tableRange=PS(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],s=[];let o,l,u,p,v;for(o=0,l=t.length;o<l;++o)p=t[o],p>=e&&p<=n&&r.push(p);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)v=r[o+1],u=r[o-1],p=r[o],Math.round((v+u)/2)!==p&&s.push({time:p,pos:o/(l-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(PS(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return PS(this._table,n*this._tableRange+this._minPos,!0)}}BL.id="timeseries",BL.defaults=NL.defaults,AS.register(pfe,Spe,dge,Object.freeze({__proto__:null,CategoryScale:MS,LinearScale:kL,LogarithmicScale:OL,RadialLinearScale:tx,TimeScale:NL,TimeSeriesScale:BL}));const Rge=AS;let kge=(()=>{class i{constructor(e){this.el=e,this.plugins=[],this.responsive=!0,this.onDataSelect=new qn,this._options={}}get data(){return this._data}set data(e){this._data=e,this.reinit()}get options(){return this._options}set options(e){this._options=e,this.reinit()}ngAfterViewInit(){this.initChart(),this.initialized=!0}onCanvasClick(e){if(this.chart){const n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&r&&this.onDataSelect.emit({originalEvent:e,element:n[0],dataset:r})}}initChart(){let e=this.options||{};e.responsive=this.responsive,e.responsive&&(this.height||this.width)&&(e.maintainAspectRatio=!1),this.chart=new Rge(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})}getCanvas(){return this.el.nativeElement.children[0].children[0]}getBase64Image(){return this.chart.toBase64Image()}generateLegend(){if(this.chart)return this.chart.generateLegend()}refresh(){this.chart&&this.chart.update()}reinit(){this.chart&&(this.chart.destroy(),this.initChart())}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)}}return i.\u0275fac=function(e){return new(e||i)(qt(oi))},i.\u0275cmp=Rr({type:i,selectors:[["p-chart"]],hostAttrs:[1,"p-element"],inputs:{type:"type",plugins:"plugins",width:"width",height:"height",responsive:"responsive",data:"data",options:"options"},outputs:{onDataSelect:"onDataSelect"},decls:2,vars:6,consts:[[2,"position","relative"],[3,"click"]],template:function(e,n){1&e&&(Xe(0,"div",0)(1,"canvas",1),_n("click",function(s){return n.onCanvasClick(s)}),Ke()()),2&e&&(Nh("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height),we(1),Lr("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height))},encapsulation:2,changeDetection:0}),i})(),Oge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();const Fge=function(i,t){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t}};function Nge(i,t){if(1&i&&Kn(0,"span",3),2&i){const e=ye();Yr(e.checked?e.onIcon:e.offIcon),de("ngClass",Ts(3,Fge,"left"===e.iconPos,"right"===e.iconPos))}}const Bge=function(i,t,e){return{"p-button p-togglebutton p-component":!0,"p-button-icon-only":i,"p-highlight":t,"p-disabled":e}},zge={provide:Xc,useExisting:Zr(()=>e5),multi:!0};let e5=(()=>{class i{constructor(e){this.cd=e,this.iconPos="left",this.onChange=new qn,this.checked=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}toggle(e){this.disabled||(this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:e,checked:this.checked}),this.cd.markForCheck())}onBlur(){this.onModelTouched()}writeValue(e){this.checked=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get hasOnLabel(){return this.onLabel&&this.onLabel.length>0}get hasOffLabel(){return this.onLabel&&this.onLabel.length>0}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-toggleButton"]],hostAttrs:[1,"p-element"],inputs:{onLabel:"onLabel",offLabel:"offLabel",onIcon:"onIcon",offIcon:"offIcon",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",style:"style",styleClass:"styleClass",inputId:"inputId",tabindex:"tabindex",iconPos:"iconPos"},outputs:{onChange:"onChange"},features:[Xo([zge])],decls:4,vars:12,consts:[["role","checkbox","pRipple","",3,"ngClass","ngStyle","click","keydown.enter"],[3,"class","ngClass",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"]],template:function(e,n){1&e&&(Xe(0,"div",0),_n("click",function(s){return n.toggle(s)})("keydown.enter",function(s){return n.toggle(s)}),ze(1,Nge,1,6,"span",1),Xe(2,"span",2),bi(3),Ke()()),2&e&&(Yr(n.styleClass),de("ngClass",Yu(8,Bge,n.onIcon&&n.offIcon&&!n.hasOnLabel&&!n.hasOffLabel,n.checked,n.disabled))("ngStyle",n.style),Lr("tabindex",n.disabled?null:"0")("aria-checked",n.checked),we(1),de("ngIf",n.onIcon||n.offIcon),we(2),As(n.checked?n.hasOnLabel?n.onLabel:"":n.hasOffLabel?n.offLabel:""))},dependencies:[Mo,Fo,ea,Ju],styles:[".p-button[_ngcontent-%COMP%]{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label[_ngcontent-%COMP%]{flex:1 1 auto}.p-button-icon-right[_ngcontent-%COMP%]{order:1}.p-button[_ngcontent-%COMP%]:disabled{cursor:default}.p-button-icon-only[_ngcontent-%COMP%]{justify-content:center}.p-button-icon-only[_ngcontent-%COMP%]   .p-button-label[_ngcontent-%COMP%]{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical[_ngcontent-%COMP%]{flex-direction:column}.p-button-icon-bottom[_ngcontent-%COMP%]{order:2}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{margin:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child){border-right:0 none}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:focus{position:relative;z-index:1}"],changeDetection:0}),i})(),Vge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,yu]}),i})(),Uge=(()=>{class i{constructor(e){this.el=e,this.iconPos="left"}ngAfterViewInit(){this.id=sC()+"_badge";let e=-1!=this.el.nativeElement.nodeName.indexOf("-")?this.el.nativeElement.firstChild:this.el.nativeElement,n=document.createElement("span");n.id=this.id,n.className="p-badge p-component",this.severity&&Ft.addClass(n,"p-badge-"+this.severity),null!=this.value?(n.appendChild(document.createTextNode(this.value)),1===String(this.value).length&&Ft.addClass(n,"p-badge-no-gutter")):Ft.addClass(n,"p-badge-dot"),Ft.addClass(e,"p-overlay-badge"),e.appendChild(n),this.initialized=!0}get value(){return this._value}set value(e){if(e!==this._value&&(this._value=e,this.initialized)){let n=document.getElementById(this.id);this._value?(Ft.hasClass(n,"p-badge-dot")&&Ft.removeClass(n,"p-badge-dot"),1===String(this._value).length?Ft.addClass(n,"p-badge-no-gutter"):Ft.removeClass(n,"p-badge-no-gutter")):!this._value&&!Ft.hasClass(n,"p-badge-dot")&&Ft.addClass(n,"p-badge-dot"),n.innerHTML="",n.appendChild(document.createTextNode(this._value))}}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(qt(oi))},i.\u0275dir=fs({type:i,selectors:[["","pBadge",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",value:"value",severity:"severity"}}),i})(),Hge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za]}),i})(),RS=(()=>{class i{constructor(){this.fileDropped=new qn}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1}ondrop(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1;let n=e.dataTransfer.files;n.length>0&&this.fileDropped.emit(n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fs({type:i,selectors:[["","dropZoneDirective",""]],hostVars:2,hostBindings:function(e,n){1&e&&_n("dragover",function(s){return n.onDragOver(s)})("dragleave",function(s){return n.onDragLeave(s)})("drop",function(s){return n.ondrop(s)}),2&e&&Fp("fileover",n.fileOver)},outputs:{fileDropped:"fileDropped"}}),i})();const Gge=["myCytoscape"],Wge=["myPng"],jge=["myTreeTable"];function $ge(i,t){if(1&i&&Kn(0,"img",51),2&i){const e=t.$implicit;de("src",e.icon,dh)("alt",e.label)}}function qge(i,t){if(1&i&&Kn(0,"img",51),2&i){const e=t.$implicit;de("src",e.icon,dh)("alt",e.label)}}function Xge(i,t){if(1&i&&Kn(0,"img",51),2&i){const e=t.$implicit;de("src",e.icon,dh)("alt",e.label)}}const nx=function(){return{width:"100%"}};function Yge(i,t){if(1&i){const e=Di();Xe(0,"div",27)(1,"div",28)(2,"div",52)(3,"span",53),Kn(4,"i",54),Ke(),Xe(5,"input",55),_n("ngModelChange",function(r){return Lt(e),Pt(ye().captureData.clone=r)}),Ke(),Xe(6,"p-button",56),_n("click",function(){Lt(e);const r=ye();return Pt(r.applyLabelize(r.captureData))}),Ke()()(),Xe(7,"div",28)(8,"div",52)(9,"span",53),Kn(10,"i",57),Ke(),Xe(11,"input",55),_n("ngModelChange",function(r){return Lt(e),Pt(ye().captureData.label=r)}),Ke()()(),Xe(12,"div",28)(13,"div",58)(14,"p-dropdown",59),_n("ngModelChange",function(r){return Lt(e),Pt(ye().captureData.alias=r)}),Ke()()(),Xe(15,"div",28)(16,"div",60)(17,"p-dropdown",61),_n("ngModelChange",function(r){return Lt(e),Pt(ye().captureData.tag=r)}),Ke()()(),Xe(18,"div",28)(19,"div",52)(20,"span",53),Kn(21,"i",62),Ke(),Xe(22,"input",55),_n("ngModelChange",function(r){return Lt(e),Pt(ye().captureData.group=r)}),Ke()()(),Xe(23,"div",28)(24,"div",52)(25,"span",63)(26,"p-checkbox",64),_n("ngModelChange",function(r){return Lt(e),Pt(ye()._lockedElement=r)})("onChange",function(r){return Lt(e),Pt(ye().handleChangeLock(r))}),Ke()(),Kn(27,"input",65),Ke()()()}if(2&i){const e=ye();we(5),de("ngModel",e.captureData.clone),we(6),de("ngModel",e.captureData.label),we(3),To(Oo(17,nx)),de("options",e.allNodes)("ngModel",e.captureData.alias)("filter",!0)("showClear",!0),we(3),To(Oo(18,nx)),de("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),we(5),de("ngModel",e.captureData.group),we(4),de("ngModel",e._lockedElement)("binary",!0)}}function Kge(i,t){if(1&i){const e=Di();Xe(0,"p-button",66),_n("click",function(){Lt(e);const r=ye();return Pt(r.applyNodeUpdate(r.captureData))}),Ke()}}function Zge(i,t){if(1&i){const e=Di();Xe(0,"div",27)(1,"div",28)(2,"div",52)(3,"span",53),Kn(4,"i",57),Ke(),Xe(5,"input",55),_n("ngModelChange",function(r){return Lt(e),Pt(ye().captureData.label=r)}),Ke()()(),Xe(6,"div",28)(7,"div",60)(8,"p-dropdown",61),_n("ngModelChange",function(r){return Lt(e),Pt(ye().captureData.tag=r)}),Ke()()(),Xe(9,"div",28)(10,"div",52)(11,"span",53),Kn(12,"i",67),Ke(),Xe(13,"input",68),_n("ngModelChange",function(r){return Lt(e),Pt(ye().currentSelectedEdge.data()._source=r)}),Ke()()(),Xe(14,"div",28)(15,"div",52)(16,"span",53),Kn(17,"i",69),Ke(),Xe(18,"input",68),_n("ngModelChange",function(r){return Lt(e),Pt(ye().currentSelectedEdge.data()._target=r)}),Ke()()()()}if(2&i){const e=ye();we(5),de("ngModel",e.captureData.label),we(3),To(Oo(9,nx)),de("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),we(5),de("ngModel",e.currentSelectedEdge.data()._source),we(5),de("ngModel",e.currentSelectedEdge.data()._target)}}function Qge(i,t){if(1&i){const e=Di();Xe(0,"p-button",66),_n("click",function(){Lt(e);const r=ye();return Pt(r.applyEdgeUpdate(r.captureData))}),Ke()}}function Jge(i,t){if(1&i){const e=Di();Xe(0,"p-button",66),_n("click",function(){Lt(e);const r=ye();return Pt(r.applyChangeProperties(r.captureData))}),Ke()}}const eme=function(){return{width:"100%",height:"100%"}};function tme(i,t){if(1&i){const e=Di();Xe(0,"textarea",71),_n("keyup",function(){Lt(e);const r=ye(2);return Pt(r.previewNewCData(r.captureData))})("ngModelChange",function(r){return Lt(e),Pt(ye(2).captureData.selectElementRawCdata=r)}),Ke()}if(2&i){const e=ye(2);To(Oo(3,eme)),de("ngModel",e.captureData.selectElementRawCdata)}}function nme(i,t){1&i&&Kn(0,"div",72),2&i&&de("innerHTML",ye(2).captureData.selectElementCdata,Ka)}const t5=function(){return{height:"100%"}};function ime(i,t){1&i&&(Xe(0,"p-splitter"),ze(1,tme,1,4,"ng-template",70),ze(2,nme,1,1,"ng-template",70),Ke()),2&i&&To(Oo(2,t5))}function rme(i,t){1&i&&Kn(0,"div",72),2&i&&de("innerHTML",ye(2).captureData.selectElementCdata,Ka)}function sme(i,t){1&i&&(Xe(0,"p-splitter"),ze(1,rme,1,1,"ng-template",70),Ke()),2&i&&To(Oo(2,t5))}function ome(i,t){if(1&i){const e=Di();Xe(0,"p-toggleButton",75),_n("ngModelChange",function(r){return Lt(e),Pt(ye(2).captureData.editable=r)}),Ke()}if(2&i){const e=ye(2);l0("onIcon",e.onIcon),de("ngModel",e.captureData.editable)}}function ame(i,t){if(1&i){const e=Di();Xe(0,"p-button",76),_n("click",function(){Lt(e);const r=ye(2);return Pt(r.applyNewCData(r.captureData))}),Ke()}}function lme(i,t){if(1&i&&(ze(0,ome,1,2,"p-toggleButton",73),ze(1,ame,1,0,"p-button",74)),2&i){const e=ye();de("ngIf",!e.captureData.isAlias),we(1),de("ngIf",!e.captureData.isAlias)}}function cme(i,t){1&i&&(Xe(0,"tr")(1,"th",77),bi(2,"#Id"),Ke(),Xe(3,"th",78),bi(4,"Label"),Ke(),Xe(5,"th",79),bi(6,"Ok"),Ke(),Xe(7,"th",79),bi(8,"Ko"),Ke(),Xe(9,"th",79),bi(10,"Sel."),Ke()())}function ume(i,t){1&i&&(Xe(0,"td"),Kn(1,"i",83),Ke())}function dme(i,t){1&i&&Kn(0,"td")}function hme(i,t){1&i&&Kn(0,"td")}function fme(i,t){1&i&&(Xe(0,"td"),Kn(1,"i",84),Ke())}function pme(i,t){if(1&i&&(Xe(0,"td"),bi(1),Ke()),2&i){const e=ye().rowData;we(1),jc(" ",e.success.length," ")}}function gme(i,t){if(1&i&&(Xe(0,"td"),bi(1),Ke()),2&i){const e=ye().rowData;we(1),jc(" ",e.fail.length," ")}}function mme(i,t){1&i&&Kn(0,"td")}function vme(i,t){if(1&i){const e=Di();Xe(0,"td",85),_n("click",function(){Lt(e);const r=ye().$implicit;return Pt(ye().onSelectItem(r))}),Kn(1,"i",86),Ke()}}function yme(i,t){if(1&i&&(Xe(0,"tr")(1,"td"),Kn(2,"p-treeTableToggler",80),bi(3),Ke(),Xe(4,"td"),bi(5),Ke(),ze(6,ume,2,0,"td",81),ze(7,dme,1,0,"td",81),ze(8,hme,1,0,"td",81),ze(9,fme,2,0,"td",81),ze(10,pme,2,1,"td",81),ze(11,gme,2,1,"td",81),ze(12,mme,1,0,"td",81),ze(13,vme,2,0,"td",82),Ke()),2&i){const e=t.$implicit,n=t.rowData;we(2),de("rowNode",e),we(1),jc(" ",n.id," "),we(2),As(n.label),we(1),de("ngIf",!n.fail&&n.valid),we(1),de("ngIf",!n.fail&&n.valid),we(1),de("ngIf",!n.fail&&!n.valid),we(1),de("ngIf",!n.fail&&!n.valid),we(1),de("ngIf",n.success),we(1),de("ngIf",n.fail),we(1),de("ngIf",n.fail),we(1),de("ngIf",!n.fail)}}const _me=function(){return{height:"89vh"}},bme=function(){return{width:"100vw",height:"42vw"}},Cme=function(){return{width:"100vw",height:"32vw"}},wme=function(){return{width:"45vw",height:"45vw"}},n5=function(){return{width:"60vw",height:"50vw"}},r5=function(){return{width:"40vw",height:"45vw"}},s5=function(){return{width:"40%"}},Ame=function(){return{width:"55vw",height:"55vw"}},xme=function(){return{width:"65vw",height:"55vw"}};var zL=W(4826)(),Ime=W(2960);J1.use(Ime);var Sme=W(4147);J1.use(Sme),W(9050)(J1);let Tme=(()=>{class i{constructor(e,n,r,s,o,l,u,p,v,w){this.graphsService=e,this.styleService=n,this.rulesService=r,this.preferenceService=s,this.clipboardService=o,this.logger=l,this.messageService=u,this.base16=p,this.store=v,this.route=w,this.displaySelectionNode=!1,this.displaySelectionEdge=!1,this.displayChangeProperties=!1,this.onIcon="pi pi-check",this.displayFinder=!1,this.displayMarkdown=!1,this.displaySidebar=!1,this.subscriptions=[],this.displayExportPng=!1,this.displayTool=!0,this.searchNode="",this.graphs=[],this.jsonRules=[],this.alias=[],this.allNodes=[],this.cols=[{field:"label",header:"Label"}],this.breadFirstLayoutOptions=new Yoe,this.concentricLayoutOptions=new Xoe,this.circleLayoutOptions=new qoe,this.gridLayoutOptions={name:"grid",avoidOverlapPadding:50,condense:!0,rows:20,cols:5},this.coseLayoutOptions=new Koe,this.currentStyleCounter=0,this.items=[],this.currentRulesCounter=0,this.currentRulesFail=0,this.currentRulesSuccess=0,this.groupEnabled=!0,this.selectorDisplay="",this.drawModeEnabled=!1,this.rules=[],this.graph$=this.store.select(p2),this.graphs$=this.store.select(f2),this._lockedElement=!1,this.dockRightItems=[{label:"Export GEXF to clipboard",tooltipOptions:{tooltipLabel:"Export GEXF to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-gexf.png",command:()=>{this.id&&(this.gexf(this.id,this.id,this.currentStyle,this.currentRules),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GEXF in clipboard"}))}},{label:"Export GRAPHML to clipboard",tooltipOptions:{tooltipLabel:"Export GRAPHML to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-graphml.png",command:()=>{this.id&&(this.graphml(this.id,this.id,this.currentStyle,this.currentRules),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GRAPHML in clipboard"}))}},{label:"Export PNG",tooltipOptions:{tooltipLabel:"Export PNG",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-png.png",command:()=>{if(document){let T=this.cy?.png({bg:"white",full:this.preferences.full,maxWidth:this.preferences.maxWidth?Number(this.preferences.maxWidth):1024,maxHeight:this.preferences.maxHeight?Number(this.preferences.maxHeight):768})||"";this.logger.info(`PNG ${this.preferences.full} ${this.preferences.maxWidth} ${this.preferences.maxHeight}`),this.myPng?.nativeElement.setAttribute("src",T)}this.displayExportPng=!0}},{label:"Save",tooltipOptions:{tooltipLabel:"Save current diagram in local storage",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/save.png",command:()=>{if(this.id){this.logger.info("SAVE/META",this.currentStyle,this.currentRules);let T=this.toSysGraph(this.id,this.id,this.currentStyle,this.currentRules);this.logger.info("SAVE",T),this.graphsService.store(T,k=>{k.label=T.label,k.style=T.style,k.rules=T.rules,k.nodes=T.nodes,k.edges=T.edges}),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:`Save graph ${this.id}`})}}}],this.dockLeftItems=[{label:"Finder",tooltipOptions:{tooltipLabel:"Find node(s) or edges(s) and center on it",tooltipPosition:"right",positionTop:-15,positionLeft:15},icon:"assets/dock/find-element.png",command:()=>{let T=pr.filter(pr.map(this.cy?.elements("node"),H=>({alias:H.data().alias,label:H.data().label,id:this.base16.decode(H.data().id)})),H=>H.alias),k={};pr.each(T,H=>{let X=this.base16.encode(H.alias),ue=this.cy?.$(`#${X}`);ue&&ue.length>0?(H.target={id:H.alias,label:ue[0].data().label},k[X]?k[X].aliases.push(H):k[X]={label:ue[0].data().label,aliases:[H]}):this.raiseError("Unknown target",H.alias)}),this.alias=[],pr.each(k,(H,X)=>{let ue={key:X,label:`${H.label} #${this.base16.decode(X)}`,data:{id:this.base16.decode(X),label:H.label},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:[]};pr.each(H.aliases,xe=>{ue.children?.push({key:this.base16.encode(xe.id),label:`${xe.label} #${xe.id}`,leaf:!0,icon:"pi pi-fw pi-clone",data:{id:xe.id,label:xe.label}})}),this.alias.push(ue)}),this.displayFinder=!0}}],this.dockBottomItems=[],this.responsiveOptions=[{breakpoint:"1024px",numVisible:3},{breakpoint:"768px",numVisible:2},{breakpoint:"560px",numVisible:1}],this.nodeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedNode||this.cy?.$(`#${this.currentSelectedNode.data().id}`).remove()}},{label:"Clone",icon:"pi pi-clone",command:()=>{this.onCloneNode(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedNode||!this.currentStyle)return;let T=pr.uniq(pr.map(pr.filter(this.styleService.findOne(this.currentStyle)?.tags,H=>H.label&&"node"==H.selector),H=>({label:H.label,value:H.label})));T.unshift({label:"",value:""});let k=this.currentSelectedNode.data().clone?this.currentSelectedNode.data().clone:this.currentSelectedNode.data().id;this.captureData={id:this.currentSelectedNode.data().id,clone:this.base16.decode(k),label:this.currentSelectedNode.data().label,alias:this.currentSelectedNode.data().alias,tag:this.currentSelectedNode.data().tag,group:this.currentSelectedNode.data().group,tags:T},setTimeout(()=>{this.captureData.tag=this.currentSelectedNode.data().tag},100),this.displaySelectionNode=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}},{label:"Link to node",icon:"pi pi-upload",command:()=>{this.edgehandles=this.cy.edgehandles(),this.edgehandles.start(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Goto to alias",icon:"pi pi-arrow-right",command:()=>{this.onSelectAlias(this.currentSelectedNode)}}],this.edgeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedEdge||this.cy?.$(`#${this.currentSelectedEdge.data().id}`).remove()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedEdge||!this.currentStyle)return;let T=pr.uniq(pr.map(pr.filter(this.styleService.findOne(this.currentStyle)?.tags,k=>k.label&&"edge"==k.selector),k=>({label:k.label,value:k.label})));T.unshift({label:"",value:""}),this.captureData={id:this.currentSelectedEdge.data().id,label:this.currentSelectedEdge.data().label,tag:this.currentSelectedEdge.data().tag,tags:T},setTimeout(()=>{this.captureData.tag=this.currentSelectedEdge.data().tag},100),this.displaySelectionEdge=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}}],this.coreItem=[{label:"Graph",icon:"pi pi-share-alt",items:[{label:"Apply rules",icon:"pi pi-wallet",command:()=>{this.applyRuleset(!0,!1)}},{label:"Change properties",icon:"pi pi-wallet",command:()=>{this.changeProperties()}},{label:"Add new node",icon:"pi pi-plus",command:()=>{this.createNewNode()}}]},{label:"Group",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleGroupEnabled()}},{label:"Group Statistics",icon:"pi pi-chart-pie",command:()=>{let T=pr.sortBy(pr.filter(pr.map(this.cy?.nodes(),H=>H.data().group),H=>H&&""!==H)),k={};pr.each(T,H=>{k[H]?k[H]+=1:k[H]=1}),this.dataGroupStatistics={datasets:[{data:pr.map(k,(H,X)=>H),backgroundColor:pr.map(k,(H,X)=>{switch(H){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:pr.map(k,(H,X)=>X)},this.displayGroupStatistic=!0}},{label:"Tag Statistics",icon:"pi pi-chart-pie",command:()=>{let T=pr.sortBy(pr.filter(pr.map(this.cy?.nodes(),H=>H.data().tag),H=>H&&""!==H&&void 0===H.alias)),k={};pr.each(T,H=>{k[H]?k[H]+=1:k[H]=1}),this.dataTagStatistics={datasets:[{data:pr.map(k,(H,X)=>H),backgroundColor:pr.map(k,(H,X)=>{switch(H){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:pr.map(k,(H,X)=>X)},this.displayTagStatistic=!0}}]},{label:"Layout",icon:"pi pi-sitemap",items:[{label:"Bread First Layout",icon:"pi pi-ellipsis-h",command:()=>{this.breadFirstLayoutOptions&&this.cy?.layout(this.breadFirstLayoutOptions).run(),this.onClearAnySelection()}},{label:"Concentric Layout",icon:"pi pi-ellipsis-h",command:()=>{this.concentricLayoutOptions&&this.cy?.layout(this.concentricLayoutOptions).run(),this.onClearAnySelection()}},{label:"Circle Layout",icon:"pi pi-ellipsis-h",command:()=>{this.circleLayoutOptions&&this.cy?.layout(this.circleLayoutOptions).run(),this.onClearAnySelection()}},{label:"Grid Layout",icon:"pi pi-ellipsis-h",command:()=>{this.gridLayoutOptions&&this.cy?.layout(this.gridLayoutOptions).run(),this.onClearAnySelection()}},{label:"Cose Layout",icon:"pi pi-ellipsis-h",command:()=>{this.coseLayoutOptions&&this.cy?.layout(this.coseLayoutOptions).run(),this.onClearAnySelection()}}]},{label:"Zoom",icon:"pi pi-circle",items:[{label:"0.1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.1)}},{label:"0.2",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.2)}},{label:"0.3",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.3)}},{label:"0.5",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.5)}},{label:"0.6",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.6)}},{label:"0.75",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.75)}},{label:"1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(1)}},{label:"fit",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.fit()}}]},{label:"Draw mode",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleDrawModeEnabled()}}]}],this.captureData={},this.currentSelectedNode=void 0,this.currentSelectedEdge=void 0,this.dataGroupStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayGroupStatistic=!1,this.dataTagStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayTagStatistic=!1,this.config={dark:!1};let I=this.preferenceService.findOne("default");I&&(this.preferences=I,this.preferenceService.apply()),this.subscriptions.push(this.graph$.subscribe(T=>{if(T){if(this.cy?.startBatch(),this.cy?.boxSelectionEnabled(this.boxSelectionEnabled),this.cy?.nodes().remove(),this.cy?.edges().remove(),l.info("graph",T),this.applyChangeProperties({style:T.style,rule:T.rules}),this.graphs=[],T.nodes&&(this.graphs.push(this.buildChildNodes(T)),this.allNodes=pr.map(T.nodes,k=>({label:this.base16.decode(k.id),value:this.base16.decode(k.id)})),this.allNodes.unshift({label:"",value:""}),this.cy?.add(pr.map(T.nodes,k=>{let H={data:{id:k.id,label:k.label,cdata:k.cdata,alias:k.alias,group:k.group,tag:k.tag},position:{x:k.x,y:k.y}};return k.parent&&(H.data.parent=k.parent),H}))),T.edges){this.graphs.push(this.buildChildEdges(T));let k={};this.cy?.add(pr.map(T.edges,H=>({data:{id:this.base16.encode(this.graphsService.buildId(k,{source:this.base16.decode(H.source),target:this.base16.decode(H.target)})),label:H.label,cdata:H.cdata,source:H.source||"",target:H.target||"",_source:p.decode(H.source||""),_target:p.decode(H.target||""),tag:H.tag}})))}if(this.cy){this.edgehandles&&this.edgehandles.destroy(),pr.each(this.rules,X=>{X.destroy()}),this.rules=[];let k=pr.uniq(pr.map(pr.filter(T.nodes,X=>""!==X.group),X=>X.group)),H=this.cy;this.edgehandles=H.edgehandles(),pr.each(k,X=>{let ue=this.cy?.$(`[group = "${X}"]`);this.rules.push(H.automove({nodesMatching:ue,reposition:"drag",dragWith:ue}))})}this.cy?.endBatch(),this.cy?.fit(),this.preferences.applyRules&&setTimeout(()=>{this.applyRuleset(!1,!0)},1)}}))}ngOnInit(){this.route.queryParams.subscribe(e=>{this.id=e.id}),this.items=this.coreItem}onSelectAlias(e){if(e.data()&&e.data().alias){let n=this.cy?.$(`#${this.base16.encode(e.data().alias)}`);this.logger.info("Alias",e.data().alias,n),this.cy?.center(n)}}findNode(e){if(void 0!==e.clone&&""!=e.clone){let n=this.cy?.$(`#${this.base16.encode(e.clone)}`);if(e.id!==this.base16.encode(e.clone)&&n&&n.length>0)return void this.raiseError("While checking unicity of",e.clone)}return this.cy?.$(`#${e.id}`)}applyNodeUpdate(e){this.findNode(e)?.data("clone",this.base16.encode(e.clone)).data("alias",e.alias).data("group",e.group?e.group:"").data("label",e.label).data("tag",e.tag),this.displaySelectionNode=!1,this.preferences.applyRules&&this.applyRuleset(!1,!1)}applyLabelize(e){e.clone=`${e.tag}/${e.label.toLowerCase().replace(" ","-")}`}applyEdgeUpdate(e){this.cy?.$(`#${e.id}`).data("label",e.label).data("tag",e.tag),this.displaySelectionEdge=!1,this.preferences.applyRules&&this.applyRuleset(!1,!1)}applyChangeProperties(e){this.cy?.style(this.retrieveStyle(e.style)),setTimeout(()=>{this.logger.info(`Apply style ${e.style}`),this.currentStyle=e.style;let n=this.styleService.findOne(this.currentStyle)?.tags.length;n&&(this.currentStyleCounter=n),this.logger.info("Apply ruleset",e.rule),this.currentRules=e.rule;let r=this.rulesService.findOne(this.currentRules)?.rules.length;r?this.currentRulesCounter=r:this.logger.warn(`Ruleset ${e.rules} empty`),this.displayChangeProperties=!1},1)}buildFacts(){let e=pr.map(this.cy?.nodes(),s=>({element:{id:s.data().id,type:"node",data:{id:this.base16.decode(s.data().id),label:s.data().label,tag:s.data().tag,alias:s.data().alias}}})),n=pr.map(this.cy?.edges(),s=>({element:{id:s.data().id,type:"edges",data:{id:this.base16.decode(s.data().id),label:s.data().label,tag:s.data().tag,source:{id:this.base16.decode(s.source().id()),tag:s.source().data().tag},target:{id:this.base16.decode(s.target().id()),tag:s.target().data().tag}}}})),r=[];return pr.each(e,s=>{r.push(s)}),pr.each(n,s=>{r.push(s)}),r}applyRuleset(e,n){let r=this.buildFacts();this.logger.debug("Execute",this.currentRules,r),n?this.rulesService.jsondataEngine(this.currentRules,r,!1,!1).then(s=>{this.logger.info(s),this.jsonRules=s.treenodes,this.currentRulesFail=s.failure.length,this.currentRulesSuccess=s.success.length,this.displaySidebar=e}):this.rulesService.jsondataEngine(this.currentRules,r,!1,!0).then(s=>{this.logger.info(s),this.jsonRules=s.treenodes,this.currentRulesFail=s.failure.length,this.currentRulesSuccess=s.success.length,this.displaySidebar=e})}onSelectCurrentAlias(e){let n=this.cy?.$(`#${this.selectedAlias.key}`);this.cy?.center(n),this.displayFinder=!1}onSelectItem(e){this.logger.info("SELECT/ITEM",e);let n=this.cy?.$(`#${e.node.data.uid}`);this.cy?.center(n),this.displaySidebar=!1}ngOnDestroy(){this.subscriptions&&pr.each(this.subscriptions,e=>{e.unsubscribe()})}onHide(){this.onClearAnySelection()}createNewNode(){let e=this.base16.encode(`default@${_4()}`);this.cy?.add([{data:{id:e,label:"default",cdata:"TODO ...",tag:""},position:{x:0,y:0}}]);let n=this.cy?.$(`#${e}`);this.cy?.center(n)}changeProperties(){this.captureData={styles:pr.map(this.styleService.findAll(),e=>e.id),style:"default",rules:pr.map(this.rulesService.findAll(),e=>e.id),rule:"default"},this.displayChangeProperties=!0}nodeSelect(e){let r=this.cy?.$(`#${this.selectedNode.key}`);this.cy?.center(r),this.displayFinder=!1}onToggleGroupEnabled(){this.groupEnabled?(this.groupEnabled=!1,pr.each(this.rules,e=>{e.disable()})):(this.groupEnabled=!0,pr.each(this.rules,e=>{e.enable()})),this.onClearAnySelection()}onToggleDrawModeEnabled(){this.drawModeEnabled?(this.edgehandles.disableDrawMode(),this.drawModeEnabled=!1):(this.edgehandles.enableDrawMode(),this.drawModeEnabled=!0),this.onClearAnySelection()}buildChildNodes(e){return{key:"1",label:"Nodes",data:{uid:1,label:"Nodes"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:pr.map(e.nodes,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,label:n.label},icon:"pi pi-fw pi-clone",children:[]}))}}buildChildEdges(e){return{key:"1",label:"Edges",data:{uid:2,label:"Edges"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:pr.map(e.edges,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,_source:n.source,_target:n.target,label:n.label},icon:"pi pi-fw pi-share-alt",children:[]}))}}onFileDropped(e){let n=e[0].name;this.id&&n.startsWith("style")&&n.endsWith(".json")?this.onFileStyleDropped(e):this.id&&n.startsWith("rule")&&n.endsWith(".json")?this.onFileRuleDropped(e):this.id&&n.endsWith(".gexf")&&this.onFileGexfDropped(e)}onFileGexfDropped(e){this.messageService.add({key:"bc",severity:"info",summary:"Upload/GEXF",detail:`Filename ${e[0].name}`}),this.id&&this.graphsService.uploadHandler(e[0],this.id,this.id).then(n=>{this.graphsService.store(n,r=>{r.label=n.label,r.style=n.style,r.rules=n.rules,r.nodes=n.nodes,r.edges=n.edges}),this.store.dispatch(E1({graph:n}))})}onFileStyleDropped(e){var n=this;let r=e[0].name;this.currentStyle=r,this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${e[0].name}`});let s=new FileReader;s.addEventListener("loadend",iy(function*(){let o={id:r,tags:JSON.parse(s.result+"")};n.styleService.store(o,l=>{l.tags=o.tags}),n.applyChangeProperties({style:n.currentStyle,rule:n.currentRules}),n.store.dispatch(b4({style:o}))})),s.readAsText(e[0])}onFileRuleDropped(e){var n=this;let r=e[0].name;this.currentRules=r,this.messageService.add({key:"bc",severity:"info",summary:"Upload/Rule",detail:`Filename ${r}`});let s=new FileReader;s.addEventListener("loadend",iy(function*(){n.rulesService.load(r,JSON.parse(s.result+"")),n.applyChangeProperties({style:n.currentStyle,rule:n.currentRules})})),s.readAsText(e[0])}ngAfterViewInit(){this.cy=J1({container:this.myGraph?.nativeElement,layout:{name:"preset"},motionBlur:!0,selectionType:"single",boxSelectionEnabled:!1}),this.preferences.grid&&this.cy?.snapToGrid(),this.cy.on("mouseover",e=>{this.logger.debug(e)}),this.cy.on("mouseout",e=>{this.logger.debug(e)}),this.cy.on("dblclick","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickNode(e)}),this.cy.on("dblclick","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickEdge(e)}),this.cy.on("cxttap","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickNode(e)}),this.cy.on("cxttap","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickEdge(e)}),this.cy.on("click",e=>{this.onClearAnySelection()}),this.cy.on("click","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickNode(e)}),this.cy.on("click","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickEdge(e)}),this.cy.on("mouseover",e=>{}),this.route.params.subscribe(e=>{this.id=e.label;let n=this.graphsService.findOne(this.id+"");n&&this.store.dispatch(E1({graph:n}))})}onRightClickNode(e){this.logger.info("[NODE] rclick",e)}onRightClickEdge(e){this.logger.info("[EDGE] rclick",e)}onDblClickNode(e){this.logger.info("[NODE] dblclick",e)}onDblClickEdge(e){this.logger.info("[EDGE] dblclick",e)}onLeftClickNode(e){this.logger.info("[NODE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.currentSelectedEdge=void 0,this.currentSelectedNode=e.target[0];let n="";if(this.currentSelectedNode.data().cdata&&(n=this.currentSelectedNode.data().cdata,this.currentSelectedNode.data().alias)){let r=this.base16.encode(this.currentSelectedNode.data().alias),s=this.cy?.$(`#${r}`);s&&(n=s[0].data().cdata)}this.captureData=this.currentSelectedNode.data().cdata?{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:zL.render(n),selectElementRawCdata:n}:{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:"",selectElementRawCdata:n},this._lockedElement=this.currentSelectedNode.locked()}onLeftClickEdge(e){this.logger.info("[EDGE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.currentSelectedNode=void 0,this.currentSelectedEdge=e.target[0],this.captureData=this.currentSelectedEdge.data().cdata?{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:zL.render(this.currentSelectedEdge.data().cdata),selectElementRawCdata:this.currentSelectedEdge.data().cdata}:{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:"",selectElementRawCdata:this.currentSelectedEdge.data().cdata}}previewNewCData(e){e.selectElementCdata=zL.render(e.selectElementRawCdata)}applyNewCData(e){this.logger.info("Apply new data on id",this.base16.decode(e.selectElementId)),this.cy?.$(`#${e.selectElementId}`).data("cdata",e.selectElementRawCdata),this.displayMarkdown=!1}onCloneNode(e){1===e.length&&e[0].isNode()&&this.cy?.add(pr.map(e,n=>{let s=`${this.base16.decode(n.data()?.id).split("@")[0]}@${_4()}`,o={data:{id:this.base16.encode(s),label:n.data()?.label,cdata:"TODO ...",group:"",tag:n.data()?.tag},position:{x:n.position().x+50,y:n.position().y+50}};return n.data()?.parent&&(o.data.parent=n.data()?.parent),this.logger.info("Clone node",o),o}))}onCloneEdge(e){}onClearAnySelection(){this.logger.info("Clear selection"),this.selectorDisplay="",this.currentSelectedEdge=void 0,this.currentSelectedNode=void 0,this.items=this.coreItem}retrieveStyle(e){let n=this.styleService.findOne(e)?.tags,r=[];pr.each(n,o=>{if(o.label)r.push({selector:`${o.selector}[tag = '${o.label}']`,css:o.style?.css?o.style?.css:{}});else{let l={selector:`${o.selector}`,css:o.style?.css?o.style?.css:{}};void 0===l.css.content&&(l.css.content=u=>{let p=u.data().cdata?"*":"",v=u.data().alias?"@":"";return u.data().label&&u.data().group?`${u.data().label} (${u.data().group}) ${p} ${v}`:u.data().label?`${u.data().label} ${p} ${v}`:""}),r.push(l)}});let s=[];return pr.each(r,o=>{s.push(o)}),s}handleChangeLock(e){if(!this.currentSelectedNode)return;this.logger.info("lock",this.currentSelectedNode.data().id);let n=this.cy?.$(`#${this.currentSelectedNode.data().id}`);this.logger.info("lock",n),e.checked?(n?.lock(),n?.animate({style:{opacity:.2}},{duration:1e3})):(n?.animate({style:{opacity:1}},{duration:1e3}),n?.unlock())}resolveClonedId(e){let n=this.cy?.$(`#${e}`)[0];return n?.data().clone||n?.data().id||void 0}toSysGraph(e,n,r,s){let o={};return this.logger.info(`toSysGraph style: ${r}`),{id:e,style:r||"default",rules:s||"default",label:n,nodes:pr.map(this.cy?.nodes(),l=>{let u={id:l.data().clone||l.data().id||"",label:l.data().label||"",x:l.position().x||0,y:l.position().y||0,size:10,color:"0",group:l.data().group,tag:l.data().tag};return o[l.data().id||""]=u,l.data().alias&&(u.alias=l.data().alias),l.data().cdata&&(u.cdata=l.data().cdata),l.data().parent&&(u.parent=l.data().parent),u}),edges:pr.map(this.cy?.edges(),l=>{let u=this.resolveClonedId(l.data().source),p=this.resolveClonedId(l.data().target);if(void 0===u||void 0===p)throw this.logger.error("Internal error while resolving source and target"),new String("Internal error while resolving source and target");let v={id:l.data().id||"",label:l.data().label||"",source:u,target:p,cdata:l.data().cdata,tag:l.data().tag};return l.data().cdata&&(v.cdata=l.data().cdata),v})}}gexf(e,n,r,s){let o=this.toSysGraph(e,n,r,s);this.clipboardService.copyTextToClipboard(this.graphsService.toGexf(o).join("\n"))}graphml(e,n,r,s){let o=this.toSysGraph(e,n,r,s);this.clipboardService.copyTextToClipboard(this.graphsService.toGraphml(o).join("\n"))}raiseError(e,n){this.messageService.add({key:"lc",severity:"error",summary:e,detail:n})}updateChartOptions(){this.chartOptions=this.config&&this.config.dark?this.getDarkTheme():this.getLightTheme()}getLightTheme(){return{plugins:{legend:{labels:{color:"#495057"}}},scales:{r:{grid:{color:"#ebedef"}}}}}getDarkTheme(){return{plugins:{legend:{labels:{color:"#ebedef"}}},scales:{r:{grid:{color:"rgba(255,255,255,0.2)"}}}}}}return i.\u0275fac=function(e){return new(e||i)(qt(R1),qt(C4),qt(A4),qt(x4),qt(k1),qt(zh),qt(iv),qt(v2),qt(ny),qt(i_))},i.\u0275cmp=Rr({type:i,selectors:[["app-graph-cytoscape"]],viewQuery:function(e,n){if(1&e&&(Hr(Gge,5),Hr(Wge,5),Hr(jge,5)),2&e){let r;tr(r=nr())&&(n.myGraph=r.first),tr(r=nr())&&(n.myPng=r.first),tr(r=nr())&&(n.myTreeTable=r.first)}},decls:98,vars:119,consts:[[3,"target","model"],["cm",""],["position","bottom-center","key","bc"],["position","left-center","key","lc"],[1,"dock-window"],["position","left",3,"model"],["pTemplate","item"],["position","right",3,"model"],["position","bottom",3,"model"],["area",""],[1,"flex"],["dropZoneDirective","",1,"w-12",3,"fileDropped"],["id","cytoscape",1,"cytoscape-container"],["myCytoscape",""],[1,"flex","flex-row-reverse","flex-wrap"],[1,"flex","align-items-center","justify-content-center",3,"click"],["pBadge","","pTooltip","Fail ruleset","severity","danger",1,"pi","pi-thumbs-down","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Successful ruleset","severity","success",1,"pi","pi-thumbs-up","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],[1,"flex","align-items-center","justify-content-center"],["pBadge","","pTooltip","Global ruleset counter","severity","success",1,"pi","pi-briefcase","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Tags",1,"pi","pi-book","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["inputId","binary",3,"ngModel","binary","readonly","ngModelChange"],["header","Current node",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["class","grid p-fluid",4,"ngIf"],["pTemplate","footer"],["header","Current edge",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["header","Change graph properties",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[1,"grid","p-fluid"],[1,"col-12"],["pTooltip","Styles","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a style","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Rules","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a ruleset","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["header","Documentation",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[3,"style",4,"ngIf"],["header","Group statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["type","polarArea",3,"data","options"],["header","Tag statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["header","Png file to export","header","Png export",3,"modal","visible","visibleChange"],["src",""],["myPng",""],["header","Find element(s)",3,"modal","visible","visibleChange"],["header","Alias"],["selectionMode","single","filterMode","strict",3,"value","selection","filter","selectionChange","onNodeSelect"],["myTreeAlias",""],["header","Node(s) and edges(s)"],["myTree",""],["header","Ruleset report",3,"modal","visible","visibleChange"],["styleClass","p-treetable-sm",3,"value"],["pTemplate","header"],["pTemplate","body"],["width","100%",3,"src","alt"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["pTooltip","Internal ID to override current ID on next save or diagram export","tooltipPosition","top",1,"pi","pi-bookmark"],["type","text","pInputText","","placeholder","",3,"ngModel","ngModelChange"],["icon","pi pi-check","label","Labelize","styleClass","p-button-text","pTooltip","Rebuild id with tag and label","tooltipPosition","top",3,"click"],["pTooltip","Label","tooltipPosition","top",1,"pi","pi-hashtag"],["pTooltip","Alias","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select an alias","filterBy","label",1,"p-col",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Tags","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a tag","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Group","tooltipPosition","top",1,"pi","pi-clone"],["pTooltip","Locked item ?","tooltipPosition","top",1,"p-inputgroup-addon"],["inputId","binary",3,"ngModel","binary","ngModelChange","onChange"],["type","text","pInputText","","placeholder","Locked","readonly","true"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"],["pTooltip","Source","tooltipPosition","top",1,"pi","pi-cog"],["type","text","pInputText","","placeholder","","readonly","true",3,"ngModel","ngModelChange"],["pTooltip","Target","tooltipPosition","top",1,"pi","pi-cog"],["pTemplate",""],["pInputTextarea","",3,"ngModel","keyup","ngModelChange"],[3,"innerHTML"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","offIcon","pi pi-times",3,"ngModel","onIcon","ngModelChange",4,"ngIf"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click",4,"ngIf"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","offIcon","pi pi-times",3,"ngModel","onIcon","ngModelChange"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click"],[2,"width","65%"],[2,"width","20%"],[2,"width","5%"],[3,"rowNode"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"pi","pi-check"],[1,"pi","pi-times"],[3,"click"],[1,"pi","pi-search"]],template:function(e,n){1&e&&(Kn(0,"p-contextMenu",0,1)(2,"p-toast",2)(3,"p-toast",3),Xe(4,"div",4)(5,"p-dock",5),ze(6,$ge,1,2,"ng-template",6),Ke(),Xe(7,"p-dock",7),ze(8,qge,1,2,"ng-template",6),Ke(),Xe(9,"p-dock",8),ze(10,Xge,1,2,"ng-template",6),Ke()(),Xe(11,"div",null,9)(13,"div",10)(14,"div",11),_n("fileDropped",function(s){return n.onFileDropped(s)}),Kn(15,"div",12,13),Ke()(),Xe(17,"div")(18,"div",14)(19,"div",15),_n("click",function(){return n.applyRuleset(!0,!0)}),Kn(20,"i",16),Ke(),Xe(21,"div",15),_n("click",function(){return n.applyRuleset(!0,!1)}),Kn(22,"i",17),Ke(),Xe(23,"div"),bi(24,"\xa0\xa0\xa0"),Ke(),Xe(25,"div"),bi(26,"\xa0\xa0\xa0"),Ke(),Xe(27,"div",18),Kn(28,"i",19),Ke(),Xe(29,"div"),bi(30,"\xa0\xa0\xa0"),Ke(),Xe(31,"div",18),bi(32),Ke(),Xe(33,"div"),bi(34,"\xa0\xa0\xa0"),Ke(),Xe(35,"div",18),Kn(36,"i",20),Ke(),Xe(37,"div"),bi(38,"\xa0\xa0\xa0"),Ke(),Xe(39,"div",18),bi(40),Ke(),Xe(41,"div"),bi(42,"\xa0\xa0\xa0"),Ke(),Xe(43,"p-checkbox",21),_n("ngModelChange",function(s){return n.groupEnabled=s}),Ke(),Xe(44,"div"),bi(45,"\xa0\xa0\xa0"),Ke(),Xe(46,"div",18),bi(47,"Group enabled:"),Ke(),Xe(48,"div"),bi(49,"\xa0\xa0\xa0"),Ke(),Xe(50,"p-checkbox",21),_n("ngModelChange",function(s){return n.drawModeEnabled=s}),Ke(),Xe(51,"div"),bi(52,"\xa0\xa0\xa0"),Ke(),Xe(53,"div",18),bi(54,"Draw mode enabled:"),Ke(),Xe(55,"div"),bi(56,"\xa0\xa0\xa0"),Ke(),Xe(57,"div",18),bi(58),Ke()()(),Xe(59,"p-dialog",22),_n("visibleChange",function(s){return n.displaySelectionNode=s})("onHide",function(){return n.onHide()}),ze(60,Yge,28,19,"div",23),ze(61,Kge,1,0,"ng-template",24),Ke(),Xe(62,"p-dialog",25),_n("visibleChange",function(s){return n.displaySelectionEdge=s})("onHide",function(){return n.onHide()}),ze(63,Zge,19,10,"div",23),ze(64,Qge,1,0,"ng-template",24),Ke(),Xe(65,"p-dialog",26),_n("visibleChange",function(s){return n.displayChangeProperties=s})("onHide",function(){return n.onHide()}),Xe(66,"div",27)(67,"div",28)(68,"div",29)(69,"p-dropdown",30),_n("ngModelChange",function(s){return n.captureData.style=s}),Ke()()(),Xe(70,"div",28)(71,"div",31)(72,"p-dropdown",32),_n("ngModelChange",function(s){return n.captureData.rule=s}),Ke()()()(),ze(73,Jge,1,0,"ng-template",24),Ke(),Xe(74,"p-dialog",33),_n("visibleChange",function(s){return n.displayMarkdown=s})("onHide",function(){return n.onHide()}),ze(75,ime,3,3,"p-splitter",34),ze(76,sme,2,3,"p-splitter",34),ze(77,lme,2,2,"ng-template",24),Ke(),Xe(78,"p-dialog",35),_n("visibleChange",function(s){return n.displayGroupStatistic=s}),Kn(79,"p-chart",36),Ke(),Xe(80,"p-dialog",37),_n("visibleChange",function(s){return n.displayTagStatistic=s}),Kn(81,"p-chart",36),Ke(),Xe(82,"p-dialog",38),_n("visibleChange",function(s){return n.displayExportPng=s}),Kn(83,"img",39,40)(85,"img"),Ke(),Xe(86,"p-dialog",41),_n("visibleChange",function(s){return n.displayFinder=s}),Xe(87,"p-tabView")(88,"p-tabPanel",42)(89,"p-tree",43,44),_n("selectionChange",function(s){return n.selectedAlias=s})("onNodeSelect",function(s){return n.onSelectCurrentAlias(s)}),Ke()(),Xe(91,"p-tabPanel",45)(92,"p-tree",43,46),_n("selectionChange",function(s){return n.selectedNode=s})("onNodeSelect",function(s){return n.nodeSelect(s)}),Ke()()()(),Xe(94,"p-dialog",47),_n("visibleChange",function(s){return n.displaySidebar=s}),Xe(95,"p-treeTable",48),ze(96,cme,11,0,"ng-template",49),ze(97,yme,14,11,"ng-template",50),Ke()()()),2&e&&(de("target",Po(12))("model",n.items),we(5),de("model",n.dockLeftItems),we(2),de("model",n.dockRightItems),we(2),de("model",n.dockBottomItems),we(5),To(Oo(105,_me)),we(6),l0("value",n.currentRulesFail),we(2),l0("value",n.currentRulesSuccess),we(6),l0("value",n.currentRulesCounter),we(4),jc("Ruleset: ",n.currentRules,""),we(4),l0("value",n.currentStyleCounter),we(4),jc("Style: ",n.currentStyle,""),we(3),de("ngModel",n.groupEnabled)("binary",!0)("readonly",!0),we(7),de("ngModel",n.drawModeEnabled)("binary",!0)("readonly",!0),we(8),jc("Current selection: ",n.selectorDisplay,""),we(1),To(Oo(106,bme)),de("visible",n.displaySelectionNode)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),we(1),de("ngIf",n.currentSelectedNode),we(2),To(Oo(107,Cme)),de("visible",n.displaySelectionEdge)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),we(1),de("ngIf",n.currentSelectedEdge),we(2),To(Oo(108,wme)),de("visible",n.displayChangeProperties)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),we(4),To(Oo(109,nx)),de("options",n.captureData.styles)("ngModel",n.captureData.style)("filter",!0)("showClear",!0),we(3),To(Oo(110,nx)),de("options",n.captureData.rules)("ngModel",n.captureData.rule)("filter",!0)("showClear",!0),we(2),To(Oo(111,n5)),de("visible",n.displayMarkdown)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),we(1),de("ngIf",!n.captureData.isAlias&&n.captureData.editable),we(1),de("ngIf",n.captureData.isAlias||!n.captureData.editable),we(2),To(Oo(112,r5)),de("visible",n.displayGroupStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),we(1),To(Oo(113,s5)),de("data",n.dataGroupStatistics)("options",n.chartOptions),we(1),To(Oo(114,r5)),de("visible",n.displayTagStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),we(1),To(Oo(115,s5)),de("data",n.dataTagStatistics)("options",n.chartOptions),we(1),To(Oo(116,n5)),de("modal",!0)("visible",n.displayExportPng),we(4),To(Oo(117,Ame)),de("modal",!0)("visible",n.displayFinder),we(3),de("value",n.alias)("selection",n.selectedAlias)("filter",!0),we(3),de("value",n.graphs)("selection",n.selectedNode)("filter",!0),we(2),To(Oo(118,xme)),de("modal",!0)("visible",n.displaySidebar),we(1),de("value",n.jsonRules))},dependencies:[Fo,hl,$1,Z1,S4,ov,V2,LA,hC,Aae,E4,C0,cC,ay,D4,M4,O4,eS,_ue,Mue,V4,kge,e5,Uge,RS],styles:[".cytoscape-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}"]}),i})(),Mme=(()=>{class i{constructor(){}uploadHandler(e){return new Promise(n=>{let r=new FileReader;r.addEventListener("loadend",iy(function*(){for(var s=new Uint8Array(r.result),o=s.length,l=[];o--;)l[o]=String.fromCharCode(s[o]);var u=window.btoa(l.join(""));n(u)})),r.readAsArrayBuffer(e)})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Dme=["myImg"];function Lme(i,t){1&i&&(Xe(0,"pre"),bi(1,"Drop here"),Ke())}function Pme(i,t){1&i&&Kn(0,"img",2,3),2&i&&de("src",ye().viewer,dh)}const Rme=function(){return{height:"256px"}};let kme=(()=>{class i{constructor(e,n,r,s){this.logger=e,this.messageService=n,this.clipboardService=r,this.converterService=s,this.viewer="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAgAElEQVR4nO3dT8hsW3rX8edUvfd27unb/iFR9NJpK90d2+hInAiJKHrVBjmke6Akk0hwboYOVFicQzqSIIZGBEVQcKLQoFwjIgYRB04jUTCgkmijgkZDHCR0MB73es9blV1v7T9rV63az289+7tgD5K367PqWWtX/Z573npX2ccf/5H3u+u97rJrRn7c0+Pf7114eHh4eHh4yl6oYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw5v2Hh4evrLb7f52/+p+9LeuvZ5bt3r5+SmvHx4eXoWhXgweXkRvv9+/efHixdvj1f3o6qvv1PLy81NePzw8vGHPdXI8PLx5r98AmFj4P2sAJNcPDw9v2HOdHA8Pb947NgAmGP69BkB2/fDw8IY918nx8PDmvd1u99pEwz9f+fkprx8eHt6w5zo5Hh7evNf9KJlo+D95qWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeLW8j7vri8LPb0teMt3wn20ABNZvK15+vX4s/Pzw1LxQxeDV8v5Ed/1qd33TnjUBIs9va14y3fCfbABE1m8L3qG7fr67vtVdrwSfH56iF6oYvBreMfyPb+6nJkDk+W3RS6Yb/qMNgND6RfcO9i78j/sx2AQEqhevlheqGLxbvefhf2oCuiD4osDz26qXTDf8BxsAsfWL7B3sPPwHm4BA9eLV9EIVg3eLNxb+x3D45suXH3xPoHpb8pLphv9FAyC4flG9gw2H/1kTEKhevNpeqGLw7hX+x+vYBLReb2teMt3wP2sARNcvonew6fA/NQEPDw9fCVAv3j28UMXg3TP8T01A/nXAis8Pr9cACIb/qQEQXr9o3sHKwv+4p9967733vtpwvXj38kIVg3fv8D/+7OKvA+70/PDejWS64f/YAIivXyTvYMvC/9QEPP1LwL2fH16DnuvkeE2F/+ImQKTeZr1uJOHwPzYAsusXyDvYdeF/3N/JPxEUrBdvBc91crwmw7+4CRCpt2lvt9u9Fg7/t/n5Ka9fEO9gt4X/8VrUBARaP7xbh3oxeKuG/2wTIFJv895+v3+jGv758fn5Ka9fAO9gdcJ/URMQaP3wRjzXyfGaD//RJkCk3hBevwEwsfB/1gBIrl/j3sHqhn9RExBo/fAmPNfJ8Vb17hX+F02ASL1hvGMDYILh32sAZNevYe9g9wn/ySYg0PrhzXiuk+Ot5t07/E9NwAtODKzu5d+xm2j45+vpMwDV6lXfj5W8g903/AebgEDrh1fguU6Ot4q3VvgfPU4MrOxZ4dcBD10r/fVAqlmv+n6s4B1snfA/awICrR9eoReqGLyLsXb4Hy9ODKzrJdMN/6sagMb3457ewdYN/1MTwImB2/NCFYN3NrzC/9QEvODEwFpeMt3wX9wABNiPe3kH8wn/o8GJgVv3QhWzXc87/I8/48TAOl4y3fBf1AAE2Y97eAfzDf9TE8CJgRv1QhWzXU8l/Bc3ASLrp+gl0w3/4gYg0H7U9g6mEf5HjxMDt+aFKma7nlr4FzcBIuun6iXTCYerGoBg+1HTO5hW+B8vTgzciheqmO16quE/2wSIrJ+yl0wrHBY1AALrp+odTDP8FzUBgfZje16oYrbrqYf/aBMgsn7qXjK9cChqAETWT9E7mHb4FzUBgfZjm16oYrbptRL+F02AyPq14CXT3t9Uud7BEcg7WBvhP9kEBNqP7Xqhitme11r4n5qAF5wYuMRLpr2/qXK9FyOQd7C2wn+wCQi0H9v2QhWzLa/V8D96nBhY7iXT3t9Uud6zEcg7WJvhf9YEBNoPvFDFbMdrPfyPFycGlo1k2vubKtd7GoG8g7Ud/qcmgBMDA3mhitmGFyX8T03AC04MnBvJtPc3Va7XgnkHixH+R4MTA6N4oYqJ70UL/+PPODFweiTT3t8kvn6Ef32PEwMDea6T4xV5X7KY4b+4CRDZj9W8biTx/U3K6+fo5fs539eKr7caXn4/+tId1w9vBc91crxF3huL8+YxdHFi4IC32+1eK+9vfn7K6+fkHSzmf/n3vZ+44/rhreC5To53lXfWBDT85rG4CRDdj7t7+/3+jfL+5uenvH6EP+GPN+y5To53tffYBDT85rG4CRDfj7t6/QbABPe31wBIrh/hT/jjDXuuk+Nd7+12ux9t9M1jcRPQwn7c0zs2ACa6v08NgOz6Ef6EP96w5zo53m1e98b7tcbePBY3AS84MfD9/Dt209iPQe/pMwDV6lXfD8L/LuuH5+C5To53u5f/JcDaePO41tv8iYFW+HXAQ9dK+5tq1qu+H4R/9fXDc/JCFbNhb/CvA+auht6Mtn5iYDKt/Xjupcr1Lh6EP+GPt9wLVczGvUVNQINvRls+MTCZ3n70f54q17toEP6EP14lL1Qx2/OKmoCG34y2emJgMs39WNwABNmPPA5G+N+yfnhqXqhitutNNgENvxktbgJE9qOGl0x3P4obgED7cTDC/5b1w1PzQhWDx4mBWvtxq5dMez9S5XpnB+FP+ONV8kIVg3ccnBiotR+3eMm09yNVrndyEP6EP14lL1QxeM8HJwZq7ce1XjLt/UiV6x0dhD/hj1fRC1UM3oXHiYFa+3Gll0x7P1LlegcH4U/441X2QhWDN+hxYuBt6yfgJdPej1S53otB+BP+eHfwQhWDN+pxYuBt6+fsJdPej1S53rNB+BP+eHfyQhWDN+dxYuBt6+flJdPej1S53tMg/Al/vDt6oYrBK/E4MfC29fPwkmnvR6pcrzl7ByP8b1k/vFa8UMXglXqcGHjb+q3tJdPejyS+foQ/4Y9Xa6gXg1fkcWLgbeu3mteNJL4fSXn9CH/CH6/SUC8Gb5HHiYFa+zHo7Xa718r7kZ+f8voR/oQ/XoWhXgzeVR4nBmrtx4W33+/fKO9Hfn7K60f4E/54w57r5HgyHicGau3HmddvAArrXXU/eg2A5PoR/oQ/3rDnOjmejseJgVr70feODcDCelfbj6cGQHb9CP+7rR9e457r5HhaHicG3rZ+9/Ly79ivrHeV/Xj6DEC1egl/wh9vHc91cjw9jxMDb1u/e3hW+HXAI/WusR+pZr2EP+GPt44Xqhi8ah4nBt62frW9dGO9996PVLnexYPwJ/zxlnuhisGr6nFi4G3rV9NLFeq9536kyvUuGoQ/4Y9XyQtVDN6tHicG3rZ+tbxUqd577UeqXG/xIPwJf7xKXqhi8Gp5nBh42/rV8FLFeu+xH6lyvUWD8Cf88Sp5oYrBq+1xYqDvfqTK9dZev1S53tlB+BP+eJW8UMXg3cvjxEC//Uji65cq1zs5CH/CH6+SF6oYvHt7nBjosx9JfP1S5XpHB+FP+ONV9EIVg3d3jxMDXfYjia9fqlzv4CD8CX+8yl6oYvBW8Tgx8Lb1u8JL4uuXKtd7MQh/wh/vDl6oYvBW8zgx8Lb1W+gl8fVLles9G4Q/4Y93Jy9UMXhre5wYeNv6lY60Ur3XeqlyvadB+BP+eHf0QhWD5+FxYuBt61cy0or1XuOkyvXaQu9ghP8t64e3VS9UMXheHicG3rZ+cyOJr18i/Al/vHY918nxQnicGHjb+k2NJL5+ifAn/PHa9FwnxwvlcWLgHfZjt9u9Vl6//PwIf8Ifrz3PdXK8kB4nBlbej/1+/0Z5/fLzI/wJf7z2PNfJ8cJ6nBhYcT/6DYDi+vUaAMKf8MdryHOdHC+ux4mB9fbj2ACort9TA0D4E/54jXmuk+PF9jgx8Lb1O175d+wi9Q56T58BqFYv4X+X9cPDu/BcJ8eL73Fi4G3r9/G7f6ZLQvUOealmvYR/9fXDwxv0QhWDJ+txYuBt65fE6n3upcr19sfBCP9b1g8Pb+o/LuIUgyftcWLg9euXBOvt/zxVrvc4Dkb437J+eHjLvFDF4Kl5nBh43fol0XoXNwCEP+GPJ+qFKgZP1ePEwOXrl4TrLW4ACH/CH0/UC1UMnrrHiYHL1i+J15umal1Y78EI/1vWDw+P8MeT9zgxsHz9kni9aeyJL6z3YIT/LeuHh0f44zXjcWJg2fol8XrT2BMn/Al/PGEvVDF4zXmcGFi0fkm83jS2v4Q/4Y8n7IUqBq9JjxMDZ0cSrzdN7S/hT/jjiXqhisFr1uPEwMmRxOtNc/tL+JePFl+/eI16oYrBa93jxMDhkcTrTYX72x8HI/wvRuOvX7zWvFDF4EXwODHwciTxevPzI/wJf7zWvFDF4EXxODHwfCTxehPhT/jjteu5To6HNzA4MfA3RhKvNxH+hD9em57r5Hh4E4MTAz9+/FPJ18r15udH+BP+eO15rpPj4RWMzZ8YuN/v3yjXm58f4U/447XnuU6Oh1c4Nn1iYL8BUKy31wAQ/oVD/PWGtxHPdXI8vFJvyycGHhsA1XqfGgDCv3C08HrD24bnOjke3hJvqycG5t+xizy/Qe/pMwDPt+5ghP/FaOn1hhffc50cD2+pt8UTA63w64Ad603Ptu5ghP/FaPH1hhfbC1UM3ma8rZ0YmMSe33Mv9bbuYIT/xWj89YYX1AtVDN6mvC2dGJgEn1//5+npeR6M8L8YQV5veFvwQhWDF93byomBSfT59RuAgxH+FyPY6w0vsheqGLyteFs4MfDrws8vXz9phP/FEHl94OER/nihvegnBv6y+PP7JfHnR/jj4RH+eIG96CcG4hH+eHh1vVDF4G3di35iIB7hj4dXzwtVDN7mvQ2cGIhH+OPh1fFCFYOH9/EmTgzEI/zx8G73QhWDh/d0beDEQDzCHw/vNi9UMXh45170EwPxCH88vOu9UMXg4V160U8MxCP88fCu80IVg4c37EU/MRCP8MfDu9pznRwPbwUv+omBeIQ/Ht59h3oxeHgTI/qJgXiEPx7efYZ6MXh4BYMTA/EIfzy8JY9roRg8vMLBiYHb9gh/PLzu8a6T4+F5eZwYuFmP8MfDe/JcJ8fD8/Q4MXBzHuGPh9fzXCfHw/P2ODFwMx7hj4f3zAtVDB7elR4nBsb2CH88vAEvVDF4eDd4nBgY0yP88fBKvVDF4OEt8zgxMJZH+OPhEf54eMXej5lGeOHd5v3Y1CYPDZH7Dw+P8MfDc/Q4MbBtj//yx8Mj/PHwrvY4MbBNj/DHwyP88fBu9jgxsC2P8MfDW+KFKgYPr7LHiYHNeIQ/Ht5SL1QxeHh38DgxUN4j/PHwrvFCFYOHdyePEwNlPcIfD+9aL1QxeHj39TgxUMsj/PHwbvFCFYOHd3+PEwM1PMIfD+9WL1QxeHjreJwYSPjj4YXxXCfHw2vQm2wCGg5XdY/wx8Mj/PHw3D1ODCT88fCa9Vwnx8ML4HFiIOGPh9ek5zo5Hl4QjxMDCX88vOY818nx8KJ4nBhI+OPhtea5To6HF8nb73c/3li4qnt8pS8e3h0918nx8KJ5nBjIf/nj4bXihSoGD0/E48RAwh8PT94LVQwenpDHiYGEPx5eW16oYvDwfD1ODCT88fDa8EIVg4en4XFiIOGPh6fthSoGD0/L48RAwh8PT9MLVQwenqbHiYGEPx6elidazEfd9aeP18PDww901w/2rh/o/3zpVcH73sr1ngZeaI8TAwl/vNu9/P675vv9Uu+jyvUWj8We6M3wyrTf3D6pXK/hbcPjxEDCH+9mL7//qt3P/etV5XqLxlWe6M3w2AAIv7l9IrF5eE16+/3+a2L3M+GP15JX1AA4vj5mGwCZ/VC8GbrxSvzN7ROJzcNr1tvwiYGEP96t3mwD4Pz6mGwABNbv7MFyN8PDw8NXlN/cujfvfyyxeXite1s7MZDwx6vhTTYAAq+P0QZAZP3OALmboRtfVX5ze9YAyK0fXlPeVk4MJPzxanmjDYDI62OwARBav3PEbfIRr98AmOCbW68BiPBiwvP38rfeKYV1bY9v9cOr6Q02AEKvj4sGQGz9bhv3LubYAJjom9tTAyCzeXghvKgnBvJf/ni1vYsGQOz1cdYACK7f9WONYvJnAEz4ze2pAahWr9LNgOfqRTsxkPDHu4d31gAIvj5ODYDo+l031irGeucALL1Wuhk+qVmvys2AJ+FFOTGQ8Me7l3dqAERfH68q12v38lwnn/CuagBWvBkWNwAt3Ax4Ml7rJwYS/nj39B4bAOHXxyvx9Tt5rpNPeIsbgJVvhkUNQCs3A56O1/CJgYQ/3l29bnwiHP7HBkB2/fqe6+QT3qIGwOFmKG4A1F9MeLpegycGEv54d/fyZ7CEw/9t/gyb8vr1PdfJJ7ziBsCpEyxqAFp4MeFpew2dGEj4463iPW8ATOz1kf+KTXn9+p7r5BNeUQPg+M9Asw1AKy8mvCY89RMDCX+81bx+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/vHie6omBhD/eqt6xATDB8O81ALLrN+mJ3AyTDYDAB0BGGwCR9cOL6RU1AYQ/XmQvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDieionBhL+eC6eFX4d8NC10utj9uuAl9S7yn6I3QyDDYBI+A82AGLrhxfb8z4xkPDH8/SuagBWfH0sbgBc90PwZrhoAITC/6IBEFw/vPie14mBhD+et7e4AVg5PxY1AK77IXoznDUAYuF/1ri61v4AABCHSURBVACIrh/eNry1Twwk/PEUvEUNgEN+FDcA7vshejOcGgDB8D81AO6bh7d5b8UTAwl/PBWvuAFwyo+iBkBiP0RvhscGQDT8HxsAic3Dw/t4lRMDCX88Ja+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4T9cdTwwk/PHUvNkGwDk/JhsAgfU7e7DczZD/jlI4/N/mv0OV2Dw8vHOv9omBhD+eojfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64W3aq3ViIOGPp+qNNgAC4T/aAAit3zniNvmI128ATCz8nzUAEV5MePG8W08MJPzxlL3BBkAk/AcbALH1u23cu5hjA2CC4d9rAGQ2Dw9vYFx7YiDhj6fuXTQAQuF/0QAIrt/1Y41i8mcATDT8ew1AtXqVbga8UN7SEwMJf7wWvLMGQCz8zxoA0fW7bqxVjBV+HfDQtdLNMPt1wEvqVbkZ8EJ6pScGEv54rXinBkAw/E8NgPD6nTzXySe8qxqAFW+GxQ1ACzcDXlhv7sRAwh+vJe+xARAN/8cGQHz9Tp7r5BPe4gZg5ZthUQPQys2AF9ebODGQ8MdryuvGJ8Lhf2wAZNev77lOPuEtagAcbobiBkD9xYS3HW/gxEDCH685L38GSzj83+bPsCmvX99znXzCK24AnDrBogaghRcT3ra83omBhD9ek97zBsCEwj8/Pv8Vm/L69T3XySe8ogbA8Z+BZhuAVl5MeJv0viz+/PDwRr1+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/PDw8vJDesQEwwfDvNQCy6zfpidwMkw2AwAdARhsAkfXDw8PDC+nlBsBEwz9fT58BqFbvavshdDOMNgAC4T/aAAitHx4eHl5Izwq/DnjoWik/Zr8OeEm9q+yH2M0w2ACIhP9gAyC2fnh4eHhRvasagBXzY3ED4LofgjfDRQMgFP4XDYDg+uHh4eFF9RY3ACvnx6IGwHU/RG+GswZALPzPGgDR9cPDw8OL6i1qABzyo7gBcN8P0Zvh1AAIhv+pAXDfPDw8PLztecUNgFN+FDUAEvshejM8NgCi4f/YAEhsHh4eHt72vKIGwDE/ZhsAmf1QvBm68Uo4/I8NgP/m4eHh4W3Pm20AnPNjsgEQWL+zB8vdDPnvKIXD/23+O1SJzcPDw8PbnjfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64eHh4QX2RhsAgfAfbQCE1u8ccZt8xOs3ACYW/s8agAgvJjw8PLyWvMEGQCT8BxsAsfW7bdy7mGMDYILh32sAZDYPDw8Pb0PeRQMgFP4XDYDg+l0/1igmfwbARMO/1wBUq1fpZsDDw8MT984aALHwP2sARNfvurFWMVb4dcBD10o3w+zXAS+pV+VmwMPDw2vAOzUAguF/agCE1+/kuU4+4V3VAKx4MyxuAFq4GfDw8PAa8B4bANHwf2wAxNfv5LlOPuEtbgBWvhkWNQCt3Ax4eHh46l43PhEO/2MDILt+fc918glvUQPgcDMUNwDqLyY8PDy8lrz8GSzh8H+bP8OmvH59z3XyCa+4AXDqBIsagBZeTHh4eHgtec8bABMK//z4/FdsyuvX91wnn/CKGgDHfwaabQBaeTHh4eHhteT1GwATC/9nDYDk+vU918knvNkGwPl3QJMNgMD64eHh4YX0jg2ACYZ/rwGQXb9JT+RmmGwABD4AMtoAiKwfHh4eXkgvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDw8PBCelb4dcBD10r5Mft1wEvqXWU/xG6GwQZAJPwHGwCx9cPDw8OL6l3VAKyYH4sbANf9ELwZLhoAofC/aAAE1w8PDw8vqre4AVg5PxY1AK77IXoznDUAYuF/1gCIrh8eHh5eVG9RA+CQH8UNgPt+iN4MpwZAMPxPDYD75uHh4eFtzytuAJzyo6gBkNgP0ZvhsQEQDf/HBkBi8/Dw8PC25xU1AI75MdsAyOyH4s3QjVfC4X9sAPw3Dw8PD2973mwD4Jwfkw2AwPqdPVjuZsh/Rykc/m/z36FKbB4eHh7e9rzJBkDgPx5HGwCR9TsD5G6GfJKSavjnxz9rAOTWDw8PDy+wN9oACIT/aAMgtH7niNvkI16/ATCx8H/WAER4MeHh4eG15A02ACLhP9gAiK3fbePexRwbABMM/14DILN5eHh4eBvyLhoAofC/aAAE1+/6sUYx+TMAJhr+vQagWr1KNwMeHh6euHfWAIiF/1kDILp+1421irHCrwMeula6GWa/DnhJvSo3Ax4eHl4D3qkBEAz/UwMgvH4nz3XyCe+qBmDFm2FxA9DCzYCHh4fXgPfYAIiG/2MDIL5+J8918glvcQOw8s2wqAFo5WbAw8PDU/e68Ylw+B8bANn163uuk094ixoAh5uhuAFQfzHh4eHhteTlz2AJh//b/Bk25fXre66TT3jFDYBTJ1jUALTwYsLDw8NryXveAJhQ+OfH579iU16/vuc6+YRX1AA4/jPQbAPQyosJDw8PryWv3wCYWPg/awAk16/vuU4+4c02AM6/A5psAATWDw8PDy+kd2wATDD8ew2A7PpNeiI3w2QDIPABkNEGQGT98PDw8EJ6uQEw0fDP19NnAKrVu9p+CN0Mow2AQPiPNgBC64eHh4cX0rPCrwMeulbKj9mvA15S7yr7IXYzDDYAIuE/2ACIrR8eHh5eVO+qBmDF/FjcALjuh+DNcNEACIX/RQMguH54eHh4Ub3FDcDK+bGoAXDdD9Gb4awBEAv/swZAdP3w8PDwonqLGgCH/ChuANz3Q/RmODUAguF/agDcNw8PDw9ve15xA+CUH0UNgMR+iN4Mjw2AaPg/NgASm4eHh4e3Pa+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4eHjb82YbAOf8mGwABNbv7MFyN0P+O0rh8H+b/w5VYvPw8PDwtudNNgAC//E42gCIrN8ZIHczdOP7VcM/P75rAP6JxObh4eHhbc/7KdMN/3z9qcr1Do4qnuLN0I0/phr+7xqAFz8jsXl4eHh42/P+jemGf77+cOV6L0Ztz3Xy596nPvWpP6ga/k/X//30p19+QWXz8PDw8DbiHbrr1003/PP1+yvWezFqe66TD3kffPBtv9d0w//o/b1a9SrdDHh4eHjC3t837fDP1xeF1+/6sVYxu93ud5p2+B+vv6S4fnh4eHjBvBfdlUw//PP12wXXb9BznXzCy1/48GumHf7H65921/d1115o/fDw8PAiePl99Q911z8zjff7uSvn1oPQ+k16rpPPeD9n+uHfv361u/5Ld/2noat7/MU19r8tufDw8PCCe/n9NL+vKr7fj13/vpXwz47r5DOe+nGPeHh4eHh4/esfthL+sw2AcyfzE9b+zYCHh4eHtxFvt9v9eCvhP9kACPwzxg9b4zcDHh4eHt52vIeHhz/XSviPfgZAIPzz+G5r/GbAw8PDw9uO9/Llyy+1Ev6Dnkj4H8cvWMM3Ax4eHh7eZrz/TPjX9f6utXsz4OHh4eFtxNvtdn+H8K/r/Vlr9GbAw8PDw9uO9/Cw/yHCv6737d31LWvwZsDDw8PD24z3rf1+l/Nq8SD8p8c/avBmwMPDw8PbjvcNu2K4569y+OfHPTw8/JkGbwY8PDw8vO14328Lh3v4Pz1INvzz47/whe/6sFvkX2zsZsDDw8PD24b3i901f6xub0iE/9MDZcP/aO33u7/W0M2Ah4eHh7cdL59aWzxkwv/pwdLhn6/PfObD7+x+9CvWxs2Ah4eHh7cNL39Z0UdWOKTC/wmQDv+e9zdM/2bAw8PDw9uO93UrHHLhf0TcJl/mfc6e/iSw9Apwc+Hh4eHhaXq/1l2/ywqGZPhfOxyL+eumezPg4eHh4W3H+0krGIR/Pe83ddd/M82bAQ8PDw9vG95/767fYjOD8K/v/ZDp3Qx4eHh4eNvxftBmhkheTnquk1/pveiuf2laNwMeHh4e3ja8n7aZIZSXk57r5Dd439Vdv2QaNwMeHh4e3ja8/91dB5sYgnk56rlOfqP3qrv+n8W6ufDw8PDwNL2cN1+1iSGcl4Oe6+S3et34eqCbCw8PDw9P1/urNjHU83LIa7qYz33uOz/c7Xb/OsjNhYeHh4en6f0rmzjvv4W8HPKaL+Y7vuPbf9tu9+JnG7+58PDw8PA0vX/XXb/VRkZLeTnrtVjMhx9++tD96BeszZsLDw8PD0/T+2Z35e+iGRwt5mWo8O9539Nd/8Paurnw8PDw8DS9nCe/x0ZG43kpNHk97/Pd9R+sjZsLDw8PD0/T+/nu+pKNjCB5KTB5fe93dNfPmPbNhYeHh4en6f3b7vqsjYxQeRmqmN8Y+Yzmf2GaNxceHh4enqb3z7vrN9vIEMm3el6oYs7HvrtSd/266dxceHh4eHh6Xj7k56/Yu9wYHGL5VscLVczw+KP27pubIt2seHh4eHh1vPxhvz9pE0M4327zQhUzMna73Ufd9Y0gNyseHh4eXh3vH9i7z42NDvV8u8kLVcyM9/777/3x3e7FzzV8s+Lh4eHh3e79x+76ss2MlvLtKi9UMQXeZz/70We6H/1le/ZtgqVXkJsfDw8Pb4ve/+quv9hd32Yzo8V8W+yFKmaZ92F3/Yg9fT6g5Apw8+Ph4eFt0fuf9u5D4fkvxGZHgHy731AvZqH3aXvXCPys6dyseHh4eHi3e/l9/c9310srHMHyre5QL+ZG7/fZuz8FOftXgYZvfjw8PLytefmf+f9md32fLRxieXR3z3VyYS//Legf6K6/sNvtfqq7oX65oZsfDw8Pb0ver3Tv0z+93+/fvPfee19++fKD4a+5nRnCeXQ3z3XyVrzD4XOf+dSn3v/e7gb74e5HX+uub9i74yL/a3f9H4v1YsLDw8NT8/L7bH6/ze+7+f33R/P7cX5fzu/Pyvmh7LlOHszLHy7JXxv5+edXd6N//oMPPvjdL1++/NLxyv93/v8P/e/nLjw8PLwNePn99OJDeyLv9yE818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDK/P+P4jnb7D01hqeAAAAAElFTkSuQmCC"}ngOnInit(){}onFileDropped(e){this.converterService.uploadHandler(e[0]).then(n=>{this.logger.info(n),n.startsWith("PHN2Z")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/SVG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/svg+xml;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/svg+xml;base64,"+n)),n.startsWith("iVBOR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/PNG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/png;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/png;base64,"+n)),n.startsWith("UklGR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/WEBP",detail:`Filename ${e[0].name}`}),this.viewer="data:image/webp;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/webp;base64,"+n))})}}return i.\u0275fac=function(e){return new(e||i)(qt(zh),qt(iv),qt(k1),qt(Mme))},i.\u0275cmp=Rr({type:i,selectors:[["app-converter"]],viewQuery:function(e,n){if(1&e&&Hr(Dme,5),2&e){let r;tr(r=nr())&&(n.myImg=r.first)}},decls:4,vars:3,consts:[["dropZoneDirective","",3,"fileDropped"],["pTemplate",""],["alt","drop here",3,"src"],["myImg",""]],template:function(e,n){1&e&&(Kn(0,"p-toast"),Xe(1,"p-splitter",0),_n("fileDropped",function(s){return n.onFileDropped(s)}),ze(2,Lme,2,0,"ng-template",1),ze(3,Pme,2,1,"ng-template",1),Ke()),2&e&&(we(1),To(Oo(2,Rme)))},dependencies:[hl,LA,E4,RS]}),i})();const Ome=function(i,t,e){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":i,"p-disabled":t,"p-focus":e}},Fme={provide:Xc,useExisting:Zr(()=>o5),multi:!0};let o5=(()=>{class i{constructor(e){this.cd=e,this.trueValue=!0,this.falseValue=!1,this.onChange=new qn,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(e.preventDefault(),this.toggle(e),n.focus())}onInputChange(e){this.readonly||this.updateModel(e,e.target.checked)}toggle(e){this.updateModel(e,!this.checked())}updateModel(e,n){this.modelValue=n?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue})}onFocus(e){this.focused=!0}onBlur(e){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[Xo([Fme])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(e,n){if(1&e){const r=Di();Xe(0,"div",0),_n("click",function(o){Lt(r);const l=Po(3);return Pt(n.onClick(o,l))}),Xe(1,"div",1)(2,"input",2,3),_n("change",function(o){return n.onInputChange(o)})("focus",function(o){return n.onFocus(o)})("blur",function(o){return n.onBlur(o)}),Ke()(),Kn(4,"span",4),Ke()}2&e&&(Yr(n.styleClass),de("ngClass",Yu(12,Ome,n.checked(),n.disabled,n.focused))("ngStyle",n.style),we(2),de("checked",n.checked())("disabled",n.disabled),Lr("aria-label",n.ariaLabel)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-checked",n.checked())("aria-labelledby",n.ariaLabelledBy))},dependencies:[Mo,ea],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),i})(),Nme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();function Bme(i,t){if(1&i&&(Xe(0,"span",10),bi(1),Ke()),2&i){const e=ye(2);Lr("id",e.id+"_header"),we(1),As(e.header)}}function zme(i,t){1&i&&qi(0)}function Vme(i,t){}function Ume(i,t){1&i&&ze(0,Vme,0,0,"ng-template")}function Hme(i,t){if(1&i){const e=Di();Xe(0,"button",11),_n("click",function(r){return Lt(e),Pt(ye(2).onIconClick(r))})("keydown.enter",function(r){return Lt(e),Pt(ye(2).onIconClick(r))}),Kn(1,"span"),Ke()}if(2&i){const e=ye(2);Lr("aria-label","collapse button")("id",e.id+"-label")("aria-controls",e.id+"-content")("aria-expanded",!e.collapsed),we(1),Yr(e.collapsed?e.expandIcon:e.collapseIcon)}}const Gme=function(i,t,e){return{"p-panel-icons-start":i,"p-panel-icons-end":t,"p-panel-icons-center":e}};function Wme(i,t){if(1&i){const e=Di();Xe(0,"div",6),_n("click",function(r){return Lt(e),Pt(ye().onHeaderClick(r))}),ze(1,Bme,2,2,"span",7),Mu(2,1),ze(3,zme,1,0,"ng-container",4),Xe(4,"div",8),ze(5,Ume,1,0,null,4),ze(6,Hme,2,6,"button",9),Ke()()}if(2&i){const e=ye();Lr("id",e.id+"-titlebar"),we(1),de("ngIf",e.header),we(2),de("ngTemplateOutlet",e.headerTemplate),we(1),de("ngClass",Yu(6,Gme,"start"===e.iconPos,"end"===e.iconPos,"center"===e.iconPos)),we(1),de("ngTemplateOutlet",e.iconTemplate),we(1),de("ngIf",e.toggleable)}}function jme(i,t){1&i&&qi(0)}function $me(i,t){1&i&&qi(0)}function qme(i,t){if(1&i&&(Xe(0,"div",12),Mu(1,2),ze(2,$me,1,0,"ng-container",4),Ke()),2&i){const e=ye();we(2),de("ngTemplateOutlet",e.footerTemplate)}}const Xme=["*",[["p-header"]],[["p-footer"]]],Yme=function(i,t){return{"p-panel p-component":!0,"p-panel-toggleable":i,"p-panel-expanded":t}},Kme=function(i){return{transitionParams:i,height:"0",opacity:"0"}},Zme=function(i){return{value:"hidden",params:i}},Qme=function(i){return{transitionParams:i,height:"*",opacity:"1"}},Jme=function(i){return{value:"visible",params:i}},eve=["*","p-header","p-footer"];let tve=0,nve=(()=>{class i{constructor(e){this.el=e,this.collapsed=!1,this.iconPos="end",this.expandIcon="pi pi-plus",this.collapseIcon="pi pi-minus",this.showHeader=!0,this.toggler="icon",this.collapsedChange=new qn,this.onBeforeToggle=new qn,this.onAfterToggle=new qn,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-panel-"+tve++}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"icons":this.iconTemplate=e.template}})}onHeaderClick(e){"header"===this.toggler&&this.toggle(e)}onIconClick(e){"icon"===this.toggler&&this.toggle(e)}toggle(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand(e):this.collapse(e)),e.preventDefault()}expand(e){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(e){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(e){this.animating=!1,this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed})}}return i.\u0275fac=function(e){return new(e||i)(qt(oi))},i.\u0275cmp=Rr({type:i,selectors:[["p-panel"]],contentQueries:function(e,n,r){if(1&e&&(dl(r,A1,5),dl(r,hl,4)),2&e){let s;tr(s=nr())&&(n.footerFacet=s.first),tr(s=nr())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{toggleable:"toggleable",header:"header",collapsed:"collapsed",style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:"showHeader",toggler:"toggler",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:eve,decls:7,vars:23,consts:[[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],["role","tablist",1,"p-panel-icons",3,"ngClass"],["type","button","class","p-panel-header-icon p-panel-toggler p-link","pRipple","","role","tab",3,"click","keydown.enter",4,"ngIf"],[1,"p-panel-title"],["type","button","pRipple","","role","tab",1,"p-panel-header-icon","p-panel-toggler","p-link",3,"click","keydown.enter"],[1,"p-panel-footer"]],template:function(e,n){1&e&&(Xf(Xme),Xe(0,"div",0),ze(1,Wme,7,10,"div",1),Xe(2,"div",2),_n("@panelContent.done",function(s){return n.onToggleDone(s)}),Xe(3,"div",3),Mu(4),ze(5,jme,1,0,"ng-container",4),Ke(),ze(6,qme,3,1,"div",5),Ke()()),2&e&&(Yr(n.styleClass),de("ngClass",Ts(12,Yme,n.toggleable,!n.collapsed&&n.toggleable))("ngStyle",n.style),Lr("id",n.id),we(1),de("ngIf",n.showHeader),we(1),de("@panelContent",n.collapsed?Li(17,Zme,Li(15,Kme,n.animating?n.transitionOptions:"0ms")):Li(21,Jme,Li(19,Qme,n.animating?n.transitionOptions:"0ms"))),Lr("id",n.id+"-content")("aria-hidden",n.collapsed)("aria-labelledby",n.id+"-titlebar"),we(3),de("ngTemplateOutlet",n.contentTemplate),we(1),de("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[Mo,Fo,El,ea,Ju],styles:[".p-panel-header{display:flex;align-items:center}.p-panel-title{line-height:1;order:1}.p-panel-header-icon{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-panel-toggleable.p-panel-expanded .p-toggleable-content:not(.ng-animating){overflow:visible}.p-panel-toggleable .p-toggleable-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[cy("panelContent",[A0("hidden",Tl({height:"0"})),A0("void",Tl({height:"{{height}}"}),{params:{height:"0"}}),A0("visible",Tl({height:"*"})),Qu("visible <=> hidden",[Yc("{{transitionParams}}")]),Qu("void => hidden",Yc("{{transitionParams}}")),Qu("void => visible",Yc("{{transitionParams}}"))])]},changeDetection:0}),i})(),ive=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za,yu,Za]}),i})(),rve=(()=>{class i{constructor(e,n){this._logger=e,this.preferenceService=n;let r=this.preferenceService.findOne("default");r&&(this.preferences=r)}ngOnInit(){}handleChange(e){this.preferenceService.store(this.preferences,n=>{n.full=this.preferences.full,n.grid=this.preferences.grid,n.applyRules=this.preferences.applyRules,n.debug=this.preferences.debug,n.info=this.preferences.info,n.maxHeight=this.preferences.maxHeight,n.maxWidth=this.preferences.maxWidth}),this.preferenceService.apply()}}return i.\u0275fac=function(e){return new(e||i)(qt(zh),qt(x4))},i.\u0275cmp=Rr({type:i,selectors:[["app-preference"]],decls:31,vars:8,consts:[["header","Render",3,"toggleable"],[1,"field-checkbox"],[3,"ngModel","ngModelChange","onChange"],["for","ny"],[1,"p-float-label"],["type","text","id","inputtext","pInputText","",3,"ngModel","ngModelChange","keyup"],["for","inputtext"]],template:function(e,n){1&e&&(Xe(0,"p-panel",0)(1,"div",1)(2,"p-inputSwitch",2),_n("ngModelChange",function(s){return n.preferences.grid=s})("onChange",function(s){return n.handleChange(s)}),Ke(),Xe(3,"label",3),bi(4,"Apply grid"),Ke()(),Xe(5,"div",1)(6,"p-inputSwitch",2),_n("ngModelChange",function(s){return n.preferences.info=s})("onChange",function(s){return n.handleChange(s)}),Ke(),Xe(7,"label",3),bi(8,"Apply display info"),Ke()(),Xe(9,"div",1)(10,"p-inputSwitch",2),_n("ngModelChange",function(s){return n.preferences.applyRules=s})("onChange",function(s){return n.handleChange(s)}),Ke(),Xe(11,"label",3),bi(12,"Run ruleset on each modification"),Ke()(),Xe(13,"div",1)(14,"p-inputSwitch",2),_n("ngModelChange",function(s){return n.preferences.debug=s})("onChange",function(s){return n.handleChange(s)}),Ke(),Xe(15,"label",3),bi(16,"Debug mode"),Ke()(),Xe(17,"div",1)(18,"p-inputSwitch",2),_n("ngModelChange",function(s){return n.preferences.full=s})("onChange",function(s){return n.handleChange(s)}),Ke(),Xe(19,"label",3),bi(20,"Export full graph"),Ke()(),Xe(21,"div",1)(22,"span",4)(23,"input",5),_n("ngModelChange",function(s){return n.preferences.maxWidth=s})("keyup",function(s){return n.handleChange(s)}),Ke(),Xe(24,"label",6),bi(25,"Max width for image export"),Ke()()(),Xe(26,"div",1)(27,"span",4)(28,"input",5),_n("ngModelChange",function(s){return n.preferences.maxHeight=s})("keyup",function(s){return n.handleChange(s)}),Ke(),Xe(29,"label",6),bi(30,"Max height for image export"),Ke()()()()),2&e&&(de("toggleable",!0),we(2),de("ngModel",n.preferences.grid),we(4),de("ngModel",n.preferences.info),we(4),de("ngModel",n.preferences.applyRules),we(4),de("ngModel",n.preferences.debug),we(4),de("ngModel",n.preferences.full),we(5),de("ngModel",n.preferences.maxWidth),we(5),de("ngModel",n.preferences.maxHeight))},dependencies:[hC,o5,C0,cC,ay,nve]}),i})();var sve=W(4826)();let ove=(()=>{class i{constructor(e){this.http=e}ngOnInit(){this.http.get("assets/about/about.md",{responseType:"text"}).subscribe(e=>{this.about=sve.render(e)})}}return i.\u0275fac=function(e){return new(e||i)(qt(t1))},i.\u0275cmp=Rr({type:i,selectors:[["app-about"]],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&Kn(0,"div",0),2&e&&de("innerHTML",n.about,Ka)}}),i})();const wf=1001,bd=1003,ed=1006,F0=1009,N0=1014,__=1015,sx=1016,AC=1020,Tg=1023,B0=1026,xC=1027,z0=3e3,bu=3001,vy="srgb",U0="srgb-linear";class EC{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Wh=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],H0=Math.PI/180,ox=180/Math.PI;function zp(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Wh[255&i]+Wh[i>>8&255]+Wh[i>>16&255]+Wh[i>>24&255]+"-"+Wh[255&t]+Wh[t>>8&255]+"-"+Wh[t>>16&15|64]+Wh[t>>24&255]+"-"+Wh[63&e|128]+Wh[e>>8&255]+"-"+Wh[e>>16&255]+Wh[e>>24&255]+Wh[255&n]+Wh[n>>8&255]+Wh[n>>16&255]+Wh[n>>24&255]).toLowerCase()}function Pu(i,t,e){return Math.max(t,Math.min(e,i))}function ax(i,t,e){return(1-e)*i+e*t}function eP(i){return 0==(i&i-1)&&0!==i}function GS(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function yy(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function $l(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}class sr{constructor(t=0,e=0){sr.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vp{constructor(){Vp.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,s,o,l,u,p){const v=this.elements;return v[0]=t,v[1]=r,v[2]=l,v[3]=e,v[4]=s,v[5]=u,v[6]=n,v[7]=o,v[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[3],u=n[6],p=n[1],v=n[4],w=n[7],I=n[2],T=n[5],k=n[8],H=r[0],X=r[3],ue=r[6],xe=r[1],be=r[4],Se=r[7],Ye=r[2],gt=r[5],zt=r[8];return s[0]=o*H+l*xe+u*Ye,s[3]=o*X+l*be+u*gt,s[6]=o*ue+l*Se+u*zt,s[1]=p*H+v*xe+w*Ye,s[4]=p*X+v*be+w*gt,s[7]=p*ue+v*Se+w*zt,s[2]=I*H+T*xe+k*Ye,s[5]=I*X+T*be+k*gt,s[8]=I*ue+T*Se+k*zt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8];return e*o*v-e*l*p-n*s*v+n*l*u+r*s*p-r*o*u}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],w=v*o-l*p,I=l*u-v*s,T=p*s-o*u,k=e*w+n*I+r*T;if(0===k)return this.set(0,0,0,0,0,0,0,0,0);const H=1/k;return t[0]=w*H,t[1]=(r*p-v*n)*H,t[2]=(l*n-r*o)*H,t[3]=I*H,t[4]=(v*e-r*u)*H,t[5]=(r*s-l*e)*H,t[6]=T*H,t[7]=(n*u-p*e)*H,t[8]=(o*e-n*s)*H,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,l){const u=Math.cos(s),p=Math.sin(s);return this.set(n*u,n*p,-n*(u*o+p*l)+o+t,-r*p,r*u,-r*(-p*o+u*l)+l+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],p=r[4],v=r[7];return r[0]=e*s+n*u,r[3]=e*o+n*p,r[6]=e*l+n*v,r[1]=-n*s+e*u,r[4]=-n*o+e*p,r[7]=-n*l+e*v,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function G5(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function lx(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function G0(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function WS(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const tP={[vy]:{[U0]:G0},[U0]:{[vy]:WS}},_m={legacyMode:!0,get workingColorSpace(){return U0},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,t,e){if(this.legacyMode||t===e||!t||!e)return i;if(tP[t]&&void 0!==tP[t][e]){const n=tP[t][e];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,t){return this.convert(i,this.workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this.workingColorSpace)}},W5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Cd={r:0,g:0,b:0},bm={h:0,s:0,l:0},jS={h:0,s:0,l:0};function nP(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}function $S(i,t){return t.r=i.r,t.g=i.g,t.b=i.b,t}let MC,ws=(()=>{class i{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=vy){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,_m.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=U0){return this.r=e,this.g=n,this.b=r,_m.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=U0){if(e=function JL(i,t){return(i%t+t)%t}(e,1),n=Pu(n,0,1),r=Pu(r,0,1),0===n)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,l=2*r-o;this.r=nP(l,o,e+1/3),this.g=nP(l,o,e),this.b=nP(l,o,e-1/3)}return _m.toWorkingColorSpace(this,s),this}setStyle(e,n=vy){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const u=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,_m.toWorkingColorSpace(this,n),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,_m.toWorkingColorSpace(this,n),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const p=parseFloat(o[1])/360,v=parseFloat(o[2])/100,w=parseFloat(o[3])/100;return r(o[4]),this.setHSL(p,v,w,n)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(3===l)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,_m.toWorkingColorSpace(this,n),this;if(6===l)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,_m.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=vy){const r=W5[e.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=G0(e.r),this.g=G0(e.g),this.b=G0(e.b),this}copyLinearToSRGB(e){return this.r=WS(e.r),this.g=WS(e.g),this.b=WS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=vy){return _m.fromWorkingColorSpace($S(this,Cd),e),Pu(255*Cd.r,0,255)<<16^Pu(255*Cd.g,0,255)<<8^Pu(255*Cd.b,0,255)<<0}getHexString(e=vy){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=U0){_m.fromWorkingColorSpace($S(this,Cd),n);const r=Cd.r,s=Cd.g,o=Cd.b,l=Math.max(r,s,o),u=Math.min(r,s,o);let p,v;const w=(u+l)/2;if(u===l)p=0,v=0;else{const I=l-u;switch(v=w<=.5?I/(l+u):I/(2-l-u),l){case r:p=(s-o)/I+(s<o?6:0);break;case s:p=(o-r)/I+2;break;case o:p=(r-s)/I+4}p/=6}return e.h=p,e.s=v,e.l=w,e}getRGB(e,n=U0){return _m.fromWorkingColorSpace($S(this,Cd),n),e.r=Cd.r,e.g=Cd.g,e.b=Cd.b,e}getStyle(e=vy){return _m.fromWorkingColorSpace($S(this,Cd),e),e!==vy?`color(${e} ${Cd.r} ${Cd.g} ${Cd.b})`:`rgb(${255*Cd.r|0},${255*Cd.g|0},${255*Cd.b|0})`}offsetHSL(e,n,r){return this.getHSL(bm),bm.h+=e,bm.s+=n,bm.l+=r,this.setHSL(bm.h,bm.s,bm.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(bm),e.getHSL(jS);const r=ax(bm.h,jS.h,n),s=ax(bm.s,jS.s,n),o=ax(bm.l,jS.l,n);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return i.NAMES=W5,i})();class j5{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===MC&&(MC=lx("canvas")),MC.width=t.width,MC.height=t.height;const n=MC.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=MC}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=lx("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*G0(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*G0(e[n]/255)):G0(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class DC{constructor(t=null){this.isSource=!0,this.uuid=zp(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)s.push(iP(r[o].isDataTexture?r[o].image:r[o]))}else s=iP(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function iP(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?j5.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _ye=0,b_=(()=>{class i extends EC{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=wf,s=wf,o=ed,l=1008,u=Tg,p=F0,v=1,w=z0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_ye++}),this.uuid=zp(),this.name="",this.source=new DC(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=v,this.format=u,this.internalFormat=null,this.type=p,this.offset=new sr(0,0),this.repeat=new sr(1,1),this.center=new sr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vp,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=w,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case wf:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case wf:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i})();class Bl{constructor(t=0,e=0,n=0,r=1){Bl.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const u=t.elements,p=u[0],v=u[4],w=u[8],I=u[1],T=u[5],k=u[9],H=u[2],X=u[6],ue=u[10];if(Math.abs(v-I)<.01&&Math.abs(w-H)<.01&&Math.abs(k-X)<.01){if(Math.abs(v+I)<.1&&Math.abs(w+H)<.1&&Math.abs(k+X)<.1&&Math.abs(p+T+ue-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const be=(p+1)/2,Se=(T+1)/2,Ye=(ue+1)/2,gt=(v+I)/4,zt=(w+H)/4,it=(k+X)/4;return be>Se&&be>Ye?be<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(be),r=gt/n,s=zt/n):Se>Ye?Se<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(Se),n=gt/r,s=it/r):Ye<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(Ye),n=zt/s,r=it/s),this.set(n,r,s,e),this}let xe=Math.sqrt((X-k)*(X-k)+(w-H)*(w-H)+(I-v)*(I-v));return Math.abs(xe)<.001&&(xe=1),this.x=(X-k)/xe,this.y=(w-H)/xe,this.z=(I-v)/xe,this.w=Math.acos((p+T+ue-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class W0 extends EC{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Bl(0,0,t,e),this.scissorTest=!1,this.viewport=new Bl(0,0,t,e),this.texture=new b_({width:t,height:e,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ed,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new DC(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class rP extends b_{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=bd,this.minFilter=bd,this.wrapR=wf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $5 extends b_{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=bd,this.minFilter=bd,this.wrapR=wf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Up{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,o,l){let u=n[r+0],p=n[r+1],v=n[r+2],w=n[r+3];const I=s[o+0],T=s[o+1],k=s[o+2],H=s[o+3];if(0===l)return t[e+0]=u,t[e+1]=p,t[e+2]=v,void(t[e+3]=w);if(1===l)return t[e+0]=I,t[e+1]=T,t[e+2]=k,void(t[e+3]=H);if(w!==H||u!==I||p!==T||v!==k){let X=1-l;const ue=u*I+p*T+v*k+w*H,xe=ue>=0?1:-1,be=1-ue*ue;if(be>Number.EPSILON){const Ye=Math.sqrt(be),gt=Math.atan2(Ye,ue*xe);X=Math.sin(X*gt)/Ye,l=Math.sin(l*gt)/Ye}const Se=l*xe;if(u=u*X+I*Se,p=p*X+T*Se,v=v*X+k*Se,w=w*X+H*Se,X===1-l){const Ye=1/Math.sqrt(u*u+p*p+v*v+w*w);u*=Ye,p*=Ye,v*=Ye,w*=Ye}}t[e]=u,t[e+1]=p,t[e+2]=v,t[e+3]=w}static multiplyQuaternionsFlat(t,e,n,r,s,o){const l=n[r],u=n[r+1],p=n[r+2],v=n[r+3],w=s[o],I=s[o+1],T=s[o+2],k=s[o+3];return t[e]=l*k+v*w+u*T-p*I,t[e+1]=u*k+v*I+p*w-l*T,t[e+2]=p*k+v*T+l*I-u*w,t[e+3]=v*k-l*w-u*I-p*T,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,s=t._z,o=t._order,l=Math.cos,u=Math.sin,p=l(n/2),v=l(r/2),w=l(s/2),I=u(n/2),T=u(r/2),k=u(s/2);switch(o){case"XYZ":this._x=I*v*w+p*T*k,this._y=p*T*w-I*v*k,this._z=p*v*k+I*T*w,this._w=p*v*w-I*T*k;break;case"YXZ":this._x=I*v*w+p*T*k,this._y=p*T*w-I*v*k,this._z=p*v*k-I*T*w,this._w=p*v*w+I*T*k;break;case"ZXY":this._x=I*v*w-p*T*k,this._y=p*T*w+I*v*k,this._z=p*v*k+I*T*w,this._w=p*v*w-I*T*k;break;case"ZYX":this._x=I*v*w-p*T*k,this._y=p*T*w+I*v*k,this._z=p*v*k-I*T*w,this._w=p*v*w+I*T*k;break;case"YZX":this._x=I*v*w+p*T*k,this._y=p*T*w+I*v*k,this._z=p*v*k-I*T*w,this._w=p*v*w-I*T*k;break;case"XZY":this._x=I*v*w-p*T*k,this._y=p*T*w-I*v*k,this._z=p*v*k+I*T*w,this._w=p*v*w+I*T*k;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],l=e[5],u=e[9],p=e[2],v=e[6],w=e[10],I=n+l+w;if(I>0){const T=.5/Math.sqrt(I+1);this._w=.25/T,this._x=(v-u)*T,this._y=(s-p)*T,this._z=(o-r)*T}else if(n>l&&n>w){const T=2*Math.sqrt(1+n-l-w);this._w=(v-u)/T,this._x=.25*T,this._y=(r+o)/T,this._z=(s+p)/T}else if(l>w){const T=2*Math.sqrt(1+l-n-w);this._w=(s-p)/T,this._x=(r+o)/T,this._y=.25*T,this._z=(u+v)/T}else{const T=2*Math.sqrt(1+w-n-l);this._w=(o-r)/T,this._x=(s+p)/T,this._y=(u+v)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Pu(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,l=e._x,u=e._y,p=e._z,v=e._w;return this._x=n*v+o*l+r*p-s*u,this._y=r*v+o*u+s*l-n*p,this._z=s*v+o*p+n*u-r*l,this._w=o*v-n*l-r*u-s*p,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*t._w+n*t._x+r*t._y+s*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const T=1-e;return this._w=T*o+e*this._w,this._x=T*n+e*this._x,this._y=T*r+e*this._y,this._z=T*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(u),v=Math.atan2(p,l),w=Math.sin((1-e)*v)/p,I=Math.sin(e*v)/p;return this._w=o*w+this._w*I,this._x=n*w+this._x*I,this._y=r*w+this._y*I,this._z=s*w+this._z*I,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(s),n*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Jt{constructor(t=0,e=0,n=0){Jt.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(q5.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(q5.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,l=t.z,u=t.w,p=u*e+o*r-l*n,v=u*n+l*e-s*r,w=u*r+s*n-o*e,I=-s*e-o*n-l*r;return this.x=p*u+I*-s+v*-l-w*-o,this.y=v*u+I*-o+w*-s-p*-l,this.z=w*u+I*-l+p*-o-v*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,l=e.y,u=e.z;return this.x=r*u-s*l,this.y=s*o-n*u,this.z=n*l-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return sP.copy(this).projectOnVector(t),this.sub(sP)}reflect(t){return this.sub(sP.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Pu(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sP=new Jt,q5=new Up;class C_{constructor(t=new Jt(1/0,1/0,1/0),e=new Jt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.length;u<p;u+=3){const v=t[u],w=t[u+1],I=t[u+2];v<e&&(e=v),w<n&&(n=w),I<r&&(r=I),v>s&&(s=v),w>o&&(o=w),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.count;u<p;u++){const v=t.getX(u),w=t.getY(u),I=t.getZ(u);v<e&&(e=v),w<n&&(n=w),I<r&&(r=I),v>s&&(s=v),w>o&&(o=w),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=j0.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const s=n.attributes.position;for(let o=0,l=s.count;o<l;o++)j0.fromBufferAttribute(s,o).applyMatrix4(t.matrixWorld),this.expandByPoint(j0)}else null===n.boundingBox&&n.computeBoundingBox(),oP.copy(n.boundingBox),oP.applyMatrix4(t.matrixWorld),this.union(oP);const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,j0),j0.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(cx),qS.subVectors(this.max,cx),LC.subVectors(t.a,cx),PC.subVectors(t.b,cx),RC.subVectors(t.c,cx),w_.subVectors(PC,LC),A_.subVectors(RC,PC),$0.subVectors(LC,RC);let e=[0,-w_.z,w_.y,0,-A_.z,A_.y,0,-$0.z,$0.y,w_.z,0,-w_.x,A_.z,0,-A_.x,$0.z,0,-$0.x,-w_.y,w_.x,0,-A_.y,A_.x,0,-$0.y,$0.x,0];return!(!aP(e,LC,PC,RC,qS)||(e=[1,0,0,0,1,0,0,0,1],!aP(e,LC,PC,RC,qS)))&&(XS.crossVectors(w_,A_),e=[XS.x,XS.y,XS.z],aP(e,LC,PC,RC,qS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return j0.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(j0).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(_y[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),_y[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),_y[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),_y[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),_y[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),_y[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),_y[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),_y[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(_y)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const _y=[new Jt,new Jt,new Jt,new Jt,new Jt,new Jt,new Jt,new Jt],j0=new Jt,oP=new C_,LC=new Jt,PC=new Jt,RC=new Jt,w_=new Jt,A_=new Jt,$0=new Jt,cx=new Jt,qS=new Jt,XS=new Jt,q0=new Jt;function aP(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){q0.fromArray(i,s);const l=r.x*Math.abs(q0.x)+r.y*Math.abs(q0.y)+r.z*Math.abs(q0.z),u=t.dot(q0),p=e.dot(q0),v=n.dot(q0);if(Math.max(-Math.max(u,p,v),Math.min(u,p,v))>l)return!1}return!0}const bye=new C_,ux=new Jt,lP=new Jt;class kC{constructor(t=new Jt,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):bye.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ux.subVectors(t,this.center);const e=ux.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(ux,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(lP.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ux.copy(t.center).add(lP)),this.expandByPoint(ux.copy(t.center).sub(lP))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const by=new Jt,cP=new Jt,YS=new Jt,x_=new Jt,uP=new Jt,KS=new Jt,dP=new Jt;class ZS{constructor(t=new Jt,e=new Jt(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,by)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=by.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(by.copy(this.direction).multiplyScalar(e).add(this.origin),by.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){cP.copy(t).add(e).multiplyScalar(.5),YS.copy(e).sub(t).normalize(),x_.copy(this.origin).sub(cP);const s=.5*t.distanceTo(e),o=-this.direction.dot(YS),l=x_.dot(this.direction),u=-x_.dot(YS),p=x_.lengthSq(),v=Math.abs(1-o*o);let w,I,T,k;if(v>0)if(w=o*u-l,I=o*l-u,k=s*v,w>=0)if(I>=-k)if(I<=k){const H=1/v;w*=H,I*=H,T=w*(w+o*I+2*l)+I*(o*w+I+2*u)+p}else I=s,w=Math.max(0,-(o*I+l)),T=-w*w+I*(I+2*u)+p;else I=-s,w=Math.max(0,-(o*I+l)),T=-w*w+I*(I+2*u)+p;else I<=-k?(w=Math.max(0,-(-o*s+l)),I=w>0?-s:Math.min(Math.max(-s,-u),s),T=-w*w+I*(I+2*u)+p):I<=k?(w=0,I=Math.min(Math.max(-s,-u),s),T=I*(I+2*u)+p):(w=Math.max(0,-(o*s+l)),I=w>0?s:Math.min(Math.max(-s,-u),s),T=-w*w+I*(I+2*u)+p);else I=o>0?-s:s,w=Math.max(0,-(o*I+l)),T=-w*w+I*(I+2*u)+p;return n&&n.copy(this.direction).multiplyScalar(w).add(this.origin),r&&r.copy(YS).multiplyScalar(I).add(cP),T}intersectSphere(t,e){by.subVectors(t.center,this.origin);const n=by.dot(this.direction),r=by.dot(by)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,u=n+o;return l<0&&u<0?null:this.at(l<0?u:l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,l,u;const p=1/this.direction.x,v=1/this.direction.y,w=1/this.direction.z,I=this.origin;return p>=0?(n=(t.min.x-I.x)*p,r=(t.max.x-I.x)*p):(n=(t.max.x-I.x)*p,r=(t.min.x-I.x)*p),v>=0?(s=(t.min.y-I.y)*v,o=(t.max.y-I.y)*v):(s=(t.max.y-I.y)*v,o=(t.min.y-I.y)*v),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),w>=0?(l=(t.min.z-I.z)*w,u=(t.max.z-I.z)*w):(l=(t.max.z-I.z)*w,u=(t.min.z-I.z)*w),n>u||l>r)||((l>n||n!=n)&&(n=l),(u<r||r!=r)&&(r=u),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,by)}intersectTriangle(t,e,n,r,s){uP.subVectors(e,t),KS.subVectors(n,t),dP.crossVectors(uP,KS);let l,o=this.direction.dot(dP);if(o>0){if(r)return null;l=1}else{if(!(o<0))return null;l=-1,o=-o}x_.subVectors(this.origin,t);const u=l*this.direction.dot(KS.crossVectors(x_,KS));if(u<0)return null;const p=l*this.direction.dot(uP.cross(x_));if(p<0||u+p>o)return null;const v=-l*x_.dot(dP);return v<0?null:this.at(v/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Uo{constructor(){Uo.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,s,o,l,u,p,v,w,I,T,k,H,X){const ue=this.elements;return ue[0]=t,ue[4]=e,ue[8]=n,ue[12]=r,ue[1]=s,ue[5]=o,ue[9]=l,ue[13]=u,ue[2]=p,ue[6]=v,ue[10]=w,ue[14]=I,ue[3]=T,ue[7]=k,ue[11]=H,ue[15]=X,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Uo).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/OC.setFromMatrixColumn(t,0).length(),s=1/OC.setFromMatrixColumn(t,1).length(),o=1/OC.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(r),p=Math.sin(r),v=Math.cos(s),w=Math.sin(s);if("XYZ"===t.order){const I=o*v,T=o*w,k=l*v,H=l*w;e[0]=u*v,e[4]=-u*w,e[8]=p,e[1]=T+k*p,e[5]=I-H*p,e[9]=-l*u,e[2]=H-I*p,e[6]=k+T*p,e[10]=o*u}else if("YXZ"===t.order){const I=u*v,T=u*w,k=p*v,H=p*w;e[0]=I+H*l,e[4]=k*l-T,e[8]=o*p,e[1]=o*w,e[5]=o*v,e[9]=-l,e[2]=T*l-k,e[6]=H+I*l,e[10]=o*u}else if("ZXY"===t.order){const I=u*v,T=u*w,k=p*v,H=p*w;e[0]=I-H*l,e[4]=-o*w,e[8]=k+T*l,e[1]=T+k*l,e[5]=o*v,e[9]=H-I*l,e[2]=-o*p,e[6]=l,e[10]=o*u}else if("ZYX"===t.order){const I=o*v,T=o*w,k=l*v,H=l*w;e[0]=u*v,e[4]=k*p-T,e[8]=I*p+H,e[1]=u*w,e[5]=H*p+I,e[9]=T*p-k,e[2]=-p,e[6]=l*u,e[10]=o*u}else if("YZX"===t.order){const I=o*u,T=o*p,k=l*u,H=l*p;e[0]=u*v,e[4]=H-I*w,e[8]=k*w+T,e[1]=w,e[5]=o*v,e[9]=-l*v,e[2]=-p*v,e[6]=T*w+k,e[10]=I-H*w}else if("XZY"===t.order){const I=o*u,T=o*p,k=l*u,H=l*p;e[0]=u*v,e[4]=-w,e[8]=p*v,e[1]=I*w+H,e[5]=o*v,e[9]=T*w-k,e[2]=k*w-T,e[6]=l*v,e[10]=H*w+I}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Cye,t,wye)}lookAt(t,e,n){const r=this.elements;return Hp.subVectors(t,e),0===Hp.lengthSq()&&(Hp.z=1),Hp.normalize(),I_.crossVectors(n,Hp),0===I_.lengthSq()&&(1===Math.abs(n.z)?Hp.x+=1e-4:Hp.z+=1e-4,Hp.normalize(),I_.crossVectors(n,Hp)),I_.normalize(),QS.crossVectors(Hp,I_),r[0]=I_.x,r[4]=QS.x,r[8]=Hp.x,r[1]=I_.y,r[5]=QS.y,r[9]=Hp.y,r[2]=I_.z,r[6]=QS.z,r[10]=Hp.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[4],u=n[8],p=n[12],v=n[1],w=n[5],I=n[9],T=n[13],k=n[2],H=n[6],X=n[10],ue=n[14],xe=n[3],be=n[7],Se=n[11],Ye=n[15],gt=r[0],zt=r[4],it=r[8],Tt=r[12],un=r[1],ei=r[5],fi=r[9],ni=r[13],Bn=r[2],Zn=r[6],Rn=r[10],ti=r[14],Yn=r[3],kn=r[7],Qn=r[11],or=r[15];return s[0]=o*gt+l*un+u*Bn+p*Yn,s[4]=o*zt+l*ei+u*Zn+p*kn,s[8]=o*it+l*fi+u*Rn+p*Qn,s[12]=o*Tt+l*ni+u*ti+p*or,s[1]=v*gt+w*un+I*Bn+T*Yn,s[5]=v*zt+w*ei+I*Zn+T*kn,s[9]=v*it+w*fi+I*Rn+T*Qn,s[13]=v*Tt+w*ni+I*ti+T*or,s[2]=k*gt+H*un+X*Bn+ue*Yn,s[6]=k*zt+H*ei+X*Zn+ue*kn,s[10]=k*it+H*fi+X*Rn+ue*Qn,s[14]=k*Tt+H*ni+X*ti+ue*or,s[3]=xe*gt+be*un+Se*Bn+Ye*Yn,s[7]=xe*zt+be*ei+Se*Zn+Ye*kn,s[11]=xe*it+be*fi+Se*Rn+Ye*Qn,s[15]=xe*Tt+be*ni+Se*ti+Ye*or,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],l=t[5],u=t[9],p=t[13],v=t[2],w=t[6],I=t[10],T=t[14];return t[3]*(+s*u*w-r*p*w-s*l*I+n*p*I+r*l*T-n*u*T)+t[7]*(+e*u*T-e*p*I+s*o*I-r*o*T+r*p*v-s*u*v)+t[11]*(+e*p*w-e*l*T-s*o*w+n*o*T+s*l*v-n*p*v)+t[15]*(-r*l*v-e*u*w+e*l*I+r*o*w-n*o*I+n*u*v)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],w=t[9],I=t[10],T=t[11],k=t[12],H=t[13],X=t[14],ue=t[15],xe=w*X*p-H*I*p+H*u*T-l*X*T-w*u*ue+l*I*ue,be=k*I*p-v*X*p-k*u*T+o*X*T+v*u*ue-o*I*ue,Se=v*H*p-k*w*p+k*l*T-o*H*T-v*l*ue+o*w*ue,Ye=k*w*u-v*H*u-k*l*I+o*H*I+v*l*X-o*w*X,gt=e*xe+n*be+r*Se+s*Ye;if(0===gt)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const zt=1/gt;return t[0]=xe*zt,t[1]=(H*I*s-w*X*s-H*r*T+n*X*T+w*r*ue-n*I*ue)*zt,t[2]=(l*X*s-H*u*s+H*r*p-n*X*p-l*r*ue+n*u*ue)*zt,t[3]=(w*u*s-l*I*s-w*r*p+n*I*p+l*r*T-n*u*T)*zt,t[4]=be*zt,t[5]=(v*X*s-k*I*s+k*r*T-e*X*T-v*r*ue+e*I*ue)*zt,t[6]=(k*u*s-o*X*s-k*r*p+e*X*p+o*r*ue-e*u*ue)*zt,t[7]=(o*I*s-v*u*s+v*r*p-e*I*p-o*r*T+e*u*T)*zt,t[8]=Se*zt,t[9]=(k*w*s-v*H*s-k*n*T+e*H*T+v*n*ue-e*w*ue)*zt,t[10]=(o*H*s-k*l*s+k*n*p-e*H*p-o*n*ue+e*l*ue)*zt,t[11]=(v*l*s-o*w*s-v*n*p+e*w*p+o*n*T-e*l*T)*zt,t[12]=Ye*zt,t[13]=(v*H*r-k*w*r+k*n*I-e*H*I-v*n*X+e*w*X)*zt,t[14]=(k*l*r-o*H*r-k*n*u+e*H*u+o*n*X-e*l*X)*zt,t[15]=(o*w*r-v*l*r+v*n*u-e*w*u-o*n*I+e*l*I)*zt,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,l=t.y,u=t.z,p=s*o,v=s*l;return this.set(p*o+n,p*l-r*u,p*u+r*l,0,p*l+r*u,v*l+n,v*u-r*o,0,p*u-r*l,v*u+r*o,s*u*u+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,l=e._z,u=e._w,p=s+s,v=o+o,w=l+l,I=s*p,T=s*v,k=s*w,H=o*v,X=o*w,ue=l*w,xe=u*p,be=u*v,Se=u*w,Ye=n.x,gt=n.y,zt=n.z;return r[0]=(1-(H+ue))*Ye,r[1]=(T+Se)*Ye,r[2]=(k-be)*Ye,r[3]=0,r[4]=(T-Se)*gt,r[5]=(1-(I+ue))*gt,r[6]=(X+xe)*gt,r[7]=0,r[8]=(k+be)*zt,r[9]=(X-xe)*zt,r[10]=(1-(I+H))*zt,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=OC.set(r[0],r[1],r[2]).length();const o=OC.set(r[4],r[5],r[6]).length(),l=OC.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],Cm.copy(this);const p=1/s,v=1/o,w=1/l;return Cm.elements[0]*=p,Cm.elements[1]*=p,Cm.elements[2]*=p,Cm.elements[4]*=v,Cm.elements[5]*=v,Cm.elements[6]*=v,Cm.elements[8]*=w,Cm.elements[9]*=w,Cm.elements[10]*=w,e.setFromRotationMatrix(Cm),n.x=s,n.y=o,n.z=l,this}makePerspective(t,e,n,r,s,o){const l=this.elements,p=2*s/(n-r),v=(e+t)/(e-t),w=(n+r)/(n-r),I=-(o+s)/(o-s),T=-2*o*s/(o-s);return l[0]=2*s/(e-t),l[4]=0,l[8]=v,l[12]=0,l[1]=0,l[5]=p,l[9]=w,l[13]=0,l[2]=0,l[6]=0,l[10]=I,l[14]=T,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,s,o){const l=this.elements,u=1/(e-t),p=1/(n-r),v=1/(o-s),w=(e+t)*u,I=(n+r)*p,T=(o+s)*v;return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-w,l[1]=0,l[5]=2*p,l[9]=0,l[13]=-I,l[2]=0,l[6]=0,l[10]=-2*v,l[14]=-T,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const OC=new Jt,Cm=new Uo,Cye=new Jt(0,0,0),wye=new Jt(1,1,1),I_=new Jt,QS=new Jt,Hp=new Jt,X5=new Uo,Y5=new Up;let Aye=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],p=s[1],v=s[5],w=s[9],I=s[2],T=s[6],k=s[10];switch(n){case"XYZ":this._y=Math.asin(Pu(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-w,k),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(T,v),this._z=0);break;case"YXZ":this._x=Math.asin(-Pu(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(u,k),this._z=Math.atan2(p,v)):(this._y=Math.atan2(-I,o),this._z=0);break;case"ZXY":this._x=Math.asin(Pu(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(-I,k),this._z=Math.atan2(-l,v)):(this._y=0,this._z=Math.atan2(p,o));break;case"ZYX":this._y=Math.asin(-Pu(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(T,k),this._z=Math.atan2(p,o)):(this._x=0,this._z=Math.atan2(-l,v));break;case"YZX":this._z=Math.asin(Pu(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-w,v),this._y=Math.atan2(-I,o)):(this._x=0,this._y=Math.atan2(u,k));break;case"XZY":this._z=Math.asin(-Pu(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(T,v),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-w,k),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return X5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(X5,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Y5.setFromEuler(this),this.setFromQuaternion(Y5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return i.DefaultOrder="XYZ",i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i})();class hP{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let xye=0;const K5=new Jt,FC=new Up,Cy=new Uo,JS=new Jt,dx=new Jt,Iye=new Jt,Sye=new Up,Z5=new Jt(1,0,0),Q5=new Jt(0,1,0),J5=new Jt(0,0,1),Eye={type:"added"},eG={type:"removed"};let Qf=(()=>{class i extends EC{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:xye++}),this.uuid=zp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DefaultUp.clone();const e=new Jt,n=new Aye,r=new Up,s=new Jt(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function l(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Uo},normalMatrix:{value:new Vp}}),this.matrix=new Uo,this.matrixWorld=new Uo,this.matrixAutoUpdate=i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DefaultMatrixWorldAutoUpdate,this.layers=new hP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return FC.setFromAxisAngle(e,n),this.quaternion.multiply(FC),this}rotateOnWorldAxis(e,n){return FC.setFromAxisAngle(e,n),this.quaternion.premultiply(FC),this}rotateX(e){return this.rotateOnAxis(Z5,e)}rotateY(e){return this.rotateOnAxis(Q5,e)}rotateZ(e){return this.rotateOnAxis(J5,e)}translateOnAxis(e,n){return K5.copy(e).applyQuaternion(this.quaternion),this.position.add(K5.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Z5,e)}translateY(e){return this.translateOnAxis(Q5,e)}translateZ(e){return this.translateOnAxis(J5,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Cy.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?JS.copy(e):JS.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),dx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cy.lookAt(dx,JS,this.up):Cy.lookAt(JS,dx,this.up),this.quaternion.setFromRotationMatrix(Cy),s&&(Cy.extractRotation(s.matrixWorld),FC.setFromRotationMatrix(Cy),this.quaternion.premultiply(FC.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Eye)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(eG)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(eG)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Cy.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Cy.multiply(e.parent.matrixWorld)),e.applyMatrix4(Cy),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const l=this.children[r].getObjectByProperty(e,n);if(void 0!==l)return l}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dx,e,Iye),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(dx,Sye,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===e)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];!0===u.matrixWorldAutoUpdate&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(u,p){return void 0===u[p.uuid]&&(u[p.uuid]=p.toJSON(e)),p.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(void 0!==u&&void 0!==u.shapes){const p=u.shapes;if(Array.isArray(p))for(let v=0,w=p.length;v<w;v++)o(e.shapes,p[v]);else o(e.shapes,p)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const u=[];for(let p=0,v=this.material.length;p<v;p++)u.push(o(e.materials,this.material[p]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++)s.animations.push(o(e.animations,this.animations[u]))}if(n){const u=l(e.geometries),p=l(e.materials),v=l(e.textures),w=l(e.images),I=l(e.shapes),T=l(e.skeletons),k=l(e.animations),H=l(e.nodes);u.length>0&&(r.geometries=u),p.length>0&&(r.materials=p),v.length>0&&(r.textures=v),w.length>0&&(r.images=w),I.length>0&&(r.shapes=I),T.length>0&&(r.skeletons=T),k.length>0&&(r.animations=k),H.length>0&&(r.nodes=H)}return r.object=s,r;function l(u){const p=[];for(const v in u){const w=u[v];delete w.metadata,p.push(w)}return p}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DefaultUp=new Jt(0,1,0),i.DefaultMatrixAutoUpdate=!0,i.DefaultMatrixWorldAutoUpdate=!0,i})();const wm=new Jt,wy=new Jt,fP=new Jt,Ay=new Jt,NC=new Jt,BC=new Jt,tG=new Jt,pP=new Jt,gP=new Jt,mP=new Jt;class Am{constructor(t=new Jt,e=new Jt,n=new Jt){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),wm.subVectors(t,e),r.cross(wm);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){wm.subVectors(r,e),wy.subVectors(n,e),fP.subVectors(t,e);const o=wm.dot(wm),l=wm.dot(wy),u=wm.dot(fP),p=wy.dot(wy),v=wy.dot(fP),w=o*p-l*l;if(0===w)return s.set(-2,-1,-1);const I=1/w,T=(p*u-l*v)*I,k=(o*v-l*u)*I;return s.set(1-T-k,k,T)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,Ay),Ay.x>=0&&Ay.y>=0&&Ay.x+Ay.y<=1}static getUV(t,e,n,r,s,o,l,u){return this.getBarycoord(t,e,n,r,Ay),u.set(0,0),u.addScaledVector(s,Ay.x),u.addScaledVector(o,Ay.y),u.addScaledVector(l,Ay.z),u}static isFrontFacing(t,e,n,r){return wm.subVectors(n,e),wy.subVectors(t,e),wm.cross(wy).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return wm.subVectors(this.c,this.b),wy.subVectors(this.a,this.b),.5*wm.cross(wy).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Am.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Am.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,s){return Am.getUV(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return Am.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Am.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,l;NC.subVectors(r,n),BC.subVectors(s,n),pP.subVectors(t,n);const u=NC.dot(pP),p=BC.dot(pP);if(u<=0&&p<=0)return e.copy(n);gP.subVectors(t,r);const v=NC.dot(gP),w=BC.dot(gP);if(v>=0&&w<=v)return e.copy(r);const I=u*w-v*p;if(I<=0&&u>=0&&v<=0)return o=u/(u-v),e.copy(n).addScaledVector(NC,o);mP.subVectors(t,s);const T=NC.dot(mP),k=BC.dot(mP);if(k>=0&&T<=k)return e.copy(s);const H=T*p-u*k;if(H<=0&&p>=0&&k<=0)return l=p/(p-k),e.copy(n).addScaledVector(BC,l);const X=v*k-T*w;if(X<=0&&w-v>=0&&T-k>=0)return tG.subVectors(s,r),l=(w-v)/(w-v+(T-k)),e.copy(r).addScaledVector(tG,l);const ue=1/(X+H+I);return o=H*ue,l=I*ue,e.copy(n).addScaledVector(NC,o).addScaledVector(BC,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Tye=0;class X0 extends EC{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Tye++}),this.uuid=zp(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Y0 extends X0{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ws(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const td=new Jt,eE=new sr;class Hd{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)eE.fromBufferAttribute(this,e),eE.applyMatrix3(t),this.setXY(e,eE.x,eE.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)td.fromBufferAttribute(this,e),td.applyMatrix3(t),this.setXYZ(e,td.x,td.y,td.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)td.fromBufferAttribute(this,e),td.applyMatrix4(t),this.setXYZ(e,td.x,td.y,td.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)td.fromBufferAttribute(this,e),td.applyNormalMatrix(t),this.setXYZ(e,td.x,td.y,td.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)td.fromBufferAttribute(this,e),td.transformDirection(t),this.setXYZ(e,td.x,td.y,td.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=yy(e,this.array)),e}setX(t,e){return this.normalized&&(e=$l(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=yy(e,this.array)),e}setY(t,e){return this.normalized&&(e=$l(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=yy(e,this.array)),e}setZ(t,e){return this.normalized&&(e=$l(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=yy(e,this.array)),e}setW(t,e){return this.normalized&&(e=$l(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=$l(e,this.array),n=$l(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=$l(e,this.array),n=$l(n,this.array),r=$l(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=$l(e,this.array),n=$l(n,this.array),r=$l(r,this.array),s=$l(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class nG extends Hd{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class iG extends Hd{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class Ls extends Hd{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Mye=0;const Mg=new Uo,vP=new Qf,zC=new Jt,Gp=new C_,hx=new C_,Gd=new Jt;class ha extends EC{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Mye++}),this.uuid=zp(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(G5(t)?iG:nG)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Vp).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Mg.makeRotationFromQuaternion(t),this.applyMatrix4(Mg),this}rotateX(t){return Mg.makeRotationX(t),this.applyMatrix4(Mg),this}rotateY(t){return Mg.makeRotationY(t),this.applyMatrix4(Mg),this}rotateZ(t){return Mg.makeRotationZ(t),this.applyMatrix4(Mg),this}translate(t,e,n){return Mg.makeTranslation(t,e,n),this.applyMatrix4(Mg),this}scale(t,e,n){return Mg.makeScale(t,e,n),this.applyMatrix4(Mg),this}lookAt(t){return vP.lookAt(t),vP.updateMatrix(),this.applyMatrix4(vP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zC).negate(),this.translate(zC.x,zC.y,zC.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ls(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new C_);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Jt(-1/0,-1/0,-1/0),new Jt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)Gp.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(Gd.addVectors(this.boundingBox.min,Gp.min),this.boundingBox.expandByPoint(Gd),Gd.addVectors(this.boundingBox.max,Gp.max),this.boundingBox.expandByPoint(Gd)):(this.boundingBox.expandByPoint(Gp.min),this.boundingBox.expandByPoint(Gp.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new kC);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Jt,1/0);if(t){const n=this.boundingSphere.center;if(Gp.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)hx.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(Gd.addVectors(Gp.min,hx.min),Gp.expandByPoint(Gd),Gd.addVectors(Gp.max,hx.max),Gp.expandByPoint(Gd)):(Gp.expandByPoint(hx.min),Gp.expandByPoint(hx.max));Gp.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)Gd.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(Gd));if(e)for(let s=0,o=e.length;s<o;s++){const l=e[s],u=this.morphTargetsRelative;for(let p=0,v=l.count;p<v;p++)Gd.fromBufferAttribute(l,p),u&&(zC.fromBufferAttribute(t,p),Gd.add(zC)),r=Math.max(r,n.distanceToSquared(Gd))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,l=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Hd(new Float32Array(4*l),4));const u=this.getAttribute("tangent").array,p=[],v=[];for(let un=0;un<l;un++)p[un]=new Jt,v[un]=new Jt;const w=new Jt,I=new Jt,T=new Jt,k=new sr,H=new sr,X=new sr,ue=new Jt,xe=new Jt;function be(un,ei,fi){w.fromArray(r,3*un),I.fromArray(r,3*ei),T.fromArray(r,3*fi),k.fromArray(o,2*un),H.fromArray(o,2*ei),X.fromArray(o,2*fi),I.sub(w),T.sub(w),H.sub(k),X.sub(k);const ni=1/(H.x*X.y-X.x*H.y);!isFinite(ni)||(ue.copy(I).multiplyScalar(X.y).addScaledVector(T,-H.y).multiplyScalar(ni),xe.copy(T).multiplyScalar(H.x).addScaledVector(I,-X.x).multiplyScalar(ni),p[un].add(ue),p[ei].add(ue),p[fi].add(ue),v[un].add(xe),v[ei].add(xe),v[fi].add(xe))}let Se=this.groups;0===Se.length&&(Se=[{start:0,count:n.length}]);for(let un=0,ei=Se.length;un<ei;++un){const fi=Se[un],ni=fi.start;for(let Zn=ni,Rn=ni+fi.count;Zn<Rn;Zn+=3)be(n[Zn+0],n[Zn+1],n[Zn+2])}const Ye=new Jt,gt=new Jt,zt=new Jt,it=new Jt;function Tt(un){zt.fromArray(s,3*un),it.copy(zt);const ei=p[un];Ye.copy(ei),Ye.sub(zt.multiplyScalar(zt.dot(ei))).normalize(),gt.crossVectors(it,ei);const ni=gt.dot(v[un])<0?-1:1;u[4*un]=Ye.x,u[4*un+1]=Ye.y,u[4*un+2]=Ye.z,u[4*un+3]=ni}for(let un=0,ei=Se.length;un<ei;++un){const fi=Se[un],ni=fi.start;for(let Zn=ni,Rn=ni+fi.count;Zn<Rn;Zn+=3)Tt(n[Zn+0]),Tt(n[Zn+1]),Tt(n[Zn+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Hd(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let I=0,T=n.count;I<T;I++)n.setXYZ(I,0,0,0);const r=new Jt,s=new Jt,o=new Jt,l=new Jt,u=new Jt,p=new Jt,v=new Jt,w=new Jt;if(t)for(let I=0,T=t.count;I<T;I+=3){const k=t.getX(I+0),H=t.getX(I+1),X=t.getX(I+2);r.fromBufferAttribute(e,k),s.fromBufferAttribute(e,H),o.fromBufferAttribute(e,X),v.subVectors(o,s),w.subVectors(r,s),v.cross(w),l.fromBufferAttribute(n,k),u.fromBufferAttribute(n,H),p.fromBufferAttribute(n,X),l.add(v),u.add(v),p.add(v),n.setXYZ(k,l.x,l.y,l.z),n.setXYZ(H,u.x,u.y,u.z),n.setXYZ(X,p.x,p.y,p.z)}else for(let I=0,T=e.count;I<T;I+=3)r.fromBufferAttribute(e,I+0),s.fromBufferAttribute(e,I+1),o.fromBufferAttribute(e,I+2),v.subVectors(o,s),w.subVectors(r,s),v.cross(w),n.setXYZ(I+0,v.x,v.y,v.z),n.setXYZ(I+1,v.x,v.y,v.z),n.setXYZ(I+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Gd.fromBufferAttribute(t,e),Gd.normalize(),t.setXYZ(e,Gd.x,Gd.y,Gd.z)}toNonIndexed(){function t(l,u){const p=l.array,v=l.itemSize,w=l.normalized,I=new p.constructor(u.length*v);let T=0,k=0;for(let H=0,X=u.length;H<X;H++){T=l.isInterleavedBufferAttribute?u[H]*l.data.stride+l.offset:u[H]*v;for(let ue=0;ue<v;ue++)I[k++]=p[T++]}return new Hd(I,v,w)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new ha,n=this.index.array,r=this.attributes;for(const l in r){const p=t(r[l],n);e.setAttribute(l,p)}const s=this.morphAttributes;for(const l in s){const u=[],p=s[l];for(let v=0,w=p.length;v<w;v++){const T=t(p[v],n);u.push(T)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const p=o[l];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const u=this.parameters;for(const p in u)void 0!==u[p]&&(t[p]=u[p]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const u in n)t.data.attributes[u]=n[u].toJSON(t.data);const r={};let s=!1;for(const u in this.morphAttributes){const p=this.morphAttributes[u],v=[];for(let w=0,I=p.length;w<I;w++)v.push(p[w].toJSON(t.data));v.length>0&&(r[u]=v,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const p in r)this.setAttribute(p,r[p].clone(e));const s=t.morphAttributes;for(const p in s){const v=[],w=s[p];for(let I=0,T=w.length;I<T;I++)v.push(w[I].clone(e));this.morphAttributes[p]=v}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let p=0,v=o.length;p<v;p++){const w=o[p];this.addGroup(w.start,w.count,w.materialIndex)}const l=t.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=t.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const rG=new Uo,VC=new ZS,yP=new kC,S_=new Jt,E_=new Jt,T_=new Jt,_P=new Jt,bP=new Jt,CP=new Jt,tE=new Jt,nE=new Jt,iE=new Jt,rE=new sr,sE=new sr,oE=new sr,wP=new Jt,aE=new Jt;class jh extends Qf{constructor(t=new ha,e=new Y0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(t,e){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),yP.copy(n.boundingSphere),yP.applyMatrix4(s),!1===t.ray.intersectsSphere(yP))||(rG.copy(s).invert(),VC.copy(t.ray).applyMatrix4(rG),null!==n.boundingBox&&!1===VC.intersectsBox(n.boundingBox)))return;let o;const l=n.index,u=n.attributes.position,p=n.morphAttributes.position,v=n.morphTargetsRelative,w=n.attributes.uv,I=n.attributes.uv2,T=n.groups,k=n.drawRange;if(null!==l)if(Array.isArray(r))for(let H=0,X=T.length;H<X;H++){const ue=T[H],xe=r[ue.materialIndex];for(let Ye=Math.max(ue.start,k.start),gt=Math.min(l.count,Math.min(ue.start+ue.count,k.start+k.count));Ye<gt;Ye+=3){const zt=l.getX(Ye),it=l.getX(Ye+1),Tt=l.getX(Ye+2);o=lE(this,xe,t,VC,u,p,v,w,I,zt,it,Tt),o&&(o.faceIndex=Math.floor(Ye/3),o.face.materialIndex=ue.materialIndex,e.push(o))}}else for(let ue=Math.max(0,k.start),xe=Math.min(l.count,k.start+k.count);ue<xe;ue+=3){const be=l.getX(ue),Se=l.getX(ue+1),Ye=l.getX(ue+2);o=lE(this,r,t,VC,u,p,v,w,I,be,Se,Ye),o&&(o.faceIndex=Math.floor(ue/3),e.push(o))}else if(void 0!==u)if(Array.isArray(r))for(let H=0,X=T.length;H<X;H++){const ue=T[H],xe=r[ue.materialIndex];for(let Ye=Math.max(ue.start,k.start),gt=Math.min(u.count,Math.min(ue.start+ue.count,k.start+k.count));Ye<gt;Ye+=3)o=lE(this,xe,t,VC,u,p,v,w,I,Ye,Ye+1,Ye+2),o&&(o.faceIndex=Math.floor(Ye/3),o.face.materialIndex=ue.materialIndex,e.push(o))}else for(let ue=Math.max(0,k.start),xe=Math.min(u.count,k.start+k.count);ue<xe;ue+=3)o=lE(this,r,t,VC,u,p,v,w,I,ue,ue+1,ue+2),o&&(o.faceIndex=Math.floor(ue/3),e.push(o))}}function lE(i,t,e,n,r,s,o,l,u,p,v,w){S_.fromBufferAttribute(r,p),E_.fromBufferAttribute(r,v),T_.fromBufferAttribute(r,w);const I=i.morphTargetInfluences;if(s&&I){tE.set(0,0,0),nE.set(0,0,0),iE.set(0,0,0);for(let k=0,H=s.length;k<H;k++){const X=I[k],ue=s[k];0!==X&&(_P.fromBufferAttribute(ue,p),bP.fromBufferAttribute(ue,v),CP.fromBufferAttribute(ue,w),o?(tE.addScaledVector(_P,X),nE.addScaledVector(bP,X),iE.addScaledVector(CP,X)):(tE.addScaledVector(_P.sub(S_),X),nE.addScaledVector(bP.sub(E_),X),iE.addScaledVector(CP.sub(T_),X)))}S_.add(tE),E_.add(nE),T_.add(iE)}i.isSkinnedMesh&&(i.boneTransform(p,S_),i.boneTransform(v,E_),i.boneTransform(w,T_));const T=function Dye(i,t,e,n,r,s,o,l){let u;if(u=1===t.side?n.intersectTriangle(o,s,r,!0,l):n.intersectTriangle(r,s,o,2!==t.side,l),null===u)return null;aE.copy(l),aE.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(aE);return p<e.near||p>e.far?null:{distance:p,point:aE.clone(),object:i}}(i,t,e,n,S_,E_,T_,wP);if(T){l&&(rE.fromBufferAttribute(l,p),sE.fromBufferAttribute(l,v),oE.fromBufferAttribute(l,w),T.uv=Am.getUV(wP,S_,E_,T_,rE,sE,oE,new sr)),u&&(rE.fromBufferAttribute(u,p),sE.fromBufferAttribute(u,v),oE.fromBufferAttribute(u,w),T.uv2=Am.getUV(wP,S_,E_,T_,rE,sE,oE,new sr));const k={a:p,b:v,c:w,normal:new Jt,materialIndex:0};Am.getNormal(S_,E_,T_,k.normal),T.face=k}return T}class M_ extends ha{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],p=[],v=[],w=[];let I=0,T=0;function k(H,X,ue,xe,be,Se,Ye,gt,zt,it,Tt){const un=Se/zt,ei=Ye/it,fi=Se/2,ni=Ye/2,Bn=gt/2,Zn=zt+1,Rn=it+1;let ti=0,Yn=0;const kn=new Jt;for(let Qn=0;Qn<Rn;Qn++){const or=Qn*ei-ni;for(let Bi=0;Bi<Zn;Bi++)kn[H]=(Bi*un-fi)*xe,kn[X]=or*be,kn[ue]=Bn,p.push(kn.x,kn.y,kn.z),kn[H]=0,kn[X]=0,kn[ue]=gt>0?1:-1,v.push(kn.x,kn.y,kn.z),w.push(Bi/zt),w.push(1-Qn/it),ti+=1}for(let Qn=0;Qn<it;Qn++)for(let or=0;or<zt;or++){const yr=I+or+Zn*(Qn+1),Sr=I+(or+1)+Zn*(Qn+1),Ys=I+(or+1)+Zn*Qn;u.push(I+or+Zn*Qn,yr,Ys),u.push(yr,Sr,Ys),Yn+=6}l.addGroup(T,Yn,Tt),T+=Yn,I+=ti}k("z","y","x",-1,-1,n,e,t,o,s,0),k("z","y","x",1,-1,n,e,-t,o,s,1),k("x","z","y",1,1,t,n,e,r,o,2),k("x","z","y",1,-1,t,n,-e,r,o,3),k("x","y","z",1,-1,t,e,n,r,s,4),k("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new Ls(p,3)),this.setAttribute("normal",new Ls(v,3)),this.setAttribute("uv",new Ls(w,2))}static fromJSON(t){return new M_(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function UC(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];t[e][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function Af(i){const t={};for(let e=0;e<i.length;e++){const n=UC(i[e]);for(const r in n)t[r]=n[r]}return t}const Pye={clone:UC,merge:Af};class D_ extends X0{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=UC(t.uniforms),this.uniformsGroups=function Lye(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class AP extends Qf{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Uo,this.projectionMatrix=new Uo,this.projectionMatrixInverse=new Uo}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class vh extends AP{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*ox*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*H0*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*ox*Math.atan(Math.tan(.5*H0*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*H0*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const u=o.fullWidth,p=o.fullHeight;s+=o.offsetX*r/u,e-=o.offsetY*n/p,r*=o.width/u,n*=o.height/p}const l=this.filmOffset;0!==l&&(s+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Oye extends Qf{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new vh(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Jt(1,0,0)),this.add(r);const s=new vh(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Jt(-1,0,0)),this.add(s);const o=new vh(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Jt(0,1,0)),this.add(o);const l=new vh(90,1,t,e);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new Jt(0,-1,0)),this.add(l);const u=new vh(90,1,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new Jt(0,0,1)),this.add(u);const p=new vh(90,1,t,e);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new Jt(0,0,-1)),this.add(p)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,l,u,p]=this.children,v=t.getRenderTarget(),w=t.toneMapping,I=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,u),n.texture.generateMipmaps=T,t.setRenderTarget(n,5),t.render(e,p),t.setRenderTarget(v),t.toneMapping=w,t.xr.enabled=I,n.texture.needsPMREMUpdate=!0}}class cE extends b_{constructor(t,e,n,r,s,o,l,u,p,v){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,s,o,l,u,p,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Fye extends W0{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new cE([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:ed}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new M_(5,5,5),s=new D_({name:"CubemapFromEquirect",uniforms:UC(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new jh(r,s),l=e.minFilter;return 1008===e.minFilter&&(e.minFilter=ed),new Oye(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}const xP=new Jt,Nye=new Jt,Bye=new Vp;class K0{constructor(t=new Jt(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=xP.subVectors(n,e).cross(Nye.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(xP),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Bye.getNormalMatrix(t),r=this.coplanarPoint(xP).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const WC=new kC,uE=new Jt;class IP{constructor(t=new K0,e=new K0,n=new K0,r=new K0,s=new K0,o=new K0){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],s=n[1],o=n[2],l=n[3],u=n[4],p=n[5],v=n[6],w=n[7],I=n[8],T=n[9],k=n[10],H=n[11],X=n[12],ue=n[13],xe=n[14],be=n[15];return e[0].setComponents(l-r,w-u,H-I,be-X).normalize(),e[1].setComponents(l+r,w+u,H+I,be+X).normalize(),e[2].setComponents(l+s,w+p,H+T,be+ue).normalize(),e[3].setComponents(l-s,w-p,H-T,be-ue).normalize(),e[4].setComponents(l-o,w-v,H-k,be-xe).normalize(),e[5].setComponents(l+o,w+v,H+k,be+xe).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),WC.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(WC)}intersectsSprite(t){return WC.center.set(0,0,0),WC.radius=.7071067811865476,WC.applyMatrix4(t.matrixWorld),this.intersectsSphere(WC)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(uE.x=r.normal.x>0?t.max.x:t.min.x,uE.y=r.normal.y>0?t.max.y:t.min.y,uE.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(uE)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function sG(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function zye(i,t){const e=t.isWebGL2,n=new WeakMap;return{get:function o(p){return p.isInterleavedBufferAttribute&&(p=p.data),n.get(p)},remove:function l(p){p.isInterleavedBufferAttribute&&(p=p.data);const v=n.get(p);v&&(i.deleteBuffer(v.buffer),n.delete(p))},update:function u(p,v){if(p.isGLBufferAttribute){const I=n.get(p);return void((!I||I.version<p.version)&&n.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version}))}p.isInterleavedBufferAttribute&&(p=p.data);const w=n.get(p);void 0===w?n.set(p,function r(p,v){const w=p.array,I=p.usage,T=i.createBuffer();let k;if(i.bindBuffer(v,T),i.bufferData(v,w,I),p.onUploadCallback(),w instanceof Float32Array)k=5126;else if(w instanceof Uint16Array)if(p.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");k=5131}else k=5123;else if(w instanceof Int16Array)k=5122;else if(w instanceof Uint32Array)k=5125;else if(w instanceof Int32Array)k=5124;else if(w instanceof Int8Array)k=5120;else if(w instanceof Uint8Array)k=5121;else{if(!(w instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+w);k=5121}return{buffer:T,type:k,bytesPerElement:w.BYTES_PER_ELEMENT,version:p.version}}(p,v)):w.version<p.version&&(function s(p,v,w){const I=v.array,T=v.updateRange;i.bindBuffer(w,p),-1===T.count?i.bufferSubData(w,0,I):(e?i.bufferSubData(w,T.offset*I.BYTES_PER_ELEMENT,I,T.offset,T.count):i.bufferSubData(w,T.offset*I.BYTES_PER_ELEMENT,I.subarray(T.offset,T.offset+T.count)),T.count=-1)}(w.buffer,p,v),w.version=p.version)}}}class dE extends ha{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,l=Math.floor(n),u=Math.floor(r),p=l+1,v=u+1,w=t/l,I=e/u,T=[],k=[],H=[],X=[];for(let ue=0;ue<v;ue++){const xe=ue*I-o;for(let be=0;be<p;be++)k.push(be*w-s,-xe,0),H.push(0,0,1),X.push(be/l),X.push(1-ue/u)}for(let ue=0;ue<u;ue++)for(let xe=0;xe<l;xe++){const Se=xe+p*(ue+1),Ye=xe+1+p*(ue+1),gt=xe+1+p*ue;T.push(xe+p*ue,Se,gt),T.push(Se,Ye,gt)}this.setIndex(T),this.setAttribute("position",new Ls(k,3)),this.setAttribute("normal",new Ls(H,3)),this.setAttribute("uv",new Ls(X,2))}static fromJSON(t){return new dE(t.width,t.height,t.widthSegments,t.heightSegments)}}const na={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Gr={common:{diffuse:{value:new ws(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Vp},uv2Transform:{value:new Vp},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new sr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ws(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ws(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Vp}},sprite:{diffuse:{value:new ws(16777215)},opacity:{value:1},center:{value:new sr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Vp}}},pv={basic:{uniforms:Af([Gr.common,Gr.specularmap,Gr.envmap,Gr.aomap,Gr.lightmap,Gr.fog]),vertexShader:na.meshbasic_vert,fragmentShader:na.meshbasic_frag},lambert:{uniforms:Af([Gr.common,Gr.specularmap,Gr.envmap,Gr.aomap,Gr.lightmap,Gr.emissivemap,Gr.bumpmap,Gr.normalmap,Gr.displacementmap,Gr.fog,Gr.lights,{emissive:{value:new ws(0)}}]),vertexShader:na.meshlambert_vert,fragmentShader:na.meshlambert_frag},phong:{uniforms:Af([Gr.common,Gr.specularmap,Gr.envmap,Gr.aomap,Gr.lightmap,Gr.emissivemap,Gr.bumpmap,Gr.normalmap,Gr.displacementmap,Gr.fog,Gr.lights,{emissive:{value:new ws(0)},specular:{value:new ws(1118481)},shininess:{value:30}}]),vertexShader:na.meshphong_vert,fragmentShader:na.meshphong_frag},standard:{uniforms:Af([Gr.common,Gr.envmap,Gr.aomap,Gr.lightmap,Gr.emissivemap,Gr.bumpmap,Gr.normalmap,Gr.displacementmap,Gr.roughnessmap,Gr.metalnessmap,Gr.fog,Gr.lights,{emissive:{value:new ws(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:na.meshphysical_vert,fragmentShader:na.meshphysical_frag},toon:{uniforms:Af([Gr.common,Gr.aomap,Gr.lightmap,Gr.emissivemap,Gr.bumpmap,Gr.normalmap,Gr.displacementmap,Gr.gradientmap,Gr.fog,Gr.lights,{emissive:{value:new ws(0)}}]),vertexShader:na.meshtoon_vert,fragmentShader:na.meshtoon_frag},matcap:{uniforms:Af([Gr.common,Gr.bumpmap,Gr.normalmap,Gr.displacementmap,Gr.fog,{matcap:{value:null}}]),vertexShader:na.meshmatcap_vert,fragmentShader:na.meshmatcap_frag},points:{uniforms:Af([Gr.points,Gr.fog]),vertexShader:na.points_vert,fragmentShader:na.points_frag},dashed:{uniforms:Af([Gr.common,Gr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:na.linedashed_vert,fragmentShader:na.linedashed_frag},depth:{uniforms:Af([Gr.common,Gr.displacementmap]),vertexShader:na.depth_vert,fragmentShader:na.depth_frag},normal:{uniforms:Af([Gr.common,Gr.bumpmap,Gr.normalmap,Gr.displacementmap,{opacity:{value:1}}]),vertexShader:na.meshnormal_vert,fragmentShader:na.meshnormal_frag},sprite:{uniforms:Af([Gr.sprite,Gr.fog]),vertexShader:na.sprite_vert,fragmentShader:na.sprite_frag},background:{uniforms:{uvTransform:{value:new Vp},t2D:{value:null}},vertexShader:na.background_vert,fragmentShader:na.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:na.backgroundCube_vert,fragmentShader:na.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:na.cube_vert,fragmentShader:na.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:na.equirect_vert,fragmentShader:na.equirect_frag},distanceRGBA:{uniforms:Af([Gr.common,Gr.displacementmap,{referencePosition:{value:new Jt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:na.distanceRGBA_vert,fragmentShader:na.distanceRGBA_frag},shadow:{uniforms:Af([Gr.lights,Gr.fog,{color:{value:new ws(0)},opacity:{value:1}}]),vertexShader:na.shadow_vert,fragmentShader:na.shadow_frag}};function B0e(i,t,e,n,r,s,o){const l=new ws(0);let p,v,u=!0===s?0:1,w=null,I=0,T=null;function H(X,ue){n.buffers.color.setClear(X.r,X.g,X.b,ue,o)}return{getClearColor:function(){return l},setClearColor:function(X,ue=1){l.set(X),u=ue,H(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(X){u=X,H(l,u)},render:function k(X,ue){let xe=!1,be=!0===ue.isScene?ue.background:null;be&&be.isTexture&&(be=(ue.backgroundBlurriness>0?e:t).get(be));const Se=i.xr,Ye=Se.getSession&&Se.getSession();Ye&&"additive"===Ye.environmentBlendMode&&(be=null),null===be?H(l,u):be&&be.isColor&&(H(be,1),xe=!0),(i.autoClear||xe)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),be&&(be.isCubeTexture||306===be.mapping)?(void 0===v&&(v=new jh(new M_(1,1,1),new D_({name:"BackgroundCubeMaterial",uniforms:UC(pv.backgroundCube.uniforms),vertexShader:pv.backgroundCube.vertexShader,fragmentShader:pv.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(gt,zt,it){this.matrixWorld.copyPosition(it.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(v)),v.material.uniforms.envMap.value=be,v.material.uniforms.flipEnvMap.value=be.isCubeTexture&&!1===be.isRenderTargetTexture?-1:1,v.material.uniforms.backgroundBlurriness.value=ue.backgroundBlurriness,(w!==be||I!==be.version||T!==i.toneMapping)&&(v.material.needsUpdate=!0,w=be,I=be.version,T=i.toneMapping),v.layers.enableAll(),X.unshift(v,v.geometry,v.material,0,0,null)):be&&be.isTexture&&(void 0===p&&(p=new jh(new dE(2,2),new D_({name:"BackgroundMaterial",uniforms:UC(pv.background.uniforms),vertexShader:pv.background.vertexShader,fragmentShader:pv.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=be,!0===be.matrixAutoUpdate&&be.updateMatrix(),p.material.uniforms.uvTransform.value.copy(be.matrix),(w!==be||I!==be.version||T!==i.toneMapping)&&(p.material.needsUpdate=!0,w=be,I=be.version,T=i.toneMapping),p.layers.enableAll(),X.unshift(p,p.geometry,p.material,0,0,null))}}}function z0e(i,t,e,n){const r=i.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,l={},u=X(null);let p=u,v=!1;function T(Bn){return n.isWebGL2?i.bindVertexArray(Bn):s.bindVertexArrayOES(Bn)}function k(Bn){return n.isWebGL2?i.deleteVertexArray(Bn):s.deleteVertexArrayOES(Bn)}function X(Bn){const Zn=[],Rn=[],ti=[];for(let Yn=0;Yn<r;Yn++)Zn[Yn]=0,Rn[Yn]=0,ti[Yn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Zn,enabledAttributes:Rn,attributeDivisors:ti,object:Bn,attributes:{},index:null}}function be(){const Bn=p.newAttributes;for(let Zn=0,Rn=Bn.length;Zn<Rn;Zn++)Bn[Zn]=0}function Se(Bn){Ye(Bn,0)}function Ye(Bn,Zn){const ti=p.enabledAttributes,Yn=p.attributeDivisors;p.newAttributes[Bn]=1,0===ti[Bn]&&(i.enableVertexAttribArray(Bn),ti[Bn]=1),Yn[Bn]!==Zn&&((n.isWebGL2?i:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Bn,Zn),Yn[Bn]=Zn)}function gt(){const Bn=p.newAttributes,Zn=p.enabledAttributes;for(let Rn=0,ti=Zn.length;Rn<ti;Rn++)Zn[Rn]!==Bn[Rn]&&(i.disableVertexAttribArray(Rn),Zn[Rn]=0)}function zt(Bn,Zn,Rn,ti,Yn,kn){!0!==n.isWebGL2||5124!==Rn&&5125!==Rn?i.vertexAttribPointer(Bn,Zn,Rn,ti,Yn,kn):i.vertexAttribIPointer(Bn,Zn,Rn,Yn,kn)}function fi(){ni(),v=!0,p!==u&&(p=u,T(p.object))}function ni(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function w(Bn,Zn,Rn,ti,Yn){let kn=!1;if(o){const Qn=function H(Bn,Zn,Rn){const ti=!0===Rn.wireframe;let Yn=l[Bn.id];void 0===Yn&&(Yn={},l[Bn.id]=Yn);let kn=Yn[Zn.id];void 0===kn&&(kn={},Yn[Zn.id]=kn);let Qn=kn[ti];return void 0===Qn&&(Qn=X(function I(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),kn[ti]=Qn),Qn}(ti,Rn,Zn);p!==Qn&&(p=Qn,T(p.object)),kn=function ue(Bn,Zn,Rn,ti){const Yn=p.attributes,kn=Zn.attributes;let Qn=0;const or=Rn.getAttributes();for(const Bi in or)if(or[Bi].location>=0){const Sr=Yn[Bi];let Ys=kn[Bi];if(void 0===Ys&&("instanceMatrix"===Bi&&Bn.instanceMatrix&&(Ys=Bn.instanceMatrix),"instanceColor"===Bi&&Bn.instanceColor&&(Ys=Bn.instanceColor)),void 0===Sr||Sr.attribute!==Ys||Ys&&Sr.data!==Ys.data)return!0;Qn++}return p.attributesNum!==Qn||p.index!==ti}(Bn,ti,Rn,Yn),kn&&function xe(Bn,Zn,Rn,ti){const Yn={},kn=Zn.attributes;let Qn=0;const or=Rn.getAttributes();for(const Bi in or)if(or[Bi].location>=0){let Sr=kn[Bi];void 0===Sr&&("instanceMatrix"===Bi&&Bn.instanceMatrix&&(Sr=Bn.instanceMatrix),"instanceColor"===Bi&&Bn.instanceColor&&(Sr=Bn.instanceColor));const Ys={};Ys.attribute=Sr,Sr&&Sr.data&&(Ys.data=Sr.data),Yn[Bi]=Ys,Qn++}p.attributes=Yn,p.attributesNum=Qn,p.index=ti}(Bn,ti,Rn,Yn)}else{const Qn=!0===Zn.wireframe;(p.geometry!==ti.id||p.program!==Rn.id||p.wireframe!==Qn)&&(p.geometry=ti.id,p.program=Rn.id,p.wireframe=Qn,kn=!0)}null!==Yn&&e.update(Yn,34963),(kn||v)&&(v=!1,function it(Bn,Zn,Rn,ti){if(!1===n.isWebGL2&&(Bn.isInstancedMesh||ti.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;be();const Yn=ti.attributes,kn=Rn.getAttributes(),Qn=Zn.defaultAttributeValues;for(const or in kn){const Bi=kn[or];if(Bi.location>=0){let yr=Yn[or];if(void 0===yr&&("instanceMatrix"===or&&Bn.instanceMatrix&&(yr=Bn.instanceMatrix),"instanceColor"===or&&Bn.instanceColor&&(yr=Bn.instanceColor)),void 0!==yr){const Sr=yr.normalized,Ys=yr.itemSize,Ui=e.get(yr);if(void 0===Ui)continue;const Gs=Ui.buffer,ks=Ui.type,Os=Ui.bytesPerElement;if(yr.isInterleavedBufferAttribute){const $r=yr.data,Ko=$r.stride,er=yr.offset;if($r.isInstancedInterleavedBuffer){for(let Xi=0;Xi<Bi.locationSize;Xi++)Ye(Bi.location+Xi,$r.meshPerAttribute);!0!==Bn.isInstancedMesh&&void 0===ti._maxInstanceCount&&(ti._maxInstanceCount=$r.meshPerAttribute*$r.count)}else for(let Xi=0;Xi<Bi.locationSize;Xi++)Se(Bi.location+Xi);i.bindBuffer(34962,Gs);for(let Xi=0;Xi<Bi.locationSize;Xi++)zt(Bi.location+Xi,Ys/Bi.locationSize,ks,Sr,Ko*Os,(er+Ys/Bi.locationSize*Xi)*Os)}else{if(yr.isInstancedBufferAttribute){for(let $r=0;$r<Bi.locationSize;$r++)Ye(Bi.location+$r,yr.meshPerAttribute);!0!==Bn.isInstancedMesh&&void 0===ti._maxInstanceCount&&(ti._maxInstanceCount=yr.meshPerAttribute*yr.count)}else for(let $r=0;$r<Bi.locationSize;$r++)Se(Bi.location+$r);i.bindBuffer(34962,Gs);for(let $r=0;$r<Bi.locationSize;$r++)zt(Bi.location+$r,Ys/Bi.locationSize,ks,Sr,Ys*Os,Ys/Bi.locationSize*$r*Os)}}else if(void 0!==Qn){const Sr=Qn[or];if(void 0!==Sr)switch(Sr.length){case 2:i.vertexAttrib2fv(Bi.location,Sr);break;case 3:i.vertexAttrib3fv(Bi.location,Sr);break;case 4:i.vertexAttrib4fv(Bi.location,Sr);break;default:i.vertexAttrib1fv(Bi.location,Sr)}}}}gt()}(Bn,Zn,Rn,ti),null!==Yn&&i.bindBuffer(34963,e.get(Yn).buffer))},reset:fi,resetDefaultState:ni,dispose:function Tt(){fi();for(const Bn in l){const Zn=l[Bn];for(const Rn in Zn){const ti=Zn[Rn];for(const Yn in ti)k(ti[Yn].object),delete ti[Yn];delete Zn[Rn]}delete l[Bn]}},releaseStatesOfGeometry:function un(Bn){if(void 0===l[Bn.id])return;const Zn=l[Bn.id];for(const Rn in Zn){const ti=Zn[Rn];for(const Yn in ti)k(ti[Yn].object),delete ti[Yn];delete Zn[Rn]}delete l[Bn.id]},releaseStatesOfProgram:function ei(Bn){for(const Zn in l){const Rn=l[Zn];if(void 0===Rn[Bn.id])continue;const ti=Rn[Bn.id];for(const Yn in ti)k(ti[Yn].object),delete ti[Yn];delete Rn[Bn.id]}},initAttributes:be,enableAttribute:Se,disableUnusedAttributes:gt}}function V0e(i,t,e,n){const r=n.isWebGL2;let s;this.setMode=function o(p){s=p},this.render=function l(p,v){i.drawArrays(s,p,v),e.update(v,s,1)},this.renderInstances=function u(p,v,w){if(0===w)return;let I,T;if(r)I=i,T="drawArraysInstanced";else if(I=t.get("ANGLE_instanced_arrays"),T="drawArraysInstancedANGLE",null===I)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");I[T](s,p,v,w),e.update(v,s,w)}}function U0e(i,t,e){let n;function s(zt){if("highp"===zt){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";zt="mediump"}return"mediump"===zt&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let l=void 0!==e.precision?e.precision:"highp";const u=s(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const p=o||t.has("WEBGL_draw_buffers"),v=!0===e.logarithmicDepthBuffer,w=i.getParameter(34930),I=i.getParameter(35660),T=i.getParameter(3379),k=i.getParameter(34076),H=i.getParameter(34921),X=i.getParameter(36347),ue=i.getParameter(36348),xe=i.getParameter(36349),be=I>0,Se=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:p,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const zt=t.get("EXT_texture_filter_anisotropic");n=i.getParameter(zt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:l,logarithmicDepthBuffer:v,maxTextures:w,maxVertexTextures:I,maxTextureSize:T,maxCubemapSize:k,maxAttributes:H,maxVertexUniforms:X,maxVaryings:ue,maxFragmentUniforms:xe,vertexTextures:be,floatFragmentTextures:Se,floatVertexTextures:be&&Se,maxSamples:o?i.getParameter(36183):0}}function H0e(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new K0,l=new Vp,u={value:null,needsUpdate:!1};function p(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function v(w,I,T,k){const H=null!==w?w.length:0;let X=null;if(0!==H){if(X=u.value,!0!==k||null===X){const ue=T+4*H,xe=I.matrixWorldInverse;l.getNormalMatrix(xe),(null===X||X.length<ue)&&(X=new Float32Array(ue));for(let be=0,Se=T;be!==H;++be,Se+=4)o.copy(w[be]).applyMatrix4(xe,l),o.normal.toArray(X,Se),X[Se+3]=o.constant}u.value=X,u.needsUpdate=!0}return t.numPlanes=H,t.numIntersection=0,X}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(w,I,T){const k=0!==w.length||I||0!==n||r;return r=I,e=v(w,T,0),n=w.length,k},this.beginShadows=function(){s=!0,v(null)},this.endShadows=function(){s=!1,p()},this.setState=function(w,I,T){const k=w.clippingPlanes,H=w.clipIntersection,X=w.clipShadows,ue=i.get(w);if(!r||null===k||0===k.length||s&&!X)s?v(null):p();else{const xe=s?0:n,be=4*xe;let Se=ue.clippingState||null;u.value=Se,Se=v(k,I,be,T);for(let Ye=0;Ye!==be;++Ye)Se[Ye]=e[Ye];ue.clippingState=Se,this.numIntersection=H?this.numPlanes:0,this.numPlanes+=xe}}}function G0e(i){let t=new WeakMap;function e(o,l){return 303===l?o.mapping=301:304===l&&(o.mapping=302),o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const u=t.get(l);void 0!==u&&(t.delete(l),u.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const l=o.mapping;if(303===l||304===l){if(t.has(o))return e(t.get(o).texture,o.mapping);{const u=o.image;if(u&&u.height>0){const p=new Fye(u.height/2);return p.fromEquirectangularTexture(i,o),t.set(o,p),o.addEventListener("dispose",r),e(p.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}pv.physical={uniforms:Af([pv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new sr(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ws(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new sr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ws(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ws(1,1,1)},specularColorMap:{value:null}}]),vertexShader:na.meshphysical_vert,fragmentShader:na.meshphysical_frag};class SP extends AP{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,l=r+e,u=r-e;if(null!==this.view&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,o=s+p*this.view.width,l-=v*this.view.offsetY,u=l-v*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const oG=[.125,.215,.35,.446,.526,.582],EP=new SP,aG=new ws;let TP=null;const Q0=(1+Math.sqrt(5))/2,$C=1/Q0,lG=[new Jt(1,1,1),new Jt(-1,1,1),new Jt(1,1,-1),new Jt(-1,1,-1),new Jt(0,Q0,$C),new Jt(0,Q0,-$C),new Jt($C,0,Q0),new Jt(-$C,0,Q0),new Jt(Q0,$C,0),new Jt(-Q0,$C,0)];class cG{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){TP=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=hG(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=dG(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(TP),t.scissorTest=!1,hE(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),TP=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:ed,minFilter:ed,generateMipmaps:!1,type:sx,format:Tg,encoding:z0,depthBuffer:!1},r=uG(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=uG(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function W0e(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+oG.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);e.push(l);let u=1/l;o>i-4?u=oG[o-i+4-1]:0===o&&(u=0),n.push(u);const p=1/(l-2),v=-p,w=1+p,I=[v,v,w,v,w,w,v,v,w,w,v,w],T=6,k=6,H=3,X=2,ue=1,xe=new Float32Array(H*k*T),be=new Float32Array(X*k*T),Se=new Float32Array(ue*k*T);for(let gt=0;gt<T;gt++){const zt=gt%3*2/3-1,it=gt>2?0:-1;xe.set([zt,it,0,zt+2/3,it,0,zt+2/3,it+1,0,zt,it,0,zt+2/3,it+1,0,zt,it+1,0],H*k*gt),be.set(I,X*k*gt),Se.set([gt,gt,gt,gt,gt,gt],ue*k*gt)}const Ye=new ha;Ye.setAttribute("position",new Hd(xe,H)),Ye.setAttribute("uv",new Hd(be,X)),Ye.setAttribute("faceIndex",new Hd(Se,ue)),t.push(Ye),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function j0e(i,t,e){const n=new Float32Array(20),r=new Jt(0,1,0);return new D_({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new jh(this._lodPlanes[0],t);this._renderer.compile(e,EP)}_sceneToCubeUV(t,e,n,r){const l=new vh(90,1,e,n),u=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],v=this._renderer,w=v.autoClear,I=v.toneMapping;v.getClearColor(aG),v.toneMapping=0,v.autoClear=!1;const T=new Y0({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),k=new jh(new M_,T);let H=!1;const X=t.background;X?X.isColor&&(T.color.copy(X),t.background=null,H=!0):(T.color.copy(aG),H=!0);for(let ue=0;ue<6;ue++){const xe=ue%3;0===xe?(l.up.set(0,u[ue],0),l.lookAt(p[ue],0,0)):1===xe?(l.up.set(0,0,u[ue]),l.lookAt(0,p[ue],0)):(l.up.set(0,u[ue],0),l.lookAt(0,0,p[ue]));const be=this._cubeSize;hE(r,xe*be,ue>2?be:0,be,be),v.setRenderTarget(r),H&&v.render(k,l),v.render(t,l)}k.geometry.dispose(),k.material.dispose(),v.toneMapping=I,v.autoClear=w,t.background=X}_textureToCubeUV(t,e){const n=this._renderer,r=301===t.mapping||302===t.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=hG()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=dG());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new jh(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const u=this._cubeSize;hE(e,0,0,3*u,2*u),n.setRenderTarget(e),n.render(o,EP)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,lG[(r-1)%lG.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,l){const u=this._renderer,p=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const w=new jh(this._lodPlanes[r],p),I=p.uniforms,T=this._sizeLods[n]-1,k=isFinite(s)?Math.PI/(2*T):2*Math.PI/39,H=s/k,X=isFinite(s)?1+Math.floor(3*H):20;X>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${X} samples when the maximum is set to 20`);const ue=[];let xe=0;for(let zt=0;zt<20;++zt){const it=zt/H,Tt=Math.exp(-it*it/2);ue.push(Tt),0===zt?xe+=Tt:zt<X&&(xe+=2*Tt)}for(let zt=0;zt<ue.length;zt++)ue[zt]=ue[zt]/xe;I.envMap.value=t.texture,I.samples.value=X,I.weights.value=ue,I.latitudinal.value="latitudinal"===o,l&&(I.poleAxis.value=l);const{_lodMax:be}=this;I.dTheta.value=k,I.mipInt.value=be-n;const Se=this._sizeLods[r];hE(e,3*Se*(r>be-4?r-be+4:0),4*(this._cubeSize-Se),3*Se,2*Se),u.setRenderTarget(e),u.render(w,EP)}}function uG(i,t,e){const n=new W0(i,t,e);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function hE(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function dG(){return new D_({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function hG(){return new D_({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function $0e(i){let t=new WeakMap,e=null;function s(l){const u=l.target;u.removeEventListener("dispose",s);const p=t.get(u);void 0!==p&&(t.delete(u),p.dispose())}return{get:function n(l){if(l&&l.isTexture){const u=l.mapping,p=303===u||304===u,v=301===u||302===u;if(p||v){if(l.isRenderTargetTexture&&!0===l.needsPMREMUpdate){l.needsPMREMUpdate=!1;let w=t.get(l);return null===e&&(e=new cG(i)),w=p?e.fromEquirectangular(l,w):e.fromCubemap(l,w),t.set(l,w),w.texture}if(t.has(l))return t.get(l).texture;{const w=l.image;if(p&&w&&w.height>0||v&&w&&function r(l){let u=0;for(let v=0;v<6;v++)void 0!==l[v]&&u++;return 6===u}(w)){null===e&&(e=new cG(i));const I=p?e.fromEquirectangular(l):e.fromCubemap(l);return t.set(l,I),l.addEventListener("dispose",s),I.texture}return null}}}return l},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function q0e(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function X0e(i,t,e,n){const r={},s=new WeakMap;function o(w){const I=w.target;null!==I.index&&t.remove(I.index);for(const k in I.attributes)t.remove(I.attributes[k]);I.removeEventListener("dispose",o),delete r[I.id];const T=s.get(I);T&&(t.remove(T),s.delete(I)),n.releaseStatesOfGeometry(I),!0===I.isInstancedBufferGeometry&&delete I._maxInstanceCount,e.memory.geometries--}function p(w){const I=[],T=w.index,k=w.attributes.position;let H=0;if(null!==T){const xe=T.array;H=T.version;for(let be=0,Se=xe.length;be<Se;be+=3){const Ye=xe[be+0],gt=xe[be+1],zt=xe[be+2];I.push(Ye,gt,gt,zt,zt,Ye)}}else{H=k.version;for(let be=0,Se=k.array.length/3-1;be<Se;be+=3){const Ye=be+0,gt=be+1,zt=be+2;I.push(Ye,gt,gt,zt,zt,Ye)}}const X=new(G5(I)?iG:nG)(I,1);X.version=H;const ue=s.get(w);ue&&t.remove(ue),s.set(w,X)}return{get:function l(w,I){return!0===r[I.id]||(I.addEventListener("dispose",o),r[I.id]=!0,e.memory.geometries++),I},update:function u(w){const I=w.attributes;for(const k in I)t.update(I[k],34962);const T=w.morphAttributes;for(const k in T){const H=T[k];for(let X=0,ue=H.length;X<ue;X++)t.update(H[X],34962)}},getWireframeAttribute:function v(w){const I=s.get(w);if(I){const T=w.index;null!==T&&I.version<T.version&&p(w)}else p(w);return s.get(w)}}}function Y0e(i,t,e,n){const r=n.isWebGL2;let s,l,u;this.setMode=function o(I){s=I},this.setIndex=function p(I){l=I.type,u=I.bytesPerElement},this.render=function v(I,T){i.drawElements(s,T,l,I*u),e.update(T,s,1)},this.renderInstances=function w(I,T,k){if(0===k)return;let H,X;if(r)H=i,X="drawElementsInstanced";else if(H=t.get("ANGLE_instanced_arrays"),X="drawElementsInstancedANGLE",null===H)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");H[X](s,T,l,I*u,k),e.update(T,s,k)}}function K0e(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,l){switch(e.calls++,o){case 4:e.triangles+=l*(s/3);break;case 1:e.lines+=l*(s/2);break;case 3:e.lines+=l*(s-1);break;case 2:e.lines+=l*s;break;case 0:e.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Z0e(i,t){return i[0]-t[0]}function Q0e(i,t){return Math.abs(t[1])-Math.abs(i[1])}function J0e(i,t,e){const n={},r=new Float32Array(8),s=new WeakMap,o=new Bl,l=[];for(let p=0;p<8;p++)l[p]=[p,0];return{update:function u(p,v,w,I){const T=p.morphTargetInfluences;if(!0===t.isWebGL2){const k=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,H=void 0!==k?k.length:0;let X=s.get(v);if(void 0===X||X.count!==H){let Zn=function(){ni.dispose(),s.delete(v),v.removeEventListener("dispose",Zn)};void 0!==X&&X.texture.dispose();const be=void 0!==v.morphAttributes.position,Se=void 0!==v.morphAttributes.normal,Ye=void 0!==v.morphAttributes.color,gt=v.morphAttributes.position||[],zt=v.morphAttributes.normal||[],it=v.morphAttributes.color||[];let Tt=0;!0===be&&(Tt=1),!0===Se&&(Tt=2),!0===Ye&&(Tt=3);let un=v.attributes.position.count*Tt,ei=1;un>t.maxTextureSize&&(ei=Math.ceil(un/t.maxTextureSize),un=t.maxTextureSize);const fi=new Float32Array(un*ei*4*H),ni=new rP(fi,un,ei,H);ni.type=__,ni.needsUpdate=!0;const Bn=4*Tt;for(let Rn=0;Rn<H;Rn++){const ti=gt[Rn],Yn=zt[Rn],kn=it[Rn],Qn=un*ei*4*Rn;for(let or=0;or<ti.count;or++){const Bi=or*Bn;!0===be&&(o.fromBufferAttribute(ti,or),fi[Qn+Bi+0]=o.x,fi[Qn+Bi+1]=o.y,fi[Qn+Bi+2]=o.z,fi[Qn+Bi+3]=0),!0===Se&&(o.fromBufferAttribute(Yn,or),fi[Qn+Bi+4]=o.x,fi[Qn+Bi+5]=o.y,fi[Qn+Bi+6]=o.z,fi[Qn+Bi+7]=0),!0===Ye&&(o.fromBufferAttribute(kn,or),fi[Qn+Bi+8]=o.x,fi[Qn+Bi+9]=o.y,fi[Qn+Bi+10]=o.z,fi[Qn+Bi+11]=4===kn.itemSize?o.w:1)}}X={count:H,texture:ni,size:new sr(un,ei)},s.set(v,X),v.addEventListener("dispose",Zn)}let ue=0;for(let be=0;be<T.length;be++)ue+=T[be];const xe=v.morphTargetsRelative?1:1-ue;I.getUniforms().setValue(i,"morphTargetBaseInfluence",xe),I.getUniforms().setValue(i,"morphTargetInfluences",T),I.getUniforms().setValue(i,"morphTargetsTexture",X.texture,e),I.getUniforms().setValue(i,"morphTargetsTextureSize",X.size)}else{const k=void 0===T?0:T.length;let H=n[v.id];if(void 0===H||H.length!==k){H=[];for(let Se=0;Se<k;Se++)H[Se]=[Se,0];n[v.id]=H}for(let Se=0;Se<k;Se++){const Ye=H[Se];Ye[0]=Se,Ye[1]=T[Se]}H.sort(Q0e);for(let Se=0;Se<8;Se++)Se<k&&H[Se][1]?(l[Se][0]=H[Se][0],l[Se][1]=H[Se][1]):(l[Se][0]=Number.MAX_SAFE_INTEGER,l[Se][1]=0);l.sort(Z0e);const X=v.morphAttributes.position,ue=v.morphAttributes.normal;let xe=0;for(let Se=0;Se<8;Se++){const Ye=l[Se],gt=Ye[0],zt=Ye[1];gt!==Number.MAX_SAFE_INTEGER&&zt?(X&&v.getAttribute("morphTarget"+Se)!==X[gt]&&v.setAttribute("morphTarget"+Se,X[gt]),ue&&v.getAttribute("morphNormal"+Se)!==ue[gt]&&v.setAttribute("morphNormal"+Se,ue[gt]),r[Se]=zt,xe+=zt):(X&&!0===v.hasAttribute("morphTarget"+Se)&&v.deleteAttribute("morphTarget"+Se),ue&&!0===v.hasAttribute("morphNormal"+Se)&&v.deleteAttribute("morphNormal"+Se),r[Se]=0)}const be=v.morphTargetsRelative?1:1-xe;I.getUniforms().setValue(i,"morphTargetBaseInfluence",be),I.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function ebe(i,t,e,n){let r=new WeakMap;function l(u){const p=u.target;p.removeEventListener("dispose",l),e.remove(p.instanceMatrix),null!==p.instanceColor&&e.remove(p.instanceColor)}return{update:function s(u){const p=n.render.frame,w=t.get(u,u.geometry);return r.get(w)!==p&&(t.update(w),r.set(w,p)),u.isInstancedMesh&&(!1===u.hasEventListener("dispose",l)&&u.addEventListener("dispose",l),e.update(u.instanceMatrix,34962),null!==u.instanceColor&&e.update(u.instanceColor,34962)),w},dispose:function o(){r=new WeakMap}}}const fG=new b_,pG=new rP,gG=new $5,mG=new cE,vG=[],yG=[],_G=new Float32Array(16),bG=new Float32Array(9),CG=new Float32Array(4);function qC(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=vG[r];if(void 0===s&&(s=new Float32Array(r),vG[r]=s),0!==t){n.toArray(s,0);for(let o=1,l=0;o!==t;++o)l+=e,i[o].toArray(s,l)}return s}function wd(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Ad(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function fE(i,t){let e=yG[t];void 0===e&&(e=new Int32Array(t),yG[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function tbe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function nbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(wd(e,t))return;i.uniform2fv(this.addr,t),Ad(e,t)}}function ibe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(wd(e,t))return;i.uniform3fv(this.addr,t),Ad(e,t)}}function rbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(wd(e,t))return;i.uniform4fv(this.addr,t),Ad(e,t)}}function sbe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(wd(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Ad(e,t)}else{if(wd(e,n))return;CG.set(n),i.uniformMatrix2fv(this.addr,!1,CG),Ad(e,n)}}function obe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(wd(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Ad(e,t)}else{if(wd(e,n))return;bG.set(n),i.uniformMatrix3fv(this.addr,!1,bG),Ad(e,n)}}function abe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(wd(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Ad(e,t)}else{if(wd(e,n))return;_G.set(n),i.uniformMatrix4fv(this.addr,!1,_G),Ad(e,n)}}function lbe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function cbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(wd(e,t))return;i.uniform2iv(this.addr,t),Ad(e,t)}}function ube(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(wd(e,t))return;i.uniform3iv(this.addr,t),Ad(e,t)}}function dbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(wd(e,t))return;i.uniform4iv(this.addr,t),Ad(e,t)}}function hbe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function fbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(wd(e,t))return;i.uniform2uiv(this.addr,t),Ad(e,t)}}function pbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(wd(e,t))return;i.uniform3uiv(this.addr,t),Ad(e,t)}}function gbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(wd(e,t))return;i.uniform4uiv(this.addr,t),Ad(e,t)}}function mbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||fG,r)}function vbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||gG,r)}function ybe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||mG,r)}function _be(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||pG,r)}function Cbe(i,t){i.uniform1fv(this.addr,t)}function wbe(i,t){const e=qC(t,this.size,2);i.uniform2fv(this.addr,e)}function Abe(i,t){const e=qC(t,this.size,3);i.uniform3fv(this.addr,e)}function xbe(i,t){const e=qC(t,this.size,4);i.uniform4fv(this.addr,e)}function Ibe(i,t){const e=qC(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function Sbe(i,t){const e=qC(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function Ebe(i,t){const e=qC(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function Tbe(i,t){i.uniform1iv(this.addr,t)}function Mbe(i,t){i.uniform2iv(this.addr,t)}function Dbe(i,t){i.uniform3iv(this.addr,t)}function Lbe(i,t){i.uniform4iv(this.addr,t)}function Pbe(i,t){i.uniform1uiv(this.addr,t)}function Rbe(i,t){i.uniform2uiv(this.addr,t)}function kbe(i,t){i.uniform3uiv(this.addr,t)}function Obe(i,t){i.uniform4uiv(this.addr,t)}function Fbe(i,t,e){const n=this.cache,r=t.length,s=fE(e,r);wd(n,s)||(i.uniform1iv(this.addr,s),Ad(n,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||fG,s[o])}function Nbe(i,t,e){const n=this.cache,r=t.length,s=fE(e,r);wd(n,s)||(i.uniform1iv(this.addr,s),Ad(n,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||gG,s[o])}function Bbe(i,t,e){const n=this.cache,r=t.length,s=fE(e,r);wd(n,s)||(i.uniform1iv(this.addr,s),Ad(n,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||mG,s[o])}function zbe(i,t,e){const n=this.cache,r=t.length,s=fE(e,r);wd(n,s)||(i.uniform1iv(this.addr,s),Ad(n,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||pG,s[o])}class Ube{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function bbe(i){switch(i){case 5126:return tbe;case 35664:return nbe;case 35665:return ibe;case 35666:return rbe;case 35674:return sbe;case 35675:return obe;case 35676:return abe;case 5124:case 35670:return lbe;case 35667:case 35671:return cbe;case 35668:case 35672:return ube;case 35669:case 35673:return dbe;case 5125:return hbe;case 36294:return fbe;case 36295:return pbe;case 36296:return gbe;case 35678:case 36198:case 36298:case 36306:case 35682:return mbe;case 35679:case 36299:case 36307:return vbe;case 35680:case 36300:case 36308:case 36293:return ybe;case 36289:case 36303:case 36311:case 36292:return _be}}(e.type)}}class Hbe{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function Vbe(i){switch(i){case 5126:return Cbe;case 35664:return wbe;case 35665:return Abe;case 35666:return xbe;case 35674:return Ibe;case 35675:return Sbe;case 35676:return Ebe;case 5124:case 35670:return Tbe;case 35667:case 35671:return Mbe;case 35668:case 35672:return Dbe;case 35669:case 35673:return Lbe;case 5125:return Pbe;case 36294:return Rbe;case 36295:return kbe;case 36296:return Obe;case 35678:case 36198:case 36298:case 36306:case 35682:return Fbe;case 35679:case 36299:case 36307:return Nbe;case 35680:case 36300:case 36308:case 36293:return Bbe;case 36289:case 36303:case 36311:case 36292:return zbe}}(e.type)}}class Gbe{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(t,e[l.id],n)}}}const DP=/(\w+)(\])?(\[|\.)?/g;function wG(i,t){i.seq.push(t),i.map[t.id]=t}function Wbe(i,t,e){const n=i.name,r=n.length;for(DP.lastIndex=0;;){const s=DP.exec(n),o=DP.lastIndex;let l=s[1];const p=s[3];if("]"===s[2]&&(l|=0),void 0===p||"["===p&&o+2===r){wG(e,void 0===p?new Ube(l,i,t):new Hbe(l,i,t));break}{let w=e.map[l];void 0===w&&(w=new Gbe(l),wG(e,w)),e=w}}}class pE{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);Wbe(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,o=e.length;s!==o;++s){const l=e[s],u=n[l.id];!1!==u.needsUpdate&&l.setValue(t,u.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&n.push(o)}return n}}function AG(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}let jbe=0;function xG(i,t,e){const n=i.getShaderParameter(t,35713),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function $be(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const l=o+1;n.push(`${l===t?">":" "} ${l}: ${e[o]}`)}return n.join("\n")}(i.getShaderSource(t),o)}return r}function Xbe(i,t){const e=function qbe(i){switch(i){case z0:return["Linear","( value )"];case bu:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(t);return"vec4 "+i+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Ybe(i,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function fx(i){return""!==i}function IG(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function SG(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Jbe=/^[ \t]*#include +<([\w\d./]+)>/gm;function LP(i){return i.replace(Jbe,eCe)}function eCe(i,t){const e=na[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return LP(e)}const tCe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function EG(i){return i.replace(tCe,nCe)}function nCe(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function TG(i){let t="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function lCe(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,l=e.fragmentShader;const u=function iCe(i){let t="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),p=function rCe(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),v=function sCe(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),w=function oCe(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),I=function aCe(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),T=e.isWebGL2?"":function Kbe(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(fx).join("\n")}(e),k=function Zbe(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),H=r.createProgram();let X,ue,xe=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(X=[k].filter(fx).join("\n"),X.length>0&&(X+="\n"),ue=[T,k].filter(fx).join("\n"),ue.length>0&&(ue+="\n")):(X=[TG(e),"#define SHADER_NAME "+e.shaderName,k,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+v:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(fx).join("\n"),ue=[T,TG(e),"#define SHADER_NAME "+e.shaderName,k,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+v:"",e.envMap?"#define "+w:"",I?"#define CUBEUV_TEXEL_WIDTH "+I.texelWidth:"",I?"#define CUBEUV_TEXEL_HEIGHT "+I.texelHeight:"",I?"#define CUBEUV_MAX_MIP "+I.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?na.tonemapping_pars_fragment:"",0!==e.toneMapping?Ybe("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",na.encodings_pars_fragment,Xbe("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(fx).join("\n")),o=LP(o),o=IG(o,e),o=SG(o,e),l=LP(l),l=IG(l,e),l=SG(l,e),o=EG(o),l=EG(l),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(xe="#version 300 es\n",X=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+X,ue=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+ue);const Se=xe+ue+l,Ye=AG(r,35633,xe+X+o),gt=AG(r,35632,Se);if(r.attachShader(H,Ye),r.attachShader(H,gt),void 0!==e.index0AttributeName?r.bindAttribLocation(H,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(H,0,"position"),r.linkProgram(H),i.debug.checkShaderErrors){const Tt=r.getProgramInfoLog(H).trim(),un=r.getShaderInfoLog(Ye).trim(),ei=r.getShaderInfoLog(gt).trim();let fi=!0,ni=!0;if(!1===r.getProgramParameter(H,35714)){fi=!1;const Bn=xG(r,Ye,"vertex"),Zn=xG(r,gt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(H,35715)+"\n\nProgram Info Log: "+Tt+"\n"+Bn+"\n"+Zn)}else""!==Tt?console.warn("THREE.WebGLProgram: Program Info Log:",Tt):(""===un||""===ei)&&(ni=!1);ni&&(this.diagnostics={runnable:fi,programLog:Tt,vertexShader:{log:un,prefix:X},fragmentShader:{log:ei,prefix:ue}})}let zt,it;return r.deleteShader(Ye),r.deleteShader(gt),this.getUniforms=function(){return void 0===zt&&(zt=new pE(r,H)),zt},this.getAttributes=function(){return void 0===it&&(it=function Qbe(i,t){const e={},n=i.getProgramParameter(t,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let l=1;35674===s.type&&(l=2),35675===s.type&&(l=3),35676===s.type&&(l=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:l}}return e}(r,H)),it},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(H),this.program=void 0},this.name=e.shaderName,this.id=jbe++,this.cacheKey=t,this.usedTimes=1,this.program=H,this.vertexShader=Ye,this.fragmentShader=gt,this}let cCe=0;class uCe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new dCe(t),e.set(t,n)),n}}class dCe{constructor(t){this.id=cCe++,this.code=t,this.usedTimes=0}}function hCe(i,t,e,n,r,s,o){const l=new hP,u=new uCe,p=[],v=r.isWebGL2,w=r.logarithmicDepthBuffer,I=r.vertexTextures;let T=r.precision;const k={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function H(it,Tt,un,ei,fi){const ni=ei.fog,Bn=fi.geometry,Rn=(it.isMeshStandardMaterial?e:t).get(it.envMap||(it.isMeshStandardMaterial?ei.environment:null)),ti=Rn&&306===Rn.mapping?Rn.image.height:null,Yn=k[it.type];null!==it.precision&&(T=r.getMaxPrecision(it.precision),T!==it.precision&&console.warn("THREE.WebGLProgram.getParameters:",it.precision,"not supported, using",T,"instead."));const kn=Bn.morphAttributes.position||Bn.morphAttributes.normal||Bn.morphAttributes.color,Qn=void 0!==kn?kn.length:0;let Bi,yr,Sr,Ys,or=0;if(void 0!==Bn.morphAttributes.position&&(or=1),void 0!==Bn.morphAttributes.normal&&(or=2),void 0!==Bn.morphAttributes.color&&(or=3),Yn){const Ko=pv[Yn];Bi=Ko.vertexShader,yr=Ko.fragmentShader}else Bi=it.vertexShader,yr=it.fragmentShader,u.update(it),Sr=u.getVertexShaderID(it),Ys=u.getFragmentShaderID(it);const Ui=i.getRenderTarget(),ks=it.clearcoat>0,Os=it.iridescence>0;return{isWebGL2:v,shaderID:Yn,shaderName:it.type,vertexShader:Bi,fragmentShader:yr,defines:it.defines,customVertexShaderID:Sr,customFragmentShaderID:Ys,isRawShaderMaterial:!0===it.isRawShaderMaterial,glslVersion:it.glslVersion,precision:T,instancing:!0===fi.isInstancedMesh,instancingColor:!0===fi.isInstancedMesh&&null!==fi.instanceColor,supportsVertexTextures:I,outputEncoding:null===Ui?i.outputEncoding:!0===Ui.isXRRenderTarget?Ui.texture.encoding:z0,map:!!it.map,matcap:!!it.matcap,envMap:!!Rn,envMapMode:Rn&&Rn.mapping,envMapCubeUVHeight:ti,lightMap:!!it.lightMap,aoMap:!!it.aoMap,emissiveMap:!!it.emissiveMap,bumpMap:!!it.bumpMap,normalMap:!!it.normalMap,objectSpaceNormalMap:1===it.normalMapType,tangentSpaceNormalMap:0===it.normalMapType,decodeVideoTexture:!!it.map&&!0===it.map.isVideoTexture&&it.map.encoding===bu,clearcoat:ks,clearcoatMap:ks&&!!it.clearcoatMap,clearcoatRoughnessMap:ks&&!!it.clearcoatRoughnessMap,clearcoatNormalMap:ks&&!!it.clearcoatNormalMap,iridescence:Os,iridescenceMap:Os&&!!it.iridescenceMap,iridescenceThicknessMap:Os&&!!it.iridescenceThicknessMap,displacementMap:!!it.displacementMap,roughnessMap:!!it.roughnessMap,metalnessMap:!!it.metalnessMap,specularMap:!!it.specularMap,specularIntensityMap:!!it.specularIntensityMap,specularColorMap:!!it.specularColorMap,opaque:!1===it.transparent&&1===it.blending,alphaMap:!!it.alphaMap,alphaTest:it.alphaTest>0,gradientMap:!!it.gradientMap,sheen:it.sheen>0,sheenColorMap:!!it.sheenColorMap,sheenRoughnessMap:!!it.sheenRoughnessMap,transmission:it.transmission>0,transmissionMap:!!it.transmissionMap,thicknessMap:!!it.thicknessMap,combine:it.combine,vertexTangents:!!it.normalMap&&!!Bn.attributes.tangent,vertexColors:it.vertexColors,vertexAlphas:!0===it.vertexColors&&!!Bn.attributes.color&&4===Bn.attributes.color.itemSize,vertexUvs:!!(it.map||it.bumpMap||it.normalMap||it.specularMap||it.alphaMap||it.emissiveMap||it.roughnessMap||it.metalnessMap||it.clearcoatMap||it.clearcoatRoughnessMap||it.clearcoatNormalMap||it.iridescenceMap||it.iridescenceThicknessMap||it.displacementMap||it.transmissionMap||it.thicknessMap||it.specularIntensityMap||it.specularColorMap||it.sheenColorMap||it.sheenRoughnessMap),uvsVertexOnly:!(it.map||it.bumpMap||it.normalMap||it.specularMap||it.alphaMap||it.emissiveMap||it.roughnessMap||it.metalnessMap||it.clearcoatNormalMap||it.iridescenceMap||it.iridescenceThicknessMap||it.transmission>0||it.transmissionMap||it.thicknessMap||it.specularIntensityMap||it.specularColorMap||it.sheen>0||it.sheenColorMap||it.sheenRoughnessMap||!it.displacementMap),fog:!!ni,useFog:!0===it.fog,fogExp2:ni&&ni.isFogExp2,flatShading:!!it.flatShading,sizeAttenuation:it.sizeAttenuation,logarithmicDepthBuffer:w,skinning:!0===fi.isSkinnedMesh,morphTargets:void 0!==Bn.morphAttributes.position,morphNormals:void 0!==Bn.morphAttributes.normal,morphColors:void 0!==Bn.morphAttributes.color,morphTargetsCount:Qn,morphTextureStride:or,numDirLights:Tt.directional.length,numPointLights:Tt.point.length,numSpotLights:Tt.spot.length,numSpotLightMaps:Tt.spotLightMap.length,numRectAreaLights:Tt.rectArea.length,numHemiLights:Tt.hemi.length,numDirLightShadows:Tt.directionalShadowMap.length,numPointLightShadows:Tt.pointShadowMap.length,numSpotLightShadows:Tt.spotShadowMap.length,numSpotLightShadowsWithMaps:Tt.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:it.dithering,shadowMapEnabled:i.shadowMap.enabled&&un.length>0,shadowMapType:i.shadowMap.type,toneMapping:it.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:it.premultipliedAlpha,doubleSided:2===it.side,flipSided:1===it.side,useDepthPacking:!!it.depthPacking,depthPacking:it.depthPacking||0,index0AttributeName:it.index0AttributeName,extensionDerivatives:it.extensions&&it.extensions.derivatives,extensionFragDepth:it.extensions&&it.extensions.fragDepth,extensionDrawBuffers:it.extensions&&it.extensions.drawBuffers,extensionShaderTextureLOD:it.extensions&&it.extensions.shaderTextureLOD,rendererExtensionFragDepth:v||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:v||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:v||n.has("EXT_shader_texture_lod"),customProgramCacheKey:it.customProgramCacheKey()}},getProgramCacheKey:function X(it){const Tt=[];if(it.shaderID?Tt.push(it.shaderID):(Tt.push(it.customVertexShaderID),Tt.push(it.customFragmentShaderID)),void 0!==it.defines)for(const un in it.defines)Tt.push(un),Tt.push(it.defines[un]);return!1===it.isRawShaderMaterial&&(function ue(it,Tt){it.push(Tt.precision),it.push(Tt.outputEncoding),it.push(Tt.envMapMode),it.push(Tt.envMapCubeUVHeight),it.push(Tt.combine),it.push(Tt.vertexUvs),it.push(Tt.fogExp2),it.push(Tt.sizeAttenuation),it.push(Tt.morphTargetsCount),it.push(Tt.morphAttributeCount),it.push(Tt.numDirLights),it.push(Tt.numPointLights),it.push(Tt.numSpotLights),it.push(Tt.numSpotLightMaps),it.push(Tt.numHemiLights),it.push(Tt.numRectAreaLights),it.push(Tt.numDirLightShadows),it.push(Tt.numPointLightShadows),it.push(Tt.numSpotLightShadows),it.push(Tt.numSpotLightShadowsWithMaps),it.push(Tt.shadowMapType),it.push(Tt.toneMapping),it.push(Tt.numClippingPlanes),it.push(Tt.numClipIntersection),it.push(Tt.depthPacking)}(Tt,it),function xe(it,Tt){l.disableAll(),Tt.isWebGL2&&l.enable(0),Tt.supportsVertexTextures&&l.enable(1),Tt.instancing&&l.enable(2),Tt.instancingColor&&l.enable(3),Tt.map&&l.enable(4),Tt.matcap&&l.enable(5),Tt.envMap&&l.enable(6),Tt.lightMap&&l.enable(7),Tt.aoMap&&l.enable(8),Tt.emissiveMap&&l.enable(9),Tt.bumpMap&&l.enable(10),Tt.normalMap&&l.enable(11),Tt.objectSpaceNormalMap&&l.enable(12),Tt.tangentSpaceNormalMap&&l.enable(13),Tt.clearcoat&&l.enable(14),Tt.clearcoatMap&&l.enable(15),Tt.clearcoatRoughnessMap&&l.enable(16),Tt.clearcoatNormalMap&&l.enable(17),Tt.iridescence&&l.enable(18),Tt.iridescenceMap&&l.enable(19),Tt.iridescenceThicknessMap&&l.enable(20),Tt.displacementMap&&l.enable(21),Tt.specularMap&&l.enable(22),Tt.roughnessMap&&l.enable(23),Tt.metalnessMap&&l.enable(24),Tt.gradientMap&&l.enable(25),Tt.alphaMap&&l.enable(26),Tt.alphaTest&&l.enable(27),Tt.vertexColors&&l.enable(28),Tt.vertexAlphas&&l.enable(29),Tt.vertexUvs&&l.enable(30),Tt.vertexTangents&&l.enable(31),Tt.uvsVertexOnly&&l.enable(32),it.push(l.mask),l.disableAll(),Tt.fog&&l.enable(0),Tt.useFog&&l.enable(1),Tt.flatShading&&l.enable(2),Tt.logarithmicDepthBuffer&&l.enable(3),Tt.skinning&&l.enable(4),Tt.morphTargets&&l.enable(5),Tt.morphNormals&&l.enable(6),Tt.morphColors&&l.enable(7),Tt.premultipliedAlpha&&l.enable(8),Tt.shadowMapEnabled&&l.enable(9),Tt.physicallyCorrectLights&&l.enable(10),Tt.doubleSided&&l.enable(11),Tt.flipSided&&l.enable(12),Tt.useDepthPacking&&l.enable(13),Tt.dithering&&l.enable(14),Tt.specularIntensityMap&&l.enable(15),Tt.specularColorMap&&l.enable(16),Tt.transmission&&l.enable(17),Tt.transmissionMap&&l.enable(18),Tt.thicknessMap&&l.enable(19),Tt.sheen&&l.enable(20),Tt.sheenColorMap&&l.enable(21),Tt.sheenRoughnessMap&&l.enable(22),Tt.decodeVideoTexture&&l.enable(23),Tt.opaque&&l.enable(24),it.push(l.mask)}(Tt,it),Tt.push(i.outputEncoding)),Tt.push(it.customProgramCacheKey),Tt.join()},getUniforms:function be(it){const Tt=k[it.type];let un;return un=Tt?Pye.clone(pv[Tt].uniforms):it.uniforms,un},acquireProgram:function Se(it,Tt){let un;for(let ei=0,fi=p.length;ei<fi;ei++){const ni=p[ei];if(ni.cacheKey===Tt){un=ni,++un.usedTimes;break}}return void 0===un&&(un=new lCe(i,Tt,it,s),p.push(un)),un},releaseProgram:function Ye(it){if(0==--it.usedTimes){const Tt=p.indexOf(it);p[Tt]=p[p.length-1],p.pop(),it.destroy()}},releaseShaderCache:function gt(it){u.remove(it)},programs:p,dispose:function zt(){u.dispose()}}}function fCe(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,l){i.get(s)[o]=l},dispose:function r(){i=new WeakMap}}}function pCe(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function MG(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function DG(){const i=[];let t=0;const e=[],n=[],r=[];function o(w,I,T,k,H,X){let ue=i[t];return void 0===ue?(ue={id:w.id,object:w,geometry:I,material:T,groupOrder:k,renderOrder:w.renderOrder,z:H,group:X},i[t]=ue):(ue.id=w.id,ue.object=w,ue.geometry=I,ue.material=T,ue.groupOrder=k,ue.renderOrder=w.renderOrder,ue.z=H,ue.group=X),t++,ue}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function l(w,I,T,k,H,X){const ue=o(w,I,T,k,H,X);T.transmission>0?n.push(ue):!0===T.transparent?r.push(ue):e.push(ue)},unshift:function u(w,I,T,k,H,X){const ue=o(w,I,T,k,H,X);T.transmission>0?n.unshift(ue):!0===T.transparent?r.unshift(ue):e.unshift(ue)},finish:function v(){for(let w=t,I=i.length;w<I;w++){const T=i[w];if(null===T.id)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}},sort:function p(w,I){e.length>1&&e.sort(w||pCe),n.length>1&&n.sort(I||MG),r.length>1&&r.sort(I||MG)}}}function gCe(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let o;return void 0===s?(o=new DG,i.set(n,[o])):r>=s.length?(o=new DG,s.push(o)):o=s[r],o},dispose:function e(){i=new WeakMap}}}function mCe(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new Jt,color:new ws};break;case"SpotLight":e={position:new Jt,direction:new Jt,color:new ws,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new Jt,color:new ws,distance:0,decay:0};break;case"HemisphereLight":e={direction:new Jt,skyColor:new ws,groundColor:new ws};break;case"RectAreaLight":e={color:new ws,position:new Jt,halfWidth:new Jt,halfHeight:new Jt}}return i[t.id]=e,e}}}let yCe=0;function _Ce(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function bCe(i,t){const e=new mCe,n=function vCe(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sr};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new sr,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let v=0;v<9;v++)r.probe.push(new Jt);const s=new Jt,o=new Uo,l=new Uo;return{setup:function u(v,w){let I=0,T=0,k=0;for(let ei=0;ei<9;ei++)r.probe[ei].set(0,0,0);let H=0,X=0,ue=0,xe=0,be=0,Se=0,Ye=0,gt=0,zt=0,it=0;v.sort(_Ce);const Tt=!0!==w?Math.PI:1;for(let ei=0,fi=v.length;ei<fi;ei++){const ni=v[ei],Bn=ni.color,Zn=ni.intensity,Rn=ni.distance,ti=ni.shadow&&ni.shadow.map?ni.shadow.map.texture:null;if(ni.isAmbientLight)I+=Bn.r*Zn*Tt,T+=Bn.g*Zn*Tt,k+=Bn.b*Zn*Tt;else if(ni.isLightProbe)for(let Yn=0;Yn<9;Yn++)r.probe[Yn].addScaledVector(ni.sh.coefficients[Yn],Zn);else if(ni.isDirectionalLight){const Yn=e.get(ni);if(Yn.color.copy(ni.color).multiplyScalar(ni.intensity*Tt),ni.castShadow){const kn=ni.shadow,Qn=n.get(ni);Qn.shadowBias=kn.bias,Qn.shadowNormalBias=kn.normalBias,Qn.shadowRadius=kn.radius,Qn.shadowMapSize=kn.mapSize,r.directionalShadow[H]=Qn,r.directionalShadowMap[H]=ti,r.directionalShadowMatrix[H]=ni.shadow.matrix,Se++}r.directional[H]=Yn,H++}else if(ni.isSpotLight){const Yn=e.get(ni);Yn.position.setFromMatrixPosition(ni.matrixWorld),Yn.color.copy(Bn).multiplyScalar(Zn*Tt),Yn.distance=Rn,Yn.coneCos=Math.cos(ni.angle),Yn.penumbraCos=Math.cos(ni.angle*(1-ni.penumbra)),Yn.decay=ni.decay,r.spot[ue]=Yn;const kn=ni.shadow;if(ni.map&&(r.spotLightMap[zt]=ni.map,zt++,kn.updateMatrices(ni),ni.castShadow&&it++),r.spotLightMatrix[ue]=kn.matrix,ni.castShadow){const Qn=n.get(ni);Qn.shadowBias=kn.bias,Qn.shadowNormalBias=kn.normalBias,Qn.shadowRadius=kn.radius,Qn.shadowMapSize=kn.mapSize,r.spotShadow[ue]=Qn,r.spotShadowMap[ue]=ti,gt++}ue++}else if(ni.isRectAreaLight){const Yn=e.get(ni);Yn.color.copy(Bn).multiplyScalar(Zn),Yn.halfWidth.set(.5*ni.width,0,0),Yn.halfHeight.set(0,.5*ni.height,0),r.rectArea[xe]=Yn,xe++}else if(ni.isPointLight){const Yn=e.get(ni);if(Yn.color.copy(ni.color).multiplyScalar(ni.intensity*Tt),Yn.distance=ni.distance,Yn.decay=ni.decay,ni.castShadow){const kn=ni.shadow,Qn=n.get(ni);Qn.shadowBias=kn.bias,Qn.shadowNormalBias=kn.normalBias,Qn.shadowRadius=kn.radius,Qn.shadowMapSize=kn.mapSize,Qn.shadowCameraNear=kn.camera.near,Qn.shadowCameraFar=kn.camera.far,r.pointShadow[X]=Qn,r.pointShadowMap[X]=ti,r.pointShadowMatrix[X]=ni.shadow.matrix,Ye++}r.point[X]=Yn,X++}else if(ni.isHemisphereLight){const Yn=e.get(ni);Yn.skyColor.copy(ni.color).multiplyScalar(Zn*Tt),Yn.groundColor.copy(ni.groundColor).multiplyScalar(Zn*Tt),r.hemi[be]=Yn,be++}}xe>0&&(t.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Gr.LTC_FLOAT_1,r.rectAreaLTC2=Gr.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Gr.LTC_HALF_1,r.rectAreaLTC2=Gr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=I,r.ambient[1]=T,r.ambient[2]=k;const un=r.hash;(un.directionalLength!==H||un.pointLength!==X||un.spotLength!==ue||un.rectAreaLength!==xe||un.hemiLength!==be||un.numDirectionalShadows!==Se||un.numPointShadows!==Ye||un.numSpotShadows!==gt||un.numSpotMaps!==zt)&&(r.directional.length=H,r.spot.length=ue,r.rectArea.length=xe,r.point.length=X,r.hemi.length=be,r.directionalShadow.length=Se,r.directionalShadowMap.length=Se,r.pointShadow.length=Ye,r.pointShadowMap.length=Ye,r.spotShadow.length=gt,r.spotShadowMap.length=gt,r.directionalShadowMatrix.length=Se,r.pointShadowMatrix.length=Ye,r.spotLightMatrix.length=gt+zt-it,r.spotLightMap.length=zt,r.numSpotLightShadowsWithMaps=it,un.directionalLength=H,un.pointLength=X,un.spotLength=ue,un.rectAreaLength=xe,un.hemiLength=be,un.numDirectionalShadows=Se,un.numPointShadows=Ye,un.numSpotShadows=gt,un.numSpotMaps=zt,r.version=yCe++)},setupView:function p(v,w){let I=0,T=0,k=0,H=0,X=0;const ue=w.matrixWorldInverse;for(let xe=0,be=v.length;xe<be;xe++){const Se=v[xe];if(Se.isDirectionalLight){const Ye=r.directional[I];Ye.direction.setFromMatrixPosition(Se.matrixWorld),s.setFromMatrixPosition(Se.target.matrixWorld),Ye.direction.sub(s),Ye.direction.transformDirection(ue),I++}else if(Se.isSpotLight){const Ye=r.spot[k];Ye.position.setFromMatrixPosition(Se.matrixWorld),Ye.position.applyMatrix4(ue),Ye.direction.setFromMatrixPosition(Se.matrixWorld),s.setFromMatrixPosition(Se.target.matrixWorld),Ye.direction.sub(s),Ye.direction.transformDirection(ue),k++}else if(Se.isRectAreaLight){const Ye=r.rectArea[H];Ye.position.setFromMatrixPosition(Se.matrixWorld),Ye.position.applyMatrix4(ue),l.identity(),o.copy(Se.matrixWorld),o.premultiply(ue),l.extractRotation(o),Ye.halfWidth.set(.5*Se.width,0,0),Ye.halfHeight.set(0,.5*Se.height,0),Ye.halfWidth.applyMatrix4(l),Ye.halfHeight.applyMatrix4(l),H++}else if(Se.isPointLight){const Ye=r.point[T];Ye.position.setFromMatrixPosition(Se.matrixWorld),Ye.position.applyMatrix4(ue),T++}else if(Se.isHemisphereLight){const Ye=r.hemi[X];Ye.direction.setFromMatrixPosition(Se.matrixWorld),Ye.direction.transformDirection(ue),X++}}},state:r}}function LG(i,t){const e=new bCe(i,t),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:e},setupLights:function u(w){e.setup(n,w)},setupLightsView:function p(w){e.setupView(n,w)},pushLight:function o(w){n.push(w)},pushShadow:function l(w){r.push(w)}}}function CCe(i,t){let e=new WeakMap;return{get:function n(s,o=0){const l=e.get(s);let u;return void 0===l?(u=new LG(i,t),e.set(s,[u])):o>=l.length?(u=new LG(i,t),l.push(u)):u=l[o],u},dispose:function r(){e=new WeakMap}}}class PG extends X0{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class RG extends X0{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Jt,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function xCe(i,t,e){let n=new IP;const r=new sr,s=new sr,o=new Bl,l=new PG({depthPacking:3201}),u=new RG,p={},v=e.maxTextureSize,w={0:1,1:0,2:2},I=new D_({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new sr},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=I.clone();T.defines.HORIZONTAL_PASS=1;const k=new ha;k.setAttribute("position",new Hd(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const H=new jh(k,I),X=this;function ue(Se,Ye){const gt=t.update(H);I.defines.VSM_SAMPLES!==Se.blurSamples&&(I.defines.VSM_SAMPLES=Se.blurSamples,T.defines.VSM_SAMPLES=Se.blurSamples,I.needsUpdate=!0,T.needsUpdate=!0),null===Se.mapPass&&(Se.mapPass=new W0(r.x,r.y)),I.uniforms.shadow_pass.value=Se.map.texture,I.uniforms.resolution.value=Se.mapSize,I.uniforms.radius.value=Se.radius,i.setRenderTarget(Se.mapPass),i.clear(),i.renderBufferDirect(Ye,null,gt,I,H,null),T.uniforms.shadow_pass.value=Se.mapPass.texture,T.uniforms.resolution.value=Se.mapSize,T.uniforms.radius.value=Se.radius,i.setRenderTarget(Se.map),i.clear(),i.renderBufferDirect(Ye,null,gt,T,H,null)}function xe(Se,Ye,gt,zt,it,Tt){let un=null;const ei=!0===gt.isPointLight?Se.customDistanceMaterial:Se.customDepthMaterial;if(un=void 0!==ei?ei:!0===gt.isPointLight?u:l,i.localClippingEnabled&&!0===Ye.clipShadows&&Array.isArray(Ye.clippingPlanes)&&0!==Ye.clippingPlanes.length||Ye.displacementMap&&0!==Ye.displacementScale||Ye.alphaMap&&Ye.alphaTest>0){const fi=un.uuid,ni=Ye.uuid;let Bn=p[fi];void 0===Bn&&(Bn={},p[fi]=Bn);let Zn=Bn[ni];void 0===Zn&&(Zn=un.clone(),Bn[ni]=Zn),un=Zn}return un.visible=Ye.visible,un.wireframe=Ye.wireframe,un.side=3===Tt?null!==Ye.shadowSide?Ye.shadowSide:Ye.side:null!==Ye.shadowSide?Ye.shadowSide:w[Ye.side],un.alphaMap=Ye.alphaMap,un.alphaTest=Ye.alphaTest,un.clipShadows=Ye.clipShadows,un.clippingPlanes=Ye.clippingPlanes,un.clipIntersection=Ye.clipIntersection,un.displacementMap=Ye.displacementMap,un.displacementScale=Ye.displacementScale,un.displacementBias=Ye.displacementBias,un.wireframeLinewidth=Ye.wireframeLinewidth,un.linewidth=Ye.linewidth,!0===gt.isPointLight&&!0===un.isMeshDistanceMaterial&&(un.referencePosition.setFromMatrixPosition(gt.matrixWorld),un.nearDistance=zt,un.farDistance=it),un}function be(Se,Ye,gt,zt,it){if(!1===Se.visible)return;if(Se.layers.test(Ye.layers)&&(Se.isMesh||Se.isLine||Se.isPoints)&&(Se.castShadow||Se.receiveShadow&&3===it)&&(!Se.frustumCulled||n.intersectsObject(Se))){Se.modelViewMatrix.multiplyMatrices(gt.matrixWorldInverse,Se.matrixWorld);const ei=t.update(Se),fi=Se.material;if(Array.isArray(fi)){const ni=ei.groups;for(let Bn=0,Zn=ni.length;Bn<Zn;Bn++){const Rn=ni[Bn],ti=fi[Rn.materialIndex];if(ti&&ti.visible){const Yn=xe(Se,ti,zt,gt.near,gt.far,it);i.renderBufferDirect(gt,null,ei,Yn,Se,Rn)}}}else if(fi.visible){const ni=xe(Se,fi,zt,gt.near,gt.far,it);i.renderBufferDirect(gt,null,ei,ni,Se,null)}}const un=Se.children;for(let ei=0,fi=un.length;ei<fi;ei++)be(un[ei],Ye,gt,zt,it)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Se,Ye,gt){if(!1===X.enabled||!1===X.autoUpdate&&!1===X.needsUpdate||0===Se.length)return;const zt=i.getRenderTarget(),it=i.getActiveCubeFace(),Tt=i.getActiveMipmapLevel(),un=i.state;un.setBlending(0),un.buffers.color.setClear(1,1,1,1),un.buffers.depth.setTest(!0),un.setScissorTest(!1);for(let ei=0,fi=Se.length;ei<fi;ei++){const ni=Se[ei],Bn=ni.shadow;if(void 0===Bn){console.warn("THREE.WebGLShadowMap:",ni,"has no shadow.");continue}if(!1===Bn.autoUpdate&&!1===Bn.needsUpdate)continue;r.copy(Bn.mapSize);const Zn=Bn.getFrameExtents();r.multiply(Zn),s.copy(Bn.mapSize),(r.x>v||r.y>v)&&(r.x>v&&(s.x=Math.floor(v/Zn.x),r.x=s.x*Zn.x,Bn.mapSize.x=s.x),r.y>v&&(s.y=Math.floor(v/Zn.y),r.y=s.y*Zn.y,Bn.mapSize.y=s.y)),null===Bn.map&&(Bn.map=new W0(r.x,r.y,3!==this.type?{minFilter:bd,magFilter:bd}:{}),Bn.map.texture.name=ni.name+".shadowMap",Bn.camera.updateProjectionMatrix()),i.setRenderTarget(Bn.map),i.clear();const Rn=Bn.getViewportCount();for(let ti=0;ti<Rn;ti++){const Yn=Bn.getViewport(ti);o.set(s.x*Yn.x,s.y*Yn.y,s.x*Yn.z,s.y*Yn.w),un.viewport(o),Bn.updateMatrices(ni,ti),n=Bn.getFrustum(),be(Ye,gt,Bn.camera,ni,this.type)}!0!==Bn.isPointLightShadow&&3===this.type&&ue(Bn,gt),Bn.needsUpdate=!1}X.needsUpdate=!1,i.setRenderTarget(zt,it,Tt)}}function ICe(i,t,e){const n=e.isWebGL2,l=new function r(){let Un=!1;const Fi=new Bl;let xr=null;const vs=new Bl(0,0,0,0);return{setMask:function(Ws){xr!==Ws&&!Un&&(i.colorMask(Ws,Ws,Ws,Ws),xr=Ws)},setLocked:function(Ws){Un=Ws},setClear:function(Ws,_l,jd,$h,ub){!0===ub&&(Ws*=$h,_l*=$h,jd*=$h),Fi.set(Ws,_l,jd,$h),!1===vs.equals(Fi)&&(i.clearColor(Ws,_l,jd,$h),vs.copy(Fi))},reset:function(){Un=!1,xr=null,vs.set(-1,0,0,0)}}},u=new function s(){let Un=!1,Fi=null,xr=null,vs=null;return{setTest:function(Ws){Ws?Gs(2929):ks(2929)},setMask:function(Ws){Fi!==Ws&&!Un&&(i.depthMask(Ws),Fi=Ws)},setFunc:function(Ws){if(xr!==Ws){switch(Ws){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}xr=Ws}},setLocked:function(Ws){Un=Ws},setClear:function(Ws){vs!==Ws&&(i.clearDepth(Ws),vs=Ws)},reset:function(){Un=!1,Fi=null,xr=null,vs=null}}},p=new function o(){let Un=!1,Fi=null,xr=null,vs=null,Ws=null,_l=null,jd=null,$h=null,ub=null;return{setTest:function(Rc){Un||(Rc?Gs(2960):ks(2960))},setMask:function(Rc){Fi!==Rc&&!Un&&(i.stencilMask(Rc),Fi=Rc)},setFunc:function(Rc,Ty,Rg){(xr!==Rc||vs!==Ty||Ws!==Rg)&&(i.stencilFunc(Rc,Ty,Rg),xr=Rc,vs=Ty,Ws=Rg)},setOp:function(Rc,Ty,Rg){(_l!==Rc||jd!==Ty||$h!==Rg)&&(i.stencilOp(Rc,Ty,Rg),_l=Rc,jd=Ty,$h=Rg)},setLocked:function(Rc){Un=Rc},setClear:function(Rc){ub!==Rc&&(i.clearStencil(Rc),ub=Rc)},reset:function(){Un=!1,Fi=null,xr=null,vs=null,Ws=null,_l=null,jd=null,$h=null,ub=null}}},v=new WeakMap,w=new WeakMap;let I={},T={},k=new WeakMap,H=[],X=null,ue=!1,xe=null,be=null,Se=null,Ye=null,gt=null,zt=null,it=null,Tt=!1,un=null,ei=null,fi=null,ni=null,Bn=null;const Zn=i.getParameter(35661);let Rn=!1,ti=0;const Yn=i.getParameter(7938);-1!==Yn.indexOf("WebGL")?(ti=parseFloat(/^WebGL (\d)/.exec(Yn)[1]),Rn=ti>=1):-1!==Yn.indexOf("OpenGL ES")&&(ti=parseFloat(/^OpenGL ES (\d)/.exec(Yn)[1]),Rn=ti>=2);let kn=null,Qn={};const or=i.getParameter(3088),Bi=i.getParameter(2978),yr=(new Bl).fromArray(or),Sr=(new Bl).fromArray(Bi);function Ys(Un,Fi,xr){const vs=new Uint8Array(4),Ws=i.createTexture();i.bindTexture(Un,Ws),i.texParameteri(Un,10241,9728),i.texParameteri(Un,10240,9728);for(let _l=0;_l<xr;_l++)i.texImage2D(Fi+_l,0,6408,1,1,0,6408,5121,vs);return Ws}const Ui={};function Gs(Un){!0!==I[Un]&&(i.enable(Un),I[Un]=!0)}function ks(Un){!1!==I[Un]&&(i.disable(Un),I[Un]=!1)}Ui[3553]=Ys(3553,3553,1),Ui[34067]=Ys(34067,34069,6),l.setClear(0,0,0,1),u.setClear(1),p.setClear(0),Gs(2929),u.setFunc(3),es(!1),Ho(1),Gs(2884),Br(0);const er={100:32774,101:32778,102:32779};if(n)er[103]=32775,er[104]=32776;else{const Un=t.get("EXT_blend_minmax");null!==Un&&(er[103]=Un.MIN_EXT,er[104]=Un.MAX_EXT)}const Xi={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Br(Un,Fi,xr,vs,Ws,_l,jd,$h){if(0!==Un){if(!1===ue&&(Gs(3042),ue=!0),5===Un)Ws=Ws||Fi,_l=_l||xr,jd=jd||vs,(Fi!==be||Ws!==gt)&&(i.blendEquationSeparate(er[Fi],er[Ws]),be=Fi,gt=Ws),(xr!==Se||vs!==Ye||_l!==zt||jd!==it)&&(i.blendFuncSeparate(Xi[xr],Xi[vs],Xi[_l],Xi[jd]),Se=xr,Ye=vs,zt=_l,it=jd),xe=Un,Tt=null;else if(Un!==xe||$h!==Tt){if((100!==be||100!==gt)&&(i.blendEquation(32774),be=100,gt=100),$h)switch(Un){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Un)}else switch(Un){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Un)}Se=null,Ye=null,zt=null,it=null,xe=Un,Tt=$h}}else!0===ue&&(ks(3042),ue=!1)}function es(Un){un!==Un&&(i.frontFace(Un?2304:2305),un=Un)}function Ho(Un){0!==Un?(Gs(2884),Un!==ei&&i.cullFace(1===Un?1029:2===Un?1028:1032)):ks(2884),ei=Un}function ao(Un,Fi,xr){Un?(Gs(32823),(ni!==Fi||Bn!==xr)&&(i.polygonOffset(Fi,xr),ni=Fi,Bn=xr)):ks(32823)}return{buffers:{color:l,depth:u,stencil:p},enable:Gs,disable:ks,bindFramebuffer:function Os(Un,Fi){return T[Un]!==Fi&&(i.bindFramebuffer(Un,Fi),T[Un]=Fi,n&&(36009===Un&&(T[36160]=Fi),36160===Un&&(T[36009]=Fi)),!0)},drawBuffers:function $r(Un,Fi){let xr=H,vs=!1;if(Un)if(xr=k.get(Fi),void 0===xr&&(xr=[],k.set(Fi,xr)),Un.isWebGLMultipleRenderTargets){const Ws=Un.texture;if(xr.length!==Ws.length||36064!==xr[0]){for(let _l=0,jd=Ws.length;_l<jd;_l++)xr[_l]=36064+_l;xr.length=Ws.length,vs=!0}}else 36064!==xr[0]&&(xr[0]=36064,vs=!0);else 1029!==xr[0]&&(xr[0]=1029,vs=!0);vs&&(e.isWebGL2?i.drawBuffers(xr):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(xr))},useProgram:function Ko(Un){return X!==Un&&(i.useProgram(Un),X=Un,!0)},setBlending:Br,setMaterial:function Rs(Un,Fi){2===Un.side?ks(2884):Gs(2884);let xr=1===Un.side;Fi&&(xr=!xr),es(xr),1===Un.blending&&!1===Un.transparent?Br(0):Br(Un.blending,Un.blendEquation,Un.blendSrc,Un.blendDst,Un.blendEquationAlpha,Un.blendSrcAlpha,Un.blendDstAlpha,Un.premultipliedAlpha),u.setFunc(Un.depthFunc),u.setTest(Un.depthTest),u.setMask(Un.depthWrite),l.setMask(Un.colorWrite);const vs=Un.stencilWrite;p.setTest(vs),vs&&(p.setMask(Un.stencilWriteMask),p.setFunc(Un.stencilFunc,Un.stencilRef,Un.stencilFuncMask),p.setOp(Un.stencilFail,Un.stencilZFail,Un.stencilZPass)),ao(Un.polygonOffset,Un.polygonOffsetFactor,Un.polygonOffsetUnits),!0===Un.alphaToCoverage?Gs(32926):ks(32926)},setFlipSided:es,setCullFace:Ho,setLineWidth:function vo(Un){Un!==fi&&(Rn&&i.lineWidth(Un),fi=Un)},setPolygonOffset:ao,setScissorTest:function vc(Un){Un?Gs(3089):ks(3089)},activeTexture:function ql(Un){void 0===Un&&(Un=33984+Zn-1),kn!==Un&&(i.activeTexture(Un),kn=Un)},bindTexture:function hn(Un,Fi,xr){void 0===xr&&(xr=null===kn?33984+Zn-1:kn);let vs=Qn[xr];void 0===vs&&(vs={type:void 0,texture:void 0},Qn[xr]=vs),(vs.type!==Un||vs.texture!==Fi)&&(kn!==xr&&(i.activeTexture(xr),kn=xr),i.bindTexture(Un,Fi||Ui[Un]),vs.type=Un,vs.texture=Fi)},unbindTexture:function jt(){const Un=Qn[kn];void 0!==Un&&void 0!==Un.type&&(i.bindTexture(Un.type,null),Un.type=void 0,Un.texture=void 0)},compressedTexImage2D:function wi(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},compressedTexImage3D:function Ir(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},texImage2D:function yo(){try{i.texImage2D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},texImage3D:function Fs(){try{i.texImage3D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},updateUBOMapping:function Qa(Un,Fi){let xr=w.get(Fi);void 0===xr&&(xr=new WeakMap,w.set(Fi,xr));let vs=xr.get(Un);void 0===vs&&(vs=i.getUniformBlockIndex(Fi,Un.name),xr.set(Un,vs))},uniformBlockBinding:function Pc(Un,Fi){const vs=w.get(Fi).get(Un);v.get(Un)!==vs&&(i.uniformBlockBinding(Fi,vs,Un.__bindingPointIndex),v.set(Un,vs))},texStorage2D:function Yi(){try{i.texStorage2D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},texStorage3D:function Js(){try{i.texStorage3D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},texSubImage2D:function Nr(){try{i.texSubImage2D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},texSubImage3D:function ls(){try{i.texSubImage3D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},compressedTexSubImage2D:function Ao(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},compressedTexSubImage3D:function us(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Un){console.error("THREE.WebGLState:",Un)}},scissor:function ho(Un){!1===yr.equals(Un)&&(i.scissor(Un.x,Un.y,Un.z,Un.w),yr.copy(Un))},viewport:function eo(Un){!1===Sr.equals(Un)&&(i.viewport(Un.x,Un.y,Un.z,Un.w),Sr.copy(Un))},reset:function Wd(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),I={},kn=null,Qn={},T={},k=new WeakMap,H=[],X=null,ue=!1,xe=null,be=null,Se=null,Ye=null,gt=null,zt=null,it=null,Tt=!1,un=null,ei=null,fi=null,ni=null,Bn=null,yr.set(0,0,i.canvas.width,i.canvas.height),Sr.set(0,0,i.canvas.width,i.canvas.height),l.reset(),u.reset(),p.reset()}}}function SCe(i,t,e,n,r,s,o){const l=r.isWebGL2,u=r.maxTextures,p=r.maxCubemapSize,v=r.maxTextureSize,w=r.maxSamples,I=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,T=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),k=new WeakMap;let H;const X=new WeakMap;let ue=!1;try{ue=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function xe(hn,jt){return ue?new OffscreenCanvas(hn,jt):lx("canvas")}function be(hn,jt,wi,Ir){let Nr=1;if((hn.width>Ir||hn.height>Ir)&&(Nr=Ir/Math.max(hn.width,hn.height)),Nr<1||!0===jt){if(typeof HTMLImageElement<"u"&&hn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&hn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&hn instanceof ImageBitmap){const ls=jt?GS:Math.floor,Ao=ls(Nr*hn.width),us=ls(Nr*hn.height);void 0===H&&(H=xe(Ao,us));const Yi=wi?xe(Ao,us):H;return Yi.width=Ao,Yi.height=us,Yi.getContext("2d").drawImage(hn,0,0,Ao,us),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+hn.width+"x"+hn.height+") to ("+Ao+"x"+us+")."),Yi}return"data"in hn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+hn.width+"x"+hn.height+")."),hn}return hn}function Se(hn){return eP(hn.width)&&eP(hn.height)}function gt(hn,jt){return hn.generateMipmaps&&jt&&hn.minFilter!==bd&&hn.minFilter!==ed}function zt(hn){i.generateMipmap(hn)}function it(hn,jt,wi,Ir,Nr=!1){if(!1===l)return jt;if(null!==hn){if(void 0!==i[hn])return i[hn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+hn+"'")}let ls=jt;return 6403===jt&&(5126===wi&&(ls=33326),5131===wi&&(ls=33325),5121===wi&&(ls=33321)),33319===jt&&(5126===wi&&(ls=33328),5131===wi&&(ls=33327),5121===wi&&(ls=33323)),6408===jt&&(5126===wi&&(ls=34836),5131===wi&&(ls=34842),5121===wi&&(ls=Ir===bu&&!1===Nr?35907:32856),32819===wi&&(ls=32854),32820===wi&&(ls=32855)),(33325===ls||33326===ls||33327===ls||33328===ls||34842===ls||34836===ls)&&t.get("EXT_color_buffer_float"),ls}function Tt(hn,jt,wi){return!0===gt(hn,wi)||hn.isFramebufferTexture&&hn.minFilter!==bd&&hn.minFilter!==ed?Math.log2(Math.max(jt.width,jt.height))+1:void 0!==hn.mipmaps&&hn.mipmaps.length>0?hn.mipmaps.length:hn.isCompressedTexture&&Array.isArray(hn.image)?jt.mipmaps.length:1}function un(hn){return hn===bd||1004===hn||1005===hn?9728:9729}function ei(hn){const jt=hn.target;jt.removeEventListener("dispose",ei),function ni(hn){const jt=n.get(hn);if(void 0===jt.__webglInit)return;const wi=hn.source,Ir=X.get(wi);if(Ir){const Nr=Ir[jt.__cacheKey];Nr.usedTimes--,0===Nr.usedTimes&&Bn(hn),0===Object.keys(Ir).length&&X.delete(wi)}n.remove(hn)}(jt),jt.isVideoTexture&&k.delete(jt)}function fi(hn){const jt=hn.target;jt.removeEventListener("dispose",fi),function Zn(hn){const jt=hn.texture,wi=n.get(hn),Ir=n.get(jt);if(void 0!==Ir.__webglTexture&&(i.deleteTexture(Ir.__webglTexture),o.memory.textures--),hn.depthTexture&&hn.depthTexture.dispose(),hn.isWebGLCubeRenderTarget)for(let Nr=0;Nr<6;Nr++)i.deleteFramebuffer(wi.__webglFramebuffer[Nr]),wi.__webglDepthbuffer&&i.deleteRenderbuffer(wi.__webglDepthbuffer[Nr]);else{if(i.deleteFramebuffer(wi.__webglFramebuffer),wi.__webglDepthbuffer&&i.deleteRenderbuffer(wi.__webglDepthbuffer),wi.__webglMultisampledFramebuffer&&i.deleteFramebuffer(wi.__webglMultisampledFramebuffer),wi.__webglColorRenderbuffer)for(let Nr=0;Nr<wi.__webglColorRenderbuffer.length;Nr++)wi.__webglColorRenderbuffer[Nr]&&i.deleteRenderbuffer(wi.__webglColorRenderbuffer[Nr]);wi.__webglDepthRenderbuffer&&i.deleteRenderbuffer(wi.__webglDepthRenderbuffer)}if(hn.isWebGLMultipleRenderTargets)for(let Nr=0,ls=jt.length;Nr<ls;Nr++){const Ao=n.get(jt[Nr]);Ao.__webglTexture&&(i.deleteTexture(Ao.__webglTexture),o.memory.textures--),n.remove(jt[Nr])}n.remove(jt),n.remove(hn)}(jt)}function Bn(hn){const jt=n.get(hn);i.deleteTexture(jt.__webglTexture),delete X.get(hn.source)[jt.__cacheKey],o.memory.textures--}let Rn=0;function Qn(hn,jt){const wi=n.get(hn);if(hn.isVideoTexture&&function vc(hn){const jt=o.render.frame;k.get(hn)!==jt&&(k.set(hn,jt),hn.update())}(hn),!1===hn.isRenderTargetTexture&&hn.version>0&&wi.__version!==hn.version){const Ir=hn.image;if(null===Ir)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ir.complete)return void ks(wi,hn,jt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(3553,wi.__webglTexture,33984+jt)}const Sr={1e3:10497,[wf]:33071,1002:33648},Ys={[bd]:9728,1004:9984,1005:9986,[ed]:9729,1007:9985,1008:9987};function Ui(hn,jt,wi){if(wi?(i.texParameteri(hn,10242,Sr[jt.wrapS]),i.texParameteri(hn,10243,Sr[jt.wrapT]),(32879===hn||35866===hn)&&i.texParameteri(hn,32882,Sr[jt.wrapR]),i.texParameteri(hn,10240,Ys[jt.magFilter]),i.texParameteri(hn,10241,Ys[jt.minFilter])):(i.texParameteri(hn,10242,33071),i.texParameteri(hn,10243,33071),(32879===hn||35866===hn)&&i.texParameteri(hn,32882,33071),(jt.wrapS!==wf||jt.wrapT!==wf)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(hn,10240,un(jt.magFilter)),i.texParameteri(hn,10241,un(jt.minFilter)),jt.minFilter!==bd&&jt.minFilter!==ed&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const Ir=t.get("EXT_texture_filter_anisotropic");if(jt.type===__&&!1===t.has("OES_texture_float_linear")||!1===l&&jt.type===sx&&!1===t.has("OES_texture_half_float_linear"))return;(jt.anisotropy>1||n.get(jt).__currentAnisotropy)&&(i.texParameterf(hn,Ir.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(jt.anisotropy,r.getMaxAnisotropy())),n.get(jt).__currentAnisotropy=jt.anisotropy)}}function Gs(hn,jt){let wi=!1;void 0===hn.__webglInit&&(hn.__webglInit=!0,jt.addEventListener("dispose",ei));const Ir=jt.source;let Nr=X.get(Ir);void 0===Nr&&(Nr={},X.set(Ir,Nr));const ls=function kn(hn){const jt=[];return jt.push(hn.wrapS),jt.push(hn.wrapT),jt.push(hn.wrapR||0),jt.push(hn.magFilter),jt.push(hn.minFilter),jt.push(hn.anisotropy),jt.push(hn.internalFormat),jt.push(hn.format),jt.push(hn.type),jt.push(hn.generateMipmaps),jt.push(hn.premultiplyAlpha),jt.push(hn.flipY),jt.push(hn.unpackAlignment),jt.push(hn.encoding),jt.join()}(jt);if(ls!==hn.__cacheKey){void 0===Nr[ls]&&(Nr[ls]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,wi=!0),Nr[ls].usedTimes++;const Ao=Nr[hn.__cacheKey];void 0!==Ao&&(Nr[hn.__cacheKey].usedTimes--,0===Ao.usedTimes&&Bn(jt)),hn.__cacheKey=ls,hn.__webglTexture=Nr[ls].texture}return wi}function ks(hn,jt,wi){let Ir=3553;(jt.isDataArrayTexture||jt.isCompressedArrayTexture)&&(Ir=35866),jt.isData3DTexture&&(Ir=32879);const Nr=Gs(hn,jt),ls=jt.source;e.bindTexture(Ir,hn.__webglTexture,33984+wi);const Ao=n.get(ls);if(ls.version!==Ao.__version||!0===Nr){e.activeTexture(33984+wi),i.pixelStorei(37440,jt.flipY),i.pixelStorei(37441,jt.premultiplyAlpha),i.pixelStorei(3317,jt.unpackAlignment),i.pixelStorei(37443,0);const us=function Ye(hn){return!l&&(hn.wrapS!==wf||hn.wrapT!==wf||hn.minFilter!==bd&&hn.minFilter!==ed)}(jt)&&!1===Se(jt.image);let Yi=be(jt.image,us,!1,v);Yi=ql(jt,Yi);const Js=Se(Yi)||l,yo=s.convert(jt.format,jt.encoding);let eo,Fs=s.convert(jt.type),ho=it(jt.internalFormat,yo,Fs,jt.encoding,jt.isVideoTexture);Ui(Ir,jt,Js);const Qa=jt.mipmaps,Pc=l&&!0!==jt.isVideoTexture,Wd=void 0===Ao.__version||!0===Nr,Un=Tt(jt,Yi,Js);if(jt.isDepthTexture)ho=6402,l?ho=jt.type===__?36012:jt.type===N0?33190:jt.type===AC?35056:33189:jt.type===__&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),jt.format===B0&&6402===ho&&1012!==jt.type&&jt.type!==N0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),jt.type=N0,Fs=s.convert(jt.type)),jt.format===xC&&6402===ho&&(ho=34041,jt.type!==AC&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),jt.type=AC,Fs=s.convert(jt.type))),Wd&&(Pc?e.texStorage2D(3553,1,ho,Yi.width,Yi.height):e.texImage2D(3553,0,ho,Yi.width,Yi.height,0,yo,Fs,null));else if(jt.isDataTexture)if(Qa.length>0&&Js){Pc&&Wd&&e.texStorage2D(3553,Un,ho,Qa[0].width,Qa[0].height);for(let Fi=0,xr=Qa.length;Fi<xr;Fi++)eo=Qa[Fi],Pc?e.texSubImage2D(3553,Fi,0,0,eo.width,eo.height,yo,Fs,eo.data):e.texImage2D(3553,Fi,ho,eo.width,eo.height,0,yo,Fs,eo.data);jt.generateMipmaps=!1}else Pc?(Wd&&e.texStorage2D(3553,Un,ho,Yi.width,Yi.height),e.texSubImage2D(3553,0,0,0,Yi.width,Yi.height,yo,Fs,Yi.data)):e.texImage2D(3553,0,ho,Yi.width,Yi.height,0,yo,Fs,Yi.data);else if(jt.isCompressedTexture)if(jt.isCompressedArrayTexture){Pc&&Wd&&e.texStorage3D(35866,Un,ho,Qa[0].width,Qa[0].height,Yi.depth);for(let Fi=0,xr=Qa.length;Fi<xr;Fi++)eo=Qa[Fi],jt.format!==Tg?null!==yo?Pc?e.compressedTexSubImage3D(35866,Fi,0,0,0,eo.width,eo.height,Yi.depth,yo,eo.data,0,0):e.compressedTexImage3D(35866,Fi,ho,eo.width,eo.height,Yi.depth,0,eo.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pc?e.texSubImage3D(35866,Fi,0,0,0,eo.width,eo.height,Yi.depth,yo,Fs,eo.data):e.texImage3D(35866,Fi,ho,eo.width,eo.height,Yi.depth,0,yo,Fs,eo.data)}else{Pc&&Wd&&e.texStorage2D(3553,Un,ho,Qa[0].width,Qa[0].height);for(let Fi=0,xr=Qa.length;Fi<xr;Fi++)eo=Qa[Fi],jt.format!==Tg?null!==yo?Pc?e.compressedTexSubImage2D(3553,Fi,0,0,eo.width,eo.height,yo,eo.data):e.compressedTexImage2D(3553,Fi,ho,eo.width,eo.height,0,eo.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pc?e.texSubImage2D(3553,Fi,0,0,eo.width,eo.height,yo,Fs,eo.data):e.texImage2D(3553,Fi,ho,eo.width,eo.height,0,yo,Fs,eo.data)}else if(jt.isDataArrayTexture)Pc?(Wd&&e.texStorage3D(35866,Un,ho,Yi.width,Yi.height,Yi.depth),e.texSubImage3D(35866,0,0,0,0,Yi.width,Yi.height,Yi.depth,yo,Fs,Yi.data)):e.texImage3D(35866,0,ho,Yi.width,Yi.height,Yi.depth,0,yo,Fs,Yi.data);else if(jt.isData3DTexture)Pc?(Wd&&e.texStorage3D(32879,Un,ho,Yi.width,Yi.height,Yi.depth),e.texSubImage3D(32879,0,0,0,0,Yi.width,Yi.height,Yi.depth,yo,Fs,Yi.data)):e.texImage3D(32879,0,ho,Yi.width,Yi.height,Yi.depth,0,yo,Fs,Yi.data);else if(jt.isFramebufferTexture){if(Wd)if(Pc)e.texStorage2D(3553,Un,ho,Yi.width,Yi.height);else{let Fi=Yi.width,xr=Yi.height;for(let vs=0;vs<Un;vs++)e.texImage2D(3553,vs,ho,Fi,xr,0,yo,Fs,null),Fi>>=1,xr>>=1}}else if(Qa.length>0&&Js){Pc&&Wd&&e.texStorage2D(3553,Un,ho,Qa[0].width,Qa[0].height);for(let Fi=0,xr=Qa.length;Fi<xr;Fi++)eo=Qa[Fi],Pc?e.texSubImage2D(3553,Fi,0,0,yo,Fs,eo):e.texImage2D(3553,Fi,ho,yo,Fs,eo);jt.generateMipmaps=!1}else Pc?(Wd&&e.texStorage2D(3553,Un,ho,Yi.width,Yi.height),e.texSubImage2D(3553,0,0,0,yo,Fs,Yi)):e.texImage2D(3553,0,ho,yo,Fs,Yi);gt(jt,Js)&&zt(Ir),Ao.__version=ls.version,jt.onUpdate&&jt.onUpdate(jt)}hn.__version=jt.version}function $r(hn,jt,wi,Ir,Nr){const ls=s.convert(wi.format,wi.encoding),Ao=s.convert(wi.type),us=it(wi.internalFormat,ls,Ao,wi.encoding);n.get(jt).__hasExternalTextures||(32879===Nr||35866===Nr?e.texImage3D(Nr,0,us,jt.width,jt.height,jt.depth,0,ls,Ao,null):e.texImage2D(Nr,0,us,jt.width,jt.height,0,ls,Ao,null)),e.bindFramebuffer(36160,hn),ao(jt)?I.framebufferTexture2DMultisampleEXT(36160,Ir,Nr,n.get(wi).__webglTexture,0,vo(jt)):(3553===Nr||Nr>=34069&&Nr<=34074)&&i.framebufferTexture2D(36160,Ir,Nr,n.get(wi).__webglTexture,0),e.bindFramebuffer(36160,null)}function Ko(hn,jt,wi){if(i.bindRenderbuffer(36161,hn),jt.depthBuffer&&!jt.stencilBuffer){let Ir=33189;if(wi||ao(jt)){const Nr=jt.depthTexture;Nr&&Nr.isDepthTexture&&(Nr.type===__?Ir=36012:Nr.type===N0&&(Ir=33190));const ls=vo(jt);ao(jt)?I.renderbufferStorageMultisampleEXT(36161,ls,Ir,jt.width,jt.height):i.renderbufferStorageMultisample(36161,ls,Ir,jt.width,jt.height)}else i.renderbufferStorage(36161,Ir,jt.width,jt.height);i.framebufferRenderbuffer(36160,36096,36161,hn)}else if(jt.depthBuffer&&jt.stencilBuffer){const Ir=vo(jt);wi&&!1===ao(jt)?i.renderbufferStorageMultisample(36161,Ir,35056,jt.width,jt.height):ao(jt)?I.renderbufferStorageMultisampleEXT(36161,Ir,35056,jt.width,jt.height):i.renderbufferStorage(36161,34041,jt.width,jt.height),i.framebufferRenderbuffer(36160,33306,36161,hn)}else{const Ir=!0===jt.isWebGLMultipleRenderTargets?jt.texture:[jt.texture];for(let Nr=0;Nr<Ir.length;Nr++){const ls=Ir[Nr],Ao=s.convert(ls.format,ls.encoding),us=s.convert(ls.type),Yi=it(ls.internalFormat,Ao,us,ls.encoding),Js=vo(jt);wi&&!1===ao(jt)?i.renderbufferStorageMultisample(36161,Js,Yi,jt.width,jt.height):ao(jt)?I.renderbufferStorageMultisampleEXT(36161,Js,Yi,jt.width,jt.height):i.renderbufferStorage(36161,Yi,jt.width,jt.height)}}i.bindRenderbuffer(36161,null)}function Xi(hn){const jt=n.get(hn),wi=!0===hn.isWebGLCubeRenderTarget;if(hn.depthTexture&&!jt.__autoAllocateDepthBuffer){if(wi)throw new Error("target.depthTexture not supported in Cube render targets");!function er(hn,jt){if(jt&&jt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,hn),!jt.depthTexture||!jt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(jt.depthTexture).__webglTexture||jt.depthTexture.image.width!==jt.width||jt.depthTexture.image.height!==jt.height)&&(jt.depthTexture.image.width=jt.width,jt.depthTexture.image.height=jt.height,jt.depthTexture.needsUpdate=!0),Qn(jt.depthTexture,0);const Ir=n.get(jt.depthTexture).__webglTexture,Nr=vo(jt);if(jt.depthTexture.format===B0)ao(jt)?I.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ir,0,Nr):i.framebufferTexture2D(36160,36096,3553,Ir,0);else{if(jt.depthTexture.format!==xC)throw new Error("Unknown depthTexture format");ao(jt)?I.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ir,0,Nr):i.framebufferTexture2D(36160,33306,3553,Ir,0)}}(jt.__webglFramebuffer,hn)}else if(wi){jt.__webglDepthbuffer=[];for(let Ir=0;Ir<6;Ir++)e.bindFramebuffer(36160,jt.__webglFramebuffer[Ir]),jt.__webglDepthbuffer[Ir]=i.createRenderbuffer(),Ko(jt.__webglDepthbuffer[Ir],hn,!1)}else e.bindFramebuffer(36160,jt.__webglFramebuffer),jt.__webglDepthbuffer=i.createRenderbuffer(),Ko(jt.__webglDepthbuffer,hn,!1);e.bindFramebuffer(36160,null)}function vo(hn){return Math.min(w,hn.samples)}function ao(hn){const jt=n.get(hn);return l&&hn.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==jt.__useRenderToTexture}function ql(hn,jt){const wi=hn.encoding,Ir=hn.format,Nr=hn.type;return!0===hn.isCompressedTexture||!0===hn.isVideoTexture||1035===hn.format||wi!==z0&&(wi===bu?!1===l?!0===t.has("EXT_sRGB")&&Ir===Tg?(hn.format=1035,hn.minFilter=ed,hn.generateMipmaps=!1):jt=j5.sRGBToLinear(jt):(Ir!==Tg||Nr!==F0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",wi)),jt}this.allocateTextureUnit=function Yn(){const hn=Rn;return hn>=u&&console.warn("THREE.WebGLTextures: Trying to use "+hn+" texture units while this GPU supports only "+u),Rn+=1,hn},this.resetTextureUnits=function ti(){Rn=0},this.setTexture2D=Qn,this.setTexture2DArray=function or(hn,jt){const wi=n.get(hn);hn.version>0&&wi.__version!==hn.version?ks(wi,hn,jt):e.bindTexture(35866,wi.__webglTexture,33984+jt)},this.setTexture3D=function Bi(hn,jt){const wi=n.get(hn);hn.version>0&&wi.__version!==hn.version?ks(wi,hn,jt):e.bindTexture(32879,wi.__webglTexture,33984+jt)},this.setTextureCube=function yr(hn,jt){const wi=n.get(hn);hn.version>0&&wi.__version!==hn.version?function Os(hn,jt,wi){if(6!==jt.image.length)return;const Ir=Gs(hn,jt),Nr=jt.source;e.bindTexture(34067,hn.__webglTexture,33984+wi);const ls=n.get(Nr);if(Nr.version!==ls.__version||!0===Ir){e.activeTexture(33984+wi),i.pixelStorei(37440,jt.flipY),i.pixelStorei(37441,jt.premultiplyAlpha),i.pixelStorei(3317,jt.unpackAlignment),i.pixelStorei(37443,0);const Ao=jt.isCompressedTexture||jt.image[0].isCompressedTexture,us=jt.image[0]&&jt.image[0].isDataTexture,Yi=[];for(let Fi=0;Fi<6;Fi++)Yi[Fi]=Ao||us?us?jt.image[Fi].image:jt.image[Fi]:be(jt.image[Fi],!1,!0,p),Yi[Fi]=ql(jt,Yi[Fi]);const Js=Yi[0],yo=Se(Js)||l,Fs=s.convert(jt.format,jt.encoding),ho=s.convert(jt.type),eo=it(jt.internalFormat,Fs,ho,jt.encoding),Qa=l&&!0!==jt.isVideoTexture,Pc=void 0===ls.__version||!0===Ir;let Un,Wd=Tt(jt,Js,yo);if(Ui(34067,jt,yo),Ao){Qa&&Pc&&e.texStorage2D(34067,Wd,eo,Js.width,Js.height);for(let Fi=0;Fi<6;Fi++){Un=Yi[Fi].mipmaps;for(let xr=0;xr<Un.length;xr++){const vs=Un[xr];jt.format!==Tg?null!==Fs?Qa?e.compressedTexSubImage2D(34069+Fi,xr,0,0,vs.width,vs.height,Fs,vs.data):e.compressedTexImage2D(34069+Fi,xr,eo,vs.width,vs.height,0,vs.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Qa?e.texSubImage2D(34069+Fi,xr,0,0,vs.width,vs.height,Fs,ho,vs.data):e.texImage2D(34069+Fi,xr,eo,vs.width,vs.height,0,Fs,ho,vs.data)}}}else{Un=jt.mipmaps,Qa&&Pc&&(Un.length>0&&Wd++,e.texStorage2D(34067,Wd,eo,Yi[0].width,Yi[0].height));for(let Fi=0;Fi<6;Fi++)if(us){Qa?e.texSubImage2D(34069+Fi,0,0,0,Yi[Fi].width,Yi[Fi].height,Fs,ho,Yi[Fi].data):e.texImage2D(34069+Fi,0,eo,Yi[Fi].width,Yi[Fi].height,0,Fs,ho,Yi[Fi].data);for(let xr=0;xr<Un.length;xr++){const Ws=Un[xr].image[Fi].image;Qa?e.texSubImage2D(34069+Fi,xr+1,0,0,Ws.width,Ws.height,Fs,ho,Ws.data):e.texImage2D(34069+Fi,xr+1,eo,Ws.width,Ws.height,0,Fs,ho,Ws.data)}}else{Qa?e.texSubImage2D(34069+Fi,0,0,0,Fs,ho,Yi[Fi]):e.texImage2D(34069+Fi,0,eo,Fs,ho,Yi[Fi]);for(let xr=0;xr<Un.length;xr++){const vs=Un[xr];Qa?e.texSubImage2D(34069+Fi,xr+1,0,0,Fs,ho,vs.image[Fi]):e.texImage2D(34069+Fi,xr+1,eo,Fs,ho,vs.image[Fi])}}}gt(jt,yo)&&zt(34067),ls.__version=Nr.version,jt.onUpdate&&jt.onUpdate(jt)}hn.__version=jt.version}(wi,hn,jt):e.bindTexture(34067,wi.__webglTexture,33984+jt)},this.rebindTextures=function Br(hn,jt,wi){const Ir=n.get(hn);void 0!==jt&&$r(Ir.__webglFramebuffer,hn,hn.texture,36064,3553),void 0!==wi&&Xi(hn)},this.setupRenderTarget=function Rs(hn){const jt=hn.texture,wi=n.get(hn),Ir=n.get(jt);hn.addEventListener("dispose",fi),!0!==hn.isWebGLMultipleRenderTargets&&(void 0===Ir.__webglTexture&&(Ir.__webglTexture=i.createTexture()),Ir.__version=jt.version,o.memory.textures++);const Nr=!0===hn.isWebGLCubeRenderTarget,ls=!0===hn.isWebGLMultipleRenderTargets,Ao=Se(hn)||l;if(Nr){wi.__webglFramebuffer=[];for(let us=0;us<6;us++)wi.__webglFramebuffer[us]=i.createFramebuffer()}else{if(wi.__webglFramebuffer=i.createFramebuffer(),ls)if(r.drawBuffers){const us=hn.texture;for(let Yi=0,Js=us.length;Yi<Js;Yi++){const yo=n.get(us[Yi]);void 0===yo.__webglTexture&&(yo.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&hn.samples>0&&!1===ao(hn)){const us=ls?jt:[jt];wi.__webglMultisampledFramebuffer=i.createFramebuffer(),wi.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,wi.__webglMultisampledFramebuffer);for(let Yi=0;Yi<us.length;Yi++){const Js=us[Yi];wi.__webglColorRenderbuffer[Yi]=i.createRenderbuffer(),i.bindRenderbuffer(36161,wi.__webglColorRenderbuffer[Yi]);const yo=s.convert(Js.format,Js.encoding),Fs=s.convert(Js.type),ho=it(Js.internalFormat,yo,Fs,Js.encoding,!0===hn.isXRRenderTarget),eo=vo(hn);i.renderbufferStorageMultisample(36161,eo,ho,hn.width,hn.height),i.framebufferRenderbuffer(36160,36064+Yi,36161,wi.__webglColorRenderbuffer[Yi])}i.bindRenderbuffer(36161,null),hn.depthBuffer&&(wi.__webglDepthRenderbuffer=i.createRenderbuffer(),Ko(wi.__webglDepthRenderbuffer,hn,!0)),e.bindFramebuffer(36160,null)}}if(Nr){e.bindTexture(34067,Ir.__webglTexture),Ui(34067,jt,Ao);for(let us=0;us<6;us++)$r(wi.__webglFramebuffer[us],hn,jt,36064,34069+us);gt(jt,Ao)&&zt(34067),e.unbindTexture()}else if(ls){const us=hn.texture;for(let Yi=0,Js=us.length;Yi<Js;Yi++){const yo=us[Yi],Fs=n.get(yo);e.bindTexture(3553,Fs.__webglTexture),Ui(3553,yo,Ao),$r(wi.__webglFramebuffer,hn,yo,36064+Yi,3553),gt(yo,Ao)&&zt(3553)}e.unbindTexture()}else{let us=3553;(hn.isWebGL3DRenderTarget||hn.isWebGLArrayRenderTarget)&&(l?us=hn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(us,Ir.__webglTexture),Ui(us,jt,Ao),$r(wi.__webglFramebuffer,hn,jt,36064,us),gt(jt,Ao)&&zt(us),e.unbindTexture()}hn.depthBuffer&&Xi(hn)},this.updateRenderTargetMipmap=function es(hn){const jt=Se(hn)||l,wi=!0===hn.isWebGLMultipleRenderTargets?hn.texture:[hn.texture];for(let Ir=0,Nr=wi.length;Ir<Nr;Ir++){const ls=wi[Ir];if(gt(ls,jt)){const Ao=hn.isWebGLCubeRenderTarget?34067:3553,us=n.get(ls).__webglTexture;e.bindTexture(Ao,us),zt(Ao),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ho(hn){if(l&&hn.samples>0&&!1===ao(hn)){const jt=hn.isWebGLMultipleRenderTargets?hn.texture:[hn.texture],wi=hn.width,Ir=hn.height;let Nr=16384;const ls=[],Ao=hn.stencilBuffer?33306:36096,us=n.get(hn),Yi=!0===hn.isWebGLMultipleRenderTargets;if(Yi)for(let Js=0;Js<jt.length;Js++)e.bindFramebuffer(36160,us.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Js,36161,null),e.bindFramebuffer(36160,us.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Js,3553,null,0);e.bindFramebuffer(36008,us.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,us.__webglFramebuffer);for(let Js=0;Js<jt.length;Js++){ls.push(36064+Js),hn.depthBuffer&&ls.push(Ao);const yo=void 0!==us.__ignoreDepthValues&&us.__ignoreDepthValues;if(!1===yo&&(hn.depthBuffer&&(Nr|=256),hn.stencilBuffer&&(Nr|=1024)),Yi&&i.framebufferRenderbuffer(36008,36064,36161,us.__webglColorRenderbuffer[Js]),!0===yo&&(i.invalidateFramebuffer(36008,[Ao]),i.invalidateFramebuffer(36009,[Ao])),Yi){const Fs=n.get(jt[Js]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,Fs,0)}i.blitFramebuffer(0,0,wi,Ir,0,0,wi,Ir,Nr,9728),T&&i.invalidateFramebuffer(36008,ls)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),Yi)for(let Js=0;Js<jt.length;Js++){e.bindFramebuffer(36160,us.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Js,36161,us.__webglColorRenderbuffer[Js]);const yo=n.get(jt[Js]).__webglTexture;e.bindFramebuffer(36160,us.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Js,3553,yo,0)}e.bindFramebuffer(36009,us.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Xi,this.setupFrameBufferTexture=$r,this.useMultisampledRTT=ao}function ECe(i,t,e){const n=e.isWebGL2;return{convert:function r(s,o=null){let l;if(s===F0)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===N0)return 5125;if(s===__)return 5126;if(s===sx)return n?5131:(l=t.get("OES_texture_half_float"),null!==l?l.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===Tg)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===B0)return 6402;if(s===xC)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return l=t.get("EXT_sRGB"),null!==l?l.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===bu){if(l=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===l)return null;if(33776===s)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(l=t.get("WEBGL_compressed_texture_s3tc"),null===l)return null;if(33776===s)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(l=t.get("WEBGL_compressed_texture_pvrtc"),null===l)return null;if(35840===s)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return l=t.get("WEBGL_compressed_texture_etc1"),null!==l?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(l=t.get("WEBGL_compressed_texture_etc"),null===l)return null;if(37492===s)return o===bu?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(37496===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(l=t.get("WEBGL_compressed_texture_astc"),null===l)return null;if(37808===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===bu?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(l=t.get("EXT_texture_compression_bptc"),null===l)return null;if(36492===s)return o===bu?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===AC?n?34042:(l=t.get("WEBGL_depth_texture"),null!==l?l.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class TCe extends vh{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class XC extends Qf{constructor(){super(),this.isGroup=!0,this.type="Group"}}const MCe={type:"move"};class PP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new XC,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new XC,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Jt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Jt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new XC,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Jt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Jt),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,p=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(p&&t.hand){o=!0;for(const H of t.hand.values()){const X=e.getJointPose(H,n);if(void 0===p.joints[H.jointName]){const xe=new XC;xe.matrixAutoUpdate=!1,xe.visible=!1,p.joints[H.jointName]=xe,p.add(xe)}const ue=p.joints[H.jointName];null!==X&&(ue.matrix.fromArray(X.transform.matrix),ue.matrix.decompose(ue.position,ue.rotation,ue.scale),ue.jointRadius=X.radius),ue.visible=null!==X}const I=p.joints["index-finger-tip"].position.distanceTo(p.joints["thumb-tip"].position),T=.02,k=.005;p.inputState.pinching&&I>T+k?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&I<=T-k&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==u&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));null!==l&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(MCe)))}return null!==l&&(l.visible=null!==r),null!==u&&(u.visible=null!==s),null!==p&&(p.visible=null!==o),this}}class DCe extends b_{constructor(t,e,n,r,s,o,l,u,p,v){if((v=void 0!==v?v:B0)!==B0&&v!==xC)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&v===B0&&(n=N0),void 0===n&&v===xC&&(n=AC),super(null,r,s,o,l,u,v,n,p),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==l?l:bd,this.minFilter=void 0!==u?u:bd,this.flipY=!1,this.generateMipmaps=!1}}class LCe extends EC{constructor(t,e){super();const n=this;let r=null,s=1,o=null,l="local-floor",u=null,p=null,v=null,w=null,I=null,T=null;const k=e.getContextAttributes();let H=null,X=null;const ue=[],xe=[],be=new vh;be.layers.enable(1),be.viewport=new Bl;const Se=new vh;Se.layers.enable(2),Se.viewport=new Bl;const Ye=[be,Se],gt=new TCe;gt.layers.enable(1),gt.layers.enable(2);let zt=null,it=null;function Tt(kn){const Qn=xe.indexOf(kn.inputSource);if(-1===Qn)return;const or=ue[Qn];void 0!==or&&or.dispatchEvent({type:kn.type,data:kn.inputSource})}function un(){r.removeEventListener("select",Tt),r.removeEventListener("selectstart",Tt),r.removeEventListener("selectend",Tt),r.removeEventListener("squeeze",Tt),r.removeEventListener("squeezestart",Tt),r.removeEventListener("squeezeend",Tt),r.removeEventListener("end",un),r.removeEventListener("inputsourceschange",ei);for(let kn=0;kn<ue.length;kn++){const Qn=xe[kn];null!==Qn&&(xe[kn]=null,ue[kn].disconnect(Qn))}zt=null,it=null,t.setRenderTarget(H),I=null,w=null,v=null,r=null,X=null,Yn.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function ei(kn){for(let Qn=0;Qn<kn.removed.length;Qn++){const or=kn.removed[Qn],Bi=xe.indexOf(or);Bi>=0&&(xe[Bi]=null,ue[Bi].dispatchEvent({type:"disconnected",data:or}))}for(let Qn=0;Qn<kn.added.length;Qn++){const or=kn.added[Qn];let Bi=xe.indexOf(or);if(-1===Bi){for(let Sr=0;Sr<ue.length;Sr++){if(Sr>=xe.length){xe.push(or),Bi=Sr;break}if(null===xe[Sr]){xe[Sr]=or,Bi=Sr;break}}if(-1===Bi)break}const yr=ue[Bi];yr&&yr.dispatchEvent({type:"connected",data:or})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(kn){let Qn=ue[kn];return void 0===Qn&&(Qn=new PP,ue[kn]=Qn),Qn.getTargetRaySpace()},this.getControllerGrip=function(kn){let Qn=ue[kn];return void 0===Qn&&(Qn=new PP,ue[kn]=Qn),Qn.getGripSpace()},this.getHand=function(kn){let Qn=ue[kn];return void 0===Qn&&(Qn=new PP,ue[kn]=Qn),Qn.getHandSpace()},this.setFramebufferScaleFactor=function(kn){s=kn,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(kn){l=kn,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(kn){u=kn},this.getBaseLayer=function(){return null!==w?w:I},this.getBinding=function(){return v},this.getFrame=function(){return T},this.getSession=function(){return r},this.setSession=function(){var kn=iy(function*(Qn){if(r=Qn,null!==r){if(H=t.getRenderTarget(),r.addEventListener("select",Tt),r.addEventListener("selectstart",Tt),r.addEventListener("selectend",Tt),r.addEventListener("squeeze",Tt),r.addEventListener("squeezestart",Tt),r.addEventListener("squeezeend",Tt),r.addEventListener("end",un),r.addEventListener("inputsourceschange",ei),!0!==k.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)I=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||k.antialias,alpha:k.alpha,depth:k.depth,stencil:k.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:I}),X=new W0(I.framebufferWidth,I.framebufferHeight,{format:Tg,type:F0,encoding:t.outputEncoding,stencilBuffer:k.stencil});else{let or=null,Bi=null,yr=null;k.depth&&(yr=k.stencil?35056:33190,or=k.stencil?xC:B0,Bi=k.stencil?AC:N0);const Sr={colorFormat:32856,depthFormat:yr,scaleFactor:s};v=new XRWebGLBinding(r,e),w=v.createProjectionLayer(Sr),r.updateRenderState({layers:[w]}),X=new W0(w.textureWidth,w.textureHeight,{format:Tg,type:F0,depthTexture:new DCe(w.textureWidth,w.textureHeight,Bi,void 0,void 0,void 0,void 0,void 0,void 0,or),stencilBuffer:k.stencil,encoding:t.outputEncoding,samples:k.antialias?4:0}),t.properties.get(X).__ignoreDepthValues=w.ignoreDepthValues}X.isXRRenderTarget=!0,this.setFoveation(1),u=null,o=yield r.requestReferenceSpace(l),Yn.setContext(r),Yn.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Qn){return kn.apply(this,arguments)}}();const fi=new Jt,ni=new Jt;function Zn(kn,Qn){null===Qn?kn.matrixWorld.copy(kn.matrix):kn.matrixWorld.multiplyMatrices(Qn.matrixWorld,kn.matrix),kn.matrixWorldInverse.copy(kn.matrixWorld).invert()}this.updateCamera=function(kn){if(null===r)return;gt.near=Se.near=be.near=kn.near,gt.far=Se.far=be.far=kn.far,(zt!==gt.near||it!==gt.far)&&(r.updateRenderState({depthNear:gt.near,depthFar:gt.far}),zt=gt.near,it=gt.far);const Qn=kn.parent,or=gt.cameras;Zn(gt,Qn);for(let yr=0;yr<or.length;yr++)Zn(or[yr],Qn);gt.matrixWorld.decompose(gt.position,gt.quaternion,gt.scale),kn.matrix.copy(gt.matrix),kn.matrix.decompose(kn.position,kn.quaternion,kn.scale);const Bi=kn.children;for(let yr=0,Sr=Bi.length;yr<Sr;yr++)Bi[yr].updateMatrixWorld(!0);2===or.length?function Bn(kn,Qn,or){fi.setFromMatrixPosition(Qn.matrixWorld),ni.setFromMatrixPosition(or.matrixWorld);const Bi=fi.distanceTo(ni),yr=Qn.projectionMatrix.elements,Sr=or.projectionMatrix.elements,Ys=yr[14]/(yr[10]-1),Ui=yr[14]/(yr[10]+1),Gs=(yr[9]+1)/yr[5],ks=(yr[9]-1)/yr[5],Os=(yr[8]-1)/yr[0],$r=(Sr[8]+1)/Sr[0],Ko=Ys*Os,er=Ys*$r,Xi=Bi/(-Os+$r),Br=Xi*-Os;Qn.matrixWorld.decompose(kn.position,kn.quaternion,kn.scale),kn.translateX(Br),kn.translateZ(Xi),kn.matrixWorld.compose(kn.position,kn.quaternion,kn.scale),kn.matrixWorldInverse.copy(kn.matrixWorld).invert();const Rs=Ys+Xi,es=Ui+Xi;kn.projectionMatrix.makePerspective(Ko-Br,er+(Bi-Br),Gs*Ui/es*Rs,ks*Ui/es*Rs,Rs,es)}(gt,be,Se):gt.projectionMatrix.copy(be.projectionMatrix)},this.getCamera=function(){return gt},this.getFoveation=function(){return null!==w?w.fixedFoveation:null!==I?I.fixedFoveation:void 0},this.setFoveation=function(kn){null!==w&&(w.fixedFoveation=kn),null!==I&&void 0!==I.fixedFoveation&&(I.fixedFoveation=kn)};let Rn=null;const Yn=new sG;Yn.setAnimationLoop(function ti(kn,Qn){if(p=Qn.getViewerPose(u||o),T=Qn,null!==p){const or=p.views;null!==I&&(t.setRenderTargetFramebuffer(X,I.framebuffer),t.setRenderTarget(X));let Bi=!1;or.length!==gt.cameras.length&&(gt.cameras.length=0,Bi=!0);for(let yr=0;yr<or.length;yr++){const Sr=or[yr];let Ys=null;if(null!==I)Ys=I.getViewport(Sr);else{const Gs=v.getViewSubImage(w,Sr);Ys=Gs.viewport,0===yr&&(t.setRenderTargetTextures(X,Gs.colorTexture,w.ignoreDepthValues?void 0:Gs.depthStencilTexture),t.setRenderTarget(X))}let Ui=Ye[yr];void 0===Ui&&(Ui=new vh,Ui.layers.enable(yr),Ui.viewport=new Bl,Ye[yr]=Ui),Ui.matrix.fromArray(Sr.transform.matrix),Ui.projectionMatrix.fromArray(Sr.projectionMatrix),Ui.viewport.set(Ys.x,Ys.y,Ys.width,Ys.height),0===yr&&gt.matrix.copy(Ui.matrix),!0===Bi&&gt.cameras.push(Ui)}}for(let or=0;or<ue.length;or++){const Bi=xe[or],yr=ue[or];null!==Bi&&void 0!==yr&&yr.update(Bi,Qn,u||o)}Rn&&Rn(kn,Qn),T=null}),this.setAnimationLoop=function(kn){Rn=kn},this.dispose=function(){}}}function PCe(i,t){function r(H,X){H.opacity.value=X.opacity,X.color&&H.diffuse.value.copy(X.color),X.emissive&&H.emissive.value.copy(X.emissive).multiplyScalar(X.emissiveIntensity),X.map&&(H.map.value=X.map),X.alphaMap&&(H.alphaMap.value=X.alphaMap),X.bumpMap&&(H.bumpMap.value=X.bumpMap,H.bumpScale.value=X.bumpScale,1===X.side&&(H.bumpScale.value*=-1)),X.displacementMap&&(H.displacementMap.value=X.displacementMap,H.displacementScale.value=X.displacementScale,H.displacementBias.value=X.displacementBias),X.emissiveMap&&(H.emissiveMap.value=X.emissiveMap),X.normalMap&&(H.normalMap.value=X.normalMap,H.normalScale.value.copy(X.normalScale),1===X.side&&H.normalScale.value.negate()),X.specularMap&&(H.specularMap.value=X.specularMap),X.alphaTest>0&&(H.alphaTest.value=X.alphaTest);const ue=t.get(X).envMap;if(ue&&(H.envMap.value=ue,H.flipEnvMap.value=ue.isCubeTexture&&!1===ue.isRenderTargetTexture?-1:1,H.reflectivity.value=X.reflectivity,H.ior.value=X.ior,H.refractionRatio.value=X.refractionRatio),X.lightMap){H.lightMap.value=X.lightMap;const Se=!0!==i.physicallyCorrectLights?Math.PI:1;H.lightMapIntensity.value=X.lightMapIntensity*Se}let xe,be;X.aoMap&&(H.aoMap.value=X.aoMap,H.aoMapIntensity.value=X.aoMapIntensity),X.map?xe=X.map:X.specularMap?xe=X.specularMap:X.displacementMap?xe=X.displacementMap:X.normalMap?xe=X.normalMap:X.bumpMap?xe=X.bumpMap:X.roughnessMap?xe=X.roughnessMap:X.metalnessMap?xe=X.metalnessMap:X.alphaMap?xe=X.alphaMap:X.emissiveMap?xe=X.emissiveMap:X.clearcoatMap?xe=X.clearcoatMap:X.clearcoatNormalMap?xe=X.clearcoatNormalMap:X.clearcoatRoughnessMap?xe=X.clearcoatRoughnessMap:X.iridescenceMap?xe=X.iridescenceMap:X.iridescenceThicknessMap?xe=X.iridescenceThicknessMap:X.specularIntensityMap?xe=X.specularIntensityMap:X.specularColorMap?xe=X.specularColorMap:X.transmissionMap?xe=X.transmissionMap:X.thicknessMap?xe=X.thicknessMap:X.sheenColorMap?xe=X.sheenColorMap:X.sheenRoughnessMap&&(xe=X.sheenRoughnessMap),void 0!==xe&&(xe.isWebGLRenderTarget&&(xe=xe.texture),!0===xe.matrixAutoUpdate&&xe.updateMatrix(),H.uvTransform.value.copy(xe.matrix)),X.aoMap?be=X.aoMap:X.lightMap&&(be=X.lightMap),void 0!==be&&(be.isWebGLRenderTarget&&(be=be.texture),!0===be.matrixAutoUpdate&&be.updateMatrix(),H.uv2Transform.value.copy(be.matrix))}return{refreshFogUniforms:function e(H,X){H.fogColor.value.copy(X.color),X.isFog?(H.fogNear.value=X.near,H.fogFar.value=X.far):X.isFogExp2&&(H.fogDensity.value=X.density)},refreshMaterialUniforms:function n(H,X,ue,xe,be){X.isMeshBasicMaterial||X.isMeshLambertMaterial?r(H,X):X.isMeshToonMaterial?(r(H,X),function v(H,X){X.gradientMap&&(H.gradientMap.value=X.gradientMap)}(H,X)):X.isMeshPhongMaterial?(r(H,X),function p(H,X){H.specular.value.copy(X.specular),H.shininess.value=Math.max(X.shininess,1e-4)}(H,X)):X.isMeshStandardMaterial?(r(H,X),function w(H,X){H.roughness.value=X.roughness,H.metalness.value=X.metalness,X.roughnessMap&&(H.roughnessMap.value=X.roughnessMap),X.metalnessMap&&(H.metalnessMap.value=X.metalnessMap),t.get(X).envMap&&(H.envMapIntensity.value=X.envMapIntensity)}(H,X),X.isMeshPhysicalMaterial&&function I(H,X,ue){H.ior.value=X.ior,X.sheen>0&&(H.sheenColor.value.copy(X.sheenColor).multiplyScalar(X.sheen),H.sheenRoughness.value=X.sheenRoughness,X.sheenColorMap&&(H.sheenColorMap.value=X.sheenColorMap),X.sheenRoughnessMap&&(H.sheenRoughnessMap.value=X.sheenRoughnessMap)),X.clearcoat>0&&(H.clearcoat.value=X.clearcoat,H.clearcoatRoughness.value=X.clearcoatRoughness,X.clearcoatMap&&(H.clearcoatMap.value=X.clearcoatMap),X.clearcoatRoughnessMap&&(H.clearcoatRoughnessMap.value=X.clearcoatRoughnessMap),X.clearcoatNormalMap&&(H.clearcoatNormalScale.value.copy(X.clearcoatNormalScale),H.clearcoatNormalMap.value=X.clearcoatNormalMap,1===X.side&&H.clearcoatNormalScale.value.negate())),X.iridescence>0&&(H.iridescence.value=X.iridescence,H.iridescenceIOR.value=X.iridescenceIOR,H.iridescenceThicknessMinimum.value=X.iridescenceThicknessRange[0],H.iridescenceThicknessMaximum.value=X.iridescenceThicknessRange[1],X.iridescenceMap&&(H.iridescenceMap.value=X.iridescenceMap),X.iridescenceThicknessMap&&(H.iridescenceThicknessMap.value=X.iridescenceThicknessMap)),X.transmission>0&&(H.transmission.value=X.transmission,H.transmissionSamplerMap.value=ue.texture,H.transmissionSamplerSize.value.set(ue.width,ue.height),X.transmissionMap&&(H.transmissionMap.value=X.transmissionMap),H.thickness.value=X.thickness,X.thicknessMap&&(H.thicknessMap.value=X.thicknessMap),H.attenuationDistance.value=X.attenuationDistance,H.attenuationColor.value.copy(X.attenuationColor)),H.specularIntensity.value=X.specularIntensity,H.specularColor.value.copy(X.specularColor),X.specularIntensityMap&&(H.specularIntensityMap.value=X.specularIntensityMap),X.specularColorMap&&(H.specularColorMap.value=X.specularColorMap)}(H,X,be)):X.isMeshMatcapMaterial?(r(H,X),function T(H,X){X.matcap&&(H.matcap.value=X.matcap)}(H,X)):X.isMeshDepthMaterial?r(H,X):X.isMeshDistanceMaterial?(r(H,X),function k(H,X){H.referencePosition.value.copy(X.referencePosition),H.nearDistance.value=X.nearDistance,H.farDistance.value=X.farDistance}(H,X)):X.isMeshNormalMaterial?r(H,X):X.isLineBasicMaterial?(function s(H,X){H.diffuse.value.copy(X.color),H.opacity.value=X.opacity}(H,X),X.isLineDashedMaterial&&function o(H,X){H.dashSize.value=X.dashSize,H.totalSize.value=X.dashSize+X.gapSize,H.scale.value=X.scale}(H,X)):X.isPointsMaterial?function l(H,X,ue,xe){let be;H.diffuse.value.copy(X.color),H.opacity.value=X.opacity,H.size.value=X.size*ue,H.scale.value=.5*xe,X.map&&(H.map.value=X.map),X.alphaMap&&(H.alphaMap.value=X.alphaMap),X.alphaTest>0&&(H.alphaTest.value=X.alphaTest),X.map?be=X.map:X.alphaMap&&(be=X.alphaMap),void 0!==be&&(!0===be.matrixAutoUpdate&&be.updateMatrix(),H.uvTransform.value.copy(be.matrix))}(H,X,ue,xe):X.isSpriteMaterial?function u(H,X){let ue;H.diffuse.value.copy(X.color),H.opacity.value=X.opacity,H.rotation.value=X.rotation,X.map&&(H.map.value=X.map),X.alphaMap&&(H.alphaMap.value=X.alphaMap),X.alphaTest>0&&(H.alphaTest.value=X.alphaTest),X.map?ue=X.map:X.alphaMap&&(ue=X.alphaMap),void 0!==ue&&(!0===ue.matrixAutoUpdate&&ue.updateMatrix(),H.uvTransform.value.copy(ue.matrix))}(H,X):X.isShadowMaterial?(H.color.value.copy(X.color),H.opacity.value=X.opacity):X.isShaderMaterial&&(X.uniformsNeedUpdate=!1)}}}function RCe(i,t,e,n){let r={},s={},o=[];const l=e.isWebGL2?i.getParameter(35375):0;function T(xe,be,Se){const Ye=xe.value;if(void 0===Se[be])return Se[be]="number"==typeof Ye?Ye:Ye.clone(),!0;if("number"==typeof Ye){if(Se[be]!==Ye)return Se[be]=Ye,!0}else{const gt=Se[be];if(!1===gt.equals(Ye))return gt.copy(Ye),!0}return!1}function H(xe){const be=xe.value,Se={boundary:0,storage:0};return"number"==typeof be?(Se.boundary=4,Se.storage=4):be.isVector2?(Se.boundary=8,Se.storage=8):be.isVector3||be.isColor?(Se.boundary=16,Se.storage=12):be.isVector4?(Se.boundary=16,Se.storage=16):be.isMatrix3?(Se.boundary=48,Se.storage=48):be.isMatrix4?(Se.boundary=64,Se.storage=64):be.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",be),Se}function X(xe){const be=xe.target;be.removeEventListener("dispose",X);const Se=o.indexOf(be.__bindingPointIndex);o.splice(Se,1),i.deleteBuffer(r[be.id]),delete r[be.id],delete s[be.id]}return{bind:function u(xe,be){n.uniformBlockBinding(xe,be.program)},update:function p(xe,be){let Se=r[xe.id];void 0===Se&&(function k(xe){const be=xe.uniforms;let Se=0;let gt=0;for(let zt=0,it=be.length;zt<it;zt++){const Tt=be[zt],un=H(Tt);if(Tt.__data=new Float32Array(un.storage/Float32Array.BYTES_PER_ELEMENT),Tt.__offset=Se,zt>0){gt=Se%16;const ei=16-gt;0!==gt&&ei-un.boundary<0&&(Se+=16-gt,Tt.__offset=Se)}Se+=un.storage}gt=Se%16,gt>0&&(Se+=16-gt),xe.__size=Se,xe.__cache={}}(xe),Se=function v(xe){const be=function w(){for(let xe=0;xe<l;xe++)if(-1===o.indexOf(xe))return o.push(xe),xe;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();xe.__bindingPointIndex=be;const Se=i.createBuffer(),Ye=xe.__size,gt=xe.usage;return i.bindBuffer(35345,Se),i.bufferData(35345,Ye,gt),i.bindBuffer(35345,null),i.bindBufferBase(35345,be,Se),Se}(xe),r[xe.id]=Se,xe.addEventListener("dispose",X)),n.updateUBOMapping(xe,be.program);const gt=t.render.frame;s[xe.id]!==gt&&(function I(xe){const Se=xe.uniforms,Ye=xe.__cache;i.bindBuffer(35345,r[xe.id]);for(let gt=0,zt=Se.length;gt<zt;gt++){const it=Se[gt];if(!0===T(it,gt,Ye)){const Tt=it.value,un=it.__offset;"number"==typeof Tt?(it.__data[0]=Tt,i.bufferSubData(35345,un,it.__data)):(it.value.isMatrix3?(it.__data[0]=it.value.elements[0],it.__data[1]=it.value.elements[1],it.__data[2]=it.value.elements[2],it.__data[3]=it.value.elements[0],it.__data[4]=it.value.elements[3],it.__data[5]=it.value.elements[4],it.__data[6]=it.value.elements[5],it.__data[7]=it.value.elements[0],it.__data[8]=it.value.elements[6],it.__data[9]=it.value.elements[7],it.__data[10]=it.value.elements[8],it.__data[11]=it.value.elements[0]):Tt.toArray(it.__data),i.bufferSubData(35345,un,it.__data))}}i.bindBuffer(35345,null)}(xe),s[xe.id]=gt)},dispose:function ue(){for(const xe in r)i.deleteBuffer(r[xe]);o=[],r={},s={}}}}function kG(i={}){this.isWebGLRenderer=!0;const t=void 0!==i.canvas?i.canvas:function kCe(){const i=lx("canvas");return i.style.display="block",i}(),e=void 0!==i.context?i.context:null,n=void 0===i.depth||i.depth,r=void 0===i.stencil||i.stencil,s=void 0!==i.antialias&&i.antialias,o=void 0===i.premultipliedAlpha||i.premultipliedAlpha,l=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,u=void 0!==i.powerPreference?i.powerPreference:"default",p=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let v;v=null!==e?e.getContextAttributes().alpha:void 0!==i.alpha&&i.alpha;let w=null,I=null;const T=[],k=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=z0,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const H=this;let X=!1,ue=0,xe=0,be=null,Se=-1,Ye=null;const gt=new Bl,zt=new Bl;let it=null,Tt=t.width,un=t.height,ei=1,fi=null,ni=null;const Bn=new Bl(0,0,Tt,un),Zn=new Bl(0,0,Tt,un);let Rn=!1;const ti=new IP;let Yn=!1,kn=!1,Qn=null;const or=new Uo,Bi=new sr,yr=new Jt,Sr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ys(){return null===be?ei:1}let ks,Os,$r,Ko,er,Xi,Br,Rs,es,Ho,vo,ao,vc,ql,hn,jt,wi,Ir,Nr,ls,Ao,us,Yi,Js,Ui=e;function Gs(rn,ui){for(let Ri=0;Ri<rn.length;Ri++){const $i=t.getContext(rn[Ri],ui);if(null!==$i)return $i}return null}try{const rn={alpha:!0,depth:n,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r146"),t.addEventListener("webglcontextlost",ho,!1),t.addEventListener("webglcontextrestored",eo,!1),t.addEventListener("webglcontextcreationerror",Qa,!1),null===Ui){const ui=["webgl2","webgl","experimental-webgl"];if(!0===H.isWebGL1Renderer&&ui.shift(),Ui=Gs(ui,rn),null===Ui)throw Gs(ui)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ui.getShaderPrecisionFormat&&(Ui.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(rn){throw console.error("THREE.WebGLRenderer: "+rn.message),rn}function yo(){ks=new q0e(Ui),Os=new U0e(Ui,ks,i),ks.init(Os),us=new ECe(Ui,ks,Os),$r=new ICe(Ui,ks,Os),Ko=new K0e,er=new fCe,Xi=new SCe(Ui,ks,$r,er,Os,us,Ko),Br=new G0e(H),Rs=new $0e(H),es=new zye(Ui,Os),Yi=new z0e(Ui,ks,es,Os),Ho=new X0e(Ui,es,Ko,Yi),vo=new ebe(Ui,Ho,es,Ko),Nr=new J0e(Ui,Os,Xi),jt=new H0e(er),ao=new hCe(H,Br,Rs,ks,Os,Yi,jt),vc=new PCe(H,er),ql=new gCe,hn=new CCe(ks,Os),Ir=new B0e(H,Br,Rs,$r,vo,v,o),wi=new xCe(H,vo,Os),Js=new RCe(Ui,Ko,Os,$r),ls=new V0e(Ui,ks,Ko,Os),Ao=new Y0e(Ui,ks,Ko,Os),Ko.programs=ao.programs,H.capabilities=Os,H.extensions=ks,H.properties=er,H.renderLists=ql,H.shadowMap=wi,H.state=$r,H.info=Ko}yo();const Fs=new LCe(H,Ui);function ho(rn){rn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function eo(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1;const rn=Ko.autoReset,ui=wi.enabled,Ri=wi.autoUpdate,ri=wi.needsUpdate,$i=wi.type;yo(),Ko.autoReset=rn,wi.enabled=ui,wi.autoUpdate=Ri,wi.needsUpdate=ri,wi.type=$i}function Qa(rn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",rn.statusMessage)}function Pc(rn){const ui=rn.target;ui.removeEventListener("dispose",Pc),function Wd(rn){(function Un(rn){const ui=er.get(rn).programs;void 0!==ui&&(ui.forEach(function(Ri){ao.releaseProgram(Ri)}),rn.isShaderMaterial&&ao.releaseShaderCache(rn))})(rn),er.remove(rn)}(ui)}this.xr=Fs,this.getContext=function(){return Ui},this.getContextAttributes=function(){return Ui.getContextAttributes()},this.forceContextLoss=function(){const rn=ks.get("WEBGL_lose_context");rn&&rn.loseContext()},this.forceContextRestore=function(){const rn=ks.get("WEBGL_lose_context");rn&&rn.restoreContext()},this.getPixelRatio=function(){return ei},this.setPixelRatio=function(rn){void 0!==rn&&(ei=rn,this.setSize(Tt,un,!1))},this.getSize=function(rn){return rn.set(Tt,un)},this.setSize=function(rn,ui,Ri){Fs.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Tt=rn,un=ui,t.width=Math.floor(rn*ei),t.height=Math.floor(ui*ei),!1!==Ri&&(t.style.width=rn+"px",t.style.height=ui+"px"),this.setViewport(0,0,rn,ui))},this.getDrawingBufferSize=function(rn){return rn.set(Tt*ei,un*ei).floor()},this.setDrawingBufferSize=function(rn,ui,Ri){Tt=rn,un=ui,ei=Ri,t.width=Math.floor(rn*Ri),t.height=Math.floor(ui*Ri),this.setViewport(0,0,rn,ui)},this.getCurrentViewport=function(rn){return rn.copy(gt)},this.getViewport=function(rn){return rn.copy(Bn)},this.setViewport=function(rn,ui,Ri,ri){rn.isVector4?Bn.set(rn.x,rn.y,rn.z,rn.w):Bn.set(rn,ui,Ri,ri),$r.viewport(gt.copy(Bn).multiplyScalar(ei).floor())},this.getScissor=function(rn){return rn.copy(Zn)},this.setScissor=function(rn,ui,Ri,ri){rn.isVector4?Zn.set(rn.x,rn.y,rn.z,rn.w):Zn.set(rn,ui,Ri,ri),$r.scissor(zt.copy(Zn).multiplyScalar(ei).floor())},this.getScissorTest=function(){return Rn},this.setScissorTest=function(rn){$r.setScissorTest(Rn=rn)},this.setOpaqueSort=function(rn){fi=rn},this.setTransparentSort=function(rn){ni=rn},this.getClearColor=function(rn){return rn.copy(Ir.getClearColor())},this.setClearColor=function(){Ir.setClearColor.apply(Ir,arguments)},this.getClearAlpha=function(){return Ir.getClearAlpha()},this.setClearAlpha=function(){Ir.setClearAlpha.apply(Ir,arguments)},this.clear=function(rn=!0,ui=!0,Ri=!0){let ri=0;rn&&(ri|=16384),ui&&(ri|=256),Ri&&(ri|=1024),Ui.clear(ri)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ho,!1),t.removeEventListener("webglcontextrestored",eo,!1),t.removeEventListener("webglcontextcreationerror",Qa,!1),ql.dispose(),hn.dispose(),er.dispose(),Br.dispose(),Rs.dispose(),vo.dispose(),Yi.dispose(),Js.dispose(),ao.dispose(),Fs.dispose(),Fs.removeEventListener("sessionstart",vs),Fs.removeEventListener("sessionend",Ws),Qn&&(Qn.dispose(),Qn=null),_l.stop()},this.renderBufferDirect=function(rn,ui,Ri,ri,$i,ro){null===ui&&(ui=Sr);const Ro=$i.isMesh&&$i.matrixWorld.determinant()<0,fa=function ZTe(rn,ui,Ri,ri,$i){!0!==ui.isScene&&(ui=Sr),Xi.resetTextureUnits();const ro=ui.fog,fa=null===be?H.outputEncoding:!0===be.isXRRenderTarget?be.texture.encoding:z0,ia=(ri.isMeshStandardMaterial?Rs:Br).get(ri.envMap||(ri.isMeshStandardMaterial?ui.environment:null)),bl=!0===ri.vertexColors&&!!Ri.attributes.color&&4===Ri.attributes.color.itemSize,Ia=!!ri.normalMap&&!!Ri.attributes.tangent,Ua=!!Ri.morphAttributes.position,wu=!!Ri.morphAttributes.normal,db=!!Ri.morphAttributes.color,ow=ri.toneMapped?H.toneMapping:0,aw=Ri.morphAttributes.position||Ri.morphAttributes.normal||Ri.morphAttributes.color,yv=void 0!==aw?aw.length:0,Cl=er.get(ri),lw=I.state.lights;!0!==Yn||!0!==kn&&rn===Ye||jt.setState(ri,rn,rn===Ye&&ri.id===Se);let nd=!1;ri.version===Cl.__version?(Cl.needsLights&&Cl.lightsStateVersion!==lw.state.version||Cl.outputEncoding!==fa||$i.isInstancedMesh&&!1===Cl.instancing||!$i.isInstancedMesh&&!0===Cl.instancing||$i.isSkinnedMesh&&!1===Cl.skinning||!$i.isSkinnedMesh&&!0===Cl.skinning||Cl.envMap!==ia||!0===ri.fog&&Cl.fog!==ro||void 0!==Cl.numClippingPlanes&&(Cl.numClippingPlanes!==jt.numPlanes||Cl.numIntersection!==jt.numIntersection)||Cl.vertexAlphas!==bl||Cl.vertexTangents!==Ia||Cl.morphTargets!==Ua||Cl.morphNormals!==wu||Cl.morphColors!==db||Cl.toneMapping!==ow||!0===Os.isWebGL2&&Cl.morphTargetsCount!==yv)&&(nd=!0):(nd=!0,Cl.__version=ri.version);let kg=Cl.currentProgram;!0===nd&&(kg=Rg(ri,ui,$i));let O_=!1,kx=!1,jR=!1;const If=kg.getUniforms(),hb=Cl.uniforms;if($r.useProgram(kg.program)&&(O_=!0,kx=!0,jR=!0),ri.id!==Se&&(Se=ri.id,kx=!0),O_||Ye!==rn){if(If.setValue(Ui,"projectionMatrix",rn.projectionMatrix),Os.logarithmicDepthBuffer&&If.setValue(Ui,"logDepthBufFC",2/(Math.log(rn.far+1)/Math.LN2)),Ye!==rn&&(Ye=rn,kx=!0,jR=!0),ri.isShaderMaterial||ri.isMeshPhongMaterial||ri.isMeshToonMaterial||ri.isMeshStandardMaterial||ri.envMap){const $p=If.map.cameraPosition;void 0!==$p&&$p.setValue(Ui,yr.setFromMatrixPosition(rn.matrixWorld))}(ri.isMeshPhongMaterial||ri.isMeshToonMaterial||ri.isMeshLambertMaterial||ri.isMeshBasicMaterial||ri.isMeshStandardMaterial||ri.isShaderMaterial)&&If.setValue(Ui,"isOrthographic",!0===rn.isOrthographicCamera),(ri.isMeshPhongMaterial||ri.isMeshToonMaterial||ri.isMeshLambertMaterial||ri.isMeshBasicMaterial||ri.isMeshStandardMaterial||ri.isShaderMaterial||ri.isShadowMaterial||$i.isSkinnedMesh)&&If.setValue(Ui,"viewMatrix",rn.matrixWorldInverse)}if($i.isSkinnedMesh){If.setOptional(Ui,$i,"bindMatrix"),If.setOptional(Ui,$i,"bindMatrixInverse");const $p=$i.skeleton;$p&&(Os.floatVertexTextures?(null===$p.boneTexture&&$p.computeBoneTexture(),If.setValue(Ui,"boneTexture",$p.boneTexture,Xi),If.setValue(Ui,"boneTextureSize",$p.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const $R=Ri.morphAttributes;if((void 0!==$R.position||void 0!==$R.normal||void 0!==$R.color&&!0===Os.isWebGL2)&&Nr.update($i,Ri,ri,kg),(kx||Cl.receiveShadow!==$i.receiveShadow)&&(Cl.receiveShadow=$i.receiveShadow,If.setValue(Ui,"receiveShadow",$i.receiveShadow)),ri.isMeshGouraudMaterial&&null!==ri.envMap&&(hb.envMap.value=ia,hb.flipEnvMap.value=ia.isCubeTexture&&!1===ia.isRenderTargetTexture?-1:1),kx&&(If.setValue(Ui,"toneMappingExposure",H.toneMappingExposure),Cl.needsLights&&function QTe(rn,ui){rn.ambientLightColor.needsUpdate=ui,rn.lightProbe.needsUpdate=ui,rn.directionalLights.needsUpdate=ui,rn.directionalLightShadows.needsUpdate=ui,rn.pointLights.needsUpdate=ui,rn.pointLightShadows.needsUpdate=ui,rn.spotLights.needsUpdate=ui,rn.spotLightShadows.needsUpdate=ui,rn.rectAreaLights.needsUpdate=ui,rn.hemisphereLights.needsUpdate=ui}(hb,jR),ro&&!0===ri.fog&&vc.refreshFogUniforms(hb,ro),vc.refreshMaterialUniforms(hb,ri,ei,un,Qn),pE.upload(Ui,Cl.uniformsList,hb,Xi)),ri.isShaderMaterial&&!0===ri.uniformsNeedUpdate&&(pE.upload(Ui,Cl.uniformsList,hb,Xi),ri.uniformsNeedUpdate=!1),ri.isSpriteMaterial&&If.setValue(Ui,"center",$i.center),If.setValue(Ui,"modelViewMatrix",$i.modelViewMatrix),If.setValue(Ui,"normalMatrix",$i.normalMatrix),If.setValue(Ui,"modelMatrix",$i.matrixWorld),ri.isShaderMaterial||ri.isRawShaderMaterial){const $p=ri.uniformsGroups;for(let qR=0,eMe=$p.length;qR<eMe;qR++)if(Os.isWebGL2){const W6=$p[qR];Js.update(W6,kg),Js.bind(W6,kg)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return kg}(rn,ui,Ri,ri,$i);$r.setMaterial(ri,Ro);let ia=Ri.index;const bl=Ri.attributes.position;if(null===ia){if(void 0===bl||0===bl.count)return}else if(0===ia.count)return;let Ia=1;!0===ri.wireframe&&(ia=Ho.getWireframeAttribute(Ri),Ia=2),Yi.setup($i,ri,fa,Ri,ia);let Ua,wu=ls;null!==ia&&(Ua=es.get(ia),wu=Ao,wu.setIndex(Ua));const db=null!==ia?ia.count:bl.count,ow=Ri.drawRange.start*Ia,aw=Ri.drawRange.count*Ia,yv=null!==ro?ro.start*Ia:0,Cl=null!==ro?ro.count*Ia:1/0,lw=Math.max(ow,yv),nd=Math.min(db,ow+aw,yv+Cl)-1,kg=Math.max(0,nd-lw+1);if(0!==kg){if($i.isMesh)!0===ri.wireframe?($r.setLineWidth(ri.wireframeLinewidth*Ys()),wu.setMode(1)):wu.setMode(4);else if($i.isLine){let O_=ri.linewidth;void 0===O_&&(O_=1),$r.setLineWidth(O_*Ys()),wu.setMode($i.isLineSegments?1:$i.isLineLoop?2:3)}else $i.isPoints?wu.setMode(0):$i.isSprite&&wu.setMode(4);if($i.isInstancedMesh)wu.renderInstances(lw,kg,$i.count);else if(Ri.isInstancedBufferGeometry){const O_=Math.min(Ri.instanceCount,Ri._maxInstanceCount);wu.renderInstances(lw,kg,O_)}else wu.render(lw,kg)}},this.compile=function(rn,ui){function Ri(ri,$i,ro){!0===ri.transparent&&2===ri.side?(ri.side=1,ri.needsUpdate=!0,Rg(ri,$i,ro),ri.side=0,ri.needsUpdate=!0,Rg(ri,$i,ro),ri.side=2):Rg(ri,$i,ro)}I=hn.get(rn),I.init(),k.push(I),rn.traverseVisible(function(ri){ri.isLight&&ri.layers.test(ui.layers)&&(I.pushLight(ri),ri.castShadow&&I.pushShadow(ri))}),I.setupLights(H.physicallyCorrectLights),rn.traverse(function(ri){const $i=ri.material;if($i)if(Array.isArray($i))for(let ro=0;ro<$i.length;ro++)Ri($i[ro],rn,ri);else Ri($i,rn,ri)}),k.pop(),I=null};let Fi=null;function vs(){_l.stop()}function Ws(){_l.start()}const _l=new sG;function jd(rn,ui,Ri,ri){if(!1===rn.visible)return;if(rn.layers.test(ui.layers))if(rn.isGroup)Ri=rn.renderOrder;else if(rn.isLOD)!0===rn.autoUpdate&&rn.update(ui);else if(rn.isLight)I.pushLight(rn),rn.castShadow&&I.pushShadow(rn);else if(rn.isSprite){if(!rn.frustumCulled||ti.intersectsSprite(rn)){ri&&yr.setFromMatrixPosition(rn.matrixWorld).applyMatrix4(or);const Ro=vo.update(rn),fa=rn.material;fa.visible&&w.push(rn,Ro,fa,Ri,yr.z,null)}}else if((rn.isMesh||rn.isLine||rn.isPoints)&&(rn.isSkinnedMesh&&rn.skeleton.frame!==Ko.render.frame&&(rn.skeleton.update(),rn.skeleton.frame=Ko.render.frame),!rn.frustumCulled||ti.intersectsObject(rn))){ri&&yr.setFromMatrixPosition(rn.matrixWorld).applyMatrix4(or);const Ro=vo.update(rn),fa=rn.material;if(Array.isArray(fa)){const ia=Ro.groups;for(let bl=0,Ia=ia.length;bl<Ia;bl++){const Ua=ia[bl],wu=fa[Ua.materialIndex];wu&&wu.visible&&w.push(rn,Ro,wu,Ri,yr.z,Ua)}}else fa.visible&&w.push(rn,Ro,fa,Ri,yr.z,null)}const ro=rn.children;for(let Ro=0,fa=ro.length;Ro<fa;Ro++)jd(ro[Ro],ui,Ri,ri)}function $h(rn,ui,Ri,ri){const $i=rn.opaque,ro=rn.transmissive,Ro=rn.transparent;I.setupLightsView(Ri),ro.length>0&&function ub(rn,ui,Ri){const ri=Os.isWebGL2;null===Qn&&(Qn=new W0(1,1,{generateMipmaps:!0,type:ks.has("EXT_color_buffer_half_float")?sx:F0,minFilter:1008,samples:ri&&!0===s?4:0})),H.getDrawingBufferSize(Bi),ri?Qn.setSize(Bi.x,Bi.y):Qn.setSize(GS(Bi.x),GS(Bi.y));const $i=H.getRenderTarget();H.setRenderTarget(Qn),H.clear();const ro=H.toneMapping;H.toneMapping=0,Rc(rn,ui,Ri),H.toneMapping=ro,Xi.updateMultisampleRenderTarget(Qn),Xi.updateRenderTargetMipmap(Qn),H.setRenderTarget($i)}($i,ui,Ri),ri&&$r.viewport(gt.copy(ri)),$i.length>0&&Rc($i,ui,Ri),ro.length>0&&Rc(ro,ui,Ri),Ro.length>0&&Rc(Ro,ui,Ri),$r.buffers.depth.setTest(!0),$r.buffers.depth.setMask(!0),$r.buffers.color.setMask(!0),$r.setPolygonOffset(!1)}function Rc(rn,ui,Ri){const ri=!0===ui.isScene?ui.overrideMaterial:null;for(let $i=0,ro=rn.length;$i<ro;$i++){const Ro=rn[$i],fa=Ro.object,ia=Ro.geometry,bl=null===ri?Ro.material:ri,Ia=Ro.group;fa.layers.test(Ri.layers)&&Ty(fa,ui,Ri,ia,bl,Ia)}}function Ty(rn,ui,Ri,ri,$i,ro){rn.onBeforeRender(H,ui,Ri,ri,$i,ro),rn.modelViewMatrix.multiplyMatrices(Ri.matrixWorldInverse,rn.matrixWorld),rn.normalMatrix.getNormalMatrix(rn.modelViewMatrix),$i.onBeforeRender(H,ui,Ri,ri,rn,ro),!0===$i.transparent&&2===$i.side?($i.side=1,$i.needsUpdate=!0,H.renderBufferDirect(Ri,ui,ri,$i,rn,ro),$i.side=0,$i.needsUpdate=!0,H.renderBufferDirect(Ri,ui,ri,$i,rn,ro),$i.side=2):H.renderBufferDirect(Ri,ui,ri,$i,rn,ro),rn.onAfterRender(H,ui,Ri,ri,$i,ro)}function Rg(rn,ui,Ri){!0!==ui.isScene&&(ui=Sr);const ri=er.get(rn),$i=I.state.lights,Ro=$i.state.version,fa=ao.getParameters(rn,$i.state,I.state.shadowsArray,ui,Ri),ia=ao.getProgramCacheKey(fa);let bl=ri.programs;ri.environment=rn.isMeshStandardMaterial?ui.environment:null,ri.fog=ui.fog,ri.envMap=(rn.isMeshStandardMaterial?Rs:Br).get(rn.envMap||ri.environment),void 0===bl&&(rn.addEventListener("dispose",Pc),bl=new Map,ri.programs=bl);let Ia=bl.get(ia);if(void 0!==Ia){if(ri.currentProgram===Ia&&ri.lightsStateVersion===Ro)return G6(rn,fa),Ia}else fa.uniforms=ao.getUniforms(rn),rn.onBuild(Ri,fa,H),rn.onBeforeCompile(fa,H),Ia=ao.acquireProgram(fa,ia),bl.set(ia,Ia),ri.uniforms=fa.uniforms;const Ua=ri.uniforms;(!rn.isShaderMaterial&&!rn.isRawShaderMaterial||!0===rn.clipping)&&(Ua.clippingPlanes=jt.uniform),G6(rn,fa),ri.needsLights=function JTe(rn){return rn.isMeshLambertMaterial||rn.isMeshToonMaterial||rn.isMeshPhongMaterial||rn.isMeshStandardMaterial||rn.isShadowMaterial||rn.isShaderMaterial&&!0===rn.lights}(rn),ri.lightsStateVersion=Ro,ri.needsLights&&(Ua.ambientLightColor.value=$i.state.ambient,Ua.lightProbe.value=$i.state.probe,Ua.directionalLights.value=$i.state.directional,Ua.directionalLightShadows.value=$i.state.directionalShadow,Ua.spotLights.value=$i.state.spot,Ua.spotLightShadows.value=$i.state.spotShadow,Ua.rectAreaLights.value=$i.state.rectArea,Ua.ltc_1.value=$i.state.rectAreaLTC1,Ua.ltc_2.value=$i.state.rectAreaLTC2,Ua.pointLights.value=$i.state.point,Ua.pointLightShadows.value=$i.state.pointShadow,Ua.hemisphereLights.value=$i.state.hemi,Ua.directionalShadowMap.value=$i.state.directionalShadowMap,Ua.directionalShadowMatrix.value=$i.state.directionalShadowMatrix,Ua.spotShadowMap.value=$i.state.spotShadowMap,Ua.spotLightMatrix.value=$i.state.spotLightMatrix,Ua.spotLightMap.value=$i.state.spotLightMap,Ua.pointShadowMap.value=$i.state.pointShadowMap,Ua.pointShadowMatrix.value=$i.state.pointShadowMatrix);const wu=Ia.getUniforms(),db=pE.seqWithValue(wu.seq,Ua);return ri.currentProgram=Ia,ri.uniformsList=db,Ia}function G6(rn,ui){const Ri=er.get(rn);Ri.outputEncoding=ui.outputEncoding,Ri.instancing=ui.instancing,Ri.skinning=ui.skinning,Ri.morphTargets=ui.morphTargets,Ri.morphNormals=ui.morphNormals,Ri.morphColors=ui.morphColors,Ri.morphTargetsCount=ui.morphTargetsCount,Ri.numClippingPlanes=ui.numClippingPlanes,Ri.numIntersection=ui.numClipIntersection,Ri.vertexAlphas=ui.vertexAlphas,Ri.vertexTangents=ui.vertexTangents,Ri.toneMapping=ui.toneMapping}_l.setAnimationLoop(function xr(rn){Fi&&Fi(rn)}),typeof self<"u"&&_l.setContext(self),this.setAnimationLoop=function(rn){Fi=rn,Fs.setAnimationLoop(rn),null===rn?_l.stop():_l.start()},Fs.addEventListener("sessionstart",vs),Fs.addEventListener("sessionend",Ws),this.render=function(rn,ui){if(void 0===ui||!0===ui.isCamera){if(!0!==X){if(!0===rn.matrixWorldAutoUpdate&&rn.updateMatrixWorld(),null===ui.parent&&!0===ui.matrixWorldAutoUpdate&&ui.updateMatrixWorld(),!0===Fs.enabled&&!0===Fs.isPresenting&&(!0===Fs.cameraAutoUpdate&&Fs.updateCamera(ui),ui=Fs.getCamera()),!0===rn.isScene&&rn.onBeforeRender(H,rn,ui,be),I=hn.get(rn,k.length),I.init(),k.push(I),or.multiplyMatrices(ui.projectionMatrix,ui.matrixWorldInverse),ti.setFromProjectionMatrix(or),kn=this.localClippingEnabled,Yn=jt.init(this.clippingPlanes,kn,ui),w=ql.get(rn,T.length),w.init(),T.push(w),jd(rn,ui,0,H.sortObjects),w.finish(),!0===H.sortObjects&&w.sort(fi,ni),!0===Yn&&jt.beginShadows(),wi.render(I.state.shadowsArray,rn,ui),!0===Yn&&jt.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ir.render(w,rn),I.setupLights(H.physicallyCorrectLights),ui.isArrayCamera){const ri=ui.cameras;for(let $i=0,ro=ri.length;$i<ro;$i++){const Ro=ri[$i];$h(w,rn,Ro,Ro.viewport)}}else $h(w,rn,ui);null!==be&&(Xi.updateMultisampleRenderTarget(be),Xi.updateRenderTargetMipmap(be)),!0===rn.isScene&&rn.onAfterRender(H,rn,ui),Yi.resetDefaultState(),Se=-1,Ye=null,k.pop(),I=k.length>0?k[k.length-1]:null,T.pop(),w=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return ue},this.getActiveMipmapLevel=function(){return xe},this.getRenderTarget=function(){return be},this.setRenderTargetTextures=function(rn,ui,Ri){er.get(rn.texture).__webglTexture=ui,er.get(rn.depthTexture).__webglTexture=Ri;const ri=er.get(rn);ri.__hasExternalTextures=!0,ri.__hasExternalTextures&&(ri.__autoAllocateDepthBuffer=void 0===Ri,ri.__autoAllocateDepthBuffer||!0===ks.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ri.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(rn,ui){const Ri=er.get(rn);Ri.__webglFramebuffer=ui,Ri.__useDefaultFramebuffer=void 0===ui},this.setRenderTarget=function(rn,ui=0,Ri=0){be=rn,ue=ui,xe=Ri;let ri=!0,$i=null,ro=!1,Ro=!1;if(rn){const ia=er.get(rn);void 0!==ia.__useDefaultFramebuffer?($r.bindFramebuffer(36160,null),ri=!1):void 0===ia.__webglFramebuffer?Xi.setupRenderTarget(rn):ia.__hasExternalTextures&&Xi.rebindTextures(rn,er.get(rn.texture).__webglTexture,er.get(rn.depthTexture).__webglTexture);const bl=rn.texture;(bl.isData3DTexture||bl.isDataArrayTexture||bl.isCompressedArrayTexture)&&(Ro=!0);const Ia=er.get(rn).__webglFramebuffer;rn.isWebGLCubeRenderTarget?($i=Ia[ui],ro=!0):$i=Os.isWebGL2&&rn.samples>0&&!1===Xi.useMultisampledRTT(rn)?er.get(rn).__webglMultisampledFramebuffer:Ia,gt.copy(rn.viewport),zt.copy(rn.scissor),it=rn.scissorTest}else gt.copy(Bn).multiplyScalar(ei).floor(),zt.copy(Zn).multiplyScalar(ei).floor(),it=Rn;if($r.bindFramebuffer(36160,$i)&&Os.drawBuffers&&ri&&$r.drawBuffers(rn,$i),$r.viewport(gt),$r.scissor(zt),$r.setScissorTest(it),ro){const ia=er.get(rn.texture);Ui.framebufferTexture2D(36160,36064,34069+ui,ia.__webglTexture,Ri)}else if(Ro){const ia=er.get(rn.texture);Ui.framebufferTextureLayer(36160,36064,ia.__webglTexture,Ri||0,ui||0)}Se=-1},this.readRenderTargetPixels=function(rn,ui,Ri,ri,$i,ro,Ro){if(!rn||!rn.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let fa=er.get(rn).__webglFramebuffer;if(rn.isWebGLCubeRenderTarget&&void 0!==Ro&&(fa=fa[Ro]),fa){$r.bindFramebuffer(36160,fa);try{const ia=rn.texture,bl=ia.format,Ia=ia.type;if(bl!==Tg&&us.convert(bl)!==Ui.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Ua=Ia===sx&&(ks.has("EXT_color_buffer_half_float")||Os.isWebGL2&&ks.has("EXT_color_buffer_float"));if(!(Ia===F0||us.convert(Ia)===Ui.getParameter(35738)||Ia===__&&(Os.isWebGL2||ks.has("OES_texture_float")||ks.has("WEBGL_color_buffer_float"))||Ua))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ui>=0&&ui<=rn.width-ri&&Ri>=0&&Ri<=rn.height-$i&&Ui.readPixels(ui,Ri,ri,$i,us.convert(bl),us.convert(Ia),ro)}finally{const ia=null!==be?er.get(be).__webglFramebuffer:null;$r.bindFramebuffer(36160,ia)}}},this.copyFramebufferToTexture=function(rn,ui,Ri=0){const ri=Math.pow(2,-Ri),$i=Math.floor(ui.image.width*ri),ro=Math.floor(ui.image.height*ri);Xi.setTexture2D(ui,0),Ui.copyTexSubImage2D(3553,Ri,0,0,rn.x,rn.y,$i,ro),$r.unbindTexture()},this.copyTextureToTexture=function(rn,ui,Ri,ri=0){const $i=ui.image.width,ro=ui.image.height,Ro=us.convert(Ri.format),fa=us.convert(Ri.type);Xi.setTexture2D(Ri,0),Ui.pixelStorei(37440,Ri.flipY),Ui.pixelStorei(37441,Ri.premultiplyAlpha),Ui.pixelStorei(3317,Ri.unpackAlignment),ui.isDataTexture?Ui.texSubImage2D(3553,ri,rn.x,rn.y,$i,ro,Ro,fa,ui.image.data):ui.isCompressedTexture?Ui.compressedTexSubImage2D(3553,ri,rn.x,rn.y,ui.mipmaps[0].width,ui.mipmaps[0].height,Ro,ui.mipmaps[0].data):Ui.texSubImage2D(3553,ri,rn.x,rn.y,Ro,fa,ui.image),0===ri&&Ri.generateMipmaps&&Ui.generateMipmap(3553),$r.unbindTexture()},this.copyTextureToTexture3D=function(rn,ui,Ri,ri,$i=0){if(H.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ro=rn.max.x-rn.min.x+1,Ro=rn.max.y-rn.min.y+1,fa=rn.max.z-rn.min.z+1,ia=us.convert(ri.format),bl=us.convert(ri.type);let Ia;if(ri.isData3DTexture)Xi.setTexture3D(ri,0),Ia=32879;else{if(!ri.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Xi.setTexture2DArray(ri,0),Ia=35866}Ui.pixelStorei(37440,ri.flipY),Ui.pixelStorei(37441,ri.premultiplyAlpha),Ui.pixelStorei(3317,ri.unpackAlignment);const Ua=Ui.getParameter(3314),wu=Ui.getParameter(32878),db=Ui.getParameter(3316),ow=Ui.getParameter(3315),aw=Ui.getParameter(32877),yv=Ri.isCompressedTexture?Ri.mipmaps[0]:Ri.image;Ui.pixelStorei(3314,yv.width),Ui.pixelStorei(32878,yv.height),Ui.pixelStorei(3316,rn.min.x),Ui.pixelStorei(3315,rn.min.y),Ui.pixelStorei(32877,rn.min.z),Ri.isDataTexture||Ri.isData3DTexture?Ui.texSubImage3D(Ia,$i,ui.x,ui.y,ui.z,ro,Ro,fa,ia,bl,yv.data):Ri.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ui.compressedTexSubImage3D(Ia,$i,ui.x,ui.y,ui.z,ro,Ro,fa,ia,yv.data)):Ui.texSubImage3D(Ia,$i,ui.x,ui.y,ui.z,ro,Ro,fa,ia,bl,yv),Ui.pixelStorei(3314,Ua),Ui.pixelStorei(32878,wu),Ui.pixelStorei(3316,db),Ui.pixelStorei(3315,ow),Ui.pixelStorei(32877,aw),0===$i&&ri.generateMipmaps&&Ui.generateMipmap(Ia),$r.unbindTexture()},this.initTexture=function(rn){rn.isCubeTexture?Xi.setTextureCube(rn,0):rn.isData3DTexture?Xi.setTexture3D(rn,0):rn.isDataArrayTexture||rn.isCompressedArrayTexture?Xi.setTexture2DArray(rn,0):Xi.setTexture2D(rn,0),$r.unbindTexture()},this.resetState=function(){ue=0,xe=0,be=null,$r.reset(),Yi.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class OCe extends kG{}).prototype.isWebGL1Renderer=!0;class OG extends Qf{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Jf extends X0{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ws(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const KG=new Jt,ZG=new Jt,QG=new Uo,NP=new ZS,bE=new kC;class bx extends Qf{constructor(t=new ha,e=new Jf){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)KG.fromBufferAttribute(e,r-1),ZG.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=KG.distanceTo(ZG);t.setAttribute("lineDistance",new Ls(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bE.copy(n.boundingSphere),bE.applyMatrix4(r),bE.radius+=s,!1===t.ray.intersectsSphere(bE))return;QG.copy(r).invert(),NP.copy(t.ray).applyMatrix4(QG);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,p=new Jt,v=new Jt,w=new Jt,I=new Jt,T=this.isLineSegments?2:1,k=n.index,X=n.attributes.position;if(null!==k)for(let be=Math.max(0,o.start),Se=Math.min(k.count,o.start+o.count)-1;be<Se;be+=T){const Ye=k.getX(be),gt=k.getX(be+1);if(p.fromBufferAttribute(X,Ye),v.fromBufferAttribute(X,gt),NP.distanceSqToSegment(p,v,I,w)>u)continue;I.applyMatrix4(this.matrixWorld);const it=t.ray.origin.distanceTo(I);it<t.near||it>t.far||e.push({distance:it,point:w.clone().applyMatrix4(this.matrixWorld),index:be,face:null,faceIndex:null,object:this})}else for(let be=Math.max(0,o.start),Se=Math.min(X.count,o.start+o.count)-1;be<Se;be+=T){if(p.fromBufferAttribute(X,be),v.fromBufferAttribute(X,be+1),NP.distanceSqToSegment(p,v,I,w)>u)continue;I.applyMatrix4(this.matrixWorld);const gt=t.ray.origin.distanceTo(I);gt<t.near||gt>t.far||e.push({distance:gt,point:w.clone().applyMatrix4(this.matrixWorld),index:be,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}class gv{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let p,l=0,u=s-1;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),p=n[r]-o,p<0)l=r+1;else{if(!(p>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(s-1);const v=n[r];return(r+(o-v)/(n[r+1]-v))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=e||(o.isVector2?new sr:new Jt);return u.copy(l).sub(o).normalize(),u}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Jt,r=[],s=[],o=[],l=new Jt,u=new Uo;for(let T=0;T<=t;T++)r[T]=this.getTangentAt(T/t,new Jt);s[0]=new Jt,o[0]=new Jt;let p=Number.MAX_VALUE;const v=Math.abs(r[0].x),w=Math.abs(r[0].y),I=Math.abs(r[0].z);v<=p&&(p=v,n.set(1,0,0)),w<=p&&(p=w,n.set(0,1,0)),I<=p&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let T=1;T<=t;T++){if(s[T]=s[T-1].clone(),o[T]=o[T-1].clone(),l.crossVectors(r[T-1],r[T]),l.length()>Number.EPSILON){l.normalize();const k=Math.acos(Pu(r[T-1].dot(r[T]),-1,1));s[T].applyMatrix4(u.makeRotationAxis(l,k))}o[T].crossVectors(r[T],s[T])}if(!0===e){let T=Math.acos(Pu(s[0].dot(s[t]),-1,1));T/=t,r[0].dot(l.crossVectors(s[0],s[t]))>0&&(T=-T);for(let k=1;k<=t;k++)s[k].applyMatrix4(u.makeRotationAxis(r[k],T*k)),o[k].crossVectors(r[k],s[k])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class zP extends gv{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(t,e){const n=e||new sr,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const l=this.aStartAngle+t*s;let u=this.aX+this.xRadius*Math.cos(l),p=this.aY+this.yRadius*Math.sin(l);if(0!==this.aRotation){const v=Math.cos(this.aRotation),w=Math.sin(this.aRotation),I=u-this.aX,T=p-this.aY;u=I*v-T*w+this.aX,p=I*w+T*v+this.aY}return n.set(u,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function VP(){let i=0,t=0,e=0,n=0;function r(s,o,l,u){i=s,t=l,e=-3*s+3*o-2*l-u,n=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,p){r(o,l,p*(l-s),p*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,p,v,w){let I=(o-s)/p-(l-s)/(p+v)+(l-o)/v,T=(l-o)/v-(u-o)/(v+w)+(u-l)/w;I*=v,T*=v,r(o,l,I,T)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}const AE=new Jt,UP=new VP,HP=new VP,GP=new VP;function o8(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),l=i*i;return(2*e-2*n+s+o)*(i*l)+(-3*e+3*n-2*s-o)*l+s*i+e}function Cx(i,t,e,n){return function XCe(i,t){const e=1-i;return e*e*t}(i,t)+function YCe(i,t){return 2*(1-i)*i*t}(i,e)+function KCe(i,t){return i*i*t}(i,n)}function wx(i,t,e,n,r){return function ZCe(i,t){const e=1-i;return e*e*e*t}(i,t)+function QCe(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function JCe(i,t){return 3*(1-i)*i*i*t}(i,n)+function ewe(i,t){return i*i*i*t}(i,r)}class a8 extends gv{constructor(t=new sr,e=new sr,n=new sr,r=new sr){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new sr){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(wx(t,r.x,s.x,o.x,l.x),wx(t,r.y,s.y,o.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class WP extends gv{constructor(t=new sr,e=new sr){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new sr){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new sr;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class l8 extends gv{constructor(t=new sr,e=new sr,n=new sr){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new sr){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(Cx(t,r.x,s.x,o.x),Cx(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class u8 extends gv{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new sr){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),l=s-o,u=r[0===o?o:o-1],p=r[o],v=r[o>r.length-2?r.length-1:o+1],w=r[o>r.length-3?r.length-1:o+2];return n.set(o8(l,u.x,p.x,v.x,w.x),o8(l,u.y,p.y,v.y,w.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new sr).fromArray(r))}return this}}var jP=Object.freeze({__proto__:null,ArcCurve:class $Ce extends zP{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class qCe extends gv{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new Jt){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let p,v,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===u&&l===s-1&&(l=s-2,u=1),this.closed||l>0?p=r[(l-1)%s]:(AE.subVectors(r[0],r[1]).add(r[0]),p=AE);const w=r[l%s],I=r[(l+1)%s];if(this.closed||l+2<s?v=r[(l+2)%s]:(AE.subVectors(r[s-1],r[s-2]).add(r[s-1]),v=AE),"centripetal"===this.curveType||"chordal"===this.curveType){const T="chordal"===this.curveType?.5:.25;let k=Math.pow(p.distanceToSquared(w),T),H=Math.pow(w.distanceToSquared(I),T),X=Math.pow(I.distanceToSquared(v),T);H<1e-4&&(H=1),k<1e-4&&(k=H),X<1e-4&&(X=H),UP.initNonuniformCatmullRom(p.x,w.x,I.x,v.x,k,H,X),HP.initNonuniformCatmullRom(p.y,w.y,I.y,v.y,k,H,X),GP.initNonuniformCatmullRom(p.z,w.z,I.z,v.z,k,H,X)}else"catmullrom"===this.curveType&&(UP.initCatmullRom(p.x,w.x,I.x,v.x,this.tension),HP.initCatmullRom(p.y,w.y,I.y,v.y,this.tension),GP.initCatmullRom(p.z,w.z,I.z,v.z,this.tension));return n.set(UP.calc(u),HP.calc(u),GP.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new Jt).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:a8,CubicBezierCurve3:class twe extends gv{constructor(t=new Jt,e=new Jt,n=new Jt,r=new Jt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Jt){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(wx(t,r.x,s.x,o.x,l.x),wx(t,r.y,s.y,o.y,l.y),wx(t,r.z,s.z,o.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:zP,LineCurve:WP,LineCurve3:class nwe extends gv{constructor(t=new Jt,e=new Jt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new Jt){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:l8,QuadraticBezierCurve3:class c8 extends gv{constructor(t=new Jt,e=new Jt,n=new Jt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Jt){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(Cx(t,r.x,s.x,o.x),Cx(t,r.y,s.y,o.y),Cx(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:u8});class iwe extends gv{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new WP(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,l=this.curves[s],u=l.getLength();return l.getPointAt(0===u?0:1-o/u,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],u=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let p=0;p<u.length;p++){const v=u[p];n&&n.equals(v)||(e.push(v),n=v)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new jP[r.type]).fromJSON(r))}return this}}class xE extends iwe{constructor(t){super(),this.type="Path",this.currentPoint=new sr,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new WP(this.currentPoint.clone(),new sr(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new l8(this.currentPoint.clone(),new sr(t,e),new sr(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const l=new a8(this.currentPoint.clone(),new sr(t,e),new sr(n,r),new sr(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new u8(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,l,u){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,l,u),this}absellipse(t,e,n,r,s,o,l,u){const p=new zP(t,e,n,r,s,o,l,u);if(this.curves.length>0){const w=p.getPoint(0);w.equals(this.currentPoint)||this.lineTo(w.x,w.y)}this.curves.push(p);const v=p.getPoint(1);return this.currentPoint.copy(v),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class ew extends xE{constructor(t){super(t),this.uuid=zp(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new xE).fromJSON(r))}return this}}function d8(i,t,e,n,r){let s,o;if(r===function Cwe(i,t,e,n){let r=0;for(let s=t,o=e-n;s<e;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,t,e,n)>0)for(s=t;s<e;s+=n)o=p8(s,i[s],i[s+1],o);else for(s=e-n;s>=t;s-=n)o=p8(s,i[s],i[s+1],o);return o&&ME(o,o.next)&&(Sx(o),o=o.next),o}function eb(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!ME(e,e.next)&&0!==Kc(e.prev,e,e.next))e=e.next;else{if(Sx(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function xx(i,t,e,n,r,s,o){if(!i)return;!o&&s&&function gwe(i,t,e,n){let r=i;do{0===r.z&&(r.z=ZP(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function mwe(i){let t,e,n,r,s,o,l,u,p=1;do{for(e=i,i=null,s=null,o=0;e;){for(o++,n=e,l=0,t=0;t<p&&(l++,n=n.nextZ,n);t++);for(u=p;l>0||u>0&&n;)0!==l&&(0===u||!n||e.z<=n.z)?(r=e,e=e.nextZ,l--):(r=n,n=n.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;e=n}s.nextZ=null,p*=2}while(o>1)}(r)}(i,n,r,s);let u,p,l=i;for(;i.prev!==i.next;)if(u=i.prev,p=i.next,s?awe(i,n,r,s):owe(i))t.push(u.i/e|0),t.push(i.i/e|0),t.push(p.i/e|0),Sx(i),i=p.next,l=p.next;else if((i=p)===l){o?1===o?xx(i=lwe(eb(i),t,e),t,e,n,r,s,2):2===o&&cwe(i,t,e,n,r,s):xx(eb(i),t,e,n,r,s,1);break}}function owe(i){const t=i.prev,e=i,n=i.next;if(Kc(t,e,n)>=0)return!1;const r=t.x,s=e.x,o=n.x,l=t.y,u=e.y,p=n.y,v=r<s?r<o?r:o:s<o?s:o,w=l<u?l<p?l:p:u<p?u:p,I=r>s?r>o?r:o:s>o?s:o,T=l>u?l>p?l:p:u>p?u:p;let k=n.next;for(;k!==t;){if(k.x>=v&&k.x<=I&&k.y>=w&&k.y<=T&&tw(r,l,s,u,o,p,k.x,k.y)&&Kc(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function awe(i,t,e,n){const r=i.prev,s=i,o=i.next;if(Kc(r,s,o)>=0)return!1;const l=r.x,u=s.x,p=o.x,v=r.y,w=s.y,I=o.y,T=l<u?l<p?l:p:u<p?u:p,k=v<w?v<I?v:I:w<I?w:I,H=l>u?l>p?l:p:u>p?u:p,X=v>w?v>I?v:I:w>I?w:I,ue=ZP(T,k,t,e,n),xe=ZP(H,X,t,e,n);let be=i.prevZ,Se=i.nextZ;for(;be&&be.z>=ue&&Se&&Se.z<=xe;){if(be.x>=T&&be.x<=H&&be.y>=k&&be.y<=X&&be!==r&&be!==o&&tw(l,v,u,w,p,I,be.x,be.y)&&Kc(be.prev,be,be.next)>=0||(be=be.prevZ,Se.x>=T&&Se.x<=H&&Se.y>=k&&Se.y<=X&&Se!==r&&Se!==o&&tw(l,v,u,w,p,I,Se.x,Se.y)&&Kc(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;be&&be.z>=ue;){if(be.x>=T&&be.x<=H&&be.y>=k&&be.y<=X&&be!==r&&be!==o&&tw(l,v,u,w,p,I,be.x,be.y)&&Kc(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Se&&Se.z<=xe;){if(Se.x>=T&&Se.x<=H&&Se.y>=k&&Se.y<=X&&Se!==r&&Se!==o&&tw(l,v,u,w,p,I,Se.x,Se.y)&&Kc(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function lwe(i,t,e){let n=i;do{const r=n.prev,s=n.next.next;!ME(r,s)&&h8(r,n,n.next,s)&&Ix(r,s)&&Ix(s,r)&&(t.push(r.i/e|0),t.push(n.i/e|0),t.push(s.i/e|0),Sx(n),Sx(n.next),n=i=s),n=n.next}while(n!==i);return eb(n)}function cwe(i,t,e,n,r,s){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&ywe(o,l)){let u=f8(o,l);return o=eb(o,o.next),u=eb(u,u.next),xx(o,t,e,n,r,s,0),void xx(u,t,e,n,r,s,0)}l=l.next}o=o.next}while(o!==i)}function dwe(i,t){return i.x-t.x}function hwe(i,t){const e=function fwe(i,t){let r,e=t,n=-1/0;const s=i.x,o=i.y;do{if(o<=e.y&&o>=e.next.y&&e.next.y!==e.y){const I=e.x+(o-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(I<=s&&I>n&&(n=I,r=e.x<e.next.x?e:e.next,I===s))return r}e=e.next}while(e!==t);if(!r)return null;const l=r,u=r.x,p=r.y;let w,v=1/0;e=r;do{s>=e.x&&e.x>=u&&s!==e.x&&tw(o<p?s:n,o,u,p,o<p?n:s,o,e.x,e.y)&&(w=Math.abs(o-e.y)/(s-e.x),Ix(e,i)&&(w<v||w===v&&(e.x>r.x||e.x===r.x&&pwe(r,e)))&&(r=e,v=w)),e=e.next}while(e!==l);return r}(i,t);if(!e)return t;const n=f8(e,i);return eb(n,n.next),eb(e,e.next)}function pwe(i,t){return Kc(i.prev,i,t.prev)<0&&Kc(t.next,i,i.next)<0}function ZP(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-e)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function vwe(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function tw(i,t,e,n,r,s,o,l){return(r-o)*(t-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(e-o)*(t-l)&&(e-o)*(s-l)>=(r-o)*(n-l)}function ywe(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function _we(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&h8(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(Ix(i,t)&&Ix(t,i)&&function bwe(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,s=(i.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(Kc(i.prev,i,t.prev)||Kc(i,t.prev,t))||ME(i,t)&&Kc(i.prev,i,i.next)>0&&Kc(t.prev,t,t.next)>0)}function Kc(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function ME(i,t){return i.x===t.x&&i.y===t.y}function h8(i,t,e,n){const r=LE(Kc(i,t,e)),s=LE(Kc(i,t,n)),o=LE(Kc(e,n,i)),l=LE(Kc(e,n,t));return!!(r!==s&&o!==l||0===r&&DE(i,e,t)||0===s&&DE(i,n,t)||0===o&&DE(e,i,n)||0===l&&DE(e,t,n))}function DE(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function LE(i){return i>0?1:i<0?-1:0}function Ix(i,t){return Kc(i.prev,i,i.next)<0?Kc(i,t,i.next)>=0&&Kc(i,i.prev,t)>=0:Kc(i,t,i.prev)<0||Kc(i,i.next,t)<0}function f8(i,t){const e=new QP(i.i,i.x,i.y),n=new QP(t.i,t.x,t.y),r=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function p8(i,t,e,n){const r=new QP(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Sx(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function QP(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class xy{static area(t){const e=t.length;let n=0;for(let r=e-1,s=0;s<e;r=s++)n+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*n}static isClockWise(t){return xy.area(t)<0}static triangulateShape(t,e){const n=[],r=[],s=[];g8(t),m8(n,t);let o=t.length;e.forEach(g8);for(let u=0;u<e.length;u++)r.push(o),o+=e[u].length,m8(n,e[u]);const l=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let s=d8(i,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,p,v,w,I,T;if(n&&(s=function uwe(i,t,e,n){const r=[];let s,o,l,u,p;for(s=0,o=t.length;s<o;s++)l=t[s]*n,u=s<o-1?t[s+1]*n:i.length,p=d8(i,l,u,n,!1),p===p.next&&(p.steiner=!0),r.push(vwe(p));for(r.sort(dwe),s=0;s<r.length;s++)e=hwe(r[s],e);return e}(i,t,s,e)),i.length>80*e){l=p=i[0],u=v=i[1];for(let k=e;k<r;k+=e)w=i[k],I=i[k+1],w<l&&(l=w),I<u&&(u=I),w>p&&(p=w),I>v&&(v=I);T=Math.max(p-l,v-u),T=0!==T?32767/T:0}return xx(s,o,e,l,u,T,0),o}(n,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function g8(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function m8(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class PE extends ha{constructor(t=new ew([new sr(.5,.5),new sr(-.5,.5),new sr(-.5,-.5),new sr(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],s=[];for(let l=0,u=t.length;l<u;l++)o(t[l]);function o(l){const u=[],p=void 0!==e.curveSegments?e.curveSegments:12,v=void 0!==e.steps?e.steps:1,w=void 0!==e.depth?e.depth:1;let I=void 0===e.bevelEnabled||e.bevelEnabled,T=void 0!==e.bevelThickness?e.bevelThickness:.2,k=void 0!==e.bevelSize?e.bevelSize:T-.1,H=void 0!==e.bevelOffset?e.bevelOffset:0,X=void 0!==e.bevelSegments?e.bevelSegments:3;const ue=e.extrudePath,xe=void 0!==e.UVGenerator?e.UVGenerator:wwe;let be,Ye,gt,zt,it,Se=!1;ue&&(be=ue.getSpacedPoints(v),Se=!0,I=!1,Ye=ue.computeFrenetFrames(v,!1),gt=new Jt,zt=new Jt,it=new Jt),I||(X=0,T=0,k=0,H=0);const Tt=l.extractPoints(p);let un=Tt.shape;const ei=Tt.holes;if(!xy.isClockWise(un)){un=un.reverse();for(let er=0,Xi=ei.length;er<Xi;er++){const Br=ei[er];xy.isClockWise(Br)&&(ei[er]=Br.reverse())}}const ni=xy.triangulateShape(un,ei),Bn=un;for(let er=0,Xi=ei.length;er<Xi;er++)un=un.concat(ei[er]);function Zn(er,Xi,Br){return Xi||console.error("THREE.ExtrudeGeometry: vec does not exist"),Xi.clone().multiplyScalar(Br).add(er)}const Rn=un.length,ti=ni.length;function Yn(er,Xi,Br){let Rs,es,Ho;const vo=er.x-Xi.x,ao=er.y-Xi.y,vc=Br.x-er.x,ql=Br.y-er.y,hn=vo*vo+ao*ao;if(Math.abs(vo*ql-ao*vc)>Number.EPSILON){const wi=Math.sqrt(hn),Ir=Math.sqrt(vc*vc+ql*ql),Nr=Xi.x-ao/wi,ls=Xi.y+vo/wi,Yi=((Br.x-ql/Ir-Nr)*ql-(Br.y+vc/Ir-ls)*vc)/(vo*ql-ao*vc);Rs=Nr+vo*Yi-er.x,es=ls+ao*Yi-er.y;const Js=Rs*Rs+es*es;if(Js<=2)return new sr(Rs,es);Ho=Math.sqrt(Js/2)}else{let wi=!1;vo>Number.EPSILON?vc>Number.EPSILON&&(wi=!0):vo<-Number.EPSILON?vc<-Number.EPSILON&&(wi=!0):Math.sign(ao)===Math.sign(ql)&&(wi=!0),wi?(Rs=-ao,es=vo,Ho=Math.sqrt(hn)):(Rs=vo,es=ao,Ho=Math.sqrt(hn/2))}return new sr(Rs/Ho,es/Ho)}const kn=[];for(let er=0,Xi=Bn.length,Br=Xi-1,Rs=er+1;er<Xi;er++,Br++,Rs++)Br===Xi&&(Br=0),Rs===Xi&&(Rs=0),kn[er]=Yn(Bn[er],Bn[Br],Bn[Rs]);const Qn=[];let or,Bi=kn.concat();for(let er=0,Xi=ei.length;er<Xi;er++){const Br=ei[er];or=[];for(let Rs=0,es=Br.length,Ho=es-1,vo=Rs+1;Rs<es;Rs++,Ho++,vo++)Ho===es&&(Ho=0),vo===es&&(vo=0),or[Rs]=Yn(Br[Rs],Br[Ho],Br[vo]);Qn.push(or),Bi=Bi.concat(or)}for(let er=0;er<X;er++){const Xi=er/X,Br=T*Math.cos(Xi*Math.PI/2),Rs=k*Math.sin(Xi*Math.PI/2)+H;for(let es=0,Ho=Bn.length;es<Ho;es++){const vo=Zn(Bn[es],kn[es],Rs);Gs(vo.x,vo.y,-Br)}for(let es=0,Ho=ei.length;es<Ho;es++){const vo=ei[es];or=Qn[es];for(let ao=0,vc=vo.length;ao<vc;ao++){const ql=Zn(vo[ao],or[ao],Rs);Gs(ql.x,ql.y,-Br)}}}const yr=k+H;for(let er=0;er<Rn;er++){const Xi=I?Zn(un[er],Bi[er],yr):un[er];Se?(zt.copy(Ye.normals[0]).multiplyScalar(Xi.x),gt.copy(Ye.binormals[0]).multiplyScalar(Xi.y),it.copy(be[0]).add(zt).add(gt),Gs(it.x,it.y,it.z)):Gs(Xi.x,Xi.y,0)}for(let er=1;er<=v;er++)for(let Xi=0;Xi<Rn;Xi++){const Br=I?Zn(un[Xi],Bi[Xi],yr):un[Xi];Se?(zt.copy(Ye.normals[er]).multiplyScalar(Br.x),gt.copy(Ye.binormals[er]).multiplyScalar(Br.y),it.copy(be[er]).add(zt).add(gt),Gs(it.x,it.y,it.z)):Gs(Br.x,Br.y,w/v*er)}for(let er=X-1;er>=0;er--){const Xi=er/X,Br=T*Math.cos(Xi*Math.PI/2),Rs=k*Math.sin(Xi*Math.PI/2)+H;for(let es=0,Ho=Bn.length;es<Ho;es++){const vo=Zn(Bn[es],kn[es],Rs);Gs(vo.x,vo.y,w+Br)}for(let es=0,Ho=ei.length;es<Ho;es++){const vo=ei[es];or=Qn[es];for(let ao=0,vc=vo.length;ao<vc;ao++){const ql=Zn(vo[ao],or[ao],Rs);Se?Gs(ql.x,ql.y+be[v-1].y,be[v-1].x+Br):Gs(ql.x,ql.y,w+Br)}}}function Ui(er,Xi){let Br=er.length;for(;--Br>=0;){const Rs=Br;let es=Br-1;es<0&&(es=er.length-1);for(let Ho=0,vo=v+2*X;Ho<vo;Ho++){const ao=Rn*Ho,vc=Rn*(Ho+1);Os(Xi+Rs+ao,Xi+es+ao,Xi+es+vc,Xi+Rs+vc)}}}function Gs(er,Xi,Br){u.push(er),u.push(Xi),u.push(Br)}function ks(er,Xi,Br){$r(er),$r(Xi),$r(Br);const Rs=r.length/3,es=xe.generateTopUV(n,r,Rs-3,Rs-2,Rs-1);Ko(es[0]),Ko(es[1]),Ko(es[2])}function Os(er,Xi,Br,Rs){$r(er),$r(Xi),$r(Rs),$r(Xi),$r(Br),$r(Rs);const es=r.length/3,Ho=xe.generateSideWallUV(n,r,es-6,es-3,es-2,es-1);Ko(Ho[0]),Ko(Ho[1]),Ko(Ho[3]),Ko(Ho[1]),Ko(Ho[2]),Ko(Ho[3])}function $r(er){r.push(u[3*er+0]),r.push(u[3*er+1]),r.push(u[3*er+2])}function Ko(er){s.push(er.x),s.push(er.y)}(function Sr(){const er=r.length/3;if(I){let Xi=0,Br=Rn*Xi;for(let Rs=0;Rs<ti;Rs++){const es=ni[Rs];ks(es[2]+Br,es[1]+Br,es[0]+Br)}Xi=v+2*X,Br=Rn*Xi;for(let Rs=0;Rs<ti;Rs++){const es=ni[Rs];ks(es[0]+Br,es[1]+Br,es[2]+Br)}}else{for(let Xi=0;Xi<ti;Xi++){const Br=ni[Xi];ks(Br[2],Br[1],Br[0])}for(let Xi=0;Xi<ti;Xi++){const Br=ni[Xi];ks(Br[0]+Rn*v,Br[1]+Rn*v,Br[2]+Rn*v)}}n.addGroup(er,r.length/3-er,0)})(),function Ys(){const er=r.length/3;let Xi=0;Ui(Bn,Xi),Xi+=Bn.length;for(let Br=0,Rs=ei.length;Br<Rs;Br++){const es=ei[Br];Ui(es,Xi),Xi+=es.length}n.addGroup(er,r.length/3-er,1)}()}this.setAttribute("position",new Ls(r,3)),this.setAttribute("uv",new Ls(s,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function Awe(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)e.shapes.push(i[n].uuid);else e.shapes.push(i.uuid);return e.options=Object.assign({},t),void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let s=0,o=t.shapes.length;s<o;s++)n.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new jP[r.type]).fromJSON(r)),new PE(n,t.options)}}const wwe={generateTopUV:function(i,t,e,n,r){const l=t[3*n],u=t[3*n+1],p=t[3*r],v=t[3*r+1];return[new sr(t[3*e],t[3*e+1]),new sr(l,u),new sr(p,v)]},generateSideWallUV:function(i,t,e,n,r,s){const o=t[3*e],l=t[3*e+1],u=t[3*e+2],p=t[3*n],v=t[3*n+1],w=t[3*n+2],I=t[3*r],T=t[3*r+1],k=t[3*r+2],H=t[3*s],X=t[3*s+1],ue=t[3*s+2];return Math.abs(l-v)<Math.abs(o-p)?[new sr(o,1-u),new sr(p,1-w),new sr(I,1-k),new sr(H,1-ue)]:[new sr(l,1-u),new sr(v,1-w),new sr(T,1-k),new sr(X,1-ue)]}};class OE extends X0{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ws(16777215),this.specular=new ws(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ws(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new sr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function Dg(i,t,e){return oR(i)?new i.constructor(i.subarray(t,void 0!==e?e:i.length)):i.slice(t,e)}function tb(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function oR(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}class FE{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let l=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const l=e[1];t<l&&(n=2,s=l);for(let u=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const l=n+o>>>1;t<e[l]?o=l:n=l+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Nwe extends FE{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,l=r[s],u=r[o];if(void 0===l)switch(this.getSettings_().endingStart){case 2401:s=t,l=2*e-n;break;case 2402:s=r.length-2,l=e+r[s]-r[s+1];break;default:s=t,l=n}if(void 0===u)switch(this.getSettings_().endingEnd){case 2401:o=t,u=2*n-e;break;case 2402:o=1,u=n+r[1]-r[0];break;default:o=t-1,u=e}const p=.5*(n-e),v=this.valueSize;this._weightPrev=p/(e-l),this._weightNext=p/(u-n),this._offsetPrev=s*v,this._offsetNext=o*v}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=this._offsetPrev,w=this._offsetNext,I=this._weightPrev,T=this._weightNext,k=(n-e)/(r-e),H=k*k,X=H*k,ue=-I*X+2*I*H-I*k,xe=(1+I)*X+(-1.5-2*I)*H+(-.5+I)*k+1,be=(-1-T)*X+(1.5+T)*H+.5*k,Se=T*X-T*H;for(let Ye=0;Ye!==l;++Ye)s[Ye]=ue*o[v+Ye]+xe*o[p+Ye]+be*o[u+Ye]+Se*o[w+Ye];return s}}class b8 extends FE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=(n-e)/(r-e),w=1-v;for(let I=0;I!==l;++I)s[I]=o[p+I]*w+o[u+I]*v;return s}}class Bwe extends FE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class mv{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=tb(e,this.TimeBufferType),this.values=tb(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:tb(t.times,Array),values:tb(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Bwe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new b8(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Nwe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=Dg(n,s,o),this.values=Dg(this.values,s*l,o*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let l=0;l!==s;l++){const u=n[l];if("number"==typeof u&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(null!==o&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),t=!1;break}o=u}if(void 0!==r&&oR(r))for(let l=0,u=r.length;l!==u;++l){const p=r[l];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,p),t=!1;break}}return t}optimize(){const t=Dg(this.times),e=Dg(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let l=1;l<s;++l){let u=!1;const p=t[l];if(p!==t[l+1]&&(1!==l||p!==t[0]))if(r)u=!0;else{const w=l*n,I=w-n,T=w+n;for(let k=0;k!==n;++k){const H=e[w+k];if(H!==e[I+k]||H!==e[T+k]){u=!0;break}}}if(u){if(l!==o){t[o]=t[l];const w=l*n,I=o*n;for(let T=0;T!==n;++T)e[I+T]=e[w+T]}++o}}if(s>0){t[o]=t[s];for(let l=s*n,u=o*n,p=0;p!==n;++p)e[u+p]=e[l+p];++o}return o!==t.length?(this.times=Dg(t,0,o),this.values=Dg(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=Dg(this.times,0),e=Dg(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}mv.prototype.TimeBufferType=Float32Array,mv.prototype.ValueBufferType=Float32Array,mv.prototype.DefaultInterpolation=2301;class nw extends mv{}nw.prototype.ValueTypeName="bool",nw.prototype.ValueBufferType=Array,nw.prototype.DefaultInterpolation=2300,nw.prototype.InterpolantFactoryMethodLinear=void 0,nw.prototype.InterpolantFactoryMethodSmooth=void 0;(class C8 extends mv{}).prototype.ValueTypeName="color";(class NE extends mv{}).prototype.ValueTypeName="number";class zwe extends FE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-e)/(r-e);let p=t*l;for(let v=p+l;p!==v;p+=4)Up.slerpFlat(s,0,o,p-l,o,p,u);return s}}class Ex extends mv{InterpolantFactoryMethodLinear(t){return new zwe(this.times,this.values,this.getValueSize(),t)}}Ex.prototype.ValueTypeName="quaternion",Ex.prototype.DefaultInterpolation=2301,Ex.prototype.InterpolantFactoryMethodSmooth=void 0;class iw extends mv{}iw.prototype.ValueTypeName="string",iw.prototype.ValueBufferType=Array,iw.prototype.DefaultInterpolation=2300,iw.prototype.InterpolantFactoryMethodLinear=void 0,iw.prototype.InterpolantFactoryMethodSmooth=void 0;(class BE extends mv{}).prototype.ValueTypeName="vector";const rw={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class w8{constructor(t,e,n){const r=this;let u,s=!1,o=0,l=0;const p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(v){l++,!1===s&&void 0!==r.onStart&&r.onStart(v,o,l),s=!0},this.itemEnd=function(v){o++,void 0!==r.onProgress&&r.onProgress(v,o,l),o===l&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(v){void 0!==r.onError&&r.onError(v)},this.resolveURL=function(v){return u?u(v):v},this.setURLModifier=function(v){return u=v,this},this.addHandler=function(v,w){return p.push(v,w),this},this.removeHandler=function(v){const w=p.indexOf(v);return-1!==w&&p.splice(w,2),this},this.getHandler=function(v){for(let w=0,I=p.length;w<I;w+=2){const T=p[w],k=p[w+1];if(T.global&&(T.lastIndex=0),T.test(v))return k}return null}}}const Hwe=new w8;class A8{constructor(t){this.manager=void 0!==t?t:Hwe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,s){n.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Iy={};class Gwe extends Error{constructor(t,e){super(t),this.response=e}}class Sy extends A8{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=rw.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==Iy[t])return void Iy[t].push({onLoad:e,onProgress:n,onError:r});Iy[t]=[],Iy[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(o).then(p=>{if(200===p.status||0===p.status){if(0===p.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===p.body||void 0===p.body.getReader)return p;const v=Iy[t],w=p.body.getReader(),I=p.headers.get("Content-Length"),T=I?parseInt(I):0,k=0!==T;let H=0;const X=new ReadableStream({start(ue){!function xe(){w.read().then(({done:be,value:Se})=>{if(be)ue.close();else{H+=Se.byteLength;const Ye=new ProgressEvent("progress",{lengthComputable:k,loaded:H,total:T});for(let gt=0,zt=v.length;gt<zt;gt++){const it=v[gt];it.onProgress&&it.onProgress(Ye)}ue.enqueue(Se),xe()}})}()}});return new Response(X)}throw new Gwe(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(u){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(v=>(new DOMParser).parseFromString(v,l));case"json":return p.json();default:if(void 0===l)return p.text();{const w=/charset="?([^;"\s]*)"?/i.exec(l),I=w&&w[1]?w[1].toLowerCase():void 0,T=new TextDecoder(I);return p.arrayBuffer().then(k=>T.decode(k))}}}).then(p=>{rw.add(t,p);const v=Iy[t];delete Iy[t];for(let w=0,I=v.length;w<I;w++){const T=v[w];T.onLoad&&T.onLoad(p)}}).catch(p=>{const v=Iy[t];if(void 0===v)throw this.manager.itemError(t),p;delete Iy[t];for(let w=0,I=v.length;w<I;w++){const T=v[w];T.onError&&T.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class cR extends Qf{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new ws(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const uR=new Uo,x8=new Jt,I8=new Jt;class S8{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new sr(512,512),this.map=null,this.mapPass=null,this.matrix=new Uo,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new IP,this._frameExtents=new sr(1,1),this._viewportCount=1,this._viewports=[new Bl(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;x8.setFromMatrixPosition(t.matrixWorld),e.position.copy(x8),I8.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(I8),e.updateMatrixWorld(),uR.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uR),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(uR)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class jwe extends S8{constructor(){super(new vh(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*ox*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class E8 extends cR{constructor(t,e,n=0,r=Math.PI/3,s=0,o=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qf.DefaultUp),this.updateMatrix(),this.target=new Qf,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new jwe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Xwe extends S8{constructor(){super(new SP(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class M8 extends cR{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qf.DefaultUp),this.updateMatrix(),this.target=new Qf,this.shadow=new Xwe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class D8 extends cR{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}const fR="\\[\\]\\.:\\/",sAe=new RegExp("["+fR+"]","g"),pR="[^"+fR+"]",oAe="[^"+fR.replace("\\.","")+"]",dAe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",pR)+/(WCOD+)?/.source.replace("WCOD",oAe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pR)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pR)+"$"),hAe=["material","materials","bones","map"];class fAe{constructor(t,e,n){const r=n||mc.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let mc=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(sAe,"")}static parseTrackName(e){const n=dAe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==hAe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===n||u.uuid===n)return u;const p=r(u.children);if(p)return p}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let v=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let w=0;w<e.length;w++)if(e[w].name===v){v=w;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==v){if(void 0===e[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[v]}}const l=e[s];if(void 0===l)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}p=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else void 0!==l.fromArray&&void 0!==l.toArray?(p=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(p=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=fAe,i})();mc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},mc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},mc.prototype.GetterByBindingType=[mc.prototype._getValue_direct,mc.prototype._getValue_array,mc.prototype._getValue_arrayElement,mc.prototype._getValue_toArray],mc.prototype.SetterByBindingTypeAndVersioning=[[mc.prototype._setValue_direct,mc.prototype._setValue_direct_setNeedsUpdate,mc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mc.prototype._setValue_array,mc.prototype._setValue_array_setNeedsUpdate,mc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mc.prototype._setValue_arrayElement,mc.prototype._setValue_arrayElement_setNeedsUpdate,mc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mc.prototype._setValue_fromArray,mc.prototype._setValue_fromArray_setNeedsUpdate,mc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class yAe{constructor(){this.type="ShapePath",this.color=new ws,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new xE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,s,o){return this.currentPath.bezierCurveTo(t,e,n,r,s,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(ue,xe){const be=xe.length;let Se=!1;for(let Ye=be-1,gt=0;gt<be;Ye=gt++){let zt=xe[Ye],it=xe[gt],Tt=it.x-zt.x,un=it.y-zt.y;if(Math.abs(un)>Number.EPSILON){if(un<0&&(zt=xe[gt],Tt=-Tt,it=xe[Ye],un=-un),ue.y<zt.y||ue.y>it.y)continue;if(ue.y===zt.y){if(ue.x===zt.x)return!0}else{const ei=un*(ue.x-zt.x)-Tt*(ue.y-zt.y);if(0===ei)return!0;if(ei<0)continue;Se=!Se}}else{if(ue.y!==zt.y)continue;if(it.x<=ue.x&&ue.x<=zt.x||zt.x<=ue.x&&ue.x<=it.x)return!0}}return Se}const r=xy.isClockWise,s=this.subPaths;if(0===s.length)return[];let o,l,u;const p=[];if(1===s.length)return l=s[0],u=new ew,u.curves=l.curves,p.push(u),p;let v=!r(s[0].getPoints());v=t?!v:v;const w=[],I=[];let H,X,T=[],k=0;I[k]=void 0,T[k]=[];for(let ue=0,xe=s.length;ue<xe;ue++)l=s[ue],H=l.getPoints(),o=r(H),o=t?!o:o,o?(!v&&I[k]&&k++,I[k]={s:new ew,p:H},I[k].s.curves=l.curves,v&&k++,T[k]=[]):T[k].push({h:l,p:H[0]});if(!I[0])return function e(ue){const xe=[];for(let be=0,Se=ue.length;be<Se;be++){const Ye=ue[be],gt=new ew;gt.curves=Ye.curves,xe.push(gt)}return xe}(s);if(I.length>1){let ue=!1,xe=0;for(let be=0,Se=I.length;be<Se;be++)w[be]=[];for(let be=0,Se=I.length;be<Se;be++){const Ye=T[be];for(let gt=0;gt<Ye.length;gt++){const zt=Ye[gt];let it=!0;for(let Tt=0;Tt<I.length;Tt++)n(zt.p,I[Tt].p)&&(be!==Tt&&xe++,it?(it=!1,w[Tt].push(zt)):ue=!0);it&&w[be].push(zt)}}xe>0&&!1===ue&&(T=w)}for(let ue=0,xe=I.length;ue<xe;ue++){u=I[ue].s,p.push(u),X=T[ue];for(let be=0,Se=X.length;be<Se;be++)u.holes.push(X[be].h)}return p}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"146"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="146");var wAe=W(5570);class AAe extends A8{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new Sy(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(l){const u=s.parse(JSON.parse(l));e&&e(u)},n,r)}parse(t){return new xAe(t)}}class xAe{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=function IAe(i,t,e){const n=Array.from(i),r=t/e.resolution,s=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,o=[];let l=0,u=0;for(let p=0;p<n.length;p++){const v=n[p];if("\n"===v)l=0,u-=s;else{const w=SAe(v,r,l,u,e);w&&(l+=w.offsetX,o.push(w.path))}}return o}(t,e,this.data);for(let s=0,o=r.length;s<o;s++)n.push(...r[s].toShapes(!1));return n}}function SAe(i,t,e,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");const o=new yAe;let l,u,p,v,w,I,T,k;if(s.o){const H=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let X=0,ue=H.length;X<ue;)switch(H[X++]){case"m":l=H[X++]*t+e,u=H[X++]*t+n,o.moveTo(l,u);break;case"l":l=H[X++]*t+e,u=H[X++]*t+n,o.lineTo(l,u);break;case"q":p=H[X++]*t+e,v=H[X++]*t+n,w=H[X++]*t+e,I=H[X++]*t+n,o.quadraticCurveTo(w,I,p,v);break;case"b":p=H[X++]*t+e,v=H[X++]*t+n,w=H[X++]*t+e,I=H[X++]*t+n,T=H[X++]*t+e,k=H[X++]*t+n,o.bezierCurveTo(w,I,T,k,p,v)}}return{offsetX:s.ha*t,path:o}}class EAe extends PE{constructor(t,e={}){const n=e.font;if(void 0===n)super();else{const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e)}this.type="TextGeometry"}}const TAe=["canvas"];let MAe=(()=>{class i{constructor(e,n,r,s){this.graphsService=e,this.logger=n,this.store=r,this.route=s,this.rotationSpeedX=.05,this.rotationSpeedY=.01,this.size=200,this.frustumSize=600,this.texture="/assets/texture.jpg",this.cameraZ=1,this.fieldOfView=1,this.nearClippingPlane=150,this.farClippingPlane=1e3,this.scene=new OG,this.group=new XC,this.graph$=this.store.select(p2),this.subscriptions=[],this.subscriptions.push(this.graph$.subscribe(o=>{!o||(this.group.clear(),this.loadGraph(o,this.scene))}))}get canvas(){return this.canvasRef?.nativeElement}ngOnInit(){}ngAfterViewInit(){this.route.params.subscribe(e=>{this.id=e.label,this.clearScene(),this.startRenderingLoop();let n=this.graphsService.findOne(this.id+"");n&&this.store.dispatch(E1({graph:n}))})}ngOnDestroy(){this.subscriptions&&pr.each(this.subscriptions,e=>{e.unsubscribe()})}clearScene(){this.scene.add(this.group),this.camera=new vh(45,this.getAspectRatio(),1,1e3),this.camera.position.set(0,15,35);let e=new OE({color:16711680,shininess:150,specular:2236962}),n=new M_(1e3,.15,1e3);e=new OE({color:10530223,shininess:150,specular:1118481});const r=new jh(n,e);r.scale.multiplyScalar(3),r.castShadow=!1,r.receiveShadow=!0,this.scene.add(r),this.scene.add(new D8(4210752));let s=new E8(4210752);s.name="Spot Light",s.angle=Math.PI/5,s.penumbra=.3,s.position.set(5,5,5),s.castShadow=!0,s.shadow.camera.near=8,s.shadow.camera.far=30,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,this.scene.add(s),this.scene.add(s.shadow.camera);let o=new M8(16777215,1);o.name="Dir. Light",o.position.set(0,10,0),o.castShadow=!0,o.shadow.camera.near=1,o.shadow.camera.far=10,o.shadow.camera.right=15,o.shadow.camera.left=-15,o.shadow.camera.top=15,o.shadow.camera.bottom=-15,o.shadow.mapSize.width=1024,o.shadow.mapSize.height=1024,this.scene.add(o),this.scene.add(o.shadow.camera)}getAspectRatio(){return this.canvas.clientWidth/this.canvas.clientHeight}loadGraph(e,n){let r={};if(e){this.logger.info("Load",e);let s=new Jt(1,0,0);pr.each(e.nodes,u=>{let p=new M_(1,.1,1),v=new OE({color:16711680,shininess:150,specular:2236962}),w=new jh(p,v);w.name=u.id,r[u.id]={x:u.x,y:u.y},w.position.set(u.x/50,2,u.y/50),w.castShadow=!0,w.receiveShadow=!0,n.add(w),this.group.add(w),(new AAe).load("assets/fonts/helvetiker_regular.typeface.json",T=>{const k=new EAe(u.label,{font:T,size:.3,height:.1,curveSegments:5,bevelEnabled:!1,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:0});k.computeBoundingBox(),k.boundingBox||new C_;let ue=new jh(k,v);ue.position.set(u.x/50,2,u.y/50),ue.rotateOnAxis(s,-Math.PI/2),n.add(ue),this.group.add(ue)})}),pr.each(e.edges,u=>{let p=r[u.source],v=r[u.target];const w=new Jf({color:255}),I=[];I.push(new Jt(p.x/50,2,p.y/50)),I.push(new Jt(v.x/50,2,v.y/50));const T=(new ha).setFromPoints(I),k=new bx(T,w);n.add(k),this.group.add(k)});let l=(new C_).setFromObject(this.group).getSize(new Jt);this.group.translateX(-l.x/2),this.group.translateZ(-l.z/2),this.logger.info("Loaded",this.group.children.length,l)}}startRenderingLoop(){this.renderer=new kG({canvas:this.canvas}),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=0;let e=this;const n=new wAe.OrbitControls(this.camera,this.renderer.domElement);n.autoRotate=!0,n.enableZoom=!0,n.enablePan=!1,n.minDistance=20,n.enableDamping=!0,n.dampingFactor=.2,n.enableKeys=!0,n.update(),function r(){requestAnimationFrame(r),e.renderer.render(e.scene,e.camera)}()}}return i.\u0275fac=function(e){return new(e||i)(qt(R1),qt(zh),qt(ny),qt(i_))},i.\u0275cmp=Rr({type:i,selectors:[["app-threejs"]],viewQuery:function(e,n){if(1&e&&Hr(TAe,5),2&e){let r;tr(r=nr())&&(n.canvasRef=r.first)}},inputs:{rotationSpeedX:"rotationSpeedX",rotationSpeedY:"rotationSpeedY",size:"size",frustumSize:"frustumSize",texture:"texture",cameraZ:"cameraZ",fieldOfView:"fieldOfView",nearClippingPlane:["nearClipping","nearClippingPlane"],farClippingPlane:["farClipping","farClippingPlane"]},decls:2,vars:0,consts:[["id","canvas",2,"height","100%","width","100%"],["canvas",""]],template:function(e,n){1&e&&Kn(0,"canvas",0,1)}}),i})();const DAe=uA("styles"),LAe=uA("style");function PAe(i,t){if(1&i){const e=Di();Xe(0,"span",12)(1,"input",13),_n("ngModelChange",function(r){return Lt(e),Pt(ye().newStyle=r)}),Ke(),Xe(2,"label",14),bi(3,"Name"),Ke(),Xe(4,"button",15),_n("click",function(){Lt(e);const r=ye();return Pt(r.openNew(r.newStyle))}),Ke()()}if(2&i){const e=ye();we(1),de("ngModel",e.newStyle)}}function RAe(i,t){}function kAe(i,t){1&i&&(Xe(0,"div",16)(1,"h5",17),bi(2,"Manage Styles"),Ke(),Xe(3,"span",18),Kn(4,"i",19)(5,"input",20),Ke()())}function OAe(i,t){1&i&&(Xe(0,"tr")(1,"th",21),Kn(2,"p-tableHeaderCheckbox"),Ke(),Xe(3,"th",22),bi(4,"Label "),Kn(5,"p-sortIcon",23),Ke(),Xe(6,"th"),bi(7,"Action(s) "),Ke()())}function FAe(i,t){if(1&i){const e=Di();Xe(0,"tr")(1,"td"),Kn(2,"p-tableCheckbox",24),Ke(),Xe(3,"td"),bi(4),Ke(),Xe(5,"td")(6,"button",25),_n("click",function(){const s=Lt(e).$implicit;return Pt(ye().selectStyle(s))}),Ke(),Xe(7,"span"),bi(8,"\xa0"),Ke(),Xe(9,"button",26),_n("click",function(r){const o=Lt(e).$implicit;return Pt(ye().confirm(r,o))}),Ke(),Xe(10,"span"),bi(11,"\xa0"),Ke()()()}if(2&i){const e=t.$implicit;we(2),de("value",e),we(2),As(e.id)}}const NAe=function(){return["label"]},BAe=function(){return{width:"60vw",height:"50vw"}};let zAe=(()=>{class i{constructor(e,n,r,s,o,l,u){this.router=e,this.logger=n,this.styleService=r,this.clipboardService=s,this.confirmationService=o,this.messageService=l,this.store=u,this.style=void 0,this.styles=[],this.displayStyle=!1,this.style$=this.store.select(LAe),this.styles$=this.store.select(DAe),this.style$.subscribe(p=>{!p||(this.style=p)}),this.styles$.subscribe(p=>{!p||(this.styles=pr.map(p,v=>({id:v.id,tags:v.tags})))})}ngOnInit(){let e=this.styleService.findAll();this.store.dispatch(PA({styles:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteStyle(n)},reject:()=>{}})}selectStyle(e){this.selectedStyle=this.styleService.findOne(e.id),this.logger.info(this.selectedStyle),this.displayStyle=!0}deleteStyle(e){let n=this.styleService.delete(e.id);this.store.dispatch(PA({styles:n}))}openNew(e){if(e){this.styleService.store({id:e,tags:[]},r=>{r.tags=[]});let n=this.styleService.findAll();this.logger.info(n),this.store.dispatch(PA({styles:n}))}}onFileDropped(e){e[0].name.endsWith(".json")&&this.onFileStyleDropped(e)}onFileStyleDropped(e){var n=this;let r=e[0].name;this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${r}`});let s=new FileReader;s.addEventListener("loadend",iy(function*(){let o=JSON.parse(s.result+"");n.styleService.store({id:r,tags:o},u=>{u.tags=o});let l=n.styleService.findAll();n.store.dispatch(PA({styles:l}))})),s.readAsText(e[0])}}return i.\u0275fac=function(e){return new(e||i)(qt(Vd),qt(zh),qt(C4),qt(k1),qt(rA),qt(iv),qt(ny))},i.\u0275cmp=Rr({type:i,selectors:[["app-style-selector"]],decls:16,vars:18,consts:[["dropZoneDirective","",1,"card",3,"fileDropped"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["mystyles",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["position","bottom-center","key","bc"],["header","Drag and drop file to update style",3,"modal","visible","maximizable","draggable","resizable","visibleChange"],["dropZoneDirective","",3,"fileDropped"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","pRipple","","pTooltip","Select this style","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Remove this style","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(e,n){1&e&&(Xe(0,"div",0),_n("fileDropped",function(s){return n.onFileDropped(s)}),Xe(1,"p-toolbar",1),ze(2,PAe,5,1,"ng-template",2),ze(3,RAe,0,0,"ng-template",3),Ke(),Kn(4,"p-toast"),Xe(5,"p-table",4,5),ze(7,kAe,6,0,"ng-template",6),ze(8,OAe,8,0,"ng-template",7),ze(9,FAe,12,2,"ng-template",8),Ke()(),Kn(10,"p-confirmPopup")(11,"p-toast",9),Xe(12,"p-dialog",10),_n("visibleChange",function(s){return n.displayStyle=s}),Xe(13,"pre",11),_n("fileDropped",function(s){return n.onFileDropped(s)}),bi(14),function pF(i,t){const e=Zs();let n;const r=i+22;e.firstCreatePass?(n=function z7(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=up(n.type)),o=rd(qt);try{const l=wh(!1),u=s();return wh(l),function BW(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,Pi(),r,u),u}finally{rd(o)}}(15,"json"),Ke()()),2&e&&(we(5),de("value",n.styles)("rows",10)("paginator",!0)("globalFilterFields",Oo(16,NAe))("rowHover",!0)("showCurrentPageReport",!0),we(7),To(Oo(17,BAe)),de("modal",!0)("visible",n.displayStyle)("maximizable",!0)("draggable",!1)("resizable",!1),we(2),As(function gF(i,t,e){const n=i+22,r=Pi(),s=Ul(r,n);return function Nw(i,t){return i[1].data[t].pure}(r,n)?cF(r,la(),t,s.transform,e,s):s.transform(e)}(15,14,n.selectedStyle)))},dependencies:[l_,hl,G2,W2,j2,$2,x0,Z1,ov,LA,hC,X2,C0,cC,ay,Y2,RS,VN]}),i})();function VAe(i,t){}function UAe(i,t){}function HAe(i,t){1&i&&(Xe(0,"div",11)(1,"h5",12),bi(2,"Manage Rulesets"),Ke(),Xe(3,"span",13),Kn(4,"i",14)(5,"input",15),Ke()())}function GAe(i,t){1&i&&(Xe(0,"tr")(1,"th",16),Kn(2,"p-tableHeaderCheckbox"),Ke(),Xe(3,"th",17),bi(4,"Id "),Kn(5,"p-sortIcon",18),Ke(),Xe(6,"th",19),bi(7,"Type "),Kn(8,"p-sortIcon",20),Ke(),Xe(9,"th",21),bi(10,"Size "),Kn(11,"p-sortIcon",22),Ke(),Xe(12,"th"),bi(13,"Action(s) "),Ke()())}function WAe(i,t){if(1&i){const e=Di();Xe(0,"tr")(1,"td"),Kn(2,"p-tableCheckbox",23),Ke(),Xe(3,"td"),bi(4),Ke(),Xe(5,"td"),bi(6),Ke(),Xe(7,"td"),bi(8),Ke(),Xe(9,"td")(10,"button",24),_n("click",function(r){const o=Lt(e).$implicit;return Pt(ye().confirm(r,o))}),Ke(),Xe(11,"span"),bi(12,"\xa0"),Ke(),Xe(13,"button",25),_n("click",function(){const s=Lt(e).$implicit;return Pt(ye().select(s))}),Ke(),Xe(14,"span"),bi(15,"\xa0"),Ke()()()}if(2&i){const e=t.$implicit;we(2),de("value",e),we(2),As(e.id),we(2),As(e.type),we(2),As(e.size)}}const jAe=function(){return["label"]},$Ae=[{path:"graphs",component:Poe},{path:"graphs/sigma/:label",component:Uoe},{path:"graphs/cytoscape/:label",component:Tme},{path:"graphs/threejs/:label",component:MAe},{path:"rules",component:(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.logger=n,this.messageService=r,this.confirmationService=s,this.rulesService=o,this.rules=this.rulesService.findAll()}ngOnInit(){}onFileDropped(e){var n=this;let r=e[0].name;this.logger.info("Load file",r);let s="";r.endsWith(".json")&&(s="json"),r.endsWith(".csv")&&(s="csv");let o=new FileReader;o.addEventListener("loadend",iy(function*(){n.messageService.add({key:"bc",severity:"info",summary:"Drop",detail:`Filename ${r}`}),n.logger.info("UPDATE",r,JSON.parse(o.result+"")),n.rulesService.load(r,JSON.parse(o.result+"")),n.logger.info("REFRESH"),n.rules=n.rulesService.findAll()})),o.readAsText(e[0])}select(e){this.router.navigate(["rules",e.id])}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.rules=this.rulesService.delete(n.id)},reject:()=>{}})}}return i.\u0275fac=function(e){return new(e||i)(qt(Vd),qt(zh),qt(iv),qt(rA),qt(A4))},i.\u0275cmp=Rr({type:i,selectors:[["app-rule-selector"]],decls:12,vars:7,consts:[["dropZoneDirective","",1,"card",3,"fileDropped"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["position","bottom-center","key","bc"],["position","left-center","key","lc"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["myDataset",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","id"],["field","id"],["pSortableColumn","type"],["field","type"],["pSortableColumn","size"],["field","size"],[3,"value"],["pButton","","pRipple","","pTooltip","Remove this rule","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"],["pButton","","pRipple","","pTooltip","Select this rule","tooltipPosition","top","icon","pi pi-sign-out",3,"click"]],template:function(e,n){1&e&&(Xe(0,"div",0),_n("fileDropped",function(s){return n.onFileDropped(s)}),Xe(1,"p-toolbar",1),ze(2,VAe,0,0,"ng-template",2),ze(3,UAe,0,0,"ng-template",3),Ke(),Kn(4,"p-toast",4)(5,"p-toast",5),Xe(6,"p-table",6,7),ze(8,HAe,6,0,"ng-template",8),ze(9,GAe,14,0,"ng-template",9),ze(10,WAe,16,4,"ng-template",10),Ke()(),Kn(11,"p-confirmPopup")),2&e&&(we(6),de("value",n.rules)("rows",10)("paginator",!0)("globalFilterFields",Oo(6,jAe))("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[l_,hl,G2,W2,j2,$2,x0,ov,LA,hC,X2,Y2,RS]}),i})()},{path:"styles",component:zAe},{path:"converters/images",component:kme},{path:"preferences",component:rve},{path:"about",component:ove}];let qAe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[s_.forRoot($Ae,{useHash:!0}),s_]}),i})();const XAe=function(i){return{"p-hidden":i}};function YAe(i,t){if(1&i&&Kn(0,"li",4),2&i){const e=ye().$implicit;de("ngClass",Li(1,XAe,!1===e.visible))}}function KAe(i,t){if(1&i&&Kn(0,"span",16),2&i){const e=ye(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function ZAe(i,t){if(1&i&&(Xe(0,"span",17),bi(1),Ke()),2&i){const e=ye(3).$implicit;we(1),As(e.label)}}function QAe(i,t){1&i&&Kn(0,"span",18),2&i&&de("innerHTML",ye(3).$implicit.label,Ka)}function JAe(i,t){if(1&i&&(Xe(0,"span",19),bi(1),Ke()),2&i){const e=ye(3).$implicit;de("ngClass",e.badgeStyleClass),we(1),As(e.badge)}}const Z8=function(i,t){return{"pi-angle-down":i,"pi-angle-right":t}};function exe(i,t){if(1&i&&Kn(0,"span",20),2&i){const e=ye(4);de("ngClass",Ts(1,Z8,e.root,!e.root))}}const Q8=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function txe(i,t){if(1&i){const e=Di();Xe(0,"a",10),_n("click",function(r){Lt(e);const s=ye(2).$implicit;return Pt(ye().onItemClick(r,s))})("mouseenter",function(r){Lt(e);const s=ye(2).$implicit;return Pt(ye().onItemMouseEnter(r,s))}),ze(1,KAe,1,2,"span",11),ze(2,ZAe,2,1,"span",12),ze(3,QAe,1,1,"ng-template",null,13,Mc),ze(5,JAe,2,2,"span",14),ze(6,exe,1,4,"span",15),Ke()}if(2&i){const e=Po(4),n=ye(2).$implicit,r=ye();de("target",n.target)("ngClass",Li(14,Q8,n.disabled)),Lr("href",n.url,dh)("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0")("aria-haspopup",null!=r.item.items)("aria-expanded",r.item===r.activeItem),we(1),de("ngIf",n.icon),we(1),de("ngIf",!1!==n.escape)("ngIfElse",e),we(3),de("ngIf",n.badge),we(1),de("ngIf",n.items)}}function nxe(i,t){if(1&i&&Kn(0,"span",16),2&i){const e=ye(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function ixe(i,t){if(1&i&&(Xe(0,"span",17),bi(1),Ke()),2&i){const e=ye(3).$implicit;we(1),As(e.label)}}function rxe(i,t){1&i&&Kn(0,"span",18),2&i&&de("innerHTML",ye(3).$implicit.label,Ka)}function sxe(i,t){if(1&i&&(Xe(0,"span",19),bi(1),Ke()),2&i){const e=ye(3).$implicit;de("ngClass",e.badgeStyleClass),we(1),As(e.badge)}}function oxe(i,t){if(1&i&&Kn(0,"span",20),2&i){const e=ye(4);de("ngClass",Ts(1,Z8,e.root,!e.root))}}const axe=function(){return{exact:!1}};function lxe(i,t){if(1&i){const e=Di();Xe(0,"a",21),_n("click",function(r){Lt(e);const s=ye(2).$implicit;return Pt(ye().onItemClick(r,s))})("mouseenter",function(r){Lt(e);const s=ye(2).$implicit;return Pt(ye().onItemMouseEnter(r,s))}),ze(1,nxe,1,2,"span",11),ze(2,ixe,2,1,"span",12),ze(3,rxe,1,1,"ng-template",null,22,Mc),ze(5,sxe,2,2,"span",14),ze(6,oxe,1,4,"span",15),Ke()}if(2&i){const e=Po(4),n=ye(2).$implicit;de("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||Oo(21,axe))("target",n.target)("ngClass",Li(22,Q8,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),Lr("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),we(1),de("ngIf",n.icon),we(1),de("ngIf",!1!==n.escape)("ngIfElse",e),we(3),de("ngIf",n.badge),we(1),de("ngIf",n.items)}}function cxe(i,t){if(1&i){const e=Di();Xe(0,"p-menubarSub",23),_n("leafClick",function(){return Lt(e),Pt(ye(3).onLeafClick())}),Ke()}if(2&i){const e=ye(2).$implicit,n=ye();de("parentActive",e===n.activeItem)("item",e)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay)}}const uxe=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function dxe(i,t){if(1&i&&(Xe(0,"li",5,6),ze(2,txe,7,16,"a",7),ze(3,lxe,7,24,"a",8),ze(4,cxe,1,4,"p-menubarSub",9),Ke()),2&i){const e=ye().$implicit,n=ye();Yr(e.styleClass),de("ngClass",Ts(8,uxe,e===n.activeItem,!1===e.visible))("ngStyle",e.style)("tooltipOptions",e.tooltipOptions),we(2),de("ngIf",!e.routerLink),we(1),de("ngIf",e.routerLink),we(1),de("ngIf",e.items)}}function hxe(i,t){if(1&i&&(ze(0,YAe,1,3,"li",2),ze(1,dxe,5,11,"li",3)),2&i){const e=t.$implicit;de("ngIf",e.separator),we(1),de("ngIf",!e.separator)}}const fxe=function(i,t){return{"p-submenu-list":i,"p-menubar-root-list":t}},pxe=["menubutton"],gxe=["rootmenu"];function mxe(i,t){1&i&&qi(0)}function vxe(i,t){if(1&i&&(Xe(0,"div",9),ze(1,mxe,1,0,"ng-container",10),Ke()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.startTemplate)}}function yxe(i,t){1&i&&qi(0)}function _xe(i,t){if(1&i&&(Xe(0,"div",11),ze(1,yxe,1,0,"ng-container",10),Ke()),2&i){const e=ye();we(1),de("ngTemplateOutlet",e.endTemplate)}}function bxe(i,t){1&i&&(Xe(0,"div",11),Mu(1),Ke())}const Cxe=function(i){return{"p-menubar p-component":!0,"p-menubar-mobile-active":i}},wxe=["*"];let Axe=(()=>{class i{constructor(e,n,r){this.el=e,this.renderer=n,this.cd=r,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new qn,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(e){this.root||(this._parentActive=e,e||(this.activeItem=null))}onItemClick(e,n){n.disabled?e.preventDefault():(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items&&(this.activeItem&&n===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=n,this.root&&this.bindDocumentClickListener())),n.items||this.onLeafClick())}onItemMouseEnter(e,n){n.disabled||this.mobileActive?e.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=n,this.bindDocumentClickListener()):(this.activeItem=n,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=e=>{this.el&&!this.el.nativeElement.contains(e.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))}unbindDocumentClickListener(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)}ngOnDestroy(){this.unbindDocumentClickListener()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(h),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(e,n){1&e&&(Xe(0,"ul",0),ze(1,hxe,2,2,"ng-template",1),Ke()),2&e&&(de("ngClass",Ts(3,fxe,!n.root,n.root)),Lr("role",n.root?"menubar":"menu"),we(1),de("ngForOf",n.root?n.item:n.item.items))},dependencies:[Mo,mu,Fo,ea,rC,$D,Ju,ov,i],encapsulation:2}),i})(),xxe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.cd=r,this.config=s,this.autoZIndex=!0,this.baseZIndex=0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template}})}toggle(e){this.mobileActive?(this.hide(),ic.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,ic.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),e.preventDefault()}bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.mobileActive&&this.rootmenu.el.nativeElement!==e.target&&!this.rootmenu.el.nativeElement.contains(e.target)&&this.menubutton.nativeElement!==e.target&&!this.menubutton.nativeElement.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))}hide(){this.mobileActive=!1,this.cd.markForCheck(),ic.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}ngOnDestroy(){this.unbindOutsideClickListener()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(h),qt(Yo),qt(Np))},i.\u0275cmp=Rr({type:i,selectors:[["p-menubar"]],contentQueries:function(e,n,r){if(1&e&&dl(r,hl,4),2&e){let s;tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(pxe,5),Hr(gxe,5)),2&e){let r;tr(r=nr())&&(n.menubutton=r.first),tr(r=nr())&&(n.rootmenu=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay"},ngContentSelectors:wxe,decls:10,vars:14,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],[1,"p-menubar-end"]],template:function(e,n){if(1&e&&(Xf(),Xe(0,"div",0),ze(1,vxe,2,1,"div",1),Xe(2,"a",2,3),_n("click",function(s){return n.toggle(s)}),Kn(4,"i",4),Ke(),Xe(5,"p-menubarSub",5,6),_n("leafClick",function(){return n.onLeafClick()}),Ke(),ze(7,_xe,2,1,"div",7),ze(8,bxe,2,0,"ng-template",null,8,Mc),Ke()),2&e){const r=Po(9);Yr(n.styleClass),de("ngClass",Li(12,Cxe,n.mobileActive))("ngStyle",n.style),we(1),de("ngIf",n.startTemplate),we(4),de("item",n.model)("baseZIndex",n.baseZIndex)("autoZIndex",n.autoZIndex)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay),we(2),de("ngIf",n.endTemplate)("ngIfElse",r)}},dependencies:[Mo,Fo,El,ea,Axe],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:1}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),i})(),Ixe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,s_,yu,av,Za,s_,av,Za]}),i})();function Sxe(i,t){1&i&&Kn(0,"img",2)}let Exe=(()=>{class i{constructor(e,n){this.title=e,this.store=n,this.items=[],this.subscriptions=[],this.title.setTitle("MySystem 1.2.1")}ngOnInit(){this.items=[{label:"Graph",icon:"pi pi-fw pi-box",items:[{label:"Graph(s)",icon:"pi pi-fw pi-book",routerLink:"/graphs"}]},{label:"Rule",icon:"pi pi-fw pi-box",items:[{label:"Rule(s)",icon:"pi pi-fw pi-book",routerLink:"/rules"}]},{label:"Style",icon:"pi pi-fw pi-box",items:[{label:"Style(s)",icon:"pi pi-fw pi-book",routerLink:"/styles"}]},{label:"Misc",icon:"pi pi-fw pi-cog",items:[{label:"Preferences",icon:"pi pi-fw pi-database",routerLink:"/preferences"},{label:"Images",icon:"pi pi-fw pi-cloud-upload",routerLink:"/converters/images"},{label:"About",icon:"pi pi-fw pi-at",routerLink:"/about"}]}]}ngOnDestroy(){this.subscriptions&&pr.each(this.subscriptions,e=>{e.unsubscribe()})}}return i.\u0275fac=function(e){return new(e||i)(qt(aD),qt(ny))},i.\u0275cmp=Rr({type:i,selectors:[["app-root"]],decls:3,vars:1,consts:[[3,"model"],["pTemplate","start"],["src","assets/favicon.png","height","40",1,"mr-2"]],template:function(e,n){1&e&&(Xe(0,"p-menubar",0),ze(1,Sxe,1,0,"ng-template",1),Ke(),Kn(2,"router-outlet")),2&e&&de("model",n.items)},dependencies:[kD,hl,xxe]}),i})();function J8(i){return new Ei(3e3,!1)}function lIe(){return typeof window<"u"&&typeof window.document<"u"}function yR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function P_(i){switch(i.length){case 0:return new IA;case 1:return i[0];default:return new $V(i)}}function e6(i,t,e,n,r=new Map,s=new Map){const o=[],l=[];let u=-1,p=null;if(n.forEach(v=>{const w=v.get("offset"),I=w==u,T=I&&p||new Map;v.forEach((k,H)=>{let X=H,ue=k;if("offset"!==H)switch(X=t.normalizePropertyName(X,o),ue){case"!":ue=r.get(H);break;case ly:ue=s.get(H);break;default:ue=t.normalizeStyleValue(H,X,ue,o)}T.set(X,ue)}),I||l.push(T),p=T,u=w}),o.length)throw function Kxe(i){return new Ei(3502,!1)}();return l}function _R(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&bR(e,"start",i)));break;case"done":i.onDone(()=>n(e&&bR(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&bR(e,"destroy",i)))}}function bR(i,t,e){const s=CR(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function CR(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Wp(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function t6(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let wR=(i,t)=>!1,n6=(i,t,e)=>[],r6=null;function AR(i){const t=i.parentNode||i.host;return t===r6?null:t}(yR()||typeof Element<"u")&&(lIe()?(r6=(()=>document.documentElement)(),wR=(i,t)=>{for(;t;){if(t===i)return!0;t=AR(t)}return!1}):wR=(i,t)=>i.contains(t),n6=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let ab=null,s6=!1;const o6=wR,a6=n6;let l6=(()=>{class i{validateStyleProperty(e){return function uIe(i){ab||(ab=function dIe(){return typeof document<"u"?document.body:null}()||{},s6=!!ab.style&&"WebkitAppearance"in ab.style);let t=!0;return ab.style&&!function cIe(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in ab.style,!t&&s6&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in ab.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return o6(e,n)}getParentElement(e){return AR(e)}query(e,n,r){return a6(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,l=[],u){return new IA(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})(),xR=(()=>{class i{}return i.NOOP=new l6,i})();const IR="ng-enter",XE="ng-leave",YE="ng-trigger",KE=".ng-trigger",u6="ng-animating",SR=".ng-animating";function R_(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:ER(parseFloat(t[1]),t[2])}function ER(i,t){return"s"===t?1e3*i:i}function ZE(i,t,e){return i.hasOwnProperty("duration")?i:function pIe(i,t,e){let r,s=0,o="";if("string"==typeof i){const l=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return t.push(J8()),{duration:0,delay:0,easing:""};r=ER(parseFloat(l[1]),l[2]);const u=l[3];null!=u&&(s=ER(parseFloat(u),l[4]));const p=l[5];p&&(o=p)}else r=i;if(!e){let l=!1,u=t.length;r<0&&(t.push(function Txe(){return new Ei(3100,!1)}()),l=!0),s<0&&(t.push(function Mxe(){return new Ei(3101,!1)}()),l=!0),l&&t.splice(u,0,J8())}return{duration:r,delay:s,easing:o}}(i,t,e)}function Mx(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function d6(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function k_(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function f6(i,t,e){return e?t+":"+e+";":""}function p6(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=f6(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=f6(0,yIe(e),i.style[e]));i.setAttribute("style",t)}function vv(i,t,e){i.style&&(t.forEach((n,r)=>{const s=MR(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),yR()&&p6(i))}function lb(i,t){i.style&&(t.forEach((e,n)=>{const r=MR(n);i.style[r]=""}),yR()&&p6(i))}function Dx(i){return Array.isArray(i)?1==i.length?i[0]:GV(i):i}const TR=new RegExp("{{\\s*(.+?)\\s*}}","g");function g6(i){let t=[];if("string"==typeof i){let e;for(;e=TR.exec(i);)t.push(e[1]);TR.lastIndex=0}return t}function QE(i,t,e){const n=i.toString(),r=n.replace(TR,(s,o)=>{let l=t[o];return null==l&&(e.push(function Lxe(i){return new Ei(3003,!1)}()),l=""),l.toString()});return r==n?i:r}function JE(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const vIe=/-+([a-z0-9])/g;function MR(i){return i.replace(vIe,(...t)=>t[1].toUpperCase())}function yIe(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jp(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function Pxe(i){return new Ei(3004,!1)}()}}function m6(i,t){return window.getComputedStyle(i)[t]}function xIe(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function IIe(i,t,e){if(":"==i[0]){const u=function SIe(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function $xe(i){return new Ei(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof u)return void t.push(u);i=u}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function jxe(i){return new Ei(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push(v6(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(v6(o,r))}(n,e,t)):e.push(i),e}const iT=new Set(["true","1"]),rT=new Set(["false","0"]);function v6(i,t){const e=iT.has(i)||rT.has(i),n=iT.has(t)||rT.has(t);return(r,s)=>{let o="*"==i||i==r,l="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?iT.has(i):rT.has(i)),!l&&n&&"boolean"==typeof s&&(l=s?iT.has(t):rT.has(t)),o&&l}}const EIe=new RegExp("s*:selfs*,?","g");function DR(i,t,e,n){return new TIe(i).build(t,e,n)}class TIe{constructor(t){this._driver=t}build(t,e,n){const r=new LIe(e);return this._resetContextStyleTimingState(r),jp(this,Dx(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function kxe(){return new Ei(3006,!1)}()),t.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),0==l.type){const u=l,p=u.name;p.toString().split(/\s*,\s*/).forEach(v=>{u.name=v,s.push(this.visitState(u,e))}),u.name=p}else if(1==l.type){const u=this.visitTransition(l,e);n+=u.queryCount,r+=u.depCount,o.push(u)}else e.errors.push(function Oxe(){return new Ei(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{g6(u).forEach(p=>{o.hasOwnProperty(p)||s.add(p)})})}),s.size&&(JE(s.values()),e.errors.push(function Fxe(i,t){return new Ei(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=jp(this,Dx(t.animation),e);return{type:1,matchers:xIe(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:cb(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>jp(this,n,e)),options:cb(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const l=jp(this,o,e);return r=Math.max(r,e.currentTime),l});return e.currentTime=r,{type:3,steps:s,options:cb(t.options)}}visitAnimate(t,e){const n=function RIe(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return LR(ZE(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=LR(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=ZE(e,t);return LR(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:Tl({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,l=!1;if(!o){l=!0;const p={};n.easing&&(p.easing=n.easing),o=Tl(p)}e.currentTime+=n.duration+n.delay;const u=this.visitStyle(o,e);u.isEmptyStep=l,r=u}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let l of r)"string"==typeof l?l===ly?n.push(l):e.errors.push(new Ei(3002,!1)):n.push(d6(l));let s=!1,o=null;return n.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(o=l.get("easing"),l.delete("easing")),!s))for(let u of l.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,u)=>{const p=e.collectedStyles.get(e.currentQuerySelector),v=p.get(u);let w=!0;v&&(s!=r&&s>=v.startTime&&r<=v.endTime&&(e.errors.push(function Bxe(i,t,e,n,r){return new Ei(3010,!1)}()),w=!1),s=v.startTime),w&&p.set(u,{startTime:s,endTime:r}),e.options&&function mIe(i,t,e){const n=t.params||{},r=g6(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function Dxe(i){return new Ei(3001,!1)}())})}(l,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function zxe(){return new Ei(3011,!1)}()),n;let s=0;const o=[];let l=!1,u=!1,p=0;const v=t.steps.map(ue=>{const xe=this._makeStyleAst(ue,e);let be=null!=xe.offset?xe.offset:function PIe(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(xe.styles),Se=0;return null!=be&&(s++,Se=xe.offset=be),u=u||Se<0||Se>1,l=l||Se<p,p=Se,o.push(Se),xe});u&&e.errors.push(function Vxe(){return new Ei(3012,!1)}()),l&&e.errors.push(function Uxe(){return new Ei(3200,!1)}());const w=t.steps.length;let I=0;s>0&&s<w?e.errors.push(function Hxe(){return new Ei(3202,!1)}()):0==s&&(I=1/(w-1));const T=w-1,k=e.currentTime,H=e.currentAnimateTimings,X=H.duration;return v.forEach((ue,xe)=>{const be=I>0?xe==T?1:I*xe:o[xe],Se=be*X;e.currentTime=k+H.delay+Se,H.duration=Se,this._validateStyleAst(ue,e),ue.offset=be,n.styles.push(ue)}),n}visitReference(t,e){return{type:8,animation:jp(this,Dx(t.animation),e),options:cb(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:cb(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:cb(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function MIe(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(EIe,"")),i=i.replace(/@\*/g,KE).replace(/@\w+/g,e=>KE+"-"+e.slice(1)).replace(/:animating/g,SR),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Wp(e.collectedStyles,e.currentQuerySelector,new Map);const l=jp(this,Dx(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:l,originalSelector:t.selector,options:cb(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Gxe(){return new Ei(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:ZE(t.timings,e.errors,!0);return{type:12,animation:jp(this,Dx(t.animation),e),timings:n,options:null}}}class LIe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function cb(i){return i?(i=Mx(i)).params&&(i.params=function DIe(i){return i?Mx(i):null}(i.params)):i={},i}function LR(i,t,e){return{duration:i,delay:t,easing:e}}function PR(i,t,e,n,r,s,o=null,l=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:l}}class sT{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const FIe=new RegExp(":enter","g"),BIe=new RegExp(":leave","g");function RR(i,t,e,n,r,s=new Map,o=new Map,l,u,p=[]){return(new zIe).buildKeyframes(i,t,e,n,r,s,o,l,u,p)}class zIe{buildKeyframes(t,e,n,r,s,o,l,u,p,v=[]){p=p||new sT;const w=new kR(t,e,p,r,s,v,[]);w.options=u;const I=u.delay?R_(u.delay):0;w.currentTimeline.delayNextStep(I),w.currentTimeline.setStyles([o],null,w.errors,u),jp(this,n,w);const T=w.timelines.filter(k=>k.containsAnimation());if(T.length&&l.size){let k;for(let H=T.length-1;H>=0;H--){const X=T[H];if(X.element===e){k=X;break}}k&&!k.allowOnlyTimelineStyles()&&k.setStyles([l],null,w.errors,u)}return T.length?T.map(k=>k.buildKeyframes()):[PR(e,[],[],[],0,I,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?R_(n.duration):null,l=null!=n.delay?R_(n.delay):null;return 0!==o&&t.forEach(u=>{const p=e.appendInstructionToTimeline(u,o,l);s=Math.max(s,p.duration+p.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),jp(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=oT);const o=R_(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>jp(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?R_(t.options.delay):0;t.steps.forEach(o=>{const l=e.createSubContext(t.options);s&&l.delayNextStep(s),jp(this,o,l),r=Math.max(r,l.currentTimeline.currentTime),n.push(l.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return ZE(e.params?QE(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,l=e.createSubContext().currentTimeline;l.easing=n.easing,t.styles.forEach(u=>{l.forwardTime((u.offset||0)*s),l.setStyles(u.styles,u.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?R_(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=oT);let o=n;const l=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=l.length;let u=null;l.forEach((p,v)=>{e.currentQueryIndex=v;const w=e.createSubContext(t.options,p);s&&w.delayNextStep(s),p===e.element&&(u=w.currentTimeline),jp(this,t.animation,w),w.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,w.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),l=o*(e.currentQueryTotal-1);let u=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=l-u;break;case"full":u=n.currentStaggerTime}const v=e.currentTimeline;u&&v.delayNextStep(u);const w=v.currentTime;jp(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-w+(r.startTime-n.currentTimeline.startTime)}}const oT={};class kR{constructor(t,e,n,r,s,o,l,u){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=oT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new aT(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=R_(n.duration)),null!=n.delay&&(r.delay=R_(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(l=>{(!e||!o.hasOwnProperty(l))&&(o[l]=QE(s[l],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new kR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=oT,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new VIe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let l=[];if(r&&l.push(this.element),t.length>0){t=(t=t.replace(FIe,"."+this._enterClassName)).replace(BIe,"."+this._leaveClassName);let p=this._driver.query(this.element,t,1!=n);0!==n&&(p=n<0?p.slice(p.length+n,p.length):p.slice(0,n)),l.push(...p)}return!s&&0==l.length&&o.push(function Wxe(i){return new Ei(3014,!1)}()),l}}class aT{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new aT(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||ly),this._currentKeyframe.set(e,ly);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function UIe(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,ly)}else k_(r,e)}),e}(t,this._globalTimelineStyles);for(let[l,u]of o){const p=QE(u,s,n);this._pendingStyles.set(l,p),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??ly),this._updateStyle(l,p)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((l,u)=>{const p=k_(l,new Map,this._backFill);p.forEach((v,w)=>{"!"===v?t.add(w):v===ly&&e.add(w)}),n||p.set("offset",u/this.duration),r.push(p)});const s=t.size?JE(t.values()):[],o=e.size?JE(e.values()):[];if(n){const l=r[0],u=new Map(l);l.set("offset",0),u.set("offset",1),r=[l,u]}return PR(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class VIe extends aT{constructor(t,e,n,r,s,o,l=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,l=e/o,u=k_(t[0]);u.set("offset",0),s.push(u);const p=k_(t[0]);p.set("offset",b6(l)),s.push(p);const v=t.length-1;for(let w=1;w<=v;w++){let I=k_(t[w]);const T=I.get("offset");I.set("offset",b6((e+T*n)/o)),s.push(I)}n=o,e=0,r="",t=s}return PR(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function b6(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class OR{}const HIe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class GIe extends OR{normalizePropertyName(t,e){return MR(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(HIe.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const l=n.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&r.push(function Rxe(i,t){return new Ei(3005,!1)}())}return o+s}}function C6(i,t,e,n,r,s,o,l,u,p,v,w,I){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:l,queriedElements:u,preStyleProps:p,postStyleProps:v,totalTime:w,errors:I}}const FR={};class w6{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function WIe(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,l,u,p,v){const w=[],I=this.ast.options&&this.ast.options.params||FR,k=this.buildStyles(n,l&&l.params||FR,w),H=u&&u.params||FR,X=this.buildStyles(r,H,w),ue=new Set,xe=new Map,be=new Map,Se="void"===r,Ye={params:jIe(H,I),delay:this.ast.options?.delay},gt=v?[]:RR(t,e,this.ast.animation,s,o,k,X,Ye,p,w);let zt=0;if(gt.forEach(Tt=>{zt=Math.max(Tt.duration+Tt.delay,zt)}),w.length)return C6(e,this._triggerName,n,r,Se,k,X,[],[],xe,be,zt,w);gt.forEach(Tt=>{const un=Tt.element,ei=Wp(xe,un,new Set);Tt.preStyleProps.forEach(ni=>ei.add(ni));const fi=Wp(be,un,new Set);Tt.postStyleProps.forEach(ni=>fi.add(ni)),un!==e&&ue.add(un)});const it=JE(ue.values());return C6(e,this._triggerName,n,r,Se,k,X,gt,it,xe,be,zt)}}function jIe(i,t){const e=Mx(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class $Ie{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=Mx(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,l)=>{o&&(o=QE(o,r,e));const u=this.normalizer.normalizePropertyName(l,e);o=this.normalizer.normalizeStyleValue(l,u,o,e),n.set(u,o)})}),n}}class XIe{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new $Ie(r.style,r.options&&r.options.params||{},n))}),A6(this.states,"true","1"),A6(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new w6(t,r,this.states))}),this.fallbackTransition=function YIe(i,t,e){return new w6(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,l)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function A6(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const KIe=new sT;class ZIe{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],s=DR(this._driver,e,n,[]);if(n.length)throw function Zxe(i){return new Ei(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=e6(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const l=new Map;if(s?(o=RR(this._driver,e,s,IR,XE,new Map,new Map,n,KIe,r),o.forEach(v=>{const w=Wp(l,v.element,new Map);v.postStyleProps.forEach(I=>w.set(I,null))})):(r.push(function Qxe(){return new Ei(3300,!1)}()),o=[]),r.length)throw function Jxe(i){return new Ei(3504,!1)}();l.forEach((v,w)=>{v.forEach((I,T)=>{v.set(T,this._driver.computeStyle(w,T,ly))})});const p=P_(o.map(v=>{const w=l.get(v.element);return this._buildPlayer(v,new Map,w)}));return this._playersById.set(t,p),p.onDestroy(()=>this.destroy(t)),this.players.push(p),p}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function eIe(i){return new Ei(3301,!1)}();return e}listen(t,e,n,r){const s=CR(e,"","","");return _R(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const x6="ng-animate-queued",NR="ng-animate-disabled",n1e=[],I6={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},i1e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Lg="__ng_removed";class BR{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function a1e(i){return i??null}(n?t.value:t),n){const s=Mx(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Lx="void",zR=new BR(Lx);class r1e{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Pg(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function tIe(i,t){return new Ei(3302,!1)}();if(null==n||0==n.length)throw function nIe(i){return new Ei(3303,!1)}();if(!function l1e(i){return"start"==i||"done"==i}(n))throw function iIe(i,t){return new Ei(3400,!1)}();const s=Wp(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const l=Wp(this._engine.statesByElement,t,new Map);return l.has(e)||(Pg(t,YE),Pg(t,YE+"-"+e),l.set(e,zR)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(e)||l.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function rIe(i){return new Ei(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new VR(this.id,e,t);let l=this._engine.statesByElement.get(t);l||(Pg(t,YE),Pg(t,YE+"-"+e),this._engine.statesByElement.set(t,l=new Map));let u=l.get(e);const p=new BR(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&p.absorbOptions(u.options),l.set(e,p),u||(u=zR),p.value!==Lx&&u.value===p.value){if(!function d1e(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(u.params,p.params)){const H=[],X=s.matchStyles(u.value,u.params,H),ue=s.matchStyles(p.value,p.params,H);H.length?this._engine.reportError(H):this._engine.afterFlush(()=>{lb(t,X),vv(t,ue)})}return}const I=Wp(this._engine.playersByElement,t,[]);I.forEach(H=>{H.namespaceId==this.id&&H.triggerName==e&&H.queued&&H.destroy()});let T=s.matchTransition(u.value,p.value,t,p.params),k=!1;if(!T){if(!r)return;T=s.fallbackTransition,k=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:T,fromState:u,toState:p,player:o,isFallbackTransition:k}),k||(Pg(t,x6),o.onStart(()=>{sw(t,x6)})),o.onDone(()=>{let H=this.players.indexOf(o);H>=0&&this.players.splice(H,1);const X=this._engine.playersByElement.get(t);if(X){let ue=X.indexOf(o);ue>=0&&X.splice(ue,1)}}),this.players.push(o),I.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,KE,!0);n.forEach(r=>{if(r[Lg])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const l=[];if(s.forEach((u,p)=>{if(o.set(p,u.value),this._triggers.has(p)){const v=this.trigger(t,p,Lx,r);v&&l.push(v)}}),l.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&P_(l).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const u=this._triggers.get(o).fallbackTransition,p=n.get(o)||zR,v=new BR(Lx),w=new VR(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:u,fromState:p,toState:v,player:w,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Lg];(!s||s===I6)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Pg(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(l=>{if(l.name==n.triggerName){const u=CR(s,n.triggerName,n.fromState.value,n.toState.value);u._data=t,_R(n.player,l.phase,u,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class s1e{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new r1e(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,l=this.driver.getParentElement(e);for(;l;){const u=r.get(l);if(u){const p=n.indexOf(u);n.splice(p+1,0,t),o=!0;break}l=this.driver.getParentElement(l)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(lT(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!lT(e))return;const s=e[Lg];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Pg(t,NR)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),sw(t,NR))}removeNode(t,e,n,r){if(lT(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Lg]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return lT(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,KE,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,SR,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return P_(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Lg];if(e&&e.setForRemoval){if(t[Lg]=I6,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(NR)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Pg(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?P_(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function sIe(i){return new Ei(3402,!1)}()}_flushAnimations(t,e){const n=new sT,r=[],s=new Map,o=[],l=new Map,u=new Map,p=new Map,v=new Set;this.disabledNodes.forEach(Rn=>{v.add(Rn);const ti=this.driver.query(Rn,".ng-animate-queued",!0);for(let Yn=0;Yn<ti.length;Yn++)v.add(ti[Yn])});const w=this.bodyNode,I=Array.from(this.statesByElement.keys()),T=T6(I,this.collectedEnterElements),k=new Map;let H=0;T.forEach((Rn,ti)=>{const Yn=IR+H++;k.set(ti,Yn),Rn.forEach(kn=>Pg(kn,Yn))});const X=[],ue=new Set,xe=new Set;for(let Rn=0;Rn<this.collectedLeaveElements.length;Rn++){const ti=this.collectedLeaveElements[Rn],Yn=ti[Lg];Yn&&Yn.setForRemoval&&(X.push(ti),ue.add(ti),Yn.hasAnimation?this.driver.query(ti,".ng-star-inserted",!0).forEach(kn=>ue.add(kn)):xe.add(ti))}const be=new Map,Se=T6(I,Array.from(ue));Se.forEach((Rn,ti)=>{const Yn=XE+H++;be.set(ti,Yn),Rn.forEach(kn=>Pg(kn,Yn))}),t.push(()=>{T.forEach((Rn,ti)=>{const Yn=k.get(ti);Rn.forEach(kn=>sw(kn,Yn))}),Se.forEach((Rn,ti)=>{const Yn=be.get(ti);Rn.forEach(kn=>sw(kn,Yn))}),X.forEach(Rn=>{this.processLeaveNode(Rn)})});const Ye=[],gt=[];for(let Rn=this._namespaceList.length-1;Rn>=0;Rn--)this._namespaceList[Rn].drainQueuedTransitions(e).forEach(Yn=>{const kn=Yn.player,Qn=Yn.element;if(Ye.push(kn),this.collectedEnterElements.length){const Gs=Qn[Lg];if(Gs&&Gs.setForMove){if(Gs.previousTriggersValues&&Gs.previousTriggersValues.has(Yn.triggerName)){const ks=Gs.previousTriggersValues.get(Yn.triggerName),Os=this.statesByElement.get(Yn.element);if(Os&&Os.has(Yn.triggerName)){const $r=Os.get(Yn.triggerName);$r.value=ks,Os.set(Yn.triggerName,$r)}}return void kn.destroy()}}const or=!w||!this.driver.containsElement(w,Qn),Bi=be.get(Qn),yr=k.get(Qn),Sr=this._buildInstruction(Yn,n,yr,Bi,or);if(Sr.errors&&Sr.errors.length)return void gt.push(Sr);if(or)return kn.onStart(()=>lb(Qn,Sr.fromStyles)),kn.onDestroy(()=>vv(Qn,Sr.toStyles)),void r.push(kn);if(Yn.isFallbackTransition)return kn.onStart(()=>lb(Qn,Sr.fromStyles)),kn.onDestroy(()=>vv(Qn,Sr.toStyles)),void r.push(kn);const Ys=[];Sr.timelines.forEach(Gs=>{Gs.stretchStartingKeyframe=!0,this.disabledNodes.has(Gs.element)||Ys.push(Gs)}),Sr.timelines=Ys,n.append(Qn,Sr.timelines),o.push({instruction:Sr,player:kn,element:Qn}),Sr.queriedElements.forEach(Gs=>Wp(l,Gs,[]).push(kn)),Sr.preStyleProps.forEach((Gs,ks)=>{if(Gs.size){let Os=u.get(ks);Os||u.set(ks,Os=new Set),Gs.forEach(($r,Ko)=>Os.add(Ko))}}),Sr.postStyleProps.forEach((Gs,ks)=>{let Os=p.get(ks);Os||p.set(ks,Os=new Set),Gs.forEach(($r,Ko)=>Os.add(Ko))})});if(gt.length){const Rn=[];gt.forEach(ti=>{Rn.push(function oIe(i,t){return new Ei(3505,!1)}())}),Ye.forEach(ti=>ti.destroy()),this.reportError(Rn)}const zt=new Map,it=new Map;o.forEach(Rn=>{const ti=Rn.element;n.has(ti)&&(it.set(ti,ti),this._beforeAnimationBuild(Rn.player.namespaceId,Rn.instruction,zt))}),r.forEach(Rn=>{const ti=Rn.element;this._getPreviousPlayers(ti,!1,Rn.namespaceId,Rn.triggerName,null).forEach(kn=>{Wp(zt,ti,[]).push(kn),kn.destroy()})});const Tt=X.filter(Rn=>D6(Rn,u,p)),un=new Map;E6(un,this.driver,xe,p,ly).forEach(Rn=>{D6(Rn,u,p)&&Tt.push(Rn)});const fi=new Map;T.forEach((Rn,ti)=>{E6(fi,this.driver,new Set(Rn),u,"!")}),Tt.forEach(Rn=>{const ti=un.get(Rn),Yn=fi.get(Rn);un.set(Rn,new Map([...Array.from(ti?.entries()??[]),...Array.from(Yn?.entries()??[])]))});const ni=[],Bn=[],Zn={};o.forEach(Rn=>{const{element:ti,player:Yn,instruction:kn}=Rn;if(n.has(ti)){if(v.has(ti))return Yn.onDestroy(()=>vv(ti,kn.toStyles)),Yn.disabled=!0,Yn.overrideTotalTime(kn.totalTime),void r.push(Yn);let Qn=Zn;if(it.size>1){let Bi=ti;const yr=[];for(;Bi=Bi.parentNode;){const Sr=it.get(Bi);if(Sr){Qn=Sr;break}yr.push(Bi)}yr.forEach(Sr=>it.set(Sr,Qn))}const or=this._buildAnimation(Yn.namespaceId,kn,zt,s,fi,un);if(Yn.setRealPlayer(or),Qn===Zn)ni.push(Yn);else{const Bi=this.playersByElement.get(Qn);Bi&&Bi.length&&(Yn.parentPlayer=P_(Bi)),r.push(Yn)}}else lb(ti,kn.fromStyles),Yn.onDestroy(()=>vv(ti,kn.toStyles)),Bn.push(Yn),v.has(ti)&&r.push(Yn)}),Bn.forEach(Rn=>{const ti=s.get(Rn.element);if(ti&&ti.length){const Yn=P_(ti);Rn.setRealPlayer(Yn)}}),r.forEach(Rn=>{Rn.parentPlayer?Rn.syncPlayerEvents(Rn.parentPlayer):Rn.destroy()});for(let Rn=0;Rn<X.length;Rn++){const ti=X[Rn],Yn=ti[Lg];if(sw(ti,XE),Yn&&Yn.hasAnimation)continue;let kn=[];if(l.size){let or=l.get(ti);or&&or.length&&kn.push(...or);let Bi=this.driver.query(ti,SR,!0);for(let yr=0;yr<Bi.length;yr++){let Sr=l.get(Bi[yr]);Sr&&Sr.length&&kn.push(...Sr)}}const Qn=kn.filter(or=>!or.destroyed);Qn.length?c1e(this,ti,Qn):this.processLeaveNode(ti)}return X.length=0,ni.forEach(Rn=>{this.players.push(Rn),Rn.onDone(()=>{Rn.destroy();const ti=this.players.indexOf(Rn);this.players.splice(ti,1)}),Rn.play()}),ni}elementContainsData(t,e){let n=!1;const r=e[Lg];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const l=this.playersByQueriedElement.get(t);l&&(o=l)}else{const l=this.playersByElement.get(t);if(l){const u=!s||s==Lx;l.forEach(p=>{p.queued||!u&&p.triggerName!=r||o.push(p)})}}return(n||r)&&(o=o.filter(l=>!(n&&n!=l.namespaceId||r&&r!=l.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,l=e.isRemovalTransition?void 0:e.triggerName;for(const u of e.timelines){const p=u.element,v=p!==s,w=Wp(n,p,[]);this._getPreviousPlayers(p,v,o,l,e.toState).forEach(T=>{const k=T.getRealPlayer();k.beforeDestroy&&k.beforeDestroy(),T.destroy(),w.push(T)})}lb(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const l=e.triggerName,u=e.element,p=[],v=new Set,w=new Set,I=e.timelines.map(k=>{const H=k.element;v.add(H);const X=H[Lg];if(X&&X.removedBeforeQueried)return new IA(k.duration,k.delay);const ue=H!==u,xe=function u1e(i){const t=[];return M6(i,t),t}((n.get(H)||n1e).map(zt=>zt.getRealPlayer())).filter(zt=>!!zt.element&&zt.element===H),be=s.get(H),Se=o.get(H),Ye=e6(0,this._normalizer,0,k.keyframes,be,Se),gt=this._buildPlayer(k,Ye,xe);if(k.subTimeline&&r&&w.add(H),ue){const zt=new VR(t,l,H);zt.setRealPlayer(gt),p.push(zt)}return gt});p.forEach(k=>{Wp(this.playersByQueriedElement,k.element,[]).push(k),k.onDone(()=>function o1e(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,k.element,k))}),v.forEach(k=>Pg(k,u6));const T=P_(I);return T.onDestroy(()=>{v.forEach(k=>sw(k,u6)),vv(u,e.toStyles)}),w.forEach(k=>{Wp(r,k,[]).push(T)}),T}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new IA(t.duration,t.delay)}}class VR{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new IA,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>_R(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Wp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function lT(i){return i&&1===i.nodeType}function S6(i,t){const e=i.style.display;return i.style.display=t??"none",e}function E6(i,t,e,n,r){const s=[];e.forEach(u=>s.push(S6(u)));const o=[];n.forEach((u,p)=>{const v=new Map;u.forEach(w=>{const I=t.computeStyle(p,w,r);v.set(w,I),(!I||0==I.length)&&(p[Lg]=i1e,o.push(p))}),i.set(p,v)});let l=0;return e.forEach(u=>S6(u,s[l++])),o}function T6(i,t){const e=new Map;if(i.forEach(l=>e.set(l,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(l){if(!l)return 1;let u=s.get(l);if(u)return u;const p=l.parentNode;return u=e.has(p)?p:r.has(p)?1:o(p),s.set(l,u),u}return t.forEach(l=>{const u=o(l);1!==u&&e.get(u).push(l)}),e}function Pg(i,t){i.classList?.add(t)}function sw(i,t){i.classList?.remove(t)}function c1e(i,t,e){P_(e).onDone(()=>i.processLeaveNode(t))}function M6(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof $V?M6(n.players,t):t.push(n)}}function D6(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class cT{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new s1e(t,e,n),this._timelineEngine=new ZIe(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let l=this._triggerCache[o];if(!l){const u=[],v=DR(this._driver,s,u,[]);if(u.length)throw function Yxe(i,t){return new Ei(3404,!1)}();l=function qIe(i,t,e){return new XIe(i,t,e)}(r,v,this._normalizer),this._triggerCache[o]=l}this._transitionEngine.registerTrigger(e,r,l)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=t6(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,l]=t6(n);return this._timelineEngine.listen(o,e,l,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let f1e=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&vv(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(vv(this._element,this._initialStyles),this._endStyles&&(vv(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(lb(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lb(this._element,this._endStyles),this._endStyles=null),vv(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function UR(i){let t=null;return i.forEach((e,n)=>{(function p1e(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class L6{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:m6(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class g1e{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return o6(t,e)}getParentElement(t){return AR(t)}query(t,e,n){return a6(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const u={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const p=new Map,v=o.filter(T=>T instanceof L6);(function _Ie(i,t){return 0===i||0===t})(n,r)&&v.forEach(T=>{T.currentSnapshot.forEach((k,H)=>p.set(H,k))});let w=function gIe(i){return i.length?i[0]instanceof Map?i:i.map(t=>d6(t)):[]}(e).map(T=>k_(T));w=function bIe(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(l=>o.set(l,m6(i,l)))}}return t}(t,w,p);const I=function h1e(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=UR(t[0]),t.length>1&&(n=UR(t[t.length-1]))):t instanceof Map&&(e=UR(t)),e||n?new f1e(i,e,n):null}(t,w);return new L6(t,w,u,I)}}let m1e=(()=>{class i extends HV{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:nl.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?GV(e):e;return P6(this._renderer,null,n,"register",[r]),new v1e(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(ai(c),ai(vd))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();class v1e extends class DJ{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new y1e(this._id,t,e||{},this._renderer)}}class y1e{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return P6(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function P6(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const R6="@.disabled";let _1e=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const l=o?.parentNode(s);l&&o.removeChild(l,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let v=this._rendererCache.get(s);return v||(v=new k6("",s,this.engine),this._rendererCache.set(s,v)),v}const o=n.id,l=n.id+"-"+this._currentId;this._currentId++,this.engine.register(l,e);const u=v=>{Array.isArray(v)?v.forEach(u):this.engine.registerTrigger(o,l,e,v.name,v)};return n.data.animation.forEach(u),new b1e(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,l]=s;o(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(ai(c),ai(cT),ai(ua))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})();class k6{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==R6?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class b1e extends k6{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==R6?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function C1e(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function w1e(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,l=>{this.factory.scheduleListenerCallback(l._data||-1,n,l)})}return this.delegate.listen(t,e,n)}}const O6=[{provide:HV,useClass:m1e},{provide:OR,useFactory:function x1e(){return new GIe}},{provide:cT,useClass:(()=>{class i extends cT{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(ai(vd),ai(xR),ai(OR),ai(Uw))},i.\u0275prov=cr({token:i,factory:i.\u0275fac}),i})()},{provide:c,useFactory:function I1e(i,t,e){return new _1e(i,t,e)},deps:[QI,cT,ua]}],HR=[{provide:xR,useFactory:()=>new g1e},{provide:jF,useValue:"BrowserAnimations"},...O6],F6=[{provide:xR,useClass:l6},{provide:jF,useValue:"NoopAnimations"},...O6];let S1e=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?F6:HR}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({providers:HR,imports:[a3]}),i})();const E1e=["sliderHandle"],T1e=["sliderHandleStart"],M1e=["sliderHandleEnd"],D1e=function(i,t){return{left:i,width:t}};function L1e(i,t){if(1&i&&Kn(0,"span",4),2&i){const e=ye();de("ngStyle",Ts(1,D1e,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const P1e=function(i,t){return{bottom:i,height:t}};function R1e(i,t){if(1&i&&Kn(0,"span",4),2&i){const e=ye();de("ngStyle",Ts(1,P1e,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const k1e=function(i){return{height:i}};function O1e(i,t){if(1&i&&Kn(0,"span",4),2&i){const e=ye();de("ngStyle",Li(1,k1e,e.handleValue+"%"))}}const F1e=function(i){return{width:i}};function N1e(i,t){if(1&i&&Kn(0,"span",4),2&i){const e=ye();de("ngStyle",Li(1,F1e,e.handleValue+"%"))}}const GR=function(i,t){return{left:i,bottom:t}};function B1e(i,t){if(1&i){const e=Di();Xe(0,"span",5,6),_n("keydown",function(r){return Lt(e),Pt(ye().onHandleKeydown(r))})("mousedown",function(r){return Lt(e),Pt(ye().onMouseDown(r))})("touchstart",function(r){return Lt(e),Pt(ye().onTouchStart(r))})("touchmove",function(r){return Lt(e),Pt(ye().onTouchMove(r))})("touchend",function(r){return Lt(e),Pt(ye().onTouchEnd(r))}),Ke()}if(2&i){const e=ye();Nh("transition",e.dragging?"none":null),de("ngStyle",Ts(8,GR,"horizontal"==e.orientation?e.handleValue+"%":null,"vertical"==e.orientation?e.handleValue+"%":null)),Lr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const N6=function(i){return{"p-slider-handle-active":i}};function z1e(i,t){if(1&i){const e=Di();Xe(0,"span",7,8),_n("keydown",function(r){return Lt(e),Pt(ye().onHandleKeydown(r,0))})("mousedown",function(r){return Lt(e),Pt(ye().onMouseDown(r,0))})("touchstart",function(r){return Lt(e),Pt(ye().onTouchStart(r,0))})("touchmove",function(r){return Lt(e),Pt(ye().onTouchMove(r,0))})("touchend",function(r){return Lt(e),Pt(ye().onTouchEnd(r))}),Ke()}if(2&i){const e=ye();Nh("transition",e.dragging?"none":null),de("ngStyle",Ts(9,GR,e.rangeStartLeft,e.rangeStartBottom))("ngClass",Li(12,N6,0==e.handleIndex)),Lr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[0]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}function V1e(i,t){if(1&i){const e=Di();Xe(0,"span",7,9),_n("keydown",function(r){return Lt(e),Pt(ye().onHandleKeydown(r,1))})("mousedown",function(r){return Lt(e),Pt(ye().onMouseDown(r,1))})("touchstart",function(r){return Lt(e),Pt(ye().onTouchStart(r,1))})("touchmove",function(r){return Lt(e),Pt(ye().onTouchMove(r,1))})("touchend",function(r){return Lt(e),Pt(ye().onTouchEnd(r))}),Ke()}if(2&i){const e=ye();Nh("transition",e.dragging?"none":null),de("ngStyle",Ts(9,GR,e.rangeEndLeft,e.rangeEndBottom))("ngClass",Li(12,N6,1==e.handleIndex)),Lr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[1]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const U1e=function(i,t,e,n){return{"p-slider p-component":!0,"p-disabled":i,"p-slider-horizontal":t,"p-slider-vertical":e,"p-slider-animate":n}},H1e={provide:Xc,useExisting:Zr(()=>G1e),multi:!0};let G1e=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.ngZone=r,this.cd=s,this.min=0,this.max=100,this.orientation="horizontal",this.tabindex=0,this.onChange=new qn,this.onSlideEnd=new qn,this.handleValues=[],this.onModelChange=()=>{},this.onModelTouched=()=>{},this.handleIndex=0}onMouseDown(e,n){this.disabled||(this.dragging=!0,this.updateDomData(),this.sliderHandleClick=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,this.bindDragListeners(),e.target.focus(),e.preventDefault(),this.animate&&Ft.removeClass(this.el.nativeElement.children[0],"p-slider-animate"))}onTouchStart(e,n){if(!this.disabled){var r=e.changedTouches[0];this.startHandleValue=this.range?this.handleValues[n]:this.handleValue,this.dragging=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,"horizontal"===this.orientation?(this.startx=parseInt(r.clientX,10),this.barWidth=this.el.nativeElement.children[0].offsetWidth):(this.starty=parseInt(r.clientY,10),this.barHeight=this.el.nativeElement.children[0].offsetHeight),this.animate&&Ft.removeClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault()}}onTouchMove(e,n){if(!this.disabled){var s,r=e.changedTouches[0];s="horizontal"===this.orientation?Math.floor(100*(parseInt(r.clientX,10)-this.startx)/this.barWidth)+this.startHandleValue:Math.floor(100*(this.starty-parseInt(r.clientY,10))/this.barHeight)+this.startHandleValue,this.setValueFromHandle(e,s),e.preventDefault()}}onTouchEnd(e,n){this.disabled||(this.dragging=!1,this.onSlideEnd.emit(this.range?{originalEvent:e,values:this.values}:{originalEvent:e,value:this.value}),this.animate&&Ft.addClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault())}onBarClick(e){this.disabled||(this.sliderHandleClick||(this.updateDomData(),this.handleChange(e)),this.sliderHandleClick=!1)}onHandleKeydown(e,n){this.disabled||(38==e.which||39==e.which?this.spin(e,1,n):(37==e.which||40==e.which)&&this.spin(e,-1,n))}spin(e,n,r){let s=(this.step||1)*n;this.range?(this.handleIndex=r,this.updateValue(this.values[this.handleIndex]+s),this.updateHandleValue()):(this.updateValue(this.value+s),this.updateHandleValue()),e.preventDefault()}handleChange(e){let n=this.calculateHandleValue(e);this.setValueFromHandle(e,n)}bindDragListeners(){this.ngZone.runOutsideAngular(()=>{const e=this.el?this.el.nativeElement.ownerDocument:"document";this.dragListener||(this.dragListener=this.renderer.listen(e,"mousemove",n=>{this.dragging&&this.ngZone.run(()=>{this.handleChange(n)})})),this.mouseupListener||(this.mouseupListener=this.renderer.listen(e,"mouseup",n=>{this.dragging&&(this.dragging=!1,this.ngZone.run(()=>{this.onSlideEnd.emit(this.range?{originalEvent:n,values:this.values}:{originalEvent:n,value:this.value}),this.animate&&Ft.addClass(this.el.nativeElement.children[0],"p-slider-animate")}))}))})}unbindDragListeners(){this.dragListener&&this.dragListener(),this.mouseupListener&&this.mouseupListener()}setValueFromHandle(e,n){this.sliderHandleClick=!1;let r=this.getValueFromHandle(n);this.range?this.step?this.handleStepChange(r,this.values[this.handleIndex]):(this.handleValues[this.handleIndex]=n,this.updateValue(r,e)):this.step?this.handleStepChange(r,this.value):(this.handleValue=n,this.updateValue(r,e)),this.cd.markForCheck()}handleStepChange(e,n){let r=e-n,s=n;r<0?s=n+Math.ceil(e/this.step-n/this.step)*this.step:r>0&&(s=n+Math.floor(e/this.step-n/this.step)*this.step),this.updateValue(s),this.updateHandleValue()}writeValue(e){this.range?this.values=e||[0,0]:this.value=e||0,this.updateHandleValue(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get rangeStartLeft(){return this.isVertical()?null:this.handleValues[0]+"%"}get rangeStartBottom(){return this.isVertical()?this.handleValues[0]+"%":"auto"}get rangeEndLeft(){return this.isVertical()?null:this.handleValues[1]+"%"}get rangeEndBottom(){return this.isVertical()?this.handleValues[1]+"%":"auto"}isVertical(){return"vertical"===this.orientation}updateDomData(){let e=this.el.nativeElement.children[0].getBoundingClientRect();this.initX=e.left+Ft.getWindowScrollLeft(),this.initY=e.top+Ft.getWindowScrollTop(),this.barWidth=this.el.nativeElement.children[0].offsetWidth,this.barHeight=this.el.nativeElement.children[0].offsetHeight}calculateHandleValue(e){return"horizontal"===this.orientation?100*(e.pageX-this.initX)/this.barWidth:100*(this.initY+this.barHeight-e.pageY)/this.barHeight}updateHandleValue(){this.range?(this.handleValues[0]=100*(this.values[0]<this.min?0:this.values[0]-this.min)/(this.max-this.min),this.handleValues[1]=100*(this.values[1]>this.max?100:this.values[1]-this.min)/(this.max-this.min)):this.handleValue=this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)}updateValue(e,n){if(this.range){let r=e;0==this.handleIndex?(r<this.min?(r=this.min,this.handleValues[0]=0):r>this.values[1]&&(r>this.max&&(r=this.max,this.handleValues[0]=100),this.handleValues[0]=r),this.sliderHandleStart.nativeElement.focus()):(r>this.max?(r=this.max,this.handleValues[1]=100,this.offset=this.handleValues[1]):r<this.min?(r=this.min,this.handleValues[1]=r):r<this.values[0]&&(this.offset=this.handleValues[1]),this.sliderHandleEnd.nativeElement.focus()),this.diff=Math.abs(this.handleValues[0]-this.handleValues[1]),this.offset=Math.min(this.handleValues[0],this.handleValues[1]),this.values[this.handleIndex]=this.getNormalizedValue(r),this.onModelChange([this.minVal,this.maxVal]),this.onChange.emit({event:n,values:this.values})}else e<this.min?(e=this.min,this.handleValue=0):e>this.max&&(e=this.max,this.handleValue=100),this.value=this.getNormalizedValue(e),this.onModelChange(this.value),this.onChange.emit({event:n,value:this.value}),this.sliderHandle.nativeElement.focus()}getValueFromHandle(e){return e/100*(this.max-this.min)+this.min}getDecimalsCount(e){return e&&Math.floor(e)!==e&&e.toString().split(".")[1].length||0}getNormalizedValue(e){let n=this.getDecimalsCount(this.step);return n>0?+e.toFixed(n):Math.floor(e)}ngOnDestroy(){this.unbindDragListeners()}get minVal(){return Math.min(this.values[1],this.values[0])}get maxVal(){return Math.max(this.values[1],this.values[0])}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(h),qt(ua),qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-slider"]],viewQuery:function(e,n){if(1&e&&(Hr(E1e,5),Hr(T1e,5),Hr(M1e,5)),2&e){let r;tr(r=nr())&&(n.sliderHandle=r.first),tr(r=nr())&&(n.sliderHandleStart=r.first),tr(r=nr())&&(n.sliderHandleEnd=r.first)}},hostAttrs:[1,"p-element"],inputs:{animate:"animate",disabled:"disabled",min:"min",max:"max",orientation:"orientation",step:"step",range:"range",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex"},outputs:{onChange:"onChange",onSlideEnd:"onSlideEnd"},features:[Xo([H1e])],decls:8,vars:16,consts:[[3,"ngStyle","ngClass","click"],["class","p-slider-range",3,"ngStyle",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],[1,"p-slider-range",3,"ngStyle"],[1,"p-slider-handle",3,"ngStyle","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandle",""],[1,"p-slider-handle",3,"ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandleStart",""],["sliderHandleEnd",""]],template:function(e,n){1&e&&(Xe(0,"div",0),_n("click",function(s){return n.onBarClick(s)}),ze(1,L1e,1,4,"span",1),ze(2,R1e,1,4,"span",1),ze(3,O1e,1,3,"span",1),ze(4,N1e,1,3,"span",1),ze(5,B1e,2,11,"span",2),ze(6,z1e,2,14,"span",3),ze(7,V1e,2,14,"span",3),Ke()),2&e&&(Yr(n.styleClass),de("ngStyle",n.style)("ngClass",_f(11,U1e,n.disabled,"horizontal"==n.orientation,"vertical"==n.orientation,n.animate)),we(1),de("ngIf",n.range&&"horizontal"==n.orientation),we(1),de("ngIf",n.range&&"vertical"==n.orientation),we(1),de("ngIf",!n.range&&"vertical"==n.orientation),we(1),de("ngIf",!n.range&&"horizontal"==n.orientation),we(1),de("ngIf",!n.range),we(1),de("ngIf",n.range),we(1),de("ngIf",n.range))},dependencies:[Mo,Fo,ea],styles:[".p-slider{position:relative}.p-slider .p-slider-handle{position:absolute;cursor:grab;touch-action:none;display:block}.p-slider-range{position:absolute;display:block}.p-slider-horizontal .p-slider-range{top:0;left:0;height:100%}.p-slider-horizontal .p-slider-handle{top:50%}.p-slider-vertical{height:100px}.p-slider-vertical .p-slider-handle{left:50%}.p-slider-vertical .p-slider-range{bottom:0;left:0;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),W1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();function j1e(i,t){if(1&i&&(Xe(0,"span"),bi(1),Ke()),2&i){const e=ye();we(1),As(e.label)}}function $1e(i,t){1&i&&qi(0)}const Px=function(i){return{height:i}},q1e=function(i,t){return{"p-highlight":i,"p-disabled":t}},X1e=function(i){return{"p-highlight":i}},B6=function(i){return{"pi pi-check":i}},Rx=function(i){return{$implicit:i}},Y1e=["container"],K1e=["filterInput"],Z1e=["in"],Q1e=["items"],J1e=["scroller"];function eSe(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(2);we(1),As(e.valuesAsString||"empty")}}function tSe(i,t){if(1&i){const e=Di();Xe(0,"span",18),_n("click",function(r){Lt(e);const s=ye().$implicit;return Pt(ye(3).removeChip(s,r))}),Ke()}}function nSe(i,t){if(1&i&&(Xe(0,"div",14,15)(2,"span",16),bi(3),Ke(),ze(4,tSe,1,0,"span",17),Ke()),2&i){const e=t.$implicit,n=ye(3);we(3),As(n.findLabelByValue(e)),we(1),de("ngIf",!n.disabled)}}function iSe(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(3);we(1),As(e.placeholder||e.defaultLabel||"empty")}}function rSe(i,t){if(1&i&&(is(0),ze(1,nSe,5,2,"div",13),ze(2,iSe,2,1,"ng-container",7),rs()),2&i){const e=ye(2);we(1),de("ngForOf",e.value),we(1),de("ngIf",!e.value||0===e.value.length)}}function sSe(i,t){if(1&i&&(is(0),ze(1,eSe,2,1,"ng-container",7),ze(2,rSe,3,2,"ng-container",7),rs()),2&i){const e=ye();we(1),de("ngIf","comma"===e.display),we(1),de("ngIf","chip"===e.display)}}function oSe(i,t){1&i&&qi(0)}function aSe(i,t){if(1&i){const e=Di();Xe(0,"i",19),_n("click",function(r){return Lt(e),Pt(ye().clear(r))}),Ke()}}function lSe(i,t){1&i&&qi(0)}function cSe(i,t){1&i&&qi(0)}const z6=function(i){return{options:i}};function uSe(i,t){if(1&i&&(is(0),ze(1,cSe,1,0,"ng-container",8),rs()),2&i){const e=ye(3);we(1),de("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Li(2,z6,e.filterOptions))}}const dSe=function(i){return{"p-checkbox-disabled":i}},hSe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}};function fSe(i,t){if(1&i){const e=Di();Xe(0,"div",34)(1,"div",2)(2,"input",35),_n("focus",function(){return Lt(e),Pt(ye(4).onHeaderCheckboxFocus())})("blur",function(){return Lt(e),Pt(ye(4).onHeaderCheckboxBlur())})("keydown.space",function(r){return Lt(e),Pt(ye(4).toggleAll(r))}),Ke()(),Xe(3,"div",36),_n("click",function(r){return Lt(e),Pt(ye(4).toggleAll(r))}),Kn(4,"span",37),Ke()()}if(2&i){const e=ye(4);de("ngClass",Li(6,dSe,e.disabled||e.toggleAllDisabled)),we(2),de("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),we(1),de("ngClass",Yu(8,hSe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),Lr("aria-checked",e.allChecked),we(1),de("ngClass",Li(12,B6,e.allChecked))}}function pSe(i,t){if(1&i){const e=Di();Xe(0,"div",38)(1,"input",39,40),_n("input",function(r){return Lt(e),Pt(ye(4).onFilterInputChange(r))}),Ke(),Kn(3,"span",41),Ke()}if(2&i){const e=ye(4);we(1),de("value",e.filterValue||"")("disabled",e.disabled),Lr("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function gSe(i,t){if(1&i){const e=Di();ze(0,fSe,5,14,"div",30),ze(1,pSe,4,5,"div",31),Xe(2,"button",32),_n("click",function(r){return Lt(e),Pt(ye(3).close(r))}),Kn(3,"span",33),Ke()}if(2&i){const e=ye(3);de("ngIf",e.showToggleAll&&!e.selectionLimit),we(1),de("ngIf",e.filter)}}function mSe(i,t){if(1&i&&(Xe(0,"div",26),Mu(1),ze(2,lSe,1,0,"ng-container",27),ze(3,uSe,2,4,"ng-container",28),ze(4,gSe,4,2,"ng-template",null,29,Mc),Ke()),2&i){const e=Po(5),n=ye(2);we(2),de("ngTemplateOutlet",n.headerTemplate),we(1),de("ngIf",n.filterTemplate)("ngIfElse",e)}}function vSe(i,t){1&i&&qi(0)}const V6=function(i,t){return{$implicit:i,options:t}};function ySe(i,t){if(1&i&&ze(0,vSe,1,0,"ng-container",8),2&i){const e=t.$implicit,n=t.options;ye(2),de("ngTemplateOutlet",Po(6))("ngTemplateOutletContext",Ts(2,V6,e,n))}}function _Se(i,t){1&i&&qi(0)}function bSe(i,t){if(1&i&&ze(0,_Se,1,0,"ng-container",8),2&i){const e=t.options;de("ngTemplateOutlet",ye(4).loaderTemplate)("ngTemplateOutletContext",Li(2,z6,e))}}function CSe(i,t){1&i&&(is(0),ze(1,bSe,1,4,"ng-template",45),rs())}function wSe(i,t){if(1&i){const e=Di();Xe(0,"p-scroller",42,43),_n("onLazyLoad",function(r){return Lt(e),Pt(ye(2).onLazyLoad.emit(r))}),ze(2,ySe,1,5,"ng-template",44),ze(3,CSe,2,0,"ng-container",7),Ke()}if(2&i){const e=ye(2);To(Li(9,Px,e.scrollHeight)),de("items",e.optionsToRender)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),we(3),de("ngIf",e.loaderTemplate)}}function ASe(i,t){1&i&&qi(0)}const xSe=function(){return{}};function ISe(i,t){if(1&i&&(is(0),ze(1,ASe,1,0,"ng-container",8),rs()),2&i){ye();const e=Po(6),n=ye();we(1),de("ngTemplateOutlet",e)("ngTemplateOutletContext",Ts(3,V6,n.optionsToRender,Oo(2,xSe)))}}function SSe(i,t){if(1&i&&(Xe(0,"span"),bi(1),Ke()),2&i){const e=ye().$implicit,n=ye(4);we(1),As(n.getOptionGroupLabel(e)||"empty")}}function ESe(i,t){1&i&&qi(0)}function TSe(i,t){1&i&&qi(0)}function MSe(i,t){if(1&i&&(Xe(0,"li",51),ze(1,SSe,2,1,"span",7),ze(2,ESe,1,0,"ng-container",8),Ke(),ze(3,TSe,1,0,"ng-container",8)),2&i){const e=t.$implicit,n=ye(2).options,r=Po(5),s=ye(2);de("ngStyle",Li(6,Px,n.itemSize+"px")),we(1),de("ngIf",!s.groupTemplate),we(1),de("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",Li(8,Rx,e)),we(1),de("ngTemplateOutlet",r)("ngTemplateOutletContext",Li(10,Rx,s.getOptionGroupChildren(e)))}}function DSe(i,t){if(1&i&&(is(0),ze(1,MSe,4,12,"ng-template",50),rs()),2&i){const e=ye().$implicit;we(1),de("ngForOf",e)}}function LSe(i,t){1&i&&qi(0)}function PSe(i,t){if(1&i&&(is(0),ze(1,LSe,1,0,"ng-container",8),rs()),2&i){const e=ye().$implicit,n=Po(5);we(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",Li(2,Rx,e))}}function RSe(i,t){if(1&i){const e=Di();Xe(0,"p-multiSelectItem",52),_n("onClick",function(r){return Lt(e),Pt(ye(4).onOptionClick(r))})("onKeydown",function(r){return Lt(e),Pt(ye(4).onOptionKeydown(r))}),Ke()}if(2&i){const e=t.$implicit,n=ye(2).options,r=ye(2);de("option",e)("selected",r.isSelected(e))("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)("itemSize",n.itemSize)}}function kSe(i,t){1&i&&ze(0,RSe,1,6,"ng-template",50),2&i&&de("ngForOf",t.$implicit)}function OSe(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(4);we(1),jc(" ",e.emptyFilterMessageLabel," ")}}function FSe(i,t){1&i&&qi(0,null,54)}function NSe(i,t){if(1&i&&(Xe(0,"li",53),ze(1,OSe,2,1,"ng-container",28),ze(2,FSe,2,0,"ng-container",27),Ke()),2&i){const e=ye().options,n=ye(2);de("ngStyle",Li(4,Px,e.itemSize+"px")),we(1),de("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),we(1),de("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function BSe(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(4);we(1),jc(" ",e.emptyMessageLabel," ")}}function zSe(i,t){1&i&&qi(0,null,55)}function VSe(i,t){if(1&i&&(Xe(0,"li",53),ze(1,BSe,2,1,"ng-container",28),ze(2,zSe,2,0,"ng-container",27),Ke()),2&i){const e=ye().options,n=ye(2);de("ngStyle",Li(4,Px,e.itemSize+"px")),we(1),de("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),we(1),de("ngTemplateOutlet",n.emptyTemplate)}}function USe(i,t){if(1&i&&(Xe(0,"ul",46,47),ze(2,DSe,2,1,"ng-container",7),ze(3,PSe,2,4,"ng-container",7),ze(4,kSe,1,1,"ng-template",null,48,Mc),ze(6,NSe,3,6,"li",49),ze(7,VSe,3,6,"li",49),Ke()),2&i){const e=t.options,n=ye(2);To(e.contentStyle),de("ngClass",e.contentStyleClass),we(2),de("ngIf",n.group),we(1),de("ngIf",!n.group),we(3),de("ngIf",n.hasFilter()&&n.isEmpty()),we(1),de("ngIf",!n.hasFilter()&&n.isEmpty())}}function HSe(i,t){1&i&&qi(0)}function GSe(i,t){if(1&i&&(Xe(0,"div",56),Mu(1,1),ze(2,HSe,1,0,"ng-container",27),Ke()),2&i){const e=ye(2);we(2),de("ngTemplateOutlet",e.footerTemplate)}}const WSe=function(){return["p-multiselect-panel p-component"]},jSe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},$Se=function(i){return{value:"visible",params:i}};function qSe(i,t){if(1&i){const e=Di();Xe(0,"div",20),_n("@overlayAnimation.start",function(r){return Lt(e),Pt(ye().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return Lt(e),Pt(ye().onOverlayAnimationEnd(r))})("keydown",function(r){return Lt(e),Pt(ye().onKeydown(r))})("click",function(r){return Lt(e),Pt(ye().onOverlayClick(r))}),ze(1,mSe,6,3,"div",21),Xe(2,"div",22),ze(3,wSe,4,11,"p-scroller",23),ze(4,ISe,2,6,"ng-container",7),ze(5,USe,8,7,"ng-template",null,24,Mc),Ke(),ze(7,GSe,3,1,"div",25),Ke()}if(2&i){const e=ye();Yr(e.panelStyleClass),de("ngClass",Oo(11,WSe))("@overlayAnimation",Li(15,$Se,Ts(12,jSe,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),we(1),de("ngIf",e.showHeader),we(1),Nh("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),we(1),de("ngIf",e.virtualScroll),we(1),de("ngIf",!e.virtualScroll),we(3),de("ngIf",e.footerFacet||e.footerTemplate)}}const XSe=[[["p-header"]],[["p-footer"]]],YSe=function(i,t,e,n){return{"p-multiselect p-component":!0,"p-multiselect-open":i,"p-multiselect-chip":t,"p-focus":e,"p-disabled":n}},KSe=function(i,t){return{"p-placeholder":i,"p-multiselect-label-empty":t}},ZSe=function(){return{"p-multiselect-trigger":!0}},QSe=["p-header","p-footer"],JSe={provide:Xc,useExisting:Zr(()=>tEe),multi:!0};let eEe=(()=>{class i{constructor(){this.onClick=new qn,this.onKeydown=new qn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}onOptionKeydown(e){this.onKeydown.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Rr({type:i,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Xe(0,"li",0),_n("click",function(s){return n.onOptionClick(s)})("keydown",function(s){return n.onOptionKeydown(s)}),Xe(1,"div",1)(2,"div",2),Kn(3,"span",3),Ke()(),ze(4,j1e,2,1,"span",4),ze(5,$1e,1,0,"ng-container",5),Ke()),2&e&&(de("ngStyle",Li(9,Px,n.itemSize+"px"))("ngClass",Ts(11,q1e,n.selected,n.disabled)),Lr("aria-label",n.label)("tabindex",n.disabled?null:"0"),we(2),de("ngClass",Li(14,X1e,n.selected)),we(1),de("ngClass",Li(16,B6,n.selected)),we(1),de("ngIf",!n.template),we(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Li(18,Rx,n.option)))},dependencies:[Mo,Fo,El,ea,Ju],encapsulation:2}),i})(),tEe=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.filterService=s,this.config=o,this.overlayService=l,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.scrollHeight="200px",this.lazy=!1,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.showClear=!1,this.onChange=new qn,this.onFilter=new qn,this.onFocus=new qn,this.onBlur=new qn,this.onClick=new qn,this.onClear=new qn,this.onPanelShow=new qn,this.onPanelHide=new qn,this.onLazyLoad=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(e){this._defaultLabel=e,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder=e,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(e){this._options=e,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(e){return this.optionLabel?ur.resolveFieldData(e,this.optionLabel):e&&null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ur.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?ur.resolveFieldData(e,this.optionGroupLabel):e&&null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ur.resolveFieldData(e,this.optionGroupChildren):e.items}isOptionDisabled(e){return(this.optionDisabled?ur.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}writeValue(e){this.value=e,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e){let n=e.option;if(this.isOptionDisabled(n))return;let r=this.getOptionValue(n),s=this.findSelectionIndex(r);-1!=s?(this.value=this.value.filter((o,l)=>l!=s),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],r]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:e.originalEvent,value:this.value,itemValue:r}),this.updateLabel(),this.updateFilledState()}isSelected(e){return-1!=this.findSelectionIndex(this.getOptionValue(e))}findSelectionIndex(e){let n=-1;if(this.value)for(let r=0;r<this.value.length;r++)if(ur.equals(this.value[r],e,this.dataKey)){n=r;break}return n}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateFilledState(),this.updateLabel(),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&ic.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(e){"void"===e.toState&&ic.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Ft.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Ft.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?Ft.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Ft.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateLabel(),this.updateFilledState(),this.onClear.emit(),this.onModelChange(this.value),e.stopPropagation()}onMouseclick(e,n){this.disabled||this.readonly||e.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(e),!this.isOverlayClick(e)&&!Ft.hasClass(e.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(n.focus(),this.show())))}removeChip(e,n){this.value=this.value.filter(r=>!ur.equals(r,e,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:n,value:this.value,itemValue:e}),this.updateLabel(),this.updateFilledState()}isOverlayClick(e){let n=e.target;return!!this.overlay&&(this.overlay.isSameNode(n)||this.overlay.contains(n))}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.isOverlayClick(e))}onInputFocus(e){this.focus=!0,this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focus=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(e){if(!this.readonly)switch(e.originalEvent.which){case 40:var n=this.findNextItem(e.originalEvent.target.parentElement);n&&n.focus(),e.originalEvent.preventDefault();break;case 38:var r=this.findPrevItem(e.originalEvent.target.parentElement);r&&r.focus(),e.originalEvent.preventDefault();break;case 13:this.onOptionClick(e),e.originalEvent.preventDefault();break;case 9:this.hide()}}findNextItem(e){let n=e.nextElementSibling;return n?Ft.hasClass(n.children[0],"p-disabled")||Ft.isHidden(n.children[0])||Ft.hasClass(n,"p-multiselect-item-group")?this.findNextItem(n):n.children[0]:null}findPrevItem(e){let n=e.previousElementSibling;return n?Ft.hasClass(n.children[0],"p-disabled")||Ft.isHidden(n.children[0])||Ft.hasClass(n,"p-multiselect-item-group")?this.findPrevItem(n):n.children[0]:null}onKeydown(e){switch(e.which){case 40:!this.overlayVisible&&e.altKey&&(this.show(),e.preventDefault());break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let e="";for(let n=0;n<this.value.length;n++){let r=this.findLabelByValue(this.value[n]);r&&(e.length>0&&(e+=", "),e+=r)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=e;else{let n=/{(.*?)}/;this.valuesAsString=n.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(n)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(e){if(this.group){let n=null;for(let r=0;r<this.options.length;r++){let s=this.getOptionGroupChildren(this.options[r]);if(s&&(n=this.searchLabelByValue(e,s),n))break}return n}return this.searchLabelByValue(e,this.options)}searchLabelByValue(e,n){let r=null;for(let s=0;s<n.length;s++){let o=n[s],l=this.getOptionValue(o);if(null==e&&null==l||ur.equals(e,l,this.dataKey)){r=this.getOptionLabel(o);break}}return r}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(vu.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(vu.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(e){this._filterValue=e.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:e,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&this.hide(),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Ft.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&ic.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(h),qt(Yo),qt(sA),qt(Np),qt(oA))},i.\u0275cmp=Rr({type:i,selectors:[["p-multiSelect"]],contentQueries:function(e,n,r){if(1&e&&(dl(r,A1,5),dl(r,XD,5),dl(r,hl,4)),2&e){let s;tr(s=nr())&&(n.footerFacet=s.first),tr(s=nr())&&(n.headerFacet=s.first),tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(Y1e,5),Hr(K1e,5),Hr(Z1e,5),Hr(Q1e,5),Hr(J1e,5)),2&e){let r;tr(r=nr())&&(n.containerViewChild=r.first),tr(r=nr())&&(n.filterInputChild=r.first),tr(r=nr())&&(n.accessibleViewChild=r.first),tr(r=nr())&&(n.itemsViewChild=r.first),tr(r=nr())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Fp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus||n.overlayVisible)("p-multiselect-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad"},features:[Xo([JSe])],ngContentSelectors:QSe,decls:13,vars:34,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-multiselect-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],[1,"p-multiselect-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(e,n){if(1&e){const r=Di();Xf(XSe),Xe(0,"div",0,1),_n("click",function(o){Lt(r);const l=Po(4);return Pt(n.onMouseclick(o,l))}),Xe(2,"div",2)(3,"input",3,4),_n("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)})("keydown",function(o){return n.onKeydown(o)}),Ke()(),Xe(5,"div",5)(6,"div",6),ze(7,sSe,3,2,"ng-container",7),ze(8,oSe,1,0,"ng-container",8),Ke(),ze(9,aSe,1,0,"i",9),Ke(),Xe(10,"div",10),Kn(11,"span",11),Ke(),ze(12,qSe,8,17,"div",12),Ke()}2&e&&(Yr(n.styleClass),de("ngClass",_f(23,YSe,n.overlayVisible,"chip"===n.display,n.focus,n.disabled))("ngStyle",n.style),we(3),de("disabled",n.disabled),Lr("label",n.label)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-expanded",n.overlayVisible)("aria-labelledby",n.ariaLabelledBy),we(2),de("pTooltip",n.tooltip)("tooltipPosition",n.tooltipPosition)("positionStyle",n.tooltipPositionStyle)("tooltipStyleClass",n.tooltipStyleClass),we(1),de("ngClass",Ts(28,KSe,n.valuesAsString===(n.defaultLabel||n.placeholder),!(null!=n.valuesAsString&&0!==n.valuesAsString.length||null!=n.placeholder&&0!==n.placeholder.length))),we(1),de("ngIf",!n.selectedItemsTemplate),we(1),de("ngTemplateOutlet",n.selectedItemsTemplate)("ngTemplateOutletContext",Li(31,Rx,n.value)),we(1),de("ngIf",null!=n.value&&n.filled&&!n.disabled&&n.showClear),we(1),de("ngClass",Oo(33,ZSe)),we(1),de("ngClass",n.dropdownIcon),we(1),de("ngIf",n.overlayVisible))},dependencies:[Mo,mu,Fo,El,ea,hl,ov,Ju,EA,eEe],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}\n"],encapsulation:2,data:{animation:[cy("overlayAnimation",[Qu(":enter",[Tl({opacity:0,transform:"scaleY(0.8)"}),Yc("{{showTransitionParams}}")]),Qu(":leave",[Yc("{{hideTransitionParams}}",Tl({opacity:0}))])])]},changeDetection:0}),i})(),nEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za,av,yu,lv,Za,lv]}),i})();function iEe(i,t){if(1&i){const e=Di();Xe(0,"span",3),_n("click",function(r){return Lt(e),Pt(ye().clear(r))})("keydown.enter",function(r){return Lt(e),Pt(ye().clear(r))}),Ke()}if(2&i){const e=ye();de("ngClass",e.iconCancelClass)("ngStyle",e.iconCancelStyle),Lr("tabindex",e.disabled||e.readonly?null:"0")}}function rEe(i,t){if(1&i){const e=Di();Xe(0,"span",4),_n("click",function(r){const o=Lt(e).index;return Pt(ye().rate(r,o))})("keydown.enter",function(r){const o=Lt(e).index;return Pt(ye().rate(r,o))}),Ke()}if(2&i){const e=t.index,n=ye();de("ngClass",!n.value||e>=n.value?n.iconOffClass:n.iconOnClass)("ngStyle",!n.value||e>=n.value?n.iconOffStyle:n.iconOnStyle),Lr("tabindex",n.disabled||n.readonly?null:"0")}}const sEe=function(i,t){return{"p-readonly":i,"p-disabled":t}},oEe={provide:Xc,useExisting:Zr(()=>aEe),multi:!0};let aEe=(()=>{class i{constructor(e){this.cd=e,this.stars=5,this.cancel=!0,this.iconOnClass="pi pi-star-fill",this.iconOffClass="pi pi-star",this.iconCancelClass="pi pi-ban",this.onRate=new qn,this.onCancel=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.starsArray=[];for(let e=0;e<this.stars;e++)this.starsArray[e]=e}rate(e,n){!this.readonly&&!this.disabled&&(this.value=n+1,this.onModelChange(this.value),this.onModelTouched(),this.onRate.emit({originalEvent:e,value:n+1})),e.preventDefault()}clear(e){!this.readonly&&!this.disabled&&(this.value=null,this.onModelChange(this.value),this.onModelTouched(),this.onCancel.emit(e)),e.preventDefault()}writeValue(e){this.value=e,this.cd.detectChanges()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo))},i.\u0275cmp=Rr({type:i,selectors:[["p-rating"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",readonly:"readonly",stars:"stars",cancel:"cancel",iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle"},outputs:{onRate:"onRate",onCancel:"onCancel"},features:[Xo([oEe])],decls:3,vars:6,consts:[[1,"p-rating",3,"ngClass"],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter"],[1,"p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter"]],template:function(e,n){1&e&&(Xe(0,"div",0),ze(1,iEe,1,3,"span",1),ze(2,rEe,1,3,"span",2),Ke()),2&e&&(de("ngClass",Ts(3,sEe,n.readonly,n.disabled)),we(1),de("ngIf",n.cancel),we(1),de("ngForOf",n.starsArray))},dependencies:[Mo,mu,Fo,ea],styles:[".p-rating-icon{cursor:pointer}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}\n"],encapsulation:2,changeDetection:0}),i})(),lEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();const cEe=["rb"],uEe=function(i,t,e){return{"p-radiobutton-label":!0,"p-radiobutton-label-active":i,"p-disabled":t,"p-radiobutton-label-focus":e}};function dEe(i,t){if(1&i){const e=Di();Xe(0,"label",4),_n("click",function(r){return Lt(e),Pt(ye().select(r))}),bi(1),Ke()}if(2&i){const e=ye(),n=Po(3);Yr(e.labelStyleClass),de("ngClass",Yu(5,uEe,n.checked,e.disabled,e.focused)),Lr("for",e.inputId),we(1),As(e.label)}}const hEe=function(i,t,e){return{"p-radiobutton p-component":!0,"p-radiobutton-checked":i,"p-radiobutton-disabled":t,"p-radiobutton-focused":e}},fEe=function(i,t,e){return{"p-radiobutton-box":!0,"p-highlight":i,"p-disabled":t,"p-focus":e}},pEe={provide:Xc,useExisting:Zr(()=>mEe),multi:!0};let gEe=(()=>{class i{constructor(){this.accessors=[]}add(e,n){this.accessors.push([e,n])}remove(e){this.accessors=this.accessors.filter(n=>n[1]!==e)}select(e){this.accessors.forEach(n=>{this.isSameGroup(n,e)&&n[1]!==e&&n[1].writeValue(e.value)})}isSameGroup(e,n){return!!e[0].control&&e[0].control.root===n.control.control.root&&e[1].name===n.name}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=cr({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),mEe=(()=>{class i{constructor(e,n,r){this.cd=e,this.injector=n,this.registry=r,this.onClick=new qn,this.onFocus=new qn,this.onBlur=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.control=this.injector.get(sv),this.checkName(),this.registry.add(this.control,this)}handleClick(e,n,r){e.preventDefault(),!this.disabled&&(this.select(e),r&&n.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit(e))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error('\n          If you define both a name and a formControlName attribute on your radio button, their values\n          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>\n        ')}}return i.\u0275fac=function(e){return new(e||i)(qt(Yo),qt(Xu),qt(gEe))},i.\u0275cmp=Rr({type:i,selectors:[["p-radioButton"]],viewQuery:function(e,n){if(1&e&&Hr(cEe,5),2&e){let r;tr(r=nr())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[Xo([pEe])],decls:7,vars:23,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio",3,"checked","disabled","change","focus","blur"],["rb",""],[3,"ngClass","click"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"]],template:function(e,n){if(1&e){const r=Di();Xe(0,"div",0)(1,"div",1)(2,"input",2,3),_n("change",function(o){return n.onChange(o)})("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)}),Ke()(),Xe(4,"div",4),_n("click",function(o){Lt(r);const l=Po(3);return Pt(n.handleClick(o,l,!0))}),Kn(5,"span",5),Ke()(),ze(6,dEe,2,9,"label",6)}2&e&&(Yr(n.styleClass),de("ngStyle",n.style)("ngClass",Yu(15,hEe,n.checked,n.disabled,n.focused)),we(2),de("checked",n.checked)("disabled",n.disabled),Lr("id",n.inputId)("name",n.name)("value",n.value)("tabindex",n.tabindex)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy),we(2),de("ngClass",Yu(19,fEe,n.checked,n.disabled,n.focused)),we(2),de("ngIf",n.label))},dependencies:[Mo,Fo,ea],encapsulation:2,changeDetection:0}),i})(),vEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();dC([Tl({transform:"{{transform}}",opacity:0}),Yc("{{transition}}",Tl({transform:"none",opacity:1}))]),dC([Yc("{{transition}}",Tl({transform:"{{transform}}",opacity:0}))]);let kEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,cv,yu,cv,Za]}),i})(),OEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})(),VEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,yu,Za,Za]}),i})();const UEe=hA([],dA(fA,(i,{graphs:t})=>t)),HEe=hA({id:"default",label:"default",style:"default",rules:"default",nodes:[],edges:[]},dA(E1,(i,{graph:t})=>t)),GEe=["headerchkbox"],WEe=["filter"];function jEe(i,t){1&i&&qi(0)}function $Ee(i,t){if(1&i&&(Xe(0,"div",7),Mu(1),ze(2,jEe,1,0,"ng-container",8),Ke()),2&i){const e=ye();we(2),de("ngTemplateOutlet",e.headerTemplate)}}const U6=function(i){return{"p-checkbox-disabled":i}},qEe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}},H6=function(i){return{"pi pi-check":i}};function XEe(i,t){if(1&i){const e=Di();Xe(0,"div",12)(1,"div",13)(2,"input",14),_n("focus",function(){return Lt(e),Pt(ye(2).onHeaderCheckboxFocus())})("blur",function(){return Lt(e),Pt(ye(2).onHeaderCheckboxBlur())})("keydown.space",function(r){return Lt(e),Pt(ye(2).toggleAll(r))}),Ke()(),Xe(3,"div",15,16),_n("click",function(r){return Lt(e),Pt(ye(2).toggleAll(r))}),Kn(5,"span",17),Ke()()}if(2&i){const e=ye(2);de("ngClass",Li(5,U6,e.disabled||e.toggleAllDisabled)),we(2),de("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),we(1),de("ngClass",Yu(7,qEe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),we(2),de("ngClass",Li(11,H6,e.allChecked))}}function YEe(i,t){1&i&&qi(0)}const KEe=function(i){return{options:i}};function ZEe(i,t){if(1&i&&(is(0),ze(1,YEe,1,0,"ng-container",18),rs()),2&i){const e=ye(2);we(1),de("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Li(2,KEe,e.filterOptions))}}function QEe(i,t){if(1&i){const e=Di();Xe(0,"div",20)(1,"input",21,22),_n("input",function(r){return Lt(e),Pt(ye(3).onFilter(r))}),Ke(),Kn(3,"span",23),Ke()}if(2&i){const e=ye(3);we(1),de("value",e.filterValue||"")("disabled",e.disabled),Lr("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function JEe(i,t){1&i&&ze(0,QEe,4,4,"div",19),2&i&&de("ngIf",ye(2).filter)}function eTe(i,t){if(1&i&&(Xe(0,"div",7),ze(1,XEe,6,13,"div",9),ze(2,ZEe,2,4,"ng-container",10),ze(3,JEe,1,1,"ng-template",null,11,Mc),Ke()),2&i){const e=Po(4),n=ye();we(1),de("ngIf",n.checkbox&&n.multiple&&n.showToggleAll),we(1),de("ngIf",n.filterTemplate)("ngIfElse",e)}}function tTe(i,t){if(1&i&&(Xe(0,"span"),bi(1),Ke()),2&i){const e=ye().$implicit,n=ye(2);we(1),As(n.getOptionGroupLabel(e)||"empty")}}function nTe(i,t){1&i&&qi(0)}function iTe(i,t){1&i&&qi(0)}const WR=function(i){return{$implicit:i}};function rTe(i,t){if(1&i&&(Xe(0,"li",25),ze(1,tTe,2,1,"span",3),ze(2,nTe,1,0,"ng-container",18),Ke(),ze(3,iTe,1,0,"ng-container",18)),2&i){const e=t.$implicit,n=ye(2),r=Po(8);we(1),de("ngIf",!n.groupTemplate),we(1),de("ngTemplateOutlet",n.groupTemplate)("ngTemplateOutletContext",Li(5,WR,e)),we(1),de("ngTemplateOutlet",r)("ngTemplateOutletContext",Li(7,WR,n.getOptionGroupChildren(e)))}}function sTe(i,t){if(1&i&&(is(0),ze(1,rTe,4,9,"ng-template",24),rs()),2&i){const e=ye();we(1),de("ngForOf",e.optionsToRender)}}function oTe(i,t){1&i&&qi(0)}function aTe(i,t){if(1&i&&(is(0),ze(1,oTe,1,0,"ng-container",18),rs()),2&i){const e=ye(),n=Po(8);we(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",Li(2,WR,e.optionsToRender))}}const lTe=function(i){return{"p-highlight":i}};function cTe(i,t){if(1&i&&(Xe(0,"div",12)(1,"div",28),Kn(2,"span",17),Ke()()),2&i){const e=ye().$implicit,n=ye(2);de("ngClass",Li(3,U6,n.disabled||n.isOptionDisabled(e))),we(1),de("ngClass",Li(5,lTe,n.isSelected(e))),we(1),de("ngClass",Li(7,H6,n.isSelected(e)))}}function uTe(i,t){if(1&i&&(Xe(0,"span"),bi(1),Ke()),2&i){const e=ye().$implicit,n=ye(2);we(1),As(n.getOptionLabel(e))}}function dTe(i,t){1&i&&qi(0)}const hTe=function(i,t){return{"p-listbox-item":!0,"p-highlight":i,"p-disabled":t}},fTe=function(i,t){return{$implicit:i,index:t}};function pTe(i,t){if(1&i){const e=Di();Xe(0,"li",27),_n("click",function(r){const o=Lt(e).$implicit;return Pt(ye(2).onOptionClick(r,o))})("dblclick",function(r){const o=Lt(e).$implicit;return Pt(ye(2).onOptionDoubleClick(r,o))})("touchend",function(){const s=Lt(e).$implicit;return Pt(ye(2).onOptionTouchEnd(s))})("keydown",function(r){const o=Lt(e).$implicit;return Pt(ye(2).onOptionKeyDown(r,o))}),ze(1,cTe,3,9,"div",9),ze(2,uTe,2,1,"span",3),ze(3,dTe,1,0,"ng-container",18),Ke()}if(2&i){const e=t.$implicit,n=t.index,r=ye(2);de("ngClass",Ts(8,hTe,r.isSelected(e),r.isOptionDisabled(e))),Lr("tabindex",r.disabled||r.isOptionDisabled(e)?null:"0")("aria-label",r.getOptionLabel(e))("aria-selected",r.isSelected(e)),we(1),de("ngIf",r.checkbox&&r.multiple),we(1),de("ngIf",!r.itemTemplate),we(1),de("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",Ts(11,fTe,e,n))}}function gTe(i,t){1&i&&ze(0,pTe,4,14,"li",26),2&i&&de("ngForOf",t.$implicit)}function mTe(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(2);we(1),jc(" ",e.emptyFilterMessageLabel," ")}}function vTe(i,t){1&i&&qi(0,null,30)}function yTe(i,t){if(1&i&&(Xe(0,"li",29),ze(1,mTe,2,1,"ng-container",10),ze(2,vTe,2,0,"ng-container",8),Ke()),2&i){const e=ye();we(1),de("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),we(1),de("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function _Te(i,t){if(1&i&&(is(0),bi(1),rs()),2&i){const e=ye(2);we(1),jc(" ",e.emptyMessageLabel," ")}}function bTe(i,t){1&i&&qi(0,null,31)}function CTe(i,t){if(1&i&&(Xe(0,"li",29),ze(1,_Te,2,1,"ng-container",10),ze(2,bTe,2,0,"ng-container",8),Ke()),2&i){const e=ye();we(1),de("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),we(1),de("ngTemplateOutlet",e.emptyTemplate)}}function wTe(i,t){1&i&&qi(0)}function ATe(i,t){if(1&i&&(Xe(0,"div",32),Mu(1,1),ze(2,wTe,1,0,"ng-container",8),Ke()),2&i){const e=ye();we(2),de("ngTemplateOutlet",e.footerTemplate)}}const xTe=[[["p-header"]],[["p-footer"]]],ITe=function(i){return{"p-listbox p-component":!0,"p-disabled":i}},STe=["p-header","p-footer"],ETe={provide:Xc,useExisting:Zr(()=>TTe),multi:!0};let TTe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.cd=n,this.filterService=r,this.config=s,this.checkbox=!1,this.filter=!1,this.filterMatchMode="contains",this.metaKeySelection=!0,this.showToggleAll=!0,this.optionGroupChildren="items",this.onChange=new qn,this.onClick=new qn,this.onDblClick=new qn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get options(){return this._options}set options(e){this._options=e,this.hasFilter()&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()}),this.filterBy&&(this.filterOptions={filter:e=>this.onFilter(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template}})}getOptionLabel(e){return this.optionLabel?ur.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?ur.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?ur.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?ur.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?ur.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||(this.multiple?this.checkbox?this.onOptionClickCheckbox(e,n):this.onOptionClickMultiple(e,n):this.onOptionClickSingle(e,n),this.onClick.emit({originalEvent:e,option:n,value:this.value}),this.optionTouched=!1)}onOptionTouchEnd(e){this.disabled||this.isOptionDisabled(e)||this.readonly||(this.optionTouched=!0)}onOptionDoubleClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||this.onDblClick.emit({originalEvent:e,option:n,value:this.value})}onOptionClickSingle(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?l&&(this.value=null,s=!0):(this.value=this.getOptionValue(n),s=!0)}else this.value=r?null:this.getOptionValue(n),s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickMultiple(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?(l?this.removeOption(n):this.value=[this.getOptionValue(n)],s=!0):(this.value=l&&this.value||[],this.value=[...this.value,this.getOptionValue(n)],s=!0)}else r?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickCheckbox(e,n){this.disabled||this.readonly||(this.isSelected(n)?this.removeOption(n):(this.value=this.value?this.value:[],this.value=[...this.value,this.getOptionValue(n)]),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}removeOption(e){this.value=this.value.filter(n=>!ur.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(ur.equals(s,r,this.dataKey)){n=!0;break}}else n=ur.equals(this.value,r,this.dataKey);return n}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(vu.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(vu.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilter(e){this._filterValue=e.target.value,this.activateFilter()}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let e=(this.filterBy||this.optionLabel||"label").split(","),n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this._options.filter(e=>this.filterService.filters[this.filterMatchMode](this.getOptionLabel(e),this._filterValue,this.filterLocale));else this._filteredOptions=null}resetFilter(){this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}onOptionKeyDown(e,n){if(this.readonly)return;let r=e.currentTarget;switch(e.which){case 40:var s=this.findNextItem(r);s&&s.focus(),e.preventDefault();break;case 38:var o=this.findPrevItem(r);o&&o.focus(),e.preventDefault();break;case 13:this.onOptionClick(e,n),e.preventDefault()}}findNextItem(e){let n=e.nextElementSibling;return n?Ft.hasClass(n,"p-disabled")||Ft.isHidden(n)||Ft.hasClass(n,"p-listbox-item-group")?this.findNextItem(n):n:null}findPrevItem(e){let n=e.previousElementSibling;return n?Ft.hasClass(n,"p-disabled")||Ft.isHidden(n)||Ft.hasClass(n,"p-listbox-item-group")?this.findPrevItem(n):n:null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(qt(oi),qt(Yo),qt(sA),qt(Np))},i.\u0275cmp=Rr({type:i,selectors:[["p-listbox"]],contentQueries:function(e,n,r){if(1&e&&(dl(r,XD,5),dl(r,A1,5),dl(r,hl,4)),2&e){let s;tr(s=nr())&&(n.headerFacet=s.first),tr(s=nr())&&(n.footerFacet=s.first),tr(s=nr())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Hr(GEe,5),Hr(WEe,5)),2&e){let r;tr(r=nr())&&(n.headerCheckboxViewChild=r.first),tr(r=nr())&&(n.filterViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",listStyle:"listStyle",listStyleClass:"listStyleClass",readonly:"readonly",disabled:"disabled",checkbox:"checkbox",filter:"filter",filterBy:"filterBy",filterMatchMode:"filterMatchMode",filterLocale:"filterLocale",metaKeySelection:"metaKeySelection",dataKey:"dataKey",showToggleAll:"showToggleAll",optionLabel:"optionLabel",optionValue:"optionValue",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",optionDisabled:"optionDisabled",ariaFilterLabel:"ariaFilterLabel",filterPlaceHolder:"filterPlaceHolder",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",group:"group",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onClick:"onClick",onDblClick:"onDblClick"},features:[Xo([ETe])],ngContentSelectors:STe,decls:12,vars:17,consts:[[3,"ngClass","ngStyle"],["class","p-listbox-header",4,"ngIf"],["role","listbox","aria-multiselectable","multiple",1,"p-listbox-list"],[4,"ngIf"],["itemslist",""],["class","p-listbox-empty-message",4,"ngIf"],["class","p-listbox-footer",4,"ngIf"],[1,"p-listbox-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-hidden-accessible"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],[1,"p-checkbox-box",3,"ngClass","click"],["headerchkbox",""],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-listbox-filter-container",4,"ngIf"],[1,"p-listbox-filter-container"],["type","text",1,"p-listbox-filter","p-inputtext","p-component",3,"value","disabled","input"],["filter",""],[1,"p-listbox-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-listbox-item-group"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown",4,"ngFor","ngForOf"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-listbox-empty-message"],["emptyFilter",""],["empty",""],[1,"p-listbox-footer"]],template:function(e,n){1&e&&(Xf(xTe),Xe(0,"div",0),ze(1,$Ee,3,1,"div",1),ze(2,eTe,5,3,"div",1),Xe(3,"div",0)(4,"ul",2),ze(5,sTe,2,1,"ng-container",3),ze(6,aTe,2,4,"ng-container",3),ze(7,gTe,1,1,"ng-template",null,4,Mc),ze(9,yTe,3,3,"li",5),ze(10,CTe,3,3,"li",5),Ke()(),ze(11,ATe,3,1,"div",6),Ke()),2&e&&(Yr(n.styleClass),de("ngClass",Li(15,ITe,n.disabled))("ngStyle",n.style),we(1),de("ngIf",n.headerFacet||n.headerTemplate),we(1),de("ngIf",n.checkbox&&n.multiple&&n.showToggleAll||n.filter),we(1),Yr(n.listStyleClass),de("ngClass","p-listbox-list-wrapper")("ngStyle",n.listStyle),we(2),de("ngIf",n.group),we(1),de("ngIf",!n.group),we(3),de("ngIf",n.hasFilter()&&n.isEmpty()),we(1),de("ngIf",!n.hasFilter()&&n.isEmpty()),we(1),de("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[Mo,mu,Fo,El,ea,Ju],styles:[".p-listbox-list-wrapper{overflow:auto}.p-listbox-list{list-style-type:none;margin:0;padding:0}.p-listbox-item{cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.p-listbox-header{display:flex;align-items:center}.p-listbox-filter-container{position:relative;flex:1 1 auto}.p-listbox-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-listbox-filter{width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),MTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za,yu,Za]}),i})();dC([Tl({transform:"{{transform}}",opacity:0}),Yc("{{transition}}")]),dC([Yc("{{transition}}",Tl({transform:"{{transform}}",opacity:0}))]);let OTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,yu]}),i})(),VTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za]}),i})(),HTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io,Za]}),i})(),jTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i}),i.\u0275inj=Vr({imports:[io]}),i})();const qTe=hA({id:"default",grid:!1,applyRules:!1,debug:!1,info:!1,full:!0,maxHeight:16384,maxWidth:16384},dA(oC("[SysPreference] Retrieve Preferences Success",{_as:"props",_p:void 0}),(i,{Preferences:t})=>t)),XTe=hA([],dA(PA,(i,{styles:t})=>t)),YTe=hA({id:"default",tags:[]},dA(b4,(i,{style:t})=>t));let KTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xr({type:i,bootstrap:[Exe]}),i.\u0275inj=Vr({providers:[rA,iv],imports:[a3,MQ.forRoot(),qAe,S1e,w3,io,dQ.forRoot({level:Dc.DEBUG}),zre,a4,W1e,fse,nEe,wae,j1,cv,p4,U2,q2,w3,uoe,moe,lEe,vEe,q1,kEe,xae,Nme,Mae,Ixe,W1,OEe,Kae,VEe,Aoe,sce,bue,p4,MTe,OTe,VTe,HTe,Due,jTe,Nue,ive,Oge,av,Vge,Hge,GZ.forRoot({graphs:UEe,graph:HEe,styles:XTe,style:YTe,preferences:qTe})]}),i})();(function Wj(){if(lN)throw new Error("Cannot enable prod mode after platform setup.");aN=!1})(),Jq().bootstrapModule(KTe).catch(i=>console.error(i))},3333:Ve=>{Ve.exports=function(W,Y){var L=Y.length;if(0!==L){var G=W.length;W.length+=L;for(var U=0;U<L;U++)W[G+U]=Y[U]}}},5343:(Ve,Ae)=>{"use strict";Ae.byteLength=function R(K){var z=D(K),Ce=z[1];return 3*(z[0]+Ce)/4-Ce},Ae.toByteArray=function ne(K){var z,V,ce=D(K),Ce=ce[0],Re=ce[1],ie=new L(function q(K,z,ce){return 3*(z+ce)/4-ce}(0,Ce,Re)),oe=0,N=Re>0?Ce-4:Ce;for(V=0;V<N;V+=4)z=Y[K.charCodeAt(V)]<<18|Y[K.charCodeAt(V+1)]<<12|Y[K.charCodeAt(V+2)]<<6|Y[K.charCodeAt(V+3)],ie[oe++]=z>>16&255,ie[oe++]=z>>8&255,ie[oe++]=255&z;return 2===Re&&(z=Y[K.charCodeAt(V)]<<2|Y[K.charCodeAt(V+1)]>>4,ie[oe++]=255&z),1===Re&&(z=Y[K.charCodeAt(V)]<<10|Y[K.charCodeAt(V+1)]<<4|Y[K.charCodeAt(V+2)]>>2,ie[oe++]=z>>8&255,ie[oe++]=255&z),ie},Ae.fromByteArray=function ee(K){for(var z,ce=K.length,Ce=ce%3,Re=[],oe=0,N=ce-Ce;oe<N;oe+=16383)Re.push(se(K,oe,oe+16383>N?N:oe+16383));return 1===Ce?Re.push(W[(z=K[ce-1])>>2]+W[z<<4&63]+"=="):2===Ce&&Re.push(W[(z=(K[ce-2]<<8)+K[ce-1])>>10]+W[z>>4&63]+W[z<<2&63]+"="),Re.join("")};for(var W=[],Y=[],L=typeof Uint8Array<"u"?Uint8Array:Array,G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=0,j=G.length;U<j;++U)W[U]=G[U],Y[G.charCodeAt(U)]=U;function D(K){var z=K.length;if(z%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ce=K.indexOf("=");return-1===ce&&(ce=z),[ce,ce===z?0:4-ce%4]}function te(K){return W[K>>18&63]+W[K>>12&63]+W[K>>6&63]+W[63&K]}function se(K,z,ce){for(var Re=[],ie=z;ie<ce;ie+=3)Re.push(te((K[ie]<<16&16711680)+(K[ie+1]<<8&65280)+(255&K[ie+2])));return Re.join("")}Y["-".charCodeAt(0)]=62,Y["_".charCodeAt(0)]=63},3172:(Ve,Ae,W)=>{"use strict";var Y=W(5343),L=W(8461),G="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ae.Buffer=R,Ae.SlowBuffer=function ie(We){return+We!=We&&(We=0),R.alloc(+We)},Ae.INSPECT_MAX_BYTES=50;var U=2147483647;function D(We){if(We>U)throw new RangeError('The value "'+We+'" is invalid for option "size"');var Ie=new Uint8Array(We);return Object.setPrototypeOf(Ie,R.prototype),Ie}function R(We,Ie,Me){if("number"==typeof We){if("string"==typeof Ie)throw new TypeError('The "string" argument must be of type string. Received type number');return se(We)}return q(We,Ie,Me)}function q(We,Ie,Me){if("string"==typeof We)return function ee(We,Ie){if(("string"!=typeof Ie||""===Ie)&&(Ie="utf8"),!R.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);var Me=0|oe(We,Ie),Et=D(Me),dn=Et.write(We,Ie);return dn!==Me&&(Et=Et.slice(0,dn)),Et}(We,Ie);if(ArrayBuffer.isView(We))return function z(We){if(pt(We,Uint8Array)){var Ie=new Uint8Array(We);return ce(Ie.buffer,Ie.byteOffset,Ie.byteLength)}return K(We)}(We);if(null==We)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof We);if(pt(We,ArrayBuffer)||We&&pt(We.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pt(We,SharedArrayBuffer)||We&&pt(We.buffer,SharedArrayBuffer)))return ce(We,Ie,Me);if("number"==typeof We)throw new TypeError('The "value" argument must not be of type number. Received type number');var Et=We.valueOf&&We.valueOf();if(null!=Et&&Et!==We)return R.from(Et,Ie,Me);var dn=function Ce(We){if(R.isBuffer(We)){var Ie=0|Re(We.length),Me=D(Ie);return 0===Me.length||We.copy(Me,0,0,Ie),Me}return void 0!==We.length?"number"!=typeof We.length||ht(We.length)?D(0):K(We):"Buffer"===We.type&&Array.isArray(We.data)?K(We.data):void 0}(We);if(dn)return dn;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof We[Symbol.toPrimitive])return R.from(We[Symbol.toPrimitive]("string"),Ie,Me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof We)}function ne(We){if("number"!=typeof We)throw new TypeError('"size" argument must be of type number');if(We<0)throw new RangeError('The value "'+We+'" is invalid for option "size"')}function se(We){return ne(We),D(We<0?0:0|Re(We))}function K(We){for(var Ie=We.length<0?0:0|Re(We.length),Me=D(Ie),Et=0;Et<Ie;Et+=1)Me[Et]=255&We[Et];return Me}function ce(We,Ie,Me){if(Ie<0||We.byteLength<Ie)throw new RangeError('"offset" is outside of buffer bounds');if(We.byteLength<Ie+(Me||0))throw new RangeError('"length" is outside of buffer bounds');var Et;return Et=void 0===Ie&&void 0===Me?new Uint8Array(We):void 0===Me?new Uint8Array(We,Ie):new Uint8Array(We,Ie,Me),Object.setPrototypeOf(Et,R.prototype),Et}function Re(We){if(We>=U)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+U.toString(16)+" bytes");return 0|We}function oe(We,Ie){if(R.isBuffer(We))return We.length;if(ArrayBuffer.isView(We)||pt(We,ArrayBuffer))return We.byteLength;if("string"!=typeof We)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof We);var Me=We.length,Et=arguments.length>2&&!0===arguments[2];if(!Et&&0===Me)return 0;for(var dn=!1;;)switch(Ie){case"ascii":case"latin1":case"binary":return Me;case"utf8":case"utf-8":return le(We).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Me;case"hex":return Me>>>1;case"base64":return Sn(We).length;default:if(dn)return Et?-1:le(We).length;Ie=(""+Ie).toLowerCase(),dn=!0}}function N(We,Ie,Me){var Et=!1;if((void 0===Ie||Ie<0)&&(Ie=0),Ie>this.length||((void 0===Me||Me>this.length)&&(Me=this.length),Me<=0)||(Me>>>=0)<=(Ie>>>=0))return"";for(We||(We="utf8");;)switch(We){case"hex":return Ot(this,Ie,Me);case"utf8":case"utf-8":return Ge(this,Ie,Me);case"ascii":return _t(this,Ie,Me);case"latin1":case"binary":return Fn(this,Ie,Me);case"base64":return It(this,Ie,Me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pn(this,Ie,Me);default:if(Et)throw new TypeError("Unknown encoding: "+We);We=(We+"").toLowerCase(),Et=!0}}function V(We,Ie,Me){var Et=We[Ie];We[Ie]=We[Me],We[Me]=Et}function J(We,Ie,Me,Et,dn){if(0===We.length)return-1;if("string"==typeof Me?(Et=Me,Me=0):Me>2147483647?Me=2147483647:Me<-2147483648&&(Me=-2147483648),ht(Me=+Me)&&(Me=dn?0:We.length-1),Me<0&&(Me=We.length+Me),Me>=We.length){if(dn)return-1;Me=We.length-1}else if(Me<0){if(!dn)return-1;Me=0}if("string"==typeof Ie&&(Ie=R.from(Ie,Et)),R.isBuffer(Ie))return 0===Ie.length?-1:fe(We,Ie,Me,Et,dn);if("number"==typeof Ie)return Ie&=255,"function"==typeof Uint8Array.prototype.indexOf?dn?Uint8Array.prototype.indexOf.call(We,Ie,Me):Uint8Array.prototype.lastIndexOf.call(We,Ie,Me):fe(We,[Ie],Me,Et,dn);throw new TypeError("val must be string, number or Buffer")}function fe(We,Ie,Me,Et,dn){var os,Xn=1,Jn=We.length,ms=Ie.length;if(void 0!==Et&&("ucs2"===(Et=String(Et).toLowerCase())||"ucs-2"===Et||"utf16le"===Et||"utf-16le"===Et)){if(We.length<2||Ie.length<2)return-1;Xn=2,Jn/=2,ms/=2,Me/=2}function Hs(Ha,fl){return 1===Xn?Ha[fl]:Ha.readUInt16BE(fl*Xn)}if(dn){var qs=-1;for(os=Me;os<Jn;os++)if(Hs(We,os)===Hs(Ie,-1===qs?0:os-qs)){if(-1===qs&&(qs=os),os-qs+1===ms)return qs*Xn}else-1!==qs&&(os-=os-qs),qs=-1}else for(Me+ms>Jn&&(Me=Jn-ms),os=Me;os>=0;os--){for(var Zi=!0,ra=0;ra<ms;ra++)if(Hs(We,os+ra)!==Hs(Ie,ra)){Zi=!1;break}if(Zi)return os}return-1}function ke(We,Ie,Me,Et){Me=Number(Me)||0;var dn=We.length-Me;Et?(Et=Number(Et))>dn&&(Et=dn):Et=dn;var Xn=Ie.length;Et>Xn/2&&(Et=Xn/2);for(var Jn=0;Jn<Et;++Jn){var ms=parseInt(Ie.substr(2*Jn,2),16);if(ht(ms))return Jn;We[Me+Jn]=ms}return Jn}function Pe(We,Ie,Me,Et){return Hn(le(Ie,We.length-Me),We,Me,Et)}function nt(We,Ie,Me,Et){return Hn(function ot(We){for(var Ie=[],Me=0;Me<We.length;++Me)Ie.push(255&We.charCodeAt(Me));return Ie}(Ie),We,Me,Et)}function Le(We,Ie,Me,Et){return Hn(Sn(Ie),We,Me,Et)}function at(We,Ie,Me,Et){return Hn(function Je(We,Ie){for(var Me,Et,Xn=[],Jn=0;Jn<We.length&&!((Ie-=2)<0);++Jn)Et=(Me=We.charCodeAt(Jn))>>8,Xn.push(Me%256),Xn.push(Et);return Xn}(Ie,We.length-Me),We,Me,Et)}function It(We,Ie,Me){return Y.fromByteArray(0===Ie&&Me===We.length?We:We.slice(Ie,Me))}function Ge(We,Ie,Me){Me=Math.min(We.length,Me);for(var Et=[],dn=Ie;dn<Me;){var Hs,os,qs,Zi,Xn=We[dn],Jn=null,ms=Xn>239?4:Xn>223?3:Xn>191?2:1;if(dn+ms<=Me)switch(ms){case 1:Xn<128&&(Jn=Xn);break;case 2:128==(192&(Hs=We[dn+1]))&&(Zi=(31&Xn)<<6|63&Hs)>127&&(Jn=Zi);break;case 3:os=We[dn+2],128==(192&(Hs=We[dn+1]))&&128==(192&os)&&(Zi=(15&Xn)<<12|(63&Hs)<<6|63&os)>2047&&(Zi<55296||Zi>57343)&&(Jn=Zi);break;case 4:os=We[dn+2],qs=We[dn+3],128==(192&(Hs=We[dn+1]))&&128==(192&os)&&128==(192&qs)&&(Zi=(15&Xn)<<18|(63&Hs)<<12|(63&os)<<6|63&qs)>65535&&Zi<1114112&&(Jn=Zi)}null===Jn?(Jn=65533,ms=1):Jn>65535&&(Et.push((Jn-=65536)>>>10&1023|55296),Jn=56320|1023&Jn),Et.push(Jn),dn+=ms}return function mt(We){var Ie=We.length;if(Ie<=4096)return String.fromCharCode.apply(String,We);for(var Me="",Et=0;Et<Ie;)Me+=String.fromCharCode.apply(String,We.slice(Et,Et+=4096));return Me}(Et)}function _t(We,Ie,Me){var Et="";Me=Math.min(We.length,Me);for(var dn=Ie;dn<Me;++dn)Et+=String.fromCharCode(127&We[dn]);return Et}function Fn(We,Ie,Me){var Et="";Me=Math.min(We.length,Me);for(var dn=Ie;dn<Me;++dn)Et+=String.fromCharCode(We[dn]);return Et}function Ot(We,Ie,Me){var Et=We.length;(!Ie||Ie<0)&&(Ie=0),(!Me||Me<0||Me>Et)&&(Me=Et);for(var dn="",Xn=Ie;Xn<Me;++Xn)dn+=Ht[We[Xn]];return dn}function Pn(We,Ie,Me){for(var Et=We.slice(Ie,Me),dn="",Xn=0;Xn<Et.length-1;Xn+=2)dn+=String.fromCharCode(Et[Xn]+256*Et[Xn+1]);return dn}function nn(We,Ie,Me){if(We%1!=0||We<0)throw new RangeError("offset is not uint");if(We+Ie>Me)throw new RangeError("Trying to access beyond buffer length")}function Ze(We,Ie,Me,Et,dn,Xn){if(!R.isBuffer(We))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ie>dn||Ie<Xn)throw new RangeError('"value" argument is out of bounds');if(Me+Et>We.length)throw new RangeError("Index out of range")}function Ct(We,Ie,Me,Et,dn,Xn){if(Me+Et>We.length)throw new RangeError("Index out of range");if(Me<0)throw new RangeError("Index out of range")}function cn(We,Ie,Me,Et,dn){return Ie=+Ie,Me>>>=0,dn||Ct(We,0,Me,4),L.write(We,Ie,Me,Et,23,4),Me+4}function wn(We,Ie,Me,Et,dn){return Ie=+Ie,Me>>>=0,dn||Ct(We,0,Me,8),L.write(We,Ie,Me,Et,52,8),Me+8}Ae.kMaxLength=U,!(R.TYPED_ARRAY_SUPPORT=function j(){try{var We=new Uint8Array(1),Ie={foo:function(){return 42}};return Object.setPrototypeOf(Ie,Uint8Array.prototype),Object.setPrototypeOf(We,Ie),42===We.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(R.prototype,"parent",{enumerable:!0,get:function(){if(R.isBuffer(this))return this.buffer}}),Object.defineProperty(R.prototype,"offset",{enumerable:!0,get:function(){if(R.isBuffer(this))return this.byteOffset}}),R.poolSize=8192,R.from=function(We,Ie,Me){return q(We,Ie,Me)},Object.setPrototypeOf(R.prototype,Uint8Array.prototype),Object.setPrototypeOf(R,Uint8Array),R.alloc=function(We,Ie,Me){return function te(We,Ie,Me){return ne(We),We<=0?D(We):void 0!==Ie?"string"==typeof Me?D(We).fill(Ie,Me):D(We).fill(Ie):D(We)}(We,Ie,Me)},R.allocUnsafe=function(We){return se(We)},R.allocUnsafeSlow=function(We){return se(We)},R.isBuffer=function(Ie){return null!=Ie&&!0===Ie._isBuffer&&Ie!==R.prototype},R.compare=function(Ie,Me){if(pt(Ie,Uint8Array)&&(Ie=R.from(Ie,Ie.offset,Ie.byteLength)),pt(Me,Uint8Array)&&(Me=R.from(Me,Me.offset,Me.byteLength)),!R.isBuffer(Ie)||!R.isBuffer(Me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Ie===Me)return 0;for(var Et=Ie.length,dn=Me.length,Xn=0,Jn=Math.min(Et,dn);Xn<Jn;++Xn)if(Ie[Xn]!==Me[Xn]){Et=Ie[Xn],dn=Me[Xn];break}return Et<dn?-1:dn<Et?1:0},R.isEncoding=function(Ie){switch(String(Ie).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},R.concat=function(Ie,Me){if(!Array.isArray(Ie))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Ie.length)return R.alloc(0);var Et;if(void 0===Me)for(Me=0,Et=0;Et<Ie.length;++Et)Me+=Ie[Et].length;var dn=R.allocUnsafe(Me),Xn=0;for(Et=0;Et<Ie.length;++Et){var Jn=Ie[Et];if(pt(Jn,Uint8Array))Xn+Jn.length>dn.length?R.from(Jn).copy(dn,Xn):Uint8Array.prototype.set.call(dn,Jn,Xn);else{if(!R.isBuffer(Jn))throw new TypeError('"list" argument must be an Array of Buffers');Jn.copy(dn,Xn)}Xn+=Jn.length}return dn},R.byteLength=oe,R.prototype._isBuffer=!0,R.prototype.swap16=function(){var Ie=this.length;if(Ie%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Me=0;Me<Ie;Me+=2)V(this,Me,Me+1);return this},R.prototype.swap32=function(){var Ie=this.length;if(Ie%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Me=0;Me<Ie;Me+=4)V(this,Me,Me+3),V(this,Me+1,Me+2);return this},R.prototype.swap64=function(){var Ie=this.length;if(Ie%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Me=0;Me<Ie;Me+=8)V(this,Me,Me+7),V(this,Me+1,Me+6),V(this,Me+2,Me+5),V(this,Me+3,Me+4);return this},R.prototype.toLocaleString=R.prototype.toString=function(){var Ie=this.length;return 0===Ie?"":0===arguments.length?Ge(this,0,Ie):N.apply(this,arguments)},R.prototype.equals=function(Ie){if(!R.isBuffer(Ie))throw new TypeError("Argument must be a Buffer");return this===Ie||0===R.compare(this,Ie)},R.prototype.inspect=function(){var Ie="",Me=Ae.INSPECT_MAX_BYTES;return Ie=this.toString("hex",0,Me).replace(/(.{2})/g,"$1 ").trim(),this.length>Me&&(Ie+=" ... "),"<Buffer "+Ie+">"},G&&(R.prototype[G]=R.prototype.inspect),R.prototype.compare=function(Ie,Me,Et,dn,Xn){if(pt(Ie,Uint8Array)&&(Ie=R.from(Ie,Ie.offset,Ie.byteLength)),!R.isBuffer(Ie))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Ie);if(void 0===Me&&(Me=0),void 0===Et&&(Et=Ie?Ie.length:0),void 0===dn&&(dn=0),void 0===Xn&&(Xn=this.length),Me<0||Et>Ie.length||dn<0||Xn>this.length)throw new RangeError("out of range index");if(dn>=Xn&&Me>=Et)return 0;if(dn>=Xn)return-1;if(Me>=Et)return 1;if(this===Ie)return 0;for(var Jn=(Xn>>>=0)-(dn>>>=0),ms=(Et>>>=0)-(Me>>>=0),Hs=Math.min(Jn,ms),os=this.slice(dn,Xn),qs=Ie.slice(Me,Et),Zi=0;Zi<Hs;++Zi)if(os[Zi]!==qs[Zi]){Jn=os[Zi],ms=qs[Zi];break}return Jn<ms?-1:ms<Jn?1:0},R.prototype.includes=function(Ie,Me,Et){return-1!==this.indexOf(Ie,Me,Et)},R.prototype.indexOf=function(Ie,Me,Et){return J(this,Ie,Me,Et,!0)},R.prototype.lastIndexOf=function(Ie,Me,Et){return J(this,Ie,Me,Et,!1)},R.prototype.write=function(Ie,Me,Et,dn){if(void 0===Me)dn="utf8",Et=this.length,Me=0;else if(void 0===Et&&"string"==typeof Me)dn=Me,Et=this.length,Me=0;else{if(!isFinite(Me))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Me>>>=0,isFinite(Et)?(Et>>>=0,void 0===dn&&(dn="utf8")):(dn=Et,Et=void 0)}var Xn=this.length-Me;if((void 0===Et||Et>Xn)&&(Et=Xn),Ie.length>0&&(Et<0||Me<0)||Me>this.length)throw new RangeError("Attempt to write outside buffer bounds");dn||(dn="utf8");for(var Jn=!1;;)switch(dn){case"hex":return ke(this,Ie,Me,Et);case"utf8":case"utf-8":return Pe(this,Ie,Me,Et);case"ascii":case"latin1":case"binary":return nt(this,Ie,Me,Et);case"base64":return Le(this,Ie,Me,Et);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,Ie,Me,Et);default:if(Jn)throw new TypeError("Unknown encoding: "+dn);dn=(""+dn).toLowerCase(),Jn=!0}},R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},R.prototype.slice=function(Ie,Me){var Et=this.length;(Ie=~~Ie)<0?(Ie+=Et)<0&&(Ie=0):Ie>Et&&(Ie=Et),(Me=void 0===Me?Et:~~Me)<0?(Me+=Et)<0&&(Me=0):Me>Et&&(Me=Et),Me<Ie&&(Me=Ie);var dn=this.subarray(Ie,Me);return Object.setPrototypeOf(dn,R.prototype),dn},R.prototype.readUintLE=R.prototype.readUIntLE=function(Ie,Me,Et){Ie>>>=0,Me>>>=0,Et||nn(Ie,Me,this.length);for(var dn=this[Ie],Xn=1,Jn=0;++Jn<Me&&(Xn*=256);)dn+=this[Ie+Jn]*Xn;return dn},R.prototype.readUintBE=R.prototype.readUIntBE=function(Ie,Me,Et){Ie>>>=0,Me>>>=0,Et||nn(Ie,Me,this.length);for(var dn=this[Ie+--Me],Xn=1;Me>0&&(Xn*=256);)dn+=this[Ie+--Me]*Xn;return dn},R.prototype.readUint8=R.prototype.readUInt8=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,1,this.length),this[Ie]},R.prototype.readUint16LE=R.prototype.readUInt16LE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,2,this.length),this[Ie]|this[Ie+1]<<8},R.prototype.readUint16BE=R.prototype.readUInt16BE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,2,this.length),this[Ie]<<8|this[Ie+1]},R.prototype.readUint32LE=R.prototype.readUInt32LE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,4,this.length),(this[Ie]|this[Ie+1]<<8|this[Ie+2]<<16)+16777216*this[Ie+3]},R.prototype.readUint32BE=R.prototype.readUInt32BE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,4,this.length),16777216*this[Ie]+(this[Ie+1]<<16|this[Ie+2]<<8|this[Ie+3])},R.prototype.readIntLE=function(Ie,Me,Et){Ie>>>=0,Me>>>=0,Et||nn(Ie,Me,this.length);for(var dn=this[Ie],Xn=1,Jn=0;++Jn<Me&&(Xn*=256);)dn+=this[Ie+Jn]*Xn;return dn>=(Xn*=128)&&(dn-=Math.pow(2,8*Me)),dn},R.prototype.readIntBE=function(Ie,Me,Et){Ie>>>=0,Me>>>=0,Et||nn(Ie,Me,this.length);for(var dn=Me,Xn=1,Jn=this[Ie+--dn];dn>0&&(Xn*=256);)Jn+=this[Ie+--dn]*Xn;return Jn>=(Xn*=128)&&(Jn-=Math.pow(2,8*Me)),Jn},R.prototype.readInt8=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,1,this.length),128&this[Ie]?-1*(255-this[Ie]+1):this[Ie]},R.prototype.readInt16LE=function(Ie,Me){Ie>>>=0,Me||nn(Ie,2,this.length);var Et=this[Ie]|this[Ie+1]<<8;return 32768&Et?4294901760|Et:Et},R.prototype.readInt16BE=function(Ie,Me){Ie>>>=0,Me||nn(Ie,2,this.length);var Et=this[Ie+1]|this[Ie]<<8;return 32768&Et?4294901760|Et:Et},R.prototype.readInt32LE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,4,this.length),this[Ie]|this[Ie+1]<<8|this[Ie+2]<<16|this[Ie+3]<<24},R.prototype.readInt32BE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,4,this.length),this[Ie]<<24|this[Ie+1]<<16|this[Ie+2]<<8|this[Ie+3]},R.prototype.readFloatLE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,4,this.length),L.read(this,Ie,!0,23,4)},R.prototype.readFloatBE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,4,this.length),L.read(this,Ie,!1,23,4)},R.prototype.readDoubleLE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,8,this.length),L.read(this,Ie,!0,52,8)},R.prototype.readDoubleBE=function(Ie,Me){return Ie>>>=0,Me||nn(Ie,8,this.length),L.read(this,Ie,!1,52,8)},R.prototype.writeUintLE=R.prototype.writeUIntLE=function(Ie,Me,Et,dn){Ie=+Ie,Me>>>=0,Et>>>=0,dn||Ze(this,Ie,Me,Et,Math.pow(2,8*Et)-1,0);var Jn=1,ms=0;for(this[Me]=255&Ie;++ms<Et&&(Jn*=256);)this[Me+ms]=Ie/Jn&255;return Me+Et},R.prototype.writeUintBE=R.prototype.writeUIntBE=function(Ie,Me,Et,dn){Ie=+Ie,Me>>>=0,Et>>>=0,dn||Ze(this,Ie,Me,Et,Math.pow(2,8*Et)-1,0);var Jn=Et-1,ms=1;for(this[Me+Jn]=255&Ie;--Jn>=0&&(ms*=256);)this[Me+Jn]=Ie/ms&255;return Me+Et},R.prototype.writeUint8=R.prototype.writeUInt8=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,1,255,0),this[Me]=255&Ie,Me+1},R.prototype.writeUint16LE=R.prototype.writeUInt16LE=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,2,65535,0),this[Me]=255&Ie,this[Me+1]=Ie>>>8,Me+2},R.prototype.writeUint16BE=R.prototype.writeUInt16BE=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,2,65535,0),this[Me]=Ie>>>8,this[Me+1]=255&Ie,Me+2},R.prototype.writeUint32LE=R.prototype.writeUInt32LE=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,4,4294967295,0),this[Me+3]=Ie>>>24,this[Me+2]=Ie>>>16,this[Me+1]=Ie>>>8,this[Me]=255&Ie,Me+4},R.prototype.writeUint32BE=R.prototype.writeUInt32BE=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,4,4294967295,0),this[Me]=Ie>>>24,this[Me+1]=Ie>>>16,this[Me+2]=Ie>>>8,this[Me+3]=255&Ie,Me+4},R.prototype.writeIntLE=function(Ie,Me,Et,dn){if(Ie=+Ie,Me>>>=0,!dn){var Xn=Math.pow(2,8*Et-1);Ze(this,Ie,Me,Et,Xn-1,-Xn)}var Jn=0,ms=1,Hs=0;for(this[Me]=255&Ie;++Jn<Et&&(ms*=256);)Ie<0&&0===Hs&&0!==this[Me+Jn-1]&&(Hs=1),this[Me+Jn]=(Ie/ms>>0)-Hs&255;return Me+Et},R.prototype.writeIntBE=function(Ie,Me,Et,dn){if(Ie=+Ie,Me>>>=0,!dn){var Xn=Math.pow(2,8*Et-1);Ze(this,Ie,Me,Et,Xn-1,-Xn)}var Jn=Et-1,ms=1,Hs=0;for(this[Me+Jn]=255&Ie;--Jn>=0&&(ms*=256);)Ie<0&&0===Hs&&0!==this[Me+Jn+1]&&(Hs=1),this[Me+Jn]=(Ie/ms>>0)-Hs&255;return Me+Et},R.prototype.writeInt8=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,1,127,-128),Ie<0&&(Ie=255+Ie+1),this[Me]=255&Ie,Me+1},R.prototype.writeInt16LE=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,2,32767,-32768),this[Me]=255&Ie,this[Me+1]=Ie>>>8,Me+2},R.prototype.writeInt16BE=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,2,32767,-32768),this[Me]=Ie>>>8,this[Me+1]=255&Ie,Me+2},R.prototype.writeInt32LE=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,4,2147483647,-2147483648),this[Me]=255&Ie,this[Me+1]=Ie>>>8,this[Me+2]=Ie>>>16,this[Me+3]=Ie>>>24,Me+4},R.prototype.writeInt32BE=function(Ie,Me,Et){return Ie=+Ie,Me>>>=0,Et||Ze(this,Ie,Me,4,2147483647,-2147483648),Ie<0&&(Ie=4294967295+Ie+1),this[Me]=Ie>>>24,this[Me+1]=Ie>>>16,this[Me+2]=Ie>>>8,this[Me+3]=255&Ie,Me+4},R.prototype.writeFloatLE=function(Ie,Me,Et){return cn(this,Ie,Me,!0,Et)},R.prototype.writeFloatBE=function(Ie,Me,Et){return cn(this,Ie,Me,!1,Et)},R.prototype.writeDoubleLE=function(Ie,Me,Et){return wn(this,Ie,Me,!0,Et)},R.prototype.writeDoubleBE=function(Ie,Me,Et){return wn(this,Ie,Me,!1,Et)},R.prototype.copy=function(Ie,Me,Et,dn){if(!R.isBuffer(Ie))throw new TypeError("argument should be a Buffer");if(Et||(Et=0),!dn&&0!==dn&&(dn=this.length),Me>=Ie.length&&(Me=Ie.length),Me||(Me=0),dn>0&&dn<Et&&(dn=Et),dn===Et||0===Ie.length||0===this.length)return 0;if(Me<0)throw new RangeError("targetStart out of bounds");if(Et<0||Et>=this.length)throw new RangeError("Index out of range");if(dn<0)throw new RangeError("sourceEnd out of bounds");dn>this.length&&(dn=this.length),Ie.length-Me<dn-Et&&(dn=Ie.length-Me+Et);var Xn=dn-Et;return this===Ie&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(Me,Et,dn):Uint8Array.prototype.set.call(Ie,this.subarray(Et,dn),Me),Xn},R.prototype.fill=function(Ie,Me,Et,dn){if("string"==typeof Ie){if("string"==typeof Me?(dn=Me,Me=0,Et=this.length):"string"==typeof Et&&(dn=Et,Et=this.length),void 0!==dn&&"string"!=typeof dn)throw new TypeError("encoding must be a string");if("string"==typeof dn&&!R.isEncoding(dn))throw new TypeError("Unknown encoding: "+dn);if(1===Ie.length){var Xn=Ie.charCodeAt(0);("utf8"===dn&&Xn<128||"latin1"===dn)&&(Ie=Xn)}}else"number"==typeof Ie?Ie&=255:"boolean"==typeof Ie&&(Ie=Number(Ie));if(Me<0||this.length<Me||this.length<Et)throw new RangeError("Out of range index");if(Et<=Me)return this;var Jn;if(Me>>>=0,Et=void 0===Et?this.length:Et>>>0,Ie||(Ie=0),"number"==typeof Ie)for(Jn=Me;Jn<Et;++Jn)this[Jn]=Ie;else{var ms=R.isBuffer(Ie)?Ie:R.from(Ie,dn),Hs=ms.length;if(0===Hs)throw new TypeError('The value "'+Ie+'" is invalid for argument "value"');for(Jn=0;Jn<Et-Me;++Jn)this[Jn+Me]=ms[Jn%Hs]}return this};var An=/[^+/0-9A-Za-z-_]/g;function le(We,Ie){Ie=Ie||1/0;for(var Me,Et=We.length,dn=null,Xn=[],Jn=0;Jn<Et;++Jn){if((Me=We.charCodeAt(Jn))>55295&&Me<57344){if(!dn){if(Me>56319){(Ie-=3)>-1&&Xn.push(239,191,189);continue}if(Jn+1===Et){(Ie-=3)>-1&&Xn.push(239,191,189);continue}dn=Me;continue}if(Me<56320){(Ie-=3)>-1&&Xn.push(239,191,189),dn=Me;continue}Me=65536+(dn-55296<<10|Me-56320)}else dn&&(Ie-=3)>-1&&Xn.push(239,191,189);if(dn=null,Me<128){if((Ie-=1)<0)break;Xn.push(Me)}else if(Me<2048){if((Ie-=2)<0)break;Xn.push(Me>>6|192,63&Me|128)}else if(Me<65536){if((Ie-=3)<0)break;Xn.push(Me>>12|224,Me>>6&63|128,63&Me|128)}else{if(!(Me<1114112))throw new Error("Invalid code point");if((Ie-=4)<0)break;Xn.push(Me>>18|240,Me>>12&63|128,Me>>6&63|128,63&Me|128)}}return Xn}function Sn(We){return Y.toByteArray(function $e(We){if((We=(We=We.split("=")[0]).trim().replace(An,"")).length<2)return"";for(;We.length%4!=0;)We+="=";return We}(We))}function Hn(We,Ie,Me,Et){for(var dn=0;dn<Et&&!(dn+Me>=Ie.length||dn>=We.length);++dn)Ie[dn+Me]=We[dn];return dn}function pt(We,Ie){return We instanceof Ie||null!=We&&null!=We.constructor&&null!=We.constructor.name&&We.constructor.name===Ie.name}function ht(We){return We!=We}var Ht=function(){for(var We="0123456789abcdef",Ie=new Array(256),Me=0;Me<16;++Me)for(var Et=16*Me,dn=0;dn<16;++dn)Ie[Et+dn]=We[Me]+We[dn];return Ie}()},4147:function(Ve){Ve.exports=function(Ae){var W={};function Y(L){if(W[L])return W[L].exports;var G=W[L]={i:L,l:!1,exports:{}};return Ae[L].call(G.exports,G,G.exports,Y),G.l=!0,G.exports}return Y.m=Ae,Y.c=W,Y.i=function(L){return L},Y.d=function(L,G,U){Y.o(L,G)||Object.defineProperty(L,G,{configurable:!1,enumerable:!0,get:U})},Y.n=function(L){var G=L&&L.__esModule?function(){return L.default}:function(){return L};return Y.d(G,"a",G),G},Y.o=function(L,G){return Object.prototype.hasOwnProperty.call(L,G)},Y.p="",Y(Y.s=3)}([function(Ae,W,Y){"use strict";var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Pn){return typeof Pn}:function(Pn){return Pn&&"function"==typeof Symbol&&Pn.constructor===Symbol&&Pn!==Symbol.prototype?"symbol":typeof Pn},G=Y(2),U=L(""),j=L({}),D=L(function(){}),R=function(nn){return(typeof nn>"u"?"undefined":L(nn))===j},ne=function(nn){return(typeof nn>"u"?"undefined":L(nn))===D},te=function(nn){return R(nn)&&ne(nn.collection)},se=Y(1),ee=function(nn){return null!=nn&&!nn.removed()},K=function(nn,Ze){return(K=null!=nn.has?function(cn,wn){return cn.has(wn)}:function(cn,wn){return cn.intersection(wn).length>0})(nn,Ze)},z=function(nn){if(function(nn){return(typeof nn>"u"?"undefined":L(nn))===U}(nn))return function(Ze){return Ze.is(nn)};if(ne(nn))return nn;if(te(nn))return function(Ze){return K(nn,Ze)};throw new Error("Can not create match function for spec",nn)},Ce=function(nn,Ze,Ct,cn,wn){var An=function(nn,Ze,Ct,cn){var wn={cy:nn,events:Ze,selector:Ct||"node",fn:cn};return nn.on(wn.events,wn.selector,wn.fn),wn}(Ze,Ct,cn,wn);(nn.bindings=nn.bindings||[]).push(An)},Re=function(nn){nn.bindings.forEach(function(cn){cn.cy.off(cn.events,cn.selector,cn.fn)}),nn.bindings=[]},oe=function(nn){return function(Ze){var Ct=Ze.position(),cn=nn.delta;if(null!=nn.delta&&!Ze.same(nn.grabbedNode)&&!Ze.grabbed())return{x:Ct.x+cn.x,y:Ct.y+cn.y}}},N=function(nn){return function(Ze){for(var Ct=Ze.neighborhood(),cn={x:0,y:0},wn=0,An=0;An<Ct.length;An++){var $e=Ct[An];if($e.isNode()&&!nn($e)){var le=$e.position();cn.x+=le.x,cn.y+=le.y,wn++}}if(!(wn<2))return cn.x/=wn,cn.y/=wn,cn}},V=function(nn,Ze,Ct){return nn<Ze?Ze:nn>Ct?Ct:nn},J=function(nn,Ze){var Ct=nn.position();return{x:V(Ct.x,Ze.x1,Ze.x2),y:V(Ct.y,Ze.y1,Ze.y2)}},fe=function(nn){return function(Ze){return J(Ze,nn)}},Pe=function(nn){return function(Ze){return function(nn,Ze){var Ct=nn.position(),cn=Ct.x,wn=Ct.y,An=Ze.x1,$e=Ze.y1,le=Ze.x2,ot=Ze.y2,Hn=Math.abs;if(An<=cn&&cn<=le&&$e<=wn&&wn<=ot){var pt=Hn(An-cn),ht=Hn(le-cn),Ht=Hn($e-wn),We=Hn(ot-wn),Ie=Math.min(pt,ht,Ht,We);return Ie===pt?{x:An,y:wn}:Ie===ht?{x:le,y:wn}:Ie===Ht?{x:cn,y:$e}:{x:cn,y:ot}}return{x:cn,y:wn}}(Ze,nn)}},nt=function(nn){return function(Ze){var Ct=nn.extent(),cn=Ze.outerWidth(),wn=Ze.outerHeight();return J(Ze,{x1:Ct.x1+cn/2,x2:Ct.x2-cn/2,y1:Ct.y1+wn/2,y2:Ct.y2-wn/2})}},Ge=function(nn,Ze){return"mean"===Ze.reposition?function(nn){return function(Ze,Ct){var cn=function(An){return nn.matches(An)&&An.neighborhood().length>2&&!An.grabbed()};Ce(nn,Ct,"position","node",function(){(this.neighborhood().some(cn)||nn.meanOnSelfPosition(this)&&cn(this))&&Ze(Ct,[nn])}),Ce(nn,Ct,"add remove","edge",function(){[Ct.getElementById(this.data("source")),Ct.getElementById(this.data("target"))].some(cn)&&Ze(Ct,[nn])})}}(Ze):"drag"===Ze.reposition?function(nn){return function(Ze,Ct){Ce(nn,Ct,"grab","node",function(){if(nn.dragWithMatches(this)){var wn=this.position();nn.grabbedNode=this,nn.p1={x:wn.x,y:wn.y},nn.delta={x:0,y:0}}}),Ce(nn,Ct,"drag","node",function(){if(this.same(nn.grabbedNode)){var wn=nn.delta,An=nn.p1,$e=this.position(),le={x:$e.x,y:$e.y};wn.x=le.x-An.x,wn.y=le.y-An.y,nn.p1=le,Ze(Ct,[nn])}}),Ce(nn,Ct,"free","node",function(){nn.grabbedNode=null,nn.delta=null,nn.p1=null})}}(Ze):R(Ze.reposition)||"matching"===Ze.when||"viewport"===Ze.reposition?function(nn){return function(Ze,Ct){Ce(nn,Ct,"position","node",function(){nn.matches(this)&&Ze(Ct,[nn])})}}(Ze):Ze.when},yt=function(nn,Ze,Ct){var cn=se({},G,Ct);if(cn.getNewPos=function(nn,Ze){var Ct=nn.reposition;return"mean"===Ct?N(z(nn.meanIgnores)):"viewport"===Ct?nt(Ze):"drag"===Ct?oe(nn):R(Ct)?null==Ct.type||"inside"==Ct.type?fe(Ct):"outside"==Ct.type?Pe(Ct):void 0:Ct}(cn,nn),cn.listener=Ge(0,cn),te(cn.nodesMatching))cn.nodes=cn.nodesMatching.slice(),cn.matches=function($e){return ee($e)&&K(cn.nodes,$e)};else{var An=z(cn.nodesMatching);cn.matches=function($e){return ee($e)&&An($e)}}return null!=cn.dragWith&&(cn.dragWithMatches=z(cn.dragWith)),cn.listener(function(){Fn(nn,[cn])},nn),cn.enabled=!0,Ze.rules.push(cn),cn},_t=function(nn,Ze){nn.removeListener("add","node",Ze.onAddNode),nn.removeListener("remove","node",Ze.onRmNode)},Fn=function(nn,Ze){var Ct=nn.scratch().automove;Ze=Ze??Ct.rules,nn.batch(function(){for(var cn=0;cn<Ze.length;cn++){var wn=Ze[cn];if(wn.destroyed||!wn.enabled)break;for(var An=wn.nodes||Ct.nodes,$e=An.length-1;$e>=0;$e--){var le=An[$e];if(le.removed())An.unmerge(le);else if(wn.matches(le)){var ot=le.position(),Je=wn.getNewPos(le);null!=Je&&(ot.x!==Je.x||ot.y!==Je.y)&&(le.position(Je),le.trigger("automove",[wn]))}}}})};Ae.exports=function(nn){var Ze=this,Ct=Ze.scratch().automove=Ze.scratch().automove||{rules:[]};if(0===Ct.rules.length&&(Ct.nodes=Ze.nodes().slice(),function(nn,Ze){Ze.onAddNode=function(Ct){Ze.nodes.merge(Ct.target)},Ze.onRmNode=function(Ct){Ze.nodes.unmerge(Ct.target)},nn.on("add","node",Ze.onAddNode),nn.on("remove","node",Ze.onRmNode)}(Ze,Ct)),"destroy"===nn)return Ct.rules.forEach(function(wn){Re(wn),wn.destroyed=!0}),Ct.rules.splice(0,Ct.rules.length),void _t(Ze,Ct);var cn=yt(Ze,Ct,nn);return Fn(Ze,[cn]),{apply:function(){Fn(Ze,[cn])},disable:function(){this.toggle(!1)},enable:function(){this.toggle(!0)},enabled:function(){return cn.enabled},toggle:function(An){cn.enabled=void 0!==An?An:!cn.enabled,cn.enabled&&Fn(Ze,[cn])},destroy:function(){var An=Ct.rules;return Re(cn),cn.destroyed=!0,An.splice(An.indexOf(cn),1),0===An.length&&_t(Ze,Ct),this}}}},function(Ae,W,Y){"use strict";Ae.exports=null!=Object.assign?Object.assign.bind(Object):function(L){for(var G=arguments.length,U=Array(G>1?G-1:0),j=1;j<G;j++)U[j-1]=arguments[j];return U.forEach(function(D){Object.keys(D).forEach(function(R){return L[R]=D[R]})}),L}},function(Ae,W,Y){"use strict";Ae.exports={nodesMatching:function(U){return!1},reposition:"mean",when:void 0,meanIgnores:function(U){return!1},meanOnSelfPosition:function(U){return!0},dragWith:function(U){return!1}}},function(Ae,W,Y){"use strict";var L=Y(0),G=function(j){!j||j("core","automove",L)};typeof cytoscape<"u"&&G(cytoscape),Ae.exports=G}])},2960:function(Ve,Ae,W){var Y,L;Ve.exports=(Y=W(8132),L=W(8078),function(G){var U={};function j(D){if(U[D])return U[D].exports;var R=U[D]={i:D,l:!1,exports:{}};return G[D].call(R.exports,R,R.exports,j),R.l=!0,R.exports}return j.m=G,j.c=U,j.i=function(D){return D},j.d=function(D,R,q){j.o(D,R)||Object.defineProperty(D,R,{configurable:!1,enumerable:!0,get:q})},j.n=function(D){var R=D&&D.__esModule?function(){return D.default}:function(){return D};return j.d(R,"a",R),R},j.o=function(D,R){return Object.prototype.hasOwnProperty.call(D,R)},j.p="",j(j.s=12)}([function(G,U,j){"use strict";G.exports=null!=Object.assign?Object.assign.bind(Object):function(D){for(var R=arguments.length,q=Array(R>1?R-1:0),ne=1;ne<R;ne++)q[ne-1]=arguments[ne];return q.filter(function(te){return null!=te}).forEach(function(te){Object.keys(te).forEach(function(se){return D[se]=te[se]})}),D}},function(G,U,j){"use strict";var D=j(10),R=j(0);G.exports=function(q){return new D(R({cy:this},q))}},function(G,U,j){"use strict";G.exports={disableGestures:function D(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var ne=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,ne),window.addEventListener("touchmove",this.preventDefault,ne),window.addEventListener("wheel",this.preventDefault,ne)}return this},resetGestures:function R(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var ne=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,ne),window.removeEventListener("touchmove",this.preventDefault,ne),window.removeEventListener("wheel",this.preventDefault,ne)}return this},saveGestureState:function q(){var ne=this.cy;return this.lastPanningEnabled=ne.panningEnabled(),this.lastZoomingEnabled=ne.zoomingEnabled(),this.lastBoxSelectionEnabled=ne.boxSelectionEnabled(),this}}},function(G,U,j){"use strict";G.exports={addCytoscapeListeners:function D(){var R=this,q=this.cy,ne=this.options;return this.addListener(q,"drag",function(){return R.grabbingNode=!0}),this.addListener(q,"free",function(){return R.grabbingNode=!1}),this.addListener(q,"tapstart","node",function(te){R.drawMode&&R.start(te.target)}),this.addListener(q,"tapdrag",function(te){R.update(te.position)}),this.addListener(q,"tapdragover","node",function(te){ne.snap||R.preview(te.target)}),this.addListener(q,"tapdragout","node",function(te){ne.snap||R.unpreview(te.target)}),this.addListener(q,"tapend",function(){R.stop()}),this}}},function(G,U,j){"use strict";G.exports={canConnect:function(q,ne){return!q.same(ne)},edgeParams:function(q,ne){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0}},function(G,U,j){"use strict";G.exports={toggleDrawMode:function D(ne){var te=this.cy;return this.drawMode=ne??!this.drawMode,this.drawMode?(this.prevUngrabifyState=te.autoungrabify(),te.autoungrabify(!0),this.emit("drawon")):(te.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function R(){return this.toggleDrawMode(!0)},disableDrawMode:function q(){return this.toggleDrawMode(!1)}}},function(G,U,j){"use strict";var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ce){return typeof Ce}:function(Ce){return Ce&&"function"==typeof Symbol&&Ce.constructor===Symbol&&Ce!==Symbol.prototype?"symbol":typeof Ce},R=j(0);function te(Ce,Re,ie){var oe={};return R(oe,Re,Ce),R(oe.data,Re.data,Ce.data),oe.classes=function(Re){return(typeof Re>"u"?"undefined":D(Re))===D("")}(Re.classes)?Re.classes+" "+ie:function(Re){return(typeof Re>"u"?"undefined":D(Re))===D([])&&null!=Re.length}(Re.classes)?Re.classes.join(" ")+" "+ie:ie,oe}G.exports={makeEdges:function se(){var Ce=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Re=this.cy,oe=this.presumptiveTargets,N=this.previewEles,V=this.active,J=this.sourceNode,fe=this.targetNode,ke=Ce?"eh-preview":"",Pe=Re.collection(),nt=this.canConnect(fe);if(V&&nt){if(!fe||0===fe.size())return N.remove(),void this.emit("cancel",this.mp(),J,oe);if(!Ce)return N.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),J,fe,N);var Le=Re.add(te({group:"edges",data:{source:J.id(),target:fe.id()}},this.edgeParams(fe),ke));return Pe=Pe.merge(Le),Ce?(this.previewEles=Pe,Pe.style("events","no")):(Pe.style("events",""),this.emit("complete",this.mp(),J,fe,Pe)),this}},makePreview:function ee(){return this.makeEdges(!0),this},removePreview:function z(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function K(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function ce(){var Ce=this,Re=this.sourceNode,ie=this.ghostNode,oe=this.cy,J=this.mx,fe=this.my,ke=void 0,Pe=void 0;if(Re)return(!ie||0===ie.length||ie.removed())&&(Pe=this.ghostEles=oe.collection(),oe.batch(function(){(ie=Ce.ghostNode=oe.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var nt={};(ke=oe.add(R({},nt,{group:"edges",data:R({},nt.data,{source:Re.id(),target:ie.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})}),Pe.merge(ie).merge(ke)),ie.position({x:J,y:fe}),this}}},function(G,U,j){"use strict";G.exports={disableEdgeEvents:function D(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function R(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(G,U,j){"use strict";G.exports={enable:function D(){return this.enabled=!0,this.emit("enable"),this},disable:function R(){return this.enabled=!1,this.emit("disable"),this}}},function(G,U,j){"use strict";var D=j(13),R=Math.sqrt(2);G.exports={start:function se(Re){var ie=this;if(this.canStartOn(Re)){this.active=!0,this.sourceNode=Re,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var oe=function(V){return V.id()};this.canConnect=D(function(N){return ie.options.canConnect(ie.sourceNode,N)},oe),this.edgeParams=D(function(N){return ie.options.edgeParams(ie.sourceNode,N)},oe),this.emit("start",this.hp(),Re)}},update:function ee(Re){if(this.active){var ie=Re;return this.mx=ie.x,this.my=ie.y,this.updateEdge(),this.throttledSnap(),this}},preview:function z(Re){var ie=this,oe=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],N=this.options,V=this.sourceNode,fe=this.ghostEles,ke=this.presumptiveTargets,Pe=this.previewEles,nt=this.active,Le=V,at=Re.same(this.ghostNode),It=!this.canConnect(Re),Ge=Re.same(this.targetNode);if(!nt||at||It||Ge)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var yt=function(){ie.targetNode=Re,ke.merge(Re),Re.addClass("eh-presumptive-target"),Re.addClass("eh-target"),ie.emit("hoverover",ie.mp(),Le,Re),Re.addClass("eh-preview"),fe.addClass("eh-preview-active"),V.addClass("eh-preview-active"),Re.addClass("eh-preview-active"),ie.makePreview(),ie.emit("previewon",ie.mp(),Le,Re,Pe)};return oe&&N.hoverDelay>0?this.previewTimeout=setTimeout(yt,N.hoverDelay):yt(),!0},unpreview:function ce(Re){if(this.active){var oe=this.sourceNode,N=this.previewEles,V=this.ghostEles,J=this.cy;clearTimeout(this.previewTimeout),this.previewTimeout=null;var fe=oe;return Re.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),V.removeClass("eh-preview-active"),oe.removeClass("eh-preview-active"),this.targetNode=J.collection(),this.removePreview(fe,Re),this.emit("hoverout",this.mp(),fe,Re),this.emit("previewoff",this.mp(),fe,Re,N),this}},stop:function Ce(){if(this.active){var Re=this.sourceNode,ie=this.targetNode,oe=this.ghostEles,N=this.presumptiveTargets;return clearTimeout(this.previewTimeout),Re.removeClass("eh-source eh-preview-active"),ie.removeClass("eh-target eh-preview eh-hover eh-preview-active"),N.removeClass("eh-presumptive-target"),this.makeEdges(),oe.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),Re),this}},snap:function K(){if(!this.active||!this.options.snap)return!1;var Re=this.cy,ie=this.targetNode,oe=this.options.snapThreshold,N=this.mp(),V=this.previewEles,J=this.ghostNode,ke=function(cn,wn,An,$e){var le=An-cn,ot=$e-wn;return le*le+ot*ot},nt=function(cn){return function(cn,wn){return ke(cn.x,cn.y,wn.x,wn.y)}(cn.position(),N)},Le=function(cn){var An=function(cn){return R*Math.max(cn.outerWidth(),cn.outerHeight())/2}(cn)+oe;return An*An},at=function(cn){return nt(cn)<=Le(cn)},It=function(cn){var wn=cn.position(),An=cn.outerWidth()/2,$e=cn.outerHeight()/2,le=wn.x,ot=wn.y,Je=N.x,Sn=N.y,Hn=le-An,pt=le+An,ht=ot-$e,Ht=ot+$e,We=Hn<=Je&&Je<=pt,Ie=ht<=Sn&&Sn<=Ht;if(We&&Ie)return 0;if(We){var Me=Sn-ht,Et=Sn-Ht;return Math.min(Me*Me,Et*Et)}if(Ie){var dn=Je-Hn,Xn=Je-pt;return Math.min(dn*dn,Xn*Xn)}return Je<Hn&&Sn<ht?ke(Je,Sn,Hn,ht):Je>pt&&Sn<ht?ke(Je,Sn,pt,ht):ke(Je,Sn,Je<Hn&&Sn>Ht?Hn:pt,Ht)},_t=function(cn){var wn=N,$e=cn.outerWidth()/2,ot=cn.outerHeight()/2,Je=cn.position();return Je.x-$e<=wn.x&&wn.x<=Je.x+$e&&Je.y-ot<=wn.y&&wn.y<=Je.y+ot},Ot=Re.nodes(function(Ct){return!((cn=Ct).same(V)||cn.same(J))&&at(Ct);var cn}).sort(function(cn,wn){return It(cn)-It(wn)}),Pn=!1;ie.nonempty()&&!at(ie)&&this.unpreview(ie);for(var nn=0;nn<Ot.length;nn++){var Ze=Ot[nn];if((!Ze.isParent()||!_t(Ze))&&(!Ze.isChild()||_t(Ze.parent()))&&(Ze.same(ie)||this.preview(Ze,false))){Pn=!0;break}}return Pn},canStartOn:function q(Re){var Le,ie=this.previewEles,oe=this.ghostEles;return this.enabled&&!this.active&&!this.grabbingNode&&null!=Re&&Re.nonempty()&&!(function(Le){return ie.anySame(Le)}(Le=Re)||function(Le){return oe.anySame(Le)}(Le))},canStartDrawModeOn:function ne(Re){return this.canStartOn(Re)&&this.drawMode},canStartNonDrawModeOn:function te(Re){return this.canStartOn(Re)&&!this.drawMode}}},function(G,U,j){"use strict";var D=j(4),R=j(0),q=j(14),ne=j(2),te=j(3),se=j(5),ee=j(6),K=j(8),z=j(9),ce=j(11),Ce=j(7);function Re(N){this.cy=N.cy,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=R({},D,N),this.saveGestureState(),this.addListeners(),this.throttledSnap=q(this.snap.bind(this),1e3/N.snapFrequency),this.preventDefault=function(ke){return ke.preventDefault()},this.canConnect=function(){return!1};var J=!1;try{var fe=Object.defineProperty({},"passive",{get:function(){J=!0}});window.addEventListener("test",null,fe)}catch{}this.windowListenerOptions=!J||{capture:!0,passive:!1}}var ie=Re.prototype={};ie.destroy=function(){this.removeListeners()},ie.setOptions=function(N){R(this.options,N)},ie.mp=function(){return{x:this.mx,y:this.my}},ie.hp=function(){return{x:this.hx,y:this.hy}},ie.clearCollections=function(){var N=this.cy;this.previewEles=N.collection(),this.ghostEles=N.collection(),this.ghostNode=N.collection(),this.sourceNode=N.collection(),this.targetNode=N.collection(),this.presumptiveTargets=N.collection()},[ne,te,se,ee,K,z,ce,Ce].forEach(function(V){return R(ie,V)}),G.exports=Re},function(G,U,j){"use strict";var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(z){return typeof z}:function(z){return z&&"function"==typeof Symbol&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z};function ne(z,ce,Ce,Re,ie){return(typeof Ce>"u"?"undefined":D(Ce))!==D("")&&(ie=Re=Ce,Ce=null),null==ie&&(ie=!1),{target:z,event:ce,selector:Ce,callback:Re,options:ie}}function te(z){return z instanceof Element}G.exports={addListener:function se(z,ce,Ce,Re,ie){var oe=ne(z,ce,Ce,Re,ie);return this.listeners.push(oe),te(oe.target)?oe.target.addEventListener(oe.event,oe.callback,oe.options):oe.selector?oe.target.addListener(oe.event,oe.selector,oe.callback,oe.options):oe.target.addListener(oe.event,oe.callback,oe.options),this},addListeners:function R(){var z=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return z.destroy()}),this},removeListener:function ee(z,ce,Ce,Re,ie){for(var oe=ne(z,ce,Ce,Re,ie),N=this.listeners.length-1;N>=0;N--){var V=this.listeners[N];if(!(oe.target!==V.target||oe.event!==V.event||null!=oe.selector&&oe.selector!==V.selector||null!=oe.callback&&oe.callback!==V.callback)){this.listeners.splice(N,1),te(oe.target)?oe.target.removeEventListener(oe.event,oe.callback,oe.options):oe.selector?oe.target.removeListener(oe.event,oe.selector,oe.callback,oe.options):oe.target.removeListener(oe.event,oe.callback,oe.options);break}}return this},removeListeners:function q(){for(var z=this.listeners.length-1;z>=0;z--){var ce=this.listeners[z];this.removeListener(ce.target,ce.event,ce.selector,ce.callback,ce.options)}return this},emit:function K(z,ce){for(var Ce=this.cy,Re=arguments.length,ie=Array(Re>2?Re-2:0),oe=2;oe<Re;oe++)ie[oe-2]=arguments[oe];return Ce.emit({type:"eh"+z,position:ce},ie),this}}},function(G,U,j){"use strict";var D=j(1),R=function(ne){!ne||ne("core","edgehandles",D)};typeof cytoscape<"u"&&R(cytoscape),G.exports=R},function(G,U){G.exports=Y},function(G,U){G.exports=L}]))},9050:(Ve,Ae,W)=>{var Y;!function(L){"use strict";var G=function(U){!U||U("core","snapToGrid",function(j){var D=this,R=j,q=D.container(),ne={stackOrder:-1,gridSpacing:40,strokeStyle:"#CCCCCC",lineWidth:1,lineDash:[5,8],zoomDash:!0,panGrid:!0,snapToGrid:!0,drawGrid:!0},te={snapOn:function(){L(this).trigger("snaptogrid.snapon")},snapOff:function(){L(this).trigger("snaptogrid.snapoff")},gridOn:function(){L(this).trigger("snaptogrid.gridon")},gridOff:function(){L(this).trigger("snaptogrid.gridoff")},refresh:function(){L(this).trigger("snaptogrid.refresh")},option:function(se,ee){var K=L(this),z=K.data("snapToGrid");if(null!=z){var ce=z.options;if(void 0===ee){if(typeof se!=typeof{})return ce[se];ce=L.extend(!0,{},defaults,se),z.options=ce}else ce[se]=ee;return K.data("snapToGrid",z),K.trigger("snaptogrid.refresh"),K}},init:function(){var K,se=L("<canvas></canvas>"),ee=L(this),z=L.extend(!0,{},ne,j);ee.data("snapToGrid",z);var ce,Ce=function(){return ce||(ce=ee.data("snapToGrid"))},Re=function(){se.attr("height",ee.height()).attr("width",ee.width()).css({position:"absolute",top:0,left:0,"z-index":Ce().stackOrder}),setTimeout(function(){var at=se.offset(),It=ee.offset();se.attr("height",ee.height()).attr("width",ee.width()).css({top:-(at.top-It.top),left:-(at.left-It.left)}),ie()},0)},ie=function(){if(oe(),Ce().drawGrid){var at=D.zoom(),It=ee.width(),Ge=ee.height(),yt=Ce().gridSpacing*at,mt=D.pan(),_t=mt.x%yt,Fn=mt.y%yt;if(K.strokeStyle=Ce().strokeStyle,K.lineWidth=Ce().lineWidth,Ce().zoomDash){for(var Ot=Ce().lineDash.slice(),Pn=0;Pn<Ot.length;Pn++)Ot[Pn]=Ce().lineDash[Pn]*at;K.setLineDash(Ot)}else K.setLineDash(Ce().lineDash);for(K.lineDashOffset=Ce().panGrid?-mt.y:0,Pn=_t;Pn<It;Pn+=yt)K.beginPath(),K.moveTo(Pn,0),K.lineTo(Pn,Ge),K.stroke();for(K.lineDashOffset=Ce().panGrid?-mt.x:0,Pn=Fn;Pn<Ge;Pn+=yt)K.beginPath(),K.moveTo(0,Pn),K.lineTo(It,Pn),K.stroke()}},oe=function(){var at=ee.width(),It=ee.height();K.clearRect(0,0,at,It)},N=function(at){var It=at.position(),Ge=Math.floor(It.x/Ce().gridSpacing),yt=Math.floor(It.y/Ce().gridSpacing);at.position({x:(Ge+.5)*Ce().gridSpacing,y:(yt+.5)*Ce().gridSpacing})},V=function(){D.nodes().each(function(at){N(at)})},J=function(at){Ce().snapToGrid&&N(at.target)},fe=function(at){Ce().snapToGrid&&N(at.target)};ee.append(se),L(window).on("resize",Re),ee.on("snaptogrid.snapon",function(){Ce().snapToGrid=!0,V()}),ee.on("snaptogrid.snapoff",function(){Ce().snapToGrid=!1}),ee.on("snaptogrid.gridon",function(){Ce().drawGrid=!0,ie()}),ee.on("snaptogrid.gridoff",function(){Ce().drawGrid=!1,ie()}),ee.on("snaptogrid.refresh",Re),K=se[0].getContext("2d"),D.ready(function(){Re(),Ce().snapToGrid&&V(),D.on("zoom",ie),D.on("pan",ie),D.on("free",J),D.on("add",fe)})}};return te[R]?te[R].apply(q,Array.prototype.slice.call(arguments,1)):"object"!=typeof R&&R?(console.error("No such function `"+R+"` for snapToGrid"),this):te.init.apply(q,arguments)})};Ve.exports&&(Ve.exports=G),void 0!==(Y=function(){return G}.call(Ae,W,Ae,Ve))&&(Ve.exports=Y),typeof cytoscape<"u"&&G(cytoscape)}(typeof jQuery<"u"?jQuery:null)},6864:(Ve,Ae,W)=>{"use strict";var Y=W(406),L=W(5203),G=W(8817),U=W(4793),j=W(4152);function D(f){return f&&"object"==typeof f&&"default"in f?f:{default:f}}var R=D(Y),q=D(L),ne=D(G),te=D(U),se=D(j);function ee(f){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function K(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function z(f,c){for(var h=0;h<c.length;h++){var m=c[h];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}function ce(f,c,h){return c&&z(f.prototype,c),h&&z(f,h),Object.defineProperty(f,"prototype",{writable:!1}),f}function Ce(f,c,h){return c in f?Object.defineProperty(f,c,{value:h,enumerable:!0,configurable:!0,writable:!0}):f[c]=h,f}function Re(f,c){return function ie(f){if(Array.isArray(f))return f}(f)||function oe(f,c){var h=null==f?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(null!=h){var A,E,m=[],_=!0,C=!1;try{for(h=h.call(f);!(_=(A=h.next()).done)&&(m.push(A.value),!c||m.length!==c);_=!0);}catch(F){C=!0,E=F}finally{try{!_&&null!=h.return&&h.return()}finally{if(C)throw E}}return m}}(f,c)||function N(f,c){if(f){if("string"==typeof f)return V(f,c);var h=Object.prototype.toString.call(f).slice(8,-1);if("Object"===h&&f.constructor&&(h=f.constructor.name),"Map"===h||"Set"===h)return Array.from(f);if("Arguments"===h||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return V(f,c)}}(f,c)||function J(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(f,c){(null==c||c>f.length)&&(c=f.length);for(var h=0,m=new Array(c);h<c;h++)m[h]=f[h];return m}var fe=typeof window>"u"?null:window,ke=fe?fe.navigator:null,Pe=ee(""),nt=ee({}),Le=ee(function(){}),at=typeof HTMLElement>"u"?"undefined":ee(HTMLElement),It=function(c){return c&&c.instanceString&&yt(c.instanceString)?c.instanceString():null},Ge=function(c){return null!=c&&ee(c)==Pe},yt=function(c){return null!=c&&ee(c)===Le},mt=function(c){return!Ze(c)&&(Array.isArray?Array.isArray(c):null!=c&&c instanceof Array)},_t=function(c){return null!=c&&ee(c)===nt&&!mt(c)&&c.constructor===Object},Ot=function(c){return null!=c&&ee(c)===ee(1)&&!isNaN(c)},nn=function(c){if("undefined"!==at)return null!=c&&c instanceof HTMLElement},Ze=function(c){return Ct(c)||cn(c)},Ct=function(c){return"collection"===It(c)&&c._private.single},cn=function(c){return"collection"===It(c)&&!c._private.single},wn=function(c){return"core"===It(c)},An=function(c){return"stylesheet"===It(c)},le=function(c){return null==c||!(""!==c&&!c.match(/^\s+$/))},Sn=function(c){return function(c){return null!=c&&ee(c)===nt}(c)&&yt(c.then)},pt=function(c,h){h||(h=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var C=[],A=0;A<arguments.length;A++)C.push(arguments[A]);return C.join("$")});var m=function _(){var E,C=this,A=arguments,F=h.apply(C,A),P=_.cache;return(E=P[F])||(E=P[F]=c.apply(C,A)),E};return m.cache={},m},ht=pt(function(f){return f.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()})}),Ht=pt(function(f){return f.replace(/(-\w)/g,function(c){return c[1].toUpperCase()})}),We=pt(function(f,c){return f+c[0].toUpperCase()+c.substring(1)},function(f,c){return f+"$"+c}),Ie=function(c){return le(c)?c:c.charAt(0).toUpperCase()+c.substring(1)},Me="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",os=function(c,h){return c<h?-1:c>h?1:0},Zi=null!=Object.assign?Object.assign.bind(Object):function(f){for(var c=arguments,h=1;h<c.length;h++){var m=c[h];if(null!=m)for(var _=Object.keys(m),C=0;C<_.length;C++){var A=_[C];f[A]=m[A]}}return f},kc={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Sa=function(c){for(var h=c.map,m=c.keys,_=m.length,C=0;C<_;C++){var A=m[C];if(_t(A))throw Error("Tried to set map with object key");C<m.length-1?(null==h[A]&&(h[A]={}),h=h[A]):h[A]=c.value}},Oc=function(c){for(var h=c.map,m=c.keys,_=m.length,C=0;C<_;C++){var A=m[C];if(_t(A))throw Error("Tried to get map with object key");if(null==(h=h[A]))return h}return h},Ja=fe?fe.performance:null,Go=Ja&&Ja.now?function(){return Ja.now()}:function(){return Date.now()},Rt=function(){if(fe){if(fe.requestAnimationFrame)return function(f){fe.requestAnimationFrame(f)};if(fe.mozRequestAnimationFrame)return function(f){fe.mozRequestAnimationFrame(f)};if(fe.webkitRequestAnimationFrame)return function(f){fe.webkitRequestAnimationFrame(f)};if(fe.msRequestAnimationFrame)return function(f){fe.msRequestAnimationFrame(f)}}return function(f){f&&setTimeout(function(){f(Go())},1e3/60)}}(),fn=function(c){return Rt(c)},gn=Go,yn=9261,qe=65599,kt=5381,on=function(c){for(var _,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn,m=h;!(_=c.next()).done;)m=m*qe+_.value|0;return m},En=function(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yn;return h*qe+c|0},Nn=function(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt;return(h<<5)+h+c|0},ar=function(c){return 2097152*c[0]+c[1]},qr=function(c,h){return[En(c[0],h[0]),Nn(c[1],h[1])]},xs=function(c,h){var m={value:0,done:!1},_=0,C=c.length;return on({next:function(){return _<C?m.value=c.charCodeAt(_++):m.done=!0,m}},h)},xo=function(){return lo(arguments)},lo=function(c){for(var h,m=0;m<c.length;m++){var _=c[m];h=0===m?xs(_):xs(_,h)}return h},Kr=!0,Ga=null!=console.warn,Ns=null!=console.trace,ya=Number.MAX_SAFE_INTEGER||9007199254740991,sa=function(){return!0},zl=function(){return!1},Fc=function(){return 0},je=function(){},dt=function(c){throw new Error(c)},et=function(c){if(void 0===c)return Kr;Kr=!!c},pe=function(c){!et()||(Ga?console.warn(c):(console.log(c),Ns&&console.trace()))},Qe=function(c){return null==c?c:mt(c)?c.slice():_t(c)?function(c){return Zi({},c)}(c):c},Xt=function(c,h){for(h=c="";c++<36;h+=51*c&52?(15^c?8^Math.random()*(20^c?16:4):4).toString(16):"-");return h},xn={},vi=function(){return xn},mi=function(c){var h=Object.keys(c);return function(m){for(var _={},C=0;C<h.length;C++){var A=h[C],E=m?.[A];_[A]=void 0===E?c[A]:E}return _}},xi=function(c,h,m){for(var _=c.length-1;_>=0&&(c[_]!==h||(c.splice(_,1),!m));_--);},Dr=function(c){c.splice(0,c.length)},gr=function(c,h,m){return m&&(h=We(m,h)),c[h]},dr=function(c,h,m,_){m&&(h=We(m,h)),c[h]=_},Bs=typeof Map<"u"?Map:function(){function f(){K(this,f),this._obj={}}return ce(f,[{key:"set",value:function(h,m){return this._obj[h]=m,this}},{key:"delete",value:function(h){return this._obj[h]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(h){return void 0!==this._obj[h]}},{key:"get",value:function(h){return this._obj[h]}}]),f}(),_o=function(){function f(c){if(K(this,f),this._obj=Object.create(null),this.size=0,null!=c){var h;h=null!=c.instanceString&&c.instanceString()===this.instanceString()?c.toArray():c;for(var m=0;m<h.length;m++)this.add(h[m])}}return ce(f,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(h){var m=this._obj;1!==m[h]&&(m[h]=1,this.size++)}},{key:"delete",value:function(h){var m=this._obj;1===m[h]&&(m[h]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(h){return 1===this._obj[h]}},{key:"toArray",value:function(){var h=this;return Object.keys(this._obj).filter(function(m){return h.has(m)})}},{key:"forEach",value:function(h,m){return this.toArray().forEach(h,m)}}]),f}(),hs="undefined"!==(typeof Set>"u"?"undefined":ee(Set))?Set:_o,Io=function(c,h){var m=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==c&&void 0!==h&&wn(c)){var _=h.group;if(null==_&&(_=h.data&&null!=h.data.source&&null!=h.data.target?"edges":"nodes"),"nodes"===_||"edges"===_){this.length=1,this[0]=this;var C=this._private={cy:c,single:!0,data:h.data||{},position:h.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:_,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!h.selected,selectable:void 0===h.selectable||!!h.selectable,locked:!!h.locked,grabbed:!1,grabbable:void 0===h.grabbable||!!h.grabbable,pannable:void 0===h.pannable?"edges"===_:!!h.pannable,active:!1,classes:new hs,animation:{current:[],queue:[]},rscratch:{},scratch:h.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==C.position.x&&(C.position.x=0),null==C.position.y&&(C.position.y=0),h.renderedPosition){var A=h.renderedPosition,E=c.pan(),F=c.zoom();C.position={x:(A.x-E.x)/F,y:(A.y-E.y)/F}}var P=[];mt(h.classes)?P=h.classes:Ge(h.classes)&&(P=h.classes.split(/\s+/));for(var $=0,Z=P.length;$<Z;$++){var he=P[$];!he||""===he||C.classes.add(he)}this.createEmitter();var ge=h.style||h.css;ge&&(pe("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(ge)),(void 0===m||m)&&this.restore()}else dt("An element must be of type `nodes` or `edges`; you specified `"+_+"`")}else dt("An element must have a core reference and parameters set")},Vl=function(c){return c={bfs:c.bfs||!c.dfs,dfs:c.dfs||!c.bfs},function(m,_,C){var A;_t(m)&&!Ze(m)&&(m=(A=m).roots||A.root,_=A.visit,C=A.directed),C=2!==arguments.length||yt(_)?C:_,_=yt(_)?_:function(){};for(var Ee,E=this._private.cy,F=m=Ge(m)?this.filter(m):m,P=[],$=[],Z={},he={},ge={},ve=0,Be=this.byGroup(),Ue=Be.nodes,st=Be.edges,tt=0;tt<F.length;tt++){var wt=F[tt],Ut=wt.id();wt.isNode()&&(P.unshift(wt),c.bfs&&(ge[Ut]=!0,$.push(wt)),he[Ut]=0)}for(var Gt=function(){var Zt=c.bfs?P.shift():P.pop(),Vt=Zt.id();if(c.dfs){if(ge[Vt])return"continue";ge[Vt]=!0,$.push(Zt)}var pi,Ln=he[Vt],sn=Z[Vt],bn=null!=sn?sn.source():null,zn=null!=sn?sn.target():null,jn=null==sn?void 0:Zt.same(bn)?zn[0]:bn[0];if(!0===(pi=_(Zt,sn,jn,ve++,Ln)))return Ee=Zt,"break";if(!1===pi)return"break";for(var Vn=Zt.connectedEdges().filter(function(Si){return(!C||Si.source().same(Zt))&&st.has(Si)}),ci=0;ci<Vn.length;ci++){var Ai=Vn[ci],Oi=Ai.connectedNodes().filter(function(Si){return!Si.same(Zt)&&Ue.has(Si)}),Mi=Oi.id();0!==Oi.length&&!ge[Mi]&&(P.push(Oi=Oi[0]),c.bfs&&(ge[Mi]=!0,$.push(Oi)),Z[Mi]=Ai,he[Mi]=he[Vt]+1)}};0!==P.length;){var xt=Gt();if("continue"!==xt&&"break"===xt)break}for(var Wt=E.collection(),Dt=0;Dt<$.length;Dt++){var Kt=$[Dt],Yt=Z[Kt.id()];null!=Yt&&Wt.push(Yt),Wt.push(Kt)}return{path:E.collection(Wt),found:E.collection(Ee)}}},Zr={breadthFirstSearch:Vl({bfs:!0}),depthFirstSearch:Vl({dfs:!0})};Zr.bfs=Zr.breadthFirstSearch,Zr.dfs=Zr.depthFirstSearch;var Qr=mi({root:null,weight:function(c){return 1},directed:!1}),el={dijkstra:function(c){if(!_t(c)){var h=arguments;c={root:h[0],weight:h[1],directed:h[2]}}var m=Qr(c),_=m.root,C=m.weight,A=m.directed,E=this,F=C,P=Ge(_)?this.filter(_)[0]:_[0],$={},Z={},he={},ge=this.byGroup(),ve=ge.nodes,Ee=ge.edges;Ee.unmergeBy(function(Ln){return Ln.isLoop()});for(var Be=function(sn){return $[sn.id()]},Ue=function(sn,bn){$[sn.id()]=bn,st.updateItem(sn)},st=new q.default(function(Ln,sn){return Be(Ln)-Be(sn)}),tt=0;tt<ve.length;tt++){var wt=ve[tt];$[wt.id()]=wt.same(P)?0:1/0,st.push(wt)}for(var Ut=function(sn,bn){for(var pi,zn=(A?sn.edgesTo(bn):sn.edgesWith(bn)).intersect(Ee),jn=1/0,Vn=0;Vn<zn.length;Vn++){var ci=zn[Vn],Ai=F(ci);(Ai<jn||!pi)&&(jn=Ai,pi=ci)}return{edge:pi,dist:jn}};st.size()>0;){var Gt=st.pop(),xt=Be(Gt),Wt=Gt.id();if(he[Wt]=xt,xt!==1/0)for(var Dt=Gt.neighborhood().intersect(ve),Kt=0;Kt<Dt.length;Kt++){var Yt=Dt[Kt],lt=Yt.id(),Zt=Ut(Gt,Yt),Vt=xt+Zt.dist;Vt<Be(Yt)&&(Ue(Yt,Vt),Z[lt]={node:Gt,edge:Zt.edge})}}return{distanceTo:function(sn){var bn=Ge(sn)?ve.filter(sn)[0]:sn[0];return he[bn.id()]},pathTo:function(sn){var bn=Ge(sn)?ve.filter(sn)[0]:sn[0],zn=[],jn=bn,pi=jn.id();if(bn.length>0)for(zn.unshift(bn);Z[pi];){var Vn=Z[pi];zn.unshift(Vn.edge),zn.unshift(Vn.node),pi=(jn=Vn.node).id()}return E.spawn(zn)}}}},Xl={kruskal:function(c){c=c||function(tt){return 1};for(var h=this.byGroup(),m=h.nodes,_=h.edges,C=m.length,A=new Array(C),E=m,F=function(wt){for(var Ut=0;Ut<A.length;Ut++)if(A[Ut].has(wt))return Ut},P=0;P<C;P++)A[P]=this.spawn(m[P]);for(var $=_.sort(function(tt,wt){return c(tt)-c(wt)}),Z=0;Z<$.length;Z++){var he=$[Z],ge=he.source()[0],ve=he.target()[0],Ee=F(ge),Be=F(ve),Ue=A[Ee],st=A[Be];Ee!==Be&&(E.merge(he),Ue.merge(st),A.splice(Be,1))}return E}},Ei=mi({root:null,goal:null,weight:function(c){return 1},heuristic:function(c){return 0},directed:!1}),wl={aStar:function(c){var h=this.cy(),m=Ei(c),_=m.root,C=m.goal,A=m.heuristic,E=m.directed,F=m.weight;_=h.collection(_)[0],C=h.collection(C)[0];var tt,wt,P=_.id(),$=C.id(),Z={},he={},ge={},ve=new q.default(function(pi,Vn){return he[pi.id()]-he[Vn.id()]}),Ee=new hs,Be={},Ue={},st=function(Vn,ci){ve.push(Vn),Ee.add(ci)};st(_,P),Z[P]=0,he[P]=A(_);for(var xt=0;ve.size()>0;){if(wt=(tt=ve.pop()).id(),Ee.delete(wt),xt++,wt===$){for(var Wt=[],Dt=C,Kt=$,Yt=Ue[Kt];Wt.unshift(Dt),null!=Yt&&Wt.unshift(Yt),null!=(Dt=Be[Kt]);)Yt=Ue[Kt=Dt.id()];return{found:!0,distance:Z[wt],path:this.spawn(Wt),steps:xt}}ge[wt]=!0;for(var lt=tt._private.edges,Zt=0;Zt<lt.length;Zt++){var Vt=lt[Zt];if(this.hasElementWithId(Vt.id())&&(!E||Vt.data("source")===wt)){var Ln=Vt.source(),sn=Vt.target(),bn=Ln.id()!==wt?Ln:sn,zn=bn.id();if(this.hasElementWithId(zn)&&!ge[zn]){var jn=Z[wt]+F(Vt);if(!Ee.has(zn)){Z[zn]=jn,he[zn]=jn+A(bn),st(bn,zn),Be[zn]=tt,Ue[zn]=Vt;continue}jn<Z[zn]&&(Z[zn]=jn,he[zn]=jn+A(bn),Be[zn]=tt,Ue[zn]=Vt)}}}}return{found:!1,distance:void 0,path:void 0,steps:xt}}},zs=mi({weight:function(c){return 1},directed:!1}),wo={floydWarshall:function(c){for(var h=this.cy(),m=zs(c),C=m.directed,A=m.weight,E=this.byGroup(),F=E.nodes,P=E.edges,$=F.length,Z=$*$,he=function(Ai){return F.indexOf(Ai)},ge=function(Ai){return F[Ai]},ve=new Array(Z),Ee=0;Ee<Z;Ee++){var Be=Ee%$;ve[Ee]=(Ee-Be)/$===Be?0:1/0}for(var st=new Array(Z),tt=new Array(Z),wt=0;wt<P.length;wt++){var Ut=P[wt],Gt=Ut.source()[0],xt=Ut.target()[0];if(Gt!==xt){var Wt=he(Gt),Dt=he(xt),Kt=Wt*$+Dt,Yt=A(Ut);if(ve[Kt]>Yt&&(ve[Kt]=Yt,st[Kt]=Dt,tt[Kt]=Ut),!C){var lt=Dt*$+Wt;!C&&ve[lt]>Yt&&(ve[lt]=Yt,st[lt]=Wt,tt[lt]=Ut)}}}for(var Zt=0;Zt<$;Zt++)for(var Vt=0;Vt<$;Vt++)for(var Ln=Vt*$+Zt,sn=0;sn<$;sn++){var bn=Vt*$+sn,zn=Zt*$+sn;ve[Ln]+ve[zn]<ve[bn]&&(ve[bn]=ve[Ln]+ve[zn],st[bn]=st[Ln])}var pi=function(Ai){return he(function(Ai){return(Ge(Ai)?h.filter(Ai):Ai)[0]}(Ai))};return{distance:function(Ai,Oi){var Mi=pi(Ai),Si=pi(Oi);return ve[Mi*$+Si]},path:function(Ai,Oi){var Mi=pi(Ai),Si=pi(Oi),Gn=ge(Mi);if(Mi===Si)return Gn.collection();if(null==st[Mi*$+Si])return h.collection();var _i=h.collection();for(_i.merge(Gn);Mi!==Si;)_i.merge(tt[Mi*$+(Mi=st[Mi*$+Si])]),_i.merge(ge(Mi));return _i}}}},id=mi({weight:function(c){return 1},directed:!1,root:null}),Sf={bellmanFord:function(c){var h=this,m=id(c),C=m.directed,A=m.root,E=m.weight,F=this,P=this.cy(),$=this.byGroup(),Z=$.edges,he=$.nodes,ge=he.length,ve=new Bs,Ee=!1,Be=[];A=P.collection(A)[0],Z.unmergeBy(function(Wi){return Wi.isLoop()});for(var Ue=Z.length,st=function(kr){var Fr=ve.get(kr.id());return Fr||(Fr={},ve.set(kr.id(),Fr)),Fr},tt=function(kr){return(Ge(kr)?P.$(kr):kr)[0]},Gt=0;Gt<ge;Gt++){var xt=he[Gt],Wt=st(xt);Wt.dist=xt.same(A)?0:1/0,Wt.pred=null,Wt.edge=null}for(var Dt=!1,Kt=function(kr,Fr,bs,oo,Cs,ir){var Nt=oo.dist+ir;Nt<Cs.dist&&!bs.same(oo.edge)&&(Cs.dist=Nt,Cs.pred=kr,Cs.edge=bs,Dt=!0)},Yt=1;Yt<ge;Yt++){Dt=!1;for(var lt=0;lt<Ue;lt++){var Zt=Z[lt],Vt=Zt.source(),Ln=Zt.target(),sn=E(Zt),bn=st(Vt),zn=st(Ln);Kt(Vt,0,Zt,bn,zn,sn),C||Kt(Ln,0,Zt,zn,bn,sn)}if(!Dt)break}if(Dt)for(var jn=[],pi=0;pi<Ue;pi++){var Vn=Z[pi],ci=Vn.source(),Ai=Vn.target(),Oi=E(Vn),Mi=st(ci).dist,Si=st(Ai).dist;if(Mi+Oi<Si||!C&&Si+Oi<Mi){if(Ee||(pe("Graph contains a negative weight cycle for Bellman-Ford"),Ee=!0),!1===c.findNegativeWeightCycles)break;var Gn=[];Mi+Oi<Si&&Gn.push(ci),!C&&Si+Oi<Mi&&Gn.push(Ai);for(var _i=Gn.length,Ni=0;Ni<_i;Ni++){var lr=Gn[Ni],wr=[lr];wr.push(st(lr).edge);for(var as=st(lr).pred;-1===wr.indexOf(as);)wr.push(as),wr.push(st(as).edge),as=st(as).pred;for(var _s=(wr=wr.slice(wr.indexOf(as)))[0].id(),Mr=0,br=2;br<wr.length;br+=2)wr[br].id()<_s&&(_s=wr[br].id(),Mr=br);(wr=wr.slice(Mr).concat(wr.slice(0,Mr))).push(wr[0]);var gs=wr.map(function(Wi){return Wi.id()}).join(",");-1===jn.indexOf(gs)&&(Be.push(F.spawn(wr)),jn.push(gs))}}}return{distanceTo:function(kr){return st(tt(kr)).dist},pathTo:function(kr){for(var Fr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,bs=tt(kr),oo=[],Cs=bs;;){if(null==Cs)return h.spawn();var ir=st(Cs),Nt=ir.edge,li=ir.pred;if(oo.unshift(Cs[0]),Cs.same(Fr)&&oo.length>0)break;null!=Nt&&oo.unshift(Nt),Cs=li}return F.spawn(oo)},hasNegativeWeightCycle:Ee,negativeWeightCycles:Be}}},qh=Math.sqrt(2),js=function(c,h,m){0===m.length&&dt("Karger-Stein must be run on a connected (sub)graph");for(var _=m[c],E=h[_[1]],F=h[_[2]],P=m,$=P.length-1;$>=0;$--){var Z=P[$],he=Z[1],ge=Z[2];(h[he]===E&&h[ge]===F||h[he]===F&&h[ge]===E)&&P.splice($,1)}for(var ve=0;ve<P.length;ve++){var Ee=P[ve];Ee[1]===F?(P[ve]=Ee.slice(),P[ve][1]=E):Ee[2]===F&&(P[ve]=Ee.slice(),P[ve][2]=E)}for(var Be=0;Be<h.length;Be++)h[Be]===F&&(h[Be]=E);return P},hr=function(c,h,m,_){for(;m>_;){var C=Math.floor(Math.random()*h.length);h=js(C,c,h),m--}return h},My={kargerStein:function(){var c=this,h=this.byGroup(),m=h.nodes,_=h.edges;_.unmergeBy(function(zn){return zn.isLoop()});var C=m.length,A=_.length,E=Math.ceil(Math.pow(Math.log(C)/Math.LN2,2)),F=Math.floor(C/qh);if(!(C<2)){for(var P=[],$=0;$<A;$++){var Z=_[$];P.push([$,m.indexOf(Z.source()),m.indexOf(Z.target())])}for(var he=1/0,ge=[],ve=new Array(C),Ee=new Array(C),Be=new Array(C),Ue=function(jn,pi){for(var Vn=0;Vn<C;Vn++)pi[Vn]=jn[Vn]},st=0;st<=E;st++){for(var tt=0;tt<C;tt++)Ee[tt]=tt;var wt=hr(Ee,P.slice(),C,F),Ut=wt.slice();Ue(Ee,Be);var Gt=hr(Ee,wt,F,2),xt=hr(Be,Ut,F,2);Gt.length<=xt.length&&Gt.length<he?(he=Gt.length,ge=Gt,Ue(Ee,ve)):xt.length<=Gt.length&&xt.length<he&&(he=xt.length,ge=xt,Ue(Be,ve))}for(var Wt=this.spawn(ge.map(function(zn){return _[zn[0]]})),Dt=this.spawn(),Kt=this.spawn(),Yt=ve[0],lt=0;lt<ve.length;lt++){var Vt=m[lt];ve[lt]===Yt?Dt.merge(Vt):Kt.merge(Vt)}var Ln=function(jn){var pi=c.spawn();return jn.forEach(function(Vn){pi.merge(Vn),Vn.connectedEdges().forEach(function(ci){c.contains(ci)&&!Wt.contains(ci)&&pi.merge(ci)})}),pi},sn=[Ln(Dt),Ln(Kt)];return{cut:Wt,components:sn,partition1:Dt,partition2:Kt}}dt("At least 2 nodes are required for Karger-Stein algorithm")}},ba=function(c,h,m){return{x:c.x*h+m.x,y:c.y*h+m.y}},Zc=function(c,h,m){return{x:(c.x-m.x)/h,y:(c.y-m.y)/h}},yh=function(c){return{x:c[0],y:c[1]}},Og=function(c,h){return Math.atan2(h,c)-Math.PI/2},_v=Math.log2||function(f){return Math.log(f)/Math.log(2)},Qc=function(c){return c>0?1:c<0?-1:0},Do=function(c,h){return Math.sqrt($d(c,h))},$d=function(c,h){var m=h.x-c.x,_=h.y-c.y;return m*m+_*_},N_=function(c){for(var h=c.length,m=0,_=0;_<h;_++)m+=c[_];for(var C=0;C<h;C++)c[C]=c[C]/m;return c},Nc=function(c,h,m,_){return(1-_)*(1-_)*c+2*(1-_)*_*h+_*_*m},cr=function(c,h,m,_){return{x:Nc(c.x,h.x,m.x,_),y:Nc(c.y,h.y,m.y,_)}},Vr=function(c,h,m){return Math.max(c,Math.min(m,h))},Jc=function(c){if(null==c)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=c.x1&&null!=c.y1){if(null!=c.x2&&null!=c.y2&&c.x2>=c.x1&&c.y2>=c.y1)return{x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,w:c.x2-c.x1,h:c.y2-c.y1};if(null!=c.w&&null!=c.h&&c.w>=0&&c.h>=0)return{x1:c.x1,y1:c.y1,x2:c.x1+c.w,y2:c.y1+c.h,w:c.w,h:c.h}}},tl=function(c,h){c.x1=Math.min(c.x1,h.x1),c.x2=Math.max(c.x2,h.x2),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,h.y1),c.y2=Math.max(c.y2,h.y2),c.h=c.y2-c.y1},Fa=function(c,h,m){c.x1=Math.min(c.x1,h),c.x2=Math.max(c.x2,h),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,m),c.y2=Math.max(c.y2,m),c.h=c.y2-c.y1},ep=function(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c.x1-=h,c.x2+=h,c.y1-=h,c.y2+=h,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},qp=function(c){var m,_,C,A,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===h.length)m=_=C=A=h[0];else if(2===h.length)m=C=h[0],A=_=h[1];else if(4===h.length){var E=Re(h,4);m=E[0],_=E[1],C=E[2],A=E[3]}return c.x1-=A,c.x2+=_,c.y1-=m,c.y2+=C,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},xm=function(c,h){c.x1=h.x1,c.y1=h.y1,c.x2=h.x2,c.y2=h.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1},Im=function(c,h){return!(c.x1>h.x2||h.x1>c.x2||c.x2<h.x1||h.x2<c.x1||c.y2<h.y1||h.y2<c.y1||c.y1>h.y2||h.y1>c.y2)},Es=function(c,h,m){return c.x1<=h&&h<=c.x2&&c.y1<=m&&m<=c.y2},bv=function(c,h){return Es(c,h.x,h.y)},Cv=function(c,h){return Es(c,h.x1,h.y1)&&Es(c,h.x2,h.y2)},rd=function(c,h,m,_,C,A,E){var Z,F=Ef(C,A),P=C/2,$=A/2,ge=_-$-E;if((Z=Dl(c,h,m,_,m-P+F-E,ge,m+P-F+E,ge,!1)).length>0)return Z;var Be=m+P+E;if((Z=Dl(c,h,m,_,Be,_-$+F-E,Be,_+$-F+E,!1)).length>0)return Z;var Ut=_+$+E;if((Z=Dl(c,h,m,_,m-P+F-E,Ut,m+P-F+E,Ut,!1)).length>0)return Z;var lt,Wt=m-P-E;if((Z=Dl(c,h,m,_,Wt,_-$+F-E,Wt,_+$-F+E,!1)).length>0)return Z;var Zt=m-P+F,Vt=_-$+F;if((lt=tp(c,h,m,_,Zt,Vt,F+E)).length>0&&lt[0]<=Zt&&lt[1]<=Vt)return[lt[0],lt[1]];var Ln=m+P-F,sn=_-$+F;if((lt=tp(c,h,m,_,Ln,sn,F+E)).length>0&&lt[0]>=Ln&&lt[1]<=sn)return[lt[0],lt[1]];var bn=m+P-F,zn=_+$-F;if((lt=tp(c,h,m,_,bn,zn,F+E)).length>0&&lt[0]>=bn&&lt[1]>=zn)return[lt[0],lt[1]];var jn=m-P+F,pi=_+$-F;return(lt=tp(c,h,m,_,jn,pi,F+E)).length>0&&lt[0]<=jn&&lt[1]>=pi?[lt[0],lt[1]]:[]},yc=function(c,h,m,_,C,A,E){var F=E,P=Math.min(m,C),$=Math.max(m,C),Z=Math.min(_,A),he=Math.max(_,A);return P-F<=c&&c<=$+F&&Z-F<=h&&h<=he+F},z_=function(c,h,m,_,C,A,E,F,P){var $_x1=Math.min(m,E,C)-P,$_x2=Math.max(m,E,C)+P,$_y1=Math.min(_,F,A)-P,$_y2=Math.max(_,F,A)+P;return!(c<$_x1||c>$_x2||h<$_y1||h>$_y2)},Ly=function(c,h,m,_,C,A,E,F){var ge=[];!function(c,h,m,_,C){var E,F,P,$,Z,he,ge,ve;0===c&&(c=1e-5),P=-27*(_/=c)+(h/=c)*(9*(m/=c)-h*h*2),E=(F=(3*m-h*h)/9)*F*F+(P/=54)*P,C[1]=0,ge=h/3,E>0?(Z=(Z=P+Math.sqrt(E))<0?-Math.pow(-Z,1/3):Math.pow(Z,1/3),he=(he=P-Math.sqrt(E))<0?-Math.pow(-he,1/3):Math.pow(he,1/3),C[0]=-ge+Z+he,C[4]=C[2]=-(ge+=(Z+he)/2),ge=Math.sqrt(3)*(-he+Z)/2,C[3]=ge,C[5]=-ge):(C[5]=C[3]=0,0===E?(ve=P<0?-Math.pow(-P,1/3):Math.pow(P,1/3),C[0]=2*ve-ge,C[4]=C[2]=-(ve+ge)):($=(F=-F)*F*F,$=Math.acos(P/Math.sqrt($)),ve=2*Math.sqrt(F),C[0]=-ge+ve*Math.cos($/3),C[2]=-ge+ve*Math.cos(($+2*Math.PI)/3),C[4]=-ge+ve*Math.cos(($+4*Math.PI)/3)))}(1*m*m-4*m*C+2*m*E+4*C*C-4*C*E+E*E+_*_-4*_*A+2*_*F+4*A*A-4*A*F+F*F,9*m*C-3*m*m-3*m*E-6*C*C+3*C*E+9*_*A-3*_*_-3*_*F-6*A*A+3*A*F,3*m*m-6*m*C+m*E-m*c+2*C*C+2*C*c-E*c+3*_*_-6*_*A+_*F-_*h+2*A*A+2*A*h-F*h,1*m*C-m*m+m*c-C*c+_*A-_*_+_*h-A*h,ge);for(var Ee=[],Be=0;Be<6;Be+=2)Math.abs(ge[Be+1])<1e-7&&ge[Be]>=0&&ge[Be]<=1&&Ee.push(ge[Be]);Ee.push(1),Ee.push(0);for(var st,tt,wt,Ue=-1,Ut=0;Ut<Ee.length;Ut++)st=Math.pow(1-Ee[Ut],2)*m+2*(1-Ee[Ut])*Ee[Ut]*C+Ee[Ut]*Ee[Ut]*E,tt=Math.pow(1-Ee[Ut],2)*_+2*(1-Ee[Ut])*Ee[Ut]*A+Ee[Ut]*Ee[Ut]*F,wt=Math.pow(st-c,2)+Math.pow(tt-h,2),Ue>=0?wt<Ue&&(Ue=wt):Ue=wt;return Ue},qd=function(c,h,m,_,C,A){var E=[c-m,h-_],F=[C-m,A-_],P=F[0]*F[0]+F[1]*F[1],$=E[0]*E[0]+E[1]*E[1],Z=E[0]*F[0]+E[1]*F[1],he=Z*Z/P;return Z<0?$:he>P?(c-C)*(c-C)+(h-A)*(h-A):$-he},nl=function(c,h,m){for(var _,C,A,E,P=0,$=0;$<m.length/2;$++)if(C=m[2*$+1],$+1<m.length/2?(A=m[2*($+1)],E=m[2*($+1)+1]):(A=m[2*($+1-m.length/2)],E=m[2*($+1-m.length/2)+1]),(_=m[2*$])!=c||A!=c){if(!(_>=c&&c>=A||_<=c&&c<=A))continue;(c-_)/(A-_)*(E-C)+C>h&&P++}return P%2!=0},Lo=function(c,h,m,_,C,A,E,F,P){var Z,Ee,$=new Array(m.length);null!=F[0]?(Z=Math.atan(F[1]/F[0]),F[0]<0?Z+=Math.PI/2:Z=-Z-Math.PI/2):Z=F;for(var he=Math.cos(-Z),ge=Math.sin(-Z),ve=0;ve<$.length/2;ve++)$[2*ve]=A/2*(m[2*ve]*he-m[2*ve+1]*ge),$[2*ve+1]=E/2*(m[2*ve+1]*he+m[2*ve]*ge),$[2*ve]+=_,$[2*ve+1]+=C;if(P>0){var Be=Yh($,-P);Ee=Py(Be)}else Ee=$;return nl(c,h,Ee)},Py=function(c){for(var E,F,P,$,h=new Array(c.length/2),Z=0;Z<c.length/4;Z++){Z<c.length/4-1?(E=c[4*(Z+1)],F=c[4*(Z+1)+1],P=c[4*(Z+1)+2],$=c[4*(Z+1)+3]):(E=c[0],F=c[1],P=c[2],$=c[3]);var he=Dl(c[4*Z],c[4*Z+1],c[4*Z+2],c[4*Z+3],E,F,P,$,!0);h[2*Z]=he[0],h[2*Z+1]=he[1]}return h},Yh=function(c,h){for(var _,C,A,E,m=new Array(2*c.length),F=0;F<c.length/2;F++){F<c.length/2-1?(A=c[2*(F+1)],E=c[2*(F+1)+1]):(A=c[0],E=c[1]);var P=E-(C=c[2*F+1]),$=-(A-(_=c[2*F])),Z=Math.sqrt(P*P+$*$),he=P/Z,ge=$/Z;m[4*F]=_+he*h,m[4*F+1]=C+ge*h,m[4*F+2]=A+he*h,m[4*F+3]=E+ge*h}return m},Al=function(c,h,m,_,C,A,E){return c-=C,h-=A,(c/=m/2+E)*c+(h/=_/2+E)*h<=1},tp=function(c,h,m,_,C,A,E){var F=[m-c,_-h],P=[c-C,h-A],$=F[0]*F[0]+F[1]*F[1],Z=2*(P[0]*F[0]+P[1]*F[1]),ge=Z*Z-4*$*(P[0]*P[0]+P[1]*P[1]-E*E);if(ge<0)return[];var ve=(-Z+Math.sqrt(ge))/(2*$),Ee=(-Z-Math.sqrt(ge))/(2*$),Be=Math.min(ve,Ee),Ue=Math.max(ve,Ee),st=[];if(Be>=0&&Be<=1&&st.push(Be),Ue>=0&&Ue<=1&&st.push(Ue),0===st.length)return[];var tt=st[0]*F[0]+c,wt=st[0]*F[1]+h;return st.length>1?st[0]==st[1]?[tt,wt]:[tt,wt,st[1]*F[0]+c,st[1]*F[1]+h]:[tt,wt]},xl=function(c,h,m){return h<=c&&c<=m||m<=c&&c<=h?c:c<=h&&h<=m||m<=h&&h<=c?h:m},Dl=function(c,h,m,_,C,A,E,F,P){var $=c-C,Z=m-c,he=E-C,ge=h-A,ve=_-h,Ee=F-A,Be=he*ge-Ee*$,Ue=Z*ge-ve*$,st=Ee*Z-he*ve;if(0!==st){var tt=Be/st,wt=Ue/st;return-.001<=tt&&tt<=1.001&&-.001<=wt&&wt<=1.001||P?[c+tt*Z,h+tt*ve]:[]}return 0===Be||0===Ue?xl(c,m,E)===E?[E,F]:xl(c,m,C)===C?[C,A]:xl(C,E,m)===m?[m,_]:[]:[]},ku=function(c,h,m,_,C,A,E,F){var $,ge,P=[],Z=new Array(m.length),he=!0;if(null==A&&(he=!1),he){for(var ve=0;ve<Z.length/2;ve++)Z[2*ve]=m[2*ve]*A+_,Z[2*ve+1]=m[2*ve+1]*E+C;if(F>0){var Ee=Yh(Z,-F);ge=Py(Ee)}else ge=Z}else ge=m;for(var st,tt,wt=0;wt<ge.length/2;wt++)wt<ge.length/2-1?(st=ge[2*(wt+1)],tt=ge[2*(wt+1)+1]):(st=ge[0],tt=ge[1]),0!==($=Dl(c,h,_,C,ge[2*wt],ge[2*wt+1],st,tt)).length&&P.push($[0],$[1]);return P},np=function(c,h,m){var _=[c[0]-h[0],c[1]-h[1]],C=Math.sqrt(_[0]*_[0]+_[1]*_[1]),A=(C-m)/C;return A<0&&(A=1e-5),[h[0]+A*_[0],h[1]+A*_[1]]},Rr=function(c,h){var m=Xd(c,h);return il(m)},il=function(c){for(var h,m,_=c.length/2,C=1/0,A=1/0,E=-1/0,F=-1/0,P=0;P<_;P++)h=c[2*P],m=c[2*P+1],C=Math.min(C,h),E=Math.max(E,h),A=Math.min(A,m),F=Math.max(F,m);for(var $=2/(E-C),Z=2/(F-A),he=0;he<_;he++)h=c[2*he]=c[2*he]*$,m=c[2*he+1]=c[2*he+1]*Z,C=Math.min(C,h),E=Math.max(E,h),A=Math.min(A,m),F=Math.max(F,m);if(A<-1)for(var ge=0;ge<_;ge++)m=c[2*ge+1]=c[2*ge+1]+(-1-A);return c},Xd=function(c,h){var m=1/c*2*Math.PI,_=c%2==0?Math.PI/2+m/2:Math.PI/2;_+=h;for(var A,C=new Array(2*c),E=0;E<c;E++)A=E*m+_,C[2*E]=Math.cos(A),C[2*E+1]=Math.sin(-A);return C},Ef=function(c,h){return Math.min(c/4,h/4,8)},Xr=function(c,h){return Math.min(c/10,h/10,8)},fs=function(c,h){return{heightOffset:Math.min(15,.05*h),widthOffset:Math.min(100,.25*c),ctrlPtOffsetPct:.05}},Ou=mi({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(c){return 1}}),Ca={pageRank:function(c){for(var h=Ou(c),m=h.dampingFactor,_=h.precision,C=h.iterations,A=h.weight,E=this._private.cy,F=this.byGroup(),P=F.nodes,$=F.edges,Z=P.length,ge=$.length,ve=new Array(Z*Z),Ee=new Array(Z),Be=(1-m)/Z,Ue=0;Ue<Z;Ue++){for(var st=0;st<Z;st++)ve[Ue*Z+st]=0;Ee[Ue]=0}for(var wt=0;wt<ge;wt++){var Ut=$[wt],Gt=Ut.data("source"),xt=Ut.data("target");if(Gt!==xt){var Wt=P.indexOfId(Gt),Dt=P.indexOfId(xt),Kt=A(Ut);ve[Dt*Z+Wt]+=Kt,Ee[Wt]+=Kt}}for(var lt=1/Z+Be,Zt=0;Zt<Z;Zt++)if(0===Ee[Zt])for(var Vt=0;Vt<Z;Vt++)ve[Vt*Z+Zt]=lt;else for(var sn=0;sn<Z;sn++){var bn=sn*Z+Zt;ve[bn]=ve[bn]/Ee[Zt]+Be}for(var pi,zn=new Array(Z),jn=new Array(Z),Vn=0;Vn<Z;Vn++)zn[Vn]=1;for(var ci=0;ci<C;ci++){for(var Ai=0;Ai<Z;Ai++)jn[Ai]=0;for(var Oi=0;Oi<Z;Oi++)for(var Mi=0;Mi<Z;Mi++)jn[Oi]+=ve[Oi*Z+Mi]*zn[Mi];N_(jn),pi=zn,zn=jn,jn=pi;for(var Gn=0,_i=0;_i<Z;_i++){var Ni=pi[_i]-zn[_i];Gn+=Ni*Ni}if(Gn<_)break}return{rank:function(as){return as=E.collection(as)[0],zn[P.indexOf(as)]}}}},ac=mi({root:null,weight:function(c){return 1},directed:!1,alpha:0}),rl={degreeCentralityNormalized:function(c){c=ac(c);var h=this.cy(),m=this.nodes(),_=m.length;if(c.directed){for(var $={},Z={},he=0,ge=0,ve=0;ve<_;ve++){var Ee=m[ve],Be=Ee.id();c.root=Ee;var Ue=this.degreeCentrality(c);he<Ue.indegree&&(he=Ue.indegree),ge<Ue.outdegree&&(ge=Ue.outdegree),$[Be]=Ue.indegree,Z[Be]=Ue.outdegree}return{indegree:function(tt){return 0==he?0:(Ge(tt)&&(tt=h.filter(tt)),$[tt.id()]/he)},outdegree:function(tt){return 0===ge?0:(Ge(tt)&&(tt=h.filter(tt)),Z[tt.id()]/ge)}}}for(var C={},A=0,E=0;E<_;E++){var F=m[E];c.root=F;var P=this.degreeCentrality(c);A<P.degree&&(A=P.degree),C[F.id()]=P.degree}return{degree:function(tt){return 0===A?0:(Ge(tt)&&(tt=h.filter(tt)),C[tt.id()]/A)}}},degreeCentrality:function(c){c=ac(c);var h=this.cy(),m=this,C=c.root,A=c.weight,E=c.directed,F=c.alpha;if(C=h.collection(C)[0],E){for(var ge=C.connectedEdges(),ve=ge.filter(function(Gt){return Gt.target().same(C)&&m.has(Gt)}),Ee=ge.filter(function(Gt){return Gt.source().same(C)&&m.has(Gt)}),Be=ve.length,Ue=Ee.length,st=0,tt=0,wt=0;wt<ve.length;wt++)st+=A(ve[wt]);for(var Ut=0;Ut<Ee.length;Ut++)tt+=A(Ee[Ut]);return{indegree:Math.pow(Be,1-F)*Math.pow(st,F),outdegree:Math.pow(Ue,1-F)*Math.pow(tt,F)}}for(var P=C.connectedEdges().intersection(m),$=P.length,Z=0,he=0;he<P.length;he++)Z+=A(P[he]);return{degree:Math.pow($,1-F)*Math.pow(Z,F)}}};rl.dc=rl.degreeCentrality,rl.dcn=rl.degreeCentralityNormalised=rl.degreeCentralityNormalized;var Fu=mi({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),_c={closenessCentralityNormalized:function(c){for(var h=Fu(c),m=h.harmonic,_=h.weight,C=h.directed,A=this.cy(),E={},F=0,P=this.nodes(),$=this.floydWarshall({weight:_,directed:C}),Z=0;Z<P.length;Z++){for(var he=0,ge=P[Z],ve=0;ve<P.length;ve++)if(Z!==ve){var Ee=$.distance(ge,P[ve]);he+=m?1/Ee:Ee}m||(he=1/he),F<he&&(F=he),E[ge.id()]=he}return{closeness:function(Ue){return 0==F?0:(Ue=Ge(Ue)?A.filter(Ue)[0].id():Ue.id(),E[Ue]/F)}}},closenessCentrality:function(c){var h=Fu(c),m=h.root,_=h.weight,C=h.directed,A=h.harmonic;m=this.filter(m)[0];for(var E=this.dijkstra({root:m,weight:_,directed:C}),F=0,P=this.nodes(),$=0;$<P.length;$++){var Z=P[$];if(!Z.same(m)){var he=E.distanceTo(Z);F+=A?1/he:he}}return A?F:1/F}};_c.cc=_c.closenessCentrality,_c.ccn=_c.closenessCentralityNormalised=_c.closenessCentralityNormalized;var zr=mi({weight:null,directed:!1}),Ks={betweennessCentrality:function(c){for(var h=zr(c),m=h.directed,_=h.weight,C=null!=_,A=this.cy(),E=this.nodes(),F={},P={},$=0,Z={set:function(tt,wt){P[tt]=wt,wt>$&&($=wt)},get:function(tt){return P[tt]}},he=0;he<E.length;he++){var ge=E[he],ve=ge.id();F[ve]=m?ge.outgoers().nodes():ge.openNeighborhood().nodes(),Z.set(ve,0)}for(var Ee=function(tt){for(var wt=E[tt].id(),Ut=[],Gt={},xt={},Wt={},Dt=new q.default(function(Mi,Si){return Wt[Mi]-Wt[Si]}),Kt=0;Kt<E.length;Kt++){var Yt=E[Kt].id();Gt[Yt]=[],xt[Yt]=0,Wt[Yt]=1/0}for(xt[wt]=1,Wt[wt]=0,Dt.push(wt);!Dt.empty();){var lt=Dt.pop();if(Ut.push(lt),C)for(var Zt=0;Zt<F[lt].length;Zt++){var sn,Vt=F[lt][Zt],Ln=A.getElementById(lt);sn=Ln.edgesTo(Vt).length>0?Ln.edgesTo(Vt)[0]:Vt.edgesTo(Ln)[0];var bn=_(sn);Vt=Vt.id(),Wt[Vt]>Wt[lt]+bn&&(Wt[Vt]=Wt[lt]+bn,Dt.nodes.indexOf(Vt)<0?Dt.push(Vt):Dt.updateItem(Vt),xt[Vt]=0,Gt[Vt]=[]),Wt[Vt]==Wt[lt]+bn&&(xt[Vt]=xt[Vt]+xt[lt],Gt[Vt].push(lt))}else for(var zn=0;zn<F[lt].length;zn++){var jn=F[lt][zn].id();Wt[jn]==1/0&&(Dt.push(jn),Wt[jn]=Wt[lt]+1),Wt[jn]==Wt[lt]+1&&(xt[jn]=xt[jn]+xt[lt],Gt[jn].push(lt))}}for(var pi={},Vn=0;Vn<E.length;Vn++)pi[E[Vn].id()]=0;for(;Ut.length>0;){for(var ci=Ut.pop(),Ai=0;Ai<Gt[ci].length;Ai++){var Oi=Gt[ci][Ai];pi[Oi]=pi[Oi]+xt[Oi]/xt[ci]*(1+pi[ci])}ci!=E[tt].id()&&Z.set(ci,Z.get(ci)+pi[ci])}},Be=0;Be<E.length;Be++)Ee(Be);var Ue={betweenness:function(tt){var wt=A.collection(tt).id();return Z.get(wt)},betweennessNormalized:function(tt){if(0==$)return 0;var wt=A.collection(tt).id();return Z.get(wt)/$}};return Ue.betweennessNormalised=Ue.betweennessNormalized,Ue}};Ks.bc=Ks.betweennessCentrality;var Wa=mi({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(f){return 1}]}),ip=function(c,h){for(var m=0,_=0;_<h.length;_++)m+=h[_](c);return m},_h=function(c,h){for(var m,_=0;_<h;_++){m=0;for(var C=0;C<h;C++)m+=c[C*h+_];for(var A=0;A<h;A++)c[A*h+_]=c[A*h+_]/m}},Ll=function(c,h,m){for(var _=new Array(m*m),C=0;C<m;C++){for(var A=0;A<m;A++)_[C*m+A]=0;for(var E=0;E<m;E++)for(var F=0;F<m;F++)_[C*m+F]+=c[C*m+E]*h[E*m+F]}return _},Xp=function(c,h,m){for(var _=c.slice(0),C=1;C<m;C++)c=Ll(c,_,h);return c},bc=function(c,h,m){for(var _=new Array(h*h),C=0;C<h*h;C++)_[C]=Math.pow(c[C],m);return _h(_,h),_},fo=function(c,h,m,_){for(var C=0;C<m;C++)if(Math.round(c[C]*Math.pow(10,_))/Math.pow(10,_)!=Math.round(h[C]*Math.pow(10,_))/Math.pow(10,_))return!1;return!0},rp=function(c,h){for(var m=0;m<c.length;m++)if(!h[m]||c[m].id()!==h[m].id())return!1;return!0},Mf=function(c){for(var h=this.nodes(),m=this.edges(),_=this.cy(),C=function(c){return Wa(c)}(c),A={},E=0;E<h.length;E++)A[h[E].id()]=E;for(var Z,F=h.length,P=F*F,$=new Array(P),he=0;he<P;he++)$[he]=0;for(var ge=0;ge<m.length;ge++){var ve=m[ge],Ee=A[ve.source().id()],Be=A[ve.target().id()],Ue=ip(ve,C.attributes);$[Ee*F+Be]+=Ue,$[Be*F+Ee]+=Ue}(function(c,h,m){for(var _=0;_<h;_++)c[_*h+_]=m})($,F,C.multFactor),_h($,F);for(var st=!0,tt=0;st&&tt<C.maxIterations;)st=!1,Z=Xp($,F,C.expandFactor),$=bc(Z,F,C.inflateFactor),fo($,Z,P,4)||(st=!0),tt++;var wt=function(c,h,m,_){for(var C=[],A=0;A<h;A++){for(var E=[],F=0;F<h;F++)Math.round(1e3*c[A*h+F])/1e3>0&&E.push(m[F]);0!==E.length&&C.push(_.collection(E))}return C}($,F,h,_);return wt=function(c){for(var h=0;h<c.length;h++)for(var m=0;m<c.length;m++)h!=m&&rp(c[h],c[m])&&c.splice(m,1);return c}(wt),wt},eu={markovClustering:Mf,mcl:Mf},Fg=function(c){return c},sp=function(c,h){return Math.abs(h-c)},Td=function(c,h,m){return c+sp(h,m)},Md=function(c,h,m){return c+Math.pow(m-h,2)},ky=function(c){return Math.sqrt(c)},ja=function(c,h,m){return Math.max(c,sp(h,m))},op=function(c,h,m,_,C){for(var A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fg,E=_,$=0;$<c;$++)E=C(E,h($),m($));return A(E)},ap={euclidean:function(c,h,m){return c>=2?op(c,h,m,0,Md,ky):op(c,h,m,0,Td)},squaredEuclidean:function(c,h,m){return op(c,h,m,0,Md)},manhattan:function(c,h,m){return op(c,h,m,0,Td)},max:function(c,h,m){return op(c,h,m,-1/0,ja)}};function Bu(f,c,h,m,_,C){var A;return A=yt(f)?f:ap[f]||ap.euclidean,0===c&&yt(f)?A(_,C):A(c,h,m,_,C)}ap["squared-euclidean"]=ap.squaredEuclidean,ap.squaredeuclidean=ap.squaredEuclidean;var Yp=mi({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),lp=function(c){return Yp(c)},cp=function(c,h,m,_,C){var E="kMedoids"!==C?function(Z){return m[Z]}:function(Z){return _[Z](m)};return Bu(c,_.length,E,function(he){return _[he](h)},m,h)},Kh=function(c,h,m){for(var _=m.length,C=new Array(_),A=new Array(_),E=new Array(h),F=null,P=0;P<_;P++)C[P]=c.min(m[P]).value,A[P]=c.max(m[P]).value;for(var $=0;$<h;$++){F=[];for(var Z=0;Z<_;Z++)F[Z]=Math.random()*(A[Z]-C[Z])+C[Z];E[$]=F}return E},Pl=function(c,h,m,_,C){for(var A=1/0,E=0,F=0;F<h.length;F++){var P=cp(m,c,h[F],_,C);P<A&&(A=P,E=F)}return E},Dd=function(c,h,m){for(var _=[],C=null,A=0;A<h.length;A++)m[(C=h[A]).id()]===c&&_.push(C);return _},Au=function(c,h,m){return Math.abs(h-c)<=m},Yd=function(c,h,m){for(var _=0;_<c.length;_++)for(var C=0;C<c[_].length;C++)if(Math.abs(c[_][C]-h[_][C])>m)return!1;return!0},wv=function(c,h,m){for(var _=0;_<m;_++)if(c===h[_])return!0;return!1},Ng=function(c,h){var m=new Array(h);if(c.length<50)for(var _=0;_<h;_++){for(var C=c[Math.floor(Math.random()*c.length)];wv(C,m,_);)C=c[Math.floor(Math.random()*c.length)];m[_]=C}else for(var A=0;A<h;A++)m[A]=c[Math.floor(Math.random()*c.length)];return m},Bg=function(c,h,m){for(var _=0,C=0;C<h.length;C++)_+=cp("manhattan",h[C],c,m,"kMedoids");return _},On=function(c,h,m,_,C){for(var A,E,F=0;F<h.length;F++)for(var P=0;P<c.length;P++)_[F][P]=Math.pow(m[F][P],C.m);for(var $=0;$<c.length;$++)for(var Z=0;Z<C.attributes.length;Z++){A=0,E=0;for(var he=0;he<h.length;he++)A+=_[he][$]*C.attributes[Z](h[he]),E+=_[he][$];c[$][Z]=A/E}},Ci=function(c,h,m,_,C){for(var A=0;A<c.length;A++)h[A]=c[A].slice();for(var E,F,P,$=2/(C.m-1),Z=0;Z<m.length;Z++)for(var he=0;he<_.length;he++){E=0;for(var ge=0;ge<m.length;ge++)F=cp(C.distance,_[he],m[Z],C.attributes,"cmeans"),P=cp(C.distance,_[he],m[ge],C.attributes,"cmeans"),E+=Math.pow(F/P,$);c[he][Z]=1/E}},Jr=function(c){var C,A,E,F,P,h=this.cy(),m=this.nodes(),_=lp(c);F=new Array(m.length);for(var $=0;$<m.length;$++)F[$]=new Array(_.k);E=new Array(m.length);for(var Z=0;Z<m.length;Z++)E[Z]=new Array(_.k);for(var he=0;he<m.length;he++){for(var ge=0,ve=0;ve<_.k;ve++)E[he][ve]=Math.random(),ge+=E[he][ve];for(var Ee=0;Ee<_.k;Ee++)E[he][Ee]=E[he][Ee]/ge}A=new Array(_.k);for(var Be=0;Be<_.k;Be++)A[Be]=new Array(_.attributes.length);P=new Array(m.length);for(var Ue=0;Ue<m.length;Ue++)P[Ue]=new Array(_.k);for(var st=!0,tt=0;st&&tt<_.maxIterations;)st=!1,On(A,m,E,P,_),Ci(E,F,A,m,_),Yd(E,F,_.sensitivityThreshold)||(st=!0),tt++;return C=function(c,h,m,_){for(var C=new Array(m.k),A=0;A<C.length;A++)C[A]=[];for(var E,F,P=0;P<h.length;P++){E=-1/0,F=-1;for(var $=0;$<h[0].length;$++)h[P][$]>E&&(E=h[P][$],F=$);C[F].push(c[P])}for(var Z=0;Z<C.length;Z++)C[Z]=_.collection(C[Z]);return C}(m,E,_,h),{clusters:C,degreeOfMembership:E}},co={kMeans:function(c){var F,h=this.cy(),m=this.nodes(),_=null,C=lp(c),A=new Array(C.k),E={};F=C.testMode?"number"==typeof C.testCentroids?Kh(m,C.k,C.attributes):"object"===ee(C.testCentroids)?C.testCentroids:Kh(m,C.k,C.attributes):Kh(m,C.k,C.attributes);for(var P=!0,$=0;P&&$<C.maxIterations;){for(var Z=0;Z<m.length;Z++)E[(_=m[Z]).id()]=Pl(_,F,C.distance,C.attributes,"kMeans");P=!1;for(var he=0;he<C.k;he++){var ge=Dd(he,m,E);if(0!==ge.length){for(var ve=C.attributes.length,Ee=F[he],Be=new Array(ve),Ue=new Array(ve),st=0;st<ve;st++){Ue[st]=0;for(var tt=0;tt<ge.length;tt++)Ue[st]+=C.attributes[st](_=ge[tt]);Be[st]=Ue[st]/ge.length,Au(Be[st],Ee[st],C.sensitivityThreshold)||(P=!0)}F[he]=Be,A[he]=h.collection(ge)}}$++}return A},kMedoids:function(c){var E,P,h=this.cy(),m=this.nodes(),_=null,C=lp(c),A=new Array(C.k),F={},$=new Array(C.k);C.testMode?"number"==typeof C.testCentroids||(E="object"===ee(C.testCentroids)?C.testCentroids:Ng(m,C.k)):E=Ng(m,C.k);for(var Z=!0,he=0;Z&&he<C.maxIterations;){for(var ge=0;ge<m.length;ge++)F[(_=m[ge]).id()]=Pl(_,E,C.distance,C.attributes,"kMedoids");Z=!1;for(var ve=0;ve<E.length;ve++){var Ee=Dd(ve,m,F);if(0!==Ee.length){$[ve]=Bg(E[ve],Ee,C.attributes);for(var Be=0;Be<Ee.length;Be++)(P=Bg(Ee[Be],Ee,C.attributes))<$[ve]&&($[ve]=P,E[ve]=Ee[Be],Z=!0);A[ve]=h.collection(Ee)}}he++}return A},fuzzyCMeans:Jr,fcm:Jr},wa=mi({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Cc={single:"min",complete:"max"},Av=function(c,h,m,_,C){for(var F,A=0,E=1/0,P=C.attributes,$=function(Dt,Kt){return Bu(C.distance,P.length,function(Yt){return P[Yt](Dt)},function(Yt){return P[Yt](Kt)},Dt,Kt)},Z=0;Z<c.length;Z++){var he=c[Z].key,ge=m[he][_[he]];ge<E&&(A=he,E=ge)}if("threshold"===C.mode&&E>=C.threshold||"dendrogram"===C.mode&&1===c.length)return!1;var Be,ve=h[A],Ee=h[_[A]];Be="dendrogram"===C.mode?{left:ve,right:Ee,key:ve.key}:{value:ve.value.concat(Ee.value),key:ve.key},c[ve.index]=Be,c.splice(Ee.index,1),h[ve.key]=Be;for(var Ue=0;Ue<c.length;Ue++){var st=c[Ue];ve.key===st.key?F=1/0:"min"===C.linkage?(F=m[ve.key][st.key],m[ve.key][st.key]>m[Ee.key][st.key]&&(F=m[Ee.key][st.key])):"max"===C.linkage?(F=m[ve.key][st.key],m[ve.key][st.key]<m[Ee.key][st.key]&&(F=m[Ee.key][st.key])):F="mean"===C.linkage?(m[ve.key][st.key]*ve.size+m[Ee.key][st.key]*Ee.size)/(ve.size+Ee.size):"dendrogram"===C.mode?$(st.value,ve.value):$(st.value[0],ve.value[0]),m[ve.key][st.key]=m[st.key][ve.key]=F}for(var tt=0;tt<c.length;tt++){var wt=c[tt].key;if(_[wt]===ve.key||_[wt]===Ee.key){for(var Ut=wt,Gt=0;Gt<c.length;Gt++){var xt=c[Gt].key;m[wt][xt]<m[wt][Ut]&&(Ut=xt)}_[wt]=Ut}c[tt].index=tt}return ve.key=Ee.key=ve.index=Ee.index=null,!0},xv=function f(c,h,m){!c||(c.value?h.push(c.value):(c.left&&f(c.left,h),c.right&&f(c.right,h)))},Zd=function f(c,h){if(!c)return"";if(c.left&&c.right){var m=f(c.left,h),_=f(c.right,h),C=h.add({group:"nodes",data:{id:m+","+_}});return h.add({group:"edges",data:{source:m,target:C.id()}}),h.add({group:"edges",data:{source:_,target:C.id()}}),C.id()}return c.value?c.value.id():void 0},Iv=function f(c,h,m){if(!c)return[];var _=[],C=[],A=[];return 0===h?(c.left&&xv(c.left,_),c.right&&xv(c.right,C),A=_.concat(C),[m.collection(A)]):1===h?c.value?[m.collection(c.value)]:(c.left&&xv(c.left,_),c.right&&xv(c.right,C),[m.collection(_),m.collection(C)]):c.value?[m.collection(c.value)]:(c.left&&(_=f(c.left,h-1,m)),c.right&&(C=f(c.right,h-1,m)),_.concat(C))},U_=function(c){for(var h=this.cy(),m=this.nodes(),_=function(c){var h=wa(c),m=Cc[h.linkage];return null!=m&&(h.linkage=m),h}(c),C=_.attributes,A=function(tt,wt){return Bu(_.distance,C.length,function(Ut){return C[Ut](tt)},function(Ut){return C[Ut](wt)},tt,wt)},E=[],F=[],P=[],$=[],Z=0;Z<m.length;Z++){var he={value:"dendrogram"===_.mode?m[Z]:[m[Z]],key:Z,index:Z};E[Z]=he,$[Z]=he,F[Z]=[],P[Z]=0}for(var ge=0;ge<E.length;ge++)for(var ve=0;ve<=ge;ve++){var Ee;Ee="dendrogram"===_.mode?ge===ve?1/0:A(E[ge].value,E[ve].value):ge===ve?1/0:A(E[ge].value[0],E[ve].value[0]),F[ge][ve]=Ee,F[ve][ge]=Ee,Ee<F[ge][P[ge]]&&(P[ge]=ve)}for(var Be=Av(E,$,F,P,_);Be;)Be=Av(E,$,F,P,_);var Ue;return"dendrogram"===_.mode?(Ue=Iv(E[0],_.dendrogramDepth,h),_.addDendrogram&&Zd(E[0],h)):(Ue=new Array(E.length),E.forEach(function(st,tt){st.key=st.index=null,Ue[tt]=h.collection(st.value)})),Ue},zg={hierarchicalClustering:U_,hca:U_},Sv=mi({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Ma=function(c,h,m,_){var C=function(E,F){return _[F](E)};return-Bu(c,_.length,function(A){return C(h,A)},function(A){return C(m,A)},h,m)},Dm=function(c,h,m){for(var _=[],C=0;C<c;C++){for(var A=-1,E=-1/0,F=0;F<m.length;F++){var P=m[F];h[C*c+P]>E&&(A=P,E=h[C*c+P])}A>0&&_.push(A)}for(var $=0;$<m.length;$++)_[m[$]]=m[$];return _},H_=function(c){for(var h=this.cy(),m=this.nodes(),_=function(c){var h=c.damping,m=c.preference;.5<=h&&h<1||dt("Damping must range on [0.5, 1).  Got: ".concat(h));var _=["median","mean","min","max"];return _.some(function(C){return C===m})||Ot(m)||dt("Preference must be one of [".concat(_.map(function(C){return"'".concat(C,"'")}).join(", "),"] or a number.  Got: ").concat(m)),Sv(c)}(c),C={},A=0;A<m.length;A++)C[m[A].id()]=A;var E,F,P,$,Z,he,Dt;F=(E=m.length)*E,P=new Array(F);for(var ge=0;ge<F;ge++)P[ge]=-1/0;for(var ve=0;ve<E;ve++)for(var Ee=0;Ee<E;Ee++)ve!==Ee&&(P[ve*E+Ee]=Ma(_.distance,m[ve],m[Ee],_.attributes));$=function(c,h){var m;return m="median"===h?function(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,C=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],A=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(m<c.length&&c.splice(m,c.length-m),h>0&&c.splice(0,h)):c=c.slice(h,m);for(var E=0,F=c.length-1;F>=0;F--)A?isFinite(c[F])||(c[F]=-1/0,E++):c.splice(F,1);C&&c.sort(function(he,ge){return he-ge});var $=c.length,Z=Math.floor($/2);return $%2!=0?c[Z+1+E]:(c[Z-1+E]+c[Z+E])/2}(c):"mean"===h?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=0,C=0,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;A<m;A++){var E=c[A];isFinite(E)&&(_+=E,C++)}return _/C}(c):"min"===h?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=1/0,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;C<m;C++){var A=c[C];isFinite(A)&&(_=Math.min(A,_))}return _}(c):"max"===h?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=-1/0,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;C<m;C++){var A=c[C];isFinite(A)&&(_=Math.max(A,_))}return _}(c):h,m}(P,_.preference);for(var Be=0;Be<E;Be++)P[Be*E+Be]=$;Z=new Array(F);for(var Ue=0;Ue<F;Ue++)Z[Ue]=0;he=new Array(F);for(var st=0;st<F;st++)he[st]=0;for(var tt=new Array(E),wt=new Array(E),Ut=new Array(E),Gt=0;Gt<E;Gt++)tt[Gt]=0,wt[Gt]=0,Ut[Gt]=0;for(var xt=new Array(E*_.minIterations),Wt=0;Wt<xt.length;Wt++)xt[Wt]=0;for(Dt=0;Dt<_.maxIterations;Dt++){for(var Kt=0;Kt<E;Kt++){for(var Yt=-1/0,lt=-1/0,Zt=-1,Vt=0,Ln=0;Ln<E;Ln++)tt[Ln]=Z[Kt*E+Ln],(Vt=he[Kt*E+Ln]+P[Kt*E+Ln])>=Yt?(lt=Yt,Yt=Vt,Zt=Ln):Vt>lt&&(lt=Vt);for(var sn=0;sn<E;sn++)Z[Kt*E+sn]=(1-_.damping)*(P[Kt*E+sn]-Yt)+_.damping*tt[sn];Z[Kt*E+Zt]=(1-_.damping)*(P[Kt*E+Zt]-lt)+_.damping*tt[Zt]}for(var bn=0;bn<E;bn++){for(var zn=0,jn=0;jn<E;jn++)tt[jn]=he[jn*E+bn],wt[jn]=Math.max(0,Z[jn*E+bn]),zn+=wt[jn];zn-=wt[bn],wt[bn]=Z[bn*E+bn],zn+=wt[bn];for(var pi=0;pi<E;pi++)he[pi*E+bn]=(1-_.damping)*Math.min(0,zn-wt[pi])+_.damping*tt[pi];he[bn*E+bn]=(1-_.damping)*(zn-wt[bn])+_.damping*tt[bn]}for(var Vn=0,ci=0;ci<E;ci++){var Ai=he[ci*E+ci]+Z[ci*E+ci]>0?1:0;xt[Dt%_.minIterations*E+ci]=Ai,Vn+=Ai}if(Vn>0&&(Dt>=_.minIterations-1||Dt==_.maxIterations-1)){for(var Oi=0,Mi=0;Mi<E;Mi++){Ut[Mi]=0;for(var Si=0;Si<_.minIterations;Si++)Ut[Mi]+=xt[Si*E+Mi];(0===Ut[Mi]||Ut[Mi]===_.minIterations)&&Oi++}if(Oi===E)break}}for(var Gn=function(c,h,m){for(var _=[],C=0;C<c;C++)h[C*c+C]+m[C*c+C]>0&&_.push(C);return _}(E,Z,he),_i=function(c,h,m){for(var _=Dm(c,h,m),C=0;C<m.length;C++){for(var A=[],E=0;E<_.length;E++)_[E]===m[C]&&A.push(E);for(var F=-1,P=-1/0,$=0;$<A.length;$++){for(var Z=0,he=0;he<A.length;he++)Z+=h[A[he]*c+A[$]];Z>P&&(F=$,P=Z)}m[C]=A[F]}return Dm(c,h,m)}(E,P,Gn),Ni={},lr=0;lr<Gn.length;lr++)Ni[Gn[lr]]=[];for(var wr=0;wr<m.length;wr++){var _s=_i[C[m[wr].id()]];null!=_s&&Ni[_s].push(m[wr])}for(var Mr=new Array(Gn.length),br=0;br<Gn.length;br++)Mr[br]=h.collection(Ni[Gn[br]]);return Mr},up={affinityPropagation:H_,ap:H_},Lm=mi({root:void 0,directed:!1}),Na={hierholzer:function(c){if(!_t(c)){var h=arguments;c={root:h[0],directed:h[1]}}var F,P,$,m=Lm(c),_=m.root,C=m.directed,A=this,E=!1;_&&($=Ge(_)?this.filter(_)[0].id():_[0].id());var Z={},he={};A.forEach(C?function(st){var tt=st.id();if(st.isNode()){var wt=st.indegree(!0),Ut=st.outdegree(!0),Gt=wt-Ut,xt=Ut-wt;1==Gt?F?E=!0:F=tt:1==xt?P?E=!0:P=tt:(xt>1||Gt>1)&&(E=!0),Z[tt]=[],st.outgoers().forEach(function(Wt){Wt.isEdge()&&Z[tt].push(Wt.id())})}else he[tt]=[void 0,st.target().id()]}:function(st){var tt=st.id();st.isNode()?(st.degree(!0)%2&&(F?P?E=!0:P=tt:F=tt),Z[tt]=[],st.connectedEdges().forEach(function(Ut){return Z[tt].push(Ut.id())})):he[tt]=[st.source().id(),st.target().id()]});var ge={found:!1,trail:void 0};if(E)return ge;if(P&&F)if(C){if($&&P!=$)return ge;$=P}else{if($&&P!=$&&F!=$)return ge;$||($=P)}else $||($=A[0].id());var ve=function(tt){for(var Gt,xt,Wt,wt=tt,Ut=[tt];Z[wt].length;)Gt=Z[wt].shift(),xt=he[Gt][0],wt!=(Wt=he[Gt][1])?(Z[Wt]=Z[Wt].filter(function(Dt){return Dt!=Gt}),wt=Wt):!C&&wt!=xt&&(Z[xt]=Z[xt].filter(function(Dt){return Dt!=Gt}),wt=xt),Ut.unshift(Gt),Ut.unshift(wt);return Ut},Ee=[],Be=[];for(Be=ve($);1!=Be.length;)0==Z[Be[0]].length?(Ee.unshift(A.getElementById(Be.shift())),Ee.unshift(A.getElementById(Be.shift()))):Be=ve(Be.shift()).concat(Be);for(var Ue in Ee.unshift(A.getElementById(Be.shift())),Z)if(Z[Ue].length)return ge;return ge.found=!0,ge.trail=this.spawn(Ee,!0),ge}},Df=function(){var c=this,h={},m=0,_=0,C=[],A=[],E={},P=function Z(he,ge,ve){he===ve&&(_+=1),h[ge]={id:m,low:m++,cutVertex:!1};var Be,Ue,st,tt,Ee=c.getElementById(ge).connectedEdges().intersection(c);0===Ee.size()?C.push(c.spawn(c.getElementById(ge))):Ee.forEach(function(wt){Be=wt.source().id(),Ue=wt.target().id(),(st=Be===ge?Ue:Be)!==ve&&(tt=wt.id(),E[tt]||(E[tt]=!0,A.push({x:ge,y:st,edge:wt})),st in h?h[ge].low=Math.min(h[ge].low,h[st].id):(Z(he,st,ge),h[ge].low=Math.min(h[ge].low,h[st].low),h[ge].id<=h[st].low&&(h[ge].cutVertex=!0,function(he,ge){for(var ve=A.length-1,Ee=[],Be=c.spawn();A[ve].x!=he||A[ve].y!=ge;)Ee.push(A.pop().edge),ve--;Ee.push(A.pop().edge),Ee.forEach(function(Ue){var st=Ue.connectedNodes().intersection(c);Be.merge(Ue),st.forEach(function(tt){var wt=tt.id(),Ut=tt.connectedEdges().intersection(c);Be.merge(tt),Be.merge(h[wt].cutVertex?Ut.filter(function(Gt){return Gt.isLoop()}):Ut)})}),C.push(Be)}(ge,st))))})};c.forEach(function(Z){if(Z.isNode()){var he=Z.id();he in h||(_=0,P(he,he),h[he].cutVertex=_>1)}});var $=Object.keys(h).filter(function(Z){return h[Z].cutVertex}).map(function(Z){return c.getElementById(Z)});return{cut:c.spawn($),components:C}},dp=function(){var c=this,h={},m=0,_=[],C=[],A=c.spawn(c),E=function F(P){if(C.push(P),h[P]={index:m,low:m++,explored:!1},c.getElementById(P).connectedEdges().intersection(c).forEach(function(Ee){var Be=Ee.target().id();Be!==P&&(Be in h||F(Be),h[Be].explored||(h[P].low=Math.min(h[P].low,h[Be].low)))}),h[P].index===h[P].low){for(var Z=c.spawn();;){var he=C.pop();if(Z.merge(c.getElementById(he)),h[he].low=h[P].index,h[he].explored=!0,he===P)break}var ge=Z.edgesWith(Z),ve=Z.merge(ge);_.push(ve),A=A.difference(ve)}};return c.forEach(function(F){if(F.isNode()){var P=F.id();P in h||E(P)}}),{cut:A,components:_}},Pm={};[Zr,el,Xl,wl,wo,Sf,My,Ca,rl,_c,Ks,eu,co,zg,up,Na,{hopcroftTarjanBiconnected:Df,htbc:Df,htb:Df,hopcroftTarjanBiconnectedComponents:Df},{tarjanStronglyConnected:dp,tsc:dp,tscc:dp,tarjanStronglyConnectedComponents:dp}].forEach(function(f){Zi(Pm,f)});var qa=function f(c){if(!(this instanceof f))return new f(c);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof c&&c.call(this,this.fulfill.bind(this),this.reject.bind(this))};qa.prototype={fulfill:function(c){return hp(this,1,"fulfillValue",c)},reject:function(c){return hp(this,2,"rejectReason",c)},then:function(c,h){var m=this,_=new qa;return m.onFulfilled.push(By(c,_,"fulfill")),m.onRejected.push(By(h,_,"reject")),Ny(m),_.proxy}};var hp=function(c,h,m,_){return 0===c.state&&(c.state=h,c[m]=_,Ny(c)),c},Ny=function(c){1===c.state?Rm(c,"onFulfilled",c.fulfillValue):2===c.state&&Rm(c,"onRejected",c.rejectReason)},Rm=function(c,h,m){if(0!==c[h].length){var _=c[h];c[h]=[];var C=function(){for(var E=0;E<_.length;E++)_[E](m)};"function"==typeof setImmediate?setImmediate(C):setTimeout(C,0)}},By=function(c,h,m){return function(_){if("function"!=typeof c)h[m].call(h,_);else{var C;try{C=c(_)}catch(A){return void h.reject(A)}Mv(h,C)}}},Mv=function f(c,h){if(c!==h&&c.proxy!==h){var m;if("object"===ee(h)&&null!==h||"function"==typeof h)try{m=h.then}catch(C){return void c.reject(C)}if("function"!=typeof m)c.fulfill(h);else{var _=!1;try{m.call(h,function(C){_||(_=!0,C===h?c.reject(new TypeError("circular thenable chain")):f(c,C))},function(C){_||(_=!0,c.reject(C))})}catch(C){_||c.reject(C)}}}else c.reject(new TypeError("cannot resolve promise with itself"))};qa.all=function(f){return new qa(function(c,h){for(var m=new Array(f.length),_=0,C=function(F,P){m[F]=P,++_===f.length&&c(m)},A=0;A<f.length;A++)!function(E){var F=f[E];null!=F&&null!=F.then?F.then(function(Z){C(E,Z)},function(Z){h(Z)}):C(E,F)}(A)})},qa.resolve=function(f){return new qa(function(c,h){c(f)})},qa.reject=function(f){return new qa(function(c,h){h(f)})};var Da=typeof Promise<"u"?Promise:qa,Hg=function(c,h,m){var _=wn(c),C=!_,A=this._private=Zi({duration:1e3},h,m);if(A.target=c,A.style=A.style||A.css,A.started=!1,A.playing=!1,A.hooked=!1,A.applying=!1,A.progress=0,A.completes=[],A.frames=[],A.complete&&yt(A.complete)&&A.completes.push(A.complete),C){var E=c.position();A.startPosition=A.startPosition||{x:E.x,y:E.y},A.startStyle=A.startStyle||c.cy().style().getAnimationStartStyle(c,A.style)}if(_){var F=c.pan();A.startPan={x:F.x,y:F.y},A.startZoom=c.zoom()}this.length=1,this[0]=this},Zp=Hg.prototype;Zi(Zp,{instanceString:function(){return"animation"},hook:function(){var c=this._private;if(!c.hooked){var m=c.target._private.animation;(c.queue?m.queue:m.current).push(this),Ze(c.target)&&c.target.cy().addToAnimationPool(c.target),c.hooked=!0}return this},play:function(){var c=this._private;return 1===c.progress&&(c.progress=0),c.playing=!0,c.started=!1,c.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var c=this._private;return c.applying=!0,c.started=!1,c.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var c=this._private;return c.playing=!1,c.started=!1,this},stop:function(){var c=this._private;return c.playing=!1,c.started=!1,c.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(c){var h=this._private;return void 0===c?h.progress*h.duration:this.progress(c/h.duration)},progress:function(c){var h=this._private,m=h.playing;return void 0===c?h.progress:(m&&this.pause(),h.progress=c,h.started=!1,m&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var c=this._private,h=c.playing;h&&this.pause(),c.progress=1-c.progress,c.started=!1;var m=function(P,$){var Z=c[P];null!=Z&&(c[P]=c[$],c[$]=Z)};if(m("zoom","startZoom"),m("pan","startPan"),m("position","startPosition"),c.style)for(var _=0;_<c.style.length;_++){var C=c.style[_],A=C.name,E=c.startStyle[A];c.startStyle[A]=C,c.style[_]=E}return h&&this.play(),this},promise:function(c){var m,h=this._private;return m="frame"===c?h.frames:h.completes,new Da(function(_,C){m.push(function(){_()})})}}),Zp.complete=Zp.completed,Zp.run=Zp.play,Zp.running=Zp.playing;var Ld={data:function(c){return c=Zi({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(_){},beforeSet:function(_,C){},onSet:function(_){},canSet:function(_){return!0}},c),function(_,C){var A=c,E=this,F=void 0!==E.length,P=F?E:[E],$=F?E[0]:E;if(Ge(_)){var ge,he=-1!==_.indexOf(".")&&se.default(_);if(A.allowGetting&&void 0===C)return $&&(A.beforeGet($),ge=he&&void 0===$._private[A.field][_]?ne.default($._private[A.field],he):$._private[A.field][_]),ge;if(A.allowSetting&&void 0!==C&&!A.immutableKeys[_]){var Ee=Ce({},_,C);A.beforeSet(E,Ee);for(var Be=0,Ue=P.length;Be<Ue;Be++){var st=P[Be];A.canSet(st)&&(he&&void 0===$._private[A.field][_]?te.default(st._private[A.field],he,C):st._private[A.field][_]=C)}A.updateStyle&&E.updateStyle(),A.onSet(E),A.settingTriggersEvent&&E[A.triggerFnName](A.settingEvent)}}else if(A.allowSetting&&_t(_)){var wt,Ut,tt=_,Gt=Object.keys(tt);A.beforeSet(E,tt);for(var xt=0;xt<Gt.length;xt++)if(Ut=tt[wt=Gt[xt]],!A.immutableKeys[wt])for(var Dt=0;Dt<P.length;Dt++){var Kt=P[Dt];A.canSet(Kt)&&(Kt._private[A.field][wt]=Ut)}A.updateStyle&&E.updateStyle(),A.onSet(E),A.settingTriggersEvent&&E[A.triggerFnName](A.settingEvent)}else if(A.allowBinding&&yt(_))E.on(A.bindingEvent,_);else if(A.allowGetting&&void 0===_){var lt;return $&&(A.beforeGet($),lt=$._private[A.field]),lt}return E}},removeData:function(c){return c=Zi({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},c),function(_){var C=c,A=this,F=void 0!==A.length?A:[A];if(Ge(_)){for(var P=_.split(/\s+/),$=P.length,Z=0;Z<$;Z++){var he=P[Z];if(!le(he)&&!C.immutableKeys[he])for(var ve=0,Ee=F.length;ve<Ee;ve++)F[ve]._private[C.field][he]=void 0}C.triggerEvent&&A[C.triggerFnName](C.event)}else if(void 0===_){for(var Be=0,Ue=F.length;Be<Ue;Be++)for(var st=F[Be]._private[C.field],tt=Object.keys(st),wt=0;wt<tt.length;wt++){var Ut=tt[wt];!C.immutableKeys[Ut]&&(st[Ut]=void 0)}C.triggerEvent&&A[C.triggerFnName](C.event)}return A}}},G_={eventAliasesOn:function(c){var h=c;h.addListener=h.listen=h.bind=h.on,h.unlisten=h.unbind=h.off=h.removeListener,h.trigger=h.emit,h.pon=h.promiseOn=function(m,_){var C=this,A=Array.prototype.slice.call(arguments,0);return new Da(function(E,F){var $=A.concat([function(ge){C.off.apply(C,Z),E(ge)}]),Z=$.concat([]);C.on.apply(C,$)})}}},Us={};[{animated:function(){return function(){var h=this,_=void 0!==h.length?h:[h];if(!(this._private.cy||this).styleEnabled())return!1;var A=_[0];return A?A._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var h=this,_=void 0!==h.length?h:[h];if(!(this._private.cy||this).styleEnabled())return this;for(var A=0;A<_.length;A++)_[A]._private.animation.queue=[];return this}},delay:function(){return function(h,m){return(this._private.cy||this).styleEnabled()?this.animate({delay:h,duration:h,complete:m}):this}},delayAnimation:function(){return function(h,m){return(this._private.cy||this).styleEnabled()?this.animation({delay:h,duration:h,complete:m}):this}},animation:function(){return function(h,m){var _=this,C=void 0!==_.length,A=C?_:[_],E=this._private.cy||this,F=!C,P=!F;if(!E.styleEnabled())return this;var $=E.style();if(h=Zi({},h,m),0===Object.keys(h).length)return new Hg(A[0],h);switch(void 0===h.duration&&(h.duration=400),h.duration){case"slow":h.duration=600;break;case"fast":h.duration=200}if(P&&(h.style=$.getPropsList(h.style||h.css),h.css=void 0),P&&null!=h.renderedPosition){var he=h.renderedPosition,ge=E.pan(),ve=E.zoom();h.position=Zc(he,ve,ge)}if(F&&null!=h.panBy){var Ee=h.panBy,Be=E.pan();h.pan={x:Be.x+Ee.x,y:Be.y+Ee.y}}var Ue=h.center||h.centre;if(F&&null!=Ue){var st=E.getCenterPan(Ue.eles,h.zoom);null!=st&&(h.pan=st)}if(F&&null!=h.fit){var tt=h.fit,wt=E.getFitViewport(tt.eles||tt.boundingBox,tt.padding);null!=wt&&(h.pan=wt.pan,h.zoom=wt.zoom)}if(F&&_t(h.zoom)){var Ut=E.getZoomedViewport(h.zoom);null!=Ut?(Ut.zoomed&&(h.zoom=Ut.zoom),Ut.panned&&(h.pan=Ut.pan)):h.zoom=null}return new Hg(A[0],h)}},animate:function(){return function(h,m){var _=this,A=void 0!==_.length?_:[_];if(!(this._private.cy||this).styleEnabled())return this;m&&(h=Zi({},h,m));for(var F=0;F<A.length;F++){var P=A[F],$=P.animated()&&(void 0===h.queue||h.queue);P.animation(h,$?{queue:!0}:void 0).play()}return this}},stop:function(){return function(h,m){var _=this,A=void 0!==_.length?_:[_],E=this._private.cy||this;if(!E.styleEnabled())return this;for(var F=0;F<A.length;F++){for(var $=A[F]._private,Z=$.animation.current,he=0;he<Z.length;he++)m&&(Z[he]._private.duration=0);h&&($.animation.queue=[]),m||($.animation.current=[])}return E.notify("draw"),this}}},Ld,G_].forEach(function(f){Zi(Us,f)});var Ul={animate:Us.animate(),animation:Us.animation(),animated:Us.animated(),clearQueue:Us.clearQueue(),delay:Us.delay(),delayAnimation:Us.delayAnimation(),stop:Us.stop()},tu={classes:function(c){var h=this;if(void 0===c){var m=[];return h[0]._private.classes.forEach(function(ve){return m.push(ve)}),m}mt(c)||(c=(c||"").match(/\S+/g)||[]);for(var _=[],C=new hs(c),A=0;A<h.length;A++){for(var E=h[A],F=E._private,P=F.classes,$=!1,Z=0;Z<c.length;Z++)if(!P.has(c[Z])){$=!0;break}$||($=P.size!==c.length),$&&(F.classes=C,_.push(E))}return _.length>0&&this.spawn(_).updateStyle().emit("class"),h},addClass:function(c){return this.toggleClass(c,!0)},hasClass:function(c){var h=this[0];return null!=h&&h._private.classes.has(c)},toggleClass:function(c,h){mt(c)||(c=c.match(/\S+/g)||[]);for(var m=this,_=void 0===h,C=[],A=0,E=m.length;A<E;A++)for(var F=m[A],P=F._private.classes,$=!1,Z=0;Z<c.length;Z++){var he=c[Z],ge=P.has(he),ve=!1;h||_&&!ge?(P.add(he),ve=!0):(!h||_&&ge)&&(P.delete(he),ve=!0),!$&&ve&&(C.push(F),$=!0)}return C.length>0&&this.spawn(C).updateStyle().emit("class"),m},removeClass:function(c){return this.toggleClass(c,!1)},flashClass:function(c,h){var m=this;if(null==h)h=250;else if(0===h)return m;return m.addClass(c),setTimeout(function(){m.removeClass(c)},h),m}};tu.className=tu.classNames=tu.classes;var jo={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:Me,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};jo.variable="(?:[\\w-.]|(?:\\\\"+jo.metaChar+"))+",jo.className="(?:[\\w-]|(?:\\\\"+jo.metaChar+"))+",jo.value=jo.string+"|"+jo.number,jo.id=jo.variable,function(){var f,c,h;for(f=jo.comparatorOp.split("|"),h=0;h<f.length;h++)jo.comparatorOp+="|@"+(c=f[h]);for(f=jo.comparatorOp.split("|"),h=0;h<f.length;h++)!((c=f[h]).indexOf("!")>=0)&&"="!==c&&(jo.comparatorOp+="|\\!"+c)}();var go=[{selector:":selected",matches:function(c){return c.selected()}},{selector:":unselected",matches:function(c){return!c.selected()}},{selector:":selectable",matches:function(c){return c.selectable()}},{selector:":unselectable",matches:function(c){return!c.selectable()}},{selector:":locked",matches:function(c){return c.locked()}},{selector:":unlocked",matches:function(c){return!c.locked()}},{selector:":visible",matches:function(c){return c.visible()}},{selector:":hidden",matches:function(c){return!c.visible()}},{selector:":transparent",matches:function(c){return c.transparent()}},{selector:":grabbed",matches:function(c){return c.grabbed()}},{selector:":free",matches:function(c){return!c.grabbed()}},{selector:":removed",matches:function(c){return c.removed()}},{selector:":inside",matches:function(c){return!c.removed()}},{selector:":grabbable",matches:function(c){return c.grabbable()}},{selector:":ungrabbable",matches:function(c){return!c.grabbable()}},{selector:":animated",matches:function(c){return c.animated()}},{selector:":unanimated",matches:function(c){return!c.animated()}},{selector:":parent",matches:function(c){return c.isParent()}},{selector:":childless",matches:function(c){return c.isChildless()}},{selector:":child",matches:function(c){return c.isChild()}},{selector:":orphan",matches:function(c){return c.isOrphan()}},{selector:":nonorphan",matches:function(c){return c.isChild()}},{selector:":compound",matches:function(c){return c.isNode()?c.isParent():c.source().isParent()||c.target().isParent()}},{selector:":loop",matches:function(c){return c.isLoop()}},{selector:":simple",matches:function(c){return c.isSimple()}},{selector:":active",matches:function(c){return c.active()}},{selector:":inactive",matches:function(c){return!c.active()}},{selector:":backgrounding",matches:function(c){return c.backgrounding()}},{selector:":nonbackgrounding",matches:function(c){return!c.backgrounding()}}].sort(function(f,c){return function(c,h){return-1*os(c,h)}(f.selector,c.selector)}),ps=function(){for(var c,f={},h=0;h<go.length;h++)f[(c=go[h]).selector]=c.matches;return f}(),Is="("+go.map(function(f){return f.selector}).join("|")+")",Ps=function(c){return c.replace(new RegExp("\\\\("+jo.metaChar+")","g"),function(h,m){return m})},nu=function(c,h,m){c[c.length-1]=m},bh=[{name:"group",query:!0,regex:"("+jo.group+")",populate:function(c,h,m){var C=Re(m,1)[0];h.checks.push({type:0,value:"*"===C?C:C+"s"})}},{name:"state",query:!0,regex:Is,populate:function(c,h,m){var _=Re(m,1);h.checks.push({type:7,value:_[0]})}},{name:"id",query:!0,regex:"\\#("+jo.id+")",populate:function(c,h,m){var _=Re(m,1);h.checks.push({type:8,value:Ps(_[0])})}},{name:"className",query:!0,regex:"\\.("+jo.className+")",populate:function(c,h,m){var _=Re(m,1);h.checks.push({type:9,value:Ps(_[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+jo.variable+")\\s*\\]",populate:function(c,h,m){var _=Re(m,1);h.checks.push({type:4,field:Ps(_[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+jo.variable+")\\s*("+jo.comparatorOp+")\\s*("+jo.value+")\\s*\\]",populate:function(c,h,m){var _=Re(m,3),C=_[0],A=_[1],E=_[2];E=null!=new RegExp("^"+jo.string+"$").exec(E)?E.substring(1,E.length-1):parseFloat(E),h.checks.push({type:3,field:Ps(C),operator:A,value:E})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+jo.boolOp+")\\s*("+jo.variable+")\\s*\\]",populate:function(c,h,m){var _=Re(m,2),C=_[0];h.checks.push({type:5,field:Ps(_[1]),operator:C})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+jo.meta+")\\s*("+jo.comparatorOp+")\\s*("+jo.number+")\\s*\\]\\]",populate:function(c,h,m){var _=Re(m,3),A=_[1],E=_[2];h.checks.push({type:6,field:Ps(_[0]),operator:A,value:parseFloat(E)})}},{name:"nextQuery",separator:!0,regex:jo.separator,populate:function(c,h){var m=c.currentSubject,_=c.edgeCount,C=c.compoundCount,A=c[c.length-1];return null!=m&&(A.subject=m,c.currentSubject=null),A.edgeCount=_,A.compoundCount=C,c.edgeCount=0,c.compoundCount=0,c[c.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:jo.directedEdge,populate:function(c,h){if(null==c.currentSubject){var m={checks:[]},C={checks:[]};return m.checks.push({type:11,source:h,target:C}),nu(c,0,m),c.edgeCount++,C}var A={checks:[]},F={checks:[]};return A.checks.push({type:12,source:h,target:F}),nu(c,0,A),c.edgeCount++,F}},{name:"undirectedEdge",separator:!0,regex:jo.undirectedEdge,populate:function(c,h){if(null==c.currentSubject){var m={checks:[]},C={checks:[]};return m.checks.push({type:10,nodes:[h,C]}),nu(c,0,m),c.edgeCount++,C}var A={checks:[]},F={checks:[]};return A.checks.push({type:14,node:h,neighbor:F}),nu(c,0,A),F}},{name:"child",separator:!0,regex:jo.child,populate:function(c,h){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:15,parent:c[c.length-1],child:_}),nu(c,0,m),c.compoundCount++,_}if(c.currentSubject===h){var A={checks:[]},F={checks:[]},P={checks:[]},$={checks:[]},Z={checks:[]};return A.checks.push({type:19,left:c[c.length-1],right:F,subject:P}),P.checks=h.checks,h.checks=[{type:20}],Z.checks.push({type:20}),F.checks.push({type:17,parent:Z,child:$}),nu(c,0,A),c.currentSubject=P,c.compoundCount++,$}var he={checks:[]},ge={checks:[]},ve=[{type:17,parent:he,child:ge}];return he.checks=h.checks,h.checks=ve,c.compoundCount++,ge}},{name:"descendant",separator:!0,regex:jo.descendant,populate:function(c,h){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:16,ancestor:c[c.length-1],descendant:_}),nu(c,0,m),c.compoundCount++,_}if(c.currentSubject===h){var A={checks:[]},F={checks:[]},P={checks:[]},$={checks:[]},Z={checks:[]};return A.checks.push({type:19,left:c[c.length-1],right:F,subject:P}),P.checks=h.checks,h.checks=[{type:20}],Z.checks.push({type:20}),F.checks.push({type:18,ancestor:Z,descendant:$}),nu(c,0,A),c.currentSubject=P,c.compoundCount++,$}var he={checks:[]},ge={checks:[]},ve=[{type:18,ancestor:he,descendant:ge}];return he.checks=h.checks,h.checks=ve,c.compoundCount++,ge}},{name:"subject",modifier:!0,regex:jo.subject,populate:function(c,h){if(null!=c.currentSubject&&c.currentSubject!==h)return pe("Redefinition of subject in selector `"+c.toString()+"`"),!1;c.currentSubject=h;var _=c[c.length-1].checks[0],C=null==_?null:_.type;11===C?_.type=13:10===C&&(_.type=14,_.node=_.nodes[1],_.neighbor=_.nodes[0],_.nodes=null)}}];bh.forEach(function(f){return f.regexObj=new RegExp("^"+f.regex)});var Qp=function(c){for(var h,m,_,C=0;C<bh.length;C++){var A=bh[C],E=A.name,F=c.match(A.regexObj);if(null!=F){m=F,h=A,_=E,c=c.substring(F[0].length);break}}return{expr:h,match:m,name:_,remaining:c}},xu={parse:function(c){var h=this,m=h.inputText=c,_=h[0]={checks:[]};for(h.length=1,m=function(c){var h=c.match(/^\s+/);return h&&(c=c.substring(h[0].length)),c}(m);;){var C=Qp(m);if(null==C.expr)return pe("The selector `"+c+"`is invalid"),!1;var A=C.match.slice(1),E=C.expr.populate(h,_,A);if(!1===E)return!1;if(null!=E&&(_=E),(m=C.remaining).match(/^\s*$/))break}var F=h[h.length-1];null!=h.currentSubject&&(F.subject=h.currentSubject),F.edgeCount=h.edgeCount,F.compoundCount=h.compoundCount;for(var P=0;P<h.length;P++){var $=h[P];if($.compoundCount>0&&$.edgeCount>0)return pe("The selector `"+c+"` is invalid because it uses both a compound selector and an edge selector"),!1;if($.edgeCount>1)return pe("The selector `"+c+"` is invalid because it uses multiple edge selectors"),!1;1===$.edgeCount&&pe("The selector `"+c+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var c=function($){return $??""},h=function($){return Ge($)?'"'+$+'"':c($)},m=function($){return" "+$+" "},C=function($,Z){return $.checks.reduce(function(he,ge,ve){return he+(Z===$&&0===ve?"$":"")+function($,Z){var ge=$.value;switch($.type){case 0:var ve=c(ge);return ve.substring(0,ve.length-1);case 3:return"["+$.field+m(c($.operator))+h(ge)+"]";case 5:var st=$.field;return"["+c($.operator)+st+"]";case 4:return"["+$.field+"]";case 6:return"[["+$.field+m(c($.operator))+h(ge)+"]]";case 7:return ge;case 8:return"#"+ge;case 9:return"."+ge;case 17:case 15:return C($.parent,Z)+m(">")+C($.child,Z);case 18:case 16:return C($.ancestor,Z)+" "+C($.descendant,Z);case 19:var Gt=C($.left,Z),xt=C($.subject,Z),Wt=C($.right,Z);return Gt+(Gt.length>0?" ":"")+xt+Wt;case 20:return""}}(ge,Z)},"")},A="",E=0;E<this.length;E++){var F=this[E];A+=C(F,F.subject),this.length>1&&E<this.length-1&&(A+=", ")}return this.toStringCache=A,A}},Pi=function(c,h,m){var _,F,P,C=Ge(c),A=Ot(c),E=Ge(m),$=!1,Z=!1,he=!1;switch(h.indexOf("!")>=0&&(h=h.replace("!",""),Z=!0),h.indexOf("@")>=0&&(h=h.replace("@",""),$=!0),(C||E||$)&&(F=C||A?""+c:"",P=""+m),$&&(c=F=F.toLowerCase(),m=P=P.toLowerCase()),h){case"*=":_=F.indexOf(P)>=0;break;case"$=":_=F.indexOf(P,F.length-P.length)>=0;break;case"^=":_=0===F.indexOf(P);break;case"=":_=c===m;break;case">":he=!0,_=c>m;break;case">=":he=!0,_=c>=m;break;case"<":he=!0,_=c<m;break;case"<=":he=!0,_=c<=m;break;default:_=!1}return Z&&(null!=c||!he)&&(_=!_),_},Pt=function(c,h){return c.data(h)},aa=[],Zo=function(c,h){return c.checks.every(function(m){return aa[m.type](m,h)})};aa[0]=function(f,c){var h=f.value;return"*"===h||h===c.group()},aa[7]=function(f,c){return function(c,h){return ps[c](h)}(f.value,c)},aa[8]=function(f,c){var h=f.value;return c.id()===h},aa[9]=function(f,c){return c.hasClass(f.value)},aa[6]=function(f,c){var m=f.operator,_=f.value;return Pi(function(c,h){return c[h]()}(c,f.field),m,_)},aa[3]=function(f,c){var m=f.operator,_=f.value;return Pi(Pt(c,f.field),m,_)},aa[5]=function(f,c){var m=f.operator;return function(c,h){switch(h){case"?":return!!c;case"!":return!c;case"^":return void 0===c}}(Pt(c,f.field),m)},aa[4]=function(f,c){return function(c){return void 0!==c}(Pt(c,f.field))},aa[10]=function(f,c){var h=f.nodes[0],m=f.nodes[1],_=c.source(),C=c.target();return Zo(h,_)&&Zo(m,C)||Zo(m,_)&&Zo(h,C)},aa[14]=function(f,c){return Zo(f.node,c)&&c.neighborhood().some(function(h){return h.isNode()&&Zo(f.neighbor,h)})},aa[11]=function(f,c){return Zo(f.source,c.source())&&Zo(f.target,c.target())},aa[12]=function(f,c){return Zo(f.source,c)&&c.outgoers().some(function(h){return h.isNode()&&Zo(f.target,h)})},aa[13]=function(f,c){return Zo(f.target,c)&&c.incomers().some(function(h){return h.isNode()&&Zo(f.source,h)})},aa[15]=function(f,c){return Zo(f.child,c)&&Zo(f.parent,c.parent())},aa[17]=function(f,c){return Zo(f.parent,c)&&c.children().some(function(h){return Zo(f.child,h)})},aa[16]=function(f,c){return Zo(f.descendant,c)&&c.ancestors().some(function(h){return Zo(f.ancestor,h)})},aa[18]=function(f,c){return Zo(f.ancestor,c)&&c.descendants().some(function(h){return Zo(f.descendant,h)})},aa[19]=function(f,c){return Zo(f.subject,c)&&Zo(f.left,c)&&Zo(f.right,c)},aa[20]=function(){return!0},aa[1]=function(f,c){return f.value.has(c)},aa[2]=function(f,c){return(0,f.value)(c)};var Jp={matches:function(c){for(var m=0;m<this.length;m++)if(Zo(this[m],c))return!0;return!1},filter:function(c){var h=this;if(1===h.length&&1===h[0].checks.length&&8===h[0].checks[0].type)return c.getElementById(h[0].checks[0].value).collection();var m=function(C){for(var A=0;A<h.length;A++)if(Zo(h[A],C))return!0;return!1};return null==h.text()&&(m=function(){return!0}),c.filter(m)}},fp=function(c){this.inputText=c,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==c||Ge(c)&&c.match(/^\s*$/)||(Ze(c)?this.addQuery({checks:[{type:1,value:c.collection()}]}):yt(c)?this.addQuery({checks:[{type:2,value:c}]}):Ge(c)?this.parse(c)||(this.invalid=!0):dt("A selector must be created from a string; found "))},Or=fp.prototype;[xu,Jp].forEach(function(f){return Zi(Or,f)}),Or.text=function(){return this.inputText},Or.size=function(){return this.length},Or.eq=function(f){return this[f]},Or.sameText=function(f){return!this.invalid&&!f.invalid&&this.text()===f.text()},Or.addQuery=function(f){this[this.length++]=f},Or.selector=Or.toString;var lc={allAre:function(c){var h=new fp(c);return this.every(function(m){return h.matches(m)})},is:function(c){var h=new fp(c);return this.some(function(m){return h.matches(m)})},some:function(c,h){for(var m=0;m<this.length;m++)if(h?c.apply(h,[this[m],m,this]):c(this[m],m,this))return!0;return!1},every:function(c,h){for(var m=0;m<this.length;m++)if(!(h?c.apply(h,[this[m],m,this]):c(this[m],m,this)))return!1;return!0},same:function(c){if(this===c)return!0;c=this.cy().collection(c);var h=this.length;return h===c.length&&(1===h?this[0]===c[0]:this.every(function(_){return c.hasElementWithId(_.id())}))},anySame:function(c){return c=this.cy().collection(c),this.some(function(h){return c.hasElementWithId(h.id())})},allAreNeighbors:function(c){c=this.cy().collection(c);var h=this.neighborhood();return c.every(function(m){return h.hasElementWithId(m.id())})},contains:function(c){c=this.cy().collection(c);var h=this;return c.every(function(m){return h.hasElementWithId(m.id())})}};lc.allAreNeighbours=lc.allAreNeighbors,lc.has=lc.contains,lc.equal=lc.equals=lc.same;var Zh,pp,Xa=function(c,h){return function(_,C,A,E){var $,F=_,P=this;if(null==F?$="":Ze(F)&&1===F.length&&($=F.id()),1===P.length&&$){var Z=P[0]._private,he=Z.traversalCache=Z.traversalCache||{},ge=he[h]=he[h]||[],ve=xs($);return ge[ve]||(ge[ve]=c.call(P,_,C,A,E))}return c.call(P,_,C,A,E)}},la={parent:function(c){var h=[];if(1===this.length){var m=this[0]._private.parent;if(m)return m}for(var _=0;_<this.length;_++){var A=this[_]._private.parent;A&&h.push(A)}return this.spawn(h,!0).filter(c)},parents:function(c){for(var h=[],m=this.parent();m.nonempty();){for(var _=0;_<m.length;_++)h.push(m[_]);m=m.parent()}return this.spawn(h,!0).filter(c)},commonAncestors:function(c){for(var h,m=0;m<this.length;m++){var C=this[m].parents();h=(h=h||C).intersect(C)}return h.filter(c)},orphans:function(c){return this.stdFilter(function(h){return h.isOrphan()}).filter(c)},nonorphans:function(c){return this.stdFilter(function(h){return h.isChild()}).filter(c)},children:Xa(function(f){for(var c=[],h=0;h<this.length;h++)for(var _=this[h]._private.children,C=0;C<_.length;C++)c.push(_[C]);return this.spawn(c,!0).filter(f)},"children"),siblings:function(c){return this.parent().children().not(this).filter(c)},isParent:function(){var c=this[0];if(c)return c.isNode()&&0!==c._private.children.length},isChildless:function(){var c=this[0];if(c)return c.isNode()&&0===c._private.children.length},isChild:function(){var c=this[0];if(c)return c.isNode()&&null!=c._private.parent},isOrphan:function(){var c=this[0];if(c)return c.isNode()&&null==c._private.parent},descendants:function(c){var h=[];return function m(_){for(var C=0;C<_.length;C++){var A=_[C];h.push(A),A.children().nonempty()&&m(A.children())}}(this.children()),this.spawn(h,!0).filter(c)}};function pl(f,c,h,m){for(var _=[],C=new hs,E=f.cy().hasCompoundNodes(),F=0;F<f.length;F++){var P=f[F];h?_.push(P):E&&m(_,C,P)}for(;_.length>0;){var $=_.shift();c($),C.add($.id()),E&&m(_,C,$)}return f}function Tr(f,c,h){if(h.isParent())for(var m=h._private.children,_=0;_<m.length;_++){var C=m[_];c.has(C.id())||f.push(C)}}function Qd(f,c,h){if(h.isChild()){var m=h._private.parent;c.has(m.id())||f.push(m)}}function Hl(f,c,h){Qd(f,c,h),Tr(f,c,h)}la.forEachDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return pl(this,f,c,Tr)},la.forEachUp=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return pl(this,f,c,Qd)},la.forEachUpAndDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return pl(this,f,c,Hl)},la.ancestors=la.parents,Zh=pp={data:Us.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Us.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Us.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Us.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Us.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Us.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var c=this[0];if(c)return c._private.data.id}},Zh.attr=Zh.data,Zh.removeAttr=Zh.removeData;var Qh=pp,Lf={};function sd(f){return function(c){var h=this;if(void 0===c&&(c=!0),0===h.length);else if(h.isNode()&&!h.removed()){for(var m=0,_=h[0],C=_._private.edges,A=0;A<C.length;A++){var E=C[A];!c&&E.isLoop()||(m+=f(_,E))}return m}}}function Ms(f,c){return function(h){for(var m,_=this.nodes(),C=0;C<_.length;C++){var E=_[C][f](h);void 0!==E&&(void 0===m||c(E,m))&&(m=E)}return m}}Zi(Lf,{degree:sd(function(f,c){return c.source().same(c.target())?2:1}),indegree:sd(function(f,c){return c.target().same(f)?1:0}),outdegree:sd(function(f,c){return c.source().same(f)?1:0})}),Zi(Lf,{minDegree:Ms("degree",function(f,c){return f<c}),maxDegree:Ms("degree",function(f,c){return f>c}),minIndegree:Ms("indegree",function(f,c){return f<c}),maxIndegree:Ms("indegree",function(f,c){return f>c}),minOutdegree:Ms("outdegree",function(f,c){return f<c}),maxOutdegree:Ms("outdegree",function(f,c){return f>c})}),Zi(Lf,{totalDegree:function(c){for(var h=0,m=this.nodes(),_=0;_<m.length;_++)h+=m[_].degree(c);return h}});var iu,jg,Qs=function(c,h,m){for(var _=0;_<c.length;_++){var C=c[_];if(!C.locked()){var A=C._private.position,E={x:null!=h.x?h.x-A.x:0,y:null!=h.y?h.y-A.y:0};C.isParent()&&!(0===E.x&&0===E.y)&&C.children().shift(E,m),C.dirtyBoundingBoxCache()}}},Dv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(c){c.updateCompoundBounds()},beforeSet:function(c,h){Qs(c,h,!1)},onSet:function(c){c.dirtyCompoundBoundsCache()},canSet:function(c){return!c.locked()}};iu=jg={position:Us.data(Dv),silentPosition:Us.data(Zi({},Dv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(c,h){Qs(c,h,!0)},onSet:function(c){c.dirtyCompoundBoundsCache()}})),positions:function(c,h){if(_t(c))h?this.silentPosition(c):this.position(c);else if(yt(c)){var m=c,_=this.cy();_.startBatch();for(var C=0;C<this.length;C++){var E,A=this[C];(E=m(A,C))&&(h?A.silentPosition(E):A.position(E))}_.endBatch()}return this},silentPositions:function(c){return this.positions(c,!0)},shift:function(c,h,m){var _;if(_t(c)?(_={x:Ot(c.x)?c.x:0,y:Ot(c.y)?c.y:0},m=h):Ge(c)&&Ot(h)&&((_={x:0,y:0})[c]=h),null!=_){var C=this.cy();C.startBatch();for(var A=0;A<this.length;A++){var E=this[A];if(!(C.hasCompoundNodes()&&E.isChild()&&E.ancestors().anySame(this))){var F=E.position(),P={x:F.x+_.x,y:F.y+_.y};m?E.silentPosition(P):E.position(P)}}C.endBatch()}return this},silentShift:function(c,h){return _t(c)?this.shift(c,!0):Ge(c)&&Ot(h)&&this.shift(c,h,!0),this},renderedPosition:function(c,h){var m=this[0],_=this.cy(),C=_.zoom(),A=_.pan(),E=_t(c)?c:void 0,F=void 0!==E||void 0!==h&&Ge(c);if(m&&m.isNode()){if(!F){var Z=m.position();return E=ba(Z,C,A),void 0===c?E:E[c]}for(var P=0;P<this.length;P++){var $=this[P];void 0!==h?$.position(c,(h-A[c])/C):void 0!==E&&$.position(Zc(E,C,A))}}else if(!F)return;return this},relativePosition:function(c,h){var m=this[0],_=this.cy(),C=_t(c)?c:void 0,A=void 0!==C||void 0!==h&&Ge(c),E=_.hasCompoundNodes();if(m&&m.isNode()){if(!A){var ve=m.position(),Ee=E?m.parent():null,Be=Ee&&Ee.length>0;Be&&(Ee=Ee[0]);var st=Be?Ee.position():{x:0,y:0};return C={x:ve.x-st.x,y:ve.y-st.y},void 0===c?C:C[c]}for(var F=0;F<this.length;F++){var P=this[F],$=E?P.parent():null,Z=$&&$.length>0;Z&&($=$[0]);var ge=Z?$.position():{x:0,y:0};void 0!==h?P.position(c,h+ge[c]):void 0!==C&&P.position({x:C.x+ge.x,y:C.y+ge.y})}}else if(!A)return;return this}},iu.modelPosition=iu.point=iu.position,iu.modelPositions=iu.points=iu.positions,iu.renderedPoint=iu.renderedPosition,iu.relativePoint=iu.relativePosition;var Wr,Ya,$g=jg;Wr=Ya={},Ya.renderedBoundingBox=function(f){var c=this.boundingBox(f),h=this.cy(),m=h.zoom(),_=h.pan(),C=c.x1*m+_.x,A=c.x2*m+_.x,E=c.y1*m+_.y,F=c.y2*m+_.y;return{x1:C,x2:A,y1:E,y2:F,w:A-C,h:F-E}},Ya.dirtyCompoundBoundsCache=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();return c.styleEnabled()&&c.hasCompoundNodes()?(this.forEachUp(function(h){if(h.isParent()){var m=h._private;m.compoundBoundsClean=!1,m.bbCache=null,f||h.emitAndNotify("bounds")}}),this):this},Ya.updateCompoundBounds=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();if(!c.styleEnabled()||!c.hasCompoundNodes())return this;if(!f&&c.batching())return this;function h(A){if(A.isParent()){var E=A._private,F=A.children(),P="include"===A.pstyle("compound-sizing-wrt-labels").value,$={width:{val:A.pstyle("min-width").pfValue,left:A.pstyle("min-width-bias-left"),right:A.pstyle("min-width-bias-right")},height:{val:A.pstyle("min-height").pfValue,top:A.pstyle("min-height-bias-top"),bottom:A.pstyle("min-height-bias-bottom")}},Z=F.boundingBox({includeLabels:P,includeOverlays:!1,useCache:!1}),he=E.position;(0===Z.w||0===Z.h)&&((Z={w:A.pstyle("width").pfValue,h:A.pstyle("height").pfValue}).x1=he.x-Z.w/2,Z.x2=he.x+Z.w/2,Z.y1=he.y-Z.h/2,Z.y2=he.y+Z.h/2);var Ee=$.width.left.value;"px"===$.width.left.units&&$.width.val>0&&(Ee=100*Ee/$.width.val);var Be=$.width.right.value;"px"===$.width.right.units&&$.width.val>0&&(Be=100*Be/$.width.val);var Ue=$.height.top.value;"px"===$.height.top.units&&$.height.val>0&&(Ue=100*Ue/$.height.val);var st=$.height.bottom.value;"px"===$.height.bottom.units&&$.height.val>0&&(st=100*st/$.height.val);var tt=ge($.width.val-Z.w,Ee,Be),wt=tt.biasDiff,Ut=tt.biasComplementDiff,Gt=ge($.height.val-Z.h,Ue,st),xt=Gt.biasDiff,Wt=Gt.biasComplementDiff;E.autoPadding=function ve(Dt,Kt,Yt,lt){if("%"!==Yt.units)return"px"===Yt.units?Yt.pfValue:0;switch(lt){case"width":return Dt>0?Yt.pfValue*Dt:0;case"height":return Kt>0?Yt.pfValue*Kt:0;case"average":return Dt>0&&Kt>0?Yt.pfValue*(Dt+Kt)/2:0;case"min":return Dt>0&&Kt>0?Dt>Kt?Yt.pfValue*Kt:Yt.pfValue*Dt:0;case"max":return Dt>0&&Kt>0?Dt>Kt?Yt.pfValue*Dt:Yt.pfValue*Kt:0;default:return 0}}(Z.w,Z.h,A.pstyle("padding"),A.pstyle("padding-relative-to").value),E.autoWidth=Math.max(Z.w,$.width.val),he.x=(-wt+Z.x1+Z.x2+Ut)/2,E.autoHeight=Math.max(Z.h,$.height.val),he.y=(-xt+Z.y1+Z.y2+Wt)/2}function ge(Dt,Kt,Yt){var lt=0,Zt=0,Vt=Kt+Yt;return Dt>0&&Vt>0&&(lt=Kt/Vt*Dt,Zt=Yt/Vt*Dt),{biasDiff:lt,biasComplementDiff:Zt}}}for(var m=0;m<this.length;m++){var _=this[m],C=_._private;(!C.compoundBoundsClean||f)&&(h(_),c.batching()||(C.compoundBoundsClean=!0))}return this};var cc=function(c){return c===1/0||c===-1/0?0:c},Pa=function(c,h,m,_,C){_-h==0||C-m==0||null==h||null==m||null==_||null==C||(c.x1=h<c.x1?h:c.x1,c.x2=_>c.x2?_:c.x2,c.y1=m<c.y1?m:c.y1,c.y2=C>c.y2?C:c.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1)},gl=function(c,h){return null==h?c:Pa(c,h.x1,h.y1,h.x2,h.y2)},Kl=function(c,h,m){return gr(c,h,m)},Jh=function(c,h,m){if(!h.cy().headless()){var F,P,_=h._private,C=_.rstyle,A=C.arrowWidth/2;if("none"!==h.pstyle(m+"-arrow-shape").value){"source"===m?(F=C.srcX,P=C.srcY):"target"===m?(F=C.tgtX,P=C.tgtY):(F=C.midX,P=C.midY);var $=_.arrowBounds=_.arrowBounds||{},Z=$[m]=$[m]||{};Z.x1=F-A,Z.y1=P-A,Z.x2=F+A,Z.y2=P+A,Z.w=Z.x2-Z.x1,Z.h=Z.y2-Z.y1,ep(Z,1),Pa(c,Z.x1,Z.y1,Z.x2,Z.y2)}}},Bc=function(c,h,m){if(!h.cy().headless()){var _,C=h._private,A=C.rstyle;if(h.pstyle((_=m?m+"-":"")+"label").strValue){var Yt,lt,Zt,Vt,F=h.pstyle("text-halign"),P=h.pstyle("text-valign"),$=Kl(A,"labelWidth",m),Z=Kl(A,"labelHeight",m),he=Kl(A,"labelX",m),ge=Kl(A,"labelY",m),ve=h.pstyle(_+"text-margin-x").pfValue,Ee=h.pstyle(_+"text-margin-y").pfValue,Be=h.isEdge(),Ue=h.pstyle(_+"text-rotation"),st=h.pstyle("text-outline-width").pfValue,wt=h.pstyle("text-border-width").pfValue/2,Ut=h.pstyle("text-background-padding").pfValue,xt=Z,Wt=$,Dt=Wt/2,Kt=xt/2;if(Be)Yt=he-Dt,lt=he+Dt,Zt=ge-Kt,Vt=ge+Kt;else{switch(F.value){case"left":Yt=he-Wt,lt=he;break;case"center":Yt=he-Dt,lt=he+Dt;break;case"right":Yt=he,lt=he+Wt}switch(P.value){case"top":Zt=ge-xt,Vt=ge;break;case"center":Zt=ge-Kt,Vt=ge+Kt;break;case"bottom":Zt=ge,Vt=ge+xt}}Yt+=ve-Math.max(st,wt)-Ut-2,lt+=ve+Math.max(st,wt)+Ut+2,Zt+=Ee-Math.max(st,wt)-Ut-2,Vt+=Ee+Math.max(st,wt)+Ut+2;var Ln=m||"main",sn=C.labelBounds,bn=sn[Ln]=sn[Ln]||{};bn.x1=Yt,bn.y1=Zt,bn.x2=lt,bn.y2=Vt,bn.w=lt-Yt,bn.h=Vt-Zt;var zn=Be&&"autorotate"===Ue.strValue;if(zn||null!=Ue.pfValue&&0!==Ue.pfValue){var pi=zn?Kl(C.rstyle,"labelAngle",m):Ue.pfValue,Vn=Math.cos(pi),ci=Math.sin(pi),Ai=(Yt+lt)/2,Oi=(Zt+Vt)/2;if(!Be){switch(F.value){case"left":Ai=lt;break;case"right":Ai=Yt}switch(P.value){case"top":Oi=Vt;break;case"bottom":Oi=Zt}}var Mi=function(_s,Mr){return{x:(_s-=Ai)*Vn-(Mr-=Oi)*ci+Ai,y:_s*ci+Mr*Vn+Oi}},Si=Mi(Yt,Zt),Gn=Mi(Yt,Vt),_i=Mi(lt,Zt),Ni=Mi(lt,Vt);Yt=Math.min(Si.x,Gn.x,_i.x,Ni.x),lt=Math.max(Si.x,Gn.x,_i.x,Ni.x),Zt=Math.min(Si.y,Gn.y,_i.y,Ni.y),Vt=Math.max(Si.y,Gn.y,_i.y,Ni.y)}var lr=Ln+"Rot",wr=sn[lr]=sn[lr]||{};wr.x1=Yt,wr.y1=Zt,wr.x2=lt,wr.y2=Vt,wr.w=lt-Yt,wr.h=Vt-Zt,Pa(c,Yt,Zt,lt,Vt),Pa(C.labelBounds.all,Yt,Zt,lt,Vt)}return c}},ml=function(c){var h=0,m=function(A){return(A?1:0)<<h++},_=0;return _+=m(c.incudeNodes),_+=m(c.includeEdges),_+=m(c.includeLabels),_+=m(c.includeMainLabels),_+=m(c.includeSourceLabels),(_+=m(c.includeTargetLabels))+m(c.includeOverlays)},Lv=function(c){if(c.isEdge()){var h=c.source().position(),m=c.target().position(),_=function(A){return Math.round(A)};return function(c,h){var m={value:0,done:!1},_=0,C=c.length;return on({next:function(){return _<C?m.value=c[_++]:m.done=!0,m}},void 0)}([_(h.x),_(h.y),_(m.x),_(m.y)])}return 0},Pv=function(c,h){var _,m=c._private,C=c.isEdge(),E=(null==h?Xg:ml(h))===Xg,F=Lv(c),P=m.bbCachePosKey===F,$=h.useCache&&P,Z=function(Ee){return null==Ee._private.bbCache||Ee._private.styleDirty};if(!$||Z(c)||C&&Z(c.source())||Z(c.target())?(P||c.recalculateRenderedStyle($),_=function(c,h){var $,Z,he,ge,ve,Ee,m=c._private.cy,_=m.styleEnabled(),C=m.headless(),A=Jc(),E=c._private,F=c.isNode(),P=c.isEdge(),Be=E.rstyle,Ue=F&&_?c.pstyle("bounds-expansion").pfValue:[0],st=function(gs){return"none"!==gs.pstyle("display").value},tt=!_||st(c)&&(!P||st(c.source())&&st(c.target()));if(tt){var Ut=0;_&&h.includeOverlays&&0!==c.pstyle("overlay-opacity").value&&(Ut=c.pstyle("overlay-padding").value);var xt=0;_&&h.includeUnderlays&&0!==c.pstyle("underlay-opacity").value&&(xt=c.pstyle("underlay-padding").value);var Wt=Math.max(Ut,xt),Kt=0;if(_&&(Kt=c.pstyle("width").pfValue/2),F&&h.includeNodes){var Yt=c.position();ve=Yt.x,Ee=Yt.y;var Zt=c.outerWidth()/2,Ln=c.outerHeight()/2;Pa(A,$=ve-Zt,he=Ee-Ln,Z=ve+Zt,ge=Ee+Ln)}else if(P&&h.includeEdges)if(_&&!C){var sn=c.pstyle("curve-style").strValue;if($=Math.min(Be.srcX,Be.midX,Be.tgtX),Z=Math.max(Be.srcX,Be.midX,Be.tgtX),he=Math.min(Be.srcY,Be.midY,Be.tgtY),ge=Math.max(Be.srcY,Be.midY,Be.tgtY),Pa(A,$-=Kt,he-=Kt,Z+=Kt,ge+=Kt),"haystack"===sn){var bn=Be.haystackPts;if(bn&&2===bn.length){if(($=bn[0].x)>(Z=bn[1].x)){var zn=$;$=Z,Z=zn}if((he=bn[0].y)>(ge=bn[1].y)){var jn=he;he=ge,ge=jn}Pa(A,$-Kt,he-Kt,Z+Kt,ge+Kt)}}else if("bezier"===sn||"unbundled-bezier"===sn||"segments"===sn||"taxi"===sn){var pi;switch(sn){case"bezier":case"unbundled-bezier":pi=Be.bezierPts;break;case"segments":case"taxi":pi=Be.linePts}if(null!=pi)for(var Vn=0;Vn<pi.length;Vn++){var ci=pi[Vn];Pa(A,$=ci.x-Kt,he=ci.y-Kt,Z=ci.x+Kt,ge=ci.y+Kt)}}}else{var Oi=c.source().position(),Si=c.target().position();if(($=Oi.x)>(Z=Si.x)){var Gn=$;$=Z,Z=Gn}if((he=Oi.y)>(ge=Si.y)){var _i=he;he=ge,ge=_i}Pa(A,$-=Kt,he-=Kt,Z+=Kt,ge+=Kt)}if(_&&h.includeEdges&&P&&(Jh(A,c,"mid-source"),Jh(A,c,"mid-target"),Jh(A,c,"source"),Jh(A,c,"target")),_&&"yes"===c.pstyle("ghost").value){var lr=c.pstyle("ghost-offset-x").pfValue,wr=c.pstyle("ghost-offset-y").pfValue;Pa(A,A.x1+lr,A.y1+wr,A.x2+lr,A.y2+wr)}var as=E.bodyBounds=E.bodyBounds||{};xm(as,A),qp(as,Ue),ep(as,1),_&&Pa(A,($=A.x1)-Wt,(he=A.y1)-Wt,(Z=A.x2)+Wt,(ge=A.y2)+Wt);var _s=E.overlayBounds=E.overlayBounds||{};xm(_s,A),qp(_s,Ue),ep(_s,1);var Mr=E.labelBounds=E.labelBounds||{};null!=Mr.all?function(c){c.x1=1/0,c.y1=1/0,c.x2=-1/0,c.y2=-1/0,c.w=0,c.h=0}(Mr.all):Mr.all=Jc(),_&&h.includeLabels&&(h.includeMainLabels&&Bc(A,c,null),P&&(h.includeSourceLabels&&Bc(A,c,"source"),h.includeTargetLabels&&Bc(A,c,"target")))}return A.x1=cc(A.x1),A.y1=cc(A.y1),A.x2=cc(A.x2),A.y2=cc(A.y2),A.w=cc(A.x2-A.x1),A.h=cc(A.y2-A.y1),A.w>0&&A.h>0&&tt&&(qp(A,Ue),ep(A,1)),A}(c,qg),m.bbCache=_,m.bbCachePosKey=F):_=m.bbCache,!E){var ge=c.isNode();_=Jc(),(h.includeNodes&&ge||h.includeEdges&&!ge)&&gl(_,h.includeOverlays?m.overlayBounds:m.bodyBounds),h.includeLabels&&(h.includeMainLabels&&(!C||h.includeSourceLabels&&h.includeTargetLabels)?gl(_,m.labelBounds.all):(h.includeMainLabels&&gl(_,m.labelBounds.mainRot),h.includeSourceLabels&&gl(_,m.labelBounds.sourceRot),h.includeTargetLabels&&gl(_,m.labelBounds.targetRot))),_.w=_.x2-_.x1,_.h=_.y2-_.y1}return _},qg={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Xg=ml(qg),Rf=mi(qg);Ya.boundingBox=function(f){var c;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==f&&void 0!==f.useCache&&!0!==f.useCache){c=Jc();var h=Rf(f=f||qg),m=this;if(m.cy().styleEnabled())for(var A=0;A<m.length;A++){var E=m[A],F=E._private,P=Lv(E);E.recalculateRenderedStyle(h.useCache&&F.bbCachePosKey===P&&!F.styleDirty)}this.updateCompoundBounds(!f.useCache);for(var he=0;he<m.length;he++)gl(c,Pv(m[he],h))}else f=void 0===f?qg:Rf(f),c=Pv(this[0],f);return c.x1=cc(c.x1),c.y1=cc(c.y1),c.x2=cc(c.x2),c.y2=cc(c.y2),c.w=cc(c.x2-c.x1),c.h=cc(c.y2-c.y1),c},Ya.dirtyBoundingBoxCache=function(){for(var f=0;f<this.length;f++){var c=this[f]._private;c.bbCache=null,c.bbCachePosKey=null,c.bodyBounds=null,c.overlayBounds=null,c.labelBounds.all=null,c.labelBounds.source=null,c.labelBounds.target=null,c.labelBounds.main=null,c.labelBounds.sourceRot=null,c.labelBounds.targetRot=null,c.labelBounds.mainRot=null,c.arrowBounds.source=null,c.arrowBounds.target=null,c.arrowBounds["mid-source"]=null,c.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},Ya.boundingBoxAt=function(f){var c=this.nodes(),h=this.cy(),m=h.hasCompoundNodes(),_=h.collection();if(m&&(_=c.filter(function(P){return P.isParent()}),c=c.not(_)),_t(f)){var C=f;f=function(){return C}}h.startBatch(),c.forEach(function($,Z){return $._private.bbAtOldPos=f($,Z)}).silentPositions(f),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0));var F=function(c){return{x1:c.x1,x2:c.x2,w:c.w,y1:c.y1,y2:c.y2,h:c.h}}(this.boundingBox({useCache:!1}));return c.silentPositions(function($){return $._private.bbAtOldPos}),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0)),h.endBatch(),F},Wr.boundingbox=Wr.bb=Wr.boundingBox,Wr.renderedBoundingbox=Wr.renderedBoundingBox;var kf,ef,km=Ya;kf=ef={};var Yg=function(c){c.uppercaseName=Ie(c.name),c.autoName="auto"+c.uppercaseName,c.labelName="label"+c.uppercaseName,c.outerName="outer"+c.uppercaseName,c.uppercaseOuterName=Ie(c.outerName),kf[c.name]=function(){var m=this[0],_=m._private;if(m){if(_.cy._private.styleEnabled){if(m.isParent())return m.updateCompoundBounds(),_[c.autoName]||0;var E=m.pstyle(c.name);return"label"===E.strValue?(m.recalculateRenderedStyle(),_.rstyle[c.labelName]||0):E.pfValue}return 1}},kf["outer"+c.uppercaseName]=function(){var m=this[0];if(m)return m._private.cy._private.styleEnabled?m[c.name]()+m.pstyle("border-width").pfValue+2*m.padding():1},kf["rendered"+c.uppercaseName]=function(){var m=this[0];if(m)return m[c.name]()*this.cy().zoom()},kf["rendered"+c.uppercaseOuterName]=function(){var m=this[0];if(m)return m[c.outerName]()*this.cy().zoom()}};Yg({name:"width"}),Yg({name:"height"}),ef.padding=function(){var f=this[0],c=f._private;return f.isParent()?(f.updateCompoundBounds(),void 0!==c.autoPadding?c.autoPadding:f.pstyle("padding").pfValue):f.pstyle("padding").pfValue},ef.paddedHeight=function(){var f=this[0];return f.height()+2*f.padding()},ef.paddedWidth=function(){var f=this[0];return f.width()+2*f.padding()};var Jd=ef,Rv={controlPoints:{get:function(c){return c.renderer().getControlPoints(c)},mult:!0},segmentPoints:{get:function(c){return c.renderer().getSegmentPoints(c)},mult:!0},sourceEndpoint:{get:function(c){return c.renderer().getSourceEndpoint(c)}},targetEndpoint:{get:function(c){return c.renderer().getTargetEndpoint(c)}},midpoint:{get:function(c){return c.renderer().getEdgeMidpoint(c)}}},kv=Object.keys(Rv).reduce(function(f,c){var h=Rv[c],m=function(c){return"rendered"+c[0].toUpperCase()+c.substr(1)}(c);return f[c]=function(){return function(c,h){if(c.isEdge())return h(c)}(this,h.get)},f[m]=h.mult?function(){return function(c,h){if(c.isEdge()){var m=c.cy(),_=m.pan(),C=m.zoom();return h(c).map(function(A){return ba(A,C,_)})}}(this,h.get)}:function(){return function(c,h){if(c.isEdge()){var m=c.cy();return ba(h(c),m.zoom(),m.pan())}}(this,h.get)},f},{}),gb=Zi({},$g,km,Jd,kv),tg=function(c,h){this.recycle(c,h)};function Rl(){return!1}function nf(){return!0}tg.prototype={instanceString:function(){return"event"},recycle:function(c,h){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Rl,null!=c&&c.preventDefault?(this.type=c.type,this.isDefaultPrevented=c.defaultPrevented?nf:Rl):null!=c&&c.type?h=c:this.type=c,null!=h&&(this.originalEvent=h.originalEvent,this.type=null!=h.type?h.type:this.type,this.cy=h.cy,this.target=h.target,this.position=h.position,this.renderedPosition=h.renderedPosition,this.namespace=h.namespace,this.layout=h.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var m=this.position,_=this.cy.zoom(),C=this.cy.pan();this.renderedPosition={x:m.x*_+C.x,y:m.y*_+C.y}}this.timeStamp=c&&c.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=nf;var c=this.originalEvent;!c||c.preventDefault&&c.preventDefault()},stopPropagation:function(){this.isPropagationStopped=nf;var c=this.originalEvent;!c||c.stopPropagation&&c.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=nf,this.stopPropagation()},isDefaultPrevented:Rl,isPropagationStopped:Rl,isImmediatePropagationStopped:Rl};var eh=/^([^.]+)(\.(?:[^.]+))?$/,th={qualifierCompare:function(c,h){return c===h},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(c){return c},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Pd=Object.keys(th),od={};function zu(){for(var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:od,c=arguments.length>1?arguments[1]:void 0,h=0;h<Pd.length;h++){var m=Pd[h];this[m]=f[m]||th[m]}this.context=c||this.context,this.listeners=[],this.emitting=0}var Ra=zu.prototype,wh=function(c,h,m,_,C,A,E){yt(_)&&(C=_,_=null),E&&(A=null==A?E:Zi({},A,E));for(var F=mt(m)?m:m.split(/\s+/),P=0;P<F.length;P++){var $=F[P];if(!le($)){var Z=$.match(eh);if(Z&&!1===h(c,$,Z[1],Z[2]?Z[2]:null,_,C,A))break}}},Om=function(c,h){return c.addEventFields(c.context,h),new tg(h.type,h)};Ra.on=Ra.addListener=function(f,c,h,m,_){return wh(this,function(C,A,E,F,P,$,Z){yt($)&&C.listeners.push({event:A,callback:$,type:E,namespace:F,qualifier:P,conf:Z})},f,c,h,m,_),this},Ra.one=function(f,c,h,m){return this.on(f,c,h,m,{one:!0})},Ra.removeListener=Ra.off=function(f,c,h,m){var _=this;0!==this.emitting&&(this.listeners=function(c){return c.slice()}(this.listeners));for(var C=this.listeners,A=function(P){var $=C[P];wh(_,function(Z,he,ge,ve,Ee,Be){if(($.type===ge||"*"===f)&&(!ve&&".*"!==$.namespace||$.namespace===ve)&&(!Ee||Z.qualifierCompare($.qualifier,Ee))&&(!Be||$.callback===Be))return C.splice(P,1),!1},f,c,h,m)},E=C.length-1;E>=0;E--)A(E);return this},Ra.removeAllListeners=function(){return this.removeListener("*")},Ra.emit=Ra.trigger=function(f,c,h){var m=this.listeners,_=m.length;return this.emitting++,mt(c)||(c=[c]),function(c,h,m){if(function(c){return"event"===It(c)}(m))h(c,m);else if(_t(m))h(c,Om(c,m));else for(var _=mt(m)?m:m.split(/\s+/),C=0;C<_.length;C++){var A=_[C];if(!le(A)){var E=A.match(eh);E&&h(c,Om(c,{type:E[1],namespace:E[2]?E[2]:null,target:c.context}))}}}(this,function(C,A){null!=h&&(_=(m=[{event:A.event,type:A.type,namespace:A.namespace,callback:h}]).length);for(var E=function($){var Z=m[$];if(Z.type===A.type&&(!Z.namespace||Z.namespace===A.namespace||".*"===Z.namespace)&&C.eventMatches(C.context,Z,A)){var he=[A];null!=c&&function(c,h){for(var m=0;m<h.length;m++)c.push(h[m])}(he,c),C.beforeEmit(C.context,Z,A),Z.conf&&Z.conf.one&&(C.listeners=C.listeners.filter(function(Ee){return Ee!==Z}));var ge=C.callbackContext(C.context,Z,A),ve=Z.callback.apply(ge,he);C.afterEmit(C.context,Z,A),!1===ve&&(A.stopPropagation(),A.preventDefault())}},F=0;F<_;F++)E(F);C.bubble(C.context)&&!A.isPropagationStopped()&&C.parent(C.context).emit(A,c)},f),this.emitting--,this};var kl={qualifierCompare:function(c,h){return null==c||null==h?null==c&&null==h:c.sameText(h)},eventMatches:function(c,h,m){var _=h.qualifier;return null==_||c!==m.target&&Ct(m.target)&&_.matches(m.target)},addEventFields:function(c,h){h.cy=c.cy(),h.target=c},callbackContext:function(c,h,m){return null!=h.qualifier?m.target:c},beforeEmit:function(c,h){h.conf&&h.conf.once&&h.conf.onceCollection.removeListener(h.event,h.qualifier,h.callback)},bubble:function(){return!0},parent:function(c){return c.isChild()?c.parent():c.cy()}},Vu=function(c){return Ge(c)?new fp(c):c},$o={createEmitter:function(){for(var c=0;c<this.length;c++){var h=this[c],m=h._private;m.emitter||(m.emitter=new zu(kl,h))}return this},emitter:function(){return this._private.emitter},on:function(c,h,m){for(var _=Vu(h),C=0;C<this.length;C++)this[C].emitter().on(c,_,m);return this},removeListener:function(c,h,m){for(var _=Vu(h),C=0;C<this.length;C++)this[C].emitter().removeListener(c,_,m);return this},removeAllListeners:function(){for(var c=0;c<this.length;c++)this[c].emitter().removeAllListeners();return this},one:function(c,h,m){for(var _=Vu(h),C=0;C<this.length;C++)this[C].emitter().one(c,_,m);return this},once:function(c,h,m){for(var _=Vu(h),C=0;C<this.length;C++)this[C].emitter().on(c,_,m,{once:!0,onceCollection:this})},emit:function(c,h){for(var m=0;m<this.length;m++)this[m].emitter().emit(c,h);return this},emitAndNotify:function(c,h){if(0!==this.length)return this.cy().notify(c,this),this.emit(c,h),this}};Us.eventAliasesOn($o);var su={nodes:function(c){return this.filter(function(h){return h.isNode()}).filter(c)},edges:function(c){return this.filter(function(h){return h.isEdge()}).filter(c)},byGroup:function(){for(var c=this.spawn(),h=this.spawn(),m=0;m<this.length;m++){var _=this[m];_.isNode()?c.push(_):h.push(_)}return{nodes:c,edges:h}},filter:function(c,h){if(void 0===c)return this;if(Ge(c)||Ze(c))return new fp(c).filter(this);if(yt(c)){for(var m=this.spawn(),_=this,C=0;C<_.length;C++){var A=_[C];(h?c.apply(h,[A,C,_]):c(A,C,_))&&m.push(A)}return m}return this.spawn()},not:function(c){if(c){Ge(c)&&(c=this.filter(c));for(var h=this.spawn(),m=0;m<this.length;m++){var _=this[m];c.has(_)||h.push(_)}return h}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(c){if(Ge(c))return this.filter(c);for(var m=this.spawn(),A=this.length<c.length,E=A?this:c,F=A?c:this,P=0;P<E.length;P++){var $=E[P];F.has($)&&m.push($)}return m},xor:function(c){var h=this._private.cy;Ge(c)&&(c=h.$(c));var m=this.spawn(),C=c,A=function(F,P){for(var $=0;$<F.length;$++){var Z=F[$];P.hasElementWithId(Z._private.data.id)||m.push(Z)}};return A(this,C),A(C,this),m},diff:function(c){var h=this._private.cy;Ge(c)&&(c=h.$(c));var m=this.spawn(),_=this.spawn(),C=this.spawn(),E=c,F=function($,Z,he){for(var ge=0;ge<$.length;ge++){var ve=$[ge];Z.hasElementWithId(ve._private.data.id)?C.merge(ve):he.push(ve)}};return F(this,E,m),F(E,this,_),{left:m,right:_,both:C}},add:function(c){var h=this._private.cy;if(!c)return this;if(Ge(c)){var m=c;c=h.mutableElements().filter(m)}for(var _=this.spawnSelf(),C=0;C<c.length;C++){var A=c[C];!this.has(A)&&_.push(A)}return _},merge:function(c){var h=this._private,m=h.cy;if(!c)return this;if(c&&Ge(c)){var _=c;c=m.mutableElements().filter(_)}for(var C=h.map,A=0;A<c.length;A++){var E=c[A],F=E._private.data.id;if(!C.has(F)){var $=this.length++;this[$]=E,C.set(F,{ele:E,index:$})}}return this},unmergeAt:function(c){var m=this[c].id(),C=this._private.map;if(this[c]=void 0,C.delete(m),this.length>1&&c!==this.length-1){var E=this.length-1,F=this[E],P=F._private.data.id;this[E]=void 0,this[c]=F,C.set(P,{ele:F,index:c})}return this.length--,this},unmergeOne:function(c){var C=this._private.map.get((c=c[0])._private.data.id);return C?(this.unmergeAt(C.index),this):this},unmerge:function(c){var h=this._private.cy;if(!c)return this;if(c&&Ge(c)){var m=c;c=h.mutableElements().filter(m)}for(var _=0;_<c.length;_++)this.unmergeOne(c[_]);return this},unmergeBy:function(c){for(var h=this.length-1;h>=0;h--)c(this[h])&&this.unmergeAt(h);return this},map:function(c,h){for(var m=[],_=this,C=0;C<_.length;C++){var A=_[C],E=h?c.apply(h,[A,C,_]):c(A,C,_);m.push(E)}return m},reduce:function(c,h){for(var m=h,_=this,C=0;C<_.length;C++)m=c(m,_[C],C,_);return m},max:function(c,h){for(var _,m=-1/0,C=this,A=0;A<C.length;A++){var E=C[A],F=h?c.apply(h,[E,A,C]):c(E,A,C);F>m&&(m=F,_=E)}return{value:m,ele:_}},min:function(c,h){for(var _,m=1/0,C=this,A=0;A<C.length;A++){var E=C[A],F=h?c.apply(h,[E,A,C]):c(E,A,C);F<m&&(m=F,_=E)}return{value:m,ele:_}}},po=su;po.u=po["|"]=po["+"]=po.union=po.or=po.add,po["\\"]=po["!"]=po["-"]=po.difference=po.relativeComplement=po.subtract=po.not,po.n=po["&"]=po["."]=po.and=po.intersection=po.intersect,po["^"]=po["(+)"]=po["(-)"]=po.symmetricDifference=po.symdiff=po.xor,po.fnFilter=po.filterFn=po.stdFilter=po.filter,po.complement=po.abscomp=po.absoluteComplement;var c,mp=function(c,h){var _=c.cy().hasCompoundNodes();function C($){var Z=$.pstyle("z-compound-depth");return"auto"===Z.value?_?$.zDepth():0:"bottom"===Z.value?-1:"top"===Z.value?ya:0}var A=C(c)-C(h);if(0!==A)return A;function E($){return"auto"===$.pstyle("z-index-compare").value&&$.isNode()?1:0}var F=E(c)-E(h);if(0!==F)return F;var P=c.pstyle("z-index").value-h.pstyle("z-index").value;return 0!==P?P:c.poolIndex()-h.poolIndex()},ou={forEach:function(c,h){if(yt(c))for(var m=this.length,_=0;_<m;_++){var C=this[_];if(!1===(h?c.apply(h,[C,_,this]):c(C,_,this)))break}return this},toArray:function(){for(var c=[],h=0;h<this.length;h++)c.push(this[h]);return c},slice:function(c,h){var m=[],_=this.length;null==h&&(h=_),null==c&&(c=0),c<0&&(c=_+c),h<0&&(h=_+h);for(var C=c;C>=0&&C<h&&C<_;C++)m.push(this[C]);return this.spawn(m)},size:function(){return this.length},eq:function(c){return this[c]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(c){if(!yt(c))return this;var h=this.toArray().sort(c);return this.spawn(h)},sortByZIndex:function(){return this.sort(mp)},zDepth:function(){var c=this[0];if(c){var h=c._private;if("nodes"===h.group){var _=h.data.parent?c.parents().size():0;return c.isParent()?_:ya-1}var A=h.target,E=h.source.zDepth(),F=A.zDepth();return Math.max(E,F,0)}}};ou.each=ou.forEach,c="undefined",(typeof Symbol>"u"?"undefined":ee(Symbol))!=c&&ee(Symbol.iterator)!=c&&(ou[Symbol.iterator]=function(){var m=this,_={value:void 0,done:!1},C=0,A=this.length;return Ce({next:function(){return C<A?_.value=m[C++]:(_.value=void 0,_.done=!0),_}},Symbol.iterator,function(){return this})});var Zg=mi({nodeDimensionsIncludeLabels:!1}),Rd={layoutDimensions:function(c){var h;if(c=Zg(c),this.takesUpSpace())if(c.nodeDimensionsIncludeLabels){var m=this.boundingBox();h={w:m.w,h:m.h}}else h={w:this.outerWidth(),h:this.outerHeight()};else h={w:0,h:0};return(0===h.w||0===h.h)&&(h.w=h.h=1),h},layoutPositions:function(c,h,m){var _=this.nodes().filter(function(Ut){return!Ut.isParent()}),C=this.cy(),A=h.eles,E=function(Gt){return Gt.id()},F=pt(m,E);c.emit({type:"layoutstart",layout:c}),c.animations=[];var $=h.spacingFactor&&1!==h.spacingFactor,he=function(){if(!$)return null;for(var Gt=Jc(),xt=0;xt<_.length;xt++){var Dt=F(_[xt],xt);Fa(Gt,Dt.x,Dt.y)}return Gt}(),ge=pt(function(Ut,Gt){var xt=F(Ut,Gt);return $&&(xt=function(Gt,xt,Wt){var Dt_x=xt.x1+xt.w/2,Dt_y=xt.y1+xt.h/2;return{x:Dt_x+(Wt.x-Dt_x)*Gt,y:Dt_y+(Wt.y-Dt_y)*Gt}}(Math.abs(h.spacingFactor),he,xt)),null!=h.transform&&(xt=h.transform(Ut,xt)),xt},E);if(h.animate){for(var ve=0;ve<_.length;ve++){var Ee=_[ve],Be=ge(Ee,ve);if(null==h.animateFilter||h.animateFilter(Ee,ve)){var st=Ee.animation({position:Be,duration:h.animationDuration,easing:h.animationEasing});c.animations.push(st)}else Ee.position(Be)}if(h.fit){var tt=C.animation({fit:{boundingBox:A.boundingBoxAt(ge),padding:h.padding},duration:h.animationDuration,easing:h.animationEasing});c.animations.push(tt)}else if(void 0!==h.zoom&&void 0!==h.pan){var wt=C.animation({zoom:h.zoom,pan:h.pan,duration:h.animationDuration,easing:h.animationEasing});c.animations.push(wt)}c.animations.forEach(function(Ut){return Ut.play()}),c.one("layoutready",h.ready),c.emit({type:"layoutready",layout:c}),Da.all(c.animations.map(function(Ut){return Ut.promise()})).then(function(){c.one("layoutstop",h.stop),c.emit({type:"layoutstop",layout:c})})}else _.positions(ge),h.fit&&C.fit(h.eles,h.padding),null!=h.zoom&&C.zoom(h.zoom),h.pan&&C.pan(h.pan),c.one("layoutready",h.ready),c.emit({type:"layoutready",layout:c}),c.one("layoutstop",h.stop),c.emit({type:"layoutstop",layout:c});return this},layout:function(c){return this.cy().makeLayout(Zi({},c,{eles:this}))}};function rf(f,c,h){var C,m=h._private,_=m.styleCache=m.styleCache||[];return null!=(C=_[f])||(C=_[f]=c(h)),C}function sf(f,c){return f=xs(f),function(m){return rf(f,c,m)}}function wc(f,c){f=xs(f);var h=function(_){return c.call(_)};return function(){var _=this[0];if(_)return rf(f,h,_)}}Rd.createLayout=Rd.makeLayout=Rd.layout;var Ol={recalculateRenderedStyle:function(c){var h=this.cy(),m=h.renderer(),_=h.styleEnabled();return m&&_&&m.recalculateRenderedStyle(this,c),this},dirtyStyleCache:function(){var m,c=this.cy(),h=function(C){return C._private.styleCache=null};return c.hasCompoundNodes()?((m=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(m.connectedEdges()),m.forEach(h)):this.forEach(function(_){h(_),_.connectedEdges().forEach(h)}),this},updateStyle:function(c){var h=this._private.cy;if(!h.styleEnabled())return this;if(h.batching())return h._private.batchStyleEles.merge(this),this;var C=this;c=!(!c&&void 0!==c),h.hasCompoundNodes()&&(C=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var A=C;return c?A.emitAndNotify("style"):A.emit("style"),C.forEach(function(E){return E._private.styleDirty=!0}),this},cleanStyle:function(){var c=this.cy();if(c.styleEnabled())for(var h=0;h<this.length;h++){var m=this[h];m._private.styleDirty&&(m._private.styleDirty=!1,c.style().apply(m))}},parsedStyle:function(c){var h=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=this[0],_=m.cy();if(_.styleEnabled()&&m){this.cleanStyle();var C=m._private.style[c];return C??(h?_.style().getDefaultProperty(c):null)}},numericStyle:function(c){var h=this[0];if(h.cy().styleEnabled()&&h){var m=h.pstyle(c);return void 0!==m.pfValue?m.pfValue:m.value}},numericStyleUnits:function(c){var h=this[0];if(h.cy().styleEnabled()&&h)return h.pstyle(c).units},renderedStyle:function(c){var h=this.cy();if(!h.styleEnabled())return this;var m=this[0];return m?h.style().getRenderedStyle(m,c):void 0},style:function(c,h){var m=this.cy();if(!m.styleEnabled())return this;var C=m.style();if(_t(c))C.applyBypass(this,c,!1),this.emitAndNotify("style");else if(Ge(c)){if(void 0===h){var E=this[0];return E?C.getStylePropertyValue(E,c):void 0}C.applyBypass(this,c,h,!1),this.emitAndNotify("style")}else if(void 0===c){var F=this[0];return F?C.getRawStyle(F):void 0}return this},removeStyle:function(c){var h=this.cy();if(!h.styleEnabled())return this;var _=h.style(),C=this;if(void 0===c)for(var A=0;A<C.length;A++)_.removeAllBypasses(C[A],!1);else{c=c.split(/\s+/);for(var F=0;F<C.length;F++)_.removeBypasses(C[F],c,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var c=this.cy();if(!c.styleEnabled())return 1;var h=c.hasCompoundNodes(),m=this[0];if(m){var _=m._private,C=m.pstyle("opacity").value;if(!h)return C;var A=_.data.parent?m.parents():null;if(A)for(var E=0;E<A.length;E++)C*=A[E].pstyle("opacity").value;return C}},transparent:function(){if(!this.cy().styleEnabled())return!1;var h=this[0],m=h.cy().hasCompoundNodes();return h?m?0===h.effectiveOpacity():0===h.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function nh(f,c){var m=f._private.data.parent?f.parents():null;if(m)for(var _=0;_<m.length;_++)if(!c(m[_]))return!1;return!0}function Iu(f){var c=f.ok,h=f.edgeOkViaNode||f.ok,m=f.parentOk||f.ok;return function(){var _=this.cy();if(!_.styleEnabled())return!0;var C=this[0],A=_.hasCompoundNodes();if(C){var E=C._private;if(!c(C))return!1;if(C.isNode())return!A||nh(C,m);var F=E.source,P=E.target;return h(F)&&(!A||nh(F,h))&&(F===P||h(P)&&(!A||nh(P,h)))}}}var Ah=sf("eleTakesUpSpace",function(f){return"element"===f.pstyle("display").value&&0!==f.width()&&(!f.isNode()||0!==f.height())});Ol.takesUpSpace=wc("takesUpSpace",Iu({ok:Ah}));var af=sf("eleInteractive",function(f){return"yes"===f.pstyle("events").value&&"visible"===f.pstyle("visibility").value&&Ah(f)}),yp=sf("parentInteractive",function(f){return"visible"===f.pstyle("visibility").value&&Ah(f)});Ol.interactive=wc("interactive",Iu({ok:af,parentOk:yp,edgeOkViaNode:Ah})),Ol.noninteractive=function(){var f=this[0];if(f)return!f.interactive()};var kd=sf("eleVisible",function(f){return"visible"===f.pstyle("visibility").value&&0!==f.pstyle("opacity").pfValue&&Ah(f)});Ol.visible=wc("visible",Iu({ok:kd,edgeOkViaNode:Ah})),Ol.hidden=function(){var f=this[0];if(f)return!f.visible()},Ol.isBundledBezier=wc("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),Ol.bypass=Ol.css=Ol.style,Ol.renderedCss=Ol.renderedStyle,Ol.removeBypass=Ol.removeCss=Ol.removeStyle,Ol.pstyle=Ol.parsedStyle;var pa={};function lf(f){return function(){var c=arguments,h=[];if(2===c.length){var m=c[0],_=c[1];this.on(f.event,m,_)}else if(1===c.length&&yt(c[0])){var C=c[0];this.on(f.event,C)}else if(0===c.length||1===c.length&&mt(c[0])){for(var A=1===c.length?c[0]:null,E=0;E<this.length;E++){var F=this[E],P=!f.ableField||F._private[f.ableField],$=F._private[f.field]!=f.value;if(f.overrideAble){var Z=f.overrideAble(F);if(void 0!==Z&&(P=Z,!Z))return this}P&&(F._private[f.field]=f.value,$&&h.push(F))}var he=this.spawn(h);he.updateStyle(),he.emit(f.event),A&&he.emit(A)}return this}}function ih(f){pa[f.field]=function(){var c=this[0];if(c){if(f.overrideField){var h=f.overrideField(c);if(void 0!==h)return h}return c._private[f.field]}},pa[f.on]=lf({event:f.on,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!0}),pa[f.off]=lf({event:f.off,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!1})}ih({field:"locked",overrideField:function(c){return!!c.cy().autolock()||void 0},on:"lock",off:"unlock"}),ih({field:"grabbable",overrideField:function(c){return!c.cy().autoungrabify()&&!c.pannable()&&void 0},on:"grabify",off:"ungrabify"}),ih({field:"selected",ableField:"selectable",overrideAble:function(c){return!c.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),ih({field:"selectable",overrideField:function(c){return!c.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),pa.deselect=pa.unselect,pa.grabbed=function(){var f=this[0];if(f)return f._private.grabbed},ih({field:"active",on:"activate",off:"unactivate"}),ih({field:"pannable",on:"panify",off:"unpanify"}),pa.inactive=function(){var f=this[0];if(f)return!f._private.active};var Il={},xh=function(c){return function(m){for(var C=[],A=0;A<this.length;A++){var E=this[A];if(E.isNode()){for(var F=!1,P=E.connectedEdges(),$=0;$<P.length;$++){var Z=P[$],he=Z.source(),ge=Z.target();if(c.noIncomingEdges&&ge===E&&he!==E||c.noOutgoingEdges&&he===E&&ge!==E){F=!0;break}}F||C.push(E)}}return this.spawn(C,!0).filter(m)}},ad=function(c){return function(h){for(var _=[],C=0;C<this.length;C++){var A=this[C];if(A.isNode())for(var E=A.connectedEdges(),F=0;F<E.length;F++){var P=E[F],$=P.source(),Z=P.target();c.outgoing&&$===A?(_.push(P),_.push(Z)):c.incoming&&Z===A&&(_.push(P),_.push($))}}return this.spawn(_,!0).filter(h)}},rh=function(c){return function(h){for(var m=this,_=[],C={};;){var A=c.outgoing?m.outgoers():m.incomers();if(0===A.length)break;for(var E=!1,F=0;F<A.length;F++){var P=A[F],$=P.id();C[$]||(C[$]=!0,_.push(P),E=!0)}if(!E)break;m=A}return this.spawn(_,!0).filter(h)}};function sl(f){return function(h){for(var m=[],_=0;_<this.length;_++){var A=this[_]._private[f.attr];A&&m.push(A)}return this.spawn(m,!0).filter(h)}}function Su(f){return function(h){var m=[],_=this._private.cy,C=f||{};Ge(h)&&(h=_.$(h));for(var A=0;A<h.length;A++)for(var E=h[A]._private.edges,F=0;F<E.length;F++){var P=E[F],$=P._private.data,Z=this.hasElementWithId($.source)&&h.hasElementWithId($.target),he=h.hasElementWithId($.source)&&this.hasElementWithId($.target);!Z&&!he||(C.thisIsSrc||C.thisIsTgt)&&(C.thisIsSrc&&!Z||C.thisIsTgt&&!he)||m.push(P)}return this.spawn(m,!0)}}function Ih(f){return f=Zi({},{codirected:!1},f),function(m){for(var _=[],C=this.edges(),A=f,E=0;E<C.length;E++)for(var P=C[E]._private,$=P.source,Z=$._private.data.id,he=P.data.target,ge=$._private.edges,ve=0;ve<ge.length;ve++){var Ee=ge[ve],Be=Ee._private.data,Ue=Be.target,st=Be.source,tt=Ue===he&&st===Z;(A.codirected&&tt||!A.codirected&&(tt||Z===Ue&&he===st))&&_.push(Ee)}return this.spawn(_,!0).filter(m)}}Il.clearTraversalCache=function(){for(var f=0;f<this.length;f++)this[f]._private.traversalCache=null},Zi(Il,{roots:xh({noIncomingEdges:!0}),leaves:xh({noOutgoingEdges:!0}),outgoers:Xa(ad({outgoing:!0}),"outgoers"),successors:rh({outgoing:!0}),incomers:Xa(ad({incoming:!0}),"incomers"),predecessors:rh({incoming:!0})}),Zi(Il,{neighborhood:Xa(function(f){for(var c=[],h=this.nodes(),m=0;m<h.length;m++)for(var _=h[m],C=_.connectedEdges(),A=0;A<C.length;A++){var E=C[A],F=E.source(),P=E.target(),$=_===F?P:F;$.length>0&&c.push($[0]),c.push(E[0])}return this.spawn(c,!0).filter(f)},"neighborhood"),closedNeighborhood:function(c){return this.neighborhood().add(this).filter(c)},openNeighborhood:function(c){return this.neighborhood(c)}}),Il.neighbourhood=Il.neighborhood,Il.closedNeighbourhood=Il.closedNeighborhood,Il.openNeighbourhood=Il.openNeighborhood,Zi(Il,{source:Xa(function(c){var m,h=this[0];return h&&(m=h._private.source||h.cy().collection()),m&&c?m.filter(c):m},"source"),target:Xa(function(c){var m,h=this[0];return h&&(m=h._private.target||h.cy().collection()),m&&c?m.filter(c):m},"target"),sources:sl({attr:"source"}),targets:sl({attr:"target"})}),Zi(Il,{edgesWith:Xa(Su(),"edgesWith"),edgesTo:Xa(Su({thisIsSrc:!0}),"edgesTo")}),Zi(Il,{connectedEdges:Xa(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];if(_.isNode())for(var C=_._private.edges,A=0;A<C.length;A++)c.push(C[A])}return this.spawn(c,!0).filter(f)},"connectedEdges"),connectedNodes:Xa(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];!_.isEdge()||(c.push(_.source()[0]),c.push(_.target()[0]))}return this.spawn(c,!0).filter(f)},"connectedNodes"),parallelEdges:Xa(Ih(),"parallelEdges"),codirectedEdges:Xa(Ih({codirected:!0}),"codirectedEdges")}),Zi(Il,{components:function(c){var h=this,m=h.cy(),_=m.collection(),C=null==c?h.nodes():c.nodes(),A=[];null!=c&&C.empty()&&(C=c.sources());var E=function($,Z){_.merge($),C.unmerge($),Z.merge($)};if(C.empty())return h.spawn();var F=function(){var $=m.collection();A.push($);var Z=C[0];E(Z,$),h.bfs({directed:!1,roots:Z,visit:function(ge){return E(ge,$)}}),$.forEach(function(he){he.connectedEdges().forEach(function(ge){h.has(ge)&&$.has(ge.source())&&$.has(ge.target())&&$.merge(ge)})})};do{F()}while(C.length>0);return A},component:function(){var c=this[0];return c.cy().mutableElements().components(c)[0]}}),Il.componentsOf=Il.components;var ka=function(c,h){var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==c){var _=new Bs,C=!1;if(h){if(h.length>0&&_t(h[0])&&!Ct(h[0])){C=!0;for(var A=[],E=new hs,F=0,P=h.length;F<P;F++){var $=h[F];null==$.data&&($.data={});var Z=$.data;if(null==Z.id)Z.id=Xt();else if(c.hasElementWithId(Z.id)||E.has(Z.id))continue;var he=new Io(c,$,!1);A.push(he),E.add(Z.id)}h=A}}else h=[];this.length=0;for(var ge=0,ve=h.length;ge<ve;ge++){var Ee=h[ge][0];if(null!=Ee){var Be=Ee._private.data.id;(!m||!_.has(Be))&&(m&&_.set(Be,{index:this.length,ele:Ee}),this[this.length]=Ee,this.length++)}}this._private={eles:this,cy:c,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(Ue){this.lazyMap=Ue},rebuildMap:function(){for(var st=this.lazyMap=new Bs,tt=this.eles,wt=0;wt<tt.length;wt++){var Ut=tt[wt];st.set(Ut.id(),{index:wt,ele:Ut})}}},m&&(this._private.map=_),C&&this.restore()}else dt("A collection must have a reference to the core")},ga=Io.prototype=ka.prototype=Object.create(Array.prototype);ga.instanceString=function(){return"collection"},ga.spawn=function(f,c){return new ka(this.cy(),f,c)},ga.spawnSelf=function(){return this.spawn(this)},ga.cy=function(){return this._private.cy},ga.renderer=function(){return this._private.cy.renderer()},ga.element=function(){return this[0]},ga.collection=function(){return cn(this)?this:new ka(this._private.cy,[this])},ga.unique=function(){return new ka(this._private.cy,this,!0)},ga.hasElementWithId=function(f){return this._private.map.has(f=""+f)},ga.getElementById=function(f){var c=this._private.cy,h=this._private.map.get(f=""+f);return h?h.ele:new ka(c)},ga.$id=ga.getElementById,ga.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},ga.indexOf=function(f){return this._private.map.get(f[0]._private.data.id).index},ga.indexOfId=function(f){return this._private.map.get(f=""+f).index},ga.json=function(f){var c=this.element(),h=this.cy();if(null==c&&f)return this;if(null!=c){var m=c._private;if(_t(f)){if(h.startBatch(),f.data){c.data(f.data);var _=m.data;if(c.isEdge()){var C=!1,A={},E=f.data.source,F=f.data.target;null!=E&&E!=_.source&&(A.source=""+E,C=!0),null!=F&&F!=_.target&&(A.target=""+F,C=!0),C&&(c=c.move(A))}else{var $=f.data.parent;"parent"in f.data&&(null!=$||null!=_.parent)&&$!=_.parent&&(void 0===$&&($=null),null!=$&&($=""+$),c=c.move({parent:$}))}}f.position&&c.position(f.position);var Z=function(Ee,Be,Ue){var st=f[Ee];null!=st&&st!==m[Ee]&&(st?c[Be]():c[Ue]())};return Z("removed","remove","restore"),Z("selected","select","unselect"),Z("selectable","selectify","unselectify"),Z("locked","lock","unlock"),Z("grabbable","grabify","ungrabify"),Z("pannable","panify","unpanify"),null!=f.classes&&c.classes(f.classes),h.endBatch(),this}if(void 0===f){var he={data:Qe(m.data),position:Qe(m.position),group:m.group,removed:m.removed,selected:m.selected,selectable:m.selectable,locked:m.locked,grabbable:m.grabbable,pannable:m.pannable,classes:""},ge=0;return m.classes.forEach(function(ve){return he.classes+=0==ge++?ve:" "+ve}),he}}},ga.jsons=function(){for(var f=[],c=0;c<this.length;c++){var m=this[c].json();f.push(m)}return f},ga.clone=function(){for(var f=this.cy(),c=[],h=0;h<this.length;h++){var _=this[h].json(),C=new Io(f,_,!1);c.push(C)}return new ka(f,c)},ga.copy=ga.clone,ga.restore=function(){for(var E,f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this,m=h.cy(),_=m._private,C=[],A=[],F=0,P=h.length;F<P;F++){var $=h[F];c&&!$.removed()||($.isNode()?C.push($):A.push($))}E=C.concat(A);var Z,he=function(){E.splice(Z,1),Z--};for(Z=0;Z<E.length;Z++){var ge=E[Z],ve=ge._private,Ee=ve.data;if(ge.clearTraversalCache(),c||ve.removed)if(void 0===Ee.id)Ee.id=Xt();else if(Ot(Ee.id))Ee.id=""+Ee.id;else{if(le(Ee.id)||!Ge(Ee.id)){dt("Can not create element with invalid string ID `"+Ee.id+"`"),he();continue}if(m.hasElementWithId(Ee.id)){dt("Can not create second element with ID `"+Ee.id+"`"),he();continue}}var Be=Ee.id;if(ge.isNode()){var Ue=ve.position;null==Ue.x&&(Ue.x=0),null==Ue.y&&(Ue.y=0)}if(ge.isEdge()){for(var st=ge,tt=["source","target"],wt=tt.length,Ut=!1,Gt=0;Gt<wt;Gt++){var xt=tt[Gt],Wt=Ee[xt];Ot(Wt)&&(Wt=Ee[xt]=""+Ee[xt]),null==Wt||""===Wt?(dt("Can not create edge `"+Be+"` with unspecified "+xt),Ut=!0):m.hasElementWithId(Wt)||(dt("Can not create edge `"+Be+"` with nonexistant "+xt+" `"+Wt+"`"),Ut=!0)}if(Ut){he();continue}var Dt=m.getElementById(Ee.source),Kt=m.getElementById(Ee.target);Dt.same(Kt)?Dt._private.edges.push(st):(Dt._private.edges.push(st),Kt._private.edges.push(st)),st._private.source=Dt,st._private.target=Kt}ve.map=new Bs,ve.map.set(Be,{ele:ge,index:0}),ve.removed=!1,c&&m.addToPool(ge)}for(var Yt=0;Yt<C.length;Yt++){var lt=C[Yt],Zt=lt._private.data;Ot(Zt.parent)&&(Zt.parent=""+Zt.parent);var Vt=Zt.parent,Ln=null!=Vt;if(Ln){var sn=m.getElementById(Vt);if(sn.empty())Zt.parent=void 0;else{for(var bn=!1,zn=sn;!zn.empty();){if(lt.same(zn)){bn=!0,Zt.parent=void 0;break}zn=zn.parent()}bn||(sn[0]._private.children.push(lt),lt._private.parent=sn[0],_.hasCompoundNodes=!0)}}}if(E.length>0){for(var jn=E.length===h.length?h:new ka(m,E),pi=0;pi<jn.length;pi++){var Vn=jn[pi];Vn.isNode()||(Vn.parallelEdges().clearTraversalCache(),Vn.source().clearTraversalCache(),Vn.target().clearTraversalCache())}(_.hasCompoundNodes?m.collection().merge(jn).merge(jn.connectedNodes()).merge(jn.parent()):jn).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(f),f?jn.emitAndNotify("add"):c&&jn.emit("add")}return h},ga.removed=function(){var f=this[0];return f&&f._private.removed},ga.inside=function(){var f=this[0];return f&&!f._private.removed},ga.remove=function(){var f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],h=this,m=[],_={},C=h._private.cy;function A(Vt){for(var Ln=Vt._private.edges,sn=0;sn<Ln.length;sn++)F(Ln[sn])}function E(Vt){for(var Ln=Vt._private.children,sn=0;sn<Ln.length;sn++)F(Ln[sn])}function F(Vt){var Ln=_[Vt.id()];c&&Vt.removed()||Ln||(_[Vt.id()]=!0,Vt.isNode()?(m.push(Vt),A(Vt),E(Vt)):m.unshift(Vt))}for(var P=0,$=h.length;P<$;P++){var Z=h[P];F(Z)}function he(Vt,Ln){xi(Vt._private.edges,Ln),Vt.clearTraversalCache()}function ge(Vt){Vt.clearTraversalCache()}var ve=[];function Ee(Vt,Ln){Ln=Ln[0];var sn=(Vt=Vt[0])._private.children,bn=Vt.id();xi(sn,Ln),Ln._private.parent=null,ve.ids[bn]||(ve.ids[bn]=!0,ve.push(Vt))}ve.ids={},h.dirtyCompoundBoundsCache(),c&&C.removeFromPool(m);for(var Be=0;Be<m.length;Be++){var Ue=m[Be];if(Ue.isEdge()){var st=Ue.source()[0],tt=Ue.target()[0];he(st,Ue),he(tt,Ue);for(var wt=Ue.parallelEdges(),Ut=0;Ut<wt.length;Ut++){var Gt=wt[Ut];ge(Gt),Gt.isBundledBezier()&&Gt.dirtyBoundingBoxCache()}}else{var xt=Ue.parent();0!==xt.length&&Ee(xt,Ue)}c&&(Ue._private.removed=!0)}var Wt=C._private.elements;C._private.hasCompoundNodes=!1;for(var Dt=0;Dt<Wt.length;Dt++){var Kt=Wt[Dt];if(Kt.isParent()){C._private.hasCompoundNodes=!0;break}}var Yt=new ka(this.cy(),m);Yt.size()>0&&(f?Yt.emitAndNotify("remove"):c&&Yt.emit("remove"));for(var lt=0;lt<ve.length;lt++){var Zt=ve[lt];(!c||!Zt.removed())&&Zt.updateStyle()}return Yt},ga.move=function(f){var c=this._private.cy,h=this,m=!1,_=!1,C=function(ve){return null==ve?ve:""+ve};if(void 0!==f.source||void 0!==f.target){var A=C(f.source),E=C(f.target),F=null!=A&&c.hasElementWithId(A),P=null!=E&&c.hasElementWithId(E);(F||P)&&(c.batch(function(){h.remove(m,_),h.emitAndNotify("moveout");for(var ge=0;ge<h.length;ge++){var ve=h[ge],Ee=ve._private.data;ve.isEdge()&&(F&&(Ee.source=A),P&&(Ee.target=E))}h.restore(m,_)}),h.emitAndNotify("move"))}else if(void 0!==f.parent){var $=C(f.parent);if(null===$||c.hasElementWithId($)){var he=null===$?void 0:$;c.batch(function(){var ge=h.remove(m,_);ge.emitAndNotify("moveout");for(var ve=0;ve<h.length;ve++){var Ee=h[ve],Be=Ee._private.data;Ee.isNode()&&(Be.parent=he)}ge.restore(m,_)}),h.emitAndNotify("move")}}return this},[Pm,Ul,tu,lc,la,Qh,Lf,gb,$o,su,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var c=this[0];if(c)return c._private.group}},ou,Rd,Ol,pa,Il].forEach(function(f){Zi(ga,f)});var so={add:function(c){var h,m=this;if(Ze(c)){var _=c;if(_._private.cy===m)h=_.restore();else{for(var C=[],A=0;A<_.length;A++)C.push(_[A].json());h=new ka(m,C)}}else if(mt(c))h=new ka(m,c);else if(_t(c)&&(mt(c.nodes)||mt(c.edges))){for(var P=c,$=[],Z=["nodes","edges"],he=0,ge=Z.length;he<ge;he++){var ve=Z[he],Ee=P[ve];if(mt(Ee))for(var Be=0,Ue=Ee.length;Be<Ue;Be++){var st=Zi({group:ve},Ee[Be]);$.push(st)}}h=new ka(m,$)}else h=new Io(m,c).collection();return h},remove:function(c){return Ze(c)||Ge(c)&&(c=this.$(c)),c.remove()}},Fm=function(){function f(m){return-m.tension*m.x-m.friction*m.v}function c(m,_,C){var A={x:m.x+C.dx*_,v:m.v+C.dv*_,tension:m.tension,friction:m.friction};return{dx:A.v,dv:f(A)}}function h(m,_){var C={dx:m.v,dv:f(m)},A=c(m,.5*_,C),E=c(m,.5*_,A),F=c(m,_,E),$=1/6*(C.dv+2*(A.dv+E.dv)+F.dv);return m.x=m.x+1/6*(C.dx+2*(A.dx+E.dx)+F.dx)*_,m.v=m.v+$*_,m}return function m(_,C,A){var he,ge,ve,E={x:-1,v:0,tension:null,friction:null},F=[0],P=0,$=1e-4;for(_=parseFloat(_)||500,C=parseFloat(C)||20,A=A||null,E.tension=_,E.friction=C,ge=(he=null!==A)?(P=m(_,C))/A*.016:.016;ve=h(ve||E,ge),F.push(1+ve.x),P+=16,Math.abs(ve.x)>$&&Math.abs(ve.v)>$;);return he?function(Ee){return F[Ee*(F.length-1)|0]}:P}}(),qo=function(c,h,m,_){var C=function vr(f,c,h,m){var _=4,C=.001,A=1e-7,E=10,F=11,P=1/(F-1),$=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var Z=0;Z<4;++Z)if("number"!=typeof arguments[Z]||isNaN(arguments[Z])||!isFinite(arguments[Z]))return!1;f=Math.min(f,1),h=Math.min(h,1),f=Math.max(f,0),h=Math.max(h,0);var he=$?new Float32Array(F):new Array(F);function ge(Kt,Yt){return 1-3*Yt+3*Kt}function ve(Kt,Yt){return 3*Yt-6*Kt}function Ee(Kt){return 3*Kt}function Be(Kt,Yt,lt){return((ge(Yt,lt)*Kt+ve(Yt,lt))*Kt+Ee(Yt))*Kt}function Ue(Kt,Yt,lt){return 3*ge(Yt,lt)*Kt*Kt+2*ve(Yt,lt)*Kt+Ee(Yt)}function st(Kt,Yt){for(var lt=0;lt<_;++lt){var Zt=Ue(Yt,f,h);if(0===Zt)return Yt;Yt-=(Be(Yt,f,h)-Kt)/Zt}return Yt}function tt(){for(var Kt=0;Kt<F;++Kt)he[Kt]=Be(Kt*P,f,h)}function wt(Kt,Yt,lt){var Zt,Vt,Ln=0;do{(Zt=Be(Vt=Yt+(lt-Yt)/2,f,h)-Kt)>0?lt=Vt:Yt=Vt}while(Math.abs(Zt)>A&&++Ln<E);return Vt}function Ut(Kt){for(var Yt=0,lt=1,Zt=F-1;lt!==Zt&&he[lt]<=Kt;++lt)Yt+=P;--lt;var Ln=Yt+(Kt-he[lt])/(he[lt+1]-he[lt])*P,sn=Ue(Ln,f,h);return sn>=C?st(Kt,Ln):0===sn?Ln:wt(Kt,Yt,Yt+P)}var Gt=!1;function xt(){Gt=!0,(f!==c||h!==m)&&tt()}var Wt=function(Yt){return Gt||xt(),f===c&&h===m?Yt:0===Yt?0:1===Yt?1:Be(Ut(Yt),c,m)};Wt.getControlPoints=function(){return[{x:f,y:c},{x:h,y:m}]};var Dt="generateBezier("+[f,c,h,m]+")";return Wt.toString=function(){return Dt},Wt}(c,h,m,_);return function(A,E,F){return A+(E-A)*C(F)}},Nf={linear:function(c,h,m){return c+(h-c)*m},ease:qo(.25,.1,.25,1),"ease-in":qo(.42,0,1,1),"ease-out":qo(0,0,.58,1),"ease-in-out":qo(.42,0,.58,1),"ease-in-sine":qo(.47,0,.745,.715),"ease-out-sine":qo(.39,.575,.565,1),"ease-in-out-sine":qo(.445,.05,.55,.95),"ease-in-quad":qo(.55,.085,.68,.53),"ease-out-quad":qo(.25,.46,.45,.94),"ease-in-out-quad":qo(.455,.03,.515,.955),"ease-in-cubic":qo(.55,.055,.675,.19),"ease-out-cubic":qo(.215,.61,.355,1),"ease-in-out-cubic":qo(.645,.045,.355,1),"ease-in-quart":qo(.895,.03,.685,.22),"ease-out-quart":qo(.165,.84,.44,1),"ease-in-out-quart":qo(.77,0,.175,1),"ease-in-quint":qo(.755,.05,.855,.06),"ease-out-quint":qo(.23,1,.32,1),"ease-in-out-quint":qo(.86,0,.07,1),"ease-in-expo":qo(.95,.05,.795,.035),"ease-out-expo":qo(.19,1,.22,1),"ease-in-out-expo":qo(1,0,0,1),"ease-in-circ":qo(.6,.04,.98,.335),"ease-out-circ":qo(.075,.82,.165,1),"ease-in-out-circ":qo(.785,.135,.15,.86),spring:function(c,h,m){if(0===m)return Nf.linear;var _=Fm(c,h,m);return function(C,A,E){return C+(A-C)*_(E)}},"cubic-bezier":qo};function ig(f,c,h,m,_){if(1===m||c===h)return h;var C=_(c,h,m);return null==f||((f.roundValue||f.color)&&(C=Math.round(C)),void 0!==f.min&&(C=Math.max(C,f.min)),void 0!==f.max&&(C=Math.min(C,f.max))),C}function rg(f,c){return null!=f.pfValue||null!=f.value?null==f.pfValue||null!=c&&"%"===c.type.units?f.value:f.pfValue:f}function Wl(f,c,h,m,_){var C=null!=_?_.type:null;h<0?h=0:h>1&&(h=1);var A=rg(f,_),E=rg(c,_);if(Ot(A)&&Ot(E))return ig(C,A,E,h,m);if(mt(A)&&mt(E)){for(var F=[],P=0;P<E.length;P++){var $=A[P],Z=E[P];if(null!=$&&null!=Z){var he=ig(C,$,Z,h,m);F.push(he)}else F.push(Z)}return F}}function Bf(f,c,h,m){var _=!m,C=f._private,A=c._private,E=A.easing,F=A.startTime,$=(m?f:f.cy()).style();if(!A.easingImpl)if(null==E)A.easingImpl=Nf.linear;else{var Z,ge,ve;Z=Ge(E)?$.parse("transition-timing-function",E).value:E,Ge(Z)?(ge=Z,ve=[]):(ge=Z[1],ve=Z.slice(2).map(function(jn){return+jn})),ve.length>0?("spring"===ge&&ve.push(A.duration),A.easingImpl=Nf[ge].apply(null,ve)):A.easingImpl=Nf[ge]}var Be,Ee=A.easingImpl;if(Be=0===A.duration?1:(h-F)/A.duration,A.applying&&(Be=A.progress),Be<0?Be=0:Be>1&&(Be=1),null==A.delay){var Ue=A.startPosition,st=A.position;if(st&&_&&!f.locked()){var tt={};Ac(Ue.x,st.x)&&(tt.x=Wl(Ue.x,st.x,Be,Ee)),Ac(Ue.y,st.y)&&(tt.y=Wl(Ue.y,st.y,Be,Ee)),f.position(tt)}var wt=A.startPan,Ut=A.pan,Gt=C.pan,xt=null!=Ut&&m;xt&&(Ac(wt.x,Ut.x)&&(Gt.x=Wl(wt.x,Ut.x,Be,Ee)),Ac(wt.y,Ut.y)&&(Gt.y=Wl(wt.y,Ut.y,Be,Ee)),f.emit("pan"));var Wt=A.startZoom,Dt=A.zoom,Kt=null!=Dt&&m;Kt&&(Ac(Wt,Dt)&&(C.zoom=Vr(C.minZoom,Wl(Wt,Dt,Be,Ee),C.maxZoom)),f.emit("zoom")),(xt||Kt)&&f.emit("viewport");var Yt=A.style;if(Yt&&Yt.length>0&&_){for(var lt=0;lt<Yt.length;lt++){var Zt=Yt[lt],Vt=Zt.name,sn=A.startStyle[Vt],zn=Wl(sn,Zt,Be,Ee,$.properties[sn.name]);$.overrideBypass(f,Vt,zn)}f.emit("style")}}return A.progress=Be,Be}function Ac(f,c){return!!(null!=f&&null!=c&&(Ot(f)&&Ot(c)||f&&c))}function sg(f,c,h,m){var _=c._private;_.started=!0,_.startTime=h-_.progress*_.duration}function og(f,c){var h=c._private.aniEles,m=[];function _($,Z){var he=$._private,ge=he.animation.current,ve=he.animation.queue,Ee=!1;if(0===ge.length){var Be=ve.shift();Be&&ge.push(Be)}for(var Ue=function(Gt){for(var xt=Gt.length-1;xt>=0;xt--)(0,Gt[xt])();Gt.splice(0,Gt.length)},st=ge.length-1;st>=0;st--){var tt=ge[st],wt=tt._private;wt.stopped?(ge.splice(st,1),wt.hooked=!1,wt.playing=!1,wt.started=!1,Ue(wt.frames)):!wt.playing&&!wt.applying||(wt.playing&&wt.applying&&(wt.applying=!1),wt.started||sg(0,tt,f),Bf($,tt,f,Z),wt.applying&&(wt.applying=!1),Ue(wt.frames),null!=wt.step&&wt.step(f),tt.completed()&&(ge.splice(st,1),wt.hooked=!1,wt.playing=!1,wt.started=!1,Ue(wt.completes)),Ee=!0)}return!Z&&0===ge.length&&0===ve.length&&m.push($),Ee}for(var C=!1,A=0;A<h.length;A++){var F=_(h[A]);C=C||F}var P=_(c,!0);(C||P)&&(h.length>0?c.notify("draw",h):c.notify("draw")),h.unmerge(m),c.emit("step")}var ol={animate:Us.animate(),animation:Us.animation(),animated:Us.animated(),clearQueue:Us.clearQueue(),delay:Us.delay(),delayAnimation:Us.delayAnimation(),stop:Us.stop(),addToAnimationPool:function(c){!this.styleEnabled()||this._private.aniEles.merge(c)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){var m=c.renderer();m&&m.beforeRender?m.beforeRender(function(C,A){og(A,c)},m.beforeRenderPriorities.animations):function h(){!c._private.animationsRunning||fn(function(C){og(C,c),h()})}()}}},uc={qualifierCompare:function(c,h){return null==c||null==h?null==c&&null==h:c.sameText(h)},eventMatches:function(c,h,m){var _=h.qualifier;return null==_||c!==m.target&&Ct(m.target)&&_.matches(m.target)},addEventFields:function(c,h){h.cy=c,h.target=c},callbackContext:function(c,h,m){return null!=h.qualifier?m.target:c}},Zl=function(c){return Ge(c)?new fp(c):c},ld={createEmitter:function(){var c=this._private;return c.emitter||(c.emitter=new zu(uc,this)),this},emitter:function(){return this._private.emitter},on:function(c,h,m){return this.emitter().on(c,Zl(h),m),this},removeListener:function(c,h,m){return this.emitter().removeListener(c,Zl(h),m),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(c,h,m){return this.emitter().one(c,Zl(h),m),this},once:function(c,h,m){return this.emitter().one(c,Zl(h),m),this},emit:function(c,h){return this.emitter().emit(c,h),this},emitAndNotify:function(c,h){return this.emit(c),this.notify(c,h),this}};Us.eventAliasesOn(ld);var cf={png:function(c){return this._private.renderer.png(c=c||{})},jpg:function(c){var h=this._private.renderer;return(c=c||{}).bg=c.bg||"#fff",h.jpg(c)}};cf.jpeg=cf.jpg;var vl={layout:function(c){var h=this;if(null!=c)if(null!=c.name){var C,m=c.name,_=h.extension("layout",m);if(null!=_)return C=Ge(c.eles)?h.$(c.eles):null!=c.eles?c.eles:h.$(),new _(Zi({},c,{cy:h,eles:C}));dt("No such layout `"+m+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else dt("A `name` must be specified to make a layout");else dt("Layout options must be specified to make a layout")}};vl.createLayout=vl.makeLayout=vl.layout;var Uu={notify:function(c,h){var m=this._private;if(this.batching()){m.batchNotifications=m.batchNotifications||{};var _=m.batchNotifications[c]=m.batchNotifications[c]||this.collection();null!=h&&_.merge(h)}else if(m.notificationsEnabled){var C=this.renderer();this.destroyed()||!C||C.notify(c,h)}},notifications:function(c){var h=this._private;return void 0===c?h.notificationsEnabled:(h.notificationsEnabled=!!c,this)},noNotifications:function(c){this.notifications(!1),c(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var c=this._private;return null==c.batchCount&&(c.batchCount=0),0===c.batchCount&&(c.batchStyleEles=this.collection(),c.batchNotifications={}),c.batchCount++,this},endBatch:function(){var c=this._private;if(0===c.batchCount)return this;if(c.batchCount--,0===c.batchCount){c.batchStyleEles.updateStyle();var h=this.renderer();Object.keys(c.batchNotifications).forEach(function(m){var _=c.batchNotifications[m];_.empty()?h.notify(m):h.notify(m,_)})}return this},batch:function(c){return this.startBatch(),c(),this.endBatch(),this},batchData:function(c){var h=this;return this.batch(function(){for(var m=Object.keys(c),_=0;_<m.length;_++){var C=m[_],A=c[C];h.getElementById(C).data(A)}})}},cd=mi({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),ud={renderTo:function(c,h,m,_){return this._private.renderer.renderTo(c,h,m,_),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(c){var h=this,m=h.extension("renderer",c.name);if(null!=m){void 0!==c.wheelSensitivity&&pe("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var _=cd(c);_.cy=h,h._private.renderer=new m(_),this.notify("init")}else dt("Can not initialise: No such renderer `".concat(c.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var c=this;c.notify("destroy");var h=c.container();if(h)for(h._cyreg=null;h.childNodes.length>0;)h.removeChild(h.childNodes[0]);c._private.renderer=null,c.mutableElements().forEach(function(m){var _=m._private;_.rscratch={},_.rstyle={},_.animation.current=[],_.animation.queue=[]})},onRender:function(c){return this.on("render",c)},offRender:function(c){return this.off("render",c)}};ud.invalidateDimensions=ud.resize;var Ql={collection:function(c,h){return Ge(c)?this.$(c):Ze(c)?c.collection():mt(c)?new ka(this,c,h):new ka(this)},nodes:function(c){var h=this.$(function(m){return m.isNode()});return c?h.filter(c):h},edges:function(c){var h=this.$(function(m){return m.isEdge()});return c?h.filter(c):h},$:function(c){var h=this._private.elements;return c?h.filter(c):h.spawnSelf()},mutableElements:function(){return this._private.elements}};Ql.elements=Ql.filter=Ql.$;var al={apply:function(f){for(var c=this,_=c._private.cy.collection(),C=0;C<f.length;C++){var A=f[C],E=c.getContextMeta(A);if(!E.empty){var F=c.getContextStyle(E),P=c.applyContextStyle(E,F,A);A._private.appliedInitStyle?c.updateTransitions(A,P.diffProps):A._private.appliedInitStyle=!0,c.updateStyleHints(A)&&_.push(A)}}return _},getPropertiesDiff:function(f,c){var h=this,m=h._private.propDiffs=h._private.propDiffs||{},_=f+"-"+c,C=m[_];if(C)return C;for(var A=[],E={},F=0;F<h.length;F++){var P=h[F],Z="t"===c[F],he="t"===f[F]!==Z,ge=P.mappedProperties.length>0;if(he||Z&&ge){var ve=void 0;he&&ge||he?ve=P.properties:ge&&(ve=P.mappedProperties);for(var Ee=0;Ee<ve.length;Ee++){for(var Be=ve[Ee],Ue=Be.name,st=!1,tt=F+1;tt<h.length&&("t"!==c[tt]||!(st=null!=h[tt].properties[Be.name]));tt++);!E[Ue]&&!st&&(E[Ue]=!0,A.push(Ue))}}}return m[_]=A,A},getContextMeta:function(f){for(var m,c=this,h="",_=f._private.styleCxtKey||"",C=0;C<c.length;C++){var A=c[C];h+=A.selector&&A.selector.matches(f)?"t":"f"}return m=c.getPropertiesDiff(_,h),f._private.styleCxtKey=h,{key:h,diffPropNames:m,empty:0===m.length}},getContextStyle:function(f){var c=f.key,m=this._private.contextStyles=this._private.contextStyles||{};if(m[c])return m[c];for(var _={_private:{key:c}},C=0;C<this.length;C++){var A=this[C];if("t"===c[C])for(var F=0;F<A.properties.length;F++){var P=A.properties[F];_[P.name]=P}}return m[c]=_,_},applyContextStyle:function(f,c,h){for(var _=f.diffPropNames,C={},A=this.types,E=0;E<_.length;E++){var F=_[E],P=c[F],$=h.pstyle(F);if(!P){if(!$)continue;P=$.bypass?{name:F,deleteBypassed:!0}:{name:F,delete:!0}}if($!==P){if(P.mapped===A.fn&&null!=$&&null!=$.mapping&&$.mapping.value===P.value){var Z=$.mapping;if((Z.fnValue=P.value(h))===Z.prevFnValue)continue}var ge=C[F]={prev:$};this.applyParsedProperty(h,P),ge.next=h.pstyle(F),ge.next&&ge.next.bypass&&(ge.next=ge.next.bypassed)}}return{diffProps:C}},updateStyleHints:function(f){var m,c=f._private,h=this,_=h.propertyGroupKeys,C=function(lr,wr,as){return h.getPropertiesHash(lr,wr,as)},A=c.styleKey;if(f.removed())return!1;var lr,E="nodes"===c.group,F=f._private.style;m=Object.keys(F);for(var P=0;P<_.length;P++)c.styleKeys[_[P]]=[yn,kt];for(var Z=function(lr,wr){return c.styleKeys[wr][0]=En(lr,c.styleKeys[wr][0])},he=function(lr,wr){return c.styleKeys[wr][1]=Nn(lr,c.styleKeys[wr][1])},ge=function(lr,wr){Z(lr,wr),he(lr,wr)},ve=function(lr,wr){for(var as=0;as<lr.length;as++){var _s=lr.charCodeAt(as);Z(_s,wr),he(_s,wr)}},Ue=0;Ue<m.length;Ue++){var st=m[Ue],tt=F[st];if(null!=tt){var wt=this.properties[st],Ut=wt.type,Gt=wt.groupKey,xt=void 0;null!=wt.hashOverride?xt=wt.hashOverride(f,tt):null!=tt.pfValue&&(xt=tt.pfValue);var Wt=null==wt.enums?tt.value:null,Dt=null!=xt,lt=tt.units;!Ut.number||!Dt&&null==Wt||Ut.multiple?ve(tt.strValue,Gt):(ge(-128<(lr=Dt?xt:Wt)&&lr<128&&Math.floor(lr)!==lr?2e9-(1024*lr|0):lr,Gt),!Dt&&null!=lt&&ve(lt,Gt))}}for(var Vt=[yn,kt],Ln=0;Ln<_.length;Ln++){var bn=c.styleKeys[_[Ln]];Vt[0]=En(bn[0],Vt[0]),Vt[1]=Nn(bn[1],Vt[1])}c.styleKey=function(c,h){return 2097152*c+h}(Vt[0],Vt[1]);var zn=c.styleKeys;c.labelDimsKey=ar(zn.labelDimensions);var jn=C(f,["label"],zn.labelDimensions);if(c.labelKey=ar(jn),c.labelStyleKey=ar(qr(zn.commonLabel,jn)),!E){var pi=C(f,["source-label"],zn.labelDimensions);c.sourceLabelKey=ar(pi),c.sourceLabelStyleKey=ar(qr(zn.commonLabel,pi));var Vn=C(f,["target-label"],zn.labelDimensions);c.targetLabelKey=ar(Vn),c.targetLabelStyleKey=ar(qr(zn.commonLabel,Vn))}if(E){var ci=c.styleKeys,Gn=ci.pie,_i=[ci.nodeBody,ci.nodeBorder,ci.backgroundImage,ci.compound,Gn].filter(function(Ni){return null!=Ni}).reduce(qr,[yn,kt]);c.nodeKey=ar(_i),c.hasPie=null!=Gn&&Gn[0]!==yn&&Gn[1]!==kt}return A!==c.styleKey},clearStyleHints:function(f){var c=f._private;c.styleCxtKey="",c.styleKeys={},c.styleKey=null,c.labelKey=null,c.labelStyleKey=null,c.sourceLabelKey=null,c.sourceLabelStyleKey=null,c.targetLabelKey=null,c.targetLabelStyleKey=null,c.nodeKey=null,c.hasPie=null},applyParsedProperty:function(f,c){var C,h=this,m=c,_=f._private.style,A=h.types,E=h.properties[m.name].type,F=m.bypass,P=_[m.name],$=P&&P.bypass,Z=f._private,he="mapping",ge=function(Ai){return null==Ai?null:null!=Ai.pfValue?Ai.pfValue:Ai.value},ve=function(){var Ai=ge(P),Oi=ge(m);h.checkTriggers(f,m.name,Ai,Oi)};if(m&&"pie"===m.name.substr(0,3)&&pe("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===c.name&&f.isEdge()&&("bezier"!==c.value&&f.isLoop()||"haystack"===c.value&&(f.source().isParent()||f.target().isParent()))&&(m=c=this.parse(c.name,"bezier",F)),m.delete)return _[m.name]=void 0,ve(),!0;if(m.deleteBypassed)return P?!!P.bypass&&(P.bypassed=void 0,ve(),!0):(ve(),!0);if(m.deleteBypass)return P?!!P.bypass&&(_[m.name]=P.bypassed,ve(),!0):(ve(),!0);var Ee=function(){pe("Do not assign mappings to elements without corresponding data (i.e. ele `"+f.id()+"` has no mapping for property `"+m.name+"` with data field `"+m.field+"`); try a `["+m.field+"]` selector to limit scope to elements with `"+m.field+"` defined")};switch(m.mapped){case A.mapData:for(var Be=m.field.split("."),Ue=Z.data,st=0;st<Be.length&&Ue;st++)Ue=Ue[Be[st]];if(null==Ue)return Ee(),!1;var wt;if(!Ot(Ue))return pe("Do not use continuous mappers without specifying numeric data (i.e. `"+m.field+": "+Ue+"` for `"+f.id()+"` is non-numeric)"),!1;var Ut=m.fieldMax-m.fieldMin;if((wt=0===Ut?0:(Ue-m.fieldMin)/Ut)<0?wt=0:wt>1&&(wt=1),E.color){var Gt=m.valueMin[0],Wt=m.valueMin[1],Dt=m.valueMax[1],Kt=m.valueMin[2],Yt=m.valueMax[2],lt=m.valueMin[3]??1,Zt=m.valueMax[3]??1,Vt=[Math.round(Gt+(m.valueMax[0]-Gt)*wt),Math.round(Wt+(Dt-Wt)*wt),Math.round(Kt+(Yt-Kt)*wt),Math.round(lt+(Zt-lt)*wt)];C={bypass:m.bypass,name:m.name,value:Vt,strValue:"rgb("+Vt[0]+", "+Vt[1]+", "+Vt[2]+")"}}else{if(!E.number)return!1;C=this.parse(m.name,m.valueMin+(m.valueMax-m.valueMin)*wt,m.bypass,he)}if(!C)return Ee(),!1;C.mapping=m,m=C;break;case A.data:for(var sn=m.field.split("."),bn=Z.data,zn=0;zn<sn.length&&bn;zn++)bn=bn[sn[zn]];if(null!=bn&&(C=this.parse(m.name,bn,m.bypass,he)),!C)return Ee(),!1;C.mapping=m,m=C;break;case A.fn:var Vn=null!=m.fnValue?m.fnValue:(0,m.value)(f);if(m.prevFnValue=Vn,null==Vn)return pe("Custom function mappers may not return null (i.e. `"+m.name+"` for ele `"+f.id()+"` is null)"),!1;if(!(C=this.parse(m.name,Vn,m.bypass,he)))return pe("Custom function mappers may not return invalid values for the property type (i.e. `"+m.name+"` for ele `"+f.id()+"` is invalid)"),!1;C.mapping=Qe(m),m=C;break;case void 0:break;default:return!1}return F?(m.bypassed=$?P.bypassed:P,_[m.name]=m):$?P.bypassed=m:_[m.name]=m,ve(),!0},cleanElements:function(f,c){for(var h=0;h<f.length;h++){var m=f[h];if(this.clearStyleHints(m),m.dirtyCompoundBoundsCache(),m.dirtyBoundingBoxCache(),c)for(var _=m._private.style,C=Object.keys(_),A=0;A<C.length;A++){var E=C[A],F=_[E];null!=F&&(F.bypass?F.bypassed=null:_[E]=null)}else m._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(f,c){var h=this,m=f._private,_=f.pstyle("transition-property").value,C=f.pstyle("transition-duration").pfValue,A=f.pstyle("transition-delay").pfValue;if(_.length>0&&C>0){for(var E={},F=!1,P=0;P<_.length;P++){var $=_[P],Z=f.pstyle($),he=c[$];if(he){var ve=he.prev,Ee=null!=he.next?he.next:Z,Be=!1,Ue=void 0;!ve||(Ot(ve.pfValue)&&Ot(Ee.pfValue)?Ue=ve.pfValue+1e-6*(Be=Ee.pfValue-ve.pfValue):Ot(ve.value)&&Ot(Ee.value)?Ue=ve.value+1e-6*(Be=Ee.value-ve.value):mt(ve.value)&&mt(Ee.value)&&(Be=ve.value[0]!==Ee.value[0]||ve.value[1]!==Ee.value[1]||ve.value[2]!==Ee.value[2],Ue=ve.strValue),Be&&(E[$]=Ee.strValue,this.applyBypass(f,$,Ue),F=!0))}}if(!F)return;m.transitioning=!0,new Da(function(tt){A>0?f.delayAnimation(A).play().promise().then(tt):tt()}).then(function(){return f.animation({style:E,duration:C,easing:f.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){h.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1})}else m.transitioning&&(this.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1)},checkTrigger:function(f,c,h,m,_,C){var A=this.properties[c],E=_(A);null!=E&&E(h,m)&&C(A)},checkZOrderTrigger:function(f,c,h,m){var _=this;this.checkTrigger(f,c,h,m,function(C){return C.triggersZOrder},function(){_._private.cy.notify("zorder",f)})},checkBoundsTrigger:function(f,c,h,m){this.checkTrigger(f,c,h,m,function(_){return _.triggersBounds},function(_){f.dirtyCompoundBoundsCache(),f.dirtyBoundingBoxCache(),_.triggersBoundsOfParallelBeziers&&("curve-style"===c&&("bezier"===h||"bezier"===m)||"display"===c&&("none"===h||"none"===m))&&f.parallelEdges().forEach(function(C){C.isBundledBezier()&&C.dirtyBoundingBoxCache()})})},checkTriggers:function(f,c,h,m){f.dirtyStyleCache(),this.checkZOrderTrigger(f,c,h,m),this.checkBoundsTrigger(f,c,h,m)}},zc={applyBypass:function(f,c,h,m){var C=[];if("*"===c||"**"===c){if(void 0!==h)for(var E=0;E<this.properties.length;E++){var $=this.parse(this.properties[E].name,h,!0);$&&C.push($)}}else if(Ge(c)){var Z=this.parse(c,h,!0);Z&&C.push(Z)}else{if(!_t(c))return!1;var he=c;m=h;for(var ge=Object.keys(he),ve=0;ve<ge.length;ve++){var Ee=ge[ve],Be=he[Ee];if(void 0===Be&&(Be=he[Ht(Ee)]),void 0!==Be){var Ue=this.parse(Ee,Be,!0);Ue&&C.push(Ue)}}}if(0===C.length)return!1;for(var st=!1,tt=0;tt<f.length;tt++){for(var wt=f[tt],Ut={},Gt=void 0,xt=0;xt<C.length;xt++){var Wt=C[xt];if(m){var Dt=wt.pstyle(Wt.name);Gt=Ut[Wt.name]={prev:Dt}}st=this.applyParsedProperty(wt,Qe(Wt))||st,m&&(Gt.next=wt.pstyle(Wt.name))}st&&this.updateStyleHints(wt),m&&this.updateTransitions(wt,Ut,!0)}return st},overrideBypass:function(f,c,h){c=ht(c);for(var m=0;m<f.length;m++){var _=f[m],C=_._private.style[c],A=this.properties[c].type,E=A.color,F=A.mutiple,P=C?null!=C.pfValue?C.pfValue:C.value:null;C&&C.bypass?(C.value=h,null!=C.pfValue&&(C.pfValue=h),C.strValue=E?"rgb("+h.join(",")+")":F?h.join(" "):""+h,this.updateStyleHints(_)):this.applyBypass(_,c,h),this.checkTriggers(_,c,P,h)}},removeAllBypasses:function(f,c){return this.removeBypasses(f,this.propertyNames,c)},removeBypasses:function(f,c,h){for(var _=0;_<f.length;_++){for(var C=f[_],A={},E=0;E<c.length;E++){var F=c[E],P=this.properties[F],$=C.pstyle(P.name);if($&&$.bypass){var he=this.parse(F,"",!0),ge=A[P.name]={prev:$};this.applyParsedProperty(C,he),ge.next=C.pstyle(P.name)}}this.updateStyleHints(C),h&&this.updateTransitions(C,A,!0)}}},Ov={getEmSizeInPixels:function(){var f=this.containerCss("font-size");return null!=f?parseFloat(f):1},containerCss:function(f){var h=this._private.cy.container();if(fe&&h&&fe.getComputedStyle)return fe.getComputedStyle(h).getPropertyValue(f)}},Hu={getRenderedStyle:function(f,c){return c?this.getStylePropertyValue(f,c,!0):this.getRawStyle(f,!0)},getRawStyle:function(f,c){var h=this;if(f=f[0]){for(var m={},_=0;_<h.properties.length;_++){var C=h.properties[_],A=h.getStylePropertyValue(f,C.name,c);null!=A&&(m[C.name]=A,m[Ht(C.name)]=A)}return m}},getIndexedStyle:function(f,c,h,m){return f.pstyle(c)[h][m]??f.cy().style().getDefaultProperty(c)[h][0]},getStylePropertyValue:function(f,c,h){if(f=f[0]){var _=this.properties[c];_.alias&&(_=_.pointsTo);var C=_.type,A=f.pstyle(_.name);if(A){var E=A.value,F=A.units,P=A.strValue;if(h&&C.number&&null!=E&&Ot(E)){var $=f.cy().zoom(),Z=function(Be){return Be*$},he=function(Be,Ue){return Z(Be)+Ue},ge=mt(E);return(ge?F.every(function(Ee){return null!=Ee}):null!=F)?ge?E.map(function(Ee,Be){return he(Ee,F[Be])}).join(" "):he(E,F):ge?E.map(function(Ee){return Ge(Ee)?Ee:""+Z(Ee)}).join(" "):""+Z(E)}if(null!=P)return P}return null}},getAnimationStartStyle:function(f,c){for(var h={},m=0;m<c.length;m++){var C=c[m].name,A=f.pstyle(C);void 0!==A&&(A=_t(A)?this.parse(C,A.strValue):this.parse(C,A)),A&&(h[C]=A)}return h},getPropsList:function(f){var h=[],m=f,_=this.properties;if(m)for(var C=Object.keys(m),A=0;A<C.length;A++){var E=C[A],F=m[E],P=_[E]||_[ht(E)],$=this.parse(P.name,F);$&&h.push($)}return h},getNonDefaultPropertiesHash:function(f,c,h){var C,A,E,F,P,m=h.slice();for(F=0;F<c.length;F++)if(null!=(C=f.pstyle(c[F],!1)))if(null!=C.pfValue)m[0]=En(E,m[0]),m[1]=Nn(E,m[1]);else for(A=C.strValue,P=0;P<A.length;P++)E=A.charCodeAt(P),m[0]=En(E,m[0]),m[1]=Nn(E,m[1]);return m}};Hu.getPropertiesHash=Hu.getNonDefaultPropertiesHash;var Jl={appendFromJson:function(f){for(var c=this,h=0;h<f.length;h++){var m=f[h],_=m.selector,C=m.style||m.css,A=Object.keys(C);c.selector(_);for(var E=0;E<A.length;E++){var F=A[E];c.css(F,C[F])}}return c},fromJson:function(f){var c=this;return c.resetToDefault(),c.appendFromJson(f),c},json:function(){for(var f=[],c=this.defaultLength;c<this.length;c++){for(var h=this[c],m=h.selector,_=h.properties,C={},A=0;A<_.length;A++){var E=_[A];C[E.name]=E.strValue}f.push({selector:m?m.toString():"core",style:C})}return f}},Vc={appendFromString:function(f){var _,C,A,h=this,m=""+f;function E(){m=m.length>_.length?m.substr(_.length):""}function F(){C=C.length>A.length?C.substr(A.length):""}for(m=m.replace(/[/][*](\s|.)+?[*][/]/g,"");!m.match(/^\s*$/);){var $=m.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!$){pe("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+m);break}_=$[0];var Z=$[1];if("core"!==Z&&new fp(Z).invalid)pe("Skipping parsing of block: Invalid selector found in string stylesheet: "+Z),E();else{var ge=$[2],ve=!1;C=ge;for(var Ee=[];!C.match(/^\s*$/);){var Ue=C.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!Ue){pe("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+ge),ve=!0;break}A=Ue[0];var st=Ue[1],tt=Ue[2];this.properties[st]?h.parse(st,tt)?(Ee.push({name:st,val:tt}),F()):(pe("Skipping property: Invalid property definition in: "+A),F()):(pe("Skipping property: Invalid property name in: "+A),F())}if(ve){E();break}h.selector(Z);for(var Gt=0;Gt<Ee.length;Gt++){var xt=Ee[Gt];h.css(xt.name,xt.val)}E()}}return h},fromString:function(f){var c=this;return c.resetToDefault(),c.appendFromString(f),c}},Qo={};(function(){var f=Me,C=function(_i){return"^"+_i+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},A=function(_i){var Ni=f+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+_i+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*("+Ni+")\\s*\\,\\s*("+Ni+")\\)$"},E=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Qo.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:C("data")},layoutData:{mapping:!0,regex:C("layoutData")},scratch:{mapping:!0,regex:C("scratch")},mapData:{mapping:!0,regex:A("mapData")},mapLayoutData:{mapping:!0,regex:A("mapLayoutData")},mapScratch:{mapping:!0,regex:A("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:E,singleRegexMatchValue:!0},urls:{regexes:E,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(_i,Ni){switch(_i.length){case 2:return"deg"!==Ni[0]&&"rad"!==Ni[0]&&"deg"!==Ni[1]&&"rad"!==Ni[1];case 1:return Ge(_i[0])||"deg"===Ni[0]||"rad"===Ni[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(_i){var Ni=_i.length;return 1===Ni||2===Ni||4===Ni}}};var F={zeroNonZero:function(_i,Ni){return(null==_i||null==Ni)&&_i!==Ni||0==_i&&0!=Ni||0!=_i&&0==Ni},any:function(_i,Ni){return _i!=Ni},emptyNonEmpty:function(_i,Ni){var lr=le(_i),wr=le(Ni);return lr&&!wr||!lr&&wr}},P=Qo.types,$=[{name:"label",type:P.text,triggersBounds:F.any,triggersZOrder:F.emptyNonEmpty},{name:"text-rotation",type:P.textRotation,triggersBounds:F.any},{name:"text-margin-x",type:P.bidirectionalSize,triggersBounds:F.any},{name:"text-margin-y",type:P.bidirectionalSize,triggersBounds:F.any}],Z=[{name:"source-label",type:P.text,triggersBounds:F.any},{name:"source-text-rotation",type:P.textRotation,triggersBounds:F.any},{name:"source-text-margin-x",type:P.bidirectionalSize,triggersBounds:F.any},{name:"source-text-margin-y",type:P.bidirectionalSize,triggersBounds:F.any},{name:"source-text-offset",type:P.size,triggersBounds:F.any}],he=[{name:"target-label",type:P.text,triggersBounds:F.any},{name:"target-text-rotation",type:P.textRotation,triggersBounds:F.any},{name:"target-text-margin-x",type:P.bidirectionalSize,triggersBounds:F.any},{name:"target-text-margin-y",type:P.bidirectionalSize,triggersBounds:F.any},{name:"target-text-offset",type:P.size,triggersBounds:F.any}],ge=[{name:"font-family",type:P.fontFamily,triggersBounds:F.any},{name:"font-style",type:P.fontStyle,triggersBounds:F.any},{name:"font-weight",type:P.fontWeight,triggersBounds:F.any},{name:"font-size",type:P.size,triggersBounds:F.any},{name:"text-transform",type:P.textTransform,triggersBounds:F.any},{name:"text-wrap",type:P.textWrap,triggersBounds:F.any},{name:"text-overflow-wrap",type:P.textOverflowWrap,triggersBounds:F.any},{name:"text-max-width",type:P.size,triggersBounds:F.any},{name:"text-outline-width",type:P.size,triggersBounds:F.any},{name:"line-height",type:P.positiveNumber,triggersBounds:F.any}],ve=[{name:"text-valign",type:P.valign,triggersBounds:F.any},{name:"text-halign",type:P.halign,triggersBounds:F.any},{name:"color",type:P.color},{name:"text-outline-color",type:P.color},{name:"text-outline-opacity",type:P.zeroOneNumber},{name:"text-background-color",type:P.color},{name:"text-background-opacity",type:P.zeroOneNumber},{name:"text-background-padding",type:P.size,triggersBounds:F.any},{name:"text-border-opacity",type:P.zeroOneNumber},{name:"text-border-color",type:P.color},{name:"text-border-width",type:P.size,triggersBounds:F.any},{name:"text-border-style",type:P.borderStyle,triggersBounds:F.any},{name:"text-background-shape",type:P.textBackgroundShape,triggersBounds:F.any},{name:"text-justification",type:P.justification}],Ee=[{name:"events",type:P.bool},{name:"text-events",type:P.bool}],Be=[{name:"display",type:P.display,triggersZOrder:F.any,triggersBounds:F.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:P.visibility,triggersZOrder:F.any},{name:"opacity",type:P.zeroOneNumber,triggersZOrder:F.zeroNonZero},{name:"text-opacity",type:P.zeroOneNumber},{name:"min-zoomed-font-size",type:P.size},{name:"z-compound-depth",type:P.zCompoundDepth,triggersZOrder:F.any},{name:"z-index-compare",type:P.zIndexCompare,triggersZOrder:F.any},{name:"z-index",type:P.nonNegativeInt,triggersZOrder:F.any}],Ue=[{name:"overlay-padding",type:P.size,triggersBounds:F.any},{name:"overlay-color",type:P.color},{name:"overlay-opacity",type:P.zeroOneNumber,triggersBounds:F.zeroNonZero},{name:"overlay-shape",type:P.overlayShape,triggersBounds:F.any}],st=[{name:"underlay-padding",type:P.size,triggersBounds:F.any},{name:"underlay-color",type:P.color},{name:"underlay-opacity",type:P.zeroOneNumber,triggersBounds:F.zeroNonZero},{name:"underlay-shape",type:P.overlayShape,triggersBounds:F.any}],tt=[{name:"transition-property",type:P.propList},{name:"transition-duration",type:P.time},{name:"transition-delay",type:P.time},{name:"transition-timing-function",type:P.easing}],wt=function(_i,Ni){return"label"===Ni.value?-_i.poolIndex():Ni.pfValue},Ut=[{name:"height",type:P.nodeSize,triggersBounds:F.any,hashOverride:wt},{name:"width",type:P.nodeSize,triggersBounds:F.any,hashOverride:wt},{name:"shape",type:P.nodeShape,triggersBounds:F.any},{name:"shape-polygon-points",type:P.polygonPointList,triggersBounds:F.any},{name:"background-color",type:P.color},{name:"background-fill",type:P.fill},{name:"background-opacity",type:P.zeroOneNumber},{name:"background-blacken",type:P.nOneOneNumber},{name:"background-gradient-stop-colors",type:P.colors},{name:"background-gradient-stop-positions",type:P.percentages},{name:"background-gradient-direction",type:P.gradientDirection},{name:"padding",type:P.sizeMaybePercent,triggersBounds:F.any},{name:"padding-relative-to",type:P.paddingRelativeTo,triggersBounds:F.any},{name:"bounds-expansion",type:P.boundsExpansion,triggersBounds:F.any}],Gt=[{name:"border-color",type:P.color},{name:"border-opacity",type:P.zeroOneNumber},{name:"border-width",type:P.size,triggersBounds:F.any},{name:"border-style",type:P.borderStyle}],xt=[{name:"background-image",type:P.urls},{name:"background-image-crossorigin",type:P.bgCrossOrigin},{name:"background-image-opacity",type:P.zeroOneNumbers},{name:"background-image-containment",type:P.bgContainment},{name:"background-image-smoothing",type:P.bools},{name:"background-position-x",type:P.bgPos},{name:"background-position-y",type:P.bgPos},{name:"background-width-relative-to",type:P.bgRelativeTo},{name:"background-height-relative-to",type:P.bgRelativeTo},{name:"background-repeat",type:P.bgRepeat},{name:"background-fit",type:P.bgFit},{name:"background-clip",type:P.bgClip},{name:"background-width",type:P.bgWH},{name:"background-height",type:P.bgWH},{name:"background-offset-x",type:P.bgPos},{name:"background-offset-y",type:P.bgPos}],Wt=[{name:"position",type:P.position,triggersBounds:F.any},{name:"compound-sizing-wrt-labels",type:P.compoundIncludeLabels,triggersBounds:F.any},{name:"min-width",type:P.size,triggersBounds:F.any},{name:"min-width-bias-left",type:P.sizeMaybePercent,triggersBounds:F.any},{name:"min-width-bias-right",type:P.sizeMaybePercent,triggersBounds:F.any},{name:"min-height",type:P.size,triggersBounds:F.any},{name:"min-height-bias-top",type:P.sizeMaybePercent,triggersBounds:F.any},{name:"min-height-bias-bottom",type:P.sizeMaybePercent,triggersBounds:F.any}],Dt=[{name:"line-style",type:P.lineStyle},{name:"line-color",type:P.color},{name:"line-fill",type:P.fill},{name:"line-cap",type:P.lineCap},{name:"line-opacity",type:P.zeroOneNumber},{name:"line-dash-pattern",type:P.numbers},{name:"line-dash-offset",type:P.number},{name:"line-gradient-stop-colors",type:P.colors},{name:"line-gradient-stop-positions",type:P.percentages},{name:"curve-style",type:P.curveStyle,triggersBounds:F.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:P.zeroOneNumber,triggersBounds:F.any},{name:"source-endpoint",type:P.edgeEndpoint,triggersBounds:F.any},{name:"target-endpoint",type:P.edgeEndpoint,triggersBounds:F.any},{name:"control-point-step-size",type:P.size,triggersBounds:F.any},{name:"control-point-distances",type:P.bidirectionalSizes,triggersBounds:F.any},{name:"control-point-weights",type:P.numbers,triggersBounds:F.any},{name:"segment-distances",type:P.bidirectionalSizes,triggersBounds:F.any},{name:"segment-weights",type:P.numbers,triggersBounds:F.any},{name:"taxi-turn",type:P.bidirectionalSizeMaybePercent,triggersBounds:F.any},{name:"taxi-turn-min-distance",type:P.size,triggersBounds:F.any},{name:"taxi-direction",type:P.axisDirection,triggersBounds:F.any},{name:"edge-distances",type:P.edgeDistances,triggersBounds:F.any},{name:"arrow-scale",type:P.positiveNumber,triggersBounds:F.any},{name:"loop-direction",type:P.angle,triggersBounds:F.any},{name:"loop-sweep",type:P.angle,triggersBounds:F.any},{name:"source-distance-from-node",type:P.size,triggersBounds:F.any},{name:"target-distance-from-node",type:P.size,triggersBounds:F.any}],Kt=[{name:"ghost",type:P.bool,triggersBounds:F.any},{name:"ghost-offset-x",type:P.bidirectionalSize,triggersBounds:F.any},{name:"ghost-offset-y",type:P.bidirectionalSize,triggersBounds:F.any},{name:"ghost-opacity",type:P.zeroOneNumber}],Yt=[{name:"selection-box-color",type:P.color},{name:"selection-box-opacity",type:P.zeroOneNumber},{name:"selection-box-border-color",type:P.color},{name:"selection-box-border-width",type:P.size},{name:"active-bg-color",type:P.color},{name:"active-bg-opacity",type:P.zeroOneNumber},{name:"active-bg-size",type:P.size},{name:"outside-texture-bg-color",type:P.color},{name:"outside-texture-bg-opacity",type:P.zeroOneNumber}],lt=[];Qo.pieBackgroundN=16,lt.push({name:"pie-size",type:P.sizeMaybePercent});for(var Zt=1;Zt<=Qo.pieBackgroundN;Zt++)lt.push({name:"pie-"+Zt+"-background-color",type:P.color}),lt.push({name:"pie-"+Zt+"-background-size",type:P.percent}),lt.push({name:"pie-"+Zt+"-background-opacity",type:P.zeroOneNumber});var Vt=[],Ln=Qo.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:P.arrowShape,triggersBounds:F.any},{name:"arrow-color",type:P.color},{name:"arrow-fill",type:P.arrowFill}].forEach(function(Gn){Ln.forEach(function(_i){Vt.push({name:_i+"-"+Gn.name,type:Gn.type,triggersBounds:Gn.triggersBounds})})},{});var sn=Qo.properties=[].concat(Ee,tt,Be,Ue,st,Kt,ve,ge,$,Z,he,Ut,Gt,xt,lt,Wt,Dt,Vt,Yt),bn=Qo.propertyGroups={behavior:Ee,transition:tt,visibility:Be,overlay:Ue,underlay:st,ghost:Kt,commonLabel:ve,labelDimensions:ge,mainLabel:$,sourceLabel:Z,targetLabel:he,nodeBody:Ut,nodeBorder:Gt,backgroundImage:xt,pie:lt,compound:Wt,edgeLine:Dt,edgeArrow:Vt,core:Yt},zn=Qo.propertyGroupNames={};(Qo.propertyGroupKeys=Object.keys(bn)).forEach(function(Gn){zn[Gn]=bn[Gn].map(function(_i){return _i.name}),bn[Gn].forEach(function(_i){return _i.groupKey=Gn})});var pi=Qo.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Qo.propertyNames=sn.map(function(Gn){return Gn.name});for(var Vn=0;Vn<sn.length;Vn++){var ci=sn[Vn];sn[ci.name]=ci}for(var Ai=0;Ai<pi.length;Ai++){var Oi=pi[Ai],Si={name:Oi.name,alias:!0,pointsTo:sn[Oi.pointsTo]};sn.push(Si),sn[Oi.name]=Si}})(),Qo.getDefaultProperty=function(f){return this.getDefaultProperties()[f]},Qo.getDefaultProperties=function(){var f=this._private;if(null!=f.defaultProperties)return f.defaultProperties;for(var c=Zi({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(F,P){for(var $=1;$<=Qo.pieBackgroundN;$++)F[P.name.replace("{{i}}",$)]=P.value;return F},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(F,P){return Qo.arrowPrefixes.forEach(function($){F[$+"-"+P.name]=P.value}),F},{})),h={},m=0;m<this.properties.length;m++){var _=this.properties[m];if(!_.pointsTo){var C=_.name,E=this.parse(C,c[C]);h[C]=E}}return f.defaultProperties=h,f.defaultProperties},Qo.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Nm={parse:function(f,c,h,m){var _=this;if(yt(c))return _.parseImplWarn(f,c,h,m);var $,F=xo(f,""+c,h?"t":"f","mapping"===m||!0===m||!1===m||null==m?"dontcare":m),P=_.propCache=_.propCache||[];return($=P[F])||($=P[F]=_.parseImplWarn(f,c,h,m)),(h||"mapping"===m)&&($=Qe($))&&($.value=Qe($.value)),$},parseImplWarn:function(f,c,h,m){var _=this.parseImpl(f,c,h,m);return!_&&null!=c&&pe("The style property `".concat(f,": ").concat(c,"` is invalid")),_&&("width"===_.name||"height"===_.name)&&"label"===c&&pe("The style value of `label` is deprecated for `"+_.name+"`"),_}};Nm.parseImpl=function(f,c,h,m){var _=this;f=ht(f);var C=_.properties[f],A=c,E=_.types;if(!C||void 0===c)return null;C.alias&&(f=(C=C.pointsTo).name);var F=Ge(c);F&&(c=c.trim());var $,Z,P=C.type;if(!P)return null;if(h&&(""===c||null===c))return{name:f,value:c,bypass:!0,deleteBypass:!0};if(yt(c))return{name:f,value:c,strValue:"fn",mapped:E.fn,bypass:h};if(!(!F||m||c.length<7||"a"!==c[1])){if(c.length>=7&&"d"===c[0]&&($=new RegExp(E.data.regex).exec(c)))return!h&&{name:f,value:$,strValue:""+c,mapped:E.data,field:$[1],bypass:h};if(c.length>=10&&"m"===c[0]&&(Z=new RegExp(E.mapData.regex).exec(c))){if(h||P.multiple)return!1;var ge=E.mapData;if(!P.color&&!P.number)return!1;var ve=this.parse(f,Z[4]);if(!ve||ve.mapped)return!1;var Ee=this.parse(f,Z[5]);if(!Ee||Ee.mapped)return!1;if(ve.pfValue===Ee.pfValue||ve.strValue===Ee.strValue)return pe("`"+f+": "+c+"` is not a valid mapper because the output range is zero; converting to `"+f+": "+ve.strValue+"`"),this.parse(f,ve.strValue);if(P.color){var Be=ve.value,Ue=Ee.value;if(!(Be[0]!==Ue[0]||Be[1]!==Ue[1]||Be[2]!==Ue[2]||Be[3]!==Ue[3]&&(null!=Be[3]&&1!==Be[3]||null!=Ue[3]&&1!==Ue[3])))return!1}return{name:f,value:Z,strValue:""+c,mapped:ge,field:Z[1],fieldMin:parseFloat(Z[2]),fieldMax:parseFloat(Z[3]),valueMin:ve.value,valueMax:Ee.value,bypass:h}}}if(P.multiple&&"multiple"!==m){var tt;if(tt=F?c.split(/\s+/):mt(c)?c:[c],P.evenMultiple&&tt.length%2!=0)return null;for(var wt=[],Ut=[],Gt=[],xt="",Wt=!1,Dt=0;Dt<tt.length;Dt++){var Kt=_.parse(f,tt[Dt],h,"multiple");Wt=Wt||Ge(Kt.value),wt.push(Kt.value),Gt.push(null!=Kt.pfValue?Kt.pfValue:Kt.value),Ut.push(Kt.units),xt+=(Dt>0?" ":"")+Kt.strValue}return P.validate&&!P.validate(wt,Ut)?null:P.singleEnum&&Wt?1===wt.length&&Ge(wt[0])?{name:f,value:wt[0],strValue:wt[0],bypass:h}:null:{name:f,value:wt,pfValue:Gt,strValue:xt,bypass:h,units:Ut}}var Yt=function(){for(var Ni=0;Ni<P.enums.length;Ni++)if(P.enums[Ni]===c)return{name:f,value:c,strValue:""+c,bypass:h};return null};if(P.number){var lt,Zt="px";if(P.units&&(lt=P.units),P.implicitUnits&&(Zt=P.implicitUnits),!P.unitless)if(F){var Vt="px|em"+(P.allowPercent?"|\\%":"");lt&&(Vt=lt);var Ln=c.match("^("+Me+")("+Vt+")?$");Ln&&(c=Ln[1],lt=Ln[2]||Zt)}else(!lt||P.implicitUnits)&&(lt=Zt);if(c=parseFloat(c),isNaN(c)&&void 0===P.enums)return null;if(isNaN(c)&&void 0!==P.enums)return c=A,Yt();if(P.integer&&!function(c){return Ot(c)&&Math.floor(c)===c}(c)||void 0!==P.min&&(c<P.min||P.strictMin&&c===P.min)||void 0!==P.max&&(c>P.max||P.strictMax&&c===P.max))return null;var sn={name:f,value:c,strValue:""+c+(lt||""),units:lt,bypass:h};return sn.pfValue=P.unitless||"px"!==lt&&"em"!==lt?c:"px"!==lt&&lt?this.getEmSizeInPixels()*c:c,("ms"===lt||"s"===lt)&&(sn.pfValue="ms"===lt?c:1e3*c),("deg"===lt||"rad"===lt)&&(sn.pfValue="rad"===lt?c:function(c){return Math.PI*c/180}(c)),"%"===lt&&(sn.pfValue=c/100),sn}if(P.propList){var bn=[],zn=""+c;if("none"!==zn){for(var jn=zn.split(/\s*,\s*|\s+/),pi=0;pi<jn.length;pi++){var Vn=jn[pi].trim();_.properties[Vn]?bn.push(Vn):pe("`"+Vn+"` is not a valid property name")}if(0===bn.length)return null}return{name:f,value:bn,strValue:0===bn.length?"none":bn.join(" "),bypass:h}}if(P.color){var ci=function(c){return(mt(c)?c:null)||function(c){return kc[c.toLowerCase()]}(c)||function(c){if((4===c.length||7===c.length)&&"#"===c[0]){var m,_,C,A=16;return 4===c.length?(m=parseInt(c[1]+c[1],A),_=parseInt(c[2]+c[2],A),C=parseInt(c[3]+c[3],A)):(m=parseInt(c[1]+c[2],A),_=parseInt(c[3]+c[4],A),C=parseInt(c[5]+c[6],A)),[m,_,C]}}(c)||function(c){var h,m=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(m){h=[];for(var _=[],C=1;C<=3;C++){var A=m[C];if("%"===A[A.length-1]&&(_[C]=!0),A=parseFloat(A),_[C]&&(A=A/100*255),A<0||A>255)return;h.push(Math.floor(A))}if((_[1]||_[2]||_[3])&&!(_[1]&&_[2]&&_[3]))return;var P=m[4];if(void 0!==P){if((P=parseFloat(P))<0||P>1)return;h.push(P)}}return h}(c)||function(c){var h,m,_,C,A,E,F,P;function $(ve,Ee,Be){return Be<0&&(Be+=1),Be>1&&(Be-=1),Be<1/6?ve+6*(Ee-ve)*Be:Be<.5?Ee:Be<2/3?ve+(Ee-ve)*(2/3-Be)*6:ve}var Z=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(Z){if((m=parseInt(Z[1]))<0?m=(360- -1*m%360)%360:m>360&&(m%=360),m/=360,(_=parseFloat(Z[2]))<0||_>100||(_/=100,(C=parseFloat(Z[3]))<0||C>100)||(C/=100,void 0!==(A=Z[4])&&((A=parseFloat(A))<0||A>1)))return;if(0===_)E=F=P=Math.round(255*C);else{var he=C<.5?C*(1+_):C+_-C*_,ge=2*C-he;E=Math.round(255*$(ge,he,m+1/3)),F=Math.round(255*$(ge,he,m)),P=Math.round(255*$(ge,he,m-1/3))}h=[E,F,P,A]}return h}(c)}(c);return ci?{name:f,value:ci,pfValue:ci,strValue:"rgb("+ci[0]+","+ci[1]+","+ci[2]+")",bypass:h}:null}if(P.regex||P.regexes){if(P.enums){var Ai=Yt();if(Ai)return Ai}for(var Oi=P.regexes?P.regexes:[P.regex],Mi=0;Mi<Oi.length;Mi++){var Gn=new RegExp(Oi[Mi]).exec(c);if(Gn)return{name:f,value:P.singleRegexMatchValue?Gn[1]:Gn,strValue:""+c,bypass:h}}return null}return P.string?{name:f,value:""+c,strValue:""+c,bypass:h}:P.enums?Yt():null};var Ic=function f(c){if(!(this instanceof f))return new f(c);wn(c)?(this._private={cy:c,coreStyle:{}},this.length=0,this.resetToDefault()):dt("A style must have a core reference")},dc=Ic.prototype;dc.instanceString=function(){return"style"},dc.clear=function(){for(var f=this._private,h=f.cy.elements(),m=0;m<this.length;m++)this[m]=void 0;return this.length=0,f.contextStyles={},f.propDiffs={},this.cleanElements(h,!0),h.forEach(function(_){var C=_[0]._private;C.styleDirty=!0,C.appliedInitStyle=!1}),this},dc.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},dc.core=function(f){return this._private.coreStyle[f]||this.getDefaultProperty(f)},dc.selector=function(f){var c="core"===f?null:new fp(f),h=this.length++;return this[h]={selector:c,properties:[],mappedProperties:[],index:h},this},dc.css=function(){var f=this,c=arguments;if(1===c.length)for(var h=c[0],m=0;m<f.properties.length;m++){var _=f.properties[m],C=h[_.name];void 0===C&&(C=h[Ht(_.name)]),void 0!==C&&this.cssRule(_.name,C)}else 2===c.length&&this.cssRule(c[0],c[1]);return this},dc.style=dc.css,dc.cssRule=function(f,c){var h=this.parse(f,c);if(h){var m=this.length-1;this[m].properties.push(h),this[m].properties[h.name]=h,h.name.match(/pie-(\d+)-background-size/)&&h.value&&(this._private.hasPie=!0),h.mapped&&this[m].mappedProperties.push(h),!this[m].selector&&(this._private.coreStyle[h.name]=h)}return this},dc.append=function(f){return An(f)?f.appendToStyle(this):mt(f)?this.appendFromJson(f):Ge(f)&&this.appendFromString(f),this},Ic.fromJson=function(f,c){var h=new Ic(f);return h.fromJson(c),h},Ic.fromString=function(f,c){return new Ic(f).fromString(c)},[al,zc,Ov,Hu,Jl,Vc,Qo,Nm].forEach(function(f){Zi(dc,f)}),Ic.types=dc.types,Ic.properties=dc.properties,Ic.propertyGroups=dc.propertyGroups,Ic.propertyGroupNames=dc.propertyGroupNames,Ic.propertyGroupKeys=dc.propertyGroupKeys;var Qg={style:function(c){return c&&this.setStyle(c).update(),this._private.style},setStyle:function(c){var h=this._private;return h.style=An(c)?c.generateStyle(this):mt(c)?Ic.fromJson(this,c):Ge(c)?Ic.fromString(this,c):Ic(this),h.style},updateStyle:function(){this.mutableElements().updateStyle()}},sh={autolock:function(c){return void 0===c?this._private.autolock:(this._private.autolock=!!c,this)},autoungrabify:function(c){return void 0===c?this._private.autoungrabify:(this._private.autoungrabify=!!c,this)},autounselectify:function(c){return void 0===c?this._private.autounselectify:(this._private.autounselectify=!!c,this)},selectionType:function(c){var h=this._private;return null==h.selectionType&&(h.selectionType="single"),void 0===c?h.selectionType:(("additive"===c||"single"===c)&&(h.selectionType=c),this)},panningEnabled:function(c){return void 0===c?this._private.panningEnabled:(this._private.panningEnabled=!!c,this)},userPanningEnabled:function(c){return void 0===c?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!c,this)},zoomingEnabled:function(c){return void 0===c?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!c,this)},userZoomingEnabled:function(c){return void 0===c?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!c,this)},boxSelectionEnabled:function(c){return void 0===c?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!c,this)},pan:function(){var m,_,C,A,E,c=arguments,h=this._private.pan;switch(c.length){case 0:return h;case 1:if(Ge(c[0]))return h[m=c[0]];if(_t(c[0])){if(!this._private.panningEnabled)return this;E=(C=c[0]).y,Ot(A=C.x)&&(h.x=A),Ot(E)&&(h.y=E),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;_=c[1],("x"===(m=c[0])||"y"===m)&&Ot(_)&&(h[m]=_),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(c,h){var C,A,E,F,P,m=arguments,_=this._private.pan;if(!this._private.panningEnabled)return this;switch(m.length){case 1:_t(c)&&(P=(E=m[0]).y,Ot(F=E.x)&&(_.x+=F),Ot(P)&&(_.y+=P),this.emit("pan viewport"));break;case 2:A=h,("x"===(C=c)||"y"===C)&&Ot(A)&&(_[C]+=A),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(c,h){var m=this.getFitViewport(c,h);if(m){var _=this._private;_.zoom=m.zoom,_.pan=m.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(c,h){var m;if((Ot(c)&&void 0===h&&(h=c,c=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(Ge(c)?c=this.$(c):!function(c){return _t(c)&&Ot(c.x1)&&Ot(c.x2)&&Ot(c.y1)&&Ot(c.y2)}(c)?Ze(c)||(c=this.mutableElements()):((m={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2}).w=m.x2-m.x1,m.h=m.y2-m.y1),!Ze(c)||!c.empty())){m=m||c.boundingBox();var F,A=this.width(),E=this.height();if(h=Ot(h)?h:0,!isNaN(A)&&!isNaN(E)&&A>0&&E>0&&!isNaN(m.w)&&!isNaN(m.h)&&m.w>0&&m.h>0)return{zoom:F=(F=(F=Math.min((A-2*h)/m.w,(E-2*h)/m.h))>this._private.maxZoom?this._private.maxZoom:F)<this._private.minZoom?this._private.minZoom:F,pan:{x:(A-F*(m.x1+m.x2))/2,y:(E-F*(m.y1+m.y2))/2}}}},zoomRange:function(c,h){var m=this._private;if(null==h){var _=c;c=_.min,h=_.max}return Ot(c)&&Ot(h)&&c<=h?(m.minZoom=c,m.maxZoom=h):Ot(c)&&void 0===h&&c<=m.maxZoom?m.minZoom=c:Ot(h)&&void 0===c&&h>=m.minZoom&&(m.maxZoom=h),this},minZoom:function(c){return void 0===c?this._private.minZoom:this.zoomRange({min:c})},maxZoom:function(c){return void 0===c?this._private.maxZoom:this.zoomRange({max:c})},getZoomedViewport:function(c){var C,A,h=this._private,m=h.pan,_=h.zoom,E=!1;return h.zoomingEnabled||(E=!0),Ot(c)?A=c:_t(c)&&(A=c.level,null!=c.position?C=ba(c.position,_,m):null!=c.renderedPosition&&(C=c.renderedPosition),null!=C&&!h.panningEnabled&&(E=!0)),A=(A=A>h.maxZoom?h.maxZoom:A)<h.minZoom?h.minZoom:A,!E&&Ot(A)&&A!==_&&(null==C||Ot(C.x)&&Ot(C.y))?null!=C?{zoomed:!0,panned:!0,zoom:A,pan:{x:-A/_*(C.x-m.x)+C.x,y:-A/_*(C.y-m.y)+C.y}}:{zoomed:!0,panned:!1,zoom:A,pan:m}:null},zoom:function(c){if(void 0===c)return this._private.zoom;var h=this.getZoomedViewport(c),m=this._private;return null!=h&&h.zoomed?(m.zoom=h.zoom,h.panned&&(m.pan.x=h.pan.x,m.pan.y=h.pan.y),this.emit("zoom"+(h.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(c){var h=this._private,m=!0,_=!0,C=[],A=!1,E=!1;if(!c)return this;if(Ot(c.zoom)||(m=!1),_t(c.pan)||(_=!1),!m&&!_)return this;if(m){var F=c.zoom;F<h.minZoom||F>h.maxZoom||!h.zoomingEnabled?A=!0:(h.zoom=F,C.push("zoom"))}if(_&&(!A||!c.cancelOnFailedZoom)&&h.panningEnabled){var P=c.pan;Ot(P.x)&&(h.pan.x=P.x,E=!1),Ot(P.y)&&(h.pan.y=P.y,E=!1),E||C.push("pan")}return C.length>0&&(C.push("viewport"),this.emit(C.join(" ")),this.notify("viewport")),this},center:function(c){var h=this.getCenterPan(c);return h&&(this._private.pan=h,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(c,h){if(this._private.panningEnabled){if(Ge(c)){var m=c;c=this.mutableElements().filter(m)}else Ze(c)||(c=this.mutableElements());if(0!==c.length){var _=c.boundingBox(),C=this.width(),A=this.height();return{x:(C-(h=void 0===h?this._private.zoom:h)*(_.x1+_.x2))/2,y:(A-h*(_.y1+_.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var m,_,c=this._private,h=c.container;return c.sizeCache=c.sizeCache||(h?(m=fe.getComputedStyle(h),{width:h.clientWidth-(_=function(A){return parseFloat(m.getPropertyValue(A))})("padding-left")-_("padding-right"),height:h.clientHeight-_("padding-top")-_("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var c=this._private.pan,h=this._private.zoom,m=this.renderedExtent(),_={x1:(m.x1-c.x)/h,x2:(m.x2-c.x)/h,y1:(m.y1-c.y)/h,y2:(m.y2-c.y)/h};return _.w=_.x2-_.x1,_.h=_.y2-_.y1,_},renderedExtent:function(){var c=this.width(),h=this.height();return{x1:0,y1:0,x2:c,y2:h,w:c,h}},multiClickDebounceTime:function(c){return c?(this._private.multiClickDebounceTime=c,this):this._private.multiClickDebounceTime}};sh.centre=sh.center,sh.autolockNodes=sh.autolock,sh.autoungrabifyNodes=sh.autoungrabify;var So={data:Us.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Us.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Us.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Us.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};So.attr=So.data,So.removeAttr=So.removeData;var Uc=function(c){var h=this,m=(c=Zi({},c)).container;m&&!nn(m)&&nn(m[0])&&(m=m[0]);var _=m?m._cyreg:null;(_=_||{})&&_.cy&&(_.cy.destroy(),_={});var C=_.readies=_.readies||[];m&&(m._cyreg=_),_.cy=h;var A=void 0!==fe&&void 0!==m&&!c.headless,E=c;E.layout=Zi({name:A?"grid":"null"},E.layout),E.renderer=Zi({name:A?"canvas":"null"},E.renderer);var F=function(ve,Ee,Be){return void 0!==Ee?Ee:void 0!==Be?Be:ve},P=this._private={container:m,ready:!1,options:E,elements:new ka(this),listeners:[],aniEles:new ka(this),data:E.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:F(!0,E.zoomingEnabled),userZoomingEnabled:F(!0,E.userZoomingEnabled),panningEnabled:F(!0,E.panningEnabled),userPanningEnabled:F(!0,E.userPanningEnabled),boxSelectionEnabled:F(!0,E.boxSelectionEnabled),autolock:F(!1,E.autolock,E.autolockNodes),autoungrabify:F(!1,E.autoungrabify,E.autoungrabifyNodes),autounselectify:F(!1,E.autounselectify),styleEnabled:void 0===E.styleEnabled?A:E.styleEnabled,zoom:Ot(E.zoom)?E.zoom:1,pan:{x:_t(E.pan)&&Ot(E.pan.x)?E.pan.x:0,y:_t(E.pan)&&Ot(E.pan.y)?E.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:F(250,E.multiClickDebounceTime)};this.createEmitter(),this.selectionType(E.selectionType),this.zoomRange({min:E.minZoom,max:E.maxZoom}),P.styleEnabled&&h.setStyle([]);var Z=Zi({},E,E.renderer);h.initRenderer(Z),function(ve,Ee){if(ve.some(Sn))return Da.all(ve).then(Ee);Ee(ve)}([E.style,E.elements],function(ge){var ve=ge[0],Ee=ge[1];P.styleEnabled&&h.style().append(ve),function(ve,Ee,Be){h.notifications(!1);var Ue=h.mutableElements();Ue.length>0&&Ue.remove(),null!=ve&&(_t(ve)||mt(ve))&&h.add(ve),h.one("layoutready",function(tt){h.notifications(!0),h.emit(tt),h.one("load",Ee),h.emitAndNotify("load")}).one("layoutstop",function(){h.one("done",Be),h.emit("done")});var st=Zi({},h._private.options.layout);st.eles=h.elements(),h.layout(st).run()}(Ee,function(){h.startAnimationLoop(),P.ready=!0,yt(E.ready)&&h.on("ready",E.ready);for(var Be=0;Be<C.length;Be++)h.on("ready",C[Be]);_&&(_.readies=[]),h.emit("ready")},E.done)})},Od=Uc.prototype;Zi(Od,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(c){return this.isReady()?this.emitter().emit("ready",[],c):this.on("ready",c),this},destroy:function(){var c=this;if(!c.destroyed())return c.stopAnimationLoop(),c.destroyRenderer(),this.emit("destroy"),c._private.destroyed=!0,c},hasElementWithId:function(c){return this._private.elements.hasElementWithId(c)},getElementById:function(c){return this._private.elements.getElementById(c)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(c){return this._private.elements.merge(c),this},removeFromPool:function(c){return this._private.elements.unmerge(c),this},container:function(){return this._private.container||null},mount:function(c){if(null!=c){var h=this,m=h._private,_=m.options;return!nn(c)&&nn(c[0])&&(c=c[0]),h.stopAnimationLoop(),h.destroyRenderer(),m.container=c,m.styleEnabled=!0,h.invalidateSize(),h.initRenderer(Zi({},_,_.renderer,{name:"null"===_.renderer.name?"canvas":_.renderer.name})),h.startAnimationLoop(),h.style(_.style),h.emit("mount"),h}},unmount:function(){var c=this;return c.stopAnimationLoop(),c.destroyRenderer(),c.initRenderer({name:"null"}),c.emit("unmount"),c},options:function(){return Qe(this._private.options)},json:function(c){var h=this,m=h._private,_=h.mutableElements();if(_t(c)){if(h.startBatch(),c.elements){var A={},E=function(wt,Ut){for(var Gt=[],xt=[],Wt=0;Wt<wt.length;Wt++){var Dt=wt[Wt];if(Dt.data.id){var Kt=""+Dt.data.id,Yt=h.getElementById(Kt);A[Kt]=!0,0!==Yt.length?xt.push({ele:Yt,json:Dt}):(Ut&&(Dt.group=Ut),Gt.push(Dt))}else pe("cy.json() cannot handle elements without an ID attribute")}h.add(Gt);for(var lt=0;lt<xt.length;lt++){var Zt=xt[lt];Zt.ele.json(Zt.json)}};if(mt(c.elements))E(c.elements);else for(var F=["nodes","edges"],P=0;P<F.length;P++){var $=F[P],Z=c.elements[$];mt(Z)&&E(Z,$)}var he=h.collection();_.filter(function(tt){return!A[tt.id()]}).forEach(function(tt){tt.isParent()?he.merge(tt):tt.remove()}),he.forEach(function(tt){return tt.children().move({parent:null})}),he.forEach(function(tt){return(wt=tt,h.getElementById(wt.id())).remove();var wt})}c.style&&h.style(c.style),null!=c.zoom&&c.zoom!==m.zoom&&h.zoom(c.zoom),c.pan&&(c.pan.x!==m.pan.x||c.pan.y!==m.pan.y)&&h.pan(c.pan),c.data&&h.data(c.data);for(var ge=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],ve=0;ve<ge.length;ve++){var Ee=ge[ve];null!=c[Ee]&&h[Ee](c[Ee])}return h.endBatch(),this}var Ue={};c?Ue.elements=this.elements().map(function(tt){return tt.json()}):(Ue.elements={},_.forEach(function(tt){var wt=tt.group();Ue.elements[wt]||(Ue.elements[wt]=[]),Ue.elements[wt].push(tt.json())})),this._private.styleEnabled&&(Ue.style=h.style().json()),Ue.data=Qe(h.data());var st=m.options;return Ue.zoomingEnabled=m.zoomingEnabled,Ue.userZoomingEnabled=m.userZoomingEnabled,Ue.zoom=m.zoom,Ue.minZoom=m.minZoom,Ue.maxZoom=m.maxZoom,Ue.panningEnabled=m.panningEnabled,Ue.userPanningEnabled=m.userPanningEnabled,Ue.pan=Qe(m.pan),Ue.boxSelectionEnabled=m.boxSelectionEnabled,Ue.renderer=Qe(st.renderer),Ue.hideEdgesOnViewport=st.hideEdgesOnViewport,Ue.textureOnViewport=st.textureOnViewport,Ue.wheelSensitivity=st.wheelSensitivity,Ue.motionBlur=st.motionBlur,Ue.multiClickDebounceTime=st.multiClickDebounceTime,Ue}}),Od.$id=Od.getElementById,[so,ol,ld,cf,vl,Uu,ud,Ql,Qg,sh,So].forEach(function(f){Zi(Od,f)});var bp={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}},oh=function(c){return c.scratch("breadthfirst")},Gu=function(c,h){return c.scratch("breadthfirst",h)};function zf(f){this.options=Zi({},bp,f)}zf.prototype.run=function(){var P,f=this.options,c=f,h=f.cy,m=c.eles,_=m.nodes().filter(function(Mr){return!Mr.isParent()}),C=m,A=c.directed,E=c.maximal||c.maximalAdjustments>0,F=Jc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:h.width(),h:h.height()});if(Ze(c.roots))P=c.roots;else if(mt(c.roots)){for(var $=[],Z=0;Z<c.roots.length;Z++){var ge=h.getElementById(c.roots[Z]);$.push(ge)}P=h.collection($)}else if(Ge(c.roots))P=h.$(c.roots);else if(A)P=_.roots();else{var ve=m.components();P=h.collection();for(var Ee=function(br){var gs=ve[br],Wi=gs.maxDegree(!1),kr=gs.filter(function(Fr){return Fr.degree(!1)===Wi});P=P.add(kr)},Be=0;Be<ve.length;Be++)Ee(Be)}var Ue=[],st={},tt=function(br,gs){null==Ue[gs]&&(Ue[gs]=[]);var Wi=Ue[gs].length;Ue[gs].push(br),Gu(br,{index:Wi,depth:gs})};C.bfs({roots:P,directed:c.directed,visit:function(br,gs,Wi,kr,Fr){var bs=br[0],oo=bs.id();tt(bs,Fr),st[oo]=!0}});for(var Ut=[],Gt=0;Gt<_.length;Gt++){var xt=_[Gt];st[xt.id()]||Ut.push(xt)}var Wt=function(br){for(var gs=Ue[br],Wi=0;Wi<gs.length;Wi++){var kr=gs[Wi];null!=kr?Gu(kr,{depth:br,index:Wi}):(gs.splice(Wi,1),Wi--)}},Dt=function(){for(var br=0;br<Ue.length;br++)Wt(br)},Kt=function(br,gs){for(var Wi=oh(br),kr=br.incomers().filter(function(Nt){return Nt.isNode()&&m.has(Nt)}),Fr=-1,bs=br.id(),oo=0;oo<kr.length;oo++){var ir=oh(kr[oo]);Fr=Math.max(Fr,ir.depth)}return Wi.depth<=Fr&&(gs[bs]?null:(function(br,gs){var Wi=oh(br);Ue[Wi.depth][Wi.index]=null,tt(br,gs)}(br,Fr+1),gs[bs]=!0,!0))};if(A&&E){var Yt=[],lt={},Zt=function(br){return Yt.push(br)};for(_.forEach(function(Mr){return Yt.push(Mr)});Yt.length>0;){var Ln=Yt.shift(),sn=Kt(Ln,lt);if(sn)Ln.outgoers().filter(function(Mr){return Mr.isNode()&&m.has(Mr)}).forEach(Zt);else if(null===sn){pe("Detected double maximal shift for node `"+Ln.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}Dt();var bn=0;if(c.avoidOverlap)for(var zn=0;zn<_.length;zn++){var pi=_[zn].layoutDimensions(c);bn=Math.max(bn,pi.w,pi.h)}var Ai={},Oi=function(br){if(Ai[br.id()])return Ai[br.id()];for(var gs=oh(br).depth,Wi=br.neighborhood(),kr=0,Fr=0,bs=0;bs<Wi.length;bs++){var oo=Wi[bs];if(!oo.isEdge()&&!oo.isParent()&&_.has(oo)){var Cs=oh(oo);if(null!=Cs){var ir=Cs.index,Nt=Cs.depth;null!=ir&&null!=Nt&&Nt<gs&&(kr+=ir/Ue[Nt].length,Fr++)}}}return kr/=Fr=Math.max(1,Fr),0===Fr&&(kr=0),Ai[br.id()]=kr,kr},Mi=function(br,gs){var Fr=Oi(br)-Oi(gs);return 0===Fr?os(br.id(),gs.id()):Fr};void 0!==c.depthSort&&(Mi=c.depthSort);for(var Si=0;Si<Ue.length;Si++)Ue[Si].sort(Mi),Wt(Si);for(var Gn=[],_i=0;_i<Ut.length;_i++)Gn.push(Ut[_i]);Ue.unshift(Gn),Dt();for(var Ni=0,lr=0;lr<Ue.length;lr++)Ni=Math.max(Ue[lr].length,Ni);var wr_x=F.x1+F.w/2,wr_y=F.x1+F.h/2,as=Ue.reduce(function(Mr,br){return Math.max(Mr,br.length)},0);return m.nodes().layoutPositions(this,c,function(br){var gs=oh(br),Wi=gs.depth,kr=gs.index,Fr=Ue[Wi].length,bs=Math.max(F.w/((c.grid?as:Fr)+1),bn),oo=Math.max(F.h/(Ue.length+1),bn),Cs=Math.min(F.w/2/Ue.length,F.h/2/Ue.length);if(Cs=Math.max(Cs,bn),c.circle){var Nt=Cs*Wi+Cs-(Ue.length>0&&Ue[0].length<=3?Cs/2:0),li=2*Math.PI/Ue[Wi].length*kr;return 0===Wi&&1===Ue[0].length&&(Nt=1),{x:wr_x+Nt*Math.cos(li),y:wr_y+Nt*Math.sin(li)}}return{x:wr_x+(kr+1-(Fr+1)/2)*bs,y:(Wi+1)*oo}}),this};var Vf={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function Jg(f){this.options=Zi({},Vf,f)}Jg.prototype.run=function(){var f=this.options,c=f,h=f.cy,m=c.eles,_=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,C=m.nodes().not(":parent");c.sort&&(C=C.sort(c.sort));for(var $,A=Jc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:h.width(),h:h.height()}),E={x:A.x1+A.w/2,y:A.y1+A.h/2},P=(void 0===c.sweep?2*Math.PI-2*Math.PI/C.length:c.sweep)/Math.max(1,C.length-1),Z=0,he=0;he<C.length;he++){var ve=C[he].layoutDimensions(c);Z=Math.max(Z,ve.w,ve.h)}if($=Ot(c.radius)?c.radius:C.length<=1?0:Math.min(A.h,A.w)/2-Z,C.length>1&&c.avoidOverlap){Z*=1.75;var Ue=Math.cos(P)-Math.cos(0),st=Math.sin(P)-Math.sin(0),tt=Math.sqrt(Z*Z/(Ue*Ue+st*st));$=Math.max(tt,$)}return m.nodes().layoutPositions(this,c,function(Gt,xt){var Wt=c.startAngle+xt*P*(_?1:-1),Dt=$*Math.cos(Wt),Kt=$*Math.sin(Wt);return{x:E.x+Dt,y:E.y+Kt}}),this};var Hc={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(c){return c.degree()},levelWidth:function(c){return c.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function ec(f){this.options=Zi({},Hc,f)}ec.prototype.run=function(){for(var f=this.options,c=f,h=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,m=f.cy,_=c.eles,C=_.nodes().not(":parent"),A=Jc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:m.width(),h:m.height()}),E={x:A.x1+A.w/2,y:A.y1+A.h/2},F=[],P=0,$=0;$<C.length;$++){var he,Z=C[$];he=c.concentric(Z),F.push({value:he,node:Z}),Z._private.scratch.concentric=he}C.updateStyle();for(var ge=0;ge<C.length;ge++){var Ee=C[ge].layoutDimensions(c);P=Math.max(P,Ee.w,Ee.h)}F.sort(function(Mr,br){return br.value-Mr.value});for(var Be=c.levelWidth(C),Ue=[[]],st=Ue[0],tt=0;tt<F.length;tt++){var wt=F[tt];st.length>0&&Math.abs(st[0].value-wt.value)>=Be&&Ue.push(st=[]),st.push(wt)}var Gt=P+c.minNodeSpacing;if(!c.avoidOverlap){var xt=Ue.length>0&&Ue[0].length>1,Wt=Math.min(A.w,A.h)/2-Gt;Gt=Math.min(Gt,Wt/(Ue.length+xt?1:0))}for(var Kt=0,Yt=0;Yt<Ue.length;Yt++){var lt=Ue[Yt],Zt=void 0===c.sweep?2*Math.PI-2*Math.PI/lt.length:c.sweep,Vt=lt.dTheta=Zt/Math.max(1,lt.length-1);if(lt.length>1&&c.avoidOverlap){var Ln=Math.cos(Vt)-Math.cos(0),sn=Math.sin(Vt)-Math.sin(0),bn=Math.sqrt(Gt*Gt/(Ln*Ln+sn*sn));Kt=Math.max(bn,Kt)}lt.r=Kt,Kt+=Gt}if(c.equidistant){for(var zn=0,jn=0,pi=0;pi<Ue.length;pi++)zn=Math.max(zn,Ue[pi].r-jn);jn=0;for(var Ai=0;Ai<Ue.length;Ai++){var Oi=Ue[Ai];0===Ai&&(jn=Oi.r),Oi.r=jn,jn+=zn}}for(var Mi={},Si=0;Si<Ue.length;Si++)for(var Gn=Ue[Si],_i=Gn.dTheta,Ni=Gn.r,lr=0;lr<Gn.length;lr++){var wr=Gn[lr],as=c.startAngle+(h?1:-1)*_i*lr,_s={x:E.x+Ni*Math.cos(as),y:E.y+Ni*Math.sin(as)};Mi[wr.node.id()]=_s}return _.nodes().layoutPositions(this,c,function(Mr){var br=Mr.id();return Mi[br]}),this};var ah,uf={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(c,h){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(c){return 2048},nodeOverlap:4,idealEdgeLength:function(c){return 32},edgeElasticity:function(c){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function dd(f){this.options=Zi({},uf,f),this.options.layout=this}dd.prototype.run=function(){var f=this.options,c=f.cy,h=this;h.stopped=!1,(!0===f.animate||!1===f.animate)&&h.emit({type:"layoutstart",layout:h}),ah=!0===f.debug;var m=Sh(c,h,f);ah&&(void 0)(m),f.randomize&&df(m);var _=gn(),C=function(){zm(m,c,f),!0===f.fit&&c.fit(f.padding)},A=function(he){return!(h.stopped||he>=f.numIter||(em(m,f),m.temperature=m.temperature*f.coolingFactor,m.temperature<f.minTemp))},E=function(){if(!0===f.animate||!1===f.animate)C(),h.one("layoutstop",f.stop),h.emit({type:"layoutstop",layout:h});else{var he=f.eles.nodes(),ge=Wu(m,f,he);he.layoutPositions(h,f,ge)}},F=0,P=!0;if(!0===f.animate)!function Z(){for(var he=0;P&&he<f.refresh;)P=A(F),F++,he++;P?(gn()-_>=f.animationThreshold&&C(),fn(Z)):(Eh(m,f),E())}();else{for(;P;)P=A(F),F++;Eh(m,f),E()}return this},dd.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},dd.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Sh=function(c,h,m){for(var _=m.eles.edges(),C=m.eles.nodes(),A={isCompound:c.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:C.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:_.size(),temperature:m.initialTemp,clientWidth:c.width(),clientHeight:c.width(),boundingBox:Jc(m.boundingBox?m.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()})},E=m.eles.components(),F={},P=0;P<E.length;P++)for(var $=E[P],Z=0;Z<$.length;Z++)F[$[Z].id()]=P;for(P=0;P<A.nodeSize;P++){var ve=(ge=C[P]).layoutDimensions(m);(Ee={}).isLocked=ge.locked(),Ee.id=ge.data("id"),Ee.parentId=ge.data("parent"),Ee.cmptId=F[ge.id()],Ee.children=[],Ee.positionX=ge.position("x"),Ee.positionY=ge.position("y"),Ee.offsetX=0,Ee.offsetY=0,Ee.height=ve.w,Ee.width=ve.h,Ee.maxX=Ee.positionX+Ee.width/2,Ee.minX=Ee.positionX-Ee.width/2,Ee.maxY=Ee.positionY+Ee.height/2,Ee.minY=Ee.positionY-Ee.height/2,Ee.padLeft=parseFloat(ge.style("padding")),Ee.padRight=parseFloat(ge.style("padding")),Ee.padTop=parseFloat(ge.style("padding")),Ee.padBottom=parseFloat(ge.style("padding")),Ee.nodeRepulsion=yt(m.nodeRepulsion)?m.nodeRepulsion(ge):m.nodeRepulsion,A.layoutNodes.push(Ee),A.idToIndex[Ee.id]=P}var Be=[],Ue=0,st=-1,tt=[];for(P=0;P<A.nodeSize;P++){var ge,wt=(ge=A.layoutNodes[P]).parentId;null!=wt?A.layoutNodes[A.idToIndex[wt]].children.push(ge.id):(Be[++st]=ge.id,tt.push(ge.id))}for(A.graphSet.push(tt);Ue<=st;){var Ut=Be[Ue++],xt=A.layoutNodes[A.idToIndex[Ut]].children;if(xt.length>0)for(A.graphSet.push(xt),P=0;P<xt.length;P++)Be[++st]=xt[P]}for(P=0;P<A.graphSet.length;P++){var Wt=A.graphSet[P];for(Z=0;Z<Wt.length;Z++)A.indexToGraph[A.idToIndex[Wt[Z]]]=P}for(P=0;P<A.edgeSize;P++){var Kt=_[P],Yt={};Yt.id=Kt.data("id"),Yt.sourceId=Kt.data("source"),Yt.targetId=Kt.data("target");var lt=yt(m.idealEdgeLength)?m.idealEdgeLength(Kt):m.idealEdgeLength,Zt=yt(m.edgeElasticity)?m.edgeElasticity(Kt):m.edgeElasticity,Vt=A.idToIndex[Yt.sourceId],Ln=A.idToIndex[Yt.targetId];if(A.indexToGraph[Vt]!=A.indexToGraph[Ln]){for(var zn=ai(Yt.sourceId,Yt.targetId,A),jn=A.graphSet[zn],pi=0,Ee=A.layoutNodes[Vt];-1===jn.indexOf(Ee.id);)Ee=A.layoutNodes[A.idToIndex[Ee.parentId]],pi++;for(Ee=A.layoutNodes[Ln];-1===jn.indexOf(Ee.id);)Ee=A.layoutNodes[A.idToIndex[Ee.parentId]],pi++;lt*=pi*m.nestingFactor}Yt.idealLength=lt,Yt.elasticity=Zt,A.layoutEdges.push(Yt)}return A},ai=function(c,h,m){var _=Uf(c,h,0,m);return 2>_.count?0:_.graph},Uf=function f(c,h,m,_){var C=_.graphSet[m];if(-1<C.indexOf(c)&&-1<C.indexOf(h))return{count:2,graph:m};for(var A=0,E=0;E<C.length;E++){var $=_.layoutNodes[_.idToIndex[C[E]]].children;if(0!==$.length){var he=f(c,h,_.indexToGraph[_.idToIndex[$[0]]],_);if(0!==he.count){if(1!==he.count)return he;if(2==++A)break}}}return{count:A,graph:m}},df=function(c,h){for(var m=c.clientWidth,_=c.clientHeight,C=0;C<c.nodeSize;C++){var A=c.layoutNodes[C];0===A.children.length&&!A.isLocked&&(A.positionX=Math.random()*m,A.positionY=Math.random()*_)}},Wu=function(c,h,m){var _=c.boundingBox,C={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return h.boundingBox&&(m.forEach(function(A){var E=c.layoutNodes[c.idToIndex[A.data("id")]];C.x1=Math.min(C.x1,E.positionX),C.x2=Math.max(C.x2,E.positionX),C.y1=Math.min(C.y1,E.positionY),C.y2=Math.max(C.y2,E.positionY)}),C.w=C.x2-C.x1,C.h=C.y2-C.y1),function(A,E){var F=c.layoutNodes[c.idToIndex[A.data("id")]];return h.boundingBox?{x:_.x1+(F.positionX-C.x1)/C.w*_.w,y:_.y1+(F.positionY-C.y1)/C.h*_.h}:{x:F.positionX,y:F.positionY}}},zm=function(c,h,m){var _=m.layout,C=m.eles.nodes(),A=Wu(c,m,C);C.positions(A),!0!==c.ready&&(c.ready=!0,_.one("layoutready",m.ready),_.emit({type:"layoutready",layout:this}))},em=function(c,h,m){Cp(c,h),Eu(c),nm(c,h),wp(c),hc(c)},Cp=function(c,h){for(var m=0;m<c.graphSet.length;m++)for(var _=c.graphSet[m],C=_.length,A=0;A<C;A++)for(var E=c.layoutNodes[c.idToIndex[_[A]]],F=A+1;F<C;F++)tc(E,c.layoutNodes[c.idToIndex[_[F]]],c,h)},hd=function(c){return-c+2*c*Math.random()},tc=function(c,h,m,_){if(c.cmptId===h.cmptId||m.isCompound){var E=h.positionX-c.positionX,F=h.positionY-c.positionY;0===E&&0===F&&(E=hd(1),F=hd(1));var $=tm(c,h,E,F);if($>0)var ge=(Z=_.nodeOverlap*$)*E/(he=Math.sqrt(E*E+F*F)),ve=Z*F/he;else{var Z,Ee=Fd(c,E,F),Be=Fd(h,-1*E,-1*F),Ue=Be.x-Ee.x,st=Be.y-Ee.y,tt=Ue*Ue+st*st,he=Math.sqrt(tt);ge=(Z=(c.nodeRepulsion+h.nodeRepulsion)/tt)*Ue/he,ve=Z*st/he}c.isLocked||(c.offsetX-=ge,c.offsetY-=ve),h.isLocked||(h.offsetX+=ge,h.offsetY+=ve)}},tm=function(c,h,m,_){if(m>0)var C=c.maxX-h.minX;else C=h.maxX-c.minX;if(_>0)var A=c.maxY-h.minY;else A=h.maxY-c.minY;return C>=0&&A>=0?Math.sqrt(C*C+A*A):0},Fd=function(c,h,m){var _=c.positionX,C=c.positionY,A=c.height||1,E=c.width||1,F=m/h,P=A/E,$={};return 0===h&&0<m||0===h&&0>m?($.x=_,$.y=C+A/2,$):0<h&&-1*P<=F&&F<=P?($.x=_+E/2,$.y=C+E*m/2/h,$):0>h&&-1*P<=F&&F<=P?($.x=_-E/2,$.y=C-E*m/2/h,$):0<m&&(F<=-1*P||F>=P)?($.x=_+A*h/2/m,$.y=C+A/2,$):(0>m&&(F<=-1*P||F>=P)&&($.x=_-A*h/2/m,$.y=C-A/2),$)},Eu=function(c,h){for(var m=0;m<c.edgeSize;m++){var _=c.layoutEdges[m],A=c.layoutNodes[c.idToIndex[_.sourceId]],F=c.layoutNodes[c.idToIndex[_.targetId]],P=F.positionX-A.positionX,$=F.positionY-A.positionY;if(0!==P||0!==$){var Z=Fd(A,P,$),he=Fd(F,-1*P,-1*$),ge=he.x-Z.x,ve=he.y-Z.y,Ee=Math.sqrt(ge*ge+ve*ve),Be=Math.pow(_.idealLength-Ee,2)/_.elasticity;if(0!==Ee)var Ue=Be*ge/Ee,st=Be*ve/Ee;else Ue=0,st=0;A.isLocked||(A.offsetX+=Ue,A.offsetY+=st),F.isLocked||(F.offsetX-=Ue,F.offsetY-=st)}}},nm=function(c,h){if(0!==h.gravity)for(var _=0;_<c.graphSet.length;_++){var C=c.graphSet[_],A=C.length;if(0===_)var E=c.clientHeight/2,F=c.clientWidth/2;else{var $=c.layoutNodes[c.idToIndex[c.layoutNodes[c.idToIndex[C[0]]].parentId]];E=$.positionX,F=$.positionY}for(var Z=0;Z<A;Z++){var he=c.layoutNodes[c.idToIndex[C[Z]]];if(!he.isLocked){var ge=E-he.positionX,ve=F-he.positionY,Ee=Math.sqrt(ge*ge+ve*ve);if(Ee>1){var Ue=h.gravity*ve/Ee;he.offsetX+=h.gravity*ge/Ee,he.offsetY+=Ue}}}}},wp=function(c,h){var m=[],_=0,C=-1;for(m.push.apply(m,c.graphSet[0]),C+=c.graphSet[0].length;_<=C;){var A=m[_++],F=c.layoutNodes[c.idToIndex[A]],P=F.children;if(0<P.length&&!F.isLocked){for(var $=F.offsetX,Z=F.offsetY,he=0;he<P.length;he++){var ge=c.layoutNodes[c.idToIndex[P[he]]];ge.offsetX+=$,ge.offsetY+=Z,m[++C]=P[he]}F.offsetX=0,F.offsetY=0}}},hc=function(c,h){for(var m=0;m<c.nodeSize;m++)0<(_=c.layoutNodes[m]).children.length&&(_.maxX=void 0,_.minX=void 0,_.maxY=void 0,_.minY=void 0);for(m=0;m<c.nodeSize;m++)if(!(0<(_=c.layoutNodes[m]).children.length||_.isLocked)){var C=Nd(_.offsetX,_.offsetY,c.temperature);_.positionX+=C.x,_.positionY+=C.y,_.offsetX=0,_.offsetY=0,_.minX=_.positionX-_.width,_.maxX=_.positionX+_.width,_.minY=_.positionY-_.height,_.maxY=_.positionY+_.height,im(_,c)}for(m=0;m<c.nodeSize;m++){var _;0<(_=c.layoutNodes[m]).children.length&&!_.isLocked&&(_.positionX=(_.maxX+_.minX)/2,_.positionY=(_.maxY+_.minY)/2,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY)}},Nd=function(c,h,m){var _=Math.sqrt(c*c+h*h);if(_>m)var C={x:m*c/_,y:m*h/_};else C={x:c,y:h};return C},im=function f(c,h){var m=c.parentId;if(null!=m){var _=h.layoutNodes[h.idToIndex[m]],C=!1;if((null==_.maxX||c.maxX+_.padRight>_.maxX)&&(_.maxX=c.maxX+_.padRight,C=!0),(null==_.minX||c.minX-_.padLeft<_.minX)&&(_.minX=c.minX-_.padLeft,C=!0),(null==_.maxY||c.maxY+_.padBottom>_.maxY)&&(_.maxY=c.maxY+_.padBottom,C=!0),(null==_.minY||c.minY-_.padTop<_.minY)&&(_.minY=c.minY-_.padTop,C=!0),C)return f(_,h)}},Eh=function(c,h){for(var m=c.layoutNodes,_=[],C=0;C<m.length;C++){var A=m[C],E=A.cmptId;(_[E]=_[E]||[]).push(A)}var P=0;for(C=0;C<_.length;C++)if($=_[C]){$.x1=1/0,$.x2=-1/0,$.y1=1/0,$.y2=-1/0;for(var Z=0;Z<$.length;Z++){var he=$[Z];$.x1=Math.min($.x1,he.positionX-he.width/2),$.x2=Math.max($.x2,he.positionX+he.width/2),$.y1=Math.min($.y1,he.positionY-he.height/2),$.y2=Math.max($.y2,he.positionY+he.height/2)}$.w=$.x2-$.x1,$.h=$.y2-$.y1,P+=$.w*$.h}_.sort(function(st,tt){return tt.w*tt.h-st.w*st.h});var ge=0,ve=0,Ee=0,Be=0,Ue=Math.sqrt(P)*c.clientWidth/c.clientHeight;for(C=0;C<_.length;C++){var $;if($=_[C]){for(Z=0;Z<$.length;Z++)(he=$[Z]).isLocked||(he.positionX+=ge-$.x1,he.positionY+=ve-$.y1);ge+=$.w+h.componentSpacing,Ee+=$.w+h.componentSpacing,Be=Math.max(Be,$.h),Ee>Ue&&(ve+=Be+h.componentSpacing,ge=0,Ee=0,Be=0)}}},Sc={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(c){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function ju(f){this.options=Zi({},Sc,f)}ju.prototype.run=function(){var f=this.options,c=f,h=f.cy,m=c.eles,_=m.nodes().not(":parent");c.sort&&(_=_.sort(c.sort));var C=Jc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:h.width(),h:h.height()});if(0===C.h||0===C.w)m.nodes().layoutPositions(this,c,function(Ai){return{x:C.x1,y:C.y1}});else{var A=_.size(),E=Math.sqrt(A*C.h/C.w),F=Math.round(E),P=Math.round(C.w/C.h*E),$=function(Oi){if(null==Oi)return Math.min(F,P);Math.min(F,P)==F?F=Oi:P=Oi},Z=function(Oi){if(null==Oi)return Math.max(F,P);Math.max(F,P)==F?F=Oi:P=Oi},he=c.rows,ge=null!=c.cols?c.cols:c.columns;if(null!=he&&null!=ge)F=he,P=ge;else if(null!=he&&null==ge)F=he,P=Math.ceil(A/F);else if(null==he&&null!=ge)P=ge,F=Math.ceil(A/P);else if(P*F>A){var ve=$(),Ee=Z();(ve-1)*Ee>=A?$(ve-1):(Ee-1)*ve>=A&&Z(Ee-1)}else for(;P*F<A;){var Be=$(),Ue=Z();(Ue+1)*Be>=A?Z(Ue+1):$(Be+1)}var st=C.w/P,tt=C.h/F;if(c.condense&&(st=0,tt=0),c.avoidOverlap)for(var wt=0;wt<_.length;wt++){var Ut=_[wt],Gt=Ut._private.position;(null==Gt.x||null==Gt.y)&&(Gt.x=0,Gt.y=0);var xt=Ut.layoutDimensions(c),Wt=c.avoidOverlapPadding,Kt=xt.h+Wt;st=Math.max(st,xt.w+Wt),tt=Math.max(tt,Kt)}for(var Yt={},lt=function(Oi,Mi){return!!Yt["c-"+Oi+"-"+Mi]},Zt=function(Oi,Mi){Yt["c-"+Oi+"-"+Mi]=!0},Vt=0,Ln=0,sn=function(){++Ln>=P&&(Ln=0,Vt++)},bn={},zn=0;zn<_.length;zn++){var jn=_[zn],pi=c.position(jn);if(pi&&(void 0!==pi.row||void 0!==pi.col)){var Vn={row:pi.row,col:pi.col};if(void 0===Vn.col)for(Vn.col=0;lt(Vn.row,Vn.col);)Vn.col++;else if(void 0===Vn.row)for(Vn.row=0;lt(Vn.row,Vn.col);)Vn.row++;bn[jn.id()]=Vn,Zt(Vn.row,Vn.col)}}_.layoutPositions(this,c,function(Oi,Mi){var Si,Gn;if(Oi.locked()||Oi.isParent())return!1;var _i=bn[Oi.id()];if(_i)Si=_i.col*st+st/2+C.x1,Gn=_i.row*tt+tt/2+C.y1;else{for(;lt(Vt,Ln);)sn();Si=Ln*st+st/2+C.x1,Gn=Vt*tt+tt/2+C.y1,Zt(Vt,Ln),sn()}return{x:Si,y:Gn}})}return this};var hf={ready:function(){},stop:function(){}};function Th(f){this.options=Zi({},hf,f)}Th.prototype.run=function(){var f=this.options,c=f.eles,h=this;return h.emit("layoutstart"),c.nodes().positions(function(){return{x:0,y:0}}),h.one("layoutready",f.ready),h.emit("layoutready"),h.one("layoutstop",f.stop),h.emit("layoutstop"),this},Th.prototype.stop=function(){return this};var Ap={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function fd(f){this.options=Zi({},Ap,f)}fd.prototype.run=function(){var f=this.options,h=f.eles.nodes(),m=yt(f.positions);return h.layoutPositions(this,f,function(C,A){var E=function _(C){return null==f.positions?function(c){return{x:c.x,y:c.y}}(C.position()):m?f.positions(C):f.positions[C._private.data.id]??null}(C);return!C.locked()&&null!=E&&E}),this};var Ds={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,h){return!0},ready:void 0,stop:void 0,transform:function(c,h){return h}};function xp(f){this.options=Zi({},Ds,f)}xp.prototype.run=function(){var f=this.options,c=f.cy,h=f.eles,m=Jc(f.boundingBox?f.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});return h.nodes().layoutPositions(this,f,function(A,E){return{x:m.x1+Math.round(Math.random()*m.w),y:m.y1+Math.round(Math.random()*m.h)}}),this};var rm=[{name:"breadthfirst",impl:zf},{name:"circle",impl:Jg},{name:"concentric",impl:ec},{name:"cose",impl:dd},{name:"grid",impl:ju},{name:"null",impl:Th},{name:"preset",impl:fd},{name:"random",impl:xp}];function ff(f){this.options=f,this.notifications=0}var Hf=function(){},Ip=function(){throw new Error("A headless instance can not render images")};ff.prototype={recalculateRenderedStyle:Hf,notify:function(){this.notifications++},init:Hf,isHeadless:function(){return!0},png:Ip,jpg:Ip};var ag={arrowShapeWidth:.3,registerArrowShapes:function(){var f=this.arrowShapes={},c=this,h=function(P,$,Z,he,ge,ve,Ee){return ge.x-Z/2-Ee<=P&&P<=ge.x+Z/2+Ee&&ge.y-Z/2-Ee<=$&&$<=ge.y+Z/2+Ee},m=function(P,$,Z,he,ge){var ve=P*Math.cos(he)-$*Math.sin(he),Ee=P*Math.sin(he)+$*Math.cos(he);return{x:ve*Z+ge.x,y:Ee*Z+ge.y}},_=function(P,$,Z,he){for(var ge=[],ve=0;ve<P.length;ve+=2)ge.push(m(P[ve],P[ve+1],$,Z,he));return ge},C=function(P){for(var $=[],Z=0;Z<P.length;Z++){var he=P[Z];$.push(he.x,he.y)}return $},A=function(P){return P.pstyle("width").pfValue*P.pstyle("arrow-scale").pfValue*2},E=function(P,$){Ge($)&&($=f[$]),f[P]=Zi({name:P,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(he,ge,ve,Ee,Be,Ue){var st=C(_(this.points,ve+2*Ue,Ee,Be));return nl(he,ge,st)},roughCollide:h,draw:function(he,ge,ve,Ee){var Be=_(this.points,ge,ve,Ee);c.arrowShapeImpl("polygon")(he,Be)},spacing:function(he){return 0},gap:A},$)};E("none",{collide:zl,roughCollide:zl,draw:je,spacing:Fc,gap:Fc}),E("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),E("arrow","triangle"),E("triangle-backcurve",{points:f.triangle.points,controlPoint:[0,-.15],roughCollide:h,draw:function(P,$,Z,he,ge){var ve=_(this.points,$,Z,he),Ee=this.controlPoint,Be=m(Ee[0],Ee[1],$,Z,he);c.arrowShapeImpl(this.name)(P,ve,Be)},gap:function(P){return.8*A(P)}}),E("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(P,$,Z,he,ge,ve,Ee){var Be=C(_(this.points,Z+2*Ee,he,ge)),Ue=C(_(this.pointsTee,Z+2*Ee,he,ge));return nl(P,$,Be)||nl(P,$,Ue)},draw:function(P,$,Z,he,ge){var ve=_(this.points,$,Z,he),Ee=_(this.pointsTee,$,Z,he);c.arrowShapeImpl(this.name)(P,ve,Ee)}}),E("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(P,$,Z,he,ge,ve,Ee){var Be=ge,Ue=Math.pow(Be.x-P,2)+Math.pow(Be.y-$,2)<=Math.pow((Z+2*Ee)*this.radius,2),st=C(_(this.points,Z+2*Ee,he,ge));return nl(P,$,st)||Ue},draw:function(P,$,Z,he,ge){var ve=_(this.pointsTr,$,Z,he);c.arrowShapeImpl(this.name)(P,ve,he.x,he.y,this.radius*$)},spacing:function(P){return c.getArrowWidth(P.pstyle("width").pfValue,P.pstyle("arrow-scale").value)*this.radius}}),E("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(P,$){var Z=this.baseCrossLinePts.slice(),he=$/P;return Z[3]=Z[3]-he,Z[5]=Z[5]-he,Z},collide:function(P,$,Z,he,ge,ve,Ee){var Be=C(_(this.points,Z+2*Ee,he,ge)),Ue=C(_(this.crossLinePts(Z,ve),Z+2*Ee,he,ge));return nl(P,$,Be)||nl(P,$,Ue)},draw:function(P,$,Z,he,ge){var ve=_(this.points,$,Z,he),Ee=_(this.crossLinePts($,ge),$,Z,he);c.arrowShapeImpl(this.name)(P,ve,Ee)}}),E("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(P){return.525*A(P)}}),E("circle",{radius:.15,collide:function(P,$,Z,he,ge,ve,Ee){var Be=ge;return Math.pow(Be.x-P,2)+Math.pow(Be.y-$,2)<=Math.pow((Z+2*Ee)*this.radius,2)},draw:function(P,$,Z,he,ge){c.arrowShapeImpl(this.name)(P,he.x,he.y,this.radius*$)},spacing:function(P){return c.getArrowWidth(P.pstyle("width").pfValue,P.pstyle("arrow-scale").value)*this.radius}}),E("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(P){return 1},gap:function(P){return 1}}),E("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),E("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(P){return P.pstyle("width").pfValue*P.pstyle("arrow-scale").value}}),E("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(P){return.95*P.pstyle("width").pfValue*P.pstyle("arrow-scale").value}})}},ll={projectIntoViewport:function(f,c){var h=this.cy,m=this.findContainerClientCoords(),_=m[0],C=m[1],A=m[4],E=h.pan(),F=h.zoom();return[((f-_)/A-E.x)/F,((c-C)/A-E.y)/F]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var f=this.container,c=f.getBoundingClientRect(),h=fe.getComputedStyle(f),m=function(Ue){return parseFloat(h.getPropertyValue(Ue))},__left=m("padding-left"),__right=m("padding-right"),__top=m("padding-top"),__bottom=m("padding-bottom"),C_left=m("border-left-width"),C_right=m("border-right-width"),C_top=m("border-top-width"),A=(m("border-bottom-width"),f.clientWidth);return this.containerBB=[c.left+__left+C_left,c.top+__top+C_top,A-(__left+__right),f.clientHeight-(__top+__bottom),c.width/(A+(C_left+C_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(f,c,h,m){return this.findNearestElements(f,c,h,m)[0]},findNearestElements:function(f,c,h,m){var ve,Ee,_=this,C=this,A=C.getCachedZSortedEles(),E=[],F=C.cy.zoom(),P=C.cy.hasCompoundNodes(),$=(m?24:8)/F,Z=(m?8:2)/F,he=(m?8:2)/F,ge=1/0;function Be(xt,Wt){if(xt.isNode()){if(Ee)return;Ee=xt,E.push(xt)}if(xt.isEdge()&&(null==Wt||Wt<ge))if(ve){if(ve.pstyle("z-compound-depth").value===xt.pstyle("z-compound-depth").value&&ve.pstyle("z-compound-depth").value===xt.pstyle("z-compound-depth").value)for(var Dt=0;Dt<E.length;Dt++)if(E[Dt].isEdge()){E[Dt]=xt,ve=xt,ge=Wt??ge;break}}else E.push(xt),ve=xt,ge=Wt??ge}function Ue(xt){var Wt=xt.outerWidth()+2*Z,Dt=xt.outerHeight()+2*Z,Kt=Wt/2,Yt=Dt/2,lt=xt.position();if(lt.x-Kt<=f&&f<=lt.x+Kt&&lt.y-Yt<=c&&c<=lt.y+Yt&&C.nodeShapes[_.getNodeShape(xt)].checkPoint(f,c,0,Wt,Dt,lt.x,lt.y))return Be(xt,0),!0}function st(xt){var Ln,Wt=xt._private,Dt=Wt.rscratch,Kt=xt.pstyle("width").pfValue,Yt=xt.pstyle("arrow-scale").value,lt=Kt/2+$,Zt=lt*lt,Vt=2*lt,zn=Wt.source,jn=Wt.target;if("segments"===Dt.edgeType||"straight"===Dt.edgeType||"haystack"===Dt.edgeType){for(var sn=Dt.allpts,bn=0;bn+3<sn.length;bn+=2)if(yc(f,c,sn[bn],sn[bn+1],sn[bn+2],sn[bn+3],Vt)&&Zt>(Ln=qd(f,c,sn[bn],sn[bn+1],sn[bn+2],sn[bn+3])))return Be(xt,Ln),!0}else if("bezier"===Dt.edgeType||"multibezier"===Dt.edgeType||"self"===Dt.edgeType||"compound"===Dt.edgeType)for(sn=Dt.allpts,bn=0;bn+5<Dt.allpts.length;bn+=4)if(z_(f,c,sn[bn],sn[bn+1],sn[bn+2],sn[bn+3],sn[bn+4],sn[bn+5],Vt)&&Zt>(Ln=Ly(f,c,sn[bn],sn[bn+1],sn[bn+2],sn[bn+3],sn[bn+4],sn[bn+5])))return Be(xt,Ln),!0;zn=zn||Wt.source,jn=jn||Wt.target;var pi=_.getArrowWidth(Kt,Yt),Vn=[{name:"source",x:Dt.arrowStartX,y:Dt.arrowStartY,angle:Dt.srcArrowAngle},{name:"target",x:Dt.arrowEndX,y:Dt.arrowEndY,angle:Dt.tgtArrowAngle},{name:"mid-source",x:Dt.midX,y:Dt.midY,angle:Dt.midsrcArrowAngle},{name:"mid-target",x:Dt.midX,y:Dt.midY,angle:Dt.midtgtArrowAngle}];for(bn=0;bn<Vn.length;bn++){var ci=Vn[bn],Ai=C.arrowShapes[xt.pstyle(ci.name+"-arrow-shape").value],Oi=xt.pstyle("width").pfValue;if(Ai.roughCollide(f,c,pi,ci.angle,{x:ci.x,y:ci.y},Oi,$)&&Ai.collide(f,c,pi,ci.angle,{x:ci.x,y:ci.y},Oi,$))return Be(xt),!0}P&&E.length>0&&(Ue(zn),Ue(jn))}function tt(xt,Wt,Dt){return gr(xt,Wt,Dt)}function wt(xt,Wt){var Yt,Dt=xt._private,Kt=he;Yt=Wt?Wt+"-":"",xt.boundingBox();var lt=Dt.labelBounds[Wt||"main"],Zt=xt.pstyle(Yt+"label").value;if("yes"===xt.pstyle("text-events").strValue&&Zt){var Ln=tt(Dt.rscratch,"labelX",Wt),sn=tt(Dt.rscratch,"labelY",Wt),bn=tt(Dt.rscratch,"labelAngle",Wt),zn=xt.pstyle(Yt+"text-margin-x").pfValue,jn=xt.pstyle(Yt+"text-margin-y").pfValue,pi=lt.x1-Kt-zn,Vn=lt.x2+Kt-zn,ci=lt.y1-Kt-jn,Ai=lt.y2+Kt-jn;if(bn){var Oi=Math.cos(bn),Mi=Math.sin(bn),Si=function(_s,Mr){return{x:(_s-=Ln)*Oi-(Mr-=sn)*Mi+Ln,y:_s*Mi+Mr*Oi+sn}},Gn=Si(pi,ci),_i=Si(pi,Ai),Ni=Si(Vn,ci),lr=Si(Vn,Ai);if(nl(f,c,[Gn.x+zn,Gn.y+jn,Ni.x+zn,Ni.y+jn,lr.x+zn,lr.y+jn,_i.x+zn,_i.y+jn]))return Be(xt),!0}else if(Es(lt,f,c))return Be(xt),!0}}h&&(A=A.interactive);for(var Ut=A.length-1;Ut>=0;Ut--){var Gt=A[Ut];Gt.isNode()?Ue(Gt)||wt(Gt):st(Gt)||wt(Gt)||wt(Gt,"source")||wt(Gt,"target")}return E},getAllInBox:function(f,c,h,m){for(var _=this.getCachedZSortedEles().interactive,C=[],A=Math.min(f,h),E=Math.max(f,h),F=Math.min(c,m),P=Math.max(c,m),$=Jc({x1:f=A,y1:c=F,x2:h=E,y2:m=P}),Z=0;Z<_.length;Z++){var he=_[Z];if(he.isNode()){var ge=he,ve=ge.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Im($,ve)&&!Cv(ve,$)&&C.push(ge)}else{var Ee=he,Be=Ee._private,Ue=Be.rscratch;if(null!=Ue.startX&&null!=Ue.startY&&!Es($,Ue.startX,Ue.startY)||null!=Ue.endX&&null!=Ue.endY&&!Es($,Ue.endX,Ue.endY))continue;if("bezier"===Ue.edgeType||"multibezier"===Ue.edgeType||"self"===Ue.edgeType||"compound"===Ue.edgeType||"segments"===Ue.edgeType||"haystack"===Ue.edgeType){for(var st=Be.rstyle.bezierPts||Be.rstyle.linePts||Be.rstyle.haystackPts,tt=!0,wt=0;wt<st.length;wt++)if(!bv($,st[wt])){tt=!1;break}tt&&C.push(Ee)}else("haystack"===Ue.edgeType||"straight"===Ue.edgeType)&&C.push(Ee)}}return C}},Vm={calculateArrowAngles:function(f){var F,P,$,Z,he,ge,c=f._private.rscratch,h="haystack"===c.edgeType,m="bezier"===c.edgeType,_="multibezier"===c.edgeType,C="segments"===c.edgeType,A="compound"===c.edgeType,E="self"===c.edgeType;h?($=c.haystackPts[0],Z=c.haystackPts[1],he=c.haystackPts[2],ge=c.haystackPts[3]):($=c.arrowStartX,Z=c.arrowStartY,he=c.arrowEndX,ge=c.arrowEndY),Ue=c.midX,st=c.midY,C?(F=$-c.segpts[0],P=Z-c.segpts[1]):_||A||E||m?(F=$-Nc((ve=c.allpts)[0],ve[2],ve[4],.1),P=Z-Nc(ve[1],ve[3],ve[5],.1)):(F=$-Ue,P=Z-st),c.srcArrowAngle=Og(F,P);var Ue=c.midX,st=c.midY;if(h&&(Ue=($+he)/2,st=(Z+ge)/2),F=he-$,P=ge-Z,C)if((ve=c.allpts).length/2%2==0)F=ve[tt=ve.length/2]-ve[wt=tt-2],P=ve[tt+1]-ve[wt+1];else{var tt,wt,Ut=2+(tt=ve.length/2-1);F=ve[tt]-ve[wt=tt-2],P=ve[tt+1]-ve[wt+1]}else if(_||A||E){var xt,Wt,Dt,Kt,lt,Yt,Zt,ve=c.allpts;c.ctrlpts.length/2%2==0?(xt=Nc(ve[Yt=ve.length/2-1],ve[lt=Yt+2],ve[Zt=lt+2],0),Wt=Nc(ve[Yt+1],ve[lt+1],ve[Zt+1],0),Dt=Nc(ve[Yt],ve[lt],ve[Zt],1e-4),Kt=Nc(ve[Yt+1],ve[lt+1],ve[Zt+1],1e-4)):(xt=Nc(ve[Yt=(lt=ve.length/2-1)-2],ve[lt],ve[Zt=lt+2],.4999),Wt=Nc(ve[Yt+1],ve[lt+1],ve[Zt+1],.4999),Dt=Nc(ve[Yt],ve[lt],ve[Zt],.5),Kt=Nc(ve[Yt+1],ve[lt+1],ve[Zt+1],.5)),F=Dt-xt,P=Kt-Wt}if(c.midtgtArrowAngle=Og(F,P),c.midDispX=F,c.midDispY=P,F*=-1,P*=-1,C&&(ve=c.allpts).length/2%2!=0&&(F=-(ve[Ut=2+(tt=ve.length/2-1)]-ve[tt]),P=-(ve[Ut+1]-ve[tt+1])),c.midsrcArrowAngle=Og(F,P),C)F=he-c.segpts[c.segpts.length-2],P=ge-c.segpts[c.segpts.length-1];else if(_||A||E||m){var Vt=(ve=c.allpts).length;F=he-Nc(ve[Vt-6],ve[Vt-4],ve[Vt-2],.9),P=ge-Nc(ve[Vt-5],ve[Vt-3],ve[Vt-1],.9)}else F=he-Ue,P=ge-st;c.tgtArrowAngle=Og(F,P)}};Vm.getArrowWidth=Vm.getArrowHeight=function(f,c){var h=this.arrowWidthCache=this.arrowWidthCache||{},m=h[f+", "+c];return m||(m=Math.max(Math.pow(13.37*f,.9),29)*c,h[f+", "+c]=m,m)};var fc={};function Um(f){var c=[];if(null!=f){for(var h=0;h<f.length;h+=2)c.push({x:f[h],y:f[h+1]});return c}}fc.findHaystackPoints=function(f){for(var c=0;c<f.length;c++){var h=f[c],m=h._private,_=m.rscratch;if(!_.haystack){var C=2*Math.random()*Math.PI;_.source={x:Math.cos(C),y:Math.sin(C)},C=2*Math.random()*Math.PI,_.target={x:Math.cos(C),y:Math.sin(C)}}var A=m.source,E=m.target,F=A.position(),P=E.position(),$=A.width(),Z=E.width(),he=A.height(),ge=E.height(),Ee=h.pstyle("haystack-radius").value/2;_.haystackPts=_.allpts=[_.source.x*$*Ee+F.x,_.source.y*he*Ee+F.y,_.target.x*Z*Ee+P.x,_.target.y*ge*Ee+P.y],_.midX=(_.allpts[0]+_.allpts[2])/2,_.midY=(_.allpts[1]+_.allpts[3])/2,_.edgeType="haystack",_.haystack=!0,this.storeEdgeProjections(h),this.calculateArrowAngles(h),this.recalculateEdgeLabelProjections(h),this.calculateLabelAngles(h)}},fc.findSegmentsPoints=function(f,c){var h=f._private.rscratch,m=c.posPts,_=c.intersectionPts,C=c.vectorNormInverse,A=f.pstyle("edge-distances").value,E=f.pstyle("segment-weights"),F=f.pstyle("segment-distances"),P=Math.min(E.pfValue.length,F.pfValue.length);h.edgeType="segments",h.segpts=[];for(var $=0;$<P;$++){var Z=E.pfValue[$],he=F.pfValue[$],ge=1-Z,Ee="node-position"===A?m:_,Be={x:Ee.x1*ge+Ee.x2*Z,y:Ee.y1*ge+Ee.y2*Z};h.segpts.push(Be.x+C.x*he,Be.y+C.y*he)}},fc.findLoopPoints=function(f,c,h,m){var _=f._private.rscratch,C=c.dirCounts,A=c.srcPos,E=f.pstyle("control-point-distances"),F=E?E.pfValue[0]:void 0,P=f.pstyle("loop-direction").pfValue,$=f.pstyle("loop-sweep").pfValue,Z=f.pstyle("control-point-step-size").pfValue;_.edgeType="self";var he=h,ge=Z;m&&(he=0,ge=F);var ve=P-Math.PI/2,Ee=ve-$/2,Be=ve+$/2,Ue=String(P+"_"+$);he=void 0===C[Ue]?C[Ue]=0:++C[Ue],_.ctrlpts=[A.x+1.4*Math.cos(Ee)*ge*(he/3+1),A.y+1.4*Math.sin(Ee)*ge*(he/3+1),A.x+1.4*Math.cos(Be)*ge*(he/3+1),A.y+1.4*Math.sin(Be)*ge*(he/3+1)]},fc.findCompoundLoopPoints=function(f,c,h,m){var _=f._private.rscratch;_.edgeType="compound";var C=c.srcPos,A=c.tgtPos,E=c.srcW,F=c.srcH,P=c.tgtW,$=c.tgtH,Z=f.pstyle("control-point-step-size").pfValue,he=f.pstyle("control-point-distances"),ve=h,Ee=Z;m&&(ve=0,Ee=he?he.pfValue[0]:void 0);var Ue={x:C.x-E/2,y:C.y-F/2},st={x:A.x-P/2,y:A.y-$/2},tt={x:Math.min(Ue.x,st.x),y:Math.min(Ue.y,st.y)},Ut=Math.max(.5,Math.log(.01*E)),Gt=Math.max(.5,Math.log(.01*P));_.ctrlpts=[tt.x,tt.y-(1+Math.pow(50,1.12)/100)*Ee*(ve/3+1)*Ut,tt.x-(1+Math.pow(50,1.12)/100)*Ee*(ve/3+1)*Gt,tt.y]},fc.findStraightEdgePoints=function(f){f._private.rscratch.edgeType="straight"},fc.findBezierPoints=function(f,c,h,m,_){var C=f._private.rscratch,A=c.vectorNormInverse,E=c.posPts,F=c.intersectionPts,P=f.pstyle("edge-distances").value,$=f.pstyle("control-point-step-size").pfValue,Z=f.pstyle("control-point-distances"),he=f.pstyle("control-point-weights"),ge=Z&&he?Math.min(Z.value.length,he.value.length):1,ve=Z?Z.pfValue[0]:void 0,Ee=he.value[0],Be=m;C.edgeType=Be?"multibezier":"bezier",C.ctrlpts=[];for(var Ue=0;Ue<ge;Ue++){var tt,st=(.5-c.eles.length/2+h)*$*(_?-1:1),wt=Qc(st);Be&&(ve=Z?Z.pfValue[Ue]:$,Ee=he.value[Ue]);var Ut=void 0!==(tt=m?ve:void 0!==ve?wt*ve:void 0)?tt:st,Gt=1-Ee,Wt="node-position"===P?E:F,Dt={x:Wt.x1*Gt+Wt.x2*Ee,y:Wt.y1*Gt+Wt.y2*Ee};C.ctrlpts.push(Dt.x+A.x*Ut,Dt.y+A.y*Ut)}},fc.findTaxiPoints=function(f,c){var h=f._private.rscratch;h.edgeType="segments";var m="vertical",_="horizontal",C="leftward",A="rightward",E="downward",F="upward",$=c.posPts,Z=c.srcW,he=c.srcH,ge=c.tgtW,ve=c.tgtH,Be="node-position"!==f.pstyle("edge-distances").value,Ue=f.pstyle("taxi-direction").value,st=Ue,tt=f.pstyle("taxi-turn"),wt="%"===tt.units,Ut=tt.pfValue,Gt=Ut<0,xt=f.pstyle("taxi-turn-min-distance").pfValue,Dt=Be?(he+ve)/2:0,Kt=$.x2-$.x1,Yt=$.y2-$.y1,lt=function(Dn,mr){return Dn>0?Math.max(Dn-mr,0):Math.min(Dn+mr,0)},Zt=lt(Kt,Be?(Z+ge)/2:0),Vt=lt(Yt,Dt),Ln=!1;"auto"===st?Ue=Math.abs(Zt)>Math.abs(Vt)?_:m:st===F||st===E?(Ue=m,Ln=!0):(st===C||st===A)&&(Ue=_,Ln=!0);var Vn,sn=Ue===m,bn=sn?Vt:Zt,zn=sn?Yt:Kt,jn=Qc(zn),pi=!1;(!Ln||!wt&&!Gt)&&(st===E&&zn<0||st===F&&zn>0||st===C&&zn>0||st===A&&zn<0)&&(bn=(jn*=-1)*Math.abs(bn),pi=!0);var Oi=function(Dn){return Math.abs(Dn)<xt||Math.abs(Dn)>=Math.abs(bn)},Mi=Oi(Vn=wt?(Ut<0?1+Ut:Ut)*bn:(Ut<0?bn:0)+Ut*jn),Si=Oi(Math.abs(bn)-Math.abs(Vn));if(!Mi&&!Si||pi)if(sn){var Nt=$.y1+Vn+(Be?he/2*jn:0);h.segpts=[$.x1,Nt,$.x2,Nt]}else{var He=$.x1+Vn+(Be?Z/2*jn:0);h.segpts=[He,$.y1,He,$.y2]}else if(sn){var _i=Math.abs(zn)<=he/2,Ni=Math.abs(Kt)<=ge/2;if(_i){var lr=($.x1+$.x2)/2;h.segpts=[lr,$.y1,lr,$.y2]}else if(Ni){var _s=($.y1+$.y2)/2;h.segpts=[$.x1,_s,$.x2,_s]}else h.segpts=[$.x1,$.y2]}else{var gs=Math.abs(zn)<=Z/2,Wi=Math.abs(Yt)<=ve/2;if(gs){var kr=($.y1+$.y2)/2;h.segpts=[$.x1,kr,$.x2,kr]}else if(Wi){var oo=($.x1+$.x2)/2;h.segpts=[oo,$.y1,oo,$.y2]}else h.segpts=[$.x2,$.y1]}},fc.tryToCorrectInvalidPoints=function(f,c){var h=f._private.rscratch;if("bezier"===h.edgeType){var m=c.srcPos,_=c.tgtPos,C=c.srcW,A=c.srcH,E=c.tgtW,F=c.tgtH,P=c.srcShape,$=c.tgtShape,Z=!Ot(h.startX)||!Ot(h.startY),he=!Ot(h.arrowStartX)||!Ot(h.arrowStartY),ge=!Ot(h.endX)||!Ot(h.endY),ve=!Ot(h.arrowEndX)||!Ot(h.arrowEndY),Ue=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,st=Do({x:h.ctrlpts[0],y:h.ctrlpts[1]},{x:h.startX,y:h.startY}),tt=st<Ue,wt=Do({x:h.ctrlpts[0],y:h.ctrlpts[1]},{x:h.endX,y:h.endY}),Ut=wt<Ue,Gt=!1;if(Z||he||tt){Gt=!0;var xt={x:h.ctrlpts[0]-m.x,y:h.ctrlpts[1]-m.y},Wt=Math.sqrt(xt.x*xt.x+xt.y*xt.y),Dt={x:xt.x/Wt,y:xt.y/Wt},Kt=Math.max(C,A),Yt={x:h.ctrlpts[0]+2*Dt.x*Kt,y:h.ctrlpts[1]+2*Dt.y*Kt},lt=P.intersectLine(m.x,m.y,C,A,Yt.x,Yt.y,0);tt?(h.ctrlpts[0]=h.ctrlpts[0]+Dt.x*(Ue-st),h.ctrlpts[1]=h.ctrlpts[1]+Dt.y*(Ue-st)):(h.ctrlpts[0]=lt[0]+Dt.x*Ue,h.ctrlpts[1]=lt[1]+Dt.y*Ue)}if(ge||ve||Ut){Gt=!0;var Zt={x:h.ctrlpts[0]-_.x,y:h.ctrlpts[1]-_.y},Vt=Math.sqrt(Zt.x*Zt.x+Zt.y*Zt.y),Ln={x:Zt.x/Vt,y:Zt.y/Vt},sn=Math.max(C,A),bn={x:h.ctrlpts[0]+2*Ln.x*sn,y:h.ctrlpts[1]+2*Ln.y*sn},zn=$.intersectLine(_.x,_.y,E,F,bn.x,bn.y,0);Ut?(h.ctrlpts[0]=h.ctrlpts[0]+Ln.x*(Ue-wt),h.ctrlpts[1]=h.ctrlpts[1]+Ln.y*(Ue-wt)):(h.ctrlpts[0]=zn[0]+Ln.x*Ue,h.ctrlpts[1]=zn[1]+Ln.y*Ue)}Gt&&this.findEndpoints(f)}},fc.storeAllpts=function(f){var c=f._private.rscratch;if("multibezier"===c.edgeType||"bezier"===c.edgeType||"self"===c.edgeType||"compound"===c.edgeType){c.allpts=[],c.allpts.push(c.startX,c.startY);for(var h=0;h+1<c.ctrlpts.length;h+=2)c.allpts.push(c.ctrlpts[h],c.ctrlpts[h+1]),h+3<c.ctrlpts.length&&c.allpts.push((c.ctrlpts[h]+c.ctrlpts[h+2])/2,(c.ctrlpts[h+1]+c.ctrlpts[h+3])/2);var m;c.allpts.push(c.endX,c.endY),c.ctrlpts.length/2%2==0?(c.midX=c.allpts[m=c.allpts.length/2-1],c.midY=c.allpts[m+1]):(c.midX=Nc(c.allpts[m=c.allpts.length/2-3],c.allpts[m+2],c.allpts[m+4],.5),c.midY=Nc(c.allpts[m+1],c.allpts[m+3],c.allpts[m+5],.5))}else if("straight"===c.edgeType)c.allpts=[c.startX,c.startY,c.endX,c.endY],c.midX=(c.startX+c.endX+c.arrowStartX+c.arrowEndX)/4,c.midY=(c.startY+c.endY+c.arrowStartY+c.arrowEndY)/4;else if("segments"===c.edgeType)if(c.allpts=[],c.allpts.push(c.startX,c.startY),c.allpts.push.apply(c.allpts,c.segpts),c.allpts.push(c.endX,c.endY),c.segpts.length%4==0){var C=c.segpts.length/2,A=C-2;c.midX=(c.segpts[A]+c.segpts[C])/2,c.midY=(c.segpts[A+1]+c.segpts[C+1])/2}else{var E=c.segpts.length/2-1;c.midX=c.segpts[E],c.midY=c.segpts[E+1]}},fc.checkForInvalidEdgeWarning=function(f){var c=f[0]._private.rscratch;c.nodesOverlap||Ot(c.startX)&&Ot(c.startY)&&Ot(c.endX)&&Ot(c.endY)?c.loggedErr=!1:c.loggedErr||(c.loggedErr=!0,pe("Edge `"+f.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},fc.findEdgeControlPoints=function(f){var c=this;if(f&&0!==f.length){for(var h=this,_=h.cy.hasCompoundNodes(),C={map:new Bs,get:function(xt){var Wt=this.map.get(xt[0]);return null!=Wt?Wt.get(xt[1]):null},set:function(xt,Wt){var Dt=this.map.get(xt[0]);null==Dt&&(Dt=new Bs,this.map.set(xt[0],Dt)),Dt.set(xt[1],Wt)}},A=[],E=[],F=0;F<f.length;F++){var P=f[F],$=P._private,Z=P.pstyle("curve-style").value;if(!P.removed()&&P.takesUpSpace()){if("haystack"===Z){E.push(P);continue}var he="unbundled-bezier"===Z||"segments"===Z||"straight"===Z||"straight-triangle"===Z||"taxi"===Z,ge="unbundled-bezier"===Z||"bezier"===Z,Ee=$.target,st=[$.source.poolIndex(),Ee.poolIndex()].sort(),tt=C.get(st);null==tt&&(C.set(st,tt={eles:[]}),A.push(st)),tt.eles.push(P),he&&(tt.hasUnbundled=!0),ge&&(tt.hasBezier=!0)}}for(var wt=function(xt){var Dt=C.get(A[xt]),Kt=void 0;if(!Dt.hasUnbundled){var Yt=Dt.eles[0].parallelEdges().filter(function(ir){return ir.isBundledBezier()});Dr(Dt.eles),Yt.forEach(function(ir){return Dt.eles.push(ir)}),Dt.eles.sort(function(ir,Nt){return ir.poolIndex()-Nt.poolIndex()})}var lt=Dt.eles[0],Zt=lt.source(),Vt=lt.target();if(Zt.poolIndex()>Vt.poolIndex()){var Ln=Zt;Zt=Vt,Vt=Ln}var sn=Dt.srcPos=Zt.position(),bn=Dt.tgtPos=Vt.position(),zn=Dt.srcW=Zt.outerWidth(),jn=Dt.srcH=Zt.outerHeight(),pi=Dt.tgtW=Vt.outerWidth(),Vn=Dt.tgtH=Vt.outerHeight(),ci=Dt.srcShape=h.nodeShapes[c.getNodeShape(Zt)],Ai=Dt.tgtShape=h.nodeShapes[c.getNodeShape(Vt)];Dt.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Oi=0;Oi<Dt.eles.length;Oi++){var Mi=Dt.eles[Oi],Si=Mi[0]._private.rscratch,Gn=Mi.pstyle("curve-style").value,_i="unbundled-bezier"===Gn||"segments"===Gn||"taxi"===Gn,Ni=!Zt.same(Mi.source());if(!Dt.calculatedIntersection&&Zt!==Vt&&(Dt.hasBezier||Dt.hasUnbundled)){Dt.calculatedIntersection=!0;var lr=ci.intersectLine(sn.x,sn.y,zn,jn,bn.x,bn.y,0),wr=Dt.srcIntn=lr,as=Ai.intersectLine(bn.x,bn.y,pi,Vn,sn.x,sn.y,0),_s=Dt.tgtIntn=as,Mr=Dt.intersectionPts={x1:lr[0],x2:as[0],y1:lr[1],y2:as[1]},br=Dt.posPts={x1:sn.x,x2:bn.x,y1:sn.y,y2:bn.y},gs=as[1]-lr[1],Wi=as[0]-lr[0],kr=Math.sqrt(Wi*Wi+gs*gs),Fr=Dt.vector={x:Wi,y:gs},bs=Dt.vectorNorm={x:Fr.x/kr,y:Fr.y/kr},oo={x:-bs.y,y:bs.x};Dt.nodesOverlap=!Ot(kr)||Ai.checkPoint(lr[0],lr[1],0,pi,Vn,bn.x,bn.y)||ci.checkPoint(as[0],as[1],0,zn,jn,sn.x,sn.y),Dt.vectorNormInverse=oo,Kt={nodesOverlap:Dt.nodesOverlap,dirCounts:Dt.dirCounts,calculatedIntersection:!0,hasBezier:Dt.hasBezier,hasUnbundled:Dt.hasUnbundled,eles:Dt.eles,srcPos:bn,tgtPos:sn,srcW:pi,srcH:Vn,tgtW:zn,tgtH:jn,srcIntn:_s,tgtIntn:wr,srcShape:Ai,tgtShape:ci,posPts:{x1:br.x2,y1:br.y2,x2:br.x1,y2:br.y1},intersectionPts:{x1:Mr.x2,y1:Mr.y2,x2:Mr.x1,y2:Mr.y1},vector:{x:-Fr.x,y:-Fr.y},vectorNorm:{x:-bs.x,y:-bs.y},vectorNormInverse:{x:-oo.x,y:-oo.y}}}var Cs=Ni?Kt:Dt;Si.nodesOverlap=Cs.nodesOverlap,Si.srcIntn=Cs.srcIntn,Si.tgtIntn=Cs.tgtIntn,_&&(Zt.isParent()||Zt.isChild()||Vt.isParent()||Vt.isChild())&&(Zt.parents().anySame(Vt)||Vt.parents().anySame(Zt)||Zt.same(Vt)&&Zt.isParent())?c.findCompoundLoopPoints(Mi,Cs,Oi,_i):Zt===Vt?c.findLoopPoints(Mi,Cs,Oi,_i):"segments"===Gn?c.findSegmentsPoints(Mi,Cs):"taxi"===Gn?c.findTaxiPoints(Mi,Cs):"straight"===Gn||!_i&&Dt.eles.length%2==1&&Oi===Math.floor(Dt.eles.length/2)?c.findStraightEdgePoints(Mi):c.findBezierPoints(Mi,Cs,Oi,_i,Ni),c.findEndpoints(Mi),c.tryToCorrectInvalidPoints(Mi,Cs),c.checkForInvalidEdgeWarning(Mi),c.storeAllpts(Mi),c.storeEdgeProjections(Mi),c.calculateArrowAngles(Mi),c.recalculateEdgeLabelProjections(Mi),c.calculateLabelAngles(Mi)}},Ut=0;Ut<A.length;Ut++)wt(Ut);this.findHaystackPoints(E)}},fc.getSegmentPoints=function(f){var c=f[0]._private.rscratch;if("segments"===c.edgeType)return this.recalculateRenderedStyle(f),Um(c.segpts)},fc.getControlPoints=function(f){var c=f[0]._private.rscratch,h=c.edgeType;if("bezier"===h||"multibezier"===h||"self"===h||"compound"===h)return this.recalculateRenderedStyle(f),Um(c.ctrlpts)},fc.getEdgeMidpoint=function(f){var c=f[0]._private.rscratch;return this.recalculateRenderedStyle(f),{x:c.midX,y:c.midY}};var Bd={manualEndptToPx:function(f,c){var m=f.position(),_=f.outerWidth(),C=f.outerHeight();if(2===c.value.length){var A=[c.pfValue[0],c.pfValue[1]];return"%"===c.units[0]&&(A[0]=A[0]*_),"%"===c.units[1]&&(A[1]=A[1]*C),A[0]+=m.x,A[1]+=m.y,A}var E=c.pfValue[0];E=-Math.PI/2+E;var F=2*Math.max(_,C),P=[m.x+Math.cos(E)*F,m.y+Math.sin(E)*F];return this.nodeShapes[this.getNodeShape(f)].intersectLine(m.x,m.y,_,C,P[0],P[1],0)},findEndpoints:function(f){var h,Kt,Yt,lt,Zt,c=this,m=f.source()[0],_=f.target()[0],C=m.position(),A=_.position(),E=f.pstyle("target-arrow-shape").value,F=f.pstyle("source-arrow-shape").value,P=f.pstyle("target-distance-from-node").pfValue,$=f.pstyle("source-distance-from-node").pfValue,Z=f.pstyle("curve-style").value,he=f._private.rscratch,ge=he.edgeType,Ee="self"===ge||"compound"===ge,Be="bezier"===ge||"multibezier"===ge||Ee,Ue="bezier"!==ge,st="straight"===ge||"segments"===ge,tt="segments"===ge,wt=Be||Ue||st,Ut=Ee||"taxi"===Z,Gt=f.pstyle("source-endpoint"),xt=Ut?"outside-to-node":Gt.value,Wt=f.pstyle("target-endpoint"),Dt=Ut?"outside-to-node":Wt.value;if(he.srcManEndpt=Gt,he.tgtManEndpt=Wt,Be){var Vt=[he.ctrlpts[0],he.ctrlpts[1]];Kt=Ue?[he.ctrlpts[he.ctrlpts.length-2],he.ctrlpts[he.ctrlpts.length-1]]:Vt,Yt=Vt}else if(st){var sn=tt?he.segpts.slice(0,2):[A.x,A.y];Kt=tt?he.segpts.slice(he.segpts.length-2):[C.x,C.y],Yt=sn}if("inside-to-node"===Dt)h=[A.x,A.y];else if(Wt.units)h=this.manualEndptToPx(_,Wt);else if("outside-to-line"===Dt)h=he.tgtIntn;else if("outside-to-node"===Dt||"outside-to-node-or-label"===Dt?lt=Kt:("outside-to-line"===Dt||"outside-to-line-or-label"===Dt)&&(lt=[C.x,C.y]),h=c.nodeShapes[this.getNodeShape(_)].intersectLine(A.x,A.y,_.outerWidth(),_.outerHeight(),lt[0],lt[1],0),"outside-to-node-or-label"===Dt||"outside-to-line-or-label"===Dt){var zn=_._private.rscratch,Vn=zn.labelX,ci=zn.labelY,Ai=zn.labelWidth/2,Oi=zn.labelHeight/2,Mi=_.pstyle("text-valign").value;"top"===Mi?ci-=Oi:"bottom"===Mi&&(ci+=Oi);var Si=_.pstyle("text-halign").value;"left"===Si?Vn-=Ai:"right"===Si&&(Vn+=Ai);var Gn=ku(lt[0],lt[1],[Vn-Ai,ci-Oi,Vn+Ai,ci-Oi,Vn+Ai,ci+Oi,Vn-Ai,ci+Oi],A.x,A.y);if(Gn.length>0){var _i=C,Ni=$d(_i,yh(h)),lr=$d(_i,yh(Gn)),wr=Ni;lr<Ni&&(h=Gn,wr=lr),Gn.length>2&&$d(_i,{x:Gn[2],y:Gn[3]})<wr&&(h=[Gn[2],Gn[3]])}}var _s=np(h,Kt,c.arrowShapes[E].spacing(f)+P),Mr=np(h,Kt,c.arrowShapes[E].gap(f)+P);if(he.endX=Mr[0],he.endY=Mr[1],he.arrowEndX=_s[0],he.arrowEndY=_s[1],"inside-to-node"===xt)h=[C.x,C.y];else if(Gt.units)h=this.manualEndptToPx(m,Gt);else if("outside-to-line"===xt)h=he.srcIntn;else if("outside-to-node"===xt||"outside-to-node-or-label"===xt?Zt=Yt:("outside-to-line"===xt||"outside-to-line-or-label"===xt)&&(Zt=[A.x,A.y]),h=c.nodeShapes[this.getNodeShape(m)].intersectLine(C.x,C.y,m.outerWidth(),m.outerHeight(),Zt[0],Zt[1],0),"outside-to-node-or-label"===xt||"outside-to-line-or-label"===xt){var br=m._private.rscratch,kr=br.labelX,Fr=br.labelY,bs=br.labelWidth/2,oo=br.labelHeight/2,Cs=m.pstyle("text-valign").value;"top"===Cs?Fr-=oo:"bottom"===Cs&&(Fr+=oo);var ir=m.pstyle("text-halign").value;"left"===ir?kr-=bs:"right"===ir&&(kr+=bs);var Nt=ku(Zt[0],Zt[1],[kr-bs,Fr-oo,kr+bs,Fr-oo,kr+bs,Fr+oo,kr-bs,Fr+oo],C.x,C.y);if(Nt.length>0){var li=A,Hi=$d(li,yh(h)),He=$d(li,yh(Nt)),vt=Hi;He<Hi&&(h=[Nt[0],Nt[1]],vt=He),Nt.length>2&&$d(li,{x:Nt[2],y:Nt[3]})<vt&&(h=[Nt[2],Nt[3]])}}var Tn=np(h,Yt,c.arrowShapes[F].spacing(f)+$),Dn=np(h,Yt,c.arrowShapes[F].gap(f)+$);he.startX=Dn[0],he.startY=Dn[1],he.arrowStartX=Tn[0],he.arrowStartY=Tn[1],wt&&(he.badLine=!(Ot(he.startX)&&Ot(he.startY)&&Ot(he.endX)&&Ot(he.endY)))},getSourceEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[0],y:c.haystackPts[1]}:{x:c.arrowStartX,y:c.arrowStartY}},getTargetEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[2],y:c.haystackPts[3]}:{x:c.arrowEndX,y:c.arrowEndY}}},lg={};function Hm(f,c,h){for(var m=function(P,$,Z,he){return Nc(P,$,Z,he)},C=c._private.rstyle.bezierPts,A=0;A<f.bezierProjPcts.length;A++){var E=f.bezierProjPcts[A];C.push({x:m(h[0],h[2],h[4],E),y:m(h[1],h[3],h[5],E)})}}lg.storeEdgeProjections=function(f){var c=f._private,h=c.rscratch,m=h.edgeType;if(c.rstyle.bezierPts=null,c.rstyle.linePts=null,c.rstyle.haystackPts=null,"multibezier"===m||"bezier"===m||"self"===m||"compound"===m){c.rstyle.bezierPts=[];for(var _=0;_+5<h.allpts.length;_+=4)Hm(this,f,h.allpts.slice(_,_+6))}else if("segments"===m){var C=c.rstyle.linePts=[];for(_=0;_+1<h.allpts.length;_+=2)C.push({x:h.allpts[_],y:h.allpts[_+1]})}else if("haystack"===m){var A=h.haystackPts;c.rstyle.haystackPts=[{x:A[0],y:A[1]},{x:A[2],y:A[3]}]}c.rstyle.arrowWidth=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth},lg.recalculateEdgeProjections=function(f){this.findEdgeControlPoints(f)};var au={recalculateNodeLabelProjection:function(f){var c=f.pstyle("label").strValue;if(!le(c)){var h,m,_=f._private,C=f.width(),A=f.height(),E=f.padding(),F=f.position(),P=f.pstyle("text-halign").strValue,$=f.pstyle("text-valign").strValue,Z=_.rscratch,he=_.rstyle;switch(P){case"left":h=F.x-C/2-E;break;case"right":h=F.x+C/2+E;break;default:h=F.x}switch($){case"top":m=F.y-A/2-E;break;case"bottom":m=F.y+A/2+E;break;default:m=F.y}Z.labelX=h,Z.labelY=m,he.labelX=h,he.labelY=m,this.calculateLabelAngles(f),this.applyLabelDimensions(f)}}},cl=function(c,h){var m=Math.atan(h/c);return 0===c&&m<0&&(m*=-1),m},Gc=function(c,h){return cl(h.x-c.x,h.y-c.y)};au.recalculateEdgeLabelProjections=function(f){var c,h=f._private,m=h.rscratch,_=this,C={mid:f.pstyle("label").strValue,source:f.pstyle("source-label").strValue,target:f.pstyle("target-label").strValue};if(C.mid||C.source||C.target){var A=function(Z,he,ge){dr(h.rscratch,Z,he,ge),dr(h.rstyle,Z,he,ge)};A("labelX",null,(c={x:m.midX,y:m.midY}).x),A("labelY",null,c.y);var E=cl(m.midDispX,m.midDispY);A("labelAutoAngle",null,E);var F=function $(){if($.cache)return $.cache;for(var Z=[],he=0;he+5<m.allpts.length;he+=4)Z.push({p0:{x:m.allpts[he],y:m.allpts[he+1]},p1:{x:m.allpts[he+2],y:m.allpts[he+3]},p2:{x:m.allpts[he+4],y:m.allpts[he+5]},startDist:0,length:0,segments:[]});var Be=h.rstyle.bezierPts,Ue=_.bezierProjPcts.length;function st(xt,Wt,Dt,Kt,Yt){var lt=Do(Wt,Dt),Zt=xt.segments[xt.segments.length-1];xt.segments.push({p0:Wt,p1:Dt,t0:Kt,t1:Yt,startDist:Zt?Zt.startDist+Zt.length:0,length:lt}),xt.length+=lt}for(var tt=0;tt<Z.length;tt++){var wt=Z[tt],Ut=Z[tt-1];Ut&&(wt.startDist=Ut.startDist+Ut.length),st(wt,wt.p0,Be[tt*Ue],0,_.bezierProjPcts[0]);for(var Gt=0;Gt<Ue-1;Gt++)st(wt,Be[tt*Ue+Gt],Be[tt*Ue+Gt+1],_.bezierProjPcts[Gt],_.bezierProjPcts[Gt+1]);st(wt,Be[tt*Ue+Ue-1],wt.p2,_.bezierProjPcts[Ue-1],1)}return $.cache=Z},P=function(Z){var he,ge="source"===Z;if(C[Z]){var ve=f.pstyle(Z+"-text-offset").pfValue;switch(m.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var Be,Ee=F(),Ue=0,st=0,tt=0;tt<Ee.length;tt++){for(var wt=Ee[ge?tt:Ee.length-1-tt],Ut=0;Ut<wt.segments.length;Ut++){var Gt=wt.segments[ge?Ut:wt.segments.length-1-Ut];if(Ue=st,(st+=Gt.length)>=ve||tt===Ee.length-1&&Ut===wt.segments.length-1){Be={cp:wt,segment:Gt};break}}if(Be)break}var Wt=Be.cp,Dt=Be.segment,Kt=(ve-Ue)/Dt.length,Yt=Dt.t1-Dt.t0,lt=ge?Dt.t0+Yt*Kt:Dt.t1-Yt*Kt;lt=Vr(0,lt,1),c=cr(Wt.p0,Wt.p1,Wt.p2,lt),he=function(c,h,m,_){var C=Vr(0,_-.001,1),A=Vr(0,_+.001,1),E=cr(c,h,m,C),F=cr(c,h,m,A);return Gc(E,F)}(Wt.p0,Wt.p1,Wt.p2,lt);break;case"straight":case"segments":case"haystack":for(var Vt,Ln,sn,bn,Zt=0,zn=m.allpts.length,jn=0;jn+3<zn&&(ge?(sn={x:m.allpts[jn],y:m.allpts[jn+1]},bn={x:m.allpts[jn+2],y:m.allpts[jn+3]}):(sn={x:m.allpts[zn-2-jn],y:m.allpts[zn-1-jn]},bn={x:m.allpts[zn-4-jn],y:m.allpts[zn-3-jn]}),Ln=Zt,!((Zt+=Vt=Do(sn,bn))>=ve));jn+=2);var Vn=(ve-Ln)/Vt;Vn=Vr(0,Vn,1),c=function(c,h,m,_){var C_x=h.x-c.x,C_y=h.y-c.y,A=Do(c,h);return m=m??0,{x:c.x+C_x/A*(_=_??m*A),y:c.y+C_y/A*_}}(sn,bn,Vn),he=Gc(sn,bn)}A("labelX",Z,c.x),A("labelY",Z,c.y),A("labelAutoAngle",Z,he)}};P("source"),P("target"),this.applyLabelDimensions(f)}},au.applyLabelDimensions=function(f){this.applyPrefixedLabelDimensions(f),f.isEdge()&&(this.applyPrefixedLabelDimensions(f,"source"),this.applyPrefixedLabelDimensions(f,"target"))},au.applyPrefixedLabelDimensions=function(f,c){var h=f._private,m=this.getLabelText(f,c),_=this.calculateLabelDimensions(f,m),C=f.pstyle("line-height").pfValue,A=f.pstyle("text-wrap").strValue,E=gr(h.rscratch,"labelWrapCachedLines",c)||[],F="wrap"!==A?1:Math.max(E.length,1),P=_.height/F,$=P*C,Z=_.width,he=_.height+(F-1)*(C-1)*P;dr(h.rstyle,"labelWidth",c,Z),dr(h.rscratch,"labelWidth",c,Z),dr(h.rstyle,"labelHeight",c,he),dr(h.rscratch,"labelHeight",c,he),dr(h.rscratch,"labelLineHeight",c,$)},au.getLabelText=function(f,c){var h=f._private,_=f.pstyle((c?c+"-":"")+"label").strValue,C=f.pstyle("text-transform").value,A=function(pi,Vn){return Vn?(dr(h.rscratch,pi,c,Vn),Vn):gr(h.rscratch,pi,c)};if(!_)return"";"none"==C||("uppercase"==C?_=_.toUpperCase():"lowercase"==C&&(_=_.toLowerCase()));var E=f.pstyle("text-wrap").value;if("wrap"===E){var F=A("labelKey");if(null!=F&&A("labelWrapKey")===F)return A("labelWrapCachedText");for(var $=_.split("\n"),Z=f.pstyle("text-max-width").pfValue,ge="anywhere"===f.pstyle("text-overflow-wrap").value,ve=[],Ee=/[\s\u200b]+/,Be=ge?"":" ",Ue=0;Ue<$.length;Ue++){var st=$[Ue],wt=this.calculateLabelDimensions(f,st).width;if(ge){var Ut=st.split("").join("\u200b");st=Ut}if(wt>Z){for(var Gt=st.split(Ee),xt="",Wt=0;Wt<Gt.length;Wt++){var Dt=Gt[Wt];this.calculateLabelDimensions(f,0===xt.length?Dt:xt+Be+Dt).width<=Z?xt+=Dt+Be:(xt&&ve.push(xt),xt=Dt+Be)}xt.match(/^[\s\u200b]+$/)||ve.push(xt)}else ve.push(st)}A("labelWrapCachedLines",ve),_=A("labelWrapCachedText",ve.join("\n")),A("labelWrapKey",F)}else if("ellipsis"===E){var Zt=f.pstyle("text-max-width").pfValue,Vt="",sn=!1;if(this.calculateLabelDimensions(f,_).width<Zt)return _;for(var bn=0;bn<_.length&&!(this.calculateLabelDimensions(f,Vt+_[bn]+"\u2026").width>Zt);bn++)Vt+=_[bn],bn===_.length-1&&(sn=!0);return sn||(Vt+="\u2026"),Vt}return _},au.getLabelJustification=function(f){var c=f.pstyle("text-justification").strValue,h=f.pstyle("text-halign").strValue;if("auto"!==c)return c;if(!f.isNode())return"center";switch(h){case"left":return"right";case"right":return"left";default:return"center"}},au.calculateLabelDimensions=function(f,c){var m=xs(c,f._private.labelDimsKey),_=this.labelDimCache||(this.labelDimCache=[]),C=_[m];if(null!=C)return C;var E=f.pstyle("font-style").strValue,F=f.pstyle("font-size").pfValue,P=f.pstyle("font-family").strValue,$=f.pstyle("font-weight").strValue,Z=this.labelCalcCanvas,he=this.labelCalcCanvasContext;if(!Z){Z=this.labelCalcCanvas=document.createElement("canvas"),he=this.labelCalcCanvasContext=Z.getContext("2d");var ge=Z.style;ge.position="absolute",ge.left="-9999px",ge.top="-9999px",ge.zIndex="-1",ge.visibility="hidden",ge.pointerEvents="none"}he.font="".concat(E," ").concat($," ").concat(F,"px ").concat(P);for(var ve=0,Ee=0,Be=c.split("\n"),Ue=0;Ue<Be.length;Ue++){var tt=he.measureText(Be[Ue]),wt=Math.ceil(tt.width),Ut=F;ve=Math.max(wt,ve),Ee+=Ut}return _[m]={width:ve+=0,height:Ee+=0}},au.calculateLabelAngle=function(f,c){var m=f._private.rscratch,_=f.isEdge(),A=f.pstyle((c?c+"-":"")+"text-rotation"),E=A.strValue;return"none"===E?0:_&&"autorotate"===E?m.labelAutoAngle:"autorotate"===E?0:A.pfValue},au.calculateLabelAngles=function(f){var c=this,h=f.isEdge(),_=f._private.rscratch;_.labelAngle=c.calculateLabelAngle(f),h&&(_.sourceLabelAngle=c.calculateLabelAngle(f,"source"),_.targetLabelAngle=c.calculateLabelAngle(f,"target"))};var cg={},pd=!1;cg.getNodeShape=function(f){var h=f.pstyle("shape").value;if("cutrectangle"===h&&(f.width()<28||f.height()<28))return pd||(pe("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),pd=!0),"rectangle";if(f.isParent())return"rectangle"===h||"roundrectangle"===h||"round-rectangle"===h||"cutrectangle"===h||"cut-rectangle"===h||"barrel"===h?h:"rectangle";if("polygon"===h){var m=f.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(m).name}return h};var Mh={updateCachedGrabbedEles:function(){var f=this.cachedZSortedEles;if(f){f.drag=[],f.nondrag=[];for(var c=[],h=0;h<f.length;h++){var _=(m=f[h])._private.rscratch;m.grabbed()&&!m.isParent()?c.push(m):_.inDragLayer?f.drag.push(m):f.nondrag.push(m)}for(h=0;h<c.length;h++){var m;f.drag.push(m=c[h])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(f){if(f||!this.cachedZSortedEles){var c=this.cy.mutableElements().toArray();c.sort(mp),c.interactive=c.filter(function(h){return h.interactive()}),this.cachedZSortedEles=c,this.updateCachedGrabbedEles()}else c=this.cachedZSortedEles;return c}},zd={};[ll,Vm,fc,Bd,lg,au,cg,{registerCalculationListeners:function(){var f=this.cy,c=f.collection(),h=this,m=function(A){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(c.merge(A),E)for(var F=0;F<A.length;F++){var P=A[F],$=P._private,Z=$.rstyle;Z.clean=!1,Z.cleanConnected=!1}};h.binder(f).on("bounds.* dirty.*",function(A){m(A.target)}).on("style.* background.*",function(A){m(A.target,!1)});var _=function(A){if(A){var E=h.onUpdateEleCalcsFns;c.cleanStyle();for(var F=0;F<c.length;F++){var P=c[F],$=P._private.rstyle;P.isNode()&&!$.cleanConnected&&(m(P.connectedEdges()),$.cleanConnected=!0)}if(E)for(var Z=0;Z<E.length;Z++)(0,E[Z])(A,c);h.recalculateRenderedStyle(c),c=f.collection()}};h.flushRenderedStyleQueue=function(){_(!0)},h.beforeRender(_,h.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(f){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(f)},recalculateRenderedStyle:function(f,c){var h=function(wt){return wt._private.rstyle.cleanConnected},m=[],_=[];if(!this.destroyed){void 0===c&&(c=!0);for(var C=0;C<f.length;C++){var A=f[C],E=A._private,F=E.rstyle;A.isEdge()&&(!h(A.source())||!h(A.target()))&&(F.clean=!1),!(c&&F.clean||A.removed())&&"none"!==A.pstyle("display").value&&("nodes"===E.group?_.push(A):m.push(A),F.clean=!0)}for(var P=0;P<_.length;P++){var $=_[P],he=$._private.rstyle,ge=$.position();this.recalculateNodeLabelProjection($),he.nodeX=ge.x,he.nodeY=ge.y,he.nodeW=$.pstyle("width").pfValue,he.nodeH=$.pstyle("height").pfValue}this.recalculateEdgeProjections(m);for(var ve=0;ve<m.length;ve++){var Be=m[ve]._private,Ue=Be.rstyle,st=Be.rscratch;Ue.srcX=st.arrowStartX,Ue.srcY=st.arrowStartY,Ue.tgtX=st.arrowEndX,Ue.tgtY=st.arrowEndY,Ue.midX=st.midX,Ue.midY=st.midY,Ue.labelAngle=st.labelAngle,Ue.sourceLabelAngle=st.sourceLabelAngle,Ue.targetLabelAngle=st.targetLabelAngle}}}},Mh].forEach(function(f){Zi(zd,f)});var pf={getCachedImage:function(f,c,h){var _=this.imageCache=this.imageCache||{},C=_[f];if(C)return C.image.complete||C.image.addEventListener("load",h),C.image;var A=(C=_[f]=_[f]||{}).image=new Image;A.addEventListener("load",h),A.addEventListener("error",function(){A.error=!0});var E="data:";return f.substring(0,E.length).toLowerCase()===E||(A.crossOrigin=c),A.src=f,A}},Tu={registerBinding:function(f,c,h,m){var _=Array.prototype.slice.apply(arguments,[1]),C=this.binder(f);return C.on.apply(C,_)},binder:function(f){var c=this,h=f===window||f===document||f===document.body||function(c){return!(typeof HTMLElement>"u")&&c instanceof HTMLElement}(f);if(null==c.supportsPassiveEvents){var m=!1;try{var _=Object.defineProperty({},"passive",{get:function(){return m=!0,!0}});window.addEventListener("test",null,_)}catch{}c.supportsPassiveEvents=m}var C=function(E,F,P){var $=Array.prototype.slice.call(arguments);return h&&c.supportsPassiveEvents&&($[2]={capture:P??!1,passive:!1,once:!1}),c.bindings.push({target:f,args:$}),(f.addEventListener||f.on).apply(f,$),this};return{on:C,addEventListener:C,addListener:C,bind:C}},nodeIsDraggable:function(f){return f&&f.isNode()&&!f.locked()&&f.grabbable()},nodeIsGrabbable:function(f){return this.nodeIsDraggable(f)&&f.interactive()}};Tu.load=function(){var f=this,c=function(Nt){return Nt.selected()},h=function(Nt,li,Hi,He){null==Nt&&(Nt=f.cy);for(var vt=0;vt<li.length;vt++)Nt.emit({originalEvent:Hi,type:li[vt],position:He})},m=function(Nt){return Nt.shiftKey||Nt.metaKey||Nt.ctrlKey},_=function(Nt,li){var Hi=!0;if(f.cy.hasCompoundNodes()&&Nt&&Nt.pannable()){for(var He=0;li&&He<li.length;He++)if((Nt=li[He]).isNode()&&Nt.isParent()&&!Nt.pannable()){Hi=!1;break}}else Hi=!0;return Hi},E=function(Nt){Nt[0]._private.rscratch.inDragLayer=!0},P=function(Nt){Nt[0]._private.rscratch.isGrabTarget=!0},Z=function(Nt,li){var Hi=li.addToList;!Hi.has(Nt)&&Nt.grabbable()&&!Nt.locked()&&(Hi.merge(Nt),function(Nt){Nt[0]._private.grabbed=!0}(Nt))},ge=function(Nt,li){li=li||{};var Hi=Nt.cy().hasCompoundNodes();li.inDragLayer&&(Nt.forEach(E),Nt.neighborhood().stdFilter(function(He){return!Hi||He.isEdge()}).forEach(E)),li.addToList&&Nt.forEach(function(He){Z(He,li)}),function(Nt,li){if(Nt.cy().hasCompoundNodes()&&(null!=li.inDragLayer||null!=li.addToList)){var Hi=Nt.descendants();li.inDragLayer&&(Hi.forEach(E),Hi.connectedEdges().forEach(E)),li.addToList&&Z(Hi,li)}}(Nt,li),Be(Nt,{inDragLayer:li.inDragLayer}),f.updateCachedGrabbedEles()},ve=ge,Ee=function(Nt){!Nt||(f.getCachedZSortedEles().forEach(function(li){(function(Nt){Nt[0]._private.grabbed=!1})(li),function(Nt){Nt[0]._private.rscratch.inDragLayer=!1}(li),function(Nt){Nt[0]._private.rscratch.isGrabTarget=!1}(li)}),f.updateCachedGrabbedEles())},Be=function(Nt,li){if((null!=li.inDragLayer||null!=li.addToList)&&Nt.cy().hasCompoundNodes()){var Hi=Nt.ancestors().orphans();if(!Hi.same(Nt)){var He=Hi.descendants().spawnSelf().merge(Hi).unmerge(Nt).unmerge(Nt.descendants()),vt=He.connectedEdges();li.inDragLayer&&(vt.forEach(E),He.forEach(E)),li.addToList&&He.forEach(function(vn){Z(vn,li)})}}},Ue=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},st=typeof MutationObserver<"u",tt=typeof ResizeObserver<"u";st?(f.removeObserver=new MutationObserver(function(ir){for(var Nt=0;Nt<ir.length;Nt++){var Hi=ir[Nt].removedNodes;if(Hi)for(var He=0;He<Hi.length;He++)if(Hi[He]===f.container){f.destroy();break}}}),f.container.parentNode&&f.removeObserver.observe(f.container.parentNode,{childList:!0})):f.registerBinding(f.container,"DOMNodeRemoved",function(ir){f.destroy()});var wt=R.default(function(){f.cy.resize()},100);st&&(f.styleObserver=new MutationObserver(wt),f.styleObserver.observe(f.container,{attributes:!0})),f.registerBinding(window,"resize",wt),tt&&(f.resizeObserver=new ResizeObserver(wt),f.resizeObserver.observe(f.container));var Gt=function(){f.invalidateContainerClientCoordsCache()};(function(Nt,li){for(;null!=Nt;)f.registerBinding(ir=Nt,"transitionend",Gt),f.registerBinding(ir,"animationend",Gt),f.registerBinding(ir,"scroll",Gt),Nt=Nt.parentNode;var ir})(f.container),f.registerBinding(f.container,"contextmenu",function(ir){ir.preventDefault()});var Dt,Kt,Yt,Wt=function(Nt){for(var li=f.findContainerClientCoords(),Hi=li[0],He=li[1],vt=li[2],vn=li[3],Tn=Nt.touches?Nt.touches:[Nt],Dn=!1,mr=0;mr<Tn.length;mr++){var Ar=Tn[mr];if(Hi<=Ar.clientX&&Ar.clientX<=Hi+vt&&He<=Ar.clientY&&Ar.clientY<=He+vn){Dn=!0;break}}if(!Dn)return!1;for(var yi=f.container,Ki=Nt.target.parentNode,Qi=!1;Ki;){if(Ki===yi){Qi=!0;break}Ki=Ki.parentNode}return!!Qi};f.registerBinding(f.container,"mousedown",function(Nt){if(Wt(Nt)){Nt.preventDefault(),Ue(),f.hoverData.capture=!0,f.hoverData.which=Nt.which;var li=f.cy,Hi=[Nt.clientX,Nt.clientY],He=f.projectIntoViewport(Hi[0],Hi[1]),vt=f.selection,vn=f.findNearestElements(He[0],He[1],!0,!1),Tn=vn[0],Dn=f.dragData.possibleDragElements;if(f.hoverData.mdownPos=He,f.hoverData.mdownGPos=Hi,3==Nt.which){f.hoverData.cxtStarted=!0;var Ar={originalEvent:Nt,type:"cxttapstart",position:{x:He[0],y:He[1]}};Tn?(Tn.activate(),Tn.emit(Ar),f.hoverData.down=Tn):li.emit(Ar),f.hoverData.downTime=(new Date).getTime(),f.hoverData.cxtDragged=!1}else if(1==Nt.which){if(Tn&&Tn.activate(),null!=Tn&&f.nodeIsGrabbable(Tn)){var yi=function(fr){return{originalEvent:Nt,type:fr,position:{x:He[0],y:He[1]}}};if(P(Tn),Tn.selected()){Dn=f.dragData.possibleDragElements=li.collection();var Ki=li.$(function(Qi){return Qi.isNode()&&Qi.selected()&&f.nodeIsGrabbable(Qi)});ge(Ki,{addToList:Dn}),Tn.emit(yi("grabon")),Ki.forEach(function(fr){fr.emit(yi("grab"))})}else Dn=f.dragData.possibleDragElements=li.collection(),ve(Tn,{addToList:Dn}),Tn.emit(yi("grabon")).emit(yi("grab"));f.redrawHint("eles",!0),f.redrawHint("drag",!0)}f.hoverData.down=Tn,f.hoverData.downs=vn,f.hoverData.downTime=(new Date).getTime(),h(Tn,["mousedown","tapstart","vmousedown"],Nt,{x:He[0],y:He[1]}),null==Tn?(vt[4]=1,f.data.bgActivePosistion={x:He[0],y:He[1]},f.redrawHint("select",!0),f.redraw()):Tn.pannable()&&(vt[4]=1),f.hoverData.tapholdCancelled=!1,clearTimeout(f.hoverData.tapholdTimeout),f.hoverData.tapholdTimeout=setTimeout(function(){if(!f.hoverData.tapholdCancelled){var fr=f.hoverData.down;fr?fr.emit({originalEvent:Nt,type:"taphold",position:{x:He[0],y:He[1]}}):li.emit({originalEvent:Nt,type:"taphold",position:{x:He[0],y:He[1]}})}},f.tapholdDuration)}vt[0]=vt[2]=He[0],vt[1]=vt[3]=He[1]}},!1),f.registerBinding(window,"mousemove",function(Nt){var hu;if(f.hoverData.capture||Wt(Nt)){var Hi=!1,He=f.cy,vt=He.zoom(),vn=[Nt.clientX,Nt.clientY],Tn=f.projectIntoViewport(vn[0],vn[1]),Dn=f.hoverData.mdownPos,mr=f.hoverData.mdownGPos,Ar=f.selection,yi=null;!f.hoverData.draggingEles&&!f.hoverData.dragging&&!f.hoverData.selecting&&(yi=f.findNearestElement(Tn[0],Tn[1],!0,!1));var Eo,ns=f.hoverData.last,Ki=f.hoverData.down,Qi=[Tn[0]-Ar[2],Tn[1]-Ar[3]],fr=f.dragData.possibleDragElements;if(mr){var No=vn[0]-mr[0],ma=vn[1]-mr[1];f.hoverData.isOverThresholdDrag=Eo=No*No+ma*ma>=f.desktopTapThreshold2}var Ur=m(Nt);Eo&&(f.hoverData.tapholdCancelled=!0),Hi=!0,h(yi,["mousemove","vmousemove","tapdrag"],Nt,{x:Tn[0],y:Tn[1]});var pc=function(){f.data.bgActivePosistion=void 0,f.hoverData.selecting||He.emit({originalEvent:Nt,type:"boxstart",position:{x:Tn[0],y:Tn[1]}}),Ar[4]=1,f.hoverData.selecting=!0,f.redrawHint("select",!0),f.redraw()};if(3===f.hoverData.which){if(Eo){var gc={originalEvent:Nt,type:"cxtdrag",position:{x:Tn[0],y:Tn[1]}};Ki?Ki.emit(gc):He.emit(gc),f.hoverData.cxtDragged=!0,(!f.hoverData.cxtOver||yi!==f.hoverData.cxtOver)&&(f.hoverData.cxtOver&&f.hoverData.cxtOver.emit({originalEvent:Nt,type:"cxtdragout",position:{x:Tn[0],y:Tn[1]}}),f.hoverData.cxtOver=yi,yi&&yi.emit({originalEvent:Nt,type:"cxtdragover",position:{x:Tn[0],y:Tn[1]}}))}}else if(f.hoverData.dragging){if(Hi=!0,He.panningEnabled()&&He.userPanningEnabled()){var cu;if(f.hoverData.justStartedPan){var Tp=f.hoverData.mdownPos;cu={x:(Tn[0]-Tp[0])*vt,y:(Tn[1]-Tp[1])*vt},f.hoverData.justStartedPan=!1}else cu={x:Qi[0]*vt,y:Qi[1]*vt};He.panBy(cu),He.emit("dragpan"),f.hoverData.dragged=!0}Tn=f.projectIntoViewport(Nt.clientX,Nt.clientY)}else if(1!=Ar[4]||null!=Ki&&!Ki.pannable()){if(Ki&&Ki.pannable()&&Ki.active()&&Ki.unactivate(),(!Ki||!Ki.grabbed())&&yi!=ns&&(ns&&h(ns,["mouseout","tapdragout"],Nt,{x:Tn[0],y:Tn[1]}),yi&&h(yi,["mouseover","tapdragover"],Nt,{x:Tn[0],y:Tn[1]}),f.hoverData.last=yi),Ki)if(Eo){if(He.boxSelectionEnabled()&&Ur)Ki&&Ki.grabbed()&&(Ee(fr),Ki.emit("freeon"),fr.emit("free"),f.dragData.didDrag&&(Ki.emit("dragfreeon"),fr.emit("dragfree"))),pc();else if(Ki&&Ki.grabbed()&&f.nodeIsDraggable(Ki)){var uu=!f.dragData.didDrag;uu&&f.redrawHint("eles",!0),f.dragData.didDrag=!0,f.hoverData.draggingEles||ge(fr,{inDragLayer:!0});var Ec={x:0,y:0};if(Ot(Qi[0])&&Ot(Qi[1])&&(Ec.x+=Qi[0],Ec.y+=Qi[1],uu)){var du=f.hoverData.dragDelta;du&&Ot(du[0])&&Ot(du[1])&&(Ec.x+=du[0],Ec.y+=du[1])}f.hoverData.draggingEles=!0,fr.silentShift(Ec).emit("position drag"),f.redrawHint("drag",!0),f.redraw()}}else 0===(hu=f.hoverData.dragDelta=f.hoverData.dragDelta||[]).length?(hu.push(Qi[0]),hu.push(Qi[1])):(hu[0]+=Qi[0],hu[1]+=Qi[1]);Hi=!0}else Eo&&(f.hoverData.dragging||!He.boxSelectionEnabled()||!Ur&&He.panningEnabled()&&He.userPanningEnabled()?!f.hoverData.selecting&&He.panningEnabled()&&He.userPanningEnabled()&&_(Ki,f.hoverData.downs)&&(f.hoverData.dragging=!0,f.hoverData.justStartedPan=!0,Ar[4]=0,f.data.bgActivePosistion=yh(Dn),f.redrawHint("select",!0),f.redraw()):pc(),Ki&&Ki.pannable()&&Ki.active()&&Ki.unactivate());if(Ar[2]=Tn[0],Ar[3]=Tn[1],Hi)return Nt.stopPropagation&&Nt.stopPropagation(),Nt.preventDefault&&Nt.preventDefault(),!1}},!1),f.registerBinding(window,"mouseup",function(Nt){if(f.hoverData.capture){f.hoverData.capture=!1;var Hi=f.cy,He=f.projectIntoViewport(Nt.clientX,Nt.clientY),vt=f.selection,vn=f.findNearestElement(He[0],He[1],!0,!1),Tn=f.dragData.possibleDragElements,Dn=f.hoverData.down,mr=m(Nt);if(f.data.bgActivePosistion&&(f.redrawHint("select",!0),f.redraw()),f.hoverData.tapholdCancelled=!0,f.data.bgActivePosistion=void 0,Dn&&Dn.unactivate(),3===f.hoverData.which){var Ar={originalEvent:Nt,type:"cxttapend",position:{x:He[0],y:He[1]}};if(Dn?Dn.emit(Ar):Hi.emit(Ar),!f.hoverData.cxtDragged){var yi={originalEvent:Nt,type:"cxttap",position:{x:He[0],y:He[1]}};Dn?Dn.emit(yi):Hi.emit(yi)}f.hoverData.cxtDragged=!1,f.hoverData.which=null}else if(1===f.hoverData.which){if(h(vn,["mouseup","tapend","vmouseup"],Nt,{x:He[0],y:He[1]}),!f.dragData.didDrag&&!f.hoverData.dragged&&!f.hoverData.selecting&&!f.hoverData.isOverThresholdDrag&&(h(Dn,["click","tap","vclick"],Nt,{x:He[0],y:He[1]}),Kt=!1,Nt.timeStamp-Yt<=Hi.multiClickDebounceTime()?(Dt&&clearTimeout(Dt),Kt=!0,Yt=null,h(Dn,["dblclick","dbltap","vdblclick"],Nt,{x:He[0],y:He[1]})):(Dt=setTimeout(function(){Kt||h(Dn,["oneclick","onetap","voneclick"],Nt,{x:He[0],y:He[1]})},Hi.multiClickDebounceTime()),Yt=Nt.timeStamp)),null==Dn&&!f.dragData.didDrag&&!f.hoverData.selecting&&!f.hoverData.dragged&&!m(Nt)&&(Hi.$(c).unselect(["tapunselect"]),Tn.length>0&&f.redrawHint("eles",!0),f.dragData.possibleDragElements=Tn=Hi.collection()),vn==Dn&&!f.dragData.didDrag&&!f.hoverData.selecting&&null!=vn&&vn._private.selectable&&(f.hoverData.dragging||("additive"===Hi.selectionType()||mr?vn.selected()?vn.unselect(["tapunselect"]):vn.select(["tapselect"]):mr||(Hi.$(c).unmerge(vn).unselect(["tapunselect"]),vn.select(["tapselect"]))),f.redrawHint("eles",!0)),f.hoverData.selecting){var ns=Hi.collection(f.getAllInBox(vt[0],vt[1],vt[2],vt[3]));f.redrawHint("select",!0),ns.length>0&&f.redrawHint("eles",!0),Hi.emit({type:"boxend",originalEvent:Nt,position:{x:He[0],y:He[1]}}),"additive"===Hi.selectionType()||mr||Hi.$(c).unmerge(ns).unselect(),ns.emit("box").stdFilter(function(Eo){return Eo.selectable()&&!Eo.selected()}).select().emit("boxselect"),f.redraw()}if(f.hoverData.dragging&&(f.hoverData.dragging=!1,f.redrawHint("select",!0),f.redrawHint("eles",!0),f.redraw()),!vt[4]){f.redrawHint("drag",!0),f.redrawHint("eles",!0);var Qi=Dn&&Dn.grabbed();Ee(Tn),Qi&&(Dn.emit("freeon"),Tn.emit("free"),f.dragData.didDrag&&(Dn.emit("dragfreeon"),Tn.emit("dragfree")))}}vt[4]=0,f.hoverData.down=null,f.hoverData.cxtStarted=!1,f.hoverData.draggingEles=!1,f.hoverData.selecting=!1,f.hoverData.isOverThresholdDrag=!1,f.dragData.didDrag=!1,f.hoverData.dragged=!1,f.hoverData.dragDelta=[],f.hoverData.mdownPos=null,f.hoverData.mdownGPos=null}},!1);var lt=function(Nt){if(!f.scrollingPage){var li=f.cy,Hi=li.zoom(),He=li.pan(),vt=f.projectIntoViewport(Nt.clientX,Nt.clientY),vn=[vt[0]*Hi+He.x,vt[1]*Hi+He.y];if(f.hoverData.draggingEles||f.hoverData.dragging||f.hoverData.cxtStarted||0!==f.selection[4])return void Nt.preventDefault();if(li.panningEnabled()&&li.userPanningEnabled()&&li.zoomingEnabled()&&li.userZoomingEnabled()){var Tn;Nt.preventDefault(),f.data.wheelZooming=!0,clearTimeout(f.data.wheelTimeout),f.data.wheelTimeout=setTimeout(function(){f.data.wheelZooming=!1,f.redrawHint("eles",!0),f.redraw()},150),Tn=null!=Nt.deltaY?Nt.deltaY/-250:null!=Nt.wheelDeltaY?Nt.wheelDeltaY/1e3:Nt.wheelDelta/1e3,Tn*=f.wheelSensitivity,1===Nt.deltaMode&&(Tn*=33);var mr=li.zoom()*Math.pow(10,Tn);"gesturechange"===Nt.type&&(mr=f.gestureStartZoom*Nt.scale),li.zoom({level:mr,renderedPosition:{x:vn[0],y:vn[1]}}),li.emit("gesturechange"===Nt.type?"pinchzoom":"scrollzoom")}}};f.registerBinding(f.container,"wheel",lt,!0),f.registerBinding(window,"scroll",function(Nt){f.scrollingPage=!0,clearTimeout(f.scrollingPageTimeout),f.scrollingPageTimeout=setTimeout(function(){f.scrollingPage=!1},250)},!0),f.registerBinding(f.container,"gesturestart",function(Nt){f.gestureStartZoom=f.cy.zoom(),f.hasTouchStarted||Nt.preventDefault()},!0),f.registerBinding(f.container,"gesturechange",function(ir){f.hasTouchStarted||lt(ir)},!0),f.registerBinding(f.container,"mouseout",function(Nt){var li=f.projectIntoViewport(Nt.clientX,Nt.clientY);f.cy.emit({originalEvent:Nt,type:"mouseout",position:{x:li[0],y:li[1]}})},!1),f.registerBinding(f.container,"mouseover",function(Nt){var li=f.projectIntoViewport(Nt.clientX,Nt.clientY);f.cy.emit({originalEvent:Nt,type:"mouseover",position:{x:li[0],y:li[1]}})},!1);var Zt,Vt,Ln,sn,bn,zn,jn,pi,Vn,ci,Ai,Oi,Mi,_i,Ni,lr,wr,as,_s,Mr,Si=function(Nt,li,Hi,He){return Math.sqrt((Hi-Nt)*(Hi-Nt)+(He-li)*(He-li))},Gn=function(Nt,li,Hi,He){return(Hi-Nt)*(Hi-Nt)+(He-li)*(He-li)};if(f.registerBinding(f.container,"touchstart",_i=function(Nt){if(f.hasTouchStarted=!0,Wt(Nt)){Ue(),f.touchData.capture=!0,f.data.bgActivePosistion=void 0;var li=f.cy,Hi=f.touchData.now,He=f.touchData.earlier;if(Nt.touches[0]){var vt=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY);Hi[0]=vt[0],Hi[1]=vt[1]}if(Nt.touches[1]&&(vt=f.projectIntoViewport(Nt.touches[1].clientX,Nt.touches[1].clientY),Hi[2]=vt[0],Hi[3]=vt[1]),Nt.touches[2]&&(vt=f.projectIntoViewport(Nt.touches[2].clientX,Nt.touches[2].clientY),Hi[4]=vt[0],Hi[5]=vt[1]),Nt.touches[1]){f.touchData.singleTouchMoved=!0,Ee(f.dragData.touchDragEles);var vn=f.findContainerClientCoords();Ai=vn[2],Oi=vn[3],Vt=Nt.touches[0].clientY-(ci=vn[1]),Ln=Nt.touches[1].clientX-(Vn=vn[0]),sn=Nt.touches[1].clientY-ci,Mi=0<=(Zt=Nt.touches[0].clientX-Vn)&&Zt<=Ai&&0<=Ln&&Ln<=Ai&&0<=Vt&&Vt<=Oi&&0<=sn&&sn<=Oi;var Tn=li.pan(),Dn=li.zoom();if(bn=Si(Zt,Vt,Ln,sn),zn=Gn(Zt,Vt,Ln,sn),pi=[((jn=[(Zt+Ln)/2,(Vt+sn)/2])[0]-Tn.x)/Dn,(jn[1]-Tn.y)/Dn],zn<4e4&&!Nt.touches[2]){var yi=f.findNearestElement(Hi[0],Hi[1],!0,!0),ns=f.findNearestElement(Hi[2],Hi[3],!0,!0);return yi&&yi.isNode()?(yi.activate().emit({originalEvent:Nt,type:"cxttapstart",position:{x:Hi[0],y:Hi[1]}}),f.touchData.start=yi):ns&&ns.isNode()?(ns.activate().emit({originalEvent:Nt,type:"cxttapstart",position:{x:Hi[0],y:Hi[1]}}),f.touchData.start=ns):li.emit({originalEvent:Nt,type:"cxttapstart",position:{x:Hi[0],y:Hi[1]}}),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!0,f.touchData.cxtDragged=!1,f.data.bgActivePosistion=void 0,void f.redraw()}}if(Nt.touches[2])li.boxSelectionEnabled()&&Nt.preventDefault();else if(!Nt.touches[1]&&Nt.touches[0]){var Ki=f.findNearestElements(Hi[0],Hi[1],!0,!0),Qi=Ki[0];if(null!=Qi&&(Qi.activate(),f.touchData.start=Qi,f.touchData.starts=Ki,f.nodeIsGrabbable(Qi))){var fr=f.dragData.touchDragEles=li.collection(),Eo=null;f.redrawHint("eles",!0),f.redrawHint("drag",!0),Qi.selected()?(Eo=li.$(function(Aa){return Aa.selected()&&f.nodeIsGrabbable(Aa)}),ge(Eo,{addToList:fr})):ve(Qi,{addToList:fr}),P(Qi);var No=function(Ur){return{originalEvent:Nt,type:Ur,position:{x:Hi[0],y:Hi[1]}}};Qi.emit(No("grabon")),Eo?Eo.forEach(function(Aa){Aa.emit(No("grab"))}):Qi.emit(No("grab"))}h(Qi,["touchstart","tapstart","vmousedown"],Nt,{x:Hi[0],y:Hi[1]}),null==Qi&&(f.data.bgActivePosistion={x:vt[0],y:vt[1]},f.redrawHint("select",!0),f.redraw()),f.touchData.singleTouchMoved=!1,f.touchData.singleTouchStartTime=+new Date,clearTimeout(f.touchData.tapholdTimeout),f.touchData.tapholdTimeout=setTimeout(function(){!1===f.touchData.singleTouchMoved&&!f.pinching&&!f.touchData.selecting&&h(f.touchData.start,["taphold"],Nt,{x:Hi[0],y:Hi[1]})},f.tapholdDuration)}if(Nt.touches.length>=1){for(var ul=f.touchData.startPosition=[],ma=0;ma<Hi.length;ma++)ul[ma]=He[ma]=Hi[ma];var Jo=Nt.touches[0];f.touchData.startGPosition=[Jo.clientX,Jo.clientY]}}},!1),f.registerBinding(window,"touchmove",Ni=function(Nt){var li=f.touchData.capture;if(li||Wt(Nt)){var Hi=f.selection,He=f.cy,vt=f.touchData.now,vn=f.touchData.earlier,Tn=He.zoom();if(Nt.touches[0]){var Dn=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY);vt[0]=Dn[0],vt[1]=Dn[1]}Nt.touches[1]&&(Dn=f.projectIntoViewport(Nt.touches[1].clientX,Nt.touches[1].clientY),vt[2]=Dn[0],vt[3]=Dn[1]),Nt.touches[2]&&(Dn=f.projectIntoViewport(Nt.touches[2].clientX,Nt.touches[2].clientY),vt[4]=Dn[0],vt[5]=Dn[1]);var Ar,mr=f.touchData.startGPosition;if(li&&Nt.touches[0]&&mr){for(var yi=[],ns=0;ns<vt.length;ns++)yi[ns]=vt[ns]-vn[ns];var Ki=Nt.touches[0].clientX-mr[0],fr=Nt.touches[0].clientY-mr[1];Ar=Ki*Ki+fr*fr>=f.touchTapThreshold2}if(li&&f.touchData.cxt){Nt.preventDefault();var Ur=Gn(ul=Nt.touches[0].clientX-Vn,ma=Nt.touches[0].clientY-ci,Jo=Nt.touches[1].clientX-Vn,Aa=Nt.touches[1].clientY-ci);if(Ur/zn>=2.25||Ur>=22500){f.touchData.cxt=!1,f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var qf={originalEvent:Nt,type:"cxttapend",position:{x:vt[0],y:vt[1]}};f.touchData.start?(f.touchData.start.unactivate().emit(qf),f.touchData.start=null):He.emit(qf)}}if(li&&f.touchData.cxt){qf={originalEvent:Nt,type:"cxtdrag",position:{x:vt[0],y:vt[1]}},f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.touchData.start?f.touchData.start.emit(qf):He.emit(qf),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxtDragged=!0;var uu=f.findNearestElement(vt[0],vt[1],!0,!0);(!f.touchData.cxtOver||uu!==f.touchData.cxtOver)&&(f.touchData.cxtOver&&f.touchData.cxtOver.emit({originalEvent:Nt,type:"cxtdragout",position:{x:vt[0],y:vt[1]}}),f.touchData.cxtOver=uu,uu&&uu.emit({originalEvent:Nt,type:"cxtdragover",position:{x:vt[0],y:vt[1]}}))}else if(li&&Nt.touches[2]&&He.boxSelectionEnabled())Nt.preventDefault(),f.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,f.touchData.selecting||He.emit({originalEvent:Nt,type:"boxstart",position:{x:vt[0],y:vt[1]}}),f.touchData.selecting=!0,f.touchData.didSelect=!0,Hi[4]=1,Hi&&0!==Hi.length&&void 0!==Hi[0]?(Hi[2]=(vt[0]+vt[2]+vt[4])/3,Hi[3]=(vt[1]+vt[3]+vt[5])/3):(Hi[0]=(vt[0]+vt[2]+vt[4])/3,Hi[1]=(vt[1]+vt[3]+vt[5])/3,Hi[2]=(vt[0]+vt[2]+vt[4])/3+1,Hi[3]=(vt[1]+vt[3]+vt[5])/3+1),f.redrawHint("select",!0),f.redraw();else if(li&&Nt.touches[1]&&!f.touchData.didSelect&&He.zoomingEnabled()&&He.panningEnabled()&&He.userZoomingEnabled()&&He.userPanningEnabled()){if(Nt.preventDefault(),f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),Ec=f.dragData.touchDragEles){f.redrawHint("drag",!0);for(var du=0;du<Ec.length;du++){var Mp=Ec[du]._private;Mp.grabbed=!1,Mp.rscratch.inDragLayer=!1}}var ul,ma,Jo,Aa,hu=f.touchData.start,Co=Si(ul=Nt.touches[0].clientX-Vn,ma=Nt.touches[0].clientY-ci,Jo=Nt.touches[1].clientX-Vn,Aa=Nt.touches[1].clientY-ci),_b=Co/bn;if(Mi){var t0=(ul-Zt+(Jo-Ln))/2,bb=(ma-Vt+(Aa-sn))/2,gg=He.zoom(),Zy=gg*_b,Hv=He.pan(),mg=pi[0]*gg+Hv.x,n0=pi[1]*gg+Hv.y,Cb={x:-Zy/gg*(mg-Hv.x-t0)+mg,y:-Zy/gg*(n0-Hv.y-bb)+n0};hu&&hu.active()&&(Ee(Ec=f.dragData.touchDragEles),f.redrawHint("drag",!0),f.redrawHint("eles",!0),hu.unactivate().emit("freeon"),Ec.emit("free"),f.dragData.didDrag&&(hu.emit("dragfreeon"),Ec.emit("dragfree"))),He.viewport({zoom:Zy,pan:Cb,cancelOnFailedZoom:!0}),He.emit("pinchzoom"),bn=Co,Zt=ul,Vt=ma,Ln=Jo,sn=Aa,f.pinching=!0}Nt.touches[0]&&(Dn=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY),vt[0]=Dn[0],vt[1]=Dn[1]),Nt.touches[1]&&(Dn=f.projectIntoViewport(Nt.touches[1].clientX,Nt.touches[1].clientY),vt[2]=Dn[0],vt[3]=Dn[1]),Nt.touches[2]&&(Dn=f.projectIntoViewport(Nt.touches[2].clientX,Nt.touches[2].clientY),vt[4]=Dn[0],vt[5]=Dn[1])}else if(Nt.touches[0]&&!f.touchData.didSelect){var vf=f.touchData.start,wb=f.touchData.last;if(!f.hoverData.draggingEles&&!f.swipePanning&&(uu=f.findNearestElement(vt[0],vt[1],!0,!0)),li&&null!=vf&&Nt.preventDefault(),li&&null!=vf&&f.nodeIsDraggable(vf))if(Ar){var Ec=f.dragData.touchDragEles,Gv=!f.dragData.didDrag;Gv&&ge(Ec,{inDragLayer:!0}),f.dragData.didDrag=!0;var Wv={x:0,y:0};Ot(yi[0])&&Ot(yi[1])&&(Wv.x+=yi[0],Wv.y+=yi[1],Gv)&&(f.redrawHint("eles",!0),(kh=f.touchData.dragDelta)&&Ot(kh[0])&&Ot(kh[1])&&(Wv.x+=kh[0],Wv.y+=kh[1])),f.hoverData.draggingEles=!0,Ec.silentShift(Wv).emit("position drag"),f.redrawHint("drag",!0),f.touchData.startPosition[0]==vn[0]&&f.touchData.startPosition[1]==vn[1]&&f.redrawHint("eles",!0),f.redraw()}else{var kh;0===(kh=f.touchData.dragDelta=f.touchData.dragDelta||[]).length?(kh.push(yi[0]),kh.push(yi[1])):(kh[0]+=yi[0],kh[1]+=yi[1])}if(h(vf||uu,["touchmove","tapdrag","vmousemove"],Nt,{x:vt[0],y:vt[1]}),(!vf||!vf.grabbed())&&uu!=wb&&(wb&&wb.emit({originalEvent:Nt,type:"tapdragout",position:{x:vt[0],y:vt[1]}}),uu&&uu.emit({originalEvent:Nt,type:"tapdragover",position:{x:vt[0],y:vt[1]}})),f.touchData.last=uu,li)for(du=0;du<vt.length;du++)vt[du]&&f.touchData.startPosition[du]&&Ar&&(f.touchData.singleTouchMoved=!0);li&&(null==vf||vf.pannable())&&He.panningEnabled()&&He.userPanningEnabled()&&(_(vf,f.touchData.starts)&&(Nt.preventDefault(),f.data.bgActivePosistion||(f.data.bgActivePosistion=yh(f.touchData.startPosition)),f.swipePanning?(He.panBy({x:yi[0]*Tn,y:yi[1]*Tn}),He.emit("dragpan")):Ar&&(f.swipePanning=!0,He.panBy({x:Ki*Tn,y:fr*Tn}),He.emit("dragpan"),vf&&(vf.unactivate(),f.redrawHint("select",!0),f.touchData.start=null))),Dn=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY),vt[0]=Dn[0],vt[1]=Dn[1])}for(ns=0;ns<vt.length;ns++)vn[ns]=vt[ns];li&&Nt.touches.length>0&&!f.hoverData.draggingEles&&!f.swipePanning&&null!=f.data.bgActivePosistion&&(f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.redraw())}},!1),f.registerBinding(window,"touchcancel",lr=function(Nt){var li=f.touchData.start;f.touchData.capture=!1,li&&li.unactivate()}),f.registerBinding(window,"touchend",wr=function(Nt){var li=f.touchData.start;if(f.touchData.capture){0===Nt.touches.length&&(f.touchData.capture=!1),Nt.preventDefault();var He=f.selection;f.swipePanning=!1,f.hoverData.draggingEles=!1;var Ar,vt=f.cy,vn=vt.zoom(),Tn=f.touchData.now,Dn=f.touchData.earlier;if(Nt.touches[0]){var mr=f.projectIntoViewport(Nt.touches[0].clientX,Nt.touches[0].clientY);Tn[0]=mr[0],Tn[1]=mr[1]}if(Nt.touches[1]&&(mr=f.projectIntoViewport(Nt.touches[1].clientX,Nt.touches[1].clientY),Tn[2]=mr[0],Tn[3]=mr[1]),Nt.touches[2]&&(mr=f.projectIntoViewport(Nt.touches[2].clientX,Nt.touches[2].clientY),Tn[4]=mr[0],Tn[5]=mr[1]),li&&li.unactivate(),f.touchData.cxt){if(Ar={originalEvent:Nt,type:"cxttapend",position:{x:Tn[0],y:Tn[1]}},li?li.emit(Ar):vt.emit(Ar),!f.touchData.cxtDragged){var yi={originalEvent:Nt,type:"cxttap",position:{x:Tn[0],y:Tn[1]}};li?li.emit(yi):vt.emit(yi)}return f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!1,f.touchData.start=null,void f.redraw()}if(!Nt.touches[2]&&vt.boxSelectionEnabled()&&f.touchData.selecting){f.touchData.selecting=!1;var ns=vt.collection(f.getAllInBox(He[0],He[1],He[2],He[3]));He[0]=void 0,He[1]=void 0,He[2]=void 0,He[3]=void 0,He[4]=0,f.redrawHint("select",!0),vt.emit({type:"boxend",originalEvent:Nt,position:{x:Tn[0],y:Tn[1]}}),ns.emit("box").stdFilter(function(gc){return gc.selectable()&&!gc.selected()}).select().emit("boxselect"),ns.nonempty()&&f.redrawHint("eles",!0),f.redraw()}if(li?.unactivate(),Nt.touches[2])f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);else if(!Nt.touches[1]&&!Nt.touches[0]&&!Nt.touches[0]){f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var Qi=f.dragData.touchDragEles;if(null!=li){var fr=li._private.grabbed;Ee(Qi),f.redrawHint("drag",!0),f.redrawHint("eles",!0),fr&&(li.emit("freeon"),Qi.emit("free"),f.dragData.didDrag&&(li.emit("dragfreeon"),Qi.emit("dragfree"))),h(li,["touchend","tapend","vmouseup","tapdragout"],Nt,{x:Tn[0],y:Tn[1]}),li.unactivate(),f.touchData.start=null}else{var Eo=f.findNearestElement(Tn[0],Tn[1],!0,!0);h(Eo,["touchend","tapend","vmouseup","tapdragout"],Nt,{x:Tn[0],y:Tn[1]})}var No=f.touchData.startPosition[0]-Tn[0],ma=f.touchData.startPosition[1]-Tn[1],Ur=(No*No+ma*ma)*vn*vn;f.touchData.singleTouchMoved||(li||vt.$(":selected").unselect(["tapunselect"]),h(li,["tap","vclick"],Nt,{x:Tn[0],y:Tn[1]}),as=!1,Nt.timeStamp-Mr<=vt.multiClickDebounceTime()?(_s&&clearTimeout(_s),as=!0,Mr=null,h(li,["dbltap","vdblclick"],Nt,{x:Tn[0],y:Tn[1]})):(_s=setTimeout(function(){as||h(li,["onetap","voneclick"],Nt,{x:Tn[0],y:Tn[1]})},vt.multiClickDebounceTime()),Mr=Nt.timeStamp)),null!=li&&!f.dragData.didDrag&&li._private.selectable&&Ur<f.touchTapThreshold2&&!f.pinching&&("single"===vt.selectionType()?(vt.$(c).unmerge(li).unselect(["tapunselect"]),li.select(["tapselect"])):li.selected()?li.unselect(["tapunselect"]):li.select(["tapselect"]),f.redrawHint("eles",!0)),f.touchData.singleTouchMoved=!0}for(var yl=0;yl<Tn.length;yl++)Dn[yl]=Tn[yl];f.dragData.didDrag=!1,0===Nt.touches.length&&(f.touchData.dragDelta=[],f.touchData.startPosition=null,f.touchData.startGPosition=null,f.touchData.didSelect=!1),Nt.touches.length<2&&(1===Nt.touches.length&&(f.touchData.startGPosition=[Nt.touches[0].clientX,Nt.touches[0].clientY]),f.pinching=!1,f.redrawHint("eles",!0),f.redraw())}},!1),typeof TouchEvent>"u"){var br=[],gs=function(Nt){return{clientX:Nt.clientX,clientY:Nt.clientY,force:1,identifier:Nt.pointerId,pageX:Nt.pageX,pageY:Nt.pageY,radiusX:Nt.width/2,radiusY:Nt.height/2,screenX:Nt.screenX,screenY:Nt.screenY,target:Nt.target}},Fr=function(Nt){for(var li=0;li<br.length;li++)if(br[li].event.pointerId===Nt.pointerId)return void br.splice(li,1)},oo=function(Nt){Nt.touches=br.map(function(li){return li.touch})},Cs=function(Nt){return"mouse"===Nt.pointerType||4===Nt.pointerType};f.registerBinding(f.container,"pointerdown",function(ir){Cs(ir)||(ir.preventDefault(),br.push(function(Nt){return{event:Nt,touch:gs(Nt)}}(ir)),oo(ir),_i(ir))}),f.registerBinding(f.container,"pointerup",function(ir){Cs(ir)||(Fr(ir),oo(ir),wr(ir))}),f.registerBinding(f.container,"pointercancel",function(ir){Cs(ir)||(Fr(ir),oo(ir),lr())}),f.registerBinding(f.container,"pointermove",function(ir){var Nt,li;Cs(ir)||(ir.preventDefault(),Nt=ir,(li=br.filter(function(Hi){return Hi.event.pointerId===Nt.pointerId})[0]).event=Nt,li.touch=gs(Nt),oo(ir),Ni(ir))})}};var Dh={generatePolygon:function(f,c){return this.nodeShapes[f]={renderer:this,name:f,points:c,draw:function(m,_,C,A,E){this.renderer.nodeShapeImpl("polygon",m,_,C,A,E,this.points)},intersectLine:function(m,_,C,A,E,F,P){return ku(E,F,this.points,m,_,C/2,A/2,P)},checkPoint:function(m,_,C,A,E,F,P){return Lo(m,_,this.points,F,P,A,E,[0,-1],C)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},intersectLine:function(c,h,m,_,C,A,E){return function(c,h,m,_,C,A){var E=m-c,F=_-h;E/=C,F/=A;var P=Math.sqrt(E*E+F*F),$=P-1;if($<0)return[];var Z=$/P;return[(m-c)*Z+c,(_-h)*Z+h]}(C,A,c,h,m/2+E,_/2+E)},checkPoint:function(c,h,m,_,C,A,E){return Al(c,h,_,C,A,E,m)}}},generateRoundPolygon:function(f,c){for(var h=new Array(2*c.length),m=0;m<c.length/2;m++){var C,_=2*m;C=m<c.length/2-1?2*(m+1):0,h[4*m]=c[_],h[4*m+1]=c[_+1];var A=c[C]-c[_],E=c[C+1]-c[_+1],F=Math.sqrt(A*A+E*E);h[4*m+2]=A/F,h[4*m+3]=E/F}return this.nodeShapes[f]={renderer:this,name:f,points:h,draw:function($,Z,he,ge,ve){this.renderer.nodeShapeImpl("round-polygon",$,Z,he,ge,ve,this.points)},intersectLine:function($,Z,he,ge,ve,Ee,Be){return function(c,h,m,_,C,A,E,F){for(var $,P=[],Z=new Array(m.length),he=A/2,ge=E/2,ve=Xr(A,E),Ee=0;Ee<m.length/4;Ee++){var Ue,Be;Be=0===Ee?m.length-2:4*Ee-2,Ue=4*Ee+2;var st=_+he*m[4*Ee],tt=C+ge*m[4*Ee+1],Ut=ve/Math.tan(Math.acos(-m[Be]*m[Ue]-m[Be+1]*m[Ue+1])/2),Gt=st-Ut*m[Be],xt=tt-Ut*m[Be+1],Wt=st+Ut*m[Ue],Dt=tt+Ut*m[Ue+1];0===Ee?(Z[m.length-2]=Gt,Z[m.length-1]=xt):(Z[4*Ee-2]=Gt,Z[4*Ee-1]=xt),Z[4*Ee]=Wt,Z[4*Ee+1]=Dt;var Kt=m[Be+1],Yt=-m[Be];Kt*m[Ue]+Yt*m[Ue+1]<0&&(Kt*=-1,Yt*=-1),0!==($=tp(c,h,_,C,Gt+Kt*ve,xt+Yt*ve,ve)).length&&P.push($[0],$[1])}for(var Ln=0;Ln<Z.length/4;Ln++)0!==($=Dl(c,h,_,C,Z[4*Ln],Z[4*Ln+1],Z[4*Ln+2],Z[4*Ln+3],!1)).length&&P.push($[0],$[1]);if(P.length>2){for(var sn=[P[0],P[1]],bn=Math.pow(sn[0]-c,2)+Math.pow(sn[1]-h,2),zn=1;zn<P.length/2;zn++){var jn=Math.pow(P[2*zn]-c,2)+Math.pow(P[2*zn+1]-h,2);jn<=bn&&(sn[0]=P[2*zn],sn[1]=P[2*zn+1],bn=jn)}return sn}return P}(ve,Ee,this.points,$,Z,he,ge)},checkPoint:function($,Z,he,ge,ve,Ee,Be){return function(c,h,m,_,C,A,E){for(var F=new Array(m.length),P=A/2,$=E/2,Z=Xr(A,E),he=Z*Z,ge=0;ge<m.length/4;ge++){var Ee,ve;ve=0===ge?m.length-2:4*ge-2,Ee=4*ge+2;var Be=_+P*m[4*ge],Ue=C+$*m[4*ge+1],tt=Z/Math.tan(Math.acos(-m[ve]*m[Ee]-m[ve+1]*m[Ee+1])/2),wt=Be-tt*m[ve],Ut=Ue-tt*m[ve+1],Gt=Be+tt*m[Ee],xt=Ue+tt*m[Ee+1];F[4*ge]=wt,F[4*ge+1]=Ut,F[4*ge+2]=Gt,F[4*ge+3]=xt;var Wt=m[ve+1],Dt=-m[ve];Wt*m[Ee]+Dt*m[Ee+1]<0&&(Wt*=-1,Dt*=-1);var lt=Ut+Dt*Z;if(Math.pow(wt+Wt*Z-c,2)+Math.pow(lt-h,2)<=he)return!0}return nl(c,h,F)}($,Z,this.points,Ee,Be,ge,ve)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Rr(4,0),draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},intersectLine:function(c,h,m,_,C,A,E){return rd(C,A,c,h,m,_,E)},checkPoint:function(c,h,m,_,C,A,E){var F=Ef(_,C),P=2*F;return!!(Lo(c,h,this.points,A,E,_,C-P,[0,-1],m)||Lo(c,h,this.points,A,E,_-P,C,[0,-1],m)||Al(c,h,P,P,A-_/2+F,E-C/2+F,m)||Al(c,h,P,P,A+_/2-F,E-C/2+F,m)||Al(c,h,P,P,A+_/2-F,E+C/2-F,m)||Al(c,h,P,P,A-_/2+F,E+C/2-F,m))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Rr(4,0),draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},generateCutTrianglePts:function(c,h,m,_){var C=this.cornerLength,A=h/2,E=c/2,F=m-E,P=m+E,$=_-A,Z=_+A;return{topLeft:[F,$+C,F+C,$,F+C,$+C],topRight:[P-C,$,P,$+C,P-C,$+C],bottomRight:[P,Z-C,P-C,Z,P-C,Z-C],bottomLeft:[F+C,Z,F,Z-C,F+C,Z-C]}},intersectLine:function(c,h,m,_,C,A,E){var F=this.generateCutTrianglePts(m+2*E,_+2*E,c,h),P=[].concat.apply([],[F.topLeft.splice(0,4),F.topRight.splice(0,4),F.bottomRight.splice(0,4),F.bottomLeft.splice(0,4)]);return ku(C,A,P,c,h)},checkPoint:function(c,h,m,_,C,A,E){if(Lo(c,h,this.points,A,E,_,C-2*this.cornerLength,[0,-1],m)||Lo(c,h,this.points,A,E,_-2*this.cornerLength,C,[0,-1],m))return!0;var F=this.generateCutTrianglePts(_,C,A,E);return nl(c,h,F.topLeft)||nl(c,h,F.topRight)||nl(c,h,F.bottomRight)||nl(c,h,F.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Rr(4,0),draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},intersectLine:function(c,h,m,_,C,A,E){var Z=this.generateBarrelBezierPts(m+2*E,_+2*E,c,h),he=function(Ee){var Be=cr({x:Ee[0],y:Ee[1]},{x:Ee[2],y:Ee[3]},{x:Ee[4],y:Ee[5]},.15),Ue=cr({x:Ee[0],y:Ee[1]},{x:Ee[2],y:Ee[3]},{x:Ee[4],y:Ee[5]},.5),st=cr({x:Ee[0],y:Ee[1]},{x:Ee[2],y:Ee[3]},{x:Ee[4],y:Ee[5]},.85);return[Ee[0],Ee[1],Be.x,Be.y,Ue.x,Ue.y,st.x,st.y,Ee[4],Ee[5]]},ge=[].concat(he(Z.topLeft),he(Z.topRight),he(Z.bottomRight),he(Z.bottomLeft));return ku(C,A,ge,c,h)},generateBarrelBezierPts:function(c,h,m,_){var C=h/2,A=c/2,E=m-A,F=m+A,P=_-C,$=_+C,Z=fs(c,h),he=Z.heightOffset,ge=Z.widthOffset,ve=Z.ctrlPtOffsetPct*c,Ee={topLeft:[E,P+he,E+ve,P,E+ge,P],topRight:[F-ge,P,F-ve,P,F,P+he],bottomRight:[F,$-he,F-ve,$,F-ge,$],bottomLeft:[E+ge,$,E+ve,$,E,$-he]};return Ee.topLeft.isTop=!0,Ee.topRight.isTop=!0,Ee.bottomLeft.isBottom=!0,Ee.bottomRight.isBottom=!0,Ee},checkPoint:function(c,h,m,_,C,A,E){var F=fs(_,C),$=F.widthOffset;if(Lo(c,h,this.points,A,E,_,C-2*F.heightOffset,[0,-1],m)||Lo(c,h,this.points,A,E,_-2*$,C,[0,-1],m))return!0;for(var Z=this.generateBarrelBezierPts(_,C,A,E),he=function(xt,Wt,Dt){var Kt=Dt[4],Yt=Dt[2],lt=Dt[0],Zt=Dt[5],Vt=Dt[1],Ln=Math.min(Kt,lt),sn=Math.max(Kt,lt),bn=Math.min(Zt,Vt),zn=Math.max(Zt,Vt);if(Ln<=xt&&xt<=sn&&bn<=Wt&&Wt<=zn){var jn=function(c,h,m){return[c-2*h+m,2*(h-c),c]}(Kt,Yt,lt),pi=function(c,h,m,_){var C=h*h-4*c*(m-=_);if(C<0)return[];var A=Math.sqrt(C),E=2*c;return[(-h+A)/E,(-h-A)/E]}(jn[0],jn[1],jn[2],xt),Vn=pi.filter(function(ci){return 0<=ci&&ci<=1});if(Vn.length>0)return Vn[0]}return null},ge=Object.keys(Z),ve=0;ve<ge.length;ve++){var Be=Z[ge[ve]],Ue=he(c,h,Be);if(null!=Ue){var Ut=Nc(Be[5],Be[3],Be[1],Ue);if(Be.isTop&&Ut<=h||Be.isBottom&&h<=Ut)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Rr(4,0),draw:function(c,h,m,_,C){this.renderer.nodeShapeImpl(this.name,c,h,m,_,C)},intersectLine:function(c,h,m,_,C,A,E){var P=h-(_/2+E),he=Dl(C,A,c,h,c-(m/2+E),P,c+(m/2+E),P,!1);return he.length>0?he:rd(C,A,c,h,m,_,E)},checkPoint:function(c,h,m,_,C,A,E){var F=Ef(_,C),P=2*F;if(Lo(c,h,this.points,A,E,_,C-P,[0,-1],m)||Lo(c,h,this.points,A,E,_-P,C,[0,-1],m))return!0;var $=_/2+2*m,Z=C/2+2*m;return!!(nl(c,h,[A-$,E-Z,A-$,E,A+$,E,A+$,E-Z])||Al(c,h,P,P,A+_/2-F,E+C/2-F,m)||Al(c,h,P,P,A-_/2+F,E+C/2-F,m))}}},registerNodeShapes:function(){var f=this.nodeShapes={},c=this;this.generateEllipse(),this.generatePolygon("triangle",Rr(3,0)),this.generateRoundPolygon("round-triangle",Rr(3,0)),this.generatePolygon("rectangle",Rr(4,0)),f.square=f.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var h=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",h),this.generateRoundPolygon("round-diamond",h),this.generatePolygon("pentagon",Rr(5,0)),this.generateRoundPolygon("round-pentagon",Rr(5,0)),this.generatePolygon("hexagon",Rr(6,0)),this.generateRoundPolygon("round-hexagon",Rr(6,0)),this.generatePolygon("heptagon",Rr(7,0)),this.generateRoundPolygon("round-heptagon",Rr(7,0)),this.generatePolygon("octagon",Rr(8,0)),this.generateRoundPolygon("round-octagon",Rr(8,0));var m=new Array(20),_=Xd(5,0),C=Xd(5,Math.PI/5),A=.5*(3-Math.sqrt(5));A*=1.57;for(var E=0;E<C.length/2;E++)C[2*E]*=A,C[2*E+1]*=A;for(E=0;E<5;E++)m[4*E]=_[2*E],m[4*E+1]=_[2*E+1],m[4*E+2]=C[2*E],m[4*E+3]=C[2*E+1];m=il(m),this.generatePolygon("star",m),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var F=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",F),this.generateRoundPolygon("round-tag",F),f.makePolygon=function(P){var he,Z="polygon-"+P.join("$");return(he=this[Z])?he:c.generatePolygon(Z,P)}}},Sp={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(f){f=f||vi();var c=this;void 0===c.averageRedrawTime&&(c.averageRedrawTime=0),void 0===c.lastRedrawTime&&(c.lastRedrawTime=0),void 0===c.lastDrawTime&&(c.lastDrawTime=0),c.requestedFrame=!0,c.renderOptions=f},beforeRender:function(f,c){if(!this.destroyed){null==c&&dt("Priority is not optional for beforeRender");var h=this.beforeRenderCallbacks;h.push({fn:f,priority:c}),h.sort(function(m,_){return _.priority-m.priority})}}},Wm=function(c,h,m){for(var _=c.beforeRenderCallbacks,C=0;C<_.length;C++)_[C].fn(h,m)};Sp.startRenderLoop=function(){var f=this,c=f.cy;f.renderLoopStarted||(f.renderLoopStarted=!0,fn(function m(_){if(!f.destroyed){if(!c.batching())if(f.requestedFrame&&!f.skipFrame){Wm(f,!0,_);var C=gn();f.render(f.renderOptions);var A=f.lastDrawTime=gn();void 0===f.averageRedrawTime&&(f.averageRedrawTime=A-C),void 0===f.redrawCount&&(f.redrawCount=0),f.redrawCount++,void 0===f.redrawTotalTime&&(f.redrawTotalTime=0);var E=A-C;f.redrawTotalTime+=E,f.lastRedrawTime=E,f.averageRedrawTime=f.averageRedrawTime/2+E/2,f.requestedFrame=!1}else Wm(f,!1,_);f.skipFrame=!1,fn(m)}}))};var sm=function(c){this.init(c)},jl=sm.prototype;jl.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],jl.init=function(f){var c=this;c.options=f,c.cy=f.cy;var h=c.container=f.cy.container();if(fe){var m=fe.document,_=m.head,C="__________cytoscape_stylesheet",A="__________cytoscape_container",E=null!=m.getElementById(C);if(h.className.indexOf(A)<0&&(h.className=(h.className||"")+" "+A),!E){var F=m.createElement("style");F.id=C,F.innerHTML="."+A+" { position: relative; }",_.insertBefore(F,_.children[0])}"static"===fe.getComputedStyle(h).getPropertyValue("position")&&pe("A Cytoscape container has style position:static and so can not use UI extensions properly")}c.selection=[void 0,void 0,void 0,void 0,0],c.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],c.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},c.dragData={possibleDragElements:[]},c.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},c.redraws=0,c.showFps=f.showFps,c.debug=f.debug,c.hideEdgesOnViewport=f.hideEdgesOnViewport,c.textureOnViewport=f.textureOnViewport,c.wheelSensitivity=f.wheelSensitivity,c.motionBlurEnabled=f.motionBlur,c.forcedPixelRatio=Ot(f.pixelRatio)?f.pixelRatio:null,c.motionBlur=f.motionBlur,c.motionBlurOpacity=f.motionBlurOpacity,c.motionBlurTransparency=1-c.motionBlurOpacity,c.motionBlurPxRatio=1,c.mbPxRBlurry=1,c.minMbLowQualFrames=4,c.fullQualityMb=!1,c.clearedForMotionBlur=[],c.desktopTapThreshold=f.desktopTapThreshold,c.desktopTapThreshold2=f.desktopTapThreshold*f.desktopTapThreshold,c.touchTapThreshold=f.touchTapThreshold,c.touchTapThreshold2=f.touchTapThreshold*f.touchTapThreshold,c.tapholdDuration=500,c.bindings=[],c.beforeRenderCallbacks=[],c.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},c.registerNodeShapes(),c.registerArrowShapes(),c.registerCalculationListeners()},jl.notify=function(f,c){var h=this,m=h.cy;if(!this.destroyed){if("init"===f)return void h.load();if("destroy"===f)return void h.destroy();("add"===f||"remove"===f||"move"===f&&m.hasCompoundNodes()||"load"===f||"zorder"===f||"mount"===f)&&h.invalidateCachedZSortedEles(),"viewport"===f&&h.redrawHint("select",!0),("load"===f||"resize"===f||"mount"===f)&&(h.invalidateContainerClientCoordsCache(),h.matchCanvasSize(h.container)),h.redrawHint("eles",!0),h.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},jl.destroy=function(){var f=this;f.destroyed=!0,f.cy.stopAnimationLoop();for(var c=0;c<f.bindings.length;c++){var h=f.bindings[c],_=h.target;(_.off||_.removeEventListener).apply(_,h.args)}if(f.bindings=[],f.beforeRenderCallbacks=[],f.onUpdateEleCalcsFns=[],f.removeObserver&&f.removeObserver.disconnect(),f.styleObserver&&f.styleObserver.disconnect(),f.resizeObserver&&f.resizeObserver.disconnect(),f.labelCalcDiv)try{document.body.removeChild(f.labelCalcDiv)}catch{}},jl.isHeadless=function(){return!1},[ag,zd,pf,Tu,Dh,Sp].forEach(function(f){Zi(jl,f)});var Oa=1e3/60,Wf_setupDequeueing=function(c){return function(){var m=this,_=this.renderer;if(!m.dequeueingSetup){m.dequeueingSetup=!0;var C=R.default(function(){_.redrawHint("eles",!0),_.redrawHint("drag",!0),_.redraw()},c.deqRedrawThreshold);_.beforeRender(function(P,$){var Z=gn(),he=_.averageRedrawTime,ge=_.lastRedrawTime,ve=[],Ee=_.cy.extent(),Be=_.getPixelRatio();for(P||_.flushRenderedStyleQueue();;){var Ue=gn(),st=Ue-Z,tt=Ue-$;if(ge<Oa){if(tt>=c.deqFastCost*(Oa-(P?he:0)))break}else if(P){if(st>=c.deqCost*ge||st>=c.deqAvgCost*he)break}else if(tt>=c.deqNoDrawCost*Oa)break;var Ut=c.deq(m,Be,Ee);if(!(Ut.length>0))break;for(var Gt=0;Gt<Ut.length;Gt++)ve.push(Ut[Gt])}ve.length>0&&(c.onDeqd(m,ve),!P&&c.shouldRedraw(m,ve,Be,Ee)&&C())},(c.priority||je)(m))}}},ug=function(){function f(c){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zl;K(this,f),this.idsByKey=new Bs,this.keyForId=new Bs,this.cachesByLvl=new Bs,this.lvls=[],this.getKey=c,this.doesEleInvalidateKey=h}return ce(f,[{key:"getIdsFor",value:function(h){null==h&&dt("Can not get id list for null key");var m=this.idsByKey,_=this.idsByKey.get(h);return _||(_=new hs,m.set(h,_)),_}},{key:"addIdForKey",value:function(h,m){null!=h&&this.getIdsFor(h).add(m)}},{key:"deleteIdForKey",value:function(h,m){null!=h&&this.getIdsFor(h).delete(m)}},{key:"getNumberOfIdsForKey",value:function(h){return null==h?0:this.getIdsFor(h).size}},{key:"updateKeyMappingFor",value:function(h){var m=h.id(),_=this.keyForId.get(m),C=this.getKey(h);this.deleteIdForKey(_,m),this.addIdForKey(C,m),this.keyForId.set(m,C)}},{key:"deleteKeyMappingFor",value:function(h){var m=h.id(),_=this.keyForId.get(m);this.deleteIdForKey(_,m),this.keyForId.delete(m)}},{key:"keyHasChangedFor",value:function(h){var m=h.id();return this.keyForId.get(m)!==this.getKey(h)}},{key:"isInvalid",value:function(h){return this.keyHasChangedFor(h)||this.doesEleInvalidateKey(h)}},{key:"getCachesAt",value:function(h){var m=this.cachesByLvl,_=this.lvls,C=m.get(h);return C||(C=new Bs,m.set(h,C),_.push(h)),C}},{key:"getCache",value:function(h,m){return this.getCachesAt(m).get(h)}},{key:"get",value:function(h,m){var _=this.getKey(h),C=this.getCache(_,m);return null!=C&&this.updateKeyMappingFor(h),C}},{key:"getForCachedKey",value:function(h,m){var _=this.keyForId.get(h.id());return this.getCache(_,m)}},{key:"hasCache",value:function(h,m){return this.getCachesAt(m).has(h)}},{key:"has",value:function(h,m){var _=this.getKey(h);return this.hasCache(_,m)}},{key:"setCache",value:function(h,m,_){_.key=h,this.getCachesAt(m).set(h,_)}},{key:"set",value:function(h,m,_){var C=this.getKey(h);this.setCache(C,m,_),this.updateKeyMappingFor(h)}},{key:"deleteCache",value:function(h,m){this.getCachesAt(m).delete(h)}},{key:"delete",value:function(h,m){var _=this.getKey(h);this.deleteCache(_,m)}},{key:"invalidateKey",value:function(h){var m=this;this.lvls.forEach(function(_){return m.deleteCache(h,_)})}},{key:"invalidate",value:function(h){var m=h.id(),_=this.keyForId.get(m);this.deleteKeyMappingFor(h);var C=this.doesEleInvalidateKey(h);return C&&this.invalidateKey(_),C||0===this.getNumberOfIdsForKey(_)}}]),f}(),am={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},mb=mi({getKey:null,doesEleInvalidateKey:zl,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:sa,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ep=function(c,h){var m=this;m.renderer=c,m.onDequeues=[];var _=mb(h);Zi(m,_),m.lookup=new ug(_.getKey,_.doesEleInvalidateKey),m.setupDequeueing()},Fl=Ep.prototype;Fl.reasons=am,Fl.getTextureQueue=function(f){var c=this;return c.eleImgCaches=c.eleImgCaches||{},c.eleImgCaches[f]=c.eleImgCaches[f]||[]},Fl.getRetiredTextureQueue=function(f){var h=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return h[f]=h[f]||[]},Fl.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new q.default(function(h,m){return m.reqs-h.reqs})},Fl.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},Fl.getElement=function(f,c,h,m,_){var C=this,A=this.renderer,E=A.cy.zoom(),F=this.lookup;if(!c||0===c.w||0===c.h||isNaN(c.w)||isNaN(c.h)||!f.visible()||f.removed()||!C.allowEdgeTxrCaching&&f.isEdge()||!C.allowParentTxrCaching&&f.isParent())return null;if(null==m&&(m=Math.ceil(_v(E*h))),m<-4)m=-4;else if(E>=7.99||m>3)return null;var P=Math.pow(2,m),$=c.h*P,Z=c.w*P,he=A.eleTextBiggerThanMin(f,P);if(!this.isVisible(f,he))return null;var ve,ge=F.get(f,m);if(ge&&ge.invalidated&&(ge.invalidated=!1,ge.texture.invalidatedWidth-=ge.width),ge)return ge;if(ve=$<=25?25:$<=50?50:50*Math.ceil($/50),$>1024||Z>1024)return null;var Ee=C.getTextureQueue(ve),Be=Ee[Ee.length-2],Ue=function(){return C.recycleTexture(ve,Z)||C.addTexture(ve,Z)};Be||(Be=Ee[Ee.length-1]),Be||(Be=Ue()),Be.width-Be.usedWidth<Z&&(Be=Ue());for(var Gt,st=function(sn){return sn&&sn.scaledLabelShown===he},tt=_&&_===am.dequeue,wt=_&&_===am.highQuality,Ut=_&&_===am.downscale,xt=m+1;xt<=3;xt++){var Wt=F.get(f,xt);if(Wt){Gt=Wt;break}}var Dt=Gt&&Gt.level===m+1?Gt:null,Kt=function(){Be.context.drawImage(Dt.texture.canvas,Dt.x,0,Dt.width,Dt.height,Be.usedWidth,0,Z,$)};if(Be.context.setTransform(1,0,0,1,0,0),Be.context.clearRect(Be.usedWidth,0,Z,ve),st(Dt))Kt();else if(st(Gt)){if(!wt)return C.queueElement(f,Gt.level-1),Gt;for(var Yt=Gt.level;Yt>m;Yt--)Dt=C.getElement(f,c,h,Yt,am.downscale);Kt()}else{var lt;if(!tt&&!wt&&!Ut)for(var Zt=m-1;Zt>=-4;Zt--){var Vt=F.get(f,Zt);if(Vt){lt=Vt;break}}if(st(lt))return C.queueElement(f,m),lt;Be.context.translate(Be.usedWidth,0),Be.context.scale(P,P),this.drawElement(Be.context,f,c,he,!1),Be.context.scale(1/P,1/P),Be.context.translate(-Be.usedWidth,0)}return ge={x:Be.usedWidth,texture:Be,level:m,scale:P,width:Z,height:$,scaledLabelShown:he},Be.usedWidth+=Math.ceil(Z+8),Be.eleCaches.push(ge),F.set(f,m,ge),C.checkTextureFullness(Be),ge},Fl.invalidateElements=function(f){for(var c=0;c<f.length;c++)this.invalidateElement(f[c])},Fl.invalidateElement=function(f){var c=this,h=c.lookup,m=[];if(h.isInvalid(f)){for(var C=-4;C<=3;C++){var A=h.getForCachedKey(f,C);A&&m.push(A)}if(h.invalidate(f))for(var F=0;F<m.length;F++){var P=m[F],$=P.texture;$.invalidatedWidth+=P.width,P.invalidated=!0,c.checkTextureUtility($)}c.removeFromQueue(f)}},Fl.checkTextureUtility=function(f){f.invalidatedWidth>=.2*f.width&&this.retireTexture(f)},Fl.checkTextureFullness=function(f){var h=this.getTextureQueue(f.height);f.usedWidth/f.width>.8&&f.fullnessChecks>=10?xi(h,f):f.fullnessChecks++},Fl.retireTexture=function(f){var h=f.height,m=this.getTextureQueue(h),_=this.lookup;xi(m,f),f.retired=!0;for(var C=f.eleCaches,A=0;A<C.length;A++){var E=C[A];_.deleteCache(E.key,E.level)}Dr(C),this.getRetiredTextureQueue(h).push(f)},Fl.addTexture=function(f,c){var _={};return this.getTextureQueue(f).push(_),_.eleCaches=[],_.height=f,_.width=Math.max(1024,c),_.usedWidth=0,_.invalidatedWidth=0,_.fullnessChecks=0,_.canvas=this.renderer.makeOffscreenCanvas(_.width,_.height),_.context=_.canvas.getContext("2d"),_},Fl.recycleTexture=function(f,c){for(var m=this.getTextureQueue(f),_=this.getRetiredTextureQueue(f),C=0;C<_.length;C++){var A=_[C];if(A.width>=c)return A.retired=!1,A.usedWidth=0,A.invalidatedWidth=0,A.fullnessChecks=0,Dr(A.eleCaches),A.context.setTransform(1,0,0,1,0,0),A.context.clearRect(0,0,A.width,A.height),xi(_,A),m.push(A),A}},Fl.queueElement=function(f,c){var m=this.getElementQueue(),_=this.getElementKeyToQueue(),C=this.getKey(f),A=_[C];if(A)A.level=Math.max(A.level,c),A.eles.merge(f),A.reqs++,m.updateItem(A);else{var E={eles:f.spawn().merge(f),level:c,reqs:1,key:C};m.push(E),_[C]=E}},Fl.dequeue=function(f){for(var c=this,h=c.getElementQueue(),m=c.getElementKeyToQueue(),_=[],C=c.lookup,A=0;A<1&&h.size()>0;A++){var E=h.pop(),F=E.key,P=E.eles[0],$=C.hasCache(P,E.level);if(m[F]=null,!$){_.push(E);var Z=c.getBoundingBox(P);c.getElement(P,Z,f,E.level,am.dequeue)}}return _},Fl.removeFromQueue=function(f){var h=this.getElementQueue(),m=this.getElementKeyToQueue(),_=this.getKey(f),C=m[_];null!=C&&(1===C.eles.length?(C.reqs=ya,h.updateItem(C),h.pop(),m[_]=null):C.eles.unmerge(f))},Fl.onDequeue=function(f){this.onDequeues.push(f)},Fl.offDequeue=function(f){xi(this.onDequeues,f)},Fl.setupDequeueing=Wf_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,h,m){return c.dequeue(h,m)},onDeqd:function(c,h){for(var m=0;m<c.onDequeues.length;m++)(0,c.onDequeues[m])(h)},shouldRedraw:function(c,h,m,_){for(var C=0;C<h.length;C++)for(var A=h[C].eles,E=0;E<A.length;E++){var F=A[E].boundingBox();if(Im(F,_))return!0}return!1},priority:function(c){return c.renderer.beforeRenderPriorities.eleTxrDeq}});var za=function(c){var h=this,m=h.renderer=c,_=m.cy;h.layersByLevel={},h.firstGet=!0,h.lastInvalidationTime=gn()-500,h.skipping=!1,h.eleTxrDeqs=_.collection(),h.scheduleElementRefinement=R.default(function(){h.refineElementTextures(h.eleTxrDeqs),h.eleTxrDeqs.unmerge(h.eleTxrDeqs)},50),m.beforeRender(function(A,E){h.skipping=E-h.lastInvalidationTime<=250},m.beforeRenderPriorities.lyrTxrSkip),h.layersQueue=new q.default(function(E,F){return F.reqs-E.reqs}),h.setupDequeueing()},Ka=za.prototype,zv=0,dh=Math.pow(2,53)-1;Ka.makeLayer=function(f,c){var h=Math.pow(2,c),m=Math.ceil(f.w*h),_=Math.ceil(f.h*h),C=this.renderer.makeOffscreenCanvas(m,_),A={id:zv=++zv%dh,bb:f,level:c,width:m,height:_,canvas:C,context:C.getContext("2d"),eles:[],elesQueue:[],reqs:0},E=A.context,F=-A.bb.x1,P=-A.bb.y1;return E.scale(h,h),E.translate(F,P),A},Ka.getLayers=function(f,c,h){var m=this,A=m.renderer.cy.zoom(),E=m.firstGet;if(m.firstGet=!1,null==h)if((h=Math.ceil(_v(A*c)))<-4)h=-4;else if(A>=3.99||h>2)return null;m.validateLayersElesOrdering(h,f);var Z,ge,F=m.layersByLevel,P=Math.pow(2,h),$=F[h]=F[h]||[];if(m.levelIsComplete(h,f))return $;!function(){var Kt=function(Ln){if(m.validateLayersElesOrdering(Ln,f),m.levelIsComplete(Ln,f))return ge=F[Ln],!0},Yt=function(Ln){if(!ge)for(var sn=h+Ln;-4<=sn&&sn<=2&&!Kt(sn);sn+=Ln);};Yt(1),Yt(-1);for(var lt=$.length-1;lt>=0;lt--){var Zt=$[lt];Zt.invalid&&xi($,Zt)}}();var Be=function(Kt){var Yt=(Kt=Kt||{}).after;if(function(){if(!Z){Z=Jc();for(var Kt=0;Kt<f.length;Kt++)tl(Z,f[Kt].boundingBox())}}(),Z.w*P*(Z.h*P)>16e6)return null;var Zt=m.makeLayer(Z,h);if(null!=Yt){var Vt=$.indexOf(Yt)+1;$.splice(Vt,0,Zt)}else(void 0===Kt.insert||Kt.insert)&&$.unshift(Zt);return Zt};if(m.skipping&&!E)return null;for(var Ue=null,st=f.length/1,tt=!E,wt=0;wt<f.length;wt++){var Ut=f[wt],Gt=Ut._private.rscratch,xt=Gt.imgLayerCaches=Gt.imgLayerCaches||{},Wt=xt[h];if(Wt)Ue=Wt;else{if((!Ue||Ue.eles.length>=st||!Cv(Ue.bb,Ut.boundingBox()))&&!(Ue=Be({insert:!0,after:Ue})))return null;ge||tt?m.queueLayer(Ue,Ut):m.drawEleInLayer(Ue,Ut,h,c),Ue.eles.push(Ut),xt[h]=Ue}}return ge||(tt?null:$)},Ka.getEleLevelForLayerLevel=function(f,c){return f},Ka.drawEleInLayer=function(f,c,h,m){var C=this.renderer,A=f.context,E=c.boundingBox();0===E.w||0===E.h||!c.visible()||(h=this.getEleLevelForLayerLevel(h,m),C.setImgSmoothing(A,!1),C.drawCachedElement(A,c,null,null,h,!0),C.setImgSmoothing(A,!0))},Ka.levelIsComplete=function(f,c){var m=this.layersByLevel[f];if(!m||0===m.length)return!1;for(var _=0,C=0;C<m.length;C++){var A=m[C];if(A.reqs>0||A.invalid)return!1;_+=A.eles.length}return _===c.length},Ka.validateLayersElesOrdering=function(f,c){var h=this.layersByLevel[f];if(h)for(var m=0;m<h.length;m++){for(var _=h[m],C=-1,A=0;A<c.length;A++)if(_.eles[0]===c[A]){C=A;break}if(C<0)this.invalidateLayer(_);else{var E=C;for(A=0;A<_.eles.length;A++)if(_.eles[A]!==c[E+A]){this.invalidateLayer(_);break}}}},Ka.updateElementsInLayers=function(f,c){for(var m=Ct(f[0]),_=0;_<f.length;_++)for(var C=m?null:f[_],A=m?f[_]:f[_].ele,E=A._private.rscratch,F=E.imgLayerCaches=E.imgLayerCaches||{},P=-4;P<=2;P++){var $=F[P];!$||C&&this.getEleLevelForLayerLevel($.level)!==C.level||c($,A,C)}},Ka.haveLayers=function(){for(var c=!1,h=-4;h<=2;h++){var m=this.layersByLevel[h];if(m&&m.length>0){c=!0;break}}return c},Ka.invalidateElements=function(f){var c=this;0!==f.length&&(c.lastInvalidationTime=gn(),0!==f.length&&c.haveLayers()&&c.updateElementsInLayers(f,function(m,_,C){c.invalidateLayer(m)}))},Ka.invalidateLayer=function(f){if(this.lastInvalidationTime=gn(),!f.invalid){var c=f.level,h=f.eles;xi(this.layersByLevel[c],f),f.elesQueue=[],f.invalid=!0,f.replacement&&(f.replacement.invalid=!0);for(var _=0;_<h.length;_++){var C=h[_]._private.rscratch.imgLayerCaches;C&&(C[c]=null)}}},Ka.refineElementTextures=function(f){var c=this;c.updateElementsInLayers(f,function(m,_,C){var A=m.replacement;if(A||((A=m.replacement=c.makeLayer(m.bb,m.level)).replaces=m,A.eles=m.eles),!A.reqs)for(var E=0;E<A.eles.length;E++)c.queueLayer(A,A.eles[E])})},Ka.enqueueElementRefinement=function(f){this.eleTxrDeqs.merge(f),this.scheduleElementRefinement()},Ka.queueLayer=function(f,c){var m=this.layersQueue,_=f.elesQueue,C=_.hasId=_.hasId||{};if(!f.replacement){if(c){if(C[c.id()])return;_.push(c),C[c.id()]=!0}f.reqs?(f.reqs++,m.updateItem(f)):(f.reqs=1,m.push(f))}},Ka.dequeue=function(f){for(var c=this,h=c.layersQueue,m=[],_=0;_<1&&0!==h.size();){var C=h.peek();if(C.replacement)h.pop();else if(C.replaces&&C!==C.replaces.replacement)h.pop();else if(C.invalid)h.pop();else{var A=C.elesQueue.shift();A&&(c.drawEleInLayer(C,A,C.level,f),_++),0===m.length&&m.push(!0),0===C.elesQueue.length&&(h.pop(),C.reqs=0,C.replaces&&c.applyLayerReplacement(C),c.requestRedraw())}}return m},Ka.applyLayerReplacement=function(f){var h=this.layersByLevel[f.level],m=f.replaces,_=h.indexOf(m);if(!(_<0||m.invalid)){h[_]=f;for(var C=0;C<f.eles.length;C++){var A=f.eles[C]._private,E=A.imgLayerCaches=A.imgLayerCaches||{};E&&(E[f.level]=f)}this.requestRedraw()}},Ka.requestRedraw=R.default(function(){var f=this.renderer;f.redrawHint("eles",!0),f.redrawHint("drag",!0),f.redraw()},100),Ka.setupDequeueing=Wf_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,h){return c.dequeue(h)},onDeqd:je,shouldRedraw:sa,priority:function(c){return c.renderer.beforeRenderPriorities.lyrTxrDeq}});var qy,Vv={};function Z_(f,c){for(var h=0;h<c.length;h++){var m=c[h];f.lineTo(m.x,m.y)}}function Xm(f,c,h){for(var m,_=0;_<c.length;_++){var C=c[_];0===_&&(m=C),f.lineTo(C.x,C.y)}f.quadraticCurveTo(h.x,h.y,m.x,m.y)}function Xy(f,c,h){f.beginPath&&f.beginPath();for(var m=c,_=0;_<m.length;_++)f.lineTo((C=m[_]).x,C.y);var A=h,E=h[0];for(f.moveTo(E.x,E.y),_=1;_<A.length;_++){var C;f.lineTo((C=A[_]).x,C.y)}f.closePath&&f.closePath()}function Q_(f,c,h,m,_){f.beginPath&&f.beginPath(),f.arc(h,m,_,0,2*Math.PI,!1);var C=c,A=C[0];f.moveTo(A.x,A.y);for(var E=0;E<C.length;E++){var F=C[E];f.lineTo(F.x,F.y)}f.closePath&&f.closePath()}function yb(f,c,h,m){f.arc(c,h,m,0,2*Math.PI,!1)}Vv.arrowShapeImpl=function(f){return(qy||(qy={polygon:Z_,"triangle-backcurve":Xm,"triangle-tee":Xy,"circle-triangle":Q_,"triangle-cross":Xy,circle:yb}))[f]};var mf={drawElement:function(f,c,h,m,_,C){c.isNode()?this.drawNode(f,c,h,m,_,C):this.drawEdge(f,c,h,m,_,C)},drawElementOverlay:function(f,c){c.isNode()?this.drawNodeOverlay(f,c):this.drawEdgeOverlay(f,c)},drawElementUnderlay:function(f,c){c.isNode()?this.drawNodeUnderlay(f,c):this.drawEdgeUnderlay(f,c)},drawCachedElementPortion:function(f,c,h,m,_,C,A,E){var F=this,P=h.getBoundingBox(c);if(0!==P.w&&0!==P.h){var $=h.getElement(c,P,m,_,C);if(null!=$){var Z=E(F,c);if(0===Z)return;var Ue,st,tt,wt,Ut,Wt,he=A(F,c),ge=P.x1,ve=P.y1,Ee=P.w,Be=P.h;if(0!==he){var Gt=h.getRotationPoint(c);f.translate(tt=Gt.x,wt=Gt.y),f.rotate(he),(Ut=F.getImgSmoothing(f))||F.setImgSmoothing(f,!0);var xt=h.getRotationOffset(c);Ue=xt.x,st=xt.y}else Ue=ge,st=ve;1!==Z&&(f.globalAlpha=(Wt=f.globalAlpha)*Z),f.drawImage($.texture.canvas,$.x,0,$.width,$.height,Ue,st,Ee,Be),1!==Z&&(f.globalAlpha=Wt),0!==he&&(f.rotate(-he),f.translate(-tt,-wt),Ut||F.setImgSmoothing(f,!1))}else h.drawElement(f,c)}}},lm=function(){return 0},Uv=function(c,h){return c.getTextAngle(h,null)},Yy=function(c,h){return c.getTextAngle(h,"source")},Ky=function(c,h){return c.getTextAngle(h,"target")},a=function(c,h){return h.effectiveOpacity()},d=function(c,h){return h.pstyle("text-opacity").pfValue*h.effectiveOpacity()};mf.drawCachedElement=function(f,c,h,m,_,C){var A=this,E=A.data,F=E.eleTxrCache,P=E.lblTxrCache,$=E.slbTxrCache,Z=E.tlbTxrCache,he=c.boundingBox(),ge=!0===C?F.reasons.highQuality:null;if(0!==he.w&&0!==he.h&&c.visible()&&(!m||Im(he,m))){var ve=c.isEdge(),Ee=c.element()._private.rscratch.badLine;A.drawElementUnderlay(f,c),A.drawCachedElementPortion(f,c,F,h,_,ge,lm,a),(!ve||!Ee)&&A.drawCachedElementPortion(f,c,P,h,_,ge,Uv,d),ve&&!Ee&&(A.drawCachedElementPortion(f,c,$,h,_,ge,Yy,d),A.drawCachedElementPortion(f,c,Z,h,_,ge,Ky,d)),A.drawElementOverlay(f,c)}},mf.drawElements=function(f,c){for(var m=0;m<c.length;m++)this.drawElement(f,c[m])},mf.drawCachedElements=function(f,c,h,m){for(var C=0;C<c.length;C++)this.drawCachedElement(f,c[C],h,m)},mf.drawCachedNodes=function(f,c,h,m){for(var C=0;C<c.length;C++){var A=c[C];!A.isNode()||this.drawCachedElement(f,A,h,m)}},mf.drawLayeredElements=function(f,c,h,m){var C=this.data.lyrTxrCache.getLayers(c,h);if(C)for(var A=0;A<C.length;A++){var E=C[A],F=E.bb;0===F.w||0===F.h||f.drawImage(E.canvas,F.x1,F.y1,F.w,F.h)}else this.drawCachedElements(f,c,h,m)};var g={drawEdge:function(f,c,h){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=this,E=c._private.rscratch;if((!C||c.visible())&&!E.badLine&&null!=E.allpts&&!isNaN(E.allpts[0])){var F;h&&f.translate(-(F=h).x1,-F.y1);var P=C?c.pstyle("opacity").value:1,$=C?c.pstyle("line-opacity").value:1,Z=c.pstyle("curve-style").value,he=c.pstyle("line-style").value,ge=c.pstyle("width").pfValue,ve=c.pstyle("line-cap").value,Ee=P*$,Be=P*$,Ue=function(){var lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee;"straight-triangle"===Z?(A.eleStrokeStyle(f,c,lt),A.drawEdgeTrianglePath(c,f,E.allpts)):(f.lineWidth=ge,f.lineCap=ve,A.eleStrokeStyle(f,c,lt),A.drawEdgePath(c,f,E.allpts,he),f.lineCap="butt")},st=function(){!_||A.drawEdgeOverlay(f,c)},tt=function(){!_||A.drawEdgeUnderlay(f,c)},wt=function(){var lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be;A.drawArrowheads(f,c,lt)},Ut=function(){A.drawElementText(f,c,null,m)};f.lineJoin="round";var Gt="yes"===c.pstyle("ghost").value;if(Gt){var xt=c.pstyle("ghost-offset-x").pfValue,Wt=c.pstyle("ghost-offset-y").pfValue,Dt=c.pstyle("ghost-opacity").value,Kt=Ee*Dt;f.translate(xt,Wt),Ue(Kt),wt(Kt),f.translate(-xt,-Wt)}tt(),Ue(),wt(),st(),Ut(),h&&f.translate(F.x1,F.y1)}}},y=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(h,m){if(m.visible()){var _=m.pstyle("".concat(c,"-opacity")).value;if(0!==_){var C=this,A=C.usePaths(),E=m._private.rscratch,P=2*m.pstyle("".concat(c,"-padding")).pfValue,$=m.pstyle("".concat(c,"-color")).value;h.lineWidth=P,h.lineCap="self"!==E.edgeType||A?"round":"butt",C.colorStrokeStyle(h,$[0],$[1],$[2],_),C.drawEdgePath(m,h,E.allpts,"solid")}}}};g.drawEdgeOverlay=y("overlay"),g.drawEdgeUnderlay=y("underlay"),g.drawEdgePath=function(f,c,h,m){var A,_=f._private.rscratch,C=c,E=!1,F=this.usePaths(),P=f.pstyle("line-dash-pattern").pfValue,$=f.pstyle("line-dash-offset").pfValue;if(F){var Z=h.join("$");_.pathCacheKey&&_.pathCacheKey===Z?(A=c=_.pathCache,E=!0):(A=c=new Path2D,_.pathCacheKey=Z,_.pathCache=A)}if(C.setLineDash)switch(m){case"dotted":C.setLineDash([1,1]);break;case"dashed":C.setLineDash(P),C.lineDashOffset=$;break;case"solid":C.setLineDash([])}if(!E&&!_.badLine)switch(c.beginPath&&c.beginPath(),c.moveTo(h[0],h[1]),_.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var ge=2;ge+3<h.length;ge+=4)c.quadraticCurveTo(h[ge],h[ge+1],h[ge+2],h[ge+3]);break;case"straight":case"segments":case"haystack":for(var ve=2;ve+1<h.length;ve+=2)c.lineTo(h[ve],h[ve+1])}c=C,F?c.stroke(A):c.stroke(),c.setLineDash&&c.setLineDash([])},g.drawEdgeTrianglePath=function(f,c,h){c.fillStyle=c.strokeStyle;for(var m=f.pstyle("width").pfValue,_=0;_+1<h.length;_+=2){var C=[h[_+2]-h[_],h[_+3]-h[_+1]],A=Math.sqrt(C[0]*C[0]+C[1]*C[1]),E=[C[1]/A,-C[0]/A],F=[E[0]*m/2,E[1]*m/2];c.beginPath(),c.moveTo(h[_]-F[0],h[_+1]-F[1]),c.lineTo(h[_]+F[0],h[_+1]+F[1]),c.lineTo(h[_+2],h[_+3]),c.closePath(),c.fill()}},g.drawArrowheads=function(f,c,h){var m=c._private.rscratch,_="haystack"===m.edgeType;_||this.drawArrowhead(f,c,"source",m.arrowStartX,m.arrowStartY,m.srcArrowAngle,h),this.drawArrowhead(f,c,"mid-target",m.midX,m.midY,m.midtgtArrowAngle,h),this.drawArrowhead(f,c,"mid-source",m.midX,m.midY,m.midsrcArrowAngle,h),_||this.drawArrowhead(f,c,"target",m.arrowEndX,m.arrowEndY,m.tgtArrowAngle,h)},g.drawArrowhead=function(f,c,h,m,_,C,A){if(!(isNaN(m)||null==m||isNaN(_)||null==_||isNaN(C)||null==C)){var E=this,F=c.pstyle(h+"-arrow-shape").value;if("none"!==F){var P="hollow"===c.pstyle(h+"-arrow-fill").value?"both":"filled",$=c.pstyle(h+"-arrow-fill").value,Z=c.pstyle("width").pfValue,he=c.pstyle("opacity").value;void 0===A&&(A=he);var ge=f.globalCompositeOperation;(1!==A||"hollow"===$)&&(f.globalCompositeOperation="destination-out",E.colorFillStyle(f,255,255,255,1),E.colorStrokeStyle(f,255,255,255,1),E.drawArrowShape(c,f,P,Z,F,m,_,C),f.globalCompositeOperation=ge);var ve=c.pstyle(h+"-arrow-color").value;E.colorFillStyle(f,ve[0],ve[1],ve[2],A),E.colorStrokeStyle(f,ve[0],ve[1],ve[2],A),E.drawArrowShape(c,f,$,Z,F,m,_,C)}}},g.drawArrowShape=function(f,c,h,m,_,C,A,E){var Z,F=this,P=this.usePaths()&&"triangle-cross"!==_,$=!1,he=c,ge={x:C,y:A},ve=f.pstyle("arrow-scale").value,Ee=this.getArrowWidth(m,ve),Be=F.arrowShapes[_];if(P){var Ue=F.arrowPathCache=F.arrowPathCache||[],st=xs(_),tt=Ue[st];null!=tt?(Z=c=tt,$=!0):(Z=c=new Path2D,Ue[st]=Z)}$||(c.beginPath&&c.beginPath(),P?Be.draw(c,1,0,{x:0,y:0},1):Be.draw(c,Ee,E,ge,m),c.closePath&&c.closePath()),c=he,P&&(c.translate(C,A),c.rotate(E),c.scale(Ee,Ee)),("filled"===h||"both"===h)&&(P?c.fill(Z):c.fill()),("hollow"===h||"both"===h)&&(c.lineWidth=(Be.matchEdgeWidth?m:1)/(P?Ee:1),c.lineJoin="miter",P?c.stroke(Z):c.stroke()),P&&(c.scale(1/Ee,1/Ee),c.rotate(-E),c.translate(-C,-A))};var x={safeDrawImage:function(f,c,h,m,_,C,A,E,F,P){if(!(_<=0||C<=0||F<=0||P<=0))try{f.drawImage(c,h,m,_,C,A,E,F,P)}catch($){pe($)}},drawInscribedImage:function(f,c,h,m,_){var C=this,A=h.position(),E=A.x,F=A.y,P=h.cy().style(),$=P.getIndexedStyle.bind(P),Z=$(h,"background-fit","value",m),he=$(h,"background-repeat","value",m),ge=h.width(),ve=h.height(),Ee=2*h.padding(),Be=ge+("inner"===$(h,"background-width-relative-to","value",m)?0:Ee),Ue=ve+("inner"===$(h,"background-height-relative-to","value",m)?0:Ee),st=h._private.rscratch,wt="node"===$(h,"background-clip","value",m),Ut=$(h,"background-image-opacity","value",m)*_,Gt=$(h,"background-image-smoothing","value",m),xt=c.width||c.cachedW,Wt=c.height||c.cachedH;(null==xt||null==Wt)&&(document.body.appendChild(c),xt=c.cachedW=c.width||c.offsetWidth,Wt=c.cachedH=c.height||c.offsetHeight,document.body.removeChild(c));var Dt=xt,Kt=Wt;if("auto"!==$(h,"background-width","value",m)&&(Dt="%"===$(h,"background-width","units",m)?$(h,"background-width","pfValue",m)*Be:$(h,"background-width","pfValue",m)),"auto"!==$(h,"background-height","value",m)&&(Kt="%"===$(h,"background-height","units",m)?$(h,"background-height","pfValue",m)*Ue:$(h,"background-height","pfValue",m)),0!==Dt&&0!==Kt){if("contain"===Z)Dt*=Yt=Math.min(Be/Dt,Ue/Kt),Kt*=Yt;else if("cover"===Z){var Yt;Dt*=Yt=Math.max(Be/Dt,Ue/Kt),Kt*=Yt}var lt=E-Be/2,Zt=$(h,"background-position-x","units",m),Vt=$(h,"background-position-x","pfValue",m);lt+="%"===Zt?(Be-Dt)*Vt:Vt;var Ln=$(h,"background-offset-x","units",m),sn=$(h,"background-offset-x","pfValue",m);lt+="%"===Ln?(Be-Dt)*sn:sn;var bn=F-Ue/2,zn=$(h,"background-position-y","units",m),jn=$(h,"background-position-y","pfValue",m);bn+="%"===zn?(Ue-Kt)*jn:jn;var pi=$(h,"background-offset-y","units",m),Vn=$(h,"background-offset-y","pfValue",m);bn+="%"===pi?(Ue-Kt)*Vn:Vn,st.pathCache&&(lt-=E,bn-=F,E=0,F=0);var ci=f.globalAlpha;f.globalAlpha=Ut;var Ai=C.getImgSmoothing(f),Oi=!1;if("no"===Gt&&Ai?(C.setImgSmoothing(f,!1),Oi=!0):"yes"===Gt&&!Ai&&(C.setImgSmoothing(f,!0),Oi=!0),"no-repeat"===he)wt&&(f.save(),st.pathCache?f.clip(st.pathCache):(C.nodeShapes[C.getNodeShape(h)].draw(f,E,F,Be,Ue),f.clip())),C.safeDrawImage(f,c,0,0,xt,Wt,lt,bn,Dt,Kt),wt&&f.restore();else{var Mi=f.createPattern(c,he);f.fillStyle=Mi,C.nodeShapes[C.getNodeShape(h)].draw(f,E,F,Be,Ue),f.translate(lt,bn),f.fill(),f.translate(-lt,-bn)}f.globalAlpha=ci,Oi&&C.setImgSmoothing(f,Ai)}}},M={};function O(f,c,h,m,_){var C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;f.beginPath(),f.moveTo(c+C,h),f.lineTo(c+m-C,h),f.quadraticCurveTo(c+m,h,c+m,h+C),f.lineTo(c+m,h+_-C),f.quadraticCurveTo(c+m,h+_,c+m-C,h+_),f.lineTo(c+C,h+_),f.quadraticCurveTo(c,h+_,c,h+_-C),f.lineTo(c,h+C),f.quadraticCurveTo(c,h,c+C,h),f.closePath(),f.fill()}M.eleTextBiggerThanMin=function(f,c){if(!c){var h=f.cy().zoom(),m=this.getPixelRatio(),_=Math.ceil(_v(h*m));c=Math.pow(2,_)}return!(f.pstyle("font-size").pfValue*c<f.pstyle("min-zoomed-font-size").pfValue)},M.drawElementText=function(f,c,h,m,_){var C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=this;if(null==m){if(C&&!A.eleTextBiggerThanMin(c))return}else if(!1===m)return;if(c.isNode()){var E=c.pstyle("label");if(!E||!E.value)return;var F=A.getLabelJustification(c);f.textAlign=F,f.textBaseline="bottom"}else{var P=c.element()._private.rscratch.badLine,$=c.pstyle("label"),Z=c.pstyle("source-label"),he=c.pstyle("target-label");if(P||(!$||!$.value)&&(!Z||!Z.value)&&(!he||!he.value))return;f.textAlign="center",f.textBaseline="bottom"}var ve,ge=!h;h&&f.translate(-(ve=h).x1,-ve.y1),null==_?(A.drawText(f,c,null,ge,C),c.isEdge()&&(A.drawText(f,c,"source",ge,C),A.drawText(f,c,"target",ge,C))):A.drawText(f,c,_,ge,C),h&&f.translate(ve.x1,ve.y1)},M.getFontCache=function(f){var c;this.fontCaches=this.fontCaches||[];for(var h=0;h<this.fontCaches.length;h++)if((c=this.fontCaches[h]).context===f)return c;return this.fontCaches.push(c={context:f}),c},M.setupTextStyle=function(f,c){var h=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],m=c.pstyle("font-style").strValue,_=c.pstyle("font-size").pfValue+"px",C=c.pstyle("font-family").strValue,A=c.pstyle("font-weight").strValue,E=h?c.effectiveOpacity()*c.pstyle("text-opacity").value:1,F=c.pstyle("text-outline-opacity").value*E,P=c.pstyle("color").value,$=c.pstyle("text-outline-color").value;f.font=m+" "+A+" "+_+" "+C,f.lineJoin="round",this.colorFillStyle(f,P[0],P[1],P[2],E),this.colorStrokeStyle(f,$[0],$[1],$[2],F)},M.getTextAngle=function(f,c){var _=f._private.rscratch,A=f.pstyle((c?c+"-":"")+"text-rotation"),E=gr(_,"labelAngle",c);return"autorotate"===A.strValue?f.isEdge()?E:0:"none"===A.strValue?0:A.pfValue},M.drawText=function(f,c,h){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=c._private,A=C.rscratch,E=_?c.effectiveOpacity():1;if(!_||0!==E&&0!==c.pstyle("text-opacity").value){"main"===h&&(h=null);var $,Z,F=gr(A,"labelX",h),P=gr(A,"labelY",h),he=this.getLabelText(c,h);if(null!=he&&""!==he&&!isNaN(F)&&!isNaN(P)){this.setupTextStyle(f,c,_);var Ut,ge=h?h+"-":"",ve=gr(A,"labelWidth",h),Ee=gr(A,"labelHeight",h),Be=c.pstyle(ge+"text-margin-x").pfValue,Ue=c.pstyle(ge+"text-margin-y").pfValue,st=c.isEdge(),tt=c.pstyle("text-halign").value,wt=c.pstyle("text-valign").value;switch(st&&(tt="center",wt="center"),F+=Be,P+=Ue,0!==(Ut=m?this.getTextAngle(c,h):0)&&(f.translate($=F,Z=P),f.rotate(Ut),F=0,P=0),wt){case"top":break;case"center":P+=Ee/2;break;case"bottom":P+=Ee}var Gt=c.pstyle("text-background-opacity").value,xt=c.pstyle("text-border-opacity").value,Wt=c.pstyle("text-border-width").pfValue,Dt=c.pstyle("text-background-padding").pfValue;if(Gt>0||Wt>0&&xt>0){var Kt=F-Dt;switch(tt){case"left":Kt-=ve;break;case"center":Kt-=ve/2}var Yt=P-Ee-Dt,lt=ve+2*Dt,Zt=Ee+2*Dt;if(Gt>0){var Vt=f.fillStyle,Ln=c.pstyle("text-background-color").value;f.fillStyle="rgba("+Ln[0]+","+Ln[1]+","+Ln[2]+","+Gt*E+")";var sn=c.pstyle("text-background-shape").strValue;0===sn.indexOf("round")?O(f,Kt,Yt,lt,Zt,2):f.fillRect(Kt,Yt,lt,Zt),f.fillStyle=Vt}if(Wt>0&&xt>0){var bn=f.strokeStyle,zn=f.lineWidth,jn=c.pstyle("text-border-color").value,pi=c.pstyle("text-border-style").value;if(f.strokeStyle="rgba("+jn[0]+","+jn[1]+","+jn[2]+","+xt*E+")",f.lineWidth=Wt,f.setLineDash)switch(pi){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"double":f.lineWidth=Wt/4,f.setLineDash([]);break;case"solid":f.setLineDash([])}if(f.strokeRect(Kt,Yt,lt,Zt),"double"===pi){var Vn=Wt/2;f.strokeRect(Kt+Vn,Yt+Vn,lt-2*Vn,Zt-2*Vn)}f.setLineDash&&f.setLineDash([]),f.lineWidth=zn,f.strokeStyle=bn}}var ci=2*c.pstyle("text-outline-width").pfValue;if(ci>0&&(f.lineWidth=ci),"wrap"===c.pstyle("text-wrap").value){var Ai=gr(A,"labelWrapCachedLines",h),Oi=gr(A,"labelLineHeight",h),Mi=ve/2,Si=this.getLabelJustification(c);switch("auto"===Si||("left"===tt?"left"===Si?F+=-ve:"center"===Si&&(F+=-Mi):"center"===tt?"left"===Si?F+=-Mi:"right"===Si&&(F+=Mi):"right"===tt&&("center"===Si?F+=Mi:"right"===Si&&(F+=ve))),wt){case"top":case"center":case"bottom":P-=(Ai.length-1)*Oi}for(var Gn=0;Gn<Ai.length;Gn++)ci>0&&f.strokeText(Ai[Gn],F,P),f.fillText(Ai[Gn],F,P),P+=Oi}else ci>0&&f.strokeText(he,F,P),f.fillText(he,F,P);0!==Ut&&(f.rotate(-Ut),f.translate(-$,-Z))}}};var B={drawNode:function(f,c,h){var E,F,m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=this,P=c._private,$=P.rscratch,Z=c.position();if(Ot(Z.x)&&Ot(Z.y)&&(!C||c.visible())){var ve,Ue,he=C?c.effectiveOpacity():1,ge=A.usePaths(),Ee=!1,Be=c.padding();E=c.width()+2*Be,F=c.height()+2*Be,h&&f.translate(-(Ue=h).x1,-Ue.y1);for(var st=c.pstyle("background-image"),tt=st.value,wt=new Array(tt.length),Ut=new Array(tt.length),Gt=0,xt=0;xt<tt.length;xt++){var Wt=tt[xt],Dt=wt[xt]=null!=Wt&&"none"!==Wt;if(Dt){var Kt=c.cy().style().getIndexedStyle(c,"background-image-crossorigin","value",xt);Gt++,Ut[xt]=A.getCachedImage(Wt,Kt,function(){P.backgroundTimestamp=Date.now(),c.emitAndNotify("background")})}}var Yt=c.pstyle("background-blacken").value,lt=c.pstyle("border-width").pfValue,Zt=c.pstyle("background-opacity").value*he,Vt=c.pstyle("border-color").value,Ln=c.pstyle("border-style").value,sn=c.pstyle("border-opacity").value*he;f.lineJoin="miter";var bn=function(){var kr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt;A.eleFillStyle(f,c,kr)},zn=function(){var kr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;A.colorStrokeStyle(f,Vt[0],Vt[1],Vt[2],kr)},jn=c.pstyle("shape").strValue,pi=c.pstyle("shape-polygon-points").pfValue;if(ge){f.translate(Z.x,Z.y);var Vn=A.nodePathCache=A.nodePathCache||[],ci=xo("polygon"===jn?jn+","+pi.join(","):jn,""+F,""+E),Ai=Vn[ci];null!=Ai?(Ee=!0,$.pathCache=ve=Ai):(ve=new Path2D,Vn[ci]=$.pathCache=ve)}var Oi=function(){if(!Ee){var kr=Z;ge&&(kr={x:0,y:0}),A.nodeShapes[A.getNodeShape(c)].draw(ve||f,kr.x,kr.y,E,F)}ge?f.fill(ve):f.fill()},Mi=function(){for(var kr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,Fr=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],bs=P.backgrounding,oo=0,Cs=0;Cs<Ut.length;Cs++){var ir=c.cy().style().getIndexedStyle(c,"background-image-containment","value",Cs);Fr&&"over"===ir||!Fr&&"inside"===ir?oo++:wt[Cs]&&Ut[Cs].complete&&!Ut[Cs].error&&(oo++,A.drawInscribedImage(f,Ut[Cs],c,Cs,kr))}P.backgrounding=oo!==Gt,bs!==P.backgrounding&&c.updateStyle(!1)},Si=function(){var kr=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Fr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he;A.hasPie(c)&&(A.drawPie(f,c,Fr),kr&&(ge||A.nodeShapes[A.getNodeShape(c)].draw(f,Z.x,Z.y,E,F)))},Gn=function(){var kr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,Fr=(Yt>0?Yt:-Yt)*kr,bs=Yt>0?0:255;0!==Yt&&(A.colorFillStyle(f,bs,bs,bs,Fr),ge?f.fill(ve):f.fill())},_i=function(){if(lt>0){if(f.lineWidth=lt,f.lineCap="butt",f.setLineDash)switch(Ln){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"solid":case"double":f.setLineDash([])}if(ge?f.stroke(ve):f.stroke(),"double"===Ln){f.lineWidth=lt/3;var kr=f.globalCompositeOperation;f.globalCompositeOperation="destination-out",ge?f.stroke(ve):f.stroke(),f.globalCompositeOperation=kr}f.setLineDash&&f.setLineDash([])}},Ni=function(){_&&A.drawNodeOverlay(f,c,Z,E,F)},lr=function(){_&&A.drawNodeUnderlay(f,c,Z,E,F)},wr=function(){A.drawElementText(f,c,null,m)},as="yes"===c.pstyle("ghost").value;if(as){var _s=c.pstyle("ghost-offset-x").pfValue,Mr=c.pstyle("ghost-offset-y").pfValue,br=c.pstyle("ghost-opacity").value,gs=br*he;f.translate(_s,Mr),bn(br*Zt),Oi(),Mi(gs,!0),zn(br*sn),_i(),Si(0!==Yt||0!==lt),Mi(gs,!1),Gn(gs),f.translate(-_s,-Mr)}ge&&f.translate(-Z.x,-Z.y),lr(),ge&&f.translate(Z.x,Z.y),bn(),Oi(),Mi(he,!0),zn(),_i(),Si(0!==Yt||0!==lt),Mi(he,!1),Gn(),ge&&f.translate(-Z.x,-Z.y),wr(),Ni(),h&&f.translate(Ue.x1,Ue.y1)}}},ae=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(h,m,_,C,A){if(m.visible()){var F=m.pstyle("".concat(c,"-padding")).pfValue,P=m.pstyle("".concat(c,"-opacity")).value,$=m.pstyle("".concat(c,"-color")).value,Z=m.pstyle("".concat(c,"-shape")).value;if(P>0){if(_=_||m.position(),null==C||null==A){var he=m.padding();C=m.width()+2*he,A=m.height()+2*he}this.colorFillStyle(h,$[0],$[1],$[2],P),this.nodeShapes[Z].draw(h,_.x,_.y,C+2*F,A+2*F),h.fill()}}}};B.drawNodeOverlay=ae("overlay"),B.drawNodeUnderlay=ae("underlay"),B.hasPie=function(f){return(f=f[0])._private.hasPie},B.drawPie=function(f,c,h,m){c=c[0],m=m||c.position();var _=c.cy().style(),C=c.pstyle("pie-size"),A=m.x,E=m.y,F=c.width(),P=c.height(),$=Math.min(F,P)/2,Z=0;this.usePaths()&&(A=0,E=0),"%"===C.units?$*=C.pfValue:void 0!==C.pfValue&&($=C.pfValue/2);for(var ge=1;ge<=_.pieBackgroundN;ge++){var ve=c.pstyle("pie-"+ge+"-background-size").value,Ee=c.pstyle("pie-"+ge+"-background-color").value,Be=c.pstyle("pie-"+ge+"-background-opacity").value*h,Ue=ve/100;Ue+Z>1&&(Ue=1-Z);var st=1.5*Math.PI+2*Math.PI*Z,wt=st+2*Math.PI*Ue;0===ve||Z>=1||Z+Ue>1||(f.beginPath(),f.moveTo(A,E),f.arc(A,E,$,st,wt),f.closePath(),this.colorFillStyle(f,Ee[0],Ee[1],Ee[2],Be),f.fill(),Z+=Ue)}};for(var re={getPixelRatio:function(){var f=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(f.backingStorePixelRatio||f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1)},paintCache:function(f){for(var m,c=this.paintCaches=this.paintCaches||[],h=!0,_=0;_<c.length;_++)if((m=c[_]).context===f){h=!1;break}return h&&c.push(m={context:f}),m},createGradientStyleFor:function(f,c,h,m,_){var C,A=this.usePaths(),E=h.pstyle(c+"-gradient-stop-colors").value,F=h.pstyle(c+"-gradient-stop-positions").pfValue;if("radial-gradient"===m)if(h.isEdge()){var P=h.sourceEndpoint(),$=h.targetEndpoint(),Z=h.midpoint(),he=Do(P,Z),ge=Do($,Z);C=f.createRadialGradient(Z.x,Z.y,0,Z.x,Z.y,Math.max(he,ge))}else{var ve=A?{x:0,y:0}:h.position(),Ee=h.paddedWidth(),Be=h.paddedHeight();C=f.createRadialGradient(ve.x,ve.y,0,ve.x,ve.y,Math.max(Ee,Be))}else if(h.isEdge()){var Ue=h.sourceEndpoint(),st=h.targetEndpoint();C=f.createLinearGradient(Ue.x,Ue.y,st.x,st.y)}else{var tt=A?{x:0,y:0}:h.position(),Gt=h.paddedWidth()/2,xt=h.paddedHeight()/2;switch(h.pstyle("background-gradient-direction").value){case"to-bottom":C=f.createLinearGradient(tt.x,tt.y-xt,tt.x,tt.y+xt);break;case"to-top":C=f.createLinearGradient(tt.x,tt.y+xt,tt.x,tt.y-xt);break;case"to-left":C=f.createLinearGradient(tt.x+Gt,tt.y,tt.x-Gt,tt.y);break;case"to-right":C=f.createLinearGradient(tt.x-Gt,tt.y,tt.x+Gt,tt.y);break;case"to-bottom-right":case"to-right-bottom":C=f.createLinearGradient(tt.x-Gt,tt.y-xt,tt.x+Gt,tt.y+xt);break;case"to-top-right":case"to-right-top":C=f.createLinearGradient(tt.x-Gt,tt.y+xt,tt.x+Gt,tt.y-xt);break;case"to-bottom-left":case"to-left-bottom":C=f.createLinearGradient(tt.x+Gt,tt.y-xt,tt.x-Gt,tt.y+xt);break;case"to-top-left":case"to-left-top":C=f.createLinearGradient(tt.x+Gt,tt.y+xt,tt.x-Gt,tt.y-xt)}}if(!C)return null;for(var Dt=F.length===E.length,Kt=E.length,Yt=0;Yt<Kt;Yt++)C.addColorStop(Dt?F[Yt]:Yt/(Kt-1),"rgba("+E[Yt][0]+","+E[Yt][1]+","+E[Yt][2]+","+_+")");return C},gradientFillStyle:function(f,c,h,m){var _=this.createGradientStyleFor(f,"background",c,h,m);if(!_)return null;f.fillStyle=_},colorFillStyle:function(f,c,h,m,_){f.fillStyle="rgba("+c+","+h+","+m+","+_+")"},eleFillStyle:function(f,c,h){var m=c.pstyle("background-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientFillStyle(f,c,m,h);else{var _=c.pstyle("background-color").value;this.colorFillStyle(f,_[0],_[1],_[2],h)}},gradientStrokeStyle:function(f,c,h,m){var _=this.createGradientStyleFor(f,"line",c,h,m);if(!_)return null;f.strokeStyle=_},colorStrokeStyle:function(f,c,h,m,_){f.strokeStyle="rgba("+c+","+h+","+m+","+_+")"},eleStrokeStyle:function(f,c,h){var m=c.pstyle("line-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientStrokeStyle(f,c,m,h);else{var _=c.pstyle("line-color").value;this.colorStrokeStyle(f,_[0],_[1],_[2],h)}},matchCanvasSize:function(f){var c=this,h=c.data,m=c.findContainerClientCoords(),_=m[2],C=m[3],A=c.getPixelRatio();(f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_NODE]||f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_DRAG])&&(A=c.motionBlurPxRatio);var $,F=_*A,P=C*A;if(F!==c.canvasWidth||P!==c.canvasHeight){c.fontCaches=null;var Z=h.canvasContainer;Z.style.width=_+"px",Z.style.height=C+"px";for(var he=0;he<c.CANVAS_LAYERS;he++)($=h.canvases[he]).width=F,$.height=P,$.style.width=_+"px",$.style.height=C+"px";for(he=0;he<c.BUFFER_COUNT;he++)($=h.bufferCanvases[he]).width=F,$.height=P,$.style.width=_+"px",$.style.height=C+"px";c.textureMult=1,A<=1&&($=h.bufferCanvases[c.TEXTURE_BUFFER],c.textureMult=2,$.width=F*c.textureMult,$.height=P*c.textureMult),c.canvasWidth=F,c.canvasHeight=P}},renderTo:function(f,c,h,m){this.render({forcedContext:f,forcedZoom:c,forcedPan:h,drawAllLayers:!0,forcedPxRatio:m})},render:function(f){var c=(f=f||vi()).forcedContext,h=f.drawAllLayers,m=f.drawOnlyNodeLayer,_=f.forcedZoom,C=f.forcedPan,A=this,E=void 0===f.forcedPxRatio?this.getPixelRatio():f.forcedPxRatio,F=A.cy,P=A.data,$=P.canvasNeedsRedraw,Z=A.textureOnViewport&&!c&&(A.pinching||A.hoverData.dragging||A.swipePanning||A.data.wheelZooming),he=void 0!==f.motionBlur?f.motionBlur:A.motionBlur,ge=A.motionBlurPxRatio,ve=F.hasCompoundNodes(),Ee=A.hoverData.draggingEles,Ue=he=he&&!c&&A.motionBlurEnabled&&!(A.hoverData.selecting||A.touchData.selecting);c||(A.prevPxRatio!==E&&(A.invalidateContainerClientCoordsCache(),A.matchCanvasSize(A.container),A.redrawHint("eles",!0),A.redrawHint("drag",!0)),A.prevPxRatio=E),!c&&A.motionBlurTimeout&&clearTimeout(A.motionBlurTimeout),he&&(null==A.mbFrames&&(A.mbFrames=0),A.mbFrames++,A.mbFrames<3&&(Ue=!1),A.mbFrames>A.minMbLowQualFrames&&(A.motionBlurPxRatio=A.mbPxRBlurry)),A.clearingMotionBlur&&(A.motionBlurPxRatio=1),A.textureDrawLastFrame&&!Z&&($[A.NODE]=!0,$[A.SELECT_BOX]=!0);var st=F.style(),tt=F.zoom(),wt=void 0!==_?_:tt,Ut=F.pan(),Gt={x:Ut.x,y:Ut.y},xt={zoom:tt,pan:{x:Ut.x,y:Ut.y}},Wt=A.prevViewport;!(void 0===Wt||xt.zoom!==Wt.zoom||xt.pan.x!==Wt.pan.x||xt.pan.y!==Wt.pan.y)&&!(Ee&&!ve)&&(A.motionBlurPxRatio=1),C&&(Gt=C),wt*=E,Gt.x*=E,Gt.y*=E;var Kt=A.getCachedZSortedEles();function Yt(Mr,br,gs,Wi,kr){var Fr=Mr.globalCompositeOperation;Mr.globalCompositeOperation="destination-out",A.colorFillStyle(Mr,255,255,255,A.motionBlurTransparency),Mr.fillRect(br,gs,Wi,kr),Mr.globalCompositeOperation=Fr}function lt(Mr,br){var gs,Wi,kr,Fr;A.clearingMotionBlur||Mr!==P.bufferContexts[A.MOTIONBLUR_BUFFER_NODE]&&Mr!==P.bufferContexts[A.MOTIONBLUR_BUFFER_DRAG]?(gs=Gt,Wi=wt,kr=A.canvasWidth,Fr=A.canvasHeight):(gs={x:Ut.x*ge,y:Ut.y*ge},Wi=tt*ge,kr=A.canvasWidth*ge,Fr=A.canvasHeight*ge),Mr.setTransform(1,0,0,1,0,0),"motionBlur"===br?Yt(Mr,0,0,kr,Fr):!c&&(void 0===br||br)&&Mr.clearRect(0,0,kr,Fr),h||(Mr.translate(gs.x,gs.y),Mr.scale(Wi,Wi)),C&&Mr.translate(C.x,C.y),_&&Mr.scale(_,_)}if(Z||(A.textureDrawLastFrame=!1),Z){if(A.textureDrawLastFrame=!0,!A.textureCache){A.textureCache={},A.textureCache.bb=F.mutableElements().boundingBox(),A.textureCache.texture=A.data.bufferCanvases[A.TEXTURE_BUFFER];var Zt=A.data.bufferContexts[A.TEXTURE_BUFFER];Zt.setTransform(1,0,0,1,0,0),Zt.clearRect(0,0,A.canvasWidth*A.textureMult,A.canvasHeight*A.textureMult),A.render({forcedContext:Zt,drawOnlyNodeLayer:!0,forcedPxRatio:E*A.textureMult}),(xt=A.textureCache.viewport={zoom:F.zoom(),pan:F.pan(),width:A.canvasWidth,height:A.canvasHeight}).mpan={x:(0-xt.pan.x)/xt.zoom,y:(0-xt.pan.y)/xt.zoom}}$[A.DRAG]=!1,$[A.NODE]=!1;var Ln=A.textureCache.texture;xt=A.textureCache.viewport,(Vt=P.contexts[A.NODE]).setTransform(1,0,0,1,0,0),he?Yt(Vt,0,0,xt.width,xt.height):Vt.clearRect(0,0,xt.width,xt.height);var sn=st.core("outside-texture-bg-color").value,bn=st.core("outside-texture-bg-opacity").value;A.colorFillStyle(Vt,sn[0],sn[1],sn[2],bn),Vt.fillRect(0,0,xt.width,xt.height),tt=F.zoom(),lt(Vt,!1),Vt.clearRect(xt.mpan.x,xt.mpan.y,xt.width/xt.zoom/E,xt.height/xt.zoom/E),Vt.drawImage(Ln,xt.mpan.x,xt.mpan.y,xt.width/xt.zoom/E,xt.height/xt.zoom/E)}else A.textureOnViewport&&!c&&(A.textureCache=null);var zn=F.extent(),jn=A.pinching||A.hoverData.dragging||A.swipePanning||A.data.wheelZooming||A.hoverData.draggingEles||A.cy.animated(),pi=A.hideEdgesOnViewport&&jn,Vn=[];if(Vn[A.NODE]=!$[A.NODE]&&he&&!A.clearedForMotionBlur[A.NODE]||A.clearingMotionBlur,Vn[A.NODE]&&(A.clearedForMotionBlur[A.NODE]=!0),Vn[A.DRAG]=!$[A.DRAG]&&he&&!A.clearedForMotionBlur[A.DRAG]||A.clearingMotionBlur,Vn[A.DRAG]&&(A.clearedForMotionBlur[A.DRAG]=!0),$[A.NODE]||h||m||Vn[A.NODE]){var ci=he&&!Vn[A.NODE]&&1!==ge;lt(Vt=c||(ci?A.data.bufferContexts[A.MOTIONBLUR_BUFFER_NODE]:P.contexts[A.NODE]),he&&!ci?"motionBlur":void 0),pi?A.drawCachedNodes(Vt,Kt.nondrag,E,zn):A.drawLayeredElements(Vt,Kt.nondrag,E,zn),A.debug&&A.drawDebugPoints(Vt,Kt.nondrag),!h&&!he&&($[A.NODE]=!1)}if(!m&&($[A.DRAG]||h||Vn[A.DRAG])&&(ci=he&&!Vn[A.DRAG]&&1!==ge,lt(Vt=c||(ci?A.data.bufferContexts[A.MOTIONBLUR_BUFFER_DRAG]:P.contexts[A.DRAG]),he&&!ci?"motionBlur":void 0),pi?A.drawCachedNodes(Vt,Kt.drag,E,zn):A.drawCachedElements(Vt,Kt.drag,E,zn),A.debug&&A.drawDebugPoints(Vt,Kt.drag),!h&&!he&&($[A.DRAG]=!1)),A.showFps||!m&&$[A.SELECT_BOX]&&!h){var Vt;if(lt(Vt=c||P.contexts[A.SELECT_BOX]),1==A.selection[4]&&(A.hoverData.selecting||A.touchData.selecting)){tt=A.cy.zoom();var Oi=st.core("selection-box-border-width").value/tt;Vt.lineWidth=Oi,Vt.fillStyle="rgba("+st.core("selection-box-color").value[0]+","+st.core("selection-box-color").value[1]+","+st.core("selection-box-color").value[2]+","+st.core("selection-box-opacity").value+")",Vt.fillRect(A.selection[0],A.selection[1],A.selection[2]-A.selection[0],A.selection[3]-A.selection[1]),Oi>0&&(Vt.strokeStyle="rgba("+st.core("selection-box-border-color").value[0]+","+st.core("selection-box-border-color").value[1]+","+st.core("selection-box-border-color").value[2]+","+st.core("selection-box-opacity").value+")",Vt.strokeRect(A.selection[0],A.selection[1],A.selection[2]-A.selection[0],A.selection[3]-A.selection[1]))}if(P.bgActivePosistion&&!A.hoverData.selecting){tt=A.cy.zoom();var Mi=P.bgActivePosistion;Vt.fillStyle="rgba("+st.core("active-bg-color").value[0]+","+st.core("active-bg-color").value[1]+","+st.core("active-bg-color").value[2]+","+st.core("active-bg-opacity").value+")",Vt.beginPath(),Vt.arc(Mi.x,Mi.y,st.core("active-bg-size").pfValue/tt,0,2*Math.PI),Vt.fill()}var Si=A.lastRedrawTime;if(A.showFps&&Si){Si=Math.round(Si);var Gn=Math.round(1e3/Si);Vt.setTransform(1,0,0,1,0,0),Vt.fillStyle="rgba(255, 0, 0, 0.75)",Vt.strokeStyle="rgba(255, 0, 0, 0.75)",Vt.lineWidth=1,Vt.fillText("1 frame = "+Si+" ms = "+Gn+" fps",0,20),Vt.strokeRect(0,30,250,20),Vt.fillRect(0,30,250*Math.min(Gn/60,1),20)}h||($[A.SELECT_BOX]=!1)}if(he&&1!==ge){var wr=P.contexts[A.DRAG],as=A.data.bufferCanvases[A.MOTIONBLUR_BUFFER_DRAG],_s=function(br,gs,Wi){br.setTransform(1,0,0,1,0,0),Wi||!Ue?br.clearRect(0,0,A.canvasWidth,A.canvasHeight):Yt(br,0,0,A.canvasWidth,A.canvasHeight),br.drawImage(gs,0,0,A.canvasWidth*ge,A.canvasHeight*ge,0,0,A.canvasWidth,A.canvasHeight)};($[A.NODE]||Vn[A.NODE])&&(_s(P.contexts[A.NODE],A.data.bufferCanvases[A.MOTIONBLUR_BUFFER_NODE],Vn[A.NODE]),$[A.NODE]=!1),($[A.DRAG]||Vn[A.DRAG])&&(_s(wr,as,Vn[A.DRAG]),$[A.DRAG]=!1)}A.prevViewport=xt,A.clearingMotionBlur&&(A.clearingMotionBlur=!1,A.motionBlurCleared=!0,A.motionBlur=!0),he&&(A.motionBlurTimeout=setTimeout(function(){A.motionBlurTimeout=null,A.clearedForMotionBlur[A.NODE]=!1,A.clearedForMotionBlur[A.DRAG]=!1,A.motionBlur=!1,A.clearingMotionBlur=!Z,A.mbFrames=0,$[A.NODE]=!0,$[A.DRAG]=!0,A.redraw()},100)),c||F.emit("render")}},_e={drawPolygonPath:function(f,c,h,m,_,C){var A=m/2,E=_/2;f.beginPath&&f.beginPath(),f.moveTo(c+A*C[0],h+E*C[1]);for(var F=1;F<C.length/2;F++)f.lineTo(c+A*C[2*F],h+E*C[2*F+1]);f.closePath()},drawRoundPolygonPath:function(f,c,h,m,_,C){var A=m/2,E=_/2,F=Xr(m,_);f.beginPath&&f.beginPath();for(var P=0;P<C.length/4;P++){var Z,$;$=0===P?C.length-2:4*P-2,Z=4*P+2;var he=c+A*C[4*P],ge=h+E*C[4*P+1],Ee=F/Math.tan(Math.acos(-C[$]*C[Z]-C[$+1]*C[Z+1])/2),Be=he-Ee*C[$],Ue=ge-Ee*C[$+1],st=he+Ee*C[Z],tt=ge+Ee*C[Z+1];0===P?f.moveTo(Be,Ue):f.lineTo(Be,Ue),f.arcTo(he,ge,st,tt,F)}f.closePath()},drawRoundRectanglePath:function(f,c,h,m,_){var C=m/2,A=_/2,E=Ef(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,h-A),f.arcTo(c+C,h-A,c+C,h,E),f.arcTo(c+C,h+A,c,h+A,E),f.arcTo(c-C,h+A,c-C,h,E),f.arcTo(c-C,h-A,c,h-A,E),f.lineTo(c,h-A),f.closePath()},drawBottomRoundRectanglePath:function(f,c,h,m,_){var C=m/2,A=_/2,E=Ef(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,h-A),f.lineTo(c+C,h-A),f.lineTo(c+C,h),f.arcTo(c+C,h+A,c,h+A,E),f.arcTo(c-C,h+A,c-C,h,E),f.lineTo(c-C,h-A),f.lineTo(c,h-A),f.closePath()},drawCutRectanglePath:function(f,c,h,m,_){var C=m/2,A=_/2;f.beginPath&&f.beginPath(),f.moveTo(c-C+8,h-A),f.lineTo(c+C-8,h-A),f.lineTo(c+C,h-A+8),f.lineTo(c+C,h+A-8),f.lineTo(c+C-8,h+A),f.lineTo(c-C+8,h+A),f.lineTo(c-C,h+A-8),f.lineTo(c-C,h-A+8),f.closePath()},drawBarrelPath:function(f,c,h,m,_){var C=m/2,A=_/2,E=c-C,F=c+C,P=h-A,$=h+A,Z=fs(m,_),he=Z.widthOffset,ge=Z.heightOffset,ve=Z.ctrlPtOffsetPct*he;f.beginPath&&f.beginPath(),f.moveTo(E,P+ge),f.lineTo(E,$-ge),f.quadraticCurveTo(E+ve,$,E+he,$),f.lineTo(F-he,$),f.quadraticCurveTo(F-ve,$,F,$-ge),f.lineTo(F,P+ge),f.quadraticCurveTo(F-ve,P,F-he,P),f.lineTo(E+he,P),f.quadraticCurveTo(E+ve,P,E,P+ge),f.closePath()}},Oe=Math.sin(0),Fe=Math.cos(0),Ne={},ut={},ct=Math.PI/40,rt=0*Math.PI;rt<2*Math.PI;rt+=ct)Ne[rt]=Math.sin(rt),ut[rt]=Math.cos(rt);_e.drawEllipsePath=function(f,c,h,m,_){if(f.beginPath&&f.beginPath(),f.ellipse)f.ellipse(c,h,m/2,_/2,0,0,2*Math.PI);else for(var C,A,E=m/2,F=_/2,P=0*Math.PI;P<2*Math.PI;P+=ct)C=c-E*Ne[P]*Oe+E*ut[P]*Fe,A=h+F*ut[P]*Oe+F*Ne[P]*Fe,0===P?f.moveTo(C,A):f.lineTo(C,A);f.closePath()};var At={};function tn(f){var c=f.indexOf(",");return f.substr(c+1)}function $t(f,c,h){var m=function(){return c.toDataURL(h,f.quality)};switch(f.output){case"blob-promise":return new Da(function(_,C){try{c.toBlob(function(A){null!=A?_(A):C(new Error("`canvas.toBlob()` sent a null value in its callback"))},h,f.quality)}catch(A){C(A)}});case"blob":return function St(f,c){for(var h=atob(f),m=new ArrayBuffer(h.length),_=new Uint8Array(m),C=0;C<h.length;C++)_[C]=h.charCodeAt(C);return new Blob([m],{type:c})}(tn(m()),h);case"base64":return tn(m());default:return m()}}At.createBuffer=function(f,c){var h=document.createElement("canvas");return h.width=f,h.height=c,[h,h.getContext("2d")]},At.bufferCanvasImage=function(f){var c=this.cy,m=c.mutableElements().boundingBox(),_=this.findContainerClientCoords(),C=f.full?Math.ceil(m.w):_[2],A=f.full?Math.ceil(m.h):_[3],E=Ot(f.maxWidth)||Ot(f.maxHeight),F=this.getPixelRatio(),P=1;if(void 0!==f.scale)C*=f.scale,A*=f.scale,P=f.scale;else if(E){var $=1/0,Z=1/0;Ot(f.maxWidth)&&($=P*f.maxWidth/C),Ot(f.maxHeight)&&(Z=P*f.maxHeight/A),C*=P=Math.min($,Z),A*=P}E||(C*=F,A*=F,P*=F);var he=document.createElement("canvas");he.width=C,he.height=A,he.style.width=C+"px",he.style.height=A+"px";var ge=he.getContext("2d");if(C>0&&A>0){ge.clearRect(0,0,C,A),ge.globalCompositeOperation="source-over";var ve=this.getCachedZSortedEles();if(f.full)ge.translate(-m.x1*P,-m.y1*P),ge.scale(P,P),this.drawElements(ge,ve),ge.scale(1/P,1/P),ge.translate(m.x1*P,m.y1*P);else{var Ee=c.pan(),Be={x:Ee.x*P,y:Ee.y*P};P*=c.zoom(),ge.translate(Be.x,Be.y),ge.scale(P,P),this.drawElements(ge,ve),ge.scale(1/P,1/P),ge.translate(-Be.x,-Be.y)}f.bg&&(ge.globalCompositeOperation="destination-over",ge.fillStyle=f.bg,ge.rect(0,0,C,A),ge.fill())}return he},At.png=function(f){return $t(f,this.bufferCanvasImage(f),"image/png")},At.jpg=function(f){return $t(f,this.bufferCanvasImage(f),"image/jpeg")};var pn=In,ln=In.prototype;function In(f){var c=this;c.data={canvases:new Array(ln.CANVAS_LAYERS),contexts:new Array(ln.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ln.CANVAS_LAYERS),bufferCanvases:new Array(ln.BUFFER_COUNT),bufferContexts:new Array(ln.CANVAS_LAYERS)};var h="-webkit-tap-highlight-color",m="rgba(0,0,0,0)";c.data.canvasContainer=document.createElement("div");var _=c.data.canvasContainer.style;c.data.canvasContainer.style[h]=m,_.position="relative",_.zIndex="0",_.overflow="hidden";var C=f.cy.container();C.appendChild(c.data.canvasContainer),C.style[h]=m;var A={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};ke&&ke.userAgent.match(/msie|trident|edge/i)&&(A["-ms-touch-action"]="none",A["touch-action"]="none");for(var E=0;E<ln.CANVAS_LAYERS;E++){var F=c.data.canvases[E]=document.createElement("canvas");c.data.contexts[E]=F.getContext("2d"),Object.keys(A).forEach(function(Si){F.style[Si]=A[Si]}),F.style.position="absolute",F.setAttribute("data-id","layer"+E),F.style.zIndex=String(ln.CANVAS_LAYERS-E),c.data.canvasContainer.appendChild(F),c.data.canvasNeedsRedraw[E]=!1}for(c.data.topCanvas=c.data.canvases[0],c.data.canvases[ln.NODE].setAttribute("data-id","layer"+ln.NODE+"-node"),c.data.canvases[ln.SELECT_BOX].setAttribute("data-id","layer"+ln.SELECT_BOX+"-selectbox"),c.data.canvases[ln.DRAG].setAttribute("data-id","layer"+ln.DRAG+"-drag"),E=0;E<ln.BUFFER_COUNT;E++)c.data.bufferCanvases[E]=document.createElement("canvas"),c.data.bufferContexts[E]=c.data.bufferCanvases[E].getContext("2d"),c.data.bufferCanvases[E].style.position="absolute",c.data.bufferCanvases[E].setAttribute("data-id","buffer"+E),c.data.bufferCanvases[E].style.zIndex=String(-E-1),c.data.bufferCanvases[E].style.visibility="hidden";c.pathsEnabled=!0;var P=Jc(),Z=function(Gn){return{x:-Gn.w/2,y:-Gn.h/2}},Ut=function(Gn){return Gn.boundingBox(),Gn[0]._private.bodyBounds},Gt=function(Gn){return Gn.boundingBox(),Gn[0]._private.labelBounds.main||P},xt=function(Gn){return Gn.boundingBox(),Gn[0]._private.labelBounds.source||P},Wt=function(Gn){return Gn.boundingBox(),Gn[0]._private.labelBounds.target||P},Dt=function(Gn,_i){return _i},Yt=function(Gn,_i,Ni){var lr=Gn?Gn+"-":"";return{x:_i.x+Ni.pstyle(lr+"text-margin-x").pfValue,y:_i.y+Ni.pstyle(lr+"text-margin-y").pfValue}},lt=function(Gn,_i,Ni){var lr=Gn[0]._private.rscratch;return{x:lr[_i],y:lr[Ni]}},pi=c.data.eleTxrCache=new Ep(c,{getKey:function(Gn){return Gn[0]._private.nodeKey},doesEleInvalidateKey:function(Gn){var _i=Gn[0]._private;return!(_i.oldBackgroundTimestamp===_i.backgroundTimestamp)},drawElement:function(Gn,_i,Ni,lr,wr){return c.drawElement(Gn,_i,Ni,!1,!1,wr)},getBoundingBox:Ut,getRotationPoint:function(Gn){return function(Gn){return{x:(Gn.x1+Gn.x2)/2,y:(Gn.y1+Gn.y2)/2}}(Ut(Gn))},getRotationOffset:function(Gn){return Z(Ut(Gn))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Vn=c.data.lblTxrCache=new Ep(c,{getKey:function(Gn){return Gn[0]._private.labelStyleKey},drawElement:function(Gn,_i,Ni,lr,wr){return c.drawElementText(Gn,_i,Ni,lr,"main",wr)},getBoundingBox:Gt,getRotationPoint:function(Gn){return Yt("",lt(Gn,"labelX","labelY"),Gn)},getRotationOffset:function(Gn){var _i=Gt(Gn),Ni=Z(Gt(Gn));if(Gn.isNode()){switch(Gn.pstyle("text-halign").value){case"left":Ni.x=-_i.w;break;case"right":Ni.x=0}switch(Gn.pstyle("text-valign").value){case"top":Ni.y=-_i.h;break;case"bottom":Ni.y=0}}return Ni},isVisible:Dt}),ci=c.data.slbTxrCache=new Ep(c,{getKey:function(Gn){return Gn[0]._private.sourceLabelStyleKey},drawElement:function(Gn,_i,Ni,lr,wr){return c.drawElementText(Gn,_i,Ni,lr,"source",wr)},getBoundingBox:xt,getRotationPoint:function(Gn){return Yt("source",lt(Gn,"sourceLabelX","sourceLabelY"),Gn)},getRotationOffset:function(Gn){return Z(xt(Gn))},isVisible:Dt}),Ai=c.data.tlbTxrCache=new Ep(c,{getKey:function(Gn){return Gn[0]._private.targetLabelStyleKey},drawElement:function(Gn,_i,Ni,lr,wr){return c.drawElementText(Gn,_i,Ni,lr,"target",wr)},getBoundingBox:Wt,getRotationPoint:function(Gn){return Yt("target",lt(Gn,"targetLabelX","targetLabelY"),Gn)},getRotationOffset:function(Gn){return Z(Wt(Gn))},isVisible:Dt}),Oi=c.data.lyrTxrCache=new za(c);c.onUpdateEleCalcs(function(Gn,_i){pi.invalidateElements(_i),Vn.invalidateElements(_i),ci.invalidateElements(_i),Ai.invalidateElements(_i),Oi.invalidateElements(_i);for(var Ni=0;Ni<_i.length;Ni++){var lr=_i[Ni]._private;lr.oldBackgroundTimestamp=lr.backgroundTimestamp}});var Mi=function(Gn){for(var _i=0;_i<Gn.length;_i++)Oi.enqueueElementRefinement(Gn[_i].ele)};pi.onDequeue(Mi),Vn.onDequeue(Mi),ci.onDequeue(Mi),Ai.onDequeue(Mi)}ln.CANVAS_LAYERS=3,ln.SELECT_BOX=0,ln.DRAG=1,ln.NODE=2,ln.BUFFER_COUNT=3,ln.TEXTURE_BUFFER=0,ln.MOTIONBLUR_BUFFER_NODE=1,ln.MOTIONBLUR_BUFFER_DRAG=2,ln.redrawHint=function(f,c){var h=this;switch(f){case"eles":h.data.canvasNeedsRedraw[ln.NODE]=c;break;case"drag":h.data.canvasNeedsRedraw[ln.DRAG]=c;break;case"select":h.data.canvasNeedsRedraw[ln.SELECT_BOX]=c}};var $n=typeof Path2D<"u";ln.path2dEnabled=function(f){if(void 0===f)return this.pathsEnabled;this.pathsEnabled=!!f},ln.usePaths=function(){return $n&&this.pathsEnabled},ln.setImgSmoothing=function(f,c){null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled=c:(f.webkitImageSmoothingEnabled=c,f.mozImageSmoothingEnabled=c,f.msImageSmoothingEnabled=c)},ln.getImgSmoothing=function(f){return null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled:f.webkitImageSmoothingEnabled||f.mozImageSmoothingEnabled||f.msImageSmoothingEnabled},ln.makeOffscreenCanvas=function(f,c){var h;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":ee(OffscreenCanvas))?h=new OffscreenCanvas(f,c):((h=document.createElement("canvas")).width=f,h.height=c),h},[Vv,mf,g,x,M,B,re,_e,At,{nodeShapeImpl:function(f,c,h,m,_,C,A){switch(f){case"ellipse":return this.drawEllipsePath(c,h,m,_,C);case"polygon":return this.drawPolygonPath(c,h,m,_,C,A);case"round-polygon":return this.drawRoundPolygonPath(c,h,m,_,C,A);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(c,h,m,_,C);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(c,h,m,_,C);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(c,h,m,_,C);case"barrel":return this.drawBarrelPath(c,h,m,_,C)}}}].forEach(function(f){Zi(ln,f)});var Ii=[{type:"layout",extensions:rm},{type:"renderer",extensions:[{name:"null",impl:ff},{name:"base",impl:sm},{name:"canvas",impl:pn}]}],Qt={},en={};function si(f,c,h){var m=h,_=function(Wt){pe("Can not register `"+c+"` for `"+f+"` since `"+Wt+"` already exists in the prototype and can not be overridden")};if("core"===f){if(Uc.prototype[c])return _(c);Uc.prototype[c]=h}else if("collection"===f){if(ka.prototype[c])return _(c);ka.prototype[c]=h}else if("layout"===f){for(var C=function(Wt){this.options=Wt,h.call(this,Wt),_t(this._private)||(this._private={}),this._private.cy=Wt.cy,this._private.listeners=[],this.createEmitter()},A=C.prototype=Object.create(h.prototype),E=[],F=0;F<E.length;F++){var P=E[F];A[P]=A[P]||function(){return this}}A.start&&!A.run?A.run=function(){return this.start(),this}:!A.start&&A.run&&(A.start=function(){return this.run(),this});var $=h.prototype.stop;A.stop=function(){var xt=this.options;if(xt&&xt.animate){var Wt=this.animations;if(Wt)for(var Dt=0;Dt<Wt.length;Dt++)Wt[Dt].stop()}return $?$.call(this):this.emit("layoutstop"),this},A.destroy||(A.destroy=function(){return this}),A.cy=function(){return this._private.cy};var Z=function(Wt){return Wt._private.cy},he={addEventFields:function(Wt,Dt){Dt.layout=Wt,Dt.cy=Z(Wt),Dt.target=Wt},bubble:function(){return!0},parent:function(Wt){return Z(Wt)}};Zi(A,{createEmitter:function(){return this._private.emitter=new zu(he,this),this},emitter:function(){return this._private.emitter},on:function(Wt,Dt){return this.emitter().on(Wt,Dt),this},one:function(Wt,Dt){return this.emitter().one(Wt,Dt),this},once:function(Wt,Dt){return this.emitter().one(Wt,Dt),this},removeListener:function(Wt,Dt){return this.emitter().removeListener(Wt,Dt),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(Wt,Dt){return this.emitter().emit(Wt,Dt),this}}),Us.eventAliasesOn(A),m=C}else if("renderer"===f&&"null"!==c&&"base"!==c){var ge=gi("renderer","base"),ve=ge.prototype,Ee=h,Be=h.prototype,Ue=function(){ge.apply(this,arguments),Ee.apply(this,arguments)},st=Ue.prototype;for(var tt in ve){var wt=ve[tt];if(null!=Be[tt])return _(tt);st[tt]=wt}for(var Gt in Be)st[Gt]=Be[Gt];ve.clientFunctions.forEach(function(xt){st[xt]=st[xt]||function(){dt("Renderer does not implement `renderer."+xt+"()` on its prototype")}}),m=Ue}else if("__proto__"===f||"constructor"===f||"prototype"===f)return dt(f+" is an illegal type to be registered, possibly lead to prototype pollutions");return Sa({map:Qt,keys:[f,c],value:m})}function gi(f,c){return Oc({map:Qt,keys:[f,c]})}function Vi(f,c,h,m,_){return Sa({map:en,keys:[f,c,h,m],value:_})}function ki(f,c,h,m){return Oc({map:en,keys:[f,c,h,m]})}var Ti=function(){return 2===arguments.length?gi.apply(null,arguments):3===arguments.length?si.apply(null,arguments):4===arguments.length?ki.apply(null,arguments):5===arguments.length?Vi.apply(null,arguments):void dt("Invalid extension access syntax")};Uc.prototype.extension=Ti,Ii.forEach(function(f){f.extensions.forEach(function(c){si(f.type,c.name,c.impl)})});var Cr=function f(){if(!(this instanceof f))return new f;this.length=0},Ji=Cr.prototype;Ji.instanceString=function(){return"stylesheet"},Ji.selector=function(f){return this[this.length++]={selector:f,properties:[]},this},Ji.css=function(f,c){var h=this.length-1;if(Ge(f))this[h].properties.push({name:f,value:c});else if(_t(f))for(var m=f,_=Object.keys(m),C=0;C<_.length;C++){var A=_[C],E=m[A];if(null!=E){var F=Ic.properties[A]||Ic.properties[Ht(A)];null!=F&&this[h].properties.push({name:F.name,value:E})}}return this},Ji.style=Ji.css,Ji.generateStyle=function(f){var c=new Ic(f);return this.appendToStyle(c)},Ji.appendToStyle=function(f){for(var c=0;c<this.length;c++){var h=this[c],_=h.properties;f.selector(h.selector);for(var C=0;C<_.length;C++){var A=_[C];f.css(A.name,A.value)}}return f};var ii=function(c){return void 0===c&&(c={}),_t(c)?new Uc(c):Ge(c)?Ti.apply(Ti,arguments):void 0};ii.use=function(f){var c=Array.prototype.slice.call(arguments,1);return c.unshift(ii),f.apply(null,c),this},ii.warnings=function(f){return et(f)},ii.version="3.22.1",ii.stylesheet=ii.Stylesheet=Cr,Ve.exports=ii},9069:Ve=>{"use strict";var Y,Ae="object"==typeof Reflect?Reflect:null,W=Ae&&"function"==typeof Ae.apply?Ae.apply:function(N,V,J){return Function.prototype.apply.call(N,V,J)};Y=Ae&&"function"==typeof Ae.ownKeys?Ae.ownKeys:Object.getOwnPropertySymbols?function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:function(N){return Object.getOwnPropertyNames(N)};var G=Number.isNaN||function(N){return N!=N};function U(){U.init.call(this)}Ve.exports=U,Ve.exports.once=function Ce(oe,N){return new Promise(function(V,J){function fe(Pe){oe.removeListener(N,ke),J(Pe)}function ke(){"function"==typeof oe.removeListener&&oe.removeListener("error",fe),V([].slice.call(arguments))}ie(oe,N,ke,{once:!0}),"error"!==N&&function Re(oe,N,V){"function"==typeof oe.on&&ie(oe,"error",N,V)}(oe,fe,{once:!0})})},U.EventEmitter=U,U.prototype._events=void 0,U.prototype._eventsCount=0,U.prototype._maxListeners=void 0;var j=10;function D(oe){if("function"!=typeof oe)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof oe)}function R(oe){return void 0===oe._maxListeners?U.defaultMaxListeners:oe._maxListeners}function q(oe,N,V,J){var fe,ke,Pe;if(D(V),void 0===(ke=oe._events)?(ke=oe._events=Object.create(null),oe._eventsCount=0):(void 0!==ke.newListener&&(oe.emit("newListener",N,V.listener?V.listener:V),ke=oe._events),Pe=ke[N]),void 0===Pe)Pe=ke[N]=V,++oe._eventsCount;else if("function"==typeof Pe?Pe=ke[N]=J?[V,Pe]:[Pe,V]:J?Pe.unshift(V):Pe.push(V),(fe=R(oe))>0&&Pe.length>fe&&!Pe.warned){Pe.warned=!0;var nt=new Error("Possible EventEmitter memory leak detected. "+Pe.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");nt.name="MaxListenersExceededWarning",nt.emitter=oe,nt.type=N,nt.count=Pe.length,function L(oe){console&&console.warn&&console.warn(oe)}(nt)}return oe}function ne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function te(oe,N,V){var J={fired:!1,wrapFn:void 0,target:oe,type:N,listener:V},fe=ne.bind(J);return fe.listener=V,J.wrapFn=fe,fe}function se(oe,N,V){var J=oe._events;if(void 0===J)return[];var fe=J[N];return void 0===fe?[]:"function"==typeof fe?V?[fe.listener||fe]:[fe]:V?function ce(oe){for(var N=new Array(oe.length),V=0;V<N.length;++V)N[V]=oe[V].listener||oe[V];return N}(fe):K(fe,fe.length)}function ee(oe){var N=this._events;if(void 0!==N){var V=N[oe];if("function"==typeof V)return 1;if(void 0!==V)return V.length}return 0}function K(oe,N){for(var V=new Array(N),J=0;J<N;++J)V[J]=oe[J];return V}function ie(oe,N,V,J){if("function"==typeof oe.on)J.once?oe.once(N,V):oe.on(N,V);else{if("function"!=typeof oe.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof oe);oe.addEventListener(N,function fe(ke){J.once&&oe.removeEventListener(N,fe),V(ke)})}}Object.defineProperty(U,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(oe){if("number"!=typeof oe||oe<0||G(oe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+oe+".");j=oe}}),U.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},U.prototype.setMaxListeners=function(N){if("number"!=typeof N||N<0||G(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this},U.prototype.getMaxListeners=function(){return R(this)},U.prototype.emit=function(N){for(var V=[],J=1;J<arguments.length;J++)V.push(arguments[J]);var fe="error"===N,ke=this._events;if(void 0!==ke)fe=fe&&void 0===ke.error;else if(!fe)return!1;if(fe){var Pe;if(V.length>0&&(Pe=V[0]),Pe instanceof Error)throw Pe;var nt=new Error("Unhandled error."+(Pe?" ("+Pe.message+")":""));throw nt.context=Pe,nt}var Le=ke[N];if(void 0===Le)return!1;if("function"==typeof Le)W(Le,this,V);else{var at=Le.length,It=K(Le,at);for(J=0;J<at;++J)W(It[J],this,V)}return!0},U.prototype.on=U.prototype.addListener=function(N,V){return q(this,N,V,!1)},U.prototype.prependListener=function(N,V){return q(this,N,V,!0)},U.prototype.once=function(N,V){return D(V),this.on(N,te(this,N,V)),this},U.prototype.prependOnceListener=function(N,V){return D(V),this.prependListener(N,te(this,N,V)),this},U.prototype.off=U.prototype.removeListener=function(N,V){var J,fe,ke,Pe,nt;if(D(V),void 0===(fe=this._events))return this;if(void 0===(J=fe[N]))return this;if(J===V||J.listener===V)0==--this._eventsCount?this._events=Object.create(null):(delete fe[N],fe.removeListener&&this.emit("removeListener",N,J.listener||V));else if("function"!=typeof J){for(ke=-1,Pe=J.length-1;Pe>=0;Pe--)if(J[Pe]===V||J[Pe].listener===V){nt=J[Pe].listener,ke=Pe;break}if(ke<0)return this;0===ke?J.shift():function z(oe,N){for(;N+1<oe.length;N++)oe[N]=oe[N+1];oe.pop()}(J,ke),1===J.length&&(fe[N]=J[0]),void 0!==fe.removeListener&&this.emit("removeListener",N,nt||V)}return this},U.prototype.removeAllListeners=function(N){var V,J,fe;if(void 0===(J=this._events))return this;if(void 0===J.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==J[N]&&(0==--this._eventsCount?this._events=Object.create(null):delete J[N]),this;if(0===arguments.length){var Pe,ke=Object.keys(J);for(fe=0;fe<ke.length;++fe)"removeListener"!==(Pe=ke[fe])&&this.removeAllListeners(Pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(V=J[N]))this.removeListener(N,V);else if(void 0!==V)for(fe=V.length-1;fe>=0;fe--)this.removeListener(N,V[fe]);return this},U.prototype.listeners=function(N){return se(this,N,!0)},U.prototype.rawListeners=function(N){return se(this,N,!1)},U.listenerCount=function(oe,N){return"function"==typeof oe.listenerCount?oe.listenerCount(N):ee.call(oe,N)},U.prototype.listenerCount=ee,U.prototype.eventNames=function(){return this._eventsCount>0?Y(this._events):[]}},2698:Ve=>{Ve.exports={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}},4570:(Ve,Ae)=>{Ae.assignLayoutChanges=function(W,Y,L){const{nodeXAttribute:G,nodeYAttribute:U}=L;W.updateEachNodeAttributes((j,D)=>{const R=Y[j];return!R||R.fixed||(D[G]=R.x,D[U]=R.y),D},{attributes:["x","y"]})},Ae.collectLayoutChanges=function(W){const Y={};for(const L in W){const G=W[L];Y[L]={x:G.x,y:G.y}}return Y}},8031:(Ve,Ae,W)=>{const{createNodeValueGetter:Y,createEdgeValueGetter:L}=W(2954);Ve.exports=function(U,j,D){const{nodeXAttribute:R,nodeYAttribute:q}=D,{attraction:ne,repulsion:te,gravity:se,inertia:ee,maxMove:K}=D.settings;let{shouldSkipNode:z,shouldSkipEdge:ce,isNodeFixed:Ce}=D;Ce=Y(Ce),z=Y(z,!1),ce=L(ce,!1);const Re=U.filterNodes((N,V)=>!z.fromEntry(N,V)),ie=Re.length;for(let N=0;N<ie;N++){const V=Re[N],J=U.getNodeAttributes(V),fe=j[V];j[V]=fe?{dx:fe.dx*ee,dy:fe.dy*ee,x:J[R]||0,y:J[q]||0}:{dx:0,dy:0,x:J[R]||0,y:J[q]||0}}if(te)for(let N=0;N<ie;N++){const J=j[Re[N]];for(let fe=N+1;fe<ie;fe++){const Pe=j[Re[fe]],nt=Pe.x-J.x,Le=Pe.y-J.y,at=Math.sqrt(nt*nt+Le*Le)||1,It=te/at*nt,Ge=te/at*Le;J.dx-=It,J.dy-=Ge,Pe.dx+=It,Pe.dy+=Ge}}if(ne&&U.forEachEdge((N,V,J,fe,ke,Pe,nt)=>{if(J===fe||z.fromEntry(J,ke)||z.fromEntry(fe,Pe)||ce.fromEntry(N,V,J,fe,ke,Pe,nt))return;const Le=j[J],at=j[fe],It=at.x-Le.x,Ge=at.y-Le.y,yt=Math.sqrt(It*It+Ge*Ge)||1,mt=ne*yt*It,_t=ne*yt*Ge;Le.dx+=mt,Le.dy+=_t,at.dx-=mt,at.dy-=_t}),se)for(let N=0;N<ie;N++){const V=Re[N],J=j[V],{x:fe,y:ke}=J,Pe=Math.sqrt(fe*fe+ke*ke)||1;j[V].dx-=fe*se*Pe,j[V].dy-=ke*se*Pe}for(let N=0;N<ie;N++){const V=Re[N],J=j[V],fe=Math.sqrt(J.dx*J.dx+J.dy*J.dy);fe>K&&(J.dx*=K/fe,J.dy*=K/fe),Ce.fromGraph(U,V)?J.fixed=!0:(J.x+=J.dx,J.y+=J.dy,J.fixed=!1)}return{converged:!1}}},3424:(Ve,Ae,W)=>{const Y=W(6714),L=W(8487),G=W(8031),U=W(4570),j=W(2698);function D(R,q){if(!Y(R))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");q=L(q,j),this.callbacks={},q.onConverged&&(this.callbacks.onConverged=q.onConverged),this.graph=R,this.params=q,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}D.prototype.isRunning=function(){return this.running},D.prototype.runFrame=function(){let{converged:R}=G(this.graph,this.nodeStates,this.params);U.assignLayoutChanges(this.graph,this.nodeStates,this.params),R=!1,R?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},D.prototype.stop=function(){return this.running=!1,null!==this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},D.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},D.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},Ve.exports=D},8487:Ve=>{function Ae(Y){return!Y||"object"!=typeof Y||"function"==typeof Y||Array.isArray(Y)||Y instanceof Set||Y instanceof Map||Y instanceof RegExp||Y instanceof Date}Ve.exports=function W(Y,L){Y=Y||{};var G={};for(var U in L){var j=Y[U],D=L[U];G[U]=Ae(D)?void 0===j?D:j:W(j,D)}return G}},2954:(Ve,Ae)=>{function W(G){return"number"!=typeof G||isNaN(G)?1:G}function L(G,U){var j={},D=function(ne){return typeof ne>"u"?U:ne};"function"==typeof U&&(D=U);var R=function(ne){return D(ne[G])},q=function(){return D(void 0)};return"string"==typeof G?(j.fromAttributes=R,j.fromGraph=function(ne,te){return R(ne.getEdgeAttributes(te))},j.fromEntry=function(ne,te){return R(te)},j.fromPartialEntry=j.fromEntry,j.fromMinimalEntry=j.fromEntry):"function"==typeof G?(j.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},j.fromGraph=function(ne,te){var se=ne.extremities(te);return D(G(te,ne.getEdgeAttributes(te),se[0],se[1],ne.getNodeAttributes(se[0]),ne.getNodeAttributes(se[1]),ne.isUndirected(te)))},j.fromEntry=function(ne,te,se,ee,K,z,ce){return D(G(ne,te,se,ee,K,z,ce))},j.fromPartialEntry=function(ne,te,se,ee){return D(G(ne,te,se,ee))},j.fromMinimalEntry=function(ne,te){return D(G(ne,te))}):(j.fromAttributes=q,j.fromGraph=q,j.fromEntry=q,j.fromMinimalEntry=q),j}Ae.createNodeValueGetter=function Y(G,U){var j={},D=function(ne){return typeof ne>"u"?U:ne};"function"==typeof U&&(D=U);var R=function(ne){return D(ne[G])},q=function(){return D(void 0)};return"string"==typeof G?(j.fromAttributes=R,j.fromGraph=function(ne,te){return R(ne.getNodeAttributes(te))},j.fromEntry=function(ne,te){return R(te)}):"function"==typeof G?(j.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},j.fromGraph=function(ne,te){return D(G(te,ne.getNodeAttributes(te)))},j.fromEntry=function(ne,te){return D(G(ne,te))}):(j.fromAttributes=q,j.fromGraph=q,j.fromEntry=q),j},Ae.createEdgeValueGetter=L,Ae.createEdgeWeightGetter=function(G){return L(G,W)}},6714:Ve=>{Ve.exports=function(W){return null!==W&&"object"==typeof W&&"function"==typeof W.addUndirectedEdgeWithKey&&"function"==typeof W.dropNode&&"boolean"==typeof W.multi}},5595:function(Ve){Ve.exports=function(){"use strict";function Ae(je){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(dt){return typeof dt}:function(dt){return dt&&"function"==typeof Symbol&&dt.constructor===Symbol&&dt!==Symbol.prototype?"symbol":typeof dt})(je)}function W(je,dt){je.prototype=Object.create(dt.prototype),je.prototype.constructor=je,L(je,dt)}function Y(je){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(dt){return dt.__proto__||Object.getPrototypeOf(dt)})(je)}function L(je,dt){return(L=Object.setPrototypeOf||function(et,pe){return et.__proto__=pe,et})(je,dt)}function G(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function U(je,dt,et){return(U=G()?Reflect.construct:function(pe,Te,Qe){var Mt=[null];Mt.push.apply(Mt,Te);var Xt=new(Function.bind.apply(pe,Mt));return Qe&&L(Xt,Qe.prototype),Xt}).apply(null,arguments)}function j(je){var dt="function"==typeof Map?new Map:void 0;return j=function(et){if(null===et||-1===Function.toString.call(et).indexOf("[native code]"))return et;if("function"!=typeof et)throw new TypeError("Super expression must either be null or a function");if(void 0!==dt){if(dt.has(et))return dt.get(et);dt.set(et,Te)}function Te(){return U(et,arguments,Y(this).constructor)}return Te.prototype=Object.create(et.prototype,{constructor:{value:Te,enumerable:!1,writable:!0,configurable:!0}}),L(Te,et)},j(je)}function D(je){if(void 0===je)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return je}var R=function(){for(var je=arguments[0],dt=1,et=arguments.length;dt<et;dt++)if(arguments[dt])for(var pe in arguments[dt])je[pe]=arguments[dt][pe];return je};function q(je,dt,et,pe){var Te=je._nodes.get(dt),Qe=null;return Te?Qe="mixed"===pe?Te.out&&Te.out[et]||Te.undirected&&Te.undirected[et]:"directed"===pe?Te.out&&Te.out[et]:Te.undirected&&Te.undirected[et]:Qe}function ne(je){return null!==je&&"object"===Ae(je)&&"function"==typeof je.addUndirectedEdgeWithKey&&"function"==typeof je.dropNode}function te(je){return"object"===Ae(je)&&null!==je&&je.constructor===Object}function se(je){var dt;for(dt in je)return!1;return!0}function ee(je,dt,et){Object.defineProperty(je,dt,{enumerable:!1,configurable:!1,writable:!0,value:et})}function K(je,dt,et){var pe={enumerable:!0,configurable:!0};"function"==typeof et?pe.get=et:(pe.value=et,pe.writable=!1),Object.defineProperty(je,dt,pe)}function z(je){return!(!te(je)||je.attributes&&!Array.isArray(je.attributes))}"function"==typeof Object.assign&&(R=Object.assign);var ce,Ce={exports:{}},Re="object"==typeof Reflect?Reflect:null,ie=Re&&"function"==typeof Re.apply?Re.apply:function(je,dt,et){return Function.prototype.apply.call(je,dt,et)};ce=Re&&"function"==typeof Re.ownKeys?Re.ownKeys:Object.getOwnPropertySymbols?function(je){return Object.getOwnPropertyNames(je).concat(Object.getOwnPropertySymbols(je))}:function(je){return Object.getOwnPropertyNames(je)};var oe=Number.isNaN||function(je){return je!=je};function N(){N.init.call(this)}Ce.exports=N,Ce.exports.once=function(je,dt){return new Promise(function(et,pe){function Te(Mt){je.removeListener(dt,Qe),pe(Mt)}function Qe(){"function"==typeof je.removeListener&&je.removeListener("error",Te),et([].slice.call(arguments))}var Mt;Ge(je,dt,Qe,{once:!0}),"error"!==dt&&("function"==typeof(Mt=je).on&&Ge(Mt,"error",Te,{once:!0}))})},N.EventEmitter=N,N.prototype._events=void 0,N.prototype._eventsCount=0,N.prototype._maxListeners=void 0;var V=10;function J(je){if("function"!=typeof je)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof je)}function fe(je){return void 0===je._maxListeners?N.defaultMaxListeners:je._maxListeners}function ke(je,dt,et,pe){var Te,Qe,Mt;if(J(et),void 0===(Qe=je._events)?(Qe=je._events=Object.create(null),je._eventsCount=0):(void 0!==Qe.newListener&&(je.emit("newListener",dt,et.listener?et.listener:et),Qe=je._events),Mt=Qe[dt]),void 0===Mt)Mt=Qe[dt]=et,++je._eventsCount;else if("function"==typeof Mt?Mt=Qe[dt]=pe?[et,Mt]:[Mt,et]:pe?Mt.unshift(et):Mt.push(et),(Te=fe(je))>0&&Mt.length>Te&&!Mt.warned){Mt.warned=!0;var xn=new Error("Possible EventEmitter memory leak detected. "+Mt.length+" "+String(dt)+" listeners added. Use emitter.setMaxListeners() to increase limit");xn.name="MaxListenersExceededWarning",xn.emitter=je,xn.type=dt,xn.count=Mt.length,console&&console.warn&&console.warn(xn)}return je}function Pe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function nt(je,dt,et){var pe={fired:!1,wrapFn:void 0,target:je,type:dt,listener:et},Te=Pe.bind(pe);return Te.listener=et,pe.wrapFn=Te,Te}function Le(je,dt,et){var pe=je._events;if(void 0===pe)return[];var Te=pe[dt];return void 0===Te?[]:"function"==typeof Te?et?[Te.listener||Te]:[Te]:et?function(Qe){for(var Mt=new Array(Qe.length),Xt=0;Xt<Mt.length;++Xt)Mt[Xt]=Qe[Xt].listener||Qe[Xt];return Mt}(Te):It(Te,Te.length)}function at(je){var dt=this._events;if(void 0!==dt){var et=dt[je];if("function"==typeof et)return 1;if(void 0!==et)return et.length}return 0}function It(je,dt){for(var et=new Array(dt),pe=0;pe<dt;++pe)et[pe]=je[pe];return et}function Ge(je,dt,et,pe){if("function"==typeof je.on)pe.once?je.once(dt,et):je.on(dt,et);else{if("function"!=typeof je.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof je);je.addEventListener(dt,function Te(Qe){pe.once&&je.removeEventListener(dt,Te),et(Qe)})}}function yt(je){if("function"!=typeof je)throw new Error("obliterator/iterator: expecting a function!");this.next=je}Object.defineProperty(N,"defaultMaxListeners",{enumerable:!0,get:function(){return V},set:function(je){if("number"!=typeof je||je<0||oe(je))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+je+".");V=je}}),N.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},N.prototype.setMaxListeners=function(je){if("number"!=typeof je||je<0||oe(je))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+je+".");return this._maxListeners=je,this},N.prototype.getMaxListeners=function(){return fe(this)},N.prototype.emit=function(je){for(var dt=[],et=1;et<arguments.length;et++)dt.push(arguments[et]);var pe="error"===je,Te=this._events;if(void 0!==Te)pe=pe&&void 0===Te.error;else if(!pe)return!1;if(pe){var Qe;if(dt.length>0&&(Qe=dt[0]),Qe instanceof Error)throw Qe;var Mt=new Error("Unhandled error."+(Qe?" ("+Qe.message+")":""));throw Mt.context=Qe,Mt}var Xt=Te[je];if(void 0===Xt)return!1;if("function"==typeof Xt)ie(Xt,this,dt);else{var xn=Xt.length,vi=It(Xt,xn);for(et=0;et<xn;++et)ie(vi[et],this,dt)}return!0},N.prototype.on=N.prototype.addListener=function(je,dt){return ke(this,je,dt,!1)},N.prototype.prependListener=function(je,dt){return ke(this,je,dt,!0)},N.prototype.once=function(je,dt){return J(dt),this.on(je,nt(this,je,dt)),this},N.prototype.prependOnceListener=function(je,dt){return J(dt),this.prependListener(je,nt(this,je,dt)),this},N.prototype.off=N.prototype.removeListener=function(je,dt){var et,pe,Te,Qe,Mt;if(J(dt),void 0===(pe=this._events))return this;if(void 0===(et=pe[je]))return this;if(et===dt||et.listener===dt)0==--this._eventsCount?this._events=Object.create(null):(delete pe[je],pe.removeListener&&this.emit("removeListener",je,et.listener||dt));else if("function"!=typeof et){for(Te=-1,Qe=et.length-1;Qe>=0;Qe--)if(et[Qe]===dt||et[Qe].listener===dt){Mt=et[Qe].listener,Te=Qe;break}if(Te<0)return this;0===Te?et.shift():function(Xt,xn){for(;xn+1<Xt.length;xn++)Xt[xn]=Xt[xn+1];Xt.pop()}(et,Te),1===et.length&&(pe[je]=et[0]),void 0!==pe.removeListener&&this.emit("removeListener",je,Mt||dt)}return this},N.prototype.removeAllListeners=function(je){var dt,et,pe;if(void 0===(et=this._events))return this;if(void 0===et.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==et[je]&&(0==--this._eventsCount?this._events=Object.create(null):delete et[je]),this;if(0===arguments.length){var Te,Qe=Object.keys(et);for(pe=0;pe<Qe.length;++pe)"removeListener"!==(Te=Qe[pe])&&this.removeAllListeners(Te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(dt=et[je]))this.removeListener(je,dt);else if(void 0!==dt)for(pe=dt.length-1;pe>=0;pe--)this.removeListener(je,dt[pe]);return this},N.prototype.listeners=function(je){return Le(this,je,!0)},N.prototype.rawListeners=function(je){return Le(this,je,!1)},N.listenerCount=function(je,dt){return"function"==typeof je.listenerCount?je.listenerCount(dt):at.call(je,dt)},N.prototype.listenerCount=at,N.prototype.eventNames=function(){return this._eventsCount>0?ce(this._events):[]},typeof Symbol<"u"&&(yt.prototype[Symbol.iterator]=function(){return this}),yt.of=function(){var je=arguments,dt=je.length,et=0;return new yt(function(){return et>=dt?{done:!0}:{done:!1,value:je[et++]}})},yt.empty=function(){return new yt(function(){return{done:!0}})},yt.fromSequence=function(je){var dt=0,et=je.length;return new yt(function(){return dt>=et?{done:!0}:{done:!1,value:je[dt++]}})},yt.is=function(je){return je instanceof yt||"object"==typeof je&&null!==je&&"function"==typeof je.next};var mt=yt,_t={};_t.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",_t.SYMBOL_SUPPORT=typeof Symbol<"u";var Fn=mt,Pn=_t.ARRAY_BUFFER_SUPPORT,nn=_t.SYMBOL_SUPPORT,Ze=function(je){var et,dt="string"==typeof(et=je)||Array.isArray(et)||Pn&&ArrayBuffer.isView(et)?Fn.fromSequence(et):"object"!=typeof et||null===et?null:nn&&"function"==typeof et[Symbol.iterator]?et[Symbol.iterator]():"function"==typeof et.next?et:null;if(!dt)throw new Error("obliterator: target is not iterable nor a valid iterator.");return dt},Ct=Ze,cn=function(je,dt){for(var et,pe=arguments.length>1?dt:1/0,Te=pe!==1/0?new Array(pe):[],Qe=0,Mt=Ct(je);;){if(Qe===pe)return Te;if((et=Mt.next()).done)return Qe!==dt&&(Te.length=Qe),Te;Te[Qe++]=et.value}},wn=function(je){function dt(et){var pe;return(pe=je.call(this)||this).name="GraphError",pe.message=et,pe}return W(dt,je),dt}(j(Error)),An=function(je){function dt(et){var pe;return(pe=je.call(this,et)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(D(pe),dt.prototype.constructor),pe}return W(dt,je),dt}(wn),$e=function(je){function dt(et){var pe;return(pe=je.call(this,et)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(D(pe),dt.prototype.constructor),pe}return W(dt,je),dt}(wn),le=function(je){function dt(et){var pe;return(pe=je.call(this,et)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(D(pe),dt.prototype.constructor),pe}return W(dt,je),dt}(wn);function ot(je,dt){this.key=je,this.attributes=dt,this.clear()}function Je(je,dt){this.key=je,this.attributes=dt,this.clear()}function Sn(je,dt){this.key=je,this.attributes=dt,this.clear()}function Hn(je,dt,et,pe,Te){this.key=dt,this.attributes=Te,this.undirected=je,this.source=et,this.target=pe}function pt(je,dt,et,pe,Te,Qe,Mt){var Xt,xn,vi,mi;if(pe=""+pe,0===et){if(!(Xt=je._nodes.get(pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" node in the graph.'));vi=Te,mi=Qe}else if(3===et){if(!(xn=je._edges.get(Te=""+Te)))throw new $e("Graph.".concat(dt,': could not find the "').concat(Te,'" edge in the graph.'));var xi=xn.source.key,Dr=xn.target.key;if(pe===xi)Xt=xn.target;else{if(pe!==Dr)throw new $e("Graph.".concat(dt,': the "').concat(pe,'" node is not attached to the "').concat(Te,'" edge (').concat(xi,", ").concat(Dr,")."));Xt=xn.source}vi=Qe,mi=Mt}else{if(!(xn=je._edges.get(pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'));Xt=1===et?xn.source:xn.target,vi=Te,mi=Qe}return[Xt,vi,mi]}ot.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.in={},this.out={},this.undirected={}},Je.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.in={},this.out={}},Sn.prototype.clear=function(){this.undirectedDegree=0,this.undirected={}},Hn.prototype.attach=function(){var je="out",dt="in";this.undirected&&(je=dt="undirected");var et=this.source.key,pe=this.target.key;this.source[je][pe]=this,this.undirected&&et===pe||(this.target[dt][et]=this)},Hn.prototype.attachMulti=function(){var je="out",dt="in",et=this.source.key,pe=this.target.key;this.undirected&&(je=dt="undirected");var Te=this.source[je],Qe=Te[pe];if(void 0===Qe)return Te[pe]=this,void(this.undirected&&et===pe||(this.target[dt][et]=this));Qe.previous=this,this.next=Qe,Te[pe]=this,this.target[dt][et]=this},Hn.prototype.detach=function(){var je=this.source.key,et="out",pe="in";this.undirected&&(et=pe="undirected"),delete this.source[et][this.target.key],delete this.target[pe][je]},Hn.prototype.detachMulti=function(){var je=this.source.key,dt=this.target.key,et="out",pe="in";this.undirected&&(et=pe="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[et][dt],delete this.target[pe][je]):(this.next.previous=void 0,this.source[et][dt]=this.next,this.target[pe][je]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var ht=[{name:function(je){return"get".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe){var Mt=pt(this,dt,et,pe,Te,Qe);return Mt[0].attributes[Mt[1]]}}},{name:function(je){return"get".concat(je,"Attributes")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te){return pt(this,dt,et,pe,Te)[0].attributes}}},{name:function(je){return"has".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe){var Mt=pt(this,dt,et,pe,Te,Qe);return Mt[0].attributes.hasOwnProperty(Mt[1])}}},{name:function(je){return"set".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe,Mt){var Xt=pt(this,dt,et,pe,Te,Qe,Mt),xn=Xt[0],vi=Xt[1];return xn.attributes[vi]=Xt[2],this.emit("nodeAttributesUpdated",{key:xn.key,type:"set",attributes:xn.attributes,name:vi}),this}}},{name:function(je){return"update".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe,Mt){var Xt=pt(this,dt,et,pe,Te,Qe,Mt),xn=Xt[0],vi=Xt[1],mi=Xt[2];if("function"!=typeof mi)throw new An("Graph.".concat(dt,": updater should be a function."));var xi=xn.attributes,Dr=mi(xi[vi]);return xi[vi]=Dr,this.emit("nodeAttributesUpdated",{key:xn.key,type:"set",attributes:xn.attributes,name:vi}),this}}},{name:function(je){return"remove".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe){var Mt=pt(this,dt,et,pe,Te,Qe),Xt=Mt[0],xn=Mt[1];return delete Xt.attributes[xn],this.emit("nodeAttributesUpdated",{key:Xt.key,type:"remove",attributes:Xt.attributes,name:xn}),this}}},{name:function(je){return"replace".concat(je,"Attributes")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe){var Mt=pt(this,dt,et,pe,Te,Qe),Xt=Mt[0],xn=Mt[1];if(!te(xn))throw new An("Graph.".concat(dt,": provided attributes are not a plain object."));return Xt.attributes=xn,this.emit("nodeAttributesUpdated",{key:Xt.key,type:"replace",attributes:Xt.attributes}),this}}},{name:function(je){return"merge".concat(je,"Attributes")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe){var Mt=pt(this,dt,et,pe,Te,Qe),Xt=Mt[0],xn=Mt[1];if(!te(xn))throw new An("Graph.".concat(dt,": provided attributes are not a plain object."));return R(Xt.attributes,xn),this.emit("nodeAttributesUpdated",{key:Xt.key,type:"merge",attributes:Xt.attributes,data:xn}),this}}},{name:function(je){return"update".concat(je,"Attributes")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe){var Mt=pt(this,dt,et,pe,Te,Qe),Xt=Mt[0],xn=Mt[1];if("function"!=typeof xn)throw new An("Graph.".concat(dt,": provided updater is not a function."));return Xt.attributes=xn(Xt.attributes),this.emit("nodeAttributesUpdated",{key:Xt.key,type:"update",attributes:Xt.attributes}),this}}}],Ht=[{name:function(je){return"get".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te){var Qe;if("mixed"!==this.type&&"mixed"!==et&&et!==this.type)throw new le("Graph.".concat(dt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new le("Graph.".concat(dt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+pe,Xt=""+Te;if(Te=arguments[2],!(Qe=q(this,Mt,Xt,et)))throw new $e("Graph.".concat(dt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Xt,'").'))}else{if("mixed"!==et)throw new le("Graph.".concat(dt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Qe=this._edges.get(pe=""+pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'))}return Qe.attributes[Te]}}},{name:function(je){return"get".concat(je,"Attributes")},attacher:function(je,dt,et){je.prototype[dt]=function(pe){var Te;if("mixed"!==this.type&&"mixed"!==et&&et!==this.type)throw new le("Graph.".concat(dt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new le("Graph.".concat(dt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Qe=""+pe,Mt=""+arguments[1];if(!(Te=q(this,Qe,Mt,et)))throw new $e("Graph.".concat(dt,': could not find an edge for the given path ("').concat(Qe,'" - "').concat(Mt,'").'))}else{if("mixed"!==et)throw new le("Graph.".concat(dt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Te=this._edges.get(pe=""+pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'))}return Te.attributes}}},{name:function(je){return"has".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te){var Qe;if("mixed"!==this.type&&"mixed"!==et&&et!==this.type)throw new le("Graph.".concat(dt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new le("Graph.".concat(dt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+pe,Xt=""+Te;if(Te=arguments[2],!(Qe=q(this,Mt,Xt,et)))throw new $e("Graph.".concat(dt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Xt,'").'))}else{if("mixed"!==et)throw new le("Graph.".concat(dt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Qe=this._edges.get(pe=""+pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'))}return Qe.attributes.hasOwnProperty(Te)}}},{name:function(je){return"set".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe){var Mt;if("mixed"!==this.type&&"mixed"!==et&&et!==this.type)throw new le("Graph.".concat(dt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new le("Graph.".concat(dt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Xt=""+pe,xn=""+Te;if(Te=arguments[2],Qe=arguments[3],!(Mt=q(this,Xt,xn,et)))throw new $e("Graph.".concat(dt,': could not find an edge for the given path ("').concat(Xt,'" - "').concat(xn,'").'))}else{if("mixed"!==et)throw new le("Graph.".concat(dt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Mt=this._edges.get(pe=""+pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'))}return Mt.attributes[Te]=Qe,this.emit("edgeAttributesUpdated",{key:Mt.key,type:"set",attributes:Mt.attributes,name:Te}),this}}},{name:function(je){return"update".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te,Qe){var Mt;if("mixed"!==this.type&&"mixed"!==et&&et!==this.type)throw new le("Graph.".concat(dt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new le("Graph.".concat(dt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Xt=""+pe,xn=""+Te;if(Te=arguments[2],Qe=arguments[3],!(Mt=q(this,Xt,xn,et)))throw new $e("Graph.".concat(dt,': could not find an edge for the given path ("').concat(Xt,'" - "').concat(xn,'").'))}else{if("mixed"!==et)throw new le("Graph.".concat(dt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Mt=this._edges.get(pe=""+pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'))}if("function"!=typeof Qe)throw new An("Graph.".concat(dt,": updater should be a function."));return Mt.attributes[Te]=Qe(Mt.attributes[Te]),this.emit("edgeAttributesUpdated",{key:Mt.key,type:"set",attributes:Mt.attributes,name:Te}),this}}},{name:function(je){return"remove".concat(je,"Attribute")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te){var Qe;if("mixed"!==this.type&&"mixed"!==et&&et!==this.type)throw new le("Graph.".concat(dt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new le("Graph.".concat(dt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+pe,Xt=""+Te;if(Te=arguments[2],!(Qe=q(this,Mt,Xt,et)))throw new $e("Graph.".concat(dt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Xt,'").'))}else{if("mixed"!==et)throw new le("Graph.".concat(dt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Qe=this._edges.get(pe=""+pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'))}return delete Qe.attributes[Te],this.emit("edgeAttributesUpdated",{key:Qe.key,type:"remove",attributes:Qe.attributes,name:Te}),this}}},{name:function(je){return"replace".concat(je,"Attributes")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te){var Qe;if("mixed"!==this.type&&"mixed"!==et&&et!==this.type)throw new le("Graph.".concat(dt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new le("Graph.".concat(dt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+pe,Xt=""+Te;if(Te=arguments[2],!(Qe=q(this,Mt,Xt,et)))throw new $e("Graph.".concat(dt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Xt,'").'))}else{if("mixed"!==et)throw new le("Graph.".concat(dt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Qe=this._edges.get(pe=""+pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'))}if(!te(Te))throw new An("Graph.".concat(dt,": provided attributes are not a plain object."));return Qe.attributes=Te,this.emit("edgeAttributesUpdated",{key:Qe.key,type:"replace",attributes:Qe.attributes}),this}}},{name:function(je){return"merge".concat(je,"Attributes")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te){var Qe;if("mixed"!==this.type&&"mixed"!==et&&et!==this.type)throw new le("Graph.".concat(dt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new le("Graph.".concat(dt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+pe,Xt=""+Te;if(Te=arguments[2],!(Qe=q(this,Mt,Xt,et)))throw new $e("Graph.".concat(dt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Xt,'").'))}else{if("mixed"!==et)throw new le("Graph.".concat(dt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Qe=this._edges.get(pe=""+pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'))}if(!te(Te))throw new An("Graph.".concat(dt,": provided attributes are not a plain object."));return R(Qe.attributes,Te),this.emit("edgeAttributesUpdated",{key:Qe.key,type:"merge",attributes:Qe.attributes,data:Te}),this}}},{name:function(je){return"update".concat(je,"Attributes")},attacher:function(je,dt,et){je.prototype[dt]=function(pe,Te){var Qe;if("mixed"!==this.type&&"mixed"!==et&&et!==this.type)throw new le("Graph.".concat(dt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new le("Graph.".concat(dt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Mt=""+pe,Xt=""+Te;if(Te=arguments[2],!(Qe=q(this,Mt,Xt,et)))throw new $e("Graph.".concat(dt,': could not find an edge for the given path ("').concat(Mt,'" - "').concat(Xt,'").'))}else{if("mixed"!==et)throw new le("Graph.".concat(dt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Qe=this._edges.get(pe=""+pe)))throw new $e("Graph.".concat(dt,': could not find the "').concat(pe,'" edge in the graph.'))}if("function"!=typeof Te)throw new An("Graph.".concat(dt,": provided updater is not a function."));return Qe.attributes=Te(Qe.attributes),this.emit("edgeAttributesUpdated",{key:Qe.key,type:"update",attributes:Qe.attributes}),this}}}],We=mt,Ie=Ze,Me=function(){var je=arguments,dt=null,et=-1;return new We(function(){for(var pe=null;;){if(null===dt){if(++et>=je.length)return{done:!0};dt=Ie(je[et])}if(!0!==(pe=dt.next()).done)break;dt=null}return pe})},Et=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function dn(je,dt,et,pe){var Te=!1;for(var Qe in dt)if(Qe!==pe){var Mt=dt[Qe];if(Te=et(Mt.key,Mt.attributes,Mt.source.key,Mt.target.key,Mt.source.attributes,Mt.target.attributes,Mt.undirected),je&&Te)return Mt.key}}function Xn(je,dt,et,pe){var Te,Qe,Mt,Xt=!1;for(var xn in dt)if(xn!==pe){Te=dt[xn];do{if(Xt=et(Te.key,Te.attributes,(Qe=Te.source).key,(Mt=Te.target).key,Qe.attributes,Mt.attributes,Te.undirected),je&&Xt)return Te.key;Te=Te.next}while(void 0!==Te)}}function Jn(je,dt){var et,pe=Object.keys(je),Te=pe.length,Qe=0;return new mt(function(){do{if(et)et=et.next;else{if(Qe>=Te)return{done:!0};var Mt=pe[Qe++];if(Mt===dt){et=void 0;continue}et=je[Mt]}}while(!et);return{done:!1,value:{edge:et.key,attributes:et.attributes,source:et.source.key,target:et.target.key,sourceAttributes:et.source.attributes,targetAttributes:et.target.attributes,undirected:et.undirected}}})}function ms(je,dt,et,pe){var Te=dt[et];if(Te){var Qe=Te.source,Mt=Te.target;return pe(Te.key,Te.attributes,Qe.key,Mt.key,Qe.attributes,Mt.attributes,Te.undirected)&&je?Te.key:void 0}}function Hs(je,dt,et,pe){var Te=dt[et];if(Te){var Qe=!1;do{if(Qe=pe(Te.key,Te.attributes,Te.source.key,Te.target.key,Te.source.attributes,Te.target.attributes,Te.undirected),je&&Qe)return Te.key;Te=Te.next}while(void 0!==Te)}}function os(je,dt){var et=je[dt];return void 0!==et.next?new mt(function(){if(!et)return{done:!0};var pe={edge:et.key,attributes:et.attributes,source:et.source.key,target:et.target.key,sourceAttributes:et.source.attributes,targetAttributes:et.target.attributes,undirected:et.undirected};return et=et.next,{done:!1,value:pe}}):mt.of({edge:et.key,attributes:et.attributes,source:et.source.key,target:et.target.key,sourceAttributes:et.source.attributes,targetAttributes:et.target.attributes,undirected:et.undirected})}function qs(je,dt){if(0===je.size)return[];if("mixed"===dt||dt===je.type)return"function"==typeof Array.from?Array.from(je._edges.keys()):cn(je._edges.keys(),je._edges.size);for(var et,pe,Qe=new Array("undirected"===dt?je.undirectedSize:je.directedSize),Mt="undirected"===dt,Xt=je._edges.values(),xn=0;!0!==(et=Xt.next()).done;)(pe=et.value).undirected===Mt&&(Qe[xn++]=pe.key);return Qe}function Zi(je,dt,et,pe){if(0!==dt.size)for(var Te,Qe,Mt="mixed"!==et&&et!==dt.type,Xt="undirected"===et,xn=!1,vi=dt._edges.values();!0!==(Te=vi.next()).done;)if(Qe=Te.value,!Mt||Qe.undirected===Xt){var xi=Qe.key,_r=Qe.source,gr=Qe.target;if(xn=pe(xi,Qe.attributes,_r.key,gr.key,_r.attributes,gr.attributes,Qe.undirected),je&&xn)return xi}}function ra(je,dt){if(0===je.size)return mt.empty();var et="mixed"!==dt&&dt!==je.type,pe="undirected"===dt,Te=je._edges.values();return new mt(function(){for(var Qe,Mt;;){if((Qe=Te.next()).done)return Qe;if(Mt=Qe.value,!et||Mt.undirected===pe)break}return{value:{edge:Mt.key,attributes:Mt.attributes,source:Mt.source.key,target:Mt.target.key,sourceAttributes:Mt.source.attributes,targetAttributes:Mt.target.attributes,undirected:Mt.undirected},done:!1}})}function Ha(je,dt,et,pe,Te,Qe){var Mt,Xt=dt?Xn:dn;if("undirected"!==et&&("out"!==pe&&(Mt=Xt(je,Te.in,Qe),je&&Mt)||"in"!==pe&&(Mt=Xt(je,Te.out,Qe,pe?void 0:Te.key),je&&Mt))||"directed"!==et&&(Mt=Xt(je,Te.undirected,Qe),je&&Mt))return Mt}function fl(je,dt,et,pe){var Te=[];return Ha(!1,je,dt,et,pe,function(Qe){Te.push(Qe)}),Te}function Er(je,dt,et){var pe=mt.empty();return"undirected"!==je&&("out"!==dt&&void 0!==et.in&&(pe=Me(pe,Jn(et.in))),"in"!==dt&&void 0!==et.out&&(pe=Me(pe,Jn(et.out,dt?void 0:et.key)))),"directed"!==je&&void 0!==et.undirected&&(pe=Me(pe,Jn(et.undirected))),pe}function xd(je,dt,et,pe,Te,Qe,Mt){var Xt,xn=et?Hs:ms;if("undirected"!==dt&&(void 0!==Te.in&&"out"!==pe&&(Xt=xn(je,Te.in,Qe,Mt),je&&Xt)||void 0!==Te.out&&"in"!==pe&&(pe||Te.key!==Qe)&&(Xt=xn(je,Te.out,Qe,Mt),je&&Xt))||"directed"!==dt&&void 0!==Te.undirected&&(Xt=xn(je,Te.undirected,Qe,Mt),je&&Xt))return Xt}function kc(je,dt,et,pe,Te){var Qe=[];return xd(!1,je,dt,et,pe,Te,function(Mt){Qe.push(Mt)}),Qe}function Sa(je,dt,et,pe){var Te=mt.empty();return"undirected"!==je&&(void 0!==et.in&&"out"!==dt&&pe in et.in&&(Te=Me(Te,os(et.in,pe))),void 0!==et.out&&"in"!==dt&&pe in et.out&&(dt||et.key!==pe)&&(Te=Me(Te,os(et.out,pe)))),"directed"!==je&&void 0!==et.undirected&&pe in et.undirected&&(Te=Me(Te,os(et.undirected,pe))),Te}var Oc=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ja(){this.A=null,this.B=null}function Go(je,dt,et,pe,Te){for(var Qe in pe){var Mt=pe[Qe],Xt=Mt.source,vi=Xt===et?Mt.target:Xt;if(!dt||!dt.has(vi.key)){var mi=Te(vi.key,vi.attributes);if(je&&mi)return vi.key}}}function Rt(je,dt,et,pe,Te){if("mixed"!==dt){if("undirected"===dt)return Go(je,null,pe,pe.undirected,Te);if("string"==typeof et)return Go(je,null,pe,pe[et],Te)}var Qe,Mt=new Ja;if("undirected"!==dt){if("out"!==et){if(Qe=Go(je,null,pe,pe.in,Te),je&&Qe)return Qe;Mt.wrap(pe.in)}if("in"!==et){if(Qe=Go(je,Mt,pe,pe.out,Te),je&&Qe)return Qe;Mt.wrap(pe.out)}}if("directed"!==dt&&(Qe=Go(je,Mt,pe,pe.undirected,Te),je&&Qe))return Qe}function fn(je,dt,et){var pe=Object.keys(et),Te=pe.length,Qe=0;return new mt(function(){var Mt=null;do{if(Qe>=Te)return je&&je.wrap(et),{done:!0};var Xt=et[pe[Qe++]],xn=Xt.source;Mt=xn===dt?Xt.target:xn,je&&je.has(Mt.key)&&(Mt=null)}while(null===Mt);return{done:!1,value:{neighbor:Mt.key,attributes:Mt.attributes}}})}function qe(je,dt,et,pe,Te){for(var Qe,Mt,Xt,xn,vi,mi,xi,Dr=pe._nodes.values(),_r=pe.type;!0!==(Qe=Dr.next()).done;){var gr=!1;if(Mt=Qe.value,"undirected"!==_r)for(Xt in xn=Mt.out){vi=xn[Xt];do{if(gr=!0,xi=Te(Mt.key,(mi=vi.target).key,Mt.attributes,mi.attributes,vi.key,vi.attributes,vi.undirected),je&&xi)return vi;vi=vi.next}while(vi)}if("directed"!==_r)for(Xt in xn=Mt.undirected)if(!(dt&&Mt.key>Xt)){vi=xn[Xt];do{if((mi=vi.target).key!==Xt&&(mi=vi.source),gr=!0,xi=Te(Mt.key,mi.key,Mt.attributes,mi.attributes,vi.key,vi.attributes,vi.undirected),je&&xi)return vi;vi=vi.next}while(vi)}if(et&&!gr&&(xi=Te(Mt.key,null,Mt.attributes,null,null,null,null),je&&xi))return null}}function kt(je){if(!te(je))throw new An('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in je))throw new An("Graph.import: serialized node is missing its key.");if("attributes"in je&&(!te(je.attributes)||null===je.attributes))throw new An("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function on(je){if(!te(je))throw new An('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in je))throw new An("Graph.import: serialized edge is missing its source.");if(!("target"in je))throw new An("Graph.import: serialized edge is missing its target.");if("attributes"in je&&(!te(je.attributes)||null===je.attributes))throw new An("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in je&&"boolean"!=typeof je.undirected)throw new An("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}Ja.prototype.wrap=function(je){null===this.A?this.A=je:null===this.B&&(this.B=je)},Ja.prototype.has=function(je){return null!==this.A&&je in this.A||null!==this.B&&je in this.B};var En,Nn=(En=255&Math.floor(256*Math.random()),function(){return En++}),hi=new Set(["directed","undirected","mixed"]),ar=new Set(["domain","_events","_eventsCount","_maxListeners"]),qr={allowSelfLoops:!0,multi:!1,type:"mixed"};function Ss(je,dt,et){var pe=new je.NodeDataClass(dt,et);return je._nodes.set(dt,pe),je.emit("nodeAdded",{key:dt,attributes:et}),pe}function xs(je,dt,et,pe,Te,Qe,Mt,Xt){if(!pe&&"undirected"===je.type)throw new le("Graph.".concat(dt,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(pe&&"directed"===je.type)throw new le("Graph.".concat(dt,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Xt&&!te(Xt))throw new An("Graph.".concat(dt,': invalid attributes. Expecting an object but got "').concat(Xt,'"'));if(Qe=""+Qe,Mt=""+Mt,Xt=Xt||{},!je.allowSelfLoops&&Qe===Mt)throw new le("Graph.".concat(dt,': source & target are the same ("').concat(Qe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var xn=je._nodes.get(Qe),vi=je._nodes.get(Mt);if(!xn)throw new $e("Graph.".concat(dt,': source node "').concat(Qe,'" not found.'));if(!vi)throw new $e("Graph.".concat(dt,': target node "').concat(Mt,'" not found.'));var mi={key:null,undirected:pe,source:Qe,target:Mt,attributes:Xt};if(et)Te=je._edgeKeyGenerator();else if(je._edges.has(Te=""+Te))throw new le("Graph.".concat(dt,': the "').concat(Te,'" edge already exists in the graph.'));if(!je.multi&&(pe?void 0!==xn.undirected[Mt]:void 0!==xn.out[Mt]))throw new le("Graph.".concat(dt,': an edge linking "').concat(Qe,'" to "').concat(Mt,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var xi=new Hn(pe,Te,xn,vi,Xt);je._edges.set(Te,xi);var Dr=Qe===Mt;return pe?(xn.undirectedDegree++,vi.undirectedDegree++,Dr&&je._undirectedSelfLoopCount++):(xn.outDegree++,vi.inDegree++,Dr&&je._directedSelfLoopCount++),je.multi?xi.attachMulti():xi.attach(),pe?je._undirectedSize++:je._directedSize++,mi.key=Te,je.emit("edgeAdded",mi),Te}function xo(je,dt,et,pe,Te,Qe,Mt,Xt,xn){if(!pe&&"undirected"===je.type)throw new le("Graph.".concat(dt,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(pe&&"directed"===je.type)throw new le("Graph.".concat(dt,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(Xt)if(xn){if("function"!=typeof Xt)throw new An("Graph.".concat(dt,': invalid updater function. Expecting a function but got "').concat(Xt,'"'))}else if(!te(Xt))throw new An("Graph.".concat(dt,': invalid attributes. Expecting an object but got "').concat(Xt,'"'));var vi;if(Qe=""+Qe,Mt=""+Mt,xn&&(vi=Xt,Xt=void 0),!je.allowSelfLoops&&Qe===Mt)throw new le("Graph.".concat(dt,': source & target are the same ("').concat(Qe,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var mi,xi,Dr=je._nodes.get(Qe),_r=je._nodes.get(Mt);if(!et&&(mi=je._edges.get(Te))){if(!(mi.source.key===Qe&&mi.target.key===Mt||pe&&mi.source.key===Mt&&mi.target.key===Qe))throw new le("Graph.".concat(dt,': inconsistency detected when attempting to merge the "').concat(Te,'" edge with "').concat(Qe,'" source & "').concat(Mt,'" target vs. ("').concat(mi.source.key,'", "').concat(mi.target.key,'").'));xi=mi}if(xi||je.multi||!Dr||(xi=pe?Dr.undirected[Mt]:Dr.out[Mt]),xi){var gr=[xi.key,!1,!1,!1];return(xn?vi:Xt)?(xn?(xi.attributes=vi(xi.attributes),je.emit("edgeAttributesUpdated",{type:"replace",key:xi.key,attributes:xi.attributes})):(R(xi.attributes,Xt),je.emit("edgeAttributesUpdated",{type:"merge",key:xi.key,attributes:xi.attributes,data:Xt})),gr):gr}Xt=Xt||{},xn&&vi&&(Xt=vi(Xt));var ys={key:null,undirected:pe,source:Qe,target:Mt,attributes:Xt};if(et)Te=je._edgeKeyGenerator();else if(je._edges.has(Te=""+Te))throw new le("Graph.".concat(dt,': the "').concat(Te,'" edge already exists in the graph.'));var Bs=!1,Pr=!1;Dr||(Dr=Ss(je,Qe,{}),Bs=!0,Qe===Mt&&(_r=Dr,Pr=!0)),_r||(_r=Ss(je,Mt,{}),Pr=!0),mi=new Hn(pe,Te,Dr,_r,Xt),je._edges.set(Te,mi);var _o=Qe===Mt;return pe?(Dr.undirectedDegree++,_r.undirectedDegree++,_o&&je._undirectedSelfLoopCount++):(Dr.outDegree++,_r.inDegree++,_o&&je._directedSelfLoopCount++),je.multi?mi.attachMulti():mi.attach(),pe?je._undirectedSize++:je._directedSize++,ys.key=Te,je.emit("edgeAdded",ys),[Te,!0,Bs,Pr]}function lo(je,dt){je._edges.delete(dt.key);var et=dt.source,pe=dt.target,Te=dt.attributes,Qe=dt.undirected,Mt=et===pe;Qe?(et.undirectedDegree--,pe.undirectedDegree--,Mt&&je._undirectedSelfLoopCount--):(et.outDegree--,pe.inDegree--,Mt&&je._directedSelfLoopCount--),je.multi?dt.detachMulti():dt.detach(),Qe?je._undirectedSize--:je._directedSize--,je.emit("edgeDropped",{key:dt.key,attributes:Te,source:et.key,target:pe.key,undirected:Qe})}var je,Kr=function(je){function dt(pe){var Te;if(Te=je.call(this)||this,"boolean"!=typeof(pe=R({},qr,pe)).multi)throw new An("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(pe.multi,'".'));if(!hi.has(pe.type))throw new An('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(pe.type,'".'));if("boolean"!=typeof pe.allowSelfLoops)throw new An("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(pe.allowSelfLoops,'".'));var Qe="mixed"===pe.type?ot:"directed"===pe.type?Je:Sn;ee(D(Te),"NodeDataClass",Qe);var Mt="geid_"+Nn()+"_",Xt=0;return ee(D(Te),"_attributes",{}),ee(D(Te),"_nodes",new Map),ee(D(Te),"_edges",new Map),ee(D(Te),"_directedSize",0),ee(D(Te),"_undirectedSize",0),ee(D(Te),"_directedSelfLoopCount",0),ee(D(Te),"_undirectedSelfLoopCount",0),ee(D(Te),"_edgeKeyGenerator",function(){var xn;do{xn=Mt+Xt++}while(Te._edges.has(xn));return xn}),ee(D(Te),"_options",pe),ar.forEach(function(xn){return ee(D(Te),xn,Te[xn])}),K(D(Te),"order",function(){return Te._nodes.size}),K(D(Te),"size",function(){return Te._edges.size}),K(D(Te),"directedSize",function(){return Te._directedSize}),K(D(Te),"undirectedSize",function(){return Te._undirectedSize}),K(D(Te),"selfLoopCount",function(){return Te._directedSelfLoopCount+Te._undirectedSelfLoopCount}),K(D(Te),"directedSelfLoopCount",function(){return Te._directedSelfLoopCount}),K(D(Te),"undirectedSelfLoopCount",function(){return Te._undirectedSelfLoopCount}),K(D(Te),"multi",Te._options.multi),K(D(Te),"type",Te._options.type),K(D(Te),"allowSelfLoops",Te._options.allowSelfLoops),K(D(Te),"implementation",function(){return"graphology"}),Te}W(dt,je);var et=dt.prototype;return et._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},et.hasNode=function(pe){return this._nodes.has(""+pe)},et.hasDirectedEdge=function(pe,Te){if("undirected"===this.type)return!1;if(1===arguments.length){var Mt=this._edges.get(""+pe);return!!Mt&&!Mt.undirected}if(2===arguments.length){Te=""+Te;var Xt=this._nodes.get(pe=""+pe);if(!Xt)return!1;var xn=Xt.out[Te];return!(!xn||this.multi&&!xn.size)}throw new An("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},et.hasUndirectedEdge=function(pe,Te){if("directed"===this.type)return!1;if(1===arguments.length){var Mt=this._edges.get(""+pe);return!!Mt&&Mt.undirected}if(2===arguments.length){Te=""+Te;var Xt=this._nodes.get(pe=""+pe);if(!Xt)return!1;var xn=Xt.undirected[Te];return!(!xn||this.multi&&!xn.size)}throw new An("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},et.hasEdge=function(pe,Te){if(1===arguments.length)return this._edges.has(""+pe);if(2===arguments.length){Te=""+Te;var Mt=this._nodes.get(pe=""+pe);if(!Mt)return!1;var Xt=void 0!==Mt.out&&Mt.out[Te];return Xt||(Xt=void 0!==Mt.undirected&&Mt.undirected[Te]),!(!Xt||this.multi&&!Xt.size)}throw new An("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},et.directedEdge=function(pe,Te){if("undirected"!==this.type){if(pe=""+pe,Te=""+Te,this.multi)throw new le("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var Qe=this._nodes.get(pe);if(!Qe)throw new $e('Graph.directedEdge: could not find the "'.concat(pe,'" source node in the graph.'));if(!this._nodes.has(Te))throw new $e('Graph.directedEdge: could not find the "'.concat(Te,'" target node in the graph.'));var Mt=Qe.out&&Qe.out[Te]||void 0;return Mt?Mt.key:void 0}},et.undirectedEdge=function(pe,Te){if("directed"!==this.type){if(pe=""+pe,Te=""+Te,this.multi)throw new le("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var Qe=this._nodes.get(pe);if(!Qe)throw new $e('Graph.undirectedEdge: could not find the "'.concat(pe,'" source node in the graph.'));if(!this._nodes.has(Te))throw new $e('Graph.undirectedEdge: could not find the "'.concat(Te,'" target node in the graph.'));var Mt=Qe.undirected&&Qe.undirected[Te]||void 0;return Mt?Mt.key:void 0}},et.edge=function(pe,Te){if(this.multi)throw new le("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");Te=""+Te;var Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.edge: could not find the "'.concat(pe,'" source node in the graph.'));if(!this._nodes.has(Te))throw new $e('Graph.edge: could not find the "'.concat(Te,'" target node in the graph.'));var Mt=Qe.out&&Qe.out[Te]||Qe.undirected&&Qe.undirected[Te]||void 0;if(Mt)return Mt.key},et.areDirectedNeighbors=function(pe,Te){Te=""+Te;var Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.areDirectedNeighbors: could not find the "'.concat(pe,'" node in the graph.'));return"undirected"!==this.type&&(Te in Qe.in||Te in Qe.out)},et.areOutNeighbors=function(pe,Te){Te=""+Te;var Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.areOutNeighbors: could not find the "'.concat(pe,'" node in the graph.'));return"undirected"!==this.type&&Te in Qe.out},et.areInNeighbors=function(pe,Te){Te=""+Te;var Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.areInNeighbors: could not find the "'.concat(pe,'" node in the graph.'));return"undirected"!==this.type&&Te in Qe.in},et.areUndirectedNeighbors=function(pe,Te){Te=""+Te;var Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.areUndirectedNeighbors: could not find the "'.concat(pe,'" node in the graph.'));return"directed"!==this.type&&Te in Qe.undirected},et.areNeighbors=function(pe,Te){Te=""+Te;var Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.areNeighbors: could not find the "'.concat(pe,'" node in the graph.'));return"undirected"!==this.type&&(Te in Qe.in||Te in Qe.out)||"directed"!==this.type&&Te in Qe.undirected},et.areInboundNeighbors=function(pe,Te){Te=""+Te;var Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.areInboundNeighbors: could not find the "'.concat(pe,'" node in the graph.'));return"undirected"!==this.type&&Te in Qe.in||"directed"!==this.type&&Te in Qe.undirected},et.areOutboundNeighbors=function(pe,Te){Te=""+Te;var Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.areOutboundNeighbors: could not find the "'.concat(pe,'" node in the graph.'));return"undirected"!==this.type&&Te in Qe.out||"directed"!==this.type&&Te in Qe.undirected},et.inDegree=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.inDegree: could not find the "'.concat(pe,'" node in the graph.'));return"undirected"===this.type?0:Te.inDegree},et.outDegree=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.outDegree: could not find the "'.concat(pe,'" node in the graph.'));return"undirected"===this.type?0:Te.outDegree},et.directedDegree=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.directedDegree: could not find the "'.concat(pe,'" node in the graph.'));return"undirected"===this.type?0:Te.inDegree+Te.outDegree},et.undirectedDegree=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.undirectedDegree: could not find the "'.concat(pe,'" node in the graph.'));return"directed"===this.type?0:Te.undirectedDegree},et.inboundDegree=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.inboundDegree: could not find the "'.concat(pe,'" node in the graph.'));var Qe=0;return"directed"!==this.type&&(Qe+=Te.undirectedDegree),"undirected"!==this.type&&(Qe+=Te.inDegree),Qe},et.outboundDegree=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.outboundDegree: could not find the "'.concat(pe,'" node in the graph.'));var Qe=0;return"directed"!==this.type&&(Qe+=Te.undirectedDegree),"undirected"!==this.type&&(Qe+=Te.outDegree),Qe},et.degree=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.degree: could not find the "'.concat(pe,'" node in the graph.'));var Qe=0;return"directed"!==this.type&&(Qe+=Te.undirectedDegree),"undirected"!==this.type&&(Qe+=Te.inDegree+Te.outDegree),Qe},et.inDegreeWithoutSelfLoops=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(pe,'" node in the graph.'));if("undirected"===this.type)return 0;var Qe=Te.in[pe];return Te.inDegree-(Qe?this.multi?Qe.size:1:0)},et.outDegreeWithoutSelfLoops=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(pe,'" node in the graph.'));if("undirected"===this.type)return 0;var Qe=Te.out[pe];return Te.outDegree-(Qe?this.multi?Qe.size:1:0)},et.directedDegreeWithoutSelfLoops=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(pe,'" node in the graph.'));if("undirected"===this.type)return 0;var Qe=Te.out[pe];return Te.inDegree+Te.outDegree-2*(Qe?this.multi?Qe.size:1:0)},et.undirectedDegreeWithoutSelfLoops=function(pe){var Te=this._nodes.get(pe=""+pe);if(!Te)throw new $e('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(pe,'" node in the graph.'));if("directed"===this.type)return 0;var Qe=Te.undirected[pe];return Te.undirectedDegree-2*(Qe?this.multi?Qe.size:1:0)},et.inboundDegreeWithoutSelfLoops=function(pe){var Te,Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(pe,'" node in the graph.'));var Mt=0,Xt=0;return"directed"!==this.type&&(Mt+=Qe.undirectedDegree,Xt+=2*((Te=Qe.undirected[pe])?this.multi?Te.size:1:0)),"undirected"!==this.type&&(Mt+=Qe.inDegree,Xt+=(Te=Qe.out[pe])?this.multi?Te.size:1:0),Mt-Xt},et.outboundDegreeWithoutSelfLoops=function(pe){var Te,Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(pe,'" node in the graph.'));var Mt=0,Xt=0;return"directed"!==this.type&&(Mt+=Qe.undirectedDegree,Xt+=2*((Te=Qe.undirected[pe])?this.multi?Te.size:1:0)),"undirected"!==this.type&&(Mt+=Qe.outDegree,Xt+=(Te=Qe.in[pe])?this.multi?Te.size:1:0),Mt-Xt},et.degreeWithoutSelfLoops=function(pe){var Te,Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.degreeWithoutSelfLoops: could not find the "'.concat(pe,'" node in the graph.'));var Mt=0,Xt=0;return"directed"!==this.type&&(Mt+=Qe.undirectedDegree,Xt+=2*((Te=Qe.undirected[pe])?this.multi?Te.size:1:0)),"undirected"!==this.type&&(Mt+=Qe.inDegree+Qe.outDegree,Xt+=2*((Te=Qe.out[pe])?this.multi?Te.size:1:0)),Mt-Xt},et.source=function(pe){var Te=this._edges.get(pe=""+pe);if(!Te)throw new $e('Graph.source: could not find the "'.concat(pe,'" edge in the graph.'));return Te.source.key},et.target=function(pe){var Te=this._edges.get(pe=""+pe);if(!Te)throw new $e('Graph.target: could not find the "'.concat(pe,'" edge in the graph.'));return Te.target.key},et.extremities=function(pe){var Te=this._edges.get(pe=""+pe);if(!Te)throw new $e('Graph.extremities: could not find the "'.concat(pe,'" edge in the graph.'));return[Te.source.key,Te.target.key]},et.opposite=function(pe,Te){pe=""+pe;var Qe=this._edges.get(Te=""+Te);if(!Qe)throw new $e('Graph.opposite: could not find the "'.concat(Te,'" edge in the graph.'));var Mt=Qe.source.key,Xt=Qe.target.key;if(pe===Mt)return Xt;if(pe===Xt)return Mt;throw new $e('Graph.opposite: the "'.concat(pe,'" node is not attached to the "').concat(Te,'" edge (').concat(Mt,", ").concat(Xt,")."))},et.hasExtremity=function(pe,Te){Te=""+Te;var Qe=this._edges.get(pe=""+pe);if(!Qe)throw new $e('Graph.hasExtremity: could not find the "'.concat(pe,'" edge in the graph.'));return Qe.source.key===Te||Qe.target.key===Te},et.isUndirected=function(pe){var Te=this._edges.get(pe=""+pe);if(!Te)throw new $e('Graph.isUndirected: could not find the "'.concat(pe,'" edge in the graph.'));return Te.undirected},et.isDirected=function(pe){var Te=this._edges.get(pe=""+pe);if(!Te)throw new $e('Graph.isDirected: could not find the "'.concat(pe,'" edge in the graph.'));return!Te.undirected},et.isSelfLoop=function(pe){var Te=this._edges.get(pe=""+pe);if(!Te)throw new $e('Graph.isSelfLoop: could not find the "'.concat(pe,'" edge in the graph.'));return Te.source===Te.target},et.addNode=function(pe,Te){return function(Mt,Xt,xn){if(xn&&!te(xn))throw new An('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(xn,'"'));if(xn=xn||{},Mt._nodes.has(Xt=""+Xt))throw new le('Graph.addNode: the "'.concat(Xt,'" node already exist in the graph.'));var vi=new Mt.NodeDataClass(Xt,xn);return Mt._nodes.set(Xt,vi),Mt.emit("nodeAdded",{key:Xt,attributes:xn}),vi}(this,pe,Te).key},et.mergeNode=function(pe,Te){if(Te&&!te(Te))throw new An('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(Te,'"'));Te=Te||{};var Qe=this._nodes.get(pe=""+pe);return Qe?(Te&&(R(Qe.attributes,Te),this.emit("nodeAttributesUpdated",{type:"merge",key:pe,attributes:Qe.attributes,data:Te})),[pe,!1]):(Qe=new this.NodeDataClass(pe,Te),this._nodes.set(pe,Qe),this.emit("nodeAdded",{key:pe,attributes:Te}),[pe,!0])},et.updateNode=function(pe,Te){if(Te&&"function"!=typeof Te)throw new An('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(Te,'"'));var Qe=this._nodes.get(pe=""+pe);if(Qe)return Te&&(Qe.attributes=Te(Qe.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:pe,attributes:Qe.attributes})),[pe,!1];var Xt=Te?Te({}):{};return Qe=new this.NodeDataClass(pe,Xt),this._nodes.set(pe,Qe),this.emit("nodeAdded",{key:pe,attributes:Xt}),[pe,!0]},et.dropNode=function(pe){var Te,Qe=this._nodes.get(pe=""+pe);if(!Qe)throw new $e('Graph.dropNode: could not find the "'.concat(pe,'" node in the graph.'));if("undirected"!==this.type){for(var Mt in Qe.out){Te=Qe.out[Mt];do{lo(this,Te),Te=Te.next}while(Te)}for(var Xt in Qe.in){Te=Qe.in[Xt];do{lo(this,Te),Te=Te.next}while(Te)}}if("directed"!==this.type)for(var xn in Qe.undirected){Te=Qe.undirected[xn];do{lo(this,Te),Te=Te.next}while(Te)}this._nodes.delete(pe),this.emit("nodeDropped",{key:pe,attributes:Qe.attributes})},et.dropEdge=function(pe){var Te;if(arguments.length>1){var Qe=""+arguments[0],Mt=""+arguments[1];if(!(Te=q(this,Qe,Mt,this.type)))throw new $e('Graph.dropEdge: could not find the "'.concat(Qe,'" -> "').concat(Mt,'" edge in the graph.'))}else if(!(Te=this._edges.get(pe=""+pe)))throw new $e('Graph.dropEdge: could not find the "'.concat(pe,'" edge in the graph.'));return lo(this,Te),this},et.dropDirectedEdge=function(pe,Te){if(arguments.length<2)throw new le("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new le("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var Qe=q(this,pe=""+pe,Te=""+Te,"directed");if(!Qe)throw new $e('Graph.dropDirectedEdge: could not find a "'.concat(pe,'" -> "').concat(Te,'" edge in the graph.'));return lo(this,Qe),this},et.dropUndirectedEdge=function(pe,Te){if(arguments.length<2)throw new le("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new le("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var Qe=q(this,pe,Te,"undirected");if(!Qe)throw new $e('Graph.dropUndirectedEdge: could not find a "'.concat(pe,'" -> "').concat(Te,'" edge in the graph.'));return lo(this,Qe),this},et.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},et.clearEdges=function(){for(var pe,Te=this._nodes.values();!0!==(pe=Te.next()).done;)pe.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},et.getAttribute=function(pe){return this._attributes[pe]},et.getAttributes=function(){return this._attributes},et.hasAttribute=function(pe){return this._attributes.hasOwnProperty(pe)},et.setAttribute=function(pe,Te){return this._attributes[pe]=Te,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:pe}),this},et.updateAttribute=function(pe,Te){if("function"!=typeof Te)throw new An("Graph.updateAttribute: updater should be a function.");return this._attributes[pe]=Te(this._attributes[pe]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:pe}),this},et.removeAttribute=function(pe){return delete this._attributes[pe],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:pe}),this},et.replaceAttributes=function(pe){if(!te(pe))throw new An("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=pe,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},et.mergeAttributes=function(pe){if(!te(pe))throw new An("Graph.mergeAttributes: provided attributes are not a plain object.");return R(this._attributes,pe),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:pe}),this},et.updateAttributes=function(pe){if("function"!=typeof pe)throw new An("Graph.updateAttributes: provided updater is not a function.");return this._attributes=pe(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},et.updateEachNodeAttributes=function(pe,Te){if("function"!=typeof pe)throw new An("Graph.updateEachNodeAttributes: expecting an updater function.");if(Te&&!z(Te))throw new An("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var Qe,Mt,Xt=this._nodes.values();!0!==(Qe=Xt.next()).done;)(Mt=Qe.value).attributes=pe(Mt.key,Mt.attributes);this.emit("eachNodeAttributesUpdated",{hints:Te||null})},et.updateEachEdgeAttributes=function(pe,Te){if("function"!=typeof pe)throw new An("Graph.updateEachEdgeAttributes: expecting an updater function.");if(Te&&!z(Te))throw new An("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var Qe,Mt,Xt,xn,vi=this._edges.values();!0!==(Qe=vi.next()).done;)Xt=(Mt=Qe.value).source,Mt.attributes=pe(Mt.key,Mt.attributes,Xt.key,(xn=Mt.target).key,Xt.attributes,xn.attributes,Mt.undirected);this.emit("eachEdgeAttributesUpdated",{hints:Te||null})},et.forEachAdjacencyEntry=function(pe){if("function"!=typeof pe)throw new An("Graph.forEachAdjacencyEntry: expecting a callback.");qe(!1,!1,!1,this,pe)},et.forEachAdjacencyEntryWithOrphans=function(pe){if("function"!=typeof pe)throw new An("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");qe(!1,!1,!0,this,pe)},et.forEachAssymetricAdjacencyEntry=function(pe){if("function"!=typeof pe)throw new An("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");qe(!1,!0,!1,this,pe)},et.forEachAssymetricAdjacencyEntryWithOrphans=function(pe){if("function"!=typeof pe)throw new An("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");qe(!1,!0,!0,this,pe)},et.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):cn(this._nodes.keys(),this._nodes.size)},et.forEachNode=function(pe){if("function"!=typeof pe)throw new An("Graph.forEachNode: expecting a callback.");for(var Te,Qe,Mt=this._nodes.values();!0!==(Te=Mt.next()).done;)pe((Qe=Te.value).key,Qe.attributes)},et.findNode=function(pe){if("function"!=typeof pe)throw new An("Graph.findNode: expecting a callback.");for(var Te,Qe,Mt=this._nodes.values();!0!==(Te=Mt.next()).done;)if(pe((Qe=Te.value).key,Qe.attributes))return Qe.key},et.mapNodes=function(pe){if("function"!=typeof pe)throw new An("Graph.mapNode: expecting a callback.");for(var Te,Qe,Mt=this._nodes.values(),Xt=new Array(this.order),xn=0;!0!==(Te=Mt.next()).done;)Xt[xn++]=pe((Qe=Te.value).key,Qe.attributes);return Xt},et.someNode=function(pe){if("function"!=typeof pe)throw new An("Graph.someNode: expecting a callback.");for(var Te,Qe,Mt=this._nodes.values();!0!==(Te=Mt.next()).done;)if(pe((Qe=Te.value).key,Qe.attributes))return!0;return!1},et.everyNode=function(pe){if("function"!=typeof pe)throw new An("Graph.everyNode: expecting a callback.");for(var Te,Qe,Mt=this._nodes.values();!0!==(Te=Mt.next()).done;)if(!pe((Qe=Te.value).key,Qe.attributes))return!1;return!0},et.filterNodes=function(pe){if("function"!=typeof pe)throw new An("Graph.filterNodes: expecting a callback.");for(var Te,Qe,Mt=this._nodes.values(),Xt=[];!0!==(Te=Mt.next()).done;)pe((Qe=Te.value).key,Qe.attributes)&&Xt.push(Qe.key);return Xt},et.reduceNodes=function(pe,Te){if("function"!=typeof pe)throw new An("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new An("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var Qe,Mt,Xt=Te,xn=this._nodes.values();!0!==(Qe=xn.next()).done;)Xt=pe(Xt,(Mt=Qe.value).key,Mt.attributes);return Xt},et.nodeEntries=function(){var pe=this._nodes.values();return new mt(function(){var Te=pe.next();if(Te.done)return Te;var Qe=Te.value;return{value:{node:Qe.key,attributes:Qe.attributes},done:!1}})},et.export=function(){var pe=new Array(this._nodes.size),Te=0;this._nodes.forEach(function(Mt,Xt){var vi,mi;pe[Te++]=(mi={key:Xt},se((vi=Mt).attributes)||(mi.attributes=R({},vi.attributes)),mi)});var Qe=new Array(this._edges.size);return Te=0,this._edges.forEach(function(Mt,Xt){var vi,mi;Qe[Te++]=(mi={key:Xt,source:(vi=Mt).source.key,target:vi.target.key},se(vi.attributes)||(mi.attributes=R({},vi.attributes)),vi.undirected&&(mi.undirected=!0),mi)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:pe,edges:Qe}},et.import=function(pe){var Te,Qe,Mt,Xt,xn,vi=this,mi=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ne(pe))return pe.forEachNode(function(hs,Io){mi?vi.mergeNode(hs,Io):vi.addNode(hs,Io)}),pe.forEachEdge(function(hs,Io,Vl,Zr,Qr,el,Xl){mi?Xl?vi.mergeUndirectedEdgeWithKey(hs,Vl,Zr,Io):vi.mergeDirectedEdgeWithKey(hs,Vl,Zr,Io):Xl?vi.addUndirectedEdgeWithKey(hs,Vl,Zr,Io):vi.addDirectedEdgeWithKey(hs,Vl,Zr,Io)}),this;if(!te(pe))throw new An("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(pe.attributes){if(!te(pe.attributes))throw new An("Graph.import: invalid attributes. Expecting a plain object.");mi?this.mergeAttributes(pe.attributes):this.replaceAttributes(pe.attributes)}if(pe.nodes){if(Mt=pe.nodes,!Array.isArray(Mt))throw new An("Graph.import: invalid nodes. Expecting an array.");for(Te=0,Qe=Mt.length;Te<Qe;Te++){kt(Xt=Mt[Te]);var Dr=Xt.key,_r=Xt.attributes;mi?this.mergeNode(Dr,_r):this.addNode(Dr,_r)}}if(pe.edges){if(Mt=pe.edges,!Array.isArray(Mt))throw new An("Graph.import: invalid edges. Expecting an array.");for(Te=0,Qe=Mt.length;Te<Qe;Te++){on(xn=Mt[Te]);var dr=xn.source,ys=xn.target,Bs=xn.attributes,Pr=xn.undirected,_o=void 0!==Pr&&Pr;"key"in xn?(mi?_o?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:_o?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,xn.key,dr,ys,Bs):(mi?_o?this.mergeUndirectedEdge:this.mergeDirectedEdge:_o?this.addUndirectedEdge:this.addDirectedEdge).call(this,dr,ys,Bs)}}return this},et.nullCopy=function(pe){var Te=new dt(R({},this._options,pe));return Te.replaceAttributes(R({},this.getAttributes())),Te},et.emptyCopy=function(pe){var Te=this.nullCopy(pe);return this._nodes.forEach(function(Qe,Mt){var Xt=R({},Qe.attributes);Qe=new Te.NodeDataClass(Mt,Xt),Te._nodes.set(Mt,Qe)}),Te},et.copy=function(pe){if("string"==typeof(pe=pe||{}).type&&pe.type!==this.type&&"mixed"!==pe.type)throw new le('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(pe.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof pe.multi&&pe.multi!==this.multi&&!0!==pe.multi)throw new le("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof pe.allowSelfLoops&&pe.allowSelfLoops!==this.allowSelfLoops&&!0!==pe.allowSelfLoops)throw new le("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var Te,Qe,Mt=this.emptyCopy(pe),Xt=this._edges.values();!0!==(Te=Xt.next()).done;)xs(Mt,"copy",!1,(Qe=Te.value).undirected,Qe.key,Qe.source.key,Qe.target.key,R({},Qe.attributes));return Mt},et.toJSON=function(){return this.export()},et.toString=function(){return"[object Graph]"},et.inspect=function(){var pe=this,Te={};this._nodes.forEach(function(vi,mi){Te[mi]=vi.attributes});var Qe={},Mt={};this._edges.forEach(function(vi,mi){var xi,Dr=vi.undirected?"--":"->",_r="",gr=vi.source.key,dr=vi.target.key;vi.undirected&&gr>dr&&(xi=gr,gr=dr,dr=xi);var ys="(".concat(gr,")").concat(Dr,"(").concat(dr,")");mi.startsWith("geid_")?pe.multi&&(void 0===Mt[ys]?Mt[ys]=0:Mt[ys]++,_r+="".concat(Mt[ys],". ")):_r+="[".concat(mi,"]: "),Qe[_r+=ys]=vi.attributes});var Xt={};for(var xn in this)this.hasOwnProperty(xn)&&!ar.has(xn)&&"function"!=typeof this[xn]&&"symbol"!==Ae(xn)&&(Xt[xn]=this[xn]);return Xt.attributes=this._attributes,Xt.nodes=Te,Xt.edges=Qe,ee(Xt,"constructor",this.constructor),Xt},dt}(Ce.exports.EventEmitter);typeof Symbol<"u"&&(Kr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Kr.prototype.inspect),[{name:function(je){return"".concat(je,"Edge")},generateKey:!0},{name:function(je){return"".concat(je,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(je){return"".concat(je,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(je){return"".concat(je,"EdgeWithKey")}},{name:function(je){return"".concat(je,"DirectedEdgeWithKey")},type:"directed"},{name:function(je){return"".concat(je,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(je){["add","merge","update"].forEach(function(dt){var et=je.name(dt),pe="add"===dt?xs:xo;Kr.prototype[et]=je.generateKey?function(Te,Qe,Mt){return pe(this,et,!0,"undirected"===(je.type||this.type),null,Te,Qe,Mt,"update"===dt)}:function(Te,Qe,Mt,Xt){return pe(this,et,!1,"undirected"===(je.type||this.type),Te,Qe,Mt,Xt,"update"===dt)}})}),je=Kr,ht.forEach(function(dt){var et=dt.name,pe=dt.attacher;pe(je,et("Node"),0),pe(je,et("Source"),1),pe(je,et("Target"),2),pe(je,et("Opposite"),3)}),function(je){Ht.forEach(function(dt){var et=dt.name,pe=dt.attacher;pe(je,et("Edge"),"mixed"),pe(je,et("DirectedEdge"),"directed"),pe(je,et("UndirectedEdge"),"undirected")})}(Kr),function(je){Et.forEach(function(dt){var pe,Te,Qe,Mt;Qe=(pe=dt).type,Mt=pe.direction,je.prototype[Te=pe.name]=function(Xt,xn){if("mixed"!==Qe&&"mixed"!==this.type&&Qe!==this.type)return[];if(!arguments.length)return qs(this,Qe);if(1===arguments.length){var vi=this._nodes.get(Xt=""+Xt);if(void 0===vi)throw new $e("Graph.".concat(Te,': could not find the "').concat(Xt,'" node in the graph.'));return fl(this.multi,"mixed"===Qe?this.type:Qe,Mt,vi)}if(2===arguments.length){xn=""+xn;var mi=this._nodes.get(Xt=""+Xt);if(!mi)throw new $e("Graph.".concat(Te,':  could not find the "').concat(Xt,'" source node in the graph.'));if(!this._nodes.has(xn))throw new $e("Graph.".concat(Te,':  could not find the "').concat(xn,'" target node in the graph.'));return kc(Qe,this.multi,Mt,mi,xn)}throw new An("Graph.".concat(Te,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(et,pe){var Te=pe.name,Qe=pe.type,Mt=pe.direction,Xt="forEach"+Te[0].toUpperCase()+Te.slice(1,-1);et.prototype[Xt]=function(xi,Dr,_r){if("mixed"===Qe||"mixed"===this.type||Qe===this.type){if(1===arguments.length)return Zi(!1,this,Qe,_r=xi);if(2===arguments.length){_r=Dr;var gr=this._nodes.get(xi=""+xi);if(void 0===gr)throw new $e("Graph.".concat(Xt,': could not find the "').concat(xi,'" node in the graph.'));return Ha(!1,this.multi,"mixed"===Qe?this.type:Qe,Mt,gr,_r)}if(3===arguments.length){Dr=""+Dr;var dr=this._nodes.get(xi=""+xi);if(!dr)throw new $e("Graph.".concat(Xt,':  could not find the "').concat(xi,'" source node in the graph.'));if(!this._nodes.has(Dr))throw new $e("Graph.".concat(Xt,':  could not find the "').concat(Dr,'" target node in the graph.'));return xd(!1,Qe,this.multi,Mt,dr,Dr,_r)}throw new An("Graph.".concat(Xt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var xn="map"+Te[0].toUpperCase()+Te.slice(1);et.prototype[xn]=function(){var xi,Dr=Array.prototype.slice.call(arguments),_r=Dr.pop();if(0===Dr.length){var gr=0;"directed"!==Qe&&(gr+=this.undirectedSize),"undirected"!==Qe&&(gr+=this.directedSize),xi=new Array(gr);var dr=0;Dr.push(function(ys,Bs,Pr,_o,hs,Io,Vl){xi[dr++]=_r(ys,Bs,Pr,_o,hs,Io,Vl)})}else xi=[],Dr.push(function(ys,Bs,Pr,_o,hs,Io,Vl){xi.push(_r(ys,Bs,Pr,_o,hs,Io,Vl))});return this[Xt].apply(this,Dr),xi};var vi="filter"+Te[0].toUpperCase()+Te.slice(1);et.prototype[vi]=function(){var xi=Array.prototype.slice.call(arguments),Dr=xi.pop(),_r=[];return xi.push(function(gr,dr,ys,Bs,Pr,_o,hs){Dr(gr,dr,ys,Bs,Pr,_o,hs)&&_r.push(gr)}),this[Xt].apply(this,xi),_r};var mi="reduce"+Te[0].toUpperCase()+Te.slice(1);et.prototype[mi]=function(){var xi,Dr,_r=Array.prototype.slice.call(arguments);if(_r.length<2||_r.length>4)throw new An("Graph.".concat(mi,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(_r.length,")."));if("function"==typeof _r[_r.length-1]&&"function"!=typeof _r[_r.length-2])throw new An("Graph.".concat(mi,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===_r.length?(xi=_r[0],Dr=_r[1],_r=[]):3===_r.length?(xi=_r[1],Dr=_r[2],_r=[_r[0]]):4===_r.length&&(xi=_r[2],Dr=_r[3],_r=[_r[0],_r[1]]);var gr=Dr;return _r.push(function(dr,ys,Bs,Pr,_o,hs,Io){gr=xi(gr,dr,ys,Bs,Pr,_o,hs,Io)}),this[Xt].apply(this,_r),gr}}(je,dt),function(et,pe){var Te=pe.name,Qe=pe.type,Mt=pe.direction,Xt="find"+Te[0].toUpperCase()+Te.slice(1,-1);et.prototype[Xt]=function(mi,xi,Dr){if("mixed"!==Qe&&"mixed"!==this.type&&Qe!==this.type)return!1;if(1===arguments.length)return Zi(!0,this,Qe,Dr=mi);if(2===arguments.length){Dr=xi;var _r=this._nodes.get(mi=""+mi);if(void 0===_r)throw new $e("Graph.".concat(Xt,': could not find the "').concat(mi,'" node in the graph.'));return Ha(!0,this.multi,"mixed"===Qe?this.type:Qe,Mt,_r,Dr)}if(3===arguments.length){xi=""+xi;var gr=this._nodes.get(mi=""+mi);if(!gr)throw new $e("Graph.".concat(Xt,':  could not find the "').concat(mi,'" source node in the graph.'));if(!this._nodes.has(xi))throw new $e("Graph.".concat(Xt,':  could not find the "').concat(xi,'" target node in the graph.'));return xd(!0,Qe,this.multi,Mt,gr,xi,Dr)}throw new An("Graph.".concat(Xt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var xn="some"+Te[0].toUpperCase()+Te.slice(1,-1);et.prototype[xn]=function(){var mi=Array.prototype.slice.call(arguments),xi=mi.pop();return mi.push(function(Dr,_r,gr,dr,ys,Bs,Pr){return xi(Dr,_r,gr,dr,ys,Bs,Pr)}),!!this[Xt].apply(this,mi)};var vi="every"+Te[0].toUpperCase()+Te.slice(1,-1);et.prototype[vi]=function(){var mi=Array.prototype.slice.call(arguments),xi=mi.pop();return mi.push(function(Dr,_r,gr,dr,ys,Bs,Pr){return!xi(Dr,_r,gr,dr,ys,Bs,Pr)}),!this[Xt].apply(this,mi)}}(je,dt),function(et,pe){var Qe=pe.type,Mt=pe.direction,Xt=pe.name.slice(0,-1)+"Entries";et.prototype[Xt]=function(xn,vi){if("mixed"!==Qe&&"mixed"!==this.type&&Qe!==this.type)return mt.empty();if(!arguments.length)return ra(this,Qe);if(1===arguments.length){var mi=this._nodes.get(xn=""+xn);if(!mi)throw new $e("Graph.".concat(Xt,': could not find the "').concat(xn,'" node in the graph.'));return Er(Qe,Mt,mi)}if(2===arguments.length){vi=""+vi;var xi=this._nodes.get(xn=""+xn);if(!xi)throw new $e("Graph.".concat(Xt,':  could not find the "').concat(xn,'" source node in the graph.'));if(!this._nodes.has(vi))throw new $e("Graph.".concat(Xt,':  could not find the "').concat(vi,'" target node in the graph.'));return Sa(Qe,Mt,xi,vi)}throw new An("Graph.".concat(Xt,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(je,dt)})}(Kr),function(je){Oc.forEach(function(dt){var et,pe,Te,Qe,Mt,Xt,xn;(function gn(je,dt){var et=dt.name,pe=dt.type,Te=dt.direction;je.prototype[et]=function(Qe){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return[];var Mt=this._nodes.get(Qe=""+Qe);if(void 0===Mt)throw new $e("Graph.".concat(et,': could not find the "').concat(Qe,'" node in the graph.'));return function(Xt,xn,vi){if("mixed"!==Xt){if("undirected"===Xt)return Object.keys(vi.undirected);if("string"==typeof xn)return Object.keys(vi[xn])}var mi=[];return Rt(!1,Xt,xn,vi,function(xi){mi.push(xi)}),mi}("mixed"===pe?this.type:pe,Te,Mt)}})(je,dt),function(et,pe){var Te=pe.name,Qe=pe.type,Mt=pe.direction,Xt="forEach"+Te[0].toUpperCase()+Te.slice(1,-1);et.prototype[Xt]=function(xi,Dr){if("mixed"===Qe||"mixed"===this.type||Qe===this.type){var _r=this._nodes.get(xi=""+xi);if(void 0===_r)throw new $e("Graph.".concat(Xt,': could not find the "').concat(xi,'" node in the graph.'));Rt(!1,"mixed"===Qe?this.type:Qe,Mt,_r,Dr)}};var xn="map"+Te[0].toUpperCase()+Te.slice(1);et.prototype[xn]=function(xi,Dr){var _r=[];return this[Xt](xi,function(gr,dr){_r.push(Dr(gr,dr))}),_r};var vi="filter"+Te[0].toUpperCase()+Te.slice(1);et.prototype[vi]=function(xi,Dr){var _r=[];return this[Xt](xi,function(gr,dr){Dr(gr,dr)&&_r.push(gr)}),_r};var mi="reduce"+Te[0].toUpperCase()+Te.slice(1);et.prototype[mi]=function(xi,Dr,_r){if(arguments.length<3)throw new An("Graph.".concat(mi,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var gr=_r;return this[Xt](xi,function(dr,ys){gr=Dr(gr,dr,ys)}),gr}}(je,dt),et=je,Qe=(pe=dt).type,Mt=pe.direction,Xt=(Te=pe.name)[0].toUpperCase()+Te.slice(1,-1),et.prototype[xn="find"+Xt]=function(xi,Dr){if("mixed"===Qe||"mixed"===this.type||Qe===this.type){var _r=this._nodes.get(xi=""+xi);if(void 0===_r)throw new $e("Graph.".concat(xn,': could not find the "').concat(xi,'" node in the graph.'));return Rt(!0,"mixed"===Qe?this.type:Qe,Mt,_r,Dr)}},et.prototype["some"+Xt]=function(xi,Dr){return!!this[xn](xi,Dr)},et.prototype["every"+Xt]=function(xi,Dr){return!this[xn](xi,function(_r,gr){return!Dr(_r,gr)})},function yn(je,dt){var pe=dt.type,Te=dt.direction,Qe=dt.name.slice(0,-1)+"Entries";je.prototype[Qe]=function(Mt){if("mixed"!==pe&&"mixed"!==this.type&&pe!==this.type)return mt.empty();var Xt=this._nodes.get(Mt=""+Mt);if(void 0===Xt)throw new $e("Graph.".concat(Qe,': could not find the "').concat(Mt,'" node in the graph.'));return function(xn,vi,mi){if("mixed"!==xn){if("undirected"===xn)return fn(null,mi,mi.undirected);if("string"==typeof vi)return fn(null,mi,mi[vi])}var xi=mt.empty(),Dr=new Ja;return"undirected"!==xn&&("out"!==vi&&(xi=Me(xi,fn(Dr,mi,mi.in))),"in"!==vi&&(xi=Me(xi,fn(Dr,mi,mi.out)))),"directed"!==xn&&(xi=Me(xi,fn(Dr,mi,mi.undirected))),xi}("mixed"===pe?this.type:pe,Te,Xt)}}(je,dt)})}(Kr);var Ga=function(je){function dt(et){var pe=R({type:"directed"},et);if("multi"in pe&&!1!==pe.multi)throw new An("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==pe.type)throw new An('DirectedGraph.from: inconsistent "'+pe.type+'" type in given options!');return je.call(this,pe)||this}return W(dt,je),dt}(Kr),Ns=function(je){function dt(et){var pe=R({type:"undirected"},et);if("multi"in pe&&!1!==pe.multi)throw new An("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==pe.type)throw new An('UndirectedGraph.from: inconsistent "'+pe.type+'" type in given options!');return je.call(this,pe)||this}return W(dt,je),dt}(Kr),ya=function(je){function dt(et){var pe=R({multi:!0},et);if("multi"in pe&&!0!==pe.multi)throw new An("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return je.call(this,pe)||this}return W(dt,je),dt}(Kr),sa=function(je){function dt(et){var pe=R({type:"directed",multi:!0},et);if("multi"in pe&&!0!==pe.multi)throw new An("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==pe.type)throw new An('MultiDirectedGraph.from: inconsistent "'+pe.type+'" type in given options!');return je.call(this,pe)||this}return W(dt,je),dt}(Kr),zl=function(je){function dt(et){var pe=R({type:"undirected",multi:!0},et);if("multi"in pe&&!0!==pe.multi)throw new An("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==pe.type)throw new An('MultiUndirectedGraph.from: inconsistent "'+pe.type+'" type in given options!');return je.call(this,pe)||this}return W(dt,je),dt}(Kr);function Fc(je){je.from=function(dt,et){var pe=R({},dt.options,et),Te=new je(pe);return Te.import(dt),Te}}return Fc(Kr),Fc(Ga),Fc(Ns),Fc(ya),Fc(sa),Fc(zl),Kr.Graph=Kr,Kr.DirectedGraph=Ga,Kr.UndirectedGraph=Ns,Kr.MultiGraph=ya,Kr.MultiDirectedGraph=sa,Kr.MultiUndirectedGraph=zl,Kr.InvalidArgumentsGraphError=An,Kr.NotFoundGraphError=$e,Kr.UsageGraphError=le,Kr}()},5203:(Ve,Ae,W)=>{Ve.exports=W(8732)},8732:function(Ve,Ae){var W,Y,L;(function(){var G,U,j,D,R,q,ne,te,se,ee,K,z,ce,Ce,Re;j=Math.floor,ee=Math.min,U=function(ie,oe){return ie<oe?-1:ie>oe?1:0},se=function(ie,oe,N,V,J){var fe;if(null==N&&(N=0),null==J&&(J=U),N<0)throw new Error("lo must be non-negative");for(null==V&&(V=ie.length);N<V;)J(oe,ie[fe=j((N+V)/2)])<0?V=fe:N=fe+1;return[].splice.apply(ie,[N,N-N].concat(oe)),oe},q=function(ie,oe,N){return null==N&&(N=U),ie.push(oe),Ce(ie,0,ie.length-1,N)},R=function(ie,oe){var N,V;return null==oe&&(oe=U),N=ie.pop(),ie.length?(V=ie[0],ie[0]=N,Re(ie,0,oe)):V=N,V},te=function(ie,oe,N){var V;return null==N&&(N=U),V=ie[0],ie[0]=oe,Re(ie,0,N),V},ne=function(ie,oe,N){var V;return null==N&&(N=U),ie.length&&N(ie[0],oe)<0&&(oe=(V=[ie[0],oe])[0],ie[0]=V[1],Re(ie,0,N)),oe},D=function(ie,oe){var V,fe,Pe,nt,Le;for(null==oe&&(oe=U),nt=[],V=0,fe=(Pe=function(){Le=[];for(var at=0,It=j(ie.length/2);0<=It?at<It:at>It;0<=It?at++:at--)Le.push(at);return Le}.apply(this).reverse()).length;V<fe;V++)nt.push(Re(ie,Pe[V],oe));return nt},ce=function(ie,oe,N){var V;if(null==N&&(N=U),-1!==(V=ie.indexOf(oe)))return Ce(ie,0,V,N),Re(ie,V,N)},K=function(ie,oe,N){var J,fe,ke,Pe;if(null==N&&(N=U),!(J=ie.slice(0,oe)).length)return J;for(D(J,N),fe=0,ke=(Pe=ie.slice(oe)).length;fe<ke;fe++)ne(J,Pe[fe],N);return J.sort(N).reverse()},z=function(ie,oe,N){var V,fe,ke,Pe,nt,Le,at,It,Ge;if(null==N&&(N=U),10*oe<=ie.length){if(!(ke=ie.slice(0,oe).sort(N)).length)return ke;for(fe=ke[ke.length-1],Pe=0,Le=(at=ie.slice(oe)).length;Pe<Le;Pe++)N(V=at[Pe],fe)<0&&(se(ke,V,0,null,N),ke.pop(),fe=ke[ke.length-1]);return ke}for(D(ie,N),Ge=[],nt=0,It=ee(oe,ie.length);0<=It?nt<It:nt>It;0<=It?++nt:--nt)Ge.push(R(ie,N));return Ge},Ce=function(ie,oe,N,V){var J,fe,ke;for(null==V&&(V=U),J=ie[N];N>oe&&V(J,fe=ie[ke=N-1>>1])<0;)ie[N]=fe,N=ke;return ie[N]=J},Re=function(ie,oe,N){var V,J,fe,ke,Pe;for(null==N&&(N=U),J=ie.length,Pe=oe,fe=ie[oe],V=2*oe+1;V<J;)(ke=V+1)<J&&!(N(ie[V],ie[ke])<0)&&(V=ke),ie[oe]=ie[V],V=2*(oe=V)+1;return ie[oe]=fe,Ce(ie,Pe,oe,N)},G=function(){function ie(oe){this.cmp=oe??U,this.nodes=[]}return ie.push=q,ie.pop=R,ie.replace=te,ie.pushpop=ne,ie.heapify=D,ie.updateItem=ce,ie.nlargest=K,ie.nsmallest=z,ie.prototype.push=function(oe){return q(this.nodes,oe,this.cmp)},ie.prototype.pop=function(){return R(this.nodes,this.cmp)},ie.prototype.peek=function(){return this.nodes[0]},ie.prototype.contains=function(oe){return-1!==this.nodes.indexOf(oe)},ie.prototype.replace=function(oe){return te(this.nodes,oe,this.cmp)},ie.prototype.pushpop=function(oe){return ne(this.nodes,oe,this.cmp)},ie.prototype.heapify=function(){return D(this.nodes,this.cmp)},ie.prototype.updateItem=function(oe){return ce(this.nodes,oe,this.cmp)},ie.prototype.clear=function(){return this.nodes=[]},ie.prototype.empty=function(){return 0===this.nodes.length},ie.prototype.size=function(){return this.nodes.length},ie.prototype.clone=function(){var oe;return(oe=new ie).nodes=this.nodes.slice(0),oe},ie.prototype.toArray=function(){return this.nodes.slice(0)},ie.prototype.insert=ie.prototype.push,ie.prototype.top=ie.prototype.peek,ie.prototype.front=ie.prototype.peek,ie.prototype.has=ie.prototype.contains,ie.prototype.copy=ie.prototype.clone,ie}(),Y=[],void 0===(L="function"==typeof(W=function(){return G})?W.apply(Ae,Y):W)||(Ve.exports=L)}).call(this)},8461:(Ve,Ae)=>{Ae.read=function(W,Y,L,G,U){var j,D,R=8*U-G-1,q=(1<<R)-1,ne=q>>1,te=-7,se=L?U-1:0,ee=L?-1:1,K=W[Y+se];for(se+=ee,j=K&(1<<-te)-1,K>>=-te,te+=R;te>0;j=256*j+W[Y+se],se+=ee,te-=8);for(D=j&(1<<-te)-1,j>>=-te,te+=G;te>0;D=256*D+W[Y+se],se+=ee,te-=8);if(0===j)j=1-ne;else{if(j===q)return D?NaN:1/0*(K?-1:1);D+=Math.pow(2,G),j-=ne}return(K?-1:1)*D*Math.pow(2,j-G)},Ae.write=function(W,Y,L,G,U,j){var D,R,q,ne=8*j-U-1,te=(1<<ne)-1,se=te>>1,ee=23===U?Math.pow(2,-24)-Math.pow(2,-77):0,K=G?0:j-1,z=G?1:-1,ce=Y<0||0===Y&&1/Y<0?1:0;for(Y=Math.abs(Y),isNaN(Y)||Y===1/0?(R=isNaN(Y)?1:0,D=te):(D=Math.floor(Math.log(Y)/Math.LN2),Y*(q=Math.pow(2,-D))<1&&(D--,q*=2),(Y+=D+se>=1?ee/q:ee*Math.pow(2,1-se))*q>=2&&(D++,q/=2),D+se>=te?(R=0,D=te):D+se>=1?(R=(Y*q-1)*Math.pow(2,U),D+=se):(R=Y*Math.pow(2,se-1)*Math.pow(2,U),D=0));U>=8;W[L+K]=255&R,K+=z,R/=256,U-=8);for(D=D<<U|R,ne+=U;ne>0;W[L+K]=255&D,K+=z,D/=256,ne-=8);W[L+K-z]|=128*ce}},3894:Ve=>{Ve.exports="function"==typeof Object.create?function(W,Y){Y&&(W.super_=Y,W.prototype=Object.create(Y.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}))}:function(W,Y){if(Y){W.super_=Y;var L=function(){};L.prototype=Y.prototype,W.prototype=new L,W.prototype.constructor=W}}},397:Ve=>{Ve.exports=function L(G,U,j){function D(ne,te){if(!U[ne]){if(!G[ne]){if(R)return R(ne,!0);var ee=new Error("Cannot find module '"+ne+"'");throw ee.code="MODULE_NOT_FOUND",ee}var K=U[ne]={exports:{}};G[ne][0].call(K.exports,function(z){return D(G[ne][1][z]||z)},K,K.exports,L,G,U,j)}return U[ne].exports}for(var R=void 0,q=0;q<j.length;q++)D(j[q]);return D}({1:[function(L,G,U){const j=L("./utils"),D=function(){"use strict";const R=j.stringToArray,q=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],ne=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],te=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],se=["Thousand","Million","Billion","Trillion"];const K={};q.forEach(function(le,ot){K[le.toLowerCase()]=ot}),ne.forEach(function(le,ot){K[le.toLowerCase()]=ot}),te.forEach(function(le,ot){const Je=le.toLowerCase();K[Je]=10*(ot+2),K[Je.substring(0,le.length-1)+"ieth"]=K[Je]}),K.hundredth=100,se.forEach(function(le,ot){const Je=le.toLowerCase(),Sn=Math.pow(10,3*(ot+1));K[Je]=Sn,K[Je+"th"]=Sn});const ce=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],Ce={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function Re(le){for(var ot=0;ot<ce.length;ot++){const Je=ce[ot];if(le>=Je[0])return Je[1]+Re(le-Je[0])}return""}function V(le,ot){if(!(typeof le>"u"))return ke(le=Math.floor(le),nt(ot))}const J_DECIMAL="decimal",J_LETTERS="letters",J_ROMAN="roman",J_WORDS="words",J_SEQUENCE="sequence",fe_UPPER="upper",fe_LOWER="lower",fe_TITLE="title";function ke(le,ot){let Je;const Sn=le<0;switch(le=Math.abs(le),ot.primary){case J_LETTERS:Je=function oe(le,ot){for(var Je=[],Sn=ot.charCodeAt(0);le>0;)Je.unshift(String.fromCharCode((le-1)%26+Sn)),le=Math.floor((le-1)/26);return Je.join("")}(le,ot.case===fe_UPPER?"A":"a");break;case J_ROMAN:Je=Re(le),ot.case===fe_UPPER&&(Je=Je.toUpperCase());break;case J_WORDS:Je=function ee(le,ot){var Je=function(Hn,pt,ht){var Ht="";if(Hn<=19)Ht=(pt?" and ":"")+(ht?ne[Hn]:q[Hn]);else if(Hn<100){const Ie=Math.floor(Hn/10),Me=Hn%10;Ht=(pt?" and ":"")+te[Ie-2],Me>0?Ht+="-"+Je(Me,!1,ht):ht&&(Ht=Ht.substring(0,Ht.length-1)+"ieth")}else if(Hn<1e3){const Ie=Math.floor(Hn/100),Me=Hn%100;Ht=(pt?", ":"")+q[Ie]+" Hundred",Me>0?Ht+=Je(Me,!0,ht):ht&&(Ht+="th")}else{var We=Math.floor(Math.log10(Hn)/3);We>se.length&&(We=se.length);const Ie=Math.pow(10,3*We),Me=Math.floor(Hn/Ie),Et=Hn-Me*Ie;Ht=(pt?", ":"")+Je(Me,!1,!1)+" "+se[We-1],Et>0?Ht+=Je(Et,!0,ht):ht&&(Ht+="th")}return Ht};return Je(le,!1,ot)}(le,ot.ordinal),ot.case===fe_UPPER?Je=Je.toUpperCase():ot.case===fe_LOWER&&(Je=Je.toLowerCase());break;case J_DECIMAL:Je=""+le;var Hn=ot.mandatoryDigits-Je.length;if(Hn>0){var pt=new Array(Hn+1).join("0");Je=pt+Je}if(48!==ot.zeroCode&&(Je=R(Je).map(Ie=>String.fromCodePoint(Ie.codePointAt(0)+ot.zeroCode-48)).join("")),ot.regular)for(let Me=Math.floor((Je.length-1)/ot.groupingSeparators.position);Me>0;Me--){const Et=Je.length-Me*ot.groupingSeparators.position;Je=Je.substr(0,Et)+ot.groupingSeparators.character+Je.substr(Et)}else ot.groupingSeparators.reverse().forEach(Ie=>{const Me=Je.length-Ie.position;Je=Je.substr(0,Me)+Ie.character+Je.substr(Me)});if(ot.ordinal){var We={1:"st",2:"nd",3:"rd"}[Je[Je.length-1]];(!We||Je.length>1&&"1"===Je[Je.length-2])&&(We="th"),Je+=We}break;case J_SEQUENCE:throw{code:"D3130",value:ot.token}}return Sn&&(Je="-"+Je),Je}const Pe=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function nt(le){const ot={type:"integer",primary:J_DECIMAL,case:fe_LOWER,ordinal:!1};let Je,Sn;const Hn=le.lastIndexOf(";");switch(-1===Hn?Je=le:(Je=le.substring(0,Hn),Sn=le.substring(Hn+1),"o"===Sn[0]&&(ot.ordinal=!0)),Je){case"A":ot.case=fe_UPPER;case"a":ot.primary=J_LETTERS;break;case"I":ot.case=fe_UPPER;case"i":ot.primary=J_ROMAN;break;case"W":ot.case=fe_UPPER,ot.primary=J_WORDS;break;case"Ww":ot.case=fe_TITLE,ot.primary=J_WORDS;break;case"w":ot.primary=J_WORDS;break;default:{let pt=null,ht=0,Ht=0,We=[],Ie=0;if(R(Je).map(Et=>Et.codePointAt(0)).reverse().forEach(Et=>{let dn=!1;for(let Xn=0;Xn<Pe.length;Xn++){const Jn=Pe[Xn];if(Et>=Jn&&Et<=Jn+9){if(dn=!0,ht++,Ie++,null===pt)pt=Jn;else if(Jn!==pt)throw{code:"D3131"};break}}dn||(35===Et?(Ie++,Ht++):We.push({position:Ie,character:String.fromCodePoint(Et)}))}),ht>0){ot.primary=J_DECIMAL,ot.zeroCode=pt,ot.mandatoryDigits=ht,ot.optionalDigits=Ht;const dn=function(Xn){if(0===Xn.length)return 0;const Jn=Xn[0].character;for(let qs=1;qs<Xn.length;qs++)if(Xn[qs].character!==Jn)return 0;const ms=Xn.map(qs=>qs.position),Hs=function(qs,Zi){return 0===Zi?qs:Hs(Zi,qs%Zi)},os=ms.reduce(Hs);for(let qs=1;qs<=ms.length;qs++)if(-1===ms.indexOf(qs*os))return 0;return os}(We);dn>0?(ot.regular=!0,ot.groupingSeparators={position:dn,character:We[0].character}):(ot.regular=!1,ot.groupingSeparators=We)}else ot.primary=J_SEQUENCE,ot.token=Je}}return ot}const Le={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function at(le){var ot=[];const Je={type:"datetime",parts:ot},Sn=function(dn,Xn){if(Xn>dn){let Jn=le.substring(dn,Xn);Jn=Jn.split("]]").join("]"),ot.push({type:"literal",value:Jn})}};for(var Hn=0,pt=0;pt<le.length;){if("["===le.charAt(pt)){if("["===le.charAt(pt+1)){Sn(Hn,pt),ot.push({type:"literal",value:"["}),Hn=pt+=2;continue}if(Sn(Hn,pt),-1===(pt=le.indexOf("]",Hn=pt)))throw{code:"D3135"};let dn=le.substring(Hn+1,pt);dn=dn.split(/\s+/).join("");var We,ht={type:"marker",component:dn.charAt(0)},Ht=dn.lastIndexOf(",");if(-1!==Ht){const Xn=dn.substring(Ht+1),Jn=Xn.indexOf("-");let ms,Hs;const os=function(Zi){if(!(typeof Zi>"u"||"*"===Zi))return parseInt(Zi)};-1===Jn?ms=Xn:(ms=Xn.substring(0,Jn),Hs=Xn.substring(Jn+1));const qs={min:os(ms),max:os(Hs)};ht.width=qs,We=dn.substring(1,Ht)}else We=dn.substring(1);if(1===We.length)ht.presentation1=We;else if(We.length>1){var Ie=We.charAt(We.length-1);-1!=="atco".indexOf(Ie)?(ht.presentation2=Ie,"o"===Ie&&(ht.ordinal=!0),ht.presentation1=We.substring(0,We.length-1)):ht.presentation1=We}else ht.presentation1=Le[ht.component];if(typeof ht.presentation1>"u")throw{code:"D3132",value:ht.component};if("n"===ht.presentation1[0])ht.names=fe_LOWER;else if("N"===ht.presentation1[0])ht.names="n"===ht.presentation1[1]?fe_TITLE:fe_UPPER;else if(-1!=="YMDdFWwXxHhmsf".indexOf(ht.component)){var Me=ht.presentation1;if(ht.presentation2&&(Me+=";"+ht.presentation2),ht.integerFormat=nt(Me),ht.width&&void 0!==ht.width.min&&ht.integerFormat.mandatoryDigits<ht.width.min&&(ht.integerFormat.mandatoryDigits=ht.width.min),-1!=="YMD".indexOf(ht.component))if(ht.n=-1,ht.width&&void 0!==ht.width.max)ht.n=ht.width.max,ht.integerFormat.mandatoryDigits=ht.n;else{var Et=ht.integerFormat.mandatoryDigits+ht.integerFormat.optionalDigits;Et>=2&&(ht.n=Et)}}("Z"===ht.component||"z"===ht.component)&&(ht.integerFormat=nt(ht.presentation1)),ot.push(ht),Hn=pt+1}pt++}return Sn(Hn,pt),Je}const It=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ge=["January","February","March","April","May","June","July","August","September","October","November","December"],yt=864e5,mt=function(le){const ot=Date.UTC(le.year,le.month);var Je=new Date(ot).getUTCDay();return 0===Je&&(Je=7),Je>4?ot+(8-Je)*yt:ot-(Je-1)*yt},_t=function(le,ot){return{year:le,month:ot,nextMonth:function(){return 11===ot?_t(le+1,0):_t(le,ot+1)},previousMonth:function(){return 0===ot?_t(le-1,11):_t(le,ot-1)},nextYear:function(){return _t(le+1,ot)},previousYear:function(){return _t(le-1,ot)}}},Fn=function(le,ot){return(ot-le)/(7*yt)+1},Ot=(le,ot)=>{let Je;switch(ot){case"Y":Je=le.getUTCFullYear();break;case"M":Je=le.getUTCMonth()+1;break;case"D":Je=le.getUTCDate();break;case"d":Je=(Date.UTC(le.getUTCFullYear(),le.getUTCMonth(),le.getUTCDate())-Date.UTC(le.getUTCFullYear(),0))/yt+1;break;case"F":Je=le.getUTCDay(),0===Je&&(Je=7);break;case"W":{const Sn=_t(le.getUTCFullYear(),0),Hn=mt(Sn),pt=Date.UTC(Sn.year,le.getUTCMonth(),le.getUTCDate());let ht=Fn(Hn,pt);if(ht>52)pt>=mt(Sn.nextYear())&&(ht=1);else if(ht<1){const Ht=mt(Sn.previousYear());ht=Fn(Ht,pt)}Je=Math.floor(ht);break}case"w":{const Sn=_t(le.getUTCFullYear(),le.getUTCMonth()),Hn=mt(Sn),pt=Date.UTC(Sn.year,Sn.month,le.getUTCDate());let ht=Fn(Hn,pt);if(ht>4)pt>=mt(Sn.nextMonth())&&(ht=1);else if(ht<1){const Ht=mt(Sn.previousMonth());ht=Fn(Ht,pt)}Je=Math.floor(ht);break}case"X":{const Sn=_t(le.getUTCFullYear(),0),Hn=mt(Sn),pt=mt(Sn.nextYear()),ht=le.getTime();Je=ht<Hn?Sn.year-1:ht>=pt?Sn.year+1:Sn.year;break}case"x":{const Sn=_t(le.getUTCFullYear(),le.getUTCMonth()),Hn=mt(Sn),pt=Sn.nextMonth(),ht=mt(pt),Ht=le.getTime();Je=Ht<Hn?Sn.previousMonth().month+1:Ht>=ht?pt.month+1:Sn.month+1;break}case"H":Je=le.getUTCHours();break;case"h":Je=le.getUTCHours(),Je%=12,0===Je&&(Je=12);break;case"P":Je=le.getUTCHours()>=12?"pm":"am";break;case"m":Je=le.getUTCMinutes();break;case"s":Je=le.getUTCSeconds();break;case"f":Je=le.getUTCMilliseconds();break;case"Z":case"z":break;case"C":case"E":Je="ISO"}return Je};let Pn=null;function nn(le,ot,Je){var Sn=0,Hn=0;if(typeof Je<"u"){const Me=parseInt(Je);Sn=Math.floor(Me/100),Hn=Me%100}let ht;typeof ot>"u"?(null===Pn&&(Pn=at("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),ht=Pn):ht=at(ot);const We=new Date(le+60*(60*Sn+Hn)*1e3);let Ie="";return ht.parts.forEach(function(Me){Ie+="literal"===Me.type?Me.value:function(Me,Et){var dn=Ot(Me,Et.component);if(-1!=="YMDdFWwXxHhms".indexOf(Et.component))if("Y"===Et.component&&-1!==Et.n&&(dn%=Math.pow(10,Et.n)),Et.names){if("M"===Et.component||"x"===Et.component)dn=Ge[dn-1];else{if("F"!==Et.component)throw{code:"D3133",value:Et.component};dn=It[dn]}Et.names===fe_UPPER?dn=dn.toUpperCase():Et.names===fe_LOWER&&(dn=dn.toLowerCase()),Et.width&&dn.length>Et.width.max&&(dn=dn.substring(0,Et.width.max))}else dn=ke(dn,Et.integerFormat);else if("f"===Et.component)dn=ke(dn,Et.integerFormat);else if("Z"===Et.component||"z"===Et.component){const Xn=100*Sn+Hn;if(Et.integerFormat.regular)dn=ke(Xn,Et.integerFormat);else{const Jn=Et.integerFormat.mandatoryDigits;if(1===Jn||2===Jn)dn=ke(Sn,Et.integerFormat),0!==Hn&&(dn+=":"+V(Hn,"00"));else{if(3!==Jn&&4!==Jn)throw{code:"D3134",value:Jn};dn=ke(Xn,Et.integerFormat)}}Xn>=0&&(dn="+"+dn),"z"===Et.component&&(dn="GMT"+dn),0===Xn&&"t"===Et.presentation2&&(dn="Z")}return dn}(We,Me)}),Ie}function Ze(le){var ot={};if("datetime"===le.type)ot.type="datetime",ot.parts=le.parts.map(function(Je){var Sn={};if("literal"===Je.type)Sn.regex=Je.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if("Z"===Je.component||"z"===Je.component){let pt;Array.isArray(Je.integerFormat.groupingSeparators)||(pt=Je.integerFormat.groupingSeparators),Sn.regex="","z"===Je.component&&(Sn.regex="GMT"),Sn.regex+="[-+][0-9]+",pt&&(Sn.regex+=pt.character+"[0-9]+"),Sn.parse=function(ht){"z"===Je.component&&(ht=ht.substring(3));let Ht=0,We=0;return pt?(Ht=Number.parseInt(ht.substring(0,ht.indexOf(pt.character))),We=Number.parseInt(ht.substring(ht.indexOf(pt.character)+1))):ht.length-1<=2?Ht=Number.parseInt(ht):(Ht=Number.parseInt(ht.substring(0,3)),We=Number.parseInt(ht.substring(3))),60*Ht+We}}else if(Je.integerFormat)Je.integerFormat.n=Je.n,Sn=Ze(Je.integerFormat);else{Sn.regex="[a-zA-Z]+";var Hn={};if("M"===Je.component||"x"===Je.component)Ge.forEach(function(pt,ht){Je.width&&Je.width.max?Hn[pt.substring(0,Je.width.max)]=ht+1:Hn[pt]=ht+1});else if("F"===Je.component)It.forEach(function(pt,ht){ht>0&&(Je.width&&Je.width.max?Hn[pt.substring(0,Je.width.max)]=ht:Hn[pt]=ht)});else{if("P"!==Je.component)throw{code:"D3133",value:Je.component};Hn={am:0,AM:0,pm:1,PM:1}}Sn.parse=function(pt){return Hn[pt]}}return Sn.component=Je.component,Sn});else{ot.type="integer";const Je=le.case===fe_UPPER;let Sn;switch(Sn=le.n&&le.n>0?0===le.optionalDigits?`{${le.n}}`:`{${le.n-le.optionalDigits},${le.n}}`:"+",le.primary){case J_LETTERS:ot.regex=Je?"[A-Z]+":"[a-z]+",ot.parse=function(Hn){return function N(le,ot){for(var Je=ot.charCodeAt(0),Sn=0,Hn=0;Hn<le.length;Hn++)Sn+=(le.charCodeAt(le.length-Hn-1)-Je+1)*Math.pow(26,Hn);return Sn}(Hn,Je?"A":"a")};break;case J_ROMAN:ot.regex=Je?"[MDCLXVI]+":"[mdclxvi]+",ot.parse=function(Hn){return function ie(le){for(var ot=0,Je=1,Sn=le.length-1;Sn>=0;Sn--){const pt=Ce[le[Sn]];pt<Je?ot-=pt:(Je=pt,ot+=pt)}return ot}(Je?Hn:Hn.toUpperCase())};break;case J_WORDS:ot.regex="(?:"+Object.keys(K).concat("and","[\\-, ]").join("|")+")+",ot.parse=function(Hn){return function z(le){const Je=le.split(/,\s|\sand\s|[\s\\-]/).map(pt=>K[pt]);let Sn=[0];return Je.forEach(pt=>{if(pt<100){let ht=Sn.pop();ht>=1e3&&(Sn.push(ht),ht=0),Sn.push(ht+pt)}else Sn.push(Sn.pop()*pt)}),Sn.reduce((pt,ht)=>pt+ht,0)}(Hn.toLowerCase())};break;case J_DECIMAL:ot.regex=`[0-9]${Sn}`,le.ordinal&&(ot.regex+="(?:th|st|nd|rd)"),ot.parse=function(Hn){let pt=Hn;return le.ordinal&&(pt=Hn.substring(0,Hn.length-2)),le.regular?pt=pt.split(",").join(""):le.groupingSeparators.forEach(ht=>{pt=pt.split(ht.character).join("")}),48!==le.zeroCode&&(pt=pt.split("").map(ht=>String.fromCodePoint(ht.codePointAt(0)-le.zeroCode+48)).join("")),parseInt(pt)};break;case J_SEQUENCE:throw{code:"D3130",value:le.token}}}return ot}function cn(le,ot){const Sn=Ze(at(ot)),Hn="^"+Sn.parts.map(We=>"("+We.regex+")").join("")+"$";var ht=new RegExp(Hn,"i").exec(le);if(null!==ht){const Jn={};for(let Rt=1;Rt<ht.length;Rt++){const fn=Sn.parts[Rt-1];fn.parse&&(Jn[fn.component]=fn.parse(ht[Rt]))}if(0===Object.getOwnPropertyNames(Jn).length)return;let ms=0;const Hs=Rt=>{ms<<=1,ms+=Rt?1:0},os=Rt=>!(~Rt&ms||!(Rt&ms));"YXMxWwdD".split("").forEach(Rt=>Hs(Jn[Rt]));const Zi=!os(161)&&os(130),ra=os(84),Ha=!ra&&os(72);ms=0,"PHhmsf".split("").forEach(Rt=>Hs(Jn[Rt]));const Er=!os(23)&&os(47),Oc=this.environment.timestamp;let Ja=!1,Go=!1;if(((Zi?"YD":ra?"XxwF":Ha?"XWF":"YMD")+(Er?"Phmsf":"Hmsf")).split("").forEach(Rt=>{if(typeof Jn[Rt]>"u")Ja?(Jn[Rt]=-1!=="MDd".indexOf(Rt)?1:0,Go=!0):Jn[Rt]=Ot(Oc,Rt);else if(Ja=!0,Go)throw{code:"D3136"}}),Jn.M>0?Jn.M-=1:Jn.M=0,Zi){const Rt=Date.UTC(Jn.Y,0),gn=new Date(Rt+1e3*(Jn.d-1)*60*60*24);Jn.M=gn.getUTCMonth(),Jn.D=gn.getUTCDate()}if(ra)throw{code:"D3136"};if(Ha)throw{code:"D3136"};Er&&(Jn.H=12===Jn.h?0:Jn.h,1===Jn.P&&(Jn.H+=12));var Ht=Date.UTC(Jn.Y,Jn.M,Jn.D,Jn.H,Jn.m,Jn.s,Jn.f);return(Jn.Z||Jn.z)&&(Ht-=60*(Jn.Z||Jn.z)*1e3),Ht}}var wn=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");return{formatInteger:V,parseInteger:function Ct(le,ot){if(!(typeof le>"u"))return Ze(nt(ot)).parse(le)},fromMillis:function $e(le,ot,Je){if(!(typeof le>"u"))return nn.call(this,le,ot,Je)},toMillis:function An(le,ot){if(!(typeof le>"u")){if(typeof ot>"u"){if(!wn.test(le))throw{stack:(new Error).stack,code:"D3110",value:le};return Date.parse(le)}return cn.call(this,le,ot)}}}}();G.exports=D},{"./utils":6}],2:[function(L,G,U){(function(j){(function(){var D=L("./utils");const R=(()=>{"use strict";var q=D.isNumeric,ne=D.isArrayOfStrings,te=D.isArrayOfNumbers,se=D.createSequence,ee=D.isSequence,K=D.isFunction,z=D.isLambda,ce=D.isIterable,Ce=D.getFunctionArity,Re=D.isDeepEqual,ie=D.stringToArray;function Pe(qe,kt,on){if(!(typeof qe>"u")){var En=ie(qe),Nn=En.length;return Nn+kt<0&&(kt=0),typeof on<"u"?on<=0?"":En.slice(kt,kt>=0?kt+on:Nn+kt+on).join(""):En.slice(kt).join("")}}function Ge(qe){if(!(typeof qe>"u"))return ie(qe).length}function*_t(qe,kt){var on=qe.apply(this,[kt]);if(ce(on)&&(on=yield*on),on&&"number"!=typeof on.start&&"number"!==on.end&&!Array.isArray(on.groups)&&!K(on.next))throw{code:"T1010",stack:(new Error).stack};return on}function Ht(qe,kt){var on;if(!(typeof qe>"u")){if(kt){var En=qe.toString().split("e");qe=+(En[0]+"e"+(En[1]?+En[1]+kt:kt))}return on=Math.round(qe),.5===Math.abs(on-qe)&&1===Math.abs(on%2)&&(on-=1),kt&&(En=on.toString().split("e"),on=+(En[0]+"e"+(En[1]?+En[1]-kt:-kt))),Object.is(on,-0)&&(on=0),on}}function Et(qe){if(!(typeof qe>"u")){var kt=!1;return Array.isArray(qe)?1===qe.length?kt=Et(qe[0]):qe.length>1&&(kt=qe.filter(function(En){return Et(En)}).length>0):"string"==typeof qe?qe.length>0&&(kt=!0):q(qe)?0!==qe&&(kt=!0):null!==qe&&"object"==typeof qe?Object.keys(qe).length>0&&(kt=!0):"boolean"==typeof qe&&!0===qe&&(kt=!0),kt}}function Xn(qe,kt,on,En){var Nn=[kt],hi=Ce(qe);return hi>=2&&Nn.push(on),hi>=3&&Nn.push(En),Nn}function Ha(qe,kt){return typeof qe>"u"?kt:typeof kt>"u"?qe:(Array.isArray(qe)||(qe=se(qe)),Array.isArray(kt)||(kt=[kt]),qe.concat(kt))}return{sum:function oe(qe){if(!(typeof qe>"u")){var kt=0;return qe.forEach(function(on){kt+=on}),kt}},count:function N(qe){return typeof qe>"u"?0:qe.length},max:function V(qe){if(!(typeof qe>"u"||0===qe.length))return Math.max.apply(Math,qe)},min:function J(qe){if(!(typeof qe>"u"||0===qe.length))return Math.min.apply(Math,qe)},average:function fe(qe){if(!(typeof qe>"u"||0===qe.length)){var kt=0;return qe.forEach(function(on){kt+=on}),kt/qe.length}},string:function ke(qe,kt=!1){if(!(typeof qe>"u")){var on;if("string"==typeof qe)on=qe;else if(K(qe))on="";else{if("number"==typeof qe&&!isFinite(qe))throw{code:"D3001",value:qe,stack:(new Error).stack};var En=kt?2:0;Array.isArray(qe)&&qe.outerWrapper&&(qe=qe[0]),on=JSON.stringify(qe,function(Nn,hi){return typeof hi<"u"&&null!==hi&&hi.toPrecision&&q(hi)?Number(hi.toPrecision(15)):hi&&K(hi)?"":hi},En)}return on}},substring:Pe,substringBefore:function nt(qe,kt){if(!(typeof qe>"u")){var on=qe.indexOf(kt);return on>-1?qe.substr(0,on):qe}},substringAfter:function Le(qe,kt){if(!(typeof qe>"u")){var on=qe.indexOf(kt);return on>-1?qe.substr(on+kt.length):qe}},lowercase:function at(qe){if(!(typeof qe>"u"))return qe.toLowerCase()},uppercase:function It(qe){if(!(typeof qe>"u"))return qe.toUpperCase()},length:Ge,trim:function yt(qe){if(!(typeof qe>"u")){var kt=qe.replace(/[ \t\n\r]+/gm," ");return" "===kt.charAt(0)&&(kt=kt.substring(1))," "===kt.charAt(kt.length-1)&&(kt=kt.substring(0,kt.length-1)),kt}},pad:function mt(qe,kt,on){if(!(typeof qe>"u")){(typeof on>"u"||0===on.length)&&(on=" ");var En,Nn=Math.abs(kt)-Ge(qe);if(Nn>0){var hi=new Array(Nn+1).join(on);on.length>1&&(hi=Pe(hi,0,Nn)),En=kt>0?qe+hi:hi+qe}else En=qe;return En}},match:function*Ot(qe,kt,on){if(!(typeof qe>"u")){if(on<0)throw{stack:(new Error).stack,value:on,code:"D3040",index:3};var En=se();if(typeof on>"u"||on>0){var Nn=0,hi=yield*_t(kt,qe);if(typeof hi<"u")for(;typeof hi<"u"&&(typeof on>"u"||Nn<on);)En.push({match:hi.match,index:hi.start,groups:hi.groups}),hi=yield*_t(hi.next),Nn++}return En}},contains:function*Fn(qe,kt){if(!(typeof qe>"u"))return"string"==typeof kt?-1!==qe.indexOf(kt):typeof(yield*_t(kt,qe))<"u"},replace:function*Pn(qe,kt,on,En){if(!(typeof qe>"u")){var hi;if(""===kt)throw{code:"D3010",stack:(new Error).stack,value:kt,index:2};if(En<0)throw{code:"D3011",stack:(new Error).stack,value:En,index:4};hi="string"==typeof on?function(Kr){for(var Ga="",Ns=0,ya=on.indexOf("$",Ns);-1!==ya&&Ns<on.length;){Ga+=on.substring(Ns,ya);var sa=on.charAt(Ns=ya+1);if("$"===sa)Ga+="$",Ns++;else if("0"===sa)Ga+=Kr.match,Ns++;else{var zl;if(zl=0===Kr.groups.length?1:Math.floor(Math.log(Kr.groups.length)*Math.LOG10E)+1,ya=parseInt(on.substring(Ns,Ns+zl),10),zl>1&&ya>Kr.groups.length&&(ya=parseInt(on.substring(Ns,Ns+zl-1),10)),isNaN(ya))Ga+="$";else{if(Kr.groups.length>0){var Fc=Kr.groups[ya-1];typeof Fc<"u"&&(Ga+=Fc)}Ns+=ya.toString().length}}ya=on.indexOf("$",Ns)}return Ga+on.substring(Ns)}:on;var ar="",qr=0;if(typeof En>"u"||En>0){var Ss=0;if("string"==typeof kt){for(var xs=qe.indexOf(kt,qr);-1!==xs&&(typeof En>"u"||Ss<En);)ar+=qe.substring(qr,xs),ar+=on,Ss++,xs=qe.indexOf(kt,qr=xs+kt.length);ar+=qe.substring(qr)}else{var xo=yield*_t(kt,qe);if(typeof xo<"u"){for(;typeof xo<"u"&&(typeof En>"u"||Ss<En);){ar+=qe.substring(qr,xo.start);var lo=hi.apply(this,[xo]);if(ce(lo)&&(lo=yield*lo),"string"!=typeof lo)throw{code:"D3012",stack:(new Error).stack,value:lo};ar+=lo,qr=xo.start+xo.match.length,Ss++,xo=yield*_t(xo.next)}ar+=qe.substring(qr)}else ar=qe}}else ar=qe;return ar}},split:function*$e(qe,kt,on){if(!(typeof qe>"u")){if(on<0)throw{code:"D3020",stack:(new Error).stack,value:on,index:3};var En=[];if(typeof on>"u"||on>0)if("string"==typeof kt)En=qe.split(kt,on);else{var Nn=0,hi=yield*_t(kt,qe);if(typeof hi<"u"){for(var ar=0;typeof hi<"u"&&(typeof on>"u"||Nn<on);)En.push(qe.substring(ar,hi.start)),ar=hi.end,hi=yield*_t(hi.next),Nn++;(typeof on>"u"||Nn<on)&&En.push(qe.substring(ar))}else En.push(qe)}return En}},join:function le(qe,kt){if(!(typeof qe>"u"))return typeof kt>"u"&&(kt=""),qe.join(kt)},formatNumber:function ot(qe,kt,on){if(!(typeof qe>"u")){var Nn={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"};typeof on<"u"&&Object.keys(on).forEach(function(dr){Nn[dr]=on[dr]});for(var hi=[],ar=Nn["zero-digit"].charCodeAt(0),qr=ar;qr<ar+10;qr++)hi.push(String.fromCharCode(qr));var Ss=hi.concat([Nn["decimal-separator"],Nn["exponent-separator"],Nn["grouping-separator"],Nn.digit,Nn["pattern-separator"]]),xs=kt.split(Nn["pattern-separator"]);if(xs.length>2)throw{code:"D3080",stack:(new Error).stack};var Ga=xs.map(function(dr){var _o,hs,Io,Vl,ys=function(){for(var el,Xl=0;Xl<dr.length;Xl++)if(el=dr.charAt(Xl),-1!==Ss.indexOf(el)&&el!==Nn["exponent-separator"])return dr.substring(0,Xl)}(),Bs=function(){for(var el,Xl=dr.length-1;Xl>=0;Xl--)if(el=dr.charAt(Xl),-1!==Ss.indexOf(el)&&el!==Nn["exponent-separator"])return dr.substring(Xl+1)}(),Pr=dr.substring(ys.length,dr.length-Bs.length),Zr=dr.indexOf(Nn["exponent-separator"],ys.length);-1===Zr||Zr>dr.length-Bs.length?(_o=Pr,hs=void 0):(_o=Pr.substring(0,Zr),hs=Pr.substring(Zr+1));var Qr=_o.indexOf(Nn["decimal-separator"]);return-1===Qr?(Io=_o,Vl=Bs):(Io=_o.substring(0,Qr),Vl=_o.substring(Qr+1)),{prefix:ys,suffix:Bs,activePart:Pr,mantissaPart:_o,exponentPart:hs,integerPart:Io,fractionalPart:Vl,subpicture:dr}});Ga.forEach(function(dr){var ys,Bs,Pr=dr.subpicture,_o=Pr.indexOf(Nn["decimal-separator"]);_o!==Pr.lastIndexOf(Nn["decimal-separator"])&&(ys="D3081"),Pr.indexOf(Nn.percent)!==Pr.lastIndexOf(Nn.percent)&&(ys="D3082"),Pr.indexOf(Nn["per-mille"])!==Pr.lastIndexOf(Nn["per-mille"])&&(ys="D3083"),-1!==Pr.indexOf(Nn.percent)&&-1!==Pr.indexOf(Nn["per-mille"])&&(ys="D3084");var hs=!1;for(Bs=0;Bs<dr.mantissaPart.length;Bs++){var Io=dr.mantissaPart.charAt(Bs);if(-1!==hi.indexOf(Io)||Io===Nn.digit){hs=!0;break}}hs||(ys="D3085"),-1!==dr.activePart.split("").map(function(el){return-1===Ss.indexOf(el)?"p":"a"}).join("").indexOf("p")&&(ys="D3086"),-1!==_o?(Pr.charAt(_o-1)===Nn["grouping-separator"]||Pr.charAt(_o+1)===Nn["grouping-separator"])&&(ys="D3087"):dr.integerPart.charAt(dr.integerPart.length-1)===Nn["grouping-separator"]&&(ys="D3088"),-1!==Pr.indexOf(Nn["grouping-separator"]+Nn["grouping-separator"])&&(ys="D3089");var Zr=dr.integerPart.indexOf(Nn.digit);-1!==Zr&&dr.integerPart.substring(0,Zr).split("").filter(function(el){return hi.indexOf(el)>-1}).length>0&&(ys="D3090"),-1!==(Zr=dr.fractionalPart.lastIndexOf(Nn.digit))&&dr.fractionalPart.substring(Zr).split("").filter(function(el){return hi.indexOf(el)>-1}).length>0&&(ys="D3091");var Qr="string"==typeof dr.exponentPart;if(Qr&&dr.exponentPart.length>0&&(-1!==Pr.indexOf(Nn.percent)||-1!==Pr.indexOf(Nn["per-mille"]))&&(ys="D3092"),Qr&&(0===dr.exponentPart.length||dr.exponentPart.split("").filter(function(el){return-1===hi.indexOf(el)}).length>0)&&(ys="D3093"),ys)throw{code:ys,stack:(new Error).stack}});var je,dt,et,pe,Ns=Ga.map(function(dr){var ys=function(wl,zs){for(var wo=[],id=wl.indexOf(Nn["grouping-separator"]);-1!==id;){var Sf=(zs?wl.substring(0,id):wl.substring(id)).split("").filter(function(qh){return-1!==hi.indexOf(qh)||qh===Nn.digit}).length;wo.push(Sf),id=dr.integerPart.indexOf(Nn["grouping-separator"],id+1)}return wo},Bs=ys(dr.integerPart),_o=function(wl){if(0===wl.length)return 0;for(var zs=function(Sf,qh){return 0===qh?Sf:zs(qh,Sf%qh)},wo=wl.reduce(zs),id=1;id<=wl.length;id++)if(-1===wl.indexOf(id*wo))return 0;return wo}(Bs),hs=ys(dr.fractionalPart,!0),Io=dr.integerPart.split("").filter(function(wl){return-1!==hi.indexOf(wl)}).length,Vl=Io,Zr=dr.fractionalPart.split(""),Qr=Zr.filter(function(wl){return-1!==hi.indexOf(wl)}).length,el=Zr.filter(function(wl){return-1!==hi.indexOf(wl)||wl===Nn.digit}).length,Xl="string"==typeof dr.exponentPart;0===Io&&0===el&&(Xl?(Qr=1,el=1):Io=1),Xl&&0===Io&&-1!==dr.integerPart.indexOf(Nn.digit)&&(Io=1),0===Io&&0===Qr&&(Qr=1);var Ei=0;return Xl&&(Ei=dr.exponentPart.split("").filter(function(wl){return-1!==hi.indexOf(wl)}).length),{integerPartGroupingPositions:Bs,regularGrouping:_o,minimumIntegerPartSize:Io,scalingFactor:Vl,prefix:dr.prefix,fractionalPartGroupingPositions:hs,minimumFactionalPartSize:Qr,maximumFactionalPartSize:el,minimumExponentSize:Ei,suffix:dr.suffix,picture:dr.subpicture}}),ya=Nn["minus-sign"],sa=Nn["zero-digit"],zl=Nn["decimal-separator"],Fc=Nn["grouping-separator"];if(1===Ns.length&&(Ns.push(JSON.parse(JSON.stringify(Ns[0]))),Ns[1].prefix=ya+Ns[1].prefix),dt=-1!==(je=qe>=0?Ns[0]:Ns[1]).picture.indexOf(Nn.percent)?100*qe:-1!==je.picture.indexOf(Nn["per-mille"])?1e3*qe:qe,0===je.minimumExponentSize)et=dt;else{var Te=Math.pow(10,je.scalingFactor),Qe=Math.pow(10,je.scalingFactor-1);for(et=dt,pe=0;et<Qe;)et*=10,pe-=1;for(;et>Te;)et/=10,pe+=1}var Xt=function(dr,ys){var Bs=Math.abs(dr).toFixed(ys);return"0"!==sa&&(Bs=Bs.split("").map(function(Pr){return Pr>="0"&&Pr<="9"?hi[Pr.charCodeAt(0)-48]:Pr}).join("")),Bs},xn=Xt(Ht(et,je.maximumFactionalPartSize),je.maximumFactionalPartSize),vi=xn.indexOf(".");for(-1===vi?xn+=zl:xn=xn.replace(".",zl);xn.charAt(0)===sa;)xn=xn.substring(1);for(;xn.charAt(xn.length-1)===sa;)xn=xn.substring(0,xn.length-1);vi=xn.indexOf(zl);var mi=je.minimumIntegerPartSize-vi,xi=je.minimumFactionalPartSize-(xn.length-vi-1);if(xn=(mi>0?new Array(mi+1).join(sa):"")+xn,xn+=xi>0?new Array(xi+1).join(sa):"",vi=xn.indexOf(zl),je.regularGrouping>0)for(var Dr=Math.floor((vi-1)/je.regularGrouping),_r=1;_r<=Dr;_r++)xn=[xn.slice(0,vi-_r*je.regularGrouping),Fc,xn.slice(vi-_r*je.regularGrouping)].join("");else je.integerPartGroupingPositions.forEach(function(dr){xn=[xn.slice(0,vi-dr),Fc,xn.slice(vi-dr)].join(""),vi++});if(vi=xn.indexOf(zl),je.fractionalPartGroupingPositions.forEach(function(dr){xn=[xn.slice(0,dr+vi+1),Fc,xn.slice(dr+vi+1)].join("")}),vi=xn.indexOf(zl),(-1===je.picture.indexOf(zl)||vi===xn.length-1)&&(xn=xn.substring(0,xn.length-1)),typeof pe<"u"){var gr=Xt(pe,0);(mi=je.minimumExponentSize-gr.length)>0&&(gr=new Array(mi+1).join(sa)+gr),xn=xn+Nn["exponent-separator"]+(pe<0?ya:"")+gr}return xn=je.prefix+xn+je.suffix}},formatBase:function Je(qe,kt){if(!(typeof qe>"u")){if(qe=Ht(qe),(kt=typeof kt>"u"?10:Ht(kt))<2||kt>36)throw{code:"D3100",stack:(new Error).stack,value:kt};return qe.toString(kt)}},number:function Sn(qe){var kt;if(!(typeof qe>"u")){if("number"==typeof qe)kt=qe;else if("string"==typeof qe&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(qe)&&!isNaN(parseFloat(qe))&&isFinite(qe))kt=parseFloat(qe);else if(!0===qe)kt=1;else{if(!1!==qe)throw{code:"D3030",value:qe,stack:(new Error).stack,index:1};kt=0}return kt}},floor:function pt(qe){if(!(typeof qe>"u"))return Math.floor(qe)},ceil:function ht(qe){if(!(typeof qe>"u"))return Math.ceil(qe)},round:Ht,abs:function Hn(qe){if(!(typeof qe>"u"))return Math.abs(qe)},sqrt:function We(qe){if(!(typeof qe>"u")){if(qe<0)throw{stack:(new Error).stack,code:"D3060",index:1,value:qe};return Math.sqrt(qe)}},power:function Ie(qe,kt){var on;if(!(typeof qe>"u")){if(on=Math.pow(qe,kt),!isFinite(on))throw{stack:(new Error).stack,code:"D3061",index:1,value:qe,exp:kt};return on}},random:function Me(){return Math.random()},boolean:Et,not:function dn(qe){if(!(typeof qe>"u"))return!Et(qe)},map:function*Jn(qe,kt){if(!(typeof qe>"u")){for(var on=se(),En=0;En<qe.length;En++){var Nn=Xn(kt,qe[En],En,qe),hi=yield*kt.apply(this,Nn);typeof hi<"u"&&on.push(hi)}return on}},zip:function os(){for(var qe=[],kt=Array.prototype.slice.call(arguments),on=Math.min.apply(Math,kt.map(function(hi){return Array.isArray(hi)?hi.length:0})),En=0;En<on;En++){var Nn=kt.map(hi=>hi[En]);qe.push(Nn)}return qe},filter:function*ms(qe,kt){if(!(typeof qe>"u")){for(var on=se(),En=0;En<qe.length;En++){var Nn=qe[En],hi=Xn(kt,Nn,En,qe);Et(yield*kt.apply(this,hi))&&on.push(Nn)}return on}},single:function*Hs(qe,kt){if(!(typeof qe>"u")){for(var En,on=!1,Nn=0;Nn<qe.length;Nn++){var hi=qe[Nn],ar=!0;if(typeof kt<"u"){var qr=Xn(kt,hi,Nn,qe);ar=Et(yield*kt.apply(this,qr))}if(ar){if(on)throw{stack:(new Error).stack,code:"D3138",index:Nn};En=hi,on=!0}}if(!on)throw{stack:(new Error).stack,code:"D3139"};return En}},foldLeft:function*qs(qe,kt,on){if(!(typeof qe>"u")){var En,hi,Nn=Ce(kt);if(Nn<2)throw{stack:(new Error).stack,code:"D3050",index:1};for(typeof on>"u"&&qe.length>0?(En=qe[0],hi=1):(En=on,hi=0);hi<qe.length;){var ar=[En,qe[hi]];Nn>=3&&ar.push(hi),Nn>=4&&ar.push(qe),En=yield*kt.apply(this,ar),hi++}return En}},sift:function*yn(qe,kt){var on={};for(var En in qe){var Nn=qe[En],hi=Xn(kt,Nn,En,qe);Et(yield*kt.apply(this,hi))&&(on[En]=Nn)}return 0===Object.keys(on).length&&(on=void 0),on},keys:function Zi(qe){var kt=se();if(Array.isArray(qe)){var on={};qe.forEach(function(En){Zi(En).forEach(function(hi){on[hi]=!0})}),kt=Zi(on)}else null!==qe&&"object"==typeof qe&&!z(qe)&&Object.keys(qe).forEach(En=>kt.push(En));return kt},lookup:function ra(qe,kt){var on;if(Array.isArray(qe)){on=se();for(var En=0;En<qe.length;En++){var Nn=ra(qe[En],kt);typeof Nn<"u"&&(Array.isArray(Nn)?Nn.forEach(hi=>on.push(hi)):on.push(Nn))}}else null!==qe&&"object"==typeof qe&&(on=qe[kt]);return on},append:Ha,exists:function fl(qe){return!(typeof qe>"u")},spread:function Er(qe){var kt=se();if(Array.isArray(qe))qe.forEach(function(Nn){kt=Ha(kt,Er(Nn))});else if(null===qe||"object"!=typeof qe||z(qe))kt=qe;else for(var on in qe){var En={};En[on]=qe[on],kt.push(En)}return kt},merge:function xd(qe){if(!(typeof qe>"u")){var kt={};return qe.forEach(function(on){for(var En in on)kt[En]=on[En]}),kt}},reverse:function kc(qe){if(!(typeof qe>"u")){if(qe.length<=1)return qe;for(var kt=qe.length,on=new Array(kt),En=0;En<kt;En++)on[kt-En-1]=qe[En];return on}},each:function*Sa(qe,kt){var on=se();for(var En in qe){var Nn=Xn(kt,qe[En],En,qe),hi=yield*kt.apply(this,Nn);typeof hi<"u"&&on.push(hi)}return on},error:function Oc(qe){throw{code:"D3137",stack:(new Error).stack,message:qe||"$error() function evaluated"}},assert:function Ja(qe,kt){if(!qe)throw{code:"D3141",stack:(new Error).stack,message:kt||"$assert() statement failed"}},type:function Go(qe){if(void 0!==qe)return null===qe?"null":q(qe)?"number":"string"==typeof qe?"string":"boolean"==typeof qe?"boolean":Array.isArray(qe)?"array":K(qe)?"function":"object"},sort:function*Rt(qe,kt){if(!(typeof qe>"u")){if(qe.length<=1)return qe;var on;if(typeof kt>"u"){if(!te(qe)&&!ne(qe))throw{stack:(new Error).stack,code:"D3070",index:1};on=function*(ar,qr){return ar>qr}}else on=kt;var Nn=function*(ar){if(!Array.isArray(ar)||ar.length<=1)return ar;var qr=Math.floor(ar.length/2),Ss=ar.slice(0,qr),xs=ar.slice(qr);return Ss=yield*Nn(Ss),xs=yield*Nn(xs),yield*function*(ar,qr){var Ss=function*(xo,lo,Kr){0===lo.length?Array.prototype.push.apply(xo,Kr):0===Kr.length?Array.prototype.push.apply(xo,lo):(yield*on(lo[0],Kr[0]))?(xo.push(Kr[0]),yield*Ss(xo,lo,Kr.slice(1))):(xo.push(lo[0]),yield*Ss(xo,lo.slice(1),Kr))},xs=[];return yield*Ss(xs,ar,qr),xs}(Ss,xs)};return yield*Nn(qe)}},shuffle:function fn(qe){if(!(typeof qe>"u")){if(qe.length<=1)return qe;for(var kt=new Array(qe.length),on=0;on<qe.length;on++){var En=Math.floor(Math.random()*(on+1));on!==En&&(kt[on]=kt[En]),kt[En]=qe[on]}return kt}},distinct:function gn(qe){if(!(typeof qe>"u")){if(!Array.isArray(qe)||qe.length<=1)return qe;for(var kt=ee(qe)?se():[],on=0;on<qe.length;on++){for(var En=qe[on],Nn=!1,hi=0;hi<kt.length;hi++)if(Re(En,kt[hi])){Nn=!0;break}Nn||kt.push(En)}return kt}},base64encode:function nn(qe){if(!(typeof qe>"u"))return(typeof window<"u"?window.btoa:function(on){return new j.Buffer.from(on,"binary").toString("base64")})(qe)},base64decode:function Ze(qe){if(!(typeof qe>"u"))return(typeof window<"u"?window.atob:function(on){return new j.Buffer.from(on,"base64").toString("binary")})(qe)},encodeUrlComponent:function Ct(qe){if(!(typeof qe>"u")){var kt;try{kt=encodeURIComponent(qe)}catch{throw{code:"D3140",stack:(new Error).stack,value:qe,functionName:"encodeUrlComponent"}}return kt}},encodeUrl:function cn(qe){if(!(typeof qe>"u")){var kt;try{kt=encodeURI(qe)}catch{throw{code:"D3140",stack:(new Error).stack,value:qe,functionName:"encodeUrl"}}return kt}},decodeUrlComponent:function wn(qe){if(!(typeof qe>"u")){var kt;try{kt=decodeURIComponent(qe)}catch{throw{code:"D3140",stack:(new Error).stack,value:qe,functionName:"decodeUrlComponent"}}return kt}},decodeUrl:function An(qe){if(!(typeof qe>"u")){var kt;try{kt=decodeURI(qe)}catch{throw{code:"D3140",stack:(new Error).stack,value:qe,functionName:"decodeUrl"}}return kt}}}})();G.exports=R}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./utils":6}],3:[function(L,G,U){var j=L("./datetime"),D=L("./functions"),R=L("./utils"),q=L("./parser"),ne=L("./signature"),te=function(){"use strict";var se=R.isNumeric,ee=R.isArrayOfStrings,K=R.isArrayOfNumbers,z=R.createSequence,ce=R.isSequence,Ce=R.isFunction,Re=R.isLambda,ie=R.isIterable,oe=R.getFunctionArity,N=R.isDeepEqual,V=Sa(null);function*J(Rt,fn,gn){var yn,qe=gn.lookup("__evaluate_entry");switch(qe&&qe(Rt,fn,gn),Rt.type){case"path":yn=yield*function*fe(Rt,fn,gn){var yn;yn=Array.isArray(fn)&&"variable"!==Rt.steps[0].type?fn:z(fn);for(var qe,kt=!1,on=void 0,En=0;En<Rt.steps.length;En++){var Nn=Rt.steps[En];if(Nn.tuple&&(kt=!0),0===En&&Nn.consarray?qe=yield*J(Nn,yn,gn):kt?on=yield*Le(Nn,yn,on,gn):qe=yield*Pe(Nn,yn,gn,En===Rt.steps.length-1),!kt&&(typeof qe>"u"||0===qe.length))break;typeof Nn.focus>"u"&&(yn=qe)}if(kt)if(Rt.tuple)qe=on;else for(qe=z(),En=0;En<on.length;En++)qe.push(on[En]["@"]);return Rt.keepSingletonArray&&(Array.isArray(qe)&&qe.cons&&!qe.sequence&&(qe=z(qe)),qe.keepSingleton=!0),Rt.hasOwnProperty("group")&&(qe=yield*le(Rt.group,kt?on:qe,gn)),qe}(Rt,fn,gn);break;case"binary":yn=yield*function*It(Rt,fn,gn){var yn,qe=yield*J(Rt.lhs,fn,gn),kt=Rt.value,on=function*(){return yield*J(Rt.rhs,fn,gn)};if("and"===kt||"or"===kt)try{return yield*function*wn(Rt,fn,gn){var yn,qe=An(Rt);switch(gn){case"and":yn=qe&&An(yield*fn());break;case"or":yn=qe||An(yield*fn())}return yn}(qe,on,kt)}catch(Nn){throw Nn.position=Rt.position,Nn.token=kt,Nn}var En=yield*on();try{switch(kt){case"+":case"-":case"*":case"/":case"%":yn=function nn(Rt,fn,gn){var yn;if(typeof Rt<"u"&&!se(Rt))throw{code:"T2001",stack:(new Error).stack,value:Rt};if(typeof fn<"u"&&!se(fn))throw{code:"T2002",stack:(new Error).stack,value:fn};if(typeof Rt>"u"||typeof fn>"u")return yn;switch(gn){case"+":yn=Rt+fn;break;case"-":yn=Rt-fn;break;case"*":yn=Rt*fn;break;case"/":yn=Rt/fn;break;case"%":yn=Rt%fn}return yn}(qe,En,kt);break;case"=":case"!=":yn=function Ze(Rt,fn,gn){var yn;if(void 0===Rt||void 0===fn)return!1;switch(gn){case"=":yn=N(Rt,fn);break;case"!=":yn=!N(Rt,fn)}return yn}(qe,En,kt);break;case"<":case"<=":case">":case">=":yn=function Ct(Rt,fn,gn){var yn,qe=typeof Rt,kt=typeof fn;if("undefined"!==qe&&"string"!==qe&&"number"!==qe||"undefined"!==kt&&"string"!==kt&&"number"!==kt)throw{code:"T2010",stack:(new Error).stack,value:"string"===qe||"number"===qe?fn:Rt};if("undefined"!==qe&&"undefined"!==kt){if(qe!==kt)throw{code:"T2009",stack:(new Error).stack,value:Rt,value2:fn};switch(gn){case"<":yn=Rt<fn;break;case"<=":yn=Rt<=fn;break;case">":yn=Rt>fn;break;case">=":yn=Rt>=fn}return yn}}(qe,En,kt);break;case"&":yn=function $e(Rt,fn){var yn="",qe="";return typeof Rt<"u"&&(yn=D.string(Rt)),typeof fn<"u"&&(qe=D.string(fn)),yn.concat(qe)}(qe,En);break;case"..":yn=function Je(Rt,fn){var gn;if(typeof Rt<"u"&&!Number.isInteger(Rt))throw{code:"T2003",stack:(new Error).stack,value:Rt};if(typeof fn<"u"&&!Number.isInteger(fn))throw{code:"T2004",stack:(new Error).stack,value:fn};if(typeof Rt>"u"||typeof fn>"u"||Rt>fn)return gn;var yn=fn-Rt+1;if(yn>1e7)throw{code:"D2014",stack:(new Error).stack,value:yn};gn=new Array(yn);for(var qe=Rt,kt=0;qe<=fn;qe++,kt++)gn[kt]=qe;return gn.sequence=!0,gn}(qe,En);break;case"in":yn=function cn(Rt,fn){var gn=!1;if(typeof Rt>"u"||typeof fn>"u")return!1;Array.isArray(fn)||(fn=[fn]);for(var yn=0;yn<fn.length;yn++)if(fn[yn]===Rt){gn=!0;break}return gn}(qe,En)}}catch(Nn){throw Nn.position=Rt.position,Nn.token=kt,Nn}return yn}(Rt,fn,gn);break;case"unary":yn=yield*function*Ge(Rt,fn,gn){var yn;switch(Rt.value){case"-":if(typeof(yn=yield*J(Rt.expression,fn,gn))>"u")yn=void 0;else{if(!se(yn))throw{code:"D1002",stack:(new Error).stack,position:Rt.position,token:Rt.value,value:yn};yn=-yn}break;case"[":yn=[];for(var qe=0;qe<Rt.expressions.length;qe++){var kt=Rt.expressions[qe],on=yield*J(kt,fn,gn);typeof on<"u"&&("["===kt.value?yn.push(on):yn=D.append(yn,on))}Rt.consarray&&Object.defineProperty(yn,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":yn=yield*le(Rt,fn,gn)}return yn}(Rt,fn,gn);break;case"name":yn=function yt(Rt,fn,gn){return D.lookup(fn,Rt.value)}(Rt,fn);break;case"string":case"number":case"value":yn=function mt(Rt){return Rt.value}(Rt);break;case"wildcard":yn=function _t(Rt,fn){var gn=z();return Array.isArray(fn)&&fn.outerWrapper&&fn.length>0&&(fn=fn[0]),null!==fn&&"object"==typeof fn&&Object.keys(fn).forEach(function(yn){var qe=fn[yn];Array.isArray(qe)?(qe=Fn(qe),gn=D.append(gn,qe)):gn.push(qe)}),gn}(0,fn);break;case"descendant":yn=function Ot(Rt,fn){var gn,yn=z();return typeof fn<"u"&&(Pn(fn,yn),gn=1===yn.length?yn[0]:yn),gn}(0,fn);break;case"parent":yn=gn.lookup(Rt.slot.label);break;case"condition":yn=yield*function*Hn(Rt,fn,gn){var yn,qe=yield*J(Rt.condition,fn,gn);return D.boolean(qe)?yn=yield*J(Rt.then,fn,gn):typeof Rt.else<"u"&&(yn=yield*J(Rt.else,fn,gn)),yn}(Rt,fn,gn);break;case"block":yn=yield*function*pt(Rt,fn,gn){for(var yn,qe=Sa(gn),kt=0;kt<Rt.expressions.length;kt++)yn=yield*J(Rt.expressions[kt],fn,qe);return yn}(Rt,fn,gn);break;case"bind":yn=yield*function*Sn(Rt,fn,gn){var yn=yield*J(Rt.rhs,fn,gn);return gn.bind(Rt.lhs.value,yn),yn}(Rt,fn,gn);break;case"regex":yn=function ht(Rt){var fn=new Go.RegexEngine(Rt.value),gn=function(yn,qe){var kt;fn.lastIndex=qe||0;var on=fn.exec(yn);if(null!==on){if(kt={match:on[0],start:on.index,end:on.index+on[0].length,groups:[]},on.length>1)for(var En=1;En<on.length;En++)kt.groups.push(on[En]);kt.next=function(){if(!(fn.lastIndex>=yn.length)){var Nn=gn(yn,fn.lastIndex);if(Nn&&""===Nn.match)throw{code:"D1004",stack:(new Error).stack,position:Rt.position,value:Rt.value.source};return Nn}}}return kt};return gn}(Rt);break;case"function":yn=yield*dn(Rt,fn,gn);break;case"variable":yn=function Ht(Rt,fn,gn){return""===Rt.value?fn&&fn.outerWrapper?fn[0]:fn:gn.lookup(Rt.value)}(Rt,fn,gn);break;case"lambda":yn=function ms(Rt,fn,gn){var yn={_jsonata_lambda:!0,input:fn,environment:gn,arguments:Rt.arguments,signature:Rt.signature,body:Rt.body};return!0===Rt.thunk&&(yn.thunk=!0),yn.apply=function*(qe,kt){return yield*Xn(yn,kt,fn,qe.environment)},yn}(Rt,fn,gn);break;case"partial":yn=yield*function*Hs(Rt,fn,gn){for(var yn,qe=[],kt=0;kt<Rt.arguments.length;kt++){var on=Rt.arguments[kt];qe.push("operator"===on.type&&"?"===on.value?on:yield*J(on,fn,gn))}var En=yield*J(Rt.procedure,fn,gn);if(typeof En>"u"&&"path"===Rt.procedure.type&&gn.lookup(Rt.procedure.steps[0].value))throw{code:"T1007",stack:(new Error).stack,position:Rt.position,token:Rt.procedure.steps[0].value};if(Re(En))yn=Zi(En,qe);else if(En&&!0===En._jsonata_function)yn=ra(En.implementation,qe);else{if("function"!=typeof En)throw{code:"T1008",stack:(new Error).stack,position:Rt.position,token:"path"===Rt.procedure.type?Rt.procedure.steps[0].value:Rt.procedure.value};yn=ra(En,qe)}return yn}(Rt,fn,gn);break;case"apply":yn=yield*function*Et(Rt,fn,gn){var yn,qe=yield*J(Rt.lhs,fn,gn);if("function"===Rt.rhs.type)yn=yield*dn(Rt.rhs,fn,gn,{context:qe});else{var kt=yield*J(Rt.rhs,fn,gn);if(!Ce(kt))throw{code:"T2006",stack:(new Error).stack,position:Rt.position,value:kt};if(Ce(qe)){var on=yield*J(Me,null,gn);yn=yield*Xn(on,[qe,kt],null,gn)}else yn=yield*Xn(kt,[qe],null,gn)}return yn}(Rt,fn,gn);break;case"transform":yn=function Ie(Rt,fn,gn){return Er(function*(qe){if(!(typeof qe>"u")){var kt=gn.lookup("clone");if(!Ce(kt))throw{code:"T2013",stack:(new Error).stack,position:Rt.position};var on=yield*Xn(kt,[qe],null,gn),En=yield*J(Rt.pattern,on,gn);if(typeof En<"u"){Array.isArray(En)||(En=[En]);for(var Nn=0;Nn<En.length;Nn++){var hi=En[Nn],ar=yield*J(Rt.update,hi,gn),qr=typeof ar;if("undefined"!==qr){if("object"!==qr||null===ar||Array.isArray(ar))throw{code:"T2011",stack:(new Error).stack,position:Rt.update.position,value:ar};for(var Ss in ar)hi[Ss]=ar[Ss]}if(typeof Rt.delete<"u"){var xs=yield*J(Rt.delete,hi,gn);if(typeof xs<"u"){var xo=xs;if(Array.isArray(xs)||(xs=[xs]),!ee(xs))throw{code:"T2012",stack:(new Error).stack,position:Rt.delete.position,value:xo};for(var lo=0;lo<xs.length;lo++)"object"==typeof hi&&null!==hi&&delete hi[xs[lo]]}}}}return on}},"<(oa):o>")}(Rt,0,gn)}if(gn.async&&(typeof yn>"u"||null===yn||"function"!=typeof yn.then)&&(yn=Promise.resolve(yn)),gn.async&&"function"==typeof yn.then&&Rt.nextFunction&&"function"==typeof yn[Rt.nextFunction]||(yn=yield yn),Object.prototype.hasOwnProperty.call(Rt,"predicate"))for(var kt=0;kt<Rt.predicate.length;kt++)yn=yield*at(Rt.predicate[kt].expr,yn,gn);"path"!==Rt.type&&Object.prototype.hasOwnProperty.call(Rt,"group")&&(yn=yield*le(Rt.group,yn,gn));var on=gn.lookup("__evaluate_exit");return on&&on(Rt,fn,gn,yn),yn&&ce(yn)&&!yn.tupleStream&&(Rt.keepArray&&(yn.keepSingleton=!0),0===yn.length?yn=void 0:1===yn.length&&(yn=yn.keepSingleton?yn:yn[0])),yn}function ke(Rt,fn){var gn=Sa(Rt);for(const yn in fn)gn.bind(yn,fn[yn]);return gn}function*Pe(Rt,fn,gn,yn){var qe;if("sort"===Rt.type)return qe=yield*We(Rt,fn,gn),Rt.stages&&(qe=yield*nt(Rt.stages,qe,gn)),qe;qe=z();for(var kt=0;kt<fn.length;kt++){var on=yield*J(Rt,fn[kt],gn);if(Rt.stages)for(var En=0;En<Rt.stages.length;En++)on=yield*at(Rt.stages[En].expr,on,gn);typeof on<"u"&&qe.push(on)}var Nn=z();return yn&&1===qe.length&&Array.isArray(qe[0])&&!ce(qe[0])?Nn=qe[0]:qe.forEach(function(hi){!Array.isArray(hi)||hi.cons?Nn.push(hi):hi.forEach(ar=>Nn.push(ar))}),Nn}function*nt(Rt,fn,gn){for(var yn=fn,qe=0;qe<Rt.length;qe++){var kt=Rt[qe];switch(kt.type){case"filter":yn=yield*at(kt.expr,yn,gn);break;case"index":for(var on=0;on<yn.length;on++)yn[on][kt.value]=on}}return yn}function*Le(Rt,fn,gn,yn){var qe;if("sort"===Rt.type){if(gn)qe=yield*We(Rt,gn,yn);else{var kt=yield*We(Rt,fn,yn);(qe=z()).tupleStream=!0;for(var on=0;on<kt.length;on++){var En={"@":kt[on]};En[Rt.index]=on,qe.push(En)}}return Rt.stages&&(qe=yield*nt(Rt.stages,qe,yn)),qe}(qe=z()).tupleStream=!0;var Nn=yn;void 0===gn&&(gn=fn.map(Ss=>({"@":Ss})));for(var hi=0;hi<gn.length;hi++){Nn=ke(yn,gn[hi]);var ar=yield*J(Rt,gn[hi]["@"],Nn);if(typeof ar<"u"){Array.isArray(ar)||(ar=[ar]);for(var qr=0;qr<ar.length;qr++)En={},Object.assign(En,gn[hi]),ar.tupleStream?Object.assign(En,ar[qr]):(Rt.focus?(En[Rt.focus]=ar[qr],En["@"]=gn[hi]["@"]):En["@"]=ar[qr],Rt.index&&(En[Rt.index]=qr),Rt.ancestor&&(En[Rt.ancestor.label]=gn[hi]["@"])),qe.push(En)}}return Rt.stages&&(qe=yield*nt(Rt.stages,qe,yn)),qe}function*at(Rt,fn,gn){var yn=z();if(fn&&fn.tupleStream&&(yn.tupleStream=!0),Array.isArray(fn)||(fn=z(fn)),"number"===Rt.type){var qe=Math.floor(Rt.value);qe<0&&(qe=fn.length+qe),typeof(kt=fn[qe])<"u"&&(Array.isArray(kt)?yn=kt:yn.push(kt))}else for(qe=0;qe<fn.length;qe++){var kt,on=kt=fn[qe],En=gn;fn.tupleStream&&(on=kt["@"],En=ke(gn,kt));var Nn=yield*J(Rt,on,En);se(Nn)&&(Nn=[Nn]),K(Nn)?Nn.forEach(function(ar){var qr=Math.floor(ar);qr<0&&(qr=fn.length+qr),qr===qe&&yn.push(kt)}):D.boolean(Nn)&&yn.push(kt)}return yn}function Fn(Rt,fn){return typeof fn>"u"&&(fn=[]),Array.isArray(Rt)?Rt.forEach(function(gn){Fn(gn,fn)}):fn.push(Rt),fn}function Pn(Rt,fn){Array.isArray(Rt)||fn.push(Rt),Array.isArray(Rt)?Rt.forEach(function(gn){Pn(gn,fn)}):null!==Rt&&"object"==typeof Rt&&Object.keys(Rt).forEach(function(gn){Pn(Rt[gn],fn)})}function An(Rt){var fn=D.boolean(Rt);return!(typeof fn>"u")&&fn}function*le(Rt,fn,gn){var yn={},qe={},kt=!(!fn||!fn.tupleStream);Array.isArray(fn)||(fn=z(fn)),0===fn.length&&fn.push(void 0);for(var on=0;on<fn.length;on++)for(var En=fn[on],Nn=kt?ke(gn,En):gn,hi=0;hi<Rt.lhs.length;hi++){var ar=Rt.lhs[hi],qr=yield*J(ar[0],kt?En["@"]:En,Nn);if("string"!=typeof qr&&void 0!==qr)throw{code:"T1003",stack:(new Error).stack,position:Rt.position,value:qr};if(void 0!==qr){var Ss={data:En,exprIndex:hi};if(qe.hasOwnProperty(qr)){if(qe[qr].exprIndex!==hi)throw{code:"D1009",stack:(new Error).stack,position:Rt.position,value:qr};qe[qr].data=D.append(qe[qr].data,En)}else qe[qr]=Ss}}for(qr in qe){var xs=(Ss=qe[qr]).data;if(Nn=gn,kt){var xo=ot(Ss.data);xs=xo["@"],delete xo["@"],Nn=ke(gn,xo)}var lo=yield*J(Rt.lhs[Ss.exprIndex][1],xs,Nn);typeof lo<"u"&&(yn[qr]=lo)}return yn}function ot(Rt){if(!Array.isArray(Rt))return Rt;var fn={};Object.assign(fn,Rt[0]);for(var gn=1;gn<Rt.length;gn++)for(const yn in Rt[gn])fn[yn]=D.append(fn[yn],Rt[gn][yn]);return fn}function*We(Rt,fn,gn){var qe=fn,kt=!!fn.tupleStream,En={environment:gn,input:fn};return yield*D.sort.apply(En,[qe,function*(Nn,hi){for(var ar=0,qr=0;0===ar&&qr<Rt.terms.length;qr++){var Ss=Rt.terms[qr],xs=Nn,xo=gn;kt&&(xs=Nn["@"],xo=ke(gn,Nn));var lo=yield*J(Ss.expression,xs,xo);xs=hi,xo=gn,kt&&(xs=hi["@"],xo=ke(gn,hi));var Kr=yield*J(Ss.expression,xs,xo),Ga=typeof lo,Ns=typeof Kr;if("undefined"!==Ga)if("undefined"!==Ns){if("string"!==Ga&&"number"!==Ga||"string"!==Ns&&"number"!==Ns)throw{code:"T2008",stack:(new Error).stack,position:Rt.position,value:"string"===Ga||"number"===Ga?Kr:lo};if(Ga!==Ns)throw{code:"T2007",stack:(new Error).stack,position:Rt.position,value:lo,value2:Kr};lo!==Kr&&(ar=lo<Kr?-1:1,!0===Ss.descending&&(ar=-ar))}else ar=-1;else ar="undefined"===Ns?0:1}return 1===ar}])}var Me=q("function($f, $g) { function($x){ $g($f($x)) } }");function*dn(Rt,fn,gn,yn){var qe,kt=yield*J(Rt.procedure,fn,gn);if(typeof kt>"u"&&"path"===Rt.procedure.type&&gn.lookup(Rt.procedure.steps[0].value))throw{code:"T1005",stack:(new Error).stack,position:Rt.position,token:Rt.procedure.steps[0].value};var on=[];typeof yn<"u"&&on.push(yn.context);for(var En=0;En<Rt.arguments.length;En++){const hi=yield*J(Rt.arguments[En],fn,gn);if(Ce(hi)){const ar=function*(...qr){return yield*Xn(hi,qr,null,gn)};ar.arity=oe(hi),on.push(ar)}else on.push(hi)}var Nn="path"===Rt.procedure.type?Rt.procedure.steps[0].value:Rt.procedure.value;try{"object"==typeof kt&&(kt.token=Nn,kt.position=Rt.position),qe=yield*Xn(kt,on,fn,gn)}catch(hi){throw hi.position||(hi.position=Rt.position),hi.token||(hi.token=Nn),hi}return qe}function*Xn(Rt,fn,gn,yn){var qe;for(qe=yield*Jn(Rt,fn,gn,yn);Re(qe)&&!0===qe.thunk;){var kt=yield*J(qe.body.procedure,qe.input,qe.environment);"variable"===qe.body.procedure.type&&(kt.token=qe.body.procedure.value),kt.position=qe.body.procedure.position;for(var on=[],En=0;En<qe.body.arguments.length;En++)on.push(yield*J(qe.body.arguments[En],qe.input,qe.environment));qe=yield*Jn(kt,on,gn,yn)}return qe}function*Jn(Rt,fn,gn,yn){var qe;try{var kt=fn;if(Rt&&(kt=function os(Rt,fn,gn){return typeof Rt>"u"?fn:Rt.validate(fn,gn)}(Rt.signature,fn,gn)),Re(Rt))qe=yield*function*qs(Rt,fn){var yn=Sa(Rt.environment);return Rt.arguments.forEach(function(qe,kt){yn.bind(qe.value,fn[kt])}),"function"==typeof Rt.body?yield*function*Ha(Rt,fn){var yn=fl(Rt).map(function(on){return fn.lookup(on.trim())}),kt=Rt.apply({environment:fn},yn);return ie(kt)&&(kt=yield*kt),kt}(Rt.body,yn):yield*J(Rt.body,Rt.input,yn)}(Rt,kt);else if(Rt&&!0===Rt._jsonata_function)qe=Rt.implementation.apply({environment:yn,input:gn},kt),ie(qe)&&(qe=yield*qe);else{if("function"!=typeof Rt)throw{code:"T1006",stack:(new Error).stack};qe=Rt.apply(gn,kt),ie(qe)&&(qe=yield*qe)}}catch(En){throw Rt&&(typeof En.token>"u"&&typeof Rt.token<"u"&&(En.token=Rt.token),En.position=Rt.position),En}return qe}function Zi(Rt,fn){var gn=Sa(Rt.environment),yn=[];return Rt.arguments.forEach(function(kt,on){var En=fn[on];En&&"operator"===En.type&&"?"===En.value?yn.push(kt):gn.bind(kt.value,En)}),{_jsonata_lambda:!0,input:Rt.input,environment:gn,arguments:yn,body:Rt.body}}function ra(Rt,fn){var gn=fl(Rt),yn="function("+(gn=gn.map(function(on){return"$"+on.trim()})).join(", ")+"){ _ }",qe=q(yn);return qe.body=Rt,Zi(qe,fn)}function fl(Rt){var fn=Rt.toString();return/\(([^)]*)\)/.exec(fn)[1].split(",")}function Er(Rt,fn){var gn={_jsonata_function:!0,implementation:Rt};return typeof fn<"u"&&(gn.signature=ne(fn)),gn}function Sa(Rt){var fn={};return{bind:function(gn,yn){fn[gn]=yn},lookup:function(gn){var yn;return fn.hasOwnProperty(gn)?yn=fn[gn]:Rt&&(yn=Rt.lookup(gn)),yn},timestamp:Rt?Rt.timestamp:null,async:!!Rt&&Rt.async,global:Rt?Rt.global:{ancestry:[null]}}}V.bind("sum",Er(D.sum,"<a<n>:n>")),V.bind("count",Er(D.count,"<a:n>")),V.bind("max",Er(D.max,"<a<n>:n>")),V.bind("min",Er(D.min,"<a<n>:n>")),V.bind("average",Er(D.average,"<a<n>:n>")),V.bind("string",Er(D.string,"<x-b?:s>")),V.bind("substring",Er(D.substring,"<s-nn?:s>")),V.bind("substringBefore",Er(D.substringBefore,"<s-s:s>")),V.bind("substringAfter",Er(D.substringAfter,"<s-s:s>")),V.bind("lowercase",Er(D.lowercase,"<s-:s>")),V.bind("uppercase",Er(D.uppercase,"<s-:s>")),V.bind("length",Er(D.length,"<s-:n>")),V.bind("trim",Er(D.trim,"<s-:s>")),V.bind("pad",Er(D.pad,"<s-ns?:s>")),V.bind("match",Er(D.match,"<s-f<s:o>n?:a<o>>")),V.bind("contains",Er(D.contains,"<s-(sf):b>")),V.bind("replace",Er(D.replace,"<s-(sf)(sf)n?:s>")),V.bind("split",Er(D.split,"<s-(sf)n?:a<s>>")),V.bind("join",Er(D.join,"<a<s>s?:s>")),V.bind("formatNumber",Er(D.formatNumber,"<n-so?:s>")),V.bind("formatBase",Er(D.formatBase,"<n-n?:s>")),V.bind("formatInteger",Er(j.formatInteger,"<n-s:s>")),V.bind("parseInteger",Er(j.parseInteger,"<s-s:n>")),V.bind("number",Er(D.number,"<(nsb)-:n>")),V.bind("floor",Er(D.floor,"<n-:n>")),V.bind("ceil",Er(D.ceil,"<n-:n>")),V.bind("round",Er(D.round,"<n-n?:n>")),V.bind("abs",Er(D.abs,"<n-:n>")),V.bind("sqrt",Er(D.sqrt,"<n-:n>")),V.bind("power",Er(D.power,"<n-n:n>")),V.bind("random",Er(D.random,"<:n>")),V.bind("boolean",Er(D.boolean,"<x-:b>")),V.bind("not",Er(D.not,"<x-:b>")),V.bind("map",Er(D.map,"<af>")),V.bind("zip",Er(D.zip,"<a+>")),V.bind("filter",Er(D.filter,"<af>")),V.bind("single",Er(D.single,"<af?>")),V.bind("reduce",Er(D.foldLeft,"<afj?:j>")),V.bind("sift",Er(D.sift,"<o-f?:o>")),V.bind("keys",Er(D.keys,"<x-:a<s>>")),V.bind("lookup",Er(D.lookup,"<x-s:x>")),V.bind("append",Er(D.append,"<xx:a>")),V.bind("exists",Er(D.exists,"<x:b>")),V.bind("spread",Er(D.spread,"<x-:a<o>>")),V.bind("merge",Er(D.merge,"<a<o>:o>")),V.bind("reverse",Er(D.reverse,"<a:a>")),V.bind("each",Er(D.each,"<o-f:a>")),V.bind("error",Er(D.error,"<s?:x>")),V.bind("assert",Er(D.assert,"<bs?:x>")),V.bind("type",Er(D.type,"<x:s>")),V.bind("sort",Er(D.sort,"<af?:a>")),V.bind("shuffle",Er(D.shuffle,"<a:a>")),V.bind("distinct",Er(D.distinct,"<x:x>")),V.bind("base64encode",Er(D.base64encode,"<s-:s>")),V.bind("base64decode",Er(D.base64decode,"<s-:s>")),V.bind("encodeUrlComponent",Er(D.encodeUrlComponent,"<s-:s>")),V.bind("encodeUrl",Er(D.encodeUrl,"<s-:s>")),V.bind("decodeUrlComponent",Er(D.decodeUrlComponent,"<s-:s>")),V.bind("decodeUrl",Er(D.decodeUrl,"<s-:s>")),V.bind("eval",Er(function*xd(Rt,fn){if(!(typeof Rt>"u")){var gn=this.input;typeof fn<"u"&&(gn=fn,Array.isArray(gn)&&!ce(gn)&&((gn=z(gn)).outerWrapper=!0));try{var yn=q(Rt,!1)}catch(kt){throw Ja(kt),{stack:(new Error).stack,code:"D3120",value:kt.message,error:kt}}try{var qe=yield*J(yn,gn,this.environment)}catch(kt){throw Ja(kt),{stack:(new Error).stack,code:"D3121",value:kt.message,error:kt}}return qe}},"<sx?:x>")),V.bind("toMillis",Er(j.toMillis,"<s-s?:n>")),V.bind("fromMillis",Er(j.fromMillis,"<n-s?s?:s>")),V.bind("clone",Er(function kc(Rt){if(!(typeof Rt>"u"))return JSON.parse(D.string(Rt))},"<(oa)-:o>"));var Oc={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function Ja(Rt){var fn=Oc[Rt.code];if(typeof fn<"u"){var gn=fn.replace(/\{\{\{([^}]+)}}}/g,function(){return Rt[arguments[1]]});gn=gn.replace(/\{\{([^}]+)}}/g,function(){return JSON.stringify(Rt[arguments[1]])}),Rt.message=gn}}function Go(Rt,fn){var gn,yn;try{gn=q(Rt,fn&&fn.recover),yn=gn.errors,delete gn.errors}catch(on){throw Ja(on),on}var qe=Sa(V),kt=new Date;return qe.bind("now",Er(function(on,En){return j.fromMillis(kt.getTime(),on,En)},"<s?s?:s>")),qe.bind("millis",Er(function(){return kt.getTime()},"<:n>")),Go.RegexEngine=fn&&fn.RegexEngine?fn.RegexEngine:RegExp,{evaluate:function(on,En,Nn){if(typeof yn<"u"){var hi={code:"S0500",position:0};throw Ja(hi),hi}var ar,Ss,xs;if(typeof En<"u")for(var qr in ar=Sa(qe),En)ar.bind(qr,En[qr]);else ar=qe;if(ar.bind("$",on),kt=new Date,ar.timestamp=kt,Array.isArray(on)&&!ce(on)&&((on=z(on)).outerWrapper=!0),"function"==typeof Nn){ar.async=!0;var xo=function(Kr){Ja(Kr),Nn(Kr,null)},lo=function(Kr){(Ss=xs.next(Kr)).done?Nn(null,Ss.value):Ss.value.then(lo).catch(xo)};xs=J(gn,on,ar),(Ss=xs.next()).value.then(lo).catch(xo)}else try{for(xs=J(gn,on,ar),Ss=xs.next();!Ss.done;)Ss=xs.next(Ss.value);return Ss.value}catch(Kr){throw Ja(Kr),Kr}},assign:function(on,En){qe.bind(on,En)},registerFunction:function(on,En,Nn){var hi=Er(En,Nn);qe.bind(on,hi)},ast:function(){return gn},errors:function(){return yn}}}return Go.parser=q,Go}();G.exports=te},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(L,G,U){var j=L("./signature");const D=(()=>{"use strict";var R={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},q={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},ne=function(se){var ee=0,K=se.length,z=function(Re,ie){return{type:Re,value:ie,position:ee}},Ce=function(Re){if(ee>=K)return null;for(var ie=se.charAt(ee);ee<K&&" \t\n\r\v".indexOf(ie)>-1;)ee++,ie=se.charAt(ee);if("/"===ie&&"*"===se.charAt(ee+1)){var oe=ee;for(ie=se.charAt(ee+=2);"*"!==ie||"/"!==se.charAt(ee+1);)if(ie=se.charAt(++ee),ee>=K)throw{code:"S0106",stack:(new Error).stack,position:oe};return ie=se.charAt(ee+=2),Ce(Re)}if(!0!==Re&&"/"===ie)return ee++,z("regex",function(){for(var oe,N,Re=ee,ie=0;ee<K;){var V=se.charAt(ee);if("/"===V&&"\\"!==se.charAt(ee-1)&&0===ie){if(""===(oe=se.substring(Re,ee)))throw{code:"S0301",stack:(new Error).stack,position:ee};for(ee++,V=se.charAt(ee),Re=ee;"i"===V||"m"===V;)ee++,V=se.charAt(ee);return N=se.substring(Re,ee)+"g",new RegExp(oe,N)}("("===V||"["===V||"{"===V)&&"\\"!==se.charAt(ee-1)&&ie++,(")"===V||"]"===V||"}"===V)&&"\\"!==se.charAt(ee-1)&&ie--,ee++}throw{code:"S0302",stack:(new Error).stack,position:ee}}());if("."===ie&&"."===se.charAt(ee+1))return ee+=2,z("operator","..");if(":"===ie&&"="===se.charAt(ee+1))return ee+=2,z("operator",":=");if("!"===ie&&"="===se.charAt(ee+1))return ee+=2,z("operator","!=");if(">"===ie&&"="===se.charAt(ee+1))return ee+=2,z("operator",">=");if("<"===ie&&"="===se.charAt(ee+1))return ee+=2,z("operator","<=");if("*"===ie&&"*"===se.charAt(ee+1))return ee+=2,z("operator","**");if("~"===ie&&">"===se.charAt(ee+1))return ee+=2,z("operator","~>");if(Object.prototype.hasOwnProperty.call(R,ie))return ee++,z("operator",ie);if('"'===ie||"'"===ie){var N=ie;ee++;for(var V="";ee<K;){if("\\"===(ie=se.charAt(ee)))if(ee++,ie=se.charAt(ee),Object.prototype.hasOwnProperty.call(q,ie))V+=q[ie];else{if("u"!==ie)throw{code:"S0103",stack:(new Error).stack,position:ee,token:ie};var J=se.substr(ee+1,4);if(!/^[0-9a-fA-F]+$/.test(J))throw{code:"S0104",stack:(new Error).stack,position:ee};var fe=parseInt(J,16);V+=String.fromCharCode(fe),ee+=4}else{if(ie===N)return ee++,z("string",V);V+=ie}ee++}throw{code:"S0101",stack:(new Error).stack,position:ee}}var Le,Pe=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/.exec(se.substring(ee));if(null!==Pe){var nt=parseFloat(Pe[0]);if(!isNaN(nt)&&isFinite(nt))return ee+=Pe[0].length,z("number",nt);throw{code:"S0102",stack:(new Error).stack,position:ee,token:Pe[0]}}if("`"===ie){ee++;var at=se.indexOf("`",ee);if(-1!==at)return Le=se.substring(ee,at),ee=at+1,z("name",Le);throw ee=K,{code:"S0105",stack:(new Error).stack,position:ee}}for(var Ge,It=ee;;)if(Ge=se.charAt(It),It===K||" \t\n\r\v".indexOf(Ge)>-1||Object.prototype.hasOwnProperty.call(R,Ge)){if("$"===se.charAt(ee))return Le=se.substring(ee+1,It),ee=It,z("variable",Le);switch(Le=se.substring(ee,It),ee=It,Le){case"or":case"in":case"and":return z("operator",Le);case"true":return z("value",!0);case"false":return z("value",!1);case"null":return z("value",null);default:return ee===K&&""===Le?null:z("name",Le)}}else It++};return Ce};return function(se,ee){var K,z,ce={},Ce=[],Re=function(){var Ze=[];"(end)"!==K.id&&Ze.push({type:K.type,value:K.value,position:K.position});for(var Ct=z();null!==Ct;)Ze.push(Ct),Ct=z();return Ze},ie={nud:function(){var Ze={code:"S0211",token:this.value,position:this.position};if(ee)return Ze.remaining=Re(),Ze.type="error",Ce.push(Ze),Ze;throw Ze.stack=(new Error).stack,Ze}},oe=function(Ze,Ct){var cn=ce[Ze];return Ct=Ct||0,cn?Ct>=cn.lbp&&(cn.lbp=Ct):((cn=Object.create(ie)).id=cn.value=Ze,cn.lbp=Ct,ce[Ze]=cn),cn},N=function(Ze){if(ee)return Ze.remaining=Re(),Ce.push(Ze),(K=Object.create(ce["(error)"])).error=Ze,K.type="(error)",K;throw Ze.stack=(new Error).stack,Ze},V=function(Ze,Ct){if(Ze&&K.id!==Ze)return N({code:"(end)"===K.id?"S0203":"S0202",position:K.position,token:K.value,value:Ze});var An=z(Ct);if(null===An)return(K=ce["(end)"]).position=se.length,K;var ot,$e=An.value,le=An.type;switch(le){case"name":case"variable":ot=ce["(name)"];break;case"operator":if(!(ot=ce[$e]))return N({code:"S0204",stack:(new Error).stack,position:An.position,token:$e});break;case"string":case"number":case"value":ot=ce["(literal)"];break;case"regex":le="regex",ot=ce["(regex)"];break;default:return N({code:"S0205",stack:(new Error).stack,position:An.position,token:$e})}return(K=Object.create(ot)).value=$e,K.type=le,K.position=An.position,K},J=function(Ze){var Ct,cn=K;for(V(null,!0),Ct=cn.nud();Ze<K.lbp;)cn=K,V(),Ct=cn.led(Ct);return Ct},fe=function(Ze){oe(Ze,0).nud=function(){return this}},ke=function(Ze,Ct,cn){var wn=Ct||R[Ze],An=oe(Ze,wn);return An.led=cn||function($e){return this.lhs=$e,this.rhs=J(wn),this.type="binary",this},An},Pe=function(Ze,Ct,cn){var wn=oe(Ze,Ct);return wn.led=cn,wn},nt=function(Ze,Ct){var cn=oe(Ze);return cn.nud=Ct||function(){return this.expression=J(70),this.type="unary",this},cn};fe("(end)"),fe("(name)"),fe("(literal)"),fe("(regex)"),oe(":"),oe(";"),oe(","),oe(")"),oe("]"),oe("}"),oe(".."),ke("."),ke("+"),ke("-"),ke("*"),ke("/"),ke("%"),ke("="),ke("<"),ke(">"),ke("!="),ke("<="),ke(">="),ke("&"),ke("and"),ke("or"),ke("in"),fe("and"),fe("or"),fe("in"),nt("-"),ke("~>"),Pe("(error)",10,function(Ze){return this.lhs=Ze,this.error=K.error,this.remaining=Re(),this.type="error",this}),nt("*",function(){return this.type="wildcard",this}),nt("**",function(){return this.type="descendant",this}),nt("%",function(){return this.type="parent",this}),ke("(",R["("],function(Ze){if(this.procedure=Ze,this.type="function",this.arguments=[],")"!==K.id)for(;"operator"===K.type&&"?"===K.id?(this.type="partial",this.arguments.push(K),V("?")):this.arguments.push(J(0)),","===K.id;)V(",");if(V(")",!0),"name"===Ze.type&&("function"===Ze.value||"\u03bb"===Ze.value)){if(this.arguments.forEach(function($e,le){if("variable"!==$e.type)return N({code:"S0208",stack:(new Error).stack,position:$e.position,token:$e.value,value:le+1})}),this.type="lambda","<"===K.id){for(var Ct=K.position,cn=1,wn="<";cn>0&&"{"!==K.id&&"(end)"!==K.id;){var An=V();">"===An.id?cn--:"<"===An.id&&cn++,wn+=An.value}V(">");try{this.signature=j(wn)}catch($e){return $e.position=Ct+$e.offset,N($e)}}V("{"),this.body=J(0),V("}")}return this}),nt("(",function(){for(var Ze=[];")"!==K.id&&(Ze.push(J(0)),";"===K.id);)V(";");return V(")",!0),this.type="block",this.expressions=Ze,this}),nt("[",function(){var Ze=[];if("]"!==K.id)for(;;){var Ct=J(0);if(".."===K.id){var cn={type:"binary",value:"..",position:K.position,lhs:Ct};V(".."),cn.rhs=J(0),Ct=cn}if(Ze.push(Ct),","!==K.id)break;V(",")}return V("]",!0),this.expressions=Ze,this.type="unary",this}),ke("[",R["["],function(Ze){if("]"===K.id){for(var Ct=Ze;Ct&&"binary"===Ct.type&&"["===Ct.value;)Ct=Ct.lhs;return Ct.keepArray=!0,V("]"),Ze}return this.lhs=Ze,this.rhs=J(R["]"]),this.type="binary",V("]",!0),this}),ke("^",R["^"],function(Ze){V("(");for(var Ct=[];;){var cn={descending:!1};if("<"===K.id?V("<"):">"===K.id&&(cn.descending=!0,V(">")),cn.expression=J(0),Ct.push(cn),","!==K.id)break;V(",")}return V(")"),this.lhs=Ze,this.rhs=Ct,this.type="binary",this});var Le=function(Ze){var Ct=[];if("}"!==K.id)for(;;){var cn=J(0);V(":");var wn=J(0);if(Ct.push([cn,wn]),","!==K.id)break;V(",")}return V("}",!0),typeof Ze>"u"?(this.lhs=Ct,this.type="unary"):(this.lhs=Ze,this.rhs=Ct,this.type="binary"),this};nt("{",Le),ke("{",R["{"],Le),Pe(":=",R[":="],function(Ze){return"variable"!==Ze.type?N({code:"S0212",stack:(new Error).stack,position:Ze.position,token:Ze.value}):(this.lhs=Ze,this.rhs=J(R[":="]-1),this.type="binary",this)}),ke("@",R["@"],function(Ze){return this.lhs=Ze,this.rhs=J(R["@"]),"variable"!==this.rhs.type?N({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)}),ke("#",R["#"],function(Ze){return this.lhs=Ze,this.rhs=J(R["#"]),"variable"!==this.rhs.type?N({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)}),ke("?",R["?"],function(Ze){return this.type="condition",this.condition=Ze,this.then=J(0),":"===K.id&&(V(":"),this.else=J(0)),this}),nt("|",function(){return this.type="transform",this.pattern=J(0),V("|"),this.update=J(0),","===K.id&&(V(","),this.delete=J(0)),V("|"),this});var at=function(Ze){var Ct;if("function"!==Ze.type||Ze.predicate)if("condition"===Ze.type)Ze.then=at(Ze.then),typeof Ze.else<"u"&&(Ze.else=at(Ze.else)),Ct=Ze;else if("block"===Ze.type){var wn=Ze.expressions.length;wn>0&&(Ze.expressions[wn-1]=at(Ze.expressions[wn-1])),Ct=Ze}else Ct=Ze;else{var cn={type:"lambda",thunk:!0,arguments:[],position:Ze.position};cn.body=Ze,Ct=cn}return Ct},It=0,Ge=0,yt=[],mt=function(Ze,Ct){switch(Ze.type){case"name":case"wildcard":Ct.level--,0===Ct.level&&(typeof Ze.ancestor>"u"||(yt[Ct.index].slot.label=Ze.ancestor.label),Ze.ancestor=Ct,Ze.tuple=!0);break;case"parent":Ct.level++;break;case"block":Ze.expressions.length>0&&(Ze.tuple=!0,Ct=mt(Ze.expressions[Ze.expressions.length-1],Ct));break;case"path":Ze.tuple=!0;var cn=Ze.steps.length-1;for(Ct=mt(Ze.steps[cn--],Ct);Ct.level>0&&cn>=0;)Ct=mt(Ze.steps[cn--],Ct);break;default:throw{code:"S0217",token:Ze.type,position:Ze.position}}return Ct},_t=function(Ze,Ct){if(typeof Ct.seekingParent<"u"||"parent"===Ct.type){var cn=typeof Ct.seekingParent<"u"?Ct.seekingParent:[];"parent"===Ct.type&&cn.push(Ct.slot),typeof Ze.seekingParent>"u"?Ze.seekingParent=cn:Array.prototype.push.apply(Ze.seekingParent,cn)}},Fn=function(Ze){var Ct=Ze.steps.length-1,cn=Ze.steps[Ct],wn=typeof cn.seekingParent<"u"?cn.seekingParent:[];"parent"===cn.type&&wn.push(cn.slot);for(var An=0;An<wn.length;An++){var $e=wn[An];for(Ct=Ze.steps.length-2;$e.level>0;){if(Ct<0){typeof Ze.seekingParent>"u"?Ze.seekingParent=[$e]:Ze.seekingParent.push($e);break}for(var le=Ze.steps[Ct--];Ct>=0&&le.focus&&Ze.steps[Ct].focus;)le=Ze.steps[Ct--];$e=mt(le,$e)}}},Ot=function(Ze){var Ct;switch(Ze.type){case"binary":switch(Ze.value){case".":var cn=Ot(Ze.lhs);Ct="path"===cn.type?cn:{type:"path",steps:[cn]},"parent"===cn.type&&(Ct.seekingParent=[cn.slot]);var wn=Ot(Ze.rhs);"function"===wn.type&&"path"===wn.procedure.type&&1===wn.procedure.steps.length&&"name"===wn.procedure.steps[0].type&&"function"===Ct.steps[Ct.steps.length-1].type&&(Ct.steps[Ct.steps.length-1].nextFunction=wn.procedure.steps[0].value),"path"===wn.type?Array.prototype.push.apply(Ct.steps,wn.steps):(typeof wn.predicate<"u"&&(wn.stages=wn.predicate,delete wn.predicate),Ct.steps.push(wn)),Ct.steps.filter(function(Ht){if("number"===Ht.type||"value"===Ht.type)throw{code:"S0213",stack:(new Error).stack,position:Ht.position,value:Ht.value};return"string"===Ht.type}).forEach(function(Ht){Ht.type="name"}),Ct.steps.filter(function(Ht){return!0===Ht.keepArray}).length>0&&(Ct.keepSingletonArray=!0);var An=Ct.steps[0];"unary"===An.type&&"["===An.value&&(An.consarray=!0);var $e=Ct.steps[Ct.steps.length-1];"unary"===$e.type&&"["===$e.value&&($e.consarray=!0),Fn(Ct);break;case"[":var le=Ct=Ot(Ze.lhs),ot="predicate";if("path"===Ct.type&&(le=Ct.steps[Ct.steps.length-1],ot="stages"),typeof le.group<"u")throw{code:"S0209",stack:(new Error).stack,position:Ze.position};typeof le[ot]>"u"&&(le[ot]=[]);var Je=Ot(Ze.rhs);typeof Je.seekingParent<"u"&&(Je.seekingParent.forEach(Ht=>{1===Ht.level?mt(le,Ht):Ht.level--}),_t(le,Je)),le[ot].push({type:"filter",expr:Je,position:Ze.position});break;case"{":if(typeof(Ct=Ot(Ze.lhs)).group<"u")throw{code:"S0210",stack:(new Error).stack,position:Ze.position};Ct.group={lhs:Ze.rhs.map(function(Ht){return[Ot(Ht[0]),Ot(Ht[1])]}),position:Ze.position};break;case"^":"path"!==(Ct=Ot(Ze.lhs)).type&&(Ct={type:"path",steps:[Ct]});var Sn={type:"sort",position:Ze.position};Sn.terms=Ze.rhs.map(function(Ht){var We=Ot(Ht.expression);return _t(Sn,We),{descending:Ht.descending,expression:We}}),Ct.steps.push(Sn),Fn(Ct);break;case":=":(Ct={type:"bind",value:Ze.value,position:Ze.position}).lhs=Ot(Ze.lhs),Ct.rhs=Ot(Ze.rhs),_t(Ct,Ct.rhs);break;case"@":if(Ct=Ot(Ze.lhs),le=Ct,"path"===Ct.type&&(le=Ct.steps[Ct.steps.length-1]),typeof le.stages<"u"||typeof le.predicate<"u")throw{code:"S0215",stack:(new Error).stack,position:Ze.position};if("sort"===le.type)throw{code:"S0216",stack:(new Error).stack,position:Ze.position};Ze.keepArray&&(le.keepArray=!0),le.focus=Ze.rhs.value,le.tuple=!0;break;case"#":Ct=Ot(Ze.lhs),le=Ct,"path"===Ct.type?le=Ct.steps[Ct.steps.length-1]:(Ct={type:"path",steps:[Ct]},typeof le.predicate<"u"&&(le.stages=le.predicate,delete le.predicate)),typeof le.stages>"u"?le.index=Ze.rhs.value:le.stages.push({type:"index",value:Ze.rhs.value,position:Ze.position}),le.tuple=!0;break;case"~>":(Ct={type:"apply",value:Ze.value,position:Ze.position}).lhs=Ot(Ze.lhs),Ct.rhs=Ot(Ze.rhs);break;default:(Ct={type:Ze.type,value:Ze.value,position:Ze.position}).lhs=Ot(Ze.lhs),Ct.rhs=Ot(Ze.rhs),_t(Ct,Ct.lhs),_t(Ct,Ct.rhs)}break;case"unary":Ct={type:Ze.type,value:Ze.value,position:Ze.position},"["===Ze.value?Ct.expressions=Ze.expressions.map(function(Ht){var We=Ot(Ht);return _t(Ct,We),We}):"{"===Ze.value?Ct.lhs=Ze.lhs.map(function(Ht){var We=Ot(Ht[0]);_t(Ct,We);var Ie=Ot(Ht[1]);return _t(Ct,Ie),[We,Ie]}):(Ct.expression=Ot(Ze.expression),"-"===Ze.value&&"number"===Ct.expression.type?(Ct=Ct.expression).value=-Ct.value:_t(Ct,Ct.expression));break;case"function":case"partial":(Ct={type:Ze.type,name:Ze.name,value:Ze.value,position:Ze.position}).arguments=Ze.arguments.map(function(Ht){var We=Ot(Ht);return _t(Ct,We),We}),Ct.procedure=Ot(Ze.procedure);break;case"lambda":Ct={type:Ze.type,arguments:Ze.arguments,signature:Ze.signature,position:Ze.position};var Hn=Ot(Ze.body);Ct.body=at(Hn);break;case"condition":(Ct={type:Ze.type,position:Ze.position}).condition=Ot(Ze.condition),_t(Ct,Ct.condition),Ct.then=Ot(Ze.then),_t(Ct,Ct.then),typeof Ze.else<"u"&&(Ct.else=Ot(Ze.else),_t(Ct,Ct.else));break;case"transform":(Ct={type:Ze.type,position:Ze.position}).pattern=Ot(Ze.pattern),Ct.update=Ot(Ze.update),typeof Ze.delete<"u"&&(Ct.delete=Ot(Ze.delete));break;case"block":(Ct={type:Ze.type,position:Ze.position}).expressions=Ze.expressions.map(function(Ht){var We=Ot(Ht);return _t(Ct,We),(We.consarray||"path"===We.type&&We.steps[0].consarray)&&(Ct.consarray=!0),We});break;case"name":Ct={type:"path",steps:[Ze]},Ze.keepArray&&(Ct.keepSingletonArray=!0);break;case"parent":Ct={type:"parent",slot:{label:"!"+It++,level:1,index:Ge++}},yt.push(Ct);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":Ct=Ze;break;case"operator":if("and"===Ze.value||"or"===Ze.value||"in"===Ze.value)Ze.type="name",Ct=Ot(Ze);else{if("?"!==Ze.value)throw{code:"S0201",stack:(new Error).stack,position:Ze.position,token:Ze.value};Ct=Ze}break;case"error":Ct=Ze,Ze.lhs&&(Ct=Ot(Ze.lhs));break;default:var pt="S0206";"(end)"===Ze.id&&(pt="S0207");var ht={code:pt,position:Ze.position,token:Ze.value};if(ee)return Ce.push(ht),{type:"error",error:ht};throw ht.stack=(new Error).stack,ht}return Ze.keepArray&&(Ct.keepArray=!0),Ct};z=ne(se),V();var Pn=J(0);if("(end)"!==K.id&&N({code:"S0201",position:K.position,token:K.value}),"parent"===(Pn=Ot(Pn)).type||typeof Pn.seekingParent<"u")throw{code:"S0217",token:Pn.type,position:Pn.position};return Ce.length>0&&(Pn.errors=Ce),Pn}})();G.exports=D},{"./signature":5}],5:[function(L,G,U){var j=L("./utils");const D=(()=>{"use strict";var R={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};return function q(ne){for(var te=1,se=[],ee={},K=ee;te<ne.length;){var z=ne.charAt(te);if(":"===z)break;var ce=function(){se.push(ee),K=ee,ee={}},Ce=function(ke,Pe,nt,Le){for(var at=1,It=Pe;It<ke.length;)if(It++,(z=ke.charAt(It))===Le){if(0==--at)break}else z===nt&&at++;return It};switch(z){case"s":case"n":case"b":case"l":case"o":ee.regex="["+z+"m]",ee.type=z,ce();break;case"a":ee.regex="[asnblfom]",ee.type=z,ee.array=!0,ce();break;case"f":ee.regex="f",ee.type=z,ce();break;case"j":ee.regex="[asnblom]",ee.type=z,ce();break;case"x":ee.regex="[asnblfom]",ee.type=z,ce();break;case"-":K.context=!0,K.contextRegex=new RegExp(K.regex),K.regex+="?";break;case"?":case"+":K.regex+=z;break;case"(":var Re=Ce(ne,te,"(",")"),ie=ne.substring(te+1,Re);if(-1!==ie.indexOf("<"))throw{code:"S0402",stack:(new Error).stack,value:ie,offset:te};ee.regex="["+ie+"m]",ee.type="("+ie+")",te=Re,ce();break;case"<":if("a"!==K.type&&"f"!==K.type)throw{code:"S0401",stack:(new Error).stack,value:K.type,offset:te};var oe=Ce(ne,te,"<",">");K.subtype=ne.substring(te+1,oe),te=oe}te++}var N="^"+se.map(function(ke){return"("+ke.regex+")"}).join("")+"$",V=new RegExp(N),J=function(ke){var Pe;if(j.isFunction(ke))Pe="f";else switch(typeof ke){case"string":Pe="s";break;case"number":Pe="n";break;case"boolean":Pe="b";break;case"object":Pe=null===ke?"l":Array.isArray(ke)?"a":"o";break;default:Pe="m"}return Pe};return{definition:ne,validate:function(ke,Pe){var nt="";ke.forEach(function(Ge){nt+=J(Ge)});var Le=V.exec(nt);if(Le){var at=[],It=0;return se.forEach(function(Ge,yt){var mt=ke[It],_t=Le[yt+1];if(""===_t)if(Ge.context&&Ge.contextRegex){var Fn=J(Pe);if(!Ge.contextRegex.test(Fn))throw{code:"T0411",stack:(new Error).stack,value:Pe,index:It+1};at.push(Pe)}else at.push(mt),It++;else _t.split("").forEach(function(Ot){if("a"===Ge.type){if("m"===Ot)mt=void 0;else{mt=ke[It];var Pn=!0;if(typeof Ge.subtype<"u")if("a"!==Ot&&_t!==Ge.subtype)Pn=!1;else if("a"===Ot&&mt.length>0){var nn=J(mt[0]);Pn=nn===Ge.subtype.charAt(0)&&0===mt.filter(function(Ct){return J(Ct)!==nn}).length}if(!Pn)throw{code:"T0412",stack:(new Error).stack,value:mt,index:It+1,type:R[Ge.subtype]};"a"!==Ot&&(mt=[mt])}at.push(mt),It++}else at.push(mt),It++})}),at}!function(ke,Pe){for(var nt="^",Le=0,at=0;at<se.length;at++){var It=Pe.match(nt+=se[at].regex);if(null===It)throw{code:"T0410",stack:(new Error).stack,value:ke[Le],index:Le+1};Le=It[0].length}throw{code:"T0410",stack:(new Error).stack,value:ke[Le],index:Le+1}}(ke,nt)}}}})();G.exports=D},{"./utils":6}],6:[function(L,G,U){const j=(()=>{"use strict";function D(oe){var N=!1;if("number"==typeof oe&&(N=!isNaN(oe))&&!isFinite(oe))throw{code:"D1001",value:oe,stack:(new Error).stack};return N}var ce=("function"==typeof Symbol?Symbol:{}).iterator||"@@iterator";return{isNumeric:D,isArrayOfStrings:function R(oe){var N=!1;return Array.isArray(oe)&&(N=0===oe.filter(function(V){return"string"!=typeof V}).length),N},isArrayOfNumbers:function q(oe){var N=!1;return Array.isArray(oe)&&(N=0===oe.filter(function(V){return!D(V)}).length),N},createSequence:function ne(){var oe=[];return oe.sequence=!0,1===arguments.length&&oe.push(arguments[0]),oe},isSequence:function te(oe){return!0===oe.sequence&&Array.isArray(oe)},isFunction:function se(oe){return oe&&(!0===oe._jsonata_function||!0===oe._jsonata_lambda)||"function"==typeof oe},isLambda:function K(oe){return oe&&!0===oe._jsonata_lambda},isIterable:function Ce(oe){return"object"==typeof oe&&null!==oe&&ce in oe&&"next"in oe&&"function"==typeof oe.next},getFunctionArity:function ee(oe){return"number"==typeof oe.arity?oe.arity:"function"==typeof oe.implementation?oe.implementation.length:"number"==typeof oe.length?oe.length:oe.arguments.length},isDeepEqual:function Re(oe,N){if(oe===N)return!0;if("object"==typeof oe&&"object"==typeof N&&null!==oe&&null!==N){if(Array.isArray(oe)&&Array.isArray(N)){if(oe.length!==N.length)return!1;for(var V=0;V<oe.length;V++)if(!Re(oe[V],N[V]))return!1;return!0}var J=Object.getOwnPropertyNames(oe),fe=Object.getOwnPropertyNames(N);if(J.length!==fe.length)return!1;for(J=J.sort(),fe=fe.sort(),V=0;V<J.length;V++)if(J[V]!==fe[V])return!1;for(V=0;V<J.length;V++){var ke=J[V];if(!Re(oe[ke],N[ke]))return!1}return!0}return!1},stringToArray:function ie(oe){var N=[];for(let V of oe)N.push(V);return N}}})();G.exports=j},{}]},{},[3])(3)},3353:(Ve,Ae,W)=>{"use strict";function Y(N){var V=Array.prototype.slice.call(arguments,1);return V.forEach(function(J){!J||Object.keys(J).forEach(function(fe){N[fe]=J[fe]})}),N}function L(N){return Object.prototype.toString.call(N)}function D(N){return"[object Function]"===L(N)}function R(N){return N.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var q={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},te={"http:":{validate:function(N,V,J){var fe=N.slice(V);return J.re.http||(J.re.http=new RegExp("^\\/\\/"+J.re.src_auth+J.re.src_host_port_strict+J.re.src_path,"i")),J.re.http.test(fe)?fe.match(J.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(N,V,J){var fe=N.slice(V);return J.re.no_http||(J.re.no_http=new RegExp("^"+J.re.src_auth+"(?:localhost|(?:(?:"+J.re.src_domain+")\\.)+"+J.re.src_domain_root+")"+J.re.src_port+J.re.src_host_terminator+J.re.src_path,"i")),J.re.no_http.test(fe)?V>=3&&":"===N[V-3]||V>=3&&"/"===N[V-3]?0:fe.match(J.re.no_http)[0].length:0}},"mailto:":{validate:function(N,V,J){var fe=N.slice(V);return J.re.mailto||(J.re.mailto=new RegExp("^"+J.re.src_email_name+"@"+J.re.src_host_strict,"i")),J.re.mailto.test(fe)?fe.match(J.re.mailto)[0].length:0}}},ee="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function Ce(N){var V=N.re=W(9234)(N.__opts__),J=N.__tlds__.slice();function fe(Le){return Le.replace("%TLDS%",V.src_tlds)}N.onCompile(),N.__tlds_replaced__||J.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),J.push(V.src_xn),V.src_tlds=J.join("|"),V.email_fuzzy=RegExp(fe(V.tpl_email_fuzzy),"i"),V.link_fuzzy=RegExp(fe(V.tpl_link_fuzzy),"i"),V.link_no_ip_fuzzy=RegExp(fe(V.tpl_link_no_ip_fuzzy),"i"),V.host_fuzzy_test=RegExp(fe(V.tpl_host_fuzzy_test),"i");var ke=[];function Pe(Le,at){throw new Error('(LinkifyIt) Invalid schema "'+Le+'": '+at)}N.__compiled__={},Object.keys(N.__schemas__).forEach(function(Le){var at=N.__schemas__[Le];if(null!==at){var It={validate:null,link:null};if(N.__compiled__[Le]=It,function U(N){return"[object Object]"===L(N)}(at))return function j(N){return"[object RegExp]"===L(N)}(at.validate)?It.validate=function z(N){return function(V,J){var fe=V.slice(J);return N.test(fe)?fe.match(N)[0].length:0}}(at.validate):D(at.validate)?It.validate=at.validate:Pe(Le,at),void(D(at.normalize)?It.normalize=at.normalize:at.normalize?Pe(Le,at):It.normalize=function(N,V){V.normalize(N)});if(function G(N){return"[object String]"===L(N)}(at))return void ke.push(Le);Pe(Le,at)}}),ke.forEach(function(Le){!N.__compiled__[N.__schemas__[Le]]||(N.__compiled__[Le].validate=N.__compiled__[N.__schemas__[Le]].validate,N.__compiled__[Le].normalize=N.__compiled__[N.__schemas__[Le]].normalize)}),N.__compiled__[""]={validate:null,normalize:function(N,V){V.normalize(N)}};var nt=Object.keys(N.__compiled__).filter(function(Le){return Le.length>0&&N.__compiled__[Le]}).map(R).join("|");N.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+V.src_ZPCc+"))("+nt+")","i"),N.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+V.src_ZPCc+"))("+nt+")","ig"),N.re.schema_at_start=RegExp("^"+N.re.schema_search.source,"i"),N.re.pretest=RegExp("("+N.re.schema_test.source+")|("+N.re.host_fuzzy_test.source+")|@","i"),function K(N){N.__index__=-1,N.__text_cache__=""}(N)}function Re(N,V){var J=N.__index__,fe=N.__last_index__,ke=N.__text_cache__.slice(J,fe);this.schema=N.__schema__.toLowerCase(),this.index=J+V,this.lastIndex=fe+V,this.raw=ke,this.text=ke,this.url=ke}function ie(N,V){var J=new Re(N,V);return N.__compiled__[J.schema].normalize(J,N),J}function oe(N,V){if(!(this instanceof oe))return new oe(N,V);V||function ne(N){return Object.keys(N||{}).reduce(function(V,J){return V||q.hasOwnProperty(J)},!1)}(N)&&(V=N,N={}),this.__opts__=Y({},q,V),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Y({},te,N),this.__compiled__={},this.__tlds__=ee,this.__tlds_replaced__=!1,this.re={},Ce(this)}oe.prototype.add=function(V,J){return this.__schemas__[V]=J,Ce(this),this},oe.prototype.set=function(V){return this.__opts__=Y(this.__opts__,V),this},oe.prototype.test=function(V){if(this.__text_cache__=V,this.__index__=-1,!V.length)return!1;var J,fe,ke,Pe,nt,Le,at,It;if(this.re.schema_test.test(V))for((at=this.re.schema_search).lastIndex=0;null!==(J=at.exec(V));)if(Pe=this.testSchemaAt(V,J[2],at.lastIndex)){this.__schema__=J[2],this.__index__=J.index+J[1].length,this.__last_index__=J.index+J[0].length+Pe;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(It=V.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||It<this.__index__)&&null!==(fe=V.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(nt=fe.index+fe[1].length,(this.__index__<0||nt<this.__index__)&&(this.__schema__="",this.__index__=nt,this.__last_index__=fe.index+fe[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&V.indexOf("@")>=0&&null!==(ke=V.match(this.re.email_fuzzy))&&(nt=ke.index+ke[1].length,Le=ke.index+ke[0].length,(this.__index__<0||nt<this.__index__||nt===this.__index__&&Le>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=nt,this.__last_index__=Le)),this.__index__>=0},oe.prototype.pretest=function(V){return this.re.pretest.test(V)},oe.prototype.testSchemaAt=function(V,J,fe){return this.__compiled__[J.toLowerCase()]?this.__compiled__[J.toLowerCase()].validate(V,fe,this):0},oe.prototype.match=function(V){var J=0,fe=[];this.__index__>=0&&this.__text_cache__===V&&(fe.push(ie(this,J)),J=this.__last_index__);for(var ke=J?V.slice(J):V;this.test(ke);)fe.push(ie(this,J)),ke=ke.slice(this.__last_index__),J+=this.__last_index__;return fe.length?fe:null},oe.prototype.matchAtStart=function(V){if(this.__text_cache__=V,this.__index__=-1,!V.length)return null;var J=this.re.schema_at_start.exec(V);if(!J)return null;var fe=this.testSchemaAt(V,J[2],J[0].length);return fe?(this.__schema__=J[2],this.__index__=J.index+J[1].length,this.__last_index__=J.index+J[0].length+fe,ie(this,0)):null},oe.prototype.tlds=function(V,J){return V=Array.isArray(V)?V:[V],J?(this.__tlds__=this.__tlds__.concat(V).sort().filter(function(fe,ke,Pe){return fe!==Pe[ke-1]}).reverse(),Ce(this),this):(this.__tlds__=V.slice(),this.__tlds_replaced__=!0,Ce(this),this)},oe.prototype.normalize=function(V){V.schema||(V.url="http://"+V.url),"mailto:"===V.schema&&!/^mailto:/i.test(V.url)&&(V.url="mailto:"+V.url)},oe.prototype.onCompile=function(){},Ve.exports=oe},9234:(Ve,Ae,W)=>{"use strict";Ve.exports=function(Y){var L={};Y=Y||{},L.src_Any=W(1129).source,L.src_Cc=W(9699).source,L.src_Z=W(5450).source,L.src_P=W(6020).source,L.src_ZPCc=[L.src_Z,L.src_P,L.src_Cc].join("|"),L.src_ZCc=[L.src_Z,L.src_Cc].join("|");return L.src_pseudo_letter="(?:(?![><\uff5c]|"+L.src_ZPCc+")"+L.src_Any+")",L.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",L.src_auth="(?:(?:(?!"+L.src_ZCc+"|[@/\\[\\]()]).)+@)?",L.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",L.src_host_terminator="(?=$|[><\uff5c]|"+L.src_ZPCc+")(?!"+(Y["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+L.src_ZPCc+"))",L.src_path="(?:[/?#](?:(?!"+L.src_ZCc+"|[><\uff5c]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+L.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+L.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+L.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+L.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+L.src_ZCc+"|[']).)+\\'|\\'(?="+L.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+L.src_ZCc+"|[.]|$)|"+(Y["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+L.src_ZCc+"|$)|;(?!"+L.src_ZCc+"|$)|\\!+(?!"+L.src_ZCc+"|[!]|$)|\\?(?!"+L.src_ZCc+"|[?]|$))+|\\/)?",L.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',L.src_xn="xn--[a-z0-9\\-]{1,59}",L.src_domain_root="(?:"+L.src_xn+"|"+L.src_pseudo_letter+"{1,63})",L.src_domain="(?:"+L.src_xn+"|(?:"+L.src_pseudo_letter+")|(?:"+L.src_pseudo_letter+"(?:-|"+L.src_pseudo_letter+"){0,61}"+L.src_pseudo_letter+"))",L.src_host="(?:(?:(?:(?:"+L.src_domain+")\\.)*"+L.src_domain+"))",L.tpl_host_fuzzy="(?:"+L.src_ip4+"|(?:(?:(?:"+L.src_domain+")\\.)+(?:%TLDS%)))",L.tpl_host_no_ip_fuzzy="(?:(?:(?:"+L.src_domain+")\\.)+(?:%TLDS%))",L.src_host_strict=L.src_host+L.src_host_terminator,L.tpl_host_fuzzy_strict=L.tpl_host_fuzzy+L.src_host_terminator,L.src_host_port_strict=L.src_host+L.src_port+L.src_host_terminator,L.tpl_host_port_fuzzy_strict=L.tpl_host_fuzzy+L.src_port+L.src_host_terminator,L.tpl_host_port_no_ip_fuzzy_strict=L.tpl_host_no_ip_fuzzy+L.src_port+L.src_host_terminator,L.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+L.src_ZPCc+"|>|$))",L.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+L.src_ZCc+")("+L.src_email_name+"@"+L.tpl_host_fuzzy_strict+")",L.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+L.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+L.tpl_host_port_fuzzy_strict+L.src_path+")",L.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+L.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+L.tpl_host_port_no_ip_fuzzy_strict+L.src_path+")",L}},8132:Ve=>{var Ht,W="__lodash_hash_undefined__",U=/^\[object .+?Constructor\]$/,j="object"==typeof global&&global&&global.Object===Object&&global,D="object"==typeof self&&self&&self.Object===Object&&self,R=j||D||Function("return this")(),te=Array.prototype,se=Function.prototype,ee=Object.prototype,K=R["__core-js_shared__"],z=(Ht=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+Ht:"",ce=se.toString,Ce=ee.hasOwnProperty,Re=ee.toString,ie=RegExp("^"+ce.call(Ce).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=te.splice,N=$e(R,"Map"),V=$e(Object,"create");function J(Ht){var We=-1,Ie=Ht?Ht.length:0;for(this.clear();++We<Ie;){var Me=Ht[We];this.set(Me[0],Me[1])}}function at(Ht){var We=-1,Ie=Ht?Ht.length:0;for(this.clear();++We<Ie;){var Me=Ht[We];this.set(Me[0],Me[1])}}function Fn(Ht){var We=-1,Ie=Ht?Ht.length:0;for(this.clear();++We<Ie;){var Me=Ht[We];this.set(Me[0],Me[1])}}function cn(Ht,We){for(var Ie=Ht.length;Ie--;)if(Hn(Ht[Ie][0],We))return Ie;return-1}function An(Ht,We){var Ie=Ht.__data__;return function le(Ht){var We=typeof Ht;return"string"==We||"number"==We||"symbol"==We||"boolean"==We?"__proto__"!==Ht:null===Ht}(We)?Ie["string"==typeof We?"string":"hash"]:Ie.map}function $e(Ht,We){var Ie=function q(Ht,We){return Ht?.[We]}(Ht,We);return function wn(Ht){if(!ht(Ht)||function ot(Ht){return!!z&&z in Ht}(Ht))return!1;var We=function pt(Ht){var We=ht(Ht)?Re.call(Ht):"";return"[object Function]"==We||"[object GeneratorFunction]"==We}(Ht)||function ne(Ht){var We=!1;if(null!=Ht&&"function"!=typeof Ht.toString)try{We=!!(Ht+"")}catch{}return We}(Ht)?ie:U;return We.test(function Je(Ht){if(null!=Ht){try{return ce.call(Ht)}catch{}try{return Ht+""}catch{}}return""}(Ht))}(Ie)?Ie:void 0}function Sn(Ht,We){if("function"!=typeof Ht||We&&"function"!=typeof We)throw new TypeError("Expected a function");var Ie=function(){var Me=arguments,Et=We?We.apply(this,Me):Me[0],dn=Ie.cache;if(dn.has(Et))return dn.get(Et);var Xn=Ht.apply(this,Me);return Ie.cache=dn.set(Et,Xn),Xn};return Ie.cache=new(Sn.Cache||Fn),Ie}function Hn(Ht,We){return Ht===We||Ht!=Ht&&We!=We}function ht(Ht){var We=typeof Ht;return!!Ht&&("object"==We||"function"==We)}J.prototype.clear=function fe(){this.__data__=V?V(null):{}},J.prototype.delete=function ke(Ht){return this.has(Ht)&&delete this.__data__[Ht]},J.prototype.get=function Pe(Ht){var We=this.__data__;if(V){var Ie=We[Ht];return Ie===W?void 0:Ie}return Ce.call(We,Ht)?We[Ht]:void 0},J.prototype.has=function nt(Ht){var We=this.__data__;return V?void 0!==We[Ht]:Ce.call(We,Ht)},J.prototype.set=function Le(Ht,We){return this.__data__[Ht]=V&&void 0===We?W:We,this},at.prototype.clear=function It(){this.__data__=[]},at.prototype.delete=function Ge(Ht){var We=this.__data__,Ie=cn(We,Ht);return!(Ie<0||(Ie==We.length-1?We.pop():oe.call(We,Ie,1),0))},at.prototype.get=function yt(Ht){var We=this.__data__,Ie=cn(We,Ht);return Ie<0?void 0:We[Ie][1]},at.prototype.has=function mt(Ht){return cn(this.__data__,Ht)>-1},at.prototype.set=function _t(Ht,We){var Ie=this.__data__,Me=cn(Ie,Ht);return Me<0?Ie.push([Ht,We]):Ie[Me][1]=We,this},Fn.prototype.clear=function Ot(){this.__data__={hash:new J,map:new(N||at),string:new J}},Fn.prototype.delete=function Pn(Ht){return An(this,Ht).delete(Ht)},Fn.prototype.get=function nn(Ht){return An(this,Ht).get(Ht)},Fn.prototype.has=function Ze(Ht){return An(this,Ht).has(Ht)},Fn.prototype.set=function Ct(Ht,We){return An(this,Ht).set(Ht,We),this},Sn.Cache=Fn,Ve.exports=Sn},8078:Ve=>{var Ae="Expected a function",L=/^\s+|\s+$/g,G=/^[-+]0x[0-9a-f]+$/i,U=/^0b[01]+$/i,j=/^0o[0-7]+$/i,D=parseInt,R="object"==typeof global&&global&&global.Object===Object&&global,q="object"==typeof self&&self&&self.Object===Object&&self,ne=R||q||Function("return this")(),se=Object.prototype.toString,ee=Math.max,K=Math.min,z=function(){return ne.Date.now()};function Re(V){var J=typeof V;return!!V&&("object"==J||"function"==J)}function N(V){if("number"==typeof V)return V;if(function oe(V){return"symbol"==typeof V||function ie(V){return!!V&&"object"==typeof V}(V)&&"[object Symbol]"==se.call(V)}(V))return NaN;if(Re(V)){var J="function"==typeof V.valueOf?V.valueOf():V;V=Re(J)?J+"":J}if("string"!=typeof V)return 0===V?V:+V;V=V.replace(L,"");var fe=U.test(V);return fe||j.test(V)?D(V.slice(2),fe?2:8):G.test(V)?NaN:+V}Ve.exports=function Ce(V,J,fe){var ke=!0,Pe=!0;if("function"!=typeof V)throw new TypeError(Ae);return Re(fe)&&(ke="leading"in fe?!!fe.leading:ke,Pe="trailing"in fe?!!fe.trailing:Pe),function ce(V,J,fe){var ke,Pe,nt,Le,at,It,Ge=0,yt=!1,mt=!1,_t=!0;if("function"!=typeof V)throw new TypeError(Ae);function Fn($e){var le=ke,ot=Pe;return ke=Pe=void 0,Ge=$e,Le=V.apply(ot,le)}function Ot($e){return Ge=$e,at=setTimeout(Ze,J),yt?Fn($e):Le}function nn($e){var le=$e-It;return void 0===It||le>=J||le<0||mt&&$e-Ge>=nt}function Ze(){var $e=z();if(nn($e))return Ct($e);at=setTimeout(Ze,function Pn($e){var Je=J-($e-It);return mt?K(Je,nt-($e-Ge)):Je}($e))}function Ct($e){return at=void 0,_t&&ke?Fn($e):(ke=Pe=void 0,Le)}function An(){var $e=z(),le=nn($e);if(ke=arguments,Pe=this,It=$e,le){if(void 0===at)return Ot(It);if(mt)return at=setTimeout(Ze,J),Fn(It)}return void 0===at&&(at=setTimeout(Ze,J)),Le}return J=N(J)||0,Re(fe)&&(yt=!!fe.leading,nt=(mt="maxWait"in fe)?ee(N(fe.maxWait)||0,J):nt,_t="trailing"in fe?!!fe.trailing:_t),An.cancel=function cn(){void 0!==at&&clearTimeout(at),Ge=0,ke=It=Pe=at=void 0},An.flush=function wn(){return void 0===at?Le:Ct(z())},An}(V,J,{leading:ke,maxWait:J,trailing:Pe})}},4994:(Ve,Ae,W)=>{var Y=W(4312),L=W(6421),G=W(5764),U=W(8685),j=W(6676);function D(R){var q=-1,ne=null==R?0:R.length;for(this.clear();++q<ne;){var te=R[q];this.set(te[0],te[1])}}D.prototype.clear=Y,D.prototype.delete=L,D.prototype.get=G,D.prototype.has=U,D.prototype.set=j,Ve.exports=D},9215:(Ve,Ae,W)=>{var Y=W(1840),L=W(4378),G=W(4981),U=W(7343),j=W(8895);function D(R){var q=-1,ne=null==R?0:R.length;for(this.clear();++q<ne;){var te=R[q];this.set(te[0],te[1])}}D.prototype.clear=Y,D.prototype.delete=L,D.prototype.get=G,D.prototype.has=U,D.prototype.set=j,Ve.exports=D},1501:(Ve,Ae,W)=>{var G=W(3436)(W(2119),"Map");Ve.exports=G},9850:(Ve,Ae,W)=>{var Y=W(638),L=W(1184),G=W(866),U=W(3771),j=W(1772);function D(R){var q=-1,ne=null==R?0:R.length;for(this.clear();++q<ne;){var te=R[q];this.set(te[0],te[1])}}D.prototype.clear=Y,D.prototype.delete=L,D.prototype.get=G,D.prototype.has=U,D.prototype.set=j,Ve.exports=D},443:(Ve,Ae,W)=>{var Y=W(2119);Ve.exports=Y.Symbol},4633:Ve=>{Ve.exports=function Ae(W,Y){for(var L=-1,G=null==W?0:W.length,U=Array(G);++L<G;)U[L]=Y(W[L],L,W);return U}},9719:(Ve,Ae,W)=>{var Y=W(5683),L=W(217),U=Object.prototype.hasOwnProperty;Ve.exports=function j(D,R,q){var ne=D[R];(!U.call(D,R)||!L(ne,q)||void 0===q&&!(R in D))&&Y(D,R,q)}},3503:(Ve,Ae,W)=>{var Y=W(217);Ve.exports=function L(G,U){for(var j=G.length;j--;)if(Y(G[j][0],U))return j;return-1}},5683:(Ve,Ae,W)=>{var Y=W(6713);Ve.exports=function L(G,U,j){"__proto__"==U&&Y?Y(G,U,{configurable:!0,enumerable:!0,value:j,writable:!0}):G[U]=j}},5456:(Ve,Ae,W)=>{var Y=W(6884),L=W(8533);Ve.exports=function G(U,j){for(var D=0,R=(j=Y(j,U)).length;null!=U&&D<R;)U=U[L(j[D++])];return D&&D==R?U:void 0}},3337:(Ve,Ae,W)=>{var Y=W(443),L=W(1318),G=W(2902),D=Y?Y.toStringTag:void 0;Ve.exports=function R(q){return null==q?void 0===q?"[object Undefined]":"[object Null]":D&&D in Object(q)?L(q):G(q)}},7304:(Ve,Ae,W)=>{var Y=W(5946),L=W(1943),G=W(5940),U=W(2827),D=/^\[object .+?Constructor\]$/,se=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Ve.exports=function ee(K){return!(!G(K)||L(K))&&(Y(K)?se:D).test(U(K))}},5963:(Ve,Ae,W)=>{var Y=W(9719),L=W(6884),G=W(8442),U=W(5940),j=W(8533);Ve.exports=function D(R,q,ne,te){if(!U(R))return R;for(var se=-1,ee=(q=L(q,R)).length,K=ee-1,z=R;null!=z&&++se<ee;){var ce=j(q[se]),Ce=ne;if("__proto__"===ce||"constructor"===ce||"prototype"===ce)return R;if(se!=K){var Re=z[ce];void 0===(Ce=te?te(Re,ce,z):void 0)&&(Ce=U(Re)?Re:G(q[se+1])?[]:{})}Y(z,ce,Ce),z=z[ce]}return R}},3935:(Ve,Ae,W)=>{var Y=W(443),L=W(4633),G=W(9460),U=W(4129),D=Y?Y.prototype:void 0,R=D?D.toString:void 0;Ve.exports=function q(ne){if("string"==typeof ne)return ne;if(G(ne))return L(ne,q)+"";if(U(ne))return R?R.call(ne):"";var te=ne+"";return"0"==te&&1/ne==-1/0?"-0":te}},3348:(Ve,Ae,W)=>{var Y=W(2760),L=/^\s+/;Ve.exports=function G(U){return U&&U.slice(0,Y(U)+1).replace(L,"")}},6884:(Ve,Ae,W)=>{var Y=W(9460),L=W(5352),G=W(2855),U=W(3943);Ve.exports=function j(D,R){return Y(D)?D:L(D,R)?[D]:G(U(D))}},9454:Ve=>{Ve.exports=function Ae(W,Y){var L=-1,G=W.length;for(Y||(Y=Array(G));++L<G;)Y[L]=W[L];return Y}},4610:(Ve,Ae,W)=>{var Y=W(2119);Ve.exports=Y["__core-js_shared__"]},6713:(Ve,Ae,W)=>{var Y=W(3436),L=function(){try{var G=Y(Object,"defineProperty");return G({},"",{}),G}catch{}}();Ve.exports=L},9122:Ve=>{var Ae="object"==typeof global&&global&&global.Object===Object&&global;Ve.exports=Ae},4537:(Ve,Ae,W)=>{var Y=W(3819);Ve.exports=function L(G,U){var j=G.__data__;return Y(U)?j["string"==typeof U?"string":"hash"]:j.map}},3436:(Ve,Ae,W)=>{var Y=W(7304),L=W(1990);Ve.exports=function G(U,j){var D=L(U,j);return Y(D)?D:void 0}},1318:(Ve,Ae,W)=>{var Y=W(443),L=Object.prototype,G=L.hasOwnProperty,U=L.toString,j=Y?Y.toStringTag:void 0;Ve.exports=function D(R){var q=G.call(R,j),ne=R[j];try{R[j]=void 0;var te=!0}catch{}var se=U.call(R);return te&&(q?R[j]=ne:delete R[j]),se}},1990:Ve=>{Ve.exports=function Ae(W,Y){return W?.[Y]}},4312:(Ve,Ae,W)=>{var Y=W(862);Ve.exports=function L(){this.__data__=Y?Y(null):{},this.size=0}},6421:Ve=>{Ve.exports=function Ae(W){var Y=this.has(W)&&delete this.__data__[W];return this.size-=Y?1:0,Y}},5764:(Ve,Ae,W)=>{var Y=W(862),U=Object.prototype.hasOwnProperty;Ve.exports=function j(D){var R=this.__data__;if(Y){var q=R[D];return"__lodash_hash_undefined__"===q?void 0:q}return U.call(R,D)?R[D]:void 0}},8685:(Ve,Ae,W)=>{var Y=W(862),G=Object.prototype.hasOwnProperty;Ve.exports=function U(j){var D=this.__data__;return Y?void 0!==D[j]:G.call(D,j)}},6676:(Ve,Ae,W)=>{var Y=W(862);Ve.exports=function G(U,j){var D=this.__data__;return this.size+=this.has(U)?0:1,D[U]=Y&&void 0===j?"__lodash_hash_undefined__":j,this}},8442:Ve=>{var W=/^(?:0|[1-9]\d*)$/;Ve.exports=function Y(L,G){var U=typeof L;return!!(G=G??9007199254740991)&&("number"==U||"symbol"!=U&&W.test(L))&&L>-1&&L%1==0&&L<G}},5352:(Ve,Ae,W)=>{var Y=W(9460),L=W(4129),G=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/;Ve.exports=function j(D,R){if(Y(D))return!1;var q=typeof D;return!("number"!=q&&"symbol"!=q&&"boolean"!=q&&null!=D&&!L(D))||U.test(D)||!G.test(D)||null!=R&&D in Object(R)}},3819:Ve=>{Ve.exports=function Ae(W){var Y=typeof W;return"string"==Y||"number"==Y||"symbol"==Y||"boolean"==Y?"__proto__"!==W:null===W}},1943:(Ve,Ae,W)=>{var U,Y=W(4610),L=(U=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"";Ve.exports=function G(U){return!!L&&L in U}},1840:Ve=>{Ve.exports=function Ae(){this.__data__=[],this.size=0}},4378:(Ve,Ae,W)=>{var Y=W(3503),G=Array.prototype.splice;Ve.exports=function U(j){var D=this.__data__,R=Y(D,j);return!(R<0||(R==D.length-1?D.pop():G.call(D,R,1),--this.size,0))}},4981:(Ve,Ae,W)=>{var Y=W(3503);Ve.exports=function L(G){var U=this.__data__,j=Y(U,G);return j<0?void 0:U[j][1]}},7343:(Ve,Ae,W)=>{var Y=W(3503);Ve.exports=function L(G){return Y(this.__data__,G)>-1}},8895:(Ve,Ae,W)=>{var Y=W(3503);Ve.exports=function L(G,U){var j=this.__data__,D=Y(j,G);return D<0?(++this.size,j.push([G,U])):j[D][1]=U,this}},638:(Ve,Ae,W)=>{var Y=W(4994),L=W(9215),G=W(1501);Ve.exports=function U(){this.size=0,this.__data__={hash:new Y,map:new(G||L),string:new Y}}},1184:(Ve,Ae,W)=>{var Y=W(4537);Ve.exports=function L(G){var U=Y(this,G).delete(G);return this.size-=U?1:0,U}},866:(Ve,Ae,W)=>{var Y=W(4537);Ve.exports=function L(G){return Y(this,G).get(G)}},3771:(Ve,Ae,W)=>{var Y=W(4537);Ve.exports=function L(G){return Y(this,G).has(G)}},1772:(Ve,Ae,W)=>{var Y=W(4537);Ve.exports=function L(G,U){var j=Y(this,G),D=j.size;return j.set(G,U),this.size+=j.size==D?0:1,this}},719:(Ve,Ae,W)=>{var Y=W(535);Ve.exports=function G(U){var j=Y(U,function(R){return 500===D.size&&D.clear(),R}),D=j.cache;return j}},862:(Ve,Ae,W)=>{var L=W(3436)(Object,"create");Ve.exports=L},2902:Ve=>{var W=Object.prototype.toString;Ve.exports=function Y(L){return W.call(L)}},2119:(Ve,Ae,W)=>{var Y=W(9122),L="object"==typeof self&&self&&self.Object===Object&&self,G=Y||L||Function("return this")();Ve.exports=G},2855:(Ve,Ae,W)=>{var Y=W(719),L=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/\\(\\)?/g,U=Y(function(j){var D=[];return 46===j.charCodeAt(0)&&D.push(""),j.replace(L,function(R,q,ne,te){D.push(ne?te.replace(G,"$1"):q||R)}),D});Ve.exports=U},8533:(Ve,Ae,W)=>{var Y=W(4129);Ve.exports=function G(U){if("string"==typeof U||Y(U))return U;var j=U+"";return"0"==j&&1/U==-1/0?"-0":j}},2827:Ve=>{var W=Function.prototype.toString;Ve.exports=function Y(L){if(null!=L){try{return W.call(L)}catch{}try{return L+""}catch{}}return""}},2760:Ve=>{var Ae=/\s/;Ve.exports=function W(Y){for(var L=Y.length;L--&&Ae.test(Y.charAt(L)););return L}},406:(Ve,Ae,W)=>{var Y=W(5940),L=W(1710),G=W(1467),j=Math.max,D=Math.min;Ve.exports=function R(q,ne,te){var se,ee,K,z,ce,Ce,Re=0,ie=!1,oe=!1,N=!0;if("function"!=typeof q)throw new TypeError("Expected a function");function V(Ge){var yt=se,mt=ee;return se=ee=void 0,Re=Ge,z=q.apply(mt,yt)}function J(Ge){return Re=Ge,ce=setTimeout(Pe,ne),ie?V(Ge):z}function ke(Ge){var yt=Ge-Ce;return void 0===Ce||yt>=ne||yt<0||oe&&Ge-Re>=K}function Pe(){var Ge=L();if(ke(Ge))return nt(Ge);ce=setTimeout(Pe,function fe(Ge){var _t=ne-(Ge-Ce);return oe?D(_t,K-(Ge-Re)):_t}(Ge))}function nt(Ge){return ce=void 0,N&&se?V(Ge):(se=ee=void 0,z)}function It(){var Ge=L(),yt=ke(Ge);if(se=arguments,ee=this,Ce=Ge,yt){if(void 0===ce)return J(Ce);if(oe)return clearTimeout(ce),ce=setTimeout(Pe,ne),V(Ce)}return void 0===ce&&(ce=setTimeout(Pe,ne)),z}return ne=G(ne)||0,Y(te)&&(ie=!!te.leading,K=(oe="maxWait"in te)?j(G(te.maxWait)||0,ne):K,N="trailing"in te?!!te.trailing:N),It.cancel=function Le(){void 0!==ce&&clearTimeout(ce),Re=0,se=Ce=ee=ce=void 0},It.flush=function at(){return void 0===ce?z:nt(L())},It}},217:Ve=>{Ve.exports=function Ae(W,Y){return W===Y||W!=W&&Y!=Y}},8817:(Ve,Ae,W)=>{var Y=W(5456);Ve.exports=function L(G,U,j){var D=null==G?void 0:Y(G,U);return void 0===D?j:D}},9460:Ve=>{Ve.exports=Array.isArray},5946:(Ve,Ae,W)=>{var Y=W(3337),L=W(5940);Ve.exports=function R(q){if(!L(q))return!1;var ne=Y(q);return"[object Function]"==ne||"[object GeneratorFunction]"==ne||"[object AsyncFunction]"==ne||"[object Proxy]"==ne}},5940:Ve=>{Ve.exports=function Ae(W){var Y=typeof W;return null!=W&&("object"==Y||"function"==Y)}},2671:Ve=>{Ve.exports=function Ae(W){return null!=W&&"object"==typeof W}},4129:(Ve,Ae,W)=>{var Y=W(3337),L=W(2671);Ve.exports=function U(j){return"symbol"==typeof j||L(j)&&"[object Symbol]"==Y(j)}},7489:function(Ve,Ae,W){var Y;Ve=W.nmd(Ve),function(){var L,D="Expected a function",q="__lodash_hash_undefined__",te="__lodash_placeholder__",V=32,_t=1/0,Fn=9007199254740991,nn=4294967295,cn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",V],["partialRight",64],["rearg",256]],wn="[object Arguments]",An="[object Array]",le="[object Boolean]",ot="[object Date]",Sn="[object Error]",Hn="[object Function]",pt="[object GeneratorFunction]",ht="[object Map]",Ht="[object Number]",Ie="[object Object]",Me="[object Promise]",dn="[object RegExp]",Xn="[object Set]",Jn="[object String]",ms="[object Symbol]",os="[object WeakMap]",Zi="[object ArrayBuffer]",ra="[object DataView]",Ha="[object Float32Array]",fl="[object Float64Array]",Er="[object Int8Array]",xd="[object Int16Array]",kc="[object Int32Array]",Sa="[object Uint8Array]",Oc="[object Uint8ClampedArray]",Ja="[object Uint16Array]",Go="[object Uint32Array]",Rt=/\b__p \+= '';/g,fn=/\b(__p \+=) '' \+/g,gn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yn=/&(?:amp|lt|gt|quot|#39);/g,qe=/[&<>"']/g,kt=RegExp(yn.source),on=RegExp(qe.source),En=/<%-([\s\S]+?)%>/g,Nn=/<%([\s\S]+?)%>/g,hi=/<%=([\s\S]+?)%>/g,ar=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qr=/^\w*$/,Ss=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xs=/[\\^$.*+?()[\]{}|]/g,xo=RegExp(xs.source),lo=/^\s+/,Kr=/\s/,Ga=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ns=/\{\n\/\* \[wrapped with (.+)\] \*/,ya=/,? & /,sa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zl=/[()=,{}\[\]\/\s]/,Fc=/\\(\\)?/g,je=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,et=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,Te=/^\[object .+?Constructor\]$/,Qe=/^0o[0-7]+$/i,Mt=/^(?:0|[1-9]\d*)$/,Xt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xn=/($^)/,vi=/['\n\r\u2028\u2029\\]/g,mi="\\ud800-\\udfff",gr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",dr="\\u2700-\\u27bf",ys="a-z\\xdf-\\xf6\\xf8-\\xff",Io="A-Z\\xc0-\\xd6\\xd8-\\xde",Vl="\\ufe0e\\ufe0f",Zr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",el="["+mi+"]",Xl="["+Zr+"]",Ei="["+gr+"]",wl="\\d+",zs="["+dr+"]",wo="["+ys+"]",id="[^"+mi+Zr+wl+dr+ys+Io+"]",Sf="\\ud83c[\\udffb-\\udfff]",js="[^"+mi+"]",hr="(?:\\ud83c[\\udde6-\\uddff]){2}",My="[\\ud800-\\udbff][\\udc00-\\udfff]",_a="["+Io+"]",Zc="(?:"+wo+"|"+id+")",yh="(?:"+_a+"|"+id+")",oc="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",an="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Vs="(?:"+Ei+"|"+Sf+")?",Xh="["+Vl+"]?",Qc=Xh+Vs+"(?:\\u200d(?:"+[js,hr,My].join("|")+")"+Xh+Vs+")*",Do="(?:"+[zs,hr,My].join("|")+")"+Qc,$d="(?:"+[js+Ei+"?",Ei,hr,My,el].join("|")+")",N_=RegExp("['\u2019]","g"),Nc=RegExp(Ei,"g"),cr=RegExp(Sf+"(?="+Sf+")|"+$d+Qc,"g"),fb=RegExp([_a+"?"+wo+"+"+oc+"(?="+[Xl,_a,"$"].join("|")+")",yh+"+"+an+"(?="+[Xl,_a+Zc,"$"].join("|")+")",_a+"?"+Zc+"+"+oc,_a+"+"+an,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wl,Do].join("|"),"g"),Vr=RegExp("[\\u200d"+mi+gr+Vl+"]"),Jc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],B_=-1,tl={};tl[Ha]=tl[fl]=tl[Er]=tl[xd]=tl[kc]=tl[Sa]=tl[Oc]=tl[Ja]=tl[Go]=!0,tl[wn]=tl[An]=tl[Zi]=tl[le]=tl[ra]=tl[ot]=tl[Sn]=tl[Hn]=tl[ht]=tl[Ht]=tl[Ie]=tl[dn]=tl[Xn]=tl[Jn]=tl[os]=!1;var Fa={};Fa[wn]=Fa[An]=Fa[Zi]=Fa[ra]=Fa[le]=Fa[ot]=Fa[Ha]=Fa[fl]=Fa[Er]=Fa[xd]=Fa[kc]=Fa[ht]=Fa[Ht]=Fa[Ie]=Fa[dn]=Fa[Xn]=Fa[Jn]=Fa[ms]=Fa[Sa]=Fa[Oc]=Fa[Ja]=Fa[Go]=!0,Fa[Sn]=Fa[Hn]=Fa[os]=!1;var Im={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Es=parseFloat,bv=parseInt,Cv="object"==typeof global&&global&&global.Object===Object&&global,rd="object"==typeof self&&self&&self.Object===Object&&self,yc=Cv||rd||Function("return this")(),z_=Ae&&!Ae.nodeType&&Ae,Id=z_&&Ve&&!Ve.nodeType&&Ve,Sd=Id&&Id.exports===z_,Ly=Sd&&Cv.process,qd=function(){try{return Id&&Id.require&&Id.require("util").types||Ly&&Ly.binding&&Ly.binding("util")}catch{}}(),nl=qd&&qd.isArrayBuffer,Lo=qd&&qd.isDate,V_=qd&&qd.isMap,Py=qd&&qd.isRegExp,Yh=qd&&qd.isSet,Wo=qd&&qd.isTypedArray;function Al(On,Ci,di){switch(di.length){case 0:return On.call(Ci);case 1:return On.call(Ci,di[0]);case 2:return On.call(Ci,di[0],di[1]);case 3:return On.call(Ci,di[0],di[1],di[2])}return On.apply(Ci,di)}function tp(On,Ci,di,Jr){for(var co=-1,wa=null==On?0:On.length;++co<wa;){var Cc=On[co];Ci(Jr,Cc,di(Cc),On)}return Jr}function xl(On,Ci){for(var di=-1,Jr=null==On?0:On.length;++di<Jr&&!1!==Ci(On[di],di,On););return On}function Dl(On,Ci){for(var di=null==On?0:On.length;di--&&!1!==Ci(On[di],di,On););return On}function ku(On,Ci){for(var di=-1,Jr=null==On?0:On.length;++di<Jr;)if(!Ci(On[di],di,On))return!1;return!0}function Ed(On,Ci){for(var di=-1,Jr=null==On?0:On.length,co=0,wa=[];++di<Jr;){var Cc=On[di];Ci(Cc,di,On)&&(wa[co++]=Cc)}return wa}function np(On,Ci){return!(null==On||!On.length)&&rl(On,Ci,0)>-1}function Rr(On,Ci,di){for(var Jr=-1,co=null==On?0:On.length;++Jr<co;)if(di(Ci,On[Jr]))return!0;return!1}function il(On,Ci){for(var di=-1,Jr=null==On?0:On.length,co=Array(Jr);++di<Jr;)co[di]=Ci(On[di],di,On);return co}function Xd(On,Ci){for(var di=-1,Jr=Ci.length,co=On.length;++di<Jr;)On[co+di]=Ci[di];return On}function Ef(On,Ci,di,Jr){var co=-1,wa=null==On?0:On.length;for(Jr&&wa&&(di=On[++co]);++co<wa;)di=Ci(di,On[co],co,On);return di}function Xr(On,Ci,di,Jr){var co=null==On?0:On.length;for(Jr&&co&&(di=On[--co]);co--;)di=Ci(di,On[co],co,On);return di}function Sm(On,Ci){for(var di=-1,Jr=null==On?0:On.length;++di<Jr;)if(Ci(On[di],di,On))return!0;return!1}var Ry=Ks("length");function Ca(On,Ci,di){var Jr;return di(On,function(co,wa,Cc){if(Ci(co,wa,Cc))return Jr=wa,!1}),Jr}function ac(On,Ci,di,Jr){for(var co=On.length,wa=di+(Jr?1:-1);Jr?wa--:++wa<co;)if(Ci(On[wa],wa,On))return wa;return-1}function rl(On,Ci,di){return Ci==Ci?function cp(On,Ci,di){for(var Jr=di-1,co=On.length;++Jr<co;)if(On[Jr]===Ci)return Jr;return-1}(On,Ci,di):ac(On,_c,di)}function Fu(On,Ci,di,Jr){for(var co=di-1,wa=On.length;++co<wa;)if(Jr(On[co],Ci))return co;return-1}function _c(On){return On!=On}function zr(On,Ci){var di=null==On?0:On.length;return di?Yl(On,Ci)/di:NaN}function Ks(On){return function(Ci){return null==Ci?L:Ci[On]}}function Wa(On){return function(Ci){return null==On?L:On[Ci]}}function Nu(On,Ci,di,Jr,co){return co(On,function(wa,Cc,$a){di=Jr?(Jr=!1,wa):Ci(di,wa,Cc,$a)}),di}function Yl(On,Ci){for(var di,Jr=-1,co=On.length;++Jr<co;){var wa=Ci(On[Jr]);wa!==L&&(di=di===L?wa:di+wa)}return di}function _h(On,Ci){for(var di=-1,Jr=Array(On);++di<On;)Jr[di]=Ci(di);return Jr}function Xp(On){return On&&On.slice(0,Au(On)+1).replace(lo,"")}function bc(On){return function(Ci){return On(Ci)}}function fo(On,Ci){return il(Ci,function(di){return On[di]})}function Tf(On,Ci){return On.has(Ci)}function rp(On,Ci){for(var di=-1,Jr=On.length;++di<Jr&&rl(Ci,On[di],0)>-1;);return di}function Em(On,Ci){for(var di=On.length;di--&&rl(Ci,On[di],0)>-1;);return di}function Mf(On,Ci){for(var di=On.length,Jr=0;di--;)On[di]===Ci&&++Jr;return Jr}var eu=Wa({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Fg=Wa({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sp(On){return"\\"+Im[On]}function Md(On){return Vr.test(On)}function op(On){var Ci=-1,di=Array(On.size);return On.forEach(function(Jr,co){di[++Ci]=[co,Jr]}),di}function ap(On,Ci){return function(di){return On(Ci(di))}}function Bu(On,Ci){for(var di=-1,Jr=On.length,co=0,wa=[];++di<Jr;){var Cc=On[di];(Cc===Ci||Cc===te)&&(On[di]=te,wa[co++]=di)}return wa}function Yp(On){var Ci=-1,di=Array(On.size);return On.forEach(function(Jr){di[++Ci]=Jr}),di}function Pl(On){return Md(On)?function wv(On){for(var Ci=cr.lastIndex=0;cr.test(On);)++Ci;return Ci}(On):Ry(On)}function Dd(On){return Md(On)?function Ng(On){return On.match(cr)||[]}(On):function fs(On){return On.split("")}(On)}function Au(On){for(var Ci=On.length;Ci--&&Kr.test(On.charAt(Ci)););return Ci}var Yd=Wa({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Tm=function On(Ci){var b,di=(Ci=null==Ci?yc:Tm.defaults(yc.Object(),Ci,Tm.pick(yc,Dy))).Array,Jr=Ci.Date,co=Ci.Error,wa=Ci.Function,Cc=Ci.Math,$a=Ci.Object,Av=Ci.RegExp,xv=Ci.String,Zd=Ci.TypeError,Iv=di.prototype,zg=$a.prototype,Sv=Ci["__core-js_shared__"],Ev=wa.prototype.toString,Ma=zg.hasOwnProperty,Oy=0,Mm=(b=/[^.]+$/.exec(Sv&&Sv.keys&&Sv.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",Dm=zg.toString,pb=Ev.call($a),H_=yc._,up=Av("^"+Ev.call(Ma).replace(xs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lm=Sd?Ci.Buffer:L,Na=Ci.Symbol,Df=Ci.Uint8Array,Fy=Lm?Lm.allocUnsafe:L,dp=ap($a.getPrototypeOf,$a),Tv=$a.create,Pm=zg.propertyIsEnumerable,Vg=Iv.splice,Ug=Na?Na.isConcatSpreadable:L,Kp=Na?Na.iterator:L,qa=Na?Na.toStringTag:L,hp=function(){try{var b=ff($a,"defineProperty");return b({},"",{}),b}catch{}}(),Ny=Ci.clearTimeout!==yc.clearTimeout&&Ci.clearTimeout,Rm=Jr&&Jr.now!==yc.Date.now&&Jr.now,By=Ci.setTimeout!==yc.setTimeout&&Ci.setTimeout,Mv=Cc.ceil,Da=Cc.floor,Hg=$a.getOwnPropertySymbols,Zp=Lm?Lm.isBuffer:L,Gg=Ci.isFinite,Ld=Iv.join,G_=ap($a.keys,$a),Us=Cc.max,Ul=Cc.min,tu=Jr.now,jo=Ci.parseInt,oa=Cc.random,ts=Iv.reverse,go=ff(Ci,"DataView"),ps=ff(Ci,"Map"),Wg=ff(Ci,"Promise"),Is=ff(Ci,"Set"),Ps=ff(Ci,"WeakMap"),nu=ff($a,"create"),bh=Ps&&new Ps,Qp={},W_=uh(go),zy=uh(ps),bo=uh(Wg),xu=uh(Is),Pi=uh(Ps),Zs=Na?Na.prototype:L,Lt=Zs?Zs.valueOf:L,Pt=Zs?Zs.toString:L;function bt(b){if(yi(b)&&!Wi(b)&&!(b instanceof to)){if(b instanceof La)return b;if(Ma.call(b,"__wrapped__"))return om(b)}return new La(b)}var aa=function(){function b(){}return function(S){if(!Ar(S))return{};if(Tv)return Tv(S);b.prototype=S;var Q=new b;return b.prototype=L,Q}}();function Zo(){}function La(b,S){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=L}function to(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nn,this.__views__=[]}function lc(b){var S=-1,Q=null==b?0:b.length;for(this.clear();++S<Q;){var De=b[S];this.set(De[0],De[1])}}function Hl(b){var S=-1,Q=null==b?0:b.length;for(this.clear();++S<Q;){var De=b[S];this.set(De[0],De[1])}}function Ms(b){var S=-1,Q=null==b?0:b.length;for(this.clear();++S<Q;){var De=b[S];this.set(De[0],De[1])}}function Wr(b){var S=-1,Q=null==b?0:b.length;for(this.__data__=new Ms;++S<Q;)this.add(b[S])}function Pa(b){var S=this.__data__=new Hl(b);this.size=S.size}function ml(b,S){var Q=Wi(b),De=!Q&&gs(b),ft=!Q&&!De&&Cs(b),Bt=!Q&&!De&&!ft&&cu(b),mn=Q||De||ft||Bt,Mn=mn?_h(b.length,xv):[],Wn=Mn.length;for(var Gi in b)(S||Ma.call(b,Gi))&&(!mn||!("length"==Gi||ft&&("offset"==Gi||"parent"==Gi)||Bt&&("buffer"==Gi||"byteLength"==Gi||"byteOffset"==Gi)||Gc(Gi,Wn)))&&Mn.push(Gi);return Mn}function Lv(b){var S=b.length;return S?b[Ih(0,S-1)]:L}function Pv(b,S){return Ph(So(b),Ff(S,0,b.length))}function qg(b){return Ph(So(b))}function Xg(b,S,Q){(Q!==L&&!_s(b[S],Q)||Q===L&&!(S in b))&&Jd(b,S,Q)}function Rf(b,S,Q){var De=b[S];(!Ma.call(b,S)||!_s(De,Q)||Q===L&&!(S in b))&&Jd(b,S,Q)}function km(b,S){for(var Q=b.length;Q--;)if(_s(b[Q][0],S))return Q;return-1}function kf(b,S,Q,De){return Ch(b,function(ft,Bt,mn){S(De,ft,Q(ft),mn)}),De}function ef(b,S){return b&&Uc(S,fu(S),b)}function Jd(b,S,Q){"__proto__"==S&&hp?hp(b,S,{configurable:!0,enumerable:!0,value:Q,writable:!0}):b[S]=Q}function Of(b,S){for(var Q=-1,De=S.length,ft=di(De),Bt=null==b;++Q<De;)ft[Q]=Bt?L:xb(b,S[Q]);return ft}function Ff(b,S,Q){return b==b&&(Q!==L&&(b=b<=Q?b:Q),S!==L&&(b=b>=S?b:S)),b}function Gl(b,S,Q,De,ft,Bt){var mn,Mn=1&S,Wn=2&S,Gi=4&S;if(Q&&(mn=ft?Q(b,De,ft,Bt):Q(b)),mn!==L)return mn;if(!Ar(b))return b;var ji=Wi(b);if(ji){if(mn=function Bd(b){var S=b.length,Q=new b.constructor(S);return S&&"string"==typeof b[0]&&Ma.call(b,"index")&&(Q.index=b.index,Q.input=b.input),Q}(b),!Mn)return So(b,mn)}else{var rr=ll(b),jr=rr==Hn||rr==pt;if(Cs(b))return Hu(b,Mn);if(rr==Ie||rr==wn||jr&&!ft){if(mn=Wn||jr?{}:lg(b),!Mn)return Wn?function bp(b,S){return Uc(b,ag(b),S)}(b,function Yg(b,S){return b&&Uc(S,qu(S),b)}(mn,b)):function Od(b,S){return Uc(b,Ip(b),S)}(b,ef(mn,b))}else{if(!Fa[rr])return ft?b:{};mn=function Hm(b,S,Q){var De=b.constructor;switch(S){case Zi:return Jl(b);case le:case ot:return new De(+b);case ra:return function Vc(b,S){var Q=S?Jl(b.buffer):b.buffer;return new b.constructor(Q,b.byteOffset,b.byteLength)}(b,Q);case Ha:case fl:case Er:case xd:case kc:case Sa:case Oc:case Ja:case Go:return Ic(b,Q);case ht:return new De;case Ht:case Jn:return new De(b);case dn:return function Qo(b){var S=new b.constructor(b.source,dt.exec(b));return S.lastIndex=b.lastIndex,S}(b);case Xn:return new De;case ms:return function Nm(b){return Lt?$a(Lt.call(b)):{}}(b)}}(b,rr,Mn)}}Bt||(Bt=new Pa);var cs=Bt.get(b);if(cs)return cs;Bt.set(b,mn),yl(b)?b.forEach(function(Xs){mn.add(Gl(Xs,S,Q,Xs,b,Bt))}):ns(b)&&b.forEach(function(Xs,Bo){mn.set(Bo,Gl(Xs,S,Q,Bo,b,Bt))});var ko=ji?L:(Gi?Wn?hf:ju:Wn?qu:fu)(b);return xl(ko||b,function(Xs,Bo){ko&&(Xs=b[Bo=Xs]),Rf(mn,Bo,Gl(Xs,S,Q,Bo,b,Bt))}),mn}function Vy(b,S,Q){var De=Q.length;if(null==b)return!De;for(b=$a(b);De--;){var ft=Q[De],mn=b[ft];if(mn===L&&!(ft in b)||!(0,S[ft])(mn))return!1}return!0}function Uy(b,S,Q){if("function"!=typeof b)throw new Zd(D);return lh(function(){b.apply(L,Q)},S)}function tf(b,S,Q,De){var ft=-1,Bt=np,mn=!0,Mn=b.length,Wn=[],Gi=S.length;if(!Mn)return Wn;Q&&(S=il(S,bc(Q))),De?(Bt=Rr,mn=!1):S.length>=200&&(Bt=Tf,mn=!1,S=new Wr(S));e:for(;++ft<Mn;){var ji=b[ft],rr=null==Q?ji:Q(ji);if(ji=De||0!==ji?ji:0,mn&&rr==rr){for(var jr=Gi;jr--;)if(S[jr]===rr)continue e;Wn.push(ji)}else Bt(S,rr,De)||Wn.push(ji)}return Wn}bt.templateSettings={escape:En,evaluate:Nn,interpolate:hi,variable:"",imports:{_:bt}},(bt.prototype=Zo.prototype).constructor=bt,(La.prototype=aa(Zo.prototype)).constructor=La,(to.prototype=aa(Zo.prototype)).constructor=to,lc.prototype.clear=function Xa(){this.__data__=nu?nu(null):{},this.size=0},lc.prototype.delete=function la(b){var S=this.has(b)&&delete this.__data__[b];return this.size-=S?1:0,S},lc.prototype.get=function pl(b){var S=this.__data__;if(nu){var Q=S[b];return Q===q?L:Q}return Ma.call(S,b)?S[b]:L},lc.prototype.has=function Tr(b){var S=this.__data__;return nu?S[b]!==L:Ma.call(S,b)},lc.prototype.set=function Qd(b,S){var Q=this.__data__;return this.size+=this.has(b)?0:1,Q[b]=nu&&S===L?q:S,this},Hl.prototype.clear=function Zh(){this.__data__=[],this.size=0},Hl.prototype.delete=function pp(b){var S=this.__data__,Q=km(S,b);return!(Q<0||(Q==S.length-1?S.pop():Vg.call(S,Q,1),--this.size,0))},Hl.prototype.get=function Qh(b){var S=this.__data__,Q=km(S,b);return Q<0?L:S[Q][1]},Hl.prototype.has=function Lf(b){return km(this.__data__,b)>-1},Hl.prototype.set=function sd(b,S){var Q=this.__data__,De=km(Q,b);return De<0?(++this.size,Q.push([b,S])):Q[De][1]=S,this},Ms.prototype.clear=function iu(){this.size=0,this.__data__={hash:new lc,map:new(ps||Hl),string:new lc}},Ms.prototype.delete=function jg(b){var S=xp(this,b).delete(b);return this.size-=S?1:0,S},Ms.prototype.get=function Qs(b){return xp(this,b).get(b)},Ms.prototype.has=function Dv(b){return xp(this,b).has(b)},Ms.prototype.set=function $g(b,S){var Q=xp(this,b),De=Q.size;return Q.set(b,S),this.size+=Q.size==De?0:1,this},Wr.prototype.add=Wr.prototype.push=function Ya(b){return this.__data__.set(b,q),this},Wr.prototype.has=function cc(b){return this.__data__.has(b)},Pa.prototype.clear=function gl(){this.__data__=new Hl,this.size=0},Pa.prototype.delete=function Kl(b){var S=this.__data__,Q=S.delete(b);return this.size=S.size,Q},Pa.prototype.get=function Jh(b){return this.__data__.get(b)},Pa.prototype.has=function Bc(b){return this.__data__.has(b)},Pa.prototype.set=function Pf(b,S){var Q=this.__data__;if(Q instanceof Hl){var De=Q.__data__;if(!ps||De.length<199)return De.push([b,S]),this.size=++Q.size,this;Q=this.__data__=new Ms(De)}return Q.set(b,S),this.size=Q.size,this};var Ch=zf(ru),Rv=zf(th,!0);function j_(b,S){var Q=!0;return Ch(b,function(De,ft,Bt){return Q=!!S(De,ft,Bt)}),Q}function kv(b,S,Q){for(var De=-1,ft=b.length;++De<ft;){var Bt=b[De],mn=S(Bt);if(null!=mn&&(Mn===L?mn==mn&&!gc(mn):Q(mn,Mn)))var Mn=mn,Wn=Bt}return Wn}function tg(b,S){var Q=[];return Ch(b,function(De,ft,Bt){S(De,ft,Bt)&&Q.push(De)}),Q}function Rl(b,S,Q,De,ft){var Bt=-1,mn=b.length;for(Q||(Q=cl),ft||(ft=[]);++Bt<mn;){var Mn=b[Bt];S>0&&Q(Mn)?S>1?Rl(Mn,S-1,Q,De,ft):Xd(ft,Mn):De||(ft[ft.length]=Mn)}return ft}var nf=Vf(),eh=Vf(!0);function ru(b,S){return b&&nf(b,S,fu)}function th(b,S){return b&&eh(b,S,fu)}function Pd(b,S){return Ed(S,function(Q){return Tn(b[Q])})}function od(b,S){for(var Q=0,De=(S=xc(S,b)).length;null!=b&&Q<De;)b=b[gd(S[Q++])];return Q&&Q==De?b:L}function zu(b,S,Q){var De=S(b);return Wi(b)?De:Xd(De,Q(b))}function Ra(b){return null==b?b===L?"[object Undefined]":"[object Null]":qa&&qa in $a(b)?function Hf(b){var S=Ma.call(b,qa),Q=b[qa];try{b[qa]=L;var De=!0}catch{}var ft=Dm.call(b);return De&&(S?b[qa]=Q:delete b[qa]),ft}(b):function $_(b){return Dm.call(b)}(b)}function wh(b,S){return b>S}function Om(b,S){return null!=b&&Ma.call(b,S)}function Kg(b,S){return null!=b&&S in $a(b)}function Vu(b,S,Q){for(var De=Q?Rr:np,ft=b[0].length,Bt=b.length,mn=Bt,Mn=di(Bt),Wn=1/0,Gi=[];mn--;){var ji=b[mn];mn&&S&&(ji=il(ji,bc(S))),Wn=Ul(ji.length,Wn),Mn[mn]=!Q&&(S||ft>=120&&ji.length>=120)?new Wr(mn&&ji):L}ji=b[0];var rr=-1,jr=Mn[0];e:for(;++rr<ft&&Gi.length<Wn;){var cs=ji[rr],$s=S?S(cs):cs;if(cs=Q||0!==cs?cs:0,!(jr?Tf(jr,$s):De(Gi,$s,Q))){for(mn=Bt;--mn;){var ko=Mn[mn];if(!(ko?Tf(ko,$s):De(b[mn],$s,Q)))continue e}jr&&jr.push($s),Gi.push(cs)}}return Gi}function su(b,S,Q){var De=null==(b=jl(b,S=xc(S,b)))?b:b[gd($u(S))];return null==De?L:Al(De,b,Q)}function po(b){return yi(b)&&Ra(b)==wn}function ou(b,S,Q,De,ft){return b===S||(null==b||null==S||!yi(b)&&!yi(S)?b!=b&&S!=S:function vp(b,S,Q,De,ft,Bt){var mn=Wi(b),Mn=Wi(S),Wn=mn?An:ll(b),Gi=Mn?An:ll(S),ji=(Wn=Wn==wn?Ie:Wn)==Ie,rr=(Gi=Gi==wn?Ie:Gi)==Ie,jr=Wn==Gi;if(jr&&Cs(b)){if(!Cs(S))return!1;mn=!0,ji=!1}if(jr&&!ji)return Bt||(Bt=new Pa),mn||cu(b)?Nd(b,S,Q,De,ft,Bt):function im(b,S,Q,De,ft,Bt,mn){switch(Q){case ra:if(b.byteLength!=S.byteLength||b.byteOffset!=S.byteOffset)return!1;b=b.buffer,S=S.buffer;case Zi:return!(b.byteLength!=S.byteLength||!Bt(new Df(b),new Df(S)));case le:case ot:case Ht:return _s(+b,+S);case Sn:return b.name==S.name&&b.message==S.message;case dn:case Jn:return b==S+"";case ht:var Mn=op;case Xn:if(Mn||(Mn=Yp),b.size!=S.size&&!(1&De))return!1;var Gi=mn.get(b);if(Gi)return Gi==S;De|=2,mn.set(b,S);var ji=Nd(Mn(b),Mn(S),De,ft,Bt,mn);return mn.delete(b),ji;case ms:if(Lt)return Lt.call(b)==Lt.call(S)}return!1}(b,S,Wn,Q,De,ft,Bt);if(!(1&Q)){var cs=ji&&Ma.call(b,"__wrapped__"),$s=rr&&Ma.call(S,"__wrapped__");if(cs||$s){var ko=cs?b.value():b,Xs=$s?S.value():S;return Bt||(Bt=new Pa),ft(ko,Xs,Q,De,Bt)}}return!!jr&&(Bt||(Bt=new Pa),function Eh(b,S,Q,De,ft,Bt){var mn=1&Q,Mn=ju(b),Wn=Mn.length;if(Wn!=ju(S).length&&!mn)return!1;for(var rr=Wn;rr--;){var jr=Mn[rr];if(!(mn?jr in S:Ma.call(S,jr)))return!1}var cs=Bt.get(b),$s=Bt.get(S);if(cs&&$s)return cs==S&&$s==b;var ko=!0;Bt.set(b,S),Bt.set(S,b);for(var Xs=mn;++rr<Wn;){var Bo=b[jr=Mn[rr]],ca=S[jr];if(De)var hh=mn?De(ca,Bo,jr,S,b,Bt):De(Bo,ca,jr,b,S,Bt);if(!(hh===L?Bo===ca||ft(Bo,ca,Q,De,Bt):hh)){ko=!1;break}Xs||(Xs="constructor"==jr)}if(ko&&!Xs){var fh=b.constructor,pu=S.constructor;fh!=pu&&"constructor"in b&&"constructor"in S&&!("function"==typeof fh&&fh instanceof fh&&"function"==typeof pu&&pu instanceof pu)&&(ko=!1)}return Bt.delete(b),Bt.delete(S),ko}(b,S,Q,De,ft,Bt))}(b,S,Q,De,ou,ft))}function Rd(b,S,Q,De){var ft=Q.length,Bt=ft,mn=!De;if(null==b)return!Bt;for(b=$a(b);ft--;){var Mn=Q[ft];if(mn&&Mn[2]?Mn[1]!==b[Mn[0]]:!(Mn[0]in b))return!1}for(;++ft<Bt;){var Wn=(Mn=Q[ft])[0],Gi=b[Wn],ji=Mn[1];if(mn&&Mn[2]){if(Gi===L&&!(Wn in b))return!1}else{var rr=new Pa;if(De)var jr=De(Gi,ji,Wn,b,S,rr);if(!(jr===L?ou(ji,Gi,3,De,rr):jr))return!1}}return!0}function rf(b){return!(!Ar(b)||function Gf(b){return!!Mm&&Mm in b}(b))&&(Tn(b)?up:Te).test(uh(b))}function nh(b){return"function"==typeof b?b:null==b?Oh:"object"==typeof b?Wi(b)?ng(b[0],b[1]):kd(b):r0(b)}function Iu(b){if(!zd(b))return G_(b);var S=[];for(var Q in $a(b))Ma.call(b,Q)&&"constructor"!=Q&&S.push(Q);return S}function af(b,S){return b<S}function yp(b,S){var Q=-1,De=Fr(b)?di(b.length):[];return Ch(b,function(ft,Bt,mn){De[++Q]=S(ft,Bt,mn)}),De}function kd(b){var S=rm(b);return 1==S.length&&S[0][2]?Tu(S[0][0],S[0][1]):function(Q){return Q===b||Rd(Q,b,S)}}function ng(b,S){return cg(b)&&pf(S)?Tu(gd(b),S):function(Q){var De=xb(Q,b);return De===L&&De===S?Qy(Q,b):ou(S,De,3)}}function pa(b,S,Q,De,ft){b!==S&&nf(S,function(Bt,mn){if(ft||(ft=new Pa),Ar(Bt))!function lf(b,S,Q,De,ft,Bt,mn){var Mn=Wf(b,Q),Wn=Wf(S,Q),Gi=mn.get(Wn);if(Gi)Xg(b,Q,Gi);else{var ji=Bt?Bt(Mn,Wn,Q+"",b,S,mn):L,rr=ji===L;if(rr){var jr=Wi(Wn),cs=!jr&&Cs(Wn),$s=!jr&&!cs&&cu(Wn);ji=Wn,jr||cs||$s?Wi(Mn)?ji=Mn:bs(Mn)?ji=So(Mn):cs?(rr=!1,ji=Hu(Wn,!0)):$s?(rr=!1,ji=Ic(Wn,!0)):ji=[]:Jo(Wn)||gs(Wn)?(ji=Mn,gs(Mn)?ji=J_(Mn):(!Ar(Mn)||Tn(Mn))&&(ji=lg(Wn))):rr=!1}rr&&(mn.set(Wn,ji),ft(ji,Wn,De,Bt,mn),mn.delete(Wn)),Xg(b,Q,ji)}}(b,S,mn,Q,pa,De,ft);else{var Mn=De?De(Wf(b,mn),Bt,mn+"",b,S,ft):L;Mn===L&&(Mn=Bt),Xg(b,mn,Mn)}},qu)}function ih(b,S){var Q=b.length;if(Q)return Gc(S+=S<0?Q:0,Q)?b[S]:L}function Il(b,S,Q){S=S.length?il(S,function(Bt){return Wi(Bt)?function(mn){return od(mn,1===Bt.length?Bt[0]:Bt)}:Bt}):[Oh];var De=-1;return S=il(S,bc(Ds())),function ip(On,Ci){var di=On.length;for(On.sort(Ci);di--;)On[di]=On[di].value;return On}(yp(b,function(Bt,mn,Mn){return{criteria:il(S,function(Gi){return Gi(Bt)}),index:++De,value:Bt}}),function(Bt,mn){return function Qg(b,S,Q){for(var De=-1,ft=b.criteria,Bt=S.criteria,mn=ft.length,Mn=Q.length;++De<mn;){var Wn=dc(ft[De],Bt[De]);if(Wn)return De>=Mn?Wn:Wn*("desc"==Q[De]?-1:1)}return b.index-S.index}(Bt,mn,Q)})}function ad(b,S,Q){for(var De=-1,ft=S.length,Bt={};++De<ft;){var mn=S[De],Mn=od(b,mn);Q(Mn,mn)&&qo(Bt,xc(mn,b),Mn)}return Bt}function sl(b,S,Q,De){var ft=De?Fu:rl,Bt=-1,mn=S.length,Mn=b;for(b===S&&(S=So(S)),Q&&(Mn=il(b,bc(Q)));++Bt<mn;)for(var Wn=0,Gi=S[Bt],ji=Q?Q(Gi):Gi;(Wn=ft(Mn,ji,Wn,De))>-1;)Mn!==b&&Vg.call(Mn,Wn,1),Vg.call(b,Wn,1);return b}function Su(b,S){for(var Q=b?S.length:0,De=Q-1;Q--;){var ft=S[Q];if(Q==De||ft!==Bt){var Bt=ft;Gc(ft)?Vg.call(b,ft,1):ld(b,ft)}}return b}function Ih(b,S){return b+Da(oa()*(S-b+1))}function ga(b,S){var Q="";if(!b||S<1||S>Fn)return Q;do{S%2&&(Q+=b),(S=Da(S/2))&&(b+=b)}while(S);return Q}function so(b,S){return ch(sm(b,S,Oh),b+"")}function vr(b){return Lv(Jy(b))}function Fm(b,S){var Q=Jy(b);return Ph(Q,Ff(S,0,Q.length))}function qo(b,S,Q,De){if(!Ar(b))return b;for(var ft=-1,Bt=(S=xc(S,b)).length,mn=Bt-1,Mn=b;null!=Mn&&++ft<Bt;){var Wn=gd(S[ft]),Gi=Q;if("__proto__"===Wn||"constructor"===Wn||"prototype"===Wn)return b;if(ft!=mn){var ji=Mn[Wn];(Gi=De?De(ji,Wn,Mn):L)===L&&(Gi=Ar(ji)?ji:Gc(S[ft+1])?[]:{})}Rf(Mn,Wn,Gi),Mn=Mn[Wn]}return b}var Nf=bh?function(b,S){return bh.set(b,S),b}:Oh,ig=hp?function(b,S){return hp(b,"toString",{configurable:!0,enumerable:!1,value:gw(S),writable:!0})}:Oh;function rg(b){return Ph(Jy(b))}function Wl(b,S,Q){var De=-1,ft=b.length;S<0&&(S=-S>ft?0:ft+S),(Q=Q>ft?ft:Q)<0&&(Q+=ft),ft=S>Q?0:Q-S>>>0,S>>>=0;for(var Bt=di(ft);++De<ft;)Bt[De]=b[De+S];return Bt}function Bf(b,S){var Q;return Ch(b,function(De,ft,Bt){return!(Q=S(De,ft,Bt))}),!!Q}function Ac(b,S,Q){var De=0,ft=null==b?De:b.length;if("number"==typeof S&&S==S&&ft<=2147483647){for(;De<ft;){var Bt=De+ft>>>1,mn=b[Bt];null!==mn&&!gc(mn)&&(Q?mn<=S:mn<S)?De=Bt+1:ft=Bt}return ft}return sg(b,S,Oh,Q)}function sg(b,S,Q,De){var ft=0,Bt=null==b?0:b.length;if(0===Bt)return 0;for(var mn=(S=Q(S))!=S,Mn=null===S,Wn=gc(S),Gi=S===L;ft<Bt;){var ji=Da((ft+Bt)/2),rr=Q(b[ji]),jr=rr!==L,cs=null===rr,$s=rr==rr,ko=gc(rr);if(mn)var Xs=De||$s;else Xs=Gi?$s&&(De||jr):Mn?$s&&jr&&(De||!cs):Wn?$s&&jr&&!cs&&(De||!ko):!cs&&!ko&&(De?rr<=S:rr<S);Xs?ft=ji+1:Bt=ji}return Ul(Bt,4294967294)}function og(b,S){for(var Q=-1,De=b.length,ft=0,Bt=[];++Q<De;){var mn=b[Q],Mn=S?S(mn):mn;if(!Q||!_s(Mn,Wn)){var Wn=Mn;Bt[ft++]=0===mn?0:mn}}return Bt}function ol(b){return"number"==typeof b?b:gc(b)?NaN:+b}function uc(b){if("string"==typeof b)return b;if(Wi(b))return il(b,uc)+"";if(gc(b))return Pt?Pt.call(b):"";var S=b+"";return"0"==S&&1/b==-_t?"-0":S}function Zl(b,S,Q){var De=-1,ft=np,Bt=b.length,mn=!0,Mn=[],Wn=Mn;if(Q)mn=!1,ft=Rr;else if(Bt>=200){var Gi=S?null:tm(b);if(Gi)return Yp(Gi);mn=!1,ft=Tf,Wn=new Wr}else Wn=S?[]:Mn;e:for(;++De<Bt;){var ji=b[De],rr=S?S(ji):ji;if(ji=Q||0!==ji?ji:0,mn&&rr==rr){for(var jr=Wn.length;jr--;)if(Wn[jr]===rr)continue e;S&&Wn.push(rr),Mn.push(ji)}else ft(Wn,rr,Q)||(Wn!==Mn&&Wn.push(rr),Mn.push(ji))}return Mn}function ld(b,S){return null==(b=jl(b,S=xc(S,b)))||delete b[gd($u(S))]}function cf(b,S,Q,De){return qo(b,S,Q(od(b,S)),De)}function vl(b,S,Q,De){for(var ft=b.length,Bt=De?ft:-1;(De?Bt--:++Bt<ft)&&S(b[Bt],Bt,b););return Q?Wl(b,De?0:Bt,De?Bt+1:ft):Wl(b,De?Bt+1:0,De?ft:Bt)}function Uu(b,S){var Q=b;return Q instanceof to&&(Q=Q.value()),Ef(S,function(De,ft){return ft.func.apply(ft.thisArg,Xd([De],ft.args))},Q)}function cd(b,S,Q){var De=b.length;if(De<2)return De?Zl(b[0]):[];for(var ft=-1,Bt=di(De);++ft<De;)for(var mn=b[ft],Mn=-1;++Mn<De;)Mn!=ft&&(Bt[ft]=tf(Bt[ft]||mn,b[Mn],S,Q));return Zl(Rl(Bt,1),S,Q)}function ud(b,S,Q){for(var De=-1,ft=b.length,Bt=S.length,mn={};++De<ft;)Q(mn,b[De],De<Bt?S[De]:L);return mn}function Ql(b){return bs(b)?b:[]}function al(b){return"function"==typeof b?b:Oh}function xc(b,S){return Wi(b)?b:cg(b,S)?[b]:dg(Ea(b))}var _p=so;function zc(b,S,Q){var De=b.length;return Q=Q===L?De:Q,!S&&Q>=De?b:Wl(b,S,Q)}var Ov=Ny||function(b){return yc.clearTimeout(b)};function Hu(b,S){if(S)return b.slice();var Q=b.length,De=Fy?Fy(Q):new b.constructor(Q);return b.copy(De),De}function Jl(b){var S=new b.constructor(b.byteLength);return new Df(S).set(new Df(b)),S}function Ic(b,S){var Q=S?Jl(b.buffer):b.buffer;return new b.constructor(Q,b.byteOffset,b.length)}function dc(b,S){if(b!==S){var Q=b!==L,De=null===b,ft=b==b,Bt=gc(b),mn=S!==L,Mn=null===S,Wn=S==S,Gi=gc(S);if(!Mn&&!Gi&&!Bt&&b>S||Bt&&mn&&Wn&&!Mn&&!Gi||De&&mn&&Wn||!Q&&Wn||!ft)return 1;if(!De&&!Bt&&!Gi&&b<S||Gi&&Q&&ft&&!De&&!Bt||Mn&&Q&&ft||!mn&&ft||!Wn)return-1}return 0}function Bm(b,S,Q,De){for(var ft=-1,Bt=b.length,mn=Q.length,Mn=-1,Wn=S.length,Gi=Us(Bt-mn,0),ji=di(Wn+Gi),rr=!De;++Mn<Wn;)ji[Mn]=S[Mn];for(;++ft<mn;)(rr||ft<Bt)&&(ji[Q[ft]]=b[ft]);for(;Gi--;)ji[Mn++]=b[ft++];return ji}function sh(b,S,Q,De){for(var ft=-1,Bt=b.length,mn=-1,Mn=Q.length,Wn=-1,Gi=S.length,ji=Us(Bt-Mn,0),rr=di(ji+Gi),jr=!De;++ft<ji;)rr[ft]=b[ft];for(var cs=ft;++Wn<Gi;)rr[cs+Wn]=S[Wn];for(;++mn<Mn;)(jr||ft<Bt)&&(rr[cs+Q[mn]]=b[ft++]);return rr}function So(b,S){var Q=-1,De=b.length;for(S||(S=di(De));++Q<De;)S[Q]=b[Q];return S}function Uc(b,S,Q,De){var ft=!Q;Q||(Q={});for(var Bt=-1,mn=S.length;++Bt<mn;){var Mn=S[Bt],Wn=De?De(Q[Mn],b[Mn],Mn,Q,b):L;Wn===L&&(Wn=b[Mn]),ft?Jd(Q,Mn,Wn):Rf(Q,Mn,Wn)}return Q}function oh(b,S){return function(Q,De){var ft=Wi(Q)?tp:kf,Bt=S?S():{};return ft(Q,b,Ds(De,2),Bt)}}function Gu(b){return so(function(S,Q){var De=-1,ft=Q.length,Bt=ft>1?Q[ft-1]:L,mn=ft>2?Q[2]:L;for(Bt=b.length>3&&"function"==typeof Bt?(ft--,Bt):L,mn&&Wc(Q[0],Q[1],mn)&&(Bt=ft<3?L:Bt,ft=1),S=$a(S);++De<ft;){var Mn=Q[De];Mn&&b(S,Mn,De,Bt)}return S})}function zf(b,S){return function(Q,De){if(null==Q)return Q;if(!Fr(Q))return b(Q,De);for(var ft=Q.length,Bt=S?ft:-1,mn=$a(Q);(S?Bt--:++Bt<ft)&&!1!==De(mn[Bt],Bt,mn););return Q}}function Vf(b){return function(S,Q,De){for(var ft=-1,Bt=$a(S),mn=De(S),Mn=mn.length;Mn--;){var Wn=mn[b?Mn:++ft];if(!1===Q(Bt[Wn],Wn,Bt))break}return S}}function Hc(b){return function(S){var Q=Md(S=Ea(S))?Dd(S):L,De=Q?Q[0]:S.charAt(0),ft=Q?zc(Q,1).join(""):S.slice(1);return De[b]()+ft}}function ec(b){return function(S){return Ef(nI(mo(S).replace(N_,"")),b,"")}}function ah(b){return function(){var S=arguments;switch(S.length){case 0:return new b;case 1:return new b(S[0]);case 2:return new b(S[0],S[1]);case 3:return new b(S[0],S[1],S[2]);case 4:return new b(S[0],S[1],S[2],S[3]);case 5:return new b(S[0],S[1],S[2],S[3],S[4]);case 6:return new b(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new b(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var Q=aa(b.prototype),De=b.apply(Q,S);return Ar(De)?De:Q}}function dd(b){return function(S,Q,De){var ft=$a(S);if(!Fr(S)){var Bt=Ds(Q,3);S=fu(S),Q=function(Mn){return Bt(ft[Mn],Mn,ft)}}var mn=b(S,Q,De);return mn>-1?ft[Bt?S[mn]:mn]:L}}function Sh(b){return Sc(function(S){var Q=S.length,De=Q,ft=La.prototype.thru;for(b&&S.reverse();De--;){var Bt=S[De];if("function"!=typeof Bt)throw new Zd(D);if(ft&&!mn&&"wrapper"==Ap(Bt))var mn=new La([],!0)}for(De=mn?De:Q;++De<Q;){var Mn=Ap(Bt=S[De]),Wn="wrapper"==Mn?Th(Bt):L;mn=Wn&&pd(Wn[0])&&424==Wn[1]&&!Wn[4].length&&1==Wn[9]?mn[Ap(Wn[0])].apply(mn,Wn[3]):1==Bt.length&&pd(Bt)?mn[Mn]():mn.thru(Bt)}return function(){var Gi=arguments,ji=Gi[0];if(mn&&1==Gi.length&&Wi(ji))return mn.plant(ji).value();for(var rr=0,jr=Q?S[rr].apply(this,Gi):ji;++rr<Q;)jr=S[rr].call(this,jr);return jr}})}function ai(b,S,Q,De,ft,Bt,mn,Mn,Wn,Gi){var ji=128&S,rr=1&S,jr=2&S,cs=24&S,$s=512&S,ko=jr?L:ah(b);return function Xs(){for(var Bo=arguments.length,ca=di(Bo),hh=Bo;hh--;)ca[hh]=arguments[hh];if(cs)var fh=fd(Xs),pu=Mf(ca,fh);if(De&&(ca=Bm(ca,De,ft,cs)),Bt&&(ca=sh(ca,Bt,mn,cs)),Bo-=pu,cs&&Bo<Gi){var Tc=Bu(ca,fh);return hd(b,S,ai,Xs.placeholder,Q,ca,Tc,Mn,Wn,Gi-Bo)}var Rp=rr?Q:this,kp=jr?Rp[b]:b;return Bo=ca.length,Mn?ca=Oa(ca,Mn):$s&&Bo>1&&ca.reverse(),ji&&Wn<Bo&&(ca.length=Wn),this&&this!==yc&&this instanceof Xs&&(kp=ko||ah(kp)),kp.apply(Rp,ca)}}function Uf(b,S){return function(Q,De){return function $o(b,S,Q,De){return ru(b,function(ft,Bt,mn){S(De,Q(ft),Bt,mn)}),De}(Q,b,S(De),{})}}function Ba(b,S){return function(Q,De){var ft;if(Q===L&&De===L)return S;if(Q!==L&&(ft=Q),De!==L){if(ft===L)return De;"string"==typeof Q||"string"==typeof De?(Q=uc(Q),De=uc(De)):(Q=ol(Q),De=ol(De)),ft=b(Q,De)}return ft}}function df(b){return Sc(function(S){return S=il(S,bc(Ds())),so(function(Q){var De=this;return b(S,function(ft){return Al(ft,De,Q)})})})}function Wu(b,S){var Q=(S=S===L?" ":uc(S)).length;if(Q<2)return Q?ga(S,b):S;var De=ga(S,Mv(b/Pl(S)));return Md(S)?zc(Dd(De),0,b).join(""):De.slice(0,b)}function em(b){return function(S,Q,De){return De&&"number"!=typeof De&&Wc(S,Q,De)&&(Q=De=L),S=hu(S),Q===L?(Q=S,S=0):Q=hu(Q),function ka(b,S,Q,De){for(var ft=-1,Bt=Us(Mv((S-b)/(Q||1)),0),mn=di(Bt);Bt--;)mn[De?Bt:++ft]=b,b+=Q;return mn}(S,Q,De=De===L?S<Q?1:-1:hu(De),b)}}function Cp(b){return function(S,Q){return"string"==typeof S&&"string"==typeof Q||(S=Rh(S),Q=Rh(Q)),b(S,Q)}}function hd(b,S,Q,De,ft,Bt,mn,Mn,Wn,Gi){var ji=8&S;S|=ji?V:64,4&(S&=~(ji?64:V))||(S&=-4);var ko=[b,S,ft,ji?Bt:L,ji?mn:L,ji?L:Bt,ji?L:mn,Mn,Wn,Gi],Xs=Q.apply(L,ko);return pd(b)&&ug(Xs,ko),Xs.placeholder=De,Lh(Xs,b,S)}function tc(b){var S=Cc[b];return function(Q,De){if(Q=Rh(Q),(De=null==De?0:Ul(Co(De),292))&&Gg(Q)){var ft=(Ea(Q)+"e").split("e");return+((ft=(Ea(S(ft[0]+"e"+(+ft[1]+De)))+"e").split("e"))[0]+"e"+(+ft[1]-De))}return S(Q)}}var tm=Is&&1/Yp(new Is([,-0]))[1]==_t?function(b){return new Is(b)}:yw;function Fd(b){return function(S){var Q=ll(S);return Q==ht?op(S):Q==Xn?function lp(On){var Ci=-1,di=Array(On.size);return On.forEach(function(Jr){di[++Ci]=[Jr,Jr]}),di}(S):function Ll(On,Ci){return il(Ci,function(di){return[di,On[di]]})}(S,b(S))}}function Eu(b,S,Q,De,ft,Bt,mn,Mn){var Wn=2&S;if(!Wn&&"function"!=typeof b)throw new Zd(D);var Gi=De?De.length:0;if(Gi||(S&=-97,De=ft=L),mn=mn===L?mn:Us(Co(mn),0),Mn=Mn===L?Mn:Co(Mn),Gi-=ft?ft.length:0,64&S){var ji=De,rr=ft;De=ft=L}var jr=Wn?L:Th(b),cs=[b,S,Q,De,ft,ji,rr,Bt,mn,Mn];if(jr&&function Sp(b,S){var Q=b[1],De=S[1],ft=Q|De;if(!(ft<131||(128==De&&8==Q||128==De&&256==Q&&b[7].length<=S[8]||384==De&&S[7].length<=S[8]&&8==Q)))return b;1&De&&(b[2]=S[2],ft|=1&Q?0:4);var Mn=S[3];if(Mn){var Wn=b[3];b[3]=Wn?Bm(Wn,Mn,S[4]):Mn,b[4]=Wn?Bu(b[3],te):S[4]}(Mn=S[5])&&(b[5]=(Wn=b[5])?sh(Wn,Mn,S[6]):Mn,b[6]=Wn?Bu(b[5],te):S[6]),(Mn=S[7])&&(b[7]=Mn),128&De&&(b[8]=null==b[8]?S[8]:Ul(b[8],S[8])),null==b[9]&&(b[9]=S[9]),b[0]=S[0],b[1]=ft}(cs,jr),b=cs[0],S=cs[1],Q=cs[2],De=cs[3],ft=cs[4],!(Mn=cs[9]=cs[9]===L?Wn?0:b.length:Us(cs[9]-Gi,0))&&24&S&&(S&=-25),S&&1!=S)$s=8==S||16==S?function uf(b,S,Q){var De=ah(b);return function ft(){for(var Bt=arguments.length,mn=di(Bt),Mn=Bt,Wn=fd(ft);Mn--;)mn[Mn]=arguments[Mn];var Gi=Bt<3&&mn[0]!==Wn&&mn[Bt-1]!==Wn?[]:Bu(mn,Wn);return(Bt-=Gi.length)<Q?hd(b,S,ai,ft.placeholder,L,mn,Gi,L,L,Q-Bt):Al(this&&this!==yc&&this instanceof ft?De:b,this,mn)}}(b,S,Mn):S!=V&&33!=S||ft.length?ai.apply(L,cs):function zm(b,S,Q,De){var ft=1&S,Bt=ah(b);return function mn(){for(var Mn=-1,Wn=arguments.length,Gi=-1,ji=De.length,rr=di(ji+Wn),jr=this&&this!==yc&&this instanceof mn?Bt:b;++Gi<ji;)rr[Gi]=De[Gi];for(;Wn--;)rr[Gi++]=arguments[++Mn];return Al(jr,ft?Q:this,rr)}}(b,S,Q,De);else var $s=function Jg(b,S,Q){var De=1&S,ft=ah(b);return function Bt(){return(this&&this!==yc&&this instanceof Bt?ft:b).apply(De?Q:this,arguments)}}(b,S,Q);return Lh((jr?Nf:ug)($s,cs),b,S)}function nm(b,S,Q,De){return b===L||_s(b,zg[Q])&&!Ma.call(De,Q)?S:b}function wp(b,S,Q,De,ft,Bt){return Ar(b)&&Ar(S)&&(Bt.set(S,b),pa(b,S,L,wp,Bt),Bt.delete(S)),b}function hc(b){return Jo(b)?L:b}function Nd(b,S,Q,De,ft,Bt){var mn=1&Q,Mn=b.length,Wn=S.length;if(Mn!=Wn&&!(mn&&Wn>Mn))return!1;var Gi=Bt.get(b),ji=Bt.get(S);if(Gi&&ji)return Gi==S&&ji==b;var rr=-1,jr=!0,cs=2&Q?new Wr:L;for(Bt.set(b,S),Bt.set(S,b);++rr<Mn;){var $s=b[rr],ko=S[rr];if(De)var Xs=mn?De(ko,$s,rr,S,b,Bt):De($s,ko,rr,b,S,Bt);if(Xs!==L){if(Xs)continue;jr=!1;break}if(cs){if(!Sm(S,function(Bo,ca){if(!Tf(cs,ca)&&($s===Bo||ft($s,Bo,Q,De,Bt)))return cs.push(ca)})){jr=!1;break}}else if($s!==ko&&!ft($s,ko,Q,De,Bt)){jr=!1;break}}return Bt.delete(b),Bt.delete(S),jr}function Sc(b){return ch(sm(b,L,$f),b+"")}function ju(b){return zu(b,fu,Ip)}function hf(b){return zu(b,qu,ag)}var Th=bh?function(b){return bh.get(b)}:yw;function Ap(b){for(var S=b.name+"",Q=Qp[S],De=Ma.call(Qp,S)?Q.length:0;De--;){var ft=Q[De],Bt=ft.func;if(null==Bt||Bt==b)return ft.name}return S}function fd(b){return(Ma.call(bt,"placeholder")?bt:b).placeholder}function Ds(){var b=bt.iteratee||Eb;return b=b===Eb?nh:b,arguments.length?b(arguments[0],arguments[1]):b}function xp(b,S){var Q=b.__data__;return function Gm(b){var S=typeof b;return"string"==S||"number"==S||"symbol"==S||"boolean"==S?"__proto__"!==b:null===b}(S)?Q["string"==typeof S?"string":"hash"]:Q.map}function rm(b){for(var S=fu(b),Q=S.length;Q--;){var De=S[Q],ft=b[De];S[Q]=[De,ft,pf(ft)]}return S}function ff(b,S){var Q=function Td(On,Ci){return null==On?L:On[Ci]}(b,S);return rf(Q)?Q:L}var Ip=Hg?function(b){return null==b?[]:(b=$a(b),Ed(Hg(b),function(S){return Pm.call(b,S)}))}:s0,ag=Hg?function(b){for(var S=[];b;)Xd(S,Ip(b)),b=dp(b);return S}:s0,ll=Ra;function Um(b,S,Q){for(var De=-1,ft=(S=xc(S,b)).length,Bt=!1;++De<ft;){var mn=gd(S[De]);if(!(Bt=null!=b&&Q(b,mn)))break;b=b[mn]}return Bt||++De!=ft?Bt:!!(ft=null==b?0:b.length)&&mr(ft)&&Gc(mn,ft)&&(Wi(b)||gs(b))}function lg(b){return"function"!=typeof b.constructor||zd(b)?{}:aa(dp(b))}function cl(b){return Wi(b)||gs(b)||!!(Ug&&b&&b[Ug])}function Gc(b,S){var Q=typeof b;return!!(S=S??Fn)&&("number"==Q||"symbol"!=Q&&Mt.test(b))&&b>-1&&b%1==0&&b<S}function Wc(b,S,Q){if(!Ar(Q))return!1;var De=typeof S;return!!("number"==De?Fr(Q)&&Gc(S,Q.length):"string"==De&&S in Q)&&_s(Q[S],b)}function cg(b,S){if(Wi(b))return!1;var Q=typeof b;return!("number"!=Q&&"symbol"!=Q&&"boolean"!=Q&&null!=b&&!gc(b))||qr.test(b)||!ar.test(b)||null!=S&&b in $a(S)}function pd(b){var S=Ap(b),Q=bt[S];if("function"!=typeof Q||!(S in to.prototype))return!1;if(b===Q)return!0;var De=Th(Q);return!!De&&b===De[0]}(go&&ll(new go(new ArrayBuffer(1)))!=ra||ps&&ll(new ps)!=ht||Wg&&ll(Wg.resolve())!=Me||Is&&ll(new Is)!=Xn||Ps&&ll(new Ps)!=os)&&(ll=function(b){var S=Ra(b),Q=S==Ie?b.constructor:L,De=Q?uh(Q):"";if(De)switch(De){case W_:return ra;case zy:return ht;case bo:return Me;case xu:return Xn;case Pi:return os}return S});var Mh=Sv?Tn:Pp;function zd(b){var S=b&&b.constructor;return b===("function"==typeof S&&S.prototype||zg)}function pf(b){return b==b&&!Ar(b)}function Tu(b,S){return function(Q){return null!=Q&&Q[b]===S&&(S!==L||b in $a(Q))}}function sm(b,S,Q){return S=Us(S===L?b.length-1:S,0),function(){for(var De=arguments,ft=-1,Bt=Us(De.length-S,0),mn=di(Bt);++ft<Bt;)mn[ft]=De[S+ft];ft=-1;for(var Mn=di(S+1);++ft<S;)Mn[ft]=De[ft];return Mn[S]=Q(mn),Al(b,this,Mn)}}function jl(b,S){return S.length<2?b:od(b,Wl(S,0,-1))}function Oa(b,S){for(var Q=b.length,De=Ul(S.length,Q),ft=So(b);De--;){var Bt=S[De];b[De]=Gc(Bt,Q)?ft[Bt]:L}return b}function Wf(b,S){if(("constructor"!==S||"function"!=typeof b[S])&&"__proto__"!=S)return b[S]}var ug=gf(Nf),lh=By||function(b,S){return yc.setTimeout(b,S)},ch=gf(ig);function Lh(b,S,Q){var De=S+"";return ch(b,function au(b,S){var Q=S.length;if(!Q)return b;var De=Q-1;return S[De]=(Q>1?"& ":"")+S[De],S=S.join(Q>2?", ":" "),b.replace(Ga,"{\n/* [wrapped with "+S+"] */\n")}(De,function hg(b,S){return xl(cn,function(Q){var De="_."+Q[0];S&Q[1]&&!np(b,De)&&b.push(De)}),b.sort()}(function fc(b){var S=b.match(Ns);return S?S[1].split(ya):[]}(De),Q)))}function gf(b){var S=0,Q=0;return function(){var De=tu(),ft=16-(De-Q);if(Q=De,ft>0){if(++S>=800)return arguments[0]}else S=0;return b.apply(L,arguments)}}function Ph(b,S){var Q=-1,De=b.length,ft=De-1;for(S=S===L?De:S;++Q<S;){var Bt=Ih(Q,ft),mn=b[Bt];b[Bt]=b[Q],b[Q]=mn}return b.length=S,b}var dg=function Dh(b){var S=Ln(b,function(De){return 500===Q.size&&Q.clear(),De}),Q=S.cache;return S}(function(b){var S=[];return 46===b.charCodeAt(0)&&S.push(""),b.replace(Ss,function(Q,De,ft,Bt){S.push(ft?Bt.replace(Fc,"$1"):De||Q)}),S});function gd(b){if("string"==typeof b||gc(b))return b;var S=b+"";return"0"==S&&1/b==-_t?"-0":S}function uh(b){if(null!=b){try{return Ev.call(b)}catch{}try{return b+""}catch{}}return""}function om(b){if(b instanceof to)return b.clone();var S=new La(b.__wrapped__,b.__chain__);return S.__actions__=So(b.__actions__),S.__index__=b.__index__,S.__values__=b.__values__,S}var lu=so(function(b,S){return bs(b)?tf(b,Rl(S,1,bs,!0)):[]}),jf=so(function(b,S){var Q=$u(S);return bs(Q)&&(Q=L),bs(b)?tf(b,Rl(S,1,bs,!0),Ds(Q,2)):[]}),jm=so(function(b,S){var Q=$u(S);return bs(Q)&&(Q=L),bs(b)?tf(b,Rl(S,1,bs,!0),L,Q):[]});function Fl(b,S,Q){var De=null==b?0:b.length;if(!De)return-1;var ft=null==Q?0:Co(Q);return ft<0&&(ft=Us(De+ft,0)),ac(b,Ds(S,3),ft)}function $m(b,S,Q){var De=null==b?0:b.length;if(!De)return-1;var ft=De-1;return Q!==L&&(ft=Co(Q),ft=Q<0?Us(De+ft,0):Ul(ft,De-1)),ac(b,Ds(S,3),ft,!0)}function $f(b){return null!=b&&b.length?Rl(b,1):[]}function jy(b){return b&&b.length?b[0]:L}var Y_=so(function(b){var S=il(b,Ql);return S.length&&S[0]===b[0]?Vu(S):[]}),$y=so(function(b){var S=$u(b),Q=il(b,Ql);return S===$u(Q)?S=L:Q.pop(),Q.length&&Q[0]===b[0]?Vu(Q,Ds(S,2)):[]}),qm=so(function(b){var S=$u(b),Q=il(b,Ql);return(S="function"==typeof S?S:L)&&Q.pop(),Q.length&&Q[0]===b[0]?Vu(Q,L,S):[]});function $u(b){var S=null==b?0:b.length;return S?b[S-1]:L}var Ka=so(zv);function zv(b,S){return b&&b.length&&S&&S.length?sl(b,S):b}var qy=Sc(function(b,S){var Q=null==b?0:b.length,De=Of(b,S);return Su(b,il(S,function(ft){return Gc(ft,Q)?+ft:ft}).sort(dc)),De});function Xm(b){return null==b?b:ts.call(b)}var O=so(function(b){return Zl(Rl(b,1,bs,!0))}),B=so(function(b){var S=$u(b);return bs(S)&&(S=L),Zl(Rl(b,1,bs,!0),Ds(S,2))}),ae=so(function(b){var S=$u(b);return S="function"==typeof S?S:L,Zl(Rl(b,1,bs,!0),L,S)});function Oe(b){if(!b||!b.length)return[];var S=0;return b=Ed(b,function(Q){if(bs(Q))return S=Us(Q.length,S),!0}),_h(S,function(Q){return il(b,Ks(Q))})}function Fe(b,S){if(!b||!b.length)return[];var Q=Oe(b);return null==S?Q:il(Q,function(De){return Al(S,L,De)})}var Ne=so(function(b,S){return bs(b)?tf(b,S):[]}),ut=so(function(b){return cd(Ed(b,bs))}),ct=so(function(b){var S=$u(b);return bs(S)&&(S=L),cd(Ed(b,bs),Ds(S,2))}),rt=so(function(b){var S=$u(b);return S="function"==typeof S?S:L,cd(Ed(b,bs),L,S)}),At=so(Oe),$t=so(function(b){var S=b.length,Q=S>1?b[S-1]:L;return Q="function"==typeof Q?(b.pop(),Q):L,Fe(b,Q)});function Cn(b){var S=bt(b);return S.__chain__=!0,S}function ln(b,S){return S(b)}var In=Sc(function(b){var S=b.length,Q=S?b[0]:0,De=this.__wrapped__,ft=function(Bt){return Of(Bt,b)};return!(S>1||this.__actions__.length)&&De instanceof to&&Gc(Q)?((De=De.slice(Q,+Q+(S?1:0))).__actions__.push({func:ln,args:[ft],thisArg:L}),new La(De,this.__chain__).thru(function(Bt){return S&&!Bt.length&&Bt.push(L),Bt})):this.thru(ft)}),Vi=oh(function(b,S,Q){Ma.call(b,Q)?++b[Q]:Jd(b,Q,1)}),Cr=dd(Fl),Ji=dd($m);function c(b,S){return(Wi(b)?xl:Ch)(b,Ds(S,3))}function h(b,S){return(Wi(b)?Dl:Rv)(b,Ds(S,3))}var m=oh(function(b,S,Q){Ma.call(b,Q)?b[Q].push(S):Jd(b,Q,[S])}),C=so(function(b,S,Q){var De=-1,ft="function"==typeof S,Bt=Fr(b)?di(b.length):[];return Ch(b,function(mn){Bt[++De]=ft?Al(S,mn,Q):su(mn,S,Q)}),Bt}),A=oh(function(b,S,Q){Jd(b,Q,S)});function E(b,S){return(Wi(b)?il:yp)(b,Ds(S,3))}var P=oh(function(b,S,Q){b[Q?0:1].push(S)},function(){return[[],[]]}),st=so(function(b,S){if(null==b)return[];var Q=S.length;return Q>1&&Wc(b,S[0],S[1])?S=[]:Q>2&&Wc(S[0],S[1],S[2])&&(S=[S[0]]),Il(b,Rl(S,1),[])}),tt=Rm||function(){return yc.Date.now()};function Ut(b,S,Q){return S=Q?L:S,Eu(b,128,L,L,L,L,S=b&&null==S?b.length:S)}function Gt(b,S){var Q;if("function"!=typeof S)throw new Zd(D);return b=Co(b),function(){return--b>0&&(Q=S.apply(this,arguments)),b<=1&&(S=L),Q}}var xt=so(function(b,S,Q){var De=1;if(Q.length){var ft=Bu(Q,fd(xt));De|=V}return Eu(b,De,S,Q,ft)}),Wt=so(function(b,S,Q){var De=3;if(Q.length){var ft=Bu(Q,fd(Wt));De|=V}return Eu(S,De,b,Q,ft)});function Yt(b,S,Q){var De,ft,Bt,mn,Mn,Wn,Gi=0,ji=!1,rr=!1,jr=!0;if("function"!=typeof b)throw new Zd(D);function cs(Tc){var Rp=De,kp=ft;return De=ft=L,Gi=Tc,mn=b.apply(kp,Rp)}function $s(Tc){return Gi=Tc,Mn=lh(Bo,S),ji?cs(Tc):mn}function Xs(Tc){var Rp=Tc-Wn;return Wn===L||Rp>=S||Rp<0||rr&&Tc-Gi>=Bt}function Bo(){var Tc=tt();if(Xs(Tc))return ca(Tc);Mn=lh(Bo,function ko(Tc){var fI=S-(Tc-Wn);return rr?Ul(fI,Bt-(Tc-Gi)):fI}(Tc))}function ca(Tc){return Mn=L,jr&&De?cs(Tc):(De=ft=L,mn)}function pu(){var Tc=tt(),Rp=Xs(Tc);if(De=arguments,ft=this,Wn=Tc,Rp){if(Mn===L)return $s(Wn);if(rr)return Ov(Mn),Mn=lh(Bo,S),cs(Wn)}return Mn===L&&(Mn=lh(Bo,S)),mn}return S=Rh(S)||0,Ar(Q)&&(ji=!!Q.leading,Bt=(rr="maxWait"in Q)?Us(Rh(Q.maxWait)||0,S):Bt,jr="trailing"in Q?!!Q.trailing:jr),pu.cancel=function hh(){Mn!==L&&Ov(Mn),Gi=0,De=Wn=ft=Mn=L},pu.flush=function fh(){return Mn===L?mn:ca(tt())},pu}var lt=so(function(b,S){return Uy(b,1,S)}),Zt=so(function(b,S,Q){return Uy(b,Rh(S)||0,Q)});function Ln(b,S){if("function"!=typeof b||null!=S&&"function"!=typeof S)throw new Zd(D);var Q=function(){var De=arguments,ft=S?S.apply(this,De):De[0],Bt=Q.cache;if(Bt.has(ft))return Bt.get(ft);var mn=b.apply(this,De);return Q.cache=Bt.set(ft,mn)||Bt,mn};return Q.cache=new(Ln.Cache||Ms),Q}function sn(b){if("function"!=typeof b)throw new Zd(D);return function(){var S=arguments;switch(S.length){case 0:return!b.call(this);case 1:return!b.call(this,S[0]);case 2:return!b.call(this,S[0],S[1]);case 3:return!b.call(this,S[0],S[1],S[2])}return!b.apply(this,S)}}Ln.Cache=Ms;var zn=_p(function(b,S){var Q=(S=1==S.length&&Wi(S[0])?il(S[0],bc(Ds())):il(Rl(S,1),bc(Ds()))).length;return so(function(De){for(var ft=-1,Bt=Ul(De.length,Q);++ft<Bt;)De[ft]=S[ft].call(this,De[ft]);return Al(b,this,De)})}),jn=so(function(b,S){var Q=Bu(S,fd(jn));return Eu(b,V,L,S,Q)}),pi=so(function(b,S){var Q=Bu(S,fd(pi));return Eu(b,64,L,S,Q)}),Vn=Sc(function(b,S){return Eu(b,256,L,L,L,S)});function _s(b,S){return b===S||b!=b&&S!=S}var Mr=Cp(wh),br=Cp(function(b,S){return b>=S}),gs=po(function(){return arguments}())?po:function(b){return yi(b)&&Ma.call(b,"callee")&&!Pm.call(b,"callee")},Wi=di.isArray,kr=nl?bc(nl):function gp(b){return yi(b)&&Ra(b)==Zi};function Fr(b){return null!=b&&mr(b.length)&&!Tn(b)}function bs(b){return yi(b)&&Fr(b)}var Cs=Zp||Pp,ir=Lo?bc(Lo):function mp(b){return yi(b)&&Ra(b)==ot};function vt(b){if(!yi(b))return!1;var S=Ra(b);return S==Sn||"[object DOMException]"==S||"string"==typeof b.message&&"string"==typeof b.name&&!Jo(b)}function Tn(b){if(!Ar(b))return!1;var S=Ra(b);return S==Hn||S==pt||"[object AsyncFunction]"==S||"[object Proxy]"==S}function Dn(b){return"number"==typeof b&&b==Co(b)}function mr(b){return"number"==typeof b&&b>-1&&b%1==0&&b<=Fn}function Ar(b){var S=typeof b;return null!=b&&("object"==S||"function"==S)}function yi(b){return null!=b&&"object"==typeof b}var ns=V_?bc(V_):function Zg(b){return yi(b)&&ll(b)==ht};function ma(b){return"number"==typeof b||yi(b)&&Ra(b)==Ht}function Jo(b){if(!yi(b)||Ra(b)!=Ie)return!1;var S=dp(b);if(null===S)return!0;var Q=Ma.call(S,"constructor")&&S.constructor;return"function"==typeof Q&&Q instanceof Q&&Ev.call(Q)==pb}var Aa=Py?bc(Py):function sf(b){return yi(b)&&Ra(b)==dn},yl=Yh?bc(Yh):function wc(b){return yi(b)&&ll(b)==Xn};function pc(b){return"string"==typeof b||!Wi(b)&&yi(b)&&Ra(b)==Jn}function gc(b){return"symbol"==typeof b||yi(b)&&Ra(b)==ms}var cu=Wo?bc(Wo):function Ol(b){return yi(b)&&mr(b.length)&&!!tl[Ra(b)]},Ec=Cp(af),du=Cp(function(b,S){return b<=S});function Mp(b){if(!b)return[];if(Fr(b))return pc(b)?Dd(b):So(b);if(Kp&&b[Kp])return function ja(On){for(var Ci,di=[];!(Ci=On.next()).done;)di.push(Ci.value);return di}(b[Kp]());var S=ll(b);return(S==ht?op:S==Xn?Yp:Jy)(b)}function hu(b){return b?(b=Rh(b))===_t||b===-_t?17976931348623157e292*(b<0?-1:1):b==b?b:0:0===b?b:0}function Co(b){var S=hu(b),Q=S%1;return S==S?Q?S-Q:S:0}function _b(b){return b?Ff(Co(b),0,nn):0}function Rh(b){if("number"==typeof b)return b;if(gc(b))return NaN;if(Ar(b)){var S="function"==typeof b.valueOf?b.valueOf():b;b=Ar(S)?S+"":S}if("string"!=typeof b)return 0===b?b:+b;b=Xp(b);var Q=pe.test(b);return Q||Qe.test(b)?bv(b.slice(2),Q?2:8):et.test(b)?NaN:+b}function J_(b){return Uc(b,qu(b))}function Ea(b){return null==b?"":uc(b)}var t0=Gu(function(b,S){if(zd(S)||Fr(S))Uc(S,fu(S),b);else for(var Q in S)Ma.call(S,Q)&&Rf(b,Q,S[Q])}),bb=Gu(function(b,S){Uc(S,qu(S),b)}),gg=Gu(function(b,S,Q,De){Uc(S,qu(S),b,De)}),Zy=Gu(function(b,S,Q,De){Uc(S,fu(S),b,De)}),Hv=Sc(Of),n0=so(function(b,S){b=$a(b);var Q=-1,De=S.length,ft=De>2?S[2]:L;for(ft&&Wc(S[0],S[1],ft)&&(De=1);++Q<De;)for(var Bt=S[Q],mn=qu(Bt),Mn=-1,Wn=mn.length;++Mn<Wn;){var Gi=mn[Mn],ji=b[Gi];(ji===L||_s(ji,zg[Gi])&&!Ma.call(b,Gi))&&(b[Gi]=Bt[Gi])}return b}),Cb=so(function(b){return b.push(L,wp),Al(zx,L,b)});function xb(b,S,Q){var De=null==b?L:od(b,S);return De===L?Q:De}function Qy(b,S){return null!=b&&Um(b,S,Kg)}var Fx=Uf(function(b,S,Q){null!=S&&"function"!=typeof S.toString&&(S=Dm.call(S)),b[S]=Q},gw(Oh)),uw=Uf(function(b,S,Q){null!=S&&"function"!=typeof S.toString&&(S=Dm.call(S)),Ma.call(b,S)?b[S].push(Q):b[S]=[Q]},Ds),Nx=so(su);function fu(b){return Fr(b)?ml(b):Iu(b)}function qu(b){return Fr(b)?ml(b,!0):function Ah(b){if(!Ar(b))return function Wm(b){var S=[];if(null!=b)for(var Q in $a(b))S.push(Q);return S}(b);var S=zd(b),Q=[];for(var De in b)"constructor"==De&&(S||!Ma.call(b,De))||Q.push(De);return Q}(b)}var hT=Gu(function(b,S,Q){pa(b,S,Q)}),zx=Gu(function(b,S,Q,De){pa(b,S,Q,De)}),Vx=Sc(function(b,S){var Q={};if(null==b)return Q;var De=!1;S=il(S,function(Bt){return Bt=xc(Bt,b),De||(De=Bt.length>1),Bt}),Uc(b,hf(b),Q),De&&(Q=Gl(Q,7,hc));for(var ft=S.length;ft--;)ld(Q,S[ft]);return Q}),Ux=Sc(function(b,S){return null==b?{}:function xh(b,S){return ad(b,S,function(Q,De){return Qy(b,De)})}(b,S)});function fT(b,S){if(null==b)return{};var Q=il(hf(b),function(De){return[De]});return S=Ds(S),ad(b,Q,function(De,ft){return S(De,ft[0])})}var Wx=Fd(fu),jx=Fd(qu);function Jy(b){return null==b?[]:fo(b,fu(b))}var bT=ec(function(b,S,Q){return S=S.toLowerCase(),b+(Q?Xx(S):S)});function Xx(b){return Ym(Ea(b).toLowerCase())}function mo(b){return(b=Ea(b))&&b.replace(Xt,eu).replace(Nc,"")}var CT=ec(function(b,S,Q){return b+(Q?"-":"")+S.toLowerCase()}),wT=ec(function(b,S,Q){return b+(Q?" ":"")+S.toLowerCase()}),Zx=Hc("toLowerCase"),eI=ec(function(b,S,Q){return b+(Q?"_":"")+S.toLowerCase()}),ST=ec(function(b,S,Q){return b+(Q?" ":"")+Ym(S)}),MT=ec(function(b,S,Q){return b+(Q?" ":"")+S.toUpperCase()}),Ym=Hc("toUpperCase");function nI(b,S,Q){return b=Ea(b),(S=Q?L:S)===L?function ky(On){return Jc.test(On)}(b)?function Bg(On){return On.match(fb)||[]}(b):function Ou(On){return On.match(sa)||[]}(b):b.match(S)||[]}var pw=so(function(b,S){try{return Al(b,L,S)}catch(Q){return vt(Q)?Q:new co(Q)}}),Sb=Sc(function(b,S){return xl(S,function(Q){Q=gd(Q),Jd(b,Q,xt(b[Q],b))}),b});function gw(b){return function(){return b}}var PT=Sh(),RT=Sh(!0);function Oh(b){return b}function Eb(b){return nh("function"==typeof b?b:Gl(b,1))}var sI=so(function(b,S){return function(Q){return su(Q,b,S)}}),mw=so(function(b,S){return function(Q){return su(b,Q,S)}});function oI(b,S,Q){var De=fu(S),ft=Pd(S,De);null==Q&&(!Ar(S)||!ft.length&&De.length)&&(Q=S,S=b,b=this,ft=Pd(S,fu(S)));var Bt=!(Ar(Q)&&"chain"in Q&&!Q.chain),mn=Tn(b);return xl(ft,function(Mn){var Wn=S[Mn];b[Mn]=Wn,mn&&(b.prototype[Mn]=function(){var Gi=this.__chain__;if(Bt||Gi){var ji=b(this.__wrapped__),rr=ji.__actions__=So(this.__actions__);return rr.push({func:Wn,args:arguments,thisArg:b}),ji.__chain__=Gi,ji}return Wn.apply(b,Xd([this.value()],arguments))})}),b}function yw(){}var qt=df(il),_w=df(ku),aI=df(Sm);function r0(b){return cg(b)?Ks(gd(b)):function rh(b){return function(S){return od(S,b)}}(b)}var lI=em(),OT=em(!0);function s0(){return[]}function Pp(){return!1}var Tb=Ba(function(b,S){return b+S},0),Mb=tc("ceil"),ww=Ba(function(b,S){return b/S},1),Aw=tc("floor"),dI=Ba(function(b,S){return b*S},1),ik=tc("round"),VT=Ba(function(b,S){return b-S},0);return bt.after=function wt(b,S){if("function"!=typeof S)throw new Zd(D);return b=Co(b),function(){if(--b<1)return S.apply(this,arguments)}},bt.ary=Ut,bt.assign=t0,bt.assignIn=bb,bt.assignInWith=gg,bt.assignWith=Zy,bt.at=Hv,bt.before=Gt,bt.bind=xt,bt.bindAll=Sb,bt.bindKey=Wt,bt.castArray=function Gn(){if(!arguments.length)return[];var b=arguments[0];return Wi(b)?b:[b]},bt.chain=Cn,bt.chunk=function fg(b,S,Q){S=(Q?Wc(b,S,Q):S===L)?1:Us(Co(S),0);var De=null==b?0:b.length;if(!De||S<1)return[];for(var ft=0,Bt=0,mn=di(Mv(De/S));ft<De;)mn[Bt++]=Wl(b,ft,ft+=S);return mn},bt.compact=function pg(b){for(var S=-1,Q=null==b?0:b.length,De=0,ft=[];++S<Q;){var Bt=b[S];Bt&&(ft[De++]=Bt)}return ft},bt.concat=function Fv(){var b=arguments.length;if(!b)return[];for(var S=di(b-1),Q=arguments[0],De=b;De--;)S[De-1]=arguments[De];return Xd(Wi(Q)?So(Q):[Q],Rl(S,1))},bt.cond=function DT(b){var S=null==b?0:b.length,Q=Ds();return b=S?il(b,function(De){if("function"!=typeof De[1])throw new Zd(D);return[Q(De[0]),De[1]]}):[],so(function(De){for(var ft=-1;++ft<S;){var Bt=b[ft];if(Al(Bt[0],this,De))return Al(Bt[1],this,De)}})},bt.conforms=function iI(b){return function eg(b){var S=fu(b);return function(Q){return Vy(Q,b,S)}}(Gl(b,1))},bt.constant=gw,bt.countBy=Vi,bt.create=function mg(b,S){var Q=aa(b);return null==S?Q:ef(Q,S)},bt.curry=function Dt(b,S,Q){var De=Eu(b,8,L,L,L,L,L,S=Q?L:S);return De.placeholder=Dt.placeholder,De},bt.curryRight=function Kt(b,S,Q){var De=Eu(b,16,L,L,L,L,L,S=Q?L:S);return De.placeholder=Kt.placeholder,De},bt.debounce=Yt,bt.defaults=n0,bt.defaultsDeep=Cb,bt.defer=lt,bt.delay=Zt,bt.difference=lu,bt.differenceBy=jf,bt.differenceWith=jm,bt.drop=function Hy(b,S,Q){var De=null==b?0:b.length;return De?Wl(b,(S=Q||S===L?1:Co(S))<0?0:S,De):[]},bt.dropRight=function Gy(b,S,Q){var De=null==b?0:b.length;return De?Wl(b,0,(S=De-(S=Q||S===L?1:Co(S)))<0?0:S):[]},bt.dropRightWhile=function am(b,S){return b&&b.length?vl(b,Ds(S,3),!0,!0):[]},bt.dropWhile=function mb(b,S){return b&&b.length?vl(b,Ds(S,3),!0):[]},bt.fill=function Ep(b,S,Q,De){var ft=null==b?0:b.length;return ft?(Q&&"number"!=typeof Q&&Wc(b,S,Q)&&(Q=0,De=ft),function gb(b,S,Q,De){var ft=b.length;for((Q=Co(Q))<0&&(Q=-Q>ft?0:ft+Q),(De=De===L||De>ft?ft:Co(De))<0&&(De+=ft),De=Q>De?0:_b(De);Q<De;)b[Q++]=S;return b}(b,S,Q,De)):[]},bt.filter=function Ti(b,S){return(Wi(b)?Ed:tg)(b,Ds(S,3))},bt.flatMap=function oi(b,S){return Rl(E(b,S),1)},bt.flatMapDeep=function ii(b,S){return Rl(E(b,S),_t)},bt.flatMapDepth=function f(b,S,Q){return Q=Q===L?1:Co(Q),Rl(E(b,S),Q)},bt.flatten=$f,bt.flattenDeep=function Nv(b){return null!=b&&b.length?Rl(b,_t):[]},bt.flattenDepth=function vb(b,S){return null!=b&&b.length?Rl(b,S=S===L?1:Co(S)):[]},bt.flip=function Vt(b){return Eu(b,512)},bt.flow=PT,bt.flowRight=RT,bt.fromPairs=function Wy(b){for(var S=-1,Q=null==b?0:b.length,De={};++S<Q;){var ft=b[S];De[ft[0]]=ft[1]}return De},bt.functions=function Ox(b){return null==b?[]:Pd(b,fu(b))},bt.functionsIn=function cw(b){return null==b?[]:Pd(b,qu(b))},bt.groupBy=m,bt.initial=function X_(b){return null!=b&&b.length?Wl(b,0,-1):[]},bt.intersection=Y_,bt.intersectionBy=$y,bt.intersectionWith=qm,bt.invert=Fx,bt.invertBy=uw,bt.invokeMap=C,bt.iteratee=Eb,bt.keyBy=A,bt.keys=fu,bt.keysIn=qu,bt.map=E,bt.mapKeys=function dT(b,S){var Q={};return S=Ds(S,3),ru(b,function(De,ft,Bt){Jd(Q,S(De,ft,Bt),De)}),Q},bt.mapValues=function Bx(b,S){var Q={};return S=Ds(S,3),ru(b,function(De,ft,Bt){Jd(Q,ft,S(De,ft,Bt))}),Q},bt.matches=function kT(b){return kd(Gl(b,1))},bt.matchesProperty=function rI(b,S){return ng(b,Gl(S,1))},bt.memoize=Ln,bt.merge=hT,bt.mergeWith=zx,bt.method=sI,bt.methodOf=mw,bt.mixin=oI,bt.negate=sn,bt.nthArg=function JR(b){return b=Co(b),so(function(S){return ih(S,b)})},bt.omit=Vx,bt.omitBy=function dw(b,S){return fT(b,sn(Ds(S)))},bt.once=function bn(b){return Gt(2,b)},bt.orderBy=function F(b,S,Q,De){return null==b?[]:(Wi(S)||(S=null==S?[]:[S]),Wi(Q=De?L:Q)||(Q=null==Q?[]:[Q]),Il(b,S,Q))},bt.over=qt,bt.overArgs=zn,bt.overEvery=_w,bt.overSome=aI,bt.partial=jn,bt.partialRight=pi,bt.partition=P,bt.pick=Ux,bt.pickBy=fT,bt.property=r0,bt.propertyOf=function Lp(b){return function(S){return null==b?L:od(b,S)}},bt.pull=Ka,bt.pullAll=zv,bt.pullAllBy=function dh(b,S,Q){return b&&b.length&&S&&S.length?sl(b,S,Ds(Q,2)):b},bt.pullAllWith=function Vv(b,S,Q){return b&&b.length&&S&&S.length?sl(b,S,L,Q):b},bt.pullAt=qy,bt.range=lI,bt.rangeRight=OT,bt.rearg=Vn,bt.reject=function he(b,S){return(Wi(b)?Ed:tg)(b,sn(Ds(S,3)))},bt.remove=function Z_(b,S){var Q=[];if(!b||!b.length)return Q;var De=-1,ft=[],Bt=b.length;for(S=Ds(S,3);++De<Bt;){var mn=b[De];S(mn,De,b)&&(Q.push(mn),ft.push(De))}return Su(b,ft),Q},bt.rest=function ci(b,S){if("function"!=typeof b)throw new Zd(D);return so(b,S=S===L?S:Co(S))},bt.reverse=Xm,bt.sampleSize=function ve(b,S,Q){return S=(Q?Wc(b,S,Q):S===L)?1:Co(S),(Wi(b)?Pv:Fm)(b,S)},bt.set=function pT(b,S,Q){return null==b?b:qo(b,S,Q)},bt.setWith=function Gx(b,S,Q,De){return De="function"==typeof De?De:L,null==b?b:qo(b,S,Q,De)},bt.shuffle=function Ee(b){return(Wi(b)?qg:rg)(b)},bt.slice=function Xy(b,S,Q){var De=null==b?0:b.length;return De?(Q&&"number"!=typeof Q&&Wc(b,S,Q)?(S=0,Q=De):(S=null==S?0:Co(S),Q=Q===L?De:Co(Q)),Wl(b,S,Q)):[]},bt.sortBy=st,bt.sortedUniq=function Ky(b){return b&&b.length?og(b):[]},bt.sortedUniqBy=function a(b,S){return b&&b.length?og(b,Ds(S,2)):[]},bt.split=function Xu(b,S,Q){return Q&&"number"!=typeof Q&&Wc(b,S,Q)&&(S=Q=L),(Q=Q===L?nn:Q>>>0)?(b=Ea(b))&&("string"==typeof S||null!=S&&!Aa(S))&&!(S=uc(S))&&Md(b)?zc(Dd(b),0,Q):b.split(S,Q):[]},bt.spread=function Ai(b,S){if("function"!=typeof b)throw new Zd(D);return S=null==S?0:Us(Co(S),0),so(function(Q){var De=Q[S],ft=zc(Q,0,S);return De&&Xd(ft,De),Al(b,this,ft)})},bt.tail=function d(b){var S=null==b?0:b.length;return S?Wl(b,1,S):[]},bt.take=function g(b,S,Q){return b&&b.length?Wl(b,0,(S=Q||S===L?1:Co(S))<0?0:S):[]},bt.takeRight=function y(b,S,Q){var De=null==b?0:b.length;return De?Wl(b,(S=De-(S=Q||S===L?1:Co(S)))<0?0:S,De):[]},bt.takeRightWhile=function x(b,S){return b&&b.length?vl(b,Ds(S,3),!1,!0):[]},bt.takeWhile=function M(b,S){return b&&b.length?vl(b,Ds(S,3)):[]},bt.tap=function pn(b,S){return S(b),b},bt.throttle=function Oi(b,S,Q){var De=!0,ft=!0;if("function"!=typeof b)throw new Zd(D);return Ar(Q)&&(De="leading"in Q?!!Q.leading:De,ft="trailing"in Q?!!Q.trailing:ft),Yt(b,S,{leading:De,maxWait:S,trailing:ft})},bt.thru=ln,bt.toArray=Mp,bt.toPairs=Wx,bt.toPairsIn=jx,bt.toPath=function uI(b){return Wi(b)?il(b,gd):gc(b)?[b]:So(dg(Ea(b)))},bt.toPlainObject=J_,bt.transform=function Dp(b,S,Q){var De=Wi(b),ft=De||Cs(b)||cu(b);if(S=Ds(S,4),null==Q){var Bt=b&&b.constructor;Q=ft?De?new Bt:[]:Ar(b)&&Tn(Bt)?aa(dp(b)):{}}return(ft?xl:ru)(b,function(mn,Mn,Wn){return S(Q,mn,Mn,Wn)}),Q},bt.unary=function Mi(b){return Ut(b,1)},bt.union=O,bt.unionBy=B,bt.unionWith=ae,bt.uniq=function re(b){return b&&b.length?Zl(b):[]},bt.uniqBy=function me(b,S){return b&&b.length?Zl(b,Ds(S,2)):[]},bt.uniqWith=function _e(b,S){return S="function"==typeof S?S:L,b&&b.length?Zl(b,L,S):[]},bt.unset=function gT(b,S){return null==b||ld(b,S)},bt.unzip=Oe,bt.unzipWith=Fe,bt.update=function $x(b,S,Q){return null==b?b:cf(b,S,al(Q))},bt.updateWith=function mT(b,S,Q,De){return De="function"==typeof De?De:L,null==b?b:cf(b,S,al(Q),De)},bt.values=Jy,bt.valuesIn=function vT(b){return null==b?[]:fo(b,qu(b))},bt.without=Ne,bt.words=nI,bt.wrap=function Si(b,S){return jn(al(S),b)},bt.xor=ut,bt.xorBy=ct,bt.xorWith=rt,bt.zip=At,bt.zipObject=function St(b,S){return ud(b||[],S||[],Rf)},bt.zipObjectDeep=function tn(b,S){return ud(b||[],S||[],qo)},bt.zipWith=$t,bt.entries=Wx,bt.entriesIn=jx,bt.extend=bb,bt.extendWith=gg,oI(bt,bt),bt.add=Tb,bt.attempt=pw,bt.camelCase=bT,bt.capitalize=Xx,bt.ceil=Mb,bt.clamp=function yT(b,S,Q){return Q===L&&(Q=S,S=L),Q!==L&&(Q=(Q=Rh(Q))==Q?Q:0),S!==L&&(S=(S=Rh(S))==S?S:0),Ff(Rh(b),S,Q)},bt.clone=function _i(b){return Gl(b,4)},bt.cloneDeep=function lr(b){return Gl(b,5)},bt.cloneDeepWith=function wr(b,S){return Gl(b,5,S="function"==typeof S?S:L)},bt.cloneWith=function Ni(b,S){return Gl(b,4,S="function"==typeof S?S:L)},bt.conformsTo=function as(b,S){return null==S||Vy(b,S,fu(S))},bt.deburr=mo,bt.defaultTo=function LT(b,S){return null==b||b!=b?S:b},bt.divide=ww,bt.endsWith=function we(b,S,Q){b=Ea(b),S=uc(S);var De=b.length,ft=Q=Q===L?De:Ff(Co(Q),0,De);return(Q-=S.length)>=0&&b.slice(Q,ft)==S},bt.eq=_s,bt.escape=function Yx(b){return(b=Ea(b))&&on.test(b)?b.replace(qe,Fg):b},bt.escapeRegExp=function Kx(b){return(b=Ea(b))&&xo.test(b)?b.replace(xs,"\\$&"):b},bt.every=function ki(b,S,Q){var De=Wi(b)?ku:j_;return Q&&Wc(b,S,Q)&&(S=L),De(b,Ds(S,3))},bt.find=Cr,bt.findIndex=Fl,bt.findKey=function vf(b,S){return Ca(b,Ds(S,3),ru)},bt.findLast=Ji,bt.findLastIndex=$m,bt.findLastKey=function wb(b,S){return Ca(b,Ds(S,3),th)},bt.floor=Aw,bt.forEach=c,bt.forEachRight=h,bt.forIn=function Gv(b,S){return null==b?b:nf(b,Ds(S,3),qu)},bt.forInRight=function Wv(b,S){return null==b?b:eh(b,Ds(S,3),qu)},bt.forOwn=function kh(b,S){return b&&ru(b,Ds(S,3))},bt.forOwnRight=function Ab(b,S){return b&&th(b,Ds(S,3))},bt.get=xb,bt.gt=Mr,bt.gte=br,bt.has=function Ib(b,S){return null!=b&&Um(b,S,Om)},bt.hasIn=Qy,bt.head=jy,bt.identity=Oh,bt.includes=function _(b,S,Q,De){b=Fr(b)?b:Jy(b),Q=Q&&!De?Co(Q):0;var ft=b.length;return Q<0&&(Q=Us(ft+Q,0)),pc(b)?Q<=ft&&b.indexOf(S,Q)>-1:!!ft&&rl(b,S,Q)>-1},bt.indexOf=function q_(b,S,Q){var De=null==b?0:b.length;if(!De)return-1;var ft=null==Q?0:Co(Q);return ft<0&&(ft=Us(De+ft,0)),rl(b,S,ft)},bt.inRange=function qx(b,S,Q){return S=hu(S),Q===L?(Q=S,S=0):Q=hu(Q),function kl(b,S,Q){return b>=Ul(S,Q)&&b<Us(S,Q)}(b=Rh(b),S,Q)},bt.invoke=Nx,bt.isArguments=gs,bt.isArray=Wi,bt.isArrayBuffer=kr,bt.isArrayLike=Fr,bt.isArrayLikeObject=bs,bt.isBoolean=function oo(b){return!0===b||!1===b||yi(b)&&Ra(b)==le},bt.isBuffer=Cs,bt.isDate=ir,bt.isElement=function Nt(b){return yi(b)&&1===b.nodeType&&!Jo(b)},bt.isEmpty=function li(b){if(null==b)return!0;if(Fr(b)&&(Wi(b)||"string"==typeof b||"function"==typeof b.splice||Cs(b)||cu(b)||gs(b)))return!b.length;var S=ll(b);if(S==ht||S==Xn)return!b.size;if(zd(b))return!Iu(b).length;for(var Q in b)if(Ma.call(b,Q))return!1;return!0},bt.isEqual=function Hi(b,S){return ou(b,S)},bt.isEqualWith=function He(b,S,Q){var De=(Q="function"==typeof Q?Q:L)?Q(b,S):L;return De===L?ou(b,S,L,Q):!!De},bt.isError=vt,bt.isFinite=function vn(b){return"number"==typeof b&&Gg(b)},bt.isFunction=Tn,bt.isInteger=Dn,bt.isLength=mr,bt.isMap=ns,bt.isMatch=function Ki(b,S){return b===S||Rd(b,S,rm(S))},bt.isMatchWith=function Qi(b,S,Q){return Q="function"==typeof Q?Q:L,Rd(b,S,rm(S),Q)},bt.isNaN=function fr(b){return ma(b)&&b!=+b},bt.isNative=function Eo(b){if(Mh(b))throw new co("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return rf(b)},bt.isNil=function ul(b){return null==b},bt.isNull=function No(b){return null===b},bt.isNumber=ma,bt.isObject=Ar,bt.isObjectLike=yi,bt.isPlainObject=Jo,bt.isRegExp=Aa,bt.isSafeInteger=function Ur(b){return Dn(b)&&b>=-Fn&&b<=Fn},bt.isSet=yl,bt.isString=pc,bt.isSymbol=gc,bt.isTypedArray=cu,bt.isUndefined=function Tp(b){return b===L},bt.isWeakMap=function qf(b){return yi(b)&&ll(b)==os},bt.isWeakSet=function uu(b){return yi(b)&&"[object WeakSet]"==Ra(b)},bt.join=function Bv(b,S){return null==b?"":Ld.call(b,S)},bt.kebabCase=CT,bt.last=$u,bt.lastIndexOf=function K_(b,S,Q){var De=null==b?0:b.length;if(!De)return-1;var ft=De;return Q!==L&&(ft=(ft=Co(Q))<0?Us(De+ft,0):Ul(ft,De-1)),S==S?function Kh(On,Ci,di){for(var Jr=di+1;Jr--;)if(On[Jr]===Ci)return Jr;return Jr}(b,S,ft):ac(b,_c,ft,!0)},bt.lowerCase=wT,bt.lowerFirst=Zx,bt.lt=Ec,bt.lte=du,bt.max=function xw(b){return b&&b.length?kv(b,Oh,wh):L},bt.maxBy=function nk(b,S){return b&&b.length?kv(b,Ds(S,2),wh):L},bt.mean=function FT(b){return zr(b,Oh)},bt.meanBy=function NT(b,S){return zr(b,Ds(S,2))},bt.min=function BT(b){return b&&b.length?kv(b,Oh,af):L},bt.minBy=function zT(b,S){return b&&b.length?kv(b,Ds(S,2),af):L},bt.stubArray=s0,bt.stubFalse=Pp,bt.stubObject=function bw(){return{}},bt.stubString=function cI(){return""},bt.stubTrue=function Cw(){return!0},bt.multiply=dI,bt.nth=function za(b,S){return b&&b.length?ih(b,Co(S)):L},bt.noConflict=function vw(){return yc._===this&&(yc._=H_),this},bt.noop=yw,bt.now=tt,bt.pad=function AT(b,S,Q){b=Ea(b);var De=(S=Co(S))?Pl(b):0;if(!S||De>=S)return b;var ft=(S-De)/2;return Wu(Da(ft),Q)+b+Wu(Mv(ft),Q)},bt.padEnd=function Qx(b,S,Q){b=Ea(b);var De=(S=Co(S))?Pl(b):0;return S&&De<S?b+Wu(S-De,Q):b},bt.padStart=function xT(b,S,Q){b=Ea(b);var De=(S=Co(S))?Pl(b):0;return S&&De<S?Wu(S-De,Q)+b:b},bt.parseInt=function IT(b,S,Q){return Q||null==S?S=0:S&&(S=+S),jo(Ea(b).replace(lo,""),S||0)},bt.random=function _T(b,S,Q){if(Q&&"boolean"!=typeof Q&&Wc(b,S,Q)&&(S=Q=L),Q===L&&("boolean"==typeof S?(Q=S,S=L):"boolean"==typeof b&&(Q=b,b=L)),b===L&&S===L?(b=0,S=1):(b=hu(b),S===L?(S=b,b=0):S=hu(S)),b>S){var De=b;b=S,S=De}if(Q||b%1||S%1){var ft=oa();return Ul(b+ft*(S-b+Es("1e-"+((ft+"").length-1))),S)}return Ih(b,S)},bt.reduce=function $(b,S,Q){var De=Wi(b)?Ef:Nu,ft=arguments.length<3;return De(b,Ds(S,4),Q,ft,Ch)},bt.reduceRight=function Z(b,S,Q){var De=Wi(b)?Xr:Nu,ft=arguments.length<3;return De(b,Ds(S,4),Q,ft,Rv)},bt.repeat=function XR(b,S,Q){return S=(Q?Wc(b,S,Q):S===L)?1:Co(S),ga(Ea(b),S)},bt.replace=function Jx(){var b=arguments,S=Ea(b[0]);return b.length<3?S:S.replace(b[1],b[2])},bt.result=function Hx(b,S,Q){var De=-1,ft=(S=xc(S,b)).length;for(ft||(ft=1,b=L);++De<ft;){var Bt=null==b?L:b[gd(S[De])];Bt===L&&(De=ft,Bt=Q),b=Tn(Bt)?Bt.call(b):Bt}return b},bt.round=ik,bt.runInContext=On,bt.sample=function ge(b){return(Wi(b)?Lv:vr)(b)},bt.size=function Be(b){if(null==b)return 0;if(Fr(b))return pc(b)?Pl(b):b.length;var S=ll(b);return S==ht||S==Xn?b.size:Iu(b).length},bt.snakeCase=eI,bt.some=function Ue(b,S,Q){var De=Wi(b)?Sm:Bf;return Q&&Wc(b,S,Q)&&(S=L),De(b,Ds(S,3))},bt.sortedIndex=function Q_(b,S){return Ac(b,S)},bt.sortedIndexBy=function yb(b,S,Q){return sg(b,S,Ds(Q,2))},bt.sortedIndexOf=function mf(b,S){var Q=null==b?0:b.length;if(Q){var De=Ac(b,S);if(De<Q&&_s(b[De],S))return De}return-1},bt.sortedLastIndex=function lm(b,S){return Ac(b,S,!0)},bt.sortedLastIndexBy=function Uv(b,S,Q){return sg(b,S,Ds(Q,2),!0)},bt.sortedLastIndexOf=function Yy(b,S){if(null!=b&&b.length){var De=Ac(b,S,!0)-1;if(_s(b[De],S))return De}return-1},bt.startCase=ST,bt.startsWith=function hw(b,S,Q){return b=Ea(b),Q=null==Q?0:Ff(Co(Q),0,b.length),S=uc(S),b.slice(Q,Q+S.length)==S},bt.subtract=VT,bt.sum=function rk(b){return b&&b.length?Yl(b,Oh):0},bt.sumBy=function hI(b,S){return b&&b.length?Yl(b,Ds(S,2)):0},bt.template=function fw(b,S,Q){var De=bt.templateSettings;Q&&Wc(b,S,Q)&&(S=L),b=Ea(b),S=gg({},S,De,nm);var Mn,Wn,ft=gg({},S.imports,De.imports,nm),Bt=fu(ft),mn=fo(ft,Bt),Gi=0,ji=S.interpolate||xn,rr="__p += '",jr=Av((S.escape||xn).source+"|"+ji.source+"|"+(ji===hi?je:xn).source+"|"+(S.evaluate||xn).source+"|$","g"),cs="//# sourceURL="+(Ma.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++B_+"]")+"\n";b.replace(jr,function(Xs,Bo,ca,hh,fh,pu){return ca||(ca=hh),rr+=b.slice(Gi,pu).replace(vi,sp),Bo&&(Mn=!0,rr+="' +\n__e("+Bo+") +\n'"),fh&&(Wn=!0,rr+="';\n"+fh+";\n__p += '"),ca&&(rr+="' +\n((__t = ("+ca+")) == null ? '' : __t) +\n'"),Gi=pu+Xs.length,Xs}),rr+="';\n";var $s=Ma.call(S,"variable")&&S.variable;if($s){if(zl.test($s))throw new co("Invalid `variable` option passed into `_.template`")}else rr="with (obj) {\n"+rr+"\n}\n";rr=(Wn?rr.replace(Rt,""):rr).replace(fn,"$1").replace(gn,"$1;"),rr="function("+($s||"obj")+") {\n"+($s?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Mn?", __e = _.escape":"")+(Wn?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+rr+"return __p\n}";var ko=pw(function(){return wa(Bt,cs+"return "+rr).apply(L,mn)});if(ko.source=rr,vt(ko))throw ko;return ko},bt.times=function ek(b,S){if((b=Co(b))<1||b>Fn)return[];var Q=nn,De=Ul(b,nn);S=Ds(S),b-=nn;for(var ft=_h(De,S);++Q<b;)S(Q);return ft},bt.toFinite=hu,bt.toInteger=Co,bt.toLength=_b,bt.toLower=function ET(b){return Ea(b).toLowerCase()},bt.toNumber=Rh,bt.toSafeInteger=function e0(b){return b?Ff(Co(b),-Fn,Fn):0===b?b:0},bt.toString=Ea,bt.toUpper=function YR(b){return Ea(b).toUpperCase()},bt.trim=function KR(b,S,Q){if((b=Ea(b))&&(Q||S===L))return Xp(b);if(!b||!(S=uc(S)))return b;var De=Dd(b),ft=Dd(S);return zc(De,rp(De,ft),Em(De,ft)+1).join("")},bt.trimEnd=function ZR(b,S,Q){if((b=Ea(b))&&(Q||S===L))return b.slice(0,Au(b)+1);if(!b||!(S=uc(S)))return b;var De=Dd(b);return zc(De,0,Em(De,Dd(S))+1).join("")},bt.trimStart=function TT(b,S,Q){if((b=Ea(b))&&(Q||S===L))return b.replace(lo,"");if(!b||!(S=uc(S)))return b;var De=Dd(b);return zc(De,rp(De,Dd(S))).join("")},bt.truncate=function tI(b,S){var Q=30,De="...";if(Ar(S)){var ft="separator"in S?S.separator:ft;Q="length"in S?Co(S.length):Q,De="omission"in S?uc(S.omission):De}var Bt=(b=Ea(b)).length;if(Md(b)){var mn=Dd(b);Bt=mn.length}if(Q>=Bt)return b;var Mn=Q-Pl(De);if(Mn<1)return De;var Wn=mn?zc(mn,0,Mn).join(""):b.slice(0,Mn);if(ft===L)return Wn+De;if(mn&&(Mn+=Wn.length-Mn),Aa(ft)){if(b.slice(Mn).search(ft)){var Gi,ji=Wn;for(ft.global||(ft=Av(ft.source,Ea(dt.exec(ft))+"g")),ft.lastIndex=0;Gi=ft.exec(ji);)var rr=Gi.index;Wn=Wn.slice(0,rr===L?Mn:rr)}}else if(b.indexOf(uc(ft),Mn)!=Mn){var jr=Wn.lastIndexOf(ft);jr>-1&&(Wn=Wn.slice(0,jr))}return Wn+De},bt.unescape=function QR(b){return(b=Ea(b))&&kt.test(b)?b.replace(yn,Yd):b},bt.uniqueId=function tk(b){var S=++Oy;return Ea(b)+S},bt.upperCase=MT,bt.upperFirst=Ym,bt.each=c,bt.eachRight=h,bt.first=jy,oI(bt,function(){var b={};return ru(bt,function(S,Q){Ma.call(bt.prototype,Q)||(b[Q]=S)}),b}(),{chain:!1}),bt.VERSION="4.17.21",xl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){bt[b].placeholder=bt}),xl(["drop","take"],function(b,S){to.prototype[b]=function(Q){Q=Q===L?1:Us(Co(Q),0);var De=this.__filtered__&&!S?new to(this):this.clone();return De.__filtered__?De.__takeCount__=Ul(Q,De.__takeCount__):De.__views__.push({size:Ul(Q,nn),type:b+(De.__dir__<0?"Right":"")}),De},to.prototype[b+"Right"]=function(Q){return this.reverse()[b](Q).reverse()}}),xl(["filter","map","takeWhile"],function(b,S){var Q=S+1,De=1==Q||3==Q;to.prototype[b]=function(ft){var Bt=this.clone();return Bt.__iteratees__.push({iteratee:Ds(ft,3),type:Q}),Bt.__filtered__=Bt.__filtered__||De,Bt}}),xl(["head","last"],function(b,S){var Q="take"+(S?"Right":"");to.prototype[b]=function(){return this[Q](1).value()[0]}}),xl(["initial","tail"],function(b,S){var Q="drop"+(S?"":"Right");to.prototype[b]=function(){return this.__filtered__?new to(this):this[Q](1)}}),to.prototype.compact=function(){return this.filter(Oh)},to.prototype.find=function(b){return this.filter(b).head()},to.prototype.findLast=function(b){return this.reverse().find(b)},to.prototype.invokeMap=so(function(b,S){return"function"==typeof b?new to(this):this.map(function(Q){return su(Q,b,S)})}),to.prototype.reject=function(b){return this.filter(sn(Ds(b)))},to.prototype.slice=function(b,S){b=Co(b);var Q=this;return Q.__filtered__&&(b>0||S<0)?new to(Q):(b<0?Q=Q.takeRight(-b):b&&(Q=Q.drop(b)),S!==L&&(Q=(S=Co(S))<0?Q.dropRight(-S):Q.take(S-b)),Q)},to.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},to.prototype.toArray=function(){return this.take(nn)},ru(to.prototype,function(b,S){var Q=/^(?:filter|find|map|reject)|While$/.test(S),De=/^(?:head|last)$/.test(S),ft=bt[De?"take"+("last"==S?"Right":""):S],Bt=De||/^find/.test(S);!ft||(bt.prototype[S]=function(){var mn=this.__wrapped__,Mn=De?[1]:arguments,Wn=mn instanceof to,Gi=Mn[0],ji=Wn||Wi(mn),rr=function(Bo){var ca=ft.apply(bt,Xd([Bo],Mn));return De&&jr?ca[0]:ca};ji&&Q&&"function"==typeof Gi&&1!=Gi.length&&(Wn=ji=!1);var jr=this.__chain__,cs=!!this.__actions__.length,$s=Bt&&!jr,ko=Wn&&!cs;if(!Bt&&ji){mn=ko?mn:new to(this);var Xs=b.apply(mn,Mn);return Xs.__actions__.push({func:ln,args:[rr],thisArg:L}),new La(Xs,jr)}return $s&&ko?b.apply(this,Mn):(Xs=this.thru(rr),$s?De?Xs.value()[0]:Xs.value():Xs)})}),xl(["pop","push","shift","sort","splice","unshift"],function(b){var S=Iv[b],Q=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",De=/^(?:pop|shift)$/.test(b);bt.prototype[b]=function(){var ft=arguments;if(De&&!this.__chain__){var Bt=this.value();return S.apply(Wi(Bt)?Bt:[],ft)}return this[Q](function(mn){return S.apply(Wi(mn)?mn:[],ft)})}}),ru(to.prototype,function(b,S){var Q=bt[S];if(Q){var De=Q.name+"";Ma.call(Qp,De)||(Qp[De]=[]),Qp[De].push({name:S,func:Q})}}),Qp[ai(L,2).name]=[{name:"wrapper",func:L}],to.prototype.clone=function Jp(){var b=new to(this.__wrapped__);return b.__actions__=So(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=So(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=So(this.__views__),b},to.prototype.reverse=function fp(){if(this.__filtered__){var b=new to(this);b.__dir__=-1,b.__filtered__=!0}else(b=this.clone()).__dir__*=-1;return b},to.prototype.value=function Or(){var b=this.__wrapped__.value(),S=this.__dir__,Q=Wi(b),De=S<0,ft=Q?b.length:0,Bt=function Vm(b,S,Q){for(var De=-1,ft=Q.length;++De<ft;){var Bt=Q[De],mn=Bt.size;switch(Bt.type){case"drop":b+=mn;break;case"dropRight":S-=mn;break;case"take":S=Ul(S,b+mn);break;case"takeRight":b=Us(b,S-mn)}}return{start:b,end:S}}(0,ft,this.__views__),mn=Bt.start,Mn=Bt.end,Wn=Mn-mn,Gi=De?Mn:mn-1,ji=this.__iteratees__,rr=ji.length,jr=0,cs=Ul(Wn,this.__takeCount__);if(!Q||!De&&ft==Wn&&cs==Wn)return Uu(b,this.__actions__);var $s=[];e:for(;Wn--&&jr<cs;){for(var ko=-1,Xs=b[Gi+=S];++ko<rr;){var Bo=ji[ko],hh=Bo.type,fh=(0,Bo.iteratee)(Xs);if(2==hh)Xs=fh;else if(!fh){if(1==hh)continue e;break e}}$s[jr++]=Xs}return $s},bt.prototype.at=In,bt.prototype.chain=function $n(){return Cn(this)},bt.prototype.commit=function zi(){return new La(this.value(),this.__chain__)},bt.prototype.next=function Ii(){this.__values__===L&&(this.__values__=Mp(this.value()));var b=this.__index__>=this.__values__.length;return{done:b,value:b?L:this.__values__[this.__index__++]}},bt.prototype.plant=function en(b){for(var S,Q=this;Q instanceof Zo;){var De=om(Q);De.__index__=0,De.__values__=L,S?ft.__wrapped__=De:S=De;var ft=De;Q=Q.__wrapped__}return ft.__wrapped__=b,S},bt.prototype.reverse=function si(){var b=this.__wrapped__;if(b instanceof to){var S=b;return this.__actions__.length&&(S=new to(this)),(S=S.reverse()).__actions__.push({func:ln,args:[Xm],thisArg:L}),new La(S,this.__chain__)}return this.thru(Xm)},bt.prototype.toJSON=bt.prototype.valueOf=bt.prototype.value=function gi(){return Uu(this.__wrapped__,this.__actions__)},bt.prototype.first=bt.prototype.head,Kp&&(bt.prototype[Kp]=function Qt(){return this}),bt}();yc._=Tm,(Y=function(){return Tm}.call(Ae,W,Ae,Ve))!==L&&(Ve.exports=Y)}.call(this)},535:(Ve,Ae,W)=>{var Y=W(9850);function G(U,j){if("function"!=typeof U||null!=j&&"function"!=typeof j)throw new TypeError("Expected a function");var D=function(){var R=arguments,q=j?j.apply(this,R):R[0],ne=D.cache;if(ne.has(q))return ne.get(q);var te=U.apply(this,R);return D.cache=ne.set(q,te)||ne,te};return D.cache=new(G.Cache||Y),D}G.Cache=Y,Ve.exports=G},1710:(Ve,Ae,W)=>{var Y=W(2119);Ve.exports=function(){return Y.Date.now()}},4793:(Ve,Ae,W)=>{var Y=W(5963);Ve.exports=function L(G,U,j){return null==G?G:Y(G,U,j)}},1467:(Ve,Ae,W)=>{var Y=W(3348),L=W(5940),G=W(4129),j=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,R=/^0o[0-7]+$/i,q=parseInt;Ve.exports=function ne(te){if("number"==typeof te)return te;if(G(te))return NaN;if(L(te)){var se="function"==typeof te.valueOf?te.valueOf():te;te=L(se)?se+"":se}if("string"!=typeof te)return 0===te?te:+te;te=Y(te);var ee=D.test(te);return ee||R.test(te)?q(te.slice(2),ee?2:8):j.test(te)?NaN:+te}},4152:(Ve,Ae,W)=>{var Y=W(4633),L=W(9454),G=W(9460),U=W(4129),j=W(2855),D=W(8533),R=W(3943);Ve.exports=function q(ne){return G(ne)?Y(ne,D):U(ne)?[ne]:L(j(R(ne)))}},3943:(Ve,Ae,W)=>{var Y=W(3935);Ve.exports=function L(G){return null==G?"":Y(G)}},4826:(Ve,Ae,W)=>{"use strict";Ve.exports=W(6776)},6798:(Ve,Ae,W)=>{"use strict";Ve.exports=W(5485)},2484:Ve=>{"use strict";Ve.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},3266:Ve=>{"use strict";var j="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",D="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",se=new RegExp("^(?:"+j+"|"+D+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),ee=new RegExp("^(?:"+j+"|"+D+")");Ve.exports.n=se,Ve.exports.q=ee},3332:(Ve,Ae,W)=>{"use strict";var G=Object.prototype.hasOwnProperty;function U(Ge,yt){return G.call(Ge,yt)}function R(Ge){return!(Ge>=55296&&Ge<=57343||Ge>=64976&&Ge<=65007||65535==(65535&Ge)||65534==(65535&Ge)||Ge>=0&&Ge<=8||11===Ge||Ge>=14&&Ge<=31||Ge>=127&&Ge<=159||Ge>1114111)}function q(Ge){return Ge>65535?(Ge-=65536,String.fromCharCode(55296+(Ge>>10),56320+(1023&Ge))):String.fromCharCode(Ge)}var ne=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,se=new RegExp(ne.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),ee=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,K=W(6798),Re=/[&<>"]/,ie=/[&<>"]/g,oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function N(Ge){return oe[Ge]}var J=/[.?*+^$[\]\\(){}|-]/g,nt=W(6020);Ae.lib={},Ae.lib.mdurl=W(7214),Ae.lib.ucmicro=W(9315),Ae.assign=function j(Ge){var yt=Array.prototype.slice.call(arguments,1);return yt.forEach(function(mt){if(mt){if("object"!=typeof mt)throw new TypeError(mt+"must be object");Object.keys(mt).forEach(function(_t){Ge[_t]=mt[_t]})}}),Ge},Ae.isString=function L(Ge){return"[object String]"===function Y(Ge){return Object.prototype.toString.call(Ge)}(Ge)},Ae.has=U,Ae.unescapeMd=function ce(Ge){return Ge.indexOf("\\")<0?Ge:Ge.replace(ne,"$1")},Ae.unescapeAll=function Ce(Ge){return Ge.indexOf("\\")<0&&Ge.indexOf("&")<0?Ge:Ge.replace(se,function(yt,mt,_t){return mt||function z(Ge,yt){var mt=0;return U(K,yt)?K[yt]:35===yt.charCodeAt(0)&&ee.test(yt)&&R(mt="x"===yt[1].toLowerCase()?parseInt(yt.slice(2),16):parseInt(yt.slice(1),10))?q(mt):Ge}(yt,_t)})},Ae.isValidEntityCode=R,Ae.fromCodePoint=q,Ae.escapeHtml=function V(Ge){return Re.test(Ge)?Ge.replace(ie,N):Ge},Ae.arrayReplaceAt=function D(Ge,yt,mt){return[].concat(Ge.slice(0,yt),mt,Ge.slice(yt+1))},Ae.isSpace=function ke(Ge){switch(Ge){case 9:case 32:return!0}return!1},Ae.isWhiteSpace=function Pe(Ge){if(Ge>=8192&&Ge<=8202)return!0;switch(Ge){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},Ae.isMdAsciiPunct=function at(Ge){switch(Ge){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},Ae.isPunctChar=function Le(Ge){return nt.test(Ge)},Ae.escapeRE=function fe(Ge){return Ge.replace(J,"\\$&")},Ae.normalizeReference=function It(Ge){return Ge=Ge.trim().replace(/\s+/g," "),"\u1e7e"==="\u1e9e".toLowerCase()&&(Ge=Ge.replace(/\u1e9e/g,"\xdf")),Ge.toLowerCase().toUpperCase()}},8198:(Ve,Ae,W)=>{"use strict";Ae.parseLinkLabel=W(9605),Ae.parseLinkDestination=W(4072),Ae.parseLinkTitle=W(4658)},4072:(Ve,Ae,W)=>{"use strict";var Y=W(3332).unescapeAll;Ve.exports=function(G,U,j){var D,R,ne=U,te={ok:!1,pos:0,lines:0,str:""};if(60===G.charCodeAt(U)){for(U++;U<j;){if(10===(D=G.charCodeAt(U))||60===D)return te;if(62===D)return te.pos=U+1,te.str=Y(G.slice(ne+1,U)),te.ok=!0,te;92===D&&U+1<j?U+=2:U++}return te}for(R=0;U<j&&!(32===(D=G.charCodeAt(U))||D<32||127===D);)if(92===D&&U+1<j){if(32===G.charCodeAt(U+1))break;U+=2}else{if(40===D&&++R>32)return te;if(41===D){if(0===R)break;R--}U++}return ne===U||0!==R||(te.str=Y(G.slice(ne,U)),te.lines=0,te.pos=U,te.ok=!0),te}},9605:Ve=>{"use strict";Ve.exports=function(W,Y,L){var G,U,j,D,R=-1,q=W.posMax,ne=W.pos;for(W.pos=Y+1,G=1;W.pos<q;){if(93===(j=W.src.charCodeAt(W.pos))&&0==--G){U=!0;break}if(D=W.pos,W.md.inline.skipToken(W),91===j)if(D===W.pos-1)G++;else if(L)return W.pos=ne,-1}return U&&(R=W.pos),W.pos=ne,R}},4658:(Ve,Ae,W)=>{"use strict";var Y=W(3332).unescapeAll;Ve.exports=function(G,U,j){var D,R,q=0,ne=U,te={ok:!1,pos:0,lines:0,str:""};if(U>=j||34!==(R=G.charCodeAt(U))&&39!==R&&40!==R)return te;for(U++,40===R&&(R=41);U<j;){if((D=G.charCodeAt(U))===R)return te.pos=U+1,te.lines=q,te.str=Y(G.slice(ne+1,U)),te.ok=!0,te;if(40===D&&41===R)return te;10===D?q++:92===D&&U+1<j&&(U++,10===G.charCodeAt(U)&&q++),U++}return te}},6776:(Ve,Ae,W)=>{"use strict";var Y=W(3332),L=W(8198),G=W(7172),U=W(2080),j=W(4223),D=W(2900),R=W(3353),q=W(7214),ne=W(4879),te={default:W(4210),zero:W(7020),commonmark:W(8687)},se=/^(vbscript|javascript|file|data):/,ee=/^data:image\/(gif|png|jpeg|webp);/;function K(ie){var oe=ie.trim().toLowerCase();return!se.test(oe)||!!ee.test(oe)}var z=["http:","https:","mailto:"];function ce(ie){var oe=q.parse(ie,!0);if(oe.hostname&&(!oe.protocol||z.indexOf(oe.protocol)>=0))try{oe.hostname=ne.toASCII(oe.hostname)}catch{}return q.encode(q.format(oe))}function Ce(ie){var oe=q.parse(ie,!0);if(oe.hostname&&(!oe.protocol||z.indexOf(oe.protocol)>=0))try{oe.hostname=ne.toUnicode(oe.hostname)}catch{}return q.decode(q.format(oe),q.decode.defaultChars+"%")}function Re(ie,oe){if(!(this instanceof Re))return new Re(ie,oe);oe||Y.isString(ie)||(oe=ie||{},ie="default"),this.inline=new D,this.block=new j,this.core=new U,this.renderer=new G,this.linkify=new R,this.validateLink=K,this.normalizeLink=ce,this.normalizeLinkText=Ce,this.utils=Y,this.helpers=Y.assign({},L),this.options={},this.configure(ie),oe&&this.set(oe)}Re.prototype.set=function(ie){return Y.assign(this.options,ie),this},Re.prototype.configure=function(ie){var N,oe=this;if(Y.isString(ie)&&!(ie=te[N=ie]))throw new Error('Wrong `markdown-it` preset "'+N+'", check name');if(!ie)throw new Error("Wrong `markdown-it` preset, can't be empty");return ie.options&&oe.set(ie.options),ie.components&&Object.keys(ie.components).forEach(function(V){ie.components[V].rules&&oe[V].ruler.enableOnly(ie.components[V].rules),ie.components[V].rules2&&oe[V].ruler2.enableOnly(ie.components[V].rules2)}),this},Re.prototype.enable=function(ie,oe){var N=[];Array.isArray(ie)||(ie=[ie]),["core","block","inline"].forEach(function(J){N=N.concat(this[J].ruler.enable(ie,!0))},this),N=N.concat(this.inline.ruler2.enable(ie,!0));var V=ie.filter(function(J){return N.indexOf(J)<0});if(V.length&&!oe)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+V);return this},Re.prototype.disable=function(ie,oe){var N=[];Array.isArray(ie)||(ie=[ie]),["core","block","inline"].forEach(function(J){N=N.concat(this[J].ruler.disable(ie,!0))},this),N=N.concat(this.inline.ruler2.disable(ie,!0));var V=ie.filter(function(J){return N.indexOf(J)<0});if(V.length&&!oe)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+V);return this},Re.prototype.use=function(ie){var oe=[this].concat(Array.prototype.slice.call(arguments,1));return ie.apply(ie,oe),this},Re.prototype.parse=function(ie,oe){if("string"!=typeof ie)throw new Error("Input data should be a String");var N=new this.core.State(ie,this,oe);return this.core.process(N),N.tokens},Re.prototype.render=function(ie,oe){return this.renderer.render(this.parse(ie,oe=oe||{}),this.options,oe)},Re.prototype.parseInline=function(ie,oe){var N=new this.core.State(ie,this,oe);return N.inlineMode=!0,this.core.process(N),N.tokens},Re.prototype.renderInline=function(ie,oe){return this.renderer.render(this.parseInline(ie,oe=oe||{}),this.options,oe)},Ve.exports=Re},4223:(Ve,Ae,W)=>{"use strict";var Y=W(1368),L=[["table",W(2281),["paragraph","reference"]],["code",W(6372)],["fence",W(7931),["paragraph","reference","blockquote","list"]],["blockquote",W(72),["paragraph","reference","blockquote","list"]],["hr",W(8570),["paragraph","reference","blockquote","list"]],["list",W(7827),["paragraph","reference","blockquote"]],["reference",W(5886)],["html_block",W(5134),["paragraph","reference","blockquote"]],["heading",W(3462),["paragraph","reference","blockquote"]],["lheading",W(5920)],["paragraph",W(851)]];function G(){this.ruler=new Y;for(var U=0;U<L.length;U++)this.ruler.push(L[U][0],L[U][1],{alt:(L[U][2]||[]).slice()})}G.prototype.tokenize=function(U,j,D){for(var q,ne=this.ruler.getRules(""),te=ne.length,se=j,ee=!1,K=U.md.options.maxNesting;se<D&&(U.line=se=U.skipEmptyLines(se),!(se>=D||U.sCount[se]<U.blkIndent));){if(U.level>=K){U.line=D;break}for(q=0;q<te&&!ne[q](U,se,D,!1);q++);U.tight=!ee,U.isEmpty(U.line-1)&&(ee=!0),(se=U.line)<D&&U.isEmpty(se)&&(ee=!0,se++,U.line=se)}},G.prototype.parse=function(U,j,D,R){var q;!U||(q=new this.State(U,j,D,R),this.tokenize(q,q.line,q.lineMax))},G.prototype.State=W(1845),Ve.exports=G},2080:(Ve,Ae,W)=>{"use strict";var Y=W(1368),L=[["normalize",W(7398)],["block",W(8905)],["inline",W(3591)],["linkify",W(9212)],["replacements",W(1982)],["smartquotes",W(8157)],["text_join",W(2245)]];function G(){this.ruler=new Y;for(var U=0;U<L.length;U++)this.ruler.push(L[U][0],L[U][1])}G.prototype.process=function(U){var j,D,R;for(j=0,D=(R=this.ruler.getRules("")).length;j<D;j++)R[j](U)},G.prototype.State=W(1076),Ve.exports=G},2900:(Ve,Ae,W)=>{"use strict";var Y=W(1368),L=[["text",W(1767)],["linkify",W(6234)],["newline",W(2921)],["escape",W(8763)],["backticks",W(415)],["strikethrough",W(8165).w],["emphasis",W(425).w],["link",W(7219)],["image",W(7936)],["autolink",W(6973)],["html_inline",W(3722)],["entity",W(3559)]],G=[["balance_pairs",W(9269)],["strikethrough",W(8165).g],["emphasis",W(425).g],["fragments_join",W(5767)]];function U(){var j;for(this.ruler=new Y,j=0;j<L.length;j++)this.ruler.push(L[j][0],L[j][1]);for(this.ruler2=new Y,j=0;j<G.length;j++)this.ruler2.push(G[j][0],G[j][1])}U.prototype.skipToken=function(j){var D,R,q=j.pos,ne=this.ruler.getRules(""),te=ne.length,se=j.md.options.maxNesting,ee=j.cache;if(typeof ee[q]<"u")j.pos=ee[q];else{if(j.level<se)for(R=0;R<te&&(j.level++,D=ne[R](j,!0),j.level--,!D);R++);else j.pos=j.posMax;D||j.pos++,ee[q]=j.pos}},U.prototype.tokenize=function(j){for(var D,R,q=this.ruler.getRules(""),ne=q.length,te=j.posMax,se=j.md.options.maxNesting;j.pos<te;){if(j.level<se)for(R=0;R<ne&&!(D=q[R](j,!1));R++);if(D){if(j.pos>=te)break}else j.pending+=j.src[j.pos++]}j.pending&&j.pushPending()},U.prototype.parse=function(j,D,R,q){var ne,te,se,ee=new this.State(j,D,R,q);for(this.tokenize(ee),se=(te=this.ruler2.getRules("")).length,ne=0;ne<se;ne++)te[ne](ee)},U.prototype.State=W(630),Ve.exports=U},8687:Ve=>{"use strict";Ve.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},4210:Ve=>{"use strict";Ve.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},7020:Ve=>{"use strict";Ve.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},7172:(Ve,Ae,W)=>{"use strict";var Y=W(3332).assign,L=W(3332).unescapeAll,G=W(3332).escapeHtml,U={};function j(){this.rules=Y({},U)}U.code_inline=function(D,R,q,ne,te){return"<code"+te.renderAttrs(D[R])+">"+G(D[R].content)+"</code>"},U.code_block=function(D,R,q,ne,te){return"<pre"+te.renderAttrs(D[R])+"><code>"+G(D[R].content)+"</code></pre>\n"},U.fence=function(D,R,q,ne,te){var ce,Ce,Re,ie,se=D[R],ee=se.info?L(se.info).trim():"",K="",z="";return ee&&(K=(Re=ee.split(/(\s+)/g))[0],z=Re.slice(2).join("")),0===(ce=q.highlight&&q.highlight(se.content,K,z)||G(se.content)).indexOf("<pre")?ce+"\n":ee?(Ce=se.attrIndex("class"),ie=se.attrs?se.attrs.slice():[],Ce<0?ie.push(["class",q.langPrefix+K]):(ie[Ce]=ie[Ce].slice(),ie[Ce][1]+=" "+q.langPrefix+K),"<pre><code"+te.renderAttrs({attrs:ie})+">"+ce+"</code></pre>\n"):"<pre><code"+te.renderAttrs(se)+">"+ce+"</code></pre>\n"},U.image=function(D,R,q,ne,te){var se=D[R];return se.attrs[se.attrIndex("alt")][1]=te.renderInlineAsText(se.children,q,ne),te.renderToken(D,R,q)},U.hardbreak=function(D,R,q){return q.xhtmlOut?"<br />\n":"<br>\n"},U.softbreak=function(D,R,q){return q.breaks?q.xhtmlOut?"<br />\n":"<br>\n":"\n"},U.text=function(D,R){return G(D[R].content)},U.html_block=function(D,R){return D[R].content},U.html_inline=function(D,R){return D[R].content},j.prototype.renderAttrs=function(R){var q,ne,te;if(!R.attrs)return"";for(te="",q=0,ne=R.attrs.length;q<ne;q++)te+=" "+G(R.attrs[q][0])+'="'+G(R.attrs[q][1])+'"';return te},j.prototype.renderToken=function(R,q,ne){var te,se="",ee=!1,K=R[q];return K.hidden?"":(K.block&&-1!==K.nesting&&q&&R[q-1].hidden&&(se+="\n"),se+=(-1===K.nesting?"</":"<")+K.tag,se+=this.renderAttrs(K),0===K.nesting&&ne.xhtmlOut&&(se+=" /"),K.block&&(ee=!0,1===K.nesting&&q+1<R.length&&("inline"===(te=R[q+1]).type||te.hidden||-1===te.nesting&&te.tag===K.tag)&&(ee=!1)),se+=ee?">\n":">")},j.prototype.renderInline=function(D,R,q){for(var ne,te="",se=this.rules,ee=0,K=D.length;ee<K;ee++)te+=typeof se[ne=D[ee].type]<"u"?se[ne](D,ee,R,q,this):this.renderToken(D,ee,R);return te},j.prototype.renderInlineAsText=function(D,R,q){for(var ne="",te=0,se=D.length;te<se;te++)"text"===D[te].type?ne+=D[te].content:"image"===D[te].type?ne+=this.renderInlineAsText(D[te].children,R,q):"softbreak"===D[te].type&&(ne+="\n");return ne},j.prototype.render=function(D,R,q){var ne,te,se,ee="",K=this.rules;for(ne=0,te=D.length;ne<te;ne++)ee+="inline"===(se=D[ne].type)?this.renderInline(D[ne].children,R,q):typeof K[se]<"u"?K[D[ne].type](D,ne,R,q,this):this.renderToken(D,ne,R,q);return ee},Ve.exports=j},1368:Ve=>{"use strict";function Ae(){this.__rules__=[],this.__cache__=null}Ae.prototype.__find__=function(W){for(var Y=0;Y<this.__rules__.length;Y++)if(this.__rules__[Y].name===W)return Y;return-1},Ae.prototype.__compile__=function(){var W=this,Y=[""];W.__rules__.forEach(function(L){!L.enabled||L.alt.forEach(function(G){Y.indexOf(G)<0&&Y.push(G)})}),W.__cache__={},Y.forEach(function(L){W.__cache__[L]=[],W.__rules__.forEach(function(G){!G.enabled||L&&G.alt.indexOf(L)<0||W.__cache__[L].push(G.fn)})})},Ae.prototype.at=function(W,Y,L){var G=this.__find__(W),U=L||{};if(-1===G)throw new Error("Parser rule not found: "+W);this.__rules__[G].fn=Y,this.__rules__[G].alt=U.alt||[],this.__cache__=null},Ae.prototype.before=function(W,Y,L,G){var U=this.__find__(W),j=G||{};if(-1===U)throw new Error("Parser rule not found: "+W);this.__rules__.splice(U,0,{name:Y,enabled:!0,fn:L,alt:j.alt||[]}),this.__cache__=null},Ae.prototype.after=function(W,Y,L,G){var U=this.__find__(W),j=G||{};if(-1===U)throw new Error("Parser rule not found: "+W);this.__rules__.splice(U+1,0,{name:Y,enabled:!0,fn:L,alt:j.alt||[]}),this.__cache__=null},Ae.prototype.push=function(W,Y,L){this.__rules__.push({name:W,enabled:!0,fn:Y,alt:(L||{}).alt||[]}),this.__cache__=null},Ae.prototype.enable=function(W,Y){Array.isArray(W)||(W=[W]);var L=[];return W.forEach(function(G){var U=this.__find__(G);if(U<0){if(Y)return;throw new Error("Rules manager: invalid rule name "+G)}this.__rules__[U].enabled=!0,L.push(G)},this),this.__cache__=null,L},Ae.prototype.enableOnly=function(W,Y){Array.isArray(W)||(W=[W]),this.__rules__.forEach(function(L){L.enabled=!1}),this.enable(W,Y)},Ae.prototype.disable=function(W,Y){Array.isArray(W)||(W=[W]);var L=[];return W.forEach(function(G){var U=this.__find__(G);if(U<0){if(Y)return;throw new Error("Rules manager: invalid rule name "+G)}this.__rules__[U].enabled=!1,L.push(G)},this),this.__cache__=null,L},Ae.prototype.getRules=function(W){return null===this.__cache__&&this.__compile__(),this.__cache__[W]||[]},Ve.exports=Ae},72:(Ve,Ae,W)=>{"use strict";var Y=W(3332).isSpace;Ve.exports=function(G,U,j,D){var R,q,ne,te,se,ee,K,z,ce,Ce,Re,ie,oe,N,V,J,fe,ke,Pe,nt,Le=G.lineMax,at=G.bMarks[U]+G.tShift[U],It=G.eMarks[U];if(G.sCount[U]-G.blkIndent>=4||62!==G.src.charCodeAt(at++))return!1;if(D)return!0;for(te=ce=G.sCount[U]+1,32===G.src.charCodeAt(at)?(at++,te++,ce++,R=!1,J=!0):9===G.src.charCodeAt(at)?(J=!0,(G.bsCount[U]+ce)%4==3?(at++,te++,ce++,R=!1):R=!0):J=!1,Ce=[G.bMarks[U]],G.bMarks[U]=at;at<It&&(q=G.src.charCodeAt(at),Y(q));)9===q?ce+=4-(ce+G.bsCount[U]+(R?1:0))%4:ce++,at++;for(Re=[G.bsCount[U]],G.bsCount[U]=G.sCount[U]+1+(J?1:0),ee=at>=It,N=[G.sCount[U]],G.sCount[U]=ce-te,V=[G.tShift[U]],G.tShift[U]=at-G.bMarks[U],ke=G.md.block.ruler.getRules("blockquote"),oe=G.parentType,G.parentType="blockquote",z=U+1;z<j&&(nt=G.sCount[z]<G.blkIndent,!((at=G.bMarks[z]+G.tShift[z])>=(It=G.eMarks[z])));z++)if(62!==G.src.charCodeAt(at++)||nt){if(ee)break;for(fe=!1,ne=0,se=ke.length;ne<se;ne++)if(ke[ne](G,z,j,!0)){fe=!0;break}if(fe){G.lineMax=z,0!==G.blkIndent&&(Ce.push(G.bMarks[z]),Re.push(G.bsCount[z]),V.push(G.tShift[z]),N.push(G.sCount[z]),G.sCount[z]-=G.blkIndent);break}Ce.push(G.bMarks[z]),Re.push(G.bsCount[z]),V.push(G.tShift[z]),N.push(G.sCount[z]),G.sCount[z]=-1}else{for(te=ce=G.sCount[z]+1,32===G.src.charCodeAt(at)?(at++,te++,ce++,R=!1,J=!0):9===G.src.charCodeAt(at)?(J=!0,(G.bsCount[z]+ce)%4==3?(at++,te++,ce++,R=!1):R=!0):J=!1,Ce.push(G.bMarks[z]),G.bMarks[z]=at;at<It&&(q=G.src.charCodeAt(at),Y(q));)9===q?ce+=4-(ce+G.bsCount[z]+(R?1:0))%4:ce++,at++;ee=at>=It,Re.push(G.bsCount[z]),G.bsCount[z]=G.sCount[z]+1+(J?1:0),N.push(G.sCount[z]),G.sCount[z]=ce-te,V.push(G.tShift[z]),G.tShift[z]=at-G.bMarks[z]}for(ie=G.blkIndent,G.blkIndent=0,(Pe=G.push("blockquote_open","blockquote",1)).markup=">",Pe.map=K=[U,0],G.md.block.tokenize(G,U,z),(Pe=G.push("blockquote_close","blockquote",-1)).markup=">",G.lineMax=Le,G.parentType=oe,K[1]=G.line,ne=0;ne<V.length;ne++)G.bMarks[ne+U]=Ce[ne],G.tShift[ne+U]=V[ne],G.sCount[ne+U]=N[ne],G.bsCount[ne+U]=Re[ne];return G.blkIndent=ie,!0}},6372:Ve=>{"use strict";Ve.exports=function(W,Y,L){var G,U,j;if(W.sCount[Y]-W.blkIndent<4)return!1;for(U=G=Y+1;G<L;)if(W.isEmpty(G))G++;else{if(!(W.sCount[G]-W.blkIndent>=4))break;U=++G}return W.line=U,(j=W.push("code_block","code",0)).content=W.getLines(Y,U,4+W.blkIndent,!1)+"\n",j.map=[Y,W.line],!0}},7931:Ve=>{"use strict";Ve.exports=function(W,Y,L,G){var U,j,D,R,q,ne,te,se=!1,ee=W.bMarks[Y]+W.tShift[Y],K=W.eMarks[Y];if(W.sCount[Y]-W.blkIndent>=4||ee+3>K||126!==(U=W.src.charCodeAt(ee))&&96!==U||(q=ee,(j=(ee=W.skipChars(ee,U))-q)<3)||(te=W.src.slice(q,ee),D=W.src.slice(ee,K),96===U&&D.indexOf(String.fromCharCode(U))>=0))return!1;if(G)return!0;for(R=Y;!(++R>=L||(ee=q=W.bMarks[R]+W.tShift[R],K=W.eMarks[R],ee<K&&W.sCount[R]<W.blkIndent));)if(!(W.src.charCodeAt(ee)!==U||W.sCount[R]-W.blkIndent>=4||(ee=W.skipChars(ee,U),ee-q<j||(ee=W.skipSpaces(ee),ee<K)))){se=!0;break}return j=W.sCount[Y],W.line=R+(se?1:0),(ne=W.push("fence","code",0)).info=D,ne.content=W.getLines(Y+1,R,j,!0),ne.markup=te,ne.map=[Y,W.line],!0}},3462:(Ve,Ae,W)=>{"use strict";var Y=W(3332).isSpace;Ve.exports=function(G,U,j,D){var R,q,ne,te,se=G.bMarks[U]+G.tShift[U],ee=G.eMarks[U];if(G.sCount[U]-G.blkIndent>=4||35!==(R=G.src.charCodeAt(se))||se>=ee)return!1;for(q=1,R=G.src.charCodeAt(++se);35===R&&se<ee&&q<=6;)q++,R=G.src.charCodeAt(++se);return!(q>6||se<ee&&!Y(R)||(D||(ee=G.skipSpacesBack(ee,se),(ne=G.skipCharsBack(ee,35,se))>se&&Y(G.src.charCodeAt(ne-1))&&(ee=ne),G.line=U+1,(te=G.push("heading_open","h"+String(q),1)).markup="########".slice(0,q),te.map=[U,G.line],(te=G.push("inline","",0)).content=G.src.slice(se,ee).trim(),te.map=[U,G.line],te.children=[],(te=G.push("heading_close","h"+String(q),-1)).markup="########".slice(0,q)),0))}},8570:(Ve,Ae,W)=>{"use strict";var Y=W(3332).isSpace;Ve.exports=function(G,U,j,D){var R,q,ne,te,se=G.bMarks[U]+G.tShift[U],ee=G.eMarks[U];if(G.sCount[U]-G.blkIndent>=4||42!==(R=G.src.charCodeAt(se++))&&45!==R&&95!==R)return!1;for(q=1;se<ee;){if((ne=G.src.charCodeAt(se++))!==R&&!Y(ne))return!1;ne===R&&q++}return!(q<3||(D||(G.line=U+1,(te=G.push("hr","hr",0)).map=[U,G.line],te.markup=Array(q+1).join(String.fromCharCode(R))),0))}},5134:(Ve,Ae,W)=>{"use strict";var Y=W(2484),L=W(3266).q,G=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Y.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(L.source+"\\s*$"),/^$/,!1]];Ve.exports=function(j,D,R,q){var ne,te,se,ee,K=j.bMarks[D]+j.tShift[D],z=j.eMarks[D];if(j.sCount[D]-j.blkIndent>=4||!j.md.options.html||60!==j.src.charCodeAt(K))return!1;for(ee=j.src.slice(K,z),ne=0;ne<G.length&&!G[ne][0].test(ee);ne++);if(ne===G.length)return!1;if(q)return G[ne][2];if(te=D+1,!G[ne][1].test(ee))for(;te<R&&!(j.sCount[te]<j.blkIndent);te++)if(ee=j.src.slice(K=j.bMarks[te]+j.tShift[te],z=j.eMarks[te]),G[ne][1].test(ee)){0!==ee.length&&te++;break}return j.line=te,(se=j.push("html_block","",0)).map=[D,te],se.content=j.getLines(D,te,j.blkIndent,!0),!0}},5920:Ve=>{"use strict";Ve.exports=function(W,Y,L){var G,U,j,D,R,q,ne,te,se,K,ee=Y+1,z=W.md.block.ruler.getRules("paragraph");if(W.sCount[Y]-W.blkIndent>=4)return!1;for(K=W.parentType,W.parentType="paragraph";ee<L&&!W.isEmpty(ee);ee++)if(!(W.sCount[ee]-W.blkIndent>3)){if(W.sCount[ee]>=W.blkIndent&&(q=W.bMarks[ee]+W.tShift[ee])<(ne=W.eMarks[ee])&&(45===(se=W.src.charCodeAt(q))||61===se)&&(q=W.skipChars(q,se),(q=W.skipSpaces(q))>=ne)){te=61===se?1:2;break}if(!(W.sCount[ee]<0)){for(U=!1,j=0,D=z.length;j<D;j++)if(z[j](W,ee,L,!0)){U=!0;break}if(U)break}}return!!te&&(G=W.getLines(Y,ee,W.blkIndent,!1).trim(),W.line=ee+1,(R=W.push("heading_open","h"+String(te),1)).markup=String.fromCharCode(se),R.map=[Y,W.line],(R=W.push("inline","",0)).content=G,R.map=[Y,W.line-1],R.children=[],(R=W.push("heading_close","h"+String(te),-1)).markup=String.fromCharCode(se),W.parentType=K,!0)}},7827:(Ve,Ae,W)=>{"use strict";var Y=W(3332).isSpace;function L(j,D){var R,q,ne,te;return q=j.bMarks[D]+j.tShift[D],ne=j.eMarks[D],42!==(R=j.src.charCodeAt(q++))&&45!==R&&43!==R||q<ne&&(te=j.src.charCodeAt(q),!Y(te))?-1:q}function G(j,D){var R,q=j.bMarks[D]+j.tShift[D],ne=q,te=j.eMarks[D];if(ne+1>=te||(R=j.src.charCodeAt(ne++))<48||R>57)return-1;for(;;){if(ne>=te)return-1;if(!((R=j.src.charCodeAt(ne++))>=48&&R<=57)){if(41===R||46===R)break;return-1}if(ne-q>=10)return-1}return ne<te&&(R=j.src.charCodeAt(ne),!Y(R))?-1:ne}Ve.exports=function(D,R,q,ne){var te,se,ee,K,z,ce,Ce,Re,ie,oe,N,V,J,fe,ke,Pe,nt,Le,at,It,Ge,yt,mt,_t,Fn,Ot,Pn,nn,Ze=!1,Ct=!0;if(D.sCount[R]-D.blkIndent>=4||D.listIndent>=0&&D.sCount[R]-D.listIndent>=4&&D.sCount[R]<D.blkIndent)return!1;if(ne&&"paragraph"===D.parentType&&D.sCount[R]>=D.blkIndent&&(Ze=!0),(mt=G(D,R))>=0){if(Ce=!0,Fn=D.bMarks[R]+D.tShift[R],J=Number(D.src.slice(Fn,mt-1)),Ze&&1!==J)return!1}else{if(!((mt=L(D,R))>=0))return!1;Ce=!1}if(Ze&&D.skipSpaces(mt)>=D.eMarks[R])return!1;if(V=D.src.charCodeAt(mt-1),ne)return!0;for(N=D.tokens.length,Ce?(nn=D.push("ordered_list_open","ol",1),1!==J&&(nn.attrs=[["start",J]])):nn=D.push("bullet_list_open","ul",1),nn.map=oe=[R,0],nn.markup=String.fromCharCode(V),ke=R,_t=!1,Pn=D.md.block.ruler.getRules("list"),Le=D.parentType,D.parentType="list";ke<q;){for(yt=mt,fe=D.eMarks[ke],ce=Pe=D.sCount[ke]+mt-(D.bMarks[R]+D.tShift[R]);yt<fe;){if(9===(te=D.src.charCodeAt(yt)))Pe+=4-(Pe+D.bsCount[ke])%4;else{if(32!==te)break;Pe++}yt++}if((z=(se=yt)>=fe?1:Pe-ce)>4&&(z=1),K=ce+z,(nn=D.push("list_item_open","li",1)).markup=String.fromCharCode(V),nn.map=Re=[R,0],Ce&&(nn.info=D.src.slice(Fn,mt-1)),Ge=D.tight,It=D.tShift[R],at=D.sCount[R],nt=D.listIndent,D.listIndent=D.blkIndent,D.blkIndent=K,D.tight=!0,D.tShift[R]=se-D.bMarks[R],D.sCount[R]=Pe,se>=fe&&D.isEmpty(R+1)?D.line=Math.min(D.line+2,q):D.md.block.tokenize(D,R,q,!0),(!D.tight||_t)&&(Ct=!1),_t=D.line-R>1&&D.isEmpty(D.line-1),D.blkIndent=D.listIndent,D.listIndent=nt,D.tShift[R]=It,D.sCount[R]=at,D.tight=Ge,(nn=D.push("list_item_close","li",-1)).markup=String.fromCharCode(V),ke=R=D.line,Re[1]=ke,se=D.bMarks[R],ke>=q||D.sCount[ke]<D.blkIndent||D.sCount[R]-D.blkIndent>=4)break;for(Ot=!1,ee=0,ie=Pn.length;ee<ie;ee++)if(Pn[ee](D,ke,q,!0)){Ot=!0;break}if(Ot)break;if(Ce){if((mt=G(D,ke))<0)break;Fn=D.bMarks[ke]+D.tShift[ke]}else if((mt=L(D,ke))<0)break;if(V!==D.src.charCodeAt(mt-1))break}return(nn=Ce?D.push("ordered_list_close","ol",-1):D.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(V),oe[1]=ke,D.line=ke,D.parentType=Le,Ct&&function U(j,D){var R,q,ne=j.level+2;for(R=D+2,q=j.tokens.length-2;R<q;R++)j.tokens[R].level===ne&&"paragraph_open"===j.tokens[R].type&&(j.tokens[R+2].hidden=!0,j.tokens[R].hidden=!0,R+=2)}(D,N),!0}},851:Ve=>{"use strict";Ve.exports=function(W,Y){var L,G,U,j,D,R,q=Y+1,ne=W.md.block.ruler.getRules("paragraph"),te=W.lineMax;for(R=W.parentType,W.parentType="paragraph";q<te&&!W.isEmpty(q);q++)if(!(W.sCount[q]-W.blkIndent>3||W.sCount[q]<0)){for(G=!1,U=0,j=ne.length;U<j;U++)if(ne[U](W,q,te,!0)){G=!0;break}if(G)break}return L=W.getLines(Y,q,W.blkIndent,!1).trim(),W.line=q,(D=W.push("paragraph_open","p",1)).map=[Y,W.line],(D=W.push("inline","",0)).content=L,D.map=[Y,W.line],D.children=[],D=W.push("paragraph_close","p",-1),W.parentType=R,!0}},5886:(Ve,Ae,W)=>{"use strict";var Y=W(3332).normalizeReference,L=W(3332).isSpace;Ve.exports=function(U,j,D,R){var q,ne,te,se,ee,K,z,ce,Ce,Re,ie,oe,N,V,J,fe,ke=0,Pe=U.bMarks[j]+U.tShift[j],nt=U.eMarks[j],Le=j+1;if(U.sCount[j]-U.blkIndent>=4||91!==U.src.charCodeAt(Pe))return!1;for(;++Pe<nt;)if(93===U.src.charCodeAt(Pe)&&92!==U.src.charCodeAt(Pe-1)){if(Pe+1===nt||58!==U.src.charCodeAt(Pe+1))return!1;break}for(se=U.lineMax,J=U.md.block.ruler.getRules("reference"),Re=U.parentType,U.parentType="reference";Le<se&&!U.isEmpty(Le);Le++)if(!(U.sCount[Le]-U.blkIndent>3||U.sCount[Le]<0)){for(V=!1,K=0,z=J.length;K<z;K++)if(J[K](U,Le,se,!0)){V=!0;break}if(V)break}for(nt=(N=U.getLines(j,Le,U.blkIndent,!1).trim()).length,Pe=1;Pe<nt;Pe++){if(91===(q=N.charCodeAt(Pe)))return!1;if(93===q){Ce=Pe;break}(10===q||92===q&&++Pe<nt&&10===N.charCodeAt(Pe))&&ke++}if(Ce<0||58!==N.charCodeAt(Ce+1))return!1;for(Pe=Ce+2;Pe<nt;Pe++)if(10===(q=N.charCodeAt(Pe)))ke++;else if(!L(q))break;if(!(ie=U.md.helpers.parseLinkDestination(N,Pe,nt)).ok||(ee=U.md.normalizeLink(ie.str),!U.md.validateLink(ee)))return!1;for(ne=Pe=ie.pos,te=ke+=ie.lines,oe=Pe;Pe<nt;Pe++)if(10===(q=N.charCodeAt(Pe)))ke++;else if(!L(q))break;for(ie=U.md.helpers.parseLinkTitle(N,Pe,nt),Pe<nt&&oe!==Pe&&ie.ok?(fe=ie.str,Pe=ie.pos,ke+=ie.lines):(fe="",Pe=ne,ke=te);Pe<nt&&(q=N.charCodeAt(Pe),L(q));)Pe++;if(Pe<nt&&10!==N.charCodeAt(Pe)&&fe)for(fe="",Pe=ne,ke=te;Pe<nt&&(q=N.charCodeAt(Pe),L(q));)Pe++;return!(Pe<nt&&10!==N.charCodeAt(Pe)||(ce=Y(N.slice(1,Ce)),!ce)||(R||(typeof U.env.references>"u"&&(U.env.references={}),typeof U.env.references[ce]>"u"&&(U.env.references[ce]={title:fe,href:ee}),U.parentType=Re,U.line=j+ke+1),0))}},1845:(Ve,Ae,W)=>{"use strict";var Y=W(6263),L=W(3332).isSpace;function G(U,j,D,R){var q,ne,te,se,ee,K,z,ce;for(this.src=U,this.md=j,this.env=D,this.tokens=R,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",ce=!1,te=se=K=z=0,ee=(ne=this.src).length;se<ee;se++){if(q=ne.charCodeAt(se),!ce){if(L(q)){K++,9===q?z+=4-z%4:z++;continue}ce=!0}(10===q||se===ee-1)&&(10!==q&&se++,this.bMarks.push(te),this.eMarks.push(se),this.tShift.push(K),this.sCount.push(z),this.bsCount.push(0),ce=!1,K=0,z=0,te=se+1)}this.bMarks.push(ne.length),this.eMarks.push(ne.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}G.prototype.push=function(U,j,D){var R=new Y(U,j,D);return R.block=!0,D<0&&this.level--,R.level=this.level,D>0&&this.level++,this.tokens.push(R),R},G.prototype.isEmpty=function(j){return this.bMarks[j]+this.tShift[j]>=this.eMarks[j]},G.prototype.skipEmptyLines=function(j){for(var D=this.lineMax;j<D&&!(this.bMarks[j]+this.tShift[j]<this.eMarks[j]);j++);return j},G.prototype.skipSpaces=function(j){for(var D,R=this.src.length;j<R&&(D=this.src.charCodeAt(j),L(D));j++);return j},G.prototype.skipSpacesBack=function(j,D){if(j<=D)return j;for(;j>D;)if(!L(this.src.charCodeAt(--j)))return j+1;return j},G.prototype.skipChars=function(j,D){for(var R=this.src.length;j<R&&this.src.charCodeAt(j)===D;j++);return j},G.prototype.skipCharsBack=function(j,D,R){if(j<=R)return j;for(;j>R;)if(D!==this.src.charCodeAt(--j))return j+1;return j},G.prototype.getLines=function(j,D,R,q){var ne,te,se,ee,K,z,ce,Ce=j;if(j>=D)return"";for(z=new Array(D-j),ne=0;Ce<D;Ce++,ne++){for(te=0,ce=ee=this.bMarks[Ce],K=Ce+1<D||q?this.eMarks[Ce]+1:this.eMarks[Ce];ee<K&&te<R;){if(se=this.src.charCodeAt(ee),L(se))9===se?te+=4-(te+this.bsCount[Ce])%4:te++;else{if(!(ee-ce<this.tShift[Ce]))break;te++}ee++}z[ne]=te>R?new Array(te-R+1).join(" ")+this.src.slice(ee,K):this.src.slice(ee,K)}return z.join("")},G.prototype.Token=Y,Ve.exports=G},2281:(Ve,Ae,W)=>{"use strict";var Y=W(3332).isSpace;function L(U,j){return U.src.slice(U.bMarks[j]+U.tShift[j],U.eMarks[j])}function G(U){var q,j=[],D=0,R=U.length,ne=!1,te=0,se="";for(q=U.charCodeAt(D);D<R;)124===q&&(ne?(se+=U.substring(te,D-1),te=D):(j.push(se+U.substring(te,D)),se="",te=D+1)),ne=92===q,D++,q=U.charCodeAt(D);return j.push(se+U.substring(te)),j}Ve.exports=function(j,D,R,q){var ne,te,se,ee,K,z,ce,Ce,Re,ie,oe,N,V,J,fe,ke,Pe,nt;if(D+2>R||j.sCount[z=D+1]<j.blkIndent||j.sCount[z]-j.blkIndent>=4||(se=j.bMarks[z]+j.tShift[z])>=j.eMarks[z]||124!==(Pe=j.src.charCodeAt(se++))&&45!==Pe&&58!==Pe||se>=j.eMarks[z]||124!==(nt=j.src.charCodeAt(se++))&&45!==nt&&58!==nt&&!Y(nt)||45===Pe&&Y(nt))return!1;for(;se<j.eMarks[z];){if(124!==(ne=j.src.charCodeAt(se))&&45!==ne&&58!==ne&&!Y(ne))return!1;se++}for(ce=(te=L(j,D+1)).split("|"),ie=[],ee=0;ee<ce.length;ee++){if(!(oe=ce[ee].trim())){if(0===ee||ee===ce.length-1)continue;return!1}if(!/^:?-+:?$/.test(oe))return!1;58===oe.charCodeAt(oe.length-1)?ie.push(58===oe.charCodeAt(0)?"center":"right"):58===oe.charCodeAt(0)?ie.push("left"):ie.push("")}if(-1===(te=L(j,D).trim()).indexOf("|")||j.sCount[D]-j.blkIndent>=4||((ce=G(te)).length&&""===ce[0]&&ce.shift(),ce.length&&""===ce[ce.length-1]&&ce.pop(),0===(Ce=ce.length)||Ce!==ie.length))return!1;if(q)return!0;for(J=j.parentType,j.parentType="table",ke=j.md.block.ruler.getRules("blockquote"),(Re=j.push("table_open","table",1)).map=N=[D,0],(Re=j.push("thead_open","thead",1)).map=[D,D+1],(Re=j.push("tr_open","tr",1)).map=[D,D+1],ee=0;ee<ce.length;ee++)Re=j.push("th_open","th",1),ie[ee]&&(Re.attrs=[["style","text-align:"+ie[ee]]]),(Re=j.push("inline","",0)).content=ce[ee].trim(),Re.children=[],Re=j.push("th_close","th",-1);for(Re=j.push("tr_close","tr",-1),Re=j.push("thead_close","thead",-1),z=D+2;z<R&&!(j.sCount[z]<j.blkIndent);z++){for(fe=!1,ee=0,K=ke.length;ee<K;ee++)if(ke[ee](j,z,R,!0)){fe=!0;break}if(fe||!(te=L(j,z).trim())||j.sCount[z]-j.blkIndent>=4)break;for((ce=G(te)).length&&""===ce[0]&&ce.shift(),ce.length&&""===ce[ce.length-1]&&ce.pop(),z===D+2&&((Re=j.push("tbody_open","tbody",1)).map=V=[D+2,0]),(Re=j.push("tr_open","tr",1)).map=[z,z+1],ee=0;ee<Ce;ee++)Re=j.push("td_open","td",1),ie[ee]&&(Re.attrs=[["style","text-align:"+ie[ee]]]),(Re=j.push("inline","",0)).content=ce[ee]?ce[ee].trim():"",Re.children=[],Re=j.push("td_close","td",-1);Re=j.push("tr_close","tr",-1)}return V&&(Re=j.push("tbody_close","tbody",-1),V[1]=z),Re=j.push("table_close","table",-1),N[1]=z,j.parentType=J,j.line=z,!0}},8905:Ve=>{"use strict";Ve.exports=function(W){var Y;W.inlineMode?((Y=new W.Token("inline","",0)).content=W.src,Y.map=[0,1],Y.children=[],W.tokens.push(Y)):W.md.block.parse(W.src,W.md,W.env,W.tokens)}},3591:Ve=>{"use strict";Ve.exports=function(W){var L,G,U,Y=W.tokens;for(G=0,U=Y.length;G<U;G++)"inline"===(L=Y[G]).type&&W.md.inline.parse(L.content,W.md,W.env,L.children)}},9212:(Ve,Ae,W)=>{"use strict";var Y=W(3332).arrayReplaceAt;Ve.exports=function(j){var D,R,q,ne,te,se,ee,K,z,ce,Ce,Re,ie,N,V,fe,J=j.tokens;if(j.md.options.linkify)for(R=0,q=J.length;R<q;R++)if("inline"===J[R].type&&j.md.linkify.pretest(J[R].content))for(ie=0,D=(ne=J[R].children).length-1;D>=0;D--)if("link_close"!==(se=ne[D]).type){if("html_inline"===se.type&&(/^<a[>\s]/i.test(se.content)&&ie>0&&ie--,/^<\/a\s*>/i.test(se.content)&&ie++),!(ie>0)&&"text"===se.type&&j.md.linkify.test(se.content)){for(fe=j.md.linkify.match(z=se.content),ee=[],Re=se.level,Ce=0,fe.length>0&&0===fe[0].index&&D>0&&"text_special"===ne[D-1].type&&(fe=fe.slice(1)),K=0;K<fe.length;K++)N=j.md.normalizeLink(fe[K].url),j.md.validateLink(N)&&(V=fe[K].text,V=fe[K].schema?"mailto:"!==fe[K].schema||/^mailto:/i.test(V)?j.md.normalizeLinkText(V):j.md.normalizeLinkText("mailto:"+V).replace(/^mailto:/,""):j.md.normalizeLinkText("http://"+V).replace(/^http:\/\//,""),(ce=fe[K].index)>Ce&&((te=new j.Token("text","",0)).content=z.slice(Ce,ce),te.level=Re,ee.push(te)),(te=new j.Token("link_open","a",1)).attrs=[["href",N]],te.level=Re++,te.markup="linkify",te.info="auto",ee.push(te),(te=new j.Token("text","",0)).content=V,te.level=Re,ee.push(te),(te=new j.Token("link_close","a",-1)).level=--Re,te.markup="linkify",te.info="auto",ee.push(te),Ce=fe[K].lastIndex);Ce<z.length&&((te=new j.Token("text","",0)).content=z.slice(Ce),te.level=Re,ee.push(te)),J[R].children=ne=Y(ne,D,ee)}}else for(D--;ne[D].level!==se.level&&"link_open"!==ne[D].type;)D--}},7398:Ve=>{"use strict";var Ae=/\r\n?|\n/g,W=/\0/g;Ve.exports=function(L){var G;G=(G=L.src.replace(Ae,"\n")).replace(W,"\ufffd"),L.src=G}},1982:Ve=>{"use strict";var Ae=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,W=/\((c|tm|r)\)/i,Y=/\((c|tm|r)\)/gi,L={c:"\xa9",r:"\xae",tm:"\u2122"};function G(D,R){return L[R.toLowerCase()]}function U(D){var R,q,ne=0;for(R=D.length-1;R>=0;R--)"text"===(q=D[R]).type&&!ne&&(q.content=q.content.replace(Y,G)),"link_open"===q.type&&"auto"===q.info&&ne--,"link_close"===q.type&&"auto"===q.info&&ne++}function j(D){var R,q,ne=0;for(R=D.length-1;R>=0;R--)"text"===(q=D[R]).type&&!ne&&Ae.test(q.content)&&(q.content=q.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1\u2014").replace(/(^|\s)--(?=\s|$)/gm,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1\u2013")),"link_open"===q.type&&"auto"===q.info&&ne--,"link_close"===q.type&&"auto"===q.info&&ne++}Ve.exports=function(R){var q;if(R.md.options.typographer)for(q=R.tokens.length-1;q>=0;q--)"inline"===R.tokens[q].type&&(W.test(R.tokens[q].content)&&U(R.tokens[q].children),Ae.test(R.tokens[q].content)&&j(R.tokens[q].children))}},8157:(Ve,Ae,W)=>{"use strict";var Y=W(3332).isWhiteSpace,L=W(3332).isPunctChar,G=W(3332).isMdAsciiPunct,U=/['"]/,j=/['"]/g;function R(ne,te,se){return ne.slice(0,te)+se+ne.slice(te+1)}function q(ne,te){var se,ee,K,z,ce,Ce,Re,ie,oe,N,V,J,fe,ke,Pe,nt,Le,at,It,Ge,yt;for(It=[],se=0;se<ne.length;se++){for(ee=ne[se],Re=ne[se].level,Le=It.length-1;Le>=0&&!(It[Le].level<=Re);Le--);if(It.length=Le+1,"text"===ee.type){ce=0,Ce=(K=ee.content).length;e:for(;ce<Ce&&(j.lastIndex=ce,z=j.exec(K),z);){if(Pe=nt=!0,ce=z.index+1,at="'"===z[0],oe=32,z.index-1>=0)oe=K.charCodeAt(z.index-1);else for(Le=se-1;Le>=0&&"softbreak"!==ne[Le].type&&"hardbreak"!==ne[Le].type;Le--)if(ne[Le].content){oe=ne[Le].content.charCodeAt(ne[Le].content.length-1);break}if(N=32,ce<Ce)N=K.charCodeAt(ce);else for(Le=se+1;Le<ne.length&&"softbreak"!==ne[Le].type&&"hardbreak"!==ne[Le].type;Le++)if(ne[Le].content){N=ne[Le].content.charCodeAt(0);break}if(V=G(oe)||L(String.fromCharCode(oe)),J=G(N)||L(String.fromCharCode(N)),fe=Y(oe),(ke=Y(N))?Pe=!1:J&&(fe||V||(Pe=!1)),fe?nt=!1:V&&(ke||J||(nt=!1)),34===N&&'"'===z[0]&&oe>=48&&oe<=57&&(nt=Pe=!1),Pe&&nt&&(Pe=V,nt=J),Pe||nt){if(nt)for(Le=It.length-1;Le>=0&&(ie=It[Le],!(It[Le].level<Re));Le--)if(ie.single===at&&It[Le].level===Re){ie=It[Le],at?(Ge=te.md.options.quotes[2],yt=te.md.options.quotes[3]):(Ge=te.md.options.quotes[0],yt=te.md.options.quotes[1]),ee.content=R(ee.content,z.index,yt),ne[ie.token].content=R(ne[ie.token].content,ie.pos,Ge),ce+=yt.length-1,ie.token===se&&(ce+=Ge.length-1),Ce=(K=ee.content).length,It.length=Le;continue e}Pe?It.push({token:se,pos:z.index,single:at,level:Re}):nt&&at&&(ee.content=R(ee.content,z.index,"\u2019"))}else at&&(ee.content=R(ee.content,z.index,"\u2019"))}}}}Ve.exports=function(te){var se;if(te.md.options.typographer)for(se=te.tokens.length-1;se>=0;se--)"inline"!==te.tokens[se].type||!U.test(te.tokens[se].content)||q(te.tokens[se].children,te)}},1076:(Ve,Ae,W)=>{"use strict";var Y=W(6263);function L(G,U,j){this.src=G,this.env=j,this.tokens=[],this.inlineMode=!1,this.md=U}L.prototype.Token=Y,Ve.exports=L},2245:Ve=>{"use strict";Ve.exports=function(W){var Y,L,G,U,j,D,R=W.tokens;for(Y=0,L=R.length;Y<L;Y++)if("inline"===R[Y].type){for(j=(G=R[Y].children).length,U=0;U<j;U++)"text_special"===G[U].type&&(G[U].type="text");for(U=D=0;U<j;U++)"text"===G[U].type&&U+1<j&&"text"===G[U+1].type?G[U+1].content=G[U].content+G[U+1].content:(U!==D&&(G[D]=G[U]),D++);U!==D&&(G.length=D)}}},6973:Ve=>{"use strict";var Ae=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,W=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;Ve.exports=function(L,G){var U,j,D,R,q,ne,te=L.pos;if(60!==L.src.charCodeAt(te))return!1;for(q=L.pos,ne=L.posMax;;){if(++te>=ne||60===(R=L.src.charCodeAt(te)))return!1;if(62===R)break}return U=L.src.slice(q+1,te),W.test(U)?(j=L.md.normalizeLink(U),!!L.md.validateLink(j)&&(G||((D=L.push("link_open","a",1)).attrs=[["href",j]],D.markup="autolink",D.info="auto",(D=L.push("text","",0)).content=L.md.normalizeLinkText(U),(D=L.push("link_close","a",-1)).markup="autolink",D.info="auto"),L.pos+=U.length+2,!0)):!!Ae.test(U)&&(j=L.md.normalizeLink("mailto:"+U),!!L.md.validateLink(j)&&(G||((D=L.push("link_open","a",1)).attrs=[["href",j]],D.markup="autolink",D.info="auto",(D=L.push("text","",0)).content=L.md.normalizeLinkText(U),(D=L.push("link_close","a",-1)).markup="autolink",D.info="auto"),L.pos+=U.length+2,!0))}},415:Ve=>{"use strict";Ve.exports=function(W,Y){var L,G,U,j,D,R,q,ne,te=W.pos;if(96!==W.src.charCodeAt(te))return!1;for(L=te,te++,G=W.posMax;te<G&&96===W.src.charCodeAt(te);)te++;if(q=(U=W.src.slice(L,te)).length,W.backticksScanned&&(W.backticks[q]||0)<=L)return Y||(W.pending+=U),W.pos+=q,!0;for(D=R=te;-1!==(D=W.src.indexOf("`",R));){for(R=D+1;R<G&&96===W.src.charCodeAt(R);)R++;if((ne=R-D)===q)return Y||((j=W.push("code_inline","code",0)).markup=U,j.content=W.src.slice(te,D).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),W.pos=R,!0;W.backticks[ne]=D}return W.backticksScanned=!0,Y||(W.pending+=U),W.pos+=q,!0}},9269:Ve=>{"use strict";function Ae(W,Y){var L,G,U,j,D,R,q,ne,te={},se=Y.length;if(se){var ee=0,K=-2,z=[];for(L=0;L<se;L++)if(U=Y[L],z.push(0),(Y[ee].marker!==U.marker||K!==U.token-1)&&(ee=L),K=U.token,U.length=U.length||0,U.close){for(te.hasOwnProperty(U.marker)||(te[U.marker]=[-1,-1,-1,-1,-1,-1]),D=te[U.marker][(U.open?3:0)+U.length%3],R=G=ee-z[ee]-1;G>D;G-=z[G]+1)if((j=Y[G]).marker===U.marker&&j.open&&j.end<0&&(q=!1,(j.close||U.open)&&(j.length+U.length)%3==0&&(j.length%3!=0||U.length%3!=0)&&(q=!0),!q)){z[L]=L-G+(ne=G>0&&!Y[G-1].open?z[G-1]+1:0),z[G]=ne,U.open=!1,j.end=L,j.close=!1,R=-1,K=-2;break}-1!==R&&(te[U.marker][(U.open?3:0)+(U.length||0)%3]=R)}}}Ve.exports=function(Y){var L,G=Y.tokens_meta,U=Y.tokens_meta.length;for(Ae(0,Y.delimiters),L=0;L<U;L++)G[L]&&G[L].delimiters&&Ae(0,G[L].delimiters)}},425:Ve=>{"use strict";function Ae(W,Y){var L,G,U,j,D,R;for(L=Y.length-1;L>=0;L--)(95===(G=Y[L]).marker||42===G.marker)&&-1!==G.end&&(U=Y[G.end],R=L>0&&Y[L-1].end===G.end+1&&Y[L-1].marker===G.marker&&Y[L-1].token===G.token-1&&Y[G.end+1].token===U.token+1,D=String.fromCharCode(G.marker),(j=W.tokens[G.token]).type=R?"strong_open":"em_open",j.tag=R?"strong":"em",j.nesting=1,j.markup=R?D+D:D,j.content="",(j=W.tokens[U.token]).type=R?"strong_close":"em_close",j.tag=R?"strong":"em",j.nesting=-1,j.markup=R?D+D:D,j.content="",R&&(W.tokens[Y[L-1].token].content="",W.tokens[Y[G.end+1].token].content="",L--))}Ve.exports.w=function(Y,L){var G,U,R=Y.src.charCodeAt(Y.pos);if(L||95!==R&&42!==R)return!1;for(U=Y.scanDelims(Y.pos,42===R),G=0;G<U.length;G++)Y.push("text","",0).content=String.fromCharCode(R),Y.delimiters.push({marker:R,length:U.length,token:Y.tokens.length-1,end:-1,open:U.can_open,close:U.can_close});return Y.pos+=U.length,!0},Ve.exports.g=function(Y){var L,G=Y.tokens_meta,U=Y.tokens_meta.length;for(Ae(Y,Y.delimiters),L=0;L<U;L++)G[L]&&G[L].delimiters&&Ae(Y,G[L].delimiters)}},3559:(Ve,Ae,W)=>{"use strict";var Y=W(6798),L=W(3332).has,G=W(3332).isValidEntityCode,U=W(3332).fromCodePoint,j=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,D=/^&([a-z][a-z0-9]{1,31});/i;Ve.exports=function(q,ne){var se,ee,K,z=q.pos,ce=q.posMax;if(38!==q.src.charCodeAt(z)||z+1>=ce)return!1;if(35===q.src.charCodeAt(z+1)){if(ee=q.src.slice(z).match(j))return ne||(se="x"===ee[1][0].toLowerCase()?parseInt(ee[1].slice(1),16):parseInt(ee[1],10),(K=q.push("text_special","",0)).content=G(se)?U(se):U(65533),K.markup=ee[0],K.info="entity"),q.pos+=ee[0].length,!0}else if((ee=q.src.slice(z).match(D))&&L(Y,ee[1]))return ne||((K=q.push("text_special","",0)).content=Y[ee[1]],K.markup=ee[0],K.info="entity"),q.pos+=ee[0].length,!0;return!1}},8763:(Ve,Ae,W)=>{"use strict";for(var Y=W(3332).isSpace,L=[],G=0;G<256;G++)L.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(U){L[U.charCodeAt(0)]=1}),Ve.exports=function(j,D){var R,q,ne,te,se,ee=j.pos,K=j.posMax;if(92!==j.src.charCodeAt(ee)||++ee>=K)return!1;if(10===(R=j.src.charCodeAt(ee))){for(D||j.push("hardbreak","br",0),ee++;ee<K&&(R=j.src.charCodeAt(ee),Y(R));)ee++;return j.pos=ee,!0}return te=j.src[ee],R>=55296&&R<=56319&&ee+1<K&&(q=j.src.charCodeAt(ee+1))>=56320&&q<=57343&&(te+=j.src[ee+1],ee++),ne="\\"+te,D||((se=j.push("text_special","",0)).content=R<256&&0!==L[R]?te:ne,se.markup=ne,se.info="escape"),j.pos=ee+1,!0}},5767:Ve=>{"use strict";Ve.exports=function(W){var Y,L,G=0,U=W.tokens,j=W.tokens.length;for(Y=L=0;Y<j;Y++)U[Y].nesting<0&&G--,U[Y].level=G,U[Y].nesting>0&&G++,"text"===U[Y].type&&Y+1<j&&"text"===U[Y+1].type?U[Y+1].content=U[Y].content+U[Y+1].content:(Y!==L&&(U[L]=U[Y]),L++);Y!==L&&(U.length=L)}},3722:(Ve,Ae,W)=>{"use strict";var Y=W(3266).n;Ve.exports=function(D,R){var q,ne,te,se,ee=D.pos;return!(!D.md.options.html||(te=D.posMax,60!==D.src.charCodeAt(ee)||ee+2>=te)||(q=D.src.charCodeAt(ee+1),33!==q&&63!==q&&47!==q&&!function U(j){var D=32|j;return D>=97&&D<=122}(q))||(ne=D.src.slice(ee).match(Y),!ne)||(R||((se=D.push("html_inline","",0)).content=D.src.slice(ee,ee+ne[0].length),function L(j){return/^<a[>\s]/i.test(j)}(se.content)&&D.linkLevel++,function G(j){return/^<\/a\s*>/i.test(j)}(se.content)&&D.linkLevel--),D.pos+=ne[0].length,0))}},7936:(Ve,Ae,W)=>{"use strict";var Y=W(3332).normalizeReference,L=W(3332).isSpace;Ve.exports=function(U,j){var D,R,q,ne,te,se,ee,K,z,ce,Ce,Re,ie,oe="",N=U.pos,V=U.posMax;if(33!==U.src.charCodeAt(U.pos)||91!==U.src.charCodeAt(U.pos+1)||(se=U.pos+2,(te=U.md.helpers.parseLinkLabel(U,U.pos+1,!1))<0))return!1;if((ee=te+1)<V&&40===U.src.charCodeAt(ee)){for(ee++;ee<V&&(R=U.src.charCodeAt(ee),L(R)||10===R);ee++);if(ee>=V)return!1;for(ie=ee,(z=U.md.helpers.parseLinkDestination(U.src,ee,U.posMax)).ok&&(oe=U.md.normalizeLink(z.str),U.md.validateLink(oe)?ee=z.pos:oe=""),ie=ee;ee<V&&(R=U.src.charCodeAt(ee),L(R)||10===R);ee++);if(z=U.md.helpers.parseLinkTitle(U.src,ee,U.posMax),ee<V&&ie!==ee&&z.ok)for(ce=z.str,ee=z.pos;ee<V&&(R=U.src.charCodeAt(ee),L(R)||10===R);ee++);else ce="";if(ee>=V||41!==U.src.charCodeAt(ee))return U.pos=N,!1;ee++}else{if(typeof U.env.references>"u")return!1;if(ee<V&&91===U.src.charCodeAt(ee)?(ie=ee+1,(ee=U.md.helpers.parseLinkLabel(U,ee))>=0?ne=U.src.slice(ie,ee++):ee=te+1):ee=te+1,ne||(ne=U.src.slice(se,te)),!(K=U.env.references[Y(ne)]))return U.pos=N,!1;oe=K.href,ce=K.title}return j||(q=U.src.slice(se,te),U.md.inline.parse(q,U.md,U.env,Re=[]),(Ce=U.push("image","img",0)).attrs=D=[["src",oe],["alt",""]],Ce.children=Re,Ce.content=q,ce&&D.push(["title",ce])),U.pos=ee,U.posMax=V,!0}},7219:(Ve,Ae,W)=>{"use strict";var Y=W(3332).normalizeReference,L=W(3332).isSpace;Ve.exports=function(U,j){var D,R,q,ne,te,se,ee,K,ce="",Ce="",Re=U.pos,ie=U.posMax,oe=U.pos,N=!0;if(91!==U.src.charCodeAt(U.pos)||(te=U.pos+1,(ne=U.md.helpers.parseLinkLabel(U,U.pos,!0))<0))return!1;if((se=ne+1)<ie&&40===U.src.charCodeAt(se)){for(N=!1,se++;se<ie&&(R=U.src.charCodeAt(se),L(R)||10===R);se++);if(se>=ie)return!1;if(oe=se,(ee=U.md.helpers.parseLinkDestination(U.src,se,U.posMax)).ok){for(ce=U.md.normalizeLink(ee.str),U.md.validateLink(ce)?se=ee.pos:ce="",oe=se;se<ie&&(R=U.src.charCodeAt(se),L(R)||10===R);se++);if(ee=U.md.helpers.parseLinkTitle(U.src,se,U.posMax),se<ie&&oe!==se&&ee.ok)for(Ce=ee.str,se=ee.pos;se<ie&&(R=U.src.charCodeAt(se),L(R)||10===R);se++);}(se>=ie||41!==U.src.charCodeAt(se))&&(N=!0),se++}if(N){if(typeof U.env.references>"u")return!1;if(se<ie&&91===U.src.charCodeAt(se)?(oe=se+1,(se=U.md.helpers.parseLinkLabel(U,se))>=0?q=U.src.slice(oe,se++):se=ne+1):se=ne+1,q||(q=U.src.slice(te,ne)),!(K=U.env.references[Y(q)]))return U.pos=Re,!1;ce=K.href,Ce=K.title}return j||(U.pos=te,U.posMax=ne,U.push("link_open","a",1).attrs=D=[["href",ce]],Ce&&D.push(["title",Ce]),U.linkLevel++,U.md.inline.tokenize(U),U.linkLevel--,U.push("link_close","a",-1)),U.pos=se,U.posMax=ie,!0}},6234:Ve=>{"use strict";var Ae=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;Ve.exports=function(Y,L){var G,U,j,D,R,q,ne,te;return!(!Y.md.options.linkify||Y.linkLevel>0||(G=Y.pos,U=Y.posMax,G+3>U)||58!==Y.src.charCodeAt(G)||47!==Y.src.charCodeAt(G+1)||47!==Y.src.charCodeAt(G+2)||(j=Y.pending.match(Ae),!j)||(D=j[1],R=Y.md.linkify.matchAtStart(Y.src.slice(G-D.length)),!R)||(q=R.url,q=q.replace(/\*+$/,""),ne=Y.md.normalizeLink(q),!Y.md.validateLink(ne))||(L||(Y.pending=Y.pending.slice(0,-D.length),(te=Y.push("link_open","a",1)).attrs=[["href",ne]],te.markup="linkify",te.info="auto",(te=Y.push("text","",0)).content=Y.md.normalizeLinkText(q),(te=Y.push("link_close","a",-1)).markup="linkify",te.info="auto"),Y.pos+=q.length-D.length,0))}},2921:(Ve,Ae,W)=>{"use strict";var Y=W(3332).isSpace;Ve.exports=function(G,U){var j,D,R,q=G.pos;if(10!==G.src.charCodeAt(q))return!1;if(j=G.pending.length-1,D=G.posMax,!U)if(j>=0&&32===G.pending.charCodeAt(j))if(j>=1&&32===G.pending.charCodeAt(j-1)){for(R=j-1;R>=1&&32===G.pending.charCodeAt(R-1);)R--;G.pending=G.pending.slice(0,R),G.push("hardbreak","br",0)}else G.pending=G.pending.slice(0,-1),G.push("softbreak","br",0);else G.push("softbreak","br",0);for(q++;q<D&&Y(G.src.charCodeAt(q));)q++;return G.pos=q,!0}},630:(Ve,Ae,W)=>{"use strict";var Y=W(6263),L=W(3332).isWhiteSpace,G=W(3332).isPunctChar,U=W(3332).isMdAsciiPunct;function j(D,R,q,ne){this.src=D,this.env=q,this.md=R,this.tokens=ne,this.tokens_meta=Array(ne.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}j.prototype.pushPending=function(){var D=new Y("text","",0);return D.content=this.pending,D.level=this.pendingLevel,this.tokens.push(D),this.pending="",D},j.prototype.push=function(D,R,q){this.pending&&this.pushPending();var ne=new Y(D,R,q),te=null;return q<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),ne.level=this.level,q>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],te={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(ne),this.tokens_meta.push(te),ne},j.prototype.scanDelims=function(D,R){var ne,te,se,ee,K,z,ce,Ce,Re,q=D,ie=!0,oe=!0,N=this.posMax,V=this.src.charCodeAt(D);for(ne=D>0?this.src.charCodeAt(D-1):32;q<N&&this.src.charCodeAt(q)===V;)q++;return se=q-D,te=q<N?this.src.charCodeAt(q):32,ce=U(ne)||G(String.fromCharCode(ne)),Re=U(te)||G(String.fromCharCode(te)),z=L(ne),(Ce=L(te))?ie=!1:Re&&(z||ce||(ie=!1)),z?oe=!1:ce&&(Ce||Re||(oe=!1)),R?(ee=ie,K=oe):(ee=ie&&(!oe||ce),K=oe&&(!ie||Re)),{can_open:ee,can_close:K,length:se}},j.prototype.Token=Y,Ve.exports=j},8165:Ve=>{"use strict";function Ae(W,Y){var L,G,U,j,D,R=[],q=Y.length;for(L=0;L<q;L++)126===(U=Y[L]).marker&&-1!==U.end&&(j=Y[U.end],(D=W.tokens[U.token]).type="s_open",D.tag="s",D.nesting=1,D.markup="~~",D.content="",(D=W.tokens[j.token]).type="s_close",D.tag="s",D.nesting=-1,D.markup="~~",D.content="","text"===W.tokens[j.token-1].type&&"~"===W.tokens[j.token-1].content&&R.push(j.token-1));for(;R.length;){for(G=(L=R.pop())+1;G<W.tokens.length&&"s_close"===W.tokens[G].type;)G++;L!==--G&&(D=W.tokens[G],W.tokens[G]=W.tokens[L],W.tokens[L]=D)}}Ve.exports.w=function(Y,L){var G,U,D,R,ne=Y.src.charCodeAt(Y.pos);if(L||126!==ne||(D=(U=Y.scanDelims(Y.pos,!0)).length,R=String.fromCharCode(ne),D<2))return!1;for(D%2&&(Y.push("text","",0).content=R,D--),G=0;G<D;G+=2)Y.push("text","",0).content=R+R,Y.delimiters.push({marker:ne,length:0,token:Y.tokens.length-1,end:-1,open:U.can_open,close:U.can_close});return Y.pos+=U.length,!0},Ve.exports.g=function(Y){var L,G=Y.tokens_meta,U=Y.tokens_meta.length;for(Ae(Y,Y.delimiters),L=0;L<U;L++)G[L]&&G[L].delimiters&&Ae(Y,G[L].delimiters)}},1767:Ve=>{"use strict";function Ae(W){switch(W){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}Ve.exports=function(Y,L){for(var G=Y.pos;G<Y.posMax&&!Ae(Y.src.charCodeAt(G));)G++;return G!==Y.pos&&(L||(Y.pending+=Y.src.slice(Y.pos,G)),Y.pos=G,!0)}},6263:Ve=>{"use strict";function Ae(W,Y,L){this.type=W,this.tag=Y,this.attrs=null,this.map=null,this.nesting=L,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Ae.prototype.attrIndex=function(Y){var L,G,U;if(!this.attrs)return-1;for(G=0,U=(L=this.attrs).length;G<U;G++)if(L[G][0]===Y)return G;return-1},Ae.prototype.attrPush=function(Y){this.attrs?this.attrs.push(Y):this.attrs=[Y]},Ae.prototype.attrSet=function(Y,L){var G=this.attrIndex(Y),U=[Y,L];G<0?this.attrPush(U):this.attrs[G]=U},Ae.prototype.attrGet=function(Y){var L=this.attrIndex(Y),G=null;return L>=0&&(G=this.attrs[L][1]),G},Ae.prototype.attrJoin=function(Y,L){var G=this.attrIndex(Y);G<0?this.attrPush([Y,L]):this.attrs[G][1]=this.attrs[G][1]+" "+L},Ve.exports=Ae},9801:Ve=>{"use strict";var Ae={};function Y(L,G){var U;return"string"!=typeof G&&(G=Y.defaultChars),U=function W(L){var G,U,j=Ae[L];if(j)return j;for(j=Ae[L]=[],G=0;G<128;G++)U=String.fromCharCode(G),j.push(U);for(G=0;G<L.length;G++)j[U=L.charCodeAt(G)]="%"+("0"+U.toString(16).toUpperCase()).slice(-2);return j}(G),L.replace(/(%[a-f0-9]{2})+/gi,function(j){var D,R,q,ne,te,se,ee,K="";for(D=0,R=j.length;D<R;D+=3)(q=parseInt(j.slice(D+1,D+3),16))<128?K+=U[q]:192==(224&q)&&D+3<R&&128==(192&(ne=parseInt(j.slice(D+4,D+6),16)))?(K+=(ee=q<<6&1984|63&ne)<128?"\ufffd\ufffd":String.fromCharCode(ee),D+=3):224==(240&q)&&D+6<R&&(ne=parseInt(j.slice(D+4,D+6),16),te=parseInt(j.slice(D+7,D+9),16),128==(192&ne)&&128==(192&te))?(K+=(ee=q<<12&61440|ne<<6&4032|63&te)<2048||ee>=55296&&ee<=57343?"\ufffd\ufffd\ufffd":String.fromCharCode(ee),D+=6):240==(248&q)&&D+9<R&&(ne=parseInt(j.slice(D+4,D+6),16),te=parseInt(j.slice(D+7,D+9),16),se=parseInt(j.slice(D+10,D+12),16),128==(192&ne)&&128==(192&te)&&128==(192&se))?((ee=q<<18&1835008|ne<<12&258048|te<<6&4032|63&se)<65536||ee>1114111?K+="\ufffd\ufffd\ufffd\ufffd":(ee-=65536,K+=String.fromCharCode(55296+(ee>>10),56320+(1023&ee))),D+=9):K+="\ufffd";return K})}Y.defaultChars=";/?:@&=+$,#",Y.componentChars="",Ve.exports=Y},526:Ve=>{"use strict";var Ae={};function Y(L,G,U){var j,D,R,q,ne,te="";for("string"!=typeof G&&(U=G,G=Y.defaultChars),typeof U>"u"&&(U=!0),ne=function W(L){var G,U,j=Ae[L];if(j)return j;for(j=Ae[L]=[],G=0;G<128;G++)U=String.fromCharCode(G),/^[0-9a-z]$/i.test(U)?j.push(U):j.push("%"+("0"+G.toString(16).toUpperCase()).slice(-2));for(G=0;G<L.length;G++)j[L.charCodeAt(G)]=L[G];return j}(G),j=0,D=L.length;j<D;j++)if(R=L.charCodeAt(j),U&&37===R&&j+2<D&&/^[0-9a-f]{2}$/i.test(L.slice(j+1,j+3)))te+=L.slice(j,j+3),j+=2;else if(R<128)te+=ne[R];else if(R>=55296&&R<=57343){if(R>=55296&&R<=56319&&j+1<D&&(q=L.charCodeAt(j+1))>=56320&&q<=57343){te+=encodeURIComponent(L[j]+L[j+1]),j++;continue}te+="%EF%BF%BD"}else te+=encodeURIComponent(L[j]);return te}Y.defaultChars=";/?:@&=+$,-_.!~*'()#",Y.componentChars="-_.!~*'()",Ve.exports=Y},381:Ve=>{"use strict";Ve.exports=function(W){var Y="";return Y+=W.protocol||"",Y+=W.slashes?"//":"",Y+=W.auth?W.auth+"@":"",W.hostname&&-1!==W.hostname.indexOf(":")?Y+="["+W.hostname+"]":Y+=W.hostname||"",Y+=W.port?":"+W.port:"",Y+=W.pathname||"",(Y+=W.search||"")+(W.hash||"")}},7214:(Ve,Ae,W)=>{"use strict";Ve.exports.encode=W(526),Ve.exports.decode=W(9801),Ve.exports.format=W(381),Ve.exports.parse=W(3850)},3850:Ve=>{"use strict";function Ae(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var W=/^([a-z0-9.+-]+:)/i,Y=/:[0-9]*$/,L=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,U=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),j=["'"].concat(U),D=["%","/","?",";","#"].concat(j),R=["/","?","#"],ne=/^[+a-z0-9A-Z_-]{0,63}$/,te=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,se={javascript:!0,"javascript:":!0},ee={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};Ae.prototype.parse=function(z,ce){var Ce,Re,ie,oe,N,V=z;if(V=V.trim(),!ce&&1===z.split("#").length){var J=L.exec(V);if(J)return this.pathname=J[1],J[2]&&(this.search=J[2]),this}var fe=W.exec(V);if(fe&&(ie=(fe=fe[0]).toLowerCase(),this.protocol=fe,V=V.substr(fe.length)),(ce||fe||V.match(/^\/\/[^@\/]+@[^@\/]+/))&&(N="//"===V.substr(0,2))&&!(fe&&se[fe])&&(V=V.substr(2),this.slashes=!0),!se[fe]&&(N||fe&&!ee[fe])){var Pe,nt,ke=-1;for(Ce=0;Ce<R.length;Ce++)-1!==(oe=V.indexOf(R[Ce]))&&(-1===ke||oe<ke)&&(ke=oe);for(-1!==(nt=-1===ke?V.lastIndexOf("@"):V.lastIndexOf("@",ke))&&(Pe=V.slice(0,nt),V=V.slice(nt+1),this.auth=Pe),ke=-1,Ce=0;Ce<D.length;Ce++)-1!==(oe=V.indexOf(D[Ce]))&&(-1===ke||oe<ke)&&(ke=oe);-1===ke&&(ke=V.length),":"===V[ke-1]&&ke--;var Le=V.slice(0,ke);V=V.slice(ke),this.parseHost(Le),this.hostname=this.hostname||"";var at="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!at){var It=this.hostname.split(/\./);for(Ce=0,Re=It.length;Ce<Re;Ce++){var Ge=It[Ce];if(Ge&&!Ge.match(ne)){for(var yt="",mt=0,_t=Ge.length;mt<_t;mt++)Ge.charCodeAt(mt)>127?yt+="x":yt+=Ge[mt];if(!yt.match(ne)){var Fn=It.slice(0,Ce),Ot=It.slice(Ce+1),Pn=Ge.match(te);Pn&&(Fn.push(Pn[1]),Ot.unshift(Pn[2])),Ot.length&&(V=Ot.join(".")+V),this.hostname=Fn.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),at&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var nn=V.indexOf("#");-1!==nn&&(this.hash=V.substr(nn),V=V.slice(0,nn));var Ze=V.indexOf("?");return-1!==Ze&&(this.search=V.substr(Ze),V=V.slice(0,Ze)),V&&(this.pathname=V),ee[ie]&&this.hostname&&!this.pathname&&(this.pathname=""),this},Ae.prototype.parseHost=function(z){var ce=Y.exec(z);ce&&(":"!==(ce=ce[0])&&(this.port=ce.substr(1)),z=z.substr(0,z.length-ce.length)),z&&(this.hostname=z)},Ve.exports=function K(z,ce){if(z&&z instanceof Ae)return z;var Ce=new Ae;return Ce.parse(z,ce),Ce}},4879:(Ve,Ae,W)=>{"use strict";W.r(Ae),W.d(Ae,{decode:()=>Pe,default:()=>Ge,encode:()=>nt,toASCII:()=>at,toUnicode:()=>Le,ucs2decode:()=>N,ucs2encode:()=>V});const Y=2147483647,L=36,te=/^xn--/,se=/[^\0-\x7E]/,ee=/[\x2E\u3002\uFF0E\uFF61]/g,K={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ce=Math.floor,Ce=String.fromCharCode;function Re(yt){throw new RangeError(K[yt])}function oe(yt,mt){const _t=yt.split("@");let Fn="";_t.length>1&&(Fn=_t[0]+"@",yt=_t[1]);const Pn=function ie(yt,mt){const _t=[];let Fn=yt.length;for(;Fn--;)_t[Fn]=mt(yt[Fn]);return _t}((yt=yt.replace(ee,".")).split("."),mt).join(".");return Fn+Pn}function N(yt){const mt=[];let _t=0;const Fn=yt.length;for(;_t<Fn;){const Ot=yt.charCodeAt(_t++);if(Ot>=55296&&Ot<=56319&&_t<Fn){const Pn=yt.charCodeAt(_t++);56320==(64512&Pn)?mt.push(((1023&Ot)<<10)+(1023&Pn)+65536):(mt.push(Ot),_t--)}else mt.push(Ot)}return mt}const V=yt=>String.fromCodePoint(...yt),J=function(yt){return yt-48<10?yt-22:yt-65<26?yt-65:yt-97<26?yt-97:L},fe=function(yt,mt){return yt+22+75*(yt<26)-((0!=mt)<<5)},ke=function(yt,mt,_t){let Fn=0;for(yt=_t?ce(yt/700):yt>>1,yt+=ce(yt/mt);yt>455;Fn+=L)yt=ce(yt/35);return ce(Fn+36*yt/(yt+38))},Pe=function(yt){const mt=[],_t=yt.length;let Fn=0,Ot=128,Pn=72,nn=yt.lastIndexOf("-");nn<0&&(nn=0);for(let Ze=0;Ze<nn;++Ze)yt.charCodeAt(Ze)>=128&&Re("not-basic"),mt.push(yt.charCodeAt(Ze));for(let Ze=nn>0?nn+1:0;Ze<_t;){let Ct=Fn;for(let wn=1,An=L;;An+=L){Ze>=_t&&Re("invalid-input");const $e=J(yt.charCodeAt(Ze++));($e>=L||$e>ce((Y-Fn)/wn))&&Re("overflow"),Fn+=$e*wn;const le=An<=Pn?1:An>=Pn+26?26:An-Pn;if($e<le)break;const ot=L-le;wn>ce(Y/ot)&&Re("overflow"),wn*=ot}const cn=mt.length+1;Pn=ke(Fn-Ct,cn,0==Ct),ce(Fn/cn)>Y-Ot&&Re("overflow"),Ot+=ce(Fn/cn),Fn%=cn,mt.splice(Fn++,0,Ot)}return String.fromCodePoint(...mt)},nt=function(yt){const mt=[];let _t=(yt=N(yt)).length,Fn=128,Ot=0,Pn=72;for(const Ct of yt)Ct<128&&mt.push(Ce(Ct));let nn=mt.length,Ze=nn;for(nn&&mt.push("-");Ze<_t;){let Ct=Y;for(const wn of yt)wn>=Fn&&wn<Ct&&(Ct=wn);const cn=Ze+1;Ct-Fn>ce((Y-Ot)/cn)&&Re("overflow"),Ot+=(Ct-Fn)*cn,Fn=Ct;for(const wn of yt)if(wn<Fn&&++Ot>Y&&Re("overflow"),wn==Fn){let An=Ot;for(let $e=L;;$e+=L){const le=$e<=Pn?1:$e>=Pn+26?26:$e-Pn;if(An<le)break;const ot=An-le,Je=L-le;mt.push(Ce(fe(le+ot%Je,0))),An=ce(ot/Je)}mt.push(Ce(fe(An,0))),Pn=ke(Ot,cn,Ze==nn),Ot=0,++Ze}++Ot,++Fn}return mt.join("")},Le=function(yt){return oe(yt,function(mt){return te.test(mt)?Pe(mt.slice(4).toLowerCase()):mt})},at=function(yt){return oe(yt,function(mt){return se.test(mt)?"xn--"+nt(mt):mt})},Ge={version:"2.1.0",ucs2:{decode:N,encode:V},decode:Pe,encode:nt,toASCII:at,toUnicode:Le}},891:Ve=>{"use strict";var W={};function Y(D,R,q){q||(q=Error);var te=function(se){function ee(K,z,ce){return se.call(this,function ne(se,ee,K){return"string"==typeof R?R:R(se,ee,K)}(K,z,ce))||this}return function Ae(D,R){D.prototype=Object.create(R.prototype),D.prototype.constructor=D,D.__proto__=R}(ee,se),ee}(q);te.prototype.name=q.name,te.prototype.code=D,W[D]=te}function L(D,R){if(Array.isArray(D)){var q=D.length;return D=D.map(function(ne){return String(ne)}),q>2?"one of ".concat(R," ").concat(D.slice(0,q-1).join(", "),", or ")+D[q-1]:2===q?"one of ".concat(R," ").concat(D[0]," or ").concat(D[1]):"of ".concat(R," ").concat(D[0])}return"of ".concat(R," ").concat(String(D))}Y("ERR_INVALID_OPT_VALUE",function(D,R){return'The value "'+R+'" is invalid for option "'+D+'"'},TypeError),Y("ERR_INVALID_ARG_TYPE",function(D,R,q){var ne,te;if("string"==typeof R&&function G(D,R,q){return D.substr(!q||q<0?0:+q,R.length)===R}(R,"not ")?(ne="must not be",R=R.replace(/^not /,"")):ne="must be",function U(D,R,q){return(void 0===q||q>D.length)&&(q=D.length),D.substring(q-R.length,q)===R}(D," argument"))te="The ".concat(D," ").concat(ne," ").concat(L(R,"type"));else{var se=function j(D,R,q){return"number"!=typeof q&&(q=0),!(q+R.length>D.length)&&-1!==D.indexOf(R,q)}(D,".")?"property":"argument";te='The "'.concat(D,'" ').concat(se," ").concat(ne," ").concat(L(R,"type"))}return te+". Received type ".concat(typeof q)},TypeError),Y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Y("ERR_METHOD_NOT_IMPLEMENTED",function(D){return"The "+D+" method is not implemented"}),Y("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Y("ERR_STREAM_DESTROYED",function(D){return"Cannot call "+D+" after a stream was destroyed"}),Y("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Y("ERR_STREAM_WRITE_AFTER_END","write after end"),Y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Y("ERR_UNKNOWN_ENCODING",function(D){return"Unknown encoding: "+D},TypeError),Y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ve.exports.q=W},1339:(Ve,Ae,W)=>{"use strict";var Y=Object.keys||function(te){var se=[];for(var ee in te)se.push(ee);return se};Ve.exports=R;var L=W(3154),G=W(520);W(3894)(R,L);for(var U=Y(G.prototype),j=0;j<U.length;j++){var D=U[j];R.prototype[D]||(R.prototype[D]=G.prototype[D])}function R(te){if(!(this instanceof R))return new R(te);L.call(this,te),G.call(this,te),this.allowHalfOpen=!0,te&&(!1===te.readable&&(this.readable=!1),!1===te.writable&&(this.writable=!1),!1===te.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",q)))}function q(){this._writableState.ended||process.nextTick(ne,this)}function ne(te){te.end()}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(se){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=se,this._writableState.destroyed=se)}})},6071:(Ve,Ae,W)=>{"use strict";Ve.exports=L;var Y=W(6025);function L(G){if(!(this instanceof L))return new L(G);Y.call(this,G)}W(3894)(L,Y),L.prototype._transform=function(G,U,j){j(null,G)}},3154:(Ve,Ae,W)=>{"use strict";var Y;Ve.exports=Le,Le.ReadableState=nt,W(9069);var te,G=function(ht,Ht){return ht.listeners(Ht).length},U=W(4970),j=W(3172).Buffer,D=global.Uint8Array||function(){},ne=W(4616);te=ne&&ne.debuglog?ne.debuglog("stream"):function(){};var N,V,J,se=W(5019),ee=W(1920),z=W(7102).getHighWaterMark,ce=W(891).q,Ce=ce.ERR_INVALID_ARG_TYPE,Re=ce.ERR_STREAM_PUSH_AFTER_EOF,ie=ce.ERR_METHOD_NOT_IMPLEMENTED,oe=ce.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;W(3894)(Le,U);var fe=ee.errorOrDestroy,ke=["error","close","destroy","pause","resume"];function nt(pt,ht,Ht){Y=Y||W(1339),"boolean"!=typeof Ht&&(Ht=ht instanceof Y),this.objectMode=!!(pt=pt||{}).objectMode,Ht&&(this.objectMode=this.objectMode||!!pt.readableObjectMode),this.highWaterMark=z(this,pt,"readableHighWaterMark",Ht),this.buffer=new se,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==pt.emitClose,this.autoDestroy=!!pt.autoDestroy,this.destroyed=!1,this.defaultEncoding=pt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,pt.encoding&&(N||(N=W(3054).s),this.decoder=new N(pt.encoding),this.encoding=pt.encoding)}function Le(pt){if(Y=Y||W(1339),!(this instanceof Le))return new Le(pt);this._readableState=new nt(pt,this,this instanceof Y),this.readable=!0,pt&&("function"==typeof pt.read&&(this._read=pt.read),"function"==typeof pt.destroy&&(this._destroy=pt.destroy)),U.call(this)}function at(pt,ht,Ht,We,Ie){te("readableAddChunk",ht);var Et,Me=pt._readableState;if(null===ht)Me.reading=!1,function Fn(pt,ht){if(te("onEofChunk"),!ht.ended){if(ht.decoder){var Ht=ht.decoder.end();Ht&&Ht.length&&(ht.buffer.push(Ht),ht.length+=ht.objectMode?1:Ht.length)}ht.ended=!0,ht.sync?Ot(pt):(ht.needReadable=!1,ht.emittedReadable||(ht.emittedReadable=!0,Pn(pt)))}}(pt,Me);else if(Ie||(Et=function Ge(pt,ht){var Ht;return!function q(pt){return j.isBuffer(pt)||pt instanceof D}(ht)&&"string"!=typeof ht&&void 0!==ht&&!pt.objectMode&&(Ht=new Ce("chunk",["string","Buffer","Uint8Array"],ht)),Ht}(Me,ht)),Et)fe(pt,Et);else if(Me.objectMode||ht&&ht.length>0)if("string"!=typeof ht&&!Me.objectMode&&Object.getPrototypeOf(ht)!==j.prototype&&(ht=function R(pt){return j.from(pt)}(ht)),We)Me.endEmitted?fe(pt,new oe):It(pt,Me,ht,!0);else if(Me.ended)fe(pt,new Re);else{if(Me.destroyed)return!1;Me.reading=!1,Me.decoder&&!Ht?(ht=Me.decoder.write(ht),Me.objectMode||0!==ht.length?It(pt,Me,ht,!1):nn(pt,Me)):It(pt,Me,ht,!1)}else We||(Me.reading=!1,nn(pt,Me));return!Me.ended&&(Me.length<Me.highWaterMark||0===Me.length)}function It(pt,ht,Ht,We){ht.flowing&&0===ht.length&&!ht.sync?(ht.awaitDrain=0,pt.emit("data",Ht)):(ht.length+=ht.objectMode?1:Ht.length,We?ht.buffer.unshift(Ht):ht.buffer.push(Ht),ht.needReadable&&Ot(pt)),nn(pt,ht)}Object.defineProperty(Le.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ht){!this._readableState||(this._readableState.destroyed=ht)}}),Le.prototype.destroy=ee.destroy,Le.prototype._undestroy=ee.undestroy,Le.prototype._destroy=function(pt,ht){ht(pt)},Le.prototype.push=function(pt,ht){var We,Ht=this._readableState;return Ht.objectMode?We=!0:"string"==typeof pt&&((ht=ht||Ht.defaultEncoding)!==Ht.encoding&&(pt=j.from(pt,ht),ht=""),We=!0),at(this,pt,ht,!1,We)},Le.prototype.unshift=function(pt){return at(this,pt,null,!0,!1)},Le.prototype.isPaused=function(){return!1===this._readableState.flowing},Le.prototype.setEncoding=function(pt){N||(N=W(3054).s);var ht=new N(pt);this._readableState.decoder=ht,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ht=this._readableState.buffer.head,We="";null!==Ht;)We+=ht.write(Ht.data),Ht=Ht.next;return this._readableState.buffer.clear(),""!==We&&this._readableState.buffer.push(We),this._readableState.length=We.length,this};var yt=1073741824;function _t(pt,ht){return pt<=0||0===ht.length&&ht.ended?0:ht.objectMode?1:pt!=pt?ht.flowing&&ht.length?ht.buffer.head.data.length:ht.length:(pt>ht.highWaterMark&&(ht.highWaterMark=function mt(pt){return pt>=yt?pt=yt:(pt--,pt|=pt>>>1,pt|=pt>>>2,pt|=pt>>>4,pt|=pt>>>8,pt|=pt>>>16,pt++),pt}(pt)),pt<=ht.length?pt:ht.ended?ht.length:(ht.needReadable=!0,0))}function Ot(pt){var ht=pt._readableState;te("emitReadable",ht.needReadable,ht.emittedReadable),ht.needReadable=!1,ht.emittedReadable||(te("emitReadable",ht.flowing),ht.emittedReadable=!0,process.nextTick(Pn,pt))}function Pn(pt){var ht=pt._readableState;te("emitReadable_",ht.destroyed,ht.length,ht.ended),!ht.destroyed&&(ht.length||ht.ended)&&(pt.emit("readable"),ht.emittedReadable=!1),ht.needReadable=!ht.flowing&&!ht.ended&&ht.length<=ht.highWaterMark,le(pt)}function nn(pt,ht){ht.readingMore||(ht.readingMore=!0,process.nextTick(Ze,pt,ht))}function Ze(pt,ht){for(;!ht.reading&&!ht.ended&&(ht.length<ht.highWaterMark||ht.flowing&&0===ht.length);){var Ht=ht.length;if(te("maybeReadMore read 0"),pt.read(0),Ht===ht.length)break}ht.readingMore=!1}function cn(pt){var ht=pt._readableState;ht.readableListening=pt.listenerCount("readable")>0,ht.resumeScheduled&&!ht.paused?ht.flowing=!0:pt.listenerCount("data")>0&&pt.resume()}function wn(pt){te("readable nexttick read 0"),pt.read(0)}function $e(pt,ht){te("resume",ht.reading),ht.reading||pt.read(0),ht.resumeScheduled=!1,pt.emit("resume"),le(pt),ht.flowing&&!ht.reading&&pt.read(0)}function le(pt){var ht=pt._readableState;for(te("flow",ht.flowing);ht.flowing&&null!==pt.read(););}function ot(pt,ht){return 0===ht.length?null:(ht.objectMode?Ht=ht.buffer.shift():!pt||pt>=ht.length?(Ht=ht.decoder?ht.buffer.join(""):1===ht.buffer.length?ht.buffer.first():ht.buffer.concat(ht.length),ht.buffer.clear()):Ht=ht.buffer.consume(pt,ht.decoder),Ht);var Ht}function Je(pt){var ht=pt._readableState;te("endReadable",ht.endEmitted),ht.endEmitted||(ht.ended=!0,process.nextTick(Sn,ht,pt))}function Sn(pt,ht){if(te("endReadableNT",pt.endEmitted,pt.length),!pt.endEmitted&&0===pt.length&&(pt.endEmitted=!0,ht.readable=!1,ht.emit("end"),pt.autoDestroy)){var Ht=ht._writableState;(!Ht||Ht.autoDestroy&&Ht.finished)&&ht.destroy()}}function Hn(pt,ht){for(var Ht=0,We=pt.length;Ht<We;Ht++)if(pt[Ht]===ht)return Ht;return-1}Le.prototype.read=function(pt){te("read",pt),pt=parseInt(pt,10);var ht=this._readableState,Ht=pt;if(0!==pt&&(ht.emittedReadable=!1),0===pt&&ht.needReadable&&((0!==ht.highWaterMark?ht.length>=ht.highWaterMark:ht.length>0)||ht.ended))return te("read: emitReadable",ht.length,ht.ended),0===ht.length&&ht.ended?Je(this):Ot(this),null;if(0===(pt=_t(pt,ht))&&ht.ended)return 0===ht.length&&Je(this),null;var Ie,We=ht.needReadable;return te("need readable",We),(0===ht.length||ht.length-pt<ht.highWaterMark)&&te("length less than watermark",We=!0),ht.ended||ht.reading?te("reading or ended",We=!1):We&&(te("do read"),ht.reading=!0,ht.sync=!0,0===ht.length&&(ht.needReadable=!0),this._read(ht.highWaterMark),ht.sync=!1,ht.reading||(pt=_t(Ht,ht))),null===(Ie=pt>0?ot(pt,ht):null)?(ht.needReadable=ht.length<=ht.highWaterMark,pt=0):(ht.length-=pt,ht.awaitDrain=0),0===ht.length&&(ht.ended||(ht.needReadable=!0),Ht!==pt&&ht.ended&&Je(this)),null!==Ie&&this.emit("data",Ie),Ie},Le.prototype._read=function(pt){fe(this,new ie("_read()"))},Le.prototype.pipe=function(pt,ht){var Ht=this,We=this._readableState;switch(We.pipesCount){case 0:We.pipes=pt;break;case 1:We.pipes=[We.pipes,pt];break;default:We.pipes.push(pt)}We.pipesCount+=1,te("pipe count=%d opts=%j",We.pipesCount,ht);var Me=ht&&!1===ht.end||pt===process.stdout||pt===process.stderr?ra:dn;function dn(){te("onend"),pt.end()}We.endEmitted?process.nextTick(Me):Ht.once("end",Me),pt.on("unpipe",function Et(Ha,fl){te("onunpipe"),Ha===Ht&&fl&&!1===fl.hasUnpiped&&(fl.hasUnpiped=!0,function ms(){te("cleanup"),pt.removeListener("close",qs),pt.removeListener("finish",Zi),pt.removeListener("drain",Xn),pt.removeListener("error",os),pt.removeListener("unpipe",Et),Ht.removeListener("end",dn),Ht.removeListener("end",ra),Ht.removeListener("data",Hs),Jn=!0,We.awaitDrain&&(!pt._writableState||pt._writableState.needDrain)&&Xn()}())});var Xn=function Ct(pt){return function(){var Ht=pt._readableState;te("pipeOnDrain",Ht.awaitDrain),Ht.awaitDrain&&Ht.awaitDrain--,0===Ht.awaitDrain&&G(pt,"data")&&(Ht.flowing=!0,le(pt))}}(Ht);pt.on("drain",Xn);var Jn=!1;function Hs(Ha){te("ondata");var fl=pt.write(Ha);te("dest.write",fl),!1===fl&&((1===We.pipesCount&&We.pipes===pt||We.pipesCount>1&&-1!==Hn(We.pipes,pt))&&!Jn&&(te("false write response, pause",We.awaitDrain),We.awaitDrain++),Ht.pause())}function os(Ha){te("onerror",Ha),ra(),pt.removeListener("error",os),0===G(pt,"error")&&fe(pt,Ha)}function qs(){pt.removeListener("finish",Zi),ra()}function Zi(){te("onfinish"),pt.removeListener("close",qs),ra()}function ra(){te("unpipe"),Ht.unpipe(pt)}return Ht.on("data",Hs),function Pe(pt,ht,Ht){if("function"==typeof pt.prependListener)return pt.prependListener(ht,Ht);pt._events&&pt._events[ht]?Array.isArray(pt._events[ht])?pt._events[ht].unshift(Ht):pt._events[ht]=[Ht,pt._events[ht]]:pt.on(ht,Ht)}(pt,"error",os),pt.once("close",qs),pt.once("finish",Zi),pt.emit("pipe",Ht),We.flowing||(te("pipe resume"),Ht.resume()),pt},Le.prototype.unpipe=function(pt){var ht=this._readableState,Ht={hasUnpiped:!1};if(0===ht.pipesCount)return this;if(1===ht.pipesCount)return pt&&pt!==ht.pipes||(pt||(pt=ht.pipes),ht.pipes=null,ht.pipesCount=0,ht.flowing=!1,pt&&pt.emit("unpipe",this,Ht)),this;if(!pt){var We=ht.pipes,Ie=ht.pipesCount;ht.pipes=null,ht.pipesCount=0,ht.flowing=!1;for(var Me=0;Me<Ie;Me++)We[Me].emit("unpipe",this,{hasUnpiped:!1});return this}var Et=Hn(ht.pipes,pt);return-1===Et||(ht.pipes.splice(Et,1),ht.pipesCount-=1,1===ht.pipesCount&&(ht.pipes=ht.pipes[0]),pt.emit("unpipe",this,Ht)),this},Le.prototype.addListener=Le.prototype.on=function(pt,ht){var Ht=U.prototype.on.call(this,pt,ht),We=this._readableState;return"data"===pt?(We.readableListening=this.listenerCount("readable")>0,!1!==We.flowing&&this.resume()):"readable"===pt&&!We.endEmitted&&!We.readableListening&&(We.readableListening=We.needReadable=!0,We.flowing=!1,We.emittedReadable=!1,te("on readable",We.length,We.reading),We.length?Ot(this):We.reading||process.nextTick(wn,this)),Ht},Le.prototype.removeListener=function(pt,ht){var Ht=U.prototype.removeListener.call(this,pt,ht);return"readable"===pt&&process.nextTick(cn,this),Ht},Le.prototype.removeAllListeners=function(pt){var ht=U.prototype.removeAllListeners.apply(this,arguments);return("readable"===pt||void 0===pt)&&process.nextTick(cn,this),ht},Le.prototype.resume=function(){var pt=this._readableState;return pt.flowing||(te("resume"),pt.flowing=!pt.readableListening,function An(pt,ht){ht.resumeScheduled||(ht.resumeScheduled=!0,process.nextTick($e,pt,ht))}(this,pt)),pt.paused=!1,this},Le.prototype.pause=function(){return te("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(te("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Le.prototype.wrap=function(pt){var ht=this,Ht=this._readableState,We=!1;for(var Ie in pt.on("end",function(){if(te("wrapped end"),Ht.decoder&&!Ht.ended){var Et=Ht.decoder.end();Et&&Et.length&&ht.push(Et)}ht.push(null)}),pt.on("data",function(Et){te("wrapped data"),Ht.decoder&&(Et=Ht.decoder.write(Et)),Ht.objectMode&&null==Et||!(Ht.objectMode||Et&&Et.length)||ht.push(Et)||(We=!0,pt.pause())}),pt)void 0===this[Ie]&&"function"==typeof pt[Ie]&&(this[Ie]=function(dn){return function(){return pt[dn].apply(pt,arguments)}}(Ie));for(var Me=0;Me<ke.length;Me++)pt.on(ke[Me],this.emit.bind(this,ke[Me]));return this._read=function(Et){te("wrapped _read",Et),We&&(We=!1,pt.resume())},this},"function"==typeof Symbol&&(Le.prototype[Symbol.asyncIterator]=function(){return void 0===V&&(V=W(3872)),V(this)}),Object.defineProperty(Le.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Le.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Le.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ht){this._readableState&&(this._readableState.flowing=ht)}}),Le._fromList=ot,Object.defineProperty(Le.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Le.from=function(pt,ht){return void 0===J&&(J=W(7412)),J(Le,pt,ht)})},6025:(Ve,Ae,W)=>{"use strict";Ve.exports=q;var Y=W(891).q,L=Y.ERR_METHOD_NOT_IMPLEMENTED,G=Y.ERR_MULTIPLE_CALLBACK,U=Y.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=Y.ERR_TRANSFORM_WITH_LENGTH_0,D=W(1339);function R(se,ee){var K=this._transformState;K.transforming=!1;var z=K.writecb;if(null===z)return this.emit("error",new G);K.writechunk=null,K.writecb=null,null!=ee&&this.push(ee),z(se);var ce=this._readableState;ce.reading=!1,(ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}function q(se){if(!(this instanceof q))return new q(se);D.call(this,se),this._transformState={afterTransform:R.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,se&&("function"==typeof se.transform&&(this._transform=se.transform),"function"==typeof se.flush&&(this._flush=se.flush)),this.on("prefinish",ne)}function ne(){var se=this;"function"!=typeof this._flush||this._readableState.destroyed?te(this,null,null):this._flush(function(ee,K){te(se,ee,K)})}function te(se,ee,K){if(ee)return se.emit("error",ee);if(null!=K&&se.push(K),se._writableState.length)throw new j;if(se._transformState.transforming)throw new U;return se.push(null)}W(3894)(q,D),q.prototype.push=function(se,ee){return this._transformState.needTransform=!1,D.prototype.push.call(this,se,ee)},q.prototype._transform=function(se,ee,K){K(new L("_transform()"))},q.prototype._write=function(se,ee,K){var z=this._transformState;if(z.writecb=K,z.writechunk=se,z.writeencoding=ee,!z.transforming){var ce=this._readableState;(z.needTransform||ce.needReadable||ce.length<ce.highWaterMark)&&this._read(ce.highWaterMark)}},q.prototype._read=function(se){var ee=this._transformState;null===ee.writechunk||ee.transforming?ee.needTransform=!0:(ee.transforming=!0,this._transform(ee.writechunk,ee.writeencoding,ee.afterTransform))},q.prototype._destroy=function(se,ee){D.prototype._destroy.call(this,se,function(K){ee(K)})}},520:(Ve,Ae,W)=>{"use strict";function L(le){var ot=this;this.next=null,this.entry=null,this.finish=function(){!function $e(le,ot,Je){var Sn=le.entry;for(le.entry=null;Sn;){var Hn=Sn.callback;ot.pendingcb--,Hn(Je),Sn=Sn.next}ot.corkedRequestsFree.next=le}(ot,le)}}var G;Ve.exports=nt,nt.WritableState=ke;var Pe,U={deprecate:W(3532)},j=W(4970),D=W(3172).Buffer,R=global.Uint8Array||function(){},te=W(1920),ee=W(7102).getHighWaterMark,K=W(891).q,z=K.ERR_INVALID_ARG_TYPE,ce=K.ERR_METHOD_NOT_IMPLEMENTED,Ce=K.ERR_MULTIPLE_CALLBACK,Re=K.ERR_STREAM_CANNOT_PIPE,ie=K.ERR_STREAM_DESTROYED,oe=K.ERR_STREAM_NULL_VALUES,N=K.ERR_STREAM_WRITE_AFTER_END,V=K.ERR_UNKNOWN_ENCODING,J=te.errorOrDestroy;function fe(){}function ke(le,ot,Je){G=G||W(1339),"boolean"!=typeof Je&&(Je=ot instanceof G),this.objectMode=!!(le=le||{}).objectMode,Je&&(this.objectMode=this.objectMode||!!le.writableObjectMode),this.highWaterMark=ee(this,le,"writableHighWaterMark",Je),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===le.decodeStrings),this.defaultEncoding=le.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Hn){!function Fn(le,ot){var Je=le._writableState,Sn=Je.sync,Hn=Je.writecb;if("function"!=typeof Hn)throw new Ce;if(function _t(le){le.writing=!1,le.writecb=null,le.length-=le.writelen,le.writelen=0}(Je),ot)!function mt(le,ot,Je,Sn,Hn){--ot.pendingcb,Je?(process.nextTick(Hn,Sn),process.nextTick(wn,le,ot),le._writableState.errorEmitted=!0,J(le,Sn)):(Hn(Sn),le._writableState.errorEmitted=!0,J(le,Sn),wn(le,ot))}(le,Je,Sn,ot,Hn);else{var pt=Ze(Je)||le.destroyed;!pt&&!Je.corked&&!Je.bufferProcessing&&Je.bufferedRequest&&nn(le,Je),Sn?process.nextTick(Ot,le,Je,pt,Hn):Ot(le,Je,pt,Hn)}}(ot,Hn)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==le.emitClose,this.autoDestroy=!!le.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new L(this)}function nt(le){var ot=this instanceof(G=G||W(1339));if(!ot&&!Pe.call(nt,this))return new nt(le);this._writableState=new ke(le,this,ot),this.writable=!0,le&&("function"==typeof le.write&&(this._write=le.write),"function"==typeof le.writev&&(this._writev=le.writev),"function"==typeof le.destroy&&(this._destroy=le.destroy),"function"==typeof le.final&&(this._final=le.final)),j.call(this)}function yt(le,ot,Je,Sn,Hn,pt,ht){ot.writelen=Sn,ot.writecb=ht,ot.writing=!0,ot.sync=!0,ot.destroyed?ot.onwrite(new ie("write")):Je?le._writev(Hn,ot.onwrite):le._write(Hn,pt,ot.onwrite),ot.sync=!1}function Ot(le,ot,Je,Sn){Je||function Pn(le,ot){0===ot.length&&ot.needDrain&&(ot.needDrain=!1,le.emit("drain"))}(le,ot),ot.pendingcb--,Sn(),wn(le,ot)}function nn(le,ot){ot.bufferProcessing=!0;var Je=ot.bufferedRequest;if(le._writev&&Je&&Je.next){var Hn=new Array(ot.bufferedRequestCount),pt=ot.corkedRequestsFree;pt.entry=Je;for(var ht=0,Ht=!0;Je;)Hn[ht]=Je,Je.isBuf||(Ht=!1),Je=Je.next,ht+=1;Hn.allBuffers=Ht,yt(le,ot,!0,ot.length,Hn,"",pt.finish),ot.pendingcb++,ot.lastBufferedRequest=null,pt.next?(ot.corkedRequestsFree=pt.next,pt.next=null):ot.corkedRequestsFree=new L(ot),ot.bufferedRequestCount=0}else{for(;Je;){var We=Je.chunk;if(yt(le,ot,!1,ot.objectMode?1:We.length,We,Je.encoding,Je.callback),Je=Je.next,ot.bufferedRequestCount--,ot.writing)break}null===Je&&(ot.lastBufferedRequest=null)}ot.bufferedRequest=Je,ot.bufferProcessing=!1}function Ze(le){return le.ending&&0===le.length&&null===le.bufferedRequest&&!le.finished&&!le.writing}function Ct(le,ot){le._final(function(Je){ot.pendingcb--,Je&&J(le,Je),ot.prefinished=!0,le.emit("prefinish"),wn(le,ot)})}function wn(le,ot){var Je=Ze(ot);if(Je&&(function cn(le,ot){!ot.prefinished&&!ot.finalCalled&&("function"!=typeof le._final||ot.destroyed?(ot.prefinished=!0,le.emit("prefinish")):(ot.pendingcb++,ot.finalCalled=!0,process.nextTick(Ct,le,ot)))}(le,ot),0===ot.pendingcb&&(ot.finished=!0,le.emit("finish"),ot.autoDestroy))){var Sn=le._readableState;(!Sn||Sn.autoDestroy&&Sn.endEmitted)&&le.destroy()}return Je}W(3894)(nt,j),ke.prototype.getBuffer=function(){for(var ot=this.bufferedRequest,Je=[];ot;)Je.push(ot),ot=ot.next;return Je},function(){try{Object.defineProperty(ke.prototype,"buffer",{get:U.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Pe=Function.prototype[Symbol.hasInstance],Object.defineProperty(nt,Symbol.hasInstance,{value:function(ot){return!!Pe.call(this,ot)||this===nt&&ot&&ot._writableState instanceof ke}})):Pe=function(ot){return ot instanceof this},nt.prototype.pipe=function(){J(this,new Re)},nt.prototype.write=function(le,ot,Je){var Sn=this._writableState,Hn=!1,pt=!Sn.objectMode&&function ne(le){return D.isBuffer(le)||le instanceof R}(le);return pt&&!D.isBuffer(le)&&(le=function q(le){return D.from(le)}(le)),"function"==typeof ot&&(Je=ot,ot=null),pt?ot="buffer":ot||(ot=Sn.defaultEncoding),"function"!=typeof Je&&(Je=fe),Sn.ending?function Le(le,ot){var Je=new N;J(le,Je),process.nextTick(ot,Je)}(this,Je):(pt||function at(le,ot,Je,Sn){var Hn;return null===Je?Hn=new oe:"string"!=typeof Je&&!ot.objectMode&&(Hn=new z("chunk",["string","Buffer"],Je)),!Hn||(J(le,Hn),process.nextTick(Sn,Hn),!1)}(this,Sn,le,Je))&&(Sn.pendingcb++,Hn=function Ge(le,ot,Je,Sn,Hn,pt){if(!Je){var ht=function It(le,ot,Je){return!le.objectMode&&!1!==le.decodeStrings&&"string"==typeof ot&&(ot=D.from(ot,Je)),ot}(ot,Sn,Hn);Sn!==ht&&(Je=!0,Hn="buffer",Sn=ht)}var Ht=ot.objectMode?1:Sn.length;ot.length+=Ht;var We=ot.length<ot.highWaterMark;if(We||(ot.needDrain=!0),ot.writing||ot.corked){var Ie=ot.lastBufferedRequest;ot.lastBufferedRequest={chunk:Sn,encoding:Hn,isBuf:Je,callback:pt,next:null},Ie?Ie.next=ot.lastBufferedRequest:ot.bufferedRequest=ot.lastBufferedRequest,ot.bufferedRequestCount+=1}else yt(le,ot,!1,Ht,Sn,Hn,pt);return We}(this,Sn,pt,le,ot,Je)),Hn},nt.prototype.cork=function(){this._writableState.corked++},nt.prototype.uncork=function(){var le=this._writableState;le.corked&&(le.corked--,!le.writing&&!le.corked&&!le.bufferProcessing&&le.bufferedRequest&&nn(this,le))},nt.prototype.setDefaultEncoding=function(ot){if("string"==typeof ot&&(ot=ot.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ot+"").toLowerCase())>-1))throw new V(ot);return this._writableState.defaultEncoding=ot,this},Object.defineProperty(nt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(nt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),nt.prototype._write=function(le,ot,Je){Je(new ce("_write()"))},nt.prototype._writev=null,nt.prototype.end=function(le,ot,Je){var Sn=this._writableState;return"function"==typeof le?(Je=le,le=null,ot=null):"function"==typeof ot&&(Je=ot,ot=null),null!=le&&this.write(le,ot),Sn.corked&&(Sn.corked=1,this.uncork()),Sn.ending||function An(le,ot,Je){ot.ending=!0,wn(le,ot),Je&&(ot.finished?process.nextTick(Je):le.once("finish",Je)),ot.ended=!0,le.writable=!1}(this,Sn,Je),this},Object.defineProperty(nt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(nt.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ot){!this._writableState||(this._writableState.destroyed=ot)}}),nt.prototype.destroy=te.destroy,nt.prototype._undestroy=te.undestroy,nt.prototype._destroy=function(le,ot){ot(le)}},3872:(Ve,Ae,W)=>{"use strict";var Y;function L(ie,oe,N){return oe in ie?Object.defineProperty(ie,oe,{value:N,enumerable:!0,configurable:!0,writable:!0}):ie[oe]=N,ie}var G=W(7542),U=Symbol("lastResolve"),j=Symbol("lastReject"),D=Symbol("error"),R=Symbol("ended"),q=Symbol("lastPromise"),ne=Symbol("handlePromise"),te=Symbol("stream");function se(ie,oe){return{value:ie,done:oe}}function ee(ie){var oe=ie[U];if(null!==oe){var N=ie[te].read();null!==N&&(ie[q]=null,ie[U]=null,ie[j]=null,oe(se(N,!1)))}}function K(ie){process.nextTick(ee,ie)}var ce=Object.getPrototypeOf(function(){}),Ce=Object.setPrototypeOf((L(Y={get stream(){return this[te]},next:function(){var oe=this,N=this[D];if(null!==N)return Promise.reject(N);if(this[R])return Promise.resolve(se(void 0,!0));if(this[te].destroyed)return new Promise(function(ke,Pe){process.nextTick(function(){oe[D]?Pe(oe[D]):ke(se(void 0,!0))})});var J,V=this[q];if(V)J=new Promise(function z(ie,oe){return function(N,V){ie.then(function(){oe[R]?N(se(void 0,!0)):oe[ne](N,V)},V)}}(V,this));else{var fe=this[te].read();if(null!==fe)return Promise.resolve(se(fe,!1));J=new Promise(this[ne])}return this[q]=J,J}},Symbol.asyncIterator,function(){return this}),L(Y,"return",function(){var oe=this;return new Promise(function(N,V){oe[te].destroy(null,function(J){J?V(J):N(se(void 0,!0))})})}),Y),ce);Ve.exports=function(oe){var N,V=Object.create(Ce,(L(N={},te,{value:oe,writable:!0}),L(N,U,{value:null,writable:!0}),L(N,j,{value:null,writable:!0}),L(N,D,{value:null,writable:!0}),L(N,R,{value:oe._readableState.endEmitted,writable:!0}),L(N,ne,{value:function(fe,ke){var Pe=V[te].read();Pe?(V[q]=null,V[U]=null,V[j]=null,fe(se(Pe,!1))):(V[U]=fe,V[j]=ke)},writable:!0}),N));return V[q]=null,G(oe,function(J){if(J&&"ERR_STREAM_PREMATURE_CLOSE"!==J.code){var fe=V[j];return null!==fe&&(V[q]=null,V[U]=null,V[j]=null,fe(J)),void(V[D]=J)}var ke=V[U];null!==ke&&(V[q]=null,V[U]=null,V[j]=null,ke(se(void 0,!0))),V[R]=!0}),oe.on("readable",K.bind(null,V)),V}},5019:(Ve,Ae,W)=>{"use strict";function Y(K,z){var ce=Object.keys(K);if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(K);z&&(Ce=Ce.filter(function(Re){return Object.getOwnPropertyDescriptor(K,Re).enumerable})),ce.push.apply(ce,Ce)}return ce}function G(K,z,ce){return z in K?Object.defineProperty(K,z,{value:ce,enumerable:!0,configurable:!0,writable:!0}):K[z]=ce,K}function j(K,z){for(var ce=0;ce<z.length;ce++){var Ce=z[ce];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(K,Ce.key,Ce)}}var q=W(3172).Buffer,te=W(2361).inspect,se=te&&te.custom||"inspect";function ee(K,z,ce){q.prototype.copy.call(K,z,ce)}Ve.exports=function(){function K(){(function U(K,z){if(!(K instanceof z))throw new TypeError("Cannot call a class as a function")})(this,K),this.head=null,this.tail=null,this.length=0}return function D(K,z,ce){z&&j(K.prototype,z),ce&&j(K,ce)}(K,[{key:"push",value:function(ce){var Ce={data:ce,next:null};this.length>0?this.tail.next=Ce:this.head=Ce,this.tail=Ce,++this.length}},{key:"unshift",value:function(ce){var Ce={data:ce,next:this.head};0===this.length&&(this.tail=Ce),this.head=Ce,++this.length}},{key:"shift",value:function(){if(0!==this.length){var ce=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,ce}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ce){if(0===this.length)return"";for(var Ce=this.head,Re=""+Ce.data;Ce=Ce.next;)Re+=ce+Ce.data;return Re}},{key:"concat",value:function(ce){if(0===this.length)return q.alloc(0);for(var Ce=q.allocUnsafe(ce>>>0),Re=this.head,ie=0;Re;)ee(Re.data,Ce,ie),ie+=Re.data.length,Re=Re.next;return Ce}},{key:"consume",value:function(ce,Ce){var Re;return ce<this.head.data.length?(Re=this.head.data.slice(0,ce),this.head.data=this.head.data.slice(ce)):Re=ce===this.head.data.length?this.shift():Ce?this._getString(ce):this._getBuffer(ce),Re}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ce){var Ce=this.head,Re=1,ie=Ce.data;for(ce-=ie.length;Ce=Ce.next;){var oe=Ce.data,N=ce>oe.length?oe.length:ce;if(ie+=N===oe.length?oe:oe.slice(0,ce),0==(ce-=N)){N===oe.length?(++Re,this.head=Ce.next?Ce.next:this.tail=null):(this.head=Ce,Ce.data=oe.slice(N));break}++Re}return this.length-=Re,ie}},{key:"_getBuffer",value:function(ce){var Ce=q.allocUnsafe(ce),Re=this.head,ie=1;for(Re.data.copy(Ce),ce-=Re.data.length;Re=Re.next;){var oe=Re.data,N=ce>oe.length?oe.length:ce;if(oe.copy(Ce,Ce.length-ce,0,N),0==(ce-=N)){N===oe.length?(++ie,this.head=Re.next?Re.next:this.tail=null):(this.head=Re,Re.data=oe.slice(N));break}++ie}return this.length-=ie,Ce}},{key:se,value:function(ce,Ce){return te(this,function L(K){for(var z=1;z<arguments.length;z++){var ce=null!=arguments[z]?arguments[z]:{};z%2?Y(Object(ce),!0).forEach(function(Ce){G(K,Ce,ce[Ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(ce)):Y(Object(ce)).forEach(function(Ce){Object.defineProperty(K,Ce,Object.getOwnPropertyDescriptor(ce,Ce))})}return K}({},Ce,{depth:0,customInspect:!1}))}}]),K}()},1920:Ve=>{"use strict";function W(j,D){G(j,D),Y(j)}function Y(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function G(j,D){j.emit("error",D)}Ve.exports={destroy:function Ae(j,D){var R=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(D?D(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(G,this,j)):process.nextTick(G,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(te){!D&&te?R._writableState?R._writableState.errorEmitted?process.nextTick(Y,R):(R._writableState.errorEmitted=!0,process.nextTick(W,R,te)):process.nextTick(W,R,te):D?(process.nextTick(Y,R),D(te)):process.nextTick(Y,R)}),this)},undestroy:function L(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function U(j,D){var R=j._readableState,q=j._writableState;R&&R.autoDestroy||q&&q.autoDestroy?j.destroy(D):j.emit("error",D)}}},7542:(Ve,Ae,W)=>{"use strict";var Y=W(891).q.ERR_STREAM_PREMATURE_CLOSE;function G(){}Ve.exports=function j(D,R,q){if("function"==typeof R)return j(D,null,R);R||(R={}),q=function L(D){var R=!1;return function(){if(!R){R=!0;for(var q=arguments.length,ne=new Array(q),te=0;te<q;te++)ne[te]=arguments[te];D.apply(this,ne)}}}(q||G);var ne=R.readable||!1!==R.readable&&D.readable,te=R.writable||!1!==R.writable&&D.writable,se=function(){D.writable||K()},ee=D._writableState&&D._writableState.finished,K=function(){te=!1,ee=!0,ne||q.call(D)},z=D._readableState&&D._readableState.endEmitted,ce=function(){ne=!1,z=!0,te||q.call(D)},Ce=function(N){q.call(D,N)},Re=function(){var N;return ne&&!z?((!D._readableState||!D._readableState.ended)&&(N=new Y),q.call(D,N)):te&&!ee?((!D._writableState||!D._writableState.ended)&&(N=new Y),q.call(D,N)):void 0},ie=function(){D.req.on("finish",K)};return function U(D){return D.setHeader&&"function"==typeof D.abort}(D)?(D.on("complete",K),D.on("abort",Re),D.req?ie():D.on("request",ie)):te&&!D._writableState&&(D.on("end",se),D.on("close",se)),D.on("end",ce),D.on("finish",K),!1!==R.error&&D.on("error",Ce),D.on("close",Re),function(){D.removeListener("complete",K),D.removeListener("abort",Re),D.removeListener("request",ie),D.req&&D.req.removeListener("finish",K),D.removeListener("end",se),D.removeListener("close",se),D.removeListener("finish",K),D.removeListener("end",ce),D.removeListener("error",Ce),D.removeListener("close",Re)}}},7412:Ve=>{Ve.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(Ve,Ae,W)=>{"use strict";var Y,G=W(891).q,U=G.ERR_MISSING_ARGS,j=G.ERR_STREAM_DESTROYED;function D(K){if(K)throw K}function q(K,z,ce,Ce){Ce=function L(K){var z=!1;return function(){z||(z=!0,K.apply(void 0,arguments))}}(Ce);var Re=!1;K.on("close",function(){Re=!0}),void 0===Y&&(Y=W(7542)),Y(K,{readable:z,writable:ce},function(oe){if(oe)return Ce(oe);Re=!0,Ce()});var ie=!1;return function(oe){if(!Re&&!ie){if(ie=!0,function R(K){return K.setHeader&&"function"==typeof K.abort}(K))return K.abort();if("function"==typeof K.destroy)return K.destroy();Ce(oe||new j("pipe"))}}}function ne(K){K()}function te(K,z){return K.pipe(z)}function se(K){return K.length&&"function"==typeof K[K.length-1]?K.pop():D}Ve.exports=function ee(){for(var K=arguments.length,z=new Array(K),ce=0;ce<K;ce++)z[ce]=arguments[ce];var Ce=se(z);if(Array.isArray(z[0])&&(z=z[0]),z.length<2)throw new U("streams");var Re,ie=z.map(function(oe,N){var V=N<z.length-1;return q(oe,V,N>0,function(fe){Re||(Re=fe),fe&&ie.forEach(ne),!V&&(ie.forEach(ne),Ce(Re))})});return z.reduce(te)}},7102:(Ve,Ae,W)=>{"use strict";var Y=W(891).q.ERR_INVALID_OPT_VALUE;Ve.exports={getHighWaterMark:function G(U,j,D,R){var q=function L(U,j,D){return null!=U.highWaterMark?U.highWaterMark:j?U[D]:null}(j,R,D);if(null!=q){if(!isFinite(q)||Math.floor(q)!==q||q<0)throw new Y(R?D:"highWaterMark",q);return Math.floor(q)}return U.objectMode?16:16384}}},4970:(Ve,Ae,W)=>{Ve.exports=W(9069).EventEmitter},1503:(Ve,Ae,W)=>{!function(Y){Y.parser=function($e,le){return new G($e,le)},Y.SAXParser=G,Y.SAXStream=te,Y.createStream=function ne($e,le){return new te($e,le)},Y.MAX_BUFFER_LENGTH=65536;var R,L=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function G($e,le){if(!(this instanceof G))return new G($e,le);var ot=this;(function j($e){for(var le=0,ot=L.length;le<ot;le++)$e[L[le]]=""})(ot),ot.q=ot.c="",ot.bufferCheckPosition=Y.MAX_BUFFER_LENGTH,ot.opt=le||{},ot.opt.lowercase=ot.opt.lowercase||ot.opt.lowercasetags,ot.looseCase=ot.opt.lowercase?"toLowerCase":"toUpperCase",ot.tags=[],ot.closed=ot.closedRoot=ot.sawRoot=!1,ot.tag=ot.error=null,ot.strict=!!$e,ot.noscript=!(!$e&&!ot.opt.noscript),ot.state=Pe.BEGIN,ot.strictEntities=ot.opt.strictEntities,ot.ENTITIES=Object.create(ot.strictEntities?Y.XML_ENTITIES:Y.ENTITIES),ot.attribList=[],ot.opt.xmlns&&(ot.ns=Object.create(ce)),ot.trackPosition=!1!==ot.opt.position,ot.trackPosition&&(ot.position=ot.line=ot.column=0),Le(ot,"onready")}Y.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function($e){function le(){}return le.prototype=$e,new le}),Object.keys||(Object.keys=function($e){var le=[];for(var ot in $e)$e.hasOwnProperty(ot)&&le.push(ot);return le}),G.prototype={end:function(){mt(this)},write:function An($e){var le=this;if(this.error)throw this.error;if(le.closed)return yt(le,"Cannot write after close. Assign an onready handler.");if(null===$e)return mt(le);"object"==typeof $e&&($e=$e.toString());for(var ot=0,Je="";Je=wn($e,ot++),le.c=Je,Je;)switch(le.trackPosition&&(le.position++,"\n"===Je?(le.line++,le.column=0):le.column++),le.state){case Pe.BEGIN:if(le.state=Pe.BEGIN_WHITESPACE,"\ufeff"===Je)continue;cn(le,Je);continue;case Pe.BEGIN_WHITESPACE:cn(le,Je);continue;case Pe.TEXT:if(le.sawRoot&&!le.closedRoot){for(var Sn=ot-1;Je&&"<"!==Je&&"&"!==Je;)(Je=wn($e,ot++))&&le.trackPosition&&(le.position++,"\n"===Je?(le.line++,le.column=0):le.column++);le.textNode+=$e.substring(Sn,ot-1)}"<"!==Je||le.sawRoot&&le.closedRoot&&!le.strict?(!N(Je)&&(!le.sawRoot||le.closedRoot)&&_t(le,"Text data outside of root node."),"&"===Je?le.state=Pe.TEXT_ENTITY:le.textNode+=Je):(le.state=Pe.OPEN_WAKA,le.startTagPosition=le.position);continue;case Pe.SCRIPT:"<"===Je?le.state=Pe.SCRIPT_ENDING:le.script+=Je;continue;case Pe.SCRIPT_ENDING:"/"===Je?le.state=Pe.CLOSE_TAG:(le.script+="<"+Je,le.state=Pe.SCRIPT);continue;case Pe.OPEN_WAKA:"!"===Je?(le.state=Pe.SGML_DECL,le.sgmlDecl=""):N(Je)||(fe(Ce,Je)?(le.state=Pe.OPEN_TAG,le.tagName=Je):"/"===Je?(le.state=Pe.CLOSE_TAG,le.tagName=""):"?"===Je?(le.state=Pe.PROC_INST,le.procInstName=le.procInstBody=""):(_t(le,"Unencoded <"),le.startTagPosition+1<le.position&&(Je=new Array(le.position-le.startTagPosition).join(" ")+Je),le.textNode+="<"+Je,le.state=Pe.TEXT));continue;case Pe.SGML_DECL:"[CDATA["===(le.sgmlDecl+Je).toUpperCase()?(at(le,"onopencdata"),le.state=Pe.CDATA,le.sgmlDecl="",le.cdata=""):le.sgmlDecl+Je==="--"?(le.state=Pe.COMMENT,le.comment="",le.sgmlDecl=""):"DOCTYPE"===(le.sgmlDecl+Je).toUpperCase()?(le.state=Pe.DOCTYPE,(le.doctype||le.sawRoot)&&_t(le,"Inappropriately located doctype declaration"),le.doctype="",le.sgmlDecl=""):">"===Je?(at(le,"onsgmldeclaration",le.sgmlDecl),le.sgmlDecl="",le.state=Pe.TEXT):(V(Je)&&(le.state=Pe.SGML_DECL_QUOTED),le.sgmlDecl+=Je);continue;case Pe.SGML_DECL_QUOTED:Je===le.q&&(le.state=Pe.SGML_DECL,le.q=""),le.sgmlDecl+=Je;continue;case Pe.DOCTYPE:">"===Je?(le.state=Pe.TEXT,at(le,"ondoctype",le.doctype),le.doctype=!0):(le.doctype+=Je,"["===Je?le.state=Pe.DOCTYPE_DTD:V(Je)&&(le.state=Pe.DOCTYPE_QUOTED,le.q=Je));continue;case Pe.DOCTYPE_QUOTED:le.doctype+=Je,Je===le.q&&(le.q="",le.state=Pe.DOCTYPE);continue;case Pe.DOCTYPE_DTD:le.doctype+=Je,"]"===Je?le.state=Pe.DOCTYPE:V(Je)&&(le.state=Pe.DOCTYPE_DTD_QUOTED,le.q=Je);continue;case Pe.DOCTYPE_DTD_QUOTED:le.doctype+=Je,Je===le.q&&(le.state=Pe.DOCTYPE_DTD,le.q="");continue;case Pe.COMMENT:"-"===Je?le.state=Pe.COMMENT_ENDING:le.comment+=Je;continue;case Pe.COMMENT_ENDING:"-"===Je?(le.state=Pe.COMMENT_ENDED,le.comment=Ge(le.opt,le.comment),le.comment&&at(le,"oncomment",le.comment),le.comment=""):(le.comment+="-"+Je,le.state=Pe.COMMENT);continue;case Pe.COMMENT_ENDED:">"!==Je?(_t(le,"Malformed comment"),le.comment+="--"+Je,le.state=Pe.COMMENT):le.state=Pe.TEXT;continue;case Pe.CDATA:"]"===Je?le.state=Pe.CDATA_ENDING:le.cdata+=Je;continue;case Pe.CDATA_ENDING:"]"===Je?le.state=Pe.CDATA_ENDING_2:(le.cdata+="]"+Je,le.state=Pe.CDATA);continue;case Pe.CDATA_ENDING_2:">"===Je?(le.cdata&&at(le,"oncdata",le.cdata),at(le,"onclosecdata"),le.cdata="",le.state=Pe.TEXT):"]"===Je?le.cdata+="]":(le.cdata+="]]"+Je,le.state=Pe.CDATA);continue;case Pe.PROC_INST:"?"===Je?le.state=Pe.PROC_INST_ENDING:N(Je)?le.state=Pe.PROC_INST_BODY:le.procInstName+=Je;continue;case Pe.PROC_INST_BODY:if(!le.procInstBody&&N(Je))continue;"?"===Je?le.state=Pe.PROC_INST_ENDING:le.procInstBody+=Je;continue;case Pe.PROC_INST_ENDING:">"===Je?(at(le,"onprocessinginstruction",{name:le.procInstName,body:le.procInstBody}),le.procInstName=le.procInstBody="",le.state=Pe.TEXT):(le.procInstBody+="?"+Je,le.state=Pe.PROC_INST_BODY);continue;case Pe.OPEN_TAG:fe(Re,Je)?le.tagName+=Je:(Fn(le),">"===Je?nn(le):"/"===Je?le.state=Pe.OPEN_TAG_SLASH:(N(Je)||_t(le,"Invalid character in tag name"),le.state=Pe.ATTRIB));continue;case Pe.OPEN_TAG_SLASH:">"===Je?(nn(le,!0),Ze(le)):(_t(le,"Forward-slash in opening tag not followed by >"),le.state=Pe.ATTRIB);continue;case Pe.ATTRIB:if(N(Je))continue;">"===Je?nn(le):"/"===Je?le.state=Pe.OPEN_TAG_SLASH:fe(Ce,Je)?(le.attribName=Je,le.attribValue="",le.state=Pe.ATTRIB_NAME):_t(le,"Invalid attribute name");continue;case Pe.ATTRIB_NAME:"="===Je?le.state=Pe.ATTRIB_VALUE:">"===Je?(_t(le,"Attribute without value"),le.attribValue=le.attribName,Pn(le),nn(le)):N(Je)?le.state=Pe.ATTRIB_NAME_SAW_WHITE:fe(Re,Je)?le.attribName+=Je:_t(le,"Invalid attribute name");continue;case Pe.ATTRIB_NAME_SAW_WHITE:if("="===Je)le.state=Pe.ATTRIB_VALUE;else{if(N(Je))continue;_t(le,"Attribute without value"),le.tag.attributes[le.attribName]="",le.attribValue="",at(le,"onattribute",{name:le.attribName,value:""}),le.attribName="",">"===Je?nn(le):fe(Ce,Je)?(le.attribName=Je,le.state=Pe.ATTRIB_NAME):(_t(le,"Invalid attribute name"),le.state=Pe.ATTRIB)}continue;case Pe.ATTRIB_VALUE:if(N(Je))continue;V(Je)?(le.q=Je,le.state=Pe.ATTRIB_VALUE_QUOTED):(_t(le,"Unquoted attribute value"),le.state=Pe.ATTRIB_VALUE_UNQUOTED,le.attribValue=Je);continue;case Pe.ATTRIB_VALUE_QUOTED:if(Je!==le.q){"&"===Je?le.state=Pe.ATTRIB_VALUE_ENTITY_Q:le.attribValue+=Je;continue}Pn(le),le.q="",le.state=Pe.ATTRIB_VALUE_CLOSED;continue;case Pe.ATTRIB_VALUE_CLOSED:N(Je)?le.state=Pe.ATTRIB:">"===Je?nn(le):"/"===Je?le.state=Pe.OPEN_TAG_SLASH:fe(Ce,Je)?(_t(le,"No whitespace between attributes"),le.attribName=Je,le.attribValue="",le.state=Pe.ATTRIB_NAME):_t(le,"Invalid attribute name");continue;case Pe.ATTRIB_VALUE_UNQUOTED:if(!J(Je)){"&"===Je?le.state=Pe.ATTRIB_VALUE_ENTITY_U:le.attribValue+=Je;continue}Pn(le),">"===Je?nn(le):le.state=Pe.ATTRIB;continue;case Pe.CLOSE_TAG:if(le.tagName)">"===Je?Ze(le):fe(Re,Je)?le.tagName+=Je:le.script?(le.script+="</"+le.tagName,le.tagName="",le.state=Pe.SCRIPT):(N(Je)||_t(le,"Invalid tagname in closing tag"),le.state=Pe.CLOSE_TAG_SAW_WHITE);else{if(N(Je))continue;ke(Ce,Je)?le.script?(le.script+="</"+Je,le.state=Pe.SCRIPT):_t(le,"Invalid tagname in closing tag."):le.tagName=Je}continue;case Pe.CLOSE_TAG_SAW_WHITE:if(N(Je))continue;">"===Je?Ze(le):_t(le,"Invalid characters in closing tag");continue;case Pe.TEXT_ENTITY:case Pe.ATTRIB_VALUE_ENTITY_Q:case Pe.ATTRIB_VALUE_ENTITY_U:var pt,ht;switch(le.state){case Pe.TEXT_ENTITY:pt=Pe.TEXT,ht="textNode";break;case Pe.ATTRIB_VALUE_ENTITY_Q:pt=Pe.ATTRIB_VALUE_QUOTED,ht="attribValue";break;case Pe.ATTRIB_VALUE_ENTITY_U:pt=Pe.ATTRIB_VALUE_UNQUOTED,ht="attribValue"}";"===Je?(le[ht]+=Ct(le),le.entity="",le.state=pt):fe(le.entity.length?oe:ie,Je)?le.entity+=Je:(_t(le,"Invalid character in entity name"),le[ht]+="&"+le.entity+Je,le.entity="",le.state=pt);continue;default:throw new Error(le,"Unknown state: "+le.state)}return le.position>=le.bufferCheckPosition&&function U($e){for(var le=Math.max(Y.MAX_BUFFER_LENGTH,10),ot=0,Je=0,Sn=L.length;Je<Sn;Je++){var Hn=$e[L[Je]].length;if(Hn>le)switch(L[Je]){case"textNode":It($e);break;case"cdata":at($e,"oncdata",$e.cdata),$e.cdata="";break;case"script":at($e,"onscript",$e.script),$e.script="";break;default:yt($e,"Max buffer length exceeded: "+L[Je])}ot=Math.max(ot,Hn)}$e.bufferCheckPosition=Y.MAX_BUFFER_LENGTH-ot+$e.position}(le),le},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function D($e){It($e),""!==$e.cdata&&(at($e,"oncdata",$e.cdata),$e.cdata=""),""!==$e.script&&(at($e,"onscript",$e.script),$e.script="")}(this)}};try{R=W(295).Stream}catch{R=function(){}}var q=Y.EVENTS.filter(function($e){return"error"!==$e&&"end"!==$e});function te($e,le){if(!(this instanceof te))return new te($e,le);R.apply(this),this._parser=new G($e,le),this.writable=!0,this.readable=!0;var ot=this;this._parser.onend=function(){ot.emit("end")},this._parser.onerror=function(Je){ot.emit("error",Je),ot._parser.error=null},this._decoder=null,q.forEach(function(Je){Object.defineProperty(ot,"on"+Je,{get:function(){return ot._parser["on"+Je]},set:function(Sn){if(!Sn)return ot.removeAllListeners(Je),ot._parser["on"+Je]=Sn,Sn;ot.on(Je,Sn)},enumerable:!0,configurable:!1})})}(te.prototype=Object.create(R.prototype,{constructor:{value:te}})).write=function($e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer($e)){if(!this._decoder){var le=W(3054).s;this._decoder=new le("utf8")}$e=this._decoder.write($e)}return this._parser.write($e.toString()),this.emit("data",$e),!0},te.prototype.end=function($e){return $e&&$e.length&&this.write($e),this._parser.end(),!0},te.prototype.on=function($e,le){var ot=this;return!ot._parser["on"+$e]&&-1!==q.indexOf($e)&&(ot._parser["on"+$e]=function(){var Je=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);Je.splice(0,0,$e),ot.emit.apply(ot,Je)}),R.prototype.on.call(ot,$e,le)};var K="http://www.w3.org/XML/1998/namespace",z="http://www.w3.org/2000/xmlns/",ce={xml:K,xmlns:z},Ce=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Re=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ie=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,oe=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function N($e){return" "===$e||"\n"===$e||"\r"===$e||"\t"===$e}function V($e){return'"'===$e||"'"===$e}function J($e){return">"===$e||N($e)}function fe($e,le){return $e.test(le)}function ke($e,le){return!fe($e,le)}var $e,le,ot,Pe=0;for(var nt in Y.STATE={BEGIN:Pe++,BEGIN_WHITESPACE:Pe++,TEXT:Pe++,TEXT_ENTITY:Pe++,OPEN_WAKA:Pe++,SGML_DECL:Pe++,SGML_DECL_QUOTED:Pe++,DOCTYPE:Pe++,DOCTYPE_QUOTED:Pe++,DOCTYPE_DTD:Pe++,DOCTYPE_DTD_QUOTED:Pe++,COMMENT_STARTING:Pe++,COMMENT:Pe++,COMMENT_ENDING:Pe++,COMMENT_ENDED:Pe++,CDATA:Pe++,CDATA_ENDING:Pe++,CDATA_ENDING_2:Pe++,PROC_INST:Pe++,PROC_INST_BODY:Pe++,PROC_INST_ENDING:Pe++,OPEN_TAG:Pe++,OPEN_TAG_SLASH:Pe++,ATTRIB:Pe++,ATTRIB_NAME:Pe++,ATTRIB_NAME_SAW_WHITE:Pe++,ATTRIB_VALUE:Pe++,ATTRIB_VALUE_QUOTED:Pe++,ATTRIB_VALUE_CLOSED:Pe++,ATTRIB_VALUE_UNQUOTED:Pe++,ATTRIB_VALUE_ENTITY_Q:Pe++,ATTRIB_VALUE_ENTITY_U:Pe++,CLOSE_TAG:Pe++,CLOSE_TAG_SAW_WHITE:Pe++,SCRIPT:Pe++,SCRIPT_ENDING:Pe++},Y.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Y.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(Y.ENTITIES).forEach(function($e){var le=Y.ENTITIES[$e],ot="number"==typeof le?String.fromCharCode(le):le;Y.ENTITIES[$e]=ot}),Y.STATE)Y.STATE[Y.STATE[nt]]=nt;function Le($e,le,ot){$e[le]&&$e[le](ot)}function at($e,le,ot){$e.textNode&&It($e),Le($e,le,ot)}function It($e){$e.textNode=Ge($e.opt,$e.textNode),$e.textNode&&Le($e,"ontext",$e.textNode),$e.textNode=""}function Ge($e,le){return $e.trim&&(le=le.trim()),$e.normalize&&(le=le.replace(/\s+/g," ")),le}function yt($e,le){return It($e),$e.trackPosition&&(le+="\nLine: "+$e.line+"\nColumn: "+$e.column+"\nChar: "+$e.c),le=new Error(le),$e.error=le,Le($e,"onerror",le),$e}function mt($e){return $e.sawRoot&&!$e.closedRoot&&_t($e,"Unclosed root tag"),$e.state!==Pe.BEGIN&&$e.state!==Pe.BEGIN_WHITESPACE&&$e.state!==Pe.TEXT&&yt($e,"Unexpected end"),It($e),$e.c="",$e.closed=!0,Le($e,"onend"),G.call($e,$e.strict,$e.opt),$e}function _t($e,le){if("object"!=typeof $e||!($e instanceof G))throw new Error("bad call to strictFail");$e.strict&&yt($e,le)}function Fn($e){$e.strict||($e.tagName=$e.tagName[$e.looseCase]());var le=$e.tags[$e.tags.length-1]||$e,ot=$e.tag={name:$e.tagName,attributes:{}};$e.opt.xmlns&&(ot.ns=le.ns),$e.attribList.length=0,at($e,"onopentagstart",ot)}function Ot($e,le){var Je=$e.indexOf(":")<0?["",$e]:$e.split(":"),Sn=Je[0],Hn=Je[1];return le&&"xmlns"===$e&&(Sn="xmlns",Hn=""),{prefix:Sn,local:Hn}}function Pn($e){if($e.strict||($e.attribName=$e.attribName[$e.looseCase]()),-1!==$e.attribList.indexOf($e.attribName)||$e.tag.attributes.hasOwnProperty($e.attribName))$e.attribName=$e.attribValue="";else{if($e.opt.xmlns){var le=Ot($e.attribName,!0),Je=le.local;if("xmlns"===le.prefix)if("xml"===Je&&$e.attribValue!==K)_t($e,"xml: prefix must be bound to "+K+"\nActual: "+$e.attribValue);else if("xmlns"===Je&&$e.attribValue!==z)_t($e,"xmlns: prefix must be bound to "+z+"\nActual: "+$e.attribValue);else{var Sn=$e.tag,Hn=$e.tags[$e.tags.length-1]||$e;Sn.ns===Hn.ns&&(Sn.ns=Object.create(Hn.ns)),Sn.ns[Je]=$e.attribValue}$e.attribList.push([$e.attribName,$e.attribValue])}else $e.tag.attributes[$e.attribName]=$e.attribValue,at($e,"onattribute",{name:$e.attribName,value:$e.attribValue});$e.attribName=$e.attribValue=""}}function nn($e,le){if($e.opt.xmlns){var ot=$e.tag,Je=Ot($e.tagName);ot.prefix=Je.prefix,ot.local=Je.local,ot.uri=ot.ns[Je.prefix]||"",ot.prefix&&!ot.uri&&(_t($e,"Unbound namespace prefix: "+JSON.stringify($e.tagName)),ot.uri=Je.prefix),ot.ns&&($e.tags[$e.tags.length-1]||$e).ns!==ot.ns&&Object.keys(ot.ns).forEach(function(Jn){at($e,"onopennamespace",{prefix:Jn,uri:ot.ns[Jn]})});for(var Hn=0,pt=$e.attribList.length;Hn<pt;Hn++){var ht=$e.attribList[Hn],Ht=ht[0],We=ht[1],Ie=Ot(Ht,!0),Me=Ie.prefix,dn=""===Me?"":ot.ns[Me]||"",Xn={name:Ht,value:We,prefix:Me,local:Ie.local,uri:dn};Me&&"xmlns"!==Me&&!dn&&(_t($e,"Unbound namespace prefix: "+JSON.stringify(Me)),Xn.uri=Me),$e.tag.attributes[Ht]=Xn,at($e,"onattribute",Xn)}$e.attribList.length=0}$e.tag.isSelfClosing=!!le,$e.sawRoot=!0,$e.tags.push($e.tag),at($e,"onopentag",$e.tag),le||($e.state=$e.noscript||"script"!==$e.tagName.toLowerCase()?Pe.TEXT:Pe.SCRIPT,$e.tag=null,$e.tagName=""),$e.attribName=$e.attribValue="",$e.attribList.length=0}function Ze($e){if(!$e.tagName)return _t($e,"Weird empty close tag."),$e.textNode+="</>",void($e.state=Pe.TEXT);if($e.script){if("script"!==$e.tagName)return $e.script+="</"+$e.tagName+">",$e.tagName="",void($e.state=Pe.SCRIPT);at($e,"onscript",$e.script),$e.script=""}var le=$e.tags.length,ot=$e.tagName;$e.strict||(ot=ot[$e.looseCase]());for(var Je=ot;le--&&$e.tags[le].name!==Je;)_t($e,"Unexpected close tag");if(le<0)return _t($e,"Unmatched closing tag: "+$e.tagName),$e.textNode+="</"+$e.tagName+">",void($e.state=Pe.TEXT);$e.tagName=ot;for(var Hn=$e.tags.length;Hn-- >le;){var pt=$e.tag=$e.tags.pop();$e.tagName=$e.tag.name,at($e,"onclosetag",$e.tagName);var ht={};for(var Ht in pt.ns)ht[Ht]=pt.ns[Ht];$e.opt.xmlns&&pt.ns!==($e.tags[$e.tags.length-1]||$e).ns&&Object.keys(pt.ns).forEach(function(Ie){at($e,"onclosenamespace",{prefix:Ie,uri:pt.ns[Ie]})})}0===le&&($e.closedRoot=!0),$e.tagName=$e.attribValue=$e.attribName="",$e.attribList.length=0,$e.state=Pe.TEXT}function Ct($e){var Je,le=$e.entity,ot=le.toLowerCase(),Sn="";return $e.ENTITIES[le]?$e.ENTITIES[le]:$e.ENTITIES[ot]?$e.ENTITIES[ot]:("#"===(le=ot).charAt(0)&&("x"===le.charAt(1)?(le=le.slice(2),Sn=(Je=parseInt(le,16)).toString(16)):(le=le.slice(1),Sn=(Je=parseInt(le,10)).toString(10))),le=le.replace(/^0+/,""),isNaN(Je)||Sn.toLowerCase()!==le?(_t($e,"Invalid character entity"),"&"+$e.entity+";"):String.fromCodePoint(Je))}function cn($e,le){"<"===le?($e.state=Pe.OPEN_WAKA,$e.startTagPosition=$e.position):N(le)||(_t($e,"Non-whitespace before first tag."),$e.textNode=le,$e.state=Pe.TEXT)}function wn($e,le){var ot="";return le<$e.length&&(ot=$e.charAt(le)),ot}Pe=Y.STATE,String.fromCodePoint||($e=String.fromCharCode,le=Math.floor,ot=function(){var Je=16384,Sn=[],ht=-1,Ht=arguments.length;if(!Ht)return"";for(var We="";++ht<Ht;){var Ie=Number(arguments[ht]);if(!isFinite(Ie)||Ie<0||Ie>1114111||le(Ie)!==Ie)throw RangeError("Invalid code point: "+Ie);Ie<=65535?Sn.push(Ie):Sn.push(55296+((Ie-=65536)>>10),Ie%1024+56320),(ht+1===Ht||Sn.length>Je)&&(We+=$e.apply(null,Sn),Sn.length=0)}return We},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:ot,configurable:!0,writable:!0}):String.fromCodePoint=ot)}(Ae)},6563:function(){!function(Ve,Ae){"use strict";if(!Ve.setImmediate){var U,W=1,Y={},L=!1,G=Ve.document,ce=Object.getPrototypeOf&&Object.getPrototypeOf(Ve);ce=ce&&ce.setTimeout?ce:Ve,"[object process]"==={}.toString.call(Ve.process)?function ne(){U=function(Ce){process.nextTick(function(){q(Ce)})}}():function te(){if(Ve.postMessage&&!Ve.importScripts){var Ce=!0,Re=Ve.onmessage;return Ve.onmessage=function(){Ce=!1},Ve.postMessage("","*"),Ve.onmessage=Re,Ce}}()?function se(){var Ce="setImmediate$"+Math.random()+"$",Re=function(ie){ie.source===Ve&&"string"==typeof ie.data&&0===ie.data.indexOf(Ce)&&q(+ie.data.slice(Ce.length))};Ve.addEventListener?Ve.addEventListener("message",Re,!1):Ve.attachEvent("onmessage",Re),U=function(ie){Ve.postMessage(Ce+ie,"*")}}():Ve.MessageChannel?function ee(){var Ce=new MessageChannel;Ce.port1.onmessage=function(Re){q(Re.data)},U=function(Re){Ce.port2.postMessage(Re)}}():G&&"onreadystatechange"in G.createElement("script")?function K(){var Ce=G.documentElement;U=function(Re){var ie=G.createElement("script");ie.onreadystatechange=function(){q(Re),ie.onreadystatechange=null,Ce.removeChild(ie),ie=null},Ce.appendChild(ie)}}():function z(){U=function(Ce){setTimeout(q,0,Ce)}}(),ce.setImmediate=function j(Ce){"function"!=typeof Ce&&(Ce=new Function(""+Ce));for(var Re=new Array(arguments.length-1),ie=0;ie<Re.length;ie++)Re[ie]=arguments[ie+1];var oe={callback:Ce,args:Re};return Y[W]=oe,U(W),W++},ce.clearImmediate=D}function D(Ce){delete Y[Ce]}function q(Ce){if(L)setTimeout(q,0,Ce);else{var Re=Y[Ce];if(Re){L=!0;try{!function R(Ce){var Re=Ce.callback,ie=Ce.args;switch(ie.length){case 0:Re();break;case 1:Re(ie[0]);break;case 2:Re(ie[0],ie[1]);break;case 3:Re(ie[0],ie[1],ie[2]);break;default:Re.apply(void 0,ie)}}(Re)}finally{D(Ce),L=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},2002:function(Ve,Ae,W){"use strict";var ne,Y=this&&this.__extends||(ne=function(te,se){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,K){ee.__proto__=K}||function(ee,K){for(var z in K)Object.prototype.hasOwnProperty.call(K,z)&&(ee[z]=K[z])})(te,se)},function(te,se){if("function"!=typeof se&&null!==se)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");function ee(){this.constructor=te}ne(te,se),te.prototype=null===se?Object.create(se):(ee.prototype=se.prototype,new ee)}),L=this&&this.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(Ae,"__esModule",{value:!0});var G=W(2630),U=L(W(4539)),j=W(1699),D=W(57),R=1.5,q=function(ne){function te(){var se=ne.call(this)||this;return se.x=.5,se.y=.5,se.angle=0,se.ratio=1,se.minRatio=null,se.maxRatio=null,se.nextFrame=null,se.previousState=null,se.enabled=!0,se.previousState=se.getState(),se}return Y(te,ne),te.from=function(se){return(new te).setState(se)},te.prototype.enable=function(){return this.enabled=!0,this},te.prototype.disable=function(){return this.enabled=!1,this},te.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},te.prototype.hasState=function(se){return this.x===se.x&&this.y===se.y&&this.ratio===se.ratio&&this.angle===se.angle},te.prototype.getPreviousState=function(){var se=this.previousState;return se?{x:se.x,y:se.y,angle:se.angle,ratio:se.ratio}:null},te.prototype.getBoundedRatio=function(se){var ee=se;return"number"==typeof this.minRatio&&(ee=Math.max(ee,this.minRatio)),"number"==typeof this.maxRatio&&(ee=Math.min(ee,this.maxRatio)),ee},te.prototype.validateState=function(se){var ee={};return"number"==typeof se.x&&(ee.x=se.x),"number"==typeof se.y&&(ee.y=se.y),"number"==typeof se.angle&&(ee.angle=se.angle),"number"==typeof se.ratio&&(ee.ratio=this.getBoundedRatio(se.ratio)),ee},te.prototype.isAnimated=function(){return!!this.nextFrame},te.prototype.setState=function(se){if(!this.enabled)return this;this.previousState=this.getState();var ee=this.validateState(se);return"number"==typeof ee.x&&(this.x=ee.x),"number"==typeof ee.y&&(this.y=ee.y),"number"==typeof ee.angle&&(this.angle=ee.angle),"number"==typeof ee.ratio&&(this.ratio=ee.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},te.prototype.animate=function(se,ee,K){var z=this;if(this.enabled){var ce=Object.assign({},G.ANIMATE_DEFAULTS,ee),Ce=this.validateState(se),Re="function"==typeof ce.easing?ce.easing:U.default[ce.easing],ie=Date.now(),oe=this.getState(),N=function(){var V=(Date.now()-ie)/ce.duration;if(V>=1)return z.nextFrame=null,z.setState(Ce),void(z.animationCallback&&(z.animationCallback.call(null),z.animationCallback=void 0));var J=Re(V),fe={};"number"==typeof Ce.x&&(fe.x=oe.x+(Ce.x-oe.x)*J),"number"==typeof Ce.y&&(fe.y=oe.y+(Ce.y-oe.y)*J),"number"==typeof Ce.angle&&(fe.angle=oe.angle+(Ce.angle-oe.angle)*J),"number"==typeof Ce.ratio&&(fe.ratio=oe.ratio+(Ce.ratio-oe.ratio)*J),z.setState(fe),z.nextFrame=(0,j.requestFrame)(N)};this.nextFrame?((0,j.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,j.requestFrame)(N)):N(),this.animationCallback=K}},te.prototype.animatedZoom=function(se){if(se){if("number"==typeof se)return this.animate({ratio:this.ratio/se});this.animate({ratio:this.ratio/(se.factor||R)},se)}else this.animate({ratio:this.ratio/R})},te.prototype.animatedUnzoom=function(se){if(se){if("number"==typeof se)return this.animate({ratio:this.ratio*se});this.animate({ratio:this.ratio*(se.factor||R)},se)}else this.animate({ratio:this.ratio*R})},te.prototype.animatedReset=function(se){this.animate({x:.5,y:.5,ratio:1,angle:0},se)},te.prototype.copy=function(){return te.from(this.getState())},te}(D.TypedEventEmitter);Ae.default=q},5473:function(Ve,Ae,W){"use strict";var ee,Y=this&&this.__extends||(ee=function(K,z){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ce,Ce){ce.__proto__=Ce}||function(ce,Ce){for(var Re in Ce)Object.prototype.hasOwnProperty.call(Ce,Re)&&(ce[Re]=Ce[Re])})(K,z)},function(K,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function ce(){this.constructor=K}ee(K,z),K.prototype=null===z?Object.create(z):(ce.prototype=z.prototype,new ce)}),L=this&&this.__assign||function(){return L=Object.assign||function(ee){for(var K,z=1,ce=arguments.length;z<ce;z++)for(var Ce in K=arguments[z])Object.prototype.hasOwnProperty.call(K,Ce)&&(ee[Ce]=K[Ce]);return ee},L.apply(this,arguments)};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.getWheelDelta=Ae.getTouchCoords=Ae.getTouchesArray=Ae.getWheelCoords=Ae.getMouseCoords=Ae.getPosition=void 0;var G=W(57);function U(ee,K){var z=K.getBoundingClientRect();return{x:ee.clientX-z.left,y:ee.clientY-z.top}}function j(ee,K){var z=L(L({},U(ee,K)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){z.sigmaDefaultPrevented=!0},original:ee});return z}function q(ee){for(var K=[],z=0,ce=Math.min(ee.length,2);z<ce;z++)K.push(ee[z]);return K}function te(ee){if(typeof ee.deltaY<"u")return-3*ee.deltaY/360;if(typeof ee.detail<"u")return ee.detail/-9;throw new Error("Captor: could not extract delta from event.")}Ae.getPosition=U,Ae.getMouseCoords=j,Ae.getWheelCoords=function D(ee,K){return L(L({},j(ee,K)),{delta:te(ee)})},Ae.getTouchesArray=q,Ae.getTouchCoords=function ne(ee,K){return{touches:q(ee.touches).map(function(z){return U(z,K)}),original:ee}},Ae.getWheelDelta=te;var se=function(ee){function K(z,ce){var Ce=ee.call(this)||this;return Ce.container=z,Ce.renderer=ce,Ce}return Y(K,ee),K}(G.TypedEventEmitter);Ae.default=se},2465:function(Ve,Ae,W){"use strict";var Ce,Y=this&&this.__extends||(Ce=function(Re,ie){return(Ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,N){oe.__proto__=N}||function(oe,N){for(var V in N)Object.prototype.hasOwnProperty.call(N,V)&&(oe[V]=N[V])})(Re,ie)},function(Re,ie){if("function"!=typeof ie&&null!==ie)throw new TypeError("Class extends value "+String(ie)+" is not a constructor or null");function oe(){this.constructor=Re}Ce(Re,ie),Re.prototype=null===ie?Object.create(ie):(oe.prototype=ie.prototype,new oe)}),L=this&&this.__createBinding||(Object.create?function(Ce,Re,ie,oe){void 0===oe&&(oe=ie),Object.defineProperty(Ce,oe,{enumerable:!0,get:function(){return Re[ie]}})}:function(Ce,Re,ie,oe){void 0===oe&&(oe=ie),Ce[oe]=Re[ie]}),G=this&&this.__setModuleDefault||(Object.create?function(Ce,Re){Object.defineProperty(Ce,"default",{enumerable:!0,value:Re})}:function(Ce,Re){Ce.default=Re}),U=this&&this.__importStar||function(Ce){if(Ce&&Ce.__esModule)return Ce;var Re={};if(null!=Ce)for(var ie in Ce)"default"!==ie&&Object.prototype.hasOwnProperty.call(Ce,ie)&&L(Re,Ce,ie);return G(Re,Ce),Re};Object.defineProperty(Ae,"__esModule",{value:!0});var j=U(W(5473)),ce=function(Ce){function Re(ie,oe){var N=Ce.call(this,ie,oe)||this;return N.enabled=!0,N.draggedEvents=0,N.downStartTime=null,N.lastMouseX=null,N.lastMouseY=null,N.isMouseDown=!1,N.isMoving=!1,N.movingTimeout=null,N.startCameraState=null,N.clicks=0,N.doubleClickTimeout=null,N.currentWheelDirection=0,N.handleClick=N.handleClick.bind(N),N.handleRightClick=N.handleRightClick.bind(N),N.handleDown=N.handleDown.bind(N),N.handleUp=N.handleUp.bind(N),N.handleMove=N.handleMove.bind(N),N.handleWheel=N.handleWheel.bind(N),N.handleOut=N.handleOut.bind(N),ie.addEventListener("click",N.handleClick,!1),ie.addEventListener("contextmenu",N.handleRightClick,!1),ie.addEventListener("mousedown",N.handleDown,!1),ie.addEventListener("wheel",N.handleWheel,!1),ie.addEventListener("mouseout",N.handleOut,!1),document.addEventListener("mousemove",N.handleMove,!1),document.addEventListener("mouseup",N.handleUp,!1),N}return Y(Re,Ce),Re.prototype.kill=function(){var ie=this.container;ie.removeEventListener("click",this.handleClick),ie.removeEventListener("contextmenu",this.handleRightClick),ie.removeEventListener("mousedown",this.handleDown),ie.removeEventListener("wheel",this.handleWheel),ie.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},Re.prototype.handleClick=function(ie){var oe=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(ie);setTimeout(function(){oe.clicks=0,oe.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",(0,j.getMouseCoords)(ie,this.container))}},Re.prototype.handleRightClick=function(ie){!this.enabled||this.emit("rightClick",(0,j.getMouseCoords)(ie,this.container))},Re.prototype.handleDoubleClick=function(ie){if(this.enabled){ie.preventDefault(),ie.stopPropagation();var oe=(0,j.getMouseCoords)(ie,this.container);if(this.emit("doubleClick",oe),!oe.sigmaDefaultPrevented){var N=this.renderer.getCamera(),V=N.getBoundedRatio(N.getState().ratio/2.2);N.animate(this.renderer.getViewportZoomedState((0,j.getPosition)(ie,this.container),V),{easing:"quadraticInOut",duration:200})}}},Re.prototype.handleDown=function(ie){if(this.enabled){this.startCameraState=this.renderer.getCamera().getState();var oe=(0,j.getPosition)(ie,this.container),V=oe.y;this.lastMouseX=oe.x,this.lastMouseY=V,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0,this.emit("mousedown",(0,j.getMouseCoords)(ie,this.container))}},Re.prototype.handleUp=function(ie){var oe=this;if(this.enabled&&this.isMouseDown){var N=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var V=(0,j.getPosition)(ie,this.container),J=V.x,fe=V.y,ke=N.getState(),Pe=N.getPreviousState()||{x:0,y:0};this.isMoving?N.animate({x:ke.x+3*(ke.x-Pe.x),y:ke.y+3*(ke.y-Pe.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==J||this.lastMouseY!==fe)&&N.setState({x:ke.x,y:ke.y}),this.isMoving=!1,setTimeout(function(){oe.draggedEvents=0,oe.renderer.refresh()},0),this.emit("mouseup",(0,j.getMouseCoords)(ie,this.container))}},Re.prototype.handleMove=function(ie){var oe=this;if(this.enabled){var N=(0,j.getMouseCoords)(ie,this.container);if(this.emit("mousemovebody",N),ie.target===this.container&&this.emit("mousemove",N),!N.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){oe.movingTimeout=null,oe.isMoving=!1},100);var V=this.renderer.getCamera(),J=(0,j.getPosition)(ie,this.container),fe=J.x,ke=J.y,Pe=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),nt=this.renderer.viewportToFramedGraph({x:fe,y:ke}),Le=Pe.x-nt.x,at=Pe.y-nt.y,It=V.getState();V.setState({x:It.x+Le,y:It.y+at}),this.lastMouseX=fe,this.lastMouseY=ke,ie.preventDefault(),ie.stopPropagation()}}},Re.prototype.handleWheel=function(ie){var oe=this;if(this.enabled){ie.preventDefault(),ie.stopPropagation();var N=(0,j.getWheelDelta)(ie);if(N){var V=(0,j.getWheelCoords)(ie,this.container);if(this.emit("wheel",V),!V.sigmaDefaultPrevented){var J=N>0?1/1.7:1.7,fe=this.renderer.getCamera(),ke=fe.getBoundedRatio(fe.getState().ratio*J),Pe=N>0?1:-1,nt=Date.now();this.currentWheelDirection===Pe&&this.lastWheelTriggerTime&&nt-this.lastWheelTriggerTime<50||(fe.animate(this.renderer.getViewportZoomedState((0,j.getPosition)(ie,this.container),ke),{easing:"quadraticOut",duration:250},function(){oe.currentWheelDirection=0}),this.currentWheelDirection=Pe,this.lastWheelTriggerTime=nt)}}}},Re.prototype.handleOut=function(){},Re}(j.default);Ae.default=ce},1565:function(Ve,Ae,W){"use strict";var se,Y=this&&this.__extends||(se=function(ee,K){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,ce){z.__proto__=ce}||function(z,ce){for(var Ce in ce)Object.prototype.hasOwnProperty.call(ce,Ce)&&(z[Ce]=ce[Ce])})(ee,K)},function(ee,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function z(){this.constructor=ee}se(ee,K),ee.prototype=null===K?Object.create(K):(z.prototype=K.prototype,new z)}),L=this&&this.__createBinding||(Object.create?function(se,ee,K,z){void 0===z&&(z=K),Object.defineProperty(se,z,{enumerable:!0,get:function(){return ee[K]}})}:function(se,ee,K,z){void 0===z&&(z=K),se[z]=ee[K]}),G=this&&this.__setModuleDefault||(Object.create?function(se,ee){Object.defineProperty(se,"default",{enumerable:!0,value:ee})}:function(se,ee){se.default=ee}),U=this&&this.__importStar||function(se){if(se&&se.__esModule)return se;var ee={};if(null!=se)for(var K in se)"default"!==K&&Object.prototype.hasOwnProperty.call(se,K)&&L(ee,se,K);return G(ee,se),ee},j=this&&this.__read||function(se,ee){var K="function"==typeof Symbol&&se[Symbol.iterator];if(!K)return se;var ce,Re,z=K.call(se),Ce=[];try{for(;(void 0===ee||ee-- >0)&&!(ce=z.next()).done;)Ce.push(ce.value)}catch(ie){Re={error:ie}}finally{try{ce&&!ce.done&&(K=z.return)&&K.call(z)}finally{if(Re)throw Re.error}}return Ce};Object.defineProperty(Ae,"__esModule",{value:!0});var D=U(W(5473)),te=function(se){function ee(K,z){var ce=se.call(this,K,z)||this;return ce.enabled=!0,ce.isMoving=!1,ce.touchMode=0,ce.handleStart=ce.handleStart.bind(ce),ce.handleLeave=ce.handleLeave.bind(ce),ce.handleMove=ce.handleMove.bind(ce),K.addEventListener("touchstart",ce.handleStart,!1),K.addEventListener("touchend",ce.handleLeave,!1),K.addEventListener("touchcancel",ce.handleLeave,!1),K.addEventListener("touchmove",ce.handleMove,!1),ce}return Y(ee,se),ee.prototype.kill=function(){var K=this.container;K.removeEventListener("touchstart",this.handleStart),K.removeEventListener("touchend",this.handleLeave),K.removeEventListener("touchcancel",this.handleLeave),K.removeEventListener("touchmove",this.handleMove)},ee.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},ee.prototype.dispatchRelatedMouseEvent=function(K,z,ce,Ce){var Re=ce||(0,D.getPosition)(z.touches[0],this.container),ie=new MouseEvent(K,{clientX:Re.x,clientY:Re.y,altKey:z.altKey,ctrlKey:z.ctrlKey});ie.isFakeSigmaMouseEvent=!0,(Ce||this.container).dispatchEvent(ie)},ee.prototype.handleStart=function(K){var z=this;if(this.enabled){K.preventDefault(),1===K.touches.length&&this.dispatchRelatedMouseEvent("mousedown",K);var ce=(0,D.getTouchesArray)(K.touches);if(this.isMoving=!0,this.touchMode=ce.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=ce.map(function(fe){return(0,D.getPosition)(fe,z.container)}),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var Ce=j(this.startTouchesPositions,2),Re=Ce[0],ie=Re.x,oe=Re.y,N=Ce[1],V=N.x,J=N.y;this.startTouchesAngle=Math.atan2(J-oe,V-ie),this.startTouchesDistance=Math.sqrt(Math.pow(V-ie,2)+Math.pow(J-oe,2))}this.emit("touchdown",(0,D.getTouchCoords)(K,this.container))}},ee.prototype.handleLeave=function(K){if(this.enabled){switch(K.preventDefault(),0===K.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",K,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",K,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===K.touches.length){this.handleStart(K),K.preventDefault();break}case 1:if(this.isMoving){var z=this.renderer.getCamera(),ce=z.getState(),Ce=z.getPreviousState()||{x:0,y:0};z.animate({x:ce.x+3*(ce.x-Ce.x),y:ce.y+3*(ce.y-Ce.y)},{duration:200,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,D.getTouchCoords)(K,this.container))}},ee.prototype.handleMove=function(K){var z,ce=this;if(this.enabled){K.preventDefault(),1===K.touches.length&&this.dispatchRelatedMouseEvent("mousemove",K);var Ce=this.renderer.getCamera(),Re=this.startCameraState,oe=(0,D.getTouchesArray)(K.touches).map(function(An){return(0,D.getPosition)(An,ce.container)});switch(this.lastTouchesPositions=oe,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){ce.isMoving=!1},200),this.touchMode){case 1:var N=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),V=N.x,J=N.y,fe=this.renderer.viewportToFramedGraph(oe[0]);Ce.setState({x:Re.x+V-(ke=fe.x),y:Re.y+J-(Pe=fe.y)});break;case 2:var nt={},Le=oe[0],at=Le.x,It=Le.y,Ge=oe[1],yt=Ge.x,mt=Ge.y,_t=Math.atan2(mt-It,yt-at)-this.startTouchesAngle,Fn=Math.hypot(mt-It,yt-at)/this.startTouchesDistance,Ot=Ce.getBoundedRatio(Re.ratio/Fn);nt.ratio=Ot,nt.angle=Re.angle+_t;var ke,Pn=this.getDimensions(),nn=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:Re}),Ze=Math.min(Pn.width,Pn.height),wn=Ot/Ze,Pe=It-Ze/2/(Ze/Pn.height);Pe=(z=j([(ke=at-Ze/2/(Ze/Pn.width))*Math.cos(-nt.angle)-Pe*Math.sin(-nt.angle),Pe*Math.cos(-nt.angle)+ke*Math.sin(-nt.angle)],2))[1],nt.x=nn.x-(ke=z[0])*wn,nt.y=nn.y+Pe*wn,Ce.setState(nt)}this.emit("touchmove",(0,D.getTouchCoords)(K,this.container))}},ee}(D.default);Ae.default=te},4942:(Ve,Ae)=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.edgeLabelsToDisplayFromNodes=Ae.LabelGrid=void 0;var W=function(){function G(U,j){this.key=U,this.size=j}return G.compare=function(U,j){return U.size>j.size?-1:U.size<j.size||U.key>j.key?1:-1},G}(),Y=function(){function G(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return G.prototype.resizeAndClear=function(U,j){this.width=U.width,this.height=U.height,this.cellSize=j,this.columns=Math.ceil(U.width/j),this.rows=Math.ceil(U.height/j),this.cells={}},G.prototype.getIndex=function(U){var j=Math.floor(U.x/this.cellSize);return Math.floor(U.y/this.cellSize)*this.columns+j},G.prototype.add=function(U,j,D){var R=new W(U,j),q=this.getIndex(D),ne=this.cells[q];ne||(this.cells[q]=ne=[]),ne.push(R)},G.prototype.organize=function(){for(var U in this.cells)this.cells[U].sort(W.compare)},G.prototype.getLabelsToDisplay=function(U,j){var D=this.cellSize*this.cellSize,ne=Math.ceil(D/U/U*j/D),te=[];for(var se in this.cells)for(var ee=this.cells[se],K=0;K<Math.min(ne,ee.length);K++)te.push(ee[K].key);return te},G}();Ae.LabelGrid=Y,Ae.edgeLabelsToDisplayFromNodes=function L(G){var j=G.hoveredNode,D=G.highlightedNodes,R=G.displayedNodeLabels,q=[];return G.graph.forEachEdge(function(ne,te,se,ee){(se===j||ee===j||D.has(se)||D.has(ee)||R.has(se)&&R.has(ee))&&q.push(ne)}),q}},3650:function(Ve,Ae,W){"use strict";var Y=this&&this.__read||function(nt,Le){var at="function"==typeof Symbol&&nt[Symbol.iterator];if(!at)return nt;var Ge,mt,It=at.call(nt),yt=[];try{for(;(void 0===Le||Le-- >0)&&!(Ge=It.next()).done;)yt.push(Ge.value)}catch(_t){mt={error:_t}}finally{try{Ge&&!Ge.done&&(at=It.return)&&at.call(It)}finally{if(mt)throw mt.error}}return yt},L=this&&this.__spreadArray||function(nt,Le,at){if(at||2===arguments.length)for(var yt,It=0,Ge=Le.length;It<Ge;It++)(yt||!(It in Le))&&(yt||(yt=Array.prototype.slice.call(Le,0,It)),yt[It]=Le[It]);return nt.concat(yt||Array.prototype.slice.call(Le))},G=this&&this.__importDefault||function(nt){return nt&&nt.__esModule?nt:{default:nt}};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.rectangleCollidesWithQuad=Ae.squareCollidesWithQuad=Ae.getCircumscribedAlignedRectangle=Ae.isRectangleAligned=void 0;var U=G(W(3333)),R="outside",Ce=!1;function Re(nt){return nt.x1===nt.x2||nt.y1===nt.y2}function ie(nt){var Le=Math.sqrt(Math.pow(nt.x2-nt.x1,2)+Math.pow(nt.y2-nt.y1,2)),at_x=(nt.y1-nt.y2)*nt.height/Le,at_y=(nt.x2-nt.x1)*nt.height/Le,It={x:nt.x1,y:nt.y1},Ge={x:nt.x2,y:nt.y2},yt={x:nt.x1+at_x,y:nt.y1+at_y},mt={x:nt.x2+at_x,y:nt.y2+at_y},_t=Math.min(It.x,Ge.x,yt.x,mt.x),Fn=Math.max(It.x,Ge.x,yt.x,mt.x),Ot=Math.min(It.y,Ge.y,yt.y,mt.y);return{x1:_t,y1:Ot,x2:Fn,y2:Ot,height:Math.max(It.y,Ge.y,yt.y,mt.y)-Ot}}function oe(nt,Le,at,It,Ge,yt,mt){return nt<It+yt&&nt+at>It&&Le<Ge+mt&&Le+at>Ge}function N(nt,Le,at,It,Ge,yt,mt,_t){return nt<Ge+mt&&nt+at>Ge&&Le<yt+_t&&Le+It>yt}function V(nt,Le,at,It,Ge,yt){var Ot=nt<at+Ge/2;return Le<It+yt/2?Ot?1:2:Ot?3:4}Ae.isRectangleAligned=Re,Ae.getCircumscribedAlignedRectangle=ie,Ae.squareCollidesWithQuad=oe,Ae.rectangleCollidesWithQuad=N;var Pe=function(){function nt(Le){var at;void 0===Le&&(Le={}),this.containers=((at={})[R]=[],at),this.cache=null,this.lastRectangle=null;var It=Math.pow(4,5);this.data=new Float32Array((4*It-1)/3*4),this.resize(Le.boundaries?Le.boundaries:{x:0,y:0,width:1,height:1})}return nt.prototype.add=function(Le,at,It,Ge){return function fe(nt,Le,at,It,Ge,yt,mt){for(var _t=Ge-mt,Fn=yt-mt,Ot=2*mt,Pn=0,nn=0;;){if(Pn>=nt)return at[nn]=at[nn]||[],void at[nn].push(It);var Ze=4*nn+4,Ct=4*nn+8,cn=4*nn+12,wn=4*nn+16,An=oe(_t,Fn,Ot,Le[Ze+0],Le[Ze+1],Le[Ze+2],Le[Ze+3]),$e=oe(_t,Fn,Ot,Le[Ct+0],Le[Ct+1],Le[Ct+2],Le[Ct+3]),le=oe(_t,Fn,Ot,Le[cn+0],Le[cn+1],Le[cn+2],Le[cn+3]),ot=oe(_t,Fn,Ot,Le[wn+0],Le[wn+1],Le[wn+2],Le[wn+3]),Je=[An,$e,le,ot].reduce(function(Sn,Hn){return Hn?Sn+1:Sn},0);if(0===Je&&0===Pn)return at[R].push(It),void(!Ce&&at[R].length>=5&&(Ce=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===Je)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(Pn,", key: ").concat(It,", x: ").concat(Ge,", y: ").concat(yt,", size: ").concat(mt,")."));if(3===Je)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(Pn,", key: ").concat(It,", x: ").concat(Ge,", y: ").concat(yt,", size: ").concat(mt,")."));if(Je>1)return at[nn]=at[nn]||[],void at[nn].push(It);Pn++,An&&(nn=Ze),$e&&(nn=Ct),le&&(nn=cn),ot&&(nn=wn)}}(5,this.data,this.containers,Le,at,It,Ge),this},nt.prototype.resize=function(Le){this.clear(),this.data[0]=Le.x,this.data[1]=Le.y,this.data[2]=Le.width,this.data[3]=Le.height,function J(nt,Le){for(var at=[0,0];at.length;){var It=at.pop(),Ge=at.pop(),yt=4*Ge+4,mt=4*Ge+8,_t=4*Ge+12,Fn=4*Ge+16,Ot=Le[Ge+0],Pn=Le[Ge+1],Ct=Le[Ge+2]/2,cn=Le[Ge+3]/2;Le[yt+0]=Ot,Le[yt+1]=Pn,Le[yt+2]=Ct,Le[yt+3]=cn,Le[mt+0]=Ot+Ct,Le[mt+1]=Pn,Le[mt+2]=Ct,Le[mt+3]=cn,Le[_t+0]=Ot,Le[_t+1]=Pn+cn,Le[_t+2]=Ct,Le[_t+3]=cn,Le[Fn+0]=Ot+Ct,Le[Fn+1]=Pn+cn,Le[Fn+2]=Ct,Le[Fn+3]=cn,It<nt-1&&(at.push(Fn,It+1),at.push(_t,It+1),at.push(mt,It+1),at.push(yt,It+1))}}(5,this.data)},nt.prototype.clear=function(){var Le;return this.containers=((Le={})[R]=[],Le),this},nt.prototype.point=function(Le,at){var It=this.containers[R],Ge=0,yt=0;do{this.containers[Ge]&&It.push.apply(It,L([],Y(this.containers[Ge]),!1)),Ge=4*Ge+4*V(Le,at,this.data[Ge+0],this.data[Ge+1],this.data[Ge+2],this.data[Ge+3]),yt++}while(yt<=5);return It},nt.prototype.rectangle=function(Le,at,It,Ge,yt){var mt,_t=this.lastRectangle;return _t&&Le===_t.x1&&It===_t.x2&&at===_t.y1&&Ge===_t.y2&&yt===_t.height||(this.lastRectangle={x1:Le,y1:at,x2:It,y2:Ge,height:yt},Re(this.lastRectangle)||(this.lastRectangle=ie(this.lastRectangle)),this.cache=function ke(nt,Le,at,It,Ge,yt,mt){for(var Ot,_t=[0,0],Fn=[];_t.length;){var Pn=_t.pop(),nn=_t.pop();if((Ot=at[nn])&&(0,U.default)(Fn,Ot),!(Pn>=nt)){var Ze=4*nn+4,Ct=4*nn+8,cn=4*nn+12,wn=4*nn+16,An=N(It,Ge,yt,mt,Le[Ze+0],Le[Ze+1],Le[Ze+2],Le[Ze+3]),$e=N(It,Ge,yt,mt,Le[Ct+0],Le[Ct+1],Le[Ct+2],Le[Ct+3]),le=N(It,Ge,yt,mt,Le[cn+0],Le[cn+1],Le[cn+2],Le[cn+3]),ot=N(It,Ge,yt,mt,Le[wn+0],Le[wn+1],Le[wn+2],Le[wn+3]);An&&_t.push(Ze,Pn+1),$e&&_t.push(Ct,Pn+1),le&&_t.push(cn,Pn+1),ot&&_t.push(wn,Pn+1)}}return Fn}(5,this.data,this.containers,Le,at,Math.abs(Le-It)||Math.abs(at-Ge),yt),(mt=this.cache).push.apply(mt,L([],Y(this.containers[R]),!1))),this.cache},nt}();Ae.default=Pe},756:function(Ve,Ae,W){"use strict";var Y=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.Sigma=Ae.MouseCaptor=Ae.QuadTree=Ae.Camera=void 0;var L=Y(W(4870));Ae.Sigma=L.default;var G=Y(W(2002));Ae.Camera=G.default;var U=Y(W(3650));Ae.QuadTree=U.default;var j=Y(W(2465));Ae.MouseCaptor=j.default,Ae.default=L.default},1285:(Ve,Ae)=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.default=function W(Y,L,G,U,j){var D=j.edgeLabelSize,R=j.edgeLabelFont,q=j.edgeLabelWeight,te=L.label;if(te){Y.fillStyle=j.edgeLabelColor.attribute?L[j.edgeLabelColor.attribute]||j.edgeLabelColor.color||"#000":j.edgeLabelColor.color,Y.font="".concat(q," ").concat(D,"px ").concat(R);var se=G.size,ee=U.size,K=G.x,z=G.y,ce=U.x,Ce=U.y,Re=(K+ce)/2,ie=(z+Ce)/2,oe=ce-K,N=Ce-z,V=Math.sqrt(oe*oe+N*N);if(!(V<se+ee)){Re=((K+=oe*se/V)+(ce-=oe*ee/V))/2,ie=((z+=N*se/V)+(Ce-=N*ee/V))/2,oe=ce-K,N=Ce-z,V=Math.sqrt(oe*oe+N*N);var ke,J=Y.measureText(te).width;if(J>V){for(J=Y.measureText(te+="\u2026").width;J>V&&te.length>1;)te=te.slice(0,-2)+"\u2026",J=Y.measureText(te).width;if(te.length<4)return}ke=oe>0?N>0?Math.acos(oe/V):Math.asin(N/V):N>0?Math.acos(oe/V)+Math.PI:Math.asin(oe/V)+Math.PI/2,Y.save(),Y.translate(Re,ie),Y.rotate(ke),Y.fillText(te,-J/2,L.size/2+D),Y.restore()}}}},4997:function(Ve,Ae,W){"use strict";var Y=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(Ae,"__esModule",{value:!0});var L=Y(W(9597));Ae.default=function G(U,j,D){var R=D.labelSize,q=D.labelFont;if(U.font="".concat(D.labelWeight," ").concat(R,"px ").concat(q),U.fillStyle="#FFF",U.shadowOffsetX=0,U.shadowOffsetY=0,U.shadowBlur=8,U.shadowColor="#000","string"==typeof j.label){var se=U.measureText(j.label).width,ee=Math.round(se+5),K=Math.round(R+4),z=Math.max(j.size,R/2)+2,ce=Math.asin(K/2/z),Ce=Math.sqrt(Math.abs(Math.pow(z,2)-Math.pow(K/2,2)));U.beginPath(),U.moveTo(j.x+Ce,j.y+K/2),U.lineTo(j.x+z+ee,j.y+K/2),U.lineTo(j.x+z+ee,j.y-K/2),U.lineTo(j.x+Ce,j.y-K/2),U.arc(j.x,j.y,z,ce,-ce),U.closePath(),U.fill()}else U.beginPath(),U.arc(j.x,j.y,j.size+2,0,2*Math.PI),U.closePath(),U.fill();U.shadowOffsetX=0,U.shadowOffsetY=0,U.shadowBlur=0,(0,L.default)(U,j,D)}},9597:(Ve,Ae)=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.default=function W(Y,L,G){if(L.label){var U=G.labelSize,j=G.labelFont,D=G.labelWeight;Y.fillStyle=G.labelColor.attribute?L[G.labelColor.attribute]||G.labelColor.color||"#000":G.labelColor.color,Y.font="".concat(D," ").concat(U,"px ").concat(j),Y.fillText(L.label,L.x+L.size+3,L.y+U/3)}}},6160:function(Ve,Ae,W){"use strict";var j,Y=this&&this.__extends||(j=function(D,R){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ne){q.__proto__=ne}||function(q,ne){for(var te in ne)Object.prototype.hasOwnProperty.call(ne,te)&&(q[te]=ne[te])})(D,R)},function(D,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function q(){this.constructor=D}j(D,R),D.prototype=null===R?Object.create(R):(q.prototype=R.prototype,new q)});Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.createEdgeCompoundProgram=Ae.AbstractEdgeProgram=void 0;var G=function(j){function D(R,q,ne,te,se){return j.call(this,R,q,ne,te,se)||this}return Y(D,j),D}(W(727).AbstractProgram);Ae.AbstractEdgeProgram=G,Ae.createEdgeCompoundProgram=function U(j){return function(){function D(R,q){this.programs=j.map(function(ne){return new ne(R,q)})}return D.prototype.bufferData=function(){this.programs.forEach(function(R){return R.bufferData()})},D.prototype.allocate=function(R){this.programs.forEach(function(q){return q.allocate(R)})},D.prototype.bind=function(){},D.prototype.computeIndices=function(){this.programs.forEach(function(R){return R.computeIndices()})},D.prototype.render=function(R){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(R)})},D.prototype.process=function(R,q,ne,te,se){this.programs.forEach(function(ee){return ee.process(R,q,ne,te,se)})},D}()}},4588:function(Ve,Ae,W){"use strict";var j,Y=this&&this.__extends||(j=function(D,R){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,ne){q.__proto__=ne}||function(q,ne){for(var te in ne)Object.prototype.hasOwnProperty.call(ne,te)&&(q[te]=ne[te])})(D,R)},function(D,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function q(){this.constructor=D}j(D,R),D.prototype=null===R?Object.create(R):(q.prototype=R.prototype,new q)});Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.createNodeCompoundProgram=Ae.AbstractNodeProgram=void 0;var G=function(j){function D(R,q,ne,te,se){var ee=j.call(this,R,q,ne,te,se)||this;ee.positionLocation=R.getAttribLocation(ee.program,"a_position"),ee.sizeLocation=R.getAttribLocation(ee.program,"a_size"),ee.colorLocation=R.getAttribLocation(ee.program,"a_color");var K=R.getUniformLocation(ee.program,"u_matrix");if(null===K)throw new Error("AbstractNodeProgram: error while getting matrixLocation");ee.matrixLocation=K;var z=R.getUniformLocation(ee.program,"u_ratio");if(null===z)throw new Error("AbstractNodeProgram: error while getting ratioLocation");ee.ratioLocation=z;var ce=R.getUniformLocation(ee.program,"u_scale");if(null===ce)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return ee.scaleLocation=ce,ee}return Y(D,j),D.prototype.bind=function(){var R=this.gl;R.enableVertexAttribArray(this.positionLocation),R.enableVertexAttribArray(this.sizeLocation),R.enableVertexAttribArray(this.colorLocation),R.vertexAttribPointer(this.positionLocation,2,R.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),R.vertexAttribPointer(this.sizeLocation,1,R.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),R.vertexAttribPointer(this.colorLocation,4,R.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},D}(W(727).AbstractProgram);Ae.AbstractNodeProgram=G,Ae.createNodeCompoundProgram=function U(j){return function(){function D(R,q){this.programs=j.map(function(ne){return new ne(R,q)})}return D.prototype.bufferData=function(){this.programs.forEach(function(R){return R.bufferData()})},D.prototype.allocate=function(R){this.programs.forEach(function(q){return q.allocate(R)})},D.prototype.bind=function(){},D.prototype.render=function(R){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(R)})},D.prototype.process=function(R,q,ne){this.programs.forEach(function(te){return te.process(R,q,ne)})},D}()}},727:(Ve,Ae,W)=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.AbstractProgram=void 0;var Y=W(5166),L=function(){function G(U,j,D,R,q){this.array=new Float32Array,this.points=R,this.attributes=q,this.gl=U,this.vertexShaderSource=j,this.fragmentShaderSource=D;var ne=U.createBuffer();if(null===ne)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=ne,U.bindBuffer(U.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,Y.loadVertexShader)(U,this.vertexShaderSource),this.fragmentShader=(0,Y.loadFragmentShader)(U,this.fragmentShaderSource),this.program=(0,Y.loadProgram)(U,[this.vertexShader,this.fragmentShader])}return G.prototype.bufferData=function(){var U=this.gl;U.bufferData(U.ARRAY_BUFFER,this.array,U.DYNAMIC_DRAW)},G.prototype.allocate=function(U){this.array=new Float32Array(this.points*this.attributes*U)},G.prototype.hasNothingToRender=function(){return 0===this.array.length},G}();Ae.AbstractProgram=L},1391:function(Ve,Ae,W){"use strict";var Y=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(Ae,"__esModule",{value:!0});var L=W(6160),G=Y(W(1034)),U=Y(W(2542)),j=(0,L.createEdgeCompoundProgram)([U.default,G.default]);Ae.default=j},1034:function(Ve,Ae,W){"use strict";var se,Y=this&&this.__extends||(se=function(ee,K){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,ce){z.__proto__=ce}||function(z,ce){for(var Ce in ce)Object.prototype.hasOwnProperty.call(ce,Ce)&&(z[Ce]=ce[Ce])})(ee,K)},function(ee,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function z(){this.constructor=ee}se(ee,K),ee.prototype=null===K?Object.create(K):(z.prototype=K.prototype,new z)}),L=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(Ae,"__esModule",{value:!0});var G=W(1699),U=L(W(4647)),j=L(W(2018)),te=function(se){function ee(K){var z=se.call(this,K,U.default,j.default,3,9)||this;z.positionLocation=K.getAttribLocation(z.program,"a_position"),z.colorLocation=K.getAttribLocation(z.program,"a_color"),z.normalLocation=K.getAttribLocation(z.program,"a_normal"),z.radiusLocation=K.getAttribLocation(z.program,"a_radius"),z.barycentricLocation=K.getAttribLocation(z.program,"a_barycentric");var ce=K.getUniformLocation(z.program,"u_matrix");if(null===ce)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");z.matrixLocation=ce;var Ce=K.getUniformLocation(z.program,"u_sqrtZoomRatio");if(null===Ce)throw new Error("EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation");z.sqrtZoomRatioLocation=Ce;var Re=K.getUniformLocation(z.program,"u_correctionRatio");if(null===Re)throw new Error("EdgeArrowHeadProgram: error while getting correctionRatioLocation");return z.correctionRatioLocation=Re,z.bind(),z}return Y(ee,se),ee.prototype.bind=function(){var K=this.gl;K.enableVertexAttribArray(this.positionLocation),K.enableVertexAttribArray(this.normalLocation),K.enableVertexAttribArray(this.radiusLocation),K.enableVertexAttribArray(this.colorLocation),K.enableVertexAttribArray(this.barycentricLocation),K.vertexAttribPointer(this.positionLocation,2,K.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,0),K.vertexAttribPointer(this.normalLocation,2,K.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,8),K.vertexAttribPointer(this.radiusLocation,1,K.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,16),K.vertexAttribPointer(this.colorLocation,4,K.UNSIGNED_BYTE,!0,9*Float32Array.BYTES_PER_ELEMENT,20),K.vertexAttribPointer(this.barycentricLocation,3,K.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,24)},ee.prototype.computeIndices=function(){},ee.prototype.process=function(K,z,ce,Ce,Re){if(Ce)for(var ie=27*Re,oe=ie+27;ie<oe;ie++)this.array[ie]=0;else{var N=ce.size||1,V=z.size||1,J=K.x,fe=K.y,ke=z.x,Pe=z.y,nt=(0,G.floatColor)(ce.color),Le=ke-J,at=Pe-fe,It=Le*Le+at*at,Ge=0,yt=0;It&&(Ge=-at*(It=1/Math.sqrt(It))*N,yt=Le*It*N);var mt=27*Re,_t=this.array;_t[mt++]=ke,_t[mt++]=Pe,_t[mt++]=-Ge,_t[mt++]=-yt,_t[mt++]=V,_t[mt++]=nt,_t[mt++]=1,_t[mt++]=0,_t[mt++]=0,_t[mt++]=ke,_t[mt++]=Pe,_t[mt++]=-Ge,_t[mt++]=-yt,_t[mt++]=V,_t[mt++]=nt,_t[mt++]=0,_t[mt++]=1,_t[mt++]=0,_t[mt++]=ke,_t[mt++]=Pe,_t[mt++]=-Ge,_t[mt++]=-yt,_t[mt++]=V,_t[mt++]=nt,_t[mt++]=0,_t[mt++]=0,_t[mt]=1}},ee.prototype.render=function(K){if(!this.hasNothingToRender()){var z=this.gl;z.useProgram(this.program),z.uniformMatrix3fv(this.matrixLocation,!1,K.matrix),z.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(K.ratio)),z.uniform1f(this.correctionRatioLocation,K.correctionRatio),z.drawArrays(z.TRIANGLES,0,this.array.length/9)}},ee}(W(6160).AbstractEdgeProgram);Ae.default=te},2542:function(Ve,Ae,W){"use strict";var se,Y=this&&this.__extends||(se=function(ee,K){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,ce){z.__proto__=ce}||function(z,ce){for(var Ce in ce)Object.prototype.hasOwnProperty.call(ce,Ce)&&(z[Ce]=ce[Ce])})(ee,K)},function(ee,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function z(){this.constructor=ee}se(ee,K),ee.prototype=null===K?Object.create(K):(z.prototype=K.prototype,new z)}),L=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(Ae,"__esModule",{value:!0});var G=W(6160),U=W(1699),j=L(W(2529)),D=L(W(427)),te=function(se){function ee(K){var z=se.call(this,K,j.default,D.default,4,6)||this,ce=K.createBuffer();if(null===ce)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");z.indicesBuffer=ce,z.positionLocation=K.getAttribLocation(z.program,"a_position"),z.colorLocation=K.getAttribLocation(z.program,"a_color"),z.normalLocation=K.getAttribLocation(z.program,"a_normal"),z.radiusLocation=K.getAttribLocation(z.program,"a_radius");var Ce=K.getUniformLocation(z.program,"u_matrix");if(null===Ce)throw new Error("EdgeClampedProgram: error while getting matrixLocation");z.matrixLocation=Ce;var Re=K.getUniformLocation(z.program,"u_sqrtZoomRatio");if(null===Re)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");z.sqrtZoomRatioLocation=Re;var ie=K.getUniformLocation(z.program,"u_correctionRatio");if(null===ie)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");return z.correctionRatioLocation=ie,z.canUse32BitsIndices=(0,U.canUse32BitsIndices)(K),z.IndicesArray=z.canUse32BitsIndices?Uint32Array:Uint16Array,z.indicesArray=new z.IndicesArray,z.indicesType=z.canUse32BitsIndices?K.UNSIGNED_INT:K.UNSIGNED_SHORT,z.bind(),z}return Y(ee,se),ee.prototype.bind=function(){var K=this.gl;K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),K.enableVertexAttribArray(this.positionLocation),K.enableVertexAttribArray(this.normalLocation),K.enableVertexAttribArray(this.colorLocation),K.enableVertexAttribArray(this.radiusLocation),K.vertexAttribPointer(this.positionLocation,2,K.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),K.vertexAttribPointer(this.normalLocation,2,K.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),K.vertexAttribPointer(this.colorLocation,4,K.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,16),K.vertexAttribPointer(this.radiusLocation,1,K.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,20)},ee.prototype.process=function(K,z,ce,Ce,Re){if(Ce)for(var ie=24*Re,oe=ie+24;ie<oe;ie++)this.array[ie]=0;else{var N=ce.size||1,V=K.x,J=K.y,fe=z.x,ke=z.y,Pe=z.size||1,nt=(0,U.floatColor)(ce.color),Le=fe-V,at=ke-J,It=Le*Le+at*at,Ge=0,yt=0;It&&(Ge=-at*(It=1/Math.sqrt(It))*N,yt=Le*It*N);var mt=24*Re,_t=this.array;_t[mt++]=V,_t[mt++]=J,_t[mt++]=Ge,_t[mt++]=yt,_t[mt++]=nt,_t[mt++]=0,_t[mt++]=V,_t[mt++]=J,_t[mt++]=-Ge,_t[mt++]=-yt,_t[mt++]=nt,_t[mt++]=0,_t[mt++]=fe,_t[mt++]=ke,_t[mt++]=Ge,_t[mt++]=yt,_t[mt++]=nt,_t[mt++]=Pe,_t[mt++]=fe,_t[mt++]=ke,_t[mt++]=-Ge,_t[mt++]=-yt,_t[mt++]=nt,_t[mt]=-Pe}},ee.prototype.computeIndices=function(){for(var K=this.array.length/6,ce=new this.IndicesArray(K+K/2),Ce=0,Re=0;Ce<K;Ce+=4)ce[Re++]=Ce,ce[Re++]=Ce+1,ce[Re++]=Ce+2,ce[Re++]=Ce+2,ce[Re++]=Ce+1,ce[Re++]=Ce+3;this.indicesArray=ce},ee.prototype.bufferData=function(){se.prototype.bufferData.call(this);var K=this.gl;K.bufferData(K.ELEMENT_ARRAY_BUFFER,this.indicesArray,K.STATIC_DRAW)},ee.prototype.render=function(K){if(!this.hasNothingToRender()){var z=this.gl;z.useProgram(this.program),z.uniformMatrix3fv(this.matrixLocation,!1,K.matrix),z.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(K.ratio)),z.uniform1f(this.correctionRatioLocation,K.correctionRatio),z.drawElements(z.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},ee}(G.AbstractEdgeProgram);Ae.default=te},8959:function(Ve,Ae,W){"use strict";var se,Y=this&&this.__extends||(se=function(ee,K){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(z,ce){z.__proto__=ce}||function(z,ce){for(var Ce in ce)Object.prototype.hasOwnProperty.call(ce,Ce)&&(z[Ce]=ce[Ce])})(ee,K)},function(ee,K){if("function"!=typeof K&&null!==K)throw new TypeError("Class extends value "+String(K)+" is not a constructor or null");function z(){this.constructor=ee}se(ee,K),ee.prototype=null===K?Object.create(K):(z.prototype=K.prototype,new z)}),L=this&&this.__importDefault||function(se){return se&&se.__esModule?se:{default:se}};Object.defineProperty(Ae,"__esModule",{value:!0});var G=W(1699),U=L(W(3364)),j=L(W(427)),te=function(se){function ee(K){var z=se.call(this,K,U.default,j.default,4,5)||this,ce=K.createBuffer();if(null===ce)throw new Error("EdgeProgram: error while creating indicesBuffer");z.indicesBuffer=ce,z.positionLocation=K.getAttribLocation(z.program,"a_position"),z.colorLocation=K.getAttribLocation(z.program,"a_color"),z.normalLocation=K.getAttribLocation(z.program,"a_normal");var Ce=K.getUniformLocation(z.program,"u_matrix");if(null===Ce)throw new Error("EdgeProgram: error while getting matrixLocation");z.matrixLocation=Ce;var Re=K.getUniformLocation(z.program,"u_correctionRatio");if(null===Re)throw new Error("EdgeProgram: error while getting correctionRatioLocation");z.correctionRatioLocation=Re;var ie=K.getUniformLocation(z.program,"u_sqrtZoomRatio");if(null===ie)throw new Error("EdgeProgram: error while getting sqrtZoomRatioLocation");return z.sqrtZoomRatioLocation=ie,z.canUse32BitsIndices=(0,G.canUse32BitsIndices)(K),z.IndicesArray=z.canUse32BitsIndices?Uint32Array:Uint16Array,z.indicesArray=new z.IndicesArray,z.indicesType=z.canUse32BitsIndices?K.UNSIGNED_INT:K.UNSIGNED_SHORT,z.bind(),z}return Y(ee,se),ee.prototype.bind=function(){var K=this.gl;K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),K.enableVertexAttribArray(this.positionLocation),K.enableVertexAttribArray(this.normalLocation),K.enableVertexAttribArray(this.colorLocation),K.vertexAttribPointer(this.positionLocation,2,K.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),K.vertexAttribPointer(this.normalLocation,2,K.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,8),K.vertexAttribPointer(this.colorLocation,4,K.UNSIGNED_BYTE,!0,5*Float32Array.BYTES_PER_ELEMENT,16)},ee.prototype.computeIndices=function(){for(var K=this.array.length/5,ce=new this.IndicesArray(K+K/2),Ce=0,Re=0;Ce<K;Ce+=4)ce[Re++]=Ce,ce[Re++]=Ce+1,ce[Re++]=Ce+2,ce[Re++]=Ce+2,ce[Re++]=Ce+1,ce[Re++]=Ce+3;this.indicesArray=ce},ee.prototype.bufferData=function(){se.prototype.bufferData.call(this);var K=this.gl;K.bufferData(K.ELEMENT_ARRAY_BUFFER,this.indicesArray,K.STATIC_DRAW)},ee.prototype.process=function(K,z,ce,Ce,Re){if(Ce)for(var ie=20*Re,oe=ie+20;ie<oe;ie++)this.array[ie]=0;else{var N=ce.size||1,V=K.x,J=K.y,fe=z.x,ke=z.y,Pe=(0,G.floatColor)(ce.color),nt=fe-V,Le=ke-J,at=nt*nt+Le*Le,It=0,Ge=0;at&&(It=-Le*(at=1/Math.sqrt(at))*N,Ge=nt*at*N);var yt=20*Re,mt=this.array;mt[yt++]=V,mt[yt++]=J,mt[yt++]=It,mt[yt++]=Ge,mt[yt++]=Pe,mt[yt++]=V,mt[yt++]=J,mt[yt++]=-It,mt[yt++]=-Ge,mt[yt++]=Pe,mt[yt++]=fe,mt[yt++]=ke,mt[yt++]=It,mt[yt++]=Ge,mt[yt++]=Pe,mt[yt++]=fe,mt[yt++]=ke,mt[yt++]=-It,mt[yt++]=-Ge,mt[yt]=Pe}},ee.prototype.render=function(K){if(!this.hasNothingToRender()){var z=this.gl;z.useProgram(this.program),z.uniformMatrix3fv(this.matrixLocation,!1,K.matrix),z.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(K.ratio)),z.uniform1f(this.correctionRatioLocation,K.correctionRatio),z.drawElements(z.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},ee}(W(6160).AbstractEdgeProgram);Ae.default=te},105:function(Ve,Ae,W){"use strict";var te,Y=this&&this.__extends||(te=function(se,ee){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,z){K.__proto__=z}||function(K,z){for(var ce in z)Object.prototype.hasOwnProperty.call(z,ce)&&(K[ce]=z[ce])})(se,ee)},function(se,ee){if("function"!=typeof ee&&null!==ee)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");function K(){this.constructor=se}te(se,ee),se.prototype=null===ee?Object.create(ee):(K.prototype=ee.prototype,new K)}),L=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(Ae,"__esModule",{value:!0});var G=W(1699),U=L(W(7768)),j=L(W(2181)),ne=function(te){function se(ee){var K=te.call(this,ee,U.default,j.default,1,4)||this;return K.bind(),K}return Y(se,te),se.prototype.process=function(ee,K,z){var ce=this.array,Ce=1*z*4;if(K)return ce[Ce++]=0,ce[Ce++]=0,ce[Ce++]=0,void(ce[Ce++]=0);var Re=(0,G.floatColor)(ee.color);ce[Ce++]=ee.x,ce[Ce++]=ee.y,ce[Ce++]=ee.size,ce[Ce]=Re},se.prototype.render=function(ee){if(!this.hasNothingToRender()){var K=this.gl;K.useProgram(this.program),K.uniform1f(this.ratioLocation,1/Math.sqrt(ee.ratio)),K.uniform1f(this.scaleLocation,ee.scalingRatio),K.uniformMatrix3fv(this.matrixLocation,!1,ee.matrix),K.drawArrays(K.POINTS,0,this.array.length/4)}},se}(W(4588).AbstractNodeProgram);Ae.default=ne},2018:Ve=>{(()=>{"use strict";var Ae={d:(L,G)=>{for(var U in G)Ae.o(G,U)&&!Ae.o(L,U)&&Object.defineProperty(L,U,{enumerable:!0,get:G[U]})},o:(L,G)=>Object.prototype.hasOwnProperty.call(L,G),r:L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})}},W={};Ae.r(W),Ae.d(W,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";Ve.exports=W})()},4647:Ve=>{(()=>{"use strict";var Ae={d:(L,G)=>{for(var U in G)Ae.o(G,U)&&!Ae.o(L,U)&&Object.defineProperty(L,U,{enumerable:!0,get:G[U]})},o:(L,G)=>Object.prototype.hasOwnProperty.call(L,G),r:L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})}},W={};Ae.r(W),Ae.d(W,{default:()=>Y});const Y="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";Ve.exports=W})()},2529:Ve=>{(()=>{"use strict";var Ae={d:(L,G)=>{for(var U in G)Ae.o(G,U)&&!Ae.o(L,U)&&Object.defineProperty(L,U,{enumerable:!0,get:G[U]})},o:(L,G)=>Object.prototype.hasOwnProperty.call(L,G),r:L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})}},W={};Ae.r(W),Ae.d(W,{default:()=>Y});const Y="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";Ve.exports=W})()},427:Ve=>{(()=>{"use strict";var Ae={d:(L,G)=>{for(var U in G)Ae.o(G,U)&&!Ae.o(L,U)&&Object.defineProperty(L,U,{enumerable:!0,get:G[U]})},o:(L,G)=>Object.prototype.hasOwnProperty.call(L,G),r:L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})}},W={};Ae.r(W),Ae.d(W,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}\n";Ve.exports=W})()},3364:Ve=>{(()=>{"use strict";var Ae={d:(L,G)=>{for(var U in G)Ae.o(G,U)&&!Ae.o(L,U)&&Object.defineProperty(L,U,{enumerable:!0,get:G[U]})},o:(L,G)=>Object.prototype.hasOwnProperty.call(L,G),r:L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})}},W={};Ae.r(W),Ae.d(W,{default:()=>Y});const Y='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the SQRT zoom ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n\n  // Finally, we adapt the edge thickness to the "SQRT rule" in sigma (so that\n  // items are not too big when zoomed in, and not too small when zoomed out).\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\n  // it\'s simpler like this:\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasint effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n';Ve.exports=W})()},2181:Ve=>{(()=>{"use strict";var Ae={d:(L,G)=>{for(var U in G)Ae.o(G,U)&&!Ae.o(L,U)&&Object.defineProperty(L,U,{enumerable:!0,get:G[U]})},o:(L,G)=>Object.prototype.hasOwnProperty.call(L,G),r:L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})}},W={};Ae.r(W),Ae.d(W,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(transparent, v_color, t);\n}\n";Ve.exports=W})()},7768:Ve=>{(()=>{"use strict";var Ae={d:(L,G)=>{for(var U in G)Ae.o(G,U)&&!Ae.o(L,U)&&Object.defineProperty(L,U,{enumerable:!0,get:G[U]})},o:(L,G)=>Object.prototype.hasOwnProperty.call(L,G),r:L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})}},W={};Ae.r(W),Ae.d(W,{default:()=>Y});const Y="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";Ve.exports=W})()},5166:(Ve,Ae)=>{"use strict";function W(U,j,D){var q=j.createShader("VERTEX"===U?j.VERTEX_SHADER:j.FRAGMENT_SHADER);if(null===q)throw new Error("loadShader: error while creating the shader");if(j.shaderSource(q,D),j.compileShader(q),!j.getShaderParameter(q,j.COMPILE_STATUS)){var te=j.getShaderInfoLog(q);throw j.deleteShader(q),new Error("loadShader: error while compiling the shader:\n".concat(te,"\n").concat(D))}return q}Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.loadProgram=Ae.loadFragmentShader=Ae.loadVertexShader=void 0,Ae.loadVertexShader=function Y(U,j){return W("VERTEX",U,j)},Ae.loadFragmentShader=function L(U,j){return W("FRAGMENT",U,j)},Ae.loadProgram=function G(U,j){var R,q,D=U.createProgram();if(null===D)throw new Error("loadProgram: error while creating the program.");for(R=0,q=j.length;R<q;R++)U.attachShader(D,j[R]);if(U.linkProgram(D),!U.getProgramParameter(D,U.LINK_STATUS))throw U.deleteProgram(D),new Error("loadProgram: error while linking the program.");return D}},2621:function(Ve,Ae,W){"use strict";var Y=this&&this.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.DEFAULT_SETTINGS=Ae.validateSettings=void 0;var L=Y(W(9597)),G=Y(W(4997)),U=Y(W(1285)),j=Y(W(105)),D=Y(W(8959)),R=Y(W(1391));Ae.validateSettings=function q(ne){if("number"!=typeof ne.labelDensity||ne.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var te=ne.minCameraRatio,se=ne.maxCameraRatio;if("number"==typeof te&&"number"==typeof se&&se<te)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},Ae.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:L.default,hoverRenderer:G.default,edgeLabelRenderer:U.default,allowInvalidContainer:!1,nodeProgramClasses:{circle:j.default},edgeProgramClasses:{arrow:R.default,line:D.default}}},4870:function(Ve,Ae,W){"use strict";var ie,Y=this&&this.__extends||(ie=function(oe,N){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,J){V.__proto__=J}||function(V,J){for(var fe in J)Object.prototype.hasOwnProperty.call(J,fe)&&(V[fe]=J[fe])})(oe,N)},function(oe,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function V(){this.constructor=oe}ie(oe,N),oe.prototype=null===N?Object.create(N):(V.prototype=N.prototype,new V)}),L=this&&this.__assign||function(){return L=Object.assign||function(ie){for(var oe,N=1,V=arguments.length;N<V;N++)for(var J in oe=arguments[N])Object.prototype.hasOwnProperty.call(oe,J)&&(ie[J]=oe[J]);return ie},L.apply(this,arguments)},G=this&&this.__values||function(ie){var oe="function"==typeof Symbol&&Symbol.iterator,N=oe&&ie[oe],V=0;if(N)return N.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&V>=ie.length&&(ie=void 0),{value:ie&&ie[V++],done:!ie}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")},U=this&&this.__importDefault||function(ie){return ie&&ie.__esModule?ie:{default:ie}};Object.defineProperty(Ae,"__esModule",{value:!0});var j=U(W(2002)),D=U(W(2465)),R=U(W(3650)),q=W(57),ne=W(1699),te=W(4942),se=W(2621),ee=U(W(1565)),K=W(7611),z=W(3180);function ce(ie,oe,N){if(!N.hasOwnProperty("x")||!N.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(oe,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return N.color||(N.color=ie.defaultNodeColor),!N.label&&""!==N.label&&(N.label=null),N.label=null!=N.label?""+N.label:null,N.size||(N.size=2),N.hasOwnProperty("hidden")||(N.hidden=!1),N.hasOwnProperty("highlighted")||(N.highlighted=!1),N.hasOwnProperty("forceLabel")||(N.forceLabel=!1),(!N.type||""===N.type)&&(N.type=ie.defaultNodeType),N.zIndex||(N.zIndex=0),N}function Ce(ie,oe,N){return N.color||(N.color=ie.defaultEdgeColor),N.label||(N.label=""),N.size||(N.size=.5),N.hasOwnProperty("hidden")||(N.hidden=!1),N.hasOwnProperty("forceLabel")||(N.forceLabel=!1),(!N.type||""===N.type)&&(N.type=ie.defaultEdgeType),N.zIndex||(N.zIndex=0),N}var Re=function(ie){function oe(N,V,J){void 0===J&&(J={});var fe=ie.call(this)||this;if(fe.elements={},fe.canvasContexts={},fe.webGLContexts={},fe.activeListeners={},fe.quadtree=new R.default,fe.labelGrid=new te.LabelGrid,fe.nodeDataCache={},fe.edgeDataCache={},fe.nodesWithForcedLabels=[],fe.edgesWithForcedLabels=[],fe.nodeExtent={x:[0,1],y:[0,1]},fe.matrix=(0,K.identity)(),fe.invMatrix=(0,K.identity)(),fe.correctionRatio=1,fe.customBBox=null,fe.normalizationFunction=(0,ne.createNormalizationFunction)({x:[0,1],y:[0,1]}),fe.cameraSizeRatio=1,fe.width=0,fe.height=0,fe.pixelRatio=(0,ne.getPixelRatio)(),fe.displayedLabels=new Set,fe.highlightedNodes=new Set,fe.hoveredNode=null,fe.hoveredEdge=null,fe.renderFrame=null,fe.renderHighlightedNodesFrame=null,fe.needToProcess=!1,fe.needToSoftProcess=!1,fe.checkEdgesEventsFrame=null,fe.nodePrograms={},fe.hoverNodePrograms={},fe.edgePrograms={},fe.settings=(0,ne.assign)({},se.DEFAULT_SETTINGS,J),(0,se.validateSettings)(fe.settings),(0,ne.validateGraph)(N),!(V instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var ke in fe.graph=N,fe.container=V,fe.createWebGLContext("edges",{preserveDrawingBuffer:!0}),fe.createCanvasContext("edgeLabels"),fe.createWebGLContext("nodes"),fe.createCanvasContext("labels"),fe.createCanvasContext("hovers"),fe.createWebGLContext("hoverNodes"),fe.createCanvasContext("mouse"),fe.webGLContexts){var Pe=fe.webGLContexts[ke];Pe.blendFunc(Pe.ONE,Pe.ONE_MINUS_SRC_ALPHA),Pe.enable(Pe.BLEND)}for(var nt in fe.settings.nodeProgramClasses){var Le=fe.settings.nodeProgramClasses[nt];fe.nodePrograms[nt]=new Le(fe.webGLContexts.nodes,fe),fe.hoverNodePrograms[nt]=new Le(fe.webGLContexts.hoverNodes,fe)}for(var nt in fe.settings.edgeProgramClasses)fe.edgePrograms[nt]=new(0,fe.settings.edgeProgramClasses[nt])(fe.webGLContexts.edges,fe);return fe.resize(),fe.camera=new j.default,fe.bindCameraHandlers(),fe.mouseCaptor=new D.default(fe.elements.mouse,fe),fe.touchCaptor=new ee.default(fe.elements.mouse,fe),fe.bindEventHandlers(),fe.bindGraphHandlers(),fe.handleSettingsUpdate(),fe.process(),fe.render(),fe}return Y(oe,ie),oe.prototype.createCanvas=function(N){var V=(0,ne.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(N)});return this.elements[N]=V,this.container.appendChild(V),V},oe.prototype.createCanvasContext=function(N){var V=this.createCanvas(N);return this.canvasContexts[N]=V.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},oe.prototype.createWebGLContext=function(N,V){var ke,J=this.createCanvas(N),fe=L({preserveDrawingBuffer:!1,antialias:!1},V||{});return(ke=J.getContext("webgl2",fe))||(ke=J.getContext("webgl",fe)),ke||(ke=J.getContext("experimental-webgl",fe)),this.webGLContexts[N]=ke,this},oe.prototype.bindCameraHandlers=function(){var N=this;return this.activeListeners.camera=function(){N._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},oe.prototype.mouseIsOnNode=function(N,V,J){var fe=N.x,ke=N.y,Pe=V.x,nt=V.y;return fe>Pe-J&&fe<Pe+J&&ke>nt-J&&ke<nt+J&&Math.sqrt(Math.pow(fe-Pe,2)+Math.pow(ke-nt,2))<J},oe.prototype.getQuadNodes=function(N){var V=this.viewportToFramedGraph(N);return this.quadtree.point(V.x,1-V.y)},oe.prototype.getNodeAtPosition=function(N){for(var V=N.x,J=N.y,fe=this.getQuadNodes(N),ke=1/0,Pe=null,nt=0,Le=fe.length;nt<Le;nt++){var at=fe[nt],It=this.nodeDataCache[at],Ge=this.framedGraphToViewport(It),yt=this.scaleSize(It.size);if(!It.hidden&&this.mouseIsOnNode(N,Ge,yt)){var mt=Math.sqrt(Math.pow(V-Ge.x,2)+Math.pow(J-Ge.y,2));mt<ke&&(ke=mt,Pe=at)}}return Pe},oe.prototype.bindEventHandlers=function(){var N=this;this.activeListeners.handleResize=function(){N.needToSoftProcess=!0,N._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(J){var fe={event:J,preventSigmaDefault:function(){J.preventSigmaDefault()}},ke=N.getNodeAtPosition(J);if(ke&&N.hoveredNode!==ke&&!N.nodeDataCache[ke].hidden)return N.hoveredNode&&N.emit("leaveNode",L(L({},fe),{node:N.hoveredNode})),N.hoveredNode=ke,N.emit("enterNode",L(L({},fe),{node:ke})),void N.scheduleHighlightedNodesRender();if(N.hoveredNode){var Pe=N.nodeDataCache[N.hoveredNode],nt=N.framedGraphToViewport(Pe),Le=N.scaleSize(Pe.size);if(!N.mouseIsOnNode(J,nt,Le)){var at=N.hoveredNode;return N.hoveredNode=null,N.emit("leaveNode",L(L({},fe),{node:at})),void N.scheduleHighlightedNodesRender()}}!0===N.settings.enableEdgeHoverEvents?N.checkEdgeHoverEvents(fe):"debounce"===N.settings.enableEdgeHoverEvents&&(N.checkEdgesEventsFrame||(N.checkEdgesEventsFrame=(0,ne.requestFrame)(function(){N.checkEdgeHoverEvents(fe),N.checkEdgesEventsFrame=null})))};var V=function(J){return function(fe){var ke={event:fe,preventSigmaDefault:function(){fe.preventSigmaDefault()}},nt=fe.original.isFakeSigmaMouseEvent?N.getNodeAtPosition(fe):N.hoveredNode;if(nt)return N.emit("".concat(J,"Node"),L(L({},ke),{node:nt}));if("wheel"===J?N.settings.enableEdgeWheelEvents:N.settings.enableEdgeClickEvents){var Le=N.getEdgeAtPoint(fe.x,fe.y);if(Le)return N.emit("".concat(J,"Edge"),L(L({},ke),{edge:Le}))}return N.emit("".concat(J,"Stage"),ke)}};return this.activeListeners.handleClick=V("click"),this.activeListeners.handleRightClick=V("rightClick"),this.activeListeners.handleDoubleClick=V("doubleClick"),this.activeListeners.handleWheel=V("wheel"),this.activeListeners.handleDown=V("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},oe.prototype.bindGraphHandlers=function(){var N=this,V=this.graph;return this.activeListeners.graphUpdate=function(){N.needToProcess=!0,N._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){N.needToSoftProcess=!0,N._scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(J){delete N.nodeDataCache[J.key],N.hoveredNode===J.key&&(N.hoveredNode=null),N.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(J){delete N.edgeDataCache[J.key],N.hoveredEdge===J.key&&(N.hoveredEdge=null),N.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){N.edgeDataCache={},N.hoveredEdge=null,N.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){N.nodeDataCache={},N.hoveredNode=null,N.activeListeners.clearEdgesGraphUpdate()},V.on("nodeAdded",this.activeListeners.graphUpdate),V.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),V.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),V.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),V.on("edgeAdded",this.activeListeners.graphUpdate),V.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),V.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),V.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),V.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),V.on("cleared",this.activeListeners.clearGraphUpdate),this},oe.prototype.checkEdgeHoverEvents=function(N){var V=this.hoveredNode?null:this.getEdgeAtPoint(N.event.x,N.event.y);return V!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",L(L({},N),{edge:this.hoveredEdge})),V&&this.emit("enterEdge",L(L({},N),{edge:V})),this.hoveredEdge=V),this},oe.prototype.getEdgeAtPoint=function(N,V){var J,fe,ke=this,nt=this.edgeDataCache,Le=this.nodeDataCache;if(!(0,z.isPixelColored)(this.webGLContexts.edges,N*this.pixelRatio,V*this.pixelRatio))return null;var at=this.viewportToGraph({x:N,y:V}),It=at.x,Ge=at.y,yt=0;if(this.graph.someEdge(function(Ct,cn,wn,An,$e,le){var ot=$e.x,Je=$e.y,Sn=le.x,Hn=le.y;if(nt[Ct].hidden||Le[wn].hidden||Le[An].hidden)return!1;if(ot!==Sn||Je!==Hn){var pt=Math.sqrt(Math.pow(Sn-ot,2)+Math.pow(Hn-Je,2)),ht=ke.graphToViewport({x:ot,y:Je}),Ht=ht.x,We=ht.y,Ie=ke.graphToViewport({x:Sn,y:Hn}),Et=Ie.y,dn=Math.sqrt(Math.pow(Ie.x-Ht,2)+Math.pow(Et-We,2));return yt=pt/dn,!0}}),!yt)return null;var mt=this.graph.filterEdges(function(Ct,cn,wn,An,$e,le){return!(nt[Ct].hidden||Le[wn].hidden||Le[An].hidden)&&(!!(0,z.doEdgeCollideWithPoint)(It,Ge,$e.x,$e.y,le.x,le.y,nt[Ct].size*yt/ke.cameraSizeRatio)||void 0)});if(0===mt.length)return null;var _t=mt[mt.length-1],Fn=-1/0;try{for(var Ot=G(mt),Pn=Ot.next();!Pn.done;Pn=Ot.next()){var nn=Pn.value,Ze=this.graph.getEdgeAttribute(nn,"zIndex");Ze>=Fn&&(_t=nn,Fn=Ze)}}catch(Ct){J={error:Ct}}finally{try{Pn&&!Pn.done&&(fe=Ot.return)&&fe.call(Ot)}finally{if(J)throw J.error}}return _t},oe.prototype.process=function(N){var V=this;void 0===N&&(N=!1);var J=this.graph,fe=this.settings,ke=this.getDimensions(),Pe=[1/0,-1/0],nt=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(ke,fe.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,ne.graphExtent)(J),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var Le=new j.default,at=(0,ne.matrixFromCamera)(Le.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,ne.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var It={},Ge=J.nodes(),yt=0,mt=Ge.length;yt<mt;yt++){var _t=Ge[yt],Fn=Object.assign({},J.getNodeAttributes(_t));fe.nodeReducer&&(Fn=fe.nodeReducer(_t,Fn)),It[(Ot=ce(this.settings,_t,Fn)).type]=(It[Ot.type]||0)+1,this.nodeDataCache[_t]=Ot,this.normalizationFunction.applyTo(Ot),Ot.forceLabel&&this.nodesWithForcedLabels.push(_t),this.settings.zIndex&&(Ot.zIndex<Pe[0]&&(Pe[0]=Ot.zIndex),Ot.zIndex>Pe[1]&&(Pe[1]=Ot.zIndex))}for(var Pn in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(Pn))throw new Error('Sigma: could not find a suitable program for node type "'.concat(Pn,'"!'));N||this.nodePrograms[Pn].allocate(It[Pn]||0),It[Pn]=0}for(this.settings.zIndex&&Pe[0]!==Pe[1]&&(Ge=(0,ne.zIndexOrdering)(Pe,function(ot){return V.nodeDataCache[ot].zIndex},Ge)),yt=0,mt=Ge.length;yt<mt;yt++)this.quadtree.add(_t=Ge[yt],(Ot=this.nodeDataCache[_t]).x,1-Ot.y,Ot.size/this.width),"string"==typeof Ot.label&&!Ot.hidden&&this.labelGrid.add(_t,Ot.size,this.framedGraphToViewport(Ot,{matrix:at})),this.nodePrograms[Ot.type].process(Ot,Ot.hidden,It[Ot.type]++),Ot.highlighted&&!Ot.hidden&&this.highlightedNodes.add(_t);this.labelGrid.organize();var nn={},Ze=J.edges();for(yt=0,mt=Ze.length;yt<mt;yt++){var Ct=Ze[yt];Fn=Object.assign({},J.getEdgeAttributes(Ct)),fe.edgeReducer&&(Fn=fe.edgeReducer(Ct,Fn)),nn[(Ot=Ce(this.settings,0,Fn)).type]=(nn[Ot.type]||0)+1,this.edgeDataCache[Ct]=Ot,Ot.forceLabel&&!Ot.hidden&&this.edgesWithForcedLabels.push(Ct),this.settings.zIndex&&(Ot.zIndex<nt[0]&&(nt[0]=Ot.zIndex),Ot.zIndex>nt[1]&&(nt[1]=Ot.zIndex))}for(var Pn in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(Pn))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(Pn,'"!'));N||this.edgePrograms[Pn].allocate(nn[Pn]||0),nn[Pn]=0}for(this.settings.zIndex&&nt[0]!==nt[1]&&(Ze=(0,ne.zIndexOrdering)(nt,function(ot){return V.edgeDataCache[ot].zIndex},Ze)),yt=0,mt=Ze.length;yt<mt;yt++){var Ot=this.edgeDataCache[Ct=Ze[yt]],cn=J.extremities(Ct),wn=this.nodeDataCache[cn[0]],An=this.nodeDataCache[cn[1]];this.edgePrograms[Ot.type].process(wn,An,Ot,Ot.hidden||wn.hidden||An.hidden,nn[Ot.type]++)}for(var Pn in this.edgePrograms){var le=this.edgePrograms[Pn];!N&&"function"==typeof le.computeIndices&&le.computeIndices()}return this},oe.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},oe.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},oe.prototype._scheduleRefresh=function(){var N=this;return this.renderFrame||(this.renderFrame=(0,ne.requestFrame)(function(){N._refresh(),N.renderFrame=null})),this},oe.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var V,N=this.camera.getState();if(N.ratio>=1)V=new Set(this.graph.nodes());else{var J=this.viewRectangle();V=new Set(this.quadtree.rectangle(J.x1,1-J.y1,J.x2,1-J.y2,J.height))}var fe=this.labelGrid.getLabelsToDisplay(N.ratio,this.settings.labelDensity).concat(this.nodesWithForcedLabels);this.displayedLabels=new Set;for(var ke=this.canvasContexts.labels,Pe=0,nt=fe.length;Pe<nt;Pe++){var Le=fe[Pe],at=this.nodeDataCache[Le];if(!this.displayedLabels.has(Le)&&!at.hidden){var It=this.framedGraphToViewport(at),Ge=It.x,yt=It.y,mt=this.scaleSize(at.size);!at.forceLabel&&mt<this.settings.labelRenderedSizeThreshold||!V.has(Le)||(this.displayedLabels.add(Le),this.settings.labelRenderer(ke,L(L({key:Le},at),{size:mt,x:Ge,y:yt}),this.settings))}}return this},oe.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var N=this.canvasContexts.edgeLabels;N.clearRect(0,0,this.width,this.height);for(var V=(0,te.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),J=new Set,fe=0,ke=V.length;fe<ke;fe++){var Pe=V[fe],nt=this.graph.extremities(Pe),Le=this.nodeDataCache[nt[0]],at=this.nodeDataCache[nt[1]],It=this.edgeDataCache[Pe];J.has(Pe)||It.hidden||Le.hidden||at.hidden||(this.settings.edgeLabelRenderer(N,L(L({key:Pe},It),{size:this.scaleSize(It.size)}),L(L(L({key:nt[0]},Le),this.framedGraphToViewport(Le)),{size:this.scaleSize(Le.size)}),L(L(L({key:nt[1]},at),this.framedGraphToViewport(at)),{size:this.scaleSize(at.size)}),this.settings),J.add(Pe))}return this},oe.prototype.renderHighlightedNodes=function(){var N=this,V=this.canvasContexts.hovers;V.clearRect(0,0,this.width,this.height);var fe=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&fe.push(this.hoveredNode),this.highlightedNodes.forEach(function(Le){Le!==N.hoveredNode&&fe.push(Le)}),fe.forEach(function(Le){return function(Le){var at=N.nodeDataCache[Le],It=N.framedGraphToViewport(at),Ge=It.x,yt=It.y,mt=N.scaleSize(at.size);N.settings.hoverRenderer(V,L(L({key:Le},at),{size:mt,x:Ge,y:yt}),N.settings)}(Le)});var ke={};for(var Pe in fe.forEach(function(Le){var at=N.nodeDataCache[Le].type;ke[at]=(ke[at]||0)+1}),this.hoverNodePrograms)this.hoverNodePrograms[Pe].allocate(ke[Pe]||0),ke[Pe]=0;for(var Pe in fe.forEach(function(Le){var at=N.nodeDataCache[Le];N.hoverNodePrograms[at.type].process(at,at.hidden,ke[at.type]++)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.hoverNodePrograms){var nt=this.hoverNodePrograms[Pe];nt.bind(),nt.bufferData(),nt.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:this.pixelRatio})}},oe.prototype.scheduleHighlightedNodesRender=function(){var N=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,ne.requestFrame)(function(){N.renderHighlightedNodesFrame=null,N.renderHighlightedNodes(),N.renderEdgeLabels()}))},oe.prototype.render=function(){var N=this;this.emit("beforeRender");var V=function(){return N.emit("afterRender"),N};if(this.renderFrame&&((0,ne.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return V();var J=this.mouseCaptor,fe=this.camera.isAnimated()||J.isMoving||J.draggedEvents||J.currentWheelDirection,ke=this.camera.getState(),Pe=this.getDimensions(),nt=this.getGraphDimensions(),Le=this.getSetting("stagePadding")||0;for(var at in this.matrix=(0,ne.matrixFromCamera)(ke,Pe,nt,Le),this.invMatrix=(0,ne.matrixFromCamera)(ke,Pe,nt,Le,!0),this.correctionRatio=(0,ne.getMatrixImpact)(this.matrix,ke,Pe),this.nodePrograms)(It=this.nodePrograms[at]).bind(),It.bufferData(),It.render({matrix:this.matrix,width:this.width,height:this.height,ratio:ke.ratio,correctionRatio:this.correctionRatio/ke.ratio,scalingRatio:this.pixelRatio});if(!this.settings.hideEdgesOnMove||!fe)for(var at in this.edgePrograms){var It;(It=this.edgePrograms[at]).bind(),It.bufferData(),It.render({matrix:this.matrix,width:this.width,height:this.height,ratio:ke.ratio,correctionRatio:this.correctionRatio/ke.ratio,scalingRatio:this.pixelRatio})}return this.settings.hideLabelsOnMove&&fe||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),V()},oe.prototype.updateCachedValues=function(){var N=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(N)},oe.prototype.getCamera=function(){return this.camera},oe.prototype.getContainer=function(){return this.container},oe.prototype.getGraph=function(){return this.graph},oe.prototype.getMouseCaptor=function(){return this.mouseCaptor},oe.prototype.getTouchCaptor=function(){return this.touchCaptor},oe.prototype.getDimensions=function(){return{width:this.width,height:this.height}},oe.prototype.getGraphDimensions=function(){var N=this.customBBox||this.nodeExtent;return{width:N.x[1]-N.x[0]||1,height:N.y[1]-N.y[0]||1}},oe.prototype.getNodeDisplayData=function(N){var V=this.nodeDataCache[N];return V?Object.assign({},V):void 0},oe.prototype.getEdgeDisplayData=function(N){var V=this.edgeDataCache[N];return V?Object.assign({},V):void 0},oe.prototype.getSettings=function(){return L({},this.settings)},oe.prototype.getSetting=function(N){return this.settings[N]},oe.prototype.setSetting=function(N,V){return this.settings[N]=V,(0,se.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},oe.prototype.updateSetting=function(N,V){return this.settings[N]=V(this.settings[N]),(0,se.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},oe.prototype.resize=function(){var N=this.width,V=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,ne.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.");this.height=1}if(N===this.width&&V===this.height)return this;for(var J in this.emit("resize"),this.elements){var fe=this.elements[J];fe.style.width=this.width+"px",fe.style.height=this.height+"px"}for(var J in this.canvasContexts)this.elements[J].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[J].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[J].scale(this.pixelRatio,this.pixelRatio);for(var J in this.webGLContexts)this.elements[J].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[J].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[J].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},oe.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},oe.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},oe.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},oe.prototype.getViewportZoomedState=function(N,V){var J=this.camera.getState(),ke=J.angle,Pe=J.x,nt=J.y,Le=V/J.ratio,at={x:this.width/2,y:this.height/2},It=this.viewportToFramedGraph(N),Ge=this.viewportToFramedGraph(at);return{angle:ke,x:(It.x-Ge.x)*(1-Le)+Pe,y:(It.y-Ge.y)*(1-Le)+nt,ratio:V}},oe.prototype.viewRectangle=function(){var N=0*this.width/8,V=0*this.height/8,J=this.viewportToFramedGraph({x:0-N,y:0-V}),fe=this.viewportToFramedGraph({x:this.width+N,y:0-V}),ke=this.viewportToFramedGraph({x:0,y:this.height+V});return{x1:J.x,y1:J.y,x2:fe.x,y2:fe.y,height:fe.y-ke.y}},oe.prototype.framedGraphToViewport=function(N,V){void 0===V&&(V={});var fe=V.matrix?V.matrix:V.cameraState||V.viewportDimensions||V.graphDimensions?(0,ne.matrixFromCamera)(V.cameraState||this.camera.getState(),V.viewportDimensions||this.getDimensions(),V.graphDimensions||this.getGraphDimensions(),V.padding||this.getSetting("stagePadding")||0):this.matrix,ke=(0,K.multiplyVec2)(fe,N);return{x:(1+ke.x)*this.width/2,y:(1-ke.y)*this.height/2}},oe.prototype.viewportToFramedGraph=function(N,V){void 0===V&&(V={});var fe=V.matrix?V.matrix:V.cameraState||V.viewportDimensions||!V.graphDimensions?(0,ne.matrixFromCamera)(V.cameraState||this.camera.getState(),V.viewportDimensions||this.getDimensions(),V.graphDimensions||this.getGraphDimensions(),V.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,ke=(0,K.multiplyVec2)(fe,{x:N.x/this.width*2-1,y:1-N.y/this.height*2});return isNaN(ke.x)&&(ke.x=0),isNaN(ke.y)&&(ke.y=0),ke},oe.prototype.viewportToGraph=function(N,V){return void 0===V&&(V={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(N,V))},oe.prototype.graphToViewport=function(N,V){return void 0===V&&(V={}),this.framedGraphToViewport(this.normalizationFunction(N),V)},oe.prototype.getBBox=function(){return(0,ne.graphExtent)(this.graph)},oe.prototype.getCustomBBox=function(){return this.customBBox},oe.prototype.setCustomBBox=function(N){return this.customBBox=N,this._scheduleRefresh(),this},oe.prototype.kill=function(){var N=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),N.removeListener("nodeAdded",this.activeListeners.dropNodeGraphUpdate),N.removeListener("nodeDropped",this.activeListeners.graphUpdate),N.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),N.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),N.removeListener("edgeAdded",this.activeListeners.graphUpdate),N.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),N.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),N.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),N.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),N.removeListener("cleared",this.activeListeners.clearGraphUpdate),this.quadtree=new R.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,ne.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,ne.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var V=this.container;V.firstChild;)V.removeChild(V.firstChild)},oe.prototype.scaleSize=function(N){return N/this.cameraSizeRatio},oe.prototype.getCanvases=function(){return L({},this.elements)},oe}(q.TypedEventEmitter);Ae.default=Re},57:function(Ve,Ae,W){"use strict";var U,Y=this&&this.__extends||(U=function(j,D){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,q){R.__proto__=q}||function(R,q){for(var ne in q)Object.prototype.hasOwnProperty.call(q,ne)&&(R[ne]=q[ne])})(j,D)},function(j,D){if("function"!=typeof D&&null!==D)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");function R(){this.constructor=j}U(j,D),j.prototype=null===D?Object.create(D):(R.prototype=D.prototype,new R)});Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.TypedEventEmitter=void 0;var G=function(U){function j(){var D=U.call(this)||this;return D.rawEmitter=D,D}return Y(j,U),j}(W(9069).EventEmitter);Ae.TypedEventEmitter=G},2630:function(Ve,Ae,W){"use strict";var Y=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.animateNodes=Ae.ANIMATE_DEFAULTS=void 0;var L=W(1699),G=Y(W(4539));Ae.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},Ae.animateNodes=function U(j,D,R,q){var ne=Object.assign({},Ae.ANIMATE_DEFAULTS,R),te="function"==typeof ne.easing?ne.easing:G.default[ne.easing],se=Date.now(),ee={};for(var K in D){var z=D[K];for(var ce in ee[K]={},z)ee[K][ce]=j.getNodeAttribute(K,ce)}var Ce=null,Re=function(){Ce=null;var ie=(Date.now()-se)/ne.duration;if(ie>=1){for(var oe in D){var N=D[oe];for(var V in N)j.setNodeAttribute(oe,V,N[V])}"function"==typeof q&&q()}else{for(var oe in ie=te(ie),D){N=D[oe];var J=ee[oe];for(var V in N)j.setNodeAttribute(oe,V,N[V]*ie+J[V]*(1-ie))}Ce=(0,L.requestFrame)(Re)}};return Re(),function(){Ce&&(0,L.cancelFrame)(Ce)}}},5147:(Ve,Ae)=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.HTML_COLORS=void 0,Ae.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"}},4539:(Ve,Ae)=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.cubicInOut=Ae.cubicOut=Ae.cubicIn=Ae.quadraticInOut=Ae.quadraticOut=Ae.quadraticIn=Ae.linear=void 0,Ae.linear=function(q){return q},Ae.quadraticIn=function(q){return q*q},Ae.quadraticOut=function(q){return q*(2-q)},Ae.quadraticInOut=function(q){return(q*=2)<1?.5*q*q:-.5*(--q*(q-2)-1)},Ae.cubicIn=function(q){return q*q*q},Ae.cubicOut=function(q){return--q*q*q+1},Ae.cubicInOut=function(q){return(q*=2)<1?.5*q*q*q:.5*((q-=2)*q*q+2)},Ae.default={linear:Ae.linear,quadraticIn:Ae.quadraticIn,quadraticOut:Ae.quadraticOut,quadraticInOut:Ae.quadraticInOut,cubicIn:Ae.cubicIn,cubicOut:Ae.cubicOut,cubicInOut:Ae.cubicInOut}},3180:(Ve,Ae)=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.doEdgeCollideWithPoint=Ae.isPixelColored=void 0,Ae.isPixelColored=function W(L,G,U){var j=new Uint8Array(4);return L.readPixels(G,L.drawingBufferHeight-U,1,1,L.RGBA,L.UNSIGNED_BYTE,j),j[3]>0},Ae.doEdgeCollideWithPoint=function Y(L,G,U,j,D,R,q){return!(L<U-q&&L<D-q||G<j-q&&G<R-q||L>U+q&&L>D+q||G>j+q&&G>R+q)&&Math.abs((D-U)*(j-G)-(U-L)*(R-j))/Math.sqrt(Math.pow(D-U,2)+Math.pow(R-j,2))<q/2}},1699:function(Ve,Ae,W){"use strict";var Y=this&&this.__read||function(Ge,yt){var mt="function"==typeof Symbol&&Ge[Symbol.iterator];if(!mt)return Ge;var Fn,Pn,_t=mt.call(Ge),Ot=[];try{for(;(void 0===yt||yt-- >0)&&!(Fn=_t.next()).done;)Ot.push(Fn.value)}catch(nn){Pn={error:nn}}finally{try{Fn&&!Fn.done&&(mt=_t.return)&&mt.call(_t)}finally{if(Pn)throw Pn.error}}return Ot},L=this&&this.__importDefault||function(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.validateGraph=Ae.canUse32BitsIndices=Ae.extractPixel=Ae.getMatrixImpact=Ae.matrixFromCamera=Ae.getCorrectionRatio=Ae.floatColor=Ae.floatArrayColor=Ae.parseColor=Ae.zIndexOrdering=Ae.createNormalizationFunction=Ae.graphExtent=Ae.getPixelRatio=Ae.createElement=Ae.cancelFrame=Ae.requestFrame=Ae.assignDeep=Ae.assign=Ae.isPlainObject=void 0;var G=L(W(6714)),U=W(7611),j=W(5147);function D(Ge){return"object"==typeof Ge&&null!==Ge&&Ge.constructor===Object}Ae.isPlainObject=D,Ae.assign=function R(Ge){for(var yt=[],mt=1;mt<arguments.length;mt++)yt[mt-1]=arguments[mt];Ge=Ge||{};for(var _t=0,Fn=yt.length;_t<Fn;_t++){var Ot=yt[_t];!Ot||Object.assign(Ge,Ot)}return Ge},Ae.assignDeep=function q(Ge){for(var yt=[],mt=1;mt<arguments.length;mt++)yt[mt-1]=arguments[mt];Ge=Ge||{};for(var _t=0,Fn=yt.length;_t<Fn;_t++){var Ot=yt[_t];if(Ot)for(var Pn in Ot)Ge[Pn]=D(Ot[Pn])?q(Ge[Pn],Ot[Pn]):Ot[Pn]}return Ge},Ae.requestFrame=typeof requestAnimationFrame<"u"?function(Ge){return requestAnimationFrame(Ge)}:function(Ge){return setTimeout(Ge,0)},Ae.cancelFrame=typeof cancelAnimationFrame<"u"?function(Ge){return cancelAnimationFrame(Ge)}:function(Ge){return clearTimeout(Ge)},Ae.createElement=function ne(Ge,yt,mt){var _t=document.createElement(Ge);if(yt)for(var Fn in yt)_t.style[Fn]=yt[Fn];if(mt)for(var Fn in mt)_t.setAttribute(Fn,mt[Fn]);return _t},Ae.getPixelRatio=function te(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1},Ae.graphExtent=function se(Ge){if(!Ge.order)return{x:[0,1],y:[0,1]};var yt=1/0,mt=-1/0,_t=1/0,Fn=-1/0;return Ge.forEachNode(function(Ot,Pn){var nn=Pn.x,Ze=Pn.y;nn<yt&&(yt=nn),nn>mt&&(mt=nn),Ze<_t&&(_t=Ze),Ze>Fn&&(Fn=Ze)}),{x:[yt,mt],y:[_t,Fn]}},Ae.createNormalizationFunction=function ee(Ge){var yt=Y(Ge.x,2),mt=yt[0],_t=yt[1],Fn=Y(Ge.y,2),Ot=Fn[0],Pn=Fn[1],nn=Math.max(_t-mt,Pn-Ot),Ze=(_t+mt)/2,Ct=(Pn+Ot)/2;(0===nn||Math.abs(nn)===1/0||isNaN(nn))&&(nn=1),isNaN(Ze)&&(Ze=0),isNaN(Ct)&&(Ct=0);var cn=function(wn){return{x:.5+(wn.x-Ze)/nn,y:.5+(wn.y-Ct)/nn}};return cn.applyTo=function(wn){wn.x=.5+(wn.x-Ze)/nn,wn.y=.5+(wn.y-Ct)/nn},cn.inverse=function(wn){return{x:Ze+nn*(wn.x-.5),y:Ct+nn*(wn.y-.5)}},cn.ratio=nn,cn},Ae.zIndexOrdering=function K(Ge,yt,mt){return mt.sort(function(_t,Fn){var Ot=yt(_t)||0,Pn=yt(Fn)||0;return Ot<Pn?-1:Ot>Pn?1:0})};var z=new Int8Array(4),ce=new Int32Array(z.buffer,0,1),Ce=new Float32Array(z.buffer,0,1),Re=/^\s*rgba?\s*\(/,ie=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function oe(Ge){var yt=0,mt=0,_t=0,Fn=1;if("#"===Ge[0])4===Ge.length?(yt=parseInt(Ge.charAt(1)+Ge.charAt(1),16),mt=parseInt(Ge.charAt(2)+Ge.charAt(2),16),_t=parseInt(Ge.charAt(3)+Ge.charAt(3),16)):(yt=parseInt(Ge.charAt(1)+Ge.charAt(2),16),mt=parseInt(Ge.charAt(3)+Ge.charAt(4),16),_t=parseInt(Ge.charAt(5)+Ge.charAt(6),16));else if(Re.test(Ge)){var Ot=Ge.match(ie);Ot&&(yt=+Ot[1],mt=+Ot[2],_t=+Ot[3],Ot[4]&&(Fn=+Ot[4]))}return{r:yt,g:mt,b:_t,a:Fn}}Ae.parseColor=oe;var N={};for(var V in j.HTML_COLORS)N[V]=fe(j.HTML_COLORS[V]),N[j.HTML_COLORS[V]]=N[V];function fe(Ge){if(typeof N[Ge]<"u")return N[Ge];var yt=oe(Ge),Ot=yt.a;ce[0]=4278190079&((Ot=255*Ot|0)<<24|yt.b<<16|yt.g<<8|yt.r);var Pn=Ce[0];return N[Ge]=Pn,Pn}function ke(Ge,yt){var mt=Ge.height/Ge.width,_t=yt.height/yt.width;return mt<1&&_t>1||mt>1&&_t<1?1:Math.min(Math.max(_t,1/_t),Math.max(1/mt,mt))}Ae.floatArrayColor=function J(Ge){var yt=oe(Ge=j.HTML_COLORS[Ge]||Ge);return new Float32Array([yt.r/255,yt.g/255,yt.b/255,yt.a])},Ae.floatColor=fe,Ae.getCorrectionRatio=ke,Ae.matrixFromCamera=function Pe(Ge,yt,mt,_t,Fn){var Ot=Ge.angle,Pn=Ge.ratio,nn=Ge.x,Ze=Ge.y,Ct=yt.width,cn=yt.height,wn=(0,U.identity)(),An=Math.min(Ct,cn)-2*_t,$e=ke(yt,mt);return Fn?((0,U.multiply)(wn,(0,U.translate)((0,U.identity)(),nn,Ze)),(0,U.multiply)(wn,(0,U.scale)((0,U.identity)(),Pn)),(0,U.multiply)(wn,(0,U.rotate)((0,U.identity)(),Ot)),(0,U.multiply)(wn,(0,U.scale)((0,U.identity)(),Ct/An/2/$e,cn/An/2/$e))):((0,U.multiply)(wn,(0,U.scale)((0,U.identity)(),An/Ct*2*$e,An/cn*2*$e)),(0,U.multiply)(wn,(0,U.rotate)((0,U.identity)(),-Ot)),(0,U.multiply)(wn,(0,U.scale)((0,U.identity)(),1/Pn)),(0,U.multiply)(wn,(0,U.translate)((0,U.identity)(),-nn,-Ze))),wn},Ae.getMatrixImpact=function nt(Ge,yt,mt){var _t=(0,U.multiplyVec2)(Ge,{x:Math.cos(yt.angle),y:Math.sin(yt.angle)},0),Ot=_t.y;return 1/Math.sqrt(Math.pow(_t.x,2)+Math.pow(Ot,2))/mt.width},Ae.extractPixel=function Le(Ge,yt,mt,_t){var Fn=_t||new Uint8Array(4);return Ge.readPixels(yt,mt,1,1,Ge.RGBA,Ge.UNSIGNED_BYTE,Fn),Fn},Ae.canUse32BitsIndices=function at(Ge){return typeof WebGL2RenderingContext<"u"&&Ge instanceof WebGL2RenderingContext||!!Ge.getExtension("OES_element_index_uint")},Ae.validateGraph=function It(Ge){if(!(0,G.default)(Ge))throw new Error("Sigma: invalid graph instance.");Ge.forEachNode(function(yt,mt){if(!Number.isFinite(mt.x)||!Number.isFinite(mt.y))throw new Error("Sigma: Coordinates of node ".concat(yt," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}},7611:(Ve,Ae)=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.multiplyVec2=Ae.multiply=Ae.translate=Ae.rotate=Ae.scale=Ae.identity=void 0,Ae.identity=function W(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},Ae.scale=function Y(D,R,q){return D[0]=R,D[4]="number"==typeof q?q:R,D},Ae.rotate=function L(D,R){var q=Math.sin(R),ne=Math.cos(R);return D[0]=ne,D[1]=q,D[3]=-q,D[4]=ne,D},Ae.translate=function G(D,R,q){return D[6]=R,D[7]=q,D},Ae.multiply=function U(D,R){var q=D[0],ne=D[1],te=D[2],se=D[3],ee=D[4],K=D[5],z=D[6],ce=D[7],Ce=D[8],Re=R[0],ie=R[1],oe=R[2],N=R[3],V=R[4],J=R[5],fe=R[6],ke=R[7],Pe=R[8];return D[0]=Re*q+ie*se+oe*z,D[1]=Re*ne+ie*ee+oe*ce,D[2]=Re*te+ie*K+oe*Ce,D[3]=N*q+V*se+J*z,D[4]=N*ne+V*ee+J*ce,D[5]=N*te+V*K+J*Ce,D[6]=fe*q+ke*se+Pe*z,D[7]=fe*ne+ke*ee+Pe*ce,D[8]=fe*te+ke*K+Pe*Ce,D},Ae.multiplyVec2=function j(D,R,q){void 0===q&&(q=1);var ce=R.x,Ce=R.y;return{x:ce*D[0]+Ce*D[3]+D[6]*q,y:ce*D[1]+Ce*D[4]+D[7]*q}}},295:(Ve,Ae,W)=>{Ve.exports=G;var Y=W(9069).EventEmitter;function G(){Y.call(this)}W(3894)(G,Y),G.Readable=W(3154),G.Writable=W(520),G.Duplex=W(1339),G.Transform=W(6025),G.PassThrough=W(6071),G.finished=W(7542),G.pipeline=W(954),G.Stream=G,G.prototype.pipe=function(U,j){var D=this;function R(z){U.writable&&!1===U.write(z)&&D.pause&&D.pause()}function q(){D.readable&&D.resume&&D.resume()}D.on("data",R),U.on("drain",q),!U._isStdio&&(!j||!1!==j.end)&&(D.on("end",te),D.on("close",se));var ne=!1;function te(){ne||(ne=!0,U.end())}function se(){ne||(ne=!0,"function"==typeof U.destroy&&U.destroy())}function ee(z){if(K(),0===Y.listenerCount(this,"error"))throw z}function K(){D.removeListener("data",R),U.removeListener("drain",q),D.removeListener("end",te),D.removeListener("close",se),D.removeListener("error",ee),U.removeListener("error",ee),D.removeListener("end",K),D.removeListener("close",K),U.removeListener("close",K)}return D.on("error",ee),U.on("error",ee),D.on("end",K),D.on("close",K),U.on("close",K),U.emit("pipe",D),U}},3054:(Ve,Ae,W)=>{"use strict";var Y=W(858).Buffer,L=Y.isEncoding||function(ie){switch((ie=""+ie)&&ie.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function j(ie){var oe;switch(this.encoding=function U(ie){var oe=function G(ie){if(!ie)return"utf8";for(var oe;;)switch(ie){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ie;default:if(oe)return;ie=(""+ie).toLowerCase(),oe=!0}}(ie);if("string"!=typeof oe&&(Y.isEncoding===L||!L(ie)))throw new Error("Unknown encoding: "+ie);return oe||ie}(ie),this.encoding){case"utf16le":this.text=ee,this.end=K,oe=4;break;case"utf8":this.fillLast=ne,oe=4;break;case"base64":this.text=z,this.end=ce,oe=3;break;default:return this.write=Ce,void(this.end=Re)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Y.allocUnsafe(oe)}function D(ie){return ie<=127?0:ie>>5==6?2:ie>>4==14?3:ie>>3==30?4:ie>>6==2?-1:-2}function ne(ie){var oe=this.lastTotal-this.lastNeed,N=function q(ie,oe,N){if(128!=(192&oe[0]))return ie.lastNeed=0,"\ufffd";if(ie.lastNeed>1&&oe.length>1){if(128!=(192&oe[1]))return ie.lastNeed=1,"\ufffd";if(ie.lastNeed>2&&oe.length>2&&128!=(192&oe[2]))return ie.lastNeed=2,"\ufffd"}}(this,ie);return void 0!==N?N:this.lastNeed<=ie.length?(ie.copy(this.lastChar,oe,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ie.copy(this.lastChar,oe,0,ie.length),void(this.lastNeed-=ie.length))}function ee(ie,oe){if((ie.length-oe)%2==0){var N=ie.toString("utf16le",oe);if(N){var V=N.charCodeAt(N.length-1);if(V>=55296&&V<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ie[ie.length-2],this.lastChar[1]=ie[ie.length-1],N.slice(0,-1)}return N}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ie[ie.length-1],ie.toString("utf16le",oe,ie.length-1)}function K(ie){var oe=ie&&ie.length?this.write(ie):"";return this.lastNeed?oe+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):oe}function z(ie,oe){var N=(ie.length-oe)%3;return 0===N?ie.toString("base64",oe):(this.lastNeed=3-N,this.lastTotal=3,1===N?this.lastChar[0]=ie[ie.length-1]:(this.lastChar[0]=ie[ie.length-2],this.lastChar[1]=ie[ie.length-1]),ie.toString("base64",oe,ie.length-N))}function ce(ie){var oe=ie&&ie.length?this.write(ie):"";return this.lastNeed?oe+this.lastChar.toString("base64",0,3-this.lastNeed):oe}function Ce(ie){return ie.toString(this.encoding)}function Re(ie){return ie&&ie.length?this.write(ie):""}Ae.s=j,j.prototype.write=function(ie){if(0===ie.length)return"";var oe,N;if(this.lastNeed){if(void 0===(oe=this.fillLast(ie)))return"";N=this.lastNeed,this.lastNeed=0}else N=0;return N<ie.length?oe?oe+this.text(ie,N):this.text(ie,N):oe||""},j.prototype.end=function se(ie){var oe=ie&&ie.length?this.write(ie):"";return this.lastNeed?oe+"\ufffd":oe},j.prototype.text=function te(ie,oe){var N=function R(ie,oe,N){var V=oe.length-1;if(V<N)return 0;var J=D(oe[V]);return J>=0?(J>0&&(ie.lastNeed=J-1),J):--V<N||-2===J?0:(J=D(oe[V]))>=0?(J>0&&(ie.lastNeed=J-2),J):--V<N||-2===J?0:(J=D(oe[V]))>=0?(J>0&&(2===J?J=0:ie.lastNeed=J-3),J):0}(this,ie,oe);if(!this.lastNeed)return ie.toString("utf8",oe);this.lastTotal=N;var V=ie.length-(N-this.lastNeed);return ie.copy(this.lastChar,0,V),ie.toString("utf8",oe,V)},j.prototype.fillLast=function(ie){if(this.lastNeed<=ie.length)return ie.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ie.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ie.length),this.lastNeed-=ie.length}},858:(Ve,Ae,W)=>{var Y=W(3172),L=Y.Buffer;function G(j,D){for(var R in j)D[R]=j[R]}function U(j,D,R){return L(j,D,R)}L.from&&L.alloc&&L.allocUnsafe&&L.allocUnsafeSlow?Ve.exports=Y:(G(Y,Ae),Ae.Buffer=U),U.prototype=Object.create(L.prototype),G(L,U),U.from=function(j,D,R){if("number"==typeof j)throw new TypeError("Argument must not be a number");return L(j,D,R)},U.alloc=function(j,D,R){if("number"!=typeof j)throw new TypeError("Argument must be a number");var q=L(j);return void 0!==D?"string"==typeof R?q.fill(D,R):q.fill(D):q.fill(0),q},U.allocUnsafe=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return L(j)},U.allocUnsafeSlow=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return Y.SlowBuffer(j)}},5570:function(Ve,Ae,W){"use strict";var Y=this&&this.__extends||function(ne,te){for(var se in te)te.hasOwnProperty(se)&&(ne[se]=te[se]);function ee(){this.constructor=ne}ne.prototype=null===te?Object.create(te):(ee.prototype=te.prototype,new ee)},L=W(5237),U={type:"change"},j={type:"start"},D={type:"end"},R=1e-6,q=function(ne){function te(se,ee,K){var z=ne.call(this)||this;return z.object=se,z.domElement=void 0!==ee?ee:document,z.window=void 0!==K?K:window,z.enabled=!0,z.target=new L.Vector3,z.minDistance=0,z.maxDistance=1/0,z.minZoom=0,z.maxZoom=1/0,z.minPolarAngle=0,z.maxPolarAngle=Math.PI,z.minAzimuthAngle=-1/0,z.maxAzimuthAngle=1/0,z.enableDamping=!1,z.dampingFactor=.25,z.enableZoom=!0,z.zoomSpeed=1,z.enableRotate=!0,z.rotateSpeed=1,z.enablePan=!0,z.keyPanSpeed=7,z.autoRotate=!1,z.autoRotateSpeed=2,z.enableKeys=!0,z.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},z.mouseButtons={ORBIT:L.MOUSE.LEFT,ZOOM:L.MOUSE.MIDDLE,PAN:L.MOUSE.RIGHT},z.target0=z.target.clone(),z.position0=z.object.position.clone(),z.zoom0=z.object.zoom,z.updateOffset=new L.Vector3,z.updateQuat=(new L.Quaternion).setFromUnitVectors(se.up,new L.Vector3(0,1,0)),z.updateQuatInverse=z.updateQuat.clone().inverse(),z.updateLastPosition=new L.Vector3,z.updateLastQuaternion=new L.Quaternion,z.state=-1,z.scale=1,z.spherical=new L.Spherical,z.sphericalDelta=new L.Spherical,z.panOffset=new L.Vector3,z.zoomChanged=!1,z.rotateStart=new L.Vector2,z.rotateEnd=new L.Vector2,z.rotateDelta=new L.Vector2,z.panStart=new L.Vector2,z.panEnd=new L.Vector2,z.panDelta=new L.Vector2,z.dollyStart=new L.Vector2,z.dollyEnd=new L.Vector2,z.dollyDelta=new L.Vector2,z.panLeftV=new L.Vector3,z.panUpV=new L.Vector3,z.panInternalOffset=new L.Vector3,z.onMouseDown=function(ce){if(!1!==z.enabled){if(ce.preventDefault(),ce.button===z.mouseButtons.ORBIT){if(!1===z.enableRotate)return;z.rotateStart.set(ce.clientX,ce.clientY),z.state=0}else if(ce.button===z.mouseButtons.ZOOM){if(!1===z.enableZoom)return;z.dollyStart.set(ce.clientX,ce.clientY),z.state=1}else if(ce.button===z.mouseButtons.PAN){if(!1===z.enablePan)return;z.panStart.set(ce.clientX,ce.clientY),z.state=2}-1!==z.state&&(document.addEventListener("mousemove",z.onMouseMove,!1),document.addEventListener("mouseup",z.onMouseUp,!1),z.dispatchEvent(j))}},z.onMouseMove=function(ce){if(!1!==z.enabled)if(ce.preventDefault(),0===z.state){if(!1===z.enableRotate)return;z.rotateEnd.set(ce.clientX,ce.clientY),z.rotateDelta.subVectors(z.rotateEnd,z.rotateStart);var Ce=z.domElement===document?z.domElement.body:z.domElement;z.rotateLeft(2*Math.PI*z.rotateDelta.x/Ce.clientWidth*z.rotateSpeed),z.rotateUp(2*Math.PI*z.rotateDelta.y/Ce.clientHeight*z.rotateSpeed),z.rotateStart.copy(z.rotateEnd),z.update()}else if(1===z.state){if(!1===z.enableZoom)return;z.dollyEnd.set(ce.clientX,ce.clientY),z.dollyDelta.subVectors(z.dollyEnd,z.dollyStart),z.dollyDelta.y>0?z.dollyIn(z.getZoomScale()):z.dollyDelta.y<0&&z.dollyOut(z.getZoomScale()),z.dollyStart.copy(z.dollyEnd),z.update()}else if(2===z.state){if(!1===z.enablePan)return;z.panEnd.set(ce.clientX,ce.clientY),z.panDelta.subVectors(z.panEnd,z.panStart),z.pan(z.panDelta.x,z.panDelta.y),z.panStart.copy(z.panEnd),z.update()}},z.onMouseUp=function(ce){!1!==z.enabled&&(document.removeEventListener("mousemove",z.onMouseMove,!1),document.removeEventListener("mouseup",z.onMouseUp,!1),z.dispatchEvent(D),z.state=-1)},z.onMouseWheel=function(ce){!1===z.enabled||!1===z.enableZoom||-1!==z.state&&0!==z.state||(ce.preventDefault(),ce.stopPropagation(),ce.deltaY<0?z.dollyOut(z.getZoomScale()):ce.deltaY>0&&z.dollyIn(z.getZoomScale()),z.update(),z.dispatchEvent(j),z.dispatchEvent(D))},z.onKeyDown=function(ce){if(!1!==z.enabled&&!1!==z.enableKeys&&!1!==z.enablePan)switch(ce.keyCode){case z.keys.UP:z.pan(0,z.keyPanSpeed),z.update();break;case z.keys.BOTTOM:z.pan(0,-z.keyPanSpeed),z.update();break;case z.keys.LEFT:z.pan(z.keyPanSpeed,0),z.update();break;case z.keys.RIGHT:z.pan(-z.keyPanSpeed,0),z.update()}},z.onTouchStart=function(ce){if(!1!==z.enabled){switch(ce.touches.length){case 1:if(!1===z.enableRotate)return;z.rotateStart.set(ce.touches[0].pageX,ce.touches[0].pageY),z.state=3;break;case 2:if(!1===z.enableZoom)return;var Ce=ce.touches[0].pageX-ce.touches[1].pageX,Re=ce.touches[0].pageY-ce.touches[1].pageY,ie=Math.sqrt(Ce*Ce+Re*Re);z.dollyStart.set(0,ie),z.state=4;break;case 3:if(!1===z.enablePan)return;z.panStart.set(ce.touches[0].pageX,ce.touches[0].pageY),z.state=5;break;default:z.state=-1}-1!==z.state&&z.dispatchEvent(j)}},z.onTouchMove=function(ce){if(!1!==z.enabled)switch(ce.preventDefault(),ce.stopPropagation(),ce.touches.length){case 1:if(!1===z.enableRotate||3!==z.state)return;z.rotateEnd.set(ce.touches[0].pageX,ce.touches[0].pageY),z.rotateDelta.subVectors(z.rotateEnd,z.rotateStart);var Ce=z.domElement===document?z.domElement.body:z.domElement;z.rotateLeft(2*Math.PI*z.rotateDelta.x/Ce.clientWidth*z.rotateSpeed),z.rotateUp(2*Math.PI*z.rotateDelta.y/Ce.clientHeight*z.rotateSpeed),z.rotateStart.copy(z.rotateEnd),z.update();break;case 2:if(!1===z.enableZoom||4!==z.state)return;var Re=ce.touches[0].pageX-ce.touches[1].pageX,ie=ce.touches[0].pageY-ce.touches[1].pageY,oe=Math.sqrt(Re*Re+ie*ie);z.dollyEnd.set(0,oe),z.dollyDelta.subVectors(z.dollyEnd,z.dollyStart),z.dollyDelta.y>0?z.dollyOut(z.getZoomScale()):z.dollyDelta.y<0&&z.dollyIn(z.getZoomScale()),z.dollyStart.copy(z.dollyEnd),z.update();break;case 3:if(!1===z.enablePan||5!==z.state)return;z.panEnd.set(ce.touches[0].pageX,ce.touches[0].pageY),z.panDelta.subVectors(z.panEnd,z.panStart),z.pan(z.panDelta.x,z.panDelta.y),z.panStart.copy(z.panEnd),z.update();break;default:z.state=-1}},z.onTouchEnd=function(ce){!1!==z.enabled&&(z.dispatchEvent(D),z.state=-1)},z.onContextMenu=function(ce){ce.preventDefault()},z.domElement.addEventListener("contextmenu",z.onContextMenu,!1),z.domElement.addEventListener("mousedown",z.onMouseDown,!1),z.domElement.addEventListener("wheel",z.onMouseWheel,!1),z.domElement.addEventListener("touchstart",z.onTouchStart,!1),z.domElement.addEventListener("touchend",z.onTouchEnd,!1),z.domElement.addEventListener("touchmove",z.onTouchMove,!1),z.window.addEventListener("keydown",z.onKeyDown,!1),z.update(),z}return Y(te,ne),te.prototype.update=function(){var se=this.object.position;return this.updateOffset.copy(se).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&-1===this.state&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),se.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>R||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>R)&&(this.dispatchEvent(U),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},te.prototype.panLeft=function(se,ee){this.panLeftV.setFromMatrixColumn(ee,0),this.panLeftV.multiplyScalar(-se),this.panOffset.add(this.panLeftV)},te.prototype.panUp=function(se,ee){this.panUpV.setFromMatrixColumn(ee,1),this.panUpV.multiplyScalar(se),this.panOffset.add(this.panUpV)},te.prototype.pan=function(se,ee){var K=this.domElement===document?this.domElement.body:this.domElement;if(this.object instanceof L.PerspectiveCamera){this.panInternalOffset.copy(this.object.position).sub(this.target);var ce=this.panInternalOffset.length();ce*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*se*ce/K.clientHeight,this.object.matrix),this.panUp(2*ee*ce/K.clientHeight,this.object.matrix)}else this.object instanceof L.OrthographicCamera?(this.panLeft(se*(this.object.right-this.object.left)/this.object.zoom/K.clientWidth,this.object.matrix),this.panUp(ee*(this.object.top-this.object.bottom)/this.object.zoom/K.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},te.prototype.dollyIn=function(se){this.object instanceof L.PerspectiveCamera?this.scale/=se:this.object instanceof L.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*se)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},te.prototype.dollyOut=function(se){this.object instanceof L.PerspectiveCamera?this.scale*=se:this.object instanceof L.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/se)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},te.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},te.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},te.prototype.rotateLeft=function(se){this.sphericalDelta.theta-=se},te.prototype.rotateUp=function(se){this.sphericalDelta.phi-=se},te.prototype.getPolarAngle=function(){return this.spherical.phi},te.prototype.getAzimuthalAngle=function(){return this.spherical.theta},te.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},te.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(U),this.update(),this.state=-1},Object.defineProperty(te.prototype,"center",{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"noZoom",{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(se){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!se},enumerable:!0,configurable:!0}),te}(L.EventDispatcher);Ae.OrbitControls=q},5237:(Ve,Ae,W)=>{"use strict";function Y(){}W.r(Ae),W.d(Ae,{AddEquation:()=>at,AddOperation:()=>Me,AdditiveBlending:()=>fe,AlphaFormat:()=>Ns,AlwaysDepth:()=>ot,AmbientLight:()=>Jg,AnimationClip:()=>tc,AnimationMixer:()=>cg,AnimationObjectGroup:()=>Gc,AnimationUtils:()=>Hc,ArcCurve:()=>Ep,ArrowHelper:()=>lu,Audio:()=>Bd,AudioAnalyser:()=>Hm,AudioContext:()=>Ip,AudioListener:()=>Um,AudioLoader:()=>ag,AxisHelper:()=>jf,BackSide:()=>z,BasicDepthPacking:()=>Sf,BasicShadowMap:()=>te,BinaryTextureLoader:()=>dc,BlendingMode:()=>Le,Bone:()=>Om,BooleanKeyframeTrack:()=>em,BoundingBoxHelper:()=>Xy,Box2:()=>bh,Box3:()=>Zs,BoxBufferGeometry:()=>cc,BoxGeometry:()=>Zl,BoxHelper:()=>fg,BufferAttribute:()=>Tr,BufferGeometry:()=>Wr,BufferGeometryLoader:()=>Fd,ByteType:()=>En,Cache:()=>Hu,Camera:()=>gl,CameraHelper:()=>om,CanvasRenderer:()=>Ky,CanvasTexture:()=>vp,CatmullRomCurve3:()=>jm,CineonToneMapping:()=>ms,CircleBufferGeometry:()=>ol,CircleGeometry:()=>uc,ClampToEdgeWrapping:()=>Sa,Clock:()=>Wm,ClosedSplineCurve3:()=>Xm,Color:()=>ps,ColorKeyframeTrack:()=>Cp,CompressedTexture:()=>ou,CompressedTextureLoader:()=>Nm,ConeBufferGeometry:()=>og,ConeGeometry:()=>sg,CubeCamera:()=>fc,CubeGeometry:()=>Zl,CubeReflectionMapping:()=>os,CubeRefractionMapping:()=>qs,CubeTexture:()=>Xh,CubeTextureLoader:()=>Bm,CubeUVReflectionMapping:()=>fl,CubeUVRefractionMapping:()=>Er,CubicBezierCurve:()=>hf,CubicBezierCurve3:()=>Gy,CubicInterpolant:()=>ah,CullFaceBack:()=>j,CullFaceFront:()=>D,CullFaceFrontBack:()=>R,CullFaceNone:()=>U,Curve:()=>hc,CurvePath:()=>im,CurveUtils:()=>Sc,CustomBlending:()=>nt,CylinderBufferGeometry:()=>Bf,CylinderGeometry:()=>Ac,Cylindrical:()=>jl,DataTexture:()=>Is,DataTextureLoader:()=>Ic,DefaultLoadingManager:()=>Vc,DepthFormat:()=>dt,DepthStencilFormat:()=>et,DepthTexture:()=>Zg,DirectionalLight:()=>Vf,DirectionalLightHelper:()=>hg,DirectionalLightShadow:()=>zf,DiscreteInterpolant:()=>dd,DodecahedronBufferGeometry:()=>kd,DodecahedronGeometry:()=>ng,DoubleSide:()=>ce,DstAlphaFactor:()=>Ct,DstColorFactor:()=>wn,DynamicBufferAttribute:()=>Bv,EdgesGeometry:()=>Wl,EdgesHelper:()=>Q_,EllipseCurve:()=>Eh,EqualDepth:()=>Hn,EquirectangularReflectionMapping:()=>Zi,EquirectangularRefractionMapping:()=>ra,Euler:()=>to,EventDispatcher:()=>Y,ExtrudeGeometry:()=>Su,Face3:()=>la,Face4:()=>$m,FaceColors:()=>oe,FaceNormalsHelper:()=>uh,FileLoader:()=>Qo,FlatShading:()=>Ce,Float32Attribute:()=>qy,Float32BufferAttribute:()=>Ms,Float64Attribute:()=>Z_,Float64BufferAttribute:()=>iu,FloatType:()=>Ss,Fog:()=>ru,FogExp2:()=>eh,Font:()=>rm,FontLoader:()=>ff,FrontFaceDirectionCCW:()=>ne,FrontFaceDirectionCW:()=>q,FrontSide:()=>K,Frustum:()=>aa,GammaEncoding:()=>Xl,Geometry:()=>Qs,GeometryIdCount:()=>$g,GeometryUtils:()=>lm,GreaterDepth:()=>ht,GreaterEqualDepth:()=>pt,GridHelper:()=>dg,Group:()=>gp,HalfFloatType:()=>xs,HemisphereLight:()=>Uc,HemisphereLightHelper:()=>Ph,IcosahedronBufferGeometry:()=>af,IcosahedronGeometry:()=>yp,ImageLoader:()=>Qg,ImageUtils:()=>Uv,ImmediateRenderObject:()=>Wf,InstancedBufferAttribute:()=>pf,InstancedBufferGeometry:()=>pd,InstancedInterleavedBuffer:()=>zd,Int16Attribute:()=>Ka,Int16BufferAttribute:()=>pp,Int32Attribute:()=>dh,Int32BufferAttribute:()=>Lf,Int8Attribute:()=>$u,Int8BufferAttribute:()=>Qd,IntType:()=>ar,InterleavedBuffer:()=>Mh,InterleavedBufferAttribute:()=>Gf,Interpolant:()=>ec,InterpolateDiscrete:()=>dr,InterpolateLinear:()=>ys,InterpolateSmooth:()=>Bs,JSONLoader:()=>nm,KeyframeTrack:()=>hd,LOD:()=>Ra,LatheBufferGeometry:()=>qo,LatheGeometry:()=>Nf,Layers:()=>Jp,LensFlare:()=>Pd,LessDepth:()=>Je,LessEqualDepth:()=>Sn,Light:()=>So,LightShadow:()=>Od,Line:()=>Vu,Line3:()=>lc,LineBasicMaterial:()=>kl,LineCurve:()=>Nd,LineCurve3:()=>mb,LineDashedMaterial:()=>zc,LinePieces:()=>Nv,LineSegments:()=>$o,LineStrip:()=>$f,LinearEncoding:()=>Qr,LinearFilter:()=>gn,LinearInterpolant:()=>uf,LinearMipMapLinearFilter:()=>qe,LinearMipMapNearestFilter:()=>yn,LinearToneMapping:()=>dn,Loader:()=>Eu,LoadingManager:()=>Jl,LogLuvEncoding:()=>wl,LoopOnce:()=>Dr,LoopPingPong:()=>gr,LoopRepeat:()=>_r,LuminanceAlphaFormat:()=>Fc,LuminanceFormat:()=>zl,MOUSE:()=>G,Material:()=>bo,MaterialLoader:()=>tm,Math:()=>js,Matrix3:()=>Pt,Matrix4:()=>Vs,MaxEquation:()=>mt,Mesh:()=>Ya,MeshBasicMaterial:()=>pl,MeshDepthMaterial:()=>Pi,MeshFaceMaterial:()=>vb,MeshLambertMaterial:()=>_p,MeshNormalMaterial:()=>xc,MeshPhongMaterial:()=>Ql,MeshPhysicalMaterial:()=>ud,MeshStandardMaterial:()=>cd,MeshToonMaterial:()=>al,MinEquation:()=>yt,MirroredRepeatWrapping:()=>Oc,MixOperation:()=>Ie,MorphBlendMesh:()=>Oa,MultiMaterial:()=>Uu,MultiplyBlending:()=>Pe,MultiplyOperation:()=>We,NearestFilter:()=>Go,NearestMipMapLinearFilter:()=>fn,NearestMipMapNearestFilter:()=>Rt,NeverDepth:()=>le,NoBlending:()=>V,NoColors:()=>ie,NoToneMapping:()=>Et,NormalBlending:()=>J,NotEqualDepth:()=>Ht,NumberKeyframeTrack:()=>Wu,Object3D:()=>Or,ObjectLoader:()=>wp,OctahedronBufferGeometry:()=>Iu,OctahedronGeometry:()=>Ah,OneFactor:()=>Fn,OneMinusDstAlphaFactor:()=>cn,OneMinusDstColorFactor:()=>An,OneMinusSrcAlphaFactor:()=>Ze,OneMinusSrcColorFactor:()=>Pn,OrthographicCamera:()=>Jh,PCFShadowMap:()=>se,PCFSoftShadowMap:()=>ee,ParametricBufferGeometry:()=>rf,ParametricGeometry:()=>sf,Particle:()=>jy,ParticleBasicMaterial:()=>Y_,ParticleSystem:()=>q_,ParticleSystemMaterial:()=>$y,Path:()=>Ds,PerspectiveCamera:()=>Kl,Plane:()=>bt,PlaneBufferGeometry:()=>Pa,PlaneGeometry:()=>Fm,PointCloud:()=>Wy,PointCloudMaterial:()=>X_,PointLight:()=>Gu,PointLightHelper:()=>Lh,Points:()=>po,PointsMaterial:()=>su,PolarGridHelper:()=>gd,PolyhedronBufferGeometry:()=>wc,PolyhedronGeometry:()=>pa,PositionalAudio:()=>lg,Projector:()=>Yy,PropertyBinding:()=>cl,PropertyMixer:()=>au,QuadraticBezierCurve:()=>Th,QuadraticBezierCurve3:()=>am,Quaternion:()=>oc,QuaternionKeyframeTrack:()=>df,QuaternionLinearInterpolant:()=>Ba,REVISION:()=>L,RGBADepthPacking:()=>qh,RGBAFormat:()=>sa,RGBA_PVRTC_2BPPV1_Format:()=>mi,RGBA_PVRTC_4BPPV1_Format:()=>vi,RGBA_S3TC_DXT1_Format:()=>Te,RGBA_S3TC_DXT3_Format:()=>Qe,RGBA_S3TC_DXT5_Format:()=>Mt,RGBDEncoding:()=>id,RGBEEncoding:()=>Ei,RGBEFormat:()=>je,RGBFormat:()=>ya,RGBM16Encoding:()=>wo,RGBM7Encoding:()=>zs,RGB_ETC1_Format:()=>xi,RGB_PVRTC_2BPPV1_Format:()=>xn,RGB_PVRTC_4BPPV1_Format:()=>Xt,RGB_S3TC_DXT1_Format:()=>pe,RawShaderMaterial:()=>vl,Ray:()=>La,Raycaster:()=>Tu,RectAreaLight:()=>ll,RectAreaLightHelper:()=>gf,ReinhardToneMapping:()=>Xn,RepeatWrapping:()=>kc,ReverseSubtractEquation:()=>Ge,RingBufferGeometry:()=>so,RingGeometry:()=>vr,Scene:()=>th,SceneUtils:()=>Fl,ShaderChunk:()=>go,ShaderLib:()=>nu,ShaderMaterial:()=>xu,ShadowMaterial:()=>cf,Shape:()=>fd,ShapeBufferGeometry:()=>ig,ShapeGeometry:()=>rg,ShapePath:()=>xp,ShapeUtils:()=>sl,ShortType:()=>Nn,Skeleton:()=>wh,SkeletonHelper:()=>ch,SkinnedMesh:()=>Kg,SmoothShading:()=>Re,Sphere:()=>Lt,SphereBufferGeometry:()=>ka,SphereGeometry:()=>ga,Spherical:()=>sm,SphericalReflectionMapping:()=>Ha,Spline:()=>$_,SplineCurve:()=>ju,SplineCurve3:()=>Hy,SpotLight:()=>oh,SpotLightHelper:()=>lh,SpotLightShadow:()=>bp,Sprite:()=>zu,SpriteMaterial:()=>od,SrcAlphaFactor:()=>nn,SrcAlphaSaturateFactor:()=>$e,SrcColorFactor:()=>Ot,StereoCamera:()=>Vm,StringKeyframeTrack:()=>zm,SubtractEquation:()=>It,SubtractiveBlending:()=>ke,TetrahedronBufferGeometry:()=>Ol,TetrahedronGeometry:()=>nh,TextGeometry:()=>Ih,Texture:()=>_a,TextureFilter:()=>kt,TextureLoader:()=>sh,TextureMapping:()=>xd,TextureWrapping:()=>Ja,TorusBufferGeometry:()=>ad,TorusGeometry:()=>rh,TorusKnotBufferGeometry:()=>Il,TorusKnotGeometry:()=>xh,Triangle:()=>Xa,TriangleFanDrawMode:()=>Zr,TriangleStripDrawMode:()=>Vl,TrianglesDrawMode:()=>Io,TubeBufferGeometry:()=>lf,TubeGeometry:()=>ih,UVMapping:()=>Hs,Uint16Attribute:()=>zv,Uint16BufferAttribute:()=>Qh,Uint32Attribute:()=>Vv,Uint32BufferAttribute:()=>sd,Uint8Attribute:()=>K_,Uint8BufferAttribute:()=>Hl,Uint8ClampedAttribute:()=>za,Uint8ClampedBufferAttribute:()=>Zh,Uncharted2ToneMapping:()=>Jn,Uniform:()=>Gm,UniformsLib:()=>Ps,UniformsUtils:()=>Dl,UnsignedByteType:()=>on,UnsignedInt248Type:()=>Ga,UnsignedIntType:()=>qr,UnsignedShort4444Type:()=>xo,UnsignedShort5551Type:()=>lo,UnsignedShort565Type:()=>Kr,UnsignedShortType:()=>hi,Vector2:()=>hr,Vector3:()=>an,Vector4:()=>ba,VectorKeyframeTrack:()=>Uf,Vertex:()=>qm,VertexColors:()=>N,VertexNormalsHelper:()=>ug,VideoTexture:()=>mp,WebGLRenderTarget:()=>Zc,WebGLRenderTargetCube:()=>yh,WebGLRenderer:()=>nf,WireframeGeometry:()=>Rd,WireframeHelper:()=>yb,WrapAroundEnding:()=>hs,XHRLoader:()=>mf,ZeroCurvatureEnding:()=>Pr,ZeroFactor:()=>_t,ZeroSlopeEnding:()=>_o,sRGBEncoding:()=>el}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(a){return a<0?-1:a>0?1:+a}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(a),g=1;g<arguments.length;g++){var y=arguments[g];if(null!=y)for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(d[x]=y[x])}return d}),Object.assign(Y.prototype,{addEventListener:function(a,d){void 0===this._listeners&&(this._listeners={});var g=this._listeners;void 0===g[a]&&(g[a]=[]),-1===g[a].indexOf(d)&&g[a].push(d)},hasEventListener:function(a,d){if(void 0===this._listeners)return!1;var g=this._listeners;return void 0!==g[a]&&-1!==g[a].indexOf(d)},removeEventListener:function(a,d){if(void 0!==this._listeners){var y=this._listeners[a];if(void 0!==y){var x=y.indexOf(d);-1!==x&&y.splice(x,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var g=this._listeners[a.type];if(void 0!==g){a.target=this;var y=[],x=0,M=g.length;for(x=0;x<M;x++)y[x]=g[x];for(x=0;x<M;x++)y[x].call(this,a)}}}});var y,a,d,g,L="83",G={LEFT:0,MIDDLE:1,RIGHT:2},U=0,j=1,D=2,R=3,q=0,ne=1,te=0,se=1,ee=2,K=0,z=1,ce=2,Ce=1,Re=2,ie=0,oe=1,N=2,V=0,J=1,fe=2,ke=3,Pe=4,nt=5,Le={NoBlending:V,NormalBlending:J,AdditiveBlending:fe,SubtractiveBlending:ke,MultiplyBlending:Pe,CustomBlending:nt},at=100,It=101,Ge=102,yt=103,mt=104,_t=200,Fn=201,Ot=202,Pn=203,nn=204,Ze=205,Ct=206,cn=207,wn=208,An=209,$e=210,le=0,ot=1,Je=2,Sn=3,Hn=4,pt=5,ht=6,Ht=7,We=0,Ie=1,Me=2,Et=0,dn=1,Xn=2,Jn=3,ms=4,Hs=300,os=301,qs=302,Zi=303,ra=304,Ha=305,fl=306,Er=307,xd={UVMapping:Hs,CubeReflectionMapping:os,CubeRefractionMapping:qs,EquirectangularReflectionMapping:Zi,EquirectangularRefractionMapping:ra,SphericalReflectionMapping:Ha,CubeUVReflectionMapping:fl,CubeUVRefractionMapping:Er},kc=1e3,Sa=1001,Oc=1002,Ja={RepeatWrapping:kc,ClampToEdgeWrapping:Sa,MirroredRepeatWrapping:Oc},Go=1003,Rt=1004,fn=1005,gn=1006,yn=1007,qe=1008,kt={NearestFilter:Go,NearestMipMapNearestFilter:Rt,NearestMipMapLinearFilter:fn,LinearFilter:gn,LinearMipMapNearestFilter:yn,LinearMipMapLinearFilter:qe},on=1009,En=1010,Nn=1011,hi=1012,ar=1013,qr=1014,Ss=1015,xs=1016,xo=1017,lo=1018,Kr=1019,Ga=1020,Ns=1021,ya=1022,sa=1023,zl=1024,Fc=1025,je=sa,dt=1026,et=1027,pe=2001,Te=2002,Qe=2003,Mt=2004,Xt=2100,xn=2101,vi=2102,mi=2103,xi=2151,Dr=2200,_r=2201,gr=2202,dr=2300,ys=2301,Bs=2302,Pr=2400,_o=2401,hs=2402,Io=0,Vl=1,Zr=2,Qr=3e3,el=3001,Xl=3007,Ei=3002,wl=3003,zs=3004,wo=3005,id=3006,Sf=3200,qh=3201,js={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),d=new Array(36),g=0,function(){for(var M=0;M<36;M++)8===M||13===M||18===M||23===M?d[M]="-":14===M?d[M]="4":(g<=2&&(g=33554432+16777216*Math.random()|0),y=15&g,g>>=4,d[M]=a[19===M?3&y|8:y]);return d.join("")}),clamp:function(a,d,g){return Math.max(d,Math.min(g,a))},euclideanModulo:function(a,d){return(a%d+d)%d},mapLinear:function(a,d,g,y,x){return y+(a-d)*(x-y)/(g-d)},lerp:function(a,d,g){return(1-g)*a+g*d},smoothstep:function(a,d,g){return a<=d?0:a>=g?1:(a=(a-d)/(g-d))*a*(3-2*a)},smootherstep:function(a,d,g){return a<=d?0:a>=g?1:(a=(a-d)/(g-d))*a*a*(a*(6*a-15)+10)},randInt:function(a,d){return a+Math.floor(Math.random()*(d-a+1))},randFloat:function(a,d){return a+Math.random()*(d-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*js.DEG2RAD},radToDeg:function(a){return a*js.RAD2DEG},isPowerOfTwo:function(a){return 0==(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,++a}};function hr(a,d){this.x=a||0,this.y=d||0}hr.prototype={constructor:hr,isVector2:!0,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,d){return this.x=a,this.y=d,this},setScalar:function(a){return this.x=a,this.y=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setComponent:function(a,d){switch(a){case 0:this.x=d;break;case 1:this.y=d;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,d){return void 0!==d?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,d)):(this.x+=a.x,this.y+=a.y,this)},addScalar:function(a){return this.x+=a,this.y+=a,this},addVectors:function(a,d){return this.x=a.x+d.x,this.y=a.y+d.y,this},addScaledVector:function(a,d){return this.x+=a.x*d,this.y+=a.y*d,this},sub:function(a,d){return void 0!==d?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,d)):(this.x-=a.x,this.y-=a.y,this)},subScalar:function(a){return this.x-=a,this.y-=a,this},subVectors:function(a,d){return this.x=a.x-d.x,this.y=a.y-d.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this},clamp:function(a,d){return this.x=Math.max(a.x,Math.min(d.x,this.x)),this.y=Math.max(a.y,Math.min(d.y,this.y)),this},clampScalar:function(){var a,d;return function(y,x){return void 0===a&&(a=new hr,d=new hr),a.set(y,y),d.set(x,x),this.clamp(a,d)}}(),clampLength:function(a,d){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(d,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var d=this.x-a.x,g=this.y-a.y;return d*d+g*g},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,d){return this.x+=(a.x-this.x)*d,this.y+=(a.y-this.y)*d,this},lerpVectors:function(a,d,g){return this.subVectors(d,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,d){return void 0===d&&(d=0),this.x=a[d],this.y=a[d+1],this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this.x,a[d+1]=this.y,a},fromAttribute:function(a,d,g){return void 0!==g&&console.warn("THREE.Vector2: offset has been removed from .fromAttribute()."),this.x=a.getX(d),this.y=a.getY(d),this},rotateAround:function(a,d){var g=Math.cos(d),y=Math.sin(d),x=this.x-a.x,M=this.y-a.y;return this.x=x*g-M*y+a.x,this.y=x*y+M*g+a.y,this}};var My=0;function _a(a,d,g,y,x,M,O,B,ae,re){Object.defineProperty(this,"id",{value:My++}),this.uuid=js.generateUUID(),this.name="",this.image=void 0!==a?a:_a.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==d?d:_a.DEFAULT_MAPPING,this.wrapS=void 0!==g?g:Sa,this.wrapT=void 0!==y?y:Sa,this.magFilter=void 0!==x?x:gn,this.minFilter=void 0!==M?M:qe,this.anisotropy=void 0!==ae?ae:1,this.format=void 0!==O?O:sa,this.type=void 0!==B?B:on,this.offset=new hr(0,0),this.repeat=new hr(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==re?re:Qr,this.version=0,this.onUpdate=null}function ba(a,d,g,y){this.x=a||0,this.y=d||0,this.z=g||0,this.w=void 0!==y?y:1}function Zc(a,d,g){this.uuid=js.generateUUID(),this.width=a,this.height=d,this.scissor=new ba(0,0,a,d),this.scissorTest=!1,this.viewport=new ba(0,0,a,d),void 0===(g=g||{}).minFilter&&(g.minFilter=gn),this.texture=new _a(void 0,void 0,g.wrapS,g.wrapT,g.magFilter,g.minFilter,g.format,g.type,g.anisotropy,g.encoding),this.depthBuffer=void 0===g.depthBuffer||g.depthBuffer,this.stencilBuffer=void 0===g.stencilBuffer||g.stencilBuffer,this.depthTexture=void 0!==g.depthTexture?g.depthTexture:null}function yh(a,d,g){Zc.call(this,a,d,g),this.activeCubeFace=0,this.activeMipMapLevel=0}function oc(a,d,g,y){this._x=a||0,this._y=d||0,this._z=g||0,this._w=void 0!==y?y:1}function an(a,d,g){this.x=a||0,this.y=d||0,this.z=g||0}function Vs(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Xh(a,d,g,y,x,M,O,B,ae,re){_a.call(this,a=void 0!==a?a:[],d=void 0!==d?d:os,g,y,x,M,O,B,ae,re),this.flipY=!1}_a.DEFAULT_IMAGE=void 0,_a.DEFAULT_MAPPING=Hs,_a.prototype={constructor:_a,isTexture:!0,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var g={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var y=this.image;void 0===y.uuid&&(y.uuid=js.generateUUID()),void 0===a.images[y.uuid]&&(a.images[y.uuid]={uuid:y.uuid,url:function d(x){var M;return void 0!==x.toDataURL?M=x:((M=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=x.width,M.height=x.height,M.getContext("2d").drawImage(x,0,0,x.width,x.height)),M.width>2048||M.height>2048?M.toDataURL("image/jpeg",.6):M.toDataURL("image/png")}(y)}),g.image=y.uuid}return a.textures[this.uuid]=g,g},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping===Hs){if(a.multiply(this.repeat),a.add(this.offset),a.x<0||a.x>1)switch(this.wrapS){case kc:a.x=a.x-Math.floor(a.x);break;case Sa:a.x=a.x<0?0:1;break;case Oc:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case kc:a.y=a.y-Math.floor(a.y);break;case Sa:a.y=a.y<0?0:1;break;case Oc:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}},Object.assign(_a.prototype,Y.prototype),ba.prototype={constructor:ba,isVector4:!0,set:function(a,d,g,y){return this.x=a,this.y=d,this.z=g,this.w=y,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this.w=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setW:function(a){return this.w=a,this},setComponent:function(a,d){switch(a){case 0:this.x=d;break;case 1:this.y=d;break;case 2:this.z=d;break;case 3:this.w=d;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},add:function(a,d){return void 0!==d?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,d)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this},addVectors:function(a,d){return this.x=a.x+d.x,this.y=a.y+d.y,this.z=a.z+d.z,this.w=a.w+d.w,this},addScaledVector:function(a,d){return this.x+=a.x*d,this.y+=a.y*d,this.z+=a.z*d,this.w+=a.w*d,this},sub:function(a,d){return void 0!==d?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,d)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this},subVectors:function(a,d){return this.x=a.x-d.x,this.y=a.y-d.y,this.z=a.z-d.z,this.w=a.w-d.w,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(a){var d=this.x,g=this.y,y=this.z,x=this.w,M=a.elements;return this.x=M[0]*d+M[4]*g+M[8]*y+M[12]*x,this.y=M[1]*d+M[5]*g+M[9]*y+M[13]*x,this.z=M[2]*d+M[6]*g+M[10]*y+M[14]*x,this.w=M[3]*d+M[7]*g+M[11]*y+M[15]*x,this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var d=Math.sqrt(1-a.w*a.w);return d<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/d,this.y=a.y/d,this.z=a.z/d),this},setAxisAngleFromRotationMatrix:function(a){var d,g,y,x,M=.01,O=.1,B=a.elements,ae=B[0],re=B[4],me=B[8],_e=B[1],Oe=B[5],Fe=B[9],Ne=B[2],ut=B[6],ct=B[10];if(Math.abs(re-_e)<M&&Math.abs(me-Ne)<M&&Math.abs(Fe-ut)<M){if(Math.abs(re+_e)<O&&Math.abs(me+Ne)<O&&Math.abs(Fe+ut)<O&&Math.abs(ae+Oe+ct-3)<O)return this.set(1,0,0,0),this;d=Math.PI;var rt=(ae+1)/2,At=(Oe+1)/2,St=(ct+1)/2,tn=(re+_e)/4,$t=(me+Ne)/4,Cn=(Fe+ut)/4;return rt>At&&rt>St?rt<M?(g=0,y=.707106781,x=.707106781):(y=tn/(g=Math.sqrt(rt)),x=$t/g):At>St?At<M?(g=.707106781,y=0,x=.707106781):(g=tn/(y=Math.sqrt(At)),x=Cn/y):St<M?(g=.707106781,y=.707106781,x=0):(g=$t/(x=Math.sqrt(St)),y=Cn/x),this.set(g,y,x,d),this}var pn=Math.sqrt((ut-Fe)*(ut-Fe)+(me-Ne)*(me-Ne)+(_e-re)*(_e-re));return Math.abs(pn)<.001&&(pn=1),this.x=(ut-Fe)/pn,this.y=(me-Ne)/pn,this.z=(_e-re)/pn,this.w=Math.acos((ae+Oe+ct-1)/2),this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this},clamp:function(a,d){return this.x=Math.max(a.x,Math.min(d.x,this.x)),this.y=Math.max(a.y,Math.min(d.y,this.y)),this.z=Math.max(a.z,Math.min(d.z,this.z)),this.w=Math.max(a.w,Math.min(d.w,this.w)),this},clampScalar:function(){var a,d;return function(y,x){return void 0===a&&(a=new ba,d=new ba),a.set(y,y,y,y),d.set(x,x,x,x),this.clamp(a,d)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,d){return this.x+=(a.x-this.x)*d,this.y+=(a.y-this.y)*d,this.z+=(a.z-this.z)*d,this.w+=(a.w-this.w)*d,this},lerpVectors:function(a,d,g){return this.subVectors(d,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,d){return void 0===d&&(d=0),this.x=a[d],this.y=a[d+1],this.z=a[d+2],this.w=a[d+3],this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this.x,a[d+1]=this.y,a[d+2]=this.z,a[d+3]=this.w,a},fromAttribute:function(a,d,g){return void 0!==g&&console.warn("THREE.Vector4: offset has been removed from .fromAttribute()."),this.x=a.getX(d),this.y=a.getY(d),this.z=a.getZ(d),this.w=a.getW(d),this}},Object.assign(Zc.prototype,Y.prototype,{isWebGLRenderTarget:!0,setSize:function(a,d){(this.width!==a||this.height!==d)&&(this.width=a,this.height=d,this.dispose()),this.viewport.set(0,0,a,d),this.scissor.set(0,0,a,d)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.width=a.width,this.height=a.height,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(yh.prototype=Object.create(Zc.prototype)).constructor=yh,yh.prototype.isWebGLRenderTargetCube=!0,oc.prototype={constructor:oc,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a,this.onChangeCallback()},set:function(a,d,g,y){return this._x=a,this._y=d,this._z=g,this._w=y,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this.onChangeCallback(),this},setFromEuler:function(a,d){if(!1===(a&&a.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var g=Math.cos(a._x/2),y=Math.cos(a._y/2),x=Math.cos(a._z/2),M=Math.sin(a._x/2),O=Math.sin(a._y/2),B=Math.sin(a._z/2),ae=a.order;return"XYZ"===ae?(this._x=M*y*x+g*O*B,this._y=g*O*x-M*y*B,this._z=g*y*B+M*O*x,this._w=g*y*x-M*O*B):"YXZ"===ae?(this._x=M*y*x+g*O*B,this._y=g*O*x-M*y*B,this._z=g*y*B-M*O*x,this._w=g*y*x+M*O*B):"ZXY"===ae?(this._x=M*y*x-g*O*B,this._y=g*O*x+M*y*B,this._z=g*y*B+M*O*x,this._w=g*y*x-M*O*B):"ZYX"===ae?(this._x=M*y*x-g*O*B,this._y=g*O*x+M*y*B,this._z=g*y*B-M*O*x,this._w=g*y*x+M*O*B):"YZX"===ae?(this._x=M*y*x+g*O*B,this._y=g*O*x+M*y*B,this._z=g*y*B-M*O*x,this._w=g*y*x-M*O*B):"XZY"===ae&&(this._x=M*y*x-g*O*B,this._y=g*O*x-M*y*B,this._z=g*y*B+M*O*x,this._w=g*y*x+M*O*B),!1!==d&&this.onChangeCallback(),this},setFromAxisAngle:function(a,d){var g=d/2,y=Math.sin(g);return this._x=a.x*y,this._y=a.y*y,this._z=a.z*y,this._w=Math.cos(g),this.onChangeCallback(),this},setFromRotationMatrix:function(a){var Oe,d=a.elements,g=d[0],y=d[4],x=d[8],M=d[1],O=d[5],B=d[9],ae=d[2],re=d[6],me=d[10],_e=g+O+me;return _e>0?(Oe=.5/Math.sqrt(_e+1),this._w=.25/Oe,this._x=(re-B)*Oe,this._y=(x-ae)*Oe,this._z=(M-y)*Oe):g>O&&g>me?(Oe=2*Math.sqrt(1+g-O-me),this._w=(re-B)/Oe,this._x=.25*Oe,this._y=(y+M)/Oe,this._z=(x+ae)/Oe):O>me?(Oe=2*Math.sqrt(1+O-g-me),this._w=(x-ae)/Oe,this._x=(y+M)/Oe,this._y=.25*Oe,this._z=(B+re)/Oe):(Oe=2*Math.sqrt(1+me-g-O),this._w=(M-y)/Oe,this._x=(x+ae)/Oe,this._y=(B+re)/Oe,this._z=.25*Oe),this.onChangeCallback(),this},setFromUnitVectors:function(){var a,d;return function(x,M){return void 0===a&&(a=new an),(d=x.dot(M)+1)<1e-6?(d=0,Math.abs(x.x)>Math.abs(x.z)?a.set(-x.y,x.x,0):a.set(0,-x.z,x.y)):a.crossVectors(x,M),this._x=a.x,this._y=a.y,this._z=a.z,this._w=d,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(a=1/a),this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this.onChangeCallback(),this},multiply:function(a,d){return void 0!==d?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,d)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,d){var g=a._x,y=a._y,x=a._z,M=a._w,O=d._x,B=d._y,ae=d._z,re=d._w;return this._x=g*re+M*O+y*ae-x*B,this._y=y*re+M*B+x*O-g*ae,this._z=x*re+M*ae+g*B-y*O,this._w=M*re-g*O-y*B-x*ae,this.onChangeCallback(),this},slerp:function(a,d){if(0===d)return this;if(1===d)return this.copy(a);var g=this._x,y=this._y,x=this._z,M=this._w,O=M*a._w+g*a._x+y*a._y+x*a._z;if(O<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,O=-O):this.copy(a),O>=1)return this._w=M,this._x=g,this._y=y,this._z=x,this;var B=Math.sqrt(1-O*O);if(Math.abs(B)<.001)return this._w=.5*(M+this._w),this._x=.5*(g+this._x),this._y=.5*(y+this._y),this._z=.5*(x+this._z),this;var ae=Math.atan2(B,O),re=Math.sin((1-d)*ae)/B,me=Math.sin(d*ae)/B;return this._w=M*re+this._w*me,this._x=g*re+this._x*me,this._y=y*re+this._y*me,this._z=x*re+this._z*me,this.onChangeCallback(),this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,d){return void 0===d&&(d=0),this._x=a[d],this._y=a[d+1],this._z=a[d+2],this._w=a[d+3],this.onChangeCallback(),this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this._x,a[d+1]=this._y,a[d+2]=this._z,a[d+3]=this._w,a},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},Object.assign(oc,{slerp:function(a,d,g,y){return g.copy(a).slerp(d,y)},slerpFlat:function(a,d,g,y,x,M,O){var B=g[y+0],ae=g[y+1],re=g[y+2],me=g[y+3],_e=x[M+0],Oe=x[M+1],Fe=x[M+2],Ne=x[M+3];if(me!==Ne||B!==_e||ae!==Oe||re!==Fe){var ut=1-O,ct=B*_e+ae*Oe+re*Fe+me*Ne,rt=ct>=0?1:-1,At=1-ct*ct;if(At>Number.EPSILON){var St=Math.sqrt(At),tn=Math.atan2(St,ct*rt);ut=Math.sin(ut*tn)/St,O=Math.sin(O*tn)/St}var $t=O*rt;if(B=B*ut+_e*$t,ae=ae*ut+Oe*$t,re=re*ut+Fe*$t,me=me*ut+Ne*$t,ut===1-O){var Cn=1/Math.sqrt(B*B+ae*ae+re*re+me*me);B*=Cn,ae*=Cn,re*=Cn,me*=Cn}}a[d]=B,a[d+1]=ae,a[d+2]=re,a[d+3]=me}}),an.prototype={constructor:an,isVector3:!0,set:function(a,d,g){return this.x=a,this.y=d,this.z=g,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setComponent:function(a,d){switch(a){case 0:this.x=d;break;case 1:this.y=d;break;case 2:this.z=d;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,d){return void 0!==d?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,d)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addVectors:function(a,d){return this.x=a.x+d.x,this.y=a.y+d.y,this.z=a.z+d.z,this},addScaledVector:function(a,d){return this.x+=a.x*d,this.y+=a.y*d,this.z+=a.z*d,this},sub:function(a,d){return void 0!==d?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,d)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this},subVectors:function(a,d){return this.x=a.x-d.x,this.y=a.y-d.y,this.z=a.z-d.z,this},multiply:function(a,d){return void 0!==d?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,d)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(a,d){return this.x=a.x*d.x,this.y=a.y*d.y,this.z=a.z*d.z,this},applyEuler:function(){var a;return function(g){return!1===(g&&g.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===a&&(a=new oc),this.applyQuaternion(a.setFromEuler(g))}}(),applyAxisAngle:function(){var a;return function(g,y){return void 0===a&&(a=new oc),this.applyQuaternion(a.setFromAxisAngle(g,y))}}(),applyMatrix3:function(a){var d=this.x,g=this.y,y=this.z,x=a.elements;return this.x=x[0]*d+x[3]*g+x[6]*y,this.y=x[1]*d+x[4]*g+x[7]*y,this.z=x[2]*d+x[5]*g+x[8]*y,this},applyMatrix4:function(a){var d=this.x,g=this.y,y=this.z,x=a.elements;return this.x=x[0]*d+x[4]*g+x[8]*y+x[12],this.y=x[1]*d+x[5]*g+x[9]*y+x[13],this.z=x[2]*d+x[6]*g+x[10]*y+x[14],this},applyProjection:function(a){var d=this.x,g=this.y,y=this.z,x=a.elements,M=1/(x[3]*d+x[7]*g+x[11]*y+x[15]);return this.x=(x[0]*d+x[4]*g+x[8]*y+x[12])*M,this.y=(x[1]*d+x[5]*g+x[9]*y+x[13])*M,this.z=(x[2]*d+x[6]*g+x[10]*y+x[14])*M,this},applyQuaternion:function(a){var d=this.x,g=this.y,y=this.z,x=a.x,M=a.y,O=a.z,B=a.w,ae=B*d+M*y-O*g,re=B*g+O*d-x*y,me=B*y+x*g-M*d,_e=-x*d-M*g-O*y;return this.x=ae*B+_e*-x+re*-O-me*-M,this.y=re*B+_e*-M+me*-x-ae*-O,this.z=me*B+_e*-O+ae*-M-re*-x,this},project:function(){var a;return function(g){return void 0===a&&(a=new Vs),a.multiplyMatrices(g.projectionMatrix,a.getInverse(g.matrixWorld)),this.applyProjection(a)}}(),unproject:function(){var a;return function(g){return void 0===a&&(a=new Vs),a.multiplyMatrices(g.matrixWorld,a.getInverse(g.projectionMatrix)),this.applyProjection(a)}}(),transformDirection:function(a){var d=this.x,g=this.y,y=this.z,x=a.elements;return this.x=x[0]*d+x[4]*g+x[8]*y,this.y=x[1]*d+x[5]*g+x[9]*y,this.z=x[2]*d+x[6]*g+x[10]*y,this.normalize()},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clamp:function(a,d){return this.x=Math.max(a.x,Math.min(d.x,this.x)),this.y=Math.max(a.y,Math.min(d.y,this.y)),this.z=Math.max(a.z,Math.min(d.z,this.z)),this},clampScalar:function(){var a,d;return function(y,x){return void 0===a&&(a=new an,d=new an),a.set(y,y,y),d.set(x,x,x),this.clamp(a,d)}}(),clampLength:function(a,d){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(d,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,d){return this.x+=(a.x-this.x)*d,this.y+=(a.y-this.y)*d,this.z+=(a.z-this.z)*d,this},lerpVectors:function(a,d,g){return this.subVectors(d,a).multiplyScalar(g).add(a)},cross:function(a,d){if(void 0!==d)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,d);var g=this.x,y=this.y,x=this.z;return this.x=y*a.z-x*a.y,this.y=x*a.x-g*a.z,this.z=g*a.y-y*a.x,this},crossVectors:function(a,d){var g=a.x,y=a.y,x=a.z,M=d.x,O=d.y,B=d.z;return this.x=y*B-x*O,this.y=x*M-g*B,this.z=g*O-y*M,this},projectOnVector:function(a){var d=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(d)},projectOnPlane:function(){var a;return function(g){return void 0===a&&(a=new an),a.copy(this).projectOnVector(g),this.sub(a)}}(),reflect:function(){var a;return function(g){return void 0===a&&(a=new an),this.sub(a.copy(g).multiplyScalar(2*this.dot(g)))}}(),angleTo:function(a){var d=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(js.clamp(d,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var d=this.x-a.x,g=this.y-a.y,y=this.z-a.z;return d*d+g*g+y*y},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var d=Math.sin(a.phi)*a.radius;return this.x=d*Math.sin(a.theta),this.y=Math.cos(a.phi)*a.radius,this.z=d*Math.cos(a.theta),this},setFromCylindrical:function(a){return this.x=a.radius*Math.sin(a.theta),this.y=a.y,this.z=a.radius*Math.cos(a.theta),this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},setFromMatrixScale:function(a){var d=this.setFromMatrixColumn(a,0).length(),g=this.setFromMatrixColumn(a,1).length(),y=this.setFromMatrixColumn(a,2).length();return this.x=d,this.y=g,this.z=y,this},setFromMatrixColumn:function(a,d){if("number"==typeof a){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var g=a;a=d,d=g}return this.fromArray(a.elements,4*d)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,d){return void 0===d&&(d=0),this.x=a[d],this.y=a[d+1],this.z=a[d+2],this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this.x,a[d+1]=this.y,a[d+2]=this.z,a},fromAttribute:function(a,d,g){return void 0!==g&&console.warn("THREE.Vector3: offset has been removed from .fromAttribute()."),this.x=a.getX(d),this.y=a.getY(d),this.z=a.getZ(d),this}},Vs.prototype={constructor:Vs,isMatrix4:!0,set:function(a,d,g,y,x,M,O,B,ae,re,me,_e,Oe,Fe,Ne,ut){var ct=this.elements;return ct[0]=a,ct[4]=d,ct[8]=g,ct[12]=y,ct[1]=x,ct[5]=M,ct[9]=O,ct[13]=B,ct[2]=ae,ct[6]=re,ct[10]=me,ct[14]=_e,ct[3]=Oe,ct[7]=Fe,ct[11]=Ne,ct[15]=ut,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Vs).fromArray(this.elements)},copy:function(a){return this.elements.set(a.elements),this},copyPosition:function(a){var d=this.elements,g=a.elements;return d[12]=g[12],d[13]=g[13],d[14]=g[14],this},extractBasis:function(a,d,g){return a.setFromMatrixColumn(this,0),d.setFromMatrixColumn(this,1),g.setFromMatrixColumn(this,2),this},makeBasis:function(a,d,g){return this.set(a.x,d.x,g.x,0,a.y,d.y,g.y,0,a.z,d.z,g.z,0,0,0,0,1),this},extractRotation:function(){var a;return function(g){void 0===a&&(a=new an);var y=this.elements,x=g.elements,M=1/a.setFromMatrixColumn(g,0).length(),O=1/a.setFromMatrixColumn(g,1).length(),B=1/a.setFromMatrixColumn(g,2).length();return y[0]=x[0]*M,y[1]=x[1]*M,y[2]=x[2]*M,y[4]=x[4]*O,y[5]=x[5]*O,y[6]=x[6]*O,y[8]=x[8]*B,y[9]=x[9]*B,y[10]=x[10]*B,this}}(),makeRotationFromEuler:function(a){!1===(a&&a.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var d=this.elements,g=a.x,y=a.y,x=a.z,M=Math.cos(g),O=Math.sin(g),B=Math.cos(y),ae=Math.sin(y),re=Math.cos(x),me=Math.sin(x);if("XYZ"===a.order){var _e=M*re,Oe=M*me,Fe=O*re,Ne=O*me;d[0]=B*re,d[4]=-B*me,d[8]=ae,d[1]=Oe+Fe*ae,d[5]=_e-Ne*ae,d[9]=-O*B,d[2]=Ne-_e*ae,d[6]=Fe+Oe*ae,d[10]=M*B}else if("YXZ"===a.order){var ct=B*me,rt=ae*re;d[0]=(ut=B*re)+(At=ae*me)*O,d[4]=rt*O-ct,d[8]=M*ae,d[1]=M*me,d[5]=M*re,d[9]=-O,d[2]=ct*O-rt,d[6]=At+ut*O,d[10]=M*B}else if("ZXY"===a.order){var ut,At;ct=B*me,rt=ae*re,d[0]=(ut=B*re)-(At=ae*me)*O,d[4]=-M*me,d[8]=rt+ct*O,d[1]=ct+rt*O,d[5]=M*re,d[9]=At-ut*O,d[2]=-M*ae,d[6]=O,d[10]=M*B}else if("ZYX"===a.order)_e=M*re,Oe=M*me,Fe=O*re,Ne=O*me,d[0]=B*re,d[4]=Fe*ae-Oe,d[8]=_e*ae+Ne,d[1]=B*me,d[5]=Ne*ae+_e,d[9]=Oe*ae-Fe,d[2]=-ae,d[6]=O*B,d[10]=M*B;else if("YZX"===a.order){var St=M*B,tn=M*ae,$t=O*B,Cn=O*ae;d[0]=B*re,d[4]=Cn-St*me,d[8]=$t*me+tn,d[1]=me,d[5]=M*re,d[9]=-O*re,d[2]=-ae*re,d[6]=tn*me+$t,d[10]=St-Cn*me}else"XZY"===a.order&&(St=M*B,tn=M*ae,$t=O*B,Cn=O*ae,d[0]=B*re,d[4]=-me,d[8]=ae*re,d[1]=St*me+Cn,d[5]=M*re,d[9]=tn*me-$t,d[2]=$t*me-tn,d[6]=O*re,d[10]=Cn*me+St);return d[3]=0,d[7]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,this},makeRotationFromQuaternion:function(a){var d=this.elements,g=a.x,y=a.y,x=a.z,M=a.w,O=g+g,B=y+y,ae=x+x,re=g*O,me=g*B,_e=g*ae,Oe=y*B,Fe=y*ae,Ne=x*ae,ut=M*O,ct=M*B,rt=M*ae;return d[0]=1-(Oe+Ne),d[4]=me-rt,d[8]=_e+ct,d[1]=me+rt,d[5]=1-(re+Ne),d[9]=Fe-ut,d[2]=_e-ct,d[6]=Fe+ut,d[10]=1-(re+Oe),d[3]=0,d[7]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,this},lookAt:function(){var a,d,g;return function(x,M,O){void 0===a&&(a=new an,d=new an,g=new an);var B=this.elements;return g.subVectors(x,M).normalize(),0===g.lengthSq()&&(g.z=1),a.crossVectors(O,g).normalize(),0===a.lengthSq()&&(g.z+=1e-4,a.crossVectors(O,g).normalize()),d.crossVectors(g,a),B[0]=a.x,B[4]=d.x,B[8]=g.x,B[1]=a.y,B[5]=d.y,B[9]=g.y,B[2]=a.z,B[6]=d.z,B[10]=g.z,this}}(),multiply:function(a,d){return void 0!==d?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,d)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,d){var g=a.elements,y=d.elements,x=this.elements,M=g[0],O=g[4],B=g[8],ae=g[12],re=g[1],me=g[5],_e=g[9],Oe=g[13],Fe=g[2],Ne=g[6],ut=g[10],ct=g[14],rt=g[3],At=g[7],St=g[11],tn=g[15],$t=y[0],Cn=y[4],pn=y[8],ln=y[12],In=y[1],$n=y[5],zi=y[9],Ii=y[13],Qt=y[2],en=y[6],si=y[10],gi=y[14],Vi=y[3],ki=y[7],Ti=y[11],Cr=y[15];return x[0]=M*$t+O*In+B*Qt+ae*Vi,x[4]=M*Cn+O*$n+B*en+ae*ki,x[8]=M*pn+O*zi+B*si+ae*Ti,x[12]=M*ln+O*Ii+B*gi+ae*Cr,x[1]=re*$t+me*In+_e*Qt+Oe*Vi,x[5]=re*Cn+me*$n+_e*en+Oe*ki,x[9]=re*pn+me*zi+_e*si+Oe*Ti,x[13]=re*ln+me*Ii+_e*gi+Oe*Cr,x[2]=Fe*$t+Ne*In+ut*Qt+ct*Vi,x[6]=Fe*Cn+Ne*$n+ut*en+ct*ki,x[10]=Fe*pn+Ne*zi+ut*si+ct*Ti,x[14]=Fe*ln+Ne*Ii+ut*gi+ct*Cr,x[3]=rt*$t+At*In+St*Qt+tn*Vi,x[7]=rt*Cn+At*$n+St*en+tn*ki,x[11]=rt*pn+At*zi+St*si+tn*Ti,x[15]=rt*ln+At*Ii+St*gi+tn*Cr,this},multiplyToArray:function(a,d,g){var y=this.elements;return this.multiplyMatrices(a,d),g[0]=y[0],g[1]=y[1],g[2]=y[2],g[3]=y[3],g[4]=y[4],g[5]=y[5],g[6]=y[6],g[7]=y[7],g[8]=y[8],g[9]=y[9],g[10]=y[10],g[11]=y[11],g[12]=y[12],g[13]=y[13],g[14]=y[14],g[15]=y[15],this},multiplyScalar:function(a){var d=this.elements;return d[0]*=a,d[4]*=a,d[8]*=a,d[12]*=a,d[1]*=a,d[5]*=a,d[9]*=a,d[13]*=a,d[2]*=a,d[6]*=a,d[10]*=a,d[14]*=a,d[3]*=a,d[7]*=a,d[11]*=a,d[15]*=a,this},applyToVector3Array:function(){var a;return function(g,y,x){void 0===a&&(a=new an),void 0===y&&(y=0),void 0===x&&(x=g.length);for(var M=0,O=y;M<x;M+=3,O+=3)a.fromArray(g,O),a.applyMatrix4(this),a.toArray(g,O);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new an);for(var y=0,x=g.count;y<x;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix4(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),determinant:function(){var a=this.elements,d=a[0],g=a[4],y=a[8],x=a[12],M=a[1],O=a[5],B=a[9],ae=a[13],re=a[2],me=a[6],_e=a[10],Oe=a[14];return a[3]*(+x*B*me-y*ae*me-x*O*_e+g*ae*_e+y*O*Oe-g*B*Oe)+a[7]*(+d*B*Oe-d*ae*_e+x*M*_e-y*M*Oe+y*ae*re-x*B*re)+a[11]*(+d*ae*me-d*O*Oe-x*M*me+g*M*Oe+x*O*re-g*ae*re)+a[15]*(-y*O*re-d*B*me+d*O*_e+y*M*me-g*M*_e+g*B*re)},transpose:function(){var d,a=this.elements;return d=a[1],a[1]=a[4],a[4]=d,d=a[2],a[2]=a[8],a[8]=d,d=a[6],a[6]=a[9],a[9]=d,d=a[3],a[3]=a[12],a[12]=d,d=a[7],a[7]=a[13],a[13]=d,d=a[11],a[11]=a[14],a[14]=d,this},setPosition:function(a){var d=this.elements;return d[12]=a.x,d[13]=a.y,d[14]=a.z,this},getInverse:function(a,d){var g=this.elements,y=a.elements,x=y[0],M=y[1],O=y[2],B=y[3],ae=y[4],re=y[5],me=y[6],_e=y[7],Oe=y[8],Fe=y[9],Ne=y[10],ut=y[11],ct=y[12],rt=y[13],At=y[14],St=y[15],tn=Fe*At*_e-rt*Ne*_e+rt*me*ut-re*At*ut-Fe*me*St+re*Ne*St,$t=ct*Ne*_e-Oe*At*_e-ct*me*ut+ae*At*ut+Oe*me*St-ae*Ne*St,Cn=Oe*rt*_e-ct*Fe*_e+ct*re*ut-ae*rt*ut-Oe*re*St+ae*Fe*St,pn=ct*Fe*me-Oe*rt*me-ct*re*Ne+ae*rt*Ne+Oe*re*At-ae*Fe*At,ln=x*tn+M*$t+O*Cn+B*pn;if(0===ln){var In="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===d)throw new Error(In);return console.warn(In),this.identity()}var $n=1/ln;return g[0]=tn*$n,g[1]=(rt*Ne*B-Fe*At*B-rt*O*ut+M*At*ut+Fe*O*St-M*Ne*St)*$n,g[2]=(re*At*B-rt*me*B+rt*O*_e-M*At*_e-re*O*St+M*me*St)*$n,g[3]=(Fe*me*B-re*Ne*B-Fe*O*_e+M*Ne*_e+re*O*ut-M*me*ut)*$n,g[4]=$t*$n,g[5]=(Oe*At*B-ct*Ne*B+ct*O*ut-x*At*ut-Oe*O*St+x*Ne*St)*$n,g[6]=(ct*me*B-ae*At*B-ct*O*_e+x*At*_e+ae*O*St-x*me*St)*$n,g[7]=(ae*Ne*B-Oe*me*B+Oe*O*_e-x*Ne*_e-ae*O*ut+x*me*ut)*$n,g[8]=Cn*$n,g[9]=(ct*Fe*B-Oe*rt*B-ct*M*ut+x*rt*ut+Oe*M*St-x*Fe*St)*$n,g[10]=(ae*rt*B-ct*re*B+ct*M*_e-x*rt*_e-ae*M*St+x*re*St)*$n,g[11]=(Oe*re*B-ae*Fe*B-Oe*M*_e+x*Fe*_e+ae*M*ut-x*re*ut)*$n,g[12]=pn*$n,g[13]=(Oe*rt*O-ct*Fe*O+ct*M*Ne-x*rt*Ne-Oe*M*At+x*Fe*At)*$n,g[14]=(ct*re*O-ae*rt*O-ct*M*me+x*rt*me+ae*M*At-x*re*At)*$n,g[15]=(ae*Fe*O-Oe*re*O+Oe*M*me-x*Fe*me-ae*M*Ne+x*re*Ne)*$n,this},scale:function(a){var d=this.elements,g=a.x,y=a.y,x=a.z;return d[0]*=g,d[4]*=y,d[8]*=x,d[1]*=g,d[5]*=y,d[9]*=x,d[2]*=g,d[6]*=y,d[10]*=x,d[3]*=g,d[7]*=y,d[11]*=x,this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,d,g){return this.set(1,0,0,a,0,1,0,d,0,0,1,g,0,0,0,1),this},makeRotationX:function(a){var d=Math.cos(a),g=Math.sin(a);return this.set(1,0,0,0,0,d,-g,0,0,g,d,0,0,0,0,1),this},makeRotationY:function(a){var d=Math.cos(a),g=Math.sin(a);return this.set(d,0,g,0,0,1,0,0,-g,0,d,0,0,0,0,1),this},makeRotationZ:function(a){var d=Math.cos(a),g=Math.sin(a);return this.set(d,-g,0,0,g,d,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,d){var g=Math.cos(d),y=Math.sin(d),x=1-g,M=a.x,O=a.y,B=a.z,ae=x*M,re=x*O;return this.set(ae*M+g,ae*O-y*B,ae*B+y*O,0,ae*O+y*B,re*O+g,re*B-y*M,0,ae*B-y*O,re*B+y*M,x*B*B+g,0,0,0,0,1),this},makeScale:function(a,d,g){return this.set(a,0,0,0,0,d,0,0,0,0,g,0,0,0,0,1),this},makeShear:function(a,d,g){return this.set(1,d,g,0,a,1,g,0,a,d,1,0,0,0,0,1),this},compose:function(a,d,g){return this.makeRotationFromQuaternion(d),this.scale(g),this.setPosition(a),this},decompose:function(){var a,d;return function(y,x,M){void 0===a&&(a=new an,d=new Vs);var O=this.elements,B=a.set(O[0],O[1],O[2]).length(),ae=a.set(O[4],O[5],O[6]).length(),re=a.set(O[8],O[9],O[10]).length();this.determinant()<0&&(B=-B),y.x=O[12],y.y=O[13],y.z=O[14],d.elements.set(this.elements);var _e=1/B,Oe=1/ae,Fe=1/re;return d.elements[0]*=_e,d.elements[1]*=_e,d.elements[2]*=_e,d.elements[4]*=Oe,d.elements[5]*=Oe,d.elements[6]*=Oe,d.elements[8]*=Fe,d.elements[9]*=Fe,d.elements[10]*=Fe,x.setFromRotationMatrix(d),M.x=B,M.y=ae,M.z=re,this}}(),makeFrustum:function(a,d,g,y,x,M){var O=this.elements,ae=2*x/(y-g),re=(d+a)/(d-a),me=(y+g)/(y-g),_e=-(M+x)/(M-x),Oe=-2*M*x/(M-x);return O[0]=2*x/(d-a),O[4]=0,O[8]=re,O[12]=0,O[1]=0,O[5]=ae,O[9]=me,O[13]=0,O[2]=0,O[6]=0,O[10]=_e,O[14]=Oe,O[3]=0,O[7]=0,O[11]=-1,O[15]=0,this},makePerspective:function(a,d,g,y){var x=g*Math.tan(js.DEG2RAD*a*.5),M=-x;return this.makeFrustum(M*d,x*d,M,x,g,y)},makeOrthographic:function(a,d,g,y,x,M){var O=this.elements,B=1/(d-a),ae=1/(g-y),re=1/(M-x),me=(d+a)*B,_e=(g+y)*ae,Oe=(M+x)*re;return O[0]=2*B,O[4]=0,O[8]=0,O[12]=-me,O[1]=0,O[5]=2*ae,O[9]=0,O[13]=-_e,O[2]=0,O[6]=0,O[10]=-2*re,O[14]=-Oe,O[3]=0,O[7]=0,O[11]=0,O[15]=1,this},equals:function(a){for(var d=this.elements,g=a.elements,y=0;y<16;y++)if(d[y]!==g[y])return!1;return!0},fromArray:function(a,d){void 0===d&&(d=0);for(var g=0;g<16;g++)this.elements[g]=a[g+d];return this},toArray:function(a,d){void 0===a&&(a=[]),void 0===d&&(d=0);var g=this.elements;return a[d]=g[0],a[d+1]=g[1],a[d+2]=g[2],a[d+3]=g[3],a[d+4]=g[4],a[d+5]=g[5],a[d+6]=g[6],a[d+7]=g[7],a[d+8]=g[8],a[d+9]=g[9],a[d+10]=g[10],a[d+11]=g[11],a[d+12]=g[12],a[d+13]=g[13],a[d+14]=g[14],a[d+15]=g[15],a}},(Xh.prototype=Object.create(_a.prototype)).constructor=Xh,Xh.prototype.isCubeTexture=!0,Object.defineProperty(Xh.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});var F_=new _a,Og=new Xh;function _v(){this.seq=[],this.map={}}var Qc=[],Do=[];function $d(a,d,g){var y=a[0];if(y<=0||y>0)return a;var x=d*g,M=Qc[x];if(void 0===M&&(M=new Float32Array(x),Qc[x]=M),0!==d){y.toArray(M,0);for(var O=1,B=0;O!==d;++O)a[O].toArray(M,B+=g)}return M}function N_(a,d){var g=Do[d];void 0===g&&(g=new Int32Array(d),Do[d]=g);for(var y=0;y!==d;++y)g[y]=a.allocTextureUnit();return g}function Nc(a,d){a.uniform1f(this.addr,d)}function cr(a,d){a.uniform1i(this.addr,d)}function fb(a,d){void 0===d.x?a.uniform2fv(this.addr,d):a.uniform2f(this.addr,d.x,d.y)}function Vr(a,d){void 0!==d.x?a.uniform3f(this.addr,d.x,d.y,d.z):void 0!==d.r?a.uniform3f(this.addr,d.r,d.g,d.b):a.uniform3fv(this.addr,d)}function Jc(a,d){void 0===d.x?a.uniform4fv(this.addr,d):a.uniform4f(this.addr,d.x,d.y,d.z,d.w)}function Dy(a,d){a.uniformMatrix2fv(this.addr,!1,d.elements||d)}function B_(a,d){a.uniformMatrix3fv(this.addr,!1,d.elements||d)}function tl(a,d){a.uniformMatrix4fv(this.addr,!1,d.elements||d)}function Fa(a,d,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTexture2D(d||F_,y)}function ep(a,d,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTextureCube(d||Og,y)}function qp(a,d){a.uniform2iv(this.addr,d)}function xm(a,d){a.uniform3iv(this.addr,d)}function Im(a,d){a.uniform4iv(this.addr,d)}function bv(a,d){a.uniform1fv(this.addr,d)}function Cv(a,d){a.uniform1iv(this.addr,d)}function rd(a,d){a.uniform2fv(this.addr,$d(d,this.size,2))}function yc(a,d){a.uniform3fv(this.addr,$d(d,this.size,3))}function z_(a,d){a.uniform4fv(this.addr,$d(d,this.size,4))}function Id(a,d){a.uniformMatrix2fv(this.addr,!1,$d(d,this.size,4))}function Sd(a,d){a.uniformMatrix3fv(this.addr,!1,$d(d,this.size,9))}function Ly(a,d){a.uniformMatrix4fv(this.addr,!1,$d(d,this.size,16))}function qd(a,d,g){var y=d.length,x=N_(g,y);a.uniform1iv(this.addr,x);for(var M=0;M!==y;++M)g.setTexture2D(d[M]||F_,x[M])}function nl(a,d,g){var y=d.length,x=N_(g,y);a.uniform1iv(this.addr,x);for(var M=0;M!==y;++M)g.setTextureCube(d[M]||Og,x[M])}function V_(a,d,g){this.id=a,this.addr=g,this.setValue=function Es(a){switch(a){case 5126:return Nc;case 35664:return fb;case 35665:return Vr;case 35666:return Jc;case 35674:return Dy;case 35675:return B_;case 35676:return tl;case 35678:return Fa;case 35680:return ep;case 5124:case 35670:return cr;case 35667:case 35671:return qp;case 35668:case 35672:return xm;case 35669:case 35673:return Im}}(d.type)}function Py(a,d,g){this.id=a,this.addr=g,this.size=d.size,this.setValue=function Lo(a){switch(a){case 5126:return bv;case 35664:return rd;case 35665:return yc;case 35666:return z_;case 35674:return Id;case 35675:return Sd;case 35676:return Ly;case 35678:return qd;case 35680:return nl;case 5124:case 35670:return Cv;case 35667:case 35671:return qp;case 35668:case 35672:return xm;case 35669:case 35673:return Im}}(d.type)}function Yh(a){this.id=a,_v.call(this)}Yh.prototype.setValue=function(a,d){for(var g=this.seq,y=0,x=g.length;y!==x;++y){var M=g[y];M.setValue(a,d[M.id])}};var Wo=/([\w\d_]+)(\])?(\[|\.)?/g;function Al(a,d){a.seq.push(d),a.map[d.id]=d}function tp(a,d,g){var y=a.name,x=y.length;for(Wo.lastIndex=0;;){var M=Wo.exec(y),B=M[1],re=M[3];if("]"===M[2]&&(B|=0),void 0===re||"["===re&&Wo.lastIndex+2===x){Al(g,void 0===re?new V_(B,a,d):new Py(B,a,d));break}var _e=g.map[B];void 0===_e&&Al(g,_e=new Yh(B)),g=_e}}function xl(a,d,g){_v.call(this),this.renderer=g;for(var y=a.getProgramParameter(d,a.ACTIVE_UNIFORMS),x=0;x!==y;++x){var M=a.getActiveUniform(d,x);tp(M,a.getUniformLocation(d,M.name),this)}}xl.prototype.setValue=function(a,d,g){var y=this.map[d];void 0!==y&&y.setValue(a,g,this.renderer)},xl.prototype.set=function(a,d,g){var y=this.map[g];void 0!==y&&y.setValue(a,d[g],this.renderer)},xl.prototype.setOptional=function(a,d,g){var y=d[g];void 0!==y&&this.setValue(a,g,y)},xl.upload=function(a,d,g,y){for(var x=0,M=d.length;x!==M;++x){var O=d[x],B=g[O.id];!1!==B.needsUpdate&&O.setValue(a,B.value,y)}},xl.seqWithValue=function(a,d){for(var g=[],y=0,x=a.length;y!==x;++y){var M=a[y];M.id in d&&g.push(M)}return g};var Dl={merge:function(a){for(var d={},g=0;g<a.length;g++){var y=this.clone(a[g]);for(var x in y)d[x]=y[x]}return d},clone:function(a){var d={};for(var g in a)for(var y in d[g]={},a[g]){var x=a[g][y];d[g][y]=x&&(x.isColor||x.isMatrix3||x.isMatrix4||x.isVector2||x.isVector3||x.isVector4||x.isTexture)?x.clone():Array.isArray(x)?x.slice():x}return d}},go={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#include <premultiplied_alpha_fragment>\n\t#include <encodings_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};function ps(a,d,g){return void 0===d&&void 0===g?this.set(a):this.setRGB(a,d,g)}ps.prototype={constructor:ps,isColor:!0,r:1,g:1,b:1,set:function(a){return a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this},setScalar:function(a){return this.r=a,this.g=a,this.b=a,this},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},setRGB:function(a,d,g){return this.r=a,this.g=d,this.b=g,this},setHSL:function(){function a(d,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?d+6*(g-d)*y:y<.5?g:y<2/3?d+6*(g-d)*(2/3-y):d}return function(g,y,x){if(g=js.euclideanModulo(g,1),y=js.clamp(y,0,1),x=js.clamp(x,0,1),0===y)this.r=this.g=this.b=x;else{var M=x<=.5?x*(1+y):x+y-x*y,O=2*x-M;this.r=a(O,M,g+1/3),this.g=a(O,M,g),this.b=a(O,M,g-1/3)}return this}}(),setStyle:function(a){function d(_e){void 0!==_e&&parseFloat(_e)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var g;if(g=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var y,M=g[2];switch(g[1]){case"rgb":case"rgba":if(y=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M))return this.r=Math.min(255,parseInt(y[1],10))/255,this.g=Math.min(255,parseInt(y[2],10))/255,this.b=Math.min(255,parseInt(y[3],10))/255,d(y[5]),this;if(y=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M))return this.r=Math.min(100,parseInt(y[1],10))/100,this.g=Math.min(100,parseInt(y[2],10))/100,this.b=Math.min(100,parseInt(y[3],10))/100,d(y[5]),this;break;case"hsl":case"hsla":if(y=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(M)){var O=parseFloat(y[1])/360,B=parseInt(y[2],10)/100,ae=parseInt(y[3],10)/100;return d(y[5]),this.setHSL(O,B,ae)}}}else if(g=/^\#([A-Fa-f0-9]+)$/.exec(a)){var re,me=(re=g[1]).length;if(3===me)return this.r=parseInt(re.charAt(0)+re.charAt(0),16)/255,this.g=parseInt(re.charAt(1)+re.charAt(1),16)/255,this.b=parseInt(re.charAt(2)+re.charAt(2),16)/255,this;if(6===me)return this.r=parseInt(re.charAt(0)+re.charAt(1),16)/255,this.g=parseInt(re.charAt(2)+re.charAt(3),16)/255,this.b=parseInt(re.charAt(4)+re.charAt(5),16)/255,this}return a&&a.length>0&&(void 0!==(re=Wg[a])?this.setHex(re):console.warn("THREE.Color: Unknown color "+a)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},copyGammaToLinear:function(a,d){return void 0===d&&(d=2),this.r=Math.pow(a.r,d),this.g=Math.pow(a.g,d),this.b=Math.pow(a.b,d),this},copyLinearToGamma:function(a,d){void 0===d&&(d=2);var g=d>0?1/d:1;return this.r=Math.pow(a.r,g),this.g=Math.pow(a.g,g),this.b=Math.pow(a.b,g),this},convertGammaToLinear:function(){var a=this.r,d=this.g,g=this.b;return this.r=a*a,this.g=d*d,this.b=g*g,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){var B,ae,d=a||{h:0,s:0,l:0},g=this.r,y=this.g,x=this.b,M=Math.max(g,y,x),O=Math.min(g,y,x),re=(O+M)/2;if(O===M)B=0,ae=0;else{var me=M-O;switch(ae=re<=.5?me/(M+O):me/(2-M-O),M){case g:B=(y-x)/me+(y<x?6:0);break;case y:B=(x-g)/me+2;break;case x:B=(g-y)/me+4}B/=6}return d.h=B,d.s=ae,d.l=re,d},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,d,g){var y=this.getHSL();return y.h+=a,y.s+=d,y.l+=g,this.setHSL(y.h,y.s,y.l),this},add:function(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this},addColors:function(a,d){return this.r=a.r+d.r,this.g=a.g+d.g,this.b=a.b+d.b,this},addScalar:function(a){return this.r+=a,this.g+=a,this.b+=a,this},sub:function(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this},multiply:function(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this},multiplyScalar:function(a){return this.r*=a,this.g*=a,this.b*=a,this},lerp:function(a,d){return this.r+=(a.r-this.r)*d,this.g+=(a.g-this.g)*d,this.b+=(a.b-this.b)*d,this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,d){return void 0===d&&(d=0),this.r=a[d],this.g=a[d+1],this.b=a[d+2],this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this.r,a[d+1]=this.g,a[d+2]=this.b,a},toJSON:function(){return this.getHex()}};var Wg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Is(a,d,g,y,x,M,O,B,ae,re,me,_e){_a.call(this,null,M,O,B,ae,re,y,x,me,_e),this.image={data:a,width:d,height:g},this.magFilter=void 0!==ae?ae:Go,this.minFilter=void 0!==re?re:Go,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}(Is.prototype=Object.create(_a.prototype)).constructor=Is,Is.prototype.isDataTexture=!0;var Ps={common:{diffuse:{value:new ps(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new ba(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new hr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ps(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ps(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new ba(0,0,1,1)}}},nu={basic:{uniforms:Dl.merge([Ps.common,Ps.aomap,Ps.lightmap,Ps.fog]),vertexShader:go.meshbasic_vert,fragmentShader:go.meshbasic_frag},lambert:{uniforms:Dl.merge([Ps.common,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.fog,Ps.lights,{emissive:{value:new ps(0)}}]),vertexShader:go.meshlambert_vert,fragmentShader:go.meshlambert_frag},phong:{uniforms:Dl.merge([Ps.common,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.gradientmap,Ps.fog,Ps.lights,{emissive:{value:new ps(0)},specular:{value:new ps(1118481)},shininess:{value:30}}]),vertexShader:go.meshphong_vert,fragmentShader:go.meshphong_frag},standard:{uniforms:Dl.merge([Ps.common,Ps.aomap,Ps.lightmap,Ps.emissivemap,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,Ps.roughnessmap,Ps.metalnessmap,Ps.fog,Ps.lights,{emissive:{value:new ps(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:go.meshphysical_vert,fragmentShader:go.meshphysical_frag},points:{uniforms:Dl.merge([Ps.points,Ps.fog]),vertexShader:go.points_vert,fragmentShader:go.points_frag},dashed:{uniforms:Dl.merge([Ps.common,Ps.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:go.linedashed_vert,fragmentShader:go.linedashed_frag},depth:{uniforms:Dl.merge([Ps.common,Ps.displacementmap]),vertexShader:go.depth_vert,fragmentShader:go.depth_frag},normal:{uniforms:Dl.merge([Ps.common,Ps.bumpmap,Ps.normalmap,Ps.displacementmap,{opacity:{value:1}}]),vertexShader:go.normal_vert,fragmentShader:go.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:go.cube_vert,fragmentShader:go.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:go.equirect_vert,fragmentShader:go.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new an}},vertexShader:go.distanceRGBA_vert,fragmentShader:go.distanceRGBA_frag}};function bh(a,d){this.min=void 0!==a?a:new hr(1/0,1/0),this.max=void 0!==d?d:new hr(-1/0,-1/0)}function Qp(a,d){var x,M,O,B,ae,re,me,_e,g=a.context,y=a.state;this.render=function(Ne,ut,ct){if(0!==d.length){var rt=new an,At=ct.w/ct.z,St=.5*ct.z,tn=.5*ct.w,$t=16/ct.w,Cn=new hr($t*At,$t),pn=new an(1,1,0),ln=new hr(1,1),In=new bh;In.min.set(ct.x,ct.y),In.max.set(ct.x+(ct.z-16),ct.y+(ct.w-16)),void 0===B&&function Oe(){var Ne=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),ut=new Uint16Array([0,1,2,0,2,3]);x=g.createBuffer(),M=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,x),g.bufferData(g.ARRAY_BUFFER,Ne,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),g.bufferData(g.ELEMENT_ARRAY_BUFFER,ut,g.STATIC_DRAW),me=g.createTexture(),_e=g.createTexture(),y.bindTexture(g.TEXTURE_2D,me),g.texImage2D(g.TEXTURE_2D,0,g.RGB,16,16,0,g.RGB,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),y.bindTexture(g.TEXTURE_2D,_e),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,16,16,0,g.RGBA,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),O={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},B=function Fe(Ne){var ut=g.createProgram(),ct=g.createShader(g.FRAGMENT_SHADER),rt=g.createShader(g.VERTEX_SHADER),At="precision "+a.getPrecision()+" float;\n";return g.shaderSource(ct,At+Ne.fragmentShader),g.shaderSource(rt,At+Ne.vertexShader),g.compileShader(ct),g.compileShader(rt),g.attachShader(ut,ct),g.attachShader(ut,rt),g.linkProgram(ut),ut}(O),ae={vertex:g.getAttribLocation(B,"position"),uv:g.getAttribLocation(B,"uv")},re={renderType:g.getUniformLocation(B,"renderType"),map:g.getUniformLocation(B,"map"),occlusionMap:g.getUniformLocation(B,"occlusionMap"),opacity:g.getUniformLocation(B,"opacity"),color:g.getUniformLocation(B,"color"),scale:g.getUniformLocation(B,"scale"),rotation:g.getUniformLocation(B,"rotation"),screenPosition:g.getUniformLocation(B,"screenPosition")}}(),g.useProgram(B),y.initAttributes(),y.enableAttribute(ae.vertex),y.enableAttribute(ae.uv),y.disableUnusedAttributes(),g.uniform1i(re.occlusionMap,0),g.uniform1i(re.map,1),g.bindBuffer(g.ARRAY_BUFFER,x),g.vertexAttribPointer(ae.vertex,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(ae.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),y.disable(g.CULL_FACE),y.setDepthWrite(!1);for(var $n=0,zi=d.length;$n<zi;$n++){Cn.set(($t=16/ct.w)*At,$t);var Ii=d[$n];if(rt.set(Ii.matrixWorld.elements[12],Ii.matrixWorld.elements[13],Ii.matrixWorld.elements[14]),rt.applyMatrix4(ut.matrixWorldInverse),rt.applyProjection(ut.projectionMatrix),pn.copy(rt),ln.x=ct.x+pn.x*St+St-8,ln.y=ct.y+pn.y*tn+tn-8,!0===In.containsPoint(ln)){y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,null),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,me),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGB,ln.x,ln.y,16,16,0),g.uniform1i(re.renderType,0),g.uniform2f(re.scale,Cn.x,Cn.y),g.uniform3f(re.screenPosition,pn.x,pn.y,pn.z),y.disable(g.BLEND),y.enable(g.DEPTH_TEST),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,_e),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGBA,ln.x,ln.y,16,16,0),g.uniform1i(re.renderType,1),y.disable(g.DEPTH_TEST),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,me),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),Ii.positionScreen.copy(pn),Ii.customUpdateCallback?Ii.customUpdateCallback(Ii):Ii.updateLensFlares(),g.uniform1i(re.renderType,2),y.enable(g.BLEND);for(var Qt=0,en=Ii.lensFlares.length;Qt<en;Qt++){var si=Ii.lensFlares[Qt];si.opacity>.001&&si.scale>.001&&(pn.x=si.x,pn.y=si.y,pn.z=si.z,Cn.x=($t=si.size*si.scale/ct.w)*At,Cn.y=$t,g.uniform3f(re.screenPosition,pn.x,pn.y,pn.z),g.uniform2f(re.scale,Cn.x,Cn.y),g.uniform1f(re.rotation,si.rotation),g.uniform1f(re.opacity,si.opacity),g.uniform3f(re.color,si.color.r,si.color.g,si.color.b),y.setBlending(si.blending,si.blendEquation,si.blendSrc,si.blendDst),a.setTexture2D(si.texture,1),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0))}}}y.enable(g.CULL_FACE),y.enable(g.DEPTH_TEST),y.setDepthWrite(!0),a.resetGLState()}}}function W_(a,d){var x,M,O,B,ae,re,g=a.context,y=a.state,me=new an,_e=new oc,Oe=new an;function ut(ct,rt){return ct.renderOrder!==rt.renderOrder?ct.renderOrder-rt.renderOrder:ct.z!==rt.z?rt.z-ct.z:rt.id-ct.id}this.render=function(ct,rt){if(0!==d.length){void 0===O&&function Fe(){var ct=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),rt=new Uint16Array([0,1,2,0,2,3]);x=g.createBuffer(),M=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,x),g.bufferData(g.ARRAY_BUFFER,ct,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),g.bufferData(g.ELEMENT_ARRAY_BUFFER,rt,g.STATIC_DRAW),O=function Ne(){var ct=g.createProgram(),rt=g.createShader(g.VERTEX_SHADER),At=g.createShader(g.FRAGMENT_SHADER);return g.shaderSource(rt,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),g.shaderSource(At,["precision "+a.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),g.compileShader(rt),g.compileShader(At),g.attachShader(ct,rt),g.attachShader(ct,At),g.linkProgram(ct),ct}(),B={position:g.getAttribLocation(O,"position"),uv:g.getAttribLocation(O,"uv")},ae={uvOffset:g.getUniformLocation(O,"uvOffset"),uvScale:g.getUniformLocation(O,"uvScale"),rotation:g.getUniformLocation(O,"rotation"),scale:g.getUniformLocation(O,"scale"),color:g.getUniformLocation(O,"color"),map:g.getUniformLocation(O,"map"),opacity:g.getUniformLocation(O,"opacity"),modelViewMatrix:g.getUniformLocation(O,"modelViewMatrix"),projectionMatrix:g.getUniformLocation(O,"projectionMatrix"),fogType:g.getUniformLocation(O,"fogType"),fogDensity:g.getUniformLocation(O,"fogDensity"),fogNear:g.getUniformLocation(O,"fogNear"),fogFar:g.getUniformLocation(O,"fogFar"),fogColor:g.getUniformLocation(O,"fogColor"),alphaTest:g.getUniformLocation(O,"alphaTest")};var At=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");At.width=8,At.height=8;var St=At.getContext("2d");St.fillStyle="white",St.fillRect(0,0,8,8),(re=new _a(At)).needsUpdate=!0}(),g.useProgram(O),y.initAttributes(),y.enableAttribute(B.position),y.enableAttribute(B.uv),y.disableUnusedAttributes(),y.disable(g.CULL_FACE),y.enable(g.BLEND),g.bindBuffer(g.ARRAY_BUFFER,x),g.vertexAttribPointer(B.position,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(B.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,M),g.uniformMatrix4fv(ae.projectionMatrix,!1,rt.projectionMatrix.elements),y.activeTexture(g.TEXTURE0),g.uniform1i(ae.map,0);var At=0,St=0,tn=ct.fog;tn?(g.uniform3f(ae.fogColor,tn.color.r,tn.color.g,tn.color.b),tn.isFog?(g.uniform1f(ae.fogNear,tn.near),g.uniform1f(ae.fogFar,tn.far),g.uniform1i(ae.fogType,1),At=1,St=1):tn.isFogExp2&&(g.uniform1f(ae.fogDensity,tn.density),g.uniform1i(ae.fogType,2),At=2,St=2)):(g.uniform1i(ae.fogType,0),At=0,St=0);for(var $t=0,Cn=d.length;$t<Cn;$t++)(pn=d[$t]).modelViewMatrix.multiplyMatrices(rt.matrixWorldInverse,pn.matrixWorld),pn.z=-pn.modelViewMatrix.elements[14];d.sort(ut);var ln=[];for($t=0,Cn=d.length;$t<Cn;$t++){var pn,In=(pn=d[$t]).material;if(!1!==In.visible){g.uniform1f(ae.alphaTest,In.alphaTest),g.uniformMatrix4fv(ae.modelViewMatrix,!1,pn.modelViewMatrix.elements),pn.matrixWorld.decompose(me,_e,Oe),ln[0]=Oe.x,ln[1]=Oe.y;var $n=0;ct.fog&&In.fog&&($n=St),At!==$n&&(g.uniform1i(ae.fogType,$n),At=$n),null!==In.map?(g.uniform2f(ae.uvOffset,In.map.offset.x,In.map.offset.y),g.uniform2f(ae.uvScale,In.map.repeat.x,In.map.repeat.y)):(g.uniform2f(ae.uvOffset,0,0),g.uniform2f(ae.uvScale,1,1)),g.uniform1f(ae.opacity,In.opacity),g.uniform3f(ae.color,In.color.r,In.color.g,In.color.b),g.uniform1f(ae.rotation,In.rotation),g.uniform2fv(ae.scale,ln),y.setBlending(In.blending,In.blendEquation,In.blendSrc,In.blendDst),y.setDepthTest(In.depthTest),y.setDepthWrite(In.depthWrite),a.setTexture2D(In.map?In.map:re,0),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0)}}y.enable(g.CULL_FACE),a.resetGLState()}}}nu.physical={uniforms:Dl.merge([nu.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:go.meshphysical_vert,fragmentShader:go.meshphysical_frag},bh.prototype={constructor:bh,set:function(a,d){return this.min.copy(a),this.max.copy(d),this},setFromPoints:function(a){this.makeEmpty();for(var d=0,g=a.length;d<g;d++)this.expandByPoint(a[d]);return this},setFromCenterAndSize:function(){var a=new hr;return function(g,y){var x=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(x),this.max.copy(g).add(x),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){var d=a||new hr;return this.isEmpty()?d.set(0,0):d.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var d=a||new hr;return this.isEmpty()?d.set(0,0):d.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,d){return(d||new hr).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)},clampPoint:function(a,d){return(d||new hr).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new hr;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};var zy=0;function bo(){Object.defineProperty(this,"id",{value:zy++}),this.uuid=js.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=J,this.side=K,this.shading=Re,this.vertexColors=ie,this.opacity=1,this.transparent=!1,this.blendSrc=nn,this.blendDst=Ze,this.blendEquation=at,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Sn,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function xu(a){bo.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function Pi(a){bo.call(this),this.type="MeshDepthMaterial",this.depthPacking=Sf,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(a)}function Zs(a,d){this.min=void 0!==a?a:new an(1/0,1/0,1/0),this.max=void 0!==d?d:new an(-1/0,-1/0,-1/0)}function Lt(a,d){this.center=void 0!==a?a:new an,this.radius=void 0!==d?d:0}function Pt(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function bt(a,d){this.normal=void 0!==a?a:new an(1,0,0),this.constant=void 0!==d?d:0}function aa(a,d,g,y,x,M){this.planes=[void 0!==a?a:new bt,void 0!==d?d:new bt,void 0!==g?g:new bt,void 0!==y?y:new bt,void 0!==x?x:new bt,void 0!==M?M:new bt]}function Zo(a,d,g,y){var x=a.context,M=a.state,O=new aa,B=new Vs,ae=d.shadows,re=new hr,me=new hr(y.maxTextureSize,y.maxTextureSize),_e=new an,Oe=new an,Fe=[],rt=new Array(4),At=new Array(4),St={},tn=[new an(1,0,0),new an(-1,0,0),new an(0,0,1),new an(0,0,-1),new an(0,1,0),new an(0,-1,0)],$t=[new an(0,1,0),new an(0,1,0),new an(0,1,0),new an(0,1,0),new an(0,0,1),new an(0,0,-1)],Cn=[new ba,new ba,new ba,new ba,new ba,new ba],pn=new Pi;pn.depthPacking=qh,pn.clipping=!0;for(var ln=nu.distanceRGBA,In=Dl.clone(ln.uniforms),$n=0;4!==$n;++$n){var zi=0!=(1&$n),Ii=0!=(2&$n),Qt=pn.clone();Qt.morphTargets=zi,Qt.skinning=Ii,rt[$n]=Qt;var en=new xu({defines:{USE_SHADOWMAP:""},uniforms:In,vertexShader:ln.vertexShader,fragmentShader:ln.fragmentShader,morphTargets:zi,skinning:Ii,clipping:!0});At[$n]=en}var si=this;function gi(ki,Ti,Cr,Ji){var oi=ki.geometry,ii=null,f=rt,c=ki.customDepthMaterial;if(Cr&&(f=At,c=ki.customDistanceMaterial),c)ii=c;else{var h=!1;Ti.morphTargets&&(oi&&oi.isBufferGeometry?h=oi.morphAttributes&&oi.morphAttributes.position&&oi.morphAttributes.position.length>0:oi&&oi.isGeometry&&(h=oi.morphTargets&&oi.morphTargets.length>0));var _=0;h&&(_|=1),ki.isSkinnedMesh&&Ti.skinning&&(_|=2),ii=f[_]}if(a.localClippingEnabled&&!0===Ti.clipShadows&&0!==Ti.clippingPlanes.length){var C=ii.uuid,A=Ti.uuid,E=St[C];void 0===E&&(St[C]=E={});var F=E[A];void 0===F&&(F=ii.clone(),E[A]=F),ii=F}ii.visible=Ti.visible,ii.wireframe=Ti.wireframe;var P=Ti.side;return si.renderSingleSided&&P==ce&&(P=K),si.renderReverseSided&&(P===K?P=z:P===z&&(P=K)),ii.side=P,ii.clipShadows=Ti.clipShadows,ii.clippingPlanes=Ti.clippingPlanes,ii.wireframeLinewidth=Ti.wireframeLinewidth,ii.linewidth=Ti.linewidth,Cr&&void 0!==ii.uniforms.lightPos&&ii.uniforms.lightPos.value.copy(Ji),ii}function Vi(ki,Ti,Cr){if(!1!==ki.visible){0!=(ki.layers.mask&Ti.layers.mask)&&(ki.isMesh||ki.isLine||ki.isPoints)&&ki.castShadow&&(!1===ki.frustumCulled||!0===O.intersectsObject(ki))&&!0===ki.material.visible&&(ki.modelViewMatrix.multiplyMatrices(Cr.matrixWorldInverse,ki.matrixWorld),Fe.push(ki));for(var ii=ki.children,f=0,c=ii.length;f<c;f++)Vi(ii[f],Ti,Cr)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=se,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(ki,Ti){if(!1!==si.enabled&&(!1!==si.autoUpdate||!1!==si.needsUpdate)&&0!==ae.length){M.buffers.color.setClear(1,1,1,1),M.disable(x.BLEND),M.setDepthTest(!0),M.setScissorTest(!1);for(var Cr,Ji,oi=0,ii=ae.length;oi<ii;oi++){var f=ae[oi],c=f.shadow;if(void 0!==c){var h=c.camera;if(re.copy(c.mapSize),re.min(me),f&&f.isPointLight){Cr=6,Ji=!0;var m=re.x,_=re.y;Cn[0].set(2*m,_,m,_),Cn[1].set(0,_,m,_),Cn[2].set(3*m,_,m,_),Cn[3].set(m,_,m,_),Cn[4].set(3*m,0,m,_),Cn[5].set(m,0,m,_),re.x*=4,re.y*=2}else Cr=1,Ji=!1;null===c.map&&(c.map=new Zc(re.x,re.y,{minFilter:Go,magFilter:Go,format:sa}),h.updateProjectionMatrix()),c.isSpotLightShadow&&c.update(f),c&&c.isRectAreaLightShadow&&c.update(f);var A=c.map,E=c.matrix;Oe.setFromMatrixPosition(f.matrixWorld),h.position.copy(Oe),a.setRenderTarget(A),a.clear();for(var F=0;F<Cr;F++){Ji?(_e.copy(h.position),_e.add(tn[F]),h.up.copy($t[F]),h.lookAt(_e),M.viewport(Cn[F])):(_e.setFromMatrixPosition(f.target.matrixWorld),h.lookAt(_e)),h.updateMatrixWorld(),h.matrixWorldInverse.getInverse(h.matrixWorld),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(h.projectionMatrix),E.multiply(h.matrixWorldInverse),B.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),O.setFromMatrix(B),Fe.length=0,Vi(ki,Ti,h);for(var $=0,Z=Fe.length;$<Z;$++){var he=Fe[$],ge=g.update(he),ve=he.material;if(ve&&ve.isMultiMaterial)for(var Ee=ge.groups,Be=ve.materials,Ue=0,st=Ee.length;Ue<st;Ue++){var tt=Ee[Ue],wt=Be[tt.materialIndex];if(!0===wt.visible){var Ut=gi(he,wt,Ji,Oe);a.renderBufferDirect(h,null,ge,Ut,he,tt)}}else Ut=gi(he,ve,Ji,Oe),a.renderBufferDirect(h,null,ge,Ut,he,null)}}}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}var Gt=a.getClearColor(),xt=a.getClearAlpha();a.setClearColor(Gt,xt),si.needsUpdate=!1}}}function La(a,d){this.origin=void 0!==a?a:new an,this.direction=void 0!==d?d:new an}function to(a,d,g,y){this._x=a||0,this._y=d||0,this._z=g||0,this._order=y||to.DefaultOrder}function Jp(){this.mask=1}bo.prototype={constructor:bo,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update(),this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var d in a){var g=a[d];if(void 0!==g){var y=this[d];void 0!==y?y&&y.isColor?y.set(g):y&&y.isVector3&&g&&g.isVector3?y.copy(g):this[d]="overdraw"===d?Number(g):g:console.warn("THREE."+this.type+": '"+d+"' is not a property of this material.")}else console.warn("THREE.Material: '"+d+"' parameter is undefined.")}},toJSON:function(a){var d=void 0===a;d&&(a={textures:{},images:{}});var g={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function y(O){var B=[];for(var ae in O){var re=O[ae];delete re.metadata,B.push(re)}return B}if(g.uuid=this.uuid,g.type=this.type,""!==this.name&&(g.name=this.name),this.color&&this.color.isColor&&(g.color=this.color.getHex()),void 0!==this.roughness&&(g.roughness=this.roughness),void 0!==this.metalness&&(g.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(g.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(g.specular=this.specular.getHex()),void 0!==this.shininess&&(g.shininess=this.shininess),void 0!==this.clearCoat&&(g.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(g.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(g.map=this.map.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(g.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(g.lightMap=this.lightMap.toJSON(a).uuid),this.bumpMap&&this.bumpMap.isTexture&&(g.bumpMap=this.bumpMap.toJSON(a).uuid,g.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(g.normalMap=this.normalMap.toJSON(a).uuid,g.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(g.displacementMap=this.displacementMap.toJSON(a).uuid,g.displacementScale=this.displacementScale,g.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(g.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(g.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(g.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(g.specularMap=this.specularMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(g.envMap=this.envMap.toJSON(a).uuid,g.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(g.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.size&&(g.size=this.size),void 0!==this.sizeAttenuation&&(g.sizeAttenuation=this.sizeAttenuation),this.blending!==J&&(g.blending=this.blending),this.shading!==Re&&(g.shading=this.shading),this.side!==K&&(g.side=this.side),this.vertexColors!==ie&&(g.vertexColors=this.vertexColors),this.opacity<1&&(g.opacity=this.opacity),!0===this.transparent&&(g.transparent=this.transparent),g.depthFunc=this.depthFunc,g.depthTest=this.depthTest,g.depthWrite=this.depthWrite,this.alphaTest>0&&(g.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(g.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(g.wireframe=this.wireframe),this.wireframeLinewidth>1&&(g.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(g.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(g.wireframeLinejoin=this.wireframeLinejoin),g.skinning=this.skinning,g.morphTargets=this.morphTargets,d){var x=y(a.textures),M=y(a.images);x.length>0&&(g.textures=x),M.length>0&&(g.images=M)}return g},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.lights=a.lights,this.blending=a.blending,this.side=a.side,this.shading=a.shading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.overdraw=a.overdraw,this.visible=a.visible,this.clipShadows=a.clipShadows,this.clipIntersection=a.clipIntersection;var d=a.clippingPlanes,g=null;if(null!==d){var y=d.length;g=new Array(y);for(var x=0;x!==y;++x)g[x]=d[x].clone()}return this.clippingPlanes=g,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(bo.prototype,Y.prototype),(xu.prototype=Object.create(bo.prototype)).constructor=xu,xu.prototype.isShaderMaterial=!0,xu.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=Dl.clone(a.uniforms),this.defines=a.defines,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.extensions=a.extensions,this},xu.prototype.toJSON=function(a){var d=bo.prototype.toJSON.call(this,a);return d.uniforms=this.uniforms,d.vertexShader=this.vertexShader,d.fragmentShader=this.fragmentShader,d},(Pi.prototype=Object.create(bo.prototype)).constructor=Pi,Pi.prototype.isMeshDepthMaterial=!0,Pi.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.depthPacking=a.depthPacking,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this},Zs.prototype={constructor:Zs,isBox3:!0,set:function(a,d){return this.min.copy(a),this.max.copy(d),this},setFromArray:function(a){for(var d=1/0,g=1/0,y=1/0,x=-1/0,M=-1/0,O=-1/0,B=0,ae=a.length;B<ae;B+=3){var re=a[B],me=a[B+1],_e=a[B+2];re<d&&(d=re),me<g&&(g=me),_e<y&&(y=_e),re>x&&(x=re),me>M&&(M=me),_e>O&&(O=_e)}this.min.set(d,g,y),this.max.set(x,M,O)},setFromBufferAttribute:function(a){for(var d=1/0,g=1/0,y=1/0,x=-1/0,M=-1/0,O=-1/0,B=0,ae=a.count;B<ae;B++){var re=a.getX(B),me=a.getY(B),_e=a.getZ(B);re<d&&(d=re),me<g&&(g=me),_e<y&&(y=_e),re>x&&(x=re),me>M&&(M=me),_e>O&&(O=_e)}this.min.set(d,g,y),this.max.set(x,M,O)},setFromPoints:function(a){this.makeEmpty();for(var d=0,g=a.length;d<g;d++)this.expandByPoint(a[d]);return this},setFromCenterAndSize:function(){var a=new an;return function(g,y){var x=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(x),this.max.copy(g).add(x),this}}(),setFromObject:function(){var a=new an;return function(g){var y=this;return g.updateMatrixWorld(!0),this.makeEmpty(),g.traverse(function(x){var M,O,B=x.geometry;if(void 0!==B)if(B.isGeometry){var ae=B.vertices;for(M=0,O=ae.length;M<O;M++)a.copy(ae[M]),a.applyMatrix4(x.matrixWorld),y.expandByPoint(a)}else if(B.isBufferGeometry){var re=B.attributes.position;if(void 0!==re)for(M=0,O=re.count;M<O;M++)a.fromAttribute(re,M).applyMatrix4(x.matrixWorld),y.expandByPoint(a)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){var d=a||new an;return this.isEmpty()?d.set(0,0,0):d.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var d=a||new an;return this.isEmpty()?d.set(0,0,0):d.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,d){return(d||new an).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)},intersectsSphere:function(){var a;return function(g){return void 0===a&&(a=new an),this.clampPoint(g.center,a),a.distanceToSquared(g.center)<=g.radius*g.radius}}(),intersectsPlane:function(a){var d,g;return a.normal.x>0?(d=a.normal.x*this.min.x,g=a.normal.x*this.max.x):(d=a.normal.x*this.max.x,g=a.normal.x*this.min.x),a.normal.y>0?(d+=a.normal.y*this.min.y,g+=a.normal.y*this.max.y):(d+=a.normal.y*this.max.y,g+=a.normal.y*this.min.y),a.normal.z>0?(d+=a.normal.z*this.min.z,g+=a.normal.z*this.max.z):(d+=a.normal.z*this.max.z,g+=a.normal.z*this.min.z),d<=a.constant&&g>=a.constant},clampPoint:function(a,d){return(d||new an).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new an;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),getBoundingSphere:function(){var a=new an;return function(g){var y=g||new Lt;return this.getCenter(y.center),y.radius=.5*this.getSize(a).length(),y}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},applyMatrix4:function(){var a=[new an,new an,new an,new an,new an,new an,new an,new an];return function(g){return this.isEmpty()||(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(g),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(g),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(g),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(g),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(g),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(g),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(g),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(g),this.setFromPoints(a)),this}}(),translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}},Lt.prototype={constructor:Lt,set:function(a,d){return this.center.copy(a),this.radius=d,this},setFromPoints:function(){var a=new Zs;return function(g,y){var x=this.center;void 0!==y?x.copy(y):a.setFromPoints(g).getCenter(x);for(var M=0,O=0,B=g.length;O<B;O++)M=Math.max(M,x.distanceToSquared(g[O]));return this.radius=Math.sqrt(M),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},empty:function(){return this.radius<=0},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var d=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=d*d},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,d){var g=this.center.distanceToSquared(a),y=d||new an;return y.copy(a),g>this.radius*this.radius&&(y.sub(this.center).normalize(),y.multiplyScalar(this.radius).add(this.center)),y},getBoundingBox:function(a){var d=a||new Zs;return d.set(this.center,this.center),d.expandByScalar(this.radius),d},applyMatrix4:function(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}},Pt.prototype={constructor:Pt,isMatrix3:!0,set:function(a,d,g,y,x,M,O,B,ae){var re=this.elements;return re[0]=a,re[1]=y,re[2]=O,re[3]=d,re[4]=x,re[5]=B,re[6]=g,re[7]=M,re[8]=ae,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var d=a.elements;return this.set(d[0],d[3],d[6],d[1],d[4],d[7],d[2],d[5],d[8]),this},setFromMatrix4:function(a){var d=a.elements;return this.set(d[0],d[4],d[8],d[1],d[5],d[9],d[2],d[6],d[10]),this},applyToVector3Array:function(){var a;return function(g,y,x){void 0===a&&(a=new an),void 0===y&&(y=0),void 0===x&&(x=g.length);for(var M=0,O=y;M<x;M+=3,O+=3)a.fromArray(g,O),a.applyMatrix3(this),a.toArray(g,O);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new an);for(var y=0,x=g.count;y<x;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix3(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),multiplyScalar:function(a){var d=this.elements;return d[0]*=a,d[3]*=a,d[6]*=a,d[1]*=a,d[4]*=a,d[7]*=a,d[2]*=a,d[5]*=a,d[8]*=a,this},determinant:function(){var a=this.elements,d=a[0],g=a[1],y=a[2],x=a[3],M=a[4],O=a[5],B=a[6],ae=a[7],re=a[8];return d*M*re-d*O*ae-g*x*re+g*O*B+y*x*ae-y*M*B},getInverse:function(a,d){a&&a.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var g=a.elements,y=this.elements,x=g[0],M=g[1],O=g[2],B=g[3],ae=g[4],re=g[5],me=g[6],_e=g[7],Oe=g[8],Fe=Oe*ae-re*_e,Ne=re*me-Oe*B,ut=_e*B-ae*me,ct=x*Fe+M*Ne+O*ut;if(0===ct){var rt="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===d)throw new Error(rt);return console.warn(rt),this.identity()}var At=1/ct;return y[0]=Fe*At,y[1]=(O*_e-Oe*M)*At,y[2]=(re*M-O*ae)*At,y[3]=Ne*At,y[4]=(Oe*x-O*me)*At,y[5]=(O*B-re*x)*At,y[6]=ut*At,y[7]=(M*me-_e*x)*At,y[8]=(ae*x-M*B)*At,this},transpose:function(){var a,d=this.elements;return a=d[1],d[1]=d[3],d[3]=a,a=d[2],d[2]=d[6],d[6]=a,a=d[5],d[5]=d[7],d[7]=a,this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var d=this.elements;return a[0]=d[0],a[1]=d[3],a[2]=d[6],a[3]=d[1],a[4]=d[4],a[5]=d[7],a[6]=d[2],a[7]=d[5],a[8]=d[8],this},fromArray:function(a,d){void 0===d&&(d=0);for(var g=0;g<9;g++)this.elements[g]=a[g+d];return this},toArray:function(a,d){void 0===a&&(a=[]),void 0===d&&(d=0);var g=this.elements;return a[d]=g[0],a[d+1]=g[1],a[d+2]=g[2],a[d+3]=g[3],a[d+4]=g[4],a[d+5]=g[5],a[d+6]=g[6],a[d+7]=g[7],a[d+8]=g[8],a}},bt.prototype={constructor:bt,set:function(a,d){return this.normal.copy(a),this.constant=d,this},setComponents:function(a,d,g,y){return this.normal.set(a,d,g),this.constant=y,this},setFromNormalAndCoplanarPoint:function(a,d){return this.normal.copy(a),this.constant=-d.dot(this.normal),this},setFromCoplanarPoints:function(){var a=new an,d=new an;return function(y,x,M){var O=a.subVectors(M,x).cross(d.subVectors(y,x)).normalize();return this.setFromNormalAndCoplanarPoint(O,y),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.normal.copy(a.normal),this.constant=a.constant,this},normalize:function(){var a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,d){return this.orthoPoint(a,d).sub(a).negate()},orthoPoint:function(a,d){var g=this.distanceToPoint(a);return(d||new an).copy(this.normal).multiplyScalar(g)},intersectLine:function(){var a=new an;return function(g,y){var x=y||new an,M=g.delta(a),O=this.normal.dot(M);if(0===O)return 0===this.distanceToPoint(g.start)?x.copy(g.start):void 0;var B=-(g.start.dot(this.normal)+this.constant)/O;return B<0||B>1?void 0:x.copy(M).multiplyScalar(B).add(g.start)}}(),intersectsLine:function(a){var d=this.distanceToPoint(a.start),g=this.distanceToPoint(a.end);return d<0&&g>0||g<0&&d>0},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new an).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new an,d=new Pt;return function(y,x){var M=this.coplanarPoint(a).applyMatrix4(y),O=x||d.getNormalMatrix(y),B=this.normal.applyMatrix3(O).normalize();return this.constant=-M.dot(B),this}}(),translate:function(a){return this.constant=this.constant-a.dot(this.normal),this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}},aa.prototype={constructor:aa,set:function(a,d,g,y,x,M){var O=this.planes;return O[0].copy(a),O[1].copy(d),O[2].copy(g),O[3].copy(y),O[4].copy(x),O[5].copy(M),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var d=this.planes,g=0;g<6;g++)d[g].copy(a.planes[g]);return this},setFromMatrix:function(a){var d=this.planes,g=a.elements,y=g[0],x=g[1],M=g[2],O=g[3],B=g[4],ae=g[5],re=g[6],me=g[7],_e=g[8],Oe=g[9],Fe=g[10],Ne=g[11],ut=g[12],ct=g[13],rt=g[14],At=g[15];return d[0].setComponents(O-y,me-B,Ne-_e,At-ut).normalize(),d[1].setComponents(O+y,me+B,Ne+_e,At+ut).normalize(),d[2].setComponents(O+x,me+ae,Ne+Oe,At+ct).normalize(),d[3].setComponents(O-x,me-ae,Ne-Oe,At-ct).normalize(),d[4].setComponents(O-M,me-re,Ne-Fe,At-rt).normalize(),d[5].setComponents(O+M,me+re,Ne+Fe,At+rt).normalize(),this},intersectsObject:function(){var a=new Lt;return function(g){var y=g.geometry;return null===y.boundingSphere&&y.computeBoundingSphere(),a.copy(y.boundingSphere).applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Lt;return function(g){return a.center.set(0,0,0),a.radius=.7071067811865476,a.applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var d=this.planes,g=a.center,y=-a.radius,x=0;x<6;x++)if(d[x].distanceToPoint(g)<y)return!1;return!0},intersectsBox:function(){var a=new an,d=new an;return function(y){for(var x=this.planes,M=0;M<6;M++){var O=x[M];a.x=O.normal.x>0?y.min.x:y.max.x,d.x=O.normal.x>0?y.max.x:y.min.x,a.y=O.normal.y>0?y.min.y:y.max.y,d.y=O.normal.y>0?y.max.y:y.min.y,a.z=O.normal.z>0?y.min.z:y.max.z,d.z=O.normal.z>0?y.max.z:y.min.z;var B=O.distanceToPoint(a),ae=O.distanceToPoint(d);if(B<0&&ae<0)return!1}return!0}}(),containsPoint:function(a){for(var d=this.planes,g=0;g<6;g++)if(d[g].distanceToPoint(a)<0)return!1;return!0}},La.prototype={constructor:La,set:function(a,d){return this.origin.copy(a),this.direction.copy(d),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,d){return(d||new an).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){return this.direction.copy(a).sub(this.origin).normalize(),this},recast:function(){var a=new an;return function(g){return this.origin.copy(this.at(g,a)),this}}(),closestPointToPoint:function(a,d){var g=d||new an;g.subVectors(a,this.origin);var y=g.dot(this.direction);return y<0?g.copy(this.origin):g.copy(this.direction).multiplyScalar(y).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new an;return function(g){var y=a.subVectors(g,this.origin).dot(this.direction);return y<0?this.origin.distanceToSquared(g):(a.copy(this.direction).multiplyScalar(y).add(this.origin),a.distanceToSquared(g))}}(),distanceSqToSegment:function(){var a=new an,d=new an,g=new an;return function(x,M,O,B){a.copy(x).add(M).multiplyScalar(.5),d.copy(M).sub(x).normalize(),g.copy(this.origin).sub(a);var Ne,ut,ct,rt,ae=.5*x.distanceTo(M),re=-this.direction.dot(d),me=g.dot(this.direction),_e=-g.dot(d),Oe=g.lengthSq(),Fe=Math.abs(1-re*re);if(Fe>0)if(ut=re*me-_e,rt=ae*Fe,(Ne=re*_e-me)>=0)if(ut>=-rt)if(ut<=rt){var At=1/Fe;ct=(Ne*=At)*(Ne+re*(ut*=At)+2*me)+ut*(re*Ne+ut+2*_e)+Oe}else ut=ae,ct=-(Ne=Math.max(0,-(re*ut+me)))*Ne+ut*(ut+2*_e)+Oe;else ut=-ae,ct=-(Ne=Math.max(0,-(re*ut+me)))*Ne+ut*(ut+2*_e)+Oe;else ut<=-rt?ct=-(Ne=Math.max(0,-(-re*ae+me)))*Ne+(ut=Ne>0?-ae:Math.min(Math.max(-ae,-_e),ae))*(ut+2*_e)+Oe:ut<=rt?(Ne=0,ct=(ut=Math.min(Math.max(-ae,-_e),ae))*(ut+2*_e)+Oe):ct=-(Ne=Math.max(0,-(re*ae+me)))*Ne+(ut=Ne>0?ae:Math.min(Math.max(-ae,-_e),ae))*(ut+2*_e)+Oe;else ut=re>0?-ae:ae,ct=-(Ne=Math.max(0,-(re*ut+me)))*Ne+ut*(ut+2*_e)+Oe;return O&&O.copy(this.direction).multiplyScalar(Ne).add(this.origin),B&&B.copy(d).multiplyScalar(ut).add(a),ct}}(),intersectSphere:function(){var a=new an;return function(g,y){a.subVectors(g.center,this.origin);var x=a.dot(this.direction),M=a.dot(a)-x*x,O=g.radius*g.radius;if(M>O)return null;var B=Math.sqrt(O-M),ae=x-B,re=x+B;return ae<0&&re<0?null:this.at(ae<0?re:ae,y)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var d=a.normal.dot(this.direction);if(0===d)return 0===a.distanceToPoint(this.origin)?0:null;var g=-(this.origin.dot(a.normal)+a.constant)/d;return g>=0?g:null},intersectPlane:function(a,d){var g=this.distanceToPlane(a);return null===g?null:this.at(g,d)},intersectsPlane:function(a){var d=a.distanceToPoint(this.origin);return 0===d||a.normal.dot(this.direction)*d<0},intersectBox:function(a,d){var g,y,x,M,O,B,ae=1/this.direction.x,re=1/this.direction.y,me=1/this.direction.z,_e=this.origin;return ae>=0?(g=(a.min.x-_e.x)*ae,y=(a.max.x-_e.x)*ae):(g=(a.max.x-_e.x)*ae,y=(a.min.x-_e.x)*ae),re>=0?(x=(a.min.y-_e.y)*re,M=(a.max.y-_e.y)*re):(x=(a.max.y-_e.y)*re,M=(a.min.y-_e.y)*re),g>M||x>y||((x>g||g!=g)&&(g=x),(M<y||y!=y)&&(y=M),me>=0?(O=(a.min.z-_e.z)*me,B=(a.max.z-_e.z)*me):(O=(a.max.z-_e.z)*me,B=(a.min.z-_e.z)*me),g>B||O>y)||((O>g||g!=g)&&(g=O),(B<y||y!=y)&&(y=B),y<0)?null:this.at(g>=0?g:y,d)},intersectsBox:function(){var a=new an;return function(g){return null!==this.intersectBox(g,a)}}(),intersectTriangle:function(){var a=new an,d=new an,g=new an,y=new an;return function(M,O,B,ae,re){d.subVectors(O,M),g.subVectors(B,M),y.crossVectors(d,g);var _e,me=this.direction.dot(y);if(me>0){if(ae)return null;_e=1}else{if(!(me<0))return null;_e=-1,me=-me}a.subVectors(this.origin,M);var Oe=_e*this.direction.dot(g.crossVectors(a,g));if(Oe<0)return null;var Fe=_e*this.direction.dot(d.cross(a));if(Fe<0||Oe+Fe>me)return null;var Ne=-_e*a.dot(y);return Ne<0?null:this.at(Ne/me,re)}}(),applyMatrix4:function(a){return this.direction.add(this.origin).applyMatrix4(a),this.origin.applyMatrix4(a),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}},to.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],to.DefaultOrder="XYZ",to.prototype={constructor:to,isEuler:!0,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a,this.onChangeCallback()},set:function(a,d,g,y){return this._x=a,this._y=d,this._z=g,this._order=y||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this.onChangeCallback(),this},setFromRotationMatrix:function(a,d,g){var y=js.clamp,x=a.elements,M=x[0],O=x[4],B=x[8],ae=x[1],re=x[5],me=x[9],_e=x[2],Oe=x[6],Fe=x[10];return"XYZ"===(d=d||this._order)?(this._y=Math.asin(y(B,-1,1)),Math.abs(B)<.99999?(this._x=Math.atan2(-me,Fe),this._z=Math.atan2(-O,M)):(this._x=Math.atan2(Oe,re),this._z=0)):"YXZ"===d?(this._x=Math.asin(-y(me,-1,1)),Math.abs(me)<.99999?(this._y=Math.atan2(B,Fe),this._z=Math.atan2(ae,re)):(this._y=Math.atan2(-_e,M),this._z=0)):"ZXY"===d?(this._x=Math.asin(y(Oe,-1,1)),Math.abs(Oe)<.99999?(this._y=Math.atan2(-_e,Fe),this._z=Math.atan2(-O,re)):(this._y=0,this._z=Math.atan2(ae,M))):"ZYX"===d?(this._y=Math.asin(-y(_e,-1,1)),Math.abs(_e)<.99999?(this._x=Math.atan2(Oe,Fe),this._z=Math.atan2(ae,M)):(this._x=0,this._z=Math.atan2(-O,re))):"YZX"===d?(this._z=Math.asin(y(ae,-1,1)),Math.abs(ae)<.99999?(this._x=Math.atan2(-me,re),this._y=Math.atan2(-_e,M)):(this._x=0,this._y=Math.atan2(B,Fe))):"XZY"===d?(this._z=Math.asin(-y(O,-1,1)),Math.abs(O)<.99999?(this._x=Math.atan2(Oe,re),this._y=Math.atan2(B,M)):(this._x=Math.atan2(-me,Fe),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+d),this._order=d,!1!==g&&this.onChangeCallback(),this},setFromQuaternion:function(){var a;return function(g,y,x){return void 0===a&&(a=new Vs),a.makeRotationFromQuaternion(g),this.setFromRotationMatrix(a,y,x)}}(),setFromVector3:function(a,d){return this.set(a.x,a.y,a.z,d||this._order)},reorder:function(){var a=new oc;return function(g){return a.setFromEuler(this),this.setFromQuaternion(a,g)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this.onChangeCallback(),this},toArray:function(a,d){return void 0===a&&(a=[]),void 0===d&&(d=0),a[d]=this._x,a[d+1]=this._y,a[d+2]=this._z,a[d+3]=this._order,a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new an(this._x,this._y,this._z)},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},Jp.prototype={constructor:Jp,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!=(this.mask&a.mask)}};var fp=0;function Or(){Object.defineProperty(this,"id",{value:fp++}),this.uuid=js.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Or.DefaultUp.clone();var a=new an,d=new to,g=new oc,y=new an(1,1,1);d.onChange(function x(){g.setFromEuler(d,!1)}),g.onChange(function M(){d.setFromQuaternion(g,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:d},quaternion:{enumerable:!0,value:g},scale:{enumerable:!0,value:y},modelViewMatrix:{value:new Vs},normalMatrix:{value:new Pt}}),this.matrix=new Vs,this.matrixWorld=new Vs,this.matrixAutoUpdate=Or.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Jp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function lc(a,d){this.start=void 0!==a?a:new an,this.end=void 0!==d?d:new an}function Xa(a,d,g){this.a=void 0!==a?a:new an,this.b=void 0!==d?d:new an,this.c=void 0!==g?g:new an}function la(a,d,g,y,x,M){this.a=a,this.b=d,this.c=g,this.normal=y&&y.isVector3?y:new an,this.vertexNormals=Array.isArray(y)?y:[],this.color=x&&x.isColor?x:new ps,this.vertexColors=Array.isArray(x)?x:[],this.materialIndex=void 0!==M?M:0}function pl(a){bo.call(this),this.type="MeshBasicMaterial",this.color=new ps(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=We,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(a)}function Tr(a,d,g){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=js.generateUUID(),this.array=a,this.itemSize=d,this.count=void 0!==a?a.length/d:0,this.normalized=!0===g,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Qd(a,d){Tr.call(this,new Int8Array(a),d)}function Hl(a,d){Tr.call(this,new Uint8Array(a),d)}function Zh(a,d){Tr.call(this,new Uint8ClampedArray(a),d)}function pp(a,d){Tr.call(this,new Int16Array(a),d)}function Qh(a,d){Tr.call(this,new Uint16Array(a),d)}function Lf(a,d){Tr.call(this,new Int32Array(a),d)}function sd(a,d){Tr.call(this,new Uint32Array(a),d)}function Ms(a,d){Tr.call(this,new Float32Array(a),d)}function iu(a,d){Tr.call(this,new Float64Array(a),d)}function jg(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Qs(){Object.defineProperty(this,"id",{value:$g()}),this.uuid=js.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Or.DefaultUp=new an(0,1,0),Or.DefaultMatrixAutoUpdate=!0,Object.assign(Or.prototype,Y.prototype,{isObject3D:!0,applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,d){this.quaternion.setFromAxisAngle(a,d)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new oc;return function(g,y){return a.setFromAxisAngle(g,y),this.quaternion.multiply(a),this}}(),rotateX:function(){var a=new an(1,0,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateY:function(){var a=new an(0,1,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateZ:function(){var a=new an(0,0,1);return function(g){return this.rotateOnAxis(a,g)}}(),translateOnAxis:function(){var a=new an;return function(g,y){return a.copy(g).applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(y)),this}}(),translateX:function(){var a=new an(1,0,0);return function(g){return this.translateOnAxis(a,g)}}(),translateY:function(){var a=new an(0,1,0);return function(g){return this.translateOnAxis(a,g)}}(),translateZ:function(){var a=new an(0,0,1);return function(g){return this.translateOnAxis(a,g)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new Vs;return function(g){return g.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new Vs;return function(g){a.lookAt(g,this.position,this.up),this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(arguments.length>1){for(var d=0;d<arguments.length;d++)this.add(arguments[d]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)},remove:function(a){if(arguments.length>1)for(var d=0;d<arguments.length;d++)this.remove(arguments[d]);var g=this.children.indexOf(a);-1!==g&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(g,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,d){if(this[a]===d)return this;for(var g=0,y=this.children.length;g<y;g++){var M=this.children[g].getObjectByProperty(a,d);if(void 0!==M)return M}},getWorldPosition:function(a){var d=a||new an;return this.updateMatrixWorld(!0),d.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new an,d=new an;return function(y){var x=y||new oc;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,x,d),x}}(),getWorldRotation:function(){var a=new oc;return function(g){var y=g||new to;return this.getWorldQuaternion(a),y.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new an,d=new oc;return function(y){var x=y||new an;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,d,x),x}}(),getWorldDirection:function(){var a=new oc;return function(g){var y=g||new an;return this.getWorldQuaternion(a),y.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var d=this.children,g=0,y=d.length;g<y;g++)d[g].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var d=this.children,g=0,y=d.length;g<y;g++)d[g].traverseVisible(a)}},traverseAncestors:function(a){var d=this.parent;null!==d&&(a(d),d.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var d=this.children,g=0,y=d.length;g<y;g++)d[g].updateMatrixWorld(a)},toJSON:function(a){var d=void 0===a||""===a,g={};d&&(a={geometries:{},materials:{},textures:{},images:{}},g.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var y={};if(y.uuid=this.uuid,y.type=this.type,""!==this.name&&(y.name=this.name),"{}"!==JSON.stringify(this.userData)&&(y.userData=this.userData),!0===this.castShadow&&(y.castShadow=!0),!0===this.receiveShadow&&(y.receiveShadow=!0),!1===this.visible&&(y.visible=!1),y.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),y.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),y.material=this.material.uuid),this.children.length>0){y.children=[];for(var x=0;x<this.children.length;x++)y.children.push(this.children[x].toJSON(a).object)}if(d){var M=re(a.geometries),O=re(a.materials),B=re(a.textures),ae=re(a.images);M.length>0&&(g.geometries=M),O.length>0&&(g.materials=O),B.length>0&&(g.textures=B),ae.length>0&&(g.images=ae)}return g.object=y,g;function re(me){var _e=[];for(var Oe in me){var Fe=me[Oe];delete Fe.metadata,_e.push(Fe)}return _e}},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,d){if(void 0===d&&(d=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===d)for(var g=0;g<a.children.length;g++)this.add(a.children[g].clone());return this}}),lc.prototype={constructor:lc,set:function(a,d){return this.start.copy(a),this.end.copy(d),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.start.copy(a.start),this.end.copy(a.end),this},getCenter:function(a){return(a||new an).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new an).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,d){var g=d||new an;return this.delta(g).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new an,d=new an;return function(y,x){a.subVectors(y,this.start),d.subVectors(this.end,this.start);var M=d.dot(d),B=d.dot(a)/M;return x&&(B=js.clamp(B,0,1)),B}}(),closestPointToPoint:function(a,d,g){var y=this.closestPointToPointParameter(a,d),x=g||new an;return this.delta(x).multiplyScalar(y).add(this.start)},applyMatrix4:function(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}},Xa.normal=function(){var a=new an;return function(g,y,x,M){var O=M||new an;O.subVectors(x,y),a.subVectors(g,y),O.cross(a);var B=O.lengthSq();return B>0?O.multiplyScalar(1/Math.sqrt(B)):O.set(0,0,0)}}(),Xa.barycoordFromPoint=function(){var a=new an,d=new an,g=new an;return function(x,M,O,B,ae){a.subVectors(B,M),d.subVectors(O,M),g.subVectors(x,M);var re=a.dot(a),me=a.dot(d),_e=a.dot(g),Oe=d.dot(d),Fe=d.dot(g),Ne=re*Oe-me*me,ut=ae||new an;if(0===Ne)return ut.set(-2,-1,-1);var ct=1/Ne,rt=(Oe*_e-me*Fe)*ct,At=(re*Fe-me*_e)*ct;return ut.set(1-rt-At,At,rt)}}(),Xa.containsPoint=function(){var a=new an;return function(g,y,x,M){var O=Xa.barycoordFromPoint(g,y,x,M,a);return O.x>=0&&O.y>=0&&O.x+O.y<=1}}(),Xa.prototype={constructor:Xa,set:function(a,d,g){return this.a.copy(a),this.b.copy(d),this.c.copy(g),this},setFromPointsAndIndices:function(a,d,g,y){return this.a.copy(a[d]),this.b.copy(a[g]),this.c.copy(a[y]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},area:function(){var a=new an,d=new an;return function(){return a.subVectors(this.c,this.b),d.subVectors(this.a,this.b),.5*a.cross(d).length()}}(),midpoint:function(a){return(a||new an).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Xa.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new bt).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,d){return Xa.barycoordFromPoint(a,this.a,this.b,this.c,d)},containsPoint:function(a){return Xa.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a,d,g,y;return function(M,O){void 0===a&&(a=new bt,d=[new lc,new lc,new lc],g=new an,y=new an);var B=O||new an,ae=1/0;if(a.setFromCoplanarPoints(this.a,this.b,this.c),a.projectPoint(M,g),!0===this.containsPoint(g))B.copy(g);else{d[0].set(this.a,this.b),d[1].set(this.b,this.c),d[2].set(this.c,this.a);for(var re=0;re<d.length;re++){d[re].closestPointToPoint(g,!0,y);var me=g.distanceToSquared(y);me<ae&&(ae=me,B.copy(y))}}return B}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}},la.prototype={constructor:la,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a,this.b=a.b,this.c=a.c,this.normal.copy(a.normal),this.color.copy(a.color),this.materialIndex=a.materialIndex;for(var d=0,g=a.vertexNormals.length;d<g;d++)this.vertexNormals[d]=a.vertexNormals[d].clone();for(d=0,g=a.vertexColors.length;d<g;d++)this.vertexColors[d]=a.vertexColors[d].clone();return this}},(pl.prototype=Object.create(bo.prototype)).constructor=pl,pl.prototype.isMeshBasicMaterial=!0,pl.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this},Tr.prototype={constructor:Tr,isBufferAttribute:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.dynamic=a.dynamic,this},copyAt:function(a,d,g){a*=this.itemSize,g*=d.itemSize;for(var y=0,x=this.itemSize;y<x;y++)this.array[a+y]=d.array[g+y];return this},copyArray:function(a){return this.array.set(a),this},copyColorsArray:function(a){for(var d=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",y),M=new ps),d[g++]=M.r,d[g++]=M.g,d[g++]=M.b}return this},copyIndicesArray:function(a){for(var d=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];d[g++]=M.a,d[g++]=M.b,d[g++]=M.c}return this},copyVector2sArray:function(a){for(var d=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",y),M=new hr),d[g++]=M.x,d[g++]=M.y}return this},copyVector3sArray:function(a){for(var d=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",y),M=new an),d[g++]=M.x,d[g++]=M.y,d[g++]=M.z}return this},copyVector4sArray:function(a){for(var d=this.array,g=0,y=0,x=a.length;y<x;y++){var M=a[y];void 0===M&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",y),M=new ba),d[g++]=M.x,d[g++]=M.y,d[g++]=M.z,d[g++]=M.w}return this},set:function(a,d){return void 0===d&&(d=0),this.array.set(a,d),this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,d){return this.array[a*this.itemSize]=d,this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,d){return this.array[a*this.itemSize+1]=d,this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,d){return this.array[a*this.itemSize+2]=d,this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,d){return this.array[a*this.itemSize+3]=d,this},setXY:function(a,d,g){return this.array[0+(a*=this.itemSize)]=d,this.array[a+1]=g,this},setXYZ:function(a,d,g,y){return this.array[0+(a*=this.itemSize)]=d,this.array[a+1]=g,this.array[a+2]=y,this},setXYZW:function(a,d,g,y,x){return this.array[0+(a*=this.itemSize)]=d,this.array[a+1]=g,this.array[a+2]=y,this.array[a+3]=x,this},onUpload:function(a){return this.onUploadCallback=a,this},clone:function(){return(new this.constructor).copy(this)}},(Qd.prototype=Object.create(Tr.prototype)).constructor=Qd,(Hl.prototype=Object.create(Tr.prototype)).constructor=Hl,(Zh.prototype=Object.create(Tr.prototype)).constructor=Zh,(pp.prototype=Object.create(Tr.prototype)).constructor=pp,(Qh.prototype=Object.create(Tr.prototype)).constructor=Qh,(Lf.prototype=Object.create(Tr.prototype)).constructor=Lf,(sd.prototype=Object.create(Tr.prototype)).constructor=sd,(Ms.prototype=Object.create(Tr.prototype)).constructor=Ms,(iu.prototype=Object.create(Tr.prototype)).constructor=iu,Object.assign(jg.prototype,{computeGroups:function(a){for(var d,g=[],y=void 0,x=a.faces,M=0;M<x.length;M++){var O=x[M];O.materialIndex!==y&&(y=O.materialIndex,void 0!==d&&(d.count=3*M-d.start,g.push(d)),d={start:3*M,materialIndex:y})}void 0!==d&&(d.count=3*M-d.start,g.push(d)),this.groups=g},fromGeometry:function(a){var ae,d=a.faces,g=a.vertices,y=a.faceVertexUvs,x=y[0]&&y[0].length>0,M=y[1]&&y[1].length>0,O=a.morphTargets,B=O.length;if(B>0){ae=[];for(var re=0;re<B;re++)ae[re]=[];this.morphTargets.position=ae}var Oe,me=a.morphNormals,_e=me.length;if(_e>0){for(Oe=[],re=0;re<_e;re++)Oe[re]=[];this.morphTargets.normal=Oe}var Fe=a.skinIndices,Ne=a.skinWeights,ut=Fe.length===g.length,ct=Ne.length===g.length;for(re=0;re<d.length;re++){var rt=d[re];this.vertices.push(g[rt.a],g[rt.b],g[rt.c]);var At=rt.vertexNormals;if(3===At.length)this.normals.push(At[0],At[1],At[2]);else{var St=rt.normal;this.normals.push(St,St,St)}var Cn,tn=rt.vertexColors;if(3===tn.length)this.colors.push(tn[0],tn[1],tn[2]);else{var $t=rt.color;this.colors.push($t,$t,$t)}!0===x&&(void 0!==(Cn=y[0][re])?this.uvs.push(Cn[0],Cn[1],Cn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",re),this.uvs.push(new hr,new hr,new hr))),!0===M&&(void 0!==(Cn=y[1][re])?this.uvs2.push(Cn[0],Cn[1],Cn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",re),this.uvs2.push(new hr,new hr,new hr)));for(var pn=0;pn<B;pn++){var ln=O[pn].vertices;ae[pn].push(ln[rt.a],ln[rt.b],ln[rt.c])}for(pn=0;pn<_e;pn++){var In=me[pn].vertexNormals[re];Oe[pn].push(In.a,In.b,In.c)}ut&&this.skinIndices.push(Fe[rt.a],Fe[rt.b],Fe[rt.c]),ct&&this.skinWeights.push(Ne[rt.a],Ne[rt.b],Ne[rt.c])}return this.computeGroups(a),this.verticesNeedUpdate=a.verticesNeedUpdate,this.normalsNeedUpdate=a.normalsNeedUpdate,this.colorsNeedUpdate=a.colorsNeedUpdate,this.uvsNeedUpdate=a.uvsNeedUpdate,this.groupsNeedUpdate=a.groupsNeedUpdate,this}}),Object.assign(Qs.prototype,Y.prototype,{isGeometry:!0,applyMatrix:function(a){for(var d=(new Pt).getNormalMatrix(a),g=0,y=this.vertices.length;g<y;g++)this.vertices[g].applyMatrix4(a);for(g=0,y=this.faces.length;g<y;g++){var M=this.faces[g];M.normal.applyMatrix3(d).normalize();for(var O=0,B=M.vertexNormals.length;O<B;O++)M.vertexNormals[O].applyMatrix3(d).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new Vs),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new Vs),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new Vs),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,x){return void 0===a&&(a=new Vs),a.makeTranslation(g,y,x),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,x){return void 0===a&&(a=new Vs),a.makeScale(g,y,x),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new Or),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){var d=this,g=null!==a.index?a.index.array:void 0,y=a.attributes,x=y.position.array,M=void 0!==y.normal?y.normal.array:void 0,O=void 0!==y.color?y.color.array:void 0,B=void 0!==y.uv?y.uv.array:void 0,ae=void 0!==y.uv2?y.uv2.array:void 0;void 0!==ae&&(this.faceVertexUvs[1]=[]);for(var re=[],me=[],_e=[],Oe=0,Fe=0;Oe<x.length;Oe+=3,Fe+=2)d.vertices.push(new an(x[Oe],x[Oe+1],x[Oe+2])),void 0!==M&&re.push(new an(M[Oe],M[Oe+1],M[Oe+2])),void 0!==O&&d.colors.push(new ps(O[Oe],O[Oe+1],O[Oe+2])),void 0!==B&&me.push(new hr(B[Fe],B[Fe+1])),void 0!==ae&&_e.push(new hr(ae[Fe],ae[Fe+1]));function Ne(tn,$t,Cn,pn){var $n=new la(tn,$t,Cn,void 0!==M?[re[tn].clone(),re[$t].clone(),re[Cn].clone()]:[],void 0!==O?[d.colors[tn].clone(),d.colors[$t].clone(),d.colors[Cn].clone()]:[],pn);d.faces.push($n),void 0!==B&&d.faceVertexUvs[0].push([me[tn].clone(),me[$t].clone(),me[Cn].clone()]),void 0!==ae&&d.faceVertexUvs[1].push([_e[tn].clone(),_e[$t].clone(),_e[Cn].clone()])}if(void 0!==g){var ut=a.groups;if(ut.length>0)for(Oe=0;Oe<ut.length;Oe++)for(var ct=ut[Oe],rt=ct.start,St=(Fe=rt,rt+ct.count);Fe<St;Fe+=3)Ne(g[Fe],g[Fe+1],g[Fe+2],ct.materialIndex);else for(Oe=0;Oe<g.length;Oe+=3)Ne(g[Oe],g[Oe+1],g[Oe+2])}else for(Oe=0;Oe<x.length/3;Oe+=3)Ne(Oe,Oe+1,Oe+2);return this.computeFaceNormals(),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,d=this.boundingSphere.radius,g=0===d?1:1/d,y=new Vs;return y.set(g,0,0,-g*a.x,0,g,0,-g*a.y,0,0,g,-g*a.z,0,0,0,1),this.applyMatrix(y),this},computeFaceNormals:function(){for(var a=new an,d=new an,g=0,y=this.faces.length;g<y;g++){var x=this.faces[g],M=this.vertices[x.a],O=this.vertices[x.b];a.subVectors(this.vertices[x.c],O),d.subVectors(M,O),a.cross(d),a.normalize(),x.normal.copy(a)}},computeVertexNormals:function(a){var d,g,y,x,M,O;for(void 0===a&&(a=!0),O=new Array(this.vertices.length),d=0,g=this.vertices.length;d<g;d++)O[d]=new an;if(a){var B,ae,me=new an,_e=new an;for(y=0,x=this.faces.length;y<x;y++)B=this.vertices[(M=this.faces[y]).a],me.subVectors(this.vertices[M.c],ae=this.vertices[M.b]),_e.subVectors(B,ae),me.cross(_e),O[M.a].add(me),O[M.b].add(me),O[M.c].add(me)}else for(this.computeFaceNormals(),y=0,x=this.faces.length;y<x;y++)O[(M=this.faces[y]).a].add(M.normal),O[M.b].add(M.normal),O[M.c].add(M.normal);for(d=0,g=this.vertices.length;d<g;d++)O[d].normalize();for(y=0,x=this.faces.length;y<x;y++){var Oe=(M=this.faces[y]).vertexNormals;3===Oe.length?(Oe[0].copy(O[M.a]),Oe[1].copy(O[M.b]),Oe[2].copy(O[M.c])):(Oe[0]=O[M.a].clone(),Oe[1]=O[M.b].clone(),Oe[2]=O[M.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,d,g;for(this.computeFaceNormals(),a=0,d=this.faces.length;a<d;a++){var y=(g=this.faces[a]).vertexNormals;3===y.length?(y[0].copy(g.normal),y[1].copy(g.normal),y[2].copy(g.normal)):(y[0]=g.normal.clone(),y[1]=g.normal.clone(),y[2]=g.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,d,g,y,x;for(g=0,y=this.faces.length;g<y;g++)for((x=this.faces[g]).__originalFaceNormal?x.__originalFaceNormal.copy(x.normal):x.__originalFaceNormal=x.normal.clone(),x.__originalVertexNormals||(x.__originalVertexNormals=[]),a=0,d=x.vertexNormals.length;a<d;a++)x.__originalVertexNormals[a]?x.__originalVertexNormals[a].copy(x.vertexNormals[a]):x.__originalVertexNormals[a]=x.vertexNormals[a].clone();var M=new Qs;for(M.faces=this.faces,a=0,d=this.morphTargets.length;a<d;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];var O=this.morphNormals[a].faceNormals,B=this.morphNormals[a].vertexNormals;for(g=0,y=this.faces.length;g<y;g++)re=new an,me={a:new an,b:new an,c:new an},O.push(re),B.push(me)}var re,me,ae=this.morphNormals[a];for(M.vertices=this.morphTargets[a].vertices,M.computeFaceNormals(),M.computeVertexNormals(),g=0,y=this.faces.length;g<y;g++)me=ae.vertexNormals[g],(re=ae.faceNormals[g]).copy((x=this.faces[g]).normal),me.a.copy(x.vertexNormals[0]),me.b.copy(x.vertexNormals[1]),me.c.copy(x.vertexNormals[2])}for(g=0,y=this.faces.length;g<y;g++)(x=this.faces[g]).normal=x.__originalFaceNormal,x.vertexNormals=x.__originalVertexNormals},computeLineDistances:function(){for(var a=0,d=this.vertices,g=0,y=d.length;g<y;g++)g>0&&(a+=d[g].distanceTo(d[g-1])),this.lineDistances[g]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Zs),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Lt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,d,g){if(!1!==(a&&a.isGeometry)){var y,x=this.vertices.length,M=this.vertices,O=a.vertices,B=this.faces,ae=a.faces,re=this.faceVertexUvs[0],me=a.faceVertexUvs[0],_e=this.colors,Oe=a.colors;void 0===g&&(g=0),void 0!==d&&(y=(new Pt).getNormalMatrix(d));for(var Fe=0,Ne=O.length;Fe<Ne;Fe++){var ct=O[Fe].clone();void 0!==d&&ct.applyMatrix4(d),M.push(ct)}for(Fe=0,Ne=Oe.length;Fe<Ne;Fe++)_e.push(Oe[Fe].clone());for(Fe=0,Ne=ae.length;Fe<Ne;Fe++){var At,St,rt=ae[Fe],$t=rt.vertexNormals,Cn=rt.vertexColors;(At=new la(rt.a+x,rt.b+x,rt.c+x)).normal.copy(rt.normal),void 0!==y&&At.normal.applyMatrix3(y).normalize();for(var pn=0,ln=$t.length;pn<ln;pn++)St=$t[pn].clone(),void 0!==y&&St.applyMatrix3(y).normalize(),At.vertexNormals.push(St);for(At.color.copy(rt.color),pn=0,ln=Cn.length;pn<ln;pn++)At.vertexColors.push(Cn[pn].clone());At.materialIndex=rt.materialIndex+g,B.push(At)}for(Fe=0,Ne=me.length;Fe<Ne;Fe++){var In=me[Fe],$n=[];if(void 0!==In){for(pn=0,ln=In.length;pn<ln;pn++)$n.push(In[pn].clone());re.push($n)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a)},mergeMesh:function(a){!1!==(a&&a.isMesh)?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){var y,x,B,ae,re,me,_e,Oe,a={},d=[],g=[],O=Math.pow(10,4);for(B=0,ae=this.vertices.length;B<ae;B++)y=this.vertices[B],void 0===a[x=Math.round(y.x*O)+"_"+Math.round(y.y*O)+"_"+Math.round(y.z*O)]?(a[x]=B,d.push(this.vertices[B]),g[B]=d.length-1):g[B]=g[a[x]];var Fe=[];for(B=0,ae=this.faces.length;B<ae;B++){(re=this.faces[B]).a=g[re.a],re.b=g[re.b],re.c=g[re.c],me=[re.a,re.b,re.c];for(var ut=0;ut<3;ut++)if(me[ut]===me[(ut+1)%3]){Fe.push(B);break}}for(B=Fe.length-1;B>=0;B--){var ct=Fe[B];for(this.faces.splice(ct,1),_e=0,Oe=this.faceVertexUvs.length;_e<Oe;_e++)this.faceVertexUvs[_e].splice(ct,1)}var rt=this.vertices.length-d.length;return this.vertices=d,rt},sortFacesByMaterialIndex:function(){for(var a=this.faces,d=a.length,g=0;g<d;g++)a[g]._id=g;a.sort(function y(re,me){return re.materialIndex-me.materialIndex});var O,B,x=this.faceVertexUvs[0],M=this.faceVertexUvs[1];for(x&&x.length===d&&(O=[]),M&&M.length===d&&(B=[]),g=0;g<d;g++){var ae=a[g]._id;O&&O.push(x[ae]),B&&B.push(M[ae])}O&&(this.faceVertexUvs[0]=O),B&&(this.faceVertexUvs[1]=B)},toJSON:function(){var a={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var d=this.parameters;for(var g in d)void 0!==d[g]&&(a[g]=d[g]);return a}for(var y=[],x=0;x<this.vertices.length;x++){var M=this.vertices[x];y.push(M.x,M.y,M.z)}var O=[],B=[],ae={},re=[],me={},_e=[],Oe={};for(x=0;x<this.faces.length;x++){var Fe=this.faces[x],ct=void 0!==this.faceVertexUvs[0][x],rt=Fe.normal.length()>0,At=Fe.vertexNormals.length>0,St=1!==Fe.color.r||1!==Fe.color.g||1!==Fe.color.b,tn=Fe.vertexColors.length>0,$t=0;if($t=In($t,0,0),$t=In($t,1,!0),$t=In($t,2,!1),$t=In($t,3,ct),$t=In($t,4,rt),$t=In($t,5,At),$t=In($t,6,St),$t=In($t,7,tn),O.push($t),O.push(Fe.a,Fe.b,Fe.c),O.push(Fe.materialIndex),ct){var Cn=this.faceVertexUvs[0][x];O.push(Ii(Cn[0]),Ii(Cn[1]),Ii(Cn[2]))}if(rt&&O.push($n(Fe.normal)),At){var pn=Fe.vertexNormals;O.push($n(pn[0]),$n(pn[1]),$n(pn[2]))}if(St&&O.push(zi(Fe.color)),tn){var ln=Fe.vertexColors;O.push(zi(ln[0]),zi(ln[1]),zi(ln[2]))}}function In(Qt,en,si){return si?Qt|1<<en:Qt&~(1<<en)}function $n(Qt){var en=Qt.x.toString()+Qt.y.toString()+Qt.z.toString();return void 0!==ae[en]||(ae[en]=B.length/3,B.push(Qt.x,Qt.y,Qt.z)),ae[en]}function zi(Qt){var en=Qt.r.toString()+Qt.g.toString()+Qt.b.toString();return void 0!==me[en]||(me[en]=re.length,re.push(Qt.getHex())),me[en]}function Ii(Qt){var en=Qt.x.toString()+Qt.y.toString();return void 0!==Oe[en]||(Oe[en]=_e.length/2,_e.push(Qt.x,Qt.y)),Oe[en]}return a.data={},a.data.vertices=y,a.data.normals=B,re.length>0&&(a.data.colors=re),_e.length>0&&(a.data.uvs=[_e]),a.data.faces=O,a},clone:function(){return(new Qs).copy(this)},copy:function(a){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var d=a.vertices,g=0,y=d.length;g<y;g++)this.vertices.push(d[g].clone());var x=a.colors;for(g=0,y=x.length;g<y;g++)this.colors.push(x[g].clone());var M=a.faces;for(g=0,y=M.length;g<y;g++)this.faces.push(M[g].clone());for(g=0,y=a.faceVertexUvs.length;g<y;g++){var O=a.faceVertexUvs[g];void 0===this.faceVertexUvs[g]&&(this.faceVertexUvs[g]=[]);for(var B=0,ae=O.length;B<ae;B++){for(var re=O[B],me=[],_e=0,Oe=re.length;_e<Oe;_e++)me.push(re[_e].clone());this.faceVertexUvs[g].push(me)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Dv=0;function $g(){return Dv++}function Wr(){Object.defineProperty(this,"id",{value:$g()}),this.uuid=js.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Ya(a,d){Or.call(this),this.type="Mesh",this.geometry=void 0!==a?a:new Wr,this.material=void 0!==d?d:new pl({color:16777215*Math.random()}),this.drawMode=Io,this.updateMorphTargets()}function cc(a,d,g,y,x,M){Wr.call(this),this.type="BoxBufferGeometry",this.parameters={width:a,height:d,depth:g,widthSegments:y,heightSegments:x,depthSegments:M};var O=this,B=function At($t,Cn,pn){var ln=0;return ln+=($t+1)*(Cn+1)*2,(ln+=($t+1)*(pn+1)*2)+(pn+1)*(Cn+1)*2}(y=Math.floor(y)||1,x=Math.floor(x)||1,M=Math.floor(M)||1),ae=function St($t,Cn,pn){var ln=0;return ln+=$t*Cn*2,6*((ln+=$t*pn*2)+pn*Cn*2)}(y,x,M),re=new(ae>65535?Uint32Array:Uint16Array)(ae),me=new Float32Array(3*B),_e=new Float32Array(3*B),Oe=new Float32Array(2*B),Fe=0,Ne=0,ut=0,ct=0,rt=0;function tn($t,Cn,pn,ln,In,$n,zi,Ii,Qt,en,si){for(var gi=$n/Qt,Vi=zi/en,ki=$n/2,Ti=zi/2,Cr=Ii/2,Ji=Qt+1,oi=en+1,ii=0,f=0,c=new an,h=0;h<oi;h++)for(var m=h*Vi-Ti,_=0;_<Ji;_++)c[$t]=(_*gi-ki)*ln,c[Cn]=m*In,c[pn]=Cr,me[Fe]=c.x,me[Fe+1]=c.y,me[Fe+2]=c.z,c[$t]=0,c[Cn]=0,c[pn]=Ii>0?1:-1,_e[Fe]=c.x,_e[Fe+1]=c.y,_e[Fe+2]=c.z,Oe[Ne]=_/Qt,Oe[Ne+1]=1-h/en,Fe+=3,Ne+=2,ii+=1;for(h=0;h<en;h++)for(_=0;_<Qt;_++){var E=ct+_+Ji*(h+1),F=ct+(_+1)+Ji*(h+1),P=ct+(_+1)+Ji*h;re[ut]=ct+_+Ji*h,re[ut+1]=E,re[ut+2]=P,re[ut+3]=E,re[ut+4]=F,re[ut+5]=P,ut+=6,f+=6}O.addGroup(rt,f,si),rt+=f,ct+=ii}tn("z","y","x",-1,-1,g,d,a,M,x,0),tn("z","y","x",1,-1,g,d,-a,M,x,1),tn("x","z","y",1,1,a,g,d,y,M,2),tn("x","z","y",1,-1,a,g,-d,y,M,3),tn("x","y","z",1,-1,a,d,g,y,x,4),tn("x","y","z",-1,-1,a,d,-g,y,x,5),this.setIndex(new Tr(re,1)),this.addAttribute("position",new Tr(me,3)),this.addAttribute("normal",new Tr(_e,3)),this.addAttribute("uv",new Tr(Oe,2))}function Pa(a,d,g,y){Wr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:a,height:d,widthSegments:g,heightSegments:y};for(var x=a/2,M=d/2,O=Math.floor(g)||1,B=Math.floor(y)||1,ae=O+1,re=B+1,me=a/O,_e=d/B,Oe=new Float32Array(ae*re*3),Fe=new Float32Array(ae*re*3),Ne=new Float32Array(ae*re*2),ut=0,ct=0,rt=0;rt<re;rt++)for(var At=rt*_e-M,St=0;St<ae;St++)Oe[ut]=St*me-x,Oe[ut+1]=-At,Fe[ut+2]=1,Ne[ct]=St/O,Ne[ct+1]=1-rt/B,ut+=3,ct+=2;ut=0;var $t=new(Oe.length/3>65535?Uint32Array:Uint16Array)(O*B*6);for(rt=0;rt<B;rt++)for(St=0;St<O;St++){var pn=St+ae*(rt+1),ln=St+1+ae*(rt+1),In=St+1+ae*rt;$t[ut]=St+ae*rt,$t[ut+1]=pn,$t[ut+2]=In,$t[ut+3]=pn,$t[ut+4]=ln,$t[ut+5]=In,ut+=6}this.setIndex(new Tr($t,1)),this.addAttribute("position",new Tr(Oe,3)),this.addAttribute("normal",new Tr(Fe,3)),this.addAttribute("uv",new Tr(Ne,2))}function gl(){Or.call(this),this.type="Camera",this.matrixWorldInverse=new Vs,this.projectionMatrix=new Vs}function Kl(a,d,g,y){gl.call(this),this.type="PerspectiveCamera",this.fov=void 0!==a?a:50,this.zoom=1,this.near=void 0!==g?g:.1,this.far=void 0!==y?y:2e3,this.focus=10,this.aspect=void 0!==d?d:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Jh(a,d,g,y,x,M){gl.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=d,this.top=g,this.bottom=y,this.near=void 0!==x?x:.1,this.far=void 0!==M?M:2e3,this.updateProjectionMatrix()}function Bc(a,d,g){var y,M,O;return{setMode:function x(me){y=me},setIndex:function B(me){me.array instanceof Uint32Array&&d.get("OES_element_index_uint")?(M=a.UNSIGNED_INT,O=4):me.array instanceof Uint16Array?(M=a.UNSIGNED_SHORT,O=2):(M=a.UNSIGNED_BYTE,O=1)},render:function ae(me,_e){a.drawElements(y,_e,M,me*O),g.calls++,g.vertices+=_e,y===a.TRIANGLES&&(g.faces+=_e/3)},renderInstances:function re(me,_e,Oe){var Fe=d.get("ANGLE_instanced_arrays");null!==Fe?(Fe.drawElementsInstancedANGLE(y,Oe,M,_e*O,me.maxInstancedCount),g.calls++,g.vertices+=Oe*me.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=me.maxInstancedCount*Oe/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function Pf(a,d,g){var y;return{setMode:function x(B){y=B},render:function M(B,ae){a.drawArrays(y,B,ae),g.calls++,g.vertices+=ae,y===a.TRIANGLES&&(g.faces+=ae/3)},renderInstances:function O(B){var ae=d.get("ANGLE_instanced_arrays");if(null!==ae){var re=B.attributes.position,me=0;ae.drawArraysInstancedANGLE(y,0,me=re.isInterleavedBufferAttribute?re.data.count:re.count,B.maxInstancedCount),g.calls++,g.vertices+=me*B.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=B.maxInstancedCount*me/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function ml(){var a={};return{get:function(d){if(void 0!==a[d.id])return a[d.id];var g;switch(d.type){case"DirectionalLight":g={direction:new an,color:new ps,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hr};break;case"SpotLight":g={position:new an,direction:new an,color:new ps,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hr};break;case"PointLight":g={position:new an,color:new ps,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new hr};break;case"HemisphereLight":g={direction:new an,skyColor:new ps,groundColor:new ps};break;case"RectAreaLight":g={color:new ps,position:new an,halfWidth:new an,halfHeight:new an}}return a[d.id]=g,g}}}function Pv(a,d,g){var y=a.createShader(d);return a.shaderSource(y,g),a.compileShader(y),!1===a.getShaderParameter(y,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==a.getShaderInfoLog(y)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",d===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(y),function Lv(a){for(var d=a.split("\n"),g=0;g<d.length;g++)d[g]=g+1+": "+d[g];return d.join("\n")}(g)),y}Object.assign(Wr.prototype,Y.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,d){return!1===(d&&d.isBufferAttribute)&&!1===(d&&d.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(a,new Tr(arguments[1],arguments[2]))):"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(d)):(this.attributes[a]=d,this)},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){return delete this.attributes[a],this},addGroup:function(a,d,g){this.groups.push({start:a,count:d,materialIndex:void 0!==g?g:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,d){this.drawRange.start=a,this.drawRange.count=d},applyMatrix:function(a){var d=this.attributes.position;void 0!==d&&(a.applyToVector3Array(d.array),d.needsUpdate=!0);var g=this.attributes.normal;return void 0!==g&&((new Pt).getNormalMatrix(a).applyToVector3Array(g.array),g.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new Vs),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new Vs),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new Vs),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,x){return void 0===a&&(a=new Vs),a.makeTranslation(g,y,x),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,x){return void 0===a&&(a=new Vs),a.makeScale(g,y,x),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new Or),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},setFromObject:function(a){var d=a.geometry;if(a.isPoints||a.isLine){var g=new Ms(3*d.vertices.length,3),y=new Ms(3*d.colors.length,3);if(this.addAttribute("position",g.copyVector3sArray(d.vertices)),this.addAttribute("color",y.copyColorsArray(d.colors)),d.lineDistances&&d.lineDistances.length===d.vertices.length){var x=new Ms(d.lineDistances.length,1);this.addAttribute("lineDistance",x.copyArray(d.lineDistances))}null!==d.boundingSphere&&(this.boundingSphere=d.boundingSphere.clone()),null!==d.boundingBox&&(this.boundingBox=d.boundingBox.clone())}else a.isMesh&&d&&d.isGeometry&&this.fromGeometry(d);return this},updateFromObject:function(a){var y,d=a.geometry;if(a.isMesh){var g=d.__directGeometry;if(!0===d.elementsNeedUpdate&&(g=void 0,d.elementsNeedUpdate=!1),void 0===g)return this.fromGeometry(d);g.verticesNeedUpdate=d.verticesNeedUpdate,g.normalsNeedUpdate=d.normalsNeedUpdate,g.colorsNeedUpdate=d.colorsNeedUpdate,g.uvsNeedUpdate=d.uvsNeedUpdate,g.groupsNeedUpdate=d.groupsNeedUpdate,d.verticesNeedUpdate=!1,d.normalsNeedUpdate=!1,d.colorsNeedUpdate=!1,d.uvsNeedUpdate=!1,d.groupsNeedUpdate=!1,d=g}return!0===d.verticesNeedUpdate&&(void 0!==(y=this.attributes.position)&&(y.copyVector3sArray(d.vertices),y.needsUpdate=!0),d.verticesNeedUpdate=!1),!0===d.normalsNeedUpdate&&(void 0!==(y=this.attributes.normal)&&(y.copyVector3sArray(d.normals),y.needsUpdate=!0),d.normalsNeedUpdate=!1),!0===d.colorsNeedUpdate&&(void 0!==(y=this.attributes.color)&&(y.copyColorsArray(d.colors),y.needsUpdate=!0),d.colorsNeedUpdate=!1),d.uvsNeedUpdate&&(void 0!==(y=this.attributes.uv)&&(y.copyVector2sArray(d.uvs),y.needsUpdate=!0),d.uvsNeedUpdate=!1),d.lineDistancesNeedUpdate&&(void 0!==(y=this.attributes.lineDistance)&&(y.copyArray(d.lineDistances),y.needsUpdate=!0),d.lineDistancesNeedUpdate=!1),d.groupsNeedUpdate&&(d.computeGroups(a.geometry),this.groups=d.groups,d.groupsNeedUpdate=!1),this},fromGeometry:function(a){return a.__directGeometry=(new jg).fromGeometry(a),this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var d=new Float32Array(3*a.vertices.length);if(this.addAttribute("position",new Tr(d,3).copyVector3sArray(a.vertices)),a.normals.length>0){var g=new Float32Array(3*a.normals.length);this.addAttribute("normal",new Tr(g,3).copyVector3sArray(a.normals))}if(a.colors.length>0){var y=new Float32Array(3*a.colors.length);this.addAttribute("color",new Tr(y,3).copyColorsArray(a.colors))}if(a.uvs.length>0){var x=new Float32Array(2*a.uvs.length);this.addAttribute("uv",new Tr(x,2).copyVector2sArray(a.uvs))}if(a.uvs2.length>0){var M=new Float32Array(2*a.uvs2.length);this.addAttribute("uv2",new Tr(M,2).copyVector2sArray(a.uvs2))}if(a.indices.length>0){var B=new(a.vertices.length>65535?Uint32Array:Uint16Array)(3*a.indices.length);this.setIndex(new Tr(B,1).copyIndicesArray(a.indices))}for(var ae in this.groups=a.groups,a.morphTargets){for(var re=[],me=a.morphTargets[ae],_e=0,Oe=me.length;_e<Oe;_e++){var Fe=me[_e],Ne=new Ms(3*Fe.length,3);re.push(Ne.copyVector3sArray(Fe))}this.morphAttributes[ae]=re}if(a.skinIndices.length>0){var ut=new Ms(4*a.skinIndices.length,4);this.addAttribute("skinIndex",ut.copyVector4sArray(a.skinIndices))}if(a.skinWeights.length>0){var ct=new Ms(4*a.skinWeights.length,4);this.addAttribute("skinWeight",ct.copyVector4sArray(a.skinWeights))}return null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Zs);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Zs,d=new an;return function(){null===this.boundingSphere&&(this.boundingSphere=new Lt);var y=this.attributes.position;if(y){var x=this.boundingSphere.center;a.setFromBufferAttribute(y),a.getCenter(x);for(var M=0,O=0,B=y.count;O<B;O++)d.x=y.getX(O),d.y=y.getY(O),d.z=y.getZ(O),M=Math.max(M,x.distanceToSquared(d));this.boundingSphere.radius=Math.sqrt(M),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,d=this.attributes,g=this.groups;if(d.position){var y=d.position.array;if(void 0===d.normal)this.addAttribute("normal",new Tr(new Float32Array(y.length),3));else for(var x=d.normal.array,M=0,O=x.length;M<O;M++)x[M]=0;var ae,re,me,B=d.normal.array,_e=new an,Oe=new an,Fe=new an,Ne=new an,ut=new an;if(a){var ct=a.array;0===g.length&&this.addGroup(0,ct.length);for(var rt=0,At=g.length;rt<At;++rt){var St=g[rt],tn=St.start;for(M=tn,O=tn+St.count;M<O;M+=3)re=3*ct[M+1],me=3*ct[M+2],_e.fromArray(y,ae=3*ct[M+0]),Oe.fromArray(y,re),Fe.fromArray(y,me),Ne.subVectors(Fe,Oe),ut.subVectors(_e,Oe),Ne.cross(ut),B[ae]+=Ne.x,B[ae+1]+=Ne.y,B[ae+2]+=Ne.z,B[re]+=Ne.x,B[re+1]+=Ne.y,B[re+2]+=Ne.z,B[me]+=Ne.x,B[me+1]+=Ne.y,B[me+2]+=Ne.z}}else for(M=0,O=y.length;M<O;M+=9)_e.fromArray(y,M),Oe.fromArray(y,M+3),Fe.fromArray(y,M+6),Ne.subVectors(Fe,Oe),ut.subVectors(_e,Oe),Ne.cross(ut),B[M]=Ne.x,B[M+1]=Ne.y,B[M+2]=Ne.z,B[M+3]=Ne.x,B[M+4]=Ne.y,B[M+5]=Ne.z,B[M+6]=Ne.x,B[M+7]=Ne.y,B[M+8]=Ne.z;this.normalizeNormals(),d.normal.needsUpdate=!0}},merge:function(a,d){if(!1!==(a&&a.isBufferGeometry)){void 0===d&&(d=0);var g=this.attributes;for(var y in g)if(void 0!==a.attributes[y])for(var M=g[y].array,O=a.attributes[y],B=O.array,re=0,me=O.itemSize*d;re<B.length;re++,me++)M[me]=B[re];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){for(var d,g,y,x,a=this.attributes.normal.array,M=0,O=a.length;M<O;M+=3)d=a[M],g=a[M+1],y=a[M+2],x=1/Math.sqrt(d*d+g*g+y*y),a[M]*=x,a[M+1]*=x,a[M+2]*=x},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new Wr,d=this.index.array,g=this.attributes;for(var y in g){for(var x=g[y],M=x.array,O=x.itemSize,B=new M.constructor(d.length*O),ae=0,re=0,me=0,_e=d.length;me<_e;me++){ae=d[me]*O;for(var Oe=0;Oe<O;Oe++)B[re++]=M[ae++]}a.addAttribute(y,new Tr(B,O))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var d=this.parameters;for(var g in d)void 0!==d[g]&&(a[g]=d[g]);return a}a.data={attributes:{}};var y=this.index;if(null!==y){var x=Array.prototype.slice.call(y.array);a.data.index={type:y.array.constructor.name,array:x}}var M=this.attributes;for(var g in M){var O=M[g];x=Array.prototype.slice.call(O.array),a.data.attributes[g]={itemSize:O.itemSize,type:O.array.constructor.name,array:x,normalized:O.normalized}}var B=this.groups;B.length>0&&(a.data.groups=JSON.parse(JSON.stringify(B)));var ae=this.boundingSphere;return null!==ae&&(a.data.boundingSphere={center:ae.center.toArray(),radius:ae.radius}),a},clone:function(){return(new Wr).copy(this)},copy:function(a){var d=a.index;null!==d&&this.setIndex(d.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var M=a.groups,O=0,B=M.length;O<B;O++){var ae=M[O];this.addGroup(ae.start,ae.count,ae.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Wr.MaxIndex=65535,Ya.prototype=Object.assign(Object.create(Or.prototype),{constructor:Ya,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){return Or.prototype.copy.call(this,a),this.drawMode=a.drawMode,this},updateMorphTargets:function(){var a=this.geometry.morphTargets;if(void 0!==a&&a.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var d=0,g=a.length;d<g;d++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[a[d].name]=d}},raycast:function(){var a=new Vs,d=new La,g=new Lt,y=new an,x=new an,M=new an,O=new an,B=new an,ae=new an,re=new hr,me=new hr,_e=new hr,Oe=new an,Fe=new an,Ne=new an;function ut(At,St,tn,$t,Cn,pn,ln){return Xa.barycoordFromPoint(At,St,tn,$t,Oe),Cn.multiplyScalar(Oe.x),pn.multiplyScalar(Oe.y),ln.multiplyScalar(Oe.z),Cn.add(pn).add(ln),Cn.clone()}function ct(At,St,tn,$t,Cn,pn,ln){var $n=At.material;if(null===($n.side===z?tn.intersectTriangle(pn,Cn,$t,!0,ln):tn.intersectTriangle($t,Cn,pn,$n.side!==ce,ln)))return null;Ne.copy(ln),Ne.applyMatrix4(At.matrixWorld);var zi=St.ray.origin.distanceTo(Ne);return zi<St.near||zi>St.far?null:{distance:zi,point:Ne.clone(),object:At}}function rt(At,St,tn,$t,Cn,pn,ln,In){y.fromArray($t,3*pn),x.fromArray($t,3*ln),M.fromArray($t,3*In);var $n=ct(At,St,tn,y,x,M,Fe);return $n&&(Cn&&(re.fromArray(Cn,2*pn),me.fromArray(Cn,2*ln),_e.fromArray(Cn,2*In),$n.uv=ut(Fe,y,x,M,re,me,_e)),$n.face=new la(pn,ln,In,Xa.normal(y,x,M)),$n.faceIndex=pn),$n}return function(St,tn){var ln,In,$t=this.geometry,Cn=this.material,pn=this.matrixWorld;if(void 0!==Cn&&(null===$t.boundingSphere&&$t.computeBoundingSphere(),g.copy($t.boundingSphere),g.applyMatrix4(pn),!1!==St.ray.intersectsSphere(g)&&(a.getInverse(pn),d.copy(St.ray).applyMatrix4(a),null===$t.boundingBox||!1!==d.intersectsBox($t.boundingBox))))if($t.isBufferGeometry){var $n,Qt=$t.index,en=$t.attributes,si=en.position.array;if(void 0!==en.uv&&(ln=en.uv.array),null!==Qt)for(var gi=Qt.array,Vi=0,ki=gi.length;Vi<ki;Vi+=3)(In=rt(this,St,d,si,ln,$n=gi[Vi],gi[Vi+1],gi[Vi+2]))&&(In.faceIndex=Math.floor(Vi/3),tn.push(In));else for(Vi=0,ki=si.length;Vi<ki;Vi+=9)(In=rt(this,St,d,si,ln,$n=Vi/3,$n+1,$n+2))&&(In.index=$n,tn.push(In))}else if($t.isGeometry){var Ti,Cr,Ji,oi=Cn&&Cn.isMultiMaterial,ii=!0===oi?Cn.materials:null,f=$t.vertices,c=$t.faces,h=$t.faceVertexUvs[0];h.length>0&&(ln=h);for(var m=0,_=c.length;m<_;m++){var C=c[m],A=!0===oi?ii[C.materialIndex]:Cn;if(void 0!==A){if(Ti=f[C.a],Cr=f[C.b],Ji=f[C.c],!0===A.morphTargets){var E=$t.morphTargets,F=this.morphTargetInfluences;y.set(0,0,0),x.set(0,0,0),M.set(0,0,0);for(var P=0,$=E.length;P<$;P++){var Z=F[P];if(0!==Z){var he=E[P].vertices;y.addScaledVector(O.subVectors(he[C.a],Ti),Z),x.addScaledVector(B.subVectors(he[C.b],Cr),Z),M.addScaledVector(ae.subVectors(he[C.c],Ji),Z)}}y.add(Ti),x.add(Cr),M.add(Ji),Ti=y,Cr=x,Ji=M}if(In=ct(this,St,d,Ti,Cr,Ji,Fe)){if(ln){var ge=ln[m];re.copy(ge[0]),me.copy(ge[1]),_e.copy(ge[2]),In.uv=ut(Fe,Ti,Cr,Ji,re,me,_e)}In.face=C,In.faceIndex=m,tn.push(In)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(cc.prototype=Object.create(Wr.prototype)).constructor=cc,(Pa.prototype=Object.create(Wr.prototype)).constructor=Pa,(gl.prototype=Object.create(Or.prototype)).constructor=gl,gl.prototype.isCamera=!0,gl.prototype.getWorldDirection=function(){var a=new oc;return function(g){var y=g||new an;return this.getWorldQuaternion(a),y.set(0,0,-1).applyQuaternion(a)}}(),gl.prototype.lookAt=function(){var a=new Vs;return function(g){a.lookAt(this.position,g,this.up),this.quaternion.setFromRotationMatrix(a)}}(),gl.prototype.clone=function(){return(new this.constructor).copy(this)},gl.prototype.copy=function(a){return Or.prototype.copy.call(this,a),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this},Kl.prototype=Object.assign(Object.create(gl.prototype),{constructor:Kl,isPerspectiveCamera:!0,copy:function(a){return gl.prototype.copy.call(this,a),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this},setFocalLength:function(a){var d=.5*this.getFilmHeight()/a;this.fov=2*js.RAD2DEG*Math.atan(d),this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*js.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*js.RAD2DEG*Math.atan(Math.tan(.5*js.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,d,g,y,x,M){this.aspect=a/d,this.view={fullWidth:a,fullHeight:d,offsetX:g,offsetY:y,width:x,height:M},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,d=a*Math.tan(.5*js.DEG2RAD*this.fov)/this.zoom,g=2*d,y=this.aspect*g,x=-.5*y,M=this.view;if(null!==M){var O=M.fullWidth,B=M.fullHeight;x+=M.offsetX*y/O,d-=M.offsetY*g/B,y*=M.width/O,g*=M.height/B}var ae=this.filmOffset;0!==ae&&(x+=a*ae/this.getFilmWidth()),this.projectionMatrix.makeFrustum(x,x+y,d-g,d,a,this.far)},toJSON:function(a){var d=Or.prototype.toJSON.call(this,a);return d.object.fov=this.fov,d.object.zoom=this.zoom,d.object.near=this.near,d.object.far=this.far,d.object.focus=this.focus,d.object.aspect=this.aspect,null!==this.view&&(d.object.view=Object.assign({},this.view)),d.object.filmGauge=this.filmGauge,d.object.filmOffset=this.filmOffset,d}}),Jh.prototype=Object.assign(Object.create(gl.prototype),{constructor:Jh,isOrthographicCamera:!0,copy:function(a){return gl.prototype.copy.call(this,a),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this},setViewOffset:function(a,d,g,y,x,M){this.view={fullWidth:a,fullHeight:d,offsetX:g,offsetY:y,width:x,height:M},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),d=(this.top-this.bottom)/(2*this.zoom),g=(this.right+this.left)/2,y=(this.top+this.bottom)/2,x=g-a,M=g+a,O=y+d,B=y-d;if(null!==this.view){var ae=this.zoom/(this.view.width/this.view.fullWidth),re=this.zoom/(this.view.height/this.view.fullHeight),me=(this.right-this.left)/this.view.width,_e=(this.top-this.bottom)/this.view.height;M=(x+=me*(this.view.offsetX/ae))+me*(this.view.width/ae),B=(O-=_e*(this.view.offsetY/re))-_e*(this.view.height/re)}this.projectionMatrix.makeOrthographic(x,M,O,B,this.near,this.far)},toJSON:function(a){var d=Or.prototype.toJSON.call(this,a);return d.object.zoom=this.zoom,d.object.left=this.left,d.object.right=this.right,d.object.top=this.top,d.object.bottom=this.bottom,d.object.near=this.near,d.object.far=this.far,null!==this.view&&(d.object.view=Object.assign({},this.view)),d}});var qg=0;function Xg(a){switch(a){case Qr:return["Linear","( value )"];case el:return["sRGB","( value )"];case Ei:return["RGBE","( value )"];case zs:return["RGBM","( value, 7.0 )"];case wo:return["RGBM","( value, 16.0 )"];case id:return["RGBD","( value, 256.0 )"];case Xl:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+a)}}function Rf(a,d){var g=Xg(d);return"vec4 "+a+"( vec4 value ) { return "+g[0]+"ToLinear"+g[1]+"; }"}function km(a,d){var g=Xg(d);return"vec4 "+a+"( vec4 value ) { return LinearTo"+g[0]+g[1]+"; }"}function kf(a,d){var g;switch(d){case dn:g="Linear";break;case Xn:g="Reinhard";break;case Jn:g="Uncharted2";break;case ms:g="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+d)}return"vec3 "+a+"( vec3 color ) { return "+g+"ToneMapping( color ); }"}function Of(a){return""!==a}function Ff(a,d){return a.replace(/NUM_DIR_LIGHTS/g,d.numDirLights).replace(/NUM_SPOT_LIGHTS/g,d.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,d.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,d.numPointLights).replace(/NUM_HEMI_LIGHTS/g,d.numHemiLights)}function Gl(a){return a.replace(/#include +<([\w\d.]+)>/g,function g(y,x){var M=go[x];if(void 0===M)throw new Error("Can not resolve #include <"+x+">");return Gl(M)})}function eg(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function g(y,x,M,O){for(var B="",ae=parseInt(x);ae<parseInt(M);ae++)B+=O.replace(/\[ i \]/g,"[ "+ae+" ]");return B})}function Vy(a,d,g,y){var x=a.context,M=g.extensions,O=g.defines,B=g.__webglShader.vertexShader,ae=g.__webglShader.fragmentShader,re="SHADOWMAP_TYPE_BASIC";y.shadowMapType===se?re="SHADOWMAP_TYPE_PCF":y.shadowMapType===ee&&(re="SHADOWMAP_TYPE_PCF_SOFT");var me="ENVMAP_TYPE_CUBE",_e="ENVMAP_MODE_REFLECTION",Oe="ENVMAP_BLENDING_MULTIPLY";if(y.envMap){switch(g.envMap.mapping){case os:case qs:me="ENVMAP_TYPE_CUBE";break;case fl:case Er:me="ENVMAP_TYPE_CUBE_UV";break;case Zi:case ra:me="ENVMAP_TYPE_EQUIREC";break;case Ha:me="ENVMAP_TYPE_SPHERE"}switch(g.envMap.mapping){case qs:case ra:_e="ENVMAP_MODE_REFRACTION"}switch(g.combine){case We:Oe="ENVMAP_BLENDING_MULTIPLY";break;case Ie:Oe="ENVMAP_BLENDING_MIX";break;case Me:Oe="ENVMAP_BLENDING_ADD"}}var rt,At,Fe=a.gammaFactor>0?a.gammaFactor:1,Ne=function ef(a,d,g){return[(a=a||{}).derivatives||d.envMapCubeUV||d.bumpMap||d.normalMap||d.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||d.logarithmicDepthBuffer)&&g.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&g.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||d.envMap)&&g.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Of).join("\n")}(M,y,a.extensions),ut=function Yg(a){var d=[];for(var g in a){var y=a[g];!1!==y&&d.push("#define "+g+" "+y)}return d.join("\n")}(O),ct=x.createProgram();g.isRawShaderMaterial?(rt=[ut,"\n"].filter(Of).join("\n"),At=[Ne,ut,"\n"].filter(Of).join("\n")):(rt=["precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,ut,y.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+Fe,"#define MAX_BONES "+y.maxBones,y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+_e:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.displacementMap&&y.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.flatShading?"#define FLAT_SHADED":"",y.skinning?"#define USE_SKINNING":"",y.useVertexTexture?"#define BONE_TEXTURE":"",y.morphTargets?"#define USE_MORPHTARGETS":"",y.morphNormals&&!1===y.flatShading?"#define USE_MORPHNORMALS":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+re:"",y.sizeAttenuation?"#define USE_SIZEATTENUATION":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Of).join("\n"),At=[Ne,"precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,ut,y.alphaTest?"#define ALPHATEST "+y.alphaTest:"","#define GAMMA_FACTOR "+Fe,y.useFog&&y.fog?"#define USE_FOG":"",y.useFog&&y.fogExp?"#define FOG_EXP2":"",y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+me:"",y.envMap?"#define "+_e:"",y.envMap?"#define "+Oe:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.gradientMap?"#define USE_GRADIENTMAP":"",y.flatShading?"#define FLAT_SHADED":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(y.numClippingPlanes-y.numClipIntersection),y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+re:"",y.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",y.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",y.envMap&&a.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",y.toneMapping!==Et?"#define TONE_MAPPING":"",y.toneMapping!==Et?go.tonemapping_pars_fragment:"",y.toneMapping!==Et?kf("toneMapping",y.toneMapping):"",y.outputEncoding||y.mapEncoding||y.envMapEncoding||y.emissiveMapEncoding?go.encodings_pars_fragment:"",y.mapEncoding?Rf("mapTexelToLinear",y.mapEncoding):"",y.envMapEncoding?Rf("envMapTexelToLinear",y.envMapEncoding):"",y.emissiveMapEncoding?Rf("emissiveMapTexelToLinear",y.emissiveMapEncoding):"",y.outputEncoding?km("linearToOutputTexel",y.outputEncoding):"",y.depthPacking?"#define DEPTH_PACKING "+g.depthPacking:"","\n"].filter(Of).join("\n")),B=Ff(B=Gl(B),y),ae=Ff(ae=Gl(ae),y),g.isShaderMaterial||(B=eg(B),ae=eg(ae));var tn=At+ae,$t=Pv(x,x.VERTEX_SHADER,rt+B),Cn=Pv(x,x.FRAGMENT_SHADER,tn);x.attachShader(ct,$t),x.attachShader(ct,Cn),void 0!==g.index0AttributeName?x.bindAttribLocation(ct,0,g.index0AttributeName):!0===y.morphTargets&&x.bindAttribLocation(ct,0,"position"),x.linkProgram(ct);var Ii,Qt,pn=x.getProgramInfoLog(ct),ln=x.getShaderInfoLog($t),In=x.getShaderInfoLog(Cn),$n=!0,zi=!0;return!1===x.getProgramParameter(ct,x.LINK_STATUS)?($n=!1,console.error("THREE.WebGLProgram: shader error: ",x.getError(),"gl.VALIDATE_STATUS",x.getProgramParameter(ct,x.VALIDATE_STATUS),"gl.getProgramInfoLog",pn,ln,In)):""!==pn?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",pn):(""===ln||""===In)&&(zi=!1),zi&&(this.diagnostics={runnable:$n,material:g,programLog:pn,vertexShader:{log:ln,prefix:rt},fragmentShader:{log:In,prefix:At}}),x.deleteShader($t),x.deleteShader(Cn),this.getUniforms=function(){return void 0===Ii&&(Ii=new xl(x,ct,a)),Ii},this.getAttributes=function(){return void 0===Qt&&(Qt=function Jd(a,d,g){for(var y={},x=a.getProgramParameter(d,a.ACTIVE_ATTRIBUTES),M=0;M<x;M++){var B=a.getActiveAttrib(d,M).name;y[B]=a.getAttribLocation(d,B)}return y}(x,ct)),Qt},this.destroy=function(){x.deleteProgram(ct),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=qg++,this.code=d,this.usedTimes=1,this.program=ct,this.vertexShader=$t,this.fragmentShader=Cn,this}function Uy(a,d){var g=[],y={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},x=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];function O(B,ae){var re;return B?B.isTexture?re=B.encoding:B.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),re=B.texture.encoding):re=Qr,re===Qr&&ae&&(re=Xl),re}this.getParameters=function(B,ae,re,me,_e,Oe){var Fe=y[B.type],Ne=function M(B){if(d.floatVertexTextures&&B&&B.skeleton&&B.skeleton.useVertexTexture)return 1024;var me=Math.floor((d.maxVertexUniforms-20)/4);return void 0!==B&&B&&B.isSkinnedMesh&&(me=Math.min(B.skeleton.bones.length,me))<B.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+B.skeleton.bones.length+", this GPU supports just "+me+" (try OpenGL instead of ANGLE)"),me}(Oe),ut=a.getPrecision();null!==B.precision&&(ut=d.getMaxPrecision(B.precision))!==B.precision&&console.warn("THREE.WebGLProgram.getParameters:",B.precision,"not supported, using",ut,"instead.");var ct=a.getCurrentRenderTarget();return{shaderID:Fe,precision:ut,supportsVertexTextures:d.vertexTextures,outputEncoding:O(ct?ct.texture:null,a.gammaOutput),map:!!B.map,mapEncoding:O(B.map,a.gammaInput),envMap:!!B.envMap,envMapMode:B.envMap&&B.envMap.mapping,envMapEncoding:O(B.envMap,a.gammaInput),envMapCubeUV:!!B.envMap&&(B.envMap.mapping===fl||B.envMap.mapping===Er),lightMap:!!B.lightMap,aoMap:!!B.aoMap,emissiveMap:!!B.emissiveMap,emissiveMapEncoding:O(B.emissiveMap,a.gammaInput),bumpMap:!!B.bumpMap,normalMap:!!B.normalMap,displacementMap:!!B.displacementMap,roughnessMap:!!B.roughnessMap,metalnessMap:!!B.metalnessMap,specularMap:!!B.specularMap,alphaMap:!!B.alphaMap,gradientMap:!!B.gradientMap,combine:B.combine,vertexColors:B.vertexColors,fog:!!re,useFog:B.fog,fogExp:re&&re.isFogExp2,flatShading:B.shading===Ce,sizeAttenuation:B.sizeAttenuation,logarithmicDepthBuffer:d.logarithmicDepthBuffer,skinning:B.skinning,maxBones:Ne,useVertexTexture:d.floatVertexTextures&&Oe&&Oe.skeleton&&Oe.skeleton.useVertexTexture,morphTargets:B.morphTargets,morphNormals:B.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:ae.directional.length,numPointLights:ae.point.length,numSpotLights:ae.spot.length,numRectAreaLights:ae.rectArea.length,numHemiLights:ae.hemi.length,numClippingPlanes:me,numClipIntersection:_e,shadowMapEnabled:a.shadowMap.enabled&&Oe.receiveShadow&&ae.shadows.length>0,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:B.premultipliedAlpha,alphaTest:B.alphaTest,doubleSided:B.side===ce,flipSided:B.side===z,depthPacking:void 0!==B.depthPacking&&B.depthPacking}},this.getProgramCode=function(B,ae){var re=[];if(ae.shaderID?re.push(ae.shaderID):(re.push(B.fragmentShader),re.push(B.vertexShader)),void 0!==B.defines)for(var me in B.defines)re.push(me),re.push(B.defines[me]);for(var _e=0;_e<x.length;_e++)re.push(ae[x[_e]]);return re.join()},this.acquireProgram=function(B,ae,re){for(var me,_e=0,Oe=g.length;_e<Oe;_e++){var Fe=g[_e];if(Fe.code===re){++(me=Fe).usedTimes;break}}return void 0===me&&(me=new Vy(a,re,B,ae),g.push(me)),me},this.releaseProgram=function(B){if(0==--B.usedTimes){var ae=g.indexOf(B);g[ae]=g[g.length-1],g.pop(),B.destroy()}},this.programs=g}function tf(a,d,g){var y={};function x(re){var me=re.target,_e=y[me.id];null!==_e.index&&O(_e.index),function B(re){for(var me in re)O(re[me])}(_e.attributes),me.removeEventListener("dispose",x),delete y[me.id];var Oe=d.get(me);Oe.wireframe&&O(Oe.wireframe),d.delete(me);var Fe=d.get(_e);Fe.wireframe&&O(Fe.wireframe),d.delete(_e),g.memory.geometries--}function O(re){var me=function M(re){return re.isInterleavedBufferAttribute?d.get(re.data).__webglBuffer:d.get(re).__webglBuffer}(re);void 0!==me&&(a.deleteBuffer(me),function ae(re){d.delete(re.isInterleavedBufferAttribute?re.data:re)}(re))}return{get:function(re){var _e,me=re.geometry;return void 0!==y[me.id]?y[me.id]:(me.addEventListener("dispose",x),me.isBufferGeometry?_e=me:me.isGeometry&&(void 0===me._bufferGeometry&&(me._bufferGeometry=(new Wr).setFromObject(re)),_e=me._bufferGeometry),y[me.id]=_e,g.memory.geometries++,_e)}}}function Ch(a,d,g){var y=new tf(a,d,g);function M(_e,Oe){var Fe=_e.isInterleavedBufferAttribute?_e.data:_e,Ne=d.get(Fe);void 0===Ne.__webglBuffer?function O(_e,Oe,Fe){_e.__webglBuffer=a.createBuffer(),a.bindBuffer(Fe,_e.__webglBuffer),a.bufferData(Fe,Oe.array,Oe.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW);var ut=a.FLOAT,ct=Oe.array;ct instanceof Float32Array?ut=a.FLOAT:ct instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):ct instanceof Uint16Array?ut=a.UNSIGNED_SHORT:ct instanceof Int16Array?ut=a.SHORT:ct instanceof Uint32Array?ut=a.UNSIGNED_INT:ct instanceof Int32Array?ut=a.INT:ct instanceof Int8Array?ut=a.BYTE:ct instanceof Uint8Array&&(ut=a.UNSIGNED_BYTE),_e.bytesPerElement=ct.BYTES_PER_ELEMENT,_e.type=ut,_e.version=Oe.version,Oe.onUploadCallback()}(Ne,Fe,Oe):Ne.version!==Fe.version&&function B(_e,Oe,Fe){a.bindBuffer(Fe,_e.__webglBuffer),!1===Oe.dynamic?a.bufferData(Fe,Oe.array,a.STATIC_DRAW):-1===Oe.updateRange.count?a.bufferSubData(Fe,0,Oe.array):0===Oe.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(a.bufferSubData(Fe,Oe.updateRange.offset*Oe.array.BYTES_PER_ELEMENT,Oe.array.subarray(Oe.updateRange.offset,Oe.updateRange.offset+Oe.updateRange.count)),Oe.updateRange.count=0),_e.version=Oe.version}(Ne,Fe,Oe)}return{getAttributeBuffer:function ae(_e){return _e.isInterleavedBufferAttribute?d.get(_e.data).__webglBuffer:d.get(_e).__webglBuffer},getAttributeProperties:function re(_e){return d.get(_e.isInterleavedBufferAttribute?_e.data:_e)},getWireframeAttribute:function me(_e){var Oe=d.get(_e);if(void 0!==Oe.wireframe)return Oe.wireframe;var At,Fe=[],Ne=_e.index,ut=_e.attributes,ct=ut.position;if(null!==Ne)for(var St=0,tn=(At=Ne.array).length;St<tn;St+=3)Fe.push($t=At[St+0],Cn=At[St+1],Cn,pn=At[St+2],pn,$t);else for(St=0,tn=(At=ut.position.array).length/3-1;St<tn;St+=3){var $t,Cn,pn;Fe.push($t=St+0,Cn=St+1,Cn,pn=St+2,pn,$t)}var In=new Tr(new(ct.count>65535?Uint32Array:Uint16Array)(Fe),1);return M(In,a.ELEMENT_ARRAY_BUFFER),Oe.wireframe=In,In},update:function x(_e){var Oe=y.get(_e);_e.geometry.isGeometry&&Oe.updateFromObject(_e);var Fe=Oe.index,Ne=Oe.attributes;for(var ut in null!==Fe&&M(Fe,a.ELEMENT_ARRAY_BUFFER),Ne)M(Ne[ut],a.ARRAY_BUFFER);var ct=Oe.morphAttributes;for(var ut in ct)for(var rt=ct[ut],At=0,St=rt.length;At<St;At++)M(rt[At],a.ARRAY_BUFFER);return Oe}}}function Rv(a,d,g,y,x,M,O){var B=O.memory,ae=typeof WebGL2RenderingContext<"u"&&a instanceof WebGL2RenderingContext;function re(Qt,en){if(Qt.width>en||Qt.height>en){var si=en/Math.max(Qt.width,Qt.height),gi=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return gi.width=Math.floor(Qt.width*si),gi.height=Math.floor(Qt.height*si),gi.getContext("2d").drawImage(Qt,0,0,Qt.width,Qt.height,0,0,gi.width,gi.height),console.warn("THREE.WebGLRenderer: image is too big ("+Qt.width+"x"+Qt.height+"). Resized to "+gi.width+"x"+gi.height,Qt),gi}return Qt}function me(Qt){return js.isPowerOfTwo(Qt.width)&&js.isPowerOfTwo(Qt.height)}function Fe(Qt){return Qt===Go||Qt===Rt||Qt===fn?a.NEAREST:a.LINEAR}function Ne(Qt){var en=Qt.target;en.removeEventListener("dispose",Ne),function ct(Qt){var en=y.get(Qt);if(Qt.image&&en.__image__webglTextureCube)a.deleteTexture(en.__image__webglTextureCube);else{if(void 0===en.__webglInit)return;a.deleteTexture(en.__webglTexture)}y.delete(Qt)}(en),B.textures--}function ut(Qt){var en=Qt.target;en.removeEventListener("dispose",ut),function rt(Qt){var en=y.get(Qt),si=y.get(Qt.texture);if(Qt){if(void 0!==si.__webglTexture&&a.deleteTexture(si.__webglTexture),Qt.depthTexture&&Qt.depthTexture.dispose(),Qt.isWebGLRenderTargetCube)for(var gi=0;gi<6;gi++)a.deleteFramebuffer(en.__webglFramebuffer[gi]),en.__webglDepthbuffer&&a.deleteRenderbuffer(en.__webglDepthbuffer[gi]);else a.deleteFramebuffer(en.__webglFramebuffer),en.__webglDepthbuffer&&a.deleteRenderbuffer(en.__webglDepthbuffer);y.delete(Qt.texture),y.delete(Qt)}}(en),B.textures--}function At(Qt,en){var si=y.get(Qt);if(Qt.version>0&&si.__version!==Qt.version){var gi=Qt.image;if(void 0===gi)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",Qt);else{if(!1!==gi.complete)return void function Cn(Qt,en,si){void 0===Qt.__webglInit&&(Qt.__webglInit=!0,en.addEventListener("dispose",Ne),Qt.__webglTexture=a.createTexture(),B.textures++),g.activeTexture(a.TEXTURE0+si),g.bindTexture(a.TEXTURE_2D,Qt.__webglTexture),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,en.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,en.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,en.unpackAlignment);var gi=re(en.image,x.maxTextureSize);(function Oe(Qt){return Qt.wrapS!==Sa||Qt.wrapT!==Sa||Qt.minFilter!==Go&&Qt.minFilter!==gn})(en)&&!1===me(gi)&&(gi=function _e(Qt){if(Qt instanceof HTMLImageElement||Qt instanceof HTMLCanvasElement){var en=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return en.width=js.nearestPowerOfTwo(Qt.width),en.height=js.nearestPowerOfTwo(Qt.height),en.getContext("2d").drawImage(Qt,0,0,en.width,en.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+Qt.width+"x"+Qt.height+"). Resized to "+en.width+"x"+en.height,Qt),en}return Qt}(gi));var Vi=me(gi),ki=M(en.format),Ti=M(en.type);$t(a.TEXTURE_2D,en,Vi);var Cr,Ji=en.mipmaps;if(en.isDepthTexture){var oi=a.DEPTH_COMPONENT;if(en.type===Ss){if(!ae)throw new Error("Float Depth Texture only supported in WebGL2.0");oi=a.DEPTH_COMPONENT32F}else ae&&(oi=a.DEPTH_COMPONENT16);en.format===dt&&oi===a.DEPTH_COMPONENT&&en.type!==hi&&en.type!==qr&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),en.type=hi,Ti=M(en.type)),en.format===et&&(oi=a.DEPTH_STENCIL,en.type!==Ga&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),en.type=Ga,Ti=M(en.type))),g.texImage2D(a.TEXTURE_2D,0,oi,gi.width,gi.height,0,ki,Ti,null)}else if(en.isDataTexture)if(Ji.length>0&&Vi){for(var ii=0,f=Ji.length;ii<f;ii++)g.texImage2D(a.TEXTURE_2D,ii,ki,(Cr=Ji[ii]).width,Cr.height,0,ki,Ti,Cr.data);en.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,ki,gi.width,gi.height,0,ki,Ti,gi.data);else if(en.isCompressedTexture)for(ii=0,f=Ji.length;ii<f;ii++)Cr=Ji[ii],en.format!==sa&&en.format!==ya?g.getCompressedTextureFormats().indexOf(ki)>-1?g.compressedTexImage2D(a.TEXTURE_2D,ii,ki,Cr.width,Cr.height,0,Cr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):g.texImage2D(a.TEXTURE_2D,ii,ki,Cr.width,Cr.height,0,ki,Ti,Cr.data);else if(Ji.length>0&&Vi){for(ii=0,f=Ji.length;ii<f;ii++)g.texImage2D(a.TEXTURE_2D,ii,ki,ki,Ti,Cr=Ji[ii]);en.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,ki,ki,Ti,gi);en.generateMipmaps&&Vi&&a.generateMipmap(a.TEXTURE_2D),Qt.__version=en.version,en.onUpdate&&en.onUpdate(en)}(si,Qt,en);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",Qt)}}g.activeTexture(a.TEXTURE0+en),g.bindTexture(a.TEXTURE_2D,si.__webglTexture)}function $t(Qt,en,si){var gi;if(si?(a.texParameteri(Qt,a.TEXTURE_WRAP_S,M(en.wrapS)),a.texParameteri(Qt,a.TEXTURE_WRAP_T,M(en.wrapT)),a.texParameteri(Qt,a.TEXTURE_MAG_FILTER,M(en.magFilter)),a.texParameteri(Qt,a.TEXTURE_MIN_FILTER,M(en.minFilter))):(a.texParameteri(Qt,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(Qt,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),(en.wrapS!==Sa||en.wrapT!==Sa)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",en),a.texParameteri(Qt,a.TEXTURE_MAG_FILTER,Fe(en.magFilter)),a.texParameteri(Qt,a.TEXTURE_MIN_FILTER,Fe(en.minFilter)),en.minFilter!==Go&&en.minFilter!==gn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",en)),gi=d.get("EXT_texture_filter_anisotropic")){if(en.type===Ss&&null===d.get("OES_texture_float_linear")||en.type===xs&&null===d.get("OES_texture_half_float_linear"))return;(en.anisotropy>1||y.get(en).__currentAnisotropy)&&(a.texParameterf(Qt,gi.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(en.anisotropy,x.getMaxAnisotropy())),y.get(en).__currentAnisotropy=en.anisotropy)}}function pn(Qt,en,si,gi){var Vi=M(en.texture.format),ki=M(en.texture.type);g.texImage2D(gi,0,Vi,en.width,en.height,0,Vi,ki,null),a.bindFramebuffer(a.FRAMEBUFFER,Qt),a.framebufferTexture2D(a.FRAMEBUFFER,si,gi,y.get(en.texture).__webglTexture,0),a.bindFramebuffer(a.FRAMEBUFFER,null)}function ln(Qt,en){a.bindRenderbuffer(a.RENDERBUFFER,Qt),en.depthBuffer&&!en.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,en.width,en.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,Qt)):en.depthBuffer&&en.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,en.width,en.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,Qt)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,en.width,en.height),a.bindRenderbuffer(a.RENDERBUFFER,null)}this.setTexture2D=At,this.setTextureCube=function St(Qt,en){var si=y.get(Qt);if(6===Qt.image.length)if(Qt.version>0&&si.__version!==Qt.version){si.__image__webglTextureCube||(Qt.addEventListener("dispose",Ne),si.__image__webglTextureCube=a.createTexture(),B.textures++),g.activeTexture(a.TEXTURE0+en),g.bindTexture(a.TEXTURE_CUBE_MAP,si.__image__webglTextureCube),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,Qt.flipY);for(var gi=Qt&&Qt.isCompressedTexture,Vi=Qt.image[0]&&Qt.image[0].isDataTexture,ki=[],Ti=0;Ti<6;Ti++)ki[Ti]=gi||Vi?Vi?Qt.image[Ti].image:Qt.image[Ti]:re(Qt.image[Ti],x.maxCubemapSize);var Ji=me(ki[0]),oi=M(Qt.format),ii=M(Qt.type);for($t(a.TEXTURE_CUBE_MAP,Qt,Ji),Ti=0;Ti<6;Ti++)if(gi)for(var f,c=ki[Ti].mipmaps,h=0,m=c.length;h<m;h++)f=c[h],Qt.format!==sa&&Qt.format!==ya?g.getCompressedTextureFormats().indexOf(oi)>-1?g.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ti,h,oi,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ti,h,oi,f.width,f.height,0,oi,ii,f.data);else Vi?g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ti,0,oi,ki[Ti].width,ki[Ti].height,0,oi,ii,ki[Ti].data):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ti,0,oi,oi,ii,ki[Ti]);Qt.generateMipmaps&&Ji&&a.generateMipmap(a.TEXTURE_CUBE_MAP),si.__version=Qt.version,Qt.onUpdate&&Qt.onUpdate(Qt)}else g.activeTexture(a.TEXTURE0+en),g.bindTexture(a.TEXTURE_CUBE_MAP,si.__image__webglTextureCube)},this.setTextureCubeDynamic=function tn(Qt,en){g.activeTexture(a.TEXTURE0+en),g.bindTexture(a.TEXTURE_CUBE_MAP,y.get(Qt).__webglTexture)},this.setupRenderTarget=function zi(Qt){var en=y.get(Qt),si=y.get(Qt.texture);Qt.addEventListener("dispose",ut),si.__webglTexture=a.createTexture(),B.textures++;var gi=!0===Qt.isWebGLRenderTargetCube,Vi=me(Qt);if(gi){en.__webglFramebuffer=[];for(var ki=0;ki<6;ki++)en.__webglFramebuffer[ki]=a.createFramebuffer()}else en.__webglFramebuffer=a.createFramebuffer();if(gi){for(g.bindTexture(a.TEXTURE_CUBE_MAP,si.__webglTexture),$t(a.TEXTURE_CUBE_MAP,Qt.texture,Vi),ki=0;ki<6;ki++)pn(en.__webglFramebuffer[ki],Qt,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+ki);Qt.texture.generateMipmaps&&Vi&&a.generateMipmap(a.TEXTURE_CUBE_MAP),g.bindTexture(a.TEXTURE_CUBE_MAP,null)}else g.bindTexture(a.TEXTURE_2D,si.__webglTexture),$t(a.TEXTURE_2D,Qt.texture,Vi),pn(en.__webglFramebuffer,Qt,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),Qt.texture.generateMipmaps&&Vi&&a.generateMipmap(a.TEXTURE_2D),g.bindTexture(a.TEXTURE_2D,null);Qt.depthBuffer&&function $n(Qt){var en=y.get(Qt),si=!0===Qt.isWebGLRenderTargetCube;if(Qt.depthTexture){if(si)throw new Error("target.depthTexture not supported in Cube render targets");!function In(Qt,en){if(en&&en.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(a.bindFramebuffer(a.FRAMEBUFFER,Qt),!en.depthTexture||!en.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!y.get(en.depthTexture).__webglTexture||en.depthTexture.image.width!==en.width||en.depthTexture.image.height!==en.height)&&(en.depthTexture.image.width=en.width,en.depthTexture.image.height=en.height,en.depthTexture.needsUpdate=!0),At(en.depthTexture,0);var gi=y.get(en.depthTexture).__webglTexture;if(en.depthTexture.format===dt)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,gi,0);else{if(en.depthTexture.format!==et)throw new Error("Unknown depthTexture format");a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,gi,0)}}(en.__webglFramebuffer,Qt)}else if(si){en.__webglDepthbuffer=[];for(var gi=0;gi<6;gi++)a.bindFramebuffer(a.FRAMEBUFFER,en.__webglFramebuffer[gi]),en.__webglDepthbuffer[gi]=a.createRenderbuffer(),ln(en.__webglDepthbuffer[gi],Qt)}else a.bindFramebuffer(a.FRAMEBUFFER,en.__webglFramebuffer),en.__webglDepthbuffer=a.createRenderbuffer(),ln(en.__webglDepthbuffer,Qt);a.bindFramebuffer(a.FRAMEBUFFER,null)}(Qt)},this.updateRenderTargetMipmap=function Ii(Qt){var en=Qt.texture;if(en.generateMipmaps&&me(Qt)&&en.minFilter!==Go&&en.minFilter!==gn){var si=Qt&&Qt.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,gi=y.get(en).__webglTexture;g.bindTexture(si,gi),a.generateMipmap(si),g.bindTexture(si,null)}}}function j_(){var a={};return{get:function(d){var g=d.uuid,y=a[g];return void 0===y&&(a[g]=y={}),y},delete:function(d){delete a[d.uuid]},clear:function(){a={}}}}function kv(a,d,g){var O=new function y(){var lt=!1,Zt=new ba,Vt=null,Ln=new ba;return{setMask:function(sn){Vt!==sn&&!lt&&(a.colorMask(sn,sn,sn,sn),Vt=sn)},setLocked:function(sn){lt=sn},setClear:function(sn,bn,zn,jn,pi){!0===pi&&(sn*=jn,bn*=jn,zn*=jn),Zt.set(sn,bn,zn,jn),!1===Ln.equals(Zt)&&(a.clearColor(sn,bn,zn,jn),Ln.copy(Zt))},reset:function(){lt=!1,Vt=null,Ln.set(0,0,0,1)}}},B=new function x(){var lt=!1,Zt=null,Vt=null,Ln=null;return{setTest:function(sn){sn?m(a.DEPTH_TEST):_(a.DEPTH_TEST)},setMask:function(sn){Zt!==sn&&!lt&&(a.depthMask(sn),Zt=sn)},setFunc:function(sn){if(Vt!==sn){if(sn)switch(sn){case le:a.depthFunc(a.NEVER);break;case ot:a.depthFunc(a.ALWAYS);break;case Je:a.depthFunc(a.LESS);break;case Sn:a.depthFunc(a.LEQUAL);break;case Hn:a.depthFunc(a.EQUAL);break;case pt:a.depthFunc(a.GEQUAL);break;case ht:a.depthFunc(a.GREATER);break;case Ht:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);Vt=sn}},setLocked:function(sn){lt=sn},setClear:function(sn){Ln!==sn&&(a.clearDepth(sn),Ln=sn)},reset:function(){lt=!1,Zt=null,Vt=null,Ln=null}}},ae=new function M(){var lt=!1,Zt=null,Vt=null,Ln=null,sn=null,bn=null,zn=null,jn=null,pi=null;return{setTest:function(Vn){Vn?m(a.STENCIL_TEST):_(a.STENCIL_TEST)},setMask:function(Vn){Zt!==Vn&&!lt&&(a.stencilMask(Vn),Zt=Vn)},setFunc:function(Vn,ci,Ai){(Vt!==Vn||Ln!==ci||sn!==Ai)&&(a.stencilFunc(Vn,ci,Ai),Vt=Vn,Ln=ci,sn=Ai)},setOp:function(Vn,ci,Ai){(bn!==Vn||zn!==ci||jn!==Ai)&&(a.stencilOp(Vn,ci,Ai),bn=Vn,zn=ci,jn=Ai)},setLocked:function(Vn){lt=Vn},setClear:function(Vn){pi!==Vn&&(a.clearStencil(Vn),pi=Vn)},reset:function(){lt=!1,Zt=null,Vt=null,Ln=null,sn=null,bn=null,zn=null,jn=null,pi=null}}},re=a.getParameter(a.MAX_VERTEX_ATTRIBS),me=new Uint8Array(re),_e=new Uint8Array(re),Oe=new Uint8Array(re),Fe={},Ne=null,ut=null,ct=null,rt=null,At=null,St=null,tn=null,$t=null,Cn=!1,pn=null,ln=null,In=null,$n=null,zi=null,Ii=null,Qt=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),en=parseFloat(/^WebGL\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),si=parseFloat(en)>=1,gi=null,Vi={},ki=new ba,Ti=new ba;function Cr(lt,Zt,Vt){var Ln=new Uint8Array(4),sn=a.createTexture();a.bindTexture(lt,sn),a.texParameteri(lt,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(lt,a.TEXTURE_MAG_FILTER,a.NEAREST);for(var bn=0;bn<Vt;bn++)a.texImage2D(Zt+bn,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,Ln);return sn}var Ji={};function m(lt){!0!==Fe[lt]&&(a.enable(lt),Fe[lt]=!0)}function _(lt){!1!==Fe[lt]&&(a.disable(lt),Fe[lt]=!1)}function A(lt,Zt,Vt,Ln,sn,bn,zn,jn){lt!==V?m(a.BLEND):_(a.BLEND),(lt!==ut||jn!==Cn)&&(lt===fe?jn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):lt===ke?jn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):lt===Pe?jn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):jn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),ut=lt,Cn=jn),lt===nt?(sn=sn||Zt,bn=bn||Vt,zn=zn||Ln,(Zt!==ct||sn!==St)&&(a.blendEquationSeparate(g(Zt),g(sn)),ct=Zt,St=sn),(Vt!==rt||Ln!==At||bn!==tn||zn!==$t)&&(a.blendFuncSeparate(g(Vt),g(Ln),g(bn),g(zn)),rt=Vt,At=Ln,tn=bn,$t=zn)):(ct=null,rt=null,At=null,St=null,tn=null,$t=null)}function $(lt){B.setFunc(lt)}function Ee(lt){pn!==lt&&(a.frontFace(lt?a.CW:a.CCW),pn=lt)}function Be(lt){lt!==U?(m(a.CULL_FACE),lt!==ln&&a.cullFace(lt===j?a.BACK:lt===D?a.FRONT:a.FRONT_AND_BACK)):_(a.CULL_FACE),ln=lt}function Ut(lt){void 0===lt&&(lt=a.TEXTURE0+Qt-1),gi!==lt&&(a.activeTexture(lt),gi=lt)}return Ji[a.TEXTURE_2D]=Cr(a.TEXTURE_2D,a.TEXTURE_2D,1),Ji[a.TEXTURE_CUBE_MAP]=Cr(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:O,depth:B,stencil:ae},init:function oi(){O.setClear(0,0,0,1),B.setClear(1),ae.setClear(0),m(a.DEPTH_TEST),$(Sn),Ee(!1),Be(j),m(a.CULL_FACE),m(a.BLEND),A(J)},initAttributes:function ii(){for(var lt=0,Zt=me.length;lt<Zt;lt++)me[lt]=0},enableAttribute:function f(lt){me[lt]=1,0===_e[lt]&&(a.enableVertexAttribArray(lt),_e[lt]=1),0!==Oe[lt]&&(d.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(lt,0),Oe[lt]=0)},enableAttributeAndDivisor:function c(lt,Zt,Vt){me[lt]=1,0===_e[lt]&&(a.enableVertexAttribArray(lt),_e[lt]=1),Oe[lt]!==Zt&&(Vt.vertexAttribDivisorANGLE(lt,Zt),Oe[lt]=Zt)},disableUnusedAttributes:function h(){for(var lt=0,Zt=_e.length;lt!==Zt;++lt)_e[lt]!==me[lt]&&(a.disableVertexAttribArray(lt),_e[lt]=0)},enable:m,disable:_,getCompressedTextureFormats:function C(){if(null===Ne&&(Ne=[],d.get("WEBGL_compressed_texture_pvrtc")||d.get("WEBGL_compressed_texture_s3tc")||d.get("WEBGL_compressed_texture_etc1")))for(var lt=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),Zt=0;Zt<lt.length;Zt++)Ne.push(lt[Zt]);return Ne},setBlending:A,setColorWrite:function E(lt){O.setMask(lt)},setDepthTest:function F(lt){B.setTest(lt)},setDepthWrite:function P(lt){B.setMask(lt)},setDepthFunc:$,setStencilTest:function Z(lt){ae.setTest(lt)},setStencilWrite:function he(lt){ae.setMask(lt)},setStencilFunc:function ge(lt,Zt,Vt){ae.setFunc(lt,Zt,Vt)},setStencilOp:function ve(lt,Zt,Vt){ae.setOp(lt,Zt,Vt)},setFlipSided:Ee,setCullFace:Be,setLineWidth:function Ue(lt){lt!==In&&(si&&a.lineWidth(lt),In=lt)},setPolygonOffset:function st(lt,Zt,Vt){lt?(m(a.POLYGON_OFFSET_FILL),($n!==Zt||zi!==Vt)&&(a.polygonOffset(Zt,Vt),$n=Zt,zi=Vt)):_(a.POLYGON_OFFSET_FILL)},getScissorTest:function tt(){return Ii},setScissorTest:function wt(lt){Ii=lt,lt?m(a.SCISSOR_TEST):_(a.SCISSOR_TEST)},activeTexture:Ut,bindTexture:function Gt(lt,Zt){null===gi&&Ut();var Vt=Vi[gi];void 0===Vt&&(Vi[gi]=Vt={type:void 0,texture:void 0}),(Vt.type!==lt||Vt.texture!==Zt)&&(a.bindTexture(lt,Zt||Ji[lt]),Vt.type=lt,Vt.texture=Zt)},compressedTexImage2D:function xt(){try{a.compressedTexImage2D.apply(a,arguments)}catch(lt){console.error(lt)}},texImage2D:function Wt(){try{a.texImage2D.apply(a,arguments)}catch(lt){console.error(lt)}},scissor:function Dt(lt){!1===ki.equals(lt)&&(a.scissor(lt.x,lt.y,lt.z,lt.w),ki.copy(lt))},viewport:function Kt(lt){!1===Ti.equals(lt)&&(a.viewport(lt.x,lt.y,lt.z,lt.w),Ti.copy(lt))},reset:function Yt(){for(var lt=0;lt<_e.length;lt++)1===_e[lt]&&(a.disableVertexAttribArray(lt),_e[lt]=0);Fe={},Ne=null,gi=null,Vi={},ut=null,pn=null,ln=null,O.reset(),B.reset(),ae.reset()}}}function gb(a,d,g){var y;function M(tn){if("highp"===tn){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";tn="mediump"}return"mediump"===tn&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var O=void 0!==g.precision?g.precision:"highp",B=M(O);B!==O&&(console.warn("THREE.WebGLRenderer:",O,"not supported, using",B,"instead."),O=B);var ae=!0===g.logarithmicDepthBuffer&&!!d.get("EXT_frag_depth"),re=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),me=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_e=a.getParameter(a.MAX_TEXTURE_SIZE),Oe=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),Fe=a.getParameter(a.MAX_VERTEX_ATTRIBS),Ne=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),ut=a.getParameter(a.MAX_VARYING_VECTORS),ct=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),rt=me>0,At=!!d.get("OES_texture_float");return{getMaxAnisotropy:function x(){if(void 0!==y)return y;var tn=d.get("EXT_texture_filter_anisotropic");return y=null!==tn?a.getParameter(tn.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:M,precision:O,logarithmicDepthBuffer:ae,maxTextures:re,maxVertexTextures:me,maxTextureSize:_e,maxCubemapSize:Oe,maxAttributes:Fe,maxVertexUniforms:Ne,maxVaryings:ut,maxFragmentUniforms:ct,vertexTextures:rt,floatFragmentTextures:At,floatVertexTextures:rt&&At}}function tg(a){var d={};return{get:function(g){if(void 0!==d[g])return d[g];var y;switch(g){case"WEBGL_depth_texture":y=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":y=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":y=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":y=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":y=a.getExtension("WEBGL_compressed_texture_etc1");break;default:y=a.getExtension(g)}return null===y&&console.warn("THREE.WebGLRenderer: "+g+" extension not supported."),d[g]=y,y}}}function Rl(){var a=this,d=null,g=0,y=!1,x=!1,M=new bt,O=new Pt,B={value:null,needsUpdate:!1};function ae(){B.value!==d&&(B.value=d,B.needsUpdate=g>0),a.numPlanes=g,a.numIntersection=0}function re(me,_e,Oe,Fe){var Ne=null!==me?me.length:0,ut=null;if(0!==Ne){if(ut=B.value,!0!==Fe||null===ut){var ct=Oe+4*Ne,rt=_e.matrixWorldInverse;O.getNormalMatrix(rt),(null===ut||ut.length<ct)&&(ut=new Float32Array(ct));for(var At=0,St=Oe;At!==Ne;++At,St+=4)M.copy(me[At]).applyMatrix4(rt,O),M.normal.toArray(ut,St),ut[St+3]=M.constant}B.value=ut,B.needsUpdate=!0}return a.numPlanes=Ne,ut}this.uniform=B,this.numPlanes=0,this.numIntersection=0,this.init=function(me,_e,Oe){var Fe=0!==me.length||_e||0!==g||y;return y=_e,d=re(me,Oe,0),g=me.length,Fe},this.beginShadows=function(){x=!0,re(null)},this.endShadows=function(){x=!1,ae()},this.setState=function(me,_e,Oe,Fe,Ne,ut){if(!y||null===me||0===me.length||x&&!Oe)x?re(null):ae();else{var ct=x?0:g,rt=4*ct,At=Ne.clippingState||null;B.value=At,At=re(me,Fe,rt,ut);for(var St=0;St!==rt;++St)At[St]=d[St];Ne.clippingState=At,this.numIntersection=_e?this.numPlanes:0,this.numPlanes+=ct}}}function nf(a){console.log("THREE.WebGLRenderer",L);var d=void 0!==(a=a||{}).canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),g=void 0!==a.context?a.context:null,y=void 0!==a.alpha&&a.alpha,x=void 0===a.depth||a.depth,M=void 0===a.stencil||a.stencil,O=void 0!==a.antialias&&a.antialias,B=void 0===a.premultipliedAlpha||a.premultipliedAlpha,ae=void 0!==a.preserveDrawingBuffer&&a.preserveDrawingBuffer,re=[],me=[],_e=-1,Oe=[],Fe=-1,Ne=new Float32Array(8),ut=[],ct=[];this.domElement=d,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=dn,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var E,rt=this,At=null,St=null,tn=null,$t=-1,Cn="",pn=null,ln=new ba,In=null,$n=new ba,zi=0,Ii=new ps(0),Qt=0,en=d.width,si=d.height,gi=1,Vi=new ba(0,0,en,si),ki=!1,Ti=new ba(0,0,en,si),Cr=new aa,Ji=new Rl,oi=!1,ii=!1,f=new Lt,c=new Vs,h=new an,m=new Vs,_=new Vs,C={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},A={calls:0,vertices:0,faces:0,points:0};this.info={render:A,memory:{geometries:0,textures:0},programs:null};try{var F={alpha:y,depth:x,stencil:M,antialias:O,premultipliedAlpha:B,preserveDrawingBuffer:ae};if(null===(E=g||d.getContext("webgl",F)||d.getContext("experimental-webgl",F)))throw null!==d.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===E.getShaderPrecisionFormat&&(E.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),d.addEventListener("webglcontextlost",Vt,!1)}catch(He){console.error("THREE.WebGLRenderer: "+He)}var P=new tg(E);P.get("WEBGL_depth_texture"),P.get("OES_texture_float"),P.get("OES_texture_float_linear"),P.get("OES_texture_half_float"),P.get("OES_texture_half_float_linear"),P.get("OES_standard_derivatives"),P.get("ANGLE_instanced_arrays"),P.get("OES_element_index_uint")&&(Wr.MaxIndex=4294967296);var $=new gb(E,P,a),Z=new kv(E,P,Hi),he=new j_,ge=new Rv(E,P,Z,he,$,Hi,this.info),ve=new Ch(E,he,this.info),Ee=new Uy(this,$),Be=new ml;this.info.programs=Ee.programs;var Ue=new Pf(E,P,A),st=new Bc(E,P,A),tt=new Jh(-1,1,1,-1,0,1),wt=new Kl,Ut=new Ya(new Pa(2,2),new pl({depthTest:!1,depthWrite:!1,fog:!1})),Gt=nu.cube,xt=new Ya(new cc(5,5,5),new xu({uniforms:Gt.uniforms,vertexShader:Gt.vertexShader,fragmentShader:Gt.fragmentShader,side:z,depthTest:!1,depthWrite:!1,fog:!1}));function Wt(){return null===St?gi:1}function Dt(){Z.init(),Z.scissor(ln.copy(Vi).multiplyScalar(gi)),Z.viewport($n.copy(Ti).multiplyScalar(gi)),Z.buffers.color.setClear(Ii.r,Ii.g,Ii.b,Qt,B)}function Kt(){At=null,pn=null,Cn="",$t=-1,Z.reset()}Dt(),this.context=E,this.capabilities=$,this.extensions=P,this.properties=he,this.state=Z;var Yt=new Zo(this,C,ve,$);this.shadowMap=Yt;var He,lt=new W_(this,ut),Zt=new Qp(this,ct);function Vt(He){He.preventDefault(),Kt(),Dt(),he.clear()}function Ln(He){var vt=He.target;vt.removeEventListener("dispose",Ln),function sn(He){bn(He),he.delete(He)}(vt)}function bn(He){var vt=he.get(He).program;He.program=void 0,void 0!==vt&&Ee.releaseProgram(vt)}function jn(He,vt){return Math.abs(vt[0])-Math.abs(He[0])}function pi(He,vt){return He.object.renderOrder!==vt.object.renderOrder?He.object.renderOrder-vt.object.renderOrder:He.material.program&&vt.material.program&&He.material.program!==vt.material.program?He.material.program.id-vt.material.program.id:He.material.id!==vt.material.id?He.material.id-vt.material.id:He.z!==vt.z?He.z-vt.z:He.id-vt.id}function Vn(He,vt){return He.object.renderOrder!==vt.object.renderOrder?He.object.renderOrder-vt.object.renderOrder:He.z!==vt.z?vt.z-He.z:He.id-vt.id}function ci(He,vt,vn,Tn,Dn){var mr,Ar;vn.transparent?(mr=Oe,Ar=++Fe):(mr=me,Ar=++_e);var yi=mr[Ar];void 0!==yi?(yi.id=He.id,yi.object=He,yi.geometry=vt,yi.material=vn,yi.z=h.z,yi.group=Dn):mr.push(yi={id:He.id,object:He,geometry:vt,material:vn,z:h.z,group:Dn})}function Mi(He){if(!Cr.intersectsSphere(He))return!1;var vt=Ji.numPlanes;if(0===vt)return!0;var vn=rt.clippingPlanes,Tn=He.center,Dn=-He.radius,mr=0;do{if(vn[mr].distanceToPoint(Tn)<Dn)return!1}while(++mr!==vt);return!0}function Si(He,vt){if(!1!==He.visible){if(0!=(He.layers.mask&vt.layers.mask))if(He.isLight)re.push(He);else if(He.isSprite)(!1===He.frustumCulled||!0===function Oi(He){return f.center.set(0,0,0),f.radius=.7071067811865476,f.applyMatrix4(He.matrixWorld),Mi(f)}(He))&&ut.push(He);else if(He.isLensFlare)ct.push(He);else if(He.isImmediateRenderObject)!0===rt.sortObjects&&(h.setFromMatrixPosition(He.matrixWorld),h.applyProjection(c)),ci(He,null,He.material,0,null);else if((He.isMesh||He.isLine||He.isPoints)&&(He.isSkinnedMesh&&He.skeleton.update(),!1===He.frustumCulled||!0===function Ai(He){var vt=He.geometry;return null===vt.boundingSphere&&vt.computeBoundingSphere(),f.copy(vt.boundingSphere).applyMatrix4(He.matrixWorld),Mi(f)}(He))){var Tn=He.material;if(!0===Tn.visible){!0===rt.sortObjects&&(h.setFromMatrixPosition(He.matrixWorld),h.applyProjection(c));var Dn=ve.update(He);if(Tn.isMultiMaterial)for(var mr=Dn.groups,Ar=Tn.materials,yi=0,ns=mr.length;yi<ns;yi++){var Ki=mr[yi],Qi=Ar[Ki.materialIndex];!0===Qi.visible&&ci(He,Dn,Qi,0,Ki)}else ci(He,Dn,Tn,0,null)}}var fr=He.children;for(yi=0,ns=fr.length;yi<ns;yi++)Si(fr[yi],vt)}}function Gn(He,vt,vn,Tn){for(var Dn=0,mr=He.length;Dn<mr;Dn++){var Ar=He[Dn],yi=Ar.object,ns=Ar.geometry,Ki=void 0===Tn?Ar.material:Tn,Qi=Ar.group;if(yi.modelViewMatrix.multiplyMatrices(vn.matrixWorldInverse,yi.matrixWorld),yi.normalMatrix.getNormalMatrix(yi.modelViewMatrix),yi.onBeforeRender(rt,vt,vn,ns,Ki,Qi),yi.isImmediateRenderObject){Ni(Ki);var fr=lr(vn,vt.fog,Ki,yi);Cn="",yi.render(function(Eo){rt.renderBufferImmediate(Eo,fr,Ki)})}else rt.renderBufferDirect(vn,vt.fog,ns,Ki,yi,Qi);yi.onAfterRender(rt,vt,vn,ns,Ki,Qi)}}function Ni(He){He.side===ce?Z.disable(E.CULL_FACE):Z.enable(E.CULL_FACE),Z.setFlipSided(He.side===z),!0===He.transparent?Z.setBlending(He.blending,He.blendEquation,He.blendSrc,He.blendDst,He.blendEquationAlpha,He.blendSrcAlpha,He.blendDstAlpha,He.premultipliedAlpha):Z.setBlending(V),Z.setDepthFunc(He.depthFunc),Z.setDepthTest(He.depthTest),Z.setDepthWrite(He.depthWrite),Z.setColorWrite(He.colorWrite),Z.setPolygonOffset(He.polygonOffset,He.polygonOffsetFactor,He.polygonOffsetUnits)}function lr(He,vt,vn,Tn){zi=0;var Dn=he.get(vn);oi&&(ii||He!==pn)&&Ji.setState(vn.clippingPlanes,vn.clipIntersection,vn.clipShadows,He,Dn,He===pn&&vn.id===$t),!1===vn.needsUpdate&&(void 0===Dn.program||vn.fog&&Dn.fog!==vt||vn.lights&&Dn.lightsHash!==C.hash||void 0!==Dn.numClippingPlanes&&(Dn.numClippingPlanes!==Ji.numPlanes||Dn.numIntersection!==Ji.numIntersection))&&(vn.needsUpdate=!0),vn.needsUpdate&&(function _i(He,vt,vn){var Tn=he.get(He),Dn=Ee.getParameters(He,C,vt,Ji.numPlanes,Ji.numIntersection,vn),mr=Ee.getProgramCode(He,Dn),Ar=Tn.program,yi=!0;if(void 0===Ar)He.addEventListener("dispose",Ln);else if(Ar.code!==mr)bn(He);else{if(void 0!==Dn.shaderID)return;yi=!1}if(yi){if(Dn.shaderID){var ns=nu[Dn.shaderID];Tn.__webglShader={name:He.type,uniforms:Dl.clone(ns.uniforms),vertexShader:ns.vertexShader,fragmentShader:ns.fragmentShader}}else Tn.__webglShader={name:He.type,uniforms:He.uniforms,vertexShader:He.vertexShader,fragmentShader:He.fragmentShader};He.__webglShader=Tn.__webglShader,Ar=Ee.acquireProgram(He,Dn,mr),Tn.program=Ar,He.program=Ar}var Ki=Ar.getAttributes();if(He.morphTargets){He.numSupportedMorphTargets=0;for(var Qi=0;Qi<rt.maxMorphTargets;Qi++)Ki["morphTarget"+Qi]>=0&&He.numSupportedMorphTargets++}if(He.morphNormals)for(He.numSupportedMorphNormals=0,Qi=0;Qi<rt.maxMorphNormals;Qi++)Ki["morphNormal"+Qi]>=0&&He.numSupportedMorphNormals++;var fr=Tn.__webglShader.uniforms;(!He.isShaderMaterial&&!He.isRawShaderMaterial||!0===He.clipping)&&(Tn.numClippingPlanes=Ji.numPlanes,Tn.numIntersection=Ji.numIntersection,fr.clippingPlanes=Ji.uniform),Tn.fog=vt,Tn.lightsHash=C.hash,He.lights&&(fr.ambientLightColor.value=C.ambient,fr.directionalLights.value=C.directional,fr.spotLights.value=C.spot,fr.rectAreaLights.value=C.rectArea,fr.pointLights.value=C.point,fr.hemisphereLights.value=C.hemi,fr.directionalShadowMap.value=C.directionalShadowMap,fr.directionalShadowMatrix.value=C.directionalShadowMatrix,fr.spotShadowMap.value=C.spotShadowMap,fr.spotShadowMatrix.value=C.spotShadowMatrix,fr.pointShadowMap.value=C.pointShadowMap,fr.pointShadowMatrix.value=C.pointShadowMatrix);var Eo=Tn.program.getUniforms(),No=xl.seqWithValue(Eo.seq,fr);Tn.uniformsList=No}(vn,vt,Tn),vn.needsUpdate=!1);var Ar=!1,yi=!1,ns=!1,Ki=Dn.program,Qi=Ki.getUniforms(),fr=Dn.__webglShader.uniforms;if(Ki.id!==At&&(E.useProgram(Ki.program),At=Ki.id,Ar=!0,yi=!0,ns=!0),vn.id!==$t&&($t=vn.id,yi=!0),Ar||He!==pn){if(Qi.set(E,He,"projectionMatrix"),$.logarithmicDepthBuffer&&Qi.setValue(E,"logDepthBufFC",2/(Math.log(He.far+1)/Math.LN2)),He!==pn&&(pn=He,yi=!0,ns=!0),vn.isShaderMaterial||vn.isMeshPhongMaterial||vn.isMeshStandardMaterial||vn.envMap){var Eo=Qi.map.cameraPosition;void 0!==Eo&&Eo.setValue(E,h.setFromMatrixPosition(He.matrixWorld))}(vn.isMeshPhongMaterial||vn.isMeshLambertMaterial||vn.isMeshBasicMaterial||vn.isMeshStandardMaterial||vn.isShaderMaterial||vn.skinning)&&Qi.setValue(E,"viewMatrix",He.matrixWorldInverse),Qi.set(E,rt,"toneMappingExposure"),Qi.set(E,rt,"toneMappingWhitePoint")}if(vn.skinning){Qi.setOptional(E,Tn,"bindMatrix"),Qi.setOptional(E,Tn,"bindMatrixInverse");var No=Tn.skeleton;No&&($.floatVertexTextures&&No.useVertexTexture?(Qi.set(E,No,"boneTexture"),Qi.set(E,No,"boneTextureWidth"),Qi.set(E,No,"boneTextureHeight")):Qi.setOptional(E,No,"boneMatrices"))}return yi&&(vn.lights&&function Cs(He,vt){He.ambientLightColor.needsUpdate=vt,He.directionalLights.needsUpdate=vt,He.pointLights.needsUpdate=vt,He.spotLights.needsUpdate=vt,He.rectAreaLights.needsUpdate=vt,He.hemisphereLights.needsUpdate=vt}(fr,ns),vt&&vn.fog&&function br(He,vt){He.fogColor.value=vt.color,vt.isFog?(He.fogNear.value=vt.near,He.fogFar.value=vt.far):vt.isFogExp2&&(He.fogDensity.value=vt.density)}(fr,vt),(vn.isMeshBasicMaterial||vn.isMeshLambertMaterial||vn.isMeshPhongMaterial||vn.isMeshStandardMaterial||vn.isMeshNormalMaterial||vn.isMeshDepthMaterial)&&function wr(He,vt){var vn;if(He.opacity.value=vt.opacity,He.diffuse.value=vt.color,vt.emissive&&He.emissive.value.copy(vt.emissive).multiplyScalar(vt.emissiveIntensity),He.map.value=vt.map,He.specularMap.value=vt.specularMap,He.alphaMap.value=vt.alphaMap,vt.lightMap&&(He.lightMap.value=vt.lightMap,He.lightMapIntensity.value=vt.lightMapIntensity),vt.aoMap&&(He.aoMap.value=vt.aoMap,He.aoMapIntensity.value=vt.aoMapIntensity),vt.map?vn=vt.map:vt.specularMap?vn=vt.specularMap:vt.displacementMap?vn=vt.displacementMap:vt.normalMap?vn=vt.normalMap:vt.bumpMap?vn=vt.bumpMap:vt.roughnessMap?vn=vt.roughnessMap:vt.metalnessMap?vn=vt.metalnessMap:vt.alphaMap?vn=vt.alphaMap:vt.emissiveMap&&(vn=vt.emissiveMap),void 0!==vn){vn.isWebGLRenderTarget&&(vn=vn.texture);var Tn=vn.offset,Dn=vn.repeat;He.offsetRepeat.value.set(Tn.x,Tn.y,Dn.x,Dn.y)}He.envMap.value=vt.envMap,He.flipEnvMap.value=vt.envMap&&vt.envMap.isCubeTexture?-1:1,He.reflectivity.value=vt.reflectivity,He.refractionRatio.value=vt.refractionRatio}(fr,vn),vn.isLineBasicMaterial?as(fr,vn):vn.isLineDashedMaterial?(as(fr,vn),function _s(He,vt){He.dashSize.value=vt.dashSize,He.totalSize.value=vt.dashSize+vt.gapSize,He.scale.value=vt.scale}(fr,vn)):vn.isPointsMaterial?function Mr(He,vt){if(He.diffuse.value=vt.color,He.opacity.value=vt.opacity,He.size.value=vt.size*gi,He.scale.value=.5*si,He.map.value=vt.map,null!==vt.map){var vn=vt.map.offset,Tn=vt.map.repeat;He.offsetRepeat.value.set(vn.x,vn.y,Tn.x,Tn.y)}}(fr,vn):vn.isMeshLambertMaterial?function gs(He,vt){vt.emissiveMap&&(He.emissiveMap.value=vt.emissiveMap)}(fr,vn):vn.isMeshToonMaterial?function kr(He,vt){Wi(He,vt),vt.gradientMap&&(He.gradientMap.value=vt.gradientMap)}(fr,vn):vn.isMeshPhongMaterial?Wi(fr,vn):vn.isMeshPhysicalMaterial?function bs(He,vt){He.clearCoat.value=vt.clearCoat,He.clearCoatRoughness.value=vt.clearCoatRoughness,Fr(He,vt)}(fr,vn):vn.isMeshStandardMaterial?Fr(fr,vn):vn.isMeshDepthMaterial?vn.displacementMap&&(fr.displacementMap.value=vn.displacementMap,fr.displacementScale.value=vn.displacementScale,fr.displacementBias.value=vn.displacementBias):vn.isMeshNormalMaterial&&function oo(He,vt){vt.bumpMap&&(He.bumpMap.value=vt.bumpMap,He.bumpScale.value=vt.bumpScale),vt.normalMap&&(He.normalMap.value=vt.normalMap,He.normalScale.value.copy(vt.normalScale)),vt.displacementMap&&(He.displacementMap.value=vt.displacementMap,He.displacementScale.value=vt.displacementScale,He.displacementBias.value=vt.displacementBias)}(fr,vn),void 0!==fr.ltcMat&&(fr.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==fr.ltcMag&&(fr.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),xl.upload(E,Dn.uniformsList,fr,rt)),Qi.set(E,Tn,"modelViewMatrix"),Qi.set(E,Tn,"normalMatrix"),Qi.setValue(E,"modelMatrix",Tn.matrixWorld),Ki}function as(He,vt){He.diffuse.value=vt.color,He.opacity.value=vt.opacity}function Wi(He,vt){He.specular.value=vt.specular,He.shininess.value=Math.max(vt.shininess,1e-4),vt.emissiveMap&&(He.emissiveMap.value=vt.emissiveMap),vt.bumpMap&&(He.bumpMap.value=vt.bumpMap,He.bumpScale.value=vt.bumpScale),vt.normalMap&&(He.normalMap.value=vt.normalMap,He.normalScale.value.copy(vt.normalScale)),vt.displacementMap&&(He.displacementMap.value=vt.displacementMap,He.displacementScale.value=vt.displacementScale,He.displacementBias.value=vt.displacementBias)}function Fr(He,vt){He.roughness.value=vt.roughness,He.metalness.value=vt.metalness,vt.roughnessMap&&(He.roughnessMap.value=vt.roughnessMap),vt.metalnessMap&&(He.metalnessMap.value=vt.metalnessMap),vt.emissiveMap&&(He.emissiveMap.value=vt.emissiveMap),vt.bumpMap&&(He.bumpMap.value=vt.bumpMap,He.bumpScale.value=vt.bumpScale),vt.normalMap&&(He.normalMap.value=vt.normalMap,He.normalScale.value.copy(vt.normalScale)),vt.displacementMap&&(He.displacementMap.value=vt.displacementMap,He.displacementScale.value=vt.displacementScale,He.displacementBias.value=vt.displacementBias),vt.envMap&&(He.envMapIntensity.value=vt.envMapIntensity)}function Hi(He){var vt;if(He===kc)return E.REPEAT;if(He===Sa)return E.CLAMP_TO_EDGE;if(He===Oc)return E.MIRRORED_REPEAT;if(He===Go)return E.NEAREST;if(He===Rt)return E.NEAREST_MIPMAP_NEAREST;if(He===fn)return E.NEAREST_MIPMAP_LINEAR;if(He===gn)return E.LINEAR;if(He===yn)return E.LINEAR_MIPMAP_NEAREST;if(He===qe)return E.LINEAR_MIPMAP_LINEAR;if(He===on)return E.UNSIGNED_BYTE;if(He===xo)return E.UNSIGNED_SHORT_4_4_4_4;if(He===lo)return E.UNSIGNED_SHORT_5_5_5_1;if(He===Kr)return E.UNSIGNED_SHORT_5_6_5;if(He===En)return E.BYTE;if(He===Nn)return E.SHORT;if(He===hi)return E.UNSIGNED_SHORT;if(He===ar)return E.INT;if(He===qr)return E.UNSIGNED_INT;if(He===Ss)return E.FLOAT;if(He===xs&&null!==(vt=P.get("OES_texture_half_float")))return vt.HALF_FLOAT_OES;if(He===Ns)return E.ALPHA;if(He===ya)return E.RGB;if(He===sa)return E.RGBA;if(He===zl)return E.LUMINANCE;if(He===Fc)return E.LUMINANCE_ALPHA;if(He===dt)return E.DEPTH_COMPONENT;if(He===et)return E.DEPTH_STENCIL;if(He===at)return E.FUNC_ADD;if(He===It)return E.FUNC_SUBTRACT;if(He===Ge)return E.FUNC_REVERSE_SUBTRACT;if(He===_t)return E.ZERO;if(He===Fn)return E.ONE;if(He===Ot)return E.SRC_COLOR;if(He===Pn)return E.ONE_MINUS_SRC_COLOR;if(He===nn)return E.SRC_ALPHA;if(He===Ze)return E.ONE_MINUS_SRC_ALPHA;if(He===Ct)return E.DST_ALPHA;if(He===cn)return E.ONE_MINUS_DST_ALPHA;if(He===wn)return E.DST_COLOR;if(He===An)return E.ONE_MINUS_DST_COLOR;if(He===$e)return E.SRC_ALPHA_SATURATE;if((He===pe||He===Te||He===Qe||He===Mt)&&null!==(vt=P.get("WEBGL_compressed_texture_s3tc"))){if(He===pe)return vt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(He===Te)return vt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(He===Qe)return vt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(He===Mt)return vt.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((He===Xt||He===xn||He===vi||He===mi)&&null!==(vt=P.get("WEBGL_compressed_texture_pvrtc"))){if(He===Xt)return vt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(He===xn)return vt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(He===vi)return vt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(He===mi)return vt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(He===xi&&null!==(vt=P.get("WEBGL_compressed_texture_etc1")))return vt.COMPRESSED_RGB_ETC1_WEBGL;if((He===yt||He===mt)&&null!==(vt=P.get("EXT_blend_minmax"))){if(He===yt)return vt.MIN_EXT;if(He===mt)return vt.MAX_EXT}return He===Ga&&null!==(vt=P.get("WEBGL_depth_texture"))?vt.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return E},this.getContextAttributes=function(){return E.getContextAttributes()},this.forceContextLoss=function(){P.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return $.getMaxAnisotropy()},this.getPrecision=function(){return $.precision},this.getPixelRatio=function(){return gi},this.setPixelRatio=function(He){void 0!==He&&(gi=He,this.setSize(Ti.z,Ti.w,!1))},this.getSize=function(){return{width:en,height:si}},this.setSize=function(He,vt,vn){en=He,si=vt,d.width=He*gi,d.height=vt*gi,!1!==vn&&(d.style.width=He+"px",d.style.height=vt+"px"),this.setViewport(0,0,He,vt)},this.setViewport=function(He,vt,vn,Tn){Z.viewport(Ti.set(He,vt,vn,Tn))},this.setScissor=function(He,vt,vn,Tn){Z.scissor(Vi.set(He,vt,vn,Tn))},this.setScissorTest=function(He){Z.setScissorTest(ki=He)},this.getClearColor=function(){return Ii},this.setClearColor=function(He,vt){Ii.set(He),Z.buffers.color.setClear(Ii.r,Ii.g,Ii.b,Qt=void 0!==vt?vt:1,B)},this.getClearAlpha=function(){return Qt},this.setClearAlpha=function(He){Z.buffers.color.setClear(Ii.r,Ii.g,Ii.b,Qt=He,B)},this.clear=function(He,vt,vn){var Tn=0;(void 0===He||He)&&(Tn|=E.COLOR_BUFFER_BIT),(void 0===vt||vt)&&(Tn|=E.DEPTH_BUFFER_BIT),(void 0===vn||vn)&&(Tn|=E.STENCIL_BUFFER_BIT),E.clear(Tn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(He,vt,vn,Tn){this.setRenderTarget(He),this.clear(vt,vn,Tn)},this.resetGLState=Kt,this.dispose=function(){Oe=[],Fe=-1,me=[],_e=-1,d.removeEventListener("webglcontextlost",Vt,!1)},this.renderBufferImmediate=function(He,vt,vn){Z.initAttributes();var Tn=he.get(He);He.hasPositions&&!Tn.position&&(Tn.position=E.createBuffer()),He.hasNormals&&!Tn.normal&&(Tn.normal=E.createBuffer()),He.hasUvs&&!Tn.uv&&(Tn.uv=E.createBuffer()),He.hasColors&&!Tn.color&&(Tn.color=E.createBuffer());var Dn=vt.getAttributes();if(He.hasPositions&&(E.bindBuffer(E.ARRAY_BUFFER,Tn.position),E.bufferData(E.ARRAY_BUFFER,He.positionArray,E.DYNAMIC_DRAW),Z.enableAttribute(Dn.position),E.vertexAttribPointer(Dn.position,3,E.FLOAT,!1,0,0)),He.hasNormals){if(E.bindBuffer(E.ARRAY_BUFFER,Tn.normal),!vn.isMeshPhongMaterial&&!vn.isMeshStandardMaterial&&!vn.isMeshNormalMaterial&&vn.shading===Ce)for(var mr=0,Ar=3*He.count;mr<Ar;mr+=9){var yi=He.normalArray,ns=(yi[mr+0]+yi[mr+3]+yi[mr+6])/3,Ki=(yi[mr+1]+yi[mr+4]+yi[mr+7])/3,Qi=(yi[mr+2]+yi[mr+5]+yi[mr+8])/3;yi[mr+0]=ns,yi[mr+1]=Ki,yi[mr+2]=Qi,yi[mr+3]=ns,yi[mr+4]=Ki,yi[mr+5]=Qi,yi[mr+6]=ns,yi[mr+7]=Ki,yi[mr+8]=Qi}E.bufferData(E.ARRAY_BUFFER,He.normalArray,E.DYNAMIC_DRAW),Z.enableAttribute(Dn.normal),E.vertexAttribPointer(Dn.normal,3,E.FLOAT,!1,0,0)}He.hasUvs&&vn.map&&(E.bindBuffer(E.ARRAY_BUFFER,Tn.uv),E.bufferData(E.ARRAY_BUFFER,He.uvArray,E.DYNAMIC_DRAW),Z.enableAttribute(Dn.uv),E.vertexAttribPointer(Dn.uv,2,E.FLOAT,!1,0,0)),He.hasColors&&vn.vertexColors!==ie&&(E.bindBuffer(E.ARRAY_BUFFER,Tn.color),E.bufferData(E.ARRAY_BUFFER,He.colorArray,E.DYNAMIC_DRAW),Z.enableAttribute(Dn.color),E.vertexAttribPointer(Dn.color,3,E.FLOAT,!1,0,0)),Z.disableUnusedAttributes(),E.drawArrays(E.TRIANGLES,0,He.count),He.count=0},this.renderBufferDirect=function(He,vt,vn,Tn,Dn,mr){Ni(Tn);var Ar=lr(He,vt,Tn,Dn),yi=!1,ns=vn.id+"_"+Ar.id+"_"+Tn.wireframe;ns!==Cn&&(Cn=ns,yi=!0);var Ki=Dn.morphTargetInfluences;if(void 0!==Ki){for(var Qi=[],fr=0,Eo=Ki.length;fr<Eo;fr++)Qi.push([No=Ki[fr],fr]);Qi.sort(jn),Qi.length>8&&(Qi.length=8);var ul=vn.morphAttributes;for(fr=0,Eo=Qi.length;fr<Eo;fr++){var No;if(Ne[fr]=(No=Qi[fr])[0],0!==No[0]){var Jo=No[1];!0===Tn.morphTargets&&ul.position&&vn.addAttribute("morphTarget"+fr,ul.position[Jo]),!0===Tn.morphNormals&&ul.normal&&vn.addAttribute("morphNormal"+fr,ul.normal[Jo])}else!0===Tn.morphTargets&&vn.removeAttribute("morphTarget"+fr),!0===Tn.morphNormals&&vn.removeAttribute("morphNormal"+fr)}fr=Qi.length;for(var ma=Ne.length;fr<ma;fr++)Ne[fr]=0;Ar.getUniforms().setValue(E,"morphTargetInfluences",Ne),yi=!0}Jo=vn.index;var yl,Aa=vn.attributes.position,Ur=1;!0===Tn.wireframe&&(Jo=ve.getWireframeAttribute(vn),Ur=2),null!==Jo?(yl=st).setIndex(Jo):yl=Ue,yi&&(function zn(He,vt,vn,Tn){var Dn;if(vn&&vn.isInstancedBufferGeometry&&null===(Dn=P.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===Tn&&(Tn=0),Z.initAttributes();var mr=vn.attributes,Ar=vt.getAttributes(),yi=He.defaultAttributeValues;for(var ns in Ar){var Ki=Ar[ns];if(Ki>=0){var Qi=mr[ns];if(void 0!==Qi){var fr=Qi.normalized,Eo=Qi.itemSize,No=ve.getAttributeProperties(Qi),ul=No.__webglBuffer,ma=No.type,Jo=No.bytesPerElement;if(Qi.isInterleavedBufferAttribute){var Aa=Qi.data,Ur=Aa.stride,yl=Qi.offset;Aa&&Aa.isInstancedInterleavedBuffer?(Z.enableAttributeAndDivisor(Ki,Aa.meshPerAttribute,Dn),void 0===vn.maxInstancedCount&&(vn.maxInstancedCount=Aa.meshPerAttribute*Aa.count)):Z.enableAttribute(Ki),E.bindBuffer(E.ARRAY_BUFFER,ul),E.vertexAttribPointer(Ki,Eo,ma,fr,Ur*Jo,(Tn*Ur+yl)*Jo)}else Qi.isInstancedBufferAttribute?(Z.enableAttributeAndDivisor(Ki,Qi.meshPerAttribute,Dn),void 0===vn.maxInstancedCount&&(vn.maxInstancedCount=Qi.meshPerAttribute*Qi.count)):Z.enableAttribute(Ki),E.bindBuffer(E.ARRAY_BUFFER,ul),E.vertexAttribPointer(Ki,Eo,ma,fr,0,Tn*Eo*Jo)}else if(void 0!==yi){var pc=yi[ns];if(void 0!==pc)switch(pc.length){case 2:E.vertexAttrib2fv(Ki,pc);break;case 3:E.vertexAttrib3fv(Ki,pc);break;case 4:E.vertexAttrib4fv(Ki,pc);break;default:E.vertexAttrib1fv(Ki,pc)}}}}Z.disableUnusedAttributes()}}(Tn,Ar,vn),null!==Jo&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,ve.getAttributeBuffer(Jo)));var pc=0;null!==Jo?pc=Jo.count:void 0!==Aa&&(pc=Aa.count);var gc=vn.drawRange.start*Ur,cu=vn.drawRange.count*Ur,Tp=null!==mr?mr.start*Ur:0,qf=null!==mr?mr.count*Ur:1/0,uu=Math.max(gc,Tp),Ec=Math.min(pc,gc+cu,Tp+qf)-1,du=Math.max(0,Ec-uu+1);if(0!==du){if(Dn.isMesh)if(!0===Tn.wireframe)Z.setLineWidth(Tn.wireframeLinewidth*Wt()),yl.setMode(E.LINES);else switch(Dn.drawMode){case Io:yl.setMode(E.TRIANGLES);break;case Vl:yl.setMode(E.TRIANGLE_STRIP);break;case Zr:yl.setMode(E.TRIANGLE_FAN)}else if(Dn.isLine){var Mp=Tn.linewidth;void 0===Mp&&(Mp=1),Z.setLineWidth(Mp*Wt()),yl.setMode(Dn.isLineSegments?E.LINES:E.LINE_STRIP)}else Dn.isPoints&&yl.setMode(E.POINTS);vn&&vn.isInstancedBufferGeometry?vn.maxInstancedCount>0&&yl.renderInstances(vn,uu,du):yl.render(uu,du)}},this.render=function(He,vt,vn,Tn){if(void 0===vt||!0===vt.isCamera){Cn="",$t=-1,pn=null,!0===He.autoUpdate&&He.updateMatrixWorld(),null===vt.parent&&vt.updateMatrixWorld(),vt.matrixWorldInverse.getInverse(vt.matrixWorld),c.multiplyMatrices(vt.projectionMatrix,vt.matrixWorldInverse),Cr.setFromMatrix(c),re.length=0,_e=-1,Fe=-1,ut.length=0,ct.length=0,oi=Ji.init(this.clippingPlanes,ii=this.localClippingEnabled,vt),Si(He,vt),me.length=_e+1,Oe.length=Fe+1,!0===rt.sortObjects&&(me.sort(pi),Oe.sort(Vn)),oi&&Ji.beginShadows(),function ir(He){for(var vt=0,vn=0,Tn=He.length;vn<Tn;vn++){var Dn=He[vn];Dn.castShadow&&(C.shadows[vt++]=Dn)}C.shadows.length=vt}(re),Yt.render(He,vt),function Nt(He,vt){var vn,Tn,Dn,ns,Ki,Qi,fr,mr=0,Ar=0,yi=0,Eo=vt.matrixWorldInverse,No=0,ul=0,ma=0,Jo=0,Aa=0;for(vn=0,Tn=He.length;vn<Tn;vn++)if(ns=(Dn=He[vn]).color,Ki=Dn.intensity,Qi=Dn.distance,fr=Dn.shadow&&Dn.shadow.map?Dn.shadow.map.texture:null,Dn.isAmbientLight)mr+=ns.r*Ki,Ar+=ns.g*Ki,yi+=ns.b*Ki;else if(Dn.isDirectionalLight)(Ur=Be.get(Dn)).color.copy(Dn.color).multiplyScalar(Dn.intensity),Ur.direction.setFromMatrixPosition(Dn.matrixWorld),h.setFromMatrixPosition(Dn.target.matrixWorld),Ur.direction.sub(h),Ur.direction.transformDirection(Eo),Ur.shadow=Dn.castShadow,Dn.castShadow&&(Ur.shadowBias=Dn.shadow.bias,Ur.shadowRadius=Dn.shadow.radius,Ur.shadowMapSize=Dn.shadow.mapSize),C.directionalShadowMap[No]=fr,C.directionalShadowMatrix[No]=Dn.shadow.matrix,C.directional[No++]=Ur;else if(Dn.isSpotLight)(Ur=Be.get(Dn)).position.setFromMatrixPosition(Dn.matrixWorld),Ur.position.applyMatrix4(Eo),Ur.color.copy(ns).multiplyScalar(Ki),Ur.distance=Qi,Ur.direction.setFromMatrixPosition(Dn.matrixWorld),h.setFromMatrixPosition(Dn.target.matrixWorld),Ur.direction.sub(h),Ur.direction.transformDirection(Eo),Ur.coneCos=Math.cos(Dn.angle),Ur.penumbraCos=Math.cos(Dn.angle*(1-Dn.penumbra)),Ur.decay=0===Dn.distance?0:Dn.decay,Ur.shadow=Dn.castShadow,Dn.castShadow&&(Ur.shadowBias=Dn.shadow.bias,Ur.shadowRadius=Dn.shadow.radius,Ur.shadowMapSize=Dn.shadow.mapSize),C.spotShadowMap[ma]=fr,C.spotShadowMatrix[ma]=Dn.shadow.matrix,C.spot[ma++]=Ur;else if(Dn.isRectAreaLight)(Ur=Be.get(Dn)).color.copy(ns).multiplyScalar(Ki/(Dn.width*Dn.height)),Ur.position.setFromMatrixPosition(Dn.matrixWorld),Ur.position.applyMatrix4(Eo),_.identity(),m.copy(Dn.matrixWorld),m.premultiply(Eo),_.extractRotation(m),Ur.halfWidth.set(.5*Dn.width,0,0),Ur.halfHeight.set(0,.5*Dn.height,0),Ur.halfWidth.applyMatrix4(_),Ur.halfHeight.applyMatrix4(_),C.rectArea[Jo++]=Ur;else if(Dn.isPointLight)(Ur=Be.get(Dn)).position.setFromMatrixPosition(Dn.matrixWorld),Ur.position.applyMatrix4(Eo),Ur.color.copy(Dn.color).multiplyScalar(Dn.intensity),Ur.distance=Dn.distance,Ur.decay=0===Dn.distance?0:Dn.decay,Ur.shadow=Dn.castShadow,Dn.castShadow&&(Ur.shadowBias=Dn.shadow.bias,Ur.shadowRadius=Dn.shadow.radius,Ur.shadowMapSize=Dn.shadow.mapSize),C.pointShadowMap[ul]=fr,void 0===C.pointShadowMatrix[ul]&&(C.pointShadowMatrix[ul]=new Vs),h.setFromMatrixPosition(Dn.matrixWorld).negate(),C.pointShadowMatrix[ul].identity().setPosition(h),C.point[ul++]=Ur;else if(Dn.isHemisphereLight){var Ur;(Ur=Be.get(Dn)).direction.setFromMatrixPosition(Dn.matrixWorld),Ur.direction.transformDirection(Eo),Ur.direction.normalize(),Ur.skyColor.copy(Dn.color).multiplyScalar(Ki),Ur.groundColor.copy(Dn.groundColor).multiplyScalar(Ki),C.hemi[Aa++]=Ur}C.ambient[0]=mr,C.ambient[1]=Ar,C.ambient[2]=yi,C.directional.length=No,C.spot.length=ma,C.rectArea.length=Jo,C.point.length=ul,C.hemi.length=Aa,C.hash=No+","+ul+","+ma+","+Jo+","+Aa+","+C.shadows.length}(re,vt),oi&&Ji.endShadows(),A.calls=0,A.vertices=0,A.faces=0,A.points=0,void 0===vn&&(vn=null),this.setRenderTarget(vn);var Dn=He.background;if(null===Dn?Z.buffers.color.setClear(Ii.r,Ii.g,Ii.b,Qt,B):Dn&&Dn.isColor&&(Z.buffers.color.setClear(Dn.r,Dn.g,Dn.b,1,B),Tn=!0),(this.autoClear||Tn)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),Dn&&Dn.isCubeTexture?(wt.projectionMatrix.copy(vt.projectionMatrix),wt.matrixWorld.extractRotation(vt.matrixWorld),wt.matrixWorldInverse.getInverse(wt.matrixWorld),xt.material.uniforms.tCube.value=Dn,xt.modelViewMatrix.multiplyMatrices(wt.matrixWorldInverse,xt.matrixWorld),ve.update(xt),rt.renderBufferDirect(wt,null,xt.geometry,xt.material,xt,null)):Dn&&Dn.isTexture&&(Ut.material.map=Dn,ve.update(Ut),rt.renderBufferDirect(tt,null,Ut.geometry,Ut.material,Ut,null)),He.overrideMaterial){var mr=He.overrideMaterial;Gn(me,He,vt,mr),Gn(Oe,He,vt,mr)}else Z.setBlending(V),Gn(me,He,vt),Gn(Oe,He,vt);lt.render(He,vt),Zt.render(He,vt,$n),vn&&ge.updateRenderTargetMipmap(vn),Z.setDepthTest(!0),Z.setDepthWrite(!0),Z.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(He,vt){Z.setCullFace(He),Z.setFlipSided(vt===q)},this.allocTextureUnit=function li(){var He=zi;return He>=$.maxTextures&&console.warn("WebGLRenderer: trying to use "+He+" texture units while this GPU supports only "+$.maxTextures),zi+=1,He},this.setTexture2D=(He=!1,function(vn,Tn){vn&&vn.isWebGLRenderTarget&&(He||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),He=!0),vn=vn.texture),ge.setTexture2D(vn,Tn)}),this.setTexture=function(){var He=!1;return function(vn,Tn){He||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),He=!0),ge.setTexture2D(vn,Tn)}}(),this.setTextureCube=function(){var He=!1;return function(vn,Tn){vn&&vn.isWebGLRenderTargetCube&&(He||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),He=!0),vn=vn.texture),vn&&vn.isCubeTexture||Array.isArray(vn.image)&&6===vn.image.length?ge.setTextureCube(vn,Tn):ge.setTextureCubeDynamic(vn,Tn)}}(),this.getCurrentRenderTarget=function(){return St},this.setRenderTarget=function(He){St=He,He&&void 0===he.get(He).__webglFramebuffer&&ge.setupRenderTarget(He);var vn,vt=He&&He.isWebGLRenderTargetCube;if(He){var Tn=he.get(He);vn=vt?Tn.__webglFramebuffer[He.activeCubeFace]:Tn.__webglFramebuffer,ln.copy(He.scissor),In=He.scissorTest,$n.copy(He.viewport)}else vn=null,ln.copy(Vi).multiplyScalar(gi),In=ki,$n.copy(Ti).multiplyScalar(gi);if(tn!==vn&&(E.bindFramebuffer(E.FRAMEBUFFER,vn),tn=vn),Z.scissor(ln),Z.setScissorTest(In),Z.viewport($n),vt){var Dn=he.get(He.texture);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+He.activeCubeFace,Dn.__webglTexture,He.activeMipMapLevel)}},this.readRenderTargetPixels=function(He,vt,vn,Tn,Dn,mr){if(!1!==(He&&He.isWebGLRenderTarget)){var Ar=he.get(He).__webglFramebuffer;if(Ar){var yi=!1;Ar!==tn&&(E.bindFramebuffer(E.FRAMEBUFFER,Ar),yi=!0);try{var ns=He.texture,Ki=ns.format,Qi=ns.type;if(Ki!==sa&&Hi(Ki)!==E.getParameter(E.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(Qi===on||Hi(Qi)===E.getParameter(E.IMPLEMENTATION_COLOR_READ_TYPE)||Qi===Ss&&(P.get("OES_texture_float")||P.get("WEBGL_color_buffer_float"))||Qi===xs&&P.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");E.checkFramebufferStatus(E.FRAMEBUFFER)===E.FRAMEBUFFER_COMPLETE?vt>=0&&vt<=He.width-Tn&&vn>=0&&vn<=He.height-Dn&&E.readPixels(vt,vn,Tn,Dn,Hi(Ki),Hi(Qi),mr):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{yi&&E.bindFramebuffer(E.FRAMEBUFFER,tn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function eh(a,d){this.name="",this.color=new ps(a),this.density=void 0!==d?d:25e-5}function ru(a,d,g){this.name="",this.color=new ps(a),this.near=void 0!==d?d:1,this.far=void 0!==g?g:1e3}function th(){Or.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Pd(a,d,g,y,x){Or.call(this),this.lensFlares=[],this.positionScreen=new an,this.customUpdateCallback=void 0,void 0!==a&&this.add(a,d,g,y,x)}function od(a){bo.call(this),this.type="SpriteMaterial",this.color=new ps(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(a)}function zu(a){Or.call(this),this.type="Sprite",this.material=void 0!==a?a:new od}function Ra(){Or.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function wh(a,d,g){if(this.useVertexTexture=void 0===g||g,this.identityMatrix=new Vs,this.bones=(a=a||[]).slice(0),this.useVertexTexture){var y=Math.sqrt(4*this.bones.length);y=js.nextPowerOfTwo(Math.ceil(y)),y=Math.max(y,4),this.boneTextureWidth=y,this.boneTextureHeight=y,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new Is(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,sa,Ss)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===d)this.calculateInverses();else if(this.bones.length===d.length)this.boneInverses=d.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var x=0,M=this.bones.length;x<M;x++)this.boneInverses.push(new Vs)}}function Om(){Or.call(this),this.type="Bone"}function Kg(a,d,g){Ya.call(this,a,d),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Vs,this.bindMatrixInverse=new Vs;var y=[];if(this.geometry&&void 0!==this.geometry.bones){for(var x,M,O=0,B=this.geometry.bones.length;O<B;++O)M=this.geometry.bones[O],x=new Om,y.push(x),x.name=M.name,x.position.fromArray(M.pos),x.quaternion.fromArray(M.rotq),void 0!==M.scl&&x.scale.fromArray(M.scl);for(O=0,B=this.geometry.bones.length;O<B;++O)-1!==(M=this.geometry.bones[O]).parent&&null!==M.parent&&void 0!==y[M.parent]?y[M.parent].add(y[O]):this.add(y[O])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new wh(y,void 0,g),this.matrixWorld)}function kl(a){bo.call(this),this.type="LineBasicMaterial",this.color=new ps(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(a)}function Vu(a,d,g){if(1===g)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new $o(a,d);Or.call(this),this.type="Line",this.geometry=void 0!==a?a:new Wr,this.material=void 0!==d?d:new kl({color:16777215*Math.random()})}function $o(a,d){Vu.call(this,a,d),this.type="LineSegments"}function su(a){bo.call(this),this.type="PointsMaterial",this.color=new ps(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(a)}function po(a,d){Or.call(this),this.type="Points",this.geometry=void 0!==a?a:new Wr,this.material=void 0!==d?d:new su({color:16777215*Math.random()})}function gp(){Or.call(this),this.type="Group"}function mp(a,d,g,y,x,M,O,B,ae){_a.call(this,a,d,g,y,x,M,O,B,ae),this.generateMipmaps=!1;var re=this;!function me(){requestAnimationFrame(me),a.readyState>=a.HAVE_CURRENT_DATA&&(re.needsUpdate=!0)}()}function ou(a,d,g,y,x,M,O,B,ae,re,me,_e){_a.call(this,null,M,O,B,ae,re,y,x,me,_e),this.image={width:d,height:g},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}function vp(a,d,g,y,x,M,O,B,ae){_a.call(this,a,d,g,y,x,M,O,B,ae),this.needsUpdate=!0}function Zg(a,d,g,y,x,M,O,B,ae,re){if((re=void 0!==re?re:dt)!==dt&&re!==et)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===g&&re===dt&&(g=hi),void 0===g&&re===et&&(g=Ga),_a.call(this,null,y,x,M,O,B,re,g,ae),this.image={width:a,height:d},this.magFilter=void 0!==O?O:Go,this.minFilter=void 0!==B?B:Go,this.flipY=!1,this.generateMipmaps=!1}function Rd(a){Wr.call(this);var d=[0,0],g={};function y(Ii,Qt){return Ii-Qt}var x=["a","b","c"];if(a&&a.isGeometry){for(var M=a.vertices,O=a.faces,B=0,ae=new Uint32Array(6*O.length),re=0,me=O.length;re<me;re++)for(var _e=O[re],Oe=0;Oe<3;Oe++)d[0]=_e[x[Oe]],d[1]=_e[x[(Oe+1)%3]],d.sort(y),void 0===g[Fe=d.toString()]&&(ae[2*B]=d[0],ae[2*B+1]=d[1],g[Fe]=!0,B++);var Ne=new Float32Array(2*B*3);for(re=0,me=B;re<me;re++)for(Oe=0;Oe<2;Oe++){var ut=M[ae[2*re+Oe]];Ne[0+(ct=6*re+3*Oe)]=ut.x,Ne[ct+1]=ut.y,Ne[ct+2]=ut.z}this.addAttribute("position",new Tr(Ne,3))}else if(a&&a.isBufferGeometry)if(null!==a.index){var rt=a.index.array,At=(M=a.attributes.position,a.groups);B=0,0===At.length&&a.addGroup(0,rt.length),ae=new Uint32Array(2*rt.length);for(var St=0,tn=At.length;St<tn;++St)for(var $t=At[St],Cn=$t.start,ln=(re=Cn,Cn+$t.count);re<ln;re+=3)for(Oe=0;Oe<3;Oe++){var Fe;d[0]=rt[re+Oe],d[1]=rt[re+(Oe+1)%3],d.sort(y),void 0===g[Fe=d.toString()]&&(ae[2*B]=d[0],ae[2*B+1]=d[1],g[Fe]=!0,B++)}for(Ne=new Float32Array(2*B*3),re=0,me=B;re<me;re++)for(Oe=0;Oe<2;Oe++)Ne[0+(ct=6*re+3*Oe)]=M.getX(In=ae[2*re+Oe]),Ne[ct+1]=M.getY(In),Ne[ct+2]=M.getZ(In);this.addAttribute("position",new Tr(Ne,3))}else{var $n=(B=(M=a.attributes.position.array).length/3)/3;for(Ne=new Float32Array(2*B*3),re=0,me=$n;re<me;re++)for(Oe=0;Oe<3;Oe++){var ct,In,zi=9*re+3*Oe;Ne[0+(ct=18*re+6*Oe)]=M[zi],Ne[ct+1]=M[zi+1],Ne[ct+2]=M[zi+2],Ne[ct+3]=M[In=9*re+(Oe+1)%3*3],Ne[ct+4]=M[In+1],Ne[ct+5]=M[In+2]}this.addAttribute("position",new Tr(Ne,3))}}function rf(a,d,g){Wr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:a,slices:d,stacks:g};var M,O,B,ae,re,y=[],x=[],me=d+1;for(M=0;M<=g;M++)for(re=M/g,O=0;O<=d;O++)B=a(ae=O/d,re),y.push(B.x,B.y,B.z),x.push(ae,re);var Fe,Ne,ut,_e=[];for(M=0;M<g;M++)for(O=0;O<d;O++)Ne=(M+1)*me+O+1,_e.push(M*me+O,Fe=M*me+O+1,ut=(M+1)*me+O),_e.push(Fe,Ne,ut);this.setIndex(new(_e.length>65535?sd:Qh)(_e,1)),this.addAttribute("position",new Ms(y,3)),this.addAttribute("uv",new Ms(x,2)),this.computeVertexNormals()}function sf(a,d,g){Qs.call(this),this.type="ParametricGeometry",this.parameters={func:a,slices:d,stacks:g},this.fromBufferGeometry(new rf(a,d,g)),this.mergeVertices()}function wc(a,d,g,y){Wr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:a,indices:d,radius:g,detail:y},g=g||1;var x=[],M=[];function B(rt,At,St,tn){var pn,ln,$t=Math.pow(2,tn),Cn=[];for(pn=0;pn<=$t;pn++){Cn[pn]=[];var In=rt.clone().lerp(St,pn/$t),$n=At.clone().lerp(St,pn/$t),zi=$t-pn;for(ln=0;ln<=zi;ln++)Cn[pn][ln]=0===ln&&pn===$t?In:In.clone().lerp($n,ln/zi)}for(pn=0;pn<$t;pn++)for(ln=0;ln<2*($t-pn)-1;ln++){var Ii=Math.floor(ln/2);ln%2==0?(_e(Cn[pn][Ii+1]),_e(Cn[pn+1][Ii]),_e(Cn[pn][Ii])):(_e(Cn[pn][Ii+1]),_e(Cn[pn+1][Ii+1]),_e(Cn[pn+1][Ii]))}}function _e(rt){x.push(rt.x,rt.y,rt.z)}function Oe(rt,At){var St=3*rt;At.x=a[St+0],At.y=a[St+1],At.z=a[St+2]}function Ne(rt,At,St,tn){tn<0&&1===rt.x&&(M[At]=rt.x-1),0===St.x&&0===St.z&&(M[At]=tn/2/Math.PI+.5)}function ut(rt){return Math.atan2(rt.z,-rt.x)}function ct(rt){return Math.atan2(-rt.y,Math.sqrt(rt.x*rt.x+rt.z*rt.z))}(function O(rt){for(var At=new an,St=new an,tn=new an,$t=0;$t<d.length;$t+=3)Oe(d[$t+0],At),Oe(d[$t+1],St),Oe(d[$t+2],tn),B(At,St,tn,rt)})(y=y||0),function ae(rt){for(var At=new an,St=0;St<x.length;St+=3)At.x=x[St+0],At.y=x[St+1],At.z=x[St+2],At.normalize().multiplyScalar(rt),x[St+0]=At.x,x[St+1]=At.y,x[St+2]=At.z}(g),function re(){for(var rt=new an,At=0;At<x.length;At+=3){rt.x=x[At+0],rt.y=x[At+1],rt.z=x[At+2];var St=ut(rt)/2/Math.PI+.5,tn=ct(rt)/Math.PI+.5;M.push(St,1-tn)}(function Fe(){for(var rt=new an,At=new an,St=new an,tn=new an,$t=new hr,Cn=new hr,pn=new hr,ln=0,In=0;ln<x.length;ln+=9,In+=6){rt.set(x[ln+0],x[ln+1],x[ln+2]),At.set(x[ln+3],x[ln+4],x[ln+5]),St.set(x[ln+6],x[ln+7],x[ln+8]),$t.set(M[In+0],M[In+1]),Cn.set(M[In+2],M[In+3]),pn.set(M[In+4],M[In+5]),tn.copy(rt).add(At).add(St).divideScalar(3);var $n=ut(tn);Ne($t,In+0,rt,$n),Ne(Cn,In+2,At,$n),Ne(pn,In+4,St,$n)}})(),function me(){for(var rt=0;rt<M.length;rt+=6){var At=M[rt+0],St=M[rt+2],tn=M[rt+4],$t=Math.max(At,St,tn),Cn=Math.min(At,St,tn);$t>.9&&Cn<.1&&(At<.2&&(M[rt+0]+=1),St<.2&&(M[rt+2]+=1),tn<.2&&(M[rt+4]+=1))}}()}(),this.addAttribute("position",new Ms(x,3)),this.addAttribute("normal",new Ms(x.slice(),3)),this.addAttribute("uv",new Ms(M,2)),this.normalizeNormals(),this.boundingSphere=new Lt(new an,g)}function Ol(a,d){wc.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,d),this.type="TetrahedronBufferGeometry",this.parameters={radius:a,detail:d}}function nh(a,d){Qs.call(this),this.type="TetrahedronGeometry",this.parameters={radius:a,detail:d},this.fromBufferGeometry(new Ol(a,d)),this.mergeVertices()}function Iu(a,d){wc.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,d),this.type="OctahedronBufferGeometry",this.parameters={radius:a,detail:d}}function Ah(a,d){Qs.call(this),this.type="OctahedronGeometry",this.parameters={radius:a,detail:d},this.fromBufferGeometry(new Iu(a,d)),this.mergeVertices()}function af(a,d){var g=(1+Math.sqrt(5))/2;wc.call(this,[-1,g,0,1,g,0,-1,-g,0,1,-g,0,0,-1,g,0,1,g,0,-1,-g,0,1,-g,g,0,-1,g,0,1,-g,0,-1,-g,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,d),this.type="IcosahedronBufferGeometry",this.parameters={radius:a,detail:d}}function yp(a,d){Qs.call(this),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:d},this.fromBufferGeometry(new af(a,d)),this.mergeVertices()}function kd(a,d){var g=(1+Math.sqrt(5))/2,y=1/g;wc.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-y,-g,0,-y,g,0,y,-g,0,y,g,-y,-g,0,-y,g,0,y,-g,0,y,g,0,-g,0,-y,g,0,-y,-g,0,y,g,0,y],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,d),this.type="DodecahedronBufferGeometry",this.parameters={radius:a,detail:d}}function ng(a,d){Qs.call(this),this.type="DodecahedronGeometry",this.parameters={radius:a,detail:d},this.fromBufferGeometry(new kd(a,d)),this.mergeVertices()}function pa(a,d,g,y){Qs.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:d,radius:g,detail:y},this.fromBufferGeometry(new wc(a,d,g,y)),this.mergeVertices()}function lf(a,d,g,y,x){Wr.call(this),this.type="TubeBufferGeometry",this.parameters={path:a,tubularSegments:d,radius:g,radialSegments:y,closed:x},g=g||1,y=y||8;var M=a.computeFrenetFrames(d=d||64,x=x||!1);this.tangents=M.tangents,this.normals=M.normals,this.binormals=M.binormals;var re,me,O=new an,B=new an,ae=new hr,_e=[],Oe=[],Fe=[],Ne=[];function ct(St){var tn=a.getPointAt(St/d),$t=M.normals[St],Cn=M.binormals[St];for(me=0;me<=y;me++){var pn=me/y*Math.PI*2,ln=Math.sin(pn),In=-Math.cos(pn);B.x=In*$t.x+ln*Cn.x,B.y=In*$t.y+ln*Cn.y,B.z=In*$t.z+ln*Cn.z,B.normalize(),Oe.push(B.x,B.y,B.z),O.x=tn.x+g*B.x,O.y=tn.y+g*B.y,O.z=tn.z+g*B.z,_e.push(O.x,O.y,O.z)}}(function ut(){for(re=0;re<d;re++)ct(re);ct(!1===x?d:0),function At(){for(re=0;re<=d;re++)for(me=0;me<=y;me++)ae.x=re/d,ae.y=me/y,Fe.push(ae.x,ae.y)}(),function rt(){for(me=1;me<=d;me++)for(re=1;re<=y;re++){var tn=(y+1)*me+(re-1),$t=(y+1)*me+re,Cn=(y+1)*(me-1)+re;Ne.push((y+1)*(me-1)+(re-1),tn,Cn),Ne.push(tn,$t,Cn)}}()})(),this.setIndex(new(Ne.length>65535?sd:Qh)(Ne,1)),this.addAttribute("position",new Ms(_e,3)),this.addAttribute("normal",new Ms(Oe,3)),this.addAttribute("uv",new Ms(Fe,2))}function ih(a,d,g,y,x,M){Qs.call(this),this.type="TubeGeometry",this.parameters={path:a,tubularSegments:d,radius:g,radialSegments:y,closed:x},void 0!==M&&console.warn("THREE.TubeGeometry: taper has been removed.");var O=new lf(a,d,g,y,x);this.tangents=O.tangents,this.normals=O.normals,this.binormals=O.binormals,this.fromBufferGeometry(O),this.mergeVertices()}function Il(a,d,g,y,x,M){Wr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:a,tube:d,tubularSegments:g,radialSegments:y,p:x,q:M},a=a||100,d=d||40,g=Math.floor(g)||64,x=x||2,M=M||3;var Oe,Fe,O=((y=Math.floor(y)||8)+1)*(g+1),B=y*g*2*3,ae=new Tr(new(B>65535?Uint32Array:Uint16Array)(B),1),re=new Tr(new Float32Array(3*O),3),me=new Tr(new Float32Array(3*O),3),_e=new Tr(new Float32Array(2*O),2),Ne=0,ut=0,ct=new an,rt=new an,At=new hr,St=new an,tn=new an,$t=new an,Cn=new an,pn=new an;for(Oe=0;Oe<=g;++Oe){var ln=Oe/g*x*Math.PI*2;for(gi(ln,x,M,a,St),gi(ln+.01,x,M,a,tn),Cn.subVectors(tn,St),pn.addVectors(tn,St),$t.crossVectors(Cn,pn),pn.crossVectors($t,Cn),$t.normalize(),pn.normalize(),Fe=0;Fe<=y;++Fe){var In=Fe/y*Math.PI*2,$n=-d*Math.cos(In),zi=d*Math.sin(In);ct.x=St.x+($n*pn.x+zi*$t.x),ct.y=St.y+($n*pn.y+zi*$t.y),ct.z=St.z+($n*pn.z+zi*$t.z),re.setXYZ(Ne,ct.x,ct.y,ct.z),rt.subVectors(ct,St).normalize(),me.setXYZ(Ne,rt.x,rt.y,rt.z),At.x=Oe/g,At.y=Fe/y,_e.setXY(Ne,At.x,At.y),Ne++}}for(Fe=1;Fe<=g;Fe++)for(Oe=1;Oe<=y;Oe++){var Qt=(y+1)*Fe+(Oe-1),en=(y+1)*Fe+Oe,si=(y+1)*(Fe-1)+Oe;ae.setX(ut,(y+1)*(Fe-1)+(Oe-1)),ut++,ae.setX(ut,Qt),ut++,ae.setX(ut,si),ut++,ae.setX(ut,Qt),ut++,ae.setX(ut,en),ut++,ae.setX(ut,si),ut++}function gi(Vi,ki,Ti,Cr,Ji){var oi=Math.cos(Vi),ii=Math.sin(Vi),f=Ti/ki*Vi,c=Math.cos(f);Ji.x=Cr*(2+c)*.5*oi,Ji.y=Cr*(2+c)*ii*.5,Ji.z=Cr*Math.sin(f)*.5}this.setIndex(ae),this.addAttribute("position",re),this.addAttribute("normal",me),this.addAttribute("uv",_e)}function xh(a,d,g,y,x,M,O){Qs.call(this),this.type="TorusKnotGeometry",this.parameters={radius:a,tube:d,tubularSegments:g,radialSegments:y,p:x,q:M},void 0!==O&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Il(a,d,g,y,x,M)),this.mergeVertices()}function ad(a,d,g,y,x){Wr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:a,tube:d,radialSegments:g,tubularSegments:y,arc:x},a=a||100,d=d||40,g=Math.floor(g)||8,y=Math.floor(y)||6,x=x||2*Math.PI;var rt,At,M=(g+1)*(y+1),O=g*y*2*3,B=new(O>65535?Uint32Array:Uint16Array)(O),ae=new Float32Array(3*M),re=new Float32Array(3*M),me=new Float32Array(2*M),_e=0,Oe=0,Fe=0,Ne=new an,ut=new an,ct=new an;for(rt=0;rt<=g;rt++)for(At=0;At<=y;At++){var St=At/y*x,tn=rt/g*Math.PI*2;ut.x=(a+d*Math.cos(tn))*Math.cos(St),ut.y=(a+d*Math.cos(tn))*Math.sin(St),ut.z=d*Math.sin(tn),ae[_e]=ut.x,ae[_e+1]=ut.y,ae[_e+2]=ut.z,Ne.x=a*Math.cos(St),Ne.y=a*Math.sin(St),ct.subVectors(ut,Ne).normalize(),re[_e]=ct.x,re[_e+1]=ct.y,re[_e+2]=ct.z,me[Oe]=At/y,me[Oe+1]=rt/g,_e+=3,Oe+=2}for(rt=1;rt<=g;rt++)for(At=1;At<=y;At++){var Cn=(y+1)*(rt-1)+At-1,pn=(y+1)*(rt-1)+At,ln=(y+1)*rt+At;B[Fe]=(y+1)*rt+At-1,B[Fe+1]=Cn,B[Fe+2]=ln,B[Fe+3]=Cn,B[Fe+4]=pn,B[Fe+5]=ln,Fe+=6}this.setIndex(new Tr(B,1)),this.addAttribute("position",new Tr(ae,3)),this.addAttribute("normal",new Tr(re,3)),this.addAttribute("uv",new Tr(me,2))}function rh(a,d,g,y,x){Qs.call(this),this.type="TorusGeometry",this.parameters={radius:a,tube:d,radialSegments:g,tubularSegments:y,arc:x},this.fromBufferGeometry(new ad(a,d,g,y,x))}eh.prototype.isFogExp2=!0,eh.prototype.clone=function(){return new eh(this.color.getHex(),this.density)},eh.prototype.toJSON=function(a){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ru.prototype.isFog=!0,ru.prototype.clone=function(){return new ru(this.color.getHex(),this.near,this.far)},ru.prototype.toJSON=function(a){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},(th.prototype=Object.create(Or.prototype)).constructor=th,th.prototype.copy=function(a,d){return Or.prototype.copy.call(this,a,d),null!==a.background&&(this.background=a.background.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this},th.prototype.toJSON=function(a){var d=Or.prototype.toJSON.call(this,a);return null!==this.background&&(d.object.background=this.background.toJSON(a)),null!==this.fog&&(d.object.fog=this.fog.toJSON()),d},Pd.prototype=Object.assign(Object.create(Or.prototype),{constructor:Pd,isLensFlare:!0,copy:function(a){Or.prototype.copy.call(this,a),this.positionScreen.copy(a.positionScreen),this.customUpdateCallback=a.customUpdateCallback;for(var d=0,g=a.lensFlares.length;d<g;d++)this.lensFlares.push(a.lensFlares[d]);return this},add:function(a,d,g,y,x,M){void 0===d&&(d=-1),void 0===g&&(g=0),void 0===M&&(M=1),void 0===x&&(x=new ps(16777215)),void 0===y&&(y=J),g=Math.min(g,Math.max(0,g)),this.lensFlares.push({texture:a,size:d,distance:g,x:0,y:0,z:0,scale:1,rotation:0,opacity:M,color:x,blending:y})},updateLensFlares:function(){var a,g,d=this.lensFlares.length,y=2*-this.positionScreen.x,x=2*-this.positionScreen.y;for(a=0;a<d;a++)(g=this.lensFlares[a]).x=this.positionScreen.x+y*g.distance,g.y=this.positionScreen.y+x*g.distance,g.wantedRotation=g.x*Math.PI*.25,g.rotation+=.25*(g.wantedRotation-g.rotation)}}),(od.prototype=Object.create(bo.prototype)).constructor=od,od.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.rotation=a.rotation,this},zu.prototype=Object.assign(Object.create(Or.prototype),{constructor:zu,isSprite:!0,raycast:function(){var a=new an;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var x=g.ray.distanceSqToPoint(a);x>this.scale.x*this.scale.y/4||y.push({distance:Math.sqrt(x),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),Ra.prototype=Object.assign(Object.create(Or.prototype),{constructor:Ra,copy:function(a){Or.prototype.copy.call(this,a,!1);for(var d=a.levels,g=0,y=d.length;g<y;g++){var x=d[g];this.addLevel(x.object.clone(),x.distance)}return this},addLevel:function(a,d){void 0===d&&(d=0),d=Math.abs(d);for(var g=this.levels,y=0;y<g.length&&!(d<g[y].distance);y++);g.splice(y,0,{distance:d,object:a}),this.add(a)},getObjectForDistance:function(a){for(var d=this.levels,g=1,y=d.length;g<y&&!(a<d[g].distance);g++);return d[g-1].object},raycast:function(){var a=new an;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var x=g.ray.origin.distanceTo(a);this.getObjectForDistance(x).raycast(g,y)}}(),update:function(){var a=new an,d=new an;return function(y){var x=this.levels;if(x.length>1){a.setFromMatrixPosition(y.matrixWorld),d.setFromMatrixPosition(this.matrixWorld);var M=a.distanceTo(d);x[0].object.visible=!0;for(var O=1,B=x.length;O<B&&M>=x[O].distance;O++)x[O-1].object.visible=!1,x[O].object.visible=!0;for(;O<B;O++)x[O].object.visible=!1}}}(),toJSON:function(a){var d=Or.prototype.toJSON.call(this,a);d.object.levels=[];for(var g=this.levels,y=0,x=g.length;y<x;y++){var M=g[y];d.object.levels.push({object:M.object.uuid,distance:M.distance})}return d}}),Object.assign(wh.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,d=this.bones.length;a<d;a++){var g=new Vs;this.bones[a]&&g.getInverse(this.bones[a].matrixWorld),this.boneInverses.push(g)}},pose:function(){for(var a,d=0,g=this.bones.length;d<g;d++)(a=this.bones[d])&&a.matrixWorld.getInverse(this.boneInverses[d]);for(d=0,g=this.bones.length;d<g;d++)(a=this.bones[d])&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))},update:function(){var a=new Vs;return function(){for(var g=0,y=this.bones.length;g<y;g++)a.multiplyMatrices(this.bones[g]?this.bones[g].matrixWorld:this.identityMatrix,this.boneInverses[g]),a.toArray(this.boneMatrices,16*g);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new wh(this.bones,this.boneInverses,this.useVertexTexture)}}),Om.prototype=Object.assign(Object.create(Or.prototype),{constructor:Om,isBone:!0}),Kg.prototype=Object.assign(Object.create(Ya.prototype),{constructor:Kg,isSkinnedMesh:!0,bind:function(a,d){this.skeleton=a,void 0===d&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),d=this.matrixWorld),this.bindMatrix.copy(d),this.bindMatrixInverse.getInverse(d)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var d=this.geometry.skinWeights[a];(g=1/d.lengthManhattan())!=1/0?d.multiplyScalar(g):d.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var y=new ba,x=this.geometry.attributes.skinWeight;for(a=0;a<x.count;a++){var g;y.x=x.getX(a),y.y=x.getY(a),y.z=x.getZ(a),y.w=x.getW(a),(g=1/y.lengthManhattan())!=1/0?y.multiplyScalar(g):y.set(1,0,0,0),x.setXYZW(a,y.x,y.y,y.z,y.w)}}},updateMatrixWorld:function(a){Ya.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),(kl.prototype=Object.create(bo.prototype)).constructor=kl,kl.prototype.isLineBasicMaterial=!0,kl.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this},Vu.prototype=Object.assign(Object.create(Or.prototype),{constructor:Vu,isLine:!0,raycast:function(){var a=new Vs,d=new La,g=new Lt;return function(x,M){var O=x.linePrecision,B=O*O,ae=this.geometry,re=this.matrixWorld;if(null===ae.boundingSphere&&ae.computeBoundingSphere(),g.copy(ae.boundingSphere),g.applyMatrix4(re),!1!==x.ray.intersectsSphere(g)){a.getInverse(re),d.copy(x.ray).applyMatrix4(a);var me=new an,_e=new an,Oe=new an,Fe=new an,Ne=this&&this.isLineSegments?2:1;if(ae.isBufferGeometry){var ut=ae.index,rt=ae.attributes.position.array;if(null!==ut)for(var At=ut.array,St=0,tn=At.length-1;St<tn;St+=Ne){var Cn=At[St+1];me.fromArray(rt,3*At[St]),_e.fromArray(rt,3*Cn),d.distanceSqToSegment(me,_e,Fe,Oe)>B||(Fe.applyMatrix4(this.matrixWorld),(ln=x.ray.origin.distanceTo(Fe))<x.near||ln>x.far||M.push({distance:ln,point:Oe.clone().applyMatrix4(this.matrixWorld),index:St,face:null,faceIndex:null,object:this}))}else for(St=0,tn=rt.length/3-1;St<tn;St+=Ne)me.fromArray(rt,3*St),_e.fromArray(rt,3*St+3),d.distanceSqToSegment(me,_e,Fe,Oe)>B||(Fe.applyMatrix4(this.matrixWorld),(ln=x.ray.origin.distanceTo(Fe))<x.near||ln>x.far||M.push({distance:ln,point:Oe.clone().applyMatrix4(this.matrixWorld),index:St,face:null,faceIndex:null,object:this}))}else if(ae.isGeometry){var In=ae.vertices,$n=In.length;for(St=0;St<$n-1;St+=Ne){var ln;d.distanceSqToSegment(In[St],In[St+1],Fe,Oe)>B||(Fe.applyMatrix4(this.matrixWorld),(ln=x.ray.origin.distanceTo(Fe))<x.near||ln>x.far||M.push({distance:ln,point:Oe.clone().applyMatrix4(this.matrixWorld),index:St,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),$o.prototype=Object.assign(Object.create(Vu.prototype),{constructor:$o,isLineSegments:!0}),(su.prototype=Object.create(bo.prototype)).constructor=su,su.prototype.isPointsMaterial=!0,su.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this},po.prototype=Object.assign(Object.create(Or.prototype),{constructor:po,isPoints:!0,raycast:function(){var a=new Vs,d=new La,g=new Lt;return function(x,M){var O=this,B=this.geometry,ae=this.matrixWorld,re=x.params.Points.threshold;if(null===B.boundingSphere&&B.computeBoundingSphere(),g.copy(B.boundingSphere),g.applyMatrix4(ae),!1!==x.ray.intersectsSphere(g)){a.getInverse(ae),d.copy(x.ray).applyMatrix4(a);var me=re/((this.scale.x+this.scale.y+this.scale.z)/3),_e=me*me,Oe=new an;if(B.isBufferGeometry){var Ne=B.index,ct=B.attributes.position.array;if(null!==Ne)for(var rt=Ne.array,At=0,St=rt.length;At<St;At++){var tn=rt[At];Oe.fromArray(ct,3*tn),Fe(Oe,tn)}else{At=0;for(var $t=ct.length/3;At<$t;At++)Oe.fromArray(ct,3*At),Fe(Oe,At)}}else{var Cn=B.vertices;for(At=0,$t=Cn.length;At<$t;At++)Fe(Cn[At],At)}}function Fe(pn,ln){var In=d.distanceSqToPoint(pn);if(In<_e){var $n=d.closestPointToPoint(pn);$n.applyMatrix4(ae);var zi=x.ray.origin.distanceTo($n);if(zi<x.near||zi>x.far)return;M.push({distance:zi,distanceToRay:Math.sqrt(In),point:$n.clone(),index:ln,face:null,object:O})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),gp.prototype=Object.assign(Object.create(Or.prototype),{constructor:gp}),(mp.prototype=Object.create(_a.prototype)).constructor=mp,(ou.prototype=Object.create(_a.prototype)).constructor=ou,ou.prototype.isCompressedTexture=!0,(vp.prototype=Object.create(_a.prototype)).constructor=vp,(Zg.prototype=Object.create(_a.prototype)).constructor=Zg,Zg.prototype.isDepthTexture=!0,(Rd.prototype=Object.create(Wr.prototype)).constructor=Rd,(rf.prototype=Object.create(Wr.prototype)).constructor=rf,(sf.prototype=Object.create(Qs.prototype)).constructor=sf,(wc.prototype=Object.create(Wr.prototype)).constructor=wc,(Ol.prototype=Object.create(wc.prototype)).constructor=Ol,(nh.prototype=Object.create(Qs.prototype)).constructor=nh,(Iu.prototype=Object.create(wc.prototype)).constructor=Iu,(Ah.prototype=Object.create(Qs.prototype)).constructor=Ah,(af.prototype=Object.create(wc.prototype)).constructor=af,(yp.prototype=Object.create(Qs.prototype)).constructor=yp,(kd.prototype=Object.create(wc.prototype)).constructor=kd,(ng.prototype=Object.create(Qs.prototype)).constructor=ng,(pa.prototype=Object.create(Qs.prototype)).constructor=pa,(lf.prototype=Object.create(Wr.prototype)).constructor=lf,(ih.prototype=Object.create(Qs.prototype)).constructor=ih,(Il.prototype=Object.create(Wr.prototype)).constructor=Il,(xh.prototype=Object.create(Qs.prototype)).constructor=xh,(ad.prototype=Object.create(Wr.prototype)).constructor=ad,(rh.prototype=Object.create(Qs.prototype)).constructor=rh;var sl={area:function(a){for(var d=a.length,g=0,y=d-1,x=0;x<d;y=x++)g+=a[y].x*a[x].y-a[x].x*a[y].y;return.5*g},triangulate:function(){function a(d,g,y,x,M,O){var B,ae,re,me,_e,Oe,Fe,Ne,ut,ct,rt,At,St,tn,$t;if(((me=d[O[y]].x)-(ae=d[O[g]].x))*((Fe=d[O[x]].y)-(re=d[O[g]].y))-((_e=d[O[y]].y)-re)*((Oe=d[O[x]].x)-ae)<=0)return!1;for(ct=Oe-me,rt=Fe-_e,At=ae-Oe,St=re-Fe,tn=me-ae,$t=_e-re,B=0;B<M;B++)if(ut=d[O[B]].y,!((Ne=d[O[B]].x)===ae&&ut===re||Ne===me&&ut===_e||Ne===Oe&&ut===Fe)&&ct*(ut-_e)-rt*(Ne-me)>=-Number.EPSILON&&At*(ut-Fe)-St*(Ne-Oe)>=-Number.EPSILON&&tn*(ut-re)-$t*(Ne-ae)>=-Number.EPSILON)return!1;return!0}return function(g,y){var x=g.length;if(x<3)return null;var ae,re,me,M=[],O=[],B=[];if(sl.area(g)>0)for(re=0;re<x;re++)O[re]=re;else for(re=0;re<x;re++)O[re]=x-1-re;var _e=x,Oe=2*_e;for(re=_e-1;_e>2;){if(Oe--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),y?B:M;if(_e<=(ae=re)&&(ae=0),_e<=(re=ae+1)&&(re=0),_e<=(me=re+1)&&(me=0),a(g,ae,re,me,_e,O)){var ct,rt;for(M.push([g[O[ae]],g[O[re]],g[O[me]]]),B.push([O[ae],O[re],O[me]]),ct=re,rt=re+1;rt<_e;ct++,rt++)O[ct]=O[rt];Oe=2*--_e}}return y?B:M}}(),triangulateShape:function(a,d){function g(St){var tn=St.length;tn>2&&St[tn-1].equals(St[0])&&St.pop()}function y(St,tn,$t){return St.x!==tn.x?St.x<tn.x?St.x<=$t.x&&$t.x<=tn.x:tn.x<=$t.x&&$t.x<=St.x:St.y<tn.y?St.y<=$t.y&&$t.y<=tn.y:tn.y<=$t.y&&$t.y<=St.y}function x(St,tn,$t,Cn,pn){var ln=tn.x-St.x,In=tn.y-St.y,$n=Cn.x-$t.x,zi=Cn.y-$t.y,Ii=St.x-$t.x,Qt=St.y-$t.y,en=In*$n-ln*zi,si=In*Ii-ln*Qt;if(Math.abs(en)>Number.EPSILON){var gi;if(en>0){if(si<0||si>en)return[];if((gi=zi*Ii-$n*Qt)<0||gi>en)return[]}else{if(si>0||si<en)return[];if((gi=zi*Ii-$n*Qt)>0||gi<en)return[]}if(0===gi)return!pn||0!==si&&si!==en?[St]:[];if(gi===en)return!pn||0!==si&&si!==en?[tn]:[];if(0===si)return[$t];if(si===en)return[Cn];var Vi=gi/en;return[{x:St.x+Vi*ln,y:St.y+Vi*In}]}if(0!==si||zi*Ii!=$n*Qt)return[];var Cr,Ji,oi,ii,f,c,h,m,ki=0===ln&&0===In,Ti=0===$n&&0===zi;return ki&&Ti?St.x!==$t.x||St.y!==$t.y?[]:[St]:ki?y($t,Cn,St)?[St]:[]:Ti?y(St,tn,$t)?[$t]:[]:(0!==ln?(St.x<tn.x?(Cr=St,oi=St.x,Ji=tn,ii=tn.x):(Cr=tn,oi=tn.x,Ji=St,ii=St.x),$t.x<Cn.x?(f=$t,h=$t.x,c=Cn,m=Cn.x):(f=Cn,h=Cn.x,c=$t,m=$t.x)):(St.y<tn.y?(Cr=St,oi=St.y,Ji=tn,ii=tn.y):(Cr=tn,oi=tn.y,Ji=St,ii=St.y),$t.y<Cn.y?(f=$t,h=$t.y,c=Cn,m=Cn.y):(f=Cn,h=Cn.y,c=$t,m=$t.y)),oi<=h?ii<h?[]:ii===h?pn?[]:[f]:ii<=m?[f,Ji]:[f,c]:oi>m?[]:oi===m?pn?[]:[Cr]:ii<=m?[Cr,Ji]:[Cr,c])}function M(St,tn,$t,Cn){var pn=tn.x-St.x,ln=tn.y-St.y,In=$t.x-St.x,$n=$t.y-St.y,zi=Cn.x-St.x,Ii=Cn.y-St.y,Qt=pn*$n-ln*In,en=pn*Ii-ln*zi;if(Math.abs(Qt)>Number.EPSILON){var si=zi*$n-Ii*In;return Qt>0?en>=0&&si>=0:en>=0||si>=0}return en>0}g(a),d.forEach(g);for(var B,ae,re,me,_e,Oe,Fe={},Ne=a.concat(),ut=0,ct=d.length;ut<ct;ut++)Array.prototype.push.apply(Ne,d[ut]);for(B=0,ae=Ne.length;B<ae;B++)void 0!==Fe[_e=Ne[B].x+":"+Ne[B].y]&&console.warn("THREE.ShapeUtils: Duplicate point",_e,B),Fe[_e]=B;var rt=function O(St,tn){var Cn,$t=St.concat();function pn(m,_){var C=$t.length-1,A=m-1;A<0&&(A=C);var E=m+1;E>C&&(E=0);var F=M($t[m],$t[A],$t[E],Cn[_]);if(!F)return!1;var P=Cn.length-1,$=_-1;$<0&&($=P);var Z=_+1;return Z>P&&(Z=0),!!(F=M(Cn[_],Cn[$],Cn[Z],$t[m]))}function ln(m,_){var C,A;for(C=0;C<$t.length;C++)if(A=C+1,x(m,_,$t[C],$t[A%=$t.length],!0).length>0)return!0;return!1}var In=[];function $n(m,_){var C,A,E,F;for(C=0;C<In.length;C++)for(A=tn[In[C]],E=0;E<A.length;E++)if(F=E+1,x(m,_,A[E],A[F%=A.length],!0).length>0)return!0;return!1}for(var zi,Ii,Qt,en,si,gi,ki,Ti,Cr,Ji,Vi=[],oi=0,ii=tn.length;oi<ii;oi++)In.push(oi);for(var f=0,c=2*In.length;In.length>0;){if(--c<0){console.log("Infinite Loop! Holes left:"+In.length+", Probably Hole outside Shape!");break}for(Ii=f;Ii<$t.length;Ii++){for(Qt=$t[Ii],zi=-1,oi=0;oi<In.length;oi++)if(void 0===Vi[gi=Qt.x+":"+Qt.y+":"+(si=In[oi])]){Cn=tn[si];for(var h=0;h<Cn.length;h++)if(en=Cn[h],pn(Ii,h)&&!ln(Qt,en)&&!$n(Qt,en)){zi=h,In.splice(oi,1),ki=$t.slice(0,Ii+1),Ti=$t.slice(Ii),Cr=Cn.slice(zi),Ji=Cn.slice(0,zi+1),$t=ki.concat(Cr).concat(Ji).concat(Ti),f=Ii;break}if(zi>=0)break;Vi[gi]=!0}if(zi>=0)break}}return $t}(a,d),At=sl.triangulate(rt,!1);for(B=0,ae=At.length;B<ae;B++)for(me=At[B],re=0;re<3;re++)void 0!==(Oe=Fe[_e=me[re].x+":"+me[re].y])&&(me[re]=Oe);return At.concat()},isClockWise:function(a){return sl.area(a)<0},b2:function(x,M,O,B){return function a(y,x){var M=1-y;return M*M*x}(x,M)+function d(y,x){return 2*(1-y)*y*x}(x,O)+function g(y,x){return y*y*x}(x,B)},b3:function(M,O,B,ae,re){return function a(x,M){var O=1-x;return O*O*O*M}(M,O)+function d(x,M){var O=1-x;return 3*O*O*x*M}(M,B)+function g(x,M){return 3*(1-x)*x*x*M}(M,ae)+function y(x,M){return x*x*x*M}(M,re)}};function Su(a,d){typeof a>"u"?a=[]:(Qs.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,d),this.computeFaceNormals())}function Ih(a,d){var g=(d=d||{}).font;if(!1===(g&&g.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Qs;var y=g.generateShapes(a,d.size,d.curveSegments);d.amount=void 0!==d.height?d.height:50,void 0===d.bevelThickness&&(d.bevelThickness=10),void 0===d.bevelSize&&(d.bevelSize=8),void 0===d.bevelEnabled&&(d.bevelEnabled=!1),Su.call(this,y,d),this.type="TextGeometry"}function ka(a,d,g,y,x,M,O){Wr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:a,widthSegments:d,heightSegments:g,phiStart:y,phiLength:x,thetaStart:M,thetaLength:O},a=a||50,d=Math.max(3,Math.floor(d)||8),g=Math.max(2,Math.floor(g)||6),y=void 0!==y?y:0,x=void 0!==x?x:2*Math.PI;for(var B=(M=void 0!==M?M:0)+(O=void 0!==O?O:Math.PI),ae=(d+1)*(g+1),re=new Tr(new Float32Array(3*ae),3),me=new Tr(new Float32Array(3*ae),3),_e=new Tr(new Float32Array(2*ae),2),Oe=0,Fe=[],Ne=new an,ut=0;ut<=g;ut++){for(var ct=[],rt=ut/g,At=0;At<=d;At++){var St=At/d,tn=-a*Math.cos(y+St*x)*Math.sin(M+rt*O),$t=a*Math.cos(M+rt*O),Cn=a*Math.sin(y+St*x)*Math.sin(M+rt*O);Ne.set(tn,$t,Cn).normalize(),re.setXYZ(Oe,tn,$t,Cn),me.setXYZ(Oe,Ne.x,Ne.y,Ne.z),_e.setXY(Oe,St,1-rt),ct.push(Oe),Oe++}Fe.push(ct)}var pn=[];for(ut=0;ut<g;ut++)for(At=0;At<d;At++){var In=Fe[ut][At],$n=Fe[ut+1][At],zi=Fe[ut+1][At+1];(0!==ut||M>0)&&pn.push(Fe[ut][At+1],In,zi),(ut!==g-1||B<Math.PI)&&pn.push(In,$n,zi)}this.setIndex(new(re.count>65535?sd:Qh)(pn,1)),this.addAttribute("position",re),this.addAttribute("normal",me),this.addAttribute("uv",_e),this.boundingSphere=new Lt(new an,a)}function ga(a,d,g,y,x,M,O){Qs.call(this),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:d,heightSegments:g,phiStart:y,phiLength:x,thetaStart:M,thetaLength:O},this.fromBufferGeometry(new ka(a,d,g,y,x,M,O))}function so(a,d,g,y,x,M){Wr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:a,outerRadius:d,thetaSegments:g,phiSegments:y,thetaStart:x,thetaLength:M},a=a||20,d=d||50,x=void 0!==x?x:0,M=void 0!==M?M:2*Math.PI;var Ne,St,tn,O=((g=void 0!==g?Math.max(3,g):8)+1)*((y=void 0!==y?Math.max(1,y):1)+1),B=g*y*2*3,ae=new Tr(new(B>65535?Uint32Array:Uint16Array)(B),1),re=new Tr(new Float32Array(3*O),3),me=new Tr(new Float32Array(3*O),3),_e=new Tr(new Float32Array(2*O),2),Oe=0,Fe=0,ut=a,ct=(d-a)/y,rt=new an,At=new hr;for(St=0;St<=y;St++){for(tn=0;tn<=g;tn++)Ne=x+tn/g*M,rt.x=ut*Math.cos(Ne),rt.y=ut*Math.sin(Ne),re.setXYZ(Oe,rt.x,rt.y,rt.z),me.setXYZ(Oe,0,0,1),At.x=(rt.x/d+1)/2,At.y=(rt.y/d+1)/2,_e.setXY(Oe,At.x,At.y),Oe++;ut+=ct}for(St=0;St<y;St++){var $t=St*(g+1);for(tn=0;tn<g;tn++){var Cn=Ne=tn+$t,pn=Ne+g+1,ln=Ne+g+2,In=Ne+1;ae.setX(Fe,Cn),Fe++,ae.setX(Fe,pn),Fe++,ae.setX(Fe,ln),Fe++,ae.setX(Fe,Cn),Fe++,ae.setX(Fe,ln),Fe++,ae.setX(Fe,In),Fe++}}this.setIndex(ae),this.addAttribute("position",re),this.addAttribute("normal",me),this.addAttribute("uv",_e)}function vr(a,d,g,y,x,M){Qs.call(this),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:d,thetaSegments:g,phiSegments:y,thetaStart:x,thetaLength:M},this.fromBufferGeometry(new so(a,d,g,y,x,M))}function Fm(a,d,g,y){Qs.call(this),this.type="PlaneGeometry",this.parameters={width:a,height:d,widthSegments:g,heightSegments:y},this.fromBufferGeometry(new Pa(a,d,g,y))}function qo(a,d,g,y){Wr.call(this),this.type="LatheBufferGeometry",this.parameters={points:a,segments:d,phiStart:g,phiLength:y},d=Math.floor(d)||12,g=g||0,y=y||2*Math.PI,y=js.clamp(y,0,2*Math.PI);var _e,ut,ct,x=(d+1)*a.length,M=d*a.length*2*3,O=new Tr(new(M>65535?Uint32Array:Uint16Array)(M),1),B=new Tr(new Float32Array(3*x),3),ae=new Tr(new Float32Array(2*x),2),re=0,me=0,Oe=1/d,Fe=new an,Ne=new hr;for(ut=0;ut<=d;ut++){var rt=g+ut*Oe*y,At=Math.sin(rt),St=Math.cos(rt);for(ct=0;ct<=a.length-1;ct++)Fe.x=a[ct].x*At,Fe.y=a[ct].y,Fe.z=a[ct].x*St,B.setXYZ(re,Fe.x,Fe.y,Fe.z),Ne.x=ut/d,Ne.y=ct/(a.length-1),ae.setXY(re,Ne.x,Ne.y),re++}for(ut=0;ut<d;ut++)for(ct=0;ct<a.length-1;ct++){var $t=(_e=ct+ut*a.length)+a.length,Cn=_e+a.length+1,pn=_e+1;O.setX(me,_e),me++,O.setX(me,$t),me++,O.setX(me,pn),me++,O.setX(me,$t),me++,O.setX(me,Cn),me++,O.setX(me,pn),me++}if(this.setIndex(O),this.addAttribute("position",B),this.addAttribute("uv",ae),this.computeVertexNormals(),y===2*Math.PI){var ln=this.attributes.normal.array,In=new an,$n=new an,zi=new an;for(_e=d*a.length*3,ut=0,ct=0;ut<a.length;ut++,ct+=3)In.x=ln[ct+0],In.y=ln[ct+1],In.z=ln[ct+2],$n.x=ln[_e+ct+0],$n.y=ln[_e+ct+1],$n.z=ln[_e+ct+2],zi.addVectors(In,$n).normalize(),ln[ct+0]=ln[_e+ct+0]=zi.x,ln[ct+1]=ln[_e+ct+1]=zi.y,ln[ct+2]=ln[_e+ct+2]=zi.z}}function Nf(a,d,g,y){Qs.call(this),this.type="LatheGeometry",this.parameters={points:a,segments:d,phiStart:g,phiLength:y},this.fromBufferGeometry(new qo(a,d,g,y)),this.mergeVertices()}function ig(a,d){Wr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:a,curveSegments:d},d=d||12;var g=[],y=[],x=[],M=[],O=0,B=0;if(!1===Array.isArray(a))re(a);else for(var ae=0;ae<a.length;ae++)re(a[ae]),this.addGroup(O,B,ae),O+=B,B=0;function re(me){var _e,Oe,Fe,Ne=g.length/3,ut=me.extractPoints(d),ct=ut.shape,rt=ut.holes;if(!1===sl.isClockWise(ct))for(ct=ct.reverse(),_e=0,Oe=rt.length;_e<Oe;_e++)!0===sl.isClockWise(Fe=rt[_e])&&(rt[_e]=Fe.reverse());var At=sl.triangulateShape(ct,rt);for(_e=0,Oe=rt.length;_e<Oe;_e++)ct=ct.concat(Fe=rt[_e]);for(_e=0,Oe=ct.length;_e<Oe;_e++){var St=ct[_e];g.push(St.x,St.y,0),y.push(0,0,1),x.push(St.x,St.y)}for(_e=0,Oe=At.length;_e<Oe;_e++){var tn=At[_e];M.push(tn[0]+Ne,tn[1]+Ne,tn[2]+Ne),B+=3}}this.setIndex(new(M.length>65535?sd:Qh)(M,1)),this.addAttribute("position",new Ms(g,3)),this.addAttribute("normal",new Ms(y,3)),this.addAttribute("uv",new Ms(x,2))}function rg(a,d){Qs.call(this),this.type="ShapeGeometry","object"==typeof d&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),d=d.curveSegments),this.parameters={shapes:a,curveSegments:d},this.fromBufferGeometry(new ig(a,d)),this.mergeVertices()}function Wl(a,d){Wr.call(this),d=void 0!==d?d:1;var g=Math.cos(js.DEG2RAD*d),y=[0,0],x={};function M(At,St){return At-St}var B,O=["a","b","c"];a.isBufferGeometry?(B=new Qs).fromBufferGeometry(a):B=a.clone(),B.mergeVertices(),B.computeFaceNormals();for(var ae=B.vertices,re=B.faces,me=0,_e=re.length;me<_e;me++)for(var Oe=re[me],Fe=0;Fe<3;Fe++)y[0]=Oe[O[Fe]],y[1]=Oe[O[(Fe+1)%3]],y.sort(M),void 0===x[Ne=y.toString()]?x[Ne]={vert1:y[0],vert2:y[1],face1:me,face2:void 0}:x[Ne].face2=me;var ut=[];for(var Ne in x){var ct=x[Ne];if(void 0===ct.face2||re[ct.face1].normal.dot(re[ct.face2].normal)<=g){var rt=ae[ct.vert1];ut.push(rt.x),ut.push(rt.y),ut.push(rt.z),ut.push((rt=ae[ct.vert2]).x),ut.push(rt.y),ut.push(rt.z)}}this.addAttribute("position",new Ms(ut,3))}function Bf(a,d,g,y,x,M,O,B){Wr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:a,radiusBottom:d,height:g,radialSegments:y,heightSegments:x,openEnded:M,thetaStart:O,thetaLength:B};var ae=this;a=void 0!==a?a:20,d=void 0!==d?d:20,g=void 0!==g?g:100,y=Math.floor(y)||8,x=Math.floor(x)||1,M=void 0!==M&&M,O=void 0!==O?O:0,B=void 0!==B?B:2*Math.PI;var re=0;!1===M&&(a>0&&re++,d>0&&re++);var me=function $t(){var In=(y+1)*(x+1);return!1===M&&(In+=(y+1)*re+y*re),In}(),_e=function Cn(){var In=y*x*2*3;return!1===M&&(In+=y*re*3),In}(),Oe=new Tr(new(_e>65535?Uint32Array:Uint16Array)(_e),1),Fe=new Tr(new Float32Array(3*me),3),Ne=new Tr(new Float32Array(3*me),3),ut=new Tr(new Float32Array(2*me),2),ct=0,rt=0,At=[],St=g/2,tn=0;function ln(In){var $n,zi,Ii,Qt=new hr,en=new an,si=0,gi=!0===In?a:d,Vi=!0===In?1:-1;for(zi=ct,$n=1;$n<=y;$n++)Fe.setXYZ(ct,0,St*Vi,0),Ne.setXYZ(ct,0,Vi,0),Qt.x=.5,Qt.y=.5,ut.setXY(ct,Qt.x,Qt.y),ct++;for(Ii=ct,$n=0;$n<=y;$n++){var Ti=$n/y*B+O,Cr=Math.cos(Ti),Ji=Math.sin(Ti);en.x=gi*Ji,en.y=St*Vi,en.z=gi*Cr,Fe.setXYZ(ct,en.x,en.y,en.z),Ne.setXYZ(ct,0,Vi,0),Qt.x=.5*Cr+.5,Qt.y=.5*Ji*Vi+.5,ut.setXY(ct,Qt.x,Qt.y),ct++}for($n=0;$n<y;$n++){var oi=zi+$n,ii=Ii+$n;!0===In?(Oe.setX(rt,ii),rt++,Oe.setX(rt,ii+1),rt++,Oe.setX(rt,oi),rt++):(Oe.setX(rt,ii+1),rt++,Oe.setX(rt,ii),rt++,Oe.setX(rt,oi),rt++),si+=3}ae.addGroup(tn,si,!0===In?1:2),tn+=si}(function pn(){var In,$n,zi=new an,Ii=new an,Qt=0,en=(d-a)/g;for($n=0;$n<=x;$n++){var si=[],gi=$n/x,Vi=gi*(d-a)+a;for(In=0;In<=y;In++){var ki=In/y,Ti=ki*B+O,Cr=Math.sin(Ti),Ji=Math.cos(Ti);Ii.x=Vi*Cr,Ii.y=-gi*g+St,Ii.z=Vi*Ji,Fe.setXYZ(ct,Ii.x,Ii.y,Ii.z),zi.set(Cr,en,Ji).normalize(),Ne.setXYZ(ct,zi.x,zi.y,zi.z),ut.setXY(ct,ki,1-gi),si.push(ct),ct++}At.push(si)}for(In=0;In<y;In++)for($n=0;$n<x;$n++){var ii=At[$n+1][In],f=At[$n+1][In+1],c=At[$n][In+1];Oe.setX(rt,At[$n][In]),rt++,Oe.setX(rt,ii),rt++,Oe.setX(rt,c),rt++,Oe.setX(rt,ii),rt++,Oe.setX(rt,f),rt++,Oe.setX(rt,c),rt++,Qt+=6}ae.addGroup(tn,Qt,0),tn+=Qt})(),!1===M&&(a>0&&ln(!0),d>0&&ln(!1)),this.setIndex(Oe),this.addAttribute("position",Fe),this.addAttribute("normal",Ne),this.addAttribute("uv",ut)}function Ac(a,d,g,y,x,M,O,B){Qs.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:a,radiusBottom:d,height:g,radialSegments:y,heightSegments:x,openEnded:M,thetaStart:O,thetaLength:B},this.fromBufferGeometry(new Bf(a,d,g,y,x,M,O,B)),this.mergeVertices()}function sg(a,d,g,y,x,M,O){Ac.call(this,0,a,d,g,y,x,M,O),this.type="ConeGeometry",this.parameters={radius:a,height:d,radialSegments:g,heightSegments:y,openEnded:x,thetaStart:M,thetaLength:O}}function og(a,d,g,y,x,M,O){Bf.call(this,0,a,d,g,y,x,M,O),this.type="ConeBufferGeometry",this.parameters={radius:a,height:d,radialSegments:g,heightSegments:y,openEnded:x,thetaStart:M,thetaLength:O}}function ol(a,d,g,y){Wr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:a,segments:d,thetaStart:g,thetaLength:y},a=a||50,d=void 0!==d?Math.max(3,d):8,g=void 0!==g?g:0,y=void 0!==y?y:2*Math.PI;var x=d+2,M=new Float32Array(3*x),O=new Float32Array(3*x),B=new Float32Array(2*x);O[2]=1,B[0]=.5,B[1]=.5;for(var ae=0,re=3,me=2;ae<=d;ae++,re+=3,me+=2){var _e=g+ae/d*y;M[re]=a*Math.cos(_e),M[re+1]=a*Math.sin(_e),O[re+2]=1,B[me]=(M[re]/a+1)/2,B[me+1]=(M[re+1]/a+1)/2}var Oe=[];for(re=1;re<=d;re++)Oe.push(re,re+1,0);this.setIndex(new Tr(new Uint16Array(Oe),1)),this.addAttribute("position",new Tr(M,3)),this.addAttribute("normal",new Tr(O,3)),this.addAttribute("uv",new Tr(B,2)),this.boundingSphere=new Lt(new an,a)}function uc(a,d,g,y){Qs.call(this),this.type="CircleGeometry",this.parameters={radius:a,segments:d,thetaStart:g,thetaLength:y},this.fromBufferGeometry(new ol(a,d,g,y))}function Zl(a,d,g,y,x,M){Qs.call(this),this.type="BoxGeometry",this.parameters={width:a,height:d,depth:g,widthSegments:y,heightSegments:x,depthSegments:M},this.fromBufferGeometry(new cc(a,d,g,y,x,M)),this.mergeVertices()}(Su.prototype=Object.create(Qs.prototype)).constructor=Su,Su.prototype.addShapeList=function(a,d){for(var g=a.length,y=0;y<g;y++)this.addShape(a[y],d)},Su.prototype.addShape=function(a,d){var me,Fe,Ne,ut,ct,g=void 0!==d.amount?d.amount:100,y=void 0!==d.bevelThickness?d.bevelThickness:6,x=void 0!==d.bevelSize?d.bevelSize:y-2,M=void 0!==d.bevelSegments?d.bevelSegments:3,O=void 0===d.bevelEnabled||d.bevelEnabled,B=void 0!==d.curveSegments?d.curveSegments:12,ae=void 0!==d.steps?d.steps:1,re=d.extrudePath,_e=!1,Oe=void 0!==d.UVGenerator?d.UVGenerator:Su.WorldUVGenerator;re&&(me=re.getSpacedPoints(ae),_e=!0,O=!1,Fe=void 0!==d.frames?d.frames:re.computeFrenetFrames(ae,!1),Ne=new an,ut=new an,ct=new an),O||(M=0,y=0,x=0);var rt,At,St,tn=this,$t=this.vertices.length,Cn=a.extractPoints(B),pn=Cn.shape,ln=Cn.holes,In=!sl.isClockWise(pn);if(In){for(pn=pn.reverse(),At=0,St=ln.length;At<St;At++)sl.isClockWise(rt=ln[At])&&(ln[At]=rt.reverse());In=!1}var $n=sl.triangulateShape(pn,ln),zi=pn;for(At=0,St=ln.length;At<St;At++)pn=pn.concat(rt=ln[At]);function Ii(ge,ve,Ee){return ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),ve.clone().multiplyScalar(Ee).add(ge)}var Qt,en,si,gi,Vi,Ti,ki=pn.length,Cr=$n.length;function Ji(ge,ve,Ee){var Be,Ue,st=1,tt=ge.x-ve.x,wt=ge.y-ve.y,Ut=Ee.x-ge.x,Gt=Ee.y-ge.y,xt=tt*tt+wt*wt;if(Math.abs(tt*Gt-wt*Ut)>Number.EPSILON){var Dt=Math.sqrt(xt),Kt=Math.sqrt(Ut*Ut+Gt*Gt),Yt=ve.x-wt/Dt,lt=ve.y+tt/Dt,Ln=((Ee.x-Gt/Kt-Yt)*Gt-(Ee.y+Ut/Kt-lt)*Ut)/(tt*Gt-wt*Ut),sn=(Be=Yt+tt*Ln-ge.x)*Be+(Ue=lt+wt*Ln-ge.y)*Ue;if(sn<=2)return new hr(Be,Ue);st=Math.sqrt(sn/2)}else{var bn=!1;tt>Number.EPSILON?Ut>Number.EPSILON&&(bn=!0):tt<-Number.EPSILON?Ut<-Number.EPSILON&&(bn=!0):Math.sign(wt)===Math.sign(Gt)&&(bn=!0),bn?(Be=-wt,Ue=tt,st=Math.sqrt(xt)):(Be=tt,Ue=wt,st=Math.sqrt(xt/2))}return new hr(Be/st,Ue/st)}for(var oi=[],ii=0,f=zi.length,c=f-1,h=ii+1;ii<f;ii++,c++,h++)c===f&&(c=0),h===f&&(h=0),oi[ii]=Ji(zi[ii],zi[c],zi[h]);var _,A,m=[],C=oi.concat();for(At=0,St=ln.length;At<St;At++){for(_=[],c=(f=(rt=ln[At]).length)-1,h=1+(ii=0);ii<f;ii++,c++,h++)c===f&&(c=0),h===f&&(h=0),_[ii]=Ji(rt[ii],rt[c],rt[h]);m.push(_),C=C.concat(_)}for(Qt=0;Qt<M;Qt++){for(si=Qt/M,gi=y*Math.cos(si*Math.PI/2),en=x*Math.sin(si*Math.PI/2),ii=0,f=zi.length;ii<f;ii++)$((Vi=Ii(zi[ii],oi[ii],en)).x,Vi.y,-gi);for(At=0,St=ln.length;At<St;At++)for(_=m[At],ii=0,f=(rt=ln[At]).length;ii<f;ii++)$((Vi=Ii(rt[ii],_[ii],en)).x,Vi.y,-gi)}for(en=x,ii=0;ii<ki;ii++)Vi=O?Ii(pn[ii],C[ii],en):pn[ii],_e?(ut.copy(Fe.normals[0]).multiplyScalar(Vi.x),Ne.copy(Fe.binormals[0]).multiplyScalar(Vi.y),ct.copy(me[0]).add(ut).add(Ne),$(ct.x,ct.y,ct.z)):$(Vi.x,Vi.y,0);for(A=1;A<=ae;A++)for(ii=0;ii<ki;ii++)Vi=O?Ii(pn[ii],C[ii],en):pn[ii],_e?(ut.copy(Fe.normals[A]).multiplyScalar(Vi.x),Ne.copy(Fe.binormals[A]).multiplyScalar(Vi.y),ct.copy(me[A]).add(ut).add(Ne),$(ct.x,ct.y,ct.z)):$(Vi.x,Vi.y,g/ae*A);for(Qt=M-1;Qt>=0;Qt--){for(si=Qt/M,gi=y*Math.cos(si*Math.PI/2),en=x*Math.sin(si*Math.PI/2),ii=0,f=zi.length;ii<f;ii++)$((Vi=Ii(zi[ii],oi[ii],en)).x,Vi.y,g+gi);for(At=0,St=ln.length;At<St;At++)for(_=m[At],ii=0,f=(rt=ln[At]).length;ii<f;ii++)Vi=Ii(rt[ii],_[ii],en),_e?$(Vi.x,Vi.y+me[ae-1].y,me[ae-1].x+gi):$(Vi.x,Vi.y,g+gi)}function P(ge,ve){var Ee,Be;for(ii=ge.length;--ii>=0;){Ee=ii,(Be=ii-1)<0&&(Be=ge.length-1);var Ue=0,st=ae+2*M;for(Ue=0;Ue<st;Ue++){var tt=ki*Ue,wt=ki*(Ue+1);he(ve+Ee+tt,ve+Be+tt,ve+Be+wt,ve+Ee+wt)}}}function $(ge,ve,Ee){tn.vertices.push(new an(ge,ve,Ee))}function Z(ge,ve,Ee){tn.faces.push(new la(ge+=$t,ve+=$t,Ee+=$t,null,null,0));var Be=Oe.generateTopUV(tn,ge,ve,Ee);tn.faceVertexUvs[0].push(Be)}function he(ge,ve,Ee,Be,Ue,st,tt,wt,Ut){Ee+=$t,tn.faces.push(new la(ge+=$t,ve+=$t,Be+=$t,null,null,1)),tn.faces.push(new la(ve,Ee,Be,null,null,1));var Gt=Oe.generateSideWallUV(tn,ge,ve,Ee,Be);tn.faceVertexUvs[0].push([Gt[0],Gt[1],Gt[3]]),tn.faceVertexUvs[0].push([Gt[1],Gt[2],Gt[3]])}(function E(){if(O){var ge=0,ve=ki*ge;for(ii=0;ii<Cr;ii++)Z((Ti=$n[ii])[2]+ve,Ti[1]+ve,Ti[0]+ve);for(ve=ki*(ge=ae+2*M),ii=0;ii<Cr;ii++)Z((Ti=$n[ii])[0]+ve,Ti[1]+ve,Ti[2]+ve)}else{for(ii=0;ii<Cr;ii++)Z((Ti=$n[ii])[2],Ti[1],Ti[0]);for(ii=0;ii<Cr;ii++)Z((Ti=$n[ii])[0]+ki*ae,Ti[1]+ki*ae,Ti[2]+ki*ae)}})(),function F(){var ge=0;for(P(zi,ge),ge+=zi.length,At=0,St=ln.length;At<St;At++)P(rt=ln[At],ge),ge+=rt.length}()},Su.WorldUVGenerator={generateTopUV:function(a,d,g,y){var x=a.vertices,M=x[d],O=x[g],B=x[y];return[new hr(M.x,M.y),new hr(O.x,O.y),new hr(B.x,B.y)]},generateSideWallUV:function(a,d,g,y,x){var M=a.vertices,O=M[d],B=M[g],ae=M[y],re=M[x];return Math.abs(O.y-B.y)<.01?[new hr(O.x,1-O.z),new hr(B.x,1-B.z),new hr(ae.x,1-ae.z),new hr(re.x,1-re.z)]:[new hr(O.y,1-O.z),new hr(B.y,1-B.z),new hr(ae.y,1-ae.z),new hr(re.y,1-re.z)]}},(Ih.prototype=Object.create(Su.prototype)).constructor=Ih,(ka.prototype=Object.create(Wr.prototype)).constructor=ka,(ga.prototype=Object.create(Qs.prototype)).constructor=ga,(so.prototype=Object.create(Wr.prototype)).constructor=so,(vr.prototype=Object.create(Qs.prototype)).constructor=vr,(Fm.prototype=Object.create(Qs.prototype)).constructor=Fm,(qo.prototype=Object.create(Wr.prototype)).constructor=qo,(Nf.prototype=Object.create(Qs.prototype)).constructor=Nf,(ig.prototype=Object.create(Wr.prototype)).constructor=ig,(rg.prototype=Object.create(Qs.prototype)).constructor=rg,(Wl.prototype=Object.create(Wr.prototype)).constructor=Wl,(Bf.prototype=Object.create(Wr.prototype)).constructor=Bf,(Ac.prototype=Object.create(Qs.prototype)).constructor=Ac,(sg.prototype=Object.create(Ac.prototype)).constructor=sg,(og.prototype=Object.create(Bf.prototype)).constructor=og,(ol.prototype=Object.create(Wr.prototype)).constructor=ol,(uc.prototype=Object.create(Qs.prototype)).constructor=uc,(Zl.prototype=Object.create(Qs.prototype)).constructor=Zl;var ld=Object.freeze({WireframeGeometry:Rd,ParametricGeometry:sf,ParametricBufferGeometry:rf,TetrahedronGeometry:nh,TetrahedronBufferGeometry:Ol,OctahedronGeometry:Ah,OctahedronBufferGeometry:Iu,IcosahedronGeometry:yp,IcosahedronBufferGeometry:af,DodecahedronGeometry:ng,DodecahedronBufferGeometry:kd,PolyhedronGeometry:pa,PolyhedronBufferGeometry:wc,TubeGeometry:ih,TubeBufferGeometry:lf,TorusKnotGeometry:xh,TorusKnotBufferGeometry:Il,TorusGeometry:rh,TorusBufferGeometry:ad,TextGeometry:Ih,SphereBufferGeometry:ka,SphereGeometry:ga,RingGeometry:vr,RingBufferGeometry:so,PlaneBufferGeometry:Pa,PlaneGeometry:Fm,LatheGeometry:Nf,LatheBufferGeometry:qo,ShapeGeometry:rg,ShapeBufferGeometry:ig,ExtrudeGeometry:Su,EdgesGeometry:Wl,ConeGeometry:sg,ConeBufferGeometry:og,CylinderGeometry:Ac,CylinderBufferGeometry:Bf,CircleBufferGeometry:ol,CircleGeometry:uc,BoxBufferGeometry:cc,BoxGeometry:Zl});function cf(){xu.call(this,{uniforms:Dl.merge([Ps.lights,{opacity:{value:1}}]),vertexShader:go.shadow_vert,fragmentShader:go.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})}function vl(a){xu.call(this,a),this.type="RawShaderMaterial"}function Uu(a){this.uuid=js.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(a)?a:[],this.visible=!0}function cd(a){bo.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ps(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ps(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new hr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function ud(a){cd.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(a)}function Ql(a){bo.call(this),this.type="MeshPhongMaterial",this.color=new ps(16777215),this.specular=new ps(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ps(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new hr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=We,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function al(a){Ql.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(a)}function xc(a){bo.call(this,a),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new hr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function _p(a){bo.call(this),this.type="MeshLambertMaterial",this.color=new ps(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ps(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=We,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function zc(a){bo.call(this),this.type="LineDashedMaterial",this.color=new ps(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(a)}(cf.prototype=Object.create(xu.prototype)).constructor=cf,cf.prototype.isShadowMaterial=!0,(vl.prototype=Object.create(xu.prototype)).constructor=vl,vl.prototype.isRawShaderMaterial=!0,Uu.prototype={constructor:Uu,isMultiMaterial:!0,toJSON:function(a){for(var d={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},g=this.materials,y=0,x=g.length;y<x;y++){var M=g[y].toJSON(a);delete M.metadata,d.materials.push(M)}return d.visible=this.visible,d},clone:function(){for(var a=new this.constructor,d=0;d<this.materials.length;d++)a.materials.push(this.materials[d].clone());return a.visible=this.visible,a}},(cd.prototype=Object.create(bo.prototype)).constructor=cd,cd.prototype.isMeshStandardMaterial=!0,cd.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(ud.prototype=Object.create(cd.prototype)).constructor=ud,ud.prototype.isMeshPhysicalMaterial=!0,ud.prototype.copy=function(a){return cd.prototype.copy.call(this,a),this.defines={PHYSICAL:""},this.reflectivity=a.reflectivity,this.clearCoat=a.clearCoat,this.clearCoatRoughness=a.clearCoatRoughness,this},(Ql.prototype=Object.create(bo.prototype)).constructor=Ql,Ql.prototype.isMeshPhongMaterial=!0,Ql.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(al.prototype=Object.create(Ql.prototype)).constructor=al,al.prototype.isMeshToonMaterial=!0,al.prototype.copy=function(a){return Ql.prototype.copy.call(this,a),this.gradientMap=a.gradientMap,this},(xc.prototype=Object.create(bo.prototype)).constructor=xc,xc.prototype.isMeshNormalMaterial=!0,xc.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(_p.prototype=Object.create(bo.prototype)).constructor=_p,_p.prototype.isMeshLambertMaterial=!0,_p.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(zc.prototype=Object.create(bo.prototype)).constructor=zc,zc.prototype.isLineDashedMaterial=!0,zc.prototype.copy=function(a){return bo.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this};var Ov=Object.freeze({ShadowMaterial:cf,SpriteMaterial:od,RawShaderMaterial:vl,ShaderMaterial:xu,PointsMaterial:su,MultiMaterial:Uu,MeshPhysicalMaterial:ud,MeshStandardMaterial:cd,MeshPhongMaterial:Ql,MeshToonMaterial:al,MeshNormalMaterial:xc,MeshLambertMaterial:_p,MeshDepthMaterial:Pi,MeshBasicMaterial:pl,LineDashedMaterial:zc,LineBasicMaterial:kl,Material:bo}),Hu={enabled:!1,files:{},add:function(a,d){!1!==this.enabled&&(this.files[a]=d)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};function Jl(a,d,g){var y=this,x=!1,M=0,O=0;this.onStart=void 0,this.onLoad=a,this.onProgress=d,this.onError=g,this.itemStart=function(B){O++,!1===x&&void 0!==y.onStart&&y.onStart(B,M,O),x=!0},this.itemEnd=function(B){M++,void 0!==y.onProgress&&y.onProgress(B,M,O),M===O&&(x=!1,void 0!==y.onLoad&&y.onLoad())},this.itemError=function(B){void 0!==y.onError&&y.onError(B)}}var Vc=new Jl;function Qo(a){this.manager=void 0!==a?a:Vc}function Nm(a){this.manager=void 0!==a?a:Vc,this._parser=null}Object.assign(Qo.prototype,{load:function(a,d,g,y){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a);var x=this,M=Hu.get(a);if(void 0!==M)return x.manager.itemStart(a),setTimeout(function(){d&&d(M),x.manager.itemEnd(a)},0),M;var B=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(B){var ae=B[1],re=!!B[2],me=B[3];me=window.decodeURIComponent(me),re&&(me=window.atob(me));try{var _e,Oe=(this.responseType||"").toLowerCase();switch(Oe){case"arraybuffer":case"blob":_e=new ArrayBuffer(me.length);for(var Fe=new Uint8Array(_e),Ne=0;Ne<me.length;Ne++)Fe[Ne]=me.charCodeAt(Ne);"blob"===Oe&&(_e=new Blob([_e],{type:ae}));break;case"document":var ut=new DOMParser;_e=ut.parseFromString(me,ae);break;case"json":_e=JSON.parse(me);break;default:_e=me}window.setTimeout(function(){d&&d(_e),x.manager.itemEnd(a)},0)}catch(rt){window.setTimeout(function(){y&&y(rt),x.manager.itemError(a)},0)}}else{var ct=new XMLHttpRequest;ct.open("GET",a,!0),ct.addEventListener("load",function(rt){var At=rt.target.response;Hu.add(a,At),200===this.status?(d&&d(At),x.manager.itemEnd(a)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),d&&d(At),x.manager.itemEnd(a)):(y&&y(rt),x.manager.itemError(a))},!1),void 0!==g&&ct.addEventListener("progress",function(rt){g(rt)},!1),ct.addEventListener("error",function(rt){y&&y(rt),x.manager.itemError(a)},!1),void 0!==this.responseType&&(ct.responseType=this.responseType),void 0!==this.withCredentials&&(ct.withCredentials=this.withCredentials),ct.overrideMimeType&&ct.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),ct.send(null)}return x.manager.itemStart(a),ct},setPath:function(a){return this.path=a,this},setResponseType:function(a){return this.responseType=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setMimeType:function(a){return this.mimeType=a,this}}),Object.assign(Nm.prototype,{load:function(a,d,g,y){var x=this,M=[],O=new ou;O.image=M;var B=new Qo(this.manager);function ae(Oe){B.load(a[Oe],function(Fe){var Ne=x._parser(Fe,!0);M[Oe]={width:Ne.width,height:Ne.height,format:Ne.format,mipmaps:Ne.mipmaps},6===(re+=1)&&(1===Ne.mipmapCount&&(O.minFilter=gn),O.format=Ne.format,O.needsUpdate=!0,d&&d(O))},g,y)}if(B.setPath(this.path),B.setResponseType("arraybuffer"),Array.isArray(a))for(var re=0,me=0,_e=a.length;me<_e;++me)ae(me);else B.load(a,function(Oe){var Fe=x._parser(Oe,!0);if(Fe.isCubemap)for(var Ne=Fe.mipmaps.length/Fe.mipmapCount,ut=0;ut<Ne;ut++){M[ut]={mipmaps:[]};for(var ct=0;ct<Fe.mipmapCount;ct++)M[ut].mipmaps.push(Fe.mipmaps[ut*Fe.mipmapCount+ct]),M[ut].format=Fe.format,M[ut].width=Fe.width,M[ut].height=Fe.height}else O.image.width=Fe.width,O.image.height=Fe.height,O.mipmaps=Fe.mipmaps;1===Fe.mipmapCount&&(O.minFilter=gn),O.format=Fe.format,O.needsUpdate=!0,d&&d(O)},g,y);return O},setPath:function(a){return this.path=a,this}});var Ic=dc;function dc(a){this.manager=void 0!==a?a:Vc,this._parser=null}function Qg(a){this.manager=void 0!==a?a:Vc}function Bm(a){this.manager=void 0!==a?a:Vc}function sh(a){this.manager=void 0!==a?a:Vc}function So(a,d){Or.call(this),this.type="Light",this.color=new ps(a),this.intensity=void 0!==d?d:1,this.receiveShadow=void 0}function Uc(a,d,g){So.call(this,a,g),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Or.DefaultUp),this.updateMatrix(),this.groundColor=new ps(d)}function Od(a){this.camera=a,this.bias=0,this.radius=1,this.mapSize=new hr(512,512),this.map=null,this.matrix=new Vs}function bp(){Od.call(this,new Kl(50,1,.5,500))}function oh(a,d,g,y,x,M){So.call(this,a,d),this.type="SpotLight",this.position.copy(Or.DefaultUp),this.updateMatrix(),this.target=new Or,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(O){this.intensity=O/Math.PI}}),this.distance=void 0!==g?g:0,this.angle=void 0!==y?y:Math.PI/3,this.penumbra=void 0!==x?x:0,this.decay=void 0!==M?M:1,this.shadow=new bp}function Gu(a,d,g,y){So.call(this,a,d),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(x){this.intensity=x/(4*Math.PI)}}),this.distance=void 0!==g?g:0,this.decay=void 0!==y?y:1,this.shadow=new Od(new Kl(90,1,.5,500))}function zf(a){Od.call(this,new Jh(-5,5,5,-5,.5,500))}function Vf(a,d){So.call(this,a,d),this.type="DirectionalLight",this.position.copy(Or.DefaultUp),this.updateMatrix(),this.target=new Or,this.shadow=new zf}function Jg(a,d){So.call(this,a,d),this.type="AmbientLight",this.castShadow=void 0}Object.assign(dc.prototype,{load:function(a,d,g,y){var x=this,M=new Is,O=new Qo(this.manager);return O.setResponseType("arraybuffer"),O.load(a,function(B){var ae=x._parser(B);!ae||(void 0!==ae.image?M.image=ae.image:void 0!==ae.data&&(M.image.width=ae.width,M.image.height=ae.height,M.image.data=ae.data),M.wrapS=void 0!==ae.wrapS?ae.wrapS:Sa,M.wrapT=void 0!==ae.wrapT?ae.wrapT:Sa,M.magFilter=void 0!==ae.magFilter?ae.magFilter:gn,M.minFilter=void 0!==ae.minFilter?ae.minFilter:qe,M.anisotropy=void 0!==ae.anisotropy?ae.anisotropy:1,void 0!==ae.format&&(M.format=ae.format),void 0!==ae.type&&(M.type=ae.type),void 0!==ae.mipmaps&&(M.mipmaps=ae.mipmaps),1===ae.mipmapCount&&(M.minFilter=gn),M.needsUpdate=!0,d&&d(M,ae))},g,y),M}}),Object.assign(Qg.prototype,{load:function(a,d,g,y){var x=this,M=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(M.onload=function(){M.onload=null,URL.revokeObjectURL(M.src),d&&d(M),x.manager.itemEnd(a)},M.onerror=y,0===a.indexOf("data:"))M.src=a;else if(void 0!==this.crossOrigin)M.crossOrigin=this.crossOrigin,M.src=a;else{var O=new Qo;O.setPath(this.path),O.setResponseType("blob"),O.setWithCredentials(this.withCredentials),O.load(a,function(B){M.src=URL.createObjectURL(B)},g,y)}return x.manager.itemStart(a),M},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Bm.prototype,{load:function(a,d,g,y){var x=new Xh,M=new Qg(this.manager);M.setCrossOrigin(this.crossOrigin),M.setPath(this.path);var O=0;function B(re){M.load(a[re],function(me){x.images[re]=me,6==++O&&(x.needsUpdate=!0,d&&d(x))},void 0,y)}for(var ae=0;ae<a.length;++ae)B(ae);return x},setCrossOrigin:function(a){return this.crossOrigin=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(sh.prototype,{load:function(a,d,g,y){var x=new _a,M=new Qg(this.manager);return M.setCrossOrigin(this.crossOrigin),M.setWithCredentials(this.withCredentials),M.setPath(this.path),M.load(a,function(O){var B=a.search(/\.(jpg|jpeg)$/)>0||0===a.search(/^data\:image\/jpeg/);x.format=B?ya:sa,x.image=O,x.needsUpdate=!0,void 0!==d&&d(x)},g,y),x},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),So.prototype=Object.assign(Object.create(Or.prototype),{constructor:So,isLight:!0,copy:function(a){return Or.prototype.copy.call(this,a),this.color.copy(a.color),this.intensity=a.intensity,this},toJSON:function(a){var d=Or.prototype.toJSON.call(this,a);return d.object.color=this.color.getHex(),d.object.intensity=this.intensity,void 0!==this.groundColor&&(d.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(d.object.distance=this.distance),void 0!==this.angle&&(d.object.angle=this.angle),void 0!==this.decay&&(d.object.decay=this.decay),void 0!==this.penumbra&&(d.object.penumbra=this.penumbra),void 0!==this.shadow&&(d.object.shadow=this.shadow.toJSON()),d}}),Uc.prototype=Object.assign(Object.create(So.prototype),{constructor:Uc,isHemisphereLight:!0,copy:function(a){return So.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}),Object.assign(Od.prototype,{copy:function(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};return 0!==this.bias&&(a.bias=this.bias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}),bp.prototype=Object.assign(Object.create(Od.prototype),{constructor:bp,isSpotLightShadow:!0,update:function(a){var d=2*js.RAD2DEG*a.angle,g=this.mapSize.width/this.mapSize.height,y=a.distance||500,x=this.camera;(d!==x.fov||g!==x.aspect||y!==x.far)&&(x.fov=d,x.aspect=g,x.far=y,x.updateProjectionMatrix())}}),oh.prototype=Object.assign(Object.create(So.prototype),{constructor:oh,isSpotLight:!0,copy:function(a){return So.prototype.copy.call(this,a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),Gu.prototype=Object.assign(Object.create(So.prototype),{constructor:Gu,isPointLight:!0,copy:function(a){return So.prototype.copy.call(this,a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}),zf.prototype=Object.assign(Object.create(Od.prototype),{constructor:zf}),Vf.prototype=Object.assign(Object.create(So.prototype),{constructor:Vf,isDirectionalLight:!0,copy:function(a){return So.prototype.copy.call(this,a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),Jg.prototype=Object.assign(Object.create(So.prototype),{constructor:Jg,isAmbientLight:!0});var Sh,Hc={arraySlice:function(a,d,g){return Hc.isTypedArray(a)?new a.constructor(a.subarray(d,g)):a.slice(d,g)},convertArray:function(a,d,g){return!a||!g&&a.constructor===d?a:"number"==typeof d.BYTES_PER_ELEMENT?new d(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var g=a.length,y=new Array(g),x=0;x!==g;++x)y[x]=x;return y.sort(function d(M,O){return a[M]-a[O]}),y},sortedArray:function(a,d,g){for(var y=a.length,x=new a.constructor(y),M=0,O=0;O!==y;++M)for(var B=g[M]*d,ae=0;ae!==d;++ae)x[O++]=a[B+ae];return x},flattenJSON:function(a,d,g,y){for(var x=1,M=a[0];void 0!==M&&void 0===M[y];)M=a[x++];if(void 0!==M){var O=M[y];if(void 0!==O)if(Array.isArray(O))do{void 0!==(O=M[y])&&(d.push(M.time),g.push.apply(g,O)),M=a[x++]}while(void 0!==M);else if(void 0!==O.toArray)do{void 0!==(O=M[y])&&(d.push(M.time),O.toArray(g,g.length)),M=a[x++]}while(void 0!==M);else do{void 0!==(O=M[y])&&(d.push(M.time),g.push(O)),M=a[x++]}while(void 0!==M)}}};function ec(a,d,g,y){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==y?y:new d.constructor(g),this.sampleValues=d,this.valueSize=g}function ah(a,d,g,y){ec.call(this,a,d,g,y),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function uf(a,d,g,y){ec.call(this,a,d,g,y)}function dd(a,d,g,y){ec.call(this,a,d,g,y)}function ai(a,d,g,y){if(void 0===a)throw new Error("track name is undefined");if(void 0===d||0===d.length)throw new Error("no keyframes in track named "+a);this.name=a,this.times=Hc.convertArray(d,this.TimeBufferType),this.values=Hc.convertArray(g,this.ValueBufferType),this.setInterpolation(y||this.DefaultInterpolation),this.validate(),this.optimize()}function Uf(a,d,g,y){ai.call(this,a,d,g,y)}function Ba(a,d,g,y){ec.call(this,a,d,g,y)}function df(a,d,g,y){ai.call(this,a,d,g,y)}function Wu(a,d,g,y){ai.call(this,a,d,g,y)}function zm(a,d,g,y){ai.call(this,a,d,g,y)}function em(a,d,g){ai.call(this,a,d,g)}function Cp(a,d,g,y){ai.call(this,a,d,g,y)}function hd(a,d,g,y){ai.apply(this,arguments)}function tc(a,d,g){this.name=a,this.tracks=g,this.duration=void 0!==d?d:-1,this.uuid=js.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function tm(a){this.manager=void 0!==a?a:Vc,this.textures={}}function Fd(a){this.manager=void 0!==a?a:Vc}function Eu(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function nm(a){"boolean"==typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0),this.manager=void 0!==a?a:Vc,this.withCredentials=!1}function wp(a){this.manager=void 0!==a?a:Vc,this.texturePath=""}function hc(){}function Nd(a,d){this.v1=a,this.v2=d}function im(){this.curves=[],this.autoClose=!1}function Eh(a,d,g,y,x,M,O,B){this.aX=a,this.aY=d,this.xRadius=g,this.yRadius=y,this.aStartAngle=x,this.aEndAngle=M,this.aClockwise=O,this.aRotation=B||0}ec.prototype={constructor:ec,evaluate:function(a){var d=this.parameterPositions,g=this._cachedIndex,y=d[g],x=d[g-1];e:{t:{var M;n:{i:if(!(a<y)){for(var O=g+2;;){if(void 0===y){if(a<x)break i;return this._cachedIndex=g=d.length,this.afterEnd_(g-1,a,x)}if(g===O)break;if(x=y,a<(y=d[++g]))break t}M=d.length;break n}if(a>=x)break e;var B=d[1];for(a<B&&(g=2,x=B),O=g-2;;){if(void 0===x)return this._cachedIndex=0,this.beforeStart_(0,a,y);if(g===O)break;if(y=x,a>=(x=d[--g-1]))break t}M=g,g=0}for(;g<M;){var ae=g+M>>>1;a<d[ae]?M=ae:g=ae+1}if(y=d[g],void 0===(x=d[g-1]))return this._cachedIndex=0,this.beforeStart_(0,a,y);if(void 0===y)return this._cachedIndex=g=d.length,this.afterEnd_(g-1,x,a)}this._cachedIndex=g,this.intervalChanged_(g,x,y)}return this.interpolate_(g,x,a,y)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){for(var d=this.resultBuffer,g=this.sampleValues,y=this.valueSize,x=a*y,M=0;M!==y;++M)d[M]=g[x+M];return d},interpolate_:function(a,d,g,y){throw new Error("call to abstract method")},intervalChanged_:function(a,d,g){}},Object.assign(ec.prototype,{beforeStart_:ec.prototype.copySampleValue_,afterEnd_:ec.prototype.copySampleValue_}),ah.prototype=Object.assign(Object.create(ec.prototype),{constructor:ah,DefaultSettings_:{endingStart:Pr,endingEnd:Pr},intervalChanged_:function(a,d,g){var y=this.parameterPositions,x=a-2,M=a+1,O=y[x],B=y[M];if(void 0===O)switch(this.getSettings_().endingStart){case _o:x=a,O=2*d-g;break;case hs:O=d+y[x=y.length-2]-y[x+1];break;default:x=a,O=g}if(void 0===B)switch(this.getSettings_().endingEnd){case _o:M=a,B=2*g-d;break;case hs:M=1,B=g+y[1]-y[0];break;default:M=a-1,B=d}var ae=.5*(g-d),re=this.valueSize;this._weightPrev=ae/(d-O),this._weightNext=ae/(B-g),this._offsetPrev=x*re,this._offsetNext=M*re},interpolate_:function(a,d,g,y){for(var x=this.resultBuffer,M=this.sampleValues,O=this.valueSize,B=a*O,ae=B-O,re=this._offsetPrev,me=this._offsetNext,_e=this._weightPrev,Oe=this._weightNext,Fe=(g-d)/(y-d),Ne=Fe*Fe,ut=Ne*Fe,ct=-_e*ut+2*_e*Ne-_e*Fe,rt=(1+_e)*ut+(-1.5-2*_e)*Ne+(-.5+_e)*Fe+1,At=(-1-Oe)*ut+(1.5+Oe)*Ne+.5*Fe,St=Oe*ut-Oe*Ne,tn=0;tn!==O;++tn)x[tn]=ct*M[re+tn]+rt*M[ae+tn]+At*M[B+tn]+St*M[me+tn];return x}}),uf.prototype=Object.assign(Object.create(ec.prototype),{constructor:uf,interpolate_:function(a,d,g,y){for(var x=this.resultBuffer,M=this.sampleValues,O=this.valueSize,B=a*O,ae=B-O,re=(g-d)/(y-d),me=1-re,_e=0;_e!==O;++_e)x[_e]=M[ae+_e]*me+M[B+_e]*re;return x}}),dd.prototype=Object.assign(Object.create(ec.prototype),{constructor:dd,interpolate_:function(a,d,g,y){return this.copySampleValue_(a-1)}}),Sh={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:ys,InterpolantFactoryMethodDiscrete:function(a){return new dd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new uf(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new ah(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){var d;switch(a){case dr:d=this.InterpolantFactoryMethodDiscrete;break;case ys:d=this.InterpolantFactoryMethodLinear;break;case Bs:d=this.InterpolantFactoryMethodSmooth}if(void 0!==d)this.createInterpolant=d;else{var g="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(g);this.setInterpolation(this.DefaultInterpolation)}console.warn(g)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return dr;case this.InterpolantFactoryMethodLinear:return ys;case this.InterpolantFactoryMethodSmooth:return Bs}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var d=this.times,g=0,y=d.length;g!==y;++g)d[g]+=a;return this},scale:function(a){if(1!==a)for(var d=this.times,g=0,y=d.length;g!==y;++g)d[g]*=a;return this},trim:function(a,d){for(var g=this.times,y=g.length,x=0,M=y-1;x!==y&&g[x]<a;)++x;for(;-1!==M&&g[M]>d;)--M;if(++M,0!==x||M!==y){x>=M&&(x=(M=Math.max(M,1))-1);var O=this.getValueSize();this.times=Hc.arraySlice(g,x,M),this.values=Hc.arraySlice(this.values,x*O,M*O)}return this},validate:function(){var a=!0,d=this.getValueSize();d-Math.floor(d)!=0&&(console.error("invalid value size in track",this),a=!1);var g=this.times,y=this.values,x=g.length;0===x&&(console.error("track is empty",this),a=!1);for(var M=null,O=0;O!==x;O++){var B=g[O];if("number"==typeof B&&isNaN(B)){console.error("time is not a valid number",this,O,B),a=!1;break}if(null!==M&&M>B){console.error("out of order keys",this,O,B,M),a=!1;break}M=B}if(void 0!==y&&Hc.isTypedArray(y)){O=0;for(var ae=y.length;O!==ae;++O){var re=y[O];if(isNaN(re)){console.error("value is not a valid number",this,O,re),a=!1;break}}}return a},optimize:function(){for(var a=this.times,d=this.values,g=this.getValueSize(),y=this.getInterpolation()===Bs,x=1,M=a.length-1,O=1;O<M;++O){var B=!1,ae=a[O];if(ae!==a[O+1]&&(1!==O||ae!==ae[0]))if(y)B=!0;else for(var me=O*g,_e=me-g,Oe=me+g,Fe=0;Fe!==g;++Fe){var Ne=d[me+Fe];if(Ne!==d[_e+Fe]||Ne!==d[Oe+Fe]){B=!0;break}}if(B){if(O!==x){a[x]=a[O];var ut=O*g,ct=x*g;for(Fe=0;Fe!==g;++Fe)d[ct+Fe]=d[ut+Fe]}++x}}if(M>0){for(a[x]=a[M],ut=M*g,ct=x*g,Fe=0;Fe!==g;++Fe)d[ct+Fe]=d[ut+Fe];++x}return x!==a.length&&(this.times=Hc.arraySlice(a,0,x),this.values=Hc.arraySlice(d,0,x*g)),this}},Uf.prototype=Object.assign(Object.create(Sh),{constructor:Uf,ValueTypeName:"vector"}),Ba.prototype=Object.assign(Object.create(ec.prototype),{constructor:Ba,interpolate_:function(a,d,g,y){for(var x=this.resultBuffer,M=this.sampleValues,O=this.valueSize,B=a*O,ae=(g-d)/(y-d),re=B+O;B!==re;B+=4)oc.slerpFlat(x,0,M,B-O,M,B,ae);return x}}),df.prototype=Object.assign(Object.create(Sh),{constructor:df,ValueTypeName:"quaternion",DefaultInterpolation:ys,InterpolantFactoryMethodLinear:function(a){return new Ba(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0}),Wu.prototype=Object.assign(Object.create(Sh),{constructor:Wu,ValueTypeName:"number"}),zm.prototype=Object.assign(Object.create(Sh),{constructor:zm,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:dr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),em.prototype=Object.assign(Object.create(Sh),{constructor:em,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:dr,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Cp.prototype=Object.assign(Object.create(Sh),{constructor:Cp,ValueTypeName:"color"}),hd.prototype=Sh,Sh.constructor=hd,Object.assign(hd,{parse:function(a){if(void 0===a.type)throw new Error("track type undefined, can not parse");var d=hd._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var g=[],y=[];Hc.flattenJSON(a.keys,g,y,"value"),a.times=g,a.values=y}return void 0!==d.parse?d.parse(a):new d(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var g,d=a.constructor;if(void 0!==d.toJSON)g=d.toJSON(a);else{g={name:a.name,times:Hc.convertArray(a.times,Array),values:Hc.convertArray(a.values,Array)};var y=a.getInterpolation();y!==a.DefaultInterpolation&&(g.interpolation=y)}return g.type=a.ValueTypeName,g},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wu;case"vector":case"vector2":case"vector3":case"vector4":return Uf;case"color":return Cp;case"quaternion":return df;case"bool":case"boolean":return em;case"string":return zm}throw new Error("Unsupported typeName: "+a)}}),tc.prototype={constructor:tc,resetDuration:function(){for(var d=0,g=0,y=this.tracks.length;g!==y;++g){var x=this.tracks[g];d=Math.max(d,x.times[x.times.length-1])}this.duration=d},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}},Object.assign(tc,{parse:function(a){for(var d=[],g=a.tracks,y=1/(a.fps||1),x=0,M=g.length;x!==M;++x)d.push(hd.parse(g[x]).scale(y));return new tc(a.name,a.duration,d)},toJSON:function(a){for(var d=[],g=a.tracks,y={name:a.name,duration:a.duration,tracks:d},x=0,M=g.length;x!==M;++x)d.push(hd.toJSON(g[x]));return y},CreateFromMorphTargetSequence:function(a,d,g,y){for(var x=d.length,M=[],O=0;O<x;O++){var B=[],ae=[];B.push((O+x-1)%x,O,(O+1)%x),ae.push(0,1,0);var re=Hc.getKeyframeOrder(B);B=Hc.sortedArray(B,1,re),ae=Hc.sortedArray(ae,1,re),!y&&0===B[0]&&(B.push(x),ae.push(ae[0])),M.push(new Wu(".morphTargetInfluences["+d[O].name+"]",B,ae).scale(1/g))}return new tc(a,-1,M)},findByName:function(a,d){var g=a;Array.isArray(a)||(g=a.geometry&&a.geometry.animations||a.animations);for(var x=0;x<g.length;x++)if(g[x].name===d)return g[x];return null},CreateClipsFromMorphTargetSequences:function(a,d,g){for(var y={},x=/^([\w-]*?)([\d]+)$/,M=0,O=a.length;M<O;M++){var B=a[M],ae=B.name.match(x);if(ae&&ae.length>1){var me=y[re=ae[1]];me||(y[re]=me=[]),me.push(B)}}var _e=[];for(var re in y)_e.push(tc.CreateFromMorphTargetSequence(re,y[re],d,g));return _e},parseAnimation:function(a,d){if(!a)return console.error("  no animation in JSONLoader data"),null;for(var g=function(St,tn,$t,Cn,pn){if(0!==$t.length){var ln=[],In=[];Hc.flattenJSON($t,ln,In,Cn),0!==ln.length&&pn.push(new St(tn,ln,In))}},y=[],x=a.name||"default",M=a.length||-1,O=a.fps||30,B=a.hierarchy||[],ae=0;ae<B.length;ae++){var re=B[ae].keys;if(re&&0!==re.length)if(re[0].morphTargets){for(var me={},_e=0;_e<re.length;_e++)if(re[_e].morphTargets)for(var Oe=0;Oe<re[_e].morphTargets.length;Oe++)me[re[_e].morphTargets[Oe]]=-1;for(var Fe in me){var Ne=[],ut=[];for(Oe=0;Oe!==re[_e].morphTargets.length;++Oe){var ct=re[_e];Ne.push(ct.time),ut.push(ct.morphTarget===Fe?1:0)}y.push(new Wu(".morphTargetInfluence["+Fe+"]",Ne,ut))}M=me.length*(O||1)}else{var rt=".bones["+d[ae].name+"]";g(Uf,rt+".position",re,"pos",y),g(df,rt+".quaternion",re,"rot",y),g(Uf,rt+".scale",re,"scl",y)}}return 0===y.length?null:new tc(x,M,y)}}),Object.assign(tm.prototype,{load:function(a,d,g,y){var x=this;new Qo(x.manager).load(a,function(O){d(x.parse(JSON.parse(O)))},g,y)},setTextures:function(a){this.textures=a},parse:function(a){var d=this.textures;function g(B){return void 0===d[B]&&console.warn("THREE.MaterialLoader: Undefined texture",B),d[B]}var y=new Ov[a.type];if(void 0!==a.uuid&&(y.uuid=a.uuid),void 0!==a.name&&(y.name=a.name),void 0!==a.color&&y.color.setHex(a.color),void 0!==a.roughness&&(y.roughness=a.roughness),void 0!==a.metalness&&(y.metalness=a.metalness),void 0!==a.emissive&&y.emissive.setHex(a.emissive),void 0!==a.specular&&y.specular.setHex(a.specular),void 0!==a.shininess&&(y.shininess=a.shininess),void 0!==a.clearCoat&&(y.clearCoat=a.clearCoat),void 0!==a.clearCoatRoughness&&(y.clearCoatRoughness=a.clearCoatRoughness),void 0!==a.uniforms&&(y.uniforms=a.uniforms),void 0!==a.vertexShader&&(y.vertexShader=a.vertexShader),void 0!==a.fragmentShader&&(y.fragmentShader=a.fragmentShader),void 0!==a.vertexColors&&(y.vertexColors=a.vertexColors),void 0!==a.fog&&(y.fog=a.fog),void 0!==a.shading&&(y.shading=a.shading),void 0!==a.blending&&(y.blending=a.blending),void 0!==a.side&&(y.side=a.side),void 0!==a.opacity&&(y.opacity=a.opacity),void 0!==a.transparent&&(y.transparent=a.transparent),void 0!==a.alphaTest&&(y.alphaTest=a.alphaTest),void 0!==a.depthTest&&(y.depthTest=a.depthTest),void 0!==a.depthWrite&&(y.depthWrite=a.depthWrite),void 0!==a.colorWrite&&(y.colorWrite=a.colorWrite),void 0!==a.wireframe&&(y.wireframe=a.wireframe),void 0!==a.wireframeLinewidth&&(y.wireframeLinewidth=a.wireframeLinewidth),void 0!==a.wireframeLinecap&&(y.wireframeLinecap=a.wireframeLinecap),void 0!==a.wireframeLinejoin&&(y.wireframeLinejoin=a.wireframeLinejoin),void 0!==a.skinning&&(y.skinning=a.skinning),void 0!==a.morphTargets&&(y.morphTargets=a.morphTargets),void 0!==a.size&&(y.size=a.size),void 0!==a.sizeAttenuation&&(y.sizeAttenuation=a.sizeAttenuation),void 0!==a.map&&(y.map=g(a.map)),void 0!==a.alphaMap&&(y.alphaMap=g(a.alphaMap),y.transparent=!0),void 0!==a.bumpMap&&(y.bumpMap=g(a.bumpMap)),void 0!==a.bumpScale&&(y.bumpScale=a.bumpScale),void 0!==a.normalMap&&(y.normalMap=g(a.normalMap)),void 0!==a.normalScale){var x=a.normalScale;!1===Array.isArray(x)&&(x=[x,x]),y.normalScale=(new hr).fromArray(x)}if(void 0!==a.displacementMap&&(y.displacementMap=g(a.displacementMap)),void 0!==a.displacementScale&&(y.displacementScale=a.displacementScale),void 0!==a.displacementBias&&(y.displacementBias=a.displacementBias),void 0!==a.roughnessMap&&(y.roughnessMap=g(a.roughnessMap)),void 0!==a.metalnessMap&&(y.metalnessMap=g(a.metalnessMap)),void 0!==a.emissiveMap&&(y.emissiveMap=g(a.emissiveMap)),void 0!==a.emissiveIntensity&&(y.emissiveIntensity=a.emissiveIntensity),void 0!==a.specularMap&&(y.specularMap=g(a.specularMap)),void 0!==a.envMap&&(y.envMap=g(a.envMap)),void 0!==a.reflectivity&&(y.reflectivity=a.reflectivity),void 0!==a.lightMap&&(y.lightMap=g(a.lightMap)),void 0!==a.lightMapIntensity&&(y.lightMapIntensity=a.lightMapIntensity),void 0!==a.aoMap&&(y.aoMap=g(a.aoMap)),void 0!==a.aoMapIntensity&&(y.aoMapIntensity=a.aoMapIntensity),void 0!==a.gradientMap&&(y.gradientMap=g(a.gradientMap)),void 0!==a.materials)for(var M=0,O=a.materials.length;M<O;M++)y.materials.push(this.parse(a.materials[M]));return y}}),Object.assign(Fd.prototype,{load:function(a,d,g,y){var x=this;new Qo(x.manager).load(a,function(O){d(x.parse(JSON.parse(O)))},g,y)},parse:function(a){var d=new Wr,g=a.data.index,y={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};if(void 0!==g){var x=new y[g.type](g.array);d.setIndex(new Tr(x,1))}var M=a.data.attributes;for(var O in M){var B=M[O];x=new y[B.type](B.array),d.addAttribute(O,new Tr(x,B.itemSize,B.normalized))}var ae=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==ae)for(var re=0,me=ae.length;re!==me;++re){var _e=ae[re];d.addGroup(_e.start,_e.count,_e.materialIndex)}var Oe=a.data.boundingSphere;if(void 0!==Oe){var Fe=new an;void 0!==Oe.center&&Fe.fromArray(Oe.center),d.boundingSphere=new Lt(Fe,Oe.radius)}return d}}),Eu.prototype={constructor:Eu,crossOrigin:void 0,extractUrlBase:function(a){var d=a.split("/");return 1===d.length?"./":(d.pop(),d.join("/")+"/")},initMaterials:function(a,d,g){for(var y=[],x=0;x<a.length;++x)y[x]=this.createMaterial(a[x],d,g);return y},createMaterial:function(){var a,d,g;return function(x,M,O){void 0===a&&(a=new ps),void 0===d&&(d=new sh),void 0===g&&(g=new tm);var B={};function ae(Oe,Fe,Ne,ut,ct){var St,rt=M+Oe,At=Eu.Handlers.get(rt);null!==At?St=At.load(rt):(d.setCrossOrigin(O),St=d.load(rt)),void 0!==Fe&&(St.repeat.fromArray(Fe),1!==Fe[0]&&(St.wrapS=kc),1!==Fe[1]&&(St.wrapT=kc)),void 0!==Ne&&St.offset.fromArray(Ne),void 0!==ut&&("repeat"===ut[0]&&(St.wrapS=kc),"mirror"===ut[0]&&(St.wrapS=Oc),"repeat"===ut[1]&&(St.wrapT=kc),"mirror"===ut[1]&&(St.wrapT=Oc)),void 0!==ct&&(St.anisotropy=ct);var tn=js.generateUUID();return B[tn]=St,tn}var re={uuid:js.generateUUID(),type:"MeshLambertMaterial"};for(var me in x){var _e=x[me];switch(me){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":re.name=_e;break;case"blending":re.blending=Le[_e];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",me,"is no longer supported.");break;case"colorDiffuse":re.color=a.fromArray(_e).getHex();break;case"colorSpecular":re.specular=a.fromArray(_e).getHex();break;case"colorEmissive":re.emissive=a.fromArray(_e).getHex();break;case"specularCoef":re.shininess=_e;break;case"shading":"basic"===_e.toLowerCase()&&(re.type="MeshBasicMaterial"),"phong"===_e.toLowerCase()&&(re.type="MeshPhongMaterial"),"standard"===_e.toLowerCase()&&(re.type="MeshStandardMaterial");break;case"mapDiffuse":re.map=ae(_e,x.mapDiffuseRepeat,x.mapDiffuseOffset,x.mapDiffuseWrap,x.mapDiffuseAnisotropy);break;case"mapEmissive":re.emissiveMap=ae(_e,x.mapEmissiveRepeat,x.mapEmissiveOffset,x.mapEmissiveWrap,x.mapEmissiveAnisotropy);break;case"mapLight":re.lightMap=ae(_e,x.mapLightRepeat,x.mapLightOffset,x.mapLightWrap,x.mapLightAnisotropy);break;case"mapAO":re.aoMap=ae(_e,x.mapAORepeat,x.mapAOOffset,x.mapAOWrap,x.mapAOAnisotropy);break;case"mapBump":re.bumpMap=ae(_e,x.mapBumpRepeat,x.mapBumpOffset,x.mapBumpWrap,x.mapBumpAnisotropy);break;case"mapBumpScale":re.bumpScale=_e;break;case"mapNormal":re.normalMap=ae(_e,x.mapNormalRepeat,x.mapNormalOffset,x.mapNormalWrap,x.mapNormalAnisotropy);break;case"mapNormalFactor":re.normalScale=[_e,_e];break;case"mapSpecular":re.specularMap=ae(_e,x.mapSpecularRepeat,x.mapSpecularOffset,x.mapSpecularWrap,x.mapSpecularAnisotropy);break;case"mapMetalness":re.metalnessMap=ae(_e,x.mapMetalnessRepeat,x.mapMetalnessOffset,x.mapMetalnessWrap,x.mapMetalnessAnisotropy);break;case"mapRoughness":re.roughnessMap=ae(_e,x.mapRoughnessRepeat,x.mapRoughnessOffset,x.mapRoughnessWrap,x.mapRoughnessAnisotropy);break;case"mapAlpha":re.alphaMap=ae(_e,x.mapAlphaRepeat,x.mapAlphaOffset,x.mapAlphaWrap,x.mapAlphaAnisotropy);break;case"flipSided":re.side=z;break;case"doubleSided":re.side=ce;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),re.opacity=_e;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":re[me]=_e;break;case"vertexColors":!0===_e&&(re.vertexColors=N),"face"===_e&&(re.vertexColors=oe);break;default:console.error("THREE.Loader.createMaterial: Unsupported",me,_e)}}return"MeshBasicMaterial"===re.type&&delete re.emissive,"MeshPhongMaterial"!==re.type&&delete re.specular,re.opacity<1&&(re.transparent=!0),g.setTextures(B),g.parse(re)}}()},Eu.Handlers={handlers:[],add:function(a,d){this.handlers.push(a,d)},get:function(a){for(var d=this.handlers,g=0,y=d.length;g<y;g+=2){var M=d[g+1];if(d[g].test(a))return M}return null}},Object.assign(nm.prototype,{load:function(a,d,g,y){var x=this,M=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Eu.prototype.extractUrlBase(a),O=new Qo(this.manager);O.setWithCredentials(this.withCredentials),O.load(a,function(B){var ae=JSON.parse(B),re=ae.metadata;if(void 0!==re){var me=re.type;if(void 0!==me){if("object"===me.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");if("scene"===me.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.")}}var _e=x.parse(ae,M);d(_e.geometry,_e.materials)},g,y)},setTexturePath:function(a){this.texturePath=a},parse:function(a,d){var g=new Qs,y=void 0!==a.scale?1/a.scale:1;if(function x(re){function me(m,_){return m&1<<_}var _e,Oe,Fe,Ne,ut,ct,rt,At,St,tn,$t,Cn,pn,ln,In,$n,zi,Ii,Qt,en,si,gi,Vi,ki,Ti,oi=a.faces,ii=a.vertices,f=a.normals,c=a.colors,h=0;if(void 0!==a.uvs){for(_e=0;_e<a.uvs.length;_e++)a.uvs[_e].length&&h++;for(_e=0;_e<h;_e++)g.faceVertexUvs[_e]=[]}for(Ne=0,ut=ii.length;Ne<ut;)(Ii=new an).x=ii[Ne++]*re,Ii.y=ii[Ne++]*re,Ii.z=ii[Ne++]*re,g.vertices.push(Ii);for(Ne=0,ut=oi.length;Ne<ut;)if($t=me(tn=oi[Ne++],0),Cn=me(tn,1),pn=me(tn,3),ln=me(tn,4),In=me(tn,5),$n=me(tn,6),zi=me(tn,7),$t){if((en=new la).a=oi[Ne],en.b=oi[Ne+1],en.c=oi[Ne+3],(si=new la).a=oi[Ne+1],si.b=oi[Ne+2],si.c=oi[Ne+3],Ne+=4,Cn&&(St=oi[Ne++],en.materialIndex=St,si.materialIndex=St),Fe=g.faces.length,pn)for(_e=0;_e<h;_e++)for(ki=a.uvs[_e],g.faceVertexUvs[_e][Fe]=[],g.faceVertexUvs[_e][Fe+1]=[],Oe=0;Oe<4;Oe++)Ti=new hr(ki[2*(At=oi[Ne++])],ki[2*At+1]),2!==Oe&&g.faceVertexUvs[_e][Fe].push(Ti),0!==Oe&&g.faceVertexUvs[_e][Fe+1].push(Ti);if(ln&&(rt=3*oi[Ne++],en.normal.set(f[rt++],f[rt++],f[rt]),si.normal.copy(en.normal)),In)for(_e=0;_e<4;_e++)rt=3*oi[Ne++],Vi=new an(f[rt++],f[rt++],f[rt]),2!==_e&&en.vertexNormals.push(Vi),0!==_e&&si.vertexNormals.push(Vi);if($n&&(ct=oi[Ne++],en.color.setHex(gi=c[ct]),si.color.setHex(gi)),zi)for(_e=0;_e<4;_e++)gi=c[ct=oi[Ne++]],2!==_e&&en.vertexColors.push(new ps(gi)),0!==_e&&si.vertexColors.push(new ps(gi));g.faces.push(en),g.faces.push(si)}else{if((Qt=new la).a=oi[Ne++],Qt.b=oi[Ne++],Qt.c=oi[Ne++],Cn&&(St=oi[Ne++],Qt.materialIndex=St),Fe=g.faces.length,pn)for(_e=0;_e<h;_e++)for(ki=a.uvs[_e],g.faceVertexUvs[_e][Fe]=[],Oe=0;Oe<3;Oe++)Ti=new hr(ki[2*(At=oi[Ne++])],ki[2*At+1]),g.faceVertexUvs[_e][Fe].push(Ti);if(ln&&(rt=3*oi[Ne++],Qt.normal.set(f[rt++],f[rt++],f[rt])),In)for(_e=0;_e<3;_e++)rt=3*oi[Ne++],Vi=new an(f[rt++],f[rt++],f[rt]),Qt.vertexNormals.push(Vi);if($n&&(ct=oi[Ne++],Qt.color.setHex(c[ct])),zi)for(_e=0;_e<3;_e++)ct=oi[Ne++],Qt.vertexColors.push(new ps(c[ct]));g.faces.push(Qt)}}(y),function M(){var re=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var me=0,_e=a.skinWeights.length;me<_e;me+=re)g.skinWeights.push(new ba(a.skinWeights[me],re>1?a.skinWeights[me+1]:0,re>2?a.skinWeights[me+2]:0,re>3?a.skinWeights[me+3]:0));if(a.skinIndices)for(me=0,_e=a.skinIndices.length;me<_e;me+=re)g.skinIndices.push(new ba(a.skinIndices[me],re>1?a.skinIndices[me+1]:0,re>2?a.skinIndices[me+2]:0,re>3?a.skinIndices[me+3]:0));g.bones=a.bones,g.bones&&g.bones.length>0&&(g.skinWeights.length!==g.skinIndices.length||g.skinIndices.length!==g.vertices.length)&&console.warn("When skinning, number of vertices ("+g.vertices.length+"), skinIndices ("+g.skinIndices.length+"), and skinWeights ("+g.skinWeights.length+") should match.")}(),function O(re){if(void 0!==a.morphTargets)for(var me=0,_e=a.morphTargets.length;me<_e;me++){g.morphTargets[me]={},g.morphTargets[me].name=a.morphTargets[me].name,g.morphTargets[me].vertices=[];for(var Oe=g.morphTargets[me].vertices,Fe=a.morphTargets[me].vertices,Ne=0,ut=Fe.length;Ne<ut;Ne+=3){var ct=new an;ct.x=Fe[Ne]*re,ct.y=Fe[Ne+1]*re,ct.z=Fe[Ne+2]*re,Oe.push(ct)}}if(void 0!==a.morphColors&&a.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var rt=g.faces,At=a.morphColors[0].colors;for(me=0,_e=rt.length;me<_e;me++)rt[me].color.fromArray(At,3*me)}}(y),function B(){var re=[],me=[];void 0!==a.animation&&me.push(a.animation),void 0!==a.animations&&(a.animations.length?me=me.concat(a.animations):me.push(a.animations));for(var _e=0;_e<me.length;_e++){var Oe=tc.parseAnimation(me[_e],g.bones);Oe&&re.push(Oe)}if(g.morphTargets){var Fe=tc.CreateClipsFromMorphTargetSequences(g.morphTargets,10);re=re.concat(Fe)}re.length>0&&(g.animations=re)}(),g.computeFaceNormals(),g.computeBoundingSphere(),void 0===a.materials||0===a.materials.length)return{geometry:g};var ae=Eu.prototype.initMaterials(a.materials,d,this.crossOrigin);return{geometry:g,materials:ae}}}),Object.assign(wp.prototype,{load:function(a,d,g,y){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var x=this;new Qo(x.manager).load(a,function(O){var B=null;try{B=JSON.parse(O)}catch(re){return void console.error("THREE:ObjectLoader: Can't parse "+a+".",re.message)}var ae=B.metadata;void 0!==ae&&void 0!==ae.type&&"geometry"!==ae.type.toLowerCase()?x.parse(B,d):console.error("THREE.ObjectLoader: Can't load "+a+". Use THREE.JSONLoader instead.")},g,y)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,d){var g=this.parseGeometries(a.geometries),y=this.parseImages(a.images,function(){void 0!==d&&d(O)}),x=this.parseTextures(a.textures,y),M=this.parseMaterials(a.materials,x),O=this.parseObject(a.object,g,M);return a.animations&&(O.animations=this.parseAnimations(a.animations)),(void 0===a.images||0===a.images.length)&&void 0!==d&&d(O),O},parseGeometries:function(a){var d={};if(void 0!==a)for(var g=new nm,y=new Fd,x=0,M=a.length;x<M;x++){var O,B=a[x];switch(B.type){case"PlaneGeometry":case"PlaneBufferGeometry":O=new ld[B.type](B.width,B.height,B.widthSegments,B.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":O=new ld[B.type](B.width,B.height,B.depth,B.widthSegments,B.heightSegments,B.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":O=new ld[B.type](B.radius,B.segments,B.thetaStart,B.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":O=new ld[B.type](B.radiusTop,B.radiusBottom,B.height,B.radialSegments,B.heightSegments,B.openEnded,B.thetaStart,B.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":O=new ld[B.type](B.radius,B.height,B.radialSegments,B.heightSegments,B.openEnded,B.thetaStart,B.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":O=new ld[B.type](B.radius,B.widthSegments,B.heightSegments,B.phiStart,B.phiLength,B.thetaStart,B.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":O=new ld[B.type](B.radius,B.detail);break;case"RingGeometry":case"RingBufferGeometry":O=new ld[B.type](B.innerRadius,B.outerRadius,B.thetaSegments,B.phiSegments,B.thetaStart,B.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":O=new ld[B.type](B.radius,B.tube,B.radialSegments,B.tubularSegments,B.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":O=new ld[B.type](B.radius,B.tube,B.tubularSegments,B.radialSegments,B.p,B.q);break;case"LatheGeometry":case"LatheBufferGeometry":O=new ld[B.type](B.points,B.segments,B.phiStart,B.phiLength);break;case"BufferGeometry":O=y.parse(B);break;case"Geometry":O=g.parse(B.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+B.type+'"');continue}O.uuid=B.uuid,void 0!==B.name&&(O.name=B.name),d[B.uuid]=O}return d},parseMaterials:function(a,d){var g={};if(void 0!==a){var y=new tm;y.setTextures(d);for(var x=0,M=a.length;x<M;x++){var O=y.parse(a[x]);g[O.uuid]=O}}return g},parseAnimations:function(a){for(var d=[],g=0;g<a.length;g++){var y=tc.parse(a[g]);d.push(y)}return d},parseImages:function(a,d){var g=this,y={};function x(_e){return g.manager.itemStart(_e),O.load(_e,function(){g.manager.itemEnd(_e)},void 0,function(){g.manager.itemError(_e)})}if(void 0!==a&&a.length>0){var O=new Qg(new Jl(d));O.setCrossOrigin(this.crossOrigin);for(var B=0,ae=a.length;B<ae;B++){var re=a[B],me=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(re.url)?re.url:g.texturePath+re.url;y[re.uuid]=x(me)}}return y},parseTextures:function(a,d){function g(ae,re){return"number"==typeof ae?ae:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ae),re[ae])}var y={};if(void 0!==a)for(var x=0,M=a.length;x<M;x++){var O=a[x];void 0===O.image&&console.warn('THREE.ObjectLoader: No "image" specified for',O.uuid),void 0===d[O.image]&&console.warn("THREE.ObjectLoader: Undefined image",O.image);var B=new _a(d[O.image]);B.needsUpdate=!0,B.uuid=O.uuid,void 0!==O.name&&(B.name=O.name),void 0!==O.mapping&&(B.mapping=g(O.mapping,xd)),void 0!==O.offset&&B.offset.fromArray(O.offset),void 0!==O.repeat&&B.repeat.fromArray(O.repeat),void 0!==O.wrap&&(B.wrapS=g(O.wrap[0],Ja),B.wrapT=g(O.wrap[1],Ja)),void 0!==O.minFilter&&(B.minFilter=g(O.minFilter,kt)),void 0!==O.magFilter&&(B.magFilter=g(O.magFilter,kt)),void 0!==O.anisotropy&&(B.anisotropy=O.anisotropy),void 0!==O.flipY&&(B.flipY=O.flipY),y[O.uuid]=B}return y},parseObject:function(){var a=new Vs;return function(g,y,x){var M;function O(Ne){return void 0===y[Ne]&&console.warn("THREE.ObjectLoader: Undefined geometry",Ne),y[Ne]}function B(Ne){if(void 0!==Ne)return void 0===x[Ne]&&console.warn("THREE.ObjectLoader: Undefined material",Ne),x[Ne]}switch(g.type){case"Scene":M=new th,void 0!==g.background&&Number.isInteger(g.background)&&(M.background=new ps(g.background)),void 0!==g.fog&&("Fog"===g.fog.type?M.fog=new ru(g.fog.color,g.fog.near,g.fog.far):"FogExp2"===g.fog.type&&(M.fog=new eh(g.fog.color,g.fog.density)));break;case"PerspectiveCamera":M=new Kl(g.fov,g.aspect,g.near,g.far),void 0!==g.focus&&(M.focus=g.focus),void 0!==g.zoom&&(M.zoom=g.zoom),void 0!==g.filmGauge&&(M.filmGauge=g.filmGauge),void 0!==g.filmOffset&&(M.filmOffset=g.filmOffset),void 0!==g.view&&(M.view=Object.assign({},g.view));break;case"OrthographicCamera":M=new Jh(g.left,g.right,g.top,g.bottom,g.near,g.far);break;case"AmbientLight":M=new Jg(g.color,g.intensity);break;case"DirectionalLight":M=new Vf(g.color,g.intensity);break;case"PointLight":M=new Gu(g.color,g.intensity,g.distance,g.decay);break;case"SpotLight":M=new oh(g.color,g.intensity,g.distance,g.angle,g.penumbra,g.decay);break;case"HemisphereLight":M=new Uc(g.color,g.groundColor,g.intensity);break;case"Mesh":var ae=O(g.geometry),re=B(g.material);M=ae.bones&&ae.bones.length>0?new Kg(ae,re):new Ya(ae,re);break;case"LOD":M=new Ra;break;case"Line":M=new Vu(O(g.geometry),B(g.material),g.mode);break;case"LineSegments":M=new $o(O(g.geometry),B(g.material));break;case"PointCloud":case"Points":M=new po(O(g.geometry),B(g.material));break;case"Sprite":M=new zu(B(g.material));break;case"Group":M=new gp;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:M=new Or}if(M.uuid=g.uuid,void 0!==g.name&&(M.name=g.name),void 0!==g.matrix?(a.fromArray(g.matrix),a.decompose(M.position,M.quaternion,M.scale)):(void 0!==g.position&&M.position.fromArray(g.position),void 0!==g.rotation&&M.rotation.fromArray(g.rotation),void 0!==g.quaternion&&M.quaternion.fromArray(g.quaternion),void 0!==g.scale&&M.scale.fromArray(g.scale)),void 0!==g.castShadow&&(M.castShadow=g.castShadow),void 0!==g.receiveShadow&&(M.receiveShadow=g.receiveShadow),g.shadow&&(void 0!==g.shadow.bias&&(M.shadow.bias=g.shadow.bias),void 0!==g.shadow.radius&&(M.shadow.radius=g.shadow.radius),void 0!==g.shadow.mapSize&&M.shadow.mapSize.fromArray(g.shadow.mapSize),void 0!==g.shadow.camera&&(M.shadow.camera=this.parseObject(g.shadow.camera))),void 0!==g.visible&&(M.visible=g.visible),void 0!==g.userData&&(M.userData=g.userData),void 0!==g.children)for(var me in g.children)M.add(this.parseObject(g.children[me],y,x));if("LOD"===g.type)for(var _e=g.levels,Oe=0;Oe<_e.length;Oe++){var Fe=_e[Oe];void 0!==(me=M.getObjectByProperty("uuid",Fe.object))&&M.addLevel(me,Fe.distance)}return M}}()}),hc.prototype={constructor:hc,getPoint:function(a){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(a){var d=this.getUtoTmapping(a);return this.getPoint(d)},getPoints:function(a){a||(a=5);for(var d=[],g=0;g<=a;g++)d.push(this.getPoint(g/a));return d},getSpacedPoints:function(a){a||(a=5);for(var d=[],g=0;g<=a;g++)d.push(this.getPointAt(g/a));return d},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var g,x,d=[],y=this.getPoint(0),M=0;for(d.push(0),x=1;x<=a;x++)M+=(g=this.getPoint(x/a)).distanceTo(y),d.push(M),y=g;return this.cacheArcLengths=d,d},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(a,d){var M,g=this.getLengths(),y=0,x=g.length;M=d||a*g[x-1];for(var ae,O=0,B=x-1;O<=B;)if((ae=g[y=Math.floor(O+(B-O)/2)]-M)<0)O=y+1;else{if(!(ae>0)){B=y;break}B=y-1}if(g[y=B]===M)return y/(x-1);var re=g[y];return(y+(M-re)/(g[y+1]-re))/(x-1)},getTangent:function(a){var d=1e-4,g=a-d,y=a+d;g<0&&(g=0),y>1&&(y=1);var x=this.getPoint(g);return this.getPoint(y).clone().sub(x).normalize()},getTangentAt:function(a){var d=this.getUtoTmapping(a);return this.getTangent(d)},computeFrenetFrames:function(a,d){var ae,me,g=new an,y=[],x=[],M=[],O=new an,B=new Vs;for(ae=0;ae<=a;ae++)y[ae]=this.getTangentAt(ae/a),y[ae].normalize();x[0]=new an,M[0]=new an;var _e=Number.MAX_VALUE,Oe=Math.abs(y[0].x),Fe=Math.abs(y[0].y),Ne=Math.abs(y[0].z);for(Oe<=_e&&(_e=Oe,g.set(1,0,0)),Fe<=_e&&(_e=Fe,g.set(0,1,0)),Ne<=_e&&g.set(0,0,1),O.crossVectors(y[0],g).normalize(),x[0].crossVectors(y[0],O),M[0].crossVectors(y[0],x[0]),ae=1;ae<=a;ae++)x[ae]=x[ae-1].clone(),M[ae]=M[ae-1].clone(),O.crossVectors(y[ae-1],y[ae]),O.length()>Number.EPSILON&&(O.normalize(),me=Math.acos(js.clamp(y[ae-1].dot(y[ae]),-1,1)),x[ae].applyMatrix4(B.makeRotationAxis(O,me))),M[ae].crossVectors(y[ae],x[ae]);if(!0===d)for(me=Math.acos(js.clamp(x[0].dot(x[a]),-1,1)),me/=a,y[0].dot(O.crossVectors(x[0],x[a]))>0&&(me=-me),ae=1;ae<=a;ae++)x[ae].applyMatrix4(B.makeRotationAxis(y[ae],me*ae)),M[ae].crossVectors(y[ae],x[ae]);return{tangents:y,normals:x,binormals:M}}},hc.create=function(a,d){return a.prototype=Object.create(hc.prototype),a.prototype.constructor=a,a.prototype.getPoint=d,a},(Nd.prototype=Object.create(hc.prototype)).constructor=Nd,Nd.prototype.isLineCurve=!0,Nd.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var d=this.v2.clone().sub(this.v1);return d.multiplyScalar(a).add(this.v1),d},Nd.prototype.getPointAt=function(a){return this.getPoint(a)},Nd.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()},im.prototype=Object.assign(Object.create(hc.prototype),{constructor:im,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),d=this.curves[this.curves.length-1].getPoint(1);a.equals(d)||this.curves.push(new Nd(d,a))},getPoint:function(a){for(var d=a*this.getLength(),g=this.getCurveLengths(),y=0;y<g.length;){if(g[y]>=d){var x=g[y]-d,M=this.curves[y],O=M.getLength();return M.getPointAt(0===O?0:1-x/O)}y++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],d=0,g=0,y=this.curves.length;g<y;g++)d+=this.curves[g].getLength(),a.push(d);return this.cacheLengths=a,a},getSpacedPoints:function(a){a||(a=40);for(var d=[],g=0;g<=a;g++)d.push(this.getPoint(g/a));return this.autoClose&&d.push(d[0]),d},getPoints:function(a){a=a||12;for(var g,d=[],y=0,x=this.curves;y<x.length;y++)for(var M=x[y],B=M.getPoints(M&&M.isEllipseCurve?2*a:M&&M.isLineCurve?1:M&&M.isSplineCurve?a*M.points.length:a),ae=0;ae<B.length;ae++){var re=B[ae];g&&g.equals(re)||(d.push(re),g=re)}return this.autoClose&&d.length>1&&!d[d.length-1].equals(d[0])&&d.push(d[0]),d},createPointsGeometry:function(a){var d=this.getPoints(a);return this.createGeometry(d)},createSpacedPointsGeometry:function(a){var d=this.getSpacedPoints(a);return this.createGeometry(d)},createGeometry:function(a){for(var d=new Qs,g=0,y=a.length;g<y;g++){var x=a[g];d.vertices.push(new an(x.x,x.y,x.z||0))}return d}}),(Eh.prototype=Object.create(hc.prototype)).constructor=Eh,Eh.prototype.isEllipseCurve=!0,Eh.prototype.getPoint=function(a){for(var d=2*Math.PI,g=this.aEndAngle-this.aStartAngle,y=Math.abs(g)<Number.EPSILON;g<0;)g+=d;for(;g>d;)g-=d;g<Number.EPSILON&&(g=y?0:d),!0===this.aClockwise&&!y&&(g===d?g=-d:g-=d);var x=this.aStartAngle+a*g,M=this.aX+this.xRadius*Math.cos(x),O=this.aY+this.yRadius*Math.sin(x);if(0!==this.aRotation){var B=Math.cos(this.aRotation),ae=Math.sin(this.aRotation),re=M-this.aX,me=O-this.aY;M=re*B-me*ae+this.aX,O=re*ae+me*B+this.aY}return new hr(M,O)};var Sc={tangentQuadraticBezier:function(a,d,g,y){return 2*(1-a)*(g-d)+2*a*(y-g)},tangentCubicBezier:function(a,d,g,y,x){return-3*d*(1-a)*(1-a)+3*g*(1-a)*(1-a)-6*a*g*(1-a)+6*a*y*(1-a)-3*a*a*y+3*a*a*x},tangentSpline:function(a,d,g,y,x){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,d,g,y,x){var M=.5*(g-a),O=.5*(y-d),B=x*x;return(2*d-2*g+M+O)*(x*B)+(-3*d+3*g-2*M-O)*B+M*x+d}};function ju(a){this.points=void 0===a?[]:a}function hf(a,d,g,y){this.v0=a,this.v1=d,this.v2=g,this.v3=y}function Th(a,d,g){this.v0=a,this.v1=d,this.v2=g}(ju.prototype=Object.create(hc.prototype)).constructor=ju,ju.prototype.isSplineCurve=!0,ju.prototype.getPoint=function(a){var d=this.points,g=(d.length-1)*a,y=Math.floor(g),x=g-y,M=d[0===y?y:y-1],O=d[y],B=d[y>d.length-2?d.length-1:y+1],ae=d[y>d.length-3?d.length-1:y+2],re=Sc.interpolate;return new hr(re(M.x,O.x,B.x,ae.x,x),re(M.y,O.y,B.y,ae.y,x))},(hf.prototype=Object.create(hc.prototype)).constructor=hf,hf.prototype.getPoint=function(a){var d=sl.b3;return new hr(d(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),d(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},hf.prototype.getTangent=function(a){var d=Sc.tangentCubicBezier;return new hr(d(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),d(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},(Th.prototype=Object.create(hc.prototype)).constructor=Th,Th.prototype.getPoint=function(a){var d=sl.b2;return new hr(d(a,this.v0.x,this.v1.x,this.v2.x),d(a,this.v0.y,this.v1.y,this.v2.y))},Th.prototype.getTangent=function(a){var d=Sc.tangentQuadraticBezier;return new hr(d(a,this.v0.x,this.v1.x,this.v2.x),d(a,this.v0.y,this.v1.y,this.v2.y)).normalize()};var Ap=Object.assign(Object.create(im.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var d=1,g=a.length;d<g;d++)this.lineTo(a[d].x,a[d].y)},moveTo:function(a,d){this.currentPoint.set(a,d)},lineTo:function(a,d){var g=new Nd(this.currentPoint.clone(),new hr(a,d));this.curves.push(g),this.currentPoint.set(a,d)},quadraticCurveTo:function(a,d,g,y){var x=new Th(this.currentPoint.clone(),new hr(a,d),new hr(g,y));this.curves.push(x),this.currentPoint.set(g,y)},bezierCurveTo:function(a,d,g,y,x,M){var O=new hf(this.currentPoint.clone(),new hr(a,d),new hr(g,y),new hr(x,M));this.curves.push(O),this.currentPoint.set(x,M)},splineThru:function(a){var g=new ju([this.currentPoint.clone()].concat(a));this.curves.push(g),this.currentPoint.copy(a[a.length-1])},arc:function(a,d,g,y,x,M){this.absarc(a+this.currentPoint.x,d+this.currentPoint.y,g,y,x,M)},absarc:function(a,d,g,y,x,M){this.absellipse(a,d,g,g,y,x,M)},ellipse:function(a,d,g,y,x,M,O,B){this.absellipse(a+this.currentPoint.x,d+this.currentPoint.y,g,y,x,M,O,B)},absellipse:function(a,d,g,y,x,M,O,B){var ae=new Eh(a,d,g,y,x,M,O,B);if(this.curves.length>0){var re=ae.getPoint(0);re.equals(this.currentPoint)||this.lineTo(re.x,re.y)}this.curves.push(ae);var me=ae.getPoint(1);this.currentPoint.copy(me)}});function fd(){Ds.apply(this,arguments),this.holes=[]}function Ds(a){im.call(this),this.currentPoint=new hr,a&&this.fromPoints(a)}function xp(){this.subPaths=[],this.currentPath=null}function rm(a){this.data=a}function ff(a){this.manager=void 0!==a?a:Vc}fd.prototype=Object.assign(Object.create(Ap),{constructor:fd,getPointsHoles:function(a){for(var d=[],g=0,y=this.holes.length;g<y;g++)d[g]=this.holes[g].getPoints(a);return d},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}}),Ds.prototype=Ap,Ap.constructor=Ds,xp.prototype={moveTo:function(a,d){this.currentPath=new Ds,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,d)},lineTo:function(a,d){this.currentPath.lineTo(a,d)},quadraticCurveTo:function(a,d,g,y){this.currentPath.quadraticCurveTo(a,d,g,y)},bezierCurveTo:function(a,d,g,y,x,M){this.currentPath.bezierCurveTo(a,d,g,y,x,M)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,d){function g(si){for(var gi=[],Vi=0,ki=si.length;Vi<ki;Vi++){var Ti=si[Vi],Cr=new fd;Cr.curves=Ti.curves,gi.push(Cr)}return gi}function y(si,gi){for(var Vi=gi.length,ki=!1,Ti=Vi-1,Cr=0;Cr<Vi;Ti=Cr++){var Ji=gi[Ti],oi=gi[Cr],ii=oi.x-Ji.x,f=oi.y-Ji.y;if(Math.abs(f)>Number.EPSILON){if(f<0&&(Ji=gi[Cr],ii=-ii,oi=gi[Ti],f=-f),si.y<Ji.y||si.y>oi.y)continue;if(si.y===Ji.y){if(si.x===Ji.x)return!0}else{var c=f*(si.x-Ji.x)-ii*(si.y-Ji.y);if(0===c)return!0;if(c<0)continue;ki=!ki}}else{if(si.y!==Ji.y)continue;if(oi.x<=si.x&&si.x<=Ji.x||Ji.x<=si.x&&si.x<=oi.x)return!0}}return ki}var x=sl.isClockWise,M=this.subPaths;if(0===M.length)return[];if(!0===d)return g(M);var O,B,ae,re=[];if(1===M.length)return B=M[0],(ae=new fd).curves=B.curves,re.push(ae),re;var me=!x(M[0].getPoints());me=a?!me:me;var ut,_e=[],Oe=[],Fe=[],Ne=0;Oe[Ne]=void 0,Fe[Ne]=[];for(var ct=0,rt=M.length;ct<rt;ct++)O=x(ut=(B=M[ct]).getPoints()),(O=a?!O:O)?(!me&&Oe[Ne]&&Ne++,Oe[Ne]={s:new fd,p:ut},Oe[Ne].s.curves=B.curves,me&&Ne++,Fe[Ne]=[]):Fe[Ne].push({h:B,p:ut[0]});if(!Oe[0])return g(M);if(Oe.length>1){for(var At=!1,St=[],tn=0,$t=Oe.length;tn<$t;tn++)_e[tn]=[];for(tn=0,$t=Oe.length;tn<$t;tn++)for(var Cn=Fe[tn],pn=0;pn<Cn.length;pn++){for(var ln=Cn[pn],In=!0,$n=0;$n<Oe.length;$n++)y(ln.p,Oe[$n].p)&&(tn!==$n&&St.push({froms:tn,tos:$n,hole:pn}),In?(In=!1,_e[$n].push(ln)):At=!0);In&&_e[tn].push(ln)}St.length>0&&(At||(Fe=_e))}ct=0;for(var zi,Ii=Oe.length;ct<Ii;ct++){re.push(ae=Oe[ct].s);for(var Qt=0,en=(zi=Fe[ct]).length;Qt<en;Qt++)ae.holes.push(zi[Qt].h)}return re}},Object.assign(rm.prototype,{isFont:!0,generateShapes:function(a,d,g){function x(me,_e,Oe){var Fe=M.glyphs[me]||M.glyphs["?"];if(Fe){var At,St,tn,$t,Cn,pn,ln,In,$n,zi,Ii,Ne=new xp,ut=[],ct=sl.b2,rt=sl.b3;if(Fe.o)for(var Qt=Fe._cachedOutline||(Fe._cachedOutline=Fe.o.split(" ")),en=0,si=Qt.length;en<si;)switch(Qt[en++]){case"m":At=Qt[en++]*_e+Oe,St=Qt[en++]*_e,Ne.moveTo(At,St);break;case"l":At=Qt[en++]*_e+Oe,St=Qt[en++]*_e,Ne.lineTo(At,St);break;case"q":if(tn=Qt[en++]*_e+Oe,$t=Qt[en++]*_e,ln=Qt[en++]*_e+Oe,In=Qt[en++]*_e,Ne.quadraticCurveTo(ln,In,tn,$t),Ii=ut[ut.length-1]){Cn=Ii.x,pn=Ii.y;for(var Vi=1;Vi<=g;Vi++)ct(ki=Vi/g,Cn,ln,tn),ct(ki,pn,In,$t)}break;case"b":if(tn=Qt[en++]*_e+Oe,$t=Qt[en++]*_e,ln=Qt[en++]*_e+Oe,In=Qt[en++]*_e,$n=Qt[en++]*_e+Oe,zi=Qt[en++]*_e,Ne.bezierCurveTo(ln,In,$n,zi,tn,$t),Ii=ut[ut.length-1])for(Cn=Ii.x,pn=Ii.y,Vi=1;Vi<=g;Vi++){var ki;rt(ki=Vi/g,Cn,ln,$n,tn),rt(ki,pn,In,zi,$t)}}return{offset:Fe.ha*_e,path:Ne}}}void 0===d&&(d=100),void 0===g&&(g=4);for(var M=this.data,O=function y(me){for(var _e=String(me).split(""),Oe=d/M.resolution,Fe=0,Ne=[],ut=0;ut<_e.length;ut++){var ct=x(_e[ut],Oe,Fe);Fe+=ct.offset,Ne.push(ct.path)}return Ne}(a),B=[],ae=0,re=O.length;ae<re;ae++)Array.prototype.push.apply(B,O[ae].toShapes());return B}}),Object.assign(ff.prototype,{load:function(a,d,g,y){var x=this;new Qo(this.manager).load(a,function(O){var B;try{B=JSON.parse(O)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),B=JSON.parse(O.substring(65,O.length-2))}var ae=x.parse(B);d&&d(ae)},g,y)},parse:function(a){return new rm(a)}});var Hf,Ip={getContext:function(){return void 0===Hf&&(Hf=new(window.AudioContext||window.webkitAudioContext)),Hf},setContext:function(a){Hf=a}};function ag(a){this.manager=void 0!==a?a:Vc}function ll(a,d,g,y){So.call(this,a,d),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==g?g:10,this.height=void 0!==y?y:10}function Vm(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Kl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Kl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function fc(a,d,g){Or.call(this),this.type="CubeCamera";var y=90,M=new Kl(y,1,a,d);M.up.set(0,-1,0),M.lookAt(new an(1,0,0)),this.add(M);var O=new Kl(y,1,a,d);O.up.set(0,-1,0),O.lookAt(new an(-1,0,0)),this.add(O);var B=new Kl(y,1,a,d);B.up.set(0,0,1),B.lookAt(new an(0,1,0)),this.add(B);var ae=new Kl(y,1,a,d);ae.up.set(0,0,-1),ae.lookAt(new an(0,-1,0)),this.add(ae);var re=new Kl(y,1,a,d);re.up.set(0,-1,0),re.lookAt(new an(0,0,1)),this.add(re);var me=new Kl(y,1,a,d);me.up.set(0,-1,0),me.lookAt(new an(0,0,-1)),this.add(me),this.renderTarget=new yh(g,g,{format:ya,magFilter:gn,minFilter:gn}),this.updateCubeMap=function(Oe,Fe){null===this.parent&&this.updateMatrixWorld();var Ne=this.renderTarget,ut=Ne.texture.generateMipmaps;Ne.texture.generateMipmaps=!1,Ne.activeCubeFace=0,Oe.render(Fe,M,Ne),Ne.activeCubeFace=1,Oe.render(Fe,O,Ne),Ne.activeCubeFace=2,Oe.render(Fe,B,Ne),Ne.activeCubeFace=3,Oe.render(Fe,ae,Ne),Ne.activeCubeFace=4,Oe.render(Fe,re,Ne),Ne.texture.generateMipmaps=ut,Ne.activeCubeFace=5,Oe.render(Fe,me,Ne),Oe.setRenderTarget(null)}}function Um(){Or.call(this),this.type="AudioListener",this.context=Ip.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Bd(a){Or.call(this),this.type="Audio",this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function lg(a){Bd.call(this,a),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Hm(a,d){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=void 0!==d?d:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}function au(a,d,g){this.binding=a,this.valueSize=g;var x,y=Float64Array;switch(d){case"quaternion":x=this._slerp;break;case"string":case"bool":y=Array,x=this._select;break;default:x=this._lerp}this.buffer=new y(4*g),this._mixBufferRegion=x,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function cl(a,d,g){this.path=d,this.parsedPath=g||cl.parseTrackName(d),this.node=cl.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a}function Gc(a){this.uuid=js.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var d={};this._indicesByUUID=d;for(var g=0,y=arguments.length;g!==y;++g)d[arguments[g].uuid]=g;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var x=this;this.stats={objects:{get total(){return x._objects.length},get inUse(){return this.total-x.nCachedObjects_}},get bindingsPerObject(){return x._bindings.length}}}function Wc(a,d,g){this._mixer=a,this._clip=d,this._localRoot=g||null;for(var y=d.tracks,x=y.length,M=new Array(x),O={endingStart:Pr,endingEnd:Pr},B=0;B!==x;++B){var ae=y[B].createInterpolant(null);M[B]=ae,ae.settings=O}this._interpolantSettings=O,this._interpolants=M,this._propertyBindings=new Array(x),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_r,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function cg(a){this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Gm(a){"string"==typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=arguments[1]),this.value=a}function pd(){Wr.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Gf(a,d,g,y){this.uuid=js.generateUUID(),this.data=a,this.itemSize=d,this.offset=g,this.normalized=!0===y}function Mh(a,d){this.uuid=js.generateUUID(),this.array=a,this.stride=d,this.count=void 0!==a?a.length/d:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function zd(a,d,g){Mh.call(this,a,d),this.meshPerAttribute=g||1}function pf(a,d,g){Tr.call(this,a,d),this.meshPerAttribute=g||1}function Tu(a,d,g,y){this.ray=new La(a,d),this.near=g||0,this.far=y||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Dh(a,d){return a.distance-d.distance}function Sp(a,d,g,y){if(!1!==a.visible&&(a.raycast(d,g),!0===y))for(var x=a.children,M=0,O=x.length;M<O;M++)Sp(x[M],d,g,!0)}function Wm(a){this.autoStart=void 0===a||a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function $_(a){this.points=a;var y,x,M,O,B,ae,re,me,_e,d=[],g={x:0,y:0,z:0};function Oe(Fe,Ne,ut,ct,rt,At,St){var tn=.5*(ut-Fe),$t=.5*(ct-Ne);return(2*(Ne-ut)+tn+$t)*St+(-3*(Ne-ut)-2*tn-$t)*At+tn*rt+Ne}this.initFromArray=function(Fe){this.points=[];for(var Ne=0;Ne<Fe.length;Ne++)this.points[Ne]={x:Fe[Ne][0],y:Fe[Ne][1],z:Fe[Ne][2]}},this.getPoint=function(Fe){return y=(this.points.length-1)*Fe,x=Math.floor(y),M=y-x,d[0]=0===x?x:x-1,d[1]=x,d[2]=x>this.points.length-2?this.points.length-1:x+1,d[3]=x>this.points.length-3?this.points.length-1:x+2,g.x=Oe((ae=this.points[d[0]]).x,(re=this.points[d[1]]).x,(me=this.points[d[2]]).x,(_e=this.points[d[3]]).x,M,O=M*M,B=M*O),g.y=Oe(ae.y,re.y,me.y,_e.y,M,O,B),g.z=Oe(ae.z,re.z,me.z,_e.z,M,O,B),g},this.getControlPointsArray=function(){var Fe,Ne,ut=this.points.length,ct=[];for(Fe=0;Fe<ut;Fe++)ct[Fe]=[(Ne=this.points[Fe]).x,Ne.y,Ne.z];return ct},this.getLength=function(Fe){var Ne,ut,ct,rt,St=0,tn=0,$t=new an,Cn=new an,pn=[],ln=0;for(pn[0]=0,Fe||(Fe=100),ct=this.points.length*Fe,$t.copy(this.points[0]),Ne=1;Ne<ct;Ne++)rt=this.getPoint(ut=Ne/ct),Cn.copy(rt),ln+=Cn.distanceTo($t),$t.copy(rt),(St=Math.floor((this.points.length-1)*ut))!==tn&&(pn[St]=ln,tn=St);return pn[pn.length]=ln,{chunks:pn,total:ln}},this.reparametrizeByArcLength=function(Fe){var Ne,ut,rt,At,tn,$t,Cn=[],pn=new an,ln=this.getLength();for(Cn.push(pn.copy(this.points[0]).clone()),Ne=1;Ne<this.points.length;Ne++){for(tn=Math.ceil(Fe*(ln.chunks[Ne]-ln.chunks[Ne-1])/ln.total),rt=(Ne-1)/(this.points.length-1),At=Ne/(this.points.length-1),ut=1;ut<tn-1;ut++)$t=this.getPoint(rt+ut*(1/tn)*(At-rt)),Cn.push(pn.copy($t).clone());Cn.push(pn.copy(this.points[Ne]).clone())}this.points=Cn}}function sm(a,d,g){return this.radius=void 0!==a?a:1,this.phi=void 0!==d?d:0,this.theta=void 0!==g?g:0,this}function jl(a,d,g){return this.radius=void 0!==a?a:1,this.theta=void 0!==d?d:0,this.y=void 0!==g?g:0,this}function Oa(a,d){Ya.call(this,a,d),this.animationsMap={},this.animationsList=[];var g=this.geometry.morphTargets.length,y="__default";this.createAnimation(y,0,g-1,g/1),this.setAnimationWeight(y,1)}function Wf(a){Or.call(this),this.material=a,this.render=function(d){}}function ug(a,d,g,y){this.object=a,this.size=void 0!==d?d:1;var x=void 0!==g?g:16711680,M=void 0!==y?y:1,O=0,B=this.object.geometry;B&&B.isGeometry?O=3*B.faces.length:B&&B.isBufferGeometry&&(O=B.attributes.normal.count);var ae=new Wr,re=new Ms(2*O*3,3);ae.addAttribute("position",re),$o.call(this,ae,new kl({color:x,linewidth:M})),this.matrixAutoUpdate=!1,this.update()}function lh(a){Or.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;for(var d=new Wr,g=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],y=0,x=1;y<32;y++,x++){var O=y/32*Math.PI*2,B=x/32*Math.PI*2;g.push(Math.cos(O),Math.sin(O),1,Math.cos(B),Math.sin(B),1)}d.addAttribute("position",new Ms(g,3));var ae=new kl({fog:!1});this.cone=new $o(d,ae),this.add(this.cone),this.update()}function ch(a){this.bones=this.getBoneList(a);for(var d=new Wr,g=[],y=[],x=new ps(0,0,1),M=new ps(0,1,0),O=0;O<this.bones.length;O++){var B=this.bones[O];B.parent&&B.parent.isBone&&(g.push(0,0,0),g.push(0,0,0),y.push(x.r,x.g,x.b),y.push(M.r,M.g,M.b))}d.addAttribute("position",new Ms(g,3)),d.addAttribute("color",new Ms(y,3));var ae=new kl({vertexColors:N,depthTest:!1,depthWrite:!1,transparent:!0});$o.call(this,d,ae),this.root=a,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Lh(a,d){this.light=a,this.light.updateMatrixWorld();var g=new ka(d,4,2),y=new pl({wireframe:!0,fog:!1});y.color.copy(this.light.color).multiplyScalar(this.light.intensity),Ya.call(this,g,y),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function gf(a){Or.call(this),this.light=a,this.light.updateMatrixWorld();var d=new pl({color:a.color,fog:!1}),g=new pl({color:a.color,fog:!1,wireframe:!0}),y=new Wr;y.addAttribute("position",new Tr(new Float32Array(18),3)),this.add(new Ya(y,d)),this.add(new Ya(y,g)),this.update()}function Ph(a,d){Or.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;var g=new Iu(d);g.rotateY(.5*Math.PI);var y=new pl({vertexColors:N,wireframe:!0}),x=g.getAttribute("position"),M=new Float32Array(3*x.count);g.addAttribute("color",new Tr(M,3)),this.add(new Ya(g,y)),this.update()}function dg(a,d,g,y){a=a||10,d=d||10,g=new ps(void 0!==g?g:4473924),y=new ps(void 0!==y?y:8947848);for(var x=d/2,M=2*a/d,O=[],B=[],ae=0,re=0,me=-a;ae<=d;ae++,me+=M){O.push(-a,0,me,a,0,me),O.push(me,0,-a,me,0,a);var _e=ae===x?g:y;_e.toArray(B,re),_e.toArray(B,re+=3),_e.toArray(B,re+=3),_e.toArray(B,re+=3),re+=3}var Oe=new Wr;Oe.addAttribute("position",new Ms(O,3)),Oe.addAttribute("color",new Ms(B,3));var Fe=new kl({vertexColors:N});$o.call(this,Oe,Fe)}function gd(a,d,g,y,x,M){a=a||10,d=d||16,g=g||8,y=y||64,x=new ps(void 0!==x?x:4473924),M=new ps(void 0!==M?M:8947848);var ae,re,me,_e,Oe,Fe,Ne,O=[],B=[];for(_e=0;_e<=d;_e++)me=_e/d*(2*Math.PI),ae=Math.sin(me)*a,re=Math.cos(me)*a,O.push(0,0,0),O.push(ae,0,re),B.push((Ne=1&_e?x:M).r,Ne.g,Ne.b),B.push(Ne.r,Ne.g,Ne.b);for(_e=0;_e<=g;_e++)for(Ne=1&_e?x:M,Fe=a-a/g*_e,Oe=0;Oe<y;Oe++)me=Oe/y*(2*Math.PI),ae=Math.sin(me)*Fe,re=Math.cos(me)*Fe,O.push(ae,0,re),B.push(Ne.r,Ne.g,Ne.b),me=(Oe+1)/y*(2*Math.PI),ae=Math.sin(me)*Fe,re=Math.cos(me)*Fe,O.push(ae,0,re),B.push(Ne.r,Ne.g,Ne.b);var ut=new Wr;ut.addAttribute("position",new Ms(O,3)),ut.addAttribute("color",new Ms(B,3));var ct=new kl({vertexColors:N});$o.call(this,ut,ct)}function uh(a,d,g,y){this.object=a,this.size=void 0!==d?d:1;var x=void 0!==g?g:16776960,M=void 0!==y?y:1,O=0,B=this.object.geometry;B&&B.isGeometry?O=B.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var ae=new Wr,re=new Ms(2*O*3,3);ae.addAttribute("position",re),$o.call(this,ae,new kl({color:x,linewidth:M})),this.matrixAutoUpdate=!1,this.update()}function hg(a,d){Or.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,void 0===d&&(d=1);var g=new Wr;g.addAttribute("position",new Ms([-d,d,0,d,d,0,d,-d,0,-d,-d,0,-d,d,0],3));var y=new kl({fog:!1});this.add(new Vu(g,y)),(g=new Wr).addAttribute("position",new Ms([0,0,0,0,0,1],3)),this.add(new Vu(g,y)),this.update()}function om(a){var d=new Wr,g=new kl({color:16777215,vertexColors:oe}),y=[],x=[],M={},O=new ps(16755200),B=new ps(16711680),ae=new ps(43775),re=new ps(16777215),me=new ps(3355443);function _e(Fe,Ne,ut){Oe(Fe,ut),Oe(Ne,ut)}function Oe(Fe,Ne){y.push(0,0,0),x.push(Ne.r,Ne.g,Ne.b),void 0===M[Fe]&&(M[Fe]=[]),M[Fe].push(y.length/3-1)}_e("n1","n2",O),_e("n2","n4",O),_e("n4","n3",O),_e("n3","n1",O),_e("f1","f2",O),_e("f2","f4",O),_e("f4","f3",O),_e("f3","f1",O),_e("n1","f1",O),_e("n2","f2",O),_e("n3","f3",O),_e("n4","f4",O),_e("p","n1",B),_e("p","n2",B),_e("p","n3",B),_e("p","n4",B),_e("u1","u2",ae),_e("u2","u3",ae),_e("u3","u1",ae),_e("c","t",re),_e("p","c",me),_e("cn1","cn2",me),_e("cn3","cn4",me),_e("cf1","cf2",me),_e("cf3","cf4",me),d.addAttribute("position",new Ms(y,3)),d.addAttribute("color",new Ms(x,3)),$o.call(this,d,g),this.camera=a,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=M,this.update()}function fg(a,d){void 0===d&&(d=16776960);var g=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=new Float32Array(24),x=new Wr;x.setIndex(new Tr(g,1)),x.addAttribute("position",new Tr(y,3)),$o.call(this,x,new kl({color:d})),void 0!==a&&this.update(a)}Object.assign(ag.prototype,{load:function(a,d,g,y){var x=new Qo(this.manager);x.setResponseType("arraybuffer"),x.load(a,function(M){Ip.getContext().decodeAudioData(M,function(B){d(B)})},g,y)}}),ll.prototype=Object.assign(Object.create(So.prototype),{constructor:ll,isRectAreaLight:!0,copy:function(a){return So.prototype.copy.call(this,a),this.width=a.width,this.height=a.height,this}}),Object.assign(Vm.prototype,{update:function(){var a,d,g,y,x,M,O,B=new Vs,ae=new Vs;return function(me){if(a!==this||d!==me.focus||g!==me.fov||y!==me.aspect*this.aspect||x!==me.near||M!==me.far||O!==me.zoom){a=this,d=me.focus,g=me.fov,y=me.aspect*this.aspect,x=me.near,M=me.far,O=me.zoom;var ct,rt,Oe=me.projectionMatrix.clone(),Fe=this.eyeSep/2,Ne=Fe*x/d,ut=x*Math.tan(js.DEG2RAD*g*.5)/O;ae.elements[12]=-Fe,B.elements[12]=Fe,Oe.elements[0]=2*x/((rt=ut*y+Ne)-(ct=-ut*y+Ne)),Oe.elements[8]=(rt+ct)/(rt-ct),this.cameraL.projectionMatrix.copy(Oe),Oe.elements[0]=2*x/((rt=ut*y-Ne)-(ct=-ut*y-Ne)),Oe.elements[8]=(rt+ct)/(rt-ct),this.cameraR.projectionMatrix.copy(Oe)}this.cameraL.matrixWorld.copy(me.matrixWorld).multiply(ae),this.cameraR.matrixWorld.copy(me.matrixWorld).multiply(B)}}()}),(fc.prototype=Object.create(Or.prototype)).constructor=fc,Um.prototype=Object.assign(Object.create(Or.prototype),{constructor:Um,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=a,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new an,d=new oc,g=new an,y=new an;return function(M){Or.prototype.updateMatrixWorld.call(this,M);var O=this.context.listener,B=this.up;this.matrixWorld.decompose(a,d,g),y.set(0,0,-1).applyQuaternion(d),O.positionX?(O.positionX.setValueAtTime(a.x,this.context.currentTime),O.positionY.setValueAtTime(a.y,this.context.currentTime),O.positionZ.setValueAtTime(a.z,this.context.currentTime),O.forwardX.setValueAtTime(y.x,this.context.currentTime),O.forwardY.setValueAtTime(y.y,this.context.currentTime),O.forwardZ.setValueAtTime(y.z,this.context.currentTime),O.upX.setValueAtTime(B.x,this.context.currentTime),O.upY.setValueAtTime(B.y,this.context.currentTime),O.upZ.setValueAtTime(B.z,this.context.currentTime)):(O.setPosition(a.x,a.y,a.z),O.setOrientation(y.x,y.y,y.z,B.x,B.y,B.z))}}()}),Bd.prototype=Object.assign(Object.create(Or.prototype),{constructor:Bd,getOutput:function(){return this.gain},setNodeSource:function(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this},setBuffer:function(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.onended=this.onEnded.bind(this),a.playbackRate.setValueAtTime(this.playbackRate,this.startTime),a.start(0,this.startTime),this.isPlaying=!0,this.source=a,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var a=1,d=this.filters.length;a<d;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var a=1,d=this.filters.length;a<d;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){return a||(a=[]),!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(a){return this.gain.gain.value=a,this}}),lg.prototype=Object.assign(Object.create(Bd.prototype),{constructor:lg,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new an;return function(g){Or.prototype.updateMatrixWorld.call(this,g),a.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(a.x,a.y,a.z)}}()}),Object.assign(Hm.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var a=0,d=this.getFrequencyData(),g=0;g<d.length;g++)a+=d[g];return a/d.length}}),au.prototype={constructor:au,accumulate:function(a,d){var g=this.buffer,y=this.valueSize,x=a*y+y,M=this.cumulativeWeight;if(0===M){for(var O=0;O!==y;++O)g[x+O]=g[O];M=d}else this._mixBufferRegion(g,x,0,d/(M+=d),y);this.cumulativeWeight=M},apply:function(a){var d=this.valueSize,g=this.buffer,y=a*d+d,x=this.cumulativeWeight,M=this.binding;this.cumulativeWeight=0,x<1&&this._mixBufferRegion(g,y,3*d,1-x,d);for(var B=d,ae=d+d;B!==ae;++B)if(g[B]!==g[B+d]){M.setValue(g,y);break}},saveOriginalState:function(){var d=this.buffer,g=this.valueSize,y=3*g;this.binding.getValue(d,y);for(var x=g,M=y;x!==M;++x)d[x]=d[y+x%g];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,d,g,y,x){if(y>=.5)for(var M=0;M!==x;++M)a[d+M]=a[g+M]},_slerp:function(a,d,g,y,x){oc.slerpFlat(a,d,a,d,a,g,y)},_lerp:function(a,d,g,y,x){for(var M=1-y,O=0;O!==x;++O){var B=d+O;a[B]=a[B]*M+a[g+O]*y}}},cl.prototype={constructor:cl,getValue:function(d,g){this.bind(),this.getValue(d,g)},setValue:function(d,g){this.bind(),this.setValue(d,g)},bind:function(){var a=this.node,d=this.parsedPath,g=d.objectName,y=d.propertyName,x=d.propertyIndex;if(a||(a=cl.findNode(this.rootNode,d.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,a){if(g){var M=d.objectIndex;switch(g){case"materials":if(!a.material)return void console.error("  can not bind to material as node does not have a material",this);if(!a.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);a=a.material.materials;break;case"bones":if(!a.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);a=a.skeleton.bones;for(var O=0;O<a.length;O++)if(a[O].name===M){M=O;break}break;default:if(void 0===a[g])return void console.error("  can not bind to objectName of node, undefined",this);a=a[g]}if(void 0!==M){if(void 0===a[M])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);a=a[M]}}var B=a[y];if(void 0!==B){var re=this.Versioning.None;void 0!==a.needsUpdate?(re=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(re=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);var me=this.BindingType.Direct;if(void 0!==x){if("morphTargetInfluences"===y){if(!a.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!a.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(O=0;O<this.node.geometry.morphTargets.length;O++)if(a.geometry.morphTargets[O].name===x){x=O;break}}me=this.BindingType.ArrayElement,this.resolvedProperty=B,this.propertyIndex=x}else void 0!==B.fromArray&&void 0!==B.toArray?(me=this.BindingType.HasFromToArray,this.resolvedProperty=B):void 0!==B.length?(me=this.BindingType.EntireArray,this.resolvedProperty=B):this.propertyName=y;this.getValue=this.GetterByBindingType[me],this.setValue=this.SetterByBindingTypeAndVersioning[me][re]}else console.error("  trying to update property for track: "+d.nodeName+"."+y+" but it wasn't found.",a)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(cl.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:cl.prototype.getValue,_setValue_unbound:cl.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(d,g){d[g]=this.node[this.propertyName]},function(d,g){for(var y=this.resolvedProperty,x=0,M=y.length;x!==M;++x)d[g++]=y[x]},function(d,g){d[g]=this.resolvedProperty[this.propertyIndex]},function(d,g){this.resolvedProperty.toArray(d,g)}],SetterByBindingTypeAndVersioning:[[function(d,g){this.node[this.propertyName]=d[g]},function(d,g){this.node[this.propertyName]=d[g],this.targetObject.needsUpdate=!0},function(d,g){this.node[this.propertyName]=d[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(d,g){for(var y=this.resolvedProperty,x=0,M=y.length;x!==M;++x)y[x]=d[g++]},function(d,g){for(var y=this.resolvedProperty,x=0,M=y.length;x!==M;++x)y[x]=d[g++];this.targetObject.needsUpdate=!0},function(d,g){for(var y=this.resolvedProperty,x=0,M=y.length;x!==M;++x)y[x]=d[g++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(d,g){this.resolvedProperty[this.propertyIndex]=d[g]},function(d,g){this.resolvedProperty[this.propertyIndex]=d[g],this.targetObject.needsUpdate=!0},function(d,g){this.resolvedProperty[this.propertyIndex]=d[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(d,g){this.resolvedProperty.fromArray(d,g)},function(d,g){this.resolvedProperty.fromArray(d,g),this.targetObject.needsUpdate=!0},function(d,g){this.resolvedProperty.fromArray(d,g),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),(cl.Composite=function(a,d,g){var y=g||cl.parseTrackName(d);this._targetGroup=a,this._bindings=a.subscribe_(d,y)}).prototype={constructor:cl.Composite,getValue:function(a,d){this.bind();var y=this._bindings[this._targetGroup.nCachedObjects_];void 0!==y&&y.getValue(a,d)},setValue:function(a,d){for(var g=this._bindings,y=this._targetGroup.nCachedObjects_,x=g.length;y!==x;++y)g[y].setValue(a,d)},bind:function(){for(var a=this._bindings,d=this._targetGroup.nCachedObjects_,g=a.length;d!==g;++d)a[d].bind()},unbind:function(){for(var a=this._bindings,d=this._targetGroup.nCachedObjects_,g=a.length;d!==g;++d)a[d].unbind()}},cl.create=function(a,d,g){return a&&a.isAnimationObjectGroup?new cl.Composite(a,d,g):new cl(a,d,g)},cl.parseTrackName=function(a){var g=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(a);if(!g)throw new Error("cannot parse trackName at all: "+a);var y={nodeName:g[2],objectName:g[3],objectIndex:g[4],propertyName:g[5],propertyIndex:g[6]};if(null===y.propertyName||0===y.propertyName.length)throw new Error("can not parse propertyName from trackName: "+a);return y},cl.findNode=function(a,d){if(!d||""===d||"root"===d||"."===d||-1===d||d===a.name||d===a.uuid)return a;if(a.skeleton){var y=function(O){for(var B=0;B<O.bones.length;B++){var ae=O.bones[B];if(ae.name===d)return ae}return null}(a.skeleton);if(y)return y}if(a.children){var x=function(O){for(var B=0;B<O.length;B++){var ae=O[B];if(ae.name===d||ae.uuid===d)return ae;var re=x(ae.children);if(re)return re}return null},M=x(a.children);if(M)return M}return null},Gc.prototype={constructor:Gc,isAnimationObjectGroup:!0,add:function(a){for(var d=this._objects,g=d.length,y=this.nCachedObjects_,x=this._indicesByUUID,M=this._paths,O=this._parsedPaths,B=this._bindings,ae=B.length,re=0,me=arguments.length;re!==me;++re){var _e=arguments[re],Oe=_e.uuid,Fe=x[Oe],Ne=void 0;if(void 0===Fe){Fe=g++,x[Oe]=Fe,d.push(_e);for(var ut=0,ct=ae;ut!==ct;++ut)B[ut].push(new cl(_e,M[ut],O[ut]))}else if(Fe<y){Ne=d[Fe];var rt=--y,At=d[rt];for(x[At.uuid]=Fe,d[Fe]=At,x[Oe]=rt,d[rt]=_e,ut=0,ct=ae;ut!==ct;++ut){var St=B[ut],tn=St[rt],$t=St[Fe];St[Fe]=tn,void 0===$t&&($t=new cl(_e,M[ut],O[ut])),St[rt]=$t}}else d[Fe]!==Ne&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=y},remove:function(a){for(var d=this._objects,g=this.nCachedObjects_,y=this._indicesByUUID,x=this._bindings,M=x.length,O=0,B=arguments.length;O!==B;++O){var ae=arguments[O],re=ae.uuid,me=y[re];if(void 0!==me&&me>=g){var _e=g++,Oe=d[_e];y[Oe.uuid]=me,d[me]=Oe,y[re]=_e,d[_e]=ae;for(var Fe=0,Ne=M;Fe!==Ne;++Fe){var ut=x[Fe],ct=ut[_e],rt=ut[me];ut[me]=ct,ut[_e]=rt}}}this.nCachedObjects_=g},uncache:function(a){for(var d=this._objects,g=d.length,y=this.nCachedObjects_,x=this._indicesByUUID,M=this._bindings,O=M.length,B=0,ae=arguments.length;B!==ae;++B){var re=arguments[B],me=re.uuid,_e=x[me];if(void 0!==_e)if(delete x[me],_e<y){var Oe=--y,Fe=d[Oe],ut=d[Ne=--g];x[Fe.uuid]=_e,d[_e]=Fe,x[ut.uuid]=Oe,d[Oe]=ut,d.pop();for(var ct=0,rt=O;ct!==rt;++ct){var St=(At=M[ct])[Oe],tn=At[Ne];At[_e]=St,At[Oe]=tn,At.pop()}}else{var Ne;for(x[(ut=d[Ne=--g]).uuid]=_e,d[_e]=ut,d.pop(),ct=0,rt=O;ct!==rt;++ct){var At;(At=M[ct])[_e]=At[Ne],At.pop()}}}this.nCachedObjects_=y},subscribe_:function(a,d){var g=this._bindingsIndicesByPath,y=g[a],x=this._bindings;if(void 0!==y)return x[y];var M=this._paths,O=this._parsedPaths,B=this._objects,re=this.nCachedObjects_,me=new Array(B.length);g[a]=y=x.length,M.push(a),O.push(d),x.push(me);for(var _e=re,Oe=B.length;_e!==Oe;++_e)me[_e]=new cl(B[_e],a,d);return me},unsubscribe_:function(a){var d=this._bindingsIndicesByPath,g=d[a];if(void 0!==g){var y=this._paths,x=this._parsedPaths,M=this._bindings,O=M.length-1,B=M[O];d[a[O]]=g,M[g]=B,M.pop(),x[g]=x[O],x.pop(),y[g]=y[O],y.pop()}}},Wc.prototype={constructor:Wc,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){return this._startTime=a,this},setLoop:function(a,d){return this.loop=a,this.repetitions=d,this},setEffectiveWeight:function(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,d,g){if(a.fadeOut(d),this.fadeIn(d),g){var y=this._clip.duration,x=a._clip.duration,O=y/x;a.warp(1,x/y,d),this.warp(O,1,d)}return this},crossFadeTo:function(a,d,g){return a.crossFadeFrom(this,d,g)},stopFading:function(){var a=this._weightInterpolant;return null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},setEffectiveTimeScale:function(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){return this.timeScale=this._clip.duration/a,this.stopWarping()},syncWith:function(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,d,g){var y=this._mixer,x=y.time,M=this._timeScaleInterpolant,O=this.timeScale;null===M&&(M=y._lendControlInterpolant(),this._timeScaleInterpolant=M);var B=M.parameterPositions,ae=M.sampleValues;return B[0]=x,B[1]=x+g,ae[0]=a/O,ae[1]=d/O,this},stopWarping:function(){var a=this._timeScaleInterpolant;return null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,d,g,y){var x=this._startTime;if(null!==x){var M=(a-x)*g;if(M<0||0===g)return;this._startTime=null,d=g*M}d*=this._updateTimeScale(a);var O=this._updateTime(d),B=this._updateWeight(a);if(B>0)for(var ae=this._interpolants,re=this._propertyBindings,me=0,_e=ae.length;me!==_e;++me)ae[me].evaluate(O),re[me].accumulate(y,B)},_updateWeight:function(a){var d=0;if(this.enabled){d=this.weight;var g=this._weightInterpolant;if(null!==g){var y=g.evaluate(a)[0];d*=y,a>g.parameterPositions[1]&&(this.stopFading(),0===y&&(this.enabled=!1))}}return this._effectiveWeight=d,d},_updateTimeScale:function(a){var d=0;if(!this.paused){d=this.timeScale;var g=this._timeScaleInterpolant;null!==g&&(d*=g.evaluate(a)[0],a>g.parameterPositions[1]&&(this.stopWarping(),0===d?this.paused=!0:this.timeScale=d))}return this._effectiveTimeScale=d,d},_updateTime:function(a){var d=this.time+a;if(0===a)return d;var g=this._clip.duration,y=this.loop,x=this._loopCount;if(y===Dr){-1===x&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(d>=g)d=g;else{if(!(d<0))break e;d=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:a<0?-1:1})}}else{var M=y===gr;if(-1===x&&(a>=0?(x=0,this._setEndings(!0,0===this.repetitions,M)):this._setEndings(0===this.repetitions,!0,M)),d>=g||d<0){var O=Math.floor(d/g);d-=g*O,x+=Math.abs(O);var B=this.repetitions-x;if(B<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,d=a>0?g:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(0===B){var ae=a<0;this._setEndings(ae,!ae,M)}else this._setEndings(!1,!1,M);this._loopCount=x,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:O})}}if(M&&1==(1&x))return this.time=d,g-d}return this.time=d,d},_setEndings:function(a,d,g){var y=this._interpolantSettings;g?(y.endingStart=_o,y.endingEnd=_o):(y.endingStart=a?this.zeroSlopeAtStart?_o:Pr:hs,y.endingEnd=d?this.zeroSlopeAtEnd?_o:Pr:hs)},_scheduleFading:function(a,d,g){var y=this._mixer,x=y.time,M=this._weightInterpolant;null===M&&(M=y._lendControlInterpolant(),this._weightInterpolant=M);var O=M.parameterPositions,B=M.sampleValues;return O[0]=x,B[0]=d,O[1]=x+a,B[1]=g,this}},Object.assign(cg.prototype,Y.prototype,{clipAction:function(a,d){var g=d||this._root,y=g.uuid,x="string"==typeof a?tc.findByName(g,a):a,M=null!==x?x.uuid:a,O=this._actionsByClip[M],B=null;if(void 0!==O){var ae=O.actionByRoot[y];if(void 0!==ae)return ae;B=O.knownActions[0],null===x&&(x=B._clip)}if(null===x)return null;var re=new Wc(this,x,d);return this._bindAction(re,B),this._addInactiveAction(re,M,y),re},existingAction:function(a,d){var g=d||this._root,y=g.uuid,x="string"==typeof a?tc.findByName(g,a):a,O=this._actionsByClip[x?x.uuid:a];return void 0!==O&&O.actionByRoot[y]||null},stopAllAction:function(){var a=this._actions,d=this._nActiveActions,g=this._bindings,y=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var x=0;x!==d;++x)a[x].reset();for(x=0;x!==y;++x)g[x].useCount=0;return this},update:function(a){for(var d=this._actions,g=this._nActiveActions,y=this.time+=a*=this.timeScale,x=Math.sign(a),M=this._accuIndex^=1,O=0;O!==g;++O){var B=d[O];B.enabled&&B._update(y,a,x,M)}var ae=this._bindings,re=this._nActiveBindings;for(O=0;O!==re;++O)ae[O].apply(M);return this},getRoot:function(){return this._root},uncacheClip:function(a){var d=this._actions,g=a.uuid,y=this._actionsByClip,x=y[g];if(void 0!==x){for(var M=x.knownActions,O=0,B=M.length;O!==B;++O){var ae=M[O];this._deactivateAction(ae);var re=ae._cacheIndex,me=d[d.length-1];ae._cacheIndex=null,ae._byClipCacheIndex=null,me._cacheIndex=re,d[re]=me,d.pop(),this._removeInactiveBindingsForAction(ae)}delete y[g]}},uncacheRoot:function(a){var d=a.uuid,g=this._actionsByClip;for(var y in g){var M=g[y].actionByRoot[d];void 0!==M&&(this._deactivateAction(M),this._removeInactiveAction(M))}var B=this._bindingsByRootAndName[d];if(void 0!==B)for(var ae in B){var re=B[ae];re.restoreOriginalState(),this._removeInactiveBinding(re)}},uncacheAction:function(a,d){var g=this.existingAction(a,d);null!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}}),Object.assign(cg.prototype,{_bindAction:function(a,d){var g=a._localRoot||this._root,y=a._clip.tracks,x=y.length,M=a._propertyBindings,O=a._interpolants,B=g.uuid,ae=this._bindingsByRootAndName,re=ae[B];void 0===re&&(ae[B]=re={});for(var me=0;me!==x;++me){var _e=y[me],Oe=_e.name,Fe=re[Oe];if(void 0!==Fe)M[me]=Fe;else{if(void 0!==(Fe=M[me])){null===Fe._cacheIndex&&(++Fe.referenceCount,this._addInactiveBinding(Fe,B,Oe));continue}++(Fe=new au(cl.create(g,Oe,d&&d._propertyBindings[me].binding.parsedPath),_e.ValueTypeName,_e.getValueSize())).referenceCount,this._addInactiveBinding(Fe,B,Oe),M[me]=Fe}O[me].resultBuffer=Fe.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var d=(a._localRoot||this._root).uuid,g=a._clip.uuid,y=this._actionsByClip[g];this._bindAction(a,y&&y.knownActions[0]),this._addInactiveAction(a,g,d)}for(var x=a._propertyBindings,M=0,O=x.length;M!==O;++M){var B=x[M];0==B.useCount++&&(this._lendBinding(B),B.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var d=a._propertyBindings,g=0,y=d.length;g!==y;++g){var x=d[g];0==--x.useCount&&(x.restoreOriginalState(),this._takeBackBinding(x))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){var d=a._cacheIndex;return null!==d&&d<this._nActiveActions},_addInactiveAction:function(a,d,g){var y=this._actions,x=this._actionsByClip,M=x[d];if(void 0===M)M={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,x[d]=M;else{var O=M.knownActions;a._byClipCacheIndex=O.length,O.push(a)}a._cacheIndex=y.length,y.push(a),M.actionByRoot[g]=a},_removeInactiveAction:function(a){var d=this._actions,g=d[d.length-1],y=a._cacheIndex;g._cacheIndex=y,d[y]=g,d.pop(),a._cacheIndex=null;var x=a._clip.uuid,M=this._actionsByClip,O=M[x],B=O.knownActions,ae=B[B.length-1],re=a._byClipCacheIndex;ae._byClipCacheIndex=re,B[re]=ae,B.pop(),a._byClipCacheIndex=null,delete O.actionByRoot[(d._localRoot||this._root).uuid],0===B.length&&delete M[x],this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){for(var d=a._propertyBindings,g=0,y=d.length;g!==y;++g){var x=d[g];0==--x.referenceCount&&this._removeInactiveBinding(x)}},_lendAction:function(a){var d=this._actions,g=a._cacheIndex,y=this._nActiveActions++,x=d[y];a._cacheIndex=y,d[y]=a,x._cacheIndex=g,d[g]=x},_takeBackAction:function(a){var d=this._actions,g=a._cacheIndex,y=--this._nActiveActions,x=d[y];a._cacheIndex=y,d[y]=a,x._cacheIndex=g,d[g]=x},_addInactiveBinding:function(a,d,g){var y=this._bindingsByRootAndName,x=y[d],M=this._bindings;void 0===x&&(y[d]=x={}),x[g]=a,a._cacheIndex=M.length,M.push(a)},_removeInactiveBinding:function(a){var d=this._bindings,g=a.binding,y=g.rootNode.uuid,x=g.path,M=this._bindingsByRootAndName,O=M[y],B=d[d.length-1],ae=a._cacheIndex;B._cacheIndex=ae,d[ae]=B,d.pop(),delete O[x];e:{for(var re in O)break e;delete M[y]}},_lendBinding:function(a){var d=this._bindings,g=a._cacheIndex,y=this._nActiveBindings++,x=d[y];a._cacheIndex=y,d[y]=a,x._cacheIndex=g,d[g]=x},_takeBackBinding:function(a){var d=this._bindings,g=a._cacheIndex,y=--this._nActiveBindings,x=d[y];a._cacheIndex=y,d[y]=a,x._cacheIndex=g,d[g]=x},_lendControlInterpolant:function(){var a=this._controlInterpolants,d=this._nActiveControlInterpolants++,g=a[d];return void 0===g&&((g=new uf(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=d,a[d]=g),g},_takeBackControlInterpolant:function(a){var d=this._controlInterpolants,g=a.__cacheIndex,y=--this._nActiveControlInterpolants,x=d[y];a.__cacheIndex=y,d[y]=a,x.__cacheIndex=g,d[g]=x},_controlInterpolantsResultBuffer:new Float32Array(1)}),Gm.prototype.clone=function(){return new Gm(void 0===this.value.clone?this.value:this.value.clone())},(pd.prototype=Object.create(Wr.prototype)).constructor=pd,pd.prototype.isInstancedBufferGeometry=!0,pd.prototype.addGroup=function(a,d,g){this.groups.push({start:a,count:d,materialIndex:g})},pd.prototype.copy=function(a){var d=a.index;null!==d&&this.setIndex(d.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var M=a.groups,O=0,B=M.length;O<B;O++){var ae=M[O];this.addGroup(ae.start,ae.count,ae.materialIndex)}return this},Gf.prototype={constructor:Gf,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(a,d){return this.data.array[a*this.data.stride+this.offset]=d,this},setY:function(a,d){return this.data.array[a*this.data.stride+this.offset+1]=d,this},setZ:function(a,d){return this.data.array[a*this.data.stride+this.offset+2]=d,this},setW:function(a,d){return this.data.array[a*this.data.stride+this.offset+3]=d,this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,d,g){return this.data.array[(a=a*this.data.stride+this.offset)+0]=d,this.data.array[a+1]=g,this},setXYZ:function(a,d,g,y){return this.data.array[(a=a*this.data.stride+this.offset)+0]=d,this.data.array[a+1]=g,this.data.array[a+2]=y,this},setXYZW:function(a,d,g,y,x){return this.data.array[(a=a*this.data.stride+this.offset)+0]=d,this.data.array[a+1]=g,this.data.array[a+2]=y,this.data.array[a+3]=x,this}},Mh.prototype={constructor:Mh,isInterleavedBuffer:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.dynamic=a.dynamic,this},copyAt:function(a,d,g){a*=this.stride,g*=d.stride;for(var y=0,x=this.stride;y<x;y++)this.array[a+y]=d.array[g+y];return this},set:function(a,d){return void 0===d&&(d=0),this.array.set(a,d),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){return this.onUploadCallback=a,this}},(zd.prototype=Object.create(Mh.prototype)).constructor=zd,zd.prototype.isInstancedInterleavedBuffer=!0,zd.prototype.copy=function(a){return Mh.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},(pf.prototype=Object.create(Tr.prototype)).constructor=pf,pf.prototype.isInstancedBufferAttribute=!0,pf.prototype.copy=function(a){return Tr.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},Tu.prototype={constructor:Tu,linePrecision:1,set:function(a,d){this.ray.set(a,d)},setFromCamera:function(a,d){d&&d.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(d.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(d).sub(this.ray.origin).normalize()):d&&d.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(d.near+d.far)/(d.near-d.far)).unproject(d),this.ray.direction.set(0,0,-1).transformDirection(d.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,d){var g=[];return Sp(a,this,g,d),g.sort(Dh),g},intersectObjects:function(a,d){var g=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g;for(var y=0,x=a.length;y<x;y++)Sp(a[y],this,g,d);return g.sort(Dh),g}},Wm.prototype={constructor:Wm,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running&&this.start(),this.running){var d=(performance||Date).now();a=(d-this.oldTime)/1e3,this.oldTime=d,this.elapsedTime+=a}return a}},sm.prototype={constructor:sm,set:function(a,d,g){return this.radius=a,this.phi=d,this.theta=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this},makeSafe:function(){var a=1e-6;return this.phi=Math.max(a,Math.min(Math.PI-a,this.phi)),this},setFromVector3:function(a){return this.radius=a.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(js.clamp(a.y/this.radius,-1,1))),this}},jl.prototype={constructor:jl,set:function(a,d,g){return this.radius=a,this.theta=d,this.y=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.theta=a.theta,this.y=a.y,this},setFromVector3:function(a){return this.radius=Math.sqrt(a.x*a.x+a.z*a.z),this.theta=Math.atan2(a.x,a.z),this.y=a.y,this}},(Oa.prototype=Object.create(Ya.prototype)).constructor=Oa,Oa.prototype.createAnimation=function(a,d,g,y){var x={start:d,end:g,length:g-d+1,fps:y,duration:(g-d)/y,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=x,this.animationsList.push(x)},Oa.prototype.autoCreateAnimations=function(a){for(var g,d=/([a-z]+)_?(\d+)/i,y={},x=this.geometry,M=0,O=x.morphTargets.length;M<O;M++){var ae=x.morphTargets[M].name.match(d);ae&&ae.length>1&&(y[re=ae[1]]||(y[re]={start:1/0,end:-1/0}),M<(me=y[re]).start&&(me.start=M),M>me.end&&(me.end=M),g||(g=re))}for(var re in y){var me;this.createAnimation(re,(me=y[re]).start,me.end,a)}this.firstAnimation=g},Oa.prototype.setAnimationDirectionForward=function(a){var d=this.animationsMap[a];d&&(d.direction=1,d.directionBackwards=!1)},Oa.prototype.setAnimationDirectionBackward=function(a){var d=this.animationsMap[a];d&&(d.direction=-1,d.directionBackwards=!0)},Oa.prototype.setAnimationFPS=function(a,d){var g=this.animationsMap[a];g&&(g.fps=d,g.duration=(g.end-g.start)/g.fps)},Oa.prototype.setAnimationDuration=function(a,d){var g=this.animationsMap[a];g&&(g.duration=d,g.fps=(g.end-g.start)/g.duration)},Oa.prototype.setAnimationWeight=function(a,d){var g=this.animationsMap[a];g&&(g.weight=d)},Oa.prototype.setAnimationTime=function(a,d){var g=this.animationsMap[a];g&&(g.time=d)},Oa.prototype.getAnimationTime=function(a){var d=0,g=this.animationsMap[a];return g&&(d=g.time),d},Oa.prototype.getAnimationDuration=function(a){var d=-1,g=this.animationsMap[a];return g&&(d=g.duration),d},Oa.prototype.playAnimation=function(a){var d=this.animationsMap[a];d?(d.time=0,d.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")},Oa.prototype.stopAnimation=function(a){var d=this.animationsMap[a];d&&(d.active=!1)},Oa.prototype.update=function(a){for(var d=0,g=this.animationsList.length;d<g;d++){var y=this.animationsList[d];if(y.active){var x=y.duration/y.length;y.time+=y.direction*a,y.mirroredLoop?(y.time>y.duration||y.time<0)&&(y.direction*=-1,y.time>y.duration&&(y.time=y.duration,y.directionBackwards=!0),y.time<0&&(y.time=0,y.directionBackwards=!1)):(y.time=y.time%y.duration,y.time<0&&(y.time+=y.duration));var M=y.start+js.clamp(Math.floor(y.time/x),0,y.length-1),O=y.weight;M!==y.currentFrame&&(this.morphTargetInfluences[y.lastFrame]=0,this.morphTargetInfluences[y.currentFrame]=1*O,this.morphTargetInfluences[M]=0,y.lastFrame=y.currentFrame,y.currentFrame=M);var B=y.time%x/x;y.directionBackwards&&(B=1-B),y.currentFrame!==y.lastFrame?(this.morphTargetInfluences[y.currentFrame]=B*O,this.morphTargetInfluences[y.lastFrame]=(1-B)*O):this.morphTargetInfluences[y.currentFrame]=O}}},(Wf.prototype=Object.create(Or.prototype)).constructor=Wf,Wf.prototype.isImmediateRenderObject=!0,(ug.prototype=Object.create($o.prototype)).constructor=ug,ug.prototype.update=function(){var a=new an,d=new an,g=new Pt;return function(){var x=["a","b","c"];this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);var M=this.object.matrixWorld,O=this.geometry.attributes.position,B=this.object.geometry;if(B&&B.isGeometry)for(var ae=B.vertices,re=B.faces,me=0,_e=0,Oe=re.length;_e<Oe;_e++)for(var Fe=re[_e],Ne=0,ut=Fe.vertexNormals.length;Ne<ut;Ne++){var rt=Fe.vertexNormals[Ne];a.copy(ae[Fe[x[Ne]]]).applyMatrix4(M),d.copy(rt).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),O.setXYZ(me,a.x,a.y,a.z),O.setXYZ(me+=1,d.x,d.y,d.z),me+=1}else if(B&&B.isBufferGeometry){var At=B.attributes.position,St=B.attributes.normal;for(me=0,Ne=0,ut=At.count;Ne<ut;Ne++)a.set(At.getX(Ne),At.getY(Ne),At.getZ(Ne)).applyMatrix4(M),d.set(St.getX(Ne),St.getY(Ne),St.getZ(Ne)),d.applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),O.setXYZ(me,a.x,a.y,a.z),O.setXYZ(me+=1,d.x,d.y,d.z),me+=1}return O.needsUpdate=!0,this}}(),(lh.prototype=Object.create(Or.prototype)).constructor=lh,lh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},lh.prototype.update=function(){var a=new an,d=new an;return function(){var y=this.light.distance?this.light.distance:1e3,x=y*Math.tan(this.light.angle);this.cone.scale.set(x,x,y),a.setFromMatrixPosition(this.light.matrixWorld),d.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(d.sub(a)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),(ch.prototype=Object.create($o.prototype)).constructor=ch,ch.prototype.getBoneList=function(a){var d=[];a&&a.isBone&&d.push(a);for(var g=0;g<a.children.length;g++)d.push.apply(d,this.getBoneList(a.children[g]));return d},ch.prototype.update=function(){var a=new an,d=new Vs,g=new Vs;return function(){var x=this.geometry,M=x.getAttribute("position");g.getInverse(this.root.matrixWorld);for(var O=0,B=0;O<this.bones.length;O++){var ae=this.bones[O];ae.parent&&ae.parent.isBone&&(d.multiplyMatrices(g,ae.matrixWorld),a.setFromMatrixPosition(d),M.setXYZ(B,a.x,a.y,a.z),d.multiplyMatrices(g,ae.parent.matrixWorld),a.setFromMatrixPosition(d),M.setXYZ(B+1,a.x,a.y,a.z),B+=2)}x.getAttribute("position").needsUpdate=!0}}(),(Lh.prototype=Object.create(Ya.prototype)).constructor=Lh,Lh.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Lh.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},(gf.prototype=Object.create(Or.prototype)).constructor=gf,gf.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},gf.prototype.update=function(){var a=new an,d=new an;return function(){var y=this.children[0],x=this.children[1];if(this.light.target){a.setFromMatrixPosition(this.light.matrixWorld),d.setFromMatrixPosition(this.light.target.matrixWorld);var M=d.clone().sub(a);y.lookAt(M),x.lookAt(M)}y.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),x.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var O=.5*this.light.width,B=.5*this.light.height,ae=y.geometry.getAttribute("position"),re=ae.array;re[0]=O,re[1]=-B,re[2]=0,re[3]=O,re[4]=B,re[5]=0,re[6]=-O,re[7]=B,re[8]=0,re[9]=-O,re[10]=B,re[11]=0,re[12]=-O,re[13]=-B,re[14]=0,re[15]=O,re[16]=-B,re[17]=0,ae.needsUpdate=!0}}(),(Ph.prototype=Object.create(Or.prototype)).constructor=Ph,Ph.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Ph.prototype.update=function(){var a=new an,d=new ps,g=new ps;return function(){var x=this.children[0],M=x.geometry.getAttribute("color");d.copy(this.light.color).multiplyScalar(this.light.intensity),g.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var O=0,B=M.count;O<B;O++){var ae=O<B/2?d:g;M.setXYZ(O,ae.r,ae.g,ae.b)}x.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()),M.needsUpdate=!0}}(),(dg.prototype=Object.create($o.prototype)).constructor=dg,(gd.prototype=Object.create($o.prototype)).constructor=gd,(uh.prototype=Object.create($o.prototype)).constructor=uh,uh.prototype.update=function(){var a=new an,d=new an,g=new Pt;return function(){this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);for(var x=this.object.matrixWorld,M=this.geometry.attributes.position,O=this.object.geometry,B=O.vertices,ae=O.faces,re=0,me=0,_e=ae.length;me<_e;me++){var Oe=ae[me],Fe=Oe.normal;a.copy(B[Oe.a]).add(B[Oe.b]).add(B[Oe.c]).divideScalar(3).applyMatrix4(x),d.copy(Fe).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),M.setXYZ(re,a.x,a.y,a.z),M.setXYZ(re+=1,d.x,d.y,d.z),re+=1}return M.needsUpdate=!0,this}}(),(hg.prototype=Object.create(Or.prototype)).constructor=hg,hg.prototype.dispose=function(){var a=this.children[0],d=this.children[1];a.geometry.dispose(),a.material.dispose(),d.geometry.dispose(),d.material.dispose()},hg.prototype.update=function(){var a=new an,d=new an,g=new an;return function(){a.setFromMatrixPosition(this.light.matrixWorld),d.setFromMatrixPosition(this.light.target.matrixWorld),g.subVectors(d,a);var x=this.children[0],M=this.children[1];x.lookAt(g),x.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),M.lookAt(g),M.scale.z=g.length()}}(),(om.prototype=Object.create($o.prototype)).constructor=om,om.prototype.update=function(){var a,d,g=new an,y=new gl;function x(M,O,B,ae){g.set(O,B,ae).unproject(y);var re=d[M];if(void 0!==re)for(var me=a.getAttribute("position"),_e=0,Oe=re.length;_e<Oe;_e++)me.setXYZ(re[_e],g.x,g.y,g.z)}return function(){a=this.geometry,d=this.pointMap,y.projectionMatrix.copy(this.camera.projectionMatrix),x("c",0,0,-1),x("t",0,0,1),x("n1",-1,-1,-1),x("n2",1,-1,-1),x("n3",-1,1,-1),x("n4",1,1,-1),x("f1",-1,-1,1),x("f2",1,-1,1),x("f3",-1,1,1),x("f4",1,1,1),x("u1",.7,1.1,-1),x("u2",-.7,1.1,-1),x("u3",0,2,-1),x("cf1",-1,0,1),x("cf2",1,0,1),x("cf3",0,-1,1),x("cf4",0,1,1),x("cn1",-1,0,-1),x("cn2",1,0,-1),x("cn3",0,-1,-1),x("cn4",0,1,-1),a.getAttribute("position").needsUpdate=!0}}(),(fg.prototype=Object.create($o.prototype)).constructor=fg,fg.prototype.update=function(){var a=new Zs;return function(g){if(g&&g.isBox3?a.copy(g):a.setFromObject(g),!a.isEmpty()){var y=a.min,x=a.max,M=this.geometry.attributes.position,O=M.array;O[0]=x.x,O[1]=x.y,O[2]=x.z,O[3]=y.x,O[4]=x.y,O[5]=x.z,O[6]=y.x,O[7]=y.y,O[8]=x.z,O[9]=x.x,O[10]=y.y,O[11]=x.z,O[12]=x.x,O[13]=x.y,O[14]=y.z,O[15]=y.x,O[16]=x.y,O[17]=y.z,O[18]=y.x,O[19]=y.y,O[20]=y.z,O[21]=x.x,O[22]=y.y,O[23]=y.z,M.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var pg=new Wr;pg.addAttribute("position",new Ms([0,0,0,0,1,0],3));var Fv=new Bf(0,.5,1,5,1);function lu(a,d,g,y,x,M){Or.call(this),void 0===y&&(y=16776960),void 0===g&&(g=1),void 0===x&&(x=.2*g),void 0===M&&(M=.2*x),this.position.copy(d),this.line=new Vu(pg,new kl({color:y})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ya(Fv,new pl({color:y})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(g,x,M)}function jf(a){var d=[0,0,0,a=a||1,0,0,0,0,0,0,a,0,0,0,0,0,0,a],y=new Wr;y.addAttribute("position",new Ms(d,3)),y.addAttribute("color",new Ms([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var x=new kl({vertexColors:N});$o.call(this,y,x)}Fv.translate(0,-.5,0),(lu.prototype=Object.create(Or.prototype)).constructor=lu,lu.prototype.setDirection=function(){var d,a=new an;return function(y){y.y>.99999?this.quaternion.set(0,0,0,1):y.y<-.99999?this.quaternion.set(1,0,0,0):(a.set(y.z,0,-y.x).normalize(),d=Math.acos(y.y),this.quaternion.setFromAxisAngle(a,d))}}(),lu.prototype.setLength=function(a,d,g){void 0===d&&(d=.2*a),void 0===g&&(g=.2*d),this.line.scale.set(1,Math.max(0,a-d),1),this.line.updateMatrix(),this.cone.scale.set(g,d,g),this.cone.position.y=a,this.cone.updateMatrix()},lu.prototype.setColor=function(a){this.line.material.color.copy(a),this.cone.material.color.copy(a)},(jf.prototype=Object.create($o.prototype)).constructor=jf;var jm=function(){var a=new an,d=new x,g=new x,y=new x;function x(){}return x.prototype.init=function(M,O,B,ae){this.c0=M,this.c1=B,this.c2=-3*M+3*O-2*B-ae,this.c3=2*M-2*O+B+ae},x.prototype.initNonuniformCatmullRom=function(M,O,B,ae,re,me,_e){var Oe=(O-M)/re-(B-M)/(re+me)+(B-O)/me,Fe=(B-O)/me-(ae-O)/(me+_e)+(ae-B)/_e;this.init(O,B,Oe*=me,Fe*=me)},x.prototype.initCatmullRom=function(M,O,B,ae,re){this.init(O,B,re*(B-M),re*(ae-O))},x.prototype.calc=function(M){var O=M*M;return this.c0+this.c1*M+this.c2*O+this.c3*(O*M)},hc.create(function(M){this.points=M||[],this.closed=!1},function(M){var B,ae,re,me,_e,Oe,Fe,Ne,O=this.points;if((me=O.length)<2&&console.log("duh, you need at least 2 points"),re=(B=(me-(this.closed?0:1))*M)-(ae=Math.floor(B)),this.closed?ae+=ae>0?0:(Math.floor(Math.abs(ae)/O.length)+1)*O.length:0===re&&ae===me-1&&(ae=me-2,re=1),this.closed||ae>0?_e=O[(ae-1)%me]:(a.subVectors(O[0],O[1]).add(O[0]),_e=a),Oe=O[ae%me],Fe=O[(ae+1)%me],this.closed||ae+2<me?Ne=O[(ae+2)%me]:(a.subVectors(O[me-1],O[me-2]).add(O[me-1]),Ne=a),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var ut="chordal"===this.type?.5:.25,ct=Math.pow(_e.distanceToSquared(Oe),ut),rt=Math.pow(Oe.distanceToSquared(Fe),ut),At=Math.pow(Fe.distanceToSquared(Ne),ut);rt<1e-4&&(rt=1),ct<1e-4&&(ct=rt),At<1e-4&&(At=rt),d.initNonuniformCatmullRom(_e.x,Oe.x,Fe.x,Ne.x,ct,rt,At),g.initNonuniformCatmullRom(_e.y,Oe.y,Fe.y,Ne.y,ct,rt,At),y.initNonuniformCatmullRom(_e.z,Oe.z,Fe.z,Ne.z,ct,rt,At)}else if("catmullrom"===this.type){var St=void 0!==this.tension?this.tension:.5;d.initCatmullRom(_e.x,Oe.x,Fe.x,Ne.x,St),g.initCatmullRom(_e.y,Oe.y,Fe.y,Ne.y,St),y.initCatmullRom(_e.z,Oe.z,Fe.z,Ne.z,St)}return new an(d.calc(re),g.calc(re),y.calc(re))})}(),Hy=hc.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===a?[]:a},function(a){var d=this.points,g=(d.length-1)*a,y=Math.floor(g),x=g-y,M=d[0==y?y:y-1],O=d[y],B=d[y>d.length-2?d.length-1:y+1],ae=d[y>d.length-3?d.length-1:y+2],re=Sc.interpolate;return new an(re(M.x,O.x,B.x,ae.x,x),re(M.y,O.y,B.y,ae.y,x),re(M.z,O.z,B.z,ae.z,x))}),Gy=hc.create(function(a,d,g,y){this.v0=a,this.v1=d,this.v2=g,this.v3=y},function(a){var d=sl.b3;return new an(d(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),d(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),d(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),am=hc.create(function(a,d,g){this.v0=a,this.v1=d,this.v2=g},function(a){var d=sl.b2;return new an(d(a,this.v0.x,this.v1.x,this.v2.x),d(a,this.v0.y,this.v1.y,this.v2.y),d(a,this.v0.z,this.v1.z,this.v2.z))}),mb=hc.create(function(a,d){this.v1=a,this.v2=d},function(a){if(1===a)return this.v2.clone();var d=new an;return d.subVectors(this.v2,this.v1),d.multiplyScalar(a),d.add(this.v1),d});function Ep(a,d,g,y,x,M){Eh.call(this,a,d,g,g,y,x,M)}(Ep.prototype=Object.create(Eh.prototype)).constructor=Ep;var Fl={createMultiMaterialObject:function(a,d){for(var g=new gp,y=0,x=d.length;y<x;y++)g.add(new Ya(a,d[y]));return g},detach:function(a,d,g){a.applyMatrix(d.matrixWorld),d.remove(a),g.add(a)},attach:function(a,d,g){var y=new Vs;y.getInverse(g.matrixWorld),a.applyMatrix(y),d.remove(a),g.add(a)}};function $m(a,d,g,y,x,M,O){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new la(a,d,g,x,M,O)}var $f=0,Nv=1;function vb(a){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new Uu(a)}function Wy(a,d){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new po(a,d)}function jy(a){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new zu(a)}function q_(a,d){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new po(a,d)}function X_(a){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new su(a)}function Y_(a){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new su(a)}function $y(a){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new su(a)}function qm(a,d,g){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new an(a,d,g)}function Bv(a,d){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Tr(a,d).setDynamic(!0)}function $u(a,d){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Qd(a,d)}function K_(a,d){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Hl(a,d)}function za(a,d){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Zh(a,d)}function Ka(a,d){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new pp(a,d)}function zv(a,d){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Qh(a,d)}function dh(a,d){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Lf(a,d)}function Vv(a,d){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new sd(a,d)}function qy(a,d){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ms(a,d)}function Z_(a,d){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new iu(a,d)}function Xm(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),jm.call(this,a),this.type="catmullrom",this.closed=!0}function Xy(a,d){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new fg(a,d)}function Q_(a,d){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new $o(new Wl(a.geometry),new kl({color:void 0!==d?d:16777215}))}function yb(a,d){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new $o(new Rd(a.geometry),new kl({color:void 0!==d?d:16777215}))}function mf(a){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Qo(a)}Xm.prototype=Object.create(jm.prototype),dg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(bh.prototype,{center:function(a){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},size:function(a){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(a)}}),Object.assign(Zs.prototype,{center:function(a){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionSphere:function(a){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)},size:function(a){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(a)}}),lc.prototype.center=function(a){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(a)},js.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(Pt.prototype,{flattenToArrayOffset:function(a,d){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,d)},multiplyVector3:function(a){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToBuffer:function(a,d,g){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),Object.assign(Vs.prototype,{extractPosition:function(a){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(a)},flattenToArrayOffset:function(a,d){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,d)},getPosition:function(){var a;return function(){return void 0===a&&(a=new an),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),a.applyProjection(this)},multiplyVector4:function(a){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),a.transformDirection(this)},crossVector:function(a){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a,d,g){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),bt.prototype.isIntersectionLine=function(a){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(a)},oc.prototype.multiplyVector3=function(a){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)},Object.assign(La.prototype,{isIntersectionBox:function(a){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionPlane:function(a){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(a)},isIntersectionSphere:function(a){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)}}),Object.assign(fd.prototype,{extrude:function(a){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Su(this,a)},makeGeometry:function(a){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new rg(this,a)}}),Object.assign(an.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,d){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(d,a)}}),Qs.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(Or.prototype,{getChildByName:function(a){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,d){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(d,a)}}),Object.defineProperties(Or.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ra.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Kl.prototype.setLens=function(a,d){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==d&&(this.filmGauge=d),this.setFocalLength(a)},Object.defineProperties(So.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=a}}}),Object.defineProperties(Tr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Wr.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(a)},addDrawCall:function(a,d,g){void 0!==g&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(a,d)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Wr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Gm.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(bo.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new ps}}}),Object.defineProperties(Ql.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(xu.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=a}}}),Y.prototype=Object.assign(Object.create({constructor:Y,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(a,this)}}),Y.prototype),Object.assign(nf.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(nf.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=a}}}),Object.defineProperties(Zo.prototype,{cullFace:{get:function(){return this.renderReverseSided?D:j},set:function(a){var d=a!==j;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+d+"."),this.renderReverseSided=d}}}),Object.defineProperties(Zc.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=a}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=a}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=a}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=a}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=a}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=a}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=a}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=a}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=a}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=a}}}),Bd.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var d=this;return(new ag).load(a,function(y){d.setBuffer(y)}),this},Hm.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var lm={merge:function(a,d,g){var y;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),d.isMesh&&(d.matrixAutoUpdate&&d.updateMatrix(),y=d.matrix,d=d.geometry),a.merge(d,y,g)},center:function(a){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),a.center()}},Uv={crossOrigin:void 0,loadTexture:function(a,d,g,y){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var x=new sh;x.setCrossOrigin(this.crossOrigin);var M=x.load(a,g,void 0,y);return d&&(M.mapping=d),M},loadTextureCube:function(a,d,g,y){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var x=new Bm;x.setCrossOrigin(this.crossOrigin);var M=x.load(a,g,void 0,y);return d&&(M.mapping=d),M},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Yy(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(a,d){console.warn("THREE.Projector: .projectVector() is now vector.project()."),a.project(d)},this.unprojectVector=function(a,d){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),a.unproject(d)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Ky(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}},2944:function(Ve,Ae,W){var Y=typeof global<"u"&&global||typeof self<"u"&&self||window,L=Function.prototype.apply;function G(U,j){this._id=U,this._clearFn=j}Ae.setTimeout=function(){return new G(L.call(setTimeout,Y,arguments),clearTimeout)},Ae.setInterval=function(){return new G(L.call(setInterval,Y,arguments),clearInterval)},Ae.clearTimeout=Ae.clearInterval=function(U){U&&U.close()},G.prototype.unref=G.prototype.ref=function(){},G.prototype.close=function(){this._clearFn.call(Y,this._id)},Ae.enroll=function(U,j){clearTimeout(U._idleTimeoutId),U._idleTimeout=j},Ae.unenroll=function(U){clearTimeout(U._idleTimeoutId),U._idleTimeout=-1},Ae._unrefActive=Ae.active=function(U){clearTimeout(U._idleTimeoutId);var j=U._idleTimeout;j>=0&&(U._idleTimeoutId=setTimeout(function(){U._onTimeout&&U._onTimeout()},j))},W(6563),Ae.setImmediate=typeof self<"u"&&self.setImmediate||typeof global<"u"&&global.setImmediate||this&&this.setImmediate,Ae.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof global<"u"&&global.clearImmediate||this&&this.clearImmediate},9699:Ve=>{Ve.exports=/[\0-\x1F\x7F-\x9F]/},9127:Ve=>{Ve.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},6020:Ve=>{Ve.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},5450:Ve=>{Ve.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},9315:(Ve,Ae,W)=>{"use strict";Ae.Any=W(1129),Ae.Cc=W(9699),Ae.Cf=W(9127),Ae.P=W(6020),Ae.Z=W(5450)},1129:Ve=>{Ve.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},3532:Ve=>{function W(Y){try{if(!global.localStorage)return!1}catch{return!1}var L=global.localStorage[Y];return null!=L&&"true"===String(L).toLowerCase()}Ve.exports=function Ae(Y,L){if(W("noDeprecation"))return Y;var G=!1;return function U(){if(!G){if(W("throwDeprecation"))throw new Error(L);W("traceDeprecation")?console.trace(L):console.warn(L),G=!0}return Y.apply(this,arguments)}}},4922:function(Ve,Ae){(function(){"use strict";Ae.stripBOM=function(W){return"\ufeff"===W[0]?W.substring(1):W}}).call(this)},4032:function(Ve,Ae,W){(function(){"use strict";var Y,L,G,U,j,D={}.hasOwnProperty;Y=W(7904),L=W(7067).defaults,U=function(R){return"string"==typeof R&&(R.indexOf("&")>=0||R.indexOf(">")>=0||R.indexOf("<")>=0)},j=function(R){return"<![CDATA["+G(R)+"]]>"},G=function(R){return R.replace("]]>","]]]]><![CDATA[>")},Ae.Builder=function(){function R(q){var ne,te;for(ne in this.options={},te=L[.2])!D.call(te,ne)||(this.options[ne]=te[ne]);for(ne in q)!D.call(q,ne)||(this.options[ne]=q[ne])}return R.prototype.buildObject=function(q){var ne,te,se,ee,K,z;return ne=this.options.attrkey,te=this.options.charkey,1===Object.keys(q).length&&this.options.rootName===L[.2].rootName?q=q[K=Object.keys(q)[0]]:K=this.options.rootName,z=this,se=function(ce,Ce){var Re,ie,oe,N,V;if("object"!=typeof Ce)z.options.cdata&&U(Ce)?ce.raw(j(Ce)):ce.txt(Ce);else if(Array.isArray(Ce)){for(N in Ce)if(D.call(Ce,N))for(V in ie=Ce[N])oe=ie[V],ce=se(ce.ele(V),oe).up()}else for(V in Ce)if(D.call(Ce,V))if(ie=Ce[V],V===ne){if("object"==typeof ie)for(Re in ie)ce=ce.att(Re,ie[Re])}else if(V===te)ce=z.options.cdata&&U(ie)?ce.raw(j(ie)):ce.txt(ie);else if(Array.isArray(ie))for(N in ie)!D.call(ie,N)||(ce="string"==typeof(oe=ie[N])?z.options.cdata&&U(oe)?ce.ele(V).raw(j(oe)).up():ce.ele(V,oe).up():se(ce.ele(V),oe).up());else"object"==typeof ie?ce=se(ce.ele(V),ie).up():"string"==typeof ie&&z.options.cdata&&U(ie)?ce=ce.ele(V).raw(j(ie)).up():(null==ie&&(ie=""),ce=ce.ele(V,ie.toString()).up());return ce},ee=Y.create(K,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),se(ee,q).end(this.options.renderOpts)},R}()}).call(this)},7067:function(Ve,Ae){(function(){Ae.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},2238:function(Ve,Ae,W){(function(){"use strict";var Y,L,G,U,j,D,R,q,ne=function(ee,K){return function(){return ee.apply(K,arguments)}},se={}.hasOwnProperty;R=W(1503),G=W(9069),Y=W(4922),D=W(3749),q=W(2944).setImmediate,L=W(7067).defaults,U=function(ee){return"object"==typeof ee&&null!=ee&&0===Object.keys(ee).length},j=function(ee,K,z){var ce,Ce;for(ce=0,Ce=ee.length;ce<Ce;ce++)K=(0,ee[ce])(K,z);return K},Ae.Parser=function(ee){function K(z){var ce,Ce;if(this.parseStringPromise=ne(this.parseStringPromise,this),this.parseString=ne(this.parseString,this),this.reset=ne(this.reset,this),this.assignOrPush=ne(this.assignOrPush,this),this.processAsync=ne(this.processAsync,this),!(this instanceof Ae.Parser))return new Ae.Parser(z);for(ce in this.options={},Ce=L[.2])!se.call(Ce,ce)||(this.options[ce]=Ce[ce]);for(ce in z)!se.call(z,ce)||(this.options[ce]=z[ce]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(D.normalize)),this.reset()}return function(ee,K){for(var z in K)se.call(K,z)&&(ee[z]=K[z]);function ce(){this.constructor=ee}ce.prototype=K.prototype,ee.prototype=new ce,ee.__super__=K.prototype}(K,ee),K.prototype.processAsync=function(){var z,ce;try{return this.remaining.length<=this.options.chunkSize?(z=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(z),this.saxParser.close()):(z=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(z),q(this.processAsync))}catch(Ce){if(ce=Ce,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(ce)}},K.prototype.assignOrPush=function(z,ce,Ce){return ce in z?(z[ce]instanceof Array||(z[ce]=[z[ce]]),z[ce].push(Ce)):z[ce]=this.options.explicitArray?[Ce]:Ce},K.prototype.reset=function(){var z,ce,Ce,Re,ie;return this.removeAllListeners(),this.saxParser=R.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(ie=this,function(oe){if(ie.saxParser.resume(),!ie.saxParser.errThrown)return ie.saxParser.errThrown=!0,ie.emit("error",oe)}),this.saxParser.onend=function(ie){return function(){if(!ie.saxParser.ended)return ie.saxParser.ended=!0,ie.emit("end",ie.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,Re=[],z=this.options.attrkey,ce=this.options.charkey,this.saxParser.onopentag=function(ie){return function(oe){var N,V,J,fe,ke;if((J={})[ce]="",!ie.options.ignoreAttrs)for(N in ke=oe.attributes)!se.call(ke,N)||(!(z in J)&&!ie.options.mergeAttrs&&(J[z]={}),V=ie.options.attrValueProcessors?j(ie.options.attrValueProcessors,oe.attributes[N],N):oe.attributes[N],fe=ie.options.attrNameProcessors?j(ie.options.attrNameProcessors,N):N,ie.options.mergeAttrs?ie.assignOrPush(J,fe,V):J[z][fe]=V);return J["#name"]=ie.options.tagNameProcessors?j(ie.options.tagNameProcessors,oe.name):oe.name,ie.options.xmlns&&(J[ie.options.xmlnskey]={uri:oe.uri,local:oe.local}),Re.push(J)}}(this),this.saxParser.onclosetag=function(ie){return function(){var oe,N,V,J,fe,ke,Pe,nt,Le,at;if(ke=Re.pop(),fe=ke["#name"],(!ie.options.explicitChildren||!ie.options.preserveChildrenOrder)&&delete ke["#name"],!0===ke.cdata&&(oe=ke.cdata,delete ke.cdata),Le=Re[Re.length-1],ke[ce].match(/^\s*$/)&&!oe?(N=ke[ce],delete ke[ce]):(ie.options.trim&&(ke[ce]=ke[ce].trim()),ie.options.normalize&&(ke[ce]=ke[ce].replace(/\s{2,}/g," ").trim()),ke[ce]=ie.options.valueProcessors?j(ie.options.valueProcessors,ke[ce],fe):ke[ce],1===Object.keys(ke).length&&ce in ke&&!ie.EXPLICIT_CHARKEY&&(ke=ke[ce])),U(ke)&&(ke=""!==ie.options.emptyTag?ie.options.emptyTag:N),null!=ie.options.validator&&(at="/"+function(){var It,Ge,yt;for(yt=[],It=0,Ge=Re.length;It<Ge;It++)yt.push((J=Re[It])["#name"]);return yt}().concat(fe).join("/"),function(){try{ke=ie.options.validator(at,Le&&Le[fe],ke)}catch(Ge){return ie.emit("error",Ge)}}()),ie.options.explicitChildren&&!ie.options.mergeAttrs&&"object"==typeof ke)if(ie.options.preserveChildrenOrder){if(Le){for(V in Le[ie.options.childkey]=Le[ie.options.childkey]||[],Pe={},ke)!se.call(ke,V)||(Pe[V]=ke[V]);Le[ie.options.childkey].push(Pe),delete ke["#name"],1===Object.keys(ke).length&&ce in ke&&!ie.EXPLICIT_CHARKEY&&(ke=ke[ce])}}else J={},ie.options.attrkey in ke&&(J[ie.options.attrkey]=ke[ie.options.attrkey],delete ke[ie.options.attrkey]),!ie.options.charsAsChildren&&ie.options.charkey in ke&&(J[ie.options.charkey]=ke[ie.options.charkey],delete ke[ie.options.charkey]),Object.getOwnPropertyNames(ke).length>0&&(J[ie.options.childkey]=ke),ke=J;return Re.length>0?ie.assignOrPush(Le,fe,ke):(ie.options.explicitRoot&&(nt=ke,(ke={})[fe]=nt),ie.resultObject=ke,ie.saxParser.ended=!0,ie.emit("end",ie.resultObject))}}(this),Ce=function(ie){return function(oe){var N,V;if(V=Re[Re.length-1])return V[ce]+=oe,ie.options.explicitChildren&&ie.options.preserveChildrenOrder&&ie.options.charsAsChildren&&(ie.options.includeWhiteChars||""!==oe.replace(/\\n/g,"").trim())&&(V[ie.options.childkey]=V[ie.options.childkey]||[],(N={"#name":"__text__"})[ce]=oe,ie.options.normalize&&(N[ce]=N[ce].replace(/\s{2,}/g," ").trim()),V[ie.options.childkey].push(N)),V}}(this),this.saxParser.ontext=Ce,this.saxParser.oncdata=function(oe){var N;if(N=Ce(oe))return N.cdata=!0}},K.prototype.parseString=function(z,ce){var Ce;null!=ce&&"function"==typeof ce&&(this.on("end",function(Re){return this.reset(),ce(null,Re)}),this.on("error",function(Re){return this.reset(),ce(Re)}));try{return""===(z=z.toString()).trim()?(this.emit("end",null),!0):(z=Y.stripBOM(z),this.options.async?(this.remaining=z,q(this.processAsync),this.saxParser):this.saxParser.write(z).close())}catch(Re){if(Ce=Re,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",Ce),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw Ce}},K.prototype.parseStringPromise=function(z){return new Promise((ce=this,function(Ce,Re){return ce.parseString(z,function(ie,oe){return ie?Re(ie):Ce(oe)})}));var ce},K}(G),Ae.parseString=function(ee,K,z){var ce,Ce;return null!=z?("function"==typeof z&&(ce=z),"object"==typeof K&&(Ce=K)):("function"==typeof K&&(ce=K),Ce={}),new Ae.Parser(Ce).parseString(ee,ce)},Ae.parseStringPromise=function(ee,K){var z;return"object"==typeof K&&(z=K),new Ae.Parser(z).parseStringPromise(ee)}}).call(this)},3749:function(Ve,Ae){(function(){"use strict";var W;W=new RegExp(/(?!xmlns)^.*:/),Ae.normalize=function(Y){return Y.toLowerCase()},Ae.firstCharLowerCase=function(Y){return Y.charAt(0).toLowerCase()+Y.slice(1)},Ae.stripPrefix=function(Y){return Y.replace(W,"")},Ae.parseNumbers=function(Y){return isNaN(Y)||(Y=Y%1==0?parseInt(Y,10):parseFloat(Y)),Y},Ae.parseBooleans=function(Y){return/^(?:true|false)$/i.test(Y)&&(Y="true"===Y.toLowerCase()),Y}}).call(this)},5452:function(Ve,Ae,W){(function(){"use strict";var Y,L,G,U,D={}.hasOwnProperty;L=W(7067),Y=W(4032),G=W(2238),U=W(3749),Ae.defaults=L.defaults,Ae.processors=U,Ae.ValidationError=function(R){function q(ne){this.message=ne}return function(R,q){for(var ne in q)D.call(q,ne)&&(R[ne]=q[ne]);function te(){this.constructor=R}te.prototype=q.prototype,R.prototype=new te,R.__super__=q.prototype}(q,Error),q}(),Ae.Builder=Y.Builder,Ae.Parser=G.Parser,Ae.parseString=G.parseString,Ae.parseStringPromise=G.parseStringPromise}).call(this)},599:function(Ve){(function(){Ve.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},2269:function(Ve){(function(){Ve.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},3452:function(Ve){(function(){var Ae,W,Y,L,G,U,j,D=[].slice,R={}.hasOwnProperty;Ae=function(){var q,ne,te,se,ee,K;if(K=arguments[0],ee=2<=arguments.length?D.call(arguments,1):[],G(Object.assign))Object.assign.apply(null,arguments);else for(q=0,te=ee.length;q<te;q++)if(null!=(se=ee[q]))for(ne in se)!R.call(se,ne)||(K[ne]=se[ne]);return K},G=function(q){return!!q&&"[object Function]"===Object.prototype.toString.call(q)},U=function(q){var ne;return!!q&&("function"==(ne=typeof q)||"object"===ne)},Y=function(q){return G(Array.isArray)?Array.isArray(q):"[object Array]"===Object.prototype.toString.call(q)},L=function(q){var ne;if(Y(q))return!q.length;for(ne in q)if(R.call(q,ne))return!1;return!0},j=function(q){var ne,te;return U(q)&&(te=Object.getPrototypeOf(q))&&(ne=te.constructor)&&"function"==typeof ne&&ne instanceof ne&&Function.prototype.toString.call(ne)===Function.prototype.toString.call(Object)},W=function(q){return G(q.valueOf)?q.valueOf():q},Ve.exports.assign=Ae,Ve.exports.isFunction=G,Ve.exports.isObject=U,Ve.exports.isArray=Y,Ve.exports.isEmpty=L,Ve.exports.isPlainObject=j,Ve.exports.getValue=W}).call(this)},6316:function(Ve){(function(){Ve.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},5968:function(Ve,Ae,W){(function(){var Y;Y=W(2269),W(8563),Ve.exports=function(){function U(j,D,R){if(this.parent=j,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==D)throw new Error("Missing attribute name. "+this.debugInfo(D));this.name=this.stringify.name(D),this.value=this.stringify.attValue(R),this.type=Y.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(U.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(U.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(U.prototype,"textContent",{get:function(){return this.value},set:function(j){return this.value=j||""}}),Object.defineProperty(U.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(U.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(U.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(U.prototype,"specified",{get:function(){return!0}}),U.prototype.clone=function(){return Object.create(this)},U.prototype.toString=function(j){return this.options.writer.attribute(this,this.options.writer.filterOptions(j))},U.prototype.debugInfo=function(j){return null==(j=j||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+j+"}, parent: <"+this.parent.name+">"},U.prototype.isEqualNode=function(j){return!(j.namespaceURI!==this.namespaceURI||j.prefix!==this.prefix||j.localName!==this.localName||j.value!==this.value)},U}()}).call(this)},1361:function(Ve,Ae,W){(function(){var Y,G,j={}.hasOwnProperty;Y=W(2269),G=W(2182),Ve.exports=function(D){function R(q,ne){if(R.__super__.constructor.call(this,q),null==ne)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=Y.CData,this.value=this.stringify.cdata(ne)}return function(D,R){for(var q in R)j.call(R,q)&&(D[q]=R[q]);function ne(){this.constructor=D}ne.prototype=R.prototype,D.prototype=new ne,D.__super__=R.prototype}(R,D),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(q){return this.options.writer.cdata(this,this.options.writer.filterOptions(q))},R}(G)}).call(this)},2182:function(Ve,Ae,W){(function(){var L,U={}.hasOwnProperty;L=W(8563),Ve.exports=function(j){function D(R){D.__super__.constructor.call(this,R),this.value=""}return function(j,D){for(var R in D)U.call(D,R)&&(j[R]=D[R]);function q(){this.constructor=j}q.prototype=D.prototype,j.prototype=new q,j.__super__=D.prototype}(D,j),Object.defineProperty(D.prototype,"data",{get:function(){return this.value},set:function(R){return this.value=R||""}}),Object.defineProperty(D.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(D.prototype,"textContent",{get:function(){return this.value},set:function(R){return this.value=R||""}}),D.prototype.clone=function(){return Object.create(this)},D.prototype.substringData=function(R,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},D.prototype.appendData=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},D.prototype.insertData=function(R,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},D.prototype.deleteData=function(R,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},D.prototype.replaceData=function(R,q,ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},D.prototype.isEqualNode=function(R){return!(!D.__super__.isEqualNode.apply(this,arguments).isEqualNode(R)||R.data!==this.data)},D}(L)}).call(this)},2516:function(Ve,Ae,W){(function(){var Y,L,j={}.hasOwnProperty;Y=W(2269),L=W(2182),Ve.exports=function(D){function R(q,ne){if(R.__super__.constructor.call(this,q),null==ne)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=Y.Comment,this.value=this.stringify.comment(ne)}return function(D,R){for(var q in R)j.call(R,q)&&(D[q]=R[q]);function ne(){this.constructor=D}ne.prototype=R.prototype,D.prototype=new ne,D.__super__=R.prototype}(R,D),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(q){return this.options.writer.comment(this,this.options.writer.filterOptions(q))},R}(L)}).call(this)},5806:function(Ve,Ae,W){(function(){var L,G;L=W(9276),G=W(3735),Ve.exports=function(){function U(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new L,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(U.prototype,"parameterNames",{get:function(){return new G(Object.keys(this.defaultParams))}}),U.prototype.getParameter=function(j){return this.params.hasOwnProperty(j)?this.params[j]:null},U.prototype.canSetParameter=function(j,D){return!0},U.prototype.setParameter=function(j,D){return null!=D?this.params[j]=D:delete this.params[j]},U}()}).call(this)},9276:function(Ve){(function(){Ve.exports=function(){function W(){}return W.prototype.handleError=function(Y){throw new Error(Y)},W}()}).call(this)},9906:function(Ve){(function(){Ve.exports=function(){function W(){}return W.prototype.hasFeature=function(Y,L){return!0},W.prototype.createDocumentType=function(Y,L,G){throw new Error("This DOM method is not implemented.")},W.prototype.createDocument=function(Y,L,G){throw new Error("This DOM method is not implemented.")},W.prototype.createHTMLDocument=function(Y){throw new Error("This DOM method is not implemented.")},W.prototype.getFeature=function(Y,L){throw new Error("This DOM method is not implemented.")},W}()}).call(this)},3735:function(Ve){(function(){Ve.exports=function(){function W(Y){this.arr=Y||[]}return Object.defineProperty(W.prototype,"length",{get:function(){return this.arr.length}}),W.prototype.item=function(Y){return this.arr[Y]||null},W.prototype.contains=function(Y){return-1!==this.arr.indexOf(Y)},W}()}).call(this)},7274:function(Ve,Ae,W){(function(){var Y,G,j={}.hasOwnProperty;G=W(8563),Y=W(2269),Ve.exports=function(D){function R(q,ne,te,se,ee,K){if(R.__super__.constructor.call(this,q),null==ne)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==te)throw new Error("Missing DTD attribute name. "+this.debugInfo(ne));if(!se)throw new Error("Missing DTD attribute type. "+this.debugInfo(ne));if(!ee)throw new Error("Missing DTD attribute default. "+this.debugInfo(ne));if(0!==ee.indexOf("#")&&(ee="#"+ee),!ee.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(ne));if(K&&!ee.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(ne));this.elementName=this.stringify.name(ne),this.type=Y.AttributeDeclaration,this.attributeName=this.stringify.name(te),this.attributeType=this.stringify.dtdAttType(se),K&&(this.defaultValue=this.stringify.dtdAttDefault(K)),this.defaultValueType=ee}return function(D,R){for(var q in R)j.call(R,q)&&(D[q]=R[q]);function ne(){this.constructor=D}ne.prototype=R.prototype,D.prototype=new ne,D.__super__=R.prototype}(R,D),R.prototype.toString=function(q){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(q))},R}(G)}).call(this)},2068:function(Ve,Ae,W){(function(){var Y,G,j={}.hasOwnProperty;G=W(8563),Y=W(2269),Ve.exports=function(D){function R(q,ne,te){if(R.__super__.constructor.call(this,q),null==ne)throw new Error("Missing DTD element name. "+this.debugInfo());te||(te="(#PCDATA)"),Array.isArray(te)&&(te="("+te.join(",")+")"),this.name=this.stringify.name(ne),this.type=Y.ElementDeclaration,this.value=this.stringify.dtdElementValue(te)}return function(D,R){for(var q in R)j.call(R,q)&&(D[q]=R[q]);function ne(){this.constructor=D}ne.prototype=R.prototype,D.prototype=new ne,D.__super__=R.prototype}(R,D),R.prototype.toString=function(q){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(q))},R}(G)}).call(this)},8349:function(Ve,Ae,W){(function(){var Y,G,U,D={}.hasOwnProperty;U=W(3452).isObject,G=W(8563),Y=W(2269),Ve.exports=function(R){function q(ne,te,se,ee){if(q.__super__.constructor.call(this,ne),null==se)throw new Error("Missing DTD entity name. "+this.debugInfo(se));if(null==ee)throw new Error("Missing DTD entity value. "+this.debugInfo(se));if(this.pe=!!te,this.name=this.stringify.name(se),this.type=Y.EntityDeclaration,U(ee)){if(!ee.pubID&&!ee.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(se));if(ee.pubID&&!ee.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(se));if(this.internal=!1,null!=ee.pubID&&(this.pubID=this.stringify.dtdPubID(ee.pubID)),null!=ee.sysID&&(this.sysID=this.stringify.dtdSysID(ee.sysID)),null!=ee.nData&&(this.nData=this.stringify.dtdNData(ee.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(se))}else this.value=this.stringify.dtdEntityValue(ee),this.internal=!0}return function(R,q){for(var ne in q)D.call(q,ne)&&(R[ne]=q[ne]);function te(){this.constructor=R}te.prototype=q.prototype,R.prototype=new te,R.__super__=q.prototype}(q,R),Object.defineProperty(q.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(q.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(q.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(q.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlVersion",{get:function(){return null}}),q.prototype.toString=function(ne){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(ne))},q}(G)}).call(this)},3087:function(Ve,Ae,W){(function(){var Y,G,j={}.hasOwnProperty;G=W(8563),Y=W(2269),Ve.exports=function(D){function R(q,ne,te){if(R.__super__.constructor.call(this,q),null==ne)throw new Error("Missing DTD notation name. "+this.debugInfo(ne));if(!te.pubID&&!te.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(ne));this.name=this.stringify.name(ne),this.type=Y.NotationDeclaration,null!=te.pubID&&(this.pubID=this.stringify.dtdPubID(te.pubID)),null!=te.sysID&&(this.sysID=this.stringify.dtdSysID(te.sysID))}return function(D,R){for(var q in R)j.call(R,q)&&(D[q]=R[q]);function ne(){this.constructor=D}ne.prototype=R.prototype,D.prototype=new ne,D.__super__=R.prototype}(R,D),Object.defineProperty(R.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(R.prototype,"systemId",{get:function(){return this.sysID}}),R.prototype.toString=function(q){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(q))},R}(G)}).call(this)},4789:function(Ve,Ae,W){(function(){var Y,G,U,D={}.hasOwnProperty;U=W(3452).isObject,G=W(8563),Y=W(2269),Ve.exports=function(R){function q(ne,te,se,ee){var K;q.__super__.constructor.call(this,ne),U(te)&&(te=(K=te).version,se=K.encoding,ee=K.standalone),te||(te="1.0"),this.type=Y.Declaration,this.version=this.stringify.xmlVersion(te),null!=se&&(this.encoding=this.stringify.xmlEncoding(se)),null!=ee&&(this.standalone=this.stringify.xmlStandalone(ee))}return function(R,q){for(var ne in q)D.call(q,ne)&&(R[ne]=q[ne]);function te(){this.constructor=R}te.prototype=q.prototype,R.prototype=new te,R.__super__=q.prototype}(q,R),q.prototype.toString=function(ne){return this.options.writer.declaration(this,this.options.writer.filterOptions(ne))},q}(G)}).call(this)},9195:function(Ve,Ae,W){(function(){var Y,L,G,U,j,R,q,ne,se={}.hasOwnProperty;ne=W(3452).isObject,q=W(8563),Y=W(2269),L=W(7274),U=W(8349),G=W(2068),j=W(3087),R=W(5264),Ve.exports=function(ee){function K(z,ce,Ce){var Re,ie,oe,N,V,J;if(K.__super__.constructor.call(this,z),this.type=Y.DocType,z.children)for(ie=0,oe=(N=z.children).length;ie<oe;ie++)if((Re=N[ie]).type===Y.Element){this.name=Re.name;break}this.documentObject=z,ne(ce)&&(ce=(V=ce).pubID,Ce=V.sysID),null==Ce&&(Ce=(J=[ce,Ce])[0],ce=J[1]),null!=ce&&(this.pubID=this.stringify.dtdPubID(ce)),null!=Ce&&(this.sysID=this.stringify.dtdSysID(Ce))}return function(ee,K){for(var z in K)se.call(K,z)&&(ee[z]=K[z]);function ce(){this.constructor=ee}ce.prototype=K.prototype,ee.prototype=new ce,ee.__super__=K.prototype}(K,ee),Object.defineProperty(K.prototype,"entities",{get:function(){var z,ce,Ce,Re,ie;for(Re={},ce=0,Ce=(ie=this.children).length;ce<Ce;ce++)(z=ie[ce]).type===Y.EntityDeclaration&&!z.pe&&(Re[z.name]=z);return new R(Re)}}),Object.defineProperty(K.prototype,"notations",{get:function(){var z,ce,Ce,Re,ie;for(Re={},ce=0,Ce=(ie=this.children).length;ce<Ce;ce++)(z=ie[ce]).type===Y.NotationDeclaration&&(Re[z.name]=z);return new R(Re)}}),Object.defineProperty(K.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(K.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(K.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),K.prototype.element=function(z,ce){var Ce;return Ce=new G(this,z,ce),this.children.push(Ce),this},K.prototype.attList=function(z,ce,Ce,Re,ie){var oe;return oe=new L(this,z,ce,Ce,Re,ie),this.children.push(oe),this},K.prototype.entity=function(z,ce){var Ce;return Ce=new U(this,!1,z,ce),this.children.push(Ce),this},K.prototype.pEntity=function(z,ce){var Ce;return Ce=new U(this,!0,z,ce),this.children.push(Ce),this},K.prototype.notation=function(z,ce){var Ce;return Ce=new j(this,z,ce),this.children.push(Ce),this},K.prototype.toString=function(z){return this.options.writer.docType(this,this.options.writer.filterOptions(z))},K.prototype.ele=function(z,ce){return this.element(z,ce)},K.prototype.att=function(z,ce,Ce,Re,ie){return this.attList(z,ce,Ce,Re,ie)},K.prototype.ent=function(z,ce){return this.entity(z,ce)},K.prototype.pent=function(z,ce){return this.pEntity(z,ce)},K.prototype.not=function(z,ce){return this.notation(z,ce)},K.prototype.up=function(){return this.root()||this.documentObject},K.prototype.isEqualNode=function(z){return!(!K.__super__.isEqualNode.apply(this,arguments).isEqualNode(z)||z.name!==this.name||z.publicId!==this.publicId||z.systemId!==this.systemId)},K}(q)}).call(this)},519:function(Ve,Ae,W){(function(){var Y,L,G,j,D,R,q,te={}.hasOwnProperty;q=W(3452).isPlainObject,G=W(9906),L=W(5806),j=W(8563),Y=W(2269),R=W(5041),D=W(4354),Ve.exports=function(se){function ee(K){ee.__super__.constructor.call(this,null),this.name="#document",this.type=Y.Document,this.documentURI=null,this.domConfig=new L,K||(K={}),K.writer||(K.writer=new D),this.options=K,this.stringify=new R(K)}return function(se,ee){for(var K in ee)te.call(ee,K)&&(se[K]=ee[K]);function z(){this.constructor=se}z.prototype=ee.prototype,se.prototype=new z,se.__super__=ee.prototype}(ee,se),Object.defineProperty(ee.prototype,"implementation",{value:new G}),Object.defineProperty(ee.prototype,"doctype",{get:function(){var K,z,ce,Ce;for(z=0,ce=(Ce=this.children).length;z<ce;z++)if((K=Ce[z]).type===Y.DocType)return K;return null}}),Object.defineProperty(ee.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(ee.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(ee.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(ee.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===Y.Declaration?this.children[0].encoding:null}}),Object.defineProperty(ee.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===Y.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(ee.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===Y.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(ee.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(ee.prototype,"origin",{get:function(){return null}}),Object.defineProperty(ee.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(ee.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(ee.prototype,"contentType",{get:function(){return null}}),ee.prototype.end=function(K){var z;return z={},K?q(K)&&(z=K,K=this.options.writer):K=this.options.writer,K.document(this,K.filterOptions(z))},ee.prototype.toString=function(K){return this.options.writer.document(this,this.options.writer.filterOptions(K))},ee.prototype.createElement=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createTextNode=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createComment=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createCDATASection=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createProcessingInstruction=function(K,z){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createAttribute=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createEntityReference=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.getElementsByTagName=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.importNode=function(K,z){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createElementNS=function(K,z){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createAttributeNS=function(K,z){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.getElementsByTagNameNS=function(K,z){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.getElementById=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.adoptNode=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.renameNode=function(K,z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.getElementsByClassName=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createEvent=function(K){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createNodeIterator=function(K,z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee.prototype.createTreeWalker=function(K,z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},ee}(j)}).call(this)},1105:function(Ve,Ae,W){(function(){var Y,L,G,U,j,D,R,q,ne,te,se,ee,z,ce,Ce,Re,ie,oe,N,V,J,fe,ke,Pe={}.hasOwnProperty;ke=W(3452),J=ke.isObject,V=ke.isFunction,fe=ke.isPlainObject,N=ke.getValue,Y=W(2269),ee=W(519),z=W(3352),U=W(1361),j=W(2516),Ce=W(9942),oe=W(474),ce=W(4666),te=W(4789),se=W(9195),D=W(7274),q=W(8349),R=W(2068),ne=W(3087),G=W(5968),ie=W(5041),Re=W(4354),L=W(6316),Ve.exports=function(){function nt(Le,at,It){var Ge;this.name="?xml",this.type=Y.Document,Le||(Le={}),Ge={},Le.writer?fe(Le.writer)&&(Ge=Le.writer,Le.writer=new Re):Le.writer=new Re,this.options=Le,this.writer=Le.writer,this.writerOptions=this.writer.filterOptions(Ge),this.stringify=new ie(Le),this.onDataCallback=at||function(){},this.onEndCallback=It||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return nt.prototype.createChildNode=function(Le){var It,Ge,yt,mt,_t,Fn,Ot;switch(Le.type){case Y.CData:this.cdata(Le.value);break;case Y.Comment:this.comment(Le.value);break;case Y.Element:for(It in Ge={},Fn=Le.attribs)!Pe.call(Fn,It)||(Ge[It]=Fn[It].value);this.node(Le.name,Ge);break;case Y.Dummy:this.dummy();break;case Y.Raw:this.raw(Le.value);break;case Y.Text:this.text(Le.value);break;case Y.ProcessingInstruction:this.instruction(Le.target,Le.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+Le.constructor.name)}for(mt=0,_t=(Ot=Le.children).length;mt<_t;mt++)this.createChildNode(yt=Ot[mt]),yt.type===Y.Element&&this.up();return this},nt.prototype.dummy=function(){return this},nt.prototype.node=function(Le,at,It){var Ge;if(null==Le)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(Le));return this.openCurrent(),Le=N(Le),null==at&&(at={}),at=N(at),J(at)||(It=(Ge=[at,It])[0],at=Ge[1]),this.currentNode=new z(this,Le,at),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=It&&this.text(It),this},nt.prototype.element=function(Le,at,It){var Ge,yt,mt,_t,Fn,Ot;if(this.currentNode&&this.currentNode.type===Y.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(Le)||J(Le)||V(Le))for(_t=this.options.noValidation,this.options.noValidation=!0,(Ot=new ee(this.options).element("TEMP_ROOT")).element(Le),this.options.noValidation=_t,yt=0,mt=(Fn=Ot.children).length;yt<mt;yt++)this.createChildNode(Ge=Fn[yt]),Ge.type===Y.Element&&this.up();else this.node(Le,at,It);return this},nt.prototype.attribute=function(Le,at){var It;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(Le));if(null!=Le&&(Le=N(Le)),J(Le))for(It in Le)!Pe.call(Le,It)||this.attribute(It,Le[It]);else V(at)&&(at=at.apply()),this.options.keepNullAttributes&&null==at?this.currentNode.attribs[Le]=new G(this,Le,""):null!=at&&(this.currentNode.attribs[Le]=new G(this,Le,at));return this},nt.prototype.text=function(Le){var at;return this.openCurrent(),at=new oe(this,Le),this.onData(this.writer.text(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.cdata=function(Le){var at;return this.openCurrent(),at=new U(this,Le),this.onData(this.writer.cdata(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.comment=function(Le){var at;return this.openCurrent(),at=new j(this,Le),this.onData(this.writer.comment(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.raw=function(Le){var at;return this.openCurrent(),at=new Ce(this,Le),this.onData(this.writer.raw(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.instruction=function(Le,at){var It,Ge,mt,_t;if(this.openCurrent(),null!=Le&&(Le=N(Le)),null!=at&&(at=N(at)),Array.isArray(Le))for(It=0,mt=Le.length;It<mt;It++)this.instruction(Ge=Le[It]);else if(J(Le))for(Ge in Le)!Pe.call(Le,Ge)||this.instruction(Ge,Le[Ge]);else V(at)&&(at=at.apply()),_t=new ce(this,Le,at),this.onData(this.writer.processingInstruction(_t,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},nt.prototype.declaration=function(Le,at,It){var Ge;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return Ge=new te(this,Le,at,It),this.onData(this.writer.declaration(Ge,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.doctype=function(Le,at,It){if(this.openCurrent(),null==Le)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new se(this,at,It),this.currentNode.rootNodeName=Le,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},nt.prototype.dtdElement=function(Le,at){var It;return this.openCurrent(),It=new R(this,Le,at),this.onData(this.writer.dtdElement(It,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.attList=function(Le,at,It,Ge,yt){var mt;return this.openCurrent(),mt=new D(this,Le,at,It,Ge,yt),this.onData(this.writer.dtdAttList(mt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.entity=function(Le,at){var It;return this.openCurrent(),It=new q(this,!1,Le,at),this.onData(this.writer.dtdEntity(It,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.pEntity=function(Le,at){var It;return this.openCurrent(),It=new q(this,!0,Le,at),this.onData(this.writer.dtdEntity(It,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.notation=function(Le,at){var It;return this.openCurrent(),It=new ne(this,Le,at),this.onData(this.writer.dtdNotation(It,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},nt.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},nt.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},nt.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},nt.prototype.openNode=function(Le){var It,Ge,yt;if(!Le.isOpen){if(!this.root&&0===this.currentLevel&&Le.type===Y.Element&&(this.root=Le),It="",Le.type===Y.Element){for(Ge in this.writerOptions.state=L.OpenTag,It=this.writer.indent(Le,this.writerOptions,this.currentLevel)+"<"+Le.name,yt=Le.attribs)!Pe.call(yt,Ge)||(It+=this.writer.attribute(yt[Ge],this.writerOptions,this.currentLevel));It+=(Le.children?">":"/>")+this.writer.endline(Le,this.writerOptions,this.currentLevel),this.writerOptions.state=L.InsideTag}else this.writerOptions.state=L.OpenTag,It=this.writer.indent(Le,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+Le.rootNodeName,Le.pubID&&Le.sysID?It+=' PUBLIC "'+Le.pubID+'" "'+Le.sysID+'"':Le.sysID&&(It+=' SYSTEM "'+Le.sysID+'"'),Le.children?(It+=" [",this.writerOptions.state=L.InsideTag):(this.writerOptions.state=L.CloseTag,It+=">"),It+=this.writer.endline(Le,this.writerOptions,this.currentLevel);return this.onData(It,this.currentLevel),Le.isOpen=!0}},nt.prototype.closeNode=function(Le){var at;if(!Le.isClosed)return"",this.writerOptions.state=L.CloseTag,at=Le.type===Y.Element?this.writer.indent(Le,this.writerOptions,this.currentLevel)+"</"+Le.name+">"+this.writer.endline(Le,this.writerOptions,this.currentLevel):this.writer.indent(Le,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(Le,this.writerOptions,this.currentLevel),this.writerOptions.state=L.None,this.onData(at,this.currentLevel),Le.isClosed=!0},nt.prototype.onData=function(Le,at){return this.documentStarted=!0,this.onDataCallback(Le,at+1)},nt.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},nt.prototype.debugInfo=function(Le){return null==Le?"":"node: <"+Le+">"},nt.prototype.ele=function(){return this.element.apply(this,arguments)},nt.prototype.nod=function(Le,at,It){return this.node(Le,at,It)},nt.prototype.txt=function(Le){return this.text(Le)},nt.prototype.dat=function(Le){return this.cdata(Le)},nt.prototype.com=function(Le){return this.comment(Le)},nt.prototype.ins=function(Le,at){return this.instruction(Le,at)},nt.prototype.dec=function(Le,at,It){return this.declaration(Le,at,It)},nt.prototype.dtd=function(Le,at,It){return this.doctype(Le,at,It)},nt.prototype.e=function(Le,at,It){return this.element(Le,at,It)},nt.prototype.n=function(Le,at,It){return this.node(Le,at,It)},nt.prototype.t=function(Le){return this.text(Le)},nt.prototype.d=function(Le){return this.cdata(Le)},nt.prototype.c=function(Le){return this.comment(Le)},nt.prototype.r=function(Le){return this.raw(Le)},nt.prototype.i=function(Le,at){return this.instruction(Le,at)},nt.prototype.att=function(){return this.currentNode&&this.currentNode.type===Y.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},nt.prototype.a=function(){return this.currentNode&&this.currentNode.type===Y.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},nt.prototype.ent=function(Le,at){return this.entity(Le,at)},nt.prototype.pent=function(Le,at){return this.pEntity(Le,at)},nt.prototype.not=function(Le,at){return this.notation(Le,at)},nt}()}).call(this)},4173:function(Ve,Ae,W){(function(){var Y,G,j={}.hasOwnProperty;G=W(8563),Y=W(2269),Ve.exports=function(D){function R(q){R.__super__.constructor.call(this,q),this.type=Y.Dummy}return function(D,R){for(var q in R)j.call(R,q)&&(D[q]=R[q]);function ne(){this.constructor=D}ne.prototype=R.prototype,D.prototype=new ne,D.__super__=R.prototype}(R,D),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(q){return""},R}(G)}).call(this)},3352:function(Ve,Ae,W){(function(){var Y,L,U,j,D,R,q,ne,se={}.hasOwnProperty;ne=W(3452),q=ne.isObject,R=ne.isFunction,D=ne.getValue,j=W(8563),Y=W(2269),L=W(5968),U=W(5264),Ve.exports=function(ee){function K(z,ce,Ce){var Re,ie,oe,N;if(K.__super__.constructor.call(this,z),null==ce)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(ce),this.type=Y.Element,this.attribs={},this.schemaTypeInfo=null,null!=Ce&&this.attribute(Ce),z.type===Y.Document&&(this.isRoot=!0,this.documentObject=z,z.rootObject=this,z.children))for(ie=0,oe=(N=z.children).length;ie<oe;ie++)if((Re=N[ie]).type===Y.DocType){Re.name=this.name;break}}return function(ee,K){for(var z in K)se.call(K,z)&&(ee[z]=K[z]);function ce(){this.constructor=ee}ce.prototype=K.prototype,ee.prototype=new ce,ee.__super__=K.prototype}(K,ee),Object.defineProperty(K.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(K.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(K.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(K.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(K.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(K.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(K.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(K.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new U(this.attribs)),this.attributeMap}}),K.prototype.clone=function(){var ce,Ce,Re;for(ce in(Ce=Object.create(this)).isRoot&&(Ce.documentObject=null),Ce.attribs={},Re=this.attribs)!se.call(Re,ce)||(Ce.attribs[ce]=Re[ce].clone());return Ce.children=[],this.children.forEach(function(ie){var oe;return(oe=ie.clone()).parent=Ce,Ce.children.push(oe)}),Ce},K.prototype.attribute=function(z,ce){var Ce;if(null!=z&&(z=D(z)),q(z))for(Ce in z)!se.call(z,Ce)||this.attribute(Ce,z[Ce]);else R(ce)&&(ce=ce.apply()),this.options.keepNullAttributes&&null==ce?this.attribs[z]=new L(this,z,""):null!=ce&&(this.attribs[z]=new L(this,z,ce));return this},K.prototype.removeAttribute=function(z){var Ce,Re;if(null==z)throw new Error("Missing attribute name. "+this.debugInfo());if(z=D(z),Array.isArray(z))for(Ce=0,Re=z.length;Ce<Re;Ce++)delete this.attribs[z[Ce]];else delete this.attribs[z];return this},K.prototype.toString=function(z){return this.options.writer.element(this,this.options.writer.filterOptions(z))},K.prototype.att=function(z,ce){return this.attribute(z,ce)},K.prototype.a=function(z,ce){return this.attribute(z,ce)},K.prototype.getAttribute=function(z){return this.attribs.hasOwnProperty(z)?this.attribs[z].value:null},K.prototype.setAttribute=function(z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.getAttributeNode=function(z){return this.attribs.hasOwnProperty(z)?this.attribs[z]:null},K.prototype.setAttributeNode=function(z){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.removeAttributeNode=function(z){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.getElementsByTagName=function(z){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.getAttributeNS=function(z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.setAttributeNS=function(z,ce,Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.removeAttributeNS=function(z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.getAttributeNodeNS=function(z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.setAttributeNodeNS=function(z){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.getElementsByTagNameNS=function(z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.hasAttribute=function(z){return this.attribs.hasOwnProperty(z)},K.prototype.hasAttributeNS=function(z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.setIdAttribute=function(z,ce){return this.attribs.hasOwnProperty(z)?this.attribs[z].isId:ce},K.prototype.setIdAttributeNS=function(z,ce,Ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.setIdAttributeNode=function(z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.getElementsByTagName=function(z){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.getElementsByTagNameNS=function(z,ce){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.getElementsByClassName=function(z){throw new Error("This DOM method is not implemented."+this.debugInfo())},K.prototype.isEqualNode=function(z){var ce,Ce,Re;if(!K.__super__.isEqualNode.apply(this,arguments).isEqualNode(z)||z.namespaceURI!==this.namespaceURI||z.prefix!==this.prefix||z.localName!==this.localName||z.attribs.length!==this.attribs.length)return!1;for(ce=Ce=0,Re=this.attribs.length-1;0<=Re?Ce<=Re:Ce>=Re;ce=0<=Re?++Ce:--Ce)if(!this.attribs[ce].isEqualNode(z.attribs[ce]))return!1;return!0},K}(j)}).call(this)},5264:function(Ve){(function(){Ve.exports=function(){function W(Y){this.nodes=Y}return Object.defineProperty(W.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),W.prototype.clone=function(){return this.nodes=null},W.prototype.getNamedItem=function(Y){return this.nodes[Y]},W.prototype.setNamedItem=function(Y){var L;return L=this.nodes[Y.nodeName],this.nodes[Y.nodeName]=Y,L||null},W.prototype.removeNamedItem=function(Y){var L;return L=this.nodes[Y],delete this.nodes[Y],L||null},W.prototype.item=function(Y){return this.nodes[Object.keys(this.nodes)[Y]]||null},W.prototype.getNamedItemNS=function(Y,L){throw new Error("This DOM method is not implemented.")},W.prototype.setNamedItemNS=function(Y){throw new Error("This DOM method is not implemented.")},W.prototype.removeNamedItemNS=function(Y,L){throw new Error("This DOM method is not implemented.")},W}()}).call(this)},8563:function(Ve,Ae,W){(function(){var Y,L,G,U,j,D,R,q,se,ee,K,z,ce,Ce,Re,ie,oe,N={}.hasOwnProperty;oe=W(3452),ie=oe.isObject,Re=oe.isFunction,Ce=oe.isEmpty,ce=oe.getValue,q=null,G=null,U=null,j=null,D=null,K=null,z=null,ee=null,R=null,L=null,se=null,Y=null,Ve.exports=function(){function V(J){this.parent=J,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,q||(q=W(3352),G=W(1361),U=W(2516),j=W(4789),D=W(9195),K=W(9942),z=W(474),ee=W(4666),R=W(4173),L=W(2269),se=W(5112),W(5264),Y=W(599))}return Object.defineProperty(V.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(V.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(V.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(V.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(V.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new se(this.children)),this.childNodeList}}),Object.defineProperty(V.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(V.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(V.prototype,"previousSibling",{get:function(){var J;return J=this.parent.children.indexOf(this),this.parent.children[J-1]||null}}),Object.defineProperty(V.prototype,"nextSibling",{get:function(){var J;return J=this.parent.children.indexOf(this),this.parent.children[J+1]||null}}),Object.defineProperty(V.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(V.prototype,"textContent",{get:function(){var J,fe,ke,Pe,nt;if(this.nodeType===L.Element||this.nodeType===L.DocumentFragment){for(nt="",fe=0,ke=(Pe=this.children).length;fe<ke;fe++)(J=Pe[fe]).textContent&&(nt+=J.textContent);return nt}return null},set:function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),V.prototype.setParent=function(J){var ke,Pe,nt,Le;for(this.parent=J,J&&(this.options=J.options,this.stringify=J.stringify),Le=[],ke=0,Pe=(nt=this.children).length;ke<Pe;ke++)Le.push(nt[ke].setParent(this));return Le},V.prototype.element=function(J,fe,ke){var Pe,Le,at,It,Ge,yt,mt,_t,Fn,Ot;if(Ge=null,null===fe&&null==ke&&(fe=(_t=[{},null])[0],ke=_t[1]),null==fe&&(fe={}),fe=ce(fe),ie(fe)||(ke=(Fn=[fe,ke])[0],fe=Fn[1]),null!=J&&(J=ce(J)),Array.isArray(J))for(Le=0,yt=J.length;Le<yt;Le++)Ge=this.element(J[Le]);else if(Re(J))Ge=this.element(J.apply());else if(ie(J)){for(It in J)if(N.call(J,It))if(Re(Ot=J[It])&&(Ot=Ot.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===It.indexOf(this.stringify.convertAttKey))Ge=this.attribute(It.substr(this.stringify.convertAttKey.length),Ot);else if(!this.options.separateArrayItems&&Array.isArray(Ot)&&Ce(Ot))Ge=this.dummy();else if(ie(Ot)&&Ce(Ot))Ge=this.element(It);else if(this.options.keepNullNodes||null!=Ot)if(!this.options.separateArrayItems&&Array.isArray(Ot))for(at=0,mt=Ot.length;at<mt;at++)(Pe={})[It]=Ot[at],Ge=this.element(Pe);else ie(Ot)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===It.indexOf(this.stringify.convertTextKey)?Ge=this.element(Ot):(Ge=this.element(It)).element(Ot):Ge=this.element(It,Ot);else Ge=this.dummy()}else Ge=this.options.keepNullNodes||null!==ke?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===J.indexOf(this.stringify.convertTextKey)?this.text(ke):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===J.indexOf(this.stringify.convertCDataKey)?this.cdata(ke):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===J.indexOf(this.stringify.convertCommentKey)?this.comment(ke):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===J.indexOf(this.stringify.convertRawKey)?this.raw(ke):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===J.indexOf(this.stringify.convertPIKey)?this.instruction(J.substr(this.stringify.convertPIKey.length),ke):this.node(J,fe,ke):this.dummy();if(null==Ge)throw new Error("Could not create any elements with: "+J+". "+this.debugInfo());return Ge},V.prototype.insertBefore=function(J,fe,ke){var Pe,nt,Le,at,It;if(J?.type)return at=fe,(Le=J).setParent(this),at?(nt=children.indexOf(at),It=children.splice(nt),children.push(Le),Array.prototype.push.apply(children,It)):children.push(Le),Le;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(J));return nt=this.parent.children.indexOf(this),It=this.parent.children.splice(nt),Pe=this.parent.element(J,fe,ke),Array.prototype.push.apply(this.parent.children,It),Pe},V.prototype.insertAfter=function(J,fe,ke){var Pe,nt,Le;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(J));return nt=this.parent.children.indexOf(this),Le=this.parent.children.splice(nt+1),Pe=this.parent.element(J,fe,ke),Array.prototype.push.apply(this.parent.children,Le),Pe},V.prototype.remove=function(){var J;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return J=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[J,J-J+1].concat([])),this.parent},V.prototype.node=function(J,fe,ke){var Pe,nt;return null!=J&&(J=ce(J)),fe||(fe={}),fe=ce(fe),ie(fe)||(ke=(nt=[fe,ke])[0],fe=nt[1]),Pe=new q(this,J,fe),null!=ke&&Pe.text(ke),this.children.push(Pe),Pe},V.prototype.text=function(J){var fe;return ie(J)&&this.element(J),fe=new z(this,J),this.children.push(fe),this},V.prototype.cdata=function(J){var fe;return fe=new G(this,J),this.children.push(fe),this},V.prototype.comment=function(J){var fe;return fe=new U(this,J),this.children.push(fe),this},V.prototype.commentBefore=function(J){var ke,Pe;return ke=this.parent.children.indexOf(this),Pe=this.parent.children.splice(ke),this.parent.comment(J),Array.prototype.push.apply(this.parent.children,Pe),this},V.prototype.commentAfter=function(J){var ke,Pe;return ke=this.parent.children.indexOf(this),Pe=this.parent.children.splice(ke+1),this.parent.comment(J),Array.prototype.push.apply(this.parent.children,Pe),this},V.prototype.raw=function(J){var fe;return fe=new K(this,J),this.children.push(fe),this},V.prototype.dummy=function(){return new R(this)},V.prototype.instruction=function(J,fe){var ke,nt,Le,at;if(null!=J&&(J=ce(J)),null!=fe&&(fe=ce(fe)),Array.isArray(J))for(Le=0,at=J.length;Le<at;Le++)this.instruction(ke=J[Le]);else if(ie(J))for(ke in J)!N.call(J,ke)||this.instruction(ke,J[ke]);else Re(fe)&&(fe=fe.apply()),nt=new ee(this,J,fe),this.children.push(nt);return this},V.prototype.instructionBefore=function(J,fe){var Pe,nt;return Pe=this.parent.children.indexOf(this),nt=this.parent.children.splice(Pe),this.parent.instruction(J,fe),Array.prototype.push.apply(this.parent.children,nt),this},V.prototype.instructionAfter=function(J,fe){var Pe,nt;return Pe=this.parent.children.indexOf(this),nt=this.parent.children.splice(Pe+1),this.parent.instruction(J,fe),Array.prototype.push.apply(this.parent.children,nt),this},V.prototype.declaration=function(J,fe,ke){var Pe,nt;return Pe=this.document(),nt=new j(Pe,J,fe,ke),0===Pe.children.length?Pe.children.unshift(nt):Pe.children[0].type===L.Declaration?Pe.children[0]=nt:Pe.children.unshift(nt),Pe.root()||Pe},V.prototype.dtd=function(J,fe){var Pe,nt,Le,at,It,Ge,yt,mt,_t;for(Pe=this.document(),nt=new D(Pe,J,fe),Le=at=0,Ge=(mt=Pe.children).length;at<Ge;Le=++at)if(mt[Le].type===L.DocType)return Pe.children[Le]=nt,nt;for(Le=It=0,yt=(_t=Pe.children).length;It<yt;Le=++It)if(_t[Le].isRoot)return Pe.children.splice(Le,0,nt),nt;return Pe.children.push(nt),nt},V.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},V.prototype.root=function(){var J;for(J=this;J;){if(J.type===L.Document)return J.rootObject;if(J.isRoot)return J;J=J.parent}},V.prototype.document=function(){var J;for(J=this;J;){if(J.type===L.Document)return J;J=J.parent}},V.prototype.end=function(J){return this.document().end(J)},V.prototype.prev=function(){var J;if((J=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[J-1]},V.prototype.next=function(){var J;if(-1===(J=this.parent.children.indexOf(this))||J===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[J+1]},V.prototype.importDocument=function(J){var fe;return(fe=J.root().clone()).parent=this,fe.isRoot=!1,this.children.push(fe),this},V.prototype.debugInfo=function(J){var fe,ke;return null!=(J=J||this.name)||null!=(fe=this.parent)&&fe.name?null==J?"parent: <"+this.parent.name+">":null!=(ke=this.parent)&&ke.name?"node: <"+J+">, parent: <"+this.parent.name+">":"node: <"+J+">":""},V.prototype.ele=function(J,fe,ke){return this.element(J,fe,ke)},V.prototype.nod=function(J,fe,ke){return this.node(J,fe,ke)},V.prototype.txt=function(J){return this.text(J)},V.prototype.dat=function(J){return this.cdata(J)},V.prototype.com=function(J){return this.comment(J)},V.prototype.ins=function(J,fe){return this.instruction(J,fe)},V.prototype.doc=function(){return this.document()},V.prototype.dec=function(J,fe,ke){return this.declaration(J,fe,ke)},V.prototype.e=function(J,fe,ke){return this.element(J,fe,ke)},V.prototype.n=function(J,fe,ke){return this.node(J,fe,ke)},V.prototype.t=function(J){return this.text(J)},V.prototype.d=function(J){return this.cdata(J)},V.prototype.c=function(J){return this.comment(J)},V.prototype.r=function(J){return this.raw(J)},V.prototype.i=function(J,fe){return this.instruction(J,fe)},V.prototype.u=function(){return this.up()},V.prototype.importXMLBuilder=function(J){return this.importDocument(J)},V.prototype.replaceChild=function(J,fe){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.removeChild=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.appendChild=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.hasChildNodes=function(){return 0!==this.children.length},V.prototype.cloneNode=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.isSupported=function(J,fe){return!0},V.prototype.hasAttributes=function(){return 0!==this.attribs.length},V.prototype.compareDocumentPosition=function(J){var ke;return this===J?0:this.document()!==J.document()?(ke=Y.Disconnected|Y.ImplementationSpecific,Math.random()<.5?ke|=Y.Preceding:ke|=Y.Following,ke):this.isAncestor(J)?Y.Contains|Y.Preceding:this.isDescendant(J)?Y.Contains|Y.Following:this.isPreceding(J)?Y.Preceding:Y.Following},V.prototype.isSameNode=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.lookupPrefix=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.isDefaultNamespace=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.lookupNamespaceURI=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.isEqualNode=function(J){var fe,ke,Pe;if(J.nodeType!==this.nodeType||J.children.length!==this.children.length)return!1;for(fe=ke=0,Pe=this.children.length-1;0<=Pe?ke<=Pe:ke>=Pe;fe=0<=Pe?++ke:--ke)if(!this.children[fe].isEqualNode(J.children[fe]))return!1;return!0},V.prototype.getFeature=function(J,fe){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.setUserData=function(J,fe,ke){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.getUserData=function(J){throw new Error("This DOM method is not implemented."+this.debugInfo())},V.prototype.contains=function(J){return!!J&&(J===this||this.isDescendant(J))},V.prototype.isDescendant=function(J){var fe,Pe,nt,Le;for(Pe=0,nt=(Le=this.children).length;Pe<nt;Pe++)if(J===(fe=Le[Pe])||fe.isDescendant(J))return!0;return!1},V.prototype.isAncestor=function(J){return J.isDescendant(this)},V.prototype.isPreceding=function(J){var fe,ke;return fe=this.treePosition(J),ke=this.treePosition(this),-1!==fe&&-1!==ke&&fe<ke},V.prototype.isFollowing=function(J){var fe,ke;return fe=this.treePosition(J),ke=this.treePosition(this),-1!==fe&&-1!==ke&&fe>ke},V.prototype.treePosition=function(J){var fe,ke;return ke=0,fe=!1,this.foreachTreeNode(this.document(),function(Pe){if(ke++,!fe&&Pe===J)return fe=!0}),fe?ke:-1},V.prototype.foreachTreeNode=function(J,fe){var ke,Pe,nt,Le,at;for(J||(J=this.document()),Pe=0,nt=(Le=J.children).length;Pe<nt;Pe++){if(at=fe(ke=Le[Pe]))return at;if(at=this.foreachTreeNode(ke,fe))return at}},V}()}).call(this)},5112:function(Ve){(function(){Ve.exports=function(){function W(Y){this.nodes=Y}return Object.defineProperty(W.prototype,"length",{get:function(){return this.nodes.length||0}}),W.prototype.clone=function(){return this.nodes=null},W.prototype.item=function(Y){return this.nodes[Y]||null},W}()}).call(this)},4666:function(Ve,Ae,W){(function(){var Y,L,j={}.hasOwnProperty;Y=W(2269),L=W(2182),Ve.exports=function(D){function R(q,ne,te){if(R.__super__.constructor.call(this,q),null==ne)throw new Error("Missing instruction target. "+this.debugInfo());this.type=Y.ProcessingInstruction,this.target=this.stringify.insTarget(ne),this.name=this.target,te&&(this.value=this.stringify.insValue(te))}return function(D,R){for(var q in R)j.call(R,q)&&(D[q]=R[q]);function ne(){this.constructor=D}ne.prototype=R.prototype,D.prototype=new ne,D.__super__=R.prototype}(R,D),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(q){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(q))},R.prototype.isEqualNode=function(q){return!(!R.__super__.isEqualNode.apply(this,arguments).isEqualNode(q)||q.target!==this.target)},R}(L)}).call(this)},9942:function(Ve,Ae,W){(function(){var Y,L,j={}.hasOwnProperty;Y=W(2269),L=W(8563),Ve.exports=function(D){function R(q,ne){if(R.__super__.constructor.call(this,q),null==ne)throw new Error("Missing raw text. "+this.debugInfo());this.type=Y.Raw,this.value=this.stringify.raw(ne)}return function(D,R){for(var q in R)j.call(R,q)&&(D[q]=R[q]);function ne(){this.constructor=D}ne.prototype=R.prototype,D.prototype=new ne,D.__super__=R.prototype}(R,D),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(q){return this.options.writer.raw(this,this.options.writer.filterOptions(q))},R}(L)}).call(this)},7647:function(Ve,Ae,W){(function(){var Y,L,U,D={}.hasOwnProperty;Y=W(2269),U=W(3576),L=W(6316),Ve.exports=function(R){function q(ne,te){this.stream=ne,q.__super__.constructor.call(this,te)}return function(R,q){for(var ne in q)D.call(q,ne)&&(R[ne]=q[ne]);function te(){this.constructor=R}te.prototype=q.prototype,R.prototype=new te,R.__super__=q.prototype}(q,R),q.prototype.endline=function(ne,te,se){return ne.isLastRootNode&&te.state===L.CloseTag?"":q.__super__.endline.call(this,ne,te,se)},q.prototype.document=function(ne,te){var ee,K,z,ce,Ce,Re,ie,oe;for(ee=K=0,ce=(Re=ne.children).length;K<ce;ee=++K)Re[ee].isLastRootNode=ee===ne.children.length-1;for(te=this.filterOptions(te),oe=[],z=0,Ce=(ie=ne.children).length;z<Ce;z++)oe.push(this.writeChildNode(ie[z],te,0));return oe},q.prototype.attribute=function(ne,te,se){return this.stream.write(q.__super__.attribute.call(this,ne,te,se))},q.prototype.cdata=function(ne,te,se){return this.stream.write(q.__super__.cdata.call(this,ne,te,se))},q.prototype.comment=function(ne,te,se){return this.stream.write(q.__super__.comment.call(this,ne,te,se))},q.prototype.declaration=function(ne,te,se){return this.stream.write(q.__super__.declaration.call(this,ne,te,se))},q.prototype.docType=function(ne,te,se){var K,z,ce;if(se||(se=0),this.openNode(ne,te,se),te.state=L.OpenTag,this.stream.write(this.indent(ne,te,se)),this.stream.write("<!DOCTYPE "+ne.root().name),ne.pubID&&ne.sysID?this.stream.write(' PUBLIC "'+ne.pubID+'" "'+ne.sysID+'"'):ne.sysID&&this.stream.write(' SYSTEM "'+ne.sysID+'"'),ne.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(ne,te,se)),te.state=L.InsideTag,K=0,z=(ce=ne.children).length;K<z;K++)this.writeChildNode(ce[K],te,se+1);te.state=L.CloseTag,this.stream.write("]")}return te.state=L.CloseTag,this.stream.write(te.spaceBeforeSlash+">"),this.stream.write(this.endline(ne,te,se)),te.state=L.None,this.closeNode(ne,te,se)},q.prototype.element=function(ne,te,se){var z,ce,Ce,Re,ie,N,V;for(ie in se||(se=0),this.openNode(ne,te,se),te.state=L.OpenTag,this.stream.write(this.indent(ne,te,se)+"<"+ne.name),N=ne.attribs)!D.call(N,ie)||this.attribute(N[ie],te,se);if(ce=0===(z=ne.children.length)?null:ne.children[0],0===z||ne.children.every(function(J){return(J.type===Y.Text||J.type===Y.Raw)&&""===J.value}))te.allowEmpty?(this.stream.write(">"),te.state=L.CloseTag,this.stream.write("</"+ne.name+">")):(te.state=L.CloseTag,this.stream.write(te.spaceBeforeSlash+"/>"));else if(!te.pretty||1!==z||ce.type!==Y.Text&&ce.type!==Y.Raw||null==ce.value){for(this.stream.write(">"+this.endline(ne,te,se)),te.state=L.InsideTag,Ce=0,Re=(V=ne.children).length;Ce<Re;Ce++)this.writeChildNode(V[Ce],te,se+1);te.state=L.CloseTag,this.stream.write(this.indent(ne,te,se)+"</"+ne.name+">")}else this.stream.write(">"),te.state=L.InsideTag,te.suppressPrettyCount++,this.writeChildNode(ce,te,se+1),te.suppressPrettyCount--,te.state=L.CloseTag,this.stream.write("</"+ne.name+">");return this.stream.write(this.endline(ne,te,se)),te.state=L.None,this.closeNode(ne,te,se)},q.prototype.processingInstruction=function(ne,te,se){return this.stream.write(q.__super__.processingInstruction.call(this,ne,te,se))},q.prototype.raw=function(ne,te,se){return this.stream.write(q.__super__.raw.call(this,ne,te,se))},q.prototype.text=function(ne,te,se){return this.stream.write(q.__super__.text.call(this,ne,te,se))},q.prototype.dtdAttList=function(ne,te,se){return this.stream.write(q.__super__.dtdAttList.call(this,ne,te,se))},q.prototype.dtdElement=function(ne,te,se){return this.stream.write(q.__super__.dtdElement.call(this,ne,te,se))},q.prototype.dtdEntity=function(ne,te,se){return this.stream.write(q.__super__.dtdEntity.call(this,ne,te,se))},q.prototype.dtdNotation=function(ne,te,se){return this.stream.write(q.__super__.dtdNotation.call(this,ne,te,se))},q}(U)}).call(this)},4354:function(Ve,Ae,W){(function(){var L,U={}.hasOwnProperty;L=W(3576),Ve.exports=function(j){function D(R){D.__super__.constructor.call(this,R)}return function(j,D){for(var R in D)U.call(D,R)&&(j[R]=D[R]);function q(){this.constructor=j}q.prototype=D.prototype,j.prototype=new q,j.__super__=D.prototype}(D,j),D.prototype.document=function(R,q){var te,se,ee,K;for(q=this.filterOptions(q),ee="",te=0,se=(K=R.children).length;te<se;te++)ee+=this.writeChildNode(K[te],q,0);return q.pretty&&ee.slice(-q.newline.length)===q.newline&&(ee=ee.slice(0,-q.newline.length)),ee},D}(L)}).call(this)},5041:function(Ve){(function(){var W=function(L,G){return function(){return L.apply(G,arguments)}},Y={}.hasOwnProperty;Ve.exports=function(){function L(G){var U,j;for(U in this.assertLegalName=W(this.assertLegalName,this),this.assertLegalChar=W(this.assertLegalChar,this),G||(G={}),this.options=G,this.options.version||(this.options.version="1.0"),j=G.stringify||{})!Y.call(j,U)||(this[U]=j[U])}return L.prototype.name=function(G){return this.options.noValidation?G:this.assertLegalName(""+G||"")},L.prototype.text=function(G){return this.options.noValidation?G:this.assertLegalChar(this.textEscape(""+G||""))},L.prototype.cdata=function(G){return this.options.noValidation?G:(G=(G=""+G||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(G))},L.prototype.comment=function(G){if(this.options.noValidation)return G;if((G=""+G||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+G);return this.assertLegalChar(G)},L.prototype.raw=function(G){return this.options.noValidation?G:""+G||""},L.prototype.attValue=function(G){return this.options.noValidation?G:this.assertLegalChar(this.attEscape(G=""+G||""))},L.prototype.insTarget=function(G){return this.options.noValidation?G:this.assertLegalChar(""+G||"")},L.prototype.insValue=function(G){if(this.options.noValidation)return G;if((G=""+G||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+G);return this.assertLegalChar(G)},L.prototype.xmlVersion=function(G){if(this.options.noValidation)return G;if(!(G=""+G||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+G);return G},L.prototype.xmlEncoding=function(G){if(this.options.noValidation)return G;if(!(G=""+G||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+G);return this.assertLegalChar(G)},L.prototype.xmlStandalone=function(G){return this.options.noValidation?G:G?"yes":"no"},L.prototype.dtdPubID=function(G){return this.options.noValidation?G:this.assertLegalChar(""+G||"")},L.prototype.dtdSysID=function(G){return this.options.noValidation?G:this.assertLegalChar(""+G||"")},L.prototype.dtdElementValue=function(G){return this.options.noValidation?G:this.assertLegalChar(""+G||"")},L.prototype.dtdAttType=function(G){return this.options.noValidation?G:this.assertLegalChar(""+G||"")},L.prototype.dtdAttDefault=function(G){return this.options.noValidation?G:this.assertLegalChar(""+G||"")},L.prototype.dtdEntityValue=function(G){return this.options.noValidation?G:this.assertLegalChar(""+G||"")},L.prototype.dtdNData=function(G){return this.options.noValidation?G:this.assertLegalChar(""+G||"")},L.prototype.convertAttKey="@",L.prototype.convertPIKey="?",L.prototype.convertTextKey="#text",L.prototype.convertCDataKey="#cdata",L.prototype.convertCommentKey="#comment",L.prototype.convertRawKey="#raw",L.prototype.assertLegalChar=function(G){var j;if(this.options.noValidation)return G;if("1.0"===this.options.version){if(j=G.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+G+" at index "+j.index)}else if("1.1"===this.options.version&&(j=G.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+G+" at index "+j.index);return G},L.prototype.assertLegalName=function(G){if(this.options.noValidation)return G;if(this.assertLegalChar(G),!G.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return G},L.prototype.textEscape=function(G){return this.options.noValidation?G:G.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},L.prototype.attEscape=function(G){return this.options.noValidation?G:G.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},L}()}).call(this)},474:function(Ve,Ae,W){(function(){var Y,L,j={}.hasOwnProperty;Y=W(2269),L=W(2182),Ve.exports=function(D){function R(q,ne){if(R.__super__.constructor.call(this,q),null==ne)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=Y.Text,this.value=this.stringify.text(ne)}return function(D,R){for(var q in R)j.call(R,q)&&(D[q]=R[q]);function ne(){this.constructor=D}ne.prototype=R.prototype,D.prototype=new ne,D.__super__=R.prototype}(R,D),Object.defineProperty(R.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(R.prototype,"wholeText",{get:function(){var q,ne,te;for(te="",ne=this.previousSibling;ne;)te=ne.data+te,ne=ne.previousSibling;for(te+=this.data,q=this.nextSibling;q;)te+=q.data,q=q.nextSibling;return te}}),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(q){return this.options.writer.text(this,this.options.writer.filterOptions(q))},R.prototype.splitText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.replaceWholeText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},R}(L)}).call(this)},3576:function(Ve,Ae,W){(function(){var Y,L,Re,ie={}.hasOwnProperty;Re=W(3452).assign,Y=W(2269),W(4789),W(9195),W(1361),W(2516),W(3352),W(9942),W(474),W(4666),W(4173),W(7274),W(2068),W(8349),W(3087),L=W(6316),Ve.exports=function(){function oe(N){var V,J,fe;for(V in N||(N={}),this.options=N,J=N.writer||{})!ie.call(J,V)||(fe=J[V],this["_"+V]=this[V],this[V]=fe)}return oe.prototype.filterOptions=function(N){var V,J,fe,ke,Pe,nt,Le,at;return N||(N={}),N=Re({},this.options,N),(V={writer:this}).pretty=N.pretty||!1,V.allowEmpty=N.allowEmpty||!1,V.indent=null!=(J=N.indent)?J:"  ",V.newline=null!=(fe=N.newline)?fe:"\n",V.offset=null!=(ke=N.offset)?ke:0,V.dontPrettyTextNodes=null!=(Pe=null!=(nt=N.dontPrettyTextNodes)?nt:N.dontprettytextnodes)?Pe:0,V.spaceBeforeSlash=null!=(Le=null!=(at=N.spaceBeforeSlash)?at:N.spacebeforeslash)?Le:"",!0===V.spaceBeforeSlash&&(V.spaceBeforeSlash=" "),V.suppressPrettyCount=0,V.user={},V.state=L.None,V},oe.prototype.indent=function(N,V,J){var fe;return!V.pretty||V.suppressPrettyCount?"":V.pretty&&(fe=(J||0)+V.offset+1)>0?new Array(fe).join(V.indent):""},oe.prototype.endline=function(N,V,J){return!V.pretty||V.suppressPrettyCount?"":V.newline},oe.prototype.attribute=function(N,V,J){var fe;return this.openAttribute(N,V,J),fe=" "+N.name+'="'+N.value+'"',this.closeAttribute(N,V,J),fe},oe.prototype.cdata=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J)+"<![CDATA[",V.state=L.InsideTag,fe+=N.value,V.state=L.CloseTag,fe+="]]>"+this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.comment=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J)+"\x3c!-- ",V.state=L.InsideTag,fe+=N.value,V.state=L.CloseTag,fe+=" --\x3e"+this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.declaration=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J)+"<?xml",V.state=L.InsideTag,fe+=' version="'+N.version+'"',null!=N.encoding&&(fe+=' encoding="'+N.encoding+'"'),null!=N.standalone&&(fe+=' standalone="'+N.standalone+'"'),V.state=L.CloseTag,fe+=V.spaceBeforeSlash+"?>",fe+=this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.docType=function(N,V,J){var ke,Pe,nt,Le;if(J||(J=0),this.openNode(N,V,J),V.state=L.OpenTag,nt=this.indent(N,V,J),nt+="<!DOCTYPE "+N.root().name,N.pubID&&N.sysID?nt+=' PUBLIC "'+N.pubID+'" "'+N.sysID+'"':N.sysID&&(nt+=' SYSTEM "'+N.sysID+'"'),N.children.length>0){for(nt+=" [",nt+=this.endline(N,V,J),V.state=L.InsideTag,ke=0,Pe=(Le=N.children).length;ke<Pe;ke++)nt+=this.writeChildNode(Le[ke],V,J+1);V.state=L.CloseTag,nt+="]"}return V.state=L.CloseTag,nt+=V.spaceBeforeSlash+">",nt+=this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),nt},oe.prototype.element=function(N,V,J){var ke,Pe,nt,Le,at,It,Ge,yt,mt,_t,Fn,Ot,Pn;for(yt in J||(J=0),mt=!1,_t="",this.openNode(N,V,J),V.state=L.OpenTag,_t+=this.indent(N,V,J)+"<"+N.name,Fn=N.attribs)!ie.call(Fn,yt)||(_t+=this.attribute(Fn[yt],V,J));if(nt=0===(Pe=N.children.length)?null:N.children[0],0===Pe||N.children.every(function(nn){return(nn.type===Y.Text||nn.type===Y.Raw)&&""===nn.value}))V.allowEmpty?(_t+=">",V.state=L.CloseTag,_t+="</"+N.name+">"+this.endline(N,V,J)):(V.state=L.CloseTag,_t+=V.spaceBeforeSlash+"/>"+this.endline(N,V,J));else if(!V.pretty||1!==Pe||nt.type!==Y.Text&&nt.type!==Y.Raw||null==nt.value){if(V.dontPrettyTextNodes)for(Le=0,It=(Ot=N.children).length;Le<It;Le++)if(((ke=Ot[Le]).type===Y.Text||ke.type===Y.Raw)&&null!=ke.value){V.suppressPrettyCount++,mt=!0;break}for(_t+=">"+this.endline(N,V,J),V.state=L.InsideTag,at=0,Ge=(Pn=N.children).length;at<Ge;at++)_t+=this.writeChildNode(ke=Pn[at],V,J+1);V.state=L.CloseTag,_t+=this.indent(N,V,J)+"</"+N.name+">",mt&&V.suppressPrettyCount--,_t+=this.endline(N,V,J),V.state=L.None}else _t+=">",V.state=L.InsideTag,V.suppressPrettyCount++,mt=!0,_t+=this.writeChildNode(nt,V,J+1),V.suppressPrettyCount--,mt=!1,V.state=L.CloseTag,_t+="</"+N.name+">"+this.endline(N,V,J);return this.closeNode(N,V,J),_t},oe.prototype.writeChildNode=function(N,V,J){switch(N.type){case Y.CData:return this.cdata(N,V,J);case Y.Comment:return this.comment(N,V,J);case Y.Element:return this.element(N,V,J);case Y.Raw:return this.raw(N,V,J);case Y.Text:return this.text(N,V,J);case Y.ProcessingInstruction:return this.processingInstruction(N,V,J);case Y.Dummy:return"";case Y.Declaration:return this.declaration(N,V,J);case Y.DocType:return this.docType(N,V,J);case Y.AttributeDeclaration:return this.dtdAttList(N,V,J);case Y.ElementDeclaration:return this.dtdElement(N,V,J);case Y.EntityDeclaration:return this.dtdEntity(N,V,J);case Y.NotationDeclaration:return this.dtdNotation(N,V,J);default:throw new Error("Unknown XML node type: "+N.constructor.name)}},oe.prototype.processingInstruction=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J)+"<?",V.state=L.InsideTag,fe+=N.target,N.value&&(fe+=" "+N.value),V.state=L.CloseTag,fe+=V.spaceBeforeSlash+"?>",fe+=this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.raw=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J),V.state=L.InsideTag,fe+=N.value,V.state=L.CloseTag,fe+=this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.text=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J),V.state=L.InsideTag,fe+=N.value,V.state=L.CloseTag,fe+=this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.dtdAttList=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J)+"<!ATTLIST",V.state=L.InsideTag,fe+=" "+N.elementName+" "+N.attributeName+" "+N.attributeType,"#DEFAULT"!==N.defaultValueType&&(fe+=" "+N.defaultValueType),N.defaultValue&&(fe+=' "'+N.defaultValue+'"'),V.state=L.CloseTag,fe+=V.spaceBeforeSlash+">"+this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.dtdElement=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J)+"<!ELEMENT",V.state=L.InsideTag,fe+=" "+N.name+" "+N.value,V.state=L.CloseTag,fe+=V.spaceBeforeSlash+">"+this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.dtdEntity=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J)+"<!ENTITY",V.state=L.InsideTag,N.pe&&(fe+=" %"),fe+=" "+N.name,N.value?fe+=' "'+N.value+'"':(N.pubID&&N.sysID?fe+=' PUBLIC "'+N.pubID+'" "'+N.sysID+'"':N.sysID&&(fe+=' SYSTEM "'+N.sysID+'"'),N.nData&&(fe+=" NDATA "+N.nData)),V.state=L.CloseTag,fe+=V.spaceBeforeSlash+">"+this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.dtdNotation=function(N,V,J){var fe;return this.openNode(N,V,J),V.state=L.OpenTag,fe=this.indent(N,V,J)+"<!NOTATION",V.state=L.InsideTag,fe+=" "+N.name,N.pubID&&N.sysID?fe+=' PUBLIC "'+N.pubID+'" "'+N.sysID+'"':N.pubID?fe+=' PUBLIC "'+N.pubID+'"':N.sysID&&(fe+=' SYSTEM "'+N.sysID+'"'),V.state=L.CloseTag,fe+=V.spaceBeforeSlash+">"+this.endline(N,V,J),V.state=L.None,this.closeNode(N,V,J),fe},oe.prototype.openNode=function(N,V,J){},oe.prototype.closeNode=function(N,V,J){},oe.prototype.openAttribute=function(N,V,J){},oe.prototype.closeAttribute=function(N,V,J){},oe}()}).call(this)},7904:function(Ve,Ae,W){(function(){var Y,L,G,U,j,D,R,q,ne,te;te=W(3452),q=te.assign,ne=te.isFunction,G=W(9906),U=W(519),j=W(1105),R=W(4354),D=W(7647),Y=W(2269),L=W(6316),Ve.exports.create=function(se,ee,K,z){var ce,Ce;if(null==se)throw new Error("Root element needs a name.");return z=q({},ee,K,z),Ce=(ce=new U(z)).element(se),z.headless||(ce.declaration(z),(null!=z.pubID||null!=z.sysID)&&ce.dtd(z)),Ce},Ve.exports.begin=function(se,ee,K){var z;return ne(se)&&(ee=(z=[se,ee])[0],K=z[1],se={}),ee?new j(se,ee,K):new U(se)},Ve.exports.stringWriter=function(se){return new R(se)},Ve.exports.streamWriter=function(se,ee){return new D(se,ee)},Ve.exports.implementation=new G,Ve.exports.nodeType=Y,Ve.exports.writerState=L}).call(this)},2361:()=>{},4616:()=>{},5485:Ve=>{"use strict";Ve.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\u{1d504}","afr":"\u{1d51e}","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1d538}","aopf":"\u{1d552}","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\u{1d49c}","ascr":"\u{1d4b6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\u{1d505}","bfr":"\u{1d51f}","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\u{1d539}","bopf":"\u{1d553}","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\u{1d4b7}","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\u{1d520}","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\u{1d554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\u{1d49e}","cscr":"\u{1d4b8}","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\u{1d507}","dfr":"\u{1d521}","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\u{1d53b}","dopf":"\u{1d555}","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\u{1d49f}","dscr":"\u{1d4b9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1d508}","efr":"\u{1d522}","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1d53c}","eopf":"\u{1d556}","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\u{1d509}","ffr":"\u{1d523}","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\u{1d53d}","fopf":"\u{1d557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\u{1d4bb}","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\u{1d50a}","gfr":"\u{1d524}","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\u{1d53e}","gopf":"\u{1d558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\u{1d4a2}","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\u{1d525}","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\u{1d559}","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1d4bd}","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\u{1d526}","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\u{1d540}","iopf":"\u{1d55a}","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\u{1d4be}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1d50d}","jfr":"\u{1d527}","jmath":"\u0237","Jopf":"\u{1d541}","jopf":"\u{1d55b}","Jscr":"\u{1d4a5}","jscr":"\u{1d4bf}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\u{1d50e}","kfr":"\u{1d528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\u{1d542}","kopf":"\u{1d55c}","Kscr":"\u{1d4a6}","kscr":"\u{1d4c0}","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\u{1d50f}","lfr":"\u{1d529}","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\u{1d543}","lopf":"\u{1d55d}","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\u{1d4c1}","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\u{1d510}","mfr":"\u{1d52a}","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\u{1d544}","mopf":"\u{1d55e}","mp":"\u2213","mscr":"\u{1d4c2}","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1d511}","nfr":"\u{1d52b}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\u{1d55f}","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\u{1d4a9}","nscr":"\u{1d4c3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\u{1d512}","ofr":"\u{1d52c}","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\u{1d546}","oopf":"\u{1d560}","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\u{1d4aa}","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\u{1d513}","pfr":"\u{1d52d}","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\u{1d561}","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\u{1d4ab}","pscr":"\u{1d4c5}","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\u{1d514}","qfr":"\u{1d52e}","qint":"\u2a0c","qopf":"\u{1d562}","Qopf":"\u211a","qprime":"\u2057","Qscr":"\u{1d4ac}","qscr":"\u{1d4c6}","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\u{1d52f}","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\u{1d563}","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\u{1d4c7}","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1d516}","sfr":"\u{1d530}","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\u{1d54a}","sopf":"\u{1d564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\u{1d4ae}","sscr":"\u{1d4c8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\u{1d517}","tfr":"\u{1d531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\u{1d54b}","topf":"\u{1d565}","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\u{1d4af}","tscr":"\u{1d4c9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\u{1d518}","ufr":"\u{1d532}","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1d54c}","uopf":"\u{1d566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\u{1d4b0}","uscr":"\u{1d4ca}","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\u{1d519}","vfr":"\u{1d533}","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\u{1d54d}","vopf":"\u{1d567}","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\u{1d4b1}","vscr":"\u{1d4cb}","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1d51a}","wfr":"\u{1d534}","Wopf":"\u{1d54e}","wopf":"\u{1d568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1d4b2}","wscr":"\u{1d4cc}","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\u{1d51b}","xfr":"\u{1d535}","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\u{1d54f}","xopf":"\u{1d569}","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\u{1d4b3}","xscr":"\u{1d4cd}","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\u{1d51c}","yfr":"\u{1d536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1d550}","yopf":"\u{1d56a}","Yscr":"\u{1d4b4}","yscr":"\u{1d4ce}","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\u{1d537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\u{1d56b}","Zopf":"\u2124","Zscr":"\u{1d4b5}","zscr":"\u{1d4cf}","zwj":"\u200d","zwnj":"\u200c"}')}},Ve=>{Ve(Ve.s=9231)}]);