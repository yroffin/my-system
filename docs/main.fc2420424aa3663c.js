(self.webpackChunkfront=self.webpackChunkfront||[]).push([[179],{30:(He,be,z)=>{"use strict";function X(i){return"function"==typeof i}function M(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const U=M(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function O(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class V{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(X(n))try{n()}catch(s){t=s instanceof U?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{j(s)}catch(o){t=t??[],o instanceof U?t=[...t,...o.errors]:t.push(o)}}if(t)throw new U(t)}}add(t){var e;if(t&&t!==this)if(this.closed)j(t);else{if(t instanceof V){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&O(e,t)}remove(t){const{_finalizers:e}=this;e&&O(e,t),t instanceof V&&t._removeParent(this)}}V.EMPTY=(()=>{const i=new V;return i.closed=!0,i})();const L=V.EMPTY;function R(i){return i instanceof V||i&&"closed"in i&&X(i.remove)&&X(i.add)&&X(i.unsubscribe)}function j(i){X(i)?i():i.unsubscribe()}const J={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(i,t,...e){const{delegate:n}=Z;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=Z;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function te(i){Z.setTimeout(()=>{const{onUnhandledError:t}=J;if(!t)throw i;t(i)})}function ie(){}const Y=ye("C",void 0,void 0);function ye(i,t,e){return{kind:i,value:t,error:e}}let Ie=null;function ne(i){if(J.useDeprecatedSynchronousErrorHandling){const t=!Ie;if(t&&(Ie={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=Ie;if(Ie=null,e)throw n}}else i()}class N extends V{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,R(t)&&t.add(this)):this.destination=Re}static create(t,e,n){return new Ne(t,e,n)}next(t){this.isStopped?ue(function oe(i){return ye("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ue(function G(i){return ye("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ue(Y,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $=Function.prototype.bind;function re(i,t){return $.call(i,t)}class pe{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Ee(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Ee(n)}else Ee(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Ee(e)}}}class Ne extends N{constructor(t,e,n){let r;if(super(),X(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&J.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&re(t.next,s),error:t.error&&re(t.error,s),complete:t.complete&&re(t.complete,s)}):r=t}this.destination=new pe(r)}}function Ee(i){J.useDeprecatedSynchronousErrorHandling?function ae(i){J.useDeprecatedSynchronousErrorHandling&&Ie&&(Ie.errorThrown=!0,Ie.error=i)}(i):te(i)}function ue(i,t){const{onStoppedNotification:e}=J;e&&Z.setTimeout(()=>e(i,t))}const Re={closed:!0,next:ie,error:function xe(i){throw i},complete:ie},Je="function"==typeof Symbol&&Symbol.observable||"@@observable";function ke(i){return i}function ot(i){return 0===i.length?ke:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let yt=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function lt(i){return i&&i instanceof N||function Be(i){return i&&X(i.next)&&X(i.error)&&X(i.complete)}(i)&&R(i)}(e)?e:new Ne(e,n,r);return ne(()=>{const{operator:o,source:l}=this;s.add(o?o.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=hn(n))((r,s)=>{const o=new Ne({next:l=>{try{e(l)}catch(u){s(u),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Je](){return this}pipe(...e){return ot(e)(this)}toPromise(e){return new(e=hn(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function hn(i){var t;return null!==(t=i??J.Promise)&&void 0!==t?t:Promise}const Ve=M(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ge=(()=>{class i extends yt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new bt(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new Ve}next(e){ne(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){ne(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){ne(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?L:(this.currentObservers=null,s.push(e),new V(()=>{this.currentObservers=null,O(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new yt;return e.source=this,e}}return i.create=(t,e)=>new bt(t,e),i})();class bt extends Ge{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:L}}function wt(i){return X(i?.lift)}function st(i){return t=>{if(wt(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function gt(i,t,e,n,r){return new Me(i,t,e,n,r)}class Me extends N{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(l){try{e(l)}catch(u){t.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function ce(i,t){return st((e,n)=>{let r=0;e.subscribe(gt(n,s=>{n.next(i.call(t,s,r++))}))})}function kr(i){return this instanceof kr?(this.v=i,this):new kr(i)}function Wo(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(I){n[I]&&(r[I]=function(T){return new Promise(function(k,W){s.push([I,T,k,W])>1||l(I,T)})})}function l(I,T){try{!function u(I){I.value instanceof kr?Promise.resolve(I.value.v).then(p,v):w(s[0][2],I)}(n[I](T))}catch(k){w(s[0][3],k)}}function p(I){l("next",I)}function v(I){l("throw",I)}function w(I,T){I(T),s.shift(),s.length&&l(s[0][0],s[0][1])}}function il(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function un(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(l,u){!function r(s,o,l,u){Promise.resolve(u).then(function(p){s({value:p,done:l})},o)}(l,u,(o=i[s](o)).done,o.value)})}}}const ku=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function Xa(i){return X(i?.then)}function Pd(i){return X(i[Je])}function uu(i){return Symbol.asyncIterator&&X(i?.[Symbol.asyncIterator])}function Sa(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ou=function Eh(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function nd(i){return X(i?.[Ou])}function ff(i){return Wo(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield kr(e.read());if(r)return yield kr(void 0);yield yield kr(n)}}finally{e.releaseLock()}})}function id(i){return X(i?.getReader)}function pl(i){if(i instanceof yt)return i;if(null!=i){if(Pd(i))return function pf(i){return new yt(t=>{const e=i[Je]();if(X(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(ku(i))return function rh(i){return new yt(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(Xa(i))return function gf(i){return new yt(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,te)})}(i);if(uu(i))return Ic(i);if(nd(i))return function kd(i){return new yt(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(id(i))return function Mg(i){return Ic(ff(i))}(i)}throw Sa(i)}function Ic(i){return new yt(t=>{(function Th(i,t){var e,n,r,s;return function Ye(i,t,e,n){return new(e||(e=Promise))(function(s,o){function l(v){try{p(n.next(v))}catch(w){o(w)}}function u(v){try{p(n.throw(v))}catch(w){o(w)}}function p(v){v.done?s(v.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(v.value).then(l,u)}p((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=il(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function ro(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function gl(i,t,e=1/0){return X(t)?gl((n,r)=>ce((s,o)=>t(n,s,r,o))(pl(i(n,r))),e):("number"==typeof t&&(e=t),st((n,r)=>function mf(i,t,e,n,r,s,o,l){const u=[];let p=0,v=0,w=!1;const I=()=>{w&&!u.length&&!p&&t.complete()},T=W=>p<n?k(W):u.push(W),k=W=>{s&&t.next(W),p++;let K=!1;pl(e(W,v++)).subscribe(gt(t,he=>{r?.(he),s?T(he):t.next(he)},()=>{K=!0},void 0,()=>{if(K)try{for(p--;u.length&&p<n;){const he=u.shift();o?ro(t,o,()=>k(he)):k(he)}I()}catch(he){t.error(he)}}))};return i.subscribe(gt(t,T,()=>{w=!0,I()})),()=>{l?.()}}(n,r,i,e)))}function Sc(i=1/0){return gl(ke,i)}const rl=new yt(i=>i.complete());function et(i){return i&&X(i.schedule)}function mt(i){return i[i.length-1]}function ct(i){return X(mt(i))?i.pop():void 0}function ge(i){return et(mt(i))?i.pop():void 0}function it(i,t=0){return st((e,n)=>{e.subscribe(gt(n,r=>ro(n,i,()=>n.next(r),t),()=>ro(n,i,()=>n.complete(),t),r=>ro(n,i,()=>n.error(r),t)))})}function Rt(i,t=0){return st((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function gi(i,t){if(!i)throw new Error("Iterable cannot be null");return new yt(e=>{ro(e,t,()=>{const n=i[Symbol.asyncIterator]();ro(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function ur(i,t){return t?function pr(i,t){if(null!=i){if(Pd(i))return function Yt(i,t){return pl(i).pipe(Rt(t),it(t))}(i,t);if(ku(i))return function Ai(i,t){return new yt(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(Xa(i))return function Dn(i,t){return pl(i).pipe(Rt(t),it(t))}(i,t);if(uu(i))return gi(i,t);if(nd(i))return function oi(i,t){return new yt(e=>{let n;return ro(e,t,()=>{n=i[Ou](),ro(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>X(n?.return)&&n.return()})}(i,t);if(id(i))return function yr(i,t){return gi(ff(i),t)}(i,t)}throw Sa(i)}(i,t):pl(i)}function So(i={}){const{connector:t=(()=>new Ge),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,l,u,p=0,v=!1,w=!1;const I=()=>{l?.unsubscribe(),l=void 0},T=()=>{I(),o=u=void 0,v=w=!1},k=()=>{const W=o;T(),W?.unsubscribe()};return st((W,K)=>{p++,!w&&!v&&I();const he=u=u??t();K.add(()=>{p--,0===p&&!w&&!v&&(l=Eo(k,r))}),he.subscribe(K),!o&&p>0&&(o=new Ne({next:Te=>he.next(Te),error:Te=>{w=!0,I(),l=Eo(T,e,Te),he.error(Te)},complete:()=>{v=!0,I(),l=Eo(T,n),he.complete()}}),pl(W).subscribe(o))})(s)}}function Eo(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new Ne({next:()=>{n.unsubscribe(),i()}});return t(...e).subscribe(n)}function gs(i){for(let t in i)if(i[t]===gs)return t;throw Error("Could not find renamed property on target object.")}function Ea(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function ms(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ms).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Ya(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const Fu=gs({__forward_ref__:gs});function hs(i){return i.__forward_ref__=hs,i.toString=function(){return ms(this())},i}function ss(i){return Dg(i)?i():i}function Dg(i){return"function"==typeof i&&i.hasOwnProperty(Fu)&&i.__forward_ref__===hs}class _i extends Error{constructor(t,e){super(function Lg(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function Ps(i){return"string"==typeof i?i:null==i?"":String(i)}function xs(i,t){throw new _i(-201,!1)}function Tc(i,t){null==i&&function so(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function Zi(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Sr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Mc(i){return Dy(i,qf)||Dy(i,wm)}function Dy(i,t){return i.hasOwnProperty(t)?i[t]:null}function ha(i){return i&&(i.hasOwnProperty(Up)||i.hasOwnProperty(Am))?i[Up]:null}const qf=gs({\u0275prov:gs}),Up=gs({\u0275inj:gs}),wm=gs({ngInjectableDef:gs}),Am=gs({ngInjectorDef:gs});var os=(()=>((os=os||{})[os.Default=0]="Default",os[os.Host=1]="Host",os[os.Self=2]="Self",os[os.SkipSelf=4]="SkipSelf",os[os.Optional=8]="Optional",os))();let bv;function Nu(i){const t=bv;return bv=i,t}function Xl(i,t,e){const n=Mc(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&os.Optional?null:void 0!==t?t:void xs(ms(i))}function sh(i){return{toString:i}.toString()}var oh=(()=>((oh=oh||{})[oh.OnPush=0]="OnPush",oh[oh.Default=1]="Default",oh))(),Ma=(()=>{return(i=Ma||(Ma={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ma;var i})();const oo=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Fd={},_o=[],Ka=gs({\u0275cmp:gs}),Xf=gs({\u0275dir:gs}),Za=gs({\u0275pipe:gs}),sl=gs({\u0275mod:gs}),hu=gs({\u0275fac:gs}),ah=gs({__NG_ELEMENT_ID__:gs});let Yf=0;function _r(i){return sh(()=>{const e=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===oh.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||_o,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ma.Emulated,id:"c"+Yf++,styles:i.styles||_o,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=Py(i.inputs,n),r.outputs=Py(i.outputs),o&&o.forEach(l=>l(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Lh).filter(vf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(La).filter(vf):null,r})}function Lh(i){return Zo(i)||Ol(i)}function vf(i){return null!==i}function Or(i){return sh(()=>({type:i.type,bootstrap:i.bootstrap||_o,declarations:i.declarations||_o,imports:i.imports||_o,exports:i.exports||_o,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Py(i,t){if(null==i)return Fd;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}const Yr=_r;function du(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Zo(i){return i[Ka]||null}function Ol(i){return i[Xf]||null}function La(i){return i[Za]||null}function fu(i,t){const e=i[sl]||null;if(!e&&!0===t)throw new Error(`Type ${ms(i)} does not have '\u0275mod' property.`);return e}function Jc(i){return Array.isArray(i)&&"object"==typeof i[1]}function Rh(i){return Array.isArray(i)&&!0===i[1]}function wv(i){return 0!=(8&i.flags)}function kg(i){return 2==(2&i.flags)}function Og(i){return 1==(1&i.flags)}function Ph(i){return null!==i.template}function Sm(i){return 0!=(256&i[2])}function ip(i,t){return i.hasOwnProperty(hu)?i[hu]:null}class Mm{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function da(){return bf}function bf(i){return i.type.prototype.ngOnChanges&&(i.setInput=rp),Fy}function Fy(){const i=Dm(this),t=i?.current;if(t){const e=i.previous;if(e===Fd)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function rp(i,t,e,n){const r=Dm(i)||function Ng(i,t){return i[Tv]=t}(i,{previous:Fd,current:null}),s=r.current||(r.current={}),o=r.previous,l=this.declaredInputs[e],u=o[l];s[l]=new Mm(u&&u.currentValue,t,o===Fd),i[n]=t}da.ngInherit=!0;const Tv="__ngSimpleChanges__";function Dm(i){return i[Tv]||null}function sa(i){for(;Array.isArray(i);)i=i[0];return i}function Vg(i,t){return sa(t[i])}function hh(i,t){return sa(t[i.index])}function Cs(i,t){return i.data[t]}function ml(i,t){return i[t]}function Lc(i,t){const e=t[i];return Jc(e)?e:e[0]}function bo(i){return 4==(4&i[2])}function Fo(i){return 64==(64&i[2])}function qs(i,t){return null==t?null:i[t]}function Kr(i){i[18]=0}function Ug(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const rs={lFrame:wa(null),bindingsEnabled:!0};function zy(){return rs.bindingsEnabled}function Ci(){return rs.lFrame.lView}function Ms(){return rs.lFrame.tView}function Ot(i){return rs.lFrame.contextLView=i,i[8]}function Nt(i){return rs.lFrame.contextLView=null,i}function It(){let i=No();for(;null!==i&&64===i.type;)i=i.parent;return i}function No(){return rs.lFrame.currentTNode}function oa(i,t){const e=rs.lFrame;e.currentTNode=i,e.isParent=t}function ks(){return rs.lFrame.isParent}function qp(){rs.lFrame.isParent=!1}function Bo(){const i=rs.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function Oh(){return rs.lFrame.bindingIndex++}function vl(i){const t=rs.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function zd(i,t){const e=rs.lFrame;e.bindingIndex=e.bindingRootIndex=i,Bu(t)}function Bu(i){rs.lFrame.currentDirectiveIndex=i}function Pc(){return rs.lFrame.currentQueryIndex}function Hg(i){rs.lFrame.currentQueryIndex=i}function Ds(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function Dv(i,t,e){if(e&os.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&os.Host||(r=Ds(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,i=s}const n=rs.lFrame=Lr();return n.currentTNode=t,n.lView=i,!0}function Gg(i){const t=Lr(),e=i[1];rs.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Lr(){const i=rs.lFrame,t=null===i?null:i.child;return null===t?wa(i):t}function wa(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function Nl(){const i=rs.lFrame;return rs.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const aa=Nl;function Ua(){const i=Nl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function dc(){return rs.lFrame.selectedIndex}function wf(i){rs.lFrame.selectedIndex=i}function Ha(){const i=rs.lFrame;return Cs(i.tView,i.selectedIndex)}function xf(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:p,ngOnDestroy:v}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-e,o),l&&((i.contentHooks||(i.contentHooks=[])).push(e,l),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,l)),u&&(i.viewHooks||(i.viewHooks=[])).push(-e,u),p&&((i.viewHooks||(i.viewHooks=[])).push(e,p),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,p)),null!=v&&(i.destroyHooks||(i.destroyHooks=[])).push(e,v)}}function Ud(i,t,e){If(i,t,3,e)}function $g(i,t,e,n){(3&i[2])===e&&If(i,t,e,n)}function Fh(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function If(i,t,e,n){const s=n??-1,o=t.length-1;let l=0;for(let u=void 0!==n?65535&i[18]:0;u<o;u++)if("number"==typeof t[u+1]){if(l=t[u],null!=n&&l>=n)break}else t[u]<0&&(i[18]+=65536),(l<s||-1==s)&&(Sf(i,e,t,u),i[18]=(4294901760&i[18])+u+2),u++}function Sf(i,t,e,n){const r=e[n]<0,s=e[n+1],l=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(l)}finally{}}}else try{s.call(l)}finally{}}class Xp{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Yp(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],l=e[n++];i.setAttribute(t,o,l,s)}else{const s=r,o=e[++n];Gd(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function ll(i){return 3===i||4===i||6===i}function Gd(i){return 64===i.charCodeAt(0)}function Nh(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||kc(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function kc(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const l=i[s++];if("number"==typeof l){if(l===t){o=-1;break}if(l>t){o=s-1;break}}}for(;s<i.length;){const l=i[s];if("number"==typeof l)break;if(l===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function Bh(i){return-1!==i}function dh(i){return 32767&i}function mu(i,t){let e=function zu(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let la=!0;function cd(i){const t=la;return la=i,t}let vu=0;const Co={};function $s(i,t){const e=cp(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,lp(n.data,i),lp(t,null),lp(n.blueprint,null));const r=Fc(i,t),s=i.injectorIndex;if(Bh(r)){const o=dh(r),l=mu(r,t),u=l[1].data;for(let p=0;p<8;p++)t[s+p]=l[o+p]|u[o+p]}return t[s+8]=r,s}function lp(i,t){i.push(0,0,0,0,0,0,0,0,t)}function cp(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function Fc(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=Qa(r),null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function up(i,t,e){!function Oc(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(ah)&&(n=e[ah]),null==n&&(n=e[ah]=vu++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function fh(i,t,e){if(e&os.Optional)return i;xs()}function Wd(i,t,e,n){if(e&os.Optional&&void 0===n&&(n=null),0==(e&(os.Self|os.Host))){const r=i[9],s=Nu(void 0);try{return r?r.get(t,n,e&os.Optional):Xl(t,n,e&os.Optional)}finally{Nu(s)}}return fh(n,0,e)}function jd(i,t,e,n=os.Default,r){if(null!==i){if(1024&t[2]){const o=function Vh(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const l=Ql(s,o,e,n|os.Self,Co);if(l!==Co)return l;let u=s.parent;if(!u){const p=o[21];if(p){const v=p.get(e,Co,n);if(v!==Co)return v}u=Qa(o),o=o[15]}s=u}return r}(i,t,e,n,Co);if(o!==Co)return o}const s=Ql(i,t,e,n,Co);if(s!==Co)return s}return Wd(t,e,n,r)}function Ql(i,t,e,n,r){const s=function ud(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(ah)?i[ah]:void 0;return"number"==typeof t?t>=0?255&t:Kp:t}(e);if("function"==typeof s){if(!Dv(t,i,n))return n&os.Host?fh(r,0,n):Wd(t,e,n,r);try{const o=s(n);if(null!=o||n&os.Optional)return o;xs()}finally{aa()}}else if("number"==typeof s){let o=null,l=cp(i,t),u=-1,p=n&os.Host?t[16][6]:null;for((-1===l||n&os.SkipSelf)&&(u=-1===l?Fc(i,t):t[l+8],-1!==u&&hp(n,!1)?(o=t[1],l=dh(u),t=mu(u,t)):l=-1);-1!==l;){const v=t[1];if($d(s,l,v.data)){const w=ul(l,t,e,o,n,p);if(w!==Co)return w}u=t[l+8],-1!==u&&hp(n,t[1].data[l+8]===p)&&$d(s,l,t)?(o=v,l=dh(u),t=mu(u,t)):l=-1}}return r}function ul(i,t,e,n,r,s){const o=t[1],l=o.data[i+8],v=zh(l,o,e,null==n?kg(l)&&la:n!=o&&0!=(3&l.type),r&os.Host&&s===l);return null!==v?tu(t,o,v,l):Co}function zh(i,t,e,n,r){const s=i.providerIndexes,o=t.data,l=1048575&s,u=i.directiveStart,v=s>>20,I=r?l+v:i.directiveEnd;for(let T=n?l:l+v;T<I;T++){const k=o[T];if(T<u&&e===k||T>=u&&k.type===e)return T}if(r){const T=o[u];if(T&&Ph(T)&&T.type===e)return u}return null}function tu(i,t,e,n){let r=i[e];const s=t.data;if(function Vy(i){return i instanceof Xp}(r)){const o=r;o.resolving&&function vv(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new _i(-200,`Circular dependency in DI detected for ${i}${e}`)}(function To(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ps(i)}(s[e]));const l=cd(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Nu(o.injectImpl):null;Dv(i,n,os.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function Rm(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=bf(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==u&&Nu(u),cd(l),o.resolving=!1,aa()}}return r}function $d(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function hp(i,t){return!(i&os.Self||i&os.Host&&t)}class ph{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return jd(this._tNode,this._lView,t,n,e)}}function Kp(){return new ph(It(),Ci())}function jo(i){return sh(()=>{const t=i.prototype.constructor,e=t[hu]||qd(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[hu]||qd(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function qd(i){return Dg(i)?()=>{const t=qd(ss(i));return t&&t()}:ip(i)}function Qa(i){const t=i[1],e=t.type;return 2===e?t.declTNode:1===e?i[6]:null}function hd(i){return function Xg(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(ll(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(It(),i)}const Uh="__parameters__";function ca(i,t,e){return sh(()=>{const n=function dd(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return l.annotation=o,l;function l(u,p,v){const w=u.hasOwnProperty(Uh)?u[Uh]:Object.defineProperty(u,Uh,{value:[]})[Uh];for(;w.length<=v;)w.push(null);return(w[v]=w[v]||[]).push(o),u}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class rr{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Zi({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ga(i,t){void 0===t&&(t=i);for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)?(t===i&&(t=i.slice(0,e)),Ga(n,t)):t!==i&&t.push(n)}return t}function yu(i,t){i.forEach(e=>Array.isArray(e)?yu(e,t):t(e))}function Hu(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Gu(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Sl(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function El(i,t,e){let n=Do(i,t);return n>=0?i[1|n]=e:(n=~n,function dp(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function pc(i,t){const e=Do(i,t);if(e>=0)return i[1|e]}function Do(i,t){return function tc(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const bu={},Mf="__NG_DI_FLAG__",Df="ngTempTokenPath",mc=/\n/gm,Wh="__source";let Yd;function Wu(i){const t=Yd;return Yd=i,t}function fd(i,t=os.Default){if(void 0===Yd)throw new _i(-203,!1);return null===Yd?Xl(i,void 0,t):Yd.get(i,t&os.Optional?null:void 0,t)}function Yn(i,t=os.Default){return(function Cv(){return bv}()||fd)(ss(i),t)}function fa(i,t=os.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),Yn(i,t)}function Kd(i){const t=[];for(let e=0;e<i.length;e++){const n=ss(i[e]);if(Array.isArray(n)){if(0===n.length)throw new _i(900,!1);let r,s=os.Default;for(let o=0;o<n.length;o++){const l=n[o],u=Nm(l);"number"==typeof u?-1===u?r=l.token:s|=u:r=l}t.push(Yn(r,s))}else t.push(Yn(n))}return t}function Cu(i,t){return i[Mf]=t,i.prototype[Mf]=t,i}function Nm(i){return i[Mf]}const ju=Cu(ca("Inject",i=>({token:i})),-1),Ml=Cu(ca("Optional"),8),mh=Cu(ca("SkipSelf"),4);let yh,Nc,qu;function vc(i){return function Fa(){if(void 0===Nc&&(Nc=null,oo.trustedTypes))try{Nc=oo.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Nc}()?.createHTML(i)||i}function md(i){return function Pf(){if(void 0===qu&&(qu=null,oo.trustedTypes))try{qu=oo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return qu}()?.createHTML(i)||i}class ru{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class vd extends ru{getTypeName(){return"HTML"}}class _p extends ru{getTypeName(){return"Style"}}class Hm extends ru{getTypeName(){return"Script"}}class $_ extends ru{getTypeName(){return"URL"}}class nm extends ru{getTypeName(){return"ResourceURL"}}function bl(i){return i instanceof ru?i.changingThisBreaksApplicationSecurity:i}function ua(i,t){const e=function kf(i){return i instanceof ru&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}class sg{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(vc(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class Xu{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=vc(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=vc(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const og=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ag=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function lg(i){return(i=String(i)).match(og)||i.match(ag)?i:"unsafe:"+i}function Bc(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Of(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const Gm=Bc("area,br,col,hr,img,wbr"),Hy=Bc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Gy=Bc("rp,rt"),hl=Of(Gm,Of(Hy,Bc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Of(Gy,Bc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Of(Gy,Hy)),Wm=Bc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ff=Bc("srcset"),Wy=Of(Wm,Ff,Bc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),jy=Bc("script,style,template");class q_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!hl.hasOwnProperty(e))return this.sanitizedSomething=!0,!jy.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,l=o.toLowerCase();if(!Wy.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=s.value;Wm[l]&&(u=lg(u)),Ff[l]&&(i=u,u=(i=String(i)).split(",").map(t=>lg(t.trim())).join(", ")),this.buf.push(" ",o,'="',$y(u),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();hl.hasOwnProperty(e)&&!Gm.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push($y(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const X_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Y_=/([^\#-~ |!])/g;function $y(i){return i.replace(/&/g,"&amp;").replace(X_,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Y_,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let jm;function Bv(i,t){let e=null;try{jm=jm||function _d(i){const t=new Xu(i);return function qh(){try{return!!(new window.DOMParser).parseFromString(vc(""),"text/html")}catch{return!1}}()?new sg(t):t}(i);let n=t?String(t):"";e=jm.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=jm.getInertBodyElement(n)}while(n!==s);return vc((new q_).sanitizeChildren(Au(e)||e))}finally{if(e){const n=Au(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Au(i){return"content"in i&&function K_(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var pa=(()=>((pa=pa||{})[pa.NONE=0]="NONE",pa[pa.HTML=1]="HTML",pa[pa.STYLE=2]="STYLE",pa[pa.SCRIPT=3]="SCRIPT",pa[pa.URL=4]="URL",pa[pa.RESOURCE_URL=5]="RESOURCE_URL",pa))();function Aa(i){const t=sm();return t?md(t.sanitize(pa.HTML,i)||""):ua(i,"HTML")?md(bl(i)):Bv(function Vm(){return void 0!==yh?yh:typeof document<"u"?document:void 0}(),Ps(i))}function Xh(i){const t=sm();return t?t.sanitize(pa.URL,i)||"":ua(i,"URL")?bl(i):lg(Ps(i))}function sm(){const i=Ci();return i&&i[12]}const Uv=new rr("ENVIRONMENT_INITIALIZER"),Yy=new rr("INJECTOR",-1),Ky=new rr("INJECTOR_DEF_TYPES");class a{get(t,e=bu){if(e===bu){const n=new Error(`NullInjectorError: No provider for ${ms(t)}!`);throw n.name="NullInjectorError",n}return e}}function h(...i){return{\u0275providers:g(0,i)}}function g(i,...t){const e=[],n=new Set;let r;return yu(t,s=>{const o=s;x(o,e,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&y(r,e),e}function y(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];yu(r,s=>{t.push(s)})}}function x(i,t,e,n){if(!(i=ss(i)))return!1;let r=null,s=ha(i);const o=!s&&Zo(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const u=i.ngModule;if(s=ha(u),!s)return!1;r=u}const l=n.has(r);if(o){if(l)return!1;if(n.add(r),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const p of u)x(p,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let p;n.add(r);try{yu(s.imports,v=>{x(v,t,e,n)&&(p||(p=[]),p.push(v))})}finally{}void 0!==p&&y(p,t)}if(!l){const p=ip(r)||(()=>new r);t.push({provide:r,useFactory:p,deps:_o},{provide:Ky,useValue:r,multi:!0},{provide:Uv,useValue:()=>Yn(r),multi:!0})}const u=s.providers;null==u||l||yu(u,v=>{t.push(v)})}}return r!==i&&void 0!==i.providers}const F=gs({provide:String,useValue:gs});function H(i){return null!==i&&"object"==typeof i&&F in i}function ve(i){return"function"==typeof i}const Ue=new rr("Set Injector scope."),We={},je={};let pt;function ft(){return void 0===pt&&(pt=new a),pt}class ut{}class Et extends ut{constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fi(t,o=>this.processProvider(o)),this.records.set(Yy,fn(void 0,this)),r.has("environment")&&this.records.set(ut,fn(void 0,this));const s=this.records.get(Ue);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ky.multi,_o,os.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Wu(this),n=Nu(void 0);try{return t()}finally{Wu(e),Nu(n)}}get(t,e=bu,n=os.Default){this.assertNotDestroyed();const r=Wu(this),s=Nu(void 0);try{if(!(n&os.SkipSelf)){let l=this.records.get(t);if(void 0===l){const u=function Nn(i){return"function"==typeof i||"object"==typeof i&&i instanceof rr}(t)&&Mc(t);l=u&&this.injectableDefInScope(u)?fn(Mt(t),We):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(n&os.Self?ft():this.parent).get(t,e=n&os.Optional&&e===bu?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Df]=o[Df]||[]).unshift(ms(t)),r)throw o;return function Zg(i,t,e,n){const r=i[Df];throw t[Wh]&&r.unshift(t[Wh]),i.message=function pp(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=ms(t);if(Array.isArray(t))r=t.map(ms).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let l=t[o];s.push(o+":"+("string"==typeof l?JSON.stringify(l):ms(l)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(mc,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[Df]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{Nu(s),Wu(r)}}resolveInjectorInitializers(){const t=Wu(this),e=Nu(void 0);try{const n=this.get(Uv.multi,_o,os.Self);for(const r of n)r()}finally{Wu(t),Nu(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(ms(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _i(205,!1)}processProvider(t){let e=ve(t=ss(t))?t:ss(t&&t.provide);const n=function qt(i){return H(i)?fn(void 0,i.useValue):fn(yn(i),We)}(t);if(ve(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=fn(void 0,We,!0),r.factory=()=>Kd(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===We&&(e.value=je,e.value=e.factory()),"object"==typeof e.value&&e.value&&function bn(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ss(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Mt(i){const t=Mc(i),e=null!==t?t.factory:ip(i);if(null!==e)return e;if(i instanceof rr)throw new _i(204,!1);if(i instanceof Function)return function nn(i){const t=i.length;if(t>0)throw Sl(t,"?"),new _i(204,!1);const e=function B_(i){const t=i&&(i[qf]||i[wm]);if(t){const e=function Ta(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new _i(204,!1)}function yn(i,t,e){let n;if(ve(i)){const r=ss(i);return ip(r)||Mt(r)}if(H(i))n=()=>ss(i.useValue);else if(function se(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Kd(i.deps||[]));else if(function le(i){return!(!i||!i.useExisting)}(i))n=()=>Yn(ss(i.useExisting));else{const r=ss(i&&(i.useClass||i.provide));if(!function an(i){return!!i.deps}(i))return ip(r)||Mt(r);n=()=>new r(...Kd(i.deps))}return n}function fn(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function Mi(i){return!!i.\u0275providers}function fi(i,t){for(const e of i)Array.isArray(e)?fi(e,t):Mi(e)?fi(e.\u0275providers,t):t(e)}class tn{}class xi{resolveComponentFactory(t){throw function Kn(i){const t=Error(`No component factory found for ${ms(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let mi=(()=>{class i{}return i.NULL=new xi,i})();function ar(){return Hi(It(),Ci())}function Hi(i,t){return new Zn(hh(i,t))}let Zn=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=ar,i})();function qn(i){return i instanceof Zn?i.nativeElement:i}class c{}let d=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function m(){const i=Ci(),e=Lc(It().index,i);return(Jc(e)?e:i)[11]}(),i})(),_=(()=>{class i{}return i.\u0275prov=Zi({token:i,providedIn:"root",factory:()=>null}),i})();class C{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const A=new C("14.1.3"),E={};function Kt(i){return i.ngOriginalError}class dt{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Kt(t);for(;e&&Kt(e);)e=Kt(e);return e||null}}const Rn=new Map;let ei=0;const lr="__ngContext__";function Wr(i,t){Jc(t)?(i[lr]=t[20],function Ii(i){Rn.set(i[20],i)}(t)):i[lr]=t}function Jr(i){const t=i[lr];return"number"==typeof t?function vi(i){return Rn.get(i)||null}(t):t||null}function mr(i){const t=Jr(i);return t?Jc(t)?t:t.lView:null}const zt=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(oo))();function Qn(i){return i.ownerDocument.defaultView}function gn(i){return i instanceof Function?i():i}var Vi=(()=>((Vi=Vi||{})[Vi.Important=1]="Important",Vi[Vi.DashCase=2]="DashCase",Vi))();function nr(i,t){return undefined(i,t)}function qo(i){const t=i[3];return Rh(t)?t[3]:t}function Er(i){return Hl(i[13])}function Wa(i){return Hl(i[4])}function Hl(i){for(;null!==i&&!Rh(i);)i=i[4];return i}function zc(i,t,e,n,r){if(null!=n){let s,o=!1;Rh(n)?s=n:Jc(n)&&(o=!0,n=n[0]);const l=sa(n);0===i&&null!==e?null==r?n0(t,e,l):ug(t,e,l,r||null,!0):1===i&&null!==e?ug(t,e,l,r||null,!0):2===i?function Nx(i,t,e){const n=Gv(i,t);n&&function nf(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,l,o):3===i&&t.destroyNode(l),null!=s&&function dT(i,t,e,n,r){const s=e[7];s!==sa(e)&&zc(t,i,n,s,r);for(let l=10;l<e.length;l++){const u=e[l];xu(u[1],u,i,t,n,s)}}(t,i,s,e,r)}}function ic(i,t,e){return i.createElement(t,e)}function J_(i,t){const e=i[9],n=e.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,Ug(r,-1)),e.splice(n,1)}function e0(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&J_(r,n),t>0&&(i[e-1][4]=n[4]);const s=Gu(i,10+t);!function Uc(i,t){xu(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function na(i,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&xu(i,t,e,3,null,null),function Qs(i){let t=i[13];if(!t)return t0(i[1],i);for(;t;){let e=null;if(Jc(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)Jc(t)&&t0(t[1],t),t=t[3];null===t&&(t=i),Jc(t)&&t0(t[1],t),e=t&&t[4]}t=e}}(t)}}function t0(i,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function cg(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Xp)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const l=r[s[o]],u=s[o+1];try{u.call(l)}finally{}}else try{s.call(r)}finally{}}}}(i,t),function bb(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],l="function"==typeof o?o(t):sa(t[o]),u=n[r=e[s+2]],p=e[s+3];"boolean"==typeof p?l.removeEventListener(e[s],u,p):p>=0?n[r=p]():n[r=-p].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[7]=null}}(i,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Rh(t[3])){e!==t[3]&&J_(e,t);const n=t[19];null!==n&&n.detachView(i)}!function pi(i){Rn.delete(i[20])}(t)}}function Zy(i,t,e){return function Hv(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===Ma.None||r===Ma.Emulated)return null}return hh(n,e)}(i,t.parent,e)}function ug(i,t,e,n,r){i.insertBefore(t,e,n,r)}function n0(i,t,e){i.appendChild(t,e)}function Cb(i,t,e,n,r){null!==n?ug(i,t,e,n,r):n0(i,t,e)}function Gv(i,t){return i.parentNode(t)}function Cd(i,t,e){return Ox(i,t,e)}let Ox=function Ab(i,t,e){return 40&i.type?hh(i,e):null};function Ib(i,t,e,n){const r=Zy(i,n,t),s=t[11],l=Cd(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let u=0;u<e.length;u++)Cb(s,r,e[u],l,!1);else Cb(s,r,e,l,!1)}function Qy(i,t){if(null!==t){const e=t.type;if(3&e)return hh(t,i);if(4&e)return hw(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return Qy(i,n);{const r=i[t.index];return Rh(r)?hw(-1,r):sa(r)}}if(32&e)return nr(t,i)()||sa(i[t.index]);{const n=Fx(i,t);return null!==n?Array.isArray(n)?n[0]:Qy(qo(i[16]),n):Qy(i,t.next)}}return null}function Fx(i,t){return null!==t?i[16][6].projection[t.projection]:null}function hw(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return Qy(n,r)}return t[7]}function Gc(i,t,e,n,r,s,o){for(;null!=e;){const l=n[e.index],u=e.type;if(o&&0===t&&(l&&Wr(sa(l),n),e.flags|=4),64!=(64&e.flags))if(8&u)Gc(i,t,e.child,n,r,s,!1),zc(t,i,r,l,s);else if(32&u){const p=nr(e,n);let v;for(;v=p();)zc(t,i,r,v,s);zc(t,i,r,l,s)}else 16&u?Bx(i,t,n,e,r,s):zc(t,i,r,l,s);e=o?e.projectionNext:e.next}}function xu(i,t,e,n,r,s){Gc(e,n,i.firstChild,t,r,s,!1)}function Bx(i,t,e,n,r,s){const o=e[16],u=o[6].projection[n.projection];if(Array.isArray(u))for(let p=0;p<u.length;p++)zc(t,i,r,u[p],s);else Gc(i,t,u,o[3],r,s,!0)}function Vx(i,t,e){i.setAttribute(t,"style",e)}function dw(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function Ux(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const Hx="ng-template";function pT(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==Ux(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function Gx(i){return 4===i.type&&i.value!==Hx}function Wx(i,t,e){return t===(4!==i.type||e?i.value:Hx)}function jx(i,t,e){let n=4;const r=i.attrs||[],s=function Jy(i){for(let t=0;t<i.length;t++)if(ll(i[t]))return t;return i.length}(r);let o=!1;for(let l=0;l<t.length;l++){const u=t[l];if("number"!=typeof u){if(!o)if(4&n){if(n=2|1&n,""!==u&&!Wx(i,u,e)||""===u&&1===t.length){if(Ap(n))return!1;o=!0}}else{const p=8&n?u:t[++l];if(8&n&&null!==i.attrs){if(!pT(i.attrs,p,e)){if(Ap(n))return!1;o=!0}continue}const w=gT(8&n?"class":u,r,Gx(i),e);if(-1===w){if(Ap(n))return!1;o=!0;continue}if(""!==p){let I;I=w>s?"":r[w+1].toLowerCase();const T=8&n?I:null;if(T&&-1!==Ux(T,p,0)||2&n&&p!==I){if(Ap(n))return!1;o=!0}}}}else{if(!o&&!Ap(n)&&!Ap(u))return!1;if(o&&Ap(u))continue;o=!1,n=u|1&n}}return Ap(n)||o}function Ap(i){return 0==(1&i)}function gT(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let l=t[++r];for(;"string"==typeof l;)l=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function vT(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function $x(i,t,e=!1){for(let n=0;n<t.length;n++)if(jx(i,t[n],e))return!0;return!1}function yT(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function qx(i,t){return i?":not("+t.trim()+")":t}function _T(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const l=i[++e];r+="["+o+(l.length>0?'="'+l+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Ap(o)&&(t+=qx(s,r),r=""),n=o,s=s||!Ap(n);e++}return""!==r&&(t+=qx(s,r)),t}const Xs={};function Se(i){Yx(Ms(),Ci(),dc()+i,!1)}function Yx(i,t,e,n){if(!n)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&Ud(t,s,e)}else{const s=i.preOrderHooks;null!==s&&$g(t,s,0,e)}wf(e)}function Jx(i,t=null,e=null,n){const r=eI(i,t,e,n);return r.resolveInjectorInitializers(),r}function eI(i,t=null,e=null,n,r=new Set){const s=[e||_o,h(i)];return n=n||("object"==typeof i?void 0:ms(i)),new Et(s,t||ft(),n||null,r)}let Iu=(()=>{class i{static create(e,n){if(Array.isArray(e))return Jx({name:""},n,e,"");{const r=e.name??"";return Jx({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=bu,i.NULL=new a,i.\u0275prov=Zi({token:i,providedIn:"any",factory:()=>Yn(Yy)}),i.__NG_ELEMENT_ID__=-1,i})();function Xt(i,t=os.Default){const e=Ci();return null===e?Yn(i,t):jd(It(),e,ss(i),t)}function bw(){throw new Error("invalid")}function r0(i,t){return i<<17|t<<2}function xp(i){return i>>17&32767}function s0(i){return 2|i}function Ip(i){return(131068&i)>>2}function Cw(i,t){return-131069&i|t<<2}function ww(i){return 1|i}function sk(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];if(-1!==s){const o=i.data[s];Hg(r),o.contentQueries(2,t[s],s)}}}function pI(i,t,e,n,r,s,o,l,u,p,v){const w=t.blueprint.slice();return w[0]=r,w[2]=76|n,(null!==v||i&&1024&i[2])&&(w[2]|=1024),Kr(w),w[3]=w[15]=i,w[8]=e,w[10]=o||i&&i[10],w[11]=l||i&&i[11],w[12]=u||i&&i[12]||null,w[9]=p||i&&i[9]||null,w[6]=s,w[20]=function di(){return ei++}(),w[21]=v,w[16]=2==t.type?i[16]:w,w}function Db(i,t,e,n,r){let s=i.data[t];if(null===s)s=function UT(i,t,e,n,r){const s=No(),o=ks(),u=i.data[t]=function K6(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(i,t,e,n,r),function Bd(){return rs.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function Mo(){const i=rs.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return oa(s,!0),s}function Lb(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function gI(i,t,e){Gg(t);try{const n=i.viewQuery;null!==n&&KT(1,n,e);const r=i.template;null!==r&&ok(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&sk(i,t),i.staticViewQueries&&KT(2,i.viewQuery,e);const s=i.components;null!==s&&function $6(i,t){for(let e=0;e<t.length;e++)dW(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,Ua()}}function Sw(i,t,e,n){const r=t[2];if(128!=(128&r)){Gg(t);try{Kr(t),function gr(i){return rs.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&ok(i,t,e,2,n);const o=3==(3&r);if(o){const p=i.preOrderCheckHooks;null!==p&&Ud(t,p,null)}else{const p=i.preOrderHooks;null!==p&&$g(t,p,0,null),Fh(t,0)}if(function uW(i){for(let t=Er(i);null!==t;t=Wa(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n],s=r[3];0==(512&r[2])&&Ug(s,1),r[2]|=512}}}(t),function cW(i){for(let t=Er(i);null!==t;t=Wa(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Fo(n)&&Sw(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&sk(i,t),o){const p=i.contentCheckHooks;null!==p&&Ud(t,p)}else{const p=i.contentHooks;null!==p&&$g(t,p,1),Fh(t,1)}!function fI(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)wf(~r);else{const s=r,o=e[++n],l=e[++n];zd(o,s),l(2,t[s])}}}finally{wf(-1)}}(i,t);const l=i.components;null!==l&&function j6(i,t){for(let e=0;e<t.length;e++)hW(i,t[e])}(t,l);const u=i.viewQuery;if(null!==u&&KT(2,u,n),o){const p=i.viewCheckHooks;null!==p&&Ud(t,p)}else{const p=i.viewHooks;null!==p&&$g(t,p,2),Fh(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Ug(t[3],-1))}finally{Ua()}}}function q6(i,t,e,n){const r=t[10],o=bo(t);try{!o&&r.begin&&r.begin(),o&&gI(i,t,n),Sw(i,t,e,n)}finally{!o&&r.end&&r.end()}}function ok(i,t,e,n,r){const s=dc(),o=2&n;try{wf(-1),o&&t.length>22&&Yx(i,t,22,!1),e(n,r)}finally{wf(s)}}function ak(i,t,e){if(wv(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function HT(i,t,e){!zy()||(function tW(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;i.firstCreatePass||$s(e,t),Wr(n,t);const o=e.initialInputs;for(let l=r;l<s;l++){const u=i.data[l],p=Ph(u);p&&oW(t,e,u);const v=tu(t,i,l,e);Wr(v,t),null!==o&&aW(0,l-r,v,u,0,o),p&&(Lc(e.index,t)[8]=v)}}(i,t,e,hh(e,t)),128==(128&e.flags)&&function nW(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function Cf(){return rs.lFrame.currentDirectiveIndex}();try{wf(s);for(let l=n;l<r;l++){const u=i.data[l],p=t[l];Bu(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&pk(u,p)}}finally{wf(-1),Bu(o)}}(i,t,e))}function GT(i,t,e=hh){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],l=-1===o?e(t,i):i[o];i[r++]=l}}}function lk(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=WT(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function WT(i,t,e,n,r,s,o,l,u,p){const v=22+n,w=v+r,I=function X6(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:Xs);return e}(v,w),T="function"==typeof p?p():p;return I[1]={type:i,blueprint:I,template:e,queries:null,viewQuery:l,declTNode:t,data:I.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1}}function ck(i,t,e,n){const r=Ck(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&wk(i).push(n,r.length-1))}function uk(i,t,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}return e}function hk(i,t){const n=t.directiveEnd,r=i.data,s=t.attrs,o=[];let l=null,u=null;for(let p=t.directiveStart;p<n;p++){const v=r[p],w=v.inputs,I=null===s||Gx(t)?null:lW(w,s);o.push(I),l=uk(w,p,l),u=uk(v.outputs,p,u)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=16),l.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=l,t.outputs=u}function Tp(i,t,e,n,r,s,o,l){const u=hh(t,e);let v,p=t.inputs;!l&&null!=p&&(v=p[n])?(ZT(i,e,v,n,r),kg(t)&&dk(e,t.index)):3&t.type&&(n=function Z6(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(u,n,r))}function dk(i,t){const e=Lc(t,i);16&e[2]||(e[2]|=32)}function jT(i,t,e,n){let r=!1;if(zy()){const s=function iW(i,t,e){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];$x(e,o.selectors,!1)&&(r||(r=[]),up($s(e,t),i,o.type),Ph(o)?(gk(i,e),r.unshift(o)):r.push(o))}return r}(i,t,e),o=null===n?null:{"":-1};if(null!==s){r=!0,mk(e,i.data.length,s.length);for(let v=0;v<s.length;v++){const w=s[v];w.providersResolver&&w.providersResolver(w)}let l=!1,u=!1,p=Lb(i,t,s.length,null);for(let v=0;v<s.length;v++){const w=s[v];e.mergedAttrs=Nh(e.mergedAttrs,w.hostAttrs),vk(i,e,t,p,w),sW(p,w,o),null!==w.contentQueries&&(e.flags|=8),(null!==w.hostBindings||null!==w.hostAttrs||0!==w.hostVars)&&(e.flags|=128);const I=w.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),l=!0),!u&&(I.ngOnChanges||I.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),u=!0),p++}hk(i,e)}o&&function rW(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new _i(-301,!1);n.push(t[r],s)}}}(e,n,o)}return e.mergedAttrs=Nh(e.mergedAttrs,e.attrs),r}function fk(i,t,e,n,r,s){const o=s.hostBindings;if(o){let l=i.hostBindingOpCodes;null===l&&(l=i.hostBindingOpCodes=[]);const u=~t.index;(function eW(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(l)!=u&&l.push(u),l.push(n,r,o)}}function pk(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function gk(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function sW(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Ph(t)&&(e[""]=i)}}function mk(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function vk(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=ip(r.type)),o=new Xp(s,Ph(r),Xt);i.blueprint[n]=o,e[n]=o,fk(i,t,0,n,Lb(i,e,r.hostVars,Xs),r)}function oW(i,t,e){const n=hh(t,i),r=lk(e),s=i[10],o=mI(i,pI(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=o}function Xm(i,t,e,n,r,s){const o=hh(i,t);!function $T(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const l=null==o?Ps(s):o(s,n||"",r);i.setAttribute(t,r,l,e)}}(t[11],o,s,i.value,e,n,r)}function aW(i,t,e,n,r,s){const o=s[t];if(null!==o){const l=n.setInput;for(let u=0;u<o.length;){const p=o[u++],v=o[u++],w=o[u++];null!==l?n.setInput(e,w,p,v):e[v]=w}}}function lW(i,t){let e=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,i[r],t[n+1])),n+=2}else n+=2;else n+=4}return e}function yk(i,t,e,n){return new Array(i,!0,!1,t,null,0,n,e,null,null)}function hW(i,t){const e=Lc(t,i);if(Fo(e)){const n=e[1];48&e[2]?Sw(n,e,n.template,e[8]):e[5]>0&&qT(e)}}function qT(i){for(let n=Er(i);null!==n;n=Wa(n))for(let r=10;r<n.length;r++){const s=n[r];if(Fo(s))if(512&s[2]){const o=s[1];Sw(o,s,o.template,s[8])}else s[5]>0&&qT(s)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Lc(e[n],i);Fo(r)&&r[5]>0&&qT(r)}}function dW(i,t){const e=Lc(t,i),n=e[1];(function fW(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),gI(n,e,e[8])}function mI(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function XT(i){for(;i;){i[2]|=32;const t=qo(i);if(Sm(i)&&!t)return i;i=t}return null}function bk(i){!function _k(i){for(let t=0;t<i.components.length;t++){const e=i.components[t],n=mr(e);if(null!==n){const r=n[1];q6(r,n,r.template,e)}}}(i[8])}function KT(i,t,e){Hg(0),t(i,e)}const gW=(()=>Promise.resolve(null))();function Ck(i){return i[7]||(i[7]=[])}function wk(i){return i.cleanup||(i.cleanup=[])}function xk(i,t){const e=i[9],n=e?e.get(dt,null):null;n&&n.handleError(t)}function ZT(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],l=e[s++],u=t[o],p=i.data[o];null!==p.setInput?p.setInput(u,r,n,l):u[l]=r}}function jv(i,t,e){const n=Vg(t,i);!function Nf(i,t,e){i.setValue(t,e)}(i[11],n,e)}function vI(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const l=t[o];"number"==typeof l?s=l:1==s?r=Ya(r,l):2==s&&(n=Ya(n,l+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function yI(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(sa(s)),Rh(s))for(let l=10;l<s.length;l++){const u=s[l],p=u[1].firstChild;null!==p&&yI(u[1],u,p,n)}const o=e.type;if(8&o)yI(i,t,e.child,n);else if(32&o){const l=nr(e,t);let u;for(;u=l();)n.push(u)}else if(16&o){const l=Fx(t,e);if(Array.isArray(l))n.push(...l);else{const u=qo(t[16]);yI(u[1],u,l,n,!0)}}e=r?e.projectionNext:e.next}return n}class Ew{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return yI(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Rh(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(e0(t,n),Gu(e,n))}this._attachedToViewContainer=!1}na(this._lView[1],this._lView)}onDestroy(t){ck(this._lView[1],this._lView,null,t)}markForCheck(){XT(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function YT(i,t,e){const n=t[10];n.begin&&n.begin();try{Sw(i,t,i.template,e)}catch(r){throw xk(t,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _i(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Hc(i,t){xu(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new _i(902,!1);this._appRef=t}}class mW extends Ew{constructor(t){super(t),this._view=t}detectChanges(){bk(this._view)}checkNoChanges(){}get context(){return null}}class QT extends mi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Zo(t);return new Tw(e,this.ngModule)}}function Ik(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class yW{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){const r=this.injector.get(t,E,n);return r!==E||e===E?r:this.parentInjector.get(t,e,n)}}class Tw extends tn{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function bT(i){return i.map(_T).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ik(this.componentDef.inputs)}get outputs(){return Ik(this.componentDef.outputs)}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof ut?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new yW(t,s):t,l=o.get(c,null);if(null===l)throw new _i(407,!1);const u=o.get(_,null),p=l.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=n?function Y6(i,t,e){return i.selectRootElement(t,e===Ma.ShadowDom)}(p,n,this.componentDef.encapsulation):ic(l.createRenderer(null,this.componentDef),v,function vW(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(v)),I=this.componentDef.onPush?288:272,T=function AW(i,t){return{components:[],scheduler:i||zt,clean:gW,playerHandler:t||null,flags:0}}(),k=WT(0,null,null,1,0,null,null,null,null,null),W=pI(null,k,T,I,null,null,l,p,u,o,null);let K,he;Gg(W);try{const Te=function CW(i,t,e,n,r,s){const o=e[1];e[22]=i;const u=Db(o,22,2,"#host",null),p=u.mergedAttrs=t.hostAttrs;null!==p&&(vI(u,p,!0),null!==i&&(Yp(r,i,p),null!==u.classes&&dw(r,i,u.classes),null!==u.styles&&Vx(r,i,u.styles)));const v=n.createRenderer(i,t),w=pI(e,lk(t),null,t.onPush?32:16,e[22],u,n,v,s||null,null,null);return o.firstCreatePass&&(up($s(u,e),o,t.type),gk(o,u),mk(u,e.length,1)),mI(e,w),e[22]=w}(w,this.componentDef,W,l,p);if(w)if(n)Yp(p,w,["ng-version",A.full]);else{const{attrs:Ae,classes:Le}=function Xx(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!Ap(r))break;r=s}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);Ae&&Yp(p,w,Ae),Le&&Le.length>0&&dw(p,w,Le.join(" "))}if(he=Cs(k,22),void 0!==e){const Ae=he.projection=[];for(let Le=0;Le<this.ngContentSelectors.length;Le++){const tt=e[Le];Ae.push(null!=tt?Array.from(tt):null)}}K=function wW(i,t,e,n,r){const s=e[1],o=function J6(i,t,e){const n=It();i.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),vk(i,n,t,Lb(i,t,1,null),e),hk(i,n));const r=tu(t,i,n.directiveStart,n);Wr(r,t);const s=hh(n,t);return s&&Wr(s,t),r}(s,e,t);if(n.components.push(o),i[8]=o,null!==r)for(const u of r)u(o,t);if(t.contentQueries){const u=It();t.contentQueries(1,o,u.directiveStart)}const l=It();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(wf(l.index),fk(e[1],l,0,l.directiveStart,l.directiveEnd,t),pk(t,o)),o}(Te,this.componentDef,W,T,[xW]),gI(k,W,null)}finally{Ua()}return new bW(this.componentType,K,Hi(he,W),W,he)}}class bW extends class Jt{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new mW(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;ZT(s[1],s,r,t,e),dk(s,this._tNode.index)}}get injector(){return new ph(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function xW(){const i=It();xf(Ci()[1],i)}function Ja(i){let t=function Sk(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(Ph(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new _i(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=JT(i.inputs),o.declaredInputs=JT(i.declaredInputs),o.outputs=JT(i.outputs);const l=r.hostBindings;l&&TW(i,l);const u=r.viewQuery,p=r.contentQueries;if(u&&SW(i,u),p&&EW(i,p),Ea(i.inputs,r.inputs),Ea(i.declaredInputs,r.declaredInputs),Ea(i.outputs,r.outputs),Ph(r)&&r.data.animation){const v=i.data;v.animation=(v.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const l=s[o];l&&l.ngInherit&&l(i),l===Ja&&(e=!1)}}t=Object.getPrototypeOf(t)}!function IW(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Nh(r.hostAttrs,e=Nh(e,r.hostAttrs))}}(n)}function JT(i){return i===Fd?{}:i===_o?[]:i}function SW(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function EW(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function TW(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let _I=null;function o0(){if(!_I){const i=oo.Symbol;if(i&&i.iterator)_I=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(_I=n)}}}return _I}function Mw(i){return!!eM(i)&&(Array.isArray(i)||!(i instanceof Map)&&o0()in i)}function eM(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ym(i,t,e){return i[t]=e}function Dw(i,t){return i[t]}function Ad(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function a0(i,t,e,n){const r=Ad(i,t,e);return Ad(i,t+1,n)||r}function bI(i,t,e,n,r){const s=a0(i,t,e,n);return Ad(i,t+2,r)||s}function hg(i,t,e,n,r,s){const o=a0(i,t,e,n);return a0(i,t+2,r,s)||o}function vr(i,t,e,n){const r=Ci();return Ad(r,Oh(),t)&&(Ms(),Xm(Ha(),r,i,t,e,n)),vr}function Pb(i,t,e,n){return Ad(i,Oh(),e)?t+Ps(e)+n:Xs}function kb(i,t,e,n,r,s){const l=a0(i,function Va(){return rs.lFrame.bindingIndex}(),e,r);return vl(2),l?t+Ps(e)+n+Ps(r)+s:Xs}function Xe(i,t,e,n,r,s,o,l){const u=Ci(),p=Ms(),v=i+22,w=p.firstCreatePass?function NW(i,t,e,n,r,s,o,l,u){const p=t.consts,v=Db(t,i,4,o||null,qs(p,l));jT(t,e,v,qs(p,u)),xf(t,v);const w=v.tViews=WT(2,v,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,p);return null!==t.queries&&(t.queries.template(t,v),w.queries=t.queries.embeddedTView(v)),v}(v,p,u,t,e,n,r,s,o):p.data[v];oa(w,!1);const I=u[11].createComment("");Ib(p,u,I,w),Wr(I,u),mI(u,u[v]=yk(I,u,I,w)),Og(w)&&HT(p,u,w),null!=o&&GT(u,w,l)}function ao(i){return ml(function Cr(){return rs.lFrame.contextLView}(),22+i)}function de(i,t,e){const n=Ci();return Ad(n,Oh(),t)&&Tp(Ms(),Ha(),n,i,t,n[11],e,!1),de}function tM(i,t,e,n,r){const o=r?"class":"style";ZT(i,e,t.inputs[o],o,n)}function Qe(i,t,e,n){const r=Ci(),s=Ms(),o=22+i,l=r[11],u=r[o]=ic(l,t,function Af(){return rs.lFrame.currentNamespace}()),p=s.firstCreatePass?function zW(i,t,e,n,r,s,o){const l=t.consts,p=Db(t,i,2,r,qs(l,s));return jT(t,e,p,qs(l,o)),null!==p.attrs&&vI(p,p.attrs,!1),null!==p.mergedAttrs&&vI(p,p.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,p),p}(o,s,r,0,t,e,n):s.data[o];oa(p,!0);const v=p.mergedAttrs;null!==v&&Yp(l,u,v);const w=p.classes;null!==w&&dw(l,u,w);const I=p.styles;return null!==I&&Vx(l,u,I),64!=(64&p.flags)&&Ib(s,r,u,p),0===function ad(){return rs.lFrame.elementDepthCount}()&&Wr(u,r),function $p(){rs.lFrame.elementDepthCount++}(),Og(p)&&(HT(s,r,p),ak(s,p,r)),null!==n&&GT(r,p),Qe}function nt(){let i=It();ks()?qp():(i=i.parent,oa(i,!1));const t=i;!function W_(){rs.lFrame.elementDepthCount--}();const e=Ms();return e.firstCreatePass&&(xf(e,i),wv(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function Pv(i){return 0!=(16&i.flags)}(t)&&tM(e,t,Ci(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function j_(i){return 0!=(32&i.flags)}(t)&&tM(e,t,Ci(),t.stylesWithoutHost,!1),nt}function Vn(i,t,e,n){return Qe(i,t,e,n),nt(),Vn}function Ur(i,t,e){const n=Ci(),r=Ms(),s=i+22,o=r.firstCreatePass?function VW(i,t,e,n,r){const s=t.consts,o=qs(s,n),l=Db(t,i,8,"ng-container",o);return null!==o&&vI(l,o,!0),jT(t,e,l,qs(s,r)),null!==t.queries&&t.queries.elementStart(t,l),l}(s,r,n,t,e):r.data[s];oa(o,!0);const l=n[s]=n[11].createComment("");return Ib(r,n,l,o),Wr(l,n),Og(o)&&(HT(r,n,o),ak(r,o,n)),null!=e&&GT(n,o),Ur}function Hr(){let i=It();const t=Ms();return ks()?qp():(i=i.parent,oa(i,!1)),t.firstCreatePass&&(xf(t,i),wv(i)&&t.queries.elementEnd(i)),Hr}function Ni(i,t,e){return Ur(i,t,e),Hr(),Ni}function yi(){return Ci()}function Lw(i){return!!i&&"function"==typeof i.then}const nM=function Fk(i){return!!i&&"function"==typeof i.subscribe};function mn(i,t,e,n){const r=Ci(),s=Ms(),o=It();return function Bk(i,t,e,n,r,s,o,l){const u=Og(n),v=i.firstCreatePass&&wk(i),w=t[8],I=Ck(t);let T=!0;if(3&n.type||l){const K=hh(n,t),he=l?l(K):K,Te=I.length,Ae=l?tt=>l(sa(tt[n.index])):n.index;let Le=null;if(!l&&u&&(Le=function UW(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const l=t[7],u=r[s+2];return l.length>u?l[u]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==Le)(Le.__ngLastListenerFn__||Le).__ngNextListenerFn__=s,Le.__ngLastListenerFn__=s,T=!1;else{s=Vk(n,t,w,s,!1);const tt=e.listen(he,r,s);I.push(s,tt),v&&v.push(r,Ae,Te,Te+1)}}else s=Vk(n,t,w,s,!1);const k=n.outputs;let W;if(T&&null!==k&&(W=k[r])){const K=W.length;if(K)for(let he=0;he<K;he+=2){const _t=t[W[he]][W[he+1]].subscribe(s),Ut=I.length;I.push(s,_t),v&&v.push(r,n.index,Ut,-(Ut+1))}}}(s,r,r[11],o,i,t,0,n),mn}function zk(i,t,e,n){try{return!1!==e(n)}catch(r){return xk(i,r),!1}}function Vk(i,t,e,n,r){return function s(o){if(o===Function)return n;XT(2&i.flags?Lc(i.index,t):t);let u=zk(t,0,n,o),p=s.__ngNextListenerFn__;for(;p;)u=zk(t,0,p,o)&&u,p=p.__ngNextListenerFn__;return r&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function Ce(i=1){return function xl(i){return(rs.lFrame.contextLView=function Vd(i,t){for(;i>0;)t=t[15],i--;return t}(i,rs.lFrame.contextLView))[8]}(i)}function HW(i,t){let e=null;const n=function mT(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?$x(i,s,!0):yT(n,s))return r}else e=r}return e}function Bf(i){const t=Ci()[16][6];if(!t.projection){const n=t.projection=Sl(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?HW(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function su(i,t=0,e){const n=Ci(),r=Ms(),s=Db(r,22+i,16,null,e||null);null===s.projection&&(s.projection=t),qp(),64!=(64&s.flags)&&function hT(i,t,e){Bx(t[11],0,t,e,Zy(i,e,t),Cd(e.parent||t[6],e,t))}(r,n,s)}function l0(i,t,e){return CI(i,"",t,"",e),l0}function CI(i,t,e,n,r){const s=Ci(),o=Pb(s,t,e,n);return o!==Xs&&Tp(Ms(),Ha(),s,i,o,s[11],r,!1),CI}function Yk(i,t,e,n,r){const s=i[e+1],o=null===t;let l=n?xp(s):Ip(s),u=!1;for(;0!==l&&(!1===u||o);){const v=i[l+1];jW(i[l],t)&&(u=!0,i[l+1]=n?ww(v):s0(v)),l=n?xp(v):Ip(v)}u&&(i[e+1]=n?s0(s):ww(s))}function jW(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Do(i,t)>=0}const Yu={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Kk(i){return i.substring(Yu.key,Yu.keyEnd)}function $W(i){return i.substring(Yu.value,Yu.valueEnd)}function Zk(i,t){const e=Yu.textEnd;return e===t?-1:(t=Yu.keyEnd=function YW(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,Yu.key=t,e),Ub(i,t,e))}function Qk(i,t){const e=Yu.textEnd;let n=Yu.key=Ub(i,t,e);return e===n?-1:(n=Yu.keyEnd=function KW(i,t,e){let n;for(;t<e&&(45===(n=i.charCodeAt(t))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)t++;return t}(i,n,e),n=eO(i,n,e),n=Yu.value=Ub(i,n,e),n=Yu.valueEnd=function ZW(i,t,e){let n=-1,r=-1,s=-1,o=t,l=o;for(;o<e;){const u=i.charCodeAt(o++);if(59===u)return l;34===u||39===u?l=o=tO(i,u,o,e):t===o-4&&85===s&&82===r&&76===n&&40===u?l=o=tO(i,41,o,e):u>32&&(l=o),s=r,r=n,n=-33&u}return l}(i,n,e),eO(i,n,e))}function Jk(i){Yu.key=0,Yu.keyEnd=0,Yu.value=0,Yu.valueEnd=0,Yu.textEnd=i.length}function Ub(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function eO(i,t,e,n){return(t=Ub(i,t,e))<e&&t++,t}function tO(i,t,e,n){let r=-1,s=e;for(;s<n;){const o=i.charCodeAt(s++);if(o==t&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function xd(i,t,e){return om(i,t,e,!1),xd}function Mp(i,t){return om(i,t,null,!0),Mp}function no(i){am(rO,QW,i,!1)}function QW(i,t){for(let e=function XW(i){return Jk(i),Qk(i,Ub(i,0,Yu.textEnd))}(t);e>=0;e=Qk(t,e))rO(i,Kk(t),$W(t))}function Fr(i){am(El,Km,i,!0)}function Km(i,t){for(let e=function qW(i){return Jk(i),Zk(i,Ub(i,0,Yu.textEnd))}(t);e>=0;e=Zk(t,e))El(i,Kk(t),!0)}function om(i,t,e,n){const r=Ci(),s=Ms(),o=vl(2);s.firstUpdatePass&&iO(s,i,o,n),t!==Xs&&Ad(r,o,t)&&sO(s,s.data[dc()],r,r[11],i,r[o+1]=function o9(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=ms(bl(i)))),i}(t,e),n,o)}function am(i,t,e,n){const r=Ms(),s=vl(2);r.firstUpdatePass&&iO(r,null,s,n);const o=Ci();if(e!==Xs&&Ad(o,s,e)){const l=r.data[dc()];if(aO(l,n)&&!nO(r,s)){let u=n?l.classesWithoutHost:l.stylesWithoutHost;null!==u&&(e=Ya(u,e||"")),tM(r,l,o,e,n)}else!function s9(i,t,e,n,r,s,o,l){r===Xs&&(r=_o);let u=0,p=0,v=0<r.length?r[0]:null,w=0<s.length?s[0]:null;for(;null!==v||null!==w;){const I=u<r.length?r[u+1]:void 0,T=p<s.length?s[p+1]:void 0;let W,k=null;v===w?(u+=2,p+=2,I!==T&&(k=w,W=T)):null===w||null!==v&&v<w?(u+=2,k=v):(p+=2,k=w,W=T),null!==k&&sO(i,t,e,n,k,W,o,l),v=u<r.length?r[u]:null,w=p<s.length?s[p]:null}}(r,l,o,o[11],o[s+1],o[s+1]=function r9(i,t,e){if(null==e||""===e)return _o;const n=[],r=bl(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}function nO(i,t){return t>=i.expandoStartIndex}function iO(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[dc()],o=nO(i,e);aO(s,n)&&null===t&&!o&&(t=!1),t=function JW(i,t,e,n){const r=function ls(i){const t=rs.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=Rw(e=iM(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=iM(r,i,t,e,n),null===s){let u=function e9(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==Ip(n))return i[xp(n)]}(i,t,n);void 0!==u&&Array.isArray(u)&&(u=iM(null,i,t,u[1],n),u=Rw(u,t.attrs,n),function t9(i,t,e,n){i[xp(e?t.classBindings:t.styleBindings)]=n}(i,t,n,u))}else s=function n9(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=Rw(n,i[s].hostAttrs,e);return Rw(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function GW(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,l=xp(o),u=Ip(o);i[n]=e;let v,p=!1;if(Array.isArray(e)){const w=e;v=w[1],(null===v||Do(w,v)>0)&&(p=!0)}else v=e;if(r)if(0!==u){const I=xp(i[l+1]);i[n+1]=r0(I,l),0!==I&&(i[I+1]=Cw(i[I+1],n)),i[l+1]=function OT(i,t){return 131071&i|t<<17}(i[l+1],n)}else i[n+1]=r0(l,0),0!==l&&(i[l+1]=Cw(i[l+1],n)),l=n;else i[n+1]=r0(u,0),0===l?l=n:i[u+1]=Cw(i[u+1],n),u=n;p&&(i[n+1]=s0(i[n+1])),Yk(i,v,n,!0),Yk(i,v,n,!1),function WW(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Do(s,t)>=0&&(e[n+1]=ww(e[n+1]))}(t,v,i,n,s),o=r0(l,u),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function iM(i,t,e,n,r){let s=null;const o=e.directiveEnd;let l=e.directiveStylingLast;for(-1===l?l=e.directiveStart:l++;l<o&&(s=t[l],n=Rw(n,s.hostAttrs,r),s!==i);)l++;return null!==i&&(e.directiveStylingLast=l),n}function Rw(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),El(i,o,!!e||t[++s]))}return void 0===i?null:i}function rO(i,t,e){El(i,t,bl(e))}function sO(i,t,e,n,r,s,o,l){if(!(3&t.type))return;const u=i.data,p=u[l+1];wI(function cI(i){return 1==(1&i)}(p)?oO(u,t,e,r,Ip(p),o):void 0)||(wI(s)||function lI(i){return 2==(2&i)}(p)&&(s=oO(u,null,e,r,l,o)),function zx(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:Vi.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Vi.Important),i.setStyle(e,n,r,s))}}(n,o,Vg(dc(),e),r,s))}function oO(i,t,e,n,r,s){const o=null===t;let l;for(;r>0;){const u=i[r],p=Array.isArray(u),v=p?u[1]:u,w=null===v;let I=e[r+1];I===Xs&&(I=w?_o:void 0);let T=w?pc(I,n):v===n?I:void 0;if(p&&!wI(T)&&(T=pc(u,n)),wI(T)&&(l=T,o))return l;const k=i[r+1];r=o?xp(k):Ip(k)}if(null!==t){let u=s?t.residualClasses:t.residualStyles;null!=u&&(l=pc(u,n))}return l}function wI(i){return void 0!==i}function aO(i,t){return 0!=(i.flags&(t?16:32))}function ci(i,t=""){const e=Ci(),n=Ms(),r=i+22,s=n.firstCreatePass?Db(n,r,1,t,null):n.data[r],o=e[r]=function Cp(i,t){return i.createText(t)}(e[11],t);Ib(n,e,o,s),oa(s,!1)}function is(i){return _c("",i,""),is}function _c(i,t,e){const n=Ci(),r=Pb(n,i,t,e);return r!==Xs&&jv(n,dc(),r),_c}function AI(i,t,e,n,r){const s=Ci(),o=kb(s,i,t,e,n,r);return o!==Xs&&jv(s,dc(),o),AI}const c0=void 0;var S9=["en",[["a","p"],["AM","PM"],c0],[["AM","PM"],c0,c0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],c0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],c0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",c0,"{1} 'at' {0}",c0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function I9(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Hb={};function rf(i){const t=function E9(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=EO(t);if(e)return e;const n=t.split("-")[0];if(e=EO(n),e)return e;if("en"===n)return S9;throw new _i(701,!1)}function EO(i){return i in Hb||(Hb[i]=oo.ng&&oo.ng.common&&oo.ng.common.locales&&oo.ng.common.locales[i]),Hb[i]}var Gr=(()=>((Gr=Gr||{})[Gr.LocaleId=0]="LocaleId",Gr[Gr.DayPeriodsFormat=1]="DayPeriodsFormat",Gr[Gr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gr[Gr.DaysFormat=3]="DaysFormat",Gr[Gr.DaysStandalone=4]="DaysStandalone",Gr[Gr.MonthsFormat=5]="MonthsFormat",Gr[Gr.MonthsStandalone=6]="MonthsStandalone",Gr[Gr.Eras=7]="Eras",Gr[Gr.FirstDayOfWeek=8]="FirstDayOfWeek",Gr[Gr.WeekendRange=9]="WeekendRange",Gr[Gr.DateFormat=10]="DateFormat",Gr[Gr.TimeFormat=11]="TimeFormat",Gr[Gr.DateTimeFormat=12]="DateTimeFormat",Gr[Gr.NumberSymbols=13]="NumberSymbols",Gr[Gr.NumberFormats=14]="NumberFormats",Gr[Gr.CurrencyCode=15]="CurrencyCode",Gr[Gr.CurrencySymbol=16]="CurrencySymbol",Gr[Gr.CurrencyName=17]="CurrencyName",Gr[Gr.Currencies=18]="Currencies",Gr[Gr.Directionality=19]="Directionality",Gr[Gr.PluralCase=20]="PluralCase",Gr[Gr.ExtraData=21]="ExtraData",Gr))();const Gb="en-US";let TO=Gb;function oM(i,t,e,n,r){if(i=ss(i),Array.isArray(i))for(let s=0;s<i.length;s++)oM(i[s],t,e,n,r);else{const s=Ms(),o=Ci();let l=ve(i)?i:ss(i.provide),u=yn(i);const p=It(),v=1048575&p.providerIndexes,w=p.directiveStart,I=p.providerIndexes>>20;if(ve(i)||!i.multi){const T=new Xp(u,r,Xt),k=lM(l,t,r?v:v+I,w);-1===k?(up($s(p,o),s,l),aM(s,i,t.length),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(T),o.push(T)):(e[k]=T,o[k]=T)}else{const T=lM(l,t,v+I,w),k=lM(l,t,v,v+I),W=T>=0&&e[T],K=k>=0&&e[k];if(r&&!K||!r&&!W){up($s(p,o),s,l);const he=function xj(i,t,e,n,r){const s=new Xp(i,e,Xt);return s.multi=[],s.index=t,s.componentProviders=0,JO(s,r,n&&!e),s}(r?Aj:wj,e.length,r,n,u);!r&&K&&(e[k].providerFactory=he),aM(s,i,t.length,0),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(he),o.push(he)}else aM(s,i,T>-1?T:k,JO(e[r?k:T],u,!r&&n));!r&&n&&K&&e[k].componentProviders++}}}function aM(i,t,e,n){const r=ve(t),s=function we(i){return!!i.useClass}(t);if(r||s){const u=(s?ss(t.useClass):t).prototype.ngOnDestroy;if(u){const p=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const v=p.indexOf(e);-1===v?p.push(e,[n,u]):p[v+1].push(n,u)}else p.push(e,u)}}}function JO(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function lM(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function wj(i,t,e,n){return cM(this.multi,[])}function Aj(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,l=tu(e,e[1],this.providerFactory.index,n);s=l.slice(0,o),cM(r,s);for(let u=o;u<l.length;u++)s.push(l[u])}else s=[],cM(r,s);return s}function cM(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function Ao(i,t=[]){return e=>{e.providersResolver=(n,r)=>function Cj(i,t,e){const n=Ms();if(n.firstCreatePass){const r=Ph(i);oM(e,n.data,n.blueprint,r,!0),oM(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class u0{}class eF{}class tF extends u0{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new QT(this);const n=fu(t);this._bootstrapComponents=gn(n.bootstrap),this._r3Injector=eI(t,e,[{provide:u0,useValue:this},{provide:mi,useValue:this.componentFactoryResolver}],ms(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class uM extends eF{constructor(t){super(),this.moduleType=t}create(t){return new tF(this.moduleType,t)}}class Sj extends u0{constructor(t,e,n){super(),this.componentFactoryResolver=new QT(this),this.instance=null;const r=new Et([...t,{provide:u0,useValue:this},{provide:mi,useValue:this.componentFactoryResolver}],e||ft(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function TI(i,t,e=null){return new Sj(i,t,e).injector}function uo(i,t,e){const n=Bo()+i,r=Ci();return r[n]===Xs?Ym(r,n,e?t.call(e):t()):Dw(r,n)}function bi(i,t,e,n){return cF(Ci(),Bo(),i,t,e,n)}function as(i,t,e,n,r){return function uF(i,t,e,n,r,s,o){const l=t+e;return a0(i,l,r,s)?Ym(i,l+2,o?n.call(o,r,s):n(r,s)):Nw(i,l+2)}(Ci(),Bo(),i,t,e,n,r)}function Su(i,t,e,n,r,s){return function hF(i,t,e,n,r,s,o,l){const u=t+e;return bI(i,u,r,s,o)?Ym(i,u+3,l?n.call(l,r,s,o):n(r,s,o)):Nw(i,u+3)}(Ci(),Bo(),i,t,e,n,r,s)}function sf(i,t,e,n,r,s,o){return function dF(i,t,e,n,r,s,o,l,u){const p=t+e;return hg(i,p,r,s,o,l)?Ym(i,p+4,u?n.call(u,r,s,o,l):n(r,s,o,l)):Nw(i,p+4)}(Ci(),Bo(),i,t,e,n,r,s,o)}function h0(i,t,e,n,r,s,o,l){const u=Bo()+i,p=Ci(),v=hg(p,u,e,n,r,s);return Ad(p,u+4,o)||v?Ym(p,u+5,l?t.call(l,e,n,r,s,o):t(e,n,r,s,o)):Dw(p,u+5)}function jb(i,t,e,n,r,s,o,l,u){const p=Bo()+i,v=Ci(),w=hg(v,p,e,n,r,s);return a0(v,p+4,o,l)||w?Ym(v,p+6,u?t.call(u,e,n,r,s,o,l):t(e,n,r,s,o,l)):Dw(v,p+6)}function dM(i,t,e,n){return function fF(i,t,e,n,r,s){let o=t+e,l=!1;for(let u=0;u<r.length;u++)Ad(i,o++,r[u])&&(l=!0);return l?Ym(i,o,n.apply(s,r)):Nw(i,o)}(Ci(),Bo(),i,t,e,n)}function Nw(i,t){const e=i[t];return e===Xs?void 0:e}function cF(i,t,e,n,r,s){const o=t+e;return Ad(i,o,r)?Ym(i,o+1,s?n.call(s,r):n(r)):Nw(i,o+1)}function fM(i){return t=>{setTimeout(i,void 0,t)}}const Bn=class Gj extends Ge{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const u=t;r=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=fM(s),r&&(r=fM(r)),o&&(o=fM(o)));const l=super.subscribe({next:r,error:s,complete:o});return t instanceof V&&t.add(l),l}};function Wj(){return this._results[o0()]()}class pM{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=o0(),n=pM.prototype;n[e]||(n[e]=Wj)}get changes(){return this._changes||(this._changes=new Bn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Ga(t);(this._changesDetected=!function Xd(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let lm=(()=>{class i{}return i.__NG_ELEMENT_ID__=qj,i})();const jj=lm,$j=class extends jj{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tViews,r=pI(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),gI(n,r,t),new Ew(r)}};function qj(){return MI(It(),Ci())}function MI(i,t){return 4&i.type?new $j(t,i,Hi(i,t)):null}let dg=(()=>{class i{}return i.__NG_ELEMENT_ID__=Xj,i})();function Xj(){return yF(It(),Ci())}const Yj=dg,mF=class extends Yj{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Hi(this._hostTNode,this._hostLView)}get injector(){return new ph(this._hostTNode,this._hostLView)}get parentInjector(){const t=Fc(this._hostTNode,this._hostLView);if(Bh(t)){const e=mu(t,this._hostLView),n=dh(t);return new ph(e[1].data[n+8],e)}return new ph(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=vF(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,n,r,s){const o=t&&!function Il(i){return"function"==typeof i}(t);let l;if(o)l=e;else{const w=e||{};l=w.index,n=w.injector,r=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const u=o?t:new Tw(Zo(t)),p=n||this.parentInjector;if(!s&&null==u.ngModule){const I=(o?p:this.parentInjector).get(ut,null);I&&(s=I)}const v=u.create(p,r,void 0,s);return this.insert(v.hostView,l),v}insert(t,e){const n=t._lView,r=n[1];if(function zr(i){return Rh(i[3])}(n)){const v=this.indexOf(t);if(-1!==v)this.detach(v);else{const w=n[3],I=new mF(w,w[6],w[3]);I.detach(I.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function _b(i,t,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=t),n<s-10?(t[4]=e[r],Hu(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function bd(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(o,t);const l=t[19];null!==l&&l.insertView(i),t[2]|=64}(r,n,o,s);const l=hw(s,o),u=n[11],p=Gv(u,o[7]);return null!==p&&function wp(i,t,e,n,r,s){n[0]=r,n[6]=t,xu(i,n,e,1,r,s)}(r,o[6],u,n,p,l),t.attachToViewContainerRef(),Hu(gM(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=vF(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=e0(this._lContainer,e);n&&(Gu(gM(this._lContainer),e),na(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=e0(this._lContainer,e);return n&&null!=Gu(gM(this._lContainer),e)?new Ew(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function vF(i){return i[8]}function gM(i){return i[8]||(i[8]=[])}function yF(i,t){let e;const n=t[i.index];if(Rh(n))e=n;else{let r;if(8&i.type)r=sa(n);else{const s=t[11];r=s.createComment("");const o=hh(i,t);ug(s,Gv(s,o),r,function Wv(i,t){return i.nextSibling(t)}(s,o),!1)}t[i.index]=e=yk(n,t,r,i),mI(t,e)}return new mF(e,i,t)}class mM{constructor(t){this.queryList=t,this.matches=null}clone(){return new mM(this.queryList)}setDirty(){this.queryList.setDirty()}}class vM{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new vM(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==AF(t,e).matches&&this.queries[e].setDirty()}}class _F{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class yM{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new yM(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class _M{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new _M(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,Qj(e,s)),this.matchTNodeWithReadOption(t,e,zh(e,t,s,!1,!1))}else n===lm?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,zh(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Zn||r===dg||r===lm&&4&e.type)this.addMatch(e.index,-2);else{const s=zh(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Qj(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function e7(i,t,e,n){return-1===e?function Jj(i,t){return 11&i.type?Hi(i,t):4&i.type?MI(i,t):null}(t,i):-2===e?function t7(i,t,e){return e===Zn?Hi(t,i):e===lm?MI(t,i):e===dg?yF(t,i):void 0}(i,t,n):tu(i,i[1],e,t)}function bF(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const s=i.data,o=e.matches,l=[];for(let u=0;u<o.length;u+=2){const p=o[u];l.push(p<0?null:e7(t,s[p],o[u+1],e.metadata.read))}r.matches=l}return r.matches}function bM(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=bF(i,t,r,e);for(let l=0;l<s.length;l+=2){const u=s[l];if(u>0)n.push(o[l/2]);else{const p=s[l+1],v=t[-u];for(let w=10;w<v.length;w++){const I=v[w];I[17]===I[3]&&bM(I[1],I,p,n)}if(null!==v[9]){const w=v[9];for(let I=0;I<w.length;I++){const T=w[I];bM(T[1],T,p,n)}}}}}return n}function Wi(i){const t=Ci(),e=Ms(),n=Pc();Hg(n+1);const r=AF(e,n);if(i.dirty&&bo(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?bM(e,t,n,[]):bF(e,t,r,n);i.reset(s,qn),i.notifyOnChanges()}return!0}return!1}function Tr(i,t,e){const n=Ms();n.firstCreatePass&&(wF(n,new _F(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),CF(n,Ci(),t)}function Ba(i,t,e,n){const r=Ms();if(r.firstCreatePass){const s=It();wF(r,new _F(t,e,n),s.index),function r7(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}CF(r,Ci(),e)}function ji(){return function n7(i,t){return i[19].queries[t].queryList}(Ci(),Pc())}function CF(i,t,e){const n=new pM(4==(4&e));ck(i,t,n,n.destroy),null===t[19]&&(t[19]=new vM),t[19].queries.push(new mM(n))}function wF(i,t,e){null===i.queries&&(i.queries=new yM),i.queries.track(new _M(t,e))}function AF(i,t){return i.queries.getByIndex(t)}function sc(i,t){return MI(i,t)}function LI(...i){}const Vw=new rr("Application Initializer");let RI=(()=>{class i{constructor(e){this.appInits=e,this.resolve=LI,this.reject=LI,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Lw(s))e.push(s);else if(nM(s)){const o=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(Yn(Vw,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Uw=new rr("AppId",{providedIn:"root",factory:function HF(){return`${IM()}${IM()}${IM()}`}});function IM(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GF=new rr("Platform Initializer"),Yb=new rr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),WF=new rr("appBootstrapListener"),jF=new rr("AnimationModuleType");let x7=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const $v=new rr("LocaleId",{providedIn:"root",factory:()=>fa($v,os.Optional|os.SkipSelf)||function I7(){return typeof $localize<"u"&&$localize.locale||Gb}()});class E7{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let SM=(()=>{class i{compileModuleSync(e){return new uM(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=gn(fu(e).declarations).reduce((o,l)=>{const u=Zo(l);return u&&o.push(new Tw(u)),o},[]);return new E7(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const D7=(()=>Promise.resolve(0))();function EM(i){typeof Zone>"u"?D7.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Vo{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bn(!1),this.onMicrotaskEmpty=new Bn(!1),this.onStable=new Bn(!1),this.onError=new Bn(!1),typeof Zone>"u")throw new _i(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function L7(){let i=oo.requestAnimationFrame,t=oo.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function k7(i){const t=()=>{!function P7(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(oo,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,MM(i),i.isCheckStableRunning=!0,TM(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),MM(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,l)=>{try{return XF(i),e.invokeTask(r,s,o,l)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),YF(i)}},onInvoke:(e,n,r,s,o,l,u)=>{try{return XF(i),e.invoke(r,s,o,l,u)}finally{i.shouldCoalesceRunChangeDetection&&t(),YF(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,MM(i),TM(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vo.isInAngularZone())throw new _i(909,!1)}static assertNotInAngularZone(){if(Vo.isInAngularZone())throw new _i(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,R7,LI,LI);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const R7={};function TM(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function MM(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function XF(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function YF(i){i._nesting--,TM(i)}class O7{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bn,this.onMicrotaskEmpty=new Bn,this.onStable=new Bn,this.onError=new Bn}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const KF=new rr(""),PI=new rr("");let RM,DM=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,RM||(function F7(i){RM=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vo.assertNotInAngularZone(),EM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())EM(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(Yn(Vo),Yn(LM),Yn(PI))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),LM=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return RM?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),e_=null;const ZF=new rr("AllowMultipleToken"),PM=new rr("PlatformDestroyListeners");class QF{constructor(t,e){this.name=t,this.token=e}}function eN(i,t,e=[]){const n=`Platform: ${t}`,r=new rr(n);return(s=[])=>{let o=kM();if(!o||o.injector.get(ZF,!1)){const l=[...e,...s,{provide:r,useValue:!0}];i?i(l):function z7(i){if(e_&&!e_.get(ZF,!1))throw new _i(400,!1);e_=i;const t=i.get(nN);(function JF(i){const t=i.get(GF,null);t&&t.forEach(e=>e())})(i)}(function tN(i=[],t){return Iu.create({name:t,providers:[{provide:Ue,useValue:"platform"},{provide:PM,useValue:new Set([()=>e_=null])},...i]})}(l,n))}return function U7(i){const t=kM();if(!t)throw new _i(401,!1);return t}()}}function kM(){return e_?.get(nN)??null}let nN=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function H7(i,t){let e;return e="noop"===i?new O7:("zone.js"===i?void 0:i)||new Vo(t),e}(n?.ngZone,function iN(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Vo,useValue:r}];return r.run(()=>{const o=Iu.create({providers:s,parent:this.injector,name:e.moduleType.name}),l=e.create(o),u=l.injector.get(dt,null);if(!u)throw new _i(402,!1);return r.runOutsideAngular(()=>{const p=r.onError.subscribe({next:v=>{u.handleError(v)}});l.onDestroy(()=>{kI(this._modules,l),p.unsubscribe()})}),function rN(i,t,e){try{const n=e();return Lw(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(u,r,()=>{const p=l.injector.get(RI);return p.runInitializers(),p.donePromise.then(()=>(function MO(i){Tc(i,"Expected localeId to be defined"),"string"==typeof i&&(TO=i.toLowerCase().replace(/_/g,"-"))}(l.injector.get($v,Gb)||Gb),this._moduleDoBootstrap(l),l))})})}bootstrapModule(e,n=[]){const r=sN({},n);return function N7(i,t,e){const n=new uM(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(Hw);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new _i(403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _i(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(PM,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(Yn(Iu))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function sN(i,t){return Array.isArray(t)?t.reduce(sN,i):{...i,...t}}let Hw=(()=>{class i{constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new yt(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),o=new yt(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Vo.assertNotInAngularZone(),EM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const p=this._zone.onUnstable.subscribe(()=>{Vo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),p.unsubscribe()}});this.isStable=function Ws(...i){const t=ge(i),e=function Oe(i,t){return"number"==typeof mt(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?pl(n[0]):Sc(e)(ur(n,t)):rl}(s,o.pipe(So()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){const r=e instanceof tn;if(!this._injector.get(RI).done)throw!r&&function qb(i){const t=Zo(i)||Ol(i)||La(i);return null!==t&&t.standalone}(e),new _i(405,false);let o;o=r?e:this._injector.get(mi).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const l=function B7(i){return i.isBoundToModule}(o)?void 0:this._injector.get(u0),p=o.create(Iu.NULL,[],n||o.selector,l),v=p.location.nativeElement,w=p.injector.get(KF,null);return w?.registerApplication(v),p.onDestroy(()=>{this.detachView(p.hostView),kI(this.components,p),w?.unregisterApplication(v)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new _i(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;kI(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(WF,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>kI(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new _i(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(Yn(Vo),Yn(ut),Yn(dt))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function kI(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let aN=!0,lN=!1;function cN(){return lN=!0,aN}let xo=(()=>{class i{}return i.__NG_ELEMENT_ID__=j7,i})();function j7(i){return function $7(i,t,e){if(kg(i)&&!e){const n=Lc(i.index,t);return new Ew(n,n)}return 47&i.type?new Ew(t[16],t):null}(It(),Ci(),16==(16&i))}class fN{constructor(){}supports(t){return Mw(t)}create(t){return new Q7(t)}}const Z7=(i,t)=>t;class Q7{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Z7}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<gN(n,r,s)?e:n,l=gN(o,r,s),u=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const p=l-r,v=u-r;if(p!=v){for(let I=0;I<p;I++){const T=I<s.length?s[I]:s[I]=0,k=T+I;v<=k&&k<p&&(s[I]=T+1)}s[o.previousIndex]=v-p}}l!==u&&t(o,l,u)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Mw(t))throw new _i(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)s=t[l],o=this._trackByFn(l,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,l)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,l),n=!0),e=e._next}else r=0,function PW(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[o0()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,l=>{o=this._trackByFn(r,l),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,l,o,r)),Object.is(e.item,l)||this._addIdentityChange(e,l)):(e=this._mismatch(e,l,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new J7(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new pN),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pN),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class J7{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class e${constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class pN{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new e$,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gN(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class mN{constructor(){}supports(t){return t instanceof Map||eM(t)}create(){return new t$}}class t${constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||eM(t)))throw new _i(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new n$(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class n${constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vN(){return new NI([new fN])}let NI=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||vN()),deps:[[i,new mh,new Ml]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new _i(901,!1)}}return i.\u0275prov=Zi({token:i,providedIn:"root",factory:vN}),i})();function yN(){return new Gw([new mN])}let Gw=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||yN()),deps:[[i,new mh,new Ml]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new _i(901,!1)}}return i.\u0275prov=Zi({token:i,providedIn:"root",factory:yN}),i})();const s$=eN(null,"core",[]);let o$=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(Yn(Hw))},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({}),i})();function Xv(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}let BI=null;function Zm(){return BI}const Ku=new rr("DocumentToken");let zM=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(){return function u$(){return Yn(_N)}()},providedIn:"platform"}),i})();const h$=new rr("Location Initialized");let _N=(()=>{class i extends zM{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zm().getBaseHref(this._doc)}onPopState(e){const n=Zm().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Zm().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){bN()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){bN()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(Yn(Ku))},i.\u0275prov=Zi({token:i,factory:function(){return function d$(){return new _N(Yn(Ku))}()},providedIn:"platform"}),i})();function bN(){return!!window.history.pushState}function VM(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function CN(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function Yv(i){return i&&"?"!==i[0]?"?"+i:i}let f0=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(){return fa(AN)},providedIn:"root"}),i})();const wN=new rr("appBaseHref");let AN=(()=>{class i extends f0{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??fa(Ku).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return VM(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Yv(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+Yv(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+Yv(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(Yn(zM),Yn(wN,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),f$=(()=>{class i extends f0{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=VM(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+Yv(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+Yv(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(Yn(zM),Yn(wN,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),UM=(()=>{class i{constructor(e){this._subject=new Bn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._baseHref=CN(xN(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Yv(n))}normalize(e){return i.stripTrailingSlash(function g$(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,xN(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Yv(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Yv(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=Yv,i.joinWithSlash=VM,i.stripTrailingSlash=CN,i.\u0275fac=function(e){return new(e||i)(Yn(f0))},i.\u0275prov=Zi({token:i,factory:function(){return function p$(){return new UM(Yn(f0))}()},providedIn:"root"}),i})();function xN(i){return i.replace(/\/index.html$/,"")}var ou=(()=>((ou=ou||{})[ou.Format=0]="Format",ou[ou.Standalone=1]="Standalone",ou))(),Xo=(()=>((Xo=Xo||{})[Xo.Narrow=0]="Narrow",Xo[Xo.Abbreviated=1]="Abbreviated",Xo[Xo.Wide=2]="Wide",Xo[Xo.Short=3]="Short",Xo))(),bc=(()=>((bc=bc||{})[bc.Short=0]="Short",bc[bc.Medium=1]="Medium",bc[bc.Long=2]="Long",bc[bc.Full=3]="Full",bc))(),Os=(()=>((Os=Os||{})[Os.Decimal=0]="Decimal",Os[Os.Group=1]="Group",Os[Os.List=2]="List",Os[Os.PercentSign=3]="PercentSign",Os[Os.PlusSign=4]="PlusSign",Os[Os.MinusSign=5]="MinusSign",Os[Os.Exponential=6]="Exponential",Os[Os.SuperscriptingExponent=7]="SuperscriptingExponent",Os[Os.PerMille=8]="PerMille",Os[Os.Infinity=9]="Infinity",Os[Os.NaN=10]="NaN",Os[Os.TimeSeparator=11]="TimeSeparator",Os[Os.CurrencyDecimal=12]="CurrencyDecimal",Os[Os.CurrencyGroup=13]="CurrencyGroup",Os))();function zI(i,t){return pg(rf(i)[Gr.DateFormat],t)}function VI(i,t){return pg(rf(i)[Gr.TimeFormat],t)}function UI(i,t){return pg(rf(i)[Gr.DateTimeFormat],t)}function fg(i,t){const e=rf(i),n=e[Gr.NumberSymbols][t];if(typeof n>"u"){if(t===Os.CurrencyDecimal)return e[Gr.NumberSymbols][Os.Decimal];if(t===Os.CurrencyGroup)return e[Gr.NumberSymbols][Os.Group]}return n}function SN(i){if(!i[Gr.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[Gr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function pg(i,t){for(let e=t;e>-1;e--)if(typeof i[e]<"u")return i[e];throw new Error("Locale data API: locale data undefined")}function GM(i){const[t,e]=i.split(":");return{hours:+t,minutes:+e}}const T$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ww={},M$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Zu=(()=>((Zu=Zu||{})[Zu.Short=0]="Short",Zu[Zu.ShortGMT=1]="ShortGMT",Zu[Zu.Long=2]="Long",Zu[Zu.Extended=3]="Extended",Zu))(),Hs=(()=>((Hs=Hs||{})[Hs.FullYear=0]="FullYear",Hs[Hs.Month=1]="Month",Hs[Hs.Date=2]="Date",Hs[Hs.Hours=3]="Hours",Hs[Hs.Minutes=4]="Minutes",Hs[Hs.Seconds=5]="Seconds",Hs[Hs.FractionalSeconds=6]="FractionalSeconds",Hs[Hs.Day=7]="Day",Hs))(),go=(()=>((go=go||{})[go.DayPeriods=0]="DayPeriods",go[go.Days=1]="Days",go[go.Months=2]="Months",go[go.Eras=3]="Eras",go))();function D$(i,t,e,n){let r=function z$(i){if(MN(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){const[r,s=1,o=1]=i.split("-").map(l=>+l);return HI(r,s-1,o)}const e=parseFloat(i);if(!isNaN(i-e))return new Date(e);let n;if(n=i.match(T$))return function V$(i){const t=new Date(0);let e=0,n=0;const r=i[8]?t.setUTCFullYear:t.setFullYear,s=i[8]?t.setUTCHours:t.setHours;i[9]&&(e=Number(i[9]+i[10]),n=Number(i[9]+i[11])),r.call(t,Number(i[1]),Number(i[2])-1,Number(i[3]));const o=Number(i[4]||0)-e,l=Number(i[5]||0)-n,u=Number(i[6]||0),p=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return s.call(t,o,l,u,p),t}(n)}const t=new Date(i);if(!MN(t))throw new Error(`Unable to convert "${i}" into a date`);return t}(i);t=Kv(e,t)||t;let l,o=[];for(;t;){if(l=M$.exec(t),!l){o.push(t);break}{o=o.concat(l.slice(1));const v=o.pop();if(!v)break;t=v}}let u=r.getTimezoneOffset();n&&(u=TN(n,u),r=function B$(i,t,e){const n=e?-1:1,r=i.getTimezoneOffset();return function N$(i,t){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+t),i}(i,n*(TN(t,r)-r))}(r,n,!0));let p="";return o.forEach(v=>{const w=function F$(i){if(jM[i])return jM[i];let t;switch(i){case"G":case"GG":case"GGG":t=Dl(go.Eras,Xo.Abbreviated);break;case"GGGG":t=Dl(go.Eras,Xo.Wide);break;case"GGGGG":t=Dl(go.Eras,Xo.Narrow);break;case"y":t=Tu(Hs.FullYear,1,0,!1,!0);break;case"yy":t=Tu(Hs.FullYear,2,0,!0,!0);break;case"yyy":t=Tu(Hs.FullYear,3,0,!1,!0);break;case"yyyy":t=Tu(Hs.FullYear,4,0,!1,!0);break;case"Y":t=$I(1);break;case"YY":t=$I(2,!0);break;case"YYY":t=$I(3);break;case"YYYY":t=$I(4);break;case"M":case"L":t=Tu(Hs.Month,1,1);break;case"MM":case"LL":t=Tu(Hs.Month,2,1);break;case"MMM":t=Dl(go.Months,Xo.Abbreviated);break;case"MMMM":t=Dl(go.Months,Xo.Wide);break;case"MMMMM":t=Dl(go.Months,Xo.Narrow);break;case"LLL":t=Dl(go.Months,Xo.Abbreviated,ou.Standalone);break;case"LLLL":t=Dl(go.Months,Xo.Wide,ou.Standalone);break;case"LLLLL":t=Dl(go.Months,Xo.Narrow,ou.Standalone);break;case"w":t=WM(1);break;case"ww":t=WM(2);break;case"W":t=WM(1,!0);break;case"d":t=Tu(Hs.Date,1);break;case"dd":t=Tu(Hs.Date,2);break;case"c":case"cc":t=Tu(Hs.Day,1);break;case"ccc":t=Dl(go.Days,Xo.Abbreviated,ou.Standalone);break;case"cccc":t=Dl(go.Days,Xo.Wide,ou.Standalone);break;case"ccccc":t=Dl(go.Days,Xo.Narrow,ou.Standalone);break;case"cccccc":t=Dl(go.Days,Xo.Short,ou.Standalone);break;case"E":case"EE":case"EEE":t=Dl(go.Days,Xo.Abbreviated);break;case"EEEE":t=Dl(go.Days,Xo.Wide);break;case"EEEEE":t=Dl(go.Days,Xo.Narrow);break;case"EEEEEE":t=Dl(go.Days,Xo.Short);break;case"a":case"aa":case"aaa":t=Dl(go.DayPeriods,Xo.Abbreviated);break;case"aaaa":t=Dl(go.DayPeriods,Xo.Wide);break;case"aaaaa":t=Dl(go.DayPeriods,Xo.Narrow);break;case"b":case"bb":case"bbb":t=Dl(go.DayPeriods,Xo.Abbreviated,ou.Standalone,!0);break;case"bbbb":t=Dl(go.DayPeriods,Xo.Wide,ou.Standalone,!0);break;case"bbbbb":t=Dl(go.DayPeriods,Xo.Narrow,ou.Standalone,!0);break;case"B":case"BB":case"BBB":t=Dl(go.DayPeriods,Xo.Abbreviated,ou.Format,!0);break;case"BBBB":t=Dl(go.DayPeriods,Xo.Wide,ou.Format,!0);break;case"BBBBB":t=Dl(go.DayPeriods,Xo.Narrow,ou.Format,!0);break;case"h":t=Tu(Hs.Hours,1,-12);break;case"hh":t=Tu(Hs.Hours,2,-12);break;case"H":t=Tu(Hs.Hours,1);break;case"HH":t=Tu(Hs.Hours,2);break;case"m":t=Tu(Hs.Minutes,1);break;case"mm":t=Tu(Hs.Minutes,2);break;case"s":t=Tu(Hs.Seconds,1);break;case"ss":t=Tu(Hs.Seconds,2);break;case"S":t=Tu(Hs.FractionalSeconds,1);break;case"SS":t=Tu(Hs.FractionalSeconds,2);break;case"SSS":t=Tu(Hs.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=WI(Zu.Short);break;case"ZZZZZ":t=WI(Zu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=WI(Zu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=WI(Zu.Long);break;default:return null}return jM[i]=t,t}(v);p+=w?w(r,e,u):"''"===v?"'":v.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),p}function HI(i,t,e){const n=new Date(0);return n.setFullYear(i,t,e),n.setHours(0,0,0),n}function Kv(i,t){const e=function m$(i){return rf(i)[Gr.LocaleId]}(i);if(Ww[e]=Ww[e]||{},Ww[e][t])return Ww[e][t];let n="";switch(t){case"shortDate":n=zI(i,bc.Short);break;case"mediumDate":n=zI(i,bc.Medium);break;case"longDate":n=zI(i,bc.Long);break;case"fullDate":n=zI(i,bc.Full);break;case"shortTime":n=VI(i,bc.Short);break;case"mediumTime":n=VI(i,bc.Medium);break;case"longTime":n=VI(i,bc.Long);break;case"fullTime":n=VI(i,bc.Full);break;case"short":const r=Kv(i,"shortTime"),s=Kv(i,"shortDate");n=GI(UI(i,bc.Short),[r,s]);break;case"medium":const o=Kv(i,"mediumTime"),l=Kv(i,"mediumDate");n=GI(UI(i,bc.Medium),[o,l]);break;case"long":const u=Kv(i,"longTime"),p=Kv(i,"longDate");n=GI(UI(i,bc.Long),[u,p]);break;case"full":const v=Kv(i,"fullTime"),w=Kv(i,"fullDate");n=GI(UI(i,bc.Full),[v,w])}return n&&(Ww[e][t]=n),n}function GI(i,t){return t&&(i=i.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),i}function um(i,t,e="-",n,r){let s="";(i<0||r&&i<=0)&&(r?i=1-i:(i=-i,s=e));let o=String(i);for(;o.length<t;)o="0"+o;return n&&(o=o.slice(o.length-t)),s+o}function Tu(i,t,e=0,n=!1,r=!1){return function(s,o){let l=function R$(i,t){switch(i){case Hs.FullYear:return t.getFullYear();case Hs.Month:return t.getMonth();case Hs.Date:return t.getDate();case Hs.Hours:return t.getHours();case Hs.Minutes:return t.getMinutes();case Hs.Seconds:return t.getSeconds();case Hs.FractionalSeconds:return t.getMilliseconds();case Hs.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}(i,s);if((e>0||l>-e)&&(l+=e),i===Hs.Hours)0===l&&-12===e&&(l=12);else if(i===Hs.FractionalSeconds)return function L$(i,t){return um(i,3).substring(0,t)}(l,t);const u=fg(o,Os.MinusSign);return um(l,t,u,n,r)}}function Dl(i,t,e=ou.Format,n=!1){return function(r,s){return function P$(i,t,e,n,r,s){switch(e){case go.Months:return function _$(i,t,e){const n=rf(i),s=pg([n[Gr.MonthsFormat],n[Gr.MonthsStandalone]],t);return pg(s,e)}(t,r,n)[i.getMonth()];case go.Days:return function y$(i,t,e){const n=rf(i),s=pg([n[Gr.DaysFormat],n[Gr.DaysStandalone]],t);return pg(s,e)}(t,r,n)[i.getDay()];case go.DayPeriods:const o=i.getHours(),l=i.getMinutes();if(s){const p=function A$(i){const t=rf(i);return SN(t),(t[Gr.ExtraData][2]||[]).map(n=>"string"==typeof n?GM(n):[GM(n[0]),GM(n[1])])}(t),v=function x$(i,t,e){const n=rf(i);SN(n);const s=pg([n[Gr.ExtraData][0],n[Gr.ExtraData][1]],t)||[];return pg(s,e)||[]}(t,r,n),w=p.findIndex(I=>{if(Array.isArray(I)){const[T,k]=I,W=o>=T.hours&&l>=T.minutes,K=o<k.hours||o===k.hours&&l<k.minutes;if(T.hours<k.hours){if(W&&K)return!0}else if(W||K)return!0}else if(I.hours===o&&I.minutes===l)return!0;return!1});if(-1!==w)return v[w]}return function v$(i,t,e){const n=rf(i),s=pg([n[Gr.DayPeriodsFormat],n[Gr.DayPeriodsStandalone]],t);return pg(s,e)}(t,r,n)[o<12?0:1];case go.Eras:return function b$(i,t){return pg(rf(i)[Gr.Eras],t)}(t,n)[i.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,i,t,e,n)}}function WI(i){return function(t,e,n){const r=-1*n,s=fg(e,Os.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case Zu.Short:return(r>=0?"+":"")+um(o,2,s)+um(Math.abs(r%60),2,s);case Zu.ShortGMT:return"GMT"+(r>=0?"+":"")+um(o,1,s);case Zu.Long:return"GMT"+(r>=0?"+":"")+um(o,2,s)+":"+um(Math.abs(r%60),2,s);case Zu.Extended:return 0===n?"Z":(r>=0?"+":"")+um(o,2,s)+":"+um(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${i}"`)}}}function EN(i){return HI(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))}function WM(i,t=!1){return function(e,n){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{const s=EN(e),o=function O$(i){const t=HI(i,0,1).getDay();return HI(i,0,1+(t<=4?4:11)-t)}(s.getFullYear()),l=s.getTime()-o.getTime();r=1+Math.round(l/6048e5)}return um(r,i,fg(n,Os.MinusSign))}}function $I(i,t=!1){return function(e,n){return um(EN(e).getFullYear(),i,fg(n,Os.MinusSign),t)}}const jM={};function TN(i,t){i=i.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(e)?t:e}function MN(i){return i instanceof Date&&!isNaN(i.valueOf())}function PN(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let io=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Mw(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ms(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(Xt(NI),Xt(Gw),Xt(Zn),Xt(d))},i.\u0275dir=Yr({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class J${constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $c=(()=>{class i{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new J$(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const l=n.get(s);n.move(l,o),FN(l,r)}});for(let r=0,s=n.length;r<s;r++){const l=n.get(r).context;l.index=r,l.count=s,l.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{FN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Xt(dg),Xt(lm),Xt(NI))},i.\u0275dir=Yr({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function FN(i,t){i.context.$implicit=t.item}let ho=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new tq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){NN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){NN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Xt(dg),Xt(lm))},i.\u0275dir=Yr({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class tq{constructor(){this.$implicit=null,this.ngIf=null}}function NN(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${ms(t)}'.`)}let Ro=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:Vi.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(Gw),Xt(d))},i.\u0275dir=Yr({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),el=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(Xt(dg))},i.\u0275dir=Yr({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[da]}),i})();const pq=new rr("DATE_PIPE_DEFAULT_TIMEZONE");let zN=(()=>{class i{constructor(e,n){this.locale=e,this.defaultTimezone=n}transform(e,n="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return D$(e,n,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw function hm(i,t){return new _i(2100,!1)}()}}}return i.\u0275fac=function(e){return new(e||i)(Xt($v,16),Xt(pq,24))},i.\u0275pipe=du({name:"date",type:i,pure:!0,standalone:!0}),i})(),VN=(()=>{class i{transform(e){return JSON.stringify(e,null,2)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=du({name:"json",type:i,pure:!1,standalone:!0}),i})(),Fs=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({}),i})();const HN="browser";function tD(i){return i===HN}let Eq=(()=>{class i{}return i.\u0275prov=Zi({token:i,providedIn:"root",factory:()=>new Tq(Yn(Ku),window)}),i})();class Tq{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Mq(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=GN(this.window.history)||GN(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function GN(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class WN{}class nD extends class Dq extends class c${}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function l$(i){BI||(BI=i)}(new nD)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Lq(){return $w=$w||document.querySelector("base"),$w?$w.getAttribute("href"):null}();return null==e?null:function Rq(i){XI=XI||document.createElement("a"),XI.setAttribute("href",i);const t=XI.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){$w=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return PN(document.cookie,t)}}let XI,$w=null;const jN=new rr("TRANSITION_ID"),kq=[{provide:Vw,useFactory:function Pq(i,t,e){return()=>{e.get(RI).donePromise.then(()=>{const n=Zm(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[jN,Ku,Iu],multi:!0}];let Fq=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const YI=new rr("EventManagerPlugins");let KI=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(Yn(YI),Yn(Vo))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class $N{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Zm().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let qN=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),qw=(()=>{class i extends qN{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(XN),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(XN))}}return i.\u0275fac=function(e){return new(e||i)(Yn(Ku))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();function XN(i){Zm().remove(i)}const iD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rD=/%COMP%/g;function ZI(i,t,e){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?ZI(i,r,e):(r=r.replace(rD,i),e.push(r))}return e}function ZN(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let QI=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new sD(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Ma.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new Hq(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case Ma.ShadowDom:return new Gq(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=ZI(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(Yn(KI),Yn(qw),Yn(Uw))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class sD{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(iD[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(JN(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(JN(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=iD[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=iD[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Vi.DashCase|Vi.Important)?t.style.setProperty(e,n,r&Vi.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Vi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ZN(n)):this.eventManager.addEventListener(t,e,ZN(n))}}function JN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class Hq extends sD{constructor(t,e,n,r){super(t),this.component=n;const s=ZI(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=function zq(i){return"_ngcontent-%COMP%".replace(rD,i)}(r+"-"+n.id),this.hostAttr=function Vq(i){return"_nghost-%COMP%".replace(rD,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Gq extends sD{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ZI(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const l=document.createElement("style");l.textContent=s[o],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Wq=(()=>{class i extends $N{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(Yn(Ku))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const e3=["alt","control","meta","shift"],$q={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},t3={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qq={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Xq=(()=>{class i extends $N{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zm().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if(e3.forEach(u=>{const p=n.indexOf(u);p>-1&&(n.splice(p,1),o+=u+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static getEventFullKey(e){let n="",r=function Yq(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&t3.hasOwnProperty(t)&&(t=t3[t]))}return $q[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),e3.forEach(s=>{s!=r&&(0,qq[s])(e)&&(n+=s+".")}),n+=r,n}static eventCallback(e,n,r){return s=>{i.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(Yn(Ku))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const Jq=eN(s$,"browser",[{provide:Yb,useValue:HN},{provide:GF,useValue:function Kq(){nD.makeCurrent()},multi:!0},{provide:Ku,useFactory:function Qq(){return function ng(i){yh=i}(document),document},deps:[]}]),r3=new rr(""),s3=[{provide:PI,useClass:class Oq{addToWindow(t){oo.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},oo.getAllAngularTestabilities=()=>t.getAllTestabilities(),oo.getAllAngularRootElements=()=>t.getAllRootElements(),oo.frameworkStabilizers||(oo.frameworkStabilizers=[]),oo.frameworkStabilizers.push(n=>{const r=oo.getAllAngularTestabilities();let s=r.length,o=!1;const l=function(u){o=o||u,s--,0==s&&n(o)};r.forEach(function(u){u.whenStable(l)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Zm().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:KF,useClass:DM,deps:[Vo,LM,PI]},{provide:DM,useClass:DM,deps:[Vo,LM,PI]}],o3=[{provide:Ue,useValue:"root"},{provide:dt,useFactory:function Zq(){return new dt},deps:[]},{provide:YI,useClass:Wq,multi:!0,deps:[Ku,Vo,Yb]},{provide:YI,useClass:Xq,multi:!0,deps:[Ku]},{provide:QI,useClass:QI,deps:[KI,qw,Uw]},{provide:c,useExisting:QI},{provide:qN,useExisting:qw},{provide:qw,useClass:qw,deps:[Ku]},{provide:KI,useClass:KI,deps:[YI,Vo]},{provide:WN,useClass:Fq,deps:[]},[]];let a3=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:Uw,useValue:e.appId},{provide:jN,useExisting:Uw},kq]}}}return i.\u0275fac=function(e){return new(e||i)(Yn(r3,12))},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({providers:[...o3,...s3],imports:[Fs,o$]}),i})(),aD=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(Yn(Ku))},i.\u0275prov=Zi({token:i,factory:function(e){let n=null;return n=e?new e:function tX(){return new aD(Yn(Ku))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let u3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(e){let n=null;return n=e?new(e||i):Yn(h3),n},providedIn:"root"}),i})(),h3=(()=>{class i extends u3{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case pa.NONE:return n;case pa.HTML:return ua(n,"HTML")?bl(n):Bv(this._doc,String(n)).toString();case pa.STYLE:return ua(n,"Style")?bl(n):n;case pa.SCRIPT:if(ua(n,"Script"))return bl(n);throw new Error("unsafe value used in a script context");case pa.URL:return ua(n,"URL")?bl(n):lg(String(n));case pa.RESOURCE_URL:if(ua(n,"ResourceURL"))return bl(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function rg(i){return new vd(i)}(e)}bypassSecurityTrustStyle(e){return function jh(i){return new _p(i)}(e)}bypassSecurityTrustScript(e){return function $h(i){return new Hm(i)}(e)}bypassSecurityTrustUrl(e){return function yd(i){return new $_(i)}(e)}bypassSecurityTrustResourceUrl(e){return function ef(i){return new nm(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(Yn(Ku))},i.\u0275prov=Zi({token:i,factory:function(e){let n=null;return n=e?new e:function lX(i){return new h3(i.get(Ku))}(Yn(Iu)),n},providedIn:"root"}),i})();function Xr(...i){return ur(i,ge(i))}function Zv(i,t){return X(t)?gl(i,t,1):gl(i,1)}function gg(i,t){return st((e,n)=>{let r=0;e.subscribe(gt(n,s=>i.call(t,s,r++)&&n.next(s)))})}class d3{}class JI{}class Qm{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Qm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Qm;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Qm?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(l=>-1===s.indexOf(l)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class cX{encodeKey(t){return f3(t)}encodeValue(t){return f3(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const hX=/%(\d[a-f0-9])/gi,dX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function f3(i){return encodeURIComponent(i).replace(hX,(t,e)=>dX[e]??t)}function e1(i){return`${i}`}class Qv{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new cX,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function uX(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,l]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],u=e.get(o)||[];u.push(l),e.set(o,u)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(e1):[e1(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Qv({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(e1(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(e1(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class fX{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function p3(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function g3(i){return typeof Blob<"u"&&i instanceof Blob}function m3(i){return typeof FormData<"u"&&i instanceof FormData}class p0{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function pX(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Qm),this.context||(this.context=new fX),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const l=e.indexOf("?");this.urlWithParams=e+(-1===l?"?":l<e.length-1?"&":"")+o}}else this.params=new Qv,this.urlWithParams=e}serializeBody(){return null===this.body?null:p3(this.body)||g3(this.body)||m3(this.body)||function gX(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qv?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||m3(this.body)?null:g3(this.body)?this.body.type||null:p3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qv?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,p=t.params||this.params;const v=t.context??this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((w,I)=>w.set(I,t.setHeaders[I]),u)),t.setParams&&(p=Object.keys(t.setParams).reduce((w,I)=>w.set(I,t.setParams[I]),p)),new p0(e,n,s,{params:p,headers:u,context:v,reportProgress:l,responseType:r,withCredentials:o})}}var Cc=(()=>((Cc=Cc||{})[Cc.Sent=0]="Sent",Cc[Cc.UploadProgress=1]="UploadProgress",Cc[Cc.ResponseHeader=2]="ResponseHeader",Cc[Cc.DownloadProgress=3]="DownloadProgress",Cc[Cc.Response=4]="Response",Cc[Cc.User=5]="User",Cc))();class cD{constructor(t,e=200,n="OK"){this.headers=t.headers||new Qm,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class uD extends cD{constructor(t={}){super(t),this.type=Cc.ResponseHeader}clone(t={}){return new uD({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Kb extends cD{constructor(t={}){super(t),this.type=Cc.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Kb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class v3 extends cD{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function hD(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let t1=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof p0)s=e;else{let u,p;u=r.headers instanceof Qm?r.headers:new Qm(r.headers),r.params&&(p=r.params instanceof Qv?r.params:new Qv({fromObject:r.params})),s=new p0(e,n,void 0!==r.body?r.body:null,{headers:u,context:r.context,params:p,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Xr(s).pipe(Zv(u=>this.handler.handle(u)));if(e instanceof p0||"events"===r.observe)return o;const l=o.pipe(gg(u=>u instanceof Kb));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(ce(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(ce(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(ce(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return l.pipe(ce(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Qv).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,hD(r,n))}post(e,n,r={}){return this.request("POST",e,hD(r,n))}put(e,n,r={}){return this.request("PUT",e,hD(r,n))}}return i.\u0275fac=function(e){return new(e||i)(Yn(d3))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class y3{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const _3=new rr("HTTP_INTERCEPTORS");let mX=(()=>{class i{intercept(e,n){return n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const vX=/^\)\]\}',?\n/;let b3=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new yt(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((T,k)=>r.setRequestHeader(T,k.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const T=e.detectContentTypeHeader();null!==T&&r.setRequestHeader("Content-Type",T)}if(e.responseType){const T=e.responseType.toLowerCase();r.responseType="json"!==T?T:"text"}const s=e.serializeBody();let o=null;const l=()=>{if(null!==o)return o;const T=r.statusText||"OK",k=new Qm(r.getAllResponseHeaders()),W=function yX(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new uD({headers:k,status:r.status,statusText:T,url:W}),o},u=()=>{let{headers:T,status:k,statusText:W,url:K}=l(),he=null;204!==k&&(he=typeof r.response>"u"?r.responseText:r.response),0===k&&(k=he?200:0);let Te=k>=200&&k<300;if("json"===e.responseType&&"string"==typeof he){const Ae=he;he=he.replace(vX,"");try{he=""!==he?JSON.parse(he):null}catch(Le){he=Ae,Te&&(Te=!1,he={error:Le,text:he})}}Te?(n.next(new Kb({body:he,headers:T,status:k,statusText:W,url:K||void 0})),n.complete()):n.error(new v3({error:he,headers:T,status:k,statusText:W,url:K||void 0}))},p=T=>{const{url:k}=l(),W=new v3({error:T,status:r.status||0,statusText:r.statusText||"Unknown Error",url:k||void 0});n.error(W)};let v=!1;const w=T=>{v||(n.next(l()),v=!0);let k={type:Cc.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(k.total=T.total),"text"===e.responseType&&!!r.responseText&&(k.partialText=r.responseText),n.next(k)},I=T=>{let k={type:Cc.UploadProgress,loaded:T.loaded};T.lengthComputable&&(k.total=T.total),n.next(k)};return r.addEventListener("load",u),r.addEventListener("error",p),r.addEventListener("timeout",p),r.addEventListener("abort",p),e.reportProgress&&(r.addEventListener("progress",w),null!==s&&r.upload&&r.upload.addEventListener("progress",I)),r.send(s),n.next({type:Cc.Sent}),()=>{r.removeEventListener("error",p),r.removeEventListener("abort",p),r.removeEventListener("load",u),r.removeEventListener("timeout",p),e.reportProgress&&(r.removeEventListener("progress",w),null!==s&&r.upload&&r.upload.removeEventListener("progress",I)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(Yn(WN))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const dD=new rr("XSRF_COOKIE_NAME"),fD=new rr("XSRF_HEADER_NAME");class C3{}let _X=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=PN(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(Yn(Ku),Yn(Yb),Yn(dD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),pD=(()=>{class i{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(Yn(C3),Yn(fD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),bX=(()=>{class i{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(_3,[]);this.chain=n.reduceRight((r,s)=>new y3(r,s),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(Yn(JI),Yn(Iu))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),CX=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:pD,useClass:mX}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:dD,useValue:e.cookieName}:[],e.headerName?{provide:fD,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({providers:[pD,{provide:_3,useExisting:pD,multi:!0},{provide:C3,useClass:_X},{provide:dD,useValue:"XSRF-TOKEN"},{provide:fD,useValue:"X-XSRF-TOKEN"}]}),i})(),w3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({providers:[t1,{provide:d3,useClass:bX},b3,{provide:JI,useExisting:b3}],imports:[CX.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),i})();class Vf extends Ge{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const n1=M(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:wX}=Array,{getPrototypeOf:AX,prototype:xX,keys:IX}=Object;function A3(i){if(1===i.length){const t=i[0];if(wX(t))return{args:t,keys:null};if(function SX(i){return i&&"object"==typeof i&&AX(i)===xX}(t)){const e=IX(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:EX}=Array;function x3(i){return ce(t=>function TX(i,t){return EX(t)?i(...t):i(t)}(i,t))}function I3(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function S3(...i){const t=ge(i),e=ct(i),{args:n,keys:r}=A3(i);if(0===n.length)return ur([],t);const s=new yt(function MX(i,t,e=ke){return n=>{E3(t,()=>{const{length:r}=i,s=new Array(r);let o=r,l=r;for(let u=0;u<r;u++)E3(t,()=>{const p=ur(i[u],t);let v=!1;p.subscribe(gt(n,w=>{s[u]=w,v||(v=!0,l--),l||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>I3(r,o):ke));return e?s.pipe(x3(e)):s}function E3(i,t,e){i?ro(e,i,t):t()}function gD(...i){return function DX(){return Sc(1)}()(ur(i,ge(i)))}function T3(i){return new yt(t=>{pl(i()).subscribe(t)})}function Zb(i,t){const e=X(i)?i:()=>i,n=r=>r.error(e());return new yt(t?r=>t.schedule(n,0,r):n)}function mD(){return st((i,t)=>{let e=null;i._refCount++;const n=gt(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class M3 extends yt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,wt(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new V;const e=this.getSubject();t.add(this.source.subscribe(gt(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=V.EMPTY)}return t}refCount(){return mD()(this)}}function dm(i,t){return st((e,n)=>{let r=null,s=0,o=!1;const l=()=>o&&!r&&n.complete();e.subscribe(gt(n,u=>{r?.unsubscribe();let p=0;const v=s++;pl(i(u,v)).subscribe(r=gt(n,w=>n.next(t?t(u,w,v,p++):w),()=>{r=null,l()}))},()=>{o=!0,l()}))})}function Qb(i){return i<=0?()=>rl:st((t,e)=>{let n=0;t.subscribe(gt(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function r1(i){return st((t,e)=>{let n=!1;t.subscribe(gt(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function D3(i=RX){return st((t,e)=>{let n=!1;t.subscribe(gt(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function RX(){return new n1}function n_(i,t){const e=arguments.length>=2;return n=>n.pipe(i?gg((r,s)=>i(r,s,n)):ke,Qb(1),e?r1(t):D3(()=>new n1))}function Id(i,t,e){const n=X(i)||t||e?{next:i,error:t,complete:e}:i;return n?st((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let l=!0;r.subscribe(gt(s,u=>{var p;null===(p=n.next)||void 0===p||p.call(n,u),s.next(u)},()=>{var u;l=!1,null===(u=n.complete)||void 0===u||u.call(n),s.complete()},u=>{var p;l=!1,null===(p=n.error)||void 0===p||p.call(n,u),s.error(u)},()=>{var u,p;l&&(null===(u=n.unsubscribe)||void 0===u||u.call(n)),null===(p=n.finalize)||void 0===p||p.call(n)}))}):ke}function Jm(i){return st((t,e)=>{let s,n=null,r=!1;n=t.subscribe(gt(e,void 0,void 0,o=>{s=pl(i(o,Jm(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function PX(i,t,e,n,r){return(s,o)=>{let l=e,u=t,p=0;s.subscribe(gt(o,v=>{const w=p++;u=l?i(u,v,w):(l=!0,v),n&&o.next(u)},r&&(()=>{l&&o.next(u),o.complete()})))}}function vD(i,t){return st(PX(i,t,arguments.length>=2,!0))}function yD(i){return i<=0?()=>rl:st((t,e)=>{let n=[];t.subscribe(gt(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function L3(i,t){const e=arguments.length>=2;return n=>n.pipe(i?gg((r,s)=>i(r,s,n)):ke,yD(1),e?r1(t):D3(()=>new n1))}function _D(i){return st((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const Po="primary";class FX{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Jb(i){return new FX(i)}function NX(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],l=i[s];if(o.startsWith(":"))r[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function ev(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!R3(i[r],t[r]))return!1;return!0}function R3(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function P3(i){return Array.prototype.concat.apply([],i)}function k3(i){return i.length>0?i[i.length-1]:null}function Zh(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Jv(i){return nM(i)?i:Lw(i)?ur(Promise.resolve(i)):Xr(i)}const VX={exact:function N3(i,t,e){if(!m0(i.segments,t.segments)||!s1(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!N3(i.children[n],t.children[n],e))return!1;return!0},subset:B3},O3={exact:function UX(i,t){return ev(i,t)},subset:function HX(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>R3(i[e],t[e]))},ignored:()=>!0};function F3(i,t,e){return VX[e.paths](i.root,t.root,e.matrixParams)&&O3[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function B3(i,t,e){return z3(i,t,t.segments,e)}function z3(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!m0(r,e)||t.hasChildren()||!s1(r,e,n))}if(i.segments.length===e.length){if(!m0(i.segments,e)||!s1(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!B3(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(m0(i.segments,r)&&s1(i.segments,r,n)&&i.children[Po])&&z3(i.children[Po],t,s,n)}}function s1(i,t,e){return t.every((n,r)=>O3[e](i[r].parameters,n.parameters))}class g0{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jb(this.queryParams)),this._queryParamMap}toString(){return jX.serialize(this)}}class Uo{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Zh(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return o1(this)}}class Xw{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Jb(this.parameters)),this._parameterMap}toString(){return G3(this)}}function m0(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let V3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(){return new CD},providedIn:"root"}),i})();class CD{parse(t){const e=new eY(t);return new g0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Yw(t.root,!0)}`,n=function XX(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${a1(e)}=${a1(r)}`).join("&"):`${a1(e)}=${a1(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function $X(i){return encodeURI(i)}(t.fragment)}`:""}`}}const jX=new CD;function o1(i){return i.segments.map(t=>G3(t)).join("/")}function Yw(i,t){if(!i.hasChildren())return o1(i);if(t){const e=i.children[Po]?Yw(i.children[Po],!1):"",n=[];return Zh(i.children,(r,s)=>{s!==Po&&n.push(`${s}:${Yw(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function WX(i,t){let e=[];return Zh(i.children,(n,r)=>{r===Po&&(e=e.concat(t(n,r)))}),Zh(i.children,(n,r)=>{r!==Po&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===Po?[Yw(i.children[Po],!1)]:[`${r}:${Yw(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Po]?`${o1(i)}/${e[0]}`:`${o1(i)}/(${e.join("//")})`}}function U3(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function a1(i){return U3(i).replace(/%3B/gi,";")}function wD(i){return U3(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function l1(i){return decodeURIComponent(i)}function H3(i){return l1(i.replace(/\+/g,"%20"))}function G3(i){return`${wD(i.path)}${function qX(i){return Object.keys(i).map(t=>`;${wD(t)}=${wD(i[t])}`).join("")}(i.parameters)}`}const YX=/^[^\/()?;=#]+/;function c1(i){const t=i.match(YX);return t?t[0]:""}const KX=/^[^=?&#]+/,QX=/^[^&#]+/;class eY{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Uo([],{}):new Uo([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Po]=new Uo(t,e)),n}parseSegment(){const t=c1(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new _i(4009,!1);return this.capture(t),new Xw(l1(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=c1(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=c1(this.remaining);r&&(n=r,this.capture(n))}t[l1(e)]=l1(n)}parseQueryParam(t){const e=function ZX(i){const t=i.match(KX);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function JX(i){const t=i.match(QX);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=H3(e),s=H3(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=c1(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new _i(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Po);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Po]:new Uo([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new _i(4011,!1)}}function AD(i){return i.segments.length>0?new Uo([],{[Po]:i}):i}function u1(i){const t={};for(const n of Object.keys(i.children)){const s=u1(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function tY(i){if(1===i.numberOfChildren&&i.children[Po]){const t=i.children[Po];return new Uo(i.segments.concat(t.segments),t.children)}return i}(new Uo(i.segments,t))}function v0(i){return i instanceof g0}function rY(i,t,e,n,r){if(0===e.length)return eC(t.root,t.root,t.root,n,r);const s=function $3(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new j3(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return Zh(s.outlets,(u,p)=>{l[p]="string"==typeof u?u.split("/"):u}),[...r,{outlets:l}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?e=!0:".."===l?t++:""!=l&&r.push(l))}),r):[...r,s]},[]);return new j3(e,t,n)}(e);return s.toRoot()?eC(t.root,t.root,new Uo([],{}),n,r):function o(u){const p=function oY(i,t,e,n){if(i.isAbsolute)return new tC(t.root,!0,0);if(-1===n)return new tC(e,e===t.root,0);return function q3(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new _i(4005,!1);r=n.segments.length}return new tC(n,!1,r-s)}(e,n+(Kw(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,u),v=p.processChildren?Qw(p.segmentGroup,p.index,s.commands):ID(p.segmentGroup,p.index,s.commands);return eC(t.root,p.segmentGroup,v,n,r)}(i.snapshot?._lastPathIndex)}function Kw(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Zw(i){return"object"==typeof i&&null!=i&&i.outlets}function eC(i,t,e,n,r){let o,s={};n&&Zh(n,(u,p)=>{s[p]=Array.isArray(u)?u.map(v=>`${v}`):`${u}`}),o=i===t?e:W3(i,t,e);const l=AD(u1(o));return new g0(l,s,r)}function W3(i,t,e){const n={};return Zh(i.children,(r,s)=>{n[s]=r===t?e:W3(r,t,e)}),new Uo(i.segments,n)}class j3{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Kw(n[0]))throw new _i(4003,!1);const r=n.find(Zw);if(r&&r!==k3(n))throw new _i(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tC{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function ID(i,t,e){if(i||(i=new Uo([],{})),0===i.segments.length&&i.hasChildren())return Qw(i,t,e);const n=function lY(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],l=e[n];if(Zw(l))break;const u=`${l}`,p=n<e.length-1?e[n+1]:null;if(r>0&&void 0===u)break;if(u&&p&&"object"==typeof p&&void 0===p.outlets){if(!Y3(u,p,o))return s;n+=2}else{if(!Y3(u,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new Uo(i.segments.slice(0,n.pathIndex),{});return s.children[Po]=new Uo(i.segments.slice(n.pathIndex),i.children),Qw(s,0,r)}return n.match&&0===r.length?new Uo(i.segments,{}):n.match&&!i.hasChildren()?SD(i,t,e):n.match?Qw(i,0,r):SD(i,t,e)}function Qw(i,t,e){if(0===e.length)return new Uo(i.segments,{});{const n=function aY(i){return Zw(i[0])?i[0].outlets:{[Po]:i}}(e),r={};return Zh(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=ID(i.children[o],t,s))}),Zh(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new Uo(i.segments,r)}}function SD(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Zw(s)){const u=cY(s.outlets);return new Uo(n,u)}if(0===r&&Kw(e[0])){n.push(new Xw(i.segments[t].path,X3(e[0]))),r++;continue}const o=Zw(s)?s.outlets[Po]:`${s}`,l=r<e.length-1?e[r+1]:null;o&&l&&Kw(l)?(n.push(new Xw(o,X3(l))),r+=2):(n.push(new Xw(o,{})),r++)}return new Uo(n,{})}function cY(i){const t={};return Zh(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=SD(new Uo([],{}),0,e))}),t}function X3(i){const t={};return Zh(i,(e,n)=>t[n]=`${e}`),t}function Y3(i,t,e){return i==e.path&&ev(t,e.parameters)}class ey{constructor(t,e){this.id=t,this.url=e}}class ED extends ey{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class y0 extends ey{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class h1 extends ey{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class K3 extends ey{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dY extends ey{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class fY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pY extends ey{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gY{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mY{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vY{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yY{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _Y{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bY{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z3{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Q3{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=TD(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=TD(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=MD(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return MD(t,this._root).map(e=>e.value)}}function TD(i,t){if(i===t.value)return t;for(const e of t.children){const n=TD(i,e);if(n)return n}return null}function MD(i,t){if(i===t.value)return[t];for(const e of t.children){const n=MD(i,e);if(n.length)return n.unshift(t),n}return[]}class ty{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function nC(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class J3 extends Q3{constructor(t,e){super(t),this.snapshot=e,DD(this,t)}toString(){return this.snapshot.toString()}}function eB(i,t){const e=function wY(i,t){const o=new d1([],{},{},"",{},Po,t,null,i.root,-1,{});return new nB("",new ty(o,[]))}(i,t),n=new Vf([new Xw("",{})]),r=new Vf({}),s=new Vf({}),o=new Vf({}),l=new Vf(""),u=new i_(n,r,o,l,s,Po,t,e.root);return u.snapshot=e.root,new J3(new ty(u,[]),e)}class i_{constructor(t,e,n,r,s,o,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ce(t=>Jb(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ce(t=>Jb(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tB(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function AY(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class d1{constructor(t,e,n,r,s,o,l,u,p,v,w,I){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this.routeConfig=u,this._urlSegment=p,this._lastPathIndex=v,this._correctedLastPathIndex=I??v,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class nB extends Q3{constructor(t,e){super(e),this.url=t,DD(this,e)}toString(){return iB(this._root)}}function DD(i,t){t.value._routerState=i,t.children.forEach(e=>DD(i,e))}function iB(i){const t=i.children.length>0?` { ${i.children.map(iB).join(", ")} } `:"";return`${i.value}${t}`}function LD(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,ev(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),ev(t.params,e.params)||i.params.next(e.params),function BX(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!ev(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),ev(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function RD(i,t){const e=ev(i.params,t.params)&&function GX(i,t){return m0(i,t)&&i.every((e,n)=>ev(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||RD(i.parent,t.parent))}function Jw(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function IY(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Jw(i,n,r);return Jw(i,n)})}(i,t,e);return new ty(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(l=>Jw(i,l)),o}}const n=function SY(i){return new i_(new Vf(i.url),new Vf(i.params),new Vf(i.queryParams),new Vf(i.fragment),new Vf(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>Jw(i,s));return new ty(n,r)}}const PD="ngNavigationCancelingError";function rB(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=v0(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=sB(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function sB(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[PD]=!0,n.cancellationCode=t,e&&(n.url=e),n}function oB(i){return aB(i)&&v0(i.url)}function aB(i){return i&&i[PD]}class EY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new eA,this.attachRef=null}}let eA=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new EY,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const f1=!1;let kD=(()=>{class i{constructor(e,n,r,s,o){this.parentContexts=e,this.location=n,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Bn,this.deactivateEvents=new Bn,this.attachEvents=new Bn,this.detachEvents=new Bn,this.name=r||Po,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _i(4012,f1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _i(4012,f1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _i(4012,f1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new _i(4013,f1);this._activatedRoute=e;const r=this.location,o=e._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new TY(e,l,r.injector);if(n&&function MY(i){return!!i.resolveComponentFactory}(n)){const p=n.resolveComponentFactory(o);this.activated=r.createComponent(p,r.length,u)}else this.activated=r.createComponent(o,{index:r.length,injector:u,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(Xt(eA),Xt(dg),hd("name"),Xt(xo),Xt(ut))},i.\u0275dir=Yr({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class TY{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===i_?this.route:t===eA?this.childContexts:this.parent.get(t,e)}}let lB=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&Vn(0,"router-outlet")},dependencies:[kD],encapsulation:2}),i})();function cB(i,t){return i.providers&&!i._injector&&(i._injector=TI(i.providers,t,`Route: ${i.path}`)),i._injector??t}function FD(i){const t=i.children&&i.children.map(FD),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Po&&(e.component=lB),e}function mg(i){return i.outlet||Po}function uB(i,t){const e=i.filter(n=>mg(n)===t);return e.push(...i.filter(n=>mg(n)!==t)),e}function hB(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class kY{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),LD(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=nC(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Zh(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=nC(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=nC(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=nC(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new bY(s.value.snapshot))}),t.children.length&&this.forwardEvent(new yY(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(LD(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),LD(l.route.value),this.activateChildRoutes(t,null,o.children)}else{const l=hB(r.snapshot),u=l?.get(mi)??null;o.attachRef=null,o.route=r,o.resolver=u,o.injector=l,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class dB{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class p1{constructor(t,e){this.component=t,this.route=e}}function OY(i,t,e){const n=i._root;return tA(n,t?t._root:null,e,[n.value])}function g1(i,t,e){return(hB(t)??e).get(i)}function tA(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=nC(t);return i.children.forEach(o=>{(function NY(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,l=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function BY(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!m0(i.url,t.url);case"pathParamsOrQueryParamsChange":return!m0(i.url,t.url)||!ev(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!RD(i,t)||!ev(i.queryParams,t.queryParams);default:return!RD(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new dB(n)):(s.data=o.data,s._resolvedData=o._resolvedData),tA(i,t,s.component?l?l.children:null:e,n,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new p1(l.outlet.component,o))}else o&&nA(t,l,r),r.canActivateChecks.push(new dB(n)),tA(i,null,s.component?l?l.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Zh(s,(o,l)=>nA(o,e.getContext(l),r)),r}function nA(i,t,e){const n=nC(i),r=i.value;Zh(n,(s,o)=>{nA(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new p1(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function iA(i){return"function"==typeof i}function ND(i){return i instanceof n1||"EmptyError"===i?.name}const m1=Symbol("INITIAL_VALUE");function iC(){return dm(i=>S3(i.map(t=>t.pipe(Qb(1),function LX(...i){const t=ge(i);return st((e,n)=>{(t?gD(i,e,t):gD(i,e)).subscribe(n)})}(m1)))).pipe(ce(t=>{for(const e of t)if(!0!==e){if(e===m1)return m1;if(!1===e||e instanceof g0)return e}return!0}),gg(t=>t!==m1),Qb(1)))}function fB(i){return function qe(...i){return ot(i)}(Id(t=>{if(v0(t))throw rB(0,t)}),ce(t=>!0===t))}const BD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function pB(i,t,e,n,r){const s=zD(i,t,e);return s.matched?function tK(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?Xr(r.map(o=>{const l=i.get(o),u=function WY(i){return i&&iA(i.canMatch)}(l)?l.canMatch(t,e):l(t,e);return Jv(u)})).pipe(iC(),fB()):Xr(!0)}(n=cB(t,n),t,e).pipe(ce(o=>!0===o?s:{...BD})):Xr(s)}function zD(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...BD}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||NX)(e,i,t);if(!r)return{...BD};const s={};Zh(r.posParams,(l,u)=>{s[u]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function v1(i,t,e,n,r="corrected"){if(e.length>0&&function rK(i,t,e){return e.some(n=>y1(i,t,n)&&mg(n)!==Po)}(i,e,n)){const o=new Uo(t,function iK(i,t,e,n){const r={};r[Po]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&mg(s)!==Po){const o=new Uo([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[mg(s)]=o}return r}(i,t,n,new Uo(e,i.children)));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function sK(i,t,e){return e.some(n=>y1(i,t,n))}(i,e,n)){const o=new Uo(i.segments,function nK(i,t,e,n,r,s){const o={};for(const l of n)if(y1(i,e,l)&&!r[mg(l)]){const u=new Uo([],{});u._sourceSegment=i,u._segmentIndexShift="legacy"===s?i.segments.length:t.length,o[mg(l)]=u}return{...r,...o}}(i,t,e,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new Uo(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function y1(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function gB(i,t,e,n){return!!(mg(i)===n||n!==Po&&y1(t,e,i))&&("**"===i.path||zD(t,i,e).matched)}function mB(i,t,e){return 0===t.length&&!i.children[e]}const _1=!1;class b1{constructor(t){this.segmentGroup=t||null}}class vB{constructor(t){this.urlTree=t}}function rA(i){return Zb(new b1(i))}function yB(i){return Zb(new vB(i))}class cK{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=v1(this.urlTree.root,[],[],this.config).segmentGroup,e=new Uo(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Po).pipe(ce(s=>this.createUrlTree(u1(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Jm(s=>{if(s instanceof vB)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof b1?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Po).pipe(ce(r=>this.createUrlTree(u1(r),t.queryParams,t.fragment))).pipe(Jm(r=>{throw r instanceof b1?this.noMatchError(r):r}))}noMatchError(t){return new _i(4002,_1)}createUrlTree(t,e,n){const r=AD(t);return new g0(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(ce(s=>new Uo([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return ur(r).pipe(Zv(s=>{const o=n.children[s],l=uB(e,s);return this.expandSegmentGroup(t,l,o,s).pipe(ce(u=>({segment:u,outlet:s})))}),vD((s,o)=>(s[o.outlet]=o.segment,s),{}),L3())}expandSegment(t,e,n,r,s,o){return ur(n).pipe(Zv(l=>this.expandSegmentAgainstRoute(t,e,n,l,r,s,o).pipe(Jm(p=>{if(p instanceof b1)return Xr(null);throw p}))),n_(l=>!!l),Jm((l,u)=>{if(ND(l))return mB(e,r,s)?Xr(new Uo([],{})):rA(e);throw l}))}expandSegmentAgainstRoute(t,e,n,r,s,o,l){return gB(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):rA(e):rA(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?yB(s):this.lineralizeSegments(n,s).pipe(gl(o=>{const l=new Uo(o,{});return this.expandSegment(t,l,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:l,consumedSegments:u,remainingSegments:p,positionalParamSegments:v}=zD(e,r,s);if(!l)return rA(e);const w=this.applyRedirectCommands(u,r.redirectTo,v);return r.redirectTo.startsWith("/")?yB(w):this.lineralizeSegments(r,w).pipe(gl(I=>this.expandSegment(t,e,n,I.concat(p),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=cB(n,t),n.loadChildren?(n._loadedRoutes?Xr({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(ce(l=>(n._loadedRoutes=l.routes,n._loadedInjector=l.injector,new Uo(r,{})))):Xr(new Uo(r,{}))):pB(e,n,r,t).pipe(dm(({matched:o,consumedSegments:l,remainingSegments:u})=>o?this.getChildConfig(t=n._injector??t,n,r).pipe(gl(v=>{const w=v.injector??t,I=v.routes,{segmentGroup:T,slicedSegments:k}=v1(e,l,u,I),W=new Uo(T.segments,T.children);if(0===k.length&&W.hasChildren())return this.expandChildren(w,I,W).pipe(ce(Ae=>new Uo(l,Ae)));if(0===I.length&&0===k.length)return Xr(new Uo(l,{}));const K=mg(n)===s;return this.expandSegment(w,W,I,k,K?Po:s,!0).pipe(ce(Te=>new Uo(l.concat(Te.segments),Te.children)))})):rA(e)))}getChildConfig(t,e,n){return e.children?Xr({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Xr({routes:e._loadedRoutes,injector:e._loadedInjector}):function eK(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?Xr(!0):Xr(r.map(o=>{const l=i.get(o),u=function VY(i){return i&&iA(i.canLoad)}(l)?l.canLoad(t,e):l(t,e);return Jv(u)})).pipe(iC(),fB())}(t,e,n).pipe(gl(r=>r?this.configLoader.loadChildren(t,e).pipe(Id(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function aK(i){return Zb(sB(_1,3))}())):Xr({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Xr(n);if(r.numberOfChildren>1||!r.children[Po])return Zb(new _i(4e3,_1));r=r.children[Po]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new g0(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Zh(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const l=r.substring(1);n[s]=e[l]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return Zh(e.children,(l,u)=>{o[u]=this.createSegmentGroup(t,l,n,r)}),new Uo(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new _i(4001,_1);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class hK{}class pK{constructor(t,e,n,r,s,o,l,u){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=l,this.urlSerializer=u}recognize(){const t=v1(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Po).pipe(ce(e=>{if(null===e)return null;const n=new d1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Po,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ty(n,e),s=new nB(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=tB(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return ur(Object.keys(n.children)).pipe(Zv(r=>{const s=n.children[r],o=uB(e,r);return this.processSegmentGroup(t,o,s,r)}),vD((r,s)=>r&&s?(r.push(...s),r):null),function kX(i,t=!1){return st((e,n)=>{let r=0;e.subscribe(gt(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}(r=>null!==r),r1(null),L3(),ce(r=>{if(null===r)return null;const s=_B(r);return function gK(i){i.sort((t,e)=>t.value.outlet===Po?-1:e.value.outlet===Po?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return ur(e).pipe(Zv(o=>this.processSegmentAgainstRoute(o._injector??t,o,n,r,s)),n_(o=>!!o),Jm(o=>{if(ND(o))return mB(n,r,s)?Xr([]):Xr(null);throw o}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!gB(e,n,r,s))return Xr(null);let o;if("**"===e.path){const l=r.length>0?k3(r).parameters:{},u=CB(n)+r.length;o=Xr({snapshot:new d1(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AB(e),mg(e),e.component??e._loadedComponent??null,e,bB(n),u,xB(e),u),consumedSegments:[],remainingSegments:[]})}else o=pB(n,e,r,t).pipe(ce(({matched:l,consumedSegments:u,remainingSegments:p,parameters:v})=>{if(!l)return null;const w=CB(n)+u.length;return{snapshot:new d1(u,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AB(e),mg(e),e.component??e._loadedComponent??null,e,bB(n),w,xB(e),w),consumedSegments:u,remainingSegments:p}}));return o.pipe(dm(l=>{if(null===l)return Xr(null);const{snapshot:u,consumedSegments:p,remainingSegments:v}=l;t=e._injector??t;const w=e._loadedInjector??t,I=function mK(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:T,slicedSegments:k}=v1(n,p,v,I.filter(K=>void 0===K.redirectTo),this.relativeLinkResolution);if(0===k.length&&T.hasChildren())return this.processChildren(w,I,T).pipe(ce(K=>null===K?null:[new ty(u,K)]));if(0===I.length&&0===k.length)return Xr([new ty(u,[])]);const W=mg(e)===s;return this.processSegment(w,I,T,k,W?Po:s).pipe(ce(K=>null===K?null:[new ty(u,K)]))}))}}function vK(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function _B(i){const t=[],e=new Set;for(const n of i){if(!vK(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=_B(n.children);t.push(new ty(n.value,r))}return t.filter(n=>!e.has(n))}function bB(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function CB(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function AB(i){return i.data||{}}function xB(i){return i.resolve||{}}const VD=Symbol("RouteTitle");function IB(i){return"string"==typeof i.title||null===i.title}function UD(i){return dm(t=>{const e=i(t);return e?ur(e).pipe(ce(()=>t)):Xr(t)})}let SB=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===Po);return n}getResolvedTitleForRoute(e){return e.data[VD]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:function(){return fa(EB)},providedIn:"root"}),i})(),EB=(()=>{class i extends SB{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(Yn(aD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class IK{}class EK extends class SK{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const HD=new rr("",{providedIn:"root",factory:()=>({})}),GD=new rr("ROUTES");let WD=(()=>{class i{constructor(e,n){this.injector=e,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Xr(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Jv(e.loadComponent()).pipe(Id(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),_D(()=>{this.componentLoaders.delete(e)})),r=new M3(n,()=>new Ge).pipe(mD());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Xr({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(ce(l=>{this.onLoadEndListener&&this.onLoadEndListener(n);let u,p,v=!1;Array.isArray(l)?p=l:(u=l.create(e).injector,p=P3(u.get(GD,[],os.Self|os.Optional)));return{routes:p.map(FD),injector:u}}),_D(()=>{this.childrenLoaders.delete(n)})),o=new M3(s,()=>new Ge).pipe(mD());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(e){return Jv(e()).pipe(gl(n=>n instanceof eF||Array.isArray(n)?Xr(n):ur(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(e){return new(e||i)(Yn(Iu),Yn(SM))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class MK{}class DK{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function LK(i){throw i}function RK(i,t,e){return t.parse("/")}const PK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function MB(){const i=fa(V3),t=fa(eA),e=fa(UM),n=fa(Iu),r=fa(SM),s=fa(GD,{optional:!0})??[],o=fa(HD,{optional:!0})??{},l=fa(EB),u=fa(SB,{optional:!0}),p=fa(MK,{optional:!0}),v=fa(IK,{optional:!0}),w=new bh(null,i,t,e,n,r,P3(s));return p&&(w.urlHandlingStrategy=p),v&&(w.routeReuseStrategy=v),w.titleStrategy=u??l,function OK(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(o,w),w}let bh=(()=>{class i{constructor(e,n,r,s,o,l,u){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ge,this.errorHandler=LK,this.malformedUriErrorHandler=RK,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Xr(void 0),this.urlHandlingStrategy=new DK,this.routeReuseStrategy=new EK,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(WD),this.configLoader.onLoadEndListener=I=>this.triggerEvent(new mY(I)),this.configLoader.onLoadStartListener=I=>this.triggerEvent(new gY(I)),this.ngModule=o.get(u0),this.console=o.get(x7);const w=o.get(Vo);this.isNgZoneEnabled=w instanceof Vo&&Vo.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function zX(){return new g0(new Uo([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=eB(this.currentUrlTree,this.rootComponentType),this.transitions=new Vf({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(gg(r=>0!==r.id),ce(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),dm(r=>{let s=!1,o=!1;return Xr(r).pipe(Id(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),dm(l=>{const u=this.browserUrlTree.toString(),p=!this.navigated||l.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||p)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return DB(l.source)&&(this.browserUrlTree=l.extractedUrl),Xr(l).pipe(dm(w=>{const I=this.transitions.getValue();return n.next(new ED(w.id,this.serializeUrl(w.extractedUrl),w.source,w.restoredState)),I!==this.transitions.getValue()?rl:Promise.resolve(w)}),function uK(i,t,e,n){return dm(r=>function lK(i,t,e,n,r){return new cK(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(ce(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Id(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},r.urlAfterRedirects=w.urlAfterRedirects}),function _K(i,t,e,n,r,s){return gl(o=>function fK(i,t,e,n,r,s,o="emptyOnly",l="legacy"){return new pK(i,t,e,n,r,o,l,s).recognize().pipe(dm(u=>null===u?function dK(i){return new yt(t=>t.error(i))}(new hK):Xr(u)))}(i,t,e,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,r,s).pipe(ce(l=>({...o,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Id(w=>{if(r.targetSnapshot=w.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!w.extras.skipLocationChange){const T=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);this.setBrowserUrl(T,w)}this.browserUrlTree=w.urlAfterRedirects}const I=new uY(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);n.next(I)}));if(p&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:T,source:k,restoredState:W,extras:K}=l,he=new ED(I,this.serializeUrl(T),k,W);n.next(he);const Te=eB(T,this.rootComponentType).snapshot;return Xr(r={...l,targetSnapshot:Te,urlAfterRedirects:T,extras:{...K,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=l.rawUrl,l.resolve(null),rl}),Id(l=>{const u=new hY(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),ce(l=>r={...l,guards:OY(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function $Y(i,t){return gl(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Xr({...e,guardsResult:!0}):function qY(i,t,e,n){return ur(i).pipe(gl(r=>function JY(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Xr(s.map(l=>{const u=g1(l,t,r);return Jv(function GY(i){return i&&iA(i.canDeactivate)}(u)?u.canDeactivate(i,t,e,n):u(i,t,e,n)).pipe(n_())})).pipe(iC()):Xr(!0)}(r.component,r.route,e,t,n)),n_(r=>!0!==r,!0))}(o,n,r,i).pipe(gl(l=>l&&function zY(i){return"boolean"==typeof i}(l)?function XY(i,t,e,n){return ur(t).pipe(Zv(r=>gD(function KY(i,t){return null!==i&&t&&t(new vY(i)),Xr(!0)}(r.route.parent,n),function YY(i,t){return null!==i&&t&&t(new _Y(i)),Xr(!0)}(r.route,n),function QY(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function FY(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>T3(()=>Xr(o.guards.map(u=>{const p=g1(u,o.node,e);return Jv(function HY(i){return i&&iA(i.canActivateChild)}(p)?p.canActivateChild(n,i):p(n,i)).pipe(n_())})).pipe(iC())));return Xr(s).pipe(iC())}(i,r.path,e),function ZY(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return Xr(!0);const r=n.map(s=>T3(()=>{const o=g1(s,t,e);return Jv(function UY(i){return i&&iA(i.canActivate)}(o)?o.canActivate(t,i):o(t,i)).pipe(n_())}));return Xr(r).pipe(iC())}(i,r.route,e))),n_(r=>!0!==r,!0))}(n,s,i,t):Xr(l)),ce(l=>({...e,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),Id(l=>{if(r.guardsResult=l.guardsResult,v0(l.guardsResult))throw rB(0,l.guardsResult);const u=new dY(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(u)}),gg(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),UD(l=>{if(l.guards.canActivateChecks.length)return Xr(l).pipe(Id(u=>{const p=new fY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}),dm(u=>{let p=!1;return Xr(u).pipe(function bK(i,t){return gl(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return Xr(e);let s=0;return ur(r).pipe(Zv(o=>function CK(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!IB(r)&&(s[VD]=r.title),function wK(i,t,e,n){const r=function AK(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return Xr({});const s={};return ur(r).pipe(gl(o=>function xK(i,t,e,n){const r=g1(i,t,n);return Jv(r.resolve?r.resolve(t,e):r(t,e))}(i[o],t,e,n).pipe(n_(),Id(l=>{s[o]=l}))),yD(1),function OX(i){return ce(()=>i)}(s),Jm(o=>ND(o)?rl:Zb(o)))}(s,i,t,n).pipe(ce(o=>(i._resolvedData=o,i.data=tB(i,e).resolve,r&&IB(r)&&(i.data[VD]=r.title),null)))}(o.route,n,i,t)),Id(()=>s++),yD(1),gl(o=>s===r.length?Xr(e):rl))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Id({next:()=>p=!0,complete:()=>{p||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),Id(u=>{const p=new pY(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}))}),UD(l=>{const u=p=>{const v=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(p.routeConfig).pipe(Id(w=>{p.component=w}),ce(()=>{})));for(const w of p.children)v.push(...u(w));return v};return S3(u(l.targetSnapshot.root)).pipe(r1(),Qb(1))}),UD(()=>this.afterPreactivation()),ce(l=>{const u=function xY(i,t,e){const n=Jw(i,t._root,e?e._root:void 0);return new J3(n,t)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:u}}),Id(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((i,t,e)=>ce(n=>(new kY(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),Id({next(){s=!0},complete(){s=!0}}),_D(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Jm(l=>{if(o=!0,aB(l)){oB(l)||(this.navigated=!0,this.restoreHistory(r,!0));const u=new h1(r.id,this.serializeUrl(r.extractedUrl),l.message,l.cancellationCode);if(n.next(u),oB(l)){const p=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||DB(r.source)};this.scheduleNavigation(p,"imperative",null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const u=new K3(r.id,this.serializeUrl(r.extractedUrl),l,r.targetSnapshot??void 0);n.next(u);try{r.resolve(this.errorHandler(l))}catch(p){r.reject(p)}}return rl}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(FD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:u}=n,p=r||this.routerState.root,v=u?this.currentUrlTree.fragment:o;let w=null;switch(l){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),rY(p,this.currentUrlTree,e,w,v??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=v0(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function FK(i){for(let t=0;t<i.length;t++){if(null==i[t])throw new _i(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...PK}:!1===n?{...kK}:n,v0(e))return F3(this.currentUrlTree,e,r);const s=this.parseUrl(e);return F3(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new y0(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let l,u,p;o?(l=o.resolve,u=o.reject,p=o.promise):p=new Promise((I,T)=>{l=I,u=T});const v=++this.navigationId;let w;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),w=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):w=0,this.setTransition({id:v,targetPageId:w,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:l,reject:u,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(I=>Promise.reject(I))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n,r){const s=new h1(e.id,this.serializeUrl(e.extractedUrl),n,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){bw()},i.\u0275prov=Zi({token:i,factory:function(){return MB()},providedIn:"root"}),i})();function DB(i){return"imperative"!==i}let jD=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new Ge,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const n=this.renderer,r=this.el.nativeElement;null!==e?n.setAttribute(r,"tabindex",e):n.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:Xv(this.skipLocationChange),replaceUrl:Xv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xv(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(i_),hd("tabindex"),Xt(d),Xt(Zn))},i.\u0275dir=Yr({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,n){1&e&&mn("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[da]}),i})(),rC=(()=>{class i{constructor(e,n,r){this.router=e,this.route=n,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new Ge,this.subscription=e.events.subscribe(s=>{s instanceof y0&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,r,s,o){if(0!==e||n||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const l={skipLocationChange:Xv(this.skipLocationChange),replaceUrl:Xv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Xv(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(i_),Xt(f0))},i.\u0275dir=Yr({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&mn("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&vr("target",n.target)("href",n.href,Xh)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[da]}),i})(),$D=(()=>{class i{constructor(e,n,r,s,o,l){this.router=e,this.element=n,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Bn,this.routerEventsSubscription=e.events.subscribe(u=>{u instanceof y0&&this.update()})}ngAfterContentInit(){Xr(this.links.changes,this.linksWithHrefs.changes,Xr(null)).pipe(Sc()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=ur(e).pipe(Sc()).subscribe(n=>{this.isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const n=function NK(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,n)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(Zn),Xt(d),Xt(xo),Xt(jD,8),Xt(rC,8))},i.\u0275dir=Yr({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,jD,5),Ba(r,rC,5)),2&e){let s;Wi(s=ji())&&(n.links=s),Wi(s=ji())&&(n.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[da]}),i})();class LB{}let RB=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(gg(e=>e instanceof y0),Zv(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=TI(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,l=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(l,s.children??s._loadedRoutes))}return ur(r).pipe(Sc())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):Xr(null);const s=r.pipe(gl(o=>null===o?Xr(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?ur([s,this.loader.loadComponent(n)]).pipe(Sc()):s})}}return i.\u0275fac=function(e){return new(e||i)(Yn(bh),Yn(SM),Yn(ut),Yn(LB),Yn(WD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const PB=new rr("");let BK=(()=>{class i{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ED?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof y0&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Z3&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new Z3(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){bw()},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const kB=new rr("ROUTER_FORROOT_GUARD"),OB=new rr(""),zK=[UM,{provide:V3,useClass:CD},{provide:bh,useFactory:MB},eA,{provide:i_,useFactory:function VK(i){return i.routerState.root},deps:[bh]},WD];function UK(){return new QF("Router",bh)}let s_=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[zK,[],FB(e),{provide:kB,useFactory:jK,deps:[[bh,new Ml,new mh]]},{provide:HD,useValue:n||{}},n?.useHash?{provide:f0,useClass:f$}:{provide:f0,useClass:AN},{provide:PB,useFactory:()=>{const i=fa(bh),t=fa(Eq),e=fa(HD);return e.scrollOffset&&t.setOffset(e.scrollOffset),new BK(i,t,e)}},n?.preloadingStrategy?QK(n.preloadingStrategy):[],{provide:QF,multi:!0,useFactory:UK},n?.initialNavigation?qK(n):[],[{provide:NB,useFactory:$K},{provide:WF,multi:!0,useExisting:NB}]]}}static forChild(e){return{ngModule:i,providers:[FB(e)]}}}return i.\u0275fac=function(e){return new(e||i)(Yn(kB,8))},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({}),i})();function jK(i){return"guarded"}function FB(i){return[{provide:GD,multi:!0,useValue:i}]}function $K(){const i=fa(Iu);return t=>{const e=i.get(Hw);if(t!==e.components[0])return;const n=i.get(bh),r=i.get(BB);1===i.get(qD)&&n.initialNavigation(),i.get(OB,null,os.Optional)?.setUpPreloading(),i.get(PB,null,os.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const NB=new rr("");function qK(i){return["disabled"===i.initialNavigation?[{provide:Vw,multi:!0,useFactory:()=>{const i=fa(bh);return()=>{i.setUpLocationChangeListener()}}},{provide:qD,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:qD,useValue:0},{provide:Vw,multi:!0,deps:[Iu],useFactory:i=>{const t=i.get(h$,Promise.resolve(null));let e=!1;return()=>t.then(()=>new Promise(r=>{const s=i.get(bh),o=i.get(BB);(function n(r){i.get(bh).events.pipe(gg(o=>o instanceof y0||o instanceof h1||o instanceof K3),ce(o=>o instanceof y0||o instanceof h1&&(0===o.code||1===o.code)&&null),gg(o=>null!==o),Qb(1)).subscribe(()=>{r()})})(()=>{r(!0),e=!0}),s.afterPreactivation=()=>(r(!0),e||o.closed?Xr(void 0):o),s.initialNavigation()}))}}]:[]]}const BB=new rr("",{factory:()=>new Ge}),qD=new rr("",{providedIn:"root",factory:()=>1});function QK(i){return[RB,{provide:OB,useExisting:RB},{provide:LB,useExisting:i}]}var Ki=z(7489);class Ji{static equals(t,e,n){return n?this.resolveFieldData(t,n)===this.resolveFieldData(e,n):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,o,l,n=Array.isArray(t),r=Array.isArray(e);if(n&&r){if((o=t.length)!=e.length)return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(n!=r)return!1;var u=t instanceof Date,p=e instanceof Date;if(u!=p)return!1;if(u&&p)return t.getTime()==e.getTime();var v=t instanceof RegExp,w=e instanceof RegExp;if(v!=w)return!1;if(v&&w)return t.toString()==e.toString();var I=Object.keys(t);if((o=I.length)!==Object.keys(e).length)return!1;for(s=o;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,I[s]))return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[l=I[s]],e[l]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let n=e.split("."),r=t;for(let s=0,o=n.length;s<o;++s){if(null==r)return null;r=r[n[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,n,r){if(n.length>0){let s=!1;for(let o=0;o<n.length;o++)if(this.findIndexInList(n[o],r)>e){n.splice(o,0,t),s=!0;break}s||n.push(t)}else n.push(t)}static findIndexInList(t,e){let n=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){n=r;break}return n}static contains(t,e){if(null!=t&&e&&e.length)for(let n of e)if(this.equals(t,n))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}}var zB=0;function sC(){return"pr_id_"+ ++zB}var Ll=function JK(){let i=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,l)=>{o&&(o.style.zIndex=String(((s,o)=>{let l=i.length>0?i[i.length-1]:{key:s,value:o},u=l.value+(l.key===s?0:o)+1;return i.push({key:s,value:u}),u})(s,l)))},clear:s=>{s&&((s=>{i=i.filter(o=>o.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const VB=["*"];let Qh=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.IN="in",i.LESS_THAN="lt",i.LESS_THAN_OR_EQUAL_TO="lte",i.GREATER_THAN="gt",i.GREATER_THAN_OR_EQUAL_TO="gte",i.BETWEEN="between",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.DATE_IS="dateIs",i.DATE_IS_NOT="dateIsNot",i.DATE_BEFORE="dateBefore",i.DATE_AFTER="dateAfter",i})(),Dp=(()=>{class i{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Qh.STARTS_WITH,Qh.CONTAINS,Qh.NOT_CONTAINS,Qh.ENDS_WITH,Qh.EQUALS,Qh.NOT_EQUALS],numeric:[Qh.EQUALS,Qh.NOT_EQUALS,Qh.LESS_THAN,Qh.LESS_THAN_OR_EQUAL_TO,Qh.GREATER_THAN,Qh.GREATER_THAN_OR_EQUAL_TO],date:[Qh.DATE_IS,Qh.DATE_IS_NOT,Qh.DATE_BEFORE,Qh.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Ge,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),qc=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.NO_FILTER="noFilter",i.LT="lt",i.LTE="lte",i.GT="gt",i.GTE="gte",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.CLEAR="clear",i.APPLY="apply",i.MATCH_ALL="matchAll",i.MATCH_ANY="matchAny",i.ADD_RULE="addRule",i.REMOVE_RULE="removeRule",i.ACCEPT="accept",i.REJECT="reject",i.CHOOSE="choose",i.UPLOAD="upload",i.CANCEL="cancel",i.DAY_NAMES="dayNames",i.DAY_NAMES_SHORT="dayNamesShort",i.DAY_NAMES_MIN="dayNamesMin",i.MONTH_NAMES="monthNames",i.MONTH_NAMES_SHORT="monthNamesShort",i.FIRST_DAY_OF_WEEK="firstDayOfWeek",i.TODAY="today",i.WEEK_HEADER="weekHeader",i.WEAK="weak",i.MEDIUM="medium",i.STRONG="strong",i.PASSWORD_PROMPT="passwordPrompt",i.EMPTY_MESSAGE="emptyMessage",i.EMPTY_FILTER_MESSAGE="emptyFilterMessage",i})(),sA=(()=>{class i{constructor(){this.requireConfirmationSource=new Ge,this.acceptConfirmationSource=new Ge,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),oA=(()=>{class i{constructor(){this.filters={startsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=Ji.removeAccents(n.toString()).toLocaleLowerCase(r);return Ji.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=Ji.removeAccents(n.toString()).toLocaleLowerCase(r);return-1!==Ji.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=Ji.removeAccents(n.toString()).toLocaleLowerCase(r);return-1===Ji.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=Ji.removeAccents(n.toString()).toLocaleLowerCase(r),o=Ji.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==o.indexOf(s,o.length-s.length)},equals:(e,n,r)=>null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():Ji.removeAccents(e.toString()).toLocaleLowerCase(r)==Ji.removeAccents(n.toString()).toLocaleLowerCase(r)),notEquals:(e,n,r)=>!(null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():Ji.removeAccents(e.toString()).toLocaleLowerCase(r)==Ji.removeAccents(n.toString()).toLocaleLowerCase(r))),in:(e,n)=>{if(null==n||0===n.length)return!0;for(let r=0;r<n.length;r++)if(Ji.equals(e,n[r]))return!0;return!1},between:(e,n)=>null==n||null==n[0]||null==n[1]||null!=e&&(e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]),lt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<n.getTime():e<n),lte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n),gt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>n.getTime():e>n),gte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n),is:(e,n,r)=>this.filters.equals(e,n,r),isNot:(e,n,r)=>this.filters.notEquals(e,n,r),before:(e,n,r)=>this.filters.lt(e,n,r),after:(e,n,r)=>this.filters.gt(e,n,r),dateIs:(e,n)=>null==n||null!=e&&e.toDateString()===n.toDateString(),dateIsNot:(e,n)=>null==n||null!=e&&e.toDateString()!==n.toDateString(),dateBefore:(e,n)=>null==n||null!=e&&e.getTime()<n.getTime(),dateAfter:(e,n)=>null==n||null!=e&&e.getTime()>n.getTime()}}filter(e,n,r,s,o){let l=[];if(e)for(let u of e)for(let p of n){let v=Ji.resolveFieldData(u,p);if(this.filters[s](v,r,o)){l.push(u);break}}return l}register(e,n){this.filters[e]=n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),UB=(()=>{class i{constructor(){this.activeItemKeyChange=new Ge,this.activeItemKeyChange$=this.activeItemKeyChange.asObservable()}changeKey(e){this.activeItemKey=e,this.activeItemKeyChange.next(this.activeItemKey)}reset(){this.activeItemKey=null,this.activeItemKeyChange.next(this.activeItemKey)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),fm=(()=>{class i{constructor(){this.messageSource=new Ge,this.clearSource=new Ge,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),aA=(()=>{class i{constructor(){this.clickSource=new Ge,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),HB=(()=>{class i{}return i.AND="and",i.OR="or",i})(),XD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-header"]],ngContentSelectors:VB,decls:1,vars:0,template:function(e,n){1&e&&(Bf(),su(0))},encapsulation:2}),i})(),A1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-footer"]],ngContentSelectors:VB,decls:1,vars:0,template:function(e,n){1&e&&(Bf(),su(0))},encapsulation:2}),i})(),za=(()=>{class i{constructor(e){this.template=e}getType(){return this.name}}return i.\u0275fac=function(e){return new(e||i)(Xt(lm))},i.\u0275dir=Yr({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),i})(),xa=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})(),eZ=(()=>{class i{constructor(){this.dragStartSource=new Ge,this.dragStopSource=new Ge,this.dragStart$=this.dragStartSource.asObservable(),this.dragStop$=this.dragStopSource.asObservable()}startDrag(e){this.dragStartSource.next(e)}stopDrag(e){this.dragStopSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class tZ extends V{constructor(t,e){super()}schedule(t,e=0){return this}}const x1={setInterval(i,t,...e){const{delegate:n}=x1;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=x1;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class GB extends tZ{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return x1.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;x1.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,O(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const YD={now:()=>(YD.delegate||Date).now(),delegate:void 0};class lA{constructor(t,e=lA.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}lA.now=YD.now;class WB extends lA{constructor(t,e=lA.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const rZ=new class iZ extends WB{}(class nZ extends GB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!=n&&n>0||null==n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});function jB(i,t=ke){return i=i??aZ,st((e,n)=>{let r,s=!0;e.subscribe(gt(n,o=>{const l=t(o);(s||!i(r,l))&&(s=!1,r=l,n.next(o))}))})}function aZ(i,t){return i===t}const cA={};function oC(i,t){if(cA[i]=(cA[i]||0)+1,"function"==typeof t)return KD(i,(...n)=>({...t(...n),type:i}));switch(t?t._as:"empty"){case"empty":return KD(i,()=>({type:i}));case"props":return KD(i,n=>({...n,type:i}));default:throw new Error("Unexpected config.")}}function KD(i,t){return Object.defineProperty(t,"type",{value:i,writable:!1})}const $B="@ngrx/store/init";let lC=(()=>{class i extends Vf{constructor(){super({type:$B})}next(e){if("function"==typeof e)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof e>"u")throw new TypeError("Actions must be objects");if(typeof e.type>"u")throw new TypeError("Actions must have a type property");super.next(e)}complete(){}ngOnDestroy(){super.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const uZ=[lC],qB=new rr("@ngrx/store Internal Root Guard"),XB=new rr("@ngrx/store Internal Initial State"),QD=new rr("@ngrx/store Initial State"),YB=new rr("@ngrx/store Reducer Factory"),KB=new rr("@ngrx/store Internal Reducer Factory Provider"),ZB=new rr("@ngrx/store Initial Reducers"),JD=new rr("@ngrx/store Internal Initial Reducers"),QB=new rr("@ngrx/store Store Features"),JB=new rr("@ngrx/store Internal Store Reducers"),e2=new rr("@ngrx/store Internal Feature Reducers"),ez=new rr("@ngrx/store Internal Feature Configs"),tz=new rr("@ngrx/store Internal Store Features"),nz=new rr("@ngrx/store Internal Feature Reducers Token"),iz=new rr("@ngrx/store Feature Reducers"),rz=new rr("@ngrx/store User Provided Meta Reducers"),I1=new rr("@ngrx/store Meta Reducers"),sz=new rr("@ngrx/store Internal Resolved Meta Reducers"),oz=new rr("@ngrx/store User Runtime Checks Config"),az=new rr("@ngrx/store Internal User Runtime Checks Config"),uA=new rr("@ngrx/store Internal Runtime Checks"),t2=new rr("@ngrx/store Check if Action types are unique");function n2(i,t={}){const e=Object.keys(i),n={};for(let s=0;s<e.length;s++){const o=e[s];"function"==typeof i[o]&&(n[o]=i[o])}const r=Object.keys(n);return function(o,l){o=void 0===o?t:o;let u=!1;const p={};for(let v=0;v<r.length;v++){const w=r[v],T=o[w],k=(0,n[w])(T,l);p[w]=k,u=u||k!==T}return u?p:o}}function lz(...i){return function(t){if(0===i.length)return t;const e=i[i.length-1];return i.slice(0,-1).reduceRight((r,s)=>s(r),e(t))}}function cz(i,t){return Array.isArray(t)&&t.length>0&&(i=lz.apply(null,[...t,i])),(e,n)=>{const r=i(e);return(s,o)=>r(s=void 0===s?n:s,o)}}class r2 extends yt{}class uz extends lC{}let S1=(()=>{class i extends Vf{constructor(e,n,r,s){super(s(r,n)),this.dispatcher=e,this.initialState=n,this.reducers=r,this.reducerFactory=s}get currentReducers(){return this.reducers}addFeature(e){this.addFeatures([e])}addFeatures(e){const n=e.reduce((r,{reducers:s,reducerFactory:o,metaReducers:l,initialState:u,key:p})=>{const v="function"==typeof s?function dZ(i){const t=Array.isArray(i)&&i.length>0?lz(...i):e=>e;return(e,n)=>(e=t(e),(r,s)=>e(r=void 0===r?n:r,s))}(l)(s,u):cz(o,l)(s,u);return r[p]=v,r},{});this.addReducers(n)}removeFeature(e){this.removeFeatures([e])}removeFeatures(e){this.removeReducers(e.map(n=>n.key))}addReducer(e,n){this.addReducers({[e]:n})}addReducers(e){this.reducers={...this.reducers,...e},this.updateReducers(Object.keys(e))}removeReducer(e){this.removeReducers([e])}removeReducers(e){e.forEach(n=>{this.reducers=function hZ(i,t){return Object.keys(i).filter(e=>e!==t).reduce((e,n)=>Object.assign(e,{[n]:i[n]}),{})}(this.reducers,n)}),this.updateReducers(e)}updateReducers(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:e})}ngOnDestroy(){this.complete()}}return i.\u0275fac=function(e){return new(e||i)(Yn(uz),Yn(QD),Yn(ZB),Yn(YB))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const pZ=[S1,{provide:r2,useExisting:S1},{provide:uz,useExisting:lC}];let s2=(()=>{class i extends Ge{ngOnDestroy(){this.complete()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=jo(i)))(n||i)}}(),i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const gZ=[s2];class hz extends yt{}let dz=(()=>{class i extends Vf{constructor(e,n,r,s){super(s);const l=e.pipe(it(rZ)).pipe(function sZ(...i){const t=ct(i);return st((e,n)=>{const r=i.length,s=new Array(r);let o=i.map(()=>!1),l=!1;for(let u=0;u<r;u++)pl(i[u]).subscribe(gt(n,p=>{s[u]=p,!l&&!o[u]&&(o[u]=!0,(l=o.every(ke))&&(o=null))},ie));e.subscribe(gt(n,u=>{if(l){const p=[u,...s];n.next(t?t(...p):p)}}))})}(n)),p=l.pipe(vD(mZ,{state:s}));this.stateSubscription=p.subscribe(({state:v,action:w})=>{this.next(v),r.next(w)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return i.INIT=$B,i.\u0275fac=function(e){return new(e||i)(Yn(lC),Yn(r2),Yn(s2),Yn(QD))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();function mZ(i={state:void 0},[t,e]){const{state:n}=i;return{state:e(n,t),action:t}}const vZ=[dz,{provide:hz,useExisting:dz}];let ny=(()=>{class i extends yt{constructor(e,n,r){super(),this.actionsObserver=n,this.reducerManager=r,this.source=e}select(e,...n){return _Z.call(null,e,...n)(this)}lift(e){const n=new i(this,this.actionsObserver,this.reducerManager);return n.operator=e,n}dispatch(e){this.actionsObserver.next(e)}next(e){this.actionsObserver.next(e)}error(e){this.actionsObserver.error(e)}complete(){this.actionsObserver.complete()}addReducer(e,n){this.reducerManager.addReducer(e,n)}removeReducer(e){this.reducerManager.removeReducer(e)}}return i.\u0275fac=function(e){return new(e||i)(Yn(hz),Yn(lC),Yn(S1))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const yZ=[ny];function _Z(i,t,...e){return function(r){let s;if("string"==typeof i){const o=[t,...e].filter(Boolean);s=r.pipe(function oZ(...i){const t=i.length;if(0===t)throw new Error("list of properties cannot be empty.");return ce(e=>{let n=e;for(let r=0;r<t;r++){const s=n?.[i[r]];if(!(typeof s<"u"))return;n=s}return n})}(i,...o))}else{if("function"!=typeof i)throw new TypeError(`Unexpected type '${typeof i}' in select operator, expected 'string' or 'function'`);s=r.pipe(ce(o=>i(o,t)))}return s.pipe(jB())}}const o2="https://ngrx.io/guide/store/configuration/runtime-checks";function fz(i){return void 0===i}function pz(i){return null===i}function gz(i){return Array.isArray(i)}function mz(i){return"object"==typeof i&&null!==i}function a2(i){return"function"==typeof i}function l2(i,t){return i===t}function EZ(i,t,e){for(let n=0;n<i.length;n++)if(!e(i[n],t[n]))return!0;return!1}function c2(i,t=l2,e=l2){let s,n=null,r=null;return{memoized:function p(){if(void 0!==s)return s.result;if(!n)return r=i.apply(null,arguments),n=arguments,r;if(!EZ(arguments,n,t))return r;const v=i.apply(null,arguments);return n=arguments,e(r,v)?r:(r=v,v)},reset:function o(){n=null,r=null},setResult:function l(v){s={result:v}},clearResult:function u(){s=void 0}}}function TZ(i,t,e,n){if(void 0===e){const s=t.map(o=>o(i));return n.memoized.apply(null,s)}const r=t.map(s=>s(i,e));return n.memoized.apply(null,[...r,e])}function hA(i){return function _z(...i){return function MZ(i,t={stateFn:TZ}){return function(...e){let n=e;if(Array.isArray(n[0])){const[v,...w]=n;n=[...v,...w]}const r=n.slice(0,n.length-1),s=n[n.length-1],o=r.filter(v=>v.release&&"function"==typeof v.release),l=i(function(...v){return s.apply(null,v)}),u=c2(function(v,w){return t.stateFn.apply(null,[v,r,w,l])});return Object.assign(u.memoized,{release:function p(){u.reset(),l.reset(),o.forEach(v=>v.release())},projector:l.memoized,setResult:u.setResult,clearResult:u.clearResult})}}(c2)(...i)}(t=>{const e=t[i];return cN()&&!(i in t)&&console.warn(`@ngrx/store: The feature name "${i}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${i}', ...) or StoreModule.forFeature('${i}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),e},t=>t)}function u2(i){Object.freeze(i);const t=a2(i);return Object.getOwnPropertyNames(i).forEach(e=>{if(!e.startsWith("\u0275")&&function IZ(i,t){return Object.prototype.hasOwnProperty.call(i,t)}(i,e)&&(!t||"caller"!==e&&"callee"!==e&&"arguments"!==e)){const n=i[e];(mz(n)||a2(n))&&!Object.isFrozen(n)&&u2(n)}}),i}function h2(i,t=[]){return(fz(i)||pz(i))&&0===t.length?{path:["root"],value:i}:Object.keys(i).reduce((n,r)=>{if(n)return n;const s=i[r];return function xZ(i){return a2(i)&&i.hasOwnProperty("\u0275cmp")}(s)?n:!(fz(s)||pz(s)||function wZ(i){return"number"==typeof i}(s)||function CZ(i){return"boolean"==typeof i}(s)||function bZ(i){return"string"==typeof i}(s)||gz(s))&&(function vz(i){if(!function AZ(i){return mz(i)&&!gz(i)}(i))return!1;const t=Object.getPrototypeOf(i);return t===Object.prototype||null===t}(s)?h2(s,[...t,r]):{path:[...t,r],value:s})},!1)}function bz(i,t){if(!1===i)return;const e=i.path.join("."),n=new Error(`Detected unserializable ${t} at "${e}". ${o2}#strict${t}serializability`);throw n.value=i.value,n.unserializablePath=e,n}function OZ(i){return cN()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...i}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function FZ({strictActionSerializability:i,strictStateSerializability:t}){return e=>i||t?function PZ(i,t){return function(e,n){t.action(n)&&bz(h2(n),"action");const r=i(e,n);return t.state()&&bz(h2(r),"state"),r}}(e,{action:n=>i&&!d2(n),state:()=>t}):e}function NZ({strictActionImmutability:i,strictStateImmutability:t}){return e=>i||t?function RZ(i,t){return function(e,n){const r=t.action(n)?u2(n):n,s=i(e,r);return t.state()?u2(s):s}}(e,{action:n=>i&&!d2(n),state:()=>t}):e}function d2(i){return i.type.startsWith("@ngrx")}function BZ({strictActionWithinNgZone:i}){return t=>i?function kZ(i,t){return function(e,n){if(t.action(n)&&!Vo.isInAngularZone())throw new Error(`Action '${n.type}' running outside NgZone. ${o2}#strictactionwithinngzone`);return i(e,n)}}(t,{action:e=>i&&!d2(e)}):t}function zZ(i){return[{provide:az,useValue:i},{provide:oz,useFactory:VZ,deps:[az]},{provide:uA,deps:[oz],useFactory:OZ},{provide:I1,multi:!0,deps:[uA],useFactory:NZ},{provide:I1,multi:!0,deps:[uA],useFactory:FZ},{provide:I1,multi:!0,deps:[uA],useFactory:BZ}]}function Cz(){return[{provide:t2,multi:!0,deps:[uA],useFactory:UZ}]}function VZ(i){return i}function UZ(i){if(!i.strictActionTypeUniqueness)return;const t=Object.entries(cA).filter(([,e])=>e>1).map(([e])=>e);if(t.length)throw new Error(`Action types are registered more than once, ${t.map(e=>`"${e}"`).join(", ")}. ${o2}#strictactiontypeuniqueness`)}let wz=(()=>{class i{constructor(e,n,r,s,o,l){}}return i.\u0275fac=function(e){return new(e||i)(Yn(lC),Yn(r2),Yn(s2),Yn(ny),Yn(qB,8),Yn(t2,8))},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({}),i})(),HZ=(()=>{class i{constructor(e,n,r,s,o){this.features=e,this.featureReducers=n,this.reducerManager=r;const l=e.map((u,p)=>{const w=n.shift()[p];return{...u,reducers:w,initialState:Az(u.initialState)}});r.addFeatures(l)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return i.\u0275fac=function(e){return new(e||i)(Yn(tz),Yn(iz),Yn(S1),Yn(wz),Yn(t2,8))},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({}),i})(),GZ=(()=>{class i{static forRoot(e,n={}){return{ngModule:wz,providers:[{provide:qB,useFactory:XZ,deps:[[ny,new Ml,new mh]]},{provide:XB,useValue:n.initialState},{provide:QD,useFactory:Az,deps:[XB]},{provide:JD,useValue:e},{provide:JB,useExisting:e instanceof rr?e:JD},{provide:ZB,deps:[Iu,JD,[new ju(JB)]],useFactory:WZ},{provide:rz,useValue:n.metaReducers?n.metaReducers:[]},{provide:sz,deps:[I1,rz],useFactory:qZ},{provide:KB,useValue:n.reducerFactory?n.reducerFactory:n2},{provide:YB,deps:[KB,sz],useFactory:cz},uZ,pZ,gZ,vZ,yZ,zZ(n.runtimeChecks),Cz()]}}static forFeature(e,n,r={}){return{ngModule:HZ,providers:[{provide:ez,multi:!0,useValue:e instanceof Object?{}:r},{provide:QB,multi:!0,useValue:{key:e instanceof Object?e.name:e,reducerFactory:r instanceof rr||!r.reducerFactory?n2:r.reducerFactory,metaReducers:r instanceof rr||!r.metaReducers?[]:r.metaReducers,initialState:r instanceof rr||!r.initialState?void 0:r.initialState}},{provide:tz,deps:[Iu,ez,QB],useFactory:jZ},{provide:e2,multi:!0,useValue:e instanceof Object?e.reducer:n},{provide:nz,multi:!0,useExisting:n instanceof rr?n:e2},{provide:iz,multi:!0,deps:[Iu,e2,[new ju(nz)]],useFactory:$Z},Cz()]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({}),i})();function WZ(i,t){return t instanceof rr?i.get(t):t}function jZ(i,t,e){return e.map((n,r)=>{if(t[r]instanceof rr){const s=i.get(t[r]);return{key:n.key,reducerFactory:s.reducerFactory?s.reducerFactory:n2,metaReducers:s.metaReducers?s.metaReducers:[],initialState:s.initialState}}return n})}function $Z(i,t){return t.map(n=>n instanceof rr?i.get(n):n)}function Az(i){return"function"==typeof i?i():i}function qZ(i,t){return i.concat(t)}function XZ(i){if(i)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function dA(...i){return{reducer:i.pop(),types:i.map(n=>n.type)}}function fA(i,...t){const e=new Map;for(const n of t)for(const r of n.types){const s=e.get(r);e.set(r,s?(l,u)=>n.reducer(s(l,u),u):n.reducer)}return function(n=i,r){const s=e.get(r.type);return s?s(n,r):n}}const pA=oC("[SysGraph List/API] Retrieve Graphs Success",{_as:"props",_p:void 0}),E1=oC("[SysGraph List/API] Retrieve Graph Success",{_as:"props",_p:void 0}),f2=hA("graphs"),p2=hA("graph"),KZ=new WB(GB);class eQ extends Ge{constructor(t=1/0,e=1/0,n=YD){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(n.push(t),!r&&n.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=n?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const o=e.now();let l=0;for(let u=1;u<n.length&&n[u]<=o;u+=2)l=u;l&&n.splice(0,l+1)}}}function g2(i,t,e){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=i):n=i??1/0,So({connector:()=>new eQ(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}var xz={},Iz={};function tQ(i){for(var t=[],e=0,n=0,r=0;r<i.length;r+=1){var s=xz[i[r]];if(void 0===s)throw new Error("Invalid character ("+i[r]+")");var o=32&s;if(n+=(s&=31)<<e,o)e+=5;else{var l=1&n;n>>>=1,t.push(l?0===n?-2147483648:-n:n),n=e=0}}return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(i,t){xz[i]=t,Iz[t]=i});const T1="TOKEN_LOGGER_CONFIG";class nQ{constructor(t){this.config=this._clone(t)}get level(){return this.config.level}get serverLogLevel(){return this.config.serverLogLevel}updateConfig(t){this.config=this._clone(t)}partialUpdateConfig(t){!t||Object.keys(t).forEach(e=>{this.config[e]=t[e]})}getConfig(){return this._clone(this.config)}_clone(t){const e={level:null};return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}}const gA="TOKEN_LOGGER_CONFIG_ENGINE_FACTORY";class iQ{provideConfigEngine(t){return new nQ(t)}}const mA="TOKEN_LOGGER_MAPPER_SERVICE";let rQ=(()=>{class i{constructor(e){this.httpBackend=e,this.sourceMapCache=new Map,this.logPositionCache=new Map}getLogPosition(e,n){const r=this.getStackLine(e);if(!r)return Xr({fileName:"",lineNumber:0,columnNumber:0});const s=this.getLocalPosition(r);if(!e.enableSourceMaps)return Xr(s);const o=this.getSourceMapLocation(r);return this.getSourceMap(o,s)}getStackLine(e){const n=new Error;try{throw n}catch{try{let s=4;return n.stack.split("\n")[0].includes(".js:")||(s+=1),n.stack.split("\n")[s+(e.proxiedSteps||0)]}catch{return null}}}getLocalPosition(e){const n=e.lastIndexOf("/");let r=e.indexOf(")");r<0&&(r=void 0);const o=e.substring(n+1,r).split(":");return 3===o.length?{fileName:o[0],lineNumber:+o[1],columnNumber:+o[2]}:{fileName:"unknown",lineNumber:0,columnNumber:0}}getTranspileLocation(e){let n=e.indexOf("(");n<0&&(n=e.lastIndexOf("@"),n<0&&(n=e.lastIndexOf(" ")));let r=e.indexOf(")");return r<0&&(r=void 0),e.substring(n+1,r)}getSourceMapLocation(e){const n=this.getTranspileLocation(e),r=n.substring(0,n.lastIndexOf(":"));return r.substring(0,r.lastIndexOf(":"))+".map"}getMapping(e,n){let r=0,s=0,o=0;const l=e.mappings.split(";");for(let u=0;u<l.length;u++){let p=0;const v=l[u].split(",");for(let w=0;w<v.length;w++){const I=tQ(v[w]);if(I.length>=4&&(p+=I[0],r+=I[1],s+=I[2],o+=I[3]),u===n.lineNumber){if(p===n.columnNumber)return{fileName:e.sources[r],lineNumber:s,columnNumber:o};if(w+1===v.length)return{fileName:e.sources[r],lineNumber:s,columnNumber:0}}}}return{fileName:"unknown",lineNumber:0,columnNumber:0}}getSourceMap(e,n){const r=new p0("GET",e),s=`${n.fileName}:${n.lineNumber}:${n.columnNumber}`;if(this.logPositionCache.has(s))return this.logPositionCache.get(s);this.sourceMapCache.has(e)||(this.httpBackend?this.sourceMapCache.set(e,this.httpBackend.handle(r).pipe(gg(l=>l instanceof Kb),ce(l=>l.body),function JZ(i=1/0){let t;t=i&&"object"==typeof i?i:{count:i};const{count:e=1/0,delay:n,resetOnSuccess:r=!1}=t;return e<=0?ke:st((s,o)=>{let u,l=0;const p=()=>{let v=!1;u=s.subscribe(gt(o,w=>{r&&(l=0),o.next(w)},void 0,w=>{if(l++<e){const I=()=>{u?(u.unsubscribe(),u=null,p()):v=!0};if(null!=n){const T="number"==typeof n?function QZ(i=0,t,e=KZ){let n=-1;return null!=t&&(et(t)?e=t:n=t),new yt(r=>{let s=function ZZ(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}(n):pl(n(w,l)),k=gt(o,()=>{k.unsubscribe(),I()},()=>{o.complete()});T.subscribe(k)}else I()}else o.error(w)})),v&&(u.unsubscribe(),u=null,p())};p()})}(3),g2(1))):(console.error("NGXLogger : Can't get sourcemap because HttpBackend is not provided. You need to import HttpClientModule"),this.sourceMapCache.set(e,Xr(null))));const o=this.sourceMapCache.get(e).pipe(ce(l=>l?this.getMapping(l,n):n),Jm(()=>Xr(n)),g2(1));return this.logPositionCache.set(s,o),o}}return i.\u0275fac=function(e){return new(e||i)(Yn(JI,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const vA="TOKEN_LOGGER_METADATA_SERVICE";let sQ=(()=>{class i{constructor(e){this.datePipe=e}computeTimestamp(e){const n=()=>(new Date).toISOString();return e.timestampFormat?this.datePipe?this.datePipe.transform(new Date,e.timestampFormat):(console.error("NGXLogger : Can't use timeStampFormat because DatePipe is not provided. You need to provide DatePipe"),n()):n()}getMetadata(e,n,r,s){const o={level:e,additional:s};return o.message=r&&"function"==typeof r?r():r,o.timestamp=this.computeTimestamp(n),o}}return i.\u0275fac=function(e){return new(e||i)(Yn(zN,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const yA="TOKEN_LOGGER_RULES_SERVICE";let oQ=(()=>{class i{shouldCallWriter(e,n,r,s){return!n.disableConsoleLogging&&e>=n.level}shouldCallServer(e,n,r,s){return!!n.serverLoggingUrl&&e>=n.serverLogLevel}shouldCallMonitor(e,n,r,s){return this.shouldCallWriter(e,n,r,s)||this.shouldCallServer(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const _A="TOKEN_LOGGER_SERVER_SERVICE";let aQ=(()=>{class i{constructor(e){this.httpBackend=e}secureErrorObject(e){return e?.stack}secureAdditionalParameters(e){return null==e?null:e.map((n,r)=>{try{return n instanceof Error?this.secureErrorObject(n):("object"==typeof n&&JSON.stringify(n),n)}catch{return`The additional[${r}] value could not be parsed using JSON.stringify().`}})}secureMessage(e){try{if(e instanceof Error)return this.secureErrorObject(e);"string"!=typeof e&&(e=JSON.stringify(e,null,2))}catch{e='The provided "message" value could not be parsed with JSON.stringify().'}return e}alterHttpRequest(e){return e}logOnServer(e,n,r){if(!this.httpBackend)return console.error("NGXLogger : Can't log on server because HttpBackend is not provided. You need to import HttpClientModule"),Xr(null);let s=new p0("POST",e,n,r||{}),o=Xr(s);const l=this.alterHttpRequest(s);return function YZ(i){return!!i&&(i instanceof yt||X(i.lift)&&X(i.subscribe))}(l)?o=l:l?o=Xr(l):console.warn("NGXLogger : alterHttpRequest returned an invalid request. Using default one instead"),o.pipe(Zv(u=>u?this.httpBackend.handle(u):(console.warn("NGXLogger : alterHttpRequest returned an invalid request (observable). Using default one instead"),this.httpBackend.handle(s))),gg(u=>u instanceof Kb),ce(u=>u.body))}customiseRequestBody(e){return e}sendToServer(e,n){const r={...e};r.additional=this.secureAdditionalParameters(r.additional),r.message=this.secureMessage(r.message);const s=this.customiseRequestBody(r),o=n.customHttpHeaders||new Qm;o.has("Content-Type")||o.set("Content-Type","application/json"),this.logOnServer(n.serverLoggingUrl,s,{headers:o,params:n.customHttpParams||new Qv,responseType:n.httpResponseType||"json",withCredentials:n.withCredentials||!1}).pipe(Jm(l=>(console.error("NGXLogger: Failed to log on server",l),Zb(l)))).subscribe()}}return i.\u0275fac=function(e){return new(e||i)(Yn(JI,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();const bA="TOKEN_LOGGER_WRITER_SERVICE";var oc=(()=>{return(i=oc||(oc={}))[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.LOG=3]="LOG",i[i.WARN=4]="WARN",i[i.ERROR=5]="ERROR",i[i.FATAL=6]="FATAL",i[i.OFF=7]="OFF",oc;var i})();const lQ=["purple","teal","gray","gray","red","red","red"];let cQ=(()=>{class i{constructor(e){this.platformId=e,this.prepareMetaStringFuncs=[this.getTimestampToWrite,this.getLevelToWrite,this.getFileDetailsToWrite,this.getContextToWrite],this.isIE=tD(e)&&navigator&&navigator.userAgent&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.logFunc=this.isIE?this.logIE.bind(this):this.logModern.bind(this)}getTimestampToWrite(e,n){return e.timestamp}getLevelToWrite(e,n){return oc[e.level]}getFileDetailsToWrite(e,n){return!0===n.disableFileDetails?"":`[${e.fileName}:${e.lineNumber}:${e.columnNumber}]`}getContextToWrite(e,n){return n.context?`{${n.context}}`:""}prepareMetaString(e,n){let r="";return this.prepareMetaStringFuncs.forEach(s=>{const o=s(e,n);o&&(r=r+" "+o)}),r.trim()}getColor(e,n){if(e.level!==oc.OFF)return(n.colorScheme??lQ)[e.level]}logIE(e,n,r){const s=e.additional||[];switch(e.level){case oc.WARN:console.warn(`${r} `,e.message,...s);break;case oc.ERROR:case oc.FATAL:console.error(`${r} `,e.message,...s);break;case oc.INFO:console.info(`${r} `,e.message,...s);break;default:console.log(`${r} `,e.message,...s)}}logModern(e,n,r){const s=this.getColor(e,n),o=e.additional||[];switch(e.level){case oc.WARN:console.warn(`%c${r}`,`color:${s}`,e.message,...o);break;case oc.ERROR:case oc.FATAL:console.error(`%c${r}`,`color:${s}`,e.message,...o);break;case oc.INFO:console.info(`%c${r}`,`color:${s}`,e.message,...o);break;case oc.DEBUG:console.debug(`%c${r}`,`color:${s}`,e.message,...o);break;default:console.log(`%c${r}`,`color:${s}`,e.message,...o)}}writeMessage(e,n){const r=this.prepareMetaString(e,n);this.logFunc(e,n,r)}}return i.\u0275fac=function(e){return new(e||i)(Yn(Yb))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),Jh=(()=>{class i{constructor(e,n,r,s,o,l,u){this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u,this.configEngine=n.provideConfigEngine(e)}get level(){return this.configEngine.level}get serverLogLevel(){return this.configEngine.serverLogLevel}trace(e,...n){this._log(oc.TRACE,e,n)}debug(e,...n){this._log(oc.DEBUG,e,n)}info(e,...n){this._log(oc.INFO,e,n)}log(e,...n){this._log(oc.LOG,e,n)}warn(e,...n){this._log(oc.WARN,e,n)}error(e,...n){this._log(oc.ERROR,e,n)}fatal(e,...n){this._log(oc.FATAL,e,n)}setCustomHttpHeaders(e){const n=this.getConfigSnapshot();n.customHttpHeaders=e,this.updateConfig(n)}setCustomParams(e){const n=this.getConfigSnapshot();n.customHttpParams=e,this.updateConfig(n)}setWithCredentialsOptionValue(e){const n=this.getConfigSnapshot();n.withCredentials=e,this.updateConfig(n)}registerMonitor(e){this._loggerMonitor=e}updateConfig(e){this.configEngine.updateConfig(e)}partialUpdateConfig(e){this.configEngine.partialUpdateConfig(e)}getConfigSnapshot(){return this.configEngine.getConfig()}_log(e,n,r=[]){const s=this.configEngine.getConfig(),o=this.ruleService.shouldCallWriter(e,s,n,r),l=this.ruleService.shouldCallServer(e,s,n,r),u=this.ruleService.shouldCallMonitor(e,s,n,r);if(!o&&!l&&!u)return;const p=this.metadataService.getMetadata(e,s,n,r);this.mapperService.getLogPosition(s,p).pipe(Qb(1)).subscribe(v=>{v&&(p.fileName=v.fileName,p.lineNumber=v.lineNumber,p.columnNumber=v.columnNumber),u&&this._loggerMonitor&&this._loggerMonitor.onLog(p,s),o&&this.writerService.writeMessage(p,s),l&&this.serverService.sendToServer(p,s)})}}return i.\u0275fac=function(e){return new(e||i)(Yn(T1),Yn(gA),Yn(vA),Yn(yA),Yn(mA),Yn(bA),Yn(_A))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),uQ=(()=>{class i{constructor(e,n,r,s,o,l,u){this.logger=e,this.configEngineFactory=n,this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u}create(e,n,r,s){return this.getNewInstance({config:e,serverService:n,logMonitor:r,mapperService:s})}getNewInstance(e){const n=new Jh(e?.config??this.logger.getConfigSnapshot(),e?.configEngineFactory??this.configEngineFactory,e?.metadataService??this.metadataService,e?.ruleService??this.ruleService,e?.mapperService??this.mapperService,e?.writerService??this.writerService,e?.serverService??this.serverService);return e?.partialConfig&&n.partialUpdateConfig(e.partialConfig),e?.logMonitor&&n.registerMonitor(e.logMonitor),n}}return i.\u0275fac=function(e){return new(e||i)(Yn(Jh),Yn(gA),Yn(vA),Yn(yA),Yn(mA),Yn(bA),Yn(_A))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),hQ=(()=>{class i{static forRoot(e,n){if(n||(n={}),n.configProvider){if(n.configProvider.provide!==T1)throw new Error(`Wrong injection token for configProvider, it should be ${T1} and you used ${n.configProvider.provide}`)}else n.configProvider={provide:T1,useValue:e||{}};if(n.configEngineFactoryProvider){if(n.configEngineFactoryProvider.provide!==gA)throw new Error(`Wrong injection token for configEngineFactoryProvider, it should be '${gA}' and you used '${n.configEngineFactoryProvider.provide}'`)}else n.configEngineFactoryProvider={provide:gA,useClass:iQ};if(n.metadataProvider){if(n.metadataProvider.provide!==vA)throw new Error(`Wrong injection token for metadataProvider, it should be '${vA}' and you used '${n.metadataProvider.provide}'`)}else n.metadataProvider={provide:vA,useClass:sQ};if(n.ruleProvider){if(n.ruleProvider.provide!==yA)throw new Error(`Wrong injection token for ruleProvider, it should be '${yA}' and you used '${n.ruleProvider.provide}'`)}else n.ruleProvider={provide:yA,useClass:oQ};if(n.mapperProvider){if(n.mapperProvider.provide!==mA)throw new Error(`Wrong injection token for mapperProvider, it should be '${mA}' and you used '${n.mapperProvider.provide}'`)}else n.mapperProvider={provide:mA,useClass:rQ};if(n.writerProvider){if(n.writerProvider.provide!==bA)throw new Error(`Wrong injection token for writerProvider, it should be '${bA}' and you used '${n.writerProvider.provide}'`)}else n.writerProvider={provide:bA,useClass:cQ};if(n.serverProvider){if(n.serverProvider.provide!==_A)throw new Error(`Wrong injection token for serverProvider, it should be '${_A}' and you used '${n.writerProvider.provide}'`)}else n.serverProvider={provide:_A,useClass:aQ};return{ngModule:i,providers:[Jh,n.configProvider,n.configEngineFactoryProvider,n.metadataProvider,n.ruleProvider,n.mapperProvider,n.writerProvider,n.serverProvider,uQ]}}static forChild(){return{ngModule:i}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[[Fs]]}),i})();function Ez(i,t,e,n,r,s,o){try{var l=i[s](o),u=l.value}catch(p){return void e(p)}l.done?t(u):Promise.resolve(u).then(n,r)}function tv(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(u){Ez(s,n,r,o,l,"next",u)}function l(u){Ez(s,n,r,o,l,"throw",u)}o(void 0)})}}var Tz=z(5452);class M1{init(t,e,n){this.storage=e,this.logger=n,this.selector=`my-system-${t}`,this.findAll()||this.storage.store(this.selector,[])}findOne(t){let e=this.findAll(),n=Ki.find(e,r=>t===r.id);if(n)return this.logger.info(`${this.selector} FINDONE`,n),n}delete(t){let e=this.findAll();return Ki.remove(e,n=>t===n.id),this.storage.store(this.selector,e),this.logger.info("DELETE",t),e}store(t,e){let n=this.findAll(),r=Ki.find(n,s=>t.id===s.id);return r?(r.id=t.id,e(r),this.logger.info("STORE/UPDATE",r)):(n.push(t),this.logger.info("STORE/INSERT",t)),this.storage.store(this.selector,n),n}findAll(){let t=this.storage.retrieve(this.selector);if(t){let e=JSON.parse(JSON.stringify(t));return this.logger.info(`${this.selector} FINDALL`,e),e}return this.storage.store(this.selector,[]),[]}reset(){return this.logger.info("RESET",this.selector),this.storage.store(this.selector,[]),[]}}var pm=(()=>{return(i=pm||(pm={})).Local="local_strategy",i.Session="session_strategy",i.InMemory="in_memory_strategy",pm;var i})();function D1(){}let nv=(()=>{class i{static normalize(e){return e=i.isCaseSensitive?e:e.toLowerCase(),`${i.prefix}${i.separator}${e}`}static isNormalizedKey(e){return 0===e.indexOf(i.prefix+i.separator)}static setPrefix(e){i.prefix=e}static setSeparator(e){i.separator=e}static setCaseSensitive(e){i.isCaseSensitive=e}static consumeConfiguration(e){"prefix"in e&&this.setPrefix(e.prefix),"separator"in e&&this.setSeparator(e.separator),"caseSensitive"in e&&this.setCaseSensitive(e.caseSensitive)}}return i.prefix="ngx-webstorage",i.separator="|",i.isCaseSensitive=!1,i})();class L1{constructor(t){this.strategy=t}retrieve(t){let e;return this.strategy.get(nv.normalize(t)).subscribe(n=>e=typeof n>"u"?null:n),e}store(t,e){return this.strategy.set(nv.normalize(t),e).subscribe(D1),e}clear(t){void 0!==t?this.strategy.del(nv.normalize(t)).subscribe(D1):this.strategy.clear().subscribe(D1)}getStrategyName(){return this.strategy.name}observe(t){return t=nv.normalize(t),this.strategy.keyChanges.pipe(gg(e=>null===e||e===t),dm(()=>this.strategy.get(t)),jB(),g2({refCount:!0,bufferSize:1}))}}let m2=(()=>{class i{constructor(){this.caches={}}get(e,n){return this.getCacheStore(e)[n]}set(e,n,r){this.getCacheStore(e)[n]=r}del(e,n){delete this.getCacheStore(e)[n]}clear(e){this.caches[e]={}}getCacheStore(e){return e in this.caches?this.caches[e]:this.caches[e]={}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Mz=new rr("window_local_storage"),vQ={provide:Mz,useFactory:function mQ(){return typeof window<"u"?window.localStorage:null}},Dz=new rr("window_session_storage"),_Q={provide:Dz,useFactory:function yQ(){return typeof window<"u"?window.sessionStorage:null}};class Lz{constructor(t,e){this.storage=t,this.cache=e,this.keyChanges=new Ge}get isAvailable(){return void 0===this._isAvailable&&(this._isAvailable=class dQ{static isStorageAvailable(t){let e=!0;try{"object"==typeof t?(t.setItem("test-storage","foobar"),t.removeItem("test-storage")):e=!1}catch{e=!1}return e}}.isStorageAvailable(this.storage)),this._isAvailable}get(t){let e=this.cache.get(this.name,t);if(void 0!==e)return Xr(e);try{const n=this.storage.getItem(t);null!==n&&(e=JSON.parse(n),this.cache.set(this.name,t,e))}catch(n){console.warn(n)}return Xr(e)}set(t,e){const n=JSON.stringify(e);return this.storage.setItem(t,n),this.cache.set(this.name,t,e),this.keyChanges.next(t),Xr(e)}del(t){return this.storage.removeItem(t),this.cache.del(this.name,t),this.keyChanges.next(t),Xr(null)}clear(){return this.storage.clear(),this.cache.clear(this.name),this.keyChanges.next(null),Xr(null)}}class iy extends Lz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=iy.strategyName,tD(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==e?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}iy.strategyName=pm.Local,iy.\u0275fac=function(t){return new(t||iy)(Yn(Mz),Yn(m2),Yn(Yb),Yn(Vo))},iy.\u0275prov=Zi({token:iy,factory:iy.\u0275fac});class ry extends Lz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=ry.strategyName,tD(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==t.key?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}ry.strategyName=pm.Session,ry.\u0275fac=function(t){return new(t||ry)(Yn(Dz),Yn(m2),Yn(Yb),Yn(Vo))},ry.\u0275prov=Zi({token:ry,factory:ry.\u0275fac});class sy{constructor(t){this.cache=t,this.keyChanges=new Ge,this.isAvailable=!0,this.name=sy.strategyName}get(t){return Xr(this.cache.get(this.name,t))}set(t,e){return this.cache.set(this.name,t,e),this.keyChanges.next(t),Xr(e)}del(t){return this.cache.del(this.name,t),this.keyChanges.next(t),Xr(null)}clear(){return this.cache.clear(this.name),this.keyChanges.next(null),Xr(null)}}sy.strategyName=pm.InMemory,sy.\u0275fac=function(t){return new(t||sy)(Yn(m2))},sy.\u0275prov=Zi({token:sy,factory:sy.\u0275fac});const R1=new rr("STORAGE_STRATEGIES"),bQ=[{provide:R1,useClass:sy,multi:!0},{provide:R1,useClass:iy,multi:!0},{provide:R1,useClass:ry,multi:!0}],Rz="invalid_strategy";let _0=(()=>{class i{constructor(e){this.strategies=e,this.registration$=new Ge,e||(e=[]),this.strategies=e.reverse().map((n,r,s)=>n.name).map((n,r,s)=>s.indexOf(n)===r?r:null).filter(n=>null!==n).map(n=>e[n])}static get(e){if(!this.isStrategyRegistered(e))throw Error(Rz);let n=this.index[e];return n.isAvailable||(n=this.index[pm.InMemory]),n}static set(e,n){this.index[e]=n}static clear(e){void 0!==e?delete this.index[e]:this.index={}}static isStrategyRegistered(e){return e in this.index}static hasRegistredStrategies(){return Object.keys(this.index).length>0}getStrategy(e){return i.get(e)}indexStrategies(){this.strategies.forEach(e=>this.register(e.name,e))}indexStrategy(e,n=!1){if(i.isStrategyRegistered(e)&&!n)return i.get(e);const r=this.strategies.find(s=>s.name===e);if(!r)throw new Error(Rz);return this.register(e,r,n),r}register(e,n,r=!1){(!i.isStrategyRegistered(e)||r)&&(i.set(e,n),this.registration$.next(e))}}return i.index={},i.\u0275fac=function(e){return new(e||i)(Yn(R1,8))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class cC extends L1{}const EQ=[{provide:cC,useFactory:function wQ(i){const t=i.indexStrategy(pm.Local);return new L1(t)},deps:[_0]},{provide:class xQ extends L1{},useFactory:function IQ(i){const t=i.indexStrategy(pm.Session);return new L1(t)},deps:[_0]}],kz=new rr("ngx_webstorage_config");function TQ(i){return i.indexStrategies(),()=>_0.index}let MQ=(()=>{class i{constructor(e,n){n?nv.consumeConfiguration(n):console.error("NgxWebstorage : Possible misconfiguration (The forRoot method usage is mandatory since the 3.0.0)")}static forRoot(e={}){return{ngModule:i,providers:[{provide:kz,useValue:e},vQ,_Q,...EQ,...bQ,{provide:Vw,useFactory:TQ,deps:[_0],multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)(Yn(_0),Yn(kz,8))},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({}),i})(),v2=(()=>{class i{constructor(){}ascii_to_u8a(e){return new Uint8Array(e.length).map((r,s)=>e.codePointAt(s)??0)}u8a_to_hex(e){let n="";for(const r of e)n+=r.toString(16).padStart(2,"0");return n}hex_to_u8a(e){if(e.length%2)throw new Error("odd string length");const n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const s=e.slice(2*r,2*r+2);n[r]=parseInt(s,16)}return n}u8a_to_ascii(e){let n="";for(const r of e)n+=String.fromCharCode(r);return n}encode(e){return this.u8a_to_hex(this.ascii_to_u8a(e))}decode(e){return this.u8a_to_ascii(this.hex_to_u8a(e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Oz=new Tz.Parser;let P1=(()=>{class i extends M1{constructor(e,n,r,s){super(),this._logger=e,this._storage=n,this.base16=r,this.messageService=s,this.init("graphs",this._storage,this._logger)}outputNodes(e){return Ki.map(Ki.sortBy(e?.nodes,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,x:n.x,y:n.y,group:void 0===n.group?null:n.group,tag:void 0===n.tag?null:n.tag};return n.parent&&(r.parent=this.base16.decode(n.parent)),n.cdata&&(r.cdata=n.cdata),n.alias&&(r.alias=n.alias),r})}outputEdges(e){return Ki.map(Ki.sortBy(e?.edges,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,source:this.base16.decode(n.source),target:this.base16.decode(n.target),tag:void 0===n.tag?null:n.tag};return n.cdata&&(r.cdata=n.cdata),r})}computeInstance(e,n){return e[n]?e[n].count++:e[n]={count:1},e[n]}buildId(e,n){let r=this.computeInstance(e,`${n.source}:${n.target}`),s="";return r.count>1&&(s="@"+(r.count-1)),`${n.source}:${n.target}${s}`}toGexf(e){this._logger.info("toGexf",e);let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),n.push('<meta lastmodifieddate="2009-03-20">'),n.push("<creator>Gexf.net</creator>"),n.push("<description>A hello world! file</description>"),n.push("</meta>"),n.push(`<graph mode="static" defaultedgetype="directed" style="${e?.style}">`),n.push("<nodes>"),Ki.each(Ki.sortBy(this.outputNodes(e),"uid"),o=>{let l=" />";o.cdata&&(l=">"),null==o.alias&&(o.alias=""),n.push(null===o.tag?o.parent?`<node id="${o.uid}" parent="${parent}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}"${l}`:`<node id="${o.uid}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}"${l}`:o.parent?`<node id="${o.uid}" parent="${o.parent}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}" tag="${o.tag}"${l}`:`<node id="${o.uid}" label="${o.label}" alias="${o.alias}" group="${o.group}" x="${o.x}" y="${o.y}" tag="${o.tag}"${l}`),o.cdata&&(n.push(`<![CDATA[${o.cdata}]]>`),n.push("</node>"))}),n.push("</nodes>"),n.push("<edges>");let r=Ki.map(this.outputEdges(e),o=>(o.uid=`${o.source}:${o.target}`,o)),s={};return Ki.each(Ki.sortBy(r,"uid"),o=>{let l=" />";o.cdata&&(l=">"),n.push(null===o.tag?`<edge id="${this.buildId(s,o)}" source="${o.source}" target="${o.target}" label="${o.label}"${l}`:`<edge id="${this.buildId(s,o)}" source="${o.source}" target="${o.target}" label="${o.label}" tag="${o.tag}"${l}`),o.cdata&&(n.push(`<![CDATA[${o.cdata}]]>`),n.push("</edge>"))}),n.push("</edges>"),n.push("</graph>"),n.push("</gexf>"),n}toGraphml(e){let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">'),n.push(`<graph id="G" edgedefault="undirected" style="${e?.style}">`),Ki.each(this.outputNodes(e),s=>{let o=" />";s.cdata&&(o=">"),n.push(null===s.tag?s.parent?`<node id="${s.uid}" parent="${parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:s.parent?`<node id="${s.uid}" parent="${s.parent}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`:`<node id="${s.uid}" label="${s.label}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</node>"))});let r={};return Ki.each(this.outputEdges(e),s=>{let o=" />";s.cdata&&(o=">"),n.push(null===s.tag?`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}"${o}`:`<edge id="${this.buildId(r,s)}" source="${s.source}" target="${s.target}" label="${s.label}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</edge>"))}),n.push("</graph>"),n.push("</graphml>"),n}filterCDATA(e){if(e){let n="";for(let r=1;r<e.length-1;r++)n+=e.charAt(r);return n}}loadGraphGexf(e,n,r){var s=this;return tv(function*(){return s._logger.info(`loadGraphGexf: ${e}`),new Promise(o=>{Oz.parseString(r,(l,u)=>{if(l)throw s._logger.error(l),l;let p={id:e,style:"default",rules:"default",label:n,nodes:[],edges:[]};Ki.each(u.gexf.graph,v=>{p.style=v.$.style;let w={};s._logger.info("loading nodes",v.nodes),Ki.each(v.nodes,I=>{Ki.each(I.node,T=>{let k={id:s.base16.encode(T.$.id),x:parseFloat(T.$.x),y:parseFloat(T.$.y),cdata:s.filterCDATA(T._),alias:T.$.alias?T.$.alias:"",label:T.$.label?T.$.label:"",group:T.$.group?T.$.group:"",tag:T.$.tag?T.$.tag:""};w[k.id]=!0,T.$.parent&&(k.parent=s.base16.encode(T.$.parent)),p.nodes.push(k)})}),s._logger.info("loading edges",v.edges),Ki.each(v.edges,I=>{Ki.each(I.edge,T=>{let k={id:s.base16.encode(T.$.id),source:s.base16.encode(T.$.source),target:s.base16.encode(T.$.target),cdata:s.filterCDATA(T._),label:T.$.label?T.$.label:"",tag:T.$.tag?T.$.tag:""};if(!w[k.source])throw s._logger.error("source unkown",T.$),new Error(`source unkown ${T.$.source}`);if(!w[k.target])throw s._logger.error("target unkown",T.$),new Error(`target unkown ${T.$.target}`);p.edges.push(k)})})}),s._logger.info(p),o(p)})})})()}extractMlData(e,n){let r=Ki.find(e.data,s=>{if(s.$.key===n)return s});return r?r._:0}loadGraphMl(e,n,r){var s=this;return tv(function*(){return s._logger.info(`loadGraphMl: ${e}`),new Promise(o=>{Oz.parseString(r,(l,u)=>{if(l)throw l;let p={id:e,style:"default",rules:"default",label:n,nodes:[],edges:[]},v=[];Ki.each(u.graphml.graph.key,w=>{v.push({label:w.id,type:w["attr.type"]})}),Ki.each(u.graphml.graph,w=>{Ki.each(w.node,I=>{let T={id:I.$.id,label:s.extractMlData(I,"tooltip"),x:parseFloat(s.extractMlData(I,"x")),y:parseFloat(s.extractMlData(I,"y"))};p.nodes.push(T)}),Ki.each(w.edge,I=>{p.edges.push({id:I.$.id,label:"default",source:I.$.source,target:I.$.target})})}),o(p)})})})()}uploadHandler(e,n,r){var s=this;return new Promise(o=>{let l=new FileReader;l.addEventListener("loadend",tv(function*(){let u=new String(l.result),p={id:n,style:"default",rules:"default",label:r,nodes:[],edges:[]};u.includes('xmlns="http://gexf')&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GEXF file to ${r}`}),p=yield s.loadGraphGexf(n,r,u.toString())),u.includes("http://graphml.graphdrawing.org")&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GRAPHML file to ${r}`}),p=yield s.loadGraphMl(n,r,u.toString())),0==p.nodes.length&&s.messageService.add({severity:"warn",summary:"warn",detail:`No node for ${r}`}),o(p)})),l.readAsText(e)})}}return i.\u0275fac=function(e){return new(e||i)(Yn(Jh),Yn(cC),Yn(v2),Yn(fm))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),k1=(()=>{class i{constructor(e){this.logger=e}fallbackCopyTextToClipboard(e){var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{var r=document.execCommand("copy");this.logger.info("Fallback: Copying text command was "+(r?"successful":"unsuccessful"))}catch(o){this.logger.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(n)}copyTextToClipboard(e){navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{this.logger.info("Async: Copying to clipboard was successful!")},n=>{this.logger.error("Async: Could not copy text: ",n)}):this.fallbackCopyTextToClipboard(e)}}return i.\u0275fac=function(e){return new(e||i)(Yn(Jh))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Fz=(()=>{class i{constructor(e){this.storage=e,this.retrieveGraphs()||this.storage.store("graphs",[]),this.findAllStyles()||this.storage.store("styles",[]),this.retrievePreferences()||this.storage.store("preferences",{grid:!1})}retrievePreferences(){return JSON.parse(JSON.stringify(this.storage.retrieve("preferences")))}findAllStyles(){return this.retrieveStyles()}findStyle(e){let n=this.retrieveStyles(),r=Ki.find(n,s=>e===s.id);if(r)return r}deleteStyle(e){let n=this.retrieveStyles();return Ki.remove(n,r=>e===r.id),this.storage.store("styles",n),n}storeStyle(e){let n=this.retrieveStyles(),r=Ki.find(n,s=>e.id===s.id);r?(r.id=e.id,r.tags=e.tags):n.push(e),this.storage.store("styles",n)}retrieveStyles(){return JSON.parse(JSON.stringify(this.storage.retrieve("styles")))}retrieveGraphs(){return JSON.parse(JSON.stringify(this.storage.retrieve("graphs")))}deleteGraph(e){let n=this.retrieveGraphs();return Ki.remove(n,r=>r.id===e.id),this.storage.store("graphs",n),n}findAllGraphs(){return this.retrieveGraphs()}findGraph(e){let n=this.retrieveGraphs(),r=Ki.find(n,s=>e===s.id);if(r)return r}storeGraph(e){let n=this.retrieveGraphs(),r=Ki.find(n,s=>e.id===s.id);r?(r.id=e.id,r.style=e.style,r.rules=e.rules,r.label=e.label,r.edges=e.edges,r.nodes=e.nodes):n.push(e),this.storage.store("graphs",n)}storePreferences(e){this.storage.store("preferences",e)}}return i.\u0275fac=function(e){return new(e||i)(Yn(cC))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Nz=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(d),Xt(Zn))},i.\u0275dir=Yr({type:i}),i})(),b0=(()=>{class i extends Nz{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=jo(i)))(n||i)}}(),i.\u0275dir=Yr({type:i,features:[Ja]}),i})();const wc=new rr("NgValueAccessor"),RQ={provide:wc,useExisting:hs(()=>C0),multi:!0},kQ=new rr("CompositionEventMode");let C0=(()=>{class i extends Nz{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function PQ(){const i=Zm()?Zm().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(d),Xt(Zn),Xt(kQ,8))},i.\u0275dir=Yr({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&mn("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Ao([RQ]),Ja]}),i})();const Sd=new rr("NgValidators"),a_=new rr("NgAsyncValidators");function Xz(i){return null!=i}function Yz(i){return Lw(i)?ur(i):i}function Kz(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Zz(i,t){return t.map(e=>e(i))}function Qz(i){return i.map(t=>function NQ(i){return!i.validate}(t)?t:e=>t.validate(e))}function y2(i){return null!=i?function Jz(i){if(!i)return null;const t=i.filter(Xz);return 0==t.length?null:function(e){return Kz(Zz(e,t))}}(Qz(i)):null}function _2(i){return null!=i?function eV(i){if(!i)return null;const t=i.filter(Xz);return 0==t.length?null:function(e){return function DQ(...i){const t=ct(i),{args:e,keys:n}=A3(i),r=new yt(s=>{const{length:o}=e;if(!o)return void s.complete();const l=new Array(o);let u=o,p=o;for(let v=0;v<o;v++){let w=!1;pl(e[v]).subscribe(gt(s,I=>{w||(w=!0,p--),l[v]=I},()=>u--,void 0,()=>{(!u||!w)&&(p||s.next(n?I3(n,l):l),s.complete())}))}});return t?r.pipe(x3(t)):r}(Zz(e,t).map(Yz)).pipe(ce(Kz))}}(Qz(i)):null}function tV(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function b2(i){return i?Array.isArray(i)?i:[i]:[]}function F1(i,t){return Array.isArray(i)?i.includes(t):i===t}function rV(i,t){const e=b2(t);return b2(i).forEach(r=>{F1(e,r)||e.push(r)}),e}function sV(i,t){return b2(t).filter(e=>!F1(i,e))}class oV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=y2(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=_2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class lf extends oV{get formDirective(){return null}get path(){return null}}class iv extends oV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let uC=(()=>{class i extends class aV{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(iv,2))},i.\u0275dir=Yr({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&Mp("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[Ja]}),i})();const CA="VALID",B1="INVALID",hC="PENDING",wA="DISABLED";function cV(i){return Array.isArray(i)?y2(i):i||null}function uV(i){return Array.isArray(i)?_2(i):i||null}function z1(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function AA(i,t){(function E2(i,t){const e=function nV(i){return i._rawValidators}(i);null!==t.validator?i.setValidators(tV(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=function iV(i){return i._rawAsyncValidators}(i);null!==t.asyncValidator?i.setAsyncValidators(tV(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();H1(t._rawValidators,r),H1(t._rawAsyncValidators,r)})(i,t),t.valueAccessor.writeValue(i.value),i.disabled&&t.valueAccessor.setDisabledState?.(!0),function qQ(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&pV(i,t)})}(i,t),function YQ(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function XQ(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&pV(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function $Q(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function H1(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function pV(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function yV(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function _V(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const iJ={provide:iv,useExisting:hs(()=>oy)},AV=(()=>Promise.resolve(null))();let oy=(()=>{class i extends iv{constructor(e,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class fV{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=cV(this._rawValidators),this._composedAsyncValidatorFn=uV(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===CA}get invalid(){return this.status===B1}get pending(){return this.status==hC}get disabled(){return this.status===wA}get enabled(){return this.status!==wA}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=cV(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=uV(t)}addValidators(t){this.setValidators(rV(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(rV(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(sV(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(sV(t,this._rawAsyncValidators))}hasValidator(t){return F1(this._rawValidators,t)}hasAsyncValidator(t){return F1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=hC,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wA,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=CA,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===CA||this.status===hC)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wA:CA}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=hC,this._hasOwnPendingAsyncValidator=!0;const e=Yz(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Bn,this.statusChanges=new Bn}_calculateStatus(){return this._allControlsDisabled()?wA:this.errors?B1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hC)?hC:this._anyControlsHaveStatus(B1)?B1:CA}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){z1(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,n){super(function x2(i){return(z1(i)?i.validators:i)||null}(e),function I2(i,t){return(z1(t)?t.asyncValidators:i)||null}(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),z1(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=_V(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){yV(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){yV(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){_V(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new Bn,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function M2(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===C0?e=s:function QQ(i){return Object.getPrototypeOf(i.constructor)===b0}(s)?n=s:r=s}),r||n||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function T2(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){AA(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){AV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&Xv(n);AV.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function V1(i,t){return[...t.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(Xt(lf,9),Xt(Sd,10),Xt(a_,10),Xt(wc,10),Xt(xo,8))},i.\u0275dir=Yr({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ao([iJ]),Ja,da]}),i})(),IV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({}),i})(),TJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[IV]}),i})(),W1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[TJ]}),i})();class GV{}const ay="*";function ly(i,t){return{type:7,name:i,definitions:t,options:{}}}function Ac(i,t=null){return{type:4,styles:t,timings:i}}function WV(i,t=null){return{type:2,steps:i,options:t}}function tl(i){return{type:6,styles:i,offset:null}}function A0(i,t,e){return{type:0,name:i,styles:t,options:e}}function Mu(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function dC(i,t=null){return{type:8,animation:i,options:t}}function LJ(i=null){return{type:9,options:i}}function jV(i,t=null){return{type:10,animation:i,options:t}}function RJ(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function $V(i){Promise.resolve(null).then(i)}class IA{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){$V(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class qV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?$V(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,l)=>Math.max(o,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}let Bt=(()=>{class i{static addClass(e,n){e.classList?e.classList.add(n):e.className+=" "+n}static addMultipleClasses(e,n){if(e.classList){let r=n.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=n.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,n){return e.classList?e.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(n){return n!==e})}static find(e,n){return Array.from(e.querySelectorAll(n))}static findSingle(e,n){return e?e.querySelector(n):null}static index(e){let n=e.parentNode.childNodes,r=0;for(var s=0;s<n.length;s++){if(n[s]==e)return r;1==n[s].nodeType&&r++}return-1}static indexWithinGroup(e,n){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var o=0;o<r.length;o++){if(r[o]==e)return s;r[o].attributes&&r[o].attributes[n]&&1==r[o].nodeType&&s++}return-1}static relativePosition(e,n){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=n.offsetHeight,o=n.getBoundingClientRect(),l=this.getViewport();let u,p;o.top+s+r.height>l.height?(u=-1*r.height,e.style.transformOrigin="bottom",o.top+u<0&&(u=-1*o.top)):(u=s,e.style.transformOrigin="top"),p=r.width>l.width?-1*o.left:o.left+r.width>l.width?-1*(o.left+r.width-l.width):0,e.style.top=u+"px",e.style.left=p+"px"}static absolutePosition(e,n){let T,k,r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,o=r.width,l=n.offsetHeight,u=n.offsetWidth,p=n.getBoundingClientRect(),v=this.getWindowScrollTop(),w=this.getWindowScrollLeft(),I=this.getViewport();p.top+l+s>I.height?(T=p.top+v-s,e.style.transformOrigin="bottom",T<0&&(T=v)):(T=l+p.top+v,e.style.transformOrigin="top"),k=p.left+o>I.width?Math.max(0,p.left+w+u-o):p.left+w,e.style.top=T+"px",e.style.left=k+"px"}static getParents(e,n=[]){return null===e.parentNode?n:this.getParents(e.parentNode,n.concat([e.parentNode]))}static getScrollableParents(e){let n=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,o=l=>{let u=window.getComputedStyle(l,null);return s.test(u.getPropertyValue("overflow"))||s.test(u.getPropertyValue("overflowX"))||s.test(u.getPropertyValue("overflowY"))};for(let l of r){let u=1===l.nodeType&&l.dataset.scrollselectors;if(u){let p=u.split(",");for(let v of p){let w=this.findSingle(l,v);w&&o(w)&&n.push(w)}}9!==l.nodeType&&o(l)&&n.push(l)}}return n}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementDimensions(e){let n={};return e.style.visibility="hidden",e.style.display="block",n.width=e.offsetWidth,n.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",n}static scrollInView(e,n){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(e).getPropertyValue("paddingTop"),l=o?parseFloat(o):0,u=e.getBoundingClientRect(),v=n.getBoundingClientRect().top+document.body.scrollTop-(u.top+document.body.scrollTop)-s-l,w=e.scrollTop,I=e.clientHeight,T=this.getOuterHeight(n);v<0?e.scrollTop=w+v:v+T>I&&(e.scrollTop=w+v-I+T)}static fadeIn(e,n){e.style.opacity=0;let r=+new Date,s=0,o=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/n,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(e,n){var r=1,l=50/n;let u=setInterval(()=>{(r-=l)<=0&&(r=0,clearInterval(u)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(o){return-1!==[].indexOf.call(document.querySelectorAll(o),this)}).call(e,n)}static getOuterWidth(e,n){let r=e.offsetWidth;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let n=getComputedStyle(e);return parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)}static getHorizontalMargin(e){let n=getComputedStyle(e);return parseFloat(n.marginLeft)+parseFloat(n.marginRight)}static innerWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static width(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static getInnerHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n}static getOuterHeight(e,n){let r=e.offsetHeight;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),n}static getWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),n}static getViewport(){let e=window,n=document,r=n.documentElement,s=n.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var n=e.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,n){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(n,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,n){if(this.isElement(n))n.appendChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot append "+n+" to "+e;n.el.nativeElement.appendChild(e)}}static removeChild(e,n){if(this.isElement(n))n.removeChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot remove "+e+" from "+n;n.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let n=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let n=document.createElement("div");n.className="p-scrollbar-measure",document.body.appendChild(n);let r=n.offsetWidth-n.clientWidth;return document.body.removeChild(n),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=n,n}static invokeElementMethod(e,n,r){e[n].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let n=i.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of n)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return i.zindex=1e3,i.calculatedScrollbarWidth=null,i.calculatedScrollbarHeight=null,i})();class SA{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=Bt.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let rv=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Bt.appendChild(this.container,this.el.nativeElement):Bt.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Bt.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Ll.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Ll.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+Bt.getWindowScrollLeft(),top:e.top+Bt.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),n=e.left+Bt.getOuterWidth(this.el.nativeElement),r=e.top+(Bt.getOuterHeight(this.el.nativeElement)-Bt.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),n=e.left-Bt.getOuterWidth(this.container),r=e.top+(Bt.getOuterHeight(this.el.nativeElement)-Bt.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),n=e.left+(Bt.getOuterWidth(this.el.nativeElement)-Bt.getOuterWidth(this.container))/2,r=e.top-Bt.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),n=e.left+(Bt.getOuterWidth(this.el.nativeElement)-Bt.getOuterWidth(this.container))/2,r=e.top+Bt.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return Bt.hasClass(e,"p-inputwrapper")?Bt.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let e=this.container.getBoundingClientRect(),n=e.top,r=e.left,s=Bt.getOuterWidth(this.container),o=Bt.getOuterHeight(this.container),l=Bt.getViewport();return r+s>l.width||r<0||n<0||n+o>l.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Bt.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Ll.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(Vo),Xt(Dp))},i.\u0275dir=Yr({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[da]}),i})(),sv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();const PJ=["element"],kJ=["content"];function OJ(i,t){1&i&&Ni(0)}const B2=function(i,t){return{$implicit:i,options:t}};function FJ(i,t){if(1&i&&(Ur(0),Xe(1,OJ,1,0,"ng-container",7),Hr()),2&i){const e=Ce(2);Se(1),de("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",as(2,B2,e.loadedItems,e.getContentOptions()))}}function NJ(i,t){1&i&&Ni(0)}function BJ(i,t){if(1&i&&(Ur(0),Xe(1,NJ,1,0,"ng-container",7),Hr()),2&i){const e=t.$implicit,n=t.index,r=Ce(3);Se(1),de("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",as(2,B2,e,r.getOptions(n)))}}const zJ=function(i){return{"p-scroller-loading":i}};function VJ(i,t){if(1&i&&(Qe(0,"div",8,9),Xe(2,BJ,2,5,"ng-container",10),nt()),2&i){const e=Ce(2);de("ngClass",bi(4,zJ,e.d_loading))("ngStyle",e.contentStyle),Se(2),de("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function UJ(i,t){1&i&&Vn(0,"div",11),2&i&&de("ngStyle",Ce(2).spacerStyle)}function HJ(i,t){1&i&&Ni(0)}const GJ=function(i){return{numCols:i}},XV=function(i){return{options:i}};function WJ(i,t){if(1&i&&(Ur(0),Xe(1,HJ,1,0,"ng-container",7),Hr()),2&i){const e=t.index,n=Ce(4);Se(1),de("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",bi(4,XV,n.getLoaderOptions(e,n.both&&bi(2,GJ,n._numItemsInViewport.cols))))}}function jJ(i,t){if(1&i&&(Ur(0),Xe(1,WJ,2,6,"ng-container",14),Hr()),2&i){const e=Ce(3);Se(1),de("ngForOf",e.loaderArr)}}function $J(i,t){1&i&&Ni(0)}const qJ=function(){return{styleClass:"p-scroller-loading-icon"}};function XJ(i,t){if(1&i&&(Ur(0),Xe(1,$J,1,0,"ng-container",7),Hr()),2&i){const e=Ce(4);Se(1),de("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",bi(3,XV,uo(2,qJ)))}}function YJ(i,t){1&i&&Vn(0,"i",16)}function KJ(i,t){if(1&i&&(Xe(0,XJ,2,5,"ng-container",0),Xe(1,YJ,1,0,"ng-template",null,15,sc)),2&i){const e=ao(2);de("ngIf",Ce(3).loaderIconTemplate)("ngIfElse",e)}}const ZJ=function(i){return{"p-component-overlay":i}};function QJ(i,t){if(1&i&&(Qe(0,"div",12),Xe(1,jJ,2,1,"ng-container",0),Xe(2,KJ,3,2,"ng-template",null,13,sc),nt()),2&i){const e=ao(3),n=Ce(2);de("ngClass",bi(3,ZJ,!n.loaderTemplate)),Se(1),de("ngIf",n.loaderTemplate)("ngIfElse",e)}}const JJ=function(i,t){return{"p-scroller":!0,"p-both-scroll":i,"p-horizontal-scroll":t}};function eee(i,t){if(1&i){const e=yi();Ur(0),Qe(1,"div",2,3),mn("scroll",function(r){return Ot(e),Nt(Ce().onContainerScroll(r))}),Xe(3,FJ,2,5,"ng-container",0),Xe(4,VJ,3,6,"ng-template",null,4,sc),Xe(6,UJ,1,1,"div",5),Xe(7,QJ,4,5,"div",6),nt(),Hr()}if(2&i){const e=ao(5),n=Ce();Se(1),Fr(n._styleClass),de("ngStyle",n._style)("ngClass",as(10,JJ,n.both,n.horizontal)),vr("id",n._id)("tabindex",n.tabindex),Se(2),de("ngIf",n.contentTemplate)("ngIfElse",e),Se(3),de("ngIf",n._showSpacer),Se(1),de("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function tee(i,t){1&i&&Ni(0)}const nee=function(i,t){return{rows:i,columns:t}};function iee(i,t){if(1&i&&(Ur(0),Xe(1,tee,1,0,"ng-container",7),Hr()),2&i){const e=Ce(2);Se(1),de("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",as(5,B2,e.items,as(2,nee,e._items,e.loadedColumns)))}}function ree(i,t){if(1&i&&(su(0),Xe(1,iee,2,8,"ng-container",17)),2&i){const e=Ce();Se(1),de("ngIf",e.contentTemplate)}}const see=["*"];let EA=(()=>{class i{constructor(e,n){this.cd=e,this.zone=n,this.onLazyLoad=new Bn,this.onScroll=new Bn,this.onScrollIndexChange=new Bn,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._delay=0,this._resizeDelay=10,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1,this._disabled||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([n,r])=>this[`_${n}`]!==r&&(this[`_${n}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}ngOnInit(){this.setInitialState()}ngOnChanges(e){let n=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,n=!0)}if(this.initialized&&!n&&(e.items||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init(),e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.setContentEl(this.contentEl),this.init(),this.defaultWidth=Bt.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=Bt.getHeight(this.elementViewChild.nativeElement),this.initialized=!0}ngAfterViewChecked(){this.calculateAutoSize()}ngOnDestroy(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||Bt.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems}getElementRef(){return this.elementViewChild}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,n="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),o=(p=0,v)=>p<=v?0:p,l=(p,v,w)=>p*v+w,u=(p=0,v=0)=>this.scrollTo({left:p,top:v,behavior:n});if(this.both){const p={rows:o(e[0],r[0]),cols:o(e[1],r[1])};(p.rows!==this.first.rows||p.cols!==this.first.cols)&&u(l(p.cols,this._itemSize[1],s.left),l(p.rows,this._itemSize[0],s.top))}else{const p=o(e,r);p!==this.first&&(this.horizontal?u(l(p,this._itemSize,s.left),0):u(0,l(p,this._itemSize,s.top)))}}scrollInView(e,n,r="auto"){if(n){const{first:s,viewport:o}=this.getRenderedRange(),l=(v=0,w=0)=>this.scrollTo({left:v,top:w,behavior:r}),p="to-end"===n;if("to-start"===n){if(this.both)o.first.rows-s.rows>e[0]?l(o.first.cols*this._itemSize[1],(o.first.rows-1)*this._itemSize[0]):o.first.cols-s.cols>e[1]&&l((o.first.cols-1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.first-s>e){const v=(o.first-1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else if(p)if(this.both)o.last.rows-s.rows<=e[0]+1?l(o.first.cols*this._itemSize[1],(o.first.rows+1)*this._itemSize[0]):o.last.cols-s.cols<=e[1]+1&&l((o.first.cols+1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.last-s<=e+1){const v=(o.first+1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,o)=>Math.floor(s/(o||s));let n=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:o}=this.elementViewChild.nativeElement;this.both?(n={rows:e(s,this._itemSize[0]),cols:e(o,this._itemSize[1])},r={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols}):(n=e(this.horizontal?o:s,this._itemSize),r=n+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:n,last:r}}}calculateNumItems(){const e=this.getContentPosition(),n=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(p,v)=>Math.ceil(p/(v||p)),o=p=>Math.ceil(p/2),l=this.both?{rows:s(r,this._itemSize[0]),cols:s(n,this._itemSize[1])}:s(this.horizontal?n:r,this._itemSize);return{numItemsInViewport:l,numToleratedItems:this.d_numToleratedItems||(this.both?[o(l.rows),o(l.cols)]:o(l))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),r=(l,u,p,v=!1)=>this.getLast(l+u+(l<p?2:3)*p,v),s=this.first,o=this.both?{rows:r(this.first.rows,e.rows,n[0]),cols:r(this.first.cols,e.cols,n[1],!0)}:r(this.first,e,n);this.last=o,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&this.handleEvents("onLazyLoad",{first:s,last:o})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:n}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(n<this.defaultHeight?n:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),n=parseInt(e.paddingLeft,10)+Math.max(parseInt(e.left,10),0),r=parseInt(e.paddingRight,10)+Math.max(parseInt(e.right,10),0),s=parseInt(e.paddingTop,10)+Math.max(parseInt(e.top,10),0),o=parseInt(e.paddingBottom,10)+Math.max(parseInt(e.bottom,10),0);return{left:n,right:r,top:s,bottom:o,x:n+r,y:s+o}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(o,l)=>this.elementViewChild.nativeElement.style[o]=l;this.both||this.horizontal?(s("height",r),s("width",n)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),n=(r,s,o,l=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*o+l+"px"};this.both?(n("height",this._items,this._itemSize[0],e.y),n("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,e.x):n("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl){const n=e?e.first:this.first,r=(o,l)=>o*l,s=(o=0,l=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${o}px, ${l}px, 0)`};if(this.both)s(r(n.cols,this._itemSize[1]),r(n.rows,this._itemSize[0]));else{const o=r(n,this._itemSize);this.horizontal?s(o,0):s(0,o)}}}onScrollPositionChange(e){const n=e.target,r=this.getContentPosition(),s=(K,he)=>K?K>he?K-he:K:0,o=(K,he)=>Math.floor(K/(he||K)),l=(K,he,Te,Ae,Le,tt)=>K<=Le?Le:tt?Te-Ae-Le:he+Le-1,u=(K,he,Te,Ae,Le,tt,_t)=>K<=tt?0:Math.max(0,_t?K<he?Te:K-tt:K>he?Te:K-2*tt),p=(K,he,Te,Ae,Le,tt=!1)=>{let _t=he+Ae+2*Le;return K>=Le&&(_t+=Le+1),this.getLast(_t,tt)},v=s(n.scrollTop,r.top),w=s(n.scrollLeft,r.left);let I=this.both?{rows:0,cols:0}:0,T=this.last,k=!1,W=this.lastScrollPos;if(this.both){const K=this.lastScrollPos.top<=v,he=this.lastScrollPos.left<=w,Te={rows:o(v,this._itemSize[0]),cols:o(w,this._itemSize[1])},Ae={rows:l(Te.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],K),cols:l(Te.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],he)};I={rows:u(Te.rows,Ae.rows,this.first.rows,0,0,this.d_numToleratedItems[0],K),cols:u(Te.cols,Ae.cols,this.first.cols,0,0,this.d_numToleratedItems[1],he)},T={rows:p(Te.rows,I.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:p(Te.cols,I.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},k=I.rows!==this.first.rows||T.rows!==this.last.rows||I.cols!==this.first.cols||T.cols!==this.last.cols,W={top:v,left:w}}else{const K=this.horizontal?w:v,he=this.lastScrollPos<=K,Te=o(K,this._itemSize);I=u(Te,l(Te,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,he),this.first,0,0,this.d_numToleratedItems,he),T=p(Te,I,0,this.numItemsInViewport,this.d_numToleratedItems),k=I!==this.first||T!==this.last,W=K}return{first:I,last:T,isRangeChanged:k,scrollPos:W}}onScrollChange(e){const{first:n,last:r,isRangeChanged:s,scrollPos:o}=this.onScrollPositionChange(e);if(s){const l={first:n,last:r};this.setContentPosition(l),this.first=n,this.last=r,this.lastScrollPos=o,this.handleEvents("onScrollIndexChange",l),this._lazy&&this.handleEvents("onLazyLoad",l)}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:n}=this.onScrollPositionChange(e);n&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.cd.detectChanges())},this._delay)}else this.onScrollChange(e)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(this.elementViewChild){const[e,n]=[Bt.getWidth(this.elementViewChild.nativeElement),Bt.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,n!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=n,this.init()})}},this._resizeDelay)}handleEvents(e,n){return this.options&&this.options[e]?this.options[e](n):this[e].emit(n)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,n)=>this.getLoaderOptions(e,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const n=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:n,first:0===r,last:r===n-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,n){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...n}}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo),Xt(Vo))},i.\u0275cmp=_r({type:i,selectors:[["p-scroller"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(PJ,5),Tr(kJ,5)),2&e){let r;Wi(r=ji())&&(n.elementViewChild=r.first),Wi(r=ji())&&(n.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",delay:"delay",resizeDelay:"resizeDelay",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[da],ngContentSelectors:see,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,n){if(1&e&&(Bf(),Xe(0,eee,8,13,"ng-container",0),Xe(1,ree,2,1,"ng-template",null,1,sc)),2&e){const r=ao(2);de("ngIf",!n._disabled)("ngIfElse",r)}},dependencies:[io,$c,ho,el,Ro],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}\n"],encapsulation:2}),i})(),ov=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})(),Du=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let n=this.getInk();if(!n||"none"===getComputedStyle(n,null).display)return;if(Bt.removeClass(n,"p-ink-active"),!Bt.getHeight(n)&&!Bt.getWidth(n)){let l=Math.max(Bt.getOuterWidth(this.el.nativeElement),Bt.getOuterHeight(this.el.nativeElement));n.style.height=l+"px",n.style.width=l+"px"}let r=Bt.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-Bt.getWidth(n)/2,o=e.pageY-r.top+document.body.scrollLeft-Bt.getHeight(n)/2;n.style.top=o+"px",n.style.left=s+"px",Bt.addClass(n,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&Bt.removeClass(e,"p-ink-active")}onAnimationEnd(e){Bt.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),Bt.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(Vo),Xt(Dp,8))},i.\u0275dir=Yr({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),i})(),Xc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})(),oee=(()=>{class i{constructor(e){this.host=e,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=Bt.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn))},i.\u0275dir=Yr({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:["pAutoFocus","autofocus"]}}),i})(),aee=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();function lee(i,t){if(1&i&&(Qe(0,"span"),ci(1),nt()),2&i){const e=Ce();Se(1),is(e.label||"empty")}}function cee(i,t){1&i&&Ni(0)}const TA=function(i){return{height:i}},uee=function(i,t){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":t}},z2=function(i){return{$implicit:i}},hee=["container"],dee=["filter"],fee=["in"],pee=["editableInput"],gee=["items"],mee=["scroller"];function vee(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(2);Se(1),is(e.label||"empty")}}function yee(i,t){1&i&&Ni(0)}const _ee=function(i){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":i}};function bee(i,t){if(1&i&&(Qe(0,"span",12),Xe(1,vee,2,1,"ng-container",13),Xe(2,yee,1,0,"ng-container",14),nt()),2&i){const e=Ce();de("ngClass",bi(9,_ee,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),vr("id",e.labelId),Se(1),de("ngIf",!e.selectedItemTemplate),Se(1),de("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",bi(11,z2,e.selectedOption))}}const Cee=function(i){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":i}};function wee(i,t){if(1&i&&(Qe(0,"span",15),ci(1),nt()),2&i){const e=Ce();de("ngClass",bi(2,Cee,null==e.placeholder||0===e.placeholder.length)),Se(1),is(e.placeholder||"empty")}}function Aee(i,t){if(1&i){const e=yi();Qe(0,"input",16,17),mn("click",function(){return Ot(e),Nt(Ce().onEditableInputClick())})("input",function(r){return Ot(e),Nt(Ce().onEditableInputChange(r))})("focus",function(r){return Ot(e),Nt(Ce().onEditableInputFocus(r))})("blur",function(r){return Ot(e),Nt(Ce().onInputBlur(r))}),nt()}if(2&i){const e=Ce();de("disabled",e.disabled),vr("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function xee(i,t){if(1&i){const e=yi();Qe(0,"i",18),mn("click",function(r){return Ot(e),Nt(Ce().clear(r))}),nt()}}function Iee(i,t){1&i&&Ni(0)}function See(i,t){1&i&&Ni(0)}const YV=function(i){return{options:i}};function Eee(i,t){if(1&i&&(Ur(0),Xe(1,See,1,0,"ng-container",14),Hr()),2&i){const e=Ce(3);Se(1),de("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",bi(2,YV,e.filterOptions))}}function Tee(i,t){if(1&i){const e=yi();Qe(0,"div",27)(1,"input",28,29),mn("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){return Ot(e),Nt(Ce(3).onKeydown(r,!1))})("input",function(r){return Ot(e),Nt(Ce(3).onFilterInputChange(r))}),nt(),Vn(3,"span",30),nt()}if(2&i){const e=Ce(3);Se(1),de("value",e.filterValue||""),vr("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function Mee(i,t){if(1&i&&(Qe(0,"div",24),mn("click",function(n){return n.stopPropagation()}),Xe(1,Eee,2,4,"ng-container",25),Xe(2,Tee,4,4,"ng-template",null,26,sc),nt()),2&i){const e=ao(3),n=Ce(2);Se(1),de("ngIf",n.filterTemplate)("ngIfElse",e)}}function Dee(i,t){1&i&&Ni(0)}const KV=function(i,t){return{$implicit:i,options:t}};function Lee(i,t){if(1&i&&Xe(0,Dee,1,0,"ng-container",14),2&i){const e=t.$implicit,n=t.options;Ce(2),de("ngTemplateOutlet",ao(7))("ngTemplateOutletContext",as(2,KV,e,n))}}function Ree(i,t){1&i&&Ni(0)}function Pee(i,t){if(1&i&&Xe(0,Ree,1,0,"ng-container",14),2&i){const e=t.options;de("ngTemplateOutlet",Ce(4).loaderTemplate)("ngTemplateOutletContext",bi(2,YV,e))}}function kee(i,t){1&i&&(Ur(0),Xe(1,Pee,1,4,"ng-template",34),Hr())}function Oee(i,t){if(1&i){const e=yi();Qe(0,"p-scroller",31,32),mn("onLazyLoad",function(r){return Ot(e),Nt(Ce(2).onLazyLoad.emit(r))}),Xe(2,Lee,1,5,"ng-template",33),Xe(3,kee,2,0,"ng-container",13),nt()}if(2&i){const e=Ce(2);no(bi(8,TA,e.scrollHeight)),de("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),Se(3),de("ngIf",e.loaderTemplate)}}function Fee(i,t){1&i&&Ni(0)}const Nee=function(){return{}};function Bee(i,t){if(1&i&&(Ur(0),Xe(1,Fee,1,0,"ng-container",14),Hr()),2&i){Ce();const e=ao(7),n=Ce();Se(1),de("ngTemplateOutlet",e)("ngTemplateOutletContext",as(3,KV,n.optionsToDisplay,uo(2,Nee)))}}function zee(i,t){if(1&i&&(Qe(0,"span"),ci(1),nt()),2&i){const e=Ce().$implicit,n=Ce(4);Se(1),is(n.getOptionGroupLabel(e)||"empty")}}function Vee(i,t){1&i&&Ni(0)}function Uee(i,t){1&i&&Ni(0)}const ZV=function(i,t){return{$implicit:i,selectedOption:t}};function Hee(i,t){if(1&i&&(Qe(0,"li",40),Xe(1,zee,2,1,"span",13),Xe(2,Vee,1,0,"ng-container",14),nt(),Xe(3,Uee,1,0,"ng-container",14)),2&i){const e=t.$implicit,n=Ce(2).options,r=ao(5),s=Ce(2);de("ngStyle",bi(6,TA,n.itemSize+"px")),Se(1),de("ngIf",!s.groupTemplate),Se(1),de("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",bi(8,z2,e)),Se(1),de("ngTemplateOutlet",r)("ngTemplateOutletContext",as(10,ZV,s.getOptionGroupChildren(e),s.selectedOption))}}function Gee(i,t){if(1&i&&(Ur(0),Xe(1,Hee,4,13,"ng-template",39),Hr()),2&i){const e=Ce().$implicit;Se(1),de("ngForOf",e)}}function Wee(i,t){1&i&&Ni(0)}function jee(i,t){if(1&i&&(Ur(0),Xe(1,Wee,1,0,"ng-container",14),Hr()),2&i){const e=Ce().$implicit,n=ao(5),r=Ce(2);Se(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",as(2,ZV,e,r.selectedOption))}}function $ee(i,t){if(1&i){const e=yi();Qe(0,"p-dropdownItem",41),mn("onClick",function(r){return Ot(e),Nt(Ce(4).onItemClick(r))}),nt()}if(2&i){const e=t.$implicit,n=Ce().selectedOption,r=Ce(3);de("option",e)("selected",n==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function qee(i,t){1&i&&Xe(0,$ee,1,5,"ng-template",39),2&i&&de("ngForOf",t.$implicit)}function Xee(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(4);Se(1),_c(" ",e.emptyFilterMessageLabel," ")}}function Yee(i,t){1&i&&Ni(0,null,43)}function Kee(i,t){if(1&i&&(Qe(0,"li",42),Xe(1,Xee,2,1,"ng-container",25),Xe(2,Yee,2,0,"ng-container",19),nt()),2&i){const e=Ce().options,n=Ce(2);de("ngStyle",bi(4,TA,e.itemSize+"px")),Se(1),de("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),Se(1),de("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function Zee(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(4);Se(1),_c(" ",e.emptyMessageLabel," ")}}function Qee(i,t){1&i&&Ni(0,null,44)}function Jee(i,t){if(1&i&&(Qe(0,"li",42),Xe(1,Zee,2,1,"ng-container",25),Xe(2,Qee,2,0,"ng-container",19),nt()),2&i){const e=Ce().options,n=Ce(2);de("ngStyle",bi(4,TA,e.itemSize+"px")),Se(1),de("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),Se(1),de("ngTemplateOutlet",n.emptyTemplate)}}function ete(i,t){if(1&i&&(Qe(0,"ul",35,36),Xe(2,Gee,2,1,"ng-container",13),Xe(3,jee,2,5,"ng-container",13),Xe(4,qee,1,1,"ng-template",null,37,sc),Xe(6,Kee,3,6,"li",38),Xe(7,Jee,3,6,"li",38),nt()),2&i){const e=t.options,n=Ce(2);no(e.contentStyle),de("ngClass",e.contentStyleClass),vr("id",n.listId),Se(2),de("ngIf",n.group),Se(1),de("ngIf",!n.group),Se(3),de("ngIf",n.filterValue&&n.isEmpty()),Se(1),de("ngIf",!n.filterValue&&n.isEmpty())}}function tte(i,t){1&i&&Ni(0)}const nte=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},ite=function(i){return{value:"visible",params:i}};function rte(i,t){if(1&i){const e=yi();Qe(0,"div",0),mn("click",function(r){return Ot(e),Nt(Ce().onOverlayClick(r))})("@overlayAnimation.start",function(r){return Ot(e),Nt(Ce().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return Ot(e),Nt(Ce().onOverlayAnimationEnd(r))}),Xe(1,Iee,1,0,"ng-container",19),Xe(2,Mee,4,2,"div",20),Qe(3,"div",21),Xe(4,Oee,4,10,"p-scroller",22),Xe(5,Bee,2,6,"ng-container",13),Xe(6,ete,8,8,"ng-template",null,23,sc),nt(),Xe(8,tte,1,0,"ng-container",19),nt()}if(2&i){const e=Ce();Fr(e.panelStyleClass),de("ngClass","p-dropdown-panel p-component")("@overlayAnimation",bi(15,ite,as(12,nte,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),Se(1),de("ngTemplateOutlet",e.headerTemplate),Se(1),de("ngIf",e.filter),Se(1),xd("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),Se(1),de("ngIf",e.virtualScroll),Se(1),de("ngIf",!e.virtualScroll),Se(3),de("ngTemplateOutlet",e.footerTemplate)}}const ste=function(i,t,e,n){return{"p-dropdown p-component":!0,"p-disabled":i,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":n}},ote={provide:wc,useExisting:hs(()=>V2),multi:!0};let ate=(()=>{class i{constructor(){this.onClick=new Bn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Qe(0,"li",0),mn("click",function(s){return n.onOptionClick(s)}),Xe(1,lee,2,1,"span",1),Xe(2,cee,1,0,"ng-container",2),nt()),2&e&&(de("ngStyle",bi(8,TA,n.itemSize+"px"))("id",n.selected?"p-highlighted-option":"")("ngClass",as(10,uee,n.selected,n.disabled)),vr("aria-label",n.label)("aria-selected",n.selected),Se(1),de("ngIf",!n.template),Se(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",bi(13,z2,n.option)))},dependencies:[io,ho,el,Ro,Du],encapsulation:2}),i})(),V2=(()=>{class i{constructor(e,n,r,s,o,l,u){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.filterService=o,this.config=l,this.overlayService=u,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new Bn,this.onFilter=new Bn,this.onFocus=new Bn,this.onBlur=new Bn,this.onClick=new Bn,this.onShow=new Bn,this.onHide=new Bn,this.onClear=new Bn,this.onLazyLoad=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=sC()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&Ji.isNotEmpty(this.value)&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(qc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(qc.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?Ji.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?Ji.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?Ji.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?Ji.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ji.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const n=e.option;this.isOptionDisabled(n)||(this.selectItem(e.originalEvent,n),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},150)}selectItem(e,n){this.selectedOption!=n&&(this.selectedOption=n,this.value=this.getOptionValue(n),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(Bt.findSingle(this.overlay,"li.p-highlight")&&Bt.scrollInView(this.itemsWrapper,Bt.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return Bt.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=Bt.findSingle(this.overlay,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Ll.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length)if(this.virtualScroll){const n=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==n&&this.scroller.scrollToIndex(n)}else{let n=Bt.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");n&&n.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){"void"===e.toState&&Ll.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Bt.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Bt.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?Bt.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Bt.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}findNextEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}onKeydown(e,n){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let o=this.optionsToDisplay[r.groupIndex-1];o&&(this.selectItem(e,this.getOptionGroupChildren(o)[this.getOptionGroupChildren(o).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:n&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:n&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const n=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=n,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+n:n,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let n;return this.searchValue&&(n=this.searchOptionInRange(e,this.optionsToDisplay.length),n||(n=this.searchOptionInRange(0,e))),n}searchOptionInRange(e,n){for(let r=e;r<n;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}}return null}findOptionIndex(e,n){let r=-1;if(n)for(let s=0;s<n.length;s++)if(null==e&&null==this.getOptionValue(n[s])||Ji.equals(e,this.getOptionValue(n[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,n){let r,s;if(n)for(let o=0;o<n.length&&(r=o,s=this.findOptionIndex(e,this.getOptionGroupChildren(n[o])),-1===s);o++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,n,r){if(this.group&&!r){let s;if(n&&n.length)for(let o of n)if(s=this.findOption(e,this.getOptionGroupChildren(o),!0),s)break;return s}{let s=this.findOptionIndex(e,n);return-1!=s?n[s]:null}}onFilterInputChange(e){let n=e.target.value;n&&n.length?(this._filterValue=n,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=n}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?Bt.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():Bt.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Bt.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Ll.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(d),Xt(xo),Xt(Vo),Xt(oA),Xt(Dp),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-dropdown"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(hee,5),Tr(dee,5),Tr(fee,5),Tr(pee,5),Tr(gee,5),Tr(mee,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.filterViewChild=r.first),Wi(r=ji())&&(n.accessibleViewChild=r.first),Wi(r=ji())&&(n.editableInputViewChild=r.first),Wi(r=ji())&&(n.itemsViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,n){2&e&&Mp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused||n.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[Ao([ote])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","pAutoFocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,n){1&e&&(Qe(0,"div",0,1),mn("click",function(s){return n.onMouseclick(s)}),Qe(2,"div",2)(3,"input",3,4),mn("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)})("keydown",function(s){return n.onKeydown(s,!0)}),nt()(),Xe(5,bee,3,13,"span",5),Xe(6,wee,2,4,"span",6),Xe(7,Aee,2,4,"input",7),Xe(8,xee,1,0,"i",8),Qe(9,"div",9),Vn(10,"span",10),nt(),Xe(11,rte,9,17,"div",11),nt()),2&e&&(Fr(n.styleClass),de("ngClass",sf(20,ste,n.disabled,n.overlayVisible,n.focused,n.showClear&&!n.disabled))("ngStyle",n.style),Se(3),de("disabled",n.disabled)("pAutoFocus",n.autofocus),vr("id",n.inputId)("placeholder",n.placeholder)("aria-label",n.ariaLabel)("aria-expanded",!1)("aria-labelledby",n.ariaLabelledBy)("tabindex",n.tabindex)("aria-activedescendant",n.overlayVisible?n.labelId:null),Se(2),de("ngIf",!n.editable&&null!=n.label),Se(1),de("ngIf",!n.editable&&null==n.label),Se(1),de("ngIf",n.editable),Se(1),de("ngIf",null!=n.value&&n.showClear&&!n.disabled),Se(1),vr("aria-expanded",n.overlayVisible),Se(1),de("ngClass",n.dropdownIcon),Se(1),de("ngIf",n.overlayVisible))},dependencies:[io,$c,ho,el,Ro,za,rv,EA,oee,ate],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[ly("overlayAnimation",[Mu(":enter",[tl({opacity:0,transform:"scaleY(0.8)"}),Ac("{{showTransitionParams}}")]),Mu(":leave",[Ac("{{hideTransitionParams}}",tl({opacity:0}))])])]},changeDetection:0}),i})(),j1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa,sv,Xc,ov,aee,xa,ov]}),i})(),fC=(()=>{class i{constructor(e,n,r){this.el=e,this.ngModel=n,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(oy,8),Xt(xo))},i.\u0275dir=Yr({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,n){1&e&&mn("input",function(s){return n.onInput(s)}),2&e&&Mp("p-filled",n.filled)}}),i})(),U2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();function lte(i,t){1&i&&Ni(0)}const cte=function(i,t,e,n){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":n}};function ute(i,t){if(1&i&&Vn(0,"span",4),2&i){const e=Ce();Fr(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),de("ngClass",sf(4,cte,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),vr("aria-hidden",!0)}}function hte(i,t){if(1&i&&(Qe(0,"span",5),ci(1),nt()),2&i){const e=Ce();vr("aria-hidden",e.icon&&!e.label),Se(1),is(e.label||"\xa0")}}function dte(i,t){if(1&i&&(Qe(0,"span",4),ci(1),nt()),2&i){const e=Ce();Fr(e.badgeClass),de("ngClass",e.badgeStyleClass()),Se(1),is(e.badge)}}const fte=function(i,t,e,n,r){return{"p-button p-component":!0,"p-button-icon-only":i,"p-button-vertical":t,"p-disabled":e,"p-button-loading":n,"p-button-loading-label-only":r}},pte=["*"];let x0=(()=>{class i{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,Bt.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let n=this.label?"p-button-icon-"+this.iconPos:null;n&&Bt.addClass(e,n);let r=this.getIconClass();r&&Bt.addMultipleClasses(e,r);let s=Bt.findSingle(this.el.nativeElement,".p-button-label");s?this.el.nativeElement.insertBefore(e,s):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=Bt.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=Bt.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(Bt.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn))},i.\u0275dir=Yr({type:i,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),i})(),$1=(()=>{class i{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new Bn,this.onFocus=new Bn,this.onBlur=new Bn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-button"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:pte,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,n){1&e&&(Bf(),Qe(0,"button",0),mn("click",function(s){return n.onClick.emit(s)})("focus",function(s){return n.onFocus.emit(s)})("blur",function(s){return n.onBlur.emit(s)}),su(1),Xe(2,lte,1,0,"ng-container",1),Xe(3,ute,1,9,"span",2),Xe(4,hte,2,2,"span",3),Xe(5,dte,2,4,"span",2),nt()),2&e&&(Fr(n.styleClass),de("ngStyle",n.style)("disabled",n.disabled||n.loading)("ngClass",h0(11,fte,n.icon&&!n.label,("top"===n.iconPos||"bottom"===n.iconPos)&&n.label,n.disabled||n.loading,n.loading,n.loading&&!n.icon&&n.label)),vr("type",n.type)("aria-label",n.ariaLabel),Se(2),de("ngTemplateOutlet",n.contentTemplate),Se(1),de("ngIf",!n.contentTemplate&&(n.icon||n.loading)),Se(1),de("ngIf",!n.contentTemplate),Se(1),de("ngIf",!n.contentTemplate&&n.badge))},dependencies:[io,ho,el,Ro,Du],encapsulation:2,changeDetection:0}),i})(),av=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,Xc]}),i})();const gte=["input"];function mte(i,t){if(1&i){const e=yi();Qe(0,"i",6),mn("click",function(){return Ot(e),Nt(Ce().clear())}),nt()}}const QV=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},JV=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function vte(i,t){if(1&i){const e=yi();Qe(0,"span",7)(1,"button",8),mn("mousedown",function(r){return Ot(e),Nt(Ce().onUpButtonMouseDown(r))})("mouseup",function(){return Ot(e),Nt(Ce().onUpButtonMouseUp())})("mouseleave",function(){return Ot(e),Nt(Ce().onUpButtonMouseLeave())})("keydown",function(r){return Ot(e),Nt(Ce().onUpButtonKeyDown(r))})("keyup",function(){return Ot(e),Nt(Ce().onUpButtonKeyUp())}),nt(),Qe(2,"button",8),mn("mousedown",function(r){return Ot(e),Nt(Ce().onDownButtonMouseDown(r))})("mouseup",function(){return Ot(e),Nt(Ce().onDownButtonMouseUp())})("mouseleave",function(){return Ot(e),Nt(Ce().onDownButtonMouseLeave())})("keydown",function(r){return Ot(e),Nt(Ce().onDownButtonKeyDown(r))})("keyup",function(){return Ot(e),Nt(Ce().onDownButtonKeyUp())}),nt()()}if(2&i){const e=Ce();Se(1),Fr(e.incrementButtonClass),de("ngClass",uo(10,QV))("icon",e.incrementButtonIcon)("disabled",e.disabled),Se(1),Fr(e.decrementButtonClass),de("ngClass",uo(11,JV))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function yte(i,t){if(1&i){const e=yi();Qe(0,"button",8),mn("mousedown",function(r){return Ot(e),Nt(Ce().onUpButtonMouseDown(r))})("mouseup",function(){return Ot(e),Nt(Ce().onUpButtonMouseUp())})("mouseleave",function(){return Ot(e),Nt(Ce().onUpButtonMouseLeave())})("keydown",function(r){return Ot(e),Nt(Ce().onUpButtonKeyDown(r))})("keyup",function(){return Ot(e),Nt(Ce().onUpButtonKeyUp())}),nt()}if(2&i){const e=Ce();Fr(e.incrementButtonClass),de("ngClass",uo(5,QV))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function _te(i,t){if(1&i){const e=yi();Qe(0,"button",8),mn("mousedown",function(r){return Ot(e),Nt(Ce().onDownButtonMouseDown(r))})("mouseup",function(){return Ot(e),Nt(Ce().onDownButtonMouseUp())})("mouseleave",function(){return Ot(e),Nt(Ce().onDownButtonMouseLeave())})("keydown",function(r){return Ot(e),Nt(Ce().onDownButtonKeyDown(r))})("keyup",function(){return Ot(e),Nt(Ce().onDownButtonKeyUp())}),nt()}if(2&i){const e=Ce();Fr(e.decrementButtonClass),de("ngClass",uo(5,JV))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const bte=function(i,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},Cte={provide:wc,useExisting:hs(()=>e4),multi:!0};let e4=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new Bn,this.onFocus=new Bn,this.onBlur=new Bn,this.onKeyDown=new Bn,this.onClear=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),n=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>n.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if("-"===n)return n;let r=+n;return isNaN(r)?null:r}return null}repeat(e,n,r){if(this.readonly)return;let s=n||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,n){let r=this.step*n,s=this.parseValue(this.input.nativeElement.value)||0,o=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(o).length||(this.updateInput(o,null,"spin",null),this.updateModel(e,o),this.handleOnInput(e,s,o))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let n=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,o=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(s.charAt(n-1))||e.preventDefault();break;case 39:this.isNumeralChar(s.charAt(n))||e.preventDefault();break;case 13:o=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(e,o);break;case 8:if(e.preventDefault(),n===r){const l=s.charAt(n-1),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n-2)+s.slice(n-1);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n-1,n-1):o=s.slice(0,n-1)+s.slice(n);else if(u>0&&n>u){const w=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n-1)+w+s.slice(n)}else 1===p?(o=s.slice(0,n-1)+"0"+s.slice(n),o=this.parseValue(o)>0?o:""):o=s.slice(0,n-1)+s.slice(n)}this.updateValue(e,o,null,"delete-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range");break;case 46:if(e.preventDefault(),n===r){const l=s.charAt(n),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n)+s.slice(n+2);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n+1,n+1):o=s.slice(0,n)+s.slice(n+1);else if(u>0&&n>u){const w=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n)+w+s.slice(n+1)}else 1===p?(o=s.slice(0,n)+"0"+s.slice(n+1),o=this.parseValue(o)>0?o:""):o=s.slice(0,n)+s.slice(n+1)}this.updateValue(e,o,null,"delete-back-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let n=e.which||e.keyCode,r=String.fromCharCode(n);const s=this.isDecimalSign(r),o=this.isMinusSign(r);(48<=n&&n<=57||o||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:o})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let n=(e.clipboardData||window.clipboardData).getData("Text");if(n){let r=this.parseValue(n);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let n=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){const n=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const o=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:o}}insert(e,n,r={isDecimalSign:!1,isMinusSign:!1}){const s=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let o=this.input.nativeElement.selectionStart,l=this.input.nativeElement.selectionEnd,u=this.input.nativeElement.value.trim();const{decimalCharIndex:p,minusCharIndex:v,suffixCharIndex:w,currencyCharIndex:I}=this.getCharIndexes(u);let T;if(r.isMinusSign)0===o&&(T=u,(-1===v||0!==l)&&(T=this.insertText(u,n,0,l)),this.updateValue(e,T,n,"insert"));else if(r.isDecimalSign)p>0&&o===p?this.updateValue(e,u,n,"insert"):(p>o&&p<l||-1===p&&this.maxFractionDigits)&&(T=this.insertText(u,n,o,l),this.updateValue(e,T,n,"insert"));else{const k=this.numberFormat.resolvedOptions().maximumFractionDigits,W=o!==l?"range-insert":"insert";if(p>0&&o>p){if(o+n.length-(p+1)<=k){const K=I>=o?I-1:w>=o?w:u.length;T=u.slice(0,o)+n+u.slice(o+n.length,K)+u.slice(K),this.updateValue(e,T,n,W)}}else T=this.insertText(u,n,o,l),this.updateValue(e,T,n,W)}}insertText(e,n,r,s){if(2===("."===n?n:n.split(".")).length){const l=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,l>0?e.slice(0,r)+this.formatValue(n)+e.slice(s):e||this.formatValue(n)}return s-r===e.length?this.formatValue(n):0===r?n+e.slice(s):s===e.length?e.slice(0,r)+n:e.slice(0,r)+n+e.slice(s)}deleteRange(e,n,r){let s;return s=r-n===e.length?"":0===n?e.slice(r):r===e.length?e.slice(0,n):e.slice(0,n)+e.slice(r),s}initCursor(){let e=this.input.nativeElement.selectionStart,n=this.input.nativeElement.value,r=n.length,s=null,o=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e-=o;let l=n.charAt(e);if(this.isNumeralChar(l))return e+o;let u=e-1;for(;u>=0;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u--}if(null!==s)this.input.nativeElement.setSelectionRange(s+1,s+1);else{for(u=e;u<r;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u++}null!==s&&this.input.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,n,r,s){let o=this.input.nativeElement.value,l=null;null!=n&&(l=this.parseValue(n),l=l||this.allowEmpty?l:0,this.updateInput(l,r,s,n),this.handleOnInput(e,o,l))}handleOnInput(e,n,r){this.isValueChanged(n,r)&&this.onInput.emit({originalEvent:e,value:r})}isValueChanged(e,n){return null===n&&null!==e||null!=n&&n!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,n,r,s){n=n||"";let o=this.input.nativeElement.value,l=this.formatValue(e),u=o.length;if(l!==s&&(l=this.concatValues(l,s)),0===u){this.input.nativeElement.value=l,this.input.nativeElement.setSelectionRange(0,0);const v=this.initCursor()+n.length;this.input.nativeElement.setSelectionRange(v,v)}else{let p=this.input.nativeElement.selectionStart,v=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<l.length)return;this.input.nativeElement.value=l;let w=l.length;if("range-insert"===r){const I=this.parseValue((o||"").slice(0,p)),k=(null!==I?I.toString():"").split("").join(`(${this.groupChar})?`),W=new RegExp(k,"g");W.test(l);const K=n.split("").join(`(${this.groupChar})?`),he=new RegExp(K,"g");he.test(l.slice(W.lastIndex)),v=W.lastIndex+he.lastIndex,this.input.nativeElement.setSelectionRange(v,v)}else if(w===u)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(v+1,v+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(v-1,v-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(v,v);else if("delete-back-single"===r){let I=o.charAt(v-1),T=o.charAt(v),k=u-w,W=this._group.test(T);W&&1===k?v+=1:!W&&this.isNumeralChar(I)&&(v+=-1*k+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(v,v)}else if("-"===o&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const T=this.initCursor()+n.length+1;this.input.nativeElement.setSelectionRange(T,T)}else v+=w-u,this.input.nativeElement.setSelectionRange(v,v)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,n){if(e&&n){let r=n.search(this._decimal);return this._decimal.lastIndex=0,-1!==r?e.split(this._decimal)[0]+n.slice(r):e}return e}getDecimalLength(e){if(e){const n=e.split(this._decimal);if(2===n.length)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let n=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(n),this.input.nativeElement.setAttribute("aria-valuenow",n),this.updateModel(e,n),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,n){this.value!==n&&(this.value=n,this.onModelChange(n)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-inputNumber"]],viewQuery:function(e,n){if(1&e&&Tr(gte,5),2&e){let r;Wi(r=ji())&&(n.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Mp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused)("p-inputnumber-clearable",n.showClear&&"vertical"!=n.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Ao([Cte]),da],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,n){1&e&&(Qe(0,"span",0)(1,"input",1,2),mn("input",function(s){return n.onUserInput(s)})("keydown",function(s){return n.onInputKeyDown(s)})("keypress",function(s){return n.onInputKeyPress(s)})("paste",function(s){return n.onPaste(s)})("click",function(){return n.onInputClick()})("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)}),nt(),Xe(3,mte,1,0,"i",3),Xe(4,vte,3,12,"span",4),Xe(5,yte,1,6,"button",5),Xe(6,_te,1,6,"button",5),nt()),2&e&&(Fr(n.styleClass),de("ngClass",Su(28,bte,n.showButtons&&"stacked"===n.buttonLayout,n.showButtons&&"horizontal"===n.buttonLayout,n.showButtons&&"vertical"===n.buttonLayout))("ngStyle",n.style),Se(1),Fr(n.inputStyleClass),de("ngClass","p-inputnumber-input")("ngStyle",n.inputStyle)("value",n.formattedValue())("disabled",n.disabled)("readonly",n.readonly),vr("placeholder",n.placeholder)("title",n.title)("id",n.inputId)("size",n.size)("name",n.name)("autocomplete",n.autocomplete)("maxlength",n.maxlength)("tabindex",n.tabindex)("aria-label",n.ariaLabel)("aria-required",n.ariaRequired)("required",n.required)("min",n.min)("max",n.max),Se(2),de("ngIf","vertical"!=n.buttonLayout&&n.showClear&&n.value),Se(1),de("ngIf",n.showButtons&&"stacked"===n.buttonLayout),Se(1),de("ngIf",n.showButtons&&"stacked"!==n.buttonLayout),Se(1),de("ngIf",n.showButtons&&"stacked"!==n.buttonLayout))},dependencies:[io,ho,Ro,fC,x0],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),q1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,U2,av]}),i})();function wte(i,t){1&i&&Ni(0)}const H2=function(i){return{$implicit:i}};function Ate(i,t){if(1&i&&(Qe(0,"div",15),Xe(1,wte,1,0,"ng-container",16),nt()),2&i){const e=Ce(2);Se(1),de("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",bi(2,H2,e.paginatorState))}}function xte(i,t){if(1&i&&(Qe(0,"span",17),ci(1),nt()),2&i){const e=Ce(2);Se(1),is(e.currentPageReport)}}const X1=function(i){return{"p-disabled":i}};function Ite(i,t){if(1&i){const e=yi();Qe(0,"button",18),mn("click",function(r){return Ot(e),Nt(Ce(2).changePageToFirst(r))}),Vn(1,"span",19),nt()}if(2&i){const e=Ce(2);de("disabled",e.isFirstPage()||e.empty())("ngClass",bi(2,X1,e.isFirstPage()||e.empty()))}}const Ste=function(i){return{"p-highlight":i}};function Ete(i,t){if(1&i){const e=yi();Qe(0,"button",22),mn("click",function(r){const o=Ot(e).$implicit;return Nt(Ce(3).onPageLinkClick(r,o-1))}),ci(1),nt()}if(2&i){const e=t.$implicit,n=Ce(3);de("ngClass",bi(2,Ste,e-1==n.getPage())),Se(1),is(e)}}function Tte(i,t){if(1&i&&(Qe(0,"span",20),Xe(1,Ete,2,4,"button",21),nt()),2&i){const e=Ce(2);Se(1),de("ngForOf",e.pageLinks)}}function Mte(i,t){1&i&&ci(0),2&i&&is(Ce(3).currentPageReport)}function Dte(i,t){if(1&i){const e=yi();Qe(0,"p-dropdown",23),mn("onChange",function(r){return Ot(e),Nt(Ce(2).onPageDropdownChange(r))}),Xe(1,Mte,1,1,"ng-template",24),nt()}if(2&i){const e=Ce(2);de("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function Lte(i,t){if(1&i){const e=yi();Qe(0,"button",25),mn("click",function(r){return Ot(e),Nt(Ce(2).changePageToLast(r))}),Vn(1,"span",26),nt()}if(2&i){const e=Ce(2);de("disabled",e.isLastPage()||e.empty())("ngClass",bi(2,X1,e.isLastPage()||e.empty()))}}function Rte(i,t){if(1&i){const e=yi();Qe(0,"p-inputNumber",27),mn("ngModelChange",function(r){return Ot(e),Nt(Ce(2).changePage(r-1))}),nt()}if(2&i){const e=Ce(2);de("ngModel",e.currentPage())("disabled",e.empty())}}function Pte(i,t){1&i&&Ni(0)}function kte(i,t){if(1&i&&Xe(0,Pte,1,0,"ng-container",16),2&i){const e=t.$implicit;de("ngTemplateOutlet",Ce(4).dropdownItemTemplate)("ngTemplateOutletContext",bi(2,H2,e))}}function Ote(i,t){1&i&&(Ur(0),Xe(1,kte,1,4,"ng-template",30),Hr())}function Fte(i,t){if(1&i){const e=yi();Qe(0,"p-dropdown",28),mn("ngModelChange",function(r){return Ot(e),Nt(Ce(2).rows=r)})("onChange",function(r){return Ot(e),Nt(Ce(2).onRppChange(r))}),Xe(1,Ote,2,0,"ng-container",29),nt()}if(2&i){const e=Ce(2);de("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),Se(1),de("ngIf",e.dropdownItemTemplate)}}function Nte(i,t){1&i&&Ni(0)}function Bte(i,t){if(1&i&&(Qe(0,"div",31),Xe(1,Nte,1,0,"ng-container",16),nt()),2&i){const e=Ce(2);Se(1),de("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",bi(2,H2,e.paginatorState))}}function zte(i,t){if(1&i){const e=yi();Qe(0,"div",1),Xe(1,Ate,2,4,"div",2),Xe(2,xte,2,1,"span",3),Xe(3,Ite,2,4,"button",4),Qe(4,"button",5),mn("click",function(r){return Ot(e),Nt(Ce().changePageToPrev(r))}),Vn(5,"span",6),nt(),Xe(6,Tte,2,1,"span",7),Xe(7,Dte,2,5,"p-dropdown",8),Qe(8,"button",9),mn("click",function(r){return Ot(e),Nt(Ce().changePageToNext(r))}),Vn(9,"span",10),nt(),Xe(10,Lte,2,4,"button",11),Xe(11,Rte,1,2,"p-inputNumber",12),Xe(12,Fte,2,6,"p-dropdown",13),Xe(13,Bte,2,4,"div",14),nt()}if(2&i){const e=Ce();Fr(e.styleClass),de("ngStyle",e.style)("ngClass","p-paginator p-component"),Se(1),de("ngIf",e.templateLeft),Se(1),de("ngIf",e.showCurrentPageReport),Se(1),de("ngIf",e.showFirstLastIcon),Se(1),de("disabled",e.isFirstPage()||e.empty())("ngClass",bi(17,X1,e.isFirstPage()||e.empty())),Se(2),de("ngIf",e.showPageLinks),Se(1),de("ngIf",e.showJumpToPageDropdown),Se(1),de("disabled",e.isLastPage()||e.empty())("ngClass",bi(19,X1,e.isLastPage()||e.empty())),Se(2),de("ngIf",e.showFirstLastIcon),Se(1),de("ngIf",e.showJumpToPageInput),Se(1),de("ngIf",e.rowsPerPageOptions),Se(1),de("ngIf",e.templateRight)}}let t4=(()=>{class i{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new Bn,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),n=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-n/2)),s=Math.min(e-1,r+n-1);return r=Math.max(0,r-(this.pageLinkSize-(s-r+1))),[r,s]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let s=e[0];s<=r;s++)this.pageLinks.push(s+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let s=0;s<this.getPageCount();s++)this.pageItems.push({label:String(s+1),value:s})}}changePage(e){var n=this.getPageCount();if(e>=0&&e<n){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:n};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,n){this.changePage(n),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[da],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,n){1&e&&Xe(0,zte,14,21,"div",0),2&e&&de("ngIf",!!n.alwaysShow||n.pageLinks&&n.pageLinks.length>1)},dependencies:[io,$c,ho,el,Ro,V2,za,e4,uC,oy,Du],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),n4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,j1,q1,W1,xa,Xc,j1,q1,W1,xa]}),i})();function Vte(i,t){1&i&&Vn(0,"span",8),2&i&&(Fr(Ce(2).$implicit.icon),de("ngClass","p-button-icon p-button-icon-left"))}function Ute(i,t){if(1&i&&(Ur(0),Xe(1,Vte,1,3,"span",6),Qe(2,"span",7),ci(3),nt(),Hr()),2&i){const e=Ce().$implicit,n=Ce();Se(1),de("ngIf",e.icon),Se(2),is(n.getOptionLabel(e))}}function Hte(i,t){1&i&&Ni(0)}const Gte=function(i,t){return{$implicit:i,index:t}};function Wte(i,t){if(1&i&&Xe(0,Hte,1,0,"ng-container",9),2&i){const e=Ce(),n=e.$implicit,r=e.index;de("ngTemplateOutlet",Ce().itemTemplate)("ngTemplateOutletContext",as(2,Gte,n,r))}}const jte=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-button-icon-only":e}};function $te(i,t){if(1&i){const e=yi();Qe(0,"div",2,3),mn("click",function(r){const s=Ot(e),o=s.$implicit,l=s.index;return Nt(Ce().onItemClick(r,o,l))})("keydown.enter",function(r){const s=Ot(e),o=s.$implicit,l=s.index;return Nt(Ce().onItemClick(r,o,l))})("blur",function(){return Ot(e),Nt(Ce().onBlur())}),Xe(2,Ute,4,2,"ng-container",4),Xe(3,Wte,1,5,"ng-template",null,5,sc),nt()}if(2&i){const e=t.$implicit,n=ao(4),r=Ce();Fr(e.styleClass),de("ngClass",Su(10,jte,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),vr("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),Se(2),de("ngIf",!r.itemTemplate)("ngIfElse",n)}}const qte={provide:wc,useExisting:hs(()=>Xte),multi:!0};let Xte=(()=>{class i{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new Bn,this.onChange=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?Ji.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ji.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Ji.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,n,r){if(!this.disabled&&!this.isOptionDisabled(n)){if(this.multiple)this.isSelected(n)?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let s=this.getOptionValue(n);this.value!==s&&(this.value=this.getOptionValue(n),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:n,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(n=>!Ji.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(Ji.equals(s,r,this.dataKey)){n=!0;break}}else n=Ji.equals(this.getOptionValue(e),this.value,this.dataKey);return n}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-selectButton"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,lm,5),2&e){let s;Wi(s=ji())&&(n.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[Ao([qte])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Qe(0,"div",0),Xe(1,$te,5,14,"div",1),nt()),2&e&&(Fr(n.styleClass),de("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",n.style),Se(1),de("ngForOf",n.options))},dependencies:[io,$c,ho,el,Ro,Du],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Yte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,Xc]}),i})();const Kte=function(i,t,e){return{"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function Zte(i,t){if(1&i){const e=yi();Qe(0,"label",7),mn("click",function(r){Ot(e);const s=Ce(),o=ao(3);return Nt(s.onClick(r,o))}),ci(1),nt()}if(2&i){const e=Ce();de("ngClass",Su(3,Kte,null!=e.value,e.disabled,e.focused)),vr("for",e.inputId),Se(1),is(e.label)}}const Qte=function(i,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":t}},Jte=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},ene={provide:wc,useExisting:hs(()=>tne),multi:!0};let tne=(()=>{class i{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,n.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[Ao([ene])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,n){if(1&e){const r=yi();Qe(0,"div",0)(1,"div",1)(2,"input",2,3),mn("keyup",function(o){return n.onKeyup(o)})("keydown",function(o){return n.onKeydown(o)})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),nt()(),Qe(4,"div",4),mn("click",function(o){Ot(r);const l=ao(3);return Nt(n.onClick(o,l))}),Vn(5,"span",5),nt()(),Xe(6,Zte,2,7,"label",6)}2&e&&(Fr(n.styleClass),de("ngStyle",n.style)("ngClass",as(14,Qte,n.disabled,n.focused)),Se(2),de("name",n.name)("readonly",n.readonly)("disabled",n.disabled),vr("id",n.inputId)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy),Se(2),de("ngClass",Su(17,Jte,null!=n.value,n.disabled,n.focused)),vr("aria-checked",!0===n.value),Se(1),de("ngClass",!0===n.value?n.checkboxTrueIcon:!1===n.value?n.checkboxFalseIcon:""),Se(1),de("ngIf",n.label))},dependencies:[io,ho,Ro],encapsulation:2,changeDetection:0}),i})(),nne=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();const ine=["container"],rne=["inputfield"],sne=["contentWrapper"];function one(i,t){if(1&i){const e=yi();Qe(0,"i",8),mn("click",function(){return Ot(e),Nt(Ce(2).clear())}),nt()}}function ane(i,t){if(1&i){const e=yi();Qe(0,"button",9),mn("click",function(r){Ot(e),Ce();const s=ao(1);return Nt(Ce().onButtonClick(r,s))}),nt()}if(2&i){const e=Ce(2);de("icon",e.icon)("disabled",e.disabled),vr("aria-label",e.iconAriaLabel)}}function lne(i,t){if(1&i){const e=yi();Qe(0,"input",4,5),mn("focus",function(r){return Ot(e),Nt(Ce().onInputFocus(r))})("keydown",function(r){return Ot(e),Nt(Ce().onInputKeydown(r))})("click",function(){return Ot(e),Nt(Ce().onInputClick())})("blur",function(r){return Ot(e),Nt(Ce().onInputBlur(r))})("input",function(r){return Ot(e),Nt(Ce().onUserInput(r))}),nt(),Xe(2,one,1,0,"i",6),Xe(3,ane,1,3,"button",7)}if(2&i){const e=Ce();Fr(e.inputStyleClass),de("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),vr("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),Se(2),de("ngIf",e.showClear&&!e.disabled&&null!=e.value),Se(1),de("ngIf",e.showIcon)}}function cne(i,t){1&i&&Ni(0)}function une(i,t){if(1&i){const e=yi();Qe(0,"button",30),mn("keydown",function(r){return Ot(e),Nt(Ce(4).onContainerButtonKeydown(r))})("click",function(r){return Ot(e),Nt(Ce(4).onPrevButtonClick(r))}),Vn(1,"span",31),nt()}}function hne(i,t){if(1&i){const e=yi();Qe(0,"button",32),mn("click",function(r){return Ot(e),Nt(Ce(4).switchToMonthView(r))})("keydown",function(r){return Ot(e),Nt(Ce(4).onContainerButtonKeydown(r))}),ci(1),nt()}if(2&i){const e=Ce().$implicit,n=Ce(3);de("disabled",n.switchViewButtonDisabled()),Se(1),_c(" ",n.getMonthName(e.month)," ")}}function dne(i,t){if(1&i){const e=yi();Qe(0,"button",33),mn("click",function(r){return Ot(e),Nt(Ce(4).switchToYearView(r))})("keydown",function(r){return Ot(e),Nt(Ce(4).onContainerButtonKeydown(r))}),ci(1),nt()}if(2&i){const e=Ce().$implicit,n=Ce(3);de("disabled",n.switchViewButtonDisabled()),Se(1),_c(" ",n.getYear(e)," ")}}function fne(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(5);Se(1),AI("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function pne(i,t){1&i&&Ni(0)}const r4=function(i){return{$implicit:i}};function gne(i,t){if(1&i&&(Qe(0,"span",34),Xe(1,fne,2,2,"ng-container",13),Xe(2,pne,1,0,"ng-container",35),nt()),2&i){const e=Ce(4);Se(1),de("ngIf",!e.decadeTemplate),Se(1),de("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",bi(3,r4,e.yearPickerValues))}}function mne(i,t){if(1&i&&(Qe(0,"th",41)(1,"span"),ci(2),nt()()),2&i){const e=Ce(5);Se(2),is(e.getTranslation("weekHeader"))}}function vne(i,t){if(1&i&&(Qe(0,"th",42)(1,"span"),ci(2),nt()()),2&i){const e=t.$implicit;Se(2),is(e)}}function yne(i,t){if(1&i&&(Qe(0,"td",45)(1,"span",46),ci(2),nt()()),2&i){const e=Ce().index,n=Ce(2).$implicit;Se(2),_c(" ",n.weekNumbers[e]," ")}}function _ne(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(2).$implicit;Se(1),is(e.day)}}function bne(i,t){1&i&&Ni(0)}const Cne=function(i,t){return{"p-highlight":i,"p-disabled":t}};function wne(i,t){if(1&i){const e=yi();Ur(0),Qe(1,"span",48),mn("click",function(r){Ot(e);const s=Ce().$implicit;return Nt(Ce(6).onDateSelect(r,s))})("keydown",function(r){Ot(e);const s=Ce().$implicit,o=Ce(3).index;return Nt(Ce(3).onDateCellKeydown(r,s,o))}),Xe(2,_ne,2,1,"ng-container",13),Xe(3,bne,1,0,"ng-container",35),nt(),Hr()}if(2&i){const e=Ce().$implicit,n=Ce(6);Se(1),de("ngClass",as(4,Cne,n.isSelected(e),!e.selectable)),Se(1),de("ngIf",!n.dateTemplate),Se(1),de("ngTemplateOutlet",n.dateTemplate)("ngTemplateOutletContext",bi(7,r4,e))}}const Ane=function(i,t){return{"p-datepicker-other-month":i,"p-datepicker-today":t}};function xne(i,t){if(1&i&&(Qe(0,"td",47),Xe(1,wne,4,9,"ng-container",13),nt()),2&i){const e=t.$implicit,n=Ce(6);de("ngClass",as(2,Ane,e.otherMonth,e.today)),Se(1),de("ngIf",!e.otherMonth||n.showOtherMonths)}}function Ine(i,t){if(1&i&&(Qe(0,"tr"),Xe(1,yne,3,1,"td",43),Xe(2,xne,2,5,"td",44),nt()),2&i){const e=t.$implicit,n=Ce(5);Se(1),de("ngIf",n.showWeek),Se(1),de("ngForOf",e)}}function Sne(i,t){if(1&i&&(Qe(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),Xe(4,mne,3,1,"th",38),Xe(5,vne,3,1,"th",39),nt()(),Qe(6,"tbody"),Xe(7,Ine,3,2,"tr",40),nt()()()),2&i){const e=Ce().$implicit,n=Ce(3);Se(4),de("ngIf",n.showWeek),Se(1),de("ngForOf",n.weekDays),Se(2),de("ngForOf",e.dates)}}function Ene(i,t){if(1&i){const e=yi();Qe(0,"div",20)(1,"div",21),Xe(2,une,2,0,"button",22),Qe(3,"div",23),Xe(4,hne,2,2,"button",24),Xe(5,dne,2,2,"button",25),Xe(6,gne,3,5,"span",26),nt(),Qe(7,"button",27),mn("keydown",function(r){return Ot(e),Nt(Ce(3).onContainerButtonKeydown(r))})("click",function(r){return Ot(e),Nt(Ce(3).onNextButtonClick(r))}),Vn(8,"span",28),nt()(),Xe(9,Sne,8,3,"div",29),nt()}if(2&i){const e=t.index,n=Ce(3);Se(2),de("ngIf",0===e),Se(2),de("ngIf","date"===n.currentView),Se(1),de("ngIf","year"!==n.currentView),Se(1),de("ngIf","year"===n.currentView),Se(1),xd("display",1===n.numberOfMonths||e===n.numberOfMonths-1?"inline-flex":"none"),Se(2),de("ngIf","date"===n.currentView)}}const s4=function(i){return{"p-highlight":i}};function Tne(i,t){if(1&i){const e=yi();Qe(0,"span",51),mn("click",function(r){const o=Ot(e).index;return Nt(Ce(4).onMonthSelect(r,o))})("keydown",function(r){const o=Ot(e).index;return Nt(Ce(4).onMonthCellKeydown(r,o))}),ci(1),nt()}if(2&i){const e=t.$implicit,n=t.index,r=Ce(4);de("ngClass",bi(2,s4,r.isMonthSelected(n))),Se(1),_c(" ",e," ")}}function Mne(i,t){if(1&i&&(Qe(0,"div",49),Xe(1,Tne,2,4,"span",50),nt()),2&i){const e=Ce(3);Se(1),de("ngForOf",e.monthPickerValues())}}function Dne(i,t){if(1&i){const e=yi();Qe(0,"span",54),mn("click",function(r){const o=Ot(e).$implicit;return Nt(Ce(4).onYearSelect(r,o))})("keydown",function(r){const o=Ot(e).$implicit;return Nt(Ce(4).onYearCellKeydown(r,o))}),ci(1),nt()}if(2&i){const e=t.$implicit,n=Ce(4);de("ngClass",bi(2,s4,n.isYearSelected(e))),Se(1),_c(" ",e," ")}}function Lne(i,t){if(1&i&&(Qe(0,"div",52),Xe(1,Dne,2,4,"span",53),nt()),2&i){const e=Ce(3);Se(1),de("ngForOf",e.yearPickerValues())}}function Rne(i,t){if(1&i&&(Ur(0),Qe(1,"div",16),Xe(2,Ene,10,7,"div",17),nt(),Xe(3,Mne,2,1,"div",18),Xe(4,Lne,2,1,"div",19),Hr()),2&i){const e=Ce(2);Se(2),de("ngForOf",e.months),Se(1),de("ngIf","month"===e.currentView),Se(1),de("ngIf","year"===e.currentView)}}function Pne(i,t){1&i&&(Ur(0),ci(1,"0"),Hr())}function kne(i,t){1&i&&(Ur(0),ci(1,"0"),Hr())}function One(i,t){if(1&i&&(Qe(0,"div",60)(1,"span"),ci(2),nt()()),2&i){const e=Ce(3);Se(2),is(e.timeSeparator)}}function Fne(i,t){1&i&&(Ur(0),ci(1,"0"),Hr())}function Nne(i,t){if(1&i){const e=yi();Qe(0,"div",65)(1,"button",57),mn("keydown",function(r){return Ot(e),Nt(Ce(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(3).incrementSecond(r))})("keydown.space",function(r){return Ot(e),Nt(Ce(3).incrementSecond(r))})("mousedown",function(r){return Ot(e),Nt(Ce(3).onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){return Ot(e),Nt(Ce(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Ot(e),Nt(Ce(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Ot(e),Nt(Ce(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Ot(e),Nt(Ce(3).onTimePickerElementMouseLeave())}),Vn(2,"span",58),nt(),Qe(3,"span"),Xe(4,Fne,2,0,"ng-container",13),ci(5),nt(),Qe(6,"button",57),mn("keydown",function(r){return Ot(e),Nt(Ce(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(3).decrementSecond(r))})("keydown.space",function(r){return Ot(e),Nt(Ce(3).decrementSecond(r))})("mousedown",function(r){return Ot(e),Nt(Ce(3).onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){return Ot(e),Nt(Ce(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Ot(e),Nt(Ce(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Ot(e),Nt(Ce(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Ot(e),Nt(Ce(3).onTimePickerElementMouseLeave())}),Vn(7,"span",59),nt()()}if(2&i){const e=Ce(3);Se(4),de("ngIf",e.currentSecond<10),Se(1),is(e.currentSecond)}}function Bne(i,t){if(1&i){const e=yi();Qe(0,"div",66)(1,"button",67),mn("keydown",function(r){return Ot(e),Nt(Ce(3).onContainerButtonKeydown(r))})("click",function(r){return Ot(e),Nt(Ce(3).toggleAMPM(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(3).toggleAMPM(r))}),Vn(2,"span",58),nt(),Qe(3,"span"),ci(4),nt(),Qe(5,"button",67),mn("keydown",function(r){return Ot(e),Nt(Ce(3).onContainerButtonKeydown(r))})("click",function(r){return Ot(e),Nt(Ce(3).toggleAMPM(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(3).toggleAMPM(r))}),Vn(6,"span",59),nt()()}if(2&i){const e=Ce(3);Se(4),is(e.pm?"PM":"AM")}}function zne(i,t){if(1&i){const e=yi();Qe(0,"div",55)(1,"div",56)(2,"button",57),mn("keydown",function(r){return Ot(e),Nt(Ce(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(2).incrementHour(r))})("keydown.space",function(r){return Ot(e),Nt(Ce(2).incrementHour(r))})("mousedown",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Ot(e),Nt(Ce(2).onTimePickerElementMouseLeave())}),Vn(3,"span",58),nt(),Qe(4,"span"),Xe(5,Pne,2,0,"ng-container",13),ci(6),nt(),Qe(7,"button",57),mn("keydown",function(r){return Ot(e),Nt(Ce(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(2).decrementHour(r))})("keydown.space",function(r){return Ot(e),Nt(Ce(2).decrementHour(r))})("mousedown",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Ot(e),Nt(Ce(2).onTimePickerElementMouseLeave())}),Vn(8,"span",59),nt()(),Qe(9,"div",60)(10,"span"),ci(11),nt()(),Qe(12,"div",61)(13,"button",57),mn("keydown",function(r){return Ot(e),Nt(Ce(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(2).incrementMinute(r))})("keydown.space",function(r){return Ot(e),Nt(Ce(2).incrementMinute(r))})("mousedown",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Ot(e),Nt(Ce(2).onTimePickerElementMouseLeave())}),Vn(14,"span",58),nt(),Qe(15,"span"),Xe(16,kne,2,0,"ng-container",13),ci(17),nt(),Qe(18,"button",57),mn("keydown",function(r){return Ot(e),Nt(Ce(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(2).decrementMinute(r))})("keydown.space",function(r){return Ot(e),Nt(Ce(2).decrementMinute(r))})("mousedown",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return Ot(e),Nt(Ce(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return Ot(e),Nt(Ce(2).onTimePickerElementMouseLeave())}),Vn(19,"span",59),nt()(),Xe(20,One,3,1,"div",62),Xe(21,Nne,8,2,"div",63),Xe(22,Bne,7,1,"div",64),nt()}if(2&i){const e=Ce(2);Se(5),de("ngIf",e.currentHour<10),Se(1),is(e.currentHour),Se(5),is(e.timeSeparator),Se(5),de("ngIf",e.currentMinute<10),Se(1),is(e.currentMinute),Se(3),de("ngIf",e.showSeconds),Se(1),de("ngIf",e.showSeconds),Se(1),de("ngIf","12"==e.hourFormat)}}const o4=function(i){return[i]};function Vne(i,t){if(1&i){const e=yi();Qe(0,"div",68)(1,"button",69),mn("keydown",function(r){return Ot(e),Nt(Ce(2).onContainerButtonKeydown(r))})("click",function(r){return Ot(e),Nt(Ce(2).onTodayButtonClick(r))}),nt(),Qe(2,"button",69),mn("keydown",function(r){return Ot(e),Nt(Ce(2).onContainerButtonKeydown(r))})("click",function(r){return Ot(e),Nt(Ce(2).onClearButtonClick(r))}),nt()()}if(2&i){const e=Ce(2);Se(1),de("label",e.getTranslation("today"))("ngClass",bi(4,o4,e.todayButtonStyleClass)),Se(1),de("label",e.getTranslation("clear"))("ngClass",bi(6,o4,e.clearButtonStyleClass))}}function Une(i,t){1&i&&Ni(0)}const Hne=function(i,t,e,n,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":n,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},a4=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Gne=function(i){return{value:"visibleTouchUI",params:i}},Wne=function(i){return{value:"visible",params:i}};function jne(i,t){if(1&i){const e=yi();Qe(0,"div",10,11),mn("@overlayAnimation.start",function(r){return Ot(e),Nt(Ce().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return Ot(e),Nt(Ce().onOverlayAnimationDone(r))})("click",function(r){return Ot(e),Nt(Ce().onOverlayClick(r))}),su(2),Xe(3,cne,1,0,"ng-container",12),Xe(4,Rne,5,3,"ng-container",13),Xe(5,zne,23,8,"div",14),Xe(6,Vne,3,8,"div",15),su(7,1),Xe(8,Une,1,0,"ng-container",12),nt()}if(2&i){const e=Ce();Fr(e.panelStyleClass),de("ngStyle",e.panelStyle)("ngClass",jb(11,Hne,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?bi(21,Gne,as(18,a4,e.showTransitionOptions,e.hideTransitionOptions)):bi(26,Wne,as(23,a4,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),Se(3),de("ngTemplateOutlet",e.headerTemplate),Se(1),de("ngIf",!e.timeOnly),Se(1),de("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),Se(1),de("ngIf",e.showButtonBar),Se(2),de("ngTemplateOutlet",e.footerTemplate)}}const $ne=[[["p-header"]],[["p-footer"]]],qne=function(i,t,e,n){return{"p-calendar":!0,"p-calendar-w-btn":i,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":n}},Xne=["p-header","p-footer"],Yne={provide:wc,useExisting:hs(()=>Kne),multi:!0};let Kne=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.config=o,this.overlayService=l,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new Bn,this.onBlur=new Bn,this.onClose=new Bn,this.onSelect=new Bn,this.onClear=new Bn,this.onInput=new Bn,this.onTodayClick=new Bn,this.onClearClick=new Bn,this.onMonthChange=new Bn,this.onYearChange=new Bn,this.onClickOutside=new Bn,this.onShow=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(u,p){return"12"==this.hourFormat?12===u?p?12:0:p?u+12:u:u}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const n=e||new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.initTime(n),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const n=e.split(":"),r=parseInt(n[0]),s=parseInt(n[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=sC();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=Bt.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,n){this.yearOptions=[];for(let r=e;r<=n;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),n=this.getTranslation(qc.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(n[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let n=0;n<=11;n++)e.push(this.config.getTranslation("monthNamesShort")[n]);return e}yearPickerValues(){let e=[],n=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(n+r);return e}createMonths(e,n){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,o=n;s>11&&(s=s%11-1,o=n+1),this.months.push(this.createMonth(s,o))}}getWeekNumber(e){let n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));let r=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((r-n.getTime())/864e5)/7)+1}createMonth(e,n){let r=[],s=this.getFirstDayOfMonthIndex(e,n),o=this.getDaysCountInMonth(e,n),l=this.getDaysCountInPrevMonth(e,n),u=1,p=new Date,v=[],w=Math.ceil((o+s)/7);for(let I=0;I<w;I++){let T=[];if(0==I){for(let W=l-s+1;W<=l;W++){let K=this.getPreviousMonthAndYear(e,n);T.push({day:W,month:K.month,year:K.year,otherMonth:!0,today:this.isToday(p,W,K.month,K.year),selectable:this.isSelectable(W,K.month,K.year,!0)})}let k=7-T.length;for(let W=0;W<k;W++)T.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)}),u++}else for(let k=0;k<7;k++){if(u>o){let W=this.getNextMonthAndYear(e,n);T.push({day:u-o,month:W.month,year:W.year,otherMonth:!0,today:this.isToday(p,u-o,W.month,W.year),selectable:this.isSelectable(u-o,W.month,W.year,!0)})}else T.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)});u++}this.showWeek&&v.push(this.getWeekNumber(new Date(T[0].year,T[0].month,T[0].day))),r.push(T)}return{month:e,year:n,dates:r,weekNumbers:v}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,n){!this.disabled&&n.selectable?(this.isMultipleSelection()&&this.isSelected(n)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,n)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(n)&&this.selectDate(n),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,n){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:n,day:1,selectable:!0}):(this.currentMonth=n,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,n){"year"===this.view?this.onDateSelect(e,{year:n,month:0,day:1,selectable:!0}):(this.currentYear=n,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let n=0;n<this.value.length;n++)e+=this.formatDateTime(this.value[n]),n!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let n=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?n=this.formatTime(e):(n=this.formatDate(e,this.getDateFormat()),this.showTime&&(n+=" "+this.formatTime(e)))),n}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let n=new Date(e.year,e.month,e.day);if(this.showTime&&(n.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.currentSecond)),this.minDate&&this.minDate>n&&(n=this.minDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.maxDate&&this.maxDate<n&&(n=this.maxDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.isSingleSelection())this.updateModel(n);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,n]:[n]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&n.getTime()>=r.getTime()?s=n:(r=n,s=null),this.updateModel([r,s])}else this.updateModel([n,null]);this.onSelect.emit(n)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let n=null;this.value&&(n=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(n)}}getFirstDayOfMonthIndex(e,n){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(n);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,n){return 32-this.daylightSavingAdjust(new Date(n,e,32)).getDate()}getDaysCountInPrevMonth(e,n){let r=this.getPreviousMonthAndYear(e,n);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,n){let r,s;return 0===e?(r=11,s=n-1):(r=e-1,s=n),{month:r,year:s}}getNextMonthAndYear(e,n){let r,s;return 11===e?(r=0,s=n+1):(r=e+1,s=n),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let n=!1;for(let r of this.value)if(n=this.isDateEquals(r,e),n)break;return n}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getMonth()===e&&n.getFullYear()===this.currentYear}return!1}isYearSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getFullYear()===e}return!1}isDateEquals(e,n){return!!(e&&e instanceof Date)&&e.getDate()===n.day&&e.getMonth()===n.month&&e.getFullYear()===n.year}isDateBetween(e,n,r){if(e&&n){let o=new Date(r.year,r.month,r.day);return e.getTime()<=o.getTime()&&n.getTime()>=o.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,n,r,s){return e.getDate()===n&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,n,r,s){let o=!0,l=!0,u=!0,p=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>n||this.minDate.getMonth()===n&&this.minDate.getDate()>e))&&(o=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<n||this.maxDate.getMonth()===n&&this.maxDate.getDate()<e))&&(l=!1),this.disabledDates&&(u=!this.isDateDisabled(e,n,r)),this.disabledDays&&(p=!this.isDayDisabled(e,n,r)),o&&l&&u&&p)}isDateDisabled(e,n,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===n&&s.getDate()===e)return!0;return!1}isDayDisabled(e,n,r){if(this.disabledDays){let o=new Date(r,n,e).getDay();return-1!==this.disabledDays.indexOf(o)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,n){this.overlayVisible?this.hideOverlay():(n.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(Bt.getFocusableElements(this.contentViewChild.nativeElement).forEach(n=>n.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,n,r){const s=e.currentTarget,o=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let l=Bt.index(o),u=o.parentElement.nextElementSibling;u?Bt.hasClass(u.children[l].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(u.children[l].children[0].tabIndex="0",u.children[l].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let l=Bt.index(o),u=o.parentElement.previousElementSibling;if(u){let p=u.children[l].children[0];Bt.hasClass(p,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(p.tabIndex="0",p.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let l=o.previousElementSibling;if(l){let u=l.children[0];Bt.hasClass(u,"p-disabled")||Bt.hasClass(u.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let l=o.nextElementSibling;if(l){let u=l.children[0];Bt.hasClass(u,"p-disabled")?this.navigateToMonth(!1,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Bt.index(r);let l=s[40===e.which?o+3:o-3];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,n),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Bt.index(r);let l=s[40===e.which?o+2:o-2];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,n){if(e)if(1===this.numberOfMonths||0===n)this.navigationState={backward:!0},this.navBackward(event);else{let s=Bt.find(this.contentViewChild.nativeElement.children[n-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),o=s[s.length-1];o.tabIndex="0",o.focus()}else if(1===this.numberOfMonths||n===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=Bt.findSingle(this.contentViewChild.nativeElement.children[n+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?Bt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():Bt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let n;n=Bt.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),n&&n.length>0&&(e=n[n.length-1])}else e=Bt.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.currentView){let n=Bt.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=Bt.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Bt.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if("year"===this.currentView){let n=Bt.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=Bt.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Bt.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if(e=Bt.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){let n=Bt.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");e=n||Bt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{e.focus()},1),this.preventFocus=!1)}trapFocus(e){let n=Bt.getFocusableElements(this.contentViewChild.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)n[n.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else n[r-1].focus();else if(-1==r||r===n.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();n[0].focus()}else n[r+1].focus()}else n[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,n,r,s){let o=this.value;const l=this.convertTo24Hour(e,s);this.isRangeSelection()&&(o=this.value[1]||this.value[0]),this.isMultipleSelection()&&(o=this.value[this.value.length-1]);const u=o?o.toDateString():null;return!(this.minDate&&u&&this.minDate.toDateString()===u&&(this.minDate.getHours()>l||this.minDate.getHours()===l&&(this.minDate.getMinutes()>n||this.minDate.getMinutes()===n&&this.minDate.getSeconds()>r))||this.maxDate&&u&&this.maxDate.toDateString()===u&&(this.maxDate.getHours()<l||this.maxDate.getHours()===l&&(this.maxDate.getMinutes()<n||this.maxDate.getMinutes()===n&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,n,r){this.disabled||(this.repeat(e,null,n,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,n,r,s){let o=n||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},o),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let n=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?n=n<0?24+n:n:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),n=n<=0?12+n:n),this.validateTime(n,this.currentMinute,this.currentSecond,r)&&(this.currentHour=n,this.pm=r),e.preventDefault()}incrementMinute(e){let n=this.currentMinute+this.stepMinute;n=n>59?n-60:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}decrementMinute(e){let n=this.currentMinute-this.stepMinute;n=n<0?60+n:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}incrementSecond(e){let n=this.currentSecond+this.stepSecond;n=n>59?n-60:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}decrementSecond(e){let n=this.currentSecond-this.stepSecond;n=n<0?60+n:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const n=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,n)&&(this.pm=n,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let n=e.target.value;try{let r=this.parseValueFromString(n);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?n:null)}this.filled=null!=n&&n.length,this.onInput.emit(e)}isValidSelection(e){let n=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(n=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(n=e.length>1&&e[1]>e[0]),n}parseValueFromString(e){if(!e||0===e.trim().length)return null;let n;if(this.isSingleSelection())n=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);n=[];for(let s of r)n.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");n=[];for(let s=0;s<r.length;s++)n[s]=this.parseDateTime(r[s].trim())}return n}parseDateTime(e){let n,r=e.split(" ");if(this.timeOnly)n=new Date,this.populateTime(n,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let o="12"==this.hourFormat?r.pop():null,l=r.pop();n=this.parseDate(r.join(" "),s),this.populateTime(n,l,o)}else n=this.parseDate(e,s)}return n}populateTime(e,n,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(n);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&Ji.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let n=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?Ll.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Ll.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Ll.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Bt.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=Bt.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=Bt.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=Bt.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",Bt.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):Bt.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),Bt.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),Bt.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(Bt.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let n,e=document.body.children;for(let r=0;r<e.length;r++)if(Bt.hasClass(e[r],"p-datepicker-mask-scrollblocker")){n=!0;break}n||Bt.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(qc.FIRST_DAY_OF_WEEK)}formatDate(e,n){if(!e)return"";let r;const s=v=>{const w=r+1<n.length&&n.charAt(r+1)===v;return w&&r++,w},o=(v,w,I)=>{let T=""+w;if(s(v))for(;T.length<I;)T="0"+T;return T},l=(v,w,I,T)=>s(v)?T[w]:I[w];let u="",p=!1;if(e)for(r=0;r<n.length;r++)if(p)"'"!==n.charAt(r)||s("'")?u+=n.charAt(r):p=!1;else switch(n.charAt(r)){case"d":u+=o("d",e.getDate(),2);break;case"D":u+=l("D",e.getDay(),this.getTranslation(qc.DAY_NAMES_SHORT),this.getTranslation(qc.DAY_NAMES));break;case"o":u+=o("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=o("m",e.getMonth()+1,2);break;case"M":u+=l("M",e.getMonth(),this.getTranslation(qc.MONTH_NAMES_SHORT),this.getTranslation(qc.MONTH_NAMES));break;case"y":u+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?u+="'":p=!0;break;default:u+=n.charAt(r)}return u}formatTime(e){if(!e)return"";let n="",r=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),n+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,n+=":",n+=s<10?"0"+s:s,this.showSeconds&&(n+=":",n+=o<10?"0"+o:o),"12"==this.hourFormat&&(n+=e.getHours()>11?" PM":" AM"),n}parseTime(e){let n=e.split(":");if(n.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(n[0]),o=parseInt(n[1]),l=this.showSeconds?parseInt(n[2]):null;if(isNaN(s)||isNaN(o)||s>23||o>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(l)||l>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:o,second:l}}parseDate(e,n){if(null==n||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,o,k,l=0,u="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),p=-1,v=-1,w=-1,I=-1,T=!1,W=Ae=>{let Le=r+1<n.length&&n.charAt(r+1)===Ae;return Le&&r++,Le},K=Ae=>{let Le=W(Ae),tt="@"===Ae?14:"!"===Ae?20:"y"===Ae&&Le?4:"o"===Ae?3:2,Ut=new RegExp("^\\d{"+("y"===Ae?tt:1)+","+tt+"}"),at=e.substring(l).match(Ut);if(!at)throw"Missing number at position "+l;return l+=at[0].length,parseInt(at[0],10)},he=(Ae,Le,tt)=>{let _t=-1,Ut=W(Ae)?tt:Le,at=[];for(let Lt=0;Lt<Ut.length;Lt++)at.push([Lt,Ut[Lt]]);at.sort((Lt,cn)=>-(Lt[1].length-cn[1].length));for(let Lt=0;Lt<at.length;Lt++){let cn=at[Lt][1];if(e.substr(l,cn.length).toLowerCase()===cn.toLowerCase()){_t=at[Lt][0],l+=cn.length;break}}if(-1!==_t)return _t+1;throw"Unknown name at position "+l},Te=()=>{if(e.charAt(l)!==n.charAt(r))throw"Unexpected literal at position "+l;l++};for("month"===this.view&&(w=1),r=0;r<n.length;r++)if(T)"'"!==n.charAt(r)||W("'")?Te():T=!1;else switch(n.charAt(r)){case"d":w=K("d");break;case"D":he("D",this.getTranslation(qc.DAY_NAMES_SHORT),this.getTranslation(qc.DAY_NAMES));break;case"o":I=K("o");break;case"m":v=K("m");break;case"M":v=he("M",this.getTranslation(qc.MONTH_NAMES_SHORT),this.getTranslation(qc.MONTH_NAMES));break;case"y":p=K("y");break;case"@":k=new Date(K("@")),p=k.getFullYear(),v=k.getMonth()+1,w=k.getDate();break;case"!":k=new Date((K("!")-this.ticksTo1970)/1e4),p=k.getFullYear(),v=k.getMonth()+1,w=k.getDate();break;case"'":W("'")?Te():T=!0;break;default:Te()}if(l<e.length&&(o=e.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)),I>-1)for(v=1,w=I;s=this.getDaysCountInMonth(p,v-1),!(w<=s);)v++,w-=s;if("year"===this.view&&(v=-1===v?1:v,w=-1===w?1:w),k=this.daylightSavingAdjust(new Date(p,v-1,w)),k.getFullYear()!==p||k.getMonth()+1!==v||k.getDate()!==w)throw"Invalid date";return k}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let n=new Date,r={day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),otherMonth:n.getMonth()!==this.currentMonth||n.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let n=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<n.length;r++){let{breakpoint:s,numMonths:o}=n[r],l=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${o}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let u=o;u<this.numberOfMonths;u++)l+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${u+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${l}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",n=>{this.isOutsideClicked(n)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(n),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return Bt.hasClass(e.target,"p-datepicker-prev")||Bt.hasClass(e.target,"p-datepicker-prev-icon")||Bt.hasClass(e.target,"p-datepicker-next")||Bt.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!Bt.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Ll.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(d),Xt(xo),Xt(Vo),Xt(Dp),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-calendar"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(ine,5),Tr(rne,5),Tr(sne,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.inputfieldViewChild=r.first),Wi(r=ji())&&(n.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Mp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus)("p-calendar-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[Ao([Yne])],ngContentSelectors:Xne,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,n){1&e&&(Bf($ne),Qe(0,"span",0,1),Xe(2,lne,4,17,"ng-template",2),Xe(3,jne,9,28,"div",3),nt()),2&e&&(Fr(n.styleClass),de("ngClass",sf(6,qne,n.showIcon,n.timeOnly,n.disabled,n.focus))("ngStyle",n.style),Se(2),de("ngIf",!n.inline),Se(1),de("ngIf",n.inline||n.overlayVisible))},dependencies:[io,$c,ho,el,Ro,x0,Du],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[ly("overlayAnimation",[A0("visibleTouchUI",tl({transform:"translate(-50%,-50%)",opacity:1})),Mu("void => visible",[tl({opacity:0,transform:"scaleY(0.8)"}),Ac("{{showTransitionParams}}",tl({opacity:1,transform:"*"}))]),Mu("visible => void",[Ac("{{hideTransitionParams}}",tl({opacity:0}))]),Mu("void => visibleTouchUI",[tl({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),Ac("{{showTransitionParams}}")]),Mu("visibleTouchUI => void",[Ac("{{hideTransitionParams}}",tl({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),i})(),l4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,av,xa,Xc,av,xa]}),i})();const Zne=["container"],Qne=["resizeHelper"],Jne=["reorderIndicatorUp"],eie=["reorderIndicatorDown"],tie=["wrapper"],nie=["table"],iie=["tableHeader"],rie=["scroller"];function sie(i,t){if(1&i&&(Qe(0,"div",15),Vn(1,"i"),nt()),2&i){const e=Ce();Se(1),Fr("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function oie(i,t){1&i&&Ni(0)}function aie(i,t){if(1&i&&(Qe(0,"div",16),Xe(1,oie,1,0,"ng-container",17),nt()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.captionTemplate)}}function lie(i,t){if(1&i){const e=yi();Qe(0,"p-paginator",18),mn("onPageChange",function(r){return Ot(e),Nt(Ce().onPageChange(r))}),nt()}if(2&i){const e=Ce();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function cie(i,t){1&i&&Ni(0)}const c4=function(i,t){return{$implicit:i,options:t}};function uie(i,t){if(1&i&&Xe(0,cie,1,0,"ng-container",22),2&i){const e=t.$implicit,n=t.options;Ce(2),de("ngTemplateOutlet",ao(10))("ngTemplateOutletContext",as(2,c4,e,n))}}const hie=function(i){return{height:i}};function die(i,t){if(1&i){const e=yi();Qe(0,"p-scroller",19,20),mn("onLazyLoad",function(r){return Ot(e),Nt(Ce().onLazyItemLoad(r))}),Xe(2,uie,1,5,"ng-template",21),nt()}if(2&i){const e=Ce();no(bi(12,hie,"flex"!==e.scrollHeight?e.scrollHeight:void 0)),de("items",e.processedData)("columns",e.columns)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("delay",e.lazy?e.virtualScrollDelay:0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)}}function fie(i,t){1&i&&Ni(0)}const pie=function(i){return{columns:i}};function gie(i,t){if(1&i&&(Ur(0),Xe(1,fie,1,0,"ng-container",22),Hr()),2&i){const e=Ce(),n=ao(10);Se(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",as(4,c4,e.processedData,bi(2,pie,e.columns)))}}function mie(i,t){1&i&&Ni(0)}function vie(i,t){1&i&&Ni(0)}function yie(i,t){if(1&i&&Vn(0,"tbody",29),2&i){const e=Ce().options,n=Ce();de("value",n.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",n.frozenBodyTemplate)("frozen",!0)}}function _ie(i,t){1&i&&Ni(0)}const MA=function(i){return{$implicit:i}};function bie(i,t){if(1&i&&(Qe(0,"tfoot",30),Xe(1,_ie,1,0,"ng-container",22),nt()),2&i){const e=Ce().options,n=Ce();Se(1),de("ngTemplateOutlet",n.footerGroupedTemplate||n.footerTemplate)("ngTemplateOutletContext",bi(2,MA,e.columns))}}function Cie(i,t){if(1&i&&(Qe(0,"table",23,24),Xe(2,mie,1,0,"ng-container",22),Qe(3,"thead",25),Xe(4,vie,1,0,"ng-container",22),nt(),Xe(5,yie,1,5,"tbody",26),Vn(6,"tbody",27),Xe(7,bie,2,4,"tfoot",28),nt()),2&i){const e=t.options,n=Ce();no(e.spacerStyle),de("ngClass",n.tableStyleClass)("ngStyle",n.tableStyle),vr("id",n.id+"-table"),Se(2),de("ngTemplateOutlet",n.colGroupTemplate)("ngTemplateOutletContext",bi(18,MA,e.columns)),Se(2),de("ngTemplateOutlet",n.headerGroupedTemplate||n.headerTemplate)("ngTemplateOutletContext",bi(20,MA,e.columns)),Se(1),de("ngIf",n.frozenValue||n.frozenBodyTemplate),Se(1),no(e.contentStyle),de("ngClass",e.contentStyleClass)("value",n.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",n.bodyTemplate)("scrollerOptions",e),Se(1),de("ngIf",n.footerGroupedTemplate||n.footerTemplate)}}function wie(i,t){if(1&i){const e=yi();Qe(0,"p-paginator",31),mn("onPageChange",function(r){return Ot(e),Nt(Ce().onPageChange(r))}),nt()}if(2&i){const e=Ce();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function Aie(i,t){1&i&&Ni(0)}function xie(i,t){if(1&i&&(Qe(0,"div",32),Xe(1,Aie,1,0,"ng-container",17),nt()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.summaryTemplate)}}function Iie(i,t){1&i&&Vn(0,"div",33,34)}function Sie(i,t){1&i&&Vn(0,"span",35,36)}function Eie(i,t){1&i&&Vn(0,"span",37,38)}const Tie=function(i,t,e,n,r,s,o,l,u,p,v,w,I,T){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":i,"p-datatable-auto-layout":t,"p-datatable-resizable":e,"p-datatable-resizable-fit":n,"p-datatable-scrollable":r,"p-datatable-scrollable-vertical":s,"p-datatable-scrollable-horizontal":o,"p-datatable-scrollable-both":l,"p-datatable-flex-scrollable":u,"p-datatable-responsive-stack":p,"p-datatable-responsive-scroll":v,"p-datatable-responsive":w,"p-datatable-grouped-header":I,"p-datatable-grouped-footer":T}},Mie=function(i){return{maxHeight:i}},Die=["pTableBody",""];function Lie(i,t){1&i&&Ni(0)}const Y1=function(i,t,e,n,r){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r}};function Rie(i,t){if(1&i&&(Ur(0,3),Xe(1,Lie,1,0,"ng-container",4),Hr()),2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce(2);Se(1),de("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",h0(2,Y1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Pie(i,t){1&i&&Ni(0)}function kie(i,t){if(1&i&&(Ur(0),Xe(1,Pie,1,0,"ng-container",4),Hr()),2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce(2);Se(1),de("ngTemplateOutlet",s.template)("ngTemplateOutletContext",h0(2,Y1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Oie(i,t){1&i&&Ni(0)}const Fie=function(i,t,e,n,r,s,o){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r,rowgroup:s,rowspan:o}};function Nie(i,t){if(1&i&&(Ur(0),Xe(1,Oie,1,0,"ng-container",4),Hr()),2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce(2);Se(1),de("ngTemplateOutlet",s.template)("ngTemplateOutletContext",function lF(i,t,e,n,r,s,o,l,u,p){const v=Bo()+i,w=Ci();let I=hg(w,v,e,n,r,s);return bI(w,v+4,o,l,u)||I?Ym(w,v+7,p?t.call(p,e,n,r,s,o,l,u):t(e,n,r,s,o,l,u)):Dw(w,v+7)}(2,Fie,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen,s.shouldRenderRowspan(s.value,n,s.getRowIndex(r)),s.calculateRowGroupSize(s.value,n,s.getRowIndex(r))))}}function Bie(i,t){1&i&&Ni(0)}function zie(i,t){if(1&i&&(Ur(0,3),Xe(1,Bie,1,0,"ng-container",4),Hr()),2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce(2);Se(1),de("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",h0(2,Y1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Vie(i,t){if(1&i&&(Xe(0,Rie,2,8,"ng-container",2),Xe(1,kie,2,8,"ng-container",0),Xe(2,Nie,2,10,"ng-container",0),Xe(3,zie,2,8,"ng-container",2)),2&i){const e=t.$implicit,n=t.index,r=Ce(2);de("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),Se(1),de("ngIf","rowspan"!==r.dt.rowGroupMode),Se(1),de("ngIf","rowspan"===r.dt.rowGroupMode),Se(1),de("ngIf",r.dt.groupFooterTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,r.getRowIndex(n)))}}function Uie(i,t){if(1&i&&(Ur(0),Xe(1,Vie,4,4,"ng-template",1),Hr()),2&i){const e=Ce();Se(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Hie(i,t){1&i&&Ni(0)}function Gie(i,t){if(1&i&&Xe(0,Hie,1,0,"ng-container",4),2&i){const e=t.$implicit,n=t.index,r=Ce(2);de("ngTemplateOutlet",e?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",h0(2,Y1,e,r.getRowIndex(n),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen))}}function Wie(i,t){if(1&i&&(Ur(0),Xe(1,Gie,1,8,"ng-template",1),Hr()),2&i){const e=Ce();Se(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function jie(i,t){1&i&&Ni(0)}const K1=function(i,t,e,n,r,s){return{$implicit:i,rowIndex:t,columns:e,expanded:n,editing:r,frozen:s}};function $ie(i,t){if(1&i&&(Ur(0),Xe(1,jie,1,0,"ng-container",4),Hr()),2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce(2);Se(1),de("ngTemplateOutlet",s.template)("ngTemplateOutletContext",jb(2,K1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function qie(i,t){1&i&&Ni(0)}function Xie(i,t){if(1&i&&(Ur(0,3),Xe(1,qie,1,0,"ng-container",4),Hr()),2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce(2);Se(1),de("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",jb(2,K1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Yie(i,t){1&i&&Ni(0)}function Kie(i,t){1&i&&Ni(0)}function Zie(i,t){if(1&i&&(Ur(0,3),Xe(1,Kie,1,0,"ng-container",4),Hr()),2&i){const e=Ce(2),n=e.$implicit,r=e.index,s=Ce(2);Se(1),de("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",jb(2,K1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}const u4=function(i,t,e,n){return{$implicit:i,rowIndex:t,columns:e,frozen:n}};function Qie(i,t){if(1&i&&(Ur(0),Xe(1,Yie,1,0,"ng-container",4),Xe(2,Zie,2,9,"ng-container",2),Hr()),2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce(2);Se(1),de("ngTemplateOutlet",s.dt.expandedRowTemplate)("ngTemplateOutletContext",sf(3,u4,n,s.getRowIndex(r),s.columns,s.frozen)),Se(1),de("ngIf",s.dt.groupFooterTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,n,s.getRowIndex(r)))}}function Jie(i,t){if(1&i&&(Xe(0,$ie,2,9,"ng-container",0),Xe(1,Xie,2,9,"ng-container",2),Xe(2,Qie,3,8,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=Ce(2);de("ngIf",!r.dt.groupHeaderTemplate),Se(1),de("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),Se(1),de("ngIf",r.dt.isRowExpanded(e))}}function ere(i,t){if(1&i&&(Ur(0),Xe(1,Jie,3,3,"ng-template",1),Hr()),2&i){const e=Ce();Se(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function tre(i,t){1&i&&Ni(0)}function nre(i,t){1&i&&Ni(0)}function ire(i,t){if(1&i&&(Ur(0),Xe(1,nre,1,0,"ng-container",4),Hr()),2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce(2);Se(1),de("ngTemplateOutlet",s.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",sf(2,u4,n,s.getRowIndex(r),s.columns,s.frozen))}}function rre(i,t){if(1&i&&(Xe(0,tre,1,0,"ng-container",4),Xe(1,ire,2,7,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=Ce(2);de("ngTemplateOutlet",r.template)("ngTemplateOutletContext",jb(3,K1,e,r.getRowIndex(n),r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),Se(1),de("ngIf",r.dt.isRowExpanded(e))}}function sre(i,t){if(1&i&&(Ur(0),Xe(1,rre,2,10,"ng-template",1),Hr()),2&i){const e=Ce();Se(1),de("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function ore(i,t){1&i&&Ni(0)}const h4=function(i,t){return{$implicit:i,frozen:t}};function are(i,t){if(1&i&&(Ur(0),Xe(1,ore,1,0,"ng-container",4),Hr()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",as(2,h4,e.columns,e.frozen))}}function lre(i,t){1&i&&Ni(0)}function cre(i,t){if(1&i&&(Ur(0),Xe(1,lre,1,0,"ng-container",4),Hr()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",as(2,h4,e.columns,e.frozen))}}function ure(i,t){if(1&i&&(Qe(0,"span",2),ci(1),nt()),2&i){const e=Ce();Se(1),is(e.getBadgeValue())}}const hre=function(i,t,e){return{"pi-sort-amount-up-alt":i,"pi-sort-amount-down":t,"pi-sort-alt":e}},d4=function(i,t){return{"p-checkbox-focused":i,"p-checkbox-disabled":t}},pre=function(i,t,e){return{"p-checkbox-box p-component":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}},f4=function(i){return{"pi pi-check":i}},gre=function(i,t,e){return{"p-checkbox-box":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}};let DA=(()=>{class i{constructor(){this.sortSource=new Ge,this.selectionSource=new Ge,this.contextMenuSource=new Ge,this.valueSource=new Ge,this.totalRecordsSource=new Ge,this.columnsSource=new Ge,this.resetSource=new Ge,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),l_=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.zone=n,this.tableService=r,this.cd=s,this.filterService=o,this.overlayService=l,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new Bn,this.selectionChange=new Bn,this.contextMenuSelectionChange=new Bn,this.contextMenuSelectionMode="separate",this.rowTrackBy=(u,p)=>p,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new Bn,this.onRowUnselect=new Bn,this.onPage=new Bn,this.onSort=new Bn,this.onFilter=new Bn,this.onLazyLoad=new Bn,this.onRowExpand=new Bn,this.onRowCollapse=new Bn,this.onContextMenuSelect=new Bn,this.onColResize=new Bn,this.onColReorder=new Bn,this.onRowReorder=new Bn,this.onEditInit=new Bn,this.onEditComplete=new Bn,this.onEditCancel=new Bn,this.onHeaderCheckboxToggle=new Bn,this.sortFunction=new Bn,this.firstChange=new Bn,this.rowsChange=new Bn,this.onStateSave=new Bn,this.onStateRestore=new Bn,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=sC()}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get processedData(){return this.filteredValue||this.value||[]}dataToRender(e){const n=e||this.processedData;if(n&&this.paginator){const r=this.lazy?0:this.first;return n.slice(r,r+this.rows)}return n}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(Ji.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(Ji.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,n=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&n){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:n}):(this.value.sort((s,o)=>{let l=Ji.resolveFieldData(s,e),u=Ji.resolveFieldData(o,e),p=null;return p=null==l&&null!=u?-1:null!=l&&null==u?1:null==l&&null==u?0:"string"==typeof l&&"string"==typeof u?l.localeCompare(u):l<u?-1:l>u?1:0,n*p}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:n};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,n)=>this.multisortField(e,n,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,n,r,s){let o=Ji.resolveFieldData(e,r[s].field),l=Ji.resolveFieldData(n,r[s].field),u=null;if(null==o&&null!=l)u=-1;else if(null!=o&&null==l)u=1;else if(null==o&&null==l)u=0;else if("string"==typeof o||o instanceof String){if(o.localeCompare&&o!=l)return r[s].order*o.localeCompare(l)}else u=o<l?-1:1;return o==l?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*u}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}handleRowClick(e){let n=e.originalEvent.target,r=n.nodeName,s=n.parentElement&&n.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!Bt.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let o=e.rowData,l=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)Bt.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=l,this.selectRange(e.originalEvent,l);else{let u=this.isSelected(o);if(!u&&!this.isRowSelectable(o,l))return;let p=!this.rowTouched&&this.metaKeySelection,v=this.dataKey?String(Ji.resolveFieldData(o,this.dataKey)):null;if(this.anchorRowIndex=l,this.rangeRowIndex=l,p){let w=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(u&&w){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let I=this.findIndexInSelection(o);this._selection=this.selection.filter((T,k)=>k!=I),this.selectionChange.emit(this.selection),v&&delete this.selectionKeys[v]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row"})}else this.isSingleSelectionMode()?(this._selection=o,this.selectionChange.emit(o),v&&(this.selectionKeys={},this.selectionKeys[v]=1)):this.isMultipleSelectionMode()&&(w?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,o],this.selectionChange.emit(this.selection),v&&(this.selectionKeys[v]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})}else if("single"===this.selectionMode)u?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})):(this._selection=o,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys={},this.selectionKeys[v]=1));else if("multiple"===this.selectionMode)if(u){let w=this.findIndexInSelection(o);this._selection=this.selection.filter((I,T)=>T!=w),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&delete this.selectionKeys[v]}else this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys[v]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:n,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let s=this.isSelected(n),o=this.dataKey?String(Ji.resolveFieldData(n,this.dataKey)):null;if(!s){if(!this.isRowSelectable(n,r))return;this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n),o&&(this.selectionKeys={},this.selectionKeys[o]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),o&&(this.selectionKeys[o]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:n,index:e.rowIndex})}}}selectRange(e,n){let r,s;this.anchorRowIndex>n?(r=n,s=this.anchorRowIndex):this.anchorRowIndex<n?(r=this.anchorRowIndex,s=n):(r=n,s=n),this.lazy&&this.paginator&&(r-=this.first,s-=this.first);let o=[];for(let l=r;l<=s;l++){let u=this.filteredValue?this.filteredValue[l]:this.value[l];if(!this.isSelected(u)){if(!this.isRowSelectable(u,n))continue;o.push(u),this._selection=[...this.selection,u];let p=this.dataKey?String(Ji.resolveFieldData(u,this.dataKey)):null;p&&(this.selectionKeys[p]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:o,type:"row"})}clearSelectionRange(e){let n,r;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,r=this.anchorRowIndex):(n=this.rangeRowIndex,r=this.rangeRowIndex);for(let s=n;s<=r;s++){let o=this.value[s],l=this.findIndexInSelection(o);this._selection=this.selection.filter((p,v)=>v!=l);let u=this.dataKey?String(Ji.resolveFieldData(o,this.dataKey)):null;u&&delete this.selectionKeys[u],this.onRowUnselect.emit({originalEvent:e,data:o,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[Ji.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isRowSelectable(e,n){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:n}))}toggleRowWithRadio(e,n){if(this.preventSelectionSetterPropagation=!0,this.selection!=n){if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=n,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(Ji.resolveFieldData(n,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,n){this.selection=this.selection||[];let r=this.isSelected(n),s=this.dataKey?String(Ji.resolveFieldData(n,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let o=this.findIndexInSelection(n);this._selection=this.selection.filter((l,u)=>u!=o),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&delete this.selectionKeys[s]}else{if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&(this.selectionKeys[s]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,n){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:n});else{const r=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let s=this.selectionPageOnly&&this._selection?this._selection.filter(o=>!r.some(l=>this.equals(o,l))):[];n&&(s=this.frozenValue?[...s,...this.frozenValue,...r]:[...s,...r],s=this.rowSelectable?s.filter((o,l)=>this.rowSelectable({data:o,index:l})):s),this._selection=s,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n}),this.isStateful()&&this.saveState()}}equals(e,n){return"equals"===this.compareSelectionBy?e===n:Ji.equals(e,n,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let n=0;n<this.value.length;n++){let l,r=!0,s=!1,o=!1;for(let u in this.filters)if(this.filters.hasOwnProperty(u)&&"global"!==u){o=!0;let p=u,v=this.filters[p];if(Array.isArray(v)){for(let w of v)if(r=this.executeLocalFilter(p,this.value[n],w),w.operator===HB.OR&&r||w.operator===HB.AND&&!r)break}else r=this.executeLocalFilter(p,this.value[n],v);if(!r)break}if(this.filters.global&&!s&&e)for(let u=0;u<e.length&&(s=this.filterService.filters[this.filters.global.matchMode](Ji.resolveFieldData(this.value[n],e[u].field||e[u]),this.filters.global.value,this.filterLocale),!s);u++);l=this.filters.global?o?o&&r&&s:s:o&&r,l&&this.filteredValue.push(this.value[n])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,n,r){let s=r.value,o=r.matchMode||Qh.STARTS_WITH,l=Ji.resolveFieldData(n,e);return(0,this.filterService.filters[o])(l,s,this.filterLocale)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let n,r="",s=this.columns;e&&e.selectionOnly?n=this.selection||[]:(n=this.filteredValue||this.value,this.frozenValue&&(n=n?[...this.frozenValue,...n]:this.frozenValue));for(let u=0;u<s.length;u++){let p=s[u];!1!==p.exportable&&p.field&&(r+='"'+this.getExportHeader(p)+'"',u<s.length-1&&(r+=this.csvSeparator))}n.forEach((u,p)=>{r+="\n";for(let v=0;v<s.length;v++){let w=s[v];if(!1!==w.exportable&&w.field){let I=Ji.resolveFieldData(u,w.field);I=null!=I?this.exportFunction?this.exportFunction({data:I,field:w.field}):String(I).replace(/"/g,'""'):"",r+='"'+I+'"',v<s.length-1&&(r+=this.csvSeparator)}}});let o=new Blob([r],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.style.display="none",document.body.appendChild(l),void 0!==l.download?(l.setAttribute("href",URL.createObjectURL(o)),l.setAttribute("download",this.exportFilename+".csv"),l.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(l)}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,n,r,s){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.editingCellRowIndex=s,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Bt.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(Bt.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let n=String(Ji.resolveFieldData(e,this.dataKey));this.editingRowKeys[n]=!0}saveRowEdit(e,n){if(0===Bt.find(n,".ng-invalid.ng-dirty").length){let r=String(Ji.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let n=String(Ji.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[n]}toggleRow(e,n){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(Ji.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:n,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:n,data:e})),n&&n.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(Ji.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(Ji.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let n=Bt.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let n=Bt.getOffset(this.containerViewChild.nativeElement).left;Bt.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let l=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&l>15&&this.resizeTableCells(r,l)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+e+"px"),this.resizeTableCells(r,null));this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",Bt.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,n){let r=Bt.index(this.resizeColumnElement),s=[];const o=Bt.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");Bt.find(o,"tr > th").forEach(p=>s.push(Bt.getOuterWidth(p))),this.destroyStyleElement(),this.createStyleElement();let u="";s.forEach((p,v)=>{let w=v===r?e:n&&v===r+1?n:p;u+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${v+1}),\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${v+1}),\n                #${this.id} .p-datatable-tfoot > tr > td:nth-child(${v+1}) {\n                    ${this.scrollable?`flex: 1 1 ${w}px !important`:`width: ${w}px !important`}\n                }\n            `}),this.styleElement.innerHTML=u}onColumnDragStart(e,n){this.reorderIconWidth=Bt.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Bt.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=Bt.getOffset(this.containerViewChild.nativeElement),s=Bt.getOffset(n);if(this.draggedColumn!=n){let o=Bt.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),l=Bt.indexWithinGroup(n,"preorderablecolumn"),u=s.left-r.left,v=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>v?(this.reorderIndicatorUpViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),l-o==1&&-1===this.dropPosition||l-o==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=Bt.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=Bt.indexWithinGroup(n,"preorderablecolumn"),o=r!=s;o&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(o=!1),o&&s<r&&1===this.dropPosition&&(s+=1),o&&s>r&&-1===this.dropPosition&&(s-=1),o&&(Ji.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,n){this.rowDragging=!0,this.draggedRowIndex=n,e.dataTransfer.setData("text","b")}onRowDragOver(e,n,r){if(this.rowDragging&&this.draggedRowIndex!==n){let s=Bt.getOffset(r).top+Bt.getWindowScrollTop(),o=e.pageY,l=s+Bt.getOuterHeight(r)/2,u=r.previousElementSibling;o<l?(Bt.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=n,u?Bt.addClass(u,"p-datatable-dragpoint-bottom"):Bt.addClass(r,"p-datatable-dragpoint-top")):(u?Bt.removeClass(u,"p-datatable-dragpoint-bottom"):Bt.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=n+1,Bt.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,n){let r=n.previousElementSibling;r&&Bt.removeClass(r,"p-datatable-dragpoint-bottom"),Bt.removeClass(n,"p-datatable-dragpoint-bottom"),Bt.removeClass(n,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,n){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;Ji.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,n),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let n={};this.paginator&&(n.first=this.first,n.rows=this.rows),this.sortField&&(n.sortField=this.sortField,n.sortOrder=this.sortOrder),this.multiSortMeta&&(n.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&this.saveColumnOrder(n),this.selection&&(n.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(n.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(n)),this.onStateSave.emit(n)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const n=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(n){let o=JSON.parse(n,function(o,l){return"string"==typeof l&&r.test(l)?new Date(l):l});this.paginator&&(void 0!==this.first&&(this.first=o.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=o.rows,this.rowsChange.emit(this.rows))),o.sortField&&(this.restoringSort=!0,this._sortField=o.sortField,this._sortOrder=o.sortOrder),o.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=o.multiSortMeta),o.filters&&(this.restoringFilter=!0,this.filters=o.filters),this.resizableColumns&&(this.columnWidthsState=o.columnWidths,this.tableWidthState=o.tableWidth),o.expandedRowKeys&&(this.expandedRowKeys=o.expandedRowKeys),o.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(o.selection)),this.stateRestored=!0,this.onStateRestore.emit(o)}}saveColumnWidths(e){let n=[];Bt.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(s=>n.push(Bt.getOuterWidth(s))),e.columnWidths=n.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=Bt.getOuterWidth(this.tableViewChild.nativeElement)+"px")}setResizeTableWidth(e){if(this.virtualScroll){const n=Bt.findSingle(this.containerViewChild.nativeElement,".p-scroller > table > tbody");n.style.width=e,n.style.minWidth=e}this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),Ji.isNotEmpty(e)){this.createStyleElement();let n="";e.forEach((r,s)=>{n+=`\n                        #${this.id} .p-datatable-thead > tr > th:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tbody > tr > td:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tfoot > tr > td:nth-child(${s+1}) {\n                            ${this.scrollable?`flex: 1 1 ${r}px !important`:`width: ${r}px !important`}\n                        }\n                    `}),this.styleElement.innerHTML=n}}}saveColumnOrder(e){if(this.columns){let n=[];this.columns.map(r=>{n.push(r.field||r.key)}),e.columnOrder=n}}restoreColumnOrder(){const n=this.getStorage().getItem(this.stateKey);if(n){let s=JSON.parse(n).columnOrder;if(s){let o=[];s.map(l=>{let u=this.findColumnByKey(l);u&&o.push(u)}),this.columnOrderStateRestored=!0,this.columns=o}}}findColumnByKey(e){if(!this.columns)return null;for(let n of this.columns)if(n.key===e||n.field===e)return n}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(Vo),Xt(DA),Xt(xo),Xt(oA),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-table"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Zne,5),Tr(Qne,5),Tr(Jne,5),Tr(eie,5),Tr(tie,5),Tr(nie,5),Tr(iie,5),Tr(rie,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.resizeHelperViewChild=r.first),Wi(r=ji())&&(n.reorderIndicatorUpViewChild=r.first),Wi(r=ji())&&(n.reorderIndicatorDownViewChild=r.first),Wi(r=ji())&&(n.wrapperViewChild=r.first),Wi(r=ji())&&(n.tableViewChild=r.first),Wi(r=ji())&&(n.tableHeaderViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[Ao([DA]),da],decls:16,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(Qe(0,"div",0,1),Xe(2,sie,2,2,"div",2),Xe(3,aie,2,1,"div",3),Xe(4,lie,1,17,"p-paginator",4),Qe(5,"div",5,6),Xe(7,die,3,14,"p-scroller",7),Xe(8,gie,2,7,"ng-container",8),Xe(9,Cie,8,22,"ng-template",null,9,sc),nt(),Xe(11,wie,1,17,"p-paginator",10),Xe(12,xie,2,1,"div",11),Xe(13,Iie,2,0,"div",12),Xe(14,Sie,2,0,"span",13),Xe(15,Eie,2,0,"span",14),nt()),2&e&&(Fr(n.styleClass),de("ngStyle",n.style)("ngClass",dM(16,Tie,[n.rowHover||n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable,n.scrollable&&"vertical"===n.scrollDirection,n.scrollable&&"horizontal"===n.scrollDirection,n.scrollable&&"both"===n.scrollDirection,n.scrollable&&"flex"===n.scrollHeight,"stack"===n.responsiveLayout,"scroll"===n.responsiveLayout,n.responsive,null!=n.headerGroupedTemplate,null!=n.footerGroupedTemplate])),vr("id",n.id),Se(2),de("ngIf",n.loading&&n.showLoader),Se(1),de("ngIf",n.captionTemplate),Se(1),de("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),Se(1),de("ngStyle",bi(31,Mie,n.virtualScroll?"":n.scrollHeight)),Se(2),de("ngIf",n.virtualScroll),Se(1),de("ngIf",!n.virtualScroll),Se(3),de("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),Se(1),de("ngIf",n.summaryTemplate),Se(1),de("ngIf",n.resizableColumns),Se(1),de("ngIf",n.reorderableColumns),Se(1),de("ngIf",n.reorderableColumns))},dependencies:function(){return[io,ho,el,Ro,t4,za,EA,Bre]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;min-width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper>table,.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-thead,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot{display:block}.p-datatable-scrollable .p-datatable-thead>tr,.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-thead>tr>th,.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-thead,.p-datatable-scrollable>.p-datatable-wrapper>.p-scroller-viewport>.p-scroller>.p-datatable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th .p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td{display:table-cell}.p-datatable-scrollable .p-scroller>.p-datatable-table{display:inline-block}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-thead>tr>th,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),Bre=(()=>{class i{constructor(e,n,r,s){this.dt=e,this.tableService=n,this.cd=r,this.el=s,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition(),this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.updateScrollerPosition()}ngOnChanges(e){if(e.scrollerOptions){const{previousValue:n,currentValue:r}=e.scrollerOptions;this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.getScrollerOption("itemSize",n)!==this.getScrollerOption("itemSize",r)&&this.updateScrollerPosition()}}shouldRenderRowGroupHeader(e,n,r){let s=Ji.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==Ji.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,n,r){let s=Ji.resolveFieldData(n,this.dt.groupRowsBy),o=e[r+1];return!o||s!==Ji.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowspan(e,n,r){let s=Ji.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==Ji.resolveFieldData(o,this.dt.groupRowsBy)}calculateRowGroupSize(e,n,r){let s=Ji.resolveFieldData(n,this.dt.groupRowsBy),o=s,l=0;for(;s===o;){l++;let u=e[++r];if(!u)break;o=Ji.resolveFieldData(u,this.dt.groupRowsBy)}return 1===l?null:l}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=Bt.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=Bt.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}updateScrollerPosition(){const e=Bt.getOuterHeight(this.el.nativeElement.previousElementSibling);this.el.nativeElement.style.top=(this.el.nativeElement.style.top||0)+e+"px"}getScrollerOption(e,n){return this.dt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.dt.paginator?this.dt.first+e:e,r=this.getScrollerOption("getItemOptions");return r?r(n).index:n}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_),Xt(DA),Xt(xo),Xt(Zn))},i.\u0275cmp=_r({type:i,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},features:[da],attrs:Die,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Xe(0,Uie,2,2,"ng-container",0),Xe(1,Wie,2,2,"ng-container",0),Xe(2,ere,2,2,"ng-container",0),Xe(3,sre,2,2,"ng-container",0),Xe(4,are,2,5,"ng-container",0),Xe(5,cre,2,5,"ng-container",0)),2&e&&(de("ngIf",!n.dt.expandedRowTemplate&&!n.dt.virtualScroll),Se(1),de("ngIf",!n.dt.expandedRowTemplate&&n.dt.virtualScroll),Se(1),de("ngIf",n.dt.expandedRowTemplate&&!(n.frozen&&n.dt.frozenExpandedRowTemplate)),Se(1),de("ngIf",n.dt.frozenExpandedRowTemplate&&n.frozen),Se(1),de("ngIf",n.dt.loading),Se(1),de("ngIf",n.dt.isEmpty()&&!n.dt.loading))},dependencies:[$c,ho,el],encapsulation:2}),i})(),G2=(()=>{class i{constructor(e){this.dt=e,this.isEnabled()&&(this.subscription=this.dt.tableService.sortSource$.subscribe(n=>{this.updateSortState()}))}ngOnInit(){this.isEnabled()&&this.updateSortState()}updateSortState(){this.sorted=this.dt.isSorted(this.field),this.sortOrder=this.sorted?1===this.dt.sortOrder?"ascending":"descending":"none"}onClick(e){this.isEnabled()&&!this.isFilterElement(e.target)&&(this.updateSortState(),this.dt.sort({originalEvent:e,field:this.field}),Bt.clearSelection())}onEnterKey(e){this.onClick(e)}isEnabled(){return!0!==this.pSortableColumnDisabled}isFilterElement(e){return Bt.hasClass(e,"pi-filter-icon")||Bt.hasClass(e,"p-column-filter-menu-button")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_))},i.\u0275dir=Yr({type:i,selectors:[["","pSortableColumn",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(e,n){1&e&&mn("click",function(s){return n.onClick(s)})("keydown.enter",function(s){return n.onEnterKey(s)}),2&e&&(vr("tabindex",n.isEnabled()?"0":null)("role","columnheader")("aria-sort",n.sortOrder),Mp("p-sortable-column",n.isEnabled())("p-highlight",n.sorted))},inputs:{field:["pSortableColumn","field"],pSortableColumnDisabled:"pSortableColumnDisabled"}}),i})(),W2=(()=>{class i{constructor(e,n){this.dt=e,this.cd=n,this.subscription=this.dt.tableService.sortSource$.subscribe(r=>{this.updateSortState()})}ngOnInit(){this.updateSortState()}onClick(e){e.preventDefault()}updateSortState(){if("single"===this.dt.sortMode)this.sortOrder=this.dt.isSorted(this.field)?this.dt.sortOrder:0;else if("multiple"===this.dt.sortMode){let e=this.dt.getSortMeta(this.field);this.sortOrder=e?e.order:0}this.cd.markForCheck()}getMultiSortMetaIndex(){let e=this.dt._multiSortMeta,n=-1;if(e&&"multiple"===this.dt.sortMode&&(this.dt.showInitialSortBadge||e.length>1))for(let r=0;r<e.length;r++){let s=e[r];if(s.field===this.field||s.field===this.field){n=r;break}}return n}getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.dt.groupRowsBy&&e>-1?e:e+1}isMultiSorted(){return"multiple"===this.dt.sortMode&&this.getMultiSortMetaIndex()>-1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-sortIcon"]],hostAttrs:[1,"p-element"],inputs:{field:"field"},decls:2,vars:6,consts:[[1,"p-sortable-column-icon","pi","pi-fw",3,"ngClass"],["class","p-sortable-column-badge",4,"ngIf"],[1,"p-sortable-column-badge"]],template:function(e,n){1&e&&(Vn(0,"i",0),Xe(1,ure,2,1,"span",1)),2&e&&(de("ngClass",Su(2,hre,1===n.sortOrder,-1===n.sortOrder,0===n.sortOrder)),Se(1),de("ngIf",n.isMultiSorted()))},dependencies:[io,ho],encapsulation:2,changeDetection:0}),i})(),j2=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.dt.isSelected(this.value),this.cd.markForCheck()})}ngOnInit(){this.checked=this.dt.isSelected(this.value)}onClick(e){this.disabled||this.dt.toggleRowWithCheckbox({originalEvent:e,rowIndex:this.index},this.value),Bt.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_),Xt(DA),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-tableCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",value:"value",index:"index",inputId:"inputId",name:"name",required:"required",ariaLabel:"ariaLabel"},decls:6,vars:19,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(Qe(0,"div",0),mn("click",function(s){return n.onClick(s)}),Qe(1,"div",1)(2,"input",2),mn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),nt()(),Qe(3,"div",3,4),Vn(5,"span",5),nt()()),2&e&&(de("ngClass",as(10,d4,n.focused,n.disabled)),Se(2),de("checked",n.checked)("disabled",n.disabled),vr("id",n.inputId)("name",n.name)("required",n.required)("aria-label",n.ariaLabel),Se(1),de("ngClass",Su(13,pre,n.checked,n.focused,n.disabled)),vr("aria-checked",n.checked),Se(2),de("ngClass",bi(17,f4,n.checked)))},dependencies:[io],encapsulation:2,changeDetection:0}),i})(),$2=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.valueChangeSubscription=this.dt.tableService.valueSource$.subscribe(()=>{this.checked=this.updateCheckedState()}),this.selectionChangeSubscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.updateCheckedState()})}ngOnInit(){this.checked=this.updateCheckedState()}onClick(e){this.disabled||this.dt.value&&this.dt.value.length>0&&this.dt.toggleRowsWithCheckbox(e,!this.checked),Bt.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}isDisabled(){return this.disabled||!this.dt.value||!this.dt.value.length}ngOnDestroy(){this.selectionChangeSubscription&&this.selectionChangeSubscription.unsubscribe(),this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe()}updateCheckedState(){if(this.cd.markForCheck(),null!==this.dt._selectAll)return this.dt._selectAll;{const e=this.dt.selectionPageOnly?this.dt.dataToRender(this.dt.processedData):this.dt.processedData,n=this.dt.frozenValue?[...this.dt.frozenValue,...e]:e,r=this.dt.rowSelectable?n.filter((s,o)=>this.dt.rowSelectable({data:s,index:o})):n;return Ji.isNotEmpty(r)&&Ji.isNotEmpty(this.dt.selection)&&r.every(s=>this.dt.selection.some(o=>this.dt.equals(s,o)))}}}return i.\u0275fac=function(e){return new(e||i)(Xt(l_),Xt(DA),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-tableHeaderCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",inputId:"inputId",name:"name",ariaLabel:"ariaLabel"},decls:7,vars:18,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["cb",""],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(Qe(0,"div",0),mn("click",function(s){return n.onClick(s)}),Qe(1,"div",1)(2,"input",2,3),mn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),nt()(),Qe(4,"div",4,5),Vn(6,"span",6),nt()()),2&e&&(de("ngClass",as(9,d4,n.focused,n.isDisabled())),Se(2),de("checked",n.checked)("disabled",n.isDisabled()),vr("id",n.inputId)("name",n.name)("aria-label",n.ariaLabel),Se(2),de("ngClass",Su(12,gre,n.checked,n.focused,n.isDisabled())),vr("aria-checked",n.checked),Se(2),de("ngClass",bi(16,f4,n.checked)))},dependencies:[io],encapsulation:2,changeDetection:0}),i})(),zre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,n4,U2,j1,W1,av,Yte,l4,q1,nne,ov,xa,ov]}),i})(),Vre=(()=>{class i{constructor(e){this.el=e}onkeydown(e){if(!0!==this.pFocusTrapDisabled){e.preventDefault();let n=Bt.getFocusableElements(this.el.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn))},i.\u0275dir=Yr({type:i,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,n){1&e&&mn("keydown.tab",function(s){return n.onkeydown(s)})("keydown.shift.tab",function(s){return n.onkeydown(s)})},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),i})(),Ure=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();const Hre=["titlebar"],Gre=["content"],Wre=["footer"];function jre(i,t){if(1&i){const e=yi();Qe(0,"div",11),mn("mousedown",function(r){return Ot(e),Nt(Ce(3).initResize(r))}),nt()}}function $re(i,t){if(1&i&&(Qe(0,"span",18),ci(1),nt()),2&i){const e=Ce(4);vr("id",e.id+"-label"),Se(1),is(e.header)}}function qre(i,t){1&i&&(Qe(0,"span",18),su(1,1),nt()),2&i&&vr("id",Ce(4).id+"-label")}function Xre(i,t){1&i&&Ni(0)}const Yre=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function Kre(i,t){if(1&i){const e=yi();Qe(0,"button",19),mn("click",function(){return Ot(e),Nt(Ce(4).maximize())})("keydown.enter",function(){return Ot(e),Nt(Ce(4).maximize())}),Vn(1,"span",20),nt()}if(2&i){const e=Ce(4);de("ngClass",uo(2,Yre)),Se(1),de("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}const Zre=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function Qre(i,t){if(1&i){const e=yi();Qe(0,"button",21),mn("click",function(r){return Ot(e),Nt(Ce(4).close(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(4).close(r))}),Vn(1,"span",22),nt()}if(2&i){const e=Ce(4);de("ngClass",uo(4,Zre)),vr("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),Se(1),de("ngClass",e.closeIcon)}}function Jre(i,t){if(1&i){const e=yi();Qe(0,"div",12,13),mn("mousedown",function(r){return Ot(e),Nt(Ce(3).initDrag(r))}),Xe(2,$re,2,2,"span",14),Xe(3,qre,2,1,"span",14),Xe(4,Xre,1,0,"ng-container",9),Qe(5,"div",15),Xe(6,Kre,2,3,"button",16),Xe(7,Qre,2,5,"button",17),nt()()}if(2&i){const e=Ce(3);Se(2),de("ngIf",!e.headerFacet&&!e.headerTemplate),Se(1),de("ngIf",e.headerFacet),Se(1),de("ngTemplateOutlet",e.headerTemplate),Se(2),de("ngIf",e.maximizable),Se(1),de("ngIf",e.closable)}}function ese(i,t){1&i&&Ni(0)}function tse(i,t){1&i&&Ni(0)}function nse(i,t){if(1&i&&(Qe(0,"div",23,24),su(2,2),Xe(3,tse,1,0,"ng-container",9),nt()),2&i){const e=Ce(3);Se(3),de("ngTemplateOutlet",e.footerTemplate)}}const ise=function(i,t,e,n){return{"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":t,"p-dialog-resizable":e,"p-dialog-maximized":n}},rse=function(i,t){return{transform:i,transition:t}},sse=function(i){return{value:"visible",params:i}};function ose(i,t){if(1&i){const e=yi();Qe(0,"div",3,4),mn("@animation.start",function(r){return Ot(e),Nt(Ce(2).onAnimationStart(r))})("@animation.done",function(r){return Ot(e),Nt(Ce(2).onAnimationEnd(r))}),Xe(2,jre,1,0,"div",5),Xe(3,Jre,8,5,"div",6),Qe(4,"div",7,8),su(6),Xe(7,ese,1,0,"ng-container",9),nt(),Xe(8,nse,4,1,"div",10),nt()}if(2&i){const e=Ce(2);Fr(e.styleClass),de("ngClass",sf(15,ise,e.rtl,e.draggable,e.resizable,e.maximized))("ngStyle",e.style)("pFocusTrapDisabled",!1===e.focusTrap)("@animation",bi(23,sse,as(20,rse,e.transformOptions,e.transitionOptions))),vr("aria-labelledby",e.id+"-label"),Se(2),de("ngIf",e.resizable),Se(1),de("ngIf",e.showHeader),Se(1),Fr(e.contentStyleClass),de("ngClass","p-dialog-content")("ngStyle",e.contentStyle),Se(3),de("ngTemplateOutlet",e.contentTemplate),Se(1),de("ngIf",e.footerFacet||e.footerTemplate)}}const ase=function(i,t,e,n,r,s,o,l,u,p){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":t,"p-dialog-left":e,"p-dialog-right":n,"p-dialog-top":r,"p-dialog-top-left":s,"p-dialog-top-right":o,"p-dialog-bottom":l,"p-dialog-bottom-left":u,"p-dialog-bottom-right":p}};function lse(i,t){if(1&i&&(Qe(0,"div",1),Xe(1,ose,9,25,"div",2),nt()),2&i){const e=Ce();Fr(e.maskStyleClass),de("ngClass",dM(4,ase,[e.modal,e.modal||e.blockScroll,"left"===e.position,"right"===e.position,"top"===e.position,"topleft"===e.position||"top-left"===e.position,"topright"===e.position||"top-right"===e.position,"bottom"===e.position,"bottomleft"===e.position||"bottom-left"===e.position,"bottomright"===e.position||"bottom-right"===e.position])),Se(1),de("ngIf",e.visible)}}const cse=["*",[["p-header"]],[["p-footer"]]],use=["*","p-header","p-footer"],hse=dC([tl({transform:"{{transform}}",opacity:0}),Ac("{{transition}}")]),dse=dC([Ac("{{transition}}",tl({transform:"{{transform}}",opacity:0}))]);let Z1=(()=>{class i{constructor(e,n,r,s,o){this.el=e,this.renderer=n,this.zone=r,this.cd=s,this.config=o,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.closeTabindex="-1",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new Bn,this.onHide=new Bn,this.visibleChange=new Bn,this.onResizeInit=new Bn,this.onResizeEnd=new Bn,this.onDragEnd=new Bn,this.onMaximize=new Bn,this.id=sC(),this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle()}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style={...e},this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let e=Bt.findSingle(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&Bt.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&Bt.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?Bt.addClass(document.body,"p-overflow-hidden"):Bt.removeClass(document.body,"p-overflow-hidden")),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(Ll.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints)e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[n]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}initDrag(e){Bt.hasClass(e.target,"p-dialog-header-icon")||Bt.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",Bt.addClass(document.body,"p-unselectable-text"))}onKeydown(e){if(this.focusTrap&&9===e.which){e.preventDefault();let n=Bt.getFocusableElements(this.container);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}onDrag(e){if(this.dragging){let n=Bt.getOuterWidth(this.container),r=Bt.getOuterHeight(this.container),s=e.pageX-this.lastPageX,o=e.pageY-this.lastPageY,l=this.container.getBoundingClientRect(),u=l.left+s,p=l.top+o,v=Bt.getViewport();this.container.style.position="fixed",this.keepInViewport?(u>=this.minX&&u+n<v.width&&(this._style.left=u+"px",this.lastPageX=e.pageX,this.container.style.left=u+"px"),p>=this.minY&&p+r<v.height&&(this._style.top=p+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")):(this.lastPageX=e.pageX,this.container.style.left=u+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,Bt.removeClass(document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,Bt.addClass(document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let n=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,s=Bt.getOuterWidth(this.container),o=Bt.getOuterHeight(this.container),l=Bt.getOuterHeight(this.contentViewChild.nativeElement),u=s+n,p=o+r,v=this.container.style.minWidth,w=this.container.style.minHeight,I=this.container.getBoundingClientRect(),T=Bt.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(u+=n,p+=r),(!v||u>parseInt(v))&&I.left+u<T.width&&(this._style.width=u+"px",this.container.style.width=this._style.width),(!w||p>parseInt(w))&&I.top+p<T.height&&(this.contentViewChild.nativeElement.style.height=l+p-o+"px",this._style.height&&(this._style.height=p+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,Bt.removeClass(document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{27==n.which&&this.close(n)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):Bt.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&Bt.addClass(document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&Bt.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(Bt.removeClass(document.body,"p-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&Bt.removeClass(document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&Ll.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?{...this.originalStyle}:{}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(d),Xt(Vo),Xt(xo),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-dialog"]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,XD,5),Ba(r,A1,5),Ba(r,za,4)),2&e){let s;Wi(s=ji())&&(n.headerFacet=s.first),Wi(s=ji())&&(n.footerFacet=s.first),Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Hre,5),Tr(Gre,5),Tr(Wre,5)),2&e){let r;Wi(r=ji())&&(n.headerViewChild=r.first),Wi(r=ji())&&(n.contentViewChild=r.first),Wi(r=ji())&&(n.footerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:"draggable",resizable:"resizable",positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:"modal",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",rtl:"rtl",closable:"closable",responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",showHeader:"showHeader",breakpoint:"breakpoint",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",maximizable:"maximizable",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},ngContentSelectors:use,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["content",""],[4,"ngTemplateOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"],["footer",""]],template:function(e,n){1&e&&(Bf(cse),Xe(0,lse,2,15,"div",0)),2&e&&de("ngIf",n.maskVisible)},dependencies:[io,ho,el,Ro,Vre,Du],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translate(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0px!important;left:0px!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[ly("animation",[Mu("void => visible",[jV(hse)]),Mu("visible => void",[jV(dse)])])]},changeDetection:0}),i})(),fse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,Ure,Xc,xa]}),i})();const p4=["container"],pse=function(i,t,e,n){return{"pi-info-circle":i,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":n}};function gse(i,t){if(1&i&&(Ur(0),Vn(1,"span",6),Qe(2,"div",7)(3,"div",8),ci(4),nt(),Qe(5,"div",9),ci(6),nt()(),Hr()),2&i){const e=Ce();Se(1),Fr("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),de("ngClass",sf(5,pse,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),Se(3),is(e.message.summary),Se(2),is(e.message.detail)}}function mse(i,t){1&i&&Ni(0)}function vse(i,t){if(1&i){const e=yi();Qe(0,"button",10),mn("click",function(r){return Ot(e),Nt(Ce().onCloseIconClick(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce().onCloseIconClick(r))}),Vn(1,"span",11),nt()}}const yse=function(i){return[i,"p-toast-message"]},_se=function(i,t,e,n){return{showTransformParams:i,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:n}},bse=function(i){return{value:"visible",params:i}},Cse=function(i){return{$implicit:i}};function wse(i,t){if(1&i){const e=yi();Qe(0,"p-toastItem",3),mn("onClose",function(r){return Ot(e),Nt(Ce().onMessageClose(r))})("@toastAnimation.start",function(r){return Ot(e),Nt(Ce().onAnimationStart(r))})("@toastAnimation.done",function(r){return Ot(e),Nt(Ce().onAnimationEnd(r))}),nt()}if(2&i){const e=t.$implicit,n=t.index,r=Ce();de("message",e)("index",n)("template",r.template)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}let Ase=(()=>{class i{constructor(e){this.zone=e,this.onClose=new Bn}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Vo))},i.\u0275cmp=_r({type:i,selectors:[["p-toastItem"]],viewQuery:function(e,n){if(1&e&&Tr(p4,5),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,n){1&e&&(Qe(0,"div",0,1),mn("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()}),Qe(2,"div",2),Xe(3,gse,7,10,"ng-container",3),Xe(4,mse,1,0,"ng-container",4),Xe(5,vse,2,0,"button",5),nt()()),2&e&&(Fr(n.message.styleClass),de("ngClass",bi(10,yse,"p-toast-message-"+n.message.severity))("@messageState",bi(17,bse,sf(12,_se,n.showTransformOptions,n.hideTransformOptions,n.showTransitionOptions,n.hideTransitionOptions))),vr("id",n.message.id),Se(2),de("ngClass",n.message.contentStyleClass),Se(1),de("ngIf",!n.template),Se(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",bi(19,Cse,n.message)),Se(1),de("ngIf",!1!==n.message.closable))},dependencies:[io,ho,el,Du],encapsulation:2,data:{animation:[ly("messageState",[A0("visible",tl({transform:"translateY(0)",opacity:1})),Mu("void => *",[tl({transform:"{{showTransformParams}}",opacity:0}),Ac("{{showTransitionParams}}")]),Mu("* => void",[Ac("{{hideTransitionParams}}",tl({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),i})(),LA=(()=>{class i{constructor(e,n,r){this.messageService=e,this.cd=n,this.config=r,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new Bn,this.id=sC()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const n=e.filter(r=>this.canAdd(r));this.add(n)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let n=this.key===e.key;return n&&this.preventOpenDuplicates&&(n=!this.containsMessage(this.messages,e)),n&&this.preventDuplicates&&(n=!this.containsMessage(this.messagesArchieve,e)),n}containsMessage(e,n){return!!e&&null!=e.find(r=>r.summary===n.summary&&r.detail==n.detail&&r.severity===n.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&Ll.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&Ji.isEmpty(this.messages)&&Ll.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints){let r="";for(let s in this.breakpoints[n])r+=s+":"+this.breakpoints[n][s]+" !important;";e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-toast[${this.id}] {\n                           ${r}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Ll.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Xt(fm),Xt(xo),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-toast"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&Tr(p4,5),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,n){1&e&&(Qe(0,"div",0,1),Xe(2,wse,1,8,"p-toastItem",2),nt()),2&e&&(Fr(n.styleClass),de("ngClass","p-toast p-component p-toast-"+n.position)("ngStyle",n.style),Se(2),de("ngForOf",n.messages))},dependencies:[io,$c,Ro,Ase],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[ly("toastAnimation",[Mu(":enter, :leave",[RJ("@*",LJ())])])]},changeDetection:0}),i})(),g4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,Xc,xa]}),i})();function xse(i,t){1&i&&Vn(0,"span",11),2&i&&de("innerHTML",Ce(2).$implicit.summary,Aa)}function Ise(i,t){1&i&&Vn(0,"span",12),2&i&&de("innerHTML",Ce(2).$implicit.detail,Aa)}function Sse(i,t){if(1&i&&(Ur(0),Xe(1,xse,1,1,"span",9),Xe(2,Ise,1,1,"span",10),Hr()),2&i){const e=Ce().$implicit;Se(1),de("ngIf",e.summary),Se(1),de("ngIf",e.detail)}}function Ese(i,t){if(1&i&&(Qe(0,"span",15),ci(1),nt()),2&i){const e=Ce(2).$implicit;Se(1),is(e.summary)}}function Tse(i,t){if(1&i&&(Qe(0,"span",16),ci(1),nt()),2&i){const e=Ce(2).$implicit;Se(1),is(e.detail)}}function Mse(i,t){if(1&i&&(Xe(0,Ese,2,1,"span",13),Xe(1,Tse,2,1,"span",14)),2&i){const e=Ce().$implicit;de("ngIf",e.summary),Se(1),de("ngIf",e.detail)}}function Dse(i,t){if(1&i){const e=yi();Qe(0,"button",17),mn("click",function(){Ot(e);const r=Ce().index;return Nt(Ce(2).removeMessage(r))}),Vn(1,"i",18),nt()}}const Lse=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Rse=function(i){return{value:"visible",params:i}},Pse=function(i,t,e,n){return{"pi-info-circle":i,"pi-check":t,"pi-exclamation-triangle":e,"pi-times-circle":n}};function kse(i,t){if(1&i&&(Qe(0,"div",4)(1,"div",5),Vn(2,"span",6),Xe(3,Sse,3,2,"ng-container",1),Xe(4,Mse,2,2,"ng-template",null,7,sc),Xe(6,Dse,2,0,"button",8),nt()()),2&i){const e=t.$implicit,n=ao(5),r=Ce(2);Fr("p-message p-message-"+e.severity),de("@messageAnimation",bi(12,Rse,as(9,Lse,r.showTransitionOptions,r.hideTransitionOptions))),Se(2),Fr("p-message-icon pi"+(e.icon?" "+e.icon:"")),de("ngClass",sf(14,Pse,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),Se(1),de("ngIf",!r.escape)("ngIfElse",n),Se(3),de("ngIf",r.closable)}}function Ose(i,t){if(1&i&&(Ur(0),Xe(1,kse,7,19,"div",3),Hr()),2&i){const e=Ce();Se(1),de("ngForOf",e.value)}}function Fse(i,t){1&i&&Ni(0)}function Nse(i,t){if(1&i&&(Qe(0,"div",19)(1,"div",5),Xe(2,Fse,1,0,"ng-container",20),nt()()),2&i){const e=Ce();de("ngClass","p-message p-message-"+e.severity),Se(2),de("ngTemplateOutlet",e.contentTemplate)}}let Bse=(()=>{class i{constructor(e,n,r){this.messageService=e,this.el=n,this.cd=r,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new Bn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){if(e instanceof Array){let n=e.filter(r=>this.key===r.key);this.value=this.value?[...this.value,...n]:[...n]}else this.key===e.key&&(this.value=this.value?[...this.value,e]:[e]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(e){this.value=this.value.filter((n,r)=>r!==e),this.valueChange.emit(this.value)}get icon(){const e=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(fm,8),Xt(Zn),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-messages"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(Qe(0,"div",0),Xe(1,Ose,2,1,"ng-container",1),Xe(2,Nse,3,2,"ng-template",null,2,sc),nt()),2&e){const r=ao(3);Fr(n.styleClass),de("ngStyle",n.style),Se(1),de("ngIf",!n.contentTemplate)("ngIfElse",r)}},dependencies:[io,$c,ho,el,Ro,Du],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[ly("messageAnimation",[Mu(":enter",[tl({opacity:0,transform:"translateY(-25%)"}),Ac("{{showTransitionParams}}")]),Mu(":leave",[Ac("{{hideTransitionParams}}",tl({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),i})(),m4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,Xc]}),i})();function zse(i,t){if(1&i&&(Qe(0,"div",5),ci(1),nt()),2&i){const e=Ce(2);xd("display",null!=e.value&&0!==e.value?"flex":"none"),Se(1),AI("",e.value,"",e.unit,"")}}function Vse(i,t){if(1&i&&(Qe(0,"div",3),Xe(1,zse,2,4,"div",4),nt()),2&i){const e=Ce();xd("width",e.value+"%"),Se(1),de("ngIf",e.showValue)}}function Use(i,t){1&i&&(Qe(0,"div",6),Vn(1,"div",7),nt())}const Hse=function(i,t){return{"p-progressbar p-component":!0,"p-progressbar-determinate":i,"p-progressbar-indeterminate":t}};let Gse=(()=>{class i{constructor(){this.showValue=!0,this.unit="%",this.mode="determinate"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-progressBar"]],hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",style:"style",styleClass:"styleClass",unit:"unit",mode:"mode"},decls:3,vars:10,consts:[["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],["class","p-progressbar-label",3,"display",4,"ngIf"],[1,"p-progressbar-label"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(e,n){1&e&&(Qe(0,"div",0),Xe(1,Vse,2,3,"div",1),Xe(2,Use,2,0,"div",2),nt()),2&e&&(Fr(n.styleClass),de("ngStyle",n.style)("ngClass",as(7,Hse,"determinate"===n.mode,"indeterminate"===n.mode)),vr("aria-valuenow",n.value),Se(1),de("ngIf","determinate"===n.mode),Se(1),de("ngIf","indeterminate"===n.mode))},dependencies:[io,ho,Ro],styles:['.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0}),i})(),q2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();const Wse=["advancedfileinput"],jse=["basicfileinput"],$se=["content"];function qse(i,t){if(1&i){const e=yi();Qe(0,"p-button",17),mn("onClick",function(){return Ot(e),Nt(Ce(2).upload())}),nt()}if(2&i){const e=Ce(2);de("label",e.uploadButtonLabel)("icon",e.uploadIcon)("disabled",!e.hasFiles()||e.isFileLimitExceeded())}}function Xse(i,t){if(1&i){const e=yi();Qe(0,"p-button",17),mn("onClick",function(){return Ot(e),Nt(Ce(2).clear())}),nt()}if(2&i){const e=Ce(2);de("label",e.cancelButtonLabel)("icon",e.cancelIcon)("disabled",!e.hasFiles()||e.uploading)}}function Yse(i,t){1&i&&Ni(0)}function Kse(i,t){1&i&&Vn(0,"p-progressBar",18),2&i&&de("value",Ce(2).progress)("showValue",!1)}function Zse(i,t){if(1&i&&Vn(0,"img",26),2&i){const e=Ce().$implicit,n=Ce(4);de("src",e.objectURL,Xh)("width",n.previewWidth)}}function Qse(i,t){if(1&i){const e=yi();Qe(0,"div",22)(1,"div"),Xe(2,Zse,1,2,"img",23),nt(),Qe(3,"div",24),ci(4),nt(),Qe(5,"div"),ci(6),nt(),Qe(7,"div")(8,"button",25),mn("click",function(r){const o=Ot(e).index;return Nt(Ce(4).remove(r,o))}),nt()()()}if(2&i){const e=t.$implicit,n=Ce(4);Se(2),de("ngIf",n.isImage(e)),Se(2),is(e.name),Se(2),is(n.formatSize(e.size)),Se(2),de("disabled",n.uploading)}}function Jse(i,t){if(1&i&&(Qe(0,"div"),Xe(1,Qse,9,4,"div",21),nt()),2&i){const e=Ce(3);Se(1),de("ngForOf",e.files)}}function eoe(i,t){}function toe(i,t){if(1&i&&(Qe(0,"div"),Xe(1,eoe,0,0,"ng-template",27),nt()),2&i){const e=Ce(3);Se(1),de("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function noe(i,t){if(1&i&&(Qe(0,"div",19),Xe(1,Jse,2,1,"div",20),Xe(2,toe,2,2,"div",20),nt()),2&i){const e=Ce(2);Se(1),de("ngIf",!e.fileTemplate),Se(1),de("ngIf",e.fileTemplate)}}function ioe(i,t){1&i&&Ni(0)}const roe=function(i,t){return{"p-focus":i,"p-disabled":t}},soe=function(i){return{$implicit:i}};function ooe(i,t){if(1&i){const e=yi();Qe(0,"div",2)(1,"div",3)(2,"span",4),mn("focus",function(){return Ot(e),Nt(Ce().onFocus())})("blur",function(){return Ot(e),Nt(Ce().onBlur())})("click",function(){return Ot(e),Nt(Ce().choose())})("keydown.enter",function(){return Ot(e),Nt(Ce().choose())}),Qe(3,"input",5,6),mn("change",function(r){return Ot(e),Nt(Ce().onFileSelect(r))}),nt(),Vn(5,"span",7),Qe(6,"span",8),ci(7),nt()(),Xe(8,qse,1,3,"p-button",9),Xe(9,Xse,1,3,"p-button",9),Xe(10,Yse,1,0,"ng-container",10),nt(),Qe(11,"div",11,12),mn("dragenter",function(r){return Ot(e),Nt(Ce().onDragEnter(r))})("dragleave",function(r){return Ot(e),Nt(Ce().onDragLeave(r))})("drop",function(r){return Ot(e),Nt(Ce().onDrop(r))}),Xe(13,Kse,1,2,"p-progressBar",13),Vn(14,"p-messages",14),Xe(15,noe,3,2,"div",15),Xe(16,ioe,1,0,"ng-container",16),nt()()}if(2&i){const e=Ce();Fr(e.styleClass),de("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),Se(2),de("ngClass",as(22,roe,e.focus,e.disabled||e.isChooseDisabled())),Se(1),de("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),vr("title",""),Se(2),Fr(e.chooseIcon),de("ngClass","p-button-icon p-button-icon-left"),Se(2),is(e.chooseButtonLabel),Se(1),de("ngIf",!e.auto&&e.showUploadButton),Se(1),de("ngIf",!e.auto&&e.showCancelButton),Se(1),de("ngTemplateOutlet",e.toolbarTemplate),Se(3),de("ngIf",e.hasFiles()),Se(1),de("value",e.msgs)("enableService",!1),Se(1),de("ngIf",e.hasFiles()),Se(1),de("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",bi(25,soe,e.files))}}function aoe(i,t){if(1&i){const e=yi();Qe(0,"input",32,33),mn("change",function(r){return Ot(e),Nt(Ce(2).onFileSelect(r))})("focus",function(){return Ot(e),Nt(Ce(2).onFocus())})("blur",function(){return Ot(e),Nt(Ce(2).onBlur())}),nt()}if(2&i){const e=Ce(2);de("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled)}}const loe=function(i,t,e,n){return{"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":i,"p-fileupload-choose-selected":t,"p-focus":e,"p-disabled":n}};function coe(i,t){if(1&i){const e=yi();Qe(0,"div",28),Vn(1,"p-messages",14),Qe(2,"span",29),mn("mouseup",function(){return Ot(e),Nt(Ce().onBasicUploaderClick())})("keydown",function(r){return Ot(e),Nt(Ce().onBasicKeydown(r))}),Vn(3,"span",30),Qe(4,"span",8),ci(5),nt(),Xe(6,aoe,2,3,"input",31),nt()()}if(2&i){const e=Ce();Se(1),de("value",e.msgs)("enableService",!1),Se(1),Fr(e.styleClass),de("ngClass",sf(9,loe,!e.chooseLabel,e.hasFiles(),e.focus,e.disabled))("ngStyle",e.style),Se(1),de("ngClass",e.hasFiles()&&!e.auto?e.uploadIcon:e.chooseIcon),Se(2),is(e.auto?e.chooseLabel:e.hasFiles()?e.files[0].name:e.chooseLabel),Se(1),de("ngIf",!e.hasFiles())}}let v4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.sanitizer=n,this.zone=r,this.http=s,this.cd=o,this.config=l,this.method="post",this.invalidFileSizeMessageSummary="{0}: Invalid file size, ",this.invalidFileSizeMessageDetail="maximum upload size is {0}.",this.invalidFileTypeMessageSummary="{0}: Invalid file type, ",this.invalidFileTypeMessageDetail="allowed file types: {0}.",this.invalidFileLimitMessageDetail="limit is {0} at most.",this.invalidFileLimitMessageSummary="Maximum number of files exceeded, ",this.previewWidth=50,this.chooseIcon="pi pi-plus",this.uploadIcon="pi pi-upload",this.cancelIcon="pi pi-times",this.showUploadButton=!0,this.showCancelButton=!0,this.mode="advanced",this.onBeforeUpload=new Bn,this.onSend=new Bn,this.onUpload=new Bn,this.onError=new Bn,this.onClear=new Bn,this.onRemove=new Bn,this.onSelect=new Bn,this.onProgress=new Bn,this.uploadHandler=new Bn,this._files=[],this.progress=0,this.uploadedFileCount=0}set files(e){this._files=[];for(let n=0;n<e.length;n++){let r=e[n];this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[n]))),this._files.push(e[n]))}}get files(){return this._files}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"file":default:this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){"advanced"===this.mode&&this.zone.runOutsideAngular(()=>{this.content&&this.content.nativeElement.addEventListener("dragover",this.onDragOver.bind(this))})}choose(){this.advancedFileInput.nativeElement.click()}onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.msgs=[],this.multiple||(this.files=[]);let n=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let r=0;r<n.length;r++){let s=n[r];this.isFileSelected(s)||this.validate(s)&&(this.isImage(s)&&(s.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(n[r]))),this.files.push(n[r]))}this.onSelect.emit({originalEvent:e,files:n,currentFiles:this.files}),this.fileLimit&&"advanced"==this.mode&&this.checkFileLimit(),this.hasFiles()&&this.auto&&("advanced"!==this.mode||!this.isFileLimitExceeded())&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let n of this.files)if(n.name+n.type+n.size===e.name+e.type+e.size)return!0;return!1}isIE11(){return!!window.MSInputMethodContext&&!!document.documentMode}validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):!(this.maxFileSize&&e.size>this.maxFileSize&&(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),1))}isFileTypeValid(e){let n=this.accept.split(",").map(r=>r.trim());for(let r of n)if(this.isWildcard(r)?this.getTypeClass(e.type)===this.getTypeClass(r):e.type==r||this.getFileExtension(e).toLowerCase()===r.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return-1!==e.indexOf("*")}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let n=0;n<this.files.length;n++)e.append(this.name,this.files[n],this.files[n].name);this.http[this.method](this.url,e,{headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(n=>{switch(n.type){case Cc.Sent:this.onSend.emit({originalEvent:n,formData:e});break;case Cc.Response:this.uploading=!1,this.progress=0,n.status>=200&&n.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:n,files:this.files})):this.onError.emit({files:this.files}),this.clear();break;case Cc.UploadProgress:n.loaded&&(this.progress=Math.round(100*n.loaded/n.total)),this.onProgress.emit({originalEvent:n,progress:this.progress})}this.cd.markForCheck()},n=>{this.uploading=!1,this.onError.emit({files:this.files,error:n})})}}clear(){this.files=[],this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,n){this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[n]}),this.files.splice(n,1)}isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount}isChooseDisabled(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(){this.isFileLimitExceeded()&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(Bt.addClass(this.content.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||Bt.removeClass(this.content.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){Bt.removeClass(this.content.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let n=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||n&&1===n.length)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){if(0==e)return"0 B";let o=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,o)).toFixed(3))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault()}}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(qc.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(qc.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(qc.CANCEL)}ngOnDestroy(){this.content&&this.content.nativeElement&&this.content.nativeElement.removeEventListener("dragover",this.onDragOver),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(u3),Xt(Vo),Xt(t1),Xt(xo),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-fileUpload"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Wse,5),Tr(jse,5),Tr($se,5)),2&e){let r;Wi(r=ji())&&(n.advancedFileInput=r.first),Wi(r=ji())&&(n.basicFileInput=r.first),Wi(r=ji())&&(n.content=r.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:"multiple",accept:"accept",disabled:"disabled",auto:"auto",withCredentials:"withCredentials",maxFileSize:"maxFileSize",invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:"previewWidth",chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:"showUploadButton",showCancelButton:"showCancelButton",mode:"mode",headers:"headers",customUpload:"customUpload",fileLimit:"fileLimit",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler"},decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"p-fileupload-buttonbar"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"ngClass","focus","blur","click","keydown.enter"],["type","file",3,"multiple","accept","disabled","change"],["advancedfileinput",""],[3,"ngClass"],[1,"p-button-label"],["type","button",3,"label","icon","disabled","onClick",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],["content",""],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"label","icon","disabled","onClick"],[3,"value","showValue"],[1,"p-fileupload-files"],[4,"ngIf"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[3,"src","width",4,"ngIf"],[1,"p-fileupload-filename"],["type","button","icon","pi pi-times","pButton","",3,"disabled","click"],[3,"src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"ngClass","ngStyle","mouseup","keydown"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur"],["basicfileinput",""]],template:function(e,n){1&e&&(Xe(0,ooe,17,27,"div",0),Xe(1,coe,7,14,"div",1)),2&e&&(de("ngIf","advanced"===n.mode),Se(1),de("ngIf","basic"===n.mode))},dependencies:[io,$c,ho,el,Ro,x0,$1,Gse,Bse,Du],styles:[".p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}\n"],encapsulation:2,changeDetection:0}),i})(),uoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa,av,q2,m4,Xc,xa,av,q2,m4]}),i})();function hoe(i,t){1&i&&Ni(0)}function doe(i,t){if(1&i&&(Qe(0,"div",3),Xe(1,hoe,1,0,"ng-container",4),nt()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.leftTemplate)}}function foe(i,t){1&i&&Ni(0)}function poe(i,t){if(1&i&&(Qe(0,"div",5),Xe(1,foe,1,0,"ng-container",4),nt()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.rightTemplate)}}const goe=["*"];let X2=(()=>{class i{constructor(e){this.el=e}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"left":this.leftTemplate=e.template;break;case"right":this.rightTemplate=e.template}})}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn))},i.\u0275cmp=_r({type:i,selectors:[["p-toolbar"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:goe,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(e,n){1&e&&(Bf(),Qe(0,"div",0),su(1),Xe(2,doe,2,1,"div",1),Xe(3,poe,2,1,"div",2),nt()),2&e&&(Fr(n.styleClass),de("ngClass","p-toolbar p-component")("ngStyle",n.style),Se(2),de("ngIf",n.leftTemplate),Se(1),de("ngIf",n.rightTemplate))},dependencies:[io,ho,el,Ro],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),i})(),moe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();function voe(i,t){1&i&&Vn(0,"i",8),2&i&&(Fr(Ce(2).confirmation.icon),de("ngClass","p-confirm-popup-icon"))}function yoe(i,t){if(1&i){const e=yi();Qe(0,"button",9),mn("click",function(){return Ot(e),Nt(Ce(2).reject())}),nt()}if(2&i){const e=Ce(2);Fr(e.confirmation.rejectButtonStyleClass||"p-button-text"),de("icon",e.confirmation.rejectIcon)("label",e.rejectButtonLabel)("ngClass","p-confirm-popup-reject p-button-sm"),vr("aria-label",e.rejectButtonLabel)}}function _oe(i,t){if(1&i){const e=yi();Qe(0,"button",9),mn("click",function(){return Ot(e),Nt(Ce(2).accept())}),nt()}if(2&i){const e=Ce(2);Fr(e.confirmation.acceptButtonStyleClass),de("icon",e.confirmation.acceptIcon)("label",e.acceptButtonLabel)("ngClass","p-confirm-popup-accept p-button-sm"),vr("aria-label",e.acceptButtonLabel)}}const boe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Coe=function(i){return{value:"open",params:i}};function woe(i,t){if(1&i){const e=yi();Qe(0,"div",1),mn("click",function(r){return Ot(e),Nt(Ce().onOverlayClick(r))})("@animation.start",function(r){return Ot(e),Nt(Ce().onAnimationStart(r))})("@animation.done",function(r){return Ot(e),Nt(Ce().onAnimationEnd(r))}),Qe(1,"div",2,3),Xe(3,voe,1,3,"i",4),Qe(4,"span",5),ci(5),nt()(),Qe(6,"div",6),Xe(7,yoe,1,6,"button",7),Xe(8,_oe,1,6,"button",7),nt()()}if(2&i){const e=Ce();Fr(e.styleClass),de("ngClass","p-confirm-popup p-component")("ngStyle",e.style)("@animation",bi(12,Coe,as(9,boe,e.showTransitionOptions,e.hideTransitionOptions))),Se(3),de("ngIf",e.confirmation.icon),Se(2),is(e.confirmation.message),Se(2),de("ngIf",!1!==e.confirmation.rejectVisible),Se(1),de("ngIf",!1!==e.confirmation.acceptVisible)}}let Y2=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.confirmationService=n,this.renderer=r,this.cd=s,this.config=o,this.overlayService=l,this.defaultFocus="accept",this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autoZIndex=!0,this.baseZIndex=0,this.subscription=this.confirmationService.requireConfirmation$.subscribe(u=>{u?u.key===this.key&&(this.confirmation=u,this.confirmation.accept&&(this.confirmation.acceptEvent=new Bn,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new Bn,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this.cd.markForCheck()}onAnimationStart(e){if("open"===e.toState){this.container=e.element,document.body.appendChild(this.container),this.align(),this.bindListeners();const n=this.getElementToFocus();n&&n.focus()}}onAnimationEnd(e){"void"===e.toState&&this.onContainerDestroy()}getElementToFocus(){switch(this.defaultFocus){case"accept":return Bt.findSingle(this.container,".p-confirm-popup-accept");case"reject":return Bt.findSingle(this.container,".p-confirm-popup-reject");case"none":return null}}align(){this.autoZIndex&&Ll.set("overlay",this.container,this.config.zIndex.overlay),Bt.absolutePosition(this.container,this.confirmation.target);const e=Bt.getOffset(this.container),n=Bt.getOffset(this.confirmation.target);let r=0;e.left<n.left&&(r=n.left-e.left),this.container.style.setProperty("--overlayArrowLeft",`${r}px`),e.top<n.top&&Bt.addClass(this.container,"p-confirm-popup-flipped")}hide(){this.visible=!1}accept(){this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide()}reject(){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(),this.hide()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}bindListeners(){this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener()}unbindListeners(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}bindDocumentClickListener(){if(!this.documentClickListener){let e=Bt.isIOS()?"touchstart":"click";const n=this.el?this.el.nativeElement.ownerDocument:document;this.documentClickListener=this.renderer.listen(n,e,r=>{let s=this.confirmation.target;this.container!==r.target&&!this.container.contains(r.target)&&s!==r.target&&!s.contains(r.target)&&this.hide()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}onWindowResize(){this.visible&&!Bt.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.confirmation.target,()=>{this.visible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unsubscribeConfirmationSubscriptions(){this.confirmation&&(this.confirmation.acceptEvent&&this.confirmation.acceptEvent.unsubscribe(),this.confirmation.rejectEvent&&this.confirmation.rejectEvent.unsubscribe())}onContainerDestroy(){this.unbindListeners(),this.unsubscribeConfirmationSubscriptions(),this.autoZIndex&&Ll.clear(this.container),this.confirmation=null,this.container=null}restoreAppend(){this.container&&document.body.removeChild(this.container),this.onContainerDestroy()}get acceptButtonLabel(){return this.confirmation.acceptLabel||this.config.getTranslation(qc.ACCEPT)}get rejectButtonLabel(){return this.confirmation.rejectLabel||this.config.getTranslation(qc.REJECT)}ngOnDestroy(){this.restoreAppend(),this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(sA),Xt(d),Xt(xo),Xt(Dp),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-confirmPopup"]],hostAttrs:[1,"p-element"],inputs:{key:"key",defaultFocus:"defaultFocus",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",visible:"visible"},decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-confirm-popup-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-popup-message"],[1,"p-confirm-popup-footer"],["type","button","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],[3,"ngClass"],["type","button","pButton","",3,"icon","label","ngClass","click"]],template:function(e,n){1&e&&Xe(0,woe,9,14,"div",0),2&e&&de("ngIf",n.visible)},dependencies:[io,ho,Ro,x0],styles:['.p-confirm-popup{position:absolute;margin-top:10px;top:0;left:0}.p-confirm-popup-flipped{margin-top:0;margin-bottom:10px}.p-confirm-popup:after,.p-confirm-popup:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-confirm-popup:after{border-width:8px;margin-left:-8px}.p-confirm-popup:before{border-width:10px;margin-left:-10px}.p-confirm-popup-flipped:after,.p-confirm-popup-flipped:before{bottom:auto;top:100%}.p-confirm-popup.p-confirm-popup-flipped:after{border-bottom-color:transparent}.p-confirm-popup.p-confirm-popup-flipped:before{border-bottom-color:transparent}.p-confirm-popup .p-confirm-popup-content{display:flex;align-items:center}\n'],encapsulation:2,data:{animation:[ly("animation",[A0("void",tl({transform:"scaleY(0.8)",opacity:0})),A0("open",tl({transform:"translateY(0)",opacity:1})),Mu("void => open",Ac("{{showTransitionParams}}")),Mu("open => void",Ac("{{hideTransitionParams}}"))])]},changeDetection:0}),i})(),Aoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,av]}),i})();function xoe(i,t){if(1&i){const e=yi();Qe(0,"span",13)(1,"input",14),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().newGraph=r)}),nt(),Qe(2,"label",15),ci(3,"Name"),nt(),Qe(4,"button",16),mn("click",function(){Ot(e);const r=Ce();return Nt(r.openNew(r.newGraph))}),nt()()}if(2&i){const e=Ce();Se(1),de("ngModel",e.newGraph)}}function Ioe(i,t){}function Soe(i,t){1&i&&(Qe(0,"div",17)(1,"h5",18),ci(2,"Manage Graphs"),nt(),Qe(3,"span",19),Vn(4,"i",20)(5,"input",21),nt()())}function Eoe(i,t){1&i&&(Qe(0,"tr")(1,"th",22),Vn(2,"p-tableHeaderCheckbox"),nt(),Qe(3,"th",23),ci(4,"Label "),Vn(5,"p-sortIcon",24),nt(),Qe(6,"th"),ci(7,"Action(s) "),nt()())}function Toe(i,t){if(1&i){const e=yi();Qe(0,"tr")(1,"td"),Vn(2,"p-tableCheckbox",25),nt(),Qe(3,"td"),ci(4),nt(),Qe(5,"td")(6,"button",26),mn("click",function(){const s=Ot(e).$implicit;return Nt(Ce().showImport(s))}),nt(),Qe(7,"span"),ci(8,"\xa0"),nt(),Qe(9,"button",27),mn("click",function(){const s=Ot(e).$implicit;return Nt(Ce().gexf(s))}),nt(),Qe(10,"span"),ci(11,"\xa0"),nt(),Qe(12,"button",28),mn("click",function(r){const o=Ot(e).$implicit;return Nt(Ce().confirm(r,o))}),nt(),Qe(13,"span"),ci(14,"\xa0"),nt(),Qe(15,"button",29),mn("click",function(){const s=Ot(e).$implicit;return Nt(Ce().selectCytoscape(s))}),nt(),Qe(16,"span"),ci(17,"\xa0"),nt(),Qe(18,"button",30),mn("click",function(){const s=Ot(e).$implicit;return Nt(Ce().selectThreejs(s))}),nt()()()}if(2&i){const e=t.$implicit;Se(2),de("value",e),Se(2),is(e.label)}}function Moe(i,t){if(1&i){const e=yi();Qe(0,"p-button",31),mn("click",function(){return Ot(e),Nt(Ce().displayExport=!1)}),nt()}}const Doe=function(){return["label"]},Loe=function(){return{width:"50vw"}};let Roe=(()=>{class i{constructor(e,n,r,s,o,l,u,p){this.router=e,this.logger=n,this.graphsService=r,this.clipboardService=s,this.databaseService=o,this.confirmationService=l,this.messageService=u,this.store=p,this.graph=void 0,this.graphs=[],this.displayImport=!1,this.displayExport=!1,this.exportData=[],this.exportDataHtml="",this.Delete="false",this.xml=[],this.graph$=this.store.select(p2),this.graphs$=this.store.select(f2),this.graph$.subscribe(v=>{!v||(this.graph=v)}),this.graphs$.subscribe(v=>{!v||(this.graphs=Ki.map(v,w=>({id:w.id,style:w.style,rules:w.rules,label:w.label,nodes:w.nodes,edges:w.edges})))})}ngOnInit(){let e=this.databaseService.findAllGraphs();this.store.dispatch(pA({graphs:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteGraph(n)},reject:()=>{}})}deleteGraph(e){let n=this.databaseService.deleteGraph(e);this.store.dispatch(pA({graphs:n}))}showImport(e){this.displayImport=!0,this.selectedGraph=e}openNew(e){if(e){this.databaseService.storeGraph({id:e,style:"default",rules:"default",label:e,edges:[],nodes:[]});let n=this.databaseService.findAllGraphs();this.store.dispatch(pA({graphs:n}))}}uploadHandler(e,n){n&&this.graphsService.uploadHandler(e.files[0],n.id,n.id).then(r=>{this.databaseService.storeGraph(r),this.displayImport=!1})}gexf(e){let n=this.graphsService.findOne(e.id+"");this.exportData=this.graphsService.toGexf(n),this.exportDataHtml=this.exportData.join("\n"),this.clipboardService.copyTextToClipboard(this.exportData.join("\n")),this.displayExport=!0}selectCytoscape(e){this.router.navigate(["graphs","cytoscape",e.id])}selectThreejs(e){this.router.navigate(["graphs","threejs",e.id])}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(Jh),Xt(P1),Xt(k1),Xt(Fz),Xt(sA),Xt(fm),Xt(ny))},i.\u0275cmp=_r({type:i,selectors:[["app-graph-selector"]],features:[Ao([fm])],decls:17,vars:17,consts:[[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"modal","header","visible","visibleChange"],["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","baseZIndex","visibleChange"],["pTemplate","footer"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","type","button","pTooltip","Import","tooltipPosition","top","icon","pi pi-cloud-upload",3,"click"],["pButton","","pRipple","","pTooltip","Copy to clipboard","tooltipPosition","top","icon","pi pi-cloud-download",3,"click"],["pButton","","pRipple","","pTooltip","Remove this graph","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph for 3D preview","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"]],template:function(e,n){1&e&&(Qe(0,"div",0)(1,"p-toolbar",1),Xe(2,xoe,5,1,"ng-template",2),Xe(3,Ioe,0,0,"ng-template",3),nt(),Vn(4,"p-toast"),Qe(5,"p-table",4,5),Xe(7,Soe,6,0,"ng-template",6),Xe(8,Eoe,8,0,"ng-template",7),Xe(9,Toe,19,2,"ng-template",8),nt()(),Vn(10,"p-confirmPopup"),Qe(11,"p-dialog",9),mn("visibleChange",function(s){return n.displayImport=s}),Qe(12,"p-fileUpload",10),mn("uploadHandler",function(s){return n.uploadHandler(s,n.selectedGraph)}),nt()(),Qe(13,"p-dialog",11),mn("visibleChange",function(s){return n.displayExport=s}),Qe(14,"pre"),ci(15),nt(),Xe(16,Moe,1,0,"ng-template",12),nt()),2&e&&(Se(5),de("value",n.graphs)("rows",10)("paginator",!0)("globalFilterFields",uo(15,Doe))("rowHover",!0)("showCurrentPageReport",!0),Se(6),CI("header","Import ",null==n.selectedGraph?null:n.selectedGraph.label,""),de("modal",!0)("visible",n.displayImport),Se(1),de("customUpload",!0),Se(1),no(uo(16,Loe)),de("visible",n.displayExport)("baseZIndex",1e4),Se(2),is(n.exportDataHtml))},dependencies:[l_,za,G2,W2,j2,$2,x0,$1,Z1,rv,LA,fC,v4,X2,C0,uC,oy,Y2]}),i})();var Poe=z(5595),koe=z.n(Poe),Ooe=z(3424),Foe=z.n(Ooe),Noe=z(756),Boe=z.n(Noe);const zoe=["myGraph"];function Voe(i,t){if(1&i&&(Qe(0,"pre"),ci(1),nt()),2&i){const e=t.$implicit;Se(1),_c("",e,"\n")}}let Uoe=(()=>{class i{constructor(e,n,r,s){this.http=e,this.logger=n,this.graphsService=r,this.store=s,this.subscription=null,this.graph=new(koe()),this.display=!1,this.xml=[],this.graphs$=this.store.select(f2),this.graphs$.subscribe(o=>{o&&0!==o.length&&(this.graph.clear(),Ki.each(o[0].nodes,u=>{this.graph.addNode(u.id,{x:u.x,y:u.y,label:u.label,color:u.color,size:u.size,uid:u.id})}),Ki.each(o[0].edges,u=>{u.source&&u.target?this.graph.addEdge(u.source,u.target,{label:u.label,type:"arrow",size:5,uid:u.id,source:u.source,target:u.target}):this.logger.info(u)}),new(Foe())(this.graph,{isNodeFixed:(u,p)=>p.highlighted}))})}ngOnInit(){let e=this.graphsService.findAll();this.store.dispatch(pA({graphs:e}))}ngAfterViewInit(){let e=null,n=!1;this.renderer=new(Boe())(this.graph,this.myGraph?.nativeElement,{renderEdgeLabels:!0}),this.renderer.on("downNode",r=>{n=!0,e=r.node,this.graph.setNodeAttribute(e,"highlighted",!0)}),this.renderer.getMouseCaptor().on("mousemovebody",r=>{if(!n||!e||!this.renderer)return;const s=this.renderer.viewportToGraph(r);this.graph.setNodeAttribute(e,"x",s.x),this.graph.setNodeAttribute(e,"y",s.y),r.preventSigmaDefault(),r.original.preventDefault(),r.original.stopPropagation()}),this.renderer.getMouseCaptor().on("mouseup",()=>{e&&this.graph.removeNodeAttribute(e,"highlighted"),n=!1,e=null}),this.renderer.getMouseCaptor().on("mousedown",()=>{this.renderer?.getCustomBBox()||this.renderer?.setCustomBBox(this.renderer.getBBox())})}gexf(e){this.xml=[],this.xml.push('<?xml version="1.0" encoding="UTF-8"?>'),this.xml.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),this.xml.push('<meta lastmodifieddate="2009-03-20">'),this.xml.push("<creator>Gexf.net</creator>"),this.xml.push("<description>A hello world! file</description>"),this.xml.push("</meta>"),this.xml.push(`<graph mode="static" defaultedgetype="directed" style="${e}">`),this.xml.push("<nodes>"),this.graph.forEachNode(n=>{let r=this.graph.getNodeAttribute(n,"uid"),s=this.graph.getNodeAttribute(n,"label"),o=this.graph.getNodeAttribute(n,"x"),l=this.graph.getNodeAttribute(n,"y");this.xml.push(`<node id="${r}" label="${s}" x="${o}" y="${l}" />`)}),this.xml.push("</nodes>"),this.xml.push("<edges>"),this.graph.forEachEdge(n=>{let r=this.graph.getEdgeAttribute(n,"uid"),s=this.graph.getEdgeAttribute(n,"label"),o=this.graph.getEdgeAttribute(n,"source"),l=this.graph.getEdgeAttribute(n,"target");this.xml.push(`<edge id="${r}" source="${o}" target="${l}" label="${s}" />`)}),this.xml.push("</edges>"),this.xml.push("</graph>"),this.xml.push("</gexf>"),this.display=!0}uploadHandler(e){let n=new FileReader;n.addEventListener("loadend",()=>{}),n.readAsText(e.files[0])}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(t1),Xt(Jh),Xt(P1),Xt(ny))},i.\u0275cmp=_r({type:i,selectors:[["app-graph"]],viewQuery:function(e,n){if(1&e&&Tr(zoe,5),2&e){let r;Wi(r=ji())&&(n.myGraph=r.first)}},hostBindings:function(e,n){1&e&&mn("beforeunload",function(s){return n.ngOnDestroy(s)},0,Qn)},decls:6,vars:3,consts:[["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","visibleChange"],[4,"ngFor","ngForOf"],["label","Gexf",3,"onClick"],[1,"sigma-container"],["myGraph",""]],template:function(e,n){1&e&&(Qe(0,"p-fileUpload",0),mn("uploadHandler",function(s){return n.uploadHandler(s)}),nt(),Qe(1,"p-dialog",1),mn("visibleChange",function(s){return n.display=s}),Xe(2,Voe,2,1,"pre",2),nt(),Qe(3,"p-button",3),mn("onClick",function(){return n.gexf("default")}),nt(),Vn(4,"div",4,5)),2&e&&(de("customUpload",!0),Se(1),de("visible",n.display),Se(1),de("ngForOf",n.xml))},dependencies:[$c,$1,Z1,v4],styles:[".sigma-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}"]}),i})();const y4={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Q1;const Hoe=new Uint8Array(16);function Goe(){if(!Q1&&(Q1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Q1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Q1(Hoe)}const ed=[];for(let i=0;i<256;++i)ed.push((i+256).toString(16).slice(1));const b4=function Woe(i,t,e){if(y4.randomUUID&&!t&&!i)return y4.randomUUID();const n=(i=i||{}).random||(i.rng||Goe)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=n[r];return t}return function _4(i,t=0){return(ed[i[t+0]]+ed[i[t+1]]+ed[i[t+2]]+ed[i[t+3]]+"-"+ed[i[t+4]]+ed[i[t+5]]+"-"+ed[i[t+6]]+ed[i[t+7]]+"-"+ed[i[t+8]]+ed[i[t+9]]+"-"+ed[i[t+10]]+ed[i[t+11]]+ed[i[t+12]]+ed[i[t+13]]+ed[i[t+14]]+ed[i[t+15]]).toLowerCase()}(n)};var J1=z(6864);class K2 extends class $oe extends class joe{ready(t){console.debug(`layout ready, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}stop(t){console.debug(`layout stop, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}}{constructor(){super(...arguments),this.zoom=null,this.pan=null,this.animate=!1,this.animationDuration=500,this.animationEasing=void 0,this.animateFilter=(t,e)=>!0}}{constructor(){super(...arguments),this.fit=!0,this.padding=30,this.boundingBox=null,this.avoidOverlap=!0,this.nodeDimensionsIncludeLabels=!1,this.spacingFactor=1.75,this.sort=null,this.transform=(t,e)=>e}}class qoe extends K2{constructor(){super(...arguments),this.name="circle",this.startAngle=1.5*Math.PI,this.sweep=null,this.clockwise=!0}}class Xoe{constructor(){this.name="concentric",this.startAngle=1.5*Math.PI,this.equidistant=!1,this.minNodeSpacing=10,this.boundingBox=null,this.height=null,this.width=null,this.spacingFactor=null}concentric(t){return 0}levelWidth(t){return 0}}class Yoe extends K2{constructor(){super(...arguments),this.name="breadthfirst",this.directed=!1,this.circle=!1,this.maximal=!1,this.grid=!1,this.nodeDimensionsIncludeLabels=!1}}class Koe extends K2{constructor(){super(...arguments),this.name="cose",this.animationThreshold=250,this.refresh=20,this.randomize=!1,this.componentSpacing=40,this.nodeOverlap=4e3,this.nestingFactor=1.2,this.gravity=1,this.numIter=1e3,this.initialTemp=1e3,this.coolingFactor=.99,this.minTemp=1,this.nodeRepulsion=t=>2048,this.idealEdgeLength=t=>32,this.edgeElasticity=t=>32}}const RA=oC("[SysTags List/API] Retrieve Styles Success",{_as:"props",_p:void 0}),C4=oC("[SysTags List/API] Retrieve Style Success",{_as:"props",_p:void 0});let w4=(()=>{class i extends M1{constructor(e,n){super(),this._logger=e,this._storage=n,this.init("styles",this._storage,this._logger)}}return i.\u0275fac=function(e){return new(e||i)(Yn(Jh),Yn(cC))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Zoe=z(926),Qoe=z(1462);let A4=(()=>{class i extends M1{constructor(e,n,r){super(),this._logger=e,this._storage=n,this.base16=r,this.init("rules",this._storage,this._logger)}load(e,n){this.store({id:e,rules:n},r=>{r.rules=n})}ruleFactory(e,n){return this._logger.debug("RULE/FACTORY",e),Ki.map(this.findOne(e)?.rules,r=>({name:r.name,priority:1,conditions:r.conditions,event:r.event,onSuccess:(o,l,u)=>{l.factValue("element").then(p=>{this._logger.debug("SUCCESS",p),n.push({fact:p,ruleResult:u})})},onFailure:(o,l,u)=>{l.factValue("element").then(p=>{this._logger.debug("FAIL",p),n.push({fact:p,ruleResult:u})})}}))}fact(e,n){return new Promise(r=>{e.run(n).then(({events:s})=>{this._logger.debug("RESOLVE",n),r({fact:n,events:s})})})}execute(e,n,r,s){var o=this;return new Promise(l=>{let u=new Zoe.Engine,p=[],v=this.ruleFactory(e,p);u.addOperator("micromatch",(I,T)=>{if(!Ki.isString(I))return!1;let k=!1;return Ki.each(T,W=>{let K=Qoe(W);this._logger.debug(`micromatch: "${I}" "${W}" ${K(I)}`),K(I)&&(k=!0)}),k}),this._logger.debug("RULE/LOAD",v),Ki.each(v,I=>{this._logger.debug("RULE",I),u.addRule(I)}),this._logger.debug("FACTS",n);let w=Ki.map(n,function(){var I=tv(function*(T){return yield o.fact(u,T)});return function(T){return I.apply(this,arguments)}}());Promise.all(w).then(I=>{Ki.map(I,k=>({result:k}));let T=Ki.map(v,k=>({data:{id:k.name,fail:Ki.filter(Ki.map(p,W=>({name:W.ruleResult.name,result:W.ruleResult.result})),W=>W.name===k.name&&0==W.result),success:Ki.filter(Ki.map(p,W=>({name:W.ruleResult.name,result:W.ruleResult.result})),W=>W.name===k.name&&1==W.result)},children:Ki.filter(Ki.map(p,W=>({data:{uid:this.base16.encode(W.fact.data.id),id:W.fact.data.id,label:W.fact.data.label,tag:W.fact.data.tag,rule:W.ruleResult.name,valid:W.ruleResult.result},children:[]})),W=>W.data.rule===k.name&&(W.data.valid===r||W.data.valid===s))}));l({success:Ki.filter(p,k=>k.ruleResult.result),failure:Ki.filter(p,k=>!k.ruleResult.result),treenodes:T})})})}}return i.\u0275fac=function(e){return new(e||i)(Yn(Jh),Yn(cC),Yn(v2))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();new Tz.Parser;let x4=(()=>{class i extends M1{constructor(e,n){super(),this._logger=e,this._storage=n,this.init("preferences",this._storage,this._logger),this.findOne("default")||this.store({id:"default",full:!1,grid:!1,debug:!1,applyRules:!1,info:!1,maxWidth:16384,maxHeight:16384},r=>{})}}return i.\u0275fac=function(e){return new(e||i)(Yn(Jh),Yn(cC))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const eae=["sublist"],tae=["menuitem"],nae=function(i){return{"p-hidden":i}};function iae(i,t){if(1&i&&Vn(0,"li",5,6),2&i){const e=Ce().$implicit;de("ngClass",bi(1,nae,!1===e.visible))}}function rae(i,t){if(1&i&&Vn(0,"span",17),2&i){const e=Ce(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function sae(i,t){if(1&i&&(Qe(0,"span",18),ci(1),nt()),2&i){const e=Ce(3).$implicit;Se(1),is(e.label)}}function oae(i,t){1&i&&Vn(0,"span",19),2&i&&de("innerHTML",Ce(3).$implicit.label,Aa)}function aae(i,t){if(1&i&&(Qe(0,"span",20),ci(1),nt()),2&i){const e=Ce(3).$implicit;de("ngClass",e.badgeStyleClass),Se(1),is(e.badge)}}function lae(i,t){1&i&&Vn(0,"span",21)}const I4=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function cae(i,t){if(1&i){const e=yi();Qe(0,"a",11),mn("click",function(r){Ot(e),Ce();const s=ao(1),o=Ce(),l=o.$implicit,u=o.index,p=Ce();return Nt(p.onItemClick(r,l,s,p.getKey(u)))}),Xe(1,rae,1,2,"span",12),Xe(2,sae,2,1,"span",13),Xe(3,oae,1,1,"ng-template",null,14,sc),Xe(5,aae,2,2,"span",15),Xe(6,lae,1,0,"span",16),nt()}if(2&i){const e=ao(4),n=Ce(2),r=n.$implicit,s=n.index,o=Ce();de("target",r.target)("ngClass",bi(13,I4,r.disabled)),vr("href",r.url?r.url:null,Xh)("title",r.title)("id",r.id)("tabindex",r.disabled?null:"0")("aria-haspopup",null!=o.item.items)("aria-expanded",o.isActive(o.getKey(s))),Se(1),de("ngIf",r.icon),Se(1),de("ngIf",!1!==r.escape)("ngIfElse",e),Se(3),de("ngIf",r.badge),Se(1),de("ngIf",r.items)}}function uae(i,t){if(1&i&&Vn(0,"span",17),2&i){const e=Ce(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function hae(i,t){if(1&i&&(Qe(0,"span",18),ci(1),nt()),2&i){const e=Ce(3).$implicit;Se(1),is(e.label)}}function dae(i,t){1&i&&Vn(0,"span",19),2&i&&de("innerHTML",Ce(3).$implicit.label,Aa)}function fae(i,t){if(1&i&&(Qe(0,"span",20),ci(1),nt()),2&i){const e=Ce(3).$implicit;de("ngClass",e.badgeStyleClass),Se(1),is(e.badge)}}function pae(i,t){1&i&&Vn(0,"span",21)}const gae=function(){return{exact:!1}};function mae(i,t){if(1&i){const e=yi();Qe(0,"a",22),mn("click",function(r){Ot(e),Ce();const s=ao(1),o=Ce(),l=o.$implicit,u=o.index,p=Ce();return Nt(p.onItemClick(r,l,s,p.getKey(u)))}),Xe(1,uae,1,2,"span",12),Xe(2,hae,2,1,"span",13),Xe(3,dae,1,1,"ng-template",null,23,sc),Xe(5,fae,2,2,"span",15),Xe(6,pae,1,0,"span",16),nt()}if(2&i){const e=ao(4),n=Ce(2).$implicit;de("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||uo(20,gae))("target",n.target)("ngClass",bi(21,I4,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),vr("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),Se(1),de("ngIf",n.icon),Se(1),de("ngIf",!1!==n.escape)("ngIfElse",e),Se(3),de("ngIf",n.badge),Se(1),de("ngIf",n.items)}}function vae(i,t){if(1&i){const e=yi();Qe(0,"p-contextMenuSub",24),mn("leafClick",function(){return Ot(e),Nt(Ce(3).onLeafClick())}),nt()}if(2&i){const e=Ce(2),n=e.index,r=e.$implicit;de("parentItemKey",Ce().getKey(n))("item",r)}}const yae=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function _ae(i,t){if(1&i){const e=yi();Qe(0,"li",7,6),mn("mouseenter",function(r){Ot(e);const s=Ce(),o=s.$implicit,l=s.index,u=Ce();return Nt(u.onItemMouseEnter(r,o,u.getKey(l)))})("mouseleave",function(r){Ot(e);const s=Ce().$implicit;return Nt(Ce().onItemMouseLeave(r,s))}),Xe(2,cae,7,15,"a",8),Xe(3,mae,7,23,"a",9),Xe(4,vae,1,2,"p-contextMenuSub",10),nt()}if(2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce();Fr(n.styleClass),de("ngClass",as(9,yae,s.isActive(s.getKey(r)),!1===n.visible))("ngStyle",n.style)("tooltipOptions",n.tooltipOptions),vr("data-ik",s.getKey(r)),Se(2),de("ngIf",!n.routerLink),Se(1),de("ngIf",n.routerLink),Se(1),de("ngIf",n.items)}}function bae(i,t){if(1&i&&(Xe(0,iae,2,3,"li",3),Xe(1,_ae,5,12,"li",4)),2&i){const e=t.$implicit;de("ngIf",e.separator),Se(1),de("ngIf",!e.separator)}}const Cae=function(i){return{"p-submenu-list":i}},wae=["container"];let Aae=(()=>{class i{constructor(e){this.leafClick=new Bn,this.contextMenu=e}ngOnInit(){this.activeItemKeyChangeSubscription=this.contextMenu.contextMenuService.activeItemKeyChange$.pipe(function Joe(i){return st((t,e)=>{pl(i).subscribe(gt(e,()=>e.complete(),ie)),!e.closed&&t.subscribe(e)})}(this.contextMenu.ngDestroy$)).subscribe(e=>{this.activeItemKey=e,this.isActive(this.parentItemKey)&&Bt.hasClass(this.sublistViewChild.nativeElement,"p-submenu-list-active")&&this.contextMenu.positionSubmenu(this.sublistViewChild.nativeElement),this.contextMenu.cd.markForCheck()})}onItemMouseEnter(e,n,r){if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),n.disabled)this.activeItemKey=null;else{if(n.items){let s=Bt.findSingle(e.currentTarget,".p-submenu-list");Bt.addClass(s,"p-submenu-list-active")}this.contextMenu.contextMenuService.changeKey(r)}}onItemMouseLeave(e,n){n.disabled||this.contextMenu.el.nativeElement.contains(e.toElement)&&(n.items&&this.contextMenu.removeActiveFromSubLists(e.currentTarget),this.root||this.contextMenu.contextMenuService.changeKey(this.parentItemKey))}onItemClick(e,n,r,s){if(n.disabled)e.preventDefault();else{if(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items){let o=Bt.findSingle(r,".p-submenu-list");o&&(this.isActive(s)&&Bt.hasClass(o,"p-submenu-list-active")?this.contextMenu.removeActiveFromSubLists(r):Bt.addClass(o,"p-submenu-list-active"),this.contextMenu.contextMenuService.changeKey(s))}n.items||this.onLeafClick()}}onLeafClick(){this.root&&this.contextMenu.hide(),this.leafClick.emit()}getKey(e){return this.root?String(e):this.parentItemKey+"_"+e}isActive(e){return this.activeItemKey&&(this.activeItemKey.startsWith(e+"_")||this.activeItemKey===e)}}return i.\u0275fac=function(e){return new(e||i)(Xt(hs(()=>S4)))},i.\u0275cmp=_r({type:i,selectors:[["p-contextMenuSub"]],viewQuery:function(e,n){if(1&e&&(Tr(eae,5),Tr(tae,5)),2&e){let r;Wi(r=ji())&&(n.sublistViewChild=r.first),Wi(r=ji())&&(n.menuitemViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",parentItemKey:"parentItemKey"},outputs:{leafClick:"leafClick"},decls:3,vars:4,consts:[[3,"ngClass"],["sublist",""],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["pTooltip","","role","none",3,"ngClass","ngStyle","class","tooltipOptions","mouseenter","mouseleave",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["menuitem",""],["pTooltip","","role","none",3,"ngClass","ngStyle","tooltipOptions","mouseenter","mouseleave"],["pRipple","",3,"target","ngClass","click",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click",4,"ngIf"],[3,"parentItemKey","item","leafClick",4,"ngIf"],["pRipple","",3,"target","ngClass","click"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi pi-angle-right",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi","pi-angle-right"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click"],["htmlRouteLabel",""],[3,"parentItemKey","item","leafClick"]],template:function(e,n){1&e&&(Qe(0,"ul",0,1),Xe(2,bae,2,2,"ng-template",2),nt()),2&e&&(de("ngClass",bi(2,Cae,!n.root)),Se(2),de("ngForOf",n.root?n.item:n.item.items))},dependencies:[io,$c,ho,Ro,rC,$D,Du,rv,i],encapsulation:2}),i})(),S4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.contextMenuService=o,this.config=l,this.autoZIndex=!0,this.baseZIndex=0,this.triggerEvent="contextmenu",this.onShow=new Bn,this.onHide=new Bn,this.ngDestroy$=new Ge,this.preventDocumentDefault=!1}ngAfterViewInit(){this.global?this.triggerEventListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document",this.triggerEvent,n=>{this.show(n),n.preventDefault()}):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,this.triggerEvent,e=>{this.show(e),e.preventDefault()})),this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):Bt.appendChild(this.containerViewChild.nativeElement,this.appendTo))}show(e){this.clearActiveItem(),this.position(e),this.moveOnTop(),this.containerViewChild.nativeElement.style.display="block",this.preventDocumentDefault=!0,Bt.fadeIn(this.containerViewChild.nativeElement,250),this.bindGlobalListeners(),e&&e.preventDefault(),this.onShow.emit()}hide(){this.containerViewChild.nativeElement.style.display="none",this.autoZIndex&&Ll.clear(this.containerViewChild.nativeElement),this.clearActiveItem(),this.unbindGlobalListeners(),this.onHide.emit()}moveOnTop(){this.autoZIndex&&this.containerViewChild&&"block"!==this.containerViewChild.nativeElement.style.display&&Ll.set("menu",this.containerViewChild.nativeElement,this.baseZIndex+this.config.zIndex.menu)}toggle(e){this.containerViewChild.nativeElement.offsetParent?this.hide():this.show(e)}position(e){if(e){let n=e.pageX+1,r=e.pageY+1,s=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetWidth:Bt.getHiddenElementOuterWidth(this.containerViewChild.nativeElement),o=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetHeight:Bt.getHiddenElementOuterHeight(this.containerViewChild.nativeElement),l=Bt.getViewport();n+s-document.body.scrollLeft>l.width&&(n-=s),r+o-document.body.scrollTop>l.height&&(r-=o),n<document.body.scrollLeft&&(n=document.body.scrollLeft),r<document.body.scrollTop&&(r=document.body.scrollTop),this.containerViewChild.nativeElement.style.left=n+"px",this.containerViewChild.nativeElement.style.top=r+"px"}}positionSubmenu(e){let n=e.parentElement.parentElement,r=Bt.getViewport(),s=e.offsetParent?e.offsetWidth:Bt.getHiddenElementOuterWidth(e),o=e.offsetHeight?e.offsetHeight:Bt.getHiddenElementOuterHeight(e),l=Bt.getOuterWidth(n.children[0]),u=Bt.getOuterHeight(n.children[0]),p=Bt.getOffset(n.parentElement);e.style.zIndex=++Bt.zindex,parseInt(p.top)+u+o>r.height-Bt.calculateScrollbarHeight()?(e.style.removeProperty("top"),e.style.bottom="0px"):(e.style.removeProperty("bottom"),e.style.top="0px"),e.style.left=parseInt(p.left)+l+s>r.width-Bt.calculateScrollbarWidth()?-s+"px":l+"px"}isItemMatched(e){return Bt.hasClass(e,"p-menuitem")&&!Bt.hasClass(e.children[0],"p-disabled")}findNextItem(e,n){let r=e.nextElementSibling;if(r)return this.isItemMatched(r)?r:this.findNextItem(r,n);{let s=e.parentElement.children[0];return this.isItemMatched(s)?s:n?null:this.findNextItem(s,!0)}}findPrevItem(e,n){let r=e.previousElementSibling;if(r)return this.isItemMatched(r)?r:this.findPrevItem(r,n);{let s=e.parentElement.children[e.parentElement.children.length-1];return this.isItemMatched(s)?s:n?null:this.findPrevItem(s,!0)}}getActiveItem(){let e=this.contextMenuService.activeItemKey;return null==e?null:Bt.findSingle(this.containerViewChild.nativeElement,'.p-menuitem[data-ik="'+e+'"]')}clearActiveItem(){this.contextMenuService.activeItemKey&&(this.removeActiveFromSubLists(this.containerViewChild.nativeElement),this.contextMenuService.reset())}removeActiveFromSubLists(e){let n=Bt.find(e,".p-submenu-list-active");for(let r of n)Bt.removeClass(r,"p-submenu-list-active")}removeActiveFromSublist(e){e&&Bt.findSingle(e,".p-submenu-list")&&Bt.hasClass(e,"p-submenu-list-active")&&Bt.removeClass(e,"p-submenu-list-active")}bindGlobalListeners(){if(!this.documentClickListener){const e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!n.ctrlKey&&2!==n.button&&this.hide()}),this.documentTriggerListener=this.renderer.listen(e,this.triggerEvent,n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!this.preventDocumentDefault&&this.hide(),this.preventDocumentDefault=!1})}this.zone.runOutsideAngular(()=>{this.windowResizeListener||(this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener))}),this.documentKeydownListener||(this.documentKeydownListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{let r=this.getActiveItem();switch(n.key){case"ArrowDown":if(r)this.removeActiveFromSublist(r),r=this.findNextItem(r);else{let s=Bt.findSingle(this.containerViewChild.nativeElement,".p-menuitem-link").parentElement;r=this.isItemMatched(s)?s:this.findNextItem(s)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowUp":if(r)this.removeActiveFromSublist(r),r=this.findPrevItem(r);else{let s=Bt.findSingle(this.containerViewChild.nativeElement,"ul"),o=s.children[s.children.length-1];r=this.isItemMatched(o)?o:this.findPrevItem(o)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowRight":if(r){let s=Bt.findSingle(r,".p-submenu-list");s&&(Bt.addClass(s,"p-submenu-list-active"),r=Bt.findSingle(s,".p-menuitem-link:not(.p-disabled)").parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"ArrowLeft":if(r){let s=r.parentElement;s&&Bt.hasClass(s,"p-submenu-list-active")&&(Bt.removeClass(s,"p-submenu-list-active"),r=s.parentElement.parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"Escape":this.hide(),n.preventDefault();break;case"Enter":r&&this.handleItemClick(n,this.findModelItemFromKey(this.contextMenuService.activeItemKey),r),n.preventDefault()}}))}findModelItemFromKey(e){return null!=e&&this.model?e.split("_").reduce((r,s)=>r?r.items[s]:this.model[s],null):null}handleItemClick(e,n,r){if(n&&!n.disabled){if(n.command&&n.command({originalEvent:e,item:n}),n.items){let s=Bt.findSingle(r,".p-submenu-list");s&&(Bt.hasClass(s,"p-submenu-list-active")?this.removeActiveFromSubLists(r):(Bt.addClass(s,"p-submenu-list-active"),this.positionSubmenu(s)))}n.items||this.hide()}}unbindGlobalListeners(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null),this.documentTriggerListener&&(this.documentTriggerListener(),this.documentTriggerListener=null),this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null),this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}onWindowResize(e){this.containerViewChild.nativeElement.offsetParent&&this.hide()}isOutsideClicked(e){return!(this.containerViewChild.nativeElement.isSameNode(e.target)||this.containerViewChild.nativeElement.contains(e.target))}ngOnDestroy(){this.unbindGlobalListeners(),this.triggerEventListener&&this.triggerEventListener(),this.containerViewChild&&this.autoZIndex&&Ll.clear(this.containerViewChild.nativeElement),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement),this.ngDestroy$.next(!0),this.ngDestroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(d),Xt(xo),Xt(Vo),Xt(UB),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-contextMenu"]],viewQuery:function(e,n){if(1&e&&Tr(wae,5),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",global:"global",target:"target",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",triggerEvent:"triggerEvent"},outputs:{onShow:"onShow",onHide:"onHide"},decls:3,vars:6,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"item","root"]],template:function(e,n){1&e&&(Qe(0,"div",0,1),Vn(2,"p-contextMenuSub",2),nt()),2&e&&(Fr(n.styleClass),de("ngClass","p-contextmenu p-component")("ngStyle",n.style),Se(2),de("item",n.model)("root",!0))},dependencies:[io,Ro,Aae],styles:[".p-contextmenu{position:absolute;display:none}.p-contextmenu ul{margin:0;padding:0;list-style:none}.p-contextmenu .p-submenu-list{position:absolute;min-width:100%;z-index:1;display:none}.p-contextmenu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-contextmenu .p-menuitem-text{line-height:1}.p-contextmenu .p-menuitem{position:relative}.p-contextmenu .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-contextmenu .p-menuitem-active>p-contextmenusub>.p-submenu-list.p-submenu-list-active{display:block!important}\n"],encapsulation:2,changeDetection:0}),i})(),xae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({providers:[UB],imports:[Fs,s_,Xc,sv,s_,sv]}),i})(),Iae=(()=>{class i{constructor(e,n,r,s){this.el=e,this.ngModel=n,this.control=r,this.cd=s,this.onResize=new Bn}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(e){this.autoResize&&this.resize(e)}onBlur(e){this.autoResize&&this.resize(e)}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(oy,8),Xt(iv,8),Xt(xo))},i.\u0275dir=Yr({type:i,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(e,n){1&e&&mn("input",function(s){return n.onInput(s)})("focus",function(s){return n.onFocus(s)})("blur",function(s){return n.onBlur(s)}),2&e&&Mp("p-filled",n.filled)("p-inputtextarea-resizable",n.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),i})(),Sae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();const Eae=["container"];function Tae(i,t){1&i&&Ni(0)}function Mae(i,t){if(1&i){const e=yi();Qe(0,"div",5),mn("mousedown",function(r){Ot(e);const s=Ce().index;return Nt(Ce().onGutterMouseDown(r,s))})("touchstart",function(r){Ot(e);const s=Ce().index;return Nt(Ce().onGutterTouchStart(r,s))}),Vn(1,"div",6),nt()}2&i&&de("ngStyle",Ce(2).gutterStyle())}function Dae(i,t){if(1&i&&(Qe(0,"div",0),Xe(1,Tae,1,0,"ng-container",3),nt(),Xe(2,Mae,2,1,"div",4)),2&i){const e=t.$implicit,n=t.index,r=Ce();Fr(r.panelStyleClass),de("ngClass",r.panelContainerClass())("ngStyle",r.panelStyle),Se(1),de("ngTemplateOutlet",e),Se(1),de("ngIf",n!==r.panels.length-1)}}let E4=(()=>{class i{constructor(e,n){this.cd=e,this.el=n,this.stateStorage="session",this.stateKey=null,this.layout="horizontal",this.gutterSize=4,this.minSizes=[],this.onResizeEnd=new Bn,this.onResizeStart=new Bn,this.nested=!1,this.panels=[],this.dragging=!1,this.mouseMoveListener=null,this.mouseUpListener=null,this.touchMoveListener=null,this.touchEndListener=null,this.size=null,this.gutterElement=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.nextPanelSize=null,this.prevPanelSize=null,this._panelSizes=[],this.prevPanelIndex=null}get panelSizes(){return this._panelSizes}set panelSizes(e){if(this._panelSizes=e,this.el&&this.el.nativeElement&&this.panels.length>0){let n=[...this.el.nativeElement.children[0].children].filter(s=>Bt.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"})}}ngOnInit(){this.nested=this.isNested()}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.panels.push(e.template)})}ngAfterViewInit(){if(this.panels&&this.panels.length){let e=!1;if(this.isStateful()&&(e=this.restoreState()),!e){let n=[...this.el.nativeElement.children[0].children].filter(s=>Bt.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),this._panelSizes=r}}}resizeStart(e,n){this.gutterElement=e.currentTarget,this.size=this.horizontal()?Bt.getWidth(this.containerViewChild.nativeElement):Bt.getHeight(this.containerViewChild.nativeElement),this.dragging=!0,this.startPos=this.horizontal()?e.pageX||e.changedTouches[0].pageX:e.pageY||e.changedTouches[0].pageY,this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,this.prevPanelSize=100*(this.horizontal()?Bt.getOuterWidth(this.prevPanelElement,!0):Bt.getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal()?Bt.getOuterWidth(this.nextPanelElement,!0):Bt.getOuterHeight(this.nextPanelElement,!0))/this.size,this.prevPanelIndex=n,Bt.addClass(this.gutterElement,"p-splitter-gutter-resizing"),Bt.addClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.onResizeStart.emit({originalEvent:e,sizes:this._panelSizes})}onResize(e){let n;n=this.horizontal()?100*e.pageX/this.size-100*this.startPos/this.size:100*e.pageY/this.size-100*this.startPos/this.size;let r=this.prevPanelSize+n,s=this.nextPanelSize-n;this.validateResize(r,s)&&(this.prevPanelElement.style.flexBasis="calc("+r+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+s+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this._panelSizes[this.prevPanelIndex]=r,this._panelSizes[this.prevPanelIndex+1]=s)}resizeEnd(e){this.isStateful()&&this.saveState(),this.onResizeEnd.emit({originalEvent:e,sizes:this._panelSizes}),Bt.removeClass(this.gutterElement,"p-splitter-gutter-resizing"),Bt.removeClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.clear()}onGutterMouseDown(e,n){this.resizeStart(e,n),this.bindMouseListeners()}onGutterTouchStart(e,n){e.cancelable&&(this.resizeStart(e,n),this.bindTouchListeners(),e.preventDefault())}onGutterTouchEnd(e){this.resizeEnd(e),this.unbindTouchListeners(),e.cancelable&&e.preventDefault()}validateResize(e,n){return!(this.minSizes.length>=1&&this.minSizes[0]&&this.minSizes[0]>e||this.minSizes.length>1&&this.minSizes[1]&&this.minSizes[1]>n)}bindMouseListeners(){this.mouseMoveListener||(this.mouseMoveListener=e=>this.onResize(e),document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=e=>{this.resizeEnd(e),this.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))}bindTouchListeners(){this.touchMoveListener||(this.touchMoveListener=e=>this.onResize(e.changedTouches[0]),document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=e=>{this.resizeEnd(e),this.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))}unbindMouseListeners(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)}unbindTouchListeners(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)}clear(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null}isNested(){if(this.el.nativeElement){let e=this.el.nativeElement.parentElement;for(;e&&!Bt.hasClass(e,"p-splitter");)e=e.parentElement;return null!==e}return!1}isStateful(){return null!=this.stateKey}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}saveState(){this.getStorage().setItem(this.stateKey,JSON.stringify(this._panelSizes))}restoreState(){const n=this.getStorage().getItem(this.stateKey);return!!n&&(this._panelSizes=JSON.parse(n),[...this.containerViewChild.nativeElement.children].filter(s=>Bt.hasClass(s,"p-splitter-panel")).forEach((s,o)=>{s.style.flexBasis="calc("+this._panelSizes[o]+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),!0)}containerClass(){return{"p-splitter p-component":!0,"p-splitter-horizontal":"horizontal"===this.layout,"p-splitter-vertical":"vertical"===this.layout}}panelContainerClass(){return{"p-splitter-panel":!0,"p-splitter-panel-nested":!0}}gutterStyle(){return this.horizontal()?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}}horizontal(){return"horizontal"===this.layout}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo),Xt(Zn))},i.\u0275cmp=_r({type:i,selectors:[["p-splitter"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&Tr(Eae,5),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(e,n){2&e&&Mp("p-splitter-panel-nested",n.nested)},inputs:{styleClass:"styleClass",panelStyleClass:"panelStyleClass",style:"style",panelStyle:"panelStyle",stateStorage:"stateStorage",stateKey:"stateKey",layout:"layout",gutterSize:"gutterSize",minSizes:"minSizes",panelSizes:"panelSizes"},outputs:{onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],["ngFor","",3,"ngForOf"],[4,"ngTemplateOutlet"],["class","p-splitter-gutter",3,"ngStyle","mousedown","touchstart",4,"ngIf"],[1,"p-splitter-gutter",3,"ngStyle","mousedown","touchstart"],[1,"p-splitter-gutter-handle"]],template:function(e,n){1&e&&(Qe(0,"div",0,1),Xe(2,Dae,3,6,"ng-template",2),nt()),2&e&&(Fr(n.styleClass),de("ngClass",n.containerClass())("ngStyle",n.style),Se(2),de("ngForOf",n.panels))},dependencies:[io,$c,ho,el,Ro],styles:[".p-splitter{display:flex;flex-wrap:nowrap}.p-splitter-vertical{flex-direction:column}.p-splitter-panel{flex-grow:1}.p-splitter-panel-nested{display:flex}.p-splitter-panel p-splitter{flex-grow:1}.p-splitter-panel .p-splitter{flex-grow:1;border:0 none}.p-splitter-gutter{flex-grow:0;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:col-resize}.p-splitter-horizontal.p-splitter-resizing{cursor:col-resize;-webkit-user-select:none;user-select:none}.p-splitter-horizontal>.p-splitter-gutter>.p-splitter-gutter-handle{height:24px;width:100%}.p-splitter-horizontal>.p-splitter-gutter{cursor:col-resize}.p-splitter-vertical.p-splitter-resizing{cursor:row-resize;-webkit-user-select:none;user-select:none}.p-splitter-vertical>.p-splitter-gutter{cursor:row-resize}.p-splitter-vertical>.p-splitter-gutter>.p-splitter-gutter-handle{width:24px;height:100%}\n"],encapsulation:2,changeDetection:0}),i})(),Lae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa]}),i})();function Rae(i,t){1&i&&Ni(0)}function Pae(i,t){if(1&i&&(Ur(0),Xe(1,Rae,1,0,"ng-container",3),Hr()),2&i){const e=Ce(2);Se(1),de("ngTemplateOutlet",e.contentTemplate)}}function kae(i,t){if(1&i&&(Qe(0,"div",1),su(1),Xe(2,Pae,2,1,"ng-container",2),nt()),2&i){const e=Ce();de("hidden",!e.selected),vr("id",e.id)("aria-hidden",!e.selected)("aria-labelledby",e.id+"-label"),Se(2),de("ngIf",e.contentTemplate&&(e.cache?e.loaded:e.selected))}}const T4=["*"],Oae=["content"],Fae=["navbar"],Nae=["prevBtn"],Bae=["nextBtn"],zae=["inkbar"];function Vae(i,t){if(1&i){const e=yi();Qe(0,"button",12,13),mn("click",function(){return Ot(e),Nt(Ce().navBackward())}),Vn(2,"span",14),nt()}}function Uae(i,t){1&i&&Vn(0,"span",24),2&i&&de("ngClass",Ce(3).$implicit.leftIcon)}function Hae(i,t){1&i&&Vn(0,"span",25),2&i&&de("ngClass",Ce(3).$implicit.rightIcon)}function Gae(i,t){if(1&i&&(Ur(0),Xe(1,Uae,1,1,"span",21),Qe(2,"span",22),ci(3),nt(),Xe(4,Hae,1,1,"span",23),Hr()),2&i){const e=Ce(2).$implicit;Se(1),de("ngIf",e.leftIcon),Se(2),is(e.header),Se(1),de("ngIf",e.rightIcon)}}function Wae(i,t){1&i&&Ni(0)}function jae(i,t){if(1&i){const e=yi();Qe(0,"span",26),mn("click",function(r){Ot(e);const s=Ce(2).$implicit;return Nt(Ce().close(r,s))}),nt()}}const $ae=function(i,t){return{"p-highlight":i,"p-disabled":t}};function qae(i,t){if(1&i){const e=yi();Qe(0,"li",16)(1,"a",17),mn("click",function(r){Ot(e);const s=Ce().$implicit;return Nt(Ce().open(r,s))})("keydown.enter",function(r){Ot(e);const s=Ce().$implicit;return Nt(Ce().open(r,s))}),Xe(2,Gae,5,3,"ng-container",18),Xe(3,Wae,1,0,"ng-container",19),Xe(4,jae,1,0,"span",20),nt()()}if(2&i){const e=Ce().$implicit;Fr(e.headerStyleClass),de("ngClass",as(16,$ae,e.selected,e.disabled))("ngStyle",e.headerStyle),Se(1),de("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),vr("id",e.id+"-label")("aria-selected",e.selected)("aria-controls",e.id)("aria-selected",e.selected)("tabindex",e.disabled?null:"0"),Se(1),de("ngIf",!e.headerTemplate),Se(1),de("ngTemplateOutlet",e.headerTemplate),Se(1),de("ngIf",e.closable)}}function Xae(i,t){1&i&&Xe(0,qae,5,19,"li",15),2&i&&de("ngIf",!t.$implicit.closed)}function Yae(i,t){if(1&i){const e=yi();Qe(0,"button",27,28),mn("click",function(){return Ot(e),Nt(Ce().navForward())}),Vn(2,"span",29),nt()}}const Kae=function(i){return{"p-tabview p-component":!0,"p-tabview-scrollable":i}};let Zae=0,M4=(()=>{class i{constructor(e,n,r){this.viewContainer=n,this.cd=r,this.cache=!0,this.tooltipPosition="top",this.tooltipPositionStyle="absolute",this.id="p-tabpanel-"+Zae++,this.tabView=e}ngAfterContentInit(){this.templates.forEach(e=>{"header"===e.getType()?this.headerTemplate=e.template:this.contentTemplate=e.template})}get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||this.cd.detectChanges(),e&&(this.loaded=!0)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.tabView.cd.markForCheck()}get header(){return this._header}set header(e){this._header=e,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(e){this._leftIcon=e,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(e){this._rightIcon=e,this.tabView.cd.markForCheck()}ngOnDestroy(){this.view=null}}return i.\u0275fac=function(e){return new(e||i)(Xt(hs(()=>D4)),Xt(dg),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-tabPanel"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:"cache",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},ngContentSelectors:T4,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(e,n){1&e&&(Bf(),Xe(0,kae,3,5,"div",0)),2&e&&de("ngIf",!n.closed)},dependencies:[ho,el],encapsulation:2}),i})(),D4=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.orientation="top",this.onChange=new Bn,this.onClose=new Bn,this.activeIndexChange=new Bn,this.backwardIsDisabled=!0,this.forwardIsDisabled=!1}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(e=>{this.initTabs()})}ngAfterViewChecked(){this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe()}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}open(e,n){if(n.disabled)e&&e.preventDefault();else{if(!n.selected){let r=this.findSelectedTab();r&&(r.selected=!1),this.tabChanged=!0,n.selected=!0;let s=this.findTabIndex(n);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(s),this.onChange.emit({originalEvent:e,index:s}),this.updateScrollBar(s)}e&&e.preventDefault()}}close(e,n){this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(n),close:()=>{this.closeTab(n)}}):(this.closeTab(n),this.onClose.emit({originalEvent:e,index:this.findTabIndex(n)})),e.stopPropagation()}closeTab(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(let n=0;n<this.tabs.length;n++){let r=this.tabs[n];if(!r.closed&&!e.disabled){r.selected=!0;break}}}e.closed=!0}}findSelectedTab(){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}findTabIndex(e){let n=-1;for(let r=0;r<this.tabs.length;r++)if(this.tabs[r]==e){n=r;break}return n}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(e))}updateInkBar(){if(this.navbar){const e=Bt.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!e)return;this.inkbar.nativeElement.style.width=Bt.getWidth(e)+"px",this.inkbar.nativeElement.style.left=Bt.getOffset(e).left-Bt.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(e){this.navbar.nativeElement.children[e].scrollIntoView({block:"nearest"})}updateButtonState(){const e=this.content.nativeElement,{scrollLeft:n,scrollWidth:r}=e,s=Bt.getWidth(e);this.backwardIsDisabled=0===n,this.forwardIsDisabled=parseInt(n)===r-s}onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((e,n)=>n?e+Bt.getWidth(n):e,0)}navBackward(){const e=this.content.nativeElement,n=Bt.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft-n;e.scrollLeft=r<=0?0:r}navForward(){const e=this.content.nativeElement,n=Bt.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft+n,s=e.scrollWidth-n;e.scrollLeft=r>=s?s:r}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-tabView"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,M4,4),2&e){let s;Wi(s=ji())&&(n.tabPanels=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Oae,5),Tr(Fae,5),Tr(Nae,5),Tr(Bae,5),Tr(zae,5)),2&e){let r;Wi(r=ji())&&(n.content=r.first),Wi(r=ji())&&(n.navbar=r.first),Wi(r=ji())&&(n.prevBtn=r.first),Wi(r=ji())&&(n.nextBtn=r.first),Wi(r=ji())&&(n.inkbar=r.first)}},hostAttrs:[1,"p-element"],inputs:{orientation:"orientation",style:"style",styleClass:"styleClass",controlClose:"controlClose",scrollable:"scrollable",activeIndex:"activeIndex"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:T4,decls:13,vars:9,consts:[[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["content",""],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],["prevBtn",""],[1,"pi","pi-chevron-left"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown.enter"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tabview-close pi pi-times",3,"click",4,"ngIf"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-close","pi","pi-times",3,"click"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"],["nextBtn",""],[1,"pi","pi-chevron-right"]],template:function(e,n){1&e&&(Bf(),Qe(0,"div",0)(1,"div",1),Xe(2,Vae,3,0,"button",2),Qe(3,"div",3,4),mn("scroll",function(s){return n.onScroll(s)}),Qe(5,"ul",5,6),Xe(7,Xae,1,1,"ng-template",7),Vn(8,"li",8,9),nt()(),Xe(10,Yae,3,0,"button",10),nt(),Qe(11,"div",11),su(12),nt()()),2&e&&(Fr(n.styleClass),de("ngClass",bi(7,Kae,n.scrollable))("ngStyle",n.style),Se(2),de("ngIf",n.scrollable&&!n.backwardIsDisabled),Se(5),de("ngForOf",n.tabs),Se(3),de("ngIf",n.scrollable&&!n.forwardIsDisabled))},dependencies:[io,$c,ho,el,Ro,rv,Du],styles:[".p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:flex;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Qae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa,sv,Xc,xa]}),i})();const L4=function(i){return{"p-treenode-droppoint-active":i}};function Jae(i,t){if(1&i){const e=yi();Qe(0,"li",4),mn("drop",function(r){return Ot(e),Nt(Ce(2).onDropPoint(r,-1))})("dragover",function(r){return Ot(e),Nt(Ce(2).onDropPointDragOver(r))})("dragenter",function(r){return Ot(e),Nt(Ce(2).onDropPointDragEnter(r,-1))})("dragleave",function(r){return Ot(e),Nt(Ce(2).onDropPointDragLeave(r))}),nt()}if(2&i){const e=Ce(2);de("ngClass",bi(1,L4,e.draghoverPrev))}}const ele=function(i){return{"p-checkbox-disabled":i}},tle=function(i,t){return{"p-highlight":i,"p-indeterminate":t}},nle=function(i,t){return{"pi-check":i,"pi-minus":t}};function ile(i,t){if(1&i&&(Qe(0,"div",13)(1,"div",14),Vn(2,"span",15),nt()()),2&i){const e=Ce(3);de("ngClass",bi(4,ele,!1===e.node.selectable)),vr("aria-checked",e.isSelected()),Se(1),de("ngClass",as(6,tle,e.isSelected(),e.node.partialSelected)),Se(1),de("ngClass",as(9,nle,e.isSelected(),e.node.partialSelected))}}function rle(i,t){1&i&&Vn(0,"span"),2&i&&Fr(Ce(3).getIcon())}function sle(i,t){if(1&i&&(Qe(0,"span"),ci(1),nt()),2&i){const e=Ce(3);Se(1),is(e.node.label)}}function ole(i,t){1&i&&Ni(0)}const R4=function(i){return{$implicit:i}};function ale(i,t){if(1&i&&(Qe(0,"span"),Xe(1,ole,1,0,"ng-container",16),nt()),2&i){const e=Ce(3);Se(1),de("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",bi(2,R4,e.node))}}function lle(i,t){if(1&i&&Vn(0,"p-treeNode",19),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=Ce(4);de("node",e)("parentNode",o.node)("firstChild",n)("lastChild",r)("index",s)("itemSize",o.itemSize)("level",o.level+1)}}function cle(i,t){if(1&i&&(Qe(0,"ul",17),Xe(1,lle,1,7,"p-treeNode",18),nt()),2&i){const e=Ce(3);xd("display",e.node.expanded?"block":"none"),Se(1),de("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const ule=function(i,t){return["p-treenode",i,t]},P4=function(i){return{height:i}},hle=function(i,t,e){return{"p-treenode-selectable":i,"p-treenode-dragover":t,"p-highlight":e}},dle=function(i,t){return{"pi-chevron-right":i,"pi-chevron-down":t}};function fle(i,t){if(1&i){const e=yi();Qe(0,"li",5)(1,"div",6),mn("click",function(r){return Ot(e),Nt(Ce(2).onNodeClick(r))})("contextmenu",function(r){return Ot(e),Nt(Ce(2).onNodeRightClick(r))})("touchend",function(){return Ot(e),Nt(Ce(2).onNodeTouchEnd())})("drop",function(r){return Ot(e),Nt(Ce(2).onDropNode(r))})("dragover",function(r){return Ot(e),Nt(Ce(2).onDropNodeDragOver(r))})("dragenter",function(r){return Ot(e),Nt(Ce(2).onDropNodeDragEnter(r))})("dragleave",function(r){return Ot(e),Nt(Ce(2).onDropNodeDragLeave(r))})("dragstart",function(r){return Ot(e),Nt(Ce(2).onDragStart(r))})("dragend",function(r){return Ot(e),Nt(Ce(2).onDragStop(r))})("keydown",function(r){return Ot(e),Nt(Ce(2).onKeyDown(r))}),Qe(2,"button",7),mn("click",function(r){return Ot(e),Nt(Ce(2).toggle(r))}),Vn(3,"span",8),nt(),Xe(4,ile,3,12,"div",9),Xe(5,rle,1,2,"span",3),Qe(6,"span",10),Xe(7,sle,2,1,"span",11),Xe(8,ale,2,4,"span",11),nt()(),Xe(9,cle,2,4,"ul",12),nt()}if(2&i){const e=Ce(2);de("ngClass",as(18,ule,e.node.styleClass||"",e.isLeaf()?"p-treenode-leaf":""))("ngStyle",bi(21,P4,e.itemSize+"px")),Se(1),xd("padding-left",e.level*e.indentation+"rem"),de("draggable",e.tree.draggableNodes)("ngClass",Su(23,hle,e.tree.selectionMode&&!1!==e.node.selectable,e.draghoverNode,e.isSelected())),vr("tabindex",0)("aria-posinset",e.index+1)("aria-expanded",e.node.expanded)("aria-selected",e.isSelected())("aria-label",e.node.label),Se(1),vr("aria-label",e.tree.togglerAriaLabel),Se(1),de("ngClass",as(27,dle,!e.node.expanded,e.node.expanded)),Se(1),de("ngIf","checkbox"==e.tree.selectionMode),Se(1),de("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),Se(2),de("ngIf",!e.tree.getTemplateForNode(e.node)),Se(1),de("ngIf",e.tree.getTemplateForNode(e.node)),Se(1),de("ngIf",!e.tree.virtualScroll&&e.node.children&&e.node.expanded)}}function ple(i,t){if(1&i){const e=yi();Qe(0,"li",4),mn("drop",function(r){return Ot(e),Nt(Ce(2).onDropPoint(r,1))})("dragover",function(r){return Ot(e),Nt(Ce(2).onDropPointDragOver(r))})("dragenter",function(r){return Ot(e),Nt(Ce(2).onDropPointDragEnter(r,1))})("dragleave",function(r){return Ot(e),Nt(Ce(2).onDropPointDragLeave(r))}),nt()}if(2&i){const e=Ce(2);de("ngClass",bi(1,L4,e.draghoverNext))}}const k4=function(i){return{"p-treenode-connector-line":i}};function gle(i,t){if(1&i&&(Qe(0,"td",25)(1,"table",26)(2,"tbody")(3,"tr"),Vn(4,"td",27),nt(),Qe(5,"tr"),Vn(6,"td",27),nt()()()()),2&i){const e=Ce(3);Se(4),de("ngClass",bi(2,k4,!e.firstChild)),Se(2),de("ngClass",bi(4,k4,!e.lastChild))}}const mle=function(i,t){return{"pi-plus":i,"pi-minus":t}};function vle(i,t){if(1&i){const e=yi();Qe(0,"span",28),mn("click",function(r){return Ot(e),Nt(Ce(3).toggle(r))}),nt()}if(2&i){const e=Ce(3);de("ngClass",as(2,mle,!e.node.expanded,e.node.expanded)),vr("aria-label",e.tree.togglerAriaLabel)}}function yle(i,t){1&i&&Vn(0,"span"),2&i&&Fr(Ce(3).getIcon())}function _le(i,t){if(1&i&&(Qe(0,"span"),ci(1),nt()),2&i){const e=Ce(3);Se(1),is(e.node.label)}}function ble(i,t){1&i&&Ni(0)}function Cle(i,t){if(1&i&&(Qe(0,"span"),Xe(1,ble,1,0,"ng-container",16),nt()),2&i){const e=Ce(3);Se(1),de("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",bi(2,R4,e.node))}}function wle(i,t){if(1&i&&Vn(0,"p-treeNode",32),2&i){const n=t.first,r=t.last;de("node",t.$implicit)("firstChild",n)("lastChild",r)}}function Ale(i,t){if(1&i&&(Qe(0,"td",29)(1,"div",30),Xe(2,wle,1,3,"p-treeNode",31),nt()()),2&i){const e=Ce(3);xd("display",e.node.expanded?"table-cell":"none"),Se(2),de("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const xle=function(i){return{"p-treenode-collapsed":i}},Ile=function(i,t){return{"p-treenode-selectable":i,"p-highlight":t}};function Sle(i,t){if(1&i){const e=yi();Qe(0,"table")(1,"tbody")(2,"tr"),Xe(3,gle,7,6,"td",20),Qe(4,"td",21)(5,"div",22),mn("click",function(r){return Ot(e),Nt(Ce(2).onNodeClick(r))})("contextmenu",function(r){return Ot(e),Nt(Ce(2).onNodeRightClick(r))})("touchend",function(){return Ot(e),Nt(Ce(2).onNodeTouchEnd())})("keydown",function(r){return Ot(e),Nt(Ce(2).onNodeKeydown(r))}),Xe(6,vle,1,5,"span",23),Xe(7,yle,1,2,"span",3),Qe(8,"span",10),Xe(9,_le,2,1,"span",11),Xe(10,Cle,2,4,"span",11),nt()()(),Xe(11,Ale,3,4,"td",24),nt()()()}if(2&i){const e=Ce(2);Fr(e.node.styleClass),Se(3),de("ngIf",!e.root),Se(1),de("ngClass",bi(10,xle,!e.node.expanded)),Se(1),de("ngClass",as(12,Ile,e.tree.selectionMode,e.isSelected())),Se(1),de("ngIf",!e.isLeaf()),Se(1),de("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),Se(2),de("ngIf",!e.tree.getTemplateForNode(e.node)),Se(1),de("ngIf",e.tree.getTemplateForNode(e.node)),Se(1),de("ngIf",e.node.children&&e.node.expanded)}}function Ele(i,t){if(1&i&&(Xe(0,Jae,1,3,"li",1),Xe(1,fle,10,30,"li",2),Xe(2,ple,1,3,"li",1),Xe(3,Sle,12,15,"table",3)),2&i){const e=Ce();de("ngIf",e.tree.droppableNodes),Se(1),de("ngIf",!e.tree.horizontal),Se(1),de("ngIf",e.tree.droppableNodes&&e.lastChild),Se(1),de("ngIf",e.tree.horizontal)}}const Tle=["filter"],Mle=["scroller"],Dle=["wrapper"];function Lle(i,t){if(1&i&&(Qe(0,"div",9),Vn(1,"i"),nt()),2&i){const e=Ce(2);Se(1),Fr("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function Rle(i,t){1&i&&Ni(0)}function Ple(i,t){if(1&i){const e=yi();Qe(0,"div",10)(1,"input",11,12),mn("keydown.enter",function(r){return r.preventDefault()})("input",function(r){return Ot(e),Nt(Ce(2)._filter(r.target.value))}),nt(),Vn(3,"span",13),nt()}if(2&i){const e=Ce(2);Se(1),vr("placeholder",e.filterPlaceholder)}}function kle(i,t){if(1&i&&Vn(0,"p-treeNode",20),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=Ce(2).options,l=Ce(3);de("level",e.level)("rowNode",e)("node",e.node)("firstChild",n)("lastChild",r)("index",l.getIndex(o,s))("itemSize",o.itemSize)("indentation",l.indentation)}}function Ole(i,t){if(1&i&&(Qe(0,"ul",18),Xe(1,kle,1,8,"p-treeNode",19),nt()),2&i){const e=Ce(),n=e.options,r=e.$implicit,s=Ce(3);no(n.contentStyle),de("ngClass",n.contentStyleClass),vr("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledBy),Se(1),de("ngForOf",r)("ngForTrackBy",s.trackBy)}}function Fle(i,t){1&i&&Xe(0,Ole,2,7,"ul",17),2&i&&de("ngIf",t.$implicit)}function Nle(i,t){1&i&&Ni(0)}const Ble=function(i){return{options:i}};function zle(i,t){if(1&i&&Xe(0,Nle,1,0,"ng-container",22),2&i){const e=t.options;de("ngTemplateOutlet",Ce(4).loaderTemplate)("ngTemplateOutletContext",bi(2,Ble,e))}}function Vle(i,t){1&i&&(Ur(0),Xe(1,zle,1,4,"ng-template",21),Hr())}function Ule(i,t){if(1&i){const e=yi();Qe(0,"p-scroller",14,15),mn("onScroll",function(r){return Ot(e),Nt(Ce(2).onScroll.emit(r))})("onScrollIndexChange",function(r){return Ot(e),Nt(Ce(2).onScrollIndexChange.emit(r))})("onLazyLoad",function(r){return Ot(e),Nt(Ce(2).onLazyLoad.emit(r))}),Xe(2,Fle,1,1,"ng-template",16),Xe(3,Vle,2,0,"ng-container",7),nt()}if(2&i){const e=Ce(2);no(bi(7,P4,e.scrollHeight)),de("items",e.serializedValue)("itemSize",e.virtualScrollItemSize||e._virtualNodeHeight)("lazy",e.lazy)("options",e.virtualScrollOptions),Se(3),de("ngIf",e.loaderTemplate)}}function Hle(i,t){if(1&i&&Vn(0,"p-treeNode",28),2&i){const n=t.first,r=t.last,s=t.index;de("node",t.$implicit)("firstChild",n)("lastChild",r)("index",s)("level",0)}}function Gle(i,t){if(1&i&&(Qe(0,"ul",26),Xe(1,Hle,1,5,"p-treeNode",27),nt()),2&i){const e=Ce(3);vr("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),Se(1),de("ngForOf",e.getRootNode())("ngForTrackBy",e.trackBy)}}function Wle(i,t){if(1&i&&(Ur(0),Qe(1,"div",23,24),Xe(3,Gle,2,4,"ul",25),nt(),Hr()),2&i){const e=Ce(2);Se(1),xd("max-height",e.scrollHeight),Se(2),de("ngIf",e.getRootNode())}}function jle(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(3);Se(1),_c(" ",e.emptyMessageLabel," ")}}function $le(i,t){1&i&&Ni(0,null,31)}function qle(i,t){if(1&i&&(Qe(0,"div",29),Xe(1,jle,2,1,"ng-container",30),Xe(2,$le,2,0,"ng-container",4),nt()),2&i){const e=Ce(2);Se(1),de("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),Se(1),de("ngTemplateOutlet",e.emptyMessageTemplate)}}function Xle(i,t){1&i&&Ni(0)}const Yle=function(i,t,e,n){return{"p-tree p-component":!0,"p-tree-selectable":i,"p-treenode-dragover":t,"p-tree-loading":e,"p-tree-flex-scrollable":n}};function Kle(i,t){if(1&i){const e=yi();Qe(0,"div",2),mn("drop",function(r){return Ot(e),Nt(Ce().onDrop(r))})("dragover",function(r){return Ot(e),Nt(Ce().onDragOver(r))})("dragenter",function(){return Ot(e),Nt(Ce().onDragEnter())})("dragleave",function(r){return Ot(e),Nt(Ce().onDragLeave(r))}),Xe(1,Lle,2,2,"div",3),Xe(2,Rle,1,0,"ng-container",4),Xe(3,Ple,4,1,"div",5),Xe(4,Ule,4,9,"p-scroller",6),Xe(5,Wle,4,3,"ng-container",7),Xe(6,qle,3,3,"div",8),Xe(7,Xle,1,0,"ng-container",4),nt()}if(2&i){const e=Ce();Fr(e.styleClass),de("ngClass",sf(11,Yle,e.selectionMode,e.dragHover,e.loading,"flex"===e.scrollHeight))("ngStyle",e.style),Se(1),de("ngIf",e.loading),Se(1),de("ngTemplateOutlet",e.headerTemplate),Se(1),de("ngIf",e.filter),Se(1),de("ngIf",e.virtualScroll),Se(1),de("ngIf",!e.virtualScroll),Se(1),de("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),Se(1),de("ngTemplateOutlet",e.footerTemplate)}}function Zle(i,t){1&i&&Ni(0)}function Qle(i,t){if(1&i&&(Qe(0,"div",34),Vn(1,"i"),nt()),2&i){const e=Ce(2);Se(1),Fr("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function Jle(i,t){if(1&i&&(Qe(0,"table"),Vn(1,"p-treeNode",35),nt()),2&i){const e=Ce(2);Se(1),de("node",e.value[0])("root",!0)}}function ece(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(3);Se(1),_c(" ",e.emptyMessageLabel," ")}}function tce(i,t){1&i&&Ni(0,null,31)}function nce(i,t){if(1&i&&(Qe(0,"div",29),Xe(1,ece,2,1,"ng-container",30),Xe(2,tce,2,0,"ng-container",4),nt()),2&i){const e=Ce(2);Se(1),de("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),Se(1),de("ngTemplateOutlet",e.emptyMessageTemplate)}}function ice(i,t){1&i&&Ni(0)}const rce=function(i){return{"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":i}};function sce(i,t){if(1&i&&(Qe(0,"div",32),Xe(1,Zle,1,0,"ng-container",4),Xe(2,Qle,2,2,"div",33),Xe(3,Jle,2,2,"table",7),Xe(4,nce,3,3,"div",8),Xe(5,ice,1,0,"ng-container",4),nt()),2&i){const e=Ce();Fr(e.styleClass),de("ngClass",bi(9,rce,e.selectionMode))("ngStyle",e.style),Se(1),de("ngTemplateOutlet",e.headerTemplate),Se(1),de("ngIf",e.loading),Se(1),de("ngIf",e.value&&e.value[0]),Se(1),de("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),Se(1),de("ngTemplateOutlet",e.footerTemplate)}}let oce=(()=>{class i{constructor(e){this.tree=e}ngOnInit(){this.node.parent=this.parentNode,this.parentNode&&this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value))}getIcon(){let e;return e=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children.length?this.node.expandedIcon:this.node.collapsedIcon,i.ICON_CLASS+" "+e}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(e){this.node.expanded?this.collapse(e):this.expand(e)}expand(e){this.node.expanded=!0,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeExpand.emit({originalEvent:e,node:this.node})}collapse(e){this.node.expanded=!1,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeCollapse.emit({originalEvent:e,node:this.node})}onNodeClick(e){this.tree.onNodeClick(e,this.node)}onNodeKeydown(e){13===e.which&&this.tree.onNodeClick(e,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(e){this.tree.onNodeRightClick(e,this.node)}isSelected(){return this.tree.isSelected(this.node)}onDropPoint(e,n){e.preventDefault();let r=this.tree.dragNode,l=this.tree.dragNodeTree!==this.tree||1===n||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(r,this.node,this.tree.dragNodeScope)&&l){let u={...this.createDropPointEventMetadata(n)};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index,accept:()=>{this.processPointDrop(u)}}):(this.processPointDrop(u),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(e){let n=e.dropNode.parent?e.dropNode.parent.children:this.tree.value;e.dragNodeSubNodes.splice(e.dragNodeIndex,1);let r=this.index;e.position<0?(r=e.dragNodeSubNodes===n?e.dragNodeIndex>e.index?e.index:e.index-1:e.index,n.splice(r,0,e.dragNode)):(r=n.length,n.push(e.dragNode)),this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:e.dragNodeIndex})}createDropPointEventMetadata(e){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:e}}onDropPointDragOver(e){e.dataTransfer.dropEffect="move",e.preventDefault()}onDropPointDragEnter(e,n){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(n<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(e){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(e){this.tree.draggableNodes&&!1!==this.node.draggable?(e.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):e.preventDefault()}onDragStop(e){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(e){e.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(e.preventDefault(),e.stopPropagation())}onDropNode(e){if(this.tree.droppableNodes&&!1!==this.node.droppable){let n=this.tree.dragNode;if(this.tree.allowDrop(n,this.node,this.tree.dragNodeScope)){let r={...this.createDropNodeEventMetadata()};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index,accept:()=>{this.processNodeDrop(r)}}):(this.processNodeDrop(r),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index}))}}e.preventDefault(),e.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(e){let n=e.dragNodeIndex;e.dragNodeSubNodes.splice(n,1),e.dropNode.children?e.dropNode.children.push(e.dragNode):e.dropNode.children=[e.dragNode],this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:n})}onDropNodeDragEnter(e){this.tree.droppableNodes&&!1!==this.node.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(e){if(this.tree.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>=Math.floor(n.top+n.height)||e.y<n.top)&&(this.draghoverNode=!1)}}onKeyDown(e){const n=e.target.parentElement.parentElement;if(!("P-TREENODE"!==n.nodeName||this.tree.contextMenu&&"block"===this.tree.contextMenu.containerViewChild.nativeElement.style.display))switch(e.which){case 40:const r=this.tree.droppableNodes?n.children[1].children[1]:n.children[0].children[1];if(r&&r.children.length>0)this.focusNode(r.children[0]);else{const s=n.nextElementSibling;if(s)this.focusNode(s);else{let o=this.findNextSiblingOfAncestor(n);o&&this.focusNode(o)}}e.preventDefault();break;case 38:if(n.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(n.previousElementSibling));else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 39:!this.node.expanded&&!this.tree.isNodeLeaf(this.node)&&this.expand(e),e.preventDefault();break;case 37:if(this.node.expanded)this.collapse(e);else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 13:this.tree.onNodeClick(e,this.node),e.preventDefault()}}findNextSiblingOfAncestor(e){let n=this.getParentNodeElement(e);return n?n.nextElementSibling?n.nextElementSibling:this.findNextSiblingOfAncestor(n):null}findLastVisibleDescendant(e){const r=Array.from(e.children).find(s=>Bt.hasClass(s,"p-treenode")).children[1];return r&&r.children.length>0?this.findLastVisibleDescendant(r.children[r.children.length-1]):e}getParentNodeElement(e){const n=e.parentElement.parentElement.parentElement;return"P-TREENODE"===n.tagName?n:null}focusNode(e){this.tree.droppableNodes?e.children[1].children[0].focus():e.children[0].children[0].focus()}}return i.ICON_CLASS="p-treenode-icon ",i.\u0275fac=function(e){return new(e||i)(Xt(hs(()=>O4)))},i.\u0275cmp=_r({type:i,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:"root",index:"index",firstChild:"firstChild",lastChild:"lastChild",level:"level",indentation:"indentation",itemSize:"itemSize"},decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave"],[3,"ngClass","ngStyle"],["role","treeitem",1,"p-treenode-content",3,"draggable","ngClass","click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","keydown"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[1,"p-tree-toggler-icon","pi","pi-fw",3,"ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],[4,"ngIf"],["class","p-treenode-children","style","display: none;","role","group",3,"display",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon","pi",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"p-treenode-children",2,"display","none"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"ngClass","click","contextmenu","touchend","keydown"],["class","p-tree-toggler pi pi-fw",3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"display",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[3,"ngClass"],[1,"p-tree-toggler","pi","pi-fw",3,"ngClass","click"],[1,"p-treenode-children-container"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(e,n){1&e&&Xe(0,Ele,4,4,"ng-template",0),2&e&&de("ngIf",n.node)},dependencies:[io,$c,ho,el,Ro,Du,i],encapsulation:2}),i})(),O4=(()=>{class i{constructor(e,n,r){this.el=e,this.dragDropService=n,this.config=r,this.layout="vertical",this.metaKeySelection=!0,this.propagateSelectionUp=!0,this.propagateSelectionDown=!0,this.loadingIcon="pi pi-spinner",this.emptyMessage="",this.filterBy="label",this.filterMode="lenient",this.lazy=!1,this.indentation=1.5,this.trackBy=(s,o)=>o,this.selectionChange=new Bn,this.onNodeSelect=new Bn,this.onNodeUnselect=new Bn,this.onNodeExpand=new Bn,this.onNodeCollapse=new Bn,this.onNodeContextMenuSelect=new Bn,this.onNodeDrop=new Bn,this.onLazyLoad=new Bn,this.onScroll=new Bn,this.onScrollIndexChange=new Bn,this.onFilter=new Bn}get virtualNodeHeight(){return this._virtualNodeHeight}set virtualNodeHeight(e){this._virtualNodeHeight=e,console.warn("The virtualNodeHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(e=>{this.dragNodeTree=e.tree,this.dragNode=e.node,this.dragNodeSubNodes=e.subNodes,this.dragNodeIndex=e.index,this.dragNodeScope=e.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(e=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(e){e.value&&this.updateSerializedValue()}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(qc.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"empty":this.emptyMessageTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;default:this.templateMap[e.name]=e.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let o of n){o.parent=e;const l={node:o,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(l),l.visible&&o.expanded&&this.serializeNodes(o,o.children,r+1,l.visible)}}onNodeClick(e,n){let r=e.target;if(!Bt.hasClass(r,"p-tree-toggler")&&!Bt.hasClass(r,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===n.selectable||this.hasFilteredNodes()&&!(n=this.getNodeWithKey(n.key,this.value)))return;let s=this.findIndexInSelection(n),o=s>=0;if(this.isCheckboxSelectionMode())o?(this.propagateSelectionDown?this.propagateDown(n,!1):this.selection=this.selection.filter((l,u)=>u!=s),this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown?this.propagateDown(n,!0):this.selection=[...this.selection||[],n],this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n}));else if(!this.nodeTouched&&this.metaKeySelection){let u=e.metaKey||e.ctrlKey;o&&u?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((p,v)=>v!=s),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.isMultipleSelectionMode()&&(this.selection=u&&this.selection||[],this.selection=[...this.selection,n],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:e,node:n}))}else this.isSingleSelectionMode()?o?(this.selection=null,this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=n,this.onNodeSelect.emit({originalEvent:e,node:n})):o?(this.selection=this.selection.filter((u,p)=>p!=s),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=[...this.selection||[],n],this.onNodeSelect.emit({originalEvent:e,node:n})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(e,n){if(this.contextMenu){let r=e.target;if(r.className&&0===r.className.indexOf("p-tree-toggler"))return;this.findIndexInSelection(n)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.selectionChange.emit([n])),this.contextMenu.show(e),this.onNodeContextMenuSelect.emit({originalEvent:e,node:n})}}findIndexInSelection(e){let n=-1;if(this.selectionMode&&this.selection)if(this.isSingleSelectionMode())n=this.selection.key&&this.selection.key===e.key||this.selection==e?0:-1;else for(let r=0;r<this.selection.length;r++){let s=this.selection[r];if(s.key&&s.key===e.key||s==e){n=r;break}}return n}syncNodeOption(e,n,r,s){const o=this.hasFilteredNodes()?this.getNodeWithKey(e.key,n):null;o&&(o[r]=s||e[r])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}getNodeWithKey(e,n){for(let r of n){if(r.key===e)return r;if(r.children){let s=this.getNodeWithKey(e,r.children);if(s)return s}}}propagateUp(e,n){if(e.children&&e.children.length){let s=0,o=!1;for(let l of e.children)this.isSelected(l)?s++:l.partialSelected&&(o=!0);if(n&&s==e.children.length)this.selection=[...this.selection||[],e],e.partialSelected=!1;else{if(!n){let l=this.findIndexInSelection(e);l>=0&&(this.selection=this.selection.filter((u,p)=>p!=l))}e.partialSelected=!!(o||s>0&&s!=e.children.length)}this.syncNodeOption(e,this.filteredNodes,"partialSelected")}let r=e.parent;r&&this.propagateUp(r,n)}propagateDown(e,n){let r=this.findIndexInSelection(e);if(n&&-1==r?this.selection=[...this.selection||[],e]:!n&&r>-1&&(this.selection=this.selection.filter((s,o)=>o!=r)),e.partialSelected=!1,this.syncNodeOption(e,this.filteredNodes,"partialSelected"),e.children&&e.children.length)for(let s of e.children)this.propagateDown(s,n)}isSelected(e){return-1!=this.findIndexInSelection(e)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(e){return 0!=e.leaf&&!(e.children&&e.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(e){return this.templateMap?e.type?this.templateMap[e.type]:this.templateMap.default:null}onDragOver(e){this.droppableNodes&&(!this.value||0===this.value.length)&&(e.dataTransfer.dropEffect="move",e.preventDefault())}onDrop(e){if(this.droppableNodes&&(!this.value||0===this.value.length)){e.preventDefault();let n=this.dragNode;if(this.allowDrop(n,null,this.dragNodeScope)){let r=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r,accept:()=>{this.processTreeDrop(n,r)}}):(this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r}),this.processTreeDrop(n,r))}}}processTreeDrop(e,n){this.dragNodeSubNodes.splice(n,1),this.value.push(e),this.dragDropService.stopDrag({node:e})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(e){if(this.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>n.top+n.height||e.y<n.top)&&(this.dragHover=!1)}}allowDrop(e,n,r){if(e){if(this.isValidDragScope(r)){let s=!0;if(n)if(e===n)s=!1;else{let o=n.parent;for(;null!=o;){if(o===e){s=!1;break}o=o.parent}}return s}return!1}return!1}isValidDragScope(e){let n=this.droppableScope;if(n){if("string"==typeof n){if("string"==typeof e)return n===e;if(e instanceof Array)return-1!=e.indexOf(n)}else if(n instanceof Array){if("string"==typeof e)return-1!=n.indexOf(e);if(e instanceof Array)for(let r of n)for(let s of e)if(r===s)return!0}return!1}return!0}_filter(e){let n=e;if(""===n)this.filteredNodes=null;else{this.filteredNodes=[];const r=this.filterBy.split(","),s=Ji.removeAccents(n).toLocaleLowerCase(this.filterLocale),o="strict"===this.filterMode;for(let l of this.value){let u={...l},p={searchFields:r,filterText:s,isStrictMode:o};(o&&(this.findFilteredNodes(u,p)||this.isFilterMatched(u,p))||!o&&(this.isFilterMatched(u,p)||this.findFilteredNodes(u,p)))&&this.filteredNodes.push(u)}}this.updateSerializedValue(),this.onFilter.emit({filter:n,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let o of s){let l={...o};this.isFilterMatched(l,n)&&(r=!0,e.children.push(l))}}if(r)return e.expanded=!0,!0}}isFilterMatched(e,{searchFields:n,filterText:r,isStrictMode:s}){let o=!1;for(let l of n)Ji.removeAccents(String(Ji.resolveFieldData(e,l))).toLocaleLowerCase(this.filterLocale).indexOf(r)>-1&&(o=!0);return(!o||s&&!this.isNodeLeaf(e))&&(o=this.findFilteredNodes(e,{searchFields:n,filterText:r,isStrictMode:s})||o),o}getIndex(e,n){const r=e.getItemOptions;return r?r(n).index:n}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(eZ,8),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-tree"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Tle,5),Tr(Mle,5),Tr(Dle,5)),2&e){let r;Wi(r=ji())&&(n.filterViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first),Wi(r=ji())&&(n.wrapperViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:"draggableNodes",droppableNodes:"droppableNodes",metaKeySelection:"metaKeySelection",propagateSelectionUp:"propagateSelectionUp",propagateSelectionDown:"propagateSelectionDown",loading:"loading",loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:"validateDrop",filter:"filter",filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filteredNodes:"filteredNodes",filterLocale:"filterLocale",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",indentation:"indentation",trackBy:"trackBy",virtualNodeHeight:"virtualNodeHeight"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange",onFilter:"onFilter"},features:[da],decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle","drop","dragover","dragenter","dragleave"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],["styleClass","p-tree-wrapper",3,"items","style","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[1,"p-tree-filter-container"],["type","text","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],["filter",""],[1,"p-tree-filter-icon","pi","pi-search"],["styleClass","p-tree-wrapper",3,"items","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad"],["scroller",""],["pTemplate","content"],["class","p-tree-container","role","tree",3,"ngClass","style",4,"ngIf"],["role","tree",1,"p-tree-container",3,"ngClass"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation",4,"ngFor","ngForOf","ngForTrackBy"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation"],["pTemplate","loader"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-tree-wrapper"],["wrapper",""],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level"],[1,"p-tree-empty-message"],[4,"ngIf","ngIfElse"],["emptyFilter",""],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(e,n){1&e&&(Xe(0,Kle,8,16,"div",0),Xe(1,sce,6,11,"div",1)),2&e&&(de("ngIf",!n.horizontal),Se(1),de("ngIf",n.horizontal))},dependencies:[io,$c,ho,el,Ro,za,EA,oce],styles:[".p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex-shrink:0}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}.p-scroller .p-tree-container{overflow:visible}\n"],encapsulation:2}),i})(),ace=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa,Xc,ov,xa,ov]}),i})();const lce=["container"],cce=["resizeHelper"],uce=["reorderIndicatorUp"],hce=["reorderIndicatorDown"],dce=["table"],fce=["scrollableView"],pce=["scrollableFrozenView"];function gce(i,t){if(1&i&&(Qe(0,"div",12)(1,"div",13),Vn(2,"i"),nt()()),2&i){const e=Ce();Se(2),Fr("p-treetable-loading-icon pi-spin "+e.loadingIcon)}}function mce(i,t){1&i&&Ni(0)}function vce(i,t){if(1&i&&(Qe(0,"div",14),Xe(1,mce,1,0,"ng-container",15),nt()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.captionTemplate)}}function yce(i,t){if(1&i){const e=yi();Qe(0,"p-paginator",16),mn("onPageChange",function(r){return Ot(e),Nt(Ce().onPageChange(r))}),nt()}if(2&i){const e=Ce();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function _ce(i,t){1&i&&Ni(0)}function bce(i,t){1&i&&Ni(0)}function Cce(i,t){1&i&&Ni(0)}const c_=function(i){return{$implicit:i}};function wce(i,t){if(1&i&&(Qe(0,"div",17)(1,"table",18,19),Xe(3,_ce,1,0,"ng-container",20),Qe(4,"thead",21),Xe(5,bce,1,0,"ng-container",20),nt(),Vn(6,"tbody",22),Qe(7,"tfoot",23),Xe(8,Cce,1,0,"ng-container",20),nt()()()),2&i){const e=Ce();Se(1),de("ngClass",e.tableStyleClass)("ngStyle",e.tableStyle),Se(2),de("ngTemplateOutlet",e.colGroupTemplate)("ngTemplateOutletContext",bi(10,c_,e.columns)),Se(2),de("ngTemplateOutlet",e.headerTemplate)("ngTemplateOutletContext",bi(12,c_,e.columns)),Se(1),de("pTreeTableBody",e.columns)("pTreeTableBodyTemplate",e.bodyTemplate),Se(2),de("ngTemplateOutlet",e.footerTemplate)("ngTemplateOutletContext",bi(14,c_,e.columns))}}const Ace=function(i){return{width:i}};function xce(i,t){if(1&i&&Vn(0,"div",28,29),2&i){const e=Ce(2);de("ttScrollableView",e.frozenColumns)("frozen",!0)("ngStyle",bi(4,Ace,e.frozenWidth))("scrollHeight",e.scrollHeight)}}const Ice=function(i,t){return{left:i,width:t}};function Sce(i,t){if(1&i&&(Qe(0,"div",24),Xe(1,xce,2,6,"div",25),Vn(2,"div",26,27),nt()),2&i){const e=Ce();Se(1),de("ngIf",e.frozenColumns||e.frozenBodyTemplate),Se(1),de("ttScrollableView",e.columns)("frozen",!1)("scrollHeight",e.scrollHeight)("ngStyle",as(5,Ice,e.frozenWidth,"calc(100% - "+e.frozenWidth+")"))}}function Ece(i,t){if(1&i){const e=yi();Qe(0,"p-paginator",30),mn("onPageChange",function(r){return Ot(e),Nt(Ce().onPageChange(r))}),nt()}if(2&i){const e=Ce();de("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showPageLinks",e.showPageLinks)}}function Tce(i,t){1&i&&Ni(0)}function Mce(i,t){if(1&i&&(Qe(0,"div",31),Xe(1,Tce,1,0,"ng-container",15),nt()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.summaryTemplate)}}function Dce(i,t){1&i&&Vn(0,"div",32,33)}function Lce(i,t){1&i&&Vn(0,"span",34,35)}function Rce(i,t){1&i&&Vn(0,"span",36,37)}const Pce=function(i,t,e,n,r){return{"p-treetable p-component":!0,"p-treetable-hoverable-rows":i,"p-treetable-auto-layout":t,"p-treetable-resizable":e,"p-treetable-resizable-fit":n,"p-treetable-flex-scrollable":r}},kce=["pTreeTableBody",""];function Oce(i,t){1&i&&Ni(0)}const Fce=function(i,t,e,n){return{$implicit:i,node:t,rowData:e,columns:n}};function Nce(i,t){if(1&i&&(Ur(0),Xe(1,Oce,1,0,"ng-container",2),Hr()),2&i){const e=Ce().$implicit,n=Ce();Se(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",sf(2,Fce,e,e.node,e.node.data,n.columns))}}function Bce(i,t){1&i&&Xe(0,Nce,2,7,"ng-container",1),2&i&&de("ngIf",t.$implicit.visible)}function zce(i,t){1&i&&Ni(0)}const Vce=function(i,t){return{$implicit:i,frozen:t}};function Uce(i,t){if(1&i&&(Ur(0),Xe(1,zce,1,0,"ng-container",2),Hr()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.tt.emptyMessageTemplate)("ngTemplateOutletContext",as(2,Vce,e.columns,e.frozen))}}const Hce=["scrollHeader"],Gce=["scrollHeaderBox"],Wce=["scrollBody"],jce=["scrollTable"],$ce=["loadingTable"],qce=["scrollFooter"],Xce=["scrollFooterBox"],Yce=["scrollableAligner"],Kce=["scroller"],Zce=["ttScrollableView",""];function Qce(i,t){1&i&&Ni(0)}function Jce(i,t){1&i&&Ni(0)}function eue(i,t){1&i&&Ni(0)}const F4=function(i,t){return{$implicit:i,options:t}};function tue(i,t){if(1&i&&Xe(0,eue,1,0,"ng-container",5),2&i){const e=t.$implicit,n=t.options;Ce(2),de("ngTemplateOutlet",ao(11))("ngTemplateOutletContext",as(2,F4,e,n))}}function nue(i,t){1&i&&Ni(0)}const iue=function(i){return{options:i}};function rue(i,t){if(1&i&&Xe(0,nue,1,0,"ng-container",5),2&i){const e=t.options;de("ngTemplateOutlet",Ce(3).loaderTemplate)("ngTemplateOutletContext",bi(2,iue,e))}}function sue(i,t){1&i&&(Ur(0),Xe(1,rue,1,4,"ng-template",14),Hr())}const oue=function(i){return{height:i}};function aue(i,t){if(1&i){const e=yi();Qe(0,"p-scroller",11,12),mn("onLazyLoad",function(r){return Ot(e),Nt(Ce().tt.onLazyItemLoad(r))}),Xe(2,tue,1,5,"ng-template",13),Xe(3,sue,2,0,"ng-container",8),nt()}if(2&i){const e=Ce();no(bi(8,oue,"flex"!==e.tt.scrollHeight?e.tt.scrollHeight:void 0)),de("items",e.tt.serializedValue)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.tt.virtualScrollItemSize||e.tt._virtualRowHeight)("lazy",e.tt.lazy)("options",e.tt.virtualScrollOptions),Se(3),de("ngIf",e.loaderTemplate)}}function lue(i,t){1&i&&Ni(0)}const cue=function(i,t){return{"max-height":i,"overflow-y":t}},uue=function(){return{}};function hue(i,t){if(1&i&&(Ur(0),Qe(1,"div",15,16),Xe(3,lue,1,0,"ng-container",5),nt(),Hr()),2&i){const e=Ce(),n=ao(11);Se(1),de("ngStyle",as(3,cue,"flex"!==e.tt.scrollHeight?e.scrollHeight:void 0,!e.frozen&&e.tt.scrollHeight?"scroll":void 0)),Se(2),de("ngTemplateOutlet",n)("ngTemplateOutletContext",as(7,F4,e.serializedValue,uo(6,uue)))}}function due(i,t){1&i&&Ni(0)}function fue(i,t){1&i&&Vn(0,"div",21,22)}function pue(i,t){if(1&i&&(Qe(0,"table",17,18),Xe(2,due,1,0,"ng-container",5),Vn(3,"tbody",19),nt(),Xe(4,fue,2,0,"div",20)),2&i){const e=t.$implicit,n=t.options,r=Ce();no(n.contentStyle),Fr(r.tt.tableStyleClass),de("ngClass",n.contentStyleClass)("ngStyle",r.tt.tableStyle),Se(2),de("ngTemplateOutlet",r.frozen&&r.tt.frozenColGroupTemplate||r.tt.colGroupTemplate)("ngTemplateOutletContext",bi(13,c_,r.columns)),Se(1),de("pTreeTableBody",r.columns)("pTreeTableBodyTemplate",r.frozen&&r.tt.frozenBodyTemplate||r.tt.bodyTemplate)("serializedNodes",e)("frozen",r.frozen),Se(1),de("ngIf",r.frozen)}}function gue(i,t){1&i&&Ni(0)}function mue(i,t){1&i&&Ni(0)}function vue(i,t){if(1&i&&(Qe(0,"div",23,24)(2,"div",25,26)(4,"table",27),Xe(5,gue,1,0,"ng-container",5),Qe(6,"tfoot",28),Xe(7,mue,1,0,"ng-container",5),nt()()()()),2&i){const e=Ce();Se(4),de("ngClass",e.tt.tableStyleClass)("ngStyle",e.tt.tableStyle),Se(1),de("ngTemplateOutlet",e.frozen&&e.tt.frozenColGroupTemplate||e.tt.colGroupTemplate)("ngTemplateOutletContext",bi(6,c_,e.columns)),Se(2),de("ngTemplateOutlet",e.frozen&&e.tt.frozenFooterTemplate||e.tt.footerTemplate)("ngTemplateOutletContext",bi(8,c_,e.columns))}}let Z2=(()=>{class i{constructor(){this.sortSource=new Ge,this.selectionSource=new Ge,this.contextMenuSource=new Ge,this.uiUpdateSource=new Ge,this.totalRecordsSource=new Ge,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.uiUpdateSource$=this.uiUpdateSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onUIUpdate(e){this.uiUpdateSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),eS=(()=>{class i{constructor(e,n,r,s,o){this.el=e,this.cd=n,this.zone=r,this.tableService=s,this.filterService=o,this.lazy=!1,this.lazyLoadOnInit=!0,this.first=0,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectionChange=new Bn,this.contextMenuSelectionChange=new Bn,this.contextMenuSelectionMode="separate",this.compareSelectionBy="deepEquals",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.virtualScrollDelay=150,this.columnResizeMode="fit",this.rowTrackBy=(l,u)=>u,this.filters={},this.filterDelay=300,this.filterMode="lenient",this.onFilter=new Bn,this.onNodeExpand=new Bn,this.onNodeCollapse=new Bn,this.onPage=new Bn,this.onSort=new Bn,this.onLazyLoad=new Bn,this.sortFunction=new Bn,this.onColResize=new Bn,this.onColReorder=new Bn,this.onNodeSelect=new Bn,this.onNodeUnselect=new Bn,this.onContextMenuSelect=new Bn,this.onHeaderCheckboxToggle=new Bn,this.onEditInit=new Bn,this.onEditComplete=new Bn,this.onEditCancel=new Bn,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._sortOrder=1,this.selectionKeys={}}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&!this.virtualScroll&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template}})}ngOnChanges(e){e.value&&(this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&this.sortField?this.sortSingle():"multiple"==this.sortMode&&this.multiSortMeta?this.sortMultiple():this.hasFilter()&&this._filter()),this.updateSerializedValue(),this.tableService.onUIUpdate(this.value)),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}updateSerializedValue(){this.serializedValue=[],this.paginator?this.serializePageNodes():this.serializeNodes(null,this.filteredNodes||this.value,0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let o of n){o.parent=e;const l={node:o,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(l),l.visible&&o.expanded&&this.serializeNodes(o,o.children,r+1,l.visible)}}serializePageNodes(){let e=this.filteredNodes||this.value;if(this.serializedValue=[],e&&e.length){const n=this.lazy?0:this.first;for(let r=n;r<n+this.rows;r++){let s=e[r];s&&(this.serializedValue.push({node:s,parent:null,level:0,visible:!0}),this.serializeNodes(s,s.children,1,!0))}}}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(Ji.resolveFieldData(e.data,this.dataKey))]=1;else this.selectionKeys[String(Ji.resolveFieldData(this._selection.data,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.serializePageNodes(),this.onPage.emit({first:this.first,rows:this.rows}),this.tableService.onUIUpdate(this.value),this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.sortSingle(),this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&this.scrollable&&this.resetScrollTop()),this.multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}}sortSingle(){if(this.sortField&&this.sortOrder){this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortNodes(this.value),this.hasFilter()&&this._filter());let e={field:this.sortField,order:this.sortOrder};this.onSort.emit(e),this.tableService.onSort(e),this.updateSerializedValue()}}sortNodes(e){if(e&&0!==e.length){this.customSort?this.sortFunction.emit({data:e,mode:this.sortMode,field:this.sortField,order:this.sortOrder}):e.sort((n,r)=>{let s=Ji.resolveFieldData(n.data,this.sortField),o=Ji.resolveFieldData(r.data,this.sortField),l=null;return l=null==s&&null!=o?-1:null!=s&&null==o?1:null==s&&null==o?0:"string"==typeof s&&"string"==typeof o?s.localeCompare(o,void 0,{numeric:!0}):s<o?-1:s>o?1:0,this.sortOrder*l});for(let n of e)this.sortNodes(n.children)}}sortMultiple(){this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.sortMultipleNodes(this.value),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.updateSerializedValue(),this.tableService.onSort(this.multiSortMeta))}sortMultipleNodes(e){if(e&&0!==e.length){this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):e.sort((n,r)=>this.multisortField(n,r,this.multiSortMeta,0));for(let n of e)this.sortMultipleNodes(n.children)}}multisortField(e,n,r,s){let o=Ji.resolveFieldData(e.data,r[s].field),l=Ji.resolveFieldData(n.data,r[s].field),u=null;if(null==o&&null!=l?u=-1:null!=o&&null==l?u=1:null==o&&null==l&&(u=0),"string"==typeof o||o instanceof String){if(o.localeCompare&&o!=l)return r[s].order*o.localeCompare(l,void 0,{numeric:!0})}else u=o<l?-1:1;return o==l?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*u}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.scrollableViewChild&&this.scrollableViewChild.scrollToVirtualIndex(e),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollToVirtualIndex(e)}scrollTo(e){this.scrollableViewChild&&this.scrollableViewChild.scrollTo(e),this.scrollableFrozenViewChild&&this.scrollableFrozenViewChild.scrollTo(e)}isEmpty(){let e=this.filteredNodes||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}onColumnResizeBegin(e){let n=Bt.getOffset(this.containerViewChild.nativeElement).left;this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,e.preventDefault()}onColumnResize(e){let n=Bt.getOffset(this.containerViewChild.nativeElement).left;Bt.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(e,n){let r=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,s=n.offsetWidth,o=s+r;if(s+r>parseInt(n.style.minWidth||15)){if("fit"===this.columnResizeMode){let u=n.nextElementSibling;for(;!u.offsetParent;)u=u.nextElementSibling;if(u){let p=u.offsetWidth-r,v=u.style.minWidth||15;if(o>15&&p>parseInt(v))if(this.scrollable){let w=this.findParentScrollableView(n),I=Bt.findSingle(w,".p-treetable-scrollable-body table")||Bt.findSingle(w,".p-scroller-viewport table"),T=Bt.findSingle(w,"table.p-treetable-scrollable-header-table"),k=Bt.findSingle(w,"table.p-treetable-scrollable-footer-table"),W=Bt.index(n);this.resizeColGroup(T,W,o,p),this.resizeColGroup(I,W,o,p),this.resizeColGroup(k,W,o,p)}else n.style.width=o+"px",u&&(u.style.width=p+"px")}}else if("expand"===this.columnResizeMode)if(this.scrollable){let u=this.findParentScrollableView(n),p=Bt.findSingle(u,".p-treetable-scrollable-body")||Bt.findSingle(u,".p-scroller-viewport"),v=Bt.findSingle(u,".p-treetable-scrollable-header"),w=Bt.findSingle(u,".p-treetable-scrollable-footer"),I=Bt.findSingle(u,".p-treetable-scrollable-body table")||Bt.findSingle(u,".p-scroller-viewport table"),T=Bt.findSingle(u,"table.p-treetable-scrollable-header-table"),k=Bt.findSingle(u,"table.p-treetable-scrollable-footer-table");I.style.width=I.offsetWidth+r+"px",T.style.width=T.offsetWidth+r+"px",k&&(k.style.width=k.offsetWidth+r+"px");let W=Bt.index(n);const K=n?I.offsetWidth+r:o,he=n?T.offsetWidth+r:o,Te=this.containerViewChild.nativeElement.offsetWidth>=K;let Ae=(Le,tt,_t,Ut)=>{Le&&tt&&(Le.style.width=Ut?_t+Bt.calculateScrollbarWidth(p)+"px":"auto",tt.style.width=_t+"px")};Ae(p,I,K,Te),Ae(v,T,he,Te),Ae(w,k,he,Te),this.resizeColGroup(T,W,o,null),this.resizeColGroup(I,W,o,null),this.resizeColGroup(k,W,o,null)}else this.tableViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.offsetWidth+r+"px",n.style.width=o+"px",this.containerViewChild.nativeElement.style.width=this.tableViewChild.nativeElement.style.width+"px";this.onColResize.emit({element:n,delta:r})}this.resizeHelperViewChild.nativeElement.style.display="none",Bt.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}findParentScrollableView(e){if(e){let n=e.parentElement;for(;n&&!Bt.hasClass(n,"p-treetable-scrollable-view");)n=n.parentElement;return n}return null}resizeColGroup(e,n,r,s){if(e){let o="COLGROUP"===e.children[0].nodeName?e.children[0]:null;if(!o)throw"Scrollable tables require a colgroup to support resizable columns";{let l=o.children[n],u=l.nextElementSibling;l.style.width=r+"px",u&&s&&(u.style.width=s+"px")}}}onColumnDragStart(e,n){this.reorderIconWidth=Bt.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Bt.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=Bt.getOffset(this.containerViewChild.nativeElement),s=Bt.getOffset(n);if(this.draggedColumn!=n){let o=s.left-r.left,u=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>u?(this.reorderIndicatorUpViewChild.nativeElement.style.left=o+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=o+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=o-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=o-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block"}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=Bt.indexWithinGroup(this.draggedColumn,"ttreorderablecolumn"),s=Bt.indexWithinGroup(n,"ttreorderablecolumn"),o=r!=s;o&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(o=!1),o&&s<r&&1===this.dropPosition&&(s+=1),o&&s>r&&-1===this.dropPosition&&(s-=1),o&&(Ji.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}handleRowClick(e){let n=e.originalEvent.target.nodeName;if("INPUT"!=n&&"BUTTON"!=n&&"A"!=n&&!Bt.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){this.preventSelectionSetterPropagation=!0;let r=e.rowNode,s=this.isSelected(r.node),o=!this.rowTouched&&this.metaKeySelection,l=this.dataKey?String(Ji.resolveFieldData(r.node.data,this.dataKey)):null;if(o){let u=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(s&&u){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let p=this.findIndexInSelection(r.node);this._selection=this.selection.filter((v,w)=>w!=p),this.selectionChange.emit(this.selection),l&&delete this.selectionKeys[l]}this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})}else this.isSingleSelectionMode()?(this._selection=r.node,this.selectionChange.emit(r.node),l&&(this.selectionKeys={},this.selectionKeys[l]=1)):this.isMultipleSelectionMode()&&(u?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,r.node],this.selectionChange.emit(this.selection),l&&(this.selectionKeys[l]=1)),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex})}else if("single"===this.selectionMode)s?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"})):(this._selection=r.node,this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),l&&(this.selectionKeys={},this.selectionKeys[l]=1));else if("multiple"===this.selectionMode)if(s){let u=this.findIndexInSelection(r.node);this._selection=this.selection.filter((p,v)=>v!=u),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e.originalEvent,node:r.node,type:"row"}),l&&delete this.selectionKeys[l]}else this._selection=this.selection?[...this.selection,r.node]:[r.node],this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e.originalEvent,node:r.node,type:"row",index:e.rowIndex}),l&&(this.selectionKeys[l]=1);this.tableService.onSelectionChange()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowNode.node;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:n}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let r=this.isSelected(n),s=this.dataKey?String(Ji.resolveFieldData(n.data,this.dataKey)):null;r||(this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n)):this.isMultipleSelectionMode()&&(this.selection=[n],this.selectionChange.emit(this.selection)),s&&(this.selectionKeys[s]=1)),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,node:n})}}}toggleNodeWithCheckbox(e){this.selection=this.selection||[],this.preventSelectionSetterPropagation=!0;let n=e.rowNode.node;this.isSelected(n)?(this.propagateSelectionDown(n,!1),e.rowNode.parent&&this.propagateSelectionUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown(n,!0),e.rowNode.parent&&this.propagateSelectionUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n})),this.tableService.onSelectionChange()}toggleNodesWithCheckbox(e,n){let r=this.filteredNodes||this.value;if(this._selection=n&&r?r.slice():[],n){if(r&&r.length)for(let s of r)this.propagateSelectionDown(s,!0)}else this._selection=[],this.selectionKeys={};this.preventSelectionSetterPropagation=!0,this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n})}propagateSelectionUp(e,n){if(e.children&&e.children.length){let s=0,o=!1,l=this.dataKey?String(Ji.resolveFieldData(e.data,this.dataKey)):null;for(let u of e.children)this.isSelected(u)?s++:u.partialSelected&&(o=!0);if(n&&s==e.children.length)this._selection=[...this.selection||[],e],e.partialSelected=!1,l&&(this.selectionKeys[l]=1);else{if(!n){let u=this.findIndexInSelection(e);u>=0&&(this._selection=this.selection.filter((p,v)=>v!=u),l&&delete this.selectionKeys[l])}e.partialSelected=!!(o||s>0&&s!=e.children.length)}}let r=e.parent;r&&this.propagateSelectionUp(r,n)}propagateSelectionDown(e,n){let r=this.findIndexInSelection(e),s=this.dataKey?String(Ji.resolveFieldData(e.data,this.dataKey)):null;if(n&&-1==r?(this._selection=[...this.selection||[],e],s&&(this.selectionKeys[s]=1)):!n&&r>-1&&(this._selection=this.selection.filter((o,l)=>l!=r),s&&delete this.selectionKeys[s]),e.partialSelected=!1,e.children&&e.children.length)for(let o of e.children)this.propagateSelectionDown(o,n)}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[Ji.resolveFieldData(e.data,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}equals(e,n){return"equals"===this.compareSelectionBy?e===n:Ji.equals(e.data,n.data,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay)}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let n;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");n=this.globalFilterFields||this.columns}this.filteredNodes=[];const r="strict"===this.filterMode;let s=!1;for(let o of this.value){let v,l={...o},u=!0,p=!1;for(let I in this.filters)if(this.filters.hasOwnProperty(I)&&"global"!==I){let T=this.filters[I];if(v={filterField:I,filterValue:T.value,filterConstraint:this.filterService.filters[T.matchMode||"startsWith"],isStrictMode:r},(r&&!(this.findFilteredNodes(l,v)||this.isFilterMatched(l,v))||!r&&!(this.isFilterMatched(l,v)||this.findFilteredNodes(l,v)))&&(u=!1),!u)break}if(this.filters.global&&!p&&n)for(let I=0;I<n.length;I++){let T={...l};v={filterField:n[I].field||n[I],filterValue:this.filters.global.value,filterConstraint:this.filterService.filters[this.filters.global.matchMode],isStrictMode:r},(r&&(this.findFilteredNodes(T,v)||this.isFilterMatched(T,v))||!r&&(this.isFilterMatched(T,v)||this.findFilteredNodes(T,v)))&&(p=!0,l=T)}let w=u;this.filters.global&&(w=u&&p),w&&this.filteredNodes.push(l),s=s||!u||p||u&&this.filteredNodes.length>0||!p&&0===this.filteredNodes.length}s||(this.filteredNodes=null),this.paginator&&(this.totalRecords=this.filteredNodes?this.filteredNodes.length:this.value?this.value.length:0)}else this.filteredNodes=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.first=0;const e=this.filteredNodes||this.value;this.onFilter.emit({filters:this.filters,filteredValue:e}),this.tableService.onUIUpdate(e),this.updateSerializedValue(),this.scrollable&&this.resetScrollTop()}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let o of s){let l={...o};this.isFilterMatched(l,n)&&(r=!0,e.children.push(l))}}if(r)return!0}}isFilterMatched(e,{filterField:n,filterValue:r,filterConstraint:s,isStrictMode:o}){let l=!1;return s(Ji.resolveFieldData(e.data,n),r,this.filterLocale)&&(l=!0),(!l||o&&!this.isNodeLeaf(e))&&(l=this.findFilteredNodes(e,{filterField:n,filterValue:r,filterConstraint:s,isStrictMode:o})||l),l}isNodeLeaf(e){return!1!==e.leaf&&!(e.children&&e.children.length)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}reset(){this._sortField=null,this._sortOrder=1,this._multiSortMeta=null,this.tableService.onSort(null),this.filteredNodes=null,this.filters={},this.first=0,this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}updateEditingCell(e,n,r){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Bt.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.editingCellClick&&this.isEditingCellValid()&&(Bt.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData}),this.editingCellField=null,this.editingCellData=null,this.unbindDocumentEditListener()),this.editingCellClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.editingCellField=null,this.editingCellData=null,this.initialized=null}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(xo),Xt(Vo),Xt(Z2),Xt(oA))},i.\u0275cmp=_r({type:i,selectors:[["p-treeTable"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(lce,5),Tr(cce,5),Tr(uce,5),Tr(hce,5),Tr(dce,5),Tr(fce,5),Tr(pce,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.resizeHelperViewChild=r.first),Wi(r=ji())&&(n.reorderIndicatorUpViewChild=r.first),Wi(r=ji())&&(n.reorderIndicatorDownViewChild=r.first),Wi(r=ji())&&(n.tableViewChild=r.first),Wi(r=ji())&&(n.scrollableViewChild=r.first),Wi(r=ji())&&(n.scrollableFrozenViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{columns:"columns",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",autoLayout:"autoLayout",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",paginator:"paginator",rows:"rows",first:"first",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",customSort:"customSort",selectionMode:"selectionMode",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",compareSelectionBy:"compareSelectionBy",rowHover:"rowHover",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",scrollable:"scrollable",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",frozenColumns:"frozenColumns",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",contextMenu:"contextMenu",rowTrackBy:"rowTrackBy",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterMode:"filterMode",filterLocale:"filterLocale",virtualRowHeight:"virtualRowHeight",value:"value",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection"},outputs:{selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onFilter:"onFilter",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onPage:"onPage",onSort:"onSort",onLazyLoad:"onLazyLoad",sortFunction:"sortFunction",onColResize:"onColResize",onColReorder:"onColReorder",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onContextMenuSelect:"onContextMenuSelect",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel"},features:[Ao([Z2]),da],decls:12,vars:20,consts:[["data-scrollselectors",".p-treetable-scrollable-body",3,"ngStyle","ngClass"],["container",""],["class","p-treetable-loading",4,"ngIf"],["class","p-treetable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-wrapper",4,"ngIf"],["class","p-treetable-scrollable-wrapper",4,"ngIf"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange",4,"ngIf"],["class","p-treetable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-treetable-reorder-indicator-up",4,"ngIf"],["class","pi pi-arrow-up p-treetable-reorder-indicator-down",4,"ngIf"],[1,"p-treetable-loading"],[1,"p-treetable-loading-overlay","p-component-overlay"],[1,"p-treetable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-treetable-wrapper"],[3,"ngClass","ngStyle"],["table",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate"],[1,"p-treetable-tfoot"],[1,"p-treetable-scrollable-wrapper"],["class","p-treetable-scrollable-view p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight",4,"ngIf"],[1,"p-treetable-scrollable-view",3,"ttScrollableView","frozen","scrollHeight","ngStyle"],["scrollableView",""],[1,"p-treetable-scrollable-view","p-treetable-frozen-view",3,"ttScrollableView","frozen","ngStyle","scrollHeight"],["scrollableFrozenView",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"p-treetable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-treetable-reorder-indicator-up"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-treetable-reorder-indicator-down"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(Qe(0,"div",0,1),Xe(2,gce,3,2,"div",2),Xe(3,vce,2,1,"div",3),Xe(4,yce,1,15,"p-paginator",4),Xe(5,wce,9,16,"div",5),Xe(6,Sce,4,8,"div",6),Xe(7,Ece,1,15,"p-paginator",7),Xe(8,Mce,2,1,"div",8),Xe(9,Dce,2,0,"div",9),Xe(10,Lce,2,0,"span",10),Xe(11,Rce,2,0,"span",11),nt()),2&e&&(Fr(n.styleClass),de("ngStyle",n.style)("ngClass",h0(14,Pce,n.rowHover||"single"===n.selectionMode||"multiple"===n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable&&"flex"===n.scrollHeight)),Se(2),de("ngIf",n.loading&&n.showLoader),Se(1),de("ngIf",n.captionTemplate),Se(1),de("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),Se(1),de("ngIf",!n.scrollable),Se(1),de("ngIf",n.scrollable),Se(1),de("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),Se(1),de("ngIf",n.summaryTemplate),Se(1),de("ngIf",n.resizableColumns),Se(1),de("ngIf",n.reorderableColumns),Se(1),de("ngIf",n.reorderableColumns))},dependencies:function(){return[io,ho,el,Ro,t4,bue,N4]},styles:[".p-treetable{position:relative}.p-treetable table{border-collapse:collapse;width:100%;table-layout:fixed}.p-treetable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-treetable .p-sortable-column .p-column-title,.p-treetable .p-sortable-column .p-sortable-column-icon,.p-treetable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-treetable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-treetable-auto-layout>.p-treetable-wrapper{overflow-x:auto}.p-treetable-auto-layout>.p-treetable-wrapper>table{table-layout:auto}.p-treetable-hoverable-rows .p-treetable-tbody>tr{cursor:pointer}.p-treetable-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;overflow:hidden;position:relative}p-treetabletoggler+p-treetablecheckbox .p-checkbox{vertical-align:middle}p-treetabletoggler+p-treetablecheckbox+span{vertical-align:middle}.p-treetable-scrollable-wrapper{position:relative}.p-treetable-scrollable-header,.p-treetable-scrollable-footer{overflow:hidden}.p-treetable-scrollable-body{overflow:auto;position:relative}.p-treetable-scrollable-body>table>.p-treetable-tbody>tr:first-child>td{border-top:0 none}.p-treetable-virtual-table{position:absolute}.p-treetable-frozen-view .p-treetable-scrollable-body{overflow:hidden}.p-treetable-frozen-view>.p-treetable-scrollable-body>table>.p-treetable-tbody>tr>td:last-child{border-right:0 none}.p-treetable-unfrozen-view{position:absolute;top:0}.p-treetable-flex-scrollable,.p-treetable-flex-scrollable .p-treetable-scrollable-wrapper,.p-treetable-flex-scrollable .p-treetable-scrollable-view{display:flex;flex-direction:column;flex:1;height:100%}.p-treetable-flex-scrollable .p-treetable-virtual-scrollable-body{flex:1}.p-treetable-resizable>.p-treetable-wrapper{overflow-x:auto}.p-treetable-resizable .p-treetable-thead>tr>th,.p-treetable-resizable .p-treetable-tfoot>tr>td,.p-treetable-resizable .p-treetable-tbody>tr>td{overflow:hidden}.p-treetable-resizable .p-resizable-column{background-clip:padding-box;position:relative}.p-treetable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-treetable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-treetable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-treetable .p-row-editor-init,.p-treetable .p-row-editor-save,.p-treetable .p-row-editor-cancel,.p-treetable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-treetable-reorder-indicator-up,.p-treetable-reorder-indicator-down{position:absolute;display:none}[ttReorderableColumn]{cursor:move}.p-treetable .p-treetable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-treetable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),N4=(()=>{class i{constructor(e,n,r){this.tt=e,this.treeTableService=n,this.cd=r,this.subscription=this.tt.tableService.uiUpdateSource$.subscribe(()=>{this.tt.virtualScroll&&this.cd.detectChanges()})}getScrollerOption(e,n){return this.tt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.getScrollerOption("getItemOptions");return n?n(e).index:e}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(eS),Xt(Z2),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["","pTreeTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTreeTableBody","columns"],template:["pTreeTableBodyTemplate","template"],frozen:"frozen",serializedNodes:"serializedNodes",scrollerOptions:"scrollerOptions"},attrs:kce,decls:2,vars:3,consts:[["ngFor","",3,"ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Xe(0,Bce,1,1,"ng-template",0),Xe(1,Uce,2,5,"ng-container",1)),2&e&&(de("ngForOf",n.serializedNodes||n.tt.serializedValue)("ngForTrackBy",n.tt.rowTrackBy),Se(1),de("ngIf",n.tt.isEmpty()))},dependencies:[$c,ho,el],encapsulation:2}),i})(),bue=(()=>{class i{constructor(e,n,r){this.tt=e,this.el=n,this.zone=r}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e,null!=e&&(e.includes("%")||e.includes("calc"))&&console.log('Percentage scroll height calculation is removed in favor of the more performant CSS based flex mode, use scrollHeight="flex" instead.')}ngAfterViewInit(){if(this.frozen)this.scrollableAlignerViewChild&&this.scrollableAlignerViewChild.nativeElement&&(this.scrollableAlignerViewChild.nativeElement.style.height=Bt.calculateScrollbarHeight()+"px");else{(this.tt.frozenColumns||this.tt.frozenBodyTemplate)&&Bt.addClass(this.el.nativeElement,"p-treetable-unfrozen-view");let e=this.el.nativeElement.previousElementSibling;e&&(this.frozenSiblingBody=Bt.findSingle(e,this.tt.virtualScroll?".p-scroller-viewport":".p-treetable-scrollable-body"));let n=Bt.calculateScrollbarWidth();this.scrollHeaderBoxViewChild.nativeElement.style.paddingRight=n+"px",this.scrollFooterBoxViewChild&&this.scrollFooterBoxViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.paddingRight=n+"px")}this.bindEvents()}bindEvents(){this.zone.runOutsideAngular(()=>{this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.headerScrollListener=this.onHeaderScroll.bind(this),this.scrollHeaderBoxViewChild.nativeElement.addEventListener("scroll",this.headerScrollListener)),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.footerScrollListener=this.onFooterScroll.bind(this),this.scrollFooterViewChild.nativeElement.addEventListener("scroll",this.footerScrollListener)),this.frozen||(this.bodyScrollListener=this.onBodyScroll.bind(this),this.tt.virtualScroll?this.scroller.getElementRef().nativeElement.addEventListener("scroll",this.bodyScrollListener):this.scrollBodyViewChild.nativeElement.addEventListener("scroll",this.bodyScrollListener))})}unbindEvents(){this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&this.scrollHeaderBoxViewChild.nativeElement.removeEventListener("scroll",this.headerScrollListener),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&this.scrollFooterViewChild.nativeElement.removeEventListener("scroll",this.footerScrollListener),this.scrollBodyViewChild&&this.scrollBodyViewChild.nativeElement&&this.scrollBodyViewChild.nativeElement.removeEventListener("scroll",this.bodyScrollListener),this.scroller&&this.scroller.getElementRef()&&this.scroller.getElementRef().nativeElement.removeEventListener("scroll",this.bodyScrollListener)}onHeaderScroll(){const e=this.scrollHeaderViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onFooterScroll(){const e=this.scrollFooterViewChild.nativeElement.scrollLeft;this.scrollBodyViewChild.nativeElement.scrollLeft=e,this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderViewChild.nativeElement.scrollLeft=e),this.preventBodyScrollPropagation=!0}onBodyScroll(e){this.preventBodyScrollPropagation?this.preventBodyScrollPropagation=!1:(this.scrollHeaderViewChild&&this.scrollHeaderViewChild.nativeElement&&(this.scrollHeaderBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.scrollFooterViewChild&&this.scrollFooterViewChild.nativeElement&&(this.scrollFooterBoxViewChild.nativeElement.style.marginLeft=-1*e.target.scrollLeft+"px"),this.frozenSiblingBody&&(this.frozenSiblingBody.scrollTop=e.target.scrollTop))}scrollToVirtualIndex(e){this.scroller&&this.scroller.scrollToIndex(e)}scrollTo(e){this.scroller?this.scroller.scrollTo(e):this.scrollBodyViewChild.nativeElement.scrollTo?this.scrollBodyViewChild.nativeElement.scrollTo(e):(this.scrollBodyViewChild.nativeElement.scrollLeft=e.left,this.scrollBodyViewChild.nativeElement.scrollTop=e.top)}ngOnDestroy(){this.unbindEvents(),this.frozenSiblingBody=null}}return i.\u0275fac=function(e){return new(e||i)(Xt(eS),Xt(Zn),Xt(Vo))},i.\u0275cmp=_r({type:i,selectors:[["","ttScrollableView",""]],viewQuery:function(e,n){if(1&e&&(Tr(Hce,5),Tr(Gce,5),Tr(Wce,5),Tr(jce,5),Tr($ce,5),Tr(qce,5),Tr(Xce,5),Tr(Yce,5),Tr(Kce,5)),2&e){let r;Wi(r=ji())&&(n.scrollHeaderViewChild=r.first),Wi(r=ji())&&(n.scrollHeaderBoxViewChild=r.first),Wi(r=ji())&&(n.scrollBodyViewChild=r.first),Wi(r=ji())&&(n.scrollTableViewChild=r.first),Wi(r=ji())&&(n.scrollLoadingTableViewChild=r.first),Wi(r=ji())&&(n.scrollFooterViewChild=r.first),Wi(r=ji())&&(n.scrollFooterBoxViewChild=r.first),Wi(r=ji())&&(n.scrollableAlignerViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{columns:["ttScrollableView","columns"],frozen:"frozen",scrollHeight:"scrollHeight"},attrs:Zce,decls:13,vars:13,consts:[[1,"p-treetable-scrollable-header"],["scrollHeader",""],[1,"p-treetable-scrollable-header-box"],["scrollHeaderBox",""],[1,"p-treetable-scrollable-header-table",3,"ngClass","ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-treetable-thead"],["styleClass","p-treetable-scrollable-body",3,"items","style","scrollHeight","itemSize","lazy","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInItems",""],["class","p-treetable-scrollable-footer",4,"ngIf"],["styleClass","p-treetable-scrollable-body",3,"items","scrollHeight","itemSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],[1,"p-treetable-scrollable-body",3,"ngStyle"],["scrollBody",""],[3,"ngClass","ngStyle"],["scrollTable",""],[1,"p-treetable-tbody",3,"pTreeTableBody","pTreeTableBodyTemplate","serializedNodes","frozen"],["style","background-color:transparent",4,"ngIf"],[2,"background-color","transparent"],["scrollableAligner",""],[1,"p-treetable-scrollable-footer"],["scrollFooter",""],[1,"p-treetable-scrollable-footer-box"],["scrollFooterBox",""],[1,"p-treetable-scrollable-footer-table",3,"ngClass","ngStyle"],[1,"p-treetable-tfoot"]],template:function(e,n){1&e&&(Qe(0,"div",0,1)(2,"div",2,3)(4,"table",4),Xe(5,Qce,1,0,"ng-container",5),Qe(6,"thead",6),Xe(7,Jce,1,0,"ng-container",5),nt()()()(),Xe(8,aue,4,10,"p-scroller",7),Xe(9,hue,4,10,"ng-container",8),Xe(10,pue,5,15,"ng-template",null,9,sc),Xe(12,vue,8,10,"div",10)),2&e&&(Se(4),de("ngClass",n.tt.tableStyleClass)("ngStyle",n.tt.tableStyle),Se(1),de("ngTemplateOutlet",n.frozen&&n.tt.frozenColGroupTemplate||n.tt.colGroupTemplate)("ngTemplateOutletContext",bi(9,c_,n.columns)),Se(2),de("ngTemplateOutlet",n.frozen&&n.tt.frozenHeaderTemplate||n.tt.headerTemplate)("ngTemplateOutletContext",bi(11,c_,n.columns)),Se(1),de("ngIf",n.tt.virtualScroll),Se(1),de("ngIf",!n.tt.virtualScroll),Se(3),de("ngIf",n.tt.footerTemplate))},dependencies:[io,ho,el,Ro,za,EA,N4],encapsulation:2}),i})(),Cue=(()=>{class i{constructor(e){this.tt=e}onClick(e){this.rowNode.node.expanded=!this.rowNode.node.expanded,this.rowNode.node.expanded?this.tt.onNodeExpand.emit({originalEvent:e,node:this.rowNode.node}):this.tt.onNodeCollapse.emit({originalEvent:e,node:this.rowNode.node}),this.tt.updateSerializedValue(),this.tt.tableService.onUIUpdate(this.tt.value),e.preventDefault()}}return i.\u0275fac=function(e){return new(e||i)(Xt(eS))},i.\u0275cmp=_r({type:i,selectors:[["p-treeTableToggler"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode"},decls:2,vars:5,consts:[["type","button","tabindex","-1","pRipple","",1,"p-treetable-toggler","p-link",3,"click"],[3,"ngClass"]],template:function(e,n){1&e&&(Qe(0,"button",0),mn("click",function(s){return n.onClick(s)}),Vn(1,"i",1),nt()),2&e&&(xd("visibility",!1===n.rowNode.node.leaf||n.rowNode.node.children&&n.rowNode.node.children.length?"visible":"hidden")("margin-left",16*n.rowNode.level+"px"),Se(1),de("ngClass",n.rowNode.node.expanded?"pi pi-fw pi-chevron-down":"pi pi-fw pi-chevron-right"))},dependencies:[io,Du],encapsulation:2}),i})(),wue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,n4,Xc,ov,xa,ov]}),i})();function Aue(i,t){if(1&i&&Vn(0,"span",11),2&i){const e=Ce(2).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function xue(i,t){1&i&&Ni(0)}const B4=function(i){return{"p-disabled":i}},Iue=function(){return{exact:!1}},z4=function(i){return{$implicit:i}};function Sue(i,t){if(1&i){const e=yi();Qe(0,"a",8),mn("click",function(r){Ot(e);const s=Ce().$implicit;return Nt(Ce().onItemClick(r,s))})("keydown.enter",function(r){Ot(e);const s=Ce(),o=s.$implicit,l=s.index;return Nt(Ce().onItemClick(r,o,l))}),Xe(1,Aue,1,2,"span",9),Xe(2,xue,1,0,"ng-container",10),nt()}if(2&i){const e=Ce().$implicit,n=Ce();de("routerLink",e.routerLink)("queryParams",e.queryParams)("ngClass",bi(17,B4,e.disabled))("routerLinkActiveOptions",e.routerLinkActiveOptions||uo(19,Iue))("target",e.target)("tooltipOptions",e.tooltipOptions)("fragment",e.fragment)("queryParamsHandling",e.queryParamsHandling)("preserveFragment",e.preserveFragment)("skipLocationChange",e.skipLocationChange)("replaceUrl",e.replaceUrl)("state",e.state),vr("id",e.id)("tabindex",e.disabled||n.readonly?null:e.tabindex?e.tabindex:"0"),Se(1),de("ngIf",e.icon&&!n.itemTemplate),Se(1),de("ngTemplateOutlet",n.itemTemplate)("ngTemplateOutletContext",bi(20,z4,e))}}function Eue(i,t){if(1&i&&Vn(0,"span",11),2&i){const e=Ce(2).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Tue(i,t){1&i&&Ni(0)}function Mue(i,t){if(1&i){const e=yi();Qe(0,"a",12),mn("click",function(r){Ot(e);const s=Ce().$implicit;return Nt(Ce().onItemClick(r,s))})("keydown.enter",function(r){Ot(e);const s=Ce(),o=s.$implicit,l=s.index;return Nt(Ce().onItemClick(r,o,l))}),Xe(1,Eue,1,2,"span",9),Xe(2,Tue,1,0,"ng-container",10),nt()}if(2&i){const e=Ce(),n=e.$implicit,r=e.index,s=Ce();de("tooltipPosition",n.tooltipPosition)("tooltipOptions",n.tooltipOptions)("ngClass",bi(10,B4,n.disabled))("target",n.target),vr("href",n.url||null,Xh)("id",n.id)("tabindex",n.disabled||r!==s.activeIndex&&s.readonly?null:n.tabindex?n.tabindex:"0"),Se(1),de("ngIf",n.icon&&!s.itemTemplate),Se(1),de("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",bi(12,z4,n))}}function Due(i,t){if(1&i){const e=yi();Qe(0,"li",5),mn("mouseenter",function(){const s=Ot(e).index;return Nt(Ce().onItemMouseEnter(s))}),Xe(1,Sue,3,22,"a",6),Xe(2,Mue,3,14,"ng-template",null,7,sc),nt()}if(2&i){const e=t.$implicit,n=t.index,r=ao(3),s=Ce();de("ngClass",s.itemClass(n)),Se(1),de("ngIf",s.isClickableRouterLink(e))("ngIfElse",r)}}let Lue=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.model=null,this.position="bottom",this.currentIndex=-3}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.itemTemplate=e.template})}onListMouseLeave(){this.currentIndex=-3,this.cd.markForCheck()}onItemMouseEnter(e){this.currentIndex=e,this.cd.markForCheck()}onItemClick(e,n){n.command&&n.command({originalEvent:e,item:n})}get containerClass(){return{[`p-dock p-component  p-dock-${this.position}`]:!0}}isClickableRouterLink(e){return e.routerLink&&!e.disabled}itemClass(e){return{"p-dock-item":!0,"p-dock-item-second-prev":this.currentIndex-2===e,"p-dock-item-prev":this.currentIndex-1===e,"p-dock-item-current":this.currentIndex===e,"p-dock-item-next":this.currentIndex+1===e,"p-dock-item-second-next":this.currentIndex+2===e}}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-dock"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",model:"model",position:"position"},decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],[1,"p-dock-list-container"],["role","menu",1,"p-dock-list",3,"mouseleave"],["list",""],[3,"ngClass","mouseenter",4,"ngFor","ngForOf"],[3,"ngClass","mouseenter"],["pRipple","","class","p-dock-action","role","menuitem","pTooltip","",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter",4,"ngIf","ngIfElse"],["elseBlock",""],["pRipple","","role","menuitem","pTooltip","",1,"p-dock-action",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter"],["class","p-dock-action-icon",3,"ngClass","ngStyle",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-dock-action-icon",3,"ngClass","ngStyle"],["role","menuitem","pRipple","","pTooltip","",1,"p-dock-action",3,"tooltipPosition","tooltipOptions","ngClass","target","click","keydown.enter"]],template:function(e,n){1&e&&(Qe(0,"div",0)(1,"div",1)(2,"ul",2,3),mn("mouseleave",function(){return n.onListMouseLeave()}),Xe(4,Due,4,3,"li",4),nt()()()),2&e&&(Fr(n.styleClass),de("ngClass",n.containerClass)("ngStyle",n.style),vr("id",n.id),Se(4),de("ngForOf",n.model))},dependencies:[io,$c,ho,el,Ro,rC,Du,rv],styles:[".p-dock{position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dock-list-container{display:flex;pointer-events:auto}.p-dock-list{margin:0;padding:0;list-style:none;display:flex;align-items:center;justify-content:center}.p-dock-item{transition:all .2s cubic-bezier(.4,0,.2,1);will-change:transform}.p-dock-action{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;cursor:default}.p-dock-item-second-prev,.p-dock-item-second-next{transform:scale(1.2)}.p-dock-item-prev,.p-dock-item-next{transform:scale(1.4)}.p-dock-item-current{transform:scale(1.6);z-index:1}.p-dock-top{left:0;top:0;width:100%}.p-dock-top .p-dock-item{transform-origin:center top}.p-dock-bottom{left:0;bottom:0;width:100%}.p-dock-bottom .p-dock-item{transform-origin:center bottom}.p-dock-right{right:0;top:0;height:100%}.p-dock-right .p-dock-item{transform-origin:center right}.p-dock-right .p-dock-list{flex-direction:column}.p-dock-left{left:0;top:0;height:100%}.p-dock-left .p-dock-item{transform-origin:center left}.p-dock-left .p-dock-list{flex-direction:column}\n"],encapsulation:2,changeDetection:0}),i})(),Rue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,s_,Xc,sv,xa,sv,s_]}),i})();const Pue=["cb"],kue=function(i,t,e){return{"p-checkbox-label":!0,"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function Oue(i,t){if(1&i){const e=yi();Qe(0,"label",7),mn("click",function(r){Ot(e);const s=Ce(),o=ao(3);return Nt(s.onClick(r,o,!0))}),ci(1),nt()}if(2&i){const e=Ce();Fr(e.labelStyleClass),de("ngClass",Su(5,kue,e.checked(),e.disabled,e.focused)),vr("for",e.inputId),Se(1),is(e.label)}}const Fue=function(i,t,e){return{"p-checkbox p-component":!0,"p-checkbox-checked":i,"p-checkbox-disabled":t,"p-checkbox-focused":e}},Nue=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},Bue={provide:wc,useExisting:hs(()=>V4),multi:!0};let V4=(()=>{class i{constructor(e){this.cd=e,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(e,n,r){e.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(e),r&&n.focus())}updateModel(e){let n;this.binary?(n=this.checked()?this.falseValue:this.trueValue,this.model=n,this.onModelChange(n)):(n=this.checked()?this.model.filter(r=>!Ji.equals(r,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(n),this.model=n,this.formControl&&this.formControl.setValue(n)),this.onChange.emit({checked:n,originalEvent:e})}handleChange(e){this.readonly||this.updateModel(e)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(e){this.model=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:Ji.contains(this.value,this.model)}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-checkbox"]],viewQuery:function(e,n){if(1&e&&Tr(Pue,5),2&e){let r;Wi(r=ji())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[Ao([Bue])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(e,n){if(1&e){const r=yi();Qe(0,"div",0)(1,"div",1)(2,"input",2,3),mn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("change",function(o){return n.handleChange(o)}),nt()(),Qe(4,"div",4),mn("click",function(o){Ot(r);const l=ao(3);return Nt(n.onClick(o,l,!0))}),Vn(5,"span",5),nt()(),Xe(6,Oue,2,9,"label",6)}2&e&&(Fr(n.styleClass),de("ngStyle",n.style)("ngClass",Su(18,Fue,n.checked(),n.disabled,n.focused)),Se(2),de("readonly",n.readonly)("value",n.value)("checked",n.checked())("disabled",n.disabled),vr("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("aria-checked",n.checked())("required",n.required),Se(2),de("ngClass",Su(22,Nue,n.checked(),n.disabled,n.focused)),Se(1),de("ngClass",n.checked()?n.checkboxIcon:null),Se(1),de("ngIf",n.label))},dependencies:[io,ho,Ro],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),i})(),zue=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();function cy(){}const Vue=function(){let i=0;return function(){return i++}}();function ga(i){return null===i||typeof i>"u"}function Rl(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function ea(i){return null!==i&&"[object Object]"===Object.prototype.toString.call(i)}const au=i=>("number"==typeof i||i instanceof Number)&&isFinite(+i);function vg(i,t){return au(i)?i:t}function mo(i,t){return typeof i>"u"?t:i}const U4=(i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Pl(i,t,e){if(i&&"function"==typeof i.call)return i.apply(e,t)}function nl(i,t,e,n){let r,s,o;if(Rl(i))if(s=i.length,n)for(r=s-1;r>=0;r--)t.call(e,i[r],r);else for(r=0;r<s;r++)t.call(e,i[r],r);else if(ea(i))for(o=Object.keys(i),s=o.length,r=0;r<s;r++)t.call(e,i[o[r]],o[r])}function tS(i,t){let e,n,r,s;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function nS(i){if(Rl(i))return i.map(nS);if(ea(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let r=0;for(;r<n;++r)t[e[r]]=nS(i[e[r]]);return t}return i}function H4(i){return-1===["__proto__","prototype","constructor"].indexOf(i)}function Hue(i,t,e,n){if(!H4(i))return;const r=t[i],s=e[i];ea(r)&&ea(s)?PA(r,s,n):t[i]=nS(s)}function PA(i,t,e){const n=Rl(t)?t:[t],r=n.length;if(!ea(i))return i;const s=(e=e||{}).merger||Hue;for(let o=0;o<r;++o){if(!ea(t=n[o]))continue;const l=Object.keys(t);for(let u=0,p=l.length;u<p;++u)s(l[u],i,t,e)}return i}function kA(i,t){return PA(i,t,{merger:Gue})}function Gue(i,t,e){if(!H4(i))return;const n=t[i],r=e[i];ea(n)&&ea(r)?kA(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=nS(r))}const G4={"":i=>i,x:i=>i.x,y:i=>i.y};function u_(i,t){return(G4[t]||(G4[t]=function Wue(i){const t=function jue(i){const t=i.split("."),e=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}(i);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t)))(i)}function Q2(i){return i.charAt(0).toUpperCase()+i.slice(1)}const yg=i=>typeof i<"u",h_=i=>"function"==typeof i,W4=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0},ac=Math.PI,dl=2*ac,que=dl+ac,iS=Number.POSITIVE_INFINITY,Xue=ac/180,Yc=ac/2,OA=ac/4,j4=2*ac/3,_g=Math.log10,lv=Math.sign;function $4(i){const t=Math.round(i);i=FA(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(_g(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function pC(i){return!isNaN(parseFloat(i))&&isFinite(i)}function FA(i,t,e){return Math.abs(i-t)<e}function q4(i,t,e){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function gm(i){return i*(ac/180)}function J2(i){return i*(180/ac)}function X4(i){if(!au(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function Y4(i,t){const e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n);let s=Math.atan2(n,e);return s<-.5*ac&&(s+=dl),{angle:s,distance:r}}function eL(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Zue(i,t){return(i-t+que)%dl-ac}function Lp(i){return(i%dl+dl)%dl}function NA(i,t,e,n){const r=Lp(i),s=Lp(t),o=Lp(e),l=Lp(s-r),u=Lp(o-r),p=Lp(r-s),v=Lp(r-o);return r===s||r===o||n&&s===o||l>u&&p<v}function Ch(i,t,e){return Math.max(t,Math.min(e,i))}function uy(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function tL(i,t,e){e=e||(o=>i[o]<t);let s,n=i.length-1,r=0;for(;n-r>1;)s=r+n>>1,e(s)?r=s:n=s;return{lo:r,hi:n}}const hy=(i,t,e,n)=>tL(i,e,n?r=>i[r][t]<=e:r=>i[r][t]<e),Jue=(i,t,e)=>tL(i,e,n=>i[n][t]>=e),K4=["push","pop","shift","splice","unshift"];function Z4(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,r=n.indexOf(t);-1!==r&&n.splice(r,1),!(n.length>0)&&(K4.forEach(s=>{delete i[s]}),delete i._chartjs)}function Q4(i){const t=new Set;let e,n;for(e=0,n=i.length;e<n;++e)t.add(i[e]);return t.size===n?i:Array.from(t)}const J4=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function eU(i,t,e){const n=e||(o=>Array.prototype.slice.call(o));let r=!1,s=[];return function(...o){s=n(o),r||(r=!0,J4.call(window,()=>{r=!1,i.apply(t,s)}))}}const nL=i=>"start"===i?"left":"end"===i?"right":"center",Ed=(i,t,e)=>"start"===i?t:"end"===i?e:(t+e)/2;function tU(i,t,e){const n=t.length;let r=0,s=n;if(i._sorted){const{iScale:o,_parsed:l}=i,u=o.axis,{min:p,max:v,minDefined:w,maxDefined:I}=o.getUserBounds();w&&(r=Ch(Math.min(hy(l,o.axis,p).lo,e?n:hy(t,u,o.getPixelForValue(p)).lo),0,n-1)),s=I?Ch(Math.max(hy(l,o.axis,v,!0).hi+1,e?0:hy(t,u,o.getPixelForValue(v),!0).hi+1),r,n)-r:n-r}return{start:r,count:s}}function nU(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=r,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,r),s}const rS=i=>0===i||1===i,iU=(i,t,e)=>-Math.pow(2,10*(i-=1))*Math.sin((i-t)*dl/e),rU=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*dl/e)+1,BA={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*Yc),easeOutSine:i=>Math.sin(i*Yc),easeInOutSine:i=>-.5*(Math.cos(ac*i)-1),easeInExpo:i=>0===i?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>1===i?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>rS(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>rS(i)?i:iU(i,.075,.3),easeOutElastic:i=>rS(i)?i:rU(i,.075,.3),easeInOutElastic:i=>rS(i)?i:i<.5?.5*iU(2*i,.1125,.45):.5+.5*rU(2*i-1,.1125,.45),easeInBack:i=>i*i*(2.70158*i-1.70158),easeOutBack:i=>(i-=1)*i*(2.70158*i+1.70158)+1,easeInOutBack(i){let t=1.70158;return(i/=.5)<1?i*i*((1+(t*=1.525))*i-t)*.5:.5*((i-=2)*i*((1+(t*=1.525))*i+t)+2)},easeInBounce:i=>1-BA.easeOutBounce(1-i),easeOutBounce:i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,easeInOutBounce:i=>i<.5?.5*BA.easeInBounce(2*i):.5*BA.easeOutBounce(2*i-1)+.5};function zA(i){return i+.5|0}const d_=(i,t,e)=>Math.max(Math.min(i,e),t);function VA(i){return d_(zA(2.55*i),0,255)}function f_(i){return d_(zA(255*i),0,255)}function dy(i){return d_(zA(i/2.55)/100,0,1)}function sU(i){return d_(zA(100*i),0,100)}const bg={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},iL=[..."0123456789ABCDEF"],rhe=i=>iL[15&i],she=i=>iL[(240&i)>>4]+iL[15&i],sS=i=>(240&i)>>4==(15&i);const uhe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function oU(i,t,e){const n=t*Math.min(e,1-e),r=(s,o=(s+i/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function hhe(i,t,e){const n=(r,s=(r+i/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function dhe(i,t,e){const n=oU(i,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function rL(i){const e=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(e,n,r),o=Math.min(e,n,r),l=(s+o)/2;let u,p,v;return s!==o&&(v=s-o,p=l>.5?v/(2-s-o):v/(s+o),u=function fhe(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}(e,n,r,v,s),u=60*u+.5),[0|u,p||0,l]}function sL(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(f_)}function oL(i,t,e){return sL(oU,i,t,e)}function aU(i){return(i%360+360)%360}const lU={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cU={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let oS;const Che=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,aL=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,gC=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function aS(i,t,e){if(i){let n=rL(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,0===t?360:1)),n=oL(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function uU(i,t){return i&&Object.assign(t||{},i)}function hU(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=f_(i[3]))):(t=uU(i,{r:0,g:0,b:0,a:1})).a=f_(t.a),t}function Ihe(i){return"r"===i.charAt(0)?function whe(i){const t=Che.exec(i);let n,r,s,e=255;if(t){if(t[7]!==n){const o=+t[7];e=t[8]?VA(o):d_(255*o,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?VA(n):d_(n,0,255)),r=255&(t[4]?VA(r):d_(r,0,255)),s=255&(t[6]?VA(s):d_(s,0,255)),{r:n,g:r,b:s,a:e}}}(i):function mhe(i){const t=uhe.exec(i);let n,e=255;if(!t)return;t[5]!==n&&(e=t[6]?VA(+t[5]):f_(+t[5]));const r=aU(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function phe(i,t,e){return sL(dhe,i,t,e)}(r,s,o):"hsv"===t[1]?function ghe(i,t,e){return sL(hhe,i,t,e)}(r,s,o):oL(r,s,o),{r:n[0],g:n[1],b:n[2],a:e}}(i)}class lS{constructor(t){if(t instanceof lS)return t;const e=typeof t;let n;"object"===e?n=hU(t):"string"===e&&(n=function ahe(i){var e,t=i.length;return"#"===i[0]&&(4===t||5===t?e={r:255&17*bg[i[1]],g:255&17*bg[i[2]],b:255&17*bg[i[3]],a:5===t?17*bg[i[4]]:255}:(7===t||9===t)&&(e={r:bg[i[1]]<<4|bg[i[2]],g:bg[i[3]]<<4|bg[i[4]],b:bg[i[5]]<<4|bg[i[6]],a:9===t?bg[i[7]]<<4|bg[i[8]]:255})),e}(t)||function bhe(i){oS||(oS=function _he(){const i={},t=Object.keys(cU),e=Object.keys(lU);let n,r,s,o,l;for(n=0;n<t.length;n++){for(o=l=t[n],r=0;r<e.length;r++)s=e[r],l=l.replace(s,lU[s]);s=parseInt(cU[o],16),i[l]=[s>>16&255,s>>8&255,255&s]}return i}(),oS.transparent=[0,0,0,0]);const t=oS[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||Ihe(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=uU(this._rgb);return t&&(t.a=dy(t.a)),t}set rgb(t){this._rgb=hU(t)}rgbString(){return this._valid?function Ahe(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${dy(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}(this._rgb):void 0}hexString(){return this._valid?function che(i){var t=(i=>sS(i.r)&&sS(i.g)&&sS(i.b)&&sS(i.a))(i)?rhe:she;return i?"#"+t(i.r)+t(i.g)+t(i.b)+((i,t)=>i<255?t(i):"")(i.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function yhe(i){if(!i)return;const t=rL(i),e=t[0],n=sU(t[1]),r=sU(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${dy(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,l=2*o-1,u=n.a-r.a,p=((l*u==-1?l:(l+u)/(1+l*u))+1)/2;s=1-p,n.r=255&p*n.r+s*r.r+.5,n.g=255&p*n.g+s*r.g+.5,n.b=255&p*n.b+s*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function xhe(i,t,e){const n=gC(dy(i.r)),r=gC(dy(i.g)),s=gC(dy(i.b));return{r:f_(aL(n+e*(gC(dy(t.r))-n))),g:f_(aL(r+e*(gC(dy(t.g))-r))),b:f_(aL(s+e*(gC(dy(t.b))-s))),a:i.a+e*(t.a-i.a)}}(this._rgb,t._rgb,e)),this}clone(){return new lS(this.rgb)}alpha(t){return this._rgb.a=f_(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=zA(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return aS(this._rgb,2,t),this}darken(t){return aS(this._rgb,2,-t),this}saturate(t){return aS(this._rgb,1,t),this}desaturate(t){return aS(this._rgb,1,-t),this}rotate(t){return function vhe(i,t){var e=rL(i);e[0]=aU(e[0]+t),e=oL(e),i.r=e[0],i.g=e[1],i.b=e[2]}(this._rgb,t),this}}function dU(i){return new lS(i)}function fU(i){if(i&&"object"==typeof i){const t=i.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function pU(i){return fU(i)?i:dU(i)}function lL(i){return fU(i)?i:dU(i).saturate(.5).darken(.1).hexString()}const I0=Object.create(null),cL=Object.create(null);function UA(i,t){if(!t)return i;const e=t.split(".");for(let n=0,r=e.length;n<r;++n){const s=e[n];i=i[s]||(i[s]=Object.create(null))}return i}function uL(i,t,e){return"string"==typeof t?PA(UA(i,t),e):PA(UA(i,""),t)}var ia=new class She{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,n)=>lL(n.backgroundColor),this.hoverBorderColor=(e,n)=>lL(n.borderColor),this.hoverColor=(e,n)=>lL(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return uL(this,t,e)}get(t){return UA(this,t)}describe(t,e){return uL(cL,t,e)}override(t,e){return uL(I0,t,e)}route(t,e,n,r){const s=UA(this,t),o=UA(this,n),l="_"+e;Object.defineProperties(s,{[l]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const u=this[l],p=o[r];return ea(u)?Object.assign({},p,u):mo(u,p)},set(u){this[l]=u}}})}}({_scriptable:i=>!i.startsWith("on"),_indexable:i=>"events"!==i,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function cS(i,t,e,n,r){let s=t[r];return s||(s=t[r]=i.measureText(r).width,e.push(r)),s>n&&(n=s),n}function The(i,t,e,n){let r=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),i.save(),i.font=t;let o=0;const l=e.length;let u,p,v,w,I;for(u=0;u<l;u++)if(w=e[u],null!=w&&!0!==Rl(w))o=cS(i,r,s,o,w);else if(Rl(w))for(p=0,v=w.length;p<v;p++)I=w[p],null!=I&&!Rl(I)&&(o=cS(i,r,s,o,I));i.restore();const T=s.length/2;if(T>e.length){for(u=0;u<T;u++)delete r[s[u]];s.splice(0,T)}return o}function S0(i,t,e){const n=i.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function gU(i,t){(t=t||i.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function hL(i,t,e,n){mU(i,t,e,n,null)}function mU(i,t,e,n,r){let s,o,l,u,p,v;const w=t.pointStyle,I=t.rotation,T=t.radius;let k=(I||0)*Xue;if(w&&"object"==typeof w&&(s=w.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return i.save(),i.translate(e,n),i.rotate(k),i.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),void i.restore();if(!(isNaN(T)||T<=0)){switch(i.beginPath(),w){default:r?i.ellipse(e,n,r/2,T,0,0,dl):i.arc(e,n,T,0,dl),i.closePath();break;case"triangle":i.moveTo(e+Math.sin(k)*T,n-Math.cos(k)*T),k+=j4,i.lineTo(e+Math.sin(k)*T,n-Math.cos(k)*T),k+=j4,i.lineTo(e+Math.sin(k)*T,n-Math.cos(k)*T),i.closePath();break;case"rectRounded":p=.516*T,u=T-p,o=Math.cos(k+OA)*u,l=Math.sin(k+OA)*u,i.arc(e-o,n-l,p,k-ac,k-Yc),i.arc(e+l,n-o,p,k-Yc,k),i.arc(e+o,n+l,p,k,k+Yc),i.arc(e-l,n+o,p,k+Yc,k+ac),i.closePath();break;case"rect":if(!I){u=Math.SQRT1_2*T,v=r?r/2:u,i.rect(e-v,n-u,2*v,2*u);break}k+=OA;case"rectRot":o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+l,n-o),i.lineTo(e+o,n+l),i.lineTo(e-l,n+o),i.closePath();break;case"crossRot":k+=OA;case"cross":o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"star":o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o),k+=OA,o=Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"line":o=r?r/2:Math.cos(k)*T,l=Math.sin(k)*T,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(k)*T,n+Math.sin(k)*T)}i.fill(),t.borderWidth>0&&i.stroke()}}function HA(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function uS(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function hS(i){i.restore()}function Mhe(i,t,e,n,r){if(!t)return i.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;i.lineTo(s,t.y),i.lineTo(s,e.y)}else"after"===r!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function Dhe(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function E0(i,t,e,n,r,s={}){const o=Rl(t)?t:[t],l=s.strokeWidth>0&&""!==s.strokeColor;let u,p;for(i.save(),i.font=r.string,function Lhe(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),ga(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}(i,s),u=0;u<o.length;++u)p=o[u],l&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),ga(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(p,e,n,s.maxWidth)),i.fillText(p,e,n,s.maxWidth),Rhe(i,e,n,p,s),n+=r.lineHeight;i.restore()}function Rhe(i,t,e,n,r){if(r.strikethrough||r.underline){const s=i.measureText(n),o=t-s.actualBoundingBoxLeft,l=t+s.actualBoundingBoxRight,u=e-s.actualBoundingBoxAscent,p=e+s.actualBoundingBoxDescent,v=r.strikethrough?(u+p)/2:p;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,v),i.lineTo(l,v),i.stroke()}}function GA(i,t){const{x:e,y:n,w:r,h:s,radius:o}=t;i.arc(e+o.topLeft,n+o.topLeft,o.topLeft,-Yc,ac,!0),i.lineTo(e,n+s-o.bottomLeft),i.arc(e+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,ac,Yc,!0),i.lineTo(e+r-o.bottomRight,n+s),i.arc(e+r-o.bottomRight,n+s-o.bottomRight,o.bottomRight,Yc,0,!0),i.lineTo(e+r,n+o.topRight),i.arc(e+r-o.topRight,n+o.topRight,o.topRight,0,-Yc,!0),i.lineTo(e+o.topLeft,n)}const Phe=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),khe=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function Ohe(i,t){const e=(""+i).match(Phe);if(!e||"normal"===e[1])return 1.2*t;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100}return t*i}const Fhe=i=>+i||0;function dL(i,t){const e={},n=ea(t),r=n?Object.keys(t):t,s=ea(i)?n?o=>mo(i[o],i[t[o]]):o=>i[o]:()=>i;for(const o of r)e[o]=Fhe(s(o));return e}function vU(i){return dL(i,{top:"y",right:"x",bottom:"y",left:"x"})}function T0(i){return dL(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Td(i){const t=vU(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Qu(i,t){let e=mo((i=i||{}).size,(t=t||ia.font).size);"string"==typeof e&&(e=parseInt(e,10));let n=mo(i.style,t.style);n&&!(""+n).match(khe)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const r={family:mo(i.family,t.family),lineHeight:Ohe(mo(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:mo(i.weight,t.weight),string:""};return r.string=function Ehe(i){return!i||ga(i.size)||ga(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}(r),r}function WA(i,t,e,n){let s,o,l,r=!0;for(s=0,o=i.length;s<o;++s)if(l=i[s],void 0!==l&&(void 0!==t&&"function"==typeof l&&(l=l(t),r=!1),void 0!==e&&Rl(l)&&(l=l[e%l.length],r=!1),void 0!==l))return n&&!r&&(n.cacheable=!1),l}function p_(i,t){return Object.assign(Object.create(i),t)}function fL(i,t=[""],e=i,n,r=(()=>i[0])){yg(n)||(n=wU("_fallback",i));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:e,_fallback:n,_getTarget:r,override:o=>fL([o,...i],t,e,n)};return new Proxy(s,{deleteProperty:(o,l)=>(delete o[l],delete o._keys,delete i[0][l],!0),get:(o,l)=>_U(o,l,()=>function jhe(i,t,e,n){let r;for(const s of t)if(r=wU(Bhe(s,i),e),yg(r))return pL(i,r)?gL(e,n,i,r):r}(l,t,i,o)),getOwnPropertyDescriptor:(o,l)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(o,l)=>AU(o).includes(l),ownKeys:o=>AU(o),set(o,l,u){const p=o._storage||(o._storage=r());return o[l]=p[l]=u,delete o._keys,!0}})}function mC(i,t,e,n){const r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:yU(i,n),setContext:s=>mC(i,s,e,n),override:s=>mC(i.override(s),t,e,n)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete i[o],!0),get:(s,o,l)=>_U(s,o,()=>function zhe(i,t,e){const{_proxy:n,_context:r,_subProxy:s,_descriptors:o}=i;let l=n[t];return h_(l)&&o.isScriptable(t)&&(l=function Vhe(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_stack:l}=e;if(l.has(i))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+i);return l.add(i),t=t(s,o||n),l.delete(i),pL(i,t)&&(t=gL(r._scopes,r,i,t)),t}(t,l,i,e)),Rl(l)&&l.length&&(l=function Uhe(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=e;if(yg(s.index)&&n(i))t=t[s.index%t.length];else if(ea(t[0])){const u=t,p=r._scopes.filter(v=>v!==u);t=[];for(const v of u){const w=gL(p,r,i,v);t.push(mC(w,s,o&&o[i],l))}}return t}(t,l,i,o.isIndexable)),pL(t,l)&&(l=mC(l,r,s&&s[t],o)),l}(s,o,l)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(s,o)=>Reflect.has(i,o),ownKeys:()=>Reflect.ownKeys(i),set:(s,o,l)=>(i[o]=l,delete s[o],!0)})}function yU(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:h_(e)?e:()=>e,isIndexable:h_(n)?n:()=>n}}const Bhe=(i,t)=>i?i+Q2(t):t,pL=(i,t)=>ea(t)&&"adapters"!==i&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function _U(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];const n=e();return i[t]=n,n}function bU(i,t,e){return h_(i)?i(t,e):i}const Hhe=(i,t)=>!0===i?t:"string"==typeof i?u_(t,i):void 0;function Ghe(i,t,e,n,r){for(const s of t){const o=Hhe(e,s);if(o){i.add(o);const l=bU(o._fallback,e,r);if(yg(l)&&l!==e&&l!==n)return l}else if(!1===o&&yg(n)&&e!==n)return null}return!1}function gL(i,t,e,n){const r=t._rootScopes,s=bU(t._fallback,e,n),o=[...i,...r],l=new Set;l.add(n);let u=CU(l,o,e,s||e,n);return!(null===u||yg(s)&&s!==e&&(u=CU(l,o,s,u,n),null===u))&&fL(Array.from(l),[""],r,s,()=>function Whe(i,t,e){const n=i._getTarget();t in n||(n[t]={});const r=n[t];return Rl(r)&&ea(e)?e:r}(t,e,n))}function CU(i,t,e,n,r){for(;e;)e=Ghe(i,t,e,n,r);return e}function wU(i,t){for(const e of t){if(!e)continue;const n=e[i];if(yg(n))return n}}function AU(i){let t=i._keys;return t||(t=i._keys=function $he(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}(i._scopes)),t}function xU(i,t,e,n){const{iScale:r}=i,{key:s="r"}=this._parsing,o=new Array(n);let l,u,p,v;for(l=0,u=n;l<u;++l)p=l+e,v=t[p],o[l]={r:r.parse(u_(v,s),p)};return o}const qhe=Number.EPSILON||1e-14,vC=(i,t)=>t<i.length&&!i[t].skip&&i[t],IU=i=>"x"===i?"y":"x";function Xhe(i,t,e,n){const r=i.skip?t:i,s=t,o=e.skip?t:e,l=eL(s,r),u=eL(o,s);let p=l/(l+u),v=u/(l+u);p=isNaN(p)?0:p,v=isNaN(v)?0:v;const w=n*p,I=n*v;return{previous:{x:s.x-w*(o.x-r.x),y:s.y-w*(o.y-r.y)},next:{x:s.x+I*(o.x-r.x),y:s.y+I*(o.y-r.y)}}}function dS(i,t,e){return Math.max(Math.min(i,e),t)}function Jhe(i,t,e,n,r){let s,o,l,u;if(t.spanGaps&&(i=i.filter(p=>!p.skip)),"monotone"===t.cubicInterpolationMode)!function Zhe(i,t="x"){const e=IU(t),n=i.length,r=Array(n).fill(0),s=Array(n);let o,l,u,p=vC(i,0);for(o=0;o<n;++o)if(l=u,u=p,p=vC(i,o+1),u){if(p){const v=p[t]-u[t];r[o]=0!==v?(p[e]-u[e])/v:0}s[o]=l?p?lv(r[o-1])!==lv(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function Yhe(i,t,e){const n=i.length;let r,s,o,l,u,p=vC(i,0);for(let v=0;v<n-1;++v)if(u=p,p=vC(i,v+1),u&&p){if(FA(t[v],0,qhe)){e[v]=e[v+1]=0;continue}r=e[v]/t[v],s=e[v+1]/t[v],l=Math.pow(r,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),e[v]=r*o*t[v],e[v+1]=s*o*t[v])}})(i,r,s),function Khe(i,t,e="x"){const n=IU(e),r=i.length;let s,o,l,u=vC(i,0);for(let p=0;p<r;++p){if(o=l,l=u,u=vC(i,p+1),!l)continue;const v=l[e],w=l[n];o&&(s=(v-o[e])/3,l[`cp1${e}`]=v-s,l[`cp1${n}`]=w-s*t[p]),u&&(s=(u[e]-v)/3,l[`cp2${e}`]=v+s,l[`cp2${n}`]=w+s*t[p])}}(i,s,t)}(i,r);else{let p=n?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)l=i[s],u=Xhe(p,l,i[Math.min(s+1,o-(n?0:1))%o],t.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,p=l}t.capBezierPoints&&function Qhe(i,t){let e,n,r,s,o,l=HA(i[0],t);for(e=0,n=i.length;e<n;++e)o=s,s=l,l=e<n-1&&HA(i[e+1],t),s&&(r=i[e],o&&(r.cp1x=dS(r.cp1x,t.left,t.right),r.cp1y=dS(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=dS(r.cp2x,t.left,t.right),r.cp2y=dS(r.cp2y,t.top,t.bottom)))}(i,e)}function SU(){return typeof window<"u"&&typeof document<"u"}function mL(i){let t=i.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function fS(i,t,e){let n;return"string"==typeof i?(n=parseInt(i,10),-1!==i.indexOf("%")&&(n=n/100*t.parentNode[e])):n=i,n}const pS=i=>window.getComputedStyle(i,null),tde=["top","right","bottom","left"];function M0(i,t,e){const n={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=tde[r];n[s]=parseFloat(i[t+"-"+s+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function D0(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,r=pS(e),s="border-box"===r.boxSizing,o=M0(r,"padding"),l=M0(r,"border","width"),{x:u,y:p,box:v}=function ide(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:s}=n;let l,u,o=!1;if(((i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot))(r,s,i.target))l=r,u=s;else{const p=t.getBoundingClientRect();l=n.clientX-p.left,u=n.clientY-p.top,o=!0}return{x:l,y:u,box:o}}(i,e),w=o.left+(v&&l.left),I=o.top+(v&&l.top);let{width:T,height:k}=t;return s&&(T-=o.width+l.width,k-=o.height+l.height),{x:Math.round((u-w)/T*e.width/n),y:Math.round((p-I)/k*e.height/n)}}const vL=i=>Math.round(10*i)/10;function EU(i,t,e){const n=t||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=r/n,i.width=s/n;const o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==n||o.height!==r||o.width!==s)&&(i.currentDevicePixelRatio=n,o.height=r,o.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0)}const ode=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return i}();function TU(i,t){const e=function ede(i,t){return pS(i).getPropertyValue(t)}(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function L0(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function ade(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:"middle"===n?e<.5?i.y:t.y:"after"===n?e<1?i.y:t.y:e>0?t.y:i.y}}function lde(i,t,e,n){const r={x:i.cp2x,y:i.cp2y},s={x:t.cp1x,y:t.cp1y},o=L0(i,r,e),l=L0(r,s,e),u=L0(s,t,e),p=L0(o,l,e),v=L0(l,u,e);return L0(p,v,e)}const MU=new Map;function jA(i,t,e){return function cde(i,t){t=t||{};const e=i+JSON.stringify(t);let n=MU.get(e);return n||(n=new Intl.NumberFormat(i,t),MU.set(e,n)),n}(t,e).format(i)}function yC(i,t,e){return i?function(i,t){return{x:e=>i+i+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,n)=>e-n,leftForLtr:(e,n)=>e-n}}(t,e):{x:i=>i,setWidth(i){},textAlign:i=>i,xPlus:(i,t)=>i+t,leftForLtr:(i,t)=>i}}function DU(i,t){let e,n;("ltr"===t||"rtl"===t)&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function LU(i,t){void 0!==t&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function RU(i){return"angle"===i?{between:NA,compare:Zue,normalize:Lp}:{between:uy,compare:(t,e)=>t-e,normalize:t=>t}}function PU({start:i,end:t,count:e,loop:n,style:r}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e==0,style:r}}function kU(i,t,e){if(!e)return[i];const{property:n,start:r,end:s}=e,o=t.length,{compare:l,between:u,normalize:p}=RU(n),{start:v,end:w,loop:I,style:T}=function dde(i,t,e){const{property:n,start:r,end:s}=e,{between:o,normalize:l}=RU(n),u=t.length;let I,T,{start:p,end:v,loop:w}=i;if(w){for(p+=u,v+=u,I=0,T=u;I<T&&o(l(t[p%u][n]),r,s);++I)p--,v--;p%=u,v%=u}return v<p&&(v+=u),{start:p,end:v,loop:w,style:i.style}}(i,t,e),k=[];let he,Te,Ae,W=!1,K=null;for(let at=v,Lt=v;at<=w;++at)Te=t[at%o],!Te.skip&&(he=p(Te[n]),he!==Ae&&(W=u(he,r,s),null===K&&(W||u(r,Ae,he)&&0!==l(r,Ae))&&(K=0===l(he,r)?at:Lt),null!==K&&(!W||0===l(s,he)||u(s,Ae,he))&&(k.push(PU({start:K,end:at,loop:I,count:o,style:T})),K=null),Lt=at,Ae=he));return null!==K&&k.push(PU({start:K,end:w,loop:I,count:o,style:T})),k}function OU(i,t){const e=[],n=i.segments;for(let r=0;r<n.length;r++){const s=kU(n[r],i.points,t);s.length&&e.push(...s)}return e}function NU(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function vde(i,t){return t&&JSON.stringify(i)!==JSON.stringify(t)}var fy=new class yde{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const o=e.duration;e.listeners[r].forEach(l=>l({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=J4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let u,o=s.length-1,l=!1;for(;o>=0;--o)u=s[o],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(t),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,n,t,"progress")),s.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const BU="transparent",_de={boolean:(i,t,e)=>e>.5?t:i,color(i,t,e){const n=pU(i||BU),r=n.valid&&pU(t||BU);return r&&r.valid?r.mix(n,e).hexString():t},number:(i,t,e)=>i+(t-i)*e};class bde{constructor(t,e,n,r){const s=e[n];r=WA([t.to,r,s,t.from]);const o=WA([t.from,s,r]);this._active=!0,this._fn=t.fn||_de[t.type||typeof o],this._easing=BA[t.easing]||BA.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=WA([t.to,e,r,t.from]),this._from=WA([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,s=this._from,o=this._loop,l=this._to;let u;if(this._active=s!==l&&(o||e<n),!this._active)return this._target[r]=l,void this._notify(!0);e<0?this._target[r]=s:(u=e/n%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(s,l,u))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}ia.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Ade=Object.keys(ia.animation);ia.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>"onProgress"!==i&&"onComplete"!==i&&"fn"!==i}),ia.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),ia.describe("animations",{_fallback:"animation"}),ia.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>0|i}}}});class zU{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!ea(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!ea(r))return;const s={};for(const o of Ade)s[o]=r[o];(Rl(r.properties)&&r.properties||[n]).forEach(o=>{(o===n||!e.has(o))&&e.set(o,s)})})}_animateOptions(t,e){const n=e.options,r=function Ide(i,t){if(!t)return;let e=i.options;if(e)return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;i.options=t}(t,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function xde(i,t){const e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const s=i[n[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,e){const n=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),l=Date.now();let u;for(u=o.length-1;u>=0;--u){const p=o[u];if("$"===p.charAt(0))continue;if("options"===p){r.push(...this._animateOptions(t,e));continue}const v=e[p];let w=s[p];const I=n.get(p);if(w){if(I&&w.active()){w.update(I,v,l);continue}w.cancel()}I&&I.duration?(s[p]=w=new bde(I,t,p,v),r.push(w)):t[p]=v}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(fy.add(this._chart,n),!0):void 0}}function VU(i,t){const e=i&&i.options||{},n=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:n?s:r,end:n?r:s}}function UU(i,t){const e=[],n=i._getSortedDatasetMetas(t);let r,s;for(r=0,s=n.length;r<s;++r)e.push(n[r].index);return e}function HU(i,t,e,n={}){const r=i.keys,s="single"===n.mode;let o,l,u,p;if(null!==t){for(o=0,l=r.length;o<l;++o){if(u=+r[o],u===e){if(n.all)continue;break}p=i.values[u],au(p)&&(s||0===t||lv(t)===lv(p))&&(t+=p)}return t}}function GU(i,t){const e=i&&i.options.stacked;return e||void 0===e&&void 0!==t.stack}function Lde(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function WU(i,t,e,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const s=i[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function jU(i,t){const{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:l}=n,u=s.axis,p=o.axis,v=function Mde(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}(s,o,n),w=t.length;let I;for(let T=0;T<w;++T){const k=t[T],{[u]:W,[p]:K}=k;I=(k._stacks||(k._stacks={}))[p]=Lde(r,v,W),I[l]=K,I._top=WU(I,o,!0,n.type),I._bottom=WU(I,o,!1,n.type)}}function yL(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function $A(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[n]||void 0===s[n][e])return;delete s[n][e]}}}const _L=i=>"reset"===i||"none"===i,$U=(i,t)=>t?i:Object.assign({},i);let cv=(()=>{class i{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=GU(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&$A(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(I,T,k,W)=>"x"===I?T:"r"===I?W:k,o=n.xAxisID=mo(r.xAxisID,yL(e,"x")),l=n.yAxisID=mo(r.yAxisID,yL(e,"y")),u=n.rAxisID=mo(r.rAxisID,yL(e,"r")),p=n.indexAxis,v=n.iAxisID=s(p,o,l,u),w=n.vAxisID=s(p,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(v),n.vScale=this.getScaleForId(w)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Z4(this._data,this),e._stacked&&$A(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ea(n))this._data=function Tde(i){const t=Object.keys(i),e=new Array(t.length);let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],e[n]={x:s,y:i[s]};return e}(n);else if(r!==n){if(r){Z4(r,this);const s=this._cachedMeta;$A(s),s._parsed=[]}n&&Object.isExtensible(n)&&function the(i,t){i._chartjs?i._chartjs.listeners.push(t):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),K4.forEach(e=>{const n="_onData"+Q2(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return i._chartjs.listeners.forEach(l=>{"function"==typeof l[n]&&l[n](...s)}),o}})}))}(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=n._stacked;n._stacked=GU(n.vScale,n),n.stack!==r.stack&&(s=!0,$A(n),n.stack=r.stack),this._resyncElements(e),(s||o!==n._stacked)&&jU(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:l}=r,u=o.axis;let w,I,T,p=0===e&&n===s.length||r._sorted,v=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,T=s;else{T=Rl(s[e])?this.parseArrayData(r,s,e,n):ea(s[e])?this.parseObjectData(r,s,e,n):this.parsePrimitiveData(r,s,e,n);const k=()=>null===I[u]||v&&I[u]<v[u];for(w=0;w<n;++w)r._parsed[w+e]=I=T[w],p&&(k()&&(p=!1),v=I);r._sorted=p}l&&jU(this,T)}parsePrimitiveData(e,n,r,s){const{iScale:o,vScale:l}=e,u=o.axis,p=l.axis,v=o.getLabels(),w=o===l,I=new Array(s);let T,k,W;for(T=0,k=s;T<k;++T)W=T+r,I[T]={[u]:w||o.parse(v[W],W),[p]:l.parse(n[W],W)};return I}parseArrayData(e,n,r,s){const{xScale:o,yScale:l}=e,u=new Array(s);let p,v,w,I;for(p=0,v=s;p<v;++p)w=p+r,I=n[w],u[p]={x:o.parse(I[0],w),y:l.parse(I[1],w)};return u}parseObjectData(e,n,r,s){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v=new Array(s);let w,I,T,k;for(w=0,I=s;w<I;++w)T=w+r,k=n[T],v[w]={x:o.parse(u_(k,u),T),y:l.parse(u_(k,p),T)};return v}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const o=this._cachedMeta,l=n[e.axis];return HU({keys:UU(this.chart,!0),values:n._stacks[e.axis]},l,o.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const o=r[n.axis];let l=null===o?NaN:o;const u=s&&r._stacks[n.axis];s&&u&&(s.values=u,l=HU(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,l=s.length,u=this._getOtherScale(e),p=((i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:UU(this.chart,!0),values:null})(n,r),v={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:w,max:I}=function Dde(i){const{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(u);let T,k;function W(){k=s[T];const K=k[u.axis];return!au(k[e.axis])||w>K||I<K}for(T=0;T<l&&(W()||(this.updateRangeFromParsed(v,e,k,p),!o));++T);if(o)for(T=l-1;T>=0;--T)if(!W()){this.updateRangeFromParsed(v,e,k,p);break}return v}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,o,l;for(s=0,o=n.length;s<o;++s)l=n[s][e.axis],au(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=function Ede(i){let t,e,n,r;return ea(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:!1===i}}(mo(this.options.clip,function Sde(i,t,e){if(!1===e)return!1;const n=VU(i,e),r=VU(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,l=[],u=this._drawStart||0,p=this._drawCount||s.length-u,v=this.options.drawActiveElementsOnTop;let w;for(r.dataset&&r.dataset.draw(e,o,u,p),w=u;w<u+p;++w){const I=s[w];I.hidden||(I.active&&v?l.push(I):I.draw(e,o))}for(w=0;w<l.length;++w)l[w].draw(e,o)}getStyle(e,n){const r=n?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=function Pde(i,t,e){return p_(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function Rde(i,t){return p_(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s="active"===n,o=this._cachedDataOpts,l=e+"-"+n,u=o[l],p=this.enableOptionSharing&&yg(r);if(u)return $U(u,p);const v=this.chart.config,w=v.datasetElementScopeKeys(this._type,e),I=s?[`${e}Hover`,"hover",e,""]:[e,""],T=v.getOptionScopes(this.getDataset(),w),k=Object.keys(ia.elements[e]),K=v.resolveNamedOptions(T,k,()=>this.getContext(r,s),I);return K.$shared&&(K.$shared=p,o[l]=Object.freeze($U(K,p))),K}_resolveAnimations(e,n,r){const s=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let p;if(!1!==s.options.animation){const w=this.chart.config,I=w.datasetAnimationScopeKeys(this._type,n),T=w.getOptionScopes(this.getDataset(),I);p=w.createResolver(T,this.getContext(e,r,n))}const v=new zU(s,p&&p.animations);return p&&p._cacheable&&(o[l]=Object.freeze(v)),v}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||_L(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,r),{sharedOptions:o,includeOptions:l}}updateElement(e,n,r,s){_L(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!_L(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const o=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[u,p,v]of this._syncList)this[u](p,v);this._syncList=[];const s=r.length,o=n.length,l=Math.min(o,s);l&&this.parse(0,l),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,n,r=!0){const s=this._cachedMeta,o=s.data,l=e+n;let u;const p=v=>{for(v.length+=n,u=v.length-1;u>=l;u--)v[u]=v[u-n]};for(p(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&p(s._parsed),this.parse(e,n),r&&this.updateElements(o,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&$A(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i.defaults={},i})();function Fde(i){const t=i.iScale,e=function Ode(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let r=0,s=e.length;r<s;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=Q4(n.sort((r,s)=>r-s))}return i._cache.$bar}(t,i.type);let r,s,o,l,n=t._length;const u=()=>{32767===o||-32768===o||(yg(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),u();for(l=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),u();return n}function qU(i,t,e,n){return Rl(i)?function zde(i,t,e,n){const r=e.parse(i[0],n),s=e.parse(i[1],n),o=Math.min(r,s),l=Math.max(r,s);let u=o,p=l;Math.abs(o)>Math.abs(l)&&(u=l,p=o),t[e.axis]=p,t._custom={barStart:u,barEnd:p,start:r,end:s,min:o,max:l}}(i,t,e,n):t[e.axis]=e.parse(i,n),t}function XU(i,t,e,n){const r=i.iScale,s=i.vScale,o=r.getLabels(),l=r===s,u=[];let p,v,w,I;for(p=e,v=e+n;p<v;++p)I=t[p],w={},w[r.axis]=l||r.parse(o[p],p),u.push(qU(I,w,s,p));return u}function bL(i){return i&&void 0!==i.barStart&&void 0!==i.barEnd}function Hde(i,t,e,n){let r=t.borderSkipped;const s={};if(!r)return void(i.borderSkipped=s);if(!0===r)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:l,reverse:u,top:p,bottom:v}=function Ude(i){let t,e,n,r,s;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:n,reverse:t,top:r,bottom:s}}(i);"middle"===r&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=p:(e._bottom||0)===n?r=v:(s[YU(v,o,l,u)]=!0,r=p)),s[YU(r,o,l,u)]=!0,i.borderSkipped=s}function YU(i,t,e,n){return n?(i=function Gde(i,t,e){return i===t?e:i===e?t:i}(i,t,e),i=KU(i,e,t)):i=KU(i,t,e),i}function KU(i,t,e){return"start"===i?t:"end"===i?e:i}function Wde(i,{inflateAmount:t},e){i.inflateAmount="auto"===t?1===e?.33:0:t}cv.prototype.datasetElementType=null,cv.prototype.dataElementType=null;let jde=(()=>{class i extends cv{parsePrimitiveData(e,n,r,s){return XU(e,n,r,s)}parseArrayData(e,n,r,s){return XU(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:o,vScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v="x"===o.axis?u:p,w="x"===l.axis?u:p,I=[];let T,k,W,K;for(T=r,k=r+s;T<k;++T)K=n[T],W={},W[o.axis]=o.parse(u_(K,v),T),I.push(qU(u_(K,w),W,l,T));return I}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const o=r._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,o=this.getParsed(e),l=o._custom,u=bL(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const o="reset"===s,{index:l,_cachedMeta:{vScale:u}}=this,p=u.getBasePixel(),v=u.isHorizontal(),w=this._getRuler(),{sharedOptions:I,includeOptions:T}=this._getSharedOptions(n,s);for(let k=n;k<n+r;k++){const W=this.getParsed(k),K=o||ga(W[u.axis])?{base:p,head:p}:this._calculateBarValuePixels(k),he=this._calculateBarIndexPixels(k,w),Te=(W._stacks||{})[u.axis],Ae={horizontal:v,base:K.base,enableBorderRadius:!Te||bL(W._custom)||l===Te._top||l===Te._bottom,x:v?K.head:he.center,y:v?he.center:K.head,height:v?he.size:Math.abs(K.size),width:v?Math.abs(K.size):he.size};T&&(Ae.options=I||this.resolveDataElementOptions(k,e[k].active?"active":s));const Le=Ae.options||e[k].options;Hde(Ae,Le,Te,l),Wde(Ae,Le,w.ratio),this.updateElement(e[k],k,Ae,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=r.options.stacked,l=[],u=p=>{const v=p.controller.getParsed(n),w=v&&v[p.vScale.axis];if(ga(w)||isNaN(w))return!0};for(const p of s)if((void 0===n||!u(p))&&((!1===o||-1===l.indexOf(p.stack)||void 0===o&&void 0===p.stack)&&l.push(p.stack),p.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),o=void 0!==n?s.indexOf(n):-1;return-1===o?s.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let o,l;for(o=0,l=n.data.length;o<l;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const u=e.barThickness;return{min:u||Fde(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r},options:{base:s,minBarLength:o}}=this,l=s||0,u=this.getParsed(e),p=u._custom,v=bL(p);let k,W,w=u[n.axis],I=0,T=r?this.applyStack(n,u,r):w;T!==w&&(I=T-w,T=w),v&&(w=p.barStart,T=p.barEnd-p.barStart,0!==w&&lv(w)!==lv(p.barEnd)&&(I=0),I+=w);const K=ga(s)||v?I:s;let he=n.getPixelForValue(K);if(k=this.chart.getDataVisibility(e)?n.getPixelForValue(I+T):he,W=k-he,Math.abs(W)<o){W=function Vde(i,t,e){return 0!==i?lv(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(W,n,l)*o,w===l&&(he-=W/2);const Te=n.getPixelForDecimal(0),Ae=n.getPixelForDecimal(1),Le=Math.min(Te,Ae),tt=Math.max(Te,Ae);he=Math.max(Math.min(he,tt),Le),k=he+W}if(he===n.getPixelForValue(l)){const Te=lv(W)*n.getLineWidthForValue(l)/2;he+=Te,W-=Te}return{size:W,base:he,head:k,center:k+W/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,o=s.skipNull,l=mo(s.maxBarThickness,1/0);let u,p;if(n.grouped){const v=o?this._getStackCount(e):n.stackCount,w="flex"===s.barThickness?function Bde(i,t,e,n){const r=t.pixels,s=r[i];let o=i>0?r[i-1]:null,l=i<r.length-1?r[i+1]:null;const u=e.categoryPercentage;null===o&&(o=s-(null===l?t.end-t.start:l-s)),null===l&&(l=s+s-o);const p=s-(s-Math.min(o,l))/2*u;return{chunk:Math.abs(l-o)/2*u/n,ratio:e.barPercentage,start:p}}(e,n,s,v):function Nde(i,t,e,n){const r=e.barThickness;let s,o;return ga(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*n,o=1),{chunk:s/n,ratio:o,start:t.pixels[i]-s/2}}(e,n,s,v),I=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);u=w.start+w.chunk*I+w.chunk/2,p=Math.min(l,w.chunk*w.ratio)}else u=r.getPixelForValue(this.getParsed(e)[r.axis],e),p=Math.min(l,n.min*n.ratio);return{base:u-p/2,head:u+p/2,center:u,size:p}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[n.axis]&&r[o].draw(this._ctx)}}return i.id="bar",i.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},i.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},i})(),$de=(()=>{class i extends cv{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,s){const o=super.parsePrimitiveData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+r).radius;return o}parseArrayData(e,n,r,s){const o=super.parseArrayData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=mo(n[r+l][2],this.resolveDataElementOptions(l+r).radius);return o}parseObjectData(e,n,r,s){const o=super.parseObjectData(e,n,r,s);for(let l=0;l<o.length;l++){const u=n[r+l];o[l]._custom=mo(u&&u.r&&+u.r,this.resolveDataElementOptions(l+r).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,{xScale:r,yScale:s}=n,o=this.getParsed(e),l=r.getLabelForValue(o.x),u=s.getLabelForValue(o.y),p=o._custom;return{label:n.label,value:"("+l+", "+u+(p?", "+p:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u}=this._cachedMeta,{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,s),w=l.axis,I=u.axis;for(let T=n;T<n+r;T++){const k=e[T],W=!o&&this.getParsed(T),K={},he=K[w]=o?l.getPixelForDecimal(.5):l.getPixelForValue(W[w]),Te=K[I]=o?u.getBasePixel():u.getPixelForValue(W[I]);K.skip=isNaN(he)||isNaN(Te),v&&(K.options=p||this.resolveDataElementOptions(T,k.active?"active":s),o&&(K.options.radius=0)),this.updateElement(k,T,K,s)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==n&&(s.radius=0),s.radius+=mo(r&&r._custom,o),s}}return i.id="bubble",i.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},i.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},i})(),ZU=(()=>{class i extends cv{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let l,u,o=p=>+r[p];if(ea(r[e])){const{key:p="value"}=this._parsing;o=v=>+u_(r[v],p)}for(l=e,u=e+n;l<u;++l)s._parsed[l]=o(l)}}_getRotation(){return gm(this.options.rotation-90)}_getCircumference(){return gm(this.options.circumference)}_getRotationExtents(){let e=dl,n=-dl;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),l=s._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,o=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(r.width,r.height)-l)/2,0),p=Math.min(((i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100:i/t)(this.options.cutout,u),1),v=this._getRingWeight(this.index),{circumference:w,rotation:I}=this._getRotationExtents(),{ratioX:T,ratioY:k,offsetX:W,offsetY:K}=function qde(i,t,e){let n=1,r=1,s=0,o=0;if(t<dl){const l=i,u=l+t,p=Math.cos(l),v=Math.sin(l),w=Math.cos(u),I=Math.sin(u),T=(Ae,Le,tt)=>NA(Ae,l,u,!0)?1:Math.max(Le,Le*e,tt,tt*e),k=(Ae,Le,tt)=>NA(Ae,l,u,!0)?-1:Math.min(Le,Le*e,tt,tt*e),W=T(0,p,w),K=T(Yc,v,I),he=k(ac,p,w),Te=k(ac+Yc,v,I);n=(W-he)/2,r=(K-Te)/2,s=-(W+he)/2,o=-(K+Te)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:o}}(I,w,p),Ae=Math.max(Math.min((r.width-l)/T,(r.height-l)/k)/2,0),Le=U4(this.options.radius,Ae),_t=(Le-Math.max(Le*p,0))/this._getVisibleDatasetWeightTotal();this.offsetX=W*Le,this.offsetY=K*Le,s.total=this.calculateTotal(),this.outerRadius=Le-_t*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_t*v,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/dl)}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,u=l.chartArea,w=(u.left+u.right)/2,I=(u.top+u.bottom)/2,T=o&&l.options.animation.animateScale,k=T?0:this.innerRadius,W=T?0:this.outerRadius,{sharedOptions:K,includeOptions:he}=this._getSharedOptions(n,s);let Ae,Te=this._getRotation();for(Ae=0;Ae<n;++Ae)Te+=this._circumference(Ae,o);for(Ae=n;Ae<n+r;++Ae){const Le=this._circumference(Ae,o),tt=e[Ae],_t={x:w+this.offsetX,y:I+this.offsetY,startAngle:Te,endAngle:Te+Le,circumference:Le,outerRadius:W,innerRadius:k};he&&(_t.options=K||this.resolveDataElementOptions(Ae,tt.active?"active":s)),Te+=Le,this.updateElement(tt,Ae,_t,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s,r=0;for(s=0;s<n.length;s++){const o=e._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?dl*(Math.abs(e)/n):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=jA(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,o,l,u,p;if(!e)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){l=r.getDatasetMeta(s),e=l.data,u=l.controller;break}if(!e)return 0;for(s=0,o=e.length;s<o;++s)p=u.resolveDataElementOptions(s),"inner"!==p.borderAlign&&(n=Math.max(n,p.borderWidth||0,p.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(mo(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i.id="doughnut",i.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},i.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return Rl(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}},i})(),Xde=(()=>{class i extends cv{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:p}=tU(n,s,l);this._drawStart=u,this._drawCount=p,nU(n)&&(u=0,p=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const v=this.resolveDatasetElementOptions(e);this.options.showLine||(v.borderWidth=0),v.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:v},e),this.updateElements(s,u,p,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,{sharedOptions:w,includeOptions:I}=this._getSharedOptions(n,s),T=l.axis,k=u.axis,{spanGaps:W,segment:K}=this.options,he=pC(W)?W:Number.POSITIVE_INFINITY,Te=this.chart._animationsDisabled||o||"none"===s;let Ae=n>0&&this.getParsed(n-1);for(let Le=n;Le<n+r;++Le){const tt=e[Le],_t=this.getParsed(Le),Ut=Te?tt:{},at=ga(_t[k]),Lt=Ut[T]=l.getPixelForValue(_t[T],Le),cn=Ut[k]=o||at?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,_t,p):_t[k],Le);Ut.skip=isNaN(Lt)||isNaN(cn)||at,Ut.stop=Le>0&&Math.abs(_t[T]-Ae[T])>he,K&&(Ut.parsed=_t,Ut.raw=v.data[Le]),I&&(Ut.options=w||this.resolveDataElementOptions(Le,tt.active?"active":s)),Te||this.updateElement(tt,Le,Ut,s),Ae=_t}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i.id="line",i.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},i.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},i})(),Yde=(()=>{class i extends cv{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=jA(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,n,r,s){return xU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(s/2,0),u=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,p=l.options.animation,v=this._cachedMeta.rScale,w=v.xCenter,I=v.yCenter,T=v.getIndexAngle(0)-.5*ac;let W,k=T;const K=360/this.countVisibleElements();for(W=0;W<n;++W)k+=this._computeAngle(W,s,K);for(W=n;W<n+r;W++){const he=e[W];let Te=k,Ae=k+this._computeAngle(W,s,K),Le=l.getDataVisibility(W)?v.getDistanceFromCenterForValue(this.getParsed(W).r):0;k=Ae,o&&(p.animateScale&&(Le=0),p.animateRotate&&(Te=Ae=T));const tt={x:w,y:I,innerRadius:0,outerRadius:Le,startAngle:Te,endAngle:Ae,options:this.resolveDataElementOptions(W,he.active?"active":s)};this.updateElement(he,W,tt,s)}}countVisibleElements(){let n=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?gm(this.resolveDataElementOptions(e,n).angle||r):0}}return i.id="polarArea",i.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},i})(),Kde=(()=>{class i extends ZU{}return i.id="pie",i.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},i})(),Zde=(()=>{class i extends cv{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return xU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta,r=n.dataset,s=n.data||[],o=n.iScale.getLabels();if(r.points=s,"resize"!==e){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:l},e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){const o=this._cachedMeta.rScale,l="reset"===s;for(let u=n;u<n+r;u++){const p=e[u],v=this.resolveDataElementOptions(u,p.active?"active":s),w=o.getPointPositionForValue(u,this.getParsed(u).r),I=l?o.xCenter:w.x,T=l?o.yCenter:w.y,k={x:I,y:T,angle:w.angle,skip:isNaN(I)||isNaN(T),options:v};this.updateElement(p,u,k,s)}}}return i.id="radar",i.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},i.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},i})();class mm{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return pC(this.x)&&pC(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}}mm.defaults={},mm.defaultRoutes=void 0;const QU={values:i=>Rl(i)?i:""+i,numeric(i,t,e){if(0===i)return"0";const n=this.chart.options.locale;let r,s=i;if(e.length>1){const p=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),s=function Qde(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}(i,e)}const o=_g(Math.abs(s)),l=Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),jA(i,n,u)},logarithmic(i,t,e){if(0===i)return"0";const n=i/Math.pow(10,Math.floor(_g(i)));return 1===n||2===n||5===n?QU.numeric.call(this,i,t,e):""}};var gS={formatters:QU};function mS(i,t,e,n,r){const s=mo(n,0),o=Math.min(mo(r,i.length),i.length);let u,p,v,l=0;for(e=Math.ceil(e),r&&(u=r-n,e=u/Math.floor(u/e)),v=s;v<0;)l++,v=Math.round(s+l*e);for(p=Math.max(s,0);p<o;p++)p===v&&(t.push(i[p]),l++,v=Math.round(s+l*e))}ia.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,t)=>t.lineWidth,tickColor:(i,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),ia.route("scale.ticks","color","","color"),ia.route("scale.grid","color","","borderColor"),ia.route("scale.grid","borderColor","","borderColor"),ia.route("scale.title","color","","color"),ia.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&"callback"!==i&&"parser"!==i,_indexable:i=>"borderDash"!==i&&"tickBorderDash"!==i}),ia.describe("scales",{_fallback:"scale"}),ia.describe("scale.ticks",{_scriptable:i=>"backdropPadding"!==i&&"callback"!==i,_indexable:i=>"backdropPadding"!==i});const JU=(i,t,e)=>"top"===t||"left"===t?i[t]+e:i[t]-e;function eH(i,t){const e=[],n=i.length/t,r=i.length;let s=0;for(;s<r;s+=n)e.push(i[Math.floor(s)]);return e}function ofe(i,t,e){const n=i.ticks.length,r=Math.min(t,n-1),s=i._startPixel,o=i._endPixel,l=1e-6;let p,u=i.getPixelForTick(r);if(!(e&&(p=1===n?Math.max(u-s,o-u):0===t?(i.getPixelForTick(1)-u)/2:(u-i.getPixelForTick(r-1))/2,u+=r<t?p:-p,u<s-l||u>o+l)))return u}function qA(i){return i.drawTicks?i.tickLength:0}function tH(i,t){if(!i.display)return 0;const e=Qu(i.font,t),n=Td(i.padding);return(Rl(i.text)?i.text.length:1)*e.lineHeight+n.height}function ufe(i,t,e){let n=nL(i);return(e&&"right"!==t||!e&&"right"===t)&&(n=(i=>"left"===i?"right":"right"===i?"left":i)(n)),n}class R0 extends mm{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=vg(t,Number.POSITIVE_INFINITY),e=vg(e,Number.NEGATIVE_INFINITY),n=vg(n,Number.POSITIVE_INFINITY),r=vg(r,Number.NEGATIVE_INFINITY),{min:vg(t,n),max:vg(e,r),minDefined:au(t),maxDefined:au(e)}}getMinMax(t){let o,{min:e,max:n,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:n};const l=this.getMatchingVisibleMetas();for(let u=0,p=l.length;u<p;++u)o=l[u].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(n=Math.max(n,o.max));return e=s&&e>n?n:e,n=r&&e>n?e:n,{min:vg(e,vg(n,e)),max:vg(n,vg(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pl(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function Nhe(i,t,e){const{min:n,max:r}=i,s=U4(t,(r-n)/2),o=(l,u)=>e&&0===l?0:l+u;return{min:o(n,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?eH(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function Jde(i,t){const e=i.options.ticks,n=e.maxTicksLimit||function efe(i){const t=i.options.offset,e=i._tickSize();return Math.floor(Math.min(i._length/e+(t?0:1),i._maxLength/e))}(i),r=e.major.enabled?function nfe(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}(t):[],s=r.length,o=r[0],l=r[s-1],u=[];if(s>n)return function ife(i,t,e,n){let o,r=0,s=e[0];for(n=Math.ceil(n),o=0;o<i.length;o++)o===s&&(t.push(i[o]),r++,s=e[r*n])}(t,u,r,s/n),u;const p=function tfe(i,t,e){const n=function rfe(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}(i),r=t.length/e;if(!n)return Math.max(r,1);const s=function Yue(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n==0&&(t.push(n),t.push(i/n));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(n);for(let o=0,l=s.length-1;o<l;o++){const u=s[o];if(u>r)return u}return Math.max(r,1)}(r,t,n);if(s>0){let v,w;const I=s>1?Math.round((l-o)/(s-1)):null;for(mS(t,u,p,ga(I)?0:o-I,o),v=0,w=s-1;v<w;v++)mS(t,u,p,r[v],r[v+1]);return mS(t,u,p,l,ga(I)?t.length:l+I),u}return mS(t,u,p),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,n,t=this.options.reverse;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pl(this.options.afterUpdate,[this])}beforeSetDimensions(){Pl(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pl(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Pl(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pl(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.label=Pl(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){Pl(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pl(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,r=e.minRotation||0,s=e.maxRotation;let l,u,p,o=r;if(!this._isVisible()||!e.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const v=this._getLabelSizes(),w=v.widest.width,I=v.highest.height,T=Ch(this.chart.width-w,0,this.maxWidth);l=t.offset?this.maxWidth/n:T/(n-1),w+6>l&&(l=T/(n-(t.offset?.5:1)),u=this.maxHeight-qA(t.grid)-e.padding-tH(t.title,this.chart.options.font),p=Math.sqrt(w*w+I*I),o=J2(Math.min(Math.asin(Ch((v.highest.height+6)/l,-1,1)),Math.asin(Ch(u/p,-1,1))-Math.asin(Ch(I/p,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pl(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pl(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const u=tH(r,e.options.font);if(l?(t.width=this.maxWidth,t.height=qA(s)+u):(t.height=this.maxHeight,t.width=qA(s)+u),n.display&&this.ticks.length){const{first:p,last:v,widest:w,highest:I}=this._getLabelSizes(),T=2*n.padding,k=gm(this.labelRotation),W=Math.cos(k),K=Math.sin(k);l?t.height=Math.min(this.maxHeight,t.height+(n.mirror?0:K*w.width+W*I.height)+T):t.width=Math.min(this.maxWidth,t.width+(n.mirror?0:W*w.width+K*I.height)+T),this._calculatePadding(p,v,K,W)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:s,padding:o},position:l}=this.options,u=0!==this.labelRotation,p="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let I=0,T=0;u?p?(I=r*t.width,T=n*e.height):(I=n*t.height,T=r*e.width):"start"===s?T=e.width:"end"===s?I=t.width:"inner"!==s&&(I=t.width/2,T=e.width/2),this.paddingLeft=Math.max((I-v+o)*this.width/(this.width-v),0),this.paddingRight=Math.max((T-w+o)*this.width/(this.width-w),0)}else{let v=e.height/2,w=t.height/2;"start"===s?(v=0,w=t.height):"end"===s&&(v=e.height,w=0),this.paddingTop=v+o,this.paddingBottom=w+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pl(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)ga(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=eH(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:r}=this,s=[],o=[];let p,v,w,I,T,k,W,K,he,Te,Ae,l=0,u=0;for(p=0;p<e;++p){if(I=t[p].label,T=this._resolveTickFontOptions(p),n.font=k=T.string,W=r[k]=r[k]||{data:{},gc:[]},K=T.lineHeight,he=Te=0,ga(I)||Rl(I)){if(Rl(I))for(v=0,w=I.length;v<w;++v)Ae=I[v],!ga(Ae)&&!Rl(Ae)&&(he=cS(n,W.data,W.gc,he,Ae),Te+=K)}else he=cS(n,W.data,W.gc,he,I),Te=K;s.push(he),o.push(Te),l=Math.max(he,l),u=Math.max(Te,u)}!function afe(i,t){nl(i,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(r,e);const Le=s.indexOf(l),tt=o.indexOf(u),_t=Ut=>({width:s[Ut]||0,height:o[Ut]||0});return{first:_t(0),last:_t(e-1),widest:_t(Le),highest:_t(tt),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function Que(i){return Ch(i,-32768,32767)}(this._alignToPixels?S0(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function cfe(i,t,e){return p_(i,{tick:e,index:t,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=function lfe(i,t){return p_(i,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=gm(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,l=s?s.widest.width+o:0,u=s?s.highest.height+o:0;return this.isHorizontal()?u*n>l*r?l/n:u/r:u*r<l*n?u/n:l/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:s,position:o}=r,l=s.offset,u=this.isHorizontal(),v=this.ticks.length+(l?1:0),w=qA(s),I=[],T=s.setContext(this.getContext()),k=T.drawBorder?T.borderWidth:0,W=k/2,K=function(Un){return S0(n,Un,k)};let he,Te,Ae,Le,tt,_t,Ut,at,Lt,cn,Gn,ii;if("top"===o)he=K(this.bottom),_t=this.bottom-w,at=he-W,cn=K(t.top)+W,ii=t.bottom;else if("bottom"===o)he=K(this.top),cn=t.top,ii=K(t.bottom)-W,_t=he+W,at=this.top+w;else if("left"===o)he=K(this.right),tt=this.right-w,Ut=he-W,Lt=K(t.left)+W,Gn=t.right;else if("right"===o)he=K(this.left),Lt=t.left,Gn=K(t.right)-W,tt=he+W,Ut=this.left+w;else if("x"===e){if("center"===o)he=K((t.top+t.bottom)/2+.5);else if(ea(o)){const Un=Object.keys(o)[0];he=K(this.chart.scales[Un].getPixelForValue(o[Un]))}cn=t.top,ii=t.bottom,_t=he+W,at=_t+w}else if("y"===e){if("center"===o)he=K((t.left+t.right)/2);else if(ea(o)){const Un=Object.keys(o)[0];he=K(this.chart.scales[Un].getPixelForValue(o[Un]))}tt=he-W,Ut=tt-w,Lt=t.left,Gn=t.right}const jn=mo(r.ticks.maxTicksLimit,v),Mn=Math.max(1,Math.ceil(v/jn));for(Te=0;Te<v;Te+=Mn){const Un=s.setContext(this.getContext(Te)),In=Un.lineWidth,Wn=Un.color,zn=Un.borderDash||[],Sn=Un.borderDashOffset,Hn=Un.tickWidth,Yi=Un.tickColor,Ti=Un.tickBorderDash||[],sr=Un.tickBorderDashOffset;Ae=ofe(this,Te,l),void 0!==Ae&&(Le=S0(n,Ae,In),u?tt=Ut=Lt=Gn=Le:_t=at=cn=ii=Le,I.push({tx1:tt,ty1:_t,tx2:Ut,ty2:at,x1:Lt,y1:cn,x2:Gn,y2:ii,width:In,color:Wn,borderDash:zn,borderDashOffset:Sn,tickWidth:Hn,tickColor:Yi,tickBorderDash:Ti,tickBorderDashOffset:sr}))}return this._ticksLength=v,this._borderValue=he,I}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:s}=n,o=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:p,padding:v,mirror:w}=s,I=qA(n.grid),T=I+v,k=w?-v:T,W=-gm(this.labelRotation),K=[];let he,Te,Ae,Le,tt,_t,Ut,at,Lt,cn,Gn,ii,jn="middle";if("top"===r)_t=this.bottom-k,Ut=this._getXAxisLabelAlignment();else if("bottom"===r)_t=this.top+k,Ut=this._getXAxisLabelAlignment();else if("left"===r){const Un=this._getYAxisLabelAlignment(I);Ut=Un.textAlign,tt=Un.x}else if("right"===r){const Un=this._getYAxisLabelAlignment(I);Ut=Un.textAlign,tt=Un.x}else if("x"===e){if("center"===r)_t=(t.top+t.bottom)/2+T;else if(ea(r)){const Un=Object.keys(r)[0];_t=this.chart.scales[Un].getPixelForValue(r[Un])+T}Ut=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)tt=(t.left+t.right)/2-T;else if(ea(r)){const Un=Object.keys(r)[0];tt=this.chart.scales[Un].getPixelForValue(r[Un])}Ut=this._getYAxisLabelAlignment(I).textAlign}"y"===e&&("start"===u?jn="top":"end"===u&&(jn="bottom"));const Mn=this._getLabelSizes();for(he=0,Te=l.length;he<Te;++he){Ae=l[he],Le=Ae.label;const Un=s.setContext(this.getContext(he));at=this.getPixelForTick(he)+s.labelOffset,Lt=this._resolveTickFontOptions(he),cn=Lt.lineHeight,Gn=Rl(Le)?Le.length:1;const In=Gn/2,Wn=Un.color,zn=Un.textStrokeColor,Sn=Un.textStrokeWidth;let Yi,Hn=Ut;if(o?(tt=at,"inner"===Ut&&(Hn=he===Te-1?this.options.reverse?"left":"right":0===he?this.options.reverse?"right":"left":"center"),ii="top"===r?"near"===p||0!==W?-Gn*cn+cn/2:"center"===p?-Mn.highest.height/2-In*cn+cn:cn/2-Mn.highest.height:"near"===p||0!==W?cn/2:"center"===p?Mn.highest.height/2-In*cn:Mn.highest.height-Gn*cn,w&&(ii*=-1)):(_t=at,ii=(1-Gn)*cn/2),Un.showLabelBackdrop){const Ti=Td(Un.backdropPadding),sr=Mn.heights[he],fr=Mn.widths[he];let Es=_t+ii-Ti.top,Li=tt-Ti.left;switch(jn){case"middle":Es-=sr/2;break;case"bottom":Es-=sr}switch(Ut){case"center":Li-=fr/2;break;case"right":Li-=fr}Yi={left:Li,top:Es,width:fr+Ti.width,height:sr+Ti.height,color:Un.backdropColor}}K.push({rotation:W,label:Le,font:Lt,color:Wn,strokeColor:zn,strokeWidth:Sn,textOffset:ii,textAlign:Hn,textBaseline:jn,translation:[tt,_t],backdrop:Yi})}return K}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-gm(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,l=t+s,u=this._getLabelSizes().widest.width;let p,v;return"left"===e?r?(v=this.right+s,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v+=u)):(v=this.right-l,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v=this.left)):"right"===e?r?(v=this.left+s,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v-=u)):(v=this.left+l,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const l=(u,p,v)=>{!v.width||!v.color||(n.save(),n.lineWidth=v.width,n.strokeStyle=v.color,n.setLineDash(v.borderDash||[]),n.lineDashOffset=v.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(p.x,p.y),n.stroke(),n.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const u=r[s];e.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),e.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,r=n.setContext(this.getContext()),s=n.drawBorder?r.borderWidth:0;if(!s)return;const o=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,p,v,w;this.isHorizontal()?(u=S0(t,this.left,s)-s/2,p=S0(t,this.right,o)+o/2,v=w=l):(v=S0(t,this.top,s)-s/2,w=S0(t,this.bottom,o)+o/2,u=p=l),e.save(),e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(u,v),e.lineTo(p,w),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&uS(n,r);const s=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,l;for(o=0,l=s.length;o<l;++o){const u=s[o],p=u.font,v=u.label;u.backdrop&&(n.fillStyle=u.backdrop.color,n.fillRect(u.backdrop.left,u.backdrop.top,u.backdrop.width,u.backdrop.height)),E0(n,v,0,u.textOffset,p,u)}r&&hS(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const s=Qu(n.font),o=Td(n.padding),l=n.align;let u=s.lineHeight/2;"bottom"===e||"center"===e||ea(e)?(u+=o.bottom,Rl(n.text)&&(u+=s.lineHeight*(n.text.length-1))):u+=o.top;const{titleX:p,titleY:v,maxWidth:w,rotation:I}=function hfe(i,t,e,n){const{top:r,left:s,bottom:o,right:l,chart:u}=i,{chartArea:p,scales:v}=u;let I,T,k,w=0;const W=o-r,K=l-s;if(i.isHorizontal()){if(T=Ed(n,s,l),ea(e)){const he=Object.keys(e)[0];k=v[he].getPixelForValue(e[he])+W-t}else k="center"===e?(p.bottom+p.top)/2+W-t:JU(i,e,t);I=l-s}else{if(ea(e)){const he=Object.keys(e)[0];T=v[he].getPixelForValue(e[he])-K+t}else T="center"===e?(p.left+p.right)/2-K+t:JU(i,e,t);k=Ed(n,o,r),w="left"===e?-Yc:Yc}return{titleX:T,titleY:k,maxWidth:I,rotation:w}}(this,u,e,l);E0(t,n.text,0,0,s,{color:n.color,maxWidth:w,rotation:I,textAlign:ufe(l,e,r),textBaseline:"middle",translation:[p,v]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=mo(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===R0.prototype.draw?[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]:[{z:e,draw:r=>{this.draw(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const l=e[s];l[n]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){return Qu(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class vS{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function pfe(i){return"id"in i&&"defaults"in i})(e)&&(n=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function dfe(i,t,e){const n=PA(Object.create(null),[e?ia.get(e):{},ia.get(t),i.defaults]);ia.set(t,n),i.defaultRoutes&&function ffe(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),r=n.pop(),s=[i].concat(n).join("."),o=t[e].split("."),l=o.pop(),u=o.join(".");ia.route(s,r,u,l)})}(t,i.defaultRoutes),i.descriptors&&ia.describe(t,i.descriptors)}(t,o,n),this.override&&ia.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in ia[r]&&(delete ia[r][n],this.override&&delete I0[n])}}var uv=new class gfe{constructor(){this.controllers=new vS(cv,"datasets",!0),this.elements=new vS(mm,"elements"),this.plugins=new vS(Object,"plugins"),this.scales=new vS(R0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{const s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):nl(r,o=>{const l=n||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,e,n){const r=Q2(t);Pl(n["before"+r],[],n),e[t](n),Pl(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}},mfe=Object.freeze({__proto__:null,BarController:jde,BubbleController:$de,DoughnutController:ZU,LineController:Xde,PolarAreaController:Yde,PieController:Kde,RadarController:Zde,ScatterController:(()=>{class i extends cv{update(e){const n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled;let{start:o,count:l}=tU(n,r,s);if(this._drawStart=o,this._drawCount=l,nU(n)&&(o=0,l=r.length),this.options.showLine){const{dataset:u,_dataset:p}=n;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!p._decimated,u.points=r;const v=this.resolveDatasetElementOptions(e);v.segment=this.options.segment,this.updateElement(u,void 0,{animated:!s,options:v},e)}this.updateElements(r,o,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=uv.getElement("line")),super.addElements()}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,w=this.resolveDataElementOptions(n,s),I=this.getSharedOptions(w),T=this.includeOptions(s,I),k=l.axis,W=u.axis,{spanGaps:K,segment:he}=this.options,Te=pC(K)?K:Number.POSITIVE_INFINITY,Ae=this.chart._animationsDisabled||o||"none"===s;let Le=n>0&&this.getParsed(n-1);for(let tt=n;tt<n+r;++tt){const _t=e[tt],Ut=this.getParsed(tt),at=Ae?_t:{},Lt=ga(Ut[W]),cn=at[k]=l.getPixelForValue(Ut[k],tt),Gn=at[W]=o||Lt?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,Ut,p):Ut[W],tt);at.skip=isNaN(cn)||isNaN(Gn)||Lt,at.stop=tt>0&&Math.abs(Ut[k]-Le[k])>Te,he&&(at.parsed=Ut,at.raw=v.data[tt]),T&&(at.options=I||this.resolveDataElementOptions(tt,_t.active?"active":s)),Ae||this.updateElement(_t,tt,at,s),Le=Ut}this.updateSharedOptions(I,s,w)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let u=0;for(let p=n.length-1;p>=0;--p)u=Math.max(u,n[p].size(this.resolveDataElementOptions(p))/2);return u>0&&u}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,l)/2}}return i.id="scatter",i.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},i.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},i})()});function P0(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var vfe={_date:(()=>{class i{constructor(e){this.options=e||{}}init(e){}formats(){return P0()}parse(e,n){return P0()}format(e,n){return P0()}add(e,n,r){return P0()}diff(e,n,r){return P0()}startOf(e,n,r){return P0()}endOf(e,n){return P0()}}return i.override=function(t){Object.assign(i.prototype,t)},i})()};function yfe(i,t,e,n){const{controller:r,data:s,_sorted:o}=i,l=r._cachedMeta.iScale;if(l&&t===l.axis&&"r"!==t&&o&&s.length){const u=l._reversePixels?Jue:hy;if(!n)return u(s,t,e);if(r._sharedOptions){const p=s[0],v="function"==typeof p.getRange&&p.getRange(t);if(v){const w=u(s,t,e-v),I=u(s,t,e+v);return{lo:w.lo,hi:I.hi}}}}return{lo:0,hi:s.length-1}}function XA(i,t,e,n,r){const s=i.getSortedVisibleDatasetMetas(),o=e[t];for(let l=0,u=s.length;l<u;++l){const{index:p,data:v}=s[l],{lo:w,hi:I}=yfe(s[l],t,o,r);for(let T=w;T<=I;++T){const k=v[T];k.skip||n(k,p,T)}}}function CL(i,t,e,n,r){const s=[];return!r&&!i.isPointInArea(t)||XA(i,e,t,function(l,u,p){!r&&!HA(l,i.chartArea,0)||l.inRange(t.x,t.y,n)&&s.push({element:l,datasetIndex:u,index:p})},!0),s}function wL(i,t,e,n,r,s){return s||i.isPointInArea(t)?"r"!==e||n?function Cfe(i,t,e,n,r,s){let o=[];const l=function _fe(i){const t=-1!==i.indexOf("x"),e=-1!==i.indexOf("y");return function(n,r){const s=t?Math.abs(n.x-r.x):0,o=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(e);let u=Number.POSITIVE_INFINITY;return XA(i,e,t,function p(v,w,I){const T=v.inRange(t.x,t.y,r);if(n&&!T)return;const k=v.getCenterPoint(r);if(!s&&!i.isPointInArea(k)&&!T)return;const K=l(t,k);K<u?(o=[{element:v,datasetIndex:w,index:I}],u=K):K===u&&o.push({element:v,datasetIndex:w,index:I})}),o}(i,t,e,n,r,s):function bfe(i,t,e,n){let r=[];return XA(i,e,t,function s(o,l,u){const{startAngle:p,endAngle:v}=o.getProps(["startAngle","endAngle"],n),{angle:w}=Y4(o,{x:t.x,y:t.y});NA(w,p,v)&&r.push({element:o,datasetIndex:l,index:u})}),r}(i,t,e,r):[]}function nH(i,t,e,n,r){const s=[],o="x"===e?"inXRange":"inYRange";let l=!1;return XA(i,e,t,(u,p,v)=>{u[o](t[e],r)&&(s.push({element:u,datasetIndex:p,index:v}),l=l||u.inRange(t.x,t.y,r))}),n&&!l?[]:s}var wfe={evaluateInteractionItems:XA,modes:{index(i,t,e,n){const r=D0(t,i),s=e.axis||"x",o=e.includeInvisible||!1,l=e.intersect?CL(i,r,s,n,o):wL(i,r,s,!1,n,o),u=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(p=>{const v=l[0].index,w=p.data[v];w&&!w.skip&&u.push({element:w,datasetIndex:p.index,index:v})}),u):[]},dataset(i,t,e,n){const r=D0(t,i),s=e.axis||"xy",o=e.includeInvisible||!1;let l=e.intersect?CL(i,r,s,n,o):wL(i,r,s,!1,n,o);if(l.length>0){const u=l[0].datasetIndex,p=i.getDatasetMeta(u).data;l=[];for(let v=0;v<p.length;++v)l.push({element:p[v],datasetIndex:u,index:v})}return l},point:(i,t,e,n)=>CL(i,D0(t,i),e.axis||"xy",n,e.includeInvisible||!1),nearest:(i,t,e,n)=>wL(i,D0(t,i),e.axis||"xy",e.intersect,n,e.includeInvisible||!1),x:(i,t,e,n)=>nH(i,D0(t,i),"x",e.intersect,n),y:(i,t,e,n)=>nH(i,D0(t,i),"y",e.intersect,n)}};const iH=["left","top","right","bottom"];function YA(i,t){return i.filter(e=>e.pos===t)}function rH(i,t){return i.filter(e=>-1===iH.indexOf(e.pos)&&e.box.axis===t)}function KA(i,t){return i.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function sH(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function oH(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Efe(i,t,e,n){const{pos:r,box:s}=e,o=i.maxPadding;if(!ea(r)){e.size&&(i[r]-=e.size);const w=n[e.stack]||{size:0,count:1};w.size=Math.max(w.size,e.horizontal?s.height:s.width),e.size=w.size/w.count,i[r]+=e.size}s.getPadding&&oH(o,s.getPadding());const l=Math.max(0,t.outerWidth-sH(o,i,"left","right")),u=Math.max(0,t.outerHeight-sH(o,i,"top","bottom")),p=l!==i.w,v=u!==i.h;return i.w=l,i.h=u,e.horizontal?{same:p,other:v}:{same:v,other:p}}function Mfe(i,t){const e=t.maxPadding;return function n(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}(i?["left","right"]:["top","bottom"])}function ZA(i,t,e,n){const r=[];let s,o,l,u,p,v;for(s=0,o=i.length,p=0;s<o;++s){l=i[s],u=l.box,u.update(l.width||t.w,l.height||t.h,Mfe(l.horizontal,t));const{same:w,other:I}=Efe(t,e,l,n);p|=w&&r.length,v=v||I,u.fullSize||r.push(l)}return p&&ZA(r,t,e,n)||v}function yS(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function aH(i,t,e,n){const r=e.padding;let{x:s,y:o}=t;for(const l of i){const u=l.box,p=n[l.stack]||{count:1,placed:0,weight:1},v=l.stackWeight/p.weight||1;if(l.horizontal){const w=t.w*v,I=p.size||u.height;yg(p.start)&&(o=p.start),u.fullSize?yS(u,r.left,o,e.outerWidth-r.right-r.left,I):yS(u,t.left+p.placed,o,w,I),p.start=o,p.placed+=w,o=u.bottom}else{const w=t.h*v,I=p.size||u.width;yg(p.start)&&(s=p.start),u.fullSize?yS(u,s,r.top,I,e.outerHeight-r.bottom-r.top):yS(u,s,t.top+p.placed,I,w),p.start=s,p.placed+=w,s=u.right}}t.x=s,t.y=o}ia.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Md={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;-1!==e&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const r=Td(i.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),l=function Sfe(i){const t=function Afe(i){const t=[];let e,n,r,s,o,l;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],({position:s,options:{stack:o,stackWeight:l=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:l});return t}(i),e=KA(t.filter(p=>p.box.fullSize),!0),n=KA(YA(t,"left"),!0),r=KA(YA(t,"right")),s=KA(YA(t,"top"),!0),o=KA(YA(t,"bottom")),l=rH(t,"x"),u=rH(t,"y");return{fullSize:e,leftAndTop:n.concat(s),rightAndBottom:r.concat(u).concat(o).concat(l),chartArea:YA(t,"chartArea"),vertical:n.concat(r).concat(u),horizontal:s.concat(o).concat(l)}}(i.boxes),u=l.vertical,p=l.horizontal;nl(i.boxes,W=>{"function"==typeof W.beforeLayout&&W.beforeLayout()});const v=u.reduce((W,K)=>K.box.options&&!1===K.box.options.display?W:W+1,0)||1,w=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/v,hBoxMaxHeight:o/2}),I=Object.assign({},r);oH(I,Td(n));const T=Object.assign({maxPadding:I,w:s,h:o,x:r.left,y:r.top},r),k=function Ife(i,t){const e=function xfe(i){const t={};for(const e of i){const{stack:n,pos:r,stackWeight:s}=e;if(!n||!iH.includes(r))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let s,o,l;for(s=0,o=i.length;s<o;++s){l=i[s];const{fullSize:u}=l.box,p=e[l.stack],v=p&&l.stackWeight/p.weight;l.horizontal?(l.width=v?v*n:u&&t.availableWidth,l.height=r):(l.width=n,l.height=v?v*r:u&&t.availableHeight)}return e}(u.concat(p),w);ZA(l.fullSize,T,w,k),ZA(u,T,w,k),ZA(p,T,w,k)&&ZA(u,T,w,k),function Tfe(i){const t=i.maxPadding;function e(n){const r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}(T),aH(l.leftAndTop,T,w,k),T.x+=T.w,T.y+=T.h,aH(l.rightAndBottom,T,w,k),i.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},nl(l.chartArea,W=>{const K=W.box;Object.assign(K,i.chartArea),K.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class lH{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class Dfe extends lH{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const _S="$chartjs",Lfe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},cH=i=>null===i||""===i,uH=!!ode&&{passive:!0};function kfe(i,t,e){i.canvas.removeEventListener(t,e,uH)}function bS(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function Ffe(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||bS(l.addedNodes,n),o=o&&!bS(l.removedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function Nfe(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||bS(l.removedNodes,n),o=o&&!bS(l.addedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const QA=new Map;let hH=0;function dH(){const i=window.devicePixelRatio;i!==hH&&(hH=i,QA.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function Vfe(i,t,e){const n=i.canvas,r=n&&mL(n);if(!r)return;const s=eU((l,u)=>{const p=r.clientWidth;e(l,u),p<r.clientWidth&&e()},window),o=new ResizeObserver(l=>{const u=l[0],p=u.contentRect.width,v=u.contentRect.height;0===p&&0===v||s(p,v)});return o.observe(r),function Bfe(i,t){QA.size||window.addEventListener("resize",dH),QA.set(i,t)}(i,s),o}function AL(i,t,e){e&&e.disconnect(),"resize"===t&&function zfe(i){QA.delete(i),QA.size||window.removeEventListener("resize",dH)}(i)}function Ufe(i,t,e){const n=i.canvas,r=eU(s=>{null!==i.ctx&&e(function Ofe(i,t){const e=Lfe[i.type]||i.type,{x:n,y:r}=D0(i,t);return{type:e,chart:t,native:i,x:void 0!==n?n:null,y:void 0!==r?r:null}}(s,i))},i,s=>{const o=s[0];return[o,o.offsetX,o.offsetY]});return function Pfe(i,t,e){i.addEventListener(t,e,uH)}(n,t,r),r}class Hfe extends lH{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function Rfe(i,t){const e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[_S]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",cH(r)){const s=TU(i,"width");void 0!==s&&(i.width=s)}if(cH(n))if(""===i.style.height)i.height=i.width/(t||2);else{const s=TU(i,"height");void 0!==s&&(i.height=s)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[_S])return!1;const n=e[_S].initial;["height","width"].forEach(s=>{const o=n[s];ga(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=n.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[_S],!0}addEventListener(t,e,n){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:Ffe,detach:Nfe,resize:Vfe}[e]||Ufe)(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];r&&(({attach:AL,detach:AL,resize:AL}[e]||kfe)(t,e,r),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return function sde(i,t,e,n){const r=pS(i),s=M0(r,"margin"),o=fS(r.maxWidth,i,"clientWidth")||iS,l=fS(r.maxHeight,i,"clientHeight")||iS,u=function rde(i,t,e){let n,r;if(void 0===t||void 0===e){const s=mL(i);if(s){const o=s.getBoundingClientRect(),l=pS(s),u=M0(l,"border","width"),p=M0(l,"padding");t=o.width-p.width-u.width,e=o.height-p.height-u.height,n=fS(l.maxWidth,s,"clientWidth"),r=fS(l.maxHeight,s,"clientHeight")}else t=i.clientWidth,e=i.clientHeight}return{width:t,height:e,maxWidth:n||iS,maxHeight:r||iS}}(i,t,e);let{width:p,height:v}=u;if("content-box"===r.boxSizing){const w=M0(r,"border","width"),I=M0(r,"padding");p-=I.width+w.width,v-=I.height+w.height}return p=Math.max(0,p-s.width),v=Math.max(0,n?Math.floor(p/n):v-s.height),p=vL(Math.min(p,o,u.maxWidth)),v=vL(Math.min(v,l,u.maxHeight)),p&&!v&&(v=vL(p/2)),{width:p,height:v}}(t,e,n,r)}isAttached(t){const e=mL(t);return!(!e||!e.isConnected)}}class Wfe{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,n);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(const s of t){const o=s.plugin;if(!1===Pl(o[n],[e,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){ga(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=mo(n.options&&n.options.plugins,{}),s=function jfe(i){const t={},e=[],n=Object.keys(uv.plugins.items);for(let s=0;s<n.length;s++)e.push(uv.getPlugin(n[s]));const r=i.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===e.indexOf(o)&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}(n);return!1!==r||e?function qfe(i,{plugins:t,localIds:e},n,r){const s=[],o=i.getContext();for(const l of t){const u=l.id,p=$fe(n[u],r);null!==p&&s.push({plugin:l,options:Xfe(i.config,{plugin:l,local:e[u]},p,o)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(s,o)=>s.filter(l=>!o.some(u=>l.plugin.id===u.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function $fe(i,t){return t||!1!==i?!0===i?{}:i:null}function Xfe(i,{plugin:t,local:e},n,r){const s=i.pluginScopeKeys(t),o=i.getOptionScopes(n,s);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xL(i,t){return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||(ia.datasets[i]||{}).indexAxis||"x"}function IL(i,t){return"x"===i||"y"===i?i:t.axis||function Zfe(i){return"top"===i||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0}(t.position)||i.charAt(0).toLowerCase()}function fH(i){const t=i.options||(i.options={});t.plugins=mo(t.plugins,{}),t.scales=function Qfe(i,t){const e=I0[i.type]||{scales:{}},n=t.scales||{},r=xL(i.type,t),s=Object.create(null),o=Object.create(null);return Object.keys(n).forEach(l=>{const u=n[l];if(!ea(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const p=IL(l,u),v=function Kfe(i,t){return i===t?"_index_":"_value_"}(p,r),w=e.scales||{};s[p]=s[p]||l,o[l]=kA(Object.create(null),[{axis:p},u,w[p],w[v]])}),i.data.datasets.forEach(l=>{const u=l.type||i.type,p=l.indexAxis||xL(u,t),w=(I0[u]||{}).scales||{};Object.keys(w).forEach(I=>{const T=function Yfe(i,t){let e=i;return"_index_"===i?e=t:"_value_"===i&&(e="x"===t?"y":"x"),e}(I,p),k=l[T+"AxisID"]||s[T]||T;o[k]=o[k]||Object.create(null),kA(o[k],[{axis:T},n[k],w[I]])})}),Object.keys(o).forEach(l=>{const u=o[l];kA(u,[ia.scales[u.type],ia.scale])}),o}(i,t)}function pH(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}const gH=new Map,mH=new Set;function CS(i,t){let e=gH.get(i);return e||(e=t(),gH.set(i,e),mH.add(e)),e}const JA=(i,t,e)=>{const n=u_(t,e);void 0!==n&&i.add(n)};class epe{constructor(t){this._config=function Jfe(i){return(i=i||{}).data=pH(i.data),fH(i),i}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=pH(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),fH(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return CS(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return CS(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return CS(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return CS(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:s}=this,o=this._cachedScopes(t,n),l=o.get(e);if(l)return l;const u=new Set;e.forEach(v=>{t&&(u.add(t),v.forEach(w=>JA(u,t,w))),v.forEach(w=>JA(u,r,w)),v.forEach(w=>JA(u,I0[s]||{},w)),v.forEach(w=>JA(u,ia,w)),v.forEach(w=>JA(u,cL,w))});const p=Array.from(u);return 0===p.length&&p.push(Object.create(null)),mH.has(e)&&o.set(e,p),p}chartOptionScopes(){const{options:t,type:e}=this;return[t,I0[e]||{},ia.datasets[e]||{},{type:e},ia,cL]}resolveNamedOptions(t,e,n,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=vH(this._resolverCache,t,r);let u=o;(function npe(i,t){const{isScriptable:e,isIndexable:n}=yU(i);for(const r of t){const s=e(r),o=n(r),l=(o||s)&&i[r];if(s&&(h_(l)||tpe(l))||o&&Rl(l))return!0}return!1})(o,e)&&(s.$shared=!1,u=mC(o,n=h_(n)?n():n,this.createResolver(t,n,l)));for(const p of e)s[p]=u[p];return s}createResolver(t,e,n=[""],r){const{resolver:s}=vH(this._resolverCache,t,n);return ea(e)?mC(s,e,void 0,r):s}}function vH(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const r=e.join();let s=n.get(r);return s||(s={resolver:fL(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,s)),s}const tpe=i=>ea(i)&&Object.getOwnPropertyNames(i).reduce((t,e)=>t||h_(i[e]),!1),rpe=["top","bottom","left","right","chartArea"];function yH(i,t){return"top"===i||"bottom"===i||-1===rpe.indexOf(i)&&"x"===t}function _H(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function bH(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Pl(e&&e.onComplete,[i],t)}function spe(i){const t=i.chart,e=t.options.animation;Pl(e&&e.onProgress,[i],t)}function CH(i){return SU()&&"string"==typeof i?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const wS={},wH=i=>{const t=CH(i);return Object.values(wS).filter(e=>e.canvas===t).pop()};function ope(i,t,e){const n=Object.keys(i);for(const r of n){const s=+r;if(s>=t){const o=i[r];delete i[r],(e>0||s>t)&&(i[s+e]=o)}}}class AS{constructor(t,e){const n=this.config=new epe(e),r=CH(t),s=wH(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function Gfe(i){return!SU()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Dfe:Hfe}(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),u=l&&l.canvas,p=u&&u.height,v=u&&u.width;this.id=Vue(),this.ctx=l,this.canvas=u,this.width=v,this.height=p,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Wfe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function nhe(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}(w=>this.update(w),o.resizeDelay||0),this._dataChanges=[],wS[this.id]=this,l&&u?(fy.listen(this,"complete",bH),fy.listen(this,"progress",spe),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:s}=this;return ga(t)?e&&s?s:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():EU(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gU(this.canvas,this.ctx),this}stop(){return fy.stop(this),this}resize(t,e){fy.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,o=this.platform.getMaximumSize(this.canvas,t,e,n.maintainAspectRatio&&this.aspectRatio),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,EU(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Pl(n.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){nl(this.options.scales||{},(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const l=e[o],u=IL(o,l),p="r"===u,v="x"===u;return{options:l,dposition:p?"chartArea":v?"bottom":"left",dtype:p?"radialLinear":v?"category":"linear"}}))),nl(s,o=>{const l=o.options,u=l.id,p=IL(u,l),v=mo(l.type,o.dtype);(void 0===l.position||yH(l.position,p)!==yH(o.dposition))&&(l.position=o.dposition),r[u]=!0;let w=null;u in n&&n[u].type===v?w=n[u]:(w=new(uv.getScale(v))({id:u,type:v,ctx:this.ctx,chart:this}),n[w.id]=w),w.init(l,t)}),nl(r,(o,l)=>{o||delete n[l]}),nl(n,o=>{Md.configure(this,o,o.options),Md.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((r,s)=>r.index-s.index),n>e){for(let r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(_H("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,r)=>{0===e.filter(s=>s===n._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const s=e[n];let o=this.getDatasetMeta(n);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=s.indexAxis||xL(l,this.options),o.order=s.order||0,o.index=n,o.label=""+s.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const u=uv.getController(l),{datasetElementType:p,dataElementType:v}=ia.datasets[l];Object.assign(u.prototype,{dataElementType:uv.getElement(v),datasetElementType:p&&uv.getElement(p)}),o.controller=new u(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){nl(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let p=0,v=this.data.datasets.length;p<v;p++){const{controller:w}=this.getDatasetMeta(p),I=!r&&-1===s.indexOf(w);w.buildOrUpdateElements(I),o=Math.max(+w.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||nl(s,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(_H("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){nl(this.scales,t=>{Md.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!W4(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of e)ope(t,r,"_removeElements"===n?-s:s)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=s=>new Set(t.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let s=1;s<e;s++)if(!W4(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Md.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],nl(this.boxes,r=>{n&&"chartArea"===r.position||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,h_(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(fy.has(this)?this.attached&&!fy.running(this)&&fy.start(this):(this.draw(),bH({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,s=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&uS(e,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?this.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?this.height:s.bottom+n.bottom}),t.controller.draw(),r&&hS(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return HA(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const s=wfe.modes[e];return"function"==typeof s?s(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=p_(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);yg(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(s,{visible:n}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),fy.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),gU(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete wS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};nl(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(u,p)=>{e.addEventListener(this,u,p),t[u]=p},r=(u,p)=>{t[u]&&(e.removeEventListener(this,u,p),delete t[u])},s=(u,p)=>{this.canvas&&this.resize(u,p)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",s),n("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",l)},e.isAttached(this.canvas)?l():o()}unbindEvents(){nl(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},nl(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let s,o,l,u;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),l=0,u=t.length;l<u;++l){o=t[l];const p=o&&this.getDatasetMeta(o.datasetIndex).controller;p&&p[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!tS(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const r=this.options.hover,s=(u,p)=>u.filter(v=>!p.some(w=>v.datasetIndex===w.datasetIndex&&v.index===w.index)),o=s(e,t),l=n?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:s}=this,l=this._getActiveElements(t,r,n,e),u=function $ue(i){return"mouseup"===i.type||"click"===i.type||"contextmenu"===i.type}(t),p=function ape(i,t,e,n){return e&&"mouseout"!==i.type?n?t:i:null}(t,this._lastEvent,n,u);n&&(this._lastEvent=null,Pl(s.onHover,[t,l,this],this),u&&Pl(s.onClick,[t,l,this],this));const v=!tS(l,r);return(v||e)&&(this._active=l,this._updateHoverStyles(l,r,e)),this._lastEvent=p,v}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}const AH=()=>nl(AS.instances,i=>i._plugins.invalidate()),g_=!0;function xH(i,t,e){const{startAngle:n,pixelMargin:r,x:s,y:o,outerRadius:l,innerRadius:u}=t;let p=r/l;i.beginPath(),i.arc(s,o,l,n-p,e+p),u>r?(p=r/u,i.arc(s,o,u,e+p,n-p,!0)):i.arc(s,o,r,e+Yc,n-Yc),i.closePath(),i.clip()}function _C(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function SL(i,t,e,n,r,s){const{x:o,y:l,startAngle:u,pixelMargin:p,innerRadius:v}=t,w=Math.max(t.outerRadius+n+e-p,0),I=v>0?v+n+e+p:0;let T=0;const k=r-u;if(n){const Wn=((v>0?v-n:0)+(w>0?w-n:0))/2;T=(k-(0!==Wn?k*Wn/(Wn+n):k))/2}const K=(k-Math.max(.001,k*w-e/ac)/w)/2,he=u+K+T,Te=r-K-T,{outerStart:Ae,outerEnd:Le,innerStart:tt,innerEnd:_t}=function cpe(i,t,e,n){const r=function lpe(i){return dL(i,["outerStart","outerEnd","innerStart","innerEnd"])}(i.options.borderRadius),s=(e-t)/2,o=Math.min(s,n*t/2),l=u=>{const p=(e-Math.min(s,u))*n/2;return Ch(u,0,Math.min(s,p))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Ch(r.innerStart,0,o),innerEnd:Ch(r.innerEnd,0,o)}}(t,I,w,Te-he),Ut=w-Ae,at=w-Le,Lt=he+Ae/Ut,cn=Te-Le/at,Gn=I+tt,ii=I+_t,jn=he+tt/Gn,Mn=Te-_t/ii;if(i.beginPath(),s){if(i.arc(o,l,w,Lt,cn),Le>0){const Wn=_C(at,cn,o,l);i.arc(Wn.x,Wn.y,Le,cn,Te+Yc)}const Un=_C(ii,Te,o,l);if(i.lineTo(Un.x,Un.y),_t>0){const Wn=_C(ii,Mn,o,l);i.arc(Wn.x,Wn.y,_t,Te+Yc,Mn+Math.PI)}if(i.arc(o,l,I,Te-_t/I,he+tt/I,!0),tt>0){const Wn=_C(Gn,jn,o,l);i.arc(Wn.x,Wn.y,tt,jn+Math.PI,he-Yc)}const In=_C(Ut,he,o,l);if(i.lineTo(In.x,In.y),Ae>0){const Wn=_C(Ut,Lt,o,l);i.arc(Wn.x,Wn.y,Ae,he-Yc,Lt)}}else{i.moveTo(o,l);const Un=Math.cos(Lt)*w+o,In=Math.sin(Lt)*w+l;i.lineTo(Un,In);const Wn=Math.cos(cn)*w+o,zn=Math.sin(cn)*w+l;i.lineTo(Wn,zn)}i.closePath()}Object.defineProperties(AS,{defaults:{enumerable:g_,value:ia},instances:{enumerable:g_,value:wS},overrides:{enumerable:g_,value:I0},registry:{enumerable:g_,value:uv},version:{enumerable:g_,value:"3.9.1"},getChart:{enumerable:g_,value:wH},register:{enumerable:g_,value:(...i)=>{uv.add(...i),AH()}},unregister:{enumerable:g_,value:(...i)=>{uv.remove(...i),AH()}}});class xS extends mm{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:s,distance:o}=Y4(r,{x:t,y:e}),{startAngle:l,endAngle:u,innerRadius:p,outerRadius:v,circumference:w}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),I=this.options.spacing/2,k=mo(w,u-l)>=dl||NA(s,l,u),W=uy(o,p+I,v+I);return k&&W}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:u,spacing:p}=this.options,v=(r+s)/2,w=(o+l+p+u)/2;return{x:e+Math.cos(v)*w,y:n+Math.sin(v)*w}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/2,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>dl?Math.floor(n/dl):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let l=0;if(r){l=r/2;const p=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(p)*l,Math.sin(p)*l),this.circumference>=ac&&(l=r)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const u=function upe(i,t,e,n,r){const{fullCircles:s,startAngle:o,circumference:l}=t;let u=t.endAngle;if(s){SL(i,t,e,n,o+dl,r);for(let p=0;p<s;++p)i.fill();isNaN(l)||(u=o+l%dl,l%dl==0&&(u+=dl))}return SL(i,t,e,n,u,r),i.fill(),u}(t,this,l,s,o);(function dpe(i,t,e,n,r,s){const{options:o}=t,{borderWidth:l,borderJoinStyle:u}=o,p="inner"===o.borderAlign;!l||(p?(i.lineWidth=2*l,i.lineJoin=u||"round"):(i.lineWidth=l,i.lineJoin=u||"bevel"),t.fullCircles&&function hpe(i,t,e){const{x:n,y:r,startAngle:s,pixelMargin:o,fullCircles:l}=t,u=Math.max(t.outerRadius-o,0),p=t.innerRadius+o;let v;for(e&&xH(i,t,s+dl),i.beginPath(),i.arc(n,r,p,s+dl,s,!0),v=0;v<l;++v)i.stroke();for(i.beginPath(),i.arc(n,r,u,s,s+dl),v=0;v<l;++v)i.stroke()}(i,t,p),p&&xH(i,t,r),SL(i,t,e,n,r,s),i.stroke())})(t,this,l,s,u,o),t.restore()}}function IH(i,t,e=t){i.lineCap=mo(e.borderCapStyle,t.borderCapStyle),i.setLineDash(mo(e.borderDash,t.borderDash)),i.lineDashOffset=mo(e.borderDashOffset,t.borderDashOffset),i.lineJoin=mo(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=mo(e.borderWidth,t.borderWidth),i.strokeStyle=mo(e.borderColor,t.borderColor)}function fpe(i,t,e){i.lineTo(e.x,e.y)}function SH(i,t,e={}){const n=i.length,{start:r=0,end:s=n-1}=e,{start:o,end:l}=t,u=Math.max(r,o),p=Math.min(s,l);return{count:n,start:u,loop:t.loop,ilen:p<u&&!(r<o&&s<o||r>l&&s>l)?n+p-u:p-u}}function gpe(i,t,e,n){const{points:r,options:s}=t,{count:o,start:l,loop:u,ilen:p}=SH(r,e,n),v=function ppe(i){return i.stepped?Mhe:i.tension||"monotone"===i.cubicInterpolationMode?Dhe:fpe}(s);let T,k,W,{move:w=!0,reverse:I}=n||{};for(T=0;T<=p;++T)k=r[(l+(I?p-T:T))%o],!k.skip&&(w?(i.moveTo(k.x,k.y),w=!1):v(i,W,k,I,s.stepped),W=k);return u&&(k=r[(l+(I?p:0))%o],v(i,W,k,I,s.stepped)),!!u}function mpe(i,t,e,n){const r=t.points,{count:s,start:o,ilen:l}=SH(r,e,n),{move:u=!0,reverse:p}=n||{};let I,T,k,W,K,he,v=0,w=0;const Te=Le=>(o+(p?l-Le:Le))%s,Ae=()=>{W!==K&&(i.lineTo(v,K),i.lineTo(v,W),i.lineTo(v,he))};for(u&&(T=r[Te(0)],i.moveTo(T.x,T.y)),I=0;I<=l;++I){if(T=r[Te(I)],T.skip)continue;const Le=T.x,tt=T.y,_t=0|Le;_t===k?(tt<W?W=tt:tt>K&&(K=tt),v=(w*v+Le)/++w):(Ae(),i.lineTo(Le,tt),k=_t,w=0,W=K=tt),he=tt}Ae()}function EL(i){const t=i.options;return i._decimated||i._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?gpe:mpe}xS.id="arc",xS.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},xS.defaultRoutes={backgroundColor:"backgroundColor"};const bpe="function"==typeof Path2D;let IS=(()=>{class i extends mm{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(Jhe(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,n),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function gde(i,t){const e=i.points,n=i.options.spanGaps,r=e.length;if(!r)return[];const s=!!i._loop,{start:o,end:l}=function fde(i,t,e,n){let r=0,s=t-1;if(e&&!n)for(;r<t&&!i[r].skip;)r++;for(;r<t&&i[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&i[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,n);return function FU(i,t,e,n){return n&&n.setContext&&e?function mde(i,t,e,n){const r=i._chart.getContext(),s=NU(i.options),{_datasetIndex:o,options:{spanGaps:l}}=i,u=e.length,p=[];let v=s,w=t[0].start,I=w;function T(k,W,K,he){const Te=l?-1:1;if(k!==W){for(k+=u;e[k%u].skip;)k-=Te;for(;e[W%u].skip;)W+=Te;k%u!=W%u&&(p.push({start:k%u,end:W%u,loop:K,style:he}),v=he,w=W%u)}}for(const k of t){w=l?w:k.start;let K,W=e[w%u];for(I=w+1;I<=k.end;I++){const he=e[I%u];K=NU(n.setContext(p_(r,{type:"segment",p0:W,p1:he,p0DataIndex:(I-1)%u,p1DataIndex:I%u,datasetIndex:o}))),vde(K,v)&&T(w,I-1,k.loop,v),W=he,v=K}w<I-1&&T(w,I-1,k.loop,v)}return p}(i,t,e,n):t}(i,!0===n?[{start:o,end:l,loop:s}]:function pde(i,t,e,n){const r=i.length,s=[];let u,o=t,l=i[t];for(u=t+1;u<=e;++u){const p=i[u%r];p.skip||p.stop?l.skip||(s.push({start:t%r,end:(u-1)%r,loop:n=!1}),t=o=p.stop?u:null):(o=u,l.skip&&(t=u)),l=p}return null!==o&&s.push({start:t%r,end:o%r,loop:n}),s}(e,o,l<o?l+r:l,!!i._fullLoop&&0===o&&l===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],o=this.points,l=OU(this,{property:n,start:s,end:s});if(!l.length)return;const u=[],p=function vpe(i){return i.stepped?ade:i.tension||"monotone"===i.cubicInterpolationMode?lde:L0}(r);let v,w;for(v=0,w=l.length;v<w;++v){const{start:I,end:T}=l[v],k=o[I],W=o[T];if(k===W){u.push(k);continue}const he=p(k,W,Math.abs((s-k[n])/(W[n]-k[n])),r.stepped);he[n]=e[n],u.push(he)}return 1===u.length?u[0]:u}pathSegment(e,n,r){return EL(this)(e,this,n,r)}path(e,n,r){const s=this.segments,o=EL(this);let l=this._loop;n=n||0,r=r||this.points.length-n;for(const u of s)l&=o(e,this,u,{start:n,end:n+r-1});return!!l}draw(e,n,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function Cpe(i,t,e,n){bpe&&!t.options.segment?function ype(i,t,e,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,n)&&r.closePath()),IH(i,t.options),i.stroke(r)}(i,t,e,n):function _pe(i,t,e,n){const{segments:r,options:s}=t,o=EL(t);for(const l of r)IH(i,s,l.style),i.beginPath(),o(i,t,l,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}(i,t,e,n)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i.id="line",i.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t},i})();function EH(i,t,e,n){const r=i.options,{[e]:s}=i.getProps([e],n);return Math.abs(t-s)<r.radius+r.hitRadius}let wpe=(()=>{class i extends mm{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return EH(this,e,"x",n)}inYRange(e,n){return EH(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){let n=(e=e||this.options||{}).radius||0;return n=Math.max(n,n&&e.hoverRadius||0),2*(n+(n&&e.borderWidth||0))}draw(e,n){const r=this.options;this.skip||r.radius<.1||!HA(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,hL(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return i.id="point",i.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i})();function TH(i,t){const{x:e,y:n,base:r,width:s,height:o}=i.getProps(["x","y","base","width","height"],t);let l,u,p,v,w;return i.horizontal?(w=o/2,l=Math.min(e,r),u=Math.max(e,r),p=n-w,v=n+w):(w=s/2,l=e-w,u=e+w,p=Math.min(n,r),v=Math.max(n,r)),{left:l,top:p,right:u,bottom:v}}function m_(i,t,e,n){return i?0:Ch(t,e,n)}function TL(i,t,e,n){const r=null===t,s=null===e,l=i&&!(r&&s)&&TH(i,n);return l&&(r||uy(t,l.left,l.right))&&(s||uy(e,l.top,l.bottom))}function Epe(i,t){i.rect(t.x,t.y,t.w,t.h)}function ML(i,t,e={}){const n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0;return{x:i.x+n,y:i.y+r,w:i.w+((i.x+i.w!==e.x+e.w?t:0)-n),h:i.h+((i.y+i.h!==e.y+e.h?t:0)-r),radius:i.radius}}class SS extends mm{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:o}=function Ipe(i){const t=TH(i),e=t.right-t.left,n=t.bottom-t.top,r=function Ape(i,t,e){const r=i.borderSkipped,s=vU(i.options.borderWidth);return{t:m_(r.top,s.top,0,e),r:m_(r.right,s.right,0,t),b:m_(r.bottom,s.bottom,0,e),l:m_(r.left,s.left,0,t)}}(i,e/2,n/2),s=function xpe(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=T0(r),o=Math.min(t,e),l=i.borderSkipped,u=n||ea(r);return{topLeft:m_(!u||l.top||l.left,s.topLeft,0,o),topRight:m_(!u||l.top||l.right,s.topRight,0,o),bottomLeft:m_(!u||l.bottom||l.left,s.bottomLeft,0,o),bottomRight:m_(!u||l.bottom||l.right,s.bottomRight,0,o)}}(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),l=function Spe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}(o.radius)?GA:Epe;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),l(t,ML(o,e,s)),t.clip(),l(t,ML(s,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),l(t,ML(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return TL(this,t,e,n)}inXRange(t,e){return TL(this,t,null,e)}inYRange(t,e){return TL(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}SS.id="bar",SS.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},SS.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Tpe=Object.freeze({__proto__:null,ArcElement:xS,LineElement:IS,PointElement:wpe,BarElement:SS});function MH(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:t})}}function DH(i){i.data.datasets.forEach(t=>{MH(t)})}var Rpe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled)return void DH(i);const n=i.width;i.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:l}=r,u=i.getDatasetMeta(s),p=o||r.data;if("y"===WA([l,i.options.indexAxis])||!u.controller.supportsDecimation)return;const v=i.scales[u.xAxisID];if("linear"!==v.type&&"time"!==v.type||i.options.parsing)return;let k,{start:w,count:I}=function Lpe(i,t){const e=t.length;let r,n=0;const{iScale:s}=i,{min:o,max:l,minDefined:u,maxDefined:p}=s.getUserBounds();return u&&(n=Ch(hy(t,s.axis,o).lo,0,e-1)),r=p?Ch(hy(t,s.axis,l).hi+1,n,e)-n:e-n,{start:n,count:r}}(u,p);if(I<=(e.threshold||4*n))MH(r);else{switch(ga(o)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(W){this._data=W}})),e.algorithm){case"lttb":k=function Mpe(i,t,e,n,r){const s=r.samples||n;if(s>=e)return i.slice(t,t+e);const o=[],l=(e-2)/(s-2);let u=0;const p=t+e-1;let w,I,T,k,W,v=t;for(o[u++]=i[v],w=0;w<s-2;w++){let Te,K=0,he=0;const Ae=Math.floor((w+1)*l)+1+t,Le=Math.min(Math.floor((w+2)*l)+1,e)+t,tt=Le-Ae;for(Te=Ae;Te<Le;Te++)K+=i[Te].x,he+=i[Te].y;K/=tt,he/=tt;const _t=Math.floor(w*l)+1+t,Ut=Math.min(Math.floor((w+1)*l)+1,e)+t,{x:at,y:Lt}=i[v];for(T=k=-1,Te=_t;Te<Ut;Te++)k=.5*Math.abs((at-K)*(i[Te].y-Lt)-(at-i[Te].x)*(he-Lt)),k>T&&(T=k,I=i[Te],W=Te);o[u++]=I,v=W}return o[u++]=i[p],o}(p,w,I,n,e);break;case"min-max":k=function Dpe(i,t,e,n){let o,l,u,p,v,w,I,T,k,W,r=0,s=0;const K=[],Te=i[t].x,Le=i[t+e-1].x-Te;for(o=t;o<t+e;++o){l=i[o],u=(l.x-Te)/Le*n,p=l.y;const tt=0|u;if(tt===v)p<k?(k=p,w=o):p>W&&(W=p,I=o),r=(s*r+l.x)/++s;else{const _t=o-1;if(!ga(w)&&!ga(I)){const Ut=Math.min(w,I),at=Math.max(w,I);Ut!==T&&Ut!==_t&&K.push({...i[Ut],x:r}),at!==T&&at!==_t&&K.push({...i[at],x:r})}o>0&&_t!==T&&K.push(i[_t]),K.push(l),v=tt,s=0,k=W=p,w=I=T=o}}return K}(p,w,I,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=k}})},destroy(i){DH(i)}};function DL(i,t,e,n){if(n)return;let r=t[i],s=e[i];return"angle"===i&&(r=Lp(r),s=Lp(s)),{property:i,start:r,end:s}}function LL(i,t,e){for(;t>i;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function LH(i,t,e,n){return i&&t?n(i[e],t[e]):i?i[e]:t?t[e]:0}function RH(i,t){let e=[],n=!1;return Rl(i)?(n=!0,e=i):e=function kpe(i,t){const{x:e=null,y:n=null}=i||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:l})=>{l=LL(o,l,r);const u=r[o],p=r[l];null!==n?(s.push({x:u.x,y:n}),s.push({x:p.x,y:n})):null!==e&&(s.push({x:e,y:u.y}),s.push({x:e,y:p.y}))}),s}(i,t),e.length?new IS({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function PH(i){return i&&!1!==i.fill}function Ope(i,t,e){let r=i[t].fill;const s=[t];let o;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!au(r))return r;if(o=i[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Fpe(i,t,e){const n=function Vpe(i){const t=i.options,e=t.fill;let n=mo(e&&e.target,e);return void 0===n&&(n=!!t.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(i);if(ea(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return au(r)&&Math.floor(r)===r?function Npe(i,t,e,n){return("-"===i||"+"===i)&&(e=t+e),!(e===t||e<0||e>=n)&&e}(n[0],t,r,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Gpe(i,t,e){const n=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:l,point:u}=Wpe(s,t,"x");if(!(!u||o&&l))if(o)n.unshift(u);else if(i.push(u),!l)break}i.push(...n)}function Wpe(i,t,e){const n=i.interpolate(t,e);if(!n)return{};const r=n[e],s=i.segments,o=i.points;let l=!1,u=!1;for(let p=0;p<s.length;p++){const v=s[p],w=o[v.start][e],I=o[v.end][e];if(uy(r,w,I)){l=r===w,u=r===I;break}}return{first:l,last:u,point:n}}class kH{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:s,radius:o}=this;return t.arc(r,s,o,(e=e||{start:0,end:dl}).end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function RL(i,t,e){const n=function jpe(i){const{chart:t,fill:e,line:n}=i;if(au(e))return function $pe(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function Upe(i){const{scale:t,index:e,line:n}=i,r=[],s=n.segments,o=n.points,l=function Hpe(i,t){const e=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const s=n[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);l.push(RH({x:null,y:t.bottom},n));for(let u=0;u<s.length;u++){const p=s[u];for(let v=p.start;v<=p.end;v++)Gpe(r,o[v],l)}return new IS({points:r,options:{}})}(i);if("shape"===e)return!0;const r=function qpe(i){return(i.scale||{}).getPointPositionForValue?function Ype(i){const{scale:t,fill:e}=i,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,o=function zpe(i,t,e){let n;return n="start"===i?e:"end"===i?t.options.reverse?t.min:t.max:ea(i)?i.value:t.getBaseValue(),n}(e,t,s),l=[];if(n.grid.circular){const u=t.getPointPositionForValue(0,s);return new kH({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(let u=0;u<r;++u)l.push(t.getPointPositionForValue(u,o));return l}(i):function Xpe(i){const{scale:t={},fill:e}=i,n=function Bpe(i,t){let e=null;return"start"===i?e=t.bottom:"end"===i?e=t.top:ea(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(au(n)){const r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}(i)}(i);return r instanceof kH?r:RH(r,n)}(t),{line:r,scale:s,axis:o}=t,l=r.options,u=l.fill,p=l.backgroundColor,{above:v=p,below:w=p}=u||{};n&&r.points.length&&(uS(i,e),function Kpe(i,t){const{line:e,target:n,above:r,below:s,area:o,scale:l}=t,u=e._loop?"angle":t.axis;i.save(),"x"===u&&s!==r&&(OH(i,n,o.top),FH(i,{line:e,target:n,color:r,scale:l,property:u}),i.restore(),i.save(),OH(i,n,o.bottom)),FH(i,{line:e,target:n,color:s,scale:l,property:u}),i.restore()}(i,{line:r,target:n,above:v,below:w,area:e,scale:s,axis:o}),hS(i))}function OH(i,t,e){const{segments:n,points:r}=t;let s=!0,o=!1;i.beginPath();for(const l of n){const{start:u,end:p}=l,v=r[u],w=r[LL(u,p,r)];s?(i.moveTo(v.x,v.y),s=!1):(i.lineTo(v.x,e),i.lineTo(v.x,v.y)),o=!!t.pathSegment(i,l,{move:o}),o?i.closePath():i.lineTo(w.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function FH(i,t){const{line:e,target:n,property:r,color:s,scale:o}=t,l=function Ppe(i,t,e){const n=i.segments,r=i.points,s=t.points,o=[];for(const l of n){let{start:u,end:p}=l;p=LL(u,p,r);const v=DL(e,r[u],r[p],l.loop);if(!t.segments){o.push({source:l,target:v,start:r[u],end:r[p]});continue}const w=OU(t,v);for(const I of w){const T=DL(e,s[I.start],s[I.end],I.loop),k=kU(l,r,T);for(const W of k)o.push({source:W,target:I,start:{[e]:LH(v,T,"start",Math.max)},end:{[e]:LH(v,T,"end",Math.min)}})}}return o}(e,n,r);for(const{source:u,target:p,start:v,end:w}of l){const{style:{backgroundColor:I=s}={}}=u,T=!0!==n;i.save(),i.fillStyle=I,Zpe(i,o,T&&DL(r,v,w)),i.beginPath();const k=!!e.pathSegment(i,u);let W;if(T){k?i.closePath():NH(i,n,w,r);const K=!!n.pathSegment(i,p,{move:k,reverse:!0});W=k&&K,W||NH(i,n,v,r)}i.closePath(),i.fill(W?"evenodd":"nonzero"),i.restore()}}function Zpe(i,t,e){const{top:n,bottom:r}=t.chart.chartArea,{property:s,start:o,end:l}=e||{};"x"===s&&(i.beginPath(),i.rect(o,n,l-o,r-n),i.clip())}function NH(i,t,e,n){const r=t.interpolate(e,n);r&&i.lineTo(r.x,r.y)}var Qpe={id:"filler",afterDatasetsUpdate(i,t,e){const n=(i.data.datasets||[]).length,r=[];let s,o,l,u;for(o=0;o<n;++o)s=i.getDatasetMeta(o),l=s.dataset,u=null,l&&l.options&&l instanceof IS&&(u={visible:i.isDatasetVisible(o),index:o,fill:Fpe(l,o,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=u,r.push(u);for(o=0;o<n;++o)u=r[o],u&&!1!==u.fill&&(u.fill=Ope(r,o,e.propagate))},beforeDraw(i,t,e){const n="beforeDraw"===e.drawTime,r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;!l||(l.line.updateControlPoints(s,l.axis),n&&l.fill&&RL(i.ctx,l,s))}},beforeDatasetsDraw(i,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const s=n[r].$filler;PH(s)&&RL(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,t,e){const n=t.meta.$filler;!PH(n)||"beforeDatasetDraw"!==e.drawTime||RL(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const BH=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}};class zH extends mm{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Pl(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=Qu(n.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=BH(n,s);let p,v;e.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(o,s,l,u)+10):(v=this.maxHeight,p=this._fitCols(o,s,l,u)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+l;let w=t;s.textAlign="left",s.textBaseline="middle";let I=-1,T=-v;return this.legendItems.forEach((k,W)=>{const K=n+e/2+s.measureText(k.text).width;(0===W||p[p.length-1]+K+2*l>o)&&(w+=v,p[p.length-(W>0?0:1)]=0,T+=v,I++),u[W]={left:0,top:T,row:I,width:K,height:r},p[p.length-1]+=K+l}),w}_fitCols(t,e,n,r){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.columnSizes=[],v=o-t;let w=l,I=0,T=0,k=0,W=0;return this.legendItems.forEach((K,he)=>{const Te=n+e/2+s.measureText(K.text).width;he>0&&T+r+2*l>v&&(w+=I+l,p.push({width:I,height:T}),k+=I+l,W++,I=T=0),u[he]={left:k,top:T,col:W,width:Te,height:r},I=Math.max(I,Te),T+=r+l}),w+=I,p.push({width:I,height:T}),w}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:s}}=this,o=yC(s,this.left,this.width);if(this.isHorizontal()){let l=0,u=Ed(n,this.left+r,this.right-this.lineWidths[l]);for(const p of e)l!==p.row&&(l=p.row,u=Ed(n,this.left+r,this.right-this.lineWidths[l])),p.top+=this.top+t+r,p.left=o.leftForLtr(o.x(u),p.width),u+=p.width+r}else{let l=0,u=Ed(n,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const p of e)p.col!==l&&(l=p.col,u=Ed(n,this.top+t+r,this.bottom-this.columnSizes[l].height)),p.top=u,p.left+=this.left+r,p.left=o.leftForLtr(o.x(p.left),p.width),u+=p.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;uS(t,this),this._draw(),hS(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:s,labels:o}=t,l=ia.color,u=yC(t.rtl,this.left,this.width),p=Qu(o.font),{color:v,padding:w}=o,I=p.size,T=I/2;let k;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:W,boxHeight:K,itemHeight:he}=BH(o,I),Le=this.isHorizontal(),tt=this._computeTitleHeight();k=Le?{x:Ed(s,this.left+w,this.right-n[0]),y:this.top+w+tt,line:0}:{x:this.left+w,y:Ed(s,this.top+tt+w,this.bottom-e[0].height),line:0},DU(this.ctx,t.textDirection);const _t=he+w;this.legendItems.forEach((Ut,at)=>{r.strokeStyle=Ut.fontColor||v,r.fillStyle=Ut.fontColor||v;const Lt=r.measureText(Ut.text).width,cn=u.textAlign(Ut.textAlign||(Ut.textAlign=o.textAlign)),Gn=W+T+Lt;let ii=k.x,jn=k.y;u.setWidth(this.width),Le?at>0&&ii+Gn+w>this.right&&(jn=k.y+=_t,k.line++,ii=k.x=Ed(s,this.left+w,this.right-n[k.line])):at>0&&jn+_t>this.bottom&&(ii=k.x=ii+e[k.line].width+w,k.line++,jn=k.y=Ed(s,this.top+tt+w,this.bottom-e[k.line].height)),function(Ut,at,Lt){if(isNaN(W)||W<=0||isNaN(K)||K<0)return;r.save();const cn=mo(Lt.lineWidth,1);if(r.fillStyle=mo(Lt.fillStyle,l),r.lineCap=mo(Lt.lineCap,"butt"),r.lineDashOffset=mo(Lt.lineDashOffset,0),r.lineJoin=mo(Lt.lineJoin,"miter"),r.lineWidth=cn,r.strokeStyle=mo(Lt.strokeStyle,l),r.setLineDash(mo(Lt.lineDash,[])),o.usePointStyle){const Gn={radius:K*Math.SQRT2/2,pointStyle:Lt.pointStyle,rotation:Lt.rotation,borderWidth:cn},ii=u.xPlus(Ut,W/2);mU(r,Gn,ii,at+T,o.pointStyleWidth&&W)}else{const Gn=at+Math.max((I-K)/2,0),ii=u.leftForLtr(Ut,W),jn=T0(Lt.borderRadius);r.beginPath(),Object.values(jn).some(Mn=>0!==Mn)?GA(r,{x:ii,y:Gn,w:W,h:K,radius:jn}):r.rect(ii,Gn,W,K),r.fill(),0!==cn&&r.stroke()}r.restore()}(u.x(ii),jn,Ut),ii=((i,t,e,n)=>i===(n?"left":"right")?e:"center"===i?(t+e)/2:t)(cn,ii+W+T,Le?ii+Gn:this.right,t.rtl),function(Ut,at,Lt){E0(r,Lt.text,Ut,at+he/2,p,{strikethrough:Lt.hidden,textAlign:u.textAlign(Lt.textAlign)})}(u.x(ii),jn,Ut),Le?k.x+=Gn+w:k.y+=_t}),LU(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Qu(e.font),r=Td(e.padding);if(!e.display)return;const s=yC(t.rtl,this.left,this.width),o=this.ctx,l=e.position,p=r.top+n.size/2;let v,w=this.left,I=this.width;if(this.isHorizontal())I=Math.max(...this.lineWidths),v=this.top+p,w=Ed(t.align,w,this.right-I);else{const k=this.columnSizes.reduce((W,K)=>Math.max(W,K.height),0);v=p+Ed(t.align,this.top,this.bottom-k-t.labels.padding-this._computeTitleHeight())}const T=Ed(l,w,w+I);o.textAlign=s.textAlign(nL(l)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,E0(o,e.text,T,v,n)}_computeTitleHeight(){const t=this.options.title,e=Qu(t.font),n=Td(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,s;if(uy(t,this.left,this.right)&&uy(e,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],uy(t,r.left,r.left+r.width)&&uy(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function ege(i,t){return!(("mousemove"!==i&&"mouseout"!==i||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==i&&"mouseup"!==i))}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((i,t)=>null!==i&&null!==t&&i.datasetIndex===t.datasetIndex&&i.index===t.index)(r,n);r&&!s&&Pl(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!s&&Pl(e.onHover,[t,n,this],this)}else n&&Pl(e.onClick,[t,n,this],this)}}var tge={id:"legend",_element:zH,start(i,t,e){const n=i.legend=new zH({ctx:i.ctx,options:e,chart:i});Md.configure(i,n,e),Md.addBox(i,n)},stop(i){Md.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;Md.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:s}}=i.legend.options;return i._getSortedDatasetMetas().map(o=>{const l=o.controller.getStyle(e?0:void 0),u=Td(l.borderWidth);return{text:t[o.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!o.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class PL extends mm{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Rl(n.text)?n.text.length:1;this._padding=Td(n.padding);const s=r*Qu(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:s,options:o}=this,l=o.align;let p,v,w,u=0;return this.isHorizontal()?(v=Ed(l,n,s),w=e+t,p=s-n):("left"===o.position?(v=n+t,w=Ed(l,r,e),u=-.5*ac):(v=s-t,w=Ed(l,e,r),u=.5*ac),p=r-e),{titleX:v,titleY:w,maxWidth:p,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Qu(e.font),s=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:u,rotation:p}=this._drawArgs(s);E0(t,e.text,0,0,n,{color:e.color,maxWidth:u,rotation:p,textAlign:nL(e.align),textBaseline:"middle",translation:[o,l]})}}var ige={id:"title",_element:PL,start(i,t,e){!function nge(i,t){const e=new PL({ctx:i.ctx,options:t,chart:i});Md.configure(i,e,t),Md.addBox(i,e),i.titleBlock=e}(i,e)},stop(i){Md.removeBox(i,i.titleBlock),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;Md.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ES=new WeakMap;var rge={id:"subtitle",start(i,t,e){const n=new PL({ctx:i.ctx,options:e,chart:i});Md.configure(i,n,e),Md.addBox(i,n),ES.set(i,n)},stop(i){Md.removeBox(i,ES.get(i)),ES.delete(i)},beforeUpdate(i,t,e){const n=ES.get(i);Md.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ex={average(i){if(!i.length)return!1;let t,e,n=0,r=0,s=0;for(t=0,e=i.length;t<e;++t){const o=i[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n+=l.x,r+=l.y,++s}}return{x:n/s,y:r/s}},nearest(i,t){if(!i.length)return!1;let s,o,l,e=t.x,n=t.y,r=Number.POSITIVE_INFINITY;for(s=0,o=i.length;s<o;++s){const u=i[s].element;if(u&&u.hasValue()){const v=eL(t,u.getCenterPoint());v<r&&(r=v,l=u)}}if(l){const u=l.tooltipPosition();e=u.x,n=u.y}return{x:e,y:n}}};function hv(i,t){return t&&(Rl(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function py(i){return("string"==typeof i||i instanceof String)&&i.indexOf("\n")>-1?i.split("\n"):i}function sge(i,t){const{element:e,datasetIndex:n,index:r}=t,s=i.getDatasetMeta(n).controller,{label:o,value:l}=s.getLabelAndValue(r);return{chart:i,label:o,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function VH(i,t){const e=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:o,boxHeight:l}=t,u=Qu(t.bodyFont),p=Qu(t.titleFont),v=Qu(t.footerFont),w=s.length,I=r.length,T=n.length,k=Td(t.padding);let W=k.height,K=0,he=n.reduce((Le,tt)=>Le+tt.before.length+tt.lines.length+tt.after.length,0);he+=i.beforeBody.length+i.afterBody.length,w&&(W+=w*p.lineHeight+(w-1)*t.titleSpacing+t.titleMarginBottom),he&&(W+=T*(t.displayColors?Math.max(l,u.lineHeight):u.lineHeight)+(he-T)*u.lineHeight+(he-1)*t.bodySpacing),I&&(W+=t.footerMarginTop+I*v.lineHeight+(I-1)*t.footerSpacing);let Te=0;const Ae=function(Le){K=Math.max(K,e.measureText(Le).width+Te)};return e.save(),e.font=p.string,nl(i.title,Ae),e.font=u.string,nl(i.beforeBody.concat(i.afterBody),Ae),Te=t.displayColors?o+2+t.boxPadding:0,nl(n,Le=>{nl(Le.before,Ae),nl(Le.lines,Ae),nl(Le.after,Ae)}),Te=0,e.font=v.string,nl(i.footer,Ae),e.restore(),K+=k.width,{width:K,height:W}}function lge(i,t,e,n){const{x:r,width:s}=e,{width:o,chartArea:{left:l,right:u}}=i;let p="center";return"center"===n?p=r<=(l+u)/2?"left":"right":r<=s/2?p="left":r>=o-s/2&&(p="right"),function age(i,t,e,n){const{x:r,width:s}=n,o=e.caretSize+e.caretPadding;if("left"===i&&r+s+o>t.width||"right"===i&&r-s-o<0)return!0}(p,i,t,e)&&(p="center"),p}function UH(i,t,e){const n=e.yAlign||t.yAlign||function oge(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}(i,e);return{xAlign:e.xAlign||t.xAlign||lge(i,t,e,n),yAlign:n}}function HH(i,t,e,n){const{caretSize:r,caretPadding:s,cornerRadius:o}=i,{xAlign:l,yAlign:u}=e,p=r+s,{topLeft:v,topRight:w,bottomLeft:I,bottomRight:T}=T0(o);let k=function cge(i,t){let{x:e,width:n}=i;return"right"===t?e-=n:"center"===t&&(e-=n/2),e}(t,l);const W=function uge(i,t,e){let{y:n,height:r}=i;return"top"===t?n+=e:n-="bottom"===t?r+e:r/2,n}(t,u,p);return"center"===u?"left"===l?k+=p:"right"===l&&(k-=p):"left"===l?k-=Math.max(v,I)+r:"right"===l&&(k+=Math.max(w,T)+r),{x:Ch(k,0,n.width-t.width),y:Ch(W,0,n.height-t.height)}}function TS(i,t,e){const n=Td(e.padding);return"center"===t?i.x+i.width/2:"right"===t?i.x+i.width-n.right:i.x+n.left}function GH(i){return hv([],py(i))}function WH(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}let jH=(()=>{class i extends mm{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,o=new zU(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function hge(i,t,e){return p_(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=r.beforeTitle.apply(this,[e]),o=r.title.apply(this,[e]),l=r.afterTitle.apply(this,[e]);let u=[];return u=hv(u,py(s)),u=hv(u,py(o)),u=hv(u,py(l)),u}getBeforeBody(e,n){return GH(n.callbacks.beforeBody.apply(this,[e]))}getBody(e,n){const{callbacks:r}=n,s=[];return nl(e,o=>{const l={before:[],lines:[],after:[]},u=WH(r,o);hv(l.before,py(u.beforeLabel.call(this,o))),hv(l.lines,u.label.call(this,o)),hv(l.after,py(u.afterLabel.call(this,o))),s.push(l)}),s}getAfterBody(e,n){return GH(n.callbacks.afterBody.apply(this,[e]))}getFooter(e,n){const{callbacks:r}=n,s=r.beforeFooter.apply(this,[e]),o=r.footer.apply(this,[e]),l=r.afterFooter.apply(this,[e]);let u=[];return u=hv(u,py(s)),u=hv(u,py(o)),u=hv(u,py(l)),u}_createItems(e){const n=this._active,r=this.chart.data,s=[],o=[],l=[];let p,v,u=[];for(p=0,v=n.length;p<v;++p)u.push(sge(this.chart,n[p]));return e.filter&&(u=u.filter((w,I,T)=>e.filter(w,I,T,r))),e.itemSort&&(u=u.sort((w,I)=>e.itemSort(w,I,r))),nl(u,w=>{const I=WH(e.callbacks,w);s.push(I.labelColor.call(this,w)),o.push(I.labelPointStyle.call(this,w)),l.push(I.labelTextColor.call(this,w))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let o,l=[];if(s.length){const u=ex[r.position].call(this,s,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const p=this._size=VH(this,r),v=Object.assign({},u,p),w=UH(this.chart,r,v),I=HH(r,v,w,this.chart);this.xAlign=w.xAlign,this.yAlign=w.yAlign,o={opacity:1,x:I.x,y:I.y,width:p.width,height:p.height,caretX:u.x,caretY:u.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const o=this.getCaretPosition(e,r,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:o}=this,{caretSize:l,cornerRadius:u}=r,{topLeft:p,topRight:v,bottomLeft:w,bottomRight:I}=T0(u),{x:T,y:k}=e,{width:W,height:K}=n;let he,Te,Ae,Le,tt,_t;return"center"===o?(tt=k+K/2,"left"===s?(he=T,Te=he-l,Le=tt+l,_t=tt-l):(he=T+W,Te=he+l,Le=tt-l,_t=tt+l),Ae=he):(Te="left"===s?T+Math.max(p,w)+l:"right"===s?T+W-Math.max(v,I)-l:this.caretX,"top"===o?(Le=k,tt=Le-l,he=Te-l,Ae=Te+l):(Le=k+K,tt=Le+l,he=Te+l,Ae=Te-l),_t=Le),{x1:he,x2:Te,x3:Ae,y1:Le,y2:tt,y3:_t}}drawTitle(e,n,r){const s=this.title,o=s.length;let l,u,p;if(o){const v=yC(r.rtl,this.x,this.width);for(e.x=TS(this,r.titleAlign,r),n.textAlign=v.textAlign(r.titleAlign),n.textBaseline="middle",l=Qu(r.titleFont),u=r.titleSpacing,n.fillStyle=r.titleColor,n.font=l.string,p=0;p<o;++p)n.fillText(s[p],v.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,p+1===o&&(e.y+=r.titleMarginBottom-u)}}_drawColorBox(e,n,r,s,o){const l=this.labelColors[r],u=this.labelPointStyles[r],{boxHeight:p,boxWidth:v,boxPadding:w}=o,I=Qu(o.bodyFont),T=TS(this,"left",o),k=s.x(T),K=n.y+(p<I.lineHeight?(I.lineHeight-p)/2:0);if(o.usePointStyle){const he={radius:Math.min(v,p)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},Te=s.leftForLtr(k,v)+v/2,Ae=K+p/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,hL(e,he,Te,Ae),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,hL(e,he,Te,Ae)}else{e.lineWidth=ea(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const he=s.leftForLtr(k,v-w),Te=s.leftForLtr(s.xPlus(k,1),v-w-2),Ae=T0(l.borderRadius);Object.values(Ae).some(Le=>0!==Le)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,GA(e,{x:he,y:K,w:v,h:p,radius:Ae}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),GA(e,{x:Te,y:K+1,w:v-2,h:p-2,radius:Ae}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(he,K,v,p),e.strokeRect(he,K,v,p),e.fillStyle=l.backgroundColor,e.fillRect(Te,K+1,v-2,p-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:p,boxWidth:v,boxPadding:w}=r,I=Qu(r.bodyFont);let T=I.lineHeight,k=0;const W=yC(r.rtl,this.x,this.width),K=function(Lt){n.fillText(Lt,W.x(e.x+k),e.y+T/2),e.y+=T+o},he=W.textAlign(l);let Te,Ae,Le,tt,_t,Ut,at;for(n.textAlign=l,n.textBaseline="middle",n.font=I.string,e.x=TS(this,he,r),n.fillStyle=r.bodyColor,nl(this.beforeBody,K),k=u&&"right"!==he?"center"===l?v/2+w:v+2+w:0,tt=0,Ut=s.length;tt<Ut;++tt){for(Te=s[tt],Ae=this.labelTextColors[tt],n.fillStyle=Ae,nl(Te.before,K),Le=Te.lines,u&&Le.length&&(this._drawColorBox(n,e,tt,W,r),T=Math.max(I.lineHeight,p)),_t=0,at=Le.length;_t<at;++_t)K(Le[_t]),T=I.lineHeight;nl(Te.after,K)}k=0,T=I.lineHeight,nl(this.afterBody,K),e.y-=o}drawFooter(e,n,r){const s=this.footer,o=s.length;let l,u;if(o){const p=yC(r.rtl,this.x,this.width);for(e.x=TS(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=p.textAlign(r.footerAlign),n.textBaseline="middle",l=Qu(r.footerFont),n.fillStyle=r.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(s[u],p.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:o,yAlign:l}=this,{x:u,y:p}=e,{width:v,height:w}=r,{topLeft:I,topRight:T,bottomLeft:k,bottomRight:W}=T0(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(u+I,p),"top"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+v-T,p),n.quadraticCurveTo(u+v,p,u+v,p+T),"center"===l&&"right"===o&&this.drawCaret(e,n,r,s),n.lineTo(u+v,p+w-W),n.quadraticCurveTo(u+v,p+w,u+v-W,p+w),"bottom"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+k,p+w),n.quadraticCurveTo(u,p+w,u,p+w-k),"center"===l&&"left"===o&&this.drawCaret(e,n,r,s),n.lineTo(u,p+I),n.quadraticCurveTo(u,p,u+I,p),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const l=ex[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=VH(this,e),p=Object.assign({},l,this._size),v=UH(n,e,p),w=HH(e,p,v,n);(s._to!==w.x||o._to!==w.y)&&(this.xAlign=v.xAlign,this.yAlign=v.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,w))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=Td(n.padding);n.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,n),DU(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),LU(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:u,index:p})=>{const v=this.chart.getDatasetMeta(u);if(!v)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:v.data[p],index:p}}),o=!tS(r,s),l=this._positionChanged(s,n);(o||l)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,r),u=this._positionChanged(l,e),p=n||!tS(l,o)||u;return p&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),p}_getActiveElements(e,n,r,s){const o=this.options;if("mouseout"===e.type)return[];if(!s)return n;const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:r,caretY:s,options:o}=this,l=ex[o.position].call(this,e,n);return!1!==l&&(r!==l.x||s!==l.y)}}return i.positioners=ex,i})();var fge=Object.freeze({__proto__:null,Decimation:Rpe,Filler:Qpe,Legend:tge,SubTitle:rge,Title:ige,Tooltip:{id:"tooltip",_element:jH,positioners:ex,afterInit(i,t,e){e&&(i.tooltip=new jH({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===i.notifyPlugins("beforeTooltipDraw",e))return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){i.tooltip&&i.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:cy,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:cy,beforeBody:cy,beforeLabel:cy,label(i){if(this&&this.options&&"dataset"===this.options.mode)return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return ga(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:cy,afterBody:cy,beforeFooter:cy,footer:cy,afterFooter:cy}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>"filter"!==i&&"itemSort"!==i&&"external"!==i,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class MS extends R0{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:r,label:s}of e)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ga(t))return null;const n=this.getLabels();return((i,t)=>null===i?null:Ch(Math.round(i),0,t))(e=isFinite(e)&&n[e]===t?e:function gge(i,t,e,n){const r=i.indexOf(t);return-1===r?((i,t,e,n)=>("string"==typeof t?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(i,t,e,n):r!==i.lastIndexOf(t)?e:r}(n,t,mo(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function $H(i,t,{horizontal:e,minRotation:n}){const r=gm(n),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+i).length)}MS.id="category",MS.defaults={ticks:{callback:MS.prototype.getLabelForValue}};class DS extends R0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ga(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const o=u=>r=e?r:u,l=u=>s=n?s:u;if(t){const u=lv(r),p=lv(s);u<0&&p<0?l(0):u>0&&p>0&&o(0)}if(r===s){let u=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(u=Math.abs(.05*s)),l(s+u),t||o(r-u)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:n}=t;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o=function vge(i,t){const e=[],{bounds:r,step:s,min:o,max:l,precision:u,count:p,maxTicks:v,maxDigits:w,includeBounds:I}=i,T=s||1,k=v-1,{min:W,max:K}=t,he=!ga(o),Te=!ga(l),Ae=!ga(p),Le=(K-W)/(w+1);let _t,Ut,at,Lt,tt=$4((K-W)/k/T)*T;if(tt<1e-14&&!he&&!Te)return[{value:W},{value:K}];Lt=Math.ceil(K/tt)-Math.floor(W/tt),Lt>k&&(tt=$4(Lt*tt/k/T)*T),ga(u)||(_t=Math.pow(10,u),tt=Math.ceil(tt*_t)/_t),"ticks"===r?(Ut=Math.floor(W/tt)*tt,at=Math.ceil(K/tt)*tt):(Ut=W,at=K),he&&Te&&s&&function Kue(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}((l-o)/s,tt/1e3)?(Lt=Math.round(Math.min((l-o)/tt,v)),tt=(l-o)/Lt,Ut=o,at=l):Ae?(Ut=he?o:Ut,at=Te?l:at,Lt=p-1,tt=(at-Ut)/Lt):(Lt=(at-Ut)/tt,Lt=FA(Lt,Math.round(Lt),tt/1e3)?Math.round(Lt):Math.ceil(Lt));const cn=Math.max(X4(tt),X4(Ut));_t=Math.pow(10,ga(u)?cn:u),Ut=Math.round(Ut*_t)/_t,at=Math.round(at*_t)/_t;let Gn=0;for(he&&(I&&Ut!==o?(e.push({value:o}),Ut<o&&Gn++,FA(Math.round((Ut+Gn*tt)*_t)/_t,o,$H(o,Le,i))&&Gn++):Ut<o&&Gn++);Gn<Lt;++Gn)e.push({value:Math.round((Ut+Gn*tt)*_t)/_t});return Te&&I&&at!==l?e.length&&FA(e[e.length-1].value,l,$H(l,Le,i))?e[e.length-1].value=l:e.push({value:l}):(!Te||at===l)&&e.push({value:at}),e}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&q4(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return jA(t,this.chart.options.locale,this.options.ticks.format)}}class kL extends DS{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=au(t)?t:0,this.max=au(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=gm(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function qH(i){return i/Math.pow(10,Math.floor(_g(i)))==1}kL.id="linear",kL.defaults={ticks:{callback:gS.formatters.numeric}};class OL extends R0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=DS.prototype.parse.apply(this,[t,e]);if(0!==n)return au(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=au(t)?Math.max(0,t):null,this.max=au(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const s=u=>n=t?n:u,o=u=>r=e?r:u,l=(u,p)=>Math.pow(10,Math.floor(_g(u))+p);n===r&&(n<=0?(s(1),o(10)):(s(l(n,-1)),o(l(r,1)))),n<=0&&s(l(r,-1)),r<=0&&o(l(n,1)),this._zero&&this.min!==this._suggestedMin&&n===l(this.min,0)&&s(l(n,-1)),this.min=n,this.max=r}buildTicks(){const t=this.options,n=function yge(i,t){const e=Math.floor(_g(t.max)),n=Math.ceil(t.max/Math.pow(10,e)),r=[];let s=vg(i.min,Math.pow(10,Math.floor(_g(t.min)))),o=Math.floor(_g(s)),l=Math.floor(s/Math.pow(10,o)),u=o<0?Math.pow(10,Math.abs(o)):1;do{r.push({value:s,major:qH(s)}),++l,10===l&&(l=1,++o,u=o>=0?1:u),s=Math.round(l*Math.pow(10,o)*u)/u}while(o<e||o===e&&l<n);const p=vg(i.max,s);return r.push({value:p,major:qH(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&q4(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":jA(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=_g(t),this._valueRange=_g(this.max)-_g(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(_g(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function FL(i){const t=i.ticks;if(t.display&&i.display){const e=Td(t.backdropPadding);return mo(t.font&&t.font.size,ia.font.size)+e.height}return 0}function _ge(i,t,e){return e=Rl(e)?e:[e],{w:The(i,t.string,e),h:e.length*t.lineHeight}}function XH(i,t,e,n,r){return i===n||i===r?{start:t-e/2,end:t+e/2}:i<n||i>r?{start:t-e,end:t}:{start:t,end:t+e}}function Cge(i,t,e,n,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let l=0,u=0;n.start<t.l?(l=(t.l-n.start)/s,i.l=Math.min(i.l,t.l-l)):n.end>t.r&&(l=(n.end-t.r)/s,i.r=Math.max(i.r,t.r+l)),r.start<t.t?(u=(t.t-r.start)/o,i.t=Math.min(i.t,t.t-u)):r.end>t.b&&(u=(r.end-t.b)/o,i.b=Math.max(i.b,t.b+u))}function Age(i){return 0===i||180===i?"center":i<180?"left":"right"}function xge(i,t,e){return"right"===e?i-=t:"center"===e&&(i-=t/2),i}function Ige(i,t,e){return 90===e||270===e?i-=t/2:(e>270||e<90)&&(i-=t),i}function YH(i,t,e,n){const{ctx:r}=i;if(e)r.arc(i.xCenter,i.yCenter,t,0,dl);else{let s=i.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<n;o++)s=i.getPointPosition(o,t),r.lineTo(s.x,s.y)}}OL.id="logarithmic",OL.defaults={ticks:{callback:gS.formatters.logarithmic,major:{enabled:!0}}};class tx extends DS{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Td(FL(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=au(t)&&!isNaN(t)?t:0,this.max=au(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/FL(this.options))}generateTickLabels(t){DS.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const r=Pl(this.options.pointLabels.callback,[e,n],this);return r||0===r?r:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?function bge(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),n=[],r=[],s=i._pointLabels.length,o=i.options.pointLabels,l=o.centerPointLabels?ac/s:0;for(let u=0;u<s;u++){const p=o.setContext(i.getPointLabelContext(u));r[u]=p.padding;const v=i.getPointPosition(u,i.drawingArea+r[u],l),w=Qu(p.font),I=_ge(i.ctx,w,i._pointLabels[u]);n[u]=I;const T=Lp(i.getIndexAngle(u)+l),k=Math.round(J2(T));Cge(e,t,T,XH(k,v.x,I.w,0,180),XH(k,v.y,I.h,90,270))}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=function wge(i,t,e){const n=[],r=i._pointLabels.length,s=i.options,o=FL(s)/2,l=i.drawingArea,u=s.pointLabels.centerPointLabels?ac/r:0;for(let p=0;p<r;p++){const v=i.getPointPosition(p,l+o+e[p],u),w=Math.round(J2(Lp(v.angle+Yc))),I=t[p],T=Ige(v.y,I.h,w),k=Age(w),W=xge(v.x,I.w,k);n.push({x:v.x,y:T,textAlign:k,left:W,top:T,right:W+I.w,bottom:T+I.h})}return n}(i,n,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return Lp(t*(dl/(this._pointLabels.length||1))+gm(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(ga(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ga(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function Tge(i,t,e){return p_(i,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-Yc+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),YH(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r}=e,s=this._pointLabels.length;let o,l,u;if(e.pointLabels.display&&function Sge(i,t){const{ctx:e,options:{pointLabels:n}}=i;for(let r=t-1;r>=0;r--){const s=n.setContext(i.getPointLabelContext(r)),o=Qu(s.font),{x:l,y:u,textAlign:p,left:v,top:w,right:I,bottom:T}=i._pointLabelItems[r],{backdropColor:k}=s;if(!ga(k)){const W=T0(s.borderRadius),K=Td(s.backdropPadding);e.fillStyle=k;const he=v-K.left,Te=w-K.top,Ae=I-v+K.width,Le=T-w+K.height;Object.values(W).some(tt=>0!==tt)?(e.beginPath(),GA(e,{x:he,y:Te,w:Ae,h:Le,radius:W}),e.fill()):e.fillRect(he,Te,Ae,Le)}E0(e,i._pointLabels[r],l,u+o.lineHeight/2,o,{color:s.color,textAlign:p,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((p,v)=>{0!==v&&(l=this.getDistanceFromCenterForValue(p.value),function Ege(i,t,e,n){const r=i.ctx,s=t.circular,{color:o,lineWidth:l}=t;!s&&!n||!o||!l||e<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),YH(i,e,s,n),r.closePath(),r.stroke(),r.restore())}(this,r.setContext(this.getContext(v-1)),l,s))}),n.display){for(t.save(),o=s-1;o>=0;o--){const p=n.setContext(this.getPointLabelContext(o)),{color:v,lineWidth:w}=p;!w||!v||(t.lineWidth=w,t.strokeStyle=v,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),u=this.getPointPosition(o,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,u)=>{if(0===u&&!e.reverse)return;const p=n.setContext(this.getContext(u)),v=Qu(p.font);if(s=this.getDistanceFromCenterForValue(this.ticks[u].value),p.showLabelBackdrop){t.font=v.string,o=t.measureText(l.label).width,t.fillStyle=p.backdropColor;const w=Td(p.backdropPadding);t.fillRect(-o/2-w.left,-s-v.size/2-w.top,o+w.width,v.size+w.height)}E0(t,l.label,0,-s,v,{color:p.color})}),t.restore()}drawTitle(){}}tx.id="radialLinear",tx.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:gS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:i=>i,padding:5,centerPointLabels:!1}},tx.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},tx.descriptors={angleLines:{_fallback:"grid"}};const LS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Uf=Object.keys(LS);function Mge(i,t){return i-t}function KH(i,t){if(ga(t))return null;const e=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts;let o=t;return"function"==typeof n&&(o=n(o)),au(o)||(o="string"==typeof n?e.parse(o,n):e.parse(o)),null===o?null:(r&&(o="week"!==r||!pC(s)&&!0!==s?e.startOf(o,r):e.startOf(o,"isoWeek",s)),+o)}function ZH(i,t,e,n){const r=Uf.length;for(let s=Uf.indexOf(i);s<r-1;++s){const o=LS[Uf[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(l*o.size))<=n)return Uf[s]}return Uf[r-1]}function QH(i,t,e){if(e){if(e.length){const{lo:n,hi:r}=tL(e,t);i[e[n]>=t?e[n]:e[r]]=!0}}else i[t]=!0}function JH(i,t,e){const n=[],r={},s=t.length;let o,l;for(o=0;o<s;++o)l=t[o],r[l]=o,n.push({value:l,major:!1});return 0!==s&&e?function Rge(i,t,e,n){const r=i._adapter,s=+r.startOf(t[0].value,n),o=t[t.length-1].value;let l,u;for(l=s;l<=o;l=+r.add(l,1,n))u=e[l],u>=0&&(t[u].major=!0);return t}(i,n,r,e):n}let NL=(()=>{class i extends R0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n){const r=e.time||(e.time={}),s=this._adapter=new vfe._date(e.adapters.date);s.init(n),kA(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return void 0===e?null:KH(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function p(v){!l&&!isNaN(v.min)&&(s=Math.min(s,v.min)),!u&&!isNaN(v.max)&&(o=Math.max(o,v.max))}(!l||!u)&&(p(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&p(this.getMinMax(!1))),s=au(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),o=au(o)&&!isNaN(o)?o:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,u=function ehe(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}(s,o,this.max);return this._unit=n.unit||(r.autoSkip?ZH(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):function Dge(i,t,e,n,r){for(let s=Uf.length-1;s>=Uf.indexOf(e);s--){const o=Uf[s];if(LS[o].common&&i._adapter.diff(r,n,o)>=t-1)return o}return Uf[e?Uf.indexOf(e):0]}(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function Lge(i){for(let t=Uf.indexOf(i)+1,e=Uf.length;t<e;++t)if(LS[Uf[t]].common)return Uf[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&u.reverse(),JH(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let s,o,n=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),n=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),r=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=Ch(n,0,l),r=Ch(r,0,l),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,o=s.time,l=o.unit||ZH(o.minUnit,n,r,this._getLabelCapacity(n)),u=mo(o.stepSize,1),p="week"===l&&o.isoWeekday,v=pC(p)||!0===p,w={};let T,k,I=n;if(v&&(I=+e.startOf(I,"isoWeek",p)),I=+e.startOf(I,v?"day":l),e.diff(r,n,l)>1e5*u)throw new Error(n+" and "+r+" are too far apart with stepSize of "+u+" "+l);const W="data"===s.ticks.source&&this.getDataTimestamps();for(T=I,k=0;T<r;T=+e.add(T,u,l),k++)QH(w,T,W);return(T===r||"ticks"===s.bounds||1===k)&&QH(w,T,W),Object.keys(w).sort((K,he)=>K-he).map(K=>+K)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}_tickFormatFunction(e,n,r,s){const o=this.options,l=o.time.displayFormats,u=this._unit,p=this._majorUnit,w=p&&l[p],I=r[n],k=this._adapter.format(e,s||(p&&w&&I&&I.major?w:u&&l[u])),W=o.ticks.callback;return W?Pl(W,[k,n,r],this):k}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=gm(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:r*o+u*l,h:r*l+u*o}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,o=this._tickFormatFunction(e,0,JH(this,[e],this._majorUnit),s),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let n,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(KH(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Q4(e.sort(Mge))}}return i.id="time",i.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},i})();function RS(i,t,e){let s,o,l,u,n=0,r=i.length-1;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=hy(i,"pos",t)),({pos:s,time:l}=i[n]),({pos:o,time:u}=i[r])):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=hy(i,"time",t)),({time:s,pos:l}=i[n]),({time:o,pos:u}=i[r]));const p=o-s;return p?l+(u-l)*(t-s)/p:l}class BL extends NL{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=RS(e,this.min),this._tableRange=RS(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],s=[];let o,l,u,p,v;for(o=0,l=t.length;o<l;++o)p=t[o],p>=e&&p<=n&&r.push(p);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)v=r[o+1],u=r[o-1],p=r[o],Math.round((v+u)/2)!==p&&s.push({time:p,pos:o/(l-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(RS(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return RS(this._table,n*this._tableRange+this._minPos,!0)}}BL.id="timeseries",BL.defaults=NL.defaults,AS.register(mfe,Tpe,fge,Object.freeze({__proto__:null,CategoryScale:MS,LinearScale:kL,LogarithmicScale:OL,RadialLinearScale:tx,TimeScale:NL,TimeSeriesScale:BL}));const Oge=AS;let Fge=(()=>{class i{constructor(e){this.el=e,this.plugins=[],this.responsive=!0,this.onDataSelect=new Bn,this._options={}}get data(){return this._data}set data(e){this._data=e,this.reinit()}get options(){return this._options}set options(e){this._options=e,this.reinit()}ngAfterViewInit(){this.initChart(),this.initialized=!0}onCanvasClick(e){if(this.chart){const n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&r&&this.onDataSelect.emit({originalEvent:e,element:n[0],dataset:r})}}initChart(){let e=this.options||{};e.responsive=this.responsive,e.responsive&&(this.height||this.width)&&(e.maintainAspectRatio=!1),this.chart=new Oge(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})}getCanvas(){return this.el.nativeElement.children[0].children[0]}getBase64Image(){return this.chart.toBase64Image()}generateLegend(){if(this.chart)return this.chart.generateLegend()}refresh(){this.chart&&this.chart.update()}reinit(){this.chart&&(this.chart.destroy(),this.initChart())}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn))},i.\u0275cmp=_r({type:i,selectors:[["p-chart"]],hostAttrs:[1,"p-element"],inputs:{type:"type",plugins:"plugins",width:"width",height:"height",responsive:"responsive",data:"data",options:"options"},outputs:{onDataSelect:"onDataSelect"},decls:2,vars:6,consts:[[2,"position","relative"],[3,"click"]],template:function(e,n){1&e&&(Qe(0,"div",0)(1,"canvas",1),mn("click",function(s){return n.onCanvasClick(s)}),nt()()),2&e&&(xd("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height),Se(1),vr("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height))},encapsulation:2,changeDetection:0}),i})(),Nge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();const Bge=function(i,t){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t}};function zge(i,t){if(1&i&&Vn(0,"span",3),2&i){const e=Ce();Fr(e.checked?e.onIcon:e.offIcon),de("ngClass",as(3,Bge,"left"===e.iconPos,"right"===e.iconPos))}}const Vge=function(i,t,e){return{"p-button p-togglebutton p-component":!0,"p-button-icon-only":i,"p-highlight":t,"p-disabled":e}},Uge={provide:wc,useExisting:hs(()=>e5),multi:!0};let e5=(()=>{class i{constructor(e){this.cd=e,this.iconPos="left",this.onChange=new Bn,this.checked=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}toggle(e){this.disabled||(this.checked=!this.checked,this.onModelChange(this.checked),this.onModelTouched(),this.onChange.emit({originalEvent:e,checked:this.checked}),this.cd.markForCheck())}onBlur(){this.onModelTouched()}writeValue(e){this.checked=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get hasOnLabel(){return this.onLabel&&this.onLabel.length>0}get hasOffLabel(){return this.onLabel&&this.onLabel.length>0}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-toggleButton"]],hostAttrs:[1,"p-element"],inputs:{onLabel:"onLabel",offLabel:"offLabel",onIcon:"onIcon",offIcon:"offIcon",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",style:"style",styleClass:"styleClass",inputId:"inputId",tabindex:"tabindex",iconPos:"iconPos"},outputs:{onChange:"onChange"},features:[Ao([Uge])],decls:4,vars:12,consts:[["role","checkbox","pRipple","",3,"ngClass","ngStyle","click","keydown.enter"],[3,"class","ngClass",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"]],template:function(e,n){1&e&&(Qe(0,"div",0),mn("click",function(s){return n.toggle(s)})("keydown.enter",function(s){return n.toggle(s)}),Xe(1,zge,1,6,"span",1),Qe(2,"span",2),ci(3),nt()()),2&e&&(Fr(n.styleClass),de("ngClass",Su(8,Vge,n.onIcon&&n.offIcon&&!n.hasOnLabel&&!n.hasOffLabel,n.checked,n.disabled))("ngStyle",n.style),vr("tabindex",n.disabled?null:"0")("aria-checked",n.checked),Se(1),de("ngIf",n.onIcon||n.offIcon),Se(2),is(n.checked?n.hasOnLabel?n.onLabel:"":n.hasOffLabel?n.offLabel:""))},dependencies:[io,ho,Ro,Du],styles:[".p-button[_ngcontent-%COMP%]{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label[_ngcontent-%COMP%]{flex:1 1 auto}.p-button-icon-right[_ngcontent-%COMP%]{order:1}.p-button[_ngcontent-%COMP%]:disabled{cursor:default}.p-button-icon-only[_ngcontent-%COMP%]{justify-content:center}.p-button-icon-only[_ngcontent-%COMP%]   .p-button-label[_ngcontent-%COMP%]{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical[_ngcontent-%COMP%]{flex-direction:column}.p-button-icon-bottom[_ngcontent-%COMP%]{order:2}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{margin:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:last-child){border-right:0 none}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]:focus{position:relative;z-index:1}"],changeDetection:0}),i})(),Hge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,Xc]}),i})(),Gge=(()=>{class i{constructor(e){this.el=e,this.iconPos="left"}ngAfterViewInit(){this.id=sC()+"_badge";let e=-1!=this.el.nativeElement.nodeName.indexOf("-")?this.el.nativeElement.firstChild:this.el.nativeElement,n=document.createElement("span");n.id=this.id,n.className="p-badge p-component",this.severity&&Bt.addClass(n,"p-badge-"+this.severity),null!=this.value?(n.appendChild(document.createTextNode(this.value)),1===String(this.value).length&&Bt.addClass(n,"p-badge-no-gutter")):Bt.addClass(n,"p-badge-dot"),Bt.addClass(e,"p-overlay-badge"),e.appendChild(n),this.initialized=!0}get value(){return this._value}set value(e){if(e!==this._value&&(this._value=e,this.initialized)){let n=document.getElementById(this.id);this._value?(Bt.hasClass(n,"p-badge-dot")&&Bt.removeClass(n,"p-badge-dot"),1===String(this._value).length?Bt.addClass(n,"p-badge-no-gutter"):Bt.removeClass(n,"p-badge-no-gutter")):!this._value&&!Bt.hasClass(n,"p-badge-dot")&&Bt.addClass(n,"p-badge-dot"),n.innerHTML="",n.appendChild(document.createTextNode(this._value))}}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn))},i.\u0275dir=Yr({type:i,selectors:[["","pBadge",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",value:"value",severity:"severity"}}),i})(),Wge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa]}),i})(),PS=(()=>{class i{constructor(){this.fileDropped=new Bn}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1}ondrop(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1;let n=e.dataTransfer.files;n.length>0&&this.fileDropped.emit(n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=Yr({type:i,selectors:[["","dropZoneDirective",""]],hostVars:2,hostBindings:function(e,n){1&e&&mn("dragover",function(s){return n.onDragOver(s)})("dragleave",function(s){return n.onDragLeave(s)})("drop",function(s){return n.ondrop(s)}),2&e&&Mp("fileover",n.fileOver)},outputs:{fileDropped:"fileDropped"}}),i})();const jge=["myCytoscape"],$ge=["myPng"],qge=["myTreeTable"];function Xge(i,t){if(1&i&&Vn(0,"img",51),2&i){const e=t.$implicit;de("src",e.icon,Xh)("alt",e.label)}}function Yge(i,t){if(1&i&&Vn(0,"img",51),2&i){const e=t.$implicit;de("src",e.icon,Xh)("alt",e.label)}}function Kge(i,t){if(1&i&&Vn(0,"img",51),2&i){const e=t.$implicit;de("src",e.icon,Xh)("alt",e.label)}}const nx=function(){return{width:"100%"}};function Zge(i,t){if(1&i){const e=yi();Qe(0,"div",27)(1,"div",28)(2,"div",52)(3,"span",53),Vn(4,"i",54),nt(),Qe(5,"input",55),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().captureData.clone=r)}),nt(),Qe(6,"p-button",56),mn("click",function(){Ot(e);const r=Ce();return Nt(r.applyLabelize(r.captureData))}),nt()()(),Qe(7,"div",28)(8,"div",52)(9,"span",53),Vn(10,"i",57),nt(),Qe(11,"input",55),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().captureData.label=r)}),nt()()(),Qe(12,"div",28)(13,"div",58)(14,"p-dropdown",59),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().captureData.alias=r)}),nt()()(),Qe(15,"div",28)(16,"div",60)(17,"p-dropdown",61),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().captureData.tag=r)}),nt()()(),Qe(18,"div",28)(19,"div",52)(20,"span",53),Vn(21,"i",62),nt(),Qe(22,"input",55),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().captureData.group=r)}),nt()()(),Qe(23,"div",28)(24,"div",52)(25,"span",63)(26,"p-checkbox",64),mn("ngModelChange",function(r){return Ot(e),Nt(Ce()._lockedElement=r)})("onChange",function(r){return Ot(e),Nt(Ce().handleChangeLock(r))}),nt()(),Vn(27,"input",65),nt()()()}if(2&i){const e=Ce();Se(5),de("ngModel",e.captureData.clone),Se(6),de("ngModel",e.captureData.label),Se(3),no(uo(17,nx)),de("options",e.allNodes)("ngModel",e.captureData.alias)("filter",!0)("showClear",!0),Se(3),no(uo(18,nx)),de("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),Se(5),de("ngModel",e.captureData.group),Se(4),de("ngModel",e._lockedElement)("binary",!0)}}function Qge(i,t){if(1&i){const e=yi();Qe(0,"p-button",66),mn("click",function(){Ot(e);const r=Ce();return Nt(r.applyNodeUpdate(r.captureData))}),nt()}}function Jge(i,t){if(1&i){const e=yi();Qe(0,"div",27)(1,"div",28)(2,"div",52)(3,"span",53),Vn(4,"i",57),nt(),Qe(5,"input",55),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().captureData.label=r)}),nt()()(),Qe(6,"div",28)(7,"div",60)(8,"p-dropdown",61),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().captureData.tag=r)}),nt()()(),Qe(9,"div",28)(10,"div",52)(11,"span",53),Vn(12,"i",67),nt(),Qe(13,"input",68),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().currentSelectedEdge.data()._source=r)}),nt()()(),Qe(14,"div",28)(15,"div",52)(16,"span",53),Vn(17,"i",69),nt(),Qe(18,"input",68),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().currentSelectedEdge.data()._target=r)}),nt()()()()}if(2&i){const e=Ce();Se(5),de("ngModel",e.captureData.label),Se(3),no(uo(9,nx)),de("options",e.captureData.tags)("ngModel",e.captureData.tag)("filter",!0)("showClear",!0),Se(5),de("ngModel",e.currentSelectedEdge.data()._source),Se(5),de("ngModel",e.currentSelectedEdge.data()._target)}}function eme(i,t){if(1&i){const e=yi();Qe(0,"p-button",66),mn("click",function(){Ot(e);const r=Ce();return Nt(r.applyEdgeUpdate(r.captureData))}),nt()}}function tme(i,t){if(1&i){const e=yi();Qe(0,"p-button",66),mn("click",function(){Ot(e);const r=Ce();return Nt(r.applyChangeProperties(r.captureData))}),nt()}}const nme=function(){return{width:"100%",height:"100%"}};function ime(i,t){if(1&i){const e=yi();Qe(0,"textarea",71),mn("keyup",function(){Ot(e);const r=Ce(2);return Nt(r.previewNewCData(r.captureData))})("ngModelChange",function(r){return Ot(e),Nt(Ce(2).captureData.selectElementRawCdata=r)}),nt()}if(2&i){const e=Ce(2);no(uo(3,nme)),de("ngModel",e.captureData.selectElementRawCdata)}}function rme(i,t){1&i&&Vn(0,"div",72),2&i&&de("innerHTML",Ce(2).captureData.selectElementCdata,Aa)}const t5=function(){return{height:"100%"}};function sme(i,t){1&i&&(Qe(0,"p-splitter"),Xe(1,ime,1,4,"ng-template",70),Xe(2,rme,1,1,"ng-template",70),nt()),2&i&&no(uo(2,t5))}function ome(i,t){1&i&&Vn(0,"div",72),2&i&&de("innerHTML",Ce(2).captureData.selectElementCdata,Aa)}function ame(i,t){1&i&&(Qe(0,"p-splitter"),Xe(1,ome,1,1,"ng-template",70),nt()),2&i&&no(uo(2,t5))}function lme(i,t){if(1&i){const e=yi();Qe(0,"p-toggleButton",75),mn("ngModelChange",function(r){return Ot(e),Nt(Ce(2).captureData.editable=r)}),nt()}if(2&i){const e=Ce(2);l0("onIcon",e.onIcon),de("ngModel",e.captureData.editable)}}function cme(i,t){if(1&i){const e=yi();Qe(0,"p-button",76),mn("click",function(){Ot(e);const r=Ce(2);return Nt(r.applyNewCData(r.captureData))}),nt()}}function ume(i,t){if(1&i&&(Xe(0,lme,1,2,"p-toggleButton",73),Xe(1,cme,1,0,"p-button",74)),2&i){const e=Ce();de("ngIf",!e.captureData.isAlias),Se(1),de("ngIf",!e.captureData.isAlias)}}function hme(i,t){1&i&&(Qe(0,"tr")(1,"th",77),ci(2,"#Id"),nt(),Qe(3,"th",78),ci(4,"Label"),nt(),Qe(5,"th",79),ci(6,"Ok"),nt(),Qe(7,"th",79),ci(8,"Ko"),nt(),Qe(9,"th",79),ci(10,"Sel."),nt()())}function dme(i,t){1&i&&(Qe(0,"td"),Vn(1,"i",83),nt())}function fme(i,t){1&i&&Vn(0,"td")}function pme(i,t){1&i&&Vn(0,"td")}function gme(i,t){1&i&&(Qe(0,"td"),Vn(1,"i",84),nt())}function mme(i,t){if(1&i&&(Qe(0,"td"),ci(1),nt()),2&i){const e=Ce().rowData;Se(1),_c(" ",e.success.length," ")}}function vme(i,t){if(1&i&&(Qe(0,"td"),ci(1),nt()),2&i){const e=Ce().rowData;Se(1),_c(" ",e.fail.length," ")}}function yme(i,t){1&i&&Vn(0,"td")}function _me(i,t){if(1&i){const e=yi();Qe(0,"td",85),mn("click",function(){Ot(e);const r=Ce().$implicit;return Nt(Ce().onSelectItem(r))}),Vn(1,"i",86),nt()}}function bme(i,t){if(1&i&&(Qe(0,"tr")(1,"td"),Vn(2,"p-treeTableToggler",80),ci(3),nt(),Qe(4,"td"),ci(5),nt(),Xe(6,dme,2,0,"td",81),Xe(7,fme,1,0,"td",81),Xe(8,pme,1,0,"td",81),Xe(9,gme,2,0,"td",81),Xe(10,mme,2,1,"td",81),Xe(11,vme,2,1,"td",81),Xe(12,yme,1,0,"td",81),Xe(13,_me,2,0,"td",82),nt()),2&i){const e=t.$implicit,n=t.rowData;Se(2),de("rowNode",e),Se(1),_c(" ",n.id," "),Se(2),is(n.label),Se(1),de("ngIf",!n.fail&&n.valid),Se(1),de("ngIf",!n.fail&&n.valid),Se(1),de("ngIf",!n.fail&&!n.valid),Se(1),de("ngIf",!n.fail&&!n.valid),Se(1),de("ngIf",n.success),Se(1),de("ngIf",n.fail),Se(1),de("ngIf",n.fail),Se(1),de("ngIf",!n.fail)}}const Cme=function(){return{height:"89vh"}},wme=function(){return{width:"100vw",height:"42vw"}},Ame=function(){return{width:"100vw",height:"32vw"}},xme=function(){return{width:"45vw",height:"45vw"}},n5=function(){return{width:"60vw",height:"50vw"}},r5=function(){return{width:"40vw",height:"45vw"}},s5=function(){return{width:"40%"}},Ime=function(){return{width:"55vw",height:"55vw"}},Sme=function(){return{width:"65vw",height:"55vw"}};var zL=z(4826)(),Eme=z(2960);J1.use(Eme);var Tme=z(4147);J1.use(Tme),z(9050)(J1);let Dme=(()=>{class i{constructor(e,n,r,s,o,l,u,p,v,w){this.graphsService=e,this.styleService=n,this.rulesService=r,this.preferenceService=s,this.clipboardService=o,this.logger=l,this.messageService=u,this.base16=p,this.store=v,this.route=w,this.displaySelectionNode=!1,this.displaySelectionEdge=!1,this.displayChangeProperties=!1,this.onIcon="pi pi-check",this.displayFinder=!1,this.displayMarkdown=!1,this.displaySidebar=!1,this.subscriptions=[],this.displayExportPng=!1,this.displayTool=!0,this.searchNode="",this.graphs=[],this.jsonRules=[],this.alias=[],this.allNodes=[],this.cols=[{field:"label",header:"Label"}],this.breadFirstLayoutOptions=new Yoe,this.concentricLayoutOptions=new Xoe,this.circleLayoutOptions=new qoe,this.gridLayoutOptions={name:"grid",avoidOverlapPadding:50,condense:!0,rows:20,cols:5},this.coseLayoutOptions=new Koe,this.currentStyleCounter=0,this.items=[],this.currentRulesCounter=0,this.currentRulesFail=0,this.currentRulesSuccess=0,this.groupEnabled=!0,this.selectorDisplay="",this.drawModeEnabled=!1,this.rules=[],this.graph$=this.store.select(p2),this.graphs$=this.store.select(f2),this._lockedElement=!1,this.dockRightItems=[{label:"Export GEXF to clipboard",tooltipOptions:{tooltipLabel:"Export GEXF to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-gexf.png",command:()=>{this.id&&(this.gexf(this.id,this.id,this.currentStyle,this.currentRules),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GEXF in clipboard"}))}},{label:"Export GRAPHML to clipboard",tooltipOptions:{tooltipLabel:"Export GRAPHML to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-graphml.png",command:()=>{this.id&&(this.graphml(this.id,this.id,this.currentStyle,this.currentRules),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:"Store GRAPHML in clipboard"}))}},{label:"Export PNG",tooltipOptions:{tooltipLabel:"Export PNG",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-png.png",command:()=>{if(document){let T=this.cy?.png({bg:"white",full:this.preferences.full,maxWidth:this.preferences.maxWidth?Number(this.preferences.maxWidth):1024,maxHeight:this.preferences.maxHeight?Number(this.preferences.maxHeight):768})||"";this.logger.info(`PNG ${this.preferences.full} ${this.preferences.maxWidth} ${this.preferences.maxHeight}`),this.myPng?.nativeElement.setAttribute("src",T)}this.displayExportPng=!0}},{label:"Save",tooltipOptions:{tooltipLabel:"Save current diagram in local storage",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/save.png",command:()=>{if(this.id){this.logger.info("SAVE/META",this.currentStyle,this.currentRules);let T=this.toSysGraph(this.id,this.id,this.currentStyle,this.currentRules);this.logger.info("SAVE",T),this.graphsService.store(T,k=>{k.label=T.label,k.style=T.style,k.rules=T.rules,k.nodes=T.nodes,k.edges=T.edges}),this.messageService.add({key:"bc",severity:"info",summary:"Info",detail:`Save graph ${this.id}`})}}}],this.dockLeftItems=[{label:"Finder",tooltipOptions:{tooltipLabel:"Find node(s) or edges(s) and center on it",tooltipPosition:"right",positionTop:-15,positionLeft:15},icon:"assets/dock/find-element.png",command:()=>{let T=Ki.filter(Ki.map(this.cy?.elements("node"),W=>({alias:W.data().alias,label:W.data().label,id:this.base16.decode(W.data().id)})),W=>W.alias),k={};Ki.each(T,W=>{let K=this.base16.encode(W.alias),he=this.cy?.$(`#${K}`);he&&he.length>0?(W.target={id:W.alias,label:he[0].data().label},k[K]?k[K].aliases.push(W):k[K]={label:he[0].data().label,aliases:[W]}):this.raiseError("Unknown target",W.alias)}),this.alias=[],Ki.each(k,(W,K)=>{let he={key:K,label:`${W.label} #${this.base16.decode(K)}`,data:{id:this.base16.decode(K),label:W.label},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:[]};Ki.each(W.aliases,Te=>{he.children?.push({key:this.base16.encode(Te.id),label:`${Te.label} #${Te.id}`,leaf:!0,icon:"pi pi-fw pi-clone",data:{id:Te.id,label:Te.label}})}),this.alias.push(he)}),this.displayFinder=!0}}],this.dockBottomItems=[],this.responsiveOptions=[{breakpoint:"1024px",numVisible:3},{breakpoint:"768px",numVisible:2},{breakpoint:"560px",numVisible:1}],this.nodeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedNode||this.cy?.$(`#${this.currentSelectedNode.data().id}`).remove()}},{label:"Clone",icon:"pi pi-clone",command:()=>{this.onCloneNode(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedNode||!this.currentStyle)return;let T=Ki.uniq(Ki.map(Ki.filter(this.styleService.findOne(this.currentStyle)?.tags,W=>W.label&&"node"==W.selector),W=>({label:W.label,value:W.label})));T.unshift({label:"",value:""});let k=this.currentSelectedNode.data().clone?this.currentSelectedNode.data().clone:this.currentSelectedNode.data().id;this.captureData={id:this.currentSelectedNode.data().id,clone:this.base16.decode(k),label:this.currentSelectedNode.data().label,alias:this.currentSelectedNode.data().alias,tag:this.currentSelectedNode.data().tag,group:this.currentSelectedNode.data().group,tags:T},setTimeout(()=>{this.captureData.tag=this.currentSelectedNode.data().tag},100),this.displaySelectionNode=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}},{label:"Link to node",icon:"pi pi-upload",command:()=>{this.edgehandles=this.cy.edgehandles(),this.edgehandles.start(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Goto to alias",icon:"pi pi-arrow-right",command:()=>{this.onSelectAlias(this.currentSelectedNode)}}],this.edgeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedEdge||this.cy?.$(`#${this.currentSelectedEdge.data().id}`).remove()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedEdge||!this.currentStyle)return;let T=Ki.uniq(Ki.map(Ki.filter(this.styleService.findOne(this.currentStyle)?.tags,k=>k.label&&"edge"==k.selector),k=>({label:k.label,value:k.label})));T.unshift({label:"",value:""}),this.captureData={id:this.currentSelectedEdge.data().id,label:this.currentSelectedEdge.data().label,tag:this.currentSelectedEdge.data().tag,tags:T},setTimeout(()=>{this.captureData.tag=this.currentSelectedEdge.data().tag},100),this.displaySelectionEdge=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}}],this.coreItem=[{label:"Graph",icon:"pi pi-share-alt",items:[{label:"Apply rules",icon:"pi pi-wallet",command:()=>{this.applyRuleset(!0,!1)}},{label:"Change properties",icon:"pi pi-wallet",command:()=>{this.changeProperties()}},{label:"Add new node",icon:"pi pi-plus",command:()=>{this.createNewNode()}}]},{label:"Group",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleGroupEnabled()}},{label:"Group Statistics",icon:"pi pi-chart-pie",command:()=>{let T=Ki.sortBy(Ki.filter(Ki.map(this.cy?.nodes(),W=>W.data().group),W=>W&&""!==W)),k={};Ki.each(T,W=>{k[W]?k[W]+=1:k[W]=1}),this.dataGroupStatistics={datasets:[{data:Ki.map(k,(W,K)=>W),backgroundColor:Ki.map(k,(W,K)=>{switch(W){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:Ki.map(k,(W,K)=>K)},this.displayGroupStatistic=!0}},{label:"Tag Statistics",icon:"pi pi-chart-pie",command:()=>{let T=Ki.sortBy(Ki.filter(Ki.map(this.cy?.nodes(),W=>W.data().tag),W=>W&&""!==W&&void 0===W.alias)),k={};Ki.each(T,W=>{k[W]?k[W]+=1:k[W]=1}),this.dataTagStatistics={datasets:[{data:Ki.map(k,(W,K)=>W),backgroundColor:Ki.map(k,(W,K)=>{switch(W){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:Ki.map(k,(W,K)=>K)},this.displayTagStatistic=!0}}]},{label:"Layout",icon:"pi pi-sitemap",items:[{label:"Bread First Layout",icon:"pi pi-ellipsis-h",command:()=>{this.breadFirstLayoutOptions&&this.cy?.layout(this.breadFirstLayoutOptions).run(),this.onClearAnySelection()}},{label:"Concentric Layout",icon:"pi pi-ellipsis-h",command:()=>{this.concentricLayoutOptions&&this.cy?.layout(this.concentricLayoutOptions).run(),this.onClearAnySelection()}},{label:"Circle Layout",icon:"pi pi-ellipsis-h",command:()=>{this.circleLayoutOptions&&this.cy?.layout(this.circleLayoutOptions).run(),this.onClearAnySelection()}},{label:"Grid Layout",icon:"pi pi-ellipsis-h",command:()=>{this.gridLayoutOptions&&this.cy?.layout(this.gridLayoutOptions).run(),this.onClearAnySelection()}},{label:"Cose Layout",icon:"pi pi-ellipsis-h",command:()=>{this.coseLayoutOptions&&this.cy?.layout(this.coseLayoutOptions).run(),this.onClearAnySelection()}}]},{label:"Zoom",icon:"pi pi-circle",items:[{label:"0.1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.1)}},{label:"0.2",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.2)}},{label:"0.3",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.3)}},{label:"0.5",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.5)}},{label:"0.6",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.6)}},{label:"0.75",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.75)}},{label:"1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(1)}},{label:"fit",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.fit()}}]},{label:"Draw mode",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleDrawModeEnabled()}}]}],this.captureData={},this.currentSelectedNode=void 0,this.currentSelectedEdge=void 0,this.dataGroupStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayGroupStatistic=!1,this.dataTagStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayTagStatistic=!1,this.config={dark:!1};let I=this.preferenceService.findOne("default");I&&(this.preferences=I),this.subscriptions.push(this.graph$.subscribe(T=>{if(T){if(this.cy?.startBatch(),this.cy?.boxSelectionEnabled(this.boxSelectionEnabled),this.cy?.nodes().remove(),this.cy?.edges().remove(),l.info("graph",T),this.applyChangeProperties({style:T.style,rule:T.rules}),this.graphs=[],T.nodes&&(this.graphs.push(this.buildChildNodes(T)),this.allNodes=Ki.map(T.nodes,k=>({label:this.base16.decode(k.id),value:this.base16.decode(k.id)})),this.allNodes.unshift({label:"",value:""}),this.cy?.add(Ki.map(T.nodes,k=>{let W={data:{id:k.id,label:k.label,cdata:k.cdata,alias:k.alias,group:k.group,tag:k.tag},position:{x:k.x,y:k.y}};return k.parent&&(W.data.parent=k.parent),W}))),T.edges&&(this.graphs.push(this.buildChildEdges(T)),this.cy?.add(Ki.map(T.edges,k=>({data:{id:k.id,label:k.label,cdata:k.cdata,source:k.source||"",target:k.target||"",_source:p.decode(k.source||""),_target:p.decode(k.target||""),tag:k.tag}})))),this.cy){this.edgehandles&&this.edgehandles.destroy(),Ki.each(this.rules,K=>{K.destroy()}),this.rules=[];let k=Ki.uniq(Ki.map(Ki.filter(T.nodes,K=>""!==K.group),K=>K.group)),W=this.cy;this.edgehandles=W.edgehandles(),Ki.each(k,K=>{let he=this.cy?.$(`[group = "${K}"]`);this.rules.push(W.automove({nodesMatching:he,reposition:"drag",dragWith:he}))})}this.cy?.endBatch(),this.cy?.fit()}}))}ngOnInit(){this.route.queryParams.subscribe(e=>{this.id=e.id}),this.items=this.coreItem}onSelectAlias(e){if(e.data()&&e.data().alias){let n=this.cy?.$(`#${this.base16.encode(e.data().alias)}`);this.logger.info("Alias",e.data().alias,n),this.cy?.center(n)}}findNode(e){if(void 0!==e.clone&&""!=e.clone){let n=this.cy?.$(`#${this.base16.encode(e.clone)}`);if(e.id!==this.base16.encode(e.clone)&&n&&n.length>0)return void this.raiseError("While checking unicity of",e.clone)}return this.cy?.$(`#${e.id}`)}applyNodeUpdate(e){this.findNode(e)?.data("clone",this.base16.encode(e.clone)).data("alias",e.alias).data("group",e.group?e.group:"").data("label",e.label).data("tag",e.tag),this.displaySelectionNode=!1,this.preferences.applyRules&&this.applyRuleset(!1,!1)}applyLabelize(e){e.clone=`${e.tag}/${e.label.toLowerCase().replace(" ","-")}`}applyEdgeUpdate(e){this.cy?.$(`#${e.id}`).data("label",e.label).data("tag",e.tag),this.displaySelectionEdge=!1,this.preferences.applyRules&&this.applyRuleset(!1,!1)}applyChangeProperties(e){this.cy?.style(this.retrieveStyle(e.style)),setTimeout(()=>{this.logger.info(`Apply style ${e.style}`),this.currentStyle=e.style;let n=this.styleService.findOne(this.currentStyle)?.tags.length;n&&(this.currentStyleCounter=n),this.logger.info("Apply ruleset",e.rule),this.currentRules=e.rule;let r=this.rulesService.findOne(this.currentRules)?.rules.length;r?this.currentRulesCounter=r:this.logger.warn(`Ruleset ${e.rules} empty`),this.displayChangeProperties=!1},1)}applyRuleset(e,n){let r=Ki.map(this.cy?.nodes(),l=>({element:{id:l.data().id,type:"node",data:{id:this.base16.decode(l.data().id),label:l.data().label,tag:l.data().tag}}})),s=Ki.map(this.cy?.edges(),l=>({element:{id:l.data().id,type:"edges",data:{id:this.base16.decode(l.data().id),label:l.data().label,tag:l.data().tag,source:{id:this.base16.decode(l.source().id()),tag:l.source().data().tag},target:{id:this.base16.decode(l.target().id()),tag:l.target().data().tag}}}})),o=[];Ki.each(r,l=>{o.push(l)}),Ki.each(s,l=>{o.push(l)}),this.logger.debug("Execute",this.currentRules,o),n?this.rulesService.execute(this.currentRules,o,!1,!1).then(l=>{this.logger.debug(l),this.jsonRules=l.treenodes,this.currentRulesFail=l.failure.length,this.currentRulesSuccess=l.success.length,this.displaySidebar=e}):this.rulesService.execute(this.currentRules,o,!1,!0).then(l=>{this.logger.debug(l),this.jsonRules=l.treenodes,this.currentRulesFail=l.failure.length,this.currentRulesSuccess=l.success.length,this.displaySidebar=e})}onSelectCurrentAlias(e){let n=this.cy?.$(`#${this.selectedAlias.key}`);this.cy?.center(n),this.displayFinder=!1}onSelectItem(e){this.logger.info("SELECT/ITEM",e);let n=this.cy?.$(`#${e.node.data.uid}`);this.cy?.center(n),this.displaySidebar=!1}ngOnDestroy(){this.subscriptions&&Ki.each(this.subscriptions,e=>{e.unsubscribe()})}onHide(){this.onClearAnySelection()}createNewNode(){let e=this.base16.encode(`default@${b4()}`);this.cy?.add([{data:{id:e,label:"default",cdata:"TODO ...",tag:""},position:{x:0,y:0}}]);let n=this.cy?.$(`#${e}`);this.cy?.center(n)}changeProperties(){this.captureData={styles:Ki.map(this.styleService.findAll(),e=>e.id),style:"default",rules:Ki.map(this.rulesService.findAll(),e=>e.id),rule:"default"},this.displayChangeProperties=!0}nodeSelect(e){let r=this.cy?.$(`#${this.selectedNode.key}`);this.cy?.center(r),this.displayFinder=!1}onToggleGroupEnabled(){this.groupEnabled?(this.groupEnabled=!1,Ki.each(this.rules,e=>{e.disable()})):(this.groupEnabled=!0,Ki.each(this.rules,e=>{e.enable()})),this.onClearAnySelection()}onToggleDrawModeEnabled(){this.drawModeEnabled?(this.edgehandles.disableDrawMode(),this.drawModeEnabled=!1):(this.edgehandles.enableDrawMode(),this.drawModeEnabled=!0),this.onClearAnySelection()}buildChildNodes(e){return{key:"1",label:"Nodes",data:{uid:1,label:"Nodes"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:Ki.map(e.nodes,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,label:n.label},icon:"pi pi-fw pi-clone",children:[]}))}}buildChildEdges(e){return{key:"1",label:"Edges",data:{uid:2,label:"Edges"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:Ki.map(e.edges,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,_source:n.source,_target:n.target,label:n.label},icon:"pi pi-fw pi-share-alt",children:[]}))}}onFileDropped(e){let n=e[0].name;this.id&&n.startsWith("style")&&n.endsWith(".json")?this.onFileStyleDropped(e):this.id&&n.startsWith("rule")&&n.endsWith(".json")?this.onFileRuleDropped(e):this.id&&n.endsWith(".gexf")&&this.onFileGexfDropped(e)}onFileGexfDropped(e){this.messageService.add({key:"bc",severity:"info",summary:"Upload/GEXF",detail:`Filename ${e[0].name}`}),this.id&&this.graphsService.uploadHandler(e[0],this.id,this.id).then(n=>{this.graphsService.store(n,r=>{r.label=n.label,r.style=n.style,r.rules=n.rules,r.nodes=n.nodes,r.edges=n.edges}),this.store.dispatch(E1({graph:n}))})}onFileStyleDropped(e){var n=this;let r=e[0].name;this.currentStyle=r,this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${e[0].name}`});let s=new FileReader;s.addEventListener("loadend",tv(function*(){let o={id:r,tags:JSON.parse(s.result+"")};n.styleService.store(o,l=>{l.tags=o.tags}),n.applyChangeProperties({style:n.currentStyle,rule:n.currentRules}),n.store.dispatch(C4({style:o}))})),s.readAsText(e[0])}onFileRuleDropped(e){var n=this;let r=e[0].name;this.currentRules=r,this.messageService.add({key:"bc",severity:"info",summary:"Upload/Rule",detail:`Filename ${r}`});let s=new FileReader;s.addEventListener("loadend",tv(function*(){n.rulesService.load(r,JSON.parse(s.result+"")),n.applyChangeProperties({style:n.currentStyle,rule:n.currentRules})})),s.readAsText(e[0])}ngAfterViewInit(){this.cy=J1({container:this.myGraph?.nativeElement,layout:{name:"preset"},motionBlur:!0,selectionType:"single",boxSelectionEnabled:!1}),this.preferences.grid&&this.cy?.snapToGrid(),this.cy.on("mouseover",e=>{this.logger.debug(e)}),this.cy.on("mouseout",e=>{this.logger.debug(e)}),this.cy.on("dblclick","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickNode(e)}),this.cy.on("dblclick","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickEdge(e)}),this.cy.on("cxttap","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickNode(e)}),this.cy.on("cxttap","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickEdge(e)}),this.cy.on("click",e=>{this.onClearAnySelection()}),this.cy.on("click","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickNode(e)}),this.cy.on("click","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickEdge(e)}),this.cy.on("mouseover",e=>{}),this.route.params.subscribe(e=>{this.id=e.label;let n=this.graphsService.findOne(this.id+"");n&&this.store.dispatch(E1({graph:n}))})}onRightClickNode(e){this.logger.info("[NODE] rclick",e)}onRightClickEdge(e){this.logger.info("[EDGE] rclick",e)}onDblClickNode(e){this.logger.info("[NODE] dblclick",e)}onDblClickEdge(e){this.logger.info("[EDGE] dblclick",e)}onLeftClickNode(e){this.logger.info("[NODE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.currentSelectedEdge=void 0,this.currentSelectedNode=e.target[0];let n="";if(this.currentSelectedNode.data().cdata&&(n=this.currentSelectedNode.data().cdata,this.currentSelectedNode.data().alias)){let r=this.base16.encode(this.currentSelectedNode.data().alias),s=this.cy?.$(`#${r}`);s&&(n=s[0].data().cdata)}this.captureData=this.currentSelectedNode.data().cdata?{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:zL.render(n),selectElementRawCdata:n}:{editable:!1,isAlias:!!this.currentSelectedNode.data().alias,selectElementId:this.currentSelectedNode.data().id,selectElementCdata:"",selectElementRawCdata:n},this._lockedElement=this.currentSelectedNode.locked()}onLeftClickEdge(e){this.logger.info("[EDGE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.currentSelectedNode=void 0,this.currentSelectedEdge=e.target[0],this.captureData=this.currentSelectedEdge.data().cdata?{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:zL.render(this.currentSelectedEdge.data().cdata),selectElementRawCdata:this.currentSelectedEdge.data().cdata}:{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:"",selectElementRawCdata:this.currentSelectedEdge.data().cdata}}previewNewCData(e){e.selectElementCdata=zL.render(e.selectElementRawCdata)}applyNewCData(e){this.logger.info("Apply new data on id",this.base16.decode(e.selectElementId)),this.cy?.$(`#${e.selectElementId}`).data("cdata",e.selectElementRawCdata),this.displayMarkdown=!1}onCloneNode(e){1===e.length&&e[0].isNode()&&this.cy?.add(Ki.map(e,n=>{let s=`${this.base16.decode(n.data()?.id).split("@")[0]}@${b4()}`,o={data:{id:this.base16.encode(s),label:n.data()?.label,cdata:"TODO ...",group:"",tag:n.data()?.tag},position:{x:n.position().x+50,y:n.position().y+50}};return n.data()?.parent&&(o.data.parent=n.data()?.parent),this.logger.info("Clone node",o),o}))}onCloneEdge(e){}onClearAnySelection(){this.logger.info("Clear selection"),this.selectorDisplay="",this.currentSelectedEdge=void 0,this.currentSelectedNode=void 0,this.items=this.coreItem}retrieveStyle(e){let n=this.styleService.findOne(e)?.tags,r=[];Ki.each(n,o=>{if(o.label)r.push({selector:`${o.selector}[tag = '${o.label}']`,css:o.style?.css?o.style?.css:{}});else{let l={selector:`${o.selector}`,css:o.style?.css?o.style?.css:{}};void 0===l.css.content&&(l.css.content=u=>{let p=u.data().cdata?"*":"",v=u.data().alias?"@":"";return u.data().label&&u.data().group?`${u.data().label} (${u.data().group}) ${p} ${v}`:u.data().label?`${u.data().label} ${p} ${v}`:""}),r.push(l)}});let s=[];return Ki.each(r,o=>{s.push(o)}),s}handleChangeLock(e){if(!this.currentSelectedNode)return;this.logger.info("lock",this.currentSelectedNode.data().id);let n=this.cy?.$(`#${this.currentSelectedNode.data().id}`);this.logger.info("lock",n),e.checked?(n?.lock(),n?.animate({style:{opacity:.2}},{duration:1e3})):(n?.animate({style:{opacity:1}},{duration:1e3}),n?.unlock())}resolveClonedId(e){let n=this.cy?.$(`#${e}`)[0];return n?.data().clone||n?.data().id||void 0}toSysGraph(e,n,r,s){let o={};return this.logger.info(`toSysGraph style: ${r}`),{id:e,style:r||"default",rules:s||"default",label:n,nodes:Ki.map(this.cy?.nodes(),l=>{let u={id:l.data().clone||l.data().id||"",label:l.data().label||"",x:l.position().x||0,y:l.position().y||0,size:10,color:"0",group:l.data().group,tag:l.data().tag};return o[l.data().id||""]=u,l.data().alias&&(u.alias=l.data().alias),l.data().cdata&&(u.cdata=l.data().cdata),l.data().parent&&(u.parent=l.data().parent),u}),edges:Ki.map(this.cy?.edges(),l=>{let u=this.resolveClonedId(l.data().source),p=this.resolveClonedId(l.data().target);if(void 0===u||void 0===p)throw this.logger.error("Internal error while resolving source and target"),new String("Internal error while resolving source and target");let v={id:l.data().id||"",label:l.data().label||"",source:u,target:p,cdata:l.data().cdata,tag:l.data().tag};return l.data().cdata&&(v.cdata=l.data().cdata),v})}}gexf(e,n,r,s){let o=this.toSysGraph(e,n,r,s);this.clipboardService.copyTextToClipboard(this.graphsService.toGexf(o).join("\n"))}graphml(e,n,r,s){let o=this.toSysGraph(e,n,r,s);this.clipboardService.copyTextToClipboard(this.graphsService.toGraphml(o).join("\n"))}raiseError(e,n){this.messageService.add({key:"lc",severity:"error",summary:e,detail:n})}updateChartOptions(){this.chartOptions=this.config&&this.config.dark?this.getDarkTheme():this.getLightTheme()}getLightTheme(){return{plugins:{legend:{labels:{color:"#495057"}}},scales:{r:{grid:{color:"#ebedef"}}}}}getDarkTheme(){return{plugins:{legend:{labels:{color:"#ebedef"}}},scales:{r:{grid:{color:"rgba(255,255,255,0.2)"}}}}}}return i.\u0275fac=function(e){return new(e||i)(Xt(P1),Xt(w4),Xt(A4),Xt(x4),Xt(k1),Xt(Jh),Xt(fm),Xt(v2),Xt(ny),Xt(i_))},i.\u0275cmp=_r({type:i,selectors:[["app-graph-cytoscape"]],viewQuery:function(e,n){if(1&e&&(Tr(jge,5),Tr($ge,5),Tr(qge,5)),2&e){let r;Wi(r=ji())&&(n.myGraph=r.first),Wi(r=ji())&&(n.myPng=r.first),Wi(r=ji())&&(n.myTreeTable=r.first)}},decls:98,vars:119,consts:[[3,"target","model"],["cm",""],["position","bottom-center","key","bc"],["position","left-center","key","lc"],[1,"dock-window"],["position","left",3,"model"],["pTemplate","item"],["position","right",3,"model"],["position","bottom",3,"model"],["area",""],[1,"flex"],["dropZoneDirective","",1,"w-12",3,"fileDropped"],["id","cytoscape",1,"cytoscape-container"],["myCytoscape",""],[1,"flex","flex-row-reverse","flex-wrap"],[1,"flex","align-items-center","justify-content-center",3,"click"],["pBadge","","pTooltip","Fail ruleset","severity","danger",1,"pi","pi-thumbs-down","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Successful ruleset","severity","success",1,"pi","pi-thumbs-up","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],[1,"flex","align-items-center","justify-content-center"],["pBadge","","pTooltip","Global ruleset counter","severity","success",1,"pi","pi-briefcase","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["pBadge","","pTooltip","Tags",1,"pi","pi-book","mr-4","p-text-secondary",2,"font-size","2rem",3,"value"],["inputId","binary",3,"ngModel","binary","readonly","ngModelChange"],["header","Current node",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["class","grid p-fluid",4,"ngIf"],["pTemplate","footer"],["header","Current edge",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["header","Change graph properties",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[1,"grid","p-fluid"],[1,"col-12"],["pTooltip","Styles","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a style","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Rules","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a ruleset","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["header","Documentation",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],[3,"style",4,"ngIf"],["header","Group statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["type","polarArea",3,"data","options"],["header","Tag statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["header","Png file to export","header","Png export",3,"modal","visible","visibleChange"],["src",""],["myPng",""],["header","Find element(s)",3,"modal","visible","visibleChange"],["header","Alias"],["selectionMode","single","filterMode","strict",3,"value","selection","filter","selectionChange","onNodeSelect"],["myTreeAlias",""],["header","Node(s) and edges(s)"],["myTree",""],["header","Ruleset report",3,"modal","visible","visibleChange"],["styleClass","p-treetable-sm",3,"value"],["pTemplate","header"],["pTemplate","body"],["width","100%",3,"src","alt"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["pTooltip","Internal ID to override current ID on next save or diagram export","tooltipPosition","top",1,"pi","pi-bookmark"],["type","text","pInputText","","placeholder","",3,"ngModel","ngModelChange"],["icon","pi pi-check","label","Labelize","styleClass","p-button-text","pTooltip","Rebuild id with tag and label","tooltipPosition","top",3,"click"],["pTooltip","Label","tooltipPosition","top",1,"pi","pi-hashtag"],["pTooltip","Alias","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select an alias","filterBy","label",1,"p-col",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Tags","tooltipPosition","top"],["scrollHeight","120px","defaultLabel","Select a tag","filterBy","label",3,"options","ngModel","filter","showClear","ngModelChange"],["pTooltip","Group","tooltipPosition","top",1,"pi","pi-clone"],["pTooltip","Locked item ?","tooltipPosition","top",1,"p-inputgroup-addon"],["inputId","binary",3,"ngModel","binary","ngModelChange","onChange"],["type","text","pInputText","","placeholder","Locked","readonly","true"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"],["pTooltip","Source","tooltipPosition","top",1,"pi","pi-cog"],["type","text","pInputText","","placeholder","","readonly","true",3,"ngModel","ngModelChange"],["pTooltip","Target","tooltipPosition","top",1,"pi","pi-cog"],["pTemplate",""],["pInputTextarea","",3,"ngModel","keyup","ngModelChange"],[3,"innerHTML"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","offIcon","pi pi-times",3,"ngModel","onIcon","ngModelChange",4,"ngIf"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click",4,"ngIf"],["styleClass","p-button-text","onLabel","Editable","offLabel","Readonly","offIcon","pi pi-times",3,"ngModel","onIcon","ngModelChange"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click"],[2,"width","65%"],[2,"width","20%"],[2,"width","5%"],[3,"rowNode"],[4,"ngIf"],[3,"click",4,"ngIf"],[1,"pi","pi-check"],[1,"pi","pi-times"],[3,"click"],[1,"pi","pi-search"]],template:function(e,n){1&e&&(Vn(0,"p-contextMenu",0,1)(2,"p-toast",2)(3,"p-toast",3),Qe(4,"div",4)(5,"p-dock",5),Xe(6,Xge,1,2,"ng-template",6),nt(),Qe(7,"p-dock",7),Xe(8,Yge,1,2,"ng-template",6),nt(),Qe(9,"p-dock",8),Xe(10,Kge,1,2,"ng-template",6),nt()(),Qe(11,"div",null,9)(13,"div",10)(14,"div",11),mn("fileDropped",function(s){return n.onFileDropped(s)}),Vn(15,"div",12,13),nt()(),Qe(17,"div")(18,"div",14)(19,"div",15),mn("click",function(){return n.applyRuleset(!0,!0)}),Vn(20,"i",16),nt(),Qe(21,"div",15),mn("click",function(){return n.applyRuleset(!0,!1)}),Vn(22,"i",17),nt(),Qe(23,"div"),ci(24,"\xa0\xa0\xa0"),nt(),Qe(25,"div"),ci(26,"\xa0\xa0\xa0"),nt(),Qe(27,"div",18),Vn(28,"i",19),nt(),Qe(29,"div"),ci(30,"\xa0\xa0\xa0"),nt(),Qe(31,"div",18),ci(32),nt(),Qe(33,"div"),ci(34,"\xa0\xa0\xa0"),nt(),Qe(35,"div",18),Vn(36,"i",20),nt(),Qe(37,"div"),ci(38,"\xa0\xa0\xa0"),nt(),Qe(39,"div",18),ci(40),nt(),Qe(41,"div"),ci(42,"\xa0\xa0\xa0"),nt(),Qe(43,"p-checkbox",21),mn("ngModelChange",function(s){return n.groupEnabled=s}),nt(),Qe(44,"div"),ci(45,"\xa0\xa0\xa0"),nt(),Qe(46,"div",18),ci(47,"Group enabled:"),nt(),Qe(48,"div"),ci(49,"\xa0\xa0\xa0"),nt(),Qe(50,"p-checkbox",21),mn("ngModelChange",function(s){return n.drawModeEnabled=s}),nt(),Qe(51,"div"),ci(52,"\xa0\xa0\xa0"),nt(),Qe(53,"div",18),ci(54,"Draw mode enabled:"),nt(),Qe(55,"div"),ci(56,"\xa0\xa0\xa0"),nt(),Qe(57,"div",18),ci(58),nt()()(),Qe(59,"p-dialog",22),mn("visibleChange",function(s){return n.displaySelectionNode=s})("onHide",function(){return n.onHide()}),Xe(60,Zge,28,19,"div",23),Xe(61,Qge,1,0,"ng-template",24),nt(),Qe(62,"p-dialog",25),mn("visibleChange",function(s){return n.displaySelectionEdge=s})("onHide",function(){return n.onHide()}),Xe(63,Jge,19,10,"div",23),Xe(64,eme,1,0,"ng-template",24),nt(),Qe(65,"p-dialog",26),mn("visibleChange",function(s){return n.displayChangeProperties=s})("onHide",function(){return n.onHide()}),Qe(66,"div",27)(67,"div",28)(68,"div",29)(69,"p-dropdown",30),mn("ngModelChange",function(s){return n.captureData.style=s}),nt()()(),Qe(70,"div",28)(71,"div",31)(72,"p-dropdown",32),mn("ngModelChange",function(s){return n.captureData.rule=s}),nt()()()(),Xe(73,tme,1,0,"ng-template",24),nt(),Qe(74,"p-dialog",33),mn("visibleChange",function(s){return n.displayMarkdown=s})("onHide",function(){return n.onHide()}),Xe(75,sme,3,3,"p-splitter",34),Xe(76,ame,2,3,"p-splitter",34),Xe(77,ume,2,2,"ng-template",24),nt(),Qe(78,"p-dialog",35),mn("visibleChange",function(s){return n.displayGroupStatistic=s}),Vn(79,"p-chart",36),nt(),Qe(80,"p-dialog",37),mn("visibleChange",function(s){return n.displayTagStatistic=s}),Vn(81,"p-chart",36),nt(),Qe(82,"p-dialog",38),mn("visibleChange",function(s){return n.displayExportPng=s}),Vn(83,"img",39,40)(85,"img"),nt(),Qe(86,"p-dialog",41),mn("visibleChange",function(s){return n.displayFinder=s}),Qe(87,"p-tabView")(88,"p-tabPanel",42)(89,"p-tree",43,44),mn("selectionChange",function(s){return n.selectedAlias=s})("onNodeSelect",function(s){return n.onSelectCurrentAlias(s)}),nt()(),Qe(91,"p-tabPanel",45)(92,"p-tree",43,46),mn("selectionChange",function(s){return n.selectedNode=s})("onNodeSelect",function(s){return n.nodeSelect(s)}),nt()()()(),Qe(94,"p-dialog",47),mn("visibleChange",function(s){return n.displaySidebar=s}),Qe(95,"p-treeTable",48),Xe(96,hme,11,0,"ng-template",49),Xe(97,bme,14,11,"ng-template",50),nt()()()),2&e&&(de("target",ao(12))("model",n.items),Se(5),de("model",n.dockLeftItems),Se(2),de("model",n.dockRightItems),Se(2),de("model",n.dockBottomItems),Se(5),no(uo(105,Cme)),Se(6),l0("value",n.currentRulesFail),Se(2),l0("value",n.currentRulesSuccess),Se(6),l0("value",n.currentRulesCounter),Se(4),_c("Ruleset: ",n.currentRules,""),Se(4),l0("value",n.currentStyleCounter),Se(4),_c("Style: ",n.currentStyle,""),Se(3),de("ngModel",n.groupEnabled)("binary",!0)("readonly",!0),Se(7),de("ngModel",n.drawModeEnabled)("binary",!0)("readonly",!0),Se(8),_c("Current selection: ",n.selectorDisplay,""),Se(1),no(uo(106,wme)),de("visible",n.displaySelectionNode)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Se(1),de("ngIf",n.currentSelectedNode),Se(2),no(uo(107,Ame)),de("visible",n.displaySelectionEdge)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Se(1),de("ngIf",n.currentSelectedEdge),Se(2),no(uo(108,xme)),de("visible",n.displayChangeProperties)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Se(4),no(uo(109,nx)),de("options",n.captureData.styles)("ngModel",n.captureData.style)("filter",!0)("showClear",!0),Se(3),no(uo(110,nx)),de("options",n.captureData.rules)("ngModel",n.captureData.rule)("filter",!0)("showClear",!0),Se(2),no(uo(111,n5)),de("visible",n.displayMarkdown)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Se(1),de("ngIf",!n.captureData.isAlias&&n.captureData.editable),Se(1),de("ngIf",n.captureData.isAlias||!n.captureData.editable),Se(2),no(uo(112,r5)),de("visible",n.displayGroupStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Se(1),no(uo(113,s5)),de("data",n.dataGroupStatistics)("options",n.chartOptions),Se(1),no(uo(114,r5)),de("visible",n.displayTagStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),Se(1),no(uo(115,s5)),de("data",n.dataTagStatistics)("options",n.chartOptions),Se(1),no(uo(116,n5)),de("modal",!0)("visible",n.displayExportPng),Se(4),no(uo(117,Ime)),de("modal",!0)("visible",n.displayFinder),Se(3),de("value",n.alias)("selection",n.selectedAlias)("filter",!0),Se(3),de("value",n.graphs)("selection",n.selectedNode)("filter",!0),Se(2),no(uo(118,Sme)),de("modal",!0)("visible",n.displaySidebar),Se(1),de("value",n.jsonRules))},dependencies:[ho,za,$1,Z1,S4,rv,V2,LA,fC,Iae,E4,C0,uC,oy,D4,M4,O4,eS,Cue,Lue,V4,Fge,e5,Gge,PS],styles:[".cytoscape-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}"]}),i})(),Lme=(()=>{class i{constructor(e,n,r){this.messageService=e,this.databaseService=n,this.logger=r}uploadHandler(e){return new Promise(n=>{let r=new FileReader;r.addEventListener("loadend",tv(function*(){for(var s=new Uint8Array(r.result),o=s.length,l=[];o--;)l[o]=String.fromCharCode(s[o]);var u=window.btoa(l.join(""));n(u)})),r.readAsArrayBuffer(e)})}}return i.\u0275fac=function(e){return new(e||i)(Yn(fm),Yn(Fz),Yn(Jh))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Rme=["myImg"];function Pme(i,t){1&i&&(Qe(0,"pre"),ci(1,"Drop here"),nt())}function kme(i,t){1&i&&Vn(0,"img",2,3),2&i&&de("src",Ce().viewer,Xh)}const Ome=function(){return{height:"256px"}};let Fme=(()=>{class i{constructor(e,n,r,s){this.logger=e,this.messageService=n,this.clipboardService=r,this.converterService=s,this.viewer="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAgAElEQVR4nO3dT8hsW3rX8edUvfd27unb/iFR9NJpK90d2+hInAiJKHrVBjmke6Akk0hwboYOVFicQzqSIIZGBEVQcKLQoFwjIgYRB04jUTCgkmijgkZDHCR0MB73es9blV1v7T9rV63az289+7tgD5K367PqWWtX/Z573npX2ccf/5H3u+u97rJrRn7c0+Pf7114eHh4eHh4yl6oYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw5v2Hh4evrLb7f52/+p+9LeuvZ5bt3r5+SmvHx4eXoWhXgweXkRvv9+/efHixdvj1f3o6qvv1PLy81NePzw8vGHPdXI8PLx5r98AmFj4P2sAJNcPDw9v2HOdHA8Pb947NgAmGP69BkB2/fDw8IY918nx8PDmvd1u99pEwz9f+fkprx8eHt6w5zo5Hh7evNf9KJlo+D95qWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeLW8j7vri8LPb0teMt3wn20ABNZvK15+vX4s/Pzw1LxQxeDV8v5Ed/1qd33TnjUBIs9va14y3fCfbABE1m8L3qG7fr67vtVdrwSfH56iF6oYvBreMfyPb+6nJkDk+W3RS6Yb/qMNgND6RfcO9i78j/sx2AQEqhevlheqGLxbvefhf2oCuiD4osDz26qXTDf8BxsAsfWL7B3sPPwHm4BA9eLV9EIVg3eLNxb+x3D45suXH3xPoHpb8pLphv9FAyC4flG9gw2H/1kTEKhevNpeqGLw7hX+x+vYBLReb2teMt3wP2sARNcvonew6fA/NQEPDw9fCVAv3j28UMXg3TP8T01A/nXAis8Pr9cACIb/qQEQXr9o3sHKwv+4p9967733vtpwvXj38kIVg3fv8D/+7OKvA+70/PDejWS64f/YAIivXyTvYMvC/9QEPP1LwL2fH16DnuvkeE2F/+ImQKTeZr1uJOHwPzYAsusXyDvYdeF/3N/JPxEUrBdvBc91crwmw7+4CRCpt2lvt9u9Fg7/t/n5Ka9fEO9gt4X/8VrUBARaP7xbh3oxeKuG/2wTIFJv895+v3+jGv758fn5Ka9fAO9gdcJ/URMQaP3wRjzXyfGaD//RJkCk3hBevwEwsfB/1gBIrl/j3sHqhn9RExBo/fAmPNfJ8Vb17hX+F02ASL1hvGMDYILh32sAZNevYe9g9wn/ySYg0PrhzXiuk+Ot5t07/E9NwAtODKzu5d+xm2j45+vpMwDV6lXfj5W8g903/AebgEDrh1fguU6Ot4q3VvgfPU4MrOxZ4dcBD10r/fVAqlmv+n6s4B1snfA/awICrR9eoReqGLyLsXb4Hy9ODKzrJdMN/6sagMb3457ewdYN/1MTwImB2/NCFYN3NrzC/9QEvODEwFpeMt3wX9wABNiPe3kH8wn/o8GJgVv3QhWzXc87/I8/48TAOl4y3fBf1AAE2Y97eAfzDf9TE8CJgRv1QhWzXU8l/Bc3ASLrp+gl0w3/4gYg0H7U9g6mEf5HjxMDt+aFKma7nlr4FzcBIuun6iXTCYerGoBg+1HTO5hW+B8vTgzciheqmO16quE/2wSIrJ+yl0wrHBY1AALrp+odTDP8FzUBgfZje16oYrbrqYf/aBMgsn7qXjK9cChqAETWT9E7mHb4FzUBgfZjm16oYrbptRL+F02AyPq14CXT3t9Uud7BEcg7WBvhP9kEBNqP7Xqhitme11r4n5qAF5wYuMRLpr2/qXK9FyOQd7C2wn+wCQi0H9v2QhWzLa/V8D96nBhY7iXT3t9Uud6zEcg7WJvhf9YEBNoPvFDFbMdrPfyPFycGlo1k2vubKtd7GoG8g7Ud/qcmgBMDA3mhitmGFyX8T03AC04MnBvJtPc3Va7XgnkHixH+R4MTA6N4oYqJ70UL/+PPODFweiTT3t8kvn6Ef32PEwMDea6T4xV5X7KY4b+4CRDZj9W8biTx/U3K6+fo5fs539eKr7caXn4/+tId1w9vBc91crxF3huL8+YxdHFi4IC32+1eK+9vfn7K6+fkHSzmf/n3vZ+44/rhreC5To53lXfWBDT85rG4CRDdj7t7+/3+jfL+5uenvH6EP+GPN+y5To53tffYBDT85rG4CRDfj7t6/QbABPe31wBIrh/hT/jjDXuuk+Nd7+12ux9t9M1jcRPQwn7c0zs2ACa6v08NgOz6Ef6EP96w5zo53m1e98b7tcbePBY3AS84MfD9/Dt209iPQe/pMwDV6lXfD8L/LuuH5+C5To53u5f/JcDaePO41tv8iYFW+HXAQ9dK+5tq1qu+H4R/9fXDc/JCFbNhb/CvA+auht6Mtn5iYDKt/Xjupcr1Lh6EP+GPt9wLVczGvUVNQINvRls+MTCZ3n70f54q17toEP6EP14lL1Qx2/OKmoCG34y2emJgMs39WNwABNmPPA5G+N+yfnhqXqhitutNNgENvxktbgJE9qOGl0x3P4obgED7cTDC/5b1w1PzQhWDx4mBWvtxq5dMez9S5XpnB+FP+ONV8kIVg3ccnBiotR+3eMm09yNVrndyEP6EP14lL1QxeM8HJwZq7ce1XjLt/UiV6x0dhD/hj1fRC1UM3oXHiYFa+3Gll0x7P1LlegcH4U/441X2QhWDN+hxYuBt6yfgJdPej1S53otB+BP+eHfwQhWDN+pxYuBt6+fsJdPej1S53rNB+BP+eHfyQhWDN+dxYuBt6+flJdPej1S53tMg/Al/vDt6oYrBK/E4MfC29fPwkmnvR6pcrzl7ByP8b1k/vFa8UMXglXqcGHjb+q3tJdPejyS+foQ/4Y9Xa6gXg1fkcWLgbeu3mteNJL4fSXn9CH/CH6/SUC8Gb5HHiYFa+zHo7Xa718r7kZ+f8voR/oQ/XoWhXgzeVR4nBmrtx4W33+/fKO9Hfn7K60f4E/54w57r5HgyHicGau3HmddvAArrXXU/eg2A5PoR/oQ/3rDnOjmejseJgVr70feODcDCelfbj6cGQHb9CP+7rR9e457r5HhaHicG3rZ+9/Ly79ivrHeV/Xj6DEC1egl/wh9vHc91cjw9jxMDb1u/e3hW+HXAI/WusR+pZr2EP+GPt44Xqhi8ah4nBt62frW9dGO9996PVLnexYPwJ/zxlnuhisGr6nFi4G3rV9NLFeq9536kyvUuGoQ/4Y9XyQtVDN6tHicG3rZ+tbxUqd577UeqXG/xIPwJf7xKXqhi8Gp5nBh42/rV8FLFeu+xH6lyvUWD8Cf88Sp5oYrBq+1xYqDvfqTK9dZev1S53tlB+BP+eJW8UMXg3cvjxEC//Uji65cq1zs5CH/CH6+SF6oYvHt7nBjosx9JfP1S5XpHB+FP+ONV9EIVg3d3jxMDXfYjia9fqlzv4CD8CX+8yl6oYvBW8Tgx8Lb1u8JL4uuXKtd7MQh/wh/vDl6oYvBW8zgx8Lb1W+gl8fVLles9G4Q/4Y93Jy9UMXhre5wYeNv6lY60Ur3XeqlyvadB+BP+eHf0QhWD5+FxYuBt61cy0or1XuOkyvXaQu9ghP8t64e3VS9UMXheHicG3rZ+cyOJr18i/Al/vHY918nxQnicGHjb+k2NJL5+ifAn/PHa9FwnxwvlcWLgHfZjt9u9Vl6//PwIf8Ifrz3PdXK8kB4nBlbej/1+/0Z5/fLzI/wJf7z2PNfJ8cJ6nBhYcT/6DYDi+vUaAMKf8MdryHOdHC+ux4mB9fbj2ACort9TA0D4E/54jXmuk+PF9jgx8Lb1O175d+wi9Q56T58BqFYv4X+X9cPDu/BcJ8eL73Fi4G3r9/G7f6ZLQvUOealmvYR/9fXDwxv0QhWDJ+txYuBt65fE6n3upcr19sfBCP9b1g8Pb+o/LuIUgyftcWLg9euXBOvt/zxVrvc4Dkb437J+eHjLvFDF4Kl5nBh43fol0XoXNwCEP+GPJ+qFKgZP1ePEwOXrl4TrLW4ACH/CH0/UC1UMnrrHiYHL1i+J15umal1Y78EI/1vWDw+P8MeT9zgxsHz9kni9aeyJL6z3YIT/LeuHh0f44zXjcWJg2fol8XrT2BMn/Al/PGEvVDF4zXmcGFi0fkm83jS2v4Q/4Y8n7IUqBq9JjxMDZ0cSrzdN7S/hT/jjiXqhisFr1uPEwMmRxOtNc/tL+JePFl+/eI16oYrBa93jxMDhkcTrTYX72x8HI/wvRuOvX7zWvFDF4EXwODHwciTxevPzI/wJf7zWvFDF4EXxODHwfCTxehPhT/jjteu5To6HNzA4MfA3RhKvNxH+hD9em57r5Hh4E4MTAz9+/FPJ18r15udH+BP+eO15rpPj4RWMzZ8YuN/v3yjXm58f4U/447XnuU6Oh1c4Nn1iYL8BUKy31wAQ/oVD/PWGtxHPdXI8vFJvyycGHhsA1XqfGgDCv3C08HrD24bnOjke3hJvqycG5t+xizy/Qe/pMwDPt+5ghP/FaOn1hhffc50cD2+pt8UTA63w64Ad603Ptu5ghP/FaPH1hhfbC1UM3ma8rZ0YmMSe33Mv9bbuYIT/xWj89YYX1AtVDN6mvC2dGJgEn1//5+npeR6M8L8YQV5veFvwQhWDF93byomBSfT59RuAgxH+FyPY6w0vsheqGLyteFs4MfDrws8vXz9phP/FEHl94OER/nihvegnBv6y+PP7JfHnR/jj4RH+eIG96CcG4hH+eHh1vVDF4G3di35iIB7hj4dXzwtVDN7mvQ2cGIhH+OPh1fFCFYOH9/EmTgzEI/zx8G73QhWDh/d0beDEQDzCHw/vNi9UMXh45170EwPxCH88vOu9UMXg4V160U8MxCP88fCu80IVg4c37EU/MRCP8MfDu9pznRwPbwUv+omBeIQ/Ht59h3oxeHgTI/qJgXiEPx7efYZ6MXh4BYMTA/EIfzy8JY9roRg8vMLBiYHb9gh/PLzu8a6T4+F5eZwYuFmP8MfDe/JcJ8fD8/Q4MXBzHuGPh9fzXCfHw/P2ODFwMx7hj4f3zAtVDB7elR4nBsb2CH88vAEvVDF4eDd4nBgY0yP88fBKvVDF4OEt8zgxMJZH+OPhEf54eMXej5lGeOHd5v3Y1CYPDZH7Dw+P8MfDc/Q4MbBtj//yx8Mj/PHwrvY4MbBNj/DHwyP88fBu9jgxsC2P8MfDW+KFKgYPr7LHiYHNeIQ/Ht5SL1QxeHh38DgxUN4j/PHwrvFCFYOHdyePEwNlPcIfD+9aL1QxeHj39TgxUMsj/PHwbvFCFYOHd3+PEwM1PMIfD+9WL1QxeHjreJwYSPjj4YXxXCfHw2vQm2wCGg5XdY/wx8Mj/PHw3D1ODCT88fCa9Vwnx8ML4HFiIOGPh9ek5zo5Hl4QjxMDCX88vOY818nx8KJ4nBhI+OPhtea5To6HF8nb73c/3li4qnt8pS8e3h0918nx8KJ5nBjIf/nj4bXihSoGD0/E48RAwh8PT94LVQwenpDHiYGEPx5eW16oYvDwfD1ODCT88fDa8EIVg4en4XFiIOGPh6fthSoGD0/L48RAwh8PT9MLVQwenqbHiYGEPx6elidazEfd9aeP18PDww901w/2rh/o/3zpVcH73sr1ngZeaI8TAwl/vNu9/P675vv9Uu+jyvUWj8We6M3wyrTf3D6pXK/hbcPjxEDCH+9mL7//qt3P/etV5XqLxlWe6M3w2AAIv7l9IrF5eE16+/3+a2L3M+GP15JX1AA4vj5mGwCZ/VC8GbrxSvzN7ROJzcNr1tvwiYGEP96t3mwD4Pz6mGwABNbv7MFyN8PDw8NXlN/cujfvfyyxeXite1s7MZDwx6vhTTYAAq+P0QZAZP3OALmboRtfVX5ze9YAyK0fXlPeVk4MJPzxanmjDYDI62OwARBav3PEbfIRr98AmOCbW68BiPBiwvP38rfeKYV1bY9v9cOr6Q02AEKvj4sGQGz9bhv3LubYAJjom9tTAyCzeXghvKgnBvJf/ni1vYsGQOz1cdYACK7f9WONYvJnAEz4ze2pAahWr9LNgOfqRTsxkPDHu4d31gAIvj5ODYDo+l031irGeucALL1Wuhk+qVmvys2AJ+FFOTGQ8Me7l3dqAERfH68q12v38lwnn/CuagBWvBkWNwAt3Ax4Ml7rJwYS/nj39B4bAOHXxyvx9Tt5rpNPeIsbgJVvhkUNQCs3A56O1/CJgYQ/3l29bnwiHP7HBkB2/fqe6+QT3qIGwOFmKG4A1F9MeLpegycGEv54d/fyZ7CEw/9t/gyb8vr1PdfJJ7ziBsCpEyxqAFp4MeFpew2dGEj4463iPW8ATOz1kf+KTXn9+p7r5BNeUQPg+M9Asw1AKy8mvCY89RMDCX+81bx+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/vHie6omBhD/eqt6xATDB8O81ALLrN+mJ3AyTDYDAB0BGGwCR9cOL6RU1AYQ/XmQvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDieionBhL+eC6eFX4d8NC10utj9uuAl9S7yn6I3QyDDYBI+A82AGLrhxfb8z4xkPDH8/SuagBWfH0sbgBc90PwZrhoAITC/6IBEFw/vPie14mBhD+et7e4AVg5PxY1AK77IXoznDUAYuF/1ri61v4AABCHSURBVACIrh/eNry1Twwk/PEUvEUNgEN+FDcA7vshejOcGgDB8D81AO6bh7d5b8UTAwl/PBWvuAFwyo+iBkBiP0RvhscGQDT8HxsAic3Dw/t4lRMDCX88Ja+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4T9cdTwwk/PHUvNkGwDk/JhsAgfU7e7DczZD/jlI4/N/mv0OV2Dw8vHOv9omBhD+eojfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64W3aq3ViIOGPp+qNNgAC4T/aAAit3zniNvmI128ATCz8nzUAEV5MePG8W08MJPzxlL3BBkAk/AcbALH1u23cu5hjA2CC4d9rAGQ2Dw9vYFx7YiDhj6fuXTQAQuF/0QAIrt/1Y41i8mcATDT8ew1AtXqVbga8UN7SEwMJf7wWvLMGQCz8zxoA0fW7bqxVjBV+HfDQtdLNMPt1wEvqVbkZ8EJ6pScGEv54rXinBkAw/E8NgPD6nTzXySe8qxqAFW+GxQ1ACzcDXlhv7sRAwh+vJe+xARAN/8cGQHz9Tp7r5BPe4gZg5ZthUQPQys2AF9ebODGQ8MdryuvGJ8Lhf2wAZNev77lOPuEtagAcbobiBkD9xYS3HW/gxEDCH685L38GSzj83+bPsCmvX99znXzCK24AnDrBogaghRcT3ra83omBhD9ek97zBsCEwj8/Pv8Vm/L69T3XySe8ogbA8Z+BZhuAVl5MeJv0viz+/PDwRr1+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/PDw8vJDesQEwwfDvNQCy6zfpidwMkw2AwAdARhsAkfXDw8PDC+nlBsBEwz9fT58BqFbvavshdDOMNgAC4T/aAAitHx4eHl5Izwq/DnjoWik/Zr8OeEm9q+yH2M0w2ACIhP9gAyC2fnh4eHhRvasagBXzY3ED4LofgjfDRQMgFP4XDYDg+uHh4eFF9RY3ACvnx6IGwHU/RG+GswZALPzPGgDR9cPDw8OL6i1qABzyo7gBcN8P0Zvh1AAIhv+pAXDfPDw8PLztecUNgFN+FDUAEvshejM8NgCi4f/YAEhsHh4eHt72vKIGwDE/ZhsAmf1QvBm68Uo4/I8NgP/m4eHh4W3Pm20AnPNjsgEQWL+zB8vdDPnvKIXD/23+O1SJzcPDw8PbnjfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64eHh4QX2RhsAgfAfbQCE1u8ccZt8xOs3ACYW/s8agAgvJjw8PLyWvMEGQCT8BxsAsfW7bdy7mGMDYILh32sAZDYPDw8Pb0PeRQMgFP4XDYDg+l0/1igmfwbARMO/1wBUq1fpZsDDw8MT984aALHwP2sARNfvurFWMVb4dcBD10o3w+zXAS+pV+VmwMPDw2vAOzUAguF/agCE1+/kuU4+4V3VAKx4MyxuAFq4GfDw8PAa8B4bANHwf2wAxNfv5LlOPuEtbgBWvhkWNQCt3Ax4eHh46l43PhEO/2MDILt+fc918glvUQPgcDMUNwDqLyY8PDy8lrz8GSzh8H+bP8OmvH59z3XyCa+4AXDqBIsagBZeTHh4eHgtec8bABMK//z4/FdsyuvX91wnn/CKGgDHfwaabQBaeTHh4eHhteT1GwATC/9nDYDk+vU918knvNkGwPl3QJMNgMD64eHh4YX0jg2ACYZ/rwGQXb9JT+RmmGwABD4AMtoAiKwfHh4eXkgvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDw8PBCelb4dcBD10r5Mft1wEvqXWU/xG6GwQZAJPwHGwCx9cPDw8OL6l3VAKyYH4sbANf9ELwZLhoAofC/aAAE1w8PDw8vqre4AVg5PxY1AK77IXoznDUAYuF/1gCIrh8eHh5eVG9RA+CQH8UNgPt+iN4MpwZAMPxPDYD75uHh4eFtzytuAJzyo6gBkNgP0ZvhsQEQDf/HBkBi8/Dw8PC25xU1AI75MdsAyOyH4s3QjVfC4X9sAPw3Dw8PD2973mwD4Jwfkw2AwPqdPVjuZsh/Rykc/m/z36FKbB4eHh7e9rzJBkDgPx5HGwCR9TsD5G6GfJKSavjnxz9rAOTWDw8PDy+wN9oACIT/aAMgtH7niNvkI16/ATCx8H/WAER4MeHh4eG15A02ACLhP9gAiK3fbePexRwbABMM/14DILN5eHh4eBvyLhoAofC/aAAE1+/6sUYx+TMAJhr+vQagWr1KNwMeHh6euHfWAIiF/1kDILp+1421irHCrwMeula6GWa/DnhJvSo3Ax4eHl4D3qkBEAz/UwMgvH4nz3XyCe+qBmDFm2FxA9DCzYCHh4fXgPfYAIiG/2MDIL5+J8918glvcQOw8s2wqAFo5WbAw8PDU/e68Ylw+B8bANn163uuk094ixoAh5uhuAFQfzHh4eHhteTlz2AJh//b/Bk25fXre66TT3jFDYBTJ1jUALTwYsLDw8NryXveAJhQ+OfH579iU16/vuc6+YRX1AA4/jPQbAPQyosJDw8PryWv3wCYWPg/awAk16/vuU4+4c02AM6/A5psAATWDw8PDy+kd2wATDD8ew2A7PpNeiI3w2QDIPABkNEGQGT98PDw8EJ6uQEw0fDP19NnAKrVu9p+CN0Mow2AQPiPNgBC64eHh4cX0rPCrwMeulbKj9mvA15S7yr7IXYzDDYAIuE/2ACIrR8eHh5eVO+qBmDF/FjcALjuh+DNcNEACIX/RQMguH54eHh4Ub3FDcDK+bGoAXDdD9Gb4awBEAv/swZAdP3w8PDwonqLGgCH/ChuANz3Q/RmODUAguF/agDcNw8PDw9ve15xA+CUH0UNgMR+iN4Mjw2AaPg/NgASm4eHh4e3Pa+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4eHjb82YbAOf8mGwABNbv7MFyN0P+O0rh8H+b/w5VYvPw8PDwtudNNgAC//E42gCIrN8ZIHczdOP7VcM/P75rAP6JxObh4eHhbc/7KdMN/3z9qcr1Do4qnuLN0I0/phr+7xqAFz8jsXl4eHh42/P+jemGf77+cOV6L0Ztz3Xy596nPvWpP6ga/k/X//30p19+QWXz8PDw8DbiHbrr1003/PP1+yvWezFqe66TD3kffPBtv9d0w//o/b1a9SrdDHh4eHjC3t837fDP1xeF1+/6sVYxu93ud5p2+B+vv6S4fnh4eHjBvBfdlUw//PP12wXXb9BznXzCy1/48GumHf7H65921/d1115o/fDw8PAiePl99Q911z8zjff7uSvn1oPQ+k16rpPPeD9n+uHfv361u/5Ld/2noat7/MU19r8tufDw8PCCe/n9NL+vKr7fj13/vpXwz47r5DOe+nGPeHh4eHh4/esfthL+sw2AcyfzE9b+zYCHh4eHtxFvt9v9eCvhP9kACPwzxg9b4zcDHh4eHt52vIeHhz/XSviPfgZAIPzz+G5r/GbAw8PDw9uO9/Llyy+1Ev6Dnkj4H8cvWMM3Ax4eHh7eZrz/TPjX9f6utXsz4OHh4eFtxNvtdn+H8K/r/Vlr9GbAw8PDw9uO9/Cw/yHCv6737d31LWvwZsDDw8PD24z3rf1+l/Nq8SD8p8c/avBmwMPDw8PbjvcNu2K4569y+OfHPTw8/JkGbwY8PDw8vO14328Lh3v4Pz1INvzz47/whe/6sFvkX2zsZsDDw8PD24b3i901f6xub0iE/9MDZcP/aO33u7/W0M2Ah4eHh7cdL59aWzxkwv/pwdLhn6/PfObD7+x+9CvWxs2Ah4eHh7cNL39Z0UdWOKTC/wmQDv+e9zdM/2bAw8PDw9uO93UrHHLhf0TcJl/mfc6e/iSw9Apwc+Hh4eHhaXq/1l2/ywqGZPhfOxyL+eumezPg4eHh4W3H+0krGIR/Pe83ddd/M82bAQ8PDw9vG95/767fYjOD8K/v/ZDp3Qx4eHh4eNvxftBmhkheTnquk1/pveiuf2laNwMeHh4e3ja8n7aZIZSXk57r5Dd439Vdv2QaNwMeHh4e3ja8/91dB5sYgnk56rlOfqP3qrv+n8W6ufDw8PDwNL2cN1+1iSGcl4Oe6+S3et34eqCbCw8PDw9P1/urNjHU83LIa7qYz33uOz/c7Xb/OsjNhYeHh4en6f0rmzjvv4W8HPKaL+Y7vuPbf9tu9+JnG7+58PDw8PA0vX/XXb/VRkZLeTnrtVjMhx9++tD96BeszZsLDw8PD0/T+2Z35e+iGRwt5mWo8O9539Nd/8Paurnw8PDw8DS9nCe/x0ZG43kpNHk97/Pd9R+sjZsLDw8PD0/T+/nu+pKNjCB5KTB5fe93dNfPmPbNhYeHh4en6f3b7vqsjYxQeRmqmN8Y+Yzmf2GaNxceHh4enqb3z7vrN9vIEMm3el6oYs7HvrtSd/266dxceHh4eHh6Xj7k56/Yu9wYHGL5VscLVczw+KP27pubIt2seHh4eHh1vPxhvz9pE0M4327zQhUzMna73Ufd9Y0gNyseHh4eXh3vH9i7z42NDvV8u8kLVcyM9/777/3x3e7FzzV8s+Lh4eHh3e79x+76ss2MlvLtKi9UMQXeZz/70We6H/1le/ZtgqVXkJsfDw8Pb4ve/+quv9hd32Yzo8V8W+yFKmaZ92F3/Yg9fT6g5Apw8+Ph4eFt0fuf9u5D4fkvxGZHgHy731AvZqH3aXvXCPys6dyseHh4eHi3e/l9/c9310srHMHyre5QL+ZG7/fZuz8FOftXgYZvfjw8PLytefmf+f9md32fLRxieXR3z3VyYS//Legf6K6/sNvtfqq7oX65oZsfDw8Pb0ver3Tv0z+93+/fvPfee19++fKD4a+5nRnCeXQ3z3XyVrzD4XOf+dSn3v/e7gb74e5HX+uub9i74yL/a3f9H4v1YsLDw8NT8/L7bH6/ze+7+f33R/P7cX5fzu/Pyvmh7LlOHszLHy7JXxv5+edXd6N//oMPPvjdL1++/NLxyv93/v8P/e/nLjw8PLwNePn99OJDeyLv9yE818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDK/P+P4jnb7D01hqeAAAAAElFTkSuQmCC"}ngOnInit(){}onFileDropped(e){this.converterService.uploadHandler(e[0]).then(n=>{this.logger.info(n),n.startsWith("PHN2Z")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/SVG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/svg+xml;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/svg+xml;base64,"+n)),n.startsWith("iVBOR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/PNG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/png;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/png;base64,"+n)),n.startsWith("UklGR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/WEBP",detail:`Filename ${e[0].name}`}),this.viewer="data:image/webp;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/webp;base64,"+n))})}}return i.\u0275fac=function(e){return new(e||i)(Xt(Jh),Xt(fm),Xt(k1),Xt(Lme))},i.\u0275cmp=_r({type:i,selectors:[["app-converter"]],viewQuery:function(e,n){if(1&e&&Tr(Rme,5),2&e){let r;Wi(r=ji())&&(n.myImg=r.first)}},decls:4,vars:3,consts:[["dropZoneDirective","",3,"fileDropped"],["pTemplate",""],["alt","drop here",3,"src"],["myImg",""]],template:function(e,n){1&e&&(Vn(0,"p-toast"),Qe(1,"p-splitter",0),mn("fileDropped",function(s){return n.onFileDropped(s)}),Xe(2,Pme,2,0,"ng-template",1),Xe(3,kme,2,1,"ng-template",1),nt()),2&e&&(Se(1),no(uo(2,Ome)))},dependencies:[za,LA,E4,PS]}),i})();const Nme=function(i,t,e){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":i,"p-disabled":t,"p-focus":e}},Bme={provide:wc,useExisting:hs(()=>o5),multi:!0};let o5=(()=>{class i{constructor(e){this.cd=e,this.trueValue=!0,this.falseValue=!1,this.onChange=new Bn,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(e.preventDefault(),this.toggle(e),n.focus())}onInputChange(e){this.readonly||this.updateModel(e,e.target.checked)}toggle(e){this.updateModel(e,!this.checked())}updateModel(e,n){this.modelValue=n?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue})}onFocus(e){this.focused=!0}onBlur(e){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[Ao([Bme])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(e,n){if(1&e){const r=yi();Qe(0,"div",0),mn("click",function(o){Ot(r);const l=ao(3);return Nt(n.onClick(o,l))}),Qe(1,"div",1)(2,"input",2,3),mn("change",function(o){return n.onInputChange(o)})("focus",function(o){return n.onFocus(o)})("blur",function(o){return n.onBlur(o)}),nt()(),Vn(4,"span",4),nt()}2&e&&(Fr(n.styleClass),de("ngClass",Su(12,Nme,n.checked(),n.disabled,n.focused))("ngStyle",n.style),Se(2),de("checked",n.checked())("disabled",n.disabled),vr("aria-label",n.ariaLabel)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-checked",n.checked())("aria-labelledby",n.ariaLabelledBy))},dependencies:[io,Ro],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),i})(),zme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();function Vme(i,t){if(1&i&&(Qe(0,"span",10),ci(1),nt()),2&i){const e=Ce(2);vr("id",e.id+"_header"),Se(1),is(e.header)}}function Ume(i,t){1&i&&Ni(0)}function Hme(i,t){}function Gme(i,t){1&i&&Xe(0,Hme,0,0,"ng-template")}function Wme(i,t){if(1&i){const e=yi();Qe(0,"button",11),mn("click",function(r){return Ot(e),Nt(Ce(2).onIconClick(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce(2).onIconClick(r))}),Vn(1,"span"),nt()}if(2&i){const e=Ce(2);vr("aria-label","collapse button")("id",e.id+"-label")("aria-controls",e.id+"-content")("aria-expanded",!e.collapsed),Se(1),Fr(e.collapsed?e.expandIcon:e.collapseIcon)}}const jme=function(i,t,e){return{"p-panel-icons-start":i,"p-panel-icons-end":t,"p-panel-icons-center":e}};function $me(i,t){if(1&i){const e=yi();Qe(0,"div",6),mn("click",function(r){return Ot(e),Nt(Ce().onHeaderClick(r))}),Xe(1,Vme,2,2,"span",7),su(2,1),Xe(3,Ume,1,0,"ng-container",4),Qe(4,"div",8),Xe(5,Gme,1,0,null,4),Xe(6,Wme,2,6,"button",9),nt()()}if(2&i){const e=Ce();vr("id",e.id+"-titlebar"),Se(1),de("ngIf",e.header),Se(2),de("ngTemplateOutlet",e.headerTemplate),Se(1),de("ngClass",Su(6,jme,"start"===e.iconPos,"end"===e.iconPos,"center"===e.iconPos)),Se(1),de("ngTemplateOutlet",e.iconTemplate),Se(1),de("ngIf",e.toggleable)}}function qme(i,t){1&i&&Ni(0)}function Xme(i,t){1&i&&Ni(0)}function Yme(i,t){if(1&i&&(Qe(0,"div",12),su(1,2),Xe(2,Xme,1,0,"ng-container",4),nt()),2&i){const e=Ce();Se(2),de("ngTemplateOutlet",e.footerTemplate)}}const Kme=["*",[["p-header"]],[["p-footer"]]],Zme=function(i,t){return{"p-panel p-component":!0,"p-panel-toggleable":i,"p-panel-expanded":t}},Qme=function(i){return{transitionParams:i,height:"0",opacity:"0"}},Jme=function(i){return{value:"hidden",params:i}},eve=function(i){return{transitionParams:i,height:"*",opacity:"1"}},tve=function(i){return{value:"visible",params:i}},nve=["*","p-header","p-footer"];let ive=0,rve=(()=>{class i{constructor(e){this.el=e,this.collapsed=!1,this.iconPos="end",this.expandIcon="pi pi-plus",this.collapseIcon="pi pi-minus",this.showHeader=!0,this.toggler="icon",this.collapsedChange=new Bn,this.onBeforeToggle=new Bn,this.onAfterToggle=new Bn,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-panel-"+ive++}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"icons":this.iconTemplate=e.template}})}onHeaderClick(e){"header"===this.toggler&&this.toggle(e)}onIconClick(e){"icon"===this.toggler&&this.toggle(e)}toggle(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand(e):this.collapse(e)),e.preventDefault()}expand(e){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(e){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(e){this.animating=!1,this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed})}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn))},i.\u0275cmp=_r({type:i,selectors:[["p-panel"]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,A1,5),Ba(r,za,4)),2&e){let s;Wi(s=ji())&&(n.footerFacet=s.first),Wi(s=ji())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{toggleable:"toggleable",header:"header",collapsed:"collapsed",style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:"showHeader",toggler:"toggler",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:nve,decls:7,vars:23,consts:[[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],["role","tablist",1,"p-panel-icons",3,"ngClass"],["type","button","class","p-panel-header-icon p-panel-toggler p-link","pRipple","","role","tab",3,"click","keydown.enter",4,"ngIf"],[1,"p-panel-title"],["type","button","pRipple","","role","tab",1,"p-panel-header-icon","p-panel-toggler","p-link",3,"click","keydown.enter"],[1,"p-panel-footer"]],template:function(e,n){1&e&&(Bf(Kme),Qe(0,"div",0),Xe(1,$me,7,10,"div",1),Qe(2,"div",2),mn("@panelContent.done",function(s){return n.onToggleDone(s)}),Qe(3,"div",3),su(4),Xe(5,qme,1,0,"ng-container",4),nt(),Xe(6,Yme,3,1,"div",5),nt()()),2&e&&(Fr(n.styleClass),de("ngClass",as(12,Zme,n.toggleable,!n.collapsed&&n.toggleable))("ngStyle",n.style),vr("id",n.id),Se(1),de("ngIf",n.showHeader),Se(1),de("@panelContent",n.collapsed?bi(17,Jme,bi(15,Qme,n.animating?n.transitionOptions:"0ms")):bi(21,tve,bi(19,eve,n.animating?n.transitionOptions:"0ms"))),vr("id",n.id+"-content")("aria-hidden",n.collapsed)("aria-labelledby",n.id+"-titlebar"),Se(3),de("ngTemplateOutlet",n.contentTemplate),Se(1),de("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[io,ho,el,Ro,Du],styles:[".p-panel-header{display:flex;align-items:center}.p-panel-title{line-height:1;order:1}.p-panel-header-icon{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-panel-toggleable.p-panel-expanded .p-toggleable-content:not(.ng-animating){overflow:visible}.p-panel-toggleable .p-toggleable-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[ly("panelContent",[A0("hidden",tl({height:"0"})),A0("void",tl({height:"{{height}}"}),{params:{height:"0"}}),A0("visible",tl({height:"*"})),Mu("visible <=> hidden",[Ac("{{transitionParams}}")]),Mu("void => hidden",Ac("{{transitionParams}}")),Mu("void => visible",Ac("{{transitionParams}}"))])]},changeDetection:0}),i})(),sve=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa,Xc,xa]}),i})(),ove=(()=>{class i{constructor(e,n){this._logger=e,this.preferenceService=n;let r=this.preferenceService.findOne("default");r&&(this.preferences=r)}ngOnInit(){}handleChange(e){var n;this.preferenceService.store(this.preferences,r=>{r.full=this.preferences.full,r.grid=this.preferences.grid,r.applyRules=this.preferences.applyRules,r.debug=this.preferences.debug,r.info=this.preferences.info,r.maxHeight=this.preferences.maxHeight,r.maxWidth=this.preferences.maxWidth}),this.preferences.debug?((n=this._logger.getConfigSnapshot()).level=oc.DEBUG,this._logger.updateConfig(n)):((n=this._logger.getConfigSnapshot()).level=oc.INFO,this._logger.updateConfig(n))}}return i.\u0275fac=function(e){return new(e||i)(Xt(Jh),Xt(x4))},i.\u0275cmp=_r({type:i,selectors:[["app-preference"]],decls:31,vars:8,consts:[["header","Render",3,"toggleable"],[1,"field-checkbox"],[3,"ngModel","ngModelChange","onChange"],["for","ny"],[1,"p-float-label"],["type","text","id","inputtext","pInputText","",3,"ngModel","ngModelChange","keyup"],["for","inputtext"]],template:function(e,n){1&e&&(Qe(0,"p-panel",0)(1,"div",1)(2,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.grid=s})("onChange",function(s){return n.handleChange(s)}),nt(),Qe(3,"label",3),ci(4,"Apply grid"),nt()(),Qe(5,"div",1)(6,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.info=s})("onChange",function(s){return n.handleChange(s)}),nt(),Qe(7,"label",3),ci(8,"Apply display info"),nt()(),Qe(9,"div",1)(10,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.applyRules=s})("onChange",function(s){return n.handleChange(s)}),nt(),Qe(11,"label",3),ci(12,"Run ruleset on each modification"),nt()(),Qe(13,"div",1)(14,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.debug=s})("onChange",function(s){return n.handleChange(s)}),nt(),Qe(15,"label",3),ci(16,"Debug mode"),nt()(),Qe(17,"div",1)(18,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.full=s})("onChange",function(s){return n.handleChange(s)}),nt(),Qe(19,"label",3),ci(20,"Export full graph"),nt()(),Qe(21,"div",1)(22,"span",4)(23,"input",5),mn("ngModelChange",function(s){return n.preferences.maxWidth=s})("keyup",function(s){return n.handleChange(s)}),nt(),Qe(24,"label",6),ci(25,"Max width for image export"),nt()()(),Qe(26,"div",1)(27,"span",4)(28,"input",5),mn("ngModelChange",function(s){return n.preferences.maxHeight=s})("keyup",function(s){return n.handleChange(s)}),nt(),Qe(29,"label",6),ci(30,"Max height for image export"),nt()()()()),2&e&&(de("toggleable",!0),Se(2),de("ngModel",n.preferences.grid),Se(4),de("ngModel",n.preferences.info),Se(4),de("ngModel",n.preferences.applyRules),Se(4),de("ngModel",n.preferences.debug),Se(4),de("ngModel",n.preferences.full),Se(5),de("ngModel",n.preferences.maxWidth),Se(5),de("ngModel",n.preferences.maxHeight))},dependencies:[fC,o5,C0,uC,oy,rve]}),i})();var ave=z(4826)();let lve=(()=>{class i{constructor(e){this.http=e}ngOnInit(){this.http.get("/assets/about/about.md",{responseType:"text"}).subscribe(e=>{this.about=ave.render(e)})}}return i.\u0275fac=function(e){return new(e||i)(Xt(t1))},i.\u0275cmp=_r({type:i,selectors:[["app-about"]],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&Vn(0,"div",0),2&e&&de("innerHTML",n.about,Aa)}}),i})();const cf=1001,Ju=1003,Lu=1006,F0=1009,N0=1014,__=1015,sx=1016,xC=1020,wg=1023,B0=1026,IC=1027,z0=3e3,Kc=3001,my="srgb",U0="srgb-linear";class TC{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Dd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],H0=Math.PI/180,ox=180/Math.PI;function Rp(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Dd[255&i]+Dd[i>>8&255]+Dd[i>>16&255]+Dd[i>>24&255]+"-"+Dd[255&t]+Dd[t>>8&255]+"-"+Dd[t>>16&15|64]+Dd[t>>24&255]+"-"+Dd[63&e|128]+Dd[e>>8&255]+"-"+Dd[e>>16&255]+Dd[e>>24&255]+Dd[255&n]+Dd[n>>8&255]+Dd[n>>16&255]+Dd[n>>24&255]).toLowerCase()}function lu(i,t,e){return Math.max(t,Math.min(e,i))}function ax(i,t,e){return(1-e)*i+e*t}function eR(i){return 0==(i&i-1)&&0!==i}function GS(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function vy(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Cl(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}class Xi{constructor(t=0,e=0){Xi.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pp{constructor(){Pp.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,s,o,l,u,p){const v=this.elements;return v[0]=t,v[1]=r,v[2]=l,v[3]=e,v[4]=s,v[5]=u,v[6]=n,v[7]=o,v[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[3],u=n[6],p=n[1],v=n[4],w=n[7],I=n[2],T=n[5],k=n[8],W=r[0],K=r[3],he=r[6],Te=r[1],Ae=r[4],Le=r[7],tt=r[2],_t=r[5],Ut=r[8];return s[0]=o*W+l*Te+u*tt,s[3]=o*K+l*Ae+u*_t,s[6]=o*he+l*Le+u*Ut,s[1]=p*W+v*Te+w*tt,s[4]=p*K+v*Ae+w*_t,s[7]=p*he+v*Le+w*Ut,s[2]=I*W+T*Te+k*tt,s[5]=I*K+T*Ae+k*_t,s[8]=I*he+T*Le+k*Ut,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8];return e*o*v-e*l*p-n*s*v+n*l*u+r*s*p-r*o*u}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],w=v*o-l*p,I=l*u-v*s,T=p*s-o*u,k=e*w+n*I+r*T;if(0===k)return this.set(0,0,0,0,0,0,0,0,0);const W=1/k;return t[0]=w*W,t[1]=(r*p-v*n)*W,t[2]=(l*n-r*o)*W,t[3]=I*W,t[4]=(v*e-r*u)*W,t[5]=(r*s-l*e)*W,t[6]=T*W,t[7]=(n*u-p*e)*W,t[8]=(o*e-n*s)*W,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,l){const u=Math.cos(s),p=Math.sin(s);return this.set(n*u,n*p,-n*(u*o+p*l)+o+t,-r*p,r*u,-r*(-p*o+u*l)+l+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],p=r[4],v=r[7];return r[0]=e*s+n*u,r[3]=e*o+n*p,r[6]=e*l+n*v,r[1]=-n*s+e*u,r[4]=-n*o+e*p,r[7]=-n*l+e*v,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function G5(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function lx(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function G0(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function WS(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const tR={[my]:{[U0]:G0},[U0]:{[my]:WS}},vm={legacyMode:!0,get workingColorSpace(){return U0},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,t,e){if(this.legacyMode||t===e||!t||!e)return i;if(tR[t]&&void 0!==tR[t][e]){const n=tR[t][e];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,t){return this.convert(i,this.workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this.workingColorSpace)}},W5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},eh={r:0,g:0,b:0},ym={h:0,s:0,l:0},jS={h:0,s:0,l:0};function nR(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}function $S(i,t){return t.r=i.r,t.g=i.g,t.b=i.b,t}let DC,ns=(()=>{class i{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=my){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,vm.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=U0){return this.r=e,this.g=n,this.b=r,vm.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=U0){if(e=function JL(i,t){return(i%t+t)%t}(e,1),n=lu(n,0,1),r=lu(r,0,1),0===n)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,l=2*r-o;this.r=nR(l,o,e+1/3),this.g=nR(l,o,e),this.b=nR(l,o,e-1/3)}return vm.toWorkingColorSpace(this,s),this}setStyle(e,n=my){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const u=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,vm.toWorkingColorSpace(this,n),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,vm.toWorkingColorSpace(this,n),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const p=parseFloat(o[1])/360,v=parseFloat(o[2])/100,w=parseFloat(o[3])/100;return r(o[4]),this.setHSL(p,v,w,n)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(3===l)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,vm.toWorkingColorSpace(this,n),this;if(6===l)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,vm.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=my){const r=W5[e.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=G0(e.r),this.g=G0(e.g),this.b=G0(e.b),this}copyLinearToSRGB(e){return this.r=WS(e.r),this.g=WS(e.g),this.b=WS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=my){return vm.fromWorkingColorSpace($S(this,eh),e),lu(255*eh.r,0,255)<<16^lu(255*eh.g,0,255)<<8^lu(255*eh.b,0,255)<<0}getHexString(e=my){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=U0){vm.fromWorkingColorSpace($S(this,eh),n);const r=eh.r,s=eh.g,o=eh.b,l=Math.max(r,s,o),u=Math.min(r,s,o);let p,v;const w=(u+l)/2;if(u===l)p=0,v=0;else{const I=l-u;switch(v=w<=.5?I/(l+u):I/(2-l-u),l){case r:p=(s-o)/I+(s<o?6:0);break;case s:p=(o-r)/I+2;break;case o:p=(r-s)/I+4}p/=6}return e.h=p,e.s=v,e.l=w,e}getRGB(e,n=U0){return vm.fromWorkingColorSpace($S(this,eh),n),e.r=eh.r,e.g=eh.g,e.b=eh.b,e}getStyle(e=my){return vm.fromWorkingColorSpace($S(this,eh),e),e!==my?`color(${e} ${eh.r} ${eh.g} ${eh.b})`:`rgb(${255*eh.r|0},${255*eh.g|0},${255*eh.b|0})`}offsetHSL(e,n,r){return this.getHSL(ym),ym.h+=e,ym.s+=n,ym.l+=r,this.setHSL(ym.h,ym.s,ym.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ym),e.getHSL(jS);const r=ax(ym.h,jS.h,n),s=ax(ym.s,jS.s,n),o=ax(ym.l,jS.l,n);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return i.NAMES=W5,i})();class j5{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===DC&&(DC=lx("canvas")),DC.width=t.width,DC.height=t.height;const n=DC.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=DC}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=lx("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*G0(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*G0(e[n]/255)):G0(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class LC{constructor(t=null){this.isSource=!0,this.uuid=Rp(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)s.push(iR(r[o].isDataTexture?r[o].image:r[o]))}else s=iR(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function iR(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?j5.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Cye=0,b_=(()=>{class i extends TC{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=cf,s=cf,o=Lu,l=1008,u=wg,p=F0,v=1,w=z0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Cye++}),this.uuid=Rp(),this.name="",this.source=new LC(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=v,this.format=u,this.internalFormat=null,this.type=p,this.offset=new Xi(0,0),this.repeat=new Xi(1,1),this.center=new Xi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pp,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=w,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case cf:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case cf:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i})();class fl{constructor(t=0,e=0,n=0,r=1){fl.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const u=t.elements,p=u[0],v=u[4],w=u[8],I=u[1],T=u[5],k=u[9],W=u[2],K=u[6],he=u[10];if(Math.abs(v-I)<.01&&Math.abs(w-W)<.01&&Math.abs(k-K)<.01){if(Math.abs(v+I)<.1&&Math.abs(w+W)<.1&&Math.abs(k+K)<.1&&Math.abs(p+T+he-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const Ae=(p+1)/2,Le=(T+1)/2,tt=(he+1)/2,_t=(v+I)/4,Ut=(w+W)/4,at=(k+K)/4;return Ae>Le&&Ae>tt?Ae<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(Ae),r=_t/n,s=Ut/n):Le>tt?Le<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(Le),n=_t/r,s=at/r):tt<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(tt),n=Ut/s,r=at/s),this.set(n,r,s,e),this}let Te=Math.sqrt((K-k)*(K-k)+(w-W)*(w-W)+(I-v)*(I-v));return Math.abs(Te)<.001&&(Te=1),this.x=(K-k)/Te,this.y=(w-W)/Te,this.z=(I-v)/Te,this.w=Math.acos((p+T+he-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class W0 extends TC{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new fl(0,0,t,e),this.scissorTest=!1,this.viewport=new fl(0,0,t,e),this.texture=new b_({width:t,height:e,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Lu,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new LC(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class rR extends b_{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Ju,this.minFilter=Ju,this.wrapR=cf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $5 extends b_{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Ju,this.minFilter=Ju,this.wrapR=cf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kp{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,o,l){let u=n[r+0],p=n[r+1],v=n[r+2],w=n[r+3];const I=s[o+0],T=s[o+1],k=s[o+2],W=s[o+3];if(0===l)return t[e+0]=u,t[e+1]=p,t[e+2]=v,void(t[e+3]=w);if(1===l)return t[e+0]=I,t[e+1]=T,t[e+2]=k,void(t[e+3]=W);if(w!==W||u!==I||p!==T||v!==k){let K=1-l;const he=u*I+p*T+v*k+w*W,Te=he>=0?1:-1,Ae=1-he*he;if(Ae>Number.EPSILON){const tt=Math.sqrt(Ae),_t=Math.atan2(tt,he*Te);K=Math.sin(K*_t)/tt,l=Math.sin(l*_t)/tt}const Le=l*Te;if(u=u*K+I*Le,p=p*K+T*Le,v=v*K+k*Le,w=w*K+W*Le,K===1-l){const tt=1/Math.sqrt(u*u+p*p+v*v+w*w);u*=tt,p*=tt,v*=tt,w*=tt}}t[e]=u,t[e+1]=p,t[e+2]=v,t[e+3]=w}static multiplyQuaternionsFlat(t,e,n,r,s,o){const l=n[r],u=n[r+1],p=n[r+2],v=n[r+3],w=s[o],I=s[o+1],T=s[o+2],k=s[o+3];return t[e]=l*k+v*w+u*T-p*I,t[e+1]=u*k+v*I+p*w-l*T,t[e+2]=p*k+v*T+l*I-u*w,t[e+3]=v*k-l*w-u*I-p*T,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,s=t._z,o=t._order,l=Math.cos,u=Math.sin,p=l(n/2),v=l(r/2),w=l(s/2),I=u(n/2),T=u(r/2),k=u(s/2);switch(o){case"XYZ":this._x=I*v*w+p*T*k,this._y=p*T*w-I*v*k,this._z=p*v*k+I*T*w,this._w=p*v*w-I*T*k;break;case"YXZ":this._x=I*v*w+p*T*k,this._y=p*T*w-I*v*k,this._z=p*v*k-I*T*w,this._w=p*v*w+I*T*k;break;case"ZXY":this._x=I*v*w-p*T*k,this._y=p*T*w+I*v*k,this._z=p*v*k+I*T*w,this._w=p*v*w-I*T*k;break;case"ZYX":this._x=I*v*w-p*T*k,this._y=p*T*w+I*v*k,this._z=p*v*k-I*T*w,this._w=p*v*w+I*T*k;break;case"YZX":this._x=I*v*w+p*T*k,this._y=p*T*w+I*v*k,this._z=p*v*k-I*T*w,this._w=p*v*w-I*T*k;break;case"XZY":this._x=I*v*w-p*T*k,this._y=p*T*w-I*v*k,this._z=p*v*k+I*T*w,this._w=p*v*w+I*T*k;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],l=e[5],u=e[9],p=e[2],v=e[6],w=e[10],I=n+l+w;if(I>0){const T=.5/Math.sqrt(I+1);this._w=.25/T,this._x=(v-u)*T,this._y=(s-p)*T,this._z=(o-r)*T}else if(n>l&&n>w){const T=2*Math.sqrt(1+n-l-w);this._w=(v-u)/T,this._x=.25*T,this._y=(r+o)/T,this._z=(s+p)/T}else if(l>w){const T=2*Math.sqrt(1+l-n-w);this._w=(s-p)/T,this._x=(r+o)/T,this._y=.25*T,this._z=(u+v)/T}else{const T=2*Math.sqrt(1+w-n-l);this._w=(o-r)/T,this._x=(s+p)/T,this._y=(u+v)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(lu(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,l=e._x,u=e._y,p=e._z,v=e._w;return this._x=n*v+o*l+r*p-s*u,this._y=r*v+o*u+s*l-n*p,this._z=s*v+o*p+n*u-r*l,this._w=o*v-n*l-r*u-s*p,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*t._w+n*t._x+r*t._y+s*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const T=1-e;return this._w=T*o+e*this._w,this._x=T*n+e*this._x,this._y=T*r+e*this._y,this._z=T*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(u),v=Math.atan2(p,l),w=Math.sin((1-e)*v)/p,I=Math.sin(e*v)/p;return this._w=o*w+this._w*I,this._x=n*w+this._x*I,this._y=r*w+this._y*I,this._z=s*w+this._z*I,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(s),n*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class en{constructor(t=0,e=0,n=0){en.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(q5.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(q5.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,l=t.z,u=t.w,p=u*e+o*r-l*n,v=u*n+l*e-s*r,w=u*r+s*n-o*e,I=-s*e-o*n-l*r;return this.x=p*u+I*-s+v*-l-w*-o,this.y=v*u+I*-o+w*-s-p*-l,this.z=w*u+I*-l+p*-o-v*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,l=e.y,u=e.z;return this.x=r*u-s*l,this.y=s*o-n*u,this.z=n*l-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return sR.copy(this).projectOnVector(t),this.sub(sR)}reflect(t){return this.sub(sR.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(lu(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sR=new en,q5=new kp;class C_{constructor(t=new en(1/0,1/0,1/0),e=new en(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.length;u<p;u+=3){const v=t[u],w=t[u+1],I=t[u+2];v<e&&(e=v),w<n&&(n=w),I<r&&(r=I),v>s&&(s=v),w>o&&(o=w),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.count;u<p;u++){const v=t.getX(u),w=t.getY(u),I=t.getZ(u);v<e&&(e=v),w<n&&(n=w),I<r&&(r=I),v>s&&(s=v),w>o&&(o=w),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=j0.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const s=n.attributes.position;for(let o=0,l=s.count;o<l;o++)j0.fromBufferAttribute(s,o).applyMatrix4(t.matrixWorld),this.expandByPoint(j0)}else null===n.boundingBox&&n.computeBoundingBox(),oR.copy(n.boundingBox),oR.applyMatrix4(t.matrixWorld),this.union(oR);const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,j0),j0.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(cx),qS.subVectors(this.max,cx),RC.subVectors(t.a,cx),PC.subVectors(t.b,cx),kC.subVectors(t.c,cx),w_.subVectors(PC,RC),A_.subVectors(kC,PC),$0.subVectors(RC,kC);let e=[0,-w_.z,w_.y,0,-A_.z,A_.y,0,-$0.z,$0.y,w_.z,0,-w_.x,A_.z,0,-A_.x,$0.z,0,-$0.x,-w_.y,w_.x,0,-A_.y,A_.x,0,-$0.y,$0.x,0];return!(!aR(e,RC,PC,kC,qS)||(e=[1,0,0,0,1,0,0,0,1],!aR(e,RC,PC,kC,qS)))&&(XS.crossVectors(w_,A_),e=[XS.x,XS.y,XS.z],aR(e,RC,PC,kC,qS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return j0.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(j0).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(yy[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),yy[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),yy[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),yy[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),yy[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),yy[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),yy[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),yy[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(yy)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const yy=[new en,new en,new en,new en,new en,new en,new en,new en],j0=new en,oR=new C_,RC=new en,PC=new en,kC=new en,w_=new en,A_=new en,$0=new en,cx=new en,qS=new en,XS=new en,q0=new en;function aR(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){q0.fromArray(i,s);const l=r.x*Math.abs(q0.x)+r.y*Math.abs(q0.y)+r.z*Math.abs(q0.z),u=t.dot(q0),p=e.dot(q0),v=n.dot(q0);if(Math.max(-Math.max(u,p,v),Math.min(u,p,v))>l)return!1}return!0}const wye=new C_,ux=new en,lR=new en;class OC{constructor(t=new en,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):wye.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;ux.subVectors(t,this.center);const e=ux.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(ux,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(lR.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(ux.copy(t.center).add(lR)),this.expandByPoint(ux.copy(t.center).sub(lR))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const _y=new en,cR=new en,YS=new en,x_=new en,uR=new en,KS=new en,hR=new en;class ZS{constructor(t=new en,e=new en(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,_y)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=_y.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(_y.copy(this.direction).multiplyScalar(e).add(this.origin),_y.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){cR.copy(t).add(e).multiplyScalar(.5),YS.copy(e).sub(t).normalize(),x_.copy(this.origin).sub(cR);const s=.5*t.distanceTo(e),o=-this.direction.dot(YS),l=x_.dot(this.direction),u=-x_.dot(YS),p=x_.lengthSq(),v=Math.abs(1-o*o);let w,I,T,k;if(v>0)if(w=o*u-l,I=o*l-u,k=s*v,w>=0)if(I>=-k)if(I<=k){const W=1/v;w*=W,I*=W,T=w*(w+o*I+2*l)+I*(o*w+I+2*u)+p}else I=s,w=Math.max(0,-(o*I+l)),T=-w*w+I*(I+2*u)+p;else I=-s,w=Math.max(0,-(o*I+l)),T=-w*w+I*(I+2*u)+p;else I<=-k?(w=Math.max(0,-(-o*s+l)),I=w>0?-s:Math.min(Math.max(-s,-u),s),T=-w*w+I*(I+2*u)+p):I<=k?(w=0,I=Math.min(Math.max(-s,-u),s),T=I*(I+2*u)+p):(w=Math.max(0,-(o*s+l)),I=w>0?s:Math.min(Math.max(-s,-u),s),T=-w*w+I*(I+2*u)+p);else I=o>0?-s:s,w=Math.max(0,-(o*I+l)),T=-w*w+I*(I+2*u)+p;return n&&n.copy(this.direction).multiplyScalar(w).add(this.origin),r&&r.copy(YS).multiplyScalar(I).add(cR),T}intersectSphere(t,e){_y.subVectors(t.center,this.origin);const n=_y.dot(this.direction),r=_y.dot(_y)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,u=n+o;return l<0&&u<0?null:this.at(l<0?u:l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,l,u;const p=1/this.direction.x,v=1/this.direction.y,w=1/this.direction.z,I=this.origin;return p>=0?(n=(t.min.x-I.x)*p,r=(t.max.x-I.x)*p):(n=(t.max.x-I.x)*p,r=(t.min.x-I.x)*p),v>=0?(s=(t.min.y-I.y)*v,o=(t.max.y-I.y)*v):(s=(t.max.y-I.y)*v,o=(t.min.y-I.y)*v),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),w>=0?(l=(t.min.z-I.z)*w,u=(t.max.z-I.z)*w):(l=(t.max.z-I.z)*w,u=(t.min.z-I.z)*w),n>u||l>r)||((l>n||n!=n)&&(n=l),(u<r||r!=r)&&(r=u),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,_y)}intersectTriangle(t,e,n,r,s){uR.subVectors(e,t),KS.subVectors(n,t),hR.crossVectors(uR,KS);let l,o=this.direction.dot(hR);if(o>0){if(r)return null;l=1}else{if(!(o<0))return null;l=-1,o=-o}x_.subVectors(this.origin,t);const u=l*this.direction.dot(KS.crossVectors(x_,KS));if(u<0)return null;const p=l*this.direction.dot(uR.cross(x_));if(p<0||u+p>o)return null;const v=-l*x_.dot(hR);return v<0?null:this.at(v/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class vo{constructor(){vo.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,s,o,l,u,p,v,w,I,T,k,W,K){const he=this.elements;return he[0]=t,he[4]=e,he[8]=n,he[12]=r,he[1]=s,he[5]=o,he[9]=l,he[13]=u,he[2]=p,he[6]=v,he[10]=w,he[14]=I,he[3]=T,he[7]=k,he[11]=W,he[15]=K,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new vo).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/FC.setFromMatrixColumn(t,0).length(),s=1/FC.setFromMatrixColumn(t,1).length(),o=1/FC.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(r),p=Math.sin(r),v=Math.cos(s),w=Math.sin(s);if("XYZ"===t.order){const I=o*v,T=o*w,k=l*v,W=l*w;e[0]=u*v,e[4]=-u*w,e[8]=p,e[1]=T+k*p,e[5]=I-W*p,e[9]=-l*u,e[2]=W-I*p,e[6]=k+T*p,e[10]=o*u}else if("YXZ"===t.order){const I=u*v,T=u*w,k=p*v,W=p*w;e[0]=I+W*l,e[4]=k*l-T,e[8]=o*p,e[1]=o*w,e[5]=o*v,e[9]=-l,e[2]=T*l-k,e[6]=W+I*l,e[10]=o*u}else if("ZXY"===t.order){const I=u*v,T=u*w,k=p*v,W=p*w;e[0]=I-W*l,e[4]=-o*w,e[8]=k+T*l,e[1]=T+k*l,e[5]=o*v,e[9]=W-I*l,e[2]=-o*p,e[6]=l,e[10]=o*u}else if("ZYX"===t.order){const I=o*v,T=o*w,k=l*v,W=l*w;e[0]=u*v,e[4]=k*p-T,e[8]=I*p+W,e[1]=u*w,e[5]=W*p+I,e[9]=T*p-k,e[2]=-p,e[6]=l*u,e[10]=o*u}else if("YZX"===t.order){const I=o*u,T=o*p,k=l*u,W=l*p;e[0]=u*v,e[4]=W-I*w,e[8]=k*w+T,e[1]=w,e[5]=o*v,e[9]=-l*v,e[2]=-p*v,e[6]=T*w+k,e[10]=I-W*w}else if("XZY"===t.order){const I=o*u,T=o*p,k=l*u,W=l*p;e[0]=u*v,e[4]=-w,e[8]=p*v,e[1]=I*w+W,e[5]=o*v,e[9]=T*w-k,e[2]=k*w-T,e[6]=l*v,e[10]=W*w+I}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Aye,t,xye)}lookAt(t,e,n){const r=this.elements;return Op.subVectors(t,e),0===Op.lengthSq()&&(Op.z=1),Op.normalize(),I_.crossVectors(n,Op),0===I_.lengthSq()&&(1===Math.abs(n.z)?Op.x+=1e-4:Op.z+=1e-4,Op.normalize(),I_.crossVectors(n,Op)),I_.normalize(),QS.crossVectors(Op,I_),r[0]=I_.x,r[4]=QS.x,r[8]=Op.x,r[1]=I_.y,r[5]=QS.y,r[9]=Op.y,r[2]=I_.z,r[6]=QS.z,r[10]=Op.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[4],u=n[8],p=n[12],v=n[1],w=n[5],I=n[9],T=n[13],k=n[2],W=n[6],K=n[10],he=n[14],Te=n[3],Ae=n[7],Le=n[11],tt=n[15],_t=r[0],Ut=r[4],at=r[8],Lt=r[12],cn=r[1],Gn=r[5],ii=r[9],jn=r[13],Mn=r[2],Un=r[6],In=r[10],Wn=r[14],zn=r[3],Sn=r[7],Hn=r[11],Yi=r[15];return s[0]=o*_t+l*cn+u*Mn+p*zn,s[4]=o*Ut+l*Gn+u*Un+p*Sn,s[8]=o*at+l*ii+u*In+p*Hn,s[12]=o*Lt+l*jn+u*Wn+p*Yi,s[1]=v*_t+w*cn+I*Mn+T*zn,s[5]=v*Ut+w*Gn+I*Un+T*Sn,s[9]=v*at+w*ii+I*In+T*Hn,s[13]=v*Lt+w*jn+I*Wn+T*Yi,s[2]=k*_t+W*cn+K*Mn+he*zn,s[6]=k*Ut+W*Gn+K*Un+he*Sn,s[10]=k*at+W*ii+K*In+he*Hn,s[14]=k*Lt+W*jn+K*Wn+he*Yi,s[3]=Te*_t+Ae*cn+Le*Mn+tt*zn,s[7]=Te*Ut+Ae*Gn+Le*Un+tt*Sn,s[11]=Te*at+Ae*ii+Le*In+tt*Hn,s[15]=Te*Lt+Ae*jn+Le*Wn+tt*Yi,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],l=t[5],u=t[9],p=t[13],v=t[2],w=t[6],I=t[10],T=t[14];return t[3]*(+s*u*w-r*p*w-s*l*I+n*p*I+r*l*T-n*u*T)+t[7]*(+e*u*T-e*p*I+s*o*I-r*o*T+r*p*v-s*u*v)+t[11]*(+e*p*w-e*l*T-s*o*w+n*o*T+s*l*v-n*p*v)+t[15]*(-r*l*v-e*u*w+e*l*I+r*o*w-n*o*I+n*u*v)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],w=t[9],I=t[10],T=t[11],k=t[12],W=t[13],K=t[14],he=t[15],Te=w*K*p-W*I*p+W*u*T-l*K*T-w*u*he+l*I*he,Ae=k*I*p-v*K*p-k*u*T+o*K*T+v*u*he-o*I*he,Le=v*W*p-k*w*p+k*l*T-o*W*T-v*l*he+o*w*he,tt=k*w*u-v*W*u-k*l*I+o*W*I+v*l*K-o*w*K,_t=e*Te+n*Ae+r*Le+s*tt;if(0===_t)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Ut=1/_t;return t[0]=Te*Ut,t[1]=(W*I*s-w*K*s-W*r*T+n*K*T+w*r*he-n*I*he)*Ut,t[2]=(l*K*s-W*u*s+W*r*p-n*K*p-l*r*he+n*u*he)*Ut,t[3]=(w*u*s-l*I*s-w*r*p+n*I*p+l*r*T-n*u*T)*Ut,t[4]=Ae*Ut,t[5]=(v*K*s-k*I*s+k*r*T-e*K*T-v*r*he+e*I*he)*Ut,t[6]=(k*u*s-o*K*s-k*r*p+e*K*p+o*r*he-e*u*he)*Ut,t[7]=(o*I*s-v*u*s+v*r*p-e*I*p-o*r*T+e*u*T)*Ut,t[8]=Le*Ut,t[9]=(k*w*s-v*W*s-k*n*T+e*W*T+v*n*he-e*w*he)*Ut,t[10]=(o*W*s-k*l*s+k*n*p-e*W*p-o*n*he+e*l*he)*Ut,t[11]=(v*l*s-o*w*s-v*n*p+e*w*p+o*n*T-e*l*T)*Ut,t[12]=tt*Ut,t[13]=(v*W*r-k*w*r+k*n*I-e*W*I-v*n*K+e*w*K)*Ut,t[14]=(k*l*r-o*W*r-k*n*u+e*W*u+o*n*K-e*l*K)*Ut,t[15]=(o*w*r-v*l*r+v*n*u-e*w*u-o*n*I+e*l*I)*Ut,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,l=t.y,u=t.z,p=s*o,v=s*l;return this.set(p*o+n,p*l-r*u,p*u+r*l,0,p*l+r*u,v*l+n,v*u-r*o,0,p*u-r*l,v*u+r*o,s*u*u+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,l=e._z,u=e._w,p=s+s,v=o+o,w=l+l,I=s*p,T=s*v,k=s*w,W=o*v,K=o*w,he=l*w,Te=u*p,Ae=u*v,Le=u*w,tt=n.x,_t=n.y,Ut=n.z;return r[0]=(1-(W+he))*tt,r[1]=(T+Le)*tt,r[2]=(k-Ae)*tt,r[3]=0,r[4]=(T-Le)*_t,r[5]=(1-(I+he))*_t,r[6]=(K+Te)*_t,r[7]=0,r[8]=(k+Ae)*Ut,r[9]=(K-Te)*Ut,r[10]=(1-(I+W))*Ut,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=FC.set(r[0],r[1],r[2]).length();const o=FC.set(r[4],r[5],r[6]).length(),l=FC.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],_m.copy(this);const p=1/s,v=1/o,w=1/l;return _m.elements[0]*=p,_m.elements[1]*=p,_m.elements[2]*=p,_m.elements[4]*=v,_m.elements[5]*=v,_m.elements[6]*=v,_m.elements[8]*=w,_m.elements[9]*=w,_m.elements[10]*=w,e.setFromRotationMatrix(_m),n.x=s,n.y=o,n.z=l,this}makePerspective(t,e,n,r,s,o){const l=this.elements,p=2*s/(n-r),v=(e+t)/(e-t),w=(n+r)/(n-r),I=-(o+s)/(o-s),T=-2*o*s/(o-s);return l[0]=2*s/(e-t),l[4]=0,l[8]=v,l[12]=0,l[1]=0,l[5]=p,l[9]=w,l[13]=0,l[2]=0,l[6]=0,l[10]=I,l[14]=T,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,s,o){const l=this.elements,u=1/(e-t),p=1/(n-r),v=1/(o-s),w=(e+t)*u,I=(n+r)*p,T=(o+s)*v;return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-w,l[1]=0,l[5]=2*p,l[9]=0,l[13]=-I,l[2]=0,l[6]=0,l[10]=-2*v,l[14]=-T,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const FC=new en,_m=new vo,Aye=new en(0,0,0),xye=new en(1,1,1),I_=new en,QS=new en,Op=new en,X5=new vo,Y5=new kp;let Iye=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],p=s[1],v=s[5],w=s[9],I=s[2],T=s[6],k=s[10];switch(n){case"XYZ":this._y=Math.asin(lu(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-w,k),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(T,v),this._z=0);break;case"YXZ":this._x=Math.asin(-lu(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(u,k),this._z=Math.atan2(p,v)):(this._y=Math.atan2(-I,o),this._z=0);break;case"ZXY":this._x=Math.asin(lu(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(-I,k),this._z=Math.atan2(-l,v)):(this._y=0,this._z=Math.atan2(p,o));break;case"ZYX":this._y=Math.asin(-lu(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(T,k),this._z=Math.atan2(p,o)):(this._x=0,this._z=Math.atan2(-l,v));break;case"YZX":this._z=Math.asin(lu(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-w,v),this._y=Math.atan2(-I,o)):(this._x=0,this._y=Math.atan2(u,k));break;case"XZY":this._z=Math.asin(-lu(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(T,v),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-w,k),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return X5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(X5,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Y5.setFromEuler(this),this.setFromQuaternion(Y5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return i.DefaultOrder="XYZ",i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i})();class dR{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Sye=0;const K5=new en,NC=new kp,by=new vo,JS=new en,hx=new en,Eye=new en,Tye=new kp,Z5=new en(1,0,0),Q5=new en(0,1,0),J5=new en(0,0,1),Mye={type:"added"},eG={type:"removed"};let Hf=(()=>{class i extends TC{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Sye++}),this.uuid=Rp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DefaultUp.clone();const e=new en,n=new Iye,r=new kp,s=new en(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function l(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new vo},normalMatrix:{value:new Pp}}),this.matrix=new vo,this.matrixWorld=new vo,this.matrixAutoUpdate=i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DefaultMatrixWorldAutoUpdate,this.layers=new dR,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return NC.setFromAxisAngle(e,n),this.quaternion.multiply(NC),this}rotateOnWorldAxis(e,n){return NC.setFromAxisAngle(e,n),this.quaternion.premultiply(NC),this}rotateX(e){return this.rotateOnAxis(Z5,e)}rotateY(e){return this.rotateOnAxis(Q5,e)}rotateZ(e){return this.rotateOnAxis(J5,e)}translateOnAxis(e,n){return K5.copy(e).applyQuaternion(this.quaternion),this.position.add(K5.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Z5,e)}translateY(e){return this.translateOnAxis(Q5,e)}translateZ(e){return this.translateOnAxis(J5,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(by.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?JS.copy(e):JS.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),hx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?by.lookAt(hx,JS,this.up):by.lookAt(JS,hx,this.up),this.quaternion.setFromRotationMatrix(by),s&&(by.extractRotation(s.matrixWorld),NC.setFromRotationMatrix(by),this.quaternion.premultiply(NC.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Mye)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(eG)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(eG)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),by.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),by.multiply(e.parent.matrixWorld)),e.applyMatrix4(by),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const l=this.children[r].getObjectByProperty(e,n);if(void 0!==l)return l}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hx,e,Eye),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hx,Tye,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===e)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];!0===u.matrixWorldAutoUpdate&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(u,p){return void 0===u[p.uuid]&&(u[p.uuid]=p.toJSON(e)),p.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(void 0!==u&&void 0!==u.shapes){const p=u.shapes;if(Array.isArray(p))for(let v=0,w=p.length;v<w;v++)o(e.shapes,p[v]);else o(e.shapes,p)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const u=[];for(let p=0,v=this.material.length;p<v;p++)u.push(o(e.materials,this.material[p]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++)s.animations.push(o(e.animations,this.animations[u]))}if(n){const u=l(e.geometries),p=l(e.materials),v=l(e.textures),w=l(e.images),I=l(e.shapes),T=l(e.skeletons),k=l(e.animations),W=l(e.nodes);u.length>0&&(r.geometries=u),p.length>0&&(r.materials=p),v.length>0&&(r.textures=v),w.length>0&&(r.images=w),I.length>0&&(r.shapes=I),T.length>0&&(r.skeletons=T),k.length>0&&(r.animations=k),W.length>0&&(r.nodes=W)}return r.object=s,r;function l(u){const p=[];for(const v in u){const w=u[v];delete w.metadata,p.push(w)}return p}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DefaultUp=new en(0,1,0),i.DefaultMatrixAutoUpdate=!0,i.DefaultMatrixWorldAutoUpdate=!0,i})();const bm=new en,Cy=new en,fR=new en,wy=new en,BC=new en,zC=new en,tG=new en,pR=new en,gR=new en,mR=new en;class Cm{constructor(t=new en,e=new en,n=new en){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),bm.subVectors(t,e),r.cross(bm);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){bm.subVectors(r,e),Cy.subVectors(n,e),fR.subVectors(t,e);const o=bm.dot(bm),l=bm.dot(Cy),u=bm.dot(fR),p=Cy.dot(Cy),v=Cy.dot(fR),w=o*p-l*l;if(0===w)return s.set(-2,-1,-1);const I=1/w,T=(p*u-l*v)*I,k=(o*v-l*u)*I;return s.set(1-T-k,k,T)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,wy),wy.x>=0&&wy.y>=0&&wy.x+wy.y<=1}static getUV(t,e,n,r,s,o,l,u){return this.getBarycoord(t,e,n,r,wy),u.set(0,0),u.addScaledVector(s,wy.x),u.addScaledVector(o,wy.y),u.addScaledVector(l,wy.z),u}static isFrontFacing(t,e,n,r){return bm.subVectors(n,e),Cy.subVectors(t,e),bm.cross(Cy).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return bm.subVectors(this.c,this.b),Cy.subVectors(this.a,this.b),.5*bm.cross(Cy).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Cm.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Cm.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,s){return Cm.getUV(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return Cm.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Cm.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,l;BC.subVectors(r,n),zC.subVectors(s,n),pR.subVectors(t,n);const u=BC.dot(pR),p=zC.dot(pR);if(u<=0&&p<=0)return e.copy(n);gR.subVectors(t,r);const v=BC.dot(gR),w=zC.dot(gR);if(v>=0&&w<=v)return e.copy(r);const I=u*w-v*p;if(I<=0&&u>=0&&v<=0)return o=u/(u-v),e.copy(n).addScaledVector(BC,o);mR.subVectors(t,s);const T=BC.dot(mR),k=zC.dot(mR);if(k>=0&&T<=k)return e.copy(s);const W=T*p-u*k;if(W<=0&&p>=0&&k<=0)return l=p/(p-k),e.copy(n).addScaledVector(zC,l);const K=v*k-T*w;if(K<=0&&w-v>=0&&T-k>=0)return tG.subVectors(s,r),l=(w-v)/(w-v+(T-k)),e.copy(r).addScaledVector(tG,l);const he=1/(K+W+I);return o=W*he,l=I*he,e.copy(n).addScaledVector(BC,o).addScaledVector(zC,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Dye=0;class X0 extends TC{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Dye++}),this.uuid=Rp(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Y0 extends X0{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ns(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ru=new en,eE=new Xi;class wh{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)eE.fromBufferAttribute(this,e),eE.applyMatrix3(t),this.setXY(e,eE.x,eE.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Ru.fromBufferAttribute(this,e),Ru.applyMatrix3(t),this.setXYZ(e,Ru.x,Ru.y,Ru.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Ru.fromBufferAttribute(this,e),Ru.applyMatrix4(t),this.setXYZ(e,Ru.x,Ru.y,Ru.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Ru.fromBufferAttribute(this,e),Ru.applyNormalMatrix(t),this.setXYZ(e,Ru.x,Ru.y,Ru.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Ru.fromBufferAttribute(this,e),Ru.transformDirection(t),this.setXYZ(e,Ru.x,Ru.y,Ru.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=vy(e,this.array)),e}setX(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=vy(e,this.array)),e}setY(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=vy(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=vy(e,this.array)),e}setW(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Cl(e,this.array),n=Cl(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=Cl(e,this.array),n=Cl(n,this.array),r=Cl(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=Cl(e,this.array),n=Cl(n,this.array),r=Cl(r,this.array),s=Cl(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class nG extends wh{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class iG extends wh{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class us extends wh{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Lye=0;const Ag=new vo,vR=new Hf,VC=new en,Fp=new C_,dx=new C_,Ah=new en;class Ho extends TC{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Lye++}),this.uuid=Rp(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(G5(t)?iG:nG)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Pp).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ag.makeRotationFromQuaternion(t),this.applyMatrix4(Ag),this}rotateX(t){return Ag.makeRotationX(t),this.applyMatrix4(Ag),this}rotateY(t){return Ag.makeRotationY(t),this.applyMatrix4(Ag),this}rotateZ(t){return Ag.makeRotationZ(t),this.applyMatrix4(Ag),this}translate(t,e,n){return Ag.makeTranslation(t,e,n),this.applyMatrix4(Ag),this}scale(t,e,n){return Ag.makeScale(t,e,n),this.applyMatrix4(Ag),this}lookAt(t){return vR.lookAt(t),vR.updateMatrix(),this.applyMatrix4(vR.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(VC).negate(),this.translate(VC.x,VC.y,VC.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new us(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new C_);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new en(-1/0,-1/0,-1/0),new en(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)Fp.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(Ah.addVectors(this.boundingBox.min,Fp.min),this.boundingBox.expandByPoint(Ah),Ah.addVectors(this.boundingBox.max,Fp.max),this.boundingBox.expandByPoint(Ah)):(this.boundingBox.expandByPoint(Fp.min),this.boundingBox.expandByPoint(Fp.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new OC);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new en,1/0);if(t){const n=this.boundingSphere.center;if(Fp.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)dx.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(Ah.addVectors(Fp.min,dx.min),Fp.expandByPoint(Ah),Ah.addVectors(Fp.max,dx.max),Fp.expandByPoint(Ah)):(Fp.expandByPoint(dx.min),Fp.expandByPoint(dx.max));Fp.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)Ah.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(Ah));if(e)for(let s=0,o=e.length;s<o;s++){const l=e[s],u=this.morphTargetsRelative;for(let p=0,v=l.count;p<v;p++)Ah.fromBufferAttribute(l,p),u&&(VC.fromBufferAttribute(t,p),Ah.add(VC)),r=Math.max(r,n.distanceToSquared(Ah))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,l=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new wh(new Float32Array(4*l),4));const u=this.getAttribute("tangent").array,p=[],v=[];for(let cn=0;cn<l;cn++)p[cn]=new en,v[cn]=new en;const w=new en,I=new en,T=new en,k=new Xi,W=new Xi,K=new Xi,he=new en,Te=new en;function Ae(cn,Gn,ii){w.fromArray(r,3*cn),I.fromArray(r,3*Gn),T.fromArray(r,3*ii),k.fromArray(o,2*cn),W.fromArray(o,2*Gn),K.fromArray(o,2*ii),I.sub(w),T.sub(w),W.sub(k),K.sub(k);const jn=1/(W.x*K.y-K.x*W.y);!isFinite(jn)||(he.copy(I).multiplyScalar(K.y).addScaledVector(T,-W.y).multiplyScalar(jn),Te.copy(T).multiplyScalar(W.x).addScaledVector(I,-K.x).multiplyScalar(jn),p[cn].add(he),p[Gn].add(he),p[ii].add(he),v[cn].add(Te),v[Gn].add(Te),v[ii].add(Te))}let Le=this.groups;0===Le.length&&(Le=[{start:0,count:n.length}]);for(let cn=0,Gn=Le.length;cn<Gn;++cn){const ii=Le[cn],jn=ii.start;for(let Un=jn,In=jn+ii.count;Un<In;Un+=3)Ae(n[Un+0],n[Un+1],n[Un+2])}const tt=new en,_t=new en,Ut=new en,at=new en;function Lt(cn){Ut.fromArray(s,3*cn),at.copy(Ut);const Gn=p[cn];tt.copy(Gn),tt.sub(Ut.multiplyScalar(Ut.dot(Gn))).normalize(),_t.crossVectors(at,Gn);const jn=_t.dot(v[cn])<0?-1:1;u[4*cn]=tt.x,u[4*cn+1]=tt.y,u[4*cn+2]=tt.z,u[4*cn+3]=jn}for(let cn=0,Gn=Le.length;cn<Gn;++cn){const ii=Le[cn],jn=ii.start;for(let Un=jn,In=jn+ii.count;Un<In;Un+=3)Lt(n[Un+0]),Lt(n[Un+1]),Lt(n[Un+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new wh(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let I=0,T=n.count;I<T;I++)n.setXYZ(I,0,0,0);const r=new en,s=new en,o=new en,l=new en,u=new en,p=new en,v=new en,w=new en;if(t)for(let I=0,T=t.count;I<T;I+=3){const k=t.getX(I+0),W=t.getX(I+1),K=t.getX(I+2);r.fromBufferAttribute(e,k),s.fromBufferAttribute(e,W),o.fromBufferAttribute(e,K),v.subVectors(o,s),w.subVectors(r,s),v.cross(w),l.fromBufferAttribute(n,k),u.fromBufferAttribute(n,W),p.fromBufferAttribute(n,K),l.add(v),u.add(v),p.add(v),n.setXYZ(k,l.x,l.y,l.z),n.setXYZ(W,u.x,u.y,u.z),n.setXYZ(K,p.x,p.y,p.z)}else for(let I=0,T=e.count;I<T;I+=3)r.fromBufferAttribute(e,I+0),s.fromBufferAttribute(e,I+1),o.fromBufferAttribute(e,I+2),v.subVectors(o,s),w.subVectors(r,s),v.cross(w),n.setXYZ(I+0,v.x,v.y,v.z),n.setXYZ(I+1,v.x,v.y,v.z),n.setXYZ(I+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Ah.fromBufferAttribute(t,e),Ah.normalize(),t.setXYZ(e,Ah.x,Ah.y,Ah.z)}toNonIndexed(){function t(l,u){const p=l.array,v=l.itemSize,w=l.normalized,I=new p.constructor(u.length*v);let T=0,k=0;for(let W=0,K=u.length;W<K;W++){T=l.isInterleavedBufferAttribute?u[W]*l.data.stride+l.offset:u[W]*v;for(let he=0;he<v;he++)I[k++]=p[T++]}return new wh(I,v,w)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ho,n=this.index.array,r=this.attributes;for(const l in r){const p=t(r[l],n);e.setAttribute(l,p)}const s=this.morphAttributes;for(const l in s){const u=[],p=s[l];for(let v=0,w=p.length;v<w;v++){const T=t(p[v],n);u.push(T)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const p=o[l];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const u=this.parameters;for(const p in u)void 0!==u[p]&&(t[p]=u[p]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const u in n)t.data.attributes[u]=n[u].toJSON(t.data);const r={};let s=!1;for(const u in this.morphAttributes){const p=this.morphAttributes[u],v=[];for(let w=0,I=p.length;w<I;w++)v.push(p[w].toJSON(t.data));v.length>0&&(r[u]=v,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const p in r)this.setAttribute(p,r[p].clone(e));const s=t.morphAttributes;for(const p in s){const v=[],w=s[p];for(let I=0,T=w.length;I<T;I++)v.push(w[I].clone(e));this.morphAttributes[p]=v}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let p=0,v=o.length;p<v;p++){const w=o[p];this.addGroup(w.start,w.count,w.materialIndex)}const l=t.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=t.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const rG=new vo,UC=new ZS,yR=new OC,S_=new en,E_=new en,T_=new en,_R=new en,bR=new en,CR=new en,tE=new en,nE=new en,iE=new en,rE=new Xi,sE=new Xi,oE=new Xi,wR=new en,aE=new en;class Ld extends Hf{constructor(t=new Ho,e=new Y0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(t,e){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),yR.copy(n.boundingSphere),yR.applyMatrix4(s),!1===t.ray.intersectsSphere(yR))||(rG.copy(s).invert(),UC.copy(t.ray).applyMatrix4(rG),null!==n.boundingBox&&!1===UC.intersectsBox(n.boundingBox)))return;let o;const l=n.index,u=n.attributes.position,p=n.morphAttributes.position,v=n.morphTargetsRelative,w=n.attributes.uv,I=n.attributes.uv2,T=n.groups,k=n.drawRange;if(null!==l)if(Array.isArray(r))for(let W=0,K=T.length;W<K;W++){const he=T[W],Te=r[he.materialIndex];for(let tt=Math.max(he.start,k.start),_t=Math.min(l.count,Math.min(he.start+he.count,k.start+k.count));tt<_t;tt+=3){const Ut=l.getX(tt),at=l.getX(tt+1),Lt=l.getX(tt+2);o=lE(this,Te,t,UC,u,p,v,w,I,Ut,at,Lt),o&&(o.faceIndex=Math.floor(tt/3),o.face.materialIndex=he.materialIndex,e.push(o))}}else for(let he=Math.max(0,k.start),Te=Math.min(l.count,k.start+k.count);he<Te;he+=3){const Ae=l.getX(he),Le=l.getX(he+1),tt=l.getX(he+2);o=lE(this,r,t,UC,u,p,v,w,I,Ae,Le,tt),o&&(o.faceIndex=Math.floor(he/3),e.push(o))}else if(void 0!==u)if(Array.isArray(r))for(let W=0,K=T.length;W<K;W++){const he=T[W],Te=r[he.materialIndex];for(let tt=Math.max(he.start,k.start),_t=Math.min(u.count,Math.min(he.start+he.count,k.start+k.count));tt<_t;tt+=3)o=lE(this,Te,t,UC,u,p,v,w,I,tt,tt+1,tt+2),o&&(o.faceIndex=Math.floor(tt/3),o.face.materialIndex=he.materialIndex,e.push(o))}else for(let he=Math.max(0,k.start),Te=Math.min(u.count,k.start+k.count);he<Te;he+=3)o=lE(this,r,t,UC,u,p,v,w,I,he,he+1,he+2),o&&(o.faceIndex=Math.floor(he/3),e.push(o))}}function lE(i,t,e,n,r,s,o,l,u,p,v,w){S_.fromBufferAttribute(r,p),E_.fromBufferAttribute(r,v),T_.fromBufferAttribute(r,w);const I=i.morphTargetInfluences;if(s&&I){tE.set(0,0,0),nE.set(0,0,0),iE.set(0,0,0);for(let k=0,W=s.length;k<W;k++){const K=I[k],he=s[k];0!==K&&(_R.fromBufferAttribute(he,p),bR.fromBufferAttribute(he,v),CR.fromBufferAttribute(he,w),o?(tE.addScaledVector(_R,K),nE.addScaledVector(bR,K),iE.addScaledVector(CR,K)):(tE.addScaledVector(_R.sub(S_),K),nE.addScaledVector(bR.sub(E_),K),iE.addScaledVector(CR.sub(T_),K)))}S_.add(tE),E_.add(nE),T_.add(iE)}i.isSkinnedMesh&&(i.boneTransform(p,S_),i.boneTransform(v,E_),i.boneTransform(w,T_));const T=function Rye(i,t,e,n,r,s,o,l){let u;if(u=1===t.side?n.intersectTriangle(o,s,r,!0,l):n.intersectTriangle(r,s,o,2!==t.side,l),null===u)return null;aE.copy(l),aE.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(aE);return p<e.near||p>e.far?null:{distance:p,point:aE.clone(),object:i}}(i,t,e,n,S_,E_,T_,wR);if(T){l&&(rE.fromBufferAttribute(l,p),sE.fromBufferAttribute(l,v),oE.fromBufferAttribute(l,w),T.uv=Cm.getUV(wR,S_,E_,T_,rE,sE,oE,new Xi)),u&&(rE.fromBufferAttribute(u,p),sE.fromBufferAttribute(u,v),oE.fromBufferAttribute(u,w),T.uv2=Cm.getUV(wR,S_,E_,T_,rE,sE,oE,new Xi));const k={a:p,b:v,c:w,normal:new en,materialIndex:0};Cm.getNormal(S_,E_,T_,k.normal),T.face=k}return T}class M_ extends Ho{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],p=[],v=[],w=[];let I=0,T=0;function k(W,K,he,Te,Ae,Le,tt,_t,Ut,at,Lt){const cn=Le/Ut,Gn=tt/at,ii=Le/2,jn=tt/2,Mn=_t/2,Un=Ut+1,In=at+1;let Wn=0,zn=0;const Sn=new en;for(let Hn=0;Hn<In;Hn++){const Yi=Hn*Gn-jn;for(let Ti=0;Ti<Un;Ti++)Sn[W]=(Ti*cn-ii)*Te,Sn[K]=Yi*Ae,Sn[he]=Mn,p.push(Sn.x,Sn.y,Sn.z),Sn[W]=0,Sn[K]=0,Sn[he]=_t>0?1:-1,v.push(Sn.x,Sn.y,Sn.z),w.push(Ti/Ut),w.push(1-Hn/at),Wn+=1}for(let Hn=0;Hn<at;Hn++)for(let Yi=0;Yi<Ut;Yi++){const sr=I+Yi+Un*(Hn+1),fr=I+(Yi+1)+Un*(Hn+1),Es=I+(Yi+1)+Un*Hn;u.push(I+Yi+Un*Hn,sr,Es),u.push(sr,fr,Es),zn+=6}l.addGroup(T,zn,Lt),T+=zn,I+=Wn}k("z","y","x",-1,-1,n,e,t,o,s,0),k("z","y","x",1,-1,n,e,-t,o,s,1),k("x","z","y",1,1,t,n,e,r,o,2),k("x","z","y",1,-1,t,n,-e,r,o,3),k("x","y","z",1,-1,t,e,n,r,s,4),k("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new us(p,3)),this.setAttribute("normal",new us(v,3)),this.setAttribute("uv",new us(w,2))}static fromJSON(t){return new M_(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function HC(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];t[e][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function uf(i){const t={};for(let e=0;e<i.length;e++){const n=HC(i[e]);for(const r in n)t[r]=n[r]}return t}const kye={clone:HC,merge:uf};class D_ extends X0{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=HC(t.uniforms),this.uniformsGroups=function Pye(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class AR extends Hf{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new vo,this.projectionMatrix=new vo,this.projectionMatrixInverse=new vo}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class td extends AR{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*ox*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*H0*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*ox*Math.atan(Math.tan(.5*H0*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*H0*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const u=o.fullWidth,p=o.fullHeight;s+=o.offsetX*r/u,e-=o.offsetY*n/p,r*=o.width/u,n*=o.height/p}const l=this.filmOffset;0!==l&&(s+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Nye extends Hf{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new td(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new en(1,0,0)),this.add(r);const s=new td(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new en(-1,0,0)),this.add(s);const o=new td(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new en(0,1,0)),this.add(o);const l=new td(90,1,t,e);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new en(0,-1,0)),this.add(l);const u=new td(90,1,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new en(0,0,1)),this.add(u);const p=new td(90,1,t,e);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new en(0,0,-1)),this.add(p)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,l,u,p]=this.children,v=t.getRenderTarget(),w=t.toneMapping,I=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const T=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,u),n.texture.generateMipmaps=T,t.setRenderTarget(n,5),t.render(e,p),t.setRenderTarget(v),t.toneMapping=w,t.xr.enabled=I,n.texture.needsPMREMUpdate=!0}}class cE extends b_{constructor(t,e,n,r,s,o,l,u,p,v){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,s,o,l,u,p,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Bye extends W0{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new cE([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Lu}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new M_(5,5,5),s=new D_({name:"CubemapFromEquirect",uniforms:HC(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new Ld(r,s),l=e.minFilter;return 1008===e.minFilter&&(e.minFilter=Lu),new Nye(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}const xR=new en,zye=new en,Vye=new Pp;class K0{constructor(t=new en(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=xR.subVectors(n,e).cross(zye.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(xR),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Vye.getNormalMatrix(t),r=this.coplanarPoint(xR).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const jC=new OC,uE=new en;class IR{constructor(t=new K0,e=new K0,n=new K0,r=new K0,s=new K0,o=new K0){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],s=n[1],o=n[2],l=n[3],u=n[4],p=n[5],v=n[6],w=n[7],I=n[8],T=n[9],k=n[10],W=n[11],K=n[12],he=n[13],Te=n[14],Ae=n[15];return e[0].setComponents(l-r,w-u,W-I,Ae-K).normalize(),e[1].setComponents(l+r,w+u,W+I,Ae+K).normalize(),e[2].setComponents(l+s,w+p,W+T,Ae+he).normalize(),e[3].setComponents(l-s,w-p,W-T,Ae-he).normalize(),e[4].setComponents(l-o,w-v,W-k,Ae-Te).normalize(),e[5].setComponents(l+o,w+v,W+k,Ae+Te).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),jC.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(jC)}intersectsSprite(t){return jC.center.set(0,0,0),jC.radius=.7071067811865476,jC.applyMatrix4(t.matrixWorld),this.intersectsSphere(jC)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(uE.x=r.normal.x>0?t.max.x:t.min.x,uE.y=r.normal.y>0?t.max.y:t.min.y,uE.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(uE)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function sG(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function Uye(i,t){const e=t.isWebGL2,n=new WeakMap;return{get:function o(p){return p.isInterleavedBufferAttribute&&(p=p.data),n.get(p)},remove:function l(p){p.isInterleavedBufferAttribute&&(p=p.data);const v=n.get(p);v&&(i.deleteBuffer(v.buffer),n.delete(p))},update:function u(p,v){if(p.isGLBufferAttribute){const I=n.get(p);return void((!I||I.version<p.version)&&n.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version}))}p.isInterleavedBufferAttribute&&(p=p.data);const w=n.get(p);void 0===w?n.set(p,function r(p,v){const w=p.array,I=p.usage,T=i.createBuffer();let k;if(i.bindBuffer(v,T),i.bufferData(v,w,I),p.onUploadCallback(),w instanceof Float32Array)k=5126;else if(w instanceof Uint16Array)if(p.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");k=5131}else k=5123;else if(w instanceof Int16Array)k=5122;else if(w instanceof Uint32Array)k=5125;else if(w instanceof Int32Array)k=5124;else if(w instanceof Int8Array)k=5120;else if(w instanceof Uint8Array)k=5121;else{if(!(w instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+w);k=5121}return{buffer:T,type:k,bytesPerElement:w.BYTES_PER_ELEMENT,version:p.version}}(p,v)):w.version<p.version&&(function s(p,v,w){const I=v.array,T=v.updateRange;i.bindBuffer(w,p),-1===T.count?i.bufferSubData(w,0,I):(e?i.bufferSubData(w,T.offset*I.BYTES_PER_ELEMENT,I,T.offset,T.count):i.bufferSubData(w,T.offset*I.BYTES_PER_ELEMENT,I.subarray(T.offset,T.offset+T.count)),T.count=-1)}(w.buffer,p,v),w.version=p.version)}}}class hE extends Ho{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,l=Math.floor(n),u=Math.floor(r),p=l+1,v=u+1,w=t/l,I=e/u,T=[],k=[],W=[],K=[];for(let he=0;he<v;he++){const Te=he*I-o;for(let Ae=0;Ae<p;Ae++)k.push(Ae*w-s,-Te,0),W.push(0,0,1),K.push(Ae/l),K.push(1-he/u)}for(let he=0;he<u;he++)for(let Te=0;Te<l;Te++){const Le=Te+p*(he+1),tt=Te+1+p*(he+1),_t=Te+1+p*he;T.push(Te+p*he,Le,_t),T.push(Le,tt,_t)}this.setIndex(T),this.setAttribute("position",new us(k,3)),this.setAttribute("normal",new us(W,3)),this.setAttribute("uv",new us(K,2))}static fromJSON(t){return new hE(t.width,t.height,t.widthSegments,t.heightSegments)}}const ko={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Mr={common:{diffuse:{value:new ns(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pp},uv2Transform:{value:new Pp},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xi(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ns(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ns(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pp}},sprite:{diffuse:{value:new ns(16777215)},opacity:{value:1},center:{value:new Xi(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pp}}},dv={basic:{uniforms:uf([Mr.common,Mr.specularmap,Mr.envmap,Mr.aomap,Mr.lightmap,Mr.fog]),vertexShader:ko.meshbasic_vert,fragmentShader:ko.meshbasic_frag},lambert:{uniforms:uf([Mr.common,Mr.specularmap,Mr.envmap,Mr.aomap,Mr.lightmap,Mr.emissivemap,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.fog,Mr.lights,{emissive:{value:new ns(0)}}]),vertexShader:ko.meshlambert_vert,fragmentShader:ko.meshlambert_frag},phong:{uniforms:uf([Mr.common,Mr.specularmap,Mr.envmap,Mr.aomap,Mr.lightmap,Mr.emissivemap,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.fog,Mr.lights,{emissive:{value:new ns(0)},specular:{value:new ns(1118481)},shininess:{value:30}}]),vertexShader:ko.meshphong_vert,fragmentShader:ko.meshphong_frag},standard:{uniforms:uf([Mr.common,Mr.envmap,Mr.aomap,Mr.lightmap,Mr.emissivemap,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.roughnessmap,Mr.metalnessmap,Mr.fog,Mr.lights,{emissive:{value:new ns(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ko.meshphysical_vert,fragmentShader:ko.meshphysical_frag},toon:{uniforms:uf([Mr.common,Mr.aomap,Mr.lightmap,Mr.emissivemap,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.gradientmap,Mr.fog,Mr.lights,{emissive:{value:new ns(0)}}]),vertexShader:ko.meshtoon_vert,fragmentShader:ko.meshtoon_frag},matcap:{uniforms:uf([Mr.common,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,Mr.fog,{matcap:{value:null}}]),vertexShader:ko.meshmatcap_vert,fragmentShader:ko.meshmatcap_frag},points:{uniforms:uf([Mr.points,Mr.fog]),vertexShader:ko.points_vert,fragmentShader:ko.points_frag},dashed:{uniforms:uf([Mr.common,Mr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ko.linedashed_vert,fragmentShader:ko.linedashed_frag},depth:{uniforms:uf([Mr.common,Mr.displacementmap]),vertexShader:ko.depth_vert,fragmentShader:ko.depth_frag},normal:{uniforms:uf([Mr.common,Mr.bumpmap,Mr.normalmap,Mr.displacementmap,{opacity:{value:1}}]),vertexShader:ko.meshnormal_vert,fragmentShader:ko.meshnormal_frag},sprite:{uniforms:uf([Mr.sprite,Mr.fog]),vertexShader:ko.sprite_vert,fragmentShader:ko.sprite_frag},background:{uniforms:{uvTransform:{value:new Pp},t2D:{value:null}},vertexShader:ko.background_vert,fragmentShader:ko.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:ko.backgroundCube_vert,fragmentShader:ko.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ko.cube_vert,fragmentShader:ko.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ko.equirect_vert,fragmentShader:ko.equirect_frag},distanceRGBA:{uniforms:uf([Mr.common,Mr.displacementmap,{referencePosition:{value:new en},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ko.distanceRGBA_vert,fragmentShader:ko.distanceRGBA_frag},shadow:{uniforms:uf([Mr.lights,Mr.fog,{color:{value:new ns(0)},opacity:{value:1}}]),vertexShader:ko.shadow_vert,fragmentShader:ko.shadow_frag}};function V0e(i,t,e,n,r,s,o){const l=new ns(0);let p,v,u=!0===s?0:1,w=null,I=0,T=null;function W(K,he){n.buffers.color.setClear(K.r,K.g,K.b,he,o)}return{getClearColor:function(){return l},setClearColor:function(K,he=1){l.set(K),u=he,W(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(K){u=K,W(l,u)},render:function k(K,he){let Te=!1,Ae=!0===he.isScene?he.background:null;Ae&&Ae.isTexture&&(Ae=(he.backgroundBlurriness>0?e:t).get(Ae));const Le=i.xr,tt=Le.getSession&&Le.getSession();tt&&"additive"===tt.environmentBlendMode&&(Ae=null),null===Ae?W(l,u):Ae&&Ae.isColor&&(W(Ae,1),Te=!0),(i.autoClear||Te)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),Ae&&(Ae.isCubeTexture||306===Ae.mapping)?(void 0===v&&(v=new Ld(new M_(1,1,1),new D_({name:"BackgroundCubeMaterial",uniforms:HC(dv.backgroundCube.uniforms),vertexShader:dv.backgroundCube.vertexShader,fragmentShader:dv.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(_t,Ut,at){this.matrixWorld.copyPosition(at.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(v)),v.material.uniforms.envMap.value=Ae,v.material.uniforms.flipEnvMap.value=Ae.isCubeTexture&&!1===Ae.isRenderTargetTexture?-1:1,v.material.uniforms.backgroundBlurriness.value=he.backgroundBlurriness,(w!==Ae||I!==Ae.version||T!==i.toneMapping)&&(v.material.needsUpdate=!0,w=Ae,I=Ae.version,T=i.toneMapping),v.layers.enableAll(),K.unshift(v,v.geometry,v.material,0,0,null)):Ae&&Ae.isTexture&&(void 0===p&&(p=new Ld(new hE(2,2),new D_({name:"BackgroundMaterial",uniforms:HC(dv.background.uniforms),vertexShader:dv.background.vertexShader,fragmentShader:dv.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=Ae,!0===Ae.matrixAutoUpdate&&Ae.updateMatrix(),p.material.uniforms.uvTransform.value.copy(Ae.matrix),(w!==Ae||I!==Ae.version||T!==i.toneMapping)&&(p.material.needsUpdate=!0,w=Ae,I=Ae.version,T=i.toneMapping),p.layers.enableAll(),K.unshift(p,p.geometry,p.material,0,0,null))}}}function U0e(i,t,e,n){const r=i.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,l={},u=K(null);let p=u,v=!1;function T(Mn){return n.isWebGL2?i.bindVertexArray(Mn):s.bindVertexArrayOES(Mn)}function k(Mn){return n.isWebGL2?i.deleteVertexArray(Mn):s.deleteVertexArrayOES(Mn)}function K(Mn){const Un=[],In=[],Wn=[];for(let zn=0;zn<r;zn++)Un[zn]=0,In[zn]=0,Wn[zn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Un,enabledAttributes:In,attributeDivisors:Wn,object:Mn,attributes:{},index:null}}function Ae(){const Mn=p.newAttributes;for(let Un=0,In=Mn.length;Un<In;Un++)Mn[Un]=0}function Le(Mn){tt(Mn,0)}function tt(Mn,Un){const Wn=p.enabledAttributes,zn=p.attributeDivisors;p.newAttributes[Mn]=1,0===Wn[Mn]&&(i.enableVertexAttribArray(Mn),Wn[Mn]=1),zn[Mn]!==Un&&((n.isWebGL2?i:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Mn,Un),zn[Mn]=Un)}function _t(){const Mn=p.newAttributes,Un=p.enabledAttributes;for(let In=0,Wn=Un.length;In<Wn;In++)Un[In]!==Mn[In]&&(i.disableVertexAttribArray(In),Un[In]=0)}function Ut(Mn,Un,In,Wn,zn,Sn){!0!==n.isWebGL2||5124!==In&&5125!==In?i.vertexAttribPointer(Mn,Un,In,Wn,zn,Sn):i.vertexAttribIPointer(Mn,Un,In,zn,Sn)}function ii(){jn(),v=!0,p!==u&&(p=u,T(p.object))}function jn(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function w(Mn,Un,In,Wn,zn){let Sn=!1;if(o){const Hn=function W(Mn,Un,In){const Wn=!0===In.wireframe;let zn=l[Mn.id];void 0===zn&&(zn={},l[Mn.id]=zn);let Sn=zn[Un.id];void 0===Sn&&(Sn={},zn[Un.id]=Sn);let Hn=Sn[Wn];return void 0===Hn&&(Hn=K(function I(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),Sn[Wn]=Hn),Hn}(Wn,In,Un);p!==Hn&&(p=Hn,T(p.object)),Sn=function he(Mn,Un,In,Wn){const zn=p.attributes,Sn=Un.attributes;let Hn=0;const Yi=In.getAttributes();for(const Ti in Yi)if(Yi[Ti].location>=0){const fr=zn[Ti];let Es=Sn[Ti];if(void 0===Es&&("instanceMatrix"===Ti&&Mn.instanceMatrix&&(Es=Mn.instanceMatrix),"instanceColor"===Ti&&Mn.instanceColor&&(Es=Mn.instanceColor)),void 0===fr||fr.attribute!==Es||Es&&fr.data!==Es.data)return!0;Hn++}return p.attributesNum!==Hn||p.index!==Wn}(Mn,Wn,In,zn),Sn&&function Te(Mn,Un,In,Wn){const zn={},Sn=Un.attributes;let Hn=0;const Yi=In.getAttributes();for(const Ti in Yi)if(Yi[Ti].location>=0){let fr=Sn[Ti];void 0===fr&&("instanceMatrix"===Ti&&Mn.instanceMatrix&&(fr=Mn.instanceMatrix),"instanceColor"===Ti&&Mn.instanceColor&&(fr=Mn.instanceColor));const Es={};Es.attribute=fr,fr&&fr.data&&(Es.data=fr.data),zn[Ti]=Es,Hn++}p.attributes=zn,p.attributesNum=Hn,p.index=Wn}(Mn,Wn,In,zn)}else{const Hn=!0===Un.wireframe;(p.geometry!==Wn.id||p.program!==In.id||p.wireframe!==Hn)&&(p.geometry=Wn.id,p.program=In.id,p.wireframe=Hn,Sn=!0)}null!==zn&&e.update(zn,34963),(Sn||v)&&(v=!1,function at(Mn,Un,In,Wn){if(!1===n.isWebGL2&&(Mn.isInstancedMesh||Wn.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;Ae();const zn=Wn.attributes,Sn=In.getAttributes(),Hn=Un.defaultAttributeValues;for(const Yi in Sn){const Ti=Sn[Yi];if(Ti.location>=0){let sr=zn[Yi];if(void 0===sr&&("instanceMatrix"===Yi&&Mn.instanceMatrix&&(sr=Mn.instanceMatrix),"instanceColor"===Yi&&Mn.instanceColor&&(sr=Mn.instanceColor)),void 0!==sr){const fr=sr.normalized,Es=sr.itemSize,Li=e.get(sr);if(void 0===Li)continue;const ws=Li.buffer,vs=Li.type,ys=Li.bytesPerElement;if(sr.isInterleavedBufferAttribute){const Pr=sr.data,Io=Pr.stride,Gi=sr.offset;if(Pr.isInstancedInterleavedBuffer){for(let Bi=0;Bi<Ti.locationSize;Bi++)tt(Ti.location+Bi,Pr.meshPerAttribute);!0!==Mn.isInstancedMesh&&void 0===Wn._maxInstanceCount&&(Wn._maxInstanceCount=Pr.meshPerAttribute*Pr.count)}else for(let Bi=0;Bi<Ti.locationSize;Bi++)Le(Ti.location+Bi);i.bindBuffer(34962,ws);for(let Bi=0;Bi<Ti.locationSize;Bi++)Ut(Ti.location+Bi,Es/Ti.locationSize,vs,fr,Io*ys,(Gi+Es/Ti.locationSize*Bi)*ys)}else{if(sr.isInstancedBufferAttribute){for(let Pr=0;Pr<Ti.locationSize;Pr++)tt(Ti.location+Pr,sr.meshPerAttribute);!0!==Mn.isInstancedMesh&&void 0===Wn._maxInstanceCount&&(Wn._maxInstanceCount=sr.meshPerAttribute*sr.count)}else for(let Pr=0;Pr<Ti.locationSize;Pr++)Le(Ti.location+Pr);i.bindBuffer(34962,ws);for(let Pr=0;Pr<Ti.locationSize;Pr++)Ut(Ti.location+Pr,Es/Ti.locationSize,vs,fr,Es*ys,Es/Ti.locationSize*Pr*ys)}}else if(void 0!==Hn){const fr=Hn[Yi];if(void 0!==fr)switch(fr.length){case 2:i.vertexAttrib2fv(Ti.location,fr);break;case 3:i.vertexAttrib3fv(Ti.location,fr);break;case 4:i.vertexAttrib4fv(Ti.location,fr);break;default:i.vertexAttrib1fv(Ti.location,fr)}}}}_t()}(Mn,Un,In,Wn),null!==zn&&i.bindBuffer(34963,e.get(zn).buffer))},reset:ii,resetDefaultState:jn,dispose:function Lt(){ii();for(const Mn in l){const Un=l[Mn];for(const In in Un){const Wn=Un[In];for(const zn in Wn)k(Wn[zn].object),delete Wn[zn];delete Un[In]}delete l[Mn]}},releaseStatesOfGeometry:function cn(Mn){if(void 0===l[Mn.id])return;const Un=l[Mn.id];for(const In in Un){const Wn=Un[In];for(const zn in Wn)k(Wn[zn].object),delete Wn[zn];delete Un[In]}delete l[Mn.id]},releaseStatesOfProgram:function Gn(Mn){for(const Un in l){const In=l[Un];if(void 0===In[Mn.id])continue;const Wn=In[Mn.id];for(const zn in Wn)k(Wn[zn].object),delete Wn[zn];delete In[Mn.id]}},initAttributes:Ae,enableAttribute:Le,disableUnusedAttributes:_t}}function H0e(i,t,e,n){const r=n.isWebGL2;let s;this.setMode=function o(p){s=p},this.render=function l(p,v){i.drawArrays(s,p,v),e.update(v,s,1)},this.renderInstances=function u(p,v,w){if(0===w)return;let I,T;if(r)I=i,T="drawArraysInstanced";else if(I=t.get("ANGLE_instanced_arrays"),T="drawArraysInstancedANGLE",null===I)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");I[T](s,p,v,w),e.update(v,s,w)}}function G0e(i,t,e){let n;function s(Ut){if("highp"===Ut){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Ut="mediump"}return"mediump"===Ut&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let l=void 0!==e.precision?e.precision:"highp";const u=s(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const p=o||t.has("WEBGL_draw_buffers"),v=!0===e.logarithmicDepthBuffer,w=i.getParameter(34930),I=i.getParameter(35660),T=i.getParameter(3379),k=i.getParameter(34076),W=i.getParameter(34921),K=i.getParameter(36347),he=i.getParameter(36348),Te=i.getParameter(36349),Ae=I>0,Le=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:p,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const Ut=t.get("EXT_texture_filter_anisotropic");n=i.getParameter(Ut.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:l,logarithmicDepthBuffer:v,maxTextures:w,maxVertexTextures:I,maxTextureSize:T,maxCubemapSize:k,maxAttributes:W,maxVertexUniforms:K,maxVaryings:he,maxFragmentUniforms:Te,vertexTextures:Ae,floatFragmentTextures:Le,floatVertexTextures:Ae&&Le,maxSamples:o?i.getParameter(36183):0}}function W0e(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new K0,l=new Pp,u={value:null,needsUpdate:!1};function p(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function v(w,I,T,k){const W=null!==w?w.length:0;let K=null;if(0!==W){if(K=u.value,!0!==k||null===K){const he=T+4*W,Te=I.matrixWorldInverse;l.getNormalMatrix(Te),(null===K||K.length<he)&&(K=new Float32Array(he));for(let Ae=0,Le=T;Ae!==W;++Ae,Le+=4)o.copy(w[Ae]).applyMatrix4(Te,l),o.normal.toArray(K,Le),K[Le+3]=o.constant}u.value=K,u.needsUpdate=!0}return t.numPlanes=W,t.numIntersection=0,K}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(w,I,T){const k=0!==w.length||I||0!==n||r;return r=I,e=v(w,T,0),n=w.length,k},this.beginShadows=function(){s=!0,v(null)},this.endShadows=function(){s=!1,p()},this.setState=function(w,I,T){const k=w.clippingPlanes,W=w.clipIntersection,K=w.clipShadows,he=i.get(w);if(!r||null===k||0===k.length||s&&!K)s?v(null):p();else{const Te=s?0:n,Ae=4*Te;let Le=he.clippingState||null;u.value=Le,Le=v(k,I,Ae,T);for(let tt=0;tt!==Ae;++tt)Le[tt]=e[tt];he.clippingState=Le,this.numIntersection=W?this.numPlanes:0,this.numPlanes+=Te}}}function j0e(i){let t=new WeakMap;function e(o,l){return 303===l?o.mapping=301:304===l&&(o.mapping=302),o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const u=t.get(l);void 0!==u&&(t.delete(l),u.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const l=o.mapping;if(303===l||304===l){if(t.has(o))return e(t.get(o).texture,o.mapping);{const u=o.image;if(u&&u.height>0){const p=new Bye(u.height/2);return p.fromEquirectangularTexture(i,o),t.set(o,p),o.addEventListener("dispose",r),e(p.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}dv.physical={uniforms:uf([dv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Xi(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ns(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Xi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ns(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ns(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ko.meshphysical_vert,fragmentShader:ko.meshphysical_frag};class SR extends AR{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,l=r+e,u=r-e;if(null!==this.view&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,o=s+p*this.view.width,l-=v*this.view.offsetY,u=l-v*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const oG=[.125,.215,.35,.446,.526,.582],ER=new SR,aG=new ns;let TR=null;const Q0=(1+Math.sqrt(5))/2,qC=1/Q0,lG=[new en(1,1,1),new en(-1,1,1),new en(1,1,-1),new en(-1,1,-1),new en(0,Q0,qC),new en(0,Q0,-qC),new en(qC,0,Q0),new en(-qC,0,Q0),new en(Q0,qC,0),new en(-Q0,qC,0)];class cG{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){TR=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=dG(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=hG(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(TR),t.scissorTest=!1,dE(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),TR=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Lu,minFilter:Lu,generateMipmaps:!1,type:sx,format:wg,encoding:z0,depthBuffer:!1},r=uG(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=uG(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function $0e(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+oG.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);e.push(l);let u=1/l;o>i-4?u=oG[o-i+4-1]:0===o&&(u=0),n.push(u);const p=1/(l-2),v=-p,w=1+p,I=[v,v,w,v,w,w,v,v,w,w,v,w],T=6,k=6,W=3,K=2,he=1,Te=new Float32Array(W*k*T),Ae=new Float32Array(K*k*T),Le=new Float32Array(he*k*T);for(let _t=0;_t<T;_t++){const Ut=_t%3*2/3-1,at=_t>2?0:-1;Te.set([Ut,at,0,Ut+2/3,at,0,Ut+2/3,at+1,0,Ut,at,0,Ut+2/3,at+1,0,Ut,at+1,0],W*k*_t),Ae.set(I,K*k*_t),Le.set([_t,_t,_t,_t,_t,_t],he*k*_t)}const tt=new Ho;tt.setAttribute("position",new wh(Te,W)),tt.setAttribute("uv",new wh(Ae,K)),tt.setAttribute("faceIndex",new wh(Le,he)),t.push(tt),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function q0e(i,t,e){const n=new Float32Array(20),r=new en(0,1,0);return new D_({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Ld(this._lodPlanes[0],t);this._renderer.compile(e,ER)}_sceneToCubeUV(t,e,n,r){const l=new td(90,1,e,n),u=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],v=this._renderer,w=v.autoClear,I=v.toneMapping;v.getClearColor(aG),v.toneMapping=0,v.autoClear=!1;const T=new Y0({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),k=new Ld(new M_,T);let W=!1;const K=t.background;K?K.isColor&&(T.color.copy(K),t.background=null,W=!0):(T.color.copy(aG),W=!0);for(let he=0;he<6;he++){const Te=he%3;0===Te?(l.up.set(0,u[he],0),l.lookAt(p[he],0,0)):1===Te?(l.up.set(0,0,u[he]),l.lookAt(0,p[he],0)):(l.up.set(0,u[he],0),l.lookAt(0,0,p[he]));const Ae=this._cubeSize;dE(r,Te*Ae,he>2?Ae:0,Ae,Ae),v.setRenderTarget(r),W&&v.render(k,l),v.render(t,l)}k.geometry.dispose(),k.material.dispose(),v.toneMapping=I,v.autoClear=w,t.background=K}_textureToCubeUV(t,e){const n=this._renderer,r=301===t.mapping||302===t.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=dG()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=hG());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ld(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const u=this._cubeSize;dE(e,0,0,3*u,2*u),n.setRenderTarget(e),n.render(o,ER)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,lG[(r-1)%lG.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,l){const u=this._renderer,p=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const w=new Ld(this._lodPlanes[r],p),I=p.uniforms,T=this._sizeLods[n]-1,k=isFinite(s)?Math.PI/(2*T):2*Math.PI/39,W=s/k,K=isFinite(s)?1+Math.floor(3*W):20;K>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${K} samples when the maximum is set to 20`);const he=[];let Te=0;for(let Ut=0;Ut<20;++Ut){const at=Ut/W,Lt=Math.exp(-at*at/2);he.push(Lt),0===Ut?Te+=Lt:Ut<K&&(Te+=2*Lt)}for(let Ut=0;Ut<he.length;Ut++)he[Ut]=he[Ut]/Te;I.envMap.value=t.texture,I.samples.value=K,I.weights.value=he,I.latitudinal.value="latitudinal"===o,l&&(I.poleAxis.value=l);const{_lodMax:Ae}=this;I.dTheta.value=k,I.mipInt.value=Ae-n;const Le=this._sizeLods[r];dE(e,3*Le*(r>Ae-4?r-Ae+4:0),4*(this._cubeSize-Le),3*Le,2*Le),u.setRenderTarget(e),u.render(w,ER)}}function uG(i,t,e){const n=new W0(i,t,e);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function dE(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function hG(){return new D_({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function dG(){return new D_({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function X0e(i){let t=new WeakMap,e=null;function s(l){const u=l.target;u.removeEventListener("dispose",s);const p=t.get(u);void 0!==p&&(t.delete(u),p.dispose())}return{get:function n(l){if(l&&l.isTexture){const u=l.mapping,p=303===u||304===u,v=301===u||302===u;if(p||v){if(l.isRenderTargetTexture&&!0===l.needsPMREMUpdate){l.needsPMREMUpdate=!1;let w=t.get(l);return null===e&&(e=new cG(i)),w=p?e.fromEquirectangular(l,w):e.fromCubemap(l,w),t.set(l,w),w.texture}if(t.has(l))return t.get(l).texture;{const w=l.image;if(p&&w&&w.height>0||v&&w&&function r(l){let u=0;for(let v=0;v<6;v++)void 0!==l[v]&&u++;return 6===u}(w)){null===e&&(e=new cG(i));const I=p?e.fromEquirectangular(l):e.fromCubemap(l);return t.set(l,I),l.addEventListener("dispose",s),I.texture}return null}}}return l},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function Y0e(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function K0e(i,t,e,n){const r={},s=new WeakMap;function o(w){const I=w.target;null!==I.index&&t.remove(I.index);for(const k in I.attributes)t.remove(I.attributes[k]);I.removeEventListener("dispose",o),delete r[I.id];const T=s.get(I);T&&(t.remove(T),s.delete(I)),n.releaseStatesOfGeometry(I),!0===I.isInstancedBufferGeometry&&delete I._maxInstanceCount,e.memory.geometries--}function p(w){const I=[],T=w.index,k=w.attributes.position;let W=0;if(null!==T){const Te=T.array;W=T.version;for(let Ae=0,Le=Te.length;Ae<Le;Ae+=3){const tt=Te[Ae+0],_t=Te[Ae+1],Ut=Te[Ae+2];I.push(tt,_t,_t,Ut,Ut,tt)}}else{W=k.version;for(let Ae=0,Le=k.array.length/3-1;Ae<Le;Ae+=3){const tt=Ae+0,_t=Ae+1,Ut=Ae+2;I.push(tt,_t,_t,Ut,Ut,tt)}}const K=new(G5(I)?iG:nG)(I,1);K.version=W;const he=s.get(w);he&&t.remove(he),s.set(w,K)}return{get:function l(w,I){return!0===r[I.id]||(I.addEventListener("dispose",o),r[I.id]=!0,e.memory.geometries++),I},update:function u(w){const I=w.attributes;for(const k in I)t.update(I[k],34962);const T=w.morphAttributes;for(const k in T){const W=T[k];for(let K=0,he=W.length;K<he;K++)t.update(W[K],34962)}},getWireframeAttribute:function v(w){const I=s.get(w);if(I){const T=w.index;null!==T&&I.version<T.version&&p(w)}else p(w);return s.get(w)}}}function Z0e(i,t,e,n){const r=n.isWebGL2;let s,l,u;this.setMode=function o(I){s=I},this.setIndex=function p(I){l=I.type,u=I.bytesPerElement},this.render=function v(I,T){i.drawElements(s,T,l,I*u),e.update(T,s,1)},this.renderInstances=function w(I,T,k){if(0===k)return;let W,K;if(r)W=i,K="drawElementsInstanced";else if(W=t.get("ANGLE_instanced_arrays"),K="drawElementsInstancedANGLE",null===W)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");W[K](s,T,l,I*u,k),e.update(T,s,k)}}function Q0e(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,l){switch(e.calls++,o){case 4:e.triangles+=l*(s/3);break;case 1:e.lines+=l*(s/2);break;case 3:e.lines+=l*(s-1);break;case 2:e.lines+=l*s;break;case 0:e.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function J0e(i,t){return i[0]-t[0]}function ebe(i,t){return Math.abs(t[1])-Math.abs(i[1])}function tbe(i,t,e){const n={},r=new Float32Array(8),s=new WeakMap,o=new fl,l=[];for(let p=0;p<8;p++)l[p]=[p,0];return{update:function u(p,v,w,I){const T=p.morphTargetInfluences;if(!0===t.isWebGL2){const k=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,W=void 0!==k?k.length:0;let K=s.get(v);if(void 0===K||K.count!==W){let Un=function(){jn.dispose(),s.delete(v),v.removeEventListener("dispose",Un)};void 0!==K&&K.texture.dispose();const Ae=void 0!==v.morphAttributes.position,Le=void 0!==v.morphAttributes.normal,tt=void 0!==v.morphAttributes.color,_t=v.morphAttributes.position||[],Ut=v.morphAttributes.normal||[],at=v.morphAttributes.color||[];let Lt=0;!0===Ae&&(Lt=1),!0===Le&&(Lt=2),!0===tt&&(Lt=3);let cn=v.attributes.position.count*Lt,Gn=1;cn>t.maxTextureSize&&(Gn=Math.ceil(cn/t.maxTextureSize),cn=t.maxTextureSize);const ii=new Float32Array(cn*Gn*4*W),jn=new rR(ii,cn,Gn,W);jn.type=__,jn.needsUpdate=!0;const Mn=4*Lt;for(let In=0;In<W;In++){const Wn=_t[In],zn=Ut[In],Sn=at[In],Hn=cn*Gn*4*In;for(let Yi=0;Yi<Wn.count;Yi++){const Ti=Yi*Mn;!0===Ae&&(o.fromBufferAttribute(Wn,Yi),ii[Hn+Ti+0]=o.x,ii[Hn+Ti+1]=o.y,ii[Hn+Ti+2]=o.z,ii[Hn+Ti+3]=0),!0===Le&&(o.fromBufferAttribute(zn,Yi),ii[Hn+Ti+4]=o.x,ii[Hn+Ti+5]=o.y,ii[Hn+Ti+6]=o.z,ii[Hn+Ti+7]=0),!0===tt&&(o.fromBufferAttribute(Sn,Yi),ii[Hn+Ti+8]=o.x,ii[Hn+Ti+9]=o.y,ii[Hn+Ti+10]=o.z,ii[Hn+Ti+11]=4===Sn.itemSize?o.w:1)}}K={count:W,texture:jn,size:new Xi(cn,Gn)},s.set(v,K),v.addEventListener("dispose",Un)}let he=0;for(let Ae=0;Ae<T.length;Ae++)he+=T[Ae];const Te=v.morphTargetsRelative?1:1-he;I.getUniforms().setValue(i,"morphTargetBaseInfluence",Te),I.getUniforms().setValue(i,"morphTargetInfluences",T),I.getUniforms().setValue(i,"morphTargetsTexture",K.texture,e),I.getUniforms().setValue(i,"morphTargetsTextureSize",K.size)}else{const k=void 0===T?0:T.length;let W=n[v.id];if(void 0===W||W.length!==k){W=[];for(let Le=0;Le<k;Le++)W[Le]=[Le,0];n[v.id]=W}for(let Le=0;Le<k;Le++){const tt=W[Le];tt[0]=Le,tt[1]=T[Le]}W.sort(ebe);for(let Le=0;Le<8;Le++)Le<k&&W[Le][1]?(l[Le][0]=W[Le][0],l[Le][1]=W[Le][1]):(l[Le][0]=Number.MAX_SAFE_INTEGER,l[Le][1]=0);l.sort(J0e);const K=v.morphAttributes.position,he=v.morphAttributes.normal;let Te=0;for(let Le=0;Le<8;Le++){const tt=l[Le],_t=tt[0],Ut=tt[1];_t!==Number.MAX_SAFE_INTEGER&&Ut?(K&&v.getAttribute("morphTarget"+Le)!==K[_t]&&v.setAttribute("morphTarget"+Le,K[_t]),he&&v.getAttribute("morphNormal"+Le)!==he[_t]&&v.setAttribute("morphNormal"+Le,he[_t]),r[Le]=Ut,Te+=Ut):(K&&!0===v.hasAttribute("morphTarget"+Le)&&v.deleteAttribute("morphTarget"+Le),he&&!0===v.hasAttribute("morphNormal"+Le)&&v.deleteAttribute("morphNormal"+Le),r[Le]=0)}const Ae=v.morphTargetsRelative?1:1-Te;I.getUniforms().setValue(i,"morphTargetBaseInfluence",Ae),I.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function nbe(i,t,e,n){let r=new WeakMap;function l(u){const p=u.target;p.removeEventListener("dispose",l),e.remove(p.instanceMatrix),null!==p.instanceColor&&e.remove(p.instanceColor)}return{update:function s(u){const p=n.render.frame,w=t.get(u,u.geometry);return r.get(w)!==p&&(t.update(w),r.set(w,p)),u.isInstancedMesh&&(!1===u.hasEventListener("dispose",l)&&u.addEventListener("dispose",l),e.update(u.instanceMatrix,34962),null!==u.instanceColor&&e.update(u.instanceColor,34962)),w},dispose:function o(){r=new WeakMap}}}const fG=new b_,pG=new rR,gG=new $5,mG=new cE,vG=[],yG=[],_G=new Float32Array(16),bG=new Float32Array(9),CG=new Float32Array(4);function XC(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=vG[r];if(void 0===s&&(s=new Float32Array(r),vG[r]=s),0!==t){n.toArray(s,0);for(let o=1,l=0;o!==t;++o)l+=e,i[o].toArray(s,l)}return s}function th(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function nh(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function fE(i,t){let e=yG[t];void 0===e&&(e=new Int32Array(t),yG[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function ibe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function rbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(th(e,t))return;i.uniform2fv(this.addr,t),nh(e,t)}}function sbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(th(e,t))return;i.uniform3fv(this.addr,t),nh(e,t)}}function obe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(th(e,t))return;i.uniform4fv(this.addr,t),nh(e,t)}}function abe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(th(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),nh(e,t)}else{if(th(e,n))return;CG.set(n),i.uniformMatrix2fv(this.addr,!1,CG),nh(e,n)}}function lbe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(th(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),nh(e,t)}else{if(th(e,n))return;bG.set(n),i.uniformMatrix3fv(this.addr,!1,bG),nh(e,n)}}function cbe(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(th(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),nh(e,t)}else{if(th(e,n))return;_G.set(n),i.uniformMatrix4fv(this.addr,!1,_G),nh(e,n)}}function ube(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function hbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(th(e,t))return;i.uniform2iv(this.addr,t),nh(e,t)}}function dbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(th(e,t))return;i.uniform3iv(this.addr,t),nh(e,t)}}function fbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(th(e,t))return;i.uniform4iv(this.addr,t),nh(e,t)}}function pbe(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function gbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(th(e,t))return;i.uniform2uiv(this.addr,t),nh(e,t)}}function mbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(th(e,t))return;i.uniform3uiv(this.addr,t),nh(e,t)}}function vbe(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(th(e,t))return;i.uniform4uiv(this.addr,t),nh(e,t)}}function ybe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||fG,r)}function _be(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||gG,r)}function bbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||mG,r)}function Cbe(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||pG,r)}function Abe(i,t){i.uniform1fv(this.addr,t)}function xbe(i,t){const e=XC(t,this.size,2);i.uniform2fv(this.addr,e)}function Ibe(i,t){const e=XC(t,this.size,3);i.uniform3fv(this.addr,e)}function Sbe(i,t){const e=XC(t,this.size,4);i.uniform4fv(this.addr,e)}function Ebe(i,t){const e=XC(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function Tbe(i,t){const e=XC(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function Mbe(i,t){const e=XC(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function Dbe(i,t){i.uniform1iv(this.addr,t)}function Lbe(i,t){i.uniform2iv(this.addr,t)}function Rbe(i,t){i.uniform3iv(this.addr,t)}function Pbe(i,t){i.uniform4iv(this.addr,t)}function kbe(i,t){i.uniform1uiv(this.addr,t)}function Obe(i,t){i.uniform2uiv(this.addr,t)}function Fbe(i,t){i.uniform3uiv(this.addr,t)}function Nbe(i,t){i.uniform4uiv(this.addr,t)}function Bbe(i,t,e){const n=this.cache,r=t.length,s=fE(e,r);th(n,s)||(i.uniform1iv(this.addr,s),nh(n,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||fG,s[o])}function zbe(i,t,e){const n=this.cache,r=t.length,s=fE(e,r);th(n,s)||(i.uniform1iv(this.addr,s),nh(n,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||gG,s[o])}function Vbe(i,t,e){const n=this.cache,r=t.length,s=fE(e,r);th(n,s)||(i.uniform1iv(this.addr,s),nh(n,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||mG,s[o])}function Ube(i,t,e){const n=this.cache,r=t.length,s=fE(e,r);th(n,s)||(i.uniform1iv(this.addr,s),nh(n,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||pG,s[o])}class Gbe{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function wbe(i){switch(i){case 5126:return ibe;case 35664:return rbe;case 35665:return sbe;case 35666:return obe;case 35674:return abe;case 35675:return lbe;case 35676:return cbe;case 5124:case 35670:return ube;case 35667:case 35671:return hbe;case 35668:case 35672:return dbe;case 35669:case 35673:return fbe;case 5125:return pbe;case 36294:return gbe;case 36295:return mbe;case 36296:return vbe;case 35678:case 36198:case 36298:case 36306:case 35682:return ybe;case 35679:case 36299:case 36307:return _be;case 35680:case 36300:case 36308:case 36293:return bbe;case 36289:case 36303:case 36311:case 36292:return Cbe}}(e.type)}}class Wbe{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function Hbe(i){switch(i){case 5126:return Abe;case 35664:return xbe;case 35665:return Ibe;case 35666:return Sbe;case 35674:return Ebe;case 35675:return Tbe;case 35676:return Mbe;case 5124:case 35670:return Dbe;case 35667:case 35671:return Lbe;case 35668:case 35672:return Rbe;case 35669:case 35673:return Pbe;case 5125:return kbe;case 36294:return Obe;case 36295:return Fbe;case 36296:return Nbe;case 35678:case 36198:case 36298:case 36306:case 35682:return Bbe;case 35679:case 36299:case 36307:return zbe;case 35680:case 36300:case 36308:case 36293:return Vbe;case 36289:case 36303:case 36311:case 36292:return Ube}}(e.type)}}class jbe{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(t,e[l.id],n)}}}const DR=/(\w+)(\])?(\[|\.)?/g;function wG(i,t){i.seq.push(t),i.map[t.id]=t}function $be(i,t,e){const n=i.name,r=n.length;for(DR.lastIndex=0;;){const s=DR.exec(n),o=DR.lastIndex;let l=s[1];const p=s[3];if("]"===s[2]&&(l|=0),void 0===p||"["===p&&o+2===r){wG(e,void 0===p?new Gbe(l,i,t):new Wbe(l,i,t));break}{let w=e.map[l];void 0===w&&(w=new jbe(l),wG(e,w)),e=w}}}class pE{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);$be(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,o=e.length;s!==o;++s){const l=e[s],u=n[l.id];!1!==u.needsUpdate&&l.setValue(t,u.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&n.push(o)}return n}}function AG(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}let qbe=0;function xG(i,t,e){const n=i.getShaderParameter(t,35713),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function Xbe(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const l=o+1;n.push(`${l===t?">":" "} ${l}: ${e[o]}`)}return n.join("\n")}(i.getShaderSource(t),o)}return r}function Kbe(i,t){const e=function Ybe(i){switch(i){case z0:return["Linear","( value )"];case Kc:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(t);return"vec4 "+i+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function Zbe(i,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function fx(i){return""!==i}function IG(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function SG(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const tCe=/^[ \t]*#include +<([\w\d./]+)>/gm;function LR(i){return i.replace(tCe,nCe)}function nCe(i,t){const e=ko[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return LR(e)}const iCe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function EG(i){return i.replace(iCe,rCe)}function rCe(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function TG(i){let t="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function uCe(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,l=e.fragmentShader;const u=function sCe(i){let t="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),p=function oCe(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),v=function aCe(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),w=function lCe(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),I=function cCe(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),T=e.isWebGL2?"":function Qbe(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(fx).join("\n")}(e),k=function Jbe(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),W=r.createProgram();let K,he,Te=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(K=[k].filter(fx).join("\n"),K.length>0&&(K+="\n"),he=[T,k].filter(fx).join("\n"),he.length>0&&(he+="\n")):(K=[TG(e),"#define SHADER_NAME "+e.shaderName,k,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+v:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(fx).join("\n"),he=[T,TG(e),"#define SHADER_NAME "+e.shaderName,k,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+v:"",e.envMap?"#define "+w:"",I?"#define CUBEUV_TEXEL_WIDTH "+I.texelWidth:"",I?"#define CUBEUV_TEXEL_HEIGHT "+I.texelHeight:"",I?"#define CUBEUV_MAX_MIP "+I.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?ko.tonemapping_pars_fragment:"",0!==e.toneMapping?Zbe("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",ko.encodings_pars_fragment,Kbe("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(fx).join("\n")),o=LR(o),o=IG(o,e),o=SG(o,e),l=LR(l),l=IG(l,e),l=SG(l,e),o=EG(o),l=EG(l),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(Te="#version 300 es\n",K=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+K,he=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+he);const Le=Te+he+l,tt=AG(r,35633,Te+K+o),_t=AG(r,35632,Le);if(r.attachShader(W,tt),r.attachShader(W,_t),void 0!==e.index0AttributeName?r.bindAttribLocation(W,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(W,0,"position"),r.linkProgram(W),i.debug.checkShaderErrors){const Lt=r.getProgramInfoLog(W).trim(),cn=r.getShaderInfoLog(tt).trim(),Gn=r.getShaderInfoLog(_t).trim();let ii=!0,jn=!0;if(!1===r.getProgramParameter(W,35714)){ii=!1;const Mn=xG(r,tt,"vertex"),Un=xG(r,_t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(W,35715)+"\n\nProgram Info Log: "+Lt+"\n"+Mn+"\n"+Un)}else""!==Lt?console.warn("THREE.WebGLProgram: Program Info Log:",Lt):(""===cn||""===Gn)&&(jn=!1);jn&&(this.diagnostics={runnable:ii,programLog:Lt,vertexShader:{log:cn,prefix:K},fragmentShader:{log:Gn,prefix:he}})}let Ut,at;return r.deleteShader(tt),r.deleteShader(_t),this.getUniforms=function(){return void 0===Ut&&(Ut=new pE(r,W)),Ut},this.getAttributes=function(){return void 0===at&&(at=function eCe(i,t){const e={},n=i.getProgramParameter(t,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let l=1;35674===s.type&&(l=2),35675===s.type&&(l=3),35676===s.type&&(l=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:l}}return e}(r,W)),at},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(W),this.program=void 0},this.name=e.shaderName,this.id=qbe++,this.cacheKey=t,this.usedTimes=1,this.program=W,this.vertexShader=tt,this.fragmentShader=_t,this}let hCe=0;class dCe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new fCe(t),e.set(t,n)),n}}class fCe{constructor(t){this.id=hCe++,this.code=t,this.usedTimes=0}}function pCe(i,t,e,n,r,s,o){const l=new dR,u=new dCe,p=[],v=r.isWebGL2,w=r.logarithmicDepthBuffer,I=r.vertexTextures;let T=r.precision;const k={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function W(at,Lt,cn,Gn,ii){const jn=Gn.fog,Mn=ii.geometry,In=(at.isMeshStandardMaterial?e:t).get(at.envMap||(at.isMeshStandardMaterial?Gn.environment:null)),Wn=In&&306===In.mapping?In.image.height:null,zn=k[at.type];null!==at.precision&&(T=r.getMaxPrecision(at.precision),T!==at.precision&&console.warn("THREE.WebGLProgram.getParameters:",at.precision,"not supported, using",T,"instead."));const Sn=Mn.morphAttributes.position||Mn.morphAttributes.normal||Mn.morphAttributes.color,Hn=void 0!==Sn?Sn.length:0;let Ti,sr,fr,Es,Yi=0;if(void 0!==Mn.morphAttributes.position&&(Yi=1),void 0!==Mn.morphAttributes.normal&&(Yi=2),void 0!==Mn.morphAttributes.color&&(Yi=3),zn){const Io=dv[zn];Ti=Io.vertexShader,sr=Io.fragmentShader}else Ti=at.vertexShader,sr=at.fragmentShader,u.update(at),fr=u.getVertexShaderID(at),Es=u.getFragmentShaderID(at);const Li=i.getRenderTarget(),vs=at.clearcoat>0,ys=at.iridescence>0;return{isWebGL2:v,shaderID:zn,shaderName:at.type,vertexShader:Ti,fragmentShader:sr,defines:at.defines,customVertexShaderID:fr,customFragmentShaderID:Es,isRawShaderMaterial:!0===at.isRawShaderMaterial,glslVersion:at.glslVersion,precision:T,instancing:!0===ii.isInstancedMesh,instancingColor:!0===ii.isInstancedMesh&&null!==ii.instanceColor,supportsVertexTextures:I,outputEncoding:null===Li?i.outputEncoding:!0===Li.isXRRenderTarget?Li.texture.encoding:z0,map:!!at.map,matcap:!!at.matcap,envMap:!!In,envMapMode:In&&In.mapping,envMapCubeUVHeight:Wn,lightMap:!!at.lightMap,aoMap:!!at.aoMap,emissiveMap:!!at.emissiveMap,bumpMap:!!at.bumpMap,normalMap:!!at.normalMap,objectSpaceNormalMap:1===at.normalMapType,tangentSpaceNormalMap:0===at.normalMapType,decodeVideoTexture:!!at.map&&!0===at.map.isVideoTexture&&at.map.encoding===Kc,clearcoat:vs,clearcoatMap:vs&&!!at.clearcoatMap,clearcoatRoughnessMap:vs&&!!at.clearcoatRoughnessMap,clearcoatNormalMap:vs&&!!at.clearcoatNormalMap,iridescence:ys,iridescenceMap:ys&&!!at.iridescenceMap,iridescenceThicknessMap:ys&&!!at.iridescenceThicknessMap,displacementMap:!!at.displacementMap,roughnessMap:!!at.roughnessMap,metalnessMap:!!at.metalnessMap,specularMap:!!at.specularMap,specularIntensityMap:!!at.specularIntensityMap,specularColorMap:!!at.specularColorMap,opaque:!1===at.transparent&&1===at.blending,alphaMap:!!at.alphaMap,alphaTest:at.alphaTest>0,gradientMap:!!at.gradientMap,sheen:at.sheen>0,sheenColorMap:!!at.sheenColorMap,sheenRoughnessMap:!!at.sheenRoughnessMap,transmission:at.transmission>0,transmissionMap:!!at.transmissionMap,thicknessMap:!!at.thicknessMap,combine:at.combine,vertexTangents:!!at.normalMap&&!!Mn.attributes.tangent,vertexColors:at.vertexColors,vertexAlphas:!0===at.vertexColors&&!!Mn.attributes.color&&4===Mn.attributes.color.itemSize,vertexUvs:!!(at.map||at.bumpMap||at.normalMap||at.specularMap||at.alphaMap||at.emissiveMap||at.roughnessMap||at.metalnessMap||at.clearcoatMap||at.clearcoatRoughnessMap||at.clearcoatNormalMap||at.iridescenceMap||at.iridescenceThicknessMap||at.displacementMap||at.transmissionMap||at.thicknessMap||at.specularIntensityMap||at.specularColorMap||at.sheenColorMap||at.sheenRoughnessMap),uvsVertexOnly:!(at.map||at.bumpMap||at.normalMap||at.specularMap||at.alphaMap||at.emissiveMap||at.roughnessMap||at.metalnessMap||at.clearcoatNormalMap||at.iridescenceMap||at.iridescenceThicknessMap||at.transmission>0||at.transmissionMap||at.thicknessMap||at.specularIntensityMap||at.specularColorMap||at.sheen>0||at.sheenColorMap||at.sheenRoughnessMap||!at.displacementMap),fog:!!jn,useFog:!0===at.fog,fogExp2:jn&&jn.isFogExp2,flatShading:!!at.flatShading,sizeAttenuation:at.sizeAttenuation,logarithmicDepthBuffer:w,skinning:!0===ii.isSkinnedMesh,morphTargets:void 0!==Mn.morphAttributes.position,morphNormals:void 0!==Mn.morphAttributes.normal,morphColors:void 0!==Mn.morphAttributes.color,morphTargetsCount:Hn,morphTextureStride:Yi,numDirLights:Lt.directional.length,numPointLights:Lt.point.length,numSpotLights:Lt.spot.length,numSpotLightMaps:Lt.spotLightMap.length,numRectAreaLights:Lt.rectArea.length,numHemiLights:Lt.hemi.length,numDirLightShadows:Lt.directionalShadowMap.length,numPointLightShadows:Lt.pointShadowMap.length,numSpotLightShadows:Lt.spotShadowMap.length,numSpotLightShadowsWithMaps:Lt.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:at.dithering,shadowMapEnabled:i.shadowMap.enabled&&cn.length>0,shadowMapType:i.shadowMap.type,toneMapping:at.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:at.premultipliedAlpha,doubleSided:2===at.side,flipSided:1===at.side,useDepthPacking:!!at.depthPacking,depthPacking:at.depthPacking||0,index0AttributeName:at.index0AttributeName,extensionDerivatives:at.extensions&&at.extensions.derivatives,extensionFragDepth:at.extensions&&at.extensions.fragDepth,extensionDrawBuffers:at.extensions&&at.extensions.drawBuffers,extensionShaderTextureLOD:at.extensions&&at.extensions.shaderTextureLOD,rendererExtensionFragDepth:v||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:v||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:v||n.has("EXT_shader_texture_lod"),customProgramCacheKey:at.customProgramCacheKey()}},getProgramCacheKey:function K(at){const Lt=[];if(at.shaderID?Lt.push(at.shaderID):(Lt.push(at.customVertexShaderID),Lt.push(at.customFragmentShaderID)),void 0!==at.defines)for(const cn in at.defines)Lt.push(cn),Lt.push(at.defines[cn]);return!1===at.isRawShaderMaterial&&(function he(at,Lt){at.push(Lt.precision),at.push(Lt.outputEncoding),at.push(Lt.envMapMode),at.push(Lt.envMapCubeUVHeight),at.push(Lt.combine),at.push(Lt.vertexUvs),at.push(Lt.fogExp2),at.push(Lt.sizeAttenuation),at.push(Lt.morphTargetsCount),at.push(Lt.morphAttributeCount),at.push(Lt.numDirLights),at.push(Lt.numPointLights),at.push(Lt.numSpotLights),at.push(Lt.numSpotLightMaps),at.push(Lt.numHemiLights),at.push(Lt.numRectAreaLights),at.push(Lt.numDirLightShadows),at.push(Lt.numPointLightShadows),at.push(Lt.numSpotLightShadows),at.push(Lt.numSpotLightShadowsWithMaps),at.push(Lt.shadowMapType),at.push(Lt.toneMapping),at.push(Lt.numClippingPlanes),at.push(Lt.numClipIntersection),at.push(Lt.depthPacking)}(Lt,at),function Te(at,Lt){l.disableAll(),Lt.isWebGL2&&l.enable(0),Lt.supportsVertexTextures&&l.enable(1),Lt.instancing&&l.enable(2),Lt.instancingColor&&l.enable(3),Lt.map&&l.enable(4),Lt.matcap&&l.enable(5),Lt.envMap&&l.enable(6),Lt.lightMap&&l.enable(7),Lt.aoMap&&l.enable(8),Lt.emissiveMap&&l.enable(9),Lt.bumpMap&&l.enable(10),Lt.normalMap&&l.enable(11),Lt.objectSpaceNormalMap&&l.enable(12),Lt.tangentSpaceNormalMap&&l.enable(13),Lt.clearcoat&&l.enable(14),Lt.clearcoatMap&&l.enable(15),Lt.clearcoatRoughnessMap&&l.enable(16),Lt.clearcoatNormalMap&&l.enable(17),Lt.iridescence&&l.enable(18),Lt.iridescenceMap&&l.enable(19),Lt.iridescenceThicknessMap&&l.enable(20),Lt.displacementMap&&l.enable(21),Lt.specularMap&&l.enable(22),Lt.roughnessMap&&l.enable(23),Lt.metalnessMap&&l.enable(24),Lt.gradientMap&&l.enable(25),Lt.alphaMap&&l.enable(26),Lt.alphaTest&&l.enable(27),Lt.vertexColors&&l.enable(28),Lt.vertexAlphas&&l.enable(29),Lt.vertexUvs&&l.enable(30),Lt.vertexTangents&&l.enable(31),Lt.uvsVertexOnly&&l.enable(32),at.push(l.mask),l.disableAll(),Lt.fog&&l.enable(0),Lt.useFog&&l.enable(1),Lt.flatShading&&l.enable(2),Lt.logarithmicDepthBuffer&&l.enable(3),Lt.skinning&&l.enable(4),Lt.morphTargets&&l.enable(5),Lt.morphNormals&&l.enable(6),Lt.morphColors&&l.enable(7),Lt.premultipliedAlpha&&l.enable(8),Lt.shadowMapEnabled&&l.enable(9),Lt.physicallyCorrectLights&&l.enable(10),Lt.doubleSided&&l.enable(11),Lt.flipSided&&l.enable(12),Lt.useDepthPacking&&l.enable(13),Lt.dithering&&l.enable(14),Lt.specularIntensityMap&&l.enable(15),Lt.specularColorMap&&l.enable(16),Lt.transmission&&l.enable(17),Lt.transmissionMap&&l.enable(18),Lt.thicknessMap&&l.enable(19),Lt.sheen&&l.enable(20),Lt.sheenColorMap&&l.enable(21),Lt.sheenRoughnessMap&&l.enable(22),Lt.decodeVideoTexture&&l.enable(23),Lt.opaque&&l.enable(24),at.push(l.mask)}(Lt,at),Lt.push(i.outputEncoding)),Lt.push(at.customProgramCacheKey),Lt.join()},getUniforms:function Ae(at){const Lt=k[at.type];let cn;return cn=Lt?kye.clone(dv[Lt].uniforms):at.uniforms,cn},acquireProgram:function Le(at,Lt){let cn;for(let Gn=0,ii=p.length;Gn<ii;Gn++){const jn=p[Gn];if(jn.cacheKey===Lt){cn=jn,++cn.usedTimes;break}}return void 0===cn&&(cn=new uCe(i,Lt,at,s),p.push(cn)),cn},releaseProgram:function tt(at){if(0==--at.usedTimes){const Lt=p.indexOf(at);p[Lt]=p[p.length-1],p.pop(),at.destroy()}},releaseShaderCache:function _t(at){u.remove(at)},programs:p,dispose:function Ut(){u.dispose()}}}function gCe(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,l){i.get(s)[o]=l},dispose:function r(){i=new WeakMap}}}function mCe(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function MG(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function DG(){const i=[];let t=0;const e=[],n=[],r=[];function o(w,I,T,k,W,K){let he=i[t];return void 0===he?(he={id:w.id,object:w,geometry:I,material:T,groupOrder:k,renderOrder:w.renderOrder,z:W,group:K},i[t]=he):(he.id=w.id,he.object=w,he.geometry=I,he.material=T,he.groupOrder=k,he.renderOrder=w.renderOrder,he.z=W,he.group=K),t++,he}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function l(w,I,T,k,W,K){const he=o(w,I,T,k,W,K);T.transmission>0?n.push(he):!0===T.transparent?r.push(he):e.push(he)},unshift:function u(w,I,T,k,W,K){const he=o(w,I,T,k,W,K);T.transmission>0?n.unshift(he):!0===T.transparent?r.unshift(he):e.unshift(he)},finish:function v(){for(let w=t,I=i.length;w<I;w++){const T=i[w];if(null===T.id)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}},sort:function p(w,I){e.length>1&&e.sort(w||mCe),n.length>1&&n.sort(I||MG),r.length>1&&r.sort(I||MG)}}}function vCe(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let o;return void 0===s?(o=new DG,i.set(n,[o])):r>=s.length?(o=new DG,s.push(o)):o=s[r],o},dispose:function e(){i=new WeakMap}}}function yCe(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new en,color:new ns};break;case"SpotLight":e={position:new en,direction:new en,color:new ns,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new en,color:new ns,distance:0,decay:0};break;case"HemisphereLight":e={direction:new en,skyColor:new ns,groundColor:new ns};break;case"RectAreaLight":e={color:new ns,position:new en,halfWidth:new en,halfHeight:new en}}return i[t.id]=e,e}}}let bCe=0;function CCe(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function wCe(i,t){const e=new yCe,n=function _Ce(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xi};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Xi,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let v=0;v<9;v++)r.probe.push(new en);const s=new en,o=new vo,l=new vo;return{setup:function u(v,w){let I=0,T=0,k=0;for(let Gn=0;Gn<9;Gn++)r.probe[Gn].set(0,0,0);let W=0,K=0,he=0,Te=0,Ae=0,Le=0,tt=0,_t=0,Ut=0,at=0;v.sort(CCe);const Lt=!0!==w?Math.PI:1;for(let Gn=0,ii=v.length;Gn<ii;Gn++){const jn=v[Gn],Mn=jn.color,Un=jn.intensity,In=jn.distance,Wn=jn.shadow&&jn.shadow.map?jn.shadow.map.texture:null;if(jn.isAmbientLight)I+=Mn.r*Un*Lt,T+=Mn.g*Un*Lt,k+=Mn.b*Un*Lt;else if(jn.isLightProbe)for(let zn=0;zn<9;zn++)r.probe[zn].addScaledVector(jn.sh.coefficients[zn],Un);else if(jn.isDirectionalLight){const zn=e.get(jn);if(zn.color.copy(jn.color).multiplyScalar(jn.intensity*Lt),jn.castShadow){const Sn=jn.shadow,Hn=n.get(jn);Hn.shadowBias=Sn.bias,Hn.shadowNormalBias=Sn.normalBias,Hn.shadowRadius=Sn.radius,Hn.shadowMapSize=Sn.mapSize,r.directionalShadow[W]=Hn,r.directionalShadowMap[W]=Wn,r.directionalShadowMatrix[W]=jn.shadow.matrix,Le++}r.directional[W]=zn,W++}else if(jn.isSpotLight){const zn=e.get(jn);zn.position.setFromMatrixPosition(jn.matrixWorld),zn.color.copy(Mn).multiplyScalar(Un*Lt),zn.distance=In,zn.coneCos=Math.cos(jn.angle),zn.penumbraCos=Math.cos(jn.angle*(1-jn.penumbra)),zn.decay=jn.decay,r.spot[he]=zn;const Sn=jn.shadow;if(jn.map&&(r.spotLightMap[Ut]=jn.map,Ut++,Sn.updateMatrices(jn),jn.castShadow&&at++),r.spotLightMatrix[he]=Sn.matrix,jn.castShadow){const Hn=n.get(jn);Hn.shadowBias=Sn.bias,Hn.shadowNormalBias=Sn.normalBias,Hn.shadowRadius=Sn.radius,Hn.shadowMapSize=Sn.mapSize,r.spotShadow[he]=Hn,r.spotShadowMap[he]=Wn,_t++}he++}else if(jn.isRectAreaLight){const zn=e.get(jn);zn.color.copy(Mn).multiplyScalar(Un),zn.halfWidth.set(.5*jn.width,0,0),zn.halfHeight.set(0,.5*jn.height,0),r.rectArea[Te]=zn,Te++}else if(jn.isPointLight){const zn=e.get(jn);if(zn.color.copy(jn.color).multiplyScalar(jn.intensity*Lt),zn.distance=jn.distance,zn.decay=jn.decay,jn.castShadow){const Sn=jn.shadow,Hn=n.get(jn);Hn.shadowBias=Sn.bias,Hn.shadowNormalBias=Sn.normalBias,Hn.shadowRadius=Sn.radius,Hn.shadowMapSize=Sn.mapSize,Hn.shadowCameraNear=Sn.camera.near,Hn.shadowCameraFar=Sn.camera.far,r.pointShadow[K]=Hn,r.pointShadowMap[K]=Wn,r.pointShadowMatrix[K]=jn.shadow.matrix,tt++}r.point[K]=zn,K++}else if(jn.isHemisphereLight){const zn=e.get(jn);zn.skyColor.copy(jn.color).multiplyScalar(Un*Lt),zn.groundColor.copy(jn.groundColor).multiplyScalar(Un*Lt),r.hemi[Ae]=zn,Ae++}}Te>0&&(t.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Mr.LTC_FLOAT_1,r.rectAreaLTC2=Mr.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Mr.LTC_HALF_1,r.rectAreaLTC2=Mr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=I,r.ambient[1]=T,r.ambient[2]=k;const cn=r.hash;(cn.directionalLength!==W||cn.pointLength!==K||cn.spotLength!==he||cn.rectAreaLength!==Te||cn.hemiLength!==Ae||cn.numDirectionalShadows!==Le||cn.numPointShadows!==tt||cn.numSpotShadows!==_t||cn.numSpotMaps!==Ut)&&(r.directional.length=W,r.spot.length=he,r.rectArea.length=Te,r.point.length=K,r.hemi.length=Ae,r.directionalShadow.length=Le,r.directionalShadowMap.length=Le,r.pointShadow.length=tt,r.pointShadowMap.length=tt,r.spotShadow.length=_t,r.spotShadowMap.length=_t,r.directionalShadowMatrix.length=Le,r.pointShadowMatrix.length=tt,r.spotLightMatrix.length=_t+Ut-at,r.spotLightMap.length=Ut,r.numSpotLightShadowsWithMaps=at,cn.directionalLength=W,cn.pointLength=K,cn.spotLength=he,cn.rectAreaLength=Te,cn.hemiLength=Ae,cn.numDirectionalShadows=Le,cn.numPointShadows=tt,cn.numSpotShadows=_t,cn.numSpotMaps=Ut,r.version=bCe++)},setupView:function p(v,w){let I=0,T=0,k=0,W=0,K=0;const he=w.matrixWorldInverse;for(let Te=0,Ae=v.length;Te<Ae;Te++){const Le=v[Te];if(Le.isDirectionalLight){const tt=r.directional[I];tt.direction.setFromMatrixPosition(Le.matrixWorld),s.setFromMatrixPosition(Le.target.matrixWorld),tt.direction.sub(s),tt.direction.transformDirection(he),I++}else if(Le.isSpotLight){const tt=r.spot[k];tt.position.setFromMatrixPosition(Le.matrixWorld),tt.position.applyMatrix4(he),tt.direction.setFromMatrixPosition(Le.matrixWorld),s.setFromMatrixPosition(Le.target.matrixWorld),tt.direction.sub(s),tt.direction.transformDirection(he),k++}else if(Le.isRectAreaLight){const tt=r.rectArea[W];tt.position.setFromMatrixPosition(Le.matrixWorld),tt.position.applyMatrix4(he),l.identity(),o.copy(Le.matrixWorld),o.premultiply(he),l.extractRotation(o),tt.halfWidth.set(.5*Le.width,0,0),tt.halfHeight.set(0,.5*Le.height,0),tt.halfWidth.applyMatrix4(l),tt.halfHeight.applyMatrix4(l),W++}else if(Le.isPointLight){const tt=r.point[T];tt.position.setFromMatrixPosition(Le.matrixWorld),tt.position.applyMatrix4(he),T++}else if(Le.isHemisphereLight){const tt=r.hemi[K];tt.direction.setFromMatrixPosition(Le.matrixWorld),tt.direction.transformDirection(he),K++}}},state:r}}function LG(i,t){const e=new wCe(i,t),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:e},setupLights:function u(w){e.setup(n,w)},setupLightsView:function p(w){e.setupView(n,w)},pushLight:function o(w){n.push(w)},pushShadow:function l(w){r.push(w)}}}function ACe(i,t){let e=new WeakMap;return{get:function n(s,o=0){const l=e.get(s);let u;return void 0===l?(u=new LG(i,t),e.set(s,[u])):o>=l.length?(u=new LG(i,t),l.push(u)):u=l[o],u},dispose:function r(){e=new WeakMap}}}class RG extends X0{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class PG extends X0{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new en,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function SCe(i,t,e){let n=new IR;const r=new Xi,s=new Xi,o=new fl,l=new RG({depthPacking:3201}),u=new PG,p={},v=e.maxTextureSize,w={0:1,1:0,2:2},I=new D_({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Xi},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=I.clone();T.defines.HORIZONTAL_PASS=1;const k=new Ho;k.setAttribute("position",new wh(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const W=new Ld(k,I),K=this;function he(Le,tt){const _t=t.update(W);I.defines.VSM_SAMPLES!==Le.blurSamples&&(I.defines.VSM_SAMPLES=Le.blurSamples,T.defines.VSM_SAMPLES=Le.blurSamples,I.needsUpdate=!0,T.needsUpdate=!0),null===Le.mapPass&&(Le.mapPass=new W0(r.x,r.y)),I.uniforms.shadow_pass.value=Le.map.texture,I.uniforms.resolution.value=Le.mapSize,I.uniforms.radius.value=Le.radius,i.setRenderTarget(Le.mapPass),i.clear(),i.renderBufferDirect(tt,null,_t,I,W,null),T.uniforms.shadow_pass.value=Le.mapPass.texture,T.uniforms.resolution.value=Le.mapSize,T.uniforms.radius.value=Le.radius,i.setRenderTarget(Le.map),i.clear(),i.renderBufferDirect(tt,null,_t,T,W,null)}function Te(Le,tt,_t,Ut,at,Lt){let cn=null;const Gn=!0===_t.isPointLight?Le.customDistanceMaterial:Le.customDepthMaterial;if(cn=void 0!==Gn?Gn:!0===_t.isPointLight?u:l,i.localClippingEnabled&&!0===tt.clipShadows&&Array.isArray(tt.clippingPlanes)&&0!==tt.clippingPlanes.length||tt.displacementMap&&0!==tt.displacementScale||tt.alphaMap&&tt.alphaTest>0){const ii=cn.uuid,jn=tt.uuid;let Mn=p[ii];void 0===Mn&&(Mn={},p[ii]=Mn);let Un=Mn[jn];void 0===Un&&(Un=cn.clone(),Mn[jn]=Un),cn=Un}return cn.visible=tt.visible,cn.wireframe=tt.wireframe,cn.side=3===Lt?null!==tt.shadowSide?tt.shadowSide:tt.side:null!==tt.shadowSide?tt.shadowSide:w[tt.side],cn.alphaMap=tt.alphaMap,cn.alphaTest=tt.alphaTest,cn.clipShadows=tt.clipShadows,cn.clippingPlanes=tt.clippingPlanes,cn.clipIntersection=tt.clipIntersection,cn.displacementMap=tt.displacementMap,cn.displacementScale=tt.displacementScale,cn.displacementBias=tt.displacementBias,cn.wireframeLinewidth=tt.wireframeLinewidth,cn.linewidth=tt.linewidth,!0===_t.isPointLight&&!0===cn.isMeshDistanceMaterial&&(cn.referencePosition.setFromMatrixPosition(_t.matrixWorld),cn.nearDistance=Ut,cn.farDistance=at),cn}function Ae(Le,tt,_t,Ut,at){if(!1===Le.visible)return;if(Le.layers.test(tt.layers)&&(Le.isMesh||Le.isLine||Le.isPoints)&&(Le.castShadow||Le.receiveShadow&&3===at)&&(!Le.frustumCulled||n.intersectsObject(Le))){Le.modelViewMatrix.multiplyMatrices(_t.matrixWorldInverse,Le.matrixWorld);const Gn=t.update(Le),ii=Le.material;if(Array.isArray(ii)){const jn=Gn.groups;for(let Mn=0,Un=jn.length;Mn<Un;Mn++){const In=jn[Mn],Wn=ii[In.materialIndex];if(Wn&&Wn.visible){const zn=Te(Le,Wn,Ut,_t.near,_t.far,at);i.renderBufferDirect(_t,null,Gn,zn,Le,In)}}}else if(ii.visible){const jn=Te(Le,ii,Ut,_t.near,_t.far,at);i.renderBufferDirect(_t,null,Gn,jn,Le,null)}}const cn=Le.children;for(let Gn=0,ii=cn.length;Gn<ii;Gn++)Ae(cn[Gn],tt,_t,Ut,at)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Le,tt,_t){if(!1===K.enabled||!1===K.autoUpdate&&!1===K.needsUpdate||0===Le.length)return;const Ut=i.getRenderTarget(),at=i.getActiveCubeFace(),Lt=i.getActiveMipmapLevel(),cn=i.state;cn.setBlending(0),cn.buffers.color.setClear(1,1,1,1),cn.buffers.depth.setTest(!0),cn.setScissorTest(!1);for(let Gn=0,ii=Le.length;Gn<ii;Gn++){const jn=Le[Gn],Mn=jn.shadow;if(void 0===Mn){console.warn("THREE.WebGLShadowMap:",jn,"has no shadow.");continue}if(!1===Mn.autoUpdate&&!1===Mn.needsUpdate)continue;r.copy(Mn.mapSize);const Un=Mn.getFrameExtents();r.multiply(Un),s.copy(Mn.mapSize),(r.x>v||r.y>v)&&(r.x>v&&(s.x=Math.floor(v/Un.x),r.x=s.x*Un.x,Mn.mapSize.x=s.x),r.y>v&&(s.y=Math.floor(v/Un.y),r.y=s.y*Un.y,Mn.mapSize.y=s.y)),null===Mn.map&&(Mn.map=new W0(r.x,r.y,3!==this.type?{minFilter:Ju,magFilter:Ju}:{}),Mn.map.texture.name=jn.name+".shadowMap",Mn.camera.updateProjectionMatrix()),i.setRenderTarget(Mn.map),i.clear();const In=Mn.getViewportCount();for(let Wn=0;Wn<In;Wn++){const zn=Mn.getViewport(Wn);o.set(s.x*zn.x,s.y*zn.y,s.x*zn.z,s.y*zn.w),cn.viewport(o),Mn.updateMatrices(jn,Wn),n=Mn.getFrustum(),Ae(tt,_t,Mn.camera,jn,this.type)}!0!==Mn.isPointLightShadow&&3===this.type&&he(Mn,_t),Mn.needsUpdate=!1}K.needsUpdate=!1,i.setRenderTarget(Ut,at,Lt)}}function ECe(i,t,e){const n=e.isWebGL2,l=new function r(){let Pn=!1;const Si=new fl;let hr=null;const Qr=new fl(0,0,0,0);return{setMask:function(As){hr!==As&&!Pn&&(i.colorMask(As,As,As,As),hr=As)},setLocked:function(As){Pn=As},setClear:function(As,ja,Ih,Rd,ub){!0===ub&&(As*=Rd,ja*=Rd,Ih*=Rd),Si.set(As,ja,Ih,Rd),!1===Qr.equals(Si)&&(i.clearColor(As,ja,Ih,Rd),Qr.copy(Si))},reset:function(){Pn=!1,hr=null,Qr.set(-1,0,0,0)}}},u=new function s(){let Pn=!1,Si=null,hr=null,Qr=null;return{setTest:function(As){As?ws(2929):vs(2929)},setMask:function(As){Si!==As&&!Pn&&(i.depthMask(As),Si=As)},setFunc:function(As){if(hr!==As){switch(As){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}hr=As}},setLocked:function(As){Pn=As},setClear:function(As){Qr!==As&&(i.clearDepth(As),Qr=As)},reset:function(){Pn=!1,Si=null,hr=null,Qr=null}}},p=new function o(){let Pn=!1,Si=null,hr=null,Qr=null,As=null,ja=null,Ih=null,Rd=null,ub=null;return{setTest:function(cc){Pn||(cc?ws(2960):vs(2960))},setMask:function(cc){Si!==cc&&!Pn&&(i.stencilMask(cc),Si=cc)},setFunc:function(cc,Ey,Eg){(hr!==cc||Qr!==Ey||As!==Eg)&&(i.stencilFunc(cc,Ey,Eg),hr=cc,Qr=Ey,As=Eg)},setOp:function(cc,Ey,Eg){(ja!==cc||Ih!==Ey||Rd!==Eg)&&(i.stencilOp(cc,Ey,Eg),ja=cc,Ih=Ey,Rd=Eg)},setLocked:function(cc){Pn=cc},setClear:function(cc){ub!==cc&&(i.clearStencil(cc),ub=cc)},reset:function(){Pn=!1,Si=null,hr=null,Qr=null,As=null,ja=null,Ih=null,Rd=null,ub=null}}},v=new WeakMap,w=new WeakMap;let I={},T={},k=new WeakMap,W=[],K=null,he=!1,Te=null,Ae=null,Le=null,tt=null,_t=null,Ut=null,at=null,Lt=!1,cn=null,Gn=null,ii=null,jn=null,Mn=null;const Un=i.getParameter(35661);let In=!1,Wn=0;const zn=i.getParameter(7938);-1!==zn.indexOf("WebGL")?(Wn=parseFloat(/^WebGL (\d)/.exec(zn)[1]),In=Wn>=1):-1!==zn.indexOf("OpenGL ES")&&(Wn=parseFloat(/^OpenGL ES (\d)/.exec(zn)[1]),In=Wn>=2);let Sn=null,Hn={};const Yi=i.getParameter(3088),Ti=i.getParameter(2978),sr=(new fl).fromArray(Yi),fr=(new fl).fromArray(Ti);function Es(Pn,Si,hr){const Qr=new Uint8Array(4),As=i.createTexture();i.bindTexture(Pn,As),i.texParameteri(Pn,10241,9728),i.texParameteri(Pn,10240,9728);for(let ja=0;ja<hr;ja++)i.texImage2D(Si+ja,0,6408,1,1,0,6408,5121,Qr);return As}const Li={};function ws(Pn){!0!==I[Pn]&&(i.enable(Pn),I[Pn]=!0)}function vs(Pn){!1!==I[Pn]&&(i.disable(Pn),I[Pn]=!1)}Li[3553]=Es(3553,3553,1),Li[34067]=Es(34067,34069,6),l.setClear(0,0,0,1),u.setClear(1),p.setClear(0),ws(2929),u.setFunc(3),Br(!1),yo(1),ws(2884),xr(0);const Gi={100:32774,101:32778,102:32779};if(n)Gi[103]=32775,Gi[104]=32776;else{const Pn=t.get("EXT_blend_minmax");null!==Pn&&(Gi[103]=Pn.MIN_EXT,Gi[104]=Pn.MAX_EXT)}const Bi={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function xr(Pn,Si,hr,Qr,As,ja,Ih,Rd){if(0!==Pn){if(!1===he&&(ws(3042),he=!0),5===Pn)As=As||Si,ja=ja||hr,Ih=Ih||Qr,(Si!==Ae||As!==_t)&&(i.blendEquationSeparate(Gi[Si],Gi[As]),Ae=Si,_t=As),(hr!==Le||Qr!==tt||ja!==Ut||Ih!==at)&&(i.blendFuncSeparate(Bi[hr],Bi[Qr],Bi[ja],Bi[Ih]),Le=hr,tt=Qr,Ut=ja,at=Ih),Te=Pn,Lt=null;else if(Pn!==Te||Rd!==Lt){if((100!==Ae||100!==_t)&&(i.blendEquation(32774),Ae=100,_t=100),Rd)switch(Pn){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pn)}else switch(Pn){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pn)}Le=null,tt=null,Ut=null,at=null,Te=Pn,Lt=Rd}}else!0===he&&(vs(3042),he=!1)}function Br(Pn){cn!==Pn&&(i.frontFace(Pn?2304:2305),cn=Pn)}function yo(Pn){0!==Pn?(ws(2884),Pn!==Gn&&i.cullFace(1===Pn?1029:2===Pn?1028:1032)):vs(2884),Gn=Pn}function Vs(Pn,Si,hr){Pn?(ws(32823),(jn!==Si||Mn!==hr)&&(i.polygonOffset(Si,hr),jn=Si,Mn=hr)):vs(32823)}return{buffers:{color:l,depth:u,stencil:p},enable:ws,disable:vs,bindFramebuffer:function ys(Pn,Si){return T[Pn]!==Si&&(i.bindFramebuffer(Pn,Si),T[Pn]=Si,n&&(36009===Pn&&(T[36160]=Si),36160===Pn&&(T[36009]=Si)),!0)},drawBuffers:function Pr(Pn,Si){let hr=W,Qr=!1;if(Pn)if(hr=k.get(Si),void 0===hr&&(hr=[],k.set(Si,hr)),Pn.isWebGLMultipleRenderTargets){const As=Pn.texture;if(hr.length!==As.length||36064!==hr[0]){for(let ja=0,Ih=As.length;ja<Ih;ja++)hr[ja]=36064+ja;hr.length=As.length,Qr=!0}}else 36064!==hr[0]&&(hr[0]=36064,Qr=!0);else 1029!==hr[0]&&(hr[0]=1029,Qr=!0);Qr&&(e.isWebGL2?i.drawBuffers(hr):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(hr))},useProgram:function Io(Pn){return K!==Pn&&(i.useProgram(Pn),K=Pn,!0)},setBlending:xr,setMaterial:function fs(Pn,Si){2===Pn.side?vs(2884):ws(2884);let hr=1===Pn.side;Si&&(hr=!hr),Br(hr),1===Pn.blending&&!1===Pn.transparent?xr(0):xr(Pn.blending,Pn.blendEquation,Pn.blendSrc,Pn.blendDst,Pn.blendEquationAlpha,Pn.blendSrcAlpha,Pn.blendDstAlpha,Pn.premultipliedAlpha),u.setFunc(Pn.depthFunc),u.setTest(Pn.depthTest),u.setMask(Pn.depthWrite),l.setMask(Pn.colorWrite);const Qr=Pn.stencilWrite;p.setTest(Qr),Qr&&(p.setMask(Pn.stencilWriteMask),p.setFunc(Pn.stencilFunc,Pn.stencilRef,Pn.stencilFuncMask),p.setOp(Pn.stencilFail,Pn.stencilZFail,Pn.stencilZPass)),Vs(Pn.polygonOffset,Pn.polygonOffsetFactor,Pn.polygonOffsetUnits),!0===Pn.alphaToCoverage?ws(32926):vs(32926)},setFlipSided:Br,setCullFace:yo,setLineWidth:function Ys(Pn){Pn!==ii&&(In&&i.lineWidth(Pn),ii=Pn)},setPolygonOffset:Vs,setScissorTest:function jl(Pn){Pn?ws(3089):vs(3089)},activeTexture:function wl(Pn){void 0===Pn&&(Pn=33984+Un-1),Sn!==Pn&&(i.activeTexture(Pn),Sn=Pn)},bindTexture:function dn(Pn,Si,hr){void 0===hr&&(hr=null===Sn?33984+Un-1:Sn);let Qr=Hn[hr];void 0===Qr&&(Qr={type:void 0,texture:void 0},Hn[hr]=Qr),(Qr.type!==Pn||Qr.texture!==Si)&&(Sn!==hr&&(i.activeTexture(hr),Sn=hr),i.bindTexture(Pn,Si||Li[Pn]),Qr.type=Pn,Qr.texture=Si)},unbindTexture:function $t(){const Pn=Hn[Sn];void 0!==Pn&&void 0!==Pn.type&&(i.bindTexture(Pn.type,null),Pn.type=void 0,Pn.texture=void 0)},compressedTexImage2D:function hi(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},compressedTexImage3D:function dr(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},texImage2D:function Ks(){try{i.texImage2D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},texImage3D:function _s(){try{i.texImage3D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},updateUBOMapping:function Ia(Pn,Si){let hr=w.get(Si);void 0===hr&&(hr=new WeakMap,w.set(Si,hr));let Qr=hr.get(Pn);void 0===Qr&&(Qr=i.getUniformBlockIndex(Si,Pn.name),hr.set(Pn,Qr))},uniformBlockBinding:function lc(Pn,Si){const Qr=w.get(Si).get(Pn);v.get(Pn)!==Qr&&(i.uniformBlockBinding(Si,Qr,Pn.__bindingPointIndex),v.set(Pn,Qr))},texStorage2D:function zi(){try{i.texStorage2D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},texStorage3D:function Ls(){try{i.texStorage3D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},texSubImage2D:function Ar(){try{i.texSubImage2D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},texSubImage3D:function jr(){try{i.texSubImage3D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},compressedTexSubImage2D:function Js(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},compressedTexSubImage3D:function qr(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Pn){console.error("THREE.WebGLState:",Pn)}},scissor:function Gs(Pn){!1===sr.equals(Pn)&&(i.scissor(Pn.x,Pn.y,Pn.z,Pn.w),sr.copy(Pn))},viewport:function Rs(Pn){!1===fr.equals(Pn)&&(i.viewport(Pn.x,Pn.y,Pn.z,Pn.w),fr.copy(Pn))},reset:function xh(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),I={},Sn=null,Hn={},T={},k=new WeakMap,W=[],K=null,he=!1,Te=null,Ae=null,Le=null,tt=null,_t=null,Ut=null,at=null,Lt=!1,cn=null,Gn=null,ii=null,jn=null,Mn=null,sr.set(0,0,i.canvas.width,i.canvas.height),fr.set(0,0,i.canvas.width,i.canvas.height),l.reset(),u.reset(),p.reset()}}}function TCe(i,t,e,n,r,s,o){const l=r.isWebGL2,u=r.maxTextures,p=r.maxCubemapSize,v=r.maxTextureSize,w=r.maxSamples,I=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,T=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),k=new WeakMap;let W;const K=new WeakMap;let he=!1;try{he=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function Te(dn,$t){return he?new OffscreenCanvas(dn,$t):lx("canvas")}function Ae(dn,$t,hi,dr){let Ar=1;if((dn.width>dr||dn.height>dr)&&(Ar=dr/Math.max(dn.width,dn.height)),Ar<1||!0===$t){if(typeof HTMLImageElement<"u"&&dn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&dn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&dn instanceof ImageBitmap){const jr=$t?GS:Math.floor,Js=jr(Ar*dn.width),qr=jr(Ar*dn.height);void 0===W&&(W=Te(Js,qr));const zi=hi?Te(Js,qr):W;return zi.width=Js,zi.height=qr,zi.getContext("2d").drawImage(dn,0,0,Js,qr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+dn.width+"x"+dn.height+") to ("+Js+"x"+qr+")."),zi}return"data"in dn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+dn.width+"x"+dn.height+")."),dn}return dn}function Le(dn){return eR(dn.width)&&eR(dn.height)}function _t(dn,$t){return dn.generateMipmaps&&$t&&dn.minFilter!==Ju&&dn.minFilter!==Lu}function Ut(dn){i.generateMipmap(dn)}function at(dn,$t,hi,dr,Ar=!1){if(!1===l)return $t;if(null!==dn){if(void 0!==i[dn])return i[dn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+dn+"'")}let jr=$t;return 6403===$t&&(5126===hi&&(jr=33326),5131===hi&&(jr=33325),5121===hi&&(jr=33321)),33319===$t&&(5126===hi&&(jr=33328),5131===hi&&(jr=33327),5121===hi&&(jr=33323)),6408===$t&&(5126===hi&&(jr=34836),5131===hi&&(jr=34842),5121===hi&&(jr=dr===Kc&&!1===Ar?35907:32856),32819===hi&&(jr=32854),32820===hi&&(jr=32855)),(33325===jr||33326===jr||33327===jr||33328===jr||34842===jr||34836===jr)&&t.get("EXT_color_buffer_float"),jr}function Lt(dn,$t,hi){return!0===_t(dn,hi)||dn.isFramebufferTexture&&dn.minFilter!==Ju&&dn.minFilter!==Lu?Math.log2(Math.max($t.width,$t.height))+1:void 0!==dn.mipmaps&&dn.mipmaps.length>0?dn.mipmaps.length:dn.isCompressedTexture&&Array.isArray(dn.image)?$t.mipmaps.length:1}function cn(dn){return dn===Ju||1004===dn||1005===dn?9728:9729}function Gn(dn){const $t=dn.target;$t.removeEventListener("dispose",Gn),function jn(dn){const $t=n.get(dn);if(void 0===$t.__webglInit)return;const hi=dn.source,dr=K.get(hi);if(dr){const Ar=dr[$t.__cacheKey];Ar.usedTimes--,0===Ar.usedTimes&&Mn(dn),0===Object.keys(dr).length&&K.delete(hi)}n.remove(dn)}($t),$t.isVideoTexture&&k.delete($t)}function ii(dn){const $t=dn.target;$t.removeEventListener("dispose",ii),function Un(dn){const $t=dn.texture,hi=n.get(dn),dr=n.get($t);if(void 0!==dr.__webglTexture&&(i.deleteTexture(dr.__webglTexture),o.memory.textures--),dn.depthTexture&&dn.depthTexture.dispose(),dn.isWebGLCubeRenderTarget)for(let Ar=0;Ar<6;Ar++)i.deleteFramebuffer(hi.__webglFramebuffer[Ar]),hi.__webglDepthbuffer&&i.deleteRenderbuffer(hi.__webglDepthbuffer[Ar]);else{if(i.deleteFramebuffer(hi.__webglFramebuffer),hi.__webglDepthbuffer&&i.deleteRenderbuffer(hi.__webglDepthbuffer),hi.__webglMultisampledFramebuffer&&i.deleteFramebuffer(hi.__webglMultisampledFramebuffer),hi.__webglColorRenderbuffer)for(let Ar=0;Ar<hi.__webglColorRenderbuffer.length;Ar++)hi.__webglColorRenderbuffer[Ar]&&i.deleteRenderbuffer(hi.__webglColorRenderbuffer[Ar]);hi.__webglDepthRenderbuffer&&i.deleteRenderbuffer(hi.__webglDepthRenderbuffer)}if(dn.isWebGLMultipleRenderTargets)for(let Ar=0,jr=$t.length;Ar<jr;Ar++){const Js=n.get($t[Ar]);Js.__webglTexture&&(i.deleteTexture(Js.__webglTexture),o.memory.textures--),n.remove($t[Ar])}n.remove($t),n.remove(dn)}($t)}function Mn(dn){const $t=n.get(dn);i.deleteTexture($t.__webglTexture),delete K.get(dn.source)[$t.__cacheKey],o.memory.textures--}let In=0;function Hn(dn,$t){const hi=n.get(dn);if(dn.isVideoTexture&&function jl(dn){const $t=o.render.frame;k.get(dn)!==$t&&(k.set(dn,$t),dn.update())}(dn),!1===dn.isRenderTargetTexture&&dn.version>0&&hi.__version!==dn.version){const dr=dn.image;if(null===dr)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==dr.complete)return void vs(hi,dn,$t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(3553,hi.__webglTexture,33984+$t)}const fr={1e3:10497,[cf]:33071,1002:33648},Es={[Ju]:9728,1004:9984,1005:9986,[Lu]:9729,1007:9985,1008:9987};function Li(dn,$t,hi){if(hi?(i.texParameteri(dn,10242,fr[$t.wrapS]),i.texParameteri(dn,10243,fr[$t.wrapT]),(32879===dn||35866===dn)&&i.texParameteri(dn,32882,fr[$t.wrapR]),i.texParameteri(dn,10240,Es[$t.magFilter]),i.texParameteri(dn,10241,Es[$t.minFilter])):(i.texParameteri(dn,10242,33071),i.texParameteri(dn,10243,33071),(32879===dn||35866===dn)&&i.texParameteri(dn,32882,33071),($t.wrapS!==cf||$t.wrapT!==cf)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(dn,10240,cn($t.magFilter)),i.texParameteri(dn,10241,cn($t.minFilter)),$t.minFilter!==Ju&&$t.minFilter!==Lu&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const dr=t.get("EXT_texture_filter_anisotropic");if($t.type===__&&!1===t.has("OES_texture_float_linear")||!1===l&&$t.type===sx&&!1===t.has("OES_texture_half_float_linear"))return;($t.anisotropy>1||n.get($t).__currentAnisotropy)&&(i.texParameterf(dn,dr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min($t.anisotropy,r.getMaxAnisotropy())),n.get($t).__currentAnisotropy=$t.anisotropy)}}function ws(dn,$t){let hi=!1;void 0===dn.__webglInit&&(dn.__webglInit=!0,$t.addEventListener("dispose",Gn));const dr=$t.source;let Ar=K.get(dr);void 0===Ar&&(Ar={},K.set(dr,Ar));const jr=function Sn(dn){const $t=[];return $t.push(dn.wrapS),$t.push(dn.wrapT),$t.push(dn.wrapR||0),$t.push(dn.magFilter),$t.push(dn.minFilter),$t.push(dn.anisotropy),$t.push(dn.internalFormat),$t.push(dn.format),$t.push(dn.type),$t.push(dn.generateMipmaps),$t.push(dn.premultiplyAlpha),$t.push(dn.flipY),$t.push(dn.unpackAlignment),$t.push(dn.encoding),$t.join()}($t);if(jr!==dn.__cacheKey){void 0===Ar[jr]&&(Ar[jr]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,hi=!0),Ar[jr].usedTimes++;const Js=Ar[dn.__cacheKey];void 0!==Js&&(Ar[dn.__cacheKey].usedTimes--,0===Js.usedTimes&&Mn($t)),dn.__cacheKey=jr,dn.__webglTexture=Ar[jr].texture}return hi}function vs(dn,$t,hi){let dr=3553;($t.isDataArrayTexture||$t.isCompressedArrayTexture)&&(dr=35866),$t.isData3DTexture&&(dr=32879);const Ar=ws(dn,$t),jr=$t.source;e.bindTexture(dr,dn.__webglTexture,33984+hi);const Js=n.get(jr);if(jr.version!==Js.__version||!0===Ar){e.activeTexture(33984+hi),i.pixelStorei(37440,$t.flipY),i.pixelStorei(37441,$t.premultiplyAlpha),i.pixelStorei(3317,$t.unpackAlignment),i.pixelStorei(37443,0);const qr=function tt(dn){return!l&&(dn.wrapS!==cf||dn.wrapT!==cf||dn.minFilter!==Ju&&dn.minFilter!==Lu)}($t)&&!1===Le($t.image);let zi=Ae($t.image,qr,!1,v);zi=wl($t,zi);const Ls=Le(zi)||l,Ks=s.convert($t.format,$t.encoding);let Rs,_s=s.convert($t.type),Gs=at($t.internalFormat,Ks,_s,$t.encoding,$t.isVideoTexture);Li(dr,$t,Ls);const Ia=$t.mipmaps,lc=l&&!0!==$t.isVideoTexture,xh=void 0===Js.__version||!0===Ar,Pn=Lt($t,zi,Ls);if($t.isDepthTexture)Gs=6402,l?Gs=$t.type===__?36012:$t.type===N0?33190:$t.type===xC?35056:33189:$t.type===__&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),$t.format===B0&&6402===Gs&&1012!==$t.type&&$t.type!==N0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),$t.type=N0,_s=s.convert($t.type)),$t.format===IC&&6402===Gs&&(Gs=34041,$t.type!==xC&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),$t.type=xC,_s=s.convert($t.type))),xh&&(lc?e.texStorage2D(3553,1,Gs,zi.width,zi.height):e.texImage2D(3553,0,Gs,zi.width,zi.height,0,Ks,_s,null));else if($t.isDataTexture)if(Ia.length>0&&Ls){lc&&xh&&e.texStorage2D(3553,Pn,Gs,Ia[0].width,Ia[0].height);for(let Si=0,hr=Ia.length;Si<hr;Si++)Rs=Ia[Si],lc?e.texSubImage2D(3553,Si,0,0,Rs.width,Rs.height,Ks,_s,Rs.data):e.texImage2D(3553,Si,Gs,Rs.width,Rs.height,0,Ks,_s,Rs.data);$t.generateMipmaps=!1}else lc?(xh&&e.texStorage2D(3553,Pn,Gs,zi.width,zi.height),e.texSubImage2D(3553,0,0,0,zi.width,zi.height,Ks,_s,zi.data)):e.texImage2D(3553,0,Gs,zi.width,zi.height,0,Ks,_s,zi.data);else if($t.isCompressedTexture)if($t.isCompressedArrayTexture){lc&&xh&&e.texStorage3D(35866,Pn,Gs,Ia[0].width,Ia[0].height,zi.depth);for(let Si=0,hr=Ia.length;Si<hr;Si++)Rs=Ia[Si],$t.format!==wg?null!==Ks?lc?e.compressedTexSubImage3D(35866,Si,0,0,0,Rs.width,Rs.height,zi.depth,Ks,Rs.data,0,0):e.compressedTexImage3D(35866,Si,Gs,Rs.width,Rs.height,zi.depth,0,Rs.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):lc?e.texSubImage3D(35866,Si,0,0,0,Rs.width,Rs.height,zi.depth,Ks,_s,Rs.data):e.texImage3D(35866,Si,Gs,Rs.width,Rs.height,zi.depth,0,Ks,_s,Rs.data)}else{lc&&xh&&e.texStorage2D(3553,Pn,Gs,Ia[0].width,Ia[0].height);for(let Si=0,hr=Ia.length;Si<hr;Si++)Rs=Ia[Si],$t.format!==wg?null!==Ks?lc?e.compressedTexSubImage2D(3553,Si,0,0,Rs.width,Rs.height,Ks,Rs.data):e.compressedTexImage2D(3553,Si,Gs,Rs.width,Rs.height,0,Rs.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):lc?e.texSubImage2D(3553,Si,0,0,Rs.width,Rs.height,Ks,_s,Rs.data):e.texImage2D(3553,Si,Gs,Rs.width,Rs.height,0,Ks,_s,Rs.data)}else if($t.isDataArrayTexture)lc?(xh&&e.texStorage3D(35866,Pn,Gs,zi.width,zi.height,zi.depth),e.texSubImage3D(35866,0,0,0,0,zi.width,zi.height,zi.depth,Ks,_s,zi.data)):e.texImage3D(35866,0,Gs,zi.width,zi.height,zi.depth,0,Ks,_s,zi.data);else if($t.isData3DTexture)lc?(xh&&e.texStorage3D(32879,Pn,Gs,zi.width,zi.height,zi.depth),e.texSubImage3D(32879,0,0,0,0,zi.width,zi.height,zi.depth,Ks,_s,zi.data)):e.texImage3D(32879,0,Gs,zi.width,zi.height,zi.depth,0,Ks,_s,zi.data);else if($t.isFramebufferTexture){if(xh)if(lc)e.texStorage2D(3553,Pn,Gs,zi.width,zi.height);else{let Si=zi.width,hr=zi.height;for(let Qr=0;Qr<Pn;Qr++)e.texImage2D(3553,Qr,Gs,Si,hr,0,Ks,_s,null),Si>>=1,hr>>=1}}else if(Ia.length>0&&Ls){lc&&xh&&e.texStorage2D(3553,Pn,Gs,Ia[0].width,Ia[0].height);for(let Si=0,hr=Ia.length;Si<hr;Si++)Rs=Ia[Si],lc?e.texSubImage2D(3553,Si,0,0,Ks,_s,Rs):e.texImage2D(3553,Si,Gs,Ks,_s,Rs);$t.generateMipmaps=!1}else lc?(xh&&e.texStorage2D(3553,Pn,Gs,zi.width,zi.height),e.texSubImage2D(3553,0,0,0,Ks,_s,zi)):e.texImage2D(3553,0,Gs,Ks,_s,zi);_t($t,Ls)&&Ut(dr),Js.__version=jr.version,$t.onUpdate&&$t.onUpdate($t)}dn.__version=$t.version}function Pr(dn,$t,hi,dr,Ar){const jr=s.convert(hi.format,hi.encoding),Js=s.convert(hi.type),qr=at(hi.internalFormat,jr,Js,hi.encoding);n.get($t).__hasExternalTextures||(32879===Ar||35866===Ar?e.texImage3D(Ar,0,qr,$t.width,$t.height,$t.depth,0,jr,Js,null):e.texImage2D(Ar,0,qr,$t.width,$t.height,0,jr,Js,null)),e.bindFramebuffer(36160,dn),Vs($t)?I.framebufferTexture2DMultisampleEXT(36160,dr,Ar,n.get(hi).__webglTexture,0,Ys($t)):(3553===Ar||Ar>=34069&&Ar<=34074)&&i.framebufferTexture2D(36160,dr,Ar,n.get(hi).__webglTexture,0),e.bindFramebuffer(36160,null)}function Io(dn,$t,hi){if(i.bindRenderbuffer(36161,dn),$t.depthBuffer&&!$t.stencilBuffer){let dr=33189;if(hi||Vs($t)){const Ar=$t.depthTexture;Ar&&Ar.isDepthTexture&&(Ar.type===__?dr=36012:Ar.type===N0&&(dr=33190));const jr=Ys($t);Vs($t)?I.renderbufferStorageMultisampleEXT(36161,jr,dr,$t.width,$t.height):i.renderbufferStorageMultisample(36161,jr,dr,$t.width,$t.height)}else i.renderbufferStorage(36161,dr,$t.width,$t.height);i.framebufferRenderbuffer(36160,36096,36161,dn)}else if($t.depthBuffer&&$t.stencilBuffer){const dr=Ys($t);hi&&!1===Vs($t)?i.renderbufferStorageMultisample(36161,dr,35056,$t.width,$t.height):Vs($t)?I.renderbufferStorageMultisampleEXT(36161,dr,35056,$t.width,$t.height):i.renderbufferStorage(36161,34041,$t.width,$t.height),i.framebufferRenderbuffer(36160,33306,36161,dn)}else{const dr=!0===$t.isWebGLMultipleRenderTargets?$t.texture:[$t.texture];for(let Ar=0;Ar<dr.length;Ar++){const jr=dr[Ar],Js=s.convert(jr.format,jr.encoding),qr=s.convert(jr.type),zi=at(jr.internalFormat,Js,qr,jr.encoding),Ls=Ys($t);hi&&!1===Vs($t)?i.renderbufferStorageMultisample(36161,Ls,zi,$t.width,$t.height):Vs($t)?I.renderbufferStorageMultisampleEXT(36161,Ls,zi,$t.width,$t.height):i.renderbufferStorage(36161,zi,$t.width,$t.height)}}i.bindRenderbuffer(36161,null)}function Bi(dn){const $t=n.get(dn),hi=!0===dn.isWebGLCubeRenderTarget;if(dn.depthTexture&&!$t.__autoAllocateDepthBuffer){if(hi)throw new Error("target.depthTexture not supported in Cube render targets");!function Gi(dn,$t){if($t&&$t.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,dn),!$t.depthTexture||!$t.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get($t.depthTexture).__webglTexture||$t.depthTexture.image.width!==$t.width||$t.depthTexture.image.height!==$t.height)&&($t.depthTexture.image.width=$t.width,$t.depthTexture.image.height=$t.height,$t.depthTexture.needsUpdate=!0),Hn($t.depthTexture,0);const dr=n.get($t.depthTexture).__webglTexture,Ar=Ys($t);if($t.depthTexture.format===B0)Vs($t)?I.framebufferTexture2DMultisampleEXT(36160,36096,3553,dr,0,Ar):i.framebufferTexture2D(36160,36096,3553,dr,0);else{if($t.depthTexture.format!==IC)throw new Error("Unknown depthTexture format");Vs($t)?I.framebufferTexture2DMultisampleEXT(36160,33306,3553,dr,0,Ar):i.framebufferTexture2D(36160,33306,3553,dr,0)}}($t.__webglFramebuffer,dn)}else if(hi){$t.__webglDepthbuffer=[];for(let dr=0;dr<6;dr++)e.bindFramebuffer(36160,$t.__webglFramebuffer[dr]),$t.__webglDepthbuffer[dr]=i.createRenderbuffer(),Io($t.__webglDepthbuffer[dr],dn,!1)}else e.bindFramebuffer(36160,$t.__webglFramebuffer),$t.__webglDepthbuffer=i.createRenderbuffer(),Io($t.__webglDepthbuffer,dn,!1);e.bindFramebuffer(36160,null)}function Ys(dn){return Math.min(w,dn.samples)}function Vs(dn){const $t=n.get(dn);return l&&dn.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==$t.__useRenderToTexture}function wl(dn,$t){const hi=dn.encoding,dr=dn.format,Ar=dn.type;return!0===dn.isCompressedTexture||!0===dn.isVideoTexture||1035===dn.format||hi!==z0&&(hi===Kc?!1===l?!0===t.has("EXT_sRGB")&&dr===wg?(dn.format=1035,dn.minFilter=Lu,dn.generateMipmaps=!1):$t=j5.sRGBToLinear($t):(dr!==wg||Ar!==F0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",hi)),$t}this.allocateTextureUnit=function zn(){const dn=In;return dn>=u&&console.warn("THREE.WebGLTextures: Trying to use "+dn+" texture units while this GPU supports only "+u),In+=1,dn},this.resetTextureUnits=function Wn(){In=0},this.setTexture2D=Hn,this.setTexture2DArray=function Yi(dn,$t){const hi=n.get(dn);dn.version>0&&hi.__version!==dn.version?vs(hi,dn,$t):e.bindTexture(35866,hi.__webglTexture,33984+$t)},this.setTexture3D=function Ti(dn,$t){const hi=n.get(dn);dn.version>0&&hi.__version!==dn.version?vs(hi,dn,$t):e.bindTexture(32879,hi.__webglTexture,33984+$t)},this.setTextureCube=function sr(dn,$t){const hi=n.get(dn);dn.version>0&&hi.__version!==dn.version?function ys(dn,$t,hi){if(6!==$t.image.length)return;const dr=ws(dn,$t),Ar=$t.source;e.bindTexture(34067,dn.__webglTexture,33984+hi);const jr=n.get(Ar);if(Ar.version!==jr.__version||!0===dr){e.activeTexture(33984+hi),i.pixelStorei(37440,$t.flipY),i.pixelStorei(37441,$t.premultiplyAlpha),i.pixelStorei(3317,$t.unpackAlignment),i.pixelStorei(37443,0);const Js=$t.isCompressedTexture||$t.image[0].isCompressedTexture,qr=$t.image[0]&&$t.image[0].isDataTexture,zi=[];for(let Si=0;Si<6;Si++)zi[Si]=Js||qr?qr?$t.image[Si].image:$t.image[Si]:Ae($t.image[Si],!1,!0,p),zi[Si]=wl($t,zi[Si]);const Ls=zi[0],Ks=Le(Ls)||l,_s=s.convert($t.format,$t.encoding),Gs=s.convert($t.type),Rs=at($t.internalFormat,_s,Gs,$t.encoding),Ia=l&&!0!==$t.isVideoTexture,lc=void 0===jr.__version||!0===dr;let Pn,xh=Lt($t,Ls,Ks);if(Li(34067,$t,Ks),Js){Ia&&lc&&e.texStorage2D(34067,xh,Rs,Ls.width,Ls.height);for(let Si=0;Si<6;Si++){Pn=zi[Si].mipmaps;for(let hr=0;hr<Pn.length;hr++){const Qr=Pn[hr];$t.format!==wg?null!==_s?Ia?e.compressedTexSubImage2D(34069+Si,hr,0,0,Qr.width,Qr.height,_s,Qr.data):e.compressedTexImage2D(34069+Si,hr,Rs,Qr.width,Qr.height,0,Qr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ia?e.texSubImage2D(34069+Si,hr,0,0,Qr.width,Qr.height,_s,Gs,Qr.data):e.texImage2D(34069+Si,hr,Rs,Qr.width,Qr.height,0,_s,Gs,Qr.data)}}}else{Pn=$t.mipmaps,Ia&&lc&&(Pn.length>0&&xh++,e.texStorage2D(34067,xh,Rs,zi[0].width,zi[0].height));for(let Si=0;Si<6;Si++)if(qr){Ia?e.texSubImage2D(34069+Si,0,0,0,zi[Si].width,zi[Si].height,_s,Gs,zi[Si].data):e.texImage2D(34069+Si,0,Rs,zi[Si].width,zi[Si].height,0,_s,Gs,zi[Si].data);for(let hr=0;hr<Pn.length;hr++){const As=Pn[hr].image[Si].image;Ia?e.texSubImage2D(34069+Si,hr+1,0,0,As.width,As.height,_s,Gs,As.data):e.texImage2D(34069+Si,hr+1,Rs,As.width,As.height,0,_s,Gs,As.data)}}else{Ia?e.texSubImage2D(34069+Si,0,0,0,_s,Gs,zi[Si]):e.texImage2D(34069+Si,0,Rs,_s,Gs,zi[Si]);for(let hr=0;hr<Pn.length;hr++){const Qr=Pn[hr];Ia?e.texSubImage2D(34069+Si,hr+1,0,0,_s,Gs,Qr.image[Si]):e.texImage2D(34069+Si,hr+1,Rs,_s,Gs,Qr.image[Si])}}}_t($t,Ks)&&Ut(34067),jr.__version=Ar.version,$t.onUpdate&&$t.onUpdate($t)}dn.__version=$t.version}(hi,dn,$t):e.bindTexture(34067,hi.__webglTexture,33984+$t)},this.rebindTextures=function xr(dn,$t,hi){const dr=n.get(dn);void 0!==$t&&Pr(dr.__webglFramebuffer,dn,dn.texture,36064,3553),void 0!==hi&&Bi(dn)},this.setupRenderTarget=function fs(dn){const $t=dn.texture,hi=n.get(dn),dr=n.get($t);dn.addEventListener("dispose",ii),!0!==dn.isWebGLMultipleRenderTargets&&(void 0===dr.__webglTexture&&(dr.__webglTexture=i.createTexture()),dr.__version=$t.version,o.memory.textures++);const Ar=!0===dn.isWebGLCubeRenderTarget,jr=!0===dn.isWebGLMultipleRenderTargets,Js=Le(dn)||l;if(Ar){hi.__webglFramebuffer=[];for(let qr=0;qr<6;qr++)hi.__webglFramebuffer[qr]=i.createFramebuffer()}else{if(hi.__webglFramebuffer=i.createFramebuffer(),jr)if(r.drawBuffers){const qr=dn.texture;for(let zi=0,Ls=qr.length;zi<Ls;zi++){const Ks=n.get(qr[zi]);void 0===Ks.__webglTexture&&(Ks.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&dn.samples>0&&!1===Vs(dn)){const qr=jr?$t:[$t];hi.__webglMultisampledFramebuffer=i.createFramebuffer(),hi.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,hi.__webglMultisampledFramebuffer);for(let zi=0;zi<qr.length;zi++){const Ls=qr[zi];hi.__webglColorRenderbuffer[zi]=i.createRenderbuffer(),i.bindRenderbuffer(36161,hi.__webglColorRenderbuffer[zi]);const Ks=s.convert(Ls.format,Ls.encoding),_s=s.convert(Ls.type),Gs=at(Ls.internalFormat,Ks,_s,Ls.encoding,!0===dn.isXRRenderTarget),Rs=Ys(dn);i.renderbufferStorageMultisample(36161,Rs,Gs,dn.width,dn.height),i.framebufferRenderbuffer(36160,36064+zi,36161,hi.__webglColorRenderbuffer[zi])}i.bindRenderbuffer(36161,null),dn.depthBuffer&&(hi.__webglDepthRenderbuffer=i.createRenderbuffer(),Io(hi.__webglDepthRenderbuffer,dn,!0)),e.bindFramebuffer(36160,null)}}if(Ar){e.bindTexture(34067,dr.__webglTexture),Li(34067,$t,Js);for(let qr=0;qr<6;qr++)Pr(hi.__webglFramebuffer[qr],dn,$t,36064,34069+qr);_t($t,Js)&&Ut(34067),e.unbindTexture()}else if(jr){const qr=dn.texture;for(let zi=0,Ls=qr.length;zi<Ls;zi++){const Ks=qr[zi],_s=n.get(Ks);e.bindTexture(3553,_s.__webglTexture),Li(3553,Ks,Js),Pr(hi.__webglFramebuffer,dn,Ks,36064+zi,3553),_t(Ks,Js)&&Ut(3553)}e.unbindTexture()}else{let qr=3553;(dn.isWebGL3DRenderTarget||dn.isWebGLArrayRenderTarget)&&(l?qr=dn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(qr,dr.__webglTexture),Li(qr,$t,Js),Pr(hi.__webglFramebuffer,dn,$t,36064,qr),_t($t,Js)&&Ut(qr),e.unbindTexture()}dn.depthBuffer&&Bi(dn)},this.updateRenderTargetMipmap=function Br(dn){const $t=Le(dn)||l,hi=!0===dn.isWebGLMultipleRenderTargets?dn.texture:[dn.texture];for(let dr=0,Ar=hi.length;dr<Ar;dr++){const jr=hi[dr];if(_t(jr,$t)){const Js=dn.isWebGLCubeRenderTarget?34067:3553,qr=n.get(jr).__webglTexture;e.bindTexture(Js,qr),Ut(Js),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function yo(dn){if(l&&dn.samples>0&&!1===Vs(dn)){const $t=dn.isWebGLMultipleRenderTargets?dn.texture:[dn.texture],hi=dn.width,dr=dn.height;let Ar=16384;const jr=[],Js=dn.stencilBuffer?33306:36096,qr=n.get(dn),zi=!0===dn.isWebGLMultipleRenderTargets;if(zi)for(let Ls=0;Ls<$t.length;Ls++)e.bindFramebuffer(36160,qr.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ls,36161,null),e.bindFramebuffer(36160,qr.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ls,3553,null,0);e.bindFramebuffer(36008,qr.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,qr.__webglFramebuffer);for(let Ls=0;Ls<$t.length;Ls++){jr.push(36064+Ls),dn.depthBuffer&&jr.push(Js);const Ks=void 0!==qr.__ignoreDepthValues&&qr.__ignoreDepthValues;if(!1===Ks&&(dn.depthBuffer&&(Ar|=256),dn.stencilBuffer&&(Ar|=1024)),zi&&i.framebufferRenderbuffer(36008,36064,36161,qr.__webglColorRenderbuffer[Ls]),!0===Ks&&(i.invalidateFramebuffer(36008,[Js]),i.invalidateFramebuffer(36009,[Js])),zi){const _s=n.get($t[Ls]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,_s,0)}i.blitFramebuffer(0,0,hi,dr,0,0,hi,dr,Ar,9728),T&&i.invalidateFramebuffer(36008,jr)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),zi)for(let Ls=0;Ls<$t.length;Ls++){e.bindFramebuffer(36160,qr.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ls,36161,qr.__webglColorRenderbuffer[Ls]);const Ks=n.get($t[Ls]).__webglTexture;e.bindFramebuffer(36160,qr.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ls,3553,Ks,0)}e.bindFramebuffer(36009,qr.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Bi,this.setupFrameBufferTexture=Pr,this.useMultisampledRTT=Vs}function MCe(i,t,e){const n=e.isWebGL2;return{convert:function r(s,o=null){let l;if(s===F0)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===N0)return 5125;if(s===__)return 5126;if(s===sx)return n?5131:(l=t.get("OES_texture_half_float"),null!==l?l.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===wg)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===B0)return 6402;if(s===IC)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return l=t.get("EXT_sRGB"),null!==l?l.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===Kc){if(l=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===l)return null;if(33776===s)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(l=t.get("WEBGL_compressed_texture_s3tc"),null===l)return null;if(33776===s)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(l=t.get("WEBGL_compressed_texture_pvrtc"),null===l)return null;if(35840===s)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return l=t.get("WEBGL_compressed_texture_etc1"),null!==l?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(l=t.get("WEBGL_compressed_texture_etc"),null===l)return null;if(37492===s)return o===Kc?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(37496===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(l=t.get("WEBGL_compressed_texture_astc"),null===l)return null;if(37808===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===Kc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(l=t.get("EXT_texture_compression_bptc"),null===l)return null;if(36492===s)return o===Kc?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===xC?n?34042:(l=t.get("WEBGL_depth_texture"),null!==l?l.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class DCe extends td{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class YC extends Hf{constructor(){super(),this.isGroup=!0,this.type="Group"}}const LCe={type:"move"};class RR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new YC,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new YC,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new en,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new en),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new YC,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new en,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new en),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,p=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(p&&t.hand){o=!0;for(const W of t.hand.values()){const K=e.getJointPose(W,n);if(void 0===p.joints[W.jointName]){const Te=new YC;Te.matrixAutoUpdate=!1,Te.visible=!1,p.joints[W.jointName]=Te,p.add(Te)}const he=p.joints[W.jointName];null!==K&&(he.matrix.fromArray(K.transform.matrix),he.matrix.decompose(he.position,he.rotation,he.scale),he.jointRadius=K.radius),he.visible=null!==K}const I=p.joints["index-finger-tip"].position.distanceTo(p.joints["thumb-tip"].position),T=.02,k=.005;p.inputState.pinching&&I>T+k?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&I<=T-k&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==u&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));null!==l&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(LCe)))}return null!==l&&(l.visible=null!==r),null!==u&&(u.visible=null!==s),null!==p&&(p.visible=null!==o),this}}class RCe extends b_{constructor(t,e,n,r,s,o,l,u,p,v){if((v=void 0!==v?v:B0)!==B0&&v!==IC)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&v===B0&&(n=N0),void 0===n&&v===IC&&(n=xC),super(null,r,s,o,l,u,v,n,p),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==l?l:Ju,this.minFilter=void 0!==u?u:Ju,this.flipY=!1,this.generateMipmaps=!1}}class PCe extends TC{constructor(t,e){super();const n=this;let r=null,s=1,o=null,l="local-floor",u=null,p=null,v=null,w=null,I=null,T=null;const k=e.getContextAttributes();let W=null,K=null;const he=[],Te=[],Ae=new td;Ae.layers.enable(1),Ae.viewport=new fl;const Le=new td;Le.layers.enable(2),Le.viewport=new fl;const tt=[Ae,Le],_t=new DCe;_t.layers.enable(1),_t.layers.enable(2);let Ut=null,at=null;function Lt(Sn){const Hn=Te.indexOf(Sn.inputSource);if(-1===Hn)return;const Yi=he[Hn];void 0!==Yi&&Yi.dispatchEvent({type:Sn.type,data:Sn.inputSource})}function cn(){r.removeEventListener("select",Lt),r.removeEventListener("selectstart",Lt),r.removeEventListener("selectend",Lt),r.removeEventListener("squeeze",Lt),r.removeEventListener("squeezestart",Lt),r.removeEventListener("squeezeend",Lt),r.removeEventListener("end",cn),r.removeEventListener("inputsourceschange",Gn);for(let Sn=0;Sn<he.length;Sn++){const Hn=Te[Sn];null!==Hn&&(Te[Sn]=null,he[Sn].disconnect(Hn))}Ut=null,at=null,t.setRenderTarget(W),I=null,w=null,v=null,r=null,K=null,zn.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function Gn(Sn){for(let Hn=0;Hn<Sn.removed.length;Hn++){const Yi=Sn.removed[Hn],Ti=Te.indexOf(Yi);Ti>=0&&(Te[Ti]=null,he[Ti].dispatchEvent({type:"disconnected",data:Yi}))}for(let Hn=0;Hn<Sn.added.length;Hn++){const Yi=Sn.added[Hn];let Ti=Te.indexOf(Yi);if(-1===Ti){for(let fr=0;fr<he.length;fr++){if(fr>=Te.length){Te.push(Yi),Ti=fr;break}if(null===Te[fr]){Te[fr]=Yi,Ti=fr;break}}if(-1===Ti)break}const sr=he[Ti];sr&&sr.dispatchEvent({type:"connected",data:Yi})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Sn){let Hn=he[Sn];return void 0===Hn&&(Hn=new RR,he[Sn]=Hn),Hn.getTargetRaySpace()},this.getControllerGrip=function(Sn){let Hn=he[Sn];return void 0===Hn&&(Hn=new RR,he[Sn]=Hn),Hn.getGripSpace()},this.getHand=function(Sn){let Hn=he[Sn];return void 0===Hn&&(Hn=new RR,he[Sn]=Hn),Hn.getHandSpace()},this.setFramebufferScaleFactor=function(Sn){s=Sn,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Sn){l=Sn,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(Sn){u=Sn},this.getBaseLayer=function(){return null!==w?w:I},this.getBinding=function(){return v},this.getFrame=function(){return T},this.getSession=function(){return r},this.setSession=function(){var Sn=tv(function*(Hn){if(r=Hn,null!==r){if(W=t.getRenderTarget(),r.addEventListener("select",Lt),r.addEventListener("selectstart",Lt),r.addEventListener("selectend",Lt),r.addEventListener("squeeze",Lt),r.addEventListener("squeezestart",Lt),r.addEventListener("squeezeend",Lt),r.addEventListener("end",cn),r.addEventListener("inputsourceschange",Gn),!0!==k.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)I=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||k.antialias,alpha:k.alpha,depth:k.depth,stencil:k.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:I}),K=new W0(I.framebufferWidth,I.framebufferHeight,{format:wg,type:F0,encoding:t.outputEncoding,stencilBuffer:k.stencil});else{let Yi=null,Ti=null,sr=null;k.depth&&(sr=k.stencil?35056:33190,Yi=k.stencil?IC:B0,Ti=k.stencil?xC:N0);const fr={colorFormat:32856,depthFormat:sr,scaleFactor:s};v=new XRWebGLBinding(r,e),w=v.createProjectionLayer(fr),r.updateRenderState({layers:[w]}),K=new W0(w.textureWidth,w.textureHeight,{format:wg,type:F0,depthTexture:new RCe(w.textureWidth,w.textureHeight,Ti,void 0,void 0,void 0,void 0,void 0,void 0,Yi),stencilBuffer:k.stencil,encoding:t.outputEncoding,samples:k.antialias?4:0}),t.properties.get(K).__ignoreDepthValues=w.ignoreDepthValues}K.isXRRenderTarget=!0,this.setFoveation(1),u=null,o=yield r.requestReferenceSpace(l),zn.setContext(r),zn.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Hn){return Sn.apply(this,arguments)}}();const ii=new en,jn=new en;function Un(Sn,Hn){null===Hn?Sn.matrixWorld.copy(Sn.matrix):Sn.matrixWorld.multiplyMatrices(Hn.matrixWorld,Sn.matrix),Sn.matrixWorldInverse.copy(Sn.matrixWorld).invert()}this.updateCamera=function(Sn){if(null===r)return;_t.near=Le.near=Ae.near=Sn.near,_t.far=Le.far=Ae.far=Sn.far,(Ut!==_t.near||at!==_t.far)&&(r.updateRenderState({depthNear:_t.near,depthFar:_t.far}),Ut=_t.near,at=_t.far);const Hn=Sn.parent,Yi=_t.cameras;Un(_t,Hn);for(let sr=0;sr<Yi.length;sr++)Un(Yi[sr],Hn);_t.matrixWorld.decompose(_t.position,_t.quaternion,_t.scale),Sn.matrix.copy(_t.matrix),Sn.matrix.decompose(Sn.position,Sn.quaternion,Sn.scale);const Ti=Sn.children;for(let sr=0,fr=Ti.length;sr<fr;sr++)Ti[sr].updateMatrixWorld(!0);2===Yi.length?function Mn(Sn,Hn,Yi){ii.setFromMatrixPosition(Hn.matrixWorld),jn.setFromMatrixPosition(Yi.matrixWorld);const Ti=ii.distanceTo(jn),sr=Hn.projectionMatrix.elements,fr=Yi.projectionMatrix.elements,Es=sr[14]/(sr[10]-1),Li=sr[14]/(sr[10]+1),ws=(sr[9]+1)/sr[5],vs=(sr[9]-1)/sr[5],ys=(sr[8]-1)/sr[0],Pr=(fr[8]+1)/fr[0],Io=Es*ys,Gi=Es*Pr,Bi=Ti/(-ys+Pr),xr=Bi*-ys;Hn.matrixWorld.decompose(Sn.position,Sn.quaternion,Sn.scale),Sn.translateX(xr),Sn.translateZ(Bi),Sn.matrixWorld.compose(Sn.position,Sn.quaternion,Sn.scale),Sn.matrixWorldInverse.copy(Sn.matrixWorld).invert();const fs=Es+Bi,Br=Li+Bi;Sn.projectionMatrix.makePerspective(Io-xr,Gi+(Ti-xr),ws*Li/Br*fs,vs*Li/Br*fs,fs,Br)}(_t,Ae,Le):_t.projectionMatrix.copy(Ae.projectionMatrix)},this.getCamera=function(){return _t},this.getFoveation=function(){return null!==w?w.fixedFoveation:null!==I?I.fixedFoveation:void 0},this.setFoveation=function(Sn){null!==w&&(w.fixedFoveation=Sn),null!==I&&void 0!==I.fixedFoveation&&(I.fixedFoveation=Sn)};let In=null;const zn=new sG;zn.setAnimationLoop(function Wn(Sn,Hn){if(p=Hn.getViewerPose(u||o),T=Hn,null!==p){const Yi=p.views;null!==I&&(t.setRenderTargetFramebuffer(K,I.framebuffer),t.setRenderTarget(K));let Ti=!1;Yi.length!==_t.cameras.length&&(_t.cameras.length=0,Ti=!0);for(let sr=0;sr<Yi.length;sr++){const fr=Yi[sr];let Es=null;if(null!==I)Es=I.getViewport(fr);else{const ws=v.getViewSubImage(w,fr);Es=ws.viewport,0===sr&&(t.setRenderTargetTextures(K,ws.colorTexture,w.ignoreDepthValues?void 0:ws.depthStencilTexture),t.setRenderTarget(K))}let Li=tt[sr];void 0===Li&&(Li=new td,Li.layers.enable(sr),Li.viewport=new fl,tt[sr]=Li),Li.matrix.fromArray(fr.transform.matrix),Li.projectionMatrix.fromArray(fr.projectionMatrix),Li.viewport.set(Es.x,Es.y,Es.width,Es.height),0===sr&&_t.matrix.copy(Li.matrix),!0===Ti&&_t.cameras.push(Li)}}for(let Yi=0;Yi<he.length;Yi++){const Ti=Te[Yi],sr=he[Yi];null!==Ti&&void 0!==sr&&sr.update(Ti,Hn,u||o)}In&&In(Sn,Hn),T=null}),this.setAnimationLoop=function(Sn){In=Sn},this.dispose=function(){}}}function kCe(i,t){function r(W,K){W.opacity.value=K.opacity,K.color&&W.diffuse.value.copy(K.color),K.emissive&&W.emissive.value.copy(K.emissive).multiplyScalar(K.emissiveIntensity),K.map&&(W.map.value=K.map),K.alphaMap&&(W.alphaMap.value=K.alphaMap),K.bumpMap&&(W.bumpMap.value=K.bumpMap,W.bumpScale.value=K.bumpScale,1===K.side&&(W.bumpScale.value*=-1)),K.displacementMap&&(W.displacementMap.value=K.displacementMap,W.displacementScale.value=K.displacementScale,W.displacementBias.value=K.displacementBias),K.emissiveMap&&(W.emissiveMap.value=K.emissiveMap),K.normalMap&&(W.normalMap.value=K.normalMap,W.normalScale.value.copy(K.normalScale),1===K.side&&W.normalScale.value.negate()),K.specularMap&&(W.specularMap.value=K.specularMap),K.alphaTest>0&&(W.alphaTest.value=K.alphaTest);const he=t.get(K).envMap;if(he&&(W.envMap.value=he,W.flipEnvMap.value=he.isCubeTexture&&!1===he.isRenderTargetTexture?-1:1,W.reflectivity.value=K.reflectivity,W.ior.value=K.ior,W.refractionRatio.value=K.refractionRatio),K.lightMap){W.lightMap.value=K.lightMap;const Le=!0!==i.physicallyCorrectLights?Math.PI:1;W.lightMapIntensity.value=K.lightMapIntensity*Le}let Te,Ae;K.aoMap&&(W.aoMap.value=K.aoMap,W.aoMapIntensity.value=K.aoMapIntensity),K.map?Te=K.map:K.specularMap?Te=K.specularMap:K.displacementMap?Te=K.displacementMap:K.normalMap?Te=K.normalMap:K.bumpMap?Te=K.bumpMap:K.roughnessMap?Te=K.roughnessMap:K.metalnessMap?Te=K.metalnessMap:K.alphaMap?Te=K.alphaMap:K.emissiveMap?Te=K.emissiveMap:K.clearcoatMap?Te=K.clearcoatMap:K.clearcoatNormalMap?Te=K.clearcoatNormalMap:K.clearcoatRoughnessMap?Te=K.clearcoatRoughnessMap:K.iridescenceMap?Te=K.iridescenceMap:K.iridescenceThicknessMap?Te=K.iridescenceThicknessMap:K.specularIntensityMap?Te=K.specularIntensityMap:K.specularColorMap?Te=K.specularColorMap:K.transmissionMap?Te=K.transmissionMap:K.thicknessMap?Te=K.thicknessMap:K.sheenColorMap?Te=K.sheenColorMap:K.sheenRoughnessMap&&(Te=K.sheenRoughnessMap),void 0!==Te&&(Te.isWebGLRenderTarget&&(Te=Te.texture),!0===Te.matrixAutoUpdate&&Te.updateMatrix(),W.uvTransform.value.copy(Te.matrix)),K.aoMap?Ae=K.aoMap:K.lightMap&&(Ae=K.lightMap),void 0!==Ae&&(Ae.isWebGLRenderTarget&&(Ae=Ae.texture),!0===Ae.matrixAutoUpdate&&Ae.updateMatrix(),W.uv2Transform.value.copy(Ae.matrix))}return{refreshFogUniforms:function e(W,K){W.fogColor.value.copy(K.color),K.isFog?(W.fogNear.value=K.near,W.fogFar.value=K.far):K.isFogExp2&&(W.fogDensity.value=K.density)},refreshMaterialUniforms:function n(W,K,he,Te,Ae){K.isMeshBasicMaterial||K.isMeshLambertMaterial?r(W,K):K.isMeshToonMaterial?(r(W,K),function v(W,K){K.gradientMap&&(W.gradientMap.value=K.gradientMap)}(W,K)):K.isMeshPhongMaterial?(r(W,K),function p(W,K){W.specular.value.copy(K.specular),W.shininess.value=Math.max(K.shininess,1e-4)}(W,K)):K.isMeshStandardMaterial?(r(W,K),function w(W,K){W.roughness.value=K.roughness,W.metalness.value=K.metalness,K.roughnessMap&&(W.roughnessMap.value=K.roughnessMap),K.metalnessMap&&(W.metalnessMap.value=K.metalnessMap),t.get(K).envMap&&(W.envMapIntensity.value=K.envMapIntensity)}(W,K),K.isMeshPhysicalMaterial&&function I(W,K,he){W.ior.value=K.ior,K.sheen>0&&(W.sheenColor.value.copy(K.sheenColor).multiplyScalar(K.sheen),W.sheenRoughness.value=K.sheenRoughness,K.sheenColorMap&&(W.sheenColorMap.value=K.sheenColorMap),K.sheenRoughnessMap&&(W.sheenRoughnessMap.value=K.sheenRoughnessMap)),K.clearcoat>0&&(W.clearcoat.value=K.clearcoat,W.clearcoatRoughness.value=K.clearcoatRoughness,K.clearcoatMap&&(W.clearcoatMap.value=K.clearcoatMap),K.clearcoatRoughnessMap&&(W.clearcoatRoughnessMap.value=K.clearcoatRoughnessMap),K.clearcoatNormalMap&&(W.clearcoatNormalScale.value.copy(K.clearcoatNormalScale),W.clearcoatNormalMap.value=K.clearcoatNormalMap,1===K.side&&W.clearcoatNormalScale.value.negate())),K.iridescence>0&&(W.iridescence.value=K.iridescence,W.iridescenceIOR.value=K.iridescenceIOR,W.iridescenceThicknessMinimum.value=K.iridescenceThicknessRange[0],W.iridescenceThicknessMaximum.value=K.iridescenceThicknessRange[1],K.iridescenceMap&&(W.iridescenceMap.value=K.iridescenceMap),K.iridescenceThicknessMap&&(W.iridescenceThicknessMap.value=K.iridescenceThicknessMap)),K.transmission>0&&(W.transmission.value=K.transmission,W.transmissionSamplerMap.value=he.texture,W.transmissionSamplerSize.value.set(he.width,he.height),K.transmissionMap&&(W.transmissionMap.value=K.transmissionMap),W.thickness.value=K.thickness,K.thicknessMap&&(W.thicknessMap.value=K.thicknessMap),W.attenuationDistance.value=K.attenuationDistance,W.attenuationColor.value.copy(K.attenuationColor)),W.specularIntensity.value=K.specularIntensity,W.specularColor.value.copy(K.specularColor),K.specularIntensityMap&&(W.specularIntensityMap.value=K.specularIntensityMap),K.specularColorMap&&(W.specularColorMap.value=K.specularColorMap)}(W,K,Ae)):K.isMeshMatcapMaterial?(r(W,K),function T(W,K){K.matcap&&(W.matcap.value=K.matcap)}(W,K)):K.isMeshDepthMaterial?r(W,K):K.isMeshDistanceMaterial?(r(W,K),function k(W,K){W.referencePosition.value.copy(K.referencePosition),W.nearDistance.value=K.nearDistance,W.farDistance.value=K.farDistance}(W,K)):K.isMeshNormalMaterial?r(W,K):K.isLineBasicMaterial?(function s(W,K){W.diffuse.value.copy(K.color),W.opacity.value=K.opacity}(W,K),K.isLineDashedMaterial&&function o(W,K){W.dashSize.value=K.dashSize,W.totalSize.value=K.dashSize+K.gapSize,W.scale.value=K.scale}(W,K)):K.isPointsMaterial?function l(W,K,he,Te){let Ae;W.diffuse.value.copy(K.color),W.opacity.value=K.opacity,W.size.value=K.size*he,W.scale.value=.5*Te,K.map&&(W.map.value=K.map),K.alphaMap&&(W.alphaMap.value=K.alphaMap),K.alphaTest>0&&(W.alphaTest.value=K.alphaTest),K.map?Ae=K.map:K.alphaMap&&(Ae=K.alphaMap),void 0!==Ae&&(!0===Ae.matrixAutoUpdate&&Ae.updateMatrix(),W.uvTransform.value.copy(Ae.matrix))}(W,K,he,Te):K.isSpriteMaterial?function u(W,K){let he;W.diffuse.value.copy(K.color),W.opacity.value=K.opacity,W.rotation.value=K.rotation,K.map&&(W.map.value=K.map),K.alphaMap&&(W.alphaMap.value=K.alphaMap),K.alphaTest>0&&(W.alphaTest.value=K.alphaTest),K.map?he=K.map:K.alphaMap&&(he=K.alphaMap),void 0!==he&&(!0===he.matrixAutoUpdate&&he.updateMatrix(),W.uvTransform.value.copy(he.matrix))}(W,K):K.isShadowMaterial?(W.color.value.copy(K.color),W.opacity.value=K.opacity):K.isShaderMaterial&&(K.uniformsNeedUpdate=!1)}}}function OCe(i,t,e,n){let r={},s={},o=[];const l=e.isWebGL2?i.getParameter(35375):0;function T(Te,Ae,Le){const tt=Te.value;if(void 0===Le[Ae])return Le[Ae]="number"==typeof tt?tt:tt.clone(),!0;if("number"==typeof tt){if(Le[Ae]!==tt)return Le[Ae]=tt,!0}else{const _t=Le[Ae];if(!1===_t.equals(tt))return _t.copy(tt),!0}return!1}function W(Te){const Ae=Te.value,Le={boundary:0,storage:0};return"number"==typeof Ae?(Le.boundary=4,Le.storage=4):Ae.isVector2?(Le.boundary=8,Le.storage=8):Ae.isVector3||Ae.isColor?(Le.boundary=16,Le.storage=12):Ae.isVector4?(Le.boundary=16,Le.storage=16):Ae.isMatrix3?(Le.boundary=48,Le.storage=48):Ae.isMatrix4?(Le.boundary=64,Le.storage=64):Ae.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Ae),Le}function K(Te){const Ae=Te.target;Ae.removeEventListener("dispose",K);const Le=o.indexOf(Ae.__bindingPointIndex);o.splice(Le,1),i.deleteBuffer(r[Ae.id]),delete r[Ae.id],delete s[Ae.id]}return{bind:function u(Te,Ae){n.uniformBlockBinding(Te,Ae.program)},update:function p(Te,Ae){let Le=r[Te.id];void 0===Le&&(function k(Te){const Ae=Te.uniforms;let Le=0;let _t=0;for(let Ut=0,at=Ae.length;Ut<at;Ut++){const Lt=Ae[Ut],cn=W(Lt);if(Lt.__data=new Float32Array(cn.storage/Float32Array.BYTES_PER_ELEMENT),Lt.__offset=Le,Ut>0){_t=Le%16;const Gn=16-_t;0!==_t&&Gn-cn.boundary<0&&(Le+=16-_t,Lt.__offset=Le)}Le+=cn.storage}_t=Le%16,_t>0&&(Le+=16-_t),Te.__size=Le,Te.__cache={}}(Te),Le=function v(Te){const Ae=function w(){for(let Te=0;Te<l;Te++)if(-1===o.indexOf(Te))return o.push(Te),Te;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();Te.__bindingPointIndex=Ae;const Le=i.createBuffer(),tt=Te.__size,_t=Te.usage;return i.bindBuffer(35345,Le),i.bufferData(35345,tt,_t),i.bindBuffer(35345,null),i.bindBufferBase(35345,Ae,Le),Le}(Te),r[Te.id]=Le,Te.addEventListener("dispose",K)),n.updateUBOMapping(Te,Ae.program);const _t=t.render.frame;s[Te.id]!==_t&&(function I(Te){const Le=Te.uniforms,tt=Te.__cache;i.bindBuffer(35345,r[Te.id]);for(let _t=0,Ut=Le.length;_t<Ut;_t++){const at=Le[_t];if(!0===T(at,_t,tt)){const Lt=at.value,cn=at.__offset;"number"==typeof Lt?(at.__data[0]=Lt,i.bufferSubData(35345,cn,at.__data)):(at.value.isMatrix3?(at.__data[0]=at.value.elements[0],at.__data[1]=at.value.elements[1],at.__data[2]=at.value.elements[2],at.__data[3]=at.value.elements[0],at.__data[4]=at.value.elements[3],at.__data[5]=at.value.elements[4],at.__data[6]=at.value.elements[5],at.__data[7]=at.value.elements[0],at.__data[8]=at.value.elements[6],at.__data[9]=at.value.elements[7],at.__data[10]=at.value.elements[8],at.__data[11]=at.value.elements[0]):Lt.toArray(at.__data),i.bufferSubData(35345,cn,at.__data))}}i.bindBuffer(35345,null)}(Te),s[Te.id]=_t)},dispose:function he(){for(const Te in r)i.deleteBuffer(r[Te]);o=[],r={},s={}}}}function kG(i={}){this.isWebGLRenderer=!0;const t=void 0!==i.canvas?i.canvas:function FCe(){const i=lx("canvas");return i.style.display="block",i}(),e=void 0!==i.context?i.context:null,n=void 0===i.depth||i.depth,r=void 0===i.stencil||i.stencil,s=void 0!==i.antialias&&i.antialias,o=void 0===i.premultipliedAlpha||i.premultipliedAlpha,l=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,u=void 0!==i.powerPreference?i.powerPreference:"default",p=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let v;v=null!==e?e.getContextAttributes().alpha:void 0!==i.alpha&&i.alpha;let w=null,I=null;const T=[],k=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=z0,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const W=this;let K=!1,he=0,Te=0,Ae=null,Le=-1,tt=null;const _t=new fl,Ut=new fl;let at=null,Lt=t.width,cn=t.height,Gn=1,ii=null,jn=null;const Mn=new fl(0,0,Lt,cn),Un=new fl(0,0,Lt,cn);let In=!1;const Wn=new IR;let zn=!1,Sn=!1,Hn=null;const Yi=new vo,Ti=new Xi,sr=new en,fr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Es(){return null===Ae?Gn:1}let vs,ys,Pr,Io,Gi,Bi,xr,fs,Br,yo,Ys,Vs,jl,wl,dn,$t,hi,dr,Ar,jr,Js,qr,zi,Ls,Li=e;function ws(rn,ti){for(let wi=0;wi<rn.length;wi++){const Fi=t.getContext(rn[wi],ti);if(null!==Fi)return Fi}return null}try{const rn={alpha:!0,depth:n,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r146"),t.addEventListener("webglcontextlost",Gs,!1),t.addEventListener("webglcontextrestored",Rs,!1),t.addEventListener("webglcontextcreationerror",Ia,!1),null===Li){const ti=["webgl2","webgl","experimental-webgl"];if(!0===W.isWebGL1Renderer&&ti.shift(),Li=ws(ti,rn),null===Li)throw ws(ti)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Li.getShaderPrecisionFormat&&(Li.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(rn){throw console.error("THREE.WebGLRenderer: "+rn.message),rn}function Ks(){vs=new Y0e(Li),ys=new G0e(Li,vs,i),vs.init(ys),qr=new MCe(Li,vs,ys),Pr=new ECe(Li,vs,ys),Io=new Q0e,Gi=new gCe,Bi=new TCe(Li,vs,Pr,Gi,ys,qr,Io),xr=new j0e(W),fs=new X0e(W),Br=new Uye(Li,ys),zi=new U0e(Li,vs,Br,ys),yo=new K0e(Li,Br,Io,zi),Ys=new nbe(Li,yo,Br,Io),Ar=new tbe(Li,ys,Bi),$t=new W0e(Gi),Vs=new pCe(W,xr,fs,vs,ys,zi,$t),jl=new kCe(W,Gi),wl=new vCe,dn=new ACe(vs,ys),dr=new V0e(W,xr,fs,Pr,Ys,v,o),hi=new SCe(W,Ys,ys),Ls=new OCe(Li,Io,ys,Pr),jr=new H0e(Li,vs,Io,ys),Js=new Z0e(Li,vs,Io,ys),Io.programs=Vs.programs,W.capabilities=ys,W.extensions=vs,W.properties=Gi,W.renderLists=wl,W.shadowMap=hi,W.state=Pr,W.info=Io}Ks();const _s=new PCe(W,Li);function Gs(rn){rn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),K=!0}function Rs(){console.log("THREE.WebGLRenderer: Context Restored."),K=!1;const rn=Io.autoReset,ti=hi.enabled,wi=hi.autoUpdate,Xn=hi.needsUpdate,Fi=hi.type;Ks(),Io.autoReset=rn,hi.enabled=ti,hi.autoUpdate=wi,hi.needsUpdate=Xn,hi.type=Fi}function Ia(rn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",rn.statusMessage)}function lc(rn){const ti=rn.target;ti.removeEventListener("dispose",lc),function xh(rn){(function Pn(rn){const ti=Gi.get(rn).programs;void 0!==ti&&(ti.forEach(function(wi){Vs.releaseProgram(wi)}),rn.isShaderMaterial&&Vs.releaseShaderCache(rn))})(rn),Gi.remove(rn)}(ti)}this.xr=_s,this.getContext=function(){return Li},this.getContextAttributes=function(){return Li.getContextAttributes()},this.forceContextLoss=function(){const rn=vs.get("WEBGL_lose_context");rn&&rn.loseContext()},this.forceContextRestore=function(){const rn=vs.get("WEBGL_lose_context");rn&&rn.restoreContext()},this.getPixelRatio=function(){return Gn},this.setPixelRatio=function(rn){void 0!==rn&&(Gn=rn,this.setSize(Lt,cn,!1))},this.getSize=function(rn){return rn.set(Lt,cn)},this.setSize=function(rn,ti,wi){_s.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Lt=rn,cn=ti,t.width=Math.floor(rn*Gn),t.height=Math.floor(ti*Gn),!1!==wi&&(t.style.width=rn+"px",t.style.height=ti+"px"),this.setViewport(0,0,rn,ti))},this.getDrawingBufferSize=function(rn){return rn.set(Lt*Gn,cn*Gn).floor()},this.setDrawingBufferSize=function(rn,ti,wi){Lt=rn,cn=ti,Gn=wi,t.width=Math.floor(rn*wi),t.height=Math.floor(ti*wi),this.setViewport(0,0,rn,ti)},this.getCurrentViewport=function(rn){return rn.copy(_t)},this.getViewport=function(rn){return rn.copy(Mn)},this.setViewport=function(rn,ti,wi,Xn){rn.isVector4?Mn.set(rn.x,rn.y,rn.z,rn.w):Mn.set(rn,ti,wi,Xn),Pr.viewport(_t.copy(Mn).multiplyScalar(Gn).floor())},this.getScissor=function(rn){return rn.copy(Un)},this.setScissor=function(rn,ti,wi,Xn){rn.isVector4?Un.set(rn.x,rn.y,rn.z,rn.w):Un.set(rn,ti,wi,Xn),Pr.scissor(Ut.copy(Un).multiplyScalar(Gn).floor())},this.getScissorTest=function(){return In},this.setScissorTest=function(rn){Pr.setScissorTest(In=rn)},this.setOpaqueSort=function(rn){ii=rn},this.setTransparentSort=function(rn){jn=rn},this.getClearColor=function(rn){return rn.copy(dr.getClearColor())},this.setClearColor=function(){dr.setClearColor.apply(dr,arguments)},this.getClearAlpha=function(){return dr.getClearAlpha()},this.setClearAlpha=function(){dr.setClearAlpha.apply(dr,arguments)},this.clear=function(rn=!0,ti=!0,wi=!0){let Xn=0;rn&&(Xn|=16384),ti&&(Xn|=256),wi&&(Xn|=1024),Li.clear(Xn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Gs,!1),t.removeEventListener("webglcontextrestored",Rs,!1),t.removeEventListener("webglcontextcreationerror",Ia,!1),wl.dispose(),dn.dispose(),Gi.dispose(),xr.dispose(),fs.dispose(),Ys.dispose(),zi.dispose(),Ls.dispose(),Vs.dispose(),_s.dispose(),_s.removeEventListener("sessionstart",Qr),_s.removeEventListener("sessionend",As),Hn&&(Hn.dispose(),Hn=null),ja.stop()},this.renderBufferDirect=function(rn,ti,wi,Xn,Fi,Ns){null===ti&&(ti=fr);const lo=Fi.isMesh&&Fi.matrixWorld.determinant()<0,Go=function JTe(rn,ti,wi,Xn,Fi){!0!==ti.isScene&&(ti=fr),Bi.resetTextureUnits();const Ns=ti.fog,Go=null===Ae?W.outputEncoding:!0===Ae.isXRRenderTarget?Ae.texture.encoding:z0,Oo=(Xn.isMeshStandardMaterial?fs:xr).get(Xn.envMap||(Xn.isMeshStandardMaterial?ti.environment:null)),$a=!0===Xn.vertexColors&&!!wi.attributes.color&&4===wi.attributes.color.itemSize,ta=!!Xn.normalMap&&!!wi.attributes.tangent,ma=!!wi.morphAttributes.position,Qc=!!wi.morphAttributes.normal,hb=!!wi.morphAttributes.color,aw=Xn.toneMapped?W.toneMapping:0,lw=wi.morphAttributes.position||wi.morphAttributes.normal||wi.morphAttributes.color,mv=void 0!==lw?lw.length:0,qa=Gi.get(Xn),cw=I.state.lights;!0!==zn||!0!==Sn&&rn===tt||$t.setState(Xn,rn,rn===tt&&Xn.id===Le);let Pu=!1;Xn.version===qa.__version?(qa.needsLights&&qa.lightsStateVersion!==cw.state.version||qa.outputEncoding!==Go||Fi.isInstancedMesh&&!1===qa.instancing||!Fi.isInstancedMesh&&!0===qa.instancing||Fi.isSkinnedMesh&&!1===qa.skinning||!Fi.isSkinnedMesh&&!0===qa.skinning||qa.envMap!==Oo||!0===Xn.fog&&qa.fog!==Ns||void 0!==qa.numClippingPlanes&&(qa.numClippingPlanes!==$t.numPlanes||qa.numIntersection!==$t.numIntersection)||qa.vertexAlphas!==$a||qa.vertexTangents!==ta||qa.morphTargets!==ma||qa.morphNormals!==Qc||qa.morphColors!==hb||qa.toneMapping!==aw||!0===ys.isWebGL2&&qa.morphTargetsCount!==mv)&&(Pu=!0):(Pu=!0,qa.__version=Xn.version);let Tg=qa.currentProgram;!0===Pu&&(Tg=Eg(Xn,ti,Fi));let O_=!1,kx=!1,jP=!1;const df=Tg.getUniforms(),db=qa.uniforms;if(Pr.useProgram(Tg.program)&&(O_=!0,kx=!0,jP=!0),Xn.id!==Le&&(Le=Xn.id,kx=!0),O_||tt!==rn){if(df.setValue(Li,"projectionMatrix",rn.projectionMatrix),ys.logarithmicDepthBuffer&&df.setValue(Li,"logDepthBufFC",2/(Math.log(rn.far+1)/Math.LN2)),tt!==rn&&(tt=rn,kx=!0,jP=!0),Xn.isShaderMaterial||Xn.isMeshPhongMaterial||Xn.isMeshToonMaterial||Xn.isMeshStandardMaterial||Xn.envMap){const zp=df.map.cameraPosition;void 0!==zp&&zp.setValue(Li,sr.setFromMatrixPosition(rn.matrixWorld))}(Xn.isMeshPhongMaterial||Xn.isMeshToonMaterial||Xn.isMeshLambertMaterial||Xn.isMeshBasicMaterial||Xn.isMeshStandardMaterial||Xn.isShaderMaterial)&&df.setValue(Li,"isOrthographic",!0===rn.isOrthographicCamera),(Xn.isMeshPhongMaterial||Xn.isMeshToonMaterial||Xn.isMeshLambertMaterial||Xn.isMeshBasicMaterial||Xn.isMeshStandardMaterial||Xn.isShaderMaterial||Xn.isShadowMaterial||Fi.isSkinnedMesh)&&df.setValue(Li,"viewMatrix",rn.matrixWorldInverse)}if(Fi.isSkinnedMesh){df.setOptional(Li,Fi,"bindMatrix"),df.setOptional(Li,Fi,"bindMatrixInverse");const zp=Fi.skeleton;zp&&(ys.floatVertexTextures?(null===zp.boneTexture&&zp.computeBoneTexture(),df.setValue(Li,"boneTexture",zp.boneTexture,Bi),df.setValue(Li,"boneTextureSize",zp.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const $P=wi.morphAttributes;if((void 0!==$P.position||void 0!==$P.normal||void 0!==$P.color&&!0===ys.isWebGL2)&&Ar.update(Fi,wi,Xn,Tg),(kx||qa.receiveShadow!==Fi.receiveShadow)&&(qa.receiveShadow=Fi.receiveShadow,df.setValue(Li,"receiveShadow",Fi.receiveShadow)),Xn.isMeshGouraudMaterial&&null!==Xn.envMap&&(db.envMap.value=Oo,db.flipEnvMap.value=Oo.isCubeTexture&&!1===Oo.isRenderTargetTexture?-1:1),kx&&(df.setValue(Li,"toneMappingExposure",W.toneMappingExposure),qa.needsLights&&function eMe(rn,ti){rn.ambientLightColor.needsUpdate=ti,rn.lightProbe.needsUpdate=ti,rn.directionalLights.needsUpdate=ti,rn.directionalLightShadows.needsUpdate=ti,rn.pointLights.needsUpdate=ti,rn.pointLightShadows.needsUpdate=ti,rn.spotLights.needsUpdate=ti,rn.spotLightShadows.needsUpdate=ti,rn.rectAreaLights.needsUpdate=ti,rn.hemisphereLights.needsUpdate=ti}(db,jP),Ns&&!0===Xn.fog&&jl.refreshFogUniforms(db,Ns),jl.refreshMaterialUniforms(db,Xn,Gn,cn,Hn),pE.upload(Li,qa.uniformsList,db,Bi)),Xn.isShaderMaterial&&!0===Xn.uniformsNeedUpdate&&(pE.upload(Li,qa.uniformsList,db,Bi),Xn.uniformsNeedUpdate=!1),Xn.isSpriteMaterial&&df.setValue(Li,"center",Fi.center),df.setValue(Li,"modelViewMatrix",Fi.modelViewMatrix),df.setValue(Li,"normalMatrix",Fi.normalMatrix),df.setValue(Li,"modelMatrix",Fi.matrixWorld),Xn.isShaderMaterial||Xn.isRawShaderMaterial){const zp=Xn.uniformsGroups;for(let qP=0,nMe=zp.length;qP<nMe;qP++)if(ys.isWebGL2){const W6=zp[qP];Ls.update(W6,Tg),Ls.bind(W6,Tg)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Tg}(rn,ti,wi,Xn,Fi);Pr.setMaterial(Xn,lo);let Oo=wi.index;const $a=wi.attributes.position;if(null===Oo){if(void 0===$a||0===$a.count)return}else if(0===Oo.count)return;let ta=1;!0===Xn.wireframe&&(Oo=yo.getWireframeAttribute(wi),ta=2),zi.setup(Fi,Xn,Go,wi,Oo);let ma,Qc=jr;null!==Oo&&(ma=Br.get(Oo),Qc=Js,Qc.setIndex(ma));const hb=null!==Oo?Oo.count:$a.count,aw=wi.drawRange.start*ta,lw=wi.drawRange.count*ta,mv=null!==Ns?Ns.start*ta:0,qa=null!==Ns?Ns.count*ta:1/0,cw=Math.max(aw,mv),Pu=Math.min(hb,aw+lw,mv+qa)-1,Tg=Math.max(0,Pu-cw+1);if(0!==Tg){if(Fi.isMesh)!0===Xn.wireframe?(Pr.setLineWidth(Xn.wireframeLinewidth*Es()),Qc.setMode(1)):Qc.setMode(4);else if(Fi.isLine){let O_=Xn.linewidth;void 0===O_&&(O_=1),Pr.setLineWidth(O_*Es()),Qc.setMode(Fi.isLineSegments?1:Fi.isLineLoop?2:3)}else Fi.isPoints?Qc.setMode(0):Fi.isSprite&&Qc.setMode(4);if(Fi.isInstancedMesh)Qc.renderInstances(cw,Tg,Fi.count);else if(wi.isInstancedBufferGeometry){const O_=Math.min(wi.instanceCount,wi._maxInstanceCount);Qc.renderInstances(cw,Tg,O_)}else Qc.render(cw,Tg)}},this.compile=function(rn,ti){function wi(Xn,Fi,Ns){!0===Xn.transparent&&2===Xn.side?(Xn.side=1,Xn.needsUpdate=!0,Eg(Xn,Fi,Ns),Xn.side=0,Xn.needsUpdate=!0,Eg(Xn,Fi,Ns),Xn.side=2):Eg(Xn,Fi,Ns)}I=dn.get(rn),I.init(),k.push(I),rn.traverseVisible(function(Xn){Xn.isLight&&Xn.layers.test(ti.layers)&&(I.pushLight(Xn),Xn.castShadow&&I.pushShadow(Xn))}),I.setupLights(W.physicallyCorrectLights),rn.traverse(function(Xn){const Fi=Xn.material;if(Fi)if(Array.isArray(Fi))for(let Ns=0;Ns<Fi.length;Ns++)wi(Fi[Ns],rn,Xn);else wi(Fi,rn,Xn)}),k.pop(),I=null};let Si=null;function Qr(){ja.stop()}function As(){ja.start()}const ja=new sG;function Ih(rn,ti,wi,Xn){if(!1===rn.visible)return;if(rn.layers.test(ti.layers))if(rn.isGroup)wi=rn.renderOrder;else if(rn.isLOD)!0===rn.autoUpdate&&rn.update(ti);else if(rn.isLight)I.pushLight(rn),rn.castShadow&&I.pushShadow(rn);else if(rn.isSprite){if(!rn.frustumCulled||Wn.intersectsSprite(rn)){Xn&&sr.setFromMatrixPosition(rn.matrixWorld).applyMatrix4(Yi);const lo=Ys.update(rn),Go=rn.material;Go.visible&&w.push(rn,lo,Go,wi,sr.z,null)}}else if((rn.isMesh||rn.isLine||rn.isPoints)&&(rn.isSkinnedMesh&&rn.skeleton.frame!==Io.render.frame&&(rn.skeleton.update(),rn.skeleton.frame=Io.render.frame),!rn.frustumCulled||Wn.intersectsObject(rn))){Xn&&sr.setFromMatrixPosition(rn.matrixWorld).applyMatrix4(Yi);const lo=Ys.update(rn),Go=rn.material;if(Array.isArray(Go)){const Oo=lo.groups;for(let $a=0,ta=Oo.length;$a<ta;$a++){const ma=Oo[$a],Qc=Go[ma.materialIndex];Qc&&Qc.visible&&w.push(rn,lo,Qc,wi,sr.z,ma)}}else Go.visible&&w.push(rn,lo,Go,wi,sr.z,null)}const Ns=rn.children;for(let lo=0,Go=Ns.length;lo<Go;lo++)Ih(Ns[lo],ti,wi,Xn)}function Rd(rn,ti,wi,Xn){const Fi=rn.opaque,Ns=rn.transmissive,lo=rn.transparent;I.setupLightsView(wi),Ns.length>0&&function ub(rn,ti,wi){const Xn=ys.isWebGL2;null===Hn&&(Hn=new W0(1,1,{generateMipmaps:!0,type:vs.has("EXT_color_buffer_half_float")?sx:F0,minFilter:1008,samples:Xn&&!0===s?4:0})),W.getDrawingBufferSize(Ti),Xn?Hn.setSize(Ti.x,Ti.y):Hn.setSize(GS(Ti.x),GS(Ti.y));const Fi=W.getRenderTarget();W.setRenderTarget(Hn),W.clear();const Ns=W.toneMapping;W.toneMapping=0,cc(rn,ti,wi),W.toneMapping=Ns,Bi.updateMultisampleRenderTarget(Hn),Bi.updateRenderTargetMipmap(Hn),W.setRenderTarget(Fi)}(Fi,ti,wi),Xn&&Pr.viewport(_t.copy(Xn)),Fi.length>0&&cc(Fi,ti,wi),Ns.length>0&&cc(Ns,ti,wi),lo.length>0&&cc(lo,ti,wi),Pr.buffers.depth.setTest(!0),Pr.buffers.depth.setMask(!0),Pr.buffers.color.setMask(!0),Pr.setPolygonOffset(!1)}function cc(rn,ti,wi){const Xn=!0===ti.isScene?ti.overrideMaterial:null;for(let Fi=0,Ns=rn.length;Fi<Ns;Fi++){const lo=rn[Fi],Go=lo.object,Oo=lo.geometry,$a=null===Xn?lo.material:Xn,ta=lo.group;Go.layers.test(wi.layers)&&Ey(Go,ti,wi,Oo,$a,ta)}}function Ey(rn,ti,wi,Xn,Fi,Ns){rn.onBeforeRender(W,ti,wi,Xn,Fi,Ns),rn.modelViewMatrix.multiplyMatrices(wi.matrixWorldInverse,rn.matrixWorld),rn.normalMatrix.getNormalMatrix(rn.modelViewMatrix),Fi.onBeforeRender(W,ti,wi,Xn,rn,Ns),!0===Fi.transparent&&2===Fi.side?(Fi.side=1,Fi.needsUpdate=!0,W.renderBufferDirect(wi,ti,Xn,Fi,rn,Ns),Fi.side=0,Fi.needsUpdate=!0,W.renderBufferDirect(wi,ti,Xn,Fi,rn,Ns),Fi.side=2):W.renderBufferDirect(wi,ti,Xn,Fi,rn,Ns),rn.onAfterRender(W,ti,wi,Xn,Fi,Ns)}function Eg(rn,ti,wi){!0!==ti.isScene&&(ti=fr);const Xn=Gi.get(rn),Fi=I.state.lights,lo=Fi.state.version,Go=Vs.getParameters(rn,Fi.state,I.state.shadowsArray,ti,wi),Oo=Vs.getProgramCacheKey(Go);let $a=Xn.programs;Xn.environment=rn.isMeshStandardMaterial?ti.environment:null,Xn.fog=ti.fog,Xn.envMap=(rn.isMeshStandardMaterial?fs:xr).get(rn.envMap||Xn.environment),void 0===$a&&(rn.addEventListener("dispose",lc),$a=new Map,Xn.programs=$a);let ta=$a.get(Oo);if(void 0!==ta){if(Xn.currentProgram===ta&&Xn.lightsStateVersion===lo)return G6(rn,Go),ta}else Go.uniforms=Vs.getUniforms(rn),rn.onBuild(wi,Go,W),rn.onBeforeCompile(Go,W),ta=Vs.acquireProgram(Go,Oo),$a.set(Oo,ta),Xn.uniforms=Go.uniforms;const ma=Xn.uniforms;(!rn.isShaderMaterial&&!rn.isRawShaderMaterial||!0===rn.clipping)&&(ma.clippingPlanes=$t.uniform),G6(rn,Go),Xn.needsLights=function tMe(rn){return rn.isMeshLambertMaterial||rn.isMeshToonMaterial||rn.isMeshPhongMaterial||rn.isMeshStandardMaterial||rn.isShadowMaterial||rn.isShaderMaterial&&!0===rn.lights}(rn),Xn.lightsStateVersion=lo,Xn.needsLights&&(ma.ambientLightColor.value=Fi.state.ambient,ma.lightProbe.value=Fi.state.probe,ma.directionalLights.value=Fi.state.directional,ma.directionalLightShadows.value=Fi.state.directionalShadow,ma.spotLights.value=Fi.state.spot,ma.spotLightShadows.value=Fi.state.spotShadow,ma.rectAreaLights.value=Fi.state.rectArea,ma.ltc_1.value=Fi.state.rectAreaLTC1,ma.ltc_2.value=Fi.state.rectAreaLTC2,ma.pointLights.value=Fi.state.point,ma.pointLightShadows.value=Fi.state.pointShadow,ma.hemisphereLights.value=Fi.state.hemi,ma.directionalShadowMap.value=Fi.state.directionalShadowMap,ma.directionalShadowMatrix.value=Fi.state.directionalShadowMatrix,ma.spotShadowMap.value=Fi.state.spotShadowMap,ma.spotLightMatrix.value=Fi.state.spotLightMatrix,ma.spotLightMap.value=Fi.state.spotLightMap,ma.pointShadowMap.value=Fi.state.pointShadowMap,ma.pointShadowMatrix.value=Fi.state.pointShadowMatrix);const Qc=ta.getUniforms(),hb=pE.seqWithValue(Qc.seq,ma);return Xn.currentProgram=ta,Xn.uniformsList=hb,ta}function G6(rn,ti){const wi=Gi.get(rn);wi.outputEncoding=ti.outputEncoding,wi.instancing=ti.instancing,wi.skinning=ti.skinning,wi.morphTargets=ti.morphTargets,wi.morphNormals=ti.morphNormals,wi.morphColors=ti.morphColors,wi.morphTargetsCount=ti.morphTargetsCount,wi.numClippingPlanes=ti.numClippingPlanes,wi.numIntersection=ti.numClipIntersection,wi.vertexAlphas=ti.vertexAlphas,wi.vertexTangents=ti.vertexTangents,wi.toneMapping=ti.toneMapping}ja.setAnimationLoop(function hr(rn){Si&&Si(rn)}),typeof self<"u"&&ja.setContext(self),this.setAnimationLoop=function(rn){Si=rn,_s.setAnimationLoop(rn),null===rn?ja.stop():ja.start()},_s.addEventListener("sessionstart",Qr),_s.addEventListener("sessionend",As),this.render=function(rn,ti){if(void 0===ti||!0===ti.isCamera){if(!0!==K){if(!0===rn.matrixWorldAutoUpdate&&rn.updateMatrixWorld(),null===ti.parent&&!0===ti.matrixWorldAutoUpdate&&ti.updateMatrixWorld(),!0===_s.enabled&&!0===_s.isPresenting&&(!0===_s.cameraAutoUpdate&&_s.updateCamera(ti),ti=_s.getCamera()),!0===rn.isScene&&rn.onBeforeRender(W,rn,ti,Ae),I=dn.get(rn,k.length),I.init(),k.push(I),Yi.multiplyMatrices(ti.projectionMatrix,ti.matrixWorldInverse),Wn.setFromProjectionMatrix(Yi),Sn=this.localClippingEnabled,zn=$t.init(this.clippingPlanes,Sn,ti),w=wl.get(rn,T.length),w.init(),T.push(w),Ih(rn,ti,0,W.sortObjects),w.finish(),!0===W.sortObjects&&w.sort(ii,jn),!0===zn&&$t.beginShadows(),hi.render(I.state.shadowsArray,rn,ti),!0===zn&&$t.endShadows(),!0===this.info.autoReset&&this.info.reset(),dr.render(w,rn),I.setupLights(W.physicallyCorrectLights),ti.isArrayCamera){const Xn=ti.cameras;for(let Fi=0,Ns=Xn.length;Fi<Ns;Fi++){const lo=Xn[Fi];Rd(w,rn,lo,lo.viewport)}}else Rd(w,rn,ti);null!==Ae&&(Bi.updateMultisampleRenderTarget(Ae),Bi.updateRenderTargetMipmap(Ae)),!0===rn.isScene&&rn.onAfterRender(W,rn,ti),zi.resetDefaultState(),Le=-1,tt=null,k.pop(),I=k.length>0?k[k.length-1]:null,T.pop(),w=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return he},this.getActiveMipmapLevel=function(){return Te},this.getRenderTarget=function(){return Ae},this.setRenderTargetTextures=function(rn,ti,wi){Gi.get(rn.texture).__webglTexture=ti,Gi.get(rn.depthTexture).__webglTexture=wi;const Xn=Gi.get(rn);Xn.__hasExternalTextures=!0,Xn.__hasExternalTextures&&(Xn.__autoAllocateDepthBuffer=void 0===wi,Xn.__autoAllocateDepthBuffer||!0===vs.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Xn.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(rn,ti){const wi=Gi.get(rn);wi.__webglFramebuffer=ti,wi.__useDefaultFramebuffer=void 0===ti},this.setRenderTarget=function(rn,ti=0,wi=0){Ae=rn,he=ti,Te=wi;let Xn=!0,Fi=null,Ns=!1,lo=!1;if(rn){const Oo=Gi.get(rn);void 0!==Oo.__useDefaultFramebuffer?(Pr.bindFramebuffer(36160,null),Xn=!1):void 0===Oo.__webglFramebuffer?Bi.setupRenderTarget(rn):Oo.__hasExternalTextures&&Bi.rebindTextures(rn,Gi.get(rn.texture).__webglTexture,Gi.get(rn.depthTexture).__webglTexture);const $a=rn.texture;($a.isData3DTexture||$a.isDataArrayTexture||$a.isCompressedArrayTexture)&&(lo=!0);const ta=Gi.get(rn).__webglFramebuffer;rn.isWebGLCubeRenderTarget?(Fi=ta[ti],Ns=!0):Fi=ys.isWebGL2&&rn.samples>0&&!1===Bi.useMultisampledRTT(rn)?Gi.get(rn).__webglMultisampledFramebuffer:ta,_t.copy(rn.viewport),Ut.copy(rn.scissor),at=rn.scissorTest}else _t.copy(Mn).multiplyScalar(Gn).floor(),Ut.copy(Un).multiplyScalar(Gn).floor(),at=In;if(Pr.bindFramebuffer(36160,Fi)&&ys.drawBuffers&&Xn&&Pr.drawBuffers(rn,Fi),Pr.viewport(_t),Pr.scissor(Ut),Pr.setScissorTest(at),Ns){const Oo=Gi.get(rn.texture);Li.framebufferTexture2D(36160,36064,34069+ti,Oo.__webglTexture,wi)}else if(lo){const Oo=Gi.get(rn.texture);Li.framebufferTextureLayer(36160,36064,Oo.__webglTexture,wi||0,ti||0)}Le=-1},this.readRenderTargetPixels=function(rn,ti,wi,Xn,Fi,Ns,lo){if(!rn||!rn.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Go=Gi.get(rn).__webglFramebuffer;if(rn.isWebGLCubeRenderTarget&&void 0!==lo&&(Go=Go[lo]),Go){Pr.bindFramebuffer(36160,Go);try{const Oo=rn.texture,$a=Oo.format,ta=Oo.type;if($a!==wg&&qr.convert($a)!==Li.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const ma=ta===sx&&(vs.has("EXT_color_buffer_half_float")||ys.isWebGL2&&vs.has("EXT_color_buffer_float"));if(!(ta===F0||qr.convert(ta)===Li.getParameter(35738)||ta===__&&(ys.isWebGL2||vs.has("OES_texture_float")||vs.has("WEBGL_color_buffer_float"))||ma))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ti>=0&&ti<=rn.width-Xn&&wi>=0&&wi<=rn.height-Fi&&Li.readPixels(ti,wi,Xn,Fi,qr.convert($a),qr.convert(ta),Ns)}finally{const Oo=null!==Ae?Gi.get(Ae).__webglFramebuffer:null;Pr.bindFramebuffer(36160,Oo)}}},this.copyFramebufferToTexture=function(rn,ti,wi=0){const Xn=Math.pow(2,-wi),Fi=Math.floor(ti.image.width*Xn),Ns=Math.floor(ti.image.height*Xn);Bi.setTexture2D(ti,0),Li.copyTexSubImage2D(3553,wi,0,0,rn.x,rn.y,Fi,Ns),Pr.unbindTexture()},this.copyTextureToTexture=function(rn,ti,wi,Xn=0){const Fi=ti.image.width,Ns=ti.image.height,lo=qr.convert(wi.format),Go=qr.convert(wi.type);Bi.setTexture2D(wi,0),Li.pixelStorei(37440,wi.flipY),Li.pixelStorei(37441,wi.premultiplyAlpha),Li.pixelStorei(3317,wi.unpackAlignment),ti.isDataTexture?Li.texSubImage2D(3553,Xn,rn.x,rn.y,Fi,Ns,lo,Go,ti.image.data):ti.isCompressedTexture?Li.compressedTexSubImage2D(3553,Xn,rn.x,rn.y,ti.mipmaps[0].width,ti.mipmaps[0].height,lo,ti.mipmaps[0].data):Li.texSubImage2D(3553,Xn,rn.x,rn.y,lo,Go,ti.image),0===Xn&&wi.generateMipmaps&&Li.generateMipmap(3553),Pr.unbindTexture()},this.copyTextureToTexture3D=function(rn,ti,wi,Xn,Fi=0){if(W.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Ns=rn.max.x-rn.min.x+1,lo=rn.max.y-rn.min.y+1,Go=rn.max.z-rn.min.z+1,Oo=qr.convert(Xn.format),$a=qr.convert(Xn.type);let ta;if(Xn.isData3DTexture)Bi.setTexture3D(Xn,0),ta=32879;else{if(!Xn.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Bi.setTexture2DArray(Xn,0),ta=35866}Li.pixelStorei(37440,Xn.flipY),Li.pixelStorei(37441,Xn.premultiplyAlpha),Li.pixelStorei(3317,Xn.unpackAlignment);const ma=Li.getParameter(3314),Qc=Li.getParameter(32878),hb=Li.getParameter(3316),aw=Li.getParameter(3315),lw=Li.getParameter(32877),mv=wi.isCompressedTexture?wi.mipmaps[0]:wi.image;Li.pixelStorei(3314,mv.width),Li.pixelStorei(32878,mv.height),Li.pixelStorei(3316,rn.min.x),Li.pixelStorei(3315,rn.min.y),Li.pixelStorei(32877,rn.min.z),wi.isDataTexture||wi.isData3DTexture?Li.texSubImage3D(ta,Fi,ti.x,ti.y,ti.z,Ns,lo,Go,Oo,$a,mv.data):wi.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Li.compressedTexSubImage3D(ta,Fi,ti.x,ti.y,ti.z,Ns,lo,Go,Oo,mv.data)):Li.texSubImage3D(ta,Fi,ti.x,ti.y,ti.z,Ns,lo,Go,Oo,$a,mv),Li.pixelStorei(3314,ma),Li.pixelStorei(32878,Qc),Li.pixelStorei(3316,hb),Li.pixelStorei(3315,aw),Li.pixelStorei(32877,lw),0===Fi&&Xn.generateMipmaps&&Li.generateMipmap(ta),Pr.unbindTexture()},this.initTexture=function(rn){rn.isCubeTexture?Bi.setTextureCube(rn,0):rn.isData3DTexture?Bi.setTexture3D(rn,0):rn.isDataArrayTexture||rn.isCompressedArrayTexture?Bi.setTexture2DArray(rn,0):Bi.setTexture2D(rn,0),Pr.unbindTexture()},this.resetState=function(){he=0,Te=0,Ae=null,Pr.reset(),zi.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class NCe extends kG{}).prototype.isWebGL1Renderer=!0;class OG extends Hf{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Gf extends X0{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ns(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const KG=new en,ZG=new en,QG=new vo,NR=new ZS,bE=new OC;class bx extends Hf{constructor(t=new Ho,e=new Gf){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)KG.fromBufferAttribute(e,r-1),ZG.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=KG.distanceTo(ZG);t.setAttribute("lineDistance",new us(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bE.copy(n.boundingSphere),bE.applyMatrix4(r),bE.radius+=s,!1===t.ray.intersectsSphere(bE))return;QG.copy(r).invert(),NR.copy(t.ray).applyMatrix4(QG);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,p=new en,v=new en,w=new en,I=new en,T=this.isLineSegments?2:1,k=n.index,K=n.attributes.position;if(null!==k)for(let Ae=Math.max(0,o.start),Le=Math.min(k.count,o.start+o.count)-1;Ae<Le;Ae+=T){const tt=k.getX(Ae),_t=k.getX(Ae+1);if(p.fromBufferAttribute(K,tt),v.fromBufferAttribute(K,_t),NR.distanceSqToSegment(p,v,I,w)>u)continue;I.applyMatrix4(this.matrixWorld);const at=t.ray.origin.distanceTo(I);at<t.near||at>t.far||e.push({distance:at,point:w.clone().applyMatrix4(this.matrixWorld),index:Ae,face:null,faceIndex:null,object:this})}else for(let Ae=Math.max(0,o.start),Le=Math.min(K.count,o.start+o.count)-1;Ae<Le;Ae+=T){if(p.fromBufferAttribute(K,Ae),v.fromBufferAttribute(K,Ae+1),NR.distanceSqToSegment(p,v,I,w)>u)continue;I.applyMatrix4(this.matrixWorld);const _t=t.ray.origin.distanceTo(I);_t<t.near||_t>t.far||e.push({distance:_t,point:w.clone().applyMatrix4(this.matrixWorld),index:Ae,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}class fv{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let p,l=0,u=s-1;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),p=n[r]-o,p<0)l=r+1;else{if(!(p>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(s-1);const v=n[r];return(r+(o-v)/(n[r+1]-v))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=e||(o.isVector2?new Xi:new en);return u.copy(l).sub(o).normalize(),u}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new en,r=[],s=[],o=[],l=new en,u=new vo;for(let T=0;T<=t;T++)r[T]=this.getTangentAt(T/t,new en);s[0]=new en,o[0]=new en;let p=Number.MAX_VALUE;const v=Math.abs(r[0].x),w=Math.abs(r[0].y),I=Math.abs(r[0].z);v<=p&&(p=v,n.set(1,0,0)),w<=p&&(p=w,n.set(0,1,0)),I<=p&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let T=1;T<=t;T++){if(s[T]=s[T-1].clone(),o[T]=o[T-1].clone(),l.crossVectors(r[T-1],r[T]),l.length()>Number.EPSILON){l.normalize();const k=Math.acos(lu(r[T-1].dot(r[T]),-1,1));s[T].applyMatrix4(u.makeRotationAxis(l,k))}o[T].crossVectors(r[T],s[T])}if(!0===e){let T=Math.acos(lu(s[0].dot(s[t]),-1,1));T/=t,r[0].dot(l.crossVectors(s[0],s[t]))>0&&(T=-T);for(let k=1;k<=t;k++)s[k].applyMatrix4(u.makeRotationAxis(r[k],T*k)),o[k].crossVectors(r[k],s[k])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class zR extends fv{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(t,e){const n=e||new Xi,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const l=this.aStartAngle+t*s;let u=this.aX+this.xRadius*Math.cos(l),p=this.aY+this.yRadius*Math.sin(l);if(0!==this.aRotation){const v=Math.cos(this.aRotation),w=Math.sin(this.aRotation),I=u-this.aX,T=p-this.aY;u=I*v-T*w+this.aX,p=I*w+T*v+this.aY}return n.set(u,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function VR(){let i=0,t=0,e=0,n=0;function r(s,o,l,u){i=s,t=l,e=-3*s+3*o-2*l-u,n=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,p){r(o,l,p*(l-s),p*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,p,v,w){let I=(o-s)/p-(l-s)/(p+v)+(l-o)/v,T=(l-o)/v-(u-o)/(v+w)+(u-l)/w;I*=v,T*=v,r(o,l,I,T)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}const AE=new en,UR=new VR,HR=new VR,GR=new VR;function o8(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),l=i*i;return(2*e-2*n+s+o)*(i*l)+(-3*e+3*n-2*s-o)*l+s*i+e}function Cx(i,t,e,n){return function KCe(i,t){const e=1-i;return e*e*t}(i,t)+function ZCe(i,t){return 2*(1-i)*i*t}(i,e)+function QCe(i,t){return i*i*t}(i,n)}function wx(i,t,e,n,r){return function JCe(i,t){const e=1-i;return e*e*e*t}(i,t)+function ewe(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function twe(i,t){return 3*(1-i)*i*i*t}(i,n)+function nwe(i,t){return i*i*i*t}(i,r)}class a8 extends fv{constructor(t=new Xi,e=new Xi,n=new Xi,r=new Xi){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Xi){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(wx(t,r.x,s.x,o.x,l.x),wx(t,r.y,s.y,o.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class WR extends fv{constructor(t=new Xi,e=new Xi){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Xi){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Xi;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class l8 extends fv{constructor(t=new Xi,e=new Xi,n=new Xi){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Xi){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(Cx(t,r.x,s.x,o.x),Cx(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class u8 extends fv{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Xi){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),l=s-o,u=r[0===o?o:o-1],p=r[o],v=r[o>r.length-2?r.length-1:o+1],w=r[o>r.length-3?r.length-1:o+2];return n.set(o8(l,u.x,p.x,v.x,w.x),o8(l,u.y,p.y,v.y,w.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new Xi).fromArray(r))}return this}}var jR=Object.freeze({__proto__:null,ArcCurve:class XCe extends zR{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class YCe extends fv{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new en){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let p,v,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===u&&l===s-1&&(l=s-2,u=1),this.closed||l>0?p=r[(l-1)%s]:(AE.subVectors(r[0],r[1]).add(r[0]),p=AE);const w=r[l%s],I=r[(l+1)%s];if(this.closed||l+2<s?v=r[(l+2)%s]:(AE.subVectors(r[s-1],r[s-2]).add(r[s-1]),v=AE),"centripetal"===this.curveType||"chordal"===this.curveType){const T="chordal"===this.curveType?.5:.25;let k=Math.pow(p.distanceToSquared(w),T),W=Math.pow(w.distanceToSquared(I),T),K=Math.pow(I.distanceToSquared(v),T);W<1e-4&&(W=1),k<1e-4&&(k=W),K<1e-4&&(K=W),UR.initNonuniformCatmullRom(p.x,w.x,I.x,v.x,k,W,K),HR.initNonuniformCatmullRom(p.y,w.y,I.y,v.y,k,W,K),GR.initNonuniformCatmullRom(p.z,w.z,I.z,v.z,k,W,K)}else"catmullrom"===this.curveType&&(UR.initCatmullRom(p.x,w.x,I.x,v.x,this.tension),HR.initCatmullRom(p.y,w.y,I.y,v.y,this.tension),GR.initCatmullRom(p.z,w.z,I.z,v.z,this.tension));return n.set(UR.calc(u),HR.calc(u),GR.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new en).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:a8,CubicBezierCurve3:class iwe extends fv{constructor(t=new en,e=new en,n=new en,r=new en){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new en){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(wx(t,r.x,s.x,o.x,l.x),wx(t,r.y,s.y,o.y,l.y),wx(t,r.z,s.z,o.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:zR,LineCurve:WR,LineCurve3:class rwe extends fv{constructor(t=new en,e=new en){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new en){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:l8,QuadraticBezierCurve3:class c8 extends fv{constructor(t=new en,e=new en,n=new en){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new en){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(Cx(t,r.x,s.x,o.x),Cx(t,r.y,s.y,o.y),Cx(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:u8});class swe extends fv{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new WR(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,l=this.curves[s],u=l.getLength();return l.getPointAt(0===u?0:1-o/u,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],u=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let p=0;p<u.length;p++){const v=u[p];n&&n.equals(v)||(e.push(v),n=v)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new jR[r.type]).fromJSON(r))}return this}}class xE extends swe{constructor(t){super(),this.type="Path",this.currentPoint=new Xi,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new WR(this.currentPoint.clone(),new Xi(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new l8(this.currentPoint.clone(),new Xi(t,e),new Xi(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const l=new a8(this.currentPoint.clone(),new Xi(t,e),new Xi(n,r),new Xi(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new u8(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,l,u){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,l,u),this}absellipse(t,e,n,r,s,o,l,u){const p=new zR(t,e,n,r,s,o,l,u);if(this.curves.length>0){const w=p.getPoint(0);w.equals(this.currentPoint)||this.lineTo(w.x,w.y)}this.curves.push(p);const v=p.getPoint(1);return this.currentPoint.copy(v),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class tw extends xE{constructor(t){super(t),this.uuid=Rp(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new xE).fromJSON(r))}return this}}function h8(i,t,e,n,r){let s,o;if(r===function Awe(i,t,e,n){let r=0;for(let s=t,o=e-n;s<e;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,t,e,n)>0)for(s=t;s<e;s+=n)o=p8(s,i[s],i[s+1],o);else for(s=e-n;s>=t;s-=n)o=p8(s,i[s],i[s+1],o);return o&&ME(o,o.next)&&(Sx(o),o=o.next),o}function eb(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!ME(e,e.next)&&0!==xc(e.prev,e,e.next))e=e.next;else{if(Sx(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function xx(i,t,e,n,r,s,o){if(!i)return;!o&&s&&function vwe(i,t,e,n){let r=i;do{0===r.z&&(r.z=ZR(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function ywe(i){let t,e,n,r,s,o,l,u,p=1;do{for(e=i,i=null,s=null,o=0;e;){for(o++,n=e,l=0,t=0;t<p&&(l++,n=n.nextZ,n);t++);for(u=p;l>0||u>0&&n;)0!==l&&(0===u||!n||e.z<=n.z)?(r=e,e=e.nextZ,l--):(r=n,n=n.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;e=n}s.nextZ=null,p*=2}while(o>1)}(r)}(i,n,r,s);let u,p,l=i;for(;i.prev!==i.next;)if(u=i.prev,p=i.next,s?cwe(i,n,r,s):lwe(i))t.push(u.i/e|0),t.push(i.i/e|0),t.push(p.i/e|0),Sx(i),i=p.next,l=p.next;else if((i=p)===l){o?1===o?xx(i=uwe(eb(i),t,e),t,e,n,r,s,2):2===o&&hwe(i,t,e,n,r,s):xx(eb(i),t,e,n,r,s,1);break}}function lwe(i){const t=i.prev,e=i,n=i.next;if(xc(t,e,n)>=0)return!1;const r=t.x,s=e.x,o=n.x,l=t.y,u=e.y,p=n.y,v=r<s?r<o?r:o:s<o?s:o,w=l<u?l<p?l:p:u<p?u:p,I=r>s?r>o?r:o:s>o?s:o,T=l>u?l>p?l:p:u>p?u:p;let k=n.next;for(;k!==t;){if(k.x>=v&&k.x<=I&&k.y>=w&&k.y<=T&&nw(r,l,s,u,o,p,k.x,k.y)&&xc(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function cwe(i,t,e,n){const r=i.prev,s=i,o=i.next;if(xc(r,s,o)>=0)return!1;const l=r.x,u=s.x,p=o.x,v=r.y,w=s.y,I=o.y,T=l<u?l<p?l:p:u<p?u:p,k=v<w?v<I?v:I:w<I?w:I,W=l>u?l>p?l:p:u>p?u:p,K=v>w?v>I?v:I:w>I?w:I,he=ZR(T,k,t,e,n),Te=ZR(W,K,t,e,n);let Ae=i.prevZ,Le=i.nextZ;for(;Ae&&Ae.z>=he&&Le&&Le.z<=Te;){if(Ae.x>=T&&Ae.x<=W&&Ae.y>=k&&Ae.y<=K&&Ae!==r&&Ae!==o&&nw(l,v,u,w,p,I,Ae.x,Ae.y)&&xc(Ae.prev,Ae,Ae.next)>=0||(Ae=Ae.prevZ,Le.x>=T&&Le.x<=W&&Le.y>=k&&Le.y<=K&&Le!==r&&Le!==o&&nw(l,v,u,w,p,I,Le.x,Le.y)&&xc(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Ae&&Ae.z>=he;){if(Ae.x>=T&&Ae.x<=W&&Ae.y>=k&&Ae.y<=K&&Ae!==r&&Ae!==o&&nw(l,v,u,w,p,I,Ae.x,Ae.y)&&xc(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.prevZ}for(;Le&&Le.z<=Te;){if(Le.x>=T&&Le.x<=W&&Le.y>=k&&Le.y<=K&&Le!==r&&Le!==o&&nw(l,v,u,w,p,I,Le.x,Le.y)&&xc(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function uwe(i,t,e){let n=i;do{const r=n.prev,s=n.next.next;!ME(r,s)&&d8(r,n,n.next,s)&&Ix(r,s)&&Ix(s,r)&&(t.push(r.i/e|0),t.push(n.i/e|0),t.push(s.i/e|0),Sx(n),Sx(n.next),n=i=s),n=n.next}while(n!==i);return eb(n)}function hwe(i,t,e,n,r,s){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&bwe(o,l)){let u=f8(o,l);return o=eb(o,o.next),u=eb(u,u.next),xx(o,t,e,n,r,s,0),void xx(u,t,e,n,r,s,0)}l=l.next}o=o.next}while(o!==i)}function fwe(i,t){return i.x-t.x}function pwe(i,t){const e=function gwe(i,t){let r,e=t,n=-1/0;const s=i.x,o=i.y;do{if(o<=e.y&&o>=e.next.y&&e.next.y!==e.y){const I=e.x+(o-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(I<=s&&I>n&&(n=I,r=e.x<e.next.x?e:e.next,I===s))return r}e=e.next}while(e!==t);if(!r)return null;const l=r,u=r.x,p=r.y;let w,v=1/0;e=r;do{s>=e.x&&e.x>=u&&s!==e.x&&nw(o<p?s:n,o,u,p,o<p?n:s,o,e.x,e.y)&&(w=Math.abs(o-e.y)/(s-e.x),Ix(e,i)&&(w<v||w===v&&(e.x>r.x||e.x===r.x&&mwe(r,e)))&&(r=e,v=w)),e=e.next}while(e!==l);return r}(i,t);if(!e)return t;const n=f8(e,i);return eb(n,n.next),eb(e,e.next)}function mwe(i,t){return xc(i.prev,i,t.prev)<0&&xc(t.next,i,i.next)<0}function ZR(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-e)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function _we(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function nw(i,t,e,n,r,s,o,l){return(r-o)*(t-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(e-o)*(t-l)&&(e-o)*(s-l)>=(r-o)*(n-l)}function bwe(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function Cwe(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&d8(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(Ix(i,t)&&Ix(t,i)&&function wwe(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,s=(i.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(xc(i.prev,i,t.prev)||xc(i,t.prev,t))||ME(i,t)&&xc(i.prev,i,i.next)>0&&xc(t.prev,t,t.next)>0)}function xc(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function ME(i,t){return i.x===t.x&&i.y===t.y}function d8(i,t,e,n){const r=LE(xc(i,t,e)),s=LE(xc(i,t,n)),o=LE(xc(e,n,i)),l=LE(xc(e,n,t));return!!(r!==s&&o!==l||0===r&&DE(i,e,t)||0===s&&DE(i,n,t)||0===o&&DE(e,i,n)||0===l&&DE(e,t,n))}function DE(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function LE(i){return i>0?1:i<0?-1:0}function Ix(i,t){return xc(i.prev,i,i.next)<0?xc(i,t,i.next)>=0&&xc(i,i.prev,t)>=0:xc(i,t,i.prev)<0||xc(i,i.next,t)<0}function f8(i,t){const e=new QR(i.i,i.x,i.y),n=new QR(t.i,t.x,t.y),r=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function p8(i,t,e,n){const r=new QR(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Sx(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function QR(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ay{static area(t){const e=t.length;let n=0;for(let r=e-1,s=0;s<e;r=s++)n+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*n}static isClockWise(t){return Ay.area(t)<0}static triangulateShape(t,e){const n=[],r=[],s=[];g8(t),m8(n,t);let o=t.length;e.forEach(g8);for(let u=0;u<e.length;u++)r.push(o),o+=e[u].length,m8(n,e[u]);const l=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let s=h8(i,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,p,v,w,I,T;if(n&&(s=function dwe(i,t,e,n){const r=[];let s,o,l,u,p;for(s=0,o=t.length;s<o;s++)l=t[s]*n,u=s<o-1?t[s+1]*n:i.length,p=h8(i,l,u,n,!1),p===p.next&&(p.steiner=!0),r.push(_we(p));for(r.sort(fwe),s=0;s<r.length;s++)e=pwe(r[s],e);return e}(i,t,s,e)),i.length>80*e){l=p=i[0],u=v=i[1];for(let k=e;k<r;k+=e)w=i[k],I=i[k+1],w<l&&(l=w),I<u&&(u=I),w>p&&(p=w),I>v&&(v=I);T=Math.max(p-l,v-u),T=0!==T?32767/T:0}return xx(s,o,e,l,u,T,0),o}(n,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function g8(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function m8(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class RE extends Ho{constructor(t=new tw([new Xi(.5,.5),new Xi(-.5,.5),new Xi(-.5,-.5),new Xi(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],s=[];for(let l=0,u=t.length;l<u;l++)o(t[l]);function o(l){const u=[],p=void 0!==e.curveSegments?e.curveSegments:12,v=void 0!==e.steps?e.steps:1,w=void 0!==e.depth?e.depth:1;let I=void 0===e.bevelEnabled||e.bevelEnabled,T=void 0!==e.bevelThickness?e.bevelThickness:.2,k=void 0!==e.bevelSize?e.bevelSize:T-.1,W=void 0!==e.bevelOffset?e.bevelOffset:0,K=void 0!==e.bevelSegments?e.bevelSegments:3;const he=e.extrudePath,Te=void 0!==e.UVGenerator?e.UVGenerator:xwe;let Ae,tt,_t,Ut,at,Le=!1;he&&(Ae=he.getSpacedPoints(v),Le=!0,I=!1,tt=he.computeFrenetFrames(v,!1),_t=new en,Ut=new en,at=new en),I||(K=0,T=0,k=0,W=0);const Lt=l.extractPoints(p);let cn=Lt.shape;const Gn=Lt.holes;if(!Ay.isClockWise(cn)){cn=cn.reverse();for(let Gi=0,Bi=Gn.length;Gi<Bi;Gi++){const xr=Gn[Gi];Ay.isClockWise(xr)&&(Gn[Gi]=xr.reverse())}}const jn=Ay.triangulateShape(cn,Gn),Mn=cn;for(let Gi=0,Bi=Gn.length;Gi<Bi;Gi++)cn=cn.concat(Gn[Gi]);function Un(Gi,Bi,xr){return Bi||console.error("THREE.ExtrudeGeometry: vec does not exist"),Bi.clone().multiplyScalar(xr).add(Gi)}const In=cn.length,Wn=jn.length;function zn(Gi,Bi,xr){let fs,Br,yo;const Ys=Gi.x-Bi.x,Vs=Gi.y-Bi.y,jl=xr.x-Gi.x,wl=xr.y-Gi.y,dn=Ys*Ys+Vs*Vs;if(Math.abs(Ys*wl-Vs*jl)>Number.EPSILON){const hi=Math.sqrt(dn),dr=Math.sqrt(jl*jl+wl*wl),Ar=Bi.x-Vs/hi,jr=Bi.y+Ys/hi,zi=((xr.x-wl/dr-Ar)*wl-(xr.y+jl/dr-jr)*jl)/(Ys*wl-Vs*jl);fs=Ar+Ys*zi-Gi.x,Br=jr+Vs*zi-Gi.y;const Ls=fs*fs+Br*Br;if(Ls<=2)return new Xi(fs,Br);yo=Math.sqrt(Ls/2)}else{let hi=!1;Ys>Number.EPSILON?jl>Number.EPSILON&&(hi=!0):Ys<-Number.EPSILON?jl<-Number.EPSILON&&(hi=!0):Math.sign(Vs)===Math.sign(wl)&&(hi=!0),hi?(fs=-Vs,Br=Ys,yo=Math.sqrt(dn)):(fs=Ys,Br=Vs,yo=Math.sqrt(dn/2))}return new Xi(fs/yo,Br/yo)}const Sn=[];for(let Gi=0,Bi=Mn.length,xr=Bi-1,fs=Gi+1;Gi<Bi;Gi++,xr++,fs++)xr===Bi&&(xr=0),fs===Bi&&(fs=0),Sn[Gi]=zn(Mn[Gi],Mn[xr],Mn[fs]);const Hn=[];let Yi,Ti=Sn.concat();for(let Gi=0,Bi=Gn.length;Gi<Bi;Gi++){const xr=Gn[Gi];Yi=[];for(let fs=0,Br=xr.length,yo=Br-1,Ys=fs+1;fs<Br;fs++,yo++,Ys++)yo===Br&&(yo=0),Ys===Br&&(Ys=0),Yi[fs]=zn(xr[fs],xr[yo],xr[Ys]);Hn.push(Yi),Ti=Ti.concat(Yi)}for(let Gi=0;Gi<K;Gi++){const Bi=Gi/K,xr=T*Math.cos(Bi*Math.PI/2),fs=k*Math.sin(Bi*Math.PI/2)+W;for(let Br=0,yo=Mn.length;Br<yo;Br++){const Ys=Un(Mn[Br],Sn[Br],fs);ws(Ys.x,Ys.y,-xr)}for(let Br=0,yo=Gn.length;Br<yo;Br++){const Ys=Gn[Br];Yi=Hn[Br];for(let Vs=0,jl=Ys.length;Vs<jl;Vs++){const wl=Un(Ys[Vs],Yi[Vs],fs);ws(wl.x,wl.y,-xr)}}}const sr=k+W;for(let Gi=0;Gi<In;Gi++){const Bi=I?Un(cn[Gi],Ti[Gi],sr):cn[Gi];Le?(Ut.copy(tt.normals[0]).multiplyScalar(Bi.x),_t.copy(tt.binormals[0]).multiplyScalar(Bi.y),at.copy(Ae[0]).add(Ut).add(_t),ws(at.x,at.y,at.z)):ws(Bi.x,Bi.y,0)}for(let Gi=1;Gi<=v;Gi++)for(let Bi=0;Bi<In;Bi++){const xr=I?Un(cn[Bi],Ti[Bi],sr):cn[Bi];Le?(Ut.copy(tt.normals[Gi]).multiplyScalar(xr.x),_t.copy(tt.binormals[Gi]).multiplyScalar(xr.y),at.copy(Ae[Gi]).add(Ut).add(_t),ws(at.x,at.y,at.z)):ws(xr.x,xr.y,w/v*Gi)}for(let Gi=K-1;Gi>=0;Gi--){const Bi=Gi/K,xr=T*Math.cos(Bi*Math.PI/2),fs=k*Math.sin(Bi*Math.PI/2)+W;for(let Br=0,yo=Mn.length;Br<yo;Br++){const Ys=Un(Mn[Br],Sn[Br],fs);ws(Ys.x,Ys.y,w+xr)}for(let Br=0,yo=Gn.length;Br<yo;Br++){const Ys=Gn[Br];Yi=Hn[Br];for(let Vs=0,jl=Ys.length;Vs<jl;Vs++){const wl=Un(Ys[Vs],Yi[Vs],fs);Le?ws(wl.x,wl.y+Ae[v-1].y,Ae[v-1].x+xr):ws(wl.x,wl.y,w+xr)}}}function Li(Gi,Bi){let xr=Gi.length;for(;--xr>=0;){const fs=xr;let Br=xr-1;Br<0&&(Br=Gi.length-1);for(let yo=0,Ys=v+2*K;yo<Ys;yo++){const Vs=In*yo,jl=In*(yo+1);ys(Bi+fs+Vs,Bi+Br+Vs,Bi+Br+jl,Bi+fs+jl)}}}function ws(Gi,Bi,xr){u.push(Gi),u.push(Bi),u.push(xr)}function vs(Gi,Bi,xr){Pr(Gi),Pr(Bi),Pr(xr);const fs=r.length/3,Br=Te.generateTopUV(n,r,fs-3,fs-2,fs-1);Io(Br[0]),Io(Br[1]),Io(Br[2])}function ys(Gi,Bi,xr,fs){Pr(Gi),Pr(Bi),Pr(fs),Pr(Bi),Pr(xr),Pr(fs);const Br=r.length/3,yo=Te.generateSideWallUV(n,r,Br-6,Br-3,Br-2,Br-1);Io(yo[0]),Io(yo[1]),Io(yo[3]),Io(yo[1]),Io(yo[2]),Io(yo[3])}function Pr(Gi){r.push(u[3*Gi+0]),r.push(u[3*Gi+1]),r.push(u[3*Gi+2])}function Io(Gi){s.push(Gi.x),s.push(Gi.y)}(function fr(){const Gi=r.length/3;if(I){let Bi=0,xr=In*Bi;for(let fs=0;fs<Wn;fs++){const Br=jn[fs];vs(Br[2]+xr,Br[1]+xr,Br[0]+xr)}Bi=v+2*K,xr=In*Bi;for(let fs=0;fs<Wn;fs++){const Br=jn[fs];vs(Br[0]+xr,Br[1]+xr,Br[2]+xr)}}else{for(let Bi=0;Bi<Wn;Bi++){const xr=jn[Bi];vs(xr[2],xr[1],xr[0])}for(let Bi=0;Bi<Wn;Bi++){const xr=jn[Bi];vs(xr[0]+In*v,xr[1]+In*v,xr[2]+In*v)}}n.addGroup(Gi,r.length/3-Gi,0)})(),function Es(){const Gi=r.length/3;let Bi=0;Li(Mn,Bi),Bi+=Mn.length;for(let xr=0,fs=Gn.length;xr<fs;xr++){const Br=Gn[xr];Li(Br,Bi),Bi+=Br.length}n.addGroup(Gi,r.length/3-Gi,1)}()}this.setAttribute("position",new us(r,3)),this.setAttribute("uv",new us(s,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function Iwe(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)e.shapes.push(i[n].uuid);else e.shapes.push(i.uuid);return e.options=Object.assign({},t),void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let s=0,o=t.shapes.length;s<o;s++)n.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new jR[r.type]).fromJSON(r)),new RE(n,t.options)}}const xwe={generateTopUV:function(i,t,e,n,r){const l=t[3*n],u=t[3*n+1],p=t[3*r],v=t[3*r+1];return[new Xi(t[3*e],t[3*e+1]),new Xi(l,u),new Xi(p,v)]},generateSideWallUV:function(i,t,e,n,r,s){const o=t[3*e],l=t[3*e+1],u=t[3*e+2],p=t[3*n],v=t[3*n+1],w=t[3*n+2],I=t[3*r],T=t[3*r+1],k=t[3*r+2],W=t[3*s],K=t[3*s+1],he=t[3*s+2];return Math.abs(l-v)<Math.abs(o-p)?[new Xi(o,1-u),new Xi(p,1-w),new Xi(I,1-k),new Xi(W,1-he)]:[new Xi(l,1-u),new Xi(v,1-w),new Xi(T,1-k),new Xi(K,1-he)]}};class OE extends X0{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ns(16777215),this.specular=new ns(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ns(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Xi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function xg(i,t,e){return oP(i)?new i.constructor(i.subarray(t,void 0!==e?e:i.length)):i.slice(t,e)}function tb(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function oP(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}class FE{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let l=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const l=e[1];t<l&&(n=2,s=l);for(let u=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const l=n+o>>>1;t<e[l]?o=l:n=l+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class zwe extends FE{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,l=r[s],u=r[o];if(void 0===l)switch(this.getSettings_().endingStart){case 2401:s=t,l=2*e-n;break;case 2402:s=r.length-2,l=e+r[s]-r[s+1];break;default:s=t,l=n}if(void 0===u)switch(this.getSettings_().endingEnd){case 2401:o=t,u=2*n-e;break;case 2402:o=1,u=n+r[1]-r[0];break;default:o=t-1,u=e}const p=.5*(n-e),v=this.valueSize;this._weightPrev=p/(e-l),this._weightNext=p/(u-n),this._offsetPrev=s*v,this._offsetNext=o*v}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=this._offsetPrev,w=this._offsetNext,I=this._weightPrev,T=this._weightNext,k=(n-e)/(r-e),W=k*k,K=W*k,he=-I*K+2*I*W-I*k,Te=(1+I)*K+(-1.5-2*I)*W+(-.5+I)*k+1,Ae=(-1-T)*K+(1.5+T)*W+.5*k,Le=T*K-T*W;for(let tt=0;tt!==l;++tt)s[tt]=he*o[v+tt]+Te*o[p+tt]+Ae*o[u+tt]+Le*o[w+tt];return s}}class b8 extends FE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=(n-e)/(r-e),w=1-v;for(let I=0;I!==l;++I)s[I]=o[p+I]*w+o[u+I]*v;return s}}class Vwe extends FE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class pv{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=tb(e,this.TimeBufferType),this.values=tb(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:tb(t.times,Array),values:tb(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Vwe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new b8(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new zwe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=xg(n,s,o),this.values=xg(this.values,s*l,o*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let l=0;l!==s;l++){const u=n[l];if("number"==typeof u&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(null!==o&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),t=!1;break}o=u}if(void 0!==r&&oP(r))for(let l=0,u=r.length;l!==u;++l){const p=r[l];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,p),t=!1;break}}return t}optimize(){const t=xg(this.times),e=xg(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let l=1;l<s;++l){let u=!1;const p=t[l];if(p!==t[l+1]&&(1!==l||p!==t[0]))if(r)u=!0;else{const w=l*n,I=w-n,T=w+n;for(let k=0;k!==n;++k){const W=e[w+k];if(W!==e[I+k]||W!==e[T+k]){u=!0;break}}}if(u){if(l!==o){t[o]=t[l];const w=l*n,I=o*n;for(let T=0;T!==n;++T)e[I+T]=e[w+T]}++o}}if(s>0){t[o]=t[s];for(let l=s*n,u=o*n,p=0;p!==n;++p)e[u+p]=e[l+p];++o}return o!==t.length?(this.times=xg(t,0,o),this.values=xg(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=xg(this.times,0),e=xg(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}pv.prototype.TimeBufferType=Float32Array,pv.prototype.ValueBufferType=Float32Array,pv.prototype.DefaultInterpolation=2301;class iw extends pv{}iw.prototype.ValueTypeName="bool",iw.prototype.ValueBufferType=Array,iw.prototype.DefaultInterpolation=2300,iw.prototype.InterpolantFactoryMethodLinear=void 0,iw.prototype.InterpolantFactoryMethodSmooth=void 0;(class C8 extends pv{}).prototype.ValueTypeName="color";(class NE extends pv{}).prototype.ValueTypeName="number";class Uwe extends FE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-e)/(r-e);let p=t*l;for(let v=p+l;p!==v;p+=4)kp.slerpFlat(s,0,o,p-l,o,p,u);return s}}class Ex extends pv{InterpolantFactoryMethodLinear(t){return new Uwe(this.times,this.values,this.getValueSize(),t)}}Ex.prototype.ValueTypeName="quaternion",Ex.prototype.DefaultInterpolation=2301,Ex.prototype.InterpolantFactoryMethodSmooth=void 0;class rw extends pv{}rw.prototype.ValueTypeName="string",rw.prototype.ValueBufferType=Array,rw.prototype.DefaultInterpolation=2300,rw.prototype.InterpolantFactoryMethodLinear=void 0,rw.prototype.InterpolantFactoryMethodSmooth=void 0;(class BE extends pv{}).prototype.ValueTypeName="vector";const sw={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class w8{constructor(t,e,n){const r=this;let u,s=!1,o=0,l=0;const p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(v){l++,!1===s&&void 0!==r.onStart&&r.onStart(v,o,l),s=!0},this.itemEnd=function(v){o++,void 0!==r.onProgress&&r.onProgress(v,o,l),o===l&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(v){void 0!==r.onError&&r.onError(v)},this.resolveURL=function(v){return u?u(v):v},this.setURLModifier=function(v){return u=v,this},this.addHandler=function(v,w){return p.push(v,w),this},this.removeHandler=function(v){const w=p.indexOf(v);return-1!==w&&p.splice(w,2),this},this.getHandler=function(v){for(let w=0,I=p.length;w<I;w+=2){const T=p[w],k=p[w+1];if(T.global&&(T.lastIndex=0),T.test(v))return k}return null}}}const Wwe=new w8;class A8{constructor(t){this.manager=void 0!==t?t:Wwe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,s){n.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const xy={};class jwe extends Error{constructor(t,e){super(t),this.response=e}}class Iy extends A8{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=sw.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==xy[t])return void xy[t].push({onLoad:e,onProgress:n,onError:r});xy[t]=[],xy[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(o).then(p=>{if(200===p.status||0===p.status){if(0===p.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===p.body||void 0===p.body.getReader)return p;const v=xy[t],w=p.body.getReader(),I=p.headers.get("Content-Length"),T=I?parseInt(I):0,k=0!==T;let W=0;const K=new ReadableStream({start(he){!function Te(){w.read().then(({done:Ae,value:Le})=>{if(Ae)he.close();else{W+=Le.byteLength;const tt=new ProgressEvent("progress",{lengthComputable:k,loaded:W,total:T});for(let _t=0,Ut=v.length;_t<Ut;_t++){const at=v[_t];at.onProgress&&at.onProgress(tt)}he.enqueue(Le),Te()}})}()}});return new Response(K)}throw new jwe(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(u){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(v=>(new DOMParser).parseFromString(v,l));case"json":return p.json();default:if(void 0===l)return p.text();{const w=/charset="?([^;"\s]*)"?/i.exec(l),I=w&&w[1]?w[1].toLowerCase():void 0,T=new TextDecoder(I);return p.arrayBuffer().then(k=>T.decode(k))}}}).then(p=>{sw.add(t,p);const v=xy[t];delete xy[t];for(let w=0,I=v.length;w<I;w++){const T=v[w];T.onLoad&&T.onLoad(p)}}).catch(p=>{const v=xy[t];if(void 0===v)throw this.manager.itemError(t),p;delete xy[t];for(let w=0,I=v.length;w<I;w++){const T=v[w];T.onError&&T.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class cP extends Hf{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new ns(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const uP=new vo,x8=new en,I8=new en;class S8{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Xi(512,512),this.map=null,this.mapPass=null,this.matrix=new vo,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new IR,this._frameExtents=new Xi(1,1),this._viewportCount=1,this._viewports=[new fl(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;x8.setFromMatrixPosition(t.matrixWorld),e.position.copy(x8),I8.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(I8),e.updateMatrixWorld(),uP.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uP),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(uP)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class qwe extends S8{constructor(){super(new td(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*ox*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class E8 extends cP{constructor(t,e,n=0,r=Math.PI/3,s=0,o=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Hf.DefaultUp),this.updateMatrix(),this.target=new Hf,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new qwe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Kwe extends S8{constructor(){super(new SR(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class M8 extends cP{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Hf.DefaultUp),this.updateMatrix(),this.target=new Hf,this.shadow=new Kwe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class D8 extends cP{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}const fP="\\[\\]\\.:\\/",aAe=new RegExp("["+fP+"]","g"),pP="[^"+fP+"]",lAe="[^"+fP.replace("\\.","")+"]",fAe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",pP)+/(WCOD+)?/.source.replace("WCOD",lAe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pP)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pP)+"$"),pAe=["material","materials","bones","map"];class gAe{constructor(t,e,n){const r=n||Wl.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let Wl=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(aAe,"")}static parseTrackName(e){const n=fAe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==pAe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===n||u.uuid===n)return u;const p=r(u.children);if(p)return p}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let v=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let w=0;w<e.length;w++)if(e[w].name===v){v=w;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==v){if(void 0===e[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[v]}}const l=e[s];if(void 0===l)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}p=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else void 0!==l.fromArray&&void 0!==l.toArray?(p=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(p=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=gAe,i})();Wl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Wl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Wl.prototype.GetterByBindingType=[Wl.prototype._getValue_direct,Wl.prototype._getValue_array,Wl.prototype._getValue_arrayElement,Wl.prototype._getValue_toArray],Wl.prototype.SetterByBindingTypeAndVersioning=[[Wl.prototype._setValue_direct,Wl.prototype._setValue_direct_setNeedsUpdate,Wl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wl.prototype._setValue_array,Wl.prototype._setValue_array_setNeedsUpdate,Wl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wl.prototype._setValue_arrayElement,Wl.prototype._setValue_arrayElement_setNeedsUpdate,Wl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wl.prototype._setValue_fromArray,Wl.prototype._setValue_fromArray_setNeedsUpdate,Wl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class bAe{constructor(){this.type="ShapePath",this.color=new ns,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new xE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,s,o){return this.currentPath.bezierCurveTo(t,e,n,r,s,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(he,Te){const Ae=Te.length;let Le=!1;for(let tt=Ae-1,_t=0;_t<Ae;tt=_t++){let Ut=Te[tt],at=Te[_t],Lt=at.x-Ut.x,cn=at.y-Ut.y;if(Math.abs(cn)>Number.EPSILON){if(cn<0&&(Ut=Te[_t],Lt=-Lt,at=Te[tt],cn=-cn),he.y<Ut.y||he.y>at.y)continue;if(he.y===Ut.y){if(he.x===Ut.x)return!0}else{const Gn=cn*(he.x-Ut.x)-Lt*(he.y-Ut.y);if(0===Gn)return!0;if(Gn<0)continue;Le=!Le}}else{if(he.y!==Ut.y)continue;if(at.x<=he.x&&he.x<=Ut.x||Ut.x<=he.x&&he.x<=at.x)return!0}}return Le}const r=Ay.isClockWise,s=this.subPaths;if(0===s.length)return[];let o,l,u;const p=[];if(1===s.length)return l=s[0],u=new tw,u.curves=l.curves,p.push(u),p;let v=!r(s[0].getPoints());v=t?!v:v;const w=[],I=[];let W,K,T=[],k=0;I[k]=void 0,T[k]=[];for(let he=0,Te=s.length;he<Te;he++)l=s[he],W=l.getPoints(),o=r(W),o=t?!o:o,o?(!v&&I[k]&&k++,I[k]={s:new tw,p:W},I[k].s.curves=l.curves,v&&k++,T[k]=[]):T[k].push({h:l,p:W[0]});if(!I[0])return function e(he){const Te=[];for(let Ae=0,Le=he.length;Ae<Le;Ae++){const tt=he[Ae],_t=new tw;_t.curves=tt.curves,Te.push(_t)}return Te}(s);if(I.length>1){let he=!1,Te=0;for(let Ae=0,Le=I.length;Ae<Le;Ae++)w[Ae]=[];for(let Ae=0,Le=I.length;Ae<Le;Ae++){const tt=T[Ae];for(let _t=0;_t<tt.length;_t++){const Ut=tt[_t];let at=!0;for(let Lt=0;Lt<I.length;Lt++)n(Ut.p,I[Lt].p)&&(Ae!==Lt&&Te++,at?(at=!1,w[Lt].push(Ut)):he=!0);at&&w[Ae].push(Ut)}}Te>0&&!1===he&&(T=w)}for(let he=0,Te=I.length;he<Te;he++){u=I[he].s,p.push(u),K=T[he];for(let Ae=0,Le=K.length;Ae<Le;Ae++)u.holes.push(K[Ae].h)}return p}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"146"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="146");var xAe=z(5570);class IAe extends A8{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new Iy(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(l){const u=s.parse(JSON.parse(l));e&&e(u)},n,r)}parse(t){return new SAe(t)}}class SAe{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=function EAe(i,t,e){const n=Array.from(i),r=t/e.resolution,s=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,o=[];let l=0,u=0;for(let p=0;p<n.length;p++){const v=n[p];if("\n"===v)l=0,u-=s;else{const w=TAe(v,r,l,u,e);w&&(l+=w.offsetX,o.push(w.path))}}return o}(t,e,this.data);for(let s=0,o=r.length;s<o;s++)n.push(...r[s].toShapes(!1));return n}}function TAe(i,t,e,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");const o=new bAe;let l,u,p,v,w,I,T,k;if(s.o){const W=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let K=0,he=W.length;K<he;)switch(W[K++]){case"m":l=W[K++]*t+e,u=W[K++]*t+n,o.moveTo(l,u);break;case"l":l=W[K++]*t+e,u=W[K++]*t+n,o.lineTo(l,u);break;case"q":p=W[K++]*t+e,v=W[K++]*t+n,w=W[K++]*t+e,I=W[K++]*t+n,o.quadraticCurveTo(w,I,p,v);break;case"b":p=W[K++]*t+e,v=W[K++]*t+n,w=W[K++]*t+e,I=W[K++]*t+n,T=W[K++]*t+e,k=W[K++]*t+n,o.bezierCurveTo(w,I,T,k,p,v)}}return{offsetX:s.ha*t,path:o}}class MAe extends RE{constructor(t,e={}){const n=e.font;if(void 0===n)super();else{const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e)}this.type="TextGeometry"}}const DAe=["canvas"];let LAe=(()=>{class i{constructor(e,n,r,s){this.graphsService=e,this.logger=n,this.store=r,this.route=s,this.rotationSpeedX=.05,this.rotationSpeedY=.01,this.size=200,this.frustumSize=600,this.texture="/assets/texture.jpg",this.cameraZ=1,this.fieldOfView=1,this.nearClippingPlane=150,this.farClippingPlane=1e3,this.scene=new OG,this.group=new YC,this.graph$=this.store.select(p2),this.subscriptions=[],this.subscriptions.push(this.graph$.subscribe(o=>{!o||(this.group.clear(),this.loadGraph(o,this.scene))}))}get canvas(){return this.canvasRef?.nativeElement}ngOnInit(){}ngAfterViewInit(){this.route.params.subscribe(e=>{this.id=e.label,this.clearScene(),this.startRenderingLoop();let n=this.graphsService.findOne(this.id+"");n&&this.store.dispatch(E1({graph:n}))})}ngOnDestroy(){this.subscriptions&&Ki.each(this.subscriptions,e=>{e.unsubscribe()})}clearScene(){this.scene.add(this.group),this.camera=new td(45,this.getAspectRatio(),1,1e3),this.camera.position.set(0,15,35);let e=new OE({color:16711680,shininess:150,specular:2236962}),n=new M_(1e3,.15,1e3);e=new OE({color:10530223,shininess:150,specular:1118481});const r=new Ld(n,e);r.scale.multiplyScalar(3),r.castShadow=!1,r.receiveShadow=!0,this.scene.add(r),this.scene.add(new D8(4210752));let s=new E8(4210752);s.name="Spot Light",s.angle=Math.PI/5,s.penumbra=.3,s.position.set(5,5,5),s.castShadow=!0,s.shadow.camera.near=8,s.shadow.camera.far=30,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,this.scene.add(s),this.scene.add(s.shadow.camera);let o=new M8(16777215,1);o.name="Dir. Light",o.position.set(0,10,0),o.castShadow=!0,o.shadow.camera.near=1,o.shadow.camera.far=10,o.shadow.camera.right=15,o.shadow.camera.left=-15,o.shadow.camera.top=15,o.shadow.camera.bottom=-15,o.shadow.mapSize.width=1024,o.shadow.mapSize.height=1024,this.scene.add(o),this.scene.add(o.shadow.camera)}getAspectRatio(){return this.canvas.clientWidth/this.canvas.clientHeight}loadGraph(e,n){let r={};if(e){this.logger.info("Load",e);let s=new en(1,0,0);Ki.each(e.nodes,u=>{let p=new M_(1,.1,1),v=new OE({color:16711680,shininess:150,specular:2236962}),w=new Ld(p,v);w.name=u.id,r[u.id]={x:u.x,y:u.y},w.position.set(u.x/50,2,u.y/50),w.castShadow=!0,w.receiveShadow=!0,n.add(w),this.group.add(w),(new IAe).load("assets/fonts/helvetiker_regular.typeface.json",T=>{const k=new MAe(u.label,{font:T,size:.3,height:.1,curveSegments:5,bevelEnabled:!1,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:0});k.computeBoundingBox(),k.boundingBox||new C_;let he=new Ld(k,v);he.position.set(u.x/50,2,u.y/50),he.rotateOnAxis(s,-Math.PI/2),n.add(he),this.group.add(he)})}),Ki.each(e.edges,u=>{let p=r[u.source],v=r[u.target];const w=new Gf({color:255}),I=[];I.push(new en(p.x/50,2,p.y/50)),I.push(new en(v.x/50,2,v.y/50));const T=(new Ho).setFromPoints(I),k=new bx(T,w);n.add(k),this.group.add(k)});let l=(new C_).setFromObject(this.group).getSize(new en);this.group.translateX(-l.x/2),this.group.translateZ(-l.z/2),this.logger.info("Loaded",this.group.children.length,l)}}startRenderingLoop(){this.renderer=new kG({canvas:this.canvas}),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=0;let e=this;const n=new xAe.OrbitControls(this.camera,this.renderer.domElement);n.autoRotate=!0,n.enableZoom=!0,n.enablePan=!1,n.minDistance=20,n.enableDamping=!0,n.dampingFactor=.2,n.enableKeys=!0,n.update(),function r(){requestAnimationFrame(r),e.renderer.render(e.scene,e.camera)}()}}return i.\u0275fac=function(e){return new(e||i)(Xt(P1),Xt(Jh),Xt(ny),Xt(i_))},i.\u0275cmp=_r({type:i,selectors:[["app-threejs"]],viewQuery:function(e,n){if(1&e&&Tr(DAe,5),2&e){let r;Wi(r=ji())&&(n.canvasRef=r.first)}},inputs:{rotationSpeedX:"rotationSpeedX",rotationSpeedY:"rotationSpeedY",size:"size",frustumSize:"frustumSize",texture:"texture",cameraZ:"cameraZ",fieldOfView:"fieldOfView",nearClippingPlane:["nearClipping","nearClippingPlane"],farClippingPlane:["farClipping","farClippingPlane"]},decls:2,vars:0,consts:[["id","canvas",2,"height","100%","width","100%"],["canvas",""]],template:function(e,n){1&e&&Vn(0,"canvas",0,1)}}),i})();const RAe=hA("styles"),PAe=hA("style");function kAe(i,t){if(1&i){const e=yi();Qe(0,"span",12)(1,"input",13),mn("ngModelChange",function(r){return Ot(e),Nt(Ce().newStyle=r)}),nt(),Qe(2,"label",14),ci(3,"Name"),nt(),Qe(4,"button",15),mn("click",function(){Ot(e);const r=Ce();return Nt(r.openNew(r.newStyle))}),nt()()}if(2&i){const e=Ce();Se(1),de("ngModel",e.newStyle)}}function OAe(i,t){}function FAe(i,t){1&i&&(Qe(0,"div",16)(1,"h5",17),ci(2,"Manage Styles"),nt(),Qe(3,"span",18),Vn(4,"i",19)(5,"input",20),nt()())}function NAe(i,t){1&i&&(Qe(0,"tr")(1,"th",21),Vn(2,"p-tableHeaderCheckbox"),nt(),Qe(3,"th",22),ci(4,"Label "),Vn(5,"p-sortIcon",23),nt(),Qe(6,"th"),ci(7,"Action(s) "),nt()())}function BAe(i,t){if(1&i){const e=yi();Qe(0,"tr")(1,"td"),Vn(2,"p-tableCheckbox",24),nt(),Qe(3,"td"),ci(4),nt(),Qe(5,"td")(6,"button",25),mn("click",function(){const s=Ot(e).$implicit;return Nt(Ce().selectStyle(s))}),nt(),Qe(7,"span"),ci(8,"\xa0"),nt(),Qe(9,"button",26),mn("click",function(r){const o=Ot(e).$implicit;return Nt(Ce().confirm(r,o))}),nt(),Qe(10,"span"),ci(11,"\xa0"),nt()()()}if(2&i){const e=t.$implicit;Se(2),de("value",e),Se(2),is(e.id)}}const zAe=function(){return["label"]},VAe=function(){return{width:"60vw",height:"50vw"}};let UAe=(()=>{class i{constructor(e,n,r,s,o,l,u){this.router=e,this.logger=n,this.styleService=r,this.clipboardService=s,this.confirmationService=o,this.messageService=l,this.store=u,this.style=void 0,this.styles=[],this.displayStyle=!1,this.style$=this.store.select(PAe),this.styles$=this.store.select(RAe),this.style$.subscribe(p=>{!p||(this.style=p)}),this.styles$.subscribe(p=>{!p||(this.styles=Ki.map(p,v=>({id:v.id,tags:v.tags})))})}ngOnInit(){let e=this.styleService.findAll();this.store.dispatch(RA({styles:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteStyle(n)},reject:()=>{}})}selectStyle(e){this.selectedStyle=this.styleService.findOne(e.id),this.logger.info(this.selectedStyle),this.displayStyle=!0}deleteStyle(e){let n=this.styleService.delete(e.id);this.store.dispatch(RA({styles:n}))}openNew(e){if(e){this.styleService.store({id:e,tags:[]},r=>{r.tags=[]});let n=this.styleService.findAll();this.logger.info(n),this.store.dispatch(RA({styles:n}))}}onFileDropped(e){e[0].name.endsWith(".json")&&this.onFileStyleDropped(e)}onFileStyleDropped(e){var n=this;let r=e[0].name;this.messageService.add({key:"bc",severity:"info",summary:"Upload/Style",detail:`Filename ${r}`});let s=new FileReader;s.addEventListener("loadend",tv(function*(){let o=JSON.parse(s.result+"");n.styleService.store({id:r,tags:o},u=>{u.tags=o});let l=n.styleService.findAll();n.store.dispatch(RA({styles:l}))})),s.readAsText(e[0])}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(Jh),Xt(w4),Xt(k1),Xt(sA),Xt(fm),Xt(ny))},i.\u0275cmp=_r({type:i,selectors:[["app-style-selector"]],decls:16,vars:18,consts:[["dropZoneDirective","",1,"card",3,"fileDropped"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["mystyles",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["position","bottom-center","key","bc"],["header","Drag and drop file to update style",3,"modal","visible","maximizable","draggable","resizable","visibleChange"],["dropZoneDirective","",3,"fileDropped"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","pRipple","","pTooltip","Select this style","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Remove this style","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"]],template:function(e,n){1&e&&(Qe(0,"div",0),mn("fileDropped",function(s){return n.onFileDropped(s)}),Qe(1,"p-toolbar",1),Xe(2,kAe,5,1,"ng-template",2),Xe(3,OAe,0,0,"ng-template",3),nt(),Vn(4,"p-toast"),Qe(5,"p-table",4,5),Xe(7,FAe,6,0,"ng-template",6),Xe(8,NAe,8,0,"ng-template",7),Xe(9,BAe,12,2,"ng-template",8),nt()(),Vn(10,"p-confirmPopup")(11,"p-toast",9),Qe(12,"p-dialog",10),mn("visibleChange",function(s){return n.displayStyle=s}),Qe(13,"pre",11),mn("fileDropped",function(s){return n.onFileDropped(s)}),ci(14),function pF(i,t){const e=Ms();let n;const r=i+22;e.firstCreatePass?(n=function Bj(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=ip(n.type)),o=Nu(Xt);try{const l=cd(!1),u=s();return cd(l),function BW(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,Ci(),r,u),u}finally{Nu(o)}}(15,"json"),nt()()),2&e&&(Se(5),de("value",n.styles)("rows",10)("paginator",!0)("globalFilterFields",uo(16,zAe))("rowHover",!0)("showCurrentPageReport",!0),Se(7),no(uo(17,VAe)),de("modal",!0)("visible",n.displayStyle)("maximizable",!0)("draggable",!1)("resizable",!1),Se(2),is(function gF(i,t,e){const n=i+22,r=Ci(),s=ml(r,n);return function Bw(i,t){return i[1].data[t].pure}(r,n)?cF(r,Bo(),t,s.transform,e,s):s.transform(e)}(15,14,n.selectedStyle)))},dependencies:[l_,za,G2,W2,j2,$2,x0,Z1,rv,LA,fC,X2,C0,uC,oy,Y2,PS,VN]}),i})();function HAe(i,t){}function GAe(i,t){}function WAe(i,t){1&i&&(Qe(0,"div",11)(1,"h5",12),ci(2,"Manage Rulesets"),nt(),Qe(3,"span",13),Vn(4,"i",14)(5,"input",15),nt()())}function jAe(i,t){1&i&&(Qe(0,"tr")(1,"th",16),Vn(2,"p-tableHeaderCheckbox"),nt(),Qe(3,"th",17),ci(4,"Id "),Vn(5,"p-sortIcon",18),nt(),Qe(6,"th",19),ci(7,"Type "),Vn(8,"p-sortIcon",20),nt(),Qe(9,"th",21),ci(10,"Size "),Vn(11,"p-sortIcon",22),nt(),Qe(12,"th"),ci(13,"Action(s) "),nt()())}function $Ae(i,t){if(1&i){const e=yi();Qe(0,"tr")(1,"td"),Vn(2,"p-tableCheckbox",23),nt(),Qe(3,"td"),ci(4),nt(),Qe(5,"td"),ci(6),nt(),Qe(7,"td"),ci(8),nt(),Qe(9,"td")(10,"button",24),mn("click",function(r){const o=Ot(e).$implicit;return Nt(Ce().confirm(r,o))}),nt(),Qe(11,"span"),ci(12,"\xa0"),nt(),Qe(13,"button",25),mn("click",function(){const s=Ot(e).$implicit;return Nt(Ce().select(s))}),nt(),Qe(14,"span"),ci(15,"\xa0"),nt()()()}if(2&i){const e=t.$implicit;Se(2),de("value",e),Se(2),is(e.id),Se(2),is(e.type),Se(2),is(e.size)}}const qAe=function(){return["label"]},XAe=[{path:"graphs",component:Roe},{path:"graphs/sigma/:label",component:Uoe},{path:"graphs/cytoscape/:label",component:Dme},{path:"graphs/threejs/:label",component:LAe},{path:"rules",component:(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.logger=n,this.messageService=r,this.confirmationService=s,this.rulesService=o,this.rules=this.rulesService.findAll()}ngOnInit(){}onFileDropped(e){var n=this;let r=e[0].name;this.logger.info("Load file",r);let s="";r.endsWith(".json")&&(s="json"),r.endsWith(".csv")&&(s="csv");let o=new FileReader;o.addEventListener("loadend",tv(function*(){n.messageService.add({key:"bc",severity:"info",summary:"Drop",detail:`Filename ${r}`}),n.logger.info("UPDATE",r,JSON.parse(o.result+"")),n.rulesService.load(r,JSON.parse(o.result+"")),n.logger.info("REFRESH"),n.rules=n.rulesService.findAll()})),o.readAsText(e[0])}select(e){this.router.navigate(["rules",e.id])}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.rules=this.rulesService.delete(n.id)},reject:()=>{}})}}return i.\u0275fac=function(e){return new(e||i)(Xt(bh),Xt(Jh),Xt(fm),Xt(sA),Xt(A4))},i.\u0275cmp=_r({type:i,selectors:[["app-rule-selector"]],decls:12,vars:7,consts:[["dropZoneDirective","",1,"card",3,"fileDropped"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["position","bottom-center","key","bc"],["position","left-center","key","lc"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["myDataset",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","id"],["field","id"],["pSortableColumn","type"],["field","type"],["pSortableColumn","size"],["field","size"],[3,"value"],["pButton","","pRipple","","pTooltip","Remove this rule","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"],["pButton","","pRipple","","pTooltip","Select this rule","tooltipPosition","top","icon","pi pi-sign-out",3,"click"]],template:function(e,n){1&e&&(Qe(0,"div",0),mn("fileDropped",function(s){return n.onFileDropped(s)}),Qe(1,"p-toolbar",1),Xe(2,HAe,0,0,"ng-template",2),Xe(3,GAe,0,0,"ng-template",3),nt(),Vn(4,"p-toast",4)(5,"p-toast",5),Qe(6,"p-table",6,7),Xe(8,WAe,6,0,"ng-template",8),Xe(9,jAe,14,0,"ng-template",9),Xe(10,$Ae,16,4,"ng-template",10),nt()(),Vn(11,"p-confirmPopup")),2&e&&(Se(6),de("value",n.rules)("rows",10)("paginator",!0)("globalFilterFields",uo(6,qAe))("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[l_,za,G2,W2,j2,$2,x0,rv,LA,fC,X2,Y2,PS]}),i})()},{path:"styles",component:UAe},{path:"converters/images",component:Fme},{path:"preferences",component:ove},{path:"about",component:lve}];let YAe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[s_.forRoot(XAe,{useHash:!0}),s_]}),i})();const KAe=function(i){return{"p-hidden":i}};function ZAe(i,t){if(1&i&&Vn(0,"li",4),2&i){const e=Ce().$implicit;de("ngClass",bi(1,KAe,!1===e.visible))}}function QAe(i,t){if(1&i&&Vn(0,"span",16),2&i){const e=Ce(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function JAe(i,t){if(1&i&&(Qe(0,"span",17),ci(1),nt()),2&i){const e=Ce(3).$implicit;Se(1),is(e.label)}}function exe(i,t){1&i&&Vn(0,"span",18),2&i&&de("innerHTML",Ce(3).$implicit.label,Aa)}function txe(i,t){if(1&i&&(Qe(0,"span",19),ci(1),nt()),2&i){const e=Ce(3).$implicit;de("ngClass",e.badgeStyleClass),Se(1),is(e.badge)}}const Z8=function(i,t){return{"pi-angle-down":i,"pi-angle-right":t}};function nxe(i,t){if(1&i&&Vn(0,"span",20),2&i){const e=Ce(4);de("ngClass",as(1,Z8,e.root,!e.root))}}const Q8=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function ixe(i,t){if(1&i){const e=yi();Qe(0,"a",10),mn("click",function(r){Ot(e);const s=Ce(2).$implicit;return Nt(Ce().onItemClick(r,s))})("mouseenter",function(r){Ot(e);const s=Ce(2).$implicit;return Nt(Ce().onItemMouseEnter(r,s))}),Xe(1,QAe,1,2,"span",11),Xe(2,JAe,2,1,"span",12),Xe(3,exe,1,1,"ng-template",null,13,sc),Xe(5,txe,2,2,"span",14),Xe(6,nxe,1,4,"span",15),nt()}if(2&i){const e=ao(4),n=Ce(2).$implicit,r=Ce();de("target",n.target)("ngClass",bi(14,Q8,n.disabled)),vr("href",n.url,Xh)("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0")("aria-haspopup",null!=r.item.items)("aria-expanded",r.item===r.activeItem),Se(1),de("ngIf",n.icon),Se(1),de("ngIf",!1!==n.escape)("ngIfElse",e),Se(3),de("ngIf",n.badge),Se(1),de("ngIf",n.items)}}function rxe(i,t){if(1&i&&Vn(0,"span",16),2&i){const e=Ce(3).$implicit;de("ngClass",e.icon)("ngStyle",e.iconStyle)}}function sxe(i,t){if(1&i&&(Qe(0,"span",17),ci(1),nt()),2&i){const e=Ce(3).$implicit;Se(1),is(e.label)}}function oxe(i,t){1&i&&Vn(0,"span",18),2&i&&de("innerHTML",Ce(3).$implicit.label,Aa)}function axe(i,t){if(1&i&&(Qe(0,"span",19),ci(1),nt()),2&i){const e=Ce(3).$implicit;de("ngClass",e.badgeStyleClass),Se(1),is(e.badge)}}function lxe(i,t){if(1&i&&Vn(0,"span",20),2&i){const e=Ce(4);de("ngClass",as(1,Z8,e.root,!e.root))}}const cxe=function(){return{exact:!1}};function uxe(i,t){if(1&i){const e=yi();Qe(0,"a",21),mn("click",function(r){Ot(e);const s=Ce(2).$implicit;return Nt(Ce().onItemClick(r,s))})("mouseenter",function(r){Ot(e);const s=Ce(2).$implicit;return Nt(Ce().onItemMouseEnter(r,s))}),Xe(1,rxe,1,2,"span",11),Xe(2,sxe,2,1,"span",12),Xe(3,oxe,1,1,"ng-template",null,22,sc),Xe(5,axe,2,2,"span",14),Xe(6,lxe,1,4,"span",15),nt()}if(2&i){const e=ao(4),n=Ce(2).$implicit;de("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||uo(21,cxe))("target",n.target)("ngClass",bi(22,Q8,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),vr("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),Se(1),de("ngIf",n.icon),Se(1),de("ngIf",!1!==n.escape)("ngIfElse",e),Se(3),de("ngIf",n.badge),Se(1),de("ngIf",n.items)}}function hxe(i,t){if(1&i){const e=yi();Qe(0,"p-menubarSub",23),mn("leafClick",function(){return Ot(e),Nt(Ce(3).onLeafClick())}),nt()}if(2&i){const e=Ce(2).$implicit,n=Ce();de("parentActive",e===n.activeItem)("item",e)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay)}}const dxe=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function fxe(i,t){if(1&i&&(Qe(0,"li",5,6),Xe(2,ixe,7,16,"a",7),Xe(3,uxe,7,24,"a",8),Xe(4,hxe,1,4,"p-menubarSub",9),nt()),2&i){const e=Ce().$implicit,n=Ce();Fr(e.styleClass),de("ngClass",as(8,dxe,e===n.activeItem,!1===e.visible))("ngStyle",e.style)("tooltipOptions",e.tooltipOptions),Se(2),de("ngIf",!e.routerLink),Se(1),de("ngIf",e.routerLink),Se(1),de("ngIf",e.items)}}function pxe(i,t){if(1&i&&(Xe(0,ZAe,1,3,"li",2),Xe(1,fxe,5,11,"li",3)),2&i){const e=t.$implicit;de("ngIf",e.separator),Se(1),de("ngIf",!e.separator)}}const gxe=function(i,t){return{"p-submenu-list":i,"p-menubar-root-list":t}},mxe=["menubutton"],vxe=["rootmenu"];function yxe(i,t){1&i&&Ni(0)}function _xe(i,t){if(1&i&&(Qe(0,"div",9),Xe(1,yxe,1,0,"ng-container",10),nt()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.startTemplate)}}function bxe(i,t){1&i&&Ni(0)}function Cxe(i,t){if(1&i&&(Qe(0,"div",11),Xe(1,bxe,1,0,"ng-container",10),nt()),2&i){const e=Ce();Se(1),de("ngTemplateOutlet",e.endTemplate)}}function wxe(i,t){1&i&&(Qe(0,"div",11),su(1),nt())}const Axe=function(i){return{"p-menubar p-component":!0,"p-menubar-mobile-active":i}},xxe=["*"];let Ixe=(()=>{class i{constructor(e,n,r){this.el=e,this.renderer=n,this.cd=r,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new Bn,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(e){this.root||(this._parentActive=e,e||(this.activeItem=null))}onItemClick(e,n){n.disabled?e.preventDefault():(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items&&(this.activeItem&&n===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=n,this.root&&this.bindDocumentClickListener())),n.items||this.onLeafClick())}onItemMouseEnter(e,n){n.disabled||this.mobileActive?e.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=n,this.bindDocumentClickListener()):(this.activeItem=n,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=e=>{this.el&&!this.el.nativeElement.contains(e.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))}unbindDocumentClickListener(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)}ngOnDestroy(){this.unbindDocumentClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(d),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(e,n){1&e&&(Qe(0,"ul",0),Xe(1,pxe,2,2,"ng-template",1),nt()),2&e&&(de("ngClass",as(3,gxe,!n.root,n.root)),vr("role",n.root?"menubar":"menu"),Se(1),de("ngForOf",n.root?n.item:n.item.items))},dependencies:[io,$c,ho,Ro,rC,$D,Du,rv,i],encapsulation:2}),i})(),Sxe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.cd=r,this.config=s,this.autoZIndex=!0,this.baseZIndex=0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template}})}toggle(e){this.mobileActive?(this.hide(),Ll.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,Ll.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),e.preventDefault()}bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.mobileActive&&this.rootmenu.el.nativeElement!==e.target&&!this.rootmenu.el.nativeElement.contains(e.target)&&this.menubutton.nativeElement!==e.target&&!this.menubutton.nativeElement.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))}hide(){this.mobileActive=!1,this.cd.markForCheck(),Ll.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}ngOnDestroy(){this.unbindOutsideClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(d),Xt(xo),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-menubar"]],contentQueries:function(e,n,r){if(1&e&&Ba(r,za,4),2&e){let s;Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(mxe,5),Tr(vxe,5)),2&e){let r;Wi(r=ji())&&(n.menubutton=r.first),Wi(r=ji())&&(n.rootmenu=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay"},ngContentSelectors:xxe,decls:10,vars:14,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],[1,"p-menubar-end"]],template:function(e,n){if(1&e&&(Bf(),Qe(0,"div",0),Xe(1,_xe,2,1,"div",1),Qe(2,"a",2,3),mn("click",function(s){return n.toggle(s)}),Vn(4,"i",4),nt(),Qe(5,"p-menubarSub",5,6),mn("leafClick",function(){return n.onLeafClick()}),nt(),Xe(7,Cxe,2,1,"div",7),Xe(8,wxe,2,0,"ng-template",null,8,sc),nt()),2&e){const r=ao(9);Fr(n.styleClass),de("ngClass",bi(12,Axe,n.mobileActive))("ngStyle",n.style),Se(1),de("ngIf",n.startTemplate),Se(4),de("item",n.model)("baseZIndex",n.baseZIndex)("autoZIndex",n.autoZIndex)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay),Se(2),de("ngIf",n.endTemplate)("ngIfElse",r)}},dependencies:[io,ho,el,Ro,Ixe],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:1}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),i})(),Exe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,s_,Xc,sv,xa,s_,sv,xa]}),i})();function Txe(i,t){1&i&&Vn(0,"img",2)}let Mxe=(()=>{class i{constructor(e,n){this.title=e,this.store=n,this.items=[],this.subscriptions=[],this.title.setTitle("MySystem 1.2.1")}ngOnInit(){this.items=[{label:"Graph",icon:"pi pi-fw pi-box",items:[{label:"Graph(s)",icon:"pi pi-fw pi-book",routerLink:"/graphs"}]},{label:"Rule",icon:"pi pi-fw pi-box",items:[{label:"Rule(s)",icon:"pi pi-fw pi-book",routerLink:"/rules"}]},{label:"Style",icon:"pi pi-fw pi-box",items:[{label:"Style(s)",icon:"pi pi-fw pi-book",routerLink:"/styles"}]},{label:"Misc",icon:"pi pi-fw pi-cog",items:[{label:"Preferences",icon:"pi pi-fw pi-database",routerLink:"/preferences"},{label:"Images",icon:"pi pi-fw pi-cloud-upload",routerLink:"/converters/images"},{label:"About",icon:"pi pi-fw pi-at",routerLink:"/about"}]}]}ngOnDestroy(){this.subscriptions&&Ki.each(this.subscriptions,e=>{e.unsubscribe()})}}return i.\u0275fac=function(e){return new(e||i)(Xt(aD),Xt(ny))},i.\u0275cmp=_r({type:i,selectors:[["app-root"]],decls:3,vars:1,consts:[[3,"model"],["pTemplate","start"],["src","assets/favicon.png","height","40",1,"mr-2"]],template:function(e,n){1&e&&(Qe(0,"p-menubar",0),Xe(1,Txe,1,0,"ng-template",1),nt(),Vn(2,"router-outlet")),2&e&&de("model",n.items)},dependencies:[kD,za,Sxe]}),i})();function J8(i){return new _i(3e3,!1)}function uIe(){return typeof window<"u"&&typeof window.document<"u"}function yP(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function R_(i){switch(i.length){case 0:return new IA;case 1:return i[0];default:return new qV(i)}}function e6(i,t,e,n,r=new Map,s=new Map){const o=[],l=[];let u=-1,p=null;if(n.forEach(v=>{const w=v.get("offset"),I=w==u,T=I&&p||new Map;v.forEach((k,W)=>{let K=W,he=k;if("offset"!==W)switch(K=t.normalizePropertyName(K,o),he){case"!":he=r.get(W);break;case ay:he=s.get(W);break;default:he=t.normalizeStyleValue(W,K,he,o)}T.set(K,he)}),I||l.push(T),p=T,u=w}),o.length)throw function Qxe(i){return new _i(3502,!1)}();return l}function _P(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&bP(e,"start",i)));break;case"done":i.onDone(()=>n(e&&bP(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&bP(e,"destroy",i)))}}function bP(i,t,e){const s=CP(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function CP(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Np(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function t6(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let wP=(i,t)=>!1,n6=(i,t,e)=>[],r6=null;function AP(i){const t=i.parentNode||i.host;return t===r6?null:t}(yP()||typeof Element<"u")&&(uIe()?(r6=(()=>document.documentElement)(),wP=(i,t)=>{for(;t;){if(t===i)return!0;t=AP(t)}return!1}):wP=(i,t)=>i.contains(t),n6=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let ab=null,s6=!1;const o6=wP,a6=n6;let l6=(()=>{class i{validateStyleProperty(e){return function dIe(i){ab||(ab=function fIe(){return typeof document<"u"?document.body:null}()||{},s6=!!ab.style&&"WebkitAppearance"in ab.style);let t=!0;return ab.style&&!function hIe(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in ab.style,!t&&s6&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in ab.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return o6(e,n)}getParentElement(e){return AP(e)}query(e,n,r){return a6(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,l=[],u){return new IA(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})(),xP=(()=>{class i{}return i.NOOP=new l6,i})();const IP="ng-enter",XE="ng-leave",YE="ng-trigger",KE=".ng-trigger",u6="ng-animating",SP=".ng-animating";function P_(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:EP(parseFloat(t[1]),t[2])}function EP(i,t){return"s"===t?1e3*i:i}function ZE(i,t,e){return i.hasOwnProperty("duration")?i:function mIe(i,t,e){let r,s=0,o="";if("string"==typeof i){const l=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return t.push(J8()),{duration:0,delay:0,easing:""};r=EP(parseFloat(l[1]),l[2]);const u=l[3];null!=u&&(s=EP(parseFloat(u),l[4]));const p=l[5];p&&(o=p)}else r=i;if(!e){let l=!1,u=t.length;r<0&&(t.push(function Dxe(){return new _i(3100,!1)}()),l=!0),s<0&&(t.push(function Lxe(){return new _i(3101,!1)}()),l=!0),l&&t.splice(u,0,J8())}return{duration:r,delay:s,easing:o}}(i,t,e)}function Mx(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function h6(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function k_(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function f6(i,t,e){return e?t+":"+e+";":""}function p6(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=f6(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=f6(0,bIe(e),i.style[e]));i.setAttribute("style",t)}function gv(i,t,e){i.style&&(t.forEach((n,r)=>{const s=MP(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),yP()&&p6(i))}function lb(i,t){i.style&&(t.forEach((e,n)=>{const r=MP(n);i.style[r]=""}),yP()&&p6(i))}function Dx(i){return Array.isArray(i)?1==i.length?i[0]:WV(i):i}const TP=new RegExp("{{\\s*(.+?)\\s*}}","g");function g6(i){let t=[];if("string"==typeof i){let e;for(;e=TP.exec(i);)t.push(e[1]);TP.lastIndex=0}return t}function QE(i,t,e){const n=i.toString(),r=n.replace(TP,(s,o)=>{let l=t[o];return null==l&&(e.push(function Pxe(i){return new _i(3003,!1)}()),l=""),l.toString()});return r==n?i:r}function JE(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const _Ie=/-+([a-z0-9])/g;function MP(i){return i.replace(_Ie,(...t)=>t[1].toUpperCase())}function bIe(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Bp(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function kxe(i){return new _i(3004,!1)}()}}function m6(i,t){return window.getComputedStyle(i)[t]}function SIe(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function EIe(i,t,e){if(":"==i[0]){const u=function TIe(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function Xxe(i){return new _i(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof u)return void t.push(u);i=u}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function qxe(i){return new _i(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push(v6(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(v6(o,r))}(n,e,t)):e.push(i),e}const iT=new Set(["true","1"]),rT=new Set(["false","0"]);function v6(i,t){const e=iT.has(i)||rT.has(i),n=iT.has(t)||rT.has(t);return(r,s)=>{let o="*"==i||i==r,l="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?iT.has(i):rT.has(i)),!l&&n&&"boolean"==typeof s&&(l=s?iT.has(t):rT.has(t)),o&&l}}const MIe=new RegExp("s*:selfs*,?","g");function DP(i,t,e,n){return new DIe(i).build(t,e,n)}class DIe{constructor(t){this._driver=t}build(t,e,n){const r=new PIe(e);return this._resetContextStyleTimingState(r),Bp(this,Dx(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function Fxe(){return new _i(3006,!1)}()),t.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),0==l.type){const u=l,p=u.name;p.toString().split(/\s*,\s*/).forEach(v=>{u.name=v,s.push(this.visitState(u,e))}),u.name=p}else if(1==l.type){const u=this.visitTransition(l,e);n+=u.queryCount,r+=u.depCount,o.push(u)}else e.errors.push(function Nxe(){return new _i(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{g6(u).forEach(p=>{o.hasOwnProperty(p)||s.add(p)})})}),s.size&&(JE(s.values()),e.errors.push(function Bxe(i,t){return new _i(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Bp(this,Dx(t.animation),e);return{type:1,matchers:SIe(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:cb(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Bp(this,n,e)),options:cb(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const l=Bp(this,o,e);return r=Math.max(r,e.currentTime),l});return e.currentTime=r,{type:3,steps:s,options:cb(t.options)}}visitAnimate(t,e){const n=function OIe(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return LP(ZE(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=LP(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=ZE(e,t);return LP(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:tl({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,l=!1;if(!o){l=!0;const p={};n.easing&&(p.easing=n.easing),o=tl(p)}e.currentTime+=n.duration+n.delay;const u=this.visitStyle(o,e);u.isEmptyStep=l,r=u}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let l of r)"string"==typeof l?l===ay?n.push(l):e.errors.push(new _i(3002,!1)):n.push(h6(l));let s=!1,o=null;return n.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(o=l.get("easing"),l.delete("easing")),!s))for(let u of l.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,u)=>{const p=e.collectedStyles.get(e.currentQuerySelector),v=p.get(u);let w=!0;v&&(s!=r&&s>=v.startTime&&r<=v.endTime&&(e.errors.push(function Vxe(i,t,e,n,r){return new _i(3010,!1)}()),w=!1),s=v.startTime),w&&p.set(u,{startTime:s,endTime:r}),e.options&&function yIe(i,t,e){const n=t.params||{},r=g6(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function Rxe(i){return new _i(3001,!1)}())})}(l,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Uxe(){return new _i(3011,!1)}()),n;let s=0;const o=[];let l=!1,u=!1,p=0;const v=t.steps.map(he=>{const Te=this._makeStyleAst(he,e);let Ae=null!=Te.offset?Te.offset:function kIe(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(Te.styles),Le=0;return null!=Ae&&(s++,Le=Te.offset=Ae),u=u||Le<0||Le>1,l=l||Le<p,p=Le,o.push(Le),Te});u&&e.errors.push(function Hxe(){return new _i(3012,!1)}()),l&&e.errors.push(function Gxe(){return new _i(3200,!1)}());const w=t.steps.length;let I=0;s>0&&s<w?e.errors.push(function Wxe(){return new _i(3202,!1)}()):0==s&&(I=1/(w-1));const T=w-1,k=e.currentTime,W=e.currentAnimateTimings,K=W.duration;return v.forEach((he,Te)=>{const Ae=I>0?Te==T?1:I*Te:o[Te],Le=Ae*K;e.currentTime=k+W.delay+Le,W.duration=Le,this._validateStyleAst(he,e),he.offset=Ae,n.styles.push(he)}),n}visitReference(t,e){return{type:8,animation:Bp(this,Dx(t.animation),e),options:cb(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:cb(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:cb(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function LIe(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(MIe,"")),i=i.replace(/@\*/g,KE).replace(/@\w+/g,e=>KE+"-"+e.slice(1)).replace(/:animating/g,SP),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Np(e.collectedStyles,e.currentQuerySelector,new Map);const l=Bp(this,Dx(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:l,originalSelector:t.selector,options:cb(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function jxe(){return new _i(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:ZE(t.timings,e.errors,!0);return{type:12,animation:Bp(this,Dx(t.animation),e),timings:n,options:null}}}class PIe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function cb(i){return i?(i=Mx(i)).params&&(i.params=function RIe(i){return i?Mx(i):null}(i.params)):i={},i}function LP(i,t,e){return{duration:i,delay:t,easing:e}}function RP(i,t,e,n,r,s,o=null,l=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:l}}class sT{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const BIe=new RegExp(":enter","g"),VIe=new RegExp(":leave","g");function PP(i,t,e,n,r,s=new Map,o=new Map,l,u,p=[]){return(new UIe).buildKeyframes(i,t,e,n,r,s,o,l,u,p)}class UIe{buildKeyframes(t,e,n,r,s,o,l,u,p,v=[]){p=p||new sT;const w=new kP(t,e,p,r,s,v,[]);w.options=u;const I=u.delay?P_(u.delay):0;w.currentTimeline.delayNextStep(I),w.currentTimeline.setStyles([o],null,w.errors,u),Bp(this,n,w);const T=w.timelines.filter(k=>k.containsAnimation());if(T.length&&l.size){let k;for(let W=T.length-1;W>=0;W--){const K=T[W];if(K.element===e){k=K;break}}k&&!k.allowOnlyTimelineStyles()&&k.setStyles([l],null,w.errors,u)}return T.length?T.map(k=>k.buildKeyframes()):[RP(e,[],[],[],0,I,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?P_(n.duration):null,l=null!=n.delay?P_(n.delay):null;return 0!==o&&t.forEach(u=>{const p=e.appendInstructionToTimeline(u,o,l);s=Math.max(s,p.duration+p.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Bp(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=oT);const o=P_(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Bp(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?P_(t.options.delay):0;t.steps.forEach(o=>{const l=e.createSubContext(t.options);s&&l.delayNextStep(s),Bp(this,o,l),r=Math.max(r,l.currentTimeline.currentTime),n.push(l.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return ZE(e.params?QE(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,l=e.createSubContext().currentTimeline;l.easing=n.easing,t.styles.forEach(u=>{l.forwardTime((u.offset||0)*s),l.setStyles(u.styles,u.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?P_(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=oT);let o=n;const l=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=l.length;let u=null;l.forEach((p,v)=>{e.currentQueryIndex=v;const w=e.createSubContext(t.options,p);s&&w.delayNextStep(s),p===e.element&&(u=w.currentTimeline),Bp(this,t.animation,w),w.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,w.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),l=o*(e.currentQueryTotal-1);let u=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=l-u;break;case"full":u=n.currentStaggerTime}const v=e.currentTimeline;u&&v.delayNextStep(u);const w=v.currentTime;Bp(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-w+(r.startTime-n.currentTimeline.startTime)}}const oT={};class kP{constructor(t,e,n,r,s,o,l,u){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=oT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new aT(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=P_(n.duration)),null!=n.delay&&(r.delay=P_(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(l=>{(!e||!o.hasOwnProperty(l))&&(o[l]=QE(s[l],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new kP(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=oT,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new HIe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let l=[];if(r&&l.push(this.element),t.length>0){t=(t=t.replace(BIe,"."+this._enterClassName)).replace(VIe,"."+this._leaveClassName);let p=this._driver.query(this.element,t,1!=n);0!==n&&(p=n<0?p.slice(p.length+n,p.length):p.slice(0,n)),l.push(...p)}return!s&&0==l.length&&o.push(function $xe(i){return new _i(3014,!1)}()),l}}class aT{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new aT(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||ay),this._currentKeyframe.set(e,ay);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function GIe(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,ay)}else k_(r,e)}),e}(t,this._globalTimelineStyles);for(let[l,u]of o){const p=QE(u,s,n);this._pendingStyles.set(l,p),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??ay),this._updateStyle(l,p)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((l,u)=>{const p=k_(l,new Map,this._backFill);p.forEach((v,w)=>{"!"===v?t.add(w):v===ay&&e.add(w)}),n||p.set("offset",u/this.duration),r.push(p)});const s=t.size?JE(t.values()):[],o=e.size?JE(e.values()):[];if(n){const l=r[0],u=new Map(l);l.set("offset",0),u.set("offset",1),r=[l,u]}return RP(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class HIe extends aT{constructor(t,e,n,r,s,o,l=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,l=e/o,u=k_(t[0]);u.set("offset",0),s.push(u);const p=k_(t[0]);p.set("offset",b6(l)),s.push(p);const v=t.length-1;for(let w=1;w<=v;w++){let I=k_(t[w]);const T=I.get("offset");I.set("offset",b6((e+T*n)/o)),s.push(I)}n=o,e=0,r="",t=s}return RP(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function b6(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class OP{}const WIe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class jIe extends OP{normalizePropertyName(t,e){return MP(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(WIe.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const l=n.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&r.push(function Oxe(i,t){return new _i(3005,!1)}())}return o+s}}function C6(i,t,e,n,r,s,o,l,u,p,v,w,I){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:l,queriedElements:u,preStyleProps:p,postStyleProps:v,totalTime:w,errors:I}}const FP={};class w6{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function $Ie(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,l,u,p,v){const w=[],I=this.ast.options&&this.ast.options.params||FP,k=this.buildStyles(n,l&&l.params||FP,w),W=u&&u.params||FP,K=this.buildStyles(r,W,w),he=new Set,Te=new Map,Ae=new Map,Le="void"===r,tt={params:qIe(W,I),delay:this.ast.options?.delay},_t=v?[]:PP(t,e,this.ast.animation,s,o,k,K,tt,p,w);let Ut=0;if(_t.forEach(Lt=>{Ut=Math.max(Lt.duration+Lt.delay,Ut)}),w.length)return C6(e,this._triggerName,n,r,Le,k,K,[],[],Te,Ae,Ut,w);_t.forEach(Lt=>{const cn=Lt.element,Gn=Np(Te,cn,new Set);Lt.preStyleProps.forEach(jn=>Gn.add(jn));const ii=Np(Ae,cn,new Set);Lt.postStyleProps.forEach(jn=>ii.add(jn)),cn!==e&&he.add(cn)});const at=JE(he.values());return C6(e,this._triggerName,n,r,Le,k,K,_t,at,Te,Ae,Ut)}}function qIe(i,t){const e=Mx(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class XIe{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=Mx(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,l)=>{o&&(o=QE(o,r,e));const u=this.normalizer.normalizePropertyName(l,e);o=this.normalizer.normalizeStyleValue(l,u,o,e),n.set(u,o)})}),n}}class KIe{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new XIe(r.style,r.options&&r.options.params||{},n))}),A6(this.states,"true","1"),A6(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new w6(t,r,this.states))}),this.fallbackTransition=function ZIe(i,t,e){return new w6(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,l)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function A6(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const QIe=new sT;class JIe{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],s=DP(this._driver,e,n,[]);if(n.length)throw function Jxe(i){return new _i(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=e6(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const l=new Map;if(s?(o=PP(this._driver,e,s,IP,XE,new Map,new Map,n,QIe,r),o.forEach(v=>{const w=Np(l,v.element,new Map);v.postStyleProps.forEach(I=>w.set(I,null))})):(r.push(function eIe(){return new _i(3300,!1)}()),o=[]),r.length)throw function tIe(i){return new _i(3504,!1)}();l.forEach((v,w)=>{v.forEach((I,T)=>{v.set(T,this._driver.computeStyle(w,T,ay))})});const p=R_(o.map(v=>{const w=l.get(v.element);return this._buildPlayer(v,new Map,w)}));return this._playersById.set(t,p),p.onDestroy(()=>this.destroy(t)),this.players.push(p),p}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function nIe(i){return new _i(3301,!1)}();return e}listen(t,e,n,r){const s=CP(e,"","","");return _P(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const x6="ng-animate-queued",NP="ng-animate-disabled",r1e=[],I6={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},s1e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ig="__ng_removed";class BP{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function c1e(i){return i??null}(n?t.value:t),n){const s=Mx(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Lx="void",zP=new BP(Lx);class o1e{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Sg(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function iIe(i,t){return new _i(3302,!1)}();if(null==n||0==n.length)throw function rIe(i){return new _i(3303,!1)}();if(!function u1e(i){return"start"==i||"done"==i}(n))throw function sIe(i,t){return new _i(3400,!1)}();const s=Np(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const l=Np(this._engine.statesByElement,t,new Map);return l.has(e)||(Sg(t,YE),Sg(t,YE+"-"+e),l.set(e,zP)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(e)||l.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function oIe(i){return new _i(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new VP(this.id,e,t);let l=this._engine.statesByElement.get(t);l||(Sg(t,YE),Sg(t,YE+"-"+e),this._engine.statesByElement.set(t,l=new Map));let u=l.get(e);const p=new BP(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&p.absorbOptions(u.options),l.set(e,p),u||(u=zP),p.value!==Lx&&u.value===p.value){if(!function f1e(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(u.params,p.params)){const W=[],K=s.matchStyles(u.value,u.params,W),he=s.matchStyles(p.value,p.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{lb(t,K),gv(t,he)})}return}const I=Np(this._engine.playersByElement,t,[]);I.forEach(W=>{W.namespaceId==this.id&&W.triggerName==e&&W.queued&&W.destroy()});let T=s.matchTransition(u.value,p.value,t,p.params),k=!1;if(!T){if(!r)return;T=s.fallbackTransition,k=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:T,fromState:u,toState:p,player:o,isFallbackTransition:k}),k||(Sg(t,x6),o.onStart(()=>{ow(t,x6)})),o.onDone(()=>{let W=this.players.indexOf(o);W>=0&&this.players.splice(W,1);const K=this._engine.playersByElement.get(t);if(K){let he=K.indexOf(o);he>=0&&K.splice(he,1)}}),this.players.push(o),I.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,KE,!0);n.forEach(r=>{if(r[Ig])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const l=[];if(s.forEach((u,p)=>{if(o.set(p,u.value),this._triggers.has(p)){const v=this.trigger(t,p,Lx,r);v&&l.push(v)}}),l.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&R_(l).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const u=this._triggers.get(o).fallbackTransition,p=n.get(o)||zP,v=new BP(Lx),w=new VP(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:u,fromState:p,toState:v,player:w,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Ig];(!s||s===I6)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Sg(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(l=>{if(l.name==n.triggerName){const u=CP(s,n.triggerName,n.fromState.value,n.toState.value);u._data=t,_P(n.player,l.phase,u,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class a1e{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new o1e(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,l=this.driver.getParentElement(e);for(;l;){const u=r.get(l);if(u){const p=n.indexOf(u);n.splice(p+1,0,t),o=!0;break}l=this.driver.getParentElement(l)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(lT(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!lT(e))return;const s=e[Ig];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Sg(t,NP)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),ow(t,NP))}removeNode(t,e,n,r){if(lT(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Ig]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return lT(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,KE,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,SP,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return R_(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Ig];if(e&&e.setForRemoval){if(t[Ig]=I6,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(NP)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Sg(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?R_(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function aIe(i){return new _i(3402,!1)}()}_flushAnimations(t,e){const n=new sT,r=[],s=new Map,o=[],l=new Map,u=new Map,p=new Map,v=new Set;this.disabledNodes.forEach(In=>{v.add(In);const Wn=this.driver.query(In,".ng-animate-queued",!0);for(let zn=0;zn<Wn.length;zn++)v.add(Wn[zn])});const w=this.bodyNode,I=Array.from(this.statesByElement.keys()),T=T6(I,this.collectedEnterElements),k=new Map;let W=0;T.forEach((In,Wn)=>{const zn=IP+W++;k.set(Wn,zn),In.forEach(Sn=>Sg(Sn,zn))});const K=[],he=new Set,Te=new Set;for(let In=0;In<this.collectedLeaveElements.length;In++){const Wn=this.collectedLeaveElements[In],zn=Wn[Ig];zn&&zn.setForRemoval&&(K.push(Wn),he.add(Wn),zn.hasAnimation?this.driver.query(Wn,".ng-star-inserted",!0).forEach(Sn=>he.add(Sn)):Te.add(Wn))}const Ae=new Map,Le=T6(I,Array.from(he));Le.forEach((In,Wn)=>{const zn=XE+W++;Ae.set(Wn,zn),In.forEach(Sn=>Sg(Sn,zn))}),t.push(()=>{T.forEach((In,Wn)=>{const zn=k.get(Wn);In.forEach(Sn=>ow(Sn,zn))}),Le.forEach((In,Wn)=>{const zn=Ae.get(Wn);In.forEach(Sn=>ow(Sn,zn))}),K.forEach(In=>{this.processLeaveNode(In)})});const tt=[],_t=[];for(let In=this._namespaceList.length-1;In>=0;In--)this._namespaceList[In].drainQueuedTransitions(e).forEach(zn=>{const Sn=zn.player,Hn=zn.element;if(tt.push(Sn),this.collectedEnterElements.length){const ws=Hn[Ig];if(ws&&ws.setForMove){if(ws.previousTriggersValues&&ws.previousTriggersValues.has(zn.triggerName)){const vs=ws.previousTriggersValues.get(zn.triggerName),ys=this.statesByElement.get(zn.element);if(ys&&ys.has(zn.triggerName)){const Pr=ys.get(zn.triggerName);Pr.value=vs,ys.set(zn.triggerName,Pr)}}return void Sn.destroy()}}const Yi=!w||!this.driver.containsElement(w,Hn),Ti=Ae.get(Hn),sr=k.get(Hn),fr=this._buildInstruction(zn,n,sr,Ti,Yi);if(fr.errors&&fr.errors.length)return void _t.push(fr);if(Yi)return Sn.onStart(()=>lb(Hn,fr.fromStyles)),Sn.onDestroy(()=>gv(Hn,fr.toStyles)),void r.push(Sn);if(zn.isFallbackTransition)return Sn.onStart(()=>lb(Hn,fr.fromStyles)),Sn.onDestroy(()=>gv(Hn,fr.toStyles)),void r.push(Sn);const Es=[];fr.timelines.forEach(ws=>{ws.stretchStartingKeyframe=!0,this.disabledNodes.has(ws.element)||Es.push(ws)}),fr.timelines=Es,n.append(Hn,fr.timelines),o.push({instruction:fr,player:Sn,element:Hn}),fr.queriedElements.forEach(ws=>Np(l,ws,[]).push(Sn)),fr.preStyleProps.forEach((ws,vs)=>{if(ws.size){let ys=u.get(vs);ys||u.set(vs,ys=new Set),ws.forEach((Pr,Io)=>ys.add(Io))}}),fr.postStyleProps.forEach((ws,vs)=>{let ys=p.get(vs);ys||p.set(vs,ys=new Set),ws.forEach((Pr,Io)=>ys.add(Io))})});if(_t.length){const In=[];_t.forEach(Wn=>{In.push(function lIe(i,t){return new _i(3505,!1)}())}),tt.forEach(Wn=>Wn.destroy()),this.reportError(In)}const Ut=new Map,at=new Map;o.forEach(In=>{const Wn=In.element;n.has(Wn)&&(at.set(Wn,Wn),this._beforeAnimationBuild(In.player.namespaceId,In.instruction,Ut))}),r.forEach(In=>{const Wn=In.element;this._getPreviousPlayers(Wn,!1,In.namespaceId,In.triggerName,null).forEach(Sn=>{Np(Ut,Wn,[]).push(Sn),Sn.destroy()})});const Lt=K.filter(In=>D6(In,u,p)),cn=new Map;E6(cn,this.driver,Te,p,ay).forEach(In=>{D6(In,u,p)&&Lt.push(In)});const ii=new Map;T.forEach((In,Wn)=>{E6(ii,this.driver,new Set(In),u,"!")}),Lt.forEach(In=>{const Wn=cn.get(In),zn=ii.get(In);cn.set(In,new Map([...Array.from(Wn?.entries()??[]),...Array.from(zn?.entries()??[])]))});const jn=[],Mn=[],Un={};o.forEach(In=>{const{element:Wn,player:zn,instruction:Sn}=In;if(n.has(Wn)){if(v.has(Wn))return zn.onDestroy(()=>gv(Wn,Sn.toStyles)),zn.disabled=!0,zn.overrideTotalTime(Sn.totalTime),void r.push(zn);let Hn=Un;if(at.size>1){let Ti=Wn;const sr=[];for(;Ti=Ti.parentNode;){const fr=at.get(Ti);if(fr){Hn=fr;break}sr.push(Ti)}sr.forEach(fr=>at.set(fr,Hn))}const Yi=this._buildAnimation(zn.namespaceId,Sn,Ut,s,ii,cn);if(zn.setRealPlayer(Yi),Hn===Un)jn.push(zn);else{const Ti=this.playersByElement.get(Hn);Ti&&Ti.length&&(zn.parentPlayer=R_(Ti)),r.push(zn)}}else lb(Wn,Sn.fromStyles),zn.onDestroy(()=>gv(Wn,Sn.toStyles)),Mn.push(zn),v.has(Wn)&&r.push(zn)}),Mn.forEach(In=>{const Wn=s.get(In.element);if(Wn&&Wn.length){const zn=R_(Wn);In.setRealPlayer(zn)}}),r.forEach(In=>{In.parentPlayer?In.syncPlayerEvents(In.parentPlayer):In.destroy()});for(let In=0;In<K.length;In++){const Wn=K[In],zn=Wn[Ig];if(ow(Wn,XE),zn&&zn.hasAnimation)continue;let Sn=[];if(l.size){let Yi=l.get(Wn);Yi&&Yi.length&&Sn.push(...Yi);let Ti=this.driver.query(Wn,SP,!0);for(let sr=0;sr<Ti.length;sr++){let fr=l.get(Ti[sr]);fr&&fr.length&&Sn.push(...fr)}}const Hn=Sn.filter(Yi=>!Yi.destroyed);Hn.length?h1e(this,Wn,Hn):this.processLeaveNode(Wn)}return K.length=0,jn.forEach(In=>{this.players.push(In),In.onDone(()=>{In.destroy();const Wn=this.players.indexOf(In);this.players.splice(Wn,1)}),In.play()}),jn}elementContainsData(t,e){let n=!1;const r=e[Ig];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const l=this.playersByQueriedElement.get(t);l&&(o=l)}else{const l=this.playersByElement.get(t);if(l){const u=!s||s==Lx;l.forEach(p=>{p.queued||!u&&p.triggerName!=r||o.push(p)})}}return(n||r)&&(o=o.filter(l=>!(n&&n!=l.namespaceId||r&&r!=l.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,l=e.isRemovalTransition?void 0:e.triggerName;for(const u of e.timelines){const p=u.element,v=p!==s,w=Np(n,p,[]);this._getPreviousPlayers(p,v,o,l,e.toState).forEach(T=>{const k=T.getRealPlayer();k.beforeDestroy&&k.beforeDestroy(),T.destroy(),w.push(T)})}lb(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const l=e.triggerName,u=e.element,p=[],v=new Set,w=new Set,I=e.timelines.map(k=>{const W=k.element;v.add(W);const K=W[Ig];if(K&&K.removedBeforeQueried)return new IA(k.duration,k.delay);const he=W!==u,Te=function d1e(i){const t=[];return M6(i,t),t}((n.get(W)||r1e).map(Ut=>Ut.getRealPlayer())).filter(Ut=>!!Ut.element&&Ut.element===W),Ae=s.get(W),Le=o.get(W),tt=e6(0,this._normalizer,0,k.keyframes,Ae,Le),_t=this._buildPlayer(k,tt,Te);if(k.subTimeline&&r&&w.add(W),he){const Ut=new VP(t,l,W);Ut.setRealPlayer(_t),p.push(Ut)}return _t});p.forEach(k=>{Np(this.playersByQueriedElement,k.element,[]).push(k),k.onDone(()=>function l1e(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,k.element,k))}),v.forEach(k=>Sg(k,u6));const T=R_(I);return T.onDestroy(()=>{v.forEach(k=>ow(k,u6)),gv(u,e.toStyles)}),w.forEach(k=>{Np(r,k,[]).push(T)}),T}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new IA(t.duration,t.delay)}}class VP{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new IA,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>_P(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Np(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function lT(i){return i&&1===i.nodeType}function S6(i,t){const e=i.style.display;return i.style.display=t??"none",e}function E6(i,t,e,n,r){const s=[];e.forEach(u=>s.push(S6(u)));const o=[];n.forEach((u,p)=>{const v=new Map;u.forEach(w=>{const I=t.computeStyle(p,w,r);v.set(w,I),(!I||0==I.length)&&(p[Ig]=s1e,o.push(p))}),i.set(p,v)});let l=0;return e.forEach(u=>S6(u,s[l++])),o}function T6(i,t){const e=new Map;if(i.forEach(l=>e.set(l,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(l){if(!l)return 1;let u=s.get(l);if(u)return u;const p=l.parentNode;return u=e.has(p)?p:r.has(p)?1:o(p),s.set(l,u),u}return t.forEach(l=>{const u=o(l);1!==u&&e.get(u).push(l)}),e}function Sg(i,t){i.classList?.add(t)}function ow(i,t){i.classList?.remove(t)}function h1e(i,t,e){R_(e).onDone(()=>i.processLeaveNode(t))}function M6(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof qV?M6(n.players,t):t.push(n)}}function D6(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class cT{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new a1e(t,e,n),this._timelineEngine=new JIe(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let l=this._triggerCache[o];if(!l){const u=[],v=DP(this._driver,s,u,[]);if(u.length)throw function Zxe(i,t){return new _i(3404,!1)}();l=function YIe(i,t,e){return new KIe(i,t,e)}(r,v,this._normalizer),this._triggerCache[o]=l}this._transitionEngine.registerTrigger(e,r,l)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=t6(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,l]=t6(n);return this._timelineEngine.listen(o,e,l,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let g1e=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&gv(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gv(this._element,this._initialStyles),this._endStyles&&(gv(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(lb(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(lb(this._element,this._endStyles),this._endStyles=null),gv(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function UP(i){let t=null;return i.forEach((e,n)=>{(function m1e(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class L6{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:m6(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class v1e{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return o6(t,e)}getParentElement(t){return AP(t)}query(t,e,n){return a6(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const u={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const p=new Map,v=o.filter(T=>T instanceof L6);(function CIe(i,t){return 0===i||0===t})(n,r)&&v.forEach(T=>{T.currentSnapshot.forEach((k,W)=>p.set(W,k))});let w=function vIe(i){return i.length?i[0]instanceof Map?i:i.map(t=>h6(t)):[]}(e).map(T=>k_(T));w=function wIe(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(l=>o.set(l,m6(i,l)))}}return t}(t,w,p);const I=function p1e(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=UP(t[0]),t.length>1&&(n=UP(t[t.length-1]))):t instanceof Map&&(e=UP(t)),e||n?new g1e(i,e,n):null}(t,w);return new L6(t,w,u,I)}}let y1e=(()=>{class i extends GV{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ma.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?WV(e):e;return R6(this._renderer,null,n,"register",[r]),new _1e(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(Yn(c),Yn(Ku))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class _1e extends class DJ{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new b1e(this._id,t,e||{},this._renderer)}}class b1e{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return R6(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function R6(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const P6="@.disabled";let C1e=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const l=o?.parentNode(s);l&&o.removeChild(l,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let v=this._rendererCache.get(s);return v||(v=new k6("",s,this.engine),this._rendererCache.set(s,v)),v}const o=n.id,l=n.id+"-"+this._currentId;this._currentId++,this.engine.register(l,e);const u=v=>{Array.isArray(v)?v.forEach(u):this.engine.registerTrigger(o,l,e,v.name,v)};return n.data.animation.forEach(u),new w1e(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,l]=s;o(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(Yn(c),Yn(cT),Yn(Vo))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})();class k6{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==P6?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class w1e extends k6{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==P6?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function A1e(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function x1e(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,l=>{this.factory.scheduleListenerCallback(l._data||-1,n,l)})}return this.delegate.listen(t,e,n)}}const O6=[{provide:GV,useClass:y1e},{provide:OP,useFactory:function S1e(){return new jIe}},{provide:cT,useClass:(()=>{class i extends cT{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(Yn(Ku),Yn(xP),Yn(OP),Yn(Hw))},i.\u0275prov=Zi({token:i,factory:i.\u0275fac}),i})()},{provide:c,useFactory:function E1e(i,t,e){return new C1e(i,t,e)},deps:[QI,cT,Vo]}],HP=[{provide:xP,useFactory:()=>new v1e},{provide:jF,useValue:"BrowserAnimations"},...O6],F6=[{provide:xP,useClass:l6},{provide:jF,useValue:"NoopAnimations"},...O6];let T1e=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?F6:HP}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({providers:HP,imports:[a3]}),i})();const M1e=["sliderHandle"],D1e=["sliderHandleStart"],L1e=["sliderHandleEnd"],R1e=function(i,t){return{left:i,width:t}};function P1e(i,t){if(1&i&&Vn(0,"span",4),2&i){const e=Ce();de("ngStyle",as(1,R1e,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const k1e=function(i,t){return{bottom:i,height:t}};function O1e(i,t){if(1&i&&Vn(0,"span",4),2&i){const e=Ce();de("ngStyle",as(1,k1e,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const F1e=function(i){return{height:i}};function N1e(i,t){if(1&i&&Vn(0,"span",4),2&i){const e=Ce();de("ngStyle",bi(1,F1e,e.handleValue+"%"))}}const B1e=function(i){return{width:i}};function z1e(i,t){if(1&i&&Vn(0,"span",4),2&i){const e=Ce();de("ngStyle",bi(1,B1e,e.handleValue+"%"))}}const GP=function(i,t){return{left:i,bottom:t}};function V1e(i,t){if(1&i){const e=yi();Qe(0,"span",5,6),mn("keydown",function(r){return Ot(e),Nt(Ce().onHandleKeydown(r))})("mousedown",function(r){return Ot(e),Nt(Ce().onMouseDown(r))})("touchstart",function(r){return Ot(e),Nt(Ce().onTouchStart(r))})("touchmove",function(r){return Ot(e),Nt(Ce().onTouchMove(r))})("touchend",function(r){return Ot(e),Nt(Ce().onTouchEnd(r))}),nt()}if(2&i){const e=Ce();xd("transition",e.dragging?"none":null),de("ngStyle",as(8,GP,"horizontal"==e.orientation?e.handleValue+"%":null,"vertical"==e.orientation?e.handleValue+"%":null)),vr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const N6=function(i){return{"p-slider-handle-active":i}};function U1e(i,t){if(1&i){const e=yi();Qe(0,"span",7,8),mn("keydown",function(r){return Ot(e),Nt(Ce().onHandleKeydown(r,0))})("mousedown",function(r){return Ot(e),Nt(Ce().onMouseDown(r,0))})("touchstart",function(r){return Ot(e),Nt(Ce().onTouchStart(r,0))})("touchmove",function(r){return Ot(e),Nt(Ce().onTouchMove(r,0))})("touchend",function(r){return Ot(e),Nt(Ce().onTouchEnd(r))}),nt()}if(2&i){const e=Ce();xd("transition",e.dragging?"none":null),de("ngStyle",as(9,GP,e.rangeStartLeft,e.rangeStartBottom))("ngClass",bi(12,N6,0==e.handleIndex)),vr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[0]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}function H1e(i,t){if(1&i){const e=yi();Qe(0,"span",7,9),mn("keydown",function(r){return Ot(e),Nt(Ce().onHandleKeydown(r,1))})("mousedown",function(r){return Ot(e),Nt(Ce().onMouseDown(r,1))})("touchstart",function(r){return Ot(e),Nt(Ce().onTouchStart(r,1))})("touchmove",function(r){return Ot(e),Nt(Ce().onTouchMove(r,1))})("touchend",function(r){return Ot(e),Nt(Ce().onTouchEnd(r))}),nt()}if(2&i){const e=Ce();xd("transition",e.dragging?"none":null),de("ngStyle",as(9,GP,e.rangeEndLeft,e.rangeEndBottom))("ngClass",bi(12,N6,1==e.handleIndex)),vr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[1]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const G1e=function(i,t,e,n){return{"p-slider p-component":!0,"p-disabled":i,"p-slider-horizontal":t,"p-slider-vertical":e,"p-slider-animate":n}},W1e={provide:wc,useExisting:hs(()=>j1e),multi:!0};let j1e=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.ngZone=r,this.cd=s,this.min=0,this.max=100,this.orientation="horizontal",this.tabindex=0,this.onChange=new Bn,this.onSlideEnd=new Bn,this.handleValues=[],this.onModelChange=()=>{},this.onModelTouched=()=>{},this.handleIndex=0}onMouseDown(e,n){this.disabled||(this.dragging=!0,this.updateDomData(),this.sliderHandleClick=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,this.bindDragListeners(),e.target.focus(),e.preventDefault(),this.animate&&Bt.removeClass(this.el.nativeElement.children[0],"p-slider-animate"))}onTouchStart(e,n){if(!this.disabled){var r=e.changedTouches[0];this.startHandleValue=this.range?this.handleValues[n]:this.handleValue,this.dragging=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,"horizontal"===this.orientation?(this.startx=parseInt(r.clientX,10),this.barWidth=this.el.nativeElement.children[0].offsetWidth):(this.starty=parseInt(r.clientY,10),this.barHeight=this.el.nativeElement.children[0].offsetHeight),this.animate&&Bt.removeClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault()}}onTouchMove(e,n){if(!this.disabled){var s,r=e.changedTouches[0];s="horizontal"===this.orientation?Math.floor(100*(parseInt(r.clientX,10)-this.startx)/this.barWidth)+this.startHandleValue:Math.floor(100*(this.starty-parseInt(r.clientY,10))/this.barHeight)+this.startHandleValue,this.setValueFromHandle(e,s),e.preventDefault()}}onTouchEnd(e,n){this.disabled||(this.dragging=!1,this.onSlideEnd.emit(this.range?{originalEvent:e,values:this.values}:{originalEvent:e,value:this.value}),this.animate&&Bt.addClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault())}onBarClick(e){this.disabled||(this.sliderHandleClick||(this.updateDomData(),this.handleChange(e)),this.sliderHandleClick=!1)}onHandleKeydown(e,n){this.disabled||(38==e.which||39==e.which?this.spin(e,1,n):(37==e.which||40==e.which)&&this.spin(e,-1,n))}spin(e,n,r){let s=(this.step||1)*n;this.range?(this.handleIndex=r,this.updateValue(this.values[this.handleIndex]+s),this.updateHandleValue()):(this.updateValue(this.value+s),this.updateHandleValue()),e.preventDefault()}handleChange(e){let n=this.calculateHandleValue(e);this.setValueFromHandle(e,n)}bindDragListeners(){this.ngZone.runOutsideAngular(()=>{const e=this.el?this.el.nativeElement.ownerDocument:"document";this.dragListener||(this.dragListener=this.renderer.listen(e,"mousemove",n=>{this.dragging&&this.ngZone.run(()=>{this.handleChange(n)})})),this.mouseupListener||(this.mouseupListener=this.renderer.listen(e,"mouseup",n=>{this.dragging&&(this.dragging=!1,this.ngZone.run(()=>{this.onSlideEnd.emit(this.range?{originalEvent:n,values:this.values}:{originalEvent:n,value:this.value}),this.animate&&Bt.addClass(this.el.nativeElement.children[0],"p-slider-animate")}))}))})}unbindDragListeners(){this.dragListener&&this.dragListener(),this.mouseupListener&&this.mouseupListener()}setValueFromHandle(e,n){this.sliderHandleClick=!1;let r=this.getValueFromHandle(n);this.range?this.step?this.handleStepChange(r,this.values[this.handleIndex]):(this.handleValues[this.handleIndex]=n,this.updateValue(r,e)):this.step?this.handleStepChange(r,this.value):(this.handleValue=n,this.updateValue(r,e)),this.cd.markForCheck()}handleStepChange(e,n){let r=e-n,s=n;r<0?s=n+Math.ceil(e/this.step-n/this.step)*this.step:r>0&&(s=n+Math.floor(e/this.step-n/this.step)*this.step),this.updateValue(s),this.updateHandleValue()}writeValue(e){this.range?this.values=e||[0,0]:this.value=e||0,this.updateHandleValue(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get rangeStartLeft(){return this.isVertical()?null:this.handleValues[0]+"%"}get rangeStartBottom(){return this.isVertical()?this.handleValues[0]+"%":"auto"}get rangeEndLeft(){return this.isVertical()?null:this.handleValues[1]+"%"}get rangeEndBottom(){return this.isVertical()?this.handleValues[1]+"%":"auto"}isVertical(){return"vertical"===this.orientation}updateDomData(){let e=this.el.nativeElement.children[0].getBoundingClientRect();this.initX=e.left+Bt.getWindowScrollLeft(),this.initY=e.top+Bt.getWindowScrollTop(),this.barWidth=this.el.nativeElement.children[0].offsetWidth,this.barHeight=this.el.nativeElement.children[0].offsetHeight}calculateHandleValue(e){return"horizontal"===this.orientation?100*(e.pageX-this.initX)/this.barWidth:100*(this.initY+this.barHeight-e.pageY)/this.barHeight}updateHandleValue(){this.range?(this.handleValues[0]=100*(this.values[0]<this.min?0:this.values[0]-this.min)/(this.max-this.min),this.handleValues[1]=100*(this.values[1]>this.max?100:this.values[1]-this.min)/(this.max-this.min)):this.handleValue=this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)}updateValue(e,n){if(this.range){let r=e;0==this.handleIndex?(r<this.min?(r=this.min,this.handleValues[0]=0):r>this.values[1]&&(r>this.max&&(r=this.max,this.handleValues[0]=100),this.handleValues[0]=r),this.sliderHandleStart.nativeElement.focus()):(r>this.max?(r=this.max,this.handleValues[1]=100,this.offset=this.handleValues[1]):r<this.min?(r=this.min,this.handleValues[1]=r):r<this.values[0]&&(this.offset=this.handleValues[1]),this.sliderHandleEnd.nativeElement.focus()),this.diff=Math.abs(this.handleValues[0]-this.handleValues[1]),this.offset=Math.min(this.handleValues[0],this.handleValues[1]),this.values[this.handleIndex]=this.getNormalizedValue(r),this.onModelChange([this.minVal,this.maxVal]),this.onChange.emit({event:n,values:this.values})}else e<this.min?(e=this.min,this.handleValue=0):e>this.max&&(e=this.max,this.handleValue=100),this.value=this.getNormalizedValue(e),this.onModelChange(this.value),this.onChange.emit({event:n,value:this.value}),this.sliderHandle.nativeElement.focus()}getValueFromHandle(e){return e/100*(this.max-this.min)+this.min}getDecimalsCount(e){return e&&Math.floor(e)!==e&&e.toString().split(".")[1].length||0}getNormalizedValue(e){let n=this.getDecimalsCount(this.step);return n>0?+e.toFixed(n):Math.floor(e)}ngOnDestroy(){this.unbindDragListeners()}get minVal(){return Math.min(this.values[1],this.values[0])}get maxVal(){return Math.max(this.values[1],this.values[0])}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(d),Xt(Vo),Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-slider"]],viewQuery:function(e,n){if(1&e&&(Tr(M1e,5),Tr(D1e,5),Tr(L1e,5)),2&e){let r;Wi(r=ji())&&(n.sliderHandle=r.first),Wi(r=ji())&&(n.sliderHandleStart=r.first),Wi(r=ji())&&(n.sliderHandleEnd=r.first)}},hostAttrs:[1,"p-element"],inputs:{animate:"animate",disabled:"disabled",min:"min",max:"max",orientation:"orientation",step:"step",range:"range",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex"},outputs:{onChange:"onChange",onSlideEnd:"onSlideEnd"},features:[Ao([W1e])],decls:8,vars:16,consts:[[3,"ngStyle","ngClass","click"],["class","p-slider-range",3,"ngStyle",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],[1,"p-slider-range",3,"ngStyle"],[1,"p-slider-handle",3,"ngStyle","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandle",""],[1,"p-slider-handle",3,"ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandleStart",""],["sliderHandleEnd",""]],template:function(e,n){1&e&&(Qe(0,"div",0),mn("click",function(s){return n.onBarClick(s)}),Xe(1,P1e,1,4,"span",1),Xe(2,O1e,1,4,"span",1),Xe(3,N1e,1,3,"span",1),Xe(4,z1e,1,3,"span",1),Xe(5,V1e,2,11,"span",2),Xe(6,U1e,2,14,"span",3),Xe(7,H1e,2,14,"span",3),nt()),2&e&&(Fr(n.styleClass),de("ngStyle",n.style)("ngClass",sf(11,G1e,n.disabled,"horizontal"==n.orientation,"vertical"==n.orientation,n.animate)),Se(1),de("ngIf",n.range&&"horizontal"==n.orientation),Se(1),de("ngIf",n.range&&"vertical"==n.orientation),Se(1),de("ngIf",!n.range&&"vertical"==n.orientation),Se(1),de("ngIf",!n.range&&"horizontal"==n.orientation),Se(1),de("ngIf",!n.range),Se(1),de("ngIf",n.range),Se(1),de("ngIf",n.range))},dependencies:[io,ho,Ro],styles:[".p-slider{position:relative}.p-slider .p-slider-handle{position:absolute;cursor:grab;touch-action:none;display:block}.p-slider-range{position:absolute;display:block}.p-slider-horizontal .p-slider-range{top:0;left:0;height:100%}.p-slider-horizontal .p-slider-handle{top:50%}.p-slider-vertical{height:100px}.p-slider-vertical .p-slider-handle{left:50%}.p-slider-vertical .p-slider-range{bottom:0;left:0;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),$1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();function q1e(i,t){if(1&i&&(Qe(0,"span"),ci(1),nt()),2&i){const e=Ce();Se(1),is(e.label)}}function X1e(i,t){1&i&&Ni(0)}const Rx=function(i){return{height:i}},Y1e=function(i,t){return{"p-highlight":i,"p-disabled":t}},K1e=function(i){return{"p-highlight":i}},B6=function(i){return{"pi pi-check":i}},Px=function(i){return{$implicit:i}},Z1e=["container"],Q1e=["filterInput"],J1e=["in"],eSe=["items"],tSe=["scroller"];function nSe(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(2);Se(1),is(e.valuesAsString||"empty")}}function iSe(i,t){if(1&i){const e=yi();Qe(0,"span",18),mn("click",function(r){Ot(e);const s=Ce().$implicit;return Nt(Ce(3).removeChip(s,r))}),nt()}}function rSe(i,t){if(1&i&&(Qe(0,"div",14,15)(2,"span",16),ci(3),nt(),Xe(4,iSe,1,0,"span",17),nt()),2&i){const e=t.$implicit,n=Ce(3);Se(3),is(n.findLabelByValue(e)),Se(1),de("ngIf",!n.disabled)}}function sSe(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(3);Se(1),is(e.placeholder||e.defaultLabel||"empty")}}function oSe(i,t){if(1&i&&(Ur(0),Xe(1,rSe,5,2,"div",13),Xe(2,sSe,2,1,"ng-container",7),Hr()),2&i){const e=Ce(2);Se(1),de("ngForOf",e.value),Se(1),de("ngIf",!e.value||0===e.value.length)}}function aSe(i,t){if(1&i&&(Ur(0),Xe(1,nSe,2,1,"ng-container",7),Xe(2,oSe,3,2,"ng-container",7),Hr()),2&i){const e=Ce();Se(1),de("ngIf","comma"===e.display),Se(1),de("ngIf","chip"===e.display)}}function lSe(i,t){1&i&&Ni(0)}function cSe(i,t){if(1&i){const e=yi();Qe(0,"i",19),mn("click",function(r){return Ot(e),Nt(Ce().clear(r))}),nt()}}function uSe(i,t){1&i&&Ni(0)}function hSe(i,t){1&i&&Ni(0)}const z6=function(i){return{options:i}};function dSe(i,t){if(1&i&&(Ur(0),Xe(1,hSe,1,0,"ng-container",8),Hr()),2&i){const e=Ce(3);Se(1),de("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",bi(2,z6,e.filterOptions))}}const fSe=function(i){return{"p-checkbox-disabled":i}},pSe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}};function gSe(i,t){if(1&i){const e=yi();Qe(0,"div",34)(1,"div",2)(2,"input",35),mn("focus",function(){return Ot(e),Nt(Ce(4).onHeaderCheckboxFocus())})("blur",function(){return Ot(e),Nt(Ce(4).onHeaderCheckboxBlur())})("keydown.space",function(r){return Ot(e),Nt(Ce(4).toggleAll(r))}),nt()(),Qe(3,"div",36),mn("click",function(r){return Ot(e),Nt(Ce(4).toggleAll(r))}),Vn(4,"span",37),nt()()}if(2&i){const e=Ce(4);de("ngClass",bi(6,fSe,e.disabled||e.toggleAllDisabled)),Se(2),de("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),Se(1),de("ngClass",Su(8,pSe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),vr("aria-checked",e.allChecked),Se(1),de("ngClass",bi(12,B6,e.allChecked))}}function mSe(i,t){if(1&i){const e=yi();Qe(0,"div",38)(1,"input",39,40),mn("input",function(r){return Ot(e),Nt(Ce(4).onFilterInputChange(r))}),nt(),Vn(3,"span",41),nt()}if(2&i){const e=Ce(4);Se(1),de("value",e.filterValue||"")("disabled",e.disabled),vr("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function vSe(i,t){if(1&i){const e=yi();Xe(0,gSe,5,14,"div",30),Xe(1,mSe,4,5,"div",31),Qe(2,"button",32),mn("click",function(r){return Ot(e),Nt(Ce(3).close(r))}),Vn(3,"span",33),nt()}if(2&i){const e=Ce(3);de("ngIf",e.showToggleAll&&!e.selectionLimit),Se(1),de("ngIf",e.filter)}}function ySe(i,t){if(1&i&&(Qe(0,"div",26),su(1),Xe(2,uSe,1,0,"ng-container",27),Xe(3,dSe,2,4,"ng-container",28),Xe(4,vSe,4,2,"ng-template",null,29,sc),nt()),2&i){const e=ao(5),n=Ce(2);Se(2),de("ngTemplateOutlet",n.headerTemplate),Se(1),de("ngIf",n.filterTemplate)("ngIfElse",e)}}function _Se(i,t){1&i&&Ni(0)}const V6=function(i,t){return{$implicit:i,options:t}};function bSe(i,t){if(1&i&&Xe(0,_Se,1,0,"ng-container",8),2&i){const e=t.$implicit,n=t.options;Ce(2),de("ngTemplateOutlet",ao(6))("ngTemplateOutletContext",as(2,V6,e,n))}}function CSe(i,t){1&i&&Ni(0)}function wSe(i,t){if(1&i&&Xe(0,CSe,1,0,"ng-container",8),2&i){const e=t.options;de("ngTemplateOutlet",Ce(4).loaderTemplate)("ngTemplateOutletContext",bi(2,z6,e))}}function ASe(i,t){1&i&&(Ur(0),Xe(1,wSe,1,4,"ng-template",45),Hr())}function xSe(i,t){if(1&i){const e=yi();Qe(0,"p-scroller",42,43),mn("onLazyLoad",function(r){return Ot(e),Nt(Ce(2).onLazyLoad.emit(r))}),Xe(2,bSe,1,5,"ng-template",44),Xe(3,ASe,2,0,"ng-container",7),nt()}if(2&i){const e=Ce(2);no(bi(9,Rx,e.scrollHeight)),de("items",e.optionsToRender)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),Se(3),de("ngIf",e.loaderTemplate)}}function ISe(i,t){1&i&&Ni(0)}const SSe=function(){return{}};function ESe(i,t){if(1&i&&(Ur(0),Xe(1,ISe,1,0,"ng-container",8),Hr()),2&i){Ce();const e=ao(6),n=Ce();Se(1),de("ngTemplateOutlet",e)("ngTemplateOutletContext",as(3,V6,n.optionsToRender,uo(2,SSe)))}}function TSe(i,t){if(1&i&&(Qe(0,"span"),ci(1),nt()),2&i){const e=Ce().$implicit,n=Ce(4);Se(1),is(n.getOptionGroupLabel(e)||"empty")}}function MSe(i,t){1&i&&Ni(0)}function DSe(i,t){1&i&&Ni(0)}function LSe(i,t){if(1&i&&(Qe(0,"li",51),Xe(1,TSe,2,1,"span",7),Xe(2,MSe,1,0,"ng-container",8),nt(),Xe(3,DSe,1,0,"ng-container",8)),2&i){const e=t.$implicit,n=Ce(2).options,r=ao(5),s=Ce(2);de("ngStyle",bi(6,Rx,n.itemSize+"px")),Se(1),de("ngIf",!s.groupTemplate),Se(1),de("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",bi(8,Px,e)),Se(1),de("ngTemplateOutlet",r)("ngTemplateOutletContext",bi(10,Px,s.getOptionGroupChildren(e)))}}function RSe(i,t){if(1&i&&(Ur(0),Xe(1,LSe,4,12,"ng-template",50),Hr()),2&i){const e=Ce().$implicit;Se(1),de("ngForOf",e)}}function PSe(i,t){1&i&&Ni(0)}function kSe(i,t){if(1&i&&(Ur(0),Xe(1,PSe,1,0,"ng-container",8),Hr()),2&i){const e=Ce().$implicit,n=ao(5);Se(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",bi(2,Px,e))}}function OSe(i,t){if(1&i){const e=yi();Qe(0,"p-multiSelectItem",52),mn("onClick",function(r){return Ot(e),Nt(Ce(4).onOptionClick(r))})("onKeydown",function(r){return Ot(e),Nt(Ce(4).onOptionKeydown(r))}),nt()}if(2&i){const e=t.$implicit,n=Ce(2).options,r=Ce(2);de("option",e)("selected",r.isSelected(e))("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)("itemSize",n.itemSize)}}function FSe(i,t){1&i&&Xe(0,OSe,1,6,"ng-template",50),2&i&&de("ngForOf",t.$implicit)}function NSe(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(4);Se(1),_c(" ",e.emptyFilterMessageLabel," ")}}function BSe(i,t){1&i&&Ni(0,null,54)}function zSe(i,t){if(1&i&&(Qe(0,"li",53),Xe(1,NSe,2,1,"ng-container",28),Xe(2,BSe,2,0,"ng-container",27),nt()),2&i){const e=Ce().options,n=Ce(2);de("ngStyle",bi(4,Rx,e.itemSize+"px")),Se(1),de("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),Se(1),de("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function VSe(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(4);Se(1),_c(" ",e.emptyMessageLabel," ")}}function USe(i,t){1&i&&Ni(0,null,55)}function HSe(i,t){if(1&i&&(Qe(0,"li",53),Xe(1,VSe,2,1,"ng-container",28),Xe(2,USe,2,0,"ng-container",27),nt()),2&i){const e=Ce().options,n=Ce(2);de("ngStyle",bi(4,Rx,e.itemSize+"px")),Se(1),de("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),Se(1),de("ngTemplateOutlet",n.emptyTemplate)}}function GSe(i,t){if(1&i&&(Qe(0,"ul",46,47),Xe(2,RSe,2,1,"ng-container",7),Xe(3,kSe,2,4,"ng-container",7),Xe(4,FSe,1,1,"ng-template",null,48,sc),Xe(6,zSe,3,6,"li",49),Xe(7,HSe,3,6,"li",49),nt()),2&i){const e=t.options,n=Ce(2);no(e.contentStyle),de("ngClass",e.contentStyleClass),Se(2),de("ngIf",n.group),Se(1),de("ngIf",!n.group),Se(3),de("ngIf",n.hasFilter()&&n.isEmpty()),Se(1),de("ngIf",!n.hasFilter()&&n.isEmpty())}}function WSe(i,t){1&i&&Ni(0)}function jSe(i,t){if(1&i&&(Qe(0,"div",56),su(1,1),Xe(2,WSe,1,0,"ng-container",27),nt()),2&i){const e=Ce(2);Se(2),de("ngTemplateOutlet",e.footerTemplate)}}const $Se=function(){return["p-multiselect-panel p-component"]},qSe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},XSe=function(i){return{value:"visible",params:i}};function YSe(i,t){if(1&i){const e=yi();Qe(0,"div",20),mn("@overlayAnimation.start",function(r){return Ot(e),Nt(Ce().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return Ot(e),Nt(Ce().onOverlayAnimationEnd(r))})("keydown",function(r){return Ot(e),Nt(Ce().onKeydown(r))})("click",function(r){return Ot(e),Nt(Ce().onOverlayClick(r))}),Xe(1,ySe,6,3,"div",21),Qe(2,"div",22),Xe(3,xSe,4,11,"p-scroller",23),Xe(4,ESe,2,6,"ng-container",7),Xe(5,GSe,8,7,"ng-template",null,24,sc),nt(),Xe(7,jSe,3,1,"div",25),nt()}if(2&i){const e=Ce();Fr(e.panelStyleClass),de("ngClass",uo(11,$Se))("@overlayAnimation",bi(15,XSe,as(12,qSe,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),Se(1),de("ngIf",e.showHeader),Se(1),xd("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),Se(1),de("ngIf",e.virtualScroll),Se(1),de("ngIf",!e.virtualScroll),Se(3),de("ngIf",e.footerFacet||e.footerTemplate)}}const KSe=[[["p-header"]],[["p-footer"]]],ZSe=function(i,t,e,n){return{"p-multiselect p-component":!0,"p-multiselect-open":i,"p-multiselect-chip":t,"p-focus":e,"p-disabled":n}},QSe=function(i,t){return{"p-placeholder":i,"p-multiselect-label-empty":t}},JSe=function(){return{"p-multiselect-trigger":!0}},eEe=["p-header","p-footer"],tEe={provide:wc,useExisting:hs(()=>iEe),multi:!0};let nEe=(()=>{class i{constructor(){this.onClick=new Bn,this.onKeydown=new Bn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}onOptionKeydown(e){this.onKeydown.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=_r({type:i,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Qe(0,"li",0),mn("click",function(s){return n.onOptionClick(s)})("keydown",function(s){return n.onOptionKeydown(s)}),Qe(1,"div",1)(2,"div",2),Vn(3,"span",3),nt()(),Xe(4,q1e,2,1,"span",4),Xe(5,X1e,1,0,"ng-container",5),nt()),2&e&&(de("ngStyle",bi(9,Rx,n.itemSize+"px"))("ngClass",as(11,Y1e,n.selected,n.disabled)),vr("aria-label",n.label)("tabindex",n.disabled?null:"0"),Se(2),de("ngClass",bi(14,K1e,n.selected)),Se(1),de("ngClass",bi(16,B6,n.selected)),Se(1),de("ngIf",!n.template),Se(1),de("ngTemplateOutlet",n.template)("ngTemplateOutletContext",bi(18,Px,n.option)))},dependencies:[io,ho,el,Ro,Du],encapsulation:2}),i})(),iEe=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.filterService=s,this.config=o,this.overlayService=l,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.scrollHeight="200px",this.lazy=!1,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.showClear=!1,this.onChange=new Bn,this.onFilter=new Bn,this.onFocus=new Bn,this.onBlur=new Bn,this.onClick=new Bn,this.onClear=new Bn,this.onPanelShow=new Bn,this.onPanelHide=new Bn,this.onLazyLoad=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(e){this._defaultLabel=e,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder=e,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(e){this._options=e,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(e){return this.optionLabel?Ji.resolveFieldData(e,this.optionLabel):e&&null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ji.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?Ji.resolveFieldData(e,this.optionGroupLabel):e&&null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ji.resolveFieldData(e,this.optionGroupChildren):e.items}isOptionDisabled(e){return(this.optionDisabled?Ji.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}writeValue(e){this.value=e,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e){let n=e.option;if(this.isOptionDisabled(n))return;let r=this.getOptionValue(n),s=this.findSelectionIndex(r);-1!=s?(this.value=this.value.filter((o,l)=>l!=s),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],r]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:e.originalEvent,value:this.value,itemValue:r}),this.updateLabel(),this.updateFilledState()}isSelected(e){return-1!=this.findSelectionIndex(this.getOptionValue(e))}findSelectionIndex(e){let n=-1;if(this.value)for(let r=0;r<this.value.length;r++)if(Ji.equals(this.value[r],e,this.dataKey)){n=r;break}return n}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateFilledState(),this.updateLabel(),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Ll.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(e){"void"===e.toState&&Ll.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Bt.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Bt.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?Bt.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Bt.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateLabel(),this.updateFilledState(),this.onClear.emit(),this.onModelChange(this.value),e.stopPropagation()}onMouseclick(e,n){this.disabled||this.readonly||e.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(e),!this.isOverlayClick(e)&&!Bt.hasClass(e.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(n.focus(),this.show())))}removeChip(e,n){this.value=this.value.filter(r=>!Ji.equals(r,e,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:n,value:this.value,itemValue:e}),this.updateLabel(),this.updateFilledState()}isOverlayClick(e){let n=e.target;return!!this.overlay&&(this.overlay.isSameNode(n)||this.overlay.contains(n))}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.isOverlayClick(e))}onInputFocus(e){this.focus=!0,this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focus=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(e){if(!this.readonly)switch(e.originalEvent.which){case 40:var n=this.findNextItem(e.originalEvent.target.parentElement);n&&n.focus(),e.originalEvent.preventDefault();break;case 38:var r=this.findPrevItem(e.originalEvent.target.parentElement);r&&r.focus(),e.originalEvent.preventDefault();break;case 13:this.onOptionClick(e),e.originalEvent.preventDefault();break;case 9:this.hide()}}findNextItem(e){let n=e.nextElementSibling;return n?Bt.hasClass(n.children[0],"p-disabled")||Bt.isHidden(n.children[0])||Bt.hasClass(n,"p-multiselect-item-group")?this.findNextItem(n):n.children[0]:null}findPrevItem(e){let n=e.previousElementSibling;return n?Bt.hasClass(n.children[0],"p-disabled")||Bt.isHidden(n.children[0])||Bt.hasClass(n,"p-multiselect-item-group")?this.findPrevItem(n):n.children[0]:null}onKeydown(e){switch(e.which){case 40:!this.overlayVisible&&e.altKey&&(this.show(),e.preventDefault());break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let e="";for(let n=0;n<this.value.length;n++){let r=this.findLabelByValue(this.value[n]);r&&(e.length>0&&(e+=", "),e+=r)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=e;else{let n=/{(.*?)}/;this.valuesAsString=n.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(n)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(e){if(this.group){let n=null;for(let r=0;r<this.options.length;r++){let s=this.getOptionGroupChildren(this.options[r]);if(s&&(n=this.searchLabelByValue(e,s),n))break}return n}return this.searchLabelByValue(e,this.options)}searchLabelByValue(e,n){let r=null;for(let s=0;s<n.length;s++){let o=n[s],l=this.getOptionValue(o);if(null==e&&null==l||Ji.equals(e,l,this.dataKey)){r=this.getOptionLabel(o);break}}return r}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(qc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(qc.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(e){this._filterValue=e.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:e,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&this.hide(),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Bt.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new SA(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Ll.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(d),Xt(xo),Xt(oA),Xt(Dp),Xt(aA))},i.\u0275cmp=_r({type:i,selectors:[["p-multiSelect"]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,A1,5),Ba(r,XD,5),Ba(r,za,4)),2&e){let s;Wi(s=ji())&&(n.footerFacet=s.first),Wi(s=ji())&&(n.headerFacet=s.first),Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(Z1e,5),Tr(Q1e,5),Tr(J1e,5),Tr(eSe,5),Tr(tSe,5)),2&e){let r;Wi(r=ji())&&(n.containerViewChild=r.first),Wi(r=ji())&&(n.filterInputChild=r.first),Wi(r=ji())&&(n.accessibleViewChild=r.first),Wi(r=ji())&&(n.itemsViewChild=r.first),Wi(r=ji())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Mp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus||n.overlayVisible)("p-multiselect-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad"},features:[Ao([tEe])],ngContentSelectors:eEe,decls:13,vars:34,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-multiselect-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],[1,"p-multiselect-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(e,n){if(1&e){const r=yi();Bf(KSe),Qe(0,"div",0,1),mn("click",function(o){Ot(r);const l=ao(4);return Nt(n.onMouseclick(o,l))}),Qe(2,"div",2)(3,"input",3,4),mn("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)})("keydown",function(o){return n.onKeydown(o)}),nt()(),Qe(5,"div",5)(6,"div",6),Xe(7,aSe,3,2,"ng-container",7),Xe(8,lSe,1,0,"ng-container",8),nt(),Xe(9,cSe,1,0,"i",9),nt(),Qe(10,"div",10),Vn(11,"span",11),nt(),Xe(12,YSe,8,17,"div",12),nt()}2&e&&(Fr(n.styleClass),de("ngClass",sf(23,ZSe,n.overlayVisible,"chip"===n.display,n.focus,n.disabled))("ngStyle",n.style),Se(3),de("disabled",n.disabled),vr("label",n.label)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-expanded",n.overlayVisible)("aria-labelledby",n.ariaLabelledBy),Se(2),de("pTooltip",n.tooltip)("tooltipPosition",n.tooltipPosition)("positionStyle",n.tooltipPositionStyle)("tooltipStyleClass",n.tooltipStyleClass),Se(1),de("ngClass",as(28,QSe,n.valuesAsString===(n.defaultLabel||n.placeholder),!(null!=n.valuesAsString&&0!==n.valuesAsString.length||null!=n.placeholder&&0!==n.placeholder.length))),Se(1),de("ngIf",!n.selectedItemsTemplate),Se(1),de("ngTemplateOutlet",n.selectedItemsTemplate)("ngTemplateOutletContext",bi(31,Px,n.value)),Se(1),de("ngIf",null!=n.value&&n.filled&&!n.disabled&&n.showClear),Se(1),de("ngClass",uo(33,JSe)),Se(1),de("ngClass",n.dropdownIcon),Se(1),de("ngIf",n.overlayVisible))},dependencies:[io,$c,ho,el,Ro,za,rv,Du,EA,nEe],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}\n"],encapsulation:2,data:{animation:[ly("overlayAnimation",[Mu(":enter",[tl({opacity:0,transform:"scaleY(0.8)"}),Ac("{{showTransitionParams}}")]),Mu(":leave",[Ac("{{hideTransitionParams}}",tl({opacity:0}))])])]},changeDetection:0}),i})(),rEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa,sv,Xc,ov,xa,ov]}),i})();function sEe(i,t){if(1&i){const e=yi();Qe(0,"span",3),mn("click",function(r){return Ot(e),Nt(Ce().clear(r))})("keydown.enter",function(r){return Ot(e),Nt(Ce().clear(r))}),nt()}if(2&i){const e=Ce();de("ngClass",e.iconCancelClass)("ngStyle",e.iconCancelStyle),vr("tabindex",e.disabled||e.readonly?null:"0")}}function oEe(i,t){if(1&i){const e=yi();Qe(0,"span",4),mn("click",function(r){const o=Ot(e).index;return Nt(Ce().rate(r,o))})("keydown.enter",function(r){const o=Ot(e).index;return Nt(Ce().rate(r,o))}),nt()}if(2&i){const e=t.index,n=Ce();de("ngClass",!n.value||e>=n.value?n.iconOffClass:n.iconOnClass)("ngStyle",!n.value||e>=n.value?n.iconOffStyle:n.iconOnStyle),vr("tabindex",n.disabled||n.readonly?null:"0")}}const aEe=function(i,t){return{"p-readonly":i,"p-disabled":t}},lEe={provide:wc,useExisting:hs(()=>cEe),multi:!0};let cEe=(()=>{class i{constructor(e){this.cd=e,this.stars=5,this.cancel=!0,this.iconOnClass="pi pi-star-fill",this.iconOffClass="pi pi-star",this.iconCancelClass="pi pi-ban",this.onRate=new Bn,this.onCancel=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.starsArray=[];for(let e=0;e<this.stars;e++)this.starsArray[e]=e}rate(e,n){!this.readonly&&!this.disabled&&(this.value=n+1,this.onModelChange(this.value),this.onModelTouched(),this.onRate.emit({originalEvent:e,value:n+1})),e.preventDefault()}clear(e){!this.readonly&&!this.disabled&&(this.value=null,this.onModelChange(this.value),this.onModelTouched(),this.onCancel.emit(e)),e.preventDefault()}writeValue(e){this.value=e,this.cd.detectChanges()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo))},i.\u0275cmp=_r({type:i,selectors:[["p-rating"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",readonly:"readonly",stars:"stars",cancel:"cancel",iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle"},outputs:{onRate:"onRate",onCancel:"onCancel"},features:[Ao([lEe])],decls:3,vars:6,consts:[[1,"p-rating",3,"ngClass"],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter"],[1,"p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter"]],template:function(e,n){1&e&&(Qe(0,"div",0),Xe(1,sEe,1,3,"span",1),Xe(2,oEe,1,3,"span",2),nt()),2&e&&(de("ngClass",as(3,aEe,n.readonly,n.disabled)),Se(1),de("ngIf",n.cancel),Se(1),de("ngForOf",n.starsArray))},dependencies:[io,$c,ho,Ro],styles:[".p-rating-icon{cursor:pointer}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}\n"],encapsulation:2,changeDetection:0}),i})(),uEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();const hEe=["rb"],dEe=function(i,t,e){return{"p-radiobutton-label":!0,"p-radiobutton-label-active":i,"p-disabled":t,"p-radiobutton-label-focus":e}};function fEe(i,t){if(1&i){const e=yi();Qe(0,"label",4),mn("click",function(r){return Ot(e),Nt(Ce().select(r))}),ci(1),nt()}if(2&i){const e=Ce(),n=ao(3);Fr(e.labelStyleClass),de("ngClass",Su(5,dEe,n.checked,e.disabled,e.focused)),vr("for",e.inputId),Se(1),is(e.label)}}const pEe=function(i,t,e){return{"p-radiobutton p-component":!0,"p-radiobutton-checked":i,"p-radiobutton-disabled":t,"p-radiobutton-focused":e}},gEe=function(i,t,e){return{"p-radiobutton-box":!0,"p-highlight":i,"p-disabled":t,"p-focus":e}},mEe={provide:wc,useExisting:hs(()=>yEe),multi:!0};let vEe=(()=>{class i{constructor(){this.accessors=[]}add(e,n){this.accessors.push([e,n])}remove(e){this.accessors=this.accessors.filter(n=>n[1]!==e)}select(e){this.accessors.forEach(n=>{this.isSameGroup(n,e)&&n[1]!==e&&n[1].writeValue(e.value)})}isSameGroup(e,n){return!!e[0].control&&e[0].control.root===n.control.control.root&&e[1].name===n.name}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Zi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),yEe=(()=>{class i{constructor(e,n,r){this.cd=e,this.injector=n,this.registry=r,this.onClick=new Bn,this.onFocus=new Bn,this.onBlur=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.control=this.injector.get(iv),this.checkName(),this.registry.add(this.control,this)}handleClick(e,n,r){e.preventDefault(),!this.disabled&&(this.select(e),r&&n.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit(e))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error('\n          If you define both a name and a formControlName attribute on your radio button, their values\n          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>\n        ')}}return i.\u0275fac=function(e){return new(e||i)(Xt(xo),Xt(Iu),Xt(vEe))},i.\u0275cmp=_r({type:i,selectors:[["p-radioButton"]],viewQuery:function(e,n){if(1&e&&Tr(hEe,5),2&e){let r;Wi(r=ji())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[Ao([mEe])],decls:7,vars:23,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio",3,"checked","disabled","change","focus","blur"],["rb",""],[3,"ngClass","click"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"]],template:function(e,n){if(1&e){const r=yi();Qe(0,"div",0)(1,"div",1)(2,"input",2,3),mn("change",function(o){return n.onChange(o)})("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)}),nt()(),Qe(4,"div",4),mn("click",function(o){Ot(r);const l=ao(3);return Nt(n.handleClick(o,l,!0))}),Vn(5,"span",5),nt()(),Xe(6,fEe,2,9,"label",6)}2&e&&(Fr(n.styleClass),de("ngStyle",n.style)("ngClass",Su(15,pEe,n.checked,n.disabled,n.focused)),Se(2),de("checked",n.checked)("disabled",n.disabled),vr("id",n.inputId)("name",n.name)("value",n.value)("tabindex",n.tabindex)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy),Se(2),de("ngClass",Su(19,gEe,n.checked,n.disabled,n.focused)),Se(2),de("ngIf",n.label))},dependencies:[io,ho,Ro],encapsulation:2,changeDetection:0}),i})(),_Ee=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();dC([tl({transform:"{{transform}}",opacity:0}),Ac("{{transition}}",tl({transform:"none",opacity:1}))]),dC([Ac("{{transition}}",tl({transform:"{{transform}}",opacity:0}))]);let FEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,av,Xc,av,xa]}),i})(),NEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})(),HEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,Xc,xa,xa]}),i})();const GEe=fA([],dA(pA,(i,{graphs:t})=>t)),WEe=fA({id:"default",label:"default",style:"default",rules:"default",nodes:[],edges:[]},dA(E1,(i,{graph:t})=>t)),jEe=["headerchkbox"],$Ee=["filter"];function qEe(i,t){1&i&&Ni(0)}function XEe(i,t){if(1&i&&(Qe(0,"div",7),su(1),Xe(2,qEe,1,0,"ng-container",8),nt()),2&i){const e=Ce();Se(2),de("ngTemplateOutlet",e.headerTemplate)}}const U6=function(i){return{"p-checkbox-disabled":i}},YEe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}},H6=function(i){return{"pi pi-check":i}};function KEe(i,t){if(1&i){const e=yi();Qe(0,"div",12)(1,"div",13)(2,"input",14),mn("focus",function(){return Ot(e),Nt(Ce(2).onHeaderCheckboxFocus())})("blur",function(){return Ot(e),Nt(Ce(2).onHeaderCheckboxBlur())})("keydown.space",function(r){return Ot(e),Nt(Ce(2).toggleAll(r))}),nt()(),Qe(3,"div",15,16),mn("click",function(r){return Ot(e),Nt(Ce(2).toggleAll(r))}),Vn(5,"span",17),nt()()}if(2&i){const e=Ce(2);de("ngClass",bi(5,U6,e.disabled||e.toggleAllDisabled)),Se(2),de("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),Se(1),de("ngClass",Su(7,YEe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),Se(2),de("ngClass",bi(11,H6,e.allChecked))}}function ZEe(i,t){1&i&&Ni(0)}const QEe=function(i){return{options:i}};function JEe(i,t){if(1&i&&(Ur(0),Xe(1,ZEe,1,0,"ng-container",18),Hr()),2&i){const e=Ce(2);Se(1),de("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",bi(2,QEe,e.filterOptions))}}function eTe(i,t){if(1&i){const e=yi();Qe(0,"div",20)(1,"input",21,22),mn("input",function(r){return Ot(e),Nt(Ce(3).onFilter(r))}),nt(),Vn(3,"span",23),nt()}if(2&i){const e=Ce(3);Se(1),de("value",e.filterValue||"")("disabled",e.disabled),vr("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function tTe(i,t){1&i&&Xe(0,eTe,4,4,"div",19),2&i&&de("ngIf",Ce(2).filter)}function nTe(i,t){if(1&i&&(Qe(0,"div",7),Xe(1,KEe,6,13,"div",9),Xe(2,JEe,2,4,"ng-container",10),Xe(3,tTe,1,1,"ng-template",null,11,sc),nt()),2&i){const e=ao(4),n=Ce();Se(1),de("ngIf",n.checkbox&&n.multiple&&n.showToggleAll),Se(1),de("ngIf",n.filterTemplate)("ngIfElse",e)}}function iTe(i,t){if(1&i&&(Qe(0,"span"),ci(1),nt()),2&i){const e=Ce().$implicit,n=Ce(2);Se(1),is(n.getOptionGroupLabel(e)||"empty")}}function rTe(i,t){1&i&&Ni(0)}function sTe(i,t){1&i&&Ni(0)}const WP=function(i){return{$implicit:i}};function oTe(i,t){if(1&i&&(Qe(0,"li",25),Xe(1,iTe,2,1,"span",3),Xe(2,rTe,1,0,"ng-container",18),nt(),Xe(3,sTe,1,0,"ng-container",18)),2&i){const e=t.$implicit,n=Ce(2),r=ao(8);Se(1),de("ngIf",!n.groupTemplate),Se(1),de("ngTemplateOutlet",n.groupTemplate)("ngTemplateOutletContext",bi(5,WP,e)),Se(1),de("ngTemplateOutlet",r)("ngTemplateOutletContext",bi(7,WP,n.getOptionGroupChildren(e)))}}function aTe(i,t){if(1&i&&(Ur(0),Xe(1,oTe,4,9,"ng-template",24),Hr()),2&i){const e=Ce();Se(1),de("ngForOf",e.optionsToRender)}}function lTe(i,t){1&i&&Ni(0)}function cTe(i,t){if(1&i&&(Ur(0),Xe(1,lTe,1,0,"ng-container",18),Hr()),2&i){const e=Ce(),n=ao(8);Se(1),de("ngTemplateOutlet",n)("ngTemplateOutletContext",bi(2,WP,e.optionsToRender))}}const uTe=function(i){return{"p-highlight":i}};function hTe(i,t){if(1&i&&(Qe(0,"div",12)(1,"div",28),Vn(2,"span",17),nt()()),2&i){const e=Ce().$implicit,n=Ce(2);de("ngClass",bi(3,U6,n.disabled||n.isOptionDisabled(e))),Se(1),de("ngClass",bi(5,uTe,n.isSelected(e))),Se(1),de("ngClass",bi(7,H6,n.isSelected(e)))}}function dTe(i,t){if(1&i&&(Qe(0,"span"),ci(1),nt()),2&i){const e=Ce().$implicit,n=Ce(2);Se(1),is(n.getOptionLabel(e))}}function fTe(i,t){1&i&&Ni(0)}const pTe=function(i,t){return{"p-listbox-item":!0,"p-highlight":i,"p-disabled":t}},gTe=function(i,t){return{$implicit:i,index:t}};function mTe(i,t){if(1&i){const e=yi();Qe(0,"li",27),mn("click",function(r){const o=Ot(e).$implicit;return Nt(Ce(2).onOptionClick(r,o))})("dblclick",function(r){const o=Ot(e).$implicit;return Nt(Ce(2).onOptionDoubleClick(r,o))})("touchend",function(){const s=Ot(e).$implicit;return Nt(Ce(2).onOptionTouchEnd(s))})("keydown",function(r){const o=Ot(e).$implicit;return Nt(Ce(2).onOptionKeyDown(r,o))}),Xe(1,hTe,3,9,"div",9),Xe(2,dTe,2,1,"span",3),Xe(3,fTe,1,0,"ng-container",18),nt()}if(2&i){const e=t.$implicit,n=t.index,r=Ce(2);de("ngClass",as(8,pTe,r.isSelected(e),r.isOptionDisabled(e))),vr("tabindex",r.disabled||r.isOptionDisabled(e)?null:"0")("aria-label",r.getOptionLabel(e))("aria-selected",r.isSelected(e)),Se(1),de("ngIf",r.checkbox&&r.multiple),Se(1),de("ngIf",!r.itemTemplate),Se(1),de("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",as(11,gTe,e,n))}}function vTe(i,t){1&i&&Xe(0,mTe,4,14,"li",26),2&i&&de("ngForOf",t.$implicit)}function yTe(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(2);Se(1),_c(" ",e.emptyFilterMessageLabel," ")}}function _Te(i,t){1&i&&Ni(0,null,30)}function bTe(i,t){if(1&i&&(Qe(0,"li",29),Xe(1,yTe,2,1,"ng-container",10),Xe(2,_Te,2,0,"ng-container",8),nt()),2&i){const e=Ce();Se(1),de("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),Se(1),de("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function CTe(i,t){if(1&i&&(Ur(0),ci(1),Hr()),2&i){const e=Ce(2);Se(1),_c(" ",e.emptyMessageLabel," ")}}function wTe(i,t){1&i&&Ni(0,null,31)}function ATe(i,t){if(1&i&&(Qe(0,"li",29),Xe(1,CTe,2,1,"ng-container",10),Xe(2,wTe,2,0,"ng-container",8),nt()),2&i){const e=Ce();Se(1),de("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),Se(1),de("ngTemplateOutlet",e.emptyTemplate)}}function xTe(i,t){1&i&&Ni(0)}function ITe(i,t){if(1&i&&(Qe(0,"div",32),su(1,1),Xe(2,xTe,1,0,"ng-container",8),nt()),2&i){const e=Ce();Se(2),de("ngTemplateOutlet",e.footerTemplate)}}const STe=[[["p-header"]],[["p-footer"]]],ETe=function(i){return{"p-listbox p-component":!0,"p-disabled":i}},TTe=["p-header","p-footer"],MTe={provide:wc,useExisting:hs(()=>DTe),multi:!0};let DTe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.cd=n,this.filterService=r,this.config=s,this.checkbox=!1,this.filter=!1,this.filterMatchMode="contains",this.metaKeySelection=!0,this.showToggleAll=!0,this.optionGroupChildren="items",this.onChange=new Bn,this.onClick=new Bn,this.onDblClick=new Bn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get options(){return this._options}set options(e){this._options=e,this.hasFilter()&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()}),this.filterBy&&(this.filterOptions={filter:e=>this.onFilter(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template}})}getOptionLabel(e){return this.optionLabel?Ji.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Ji.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?Ji.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Ji.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Ji.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||(this.multiple?this.checkbox?this.onOptionClickCheckbox(e,n):this.onOptionClickMultiple(e,n):this.onOptionClickSingle(e,n),this.onClick.emit({originalEvent:e,option:n,value:this.value}),this.optionTouched=!1)}onOptionTouchEnd(e){this.disabled||this.isOptionDisabled(e)||this.readonly||(this.optionTouched=!0)}onOptionDoubleClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||this.onDblClick.emit({originalEvent:e,option:n,value:this.value})}onOptionClickSingle(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?l&&(this.value=null,s=!0):(this.value=this.getOptionValue(n),s=!0)}else this.value=r?null:this.getOptionValue(n),s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickMultiple(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?(l?this.removeOption(n):this.value=[this.getOptionValue(n)],s=!0):(this.value=l&&this.value||[],this.value=[...this.value,this.getOptionValue(n)],s=!0)}else r?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickCheckbox(e,n){this.disabled||this.readonly||(this.isSelected(n)?this.removeOption(n):(this.value=this.value?this.value:[],this.value=[...this.value,this.getOptionValue(n)]),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}removeOption(e){this.value=this.value.filter(n=>!Ji.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(Ji.equals(s,r,this.dataKey)){n=!0;break}}else n=Ji.equals(this.value,r,this.dataKey);return n}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(qc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(qc.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilter(e){this._filterValue=e.target.value,this.activateFilter()}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let e=(this.filterBy||this.optionLabel||"label").split(","),n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this._options.filter(e=>this.filterService.filters[this.filterMatchMode](this.getOptionLabel(e),this._filterValue,this.filterLocale));else this._filteredOptions=null}resetFilter(){this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}onOptionKeyDown(e,n){if(this.readonly)return;let r=e.currentTarget;switch(e.which){case 40:var s=this.findNextItem(r);s&&s.focus(),e.preventDefault();break;case 38:var o=this.findPrevItem(r);o&&o.focus(),e.preventDefault();break;case 13:this.onOptionClick(e,n),e.preventDefault()}}findNextItem(e){let n=e.nextElementSibling;return n?Bt.hasClass(n,"p-disabled")||Bt.isHidden(n)||Bt.hasClass(n,"p-listbox-item-group")?this.findNextItem(n):n:null}findPrevItem(e){let n=e.previousElementSibling;return n?Bt.hasClass(n,"p-disabled")||Bt.isHidden(n)||Bt.hasClass(n,"p-listbox-item-group")?this.findPrevItem(n):n:null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xt(Zn),Xt(xo),Xt(oA),Xt(Dp))},i.\u0275cmp=_r({type:i,selectors:[["p-listbox"]],contentQueries:function(e,n,r){if(1&e&&(Ba(r,XD,5),Ba(r,A1,5),Ba(r,za,4)),2&e){let s;Wi(s=ji())&&(n.headerFacet=s.first),Wi(s=ji())&&(n.footerFacet=s.first),Wi(s=ji())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(Tr(jEe,5),Tr($Ee,5)),2&e){let r;Wi(r=ji())&&(n.headerCheckboxViewChild=r.first),Wi(r=ji())&&(n.filterViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",listStyle:"listStyle",listStyleClass:"listStyleClass",readonly:"readonly",disabled:"disabled",checkbox:"checkbox",filter:"filter",filterBy:"filterBy",filterMatchMode:"filterMatchMode",filterLocale:"filterLocale",metaKeySelection:"metaKeySelection",dataKey:"dataKey",showToggleAll:"showToggleAll",optionLabel:"optionLabel",optionValue:"optionValue",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",optionDisabled:"optionDisabled",ariaFilterLabel:"ariaFilterLabel",filterPlaceHolder:"filterPlaceHolder",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",group:"group",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onClick:"onClick",onDblClick:"onDblClick"},features:[Ao([MTe])],ngContentSelectors:TTe,decls:12,vars:17,consts:[[3,"ngClass","ngStyle"],["class","p-listbox-header",4,"ngIf"],["role","listbox","aria-multiselectable","multiple",1,"p-listbox-list"],[4,"ngIf"],["itemslist",""],["class","p-listbox-empty-message",4,"ngIf"],["class","p-listbox-footer",4,"ngIf"],[1,"p-listbox-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-hidden-accessible"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],[1,"p-checkbox-box",3,"ngClass","click"],["headerchkbox",""],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-listbox-filter-container",4,"ngIf"],[1,"p-listbox-filter-container"],["type","text",1,"p-listbox-filter","p-inputtext","p-component",3,"value","disabled","input"],["filter",""],[1,"p-listbox-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-listbox-item-group"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown",4,"ngFor","ngForOf"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-listbox-empty-message"],["emptyFilter",""],["empty",""],[1,"p-listbox-footer"]],template:function(e,n){1&e&&(Bf(STe),Qe(0,"div",0),Xe(1,XEe,3,1,"div",1),Xe(2,nTe,5,3,"div",1),Qe(3,"div",0)(4,"ul",2),Xe(5,aTe,2,1,"ng-container",3),Xe(6,cTe,2,4,"ng-container",3),Xe(7,vTe,1,1,"ng-template",null,4,sc),Xe(9,bTe,3,3,"li",5),Xe(10,ATe,3,3,"li",5),nt()(),Xe(11,ITe,3,1,"div",6),nt()),2&e&&(Fr(n.styleClass),de("ngClass",bi(15,ETe,n.disabled))("ngStyle",n.style),Se(1),de("ngIf",n.headerFacet||n.headerTemplate),Se(1),de("ngIf",n.checkbox&&n.multiple&&n.showToggleAll||n.filter),Se(1),Fr(n.listStyleClass),de("ngClass","p-listbox-list-wrapper")("ngStyle",n.listStyle),Se(2),de("ngIf",n.group),Se(1),de("ngIf",!n.group),Se(3),de("ngIf",n.hasFilter()&&n.isEmpty()),Se(1),de("ngIf",!n.hasFilter()&&n.isEmpty()),Se(1),de("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[io,$c,ho,el,Ro,Du],styles:[".p-listbox-list-wrapper{overflow:auto}.p-listbox-list{list-style-type:none;margin:0;padding:0}.p-listbox-item{cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.p-listbox-header{display:flex;align-items:center}.p-listbox-filter-container{position:relative;flex:1 1 auto}.p-listbox-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-listbox-filter{width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),LTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa,Xc,xa]}),i})();dC([tl({transform:"{{transform}}",opacity:0}),Ac("{{transition}}")]),dC([Ac("{{transition}}",tl({transform:"{{transform}}",opacity:0}))]);let NTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,Xc]}),i})(),HTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa]}),i})(),WTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs,xa]}),i})(),qTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i}),i.\u0275inj=Sr({imports:[Fs]}),i})();const YTe=fA({id:"default",grid:!1,applyRules:!1,debug:!1,info:!1,full:!0,maxHeight:16384,maxWidth:16384},dA(oC("[SysPreference] Retrieve Preferences Success",{_as:"props",_p:void 0}),(i,{Preferences:t})=>t)),KTe=fA([],dA(RA,(i,{styles:t})=>t)),ZTe=fA({id:"default",tags:[]},dA(C4,(i,{style:t})=>t));let QTe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Or({type:i,bootstrap:[Mxe]}),i.\u0275inj=Sr({providers:[sA,fm],imports:[a3,MQ.forRoot(),YAe,T1e,w3,Fs,hQ.forRoot({level:oc.DEBUG}),zre,l4,$1e,fse,rEe,xae,j1,av,g4,U2,q2,w3,uoe,moe,uEe,_Ee,q1,FEe,Sae,zme,Lae,Exe,W1,NEe,Qae,HEe,Aoe,ace,wue,g4,LTe,NTe,HTe,WTe,Rue,qTe,zue,sve,Nge,sv,Hge,Wge,GZ.forRoot({graphs:GEe,graph:WEe,styles:KTe,style:ZTe,preferences:YTe})]}),i})();(function W7(){if(lN)throw new Error("Cannot enable prod mode after platform setup.");aN=!1})(),Jq().bootstrapModule(QTe).catch(i=>console.error(i))},3333:He=>{He.exports=function(z,X){var M=X.length;if(0!==M){var U=z.length;z.length+=M;for(var O=0;O<M;O++)z[U+O]=X[O]}}},5343:(He,be)=>{"use strict";be.byteLength=function R(Y){var G=L(Y),ye=G[1];return 3*(G[0]+ye)/4-ye},be.toByteArray=function J(Y){var G,$,oe=L(Y),ye=oe[0],Ie=oe[1],ne=new M(function j(Y,G,oe){return 3*(G+oe)/4-oe}(0,ye,Ie)),ae=0,N=Ie>0?ye-4:ye;for($=0;$<N;$+=4)G=X[Y.charCodeAt($)]<<18|X[Y.charCodeAt($+1)]<<12|X[Y.charCodeAt($+2)]<<6|X[Y.charCodeAt($+3)],ne[ae++]=G>>16&255,ne[ae++]=G>>8&255,ne[ae++]=255&G;return 2===Ie&&(G=X[Y.charCodeAt($)]<<2|X[Y.charCodeAt($+1)]>>4,ne[ae++]=255&G),1===Ie&&(G=X[Y.charCodeAt($)]<<10|X[Y.charCodeAt($+1)]<<4|X[Y.charCodeAt($+2)]>>2,ne[ae++]=G>>8&255,ne[ae++]=255&G),ne},be.fromByteArray=function ie(Y){for(var G,oe=Y.length,ye=oe%3,Ie=[],ae=0,N=oe-ye;ae<N;ae+=16383)Ie.push(te(Y,ae,ae+16383>N?N:ae+16383));return 1===ye?Ie.push(z[(G=Y[oe-1])>>2]+z[G<<4&63]+"=="):2===ye&&Ie.push(z[(G=(Y[oe-2]<<8)+Y[oe-1])>>10]+z[G>>4&63]+z[G<<2&63]+"="),Ie.join("")};for(var z=[],X=[],M=typeof Uint8Array<"u"?Uint8Array:Array,U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O=0,V=U.length;O<V;++O)z[O]=U[O],X[U.charCodeAt(O)]=O;function L(Y){var G=Y.length;if(G%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var oe=Y.indexOf("=");return-1===oe&&(oe=G),[oe,oe===G?0:4-oe%4]}function Z(Y){return z[Y>>18&63]+z[Y>>12&63]+z[Y>>6&63]+z[63&Y]}function te(Y,G,oe){for(var Ie=[],ne=G;ne<oe;ne+=3)Ie.push(Z((Y[ne]<<16&16711680)+(Y[ne+1]<<8&65280)+(255&Y[ne+2])));return Ie.join("")}X["-".charCodeAt(0)]=62,X["_".charCodeAt(0)]=63},3172:(He,be,z)=>{"use strict";var X=z(5343),M=z(8461),U="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;be.Buffer=R,be.SlowBuffer=function ne(Ye){return+Ye!=Ye&&(Ye=0),R.alloc(+Ye)},be.INSPECT_MAX_BYTES=50;var O=2147483647;function L(Ye){if(Ye>O)throw new RangeError('The value "'+Ye+'" is invalid for option "size"');var De=new Uint8Array(Ye);return Object.setPrototypeOf(De,R.prototype),De}function R(Ye,De,ze){if("number"==typeof Ye){if("string"==typeof De)throw new TypeError('The "string" argument must be of type string. Received type number');return te(Ye)}return j(Ye,De,ze)}function j(Ye,De,ze){if("string"==typeof Ye)return function ie(Ye,De){if(("string"!=typeof De||""===De)&&(De="utf8"),!R.isEncoding(De))throw new TypeError("Unknown encoding: "+De);var ze=0|ae(Ye,De),xt=L(ze),un=xt.write(Ye,De);return un!==ze&&(xt=xt.slice(0,un)),xt}(Ye,De);if(ArrayBuffer.isView(Ye))return function G(Ye){if(Dt(Ye,Uint8Array)){var De=new Uint8Array(Ye);return oe(De.buffer,De.byteOffset,De.byteLength)}return Y(Ye)}(Ye);if(null==Ye)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ye);if(Dt(Ye,ArrayBuffer)||Ye&&Dt(Ye.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Dt(Ye,SharedArrayBuffer)||Ye&&Dt(Ye.buffer,SharedArrayBuffer)))return oe(Ye,De,ze);if("number"==typeof Ye)throw new TypeError('The "value" argument must not be of type number. Received type number');var xt=Ye.valueOf&&Ye.valueOf();if(null!=xt&&xt!==Ye)return R.from(xt,De,ze);var un=function ye(Ye){if(R.isBuffer(Ye)){var De=0|Ie(Ye.length),ze=L(De);return 0===ze.length||Ye.copy(ze,0,0,De),ze}return void 0!==Ye.length?"number"!=typeof Ye.length||kt(Ye.length)?L(0):Y(Ye):"Buffer"===Ye.type&&Array.isArray(Ye.data)?Y(Ye.data):void 0}(Ye);if(un)return un;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Ye[Symbol.toPrimitive])return R.from(Ye[Symbol.toPrimitive]("string"),De,ze);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ye)}function J(Ye){if("number"!=typeof Ye)throw new TypeError('"size" argument must be of type number');if(Ye<0)throw new RangeError('The value "'+Ye+'" is invalid for option "size"')}function te(Ye){return J(Ye),L(Ye<0?0:0|Ie(Ye))}function Y(Ye){for(var De=Ye.length<0?0:0|Ie(Ye.length),ze=L(De),xt=0;xt<De;xt+=1)ze[xt]=255&Ye[xt];return ze}function oe(Ye,De,ze){if(De<0||Ye.byteLength<De)throw new RangeError('"offset" is outside of buffer bounds');if(Ye.byteLength<De+(ze||0))throw new RangeError('"length" is outside of buffer bounds');var xt;return xt=void 0===De&&void 0===ze?new Uint8Array(Ye):void 0===ze?new Uint8Array(Ye,De):new Uint8Array(Ye,De,ze),Object.setPrototypeOf(xt,R.prototype),xt}function Ie(Ye){if(Ye>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return 0|Ye}function ae(Ye,De){if(R.isBuffer(Ye))return Ye.length;if(ArrayBuffer.isView(Ye)||Dt(Ye,ArrayBuffer))return Ye.byteLength;if("string"!=typeof Ye)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ye);var ze=Ye.length,xt=arguments.length>2&&!0===arguments[2];if(!xt&&0===ze)return 0;for(var un=!1;;)switch(De){case"ascii":case"latin1":case"binary":return ze;case"utf8":case"utf-8":return ce(Ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ze;case"hex":return ze>>>1;case"base64":return Tn(Ye).length;default:if(un)return xt?-1:ce(Ye).length;De=(""+De).toLowerCase(),un=!0}}function N(Ye,De,ze){var xt=!1;if((void 0===De||De<0)&&(De=0),De>this.length||((void 0===ze||ze>this.length)&&(ze=this.length),ze<=0)||(ze>>>=0)<=(De>>>=0))return"";for(Ye||(Ye="utf8");;)switch(Ye){case"hex":return Be(this,De,ze);case"utf8":case"utf-8":return ke(this,De,ze);case"ascii":return yt(this,De,ze);case"latin1":case"binary":return hn(this,De,ze);case"base64":return Je(this,De,ze);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lt(this,De,ze);default:if(xt)throw new TypeError("Unknown encoding: "+Ye);Ye=(Ye+"").toLowerCase(),xt=!0}}function $(Ye,De,ze){var xt=Ye[De];Ye[De]=Ye[ze],Ye[ze]=xt}function re(Ye,De,ze,xt,un){if(0===Ye.length)return-1;if("string"==typeof ze?(xt=ze,ze=0):ze>2147483647?ze=2147483647:ze<-2147483648&&(ze=-2147483648),kt(ze=+ze)&&(ze=un?0:Ye.length-1),ze<0&&(ze=Ye.length+ze),ze>=Ye.length){if(un)return-1;ze=Ye.length-1}else if(ze<0){if(!un)return-1;ze=0}if("string"==typeof De&&(De=R.from(De,xt)),R.isBuffer(De))return 0===De.length?-1:pe(Ye,De,ze,xt,un);if("number"==typeof De)return De&=255,"function"==typeof Uint8Array.prototype.indexOf?un?Uint8Array.prototype.indexOf.call(Ye,De,ze):Uint8Array.prototype.lastIndexOf.call(Ye,De,ze):pe(Ye,[De],ze,xt,un);throw new TypeError("val must be string, number or Buffer")}function pe(Ye,De,ze,xt,un){var kr,_n=1,Jn=Ye.length,Dr=De.length;if(void 0!==xt&&("ucs2"===(xt=String(xt).toLowerCase())||"ucs-2"===xt||"utf16le"===xt||"utf-16le"===xt)){if(Ye.length<2||De.length<2)return-1;_n=2,Jn/=2,Dr/=2,ze/=2}function ps($l,ql){return 1===_n?$l[ql]:$l.readUInt16BE(ql*_n)}if(un){var Wo=-1;for(kr=ze;kr<Jn;kr++)if(ps(Ye,kr)===ps(De,-1===Wo?0:kr-Wo)){if(-1===Wo&&(Wo=kr),kr-Wo+1===Dr)return Wo*_n}else-1!==Wo&&(kr-=kr-Wo),Wo=-1}else for(ze+Dr>Jn&&(ze=Jn-Dr),kr=ze;kr>=0;kr--){for(var tr=!0,il=0;il<Dr;il++)if(ps(Ye,kr+il)!==ps(De,il)){tr=!1;break}if(tr)return kr}return-1}function Ne(Ye,De,ze,xt){ze=Number(ze)||0;var un=Ye.length-ze;xt?(xt=Number(xt))>un&&(xt=un):xt=un;var _n=De.length;xt>_n/2&&(xt=_n/2);for(var Jn=0;Jn<xt;++Jn){var Dr=parseInt(De.substr(2*Jn,2),16);if(kt(Dr))return Jn;Ye[ze+Jn]=Dr}return Jn}function Ee(Ye,De,ze,xt){return $n(ce(De,Ye.length-ze),Ye,ze,xt)}function xe(Ye,De,ze,xt){return $n(function At(Ye){for(var De=[],ze=0;ze<Ye.length;++ze)De.push(255&Ye.charCodeAt(ze));return De}(De),Ye,ze,xt)}function ue(Ye,De,ze,xt){return $n(Tn(De),Ye,ze,xt)}function Re(Ye,De,ze,xt){return $n(function Ft(Ye,De){for(var ze,xt,_n=[],Jn=0;Jn<Ye.length&&!((De-=2)<0);++Jn)xt=(ze=Ye.charCodeAt(Jn))>>8,_n.push(ze%256),_n.push(xt);return _n}(De,Ye.length-ze),Ye,ze,xt)}function Je(Ye,De,ze){return X.fromByteArray(0===De&&ze===Ye.length?Ye:Ye.slice(De,ze))}function ke(Ye,De,ze){ze=Math.min(Ye.length,ze);for(var xt=[],un=De;un<ze;){var ps,kr,Wo,tr,_n=Ye[un],Jn=null,Dr=_n>239?4:_n>223?3:_n>191?2:1;if(un+Dr<=ze)switch(Dr){case 1:_n<128&&(Jn=_n);break;case 2:128==(192&(ps=Ye[un+1]))&&(tr=(31&_n)<<6|63&ps)>127&&(Jn=tr);break;case 3:kr=Ye[un+2],128==(192&(ps=Ye[un+1]))&&128==(192&kr)&&(tr=(15&_n)<<12|(63&ps)<<6|63&kr)>2047&&(tr<55296||tr>57343)&&(Jn=tr);break;case 4:kr=Ye[un+2],Wo=Ye[un+3],128==(192&(ps=Ye[un+1]))&&128==(192&kr)&&128==(192&Wo)&&(tr=(15&_n)<<18|(63&ps)<<12|(63&kr)<<6|63&Wo)>65535&&tr<1114112&&(Jn=tr)}null===Jn?(Jn=65533,Dr=1):Jn>65535&&(xt.push((Jn-=65536)>>>10&1023|55296),Jn=56320|1023&Jn),xt.push(Jn),un+=Dr}return function ot(Ye){var De=Ye.length;if(De<=4096)return String.fromCharCode.apply(String,Ye);for(var ze="",xt=0;xt<De;)ze+=String.fromCharCode.apply(String,Ye.slice(xt,xt+=4096));return ze}(xt)}function yt(Ye,De,ze){var xt="";ze=Math.min(Ye.length,ze);for(var un=De;un<ze;++un)xt+=String.fromCharCode(127&Ye[un]);return xt}function hn(Ye,De,ze){var xt="";ze=Math.min(Ye.length,ze);for(var un=De;un<ze;++un)xt+=String.fromCharCode(Ye[un]);return xt}function Be(Ye,De,ze){var xt=Ye.length;(!De||De<0)&&(De=0),(!ze||ze<0||ze>xt)&&(ze=xt);for(var un="",_n=De;_n<ze;++_n)un+=ln[Ye[_n]];return un}function lt(Ye,De,ze){for(var xt=Ye.slice(De,ze),un="",_n=0;_n<xt.length-1;_n+=2)un+=String.fromCharCode(xt[_n]+256*xt[_n+1]);return un}function Ve(Ye,De,ze){if(Ye%1!=0||Ye<0)throw new RangeError("offset is not uint");if(Ye+De>ze)throw new RangeError("Trying to access beyond buffer length")}function Ge(Ye,De,ze,xt,un,_n){if(!R.isBuffer(Ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(De>un||De<_n)throw new RangeError('"value" argument is out of bounds');if(ze+xt>Ye.length)throw new RangeError("Index out of range")}function bt(Ye,De,ze,xt,un,_n){if(ze+xt>Ye.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("Index out of range")}function wt(Ye,De,ze,xt,un){return De=+De,ze>>>=0,un||bt(Ye,0,ze,4),M.write(Ye,De,ze,xt,23,4),ze+4}function st(Ye,De,ze,xt,un){return De=+De,ze>>>=0,un||bt(Ye,0,ze,8),M.write(Ye,De,ze,xt,52,8),ze+8}be.kMaxLength=O,!(R.TYPED_ARRAY_SUPPORT=function V(){try{var Ye=new Uint8Array(1),De={foo:function(){return 42}};return Object.setPrototypeOf(De,Uint8Array.prototype),Object.setPrototypeOf(Ye,De),42===Ye.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(R.prototype,"parent",{enumerable:!0,get:function(){if(R.isBuffer(this))return this.buffer}}),Object.defineProperty(R.prototype,"offset",{enumerable:!0,get:function(){if(R.isBuffer(this))return this.byteOffset}}),R.poolSize=8192,R.from=function(Ye,De,ze){return j(Ye,De,ze)},Object.setPrototypeOf(R.prototype,Uint8Array.prototype),Object.setPrototypeOf(R,Uint8Array),R.alloc=function(Ye,De,ze){return function Z(Ye,De,ze){return J(Ye),Ye<=0?L(Ye):void 0!==De?"string"==typeof ze?L(Ye).fill(De,ze):L(Ye).fill(De):L(Ye)}(Ye,De,ze)},R.allocUnsafe=function(Ye){return te(Ye)},R.allocUnsafeSlow=function(Ye){return te(Ye)},R.isBuffer=function(De){return null!=De&&!0===De._isBuffer&&De!==R.prototype},R.compare=function(De,ze){if(Dt(De,Uint8Array)&&(De=R.from(De,De.offset,De.byteLength)),Dt(ze,Uint8Array)&&(ze=R.from(ze,ze.offset,ze.byteLength)),!R.isBuffer(De)||!R.isBuffer(ze))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(De===ze)return 0;for(var xt=De.length,un=ze.length,_n=0,Jn=Math.min(xt,un);_n<Jn;++_n)if(De[_n]!==ze[_n]){xt=De[_n],un=ze[_n];break}return xt<un?-1:un<xt?1:0},R.isEncoding=function(De){switch(String(De).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},R.concat=function(De,ze){if(!Array.isArray(De))throw new TypeError('"list" argument must be an Array of Buffers');if(0===De.length)return R.alloc(0);var xt;if(void 0===ze)for(ze=0,xt=0;xt<De.length;++xt)ze+=De[xt].length;var un=R.allocUnsafe(ze),_n=0;for(xt=0;xt<De.length;++xt){var Jn=De[xt];if(Dt(Jn,Uint8Array))_n+Jn.length>un.length?R.from(Jn).copy(un,_n):Uint8Array.prototype.set.call(un,Jn,_n);else{if(!R.isBuffer(Jn))throw new TypeError('"list" argument must be an Array of Buffers');Jn.copy(un,_n)}_n+=Jn.length}return un},R.byteLength=ae,R.prototype._isBuffer=!0,R.prototype.swap16=function(){var De=this.length;if(De%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ze=0;ze<De;ze+=2)$(this,ze,ze+1);return this},R.prototype.swap32=function(){var De=this.length;if(De%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ze=0;ze<De;ze+=4)$(this,ze,ze+3),$(this,ze+1,ze+2);return this},R.prototype.swap64=function(){var De=this.length;if(De%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ze=0;ze<De;ze+=8)$(this,ze,ze+7),$(this,ze+1,ze+6),$(this,ze+2,ze+5),$(this,ze+3,ze+4);return this},R.prototype.toLocaleString=R.prototype.toString=function(){var De=this.length;return 0===De?"":0===arguments.length?ke(this,0,De):N.apply(this,arguments)},R.prototype.equals=function(De){if(!R.isBuffer(De))throw new TypeError("Argument must be a Buffer");return this===De||0===R.compare(this,De)},R.prototype.inspect=function(){var De="",ze=be.INSPECT_MAX_BYTES;return De=this.toString("hex",0,ze).replace(/(.{2})/g,"$1 ").trim(),this.length>ze&&(De+=" ... "),"<Buffer "+De+">"},U&&(R.prototype[U]=R.prototype.inspect),R.prototype.compare=function(De,ze,xt,un,_n){if(Dt(De,Uint8Array)&&(De=R.from(De,De.offset,De.byteLength)),!R.isBuffer(De))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof De);if(void 0===ze&&(ze=0),void 0===xt&&(xt=De?De.length:0),void 0===un&&(un=0),void 0===_n&&(_n=this.length),ze<0||xt>De.length||un<0||_n>this.length)throw new RangeError("out of range index");if(un>=_n&&ze>=xt)return 0;if(un>=_n)return-1;if(ze>=xt)return 1;if(this===De)return 0;for(var Jn=(_n>>>=0)-(un>>>=0),Dr=(xt>>>=0)-(ze>>>=0),ps=Math.min(Jn,Dr),kr=this.slice(un,_n),Wo=De.slice(ze,xt),tr=0;tr<ps;++tr)if(kr[tr]!==Wo[tr]){Jn=kr[tr],Dr=Wo[tr];break}return Jn<Dr?-1:Dr<Jn?1:0},R.prototype.includes=function(De,ze,xt){return-1!==this.indexOf(De,ze,xt)},R.prototype.indexOf=function(De,ze,xt){return re(this,De,ze,xt,!0)},R.prototype.lastIndexOf=function(De,ze,xt){return re(this,De,ze,xt,!1)},R.prototype.write=function(De,ze,xt,un){if(void 0===ze)un="utf8",xt=this.length,ze=0;else if(void 0===xt&&"string"==typeof ze)un=ze,xt=this.length,ze=0;else{if(!isFinite(ze))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ze>>>=0,isFinite(xt)?(xt>>>=0,void 0===un&&(un="utf8")):(un=xt,xt=void 0)}var _n=this.length-ze;if((void 0===xt||xt>_n)&&(xt=_n),De.length>0&&(xt<0||ze<0)||ze>this.length)throw new RangeError("Attempt to write outside buffer bounds");un||(un="utf8");for(var Jn=!1;;)switch(un){case"hex":return Ne(this,De,ze,xt);case"utf8":case"utf-8":return Ee(this,De,ze,xt);case"ascii":case"latin1":case"binary":return xe(this,De,ze,xt);case"base64":return ue(this,De,ze,xt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,De,ze,xt);default:if(Jn)throw new TypeError("Unknown encoding: "+un);un=(""+un).toLowerCase(),Jn=!0}},R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},R.prototype.slice=function(De,ze){var xt=this.length;(De=~~De)<0?(De+=xt)<0&&(De=0):De>xt&&(De=xt),(ze=void 0===ze?xt:~~ze)<0?(ze+=xt)<0&&(ze=0):ze>xt&&(ze=xt),ze<De&&(ze=De);var un=this.subarray(De,ze);return Object.setPrototypeOf(un,R.prototype),un},R.prototype.readUintLE=R.prototype.readUIntLE=function(De,ze,xt){De>>>=0,ze>>>=0,xt||Ve(De,ze,this.length);for(var un=this[De],_n=1,Jn=0;++Jn<ze&&(_n*=256);)un+=this[De+Jn]*_n;return un},R.prototype.readUintBE=R.prototype.readUIntBE=function(De,ze,xt){De>>>=0,ze>>>=0,xt||Ve(De,ze,this.length);for(var un=this[De+--ze],_n=1;ze>0&&(_n*=256);)un+=this[De+--ze]*_n;return un},R.prototype.readUint8=R.prototype.readUInt8=function(De,ze){return De>>>=0,ze||Ve(De,1,this.length),this[De]},R.prototype.readUint16LE=R.prototype.readUInt16LE=function(De,ze){return De>>>=0,ze||Ve(De,2,this.length),this[De]|this[De+1]<<8},R.prototype.readUint16BE=R.prototype.readUInt16BE=function(De,ze){return De>>>=0,ze||Ve(De,2,this.length),this[De]<<8|this[De+1]},R.prototype.readUint32LE=R.prototype.readUInt32LE=function(De,ze){return De>>>=0,ze||Ve(De,4,this.length),(this[De]|this[De+1]<<8|this[De+2]<<16)+16777216*this[De+3]},R.prototype.readUint32BE=R.prototype.readUInt32BE=function(De,ze){return De>>>=0,ze||Ve(De,4,this.length),16777216*this[De]+(this[De+1]<<16|this[De+2]<<8|this[De+3])},R.prototype.readIntLE=function(De,ze,xt){De>>>=0,ze>>>=0,xt||Ve(De,ze,this.length);for(var un=this[De],_n=1,Jn=0;++Jn<ze&&(_n*=256);)un+=this[De+Jn]*_n;return un>=(_n*=128)&&(un-=Math.pow(2,8*ze)),un},R.prototype.readIntBE=function(De,ze,xt){De>>>=0,ze>>>=0,xt||Ve(De,ze,this.length);for(var un=ze,_n=1,Jn=this[De+--un];un>0&&(_n*=256);)Jn+=this[De+--un]*_n;return Jn>=(_n*=128)&&(Jn-=Math.pow(2,8*ze)),Jn},R.prototype.readInt8=function(De,ze){return De>>>=0,ze||Ve(De,1,this.length),128&this[De]?-1*(255-this[De]+1):this[De]},R.prototype.readInt16LE=function(De,ze){De>>>=0,ze||Ve(De,2,this.length);var xt=this[De]|this[De+1]<<8;return 32768&xt?4294901760|xt:xt},R.prototype.readInt16BE=function(De,ze){De>>>=0,ze||Ve(De,2,this.length);var xt=this[De+1]|this[De]<<8;return 32768&xt?4294901760|xt:xt},R.prototype.readInt32LE=function(De,ze){return De>>>=0,ze||Ve(De,4,this.length),this[De]|this[De+1]<<8|this[De+2]<<16|this[De+3]<<24},R.prototype.readInt32BE=function(De,ze){return De>>>=0,ze||Ve(De,4,this.length),this[De]<<24|this[De+1]<<16|this[De+2]<<8|this[De+3]},R.prototype.readFloatLE=function(De,ze){return De>>>=0,ze||Ve(De,4,this.length),M.read(this,De,!0,23,4)},R.prototype.readFloatBE=function(De,ze){return De>>>=0,ze||Ve(De,4,this.length),M.read(this,De,!1,23,4)},R.prototype.readDoubleLE=function(De,ze){return De>>>=0,ze||Ve(De,8,this.length),M.read(this,De,!0,52,8)},R.prototype.readDoubleBE=function(De,ze){return De>>>=0,ze||Ve(De,8,this.length),M.read(this,De,!1,52,8)},R.prototype.writeUintLE=R.prototype.writeUIntLE=function(De,ze,xt,un){De=+De,ze>>>=0,xt>>>=0,un||Ge(this,De,ze,xt,Math.pow(2,8*xt)-1,0);var Jn=1,Dr=0;for(this[ze]=255&De;++Dr<xt&&(Jn*=256);)this[ze+Dr]=De/Jn&255;return ze+xt},R.prototype.writeUintBE=R.prototype.writeUIntBE=function(De,ze,xt,un){De=+De,ze>>>=0,xt>>>=0,un||Ge(this,De,ze,xt,Math.pow(2,8*xt)-1,0);var Jn=xt-1,Dr=1;for(this[ze+Jn]=255&De;--Jn>=0&&(Dr*=256);)this[ze+Jn]=De/Dr&255;return ze+xt},R.prototype.writeUint8=R.prototype.writeUInt8=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,1,255,0),this[ze]=255&De,ze+1},R.prototype.writeUint16LE=R.prototype.writeUInt16LE=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,2,65535,0),this[ze]=255&De,this[ze+1]=De>>>8,ze+2},R.prototype.writeUint16BE=R.prototype.writeUInt16BE=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,2,65535,0),this[ze]=De>>>8,this[ze+1]=255&De,ze+2},R.prototype.writeUint32LE=R.prototype.writeUInt32LE=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,4,4294967295,0),this[ze+3]=De>>>24,this[ze+2]=De>>>16,this[ze+1]=De>>>8,this[ze]=255&De,ze+4},R.prototype.writeUint32BE=R.prototype.writeUInt32BE=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,4,4294967295,0),this[ze]=De>>>24,this[ze+1]=De>>>16,this[ze+2]=De>>>8,this[ze+3]=255&De,ze+4},R.prototype.writeIntLE=function(De,ze,xt,un){if(De=+De,ze>>>=0,!un){var _n=Math.pow(2,8*xt-1);Ge(this,De,ze,xt,_n-1,-_n)}var Jn=0,Dr=1,ps=0;for(this[ze]=255&De;++Jn<xt&&(Dr*=256);)De<0&&0===ps&&0!==this[ze+Jn-1]&&(ps=1),this[ze+Jn]=(De/Dr>>0)-ps&255;return ze+xt},R.prototype.writeIntBE=function(De,ze,xt,un){if(De=+De,ze>>>=0,!un){var _n=Math.pow(2,8*xt-1);Ge(this,De,ze,xt,_n-1,-_n)}var Jn=xt-1,Dr=1,ps=0;for(this[ze+Jn]=255&De;--Jn>=0&&(Dr*=256);)De<0&&0===ps&&0!==this[ze+Jn+1]&&(ps=1),this[ze+Jn]=(De/Dr>>0)-ps&255;return ze+xt},R.prototype.writeInt8=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,1,127,-128),De<0&&(De=255+De+1),this[ze]=255&De,ze+1},R.prototype.writeInt16LE=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,2,32767,-32768),this[ze]=255&De,this[ze+1]=De>>>8,ze+2},R.prototype.writeInt16BE=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,2,32767,-32768),this[ze]=De>>>8,this[ze+1]=255&De,ze+2},R.prototype.writeInt32LE=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,4,2147483647,-2147483648),this[ze]=255&De,this[ze+1]=De>>>8,this[ze+2]=De>>>16,this[ze+3]=De>>>24,ze+4},R.prototype.writeInt32BE=function(De,ze,xt){return De=+De,ze>>>=0,xt||Ge(this,De,ze,4,2147483647,-2147483648),De<0&&(De=4294967295+De+1),this[ze]=De>>>24,this[ze+1]=De>>>16,this[ze+2]=De>>>8,this[ze+3]=255&De,ze+4},R.prototype.writeFloatLE=function(De,ze,xt){return wt(this,De,ze,!0,xt)},R.prototype.writeFloatBE=function(De,ze,xt){return wt(this,De,ze,!1,xt)},R.prototype.writeDoubleLE=function(De,ze,xt){return st(this,De,ze,!0,xt)},R.prototype.writeDoubleBE=function(De,ze,xt){return st(this,De,ze,!1,xt)},R.prototype.copy=function(De,ze,xt,un){if(!R.isBuffer(De))throw new TypeError("argument should be a Buffer");if(xt||(xt=0),!un&&0!==un&&(un=this.length),ze>=De.length&&(ze=De.length),ze||(ze=0),un>0&&un<xt&&(un=xt),un===xt||0===De.length||0===this.length)return 0;if(ze<0)throw new RangeError("targetStart out of bounds");if(xt<0||xt>=this.length)throw new RangeError("Index out of range");if(un<0)throw new RangeError("sourceEnd out of bounds");un>this.length&&(un=this.length),De.length-ze<un-xt&&(un=De.length-ze+xt);var _n=un-xt;return this===De&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ze,xt,un):Uint8Array.prototype.set.call(De,this.subarray(xt,un),ze),_n},R.prototype.fill=function(De,ze,xt,un){if("string"==typeof De){if("string"==typeof ze?(un=ze,ze=0,xt=this.length):"string"==typeof xt&&(un=xt,xt=this.length),void 0!==un&&"string"!=typeof un)throw new TypeError("encoding must be a string");if("string"==typeof un&&!R.isEncoding(un))throw new TypeError("Unknown encoding: "+un);if(1===De.length){var _n=De.charCodeAt(0);("utf8"===un&&_n<128||"latin1"===un)&&(De=_n)}}else"number"==typeof De?De&=255:"boolean"==typeof De&&(De=Number(De));if(ze<0||this.length<ze||this.length<xt)throw new RangeError("Out of range index");if(xt<=ze)return this;var Jn;if(ze>>>=0,xt=void 0===xt?this.length:xt>>>0,De||(De=0),"number"==typeof De)for(Jn=ze;Jn<xt;++Jn)this[Jn]=De;else{var Dr=R.isBuffer(De)?De:R.from(De,un),ps=Dr.length;if(0===ps)throw new TypeError('The value "'+De+'" is invalid for argument "value"');for(Jn=0;Jn<xt-ze;++Jn)this[Jn+ze]=Dr[Jn%ps]}return this};var gt=/[^+/0-9A-Za-z-_]/g;function ce(Ye,De){De=De||1/0;for(var ze,xt=Ye.length,un=null,_n=[],Jn=0;Jn<xt;++Jn){if((ze=Ye.charCodeAt(Jn))>55295&&ze<57344){if(!un){if(ze>56319){(De-=3)>-1&&_n.push(239,191,189);continue}if(Jn+1===xt){(De-=3)>-1&&_n.push(239,191,189);continue}un=ze;continue}if(ze<56320){(De-=3)>-1&&_n.push(239,191,189),un=ze;continue}ze=65536+(un-55296<<10|ze-56320)}else un&&(De-=3)>-1&&_n.push(239,191,189);if(un=null,ze<128){if((De-=1)<0)break;_n.push(ze)}else if(ze<2048){if((De-=2)<0)break;_n.push(ze>>6|192,63&ze|128)}else if(ze<65536){if((De-=3)<0)break;_n.push(ze>>12|224,ze>>6&63|128,63&ze|128)}else{if(!(ze<1114112))throw new Error("Invalid code point");if((De-=4)<0)break;_n.push(ze>>18|240,ze>>12&63|128,ze>>6&63|128,63&ze|128)}}return _n}function Tn(Ye){return X.toByteArray(function Me(Ye){if((Ye=(Ye=Ye.split("=")[0]).trim().replace(gt,"")).length<2)return"";for(;Ye.length%4!=0;)Ye+="=";return Ye}(Ye))}function $n(Ye,De,ze,xt){for(var un=0;un<xt&&!(un+ze>=De.length||un>=Ye.length);++un)De[un+ze]=Ye[un];return un}function Dt(Ye,De){return Ye instanceof De||null!=Ye&&null!=Ye.constructor&&null!=Ye.constructor.name&&Ye.constructor.name===De.name}function kt(Ye){return Ye!=Ye}var ln=function(){for(var Ye="0123456789abcdef",De=new Array(256),ze=0;ze<16;++ze)for(var xt=16*ze,un=0;un<16;++un)De[xt+un]=Ye[ze]+Ye[un];return De}()},4147:function(He){He.exports=function(be){var z={};function X(M){if(z[M])return z[M].exports;var U=z[M]={i:M,l:!1,exports:{}};return be[M].call(U.exports,U,U.exports,X),U.l=!0,U.exports}return X.m=be,X.c=z,X.i=function(M){return M},X.d=function(M,U,O){X.o(M,U)||Object.defineProperty(M,U,{configurable:!1,enumerable:!0,get:O})},X.n=function(M){var U=M&&M.__esModule?function(){return M.default}:function(){return M};return X.d(U,"a",U),U},X.o=function(M,U){return Object.prototype.hasOwnProperty.call(M,U)},X.p="",X(X.s=3)}([function(be,z,X){"use strict";var M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(lt){return typeof lt}:function(lt){return lt&&"function"==typeof Symbol&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},U=X(2),O=M(""),V=M({}),L=M(function(){}),R=function(Ve){return(typeof Ve>"u"?"undefined":M(Ve))===V},J=function(Ve){return(typeof Ve>"u"?"undefined":M(Ve))===L},Z=function(Ve){return R(Ve)&&J(Ve.collection)},te=X(1),ie=function(Ve){return null!=Ve&&!Ve.removed()},Y=function(Ve,Ge){return(Y=null!=Ve.has?function(wt,st){return wt.has(st)}:function(wt,st){return wt.intersection(st).length>0})(Ve,Ge)},G=function(Ve){if(function(Ve){return(typeof Ve>"u"?"undefined":M(Ve))===O}(Ve))return function(Ge){return Ge.is(Ve)};if(J(Ve))return Ve;if(Z(Ve))return function(Ge){return Y(Ve,Ge)};throw new Error("Can not create match function for spec",Ve)},ye=function(Ve,Ge,bt,wt,st){var gt=function(Ve,Ge,bt,wt){var st={cy:Ve,events:Ge,selector:bt||"node",fn:wt};return Ve.on(st.events,st.selector,st.fn),st}(Ge,bt,wt,st);(Ve.bindings=Ve.bindings||[]).push(gt)},Ie=function(Ve){Ve.bindings.forEach(function(wt){wt.cy.off(wt.events,wt.selector,wt.fn)}),Ve.bindings=[]},ae=function(Ve){return function(Ge){var bt=Ge.position(),wt=Ve.delta;if(null!=Ve.delta&&!Ge.same(Ve.grabbedNode)&&!Ge.grabbed())return{x:bt.x+wt.x,y:bt.y+wt.y}}},N=function(Ve){return function(Ge){for(var bt=Ge.neighborhood(),wt={x:0,y:0},st=0,gt=0;gt<bt.length;gt++){var Me=bt[gt];if(Me.isNode()&&!Ve(Me)){var ce=Me.position();wt.x+=ce.x,wt.y+=ce.y,st++}}if(!(st<2))return wt.x/=st,wt.y/=st,wt}},$=function(Ve,Ge,bt){return Ve<Ge?Ge:Ve>bt?bt:Ve},re=function(Ve,Ge){var bt=Ve.position();return{x:$(bt.x,Ge.x1,Ge.x2),y:$(bt.y,Ge.y1,Ge.y2)}},pe=function(Ve){return function(Ge){return re(Ge,Ve)}},Ee=function(Ve){return function(Ge){return function(Ve,Ge){var bt=Ve.position(),wt=bt.x,st=bt.y,gt=Ge.x1,Me=Ge.y1,ce=Ge.x2,At=Ge.y2,$n=Math.abs;if(gt<=wt&&wt<=ce&&Me<=st&&st<=At){var Dt=$n(gt-wt),kt=$n(ce-wt),ln=$n(Me-st),Ye=$n(At-st),De=Math.min(Dt,kt,ln,Ye);return De===Dt?{x:gt,y:st}:De===kt?{x:ce,y:st}:De===ln?{x:wt,y:Me}:{x:wt,y:At}}return{x:wt,y:st}}(Ge,Ve)}},xe=function(Ve){return function(Ge){var bt=Ve.extent(),wt=Ge.outerWidth(),st=Ge.outerHeight();return re(Ge,{x1:bt.x1+wt/2,x2:bt.x2-wt/2,y1:bt.y1+st/2,y2:bt.y2-st/2})}},ke=function(Ve,Ge){return"mean"===Ge.reposition?function(Ve){return function(Ge,bt){var wt=function(gt){return Ve.matches(gt)&&gt.neighborhood().length>2&&!gt.grabbed()};ye(Ve,bt,"position","node",function(){(this.neighborhood().some(wt)||Ve.meanOnSelfPosition(this)&&wt(this))&&Ge(bt,[Ve])}),ye(Ve,bt,"add remove","edge",function(){[bt.getElementById(this.data("source")),bt.getElementById(this.data("target"))].some(wt)&&Ge(bt,[Ve])})}}(Ge):"drag"===Ge.reposition?function(Ve){return function(Ge,bt){ye(Ve,bt,"grab","node",function(){if(Ve.dragWithMatches(this)){var st=this.position();Ve.grabbedNode=this,Ve.p1={x:st.x,y:st.y},Ve.delta={x:0,y:0}}}),ye(Ve,bt,"drag","node",function(){if(this.same(Ve.grabbedNode)){var st=Ve.delta,gt=Ve.p1,Me=this.position(),ce={x:Me.x,y:Me.y};st.x=ce.x-gt.x,st.y=ce.y-gt.y,Ve.p1=ce,Ge(bt,[Ve])}}),ye(Ve,bt,"free","node",function(){Ve.grabbedNode=null,Ve.delta=null,Ve.p1=null})}}(Ge):R(Ge.reposition)||"matching"===Ge.when||"viewport"===Ge.reposition?function(Ve){return function(Ge,bt){ye(Ve,bt,"position","node",function(){Ve.matches(this)&&Ge(bt,[Ve])})}}(Ge):Ge.when},qe=function(Ve,Ge,bt){var wt=te({},U,bt);if(wt.getNewPos=function(Ve,Ge){var bt=Ve.reposition;return"mean"===bt?N(G(Ve.meanIgnores)):"viewport"===bt?xe(Ge):"drag"===bt?ae(Ve):R(bt)?null==bt.type||"inside"==bt.type?pe(bt):"outside"==bt.type?Ee(bt):void 0:bt}(wt,Ve),wt.listener=ke(0,wt),Z(wt.nodesMatching))wt.nodes=wt.nodesMatching.slice(),wt.matches=function(Me){return ie(Me)&&Y(wt.nodes,Me)};else{var gt=G(wt.nodesMatching);wt.matches=function(Me){return ie(Me)&&gt(Me)}}return null!=wt.dragWith&&(wt.dragWithMatches=G(wt.dragWith)),wt.listener(function(){hn(Ve,[wt])},Ve),wt.enabled=!0,Ge.rules.push(wt),wt},yt=function(Ve,Ge){Ve.removeListener("add","node",Ge.onAddNode),Ve.removeListener("remove","node",Ge.onRmNode)},hn=function(Ve,Ge){var bt=Ve.scratch().automove;Ge=Ge??bt.rules,Ve.batch(function(){for(var wt=0;wt<Ge.length;wt++){var st=Ge[wt];if(st.destroyed||!st.enabled)break;for(var gt=st.nodes||bt.nodes,Me=gt.length-1;Me>=0;Me--){var ce=gt[Me];if(ce.removed())gt.unmerge(ce);else if(st.matches(ce)){var At=ce.position(),Ft=st.getNewPos(ce);null!=Ft&&(At.x!==Ft.x||At.y!==Ft.y)&&(ce.position(Ft),ce.trigger("automove",[st]))}}}})};be.exports=function(Ve){var Ge=this,bt=Ge.scratch().automove=Ge.scratch().automove||{rules:[]};if(0===bt.rules.length&&(bt.nodes=Ge.nodes().slice(),function(Ve,Ge){Ge.onAddNode=function(bt){Ge.nodes.merge(bt.target)},Ge.onRmNode=function(bt){Ge.nodes.unmerge(bt.target)},Ve.on("add","node",Ge.onAddNode),Ve.on("remove","node",Ge.onRmNode)}(Ge,bt)),"destroy"===Ve)return bt.rules.forEach(function(st){Ie(st),st.destroyed=!0}),bt.rules.splice(0,bt.rules.length),void yt(Ge,bt);var wt=qe(Ge,bt,Ve);return hn(Ge,[wt]),{apply:function(){hn(Ge,[wt])},disable:function(){this.toggle(!1)},enable:function(){this.toggle(!0)},enabled:function(){return wt.enabled},toggle:function(gt){wt.enabled=void 0!==gt?gt:!wt.enabled,wt.enabled&&hn(Ge,[wt])},destroy:function(){var gt=bt.rules;return Ie(wt),wt.destroyed=!0,gt.splice(gt.indexOf(wt),1),0===gt.length&&yt(Ge,bt),this}}}},function(be,z,X){"use strict";be.exports=null!=Object.assign?Object.assign.bind(Object):function(M){for(var U=arguments.length,O=Array(U>1?U-1:0),V=1;V<U;V++)O[V-1]=arguments[V];return O.forEach(function(L){Object.keys(L).forEach(function(R){return M[R]=L[R]})}),M}},function(be,z,X){"use strict";be.exports={nodesMatching:function(O){return!1},reposition:"mean",when:void 0,meanIgnores:function(O){return!1},meanOnSelfPosition:function(O){return!0},dragWith:function(O){return!1}}},function(be,z,X){"use strict";var M=X(0),U=function(V){!V||V("core","automove",M)};typeof cytoscape<"u"&&U(cytoscape),be.exports=U}])},2960:function(He,be,z){var X,M;He.exports=(X=z(8132),M=z(8078),function(U){var O={};function V(L){if(O[L])return O[L].exports;var R=O[L]={i:L,l:!1,exports:{}};return U[L].call(R.exports,R,R.exports,V),R.l=!0,R.exports}return V.m=U,V.c=O,V.i=function(L){return L},V.d=function(L,R,j){V.o(L,R)||Object.defineProperty(L,R,{configurable:!1,enumerable:!0,get:j})},V.n=function(L){var R=L&&L.__esModule?function(){return L.default}:function(){return L};return V.d(R,"a",R),R},V.o=function(L,R){return Object.prototype.hasOwnProperty.call(L,R)},V.p="",V(V.s=12)}([function(U,O,V){"use strict";U.exports=null!=Object.assign?Object.assign.bind(Object):function(L){for(var R=arguments.length,j=Array(R>1?R-1:0),J=1;J<R;J++)j[J-1]=arguments[J];return j.filter(function(Z){return null!=Z}).forEach(function(Z){Object.keys(Z).forEach(function(te){return L[te]=Z[te]})}),L}},function(U,O,V){"use strict";var L=V(10),R=V(0);U.exports=function(j){return new L(R({cy:this},j))}},function(U,O,V){"use strict";U.exports={disableGestures:function L(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var J=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,J),window.addEventListener("touchmove",this.preventDefault,J),window.addEventListener("wheel",this.preventDefault,J)}return this},resetGestures:function R(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var J=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,J),window.removeEventListener("touchmove",this.preventDefault,J),window.removeEventListener("wheel",this.preventDefault,J)}return this},saveGestureState:function j(){var J=this.cy;return this.lastPanningEnabled=J.panningEnabled(),this.lastZoomingEnabled=J.zoomingEnabled(),this.lastBoxSelectionEnabled=J.boxSelectionEnabled(),this}}},function(U,O,V){"use strict";U.exports={addCytoscapeListeners:function L(){var R=this,j=this.cy,J=this.options;return this.addListener(j,"drag",function(){return R.grabbingNode=!0}),this.addListener(j,"free",function(){return R.grabbingNode=!1}),this.addListener(j,"tapstart","node",function(Z){R.drawMode&&R.start(Z.target)}),this.addListener(j,"tapdrag",function(Z){R.update(Z.position)}),this.addListener(j,"tapdragover","node",function(Z){J.snap||R.preview(Z.target)}),this.addListener(j,"tapdragout","node",function(Z){J.snap||R.unpreview(Z.target)}),this.addListener(j,"tapend",function(){R.stop()}),this}}},function(U,O,V){"use strict";U.exports={canConnect:function(j,J){return!j.same(J)},edgeParams:function(j,J){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0}},function(U,O,V){"use strict";U.exports={toggleDrawMode:function L(J){var Z=this.cy;return this.drawMode=J??!this.drawMode,this.drawMode?(this.prevUngrabifyState=Z.autoungrabify(),Z.autoungrabify(!0),this.emit("drawon")):(Z.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function R(){return this.toggleDrawMode(!0)},disableDrawMode:function j(){return this.toggleDrawMode(!1)}}},function(U,O,V){"use strict";var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ye){return typeof ye}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye},R=V(0);function Z(ye,Ie,ne){var ae={};return R(ae,Ie,ye),R(ae.data,Ie.data,ye.data),ae.classes=function(Ie){return(typeof Ie>"u"?"undefined":L(Ie))===L("")}(Ie.classes)?Ie.classes+" "+ne:function(Ie){return(typeof Ie>"u"?"undefined":L(Ie))===L([])&&null!=Ie.length}(Ie.classes)?Ie.classes.join(" ")+" "+ne:ne,ae}U.exports={makeEdges:function te(){var ye=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Ie=this.cy,ae=this.presumptiveTargets,N=this.previewEles,$=this.active,re=this.sourceNode,pe=this.targetNode,Ne=ye?"eh-preview":"",Ee=Ie.collection(),xe=this.canConnect(pe);if($&&xe){if(!pe||0===pe.size())return N.remove(),void this.emit("cancel",this.mp(),re,ae);if(!ye)return N.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),re,pe,N);var ue=Ie.add(Z({group:"edges",data:{source:re.id(),target:pe.id()}},this.edgeParams(pe),Ne));return Ee=Ee.merge(ue),ye?(this.previewEles=Ee,Ee.style("events","no")):(Ee.style("events",""),this.emit("complete",this.mp(),re,pe,Ee)),this}},makePreview:function ie(){return this.makeEdges(!0),this},removePreview:function G(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function Y(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function oe(){var ye=this,Ie=this.sourceNode,ne=this.ghostNode,ae=this.cy,re=this.mx,pe=this.my,Ne=void 0,Ee=void 0;if(Ie)return(!ne||0===ne.length||ne.removed())&&(Ee=this.ghostEles=ae.collection(),ae.batch(function(){(ne=ye.ghostNode=ae.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var xe={};(Ne=ae.add(R({},xe,{group:"edges",data:R({},xe.data,{source:Ie.id(),target:ne.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})}),Ee.merge(ne).merge(Ne)),ne.position({x:re,y:pe}),this}}},function(U,O,V){"use strict";U.exports={disableEdgeEvents:function L(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function R(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(U,O,V){"use strict";U.exports={enable:function L(){return this.enabled=!0,this.emit("enable"),this},disable:function R(){return this.enabled=!1,this.emit("disable"),this}}},function(U,O,V){"use strict";var L=V(13),R=Math.sqrt(2);U.exports={start:function te(Ie){var ne=this;if(this.canStartOn(Ie)){this.active=!0,this.sourceNode=Ie,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var ae=function($){return $.id()};this.canConnect=L(function(N){return ne.options.canConnect(ne.sourceNode,N)},ae),this.edgeParams=L(function(N){return ne.options.edgeParams(ne.sourceNode,N)},ae),this.emit("start",this.hp(),Ie)}},update:function ie(Ie){if(this.active){var ne=Ie;return this.mx=ne.x,this.my=ne.y,this.updateEdge(),this.throttledSnap(),this}},preview:function G(Ie){var ne=this,ae=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],N=this.options,$=this.sourceNode,pe=this.ghostEles,Ne=this.presumptiveTargets,Ee=this.previewEles,xe=this.active,ue=$,Re=Ie.same(this.ghostNode),Je=!this.canConnect(Ie),ke=Ie.same(this.targetNode);if(!xe||Re||Je||ke)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var qe=function(){ne.targetNode=Ie,Ne.merge(Ie),Ie.addClass("eh-presumptive-target"),Ie.addClass("eh-target"),ne.emit("hoverover",ne.mp(),ue,Ie),Ie.addClass("eh-preview"),pe.addClass("eh-preview-active"),$.addClass("eh-preview-active"),Ie.addClass("eh-preview-active"),ne.makePreview(),ne.emit("previewon",ne.mp(),ue,Ie,Ee)};return ae&&N.hoverDelay>0?this.previewTimeout=setTimeout(qe,N.hoverDelay):qe(),!0},unpreview:function oe(Ie){if(this.active){var ae=this.sourceNode,N=this.previewEles,$=this.ghostEles,re=this.cy;clearTimeout(this.previewTimeout),this.previewTimeout=null;var pe=ae;return Ie.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),$.removeClass("eh-preview-active"),ae.removeClass("eh-preview-active"),this.targetNode=re.collection(),this.removePreview(pe,Ie),this.emit("hoverout",this.mp(),pe,Ie),this.emit("previewoff",this.mp(),pe,Ie,N),this}},stop:function ye(){if(this.active){var Ie=this.sourceNode,ne=this.targetNode,ae=this.ghostEles,N=this.presumptiveTargets;return clearTimeout(this.previewTimeout),Ie.removeClass("eh-source eh-preview-active"),ne.removeClass("eh-target eh-preview eh-hover eh-preview-active"),N.removeClass("eh-presumptive-target"),this.makeEdges(),ae.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),Ie),this}},snap:function Y(){if(!this.active||!this.options.snap)return!1;var Ie=this.cy,ne=this.targetNode,ae=this.options.snapThreshold,N=this.mp(),$=this.previewEles,re=this.ghostNode,Ne=function(wt,st,gt,Me){var ce=gt-wt,At=Me-st;return ce*ce+At*At},xe=function(wt){return function(wt,st){return Ne(wt.x,wt.y,st.x,st.y)}(wt.position(),N)},ue=function(wt){var gt=function(wt){return R*Math.max(wt.outerWidth(),wt.outerHeight())/2}(wt)+ae;return gt*gt},Re=function(wt){return xe(wt)<=ue(wt)},Je=function(wt){var st=wt.position(),gt=wt.outerWidth()/2,Me=wt.outerHeight()/2,ce=st.x,At=st.y,Ft=N.x,Tn=N.y,$n=ce-gt,Dt=ce+gt,kt=At-Me,ln=At+Me,Ye=$n<=Ft&&Ft<=Dt,De=kt<=Tn&&Tn<=ln;if(Ye&&De)return 0;if(Ye){var ze=Tn-kt,xt=Tn-ln;return Math.min(ze*ze,xt*xt)}if(De){var un=Ft-$n,_n=Ft-Dt;return Math.min(un*un,_n*_n)}return Ft<$n&&Tn<kt?Ne(Ft,Tn,$n,kt):Ft>Dt&&Tn<kt?Ne(Ft,Tn,Dt,kt):Ne(Ft,Tn,Ft<$n&&Tn>ln?$n:Dt,ln)},yt=function(wt){var st=N,Me=wt.outerWidth()/2,At=wt.outerHeight()/2,Ft=wt.position();return Ft.x-Me<=st.x&&st.x<=Ft.x+Me&&Ft.y-At<=st.y&&st.y<=Ft.y+At},Be=Ie.nodes(function(bt){return!((wt=bt).same($)||wt.same(re))&&Re(bt);var wt}).sort(function(wt,st){return Je(wt)-Je(st)}),lt=!1;ne.nonempty()&&!Re(ne)&&this.unpreview(ne);for(var Ve=0;Ve<Be.length;Ve++){var Ge=Be[Ve];if((!Ge.isParent()||!yt(Ge))&&(!Ge.isChild()||yt(Ge.parent()))&&(Ge.same(ne)||this.preview(Ge,false))){lt=!0;break}}return lt},canStartOn:function j(Ie){var ue,ne=this.previewEles,ae=this.ghostEles;return this.enabled&&!this.active&&!this.grabbingNode&&null!=Ie&&Ie.nonempty()&&!(function(ue){return ne.anySame(ue)}(ue=Ie)||function(ue){return ae.anySame(ue)}(ue))},canStartDrawModeOn:function J(Ie){return this.canStartOn(Ie)&&this.drawMode},canStartNonDrawModeOn:function Z(Ie){return this.canStartOn(Ie)&&!this.drawMode}}},function(U,O,V){"use strict";var L=V(4),R=V(0),j=V(14),J=V(2),Z=V(3),te=V(5),ie=V(6),Y=V(8),G=V(9),oe=V(11),ye=V(7);function Ie(N){this.cy=N.cy,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=R({},L,N),this.saveGestureState(),this.addListeners(),this.throttledSnap=j(this.snap.bind(this),1e3/N.snapFrequency),this.preventDefault=function(Ne){return Ne.preventDefault()},this.canConnect=function(){return!1};var re=!1;try{var pe=Object.defineProperty({},"passive",{get:function(){re=!0}});window.addEventListener("test",null,pe)}catch{}this.windowListenerOptions=!re||{capture:!0,passive:!1}}var ne=Ie.prototype={};ne.destroy=function(){this.removeListeners()},ne.setOptions=function(N){R(this.options,N)},ne.mp=function(){return{x:this.mx,y:this.my}},ne.hp=function(){return{x:this.hx,y:this.hy}},ne.clearCollections=function(){var N=this.cy;this.previewEles=N.collection(),this.ghostEles=N.collection(),this.ghostNode=N.collection(),this.sourceNode=N.collection(),this.targetNode=N.collection(),this.presumptiveTargets=N.collection()},[J,Z,te,ie,Y,G,oe,ye].forEach(function($){return R(ne,$)}),U.exports=Ie},function(U,O,V){"use strict";var L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(G){return typeof G}:function(G){return G&&"function"==typeof Symbol&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G};function J(G,oe,ye,Ie,ne){return(typeof ye>"u"?"undefined":L(ye))!==L("")&&(ne=Ie=ye,ye=null),null==ne&&(ne=!1),{target:G,event:oe,selector:ye,callback:Ie,options:ne}}function Z(G){return G instanceof Element}U.exports={addListener:function te(G,oe,ye,Ie,ne){var ae=J(G,oe,ye,Ie,ne);return this.listeners.push(ae),Z(ae.target)?ae.target.addEventListener(ae.event,ae.callback,ae.options):ae.selector?ae.target.addListener(ae.event,ae.selector,ae.callback,ae.options):ae.target.addListener(ae.event,ae.callback,ae.options),this},addListeners:function R(){var G=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return G.destroy()}),this},removeListener:function ie(G,oe,ye,Ie,ne){for(var ae=J(G,oe,ye,Ie,ne),N=this.listeners.length-1;N>=0;N--){var $=this.listeners[N];if(!(ae.target!==$.target||ae.event!==$.event||null!=ae.selector&&ae.selector!==$.selector||null!=ae.callback&&ae.callback!==$.callback)){this.listeners.splice(N,1),Z(ae.target)?ae.target.removeEventListener(ae.event,ae.callback,ae.options):ae.selector?ae.target.removeListener(ae.event,ae.selector,ae.callback,ae.options):ae.target.removeListener(ae.event,ae.callback,ae.options);break}}return this},removeListeners:function j(){for(var G=this.listeners.length-1;G>=0;G--){var oe=this.listeners[G];this.removeListener(oe.target,oe.event,oe.selector,oe.callback,oe.options)}return this},emit:function Y(G,oe){for(var ye=this.cy,Ie=arguments.length,ne=Array(Ie>2?Ie-2:0),ae=2;ae<Ie;ae++)ne[ae-2]=arguments[ae];return ye.emit({type:"eh"+G,position:oe},ne),this}}},function(U,O,V){"use strict";var L=V(1),R=function(J){!J||J("core","edgehandles",L)};typeof cytoscape<"u"&&R(cytoscape),U.exports=R},function(U,O){U.exports=X},function(U,O){U.exports=M}]))},9050:(He,be,z)=>{var X;!function(M){"use strict";var U=function(O){!O||O("core","snapToGrid",function(V){var L=this,R=V,j=L.container(),J={stackOrder:-1,gridSpacing:40,strokeStyle:"#CCCCCC",lineWidth:1,lineDash:[5,8],zoomDash:!0,panGrid:!0,snapToGrid:!0,drawGrid:!0},Z={snapOn:function(){M(this).trigger("snaptogrid.snapon")},snapOff:function(){M(this).trigger("snaptogrid.snapoff")},gridOn:function(){M(this).trigger("snaptogrid.gridon")},gridOff:function(){M(this).trigger("snaptogrid.gridoff")},refresh:function(){M(this).trigger("snaptogrid.refresh")},option:function(te,ie){var Y=M(this),G=Y.data("snapToGrid");if(null!=G){var oe=G.options;if(void 0===ie){if(typeof te!=typeof{})return oe[te];oe=M.extend(!0,{},defaults,te),G.options=oe}else oe[te]=ie;return Y.data("snapToGrid",G),Y.trigger("snaptogrid.refresh"),Y}},init:function(){var Y,te=M("<canvas></canvas>"),ie=M(this),G=M.extend(!0,{},J,V);ie.data("snapToGrid",G);var oe,ye=function(){return oe||(oe=ie.data("snapToGrid"))},Ie=function(){te.attr("height",ie.height()).attr("width",ie.width()).css({position:"absolute",top:0,left:0,"z-index":ye().stackOrder}),setTimeout(function(){var Re=te.offset(),Je=ie.offset();te.attr("height",ie.height()).attr("width",ie.width()).css({top:-(Re.top-Je.top),left:-(Re.left-Je.left)}),ne()},0)},ne=function(){if(ae(),ye().drawGrid){var Re=L.zoom(),Je=ie.width(),ke=ie.height(),qe=ye().gridSpacing*Re,ot=L.pan(),yt=ot.x%qe,hn=ot.y%qe;if(Y.strokeStyle=ye().strokeStyle,Y.lineWidth=ye().lineWidth,ye().zoomDash){for(var Be=ye().lineDash.slice(),lt=0;lt<Be.length;lt++)Be[lt]=ye().lineDash[lt]*Re;Y.setLineDash(Be)}else Y.setLineDash(ye().lineDash);for(Y.lineDashOffset=ye().panGrid?-ot.y:0,lt=yt;lt<Je;lt+=qe)Y.beginPath(),Y.moveTo(lt,0),Y.lineTo(lt,ke),Y.stroke();for(Y.lineDashOffset=ye().panGrid?-ot.x:0,lt=hn;lt<ke;lt+=qe)Y.beginPath(),Y.moveTo(0,lt),Y.lineTo(Je,lt),Y.stroke()}},ae=function(){var Re=ie.width(),Je=ie.height();Y.clearRect(0,0,Re,Je)},N=function(Re){var Je=Re.position(),ke=Math.floor(Je.x/ye().gridSpacing),qe=Math.floor(Je.y/ye().gridSpacing);Re.position({x:(ke+.5)*ye().gridSpacing,y:(qe+.5)*ye().gridSpacing})},$=function(){L.nodes().each(function(Re){N(Re)})},re=function(Re){ye().snapToGrid&&N(Re.target)},pe=function(Re){ye().snapToGrid&&N(Re.target)};ie.append(te),M(window).on("resize",Ie),ie.on("snaptogrid.snapon",function(){ye().snapToGrid=!0,$()}),ie.on("snaptogrid.snapoff",function(){ye().snapToGrid=!1}),ie.on("snaptogrid.gridon",function(){ye().drawGrid=!0,ne()}),ie.on("snaptogrid.gridoff",function(){ye().drawGrid=!1,ne()}),ie.on("snaptogrid.refresh",Ie),Y=te[0].getContext("2d"),L.ready(function(){Ie(),ye().snapToGrid&&$(),L.on("zoom",ne),L.on("pan",ne),L.on("free",re),L.on("add",pe)})}};return Z[R]?Z[R].apply(j,Array.prototype.slice.call(arguments,1)):"object"!=typeof R&&R?(console.error("No such function `"+R+"` for snapToGrid"),this):Z.init.apply(j,arguments)})};He.exports&&(He.exports=U),void 0!==(X=function(){return U}.call(be,z,be,He))&&(He.exports=X),typeof cytoscape<"u"&&U(cytoscape)}(typeof jQuery<"u"?jQuery:null)},6864:(He,be,z)=>{"use strict";var X=z(406),M=z(5203),U=z(8817),O=z(4793),V=z(4152);function L(f){return f&&"object"==typeof f&&"default"in f?f:{default:f}}var R=L(X),j=L(M),J=L(U),Z=L(O),te=L(V);function ie(f){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function Y(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function G(f,c){for(var d=0;d<c.length;d++){var m=c[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}function oe(f,c,d){return c&&G(f.prototype,c),d&&G(f,d),Object.defineProperty(f,"prototype",{writable:!1}),f}function ye(f,c,d){return c in f?Object.defineProperty(f,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[c]=d,f}function Ie(f,c){return function ne(f){if(Array.isArray(f))return f}(f)||function ae(f,c){var d=null==f?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(null!=d){var A,E,m=[],_=!0,C=!1;try{for(d=d.call(f);!(_=(A=d.next()).done)&&(m.push(A.value),!c||m.length!==c);_=!0);}catch(B){C=!0,E=B}finally{try{!_&&null!=d.return&&d.return()}finally{if(C)throw E}}return m}}(f,c)||function N(f,c){if(f){if("string"==typeof f)return $(f,c);var d=Object.prototype.toString.call(f).slice(8,-1);if("Object"===d&&f.constructor&&(d=f.constructor.name),"Map"===d||"Set"===d)return Array.from(f);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return $(f,c)}}(f,c)||function re(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(f,c){(null==c||c>f.length)&&(c=f.length);for(var d=0,m=new Array(c);d<c;d++)m[d]=f[d];return m}var pe=typeof window>"u"?null:window,Ne=pe?pe.navigator:null,Ee=ie(""),xe=ie({}),ue=ie(function(){}),Re=typeof HTMLElement>"u"?"undefined":ie(HTMLElement),Je=function(c){return c&&c.instanceString&&qe(c.instanceString)?c.instanceString():null},ke=function(c){return null!=c&&ie(c)==Ee},qe=function(c){return null!=c&&ie(c)===ue},ot=function(c){return!Ge(c)&&(Array.isArray?Array.isArray(c):null!=c&&c instanceof Array)},yt=function(c){return null!=c&&ie(c)===xe&&!ot(c)&&c.constructor===Object},Be=function(c){return null!=c&&ie(c)===ie(1)&&!isNaN(c)},Ve=function(c){if("undefined"!==Re)return null!=c&&c instanceof HTMLElement},Ge=function(c){return bt(c)||wt(c)},bt=function(c){return"collection"===Je(c)&&c._private.single},wt=function(c){return"collection"===Je(c)&&!c._private.single},st=function(c){return"core"===Je(c)},gt=function(c){return"stylesheet"===Je(c)},ce=function(c){return null==c||!(""!==c&&!c.match(/^\s+$/))},Tn=function(c){return function(c){return null!=c&&ie(c)===xe}(c)&&qe(c.then)},Dt=function(c,d){d||(d=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var C=[],A=0;A<arguments.length;A++)C.push(arguments[A]);return C.join("$")});var m=function _(){var E,C=this,A=arguments,B=d.apply(C,A),P=_.cache;return(E=P[B])||(E=P[B]=c.apply(C,A)),E};return m.cache={},m},kt=Dt(function(f){return f.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()})}),ln=Dt(function(f){return f.replace(/(-\w)/g,function(c){return c[1].toUpperCase()})}),Ye=Dt(function(f,c){return f+c[0].toUpperCase()+c.substring(1)},function(f,c){return f+"$"+c}),De=function(c){return ce(c)?c:c.charAt(0).toUpperCase()+c.substring(1)},ze="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",kr=function(c,d){return c<d?-1:c>d?1:0},tr=null!=Object.assign?Object.assign.bind(Object):function(f){for(var c=arguments,d=1;d<c.length;d++){var m=c[d];if(null!=m)for(var _=Object.keys(m),C=0;C<_.length;C++){var A=_[C];f[A]=m[A]}}return f},ih={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},uc=function(c){for(var d=c.map,m=c.keys,_=m.length,C=0;C<_;C++){var A=m[C];if(yt(A))throw Error("Tried to set map with object key");C<m.length-1?(null==d[A]&&(d[A]={}),d=d[A]):d[A]=c.value}},Sh=function(c){for(var d=c.map,m=c.keys,_=m.length,C=0;C<_;C++){var A=m[C];if(yt(A))throw Error("Tried to get map with object key");if(null==(d=d[A]))return d}return d},ku=pe?pe.performance:null,Xa=ku&&ku.now?function(){return ku.now()}:function(){return Date.now()},Pd=function(){if(pe){if(pe.requestAnimationFrame)return function(f){pe.requestAnimationFrame(f)};if(pe.mozRequestAnimationFrame)return function(f){pe.mozRequestAnimationFrame(f)};if(pe.webkitRequestAnimationFrame)return function(f){pe.webkitRequestAnimationFrame(f)};if(pe.msRequestAnimationFrame)return function(f){pe.msRequestAnimationFrame(f)}}return function(f){f&&setTimeout(function(){f(Xa())},1e3/60)}}(),uu=function(c){return Pd(c)},Sa=Xa,Eh=9261,Ou=65599,nd=5381,ff=function(c){for(var _,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eh,m=d;!(_=c.next()).done;)m=m*Ou+_.value|0;return m},id=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Eh;return d*Ou+c|0},pl=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nd;return(d<<5)+d+c|0},rh=function(c){return 2097152*c[0]+c[1]},gf=function(c,d){return[id(c[0],d[0]),pl(c[1],d[1])]},Ic=function(c,d){var m={value:0,done:!1},_=0,C=c.length;return ff({next:function(){return _<C?m.value=c.charCodeAt(_++):m.done=!0,m}},d)},Mg=function(){return Th(arguments)},Th=function(c){for(var d,m=0;m<c.length;m++){var _=c[m];d=0===m?Ic(_):Ic(_,d)}return d},ro=!0,mf=null!=console.warn,gl=null!=console.trace,Sc=Number.MAX_SAFE_INTEGER||9007199254740991,rl=function(){return!0},$f=function(){return!1},rd=function(){return 0},et=function(){},mt=function(c){throw new Error(c)},ct=function(c){if(void 0===c)return ro;ro=!!c},ge=function(c){!ct()||(mf?console.warn(c):(console.log(c),gl&&console.trace()))},it=function(c){return null==c?c:ot(c)?c.slice():yt(c)?function(c){return tr({},c)}(c):c},Yt=function(c,d){for(d=c="";c++<36;d+=51*c&52?(15^c?8^Math.random()*(20^c?16:4):4).toString(16):"-");return d},Dn={},Ai=function(){return Dn},oi=function(c){var d=Object.keys(c);return function(m){for(var _={},C=0;C<d.length;C++){var A=d[C],E=m?.[A];_[A]=void 0===E?c[A]:E}return _}},gi=function(c,d,m){for(var _=c.length-1;_>=0&&(c[_]!==d||(c.splice(_,1),!m));_--);},yr=function(c){c.splice(0,c.length)},ur=function(c,d,m){return m&&(d=Ye(m,d)),c[d]},Ws=function(c,d,m,_){m&&(d=Ye(m,d)),c[d]=_},Eo=typeof Map<"u"?Map:function(){function f(){Y(this,f),this._obj={}}return oe(f,[{key:"set",value:function(d,m){return this._obj[d]=m,this}},{key:"delete",value:function(d){return this._obj[d]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(d){return void 0!==this._obj[d]}},{key:"get",value:function(d){return this._obj[d]}}]),f}(),Ea=function(){function f(c){if(Y(this,f),this._obj=Object.create(null),this.size=0,null!=c){var d;d=null!=c.instanceString&&c.instanceString()===this.instanceString()?c.toArray():c;for(var m=0;m<d.length;m++)this.add(d[m])}}return oe(f,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(d){var m=this._obj;1!==m[d]&&(m[d]=1,this.size++)}},{key:"delete",value:function(d){var m=this._obj;1===m[d]&&(m[d]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(d){return 1===this._obj[d]}},{key:"toArray",value:function(){var d=this;return Object.keys(this._obj).filter(function(m){return d.has(m)})}},{key:"forEach",value:function(d,m){return this.toArray().forEach(d,m)}}]),f}(),ms="undefined"!==(typeof Set>"u"?"undefined":ie(Set))?Set:Ea,Ya=function(c,d){var m=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==c&&void 0!==d&&st(c)){var _=d.group;if(null==_&&(_=d.data&&null!=d.data.source&&null!=d.data.target?"edges":"nodes"),"nodes"===_||"edges"===_){this.length=1,this[0]=this;var C=this._private={cy:c,single:!0,data:d.data||{},position:d.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:_,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!d.selected,selectable:void 0===d.selectable||!!d.selectable,locked:!!d.locked,grabbed:!1,grabbable:void 0===d.grabbable||!!d.grabbable,pannable:void 0===d.pannable?"edges"===_:!!d.pannable,active:!1,classes:new ms,animation:{current:[],queue:[]},rscratch:{},scratch:d.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==C.position.x&&(C.position.x=0),null==C.position.y&&(C.position.y=0),d.renderedPosition){var A=d.renderedPosition,E=c.pan(),B=c.zoom();C.position={x:(A.x-E.x)/B,y:(A.y-E.y)/B}}var P=[];ot(d.classes)?P=d.classes:ke(d.classes)&&(P=d.classes.split(/\s+/));for(var q=0,Q=P.length;q<Q;q++){var fe=P[q];!fe||""===fe||C.classes.add(fe)}this.createEmitter();var me=d.style||d.css;me&&(ge("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(me)),(void 0===m||m)&&this.restore()}else mt("An element must be of type `nodes` or `edges`; you specified `"+_+"`")}else mt("An element must have a core reference and parameters set")},Fu=function(c){return c={bfs:c.bfs||!c.dfs,dfs:c.dfs||!c.bfs},function(m,_,C){var A;yt(m)&&!Ge(m)&&(m=(A=m).roots||A.root,_=A.visit,C=A.directed),C=2!==arguments.length||qe(_)?C:_,_=qe(_)?_:function(){};for(var Pe,E=this._private.cy,B=m=ke(m)?this.filter(m):m,P=[],q=[],Q={},fe={},me={},_e=0,$e=this.byGroup(),Ke=$e.nodes,ht=$e.edges,rt=0;rt<B.length;rt++){var St=B[rt],Gt=St.id();St.isNode()&&(P.unshift(St),c.bfs&&(me[Gt]=!0,q.push(St)),fe[Gt]=0)}for(var Wt=function(){var Qt=c.bfs?P.shift():P.pop(),Ht=Qt.id();if(c.dfs){if(me[Ht])return"continue";me[Ht]=!0,q.push(Qt)}var ri,xn=fe[Ht],sn=Q[Ht],vn=null!=sn?sn.source():null,Ln=null!=sn?sn.target():null,Fn=null==sn?void 0:Qt.same(vn)?Ln[0]:vn[0];if(!0===(ri=_(Qt,sn,Fn,_e++,xn)))return Pe=Qt,"break";if(!1===ri)return"break";for(var Rn=Qt.connectedEdges().filter(function(pi){return(!C||pi.source().same(Qt))&&ht.has(pi)}),ei=0;ei<Rn.length;ei++){var di=Rn[ei],Ii=di.connectedNodes().filter(function(pi){return!pi.same(Qt)&&Ke.has(pi)}),vi=Ii.id();0!==Ii.length&&!me[vi]&&(P.push(Ii=Ii[0]),c.bfs&&(me[vi]=!0,q.push(Ii)),Q[vi]=di,fe[vi]=fe[Ht]+1)}};0!==P.length;){var Tt=Wt();if("continue"!==Tt&&"break"===Tt)break}for(var jt=E.collection(),Pt=0;Pt<q.length;Pt++){var Zt=q[Pt],Kt=Q[Zt.id()];null!=Kt&&jt.push(Kt),jt.push(Zt)}return{path:E.collection(jt),found:E.collection(Pe)}}},hs={breadthFirstSearch:Fu({bfs:!0}),depthFirstSearch:Fu({dfs:!0})};hs.bfs=hs.breadthFirstSearch,hs.dfs=hs.depthFirstSearch;var ss=oi({root:null,weight:function(c){return 1},directed:!1}),Dg={dijkstra:function(c){if(!yt(c)){var d=arguments;c={root:d[0],weight:d[1],directed:d[2]}}var m=ss(c),_=m.root,C=m.weight,A=m.directed,E=this,B=C,P=ke(_)?this.filter(_)[0]:_[0],q={},Q={},fe={},me=this.byGroup(),_e=me.nodes,Pe=me.edges;Pe.unmergeBy(function(xn){return xn.isLoop()});for(var $e=function(sn){return q[sn.id()]},Ke=function(sn,vn){q[sn.id()]=vn,ht.updateItem(sn)},ht=new j.default(function(xn,sn){return $e(xn)-$e(sn)}),rt=0;rt<_e.length;rt++){var St=_e[rt];q[St.id()]=St.same(P)?0:1/0,ht.push(St)}for(var Gt=function(sn,vn){for(var ri,Ln=(A?sn.edgesTo(vn):sn.edgesWith(vn)).intersect(Pe),Fn=1/0,Rn=0;Rn<Ln.length;Rn++){var ei=Ln[Rn],di=B(ei);(di<Fn||!ri)&&(Fn=di,ri=ei)}return{edge:ri,dist:Fn}};ht.size()>0;){var Wt=ht.pop(),Tt=$e(Wt),jt=Wt.id();if(fe[jt]=Tt,Tt!==1/0)for(var Pt=Wt.neighborhood().intersect(_e),Zt=0;Zt<Pt.length;Zt++){var Kt=Pt[Zt],dt=Kt.id(),Qt=Gt(Wt,Kt),Ht=Tt+Qt.dist;Ht<$e(Kt)&&(Ke(Kt,Ht),Q[dt]={node:Wt,edge:Qt.edge})}}return{distanceTo:function(sn){var vn=ke(sn)?_e.filter(sn)[0]:sn[0];return fe[vn.id()]},pathTo:function(sn){var vn=ke(sn)?_e.filter(sn)[0]:sn[0],Ln=[],Fn=vn,ri=Fn.id();if(vn.length>0)for(Ln.unshift(vn);Q[ri];){var Rn=Q[ri];Ln.unshift(Rn.edge),Ln.unshift(Rn.node),ri=(Fn=Rn.node).id()}return E.spawn(Ln)}}}},Vp={kruskal:function(c){c=c||function(rt){return 1};for(var d=this.byGroup(),m=d.nodes,_=d.edges,C=m.length,A=new Array(C),E=m,B=function(St){for(var Gt=0;Gt<A.length;Gt++)if(A[Gt].has(St))return Gt},P=0;P<C;P++)A[P]=this.spawn(m[P]);for(var q=_.sort(function(rt,St){return c(rt)-c(St)}),Q=0;Q<q.length;Q++){var fe=q[Q],me=fe.source()[0],_e=fe.target()[0],Pe=B(me),$e=B(_e),Ke=A[Pe],ht=A[$e];Pe!==$e&&(E.merge(fe),Ke.merge(ht),A.splice($e,1))}return E}},_i=oi({root:null,goal:null,weight:function(c){return 1},heuristic:function(c){return 0},directed:!1}),Lg={aStar:function(c){var d=this.cy(),m=_i(c),_=m.root,C=m.goal,A=m.heuristic,E=m.directed,B=m.weight;_=d.collection(_)[0],C=d.collection(C)[0];var rt,St,P=_.id(),q=C.id(),Q={},fe={},me={},_e=new j.default(function(ri,Rn){return fe[ri.id()]-fe[Rn.id()]}),Pe=new ms,$e={},Ke={},ht=function(Rn,ei){_e.push(Rn),Pe.add(ei)};ht(_,P),Q[P]=0,fe[P]=A(_);for(var Tt=0;_e.size()>0;){if(St=(rt=_e.pop()).id(),Pe.delete(St),Tt++,St===q){for(var jt=[],Pt=C,Zt=q,Kt=Ke[Zt];jt.unshift(Pt),null!=Kt&&jt.unshift(Kt),null!=(Pt=$e[Zt]);)Kt=Ke[Zt=Pt.id()];return{found:!0,distance:Q[St],path:this.spawn(jt),steps:Tt}}me[St]=!0;for(var dt=rt._private.edges,Qt=0;Qt<dt.length;Qt++){var Ht=dt[Qt];if(this.hasElementWithId(Ht.id())&&(!E||Ht.data("source")===St)){var xn=Ht.source(),sn=Ht.target(),vn=xn.id()!==St?xn:sn,Ln=vn.id();if(this.hasElementWithId(Ln)&&!me[Ln]){var Fn=Q[St]+B(Ht);if(!Pe.has(Ln)){Q[Ln]=Fn,fe[Ln]=Fn+A(vn),ht(vn,Ln),$e[Ln]=rt,Ke[Ln]=Ht;continue}Fn<Q[Ln]&&(Q[Ln]=Fn,fe[Ln]=Fn+A(vn),$e[Ln]=rt,Ke[Ln]=Ht)}}}}return{found:!1,distance:void 0,path:void 0,steps:Tt}}},Ps=oi({weight:function(c){return 1},directed:!1}),To={floydWarshall:function(c){for(var d=this.cy(),m=Ps(c),C=m.directed,A=m.weight,E=this.byGroup(),B=E.nodes,P=E.edges,q=B.length,Q=q*q,fe=function(di){return B.indexOf(di)},me=function(di){return B[di]},_e=new Array(Q),Pe=0;Pe<Q;Pe++){var $e=Pe%q;_e[Pe]=(Pe-$e)/q===$e?0:1/0}for(var ht=new Array(Q),rt=new Array(Q),St=0;St<P.length;St++){var Gt=P[St],Wt=Gt.source()[0],Tt=Gt.target()[0];if(Wt!==Tt){var jt=fe(Wt),Pt=fe(Tt),Zt=jt*q+Pt,Kt=A(Gt);if(_e[Zt]>Kt&&(_e[Zt]=Kt,ht[Zt]=Pt,rt[Zt]=Gt),!C){var dt=Pt*q+jt;!C&&_e[dt]>Kt&&(_e[dt]=Kt,ht[dt]=jt,rt[dt]=Gt)}}}for(var Qt=0;Qt<q;Qt++)for(var Ht=0;Ht<q;Ht++)for(var xn=Ht*q+Qt,sn=0;sn<q;sn++){var vn=Ht*q+sn,Ln=Qt*q+sn;_e[xn]+_e[Ln]<_e[vn]&&(_e[vn]=_e[xn]+_e[Ln],ht[vn]=ht[xn])}var ri=function(di){return fe(function(di){return(ke(di)?d.filter(di):di)[0]}(di))};return{distance:function(di,Ii){var vi=ri(di),pi=ri(Ii);return _e[vi*q+pi]},path:function(di,Ii){var vi=ri(di),pi=ri(Ii),kn=me(vi);if(vi===pi)return kn.collection();if(null==ht[vi*q+pi])return d.collection();var li=d.collection();for(li.merge(kn);vi!==pi;)li.merge(rt[vi*q+(vi=ht[vi*q+pi])]),li.merge(me(vi));return li}}}},vv=oi({weight:function(c){return 1},directed:!1,root:null}),yv={bellmanFord:function(c){var d=this,m=vv(c),C=m.directed,A=m.root,E=m.weight,B=this,P=this.cy(),q=this.byGroup(),Q=q.edges,fe=q.nodes,me=fe.length,_e=new Eo,Pe=!1,$e=[];A=P.collection(A)[0],Q.unmergeBy(function(ki){return ki.isLoop()});for(var Ke=Q.length,ht=function(br){var wr=_e.get(br.id());return wr||(wr={},_e.set(br.id(),wr)),wr},rt=function(br){return(ke(br)?P.$(br):br)[0]},Wt=0;Wt<me;Wt++){var Tt=fe[Wt],jt=ht(Tt);jt.dist=Tt.same(A)?0:1/0,jt.pred=null,jt.edge=null}for(var Pt=!1,Zt=function(br,wr,es,zs,ts,$i){var zt=zs.dist+$i;zt<ts.dist&&!es.same(zs.edge)&&(ts.dist=zt,ts.pred=br,ts.edge=es,Pt=!0)},Kt=1;Kt<me;Kt++){Pt=!1;for(var dt=0;dt<Ke;dt++){var Qt=Q[dt],Ht=Qt.source(),xn=Qt.target(),sn=E(Qt),vn=ht(Ht),Ln=ht(xn);Zt(Ht,0,Qt,vn,Ln,sn),C||Zt(xn,0,Qt,Ln,vn,sn)}if(!Pt)break}if(Pt)for(var Fn=[],ri=0;ri<Ke;ri++){var Rn=Q[ri],ei=Rn.source(),di=Rn.target(),Ii=E(Rn),vi=ht(ei).dist,pi=ht(di).dist;if(vi+Ii<pi||!C&&pi+Ii<vi){if(Pe||(ge("Graph contains a negative weight cycle for Bellman-Ford"),Pe=!0),!1===c.findNegativeWeightCycles)break;var kn=[];vi+Ii<pi&&kn.push(ei),!C&&pi+Ii<vi&&kn.push(di);for(var li=kn.length,Ei=0;Ei<li;Ei++){var Qi=kn[Ei],lr=[Qi];lr.push(ht(Qi).edge);for(var Wr=ht(Qi).pred;-1===lr.indexOf(Wr);)lr.push(Wr),lr.push(ht(Wr).edge),Wr=ht(Wr).pred;for(var Jr=(lr=lr.slice(lr.indexOf(Wr)))[0].id(),mr=0,or=2;or<lr.length;or+=2)lr[or].id()<Jr&&(Jr=lr[or].id(),mr=or);(lr=lr.slice(mr).concat(lr.slice(0,mr))).push(lr[0]);var Zr=lr.map(function(ki){return ki.id()}).join(",");-1===Fn.indexOf(Zr)&&($e.push(B.spawn(lr)),Fn.push(Zr))}}}return{distanceTo:function(br){return ht(rt(br)).dist},pathTo:function(br){for(var wr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,es=rt(br),zs=[],ts=es;;){if(null==ts)return d.spawn();var $i=ht(ts),zt=$i.edge,Qn=$i.pred;if(zs.unshift(ts[0]),ts.same(wr)&&zs.length>0)break;null!=zt&&zs.unshift(zt),ts=Qn}return B.spawn(zs)},hasNegativeWeightCycle:Pe,negativeWeightCycles:$e}}},Ty=Math.sqrt(2),xs=function(c,d,m){0===m.length&&mt("Karger-Stein must be run on a connected (sub)graph");for(var _=m[c],E=d[_[1]],B=d[_[2]],P=m,q=P.length-1;q>=0;q--){var Q=P[q],fe=Q[1],me=Q[2];(d[fe]===E&&d[me]===B||d[fe]===B&&d[me]===E)&&P.splice(q,1)}for(var _e=0;_e<P.length;_e++){var Pe=P[_e];Pe[1]===B?(P[_e]=Pe.slice(),P[_e][1]=E):Pe[2]===B&&(P[_e]=Pe.slice(),P[_e][2]=E)}for(var $e=0;$e<d.length;$e++)d[$e]===B&&(d[$e]=E);return P},er=function(c,d,m,_){for(;m>_;){var C=Math.floor(Math.random()*d.length);d=xs(C,c,d),m--}return d},My={kargerStein:function(){var c=this,d=this.byGroup(),m=d.nodes,_=d.edges;_.unmergeBy(function(Ln){return Ln.isLoop()});var C=m.length,A=_.length,E=Math.ceil(Math.pow(Math.log(C)/Math.LN2,2)),B=Math.floor(C/Ty);if(!(C<2)){for(var P=[],q=0;q<A;q++){var Q=_[q];P.push([q,m.indexOf(Q.source()),m.indexOf(Q.target())])}for(var fe=1/0,me=[],_e=new Array(C),Pe=new Array(C),$e=new Array(C),Ke=function(Fn,ri){for(var Rn=0;Rn<C;Rn++)ri[Rn]=Fn[Rn]},ht=0;ht<=E;ht++){for(var rt=0;rt<C;rt++)Pe[rt]=rt;var St=er(Pe,P.slice(),C,B),Gt=St.slice();Ke(Pe,$e);var Wt=er(Pe,St,B,2),Tt=er($e,Gt,B,2);Wt.length<=Tt.length&&Wt.length<fe?(fe=Wt.length,me=Wt,Ke(Pe,_e)):Tt.length<=Wt.length&&Tt.length<fe&&(fe=Tt.length,me=Tt,Ke($e,_e))}for(var jt=this.spawn(me.map(function(Ln){return _[Ln[0]]})),Pt=this.spawn(),Zt=this.spawn(),Kt=_e[0],dt=0;dt<_e.length;dt++){var Ht=m[dt];_e[dt]===Kt?Pt.merge(Ht):Zt.merge(Ht)}var xn=function(Fn){var ri=c.spawn();return Fn.forEach(function(Rn){ri.merge(Rn),Rn.connectedEdges().forEach(function(ei){c.contains(ei)&&!jt.contains(ei)&&ri.merge(ei)})}),ri},sn=[xn(Pt),xn(Zt)];return{cut:jt,components:sn,partition1:Pt,partition2:Zt}}mt("At least 2 nodes are required for Karger-Stein algorithm")}},Ko=function(c,d,m){return{x:c.x*d+m.x,y:c.y*d+m.y}},Ec=function(c,d,m){return{x:(c.x-m.x)/d,y:(c.y-m.y)/d}},sd=function(c){return{x:c[0],y:c[1]}},Rg=function(c,d){return Math.atan2(d,c)-Math.PI/2},_v=Math.log2||function(f){return Math.log(f)/Math.log(2)},Tc=function(c){return c>0?1:c<0?-1:0},so=function(c,d){return Math.sqrt(Mh(c,d))},Mh=function(c,d){var m=d.x-c.x,_=d.y-c.y;return m*m+_*_},N_=function(c){for(var d=c.length,m=0,_=0;_<d;_++)m+=c[_];for(var C=0;C<d;C++)c[C]=c[C]/m;return c},hc=function(c,d,m,_){return(1-_)*(1-_)*c+2*(1-_)*_*d+_*_*m},Zi=function(c,d,m,_){return{x:hc(c.x,d.x,m.x,_),y:hc(c.y,d.y,m.y,_)}},Sr=function(c,d,m){return Math.max(c,Math.min(m,d))},Mc=function(c){if(null==c)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=c.x1&&null!=c.y1){if(null!=c.x2&&null!=c.y2&&c.x2>=c.x1&&c.y2>=c.y1)return{x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,w:c.x2-c.x1,h:c.y2-c.y1};if(null!=c.w&&null!=c.h&&c.w>=0&&c.h>=0)return{x1:c.x1,y1:c.y1,x2:c.x1+c.w,y2:c.y1+c.h,w:c.w,h:c.h}}},Ta=function(c,d){c.x1=Math.min(c.x1,d.x1),c.x2=Math.max(c.x2,d.x2),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,d.y1),c.y2=Math.max(c.y2,d.y2),c.h=c.y2-c.y1},ha=function(c,d,m){c.x1=Math.min(c.x1,d),c.x2=Math.max(c.x2,d),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,m),c.y2=Math.max(c.y2,m),c.h=c.y2-c.y1},qf=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c.x1-=d,c.x2+=d,c.y1-=d,c.y2+=d,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},Up=function(c){var m,_,C,A,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===d.length)m=_=C=A=d[0];else if(2===d.length)m=C=d[0],A=_=d[1];else if(4===d.length){var E=Ie(d,4);m=E[0],_=E[1],C=E[2],A=E[3]}return c.x1-=A,c.x2+=_,c.y1-=m,c.y2+=C,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},wm=function(c,d){c.x1=d.x1,c.y1=d.y1,c.x2=d.x2,c.y2=d.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1},Am=function(c,d){return!(c.x1>d.x2||d.x1>c.x2||c.x2<d.x1||d.x2<c.x1||c.y2<d.y1||d.y2<c.y1||c.y1>d.y2||d.y1>c.y2)},os=function(c,d,m){return c.x1<=d&&d<=c.x2&&c.y1<=m&&m<=c.y2},bv=function(c,d){return os(c,d.x,d.y)},Cv=function(c,d){return os(c,d.x1,d.y1)&&os(c,d.x2,d.y2)},Nu=function(c,d,m,_,C,A,E){var Q,B=vf(C,A),P=C/2,q=A/2,me=_-q-E;if((Q=sl(c,d,m,_,m-P+B-E,me,m+P-B+E,me,!1)).length>0)return Q;var $e=m+P+E;if((Q=sl(c,d,m,_,$e,_-q+B-E,$e,_+q-B+E,!1)).length>0)return Q;var Gt=_+q+E;if((Q=sl(c,d,m,_,m-P+B-E,Gt,m+P-B+E,Gt,!1)).length>0)return Q;var dt,jt=m-P-E;if((Q=sl(c,d,m,_,jt,_-q+B-E,jt,_+q-B+E,!1)).length>0)return Q;var Qt=m-P+B,Ht=_-q+B;if((dt=Xf(c,d,m,_,Qt,Ht,B+E)).length>0&&dt[0]<=Qt&&dt[1]<=Ht)return[dt[0],dt[1]];var xn=m+P-B,sn=_-q+B;if((dt=Xf(c,d,m,_,xn,sn,B+E)).length>0&&dt[0]>=xn&&dt[1]<=sn)return[dt[0],dt[1]];var vn=m+P-B,Ln=_+q-B;if((dt=Xf(c,d,m,_,vn,Ln,B+E)).length>0&&dt[0]>=vn&&dt[1]>=Ln)return[dt[0],dt[1]];var Fn=m-P+B,ri=_+q-B;return(dt=Xf(c,d,m,_,Fn,ri,B+E)).length>0&&dt[0]<=Fn&&dt[1]>=ri?[dt[0],dt[1]]:[]},Xl=function(c,d,m,_,C,A,E){var B=E,P=Math.min(m,C),q=Math.max(m,C),Q=Math.min(_,A),fe=Math.max(_,A);return P-B<=c&&c<=q+B&&Q-B<=d&&d<=fe+B},z_=function(c,d,m,_,C,A,E,B,P){var q_x1=Math.min(m,E,C)-P,q_x2=Math.max(m,E,C)+P,q_y1=Math.min(_,B,A)-P,q_y2=Math.max(_,B,A)+P;return!(c<q_x1||c>q_x2||d<q_y1||d>q_y2)},Ly=function(c,d,m,_,C,A,E,B){var me=[];!function(c,d,m,_,C){var E,B,P,q,Q,fe,me,_e;0===c&&(c=1e-5),P=-27*(_/=c)+(d/=c)*(9*(m/=c)-d*d*2),E=(B=(3*m-d*d)/9)*B*B+(P/=54)*P,C[1]=0,me=d/3,E>0?(Q=(Q=P+Math.sqrt(E))<0?-Math.pow(-Q,1/3):Math.pow(Q,1/3),fe=(fe=P-Math.sqrt(E))<0?-Math.pow(-fe,1/3):Math.pow(fe,1/3),C[0]=-me+Q+fe,C[4]=C[2]=-(me+=(Q+fe)/2),me=Math.sqrt(3)*(-fe+Q)/2,C[3]=me,C[5]=-me):(C[5]=C[3]=0,0===E?(_e=P<0?-Math.pow(-P,1/3):Math.pow(P,1/3),C[0]=2*_e-me,C[4]=C[2]=-(_e+me)):(q=(B=-B)*B*B,q=Math.acos(P/Math.sqrt(q)),_e=2*Math.sqrt(B),C[0]=-me+_e*Math.cos(q/3),C[2]=-me+_e*Math.cos((q+2*Math.PI)/3),C[4]=-me+_e*Math.cos((q+4*Math.PI)/3)))}(1*m*m-4*m*C+2*m*E+4*C*C-4*C*E+E*E+_*_-4*_*A+2*_*B+4*A*A-4*A*B+B*B,9*m*C-3*m*m-3*m*E-6*C*C+3*C*E+9*_*A-3*_*_-3*_*B-6*A*A+3*A*B,3*m*m-6*m*C+m*E-m*c+2*C*C+2*C*c-E*c+3*_*_-6*_*A+_*B-_*d+2*A*A+2*A*d-B*d,1*m*C-m*m+m*c-C*c+_*A-_*_+_*d-A*d,me);for(var Pe=[],$e=0;$e<6;$e+=2)Math.abs(me[$e+1])<1e-7&&me[$e]>=0&&me[$e]<=1&&Pe.push(me[$e]);Pe.push(1),Pe.push(0);for(var ht,rt,St,Ke=-1,Gt=0;Gt<Pe.length;Gt++)ht=Math.pow(1-Pe[Gt],2)*m+2*(1-Pe[Gt])*Pe[Gt]*C+Pe[Gt]*Pe[Gt]*E,rt=Math.pow(1-Pe[Gt],2)*_+2*(1-Pe[Gt])*Pe[Gt]*A+Pe[Gt]*Pe[Gt]*B,St=Math.pow(ht-c,2)+Math.pow(rt-d,2),Ke>=0?St<Ke&&(Ke=St):Ke=St;return Ke},Dh=function(c,d,m,_,C,A){var E=[c-m,d-_],B=[C-m,A-_],P=B[0]*B[0]+B[1]*B[1],q=E[0]*E[0]+E[1]*E[1],Q=E[0]*B[0]+E[1]*B[1],fe=Q*Q/P;return Q<0?q:fe>P?(c-C)*(c-C)+(d-A)*(d-A):q-fe},Ma=function(c,d,m){for(var _,C,A,E,P=0,q=0;q<m.length/2;q++)if(C=m[2*q+1],q+1<m.length/2?(A=m[2*(q+1)],E=m[2*(q+1)+1]):(A=m[2*(q+1-m.length/2)],E=m[2*(q+1-m.length/2)+1]),(_=m[2*q])!=c||A!=c){if(!(_>=c&&c>=A||_<=c&&c<=A))continue;(c-_)/(A-_)*(E-C)+C>d&&P++}return P%2!=0},oo=function(c,d,m,_,C,A,E,B,P){var Q,Pe,q=new Array(m.length);null!=B[0]?(Q=Math.atan(B[1]/B[0]),B[0]<0?Q+=Math.PI/2:Q=-Q-Math.PI/2):Q=B;for(var fe=Math.cos(-Q),me=Math.sin(-Q),_e=0;_e<q.length/2;_e++)q[2*_e]=A/2*(m[2*_e]*fe-m[2*_e+1]*me),q[2*_e+1]=E/2*(m[2*_e+1]*fe+m[2*_e]*me),q[2*_e]+=_,q[2*_e+1]+=C;if(P>0){var $e=Fd(q,-P);Pe=Ry($e)}else Pe=q;return Ma(c,d,Pe)},Ry=function(c){for(var E,B,P,q,d=new Array(c.length/2),Q=0;Q<c.length/4;Q++){Q<c.length/4-1?(E=c[4*(Q+1)],B=c[4*(Q+1)+1],P=c[4*(Q+1)+2],q=c[4*(Q+1)+3]):(E=c[0],B=c[1],P=c[2],q=c[3]);var fe=sl(c[4*Q],c[4*Q+1],c[4*Q+2],c[4*Q+3],E,B,P,q,!0);d[2*Q]=fe[0],d[2*Q+1]=fe[1]}return d},Fd=function(c,d){for(var _,C,A,E,m=new Array(2*c.length),B=0;B<c.length/2;B++){B<c.length/2-1?(A=c[2*(B+1)],E=c[2*(B+1)+1]):(A=c[0],E=c[1]);var P=E-(C=c[2*B+1]),q=-(A-(_=c[2*B])),Q=Math.sqrt(P*P+q*q),fe=P/Q,me=q/Q;m[4*B]=_+fe*d,m[4*B+1]=C+me*d,m[4*B+2]=A+fe*d,m[4*B+3]=E+me*d}return m},Ka=function(c,d,m,_,C,A,E){return c-=C,d-=A,(c/=m/2+E)*c+(d/=_/2+E)*d<=1},Xf=function(c,d,m,_,C,A,E){var B=[m-c,_-d],P=[c-C,d-A],q=B[0]*B[0]+B[1]*B[1],Q=2*(P[0]*B[0]+P[1]*B[1]),me=Q*Q-4*q*(P[0]*P[0]+P[1]*P[1]-E*E);if(me<0)return[];var _e=(-Q+Math.sqrt(me))/(2*q),Pe=(-Q-Math.sqrt(me))/(2*q),$e=Math.min(_e,Pe),Ke=Math.max(_e,Pe),ht=[];if($e>=0&&$e<=1&&ht.push($e),Ke>=0&&Ke<=1&&ht.push(Ke),0===ht.length)return[];var rt=ht[0]*B[0]+c,St=ht[0]*B[1]+d;return ht.length>1?ht[0]==ht[1]?[rt,St]:[rt,St,ht[1]*B[0]+c,ht[1]*B[1]+d]:[rt,St]},Za=function(c,d,m){return d<=c&&c<=m||m<=c&&c<=d?c:c<=d&&d<=m||m<=d&&d<=c?d:m},sl=function(c,d,m,_,C,A,E,B,P){var q=c-C,Q=m-c,fe=E-C,me=d-A,_e=_-d,Pe=B-A,$e=fe*me-Pe*q,Ke=Q*me-_e*q,ht=Pe*Q-fe*_e;if(0!==ht){var rt=$e/ht,St=Ke/ht;return-.001<=rt&&rt<=1.001&&-.001<=St&&St<=1.001||P?[c+rt*Q,d+rt*_e]:[]}return 0===$e||0===Ke?Za(c,m,E)===E?[E,B]:Za(c,m,C)===C?[C,A]:Za(C,E,m)===m?[m,_]:[]:[]},hu=function(c,d,m,_,C,A,E,B){var q,me,P=[],Q=new Array(m.length),fe=!0;if(null==A&&(fe=!1),fe){for(var _e=0;_e<Q.length/2;_e++)Q[2*_e]=m[2*_e]*A+_,Q[2*_e+1]=m[2*_e+1]*E+C;if(B>0){var Pe=Fd(Q,-B);me=Ry(Pe)}else me=Q}else me=m;for(var ht,rt,St=0;St<me.length/2;St++)St<me.length/2-1?(ht=me[2*(St+1)],rt=me[2*(St+1)+1]):(ht=me[0],rt=me[1]),0!==(q=sl(c,d,_,C,me[2*St],me[2*St+1],ht,rt)).length&&P.push(q[0],q[1]);return P},Yf=function(c,d,m){var _=[c[0]-d[0],c[1]-d[1]],C=Math.sqrt(_[0]*_[0]+_[1]*_[1]),A=(C-m)/C;return A<0&&(A=1e-5),[d[0]+A*_[0],d[1]+A*_[1]]},_r=function(c,d){var m=Lh(c,d);return Da(m)},Da=function(c){for(var d,m,_=c.length/2,C=1/0,A=1/0,E=-1/0,B=-1/0,P=0;P<_;P++)d=c[2*P],m=c[2*P+1],C=Math.min(C,d),E=Math.max(E,d),A=Math.min(A,m),B=Math.max(B,m);for(var q=2/(E-C),Q=2/(B-A),fe=0;fe<_;fe++)d=c[2*fe]=c[2*fe]*q,m=c[2*fe+1]=c[2*fe+1]*Q,C=Math.min(C,d),E=Math.max(E,d),A=Math.min(A,m),B=Math.max(B,m);if(A<-1)for(var me=0;me<_;me++)m=c[2*me+1]=c[2*me+1]+(-1-A);return c},Lh=function(c,d){var m=1/c*2*Math.PI,_=c%2==0?Math.PI/2+m/2:Math.PI/2;_+=d;for(var A,C=new Array(2*c),E=0;E<c;E++)A=E*m+_,C[2*E]=Math.cos(A),C[2*E+1]=Math.sin(-A);return C},vf=function(c,d){return Math.min(c/4,d/4,8)},Or=function(c,d){return Math.min(c/10,d/10,8)},Yr=function(c,d){return{heightOffset:Math.min(15,.05*d),widthOffset:Math.min(100,.25*c),ctrlPtOffsetPct:.05}},du=oi({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(c){return 1}}),Zo={pageRank:function(c){for(var d=du(c),m=d.dampingFactor,_=d.precision,C=d.iterations,A=d.weight,E=this._private.cy,B=this.byGroup(),P=B.nodes,q=B.edges,Q=P.length,me=q.length,_e=new Array(Q*Q),Pe=new Array(Q),$e=(1-m)/Q,Ke=0;Ke<Q;Ke++){for(var ht=0;ht<Q;ht++)_e[Ke*Q+ht]=0;Pe[Ke]=0}for(var St=0;St<me;St++){var Gt=q[St],Wt=Gt.data("source"),Tt=Gt.data("target");if(Wt!==Tt){var jt=P.indexOfId(Wt),Pt=P.indexOfId(Tt),Zt=A(Gt);_e[Pt*Q+jt]+=Zt,Pe[jt]+=Zt}}for(var dt=1/Q+$e,Qt=0;Qt<Q;Qt++)if(0===Pe[Qt])for(var Ht=0;Ht<Q;Ht++)_e[Ht*Q+Qt]=dt;else for(var sn=0;sn<Q;sn++){var vn=sn*Q+Qt;_e[vn]=_e[vn]/Pe[Qt]+$e}for(var ri,Ln=new Array(Q),Fn=new Array(Q),Rn=0;Rn<Q;Rn++)Ln[Rn]=1;for(var ei=0;ei<C;ei++){for(var di=0;di<Q;di++)Fn[di]=0;for(var Ii=0;Ii<Q;Ii++)for(var vi=0;vi<Q;vi++)Fn[Ii]+=_e[Ii*Q+vi]*Ln[vi];N_(Fn),ri=Ln,Ln=Fn,Fn=ri;for(var kn=0,li=0;li<Q;li++){var Ei=ri[li]-Ln[li];kn+=Ei*Ei}if(kn<_)break}return{rank:function(Wr){return Wr=E.collection(Wr)[0],Ln[P.indexOf(Wr)]}}}},Ol=oi({root:null,weight:function(c){return 1},directed:!1,alpha:0}),La={degreeCentralityNormalized:function(c){c=Ol(c);var d=this.cy(),m=this.nodes(),_=m.length;if(c.directed){for(var q={},Q={},fe=0,me=0,_e=0;_e<_;_e++){var Pe=m[_e],$e=Pe.id();c.root=Pe;var Ke=this.degreeCentrality(c);fe<Ke.indegree&&(fe=Ke.indegree),me<Ke.outdegree&&(me=Ke.outdegree),q[$e]=Ke.indegree,Q[$e]=Ke.outdegree}return{indegree:function(rt){return 0==fe?0:(ke(rt)&&(rt=d.filter(rt)),q[rt.id()]/fe)},outdegree:function(rt){return 0===me?0:(ke(rt)&&(rt=d.filter(rt)),Q[rt.id()]/me)}}}for(var C={},A=0,E=0;E<_;E++){var B=m[E];c.root=B;var P=this.degreeCentrality(c);A<P.degree&&(A=P.degree),C[B.id()]=P.degree}return{degree:function(rt){return 0===A?0:(ke(rt)&&(rt=d.filter(rt)),C[rt.id()]/A)}}},degreeCentrality:function(c){c=Ol(c);var d=this.cy(),m=this,C=c.root,A=c.weight,E=c.directed,B=c.alpha;if(C=d.collection(C)[0],E){for(var me=C.connectedEdges(),_e=me.filter(function(Wt){return Wt.target().same(C)&&m.has(Wt)}),Pe=me.filter(function(Wt){return Wt.source().same(C)&&m.has(Wt)}),$e=_e.length,Ke=Pe.length,ht=0,rt=0,St=0;St<_e.length;St++)ht+=A(_e[St]);for(var Gt=0;Gt<Pe.length;Gt++)rt+=A(Pe[Gt]);return{indegree:Math.pow($e,1-B)*Math.pow(ht,B),outdegree:Math.pow(Ke,1-B)*Math.pow(rt,B)}}for(var P=C.connectedEdges().intersection(m),q=P.length,Q=0,fe=0;fe<P.length;fe++)Q+=A(P[fe]);return{degree:Math.pow(q,1-B)*Math.pow(Q,B)}}};La.dc=La.degreeCentrality,La.dcn=La.degreeCentralityNormalised=La.degreeCentralityNormalized;var fu=oi({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Yl={closenessCentralityNormalized:function(c){for(var d=fu(c),m=d.harmonic,_=d.weight,C=d.directed,A=this.cy(),E={},B=0,P=this.nodes(),q=this.floydWarshall({weight:_,directed:C}),Q=0;Q<P.length;Q++){for(var fe=0,me=P[Q],_e=0;_e<P.length;_e++)if(Q!==_e){var Pe=q.distance(me,P[_e]);fe+=m?1/Pe:Pe}m||(fe=1/fe),B<fe&&(B=fe),E[me.id()]=fe}return{closeness:function(Ke){return 0==B?0:(Ke=ke(Ke)?A.filter(Ke)[0].id():Ke.id(),E[Ke]/B)}}},closenessCentrality:function(c){var d=fu(c),m=d.root,_=d.weight,C=d.directed,A=d.harmonic;m=this.filter(m)[0];for(var E=this.dijkstra({root:m,weight:_,directed:C}),B=0,P=this.nodes(),q=0;q<P.length;q++){var Q=P[q];if(!Q.same(m)){var fe=E.distanceTo(Q);B+=A?1/fe:fe}}return A?B:1/B}};Yl.cc=Yl.closenessCentrality,Yl.ccn=Yl.closenessCentralityNormalised=Yl.closenessCentralityNormalized;var Ir=oi({weight:null,directed:!1}),Ts={betweennessCentrality:function(c){for(var d=Ir(c),m=d.directed,_=d.weight,C=null!=_,A=this.cy(),E=this.nodes(),B={},P={},q=0,Q={set:function(rt,St){P[rt]=St,St>q&&(q=St)},get:function(rt){return P[rt]}},fe=0;fe<E.length;fe++){var me=E[fe],_e=me.id();B[_e]=m?me.outgoers().nodes():me.openNeighborhood().nodes(),Q.set(_e,0)}for(var Pe=function(rt){for(var St=E[rt].id(),Gt=[],Wt={},Tt={},jt={},Pt=new j.default(function(vi,pi){return jt[vi]-jt[pi]}),Zt=0;Zt<E.length;Zt++){var Kt=E[Zt].id();Wt[Kt]=[],Tt[Kt]=0,jt[Kt]=1/0}for(Tt[St]=1,jt[St]=0,Pt.push(St);!Pt.empty();){var dt=Pt.pop();if(Gt.push(dt),C)for(var Qt=0;Qt<B[dt].length;Qt++){var sn,Ht=B[dt][Qt],xn=A.getElementById(dt);sn=xn.edgesTo(Ht).length>0?xn.edgesTo(Ht)[0]:Ht.edgesTo(xn)[0];var vn=_(sn);Ht=Ht.id(),jt[Ht]>jt[dt]+vn&&(jt[Ht]=jt[dt]+vn,Pt.nodes.indexOf(Ht)<0?Pt.push(Ht):Pt.updateItem(Ht),Tt[Ht]=0,Wt[Ht]=[]),jt[Ht]==jt[dt]+vn&&(Tt[Ht]=Tt[Ht]+Tt[dt],Wt[Ht].push(dt))}else for(var Ln=0;Ln<B[dt].length;Ln++){var Fn=B[dt][Ln].id();jt[Fn]==1/0&&(Pt.push(Fn),jt[Fn]=jt[dt]+1),jt[Fn]==jt[dt]+1&&(Tt[Fn]=Tt[Fn]+Tt[dt],Wt[Fn].push(dt))}}for(var ri={},Rn=0;Rn<E.length;Rn++)ri[E[Rn].id()]=0;for(;Gt.length>0;){for(var ei=Gt.pop(),di=0;di<Wt[ei].length;di++){var Ii=Wt[ei][di];ri[Ii]=ri[Ii]+Tt[Ii]/Tt[ei]*(1+ri[ei])}ei!=E[rt].id()&&Q.set(ei,Q.get(ei)+ri[ei])}},$e=0;$e<E.length;$e++)Pe($e);var Ke={betweenness:function(rt){var St=A.collection(rt).id();return Q.get(St)},betweennessNormalized:function(rt){if(0==q)return 0;var St=A.collection(rt).id();return Q.get(St)/q}};return Ke.betweennessNormalised=Ke.betweennessNormalized,Ke}};Ts.bc=Ts.betweennessCentrality;var va=oi({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(f){return 1}]}),Kf=function(c,d){for(var m=0,_=0;_<d.length;_++)m+=d[_](c);return m},od=function(c,d){for(var m,_=0;_<d;_++){m=0;for(var C=0;C<d;C++)m+=c[C*d+_];for(var A=0;A<d;A++)c[A*d+_]=c[A*d+_]/m}},ol=function(c,d,m){for(var _=new Array(m*m),C=0;C<m;C++){for(var A=0;A<m;A++)_[C*m+A]=0;for(var E=0;E<m;E++)for(var B=0;B<m;B++)_[C*m+B]+=c[C*m+E]*d[E*m+B]}return _},Hp=function(c,d,m){for(var _=c.slice(0),C=1;C<m;C++)c=ol(c,_,d);return c},Kl=function(c,d,m){for(var _=new Array(d*d),C=0;C<d*d;C++)_[C]=Math.pow(c[C],m);return od(_,d),_},js=function(c,d,m,_){for(var C=0;C<m;C++)if(Math.round(c[C]*Math.pow(10,_))/Math.pow(10,_)!=Math.round(d[C]*Math.pow(10,_))/Math.pow(10,_))return!1;return!0},Zf=function(c,d){for(var m=0;m<c.length;m++)if(!d[m]||c[m].id()!==d[m].id())return!1;return!0},_f=function(c){for(var d=this.nodes(),m=this.edges(),_=this.cy(),C=function(c){return va(c)}(c),A={},E=0;E<d.length;E++)A[d[E].id()]=E;for(var Q,B=d.length,P=B*B,q=new Array(P),fe=0;fe<P;fe++)q[fe]=0;for(var me=0;me<m.length;me++){var _e=m[me],Pe=A[_e.source().id()],$e=A[_e.target().id()],Ke=Kf(_e,C.attributes);q[Pe*B+$e]+=Ke,q[$e*B+Pe]+=Ke}(function(c,d,m){for(var _=0;_<d;_++)c[_*d+_]=m})(q,B,C.multFactor),od(q,B);for(var ht=!0,rt=0;ht&&rt<C.maxIterations;)ht=!1,Q=Hp(q,B,C.expandFactor),q=Kl(Q,B,C.inflateFactor),js(q,Q,P,4)||(ht=!0),rt++;var St=function(c,d,m,_){for(var C=[],A=0;A<d;A++){for(var E=[],B=0;B<d;B++)Math.round(1e3*c[A*d+B])/1e3>0&&E.push(m[B]);0!==E.length&&C.push(_.collection(E))}return C}(q,B,d,_);return St=function(c){for(var d=0;d<c.length;d++)for(var m=0;m<c.length;m++)d!=m&&Zf(c[d],c[m])&&c.splice(m,1);return c}(St),St},Dc={markovClustering:_f,mcl:_f},Pg=function(c){return c},Qf=function(c,d){return Math.abs(d-c)},lh=function(c,d,m){return c+Qf(d,m)},ch=function(c,d,m){return c+Math.pow(m-d,2)},ky=function(c){return Math.sqrt(c)},ya=function(c,d,m){return Math.max(c,Qf(d,m))},Jf=function(c,d,m,_,C){for(var A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pg,E=_,q=0;q<c;q++)E=C(E,d(q),m(q));return A(E)},ep={euclidean:function(c,d,m){return c>=2?Jf(c,d,m,0,ch,ky):Jf(c,d,m,0,lh)},squaredEuclidean:function(c,d,m){return Jf(c,d,m,0,ch)},manhattan:function(c,d,m){return Jf(c,d,m,0,lh)},max:function(c,d,m){return Jf(c,d,m,-1/0,ya)}};function gu(f,c,d,m,_,C){var A;return A=qe(f)?f:ep[f]||ep.euclidean,0===c&&qe(f)?A(_,C):A(c,d,m,_,C)}ep["squared-euclidean"]=ep.squaredEuclidean,ep.squaredeuclidean=ep.squaredEuclidean;var Gp=oi({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),tp=function(c){return Gp(c)},np=function(c,d,m,_,C){var E="kMedoids"!==C?function(Q){return m[Q]}:function(Q){return _[Q](m)};return gu(c,_.length,E,function(fe){return _[fe](d)},m,d)},Nd=function(c,d,m){for(var _=m.length,C=new Array(_),A=new Array(_),E=new Array(d),B=null,P=0;P<_;P++)C[P]=c.min(m[P]).value,A[P]=c.max(m[P]).value;for(var q=0;q<d;q++){B=[];for(var Q=0;Q<_;Q++)B[Q]=Math.random()*(A[Q]-C[Q])+C[Q];E[q]=B}return E},al=function(c,d,m,_,C){for(var A=1/0,E=0,B=0;B<d.length;B++){var P=np(m,c,d[B],_,C);P<A&&(A=P,E=B)}return E},uh=function(c,d,m){for(var _=[],C=null,A=0;A<d.length;A++)m[(C=d[A]).id()]===c&&_.push(C);return _},Jc=function(c,d,m){return Math.abs(d-c)<=m},Rh=function(c,d,m){for(var _=0;_<c.length;_++)for(var C=0;C<c[_].length;C++)if(Math.abs(c[_][C]-d[_][C])>m)return!1;return!0},wv=function(c,d,m){for(var _=0;_<m;_++)if(c===d[_])return!0;return!1},kg=function(c,d){var m=new Array(d);if(c.length<50)for(var _=0;_<d;_++){for(var C=c[Math.floor(Math.random()*c.length)];wv(C,m,_);)C=c[Math.floor(Math.random()*c.length)];m[_]=C}else for(var A=0;A<d;A++)m[A]=c[Math.floor(Math.random()*c.length)];return m},Og=function(c,d,m){for(var _=0,C=0;C<d.length;C++)_+=np("manhattan",d[C],c,m,"kMedoids");return _},En=function(c,d,m,_,C){for(var A,E,B=0;B<d.length;B++)for(var P=0;P<c.length;P++)_[B][P]=Math.pow(m[B][P],C.m);for(var q=0;q<c.length;q++)for(var Q=0;Q<C.attributes.length;Q++){A=0,E=0;for(var fe=0;fe<d.length;fe++)A+=_[fe][q]*C.attributes[Q](d[fe]),E+=_[fe][q];c[q][Q]=A/E}},ui=function(c,d,m,_,C){for(var A=0;A<c.length;A++)d[A]=c[A].slice();for(var E,B,P,q=2/(C.m-1),Q=0;Q<m.length;Q++)for(var fe=0;fe<_.length;fe++){E=0;for(var me=0;me<m.length;me++)B=np(C.distance,_[fe],m[Q],C.attributes,"cmeans"),P=np(C.distance,_[fe],m[me],C.attributes,"cmeans"),E+=Math.pow(B/P,q);c[fe][Q]=1/E}},Nr=function(c){var C,A,E,B,P,d=this.cy(),m=this.nodes(),_=tp(c);B=new Array(m.length);for(var q=0;q<m.length;q++)B[q]=new Array(_.k);E=new Array(m.length);for(var Q=0;Q<m.length;Q++)E[Q]=new Array(_.k);for(var fe=0;fe<m.length;fe++){for(var me=0,_e=0;_e<_.k;_e++)E[fe][_e]=Math.random(),me+=E[fe][_e];for(var Pe=0;Pe<_.k;Pe++)E[fe][Pe]=E[fe][Pe]/me}A=new Array(_.k);for(var $e=0;$e<_.k;$e++)A[$e]=new Array(_.attributes.length);P=new Array(m.length);for(var Ke=0;Ke<m.length;Ke++)P[Ke]=new Array(_.k);for(var ht=!0,rt=0;ht&&rt<_.maxIterations;)ht=!1,En(A,m,E,P,_),ui(E,B,A,m,_),Rh(E,B,_.sensitivityThreshold)||(ht=!0),rt++;return C=function(c,d,m,_){for(var C=new Array(m.k),A=0;A<C.length;A++)C[A]=[];for(var E,B,P=0;P<d.length;P++){E=-1/0,B=-1;for(var q=0;q<d[0].length;q++)d[P][q]>E&&(E=d[P][q],B=q);C[B].push(c[P])}for(var Q=0;Q<C.length;Q++)C[Q]=_.collection(C[Q]);return C}(m,E,_,d),{clusters:C,degreeOfMembership:E}},Us={kMeans:function(c){var B,d=this.cy(),m=this.nodes(),_=null,C=tp(c),A=new Array(C.k),E={};B=C.testMode?"number"==typeof C.testCentroids?Nd(m,C.k,C.attributes):"object"===ie(C.testCentroids)?C.testCentroids:Nd(m,C.k,C.attributes):Nd(m,C.k,C.attributes);for(var P=!0,q=0;P&&q<C.maxIterations;){for(var Q=0;Q<m.length;Q++)E[(_=m[Q]).id()]=al(_,B,C.distance,C.attributes,"kMeans");P=!1;for(var fe=0;fe<C.k;fe++){var me=uh(fe,m,E);if(0!==me.length){for(var _e=C.attributes.length,Pe=B[fe],$e=new Array(_e),Ke=new Array(_e),ht=0;ht<_e;ht++){Ke[ht]=0;for(var rt=0;rt<me.length;rt++)Ke[ht]+=C.attributes[ht](_=me[rt]);$e[ht]=Ke[ht]/me.length,Jc($e[ht],Pe[ht],C.sensitivityThreshold)||(P=!0)}B[fe]=$e,A[fe]=d.collection(me)}}q++}return A},kMedoids:function(c){var E,P,d=this.cy(),m=this.nodes(),_=null,C=tp(c),A=new Array(C.k),B={},q=new Array(C.k);C.testMode?"number"==typeof C.testCentroids||(E="object"===ie(C.testCentroids)?C.testCentroids:kg(m,C.k)):E=kg(m,C.k);for(var Q=!0,fe=0;Q&&fe<C.maxIterations;){for(var me=0;me<m.length;me++)B[(_=m[me]).id()]=al(_,E,C.distance,C.attributes,"kMedoids");Q=!1;for(var _e=0;_e<E.length;_e++){var Pe=uh(_e,m,B);if(0!==Pe.length){q[_e]=Og(E[_e],Pe,C.attributes);for(var $e=0;$e<Pe.length;$e++)(P=Og(Pe[$e],Pe,C.attributes))<q[_e]&&(q[_e]=P,E[_e]=Pe[$e],Q=!0);A[_e]=d.collection(Pe)}}fe++}return A},fuzzyCMeans:Nr,fcm:Nr},Qo=oi({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Zl={single:"min",complete:"max"},Av=function(c,d,m,_,C){for(var B,A=0,E=1/0,P=C.attributes,q=function(Pt,Zt){return gu(C.distance,P.length,function(Kt){return P[Kt](Pt)},function(Kt){return P[Kt](Zt)},Pt,Zt)},Q=0;Q<c.length;Q++){var fe=c[Q].key,me=m[fe][_[fe]];me<E&&(A=fe,E=me)}if("threshold"===C.mode&&E>=C.threshold||"dendrogram"===C.mode&&1===c.length)return!1;var $e,_e=d[A],Pe=d[_[A]];$e="dendrogram"===C.mode?{left:_e,right:Pe,key:_e.key}:{value:_e.value.concat(Pe.value),key:_e.key},c[_e.index]=$e,c.splice(Pe.index,1),d[_e.key]=$e;for(var Ke=0;Ke<c.length;Ke++){var ht=c[Ke];_e.key===ht.key?B=1/0:"min"===C.linkage?(B=m[_e.key][ht.key],m[_e.key][ht.key]>m[Pe.key][ht.key]&&(B=m[Pe.key][ht.key])):"max"===C.linkage?(B=m[_e.key][ht.key],m[_e.key][ht.key]<m[Pe.key][ht.key]&&(B=m[Pe.key][ht.key])):B="mean"===C.linkage?(m[_e.key][ht.key]*_e.size+m[Pe.key][ht.key]*Pe.size)/(_e.size+Pe.size):"dendrogram"===C.mode?q(ht.value,_e.value):q(ht.value[0],_e.value[0]),m[_e.key][ht.key]=m[ht.key][_e.key]=B}for(var rt=0;rt<c.length;rt++){var St=c[rt].key;if(_[St]===_e.key||_[St]===Pe.key){for(var Gt=St,Wt=0;Wt<c.length;Wt++){var Tt=c[Wt].key;m[St][Tt]<m[St][Gt]&&(Gt=Tt)}_[St]=Gt}c[rt].index=rt}return _e.key=Pe.key=_e.index=Pe.index=null,!0},xv=function f(c,d,m){!c||(c.value?d.push(c.value):(c.left&&f(c.left,d),c.right&&f(c.right,d)))},kh=function f(c,d){if(!c)return"";if(c.left&&c.right){var m=f(c.left,d),_=f(c.right,d),C=d.add({group:"nodes",data:{id:m+","+_}});return d.add({group:"edges",data:{source:m,target:C.id()}}),d.add({group:"edges",data:{source:_,target:C.id()}}),C.id()}return c.value?c.value.id():void 0},Iv=function f(c,d,m){if(!c)return[];var _=[],C=[],A=[];return 0===d?(c.left&&xv(c.left,_),c.right&&xv(c.right,C),A=_.concat(C),[m.collection(A)]):1===d?c.value?[m.collection(c.value)]:(c.left&&xv(c.left,_),c.right&&xv(c.right,C),[m.collection(_),m.collection(C)]):c.value?[m.collection(c.value)]:(c.left&&(_=f(c.left,d-1,m)),c.right&&(C=f(c.right,d-1,m)),_.concat(C))},U_=function(c){for(var d=this.cy(),m=this.nodes(),_=function(c){var d=Qo(c),m=Zl[d.linkage];return null!=m&&(d.linkage=m),d}(c),C=_.attributes,A=function(rt,St){return gu(_.distance,C.length,function(Gt){return C[Gt](rt)},function(Gt){return C[Gt](St)},rt,St)},E=[],B=[],P=[],q=[],Q=0;Q<m.length;Q++){var fe={value:"dendrogram"===_.mode?m[Q]:[m[Q]],key:Q,index:Q};E[Q]=fe,q[Q]=fe,B[Q]=[],P[Q]=0}for(var me=0;me<E.length;me++)for(var _e=0;_e<=me;_e++){var Pe;Pe="dendrogram"===_.mode?me===_e?1/0:A(E[me].value,E[_e].value):me===_e?1/0:A(E[me].value[0],E[_e].value[0]),B[me][_e]=Pe,B[_e][me]=Pe,Pe<B[me][P[me]]&&(P[me]=_e)}for(var $e=Av(E,q,B,P,_);$e;)$e=Av(E,q,B,P,_);var Ke;return"dendrogram"===_.mode?(Ke=Iv(E[0],_.dendrogramDepth,d),_.addDendrogram&&kh(E[0],d)):(Ke=new Array(E.length),E.forEach(function(ht,rt){ht.key=ht.index=null,Ke[rt]=d.collection(ht.value)})),Ke},Fg={hierarchicalClustering:U_,hca:U_},Sv=oi({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ra=function(c,d,m,_){var C=function(E,B){return _[B](E)};return-gu(c,_.length,function(A){return C(d,A)},function(A){return C(m,A)},d,m)},Tm=function(c,d,m){for(var _=[],C=0;C<c;C++){for(var A=-1,E=-1/0,B=0;B<m.length;B++){var P=m[B];d[C*c+P]>E&&(A=P,E=d[C*c+P])}A>0&&_.push(A)}for(var q=0;q<m.length;q++)_[m[q]]=m[q];return _},H_=function(c){for(var d=this.cy(),m=this.nodes(),_=function(c){var d=c.damping,m=c.preference;.5<=d&&d<1||mt("Damping must range on [0.5, 1).  Got: ".concat(d));var _=["median","mean","min","max"];return _.some(function(C){return C===m})||Be(m)||mt("Preference must be one of [".concat(_.map(function(C){return"'".concat(C,"'")}).join(", "),"] or a number.  Got: ").concat(m)),Sv(c)}(c),C={},A=0;A<m.length;A++)C[m[A].id()]=A;var E,B,P,q,Q,fe,Pt;B=(E=m.length)*E,P=new Array(B);for(var me=0;me<B;me++)P[me]=-1/0;for(var _e=0;_e<E;_e++)for(var Pe=0;Pe<E;Pe++)_e!==Pe&&(P[_e*E+Pe]=ra(_.distance,m[_e],m[Pe],_.attributes));q=function(c,d){var m;return m="median"===d?function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,C=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],A=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(m<c.length&&c.splice(m,c.length-m),d>0&&c.splice(0,d)):c=c.slice(d,m);for(var E=0,B=c.length-1;B>=0;B--)A?isFinite(c[B])||(c[B]=-1/0,E++):c.splice(B,1);C&&c.sort(function(fe,me){return fe-me});var q=c.length,Q=Math.floor(q/2);return q%2!=0?c[Q+1+E]:(c[Q-1+E]+c[Q+E])/2}(c):"mean"===d?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=0,C=0,A=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;A<m;A++){var E=c[A];isFinite(E)&&(_+=E,C++)}return _/C}(c):"min"===d?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=1/0,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;C<m;C++){var A=c[C];isFinite(A)&&(_=Math.min(A,_))}return _}(c):"max"===d?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=-1/0,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;C<m;C++){var A=c[C];isFinite(A)&&(_=Math.max(A,_))}return _}(c):d,m}(P,_.preference);for(var $e=0;$e<E;$e++)P[$e*E+$e]=q;Q=new Array(B);for(var Ke=0;Ke<B;Ke++)Q[Ke]=0;fe=new Array(B);for(var ht=0;ht<B;ht++)fe[ht]=0;for(var rt=new Array(E),St=new Array(E),Gt=new Array(E),Wt=0;Wt<E;Wt++)rt[Wt]=0,St[Wt]=0,Gt[Wt]=0;for(var Tt=new Array(E*_.minIterations),jt=0;jt<Tt.length;jt++)Tt[jt]=0;for(Pt=0;Pt<_.maxIterations;Pt++){for(var Zt=0;Zt<E;Zt++){for(var Kt=-1/0,dt=-1/0,Qt=-1,Ht=0,xn=0;xn<E;xn++)rt[xn]=Q[Zt*E+xn],(Ht=fe[Zt*E+xn]+P[Zt*E+xn])>=Kt?(dt=Kt,Kt=Ht,Qt=xn):Ht>dt&&(dt=Ht);for(var sn=0;sn<E;sn++)Q[Zt*E+sn]=(1-_.damping)*(P[Zt*E+sn]-Kt)+_.damping*rt[sn];Q[Zt*E+Qt]=(1-_.damping)*(P[Zt*E+Qt]-dt)+_.damping*rt[Qt]}for(var vn=0;vn<E;vn++){for(var Ln=0,Fn=0;Fn<E;Fn++)rt[Fn]=fe[Fn*E+vn],St[Fn]=Math.max(0,Q[Fn*E+vn]),Ln+=St[Fn];Ln-=St[vn],St[vn]=Q[vn*E+vn],Ln+=St[vn];for(var ri=0;ri<E;ri++)fe[ri*E+vn]=(1-_.damping)*Math.min(0,Ln-St[ri])+_.damping*rt[ri];fe[vn*E+vn]=(1-_.damping)*(Ln-St[vn])+_.damping*rt[vn]}for(var Rn=0,ei=0;ei<E;ei++){var di=fe[ei*E+ei]+Q[ei*E+ei]>0?1:0;Tt[Pt%_.minIterations*E+ei]=di,Rn+=di}if(Rn>0&&(Pt>=_.minIterations-1||Pt==_.maxIterations-1)){for(var Ii=0,vi=0;vi<E;vi++){Gt[vi]=0;for(var pi=0;pi<_.minIterations;pi++)Gt[vi]+=Tt[pi*E+vi];(0===Gt[vi]||Gt[vi]===_.minIterations)&&Ii++}if(Ii===E)break}}for(var kn=function(c,d,m){for(var _=[],C=0;C<c;C++)d[C*c+C]+m[C*c+C]>0&&_.push(C);return _}(E,Q,fe),li=function(c,d,m){for(var _=Tm(c,d,m),C=0;C<m.length;C++){for(var A=[],E=0;E<_.length;E++)_[E]===m[C]&&A.push(E);for(var B=-1,P=-1/0,q=0;q<A.length;q++){for(var Q=0,fe=0;fe<A.length;fe++)Q+=d[A[fe]*c+A[q]];Q>P&&(B=q,P=Q)}m[C]=A[B]}return Tm(c,d,m)}(E,P,kn),Ei={},Qi=0;Qi<kn.length;Qi++)Ei[kn[Qi]]=[];for(var lr=0;lr<m.length;lr++){var Jr=li[C[m[lr].id()]];null!=Jr&&Ei[Jr].push(m[lr])}for(var mr=new Array(kn.length),or=0;or<kn.length;or++)mr[or]=d.collection(Ei[kn[or]]);return mr},ip={affinityPropagation:H_,ap:H_},Mm=oi({root:void 0,directed:!1}),da={hierholzer:function(c){if(!yt(c)){var d=arguments;c={root:d[0],directed:d[1]}}var B,P,q,m=Mm(c),_=m.root,C=m.directed,A=this,E=!1;_&&(q=ke(_)?this.filter(_)[0].id():_[0].id());var Q={},fe={};A.forEach(C?function(ht){var rt=ht.id();if(ht.isNode()){var St=ht.indegree(!0),Gt=ht.outdegree(!0),Wt=St-Gt,Tt=Gt-St;1==Wt?B?E=!0:B=rt:1==Tt?P?E=!0:P=rt:(Tt>1||Wt>1)&&(E=!0),Q[rt]=[],ht.outgoers().forEach(function(jt){jt.isEdge()&&Q[rt].push(jt.id())})}else fe[rt]=[void 0,ht.target().id()]}:function(ht){var rt=ht.id();ht.isNode()?(ht.degree(!0)%2&&(B?P?E=!0:P=rt:B=rt),Q[rt]=[],ht.connectedEdges().forEach(function(Gt){return Q[rt].push(Gt.id())})):fe[rt]=[ht.source().id(),ht.target().id()]});var me={found:!1,trail:void 0};if(E)return me;if(P&&B)if(C){if(q&&P!=q)return me;q=P}else{if(q&&P!=q&&B!=q)return me;q||(q=P)}else q||(q=A[0].id());var _e=function(rt){for(var Wt,Tt,jt,St=rt,Gt=[rt];Q[St].length;)Wt=Q[St].shift(),Tt=fe[Wt][0],St!=(jt=fe[Wt][1])?(Q[jt]=Q[jt].filter(function(Pt){return Pt!=Wt}),St=jt):!C&&St!=Tt&&(Q[Tt]=Q[Tt].filter(function(Pt){return Pt!=Wt}),St=Tt),Gt.unshift(Wt),Gt.unshift(St);return Gt},Pe=[],$e=[];for($e=_e(q);1!=$e.length;)0==Q[$e[0]].length?(Pe.unshift(A.getElementById($e.shift())),Pe.unshift(A.getElementById($e.shift()))):$e=_e($e.shift()).concat($e);for(var Ke in Pe.unshift(A.getElementById($e.shift())),Q)if(Q[Ke].length)return me;return me.found=!0,me.trail=this.spawn(Pe,!0),me}},bf=function(){var c=this,d={},m=0,_=0,C=[],A=[],E={},P=function Q(fe,me,_e){fe===_e&&(_+=1),d[me]={id:m,low:m++,cutVertex:!1};var $e,Ke,ht,rt,Pe=c.getElementById(me).connectedEdges().intersection(c);0===Pe.size()?C.push(c.spawn(c.getElementById(me))):Pe.forEach(function(St){$e=St.source().id(),Ke=St.target().id(),(ht=$e===me?Ke:$e)!==_e&&(rt=St.id(),E[rt]||(E[rt]=!0,A.push({x:me,y:ht,edge:St})),ht in d?d[me].low=Math.min(d[me].low,d[ht].id):(Q(fe,ht,me),d[me].low=Math.min(d[me].low,d[ht].low),d[me].id<=d[ht].low&&(d[me].cutVertex=!0,function(fe,me){for(var _e=A.length-1,Pe=[],$e=c.spawn();A[_e].x!=fe||A[_e].y!=me;)Pe.push(A.pop().edge),_e--;Pe.push(A.pop().edge),Pe.forEach(function(Ke){var ht=Ke.connectedNodes().intersection(c);$e.merge(Ke),ht.forEach(function(rt){var St=rt.id(),Gt=rt.connectedEdges().intersection(c);$e.merge(rt),$e.merge(d[St].cutVertex?Gt.filter(function(Wt){return Wt.isLoop()}):Gt)})}),C.push($e)}(me,ht))))})};c.forEach(function(Q){if(Q.isNode()){var fe=Q.id();fe in d||(_=0,P(fe,fe),d[fe].cutVertex=_>1)}});var q=Object.keys(d).filter(function(Q){return d[Q].cutVertex}).map(function(Q){return c.getElementById(Q)});return{cut:c.spawn(q),components:C}},rp=function(){var c=this,d={},m=0,_=[],C=[],A=c.spawn(c),E=function B(P){if(C.push(P),d[P]={index:m,low:m++,explored:!1},c.getElementById(P).connectedEdges().intersection(c).forEach(function(Pe){var $e=Pe.target().id();$e!==P&&($e in d||B($e),d[$e].explored||(d[P].low=Math.min(d[P].low,d[$e].low)))}),d[P].index===d[P].low){for(var Q=c.spawn();;){var fe=C.pop();if(Q.merge(c.getElementById(fe)),d[fe].low=d[P].index,d[fe].explored=!0,fe===P)break}var me=Q.edgesWith(Q),_e=Q.merge(me);_.push(_e),A=A.difference(_e)}};return c.forEach(function(B){if(B.isNode()){var P=B.id();P in d||E(P)}}),{cut:A,components:_}},Dm={};[hs,Dg,Vp,Lg,To,yv,My,Zo,La,Yl,Ts,Dc,Us,Fg,ip,da,{hopcroftTarjanBiconnected:bf,htbc:bf,htb:bf,hopcroftTarjanBiconnectedComponents:bf},{tarjanStronglyConnected:rp,tsc:rp,tscc:rp,tarjanStronglyConnectedComponents:rp}].forEach(function(f){tr(Dm,f)});var ba=function f(c){if(!(this instanceof f))return new f(c);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof c&&c.call(this,this.fulfill.bind(this),this.reject.bind(this))};ba.prototype={fulfill:function(c){return sp(this,1,"fulfillValue",c)},reject:function(c){return sp(this,2,"rejectReason",c)},then:function(c,d){var m=this,_=new ba;return m.onFulfilled.push(By(c,_,"fulfill")),m.onRejected.push(By(d,_,"reject")),Ny(m),_.proxy}};var sp=function(c,d,m,_){return 0===c.state&&(c.state=d,c[m]=_,Ny(c)),c},Ny=function(c){1===c.state?Lm(c,"onFulfilled",c.fulfillValue):2===c.state&&Lm(c,"onRejected",c.rejectReason)},Lm=function(c,d,m){if(0!==c[d].length){var _=c[d];c[d]=[];var C=function(){for(var E=0;E<_.length;E++)_[E](m)};"function"==typeof setImmediate?setImmediate(C):setTimeout(C,0)}},By=function(c,d,m){return function(_){if("function"!=typeof c)d[m].call(d,_);else{var C;try{C=c(_)}catch(A){return void d.reject(A)}Mv(d,C)}}},Mv=function f(c,d){if(c!==d&&c.proxy!==d){var m;if("object"===ie(d)&&null!==d||"function"==typeof d)try{m=d.then}catch(C){return void c.reject(C)}if("function"!=typeof m)c.fulfill(d);else{var _=!1;try{m.call(d,function(C){_||(_=!0,C===d?c.reject(new TypeError("circular thenable chain")):f(c,C))},function(C){_||(_=!0,c.reject(C))})}catch(C){_||c.reject(C)}}}else c.reject(new TypeError("cannot resolve promise with itself"))};ba.all=function(f){return new ba(function(c,d){for(var m=new Array(f.length),_=0,C=function(B,P){m[B]=P,++_===f.length&&c(m)},A=0;A<f.length;A++)!function(E){var B=f[E];null!=B&&null!=B.then?B.then(function(Q){C(E,Q)},function(Q){d(Q)}):C(E,B)}(A)})},ba.resolve=function(f){return new ba(function(c,d){c(f)})},ba.reject=function(f){return new ba(function(c,d){d(f)})};var sa=typeof Promise<"u"?Promise:ba,zg=function(c,d,m){var _=st(c),C=!_,A=this._private=tr({duration:1e3},d,m);if(A.target=c,A.style=A.style||A.css,A.started=!1,A.playing=!1,A.hooked=!1,A.applying=!1,A.progress=0,A.completes=[],A.frames=[],A.complete&&qe(A.complete)&&A.completes.push(A.complete),C){var E=c.position();A.startPosition=A.startPosition||{x:E.x,y:E.y},A.startStyle=A.startStyle||c.cy().style().getAnimationStartStyle(c,A.style)}if(_){var B=c.pan();A.startPan={x:B.x,y:B.y},A.startZoom=c.zoom()}this.length=1,this[0]=this},jp=zg.prototype;tr(jp,{instanceString:function(){return"animation"},hook:function(){var c=this._private;if(!c.hooked){var m=c.target._private.animation;(c.queue?m.queue:m.current).push(this),Ge(c.target)&&c.target.cy().addToAnimationPool(c.target),c.hooked=!0}return this},play:function(){var c=this._private;return 1===c.progress&&(c.progress=0),c.playing=!0,c.started=!1,c.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var c=this._private;return c.applying=!0,c.started=!1,c.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var c=this._private;return c.playing=!1,c.started=!1,this},stop:function(){var c=this._private;return c.playing=!1,c.started=!1,c.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(c){var d=this._private;return void 0===c?d.progress*d.duration:this.progress(c/d.duration)},progress:function(c){var d=this._private,m=d.playing;return void 0===c?d.progress:(m&&this.pause(),d.progress=c,d.started=!1,m&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var c=this._private,d=c.playing;d&&this.pause(),c.progress=1-c.progress,c.started=!1;var m=function(P,q){var Q=c[P];null!=Q&&(c[P]=c[q],c[q]=Q)};if(m("zoom","startZoom"),m("pan","startPan"),m("position","startPosition"),c.style)for(var _=0;_<c.style.length;_++){var C=c.style[_],A=C.name,E=c.startStyle[A];c.startStyle[A]=C,c.style[_]=E}return d&&this.play(),this},promise:function(c){var m,d=this._private;return m="frame"===c?d.frames:d.completes,new sa(function(_,C){m.push(function(){_()})})}}),jp.complete=jp.completed,jp.run=jp.play,jp.running=jp.playing;var hh={data:function(c){return c=tr({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(_){},beforeSet:function(_,C){},onSet:function(_){},canSet:function(_){return!0}},c),function(_,C){var A=c,E=this,B=void 0!==E.length,P=B?E:[E],q=B?E[0]:E;if(ke(_)){var me,fe=-1!==_.indexOf(".")&&te.default(_);if(A.allowGetting&&void 0===C)return q&&(A.beforeGet(q),me=fe&&void 0===q._private[A.field][_]?J.default(q._private[A.field],fe):q._private[A.field][_]),me;if(A.allowSetting&&void 0!==C&&!A.immutableKeys[_]){var Pe=ye({},_,C);A.beforeSet(E,Pe);for(var $e=0,Ke=P.length;$e<Ke;$e++){var ht=P[$e];A.canSet(ht)&&(fe&&void 0===q._private[A.field][_]?Z.default(ht._private[A.field],fe,C):ht._private[A.field][_]=C)}A.updateStyle&&E.updateStyle(),A.onSet(E),A.settingTriggersEvent&&E[A.triggerFnName](A.settingEvent)}}else if(A.allowSetting&&yt(_)){var St,Gt,rt=_,Wt=Object.keys(rt);A.beforeSet(E,rt);for(var Tt=0;Tt<Wt.length;Tt++)if(Gt=rt[St=Wt[Tt]],!A.immutableKeys[St])for(var Pt=0;Pt<P.length;Pt++){var Zt=P[Pt];A.canSet(Zt)&&(Zt._private[A.field][St]=Gt)}A.updateStyle&&E.updateStyle(),A.onSet(E),A.settingTriggersEvent&&E[A.triggerFnName](A.settingEvent)}else if(A.allowBinding&&qe(_))E.on(A.bindingEvent,_);else if(A.allowGetting&&void 0===_){var dt;return q&&(A.beforeGet(q),dt=q._private[A.field]),dt}return E}},removeData:function(c){return c=tr({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},c),function(_){var C=c,A=this,B=void 0!==A.length?A:[A];if(ke(_)){for(var P=_.split(/\s+/),q=P.length,Q=0;Q<q;Q++){var fe=P[Q];if(!ce(fe)&&!C.immutableKeys[fe])for(var _e=0,Pe=B.length;_e<Pe;_e++)B[_e]._private[C.field][fe]=void 0}C.triggerEvent&&A[C.triggerFnName](C.event)}else if(void 0===_){for(var $e=0,Ke=B.length;$e<Ke;$e++)for(var ht=B[$e]._private[C.field],rt=Object.keys(ht),St=0;St<rt.length;St++){var Gt=rt[St];!C.immutableKeys[Gt]&&(ht[Gt]=void 0)}C.triggerEvent&&A[C.triggerFnName](C.event)}return A}}},G_={eventAliasesOn:function(c){var d=c;d.addListener=d.listen=d.bind=d.on,d.unlisten=d.unbind=d.off=d.removeListener,d.trigger=d.emit,d.pon=d.promiseOn=function(m,_){var C=this,A=Array.prototype.slice.call(arguments,0);return new sa(function(E,B){var q=A.concat([function(me){C.off.apply(C,Q),E(me)}]),Q=q.concat([]);C.on.apply(C,q)})}}},Cs={};[{animated:function(){return function(){var d=this,_=void 0!==d.length?d:[d];if(!(this._private.cy||this).styleEnabled())return!1;var A=_[0];return A?A._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var d=this,_=void 0!==d.length?d:[d];if(!(this._private.cy||this).styleEnabled())return this;for(var A=0;A<_.length;A++)_[A]._private.animation.queue=[];return this}},delay:function(){return function(d,m){return(this._private.cy||this).styleEnabled()?this.animate({delay:d,duration:d,complete:m}):this}},delayAnimation:function(){return function(d,m){return(this._private.cy||this).styleEnabled()?this.animation({delay:d,duration:d,complete:m}):this}},animation:function(){return function(d,m){var _=this,C=void 0!==_.length,A=C?_:[_],E=this._private.cy||this,B=!C,P=!B;if(!E.styleEnabled())return this;var q=E.style();if(d=tr({},d,m),0===Object.keys(d).length)return new zg(A[0],d);switch(void 0===d.duration&&(d.duration=400),d.duration){case"slow":d.duration=600;break;case"fast":d.duration=200}if(P&&(d.style=q.getPropsList(d.style||d.css),d.css=void 0),P&&null!=d.renderedPosition){var fe=d.renderedPosition,me=E.pan(),_e=E.zoom();d.position=Ec(fe,_e,me)}if(B&&null!=d.panBy){var Pe=d.panBy,$e=E.pan();d.pan={x:$e.x+Pe.x,y:$e.y+Pe.y}}var Ke=d.center||d.centre;if(B&&null!=Ke){var ht=E.getCenterPan(Ke.eles,d.zoom);null!=ht&&(d.pan=ht)}if(B&&null!=d.fit){var rt=d.fit,St=E.getFitViewport(rt.eles||rt.boundingBox,rt.padding);null!=St&&(d.pan=St.pan,d.zoom=St.zoom)}if(B&&yt(d.zoom)){var Gt=E.getZoomedViewport(d.zoom);null!=Gt?(Gt.zoomed&&(d.zoom=Gt.zoom),Gt.panned&&(d.pan=Gt.pan)):d.zoom=null}return new zg(A[0],d)}},animate:function(){return function(d,m){var _=this,A=void 0!==_.length?_:[_];if(!(this._private.cy||this).styleEnabled())return this;m&&(d=tr({},d,m));for(var B=0;B<A.length;B++){var P=A[B],q=P.animated()&&(void 0===d.queue||d.queue);P.animation(d,q?{queue:!0}:void 0).play()}return this}},stop:function(){return function(d,m){var _=this,A=void 0!==_.length?_:[_],E=this._private.cy||this;if(!E.styleEnabled())return this;for(var B=0;B<A.length;B++){for(var q=A[B]._private,Q=q.animation.current,fe=0;fe<Q.length;fe++)m&&(Q[fe]._private.duration=0);d&&(q.animation.queue=[]),m||(q.animation.current=[])}return E.notify("draw"),this}}},hh,G_].forEach(function(f){tr(Cs,f)});var ml={animate:Cs.animate(),animation:Cs.animation(),animated:Cs.animated(),clearQueue:Cs.clearQueue(),delay:Cs.delay(),delayAnimation:Cs.delayAnimation(),stop:Cs.stop()},Lc={classes:function(c){var d=this;if(void 0===c){var m=[];return d[0]._private.classes.forEach(function(_e){return m.push(_e)}),m}ot(c)||(c=(c||"").match(/\S+/g)||[]);for(var _=[],C=new ms(c),A=0;A<d.length;A++){for(var E=d[A],B=E._private,P=B.classes,q=!1,Q=0;Q<c.length;Q++)if(!P.has(c[Q])){q=!0;break}q||(q=P.size!==c.length),q&&(B.classes=C,_.push(E))}return _.length>0&&this.spawn(_).updateStyle().emit("class"),d},addClass:function(c){return this.toggleClass(c,!0)},hasClass:function(c){var d=this[0];return null!=d&&d._private.classes.has(c)},toggleClass:function(c,d){ot(c)||(c=c.match(/\S+/g)||[]);for(var m=this,_=void 0===d,C=[],A=0,E=m.length;A<E;A++)for(var B=m[A],P=B._private.classes,q=!1,Q=0;Q<c.length;Q++){var fe=c[Q],me=P.has(fe),_e=!1;d||_&&!me?(P.add(fe),_e=!0):(!d||_&&me)&&(P.delete(fe),_e=!0),!q&&_e&&(C.push(B),q=!0)}return C.length>0&&this.spawn(C).updateStyle().emit("class"),m},removeClass:function(c){return this.toggleClass(c,!1)},flashClass:function(c,d){var m=this;if(null==d)d=250;else if(0===d)return m;return m.addClass(c),setTimeout(function(){m.removeClass(c)},d),m}};Lc.className=Lc.classNames=Lc.classes;var bo={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:ze,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};bo.variable="(?:[\\w-.]|(?:\\\\"+bo.metaChar+"))+",bo.className="(?:[\\w-]|(?:\\\\"+bo.metaChar+"))+",bo.value=bo.string+"|"+bo.number,bo.id=bo.variable,function(){var f,c,d;for(f=bo.comparatorOp.split("|"),d=0;d<f.length;d++)bo.comparatorOp+="|@"+(c=f[d]);for(f=bo.comparatorOp.split("|"),d=0;d<f.length;d++)!((c=f[d]).indexOf("!")>=0)&&"="!==c&&(bo.comparatorOp+="|\\!"+c)}();var qs=[{selector:":selected",matches:function(c){return c.selected()}},{selector:":unselected",matches:function(c){return!c.selected()}},{selector:":selectable",matches:function(c){return c.selectable()}},{selector:":unselectable",matches:function(c){return!c.selectable()}},{selector:":locked",matches:function(c){return c.locked()}},{selector:":unlocked",matches:function(c){return!c.locked()}},{selector:":visible",matches:function(c){return c.visible()}},{selector:":hidden",matches:function(c){return!c.visible()}},{selector:":transparent",matches:function(c){return c.transparent()}},{selector:":grabbed",matches:function(c){return c.grabbed()}},{selector:":free",matches:function(c){return!c.grabbed()}},{selector:":removed",matches:function(c){return c.removed()}},{selector:":inside",matches:function(c){return!c.removed()}},{selector:":grabbable",matches:function(c){return c.grabbable()}},{selector:":ungrabbable",matches:function(c){return!c.grabbable()}},{selector:":animated",matches:function(c){return c.animated()}},{selector:":unanimated",matches:function(c){return!c.animated()}},{selector:":parent",matches:function(c){return c.isParent()}},{selector:":childless",matches:function(c){return c.isChildless()}},{selector:":child",matches:function(c){return c.isChild()}},{selector:":orphan",matches:function(c){return c.isOrphan()}},{selector:":nonorphan",matches:function(c){return c.isChild()}},{selector:":compound",matches:function(c){return c.isNode()?c.isParent():c.source().isParent()||c.target().isParent()}},{selector:":loop",matches:function(c){return c.isLoop()}},{selector:":simple",matches:function(c){return c.isSimple()}},{selector:":active",matches:function(c){return c.active()}},{selector:":inactive",matches:function(c){return!c.active()}},{selector:":backgrounding",matches:function(c){return c.backgrounding()}},{selector:":nonbackgrounding",matches:function(c){return!c.backgrounding()}}].sort(function(f,c){return function(c,d){return-1*kr(c,d)}(f.selector,c.selector)}),Kr=function(){for(var c,f={},d=0;d<qs.length;d++)f[(c=qs[d]).selector]=c.matches;return f}(),rs="("+qs.map(function(f){return f.selector}).join("|")+")",ds=function(c){return c.replace(new RegExp("\\\\("+bo.metaChar+")","g"),function(d,m){return m})},Rc=function(c,d,m){c[c.length-1]=m},ad=[{name:"group",query:!0,regex:"("+bo.group+")",populate:function(c,d,m){var C=Ie(m,1)[0];d.checks.push({type:0,value:"*"===C?C:C+"s"})}},{name:"state",query:!0,regex:rs,populate:function(c,d,m){var _=Ie(m,1);d.checks.push({type:7,value:_[0]})}},{name:"id",query:!0,regex:"\\#("+bo.id+")",populate:function(c,d,m){var _=Ie(m,1);d.checks.push({type:8,value:ds(_[0])})}},{name:"className",query:!0,regex:"\\.("+bo.className+")",populate:function(c,d,m){var _=Ie(m,1);d.checks.push({type:9,value:ds(_[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+bo.variable+")\\s*\\]",populate:function(c,d,m){var _=Ie(m,1);d.checks.push({type:4,field:ds(_[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+bo.variable+")\\s*("+bo.comparatorOp+")\\s*("+bo.value+")\\s*\\]",populate:function(c,d,m){var _=Ie(m,3),C=_[0],A=_[1],E=_[2];E=null!=new RegExp("^"+bo.string+"$").exec(E)?E.substring(1,E.length-1):parseFloat(E),d.checks.push({type:3,field:ds(C),operator:A,value:E})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+bo.boolOp+")\\s*("+bo.variable+")\\s*\\]",populate:function(c,d,m){var _=Ie(m,2),C=_[0];d.checks.push({type:5,field:ds(_[1]),operator:C})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+bo.meta+")\\s*("+bo.comparatorOp+")\\s*("+bo.number+")\\s*\\]\\]",populate:function(c,d,m){var _=Ie(m,3),A=_[1],E=_[2];d.checks.push({type:6,field:ds(_[0]),operator:A,value:parseFloat(E)})}},{name:"nextQuery",separator:!0,regex:bo.separator,populate:function(c,d){var m=c.currentSubject,_=c.edgeCount,C=c.compoundCount,A=c[c.length-1];return null!=m&&(A.subject=m,c.currentSubject=null),A.edgeCount=_,A.compoundCount=C,c.edgeCount=0,c.compoundCount=0,c[c.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:bo.directedEdge,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},C={checks:[]};return m.checks.push({type:11,source:d,target:C}),Rc(c,0,m),c.edgeCount++,C}var A={checks:[]},B={checks:[]};return A.checks.push({type:12,source:d,target:B}),Rc(c,0,A),c.edgeCount++,B}},{name:"undirectedEdge",separator:!0,regex:bo.undirectedEdge,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},C={checks:[]};return m.checks.push({type:10,nodes:[d,C]}),Rc(c,0,m),c.edgeCount++,C}var A={checks:[]},B={checks:[]};return A.checks.push({type:14,node:d,neighbor:B}),Rc(c,0,A),B}},{name:"child",separator:!0,regex:bo.child,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:15,parent:c[c.length-1],child:_}),Rc(c,0,m),c.compoundCount++,_}if(c.currentSubject===d){var A={checks:[]},B={checks:[]},P={checks:[]},q={checks:[]},Q={checks:[]};return A.checks.push({type:19,left:c[c.length-1],right:B,subject:P}),P.checks=d.checks,d.checks=[{type:20}],Q.checks.push({type:20}),B.checks.push({type:17,parent:Q,child:q}),Rc(c,0,A),c.currentSubject=P,c.compoundCount++,q}var fe={checks:[]},me={checks:[]},_e=[{type:17,parent:fe,child:me}];return fe.checks=d.checks,d.checks=_e,c.compoundCount++,me}},{name:"descendant",separator:!0,regex:bo.descendant,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:16,ancestor:c[c.length-1],descendant:_}),Rc(c,0,m),c.compoundCount++,_}if(c.currentSubject===d){var A={checks:[]},B={checks:[]},P={checks:[]},q={checks:[]},Q={checks:[]};return A.checks.push({type:19,left:c[c.length-1],right:B,subject:P}),P.checks=d.checks,d.checks=[{type:20}],Q.checks.push({type:20}),B.checks.push({type:18,ancestor:Q,descendant:q}),Rc(c,0,A),c.currentSubject=P,c.compoundCount++,q}var fe={checks:[]},me={checks:[]},_e=[{type:18,ancestor:fe,descendant:me}];return fe.checks=d.checks,d.checks=_e,c.compoundCount++,me}},{name:"subject",modifier:!0,regex:bo.subject,populate:function(c,d){if(null!=c.currentSubject&&c.currentSubject!==d)return ge("Redefinition of subject in selector `"+c.toString()+"`"),!1;c.currentSubject=d;var _=c[c.length-1].checks[0],C=null==_?null:_.type;11===C?_.type=13:10===C&&(_.type=14,_.node=_.nodes[1],_.neighbor=_.nodes[0],_.nodes=null)}}];ad.forEach(function(f){return f.regexObj=new RegExp("^"+f.regex)});var $p=function(c){for(var d,m,_,C=0;C<ad.length;C++){var A=ad[C],E=A.name,B=c.match(A.regexObj);if(null!=B){m=B,d=A,_=E,c=c.substring(B[0].length);break}}return{expr:d,match:m,name:_,remaining:c}},eu={parse:function(c){var d=this,m=d.inputText=c,_=d[0]={checks:[]};for(d.length=1,m=function(c){var d=c.match(/^\s+/);return d&&(c=c.substring(d[0].length)),c}(m);;){var C=$p(m);if(null==C.expr)return ge("The selector `"+c+"`is invalid"),!1;var A=C.match.slice(1),E=C.expr.populate(d,_,A);if(!1===E)return!1;if(null!=E&&(_=E),(m=C.remaining).match(/^\s*$/))break}var B=d[d.length-1];null!=d.currentSubject&&(B.subject=d.currentSubject),B.edgeCount=d.edgeCount,B.compoundCount=d.compoundCount;for(var P=0;P<d.length;P++){var q=d[P];if(q.compoundCount>0&&q.edgeCount>0)return ge("The selector `"+c+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(q.edgeCount>1)return ge("The selector `"+c+"` is invalid because it uses multiple edge selectors"),!1;1===q.edgeCount&&ge("The selector `"+c+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var c=function(q){return q??""},d=function(q){return ke(q)?'"'+q+'"':c(q)},m=function(q){return" "+q+" "},C=function(q,Q){return q.checks.reduce(function(fe,me,_e){return fe+(Q===q&&0===_e?"$":"")+function(q,Q){var me=q.value;switch(q.type){case 0:var _e=c(me);return _e.substring(0,_e.length-1);case 3:return"["+q.field+m(c(q.operator))+d(me)+"]";case 5:var ht=q.field;return"["+c(q.operator)+ht+"]";case 4:return"["+q.field+"]";case 6:return"[["+q.field+m(c(q.operator))+d(me)+"]]";case 7:return me;case 8:return"#"+me;case 9:return"."+me;case 17:case 15:return C(q.parent,Q)+m(">")+C(q.child,Q);case 18:case 16:return C(q.ancestor,Q)+" "+C(q.descendant,Q);case 19:var Wt=C(q.left,Q),Tt=C(q.subject,Q),jt=C(q.right,Q);return Wt+(Wt.length>0?" ":"")+Tt+jt;case 20:return""}}(me,Q)},"")},A="",E=0;E<this.length;E++){var B=this[E];A+=C(B,B.subject),this.length>1&&E<this.length-1&&(A+=", ")}return this.toStringCache=A,A}},Ci=function(c,d,m){var _,B,P,C=ke(c),A=Be(c),E=ke(m),q=!1,Q=!1,fe=!1;switch(d.indexOf("!")>=0&&(d=d.replace("!",""),Q=!0),d.indexOf("@")>=0&&(d=d.replace("@",""),q=!0),(C||E||q)&&(B=C||A?""+c:"",P=""+m),q&&(c=B=B.toLowerCase(),m=P=P.toLowerCase()),d){case"*=":_=B.indexOf(P)>=0;break;case"$=":_=B.indexOf(P,B.length-P.length)>=0;break;case"^=":_=0===B.indexOf(P);break;case"=":_=c===m;break;case">":fe=!0,_=c>m;break;case">=":fe=!0,_=c>=m;break;case"<":fe=!0,_=c<m;break;case"<=":fe=!0,_=c<=m;break;default:_=!1}return Q&&(null!=c||!fe)&&(_=!_),_},Nt=function(c,d){return c.data(d)},No=[],Mo=function(c,d){return c.checks.every(function(m){return No[m.type](m,d)})};No[0]=function(f,c){var d=f.value;return"*"===d||d===c.group()},No[7]=function(f,c){return function(c,d){return Kr[c](d)}(f.value,c)},No[8]=function(f,c){var d=f.value;return c.id()===d},No[9]=function(f,c){return c.hasClass(f.value)},No[6]=function(f,c){var m=f.operator,_=f.value;return Ci(function(c,d){return c[d]()}(c,f.field),m,_)},No[3]=function(f,c){var m=f.operator,_=f.value;return Ci(Nt(c,f.field),m,_)},No[5]=function(f,c){var m=f.operator;return function(c,d){switch(d){case"?":return!!c;case"!":return!c;case"^":return void 0===c}}(Nt(c,f.field),m)},No[4]=function(f,c){return function(c){return void 0!==c}(Nt(c,f.field))},No[10]=function(f,c){var d=f.nodes[0],m=f.nodes[1],_=c.source(),C=c.target();return Mo(d,_)&&Mo(m,C)||Mo(m,_)&&Mo(d,C)},No[14]=function(f,c){return Mo(f.node,c)&&c.neighborhood().some(function(d){return d.isNode()&&Mo(f.neighbor,d)})},No[11]=function(f,c){return Mo(f.source,c.source())&&Mo(f.target,c.target())},No[12]=function(f,c){return Mo(f.source,c)&&c.outgoers().some(function(d){return d.isNode()&&Mo(f.target,d)})},No[13]=function(f,c){return Mo(f.target,c)&&c.incomers().some(function(d){return d.isNode()&&Mo(f.source,d)})},No[15]=function(f,c){return Mo(f.child,c)&&Mo(f.parent,c.parent())},No[17]=function(f,c){return Mo(f.parent,c)&&c.children().some(function(d){return Mo(f.child,d)})},No[16]=function(f,c){return Mo(f.descendant,c)&&c.ancestors().some(function(d){return Mo(f.ancestor,d)})},No[18]=function(f,c){return Mo(f.ancestor,c)&&c.descendants().some(function(d){return Mo(f.descendant,d)})},No[19]=function(f,c){return Mo(f.subject,c)&&Mo(f.left,c)&&Mo(f.right,c)},No[20]=function(){return!0},No[1]=function(f,c){return f.value.has(c)},No[2]=function(f,c){return(0,f.value)(c)};var qp={matches:function(c){for(var m=0;m<this.length;m++)if(Mo(this[m],c))return!0;return!1},filter:function(c){var d=this;if(1===d.length&&1===d[0].checks.length&&8===d[0].checks[0].type)return c.getElementById(d[0].checks[0].value).collection();var m=function(C){for(var A=0;A<d.length;A++)if(Mo(d[A],C))return!0;return!1};return null==d.text()&&(m=function(){return!0}),c.filter(m)}},op=function(c){this.inputText=c,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==c||ke(c)&&c.match(/^\s*$/)||(Ge(c)?this.addQuery({checks:[{type:1,value:c.collection()}]}):qe(c)?this.addQuery({checks:[{type:2,value:c}]}):ke(c)?this.parse(c)||(this.invalid=!0):mt("A selector must be created from a string; found "))},Cr=op.prototype;[eu,qp].forEach(function(f){return tr(Cr,f)}),Cr.text=function(){return this.inputText},Cr.size=function(){return this.length},Cr.eq=function(f){return this[f]},Cr.sameText=function(f){return!this.invalid&&!f.invalid&&this.text()===f.text()},Cr.addQuery=function(f){this[this.length++]=f},Cr.selector=Cr.toString;var Fl={allAre:function(c){var d=new op(c);return this.every(function(m){return d.matches(m)})},is:function(c){var d=new op(c);return this.some(function(m){return d.matches(m)})},some:function(c,d){for(var m=0;m<this.length;m++)if(d?c.apply(d,[this[m],m,this]):c(this[m],m,this))return!0;return!1},every:function(c,d){for(var m=0;m<this.length;m++)if(!(d?c.apply(d,[this[m],m,this]):c(this[m],m,this)))return!1;return!0},same:function(c){if(this===c)return!0;c=this.cy().collection(c);var d=this.length;return d===c.length&&(1===d?this[0]===c[0]:this.every(function(_){return c.hasElementWithId(_.id())}))},anySame:function(c){return c=this.cy().collection(c),this.some(function(d){return c.hasElementWithId(d.id())})},allAreNeighbors:function(c){c=this.cy().collection(c);var d=this.neighborhood();return c.every(function(m){return d.hasElementWithId(m.id())})},contains:function(c){c=this.cy().collection(c);var d=this;return c.every(function(m){return d.hasElementWithId(m.id())})}};Fl.allAreNeighbours=Fl.allAreNeighbors,Fl.has=Fl.contains,Fl.equal=Fl.equals=Fl.same;var Bd,ap,Ca=function(c,d){return function(_,C,A,E){var q,B=_,P=this;if(null==B?q="":Ge(B)&&1===B.length&&(q=B.id()),1===P.length&&q){var Q=P[0]._private,fe=Q.traversalCache=Q.traversalCache||{},me=fe[d]=fe[d]||[],_e=Ic(q);return me[_e]||(me[_e]=c.call(P,_,C,A,E))}return c.call(P,_,C,A,E)}},Bo={parent:function(c){var d=[];if(1===this.length){var m=this[0]._private.parent;if(m)return m}for(var _=0;_<this.length;_++){var A=this[_]._private.parent;A&&d.push(A)}return this.spawn(d,!0).filter(c)},parents:function(c){for(var d=[],m=this.parent();m.nonempty();){for(var _=0;_<m.length;_++)d.push(m[_]);m=m.parent()}return this.spawn(d,!0).filter(c)},commonAncestors:function(c){for(var d,m=0;m<this.length;m++){var C=this[m].parents();d=(d=d||C).intersect(C)}return d.filter(c)},orphans:function(c){return this.stdFilter(function(d){return d.isOrphan()}).filter(c)},nonorphans:function(c){return this.stdFilter(function(d){return d.isChild()}).filter(c)},children:Ca(function(f){for(var c=[],d=0;d<this.length;d++)for(var _=this[d]._private.children,C=0;C<_.length;C++)c.push(_[C]);return this.spawn(c,!0).filter(f)},"children"),siblings:function(c){return this.parent().children().not(this).filter(c)},isParent:function(){var c=this[0];if(c)return c.isNode()&&0!==c._private.children.length},isChildless:function(){var c=this[0];if(c)return c.isNode()&&0===c._private.children.length},isChild:function(){var c=this[0];if(c)return c.isNode()&&null!=c._private.parent},isOrphan:function(){var c=this[0];if(c)return c.isNode()&&null==c._private.parent},descendants:function(c){var d=[];return function m(_){for(var C=0;C<_.length;C++){var A=_[C];d.push(A),A.children().nonempty()&&m(A.children())}}(this.children()),this.spawn(d,!0).filter(c)}};function Va(f,c,d,m){for(var _=[],C=new ms,E=f.cy().hasCompoundNodes(),B=0;B<f.length;B++){var P=f[B];d?_.push(P):E&&m(_,C,P)}for(;_.length>0;){var q=_.shift();c(q),C.add(q.id()),E&&m(_,C,q)}return f}function gr(f,c,d){if(d.isParent())for(var m=d._private.children,_=0;_<m.length;_++){var C=m[_];c.has(C.id())||f.push(C)}}function Oh(f,c,d){if(d.isChild()){var m=d._private.parent;c.has(m.id())||f.push(m)}}function vl(f,c,d){Oh(f,c,d),gr(f,c,d)}Bo.forEachDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Va(this,f,c,gr)},Bo.forEachUp=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Va(this,f,c,Oh)},Bo.forEachUpAndDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Va(this,f,c,vl)},Bo.ancestors=Bo.parents,Bd=ap={data:Cs.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Cs.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Cs.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Cs.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Cs.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Cs.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var c=this[0];if(c)return c._private.data.id}},Bd.attr=Bd.data,Bd.removeAttr=Bd.removeData;var zd=ap,Cf={};function Bu(f){return function(c){var d=this;if(void 0===c&&(c=!0),0===d.length);else if(d.isNode()&&!d.removed()){for(var m=0,_=d[0],C=_._private.edges,A=0;A<C.length;A++){var E=C[A];!c&&E.isLoop()||(m+=f(_,E))}return m}}}function ls(f,c){return function(d){for(var m,_=this.nodes(),C=0;C<_.length;C++){var E=_[C][f](d);void 0!==E&&(void 0===m||c(E,m))&&(m=E)}return m}}tr(Cf,{degree:Bu(function(f,c){return c.source().same(c.target())?2:1}),indegree:Bu(function(f,c){return c.target().same(f)?1:0}),outdegree:Bu(function(f,c){return c.source().same(f)?1:0})}),tr(Cf,{minDegree:ls("degree",function(f,c){return f<c}),maxDegree:ls("degree",function(f,c){return f>c}),minIndegree:ls("indegree",function(f,c){return f<c}),maxIndegree:ls("indegree",function(f,c){return f>c}),minOutdegree:ls("outdegree",function(f,c){return f<c}),maxOutdegree:ls("outdegree",function(f,c){return f>c})}),tr(Cf,{totalDegree:function(c){for(var d=0,m=this.nodes(),_=0;_<m.length;_++)d+=m[_].degree(c);return d}});var Pc,Hg,Ds=function(c,d,m){for(var _=0;_<c.length;_++){var C=c[_];if(!C.locked()){var A=C._private.position,E={x:null!=d.x?d.x-A.x:0,y:null!=d.y?d.y-A.y:0};C.isParent()&&!(0===E.x&&0===E.y)&&C.children().shift(E,m),C.dirtyBoundingBoxCache()}}},Dv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(c){c.updateCompoundBounds()},beforeSet:function(c,d){Ds(c,d,!1)},onSet:function(c){c.dirtyCompoundBoundsCache()},canSet:function(c){return!c.locked()}};Pc=Hg={position:Cs.data(Dv),silentPosition:Cs.data(tr({},Dv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(c,d){Ds(c,d,!0)},onSet:function(c){c.dirtyCompoundBoundsCache()}})),positions:function(c,d){if(yt(c))d?this.silentPosition(c):this.position(c);else if(qe(c)){var m=c,_=this.cy();_.startBatch();for(var C=0;C<this.length;C++){var E,A=this[C];(E=m(A,C))&&(d?A.silentPosition(E):A.position(E))}_.endBatch()}return this},silentPositions:function(c){return this.positions(c,!0)},shift:function(c,d,m){var _;if(yt(c)?(_={x:Be(c.x)?c.x:0,y:Be(c.y)?c.y:0},m=d):ke(c)&&Be(d)&&((_={x:0,y:0})[c]=d),null!=_){var C=this.cy();C.startBatch();for(var A=0;A<this.length;A++){var E=this[A];if(!(C.hasCompoundNodes()&&E.isChild()&&E.ancestors().anySame(this))){var B=E.position(),P={x:B.x+_.x,y:B.y+_.y};m?E.silentPosition(P):E.position(P)}}C.endBatch()}return this},silentShift:function(c,d){return yt(c)?this.shift(c,!0):ke(c)&&Be(d)&&this.shift(c,d,!0),this},renderedPosition:function(c,d){var m=this[0],_=this.cy(),C=_.zoom(),A=_.pan(),E=yt(c)?c:void 0,B=void 0!==E||void 0!==d&&ke(c);if(m&&m.isNode()){if(!B){var Q=m.position();return E=Ko(Q,C,A),void 0===c?E:E[c]}for(var P=0;P<this.length;P++){var q=this[P];void 0!==d?q.position(c,(d-A[c])/C):void 0!==E&&q.position(Ec(E,C,A))}}else if(!B)return;return this},relativePosition:function(c,d){var m=this[0],_=this.cy(),C=yt(c)?c:void 0,A=void 0!==C||void 0!==d&&ke(c),E=_.hasCompoundNodes();if(m&&m.isNode()){if(!A){var _e=m.position(),Pe=E?m.parent():null,$e=Pe&&Pe.length>0;$e&&(Pe=Pe[0]);var ht=$e?Pe.position():{x:0,y:0};return C={x:_e.x-ht.x,y:_e.y-ht.y},void 0===c?C:C[c]}for(var B=0;B<this.length;B++){var P=this[B],q=E?P.parent():null,Q=q&&q.length>0;Q&&(q=q[0]);var me=Q?q.position():{x:0,y:0};void 0!==d?P.position(c,d+me[c]):void 0!==C&&P.position({x:C.x+me.x,y:C.y+me.y})}}else if(!A)return;return this}},Pc.modelPosition=Pc.point=Pc.position,Pc.modelPositions=Pc.points=Pc.positions,Pc.renderedPoint=Pc.renderedPosition,Pc.relativePoint=Pc.relativePosition;var Lr,wa,Gg=Hg;Lr=wa={},wa.renderedBoundingBox=function(f){var c=this.boundingBox(f),d=this.cy(),m=d.zoom(),_=d.pan(),C=c.x1*m+_.x,A=c.x2*m+_.x,E=c.y1*m+_.y,B=c.y2*m+_.y;return{x1:C,x2:A,y1:E,y2:B,w:A-C,h:B-E}},wa.dirtyCompoundBoundsCache=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();return c.styleEnabled()&&c.hasCompoundNodes()?(this.forEachUp(function(d){if(d.isParent()){var m=d._private;m.compoundBoundsClean=!1,m.bbCache=null,f||d.emitAndNotify("bounds")}}),this):this},wa.updateCompoundBounds=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();if(!c.styleEnabled()||!c.hasCompoundNodes())return this;if(!f&&c.batching())return this;function d(A){if(A.isParent()){var E=A._private,B=A.children(),P="include"===A.pstyle("compound-sizing-wrt-labels").value,q={width:{val:A.pstyle("min-width").pfValue,left:A.pstyle("min-width-bias-left"),right:A.pstyle("min-width-bias-right")},height:{val:A.pstyle("min-height").pfValue,top:A.pstyle("min-height-bias-top"),bottom:A.pstyle("min-height-bias-bottom")}},Q=B.boundingBox({includeLabels:P,includeOverlays:!1,useCache:!1}),fe=E.position;(0===Q.w||0===Q.h)&&((Q={w:A.pstyle("width").pfValue,h:A.pstyle("height").pfValue}).x1=fe.x-Q.w/2,Q.x2=fe.x+Q.w/2,Q.y1=fe.y-Q.h/2,Q.y2=fe.y+Q.h/2);var Pe=q.width.left.value;"px"===q.width.left.units&&q.width.val>0&&(Pe=100*Pe/q.width.val);var $e=q.width.right.value;"px"===q.width.right.units&&q.width.val>0&&($e=100*$e/q.width.val);var Ke=q.height.top.value;"px"===q.height.top.units&&q.height.val>0&&(Ke=100*Ke/q.height.val);var ht=q.height.bottom.value;"px"===q.height.bottom.units&&q.height.val>0&&(ht=100*ht/q.height.val);var rt=me(q.width.val-Q.w,Pe,$e),St=rt.biasDiff,Gt=rt.biasComplementDiff,Wt=me(q.height.val-Q.h,Ke,ht),Tt=Wt.biasDiff,jt=Wt.biasComplementDiff;E.autoPadding=function _e(Pt,Zt,Kt,dt){if("%"!==Kt.units)return"px"===Kt.units?Kt.pfValue:0;switch(dt){case"width":return Pt>0?Kt.pfValue*Pt:0;case"height":return Zt>0?Kt.pfValue*Zt:0;case"average":return Pt>0&&Zt>0?Kt.pfValue*(Pt+Zt)/2:0;case"min":return Pt>0&&Zt>0?Pt>Zt?Kt.pfValue*Zt:Kt.pfValue*Pt:0;case"max":return Pt>0&&Zt>0?Pt>Zt?Kt.pfValue*Pt:Kt.pfValue*Zt:0;default:return 0}}(Q.w,Q.h,A.pstyle("padding"),A.pstyle("padding-relative-to").value),E.autoWidth=Math.max(Q.w,q.width.val),fe.x=(-St+Q.x1+Q.x2+Gt)/2,E.autoHeight=Math.max(Q.h,q.height.val),fe.y=(-Tt+Q.y1+Q.y2+jt)/2}function me(Pt,Zt,Kt){var dt=0,Qt=0,Ht=Zt+Kt;return Pt>0&&Ht>0&&(dt=Zt/Ht*Pt,Qt=Kt/Ht*Pt),{biasDiff:dt,biasComplementDiff:Qt}}}for(var m=0;m<this.length;m++){var _=this[m],C=_._private;(!C.compoundBoundsClean||f)&&(d(_),c.batching()||(C.compoundBoundsClean=!0))}return this};var Nl=function(c){return c===1/0||c===-1/0?0:c},aa=function(c,d,m,_,C){_-d==0||C-m==0||null==d||null==m||null==_||null==C||(c.x1=d<c.x1?d:c.x1,c.x2=_>c.x2?_:c.x2,c.y1=m<c.y1?m:c.y1,c.y2=C>c.y2?C:c.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1)},Ua=function(c,d){return null==d?c:aa(c,d.x1,d.y1,d.x2,d.y2)},xl=function(c,d,m){return ur(c,d,m)},Vd=function(c,d,m){if(!d.cy().headless()){var B,P,_=d._private,C=_.rstyle,A=C.arrowWidth/2;if("none"!==d.pstyle(m+"-arrow-shape").value){"source"===m?(B=C.srcX,P=C.srcY):"target"===m?(B=C.tgtX,P=C.tgtY):(B=C.midX,P=C.midY);var q=_.arrowBounds=_.arrowBounds||{},Q=q[m]=q[m]||{};Q.x1=B-A,Q.y1=P-A,Q.x2=B+A,Q.y2=P+A,Q.w=Q.x2-Q.x1,Q.h=Q.y2-Q.y1,qf(Q,1),aa(c,Q.x1,Q.y1,Q.x2,Q.y2)}}},dc=function(c,d,m){if(!d.cy().headless()){var _,C=d._private,A=C.rstyle;if(d.pstyle((_=m?m+"-":"")+"label").strValue){var Kt,dt,Qt,Ht,B=d.pstyle("text-halign"),P=d.pstyle("text-valign"),q=xl(A,"labelWidth",m),Q=xl(A,"labelHeight",m),fe=xl(A,"labelX",m),me=xl(A,"labelY",m),_e=d.pstyle(_+"text-margin-x").pfValue,Pe=d.pstyle(_+"text-margin-y").pfValue,$e=d.isEdge(),Ke=d.pstyle(_+"text-rotation"),ht=d.pstyle("text-outline-width").pfValue,St=d.pstyle("text-border-width").pfValue/2,Gt=d.pstyle("text-background-padding").pfValue,Tt=Q,jt=q,Pt=jt/2,Zt=Tt/2;if($e)Kt=fe-Pt,dt=fe+Pt,Qt=me-Zt,Ht=me+Zt;else{switch(B.value){case"left":Kt=fe-jt,dt=fe;break;case"center":Kt=fe-Pt,dt=fe+Pt;break;case"right":Kt=fe,dt=fe+jt}switch(P.value){case"top":Qt=me-Tt,Ht=me;break;case"center":Qt=me-Zt,Ht=me+Zt;break;case"bottom":Qt=me,Ht=me+Tt}}Kt+=_e-Math.max(ht,St)-Gt-2,dt+=_e+Math.max(ht,St)+Gt+2,Qt+=Pe-Math.max(ht,St)-Gt-2,Ht+=Pe+Math.max(ht,St)+Gt+2;var xn=m||"main",sn=C.labelBounds,vn=sn[xn]=sn[xn]||{};vn.x1=Kt,vn.y1=Qt,vn.x2=dt,vn.y2=Ht,vn.w=dt-Kt,vn.h=Ht-Qt;var Ln=$e&&"autorotate"===Ke.strValue;if(Ln||null!=Ke.pfValue&&0!==Ke.pfValue){var ri=Ln?xl(C.rstyle,"labelAngle",m):Ke.pfValue,Rn=Math.cos(ri),ei=Math.sin(ri),di=(Kt+dt)/2,Ii=(Qt+Ht)/2;if(!$e){switch(B.value){case"left":di=dt;break;case"right":di=Kt}switch(P.value){case"top":Ii=Ht;break;case"bottom":Ii=Qt}}var vi=function(Jr,mr){return{x:(Jr-=di)*Rn-(mr-=Ii)*ei+di,y:Jr*ei+mr*Rn+Ii}},pi=vi(Kt,Qt),kn=vi(Kt,Ht),li=vi(dt,Qt),Ei=vi(dt,Ht);Kt=Math.min(pi.x,kn.x,li.x,Ei.x),dt=Math.max(pi.x,kn.x,li.x,Ei.x),Qt=Math.min(pi.y,kn.y,li.y,Ei.y),Ht=Math.max(pi.y,kn.y,li.y,Ei.y)}var Qi=xn+"Rot",lr=sn[Qi]=sn[Qi]||{};lr.x1=Kt,lr.y1=Qt,lr.x2=dt,lr.y2=Ht,lr.w=dt-Kt,lr.h=Ht-Qt,aa(c,Kt,Qt,dt,Ht),aa(C.labelBounds.all,Kt,Qt,dt,Ht)}return c}},Ha=function(c){var d=0,m=function(A){return(A?1:0)<<d++},_=0;return _+=m(c.incudeNodes),_+=m(c.includeEdges),_+=m(c.includeLabels),_+=m(c.includeMainLabels),_+=m(c.includeSourceLabels),(_+=m(c.includeTargetLabels))+m(c.includeOverlays)},Lv=function(c){if(c.isEdge()){var d=c.source().position(),m=c.target().position(),_=function(A){return Math.round(A)};return function(c,d){var m={value:0,done:!1},_=0,C=c.length;return ff({next:function(){return _<C?m.value=c[_++]:m.done=!0,m}},void 0)}([_(d.x),_(d.y),_(m.x),_(m.y)])}return 0},Rv=function(c,d){var _,m=c._private,C=c.isEdge(),E=(null==d?jg:Ha(d))===jg,B=Lv(c),P=m.bbCachePosKey===B,q=d.useCache&&P,Q=function(Pe){return null==Pe._private.bbCache||Pe._private.styleDirty};if(!q||Q(c)||C&&Q(c.source())||Q(c.target())?(P||c.recalculateRenderedStyle(q),_=function(c,d){var q,Q,fe,me,_e,Pe,m=c._private.cy,_=m.styleEnabled(),C=m.headless(),A=Mc(),E=c._private,B=c.isNode(),P=c.isEdge(),$e=E.rstyle,Ke=B&&_?c.pstyle("bounds-expansion").pfValue:[0],ht=function(Zr){return"none"!==Zr.pstyle("display").value},rt=!_||ht(c)&&(!P||ht(c.source())&&ht(c.target()));if(rt){var Gt=0;_&&d.includeOverlays&&0!==c.pstyle("overlay-opacity").value&&(Gt=c.pstyle("overlay-padding").value);var Tt=0;_&&d.includeUnderlays&&0!==c.pstyle("underlay-opacity").value&&(Tt=c.pstyle("underlay-padding").value);var jt=Math.max(Gt,Tt),Zt=0;if(_&&(Zt=c.pstyle("width").pfValue/2),B&&d.includeNodes){var Kt=c.position();_e=Kt.x,Pe=Kt.y;var Qt=c.outerWidth()/2,xn=c.outerHeight()/2;aa(A,q=_e-Qt,fe=Pe-xn,Q=_e+Qt,me=Pe+xn)}else if(P&&d.includeEdges)if(_&&!C){var sn=c.pstyle("curve-style").strValue;if(q=Math.min($e.srcX,$e.midX,$e.tgtX),Q=Math.max($e.srcX,$e.midX,$e.tgtX),fe=Math.min($e.srcY,$e.midY,$e.tgtY),me=Math.max($e.srcY,$e.midY,$e.tgtY),aa(A,q-=Zt,fe-=Zt,Q+=Zt,me+=Zt),"haystack"===sn){var vn=$e.haystackPts;if(vn&&2===vn.length){if((q=vn[0].x)>(Q=vn[1].x)){var Ln=q;q=Q,Q=Ln}if((fe=vn[0].y)>(me=vn[1].y)){var Fn=fe;fe=me,me=Fn}aa(A,q-Zt,fe-Zt,Q+Zt,me+Zt)}}else if("bezier"===sn||"unbundled-bezier"===sn||"segments"===sn||"taxi"===sn){var ri;switch(sn){case"bezier":case"unbundled-bezier":ri=$e.bezierPts;break;case"segments":case"taxi":ri=$e.linePts}if(null!=ri)for(var Rn=0;Rn<ri.length;Rn++){var ei=ri[Rn];aa(A,q=ei.x-Zt,fe=ei.y-Zt,Q=ei.x+Zt,me=ei.y+Zt)}}}else{var Ii=c.source().position(),pi=c.target().position();if((q=Ii.x)>(Q=pi.x)){var kn=q;q=Q,Q=kn}if((fe=Ii.y)>(me=pi.y)){var li=fe;fe=me,me=li}aa(A,q-=Zt,fe-=Zt,Q+=Zt,me+=Zt)}if(_&&d.includeEdges&&P&&(Vd(A,c,"mid-source"),Vd(A,c,"mid-target"),Vd(A,c,"source"),Vd(A,c,"target")),_&&"yes"===c.pstyle("ghost").value){var Qi=c.pstyle("ghost-offset-x").pfValue,lr=c.pstyle("ghost-offset-y").pfValue;aa(A,A.x1+Qi,A.y1+lr,A.x2+Qi,A.y2+lr)}var Wr=E.bodyBounds=E.bodyBounds||{};wm(Wr,A),Up(Wr,Ke),qf(Wr,1),_&&aa(A,(q=A.x1)-jt,(fe=A.y1)-jt,(Q=A.x2)+jt,(me=A.y2)+jt);var Jr=E.overlayBounds=E.overlayBounds||{};wm(Jr,A),Up(Jr,Ke),qf(Jr,1);var mr=E.labelBounds=E.labelBounds||{};null!=mr.all?function(c){c.x1=1/0,c.y1=1/0,c.x2=-1/0,c.y2=-1/0,c.w=0,c.h=0}(mr.all):mr.all=Mc(),_&&d.includeLabels&&(d.includeMainLabels&&dc(A,c,null),P&&(d.includeSourceLabels&&dc(A,c,"source"),d.includeTargetLabels&&dc(A,c,"target")))}return A.x1=Nl(A.x1),A.y1=Nl(A.y1),A.x2=Nl(A.x2),A.y2=Nl(A.y2),A.w=Nl(A.x2-A.x1),A.h=Nl(A.y2-A.y1),A.w>0&&A.h>0&&rt&&(Up(A,Ke),qf(A,1)),A}(c,Wg),m.bbCache=_,m.bbCachePosKey=B):_=m.bbCache,!E){var me=c.isNode();_=Mc(),(d.includeNodes&&me||d.includeEdges&&!me)&&Ua(_,d.includeOverlays?m.overlayBounds:m.bodyBounds),d.includeLabels&&(d.includeMainLabels&&(!C||d.includeSourceLabels&&d.includeTargetLabels)?Ua(_,m.labelBounds.all):(d.includeMainLabels&&Ua(_,m.labelBounds.mainRot),d.includeSourceLabels&&Ua(_,m.labelBounds.sourceRot),d.includeTargetLabels&&Ua(_,m.labelBounds.targetRot))),_.w=_.x2-_.x1,_.h=_.y2-_.y1}return _},Wg={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},jg=Ha(Wg),Af=oi(Wg);wa.boundingBox=function(f){var c;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==f&&void 0!==f.useCache&&!0!==f.useCache){c=Mc();var d=Af(f=f||Wg),m=this;if(m.cy().styleEnabled())for(var A=0;A<m.length;A++){var E=m[A],B=E._private,P=Lv(E);E.recalculateRenderedStyle(d.useCache&&B.bbCachePosKey===P&&!B.styleDirty)}this.updateCompoundBounds(!f.useCache);for(var fe=0;fe<m.length;fe++)Ua(c,Rv(m[fe],d))}else f=void 0===f?Wg:Af(f),c=Rv(this[0],f);return c.x1=Nl(c.x1),c.y1=Nl(c.y1),c.x2=Nl(c.x2),c.y2=Nl(c.y2),c.w=Nl(c.x2-c.x1),c.h=Nl(c.y2-c.y1),c},wa.dirtyBoundingBoxCache=function(){for(var f=0;f<this.length;f++){var c=this[f]._private;c.bbCache=null,c.bbCachePosKey=null,c.bodyBounds=null,c.overlayBounds=null,c.labelBounds.all=null,c.labelBounds.source=null,c.labelBounds.target=null,c.labelBounds.main=null,c.labelBounds.sourceRot=null,c.labelBounds.targetRot=null,c.labelBounds.mainRot=null,c.arrowBounds.source=null,c.arrowBounds.target=null,c.arrowBounds["mid-source"]=null,c.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},wa.boundingBoxAt=function(f){var c=this.nodes(),d=this.cy(),m=d.hasCompoundNodes(),_=d.collection();if(m&&(_=c.filter(function(P){return P.isParent()}),c=c.not(_)),yt(f)){var C=f;f=function(){return C}}d.startBatch(),c.forEach(function(q,Q){return q._private.bbAtOldPos=f(q,Q)}).silentPositions(f),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0));var B=function(c){return{x1:c.x1,x2:c.x2,w:c.w,y1:c.y1,y2:c.y2,h:c.h}}(this.boundingBox({useCache:!1}));return c.silentPositions(function(q){return q._private.bbAtOldPos}),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0)),d.endBatch(),B},Lr.boundingbox=Lr.bb=Lr.boundingBox,Lr.renderedBoundingbox=Lr.renderedBoundingBox;var xf,Ud,Rm=wa;xf=Ud={};var $g=function(c){c.uppercaseName=De(c.name),c.autoName="auto"+c.uppercaseName,c.labelName="label"+c.uppercaseName,c.outerName="outer"+c.uppercaseName,c.uppercaseOuterName=De(c.outerName),xf[c.name]=function(){var m=this[0],_=m._private;if(m){if(_.cy._private.styleEnabled){if(m.isParent())return m.updateCompoundBounds(),_[c.autoName]||0;var E=m.pstyle(c.name);return"label"===E.strValue?(m.recalculateRenderedStyle(),_.rstyle[c.labelName]||0):E.pfValue}return 1}},xf["outer"+c.uppercaseName]=function(){var m=this[0];if(m)return m._private.cy._private.styleEnabled?m[c.name]()+m.pstyle("border-width").pfValue+2*m.padding():1},xf["rendered"+c.uppercaseName]=function(){var m=this[0];if(m)return m[c.name]()*this.cy().zoom()},xf["rendered"+c.uppercaseOuterName]=function(){var m=this[0];if(m)return m[c.outerName]()*this.cy().zoom()}};$g({name:"width"}),$g({name:"height"}),Ud.padding=function(){var f=this[0],c=f._private;return f.isParent()?(f.updateCompoundBounds(),void 0!==c.autoPadding?c.autoPadding:f.pstyle("padding").pfValue):f.pstyle("padding").pfValue},Ud.paddedHeight=function(){var f=this[0];return f.height()+2*f.padding()},Ud.paddedWidth=function(){var f=this[0];return f.width()+2*f.padding()};var Fh=Ud,Pv={controlPoints:{get:function(c){return c.renderer().getControlPoints(c)},mult:!0},segmentPoints:{get:function(c){return c.renderer().getSegmentPoints(c)},mult:!0},sourceEndpoint:{get:function(c){return c.renderer().getSourceEndpoint(c)}},targetEndpoint:{get:function(c){return c.renderer().getTargetEndpoint(c)}},midpoint:{get:function(c){return c.renderer().getEdgeMidpoint(c)}}},kv=Object.keys(Pv).reduce(function(f,c){var d=Pv[c],m=function(c){return"rendered"+c[0].toUpperCase()+c.substr(1)}(c);return f[c]=function(){return function(c,d){if(c.isEdge())return d(c)}(this,d.get)},f[m]=d.mult?function(){return function(c,d){if(c.isEdge()){var m=c.cy(),_=m.pan(),C=m.zoom();return d(c).map(function(A){return Ko(A,C,_)})}}(this,d.get)}:function(){return function(c,d){if(c.isEdge()){var m=c.cy();return Ko(d(c),m.zoom(),m.pan())}}(this,d.get)},f},{}),gb=tr({},Gg,Rm,Fh,kv),Yp=function(c,d){this.recycle(c,d)};function ll(){return!1}function Gd(){return!0}Yp.prototype={instanceString:function(){return"event"},recycle:function(c,d){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ll,null!=c&&c.preventDefault?(this.type=c.type,this.isDefaultPrevented=c.defaultPrevented?Gd:ll):null!=c&&c.type?d=c:this.type=c,null!=d&&(this.originalEvent=d.originalEvent,this.type=null!=d.type?d.type:this.type,this.cy=d.cy,this.target=d.target,this.position=d.position,this.renderedPosition=d.renderedPosition,this.namespace=d.namespace,this.layout=d.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var m=this.position,_=this.cy.zoom(),C=this.cy.pan();this.renderedPosition={x:m.x*_+C.x,y:m.y*_+C.y}}this.timeStamp=c&&c.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Gd;var c=this.originalEvent;!c||c.preventDefault&&c.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Gd;var c=this.originalEvent;!c||c.stopPropagation&&c.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Gd,this.stopPropagation()},isDefaultPrevented:ll,isPropagationStopped:ll,isImmediatePropagationStopped:ll};var Nh=/^([^.]+)(\.(?:[^.]+))?$/,Bh={qualifierCompare:function(c,d){return c===d},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(c){return c},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},dh=Object.keys(Bh),zu={};function mu(){for(var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zu,c=arguments.length>1?arguments[1]:void 0,d=0;d<dh.length;d++){var m=dh[d];this[m]=f[m]||Bh[m]}this.context=c||this.context,this.listeners=[],this.emitting=0}var la=mu.prototype,cd=function(c,d,m,_,C,A,E){qe(_)&&(C=_,_=null),E&&(A=null==A?E:tr({},A,E));for(var B=ot(m)?m:m.split(/\s+/),P=0;P<B.length;P++){var q=B[P];if(!ce(q)){var Q=q.match(Nh);if(Q&&!1===d(c,q,Q[1],Q[2]?Q[2]:null,_,C,A))break}}},Pm=function(c,d){return c.addEventFields(c.context,d),new Yp(d.type,d)};la.on=la.addListener=function(f,c,d,m,_){return cd(this,function(C,A,E,B,P,q,Q){qe(q)&&C.listeners.push({event:A,callback:q,type:E,namespace:B,qualifier:P,conf:Q})},f,c,d,m,_),this},la.one=function(f,c,d,m){return this.on(f,c,d,m,{one:!0})},la.removeListener=la.off=function(f,c,d,m){var _=this;0!==this.emitting&&(this.listeners=function(c){return c.slice()}(this.listeners));for(var C=this.listeners,A=function(P){var q=C[P];cd(_,function(Q,fe,me,_e,Pe,$e){if((q.type===me||"*"===f)&&(!_e&&".*"!==q.namespace||q.namespace===_e)&&(!Pe||Q.qualifierCompare(q.qualifier,Pe))&&(!$e||q.callback===$e))return C.splice(P,1),!1},f,c,d,m)},E=C.length-1;E>=0;E--)A(E);return this},la.removeAllListeners=function(){return this.removeListener("*")},la.emit=la.trigger=function(f,c,d){var m=this.listeners,_=m.length;return this.emitting++,ot(c)||(c=[c]),function(c,d,m){if(function(c){return"event"===Je(c)}(m))d(c,m);else if(yt(m))d(c,Pm(c,m));else for(var _=ot(m)?m:m.split(/\s+/),C=0;C<_.length;C++){var A=_[C];if(!ce(A)){var E=A.match(Nh);E&&d(c,Pm(c,{type:E[1],namespace:E[2]?E[2]:null,target:c.context}))}}}(this,function(C,A){null!=d&&(_=(m=[{event:A.event,type:A.type,namespace:A.namespace,callback:d}]).length);for(var E=function(q){var Q=m[q];if(Q.type===A.type&&(!Q.namespace||Q.namespace===A.namespace||".*"===Q.namespace)&&C.eventMatches(C.context,Q,A)){var fe=[A];null!=c&&function(c,d){for(var m=0;m<d.length;m++)c.push(d[m])}(fe,c),C.beforeEmit(C.context,Q,A),Q.conf&&Q.conf.one&&(C.listeners=C.listeners.filter(function(Pe){return Pe!==Q}));var me=C.callbackContext(C.context,Q,A),_e=Q.callback.apply(me,fe);C.afterEmit(C.context,Q,A),!1===_e&&(A.stopPropagation(),A.preventDefault())}},B=0;B<_;B++)E(B);C.bubble(C.context)&&!A.isPropagationStopped()&&C.parent(C.context).emit(A,c)},f),this.emitting--,this};var cl={qualifierCompare:function(c,d){return null==c||null==d?null==c&&null==d:c.sameText(d)},eventMatches:function(c,d,m){var _=d.qualifier;return null==_||c!==m.target&&bt(m.target)&&_.matches(m.target)},addEventFields:function(c,d){d.cy=c.cy(),d.target=c},callbackContext:function(c,d,m){return null!=d.qualifier?m.target:c},beforeEmit:function(c,d){d.conf&&d.conf.once&&d.conf.onceCollection.removeListener(d.event,d.qualifier,d.callback)},bubble:function(){return!0},parent:function(c){return c.isChild()?c.parent():c.cy()}},vu=function(c){return ke(c)?new op(c):c},Co={createEmitter:function(){for(var c=0;c<this.length;c++){var d=this[c],m=d._private;m.emitter||(m.emitter=new mu(cl,d))}return this},emitter:function(){return this._private.emitter},on:function(c,d,m){for(var _=vu(d),C=0;C<this.length;C++)this[C].emitter().on(c,_,m);return this},removeListener:function(c,d,m){for(var _=vu(d),C=0;C<this.length;C++)this[C].emitter().removeListener(c,_,m);return this},removeAllListeners:function(){for(var c=0;c<this.length;c++)this[c].emitter().removeAllListeners();return this},one:function(c,d,m){for(var _=vu(d),C=0;C<this.length;C++)this[C].emitter().one(c,_,m);return this},once:function(c,d,m){for(var _=vu(d),C=0;C<this.length;C++)this[C].emitter().on(c,_,m,{once:!0,onceCollection:this})},emit:function(c,d){for(var m=0;m<this.length;m++)this[m].emitter().emit(c,d);return this},emitAndNotify:function(c,d){if(0!==this.length)return this.cy().notify(c,this),this.emit(c,d),this}};Cs.eventAliasesOn(Co);var Oc={nodes:function(c){return this.filter(function(d){return d.isNode()}).filter(c)},edges:function(c){return this.filter(function(d){return d.isEdge()}).filter(c)},byGroup:function(){for(var c=this.spawn(),d=this.spawn(),m=0;m<this.length;m++){var _=this[m];_.isNode()?c.push(_):d.push(_)}return{nodes:c,edges:d}},filter:function(c,d){if(void 0===c)return this;if(ke(c)||Ge(c))return new op(c).filter(this);if(qe(c)){for(var m=this.spawn(),_=this,C=0;C<_.length;C++){var A=_[C];(d?c.apply(d,[A,C,_]):c(A,C,_))&&m.push(A)}return m}return this.spawn()},not:function(c){if(c){ke(c)&&(c=this.filter(c));for(var d=this.spawn(),m=0;m<this.length;m++){var _=this[m];c.has(_)||d.push(_)}return d}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(c){if(ke(c))return this.filter(c);for(var m=this.spawn(),A=this.length<c.length,E=A?this:c,B=A?c:this,P=0;P<E.length;P++){var q=E[P];B.has(q)&&m.push(q)}return m},xor:function(c){var d=this._private.cy;ke(c)&&(c=d.$(c));var m=this.spawn(),C=c,A=function(B,P){for(var q=0;q<B.length;q++){var Q=B[q];P.hasElementWithId(Q._private.data.id)||m.push(Q)}};return A(this,C),A(C,this),m},diff:function(c){var d=this._private.cy;ke(c)&&(c=d.$(c));var m=this.spawn(),_=this.spawn(),C=this.spawn(),E=c,B=function(q,Q,fe){for(var me=0;me<q.length;me++){var _e=q[me];Q.hasElementWithId(_e._private.data.id)?C.merge(_e):fe.push(_e)}};return B(this,E,m),B(E,this,_),{left:m,right:_,both:C}},add:function(c){var d=this._private.cy;if(!c)return this;if(ke(c)){var m=c;c=d.mutableElements().filter(m)}for(var _=this.spawnSelf(),C=0;C<c.length;C++){var A=c[C];!this.has(A)&&_.push(A)}return _},merge:function(c){var d=this._private,m=d.cy;if(!c)return this;if(c&&ke(c)){var _=c;c=m.mutableElements().filter(_)}for(var C=d.map,A=0;A<c.length;A++){var E=c[A],B=E._private.data.id;if(!C.has(B)){var q=this.length++;this[q]=E,C.set(B,{ele:E,index:q})}}return this},unmergeAt:function(c){var m=this[c].id(),C=this._private.map;if(this[c]=void 0,C.delete(m),this.length>1&&c!==this.length-1){var E=this.length-1,B=this[E],P=B._private.data.id;this[E]=void 0,this[c]=B,C.set(P,{ele:B,index:c})}return this.length--,this},unmergeOne:function(c){var C=this._private.map.get((c=c[0])._private.data.id);return C?(this.unmergeAt(C.index),this):this},unmerge:function(c){var d=this._private.cy;if(!c)return this;if(c&&ke(c)){var m=c;c=d.mutableElements().filter(m)}for(var _=0;_<c.length;_++)this.unmergeOne(c[_]);return this},unmergeBy:function(c){for(var d=this.length-1;d>=0;d--)c(this[d])&&this.unmergeAt(d);return this},map:function(c,d){for(var m=[],_=this,C=0;C<_.length;C++){var A=_[C],E=d?c.apply(d,[A,C,_]):c(A,C,_);m.push(E)}return m},reduce:function(c,d){for(var m=d,_=this,C=0;C<_.length;C++)m=c(m,_[C],C,_);return m},max:function(c,d){for(var _,m=-1/0,C=this,A=0;A<C.length;A++){var E=C[A],B=d?c.apply(d,[E,A,C]):c(E,A,C);B>m&&(m=B,_=E)}return{value:m,ele:_}},min:function(c,d){for(var _,m=1/0,C=this,A=0;A<C.length;A++){var E=C[A],B=d?c.apply(d,[E,A,C]):c(E,A,C);B<m&&(m=B,_=E)}return{value:m,ele:_}}},$s=Oc;$s.u=$s["|"]=$s["+"]=$s.union=$s.or=$s.add,$s["\\"]=$s["!"]=$s["-"]=$s.difference=$s.relativeComplement=$s.subtract=$s.not,$s.n=$s["&"]=$s["."]=$s.and=$s.intersection=$s.intersect,$s["^"]=$s["(+)"]=$s["(-)"]=$s.symmetricDifference=$s.symdiff=$s.xor,$s.fnFilter=$s.filterFn=$s.stdFilter=$s.filter,$s.complement=$s.abscomp=$s.absoluteComplement;var c,cp=function(c,d){var _=c.cy().hasCompoundNodes();function C(q){var Q=q.pstyle("z-compound-depth");return"auto"===Q.value?_?q.zDepth():0:"bottom"===Q.value?-1:"top"===Q.value?Sc:0}var A=C(c)-C(d);if(0!==A)return A;function E(q){return"auto"===q.pstyle("z-index-compare").value&&q.isNode()?1:0}var B=E(c)-E(d);if(0!==B)return B;var P=c.pstyle("z-index").value-d.pstyle("z-index").value;return 0!==P?P:c.poolIndex()-d.poolIndex()},Fc={forEach:function(c,d){if(qe(c))for(var m=this.length,_=0;_<m;_++){var C=this[_];if(!1===(d?c.apply(d,[C,_,this]):c(C,_,this)))break}return this},toArray:function(){for(var c=[],d=0;d<this.length;d++)c.push(this[d]);return c},slice:function(c,d){var m=[],_=this.length;null==d&&(d=_),null==c&&(c=0),c<0&&(c=_+c),d<0&&(d=_+d);for(var C=c;C>=0&&C<d&&C<_;C++)m.push(this[C]);return this.spawn(m)},size:function(){return this.length},eq:function(c){return this[c]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(c){if(!qe(c))return this;var d=this.toArray().sort(c);return this.spawn(d)},sortByZIndex:function(){return this.sort(cp)},zDepth:function(){var c=this[0];if(c){var d=c._private;if("nodes"===d.group){var _=d.data.parent?c.parents().size():0;return c.isParent()?_:Sc-1}var A=d.target,E=d.source.zDepth(),B=A.zDepth();return Math.max(E,B,0)}}};Fc.each=Fc.forEach,c="undefined",(typeof Symbol>"u"?"undefined":ie(Symbol))!=c&&ie(Symbol.iterator)!=c&&(Fc[Symbol.iterator]=function(){var m=this,_={value:void 0,done:!1},C=0,A=this.length;return ye({next:function(){return C<A?_.value=m[C++]:(_.value=void 0,_.done=!0),_}},Symbol.iterator,function(){return this})});var Xg=oi({nodeDimensionsIncludeLabels:!1}),fh={layoutDimensions:function(c){var d;if(c=Xg(c),this.takesUpSpace())if(c.nodeDimensionsIncludeLabels){var m=this.boundingBox();d={w:m.w,h:m.h}}else d={w:this.outerWidth(),h:this.outerHeight()};else d={w:0,h:0};return(0===d.w||0===d.h)&&(d.w=d.h=1),d},layoutPositions:function(c,d,m){var _=this.nodes().filter(function(Gt){return!Gt.isParent()}),C=this.cy(),A=d.eles,E=function(Wt){return Wt.id()},B=Dt(m,E);c.emit({type:"layoutstart",layout:c}),c.animations=[];var q=d.spacingFactor&&1!==d.spacingFactor,fe=function(){if(!q)return null;for(var Wt=Mc(),Tt=0;Tt<_.length;Tt++){var Pt=B(_[Tt],Tt);ha(Wt,Pt.x,Pt.y)}return Wt}(),me=Dt(function(Gt,Wt){var Tt=B(Gt,Wt);return q&&(Tt=function(Wt,Tt,jt){var Pt_x=Tt.x1+Tt.w/2,Pt_y=Tt.y1+Tt.h/2;return{x:Pt_x+(jt.x-Pt_x)*Wt,y:Pt_y+(jt.y-Pt_y)*Wt}}(Math.abs(d.spacingFactor),fe,Tt)),null!=d.transform&&(Tt=d.transform(Gt,Tt)),Tt},E);if(d.animate){for(var _e=0;_e<_.length;_e++){var Pe=_[_e],$e=me(Pe,_e);if(null==d.animateFilter||d.animateFilter(Pe,_e)){var ht=Pe.animation({position:$e,duration:d.animationDuration,easing:d.animationEasing});c.animations.push(ht)}else Pe.position($e)}if(d.fit){var rt=C.animation({fit:{boundingBox:A.boundingBoxAt(me),padding:d.padding},duration:d.animationDuration,easing:d.animationEasing});c.animations.push(rt)}else if(void 0!==d.zoom&&void 0!==d.pan){var St=C.animation({zoom:d.zoom,pan:d.pan,duration:d.animationDuration,easing:d.animationEasing});c.animations.push(St)}c.animations.forEach(function(Gt){return Gt.play()}),c.one("layoutready",d.ready),c.emit({type:"layoutready",layout:c}),sa.all(c.animations.map(function(Gt){return Gt.promise()})).then(function(){c.one("layoutstop",d.stop),c.emit({type:"layoutstop",layout:c})})}else _.positions(me),d.fit&&C.fit(d.eles,d.padding),null!=d.zoom&&C.zoom(d.zoom),d.pan&&C.pan(d.pan),c.one("layoutready",d.ready),c.emit({type:"layoutready",layout:c}),c.one("layoutstop",d.stop),c.emit({type:"layoutstop",layout:c});return this},layout:function(c){return this.cy().makeLayout(tr({},c,{eles:this}))}};function Wd(f,c,d){var C,m=d._private,_=m.styleCache=m.styleCache||[];return null!=(C=_[f])||(C=_[f]=c(d)),C}function jd(f,c){return f=Ic(f),function(m){return Wd(f,c,m)}}function Ql(f,c){f=Ic(f);var d=function(_){return c.call(_)};return function(){var _=this[0];if(_)return Wd(f,d,_)}}fh.createLayout=fh.makeLayout=fh.layout;var ul={recalculateRenderedStyle:function(c){var d=this.cy(),m=d.renderer(),_=d.styleEnabled();return m&&_&&m.recalculateRenderedStyle(this,c),this},dirtyStyleCache:function(){var m,c=this.cy(),d=function(C){return C._private.styleCache=null};return c.hasCompoundNodes()?((m=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(m.connectedEdges()),m.forEach(d)):this.forEach(function(_){d(_),_.connectedEdges().forEach(d)}),this},updateStyle:function(c){var d=this._private.cy;if(!d.styleEnabled())return this;if(d.batching())return d._private.batchStyleEles.merge(this),this;var C=this;c=!(!c&&void 0!==c),d.hasCompoundNodes()&&(C=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var A=C;return c?A.emitAndNotify("style"):A.emit("style"),C.forEach(function(E){return E._private.styleDirty=!0}),this},cleanStyle:function(){var c=this.cy();if(c.styleEnabled())for(var d=0;d<this.length;d++){var m=this[d];m._private.styleDirty&&(m._private.styleDirty=!1,c.style().apply(m))}},parsedStyle:function(c){var d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=this[0],_=m.cy();if(_.styleEnabled()&&m){this.cleanStyle();var C=m._private.style[c];return C??(d?_.style().getDefaultProperty(c):null)}},numericStyle:function(c){var d=this[0];if(d.cy().styleEnabled()&&d){var m=d.pstyle(c);return void 0!==m.pfValue?m.pfValue:m.value}},numericStyleUnits:function(c){var d=this[0];if(d.cy().styleEnabled()&&d)return d.pstyle(c).units},renderedStyle:function(c){var d=this.cy();if(!d.styleEnabled())return this;var m=this[0];return m?d.style().getRenderedStyle(m,c):void 0},style:function(c,d){var m=this.cy();if(!m.styleEnabled())return this;var C=m.style();if(yt(c))C.applyBypass(this,c,!1),this.emitAndNotify("style");else if(ke(c)){if(void 0===d){var E=this[0];return E?C.getStylePropertyValue(E,c):void 0}C.applyBypass(this,c,d,!1),this.emitAndNotify("style")}else if(void 0===c){var B=this[0];return B?C.getRawStyle(B):void 0}return this},removeStyle:function(c){var d=this.cy();if(!d.styleEnabled())return this;var _=d.style(),C=this;if(void 0===c)for(var A=0;A<C.length;A++)_.removeAllBypasses(C[A],!1);else{c=c.split(/\s+/);for(var B=0;B<C.length;B++)_.removeBypasses(C[B],c,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var c=this.cy();if(!c.styleEnabled())return 1;var d=c.hasCompoundNodes(),m=this[0];if(m){var _=m._private,C=m.pstyle("opacity").value;if(!d)return C;var A=_.data.parent?m.parents():null;if(A)for(var E=0;E<A.length;E++)C*=A[E].pstyle("opacity").value;return C}},transparent:function(){if(!this.cy().styleEnabled())return!1;var d=this[0],m=d.cy().hasCompoundNodes();return d?m?0===d.effectiveOpacity():0===d.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function zh(f,c){var m=f._private.data.parent?f.parents():null;if(m)for(var _=0;_<m.length;_++)if(!c(m[_]))return!1;return!0}function tu(f){var c=f.ok,d=f.edgeOkViaNode||f.ok,m=f.parentOk||f.ok;return function(){var _=this.cy();if(!_.styleEnabled())return!0;var C=this[0],A=_.hasCompoundNodes();if(C){var E=C._private;if(!c(C))return!1;if(C.isNode())return!A||zh(C,m);var B=E.source,P=E.target;return d(B)&&(!A||zh(B,d))&&(B===P||d(P)&&(!A||zh(P,d)))}}}var ud=jd("eleTakesUpSpace",function(f){return"element"===f.pstyle("display").value&&0!==f.width()&&(!f.isNode()||0!==f.height())});ul.takesUpSpace=Ql("takesUpSpace",tu({ok:ud}));var $d=jd("eleInteractive",function(f){return"yes"===f.pstyle("events").value&&"visible"===f.pstyle("visibility").value&&ud(f)}),hp=jd("parentInteractive",function(f){return"visible"===f.pstyle("visibility").value&&ud(f)});ul.interactive=Ql("interactive",tu({ok:$d,parentOk:hp,edgeOkViaNode:ud})),ul.noninteractive=function(){var f=this[0];if(f)return!f.interactive()};var ph=jd("eleVisible",function(f){return"visible"===f.pstyle("visibility").value&&0!==f.pstyle("opacity").pfValue&&ud(f)});ul.visible=Ql("visible",tu({ok:ph,edgeOkViaNode:ud})),ul.hidden=function(){var f=this[0];if(f)return!f.visible()},ul.isBundledBezier=Ql("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),ul.bypass=ul.css=ul.style,ul.renderedCss=ul.renderedStyle,ul.removeBypass=ul.removeCss=ul.removeStyle,ul.pstyle=ul.parsedStyle;var jo={};function qd(f){return function(){var c=arguments,d=[];if(2===c.length){var m=c[0],_=c[1];this.on(f.event,m,_)}else if(1===c.length&&qe(c[0])){var C=c[0];this.on(f.event,C)}else if(0===c.length||1===c.length&&ot(c[0])){for(var A=1===c.length?c[0]:null,E=0;E<this.length;E++){var B=this[E],P=!f.ableField||B._private[f.ableField],q=B._private[f.field]!=f.value;if(f.overrideAble){var Q=f.overrideAble(B);if(void 0!==Q&&(P=Q,!Q))return this}P&&(B._private[f.field]=f.value,q&&d.push(B))}var fe=this.spawn(d);fe.updateStyle(),fe.emit(f.event),A&&fe.emit(A)}return this}}function Vh(f){jo[f.field]=function(){var c=this[0];if(c){if(f.overrideField){var d=f.overrideField(c);if(void 0!==d)return d}return c._private[f.field]}},jo[f.on]=qd({event:f.on,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!0}),jo[f.off]=qd({event:f.off,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!1})}Vh({field:"locked",overrideField:function(c){return!!c.cy().autolock()||void 0},on:"lock",off:"unlock"}),Vh({field:"grabbable",overrideField:function(c){return!c.cy().autoungrabify()&&!c.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Vh({field:"selected",ableField:"selectable",overrideAble:function(c){return!c.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Vh({field:"selectable",overrideField:function(c){return!c.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),jo.deselect=jo.unselect,jo.grabbed=function(){var f=this[0];if(f)return f._private.grabbed},Vh({field:"active",on:"activate",off:"unactivate"}),Vh({field:"pannable",on:"panify",off:"unpanify"}),jo.inactive=function(){var f=this[0];if(f)return!f._private.active};var Qa={},hd=function(c){return function(m){for(var C=[],A=0;A<this.length;A++){var E=this[A];if(E.isNode()){for(var B=!1,P=E.connectedEdges(),q=0;q<P.length;q++){var Q=P[q],fe=Q.source(),me=Q.target();if(c.noIncomingEdges&&me===E&&fe!==E||c.noOutgoingEdges&&fe===E&&me!==E){B=!0;break}}B||C.push(E)}}return this.spawn(C,!0).filter(m)}},Vu=function(c){return function(d){for(var _=[],C=0;C<this.length;C++){var A=this[C];if(A.isNode())for(var E=A.connectedEdges(),B=0;B<E.length;B++){var P=E[B],q=P.source(),Q=P.target();c.outgoing&&q===A?(_.push(P),_.push(Q)):c.incoming&&Q===A&&(_.push(P),_.push(q))}}return this.spawn(_,!0).filter(d)}},Uh=function(c){return function(d){for(var m=this,_=[],C={};;){var A=c.outgoing?m.outgoers():m.incomers();if(0===A.length)break;for(var E=!1,B=0;B<A.length;B++){var P=A[B],q=P.id();C[q]||(C[q]=!0,_.push(P),E=!0)}if(!E)break;m=A}return this.spawn(_,!0).filter(d)}};function Ra(f){return function(d){for(var m=[],_=0;_<this.length;_++){var A=this[_]._private[f.attr];A&&m.push(A)}return this.spawn(m,!0).filter(d)}}function nu(f){return function(d){var m=[],_=this._private.cy,C=f||{};ke(d)&&(d=_.$(d));for(var A=0;A<d.length;A++)for(var E=d[A]._private.edges,B=0;B<E.length;B++){var P=E[B],q=P._private.data,Q=this.hasElementWithId(q.source)&&d.hasElementWithId(q.target),fe=d.hasElementWithId(q.source)&&this.hasElementWithId(q.target);!Q&&!fe||(C.thisIsSrc||C.thisIsTgt)&&(C.thisIsSrc&&!Q||C.thisIsTgt&&!fe)||m.push(P)}return this.spawn(m,!0)}}function dd(f){return f=tr({},{codirected:!1},f),function(m){for(var _=[],C=this.edges(),A=f,E=0;E<C.length;E++)for(var P=C[E]._private,q=P.source,Q=q._private.data.id,fe=P.data.target,me=q._private.edges,_e=0;_e<me.length;_e++){var Pe=me[_e],$e=Pe._private.data,Ke=$e.target,ht=$e.source,rt=Ke===fe&&ht===Q;(A.codirected&&rt||!A.codirected&&(rt||Q===Ke&&fe===ht))&&_.push(Pe)}return this.spawn(_,!0).filter(m)}}Qa.clearTraversalCache=function(){for(var f=0;f<this.length;f++)this[f]._private.traversalCache=null},tr(Qa,{roots:hd({noIncomingEdges:!0}),leaves:hd({noOutgoingEdges:!0}),outgoers:Ca(Vu({outgoing:!0}),"outgoers"),successors:Uh({outgoing:!0}),incomers:Ca(Vu({incoming:!0}),"incomers"),predecessors:Uh({incoming:!0})}),tr(Qa,{neighborhood:Ca(function(f){for(var c=[],d=this.nodes(),m=0;m<d.length;m++)for(var _=d[m],C=_.connectedEdges(),A=0;A<C.length;A++){var E=C[A],B=E.source(),P=E.target(),q=_===B?P:B;q.length>0&&c.push(q[0]),c.push(E[0])}return this.spawn(c,!0).filter(f)},"neighborhood"),closedNeighborhood:function(c){return this.neighborhood().add(this).filter(c)},openNeighborhood:function(c){return this.neighborhood(c)}}),Qa.neighbourhood=Qa.neighborhood,Qa.closedNeighbourhood=Qa.closedNeighborhood,Qa.openNeighbourhood=Qa.openNeighborhood,tr(Qa,{source:Ca(function(c){var m,d=this[0];return d&&(m=d._private.source||d.cy().collection()),m&&c?m.filter(c):m},"source"),target:Ca(function(c){var m,d=this[0];return d&&(m=d._private.target||d.cy().collection()),m&&c?m.filter(c):m},"target"),sources:Ra({attr:"source"}),targets:Ra({attr:"target"})}),tr(Qa,{edgesWith:Ca(nu(),"edgesWith"),edgesTo:Ca(nu({thisIsSrc:!0}),"edgesTo")}),tr(Qa,{connectedEdges:Ca(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];if(_.isNode())for(var C=_._private.edges,A=0;A<C.length;A++)c.push(C[A])}return this.spawn(c,!0).filter(f)},"connectedEdges"),connectedNodes:Ca(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];!_.isEdge()||(c.push(_.source()[0]),c.push(_.target()[0]))}return this.spawn(c,!0).filter(f)},"connectedNodes"),parallelEdges:Ca(dd(),"parallelEdges"),codirectedEdges:Ca(dd({codirected:!0}),"codirectedEdges")}),tr(Qa,{components:function(c){var d=this,m=d.cy(),_=m.collection(),C=null==c?d.nodes():c.nodes(),A=[];null!=c&&C.empty()&&(C=c.sources());var E=function(q,Q){_.merge(q),C.unmerge(q),Q.merge(q)};if(C.empty())return d.spawn();var B=function(){var q=m.collection();A.push(q);var Q=C[0];E(Q,q),d.bfs({directed:!1,roots:Q,visit:function(me){return E(me,q)}}),q.forEach(function(fe){fe.connectedEdges().forEach(function(me){d.has(me)&&q.has(me.source())&&q.has(me.target())&&q.merge(me)})})};do{B()}while(C.length>0);return A},component:function(){var c=this[0];return c.cy().mutableElements().components(c)[0]}}),Qa.componentsOf=Qa.components;var ca=function(c,d){var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==c){var _=new Eo,C=!1;if(d){if(d.length>0&&yt(d[0])&&!bt(d[0])){C=!0;for(var A=[],E=new ms,B=0,P=d.length;B<P;B++){var q=d[B];null==q.data&&(q.data={});var Q=q.data;if(null==Q.id)Q.id=Yt();else if(c.hasElementWithId(Q.id)||E.has(Q.id))continue;var fe=new Ya(c,q,!1);A.push(fe),E.add(Q.id)}d=A}}else d=[];this.length=0;for(var me=0,_e=d.length;me<_e;me++){var Pe=d[me][0];if(null!=Pe){var $e=Pe._private.data.id;(!m||!_.has($e))&&(m&&_.set($e,{index:this.length,ele:Pe}),this[this.length]=Pe,this.length++)}}this._private={eles:this,cy:c,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(Ke){this.lazyMap=Ke},rebuildMap:function(){for(var ht=this.lazyMap=new Eo,rt=this.eles,St=0;St<rt.length;St++){var Gt=rt[St];ht.set(Gt.id(),{index:St,ele:Gt})}}},m&&(this._private.map=_),C&&this.restore()}else mt("A collection must have a reference to the core")},$o=Ya.prototype=ca.prototype=Object.create(Array.prototype);$o.instanceString=function(){return"collection"},$o.spawn=function(f,c){return new ca(this.cy(),f,c)},$o.spawnSelf=function(){return this.spawn(this)},$o.cy=function(){return this._private.cy},$o.renderer=function(){return this._private.cy.renderer()},$o.element=function(){return this[0]},$o.collection=function(){return wt(this)?this:new ca(this._private.cy,[this])},$o.unique=function(){return new ca(this._private.cy,this,!0)},$o.hasElementWithId=function(f){return this._private.map.has(f=""+f)},$o.getElementById=function(f){var c=this._private.cy,d=this._private.map.get(f=""+f);return d?d.ele:new ca(c)},$o.$id=$o.getElementById,$o.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},$o.indexOf=function(f){return this._private.map.get(f[0]._private.data.id).index},$o.indexOfId=function(f){return this._private.map.get(f=""+f).index},$o.json=function(f){var c=this.element(),d=this.cy();if(null==c&&f)return this;if(null!=c){var m=c._private;if(yt(f)){if(d.startBatch(),f.data){c.data(f.data);var _=m.data;if(c.isEdge()){var C=!1,A={},E=f.data.source,B=f.data.target;null!=E&&E!=_.source&&(A.source=""+E,C=!0),null!=B&&B!=_.target&&(A.target=""+B,C=!0),C&&(c=c.move(A))}else{var q=f.data.parent;"parent"in f.data&&(null!=q||null!=_.parent)&&q!=_.parent&&(void 0===q&&(q=null),null!=q&&(q=""+q),c=c.move({parent:q}))}}f.position&&c.position(f.position);var Q=function(Pe,$e,Ke){var ht=f[Pe];null!=ht&&ht!==m[Pe]&&(ht?c[$e]():c[Ke]())};return Q("removed","remove","restore"),Q("selected","select","unselect"),Q("selectable","selectify","unselectify"),Q("locked","lock","unlock"),Q("grabbable","grabify","ungrabify"),Q("pannable","panify","unpanify"),null!=f.classes&&c.classes(f.classes),d.endBatch(),this}if(void 0===f){var fe={data:it(m.data),position:it(m.position),group:m.group,removed:m.removed,selected:m.selected,selectable:m.selectable,locked:m.locked,grabbable:m.grabbable,pannable:m.pannable,classes:""},me=0;return m.classes.forEach(function(_e){return fe.classes+=0==me++?_e:" "+_e}),fe}}},$o.jsons=function(){for(var f=[],c=0;c<this.length;c++){var m=this[c].json();f.push(m)}return f},$o.clone=function(){for(var f=this.cy(),c=[],d=0;d<this.length;d++){var _=this[d].json(),C=new Ya(f,_,!1);c.push(C)}return new ca(f,c)},$o.copy=$o.clone,$o.restore=function(){for(var E,f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this,m=d.cy(),_=m._private,C=[],A=[],B=0,P=d.length;B<P;B++){var q=d[B];c&&!q.removed()||(q.isNode()?C.push(q):A.push(q))}E=C.concat(A);var Q,fe=function(){E.splice(Q,1),Q--};for(Q=0;Q<E.length;Q++){var me=E[Q],_e=me._private,Pe=_e.data;if(me.clearTraversalCache(),c||_e.removed)if(void 0===Pe.id)Pe.id=Yt();else if(Be(Pe.id))Pe.id=""+Pe.id;else{if(ce(Pe.id)||!ke(Pe.id)){mt("Can not create element with invalid string ID `"+Pe.id+"`"),fe();continue}if(m.hasElementWithId(Pe.id)){mt("Can not create second element with ID `"+Pe.id+"`"),fe();continue}}var $e=Pe.id;if(me.isNode()){var Ke=_e.position;null==Ke.x&&(Ke.x=0),null==Ke.y&&(Ke.y=0)}if(me.isEdge()){for(var ht=me,rt=["source","target"],St=rt.length,Gt=!1,Wt=0;Wt<St;Wt++){var Tt=rt[Wt],jt=Pe[Tt];Be(jt)&&(jt=Pe[Tt]=""+Pe[Tt]),null==jt||""===jt?(mt("Can not create edge `"+$e+"` with unspecified "+Tt),Gt=!0):m.hasElementWithId(jt)||(mt("Can not create edge `"+$e+"` with nonexistant "+Tt+" `"+jt+"`"),Gt=!0)}if(Gt){fe();continue}var Pt=m.getElementById(Pe.source),Zt=m.getElementById(Pe.target);Pt.same(Zt)?Pt._private.edges.push(ht):(Pt._private.edges.push(ht),Zt._private.edges.push(ht)),ht._private.source=Pt,ht._private.target=Zt}_e.map=new Eo,_e.map.set($e,{ele:me,index:0}),_e.removed=!1,c&&m.addToPool(me)}for(var Kt=0;Kt<C.length;Kt++){var dt=C[Kt],Qt=dt._private.data;Be(Qt.parent)&&(Qt.parent=""+Qt.parent);var Ht=Qt.parent,xn=null!=Ht;if(xn){var sn=m.getElementById(Ht);if(sn.empty())Qt.parent=void 0;else{for(var vn=!1,Ln=sn;!Ln.empty();){if(dt.same(Ln)){vn=!0,Qt.parent=void 0;break}Ln=Ln.parent()}vn||(sn[0]._private.children.push(dt),dt._private.parent=sn[0],_.hasCompoundNodes=!0)}}}if(E.length>0){for(var Fn=E.length===d.length?d:new ca(m,E),ri=0;ri<Fn.length;ri++){var Rn=Fn[ri];Rn.isNode()||(Rn.parallelEdges().clearTraversalCache(),Rn.source().clearTraversalCache(),Rn.target().clearTraversalCache())}(_.hasCompoundNodes?m.collection().merge(Fn).merge(Fn.connectedNodes()).merge(Fn.parent()):Fn).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(f),f?Fn.emitAndNotify("add"):c&&Fn.emit("add")}return d},$o.removed=function(){var f=this[0];return f&&f._private.removed},$o.inside=function(){var f=this[0];return f&&!f._private.removed},$o.remove=function(){var f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this,m=[],_={},C=d._private.cy;function A(Ht){for(var xn=Ht._private.edges,sn=0;sn<xn.length;sn++)B(xn[sn])}function E(Ht){for(var xn=Ht._private.children,sn=0;sn<xn.length;sn++)B(xn[sn])}function B(Ht){var xn=_[Ht.id()];c&&Ht.removed()||xn||(_[Ht.id()]=!0,Ht.isNode()?(m.push(Ht),A(Ht),E(Ht)):m.unshift(Ht))}for(var P=0,q=d.length;P<q;P++){var Q=d[P];B(Q)}function fe(Ht,xn){gi(Ht._private.edges,xn),Ht.clearTraversalCache()}function me(Ht){Ht.clearTraversalCache()}var _e=[];function Pe(Ht,xn){xn=xn[0];var sn=(Ht=Ht[0])._private.children,vn=Ht.id();gi(sn,xn),xn._private.parent=null,_e.ids[vn]||(_e.ids[vn]=!0,_e.push(Ht))}_e.ids={},d.dirtyCompoundBoundsCache(),c&&C.removeFromPool(m);for(var $e=0;$e<m.length;$e++){var Ke=m[$e];if(Ke.isEdge()){var ht=Ke.source()[0],rt=Ke.target()[0];fe(ht,Ke),fe(rt,Ke);for(var St=Ke.parallelEdges(),Gt=0;Gt<St.length;Gt++){var Wt=St[Gt];me(Wt),Wt.isBundledBezier()&&Wt.dirtyBoundingBoxCache()}}else{var Tt=Ke.parent();0!==Tt.length&&Pe(Tt,Ke)}c&&(Ke._private.removed=!0)}var jt=C._private.elements;C._private.hasCompoundNodes=!1;for(var Pt=0;Pt<jt.length;Pt++){var Zt=jt[Pt];if(Zt.isParent()){C._private.hasCompoundNodes=!0;break}}var Kt=new ca(this.cy(),m);Kt.size()>0&&(f?Kt.emitAndNotify("remove"):c&&Kt.emit("remove"));for(var dt=0;dt<_e.length;dt++){var Qt=_e[dt];(!c||!Qt.removed())&&Qt.updateStyle()}return Kt},$o.move=function(f){var c=this._private.cy,d=this,m=!1,_=!1,C=function(_e){return null==_e?_e:""+_e};if(void 0!==f.source||void 0!==f.target){var A=C(f.source),E=C(f.target),B=null!=A&&c.hasElementWithId(A),P=null!=E&&c.hasElementWithId(E);(B||P)&&(c.batch(function(){d.remove(m,_),d.emitAndNotify("moveout");for(var me=0;me<d.length;me++){var _e=d[me],Pe=_e._private.data;_e.isEdge()&&(B&&(Pe.source=A),P&&(Pe.target=E))}d.restore(m,_)}),d.emitAndNotify("move"))}else if(void 0!==f.parent){var q=C(f.parent);if(null===q||c.hasElementWithId(q)){var fe=null===q?void 0:q;c.batch(function(){var me=d.remove(m,_);me.emitAndNotify("moveout");for(var _e=0;_e<d.length;_e++){var Pe=d[_e],$e=Pe._private.data;Pe.isNode()&&($e.parent=fe)}me.restore(m,_)}),d.emitAndNotify("move")}}return this},[Dm,ml,Lc,Fl,Bo,zd,Cf,gb,Co,Oc,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var c=this[0];if(c)return c._private.group}},Fc,fh,ul,jo,Qa].forEach(function(f){tr($o,f)});var Bs={add:function(c){var d,m=this;if(Ge(c)){var _=c;if(_._private.cy===m)d=_.restore();else{for(var C=[],A=0;A<_.length;A++)C.push(_[A].json());d=new ca(m,C)}}else if(ot(c))d=new ca(m,c);else if(yt(c)&&(ot(c.nodes)||ot(c.edges))){for(var P=c,q=[],Q=["nodes","edges"],fe=0,me=Q.length;fe<me;fe++){var _e=Q[fe],Pe=P[_e];if(ot(Pe))for(var $e=0,Ke=Pe.length;$e<Ke;$e++){var ht=tr({group:_e},Pe[$e]);q.push(ht)}}d=new ca(m,q)}else d=new Ya(m,c).collection();return d},remove:function(c){return Ge(c)||ke(c)&&(c=this.$(c)),c.remove()}},km=function(){function f(m){return-m.tension*m.x-m.friction*m.v}function c(m,_,C){var A={x:m.x+C.dx*_,v:m.v+C.dv*_,tension:m.tension,friction:m.friction};return{dx:A.v,dv:f(A)}}function d(m,_){var C={dx:m.v,dv:f(m)},A=c(m,.5*_,C),E=c(m,.5*_,A),B=c(m,_,E),q=1/6*(C.dv+2*(A.dv+E.dv)+B.dv);return m.x=m.x+1/6*(C.dx+2*(A.dx+E.dx)+B.dx)*_,m.v=m.v+q*_,m}return function m(_,C,A){var fe,me,_e,E={x:-1,v:0,tension:null,friction:null},B=[0],P=0,q=1e-4;for(_=parseFloat(_)||500,C=parseFloat(C)||20,A=A||null,E.tension=_,E.friction=C,me=(fe=null!==A)?(P=m(_,C))/A*.016:.016;_e=d(_e||E,me),B.push(1+_e.x),P+=16,Math.abs(_e.x)>q&&Math.abs(_e.v)>q;);return fe?function(Pe){return B[Pe*(B.length-1)|0]}:P}}(),wo=function(c,d,m,_){var C=function rr(f,c,d,m){var _=4,C=.001,A=1e-7,E=10,B=11,P=1/(B-1),q=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var Q=0;Q<4;++Q)if("number"!=typeof arguments[Q]||isNaN(arguments[Q])||!isFinite(arguments[Q]))return!1;f=Math.min(f,1),d=Math.min(d,1),f=Math.max(f,0),d=Math.max(d,0);var fe=q?new Float32Array(B):new Array(B);function me(Zt,Kt){return 1-3*Kt+3*Zt}function _e(Zt,Kt){return 3*Kt-6*Zt}function Pe(Zt){return 3*Zt}function $e(Zt,Kt,dt){return((me(Kt,dt)*Zt+_e(Kt,dt))*Zt+Pe(Kt))*Zt}function Ke(Zt,Kt,dt){return 3*me(Kt,dt)*Zt*Zt+2*_e(Kt,dt)*Zt+Pe(Kt)}function ht(Zt,Kt){for(var dt=0;dt<_;++dt){var Qt=Ke(Kt,f,d);if(0===Qt)return Kt;Kt-=($e(Kt,f,d)-Zt)/Qt}return Kt}function rt(){for(var Zt=0;Zt<B;++Zt)fe[Zt]=$e(Zt*P,f,d)}function St(Zt,Kt,dt){var Qt,Ht,xn=0;do{(Qt=$e(Ht=Kt+(dt-Kt)/2,f,d)-Zt)>0?dt=Ht:Kt=Ht}while(Math.abs(Qt)>A&&++xn<E);return Ht}function Gt(Zt){for(var Kt=0,dt=1,Qt=B-1;dt!==Qt&&fe[dt]<=Zt;++dt)Kt+=P;--dt;var xn=Kt+(Zt-fe[dt])/(fe[dt+1]-fe[dt])*P,sn=Ke(xn,f,d);return sn>=C?ht(Zt,xn):0===sn?xn:St(Zt,Kt,Kt+P)}var Wt=!1;function Tt(){Wt=!0,(f!==c||d!==m)&&rt()}var jt=function(Kt){return Wt||Tt(),f===c&&d===m?Kt:0===Kt?0:1===Kt?1:$e(Gt(Kt),c,m)};jt.getControlPoints=function(){return[{x:f,y:c},{x:d,y:m}]};var Pt="generateBezier("+[f,c,d,m]+")";return jt.toString=function(){return Pt},jt}(c,d,m,_);return function(A,E,B){return A+(E-A)*C(B)}},Ef={linear:function(c,d,m){return c+(d-c)*m},ease:wo(.25,.1,.25,1),"ease-in":wo(.42,0,1,1),"ease-out":wo(0,0,.58,1),"ease-in-out":wo(.42,0,.58,1),"ease-in-sine":wo(.47,0,.745,.715),"ease-out-sine":wo(.39,.575,.565,1),"ease-in-out-sine":wo(.445,.05,.55,.95),"ease-in-quad":wo(.55,.085,.68,.53),"ease-out-quad":wo(.25,.46,.45,.94),"ease-in-out-quad":wo(.455,.03,.515,.955),"ease-in-cubic":wo(.55,.055,.675,.19),"ease-out-cubic":wo(.215,.61,.355,1),"ease-in-out-cubic":wo(.645,.045,.355,1),"ease-in-quart":wo(.895,.03,.685,.22),"ease-out-quart":wo(.165,.84,.44,1),"ease-in-out-quart":wo(.77,0,.175,1),"ease-in-quint":wo(.755,.05,.855,.06),"ease-out-quint":wo(.23,1,.32,1),"ease-in-out-quint":wo(.86,0,.07,1),"ease-in-expo":wo(.95,.05,.795,.035),"ease-out-expo":wo(.19,1,.22,1),"ease-in-out-expo":wo(1,0,0,1),"ease-in-circ":wo(.6,.04,.98,.335),"ease-out-circ":wo(.075,.82,.165,1),"ease-in-out-circ":wo(.785,.135,.15,.86),spring:function(c,d,m){if(0===m)return Ef.linear;var _=km(c,d,m);return function(C,A,E){return C+(A-C)*_(E)}},"cubic-bezier":wo};function Zp(f,c,d,m,_){if(1===m||c===d)return d;var C=_(c,d,m);return null==f||((f.roundValue||f.color)&&(C=Math.round(C)),void 0!==f.min&&(C=Math.max(C,f.min)),void 0!==f.max&&(C=Math.min(C,f.max))),C}function Qp(f,c){return null!=f.pfValue||null!=f.value?null==f.pfValue||null!=c&&"%"===c.type.units?f.value:f.pfValue:f}function _l(f,c,d,m,_){var C=null!=_?_.type:null;d<0?d=0:d>1&&(d=1);var A=Qp(f,_),E=Qp(c,_);if(Be(A)&&Be(E))return Zp(C,A,E,d,m);if(ot(A)&&ot(E)){for(var B=[],P=0;P<E.length;P++){var q=A[P],Q=E[P];if(null!=q&&null!=Q){var fe=Zp(C,q,Q,d,m);B.push(fe)}else B.push(Q)}return B}}function Tf(f,c,d,m){var _=!m,C=f._private,A=c._private,E=A.easing,B=A.startTime,q=(m?f:f.cy()).style();if(!A.easingImpl)if(null==E)A.easingImpl=Ef.linear;else{var Q,me,_e;Q=ke(E)?q.parse("transition-timing-function",E).value:E,ke(Q)?(me=Q,_e=[]):(me=Q[1],_e=Q.slice(2).map(function(Fn){return+Fn})),_e.length>0?("spring"===me&&_e.push(A.duration),A.easingImpl=Ef[me].apply(null,_e)):A.easingImpl=Ef[me]}var $e,Pe=A.easingImpl;if($e=0===A.duration?1:(d-B)/A.duration,A.applying&&($e=A.progress),$e<0?$e=0:$e>1&&($e=1),null==A.delay){var Ke=A.startPosition,ht=A.position;if(ht&&_&&!f.locked()){var rt={};Jl(Ke.x,ht.x)&&(rt.x=_l(Ke.x,ht.x,$e,Pe)),Jl(Ke.y,ht.y)&&(rt.y=_l(Ke.y,ht.y,$e,Pe)),f.position(rt)}var St=A.startPan,Gt=A.pan,Wt=C.pan,Tt=null!=Gt&&m;Tt&&(Jl(St.x,Gt.x)&&(Wt.x=_l(St.x,Gt.x,$e,Pe)),Jl(St.y,Gt.y)&&(Wt.y=_l(St.y,Gt.y,$e,Pe)),f.emit("pan"));var jt=A.startZoom,Pt=A.zoom,Zt=null!=Pt&&m;Zt&&(Jl(jt,Pt)&&(C.zoom=Sr(C.minZoom,_l(jt,Pt,$e,Pe),C.maxZoom)),f.emit("zoom")),(Tt||Zt)&&f.emit("viewport");var Kt=A.style;if(Kt&&Kt.length>0&&_){for(var dt=0;dt<Kt.length;dt++){var Qt=Kt[dt],Ht=Qt.name,sn=A.startStyle[Ht],Ln=_l(sn,Qt,$e,Pe,q.properties[sn.name]);q.overrideBypass(f,Ht,Ln)}f.emit("style")}}return A.progress=$e,$e}function Jl(f,c){return!!(null!=f&&null!=c&&(Be(f)&&Be(c)||f&&c))}function Jp(f,c,d,m){var _=c._private;_.started=!0,_.startTime=d-_.progress*_.duration}function eg(f,c){var d=c._private.aniEles,m=[];function _(q,Q){var fe=q._private,me=fe.animation.current,_e=fe.animation.queue,Pe=!1;if(0===me.length){var $e=_e.shift();$e&&me.push($e)}for(var Ke=function(Wt){for(var Tt=Wt.length-1;Tt>=0;Tt--)(0,Wt[Tt])();Wt.splice(0,Wt.length)},ht=me.length-1;ht>=0;ht--){var rt=me[ht],St=rt._private;St.stopped?(me.splice(ht,1),St.hooked=!1,St.playing=!1,St.started=!1,Ke(St.frames)):!St.playing&&!St.applying||(St.playing&&St.applying&&(St.applying=!1),St.started||Jp(0,rt,f),Tf(q,rt,f,Q),St.applying&&(St.applying=!1),Ke(St.frames),null!=St.step&&St.step(f),rt.completed()&&(me.splice(ht,1),St.hooked=!1,St.playing=!1,St.started=!1,Ke(St.completes)),Pe=!0)}return!Q&&0===me.length&&0===_e.length&&m.push(q),Pe}for(var C=!1,A=0;A<d.length;A++){var B=_(d[A]);C=C||B}var P=_(c,!0);(C||P)&&(d.length>0?c.notify("draw",d):c.notify("draw")),d.unmerge(m),c.emit("step")}var Pa={animate:Cs.animate(),animation:Cs.animation(),animated:Cs.animated(),clearQueue:Cs.clearQueue(),delay:Cs.delay(),delayAnimation:Cs.delayAnimation(),stop:Cs.stop(),addToAnimationPool:function(c){!this.styleEnabled()||this._private.aniEles.merge(c)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){var m=c.renderer();m&&m.beforeRender?m.beforeRender(function(C,A){eg(A,c)},m.beforeRenderPriorities.animations):function d(){!c._private.animationsRunning||uu(function(C){eg(C,c),d()})}()}}},Bl={qualifierCompare:function(c,d){return null==c||null==d?null==c&&null==d:c.sameText(d)},eventMatches:function(c,d,m){var _=d.qualifier;return null==_||c!==m.target&&bt(m.target)&&_.matches(m.target)},addEventFields:function(c,d){d.cy=c,d.target=c},callbackContext:function(c,d,m){return null!=d.qualifier?m.target:c}},Il=function(c){return ke(c)?new op(c):c},Uu={createEmitter:function(){var c=this._private;return c.emitter||(c.emitter=new mu(Bl,this)),this},emitter:function(){return this._private.emitter},on:function(c,d,m){return this.emitter().on(c,Il(d),m),this},removeListener:function(c,d,m){return this.emitter().removeListener(c,Il(d),m),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(c,d,m){return this.emitter().one(c,Il(d),m),this},once:function(c,d,m){return this.emitter().one(c,Il(d),m),this},emit:function(c,d){return this.emitter().emit(c,d),this},emitAndNotify:function(c,d){return this.emit(c),this.notify(c,d),this}};Cs.eventAliasesOn(Uu);var Xd={png:function(c){return this._private.renderer.png(c=c||{})},jpg:function(c){var d=this._private.renderer;return(c=c||{}).bg=c.bg||"#fff",d.jpg(c)}};Xd.jpeg=Xd.jpg;var Ga={layout:function(c){var d=this;if(null!=c)if(null!=c.name){var C,m=c.name,_=d.extension("layout",m);if(null!=_)return C=ke(c.eles)?d.$(c.eles):null!=c.eles?c.eles:d.$(),new _(tr({},c,{cy:d,eles:C}));mt("No such layout `"+m+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else mt("A `name` must be specified to make a layout");else mt("Layout options must be specified to make a layout")}};Ga.createLayout=Ga.makeLayout=Ga.layout;var yu={notify:function(c,d){var m=this._private;if(this.batching()){m.batchNotifications=m.batchNotifications||{};var _=m.batchNotifications[c]=m.batchNotifications[c]||this.collection();null!=d&&_.merge(d)}else if(m.notificationsEnabled){var C=this.renderer();this.destroyed()||!C||C.notify(c,d)}},notifications:function(c){var d=this._private;return void 0===c?d.notificationsEnabled:(d.notificationsEnabled=!!c,this)},noNotifications:function(c){this.notifications(!1),c(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var c=this._private;return null==c.batchCount&&(c.batchCount=0),0===c.batchCount&&(c.batchStyleEles=this.collection(),c.batchNotifications={}),c.batchCount++,this},endBatch:function(){var c=this._private;if(0===c.batchCount)return this;if(c.batchCount--,0===c.batchCount){c.batchStyleEles.updateStyle();var d=this.renderer();Object.keys(c.batchNotifications).forEach(function(m){var _=c.batchNotifications[m];_.empty()?d.notify(m):d.notify(m,_)})}return this},batch:function(c){return this.startBatch(),c(),this.endBatch(),this},batchData:function(c){var d=this;return this.batch(function(){for(var m=Object.keys(c),_=0;_<m.length;_++){var C=m[_],A=c[C];d.getElementById(C).data(A)}})}},Hu=oi({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Gu={renderTo:function(c,d,m,_){return this._private.renderer.renderTo(c,d,m,_),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(c){var d=this,m=d.extension("renderer",c.name);if(null!=m){void 0!==c.wheelSensitivity&&ge("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var _=Hu(c);_.cy=d,d._private.renderer=new m(_),this.notify("init")}else mt("Can not initialise: No such renderer `".concat(c.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var c=this;c.notify("destroy");var d=c.container();if(d)for(d._cyreg=null;d.childNodes.length>0;)d.removeChild(d.childNodes[0]);c._private.renderer=null,c.mutableElements().forEach(function(m){var _=m._private;_.rscratch={},_.rstyle={},_.animation.current=[],_.animation.queue=[]})},onRender:function(c){return this.on("render",c)},offRender:function(c){return this.off("render",c)}};Gu.invalidateDimensions=Gu.resize;var Sl={collection:function(c,d){return ke(c)?this.$(c):Ge(c)?c.collection():ot(c)?new ca(this,c,d):new ca(this)},nodes:function(c){var d=this.$(function(m){return m.isNode()});return c?d.filter(c):d},edges:function(c){var d=this.$(function(m){return m.isEdge()});return c?d.filter(c):d},$:function(c){var d=this._private.elements;return c?d.filter(c):d.spawnSelf()},mutableElements:function(){return this._private.elements}};Sl.elements=Sl.filter=Sl.$;var ka={apply:function(f){for(var c=this,_=c._private.cy.collection(),C=0;C<f.length;C++){var A=f[C],E=c.getContextMeta(A);if(!E.empty){var B=c.getContextStyle(E),P=c.applyContextStyle(E,B,A);A._private.appliedInitStyle?c.updateTransitions(A,P.diffProps):A._private.appliedInitStyle=!0,c.updateStyleHints(A)&&_.push(A)}}return _},getPropertiesDiff:function(f,c){var d=this,m=d._private.propDiffs=d._private.propDiffs||{},_=f+"-"+c,C=m[_];if(C)return C;for(var A=[],E={},B=0;B<d.length;B++){var P=d[B],Q="t"===c[B],fe="t"===f[B]!==Q,me=P.mappedProperties.length>0;if(fe||Q&&me){var _e=void 0;fe&&me||fe?_e=P.properties:me&&(_e=P.mappedProperties);for(var Pe=0;Pe<_e.length;Pe++){for(var $e=_e[Pe],Ke=$e.name,ht=!1,rt=B+1;rt<d.length&&("t"!==c[rt]||!(ht=null!=d[rt].properties[$e.name]));rt++);!E[Ke]&&!ht&&(E[Ke]=!0,A.push(Ke))}}}return m[_]=A,A},getContextMeta:function(f){for(var m,c=this,d="",_=f._private.styleCxtKey||"",C=0;C<c.length;C++){var A=c[C];d+=A.selector&&A.selector.matches(f)?"t":"f"}return m=c.getPropertiesDiff(_,d),f._private.styleCxtKey=d,{key:d,diffPropNames:m,empty:0===m.length}},getContextStyle:function(f){var c=f.key,m=this._private.contextStyles=this._private.contextStyles||{};if(m[c])return m[c];for(var _={_private:{key:c}},C=0;C<this.length;C++){var A=this[C];if("t"===c[C])for(var B=0;B<A.properties.length;B++){var P=A.properties[B];_[P.name]=P}}return m[c]=_,_},applyContextStyle:function(f,c,d){for(var _=f.diffPropNames,C={},A=this.types,E=0;E<_.length;E++){var B=_[E],P=c[B],q=d.pstyle(B);if(!P){if(!q)continue;P=q.bypass?{name:B,deleteBypassed:!0}:{name:B,delete:!0}}if(q!==P){if(P.mapped===A.fn&&null!=q&&null!=q.mapping&&q.mapping.value===P.value){var Q=q.mapping;if((Q.fnValue=P.value(d))===Q.prevFnValue)continue}var me=C[B]={prev:q};this.applyParsedProperty(d,P),me.next=d.pstyle(B),me.next&&me.next.bypass&&(me.next=me.next.bypassed)}}return{diffProps:C}},updateStyleHints:function(f){var m,c=f._private,d=this,_=d.propertyGroupKeys,C=function(Qi,lr,Wr){return d.getPropertiesHash(Qi,lr,Wr)},A=c.styleKey;if(f.removed())return!1;var Qi,E="nodes"===c.group,B=f._private.style;m=Object.keys(B);for(var P=0;P<_.length;P++)c.styleKeys[_[P]]=[Eh,nd];for(var Q=function(Qi,lr){return c.styleKeys[lr][0]=id(Qi,c.styleKeys[lr][0])},fe=function(Qi,lr){return c.styleKeys[lr][1]=pl(Qi,c.styleKeys[lr][1])},me=function(Qi,lr){Q(Qi,lr),fe(Qi,lr)},_e=function(Qi,lr){for(var Wr=0;Wr<Qi.length;Wr++){var Jr=Qi.charCodeAt(Wr);Q(Jr,lr),fe(Jr,lr)}},Ke=0;Ke<m.length;Ke++){var ht=m[Ke],rt=B[ht];if(null!=rt){var St=this.properties[ht],Gt=St.type,Wt=St.groupKey,Tt=void 0;null!=St.hashOverride?Tt=St.hashOverride(f,rt):null!=rt.pfValue&&(Tt=rt.pfValue);var jt=null==St.enums?rt.value:null,Pt=null!=Tt,dt=rt.units;!Gt.number||!Pt&&null==jt||Gt.multiple?_e(rt.strValue,Wt):(me(-128<(Qi=Pt?Tt:jt)&&Qi<128&&Math.floor(Qi)!==Qi?2e9-(1024*Qi|0):Qi,Wt),!Pt&&null!=dt&&_e(dt,Wt))}}for(var Ht=[Eh,nd],xn=0;xn<_.length;xn++){var vn=c.styleKeys[_[xn]];Ht[0]=id(vn[0],Ht[0]),Ht[1]=pl(vn[1],Ht[1])}c.styleKey=function(c,d){return 2097152*c+d}(Ht[0],Ht[1]);var Ln=c.styleKeys;c.labelDimsKey=rh(Ln.labelDimensions);var Fn=C(f,["label"],Ln.labelDimensions);if(c.labelKey=rh(Fn),c.labelStyleKey=rh(gf(Ln.commonLabel,Fn)),!E){var ri=C(f,["source-label"],Ln.labelDimensions);c.sourceLabelKey=rh(ri),c.sourceLabelStyleKey=rh(gf(Ln.commonLabel,ri));var Rn=C(f,["target-label"],Ln.labelDimensions);c.targetLabelKey=rh(Rn),c.targetLabelStyleKey=rh(gf(Ln.commonLabel,Rn))}if(E){var ei=c.styleKeys,kn=ei.pie,li=[ei.nodeBody,ei.nodeBorder,ei.backgroundImage,ei.compound,kn].filter(function(Ei){return null!=Ei}).reduce(gf,[Eh,nd]);c.nodeKey=rh(li),c.hasPie=null!=kn&&kn[0]!==Eh&&kn[1]!==nd}return A!==c.styleKey},clearStyleHints:function(f){var c=f._private;c.styleCxtKey="",c.styleKeys={},c.styleKey=null,c.labelKey=null,c.labelStyleKey=null,c.sourceLabelKey=null,c.sourceLabelStyleKey=null,c.targetLabelKey=null,c.targetLabelStyleKey=null,c.nodeKey=null,c.hasPie=null},applyParsedProperty:function(f,c){var C,d=this,m=c,_=f._private.style,A=d.types,E=d.properties[m.name].type,B=m.bypass,P=_[m.name],q=P&&P.bypass,Q=f._private,fe="mapping",me=function(di){return null==di?null:null!=di.pfValue?di.pfValue:di.value},_e=function(){var di=me(P),Ii=me(m);d.checkTriggers(f,m.name,di,Ii)};if(m&&"pie"===m.name.substr(0,3)&&ge("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===c.name&&f.isEdge()&&("bezier"!==c.value&&f.isLoop()||"haystack"===c.value&&(f.source().isParent()||f.target().isParent()))&&(m=c=this.parse(c.name,"bezier",B)),m.delete)return _[m.name]=void 0,_e(),!0;if(m.deleteBypassed)return P?!!P.bypass&&(P.bypassed=void 0,_e(),!0):(_e(),!0);if(m.deleteBypass)return P?!!P.bypass&&(_[m.name]=P.bypassed,_e(),!0):(_e(),!0);var Pe=function(){ge("Do not assign mappings to elements without corresponding data (i.e. ele `"+f.id()+"` has no mapping for property `"+m.name+"` with data field `"+m.field+"`); try a `["+m.field+"]` selector to limit scope to elements with `"+m.field+"` defined")};switch(m.mapped){case A.mapData:for(var $e=m.field.split("."),Ke=Q.data,ht=0;ht<$e.length&&Ke;ht++)Ke=Ke[$e[ht]];if(null==Ke)return Pe(),!1;var St;if(!Be(Ke))return ge("Do not use continuous mappers without specifying numeric data (i.e. `"+m.field+": "+Ke+"` for `"+f.id()+"` is non-numeric)"),!1;var Gt=m.fieldMax-m.fieldMin;if((St=0===Gt?0:(Ke-m.fieldMin)/Gt)<0?St=0:St>1&&(St=1),E.color){var Wt=m.valueMin[0],jt=m.valueMin[1],Pt=m.valueMax[1],Zt=m.valueMin[2],Kt=m.valueMax[2],dt=m.valueMin[3]??1,Qt=m.valueMax[3]??1,Ht=[Math.round(Wt+(m.valueMax[0]-Wt)*St),Math.round(jt+(Pt-jt)*St),Math.round(Zt+(Kt-Zt)*St),Math.round(dt+(Qt-dt)*St)];C={bypass:m.bypass,name:m.name,value:Ht,strValue:"rgb("+Ht[0]+", "+Ht[1]+", "+Ht[2]+")"}}else{if(!E.number)return!1;C=this.parse(m.name,m.valueMin+(m.valueMax-m.valueMin)*St,m.bypass,fe)}if(!C)return Pe(),!1;C.mapping=m,m=C;break;case A.data:for(var sn=m.field.split("."),vn=Q.data,Ln=0;Ln<sn.length&&vn;Ln++)vn=vn[sn[Ln]];if(null!=vn&&(C=this.parse(m.name,vn,m.bypass,fe)),!C)return Pe(),!1;C.mapping=m,m=C;break;case A.fn:var Rn=null!=m.fnValue?m.fnValue:(0,m.value)(f);if(m.prevFnValue=Rn,null==Rn)return ge("Custom function mappers may not return null (i.e. `"+m.name+"` for ele `"+f.id()+"` is null)"),!1;if(!(C=this.parse(m.name,Rn,m.bypass,fe)))return ge("Custom function mappers may not return invalid values for the property type (i.e. `"+m.name+"` for ele `"+f.id()+"` is invalid)"),!1;C.mapping=it(m),m=C;break;case void 0:break;default:return!1}return B?(m.bypassed=q?P.bypassed:P,_[m.name]=m):q?P.bypassed=m:_[m.name]=m,_e(),!0},cleanElements:function(f,c){for(var d=0;d<f.length;d++){var m=f[d];if(this.clearStyleHints(m),m.dirtyCompoundBoundsCache(),m.dirtyBoundingBoxCache(),c)for(var _=m._private.style,C=Object.keys(_),A=0;A<C.length;A++){var E=C[A],B=_[E];null!=B&&(B.bypass?B.bypassed=null:_[E]=null)}else m._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(f,c){var d=this,m=f._private,_=f.pstyle("transition-property").value,C=f.pstyle("transition-duration").pfValue,A=f.pstyle("transition-delay").pfValue;if(_.length>0&&C>0){for(var E={},B=!1,P=0;P<_.length;P++){var q=_[P],Q=f.pstyle(q),fe=c[q];if(fe){var _e=fe.prev,Pe=null!=fe.next?fe.next:Q,$e=!1,Ke=void 0;!_e||(Be(_e.pfValue)&&Be(Pe.pfValue)?Ke=_e.pfValue+1e-6*($e=Pe.pfValue-_e.pfValue):Be(_e.value)&&Be(Pe.value)?Ke=_e.value+1e-6*($e=Pe.value-_e.value):ot(_e.value)&&ot(Pe.value)&&($e=_e.value[0]!==Pe.value[0]||_e.value[1]!==Pe.value[1]||_e.value[2]!==Pe.value[2],Ke=_e.strValue),$e&&(E[q]=Pe.strValue,this.applyBypass(f,q,Ke),B=!0))}}if(!B)return;m.transitioning=!0,new sa(function(rt){A>0?f.delayAnimation(A).play().promise().then(rt):rt()}).then(function(){return f.animation({style:E,duration:C,easing:f.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){d.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1})}else m.transitioning&&(this.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1)},checkTrigger:function(f,c,d,m,_,C){var A=this.properties[c],E=_(A);null!=E&&E(d,m)&&C(A)},checkZOrderTrigger:function(f,c,d,m){var _=this;this.checkTrigger(f,c,d,m,function(C){return C.triggersZOrder},function(){_._private.cy.notify("zorder",f)})},checkBoundsTrigger:function(f,c,d,m){this.checkTrigger(f,c,d,m,function(_){return _.triggersBounds},function(_){f.dirtyCompoundBoundsCache(),f.dirtyBoundingBoxCache(),_.triggersBoundsOfParallelBeziers&&("curve-style"===c&&("bezier"===d||"bezier"===m)||"display"===c&&("none"===d||"none"===m))&&f.parallelEdges().forEach(function(C){C.isBundledBezier()&&C.dirtyBoundingBoxCache()})})},checkTriggers:function(f,c,d,m){f.dirtyStyleCache(),this.checkZOrderTrigger(f,c,d,m),this.checkBoundsTrigger(f,c,d,m)}},fc={applyBypass:function(f,c,d,m){var C=[];if("*"===c||"**"===c){if(void 0!==d)for(var E=0;E<this.properties.length;E++){var q=this.parse(this.properties[E].name,d,!0);q&&C.push(q)}}else if(ke(c)){var Q=this.parse(c,d,!0);Q&&C.push(Q)}else{if(!yt(c))return!1;var fe=c;m=d;for(var me=Object.keys(fe),_e=0;_e<me.length;_e++){var Pe=me[_e],$e=fe[Pe];if(void 0===$e&&($e=fe[ln(Pe)]),void 0!==$e){var Ke=this.parse(Pe,$e,!0);Ke&&C.push(Ke)}}}if(0===C.length)return!1;for(var ht=!1,rt=0;rt<f.length;rt++){for(var St=f[rt],Gt={},Wt=void 0,Tt=0;Tt<C.length;Tt++){var jt=C[Tt];if(m){var Pt=St.pstyle(jt.name);Wt=Gt[jt.name]={prev:Pt}}ht=this.applyParsedProperty(St,it(jt))||ht,m&&(Wt.next=St.pstyle(jt.name))}ht&&this.updateStyleHints(St),m&&this.updateTransitions(St,Gt,!0)}return ht},overrideBypass:function(f,c,d){c=kt(c);for(var m=0;m<f.length;m++){var _=f[m],C=_._private.style[c],A=this.properties[c].type,E=A.color,B=A.mutiple,P=C?null!=C.pfValue?C.pfValue:C.value:null;C&&C.bypass?(C.value=d,null!=C.pfValue&&(C.pfValue=d),C.strValue=E?"rgb("+d.join(",")+")":B?d.join(" "):""+d,this.updateStyleHints(_)):this.applyBypass(_,c,d),this.checkTriggers(_,c,P,d)}},removeAllBypasses:function(f,c){return this.removeBypasses(f,this.propertyNames,c)},removeBypasses:function(f,c,d){for(var _=0;_<f.length;_++){for(var C=f[_],A={},E=0;E<c.length;E++){var B=c[E],P=this.properties[B],q=C.pstyle(P.name);if(q&&q.bypass){var fe=this.parse(B,"",!0),me=A[P.name]={prev:q};this.applyParsedProperty(C,fe),me.next=C.pstyle(P.name)}}this.updateStyleHints(C),d&&this.updateTransitions(C,A,!0)}}},Ov={getEmSizeInPixels:function(){var f=this.containerCss("font-size");return null!=f?parseFloat(f):1},containerCss:function(f){var d=this._private.cy.container();if(pe&&d&&pe.getComputedStyle)return pe.getComputedStyle(d).getPropertyValue(f)}},_u={getRenderedStyle:function(f,c){return c?this.getStylePropertyValue(f,c,!0):this.getRawStyle(f,!0)},getRawStyle:function(f,c){var d=this;if(f=f[0]){for(var m={},_=0;_<d.properties.length;_++){var C=d.properties[_],A=d.getStylePropertyValue(f,C.name,c);null!=A&&(m[C.name]=A,m[ln(C.name)]=A)}return m}},getIndexedStyle:function(f,c,d,m){return f.pstyle(c)[d][m]??f.cy().style().getDefaultProperty(c)[d][0]},getStylePropertyValue:function(f,c,d){if(f=f[0]){var _=this.properties[c];_.alias&&(_=_.pointsTo);var C=_.type,A=f.pstyle(_.name);if(A){var E=A.value,B=A.units,P=A.strValue;if(d&&C.number&&null!=E&&Be(E)){var q=f.cy().zoom(),Q=function($e){return $e*q},fe=function($e,Ke){return Q($e)+Ke},me=ot(E);return(me?B.every(function(Pe){return null!=Pe}):null!=B)?me?E.map(function(Pe,$e){return fe(Pe,B[$e])}).join(" "):fe(E,B):me?E.map(function(Pe){return ke(Pe)?Pe:""+Q(Pe)}).join(" "):""+Q(E)}if(null!=P)return P}return null}},getAnimationStartStyle:function(f,c){for(var d={},m=0;m<c.length;m++){var C=c[m].name,A=f.pstyle(C);void 0!==A&&(A=yt(A)?this.parse(C,A.strValue):this.parse(C,A)),A&&(d[C]=A)}return d},getPropsList:function(f){var d=[],m=f,_=this.properties;if(m)for(var C=Object.keys(m),A=0;A<C.length;A++){var E=C[A],B=m[E],P=_[E]||_[kt(E)],q=this.parse(P.name,B);q&&d.push(q)}return d},getNonDefaultPropertiesHash:function(f,c,d){var C,A,E,B,P,m=d.slice();for(B=0;B<c.length;B++)if(null!=(C=f.pstyle(c[B],!1)))if(null!=C.pfValue)m[0]=id(E,m[0]),m[1]=pl(E,m[1]);else for(A=C.strValue,P=0;P<A.length;P++)E=A.charCodeAt(P),m[0]=id(E,m[0]),m[1]=pl(E,m[1]);return m}};_u.getPropertiesHash=_u.getNonDefaultPropertiesHash;var El={appendFromJson:function(f){for(var c=this,d=0;d<f.length;d++){var m=f[d],_=m.selector,C=m.style||m.css,A=Object.keys(C);c.selector(_);for(var E=0;E<A.length;E++){var B=A[E];c.css(B,C[B])}}return c},fromJson:function(f){var c=this;return c.resetToDefault(),c.appendFromJson(f),c},json:function(){for(var f=[],c=this.defaultLength;c<this.length;c++){for(var d=this[c],m=d.selector,_=d.properties,C={},A=0;A<_.length;A++){var E=_[A];C[E.name]=E.strValue}f.push({selector:m?m.toString():"core",style:C})}return f}},pc={appendFromString:function(f){var _,C,A,d=this,m=""+f;function E(){m=m.length>_.length?m.substr(_.length):""}function B(){C=C.length>A.length?C.substr(A.length):""}for(m=m.replace(/[/][*](\s|.)+?[*][/]/g,"");!m.match(/^\s*$/);){var q=m.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!q){ge("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+m);break}_=q[0];var Q=q[1];if("core"!==Q&&new op(Q).invalid)ge("Skipping parsing of block: Invalid selector found in string stylesheet: "+Q),E();else{var me=q[2],_e=!1;C=me;for(var Pe=[];!C.match(/^\s*$/);){var Ke=C.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!Ke){ge("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+me),_e=!0;break}A=Ke[0];var ht=Ke[1],rt=Ke[2];this.properties[ht]?d.parse(ht,rt)?(Pe.push({name:ht,val:rt}),B()):(ge("Skipping property: Invalid property definition in: "+A),B()):(ge("Skipping property: Invalid property name in: "+A),B())}if(_e){E();break}d.selector(Q);for(var Wt=0;Wt<Pe.length;Wt++){var Tt=Pe[Wt];d.css(Tt.name,Tt.val)}E()}}return d},fromString:function(f){var c=this;return c.resetToDefault(),c.appendFromString(f),c}},Do={};(function(){var f=ze,C=function(li){return"^"+li+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},A=function(li){var Ei=f+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+li+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*("+Ei+")\\s*\\,\\s*("+Ei+")\\)$"},E=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Do.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:C("data")},layoutData:{mapping:!0,regex:C("layoutData")},scratch:{mapping:!0,regex:C("scratch")},mapData:{mapping:!0,regex:A("mapData")},mapLayoutData:{mapping:!0,regex:A("mapLayoutData")},mapScratch:{mapping:!0,regex:A("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:E,singleRegexMatchValue:!0},urls:{regexes:E,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(li,Ei){switch(li.length){case 2:return"deg"!==Ei[0]&&"rad"!==Ei[0]&&"deg"!==Ei[1]&&"rad"!==Ei[1];case 1:return ke(li[0])||"deg"===Ei[0]||"rad"===Ei[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(li){var Ei=li.length;return 1===Ei||2===Ei||4===Ei}}};var B={zeroNonZero:function(li,Ei){return(null==li||null==Ei)&&li!==Ei||0==li&&0!=Ei||0!=li&&0==Ei},any:function(li,Ei){return li!=Ei},emptyNonEmpty:function(li,Ei){var Qi=ce(li),lr=ce(Ei);return Qi&&!lr||!Qi&&lr}},P=Do.types,q=[{name:"label",type:P.text,triggersBounds:B.any,triggersZOrder:B.emptyNonEmpty},{name:"text-rotation",type:P.textRotation,triggersBounds:B.any},{name:"text-margin-x",type:P.bidirectionalSize,triggersBounds:B.any},{name:"text-margin-y",type:P.bidirectionalSize,triggersBounds:B.any}],Q=[{name:"source-label",type:P.text,triggersBounds:B.any},{name:"source-text-rotation",type:P.textRotation,triggersBounds:B.any},{name:"source-text-margin-x",type:P.bidirectionalSize,triggersBounds:B.any},{name:"source-text-margin-y",type:P.bidirectionalSize,triggersBounds:B.any},{name:"source-text-offset",type:P.size,triggersBounds:B.any}],fe=[{name:"target-label",type:P.text,triggersBounds:B.any},{name:"target-text-rotation",type:P.textRotation,triggersBounds:B.any},{name:"target-text-margin-x",type:P.bidirectionalSize,triggersBounds:B.any},{name:"target-text-margin-y",type:P.bidirectionalSize,triggersBounds:B.any},{name:"target-text-offset",type:P.size,triggersBounds:B.any}],me=[{name:"font-family",type:P.fontFamily,triggersBounds:B.any},{name:"font-style",type:P.fontStyle,triggersBounds:B.any},{name:"font-weight",type:P.fontWeight,triggersBounds:B.any},{name:"font-size",type:P.size,triggersBounds:B.any},{name:"text-transform",type:P.textTransform,triggersBounds:B.any},{name:"text-wrap",type:P.textWrap,triggersBounds:B.any},{name:"text-overflow-wrap",type:P.textOverflowWrap,triggersBounds:B.any},{name:"text-max-width",type:P.size,triggersBounds:B.any},{name:"text-outline-width",type:P.size,triggersBounds:B.any},{name:"line-height",type:P.positiveNumber,triggersBounds:B.any}],_e=[{name:"text-valign",type:P.valign,triggersBounds:B.any},{name:"text-halign",type:P.halign,triggersBounds:B.any},{name:"color",type:P.color},{name:"text-outline-color",type:P.color},{name:"text-outline-opacity",type:P.zeroOneNumber},{name:"text-background-color",type:P.color},{name:"text-background-opacity",type:P.zeroOneNumber},{name:"text-background-padding",type:P.size,triggersBounds:B.any},{name:"text-border-opacity",type:P.zeroOneNumber},{name:"text-border-color",type:P.color},{name:"text-border-width",type:P.size,triggersBounds:B.any},{name:"text-border-style",type:P.borderStyle,triggersBounds:B.any},{name:"text-background-shape",type:P.textBackgroundShape,triggersBounds:B.any},{name:"text-justification",type:P.justification}],Pe=[{name:"events",type:P.bool},{name:"text-events",type:P.bool}],$e=[{name:"display",type:P.display,triggersZOrder:B.any,triggersBounds:B.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:P.visibility,triggersZOrder:B.any},{name:"opacity",type:P.zeroOneNumber,triggersZOrder:B.zeroNonZero},{name:"text-opacity",type:P.zeroOneNumber},{name:"min-zoomed-font-size",type:P.size},{name:"z-compound-depth",type:P.zCompoundDepth,triggersZOrder:B.any},{name:"z-index-compare",type:P.zIndexCompare,triggersZOrder:B.any},{name:"z-index",type:P.nonNegativeInt,triggersZOrder:B.any}],Ke=[{name:"overlay-padding",type:P.size,triggersBounds:B.any},{name:"overlay-color",type:P.color},{name:"overlay-opacity",type:P.zeroOneNumber,triggersBounds:B.zeroNonZero},{name:"overlay-shape",type:P.overlayShape,triggersBounds:B.any}],ht=[{name:"underlay-padding",type:P.size,triggersBounds:B.any},{name:"underlay-color",type:P.color},{name:"underlay-opacity",type:P.zeroOneNumber,triggersBounds:B.zeroNonZero},{name:"underlay-shape",type:P.overlayShape,triggersBounds:B.any}],rt=[{name:"transition-property",type:P.propList},{name:"transition-duration",type:P.time},{name:"transition-delay",type:P.time},{name:"transition-timing-function",type:P.easing}],St=function(li,Ei){return"label"===Ei.value?-li.poolIndex():Ei.pfValue},Gt=[{name:"height",type:P.nodeSize,triggersBounds:B.any,hashOverride:St},{name:"width",type:P.nodeSize,triggersBounds:B.any,hashOverride:St},{name:"shape",type:P.nodeShape,triggersBounds:B.any},{name:"shape-polygon-points",type:P.polygonPointList,triggersBounds:B.any},{name:"background-color",type:P.color},{name:"background-fill",type:P.fill},{name:"background-opacity",type:P.zeroOneNumber},{name:"background-blacken",type:P.nOneOneNumber},{name:"background-gradient-stop-colors",type:P.colors},{name:"background-gradient-stop-positions",type:P.percentages},{name:"background-gradient-direction",type:P.gradientDirection},{name:"padding",type:P.sizeMaybePercent,triggersBounds:B.any},{name:"padding-relative-to",type:P.paddingRelativeTo,triggersBounds:B.any},{name:"bounds-expansion",type:P.boundsExpansion,triggersBounds:B.any}],Wt=[{name:"border-color",type:P.color},{name:"border-opacity",type:P.zeroOneNumber},{name:"border-width",type:P.size,triggersBounds:B.any},{name:"border-style",type:P.borderStyle}],Tt=[{name:"background-image",type:P.urls},{name:"background-image-crossorigin",type:P.bgCrossOrigin},{name:"background-image-opacity",type:P.zeroOneNumbers},{name:"background-image-containment",type:P.bgContainment},{name:"background-image-smoothing",type:P.bools},{name:"background-position-x",type:P.bgPos},{name:"background-position-y",type:P.bgPos},{name:"background-width-relative-to",type:P.bgRelativeTo},{name:"background-height-relative-to",type:P.bgRelativeTo},{name:"background-repeat",type:P.bgRepeat},{name:"background-fit",type:P.bgFit},{name:"background-clip",type:P.bgClip},{name:"background-width",type:P.bgWH},{name:"background-height",type:P.bgWH},{name:"background-offset-x",type:P.bgPos},{name:"background-offset-y",type:P.bgPos}],jt=[{name:"position",type:P.position,triggersBounds:B.any},{name:"compound-sizing-wrt-labels",type:P.compoundIncludeLabels,triggersBounds:B.any},{name:"min-width",type:P.size,triggersBounds:B.any},{name:"min-width-bias-left",type:P.sizeMaybePercent,triggersBounds:B.any},{name:"min-width-bias-right",type:P.sizeMaybePercent,triggersBounds:B.any},{name:"min-height",type:P.size,triggersBounds:B.any},{name:"min-height-bias-top",type:P.sizeMaybePercent,triggersBounds:B.any},{name:"min-height-bias-bottom",type:P.sizeMaybePercent,triggersBounds:B.any}],Pt=[{name:"line-style",type:P.lineStyle},{name:"line-color",type:P.color},{name:"line-fill",type:P.fill},{name:"line-cap",type:P.lineCap},{name:"line-opacity",type:P.zeroOneNumber},{name:"line-dash-pattern",type:P.numbers},{name:"line-dash-offset",type:P.number},{name:"line-gradient-stop-colors",type:P.colors},{name:"line-gradient-stop-positions",type:P.percentages},{name:"curve-style",type:P.curveStyle,triggersBounds:B.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:P.zeroOneNumber,triggersBounds:B.any},{name:"source-endpoint",type:P.edgeEndpoint,triggersBounds:B.any},{name:"target-endpoint",type:P.edgeEndpoint,triggersBounds:B.any},{name:"control-point-step-size",type:P.size,triggersBounds:B.any},{name:"control-point-distances",type:P.bidirectionalSizes,triggersBounds:B.any},{name:"control-point-weights",type:P.numbers,triggersBounds:B.any},{name:"segment-distances",type:P.bidirectionalSizes,triggersBounds:B.any},{name:"segment-weights",type:P.numbers,triggersBounds:B.any},{name:"taxi-turn",type:P.bidirectionalSizeMaybePercent,triggersBounds:B.any},{name:"taxi-turn-min-distance",type:P.size,triggersBounds:B.any},{name:"taxi-direction",type:P.axisDirection,triggersBounds:B.any},{name:"edge-distances",type:P.edgeDistances,triggersBounds:B.any},{name:"arrow-scale",type:P.positiveNumber,triggersBounds:B.any},{name:"loop-direction",type:P.angle,triggersBounds:B.any},{name:"loop-sweep",type:P.angle,triggersBounds:B.any},{name:"source-distance-from-node",type:P.size,triggersBounds:B.any},{name:"target-distance-from-node",type:P.size,triggersBounds:B.any}],Zt=[{name:"ghost",type:P.bool,triggersBounds:B.any},{name:"ghost-offset-x",type:P.bidirectionalSize,triggersBounds:B.any},{name:"ghost-offset-y",type:P.bidirectionalSize,triggersBounds:B.any},{name:"ghost-opacity",type:P.zeroOneNumber}],Kt=[{name:"selection-box-color",type:P.color},{name:"selection-box-opacity",type:P.zeroOneNumber},{name:"selection-box-border-color",type:P.color},{name:"selection-box-border-width",type:P.size},{name:"active-bg-color",type:P.color},{name:"active-bg-opacity",type:P.zeroOneNumber},{name:"active-bg-size",type:P.size},{name:"outside-texture-bg-color",type:P.color},{name:"outside-texture-bg-opacity",type:P.zeroOneNumber}],dt=[];Do.pieBackgroundN=16,dt.push({name:"pie-size",type:P.sizeMaybePercent});for(var Qt=1;Qt<=Do.pieBackgroundN;Qt++)dt.push({name:"pie-"+Qt+"-background-color",type:P.color}),dt.push({name:"pie-"+Qt+"-background-size",type:P.percent}),dt.push({name:"pie-"+Qt+"-background-opacity",type:P.zeroOneNumber});var Ht=[],xn=Do.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:P.arrowShape,triggersBounds:B.any},{name:"arrow-color",type:P.color},{name:"arrow-fill",type:P.arrowFill}].forEach(function(kn){xn.forEach(function(li){Ht.push({name:li+"-"+kn.name,type:kn.type,triggersBounds:kn.triggersBounds})})},{});var sn=Do.properties=[].concat(Pe,rt,$e,Ke,ht,Zt,_e,me,q,Q,fe,Gt,Wt,Tt,dt,jt,Pt,Ht,Kt),vn=Do.propertyGroups={behavior:Pe,transition:rt,visibility:$e,overlay:Ke,underlay:ht,ghost:Zt,commonLabel:_e,labelDimensions:me,mainLabel:q,sourceLabel:Q,targetLabel:fe,nodeBody:Gt,nodeBorder:Wt,backgroundImage:Tt,pie:dt,compound:jt,edgeLine:Pt,edgeArrow:Ht,core:Kt},Ln=Do.propertyGroupNames={};(Do.propertyGroupKeys=Object.keys(vn)).forEach(function(kn){Ln[kn]=vn[kn].map(function(li){return li.name}),vn[kn].forEach(function(li){return li.groupKey=kn})});var ri=Do.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Do.propertyNames=sn.map(function(kn){return kn.name});for(var Rn=0;Rn<sn.length;Rn++){var ei=sn[Rn];sn[ei.name]=ei}for(var di=0;di<ri.length;di++){var Ii=ri[di],pi={name:Ii.name,alias:!0,pointsTo:sn[Ii.pointsTo]};sn.push(pi),sn[Ii.name]=pi}})(),Do.getDefaultProperty=function(f){return this.getDefaultProperties()[f]},Do.getDefaultProperties=function(){var f=this._private;if(null!=f.defaultProperties)return f.defaultProperties;for(var c=tr({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(B,P){for(var q=1;q<=Do.pieBackgroundN;q++)B[P.name.replace("{{i}}",q)]=P.value;return B},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(B,P){return Do.arrowPrefixes.forEach(function(q){B[q+"-"+P.name]=P.value}),B},{})),d={},m=0;m<this.properties.length;m++){var _=this.properties[m];if(!_.pointsTo){var C=_.name,E=this.parse(C,c[C]);d[C]=E}}return f.defaultProperties=d,f.defaultProperties},Do.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Om={parse:function(f,c,d,m){var _=this;if(qe(c))return _.parseImplWarn(f,c,d,m);var q,B=Mg(f,""+c,d?"t":"f","mapping"===m||!0===m||!1===m||null==m?"dontcare":m),P=_.propCache=_.propCache||[];return(q=P[B])||(q=P[B]=_.parseImplWarn(f,c,d,m)),(d||"mapping"===m)&&(q=it(q))&&(q.value=it(q.value)),q},parseImplWarn:function(f,c,d,m){var _=this.parseImpl(f,c,d,m);return!_&&null!=c&&ge("The style property `".concat(f,": ").concat(c,"` is invalid")),_&&("width"===_.name||"height"===_.name)&&"label"===c&&ge("The style value of `label` is deprecated for `"+_.name+"`"),_}};Om.parseImpl=function(f,c,d,m){var _=this;f=kt(f);var C=_.properties[f],A=c,E=_.types;if(!C||void 0===c)return null;C.alias&&(f=(C=C.pointsTo).name);var B=ke(c);B&&(c=c.trim());var q,Q,P=C.type;if(!P)return null;if(d&&(""===c||null===c))return{name:f,value:c,bypass:!0,deleteBypass:!0};if(qe(c))return{name:f,value:c,strValue:"fn",mapped:E.fn,bypass:d};if(!(!B||m||c.length<7||"a"!==c[1])){if(c.length>=7&&"d"===c[0]&&(q=new RegExp(E.data.regex).exec(c)))return!d&&{name:f,value:q,strValue:""+c,mapped:E.data,field:q[1],bypass:d};if(c.length>=10&&"m"===c[0]&&(Q=new RegExp(E.mapData.regex).exec(c))){if(d||P.multiple)return!1;var me=E.mapData;if(!P.color&&!P.number)return!1;var _e=this.parse(f,Q[4]);if(!_e||_e.mapped)return!1;var Pe=this.parse(f,Q[5]);if(!Pe||Pe.mapped)return!1;if(_e.pfValue===Pe.pfValue||_e.strValue===Pe.strValue)return ge("`"+f+": "+c+"` is not a valid mapper because the output range is zero; converting to `"+f+": "+_e.strValue+"`"),this.parse(f,_e.strValue);if(P.color){var $e=_e.value,Ke=Pe.value;if(!($e[0]!==Ke[0]||$e[1]!==Ke[1]||$e[2]!==Ke[2]||$e[3]!==Ke[3]&&(null!=$e[3]&&1!==$e[3]||null!=Ke[3]&&1!==Ke[3])))return!1}return{name:f,value:Q,strValue:""+c,mapped:me,field:Q[1],fieldMin:parseFloat(Q[2]),fieldMax:parseFloat(Q[3]),valueMin:_e.value,valueMax:Pe.value,bypass:d}}}if(P.multiple&&"multiple"!==m){var rt;if(rt=B?c.split(/\s+/):ot(c)?c:[c],P.evenMultiple&&rt.length%2!=0)return null;for(var St=[],Gt=[],Wt=[],Tt="",jt=!1,Pt=0;Pt<rt.length;Pt++){var Zt=_.parse(f,rt[Pt],d,"multiple");jt=jt||ke(Zt.value),St.push(Zt.value),Wt.push(null!=Zt.pfValue?Zt.pfValue:Zt.value),Gt.push(Zt.units),Tt+=(Pt>0?" ":"")+Zt.strValue}return P.validate&&!P.validate(St,Gt)?null:P.singleEnum&&jt?1===St.length&&ke(St[0])?{name:f,value:St[0],strValue:St[0],bypass:d}:null:{name:f,value:St,pfValue:Wt,strValue:Tt,bypass:d,units:Gt}}var Kt=function(){for(var Ei=0;Ei<P.enums.length;Ei++)if(P.enums[Ei]===c)return{name:f,value:c,strValue:""+c,bypass:d};return null};if(P.number){var dt,Qt="px";if(P.units&&(dt=P.units),P.implicitUnits&&(Qt=P.implicitUnits),!P.unitless)if(B){var Ht="px|em"+(P.allowPercent?"|\\%":"");dt&&(Ht=dt);var xn=c.match("^("+ze+")("+Ht+")?$");xn&&(c=xn[1],dt=xn[2]||Qt)}else(!dt||P.implicitUnits)&&(dt=Qt);if(c=parseFloat(c),isNaN(c)&&void 0===P.enums)return null;if(isNaN(c)&&void 0!==P.enums)return c=A,Kt();if(P.integer&&!function(c){return Be(c)&&Math.floor(c)===c}(c)||void 0!==P.min&&(c<P.min||P.strictMin&&c===P.min)||void 0!==P.max&&(c>P.max||P.strictMax&&c===P.max))return null;var sn={name:f,value:c,strValue:""+c+(dt||""),units:dt,bypass:d};return sn.pfValue=P.unitless||"px"!==dt&&"em"!==dt?c:"px"!==dt&&dt?this.getEmSizeInPixels()*c:c,("ms"===dt||"s"===dt)&&(sn.pfValue="ms"===dt?c:1e3*c),("deg"===dt||"rad"===dt)&&(sn.pfValue="rad"===dt?c:function(c){return Math.PI*c/180}(c)),"%"===dt&&(sn.pfValue=c/100),sn}if(P.propList){var vn=[],Ln=""+c;if("none"!==Ln){for(var Fn=Ln.split(/\s*,\s*|\s+/),ri=0;ri<Fn.length;ri++){var Rn=Fn[ri].trim();_.properties[Rn]?vn.push(Rn):ge("`"+Rn+"` is not a valid property name")}if(0===vn.length)return null}return{name:f,value:vn,strValue:0===vn.length?"none":vn.join(" "),bypass:d}}if(P.color){var ei=function(c){return(ot(c)?c:null)||function(c){return ih[c.toLowerCase()]}(c)||function(c){if((4===c.length||7===c.length)&&"#"===c[0]){var m,_,C,A=16;return 4===c.length?(m=parseInt(c[1]+c[1],A),_=parseInt(c[2]+c[2],A),C=parseInt(c[3]+c[3],A)):(m=parseInt(c[1]+c[2],A),_=parseInt(c[3]+c[4],A),C=parseInt(c[5]+c[6],A)),[m,_,C]}}(c)||function(c){var d,m=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(m){d=[];for(var _=[],C=1;C<=3;C++){var A=m[C];if("%"===A[A.length-1]&&(_[C]=!0),A=parseFloat(A),_[C]&&(A=A/100*255),A<0||A>255)return;d.push(Math.floor(A))}if((_[1]||_[2]||_[3])&&!(_[1]&&_[2]&&_[3]))return;var P=m[4];if(void 0!==P){if((P=parseFloat(P))<0||P>1)return;d.push(P)}}return d}(c)||function(c){var d,m,_,C,A,E,B,P;function q(_e,Pe,$e){return $e<0&&($e+=1),$e>1&&($e-=1),$e<1/6?_e+6*(Pe-_e)*$e:$e<.5?Pe:$e<2/3?_e+(Pe-_e)*(2/3-$e)*6:_e}var Q=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(Q){if((m=parseInt(Q[1]))<0?m=(360- -1*m%360)%360:m>360&&(m%=360),m/=360,(_=parseFloat(Q[2]))<0||_>100||(_/=100,(C=parseFloat(Q[3]))<0||C>100)||(C/=100,void 0!==(A=Q[4])&&((A=parseFloat(A))<0||A>1)))return;if(0===_)E=B=P=Math.round(255*C);else{var fe=C<.5?C*(1+_):C+_-C*_,me=2*C-fe;E=Math.round(255*q(me,fe,m+1/3)),B=Math.round(255*q(me,fe,m)),P=Math.round(255*q(me,fe,m-1/3))}d=[E,B,P,A]}return d}(c)}(c);return ei?{name:f,value:ei,pfValue:ei,strValue:"rgb("+ei[0]+","+ei[1]+","+ei[2]+")",bypass:d}:null}if(P.regex||P.regexes){if(P.enums){var di=Kt();if(di)return di}for(var Ii=P.regexes?P.regexes:[P.regex],vi=0;vi<Ii.length;vi++){var kn=new RegExp(Ii[vi]).exec(c);if(kn)return{name:f,value:P.singleRegexMatchValue?kn[1]:kn,strValue:""+c,bypass:d}}return null}return P.string?{name:f,value:""+c,strValue:""+c,bypass:d}:P.enums?Kt():null};var tc=function f(c){if(!(this instanceof f))return new f(c);st(c)?(this._private={cy:c,coreStyle:{}},this.length=0,this.resetToDefault()):mt("A style must have a core reference")},zl=tc.prototype;zl.instanceString=function(){return"style"},zl.clear=function(){for(var f=this._private,d=f.cy.elements(),m=0;m<this.length;m++)this[m]=void 0;return this.length=0,f.contextStyles={},f.propDiffs={},this.cleanElements(d,!0),d.forEach(function(_){var C=_[0]._private;C.styleDirty=!0,C.appliedInitStyle=!1}),this},zl.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},zl.core=function(f){return this._private.coreStyle[f]||this.getDefaultProperty(f)},zl.selector=function(f){var c="core"===f?null:new op(f),d=this.length++;return this[d]={selector:c,properties:[],mappedProperties:[],index:d},this},zl.css=function(){var f=this,c=arguments;if(1===c.length)for(var d=c[0],m=0;m<f.properties.length;m++){var _=f.properties[m],C=d[_.name];void 0===C&&(C=d[ln(_.name)]),void 0!==C&&this.cssRule(_.name,C)}else 2===c.length&&this.cssRule(c[0],c[1]);return this},zl.style=zl.css,zl.cssRule=function(f,c){var d=this.parse(f,c);if(d){var m=this.length-1;this[m].properties.push(d),this[m].properties[d.name]=d,d.name.match(/pie-(\d+)-background-size/)&&d.value&&(this._private.hasPie=!0),d.mapped&&this[m].mappedProperties.push(d),!this[m].selector&&(this._private.coreStyle[d.name]=d)}return this},zl.append=function(f){return gt(f)?f.appendToStyle(this):ot(f)?this.appendFromJson(f):ke(f)&&this.appendFromString(f),this},tc.fromJson=function(f,c){var d=new tc(f);return d.fromJson(c),d},tc.fromString=function(f,c){return new tc(f).fromString(c)},[ka,fc,Ov,_u,El,pc,Do,Om].forEach(function(f){tr(zl,f)}),tc.types=zl.types,tc.properties=zl.properties,tc.propertyGroups=zl.propertyGroups,tc.propertyGroupNames=zl.propertyGroupNames,tc.propertyGroupKeys=zl.propertyGroupKeys;var Yg={style:function(c){return c&&this.setStyle(c).update(),this._private.style},setStyle:function(c){var d=this._private;return d.style=gt(c)?c.generateStyle(this):ot(c)?tc.fromJson(this,c):ke(c)?tc.fromString(this,c):tc(this),d.style},updateStyle:function(){this.mutableElements().updateStyle()}},Hh={autolock:function(c){return void 0===c?this._private.autolock:(this._private.autolock=!!c,this)},autoungrabify:function(c){return void 0===c?this._private.autoungrabify:(this._private.autoungrabify=!!c,this)},autounselectify:function(c){return void 0===c?this._private.autounselectify:(this._private.autounselectify=!!c,this)},selectionType:function(c){var d=this._private;return null==d.selectionType&&(d.selectionType="single"),void 0===c?d.selectionType:(("additive"===c||"single"===c)&&(d.selectionType=c),this)},panningEnabled:function(c){return void 0===c?this._private.panningEnabled:(this._private.panningEnabled=!!c,this)},userPanningEnabled:function(c){return void 0===c?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!c,this)},zoomingEnabled:function(c){return void 0===c?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!c,this)},userZoomingEnabled:function(c){return void 0===c?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!c,this)},boxSelectionEnabled:function(c){return void 0===c?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!c,this)},pan:function(){var m,_,C,A,E,c=arguments,d=this._private.pan;switch(c.length){case 0:return d;case 1:if(ke(c[0]))return d[m=c[0]];if(yt(c[0])){if(!this._private.panningEnabled)return this;E=(C=c[0]).y,Be(A=C.x)&&(d.x=A),Be(E)&&(d.y=E),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;_=c[1],("x"===(m=c[0])||"y"===m)&&Be(_)&&(d[m]=_),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(c,d){var C,A,E,B,P,m=arguments,_=this._private.pan;if(!this._private.panningEnabled)return this;switch(m.length){case 1:yt(c)&&(P=(E=m[0]).y,Be(B=E.x)&&(_.x+=B),Be(P)&&(_.y+=P),this.emit("pan viewport"));break;case 2:A=d,("x"===(C=c)||"y"===C)&&Be(A)&&(_[C]+=A),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(c,d){var m=this.getFitViewport(c,d);if(m){var _=this._private;_.zoom=m.zoom,_.pan=m.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(c,d){var m;if((Be(c)&&void 0===d&&(d=c,c=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(ke(c)?c=this.$(c):!function(c){return yt(c)&&Be(c.x1)&&Be(c.x2)&&Be(c.y1)&&Be(c.y2)}(c)?Ge(c)||(c=this.mutableElements()):((m={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2}).w=m.x2-m.x1,m.h=m.y2-m.y1),!Ge(c)||!c.empty())){m=m||c.boundingBox();var B,A=this.width(),E=this.height();if(d=Be(d)?d:0,!isNaN(A)&&!isNaN(E)&&A>0&&E>0&&!isNaN(m.w)&&!isNaN(m.h)&&m.w>0&&m.h>0)return{zoom:B=(B=(B=Math.min((A-2*d)/m.w,(E-2*d)/m.h))>this._private.maxZoom?this._private.maxZoom:B)<this._private.minZoom?this._private.minZoom:B,pan:{x:(A-B*(m.x1+m.x2))/2,y:(E-B*(m.y1+m.y2))/2}}}},zoomRange:function(c,d){var m=this._private;if(null==d){var _=c;c=_.min,d=_.max}return Be(c)&&Be(d)&&c<=d?(m.minZoom=c,m.maxZoom=d):Be(c)&&void 0===d&&c<=m.maxZoom?m.minZoom=c:Be(d)&&void 0===c&&d>=m.minZoom&&(m.maxZoom=d),this},minZoom:function(c){return void 0===c?this._private.minZoom:this.zoomRange({min:c})},maxZoom:function(c){return void 0===c?this._private.maxZoom:this.zoomRange({max:c})},getZoomedViewport:function(c){var C,A,d=this._private,m=d.pan,_=d.zoom,E=!1;return d.zoomingEnabled||(E=!0),Be(c)?A=c:yt(c)&&(A=c.level,null!=c.position?C=Ko(c.position,_,m):null!=c.renderedPosition&&(C=c.renderedPosition),null!=C&&!d.panningEnabled&&(E=!0)),A=(A=A>d.maxZoom?d.maxZoom:A)<d.minZoom?d.minZoom:A,!E&&Be(A)&&A!==_&&(null==C||Be(C.x)&&Be(C.y))?null!=C?{zoomed:!0,panned:!0,zoom:A,pan:{x:-A/_*(C.x-m.x)+C.x,y:-A/_*(C.y-m.y)+C.y}}:{zoomed:!0,panned:!1,zoom:A,pan:m}:null},zoom:function(c){if(void 0===c)return this._private.zoom;var d=this.getZoomedViewport(c),m=this._private;return null!=d&&d.zoomed?(m.zoom=d.zoom,d.panned&&(m.pan.x=d.pan.x,m.pan.y=d.pan.y),this.emit("zoom"+(d.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(c){var d=this._private,m=!0,_=!0,C=[],A=!1,E=!1;if(!c)return this;if(Be(c.zoom)||(m=!1),yt(c.pan)||(_=!1),!m&&!_)return this;if(m){var B=c.zoom;B<d.minZoom||B>d.maxZoom||!d.zoomingEnabled?A=!0:(d.zoom=B,C.push("zoom"))}if(_&&(!A||!c.cancelOnFailedZoom)&&d.panningEnabled){var P=c.pan;Be(P.x)&&(d.pan.x=P.x,E=!1),Be(P.y)&&(d.pan.y=P.y,E=!1),E||C.push("pan")}return C.length>0&&(C.push("viewport"),this.emit(C.join(" ")),this.notify("viewport")),this},center:function(c){var d=this.getCenterPan(c);return d&&(this._private.pan=d,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(c,d){if(this._private.panningEnabled){if(ke(c)){var m=c;c=this.mutableElements().filter(m)}else Ge(c)||(c=this.mutableElements());if(0!==c.length){var _=c.boundingBox(),C=this.width(),A=this.height();return{x:(C-(d=void 0===d?this._private.zoom:d)*(_.x1+_.x2))/2,y:(A-d*(_.y1+_.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var m,_,c=this._private,d=c.container;return c.sizeCache=c.sizeCache||(d?(m=pe.getComputedStyle(d),{width:d.clientWidth-(_=function(A){return parseFloat(m.getPropertyValue(A))})("padding-left")-_("padding-right"),height:d.clientHeight-_("padding-top")-_("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var c=this._private.pan,d=this._private.zoom,m=this.renderedExtent(),_={x1:(m.x1-c.x)/d,x2:(m.x2-c.x)/d,y1:(m.y1-c.y)/d,y2:(m.y2-c.y)/d};return _.w=_.x2-_.x1,_.h=_.y2-_.y1,_},renderedExtent:function(){var c=this.width(),d=this.height();return{x1:0,y1:0,x2:c,y2:d,w:c,h:d}},multiClickDebounceTime:function(c){return c?(this._private.multiClickDebounceTime=c,this):this._private.multiClickDebounceTime}};Hh.centre=Hh.center,Hh.autolockNodes=Hh.autolock,Hh.autoungrabifyNodes=Hh.autoungrabify;var eo={data:Cs.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Cs.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Cs.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Cs.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};eo.attr=eo.data,eo.removeAttr=eo.removeData;var gc=function(c){var d=this,m=(c=tr({},c)).container;m&&!Ve(m)&&Ve(m[0])&&(m=m[0]);var _=m?m._cyreg:null;(_=_||{})&&_.cy&&(_.cy.destroy(),_={});var C=_.readies=_.readies||[];m&&(m._cyreg=_),_.cy=d;var A=void 0!==pe&&void 0!==m&&!c.headless,E=c;E.layout=tr({name:A?"grid":"null"},E.layout),E.renderer=tr({name:A?"canvas":"null"},E.renderer);var B=function(_e,Pe,$e){return void 0!==Pe?Pe:void 0!==$e?$e:_e},P=this._private={container:m,ready:!1,options:E,elements:new ca(this),listeners:[],aniEles:new ca(this),data:E.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:B(!0,E.zoomingEnabled),userZoomingEnabled:B(!0,E.userZoomingEnabled),panningEnabled:B(!0,E.panningEnabled),userPanningEnabled:B(!0,E.userPanningEnabled),boxSelectionEnabled:B(!0,E.boxSelectionEnabled),autolock:B(!1,E.autolock,E.autolockNodes),autoungrabify:B(!1,E.autoungrabify,E.autoungrabifyNodes),autounselectify:B(!1,E.autounselectify),styleEnabled:void 0===E.styleEnabled?A:E.styleEnabled,zoom:Be(E.zoom)?E.zoom:1,pan:{x:yt(E.pan)&&Be(E.pan.x)?E.pan.x:0,y:yt(E.pan)&&Be(E.pan.y)?E.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:B(250,E.multiClickDebounceTime)};this.createEmitter(),this.selectionType(E.selectionType),this.zoomRange({min:E.minZoom,max:E.maxZoom}),P.styleEnabled&&d.setStyle([]);var Q=tr({},E,E.renderer);d.initRenderer(Q),function(_e,Pe){if(_e.some(Tn))return sa.all(_e).then(Pe);Pe(_e)}([E.style,E.elements],function(me){var _e=me[0],Pe=me[1];P.styleEnabled&&d.style().append(_e),function(_e,Pe,$e){d.notifications(!1);var Ke=d.mutableElements();Ke.length>0&&Ke.remove(),null!=_e&&(yt(_e)||ot(_e))&&d.add(_e),d.one("layoutready",function(rt){d.notifications(!0),d.emit(rt),d.one("load",Pe),d.emitAndNotify("load")}).one("layoutstop",function(){d.one("done",$e),d.emit("done")});var ht=tr({},d._private.options.layout);ht.eles=d.elements(),d.layout(ht).run()}(Pe,function(){d.startAnimationLoop(),P.ready=!0,qe(E.ready)&&d.on("ready",E.ready);for(var $e=0;$e<C.length;$e++)d.on("ready",C[$e]);_&&(_.readies=[]),d.emit("ready")},E.done)})},gh=gc.prototype;tr(gh,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(c){return this.isReady()?this.emitter().emit("ready",[],c):this.on("ready",c),this},destroy:function(){var c=this;if(!c.destroyed())return c.stopAnimationLoop(),c.destroyRenderer(),this.emit("destroy"),c._private.destroyed=!0,c},hasElementWithId:function(c){return this._private.elements.hasElementWithId(c)},getElementById:function(c){return this._private.elements.getElementById(c)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(c){return this._private.elements.merge(c),this},removeFromPool:function(c){return this._private.elements.unmerge(c),this},container:function(){return this._private.container||null},mount:function(c){if(null!=c){var d=this,m=d._private,_=m.options;return!Ve(c)&&Ve(c[0])&&(c=c[0]),d.stopAnimationLoop(),d.destroyRenderer(),m.container=c,m.styleEnabled=!0,d.invalidateSize(),d.initRenderer(tr({},_,_.renderer,{name:"null"===_.renderer.name?"canvas":_.renderer.name})),d.startAnimationLoop(),d.style(_.style),d.emit("mount"),d}},unmount:function(){var c=this;return c.stopAnimationLoop(),c.destroyRenderer(),c.initRenderer({name:"null"}),c.emit("unmount"),c},options:function(){return it(this._private.options)},json:function(c){var d=this,m=d._private,_=d.mutableElements();if(yt(c)){if(d.startBatch(),c.elements){var A={},E=function(St,Gt){for(var Wt=[],Tt=[],jt=0;jt<St.length;jt++){var Pt=St[jt];if(Pt.data.id){var Zt=""+Pt.data.id,Kt=d.getElementById(Zt);A[Zt]=!0,0!==Kt.length?Tt.push({ele:Kt,json:Pt}):(Gt&&(Pt.group=Gt),Wt.push(Pt))}else ge("cy.json() cannot handle elements without an ID attribute")}d.add(Wt);for(var dt=0;dt<Tt.length;dt++){var Qt=Tt[dt];Qt.ele.json(Qt.json)}};if(ot(c.elements))E(c.elements);else for(var B=["nodes","edges"],P=0;P<B.length;P++){var q=B[P],Q=c.elements[q];ot(Q)&&E(Q,q)}var fe=d.collection();_.filter(function(rt){return!A[rt.id()]}).forEach(function(rt){rt.isParent()?fe.merge(rt):rt.remove()}),fe.forEach(function(rt){return rt.children().move({parent:null})}),fe.forEach(function(rt){return(St=rt,d.getElementById(St.id())).remove();var St})}c.style&&d.style(c.style),null!=c.zoom&&c.zoom!==m.zoom&&d.zoom(c.zoom),c.pan&&(c.pan.x!==m.pan.x||c.pan.y!==m.pan.y)&&d.pan(c.pan),c.data&&d.data(c.data);for(var me=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],_e=0;_e<me.length;_e++){var Pe=me[_e];null!=c[Pe]&&d[Pe](c[Pe])}return d.endBatch(),this}var Ke={};c?Ke.elements=this.elements().map(function(rt){return rt.json()}):(Ke.elements={},_.forEach(function(rt){var St=rt.group();Ke.elements[St]||(Ke.elements[St]=[]),Ke.elements[St].push(rt.json())})),this._private.styleEnabled&&(Ke.style=d.style().json()),Ke.data=it(d.data());var ht=m.options;return Ke.zoomingEnabled=m.zoomingEnabled,Ke.userZoomingEnabled=m.userZoomingEnabled,Ke.zoom=m.zoom,Ke.minZoom=m.minZoom,Ke.maxZoom=m.maxZoom,Ke.panningEnabled=m.panningEnabled,Ke.userPanningEnabled=m.userPanningEnabled,Ke.pan=it(m.pan),Ke.boxSelectionEnabled=m.boxSelectionEnabled,Ke.renderer=it(ht.renderer),Ke.hideEdgesOnViewport=ht.hideEdgesOnViewport,Ke.textureOnViewport=ht.textureOnViewport,Ke.wheelSensitivity=ht.wheelSensitivity,Ke.motionBlur=ht.motionBlur,Ke.multiClickDebounceTime=ht.multiClickDebounceTime,Ke}}),gh.$id=gh.getElementById,[Bs,Pa,Uu,Xd,Ga,yu,Gu,Sl,Yg,Hh,eo].forEach(function(f){tr(gh,f)});var fp={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}},Gh=function(c){return c.scratch("breadthfirst")},bu=function(c,d){return c.scratch("breadthfirst",d)};function Mf(f){this.options=tr({},fp,f)}Mf.prototype.run=function(){var P,f=this.options,c=f,d=f.cy,m=c.eles,_=m.nodes().filter(function(mr){return!mr.isParent()}),C=m,A=c.directed,E=c.maximal||c.maximalAdjustments>0,B=Mc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(Ge(c.roots))P=c.roots;else if(ot(c.roots)){for(var q=[],Q=0;Q<c.roots.length;Q++){var me=d.getElementById(c.roots[Q]);q.push(me)}P=d.collection(q)}else if(ke(c.roots))P=d.$(c.roots);else if(A)P=_.roots();else{var _e=m.components();P=d.collection();for(var Pe=function(or){var Zr=_e[or],ki=Zr.maxDegree(!1),br=Zr.filter(function(wr){return wr.degree(!1)===ki});P=P.add(br)},$e=0;$e<_e.length;$e++)Pe($e)}var Ke=[],ht={},rt=function(or,Zr){null==Ke[Zr]&&(Ke[Zr]=[]);var ki=Ke[Zr].length;Ke[Zr].push(or),bu(or,{index:ki,depth:Zr})};C.bfs({roots:P,directed:c.directed,visit:function(or,Zr,ki,br,wr){var es=or[0],zs=es.id();rt(es,wr),ht[zs]=!0}});for(var Gt=[],Wt=0;Wt<_.length;Wt++){var Tt=_[Wt];ht[Tt.id()]||Gt.push(Tt)}var jt=function(or){for(var Zr=Ke[or],ki=0;ki<Zr.length;ki++){var br=Zr[ki];null!=br?bu(br,{depth:or,index:ki}):(Zr.splice(ki,1),ki--)}},Pt=function(){for(var or=0;or<Ke.length;or++)jt(or)},Zt=function(or,Zr){for(var ki=Gh(or),br=or.incomers().filter(function(zt){return zt.isNode()&&m.has(zt)}),wr=-1,es=or.id(),zs=0;zs<br.length;zs++){var $i=Gh(br[zs]);wr=Math.max(wr,$i.depth)}return ki.depth<=wr&&(Zr[es]?null:(function(or,Zr){var ki=Gh(or);Ke[ki.depth][ki.index]=null,rt(or,Zr)}(or,wr+1),Zr[es]=!0,!0))};if(A&&E){var Kt=[],dt={},Qt=function(or){return Kt.push(or)};for(_.forEach(function(mr){return Kt.push(mr)});Kt.length>0;){var xn=Kt.shift(),sn=Zt(xn,dt);if(sn)xn.outgoers().filter(function(mr){return mr.isNode()&&m.has(mr)}).forEach(Qt);else if(null===sn){ge("Detected double maximal shift for node `"+xn.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}Pt();var vn=0;if(c.avoidOverlap)for(var Ln=0;Ln<_.length;Ln++){var ri=_[Ln].layoutDimensions(c);vn=Math.max(vn,ri.w,ri.h)}var di={},Ii=function(or){if(di[or.id()])return di[or.id()];for(var Zr=Gh(or).depth,ki=or.neighborhood(),br=0,wr=0,es=0;es<ki.length;es++){var zs=ki[es];if(!zs.isEdge()&&!zs.isParent()&&_.has(zs)){var ts=Gh(zs);if(null!=ts){var $i=ts.index,zt=ts.depth;null!=$i&&null!=zt&&zt<Zr&&(br+=$i/Ke[zt].length,wr++)}}}return br/=wr=Math.max(1,wr),0===wr&&(br=0),di[or.id()]=br,br},vi=function(or,Zr){var wr=Ii(or)-Ii(Zr);return 0===wr?kr(or.id(),Zr.id()):wr};void 0!==c.depthSort&&(vi=c.depthSort);for(var pi=0;pi<Ke.length;pi++)Ke[pi].sort(vi),jt(pi);for(var kn=[],li=0;li<Gt.length;li++)kn.push(Gt[li]);Ke.unshift(kn),Pt();for(var Ei=0,Qi=0;Qi<Ke.length;Qi++)Ei=Math.max(Ke[Qi].length,Ei);var lr_x=B.x1+B.w/2,lr_y=B.x1+B.h/2,Wr=Ke.reduce(function(mr,or){return Math.max(mr,or.length)},0);return m.nodes().layoutPositions(this,c,function(or){var Zr=Gh(or),ki=Zr.depth,br=Zr.index,wr=Ke[ki].length,es=Math.max(B.w/((c.grid?Wr:wr)+1),vn),zs=Math.max(B.h/(Ke.length+1),vn),ts=Math.min(B.w/2/Ke.length,B.h/2/Ke.length);if(ts=Math.max(ts,vn),c.circle){var zt=ts*ki+ts-(Ke.length>0&&Ke[0].length<=3?ts/2:0),Qn=2*Math.PI/Ke[ki].length*br;return 0===ki&&1===Ke[0].length&&(zt=1),{x:lr_x+zt*Math.cos(Qn),y:lr_y+zt*Math.sin(Qn)}}return{x:lr_x+(br+1-(wr+1)/2)*es,y:(ki+1)*zs}}),this};var Df={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function Kg(f){this.options=tr({},Df,f)}Kg.prototype.run=function(){var f=this.options,c=f,d=f.cy,m=c.eles,_=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,C=m.nodes().not(":parent");c.sort&&(C=C.sort(c.sort));for(var q,A=Mc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),E={x:A.x1+A.w/2,y:A.y1+A.h/2},P=(void 0===c.sweep?2*Math.PI-2*Math.PI/C.length:c.sweep)/Math.max(1,C.length-1),Q=0,fe=0;fe<C.length;fe++){var _e=C[fe].layoutDimensions(c);Q=Math.max(Q,_e.w,_e.h)}if(q=Be(c.radius)?c.radius:C.length<=1?0:Math.min(A.h,A.w)/2-Q,C.length>1&&c.avoidOverlap){Q*=1.75;var Ke=Math.cos(P)-Math.cos(0),ht=Math.sin(P)-Math.sin(0),rt=Math.sqrt(Q*Q/(Ke*Ke+ht*ht));q=Math.max(rt,q)}return m.nodes().layoutPositions(this,c,function(Wt,Tt){var jt=c.startAngle+Tt*P*(_?1:-1),Pt=q*Math.cos(jt),Zt=q*Math.sin(jt);return{x:E.x+Pt,y:E.y+Zt}}),this};var mc={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(c){return c.degree()},levelWidth:function(c){return c.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function Tl(f){this.options=tr({},mc,f)}Tl.prototype.run=function(){for(var f=this.options,c=f,d=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,m=f.cy,_=c.eles,C=_.nodes().not(":parent"),A=Mc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:m.width(),h:m.height()}),E={x:A.x1+A.w/2,y:A.y1+A.h/2},B=[],P=0,q=0;q<C.length;q++){var fe,Q=C[q];fe=c.concentric(Q),B.push({value:fe,node:Q}),Q._private.scratch.concentric=fe}C.updateStyle();for(var me=0;me<C.length;me++){var Pe=C[me].layoutDimensions(c);P=Math.max(P,Pe.w,Pe.h)}B.sort(function(mr,or){return or.value-mr.value});for(var $e=c.levelWidth(C),Ke=[[]],ht=Ke[0],rt=0;rt<B.length;rt++){var St=B[rt];ht.length>0&&Math.abs(ht[0].value-St.value)>=$e&&Ke.push(ht=[]),ht.push(St)}var Wt=P+c.minNodeSpacing;if(!c.avoidOverlap){var Tt=Ke.length>0&&Ke[0].length>1,jt=Math.min(A.w,A.h)/2-Wt;Wt=Math.min(Wt,jt/(Ke.length+Tt?1:0))}for(var Zt=0,Kt=0;Kt<Ke.length;Kt++){var dt=Ke[Kt],Qt=void 0===c.sweep?2*Math.PI-2*Math.PI/dt.length:c.sweep,Ht=dt.dTheta=Qt/Math.max(1,dt.length-1);if(dt.length>1&&c.avoidOverlap){var xn=Math.cos(Ht)-Math.cos(0),sn=Math.sin(Ht)-Math.sin(0),vn=Math.sqrt(Wt*Wt/(xn*xn+sn*sn));Zt=Math.max(vn,Zt)}dt.r=Zt,Zt+=Wt}if(c.equidistant){for(var Ln=0,Fn=0,ri=0;ri<Ke.length;ri++)Ln=Math.max(Ln,Ke[ri].r-Fn);Fn=0;for(var di=0;di<Ke.length;di++){var Ii=Ke[di];0===di&&(Fn=Ii.r),Ii.r=Fn,Fn+=Ln}}for(var vi={},pi=0;pi<Ke.length;pi++)for(var kn=Ke[pi],li=kn.dTheta,Ei=kn.r,Qi=0;Qi<kn.length;Qi++){var lr=kn[Qi],Wr=c.startAngle+(d?1:-1)*li*Qi,Jr={x:E.x+Ei*Math.cos(Wr),y:E.y+Ei*Math.sin(Wr)};vi[lr.node.id()]=Jr}return _.nodes().layoutPositions(this,c,function(mr){var or=mr.id();return vi[or]}),this};var Wh,Yd={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(c,d){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(c){return 2048},nodeOverlap:4,idealEdgeLength:function(c){return 32},edgeElasticity:function(c){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Wu(f){this.options=tr({},Yd,f),this.options.layout=this}Wu.prototype.run=function(){var f=this.options,c=f.cy,d=this;d.stopped=!1,(!0===f.animate||!1===f.animate)&&d.emit({type:"layoutstart",layout:d}),Wh=!0===f.debug;var m=fd(c,d,f);Wh&&(void 0)(m),f.randomize&&Kd(m);var _=Sa(),C=function(){Nm(m,c,f),!0===f.fit&&c.fit(f.padding)},A=function(fe){return!(d.stopped||fe>=f.numIter||(Zg(m,f),m.temperature=m.temperature*f.coolingFactor,m.temperature<f.minTemp))},E=function(){if(!0===f.animate||!1===f.animate)C(),d.one("layoutstop",f.stop),d.emit({type:"layoutstop",layout:d});else{var fe=f.eles.nodes(),me=Cu(m,f,fe);fe.layoutPositions(d,f,me)}},B=0,P=!0;if(!0===f.animate)!function Q(){for(var fe=0;P&&fe<f.refresh;)P=A(B),B++,fe++;P?(Sa()-_>=f.animationThreshold&&C(),uu(Q)):(pd(m,f),E())}();else{for(;P;)P=A(B),B++;pd(m,f),E()}return this},Wu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Wu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var fd=function(c,d,m){for(var _=m.eles.edges(),C=m.eles.nodes(),A={isCompound:c.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:C.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:_.size(),temperature:m.initialTemp,clientWidth:c.width(),clientHeight:c.width(),boundingBox:Mc(m.boundingBox?m.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()})},E=m.eles.components(),B={},P=0;P<E.length;P++)for(var q=E[P],Q=0;Q<q.length;Q++)B[q[Q].id()]=P;for(P=0;P<A.nodeSize;P++){var _e=(me=C[P]).layoutDimensions(m);(Pe={}).isLocked=me.locked(),Pe.id=me.data("id"),Pe.parentId=me.data("parent"),Pe.cmptId=B[me.id()],Pe.children=[],Pe.positionX=me.position("x"),Pe.positionY=me.position("y"),Pe.offsetX=0,Pe.offsetY=0,Pe.height=_e.w,Pe.width=_e.h,Pe.maxX=Pe.positionX+Pe.width/2,Pe.minX=Pe.positionX-Pe.width/2,Pe.maxY=Pe.positionY+Pe.height/2,Pe.minY=Pe.positionY-Pe.height/2,Pe.padLeft=parseFloat(me.style("padding")),Pe.padRight=parseFloat(me.style("padding")),Pe.padTop=parseFloat(me.style("padding")),Pe.padBottom=parseFloat(me.style("padding")),Pe.nodeRepulsion=qe(m.nodeRepulsion)?m.nodeRepulsion(me):m.nodeRepulsion,A.layoutNodes.push(Pe),A.idToIndex[Pe.id]=P}var $e=[],Ke=0,ht=-1,rt=[];for(P=0;P<A.nodeSize;P++){var me,St=(me=A.layoutNodes[P]).parentId;null!=St?A.layoutNodes[A.idToIndex[St]].children.push(me.id):($e[++ht]=me.id,rt.push(me.id))}for(A.graphSet.push(rt);Ke<=ht;){var Gt=$e[Ke++],Tt=A.layoutNodes[A.idToIndex[Gt]].children;if(Tt.length>0)for(A.graphSet.push(Tt),P=0;P<Tt.length;P++)$e[++ht]=Tt[P]}for(P=0;P<A.graphSet.length;P++){var jt=A.graphSet[P];for(Q=0;Q<jt.length;Q++)A.indexToGraph[A.idToIndex[jt[Q]]]=P}for(P=0;P<A.edgeSize;P++){var Zt=_[P],Kt={};Kt.id=Zt.data("id"),Kt.sourceId=Zt.data("source"),Kt.targetId=Zt.data("target");var dt=qe(m.idealEdgeLength)?m.idealEdgeLength(Zt):m.idealEdgeLength,Qt=qe(m.edgeElasticity)?m.edgeElasticity(Zt):m.edgeElasticity,Ht=A.idToIndex[Kt.sourceId],xn=A.idToIndex[Kt.targetId];if(A.indexToGraph[Ht]!=A.indexToGraph[xn]){for(var Ln=Yn(Kt.sourceId,Kt.targetId,A),Fn=A.graphSet[Ln],ri=0,Pe=A.layoutNodes[Ht];-1===Fn.indexOf(Pe.id);)Pe=A.layoutNodes[A.idToIndex[Pe.parentId]],ri++;for(Pe=A.layoutNodes[xn];-1===Fn.indexOf(Pe.id);)Pe=A.layoutNodes[A.idToIndex[Pe.parentId]],ri++;dt*=ri*m.nestingFactor}Kt.idealLength=dt,Kt.elasticity=Qt,A.layoutEdges.push(Kt)}return A},Yn=function(c,d,m){var _=Lf(c,d,0,m);return 2>_.count?0:_.graph},Lf=function f(c,d,m,_){var C=_.graphSet[m];if(-1<C.indexOf(c)&&-1<C.indexOf(d))return{count:2,graph:m};for(var A=0,E=0;E<C.length;E++){var q=_.layoutNodes[_.idToIndex[C[E]]].children;if(0!==q.length){var fe=f(c,d,_.indexToGraph[_.idToIndex[q[0]]],_);if(0!==fe.count){if(1!==fe.count)return fe;if(2==++A)break}}}return{count:A,graph:m}},Kd=function(c,d){for(var m=c.clientWidth,_=c.clientHeight,C=0;C<c.nodeSize;C++){var A=c.layoutNodes[C];0===A.children.length&&!A.isLocked&&(A.positionX=Math.random()*m,A.positionY=Math.random()*_)}},Cu=function(c,d,m){var _=c.boundingBox,C={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return d.boundingBox&&(m.forEach(function(A){var E=c.layoutNodes[c.idToIndex[A.data("id")]];C.x1=Math.min(C.x1,E.positionX),C.x2=Math.max(C.x2,E.positionX),C.y1=Math.min(C.y1,E.positionY),C.y2=Math.max(C.y2,E.positionY)}),C.w=C.x2-C.x1,C.h=C.y2-C.y1),function(A,E){var B=c.layoutNodes[c.idToIndex[A.data("id")]];return d.boundingBox?{x:_.x1+(B.positionX-C.x1)/C.w*_.w,y:_.y1+(B.positionY-C.y1)/C.h*_.h}:{x:B.positionX,y:B.positionY}}},Nm=function(c,d,m){var _=m.layout,C=m.eles.nodes(),A=Cu(c,m,C);C.positions(A),!0!==c.ready&&(c.ready=!0,_.one("layoutready",m.ready),_.emit({type:"layoutready",layout:this}))},Zg=function(c,d,m){pp(c,d),iu(c),Jg(c,d),gp(c),Vl(c)},pp=function(c,d){for(var m=0;m<c.graphSet.length;m++)for(var _=c.graphSet[m],C=_.length,A=0;A<C;A++)for(var E=c.layoutNodes[c.idToIndex[_[A]]],B=A+1;B<C;B++)Ml(E,c.layoutNodes[c.idToIndex[_[B]]],c,d)},ju=function(c){return-c+2*c*Math.random()},Ml=function(c,d,m,_){if(c.cmptId===d.cmptId||m.isCompound){var E=d.positionX-c.positionX,B=d.positionY-c.positionY;0===E&&0===B&&(E=ju(1),B=ju(1));var q=Qg(c,d,E,B);if(q>0)var me=(Q=_.nodeOverlap*q)*E/(fe=Math.sqrt(E*E+B*B)),_e=Q*B/fe;else{var Q,Pe=mh(c,E,B),$e=mh(d,-1*E,-1*B),Ke=$e.x-Pe.x,ht=$e.y-Pe.y,rt=Ke*Ke+ht*ht,fe=Math.sqrt(rt);me=(Q=(c.nodeRepulsion+d.nodeRepulsion)/rt)*Ke/fe,_e=Q*ht/fe}c.isLocked||(c.offsetX-=me,c.offsetY-=_e),d.isLocked||(d.offsetX+=me,d.offsetY+=_e)}},Qg=function(c,d,m,_){if(m>0)var C=c.maxX-d.minX;else C=d.maxX-c.minX;if(_>0)var A=c.maxY-d.minY;else A=d.maxY-c.minY;return C>=0&&A>=0?Math.sqrt(C*C+A*A):0},mh=function(c,d,m){var _=c.positionX,C=c.positionY,A=c.height||1,E=c.width||1,B=m/d,P=A/E,q={};return 0===d&&0<m||0===d&&0>m?(q.x=_,q.y=C+A/2,q):0<d&&-1*P<=B&&B<=P?(q.x=_+E/2,q.y=C+E*m/2/d,q):0>d&&-1*P<=B&&B<=P?(q.x=_-E/2,q.y=C-E*m/2/d,q):0<m&&(B<=-1*P||B>=P)?(q.x=_+A*d/2/m,q.y=C+A/2,q):(0>m&&(B<=-1*P||B>=P)&&(q.x=_-A*d/2/m,q.y=C-A/2),q)},iu=function(c,d){for(var m=0;m<c.edgeSize;m++){var _=c.layoutEdges[m],A=c.layoutNodes[c.idToIndex[_.sourceId]],B=c.layoutNodes[c.idToIndex[_.targetId]],P=B.positionX-A.positionX,q=B.positionY-A.positionY;if(0!==P||0!==q){var Q=mh(A,P,q),fe=mh(B,-1*P,-1*q),me=fe.x-Q.x,_e=fe.y-Q.y,Pe=Math.sqrt(me*me+_e*_e),$e=Math.pow(_.idealLength-Pe,2)/_.elasticity;if(0!==Pe)var Ke=$e*me/Pe,ht=$e*_e/Pe;else Ke=0,ht=0;A.isLocked||(A.offsetX+=Ke,A.offsetY+=ht),B.isLocked||(B.offsetX-=Ke,B.offsetY-=ht)}}},Jg=function(c,d){if(0!==d.gravity)for(var _=0;_<c.graphSet.length;_++){var C=c.graphSet[_],A=C.length;if(0===_)var E=c.clientHeight/2,B=c.clientWidth/2;else{var q=c.layoutNodes[c.idToIndex[c.layoutNodes[c.idToIndex[C[0]]].parentId]];E=q.positionX,B=q.positionY}for(var Q=0;Q<A;Q++){var fe=c.layoutNodes[c.idToIndex[C[Q]]];if(!fe.isLocked){var me=E-fe.positionX,_e=B-fe.positionY,Pe=Math.sqrt(me*me+_e*_e);if(Pe>1){var Ke=d.gravity*_e/Pe;fe.offsetX+=d.gravity*me/Pe,fe.offsetY+=Ke}}}}},gp=function(c,d){var m=[],_=0,C=-1;for(m.push.apply(m,c.graphSet[0]),C+=c.graphSet[0].length;_<=C;){var A=m[_++],B=c.layoutNodes[c.idToIndex[A]],P=B.children;if(0<P.length&&!B.isLocked){for(var q=B.offsetX,Q=B.offsetY,fe=0;fe<P.length;fe++){var me=c.layoutNodes[c.idToIndex[P[fe]]];me.offsetX+=q,me.offsetY+=Q,m[++C]=P[fe]}B.offsetX=0,B.offsetY=0}}},Vl=function(c,d){for(var m=0;m<c.nodeSize;m++)0<(_=c.layoutNodes[m]).children.length&&(_.maxX=void 0,_.minX=void 0,_.maxY=void 0,_.minY=void 0);for(m=0;m<c.nodeSize;m++)if(!(0<(_=c.layoutNodes[m]).children.length||_.isLocked)){var C=vh(_.offsetX,_.offsetY,c.temperature);_.positionX+=C.x,_.positionY+=C.y,_.offsetX=0,_.offsetY=0,_.minX=_.positionX-_.width,_.maxX=_.positionX+_.width,_.minY=_.positionY-_.height,_.maxY=_.positionY+_.height,em(_,c)}for(m=0;m<c.nodeSize;m++){var _;0<(_=c.layoutNodes[m]).children.length&&!_.isLocked&&(_.positionX=(_.maxX+_.minX)/2,_.positionY=(_.maxY+_.minY)/2,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY)}},vh=function(c,d,m){var _=Math.sqrt(c*c+d*d);if(_>m)var C={x:m*c/_,y:m*d/_};else C={x:c,y:d};return C},em=function f(c,d){var m=c.parentId;if(null!=m){var _=d.layoutNodes[d.idToIndex[m]],C=!1;if((null==_.maxX||c.maxX+_.padRight>_.maxX)&&(_.maxX=c.maxX+_.padRight,C=!0),(null==_.minX||c.minX-_.padLeft<_.minX)&&(_.minX=c.minX-_.padLeft,C=!0),(null==_.maxY||c.maxY+_.padBottom>_.maxY)&&(_.maxY=c.maxY+_.padBottom,C=!0),(null==_.minY||c.minY-_.padTop<_.minY)&&(_.minY=c.minY-_.padTop,C=!0),C)return f(_,d)}},pd=function(c,d){for(var m=c.layoutNodes,_=[],C=0;C<m.length;C++){var A=m[C],E=A.cmptId;(_[E]=_[E]||[]).push(A)}var P=0;for(C=0;C<_.length;C++)if(q=_[C]){q.x1=1/0,q.x2=-1/0,q.y1=1/0,q.y2=-1/0;for(var Q=0;Q<q.length;Q++){var fe=q[Q];q.x1=Math.min(q.x1,fe.positionX-fe.width/2),q.x2=Math.max(q.x2,fe.positionX+fe.width/2),q.y1=Math.min(q.y1,fe.positionY-fe.height/2),q.y2=Math.max(q.y2,fe.positionY+fe.height/2)}q.w=q.x2-q.x1,q.h=q.y2-q.y1,P+=q.w*q.h}_.sort(function(ht,rt){return rt.w*rt.h-ht.w*ht.h});var me=0,_e=0,Pe=0,$e=0,Ke=Math.sqrt(P)*c.clientWidth/c.clientHeight;for(C=0;C<_.length;C++){var q;if(q=_[C]){for(Q=0;Q<q.length;Q++)(fe=q[Q]).isLocked||(fe.positionX+=me-q.x1,fe.positionY+=_e-q.y1);me+=q.w+d.componentSpacing,Pe+=q.w+d.componentSpacing,$e=Math.max($e,q.h),Pe>Ke&&(_e+=$e+d.componentSpacing,me=0,Pe=0,$e=0)}}},nc={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(c){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function wu(f){this.options=tr({},nc,f)}wu.prototype.run=function(){var f=this.options,c=f,d=f.cy,m=c.eles,_=m.nodes().not(":parent");c.sort&&(_=_.sort(c.sort));var C=Mc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(0===C.h||0===C.w)m.nodes().layoutPositions(this,c,function(di){return{x:C.x1,y:C.y1}});else{var A=_.size(),E=Math.sqrt(A*C.h/C.w),B=Math.round(E),P=Math.round(C.w/C.h*E),q=function(Ii){if(null==Ii)return Math.min(B,P);Math.min(B,P)==B?B=Ii:P=Ii},Q=function(Ii){if(null==Ii)return Math.max(B,P);Math.max(B,P)==B?B=Ii:P=Ii},fe=c.rows,me=null!=c.cols?c.cols:c.columns;if(null!=fe&&null!=me)B=fe,P=me;else if(null!=fe&&null==me)B=fe,P=Math.ceil(A/B);else if(null==fe&&null!=me)P=me,B=Math.ceil(A/P);else if(P*B>A){var _e=q(),Pe=Q();(_e-1)*Pe>=A?q(_e-1):(Pe-1)*_e>=A&&Q(Pe-1)}else for(;P*B<A;){var $e=q(),Ke=Q();(Ke+1)*$e>=A?Q(Ke+1):q($e+1)}var ht=C.w/P,rt=C.h/B;if(c.condense&&(ht=0,rt=0),c.avoidOverlap)for(var St=0;St<_.length;St++){var Gt=_[St],Wt=Gt._private.position;(null==Wt.x||null==Wt.y)&&(Wt.x=0,Wt.y=0);var Tt=Gt.layoutDimensions(c),jt=c.avoidOverlapPadding,Zt=Tt.h+jt;ht=Math.max(ht,Tt.w+jt),rt=Math.max(rt,Zt)}for(var Kt={},dt=function(Ii,vi){return!!Kt["c-"+Ii+"-"+vi]},Qt=function(Ii,vi){Kt["c-"+Ii+"-"+vi]=!0},Ht=0,xn=0,sn=function(){++xn>=P&&(xn=0,Ht++)},vn={},Ln=0;Ln<_.length;Ln++){var Fn=_[Ln],ri=c.position(Fn);if(ri&&(void 0!==ri.row||void 0!==ri.col)){var Rn={row:ri.row,col:ri.col};if(void 0===Rn.col)for(Rn.col=0;dt(Rn.row,Rn.col);)Rn.col++;else if(void 0===Rn.row)for(Rn.row=0;dt(Rn.row,Rn.col);)Rn.row++;vn[Fn.id()]=Rn,Qt(Rn.row,Rn.col)}}_.layoutPositions(this,c,function(Ii,vi){var pi,kn;if(Ii.locked()||Ii.isParent())return!1;var li=vn[Ii.id()];if(li)pi=li.col*ht+ht/2+C.x1,kn=li.row*rt+rt/2+C.y1;else{for(;dt(Ht,xn);)sn();pi=xn*ht+ht/2+C.x1,kn=Ht*rt+rt/2+C.y1,Qt(Ht,xn),sn()}return{x:pi,y:kn}})}return this};var Zd={ready:function(){},stop:function(){}};function gd(f){this.options=tr({},Zd,f)}gd.prototype.run=function(){var f=this.options,c=f.eles,d=this;return d.emit("layoutstart"),c.nodes().positions(function(){return{x:0,y:0}}),d.one("layoutready",f.ready),d.emit("layoutready"),d.one("layoutstop",f.stop),d.emit("layoutstop"),this},gd.prototype.stop=function(){return this};var mp={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function $u(f){this.options=tr({},mp,f)}$u.prototype.run=function(){var f=this.options,d=f.eles.nodes(),m=qe(f.positions);return d.layoutPositions(this,f,function(C,A){var E=function _(C){return null==f.positions?function(c){return{x:c.x,y:c.y}}(C.position()):m?f.positions(C):f.positions[C._private.data.id]??null}(C);return!C.locked()&&null!=E&&E}),this};var cs={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function vp(f){this.options=tr({},cs,f)}vp.prototype.run=function(){var f=this.options,c=f.cy,d=f.eles,m=Mc(f.boundingBox?f.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});return d.nodes().layoutPositions(this,f,function(A,E){return{x:m.x1+Math.round(Math.random()*m.w),y:m.y1+Math.round(Math.random()*m.h)}}),this};var tm=[{name:"breadthfirst",impl:Mf},{name:"circle",impl:Kg},{name:"concentric",impl:Tl},{name:"cose",impl:Wu},{name:"grid",impl:wu},{name:"null",impl:gd},{name:"preset",impl:$u},{name:"random",impl:vp}];function Qd(f){this.options=f,this.notifications=0}var Rf=function(){},yp=function(){throw new Error("A headless instance can not render images")};Qd.prototype={recalculateRenderedStyle:Rf,notify:function(){this.notifications++},init:Rf,isHeadless:function(){return!0},png:yp,jpg:yp};var tg={arrowShapeWidth:.3,registerArrowShapes:function(){var f=this.arrowShapes={},c=this,d=function(P,q,Q,fe,me,_e,Pe){return me.x-Q/2-Pe<=P&&P<=me.x+Q/2+Pe&&me.y-Q/2-Pe<=q&&q<=me.y+Q/2+Pe},m=function(P,q,Q,fe,me){var _e=P*Math.cos(fe)-q*Math.sin(fe),Pe=P*Math.sin(fe)+q*Math.cos(fe);return{x:_e*Q+me.x,y:Pe*Q+me.y}},_=function(P,q,Q,fe){for(var me=[],_e=0;_e<P.length;_e+=2)me.push(m(P[_e],P[_e+1],q,Q,fe));return me},C=function(P){for(var q=[],Q=0;Q<P.length;Q++){var fe=P[Q];q.push(fe.x,fe.y)}return q},A=function(P){return P.pstyle("width").pfValue*P.pstyle("arrow-scale").pfValue*2},E=function(P,q){ke(q)&&(q=f[q]),f[P]=tr({name:P,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(fe,me,_e,Pe,$e,Ke){var ht=C(_(this.points,_e+2*Ke,Pe,$e));return Ma(fe,me,ht)},roughCollide:d,draw:function(fe,me,_e,Pe){var $e=_(this.points,me,_e,Pe);c.arrowShapeImpl("polygon")(fe,$e)},spacing:function(fe){return 0},gap:A},q)};E("none",{collide:$f,roughCollide:$f,draw:et,spacing:rd,gap:rd}),E("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),E("arrow","triangle"),E("triangle-backcurve",{points:f.triangle.points,controlPoint:[0,-.15],roughCollide:d,draw:function(P,q,Q,fe,me){var _e=_(this.points,q,Q,fe),Pe=this.controlPoint,$e=m(Pe[0],Pe[1],q,Q,fe);c.arrowShapeImpl(this.name)(P,_e,$e)},gap:function(P){return.8*A(P)}}),E("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(P,q,Q,fe,me,_e,Pe){var $e=C(_(this.points,Q+2*Pe,fe,me)),Ke=C(_(this.pointsTee,Q+2*Pe,fe,me));return Ma(P,q,$e)||Ma(P,q,Ke)},draw:function(P,q,Q,fe,me){var _e=_(this.points,q,Q,fe),Pe=_(this.pointsTee,q,Q,fe);c.arrowShapeImpl(this.name)(P,_e,Pe)}}),E("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(P,q,Q,fe,me,_e,Pe){var $e=me,Ke=Math.pow($e.x-P,2)+Math.pow($e.y-q,2)<=Math.pow((Q+2*Pe)*this.radius,2),ht=C(_(this.points,Q+2*Pe,fe,me));return Ma(P,q,ht)||Ke},draw:function(P,q,Q,fe,me){var _e=_(this.pointsTr,q,Q,fe);c.arrowShapeImpl(this.name)(P,_e,fe.x,fe.y,this.radius*q)},spacing:function(P){return c.getArrowWidth(P.pstyle("width").pfValue,P.pstyle("arrow-scale").value)*this.radius}}),E("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(P,q){var Q=this.baseCrossLinePts.slice(),fe=q/P;return Q[3]=Q[3]-fe,Q[5]=Q[5]-fe,Q},collide:function(P,q,Q,fe,me,_e,Pe){var $e=C(_(this.points,Q+2*Pe,fe,me)),Ke=C(_(this.crossLinePts(Q,_e),Q+2*Pe,fe,me));return Ma(P,q,$e)||Ma(P,q,Ke)},draw:function(P,q,Q,fe,me){var _e=_(this.points,q,Q,fe),Pe=_(this.crossLinePts(q,me),q,Q,fe);c.arrowShapeImpl(this.name)(P,_e,Pe)}}),E("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(P){return.525*A(P)}}),E("circle",{radius:.15,collide:function(P,q,Q,fe,me,_e,Pe){var $e=me;return Math.pow($e.x-P,2)+Math.pow($e.y-q,2)<=Math.pow((Q+2*Pe)*this.radius,2)},draw:function(P,q,Q,fe,me){c.arrowShapeImpl(this.name)(P,fe.x,fe.y,this.radius*q)},spacing:function(P){return c.getArrowWidth(P.pstyle("width").pfValue,P.pstyle("arrow-scale").value)*this.radius}}),E("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(P){return 1},gap:function(P){return 1}}),E("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),E("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(P){return P.pstyle("width").pfValue*P.pstyle("arrow-scale").value}}),E("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(P){return.95*P.pstyle("width").pfValue*P.pstyle("arrow-scale").value}})}},Oa={projectIntoViewport:function(f,c){var d=this.cy,m=this.findContainerClientCoords(),_=m[0],C=m[1],A=m[4],E=d.pan(),B=d.zoom();return[((f-_)/A-E.x)/B,((c-C)/A-E.y)/B]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var f=this.container,c=f.getBoundingClientRect(),d=pe.getComputedStyle(f),m=function(Ke){return parseFloat(d.getPropertyValue(Ke))},__left=m("padding-left"),__right=m("padding-right"),__top=m("padding-top"),__bottom=m("padding-bottom"),C_left=m("border-left-width"),C_right=m("border-right-width"),C_top=m("border-top-width"),A=(m("border-bottom-width"),f.clientWidth);return this.containerBB=[c.left+__left+C_left,c.top+__top+C_top,A-(__left+__right),f.clientHeight-(__top+__bottom),c.width/(A+(C_left+C_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(f,c,d,m){return this.findNearestElements(f,c,d,m)[0]},findNearestElements:function(f,c,d,m){var _e,Pe,_=this,C=this,A=C.getCachedZSortedEles(),E=[],B=C.cy.zoom(),P=C.cy.hasCompoundNodes(),q=(m?24:8)/B,Q=(m?8:2)/B,fe=(m?8:2)/B,me=1/0;function $e(Tt,jt){if(Tt.isNode()){if(Pe)return;Pe=Tt,E.push(Tt)}if(Tt.isEdge()&&(null==jt||jt<me))if(_e){if(_e.pstyle("z-compound-depth").value===Tt.pstyle("z-compound-depth").value&&_e.pstyle("z-compound-depth").value===Tt.pstyle("z-compound-depth").value)for(var Pt=0;Pt<E.length;Pt++)if(E[Pt].isEdge()){E[Pt]=Tt,_e=Tt,me=jt??me;break}}else E.push(Tt),_e=Tt,me=jt??me}function Ke(Tt){var jt=Tt.outerWidth()+2*Q,Pt=Tt.outerHeight()+2*Q,Zt=jt/2,Kt=Pt/2,dt=Tt.position();if(dt.x-Zt<=f&&f<=dt.x+Zt&&dt.y-Kt<=c&&c<=dt.y+Kt&&C.nodeShapes[_.getNodeShape(Tt)].checkPoint(f,c,0,jt,Pt,dt.x,dt.y))return $e(Tt,0),!0}function ht(Tt){var xn,jt=Tt._private,Pt=jt.rscratch,Zt=Tt.pstyle("width").pfValue,Kt=Tt.pstyle("arrow-scale").value,dt=Zt/2+q,Qt=dt*dt,Ht=2*dt,Ln=jt.source,Fn=jt.target;if("segments"===Pt.edgeType||"straight"===Pt.edgeType||"haystack"===Pt.edgeType){for(var sn=Pt.allpts,vn=0;vn+3<sn.length;vn+=2)if(Xl(f,c,sn[vn],sn[vn+1],sn[vn+2],sn[vn+3],Ht)&&Qt>(xn=Dh(f,c,sn[vn],sn[vn+1],sn[vn+2],sn[vn+3])))return $e(Tt,xn),!0}else if("bezier"===Pt.edgeType||"multibezier"===Pt.edgeType||"self"===Pt.edgeType||"compound"===Pt.edgeType)for(sn=Pt.allpts,vn=0;vn+5<Pt.allpts.length;vn+=4)if(z_(f,c,sn[vn],sn[vn+1],sn[vn+2],sn[vn+3],sn[vn+4],sn[vn+5],Ht)&&Qt>(xn=Ly(f,c,sn[vn],sn[vn+1],sn[vn+2],sn[vn+3],sn[vn+4],sn[vn+5])))return $e(Tt,xn),!0;Ln=Ln||jt.source,Fn=Fn||jt.target;var ri=_.getArrowWidth(Zt,Kt),Rn=[{name:"source",x:Pt.arrowStartX,y:Pt.arrowStartY,angle:Pt.srcArrowAngle},{name:"target",x:Pt.arrowEndX,y:Pt.arrowEndY,angle:Pt.tgtArrowAngle},{name:"mid-source",x:Pt.midX,y:Pt.midY,angle:Pt.midsrcArrowAngle},{name:"mid-target",x:Pt.midX,y:Pt.midY,angle:Pt.midtgtArrowAngle}];for(vn=0;vn<Rn.length;vn++){var ei=Rn[vn],di=C.arrowShapes[Tt.pstyle(ei.name+"-arrow-shape").value],Ii=Tt.pstyle("width").pfValue;if(di.roughCollide(f,c,ri,ei.angle,{x:ei.x,y:ei.y},Ii,q)&&di.collide(f,c,ri,ei.angle,{x:ei.x,y:ei.y},Ii,q))return $e(Tt),!0}P&&E.length>0&&(Ke(Ln),Ke(Fn))}function rt(Tt,jt,Pt){return ur(Tt,jt,Pt)}function St(Tt,jt){var Kt,Pt=Tt._private,Zt=fe;Kt=jt?jt+"-":"",Tt.boundingBox();var dt=Pt.labelBounds[jt||"main"],Qt=Tt.pstyle(Kt+"label").value;if("yes"===Tt.pstyle("text-events").strValue&&Qt){var xn=rt(Pt.rscratch,"labelX",jt),sn=rt(Pt.rscratch,"labelY",jt),vn=rt(Pt.rscratch,"labelAngle",jt),Ln=Tt.pstyle(Kt+"text-margin-x").pfValue,Fn=Tt.pstyle(Kt+"text-margin-y").pfValue,ri=dt.x1-Zt-Ln,Rn=dt.x2+Zt-Ln,ei=dt.y1-Zt-Fn,di=dt.y2+Zt-Fn;if(vn){var Ii=Math.cos(vn),vi=Math.sin(vn),pi=function(Jr,mr){return{x:(Jr-=xn)*Ii-(mr-=sn)*vi+xn,y:Jr*vi+mr*Ii+sn}},kn=pi(ri,ei),li=pi(ri,di),Ei=pi(Rn,ei),Qi=pi(Rn,di);if(Ma(f,c,[kn.x+Ln,kn.y+Fn,Ei.x+Ln,Ei.y+Fn,Qi.x+Ln,Qi.y+Fn,li.x+Ln,li.y+Fn]))return $e(Tt),!0}else if(os(dt,f,c))return $e(Tt),!0}}d&&(A=A.interactive);for(var Gt=A.length-1;Gt>=0;Gt--){var Wt=A[Gt];Wt.isNode()?Ke(Wt)||St(Wt):ht(Wt)||St(Wt)||St(Wt,"source")||St(Wt,"target")}return E},getAllInBox:function(f,c,d,m){for(var _=this.getCachedZSortedEles().interactive,C=[],A=Math.min(f,d),E=Math.max(f,d),B=Math.min(c,m),P=Math.max(c,m),q=Mc({x1:f=A,y1:c=B,x2:d=E,y2:m=P}),Q=0;Q<_.length;Q++){var fe=_[Q];if(fe.isNode()){var me=fe,_e=me.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});Am(q,_e)&&!Cv(_e,q)&&C.push(me)}else{var Pe=fe,$e=Pe._private,Ke=$e.rscratch;if(null!=Ke.startX&&null!=Ke.startY&&!os(q,Ke.startX,Ke.startY)||null!=Ke.endX&&null!=Ke.endY&&!os(q,Ke.endX,Ke.endY))continue;if("bezier"===Ke.edgeType||"multibezier"===Ke.edgeType||"self"===Ke.edgeType||"compound"===Ke.edgeType||"segments"===Ke.edgeType||"haystack"===Ke.edgeType){for(var ht=$e.rstyle.bezierPts||$e.rstyle.linePts||$e.rstyle.haystackPts,rt=!0,St=0;St<ht.length;St++)if(!bv(q,ht[St])){rt=!1;break}rt&&C.push(Pe)}else("haystack"===Ke.edgeType||"straight"===Ke.edgeType)&&C.push(Pe)}}return C}},Bm={calculateArrowAngles:function(f){var B,P,q,Q,fe,me,c=f._private.rscratch,d="haystack"===c.edgeType,m="bezier"===c.edgeType,_="multibezier"===c.edgeType,C="segments"===c.edgeType,A="compound"===c.edgeType,E="self"===c.edgeType;d?(q=c.haystackPts[0],Q=c.haystackPts[1],fe=c.haystackPts[2],me=c.haystackPts[3]):(q=c.arrowStartX,Q=c.arrowStartY,fe=c.arrowEndX,me=c.arrowEndY),Ke=c.midX,ht=c.midY,C?(B=q-c.segpts[0],P=Q-c.segpts[1]):_||A||E||m?(B=q-hc((_e=c.allpts)[0],_e[2],_e[4],.1),P=Q-hc(_e[1],_e[3],_e[5],.1)):(B=q-Ke,P=Q-ht),c.srcArrowAngle=Rg(B,P);var Ke=c.midX,ht=c.midY;if(d&&(Ke=(q+fe)/2,ht=(Q+me)/2),B=fe-q,P=me-Q,C)if((_e=c.allpts).length/2%2==0)B=_e[rt=_e.length/2]-_e[St=rt-2],P=_e[rt+1]-_e[St+1];else{var rt,St,Gt=2+(rt=_e.length/2-1);B=_e[rt]-_e[St=rt-2],P=_e[rt+1]-_e[St+1]}else if(_||A||E){var Tt,jt,Pt,Zt,dt,Kt,Qt,_e=c.allpts;c.ctrlpts.length/2%2==0?(Tt=hc(_e[Kt=_e.length/2-1],_e[dt=Kt+2],_e[Qt=dt+2],0),jt=hc(_e[Kt+1],_e[dt+1],_e[Qt+1],0),Pt=hc(_e[Kt],_e[dt],_e[Qt],1e-4),Zt=hc(_e[Kt+1],_e[dt+1],_e[Qt+1],1e-4)):(Tt=hc(_e[Kt=(dt=_e.length/2-1)-2],_e[dt],_e[Qt=dt+2],.4999),jt=hc(_e[Kt+1],_e[dt+1],_e[Qt+1],.4999),Pt=hc(_e[Kt],_e[dt],_e[Qt],.5),Zt=hc(_e[Kt+1],_e[dt+1],_e[Qt+1],.5)),B=Pt-Tt,P=Zt-jt}if(c.midtgtArrowAngle=Rg(B,P),c.midDispX=B,c.midDispY=P,B*=-1,P*=-1,C&&(_e=c.allpts).length/2%2!=0&&(B=-(_e[Gt=2+(rt=_e.length/2-1)]-_e[rt]),P=-(_e[Gt+1]-_e[rt+1])),c.midsrcArrowAngle=Rg(B,P),C)B=fe-c.segpts[c.segpts.length-2],P=me-c.segpts[c.segpts.length-1];else if(_||A||E||m){var Ht=(_e=c.allpts).length;B=fe-hc(_e[Ht-6],_e[Ht-4],_e[Ht-2],.9),P=me-hc(_e[Ht-5],_e[Ht-3],_e[Ht-1],.9)}else B=fe-Ke,P=me-ht;c.tgtArrowAngle=Rg(B,P)}};Bm.getArrowWidth=Bm.getArrowHeight=function(f,c){var d=this.arrowWidthCache=this.arrowWidthCache||{},m=d[f+", "+c];return m||(m=Math.max(Math.pow(13.37*f,.9),29)*c,d[f+", "+c]=m,m)};var Ul={};function zm(f){var c=[];if(null!=f){for(var d=0;d<f.length;d+=2)c.push({x:f[d],y:f[d+1]});return c}}Ul.findHaystackPoints=function(f){for(var c=0;c<f.length;c++){var d=f[c],m=d._private,_=m.rscratch;if(!_.haystack){var C=2*Math.random()*Math.PI;_.source={x:Math.cos(C),y:Math.sin(C)},C=2*Math.random()*Math.PI,_.target={x:Math.cos(C),y:Math.sin(C)}}var A=m.source,E=m.target,B=A.position(),P=E.position(),q=A.width(),Q=E.width(),fe=A.height(),me=E.height(),Pe=d.pstyle("haystack-radius").value/2;_.haystackPts=_.allpts=[_.source.x*q*Pe+B.x,_.source.y*fe*Pe+B.y,_.target.x*Q*Pe+P.x,_.target.y*me*Pe+P.y],_.midX=(_.allpts[0]+_.allpts[2])/2,_.midY=(_.allpts[1]+_.allpts[3])/2,_.edgeType="haystack",_.haystack=!0,this.storeEdgeProjections(d),this.calculateArrowAngles(d),this.recalculateEdgeLabelProjections(d),this.calculateLabelAngles(d)}},Ul.findSegmentsPoints=function(f,c){var d=f._private.rscratch,m=c.posPts,_=c.intersectionPts,C=c.vectorNormInverse,A=f.pstyle("edge-distances").value,E=f.pstyle("segment-weights"),B=f.pstyle("segment-distances"),P=Math.min(E.pfValue.length,B.pfValue.length);d.edgeType="segments",d.segpts=[];for(var q=0;q<P;q++){var Q=E.pfValue[q],fe=B.pfValue[q],me=1-Q,Pe="node-position"===A?m:_,$e={x:Pe.x1*me+Pe.x2*Q,y:Pe.y1*me+Pe.y2*Q};d.segpts.push($e.x+C.x*fe,$e.y+C.y*fe)}},Ul.findLoopPoints=function(f,c,d,m){var _=f._private.rscratch,C=c.dirCounts,A=c.srcPos,E=f.pstyle("control-point-distances"),B=E?E.pfValue[0]:void 0,P=f.pstyle("loop-direction").pfValue,q=f.pstyle("loop-sweep").pfValue,Q=f.pstyle("control-point-step-size").pfValue;_.edgeType="self";var fe=d,me=Q;m&&(fe=0,me=B);var _e=P-Math.PI/2,Pe=_e-q/2,$e=_e+q/2,Ke=String(P+"_"+q);fe=void 0===C[Ke]?C[Ke]=0:++C[Ke],_.ctrlpts=[A.x+1.4*Math.cos(Pe)*me*(fe/3+1),A.y+1.4*Math.sin(Pe)*me*(fe/3+1),A.x+1.4*Math.cos($e)*me*(fe/3+1),A.y+1.4*Math.sin($e)*me*(fe/3+1)]},Ul.findCompoundLoopPoints=function(f,c,d,m){var _=f._private.rscratch;_.edgeType="compound";var C=c.srcPos,A=c.tgtPos,E=c.srcW,B=c.srcH,P=c.tgtW,q=c.tgtH,Q=f.pstyle("control-point-step-size").pfValue,fe=f.pstyle("control-point-distances"),_e=d,Pe=Q;m&&(_e=0,Pe=fe?fe.pfValue[0]:void 0);var Ke={x:C.x-E/2,y:C.y-B/2},ht={x:A.x-P/2,y:A.y-q/2},rt={x:Math.min(Ke.x,ht.x),y:Math.min(Ke.y,ht.y)},Gt=Math.max(.5,Math.log(.01*E)),Wt=Math.max(.5,Math.log(.01*P));_.ctrlpts=[rt.x,rt.y-(1+Math.pow(50,1.12)/100)*Pe*(_e/3+1)*Gt,rt.x-(1+Math.pow(50,1.12)/100)*Pe*(_e/3+1)*Wt,rt.y]},Ul.findStraightEdgePoints=function(f){f._private.rscratch.edgeType="straight"},Ul.findBezierPoints=function(f,c,d,m,_){var C=f._private.rscratch,A=c.vectorNormInverse,E=c.posPts,B=c.intersectionPts,P=f.pstyle("edge-distances").value,q=f.pstyle("control-point-step-size").pfValue,Q=f.pstyle("control-point-distances"),fe=f.pstyle("control-point-weights"),me=Q&&fe?Math.min(Q.value.length,fe.value.length):1,_e=Q?Q.pfValue[0]:void 0,Pe=fe.value[0],$e=m;C.edgeType=$e?"multibezier":"bezier",C.ctrlpts=[];for(var Ke=0;Ke<me;Ke++){var rt,ht=(.5-c.eles.length/2+d)*q*(_?-1:1),St=Tc(ht);$e&&(_e=Q?Q.pfValue[Ke]:q,Pe=fe.value[Ke]);var Gt=void 0!==(rt=m?_e:void 0!==_e?St*_e:void 0)?rt:ht,Wt=1-Pe,jt="node-position"===P?E:B,Pt={x:jt.x1*Wt+jt.x2*Pe,y:jt.y1*Wt+jt.y2*Pe};C.ctrlpts.push(Pt.x+A.x*Gt,Pt.y+A.y*Gt)}},Ul.findTaxiPoints=function(f,c){var d=f._private.rscratch;d.edgeType="segments";var m="vertical",_="horizontal",C="leftward",A="rightward",E="downward",B="upward",q=c.posPts,Q=c.srcW,fe=c.srcH,me=c.tgtW,_e=c.tgtH,$e="node-position"!==f.pstyle("edge-distances").value,Ke=f.pstyle("taxi-direction").value,ht=Ke,rt=f.pstyle("taxi-turn"),St="%"===rt.units,Gt=rt.pfValue,Wt=Gt<0,Tt=f.pstyle("taxi-turn-min-distance").pfValue,Pt=$e?(fe+_e)/2:0,Zt=q.x2-q.x1,Kt=q.y2-q.y1,dt=function(An,ir){return An>0?Math.max(An-ir,0):Math.min(An+ir,0)},Qt=dt(Zt,$e?(Q+me)/2:0),Ht=dt(Kt,Pt),xn=!1;"auto"===ht?Ke=Math.abs(Qt)>Math.abs(Ht)?_:m:ht===B||ht===E?(Ke=m,xn=!0):(ht===C||ht===A)&&(Ke=_,xn=!0);var Rn,sn=Ke===m,vn=sn?Ht:Qt,Ln=sn?Kt:Zt,Fn=Tc(Ln),ri=!1;(!xn||!St&&!Wt)&&(ht===E&&Ln<0||ht===B&&Ln>0||ht===C&&Ln>0||ht===A&&Ln<0)&&(vn=(Fn*=-1)*Math.abs(vn),ri=!0);var Ii=function(An){return Math.abs(An)<Tt||Math.abs(An)>=Math.abs(vn)},vi=Ii(Rn=St?(Gt<0?1+Gt:Gt)*vn:(Gt<0?vn:0)+Gt*Fn),pi=Ii(Math.abs(vn)-Math.abs(Rn));if(!vi&&!pi||ri)if(sn){var zt=q.y1+Rn+($e?fe/2*Fn:0);d.segpts=[q.x1,zt,q.x2,zt]}else{var Ze=q.x1+Rn+($e?Q/2*Fn:0);d.segpts=[Ze,q.y1,Ze,q.y2]}else if(sn){var li=Math.abs(Ln)<=fe/2,Ei=Math.abs(Zt)<=me/2;if(li){var Qi=(q.x1+q.x2)/2;d.segpts=[Qi,q.y1,Qi,q.y2]}else if(Ei){var Jr=(q.y1+q.y2)/2;d.segpts=[q.x1,Jr,q.x2,Jr]}else d.segpts=[q.x1,q.y2]}else{var Zr=Math.abs(Ln)<=Q/2,ki=Math.abs(Kt)<=_e/2;if(Zr){var br=(q.y1+q.y2)/2;d.segpts=[q.x1,br,q.x2,br]}else if(ki){var zs=(q.x1+q.x2)/2;d.segpts=[zs,q.y1,zs,q.y2]}else d.segpts=[q.x2,q.y1]}},Ul.tryToCorrectInvalidPoints=function(f,c){var d=f._private.rscratch;if("bezier"===d.edgeType){var m=c.srcPos,_=c.tgtPos,C=c.srcW,A=c.srcH,E=c.tgtW,B=c.tgtH,P=c.srcShape,q=c.tgtShape,Q=!Be(d.startX)||!Be(d.startY),fe=!Be(d.arrowStartX)||!Be(d.arrowStartY),me=!Be(d.endX)||!Be(d.endY),_e=!Be(d.arrowEndX)||!Be(d.arrowEndY),Ke=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,ht=so({x:d.ctrlpts[0],y:d.ctrlpts[1]},{x:d.startX,y:d.startY}),rt=ht<Ke,St=so({x:d.ctrlpts[0],y:d.ctrlpts[1]},{x:d.endX,y:d.endY}),Gt=St<Ke,Wt=!1;if(Q||fe||rt){Wt=!0;var Tt={x:d.ctrlpts[0]-m.x,y:d.ctrlpts[1]-m.y},jt=Math.sqrt(Tt.x*Tt.x+Tt.y*Tt.y),Pt={x:Tt.x/jt,y:Tt.y/jt},Zt=Math.max(C,A),Kt={x:d.ctrlpts[0]+2*Pt.x*Zt,y:d.ctrlpts[1]+2*Pt.y*Zt},dt=P.intersectLine(m.x,m.y,C,A,Kt.x,Kt.y,0);rt?(d.ctrlpts[0]=d.ctrlpts[0]+Pt.x*(Ke-ht),d.ctrlpts[1]=d.ctrlpts[1]+Pt.y*(Ke-ht)):(d.ctrlpts[0]=dt[0]+Pt.x*Ke,d.ctrlpts[1]=dt[1]+Pt.y*Ke)}if(me||_e||Gt){Wt=!0;var Qt={x:d.ctrlpts[0]-_.x,y:d.ctrlpts[1]-_.y},Ht=Math.sqrt(Qt.x*Qt.x+Qt.y*Qt.y),xn={x:Qt.x/Ht,y:Qt.y/Ht},sn=Math.max(C,A),vn={x:d.ctrlpts[0]+2*xn.x*sn,y:d.ctrlpts[1]+2*xn.y*sn},Ln=q.intersectLine(_.x,_.y,E,B,vn.x,vn.y,0);Gt?(d.ctrlpts[0]=d.ctrlpts[0]+xn.x*(Ke-St),d.ctrlpts[1]=d.ctrlpts[1]+xn.y*(Ke-St)):(d.ctrlpts[0]=Ln[0]+xn.x*Ke,d.ctrlpts[1]=Ln[1]+xn.y*Ke)}Wt&&this.findEndpoints(f)}},Ul.storeAllpts=function(f){var c=f._private.rscratch;if("multibezier"===c.edgeType||"bezier"===c.edgeType||"self"===c.edgeType||"compound"===c.edgeType){c.allpts=[],c.allpts.push(c.startX,c.startY);for(var d=0;d+1<c.ctrlpts.length;d+=2)c.allpts.push(c.ctrlpts[d],c.ctrlpts[d+1]),d+3<c.ctrlpts.length&&c.allpts.push((c.ctrlpts[d]+c.ctrlpts[d+2])/2,(c.ctrlpts[d+1]+c.ctrlpts[d+3])/2);var m;c.allpts.push(c.endX,c.endY),c.ctrlpts.length/2%2==0?(c.midX=c.allpts[m=c.allpts.length/2-1],c.midY=c.allpts[m+1]):(c.midX=hc(c.allpts[m=c.allpts.length/2-3],c.allpts[m+2],c.allpts[m+4],.5),c.midY=hc(c.allpts[m+1],c.allpts[m+3],c.allpts[m+5],.5))}else if("straight"===c.edgeType)c.allpts=[c.startX,c.startY,c.endX,c.endY],c.midX=(c.startX+c.endX+c.arrowStartX+c.arrowEndX)/4,c.midY=(c.startY+c.endY+c.arrowStartY+c.arrowEndY)/4;else if("segments"===c.edgeType)if(c.allpts=[],c.allpts.push(c.startX,c.startY),c.allpts.push.apply(c.allpts,c.segpts),c.allpts.push(c.endX,c.endY),c.segpts.length%4==0){var C=c.segpts.length/2,A=C-2;c.midX=(c.segpts[A]+c.segpts[C])/2,c.midY=(c.segpts[A+1]+c.segpts[C+1])/2}else{var E=c.segpts.length/2-1;c.midX=c.segpts[E],c.midY=c.segpts[E+1]}},Ul.checkForInvalidEdgeWarning=function(f){var c=f[0]._private.rscratch;c.nodesOverlap||Be(c.startX)&&Be(c.startY)&&Be(c.endX)&&Be(c.endY)?c.loggedErr=!1:c.loggedErr||(c.loggedErr=!0,ge("Edge `"+f.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Ul.findEdgeControlPoints=function(f){var c=this;if(f&&0!==f.length){for(var d=this,_=d.cy.hasCompoundNodes(),C={map:new Eo,get:function(Tt){var jt=this.map.get(Tt[0]);return null!=jt?jt.get(Tt[1]):null},set:function(Tt,jt){var Pt=this.map.get(Tt[0]);null==Pt&&(Pt=new Eo,this.map.set(Tt[0],Pt)),Pt.set(Tt[1],jt)}},A=[],E=[],B=0;B<f.length;B++){var P=f[B],q=P._private,Q=P.pstyle("curve-style").value;if(!P.removed()&&P.takesUpSpace()){if("haystack"===Q){E.push(P);continue}var fe="unbundled-bezier"===Q||"segments"===Q||"straight"===Q||"straight-triangle"===Q||"taxi"===Q,me="unbundled-bezier"===Q||"bezier"===Q,Pe=q.target,ht=[q.source.poolIndex(),Pe.poolIndex()].sort(),rt=C.get(ht);null==rt&&(C.set(ht,rt={eles:[]}),A.push(ht)),rt.eles.push(P),fe&&(rt.hasUnbundled=!0),me&&(rt.hasBezier=!0)}}for(var St=function(Tt){var Pt=C.get(A[Tt]),Zt=void 0;if(!Pt.hasUnbundled){var Kt=Pt.eles[0].parallelEdges().filter(function($i){return $i.isBundledBezier()});yr(Pt.eles),Kt.forEach(function($i){return Pt.eles.push($i)}),Pt.eles.sort(function($i,zt){return $i.poolIndex()-zt.poolIndex()})}var dt=Pt.eles[0],Qt=dt.source(),Ht=dt.target();if(Qt.poolIndex()>Ht.poolIndex()){var xn=Qt;Qt=Ht,Ht=xn}var sn=Pt.srcPos=Qt.position(),vn=Pt.tgtPos=Ht.position(),Ln=Pt.srcW=Qt.outerWidth(),Fn=Pt.srcH=Qt.outerHeight(),ri=Pt.tgtW=Ht.outerWidth(),Rn=Pt.tgtH=Ht.outerHeight(),ei=Pt.srcShape=d.nodeShapes[c.getNodeShape(Qt)],di=Pt.tgtShape=d.nodeShapes[c.getNodeShape(Ht)];Pt.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Ii=0;Ii<Pt.eles.length;Ii++){var vi=Pt.eles[Ii],pi=vi[0]._private.rscratch,kn=vi.pstyle("curve-style").value,li="unbundled-bezier"===kn||"segments"===kn||"taxi"===kn,Ei=!Qt.same(vi.source());if(!Pt.calculatedIntersection&&Qt!==Ht&&(Pt.hasBezier||Pt.hasUnbundled)){Pt.calculatedIntersection=!0;var Qi=ei.intersectLine(sn.x,sn.y,Ln,Fn,vn.x,vn.y,0),lr=Pt.srcIntn=Qi,Wr=di.intersectLine(vn.x,vn.y,ri,Rn,sn.x,sn.y,0),Jr=Pt.tgtIntn=Wr,mr=Pt.intersectionPts={x1:Qi[0],x2:Wr[0],y1:Qi[1],y2:Wr[1]},or=Pt.posPts={x1:sn.x,x2:vn.x,y1:sn.y,y2:vn.y},Zr=Wr[1]-Qi[1],ki=Wr[0]-Qi[0],br=Math.sqrt(ki*ki+Zr*Zr),wr=Pt.vector={x:ki,y:Zr},es=Pt.vectorNorm={x:wr.x/br,y:wr.y/br},zs={x:-es.y,y:es.x};Pt.nodesOverlap=!Be(br)||di.checkPoint(Qi[0],Qi[1],0,ri,Rn,vn.x,vn.y)||ei.checkPoint(Wr[0],Wr[1],0,Ln,Fn,sn.x,sn.y),Pt.vectorNormInverse=zs,Zt={nodesOverlap:Pt.nodesOverlap,dirCounts:Pt.dirCounts,calculatedIntersection:!0,hasBezier:Pt.hasBezier,hasUnbundled:Pt.hasUnbundled,eles:Pt.eles,srcPos:vn,tgtPos:sn,srcW:ri,srcH:Rn,tgtW:Ln,tgtH:Fn,srcIntn:Jr,tgtIntn:lr,srcShape:di,tgtShape:ei,posPts:{x1:or.x2,y1:or.y2,x2:or.x1,y2:or.y1},intersectionPts:{x1:mr.x2,y1:mr.y2,x2:mr.x1,y2:mr.y1},vector:{x:-wr.x,y:-wr.y},vectorNorm:{x:-es.x,y:-es.y},vectorNormInverse:{x:-zs.x,y:-zs.y}}}var ts=Ei?Zt:Pt;pi.nodesOverlap=ts.nodesOverlap,pi.srcIntn=ts.srcIntn,pi.tgtIntn=ts.tgtIntn,_&&(Qt.isParent()||Qt.isChild()||Ht.isParent()||Ht.isChild())&&(Qt.parents().anySame(Ht)||Ht.parents().anySame(Qt)||Qt.same(Ht)&&Qt.isParent())?c.findCompoundLoopPoints(vi,ts,Ii,li):Qt===Ht?c.findLoopPoints(vi,ts,Ii,li):"segments"===kn?c.findSegmentsPoints(vi,ts):"taxi"===kn?c.findTaxiPoints(vi,ts):"straight"===kn||!li&&Pt.eles.length%2==1&&Ii===Math.floor(Pt.eles.length/2)?c.findStraightEdgePoints(vi):c.findBezierPoints(vi,ts,Ii,li,Ei),c.findEndpoints(vi),c.tryToCorrectInvalidPoints(vi,ts),c.checkForInvalidEdgeWarning(vi),c.storeAllpts(vi),c.storeEdgeProjections(vi),c.calculateArrowAngles(vi),c.recalculateEdgeLabelProjections(vi),c.calculateLabelAngles(vi)}},Gt=0;Gt<A.length;Gt++)St(Gt);this.findHaystackPoints(E)}},Ul.getSegmentPoints=function(f){var c=f[0]._private.rscratch;if("segments"===c.edgeType)return this.recalculateRenderedStyle(f),zm(c.segpts)},Ul.getControlPoints=function(f){var c=f[0]._private.rscratch,d=c.edgeType;if("bezier"===d||"multibezier"===d||"self"===d||"compound"===d)return this.recalculateRenderedStyle(f),zm(c.ctrlpts)},Ul.getEdgeMidpoint=function(f){var c=f[0]._private.rscratch;return this.recalculateRenderedStyle(f),{x:c.midX,y:c.midY}};var yh={manualEndptToPx:function(f,c){var m=f.position(),_=f.outerWidth(),C=f.outerHeight();if(2===c.value.length){var A=[c.pfValue[0],c.pfValue[1]];return"%"===c.units[0]&&(A[0]=A[0]*_),"%"===c.units[1]&&(A[1]=A[1]*C),A[0]+=m.x,A[1]+=m.y,A}var E=c.pfValue[0];E=-Math.PI/2+E;var B=2*Math.max(_,C),P=[m.x+Math.cos(E)*B,m.y+Math.sin(E)*B];return this.nodeShapes[this.getNodeShape(f)].intersectLine(m.x,m.y,_,C,P[0],P[1],0)},findEndpoints:function(f){var d,Zt,Kt,dt,Qt,c=this,m=f.source()[0],_=f.target()[0],C=m.position(),A=_.position(),E=f.pstyle("target-arrow-shape").value,B=f.pstyle("source-arrow-shape").value,P=f.pstyle("target-distance-from-node").pfValue,q=f.pstyle("source-distance-from-node").pfValue,Q=f.pstyle("curve-style").value,fe=f._private.rscratch,me=fe.edgeType,Pe="self"===me||"compound"===me,$e="bezier"===me||"multibezier"===me||Pe,Ke="bezier"!==me,ht="straight"===me||"segments"===me,rt="segments"===me,St=$e||Ke||ht,Gt=Pe||"taxi"===Q,Wt=f.pstyle("source-endpoint"),Tt=Gt?"outside-to-node":Wt.value,jt=f.pstyle("target-endpoint"),Pt=Gt?"outside-to-node":jt.value;if(fe.srcManEndpt=Wt,fe.tgtManEndpt=jt,$e){var Ht=[fe.ctrlpts[0],fe.ctrlpts[1]];Zt=Ke?[fe.ctrlpts[fe.ctrlpts.length-2],fe.ctrlpts[fe.ctrlpts.length-1]]:Ht,Kt=Ht}else if(ht){var sn=rt?fe.segpts.slice(0,2):[A.x,A.y];Zt=rt?fe.segpts.slice(fe.segpts.length-2):[C.x,C.y],Kt=sn}if("inside-to-node"===Pt)d=[A.x,A.y];else if(jt.units)d=this.manualEndptToPx(_,jt);else if("outside-to-line"===Pt)d=fe.tgtIntn;else if("outside-to-node"===Pt||"outside-to-node-or-label"===Pt?dt=Zt:("outside-to-line"===Pt||"outside-to-line-or-label"===Pt)&&(dt=[C.x,C.y]),d=c.nodeShapes[this.getNodeShape(_)].intersectLine(A.x,A.y,_.outerWidth(),_.outerHeight(),dt[0],dt[1],0),"outside-to-node-or-label"===Pt||"outside-to-line-or-label"===Pt){var Ln=_._private.rscratch,Rn=Ln.labelX,ei=Ln.labelY,di=Ln.labelWidth/2,Ii=Ln.labelHeight/2,vi=_.pstyle("text-valign").value;"top"===vi?ei-=Ii:"bottom"===vi&&(ei+=Ii);var pi=_.pstyle("text-halign").value;"left"===pi?Rn-=di:"right"===pi&&(Rn+=di);var kn=hu(dt[0],dt[1],[Rn-di,ei-Ii,Rn+di,ei-Ii,Rn+di,ei+Ii,Rn-di,ei+Ii],A.x,A.y);if(kn.length>0){var li=C,Ei=Mh(li,sd(d)),Qi=Mh(li,sd(kn)),lr=Ei;Qi<Ei&&(d=kn,lr=Qi),kn.length>2&&Mh(li,{x:kn[2],y:kn[3]})<lr&&(d=[kn[2],kn[3]])}}var Jr=Yf(d,Zt,c.arrowShapes[E].spacing(f)+P),mr=Yf(d,Zt,c.arrowShapes[E].gap(f)+P);if(fe.endX=mr[0],fe.endY=mr[1],fe.arrowEndX=Jr[0],fe.arrowEndY=Jr[1],"inside-to-node"===Tt)d=[C.x,C.y];else if(Wt.units)d=this.manualEndptToPx(m,Wt);else if("outside-to-line"===Tt)d=fe.srcIntn;else if("outside-to-node"===Tt||"outside-to-node-or-label"===Tt?Qt=Kt:("outside-to-line"===Tt||"outside-to-line-or-label"===Tt)&&(Qt=[A.x,A.y]),d=c.nodeShapes[this.getNodeShape(m)].intersectLine(C.x,C.y,m.outerWidth(),m.outerHeight(),Qt[0],Qt[1],0),"outside-to-node-or-label"===Tt||"outside-to-line-or-label"===Tt){var or=m._private.rscratch,br=or.labelX,wr=or.labelY,es=or.labelWidth/2,zs=or.labelHeight/2,ts=m.pstyle("text-valign").value;"top"===ts?wr-=zs:"bottom"===ts&&(wr+=zs);var $i=m.pstyle("text-halign").value;"left"===$i?br-=es:"right"===$i&&(br+=es);var zt=hu(Qt[0],Qt[1],[br-es,wr-zs,br+es,wr-zs,br+es,wr+zs,br-es,wr+zs],C.x,C.y);if(zt.length>0){var Qn=A,Ri=Mh(Qn,sd(d)),Ze=Mh(Qn,sd(zt)),Ct=Ri;Ze<Ri&&(d=[zt[0],zt[1]],Ct=Ze),zt.length>2&&Mh(Qn,{x:zt[2],y:zt[3]})<Ct&&(d=[zt[2],zt[3]])}}var Cn=Yf(d,Kt,c.arrowShapes[B].spacing(f)+q),An=Yf(d,Kt,c.arrowShapes[B].gap(f)+q);fe.startX=An[0],fe.startY=An[1],fe.arrowStartX=Cn[0],fe.arrowStartY=Cn[1],St&&(fe.badLine=!(Be(fe.startX)&&Be(fe.startY)&&Be(fe.endX)&&Be(fe.endY)))},getSourceEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[0],y:c.haystackPts[1]}:{x:c.arrowStartX,y:c.arrowStartY}},getTargetEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[2],y:c.haystackPts[3]}:{x:c.arrowEndX,y:c.arrowEndY}}},ng={};function Vm(f,c,d){for(var m=function(P,q,Q,fe){return hc(P,q,Q,fe)},C=c._private.rstyle.bezierPts,A=0;A<f.bezierProjPcts.length;A++){var E=f.bezierProjPcts[A];C.push({x:m(d[0],d[2],d[4],E),y:m(d[1],d[3],d[5],E)})}}ng.storeEdgeProjections=function(f){var c=f._private,d=c.rscratch,m=d.edgeType;if(c.rstyle.bezierPts=null,c.rstyle.linePts=null,c.rstyle.haystackPts=null,"multibezier"===m||"bezier"===m||"self"===m||"compound"===m){c.rstyle.bezierPts=[];for(var _=0;_+5<d.allpts.length;_+=4)Vm(this,f,d.allpts.slice(_,_+6))}else if("segments"===m){var C=c.rstyle.linePts=[];for(_=0;_+1<d.allpts.length;_+=2)C.push({x:d.allpts[_],y:d.allpts[_+1]})}else if("haystack"===m){var A=d.haystackPts;c.rstyle.haystackPts=[{x:A[0],y:A[1]},{x:A[2],y:A[3]}]}c.rstyle.arrowWidth=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth},ng.recalculateEdgeProjections=function(f){this.findEdgeControlPoints(f)};var Nc={recalculateNodeLabelProjection:function(f){var c=f.pstyle("label").strValue;if(!ce(c)){var d,m,_=f._private,C=f.width(),A=f.height(),E=f.padding(),B=f.position(),P=f.pstyle("text-halign").strValue,q=f.pstyle("text-valign").strValue,Q=_.rscratch,fe=_.rstyle;switch(P){case"left":d=B.x-C/2-E;break;case"right":d=B.x+C/2+E;break;default:d=B.x}switch(q){case"top":m=B.y-A/2-E;break;case"bottom":m=B.y+A/2+E;break;default:m=B.y}Q.labelX=d,Q.labelY=m,fe.labelX=d,fe.labelY=m,this.calculateLabelAngles(f),this.applyLabelDimensions(f)}}},Fa=function(c,d){var m=Math.atan(d/c);return 0===c&&m<0&&(m*=-1),m},vc=function(c,d){return Fa(d.x-c.x,d.y-c.y)};Nc.recalculateEdgeLabelProjections=function(f){var c,d=f._private,m=d.rscratch,_=this,C={mid:f.pstyle("label").strValue,source:f.pstyle("source-label").strValue,target:f.pstyle("target-label").strValue};if(C.mid||C.source||C.target){var A=function(Q,fe,me){Ws(d.rscratch,Q,fe,me),Ws(d.rstyle,Q,fe,me)};A("labelX",null,(c={x:m.midX,y:m.midY}).x),A("labelY",null,c.y);var E=Fa(m.midDispX,m.midDispY);A("labelAutoAngle",null,E);var B=function q(){if(q.cache)return q.cache;for(var Q=[],fe=0;fe+5<m.allpts.length;fe+=4)Q.push({p0:{x:m.allpts[fe],y:m.allpts[fe+1]},p1:{x:m.allpts[fe+2],y:m.allpts[fe+3]},p2:{x:m.allpts[fe+4],y:m.allpts[fe+5]},startDist:0,length:0,segments:[]});var $e=d.rstyle.bezierPts,Ke=_.bezierProjPcts.length;function ht(Tt,jt,Pt,Zt,Kt){var dt=so(jt,Pt),Qt=Tt.segments[Tt.segments.length-1];Tt.segments.push({p0:jt,p1:Pt,t0:Zt,t1:Kt,startDist:Qt?Qt.startDist+Qt.length:0,length:dt}),Tt.length+=dt}for(var rt=0;rt<Q.length;rt++){var St=Q[rt],Gt=Q[rt-1];Gt&&(St.startDist=Gt.startDist+Gt.length),ht(St,St.p0,$e[rt*Ke],0,_.bezierProjPcts[0]);for(var Wt=0;Wt<Ke-1;Wt++)ht(St,$e[rt*Ke+Wt],$e[rt*Ke+Wt+1],_.bezierProjPcts[Wt],_.bezierProjPcts[Wt+1]);ht(St,$e[rt*Ke+Ke-1],St.p2,_.bezierProjPcts[Ke-1],1)}return q.cache=Q},P=function(Q){var fe,me="source"===Q;if(C[Q]){var _e=f.pstyle(Q+"-text-offset").pfValue;switch(m.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var $e,Pe=B(),Ke=0,ht=0,rt=0;rt<Pe.length;rt++){for(var St=Pe[me?rt:Pe.length-1-rt],Gt=0;Gt<St.segments.length;Gt++){var Wt=St.segments[me?Gt:St.segments.length-1-Gt];if(Ke=ht,(ht+=Wt.length)>=_e||rt===Pe.length-1&&Gt===St.segments.length-1){$e={cp:St,segment:Wt};break}}if($e)break}var jt=$e.cp,Pt=$e.segment,Zt=(_e-Ke)/Pt.length,Kt=Pt.t1-Pt.t0,dt=me?Pt.t0+Kt*Zt:Pt.t1-Kt*Zt;dt=Sr(0,dt,1),c=Zi(jt.p0,jt.p1,jt.p2,dt),fe=function(c,d,m,_){var C=Sr(0,_-.001,1),A=Sr(0,_+.001,1),E=Zi(c,d,m,C),B=Zi(c,d,m,A);return vc(E,B)}(jt.p0,jt.p1,jt.p2,dt);break;case"straight":case"segments":case"haystack":for(var Ht,xn,sn,vn,Qt=0,Ln=m.allpts.length,Fn=0;Fn+3<Ln&&(me?(sn={x:m.allpts[Fn],y:m.allpts[Fn+1]},vn={x:m.allpts[Fn+2],y:m.allpts[Fn+3]}):(sn={x:m.allpts[Ln-2-Fn],y:m.allpts[Ln-1-Fn]},vn={x:m.allpts[Ln-4-Fn],y:m.allpts[Ln-3-Fn]}),xn=Qt,!((Qt+=Ht=so(sn,vn))>=_e));Fn+=2);var Rn=(_e-xn)/Ht;Rn=Sr(0,Rn,1),c=function(c,d,m,_){var C_x=d.x-c.x,C_y=d.y-c.y,A=so(c,d);return m=m??0,{x:c.x+C_x/A*(_=_??m*A),y:c.y+C_y/A*_}}(sn,vn,Rn),fe=vc(sn,vn)}A("labelX",Q,c.x),A("labelY",Q,c.y),A("labelAutoAngle",Q,fe)}};P("source"),P("target"),this.applyLabelDimensions(f)}},Nc.applyLabelDimensions=function(f){this.applyPrefixedLabelDimensions(f),f.isEdge()&&(this.applyPrefixedLabelDimensions(f,"source"),this.applyPrefixedLabelDimensions(f,"target"))},Nc.applyPrefixedLabelDimensions=function(f,c){var d=f._private,m=this.getLabelText(f,c),_=this.calculateLabelDimensions(f,m),C=f.pstyle("line-height").pfValue,A=f.pstyle("text-wrap").strValue,E=ur(d.rscratch,"labelWrapCachedLines",c)||[],B="wrap"!==A?1:Math.max(E.length,1),P=_.height/B,q=P*C,Q=_.width,fe=_.height+(B-1)*(C-1)*P;Ws(d.rstyle,"labelWidth",c,Q),Ws(d.rscratch,"labelWidth",c,Q),Ws(d.rstyle,"labelHeight",c,fe),Ws(d.rscratch,"labelHeight",c,fe),Ws(d.rscratch,"labelLineHeight",c,q)},Nc.getLabelText=function(f,c){var d=f._private,_=f.pstyle((c?c+"-":"")+"label").strValue,C=f.pstyle("text-transform").value,A=function(ri,Rn){return Rn?(Ws(d.rscratch,ri,c,Rn),Rn):ur(d.rscratch,ri,c)};if(!_)return"";"none"==C||("uppercase"==C?_=_.toUpperCase():"lowercase"==C&&(_=_.toLowerCase()));var E=f.pstyle("text-wrap").value;if("wrap"===E){var B=A("labelKey");if(null!=B&&A("labelWrapKey")===B)return A("labelWrapCachedText");for(var q=_.split("\n"),Q=f.pstyle("text-max-width").pfValue,me="anywhere"===f.pstyle("text-overflow-wrap").value,_e=[],Pe=/[\s\u200b]+/,$e=me?"":" ",Ke=0;Ke<q.length;Ke++){var ht=q[Ke],St=this.calculateLabelDimensions(f,ht).width;if(me){var Gt=ht.split("").join("\u200b");ht=Gt}if(St>Q){for(var Wt=ht.split(Pe),Tt="",jt=0;jt<Wt.length;jt++){var Pt=Wt[jt];this.calculateLabelDimensions(f,0===Tt.length?Pt:Tt+$e+Pt).width<=Q?Tt+=Pt+$e:(Tt&&_e.push(Tt),Tt=Pt+$e)}Tt.match(/^[\s\u200b]+$/)||_e.push(Tt)}else _e.push(ht)}A("labelWrapCachedLines",_e),_=A("labelWrapCachedText",_e.join("\n")),A("labelWrapKey",B)}else if("ellipsis"===E){var Qt=f.pstyle("text-max-width").pfValue,Ht="",sn=!1;if(this.calculateLabelDimensions(f,_).width<Qt)return _;for(var vn=0;vn<_.length&&!(this.calculateLabelDimensions(f,Ht+_[vn]+"\u2026").width>Qt);vn++)Ht+=_[vn],vn===_.length-1&&(sn=!0);return sn||(Ht+="\u2026"),Ht}return _},Nc.getLabelJustification=function(f){var c=f.pstyle("text-justification").strValue,d=f.pstyle("text-halign").strValue;if("auto"!==c)return c;if(!f.isNode())return"center";switch(d){case"left":return"right";case"right":return"left";default:return"center"}},Nc.calculateLabelDimensions=function(f,c){var m=Ic(c,f._private.labelDimsKey),_=this.labelDimCache||(this.labelDimCache=[]),C=_[m];if(null!=C)return C;var E=f.pstyle("font-style").strValue,B=f.pstyle("font-size").pfValue,P=f.pstyle("font-family").strValue,q=f.pstyle("font-weight").strValue,Q=this.labelCalcCanvas,fe=this.labelCalcCanvasContext;if(!Q){Q=this.labelCalcCanvas=document.createElement("canvas"),fe=this.labelCalcCanvasContext=Q.getContext("2d");var me=Q.style;me.position="absolute",me.left="-9999px",me.top="-9999px",me.zIndex="-1",me.visibility="hidden",me.pointerEvents="none"}fe.font="".concat(E," ").concat(q," ").concat(B,"px ").concat(P);for(var _e=0,Pe=0,$e=c.split("\n"),Ke=0;Ke<$e.length;Ke++){var rt=fe.measureText($e[Ke]),St=Math.ceil(rt.width),Gt=B;_e=Math.max(St,_e),Pe+=Gt}return _[m]={width:_e+=0,height:Pe+=0}},Nc.calculateLabelAngle=function(f,c){var m=f._private.rscratch,_=f.isEdge(),A=f.pstyle((c?c+"-":"")+"text-rotation"),E=A.strValue;return"none"===E?0:_&&"autorotate"===E?m.labelAutoAngle:"autorotate"===E?0:A.pfValue},Nc.calculateLabelAngles=function(f){var c=this,d=f.isEdge(),_=f._private.rscratch;_.labelAngle=c.calculateLabelAngle(f),d&&(_.sourceLabelAngle=c.calculateLabelAngle(f,"source"),_.targetLabelAngle=c.calculateLabelAngle(f,"target"))};var ig={},qu=!1;ig.getNodeShape=function(f){var d=f.pstyle("shape").value;if("cutrectangle"===d&&(f.width()<28||f.height()<28))return qu||(ge("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),qu=!0),"rectangle";if(f.isParent())return"rectangle"===d||"roundrectangle"===d||"round-rectangle"===d||"cutrectangle"===d||"cut-rectangle"===d||"barrel"===d?d:"rectangle";if("polygon"===d){var m=f.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(m).name}return d};var md={updateCachedGrabbedEles:function(){var f=this.cachedZSortedEles;if(f){f.drag=[],f.nondrag=[];for(var c=[],d=0;d<f.length;d++){var _=(m=f[d])._private.rscratch;m.grabbed()&&!m.isParent()?c.push(m):_.inDragLayer?f.drag.push(m):f.nondrag.push(m)}for(d=0;d<c.length;d++){var m;f.drag.push(m=c[d])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(f){if(f||!this.cachedZSortedEles){var c=this.cy.mutableElements().toArray();c.sort(cp),c.interactive=c.filter(function(d){return d.interactive()}),this.cachedZSortedEles=c,this.updateCachedGrabbedEles()}else c=this.cachedZSortedEles;return c}},_h={};[Oa,Bm,Ul,yh,ng,Nc,ig,{registerCalculationListeners:function(){var f=this.cy,c=f.collection(),d=this,m=function(A){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(c.merge(A),E)for(var B=0;B<A.length;B++){var P=A[B],q=P._private,Q=q.rstyle;Q.clean=!1,Q.cleanConnected=!1}};d.binder(f).on("bounds.* dirty.*",function(A){m(A.target)}).on("style.* background.*",function(A){m(A.target,!1)});var _=function(A){if(A){var E=d.onUpdateEleCalcsFns;c.cleanStyle();for(var B=0;B<c.length;B++){var P=c[B],q=P._private.rstyle;P.isNode()&&!q.cleanConnected&&(m(P.connectedEdges()),q.cleanConnected=!0)}if(E)for(var Q=0;Q<E.length;Q++)(0,E[Q])(A,c);d.recalculateRenderedStyle(c),c=f.collection()}};d.flushRenderedStyleQueue=function(){_(!0)},d.beforeRender(_,d.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(f){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(f)},recalculateRenderedStyle:function(f,c){var d=function(St){return St._private.rstyle.cleanConnected},m=[],_=[];if(!this.destroyed){void 0===c&&(c=!0);for(var C=0;C<f.length;C++){var A=f[C],E=A._private,B=E.rstyle;A.isEdge()&&(!d(A.source())||!d(A.target()))&&(B.clean=!1),!(c&&B.clean||A.removed())&&"none"!==A.pstyle("display").value&&("nodes"===E.group?_.push(A):m.push(A),B.clean=!0)}for(var P=0;P<_.length;P++){var q=_[P],fe=q._private.rstyle,me=q.position();this.recalculateNodeLabelProjection(q),fe.nodeX=me.x,fe.nodeY=me.y,fe.nodeW=q.pstyle("width").pfValue,fe.nodeH=q.pstyle("height").pfValue}this.recalculateEdgeProjections(m);for(var _e=0;_e<m.length;_e++){var $e=m[_e]._private,Ke=$e.rstyle,ht=$e.rscratch;Ke.srcX=ht.arrowStartX,Ke.srcY=ht.arrowStartY,Ke.tgtX=ht.arrowEndX,Ke.tgtY=ht.arrowEndY,Ke.midX=ht.midX,Ke.midY=ht.midY,Ke.labelAngle=ht.labelAngle,Ke.sourceLabelAngle=ht.sourceLabelAngle,Ke.targetLabelAngle=ht.targetLabelAngle}}}},md].forEach(function(f){tr(_h,f)});var Jd={getCachedImage:function(f,c,d){var _=this.imageCache=this.imageCache||{},C=_[f];if(C)return C.image.complete||C.image.addEventListener("load",d),C.image;var A=(C=_[f]=_[f]||{}).image=new Image;A.addEventListener("load",d),A.addEventListener("error",function(){A.error=!0});var E="data:";return f.substring(0,E.length).toLowerCase()===E||(A.crossOrigin=c),A.src=f,A}},ru={registerBinding:function(f,c,d,m){var _=Array.prototype.slice.apply(arguments,[1]),C=this.binder(f);return C.on.apply(C,_)},binder:function(f){var c=this,d=f===window||f===document||f===document.body||function(c){return!(typeof HTMLElement>"u")&&c instanceof HTMLElement}(f);if(null==c.supportsPassiveEvents){var m=!1;try{var _=Object.defineProperty({},"passive",{get:function(){return m=!0,!0}});window.addEventListener("test",null,_)}catch{}c.supportsPassiveEvents=m}var C=function(E,B,P){var q=Array.prototype.slice.call(arguments);return d&&c.supportsPassiveEvents&&(q[2]={capture:P??!1,passive:!1,once:!1}),c.bindings.push({target:f,args:q}),(f.addEventListener||f.on).apply(f,q),this};return{on:C,addEventListener:C,addListener:C,bind:C}},nodeIsDraggable:function(f){return f&&f.isNode()&&!f.locked()&&f.grabbable()},nodeIsGrabbable:function(f){return this.nodeIsDraggable(f)&&f.interactive()}};ru.load=function(){var f=this,c=function(zt){return zt.selected()},d=function(zt,Qn,Ri,Ze){null==zt&&(zt=f.cy);for(var Ct=0;Ct<Qn.length;Ct++)zt.emit({originalEvent:Ri,type:Qn[Ct],position:Ze})},m=function(zt){return zt.shiftKey||zt.metaKey||zt.ctrlKey},_=function(zt,Qn){var Ri=!0;if(f.cy.hasCompoundNodes()&&zt&&zt.pannable()){for(var Ze=0;Qn&&Ze<Qn.length;Ze++)if((zt=Qn[Ze]).isNode()&&zt.isParent()&&!zt.pannable()){Ri=!1;break}}else Ri=!0;return Ri},E=function(zt){zt[0]._private.rscratch.inDragLayer=!0},P=function(zt){zt[0]._private.rscratch.isGrabTarget=!0},Q=function(zt,Qn){var Ri=Qn.addToList;!Ri.has(zt)&&zt.grabbable()&&!zt.locked()&&(Ri.merge(zt),function(zt){zt[0]._private.grabbed=!0}(zt))},me=function(zt,Qn){Qn=Qn||{};var Ri=zt.cy().hasCompoundNodes();Qn.inDragLayer&&(zt.forEach(E),zt.neighborhood().stdFilter(function(Ze){return!Ri||Ze.isEdge()}).forEach(E)),Qn.addToList&&zt.forEach(function(Ze){Q(Ze,Qn)}),function(zt,Qn){if(zt.cy().hasCompoundNodes()&&(null!=Qn.inDragLayer||null!=Qn.addToList)){var Ri=zt.descendants();Qn.inDragLayer&&(Ri.forEach(E),Ri.connectedEdges().forEach(E)),Qn.addToList&&Q(Ri,Qn)}}(zt,Qn),$e(zt,{inDragLayer:Qn.inDragLayer}),f.updateCachedGrabbedEles()},_e=me,Pe=function(zt){!zt||(f.getCachedZSortedEles().forEach(function(Qn){(function(zt){zt[0]._private.grabbed=!1})(Qn),function(zt){zt[0]._private.rscratch.inDragLayer=!1}(Qn),function(zt){zt[0]._private.rscratch.isGrabTarget=!1}(Qn)}),f.updateCachedGrabbedEles())},$e=function(zt,Qn){if((null!=Qn.inDragLayer||null!=Qn.addToList)&&zt.cy().hasCompoundNodes()){var Ri=zt.ancestors().orphans();if(!Ri.same(zt)){var Ze=Ri.descendants().spawnSelf().merge(Ri).unmerge(zt).unmerge(zt.descendants()),Ct=Ze.connectedEdges();Qn.inDragLayer&&(Ct.forEach(E),Ze.forEach(E)),Qn.addToList&&Ze.forEach(function(gn){Q(gn,Qn)})}}},Ke=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},ht=typeof MutationObserver<"u",rt=typeof ResizeObserver<"u";ht?(f.removeObserver=new MutationObserver(function($i){for(var zt=0;zt<$i.length;zt++){var Ri=$i[zt].removedNodes;if(Ri)for(var Ze=0;Ze<Ri.length;Ze++)if(Ri[Ze]===f.container){f.destroy();break}}}),f.container.parentNode&&f.removeObserver.observe(f.container.parentNode,{childList:!0})):f.registerBinding(f.container,"DOMNodeRemoved",function($i){f.destroy()});var St=R.default(function(){f.cy.resize()},100);ht&&(f.styleObserver=new MutationObserver(St),f.styleObserver.observe(f.container,{attributes:!0})),f.registerBinding(window,"resize",St),rt&&(f.resizeObserver=new ResizeObserver(St),f.resizeObserver.observe(f.container));var Wt=function(){f.invalidateContainerClientCoordsCache()};(function(zt,Qn){for(;null!=zt;)f.registerBinding($i=zt,"transitionend",Wt),f.registerBinding($i,"animationend",Wt),f.registerBinding($i,"scroll",Wt),zt=zt.parentNode;var $i})(f.container),f.registerBinding(f.container,"contextmenu",function($i){$i.preventDefault()});var Pt,Zt,Kt,jt=function(zt){for(var Qn=f.findContainerClientCoords(),Ri=Qn[0],Ze=Qn[1],Ct=Qn[2],gn=Qn[3],Cn=zt.touches?zt.touches:[zt],An=!1,ir=0;ir<Cn.length;ir++){var cr=Cn[ir];if(Ri<=cr.clientX&&cr.clientX<=Ri+Ct&&Ze<=cr.clientY&&cr.clientY<=Ze+gn){An=!0;break}}if(!An)return!1;for(var ai=f.container,Vi=zt.target.parentNode,Ui=!1;Vi;){if(Vi===ai){Ui=!0;break}Vi=Vi.parentNode}return!!Ui};f.registerBinding(f.container,"mousedown",function(zt){if(jt(zt)){zt.preventDefault(),Ke(),f.hoverData.capture=!0,f.hoverData.which=zt.which;var Qn=f.cy,Ri=[zt.clientX,zt.clientY],Ze=f.projectIntoViewport(Ri[0],Ri[1]),Ct=f.selection,gn=f.findNearestElements(Ze[0],Ze[1],!0,!1),Cn=gn[0],An=f.dragData.possibleDragElements;if(f.hoverData.mdownPos=Ze,f.hoverData.mdownGPos=Ri,3==zt.which){f.hoverData.cxtStarted=!0;var cr={originalEvent:zt,type:"cxttapstart",position:{x:Ze[0],y:Ze[1]}};Cn?(Cn.activate(),Cn.emit(cr),f.hoverData.down=Cn):Qn.emit(cr),f.hoverData.downTime=(new Date).getTime(),f.hoverData.cxtDragged=!1}else if(1==zt.which){if(Cn&&Cn.activate(),null!=Cn&&f.nodeIsGrabbable(Cn)){var ai=function(nr){return{originalEvent:zt,type:nr,position:{x:Ze[0],y:Ze[1]}}};if(P(Cn),Cn.selected()){An=f.dragData.possibleDragElements=Qn.collection();var Vi=Qn.$(function(Ui){return Ui.isNode()&&Ui.selected()&&f.nodeIsGrabbable(Ui)});me(Vi,{addToList:An}),Cn.emit(ai("grabon")),Vi.forEach(function(nr){nr.emit(ai("grab"))})}else An=f.dragData.possibleDragElements=Qn.collection(),_e(Cn,{addToList:An}),Cn.emit(ai("grabon")).emit(ai("grab"));f.redrawHint("eles",!0),f.redrawHint("drag",!0)}f.hoverData.down=Cn,f.hoverData.downs=gn,f.hoverData.downTime=(new Date).getTime(),d(Cn,["mousedown","tapstart","vmousedown"],zt,{x:Ze[0],y:Ze[1]}),null==Cn?(Ct[4]=1,f.data.bgActivePosistion={x:Ze[0],y:Ze[1]},f.redrawHint("select",!0),f.redraw()):Cn.pannable()&&(Ct[4]=1),f.hoverData.tapholdCancelled=!1,clearTimeout(f.hoverData.tapholdTimeout),f.hoverData.tapholdTimeout=setTimeout(function(){if(!f.hoverData.tapholdCancelled){var nr=f.hoverData.down;nr?nr.emit({originalEvent:zt,type:"taphold",position:{x:Ze[0],y:Ze[1]}}):Qn.emit({originalEvent:zt,type:"taphold",position:{x:Ze[0],y:Ze[1]}})}},f.tapholdDuration)}Ct[0]=Ct[2]=Ze[0],Ct[1]=Ct[3]=Ze[1]}},!1),f.registerBinding(window,"mousemove",function(zt){var Hc;if(f.hoverData.capture||jt(zt)){var Ri=!1,Ze=f.cy,Ct=Ze.zoom(),gn=[zt.clientX,zt.clientY],Cn=f.projectIntoViewport(gn[0],gn[1]),An=f.hoverData.mdownPos,ir=f.hoverData.mdownGPos,cr=f.selection,ai=null;!f.hoverData.draggingEles&&!f.hoverData.dragging&&!f.hoverData.selecting&&(ai=f.findNearestElement(Cn[0],Cn[1],!0,!1));var to,Vr=f.hoverData.last,Vi=f.hoverData.down,Ui=[Cn[0]-cr[2],Cn[1]-cr[3]],nr=f.dragData.possibleDragElements;if(ir){var fo=gn[0]-ir[0],qo=gn[1]-ir[1];f.hoverData.isOverThresholdDrag=to=fo*fo+qo*qo>=f.desktopTapThreshold2}var Er=m(zt);to&&(f.hoverData.tapholdCancelled=!0),Ri=!0,d(ai,["mousemove","vmousemove","tapdrag"],zt,{x:Cn[0],y:Cn[1]});var Hl=function(){f.data.bgActivePosistion=void 0,f.hoverData.selecting||Ze.emit({originalEvent:zt,type:"boxstart",position:{x:Cn[0],y:Cn[1]}}),cr[4]=1,f.hoverData.selecting=!0,f.redrawHint("select",!0),f.redraw()};if(3===f.hoverData.which){if(to){var Gl={originalEvent:zt,type:"cxtdrag",position:{x:Cn[0],y:Cn[1]}};Vi?Vi.emit(Gl):Ze.emit(Gl),f.hoverData.cxtDragged=!0,(!f.hoverData.cxtOver||ai!==f.hoverData.cxtOver)&&(f.hoverData.cxtOver&&f.hoverData.cxtOver.emit({originalEvent:zt,type:"cxtdragout",position:{x:Cn[0],y:Cn[1]}}),f.hoverData.cxtOver=ai,ai&&ai.emit({originalEvent:zt,type:"cxtdragover",position:{x:Cn[0],y:Cn[1]}}))}}else if(f.hoverData.dragging){if(Ri=!0,Ze.panningEnabled()&&Ze.userPanningEnabled()){var zc;if(f.hoverData.justStartedPan){var Cp=f.hoverData.mdownPos;zc={x:(Cn[0]-Cp[0])*Ct,y:(Cn[1]-Cp[1])*Ct},f.hoverData.justStartedPan=!1}else zc={x:Ui[0]*Ct,y:Ui[1]*Ct};Ze.panBy(zc),Ze.emit("dragpan"),f.hoverData.dragged=!0}Cn=f.projectIntoViewport(zt.clientX,zt.clientY)}else if(1!=cr[4]||null!=Vi&&!Vi.pannable()){if(Vi&&Vi.pannable()&&Vi.active()&&Vi.unactivate(),(!Vi||!Vi.grabbed())&&ai!=Vr&&(Vr&&d(Vr,["mouseout","tapdragout"],zt,{x:Cn[0],y:Cn[1]}),ai&&d(ai,["mouseover","tapdragover"],zt,{x:Cn[0],y:Cn[1]}),f.hoverData.last=ai),Vi)if(to){if(Ze.boxSelectionEnabled()&&Er)Vi&&Vi.grabbed()&&(Pe(nr),Vi.emit("freeon"),nr.emit("free"),f.dragData.didDrag&&(Vi.emit("dragfreeon"),nr.emit("dragfree"))),Hl();else if(Vi&&Vi.grabbed()&&f.nodeIsDraggable(Vi)){var Vc=!f.dragData.didDrag;Vc&&f.redrawHint("eles",!0),f.dragData.didDrag=!0,f.hoverData.draggingEles||me(nr,{inDragLayer:!0});var ic={x:0,y:0};if(Be(Ui[0])&&Be(Ui[1])&&(ic.x+=Ui[0],ic.y+=Ui[1],Vc)){var Uc=f.hoverData.dragDelta;Uc&&Be(Uc[0])&&Be(Uc[1])&&(ic.x+=Uc[0],ic.y+=Uc[1])}f.hoverData.draggingEles=!0,nr.silentShift(ic).emit("position drag"),f.redrawHint("drag",!0),f.redraw()}}else 0===(Hc=f.hoverData.dragDelta=f.hoverData.dragDelta||[]).length?(Hc.push(Ui[0]),Hc.push(Ui[1])):(Hc[0]+=Ui[0],Hc[1]+=Ui[1]);Ri=!0}else to&&(f.hoverData.dragging||!Ze.boxSelectionEnabled()||!Er&&Ze.panningEnabled()&&Ze.userPanningEnabled()?!f.hoverData.selecting&&Ze.panningEnabled()&&Ze.userPanningEnabled()&&_(Vi,f.hoverData.downs)&&(f.hoverData.dragging=!0,f.hoverData.justStartedPan=!0,cr[4]=0,f.data.bgActivePosistion=sd(An),f.redrawHint("select",!0),f.redraw()):Hl(),Vi&&Vi.pannable()&&Vi.active()&&Vi.unactivate());if(cr[2]=Cn[0],cr[3]=Cn[1],Ri)return zt.stopPropagation&&zt.stopPropagation(),zt.preventDefault&&zt.preventDefault(),!1}},!1),f.registerBinding(window,"mouseup",function(zt){if(f.hoverData.capture){f.hoverData.capture=!1;var Ri=f.cy,Ze=f.projectIntoViewport(zt.clientX,zt.clientY),Ct=f.selection,gn=f.findNearestElement(Ze[0],Ze[1],!0,!1),Cn=f.dragData.possibleDragElements,An=f.hoverData.down,ir=m(zt);if(f.data.bgActivePosistion&&(f.redrawHint("select",!0),f.redraw()),f.hoverData.tapholdCancelled=!0,f.data.bgActivePosistion=void 0,An&&An.unactivate(),3===f.hoverData.which){var cr={originalEvent:zt,type:"cxttapend",position:{x:Ze[0],y:Ze[1]}};if(An?An.emit(cr):Ri.emit(cr),!f.hoverData.cxtDragged){var ai={originalEvent:zt,type:"cxttap",position:{x:Ze[0],y:Ze[1]}};An?An.emit(ai):Ri.emit(ai)}f.hoverData.cxtDragged=!1,f.hoverData.which=null}else if(1===f.hoverData.which){if(d(gn,["mouseup","tapend","vmouseup"],zt,{x:Ze[0],y:Ze[1]}),!f.dragData.didDrag&&!f.hoverData.dragged&&!f.hoverData.selecting&&!f.hoverData.isOverThresholdDrag&&(d(An,["click","tap","vclick"],zt,{x:Ze[0],y:Ze[1]}),Zt=!1,zt.timeStamp-Kt<=Ri.multiClickDebounceTime()?(Pt&&clearTimeout(Pt),Zt=!0,Kt=null,d(An,["dblclick","dbltap","vdblclick"],zt,{x:Ze[0],y:Ze[1]})):(Pt=setTimeout(function(){Zt||d(An,["oneclick","onetap","voneclick"],zt,{x:Ze[0],y:Ze[1]})},Ri.multiClickDebounceTime()),Kt=zt.timeStamp)),null==An&&!f.dragData.didDrag&&!f.hoverData.selecting&&!f.hoverData.dragged&&!m(zt)&&(Ri.$(c).unselect(["tapunselect"]),Cn.length>0&&f.redrawHint("eles",!0),f.dragData.possibleDragElements=Cn=Ri.collection()),gn==An&&!f.dragData.didDrag&&!f.hoverData.selecting&&null!=gn&&gn._private.selectable&&(f.hoverData.dragging||("additive"===Ri.selectionType()||ir?gn.selected()?gn.unselect(["tapunselect"]):gn.select(["tapselect"]):ir||(Ri.$(c).unmerge(gn).unselect(["tapunselect"]),gn.select(["tapselect"]))),f.redrawHint("eles",!0)),f.hoverData.selecting){var Vr=Ri.collection(f.getAllInBox(Ct[0],Ct[1],Ct[2],Ct[3]));f.redrawHint("select",!0),Vr.length>0&&f.redrawHint("eles",!0),Ri.emit({type:"boxend",originalEvent:zt,position:{x:Ze[0],y:Ze[1]}}),"additive"===Ri.selectionType()||ir||Ri.$(c).unmerge(Vr).unselect(),Vr.emit("box").stdFilter(function(to){return to.selectable()&&!to.selected()}).select().emit("boxselect"),f.redraw()}if(f.hoverData.dragging&&(f.hoverData.dragging=!1,f.redrawHint("select",!0),f.redrawHint("eles",!0),f.redraw()),!Ct[4]){f.redrawHint("drag",!0),f.redrawHint("eles",!0);var Ui=An&&An.grabbed();Pe(Cn),Ui&&(An.emit("freeon"),Cn.emit("free"),f.dragData.didDrag&&(An.emit("dragfreeon"),Cn.emit("dragfree")))}}Ct[4]=0,f.hoverData.down=null,f.hoverData.cxtStarted=!1,f.hoverData.draggingEles=!1,f.hoverData.selecting=!1,f.hoverData.isOverThresholdDrag=!1,f.dragData.didDrag=!1,f.hoverData.dragged=!1,f.hoverData.dragDelta=[],f.hoverData.mdownPos=null,f.hoverData.mdownGPos=null}},!1);var dt=function(zt){if(!f.scrollingPage){var Qn=f.cy,Ri=Qn.zoom(),Ze=Qn.pan(),Ct=f.projectIntoViewport(zt.clientX,zt.clientY),gn=[Ct[0]*Ri+Ze.x,Ct[1]*Ri+Ze.y];if(f.hoverData.draggingEles||f.hoverData.dragging||f.hoverData.cxtStarted||0!==f.selection[4])return void zt.preventDefault();if(Qn.panningEnabled()&&Qn.userPanningEnabled()&&Qn.zoomingEnabled()&&Qn.userZoomingEnabled()){var Cn;zt.preventDefault(),f.data.wheelZooming=!0,clearTimeout(f.data.wheelTimeout),f.data.wheelTimeout=setTimeout(function(){f.data.wheelZooming=!1,f.redrawHint("eles",!0),f.redraw()},150),Cn=null!=zt.deltaY?zt.deltaY/-250:null!=zt.wheelDeltaY?zt.wheelDeltaY/1e3:zt.wheelDelta/1e3,Cn*=f.wheelSensitivity,1===zt.deltaMode&&(Cn*=33);var ir=Qn.zoom()*Math.pow(10,Cn);"gesturechange"===zt.type&&(ir=f.gestureStartZoom*zt.scale),Qn.zoom({level:ir,renderedPosition:{x:gn[0],y:gn[1]}}),Qn.emit("gesturechange"===zt.type?"pinchzoom":"scrollzoom")}}};f.registerBinding(f.container,"wheel",dt,!0),f.registerBinding(window,"scroll",function(zt){f.scrollingPage=!0,clearTimeout(f.scrollingPageTimeout),f.scrollingPageTimeout=setTimeout(function(){f.scrollingPage=!1},250)},!0),f.registerBinding(f.container,"gesturestart",function(zt){f.gestureStartZoom=f.cy.zoom(),f.hasTouchStarted||zt.preventDefault()},!0),f.registerBinding(f.container,"gesturechange",function($i){f.hasTouchStarted||dt($i)},!0),f.registerBinding(f.container,"mouseout",function(zt){var Qn=f.projectIntoViewport(zt.clientX,zt.clientY);f.cy.emit({originalEvent:zt,type:"mouseout",position:{x:Qn[0],y:Qn[1]}})},!1),f.registerBinding(f.container,"mouseover",function(zt){var Qn=f.projectIntoViewport(zt.clientX,zt.clientY);f.cy.emit({originalEvent:zt,type:"mouseover",position:{x:Qn[0],y:Qn[1]}})},!1);var Qt,Ht,xn,sn,vn,Ln,Fn,ri,Rn,ei,di,Ii,vi,li,Ei,Qi,lr,Wr,Jr,mr,pi=function(zt,Qn,Ri,Ze){return Math.sqrt((Ri-zt)*(Ri-zt)+(Ze-Qn)*(Ze-Qn))},kn=function(zt,Qn,Ri,Ze){return(Ri-zt)*(Ri-zt)+(Ze-Qn)*(Ze-Qn)};if(f.registerBinding(f.container,"touchstart",li=function(zt){if(f.hasTouchStarted=!0,jt(zt)){Ke(),f.touchData.capture=!0,f.data.bgActivePosistion=void 0;var Qn=f.cy,Ri=f.touchData.now,Ze=f.touchData.earlier;if(zt.touches[0]){var Ct=f.projectIntoViewport(zt.touches[0].clientX,zt.touches[0].clientY);Ri[0]=Ct[0],Ri[1]=Ct[1]}if(zt.touches[1]&&(Ct=f.projectIntoViewport(zt.touches[1].clientX,zt.touches[1].clientY),Ri[2]=Ct[0],Ri[3]=Ct[1]),zt.touches[2]&&(Ct=f.projectIntoViewport(zt.touches[2].clientX,zt.touches[2].clientY),Ri[4]=Ct[0],Ri[5]=Ct[1]),zt.touches[1]){f.touchData.singleTouchMoved=!0,Pe(f.dragData.touchDragEles);var gn=f.findContainerClientCoords();di=gn[2],Ii=gn[3],Ht=zt.touches[0].clientY-(ei=gn[1]),xn=zt.touches[1].clientX-(Rn=gn[0]),sn=zt.touches[1].clientY-ei,vi=0<=(Qt=zt.touches[0].clientX-Rn)&&Qt<=di&&0<=xn&&xn<=di&&0<=Ht&&Ht<=Ii&&0<=sn&&sn<=Ii;var Cn=Qn.pan(),An=Qn.zoom();if(vn=pi(Qt,Ht,xn,sn),Ln=kn(Qt,Ht,xn,sn),ri=[((Fn=[(Qt+xn)/2,(Ht+sn)/2])[0]-Cn.x)/An,(Fn[1]-Cn.y)/An],Ln<4e4&&!zt.touches[2]){var ai=f.findNearestElement(Ri[0],Ri[1],!0,!0),Vr=f.findNearestElement(Ri[2],Ri[3],!0,!0);return ai&&ai.isNode()?(ai.activate().emit({originalEvent:zt,type:"cxttapstart",position:{x:Ri[0],y:Ri[1]}}),f.touchData.start=ai):Vr&&Vr.isNode()?(Vr.activate().emit({originalEvent:zt,type:"cxttapstart",position:{x:Ri[0],y:Ri[1]}}),f.touchData.start=Vr):Qn.emit({originalEvent:zt,type:"cxttapstart",position:{x:Ri[0],y:Ri[1]}}),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!0,f.touchData.cxtDragged=!1,f.data.bgActivePosistion=void 0,void f.redraw()}}if(zt.touches[2])Qn.boxSelectionEnabled()&&zt.preventDefault();else if(!zt.touches[1]&&zt.touches[0]){var Vi=f.findNearestElements(Ri[0],Ri[1],!0,!0),Ui=Vi[0];if(null!=Ui&&(Ui.activate(),f.touchData.start=Ui,f.touchData.starts=Vi,f.nodeIsGrabbable(Ui))){var nr=f.dragData.touchDragEles=Qn.collection(),to=null;f.redrawHint("eles",!0),f.redrawHint("drag",!0),Ui.selected()?(to=Qn.$(function(Jo){return Jo.selected()&&f.nodeIsGrabbable(Jo)}),me(to,{addToList:nr})):_e(Ui,{addToList:nr}),P(Ui);var fo=function(Er){return{originalEvent:zt,type:Er,position:{x:Ri[0],y:Ri[1]}}};Ui.emit(fo("grabon")),to?to.forEach(function(Jo){Jo.emit(fo("grab"))}):Ui.emit(fo("grab"))}d(Ui,["touchstart","tapstart","vmousedown"],zt,{x:Ri[0],y:Ri[1]}),null==Ui&&(f.data.bgActivePosistion={x:Ct[0],y:Ct[1]},f.redrawHint("select",!0),f.redraw()),f.touchData.singleTouchMoved=!1,f.touchData.singleTouchStartTime=+new Date,clearTimeout(f.touchData.tapholdTimeout),f.touchData.tapholdTimeout=setTimeout(function(){!1===f.touchData.singleTouchMoved&&!f.pinching&&!f.touchData.selecting&&d(f.touchData.start,["taphold"],zt,{x:Ri[0],y:Ri[1]})},f.tapholdDuration)}if(zt.touches.length>=1){for(var Na=f.touchData.startPosition=[],qo=0;qo<Ri.length;qo++)Na[qo]=Ze[qo]=Ri[qo];var Lo=zt.touches[0];f.touchData.startGPosition=[Lo.clientX,Lo.clientY]}}},!1),f.registerBinding(window,"touchmove",Ei=function(zt){var Qn=f.touchData.capture;if(Qn||jt(zt)){var Ri=f.selection,Ze=f.cy,Ct=f.touchData.now,gn=f.touchData.earlier,Cn=Ze.zoom();if(zt.touches[0]){var An=f.projectIntoViewport(zt.touches[0].clientX,zt.touches[0].clientY);Ct[0]=An[0],Ct[1]=An[1]}zt.touches[1]&&(An=f.projectIntoViewport(zt.touches[1].clientX,zt.touches[1].clientY),Ct[2]=An[0],Ct[3]=An[1]),zt.touches[2]&&(An=f.projectIntoViewport(zt.touches[2].clientX,zt.touches[2].clientY),Ct[4]=An[0],Ct[5]=An[1]);var cr,ir=f.touchData.startGPosition;if(Qn&&zt.touches[0]&&ir){for(var ai=[],Vr=0;Vr<Ct.length;Vr++)ai[Vr]=Ct[Vr]-gn[Vr];var Vi=zt.touches[0].clientX-ir[0],nr=zt.touches[0].clientY-ir[1];cr=Vi*Vi+nr*nr>=f.touchTapThreshold2}if(Qn&&f.touchData.cxt){zt.preventDefault();var Er=kn(Na=zt.touches[0].clientX-Rn,qo=zt.touches[0].clientY-ei,Lo=zt.touches[1].clientX-Rn,Jo=zt.touches[1].clientY-ei);if(Er/Ln>=2.25||Er>=22500){f.touchData.cxt=!1,f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var Nf={originalEvent:zt,type:"cxttapend",position:{x:Ct[0],y:Ct[1]}};f.touchData.start?(f.touchData.start.unactivate().emit(Nf),f.touchData.start=null):Ze.emit(Nf)}}if(Qn&&f.touchData.cxt){Nf={originalEvent:zt,type:"cxtdrag",position:{x:Ct[0],y:Ct[1]}},f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.touchData.start?f.touchData.start.emit(Nf):Ze.emit(Nf),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxtDragged=!0;var Vc=f.findNearestElement(Ct[0],Ct[1],!0,!0);(!f.touchData.cxtOver||Vc!==f.touchData.cxtOver)&&(f.touchData.cxtOver&&f.touchData.cxtOver.emit({originalEvent:zt,type:"cxtdragout",position:{x:Ct[0],y:Ct[1]}}),f.touchData.cxtOver=Vc,Vc&&Vc.emit({originalEvent:zt,type:"cxtdragover",position:{x:Ct[0],y:Ct[1]}}))}else if(Qn&&zt.touches[2]&&Ze.boxSelectionEnabled())zt.preventDefault(),f.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,f.touchData.selecting||Ze.emit({originalEvent:zt,type:"boxstart",position:{x:Ct[0],y:Ct[1]}}),f.touchData.selecting=!0,f.touchData.didSelect=!0,Ri[4]=1,Ri&&0!==Ri.length&&void 0!==Ri[0]?(Ri[2]=(Ct[0]+Ct[2]+Ct[4])/3,Ri[3]=(Ct[1]+Ct[3]+Ct[5])/3):(Ri[0]=(Ct[0]+Ct[2]+Ct[4])/3,Ri[1]=(Ct[1]+Ct[3]+Ct[5])/3,Ri[2]=(Ct[0]+Ct[2]+Ct[4])/3+1,Ri[3]=(Ct[1]+Ct[3]+Ct[5])/3+1),f.redrawHint("select",!0),f.redraw();else if(Qn&&zt.touches[1]&&!f.touchData.didSelect&&Ze.zoomingEnabled()&&Ze.panningEnabled()&&Ze.userZoomingEnabled()&&Ze.userPanningEnabled()){if(zt.preventDefault(),f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),ic=f.dragData.touchDragEles){f.redrawHint("drag",!0);for(var Uc=0;Uc<ic.length;Uc++){var wp=ic[Uc]._private;wp.grabbed=!1,wp.rscratch.inDragLayer=!1}}var Na,qo,Lo,Jo,Hc=f.touchData.start,Qs=pi(Na=zt.touches[0].clientX-Rn,qo=zt.touches[0].clientY-ei,Lo=zt.touches[1].clientX-Rn,Jo=zt.touches[1].clientY-ei),_b=Qs/vn;if(vi){var t0=(Na-Qt+(Lo-xn))/2,bb=(qo-Ht+(Jo-sn))/2,cg=Ze.zoom(),Zy=cg*_b,Hv=Ze.pan(),ug=ri[0]*cg+Hv.x,n0=ri[1]*cg+Hv.y,Cb={x:-Zy/cg*(ug-Hv.x-t0)+ug,y:-Zy/cg*(n0-Hv.y-bb)+n0};Hc&&Hc.active()&&(Pe(ic=f.dragData.touchDragEles),f.redrawHint("drag",!0),f.redrawHint("eles",!0),Hc.unactivate().emit("freeon"),ic.emit("free"),f.dragData.didDrag&&(Hc.emit("dragfreeon"),ic.emit("dragfree"))),Ze.viewport({zoom:Zy,pan:Cb,cancelOnFailedZoom:!0}),Ze.emit("pinchzoom"),vn=Qs,Qt=Na,Ht=qo,xn=Lo,sn=Jo,f.pinching=!0}zt.touches[0]&&(An=f.projectIntoViewport(zt.touches[0].clientX,zt.touches[0].clientY),Ct[0]=An[0],Ct[1]=An[1]),zt.touches[1]&&(An=f.projectIntoViewport(zt.touches[1].clientX,zt.touches[1].clientY),Ct[2]=An[0],Ct[3]=An[1]),zt.touches[2]&&(An=f.projectIntoViewport(zt.touches[2].clientX,zt.touches[2].clientY),Ct[4]=An[0],Ct[5]=An[1])}else if(zt.touches[0]&&!f.touchData.didSelect){var nf=f.touchData.start,wb=f.touchData.last;if(!f.hoverData.draggingEles&&!f.swipePanning&&(Vc=f.findNearestElement(Ct[0],Ct[1],!0,!0)),Qn&&null!=nf&&zt.preventDefault(),Qn&&null!=nf&&f.nodeIsDraggable(nf))if(cr){var ic=f.dragData.touchDragEles,Gv=!f.dragData.didDrag;Gv&&me(ic,{inDragLayer:!0}),f.dragData.didDrag=!0;var Wv={x:0,y:0};Be(ai[0])&&Be(ai[1])&&(Wv.x+=ai[0],Wv.y+=ai[1],Gv)&&(f.redrawHint("eles",!0),(Cd=f.touchData.dragDelta)&&Be(Cd[0])&&Be(Cd[1])&&(Wv.x+=Cd[0],Wv.y+=Cd[1])),f.hoverData.draggingEles=!0,ic.silentShift(Wv).emit("position drag"),f.redrawHint("drag",!0),f.touchData.startPosition[0]==gn[0]&&f.touchData.startPosition[1]==gn[1]&&f.redrawHint("eles",!0),f.redraw()}else{var Cd;0===(Cd=f.touchData.dragDelta=f.touchData.dragDelta||[]).length?(Cd.push(ai[0]),Cd.push(ai[1])):(Cd[0]+=ai[0],Cd[1]+=ai[1])}if(d(nf||Vc,["touchmove","tapdrag","vmousemove"],zt,{x:Ct[0],y:Ct[1]}),(!nf||!nf.grabbed())&&Vc!=wb&&(wb&&wb.emit({originalEvent:zt,type:"tapdragout",position:{x:Ct[0],y:Ct[1]}}),Vc&&Vc.emit({originalEvent:zt,type:"tapdragover",position:{x:Ct[0],y:Ct[1]}})),f.touchData.last=Vc,Qn)for(Uc=0;Uc<Ct.length;Uc++)Ct[Uc]&&f.touchData.startPosition[Uc]&&cr&&(f.touchData.singleTouchMoved=!0);Qn&&(null==nf||nf.pannable())&&Ze.panningEnabled()&&Ze.userPanningEnabled()&&(_(nf,f.touchData.starts)&&(zt.preventDefault(),f.data.bgActivePosistion||(f.data.bgActivePosistion=sd(f.touchData.startPosition)),f.swipePanning?(Ze.panBy({x:ai[0]*Cn,y:ai[1]*Cn}),Ze.emit("dragpan")):cr&&(f.swipePanning=!0,Ze.panBy({x:Vi*Cn,y:nr*Cn}),Ze.emit("dragpan"),nf&&(nf.unactivate(),f.redrawHint("select",!0),f.touchData.start=null))),An=f.projectIntoViewport(zt.touches[0].clientX,zt.touches[0].clientY),Ct[0]=An[0],Ct[1]=An[1])}for(Vr=0;Vr<Ct.length;Vr++)gn[Vr]=Ct[Vr];Qn&&zt.touches.length>0&&!f.hoverData.draggingEles&&!f.swipePanning&&null!=f.data.bgActivePosistion&&(f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.redraw())}},!1),f.registerBinding(window,"touchcancel",Qi=function(zt){var Qn=f.touchData.start;f.touchData.capture=!1,Qn&&Qn.unactivate()}),f.registerBinding(window,"touchend",lr=function(zt){var Qn=f.touchData.start;if(f.touchData.capture){0===zt.touches.length&&(f.touchData.capture=!1),zt.preventDefault();var Ze=f.selection;f.swipePanning=!1,f.hoverData.draggingEles=!1;var cr,Ct=f.cy,gn=Ct.zoom(),Cn=f.touchData.now,An=f.touchData.earlier;if(zt.touches[0]){var ir=f.projectIntoViewport(zt.touches[0].clientX,zt.touches[0].clientY);Cn[0]=ir[0],Cn[1]=ir[1]}if(zt.touches[1]&&(ir=f.projectIntoViewport(zt.touches[1].clientX,zt.touches[1].clientY),Cn[2]=ir[0],Cn[3]=ir[1]),zt.touches[2]&&(ir=f.projectIntoViewport(zt.touches[2].clientX,zt.touches[2].clientY),Cn[4]=ir[0],Cn[5]=ir[1]),Qn&&Qn.unactivate(),f.touchData.cxt){if(cr={originalEvent:zt,type:"cxttapend",position:{x:Cn[0],y:Cn[1]}},Qn?Qn.emit(cr):Ct.emit(cr),!f.touchData.cxtDragged){var ai={originalEvent:zt,type:"cxttap",position:{x:Cn[0],y:Cn[1]}};Qn?Qn.emit(ai):Ct.emit(ai)}return f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!1,f.touchData.start=null,void f.redraw()}if(!zt.touches[2]&&Ct.boxSelectionEnabled()&&f.touchData.selecting){f.touchData.selecting=!1;var Vr=Ct.collection(f.getAllInBox(Ze[0],Ze[1],Ze[2],Ze[3]));Ze[0]=void 0,Ze[1]=void 0,Ze[2]=void 0,Ze[3]=void 0,Ze[4]=0,f.redrawHint("select",!0),Ct.emit({type:"boxend",originalEvent:zt,position:{x:Cn[0],y:Cn[1]}}),Vr.emit("box").stdFilter(function(Gl){return Gl.selectable()&&!Gl.selected()}).select().emit("boxselect"),Vr.nonempty()&&f.redrawHint("eles",!0),f.redraw()}if(Qn?.unactivate(),zt.touches[2])f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);else if(!zt.touches[1]&&!zt.touches[0]&&!zt.touches[0]){f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var Ui=f.dragData.touchDragEles;if(null!=Qn){var nr=Qn._private.grabbed;Pe(Ui),f.redrawHint("drag",!0),f.redrawHint("eles",!0),nr&&(Qn.emit("freeon"),Ui.emit("free"),f.dragData.didDrag&&(Qn.emit("dragfreeon"),Ui.emit("dragfree"))),d(Qn,["touchend","tapend","vmouseup","tapdragout"],zt,{x:Cn[0],y:Cn[1]}),Qn.unactivate(),f.touchData.start=null}else{var to=f.findNearestElement(Cn[0],Cn[1],!0,!0);d(to,["touchend","tapend","vmouseup","tapdragout"],zt,{x:Cn[0],y:Cn[1]})}var fo=f.touchData.startPosition[0]-Cn[0],qo=f.touchData.startPosition[1]-Cn[1],Er=(fo*fo+qo*qo)*gn*gn;f.touchData.singleTouchMoved||(Qn||Ct.$(":selected").unselect(["tapunselect"]),d(Qn,["tap","vclick"],zt,{x:Cn[0],y:Cn[1]}),Wr=!1,zt.timeStamp-mr<=Ct.multiClickDebounceTime()?(Jr&&clearTimeout(Jr),Wr=!0,mr=null,d(Qn,["dbltap","vdblclick"],zt,{x:Cn[0],y:Cn[1]})):(Jr=setTimeout(function(){Wr||d(Qn,["onetap","voneclick"],zt,{x:Cn[0],y:Cn[1]})},Ct.multiClickDebounceTime()),mr=zt.timeStamp)),null!=Qn&&!f.dragData.didDrag&&Qn._private.selectable&&Er<f.touchTapThreshold2&&!f.pinching&&("single"===Ct.selectionType()?(Ct.$(c).unmerge(Qn).unselect(["tapunselect"]),Qn.select(["tapselect"])):Qn.selected()?Qn.unselect(["tapunselect"]):Qn.select(["tapselect"]),f.redrawHint("eles",!0)),f.touchData.singleTouchMoved=!0}for(var Wa=0;Wa<Cn.length;Wa++)An[Wa]=Cn[Wa];f.dragData.didDrag=!1,0===zt.touches.length&&(f.touchData.dragDelta=[],f.touchData.startPosition=null,f.touchData.startGPosition=null,f.touchData.didSelect=!1),zt.touches.length<2&&(1===zt.touches.length&&(f.touchData.startGPosition=[zt.touches[0].clientX,zt.touches[0].clientY]),f.pinching=!1,f.redrawHint("eles",!0),f.redraw())}},!1),typeof TouchEvent>"u"){var or=[],Zr=function(zt){return{clientX:zt.clientX,clientY:zt.clientY,force:1,identifier:zt.pointerId,pageX:zt.pageX,pageY:zt.pageY,radiusX:zt.width/2,radiusY:zt.height/2,screenX:zt.screenX,screenY:zt.screenY,target:zt.target}},wr=function(zt){for(var Qn=0;Qn<or.length;Qn++)if(or[Qn].event.pointerId===zt.pointerId)return void or.splice(Qn,1)},zs=function(zt){zt.touches=or.map(function(Qn){return Qn.touch})},ts=function(zt){return"mouse"===zt.pointerType||4===zt.pointerType};f.registerBinding(f.container,"pointerdown",function($i){ts($i)||($i.preventDefault(),or.push(function(zt){return{event:zt,touch:Zr(zt)}}($i)),zs($i),li($i))}),f.registerBinding(f.container,"pointerup",function($i){ts($i)||(wr($i),zs($i),lr($i))}),f.registerBinding(f.container,"pointercancel",function($i){ts($i)||(wr($i),zs($i),Qi())}),f.registerBinding(f.container,"pointermove",function($i){var zt,Qn;ts($i)||($i.preventDefault(),zt=$i,(Qn=or.filter(function(Ri){return Ri.event.pointerId===zt.pointerId})[0]).event=zt,Qn.touch=Zr(zt),zs($i),Ei($i))})}};var vd={generatePolygon:function(f,c){return this.nodeShapes[f]={renderer:this,name:f,points:c,draw:function(m,_,C,A,E){this.renderer.nodeShapeImpl("polygon",m,_,C,A,E,this.points)},intersectLine:function(m,_,C,A,E,B,P){return hu(E,B,this.points,m,_,C/2,A/2,P)},checkPoint:function(m,_,C,A,E,B,P){return oo(m,_,this.points,B,P,A,E,[0,-1],C)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},intersectLine:function(c,d,m,_,C,A,E){return function(c,d,m,_,C,A){var E=m-c,B=_-d;E/=C,B/=A;var P=Math.sqrt(E*E+B*B),q=P-1;if(q<0)return[];var Q=q/P;return[(m-c)*Q+c,(_-d)*Q+d]}(C,A,c,d,m/2+E,_/2+E)},checkPoint:function(c,d,m,_,C,A,E){return Ka(c,d,_,C,A,E,m)}}},generateRoundPolygon:function(f,c){for(var d=new Array(2*c.length),m=0;m<c.length/2;m++){var C,_=2*m;C=m<c.length/2-1?2*(m+1):0,d[4*m]=c[_],d[4*m+1]=c[_+1];var A=c[C]-c[_],E=c[C+1]-c[_+1],B=Math.sqrt(A*A+E*E);d[4*m+2]=A/B,d[4*m+3]=E/B}return this.nodeShapes[f]={renderer:this,name:f,points:d,draw:function(q,Q,fe,me,_e){this.renderer.nodeShapeImpl("round-polygon",q,Q,fe,me,_e,this.points)},intersectLine:function(q,Q,fe,me,_e,Pe,$e){return function(c,d,m,_,C,A,E,B){for(var q,P=[],Q=new Array(m.length),fe=A/2,me=E/2,_e=Or(A,E),Pe=0;Pe<m.length/4;Pe++){var Ke,$e;$e=0===Pe?m.length-2:4*Pe-2,Ke=4*Pe+2;var ht=_+fe*m[4*Pe],rt=C+me*m[4*Pe+1],Gt=_e/Math.tan(Math.acos(-m[$e]*m[Ke]-m[$e+1]*m[Ke+1])/2),Wt=ht-Gt*m[$e],Tt=rt-Gt*m[$e+1],jt=ht+Gt*m[Ke],Pt=rt+Gt*m[Ke+1];0===Pe?(Q[m.length-2]=Wt,Q[m.length-1]=Tt):(Q[4*Pe-2]=Wt,Q[4*Pe-1]=Tt),Q[4*Pe]=jt,Q[4*Pe+1]=Pt;var Zt=m[$e+1],Kt=-m[$e];Zt*m[Ke]+Kt*m[Ke+1]<0&&(Zt*=-1,Kt*=-1),0!==(q=Xf(c,d,_,C,Wt+Zt*_e,Tt+Kt*_e,_e)).length&&P.push(q[0],q[1])}for(var xn=0;xn<Q.length/4;xn++)0!==(q=sl(c,d,_,C,Q[4*xn],Q[4*xn+1],Q[4*xn+2],Q[4*xn+3],!1)).length&&P.push(q[0],q[1]);if(P.length>2){for(var sn=[P[0],P[1]],vn=Math.pow(sn[0]-c,2)+Math.pow(sn[1]-d,2),Ln=1;Ln<P.length/2;Ln++){var Fn=Math.pow(P[2*Ln]-c,2)+Math.pow(P[2*Ln+1]-d,2);Fn<=vn&&(sn[0]=P[2*Ln],sn[1]=P[2*Ln+1],vn=Fn)}return sn}return P}(_e,Pe,this.points,q,Q,fe,me)},checkPoint:function(q,Q,fe,me,_e,Pe,$e){return function(c,d,m,_,C,A,E){for(var B=new Array(m.length),P=A/2,q=E/2,Q=Or(A,E),fe=Q*Q,me=0;me<m.length/4;me++){var Pe,_e;_e=0===me?m.length-2:4*me-2,Pe=4*me+2;var $e=_+P*m[4*me],Ke=C+q*m[4*me+1],rt=Q/Math.tan(Math.acos(-m[_e]*m[Pe]-m[_e+1]*m[Pe+1])/2),St=$e-rt*m[_e],Gt=Ke-rt*m[_e+1],Wt=$e+rt*m[Pe],Tt=Ke+rt*m[Pe+1];B[4*me]=St,B[4*me+1]=Gt,B[4*me+2]=Wt,B[4*me+3]=Tt;var jt=m[_e+1],Pt=-m[_e];jt*m[Pe]+Pt*m[Pe+1]<0&&(jt*=-1,Pt*=-1);var dt=Gt+Pt*Q;if(Math.pow(St+jt*Q-c,2)+Math.pow(dt-d,2)<=fe)return!0}return Ma(c,d,B)}(q,Q,this.points,Pe,$e,me,_e)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:_r(4,0),draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},intersectLine:function(c,d,m,_,C,A,E){return Nu(C,A,c,d,m,_,E)},checkPoint:function(c,d,m,_,C,A,E){var B=vf(_,C),P=2*B;return!!(oo(c,d,this.points,A,E,_,C-P,[0,-1],m)||oo(c,d,this.points,A,E,_-P,C,[0,-1],m)||Ka(c,d,P,P,A-_/2+B,E-C/2+B,m)||Ka(c,d,P,P,A+_/2-B,E-C/2+B,m)||Ka(c,d,P,P,A+_/2-B,E+C/2-B,m)||Ka(c,d,P,P,A-_/2+B,E+C/2-B,m))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:_r(4,0),draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},generateCutTrianglePts:function(c,d,m,_){var C=this.cornerLength,A=d/2,E=c/2,B=m-E,P=m+E,q=_-A,Q=_+A;return{topLeft:[B,q+C,B+C,q,B+C,q+C],topRight:[P-C,q,P,q+C,P-C,q+C],bottomRight:[P,Q-C,P-C,Q,P-C,Q-C],bottomLeft:[B+C,Q,B,Q-C,B+C,Q-C]}},intersectLine:function(c,d,m,_,C,A,E){var B=this.generateCutTrianglePts(m+2*E,_+2*E,c,d),P=[].concat.apply([],[B.topLeft.splice(0,4),B.topRight.splice(0,4),B.bottomRight.splice(0,4),B.bottomLeft.splice(0,4)]);return hu(C,A,P,c,d)},checkPoint:function(c,d,m,_,C,A,E){if(oo(c,d,this.points,A,E,_,C-2*this.cornerLength,[0,-1],m)||oo(c,d,this.points,A,E,_-2*this.cornerLength,C,[0,-1],m))return!0;var B=this.generateCutTrianglePts(_,C,A,E);return Ma(c,d,B.topLeft)||Ma(c,d,B.topRight)||Ma(c,d,B.bottomRight)||Ma(c,d,B.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:_r(4,0),draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},intersectLine:function(c,d,m,_,C,A,E){var Q=this.generateBarrelBezierPts(m+2*E,_+2*E,c,d),fe=function(Pe){var $e=Zi({x:Pe[0],y:Pe[1]},{x:Pe[2],y:Pe[3]},{x:Pe[4],y:Pe[5]},.15),Ke=Zi({x:Pe[0],y:Pe[1]},{x:Pe[2],y:Pe[3]},{x:Pe[4],y:Pe[5]},.5),ht=Zi({x:Pe[0],y:Pe[1]},{x:Pe[2],y:Pe[3]},{x:Pe[4],y:Pe[5]},.85);return[Pe[0],Pe[1],$e.x,$e.y,Ke.x,Ke.y,ht.x,ht.y,Pe[4],Pe[5]]},me=[].concat(fe(Q.topLeft),fe(Q.topRight),fe(Q.bottomRight),fe(Q.bottomLeft));return hu(C,A,me,c,d)},generateBarrelBezierPts:function(c,d,m,_){var C=d/2,A=c/2,E=m-A,B=m+A,P=_-C,q=_+C,Q=Yr(c,d),fe=Q.heightOffset,me=Q.widthOffset,_e=Q.ctrlPtOffsetPct*c,Pe={topLeft:[E,P+fe,E+_e,P,E+me,P],topRight:[B-me,P,B-_e,P,B,P+fe],bottomRight:[B,q-fe,B-_e,q,B-me,q],bottomLeft:[E+me,q,E+_e,q,E,q-fe]};return Pe.topLeft.isTop=!0,Pe.topRight.isTop=!0,Pe.bottomLeft.isBottom=!0,Pe.bottomRight.isBottom=!0,Pe},checkPoint:function(c,d,m,_,C,A,E){var B=Yr(_,C),q=B.widthOffset;if(oo(c,d,this.points,A,E,_,C-2*B.heightOffset,[0,-1],m)||oo(c,d,this.points,A,E,_-2*q,C,[0,-1],m))return!0;for(var Q=this.generateBarrelBezierPts(_,C,A,E),fe=function(Tt,jt,Pt){var Zt=Pt[4],Kt=Pt[2],dt=Pt[0],Qt=Pt[5],Ht=Pt[1],xn=Math.min(Zt,dt),sn=Math.max(Zt,dt),vn=Math.min(Qt,Ht),Ln=Math.max(Qt,Ht);if(xn<=Tt&&Tt<=sn&&vn<=jt&&jt<=Ln){var Fn=function(c,d,m){return[c-2*d+m,2*(d-c),c]}(Zt,Kt,dt),ri=function(c,d,m,_){var C=d*d-4*c*(m-=_);if(C<0)return[];var A=Math.sqrt(C),E=2*c;return[(-d+A)/E,(-d-A)/E]}(Fn[0],Fn[1],Fn[2],Tt),Rn=ri.filter(function(ei){return 0<=ei&&ei<=1});if(Rn.length>0)return Rn[0]}return null},me=Object.keys(Q),_e=0;_e<me.length;_e++){var $e=Q[me[_e]],Ke=fe(c,d,$e);if(null!=Ke){var Gt=hc($e[5],$e[3],$e[1],Ke);if($e.isTop&&Gt<=d||$e.isBottom&&d<=Gt)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:_r(4,0),draw:function(c,d,m,_,C){this.renderer.nodeShapeImpl(this.name,c,d,m,_,C)},intersectLine:function(c,d,m,_,C,A,E){var P=d-(_/2+E),fe=sl(C,A,c,d,c-(m/2+E),P,c+(m/2+E),P,!1);return fe.length>0?fe:Nu(C,A,c,d,m,_,E)},checkPoint:function(c,d,m,_,C,A,E){var B=vf(_,C),P=2*B;if(oo(c,d,this.points,A,E,_,C-P,[0,-1],m)||oo(c,d,this.points,A,E,_-P,C,[0,-1],m))return!0;var q=_/2+2*m,Q=C/2+2*m;return!!(Ma(c,d,[A-q,E-Q,A-q,E,A+q,E,A+q,E-Q])||Ka(c,d,P,P,A+_/2-B,E+C/2-B,m)||Ka(c,d,P,P,A-_/2+B,E+C/2-B,m))}}},registerNodeShapes:function(){var f=this.nodeShapes={},c=this;this.generateEllipse(),this.generatePolygon("triangle",_r(3,0)),this.generateRoundPolygon("round-triangle",_r(3,0)),this.generatePolygon("rectangle",_r(4,0)),f.square=f.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var d=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",d),this.generateRoundPolygon("round-diamond",d),this.generatePolygon("pentagon",_r(5,0)),this.generateRoundPolygon("round-pentagon",_r(5,0)),this.generatePolygon("hexagon",_r(6,0)),this.generateRoundPolygon("round-hexagon",_r(6,0)),this.generatePolygon("heptagon",_r(7,0)),this.generateRoundPolygon("round-heptagon",_r(7,0)),this.generatePolygon("octagon",_r(8,0)),this.generateRoundPolygon("round-octagon",_r(8,0));var m=new Array(20),_=Lh(5,0),C=Lh(5,Math.PI/5),A=.5*(3-Math.sqrt(5));A*=1.57;for(var E=0;E<C.length/2;E++)C[2*E]*=A,C[2*E+1]*=A;for(E=0;E<5;E++)m[4*E]=_[2*E],m[4*E+1]=_[2*E+1],m[4*E+2]=C[2*E],m[4*E+3]=C[2*E+1];m=Da(m),this.generatePolygon("star",m),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var B=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",B),this.generateRoundPolygon("round-tag",B),f.makePolygon=function(P){var fe,Q="polygon-"+P.join("$");return(fe=this[Q])?fe:c.generatePolygon(Q,P)}}},_p={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(f){f=f||Ai();var c=this;void 0===c.averageRedrawTime&&(c.averageRedrawTime=0),void 0===c.lastRedrawTime&&(c.lastRedrawTime=0),void 0===c.lastDrawTime&&(c.lastDrawTime=0),c.requestedFrame=!0,c.renderOptions=f},beforeRender:function(f,c){if(!this.destroyed){null==c&&mt("Priority is not optional for beforeRender");var d=this.beforeRenderCallbacks;d.push({fn:f,priority:c}),d.sort(function(m,_){return _.priority-m.priority})}}},Hm=function(c,d,m){for(var _=c.beforeRenderCallbacks,C=0;C<_.length;C++)_[C].fn(d,m)};_p.startRenderLoop=function(){var f=this,c=f.cy;f.renderLoopStarted||(f.renderLoopStarted=!0,uu(function m(_){if(!f.destroyed){if(!c.batching())if(f.requestedFrame&&!f.skipFrame){Hm(f,!0,_);var C=Sa();f.render(f.renderOptions);var A=f.lastDrawTime=Sa();void 0===f.averageRedrawTime&&(f.averageRedrawTime=A-C),void 0===f.redrawCount&&(f.redrawCount=0),f.redrawCount++,void 0===f.redrawTotalTime&&(f.redrawTotalTime=0);var E=A-C;f.redrawTotalTime+=E,f.lastRedrawTime=E,f.averageRedrawTime=f.averageRedrawTime/2+E/2,f.requestedFrame=!1}else Hm(f,!1,_);f.skipFrame=!1,uu(m)}}))};var nm=function(c){this.init(c)},bl=nm.prototype;bl.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],bl.init=function(f){var c=this;c.options=f,c.cy=f.cy;var d=c.container=f.cy.container();if(pe){var m=pe.document,_=m.head,C="__________cytoscape_stylesheet",A="__________cytoscape_container",E=null!=m.getElementById(C);if(d.className.indexOf(A)<0&&(d.className=(d.className||"")+" "+A),!E){var B=m.createElement("style");B.id=C,B.innerHTML="."+A+" { position: relative; }",_.insertBefore(B,_.children[0])}"static"===pe.getComputedStyle(d).getPropertyValue("position")&&ge("A Cytoscape container has style position:static and so can not use UI extensions properly")}c.selection=[void 0,void 0,void 0,void 0,0],c.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],c.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},c.dragData={possibleDragElements:[]},c.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},c.redraws=0,c.showFps=f.showFps,c.debug=f.debug,c.hideEdgesOnViewport=f.hideEdgesOnViewport,c.textureOnViewport=f.textureOnViewport,c.wheelSensitivity=f.wheelSensitivity,c.motionBlurEnabled=f.motionBlur,c.forcedPixelRatio=Be(f.pixelRatio)?f.pixelRatio:null,c.motionBlur=f.motionBlur,c.motionBlurOpacity=f.motionBlurOpacity,c.motionBlurTransparency=1-c.motionBlurOpacity,c.motionBlurPxRatio=1,c.mbPxRBlurry=1,c.minMbLowQualFrames=4,c.fullQualityMb=!1,c.clearedForMotionBlur=[],c.desktopTapThreshold=f.desktopTapThreshold,c.desktopTapThreshold2=f.desktopTapThreshold*f.desktopTapThreshold,c.touchTapThreshold=f.touchTapThreshold,c.touchTapThreshold2=f.touchTapThreshold*f.touchTapThreshold,c.tapholdDuration=500,c.bindings=[],c.beforeRenderCallbacks=[],c.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},c.registerNodeShapes(),c.registerArrowShapes(),c.registerCalculationListeners()},bl.notify=function(f,c){var d=this,m=d.cy;if(!this.destroyed){if("init"===f)return void d.load();if("destroy"===f)return void d.destroy();("add"===f||"remove"===f||"move"===f&&m.hasCompoundNodes()||"load"===f||"zorder"===f||"mount"===f)&&d.invalidateCachedZSortedEles(),"viewport"===f&&d.redrawHint("select",!0),("load"===f||"resize"===f||"mount"===f)&&(d.invalidateContainerClientCoordsCache(),d.matchCanvasSize(d.container)),d.redrawHint("eles",!0),d.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},bl.destroy=function(){var f=this;f.destroyed=!0,f.cy.stopAnimationLoop();for(var c=0;c<f.bindings.length;c++){var d=f.bindings[c],_=d.target;(_.off||_.removeEventListener).apply(_,d.args)}if(f.bindings=[],f.beforeRenderCallbacks=[],f.onUpdateEleCalcsFns=[],f.removeObserver&&f.removeObserver.disconnect(),f.styleObserver&&f.styleObserver.disconnect(),f.resizeObserver&&f.resizeObserver.disconnect(),f.labelCalcDiv)try{document.body.removeChild(f.labelCalcDiv)}catch{}},bl.isHeadless=function(){return!1},[tg,_h,Jd,ru,vd,_p].forEach(function(f){tr(bl,f)});var ua=1e3/60,kf_setupDequeueing=function(c){return function(){var m=this,_=this.renderer;if(!m.dequeueingSetup){m.dequeueingSetup=!0;var C=R.default(function(){_.redrawHint("eles",!0),_.redrawHint("drag",!0),_.redraw()},c.deqRedrawThreshold);_.beforeRender(function(P,q){var Q=Sa(),fe=_.averageRedrawTime,me=_.lastRedrawTime,_e=[],Pe=_.cy.extent(),$e=_.getPixelRatio();for(P||_.flushRenderedStyleQueue();;){var Ke=Sa(),ht=Ke-Q,rt=Ke-q;if(me<ua){if(rt>=c.deqFastCost*(ua-(P?fe:0)))break}else if(P){if(ht>=c.deqCost*me||ht>=c.deqAvgCost*fe)break}else if(rt>=c.deqNoDrawCost*ua)break;var Gt=c.deq(m,$e,Pe);if(!(Gt.length>0))break;for(var Wt=0;Wt<Gt.length;Wt++)_e.push(Gt[Wt])}_e.length>0&&(c.onDeqd(m,_e),!P&&c.shouldRedraw(m,_e,$e,Pe)&&C())},(c.priority||et)(m))}}},rg=function(){function f(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$f;Y(this,f),this.idsByKey=new Eo,this.keyForId=new Eo,this.cachesByLvl=new Eo,this.lvls=[],this.getKey=c,this.doesEleInvalidateKey=d}return oe(f,[{key:"getIdsFor",value:function(d){null==d&&mt("Can not get id list for null key");var m=this.idsByKey,_=this.idsByKey.get(d);return _||(_=new ms,m.set(d,_)),_}},{key:"addIdForKey",value:function(d,m){null!=d&&this.getIdsFor(d).add(m)}},{key:"deleteIdForKey",value:function(d,m){null!=d&&this.getIdsFor(d).delete(m)}},{key:"getNumberOfIdsForKey",value:function(d){return null==d?0:this.getIdsFor(d).size}},{key:"updateKeyMappingFor",value:function(d){var m=d.id(),_=this.keyForId.get(m),C=this.getKey(d);this.deleteIdForKey(_,m),this.addIdForKey(C,m),this.keyForId.set(m,C)}},{key:"deleteKeyMappingFor",value:function(d){var m=d.id(),_=this.keyForId.get(m);this.deleteIdForKey(_,m),this.keyForId.delete(m)}},{key:"keyHasChangedFor",value:function(d){var m=d.id();return this.keyForId.get(m)!==this.getKey(d)}},{key:"isInvalid",value:function(d){return this.keyHasChangedFor(d)||this.doesEleInvalidateKey(d)}},{key:"getCachesAt",value:function(d){var m=this.cachesByLvl,_=this.lvls,C=m.get(d);return C||(C=new Eo,m.set(d,C),_.push(d)),C}},{key:"getCache",value:function(d,m){return this.getCachesAt(m).get(d)}},{key:"get",value:function(d,m){var _=this.getKey(d),C=this.getCache(_,m);return null!=C&&this.updateKeyMappingFor(d),C}},{key:"getForCachedKey",value:function(d,m){var _=this.keyForId.get(d.id());return this.getCache(_,m)}},{key:"hasCache",value:function(d,m){return this.getCachesAt(m).has(d)}},{key:"has",value:function(d,m){var _=this.getKey(d);return this.hasCache(_,m)}},{key:"setCache",value:function(d,m,_){_.key=d,this.getCachesAt(m).set(d,_)}},{key:"set",value:function(d,m,_){var C=this.getKey(d);this.setCache(C,m,_),this.updateKeyMappingFor(d)}},{key:"deleteCache",value:function(d,m){this.getCachesAt(m).delete(d)}},{key:"delete",value:function(d,m){var _=this.getKey(d);this.deleteCache(_,m)}},{key:"invalidateKey",value:function(d){var m=this;this.lvls.forEach(function(_){return m.deleteCache(d,_)})}},{key:"invalidate",value:function(d){var m=d.id(),_=this.keyForId.get(m);this.deleteKeyMappingFor(d);var C=this.doesEleInvalidateKey(d);return C&&this.invalidateKey(_),C||0===this.getNumberOfIdsForKey(_)}}]),f}(),rm={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},mb=oi({getKey:null,doesEleInvalidateKey:$f,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:rl,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),bp=function(c,d){var m=this;m.renderer=c,m.onDequeues=[];var _=mb(d);tr(m,_),m.lookup=new rg(_.getKey,_.doesEleInvalidateKey),m.setupDequeueing()},hl=bp.prototype;hl.reasons=rm,hl.getTextureQueue=function(f){var c=this;return c.eleImgCaches=c.eleImgCaches||{},c.eleImgCaches[f]=c.eleImgCaches[f]||[]},hl.getRetiredTextureQueue=function(f){var d=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return d[f]=d[f]||[]},hl.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new j.default(function(d,m){return m.reqs-d.reqs})},hl.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},hl.getElement=function(f,c,d,m,_){var C=this,A=this.renderer,E=A.cy.zoom(),B=this.lookup;if(!c||0===c.w||0===c.h||isNaN(c.w)||isNaN(c.h)||!f.visible()||f.removed()||!C.allowEdgeTxrCaching&&f.isEdge()||!C.allowParentTxrCaching&&f.isParent())return null;if(null==m&&(m=Math.ceil(_v(E*d))),m<-4)m=-4;else if(E>=7.99||m>3)return null;var P=Math.pow(2,m),q=c.h*P,Q=c.w*P,fe=A.eleTextBiggerThanMin(f,P);if(!this.isVisible(f,fe))return null;var _e,me=B.get(f,m);if(me&&me.invalidated&&(me.invalidated=!1,me.texture.invalidatedWidth-=me.width),me)return me;if(_e=q<=25?25:q<=50?50:50*Math.ceil(q/50),q>1024||Q>1024)return null;var Pe=C.getTextureQueue(_e),$e=Pe[Pe.length-2],Ke=function(){return C.recycleTexture(_e,Q)||C.addTexture(_e,Q)};$e||($e=Pe[Pe.length-1]),$e||($e=Ke()),$e.width-$e.usedWidth<Q&&($e=Ke());for(var Wt,ht=function(sn){return sn&&sn.scaledLabelShown===fe},rt=_&&_===rm.dequeue,St=_&&_===rm.highQuality,Gt=_&&_===rm.downscale,Tt=m+1;Tt<=3;Tt++){var jt=B.get(f,Tt);if(jt){Wt=jt;break}}var Pt=Wt&&Wt.level===m+1?Wt:null,Zt=function(){$e.context.drawImage(Pt.texture.canvas,Pt.x,0,Pt.width,Pt.height,$e.usedWidth,0,Q,q)};if($e.context.setTransform(1,0,0,1,0,0),$e.context.clearRect($e.usedWidth,0,Q,_e),ht(Pt))Zt();else if(ht(Wt)){if(!St)return C.queueElement(f,Wt.level-1),Wt;for(var Kt=Wt.level;Kt>m;Kt--)Pt=C.getElement(f,c,d,Kt,rm.downscale);Zt()}else{var dt;if(!rt&&!St&&!Gt)for(var Qt=m-1;Qt>=-4;Qt--){var Ht=B.get(f,Qt);if(Ht){dt=Ht;break}}if(ht(dt))return C.queueElement(f,m),dt;$e.context.translate($e.usedWidth,0),$e.context.scale(P,P),this.drawElement($e.context,f,c,fe,!1),$e.context.scale(1/P,1/P),$e.context.translate(-$e.usedWidth,0)}return me={x:$e.usedWidth,texture:$e,level:m,scale:P,width:Q,height:q,scaledLabelShown:fe},$e.usedWidth+=Math.ceil(Q+8),$e.eleCaches.push(me),B.set(f,m,me),C.checkTextureFullness($e),me},hl.invalidateElements=function(f){for(var c=0;c<f.length;c++)this.invalidateElement(f[c])},hl.invalidateElement=function(f){var c=this,d=c.lookup,m=[];if(d.isInvalid(f)){for(var C=-4;C<=3;C++){var A=d.getForCachedKey(f,C);A&&m.push(A)}if(d.invalidate(f))for(var B=0;B<m.length;B++){var P=m[B],q=P.texture;q.invalidatedWidth+=P.width,P.invalidated=!0,c.checkTextureUtility(q)}c.removeFromQueue(f)}},hl.checkTextureUtility=function(f){f.invalidatedWidth>=.2*f.width&&this.retireTexture(f)},hl.checkTextureFullness=function(f){var d=this.getTextureQueue(f.height);f.usedWidth/f.width>.8&&f.fullnessChecks>=10?gi(d,f):f.fullnessChecks++},hl.retireTexture=function(f){var d=f.height,m=this.getTextureQueue(d),_=this.lookup;gi(m,f),f.retired=!0;for(var C=f.eleCaches,A=0;A<C.length;A++){var E=C[A];_.deleteCache(E.key,E.level)}yr(C),this.getRetiredTextureQueue(d).push(f)},hl.addTexture=function(f,c){var _={};return this.getTextureQueue(f).push(_),_.eleCaches=[],_.height=f,_.width=Math.max(1024,c),_.usedWidth=0,_.invalidatedWidth=0,_.fullnessChecks=0,_.canvas=this.renderer.makeOffscreenCanvas(_.width,_.height),_.context=_.canvas.getContext("2d"),_},hl.recycleTexture=function(f,c){for(var m=this.getTextureQueue(f),_=this.getRetiredTextureQueue(f),C=0;C<_.length;C++){var A=_[C];if(A.width>=c)return A.retired=!1,A.usedWidth=0,A.invalidatedWidth=0,A.fullnessChecks=0,yr(A.eleCaches),A.context.setTransform(1,0,0,1,0,0),A.context.clearRect(0,0,A.width,A.height),gi(_,A),m.push(A),A}},hl.queueElement=function(f,c){var m=this.getElementQueue(),_=this.getElementKeyToQueue(),C=this.getKey(f),A=_[C];if(A)A.level=Math.max(A.level,c),A.eles.merge(f),A.reqs++,m.updateItem(A);else{var E={eles:f.spawn().merge(f),level:c,reqs:1,key:C};m.push(E),_[C]=E}},hl.dequeue=function(f){for(var c=this,d=c.getElementQueue(),m=c.getElementKeyToQueue(),_=[],C=c.lookup,A=0;A<1&&d.size()>0;A++){var E=d.pop(),B=E.key,P=E.eles[0],q=C.hasCache(P,E.level);if(m[B]=null,!q){_.push(E);var Q=c.getBoundingBox(P);c.getElement(P,Q,f,E.level,rm.dequeue)}}return _},hl.removeFromQueue=function(f){var d=this.getElementQueue(),m=this.getElementKeyToQueue(),_=this.getKey(f),C=m[_];null!=C&&(1===C.eles.length?(C.reqs=Sc,d.updateItem(C),d.pop(),m[_]=null):C.eles.unmerge(f))},hl.onDequeue=function(f){this.onDequeues.push(f)},hl.offDequeue=function(f){gi(this.onDequeues,f)},hl.setupDequeueing=kf_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,d,m){return c.dequeue(d,m)},onDeqd:function(c,d){for(var m=0;m<c.onDequeues.length;m++)(0,c.onDequeues[m])(d)},shouldRedraw:function(c,d,m,_){for(var C=0;C<d.length;C++)for(var A=d[C].eles,E=0;E<A.length;E++){var B=A[E].boundingBox();if(Am(B,_))return!0}return!1},priority:function(c){return c.renderer.beforeRenderPriorities.eleTxrDeq}});var pa=function(c){var d=this,m=d.renderer=c,_=m.cy;d.layersByLevel={},d.firstGet=!0,d.lastInvalidationTime=Sa()-500,d.skipping=!1,d.eleTxrDeqs=_.collection(),d.scheduleElementRefinement=R.default(function(){d.refineElementTextures(d.eleTxrDeqs),d.eleTxrDeqs.unmerge(d.eleTxrDeqs)},50),m.beforeRender(function(A,E){d.skipping=E-d.lastInvalidationTime<=250},m.beforeRenderPriorities.lyrTxrSkip),d.layersQueue=new j.default(function(E,B){return B.reqs-E.reqs}),d.setupDequeueing()},Aa=pa.prototype,zv=0,Xh=Math.pow(2,53)-1;Aa.makeLayer=function(f,c){var d=Math.pow(2,c),m=Math.ceil(f.w*d),_=Math.ceil(f.h*d),C=this.renderer.makeOffscreenCanvas(m,_),A={id:zv=++zv%Xh,bb:f,level:c,width:m,height:_,canvas:C,context:C.getContext("2d"),eles:[],elesQueue:[],reqs:0},E=A.context,B=-A.bb.x1,P=-A.bb.y1;return E.scale(d,d),E.translate(B,P),A},Aa.getLayers=function(f,c,d){var m=this,A=m.renderer.cy.zoom(),E=m.firstGet;if(m.firstGet=!1,null==d)if((d=Math.ceil(_v(A*c)))<-4)d=-4;else if(A>=3.99||d>2)return null;m.validateLayersElesOrdering(d,f);var Q,me,B=m.layersByLevel,P=Math.pow(2,d),q=B[d]=B[d]||[];if(m.levelIsComplete(d,f))return q;!function(){var Zt=function(xn){if(m.validateLayersElesOrdering(xn,f),m.levelIsComplete(xn,f))return me=B[xn],!0},Kt=function(xn){if(!me)for(var sn=d+xn;-4<=sn&&sn<=2&&!Zt(sn);sn+=xn);};Kt(1),Kt(-1);for(var dt=q.length-1;dt>=0;dt--){var Qt=q[dt];Qt.invalid&&gi(q,Qt)}}();var $e=function(Zt){var Kt=(Zt=Zt||{}).after;if(function(){if(!Q){Q=Mc();for(var Zt=0;Zt<f.length;Zt++)Ta(Q,f[Zt].boundingBox())}}(),Q.w*P*(Q.h*P)>16e6)return null;var Qt=m.makeLayer(Q,d);if(null!=Kt){var Ht=q.indexOf(Kt)+1;q.splice(Ht,0,Qt)}else(void 0===Zt.insert||Zt.insert)&&q.unshift(Qt);return Qt};if(m.skipping&&!E)return null;for(var Ke=null,ht=f.length/1,rt=!E,St=0;St<f.length;St++){var Gt=f[St],Wt=Gt._private.rscratch,Tt=Wt.imgLayerCaches=Wt.imgLayerCaches||{},jt=Tt[d];if(jt)Ke=jt;else{if((!Ke||Ke.eles.length>=ht||!Cv(Ke.bb,Gt.boundingBox()))&&!(Ke=$e({insert:!0,after:Ke})))return null;me||rt?m.queueLayer(Ke,Gt):m.drawEleInLayer(Ke,Gt,d,c),Ke.eles.push(Gt),Tt[d]=Ke}}return me||(rt?null:q)},Aa.getEleLevelForLayerLevel=function(f,c){return f},Aa.drawEleInLayer=function(f,c,d,m){var C=this.renderer,A=f.context,E=c.boundingBox();0===E.w||0===E.h||!c.visible()||(d=this.getEleLevelForLayerLevel(d,m),C.setImgSmoothing(A,!1),C.drawCachedElement(A,c,null,null,d,!0),C.setImgSmoothing(A,!0))},Aa.levelIsComplete=function(f,c){var m=this.layersByLevel[f];if(!m||0===m.length)return!1;for(var _=0,C=0;C<m.length;C++){var A=m[C];if(A.reqs>0||A.invalid)return!1;_+=A.eles.length}return _===c.length},Aa.validateLayersElesOrdering=function(f,c){var d=this.layersByLevel[f];if(d)for(var m=0;m<d.length;m++){for(var _=d[m],C=-1,A=0;A<c.length;A++)if(_.eles[0]===c[A]){C=A;break}if(C<0)this.invalidateLayer(_);else{var E=C;for(A=0;A<_.eles.length;A++)if(_.eles[A]!==c[E+A]){this.invalidateLayer(_);break}}}},Aa.updateElementsInLayers=function(f,c){for(var m=bt(f[0]),_=0;_<f.length;_++)for(var C=m?null:f[_],A=m?f[_]:f[_].ele,E=A._private.rscratch,B=E.imgLayerCaches=E.imgLayerCaches||{},P=-4;P<=2;P++){var q=B[P];!q||C&&this.getEleLevelForLayerLevel(q.level)!==C.level||c(q,A,C)}},Aa.haveLayers=function(){for(var c=!1,d=-4;d<=2;d++){var m=this.layersByLevel[d];if(m&&m.length>0){c=!0;break}}return c},Aa.invalidateElements=function(f){var c=this;0!==f.length&&(c.lastInvalidationTime=Sa(),0!==f.length&&c.haveLayers()&&c.updateElementsInLayers(f,function(m,_,C){c.invalidateLayer(m)}))},Aa.invalidateLayer=function(f){if(this.lastInvalidationTime=Sa(),!f.invalid){var c=f.level,d=f.eles;gi(this.layersByLevel[c],f),f.elesQueue=[],f.invalid=!0,f.replacement&&(f.replacement.invalid=!0);for(var _=0;_<d.length;_++){var C=d[_]._private.rscratch.imgLayerCaches;C&&(C[c]=null)}}},Aa.refineElementTextures=function(f){var c=this;c.updateElementsInLayers(f,function(m,_,C){var A=m.replacement;if(A||((A=m.replacement=c.makeLayer(m.bb,m.level)).replaces=m,A.eles=m.eles),!A.reqs)for(var E=0;E<A.eles.length;E++)c.queueLayer(A,A.eles[E])})},Aa.enqueueElementRefinement=function(f){this.eleTxrDeqs.merge(f),this.scheduleElementRefinement()},Aa.queueLayer=function(f,c){var m=this.layersQueue,_=f.elesQueue,C=_.hasId=_.hasId||{};if(!f.replacement){if(c){if(C[c.id()])return;_.push(c),C[c.id()]=!0}f.reqs?(f.reqs++,m.updateItem(f)):(f.reqs=1,m.push(f))}},Aa.dequeue=function(f){for(var c=this,d=c.layersQueue,m=[],_=0;_<1&&0!==d.size();){var C=d.peek();if(C.replacement)d.pop();else if(C.replaces&&C!==C.replaces.replacement)d.pop();else if(C.invalid)d.pop();else{var A=C.elesQueue.shift();A&&(c.drawEleInLayer(C,A,C.level,f),_++),0===m.length&&m.push(!0),0===C.elesQueue.length&&(d.pop(),C.reqs=0,C.replaces&&c.applyLayerReplacement(C),c.requestRedraw())}}return m},Aa.applyLayerReplacement=function(f){var d=this.layersByLevel[f.level],m=f.replaces,_=d.indexOf(m);if(!(_<0||m.invalid)){d[_]=f;for(var C=0;C<f.eles.length;C++){var A=f.eles[C]._private,E=A.imgLayerCaches=A.imgLayerCaches||{};E&&(E[f.level]=f)}this.requestRedraw()}},Aa.requestRedraw=R.default(function(){var f=this.renderer;f.redrawHint("eles",!0),f.redrawHint("drag",!0),f.redraw()},100),Aa.setupDequeueing=kf_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,d){return c.dequeue(d)},onDeqd:et,shouldRedraw:rl,priority:function(c){return c.renderer.beforeRenderPriorities.lyrTxrDeq}});var qy,Vv={};function Z_(f,c){for(var d=0;d<c.length;d++){var m=c[d];f.lineTo(m.x,m.y)}}function $m(f,c,d){for(var m,_=0;_<c.length;_++){var C=c[_];0===_&&(m=C),f.lineTo(C.x,C.y)}f.quadraticCurveTo(d.x,d.y,m.x,m.y)}function Xy(f,c,d){f.beginPath&&f.beginPath();for(var m=c,_=0;_<m.length;_++)f.lineTo((C=m[_]).x,C.y);var A=d,E=d[0];for(f.moveTo(E.x,E.y),_=1;_<A.length;_++){var C;f.lineTo((C=A[_]).x,C.y)}f.closePath&&f.closePath()}function Q_(f,c,d,m,_){f.beginPath&&f.beginPath(),f.arc(d,m,_,0,2*Math.PI,!1);var C=c,A=C[0];f.moveTo(A.x,A.y);for(var E=0;E<C.length;E++){var B=C[E];f.lineTo(B.x,B.y)}f.closePath&&f.closePath()}function yb(f,c,d,m){f.arc(c,d,m,0,2*Math.PI,!1)}Vv.arrowShapeImpl=function(f){return(qy||(qy={polygon:Z_,"triangle-backcurve":$m,"triangle-tee":Xy,"circle-triangle":Q_,"triangle-cross":Xy,circle:yb}))[f]};var tf={drawElement:function(f,c,d,m,_,C){c.isNode()?this.drawNode(f,c,d,m,_,C):this.drawEdge(f,c,d,m,_,C)},drawElementOverlay:function(f,c){c.isNode()?this.drawNodeOverlay(f,c):this.drawEdgeOverlay(f,c)},drawElementUnderlay:function(f,c){c.isNode()?this.drawNodeUnderlay(f,c):this.drawEdgeUnderlay(f,c)},drawCachedElementPortion:function(f,c,d,m,_,C,A,E){var B=this,P=d.getBoundingBox(c);if(0!==P.w&&0!==P.h){var q=d.getElement(c,P,m,_,C);if(null!=q){var Q=E(B,c);if(0===Q)return;var Ke,ht,rt,St,Gt,jt,fe=A(B,c),me=P.x1,_e=P.y1,Pe=P.w,$e=P.h;if(0!==fe){var Wt=d.getRotationPoint(c);f.translate(rt=Wt.x,St=Wt.y),f.rotate(fe),(Gt=B.getImgSmoothing(f))||B.setImgSmoothing(f,!0);var Tt=d.getRotationOffset(c);Ke=Tt.x,ht=Tt.y}else Ke=me,ht=_e;1!==Q&&(f.globalAlpha=(jt=f.globalAlpha)*Q),f.drawImage(q.texture.canvas,q.x,0,q.width,q.height,Ke,ht,Pe,$e),1!==Q&&(f.globalAlpha=jt),0!==fe&&(f.rotate(-fe),f.translate(-rt,-St),Gt||B.setImgSmoothing(f,!1))}else d.drawElement(f,c)}}},sm=function(){return 0},Uv=function(c,d){return c.getTextAngle(d,null)},Yy=function(c,d){return c.getTextAngle(d,"source")},Ky=function(c,d){return c.getTextAngle(d,"target")},a=function(c,d){return d.effectiveOpacity()},h=function(c,d){return d.pstyle("text-opacity").pfValue*d.effectiveOpacity()};tf.drawCachedElement=function(f,c,d,m,_,C){var A=this,E=A.data,B=E.eleTxrCache,P=E.lblTxrCache,q=E.slbTxrCache,Q=E.tlbTxrCache,fe=c.boundingBox(),me=!0===C?B.reasons.highQuality:null;if(0!==fe.w&&0!==fe.h&&c.visible()&&(!m||Am(fe,m))){var _e=c.isEdge(),Pe=c.element()._private.rscratch.badLine;A.drawElementUnderlay(f,c),A.drawCachedElementPortion(f,c,B,d,_,me,sm,a),(!_e||!Pe)&&A.drawCachedElementPortion(f,c,P,d,_,me,Uv,h),_e&&!Pe&&(A.drawCachedElementPortion(f,c,q,d,_,me,Yy,h),A.drawCachedElementPortion(f,c,Q,d,_,me,Ky,h)),A.drawElementOverlay(f,c)}},tf.drawElements=function(f,c){for(var m=0;m<c.length;m++)this.drawElement(f,c[m])},tf.drawCachedElements=function(f,c,d,m){for(var C=0;C<c.length;C++)this.drawCachedElement(f,c[C],d,m)},tf.drawCachedNodes=function(f,c,d,m){for(var C=0;C<c.length;C++){var A=c[C];!A.isNode()||this.drawCachedElement(f,A,d,m)}},tf.drawLayeredElements=function(f,c,d,m){var C=this.data.lyrTxrCache.getLayers(c,d);if(C)for(var A=0;A<C.length;A++){var E=C[A],B=E.bb;0===B.w||0===B.h||f.drawImage(E.canvas,B.x1,B.y1,B.w,B.h)}else this.drawCachedElements(f,c,d,m)};var g={drawEdge:function(f,c,d){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=this,E=c._private.rscratch;if((!C||c.visible())&&!E.badLine&&null!=E.allpts&&!isNaN(E.allpts[0])){var B;d&&f.translate(-(B=d).x1,-B.y1);var P=C?c.pstyle("opacity").value:1,q=C?c.pstyle("line-opacity").value:1,Q=c.pstyle("curve-style").value,fe=c.pstyle("line-style").value,me=c.pstyle("width").pfValue,_e=c.pstyle("line-cap").value,Pe=P*q,$e=P*q,Ke=function(){var dt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe;"straight-triangle"===Q?(A.eleStrokeStyle(f,c,dt),A.drawEdgeTrianglePath(c,f,E.allpts)):(f.lineWidth=me,f.lineCap=_e,A.eleStrokeStyle(f,c,dt),A.drawEdgePath(c,f,E.allpts,fe),f.lineCap="butt")},ht=function(){!_||A.drawEdgeOverlay(f,c)},rt=function(){!_||A.drawEdgeUnderlay(f,c)},St=function(){var dt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e;A.drawArrowheads(f,c,dt)},Gt=function(){A.drawElementText(f,c,null,m)};f.lineJoin="round";var Wt="yes"===c.pstyle("ghost").value;if(Wt){var Tt=c.pstyle("ghost-offset-x").pfValue,jt=c.pstyle("ghost-offset-y").pfValue,Pt=c.pstyle("ghost-opacity").value,Zt=Pe*Pt;f.translate(Tt,jt),Ke(Zt),St(Zt),f.translate(-Tt,-jt)}rt(),Ke(),St(),ht(),Gt(),d&&f.translate(B.x1,B.y1)}}},y=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(d,m){if(m.visible()){var _=m.pstyle("".concat(c,"-opacity")).value;if(0!==_){var C=this,A=C.usePaths(),E=m._private.rscratch,P=2*m.pstyle("".concat(c,"-padding")).pfValue,q=m.pstyle("".concat(c,"-color")).value;d.lineWidth=P,d.lineCap="self"!==E.edgeType||A?"round":"butt",C.colorStrokeStyle(d,q[0],q[1],q[2],_),C.drawEdgePath(m,d,E.allpts,"solid")}}}};g.drawEdgeOverlay=y("overlay"),g.drawEdgeUnderlay=y("underlay"),g.drawEdgePath=function(f,c,d,m){var A,_=f._private.rscratch,C=c,E=!1,B=this.usePaths(),P=f.pstyle("line-dash-pattern").pfValue,q=f.pstyle("line-dash-offset").pfValue;if(B){var Q=d.join("$");_.pathCacheKey&&_.pathCacheKey===Q?(A=c=_.pathCache,E=!0):(A=c=new Path2D,_.pathCacheKey=Q,_.pathCache=A)}if(C.setLineDash)switch(m){case"dotted":C.setLineDash([1,1]);break;case"dashed":C.setLineDash(P),C.lineDashOffset=q;break;case"solid":C.setLineDash([])}if(!E&&!_.badLine)switch(c.beginPath&&c.beginPath(),c.moveTo(d[0],d[1]),_.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var me=2;me+3<d.length;me+=4)c.quadraticCurveTo(d[me],d[me+1],d[me+2],d[me+3]);break;case"straight":case"segments":case"haystack":for(var _e=2;_e+1<d.length;_e+=2)c.lineTo(d[_e],d[_e+1])}c=C,B?c.stroke(A):c.stroke(),c.setLineDash&&c.setLineDash([])},g.drawEdgeTrianglePath=function(f,c,d){c.fillStyle=c.strokeStyle;for(var m=f.pstyle("width").pfValue,_=0;_+1<d.length;_+=2){var C=[d[_+2]-d[_],d[_+3]-d[_+1]],A=Math.sqrt(C[0]*C[0]+C[1]*C[1]),E=[C[1]/A,-C[0]/A],B=[E[0]*m/2,E[1]*m/2];c.beginPath(),c.moveTo(d[_]-B[0],d[_+1]-B[1]),c.lineTo(d[_]+B[0],d[_+1]+B[1]),c.lineTo(d[_+2],d[_+3]),c.closePath(),c.fill()}},g.drawArrowheads=function(f,c,d){var m=c._private.rscratch,_="haystack"===m.edgeType;_||this.drawArrowhead(f,c,"source",m.arrowStartX,m.arrowStartY,m.srcArrowAngle,d),this.drawArrowhead(f,c,"mid-target",m.midX,m.midY,m.midtgtArrowAngle,d),this.drawArrowhead(f,c,"mid-source",m.midX,m.midY,m.midsrcArrowAngle,d),_||this.drawArrowhead(f,c,"target",m.arrowEndX,m.arrowEndY,m.tgtArrowAngle,d)},g.drawArrowhead=function(f,c,d,m,_,C,A){if(!(isNaN(m)||null==m||isNaN(_)||null==_||isNaN(C)||null==C)){var E=this,B=c.pstyle(d+"-arrow-shape").value;if("none"!==B){var P="hollow"===c.pstyle(d+"-arrow-fill").value?"both":"filled",q=c.pstyle(d+"-arrow-fill").value,Q=c.pstyle("width").pfValue,fe=c.pstyle("opacity").value;void 0===A&&(A=fe);var me=f.globalCompositeOperation;(1!==A||"hollow"===q)&&(f.globalCompositeOperation="destination-out",E.colorFillStyle(f,255,255,255,1),E.colorStrokeStyle(f,255,255,255,1),E.drawArrowShape(c,f,P,Q,B,m,_,C),f.globalCompositeOperation=me);var _e=c.pstyle(d+"-arrow-color").value;E.colorFillStyle(f,_e[0],_e[1],_e[2],A),E.colorStrokeStyle(f,_e[0],_e[1],_e[2],A),E.drawArrowShape(c,f,q,Q,B,m,_,C)}}},g.drawArrowShape=function(f,c,d,m,_,C,A,E){var Q,B=this,P=this.usePaths()&&"triangle-cross"!==_,q=!1,fe=c,me={x:C,y:A},_e=f.pstyle("arrow-scale").value,Pe=this.getArrowWidth(m,_e),$e=B.arrowShapes[_];if(P){var Ke=B.arrowPathCache=B.arrowPathCache||[],ht=Ic(_),rt=Ke[ht];null!=rt?(Q=c=rt,q=!0):(Q=c=new Path2D,Ke[ht]=Q)}q||(c.beginPath&&c.beginPath(),P?$e.draw(c,1,0,{x:0,y:0},1):$e.draw(c,Pe,E,me,m),c.closePath&&c.closePath()),c=fe,P&&(c.translate(C,A),c.rotate(E),c.scale(Pe,Pe)),("filled"===d||"both"===d)&&(P?c.fill(Q):c.fill()),("hollow"===d||"both"===d)&&(c.lineWidth=($e.matchEdgeWidth?m:1)/(P?Pe:1),c.lineJoin="miter",P?c.stroke(Q):c.stroke()),P&&(c.scale(1/Pe,1/Pe),c.rotate(-E),c.translate(-C,-A))};var x={safeDrawImage:function(f,c,d,m,_,C,A,E,B,P){if(!(_<=0||C<=0||B<=0||P<=0))try{f.drawImage(c,d,m,_,C,A,E,B,P)}catch(q){ge(q)}},drawInscribedImage:function(f,c,d,m,_){var C=this,A=d.position(),E=A.x,B=A.y,P=d.cy().style(),q=P.getIndexedStyle.bind(P),Q=q(d,"background-fit","value",m),fe=q(d,"background-repeat","value",m),me=d.width(),_e=d.height(),Pe=2*d.padding(),$e=me+("inner"===q(d,"background-width-relative-to","value",m)?0:Pe),Ke=_e+("inner"===q(d,"background-height-relative-to","value",m)?0:Pe),ht=d._private.rscratch,St="node"===q(d,"background-clip","value",m),Gt=q(d,"background-image-opacity","value",m)*_,Wt=q(d,"background-image-smoothing","value",m),Tt=c.width||c.cachedW,jt=c.height||c.cachedH;(null==Tt||null==jt)&&(document.body.appendChild(c),Tt=c.cachedW=c.width||c.offsetWidth,jt=c.cachedH=c.height||c.offsetHeight,document.body.removeChild(c));var Pt=Tt,Zt=jt;if("auto"!==q(d,"background-width","value",m)&&(Pt="%"===q(d,"background-width","units",m)?q(d,"background-width","pfValue",m)*$e:q(d,"background-width","pfValue",m)),"auto"!==q(d,"background-height","value",m)&&(Zt="%"===q(d,"background-height","units",m)?q(d,"background-height","pfValue",m)*Ke:q(d,"background-height","pfValue",m)),0!==Pt&&0!==Zt){if("contain"===Q)Pt*=Kt=Math.min($e/Pt,Ke/Zt),Zt*=Kt;else if("cover"===Q){var Kt;Pt*=Kt=Math.max($e/Pt,Ke/Zt),Zt*=Kt}var dt=E-$e/2,Qt=q(d,"background-position-x","units",m),Ht=q(d,"background-position-x","pfValue",m);dt+="%"===Qt?($e-Pt)*Ht:Ht;var xn=q(d,"background-offset-x","units",m),sn=q(d,"background-offset-x","pfValue",m);dt+="%"===xn?($e-Pt)*sn:sn;var vn=B-Ke/2,Ln=q(d,"background-position-y","units",m),Fn=q(d,"background-position-y","pfValue",m);vn+="%"===Ln?(Ke-Zt)*Fn:Fn;var ri=q(d,"background-offset-y","units",m),Rn=q(d,"background-offset-y","pfValue",m);vn+="%"===ri?(Ke-Zt)*Rn:Rn,ht.pathCache&&(dt-=E,vn-=B,E=0,B=0);var ei=f.globalAlpha;f.globalAlpha=Gt;var di=C.getImgSmoothing(f),Ii=!1;if("no"===Wt&&di?(C.setImgSmoothing(f,!1),Ii=!0):"yes"===Wt&&!di&&(C.setImgSmoothing(f,!0),Ii=!0),"no-repeat"===fe)St&&(f.save(),ht.pathCache?f.clip(ht.pathCache):(C.nodeShapes[C.getNodeShape(d)].draw(f,E,B,$e,Ke),f.clip())),C.safeDrawImage(f,c,0,0,Tt,jt,dt,vn,Pt,Zt),St&&f.restore();else{var vi=f.createPattern(c,fe);f.fillStyle=vi,C.nodeShapes[C.getNodeShape(d)].draw(f,E,B,$e,Ke),f.translate(dt,vn),f.fill(),f.translate(-dt,-vn)}f.globalAlpha=ei,Ii&&C.setImgSmoothing(f,di)}}},D={};function F(f,c,d,m,_){var C=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;f.beginPath(),f.moveTo(c+C,d),f.lineTo(c+m-C,d),f.quadraticCurveTo(c+m,d,c+m,d+C),f.lineTo(c+m,d+_-C),f.quadraticCurveTo(c+m,d+_,c+m-C,d+_),f.lineTo(c+C,d+_),f.quadraticCurveTo(c,d+_,c,d+_-C),f.lineTo(c,d+C),f.quadraticCurveTo(c,d,c+C,d),f.closePath(),f.fill()}D.eleTextBiggerThanMin=function(f,c){if(!c){var d=f.cy().zoom(),m=this.getPixelRatio(),_=Math.ceil(_v(d*m));c=Math.pow(2,_)}return!(f.pstyle("font-size").pfValue*c<f.pstyle("min-zoomed-font-size").pfValue)},D.drawElementText=function(f,c,d,m,_){var C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=this;if(null==m){if(C&&!A.eleTextBiggerThanMin(c))return}else if(!1===m)return;if(c.isNode()){var E=c.pstyle("label");if(!E||!E.value)return;var B=A.getLabelJustification(c);f.textAlign=B,f.textBaseline="bottom"}else{var P=c.element()._private.rscratch.badLine,q=c.pstyle("label"),Q=c.pstyle("source-label"),fe=c.pstyle("target-label");if(P||(!q||!q.value)&&(!Q||!Q.value)&&(!fe||!fe.value))return;f.textAlign="center",f.textBaseline="bottom"}var _e,me=!d;d&&f.translate(-(_e=d).x1,-_e.y1),null==_?(A.drawText(f,c,null,me,C),c.isEdge()&&(A.drawText(f,c,"source",me,C),A.drawText(f,c,"target",me,C))):A.drawText(f,c,_,me,C),d&&f.translate(_e.x1,_e.y1)},D.getFontCache=function(f){var c;this.fontCaches=this.fontCaches||[];for(var d=0;d<this.fontCaches.length;d++)if((c=this.fontCaches[d]).context===f)return c;return this.fontCaches.push(c={context:f}),c},D.setupTextStyle=function(f,c){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],m=c.pstyle("font-style").strValue,_=c.pstyle("font-size").pfValue+"px",C=c.pstyle("font-family").strValue,A=c.pstyle("font-weight").strValue,E=d?c.effectiveOpacity()*c.pstyle("text-opacity").value:1,B=c.pstyle("text-outline-opacity").value*E,P=c.pstyle("color").value,q=c.pstyle("text-outline-color").value;f.font=m+" "+A+" "+_+" "+C,f.lineJoin="round",this.colorFillStyle(f,P[0],P[1],P[2],E),this.colorStrokeStyle(f,q[0],q[1],q[2],B)},D.getTextAngle=function(f,c){var _=f._private.rscratch,A=f.pstyle((c?c+"-":"")+"text-rotation"),E=ur(_,"labelAngle",c);return"autorotate"===A.strValue?f.isEdge()?E:0:"none"===A.strValue?0:A.pfValue},D.drawText=function(f,c,d){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=c._private,A=C.rscratch,E=_?c.effectiveOpacity():1;if(!_||0!==E&&0!==c.pstyle("text-opacity").value){"main"===d&&(d=null);var q,Q,B=ur(A,"labelX",d),P=ur(A,"labelY",d),fe=this.getLabelText(c,d);if(null!=fe&&""!==fe&&!isNaN(B)&&!isNaN(P)){this.setupTextStyle(f,c,_);var Gt,me=d?d+"-":"",_e=ur(A,"labelWidth",d),Pe=ur(A,"labelHeight",d),$e=c.pstyle(me+"text-margin-x").pfValue,Ke=c.pstyle(me+"text-margin-y").pfValue,ht=c.isEdge(),rt=c.pstyle("text-halign").value,St=c.pstyle("text-valign").value;switch(ht&&(rt="center",St="center"),B+=$e,P+=Ke,0!==(Gt=m?this.getTextAngle(c,d):0)&&(f.translate(q=B,Q=P),f.rotate(Gt),B=0,P=0),St){case"top":break;case"center":P+=Pe/2;break;case"bottom":P+=Pe}var Wt=c.pstyle("text-background-opacity").value,Tt=c.pstyle("text-border-opacity").value,jt=c.pstyle("text-border-width").pfValue,Pt=c.pstyle("text-background-padding").pfValue;if(Wt>0||jt>0&&Tt>0){var Zt=B-Pt;switch(rt){case"left":Zt-=_e;break;case"center":Zt-=_e/2}var Kt=P-Pe-Pt,dt=_e+2*Pt,Qt=Pe+2*Pt;if(Wt>0){var Ht=f.fillStyle,xn=c.pstyle("text-background-color").value;f.fillStyle="rgba("+xn[0]+","+xn[1]+","+xn[2]+","+Wt*E+")";var sn=c.pstyle("text-background-shape").strValue;0===sn.indexOf("round")?F(f,Zt,Kt,dt,Qt,2):f.fillRect(Zt,Kt,dt,Qt),f.fillStyle=Ht}if(jt>0&&Tt>0){var vn=f.strokeStyle,Ln=f.lineWidth,Fn=c.pstyle("text-border-color").value,ri=c.pstyle("text-border-style").value;if(f.strokeStyle="rgba("+Fn[0]+","+Fn[1]+","+Fn[2]+","+Tt*E+")",f.lineWidth=jt,f.setLineDash)switch(ri){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"double":f.lineWidth=jt/4,f.setLineDash([]);break;case"solid":f.setLineDash([])}if(f.strokeRect(Zt,Kt,dt,Qt),"double"===ri){var Rn=jt/2;f.strokeRect(Zt+Rn,Kt+Rn,dt-2*Rn,Qt-2*Rn)}f.setLineDash&&f.setLineDash([]),f.lineWidth=Ln,f.strokeStyle=vn}}var ei=2*c.pstyle("text-outline-width").pfValue;if(ei>0&&(f.lineWidth=ei),"wrap"===c.pstyle("text-wrap").value){var di=ur(A,"labelWrapCachedLines",d),Ii=ur(A,"labelLineHeight",d),vi=_e/2,pi=this.getLabelJustification(c);switch("auto"===pi||("left"===rt?"left"===pi?B+=-_e:"center"===pi&&(B+=-vi):"center"===rt?"left"===pi?B+=-vi:"right"===pi&&(B+=vi):"right"===rt&&("center"===pi?B+=vi:"right"===pi&&(B+=_e))),St){case"top":case"center":case"bottom":P-=(di.length-1)*Ii}for(var kn=0;kn<di.length;kn++)ei>0&&f.strokeText(di[kn],B,P),f.fillText(di[kn],B,P),P+=Ii}else ei>0&&f.strokeText(fe,B,P),f.fillText(fe,B,P);0!==Gt&&(f.rotate(-Gt),f.translate(-q,-Q))}}};var H={drawNode:function(f,c,d){var E,B,m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],C=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],A=this,P=c._private,q=P.rscratch,Q=c.position();if(Be(Q.x)&&Be(Q.y)&&(!C||c.visible())){var _e,Ke,fe=C?c.effectiveOpacity():1,me=A.usePaths(),Pe=!1,$e=c.padding();E=c.width()+2*$e,B=c.height()+2*$e,d&&f.translate(-(Ke=d).x1,-Ke.y1);for(var ht=c.pstyle("background-image"),rt=ht.value,St=new Array(rt.length),Gt=new Array(rt.length),Wt=0,Tt=0;Tt<rt.length;Tt++){var jt=rt[Tt],Pt=St[Tt]=null!=jt&&"none"!==jt;if(Pt){var Zt=c.cy().style().getIndexedStyle(c,"background-image-crossorigin","value",Tt);Wt++,Gt[Tt]=A.getCachedImage(jt,Zt,function(){P.backgroundTimestamp=Date.now(),c.emitAndNotify("background")})}}var Kt=c.pstyle("background-blacken").value,dt=c.pstyle("border-width").pfValue,Qt=c.pstyle("background-opacity").value*fe,Ht=c.pstyle("border-color").value,xn=c.pstyle("border-style").value,sn=c.pstyle("border-opacity").value*fe;f.lineJoin="miter";var vn=function(){var br=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;A.eleFillStyle(f,c,br)},Ln=function(){var br=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;A.colorStrokeStyle(f,Ht[0],Ht[1],Ht[2],br)},Fn=c.pstyle("shape").strValue,ri=c.pstyle("shape-polygon-points").pfValue;if(me){f.translate(Q.x,Q.y);var Rn=A.nodePathCache=A.nodePathCache||[],ei=Mg("polygon"===Fn?Fn+","+ri.join(","):Fn,""+B,""+E),di=Rn[ei];null!=di?(Pe=!0,q.pathCache=_e=di):(_e=new Path2D,Rn[ei]=q.pathCache=_e)}var Ii=function(){if(!Pe){var br=Q;me&&(br={x:0,y:0}),A.nodeShapes[A.getNodeShape(c)].draw(_e||f,br.x,br.y,E,B)}me?f.fill(_e):f.fill()},vi=function(){for(var br=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,wr=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],es=P.backgrounding,zs=0,ts=0;ts<Gt.length;ts++){var $i=c.cy().style().getIndexedStyle(c,"background-image-containment","value",ts);wr&&"over"===$i||!wr&&"inside"===$i?zs++:St[ts]&&Gt[ts].complete&&!Gt[ts].error&&(zs++,A.drawInscribedImage(f,Gt[ts],c,ts,br))}P.backgrounding=zs!==Wt,es!==P.backgrounding&&c.updateStyle(!1)},pi=function(){var br=arguments.length>0&&void 0!==arguments[0]&&arguments[0],wr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe;A.hasPie(c)&&(A.drawPie(f,c,wr),br&&(me||A.nodeShapes[A.getNodeShape(c)].draw(f,Q.x,Q.y,E,B)))},kn=function(){var br=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,wr=(Kt>0?Kt:-Kt)*br,es=Kt>0?0:255;0!==Kt&&(A.colorFillStyle(f,es,es,es,wr),me?f.fill(_e):f.fill())},li=function(){if(dt>0){if(f.lineWidth=dt,f.lineCap="butt",f.setLineDash)switch(xn){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"solid":case"double":f.setLineDash([])}if(me?f.stroke(_e):f.stroke(),"double"===xn){f.lineWidth=dt/3;var br=f.globalCompositeOperation;f.globalCompositeOperation="destination-out",me?f.stroke(_e):f.stroke(),f.globalCompositeOperation=br}f.setLineDash&&f.setLineDash([])}},Ei=function(){_&&A.drawNodeOverlay(f,c,Q,E,B)},Qi=function(){_&&A.drawNodeUnderlay(f,c,Q,E,B)},lr=function(){A.drawElementText(f,c,null,m)},Wr="yes"===c.pstyle("ghost").value;if(Wr){var Jr=c.pstyle("ghost-offset-x").pfValue,mr=c.pstyle("ghost-offset-y").pfValue,or=c.pstyle("ghost-opacity").value,Zr=or*fe;f.translate(Jr,mr),vn(or*Qt),Ii(),vi(Zr,!0),Ln(or*sn),li(),pi(0!==Kt||0!==dt),vi(Zr,!1),kn(Zr),f.translate(-Jr,-mr)}me&&f.translate(-Q.x,-Q.y),Qi(),me&&f.translate(Q.x,Q.y),vn(),Ii(),vi(fe,!0),Ln(),li(),pi(0!==Kt||0!==dt),vi(fe,!1),kn(),me&&f.translate(-Q.x,-Q.y),lr(),Ei(),d&&f.translate(Ke.x1,Ke.y1)}}},le=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(d,m,_,C,A){if(m.visible()){var B=m.pstyle("".concat(c,"-padding")).pfValue,P=m.pstyle("".concat(c,"-opacity")).value,q=m.pstyle("".concat(c,"-color")).value,Q=m.pstyle("".concat(c,"-shape")).value;if(P>0){if(_=_||m.position(),null==C||null==A){var fe=m.padding();C=m.width()+2*fe,A=m.height()+2*fe}this.colorFillStyle(d,q[0],q[1],q[2],P),this.nodeShapes[Q].draw(d,_.x,_.y,C+2*B,A+2*B),d.fill()}}}};H.drawNodeOverlay=le("overlay"),H.drawNodeUnderlay=le("underlay"),H.hasPie=function(f){return(f=f[0])._private.hasPie},H.drawPie=function(f,c,d,m){c=c[0],m=m||c.position();var _=c.cy().style(),C=c.pstyle("pie-size"),A=m.x,E=m.y,B=c.width(),P=c.height(),q=Math.min(B,P)/2,Q=0;this.usePaths()&&(A=0,E=0),"%"===C.units?q*=C.pfValue:void 0!==C.pfValue&&(q=C.pfValue/2);for(var me=1;me<=_.pieBackgroundN;me++){var _e=c.pstyle("pie-"+me+"-background-size").value,Pe=c.pstyle("pie-"+me+"-background-color").value,$e=c.pstyle("pie-"+me+"-background-opacity").value*d,Ke=_e/100;Ke+Q>1&&(Ke=1-Q);var ht=1.5*Math.PI+2*Math.PI*Q,St=ht+2*Math.PI*Ke;0===_e||Q>=1||Q+Ke>1||(f.beginPath(),f.moveTo(A,E),f.arc(A,E,q,ht,St),f.closePath(),this.colorFillStyle(f,Pe[0],Pe[1],Pe[2],$e),f.fill(),Q+=Ke)}};for(var se={getPixelRatio:function(){var f=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(f.backingStorePixelRatio||f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1)},paintCache:function(f){for(var m,c=this.paintCaches=this.paintCaches||[],d=!0,_=0;_<c.length;_++)if((m=c[_]).context===f){d=!1;break}return d&&c.push(m={context:f}),m},createGradientStyleFor:function(f,c,d,m,_){var C,A=this.usePaths(),E=d.pstyle(c+"-gradient-stop-colors").value,B=d.pstyle(c+"-gradient-stop-positions").pfValue;if("radial-gradient"===m)if(d.isEdge()){var P=d.sourceEndpoint(),q=d.targetEndpoint(),Q=d.midpoint(),fe=so(P,Q),me=so(q,Q);C=f.createRadialGradient(Q.x,Q.y,0,Q.x,Q.y,Math.max(fe,me))}else{var _e=A?{x:0,y:0}:d.position(),Pe=d.paddedWidth(),$e=d.paddedHeight();C=f.createRadialGradient(_e.x,_e.y,0,_e.x,_e.y,Math.max(Pe,$e))}else if(d.isEdge()){var Ke=d.sourceEndpoint(),ht=d.targetEndpoint();C=f.createLinearGradient(Ke.x,Ke.y,ht.x,ht.y)}else{var rt=A?{x:0,y:0}:d.position(),Wt=d.paddedWidth()/2,Tt=d.paddedHeight()/2;switch(d.pstyle("background-gradient-direction").value){case"to-bottom":C=f.createLinearGradient(rt.x,rt.y-Tt,rt.x,rt.y+Tt);break;case"to-top":C=f.createLinearGradient(rt.x,rt.y+Tt,rt.x,rt.y-Tt);break;case"to-left":C=f.createLinearGradient(rt.x+Wt,rt.y,rt.x-Wt,rt.y);break;case"to-right":C=f.createLinearGradient(rt.x-Wt,rt.y,rt.x+Wt,rt.y);break;case"to-bottom-right":case"to-right-bottom":C=f.createLinearGradient(rt.x-Wt,rt.y-Tt,rt.x+Wt,rt.y+Tt);break;case"to-top-right":case"to-right-top":C=f.createLinearGradient(rt.x-Wt,rt.y+Tt,rt.x+Wt,rt.y-Tt);break;case"to-bottom-left":case"to-left-bottom":C=f.createLinearGradient(rt.x+Wt,rt.y-Tt,rt.x-Wt,rt.y+Tt);break;case"to-top-left":case"to-left-top":C=f.createLinearGradient(rt.x+Wt,rt.y+Tt,rt.x-Wt,rt.y-Tt)}}if(!C)return null;for(var Pt=B.length===E.length,Zt=E.length,Kt=0;Kt<Zt;Kt++)C.addColorStop(Pt?B[Kt]:Kt/(Zt-1),"rgba("+E[Kt][0]+","+E[Kt][1]+","+E[Kt][2]+","+_+")");return C},gradientFillStyle:function(f,c,d,m){var _=this.createGradientStyleFor(f,"background",c,d,m);if(!_)return null;f.fillStyle=_},colorFillStyle:function(f,c,d,m,_){f.fillStyle="rgba("+c+","+d+","+m+","+_+")"},eleFillStyle:function(f,c,d){var m=c.pstyle("background-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientFillStyle(f,c,m,d);else{var _=c.pstyle("background-color").value;this.colorFillStyle(f,_[0],_[1],_[2],d)}},gradientStrokeStyle:function(f,c,d,m){var _=this.createGradientStyleFor(f,"line",c,d,m);if(!_)return null;f.strokeStyle=_},colorStrokeStyle:function(f,c,d,m,_){f.strokeStyle="rgba("+c+","+d+","+m+","+_+")"},eleStrokeStyle:function(f,c,d){var m=c.pstyle("line-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientStrokeStyle(f,c,m,d);else{var _=c.pstyle("line-color").value;this.colorStrokeStyle(f,_[0],_[1],_[2],d)}},matchCanvasSize:function(f){var c=this,d=c.data,m=c.findContainerClientCoords(),_=m[2],C=m[3],A=c.getPixelRatio();(f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_NODE]||f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_DRAG])&&(A=c.motionBlurPxRatio);var q,B=_*A,P=C*A;if(B!==c.canvasWidth||P!==c.canvasHeight){c.fontCaches=null;var Q=d.canvasContainer;Q.style.width=_+"px",Q.style.height=C+"px";for(var fe=0;fe<c.CANVAS_LAYERS;fe++)(q=d.canvases[fe]).width=B,q.height=P,q.style.width=_+"px",q.style.height=C+"px";for(fe=0;fe<c.BUFFER_COUNT;fe++)(q=d.bufferCanvases[fe]).width=B,q.height=P,q.style.width=_+"px",q.style.height=C+"px";c.textureMult=1,A<=1&&(q=d.bufferCanvases[c.TEXTURE_BUFFER],c.textureMult=2,q.width=B*c.textureMult,q.height=P*c.textureMult),c.canvasWidth=B,c.canvasHeight=P}},renderTo:function(f,c,d,m){this.render({forcedContext:f,forcedZoom:c,forcedPan:d,drawAllLayers:!0,forcedPxRatio:m})},render:function(f){var c=(f=f||Ai()).forcedContext,d=f.drawAllLayers,m=f.drawOnlyNodeLayer,_=f.forcedZoom,C=f.forcedPan,A=this,E=void 0===f.forcedPxRatio?this.getPixelRatio():f.forcedPxRatio,B=A.cy,P=A.data,q=P.canvasNeedsRedraw,Q=A.textureOnViewport&&!c&&(A.pinching||A.hoverData.dragging||A.swipePanning||A.data.wheelZooming),fe=void 0!==f.motionBlur?f.motionBlur:A.motionBlur,me=A.motionBlurPxRatio,_e=B.hasCompoundNodes(),Pe=A.hoverData.draggingEles,Ke=fe=fe&&!c&&A.motionBlurEnabled&&!(A.hoverData.selecting||A.touchData.selecting);c||(A.prevPxRatio!==E&&(A.invalidateContainerClientCoordsCache(),A.matchCanvasSize(A.container),A.redrawHint("eles",!0),A.redrawHint("drag",!0)),A.prevPxRatio=E),!c&&A.motionBlurTimeout&&clearTimeout(A.motionBlurTimeout),fe&&(null==A.mbFrames&&(A.mbFrames=0),A.mbFrames++,A.mbFrames<3&&(Ke=!1),A.mbFrames>A.minMbLowQualFrames&&(A.motionBlurPxRatio=A.mbPxRBlurry)),A.clearingMotionBlur&&(A.motionBlurPxRatio=1),A.textureDrawLastFrame&&!Q&&(q[A.NODE]=!0,q[A.SELECT_BOX]=!0);var ht=B.style(),rt=B.zoom(),St=void 0!==_?_:rt,Gt=B.pan(),Wt={x:Gt.x,y:Gt.y},Tt={zoom:rt,pan:{x:Gt.x,y:Gt.y}},jt=A.prevViewport;!(void 0===jt||Tt.zoom!==jt.zoom||Tt.pan.x!==jt.pan.x||Tt.pan.y!==jt.pan.y)&&!(Pe&&!_e)&&(A.motionBlurPxRatio=1),C&&(Wt=C),St*=E,Wt.x*=E,Wt.y*=E;var Zt=A.getCachedZSortedEles();function Kt(mr,or,Zr,ki,br){var wr=mr.globalCompositeOperation;mr.globalCompositeOperation="destination-out",A.colorFillStyle(mr,255,255,255,A.motionBlurTransparency),mr.fillRect(or,Zr,ki,br),mr.globalCompositeOperation=wr}function dt(mr,or){var Zr,ki,br,wr;A.clearingMotionBlur||mr!==P.bufferContexts[A.MOTIONBLUR_BUFFER_NODE]&&mr!==P.bufferContexts[A.MOTIONBLUR_BUFFER_DRAG]?(Zr=Wt,ki=St,br=A.canvasWidth,wr=A.canvasHeight):(Zr={x:Gt.x*me,y:Gt.y*me},ki=rt*me,br=A.canvasWidth*me,wr=A.canvasHeight*me),mr.setTransform(1,0,0,1,0,0),"motionBlur"===or?Kt(mr,0,0,br,wr):!c&&(void 0===or||or)&&mr.clearRect(0,0,br,wr),d||(mr.translate(Zr.x,Zr.y),mr.scale(ki,ki)),C&&mr.translate(C.x,C.y),_&&mr.scale(_,_)}if(Q||(A.textureDrawLastFrame=!1),Q){if(A.textureDrawLastFrame=!0,!A.textureCache){A.textureCache={},A.textureCache.bb=B.mutableElements().boundingBox(),A.textureCache.texture=A.data.bufferCanvases[A.TEXTURE_BUFFER];var Qt=A.data.bufferContexts[A.TEXTURE_BUFFER];Qt.setTransform(1,0,0,1,0,0),Qt.clearRect(0,0,A.canvasWidth*A.textureMult,A.canvasHeight*A.textureMult),A.render({forcedContext:Qt,drawOnlyNodeLayer:!0,forcedPxRatio:E*A.textureMult}),(Tt=A.textureCache.viewport={zoom:B.zoom(),pan:B.pan(),width:A.canvasWidth,height:A.canvasHeight}).mpan={x:(0-Tt.pan.x)/Tt.zoom,y:(0-Tt.pan.y)/Tt.zoom}}q[A.DRAG]=!1,q[A.NODE]=!1;var xn=A.textureCache.texture;Tt=A.textureCache.viewport,(Ht=P.contexts[A.NODE]).setTransform(1,0,0,1,0,0),fe?Kt(Ht,0,0,Tt.width,Tt.height):Ht.clearRect(0,0,Tt.width,Tt.height);var sn=ht.core("outside-texture-bg-color").value,vn=ht.core("outside-texture-bg-opacity").value;A.colorFillStyle(Ht,sn[0],sn[1],sn[2],vn),Ht.fillRect(0,0,Tt.width,Tt.height),rt=B.zoom(),dt(Ht,!1),Ht.clearRect(Tt.mpan.x,Tt.mpan.y,Tt.width/Tt.zoom/E,Tt.height/Tt.zoom/E),Ht.drawImage(xn,Tt.mpan.x,Tt.mpan.y,Tt.width/Tt.zoom/E,Tt.height/Tt.zoom/E)}else A.textureOnViewport&&!c&&(A.textureCache=null);var Ln=B.extent(),Fn=A.pinching||A.hoverData.dragging||A.swipePanning||A.data.wheelZooming||A.hoverData.draggingEles||A.cy.animated(),ri=A.hideEdgesOnViewport&&Fn,Rn=[];if(Rn[A.NODE]=!q[A.NODE]&&fe&&!A.clearedForMotionBlur[A.NODE]||A.clearingMotionBlur,Rn[A.NODE]&&(A.clearedForMotionBlur[A.NODE]=!0),Rn[A.DRAG]=!q[A.DRAG]&&fe&&!A.clearedForMotionBlur[A.DRAG]||A.clearingMotionBlur,Rn[A.DRAG]&&(A.clearedForMotionBlur[A.DRAG]=!0),q[A.NODE]||d||m||Rn[A.NODE]){var ei=fe&&!Rn[A.NODE]&&1!==me;dt(Ht=c||(ei?A.data.bufferContexts[A.MOTIONBLUR_BUFFER_NODE]:P.contexts[A.NODE]),fe&&!ei?"motionBlur":void 0),ri?A.drawCachedNodes(Ht,Zt.nondrag,E,Ln):A.drawLayeredElements(Ht,Zt.nondrag,E,Ln),A.debug&&A.drawDebugPoints(Ht,Zt.nondrag),!d&&!fe&&(q[A.NODE]=!1)}if(!m&&(q[A.DRAG]||d||Rn[A.DRAG])&&(ei=fe&&!Rn[A.DRAG]&&1!==me,dt(Ht=c||(ei?A.data.bufferContexts[A.MOTIONBLUR_BUFFER_DRAG]:P.contexts[A.DRAG]),fe&&!ei?"motionBlur":void 0),ri?A.drawCachedNodes(Ht,Zt.drag,E,Ln):A.drawCachedElements(Ht,Zt.drag,E,Ln),A.debug&&A.drawDebugPoints(Ht,Zt.drag),!d&&!fe&&(q[A.DRAG]=!1)),A.showFps||!m&&q[A.SELECT_BOX]&&!d){var Ht;if(dt(Ht=c||P.contexts[A.SELECT_BOX]),1==A.selection[4]&&(A.hoverData.selecting||A.touchData.selecting)){rt=A.cy.zoom();var Ii=ht.core("selection-box-border-width").value/rt;Ht.lineWidth=Ii,Ht.fillStyle="rgba("+ht.core("selection-box-color").value[0]+","+ht.core("selection-box-color").value[1]+","+ht.core("selection-box-color").value[2]+","+ht.core("selection-box-opacity").value+")",Ht.fillRect(A.selection[0],A.selection[1],A.selection[2]-A.selection[0],A.selection[3]-A.selection[1]),Ii>0&&(Ht.strokeStyle="rgba("+ht.core("selection-box-border-color").value[0]+","+ht.core("selection-box-border-color").value[1]+","+ht.core("selection-box-border-color").value[2]+","+ht.core("selection-box-opacity").value+")",Ht.strokeRect(A.selection[0],A.selection[1],A.selection[2]-A.selection[0],A.selection[3]-A.selection[1]))}if(P.bgActivePosistion&&!A.hoverData.selecting){rt=A.cy.zoom();var vi=P.bgActivePosistion;Ht.fillStyle="rgba("+ht.core("active-bg-color").value[0]+","+ht.core("active-bg-color").value[1]+","+ht.core("active-bg-color").value[2]+","+ht.core("active-bg-opacity").value+")",Ht.beginPath(),Ht.arc(vi.x,vi.y,ht.core("active-bg-size").pfValue/rt,0,2*Math.PI),Ht.fill()}var pi=A.lastRedrawTime;if(A.showFps&&pi){pi=Math.round(pi);var kn=Math.round(1e3/pi);Ht.setTransform(1,0,0,1,0,0),Ht.fillStyle="rgba(255, 0, 0, 0.75)",Ht.strokeStyle="rgba(255, 0, 0, 0.75)",Ht.lineWidth=1,Ht.fillText("1 frame = "+pi+" ms = "+kn+" fps",0,20),Ht.strokeRect(0,30,250,20),Ht.fillRect(0,30,250*Math.min(kn/60,1),20)}d||(q[A.SELECT_BOX]=!1)}if(fe&&1!==me){var lr=P.contexts[A.DRAG],Wr=A.data.bufferCanvases[A.MOTIONBLUR_BUFFER_DRAG],Jr=function(or,Zr,ki){or.setTransform(1,0,0,1,0,0),ki||!Ke?or.clearRect(0,0,A.canvasWidth,A.canvasHeight):Kt(or,0,0,A.canvasWidth,A.canvasHeight),or.drawImage(Zr,0,0,A.canvasWidth*me,A.canvasHeight*me,0,0,A.canvasWidth,A.canvasHeight)};(q[A.NODE]||Rn[A.NODE])&&(Jr(P.contexts[A.NODE],A.data.bufferCanvases[A.MOTIONBLUR_BUFFER_NODE],Rn[A.NODE]),q[A.NODE]=!1),(q[A.DRAG]||Rn[A.DRAG])&&(Jr(lr,Wr,Rn[A.DRAG]),q[A.DRAG]=!1)}A.prevViewport=Tt,A.clearingMotionBlur&&(A.clearingMotionBlur=!1,A.motionBlurCleared=!0,A.motionBlur=!0),fe&&(A.motionBlurTimeout=setTimeout(function(){A.motionBlurTimeout=null,A.clearedForMotionBlur[A.NODE]=!1,A.clearedForMotionBlur[A.DRAG]=!1,A.motionBlur=!1,A.clearingMotionBlur=!Q,A.mbFrames=0,q[A.NODE]=!0,q[A.DRAG]=!0,A.redraw()},100)),c||B.emit("render")}},we={drawPolygonPath:function(f,c,d,m,_,C){var A=m/2,E=_/2;f.beginPath&&f.beginPath(),f.moveTo(c+A*C[0],d+E*C[1]);for(var B=1;B<C.length/2;B++)f.lineTo(c+A*C[2*B],d+E*C[2*B+1]);f.closePath()},drawRoundPolygonPath:function(f,c,d,m,_,C){var A=m/2,E=_/2,B=Or(m,_);f.beginPath&&f.beginPath();for(var P=0;P<C.length/4;P++){var Q,q;q=0===P?C.length-2:4*P-2,Q=4*P+2;var fe=c+A*C[4*P],me=d+E*C[4*P+1],Pe=B/Math.tan(Math.acos(-C[q]*C[Q]-C[q+1]*C[Q+1])/2),$e=fe-Pe*C[q],Ke=me-Pe*C[q+1],ht=fe+Pe*C[Q],rt=me+Pe*C[Q+1];0===P?f.moveTo($e,Ke):f.lineTo($e,Ke),f.arcTo(fe,me,ht,rt,B)}f.closePath()},drawRoundRectanglePath:function(f,c,d,m,_){var C=m/2,A=_/2,E=vf(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,d-A),f.arcTo(c+C,d-A,c+C,d,E),f.arcTo(c+C,d+A,c,d+A,E),f.arcTo(c-C,d+A,c-C,d,E),f.arcTo(c-C,d-A,c,d-A,E),f.lineTo(c,d-A),f.closePath()},drawBottomRoundRectanglePath:function(f,c,d,m,_){var C=m/2,A=_/2,E=vf(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,d-A),f.lineTo(c+C,d-A),f.lineTo(c+C,d),f.arcTo(c+C,d+A,c,d+A,E),f.arcTo(c-C,d+A,c-C,d,E),f.lineTo(c-C,d-A),f.lineTo(c,d-A),f.closePath()},drawCutRectanglePath:function(f,c,d,m,_){var C=m/2,A=_/2;f.beginPath&&f.beginPath(),f.moveTo(c-C+8,d-A),f.lineTo(c+C-8,d-A),f.lineTo(c+C,d-A+8),f.lineTo(c+C,d+A-8),f.lineTo(c+C-8,d+A),f.lineTo(c-C+8,d+A),f.lineTo(c-C,d+A-8),f.lineTo(c-C,d-A+8),f.closePath()},drawBarrelPath:function(f,c,d,m,_){var C=m/2,A=_/2,E=c-C,B=c+C,P=d-A,q=d+A,Q=Yr(m,_),fe=Q.widthOffset,me=Q.heightOffset,_e=Q.ctrlPtOffsetPct*fe;f.beginPath&&f.beginPath(),f.moveTo(E,P+me),f.lineTo(E,q-me),f.quadraticCurveTo(E+_e,q,E+fe,q),f.lineTo(B-fe,q),f.quadraticCurveTo(B-_e,q,B,q-me),f.lineTo(B,P+me),f.quadraticCurveTo(B-_e,P,B-fe,P),f.lineTo(E+fe,P),f.quadraticCurveTo(E+_e,P,E,P+me),f.closePath()}},Ue=Math.sin(0),We=Math.cos(0),je={},pt={},ft=Math.PI/40,ut=0*Math.PI;ut<2*Math.PI;ut+=ft)je[ut]=Math.sin(ut),pt[ut]=Math.cos(ut);we.drawEllipsePath=function(f,c,d,m,_){if(f.beginPath&&f.beginPath(),f.ellipse)f.ellipse(c,d,m/2,_/2,0,0,2*Math.PI);else for(var C,A,E=m/2,B=_/2,P=0*Math.PI;P<2*Math.PI;P+=ft)C=c-E*je[P]*Ue+E*pt[P]*We,A=d+B*pt[P]*Ue+B*je[P]*We,0===P?f.moveTo(C,A):f.lineTo(C,A);f.closePath()};var Et={};function nn(f){var c=f.indexOf(",");return f.substr(c+1)}function qt(f,c,d){var m=function(){return c.toDataURL(d,f.quality)};switch(f.output){case"blob-promise":return new sa(function(_,C){try{c.toBlob(function(A){null!=A?_(A):C(new Error("`canvas.toBlob()` sent a null value in its callback"))},d,f.quality)}catch(A){C(A)}});case"blob":return function Mt(f,c){for(var d=atob(f),m=new ArrayBuffer(d.length),_=new Uint8Array(m),C=0;C<d.length;C++)_[C]=d.charCodeAt(C);return new Blob([m],{type:c})}(nn(m()),d);case"base64":return nn(m());default:return m()}}Et.createBuffer=function(f,c){var d=document.createElement("canvas");return d.width=f,d.height=c,[d,d.getContext("2d")]},Et.bufferCanvasImage=function(f){var c=this.cy,m=c.mutableElements().boundingBox(),_=this.findContainerClientCoords(),C=f.full?Math.ceil(m.w):_[2],A=f.full?Math.ceil(m.h):_[3],E=Be(f.maxWidth)||Be(f.maxHeight),B=this.getPixelRatio(),P=1;if(void 0!==f.scale)C*=f.scale,A*=f.scale,P=f.scale;else if(E){var q=1/0,Q=1/0;Be(f.maxWidth)&&(q=P*f.maxWidth/C),Be(f.maxHeight)&&(Q=P*f.maxHeight/A),C*=P=Math.min(q,Q),A*=P}E||(C*=B,A*=B,P*=B);var fe=document.createElement("canvas");fe.width=C,fe.height=A,fe.style.width=C+"px",fe.style.height=A+"px";var me=fe.getContext("2d");if(C>0&&A>0){me.clearRect(0,0,C,A),me.globalCompositeOperation="source-over";var _e=this.getCachedZSortedEles();if(f.full)me.translate(-m.x1*P,-m.y1*P),me.scale(P,P),this.drawElements(me,_e),me.scale(1/P,1/P),me.translate(m.x1*P,m.y1*P);else{var Pe=c.pan(),$e={x:Pe.x*P,y:Pe.y*P};P*=c.zoom(),me.translate($e.x,$e.y),me.scale(P,P),this.drawElements(me,_e),me.scale(1/P,1/P),me.translate(-$e.x,-$e.y)}f.bg&&(me.globalCompositeOperation="destination-over",me.fillStyle=f.bg,me.rect(0,0,C,A),me.fill())}return fe},Et.png=function(f){return qt(f,this.bufferCanvasImage(f),"image/png")},Et.jpg=function(f){return qt(f,this.bufferCanvasImage(f),"image/jpeg")};var fn=bn,an=bn.prototype;function bn(f){var c=this;c.data={canvases:new Array(an.CANVAS_LAYERS),contexts:new Array(an.CANVAS_LAYERS),canvasNeedsRedraw:new Array(an.CANVAS_LAYERS),bufferCanvases:new Array(an.BUFFER_COUNT),bufferContexts:new Array(an.CANVAS_LAYERS)};var d="-webkit-tap-highlight-color",m="rgba(0,0,0,0)";c.data.canvasContainer=document.createElement("div");var _=c.data.canvasContainer.style;c.data.canvasContainer.style[d]=m,_.position="relative",_.zIndex="0",_.overflow="hidden";var C=f.cy.container();C.appendChild(c.data.canvasContainer),C.style[d]=m;var A={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Ne&&Ne.userAgent.match(/msie|trident|edge/i)&&(A["-ms-touch-action"]="none",A["touch-action"]="none");for(var E=0;E<an.CANVAS_LAYERS;E++){var B=c.data.canvases[E]=document.createElement("canvas");c.data.contexts[E]=B.getContext("2d"),Object.keys(A).forEach(function(pi){B.style[pi]=A[pi]}),B.style.position="absolute",B.setAttribute("data-id","layer"+E),B.style.zIndex=String(an.CANVAS_LAYERS-E),c.data.canvasContainer.appendChild(B),c.data.canvasNeedsRedraw[E]=!1}for(c.data.topCanvas=c.data.canvases[0],c.data.canvases[an.NODE].setAttribute("data-id","layer"+an.NODE+"-node"),c.data.canvases[an.SELECT_BOX].setAttribute("data-id","layer"+an.SELECT_BOX+"-selectbox"),c.data.canvases[an.DRAG].setAttribute("data-id","layer"+an.DRAG+"-drag"),E=0;E<an.BUFFER_COUNT;E++)c.data.bufferCanvases[E]=document.createElement("canvas"),c.data.bufferContexts[E]=c.data.bufferCanvases[E].getContext("2d"),c.data.bufferCanvases[E].style.position="absolute",c.data.bufferCanvases[E].setAttribute("data-id","buffer"+E),c.data.bufferCanvases[E].style.zIndex=String(-E-1),c.data.bufferCanvases[E].style.visibility="hidden";c.pathsEnabled=!0;var P=Mc(),Q=function(kn){return{x:-kn.w/2,y:-kn.h/2}},Gt=function(kn){return kn.boundingBox(),kn[0]._private.bodyBounds},Wt=function(kn){return kn.boundingBox(),kn[0]._private.labelBounds.main||P},Tt=function(kn){return kn.boundingBox(),kn[0]._private.labelBounds.source||P},jt=function(kn){return kn.boundingBox(),kn[0]._private.labelBounds.target||P},Pt=function(kn,li){return li},Kt=function(kn,li,Ei){var Qi=kn?kn+"-":"";return{x:li.x+Ei.pstyle(Qi+"text-margin-x").pfValue,y:li.y+Ei.pstyle(Qi+"text-margin-y").pfValue}},dt=function(kn,li,Ei){var Qi=kn[0]._private.rscratch;return{x:Qi[li],y:Qi[Ei]}},ri=c.data.eleTxrCache=new bp(c,{getKey:function(kn){return kn[0]._private.nodeKey},doesEleInvalidateKey:function(kn){var li=kn[0]._private;return!(li.oldBackgroundTimestamp===li.backgroundTimestamp)},drawElement:function(kn,li,Ei,Qi,lr){return c.drawElement(kn,li,Ei,!1,!1,lr)},getBoundingBox:Gt,getRotationPoint:function(kn){return function(kn){return{x:(kn.x1+kn.x2)/2,y:(kn.y1+kn.y2)/2}}(Gt(kn))},getRotationOffset:function(kn){return Q(Gt(kn))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),Rn=c.data.lblTxrCache=new bp(c,{getKey:function(kn){return kn[0]._private.labelStyleKey},drawElement:function(kn,li,Ei,Qi,lr){return c.drawElementText(kn,li,Ei,Qi,"main",lr)},getBoundingBox:Wt,getRotationPoint:function(kn){return Kt("",dt(kn,"labelX","labelY"),kn)},getRotationOffset:function(kn){var li=Wt(kn),Ei=Q(Wt(kn));if(kn.isNode()){switch(kn.pstyle("text-halign").value){case"left":Ei.x=-li.w;break;case"right":Ei.x=0}switch(kn.pstyle("text-valign").value){case"top":Ei.y=-li.h;break;case"bottom":Ei.y=0}}return Ei},isVisible:Pt}),ei=c.data.slbTxrCache=new bp(c,{getKey:function(kn){return kn[0]._private.sourceLabelStyleKey},drawElement:function(kn,li,Ei,Qi,lr){return c.drawElementText(kn,li,Ei,Qi,"source",lr)},getBoundingBox:Tt,getRotationPoint:function(kn){return Kt("source",dt(kn,"sourceLabelX","sourceLabelY"),kn)},getRotationOffset:function(kn){return Q(Tt(kn))},isVisible:Pt}),di=c.data.tlbTxrCache=new bp(c,{getKey:function(kn){return kn[0]._private.targetLabelStyleKey},drawElement:function(kn,li,Ei,Qi,lr){return c.drawElementText(kn,li,Ei,Qi,"target",lr)},getBoundingBox:jt,getRotationPoint:function(kn){return Kt("target",dt(kn,"targetLabelX","targetLabelY"),kn)},getRotationOffset:function(kn){return Q(jt(kn))},isVisible:Pt}),Ii=c.data.lyrTxrCache=new pa(c);c.onUpdateEleCalcs(function(kn,li){ri.invalidateElements(li),Rn.invalidateElements(li),ei.invalidateElements(li),di.invalidateElements(li),Ii.invalidateElements(li);for(var Ei=0;Ei<li.length;Ei++){var Qi=li[Ei]._private;Qi.oldBackgroundTimestamp=Qi.backgroundTimestamp}});var vi=function(kn){for(var li=0;li<kn.length;li++)Ii.enqueueElementRefinement(kn[li].ele)};ri.onDequeue(vi),Rn.onDequeue(vi),ei.onDequeue(vi),di.onDequeue(vi)}an.CANVAS_LAYERS=3,an.SELECT_BOX=0,an.DRAG=1,an.NODE=2,an.BUFFER_COUNT=3,an.TEXTURE_BUFFER=0,an.MOTIONBLUR_BUFFER_NODE=1,an.MOTIONBLUR_BUFFER_DRAG=2,an.redrawHint=function(f,c){var d=this;switch(f){case"eles":d.data.canvasNeedsRedraw[an.NODE]=c;break;case"drag":d.data.canvasNeedsRedraw[an.DRAG]=c;break;case"select":d.data.canvasNeedsRedraw[an.SELECT_BOX]=c}};var Nn=typeof Path2D<"u";an.path2dEnabled=function(f){if(void 0===f)return this.pathsEnabled;this.pathsEnabled=!!f},an.usePaths=function(){return Nn&&this.pathsEnabled},an.setImgSmoothing=function(f,c){null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled=c:(f.webkitImageSmoothingEnabled=c,f.mozImageSmoothingEnabled=c,f.msImageSmoothingEnabled=c)},an.getImgSmoothing=function(f){return null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled:f.webkitImageSmoothingEnabled||f.mozImageSmoothingEnabled||f.msImageSmoothingEnabled},an.makeOffscreenCanvas=function(f,c){var d;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":ie(OffscreenCanvas))?d=new OffscreenCanvas(f,c):((d=document.createElement("canvas")).width=f,d.height=c),d},[Vv,tf,g,x,D,H,se,we,Et,{nodeShapeImpl:function(f,c,d,m,_,C,A){switch(f){case"ellipse":return this.drawEllipsePath(c,d,m,_,C);case"polygon":return this.drawPolygonPath(c,d,m,_,C,A);case"round-polygon":return this.drawRoundPolygonPath(c,d,m,_,C,A);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(c,d,m,_,C);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(c,d,m,_,C);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(c,d,m,_,C);case"barrel":return this.drawBarrelPath(c,d,m,_,C)}}}].forEach(function(f){tr(an,f)});var fi=[{type:"layout",extensions:tm},{type:"renderer",extensions:[{name:"null",impl:Qd},{name:"base",impl:nm},{name:"canvas",impl:fn}]}],Jt={},tn={};function Kn(f,c,d){var m=d,_=function(jt){ge("Can not register `"+c+"` for `"+f+"` since `"+jt+"` already exists in the prototype and can not be overridden")};if("core"===f){if(gc.prototype[c])return _(c);gc.prototype[c]=d}else if("collection"===f){if(ca.prototype[c])return _(c);ca.prototype[c]=d}else if("layout"===f){for(var C=function(jt){this.options=jt,d.call(this,jt),yt(this._private)||(this._private={}),this._private.cy=jt.cy,this._private.listeners=[],this.createEmitter()},A=C.prototype=Object.create(d.prototype),E=[],B=0;B<E.length;B++){var P=E[B];A[P]=A[P]||function(){return this}}A.start&&!A.run?A.run=function(){return this.start(),this}:!A.start&&A.run&&(A.start=function(){return this.run(),this});var q=d.prototype.stop;A.stop=function(){var Tt=this.options;if(Tt&&Tt.animate){var jt=this.animations;if(jt)for(var Pt=0;Pt<jt.length;Pt++)jt[Pt].stop()}return q?q.call(this):this.emit("layoutstop"),this},A.destroy||(A.destroy=function(){return this}),A.cy=function(){return this._private.cy};var Q=function(jt){return jt._private.cy},fe={addEventFields:function(jt,Pt){Pt.layout=jt,Pt.cy=Q(jt),Pt.target=jt},bubble:function(){return!0},parent:function(jt){return Q(jt)}};tr(A,{createEmitter:function(){return this._private.emitter=new mu(fe,this),this},emitter:function(){return this._private.emitter},on:function(jt,Pt){return this.emitter().on(jt,Pt),this},one:function(jt,Pt){return this.emitter().one(jt,Pt),this},once:function(jt,Pt){return this.emitter().one(jt,Pt),this},removeListener:function(jt,Pt){return this.emitter().removeListener(jt,Pt),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(jt,Pt){return this.emitter().emit(jt,Pt),this}}),Cs.eventAliasesOn(A),m=C}else if("renderer"===f&&"null"!==c&&"base"!==c){var me=si("renderer","base"),_e=me.prototype,Pe=d,$e=d.prototype,Ke=function(){me.apply(this,arguments),Pe.apply(this,arguments)},ht=Ke.prototype;for(var rt in _e){var St=_e[rt];if(null!=$e[rt])return _(rt);ht[rt]=St}for(var Wt in $e)ht[Wt]=$e[Wt];_e.clientFunctions.forEach(function(Tt){ht[Tt]=ht[Tt]||function(){mt("Renderer does not implement `renderer."+Tt+"()` on its prototype")}}),m=Ke}else if("__proto__"===f||"constructor"===f||"prototype"===f)return mt(f+" is an illegal type to be registered, possibly lead to prototype pollutions");return uc({map:Jt,keys:[f,c],value:m})}function si(f,c){return Sh({map:Jt,keys:[f,c]})}function Di(f,c,d,m,_){return uc({map:tn,keys:[f,c,d,m],value:_})}function xi(f,c,d,m){return Sh({map:tn,keys:[f,c,d,m]})}var mi=function(){return 2===arguments.length?si.apply(null,arguments):3===arguments.length?Kn.apply(null,arguments):4===arguments.length?xi.apply(null,arguments):5===arguments.length?Di.apply(null,arguments):void mt("Invalid extension access syntax")};gc.prototype.extension=mi,fi.forEach(function(f){f.extensions.forEach(function(c){Kn(f.type,c.name,c.impl)})});var ar=function f(){if(!(this instanceof f))return new f;this.length=0},Hi=ar.prototype;Hi.instanceString=function(){return"stylesheet"},Hi.selector=function(f){return this[this.length++]={selector:f,properties:[]},this},Hi.css=function(f,c){var d=this.length-1;if(ke(f))this[d].properties.push({name:f,value:c});else if(yt(f))for(var m=f,_=Object.keys(m),C=0;C<_.length;C++){var A=_[C],E=m[A];if(null!=E){var B=tc.properties[A]||tc.properties[ln(A)];null!=B&&this[d].properties.push({name:B.name,value:E})}}return this},Hi.style=Hi.css,Hi.generateStyle=function(f){var c=new tc(f);return this.appendToStyle(c)},Hi.appendToStyle=function(f){for(var c=0;c<this.length;c++){var d=this[c],_=d.properties;f.selector(d.selector);for(var C=0;C<_.length;C++){var A=_[C];f.css(A.name,A.value)}}return f};var qn=function(c){return void 0===c&&(c={}),yt(c)?new gc(c):ke(c)?mi.apply(mi,arguments):void 0};qn.use=function(f){var c=Array.prototype.slice.call(arguments,1);return c.unshift(qn),f.apply(null,c),this},qn.warnings=function(f){return ct(f)},qn.version="3.22.1",qn.stylesheet=qn.Stylesheet=ar,He.exports=qn},31:(He,be,z)=>{var X;!function(M){var U=Object.hasOwnProperty,O=Array.isArray?Array.isArray:function(lt){return"[object Array]"===Object.prototype.toString.call(lt)},L="object"==typeof process&&"function"==typeof process.nextTick,R="function"==typeof Symbol,j="object"==typeof Reflect,Z="function"==typeof setImmediate?setImmediate:setTimeout,te=R?j&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(Be){var lt=Object.getOwnPropertyNames(Be);return lt.push.apply(lt,Object.getOwnPropertySymbols(Be)),lt}:Object.keys;function ie(){this._events={},this._conf&&Y.call(this,this._conf)}function Y(Be){Be&&(this._conf=Be,Be.delimiter&&(this.delimiter=Be.delimiter),Be.maxListeners!==M&&(this._maxListeners=Be.maxListeners),Be.wildcard&&(this.wildcard=Be.wildcard),Be.newListener&&(this._newListener=Be.newListener),Be.removeListener&&(this._removeListener=Be.removeListener),Be.verboseMemoryLeak&&(this.verboseMemoryLeak=Be.verboseMemoryLeak),Be.ignoreErrors&&(this.ignoreErrors=Be.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function G(Be,lt){var Ve="(node) warning: possible EventEmitter memory leak detected. "+Be+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(Ve+=" Event name: "+lt+"."),typeof process<"u"&&process.emitWarning){var Ge=new Error(Ve);Ge.name="MaxListenersExceededWarning",Ge.emitter=this,Ge.count=Be,process.emitWarning(Ge)}else console.error(Ve),console.trace&&console.trace()}var oe=function(Be,lt,Ve){var Ge=arguments.length;switch(Ge){case 0:return[];case 1:return[Be];case 2:return[Be,lt];case 3:return[Be,lt,Ve];default:for(var bt=new Array(Ge);Ge--;)bt[Ge]=arguments[Ge];return bt}};function ye(Be,lt){for(var Ve={},bt=Be.length,wt=lt?lt.length:0,st=0;st<bt;st++)Ve[Be[st]]=st<wt?lt[st]:M;return Ve}function Ie(Be,lt,Ve){var Ge,bt;if(this._emitter=Be,this._target=lt,this._listeners={},this._listenersCount=0,(Ve.on||Ve.off)&&(Ge=Ve.on,bt=Ve.off),lt.addEventListener?(Ge=lt.addEventListener,bt=lt.removeEventListener):lt.addListener?(Ge=lt.addListener,bt=lt.removeListener):lt.on&&(Ge=lt.on,bt=lt.off),!Ge&&!bt)throw Error("target does not implement any known event API");if("function"!=typeof Ge)throw TypeError("on method must be a function");if("function"!=typeof bt)throw TypeError("off method must be a function");this._on=Ge,this._off=bt;var wt=Be._observers;wt?wt.push(this):Be._observers=[this]}function ne(Be,lt,Ve,Ge){var bt=Object.assign({},lt);if(!Be)return bt;if("object"!=typeof Be)throw TypeError("options must be an object");var gt,Me,ce,wt=Object.keys(Be),st=wt.length;function At(Tn){throw Error('Invalid "'+gt+'" option value'+(Tn?". Reason: "+Tn:""))}for(var Ft=0;Ft<st;Ft++){if(gt=wt[Ft],!Ge&&!U.call(lt,gt))throw Error('Unknown "'+gt+'" option');(Me=Be[gt])!==M&&(bt[gt]=(ce=Ve[gt])?ce(Me,At):Me)}return bt}function ae(Be,lt){return("function"!=typeof Be||!Be.hasOwnProperty("prototype"))&&lt("value must be a constructor"),Be}function N(Be){var lt="value must be type of "+Be.join("|"),Ve=Be.length,Ge=Be[0],bt=Be[1];return 1===Ve?function(wt,st){if(typeof wt===Ge)return wt;st(lt)}:2===Ve?function(wt,st){var gt=typeof wt;if(gt===Ge||gt===bt)return wt;st(lt)}:function(wt,st){for(var gt=typeof wt,Me=Ve;Me-- >0;)if(gt===Be[Me])return wt;st(lt)}}Object.assign(Ie.prototype,{subscribe:function(Be,lt,Ve){var Ge=this,bt=this._target,wt=this._emitter,st=this._listeners,gt=function(){var Me=oe.apply(null,arguments),ce={data:Me,name:lt,original:Be};if(Ve){var At=Ve.call(bt,ce);!1!==At&&wt.emit.apply(wt,[ce.name].concat(Me))}else wt.emit.apply(wt,[lt].concat(Me))};if(st[Be])throw Error("Event '"+Be+"' is already listening");this._listenersCount++,wt._newListener&&wt._removeListener&&!Ge._onNewListener?(this._onNewListener=function(Me){Me===lt&&null===st[Be]&&(st[Be]=gt,Ge._on.call(bt,Be,gt))},wt.on("newListener",this._onNewListener),this._onRemoveListener=function(Me){Me===lt&&!wt.hasListeners(Me)&&st[Be]&&(st[Be]=null,Ge._off.call(bt,Be,gt))},st[Be]=null,wt.on("removeListener",this._onRemoveListener)):(st[Be]=gt,Ge._on.call(bt,Be,gt))},unsubscribe:function(Be){var bt,wt,Me,lt=this,Ve=this._listeners,Ge=this._emitter,st=this._off,gt=this._target;if(Be&&"string"!=typeof Be)throw TypeError("event must be a string");function ce(){lt._onNewListener&&(Ge.off("newListener",lt._onNewListener),Ge.off("removeListener",lt._onRemoveListener),lt._onNewListener=null,lt._onRemoveListener=null);var At=Ne.call(Ge,lt);Ge._observers.splice(At,1)}if(Be){if(!(bt=Ve[Be]))return;st.call(gt,Be,bt),delete Ve[Be],--this._listenersCount||ce()}else{for(Me=(wt=te(Ve)).length;Me-- >0;)st.call(gt,Be=wt[Me],Ve[Be]);this._listeners={},this._listenersCount=0,ce()}}});var $=N(["function"]),re=N(["object","function"]);function pe(Be,lt,Ve){var Ge,bt,st,wt=0,gt=new Be(function(Me,ce,At){function Ft(){bt&&(bt=null),wt&&(clearTimeout(wt),wt=0)}Ve=ne(Ve,{timeout:0,overload:!1},{timeout:function(Dt,kt){return("number"!=typeof(Dt*=1)||Dt<0||!Number.isFinite(Dt))&&kt("timeout must be a positive number"),Dt}});var Tn=function(Dt){Ft(),Me(Dt)},$n=function(Dt){Ft(),ce(Dt)};(Ge=!Ve.overload&&"function"==typeof Be.prototype.cancel&&"function"==typeof At)?lt(Tn,$n,At):(bt=[function(Dt){$n(Dt||Error("canceled"))}],lt(Tn,$n,function(Dt){if(st)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof Dt)throw TypeError("onCancel callback must be a function");bt.push(Dt)}),st=!0),Ve.timeout>0&&(wt=setTimeout(function(){var Dt=Error("timeout");Dt.code="ETIMEDOUT",wt=0,gt.cancel(Dt),ce(Dt)},Ve.timeout))});return Ge||(gt.cancel=function(Me){if(bt){for(var ce=bt.length,At=1;At<ce;At++)bt[At](Me);bt[0](Me),bt=null}}),gt}function Ne(Be){var lt=this._observers;if(!lt)return-1;for(var Ve=lt.length,Ge=0;Ge<Ve;Ge++)if(lt[Ge]._target===Be)return Ge;return-1}function Ee(Be,lt,Ve,Ge,bt){if(!Ve)return null;if(0===Ge){var wt=typeof lt;if("string"===wt){var st,gt,Me=0,ce=0,At=this.delimiter,Ft=At.length;if(-1!==(gt=lt.indexOf(At))){st=new Array(5);do{st[Me++]=lt.slice(ce,gt),ce=gt+Ft}while(-1!==(gt=lt.indexOf(At,ce)));st[Me++]=lt.slice(ce),lt=st,bt=Me}else lt=[lt],bt=1}else"object"===wt?bt=lt.length:(lt=[lt],bt=1)}var $n,Dt,kt,ln,Ye,xt,un,Tn=null,De=lt[Ge],ze=lt[Ge+1];if(Ge===bt)Ve._listeners&&("function"==typeof Ve._listeners?(Be&&Be.push(Ve._listeners),Tn=[Ve]):(Be&&Be.push.apply(Be,Ve._listeners),Tn=[Ve]));else{if("*"===De){for(gt=(xt=te(Ve)).length;gt-- >0;)"_listeners"!==($n=xt[gt])&&(un=Ee(Be,lt,Ve[$n],Ge+1,bt))&&(Tn?Tn.push.apply(Tn,un):Tn=un);return Tn}if("**"===De){for((Ye=Ge+1===bt||Ge+2===bt&&"*"===ze)&&Ve._listeners&&(Tn=Ee(Be,lt,Ve,bt,bt)),gt=(xt=te(Ve)).length;gt-- >0;)"_listeners"!==($n=xt[gt])&&("*"===$n||"**"===$n?(Ve[$n]._listeners&&!Ye&&(un=Ee(Be,lt,Ve[$n],bt,bt))&&(Tn?Tn.push.apply(Tn,un):Tn=un),un=Ee(Be,lt,Ve[$n],Ge,bt)):un=Ee(Be,lt,Ve[$n],$n===ze?Ge+2:Ge,bt),un&&(Tn?Tn.push.apply(Tn,un):Tn=un));return Tn}Ve[De]&&(Tn=Ee(Be,lt,Ve[De],Ge+1,bt))}if((Dt=Ve["*"])&&Ee(Be,lt,Dt,Ge+1,bt),kt=Ve["**"])if(Ge<bt)for(kt._listeners&&Ee(Be,lt,kt,bt,bt),gt=(xt=te(kt)).length;gt-- >0;)"_listeners"!==($n=xt[gt])&&($n===ze?Ee(Be,lt,kt[$n],Ge+2,bt):$n===De?Ee(Be,lt,kt[$n],Ge+1,bt):((ln={})[$n]=kt[$n],Ee(Be,lt,{"**":ln},Ge+1,bt)));else kt._listeners?Ee(Be,lt,kt,bt,bt):kt["*"]&&kt["*"]._listeners&&Ee(Be,lt,kt["*"],bt,bt);return Tn}function xe(Be,lt,Ve){var wt,Me,Ge=0,bt=0,st=this.delimiter,gt=st.length;if("string"==typeof Be)if(-1!==(wt=Be.indexOf(st))){Me=new Array(5);do{Me[Ge++]=Be.slice(bt,wt),bt=wt+gt}while(-1!==(wt=Be.indexOf(st,bt)));Me[Ge++]=Be.slice(bt)}else Me=[Be],Ge=1;else Me=Be,Ge=Be.length;if(Ge>1)for(wt=0;wt+1<Ge;wt++)if("**"===Me[wt]&&"**"===Me[wt+1])return;var At,ce=this.listenerTree;for(wt=0;wt<Ge;wt++)if(ce=ce[At=Me[wt]]||(ce[At]={}),wt===Ge-1)return ce._listeners?("function"==typeof ce._listeners&&(ce._listeners=[ce._listeners]),Ve?ce._listeners.unshift(lt):ce._listeners.push(lt),!ce._listeners.warned&&this._maxListeners>0&&ce._listeners.length>this._maxListeners&&(ce._listeners.warned=!0,G.call(this,ce._listeners.length,At))):ce._listeners=lt,!0;return!0}function ue(Be,lt,Ve,Ge){for(var st,gt,Me,At,bt=te(Be),wt=bt.length,ce=Be._listeners;wt-- >0;)st=Be[gt=bt[wt]],Me="_listeners"===gt?Ve:Ve?Ve.concat(gt):[gt],At=Ge||"symbol"==typeof gt,ce&&lt.push(At?Me:Me.join(this.delimiter)),"object"==typeof st&&ue.call(this,st,lt,Me,At);return lt}function Re(Be){for(var Ge,bt,wt,lt=te(Be),Ve=lt.length;Ve-- >0;)(Ge=Be[bt=lt[Ve]])&&(wt=!0,"_listeners"!==bt&&!Re(Ge)&&delete Be[bt]);return wt}function Je(Be,lt,Ve){this.emitter=Be,this.event=lt,this.listener=Ve}function ke(Be,lt,Ve){if(!0===Ve)bt=!0;else if(!1===Ve)Ge=!0;else{if(!Ve||"object"!=typeof Ve)throw TypeError("options should be an object or true");var Ge=Ve.async,bt=Ve.promisify,wt=Ve.nextTick,st=Ve.objectify}if(Ge||wt||bt){var gt=lt,Me=lt._origin||lt;if(wt&&!L)throw Error("process.nextTick is not supported");bt===M&&(bt="AsyncFunction"===lt.constructor.name),lt=function(){var ce=arguments,At=this,Ft=this.event;return bt?wt?Promise.resolve():new Promise(function(Tn){Z(Tn)}).then(function(){return At.event=Ft,gt.apply(At,ce)}):(wt?process.nextTick:Z)(function(){At.event=Ft,gt.apply(At,ce)})},lt._async=!0,lt._origin=Me}return[lt,st?new Je(this,Be,lt):this]}function qe(Be){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,Y.call(this,Be)}Je.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},qe.EventEmitter2=qe,qe.prototype.listenTo=function(Be,lt,Ve){if("object"!=typeof Be)throw TypeError("target musts be an object");var Ge=this;function bt(wt){if("object"!=typeof wt)throw TypeError("events must be an object");var Me,st=Ve.reducers,gt=Ne.call(Ge,Be);Me=-1===gt?new Ie(Ge,Be,Ve):Ge._observers[gt];for(var Ft,ce=te(wt),At=ce.length,Tn="function"==typeof st,$n=0;$n<At;$n++)Me.subscribe(Ft=ce[$n],wt[Ft]||Ft,Tn?st:st&&st[Ft])}return Ve=ne(Ve,{on:M,off:M,reducers:M},{on:$,off:$,reducers:re}),O(lt)?bt(ye(lt)):bt("string"==typeof lt?ye(lt.split(/\s+/)):lt),this},qe.prototype.stopListeningTo=function(Be,lt){var Ve=this._observers;if(!Ve)return!1;var bt,Ge=Ve.length,wt=!1;if(Be&&"object"!=typeof Be)throw TypeError("target should be an object");for(;Ge-- >0;)bt=Ve[Ge],(!Be||bt._target===Be)&&(bt.unsubscribe(lt),wt=!0);return wt},qe.prototype.delimiter=".",qe.prototype.setMaxListeners=function(Be){Be!==M&&(this._maxListeners=Be,this._conf||(this._conf={}),this._conf.maxListeners=Be)},qe.prototype.getMaxListeners=function(){return this._maxListeners},qe.prototype.event="",qe.prototype.once=function(Be,lt,Ve){return this._once(Be,lt,!1,Ve)},qe.prototype.prependOnceListener=function(Be,lt,Ve){return this._once(Be,lt,!0,Ve)},qe.prototype._once=function(Be,lt,Ve,Ge){return this._many(Be,1,lt,Ve,Ge)},qe.prototype.many=function(Be,lt,Ve,Ge){return this._many(Be,lt,Ve,!1,Ge)},qe.prototype.prependMany=function(Be,lt,Ve,Ge){return this._many(Be,lt,Ve,!0,Ge)},qe.prototype._many=function(Be,lt,Ve,Ge,bt){var wt=this;if("function"!=typeof Ve)throw new Error("many only accepts instances of Function");function st(){return 0==--lt&&wt.off(Be,st),Ve.apply(this,arguments)}return st._origin=Ve,this._on(Be,st,Ge,bt)},qe.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||ie.call(this);var lt,Ge,bt,wt,st,gt,Be=arguments[0],Ve=this.wildcard;if("newListener"===Be&&!this._newListener&&!this._events.newListener)return!1;if(Ve&&(lt=Be,"newListener"!==Be&&"removeListener"!==Be&&"object"==typeof Be)){if(bt=Be.length,R)for(wt=0;wt<bt;wt++)if("symbol"==typeof Be[wt]){gt=!0;break}gt||(Be=Be.join(this.delimiter))}var ce,Me=arguments.length;if(this._all&&this._all.length)for(wt=0,bt=(ce=this._all.slice()).length;wt<bt;wt++)switch(this.event=Be,Me){case 1:ce[wt].call(this,Be);break;case 2:ce[wt].call(this,Be,arguments[1]);break;case 3:ce[wt].call(this,Be,arguments[1],arguments[2]);break;default:ce[wt].apply(this,arguments)}if(Ve)Ee.call(this,ce=[],lt,this.listenerTree,0,bt);else{if("function"==typeof(ce=this._events[Be])){switch(this.event=Be,Me){case 1:ce.call(this);break;case 2:ce.call(this,arguments[1]);break;case 3:ce.call(this,arguments[1],arguments[2]);break;default:for(Ge=new Array(Me-1),st=1;st<Me;st++)Ge[st-1]=arguments[st];ce.apply(this,Ge)}return!0}ce&&(ce=ce.slice())}if(ce&&ce.length){if(Me>3)for(Ge=new Array(Me-1),st=1;st<Me;st++)Ge[st-1]=arguments[st];for(wt=0,bt=ce.length;wt<bt;wt++)switch(this.event=Be,Me){case 1:ce[wt].call(this);break;case 2:ce[wt].call(this,arguments[1]);break;case 3:ce[wt].call(this,arguments[1],arguments[2]);break;default:ce[wt].apply(this,Ge)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===Be)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},qe.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||ie.call(this);var Ve,Ge,bt,wt,st,gt,Be=arguments[0],lt=this.wildcard;if("newListener"===Be&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(lt&&(Ve=Be,"newListener"!==Be&&"removeListener"!==Be&&"object"==typeof Be)){if(wt=Be.length,R)for(st=0;st<wt;st++)if("symbol"==typeof Be[st]){Ge=!0;break}Ge||(Be=Be.join(this.delimiter))}var At,Me=[],ce=arguments.length;if(this._all)for(st=0,wt=this._all.length;st<wt;st++)switch(this.event=Be,ce){case 1:Me.push(this._all[st].call(this,Be));break;case 2:Me.push(this._all[st].call(this,Be,arguments[1]));break;case 3:Me.push(this._all[st].call(this,Be,arguments[1],arguments[2]));break;default:Me.push(this._all[st].apply(this,arguments))}if(lt?Ee.call(this,At=[],Ve,this.listenerTree,0):At=this._events[Be],"function"==typeof At)switch(this.event=Be,ce){case 1:Me.push(At.call(this));break;case 2:Me.push(At.call(this,arguments[1]));break;case 3:Me.push(At.call(this,arguments[1],arguments[2]));break;default:for(bt=new Array(ce-1),gt=1;gt<ce;gt++)bt[gt-1]=arguments[gt];Me.push(At.apply(this,bt))}else if(At&&At.length){if(At=At.slice(),ce>3)for(bt=new Array(ce-1),gt=1;gt<ce;gt++)bt[gt-1]=arguments[gt];for(st=0,wt=At.length;st<wt;st++)switch(this.event=Be,ce){case 1:Me.push(At[st].call(this));break;case 2:Me.push(At[st].call(this,arguments[1]));break;case 3:Me.push(At[st].call(this,arguments[1],arguments[2]));break;default:Me.push(At[st].apply(this,bt))}}else if(!this.ignoreErrors&&!this._all&&"error"===Be)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(Me)},qe.prototype.on=function(Be,lt,Ve){return this._on(Be,lt,!1,Ve)},qe.prototype.prependListener=function(Be,lt,Ve){return this._on(Be,lt,!0,Ve)},qe.prototype.onAny=function(Be){return this._onAny(Be,!1)},qe.prototype.prependAny=function(Be){return this._onAny(Be,!0)},qe.prototype.addListener=qe.prototype.on,qe.prototype._onAny=function(Be,lt){if("function"!=typeof Be)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),lt?this._all.unshift(Be):this._all.push(Be),this},qe.prototype._on=function(Be,lt,Ve,Ge){if("function"==typeof Be)return this._onAny(Be,lt),this;if("function"!=typeof lt)throw new Error("on only accepts instances of Function");this._events||ie.call(this);var wt,bt=this;return Ge!==M&&(lt=(wt=ke.call(this,Be,lt,Ge))[0],bt=wt[1]),this._newListener&&this.emit("newListener",Be,lt),this.wildcard?(xe.call(this,Be,lt,Ve),bt):(this._events[Be]?("function"==typeof this._events[Be]&&(this._events[Be]=[this._events[Be]]),Ve?this._events[Be].unshift(lt):this._events[Be].push(lt),!this._events[Be].warned&&this._maxListeners>0&&this._events[Be].length>this._maxListeners&&(this._events[Be].warned=!0,G.call(this,this._events[Be].length,Be))):this._events[Be]=lt,bt)},qe.prototype.off=function(Be,lt){if("function"!=typeof lt)throw new Error("removeListener only takes instances of Function");var Ve,Ge=[];if(this.wildcard){var bt="string"==typeof Be?Be.split(this.delimiter):Be.slice();if(!(Ge=Ee.call(this,null,bt,this.listenerTree,0)))return this}else{if(!this._events[Be])return this;Ge.push({_listeners:Ve=this._events[Be]})}for(var wt=0;wt<Ge.length;wt++){var st=Ge[wt];if(O(Ve=st._listeners)){for(var gt=-1,Me=0,ce=Ve.length;Me<ce;Me++)if(Ve[Me]===lt||Ve[Me].listener&&Ve[Me].listener===lt||Ve[Me]._origin&&Ve[Me]._origin===lt){gt=Me;break}if(gt<0)continue;return this.wildcard?st._listeners.splice(gt,1):this._events[Be].splice(gt,1),0===Ve.length&&(this.wildcard?delete st._listeners:delete this._events[Be]),this._removeListener&&this.emit("removeListener",Be,lt),this}(Ve===lt||Ve.listener&&Ve.listener===lt||Ve._origin&&Ve._origin===lt)&&(this.wildcard?delete st._listeners:delete this._events[Be],this._removeListener&&this.emit("removeListener",Be,lt))}return this.listenerTree&&Re(this.listenerTree),this},qe.prototype.offAny=function(Be){var Ge,lt=0,Ve=0;if(Be&&this._all&&this._all.length>0){for(lt=0,Ve=(Ge=this._all).length;lt<Ve;lt++)if(Be===Ge[lt])return Ge.splice(lt,1),this._removeListener&&this.emit("removeListenerAny",Be),this}else{if(Ge=this._all,this._removeListener)for(lt=0,Ve=Ge.length;lt<Ve;lt++)this.emit("removeListenerAny",Ge[lt]);this._all=[]}return this},qe.prototype.removeListener=qe.prototype.off,qe.prototype.removeAllListeners=function(Be){if(Be===M)return!this._events||ie.call(this),this;if(this.wildcard){var Ge,lt=Ee.call(this,null,Be,this.listenerTree,0);if(!lt)return this;for(Ge=0;Ge<lt.length;Ge++)lt[Ge]._listeners=null;this.listenerTree&&Re(this.listenerTree)}else this._events&&(this._events[Be]=null);return this},qe.prototype.listeners=function(Be){var Ve,Ge,bt,wt,st,lt=this._events;if(Be===M){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!lt)return[];for(wt=(Ve=te(lt)).length,bt=[];wt-- >0;)"function"==typeof(Ge=lt[Ve[wt]])?bt.push(Ge):bt.push.apply(bt,Ge);return bt}if(this.wildcard){if(!(st=this.listenerTree))return[];var gt=[],Me="string"==typeof Be?Be.split(this.delimiter):Be.slice();return Ee.call(this,gt,Me,st,0),gt}return lt&&(Ge=lt[Be])?"function"==typeof Ge?[Ge]:Ge:[]},qe.prototype.eventNames=function(Be){var lt=this._events;return this.wildcard?ue.call(this,this.listenerTree,[],null,Be):lt?te(lt):[]},qe.prototype.listenerCount=function(Be){return this.listeners(Be).length},qe.prototype.hasListeners=function(Be){if(this.wildcard){var lt=[],Ve="string"==typeof Be?Be.split(this.delimiter):Be.slice();return Ee.call(this,lt,Ve,this.listenerTree,0),lt.length>0}var Ge=this._events,bt=this._all;return!!(bt&&bt.length||Ge&&(Be===M?te(Ge).length:Ge[Be]))},qe.prototype.listenersAny=function(){return this._all?this._all:[]},qe.prototype.waitFor=function(Be,lt){var Ve=this,Ge=typeof lt;return"number"===Ge?lt={timeout:lt}:"function"===Ge&&(lt={filter:lt}),pe((lt=ne(lt,{timeout:0,filter:M,handleError:!1,Promise,overload:!1},{filter:$,Promise:ae})).Promise,function(bt,wt,st){function gt(){var Me=lt.filter;if(!Me||Me.apply(Ve,arguments))if(Ve.off(Be,gt),lt.handleError){var ce=arguments[0];ce?wt(ce):bt(oe.apply(null,arguments).slice(1))}else bt(oe.apply(null,arguments))}st(function(){Ve.off(Be,gt)}),Ve._on(Be,gt,!1)},{timeout:lt.timeout,overload:lt.overload})};var yt=qe.prototype;Object.defineProperties(qe,{defaultMaxListeners:{get:function(){return yt._maxListeners},set:function(Be){if("number"!=typeof Be||Be<0||Number.isNaN(Be))throw TypeError("n must be a non-negative number");yt._maxListeners=Be},enumerable:!0},once:{value:function ot(Be,lt,Ve){return pe((Ve=ne(Ve,{Promise,timeout:0,overload:!1},{Promise:ae})).Promise,function(bt,wt,st){var gt;if("function"==typeof Be.addEventListener)return gt=function(){bt(oe.apply(null,arguments))},st(function(){Be.removeEventListener(lt,gt)}),void Be.addEventListener(lt,gt,{once:!0});var ce,Me=function(){ce&&Be.removeListener("error",ce),bt(oe.apply(null,arguments))};"error"!==lt&&(ce=function(At){Be.removeListener(lt,Me),wt(At)},Be.once("error",ce)),st(function(){ce&&Be.removeListener("error",ce),Be.removeListener(lt,Me)}),Be.once(lt,Me)},{timeout:Ve.timeout,overload:Ve.overload})},writable:!0,configurable:!0}}),Object.defineProperties(yt,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(X=function(){return qe}.call(be,z,be,He))!==M&&(He.exports=X)}()},9069:He=>{"use strict";var X,be="object"==typeof Reflect?Reflect:null,z=be&&"function"==typeof be.apply?be.apply:function(N,$,re){return Function.prototype.apply.call(N,$,re)};X=be&&"function"==typeof be.ownKeys?be.ownKeys:Object.getOwnPropertySymbols?function(N){return Object.getOwnPropertyNames(N).concat(Object.getOwnPropertySymbols(N))}:function(N){return Object.getOwnPropertyNames(N)};var U=Number.isNaN||function(N){return N!=N};function O(){O.init.call(this)}He.exports=O,He.exports.once=function ye(ae,N){return new Promise(function($,re){function pe(Ee){ae.removeListener(N,Ne),re(Ee)}function Ne(){"function"==typeof ae.removeListener&&ae.removeListener("error",pe),$([].slice.call(arguments))}ne(ae,N,Ne,{once:!0}),"error"!==N&&function Ie(ae,N,$){"function"==typeof ae.on&&ne(ae,"error",N,$)}(ae,pe,{once:!0})})},O.EventEmitter=O,O.prototype._events=void 0,O.prototype._eventsCount=0,O.prototype._maxListeners=void 0;var V=10;function L(ae){if("function"!=typeof ae)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ae)}function R(ae){return void 0===ae._maxListeners?O.defaultMaxListeners:ae._maxListeners}function j(ae,N,$,re){var pe,Ne,Ee;if(L($),void 0===(Ne=ae._events)?(Ne=ae._events=Object.create(null),ae._eventsCount=0):(void 0!==Ne.newListener&&(ae.emit("newListener",N,$.listener?$.listener:$),Ne=ae._events),Ee=Ne[N]),void 0===Ee)Ee=Ne[N]=$,++ae._eventsCount;else if("function"==typeof Ee?Ee=Ne[N]=re?[$,Ee]:[Ee,$]:re?Ee.unshift($):Ee.push($),(pe=R(ae))>0&&Ee.length>pe&&!Ee.warned){Ee.warned=!0;var xe=new Error("Possible EventEmitter memory leak detected. "+Ee.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");xe.name="MaxListenersExceededWarning",xe.emitter=ae,xe.type=N,xe.count=Ee.length,function M(ae){console&&console.warn&&console.warn(ae)}(xe)}return ae}function J(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Z(ae,N,$){var re={fired:!1,wrapFn:void 0,target:ae,type:N,listener:$},pe=J.bind(re);return pe.listener=$,re.wrapFn=pe,pe}function te(ae,N,$){var re=ae._events;if(void 0===re)return[];var pe=re[N];return void 0===pe?[]:"function"==typeof pe?$?[pe.listener||pe]:[pe]:$?function oe(ae){for(var N=new Array(ae.length),$=0;$<N.length;++$)N[$]=ae[$].listener||ae[$];return N}(pe):Y(pe,pe.length)}function ie(ae){var N=this._events;if(void 0!==N){var $=N[ae];if("function"==typeof $)return 1;if(void 0!==$)return $.length}return 0}function Y(ae,N){for(var $=new Array(N),re=0;re<N;++re)$[re]=ae[re];return $}function ne(ae,N,$,re){if("function"==typeof ae.on)re.once?ae.once(N,$):ae.on(N,$);else{if("function"!=typeof ae.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ae);ae.addEventListener(N,function pe(Ne){re.once&&ae.removeEventListener(N,pe),$(Ne)})}}Object.defineProperty(O,"defaultMaxListeners",{enumerable:!0,get:function(){return V},set:function(ae){if("number"!=typeof ae||ae<0||U(ae))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ae+".");V=ae}}),O.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},O.prototype.setMaxListeners=function(N){if("number"!=typeof N||N<0||U(N))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+N+".");return this._maxListeners=N,this},O.prototype.getMaxListeners=function(){return R(this)},O.prototype.emit=function(N){for(var $=[],re=1;re<arguments.length;re++)$.push(arguments[re]);var pe="error"===N,Ne=this._events;if(void 0!==Ne)pe=pe&&void 0===Ne.error;else if(!pe)return!1;if(pe){var Ee;if($.length>0&&(Ee=$[0]),Ee instanceof Error)throw Ee;var xe=new Error("Unhandled error."+(Ee?" ("+Ee.message+")":""));throw xe.context=Ee,xe}var ue=Ne[N];if(void 0===ue)return!1;if("function"==typeof ue)z(ue,this,$);else{var Re=ue.length,Je=Y(ue,Re);for(re=0;re<Re;++re)z(Je[re],this,$)}return!0},O.prototype.on=O.prototype.addListener=function(N,$){return j(this,N,$,!1)},O.prototype.prependListener=function(N,$){return j(this,N,$,!0)},O.prototype.once=function(N,$){return L($),this.on(N,Z(this,N,$)),this},O.prototype.prependOnceListener=function(N,$){return L($),this.prependListener(N,Z(this,N,$)),this},O.prototype.off=O.prototype.removeListener=function(N,$){var re,pe,Ne,Ee,xe;if(L($),void 0===(pe=this._events))return this;if(void 0===(re=pe[N]))return this;if(re===$||re.listener===$)0==--this._eventsCount?this._events=Object.create(null):(delete pe[N],pe.removeListener&&this.emit("removeListener",N,re.listener||$));else if("function"!=typeof re){for(Ne=-1,Ee=re.length-1;Ee>=0;Ee--)if(re[Ee]===$||re[Ee].listener===$){xe=re[Ee].listener,Ne=Ee;break}if(Ne<0)return this;0===Ne?re.shift():function G(ae,N){for(;N+1<ae.length;N++)ae[N]=ae[N+1];ae.pop()}(re,Ne),1===re.length&&(pe[N]=re[0]),void 0!==pe.removeListener&&this.emit("removeListener",N,xe||$)}return this},O.prototype.removeAllListeners=function(N){var $,re,pe;if(void 0===(re=this._events))return this;if(void 0===re.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==re[N]&&(0==--this._eventsCount?this._events=Object.create(null):delete re[N]),this;if(0===arguments.length){var Ee,Ne=Object.keys(re);for(pe=0;pe<Ne.length;++pe)"removeListener"!==(Ee=Ne[pe])&&this.removeAllListeners(Ee);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof($=re[N]))this.removeListener(N,$);else if(void 0!==$)for(pe=$.length-1;pe>=0;pe--)this.removeListener(N,$[pe]);return this},O.prototype.listeners=function(N){return te(this,N,!0)},O.prototype.rawListeners=function(N){return te(this,N,!1)},O.listenerCount=function(ae,N){return"function"==typeof ae.listenerCount?ae.listenerCount(N):ie.call(ae,N)},O.prototype.listenerCount=ie,O.prototype.eventNames=function(){return this._eventsCount>0?X(this._events):[]}},2698:He=>{He.exports={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}},4570:(He,be)=>{be.assignLayoutChanges=function(z,X,M){const{nodeXAttribute:U,nodeYAttribute:O}=M;z.updateEachNodeAttributes((V,L)=>{const R=X[V];return!R||R.fixed||(L[U]=R.x,L[O]=R.y),L},{attributes:["x","y"]})},be.collectLayoutChanges=function(z){const X={};for(const M in z){const U=z[M];X[M]={x:U.x,y:U.y}}return X}},8031:(He,be,z)=>{const{createNodeValueGetter:X,createEdgeValueGetter:M}=z(2954);He.exports=function(O,V,L){const{nodeXAttribute:R,nodeYAttribute:j}=L,{attraction:J,repulsion:Z,gravity:te,inertia:ie,maxMove:Y}=L.settings;let{shouldSkipNode:G,shouldSkipEdge:oe,isNodeFixed:ye}=L;ye=X(ye),G=X(G,!1),oe=M(oe,!1);const Ie=O.filterNodes((N,$)=>!G.fromEntry(N,$)),ne=Ie.length;for(let N=0;N<ne;N++){const $=Ie[N],re=O.getNodeAttributes($),pe=V[$];V[$]=pe?{dx:pe.dx*ie,dy:pe.dy*ie,x:re[R]||0,y:re[j]||0}:{dx:0,dy:0,x:re[R]||0,y:re[j]||0}}if(Z)for(let N=0;N<ne;N++){const re=V[Ie[N]];for(let pe=N+1;pe<ne;pe++){const Ee=V[Ie[pe]],xe=Ee.x-re.x,ue=Ee.y-re.y,Re=Math.sqrt(xe*xe+ue*ue)||1,Je=Z/Re*xe,ke=Z/Re*ue;re.dx-=Je,re.dy-=ke,Ee.dx+=Je,Ee.dy+=ke}}if(J&&O.forEachEdge((N,$,re,pe,Ne,Ee,xe)=>{if(re===pe||G.fromEntry(re,Ne)||G.fromEntry(pe,Ee)||oe.fromEntry(N,$,re,pe,Ne,Ee,xe))return;const ue=V[re],Re=V[pe],Je=Re.x-ue.x,ke=Re.y-ue.y,qe=Math.sqrt(Je*Je+ke*ke)||1,ot=J*qe*Je,yt=J*qe*ke;ue.dx+=ot,ue.dy+=yt,Re.dx-=ot,Re.dy-=yt}),te)for(let N=0;N<ne;N++){const $=Ie[N],re=V[$],{x:pe,y:Ne}=re,Ee=Math.sqrt(pe*pe+Ne*Ne)||1;V[$].dx-=pe*te*Ee,V[$].dy-=Ne*te*Ee}for(let N=0;N<ne;N++){const $=Ie[N],re=V[$],pe=Math.sqrt(re.dx*re.dx+re.dy*re.dy);pe>Y&&(re.dx*=Y/pe,re.dy*=Y/pe),ye.fromGraph(O,$)?re.fixed=!0:(re.x+=re.dx,re.y+=re.dy,re.fixed=!1)}return{converged:!1}}},3424:(He,be,z)=>{const X=z(6714),M=z(8487),U=z(8031),O=z(4570),V=z(2698);function L(R,j){if(!X(R))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");j=M(j,V),this.callbacks={},j.onConverged&&(this.callbacks.onConverged=j.onConverged),this.graph=R,this.params=j,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}L.prototype.isRunning=function(){return this.running},L.prototype.runFrame=function(){let{converged:R}=U(this.graph,this.nodeStates,this.params);O.assignLayoutChanges(this.graph,this.nodeStates,this.params),R=!1,R?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},L.prototype.stop=function(){return this.running=!1,null!==this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},L.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},L.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},He.exports=L},8487:He=>{function be(X){return!X||"object"!=typeof X||"function"==typeof X||Array.isArray(X)||X instanceof Set||X instanceof Map||X instanceof RegExp||X instanceof Date}He.exports=function z(X,M){X=X||{};var U={};for(var O in M){var V=X[O],L=M[O];U[O]=be(L)?void 0===V?L:V:z(V,L)}return U}},2954:(He,be)=>{function z(U){return"number"!=typeof U||isNaN(U)?1:U}function M(U,O){var V={},L=function(J){return typeof J>"u"?O:J};"function"==typeof O&&(L=O);var R=function(J){return L(J[U])},j=function(){return L(void 0)};return"string"==typeof U?(V.fromAttributes=R,V.fromGraph=function(J,Z){return R(J.getEdgeAttributes(Z))},V.fromEntry=function(J,Z){return R(Z)},V.fromPartialEntry=V.fromEntry,V.fromMinimalEntry=V.fromEntry):"function"==typeof U?(V.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},V.fromGraph=function(J,Z){var te=J.extremities(Z);return L(U(Z,J.getEdgeAttributes(Z),te[0],te[1],J.getNodeAttributes(te[0]),J.getNodeAttributes(te[1]),J.isUndirected(Z)))},V.fromEntry=function(J,Z,te,ie,Y,G,oe){return L(U(J,Z,te,ie,Y,G,oe))},V.fromPartialEntry=function(J,Z,te,ie){return L(U(J,Z,te,ie))},V.fromMinimalEntry=function(J,Z){return L(U(J,Z))}):(V.fromAttributes=j,V.fromGraph=j,V.fromEntry=j,V.fromMinimalEntry=j),V}be.createNodeValueGetter=function X(U,O){var V={},L=function(J){return typeof J>"u"?O:J};"function"==typeof O&&(L=O);var R=function(J){return L(J[U])},j=function(){return L(void 0)};return"string"==typeof U?(V.fromAttributes=R,V.fromGraph=function(J,Z){return R(J.getNodeAttributes(Z))},V.fromEntry=function(J,Z){return R(Z)}):"function"==typeof U?(V.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},V.fromGraph=function(J,Z){return L(U(Z,J.getNodeAttributes(Z)))},V.fromEntry=function(J,Z){return L(U(J,Z))}):(V.fromAttributes=j,V.fromGraph=j,V.fromEntry=j),V},be.createEdgeValueGetter=M,be.createEdgeWeightGetter=function(U){return M(U,z)}},6714:He=>{He.exports=function(z){return null!==z&&"object"==typeof z&&"function"==typeof z.addUndirectedEdgeWithKey&&"function"==typeof z.dropNode&&"boolean"==typeof z.multi}},5595:function(He){He.exports=function(){"use strict";function be(et){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(mt){return typeof mt}:function(mt){return mt&&"function"==typeof Symbol&&mt.constructor===Symbol&&mt!==Symbol.prototype?"symbol":typeof mt})(et)}function z(et,mt){et.prototype=Object.create(mt.prototype),et.prototype.constructor=et,M(et,mt)}function X(et){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(mt){return mt.__proto__||Object.getPrototypeOf(mt)})(et)}function M(et,mt){return(M=Object.setPrototypeOf||function(ct,ge){return ct.__proto__=ge,ct})(et,mt)}function U(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O(et,mt,ct){return(O=U()?Reflect.construct:function(ge,Oe,it){var Rt=[null];Rt.push.apply(Rt,Oe);var Yt=new(Function.bind.apply(ge,Rt));return it&&M(Yt,it.prototype),Yt}).apply(null,arguments)}function V(et){var mt="function"==typeof Map?new Map:void 0;return V=function(ct){if(null===ct||-1===Function.toString.call(ct).indexOf("[native code]"))return ct;if("function"!=typeof ct)throw new TypeError("Super expression must either be null or a function");if(void 0!==mt){if(mt.has(ct))return mt.get(ct);mt.set(ct,Oe)}function Oe(){return O(ct,arguments,X(this).constructor)}return Oe.prototype=Object.create(ct.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),M(Oe,ct)},V(et)}function L(et){if(void 0===et)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return et}var R=function(){for(var et=arguments[0],mt=1,ct=arguments.length;mt<ct;mt++)if(arguments[mt])for(var ge in arguments[mt])et[ge]=arguments[mt][ge];return et};function j(et,mt,ct,ge){var Oe=et._nodes.get(mt),it=null;return Oe?it="mixed"===ge?Oe.out&&Oe.out[ct]||Oe.undirected&&Oe.undirected[ct]:"directed"===ge?Oe.out&&Oe.out[ct]:Oe.undirected&&Oe.undirected[ct]:it}function J(et){return null!==et&&"object"===be(et)&&"function"==typeof et.addUndirectedEdgeWithKey&&"function"==typeof et.dropNode}function Z(et){return"object"===be(et)&&null!==et&&et.constructor===Object}function te(et){var mt;for(mt in et)return!1;return!0}function ie(et,mt,ct){Object.defineProperty(et,mt,{enumerable:!1,configurable:!1,writable:!0,value:ct})}function Y(et,mt,ct){var ge={enumerable:!0,configurable:!0};"function"==typeof ct?ge.get=ct:(ge.value=ct,ge.writable=!1),Object.defineProperty(et,mt,ge)}function G(et){return!(!Z(et)||et.attributes&&!Array.isArray(et.attributes))}"function"==typeof Object.assign&&(R=Object.assign);var oe,ye={exports:{}},Ie="object"==typeof Reflect?Reflect:null,ne=Ie&&"function"==typeof Ie.apply?Ie.apply:function(et,mt,ct){return Function.prototype.apply.call(et,mt,ct)};oe=Ie&&"function"==typeof Ie.ownKeys?Ie.ownKeys:Object.getOwnPropertySymbols?function(et){return Object.getOwnPropertyNames(et).concat(Object.getOwnPropertySymbols(et))}:function(et){return Object.getOwnPropertyNames(et)};var ae=Number.isNaN||function(et){return et!=et};function N(){N.init.call(this)}ye.exports=N,ye.exports.once=function(et,mt){return new Promise(function(ct,ge){function Oe(Rt){et.removeListener(mt,it),ge(Rt)}function it(){"function"==typeof et.removeListener&&et.removeListener("error",Oe),ct([].slice.call(arguments))}var Rt;ke(et,mt,it,{once:!0}),"error"!==mt&&("function"==typeof(Rt=et).on&&ke(Rt,"error",Oe,{once:!0}))})},N.EventEmitter=N,N.prototype._events=void 0,N.prototype._eventsCount=0,N.prototype._maxListeners=void 0;var $=10;function re(et){if("function"!=typeof et)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof et)}function pe(et){return void 0===et._maxListeners?N.defaultMaxListeners:et._maxListeners}function Ne(et,mt,ct,ge){var Oe,it,Rt;if(re(ct),void 0===(it=et._events)?(it=et._events=Object.create(null),et._eventsCount=0):(void 0!==it.newListener&&(et.emit("newListener",mt,ct.listener?ct.listener:ct),it=et._events),Rt=it[mt]),void 0===Rt)Rt=it[mt]=ct,++et._eventsCount;else if("function"==typeof Rt?Rt=it[mt]=ge?[ct,Rt]:[Rt,ct]:ge?Rt.unshift(ct):Rt.push(ct),(Oe=pe(et))>0&&Rt.length>Oe&&!Rt.warned){Rt.warned=!0;var Dn=new Error("Possible EventEmitter memory leak detected. "+Rt.length+" "+String(mt)+" listeners added. Use emitter.setMaxListeners() to increase limit");Dn.name="MaxListenersExceededWarning",Dn.emitter=et,Dn.type=mt,Dn.count=Rt.length,console&&console.warn&&console.warn(Dn)}return et}function Ee(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xe(et,mt,ct){var ge={fired:!1,wrapFn:void 0,target:et,type:mt,listener:ct},Oe=Ee.bind(ge);return Oe.listener=ct,ge.wrapFn=Oe,Oe}function ue(et,mt,ct){var ge=et._events;if(void 0===ge)return[];var Oe=ge[mt];return void 0===Oe?[]:"function"==typeof Oe?ct?[Oe.listener||Oe]:[Oe]:ct?function(it){for(var Rt=new Array(it.length),Yt=0;Yt<Rt.length;++Yt)Rt[Yt]=it[Yt].listener||it[Yt];return Rt}(Oe):Je(Oe,Oe.length)}function Re(et){var mt=this._events;if(void 0!==mt){var ct=mt[et];if("function"==typeof ct)return 1;if(void 0!==ct)return ct.length}return 0}function Je(et,mt){for(var ct=new Array(mt),ge=0;ge<mt;++ge)ct[ge]=et[ge];return ct}function ke(et,mt,ct,ge){if("function"==typeof et.on)ge.once?et.once(mt,ct):et.on(mt,ct);else{if("function"!=typeof et.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof et);et.addEventListener(mt,function Oe(it){ge.once&&et.removeEventListener(mt,Oe),ct(it)})}}function qe(et){if("function"!=typeof et)throw new Error("obliterator/iterator: expecting a function!");this.next=et}Object.defineProperty(N,"defaultMaxListeners",{enumerable:!0,get:function(){return $},set:function(et){if("number"!=typeof et||et<0||ae(et))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+et+".");$=et}}),N.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},N.prototype.setMaxListeners=function(et){if("number"!=typeof et||et<0||ae(et))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+et+".");return this._maxListeners=et,this},N.prototype.getMaxListeners=function(){return pe(this)},N.prototype.emit=function(et){for(var mt=[],ct=1;ct<arguments.length;ct++)mt.push(arguments[ct]);var ge="error"===et,Oe=this._events;if(void 0!==Oe)ge=ge&&void 0===Oe.error;else if(!ge)return!1;if(ge){var it;if(mt.length>0&&(it=mt[0]),it instanceof Error)throw it;var Rt=new Error("Unhandled error."+(it?" ("+it.message+")":""));throw Rt.context=it,Rt}var Yt=Oe[et];if(void 0===Yt)return!1;if("function"==typeof Yt)ne(Yt,this,mt);else{var Dn=Yt.length,Ai=Je(Yt,Dn);for(ct=0;ct<Dn;++ct)ne(Ai[ct],this,mt)}return!0},N.prototype.on=N.prototype.addListener=function(et,mt){return Ne(this,et,mt,!1)},N.prototype.prependListener=function(et,mt){return Ne(this,et,mt,!0)},N.prototype.once=function(et,mt){return re(mt),this.on(et,xe(this,et,mt)),this},N.prototype.prependOnceListener=function(et,mt){return re(mt),this.prependListener(et,xe(this,et,mt)),this},N.prototype.off=N.prototype.removeListener=function(et,mt){var ct,ge,Oe,it,Rt;if(re(mt),void 0===(ge=this._events))return this;if(void 0===(ct=ge[et]))return this;if(ct===mt||ct.listener===mt)0==--this._eventsCount?this._events=Object.create(null):(delete ge[et],ge.removeListener&&this.emit("removeListener",et,ct.listener||mt));else if("function"!=typeof ct){for(Oe=-1,it=ct.length-1;it>=0;it--)if(ct[it]===mt||ct[it].listener===mt){Rt=ct[it].listener,Oe=it;break}if(Oe<0)return this;0===Oe?ct.shift():function(Yt,Dn){for(;Dn+1<Yt.length;Dn++)Yt[Dn]=Yt[Dn+1];Yt.pop()}(ct,Oe),1===ct.length&&(ge[et]=ct[0]),void 0!==ge.removeListener&&this.emit("removeListener",et,Rt||mt)}return this},N.prototype.removeAllListeners=function(et){var mt,ct,ge;if(void 0===(ct=this._events))return this;if(void 0===ct.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ct[et]&&(0==--this._eventsCount?this._events=Object.create(null):delete ct[et]),this;if(0===arguments.length){var Oe,it=Object.keys(ct);for(ge=0;ge<it.length;++ge)"removeListener"!==(Oe=it[ge])&&this.removeAllListeners(Oe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(mt=ct[et]))this.removeListener(et,mt);else if(void 0!==mt)for(ge=mt.length-1;ge>=0;ge--)this.removeListener(et,mt[ge]);return this},N.prototype.listeners=function(et){return ue(this,et,!0)},N.prototype.rawListeners=function(et){return ue(this,et,!1)},N.listenerCount=function(et,mt){return"function"==typeof et.listenerCount?et.listenerCount(mt):Re.call(et,mt)},N.prototype.listenerCount=Re,N.prototype.eventNames=function(){return this._eventsCount>0?oe(this._events):[]},typeof Symbol<"u"&&(qe.prototype[Symbol.iterator]=function(){return this}),qe.of=function(){var et=arguments,mt=et.length,ct=0;return new qe(function(){return ct>=mt?{done:!0}:{done:!1,value:et[ct++]}})},qe.empty=function(){return new qe(function(){return{done:!0}})},qe.fromSequence=function(et){var mt=0,ct=et.length;return new qe(function(){return mt>=ct?{done:!0}:{done:!1,value:et[mt++]}})},qe.is=function(et){return et instanceof qe||"object"==typeof et&&null!==et&&"function"==typeof et.next};var ot=qe,yt={};yt.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",yt.SYMBOL_SUPPORT=typeof Symbol<"u";var hn=ot,lt=yt.ARRAY_BUFFER_SUPPORT,Ve=yt.SYMBOL_SUPPORT,Ge=function(et){var ct,mt="string"==typeof(ct=et)||Array.isArray(ct)||lt&&ArrayBuffer.isView(ct)?hn.fromSequence(ct):"object"!=typeof ct||null===ct?null:Ve&&"function"==typeof ct[Symbol.iterator]?ct[Symbol.iterator]():"function"==typeof ct.next?ct:null;if(!mt)throw new Error("obliterator: target is not iterable nor a valid iterator.");return mt},bt=Ge,wt=function(et,mt){for(var ct,ge=arguments.length>1?mt:1/0,Oe=ge!==1/0?new Array(ge):[],it=0,Rt=bt(et);;){if(it===ge)return Oe;if((ct=Rt.next()).done)return it!==mt&&(Oe.length=it),Oe;Oe[it++]=ct.value}},st=function(et){function mt(ct){var ge;return(ge=et.call(this)||this).name="GraphError",ge.message=ct,ge}return z(mt,et),mt}(V(Error)),gt=function(et){function mt(ct){var ge;return(ge=et.call(this,ct)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(L(ge),mt.prototype.constructor),ge}return z(mt,et),mt}(st),Me=function(et){function mt(ct){var ge;return(ge=et.call(this,ct)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(L(ge),mt.prototype.constructor),ge}return z(mt,et),mt}(st),ce=function(et){function mt(ct){var ge;return(ge=et.call(this,ct)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(L(ge),mt.prototype.constructor),ge}return z(mt,et),mt}(st);function At(et,mt){this.key=et,this.attributes=mt,this.clear()}function Ft(et,mt){this.key=et,this.attributes=mt,this.clear()}function Tn(et,mt){this.key=et,this.attributes=mt,this.clear()}function $n(et,mt,ct,ge,Oe){this.key=mt,this.attributes=Oe,this.undirected=et,this.source=ct,this.target=ge}function Dt(et,mt,ct,ge,Oe,it,Rt){var Yt,Dn,Ai,oi;if(ge=""+ge,0===ct){if(!(Yt=et._nodes.get(ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" node in the graph.'));Ai=Oe,oi=it}else if(3===ct){if(!(Dn=et._edges.get(Oe=""+Oe)))throw new Me("Graph.".concat(mt,': could not find the "').concat(Oe,'" edge in the graph.'));var gi=Dn.source.key,yr=Dn.target.key;if(ge===gi)Yt=Dn.target;else{if(ge!==yr)throw new Me("Graph.".concat(mt,': the "').concat(ge,'" node is not attached to the "').concat(Oe,'" edge (').concat(gi,", ").concat(yr,")."));Yt=Dn.source}Ai=it,oi=Rt}else{if(!(Dn=et._edges.get(ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'));Yt=1===ct?Dn.source:Dn.target,Ai=Oe,oi=it}return[Yt,Ai,oi]}At.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.in={},this.out={},this.undirected={}},Ft.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.in={},this.out={}},Tn.prototype.clear=function(){this.undirectedDegree=0,this.undirected={}},$n.prototype.attach=function(){var et="out",mt="in";this.undirected&&(et=mt="undirected");var ct=this.source.key,ge=this.target.key;this.source[et][ge]=this,this.undirected&&ct===ge||(this.target[mt][ct]=this)},$n.prototype.attachMulti=function(){var et="out",mt="in",ct=this.source.key,ge=this.target.key;this.undirected&&(et=mt="undirected");var Oe=this.source[et],it=Oe[ge];if(void 0===it)return Oe[ge]=this,void(this.undirected&&ct===ge||(this.target[mt][ct]=this));it.previous=this,this.next=it,Oe[ge]=this,this.target[mt][ct]=this},$n.prototype.detach=function(){var et=this.source.key,ct="out",ge="in";this.undirected&&(ct=ge="undirected"),delete this.source[ct][this.target.key],delete this.target[ge][et]},$n.prototype.detachMulti=function(){var et=this.source.key,mt=this.target.key,ct="out",ge="in";this.undirected&&(ct=ge="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[ct][mt],delete this.target[ge][et]):(this.next.previous=void 0,this.source[ct][mt]=this.next,this.target[ge][et]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var kt=[{name:function(et){return"get".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it){var Rt=Dt(this,mt,ct,ge,Oe,it);return Rt[0].attributes[Rt[1]]}}},{name:function(et){return"get".concat(et,"Attributes")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe){return Dt(this,mt,ct,ge,Oe)[0].attributes}}},{name:function(et){return"has".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it){var Rt=Dt(this,mt,ct,ge,Oe,it);return Rt[0].attributes.hasOwnProperty(Rt[1])}}},{name:function(et){return"set".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it,Rt){var Yt=Dt(this,mt,ct,ge,Oe,it,Rt),Dn=Yt[0],Ai=Yt[1];return Dn.attributes[Ai]=Yt[2],this.emit("nodeAttributesUpdated",{key:Dn.key,type:"set",attributes:Dn.attributes,name:Ai}),this}}},{name:function(et){return"update".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it,Rt){var Yt=Dt(this,mt,ct,ge,Oe,it,Rt),Dn=Yt[0],Ai=Yt[1],oi=Yt[2];if("function"!=typeof oi)throw new gt("Graph.".concat(mt,": updater should be a function."));var gi=Dn.attributes,yr=oi(gi[Ai]);return gi[Ai]=yr,this.emit("nodeAttributesUpdated",{key:Dn.key,type:"set",attributes:Dn.attributes,name:Ai}),this}}},{name:function(et){return"remove".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it){var Rt=Dt(this,mt,ct,ge,Oe,it),Yt=Rt[0],Dn=Rt[1];return delete Yt.attributes[Dn],this.emit("nodeAttributesUpdated",{key:Yt.key,type:"remove",attributes:Yt.attributes,name:Dn}),this}}},{name:function(et){return"replace".concat(et,"Attributes")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it){var Rt=Dt(this,mt,ct,ge,Oe,it),Yt=Rt[0],Dn=Rt[1];if(!Z(Dn))throw new gt("Graph.".concat(mt,": provided attributes are not a plain object."));return Yt.attributes=Dn,this.emit("nodeAttributesUpdated",{key:Yt.key,type:"replace",attributes:Yt.attributes}),this}}},{name:function(et){return"merge".concat(et,"Attributes")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it){var Rt=Dt(this,mt,ct,ge,Oe,it),Yt=Rt[0],Dn=Rt[1];if(!Z(Dn))throw new gt("Graph.".concat(mt,": provided attributes are not a plain object."));return R(Yt.attributes,Dn),this.emit("nodeAttributesUpdated",{key:Yt.key,type:"merge",attributes:Yt.attributes,data:Dn}),this}}},{name:function(et){return"update".concat(et,"Attributes")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it){var Rt=Dt(this,mt,ct,ge,Oe,it),Yt=Rt[0],Dn=Rt[1];if("function"!=typeof Dn)throw new gt("Graph.".concat(mt,": provided updater is not a function."));return Yt.attributes=Dn(Yt.attributes),this.emit("nodeAttributesUpdated",{key:Yt.key,type:"update",attributes:Yt.attributes}),this}}}],ln=[{name:function(et){return"get".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe){var it;if("mixed"!==this.type&&"mixed"!==ct&&ct!==this.type)throw new ce("Graph.".concat(mt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ce("Graph.".concat(mt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Rt=""+ge,Yt=""+Oe;if(Oe=arguments[2],!(it=j(this,Rt,Yt,ct)))throw new Me("Graph.".concat(mt,': could not find an edge for the given path ("').concat(Rt,'" - "').concat(Yt,'").'))}else{if("mixed"!==ct)throw new ce("Graph.".concat(mt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(it=this._edges.get(ge=""+ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'))}return it.attributes[Oe]}}},{name:function(et){return"get".concat(et,"Attributes")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge){var Oe;if("mixed"!==this.type&&"mixed"!==ct&&ct!==this.type)throw new ce("Graph.".concat(mt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new ce("Graph.".concat(mt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var it=""+ge,Rt=""+arguments[1];if(!(Oe=j(this,it,Rt,ct)))throw new Me("Graph.".concat(mt,': could not find an edge for the given path ("').concat(it,'" - "').concat(Rt,'").'))}else{if("mixed"!==ct)throw new ce("Graph.".concat(mt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Oe=this._edges.get(ge=""+ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'))}return Oe.attributes}}},{name:function(et){return"has".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe){var it;if("mixed"!==this.type&&"mixed"!==ct&&ct!==this.type)throw new ce("Graph.".concat(mt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ce("Graph.".concat(mt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Rt=""+ge,Yt=""+Oe;if(Oe=arguments[2],!(it=j(this,Rt,Yt,ct)))throw new Me("Graph.".concat(mt,': could not find an edge for the given path ("').concat(Rt,'" - "').concat(Yt,'").'))}else{if("mixed"!==ct)throw new ce("Graph.".concat(mt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(it=this._edges.get(ge=""+ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'))}return it.attributes.hasOwnProperty(Oe)}}},{name:function(et){return"set".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it){var Rt;if("mixed"!==this.type&&"mixed"!==ct&&ct!==this.type)throw new ce("Graph.".concat(mt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ce("Graph.".concat(mt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Yt=""+ge,Dn=""+Oe;if(Oe=arguments[2],it=arguments[3],!(Rt=j(this,Yt,Dn,ct)))throw new Me("Graph.".concat(mt,': could not find an edge for the given path ("').concat(Yt,'" - "').concat(Dn,'").'))}else{if("mixed"!==ct)throw new ce("Graph.".concat(mt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Rt=this._edges.get(ge=""+ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'))}return Rt.attributes[Oe]=it,this.emit("edgeAttributesUpdated",{key:Rt.key,type:"set",attributes:Rt.attributes,name:Oe}),this}}},{name:function(et){return"update".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe,it){var Rt;if("mixed"!==this.type&&"mixed"!==ct&&ct!==this.type)throw new ce("Graph.".concat(mt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new ce("Graph.".concat(mt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Yt=""+ge,Dn=""+Oe;if(Oe=arguments[2],it=arguments[3],!(Rt=j(this,Yt,Dn,ct)))throw new Me("Graph.".concat(mt,': could not find an edge for the given path ("').concat(Yt,'" - "').concat(Dn,'").'))}else{if("mixed"!==ct)throw new ce("Graph.".concat(mt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Rt=this._edges.get(ge=""+ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'))}if("function"!=typeof it)throw new gt("Graph.".concat(mt,": updater should be a function."));return Rt.attributes[Oe]=it(Rt.attributes[Oe]),this.emit("edgeAttributesUpdated",{key:Rt.key,type:"set",attributes:Rt.attributes,name:Oe}),this}}},{name:function(et){return"remove".concat(et,"Attribute")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe){var it;if("mixed"!==this.type&&"mixed"!==ct&&ct!==this.type)throw new ce("Graph.".concat(mt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ce("Graph.".concat(mt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Rt=""+ge,Yt=""+Oe;if(Oe=arguments[2],!(it=j(this,Rt,Yt,ct)))throw new Me("Graph.".concat(mt,': could not find an edge for the given path ("').concat(Rt,'" - "').concat(Yt,'").'))}else{if("mixed"!==ct)throw new ce("Graph.".concat(mt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(it=this._edges.get(ge=""+ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'))}return delete it.attributes[Oe],this.emit("edgeAttributesUpdated",{key:it.key,type:"remove",attributes:it.attributes,name:Oe}),this}}},{name:function(et){return"replace".concat(et,"Attributes")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe){var it;if("mixed"!==this.type&&"mixed"!==ct&&ct!==this.type)throw new ce("Graph.".concat(mt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ce("Graph.".concat(mt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Rt=""+ge,Yt=""+Oe;if(Oe=arguments[2],!(it=j(this,Rt,Yt,ct)))throw new Me("Graph.".concat(mt,': could not find an edge for the given path ("').concat(Rt,'" - "').concat(Yt,'").'))}else{if("mixed"!==ct)throw new ce("Graph.".concat(mt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(it=this._edges.get(ge=""+ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'))}if(!Z(Oe))throw new gt("Graph.".concat(mt,": provided attributes are not a plain object."));return it.attributes=Oe,this.emit("edgeAttributesUpdated",{key:it.key,type:"replace",attributes:it.attributes}),this}}},{name:function(et){return"merge".concat(et,"Attributes")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe){var it;if("mixed"!==this.type&&"mixed"!==ct&&ct!==this.type)throw new ce("Graph.".concat(mt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ce("Graph.".concat(mt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Rt=""+ge,Yt=""+Oe;if(Oe=arguments[2],!(it=j(this,Rt,Yt,ct)))throw new Me("Graph.".concat(mt,': could not find an edge for the given path ("').concat(Rt,'" - "').concat(Yt,'").'))}else{if("mixed"!==ct)throw new ce("Graph.".concat(mt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(it=this._edges.get(ge=""+ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'))}if(!Z(Oe))throw new gt("Graph.".concat(mt,": provided attributes are not a plain object."));return R(it.attributes,Oe),this.emit("edgeAttributesUpdated",{key:it.key,type:"merge",attributes:it.attributes,data:Oe}),this}}},{name:function(et){return"update".concat(et,"Attributes")},attacher:function(et,mt,ct){et.prototype[mt]=function(ge,Oe){var it;if("mixed"!==this.type&&"mixed"!==ct&&ct!==this.type)throw new ce("Graph.".concat(mt,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new ce("Graph.".concat(mt,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Rt=""+ge,Yt=""+Oe;if(Oe=arguments[2],!(it=j(this,Rt,Yt,ct)))throw new Me("Graph.".concat(mt,': could not find an edge for the given path ("').concat(Rt,'" - "').concat(Yt,'").'))}else{if("mixed"!==ct)throw new ce("Graph.".concat(mt,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(it=this._edges.get(ge=""+ge)))throw new Me("Graph.".concat(mt,': could not find the "').concat(ge,'" edge in the graph.'))}if("function"!=typeof Oe)throw new gt("Graph.".concat(mt,": provided updater is not a function."));return it.attributes=Oe(it.attributes),this.emit("edgeAttributesUpdated",{key:it.key,type:"update",attributes:it.attributes}),this}}}],Ye=ot,De=Ge,ze=function(){var et=arguments,mt=null,ct=-1;return new Ye(function(){for(var ge=null;;){if(null===mt){if(++ct>=et.length)return{done:!0};mt=De(et[ct])}if(!0!==(ge=mt.next()).done)break;mt=null}return ge})},xt=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function un(et,mt,ct,ge){var Oe=!1;for(var it in mt)if(it!==ge){var Rt=mt[it];if(Oe=ct(Rt.key,Rt.attributes,Rt.source.key,Rt.target.key,Rt.source.attributes,Rt.target.attributes,Rt.undirected),et&&Oe)return Rt.key}}function _n(et,mt,ct,ge){var Oe,it,Rt,Yt=!1;for(var Dn in mt)if(Dn!==ge){Oe=mt[Dn];do{if(Yt=ct(Oe.key,Oe.attributes,(it=Oe.source).key,(Rt=Oe.target).key,it.attributes,Rt.attributes,Oe.undirected),et&&Yt)return Oe.key;Oe=Oe.next}while(void 0!==Oe)}}function Jn(et,mt){var ct,ge=Object.keys(et),Oe=ge.length,it=0;return new ot(function(){do{if(ct)ct=ct.next;else{if(it>=Oe)return{done:!0};var Rt=ge[it++];if(Rt===mt){ct=void 0;continue}ct=et[Rt]}}while(!ct);return{done:!1,value:{edge:ct.key,attributes:ct.attributes,source:ct.source.key,target:ct.target.key,sourceAttributes:ct.source.attributes,targetAttributes:ct.target.attributes,undirected:ct.undirected}}})}function Dr(et,mt,ct,ge){var Oe=mt[ct];if(Oe){var it=Oe.source,Rt=Oe.target;return ge(Oe.key,Oe.attributes,it.key,Rt.key,it.attributes,Rt.attributes,Oe.undirected)&&et?Oe.key:void 0}}function ps(et,mt,ct,ge){var Oe=mt[ct];if(Oe){var it=!1;do{if(it=ge(Oe.key,Oe.attributes,Oe.source.key,Oe.target.key,Oe.source.attributes,Oe.target.attributes,Oe.undirected),et&&it)return Oe.key;Oe=Oe.next}while(void 0!==Oe)}}function kr(et,mt){var ct=et[mt];return void 0!==ct.next?new ot(function(){if(!ct)return{done:!0};var ge={edge:ct.key,attributes:ct.attributes,source:ct.source.key,target:ct.target.key,sourceAttributes:ct.source.attributes,targetAttributes:ct.target.attributes,undirected:ct.undirected};return ct=ct.next,{done:!1,value:ge}}):ot.of({edge:ct.key,attributes:ct.attributes,source:ct.source.key,target:ct.target.key,sourceAttributes:ct.source.attributes,targetAttributes:ct.target.attributes,undirected:ct.undirected})}function Wo(et,mt){if(0===et.size)return[];if("mixed"===mt||mt===et.type)return"function"==typeof Array.from?Array.from(et._edges.keys()):wt(et._edges.keys(),et._edges.size);for(var ct,ge,it=new Array("undirected"===mt?et.undirectedSize:et.directedSize),Rt="undirected"===mt,Yt=et._edges.values(),Dn=0;!0!==(ct=Yt.next()).done;)(ge=ct.value).undirected===Rt&&(it[Dn++]=ge.key);return it}function tr(et,mt,ct,ge){if(0!==mt.size)for(var Oe,it,Rt="mixed"!==ct&&ct!==mt.type,Yt="undirected"===ct,Dn=!1,Ai=mt._edges.values();!0!==(Oe=Ai.next()).done;)if(it=Oe.value,!Rt||it.undirected===Yt){var gi=it.key,pr=it.source,ur=it.target;if(Dn=ge(gi,it.attributes,pr.key,ur.key,pr.attributes,ur.attributes,it.undirected),et&&Dn)return gi}}function il(et,mt){if(0===et.size)return ot.empty();var ct="mixed"!==mt&&mt!==et.type,ge="undirected"===mt,Oe=et._edges.values();return new ot(function(){for(var it,Rt;;){if((it=Oe.next()).done)return it;if(Rt=it.value,!ct||Rt.undirected===ge)break}return{value:{edge:Rt.key,attributes:Rt.attributes,source:Rt.source.key,target:Rt.target.key,sourceAttributes:Rt.source.attributes,targetAttributes:Rt.target.attributes,undirected:Rt.undirected},done:!1}})}function $l(et,mt,ct,ge,Oe,it){var Rt,Yt=mt?_n:un;if("undirected"!==ct&&("out"!==ge&&(Rt=Yt(et,Oe.in,it),et&&Rt)||"in"!==ge&&(Rt=Yt(et,Oe.out,it,ge?void 0:Oe.key),et&&Rt))||"directed"!==ct&&(Rt=Yt(et,Oe.undirected,it),et&&Rt))return Rt}function ql(et,mt,ct,ge){var Oe=[];return $l(!1,et,mt,ct,ge,function(it){Oe.push(it)}),Oe}function Wf(et,mt,ct){var ge=ot.empty();return"undirected"!==et&&("out"!==mt&&void 0!==ct.in&&(ge=ze(ge,Jn(ct.in))),"in"!==mt&&void 0!==ct.out&&(ge=ze(ge,Jn(ct.out,mt?void 0:ct.key)))),"directed"!==et&&void 0!==ct.undirected&&(ge=ze(ge,Jn(ct.undirected))),ge}function jf(et,mt,ct,ge,Oe,it,Rt){var Yt,Dn=ct?ps:Dr;if("undirected"!==mt&&(void 0!==Oe.in&&"out"!==ge&&(Yt=Dn(et,Oe.in,it,Rt),et&&Yt)||void 0!==Oe.out&&"in"!==ge&&(ge||Oe.key!==it)&&(Yt=Dn(et,Oe.out,it,Rt),et&&Yt))||"directed"!==mt&&void 0!==Oe.undirected&&(Yt=Dn(et,Oe.undirected,it,Rt),et&&Yt))return Yt}function ih(et,mt,ct,ge,Oe){var it=[];return jf(!1,et,mt,ct,ge,Oe,function(Rt){it.push(Rt)}),it}function uc(et,mt,ct,ge){var Oe=ot.empty();return"undirected"!==et&&(void 0!==ct.in&&"out"!==mt&&ge in ct.in&&(Oe=ze(Oe,kr(ct.in,ge))),void 0!==ct.out&&"in"!==mt&&ge in ct.out&&(mt||ct.key!==ge)&&(Oe=ze(Oe,kr(ct.out,ge)))),"directed"!==et&&void 0!==ct.undirected&&ge in ct.undirected&&(Oe=ze(Oe,kr(ct.undirected,ge))),Oe}var Sh=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ku(){this.A=null,this.B=null}function Xa(et,mt,ct,ge,Oe){for(var it in ge){var Rt=ge[it],Yt=Rt.source,Ai=Yt===ct?Rt.target:Yt;if(!mt||!mt.has(Ai.key)){var oi=Oe(Ai.key,Ai.attributes);if(et&&oi)return Ai.key}}}function Pd(et,mt,ct,ge,Oe){if("mixed"!==mt){if("undirected"===mt)return Xa(et,null,ge,ge.undirected,Oe);if("string"==typeof ct)return Xa(et,null,ge,ge[ct],Oe)}var it,Rt=new ku;if("undirected"!==mt){if("out"!==ct){if(it=Xa(et,null,ge,ge.in,Oe),et&&it)return it;Rt.wrap(ge.in)}if("in"!==ct){if(it=Xa(et,Rt,ge,ge.out,Oe),et&&it)return it;Rt.wrap(ge.out)}}if("directed"!==mt&&(it=Xa(et,Rt,ge,ge.undirected,Oe),et&&it))return it}function uu(et,mt,ct){var ge=Object.keys(ct),Oe=ge.length,it=0;return new ot(function(){var Rt=null;do{if(it>=Oe)return et&&et.wrap(ct),{done:!0};var Yt=ct[ge[it++]],Dn=Yt.source;Rt=Dn===mt?Yt.target:Dn,et&&et.has(Rt.key)&&(Rt=null)}while(null===Rt);return{done:!1,value:{neighbor:Rt.key,attributes:Rt.attributes}}})}function Ou(et,mt,ct,ge,Oe){for(var it,Rt,Yt,Dn,Ai,oi,gi,yr=ge._nodes.values(),pr=ge.type;!0!==(it=yr.next()).done;){var ur=!1;if(Rt=it.value,"undirected"!==pr)for(Yt in Dn=Rt.out){Ai=Dn[Yt];do{if(ur=!0,gi=Oe(Rt.key,(oi=Ai.target).key,Rt.attributes,oi.attributes,Ai.key,Ai.attributes,Ai.undirected),et&&gi)return Ai;Ai=Ai.next}while(Ai)}if("directed"!==pr)for(Yt in Dn=Rt.undirected)if(!(mt&&Rt.key>Yt)){Ai=Dn[Yt];do{if((oi=Ai.target).key!==Yt&&(oi=Ai.source),ur=!0,gi=Oe(Rt.key,oi.key,Rt.attributes,oi.attributes,Ai.key,Ai.attributes,Ai.undirected),et&&gi)return Ai;Ai=Ai.next}while(Ai)}if(ct&&!ur&&(gi=Oe(Rt.key,null,Rt.attributes,null,null,null,null),et&&gi))return null}}function nd(et){if(!Z(et))throw new gt('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in et))throw new gt("Graph.import: serialized node is missing its key.");if("attributes"in et&&(!Z(et.attributes)||null===et.attributes))throw new gt("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function ff(et){if(!Z(et))throw new gt('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in et))throw new gt("Graph.import: serialized edge is missing its source.");if(!("target"in et))throw new gt("Graph.import: serialized edge is missing its target.");if("attributes"in et&&(!Z(et.attributes)||null===et.attributes))throw new gt("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in et&&"boolean"!=typeof et.undirected)throw new gt("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}ku.prototype.wrap=function(et){null===this.A?this.A=et:null===this.B&&(this.B=et)},ku.prototype.has=function(et){return null!==this.A&&et in this.A||null!==this.B&&et in this.B};var id,pl=(id=255&Math.floor(256*Math.random()),function(){return id++}),pf=new Set(["directed","undirected","mixed"]),rh=new Set(["domain","_events","_eventsCount","_maxListeners"]),gf={allowSelfLoops:!0,multi:!1,type:"mixed"};function kd(et,mt,ct){var ge=new et.NodeDataClass(mt,ct);return et._nodes.set(mt,ge),et.emit("nodeAdded",{key:mt,attributes:ct}),ge}function Ic(et,mt,ct,ge,Oe,it,Rt,Yt){if(!ge&&"undirected"===et.type)throw new ce("Graph.".concat(mt,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(ge&&"directed"===et.type)throw new ce("Graph.".concat(mt,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(Yt&&!Z(Yt))throw new gt("Graph.".concat(mt,': invalid attributes. Expecting an object but got "').concat(Yt,'"'));if(it=""+it,Rt=""+Rt,Yt=Yt||{},!et.allowSelfLoops&&it===Rt)throw new ce("Graph.".concat(mt,': source & target are the same ("').concat(it,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Dn=et._nodes.get(it),Ai=et._nodes.get(Rt);if(!Dn)throw new Me("Graph.".concat(mt,': source node "').concat(it,'" not found.'));if(!Ai)throw new Me("Graph.".concat(mt,': target node "').concat(Rt,'" not found.'));var oi={key:null,undirected:ge,source:it,target:Rt,attributes:Yt};if(ct)Oe=et._edgeKeyGenerator();else if(et._edges.has(Oe=""+Oe))throw new ce("Graph.".concat(mt,': the "').concat(Oe,'" edge already exists in the graph.'));if(!et.multi&&(ge?void 0!==Dn.undirected[Rt]:void 0!==Dn.out[Rt]))throw new ce("Graph.".concat(mt,': an edge linking "').concat(it,'" to "').concat(Rt,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var gi=new $n(ge,Oe,Dn,Ai,Yt);et._edges.set(Oe,gi);var yr=it===Rt;return ge?(Dn.undirectedDegree++,Ai.undirectedDegree++,yr&&et._undirectedSelfLoopCount++):(Dn.outDegree++,Ai.inDegree++,yr&&et._directedSelfLoopCount++),et.multi?gi.attachMulti():gi.attach(),ge?et._undirectedSize++:et._directedSize++,oi.key=Oe,et.emit("edgeAdded",oi),Oe}function Mg(et,mt,ct,ge,Oe,it,Rt,Yt,Dn){if(!ge&&"undirected"===et.type)throw new ce("Graph.".concat(mt,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(ge&&"directed"===et.type)throw new ce("Graph.".concat(mt,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(Yt)if(Dn){if("function"!=typeof Yt)throw new gt("Graph.".concat(mt,': invalid updater function. Expecting a function but got "').concat(Yt,'"'))}else if(!Z(Yt))throw new gt("Graph.".concat(mt,': invalid attributes. Expecting an object but got "').concat(Yt,'"'));var Ai;if(it=""+it,Rt=""+Rt,Dn&&(Ai=Yt,Yt=void 0),!et.allowSelfLoops&&it===Rt)throw new ce("Graph.".concat(mt,': source & target are the same ("').concat(it,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var oi,gi,yr=et._nodes.get(it),pr=et._nodes.get(Rt);if(!ct&&(oi=et._edges.get(Oe))){if(!(oi.source.key===it&&oi.target.key===Rt||ge&&oi.source.key===Rt&&oi.target.key===it))throw new ce("Graph.".concat(mt,': inconsistency detected when attempting to merge the "').concat(Oe,'" edge with "').concat(it,'" source & "').concat(Rt,'" target vs. ("').concat(oi.source.key,'", "').concat(oi.target.key,'").'));gi=oi}if(gi||et.multi||!yr||(gi=ge?yr.undirected[Rt]:yr.out[Rt]),gi){var ur=[gi.key,!1,!1,!1];return(Dn?Ai:Yt)?(Dn?(gi.attributes=Ai(gi.attributes),et.emit("edgeAttributesUpdated",{type:"replace",key:gi.key,attributes:gi.attributes})):(R(gi.attributes,Yt),et.emit("edgeAttributesUpdated",{type:"merge",key:gi.key,attributes:gi.attributes,data:Yt})),ur):ur}Yt=Yt||{},Dn&&Ai&&(Yt=Ai(Yt));var So={key:null,undirected:ge,source:it,target:Rt,attributes:Yt};if(ct)Oe=et._edgeKeyGenerator();else if(et._edges.has(Oe=""+Oe))throw new ce("Graph.".concat(mt,': the "').concat(Oe,'" edge already exists in the graph.'));var Eo=!1,gs=!1;yr||(yr=kd(et,it,{}),Eo=!0,it===Rt&&(pr=yr,gs=!0)),pr||(pr=kd(et,Rt,{}),gs=!0),oi=new $n(ge,Oe,yr,pr,Yt),et._edges.set(Oe,oi);var Ea=it===Rt;return ge?(yr.undirectedDegree++,pr.undirectedDegree++,Ea&&et._undirectedSelfLoopCount++):(yr.outDegree++,pr.inDegree++,Ea&&et._directedSelfLoopCount++),et.multi?oi.attachMulti():oi.attach(),ge?et._undirectedSize++:et._directedSize++,So.key=Oe,et.emit("edgeAdded",So),[Oe,!0,Eo,gs]}function Th(et,mt){et._edges.delete(mt.key);var ct=mt.source,ge=mt.target,Oe=mt.attributes,it=mt.undirected,Rt=ct===ge;it?(ct.undirectedDegree--,ge.undirectedDegree--,Rt&&et._undirectedSelfLoopCount--):(ct.outDegree--,ge.inDegree--,Rt&&et._directedSelfLoopCount--),et.multi?mt.detachMulti():mt.detach(),it?et._undirectedSize--:et._directedSize--,et.emit("edgeDropped",{key:mt.key,attributes:Oe,source:ct.key,target:ge.key,undirected:it})}var et,ro=function(et){function mt(ge){var Oe;if(Oe=et.call(this)||this,"boolean"!=typeof(ge=R({},gf,ge)).multi)throw new gt("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(ge.multi,'".'));if(!pf.has(ge.type))throw new gt('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(ge.type,'".'));if("boolean"!=typeof ge.allowSelfLoops)throw new gt("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(ge.allowSelfLoops,'".'));var it="mixed"===ge.type?At:"directed"===ge.type?Ft:Tn;ie(L(Oe),"NodeDataClass",it);var Rt="geid_"+pl()+"_",Yt=0;return ie(L(Oe),"_attributes",{}),ie(L(Oe),"_nodes",new Map),ie(L(Oe),"_edges",new Map),ie(L(Oe),"_directedSize",0),ie(L(Oe),"_undirectedSize",0),ie(L(Oe),"_directedSelfLoopCount",0),ie(L(Oe),"_undirectedSelfLoopCount",0),ie(L(Oe),"_edgeKeyGenerator",function(){var Dn;do{Dn=Rt+Yt++}while(Oe._edges.has(Dn));return Dn}),ie(L(Oe),"_options",ge),rh.forEach(function(Dn){return ie(L(Oe),Dn,Oe[Dn])}),Y(L(Oe),"order",function(){return Oe._nodes.size}),Y(L(Oe),"size",function(){return Oe._edges.size}),Y(L(Oe),"directedSize",function(){return Oe._directedSize}),Y(L(Oe),"undirectedSize",function(){return Oe._undirectedSize}),Y(L(Oe),"selfLoopCount",function(){return Oe._directedSelfLoopCount+Oe._undirectedSelfLoopCount}),Y(L(Oe),"directedSelfLoopCount",function(){return Oe._directedSelfLoopCount}),Y(L(Oe),"undirectedSelfLoopCount",function(){return Oe._undirectedSelfLoopCount}),Y(L(Oe),"multi",Oe._options.multi),Y(L(Oe),"type",Oe._options.type),Y(L(Oe),"allowSelfLoops",Oe._options.allowSelfLoops),Y(L(Oe),"implementation",function(){return"graphology"}),Oe}z(mt,et);var ct=mt.prototype;return ct._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},ct.hasNode=function(ge){return this._nodes.has(""+ge)},ct.hasDirectedEdge=function(ge,Oe){if("undirected"===this.type)return!1;if(1===arguments.length){var Rt=this._edges.get(""+ge);return!!Rt&&!Rt.undirected}if(2===arguments.length){Oe=""+Oe;var Yt=this._nodes.get(ge=""+ge);if(!Yt)return!1;var Dn=Yt.out[Oe];return!(!Dn||this.multi&&!Dn.size)}throw new gt("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ct.hasUndirectedEdge=function(ge,Oe){if("directed"===this.type)return!1;if(1===arguments.length){var Rt=this._edges.get(""+ge);return!!Rt&&Rt.undirected}if(2===arguments.length){Oe=""+Oe;var Yt=this._nodes.get(ge=""+ge);if(!Yt)return!1;var Dn=Yt.undirected[Oe];return!(!Dn||this.multi&&!Dn.size)}throw new gt("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ct.hasEdge=function(ge,Oe){if(1===arguments.length)return this._edges.has(""+ge);if(2===arguments.length){Oe=""+Oe;var Rt=this._nodes.get(ge=""+ge);if(!Rt)return!1;var Yt=void 0!==Rt.out&&Rt.out[Oe];return Yt||(Yt=void 0!==Rt.undirected&&Rt.undirected[Oe]),!(!Yt||this.multi&&!Yt.size)}throw new gt("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},ct.directedEdge=function(ge,Oe){if("undirected"!==this.type){if(ge=""+ge,Oe=""+Oe,this.multi)throw new ce("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var it=this._nodes.get(ge);if(!it)throw new Me('Graph.directedEdge: could not find the "'.concat(ge,'" source node in the graph.'));if(!this._nodes.has(Oe))throw new Me('Graph.directedEdge: could not find the "'.concat(Oe,'" target node in the graph.'));var Rt=it.out&&it.out[Oe]||void 0;return Rt?Rt.key:void 0}},ct.undirectedEdge=function(ge,Oe){if("directed"!==this.type){if(ge=""+ge,Oe=""+Oe,this.multi)throw new ce("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var it=this._nodes.get(ge);if(!it)throw new Me('Graph.undirectedEdge: could not find the "'.concat(ge,'" source node in the graph.'));if(!this._nodes.has(Oe))throw new Me('Graph.undirectedEdge: could not find the "'.concat(Oe,'" target node in the graph.'));var Rt=it.undirected&&it.undirected[Oe]||void 0;return Rt?Rt.key:void 0}},ct.edge=function(ge,Oe){if(this.multi)throw new ce("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");Oe=""+Oe;var it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.edge: could not find the "'.concat(ge,'" source node in the graph.'));if(!this._nodes.has(Oe))throw new Me('Graph.edge: could not find the "'.concat(Oe,'" target node in the graph.'));var Rt=it.out&&it.out[Oe]||it.undirected&&it.undirected[Oe]||void 0;if(Rt)return Rt.key},ct.areDirectedNeighbors=function(ge,Oe){Oe=""+Oe;var it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.areDirectedNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&(Oe in it.in||Oe in it.out)},ct.areOutNeighbors=function(ge,Oe){Oe=""+Oe;var it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.areOutNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&Oe in it.out},ct.areInNeighbors=function(ge,Oe){Oe=""+Oe;var it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.areInNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&Oe in it.in},ct.areUndirectedNeighbors=function(ge,Oe){Oe=""+Oe;var it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.areUndirectedNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"directed"!==this.type&&Oe in it.undirected},ct.areNeighbors=function(ge,Oe){Oe=""+Oe;var it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.areNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&(Oe in it.in||Oe in it.out)||"directed"!==this.type&&Oe in it.undirected},ct.areInboundNeighbors=function(ge,Oe){Oe=""+Oe;var it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.areInboundNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&Oe in it.in||"directed"!==this.type&&Oe in it.undirected},ct.areOutboundNeighbors=function(ge,Oe){Oe=""+Oe;var it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.areOutboundNeighbors: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"!==this.type&&Oe in it.out||"directed"!==this.type&&Oe in it.undirected},ct.inDegree=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.inDegree: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"===this.type?0:Oe.inDegree},ct.outDegree=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.outDegree: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"===this.type?0:Oe.outDegree},ct.directedDegree=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.directedDegree: could not find the "'.concat(ge,'" node in the graph.'));return"undirected"===this.type?0:Oe.inDegree+Oe.outDegree},ct.undirectedDegree=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.undirectedDegree: could not find the "'.concat(ge,'" node in the graph.'));return"directed"===this.type?0:Oe.undirectedDegree},ct.inboundDegree=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.inboundDegree: could not find the "'.concat(ge,'" node in the graph.'));var it=0;return"directed"!==this.type&&(it+=Oe.undirectedDegree),"undirected"!==this.type&&(it+=Oe.inDegree),it},ct.outboundDegree=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.outboundDegree: could not find the "'.concat(ge,'" node in the graph.'));var it=0;return"directed"!==this.type&&(it+=Oe.undirectedDegree),"undirected"!==this.type&&(it+=Oe.outDegree),it},ct.degree=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.degree: could not find the "'.concat(ge,'" node in the graph.'));var it=0;return"directed"!==this.type&&(it+=Oe.undirectedDegree),"undirected"!==this.type&&(it+=Oe.inDegree+Oe.outDegree),it},ct.inDegreeWithoutSelfLoops=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));if("undirected"===this.type)return 0;var it=Oe.in[ge];return Oe.inDegree-(it?this.multi?it.size:1:0)},ct.outDegreeWithoutSelfLoops=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));if("undirected"===this.type)return 0;var it=Oe.out[ge];return Oe.outDegree-(it?this.multi?it.size:1:0)},ct.directedDegreeWithoutSelfLoops=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));if("undirected"===this.type)return 0;var it=Oe.out[ge];return Oe.inDegree+Oe.outDegree-2*(it?this.multi?it.size:1:0)},ct.undirectedDegreeWithoutSelfLoops=function(ge){var Oe=this._nodes.get(ge=""+ge);if(!Oe)throw new Me('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));if("directed"===this.type)return 0;var it=Oe.undirected[ge];return Oe.undirectedDegree-2*(it?this.multi?it.size:1:0)},ct.inboundDegreeWithoutSelfLoops=function(ge){var Oe,it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));var Rt=0,Yt=0;return"directed"!==this.type&&(Rt+=it.undirectedDegree,Yt+=2*((Oe=it.undirected[ge])?this.multi?Oe.size:1:0)),"undirected"!==this.type&&(Rt+=it.inDegree,Yt+=(Oe=it.out[ge])?this.multi?Oe.size:1:0),Rt-Yt},ct.outboundDegreeWithoutSelfLoops=function(ge){var Oe,it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));var Rt=0,Yt=0;return"directed"!==this.type&&(Rt+=it.undirectedDegree,Yt+=2*((Oe=it.undirected[ge])?this.multi?Oe.size:1:0)),"undirected"!==this.type&&(Rt+=it.outDegree,Yt+=(Oe=it.in[ge])?this.multi?Oe.size:1:0),Rt-Yt},ct.degreeWithoutSelfLoops=function(ge){var Oe,it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.degreeWithoutSelfLoops: could not find the "'.concat(ge,'" node in the graph.'));var Rt=0,Yt=0;return"directed"!==this.type&&(Rt+=it.undirectedDegree,Yt+=2*((Oe=it.undirected[ge])?this.multi?Oe.size:1:0)),"undirected"!==this.type&&(Rt+=it.inDegree+it.outDegree,Yt+=2*((Oe=it.out[ge])?this.multi?Oe.size:1:0)),Rt-Yt},ct.source=function(ge){var Oe=this._edges.get(ge=""+ge);if(!Oe)throw new Me('Graph.source: could not find the "'.concat(ge,'" edge in the graph.'));return Oe.source.key},ct.target=function(ge){var Oe=this._edges.get(ge=""+ge);if(!Oe)throw new Me('Graph.target: could not find the "'.concat(ge,'" edge in the graph.'));return Oe.target.key},ct.extremities=function(ge){var Oe=this._edges.get(ge=""+ge);if(!Oe)throw new Me('Graph.extremities: could not find the "'.concat(ge,'" edge in the graph.'));return[Oe.source.key,Oe.target.key]},ct.opposite=function(ge,Oe){ge=""+ge;var it=this._edges.get(Oe=""+Oe);if(!it)throw new Me('Graph.opposite: could not find the "'.concat(Oe,'" edge in the graph.'));var Rt=it.source.key,Yt=it.target.key;if(ge===Rt)return Yt;if(ge===Yt)return Rt;throw new Me('Graph.opposite: the "'.concat(ge,'" node is not attached to the "').concat(Oe,'" edge (').concat(Rt,", ").concat(Yt,")."))},ct.hasExtremity=function(ge,Oe){Oe=""+Oe;var it=this._edges.get(ge=""+ge);if(!it)throw new Me('Graph.hasExtremity: could not find the "'.concat(ge,'" edge in the graph.'));return it.source.key===Oe||it.target.key===Oe},ct.isUndirected=function(ge){var Oe=this._edges.get(ge=""+ge);if(!Oe)throw new Me('Graph.isUndirected: could not find the "'.concat(ge,'" edge in the graph.'));return Oe.undirected},ct.isDirected=function(ge){var Oe=this._edges.get(ge=""+ge);if(!Oe)throw new Me('Graph.isDirected: could not find the "'.concat(ge,'" edge in the graph.'));return!Oe.undirected},ct.isSelfLoop=function(ge){var Oe=this._edges.get(ge=""+ge);if(!Oe)throw new Me('Graph.isSelfLoop: could not find the "'.concat(ge,'" edge in the graph.'));return Oe.source===Oe.target},ct.addNode=function(ge,Oe){return function(Rt,Yt,Dn){if(Dn&&!Z(Dn))throw new gt('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(Dn,'"'));if(Dn=Dn||{},Rt._nodes.has(Yt=""+Yt))throw new ce('Graph.addNode: the "'.concat(Yt,'" node already exist in the graph.'));var Ai=new Rt.NodeDataClass(Yt,Dn);return Rt._nodes.set(Yt,Ai),Rt.emit("nodeAdded",{key:Yt,attributes:Dn}),Ai}(this,ge,Oe).key},ct.mergeNode=function(ge,Oe){if(Oe&&!Z(Oe))throw new gt('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(Oe,'"'));Oe=Oe||{};var it=this._nodes.get(ge=""+ge);return it?(Oe&&(R(it.attributes,Oe),this.emit("nodeAttributesUpdated",{type:"merge",key:ge,attributes:it.attributes,data:Oe})),[ge,!1]):(it=new this.NodeDataClass(ge,Oe),this._nodes.set(ge,it),this.emit("nodeAdded",{key:ge,attributes:Oe}),[ge,!0])},ct.updateNode=function(ge,Oe){if(Oe&&"function"!=typeof Oe)throw new gt('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(Oe,'"'));var it=this._nodes.get(ge=""+ge);if(it)return Oe&&(it.attributes=Oe(it.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:ge,attributes:it.attributes})),[ge,!1];var Yt=Oe?Oe({}):{};return it=new this.NodeDataClass(ge,Yt),this._nodes.set(ge,it),this.emit("nodeAdded",{key:ge,attributes:Yt}),[ge,!0]},ct.dropNode=function(ge){var Oe,it=this._nodes.get(ge=""+ge);if(!it)throw new Me('Graph.dropNode: could not find the "'.concat(ge,'" node in the graph.'));if("undirected"!==this.type){for(var Rt in it.out){Oe=it.out[Rt];do{Th(this,Oe),Oe=Oe.next}while(Oe)}for(var Yt in it.in){Oe=it.in[Yt];do{Th(this,Oe),Oe=Oe.next}while(Oe)}}if("directed"!==this.type)for(var Dn in it.undirected){Oe=it.undirected[Dn];do{Th(this,Oe),Oe=Oe.next}while(Oe)}this._nodes.delete(ge),this.emit("nodeDropped",{key:ge,attributes:it.attributes})},ct.dropEdge=function(ge){var Oe;if(arguments.length>1){var it=""+arguments[0],Rt=""+arguments[1];if(!(Oe=j(this,it,Rt,this.type)))throw new Me('Graph.dropEdge: could not find the "'.concat(it,'" -> "').concat(Rt,'" edge in the graph.'))}else if(!(Oe=this._edges.get(ge=""+ge)))throw new Me('Graph.dropEdge: could not find the "'.concat(ge,'" edge in the graph.'));return Th(this,Oe),this},ct.dropDirectedEdge=function(ge,Oe){if(arguments.length<2)throw new ce("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ce("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var it=j(this,ge=""+ge,Oe=""+Oe,"directed");if(!it)throw new Me('Graph.dropDirectedEdge: could not find a "'.concat(ge,'" -> "').concat(Oe,'" edge in the graph.'));return Th(this,it),this},ct.dropUndirectedEdge=function(ge,Oe){if(arguments.length<2)throw new ce("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ce("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var it=j(this,ge,Oe,"undirected");if(!it)throw new Me('Graph.dropUndirectedEdge: could not find a "'.concat(ge,'" -> "').concat(Oe,'" edge in the graph.'));return Th(this,it),this},ct.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},ct.clearEdges=function(){for(var ge,Oe=this._nodes.values();!0!==(ge=Oe.next()).done;)ge.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},ct.getAttribute=function(ge){return this._attributes[ge]},ct.getAttributes=function(){return this._attributes},ct.hasAttribute=function(ge){return this._attributes.hasOwnProperty(ge)},ct.setAttribute=function(ge,Oe){return this._attributes[ge]=Oe,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:ge}),this},ct.updateAttribute=function(ge,Oe){if("function"!=typeof Oe)throw new gt("Graph.updateAttribute: updater should be a function.");return this._attributes[ge]=Oe(this._attributes[ge]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:ge}),this},ct.removeAttribute=function(ge){return delete this._attributes[ge],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:ge}),this},ct.replaceAttributes=function(ge){if(!Z(ge))throw new gt("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=ge,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},ct.mergeAttributes=function(ge){if(!Z(ge))throw new gt("Graph.mergeAttributes: provided attributes are not a plain object.");return R(this._attributes,ge),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:ge}),this},ct.updateAttributes=function(ge){if("function"!=typeof ge)throw new gt("Graph.updateAttributes: provided updater is not a function.");return this._attributes=ge(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},ct.updateEachNodeAttributes=function(ge,Oe){if("function"!=typeof ge)throw new gt("Graph.updateEachNodeAttributes: expecting an updater function.");if(Oe&&!G(Oe))throw new gt("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var it,Rt,Yt=this._nodes.values();!0!==(it=Yt.next()).done;)(Rt=it.value).attributes=ge(Rt.key,Rt.attributes);this.emit("eachNodeAttributesUpdated",{hints:Oe||null})},ct.updateEachEdgeAttributes=function(ge,Oe){if("function"!=typeof ge)throw new gt("Graph.updateEachEdgeAttributes: expecting an updater function.");if(Oe&&!G(Oe))throw new gt("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var it,Rt,Yt,Dn,Ai=this._edges.values();!0!==(it=Ai.next()).done;)Yt=(Rt=it.value).source,Rt.attributes=ge(Rt.key,Rt.attributes,Yt.key,(Dn=Rt.target).key,Yt.attributes,Dn.attributes,Rt.undirected);this.emit("eachEdgeAttributesUpdated",{hints:Oe||null})},ct.forEachAdjacencyEntry=function(ge){if("function"!=typeof ge)throw new gt("Graph.forEachAdjacencyEntry: expecting a callback.");Ou(!1,!1,!1,this,ge)},ct.forEachAdjacencyEntryWithOrphans=function(ge){if("function"!=typeof ge)throw new gt("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Ou(!1,!1,!0,this,ge)},ct.forEachAssymetricAdjacencyEntry=function(ge){if("function"!=typeof ge)throw new gt("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Ou(!1,!0,!1,this,ge)},ct.forEachAssymetricAdjacencyEntryWithOrphans=function(ge){if("function"!=typeof ge)throw new gt("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Ou(!1,!0,!0,this,ge)},ct.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):wt(this._nodes.keys(),this._nodes.size)},ct.forEachNode=function(ge){if("function"!=typeof ge)throw new gt("Graph.forEachNode: expecting a callback.");for(var Oe,it,Rt=this._nodes.values();!0!==(Oe=Rt.next()).done;)ge((it=Oe.value).key,it.attributes)},ct.findNode=function(ge){if("function"!=typeof ge)throw new gt("Graph.findNode: expecting a callback.");for(var Oe,it,Rt=this._nodes.values();!0!==(Oe=Rt.next()).done;)if(ge((it=Oe.value).key,it.attributes))return it.key},ct.mapNodes=function(ge){if("function"!=typeof ge)throw new gt("Graph.mapNode: expecting a callback.");for(var Oe,it,Rt=this._nodes.values(),Yt=new Array(this.order),Dn=0;!0!==(Oe=Rt.next()).done;)Yt[Dn++]=ge((it=Oe.value).key,it.attributes);return Yt},ct.someNode=function(ge){if("function"!=typeof ge)throw new gt("Graph.someNode: expecting a callback.");for(var Oe,it,Rt=this._nodes.values();!0!==(Oe=Rt.next()).done;)if(ge((it=Oe.value).key,it.attributes))return!0;return!1},ct.everyNode=function(ge){if("function"!=typeof ge)throw new gt("Graph.everyNode: expecting a callback.");for(var Oe,it,Rt=this._nodes.values();!0!==(Oe=Rt.next()).done;)if(!ge((it=Oe.value).key,it.attributes))return!1;return!0},ct.filterNodes=function(ge){if("function"!=typeof ge)throw new gt("Graph.filterNodes: expecting a callback.");for(var Oe,it,Rt=this._nodes.values(),Yt=[];!0!==(Oe=Rt.next()).done;)ge((it=Oe.value).key,it.attributes)&&Yt.push(it.key);return Yt},ct.reduceNodes=function(ge,Oe){if("function"!=typeof ge)throw new gt("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new gt("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var it,Rt,Yt=Oe,Dn=this._nodes.values();!0!==(it=Dn.next()).done;)Yt=ge(Yt,(Rt=it.value).key,Rt.attributes);return Yt},ct.nodeEntries=function(){var ge=this._nodes.values();return new ot(function(){var Oe=ge.next();if(Oe.done)return Oe;var it=Oe.value;return{value:{node:it.key,attributes:it.attributes},done:!1}})},ct.export=function(){var ge=new Array(this._nodes.size),Oe=0;this._nodes.forEach(function(Rt,Yt){var Ai,oi;ge[Oe++]=(oi={key:Yt},te((Ai=Rt).attributes)||(oi.attributes=R({},Ai.attributes)),oi)});var it=new Array(this._edges.size);return Oe=0,this._edges.forEach(function(Rt,Yt){var Ai,oi;it[Oe++]=(oi={key:Yt,source:(Ai=Rt).source.key,target:Ai.target.key},te(Ai.attributes)||(oi.attributes=R({},Ai.attributes)),Ai.undirected&&(oi.undirected=!0),oi)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:ge,edges:it}},ct.import=function(ge){var Oe,it,Rt,Yt,Dn,Ai=this,oi=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(J(ge))return ge.forEachNode(function(ms,Ya){oi?Ai.mergeNode(ms,Ya):Ai.addNode(ms,Ya)}),ge.forEachEdge(function(ms,Ya,Fu,hs,ss,Dg,Vp){oi?Vp?Ai.mergeUndirectedEdgeWithKey(ms,Fu,hs,Ya):Ai.mergeDirectedEdgeWithKey(ms,Fu,hs,Ya):Vp?Ai.addUndirectedEdgeWithKey(ms,Fu,hs,Ya):Ai.addDirectedEdgeWithKey(ms,Fu,hs,Ya)}),this;if(!Z(ge))throw new gt("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(ge.attributes){if(!Z(ge.attributes))throw new gt("Graph.import: invalid attributes. Expecting a plain object.");oi?this.mergeAttributes(ge.attributes):this.replaceAttributes(ge.attributes)}if(ge.nodes){if(Rt=ge.nodes,!Array.isArray(Rt))throw new gt("Graph.import: invalid nodes. Expecting an array.");for(Oe=0,it=Rt.length;Oe<it;Oe++){nd(Yt=Rt[Oe]);var yr=Yt.key,pr=Yt.attributes;oi?this.mergeNode(yr,pr):this.addNode(yr,pr)}}if(ge.edges){if(Rt=ge.edges,!Array.isArray(Rt))throw new gt("Graph.import: invalid edges. Expecting an array.");for(Oe=0,it=Rt.length;Oe<it;Oe++){ff(Dn=Rt[Oe]);var Ws=Dn.source,So=Dn.target,Eo=Dn.attributes,gs=Dn.undirected,Ea=void 0!==gs&&gs;"key"in Dn?(oi?Ea?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Ea?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,Dn.key,Ws,So,Eo):(oi?Ea?this.mergeUndirectedEdge:this.mergeDirectedEdge:Ea?this.addUndirectedEdge:this.addDirectedEdge).call(this,Ws,So,Eo)}}return this},ct.nullCopy=function(ge){var Oe=new mt(R({},this._options,ge));return Oe.replaceAttributes(R({},this.getAttributes())),Oe},ct.emptyCopy=function(ge){var Oe=this.nullCopy(ge);return this._nodes.forEach(function(it,Rt){var Yt=R({},it.attributes);it=new Oe.NodeDataClass(Rt,Yt),Oe._nodes.set(Rt,it)}),Oe},ct.copy=function(ge){if("string"==typeof(ge=ge||{}).type&&ge.type!==this.type&&"mixed"!==ge.type)throw new ce('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(ge.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof ge.multi&&ge.multi!==this.multi&&!0!==ge.multi)throw new ce("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof ge.allowSelfLoops&&ge.allowSelfLoops!==this.allowSelfLoops&&!0!==ge.allowSelfLoops)throw new ce("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var Oe,it,Rt=this.emptyCopy(ge),Yt=this._edges.values();!0!==(Oe=Yt.next()).done;)Ic(Rt,"copy",!1,(it=Oe.value).undirected,it.key,it.source.key,it.target.key,R({},it.attributes));return Rt},ct.toJSON=function(){return this.export()},ct.toString=function(){return"[object Graph]"},ct.inspect=function(){var ge=this,Oe={};this._nodes.forEach(function(Ai,oi){Oe[oi]=Ai.attributes});var it={},Rt={};this._edges.forEach(function(Ai,oi){var gi,yr=Ai.undirected?"--":"->",pr="",ur=Ai.source.key,Ws=Ai.target.key;Ai.undirected&&ur>Ws&&(gi=ur,ur=Ws,Ws=gi);var So="(".concat(ur,")").concat(yr,"(").concat(Ws,")");oi.startsWith("geid_")?ge.multi&&(void 0===Rt[So]?Rt[So]=0:Rt[So]++,pr+="".concat(Rt[So],". ")):pr+="[".concat(oi,"]: "),it[pr+=So]=Ai.attributes});var Yt={};for(var Dn in this)this.hasOwnProperty(Dn)&&!rh.has(Dn)&&"function"!=typeof this[Dn]&&"symbol"!==be(Dn)&&(Yt[Dn]=this[Dn]);return Yt.attributes=this._attributes,Yt.nodes=Oe,Yt.edges=it,ie(Yt,"constructor",this.constructor),Yt},mt}(ye.exports.EventEmitter);typeof Symbol<"u"&&(ro.prototype[Symbol.for("nodejs.util.inspect.custom")]=ro.prototype.inspect),[{name:function(et){return"".concat(et,"Edge")},generateKey:!0},{name:function(et){return"".concat(et,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(et){return"".concat(et,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(et){return"".concat(et,"EdgeWithKey")}},{name:function(et){return"".concat(et,"DirectedEdgeWithKey")},type:"directed"},{name:function(et){return"".concat(et,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(et){["add","merge","update"].forEach(function(mt){var ct=et.name(mt),ge="add"===mt?Ic:Mg;ro.prototype[ct]=et.generateKey?function(Oe,it,Rt){return ge(this,ct,!0,"undirected"===(et.type||this.type),null,Oe,it,Rt,"update"===mt)}:function(Oe,it,Rt,Yt){return ge(this,ct,!1,"undirected"===(et.type||this.type),Oe,it,Rt,Yt,"update"===mt)}})}),et=ro,kt.forEach(function(mt){var ct=mt.name,ge=mt.attacher;ge(et,ct("Node"),0),ge(et,ct("Source"),1),ge(et,ct("Target"),2),ge(et,ct("Opposite"),3)}),function(et){ln.forEach(function(mt){var ct=mt.name,ge=mt.attacher;ge(et,ct("Edge"),"mixed"),ge(et,ct("DirectedEdge"),"directed"),ge(et,ct("UndirectedEdge"),"undirected")})}(ro),function(et){xt.forEach(function(mt){var ge,Oe,it,Rt;it=(ge=mt).type,Rt=ge.direction,et.prototype[Oe=ge.name]=function(Yt,Dn){if("mixed"!==it&&"mixed"!==this.type&&it!==this.type)return[];if(!arguments.length)return Wo(this,it);if(1===arguments.length){var Ai=this._nodes.get(Yt=""+Yt);if(void 0===Ai)throw new Me("Graph.".concat(Oe,': could not find the "').concat(Yt,'" node in the graph.'));return ql(this.multi,"mixed"===it?this.type:it,Rt,Ai)}if(2===arguments.length){Dn=""+Dn;var oi=this._nodes.get(Yt=""+Yt);if(!oi)throw new Me("Graph.".concat(Oe,':  could not find the "').concat(Yt,'" source node in the graph.'));if(!this._nodes.has(Dn))throw new Me("Graph.".concat(Oe,':  could not find the "').concat(Dn,'" target node in the graph.'));return ih(it,this.multi,Rt,oi,Dn)}throw new gt("Graph.".concat(Oe,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(ct,ge){var Oe=ge.name,it=ge.type,Rt=ge.direction,Yt="forEach"+Oe[0].toUpperCase()+Oe.slice(1,-1);ct.prototype[Yt]=function(gi,yr,pr){if("mixed"===it||"mixed"===this.type||it===this.type){if(1===arguments.length)return tr(!1,this,it,pr=gi);if(2===arguments.length){pr=yr;var ur=this._nodes.get(gi=""+gi);if(void 0===ur)throw new Me("Graph.".concat(Yt,': could not find the "').concat(gi,'" node in the graph.'));return $l(!1,this.multi,"mixed"===it?this.type:it,Rt,ur,pr)}if(3===arguments.length){yr=""+yr;var Ws=this._nodes.get(gi=""+gi);if(!Ws)throw new Me("Graph.".concat(Yt,':  could not find the "').concat(gi,'" source node in the graph.'));if(!this._nodes.has(yr))throw new Me("Graph.".concat(Yt,':  could not find the "').concat(yr,'" target node in the graph.'));return jf(!1,it,this.multi,Rt,Ws,yr,pr)}throw new gt("Graph.".concat(Yt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var Dn="map"+Oe[0].toUpperCase()+Oe.slice(1);ct.prototype[Dn]=function(){var gi,yr=Array.prototype.slice.call(arguments),pr=yr.pop();if(0===yr.length){var ur=0;"directed"!==it&&(ur+=this.undirectedSize),"undirected"!==it&&(ur+=this.directedSize),gi=new Array(ur);var Ws=0;yr.push(function(So,Eo,gs,Ea,ms,Ya,Fu){gi[Ws++]=pr(So,Eo,gs,Ea,ms,Ya,Fu)})}else gi=[],yr.push(function(So,Eo,gs,Ea,ms,Ya,Fu){gi.push(pr(So,Eo,gs,Ea,ms,Ya,Fu))});return this[Yt].apply(this,yr),gi};var Ai="filter"+Oe[0].toUpperCase()+Oe.slice(1);ct.prototype[Ai]=function(){var gi=Array.prototype.slice.call(arguments),yr=gi.pop(),pr=[];return gi.push(function(ur,Ws,So,Eo,gs,Ea,ms){yr(ur,Ws,So,Eo,gs,Ea,ms)&&pr.push(ur)}),this[Yt].apply(this,gi),pr};var oi="reduce"+Oe[0].toUpperCase()+Oe.slice(1);ct.prototype[oi]=function(){var gi,yr,pr=Array.prototype.slice.call(arguments);if(pr.length<2||pr.length>4)throw new gt("Graph.".concat(oi,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(pr.length,")."));if("function"==typeof pr[pr.length-1]&&"function"!=typeof pr[pr.length-2])throw new gt("Graph.".concat(oi,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===pr.length?(gi=pr[0],yr=pr[1],pr=[]):3===pr.length?(gi=pr[1],yr=pr[2],pr=[pr[0]]):4===pr.length&&(gi=pr[2],yr=pr[3],pr=[pr[0],pr[1]]);var ur=yr;return pr.push(function(Ws,So,Eo,gs,Ea,ms,Ya){ur=gi(ur,Ws,So,Eo,gs,Ea,ms,Ya)}),this[Yt].apply(this,pr),ur}}(et,mt),function(ct,ge){var Oe=ge.name,it=ge.type,Rt=ge.direction,Yt="find"+Oe[0].toUpperCase()+Oe.slice(1,-1);ct.prototype[Yt]=function(oi,gi,yr){if("mixed"!==it&&"mixed"!==this.type&&it!==this.type)return!1;if(1===arguments.length)return tr(!0,this,it,yr=oi);if(2===arguments.length){yr=gi;var pr=this._nodes.get(oi=""+oi);if(void 0===pr)throw new Me("Graph.".concat(Yt,': could not find the "').concat(oi,'" node in the graph.'));return $l(!0,this.multi,"mixed"===it?this.type:it,Rt,pr,yr)}if(3===arguments.length){gi=""+gi;var ur=this._nodes.get(oi=""+oi);if(!ur)throw new Me("Graph.".concat(Yt,':  could not find the "').concat(oi,'" source node in the graph.'));if(!this._nodes.has(gi))throw new Me("Graph.".concat(Yt,':  could not find the "').concat(gi,'" target node in the graph.'));return jf(!0,it,this.multi,Rt,ur,gi,yr)}throw new gt("Graph.".concat(Yt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var Dn="some"+Oe[0].toUpperCase()+Oe.slice(1,-1);ct.prototype[Dn]=function(){var oi=Array.prototype.slice.call(arguments),gi=oi.pop();return oi.push(function(yr,pr,ur,Ws,So,Eo,gs){return gi(yr,pr,ur,Ws,So,Eo,gs)}),!!this[Yt].apply(this,oi)};var Ai="every"+Oe[0].toUpperCase()+Oe.slice(1,-1);ct.prototype[Ai]=function(){var oi=Array.prototype.slice.call(arguments),gi=oi.pop();return oi.push(function(yr,pr,ur,Ws,So,Eo,gs){return!gi(yr,pr,ur,Ws,So,Eo,gs)}),!this[Yt].apply(this,oi)}}(et,mt),function(ct,ge){var it=ge.type,Rt=ge.direction,Yt=ge.name.slice(0,-1)+"Entries";ct.prototype[Yt]=function(Dn,Ai){if("mixed"!==it&&"mixed"!==this.type&&it!==this.type)return ot.empty();if(!arguments.length)return il(this,it);if(1===arguments.length){var oi=this._nodes.get(Dn=""+Dn);if(!oi)throw new Me("Graph.".concat(Yt,': could not find the "').concat(Dn,'" node in the graph.'));return Wf(it,Rt,oi)}if(2===arguments.length){Ai=""+Ai;var gi=this._nodes.get(Dn=""+Dn);if(!gi)throw new Me("Graph.".concat(Yt,':  could not find the "').concat(Dn,'" source node in the graph.'));if(!this._nodes.has(Ai))throw new Me("Graph.".concat(Yt,':  could not find the "').concat(Ai,'" target node in the graph.'));return uc(it,Rt,gi,Ai)}throw new gt("Graph.".concat(Yt,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(et,mt)})}(ro),function(et){Sh.forEach(function(mt){var ct,ge,Oe,it,Rt,Yt,Dn;(function Sa(et,mt){var ct=mt.name,ge=mt.type,Oe=mt.direction;et.prototype[ct]=function(it){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return[];var Rt=this._nodes.get(it=""+it);if(void 0===Rt)throw new Me("Graph.".concat(ct,': could not find the "').concat(it,'" node in the graph.'));return function(Yt,Dn,Ai){if("mixed"!==Yt){if("undirected"===Yt)return Object.keys(Ai.undirected);if("string"==typeof Dn)return Object.keys(Ai[Dn])}var oi=[];return Pd(!1,Yt,Dn,Ai,function(gi){oi.push(gi)}),oi}("mixed"===ge?this.type:ge,Oe,Rt)}})(et,mt),function(ct,ge){var Oe=ge.name,it=ge.type,Rt=ge.direction,Yt="forEach"+Oe[0].toUpperCase()+Oe.slice(1,-1);ct.prototype[Yt]=function(gi,yr){if("mixed"===it||"mixed"===this.type||it===this.type){var pr=this._nodes.get(gi=""+gi);if(void 0===pr)throw new Me("Graph.".concat(Yt,': could not find the "').concat(gi,'" node in the graph.'));Pd(!1,"mixed"===it?this.type:it,Rt,pr,yr)}};var Dn="map"+Oe[0].toUpperCase()+Oe.slice(1);ct.prototype[Dn]=function(gi,yr){var pr=[];return this[Yt](gi,function(ur,Ws){pr.push(yr(ur,Ws))}),pr};var Ai="filter"+Oe[0].toUpperCase()+Oe.slice(1);ct.prototype[Ai]=function(gi,yr){var pr=[];return this[Yt](gi,function(ur,Ws){yr(ur,Ws)&&pr.push(ur)}),pr};var oi="reduce"+Oe[0].toUpperCase()+Oe.slice(1);ct.prototype[oi]=function(gi,yr,pr){if(arguments.length<3)throw new gt("Graph.".concat(oi,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var ur=pr;return this[Yt](gi,function(Ws,So){ur=yr(ur,Ws,So)}),ur}}(et,mt),ct=et,it=(ge=mt).type,Rt=ge.direction,Yt=(Oe=ge.name)[0].toUpperCase()+Oe.slice(1,-1),ct.prototype[Dn="find"+Yt]=function(gi,yr){if("mixed"===it||"mixed"===this.type||it===this.type){var pr=this._nodes.get(gi=""+gi);if(void 0===pr)throw new Me("Graph.".concat(Dn,': could not find the "').concat(gi,'" node in the graph.'));return Pd(!0,"mixed"===it?this.type:it,Rt,pr,yr)}},ct.prototype["some"+Yt]=function(gi,yr){return!!this[Dn](gi,yr)},ct.prototype["every"+Yt]=function(gi,yr){return!this[Dn](gi,function(pr,ur){return!yr(pr,ur)})},function Eh(et,mt){var ge=mt.type,Oe=mt.direction,it=mt.name.slice(0,-1)+"Entries";et.prototype[it]=function(Rt){if("mixed"!==ge&&"mixed"!==this.type&&ge!==this.type)return ot.empty();var Yt=this._nodes.get(Rt=""+Rt);if(void 0===Yt)throw new Me("Graph.".concat(it,': could not find the "').concat(Rt,'" node in the graph.'));return function(Dn,Ai,oi){if("mixed"!==Dn){if("undirected"===Dn)return uu(null,oi,oi.undirected);if("string"==typeof Ai)return uu(null,oi,oi[Ai])}var gi=ot.empty(),yr=new ku;return"undirected"!==Dn&&("out"!==Ai&&(gi=ze(gi,uu(yr,oi,oi.in))),"in"!==Ai&&(gi=ze(gi,uu(yr,oi,oi.out)))),"directed"!==Dn&&(gi=ze(gi,uu(yr,oi,oi.undirected))),gi}("mixed"===ge?this.type:ge,Oe,Yt)}}(et,mt)})}(ro);var mf=function(et){function mt(ct){var ge=R({type:"directed"},ct);if("multi"in ge&&!1!==ge.multi)throw new gt("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==ge.type)throw new gt('DirectedGraph.from: inconsistent "'+ge.type+'" type in given options!');return et.call(this,ge)||this}return z(mt,et),mt}(ro),gl=function(et){function mt(ct){var ge=R({type:"undirected"},ct);if("multi"in ge&&!1!==ge.multi)throw new gt("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==ge.type)throw new gt('UndirectedGraph.from: inconsistent "'+ge.type+'" type in given options!');return et.call(this,ge)||this}return z(mt,et),mt}(ro),Sc=function(et){function mt(ct){var ge=R({multi:!0},ct);if("multi"in ge&&!0!==ge.multi)throw new gt("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return et.call(this,ge)||this}return z(mt,et),mt}(ro),rl=function(et){function mt(ct){var ge=R({type:"directed",multi:!0},ct);if("multi"in ge&&!0!==ge.multi)throw new gt("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==ge.type)throw new gt('MultiDirectedGraph.from: inconsistent "'+ge.type+'" type in given options!');return et.call(this,ge)||this}return z(mt,et),mt}(ro),$f=function(et){function mt(ct){var ge=R({type:"undirected",multi:!0},ct);if("multi"in ge&&!0!==ge.multi)throw new gt("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==ge.type)throw new gt('MultiUndirectedGraph.from: inconsistent "'+ge.type+'" type in given options!');return et.call(this,ge)||this}return z(mt,et),mt}(ro);function rd(et){et.from=function(mt,ct){var ge=R({},mt.options,ct),Oe=new et(ge);return Oe.import(mt),Oe}}return rd(ro),rd(mf),rd(gl),rd(Sc),rd(rl),rd($f),ro.Graph=ro,ro.DirectedGraph=mf,ro.UndirectedGraph=gl,ro.MultiGraph=Sc,ro.MultiDirectedGraph=rl,ro.MultiUndirectedGraph=$f,ro.InvalidArgumentsGraphError=gt,ro.NotFoundGraphError=Me,ro.UsageGraphError=ce,ro}()},3173:function(He){He.exports=function(){"use strict";var z=function(bt,wt){return bt.reduce(function(st,gt){var Me="[object "+gt+"]";return wt?st[Me]=gt:st[gt]=Me,st},{})},X=function(bt){return bt.reduce(function(wt,st){return wt[st]=!0,wt},{})},M=["Array","Arguments","Object","RegExp","Symbol","Map","Set","Date","Error","Event","Generator","Promise","WeakMap","WeakSet","DocumentFragment","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","ArrayBuffer","DataView","DocumentFragment","Window","String","Number","Boolean","Function","Undefined","GeneratorFunction","BigInt","Null"],U=z(M,!1),O=z(M,!0),V=X([U.Generator,U.Promise,U.WeakMap,U.WeakSet]),L=X([U.Map,U.Set]),R=X([U.Date,U.RegExp]),j=X(["bigint","boolean","function","number","string","undefined"]),J=X([U.Arguments,U.Array]),Z=X([U.RegExp,U.Symbol]),te=X([U.Float32Array,U.Float64Array,U.Int8Array,U.Int16Array,U.Int32Array,U.Uint8Array,U.Uint8ClampedArray,U.Uint16Array,U.Uint32Array]),ie=typeof Buffer<"u"&&"function"==typeof Buffer.from,Y="function"==typeof Uint16Array;var Ie=ie?function oe(Ge){return Buffer.from(Ge).toString("utf8")}:Y?function G(Ge){return String.fromCharCode.apply(null,new Uint16Array(Ge))}:function ye(Ge){return""},ne=/\[object ([HTML|SVG](.*)Element)\]/,ae=Object.prototype.toString,N=Object.keys;function re(Ge,bt){return Ge>bt}function pe(Ge,bt){return Ge[0]>bt[0]}function Ne(Ge,bt){for(var wt,st,gt=0;gt<Ge.length;++gt){for(st=Ge[gt],wt=gt-1;~wt&&bt(Ge[wt],st);--wt)Ge[wt+1]=Ge[wt];Ge[wt+1]=st}return Ge}function Je(Ge,bt){for(var wt=0;wt<Ge.length;++wt)if(Ge[wt]===bt)return wt+1;return 0}function ke(Ge,bt,wt,st){if(!st){var gt=typeof Ge;if(j[gt])return gt+"|"+Ge;if(null===Ge)return Ge+"|"+Ge}var Me=st||ae.call(Ge);return J[Me]?Ge:Me===U.Object?function ue(Ge){for(var st,bt=Ne(N(Ge),re),wt={},gt=0;gt<bt.length;++gt)wt[st=bt[gt]]=Ge[st];return wt}(Ge):Z[Me]?O[Me]+"|"+Ge.toString():L[Me]?Ge instanceof Map?function Ee(Ge,bt,wt){var st=[];Ge.forEach(function(ce,At){st.push([ot(At,bt,wt),ot(ce,bt,wt)])}),Ne(st,pe);for(var Me,gt=0;gt<st.length;++gt)st[gt]="["+(Me=st[gt])[0]+","+Me[1]+"]";return"Map|["+st.join(",")+"]"}(Ge,bt,wt):function xe(Ge,bt,wt){var st=[];return Ge.forEach(function(gt){st.push(ot(gt,bt,wt))}),Ne(st,re),"Set|["+st.join(",")+"]"}(Ge,bt,wt):Me===U.Date?O[Me]+"|"+Ge.getTime():Me===U.Error?O[Me]+"|"+Ge.stack:Me===U.Event?function $(Ge){return{bubbles:Ge.bubbles,cancelBubble:Ge.cancelBubble,cancelable:Ge.cancelable,composed:Ge.composed,currentTarget:Ge.currentTarget,defaultPrevented:Ge.defaultPrevented,eventPhase:Ge.eventPhase,isTrusted:Ge.isTrusted,returnValue:Ge.returnValue,target:Ge.target,type:Ge.type}}(Ge):V[Me]?O[Me]+"|NOT_ENUMERABLE":ne.test(Me)?Me.slice(8,-1)+"|"+Ge.outerHTML:Me===U.DocumentFragment?O[Me]+"|"+function Re(Ge){for(var bt=Ge.children,wt=[],st=0;st<bt.length;++st)wt.push(bt[st].outerHTML);return wt.join(",")}(Ge):te[Me]?O[Me]+"|"+Ge.join(","):Me===U.ArrayBuffer?O[Me]+"|"+Ie(Ge):Me===U.DataView?O[Me]+"|"+Ie(Ge.buffer):Ge}function ot(Ge,bt,wt){if(!Ge||"object"!=typeof Ge)return ke(Ge,bt,wt);var st=ae.call(Ge);return R[st]?ke(Ge,bt,wt,st):JSON.stringify(Ge,function qe(Ge,bt){return void 0===Ge&&(Ge=[]),void 0===bt&&(bt=[]),function(wt,st){if("object"==typeof st)if(Ge.length){var gt=Je(Ge,this);0===gt?Ge.push(this):(Ge.splice(gt),bt.splice(gt)),bt.push(wt);var Me=Je(Ge,st);if(0!==Me)return"[~"+(bt.slice(0,Me).join(".")||".")+"]";Ge.push(st)}else Ge[0]=st,bt[0]=wt;return wt&&this[wt]instanceof Date?ke(this[wt],Ge,bt,U.Date):ke(st,Ge,bt)}}(bt,wt))}function yt(Ge){return function be(Ge){for(var gt,bt=Ge.length,wt=5381,st=52711;bt--;)wt=33*wt^(gt=Ge.charCodeAt(bt)),st=33*st^gt;return 4096*(wt>>>0)+(st>>>0)}(ot(Ge))}function hn(Ge,bt){return yt(Ge)===yt(bt)}return hn.all=function Be(Ge){for(var bt=0;bt<(arguments.length<=1?0:arguments.length-1);++bt)if(!hn(Ge,bt+1<1||arguments.length<=bt+1?void 0:arguments[bt+1]))return!1;return!0},hn.any=function lt(Ge){for(var bt=0;bt<(arguments.length<=1?0:arguments.length-1);++bt)if(hn(Ge,bt+1<1||arguments.length<=bt+1?void 0:arguments[bt+1]))return!0;return!1},hn.not=function Ve(Ge,bt){return yt(Ge)!==yt(bt)},yt.is=hn,yt}()},5203:(He,be,z)=>{He.exports=z(8732)},8732:function(He,be){var z,X,M;(function(){var U,O,V,L,R,j,J,Z,te,ie,Y,G,oe,ye,Ie;V=Math.floor,ie=Math.min,O=function(ne,ae){return ne<ae?-1:ne>ae?1:0},te=function(ne,ae,N,$,re){var pe;if(null==N&&(N=0),null==re&&(re=O),N<0)throw new Error("lo must be non-negative");for(null==$&&($=ne.length);N<$;)re(ae,ne[pe=V((N+$)/2)])<0?$=pe:N=pe+1;return[].splice.apply(ne,[N,N-N].concat(ae)),ae},j=function(ne,ae,N){return null==N&&(N=O),ne.push(ae),ye(ne,0,ne.length-1,N)},R=function(ne,ae){var N,$;return null==ae&&(ae=O),N=ne.pop(),ne.length?($=ne[0],ne[0]=N,Ie(ne,0,ae)):$=N,$},Z=function(ne,ae,N){var $;return null==N&&(N=O),$=ne[0],ne[0]=ae,Ie(ne,0,N),$},J=function(ne,ae,N){var $;return null==N&&(N=O),ne.length&&N(ne[0],ae)<0&&(ae=($=[ne[0],ae])[0],ne[0]=$[1],Ie(ne,0,N)),ae},L=function(ne,ae){var $,pe,Ee,xe,ue;for(null==ae&&(ae=O),xe=[],$=0,pe=(Ee=function(){ue=[];for(var Re=0,Je=V(ne.length/2);0<=Je?Re<Je:Re>Je;0<=Je?Re++:Re--)ue.push(Re);return ue}.apply(this).reverse()).length;$<pe;$++)xe.push(Ie(ne,Ee[$],ae));return xe},oe=function(ne,ae,N){var $;if(null==N&&(N=O),-1!==($=ne.indexOf(ae)))return ye(ne,0,$,N),Ie(ne,$,N)},Y=function(ne,ae,N){var re,pe,Ne,Ee;if(null==N&&(N=O),!(re=ne.slice(0,ae)).length)return re;for(L(re,N),pe=0,Ne=(Ee=ne.slice(ae)).length;pe<Ne;pe++)J(re,Ee[pe],N);return re.sort(N).reverse()},G=function(ne,ae,N){var $,pe,Ne,Ee,xe,ue,Re,Je,ke;if(null==N&&(N=O),10*ae<=ne.length){if(!(Ne=ne.slice(0,ae).sort(N)).length)return Ne;for(pe=Ne[Ne.length-1],Ee=0,ue=(Re=ne.slice(ae)).length;Ee<ue;Ee++)N($=Re[Ee],pe)<0&&(te(Ne,$,0,null,N),Ne.pop(),pe=Ne[Ne.length-1]);return Ne}for(L(ne,N),ke=[],xe=0,Je=ie(ae,ne.length);0<=Je?xe<Je:xe>Je;0<=Je?++xe:--xe)ke.push(R(ne,N));return ke},ye=function(ne,ae,N,$){var re,pe,Ne;for(null==$&&($=O),re=ne[N];N>ae&&$(re,pe=ne[Ne=N-1>>1])<0;)ne[N]=pe,N=Ne;return ne[N]=re},Ie=function(ne,ae,N){var $,re,pe,Ne,Ee;for(null==N&&(N=O),re=ne.length,Ee=ae,pe=ne[ae],$=2*ae+1;$<re;)(Ne=$+1)<re&&!(N(ne[$],ne[Ne])<0)&&($=Ne),ne[ae]=ne[$],$=2*(ae=$)+1;return ne[ae]=pe,ye(ne,Ee,ae,N)},U=function(){function ne(ae){this.cmp=ae??O,this.nodes=[]}return ne.push=j,ne.pop=R,ne.replace=Z,ne.pushpop=J,ne.heapify=L,ne.updateItem=oe,ne.nlargest=Y,ne.nsmallest=G,ne.prototype.push=function(ae){return j(this.nodes,ae,this.cmp)},ne.prototype.pop=function(){return R(this.nodes,this.cmp)},ne.prototype.peek=function(){return this.nodes[0]},ne.prototype.contains=function(ae){return-1!==this.nodes.indexOf(ae)},ne.prototype.replace=function(ae){return Z(this.nodes,ae,this.cmp)},ne.prototype.pushpop=function(ae){return J(this.nodes,ae,this.cmp)},ne.prototype.heapify=function(){return L(this.nodes,this.cmp)},ne.prototype.updateItem=function(ae){return oe(this.nodes,ae,this.cmp)},ne.prototype.clear=function(){return this.nodes=[]},ne.prototype.empty=function(){return 0===this.nodes.length},ne.prototype.size=function(){return this.nodes.length},ne.prototype.clone=function(){var ae;return(ae=new ne).nodes=this.nodes.slice(0),ae},ne.prototype.toArray=function(){return this.nodes.slice(0)},ne.prototype.insert=ne.prototype.push,ne.prototype.top=ne.prototype.peek,ne.prototype.front=ne.prototype.peek,ne.prototype.has=ne.prototype.contains,ne.prototype.copy=ne.prototype.clone,ne}(),X=[],void 0===(M="function"==typeof(z=function(){return U})?z.apply(be,X):z)||(He.exports=M)}).call(this)},8461:(He,be)=>{be.read=function(z,X,M,U,O){var V,L,R=8*O-U-1,j=(1<<R)-1,J=j>>1,Z=-7,te=M?O-1:0,ie=M?-1:1,Y=z[X+te];for(te+=ie,V=Y&(1<<-Z)-1,Y>>=-Z,Z+=R;Z>0;V=256*V+z[X+te],te+=ie,Z-=8);for(L=V&(1<<-Z)-1,V>>=-Z,Z+=U;Z>0;L=256*L+z[X+te],te+=ie,Z-=8);if(0===V)V=1-J;else{if(V===j)return L?NaN:1/0*(Y?-1:1);L+=Math.pow(2,U),V-=J}return(Y?-1:1)*L*Math.pow(2,V-U)},be.write=function(z,X,M,U,O,V){var L,R,j,J=8*V-O-1,Z=(1<<J)-1,te=Z>>1,ie=23===O?Math.pow(2,-24)-Math.pow(2,-77):0,Y=U?0:V-1,G=U?1:-1,oe=X<0||0===X&&1/X<0?1:0;for(X=Math.abs(X),isNaN(X)||X===1/0?(R=isNaN(X)?1:0,L=Z):(L=Math.floor(Math.log(X)/Math.LN2),X*(j=Math.pow(2,-L))<1&&(L--,j*=2),(X+=L+te>=1?ie/j:ie*Math.pow(2,1-te))*j>=2&&(L++,j/=2),L+te>=Z?(R=0,L=Z):L+te>=1?(R=(X*j-1)*Math.pow(2,O),L+=te):(R=X*Math.pow(2,te-1)*Math.pow(2,O),L=0));O>=8;z[M+Y]=255&R,Y+=G,R/=256,O-=8);for(L=L<<O|R,J+=O;J>0;z[M+Y]=255&L,Y+=G,L/=256,J-=8);z[M+Y-G]|=128*oe}},3894:He=>{He.exports="function"==typeof Object.create?function(z,X){X&&(z.super_=X,z.prototype=Object.create(X.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}))}:function(z,X){if(X){z.super_=X;var M=function(){};M.prototype=X.prototype,z.prototype=new M,z.prototype.constructor=z}}},2230:(He,be,z)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(oe){return typeof oe}:function(oe){return oe&&"function"==typeof Symbol&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},M=function(){function oe(ye,Ie){for(var ne=0;ne<Ie.length;ne++){var ae=Ie[ne];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(ye,ae.key,ae)}}return function(ye,Ie,ne){return Ie&&oe(ye.prototype,Ie),ne&&oe(ye,ne),ye}}(),O=te(z(5173)),V=z(1268),R=te(z(305)),j=z(1573),Z=te(z(6729));function te(oe){return oe&&oe.__esModule?oe:{default:oe}}function ie(oe,ye){if(!(oe instanceof ye))throw new TypeError("Cannot call a class as a function")}function Y(oe,ye){return(0,j.JSONPath)({path:ye,json:oe,wrap:!1})}var G=function(){function oe(ye){var Ie=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var ae in ie(this,oe),this.factMap=new Map(ye),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(ne.allowUndefinedFacts),this.pathResolver=ne.pathResolver||Y,this.events={success:[],failure:[]},this.ruleResults=[],Ie){var N=void 0;N=Ie[ae]instanceof O.default?Ie[ae]:new O.default(ae,Ie[ae]),this._addConstantFact(N),(0,R.default)("almanac::constructor initialized runtime fact:"+N.id+" with "+N.value+"<"+X(N.value)+">")}}return M(oe,[{key:"addEvent",value:function(Ie,ne){if(!ne)throw new Error('outcome required: "success" | "failure"]');this.events[ne].push(Ie)}},{key:"getEvents",value:function(){var Ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Ie?this.events[Ie]:this.events.success.concat(this.events.failure)}},{key:"addResult",value:function(Ie){this.ruleResults.push(Ie)}},{key:"getResults",value:function(){return this.ruleResults}},{key:"_getFact",value:function(Ie){return this.factMap.get(Ie)}},{key:"_addConstantFact",value:function(Ie){this.factMap.set(Ie.id,Ie),this._setFactValue(Ie,{},Ie.value)}},{key:"_setFactValue",value:function(Ie,ne,ae){var N=Ie.getCacheKey(ne),$=Promise.resolve(ae);return N&&this.factResultsCache.set(N,$),$}},{key:"addRuntimeFact",value:function(Ie,ne){(0,R.default)("almanac::addRuntimeFact id:"+Ie);var ae=new O.default(Ie,ne);return this._addConstantFact(ae)}},{key:"factValue",value:function(Ie){var ne=this,ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",$=void 0,re=this._getFact(Ie);if(void 0===re)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new V.UndefinedFactError("Undefined fact: "+Ie));if(re.isConstant())$=Promise.resolve(re.calculate(ae,this));else{var pe=re.getCacheKey(ae),Ne=pe&&this.factResultsCache.get(pe);Ne?($=Promise.resolve(Ne),(0,R.default)("almanac::factValue cache hit for fact:"+Ie)):((0,R.default)("almanac::factValue cache miss for fact:"+Ie+"; calculating"),$=this._setFactValue(re,ae,re.calculate(ae,this)))}return N?((0,R.default)("condition::evaluate extracting object property "+N),$.then(function(Ee){if((0,Z.default)(Ee)){var xe=ne.pathResolver(Ee,N);return(0,R.default)("condition::evaluate extracting object property "+N+", received: "+JSON.stringify(xe)),xe}return(0,R.default)("condition::evaluate could not compute object path("+N+") of non-object: "+Ee+" <"+(typeof Ee>"u"?"undefined":X(Ee))+">; continuing with "+Ee),Ee})):$}}]),oe}();be.default=G},7762:(He,be,z)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var X=function(){function J(Z,te){for(var ie=0;ie<te.length;ie++){var Y=te[ie];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(Z,Y.key,Y)}}return function(Z,te,ie){return te&&J(Z.prototype,te),ie&&J(Z,ie),Z}}(),U=L(z(305)),V=L(z(6729));function L(J){return J&&J.__esModule?J:{default:J}}var j=function(){function J(Z){if(function R(J,Z){if(!(J instanceof Z))throw new TypeError("Cannot call a class as a function")}(this,J),!Z)throw new Error("Condition: constructor options required");var te=J.booleanOperator(Z);if(Object.assign(this,Z),te){var ie=Z[te];if(!Array.isArray(ie))throw new Error('"'+te+'" must be an array');this.operator=te,this.priority=parseInt(Z.priority,10)||1,this[te]=ie.map(function(Y){return new J(Y)})}else{if(!Object.prototype.hasOwnProperty.call(Z,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(Z,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(Z,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(Z,"priority")&&(Z.priority=parseInt(Z.priority,10))}}return X(J,[{key:"toJSON",value:function(){var te=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],ie={};this.priority&&(ie.priority=this.priority);var Y=J.booleanOperator(this);return Y?ie[Y]=this[Y].map(function(G){return G.toJSON(te)}):(ie.operator=this.operator,ie.value=this.value,ie.fact=this.fact,void 0!==this.factResult&&(ie.factResult=this.factResult),void 0!==this.result&&(ie.result=this.result),this.params&&(ie.params=this.params),this.path&&(ie.path=this.path)),te?JSON.stringify(ie):ie}},{key:"_getValue",value:function(te){var ie=this.value;return(0,V.default)(ie)&&Object.prototype.hasOwnProperty.call(ie,"fact")?te.factValue(ie.fact,ie.params,ie.path):Promise.resolve(ie)}},{key:"evaluate",value:function(te,ie){var Y=this;if(!te)return Promise.reject(new Error("almanac required"));if(!ie)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var G=ie.get(this.operator);return G?this._getValue(te).then(function(oe){return te.factValue(Y.fact,Y.params,Y.path).then(function(ye){var Ie=G.evaluate(ye,oe);return(0,U.default)("condition::evaluate <"+JSON.stringify(ye)+" "+Y.operator+" "+JSON.stringify(oe)+"?> ("+Ie+")"),{result:Ie,leftHandSideValue:ye,rightHandSideValue:oe,operator:Y.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return J.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==J.booleanOperator(this)}}],[{key:"booleanOperator",value:function(te){return Object.prototype.hasOwnProperty.call(te,"any")?"any":Object.prototype.hasOwnProperty.call(te,"all")?"all":void 0}}]),J}();be.default=j},305:(He,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.default=function z(X){try{(typeof process<"u"&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||typeof window<"u"&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(X)}catch{}}},3094:(He,be,z)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var M=function U(L){return L&&L.__esModule?L:{default:L}}(z(5010)),O=[];function V(L){return"NaN"!==Number.parseFloat(L).toString()}O.push(new M.default("equal",function(L,R){return L===R})),O.push(new M.default("notEqual",function(L,R){return L!==R})),O.push(new M.default("in",function(L,R){return R.indexOf(L)>-1})),O.push(new M.default("notIn",function(L,R){return-1===R.indexOf(L)})),O.push(new M.default("contains",function(L,R){return L.indexOf(R)>-1},Array.isArray)),O.push(new M.default("doesNotContain",function(L,R){return-1===L.indexOf(R)},Array.isArray)),O.push(new M.default("lessThan",function(L,R){return L<R},V)),O.push(new M.default("lessThanInclusive",function(L,R){return L<=R},V)),O.push(new M.default("greaterThan",function(L,R){return L>R},V)),O.push(new M.default("greaterThanInclusive",function(L,R){return L>=R},V)),be.default=O},3350:(He,be,z)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.FINISHED=be.RUNNING=be.READY=void 0;var X=function(){function Ne(Ee,xe){for(var ue=0;ue<xe.length;ue++){var Re=xe[ue];Re.enumerable=Re.enumerable||!1,Re.configurable=!0,"value"in Re&&(Re.writable=!0),Object.defineProperty(Ee,Re.key,Re)}}return function(Ee,xe,ue){return xe&&Ne(Ee.prototype,xe),ue&&Ne(Ee,ue),Ee}}(),U=ye(z(5173)),V=ye(z(7287)),R=ye(z(5010)),J=ye(z(2230)),te=ye(z(31)),Y=ye(z(3094)),oe=ye(z(305));function ye(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function Ie(Ne,Ee){if(!(Ne instanceof Ee))throw new TypeError("Cannot call a class as a function")}function ne(Ne,Ee){if(!Ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Ee||"object"!=typeof Ee&&"function"!=typeof Ee?Ne:Ee}var N=be.READY="READY",$=be.RUNNING="RUNNING",re=be.FINISHED="FINISHED",pe=function(Ne){function Ee(){var xe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ie(this,Ee);var Re=ne(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this));return Re.rules=[],Re.allowUndefinedFacts=ue.allowUndefinedFacts||!1,Re.pathResolver=ue.pathResolver,Re.operators=new Map,Re.facts=new Map,Re.status=N,xe.map(function(Je){return Re.addRule(Je)}),Y.default.map(function(Je){return Re.addOperator(Je)}),Re}return function ae(Ne,Ee){if("function"!=typeof Ee&&null!==Ee)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);Ne.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:Ne,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(Ne,Ee):Ne.__proto__=Ee)}(Ee,Ne),X(Ee,[{key:"addRule",value:function(ue){if(!ue)throw new Error("Engine: addRule() requires options");var Re=void 0;if(ue instanceof V.default)Re=ue;else{if(!Object.prototype.hasOwnProperty.call(ue,"event"))throw new Error('Engine: addRule() argument requires "event" property');if(!Object.prototype.hasOwnProperty.call(ue,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');Re=new V.default(ue)}return Re.setEngine(this),this.rules.push(Re),this.prioritizedRules=null,this}},{key:"updateRule",value:function(ue){var Re=this.rules.findIndex(function(Je){return Je.name===ue.name});if(!(Re>-1))throw new Error("Engine: updateRule() rule not found");this.rules.splice(Re,1),this.addRule(ue),this.prioritizedRules=null}},{key:"removeRule",value:function(ue){var Re=!1;if(ue instanceof V.default){var ke=this.rules.indexOf(ue);ke>-1&&(Re=Boolean(this.rules.splice(ke,1).length))}else{var Je=this.rules.filter(function(qe){return qe.name!==ue});Re=Je.length!==this.rules.length,this.rules=Je}return Re&&(this.prioritizedRules=null),Re}},{key:"addOperator",value:function(ue,Re){var Je;Je=ue instanceof R.default?ue:new R.default(ue,Re),(0,oe.default)("engine::addOperator name:"+Je.name),this.operators.set(Je.name,Je)}},{key:"removeOperator",value:function(ue){return this.operators.delete(ue instanceof R.default?ue.name:ue)}},{key:"addFact",value:function(ue,Re,Je){var ke=ue,qe=void 0;return ue instanceof U.default?(ke=ue.id,qe=ue):qe=new U.default(ue,Re,Je),(0,oe.default)("engine::addFact id:"+ke),this.facts.set(ke,qe),this}},{key:"removeFact",value:function(ue){return this.facts.delete(ue instanceof U.default?ue.id:ue)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var ue=this.rules.reduce(function(Re,Je){var ke=Je.priority;return Re[ke]||(Re[ke]=[]),Re[ke].push(Je),Re},{});this.prioritizedRules=Object.keys(ue).sort(function(Re,Je){return Number(Re)>Number(Je)?-1:1}).map(function(Re){return ue[Re]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=re,this}},{key:"getFact",value:function(ue){return this.facts.get(ue)}},{key:"evaluateRules",value:function(ue,Re){var Je=this;return Promise.all(ue.map(function(ke){return Je.status!==$?((0,oe.default)("engine::run status:"+Je.status+"; skipping remaining rules"),Promise.resolve()):ke.evaluate(Re).then(function(qe){return(0,oe.default)("engine::run ruleResult:"+qe.result),Re.addResult(qe),qe.result?(Re.addEvent(qe.event,"success"),Je.emitAsync("success",qe.event,Re,qe).then(function(){return Je.emitAsync(qe.event.type,qe.event.params,Re,qe)})):(Re.addEvent(qe.event,"failure"),Je.emitAsync("failure",qe.event,Re,qe))})}))}},{key:"run",value:function(){var ue=this,Re=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,oe.default)("engine::run started"),this.status=$;var Je={allowUndefinedFacts:this.allowUndefinedFacts,pathResolver:this.pathResolver},ke=new J.default(this.facts,Re,Je),qe=this.prioritizeRules(),ot=Promise.resolve();return new Promise(function(yt,hn){qe.map(function(Be){return ot=ot.then(function(){return ue.evaluateRules(Be,ke)}).catch(hn)}),ot.then(function(){ue.status=re,(0,oe.default)("engine::run completed");var lt=ke.getResults().reduce(function(bt,wt){return bt[wt.result?"results":"failureResults"].push(wt),bt},{results:[],failureResults:[]});yt({almanac:ke,results:lt.results,failureResults:lt.failureResults,events:ke.getEvents("success"),failureEvents:ke.getEvents("failure")})}).catch(hn)})}}]),Ee}(te.default);be.default=pe},1268:(He,be)=>{"use strict";function z(O,V){if(!(O instanceof V))throw new TypeError("Cannot call a class as a function")}function X(O,V){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!V||"object"!=typeof V&&"function"!=typeof V?O:V}Object.defineProperty(be,"__esModule",{value:!0}),be.UndefinedFactError=function(O){function V(){var L;z(this,V);for(var R=arguments.length,j=Array(R),J=0;J<R;J++)j[J]=arguments[J];var Z=X(this,(L=V.__proto__||Object.getPrototypeOf(V)).call.apply(L,[this].concat(j)));return Z.code="UNDEFINED_FACT",Z}return function M(O,V){if("function"!=typeof V&&null!==V)throw new TypeError("Super expression must either be null or a function, not "+typeof V);O.prototype=Object.create(V&&V.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(O,V):O.__proto__=V)}(V,Error),V}()},5173:(He,be,z)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var X=function(){function R(j,J){for(var Z=0;Z<J.length;Z++){var te=J[Z];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(j,te.key,te)}}return function(j,J,Z){return J&&R(j.prototype,J),Z&&R(j,Z),j}}(),U=function O(R){return R&&R.__esModule?R:{default:R}}(z(3173)),L=function(){function R(j,J,Z){(function V(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")})(this,R),this.id=j;var te={cache:!0};if(typeof Z>"u"&&(Z=te),"function"!=typeof J?(this.value=J,this.type=this.constructor.CONSTANT):(this.calculationMethod=J,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(Z.priority||1,10),this.options=Object.assign({},te,Z),this.cacheKeyMethod=this.defaultCacheKeys,this}return X(R,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(J,Z){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(J,Z)}},{key:"defaultCacheKeys",value:function(J,Z){return{params:Z,id:J}}},{key:"getCacheKey",value:function(J){if(!0===this.options.cache){var Z=this.cacheKeyMethod(this.id,J);return R.hashFromObject(Z)}}}],[{key:"hashFromObject",value:function(J){return(0,U.default)(J)}}]),R}();L.CONSTANT="CONSTANT",L.DYNAMIC="DYNAMIC",be.default=L},926:(He,be,z)=>{"use strict";He.exports=z(4308)},4308:(He,be,z)=>{"use strict";be.Engine=void 0;var U=Z(z(3350));Z(z(5173)),Z(z(7287)),Z(z(5010));function Z(te){return te&&te.__esModule?te:{default:te}}be.Engine=U.default},5010:(He,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var z=function(){function U(O,V){for(var L=0;L<V.length;L++){var R=V[L];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(O,R.key,R)}}return function(O,V,L){return V&&U(O.prototype,V),L&&U(O,L),O}}(),M=function(){function U(O,V,L){if(function X(U,O){if(!(U instanceof O))throw new TypeError("Cannot call a class as a function")}(this,U),this.name=String(O),!O)throw new Error("Missing operator name");if("function"!=typeof V)throw new Error("Missing operator callback");this.cb=V,this.factValueValidator=L,this.factValueValidator||(this.factValueValidator=function(){return!0})}return z(U,[{key:"evaluate",value:function(V,L){return this.factValueValidator(V)&&this.cb(V,L)}}]),U}();be.default=M},6219:(He,be,z)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var X=function(){function R(j,J){for(var Z=0;Z<J.length;Z++){var te=J[Z];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(j,te.key,te)}}return function(j,J,Z){return J&&R(j.prototype,J),Z&&R(j,Z),j}}(),U=function O(R){return R&&R.__esModule?R:{default:R}}(z(1433)),L=function(){function R(j,J,Z,te){(function V(R,j){if(!(R instanceof j))throw new TypeError("Cannot call a class as a function")})(this,R),this.conditions=(0,U.default)(j),this.event=(0,U.default)(J),this.priority=(0,U.default)(Z),this.name=(0,U.default)(te),this.result=null}return X(R,[{key:"setResult",value:function(J){this.result=J}},{key:"toJSON",value:function(){var J=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],Z={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return J?JSON.stringify(Z):Z}}]),R}();be.default=L},7287:(He,be,z)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var X=function(){function oe(ye,Ie){for(var ne=0;ne<Ie.length;ne++){var ae=Ie[ne];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(ye,ae.key,ae)}}return function(ye,Ie,ne){return Ie&&oe(ye.prototype,Ie),ne&&oe(ye,ne),ye}}(),U=Z(z(7762)),V=Z(z(6219)),R=Z(z(305));function Z(oe){return oe&&oe.__esModule?oe:{default:oe}}var G=function(oe){function ye(Ie){!function te(oe,ye){if(!(oe instanceof ye))throw new TypeError("Cannot call a class as a function")}(this,ye);var ne=function ie(oe,ye){if(!oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!ye||"object"!=typeof ye&&"function"!=typeof ye?oe:ye}(this,(ye.__proto__||Object.getPrototypeOf(ye)).call(this));return"string"==typeof Ie&&(Ie=JSON.parse(Ie)),Ie&&Ie.conditions&&ne.setConditions(Ie.conditions),Ie&&Ie.onSuccess&&ne.on("success",Ie.onSuccess),Ie&&Ie.onFailure&&ne.on("failure",Ie.onFailure),Ie&&(Ie.name||0===Ie.name)&&ne.setName(Ie.name),ne.setPriority(Ie&&Ie.priority||1),ne.setEvent(Ie&&Ie.event||{type:"unknown"}),ne}return function Y(oe,ye){if("function"!=typeof ye&&null!==ye)throw new TypeError("Super expression must either be null or a function, not "+typeof ye);oe.prototype=Object.create(ye&&ye.prototype,{constructor:{value:oe,enumerable:!1,writable:!0,configurable:!0}}),ye&&(Object.setPrototypeOf?Object.setPrototypeOf(oe,ye):oe.__proto__=ye)}(ye,oe),X(ye,[{key:"setPriority",value:function(ne){if((ne=parseInt(ne,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=ne,this}},{key:"setName",value:function(ne){if(!ne&&0!==ne)throw new Error('Rule "name" must be defined');return this.name=ne,this}},{key:"setConditions",value:function(ne){if(!Object.prototype.hasOwnProperty.call(ne,"all")&&!Object.prototype.hasOwnProperty.call(ne,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new U.default(ne),this}},{key:"setEvent",value:function(ne){if(!ne)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(ne,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.ruleEvent={type:ne.type},ne.params&&(this.ruleEvent.params=ne.params),this}},{key:"getEvent",value:function(){return this.ruleEvent}},{key:"getPriority",value:function(){return this.priority}},{key:"getConditions",value:function(){return this.conditions}},{key:"getEngine",value:function(){return this.engine}},{key:"setEngine",value:function(ne){return this.engine=ne,this}},{key:"toJSON",value:function(){var ne=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],ae={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.ruleEvent,name:this.name};return ne?JSON.stringify(ae):ae}},{key:"prioritizeConditions",value:function(ne){var ae=this,N=ne.reduce(function($,re){var pe=re.priority;if(!pe){var Ne=ae.engine.getFact(re.fact);pe=Ne&&Ne.priority||1}return $[pe]||($[pe]=[]),$[pe].push(re),$},{});return Object.keys(N).sort(function($,re){return Number($)>Number(re)?-1:1}).map(function($){return N[$]})}},{key:"evaluate",value:function(ne){var ae=this,N=new V.default(this.conditions,this.ruleEvent,this.priority,this.name),pe=function(Re,Je){if(0===Re.length)return Promise.resolve(!0);var ke=Array.prototype.some;"all"===Je&&(ke=Array.prototype.every);for(var qe=ae.prioritizeConditions(Re),ot=Promise.resolve(),yt=function(lt){var Ve=qe[lt],Ge=!1;ot=ot.then(function(bt){return"any"===Je&&!0===bt||Ge?((0,R.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),Ge=!0,!0):"all"===Je&&!1===bt||Ge?((0,R.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),Ge=!0,!1):function(Re,Je){return Array.isArray(Re)||(Re=[Re]),Promise.all(Re.map(function(ke){return function(Re){if(Re.isBooleanOperator()){var Je=Re[Re.operator];return("all"===Re.operator?Ee(Je):Ne(Je)).then(function(qe){var ot=!0===qe;return Re.result=ot,ot})}return Re.evaluate(ne,ae.engine.operators).then(function(qe){var ot=qe.result;return Re.factResult=qe.leftHandSideValue,Re.result=ot,ot})}(ke)})).then(function(ke){return(0,R.default)("rule::evaluateConditions results",ke),Je.call(ke,function(qe){return!0===qe})})}(Ve,ke)})},hn=0;hn<qe.length;hn++)yt(hn);return ot},Ne=function(Re){return pe(Re,"any")},Ee=function(Re){return pe(Re,"all")},xe=function(Re){return N.setResult(Re),ae.emitAsync(Re?"success":"failure",N.event,ne,N).then(function(){return N})};return N.conditions.any?Ne(N.conditions.any).then(function(ue){return xe(ue)}):Ee(N.conditions.all).then(function(ue){return xe(ue)})}}]),ye}(Z(z(31)).default);be.default=G},1433:He=>{var be=function(){"use strict";function z(Z,te){return null!=te&&Z instanceof te}var X,M,U;try{X=Map}catch{X=function(){}}try{M=Set}catch{M=function(){}}try{U=Promise}catch{U=function(){}}function O(Z,te,ie,Y,G){"object"==typeof te&&(ie=te.depth,Y=te.prototype,G=te.includeNonEnumerable,te=te.circular);var oe=[],ye=[],Ie=typeof Buffer<"u";return typeof te>"u"&&(te=!0),typeof ie>"u"&&(ie=1/0),function ne(ae,N){if(null===ae)return null;if(0===N)return ae;var $,re;if("object"!=typeof ae)return ae;if(z(ae,X))$=new X;else if(z(ae,M))$=new M;else if(z(ae,U))$=new U(function(qe,ot){ae.then(function(yt){qe(ne(yt,N-1))},function(yt){ot(ne(yt,N-1))})});else if(O.__isArray(ae))$=[];else if(O.__isRegExp(ae))$=new RegExp(ae.source,J(ae)),ae.lastIndex&&($.lastIndex=ae.lastIndex);else if(O.__isDate(ae))$=new Date(ae.getTime());else{if(Ie&&Buffer.isBuffer(ae))return $=Buffer.allocUnsafe?Buffer.allocUnsafe(ae.length):new Buffer(ae.length),ae.copy($),$;z(ae,Error)?$=Object.create(ae):typeof Y>"u"?(re=Object.getPrototypeOf(ae),$=Object.create(re)):($=Object.create(Y),re=Y)}if(te){var pe=oe.indexOf(ae);if(-1!=pe)return ye[pe];oe.push(ae),ye.push($)}for(var Ne in z(ae,X)&&ae.forEach(function(qe,ot){var yt=ne(ot,N-1),hn=ne(qe,N-1);$.set(yt,hn)}),z(ae,M)&&ae.forEach(function(qe){var ot=ne(qe,N-1);$.add(ot)}),ae){var Ee;re&&(Ee=Object.getOwnPropertyDescriptor(re,Ne)),(!Ee||null!=Ee.set)&&($[Ne]=ne(ae[Ne],N-1))}if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(ae);for(Ne=0;Ne<xe.length;Ne++){var ue=xe[Ne];(Re=Object.getOwnPropertyDescriptor(ae,ue))&&!Re.enumerable&&!G||($[ue]=ne(ae[ue],N-1),Re.enumerable||Object.defineProperty($,ue,{enumerable:!1}))}}if(G){var Je=Object.getOwnPropertyNames(ae);for(Ne=0;Ne<Je.length;Ne++){var Re,ke=Je[Ne];(Re=Object.getOwnPropertyDescriptor(ae,ke))&&Re.enumerable||($[ke]=ne(ae[ke],N-1),Object.defineProperty($,ke,{enumerable:!1}))}}return $}(Z,ie)}function V(Z){return Object.prototype.toString.call(Z)}function J(Z){var te="";return Z.global&&(te+="g"),Z.ignoreCase&&(te+="i"),Z.multiline&&(te+="m"),te}return O.clonePrototype=function(te){if(null===te)return null;var ie=function(){};return ie.prototype=te,new ie},O.__objToStr=V,O.__isDate=function L(Z){return"object"==typeof Z&&"[object Date]"===V(Z)},O.__isArray=function R(Z){return"object"==typeof Z&&"[object Array]"===V(Z)},O.__isRegExp=function j(Z){return"object"==typeof Z&&"[object RegExp]"===V(Z)},O.__getRegExpFlags=J,O}();He.exports&&(He.exports=be)},1573:(He,be,z)=>{"use strict";function X(xe){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ue){return typeof ue}:function(ue){return ue&&"function"==typeof Symbol&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue})(xe)}function O(xe){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(Re){return Re.__proto__||Object.getPrototypeOf(Re)})(xe)}function V(xe,ue){return(V=Object.setPrototypeOf||function(Je,ke){return Je.__proto__=ke,Je})(xe,ue)}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(xe,ue,Re){return(R=L()?Reflect.construct:function(ke,qe,ot){var yt=[null];yt.push.apply(yt,qe);var Be=new(Function.bind.apply(ke,yt));return ot&&V(Be,ot.prototype),Be}).apply(null,arguments)}function J(xe){var ue="function"==typeof Map?new Map:void 0;return J=function(Je){if(null===Je||!function j(xe){return-1!==Function.toString.call(xe).indexOf("[native code]")}(Je))return Je;if("function"!=typeof Je)throw new TypeError("Super expression must either be null or a function");if(typeof ue<"u"){if(ue.has(Je))return ue.get(Je);ue.set(Je,ke)}function ke(){return R(Je,arguments,O(this).constructor)}return ke.prototype=Object.create(Je.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),V(ke,Je)},J(xe)}function te(xe,ue){return!ue||"object"!=typeof ue&&"function"!=typeof ue?function Z(xe){if(void 0===xe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe}(xe):ue}function Y(xe){return function G(xe){if(Array.isArray(xe))return Ie(xe)}(xe)||function oe(xe){if(typeof Symbol<"u"&&null!=xe[Symbol.iterator]||null!=xe["@@iterator"])return Array.from(xe)}(xe)||ye(xe)||function ne(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(xe,ue){if(xe){if("string"==typeof xe)return Ie(xe,ue);var Re=Object.prototype.toString.call(xe).slice(8,-1);if("Object"===Re&&xe.constructor&&(Re=xe.constructor.name),"Map"===Re||"Set"===Re)return Array.from(xe);if("Arguments"===Re||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Re))return Ie(xe,ue)}}function Ie(xe,ue){(null==ue||ue>xe.length)&&(ue=xe.length);for(var Re=0,Je=new Array(ue);Re<ue;Re++)Je[Re]=xe[Re];return Je}z.r(be),z.d(be,{JSONPath:()=>Ne});var N=Object.prototype.hasOwnProperty;function $(xe,ue){return(xe=xe.slice()).push(ue),xe}function re(xe,ue){return(ue=ue.slice()).unshift(xe),ue}var pe=function(xe){!function U(xe,ue){if("function"!=typeof ue&&null!==ue)throw new TypeError("Super expression must either be null or a function");xe.prototype=Object.create(ue&&ue.prototype,{constructor:{value:xe,writable:!0,configurable:!0}}),ue&&V(xe,ue)}(Re,xe);var ue=function ie(xe){var ue=L();return function(){var ke,Je=O(xe);if(ue){var qe=O(this).constructor;ke=Reflect.construct(Je,arguments,qe)}else ke=Je.apply(this,arguments);return te(this,ke)}}(Re);function Re(Je){var ke;return function M(xe,ue){if(!(xe instanceof ue))throw new TypeError("Cannot call a class as a function")}(this,Re),(ke=ue.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,ke.value=Je,ke.name="NewError",ke}return Re}(J(Error));function Ne(xe,ue,Re,Je,ke){if(!(this instanceof Ne))try{return new Ne(xe,ue,Re,Je,ke)}catch(hn){if(!hn.avoidNew)throw hn;return hn.value}"string"==typeof xe&&(ke=Je,Je=Re,Re=ue,ue=xe,xe=null);var qe=xe&&"object"===X(xe);if(this.json=(xe=xe||{}).json||Re,this.path=xe.path||ue,this.resultType=xe.resultType||"value",this.flatten=xe.flatten||!1,this.wrap=!N.call(xe,"wrap")||xe.wrap,this.sandbox=xe.sandbox||{},this.preventEval=xe.preventEval||!1,this.parent=xe.parent||null,this.parentProperty=xe.parentProperty||null,this.callback=xe.callback||Je||null,this.otherTypeCallback=xe.otherTypeCallback||ke||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==xe.autostart){var ot={path:qe?xe.path:ue};qe?"json"in xe&&(ot.json=xe.json):ot.json=Re;var yt=this.evaluate(ot);if(!yt||"object"!==X(yt))throw new pe(yt);return yt}}Ne.prototype.evaluate=function(xe,ue,Re,Je){var ke=this,qe=this.parent,ot=this.parentProperty,yt=this.flatten,hn=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,Re=Re||this.callback,this.currOtherTypeCallback=Je||this.otherTypeCallback,ue=ue||this.json,(xe=xe||this.path)&&"object"===X(xe)&&!Array.isArray(xe)){if(!xe.path&&""!==xe.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!N.call(xe,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');ue=xe.json,yt=N.call(xe,"flatten")?xe.flatten:yt,this.currResultType=N.call(xe,"resultType")?xe.resultType:this.currResultType,this.currSandbox=N.call(xe,"sandbox")?xe.sandbox:this.currSandbox,hn=N.call(xe,"wrap")?xe.wrap:hn,this.currPreventEval=N.call(xe,"preventEval")?xe.preventEval:this.currPreventEval,Re=N.call(xe,"callback")?xe.callback:Re,this.currOtherTypeCallback=N.call(xe,"otherTypeCallback")?xe.otherTypeCallback:this.currOtherTypeCallback,qe=N.call(xe,"parent")?xe.parent:qe,ot=N.call(xe,"parentProperty")?xe.parentProperty:ot,xe=xe.path}if(qe=qe||null,ot=ot||null,Array.isArray(xe)&&(xe=Ne.toPathString(xe)),(xe||""===xe)&&ue){var lt=Ne.toPathArray(xe);"$"===lt[0]&&lt.length>1&&lt.shift(),this._hasParentSelector=null;var Ve=this._trace(lt,ue,["$"],qe,ot,Re).filter(function(Ge){return Ge&&!Ge.isParentSelector});return Ve.length?hn||1!==Ve.length||Ve[0].hasArrExpr?Ve.reduce(function(Ge,bt){var wt=ke._getPreferredOutput(bt);return yt&&Array.isArray(wt)?Ge=Ge.concat(wt):Ge.push(wt),Ge},[]):this._getPreferredOutput(Ve[0]):hn?[]:void 0}},Ne.prototype._getPreferredOutput=function(xe){var ue=this.currResultType;switch(ue){case"all":var Re=Array.isArray(xe.path)?xe.path:Ne.toPathArray(xe.path);return xe.pointer=Ne.toPointer(Re),xe.path="string"==typeof xe.path?xe.path:Ne.toPathString(xe.path),xe;case"value":case"parent":case"parentProperty":return xe[ue];case"path":return Ne.toPathString(xe[ue]);case"pointer":return Ne.toPointer(xe.path);default:throw new TypeError("Unknown result type")}},Ne.prototype._handleCallback=function(xe,ue,Re){if(ue){var Je=this._getPreferredOutput(xe);xe.path="string"==typeof xe.path?xe.path:Ne.toPathString(xe.path),ue(Je,Re,xe)}},Ne.prototype._trace=function(xe,ue,Re,Je,ke,qe,ot,yt){var Be,hn=this;if(!xe.length)return this._handleCallback(Be={path:Re,value:ue,parent:Je,parentProperty:ke,hasArrExpr:ot},qe,"value"),Be;var lt=xe[0],Ve=xe.slice(1),Ge=[];function bt(Ye){Array.isArray(Ye)?Ye.forEach(function(De){Ge.push(De)}):Ge.push(Ye)}if(("string"!=typeof lt||yt)&&ue&&N.call(ue,lt))bt(this._trace(Ve,ue[lt],$(Re,lt),ue,lt,qe,ot));else if("*"===lt)this._walk(lt,Ve,ue,Re,Je,ke,qe,function(Ye,De,ze,xt,un,_n,Jn,Dr){bt(hn._trace(re(Ye,ze),xt,un,_n,Jn,Dr,!0,!0))});else if(".."===lt)bt(this._trace(Ve,ue,Re,Je,ke,qe,ot)),this._walk(lt,Ve,ue,Re,Je,ke,qe,function(Ye,De,ze,xt,un,_n,Jn,Dr){"object"===X(xt[Ye])&&bt(hn._trace(re(De,ze),xt[Ye],$(un,Ye),xt,Ye,Dr,!0))});else{if("^"===lt)return this._hasParentSelector=!0,{path:Re.slice(0,-1),expr:Ve,isParentSelector:!0};if("~"===lt)return Be={path:$(Re,lt),value:ke,parent:Je,parentProperty:null},this._handleCallback(Be,qe,"property"),Be;if("$"===lt)bt(this._trace(Ve,ue,Re,null,null,qe,ot));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(lt))bt(this._slice(lt,Ve,ue,Re,Je,ke,qe));else if(0===lt.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(lt,Ve,ue,Re,Je,ke,qe,function(Ye,De,ze,xt,un,_n,Jn,Dr){hn._eval(De.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),xt[Ye],Ye,un,_n,Jn)&&bt(hn._trace(re(Ye,ze),xt,un,_n,Jn,Dr,!0))})}else if("("===lt[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");bt(this._trace(re(this._eval(lt,ue,Re[Re.length-1],Re.slice(0,-1),Je,ke),Ve),ue,Re,Je,ke,qe,ot))}else if("@"===lt[0]){var wt=!1,st=lt.slice(1,-2);switch(st){case"scalar":(!ue||!["object","function"].includes(X(ue)))&&(wt=!0);break;case"boolean":case"string":case"undefined":case"function":X(ue)===st&&(wt=!0);break;case"integer":Number.isFinite(ue)&&!(ue%1)&&(wt=!0);break;case"number":Number.isFinite(ue)&&(wt=!0);break;case"nonFinite":"number"==typeof ue&&!Number.isFinite(ue)&&(wt=!0);break;case"object":ue&&X(ue)===st&&(wt=!0);break;case"array":Array.isArray(ue)&&(wt=!0);break;case"other":wt=this.currOtherTypeCallback(ue,Re,Je,ke);break;case"null":null===ue&&(wt=!0);break;default:throw new TypeError("Unknown value type "+st)}if(wt)return this._handleCallback(Be={path:Re,value:ue,parent:Je,parentProperty:ke},qe,"value"),Be}else if("`"===lt[0]&&ue&&N.call(ue,lt.slice(1))){var gt=lt.slice(1);bt(this._trace(Ve,ue[gt],$(Re,gt),ue,gt,qe,ot,!0))}else if(lt.includes(",")){var At,ce=function ae(xe,ue){var Re=typeof Symbol<"u"&&xe[Symbol.iterator]||xe["@@iterator"];if(!Re){if(Array.isArray(xe)||(Re=ye(xe))||ue&&xe&&"number"==typeof xe.length){Re&&(xe=Re);var Je=0,ke=function(){};return{s:ke,n:function(){return Je>=xe.length?{done:!0}:{done:!1,value:xe[Je++]}},e:function(hn){throw hn},f:ke}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var yt,qe=!0,ot=!1;return{s:function(){Re=Re.call(xe)},n:function(){var hn=Re.next();return qe=hn.done,hn},e:function(hn){ot=!0,yt=hn},f:function(){try{!qe&&null!=Re.return&&Re.return()}finally{if(ot)throw yt}}}}(lt.split(","));try{for(ce.s();!(At=ce.n()).done;)bt(this._trace(re(At.value,Ve),ue,Re,Je,ke,qe,!0))}catch(Ye){ce.e(Ye)}finally{ce.f()}}else!yt&&ue&&N.call(ue,lt)&&bt(this._trace(Ve,ue[lt],$(Re,lt),ue,lt,qe,ot,!0))}if(this._hasParentSelector)for(var Tn=0;Tn<Ge.length;Tn++){var $n=Ge[Tn];if($n&&$n.isParentSelector){var Dt=this._trace($n.expr,ue,$n.path,Je,ke,qe,ot);if(Array.isArray(Dt)){Ge[Tn]=Dt[0];for(var kt=Dt.length,ln=1;ln<kt;ln++)Tn++,Ge.splice(Tn,0,Dt[ln])}else Ge[Tn]=Dt}}return Ge},Ne.prototype._walk=function(xe,ue,Re,Je,ke,qe,ot,yt){if(Array.isArray(Re))for(var hn=Re.length,Be=0;Be<hn;Be++)yt(Be,xe,ue,Re,Je,ke,qe,ot);else Re&&"object"===X(Re)&&Object.keys(Re).forEach(function(lt){yt(lt,xe,ue,Re,Je,ke,qe,ot)})},Ne.prototype._slice=function(xe,ue,Re,Je,ke,qe,ot){if(Array.isArray(Re)){var yt=Re.length,hn=xe.split(":"),Be=hn[2]&&Number.parseInt(hn[2])||1,lt=hn[0]&&Number.parseInt(hn[0])||0,Ve=hn[1]&&Number.parseInt(hn[1])||yt;lt=lt<0?Math.max(0,lt+yt):Math.min(yt,lt),Ve=Ve<0?Math.max(0,Ve+yt):Math.min(yt,Ve);for(var Ge=[],bt=lt;bt<Ve;bt+=Be)this._trace(re(bt,ue),Re,Je,ke,qe,ot,!0).forEach(function(st){Ge.push(st)});return Ge}},Ne.prototype._eval=function(xe,ue,Re,Je,ke,qe){xe.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=qe,xe=xe.replace(/@parentProperty/g,"_$_parentProperty")),xe.includes("@parent")&&(this.currSandbox._$_parent=ke,xe=xe.replace(/@parent/g,"_$_parent")),xe.includes("@property")&&(this.currSandbox._$_property=Re,xe=xe.replace(/@property/g,"_$_property")),xe.includes("@path")&&(this.currSandbox._$_path=Ne.toPathString(Je.concat([Re])),xe=xe.replace(/@path/g,"_$_path")),xe.includes("@root")&&(this.currSandbox._$_root=this.json,xe=xe.replace(/@root/g,"_$_root")),/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/.test(xe)&&(this.currSandbox._$_v=ue,xe=xe.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return this.vm.runInNewContext(xe,this.currSandbox)}catch(ot){throw console.log(ot),new Error("jsonPath: "+ot.message+": "+xe)}},Ne.cache={},Ne.toPathString=function(xe){for(var ue=xe,Re=ue.length,Je="$",ke=1;ke<Re;ke++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(ue[ke])||(Je+=/^[\*0-9]+$/.test(ue[ke])?"["+ue[ke]+"]":"['"+ue[ke]+"']");return Je},Ne.toPointer=function(xe){for(var ue=xe,Re=ue.length,Je="",ke=1;ke<Re;ke++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(ue[ke])||(Je+="/"+ue[ke].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return Je},Ne.toPathArray=function(xe){var ue=Ne.cache;if(ue[xe])return ue[xe].concat();var Re=[],ke=xe.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(qe,ot){return"[#"+(Re.push(ot)-1)+"]"}).replace(/\[["']((?:(?!['\]])[\s\S])*)["']\]/g,function(qe,ot){return"['"+ot.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/["']?\.["']?(?!(?:(?!\[)[\s\S])*\])|\[["']?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(qe,ot){return";"+ot.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(qe){var ot=qe.match(/#([0-9]+)/);return ot&&ot[1]?Re[ot[1]]:qe});return ue[xe]=ke,ue[xe].concat()},Ne.prototype.vm={runInNewContext:function(ue,Re){var Je=Object.keys(Re),ke=[];!function(ue,Re,Je){for(var ke=ue.length,qe=0;qe<ke;qe++)Je(ue[qe])&&Re.push(ue.splice(qe--,1)[0])}(Je,ke,function(Be){return"function"==typeof Re[Be]});var qe=Je.map(function(Be,lt){return Re[Be]}),ot=ke.reduce(function(Be,lt){var Ve=Re[lt].toString();return/function/.test(Ve)||(Ve="function "+Ve),"var "+lt+"="+Ve+";"+Be},"");!/(["'])use strict\1/.test(ue=ot+ue)&&!Je.includes("arguments")&&(ue="var arguments = undefined;"+ue);var yt=(ue=ue.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),hn=yt>-1?ue.slice(0,yt+1)+" return "+ue.slice(yt+1):" return "+ue;return R(Function,Y(Je).concat([hn])).apply(void 0,Y(qe))}}},3353:(He,be,z)=>{"use strict";function X(N){var $=Array.prototype.slice.call(arguments,1);return $.forEach(function(re){!re||Object.keys(re).forEach(function(pe){N[pe]=re[pe]})}),N}function M(N){return Object.prototype.toString.call(N)}function L(N){return"[object Function]"===M(N)}function R(N){return N.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var j={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},Z={"http:":{validate:function(N,$,re){var pe=N.slice($);return re.re.http||(re.re.http=new RegExp("^\\/\\/"+re.re.src_auth+re.re.src_host_port_strict+re.re.src_path,"i")),re.re.http.test(pe)?pe.match(re.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(N,$,re){var pe=N.slice($);return re.re.no_http||(re.re.no_http=new RegExp("^"+re.re.src_auth+"(?:localhost|(?:(?:"+re.re.src_domain+")\\.)+"+re.re.src_domain_root+")"+re.re.src_port+re.re.src_host_terminator+re.re.src_path,"i")),re.re.no_http.test(pe)?$>=3&&":"===N[$-3]||$>=3&&"/"===N[$-3]?0:pe.match(re.re.no_http)[0].length:0}},"mailto:":{validate:function(N,$,re){var pe=N.slice($);return re.re.mailto||(re.re.mailto=new RegExp("^"+re.re.src_email_name+"@"+re.re.src_host_strict,"i")),re.re.mailto.test(pe)?pe.match(re.re.mailto)[0].length:0}}},ie="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function ye(N){var $=N.re=z(9234)(N.__opts__),re=N.__tlds__.slice();function pe(ue){return ue.replace("%TLDS%",$.src_tlds)}N.onCompile(),N.__tlds_replaced__||re.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),re.push($.src_xn),$.src_tlds=re.join("|"),$.email_fuzzy=RegExp(pe($.tpl_email_fuzzy),"i"),$.link_fuzzy=RegExp(pe($.tpl_link_fuzzy),"i"),$.link_no_ip_fuzzy=RegExp(pe($.tpl_link_no_ip_fuzzy),"i"),$.host_fuzzy_test=RegExp(pe($.tpl_host_fuzzy_test),"i");var Ne=[];function Ee(ue,Re){throw new Error('(LinkifyIt) Invalid schema "'+ue+'": '+Re)}N.__compiled__={},Object.keys(N.__schemas__).forEach(function(ue){var Re=N.__schemas__[ue];if(null!==Re){var Je={validate:null,link:null};if(N.__compiled__[ue]=Je,function O(N){return"[object Object]"===M(N)}(Re))return function V(N){return"[object RegExp]"===M(N)}(Re.validate)?Je.validate=function G(N){return function($,re){var pe=$.slice(re);return N.test(pe)?pe.match(N)[0].length:0}}(Re.validate):L(Re.validate)?Je.validate=Re.validate:Ee(ue,Re),void(L(Re.normalize)?Je.normalize=Re.normalize:Re.normalize?Ee(ue,Re):Je.normalize=function(N,$){$.normalize(N)});if(function U(N){return"[object String]"===M(N)}(Re))return void Ne.push(ue);Ee(ue,Re)}}),Ne.forEach(function(ue){!N.__compiled__[N.__schemas__[ue]]||(N.__compiled__[ue].validate=N.__compiled__[N.__schemas__[ue]].validate,N.__compiled__[ue].normalize=N.__compiled__[N.__schemas__[ue]].normalize)}),N.__compiled__[""]={validate:null,normalize:function(N,$){$.normalize(N)}};var xe=Object.keys(N.__compiled__).filter(function(ue){return ue.length>0&&N.__compiled__[ue]}).map(R).join("|");N.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+$.src_ZPCc+"))("+xe+")","i"),N.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+$.src_ZPCc+"))("+xe+")","ig"),N.re.schema_at_start=RegExp("^"+N.re.schema_search.source,"i"),N.re.pretest=RegExp("("+N.re.schema_test.source+")|("+N.re.host_fuzzy_test.source+")|@","i"),function Y(N){N.__index__=-1,N.__text_cache__=""}(N)}function Ie(N,$){var re=N.__index__,pe=N.__last_index__,Ne=N.__text_cache__.slice(re,pe);this.schema=N.__schema__.toLowerCase(),this.index=re+$,this.lastIndex=pe+$,this.raw=Ne,this.text=Ne,this.url=Ne}function ne(N,$){var re=new Ie(N,$);return N.__compiled__[re.schema].normalize(re,N),re}function ae(N,$){if(!(this instanceof ae))return new ae(N,$);$||function J(N){return Object.keys(N||{}).reduce(function($,re){return $||j.hasOwnProperty(re)},!1)}(N)&&($=N,N={}),this.__opts__=X({},j,$),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=X({},Z,N),this.__compiled__={},this.__tlds__=ie,this.__tlds_replaced__=!1,this.re={},ye(this)}ae.prototype.add=function($,re){return this.__schemas__[$]=re,ye(this),this},ae.prototype.set=function($){return this.__opts__=X(this.__opts__,$),this},ae.prototype.test=function($){if(this.__text_cache__=$,this.__index__=-1,!$.length)return!1;var re,pe,Ne,Ee,xe,ue,Re,Je;if(this.re.schema_test.test($))for((Re=this.re.schema_search).lastIndex=0;null!==(re=Re.exec($));)if(Ee=this.testSchemaAt($,re[2],Re.lastIndex)){this.__schema__=re[2],this.__index__=re.index+re[1].length,this.__last_index__=re.index+re[0].length+Ee;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(Je=$.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||Je<this.__index__)&&null!==(pe=$.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(xe=pe.index+pe[1].length,(this.__index__<0||xe<this.__index__)&&(this.__schema__="",this.__index__=xe,this.__last_index__=pe.index+pe[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&$.indexOf("@")>=0&&null!==(Ne=$.match(this.re.email_fuzzy))&&(xe=Ne.index+Ne[1].length,ue=Ne.index+Ne[0].length,(this.__index__<0||xe<this.__index__||xe===this.__index__&&ue>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=xe,this.__last_index__=ue)),this.__index__>=0},ae.prototype.pretest=function($){return this.re.pretest.test($)},ae.prototype.testSchemaAt=function($,re,pe){return this.__compiled__[re.toLowerCase()]?this.__compiled__[re.toLowerCase()].validate($,pe,this):0},ae.prototype.match=function($){var re=0,pe=[];this.__index__>=0&&this.__text_cache__===$&&(pe.push(ne(this,re)),re=this.__last_index__);for(var Ne=re?$.slice(re):$;this.test(Ne);)pe.push(ne(this,re)),Ne=Ne.slice(this.__last_index__),re+=this.__last_index__;return pe.length?pe:null},ae.prototype.matchAtStart=function($){if(this.__text_cache__=$,this.__index__=-1,!$.length)return null;var re=this.re.schema_at_start.exec($);if(!re)return null;var pe=this.testSchemaAt($,re[2],re[0].length);return pe?(this.__schema__=re[2],this.__index__=re.index+re[1].length,this.__last_index__=re.index+re[0].length+pe,ne(this,0)):null},ae.prototype.tlds=function($,re){return $=Array.isArray($)?$:[$],re?(this.__tlds__=this.__tlds__.concat($).sort().filter(function(pe,Ne,Ee){return pe!==Ee[Ne-1]}).reverse(),ye(this),this):(this.__tlds__=$.slice(),this.__tlds_replaced__=!0,ye(this),this)},ae.prototype.normalize=function($){$.schema||($.url="http://"+$.url),"mailto:"===$.schema&&!/^mailto:/i.test($.url)&&($.url="mailto:"+$.url)},ae.prototype.onCompile=function(){},He.exports=ae},9234:(He,be,z)=>{"use strict";He.exports=function(X){var M={};X=X||{},M.src_Any=z(1129).source,M.src_Cc=z(9699).source,M.src_Z=z(5450).source,M.src_P=z(6020).source,M.src_ZPCc=[M.src_Z,M.src_P,M.src_Cc].join("|"),M.src_ZCc=[M.src_Z,M.src_Cc].join("|");return M.src_pseudo_letter="(?:(?![><\uff5c]|"+M.src_ZPCc+")"+M.src_Any+")",M.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",M.src_auth="(?:(?:(?!"+M.src_ZCc+"|[@/\\[\\]()]).)+@)?",M.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",M.src_host_terminator="(?=$|[><\uff5c]|"+M.src_ZPCc+")(?!"+(X["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+M.src_ZPCc+"))",M.src_path="(?:[/?#](?:(?!"+M.src_ZCc+"|[><\uff5c]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+M.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+M.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+M.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+M.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+M.src_ZCc+"|[']).)+\\'|\\'(?="+M.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+M.src_ZCc+"|[.]|$)|"+(X["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+M.src_ZCc+"|$)|;(?!"+M.src_ZCc+"|$)|\\!+(?!"+M.src_ZCc+"|[!]|$)|\\?(?!"+M.src_ZCc+"|[?]|$))+|\\/)?",M.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',M.src_xn="xn--[a-z0-9\\-]{1,59}",M.src_domain_root="(?:"+M.src_xn+"|"+M.src_pseudo_letter+"{1,63})",M.src_domain="(?:"+M.src_xn+"|(?:"+M.src_pseudo_letter+")|(?:"+M.src_pseudo_letter+"(?:-|"+M.src_pseudo_letter+"){0,61}"+M.src_pseudo_letter+"))",M.src_host="(?:(?:(?:(?:"+M.src_domain+")\\.)*"+M.src_domain+"))",M.tpl_host_fuzzy="(?:"+M.src_ip4+"|(?:(?:(?:"+M.src_domain+")\\.)+(?:%TLDS%)))",M.tpl_host_no_ip_fuzzy="(?:(?:(?:"+M.src_domain+")\\.)+(?:%TLDS%))",M.src_host_strict=M.src_host+M.src_host_terminator,M.tpl_host_fuzzy_strict=M.tpl_host_fuzzy+M.src_host_terminator,M.src_host_port_strict=M.src_host+M.src_port+M.src_host_terminator,M.tpl_host_port_fuzzy_strict=M.tpl_host_fuzzy+M.src_port+M.src_host_terminator,M.tpl_host_port_no_ip_fuzzy_strict=M.tpl_host_no_ip_fuzzy+M.src_port+M.src_host_terminator,M.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+M.src_ZPCc+"|>|$))",M.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+M.src_ZCc+")("+M.src_email_name+"@"+M.tpl_host_fuzzy_strict+")",M.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+M.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+M.tpl_host_port_fuzzy_strict+M.src_path+")",M.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+M.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+M.tpl_host_port_no_ip_fuzzy_strict+M.src_path+")",M}},6729:He=>{He.exports=function be(z){return!!z&&"object"==typeof z}},8132:He=>{var ln,z="__lodash_hash_undefined__",O=/^\[object .+?Constructor\]$/,V="object"==typeof global&&global&&global.Object===Object&&global,L="object"==typeof self&&self&&self.Object===Object&&self,R=V||L||Function("return this")(),Z=Array.prototype,te=Function.prototype,ie=Object.prototype,Y=R["__core-js_shared__"],G=(ln=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+ln:"",oe=te.toString,ye=ie.hasOwnProperty,Ie=ie.toString,ne=RegExp("^"+oe.call(ye).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ae=Z.splice,N=Me(R,"Map"),$=Me(Object,"create");function re(ln){var Ye=-1,De=ln?ln.length:0;for(this.clear();++Ye<De;){var ze=ln[Ye];this.set(ze[0],ze[1])}}function Re(ln){var Ye=-1,De=ln?ln.length:0;for(this.clear();++Ye<De;){var ze=ln[Ye];this.set(ze[0],ze[1])}}function hn(ln){var Ye=-1,De=ln?ln.length:0;for(this.clear();++Ye<De;){var ze=ln[Ye];this.set(ze[0],ze[1])}}function wt(ln,Ye){for(var De=ln.length;De--;)if($n(ln[De][0],Ye))return De;return-1}function gt(ln,Ye){var De=ln.__data__;return function ce(ln){var Ye=typeof ln;return"string"==Ye||"number"==Ye||"symbol"==Ye||"boolean"==Ye?"__proto__"!==ln:null===ln}(Ye)?De["string"==typeof Ye?"string":"hash"]:De.map}function Me(ln,Ye){var De=function j(ln,Ye){return ln?.[Ye]}(ln,Ye);return function st(ln){if(!kt(ln)||function At(ln){return!!G&&G in ln}(ln))return!1;var Ye=function Dt(ln){var Ye=kt(ln)?Ie.call(ln):"";return"[object Function]"==Ye||"[object GeneratorFunction]"==Ye}(ln)||function J(ln){var Ye=!1;if(null!=ln&&"function"!=typeof ln.toString)try{Ye=!!(ln+"")}catch{}return Ye}(ln)?ne:O;return Ye.test(function Ft(ln){if(null!=ln){try{return oe.call(ln)}catch{}try{return ln+""}catch{}}return""}(ln))}(De)?De:void 0}function Tn(ln,Ye){if("function"!=typeof ln||Ye&&"function"!=typeof Ye)throw new TypeError("Expected a function");var De=function(){var ze=arguments,xt=Ye?Ye.apply(this,ze):ze[0],un=De.cache;if(un.has(xt))return un.get(xt);var _n=ln.apply(this,ze);return De.cache=un.set(xt,_n),_n};return De.cache=new(Tn.Cache||hn),De}function $n(ln,Ye){return ln===Ye||ln!=ln&&Ye!=Ye}function kt(ln){var Ye=typeof ln;return!!ln&&("object"==Ye||"function"==Ye)}re.prototype.clear=function pe(){this.__data__=$?$(null):{}},re.prototype.delete=function Ne(ln){return this.has(ln)&&delete this.__data__[ln]},re.prototype.get=function Ee(ln){var Ye=this.__data__;if($){var De=Ye[ln];return De===z?void 0:De}return ye.call(Ye,ln)?Ye[ln]:void 0},re.prototype.has=function xe(ln){var Ye=this.__data__;return $?void 0!==Ye[ln]:ye.call(Ye,ln)},re.prototype.set=function ue(ln,Ye){return this.__data__[ln]=$&&void 0===Ye?z:Ye,this},Re.prototype.clear=function Je(){this.__data__=[]},Re.prototype.delete=function ke(ln){var Ye=this.__data__,De=wt(Ye,ln);return!(De<0||(De==Ye.length-1?Ye.pop():ae.call(Ye,De,1),0))},Re.prototype.get=function qe(ln){var Ye=this.__data__,De=wt(Ye,ln);return De<0?void 0:Ye[De][1]},Re.prototype.has=function ot(ln){return wt(this.__data__,ln)>-1},Re.prototype.set=function yt(ln,Ye){var De=this.__data__,ze=wt(De,ln);return ze<0?De.push([ln,Ye]):De[ze][1]=Ye,this},hn.prototype.clear=function Be(){this.__data__={hash:new re,map:new(N||Re),string:new re}},hn.prototype.delete=function lt(ln){return gt(this,ln).delete(ln)},hn.prototype.get=function Ve(ln){return gt(this,ln).get(ln)},hn.prototype.has=function Ge(ln){return gt(this,ln).has(ln)},hn.prototype.set=function bt(ln,Ye){return gt(this,ln).set(ln,Ye),this},Tn.Cache=hn,He.exports=Tn},8078:He=>{var be="Expected a function",M=/^\s+|\s+$/g,U=/^[-+]0x[0-9a-f]+$/i,O=/^0b[01]+$/i,V=/^0o[0-7]+$/i,L=parseInt,R="object"==typeof global&&global&&global.Object===Object&&global,j="object"==typeof self&&self&&self.Object===Object&&self,J=R||j||Function("return this")(),te=Object.prototype.toString,ie=Math.max,Y=Math.min,G=function(){return J.Date.now()};function Ie($){var re=typeof $;return!!$&&("object"==re||"function"==re)}function N($){if("number"==typeof $)return $;if(function ae($){return"symbol"==typeof $||function ne($){return!!$&&"object"==typeof $}($)&&"[object Symbol]"==te.call($)}($))return NaN;if(Ie($)){var re="function"==typeof $.valueOf?$.valueOf():$;$=Ie(re)?re+"":re}if("string"!=typeof $)return 0===$?$:+$;$=$.replace(M,"");var pe=O.test($);return pe||V.test($)?L($.slice(2),pe?2:8):U.test($)?NaN:+$}He.exports=function ye($,re,pe){var Ne=!0,Ee=!0;if("function"!=typeof $)throw new TypeError(be);return Ie(pe)&&(Ne="leading"in pe?!!pe.leading:Ne,Ee="trailing"in pe?!!pe.trailing:Ee),function oe($,re,pe){var Ne,Ee,xe,ue,Re,Je,ke=0,qe=!1,ot=!1,yt=!0;if("function"!=typeof $)throw new TypeError(be);function hn(Me){var ce=Ne,At=Ee;return Ne=Ee=void 0,ke=Me,ue=$.apply(At,ce)}function Be(Me){return ke=Me,Re=setTimeout(Ge,re),qe?hn(Me):ue}function Ve(Me){var ce=Me-Je;return void 0===Je||ce>=re||ce<0||ot&&Me-ke>=xe}function Ge(){var Me=G();if(Ve(Me))return bt(Me);Re=setTimeout(Ge,function lt(Me){var Ft=re-(Me-Je);return ot?Y(Ft,xe-(Me-ke)):Ft}(Me))}function bt(Me){return Re=void 0,yt&&Ne?hn(Me):(Ne=Ee=void 0,ue)}function gt(){var Me=G(),ce=Ve(Me);if(Ne=arguments,Ee=this,Je=Me,ce){if(void 0===Re)return Be(Je);if(ot)return Re=setTimeout(Ge,re),hn(Je)}return void 0===Re&&(Re=setTimeout(Ge,re)),ue}return re=N(re)||0,Ie(pe)&&(qe=!!pe.leading,xe=(ot="maxWait"in pe)?ie(N(pe.maxWait)||0,re):xe,yt="trailing"in pe?!!pe.trailing:yt),gt.cancel=function wt(){void 0!==Re&&clearTimeout(Re),ke=0,Ne=Je=Ee=Re=void 0},gt.flush=function st(){return void 0===Re?ue:bt(G())},gt}($,re,{leading:Ne,maxWait:re,trailing:Ee})}},4994:(He,be,z)=>{var X=z(4312),M=z(6421),U=z(5764),O=z(8685),V=z(6676);function L(R){var j=-1,J=null==R?0:R.length;for(this.clear();++j<J;){var Z=R[j];this.set(Z[0],Z[1])}}L.prototype.clear=X,L.prototype.delete=M,L.prototype.get=U,L.prototype.has=O,L.prototype.set=V,He.exports=L},9215:(He,be,z)=>{var X=z(1840),M=z(4378),U=z(4981),O=z(7343),V=z(8895);function L(R){var j=-1,J=null==R?0:R.length;for(this.clear();++j<J;){var Z=R[j];this.set(Z[0],Z[1])}}L.prototype.clear=X,L.prototype.delete=M,L.prototype.get=U,L.prototype.has=O,L.prototype.set=V,He.exports=L},1501:(He,be,z)=>{var U=z(3436)(z(2119),"Map");He.exports=U},9850:(He,be,z)=>{var X=z(638),M=z(1184),U=z(866),O=z(3771),V=z(1772);function L(R){var j=-1,J=null==R?0:R.length;for(this.clear();++j<J;){var Z=R[j];this.set(Z[0],Z[1])}}L.prototype.clear=X,L.prototype.delete=M,L.prototype.get=U,L.prototype.has=O,L.prototype.set=V,He.exports=L},443:(He,be,z)=>{var X=z(2119);He.exports=X.Symbol},4633:He=>{He.exports=function be(z,X){for(var M=-1,U=null==z?0:z.length,O=Array(U);++M<U;)O[M]=X(z[M],M,z);return O}},9719:(He,be,z)=>{var X=z(5683),M=z(217),O=Object.prototype.hasOwnProperty;He.exports=function V(L,R,j){var J=L[R];(!O.call(L,R)||!M(J,j)||void 0===j&&!(R in L))&&X(L,R,j)}},3503:(He,be,z)=>{var X=z(217);He.exports=function M(U,O){for(var V=U.length;V--;)if(X(U[V][0],O))return V;return-1}},5683:(He,be,z)=>{var X=z(6713);He.exports=function M(U,O,V){"__proto__"==O&&X?X(U,O,{configurable:!0,enumerable:!0,value:V,writable:!0}):U[O]=V}},5456:(He,be,z)=>{var X=z(6884),M=z(8533);He.exports=function U(O,V){for(var L=0,R=(V=X(V,O)).length;null!=O&&L<R;)O=O[M(V[L++])];return L&&L==R?O:void 0}},3337:(He,be,z)=>{var X=z(443),M=z(1318),U=z(2902),L=X?X.toStringTag:void 0;He.exports=function R(j){return null==j?void 0===j?"[object Undefined]":"[object Null]":L&&L in Object(j)?M(j):U(j)}},7304:(He,be,z)=>{var X=z(5946),M=z(1943),U=z(5940),O=z(2827),L=/^\[object .+?Constructor\]$/,te=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");He.exports=function ie(Y){return!(!U(Y)||M(Y))&&(X(Y)?te:L).test(O(Y))}},5963:(He,be,z)=>{var X=z(9719),M=z(6884),U=z(8442),O=z(5940),V=z(8533);He.exports=function L(R,j,J,Z){if(!O(R))return R;for(var te=-1,ie=(j=M(j,R)).length,Y=ie-1,G=R;null!=G&&++te<ie;){var oe=V(j[te]),ye=J;if("__proto__"===oe||"constructor"===oe||"prototype"===oe)return R;if(te!=Y){var Ie=G[oe];void 0===(ye=Z?Z(Ie,oe,G):void 0)&&(ye=O(Ie)?Ie:U(j[te+1])?[]:{})}X(G,oe,ye),G=G[oe]}return R}},3935:(He,be,z)=>{var X=z(443),M=z(4633),U=z(9460),O=z(4129),L=X?X.prototype:void 0,R=L?L.toString:void 0;He.exports=function j(J){if("string"==typeof J)return J;if(U(J))return M(J,j)+"";if(O(J))return R?R.call(J):"";var Z=J+"";return"0"==Z&&1/J==-1/0?"-0":Z}},3348:(He,be,z)=>{var X=z(2760),M=/^\s+/;He.exports=function U(O){return O&&O.slice(0,X(O)+1).replace(M,"")}},6884:(He,be,z)=>{var X=z(9460),M=z(5352),U=z(2855),O=z(3943);He.exports=function V(L,R){return X(L)?L:M(L,R)?[L]:U(O(L))}},9454:He=>{He.exports=function be(z,X){var M=-1,U=z.length;for(X||(X=Array(U));++M<U;)X[M]=z[M];return X}},4610:(He,be,z)=>{var X=z(2119);He.exports=X["__core-js_shared__"]},6713:(He,be,z)=>{var X=z(3436),M=function(){try{var U=X(Object,"defineProperty");return U({},"",{}),U}catch{}}();He.exports=M},9122:He=>{var be="object"==typeof global&&global&&global.Object===Object&&global;He.exports=be},4537:(He,be,z)=>{var X=z(3819);He.exports=function M(U,O){var V=U.__data__;return X(O)?V["string"==typeof O?"string":"hash"]:V.map}},3436:(He,be,z)=>{var X=z(7304),M=z(1990);He.exports=function U(O,V){var L=M(O,V);return X(L)?L:void 0}},1318:(He,be,z)=>{var X=z(443),M=Object.prototype,U=M.hasOwnProperty,O=M.toString,V=X?X.toStringTag:void 0;He.exports=function L(R){var j=U.call(R,V),J=R[V];try{R[V]=void 0;var Z=!0}catch{}var te=O.call(R);return Z&&(j?R[V]=J:delete R[V]),te}},1990:He=>{He.exports=function be(z,X){return z?.[X]}},4312:(He,be,z)=>{var X=z(862);He.exports=function M(){this.__data__=X?X(null):{},this.size=0}},6421:He=>{He.exports=function be(z){var X=this.has(z)&&delete this.__data__[z];return this.size-=X?1:0,X}},5764:(He,be,z)=>{var X=z(862),O=Object.prototype.hasOwnProperty;He.exports=function V(L){var R=this.__data__;if(X){var j=R[L];return"__lodash_hash_undefined__"===j?void 0:j}return O.call(R,L)?R[L]:void 0}},8685:(He,be,z)=>{var X=z(862),U=Object.prototype.hasOwnProperty;He.exports=function O(V){var L=this.__data__;return X?void 0!==L[V]:U.call(L,V)}},6676:(He,be,z)=>{var X=z(862);He.exports=function U(O,V){var L=this.__data__;return this.size+=this.has(O)?0:1,L[O]=X&&void 0===V?"__lodash_hash_undefined__":V,this}},8442:He=>{var z=/^(?:0|[1-9]\d*)$/;He.exports=function X(M,U){var O=typeof M;return!!(U=U??9007199254740991)&&("number"==O||"symbol"!=O&&z.test(M))&&M>-1&&M%1==0&&M<U}},5352:(He,be,z)=>{var X=z(9460),M=z(4129),U=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/;He.exports=function V(L,R){if(X(L))return!1;var j=typeof L;return!("number"!=j&&"symbol"!=j&&"boolean"!=j&&null!=L&&!M(L))||O.test(L)||!U.test(L)||null!=R&&L in Object(R)}},3819:He=>{He.exports=function be(z){var X=typeof z;return"string"==X||"number"==X||"symbol"==X||"boolean"==X?"__proto__"!==z:null===z}},1943:(He,be,z)=>{var O,X=z(4610),M=(O=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"";He.exports=function U(O){return!!M&&M in O}},1840:He=>{He.exports=function be(){this.__data__=[],this.size=0}},4378:(He,be,z)=>{var X=z(3503),U=Array.prototype.splice;He.exports=function O(V){var L=this.__data__,R=X(L,V);return!(R<0||(R==L.length-1?L.pop():U.call(L,R,1),--this.size,0))}},4981:(He,be,z)=>{var X=z(3503);He.exports=function M(U){var O=this.__data__,V=X(O,U);return V<0?void 0:O[V][1]}},7343:(He,be,z)=>{var X=z(3503);He.exports=function M(U){return X(this.__data__,U)>-1}},8895:(He,be,z)=>{var X=z(3503);He.exports=function M(U,O){var V=this.__data__,L=X(V,U);return L<0?(++this.size,V.push([U,O])):V[L][1]=O,this}},638:(He,be,z)=>{var X=z(4994),M=z(9215),U=z(1501);He.exports=function O(){this.size=0,this.__data__={hash:new X,map:new(U||M),string:new X}}},1184:(He,be,z)=>{var X=z(4537);He.exports=function M(U){var O=X(this,U).delete(U);return this.size-=O?1:0,O}},866:(He,be,z)=>{var X=z(4537);He.exports=function M(U){return X(this,U).get(U)}},3771:(He,be,z)=>{var X=z(4537);He.exports=function M(U){return X(this,U).has(U)}},1772:(He,be,z)=>{var X=z(4537);He.exports=function M(U,O){var V=X(this,U),L=V.size;return V.set(U,O),this.size+=V.size==L?0:1,this}},719:(He,be,z)=>{var X=z(535);He.exports=function U(O){var V=X(O,function(R){return 500===L.size&&L.clear(),R}),L=V.cache;return V}},862:(He,be,z)=>{var M=z(3436)(Object,"create");He.exports=M},2902:He=>{var z=Object.prototype.toString;He.exports=function X(M){return z.call(M)}},2119:(He,be,z)=>{var X=z(9122),M="object"==typeof self&&self&&self.Object===Object&&self,U=X||M||Function("return this")();He.exports=U},2855:(He,be,z)=>{var X=z(719),M=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,U=/\\(\\)?/g,O=X(function(V){var L=[];return 46===V.charCodeAt(0)&&L.push(""),V.replace(M,function(R,j,J,Z){L.push(J?Z.replace(U,"$1"):j||R)}),L});He.exports=O},8533:(He,be,z)=>{var X=z(4129);He.exports=function U(O){if("string"==typeof O||X(O))return O;var V=O+"";return"0"==V&&1/O==-1/0?"-0":V}},2827:He=>{var z=Function.prototype.toString;He.exports=function X(M){if(null!=M){try{return z.call(M)}catch{}try{return M+""}catch{}}return""}},2760:He=>{var be=/\s/;He.exports=function z(X){for(var M=X.length;M--&&be.test(X.charAt(M)););return M}},406:(He,be,z)=>{var X=z(5940),M=z(1710),U=z(1467),V=Math.max,L=Math.min;He.exports=function R(j,J,Z){var te,ie,Y,G,oe,ye,Ie=0,ne=!1,ae=!1,N=!0;if("function"!=typeof j)throw new TypeError("Expected a function");function $(ke){var qe=te,ot=ie;return te=ie=void 0,Ie=ke,G=j.apply(ot,qe)}function re(ke){return Ie=ke,oe=setTimeout(Ee,J),ne?$(ke):G}function Ne(ke){var qe=ke-ye;return void 0===ye||qe>=J||qe<0||ae&&ke-Ie>=Y}function Ee(){var ke=M();if(Ne(ke))return xe(ke);oe=setTimeout(Ee,function pe(ke){var yt=J-(ke-ye);return ae?L(yt,Y-(ke-Ie)):yt}(ke))}function xe(ke){return oe=void 0,N&&te?$(ke):(te=ie=void 0,G)}function Je(){var ke=M(),qe=Ne(ke);if(te=arguments,ie=this,ye=ke,qe){if(void 0===oe)return re(ye);if(ae)return clearTimeout(oe),oe=setTimeout(Ee,J),$(ye)}return void 0===oe&&(oe=setTimeout(Ee,J)),G}return J=U(J)||0,X(Z)&&(ne=!!Z.leading,Y=(ae="maxWait"in Z)?V(U(Z.maxWait)||0,J):Y,N="trailing"in Z?!!Z.trailing:N),Je.cancel=function ue(){void 0!==oe&&clearTimeout(oe),Ie=0,te=ye=ie=oe=void 0},Je.flush=function Re(){return void 0===oe?G:xe(M())},Je}},217:He=>{He.exports=function be(z,X){return z===X||z!=z&&X!=X}},8817:(He,be,z)=>{var X=z(5456);He.exports=function M(U,O,V){var L=null==U?void 0:X(U,O);return void 0===L?V:L}},9460:He=>{He.exports=Array.isArray},5946:(He,be,z)=>{var X=z(3337),M=z(5940);He.exports=function R(j){if(!M(j))return!1;var J=X(j);return"[object Function]"==J||"[object GeneratorFunction]"==J||"[object AsyncFunction]"==J||"[object Proxy]"==J}},5940:He=>{He.exports=function be(z){var X=typeof z;return null!=z&&("object"==X||"function"==X)}},2671:He=>{He.exports=function be(z){return null!=z&&"object"==typeof z}},4129:(He,be,z)=>{var X=z(3337),M=z(2671);He.exports=function O(V){return"symbol"==typeof V||M(V)&&"[object Symbol]"==X(V)}},7489:function(He,be,z){var X;He=z.nmd(He),function(){var M,L="Expected a function",j="__lodash_hash_undefined__",Z="__lodash_placeholder__",$=32,yt=1/0,hn=9007199254740991,Ve=4294967295,wt=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",$],["partialRight",64],["rearg",256]],st="[object Arguments]",gt="[object Array]",ce="[object Boolean]",At="[object Date]",Tn="[object Error]",$n="[object Function]",Dt="[object GeneratorFunction]",kt="[object Map]",ln="[object Number]",De="[object Object]",ze="[object Promise]",un="[object RegExp]",_n="[object Set]",Jn="[object String]",Dr="[object Symbol]",kr="[object WeakMap]",tr="[object ArrayBuffer]",il="[object DataView]",$l="[object Float32Array]",ql="[object Float64Array]",Wf="[object Int8Array]",jf="[object Int16Array]",ih="[object Int32Array]",uc="[object Uint8Array]",Sh="[object Uint8ClampedArray]",ku="[object Uint16Array]",Xa="[object Uint32Array]",Pd=/\b__p \+= '';/g,uu=/\b(__p \+=) '' \+/g,Sa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Eh=/&(?:amp|lt|gt|quot|#39);/g,Ou=/[&<>"']/g,nd=RegExp(Eh.source),ff=RegExp(Ou.source),id=/<%-([\s\S]+?)%>/g,pl=/<%([\s\S]+?)%>/g,pf=/<%=([\s\S]+?)%>/g,rh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gf=/^\w*$/,kd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ic=/[\\^$.*+?()[\]{}|]/g,Mg=RegExp(Ic.source),Th=/^\s+/,ro=/\s/,mf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gl=/\{\n\/\* \[wrapped with (.+)\] \*/,Sc=/,? & /,rl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$f=/[()=,{}\[\]\/\s]/,rd=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,ct=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,Oe=/^\[object .+?Constructor\]$/,it=/^0o[0-7]+$/i,Rt=/^(?:0|[1-9]\d*)$/,Yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Dn=/($^)/,Ai=/['\n\r\u2028\u2029\\]/g,oi="\\ud800-\\udfff",ur="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ws="\\u2700-\\u27bf",So="a-z\\xdf-\\xf6\\xf8-\\xff",Ya="A-Z\\xc0-\\xd6\\xd8-\\xde",Fu="\\ufe0e\\ufe0f",hs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dg="["+oi+"]",Vp="["+hs+"]",_i="["+ur+"]",Lg="\\d+",Ps="["+Ws+"]",To="["+So+"]",vv="[^"+oi+hs+Lg+Ws+So+Ya+"]",yv="\\ud83c[\\udffb-\\udfff]",xs="[^"+oi+"]",er="(?:\\ud83c[\\udde6-\\uddff]){2}",My="[\\ud800-\\udbff][\\udc00-\\udfff]",Yo="["+Ya+"]",Ec="(?:"+To+"|"+vv+")",sd="(?:"+Yo+"|"+vv+")",kl="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",on="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",bs="(?:"+_i+"|"+yv+")?",Od="["+Fu+"]?",Tc=Od+bs+"(?:\\u200d(?:"+[xs,er,My].join("|")+")"+Od+bs+")*",so="(?:"+[Ps,er,My].join("|")+")"+Tc,Mh="(?:"+[xs+_i+"?",_i,er,My,Dg].join("|")+")",N_=RegExp("['\u2019]","g"),hc=RegExp(_i,"g"),Zi=RegExp(yv+"(?="+yv+")|"+Mh+Tc,"g"),fb=RegExp([Yo+"?"+To+"+"+kl+"(?="+[Vp,Yo,"$"].join("|")+")",sd+"+"+on+"(?="+[Vp,Yo+Ec,"$"].join("|")+")",Yo+"?"+Ec+"+"+kl,Yo+"+"+on,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lg,so].join("|"),"g"),Sr=RegExp("[\\u200d"+oi+ur+Fu+"]"),Mc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],B_=-1,Ta={};Ta[$l]=Ta[ql]=Ta[Wf]=Ta[jf]=Ta[ih]=Ta[uc]=Ta[Sh]=Ta[ku]=Ta[Xa]=!0,Ta[st]=Ta[gt]=Ta[tr]=Ta[ce]=Ta[il]=Ta[At]=Ta[Tn]=Ta[$n]=Ta[kt]=Ta[ln]=Ta[De]=Ta[un]=Ta[_n]=Ta[Jn]=Ta[kr]=!1;var ha={};ha[st]=ha[gt]=ha[tr]=ha[il]=ha[ce]=ha[At]=ha[$l]=ha[ql]=ha[Wf]=ha[jf]=ha[ih]=ha[kt]=ha[ln]=ha[De]=ha[un]=ha[_n]=ha[Jn]=ha[Dr]=ha[uc]=ha[Sh]=ha[ku]=ha[Xa]=!0,ha[Tn]=ha[$n]=ha[kr]=!1;var Am={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},os=parseFloat,bv=parseInt,Cv="object"==typeof global&&global&&global.Object===Object&&global,Nu="object"==typeof self&&self&&self.Object===Object&&self,Xl=Cv||Nu||Function("return this")(),z_=be&&!be.nodeType&&be,sh=z_&&He&&!He.nodeType&&He,oh=sh&&sh.exports===z_,Ly=oh&&Cv.process,Dh=function(){try{return sh&&sh.require&&sh.require("util").types||Ly&&Ly.binding&&Ly.binding("util")}catch{}}(),Ma=Dh&&Dh.isArrayBuffer,oo=Dh&&Dh.isDate,V_=Dh&&Dh.isMap,Ry=Dh&&Dh.isRegExp,Fd=Dh&&Dh.isSet,_o=Dh&&Dh.isTypedArray;function Ka(En,ui,ni){switch(ni.length){case 0:return En.call(ui);case 1:return En.call(ui,ni[0]);case 2:return En.call(ui,ni[0],ni[1]);case 3:return En.call(ui,ni[0],ni[1],ni[2])}return En.apply(ui,ni)}function Xf(En,ui,ni,Nr){for(var Us=-1,Qo=null==En?0:En.length;++Us<Qo;){var Zl=En[Us];ui(Nr,Zl,ni(Zl),En)}return Nr}function Za(En,ui){for(var ni=-1,Nr=null==En?0:En.length;++ni<Nr&&!1!==ui(En[ni],ni,En););return En}function sl(En,ui){for(var ni=null==En?0:En.length;ni--&&!1!==ui(En[ni],ni,En););return En}function hu(En,ui){for(var ni=-1,Nr=null==En?0:En.length;++ni<Nr;)if(!ui(En[ni],ni,En))return!1;return!0}function ah(En,ui){for(var ni=-1,Nr=null==En?0:En.length,Us=0,Qo=[];++ni<Nr;){var Zl=En[ni];ui(Zl,ni,En)&&(Qo[Us++]=Zl)}return Qo}function Yf(En,ui){return!(null==En||!En.length)&&La(En,ui,0)>-1}function _r(En,ui,ni){for(var Nr=-1,Us=null==En?0:En.length;++Nr<Us;)if(ni(ui,En[Nr]))return!0;return!1}function Da(En,ui){for(var ni=-1,Nr=null==En?0:En.length,Us=Array(Nr);++ni<Nr;)Us[ni]=ui(En[ni],ni,En);return Us}function Lh(En,ui){for(var ni=-1,Nr=ui.length,Us=En.length;++ni<Nr;)En[Us+ni]=ui[ni];return En}function vf(En,ui,ni,Nr){var Us=-1,Qo=null==En?0:En.length;for(Nr&&Qo&&(ni=En[++Us]);++Us<Qo;)ni=ui(ni,En[Us],Us,En);return ni}function Or(En,ui,ni,Nr){var Us=null==En?0:En.length;for(Nr&&Us&&(ni=En[--Us]);Us--;)ni=ui(ni,En[Us],Us,En);return ni}function xm(En,ui){for(var ni=-1,Nr=null==En?0:En.length;++ni<Nr;)if(ui(En[ni],ni,En))return!0;return!1}var Py=Ts("length");function Zo(En,ui,ni){var Nr;return ni(En,function(Us,Qo,Zl){if(ui(Us,Qo,Zl))return Nr=Qo,!1}),Nr}function Ol(En,ui,ni,Nr){for(var Us=En.length,Qo=ni+(Nr?1:-1);Nr?Qo--:++Qo<Us;)if(ui(En[Qo],Qo,En))return Qo;return-1}function La(En,ui,ni){return ui==ui?function np(En,ui,ni){for(var Nr=ni-1,Us=En.length;++Nr<Us;)if(En[Nr]===ui)return Nr;return-1}(En,ui,ni):Ol(En,Yl,ni)}function fu(En,ui,ni,Nr){for(var Us=ni-1,Qo=En.length;++Us<Qo;)if(Nr(En[Us],ui))return Us;return-1}function Yl(En){return En!=En}function Ir(En,ui){var ni=null==En?0:En.length;return ni?Al(En,ui)/ni:NaN}function Ts(En){return function(ui){return null==ui?M:ui[En]}}function va(En){return function(ui){return null==En?M:En[ui]}}function pu(En,ui,ni,Nr,Us){return Us(En,function(Qo,Zl,_a){ni=Nr?(Nr=!1,Qo):ui(ni,Qo,Zl,_a)}),ni}function Al(En,ui){for(var ni,Nr=-1,Us=En.length;++Nr<Us;){var Qo=ui(En[Nr]);Qo!==M&&(ni=ni===M?Qo:ni+Qo)}return ni}function od(En,ui){for(var ni=-1,Nr=Array(En);++ni<En;)Nr[ni]=ui(ni);return Nr}function Hp(En){return En&&En.slice(0,Jc(En)+1).replace(Th,"")}function Kl(En){return function(ui){return En(ui)}}function js(En,ui){return Da(ui,function(ni){return En[ni]})}function yf(En,ui){return En.has(ui)}function Zf(En,ui){for(var ni=-1,Nr=En.length;++ni<Nr&&La(ui,En[ni],0)>-1;);return ni}function Im(En,ui){for(var ni=En.length;ni--&&La(ui,En[ni],0)>-1;);return ni}function _f(En,ui){for(var ni=En.length,Nr=0;ni--;)En[ni]===ui&&++Nr;return Nr}var Dc=va({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Pg=va({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Qf(En){return"\\"+Am[En]}function ch(En){return Sr.test(En)}function Jf(En){var ui=-1,ni=Array(En.size);return En.forEach(function(Nr,Us){ni[++ui]=[Us,Nr]}),ni}function ep(En,ui){return function(ni){return En(ui(ni))}}function gu(En,ui){for(var ni=-1,Nr=En.length,Us=0,Qo=[];++ni<Nr;){var Zl=En[ni];(Zl===ui||Zl===Z)&&(En[ni]=Z,Qo[Us++]=ni)}return Qo}function Gp(En){var ui=-1,ni=Array(En.size);return En.forEach(function(Nr){ni[++ui]=Nr}),ni}function al(En){return ch(En)?function wv(En){for(var ui=Zi.lastIndex=0;Zi.test(En);)++ui;return ui}(En):Py(En)}function uh(En){return ch(En)?function kg(En){return En.match(Zi)||[]}(En):function Yr(En){return En.split("")}(En)}function Jc(En){for(var ui=En.length;ui--&&ro.test(En.charAt(ui)););return ui}var Rh=va({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Sm=function En(ui){var b,ni=(ui=null==ui?Xl:Sm.defaults(Xl.Object(),ui,Sm.pick(Xl,Dy))).Array,Nr=ui.Date,Us=ui.Error,Qo=ui.Function,Zl=ui.Math,_a=ui.Object,Av=ui.RegExp,xv=ui.String,kh=ui.TypeError,Iv=ni.prototype,Fg=_a.prototype,Sv=ui["__core-js_shared__"],Ev=Qo.prototype.toString,ra=Fg.hasOwnProperty,Oy=0,Em=(b=/[^.]+$/.exec(Sv&&Sv.keys&&Sv.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",Tm=Fg.toString,pb=Ev.call(_a),H_=Xl._,ip=Av("^"+Ev.call(ra).replace(Ic,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mm=oh?ui.Buffer:M,da=ui.Symbol,bf=ui.Uint8Array,Fy=Mm?Mm.allocUnsafe:M,rp=ep(_a.getPrototypeOf,_a),Tv=_a.create,Dm=Fg.propertyIsEnumerable,Ng=Iv.splice,Bg=da?da.isConcatSpreadable:M,Wp=da?da.iterator:M,ba=da?da.toStringTag:M,sp=function(){try{var b=Qd(_a,"defineProperty");return b({},"",{}),b}catch{}}(),Ny=ui.clearTimeout!==Xl.clearTimeout&&ui.clearTimeout,Lm=Nr&&Nr.now!==Xl.Date.now&&Nr.now,By=ui.setTimeout!==Xl.setTimeout&&ui.setTimeout,Mv=Zl.ceil,sa=Zl.floor,zg=_a.getOwnPropertySymbols,jp=Mm?Mm.isBuffer:M,Vg=ui.isFinite,hh=Iv.join,G_=ep(_a.keys,_a),Cs=Zl.max,ml=Zl.min,Lc=Nr.now,bo=ui.parseInt,Fo=Zl.random,zr=Iv.reverse,qs=Qd(ui,"DataView"),Kr=Qd(ui,"Map"),Ug=Qd(ui,"Promise"),rs=Qd(ui,"Set"),ds=Qd(ui,"WeakMap"),Rc=Qd(_a,"create"),ad=ds&&new ds,$p={},W_=qh(qs),zy=qh(Kr),Zs=qh(Ug),eu=qh(rs),Ci=qh(ds),Ms=da?da.prototype:M,Ot=Ms?Ms.valueOf:M,Nt=Ms?Ms.toString:M;function It(b){if(ai(b)&&!ki(b)&&!(b instanceof ks)){if(b instanceof oa)return b;if(ra.call(b,"__wrapped__"))return im(b)}return new oa(b)}var No=function(){function b(){}return function(S){if(!cr(S))return{};if(Tv)return Tv(S);b.prototype=S;var ee=new b;return b.prototype=M,ee}}();function Mo(){}function oa(b,S){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=M}function ks(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ve,this.__views__=[]}function Fl(b){var S=-1,ee=null==b?0:b.length;for(this.clear();++S<ee;){var Fe=b[S];this.set(Fe[0],Fe[1])}}function vl(b){var S=-1,ee=null==b?0:b.length;for(this.clear();++S<ee;){var Fe=b[S];this.set(Fe[0],Fe[1])}}function ls(b){var S=-1,ee=null==b?0:b.length;for(this.clear();++S<ee;){var Fe=b[S];this.set(Fe[0],Fe[1])}}function Lr(b){var S=-1,ee=null==b?0:b.length;for(this.__data__=new ls;++S<ee;)this.add(b[S])}function aa(b){var S=this.__data__=new vl(b);this.size=S.size}function Ha(b,S){var ee=ki(b),Fe=!ee&&Zr(b),vt=!ee&&!Fe&&ts(b),Vt=!ee&&!Fe&&!vt&&zc(b),pn=ee||Fe||vt||Vt,wn=pn?od(b.length,xv):[],On=wn.length;for(var Pi in b)(S||ra.call(b,Pi))&&(!pn||!("length"==Pi||vt&&("offset"==Pi||"parent"==Pi)||Vt&&("buffer"==Pi||"byteLength"==Pi||"byteOffset"==Pi)||vc(Pi,On)))&&wn.push(Pi);return wn}function Lv(b){var S=b.length;return S?b[dd(0,S-1)]:M}function Rv(b,S){return _d(eo(b),Sf(S,0,b.length))}function Wg(b){return _d(eo(b))}function jg(b,S,ee){(ee!==M&&!Jr(b[S],ee)||ee===M&&!(S in b))&&Fh(b,S,ee)}function Af(b,S,ee){var Fe=b[S];(!ra.call(b,S)||!Jr(Fe,ee)||ee===M&&!(S in b))&&Fh(b,S,ee)}function Rm(b,S){for(var ee=b.length;ee--;)if(Jr(b[ee][0],S))return ee;return-1}function xf(b,S,ee,Fe){return ld(b,function(vt,Vt,pn){S(Fe,vt,ee(vt),pn)}),Fe}function Ud(b,S){return b&&gc(S,Gc(S),b)}function Fh(b,S,ee){"__proto__"==S&&sp?sp(b,S,{configurable:!0,enumerable:!0,value:ee,writable:!0}):b[S]=ee}function If(b,S){for(var ee=-1,Fe=S.length,vt=ni(Fe),Vt=null==b;++ee<Fe;)vt[ee]=Vt?M:xb(b,S[ee]);return vt}function Sf(b,S,ee){return b==b&&(ee!==M&&(b=b<=ee?b:ee),S!==M&&(b=b>=S?b:S)),b}function yl(b,S,ee,Fe,vt,Vt){var pn,wn=1&S,On=2&S,Pi=4&S;if(ee&&(pn=vt?ee(b,Fe,vt,Vt):ee(b)),pn!==M)return pn;if(!cr(b))return b;var Oi=ki(b);if(Oi){if(pn=function yh(b){var S=b.length,ee=new b.constructor(S);return S&&"string"==typeof b[0]&&ra.call(b,"index")&&(ee.index=b.index,ee.input=b.input),ee}(b),!wn)return eo(b,pn)}else{var qi=Oa(b),Rr=qi==$n||qi==Dt;if(ts(b))return _u(b,wn);if(qi==De||qi==st||Rr&&!vt){if(pn=On||Rr?{}:ng(b),!wn)return On?function fp(b,S){return gc(b,tg(b),S)}(b,function $g(b,S){return b&&gc(S,xu(S),b)}(pn,b)):function gh(b,S){return gc(b,yp(b),S)}(b,Ud(pn,b))}else{if(!ha[qi])return vt?b:{};pn=function Vm(b,S,ee){var Fe=b.constructor;switch(S){case tr:return El(b);case ce:case At:return new Fe(+b);case il:return function pc(b,S){var ee=S?El(b.buffer):b.buffer;return new b.constructor(ee,b.byteOffset,b.byteLength)}(b,ee);case $l:case ql:case Wf:case jf:case ih:case uc:case Sh:case ku:case Xa:return tc(b,ee);case kt:return new Fe;case ln:case Jn:return new Fe(b);case un:return function Do(b){var S=new b.constructor(b.source,mt.exec(b));return S.lastIndex=b.lastIndex,S}(b);case _n:return new Fe;case Dr:return function Om(b){return Ot?_a(Ot.call(b)):{}}(b)}}(b,qi,wn)}}Vt||(Vt=new aa);var $r=Vt.get(b);if($r)return $r;Vt.set(b,pn),Wa(b)?b.forEach(function(Ss){pn.add(yl(Ss,S,ee,Ss,b,Vt))}):Vr(b)&&b.forEach(function(Ss,po){pn.set(po,yl(Ss,S,ee,po,b,Vt))});var co=Oi?M:(Pi?On?Zd:wu:On?xu:Gc)(b);return Za(co||b,function(Ss,po){co&&(Ss=b[po=Ss]),Af(pn,po,yl(Ss,S,ee,po,b,Vt))}),pn}function Vy(b,S,ee){var Fe=ee.length;if(null==b)return!Fe;for(b=_a(b);Fe--;){var vt=ee[Fe],pn=b[vt];if(pn===M&&!(vt in b)||!(0,S[vt])(pn))return!1}return!0}function Uy(b,S,ee){if("function"!=typeof b)throw new kh(L);return jh(function(){b.apply(M,ee)},S)}function Hd(b,S,ee,Fe){var vt=-1,Vt=Yf,pn=!0,wn=b.length,On=[],Pi=S.length;if(!wn)return On;ee&&(S=Da(S,Kl(ee))),Fe?(Vt=_r,pn=!1):S.length>=200&&(Vt=yf,pn=!1,S=new Lr(S));e:for(;++vt<wn;){var Oi=b[vt],qi=null==ee?Oi:ee(Oi);if(Oi=Fe||0!==Oi?Oi:0,pn&&qi==qi){for(var Rr=Pi;Rr--;)if(S[Rr]===qi)continue e;On.push(Oi)}else Vt(S,qi,Fe)||On.push(Oi)}return On}It.templateSettings={escape:id,evaluate:pl,interpolate:pf,variable:"",imports:{_:It}},(It.prototype=Mo.prototype).constructor=It,(oa.prototype=No(Mo.prototype)).constructor=oa,(ks.prototype=No(Mo.prototype)).constructor=ks,Fl.prototype.clear=function Ca(){this.__data__=Rc?Rc(null):{},this.size=0},Fl.prototype.delete=function Bo(b){var S=this.has(b)&&delete this.__data__[b];return this.size-=S?1:0,S},Fl.prototype.get=function Va(b){var S=this.__data__;if(Rc){var ee=S[b];return ee===j?M:ee}return ra.call(S,b)?S[b]:M},Fl.prototype.has=function gr(b){var S=this.__data__;return Rc?S[b]!==M:ra.call(S,b)},Fl.prototype.set=function Oh(b,S){var ee=this.__data__;return this.size+=this.has(b)?0:1,ee[b]=Rc&&S===M?j:S,this},vl.prototype.clear=function Bd(){this.__data__=[],this.size=0},vl.prototype.delete=function ap(b){var S=this.__data__,ee=Rm(S,b);return!(ee<0||(ee==S.length-1?S.pop():Ng.call(S,ee,1),--this.size,0))},vl.prototype.get=function zd(b){var S=this.__data__,ee=Rm(S,b);return ee<0?M:S[ee][1]},vl.prototype.has=function Cf(b){return Rm(this.__data__,b)>-1},vl.prototype.set=function Bu(b,S){var ee=this.__data__,Fe=Rm(ee,b);return Fe<0?(++this.size,ee.push([b,S])):ee[Fe][1]=S,this},ls.prototype.clear=function Pc(){this.size=0,this.__data__={hash:new Fl,map:new(Kr||vl),string:new Fl}},ls.prototype.delete=function Hg(b){var S=vp(this,b).delete(b);return this.size-=S?1:0,S},ls.prototype.get=function Ds(b){return vp(this,b).get(b)},ls.prototype.has=function Dv(b){return vp(this,b).has(b)},ls.prototype.set=function Gg(b,S){var ee=vp(this,b),Fe=ee.size;return ee.set(b,S),this.size+=ee.size==Fe?0:1,this},Lr.prototype.add=Lr.prototype.push=function wa(b){return this.__data__.set(b,j),this},Lr.prototype.has=function Nl(b){return this.__data__.has(b)},aa.prototype.clear=function Ua(){this.__data__=new vl,this.size=0},aa.prototype.delete=function xl(b){var S=this.__data__,ee=S.delete(b);return this.size=S.size,ee},aa.prototype.get=function Vd(b){return this.__data__.get(b)},aa.prototype.has=function dc(b){return this.__data__.has(b)},aa.prototype.set=function wf(b,S){var ee=this.__data__;if(ee instanceof vl){var Fe=ee.__data__;if(!Kr||Fe.length<199)return Fe.push([b,S]),this.size=++ee.size,this;ee=this.__data__=new ls(Fe)}return ee.set(b,S),this.size=ee.size,this};var ld=Mf(kc),Pv=Mf(Bh,!0);function j_(b,S){var ee=!0;return ld(b,function(Fe,vt,Vt){return ee=!!S(Fe,vt,Vt)}),ee}function kv(b,S,ee){for(var Fe=-1,vt=b.length;++Fe<vt;){var Vt=b[Fe],pn=S(Vt);if(null!=pn&&(wn===M?pn==pn&&!Gl(pn):ee(pn,wn)))var wn=pn,On=Vt}return On}function Yp(b,S){var ee=[];return ld(b,function(Fe,vt,Vt){S(Fe,vt,Vt)&&ee.push(Fe)}),ee}function ll(b,S,ee,Fe,vt){var Vt=-1,pn=b.length;for(ee||(ee=Fa),vt||(vt=[]);++Vt<pn;){var wn=b[Vt];S>0&&ee(wn)?S>1?ll(wn,S-1,ee,Fe,vt):Lh(vt,wn):Fe||(vt[vt.length]=wn)}return vt}var Gd=Df(),Nh=Df(!0);function kc(b,S){return b&&Gd(b,S,Gc)}function Bh(b,S){return b&&Nh(b,S,Gc)}function dh(b,S){return ah(S,function(ee){return Cn(b[ee])})}function zu(b,S){for(var ee=0,Fe=(S=ec(S,b)).length;null!=b&&ee<Fe;)b=b[Xu(S[ee++])];return ee&&ee==Fe?b:M}function mu(b,S,ee){var Fe=S(b);return ki(b)?Fe:Lh(Fe,ee(b))}function la(b){return null==b?b===M?"[object Undefined]":"[object Null]":ba&&ba in _a(b)?function Rf(b){var S=ra.call(b,ba),ee=b[ba];try{b[ba]=M;var Fe=!0}catch{}var vt=Tm.call(b);return Fe&&(S?b[ba]=ee:delete b[ba]),vt}(b):function $_(b){return Tm.call(b)}(b)}function cd(b,S){return b>S}function Pm(b,S){return null!=b&&ra.call(b,S)}function qg(b,S){return null!=b&&S in _a(b)}function vu(b,S,ee){for(var Fe=ee?_r:Yf,vt=b[0].length,Vt=b.length,pn=Vt,wn=ni(Vt),On=1/0,Pi=[];pn--;){var Oi=b[pn];pn&&S&&(Oi=Da(Oi,Kl(S))),On=ml(Oi.length,On),wn[pn]=!ee&&(S||vt>=120&&Oi.length>=120)?new Lr(pn&&Oi):M}Oi=b[0];var qi=-1,Rr=wn[0];e:for(;++qi<vt&&Pi.length<On;){var $r=Oi[qi],Is=S?S($r):$r;if($r=ee||0!==$r?$r:0,!(Rr?yf(Rr,Is):Fe(Pi,Is,ee))){for(pn=Vt;--pn;){var co=wn[pn];if(!(co?yf(co,Is):Fe(b[pn],Is,ee)))continue e}Rr&&Rr.push(Is),Pi.push($r)}}return Pi}function Oc(b,S,ee){var Fe=null==(b=bl(b,S=ec(S,b)))?b:b[Xu(Au(S))];return null==Fe?M:Ka(Fe,b,ee)}function $s(b){return ai(b)&&la(b)==st}function Fc(b,S,ee,Fe,vt){return b===S||(null==b||null==S||!ai(b)&&!ai(S)?b!=b&&S!=S:function up(b,S,ee,Fe,vt,Vt){var pn=ki(b),wn=ki(S),On=pn?gt:Oa(b),Pi=wn?gt:Oa(S),Oi=(On=On==st?De:On)==De,qi=(Pi=Pi==st?De:Pi)==De,Rr=On==Pi;if(Rr&&ts(b)){if(!ts(S))return!1;pn=!0,Oi=!1}if(Rr&&!Oi)return Vt||(Vt=new aa),pn||zc(b)?vh(b,S,ee,Fe,vt,Vt):function em(b,S,ee,Fe,vt,Vt,pn){switch(ee){case il:if(b.byteLength!=S.byteLength||b.byteOffset!=S.byteOffset)return!1;b=b.buffer,S=S.buffer;case tr:return!(b.byteLength!=S.byteLength||!Vt(new bf(b),new bf(S)));case ce:case At:case ln:return Jr(+b,+S);case Tn:return b.name==S.name&&b.message==S.message;case un:case Jn:return b==S+"";case kt:var wn=Jf;case _n:if(wn||(wn=Gp),b.size!=S.size&&!(1&Fe))return!1;var Pi=pn.get(b);if(Pi)return Pi==S;Fe|=2,pn.set(b,S);var Oi=vh(wn(b),wn(S),Fe,vt,Vt,pn);return pn.delete(b),Oi;case Dr:if(Ot)return Ot.call(b)==Ot.call(S)}return!1}(b,S,On,ee,Fe,vt,Vt);if(!(1&ee)){var $r=Oi&&ra.call(b,"__wrapped__"),Is=qi&&ra.call(S,"__wrapped__");if($r||Is){var co=$r?b.value():b,Ss=Is?S.value():S;return Vt||(Vt=new aa),vt(co,Ss,ee,Fe,Vt)}}return!!Rr&&(Vt||(Vt=new aa),function pd(b,S,ee,Fe,vt,Vt){var pn=1&ee,wn=wu(b),On=wn.length;if(On!=wu(S).length&&!pn)return!1;for(var qi=On;qi--;){var Rr=wn[qi];if(!(pn?Rr in S:ra.call(S,Rr)))return!1}var $r=Vt.get(b),Is=Vt.get(S);if($r&&Is)return $r==S&&Is==b;var co=!0;Vt.set(b,S),Vt.set(S,b);for(var Ss=pn;++qi<On;){var po=b[Rr=wn[qi]],zo=S[Rr];if(Fe)var Yh=pn?Fe(zo,po,Rr,S,b,Vt):Fe(po,zo,Rr,b,S,Vt);if(!(Yh===M?po===zo||vt(po,zo,ee,Fe,Vt):Yh)){co=!1;break}Ss||(Ss="constructor"==Rr)}if(co&&!Ss){var Kh=b.constructor,Wc=S.constructor;Kh!=Wc&&"constructor"in b&&"constructor"in S&&!("function"==typeof Kh&&Kh instanceof Kh&&"function"==typeof Wc&&Wc instanceof Wc)&&(co=!1)}return Vt.delete(b),Vt.delete(S),co}(b,S,ee,Fe,vt,Vt))}(b,S,ee,Fe,Fc,vt))}function fh(b,S,ee,Fe){var vt=ee.length,Vt=vt,pn=!Fe;if(null==b)return!Vt;for(b=_a(b);vt--;){var wn=ee[vt];if(pn&&wn[2]?wn[1]!==b[wn[0]]:!(wn[0]in b))return!1}for(;++vt<Vt;){var On=(wn=ee[vt])[0],Pi=b[On],Oi=wn[1];if(pn&&wn[2]){if(Pi===M&&!(On in b))return!1}else{var qi=new aa;if(Fe)var Rr=Fe(Pi,Oi,On,b,S,qi);if(!(Rr===M?Fc(Oi,Pi,3,Fe,qi):Rr))return!1}}return!0}function Wd(b){return!(!cr(b)||function Pf(b){return!!Em&&Em in b}(b))&&(Cn(b)?ip:Oe).test(qh(b))}function zh(b){return"function"==typeof b?b:null==b?wd:"object"==typeof b?ki(b)?Kp(b[0],b[1]):ph(b):r0(b)}function tu(b){if(!_h(b))return G_(b);var S=[];for(var ee in _a(b))ra.call(b,ee)&&"constructor"!=ee&&S.push(ee);return S}function $d(b,S){return b<S}function hp(b,S){var ee=-1,Fe=wr(b)?ni(b.length):[];return ld(b,function(vt,Vt,pn){Fe[++ee]=S(vt,Vt,pn)}),Fe}function ph(b){var S=tm(b);return 1==S.length&&S[0][2]?ru(S[0][0],S[0][1]):function(ee){return ee===b||fh(ee,b,S)}}function Kp(b,S){return ig(b)&&Jd(S)?ru(Xu(b),S):function(ee){var Fe=xb(ee,b);return Fe===M&&Fe===S?Qy(ee,b):Fc(S,Fe,3)}}function jo(b,S,ee,Fe,vt){b!==S&&Gd(S,function(Vt,pn){if(vt||(vt=new aa),cr(Vt))!function qd(b,S,ee,Fe,vt,Vt,pn){var wn=kf(b,ee),On=kf(S,ee),Pi=pn.get(On);if(Pi)jg(b,ee,Pi);else{var Oi=Vt?Vt(wn,On,ee+"",b,S,pn):M,qi=Oi===M;if(qi){var Rr=ki(On),$r=!Rr&&ts(On),Is=!Rr&&!$r&&zc(On);Oi=On,Rr||$r||Is?ki(wn)?Oi=wn:es(wn)?Oi=eo(wn):$r?(qi=!1,Oi=_u(On,!0)):Is?(qi=!1,Oi=tc(On,!0)):Oi=[]:Lo(On)||Zr(On)?(Oi=wn,Zr(wn)?Oi=J_(wn):(!cr(wn)||Cn(wn))&&(Oi=ng(On))):qi=!1}qi&&(pn.set(On,Oi),vt(Oi,On,Fe,Vt,pn),pn.delete(On)),jg(b,ee,Oi)}}(b,S,pn,ee,jo,Fe,vt);else{var wn=Fe?Fe(kf(b,pn),Vt,pn+"",b,S,vt):M;wn===M&&(wn=Vt),jg(b,pn,wn)}},xu)}function Vh(b,S){var ee=b.length;if(ee)return vc(S+=S<0?ee:0,ee)?b[S]:M}function Qa(b,S,ee){S=S.length?Da(S,function(Vt){return ki(Vt)?function(pn){return zu(pn,1===Vt.length?Vt[0]:Vt)}:Vt}):[wd];var Fe=-1;return S=Da(S,Kl(cs())),function Kf(En,ui){var ni=En.length;for(En.sort(ui);ni--;)En[ni]=En[ni].value;return En}(hp(b,function(Vt,pn,wn){return{criteria:Da(S,function(Pi){return Pi(Vt)}),index:++Fe,value:Vt}}),function(Vt,pn){return function Yg(b,S,ee){for(var Fe=-1,vt=b.criteria,Vt=S.criteria,pn=vt.length,wn=ee.length;++Fe<pn;){var On=zl(vt[Fe],Vt[Fe]);if(On)return Fe>=wn?On:On*("desc"==ee[Fe]?-1:1)}return b.index-S.index}(Vt,pn,ee)})}function Vu(b,S,ee){for(var Fe=-1,vt=S.length,Vt={};++Fe<vt;){var pn=S[Fe],wn=zu(b,pn);ee(wn,pn)&&wo(Vt,ec(pn,b),wn)}return Vt}function Ra(b,S,ee,Fe){var vt=Fe?fu:La,Vt=-1,pn=S.length,wn=b;for(b===S&&(S=eo(S)),ee&&(wn=Da(b,Kl(ee)));++Vt<pn;)for(var On=0,Pi=S[Vt],Oi=ee?ee(Pi):Pi;(On=vt(wn,Oi,On,Fe))>-1;)wn!==b&&Ng.call(wn,On,1),Ng.call(b,On,1);return b}function nu(b,S){for(var ee=b?S.length:0,Fe=ee-1;ee--;){var vt=S[ee];if(ee==Fe||vt!==Vt){var Vt=vt;vc(vt)?Ng.call(b,vt,1):Uu(b,vt)}}return b}function dd(b,S){return b+sa(Fo()*(S-b+1))}function $o(b,S){var ee="";if(!b||S<1||S>hn)return ee;do{S%2&&(ee+=b),(S=sa(S/2))&&(b+=b)}while(S);return ee}function Bs(b,S){return $h(nm(b,S,wd),b+"")}function rr(b){return Lv(Jy(b))}function km(b,S){var ee=Jy(b);return _d(ee,Sf(S,0,ee.length))}function wo(b,S,ee,Fe){if(!cr(b))return b;for(var vt=-1,Vt=(S=ec(S,b)).length,pn=Vt-1,wn=b;null!=wn&&++vt<Vt;){var On=Xu(S[vt]),Pi=ee;if("__proto__"===On||"constructor"===On||"prototype"===On)return b;if(vt!=pn){var Oi=wn[On];(Pi=Fe?Fe(Oi,On,wn):M)===M&&(Pi=cr(Oi)?Oi:vc(S[vt+1])?[]:{})}Af(wn,On,Pi),wn=wn[On]}return b}var Ef=ad?function(b,S){return ad.set(b,S),b}:wd,Zp=sp?function(b,S){return sp(b,"toString",{configurable:!0,enumerable:!1,value:mw(S),writable:!0})}:wd;function Qp(b){return _d(Jy(b))}function _l(b,S,ee){var Fe=-1,vt=b.length;S<0&&(S=-S>vt?0:vt+S),(ee=ee>vt?vt:ee)<0&&(ee+=vt),vt=S>ee?0:ee-S>>>0,S>>>=0;for(var Vt=ni(vt);++Fe<vt;)Vt[Fe]=b[Fe+S];return Vt}function Tf(b,S){var ee;return ld(b,function(Fe,vt,Vt){return!(ee=S(Fe,vt,Vt))}),!!ee}function Jl(b,S,ee){var Fe=0,vt=null==b?Fe:b.length;if("number"==typeof S&&S==S&&vt<=2147483647){for(;Fe<vt;){var Vt=Fe+vt>>>1,pn=b[Vt];null!==pn&&!Gl(pn)&&(ee?pn<=S:pn<S)?Fe=Vt+1:vt=Vt}return vt}return Jp(b,S,wd,ee)}function Jp(b,S,ee,Fe){var vt=0,Vt=null==b?0:b.length;if(0===Vt)return 0;for(var pn=(S=ee(S))!=S,wn=null===S,On=Gl(S),Pi=S===M;vt<Vt;){var Oi=sa((vt+Vt)/2),qi=ee(b[Oi]),Rr=qi!==M,$r=null===qi,Is=qi==qi,co=Gl(qi);if(pn)var Ss=Fe||Is;else Ss=Pi?Is&&(Fe||Rr):wn?Is&&Rr&&(Fe||!$r):On?Is&&Rr&&!$r&&(Fe||!co):!$r&&!co&&(Fe?qi<=S:qi<S);Ss?vt=Oi+1:Vt=Oi}return ml(Vt,4294967294)}function eg(b,S){for(var ee=-1,Fe=b.length,vt=0,Vt=[];++ee<Fe;){var pn=b[ee],wn=S?S(pn):pn;if(!ee||!Jr(wn,On)){var On=wn;Vt[vt++]=0===pn?0:pn}}return Vt}function Pa(b){return"number"==typeof b?b:Gl(b)?NaN:+b}function Bl(b){if("string"==typeof b)return b;if(ki(b))return Da(b,Bl)+"";if(Gl(b))return Nt?Nt.call(b):"";var S=b+"";return"0"==S&&1/b==-yt?"-0":S}function Il(b,S,ee){var Fe=-1,vt=Yf,Vt=b.length,pn=!0,wn=[],On=wn;if(ee)pn=!1,vt=_r;else if(Vt>=200){var Pi=S?null:Qg(b);if(Pi)return Gp(Pi);pn=!1,vt=yf,On=new Lr}else On=S?[]:wn;e:for(;++Fe<Vt;){var Oi=b[Fe],qi=S?S(Oi):Oi;if(Oi=ee||0!==Oi?Oi:0,pn&&qi==qi){for(var Rr=On.length;Rr--;)if(On[Rr]===qi)continue e;S&&On.push(qi),wn.push(Oi)}else vt(On,qi,ee)||(On!==wn&&On.push(qi),wn.push(Oi))}return wn}function Uu(b,S){return null==(b=bl(b,S=ec(S,b)))||delete b[Xu(Au(S))]}function Xd(b,S,ee,Fe){return wo(b,S,ee(zu(b,S)),Fe)}function Ga(b,S,ee,Fe){for(var vt=b.length,Vt=Fe?vt:-1;(Fe?Vt--:++Vt<vt)&&S(b[Vt],Vt,b););return ee?_l(b,Fe?0:Vt,Fe?Vt+1:vt):_l(b,Fe?Vt+1:0,Fe?vt:Vt)}function yu(b,S){var ee=b;return ee instanceof ks&&(ee=ee.value()),vf(S,function(Fe,vt){return vt.func.apply(vt.thisArg,Lh([Fe],vt.args))},ee)}function Hu(b,S,ee){var Fe=b.length;if(Fe<2)return Fe?Il(b[0]):[];for(var vt=-1,Vt=ni(Fe);++vt<Fe;)for(var pn=b[vt],wn=-1;++wn<Fe;)wn!=vt&&(Vt[vt]=Hd(Vt[vt]||pn,b[wn],S,ee));return Il(ll(Vt,1),S,ee)}function Gu(b,S,ee){for(var Fe=-1,vt=b.length,Vt=S.length,pn={};++Fe<vt;)ee(pn,b[Fe],Fe<Vt?S[Fe]:M);return pn}function Sl(b){return es(b)?b:[]}function ka(b){return"function"==typeof b?b:wd}function ec(b,S){return ki(b)?b:ig(b,S)?[b]:sg(na(b))}var dp=Bs;function fc(b,S,ee){var Fe=b.length;return ee=ee===M?Fe:ee,!S&&ee>=Fe?b:_l(b,S,ee)}var Ov=Ny||function(b){return Xl.clearTimeout(b)};function _u(b,S){if(S)return b.slice();var ee=b.length,Fe=Fy?Fy(ee):new b.constructor(ee);return b.copy(Fe),Fe}function El(b){var S=new b.constructor(b.byteLength);return new bf(S).set(new bf(b)),S}function tc(b,S){var ee=S?El(b.buffer):b.buffer;return new b.constructor(ee,b.byteOffset,b.length)}function zl(b,S){if(b!==S){var ee=b!==M,Fe=null===b,vt=b==b,Vt=Gl(b),pn=S!==M,wn=null===S,On=S==S,Pi=Gl(S);if(!wn&&!Pi&&!Vt&&b>S||Vt&&pn&&On&&!wn&&!Pi||Fe&&pn&&On||!ee&&On||!vt)return 1;if(!Fe&&!Vt&&!Pi&&b<S||Pi&&ee&&vt&&!Fe&&!Vt||wn&&ee&&vt||!pn&&vt||!On)return-1}return 0}function Fm(b,S,ee,Fe){for(var vt=-1,Vt=b.length,pn=ee.length,wn=-1,On=S.length,Pi=Cs(Vt-pn,0),Oi=ni(On+Pi),qi=!Fe;++wn<On;)Oi[wn]=S[wn];for(;++vt<pn;)(qi||vt<Vt)&&(Oi[ee[vt]]=b[vt]);for(;Pi--;)Oi[wn++]=b[vt++];return Oi}function Hh(b,S,ee,Fe){for(var vt=-1,Vt=b.length,pn=-1,wn=ee.length,On=-1,Pi=S.length,Oi=Cs(Vt-wn,0),qi=ni(Oi+Pi),Rr=!Fe;++vt<Oi;)qi[vt]=b[vt];for(var $r=vt;++On<Pi;)qi[$r+On]=S[On];for(;++pn<wn;)(Rr||vt<Vt)&&(qi[$r+ee[pn]]=b[vt++]);return qi}function eo(b,S){var ee=-1,Fe=b.length;for(S||(S=ni(Fe));++ee<Fe;)S[ee]=b[ee];return S}function gc(b,S,ee,Fe){var vt=!ee;ee||(ee={});for(var Vt=-1,pn=S.length;++Vt<pn;){var wn=S[Vt],On=Fe?Fe(ee[wn],b[wn],wn,ee,b):M;On===M&&(On=b[wn]),vt?Fh(ee,wn,On):Af(ee,wn,On)}return ee}function Gh(b,S){return function(ee,Fe){var vt=ki(ee)?Xf:xf,Vt=S?S():{};return vt(ee,b,cs(Fe,2),Vt)}}function bu(b){return Bs(function(S,ee){var Fe=-1,vt=ee.length,Vt=vt>1?ee[vt-1]:M,pn=vt>2?ee[2]:M;for(Vt=b.length>3&&"function"==typeof Vt?(vt--,Vt):M,pn&&yc(ee[0],ee[1],pn)&&(Vt=vt<3?M:Vt,vt=1),S=_a(S);++Fe<vt;){var wn=ee[Fe];wn&&b(S,wn,Fe,Vt)}return S})}function Mf(b,S){return function(ee,Fe){if(null==ee)return ee;if(!wr(ee))return b(ee,Fe);for(var vt=ee.length,Vt=S?vt:-1,pn=_a(ee);(S?Vt--:++Vt<vt)&&!1!==Fe(pn[Vt],Vt,pn););return ee}}function Df(b){return function(S,ee,Fe){for(var vt=-1,Vt=_a(S),pn=Fe(S),wn=pn.length;wn--;){var On=pn[b?wn:++vt];if(!1===ee(Vt[On],On,Vt))break}return S}}function mc(b){return function(S){var ee=ch(S=na(S))?uh(S):M,Fe=ee?ee[0]:S.charAt(0),vt=ee?fc(ee,1).join(""):S.slice(1);return Fe[b]()+vt}}function Tl(b){return function(S){return vf(nI(Xs(S).replace(N_,"")),b,"")}}function Wh(b){return function(){var S=arguments;switch(S.length){case 0:return new b;case 1:return new b(S[0]);case 2:return new b(S[0],S[1]);case 3:return new b(S[0],S[1],S[2]);case 4:return new b(S[0],S[1],S[2],S[3]);case 5:return new b(S[0],S[1],S[2],S[3],S[4]);case 6:return new b(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new b(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var ee=No(b.prototype),Fe=b.apply(ee,S);return cr(Fe)?Fe:ee}}function Wu(b){return function(S,ee,Fe){var vt=_a(S);if(!wr(S)){var Vt=cs(ee,3);S=Gc(S),ee=function(wn){return Vt(vt[wn],wn,vt)}}var pn=b(S,ee,Fe);return pn>-1?vt[Vt?S[pn]:pn]:M}}function fd(b){return nc(function(S){var ee=S.length,Fe=ee,vt=oa.prototype.thru;for(b&&S.reverse();Fe--;){var Vt=S[Fe];if("function"!=typeof Vt)throw new kh(L);if(vt&&!pn&&"wrapper"==mp(Vt))var pn=new oa([],!0)}for(Fe=pn?Fe:ee;++Fe<ee;){var wn=mp(Vt=S[Fe]),On="wrapper"==wn?gd(Vt):M;pn=On&&qu(On[0])&&424==On[1]&&!On[4].length&&1==On[9]?pn[mp(On[0])].apply(pn,On[3]):1==Vt.length&&qu(Vt)?pn[wn]():pn.thru(Vt)}return function(){var Pi=arguments,Oi=Pi[0];if(pn&&1==Pi.length&&ki(Oi))return pn.plant(Oi).value();for(var qi=0,Rr=ee?S[qi].apply(this,Pi):Oi;++qi<ee;)Rr=S[qi].call(this,Rr);return Rr}})}function Yn(b,S,ee,Fe,vt,Vt,pn,wn,On,Pi){var Oi=128&S,qi=1&S,Rr=2&S,$r=24&S,Is=512&S,co=Rr?M:Wh(b);return function Ss(){for(var po=arguments.length,zo=ni(po),Yh=po;Yh--;)zo[Yh]=arguments[Yh];if($r)var Kh=$u(Ss),Wc=_f(zo,Kh);if(Fe&&(zo=Fm(zo,Fe,vt,$r)),Vt&&(zo=Hh(zo,Vt,pn,$r)),po-=Wc,$r&&po<Pi){var rc=gu(zo,Kh);return ju(b,S,Yn,Ss.placeholder,ee,zo,rc,wn,On,Pi-po)}var Sp=qi?ee:this,Ep=Rr?Sp[b]:b;return po=zo.length,wn?zo=ua(zo,wn):Is&&po>1&&zo.reverse(),Oi&&On<po&&(zo.length=On),this&&this!==Xl&&this instanceof Ss&&(Ep=co||Wh(Ep)),Ep.apply(Sp,zo)}}function Lf(b,S){return function(ee,Fe){return function Co(b,S,ee,Fe){return kc(b,function(vt,Vt,pn){S(Fe,ee(vt),Vt,pn)}),Fe}(ee,b,S(Fe),{})}}function fa(b,S){return function(ee,Fe){var vt;if(ee===M&&Fe===M)return S;if(ee!==M&&(vt=ee),Fe!==M){if(vt===M)return Fe;"string"==typeof ee||"string"==typeof Fe?(ee=Bl(ee),Fe=Bl(Fe)):(ee=Pa(ee),Fe=Pa(Fe)),vt=b(ee,Fe)}return vt}}function Kd(b){return nc(function(S){return S=Da(S,Kl(cs())),Bs(function(ee){var Fe=this;return b(S,function(vt){return Ka(vt,Fe,ee)})})})}function Cu(b,S){var ee=(S=S===M?" ":Bl(S)).length;if(ee<2)return ee?$o(S,b):S;var Fe=$o(S,Mv(b/al(S)));return ch(S)?fc(uh(Fe),0,b).join(""):Fe.slice(0,b)}function Zg(b){return function(S,ee,Fe){return Fe&&"number"!=typeof Fe&&yc(S,ee,Fe)&&(ee=Fe=M),S=Hc(S),ee===M?(ee=S,S=0):ee=Hc(ee),function ca(b,S,ee,Fe){for(var vt=-1,Vt=Cs(Mv((S-b)/(ee||1)),0),pn=ni(Vt);Vt--;)pn[Fe?Vt:++vt]=b,b+=ee;return pn}(S,ee,Fe=Fe===M?S<ee?1:-1:Hc(Fe),b)}}function pp(b){return function(S,ee){return"string"==typeof S&&"string"==typeof ee||(S=bd(S),ee=bd(ee)),b(S,ee)}}function ju(b,S,ee,Fe,vt,Vt,pn,wn,On,Pi){var Oi=8&S;S|=Oi?$:64,4&(S&=~(Oi?64:$))||(S&=-4);var co=[b,S,vt,Oi?Vt:M,Oi?pn:M,Oi?M:Vt,Oi?M:pn,wn,On,Pi],Ss=ee.apply(M,co);return qu(b)&&rg(Ss,co),Ss.placeholder=Fe,yd(Ss,b,S)}function Ml(b){var S=Zl[b];return function(ee,Fe){if(ee=bd(ee),(Fe=null==Fe?0:ml(Qs(Fe),292))&&Vg(ee)){var vt=(na(ee)+"e").split("e");return+((vt=(na(S(vt[0]+"e"+(+vt[1]+Fe)))+"e").split("e"))[0]+"e"+(+vt[1]-Fe))}return S(ee)}}var Qg=rs&&1/Gp(new rs([,-0]))[1]==yt?function(b){return new rs(b)}:_w;function mh(b){return function(S){var ee=Oa(S);return ee==kt?Jf(S):ee==_n?function tp(En){var ui=-1,ni=Array(En.size);return En.forEach(function(Nr){ni[++ui]=[Nr,Nr]}),ni}(S):function ol(En,ui){return Da(ui,function(ni){return[ni,En[ni]]})}(S,b(S))}}function iu(b,S,ee,Fe,vt,Vt,pn,wn){var On=2&S;if(!On&&"function"!=typeof b)throw new kh(L);var Pi=Fe?Fe.length:0;if(Pi||(S&=-97,Fe=vt=M),pn=pn===M?pn:Cs(Qs(pn),0),wn=wn===M?wn:Qs(wn),Pi-=vt?vt.length:0,64&S){var Oi=Fe,qi=vt;Fe=vt=M}var Rr=On?M:gd(b),$r=[b,S,ee,Fe,vt,Oi,qi,Vt,pn,wn];if(Rr&&function _p(b,S){var ee=b[1],Fe=S[1],vt=ee|Fe;if(!(vt<131||(128==Fe&&8==ee||128==Fe&&256==ee&&b[7].length<=S[8]||384==Fe&&S[7].length<=S[8]&&8==ee)))return b;1&Fe&&(b[2]=S[2],vt|=1&ee?0:4);var wn=S[3];if(wn){var On=b[3];b[3]=On?Fm(On,wn,S[4]):wn,b[4]=On?gu(b[3],Z):S[4]}(wn=S[5])&&(b[5]=(On=b[5])?Hh(On,wn,S[6]):wn,b[6]=On?gu(b[5],Z):S[6]),(wn=S[7])&&(b[7]=wn),128&Fe&&(b[8]=null==b[8]?S[8]:ml(b[8],S[8])),null==b[9]&&(b[9]=S[9]),b[0]=S[0],b[1]=vt}($r,Rr),b=$r[0],S=$r[1],ee=$r[2],Fe=$r[3],vt=$r[4],!(wn=$r[9]=$r[9]===M?On?0:b.length:Cs($r[9]-Pi,0))&&24&S&&(S&=-25),S&&1!=S)Is=8==S||16==S?function Yd(b,S,ee){var Fe=Wh(b);return function vt(){for(var Vt=arguments.length,pn=ni(Vt),wn=Vt,On=$u(vt);wn--;)pn[wn]=arguments[wn];var Pi=Vt<3&&pn[0]!==On&&pn[Vt-1]!==On?[]:gu(pn,On);return(Vt-=Pi.length)<ee?ju(b,S,Yn,vt.placeholder,M,pn,Pi,M,M,ee-Vt):Ka(this&&this!==Xl&&this instanceof vt?Fe:b,this,pn)}}(b,S,wn):S!=$&&33!=S||vt.length?Yn.apply(M,$r):function Nm(b,S,ee,Fe){var vt=1&S,Vt=Wh(b);return function pn(){for(var wn=-1,On=arguments.length,Pi=-1,Oi=Fe.length,qi=ni(Oi+On),Rr=this&&this!==Xl&&this instanceof pn?Vt:b;++Pi<Oi;)qi[Pi]=Fe[Pi];for(;On--;)qi[Pi++]=arguments[++wn];return Ka(Rr,vt?ee:this,qi)}}(b,S,ee,Fe);else var Is=function Kg(b,S,ee){var Fe=1&S,vt=Wh(b);return function Vt(){return(this&&this!==Xl&&this instanceof Vt?vt:b).apply(Fe?ee:this,arguments)}}(b,S,ee);return yd((Rr?Ef:rg)(Is,$r),b,S)}function Jg(b,S,ee,Fe){return b===M||Jr(b,Fg[ee])&&!ra.call(Fe,ee)?S:b}function gp(b,S,ee,Fe,vt,Vt){return cr(b)&&cr(S)&&(Vt.set(S,b),jo(b,S,M,gp,Vt),Vt.delete(S)),b}function Vl(b){return Lo(b)?M:b}function vh(b,S,ee,Fe,vt,Vt){var pn=1&ee,wn=b.length,On=S.length;if(wn!=On&&!(pn&&On>wn))return!1;var Pi=Vt.get(b),Oi=Vt.get(S);if(Pi&&Oi)return Pi==S&&Oi==b;var qi=-1,Rr=!0,$r=2&ee?new Lr:M;for(Vt.set(b,S),Vt.set(S,b);++qi<wn;){var Is=b[qi],co=S[qi];if(Fe)var Ss=pn?Fe(co,Is,qi,S,b,Vt):Fe(Is,co,qi,b,S,Vt);if(Ss!==M){if(Ss)continue;Rr=!1;break}if($r){if(!xm(S,function(po,zo){if(!yf($r,zo)&&(Is===po||vt(Is,po,ee,Fe,Vt)))return $r.push(zo)})){Rr=!1;break}}else if(Is!==co&&!vt(Is,co,ee,Fe,Vt)){Rr=!1;break}}return Vt.delete(b),Vt.delete(S),Rr}function nc(b){return $h(nm(b,M,Ff),b+"")}function wu(b){return mu(b,Gc,yp)}function Zd(b){return mu(b,xu,tg)}var gd=ad?function(b){return ad.get(b)}:_w;function mp(b){for(var S=b.name+"",ee=$p[S],Fe=ra.call($p,S)?ee.length:0;Fe--;){var vt=ee[Fe],Vt=vt.func;if(null==Vt||Vt==b)return vt.name}return S}function $u(b){return(ra.call(It,"placeholder")?It:b).placeholder}function cs(){var b=It.iteratee||Eb;return b=b===Eb?zh:b,arguments.length?b(arguments[0],arguments[1]):b}function vp(b,S){var ee=b.__data__;return function Um(b){var S=typeof b;return"string"==S||"number"==S||"symbol"==S||"boolean"==S?"__proto__"!==b:null===b}(S)?ee["string"==typeof S?"string":"hash"]:ee.map}function tm(b){for(var S=Gc(b),ee=S.length;ee--;){var Fe=S[ee],vt=b[Fe];S[ee]=[Fe,vt,Jd(vt)]}return S}function Qd(b,S){var ee=function lh(En,ui){return null==En?M:En[ui]}(b,S);return Wd(ee)?ee:M}var yp=zg?function(b){return null==b?[]:(b=_a(b),ah(zg(b),function(S){return Dm.call(b,S)}))}:s0,tg=zg?function(b){for(var S=[];b;)Lh(S,yp(b)),b=rp(b);return S}:s0,Oa=la;function zm(b,S,ee){for(var Fe=-1,vt=(S=ec(S,b)).length,Vt=!1;++Fe<vt;){var pn=Xu(S[Fe]);if(!(Vt=null!=b&&ee(b,pn)))break;b=b[pn]}return Vt||++Fe!=vt?Vt:!!(vt=null==b?0:b.length)&&ir(vt)&&vc(pn,vt)&&(ki(b)||Zr(b))}function ng(b){return"function"!=typeof b.constructor||_h(b)?{}:No(rp(b))}function Fa(b){return ki(b)||Zr(b)||!!(Bg&&b&&b[Bg])}function vc(b,S){var ee=typeof b;return!!(S=S??hn)&&("number"==ee||"symbol"!=ee&&Rt.test(b))&&b>-1&&b%1==0&&b<S}function yc(b,S,ee){if(!cr(ee))return!1;var Fe=typeof S;return!!("number"==Fe?wr(ee)&&vc(S,ee.length):"string"==Fe&&S in ee)&&Jr(ee[S],b)}function ig(b,S){if(ki(b))return!1;var ee=typeof b;return!("number"!=ee&&"symbol"!=ee&&"boolean"!=ee&&null!=b&&!Gl(b))||gf.test(b)||!rh.test(b)||null!=S&&b in _a(S)}function qu(b){var S=mp(b),ee=It[S];if("function"!=typeof ee||!(S in ks.prototype))return!1;if(b===ee)return!0;var Fe=gd(ee);return!!Fe&&b===Fe[0]}(qs&&Oa(new qs(new ArrayBuffer(1)))!=il||Kr&&Oa(new Kr)!=kt||Ug&&Oa(Ug.resolve())!=ze||rs&&Oa(new rs)!=_n||ds&&Oa(new ds)!=kr)&&(Oa=function(b){var S=la(b),ee=S==De?b.constructor:M,Fe=ee?qh(ee):"";if(Fe)switch(Fe){case W_:return il;case zy:return kt;case Zs:return ze;case eu:return _n;case Ci:return kr}return S});var md=Sv?Cn:Ip;function _h(b){var S=b&&b.constructor;return b===("function"==typeof S&&S.prototype||Fg)}function Jd(b){return b==b&&!cr(b)}function ru(b,S){return function(ee){return null!=ee&&ee[b]===S&&(S!==M||b in _a(ee))}}function nm(b,S,ee){return S=Cs(S===M?b.length-1:S,0),function(){for(var Fe=arguments,vt=-1,Vt=Cs(Fe.length-S,0),pn=ni(Vt);++vt<Vt;)pn[vt]=Fe[S+vt];vt=-1;for(var wn=ni(S+1);++vt<S;)wn[vt]=Fe[vt];return wn[S]=ee(pn),Ka(b,this,wn)}}function bl(b,S){return S.length<2?b:zu(b,_l(S,0,-1))}function ua(b,S){for(var ee=b.length,Fe=ml(S.length,ee),vt=eo(b);Fe--;){var Vt=S[Fe];b[Fe]=vc(Vt,ee)?vt[Vt]:M}return b}function kf(b,S){if(("constructor"!==S||"function"!=typeof b[S])&&"__proto__"!=S)return b[S]}var rg=ef(Ef),jh=By||function(b,S){return Xl.setTimeout(b,S)},$h=ef(Zp);function yd(b,S,ee){var Fe=S+"";return $h(b,function Nc(b,S){var ee=S.length;if(!ee)return b;var Fe=ee-1;return S[Fe]=(ee>1?"& ":"")+S[Fe],S=S.join(ee>2?", ":" "),b.replace(mf,"{\n/* [wrapped with "+S+"] */\n")}(Fe,function og(b,S){return Za(wt,function(ee){var Fe="_."+ee[0];S&ee[1]&&!Yf(b,Fe)&&b.push(Fe)}),b.sort()}(function Ul(b){var S=b.match(gl);return S?S[1].split(Sc):[]}(Fe),ee)))}function ef(b){var S=0,ee=0;return function(){var Fe=Lc(),vt=16-(Fe-ee);if(ee=Fe,vt>0){if(++S>=800)return arguments[0]}else S=0;return b.apply(M,arguments)}}function _d(b,S){var ee=-1,Fe=b.length,vt=Fe-1;for(S=S===M?Fe:S;++ee<S;){var Vt=dd(ee,vt),pn=b[Vt];b[Vt]=b[ee],b[ee]=pn}return b.length=S,b}var sg=function vd(b){var S=xn(b,function(Fe){return 500===ee.size&&ee.clear(),Fe}),ee=S.cache;return S}(function(b){var S=[];return 46===b.charCodeAt(0)&&S.push(""),b.replace(kd,function(ee,Fe,vt,Vt){S.push(vt?Vt.replace(rd,"$1"):Fe||ee)}),S});function Xu(b){if("string"==typeof b||Gl(b))return b;var S=b+"";return"0"==S&&1/b==-yt?"-0":S}function qh(b){if(null!=b){try{return Ev.call(b)}catch{}try{return b+""}catch{}}return""}function im(b){if(b instanceof ks)return b.clone();var S=new oa(b.__wrapped__,b.__chain__);return S.__actions__=eo(b.__actions__),S.__index__=b.__index__,S.__values__=b.__values__,S}var Bc=Bs(function(b,S){return es(b)?Hd(b,ll(S,1,es,!0)):[]}),Of=Bs(function(b,S){var ee=Au(S);return es(ee)&&(ee=M),es(b)?Hd(b,ll(S,1,es,!0),cs(ee,2)):[]}),Gm=Bs(function(b,S){var ee=Au(S);return es(ee)&&(ee=M),es(b)?Hd(b,ll(S,1,es,!0),M,ee):[]});function hl(b,S,ee){var Fe=null==b?0:b.length;if(!Fe)return-1;var vt=null==ee?0:Qs(ee);return vt<0&&(vt=Cs(Fe+vt,0)),Ol(b,cs(S,3),vt)}function Wm(b,S,ee){var Fe=null==b?0:b.length;if(!Fe)return-1;var vt=Fe-1;return ee!==M&&(vt=Qs(ee),vt=ee<0?Cs(Fe+vt,0):ml(vt,Fe-1)),Ol(b,cs(S,3),vt,!0)}function Ff(b){return null!=b&&b.length?ll(b,1):[]}function jy(b){return b&&b.length?b[0]:M}var Y_=Bs(function(b){var S=Da(b,Sl);return S.length&&S[0]===b[0]?vu(S):[]}),$y=Bs(function(b){var S=Au(b),ee=Da(b,Sl);return S===Au(ee)?S=M:ee.pop(),ee.length&&ee[0]===b[0]?vu(ee,cs(S,2)):[]}),jm=Bs(function(b){var S=Au(b),ee=Da(b,Sl);return(S="function"==typeof S?S:M)&&ee.pop(),ee.length&&ee[0]===b[0]?vu(ee,M,S):[]});function Au(b){var S=null==b?0:b.length;return S?b[S-1]:M}var Aa=Bs(zv);function zv(b,S){return b&&b.length&&S&&S.length?Ra(b,S):b}var qy=nc(function(b,S){var ee=null==b?0:b.length,Fe=If(b,S);return nu(b,Da(S,function(vt){return vc(vt,ee)?+vt:vt}).sort(zl)),Fe});function $m(b){return null==b?b:zr.call(b)}var F=Bs(function(b){return Il(ll(b,1,es,!0))}),H=Bs(function(b){var S=Au(b);return es(S)&&(S=M),Il(ll(b,1,es,!0),cs(S,2))}),le=Bs(function(b){var S=Au(b);return S="function"==typeof S?S:M,Il(ll(b,1,es,!0),M,S)});function Ue(b){if(!b||!b.length)return[];var S=0;return b=ah(b,function(ee){if(es(ee))return S=Cs(ee.length,S),!0}),od(S,function(ee){return Da(b,Ts(ee))})}function We(b,S){if(!b||!b.length)return[];var ee=Ue(b);return null==S?ee:Da(ee,function(Fe){return Ka(S,M,Fe)})}var je=Bs(function(b,S){return es(b)?Hd(b,S):[]}),pt=Bs(function(b){return Hu(ah(b,es))}),ft=Bs(function(b){var S=Au(b);return es(S)&&(S=M),Hu(ah(b,es),cs(S,2))}),ut=Bs(function(b){var S=Au(b);return S="function"==typeof S?S:M,Hu(ah(b,es),M,S)}),Et=Bs(Ue),qt=Bs(function(b){var S=b.length,ee=S>1?b[S-1]:M;return ee="function"==typeof ee?(b.pop(),ee):M,We(b,ee)});function yn(b){var S=It(b);return S.__chain__=!0,S}function an(b,S){return S(b)}var bn=nc(function(b){var S=b.length,ee=S?b[0]:0,Fe=this.__wrapped__,vt=function(Vt){return If(Vt,b)};return!(S>1||this.__actions__.length)&&Fe instanceof ks&&vc(ee)?((Fe=Fe.slice(ee,+ee+(S?1:0))).__actions__.push({func:an,args:[vt],thisArg:M}),new oa(Fe,this.__chain__).thru(function(Vt){return S&&!Vt.length&&Vt.push(M),Vt})):this.thru(vt)}),Di=Gh(function(b,S,ee){ra.call(b,ee)?++b[ee]:Fh(b,ee,1)}),ar=Wu(hl),Hi=Wu(Wm);function c(b,S){return(ki(b)?Za:ld)(b,cs(S,3))}function d(b,S){return(ki(b)?sl:Pv)(b,cs(S,3))}var m=Gh(function(b,S,ee){ra.call(b,ee)?b[ee].push(S):Fh(b,ee,[S])}),C=Bs(function(b,S,ee){var Fe=-1,vt="function"==typeof S,Vt=wr(b)?ni(b.length):[];return ld(b,function(pn){Vt[++Fe]=vt?Ka(S,pn,ee):Oc(pn,S,ee)}),Vt}),A=Gh(function(b,S,ee){Fh(b,ee,S)});function E(b,S){return(ki(b)?Da:hp)(b,cs(S,3))}var P=Gh(function(b,S,ee){b[ee?0:1].push(S)},function(){return[[],[]]}),ht=Bs(function(b,S){if(null==b)return[];var ee=S.length;return ee>1&&yc(b,S[0],S[1])?S=[]:ee>2&&yc(S[0],S[1],S[2])&&(S=[S[0]]),Qa(b,ll(S,1),[])}),rt=Lm||function(){return Xl.Date.now()};function Gt(b,S,ee){return S=ee?M:S,iu(b,128,M,M,M,M,S=b&&null==S?b.length:S)}function Wt(b,S){var ee;if("function"!=typeof S)throw new kh(L);return b=Qs(b),function(){return--b>0&&(ee=S.apply(this,arguments)),b<=1&&(S=M),ee}}var Tt=Bs(function(b,S,ee){var Fe=1;if(ee.length){var vt=gu(ee,$u(Tt));Fe|=$}return iu(b,Fe,S,ee,vt)}),jt=Bs(function(b,S,ee){var Fe=3;if(ee.length){var vt=gu(ee,$u(jt));Fe|=$}return iu(S,Fe,b,ee,vt)});function Kt(b,S,ee){var Fe,vt,Vt,pn,wn,On,Pi=0,Oi=!1,qi=!1,Rr=!0;if("function"!=typeof b)throw new kh(L);function $r(rc){var Sp=Fe,Ep=vt;return Fe=vt=M,Pi=rc,pn=b.apply(Ep,Sp)}function Is(rc){return Pi=rc,wn=jh(po,S),Oi?$r(rc):pn}function Ss(rc){var Sp=rc-On;return On===M||Sp>=S||Sp<0||qi&&rc-Pi>=Vt}function po(){var rc=rt();if(Ss(rc))return zo(rc);wn=jh(po,function co(rc){var fI=S-(rc-On);return qi?ml(fI,Vt-(rc-Pi)):fI}(rc))}function zo(rc){return wn=M,Rr&&Fe?$r(rc):(Fe=vt=M,pn)}function Wc(){var rc=rt(),Sp=Ss(rc);if(Fe=arguments,vt=this,On=rc,Sp){if(wn===M)return Is(On);if(qi)return Ov(wn),wn=jh(po,S),$r(On)}return wn===M&&(wn=jh(po,S)),pn}return S=bd(S)||0,cr(ee)&&(Oi=!!ee.leading,Vt=(qi="maxWait"in ee)?Cs(bd(ee.maxWait)||0,S):Vt,Rr="trailing"in ee?!!ee.trailing:Rr),Wc.cancel=function Yh(){wn!==M&&Ov(wn),Pi=0,Fe=On=vt=wn=M},Wc.flush=function Kh(){return wn===M?pn:zo(rt())},Wc}var dt=Bs(function(b,S){return Uy(b,1,S)}),Qt=Bs(function(b,S,ee){return Uy(b,bd(S)||0,ee)});function xn(b,S){if("function"!=typeof b||null!=S&&"function"!=typeof S)throw new kh(L);var ee=function(){var Fe=arguments,vt=S?S.apply(this,Fe):Fe[0],Vt=ee.cache;if(Vt.has(vt))return Vt.get(vt);var pn=b.apply(this,Fe);return ee.cache=Vt.set(vt,pn)||Vt,pn};return ee.cache=new(xn.Cache||ls),ee}function sn(b){if("function"!=typeof b)throw new kh(L);return function(){var S=arguments;switch(S.length){case 0:return!b.call(this);case 1:return!b.call(this,S[0]);case 2:return!b.call(this,S[0],S[1]);case 3:return!b.call(this,S[0],S[1],S[2])}return!b.apply(this,S)}}xn.Cache=ls;var Ln=dp(function(b,S){var ee=(S=1==S.length&&ki(S[0])?Da(S[0],Kl(cs())):Da(ll(S,1),Kl(cs()))).length;return Bs(function(Fe){for(var vt=-1,Vt=ml(Fe.length,ee);++vt<Vt;)Fe[vt]=S[vt].call(this,Fe[vt]);return Ka(b,this,Fe)})}),Fn=Bs(function(b,S){var ee=gu(S,$u(Fn));return iu(b,$,M,S,ee)}),ri=Bs(function(b,S){var ee=gu(S,$u(ri));return iu(b,64,M,S,ee)}),Rn=nc(function(b,S){return iu(b,256,M,M,M,S)});function Jr(b,S){return b===S||b!=b&&S!=S}var mr=pp(cd),or=pp(function(b,S){return b>=S}),Zr=$s(function(){return arguments}())?$s:function(b){return ai(b)&&ra.call(b,"callee")&&!Dm.call(b,"callee")},ki=ni.isArray,br=Ma?Kl(Ma):function lp(b){return ai(b)&&la(b)==tr};function wr(b){return null!=b&&ir(b.length)&&!Cn(b)}function es(b){return ai(b)&&wr(b)}var ts=jp||Ip,$i=oo?Kl(oo):function cp(b){return ai(b)&&la(b)==At};function Ct(b){if(!ai(b))return!1;var S=la(b);return S==Tn||"[object DOMException]"==S||"string"==typeof b.message&&"string"==typeof b.name&&!Lo(b)}function Cn(b){if(!cr(b))return!1;var S=la(b);return S==$n||S==Dt||"[object AsyncFunction]"==S||"[object Proxy]"==S}function An(b){return"number"==typeof b&&b==Qs(b)}function ir(b){return"number"==typeof b&&b>-1&&b%1==0&&b<=hn}function cr(b){var S=typeof b;return null!=b&&("object"==S||"function"==S)}function ai(b){return null!=b&&"object"==typeof b}var Vr=V_?Kl(V_):function Xg(b){return ai(b)&&Oa(b)==kt};function qo(b){return"number"==typeof b||ai(b)&&la(b)==ln}function Lo(b){if(!ai(b)||la(b)!=De)return!1;var S=rp(b);if(null===S)return!0;var ee=ra.call(S,"constructor")&&S.constructor;return"function"==typeof ee&&ee instanceof ee&&Ev.call(ee)==pb}var Jo=Ry?Kl(Ry):function jd(b){return ai(b)&&la(b)==un},Wa=Fd?Kl(Fd):function Ql(b){return ai(b)&&Oa(b)==_n};function Hl(b){return"string"==typeof b||!ki(b)&&ai(b)&&la(b)==Jn}function Gl(b){return"symbol"==typeof b||ai(b)&&la(b)==Dr}var zc=_o?Kl(_o):function ul(b){return ai(b)&&ir(b.length)&&!!Ta[la(b)]},ic=pp($d),Uc=pp(function(b,S){return b<=S});function wp(b){if(!b)return[];if(wr(b))return Hl(b)?uh(b):eo(b);if(Wp&&b[Wp])return function ya(En){for(var ui,ni=[];!(ui=En.next()).done;)ni.push(ui.value);return ni}(b[Wp]());var S=Oa(b);return(S==kt?Jf:S==_n?Gp:Jy)(b)}function Hc(b){return b?(b=bd(b))===yt||b===-yt?17976931348623157e292*(b<0?-1:1):b==b?b:0:0===b?b:0}function Qs(b){var S=Hc(b),ee=S%1;return S==S?ee?S-ee:S:0}function _b(b){return b?Sf(Qs(b),0,Ve):0}function bd(b){if("number"==typeof b)return b;if(Gl(b))return NaN;if(cr(b)){var S="function"==typeof b.valueOf?b.valueOf():b;b=cr(S)?S+"":S}if("string"!=typeof b)return 0===b?b:+b;b=Hp(b);var ee=ge.test(b);return ee||it.test(b)?bv(b.slice(2),ee?2:8):ct.test(b)?NaN:+b}function J_(b){return gc(b,xu(b))}function na(b){return null==b?"":Bl(b)}var t0=bu(function(b,S){if(_h(S)||wr(S))gc(S,Gc(S),b);else for(var ee in S)ra.call(S,ee)&&Af(b,ee,S[ee])}),bb=bu(function(b,S){gc(S,xu(S),b)}),cg=bu(function(b,S,ee,Fe){gc(S,xu(S),b,Fe)}),Zy=bu(function(b,S,ee,Fe){gc(S,Gc(S),b,Fe)}),Hv=nc(If),n0=Bs(function(b,S){b=_a(b);var ee=-1,Fe=S.length,vt=Fe>2?S[2]:M;for(vt&&yc(S[0],S[1],vt)&&(Fe=1);++ee<Fe;)for(var Vt=S[ee],pn=xu(Vt),wn=-1,On=pn.length;++wn<On;){var Pi=pn[wn],Oi=b[Pi];(Oi===M||Jr(Oi,Fg[Pi])&&!ra.call(b,Pi))&&(b[Pi]=Vt[Pi])}return b}),Cb=Bs(function(b){return b.push(M,gp),Ka(zx,M,b)});function xb(b,S,ee){var Fe=null==b?M:zu(b,S);return Fe===M?ee:Fe}function Qy(b,S){return null!=b&&zm(b,S,qg)}var Fx=Lf(function(b,S,ee){null!=S&&"function"!=typeof S.toString&&(S=Tm.call(S)),b[S]=ee},mw(wd)),hw=Lf(function(b,S,ee){null!=S&&"function"!=typeof S.toString&&(S=Tm.call(S)),ra.call(b,S)?b[S].push(ee):b[S]=[ee]},cs),Nx=Bs(Oc);function Gc(b){return wr(b)?Ha(b):tu(b)}function xu(b){return wr(b)?Ha(b,!0):function ud(b){if(!cr(b))return function Hm(b){var S=[];if(null!=b)for(var ee in _a(b))S.push(ee);return S}(b);var S=_h(b),ee=[];for(var Fe in b)"constructor"==Fe&&(S||!ra.call(b,Fe))||ee.push(Fe);return ee}(b)}var dT=bu(function(b,S,ee){jo(b,S,ee)}),zx=bu(function(b,S,ee,Fe){jo(b,S,ee,Fe)}),Vx=nc(function(b,S){var ee={};if(null==b)return ee;var Fe=!1;S=Da(S,function(Vt){return Vt=ec(Vt,b),Fe||(Fe=Vt.length>1),Vt}),gc(b,Zd(b),ee),Fe&&(ee=yl(ee,7,Vl));for(var vt=S.length;vt--;)Uu(ee,S[vt]);return ee}),Ux=nc(function(b,S){return null==b?{}:function hd(b,S){return Vu(b,S,function(ee,Fe){return Qy(b,Fe)})}(b,S)});function fT(b,S){if(null==b)return{};var ee=Da(Zd(b),function(Fe){return[Fe]});return S=cs(S),Vu(b,ee,function(Fe,vt){return S(Fe,vt[0])})}var Wx=mh(Gc),jx=mh(xu);function Jy(b){return null==b?[]:js(b,Gc(b))}var bT=Tl(function(b,S,ee){return S=S.toLowerCase(),b+(ee?Xx(S):S)});function Xx(b){return qm(na(b).toLowerCase())}function Xs(b){return(b=na(b))&&b.replace(Yt,Dc).replace(hc,"")}var CT=Tl(function(b,S,ee){return b+(ee?"-":"")+S.toLowerCase()}),wT=Tl(function(b,S,ee){return b+(ee?" ":"")+S.toLowerCase()}),Zx=mc("toLowerCase"),eI=Tl(function(b,S,ee){return b+(ee?"_":"")+S.toLowerCase()}),ST=Tl(function(b,S,ee){return b+(ee?" ":"")+qm(S)}),MT=Tl(function(b,S,ee){return b+(ee?" ":"")+S.toUpperCase()}),qm=mc("toUpperCase");function nI(b,S,ee){return b=na(b),(S=ee?M:S)===M?function ky(En){return Mc.test(En)}(b)?function Og(En){return En.match(fb)||[]}(b):function du(En){return En.match(rl)||[]}(b):b.match(S)||[]}var gw=Bs(function(b,S){try{return Ka(b,M,S)}catch(ee){return Ct(ee)?ee:new Us(ee)}}),Sb=nc(function(b,S){return Za(S,function(ee){ee=Xu(ee),Fh(b,ee,Tt(b[ee],b))}),b});function mw(b){return function(){return b}}var RT=fd(),PT=fd(!0);function wd(b){return b}function Eb(b){return zh("function"==typeof b?b:yl(b,1))}var sI=Bs(function(b,S){return function(ee){return Oc(ee,b,S)}}),vw=Bs(function(b,S){return function(ee){return Oc(b,ee,S)}});function oI(b,S,ee){var Fe=Gc(S),vt=dh(S,Fe);null==ee&&(!cr(S)||!vt.length&&Fe.length)&&(ee=S,S=b,b=this,vt=dh(S,Gc(S)));var Vt=!(cr(ee)&&"chain"in ee&&!ee.chain),pn=Cn(b);return Za(vt,function(wn){var On=S[wn];b[wn]=On,pn&&(b.prototype[wn]=function(){var Pi=this.__chain__;if(Vt||Pi){var Oi=b(this.__wrapped__),qi=Oi.__actions__=eo(this.__actions__);return qi.push({func:On,args:arguments,thisArg:b}),Oi.__chain__=Pi,Oi}return On.apply(b,Lh([this.value()],arguments))})}),b}function _w(){}var Xt=Kd(Da),bw=Kd(hu),aI=Kd(xm);function r0(b){return ig(b)?Ts(Xu(b)):function Uh(b){return function(S){return zu(S,b)}}(b)}var lI=Zg(),OT=Zg(!0);function s0(){return[]}function Ip(){return!1}var Tb=fa(function(b,S){return b+S},0),Mb=Ml("ceil"),Aw=fa(function(b,S){return b/S},1),xw=Ml("floor"),hI=fa(function(b,S){return b*S},1),ik=Ml("round"),VT=fa(function(b,S){return b-S},0);return It.after=function St(b,S){if("function"!=typeof S)throw new kh(L);return b=Qs(b),function(){if(--b<1)return S.apply(this,arguments)}},It.ary=Gt,It.assign=t0,It.assignIn=bb,It.assignInWith=cg,It.assignWith=Zy,It.at=Hv,It.before=Wt,It.bind=Tt,It.bindAll=Sb,It.bindKey=jt,It.castArray=function kn(){if(!arguments.length)return[];var b=arguments[0];return ki(b)?b:[b]},It.chain=yn,It.chunk=function ag(b,S,ee){S=(ee?yc(b,S,ee):S===M)?1:Cs(Qs(S),0);var Fe=null==b?0:b.length;if(!Fe||S<1)return[];for(var vt=0,Vt=0,pn=ni(Mv(Fe/S));vt<Fe;)pn[Vt++]=_l(b,vt,vt+=S);return pn},It.compact=function lg(b){for(var S=-1,ee=null==b?0:b.length,Fe=0,vt=[];++S<ee;){var Vt=b[S];Vt&&(vt[Fe++]=Vt)}return vt},It.concat=function Fv(){var b=arguments.length;if(!b)return[];for(var S=ni(b-1),ee=arguments[0],Fe=b;Fe--;)S[Fe-1]=arguments[Fe];return Lh(ki(ee)?eo(ee):[ee],ll(S,1))},It.cond=function DT(b){var S=null==b?0:b.length,ee=cs();return b=S?Da(b,function(Fe){if("function"!=typeof Fe[1])throw new kh(L);return[ee(Fe[0]),Fe[1]]}):[],Bs(function(Fe){for(var vt=-1;++vt<S;){var Vt=b[vt];if(Ka(Vt[0],this,Fe))return Ka(Vt[1],this,Fe)}})},It.conforms=function iI(b){return function Xp(b){var S=Gc(b);return function(ee){return Vy(ee,b,S)}}(yl(b,1))},It.constant=mw,It.countBy=Di,It.create=function ug(b,S){var ee=No(b);return null==S?ee:Ud(ee,S)},It.curry=function Pt(b,S,ee){var Fe=iu(b,8,M,M,M,M,M,S=ee?M:S);return Fe.placeholder=Pt.placeholder,Fe},It.curryRight=function Zt(b,S,ee){var Fe=iu(b,16,M,M,M,M,M,S=ee?M:S);return Fe.placeholder=Zt.placeholder,Fe},It.debounce=Kt,It.defaults=n0,It.defaultsDeep=Cb,It.defer=dt,It.delay=Qt,It.difference=Bc,It.differenceBy=Of,It.differenceWith=Gm,It.drop=function Hy(b,S,ee){var Fe=null==b?0:b.length;return Fe?_l(b,(S=ee||S===M?1:Qs(S))<0?0:S,Fe):[]},It.dropRight=function Gy(b,S,ee){var Fe=null==b?0:b.length;return Fe?_l(b,0,(S=Fe-(S=ee||S===M?1:Qs(S)))<0?0:S):[]},It.dropRightWhile=function rm(b,S){return b&&b.length?Ga(b,cs(S,3),!0,!0):[]},It.dropWhile=function mb(b,S){return b&&b.length?Ga(b,cs(S,3),!0):[]},It.fill=function bp(b,S,ee,Fe){var vt=null==b?0:b.length;return vt?(ee&&"number"!=typeof ee&&yc(b,S,ee)&&(ee=0,Fe=vt),function gb(b,S,ee,Fe){var vt=b.length;for((ee=Qs(ee))<0&&(ee=-ee>vt?0:vt+ee),(Fe=Fe===M||Fe>vt?vt:Qs(Fe))<0&&(Fe+=vt),Fe=ee>Fe?0:_b(Fe);ee<Fe;)b[ee++]=S;return b}(b,S,ee,Fe)):[]},It.filter=function mi(b,S){return(ki(b)?ah:Yp)(b,cs(S,3))},It.flatMap=function Zn(b,S){return ll(E(b,S),1)},It.flatMapDeep=function qn(b,S){return ll(E(b,S),yt)},It.flatMapDepth=function f(b,S,ee){return ee=ee===M?1:Qs(ee),ll(E(b,S),ee)},It.flatten=Ff,It.flattenDeep=function Nv(b){return null!=b&&b.length?ll(b,yt):[]},It.flattenDepth=function vb(b,S){return null!=b&&b.length?ll(b,S=S===M?1:Qs(S)):[]},It.flip=function Ht(b){return iu(b,512)},It.flow=RT,It.flowRight=PT,It.fromPairs=function Wy(b){for(var S=-1,ee=null==b?0:b.length,Fe={};++S<ee;){var vt=b[S];Fe[vt[0]]=vt[1]}return Fe},It.functions=function Ox(b){return null==b?[]:dh(b,Gc(b))},It.functionsIn=function uw(b){return null==b?[]:dh(b,xu(b))},It.groupBy=m,It.initial=function X_(b){return null!=b&&b.length?_l(b,0,-1):[]},It.intersection=Y_,It.intersectionBy=$y,It.intersectionWith=jm,It.invert=Fx,It.invertBy=hw,It.invokeMap=C,It.iteratee=Eb,It.keyBy=A,It.keys=Gc,It.keysIn=xu,It.map=E,It.mapKeys=function hT(b,S){var ee={};return S=cs(S,3),kc(b,function(Fe,vt,Vt){Fh(ee,S(Fe,vt,Vt),Fe)}),ee},It.mapValues=function Bx(b,S){var ee={};return S=cs(S,3),kc(b,function(Fe,vt,Vt){Fh(ee,vt,S(Fe,vt,Vt))}),ee},It.matches=function kT(b){return ph(yl(b,1))},It.matchesProperty=function rI(b,S){return Kp(b,yl(S,1))},It.memoize=xn,It.merge=dT,It.mergeWith=zx,It.method=sI,It.methodOf=vw,It.mixin=oI,It.negate=sn,It.nthArg=function JP(b){return b=Qs(b),Bs(function(S){return Vh(S,b)})},It.omit=Vx,It.omitBy=function dw(b,S){return fT(b,sn(cs(S)))},It.once=function vn(b){return Wt(2,b)},It.orderBy=function B(b,S,ee,Fe){return null==b?[]:(ki(S)||(S=null==S?[]:[S]),ki(ee=Fe?M:ee)||(ee=null==ee?[]:[ee]),Qa(b,S,ee))},It.over=Xt,It.overArgs=Ln,It.overEvery=bw,It.overSome=aI,It.partial=Fn,It.partialRight=ri,It.partition=P,It.pick=Ux,It.pickBy=fT,It.property=r0,It.propertyOf=function xp(b){return function(S){return null==b?M:zu(b,S)}},It.pull=Aa,It.pullAll=zv,It.pullAllBy=function Xh(b,S,ee){return b&&b.length&&S&&S.length?Ra(b,S,cs(ee,2)):b},It.pullAllWith=function Vv(b,S,ee){return b&&b.length&&S&&S.length?Ra(b,S,M,ee):b},It.pullAt=qy,It.range=lI,It.rangeRight=OT,It.rearg=Rn,It.reject=function fe(b,S){return(ki(b)?ah:Yp)(b,sn(cs(S,3)))},It.remove=function Z_(b,S){var ee=[];if(!b||!b.length)return ee;var Fe=-1,vt=[],Vt=b.length;for(S=cs(S,3);++Fe<Vt;){var pn=b[Fe];S(pn,Fe,b)&&(ee.push(pn),vt.push(Fe))}return nu(b,vt),ee},It.rest=function ei(b,S){if("function"!=typeof b)throw new kh(L);return Bs(b,S=S===M?S:Qs(S))},It.reverse=$m,It.sampleSize=function _e(b,S,ee){return S=(ee?yc(b,S,ee):S===M)?1:Qs(S),(ki(b)?Rv:km)(b,S)},It.set=function pT(b,S,ee){return null==b?b:wo(b,S,ee)},It.setWith=function Gx(b,S,ee,Fe){return Fe="function"==typeof Fe?Fe:M,null==b?b:wo(b,S,ee,Fe)},It.shuffle=function Pe(b){return(ki(b)?Wg:Qp)(b)},It.slice=function Xy(b,S,ee){var Fe=null==b?0:b.length;return Fe?(ee&&"number"!=typeof ee&&yc(b,S,ee)?(S=0,ee=Fe):(S=null==S?0:Qs(S),ee=ee===M?Fe:Qs(ee)),_l(b,S,ee)):[]},It.sortBy=ht,It.sortedUniq=function Ky(b){return b&&b.length?eg(b):[]},It.sortedUniqBy=function a(b,S){return b&&b.length?eg(b,cs(S,2)):[]},It.split=function Iu(b,S,ee){return ee&&"number"!=typeof ee&&yc(b,S,ee)&&(S=ee=M),(ee=ee===M?Ve:ee>>>0)?(b=na(b))&&("string"==typeof S||null!=S&&!Jo(S))&&!(S=Bl(S))&&ch(b)?fc(uh(b),0,ee):b.split(S,ee):[]},It.spread=function di(b,S){if("function"!=typeof b)throw new kh(L);return S=null==S?0:Cs(Qs(S),0),Bs(function(ee){var Fe=ee[S],vt=fc(ee,0,S);return Fe&&Lh(vt,Fe),Ka(b,this,vt)})},It.tail=function h(b){var S=null==b?0:b.length;return S?_l(b,1,S):[]},It.take=function g(b,S,ee){return b&&b.length?_l(b,0,(S=ee||S===M?1:Qs(S))<0?0:S):[]},It.takeRight=function y(b,S,ee){var Fe=null==b?0:b.length;return Fe?_l(b,(S=Fe-(S=ee||S===M?1:Qs(S)))<0?0:S,Fe):[]},It.takeRightWhile=function x(b,S){return b&&b.length?Ga(b,cs(S,3),!1,!0):[]},It.takeWhile=function D(b,S){return b&&b.length?Ga(b,cs(S,3)):[]},It.tap=function fn(b,S){return S(b),b},It.throttle=function Ii(b,S,ee){var Fe=!0,vt=!0;if("function"!=typeof b)throw new kh(L);return cr(ee)&&(Fe="leading"in ee?!!ee.leading:Fe,vt="trailing"in ee?!!ee.trailing:vt),Kt(b,S,{leading:Fe,maxWait:S,trailing:vt})},It.thru=an,It.toArray=wp,It.toPairs=Wx,It.toPairsIn=jx,It.toPath=function uI(b){return ki(b)?Da(b,Xu):Gl(b)?[b]:eo(sg(na(b)))},It.toPlainObject=J_,It.transform=function Ap(b,S,ee){var Fe=ki(b),vt=Fe||ts(b)||zc(b);if(S=cs(S,4),null==ee){var Vt=b&&b.constructor;ee=vt?Fe?new Vt:[]:cr(b)&&Cn(Vt)?No(rp(b)):{}}return(vt?Za:kc)(b,function(pn,wn,On){return S(ee,pn,wn,On)}),ee},It.unary=function vi(b){return Gt(b,1)},It.union=F,It.unionBy=H,It.unionWith=le,It.uniq=function se(b){return b&&b.length?Il(b):[]},It.uniqBy=function ve(b,S){return b&&b.length?Il(b,cs(S,2)):[]},It.uniqWith=function we(b,S){return S="function"==typeof S?S:M,b&&b.length?Il(b,M,S):[]},It.unset=function gT(b,S){return null==b||Uu(b,S)},It.unzip=Ue,It.unzipWith=We,It.update=function $x(b,S,ee){return null==b?b:Xd(b,S,ka(ee))},It.updateWith=function mT(b,S,ee,Fe){return Fe="function"==typeof Fe?Fe:M,null==b?b:Xd(b,S,ka(ee),Fe)},It.values=Jy,It.valuesIn=function vT(b){return null==b?[]:js(b,xu(b))},It.without=je,It.words=nI,It.wrap=function pi(b,S){return Fn(ka(S),b)},It.xor=pt,It.xorBy=ft,It.xorWith=ut,It.zip=Et,It.zipObject=function Mt(b,S){return Gu(b||[],S||[],Af)},It.zipObjectDeep=function nn(b,S){return Gu(b||[],S||[],wo)},It.zipWith=qt,It.entries=Wx,It.entriesIn=jx,It.extend=bb,It.extendWith=cg,oI(It,It),It.add=Tb,It.attempt=gw,It.camelCase=bT,It.capitalize=Xx,It.ceil=Mb,It.clamp=function yT(b,S,ee){return ee===M&&(ee=S,S=M),ee!==M&&(ee=(ee=bd(ee))==ee?ee:0),S!==M&&(S=(S=bd(S))==S?S:0),Sf(bd(b),S,ee)},It.clone=function li(b){return yl(b,4)},It.cloneDeep=function Qi(b){return yl(b,5)},It.cloneDeepWith=function lr(b,S){return yl(b,5,S="function"==typeof S?S:M)},It.cloneWith=function Ei(b,S){return yl(b,4,S="function"==typeof S?S:M)},It.conformsTo=function Wr(b,S){return null==S||Vy(b,S,Gc(S))},It.deburr=Xs,It.defaultTo=function LT(b,S){return null==b||b!=b?S:b},It.divide=Aw,It.endsWith=function Se(b,S,ee){b=na(b),S=Bl(S);var Fe=b.length,vt=ee=ee===M?Fe:Sf(Qs(ee),0,Fe);return(ee-=S.length)>=0&&b.slice(ee,vt)==S},It.eq=Jr,It.escape=function Yx(b){return(b=na(b))&&ff.test(b)?b.replace(Ou,Pg):b},It.escapeRegExp=function Kx(b){return(b=na(b))&&Mg.test(b)?b.replace(Ic,"\\$&"):b},It.every=function xi(b,S,ee){var Fe=ki(b)?hu:j_;return ee&&yc(b,S,ee)&&(S=M),Fe(b,cs(S,3))},It.find=ar,It.findIndex=hl,It.findKey=function nf(b,S){return Zo(b,cs(S,3),kc)},It.findLast=Hi,It.findLastIndex=Wm,It.findLastKey=function wb(b,S){return Zo(b,cs(S,3),Bh)},It.floor=xw,It.forEach=c,It.forEachRight=d,It.forIn=function Gv(b,S){return null==b?b:Gd(b,cs(S,3),xu)},It.forInRight=function Wv(b,S){return null==b?b:Nh(b,cs(S,3),xu)},It.forOwn=function Cd(b,S){return b&&kc(b,cs(S,3))},It.forOwnRight=function Ab(b,S){return b&&Bh(b,cs(S,3))},It.get=xb,It.gt=mr,It.gte=or,It.has=function Ib(b,S){return null!=b&&zm(b,S,Pm)},It.hasIn=Qy,It.head=jy,It.identity=wd,It.includes=function _(b,S,ee,Fe){b=wr(b)?b:Jy(b),ee=ee&&!Fe?Qs(ee):0;var vt=b.length;return ee<0&&(ee=Cs(vt+ee,0)),Hl(b)?ee<=vt&&b.indexOf(S,ee)>-1:!!vt&&La(b,S,ee)>-1},It.indexOf=function q_(b,S,ee){var Fe=null==b?0:b.length;if(!Fe)return-1;var vt=null==ee?0:Qs(ee);return vt<0&&(vt=Cs(Fe+vt,0)),La(b,S,vt)},It.inRange=function qx(b,S,ee){return S=Hc(S),ee===M?(ee=S,S=0):ee=Hc(ee),function cl(b,S,ee){return b>=ml(S,ee)&&b<Cs(S,ee)}(b=bd(b),S,ee)},It.invoke=Nx,It.isArguments=Zr,It.isArray=ki,It.isArrayBuffer=br,It.isArrayLike=wr,It.isArrayLikeObject=es,It.isBoolean=function zs(b){return!0===b||!1===b||ai(b)&&la(b)==ce},It.isBuffer=ts,It.isDate=$i,It.isElement=function zt(b){return ai(b)&&1===b.nodeType&&!Lo(b)},It.isEmpty=function Qn(b){if(null==b)return!0;if(wr(b)&&(ki(b)||"string"==typeof b||"function"==typeof b.splice||ts(b)||zc(b)||Zr(b)))return!b.length;var S=Oa(b);if(S==kt||S==_n)return!b.size;if(_h(b))return!tu(b).length;for(var ee in b)if(ra.call(b,ee))return!1;return!0},It.isEqual=function Ri(b,S){return Fc(b,S)},It.isEqualWith=function Ze(b,S,ee){var Fe=(ee="function"==typeof ee?ee:M)?ee(b,S):M;return Fe===M?Fc(b,S,M,ee):!!Fe},It.isError=Ct,It.isFinite=function gn(b){return"number"==typeof b&&Vg(b)},It.isFunction=Cn,It.isInteger=An,It.isLength=ir,It.isMap=Vr,It.isMatch=function Vi(b,S){return b===S||fh(b,S,tm(S))},It.isMatchWith=function Ui(b,S,ee){return ee="function"==typeof ee?ee:M,fh(b,S,tm(S),ee)},It.isNaN=function nr(b){return qo(b)&&b!=+b},It.isNative=function to(b){if(md(b))throw new Us("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Wd(b)},It.isNil=function Na(b){return null==b},It.isNull=function fo(b){return null===b},It.isNumber=qo,It.isObject=cr,It.isObjectLike=ai,It.isPlainObject=Lo,It.isRegExp=Jo,It.isSafeInteger=function Er(b){return An(b)&&b>=-hn&&b<=hn},It.isSet=Wa,It.isString=Hl,It.isSymbol=Gl,It.isTypedArray=zc,It.isUndefined=function Cp(b){return b===M},It.isWeakMap=function Nf(b){return ai(b)&&Oa(b)==kr},It.isWeakSet=function Vc(b){return ai(b)&&"[object WeakSet]"==la(b)},It.join=function Bv(b,S){return null==b?"":hh.call(b,S)},It.kebabCase=CT,It.last=Au,It.lastIndexOf=function K_(b,S,ee){var Fe=null==b?0:b.length;if(!Fe)return-1;var vt=Fe;return ee!==M&&(vt=(vt=Qs(ee))<0?Cs(Fe+vt,0):ml(vt,Fe-1)),S==S?function Nd(En,ui,ni){for(var Nr=ni+1;Nr--;)if(En[Nr]===ui)return Nr;return Nr}(b,S,vt):Ol(b,Yl,vt,!0)},It.lowerCase=wT,It.lowerFirst=Zx,It.lt=ic,It.lte=Uc,It.max=function Iw(b){return b&&b.length?kv(b,wd,cd):M},It.maxBy=function nk(b,S){return b&&b.length?kv(b,cs(S,2),cd):M},It.mean=function FT(b){return Ir(b,wd)},It.meanBy=function NT(b,S){return Ir(b,cs(S,2))},It.min=function BT(b){return b&&b.length?kv(b,wd,$d):M},It.minBy=function zT(b,S){return b&&b.length?kv(b,cs(S,2),$d):M},It.stubArray=s0,It.stubFalse=Ip,It.stubObject=function Cw(){return{}},It.stubString=function cI(){return""},It.stubTrue=function ww(){return!0},It.multiply=hI,It.nth=function pa(b,S){return b&&b.length?Vh(b,Qs(S)):M},It.noConflict=function yw(){return Xl._===this&&(Xl._=H_),this},It.noop=_w,It.now=rt,It.pad=function AT(b,S,ee){b=na(b);var Fe=(S=Qs(S))?al(b):0;if(!S||Fe>=S)return b;var vt=(S-Fe)/2;return Cu(sa(vt),ee)+b+Cu(Mv(vt),ee)},It.padEnd=function Qx(b,S,ee){b=na(b);var Fe=(S=Qs(S))?al(b):0;return S&&Fe<S?b+Cu(S-Fe,ee):b},It.padStart=function xT(b,S,ee){b=na(b);var Fe=(S=Qs(S))?al(b):0;return S&&Fe<S?Cu(S-Fe,ee)+b:b},It.parseInt=function IT(b,S,ee){return ee||null==S?S=0:S&&(S=+S),bo(na(b).replace(Th,""),S||0)},It.random=function _T(b,S,ee){if(ee&&"boolean"!=typeof ee&&yc(b,S,ee)&&(S=ee=M),ee===M&&("boolean"==typeof S?(ee=S,S=M):"boolean"==typeof b&&(ee=b,b=M)),b===M&&S===M?(b=0,S=1):(b=Hc(b),S===M?(S=b,b=0):S=Hc(S)),b>S){var Fe=b;b=S,S=Fe}if(ee||b%1||S%1){var vt=Fo();return ml(b+vt*(S-b+os("1e-"+((vt+"").length-1))),S)}return dd(b,S)},It.reduce=function q(b,S,ee){var Fe=ki(b)?vf:pu,vt=arguments.length<3;return Fe(b,cs(S,4),ee,vt,ld)},It.reduceRight=function Q(b,S,ee){var Fe=ki(b)?Or:pu,vt=arguments.length<3;return Fe(b,cs(S,4),ee,vt,Pv)},It.repeat=function XP(b,S,ee){return S=(ee?yc(b,S,ee):S===M)?1:Qs(S),$o(na(b),S)},It.replace=function Jx(){var b=arguments,S=na(b[0]);return b.length<3?S:S.replace(b[1],b[2])},It.result=function Hx(b,S,ee){var Fe=-1,vt=(S=ec(S,b)).length;for(vt||(vt=1,b=M);++Fe<vt;){var Vt=null==b?M:b[Xu(S[Fe])];Vt===M&&(Fe=vt,Vt=ee),b=Cn(Vt)?Vt.call(b):Vt}return b},It.round=ik,It.runInContext=En,It.sample=function me(b){return(ki(b)?Lv:rr)(b)},It.size=function $e(b){if(null==b)return 0;if(wr(b))return Hl(b)?al(b):b.length;var S=Oa(b);return S==kt||S==_n?b.size:tu(b).length},It.snakeCase=eI,It.some=function Ke(b,S,ee){var Fe=ki(b)?xm:Tf;return ee&&yc(b,S,ee)&&(S=M),Fe(b,cs(S,3))},It.sortedIndex=function Q_(b,S){return Jl(b,S)},It.sortedIndexBy=function yb(b,S,ee){return Jp(b,S,cs(ee,2))},It.sortedIndexOf=function tf(b,S){var ee=null==b?0:b.length;if(ee){var Fe=Jl(b,S);if(Fe<ee&&Jr(b[Fe],S))return Fe}return-1},It.sortedLastIndex=function sm(b,S){return Jl(b,S,!0)},It.sortedLastIndexBy=function Uv(b,S,ee){return Jp(b,S,cs(ee,2),!0)},It.sortedLastIndexOf=function Yy(b,S){if(null!=b&&b.length){var Fe=Jl(b,S,!0)-1;if(Jr(b[Fe],S))return Fe}return-1},It.startCase=ST,It.startsWith=function fw(b,S,ee){return b=na(b),ee=null==ee?0:Sf(Qs(ee),0,b.length),S=Bl(S),b.slice(ee,ee+S.length)==S},It.subtract=VT,It.sum=function rk(b){return b&&b.length?Al(b,wd):0},It.sumBy=function dI(b,S){return b&&b.length?Al(b,cs(S,2)):0},It.template=function pw(b,S,ee){var Fe=It.templateSettings;ee&&yc(b,S,ee)&&(S=M),b=na(b),S=cg({},S,Fe,Jg);var wn,On,vt=cg({},S.imports,Fe.imports,Jg),Vt=Gc(vt),pn=js(vt,Vt),Pi=0,Oi=S.interpolate||Dn,qi="__p += '",Rr=Av((S.escape||Dn).source+"|"+Oi.source+"|"+(Oi===pf?et:Dn).source+"|"+(S.evaluate||Dn).source+"|$","g"),$r="//# sourceURL="+(ra.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++B_+"]")+"\n";b.replace(Rr,function(Ss,po,zo,Yh,Kh,Wc){return zo||(zo=Yh),qi+=b.slice(Pi,Wc).replace(Ai,Qf),po&&(wn=!0,qi+="' +\n__e("+po+") +\n'"),Kh&&(On=!0,qi+="';\n"+Kh+";\n__p += '"),zo&&(qi+="' +\n((__t = ("+zo+")) == null ? '' : __t) +\n'"),Pi=Wc+Ss.length,Ss}),qi+="';\n";var Is=ra.call(S,"variable")&&S.variable;if(Is){if($f.test(Is))throw new Us("Invalid `variable` option passed into `_.template`")}else qi="with (obj) {\n"+qi+"\n}\n";qi=(On?qi.replace(Pd,""):qi).replace(uu,"$1").replace(Sa,"$1;"),qi="function("+(Is||"obj")+") {\n"+(Is?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(wn?", __e = _.escape":"")+(On?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+qi+"return __p\n}";var co=gw(function(){return Qo(Vt,$r+"return "+qi).apply(M,pn)});if(co.source=qi,Ct(co))throw co;return co},It.times=function ek(b,S){if((b=Qs(b))<1||b>hn)return[];var ee=Ve,Fe=ml(b,Ve);S=cs(S),b-=Ve;for(var vt=od(Fe,S);++ee<b;)S(ee);return vt},It.toFinite=Hc,It.toInteger=Qs,It.toLength=_b,It.toLower=function ET(b){return na(b).toLowerCase()},It.toNumber=bd,It.toSafeInteger=function e0(b){return b?Sf(Qs(b),-hn,hn):0===b?b:0},It.toString=na,It.toUpper=function YP(b){return na(b).toUpperCase()},It.trim=function KP(b,S,ee){if((b=na(b))&&(ee||S===M))return Hp(b);if(!b||!(S=Bl(S)))return b;var Fe=uh(b),vt=uh(S);return fc(Fe,Zf(Fe,vt),Im(Fe,vt)+1).join("")},It.trimEnd=function ZP(b,S,ee){if((b=na(b))&&(ee||S===M))return b.slice(0,Jc(b)+1);if(!b||!(S=Bl(S)))return b;var Fe=uh(b);return fc(Fe,0,Im(Fe,uh(S))+1).join("")},It.trimStart=function TT(b,S,ee){if((b=na(b))&&(ee||S===M))return b.replace(Th,"");if(!b||!(S=Bl(S)))return b;var Fe=uh(b);return fc(Fe,Zf(Fe,uh(S))).join("")},It.truncate=function tI(b,S){var ee=30,Fe="...";if(cr(S)){var vt="separator"in S?S.separator:vt;ee="length"in S?Qs(S.length):ee,Fe="omission"in S?Bl(S.omission):Fe}var Vt=(b=na(b)).length;if(ch(b)){var pn=uh(b);Vt=pn.length}if(ee>=Vt)return b;var wn=ee-al(Fe);if(wn<1)return Fe;var On=pn?fc(pn,0,wn).join(""):b.slice(0,wn);if(vt===M)return On+Fe;if(pn&&(wn+=On.length-wn),Jo(vt)){if(b.slice(wn).search(vt)){var Pi,Oi=On;for(vt.global||(vt=Av(vt.source,na(mt.exec(vt))+"g")),vt.lastIndex=0;Pi=vt.exec(Oi);)var qi=Pi.index;On=On.slice(0,qi===M?wn:qi)}}else if(b.indexOf(Bl(vt),wn)!=wn){var Rr=On.lastIndexOf(vt);Rr>-1&&(On=On.slice(0,Rr))}return On+Fe},It.unescape=function QP(b){return(b=na(b))&&nd.test(b)?b.replace(Eh,Rh):b},It.uniqueId=function tk(b){var S=++Oy;return na(b)+S},It.upperCase=MT,It.upperFirst=qm,It.each=c,It.eachRight=d,It.first=jy,oI(It,function(){var b={};return kc(It,function(S,ee){ra.call(It.prototype,ee)||(b[ee]=S)}),b}(),{chain:!1}),It.VERSION="4.17.21",Za(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){It[b].placeholder=It}),Za(["drop","take"],function(b,S){ks.prototype[b]=function(ee){ee=ee===M?1:Cs(Qs(ee),0);var Fe=this.__filtered__&&!S?new ks(this):this.clone();return Fe.__filtered__?Fe.__takeCount__=ml(ee,Fe.__takeCount__):Fe.__views__.push({size:ml(ee,Ve),type:b+(Fe.__dir__<0?"Right":"")}),Fe},ks.prototype[b+"Right"]=function(ee){return this.reverse()[b](ee).reverse()}}),Za(["filter","map","takeWhile"],function(b,S){var ee=S+1,Fe=1==ee||3==ee;ks.prototype[b]=function(vt){var Vt=this.clone();return Vt.__iteratees__.push({iteratee:cs(vt,3),type:ee}),Vt.__filtered__=Vt.__filtered__||Fe,Vt}}),Za(["head","last"],function(b,S){var ee="take"+(S?"Right":"");ks.prototype[b]=function(){return this[ee](1).value()[0]}}),Za(["initial","tail"],function(b,S){var ee="drop"+(S?"":"Right");ks.prototype[b]=function(){return this.__filtered__?new ks(this):this[ee](1)}}),ks.prototype.compact=function(){return this.filter(wd)},ks.prototype.find=function(b){return this.filter(b).head()},ks.prototype.findLast=function(b){return this.reverse().find(b)},ks.prototype.invokeMap=Bs(function(b,S){return"function"==typeof b?new ks(this):this.map(function(ee){return Oc(ee,b,S)})}),ks.prototype.reject=function(b){return this.filter(sn(cs(b)))},ks.prototype.slice=function(b,S){b=Qs(b);var ee=this;return ee.__filtered__&&(b>0||S<0)?new ks(ee):(b<0?ee=ee.takeRight(-b):b&&(ee=ee.drop(b)),S!==M&&(ee=(S=Qs(S))<0?ee.dropRight(-S):ee.take(S-b)),ee)},ks.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},ks.prototype.toArray=function(){return this.take(Ve)},kc(ks.prototype,function(b,S){var ee=/^(?:filter|find|map|reject)|While$/.test(S),Fe=/^(?:head|last)$/.test(S),vt=It[Fe?"take"+("last"==S?"Right":""):S],Vt=Fe||/^find/.test(S);!vt||(It.prototype[S]=function(){var pn=this.__wrapped__,wn=Fe?[1]:arguments,On=pn instanceof ks,Pi=wn[0],Oi=On||ki(pn),qi=function(po){var zo=vt.apply(It,Lh([po],wn));return Fe&&Rr?zo[0]:zo};Oi&&ee&&"function"==typeof Pi&&1!=Pi.length&&(On=Oi=!1);var Rr=this.__chain__,$r=!!this.__actions__.length,Is=Vt&&!Rr,co=On&&!$r;if(!Vt&&Oi){pn=co?pn:new ks(this);var Ss=b.apply(pn,wn);return Ss.__actions__.push({func:an,args:[qi],thisArg:M}),new oa(Ss,Rr)}return Is&&co?b.apply(this,wn):(Ss=this.thru(qi),Is?Fe?Ss.value()[0]:Ss.value():Ss)})}),Za(["pop","push","shift","sort","splice","unshift"],function(b){var S=Iv[b],ee=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",Fe=/^(?:pop|shift)$/.test(b);It.prototype[b]=function(){var vt=arguments;if(Fe&&!this.__chain__){var Vt=this.value();return S.apply(ki(Vt)?Vt:[],vt)}return this[ee](function(pn){return S.apply(ki(pn)?pn:[],vt)})}}),kc(ks.prototype,function(b,S){var ee=It[S];if(ee){var Fe=ee.name+"";ra.call($p,Fe)||($p[Fe]=[]),$p[Fe].push({name:S,func:ee})}}),$p[Yn(M,2).name]=[{name:"wrapper",func:M}],ks.prototype.clone=function qp(){var b=new ks(this.__wrapped__);return b.__actions__=eo(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=eo(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=eo(this.__views__),b},ks.prototype.reverse=function op(){if(this.__filtered__){var b=new ks(this);b.__dir__=-1,b.__filtered__=!0}else(b=this.clone()).__dir__*=-1;return b},ks.prototype.value=function Cr(){var b=this.__wrapped__.value(),S=this.__dir__,ee=ki(b),Fe=S<0,vt=ee?b.length:0,Vt=function Bm(b,S,ee){for(var Fe=-1,vt=ee.length;++Fe<vt;){var Vt=ee[Fe],pn=Vt.size;switch(Vt.type){case"drop":b+=pn;break;case"dropRight":S-=pn;break;case"take":S=ml(S,b+pn);break;case"takeRight":b=Cs(b,S-pn)}}return{start:b,end:S}}(0,vt,this.__views__),pn=Vt.start,wn=Vt.end,On=wn-pn,Pi=Fe?wn:pn-1,Oi=this.__iteratees__,qi=Oi.length,Rr=0,$r=ml(On,this.__takeCount__);if(!ee||!Fe&&vt==On&&$r==On)return yu(b,this.__actions__);var Is=[];e:for(;On--&&Rr<$r;){for(var co=-1,Ss=b[Pi+=S];++co<qi;){var po=Oi[co],Yh=po.type,Kh=(0,po.iteratee)(Ss);if(2==Yh)Ss=Kh;else if(!Kh){if(1==Yh)continue e;break e}}Is[Rr++]=Ss}return Is},It.prototype.at=bn,It.prototype.chain=function Nn(){return yn(this)},It.prototype.commit=function Mi(){return new oa(this.value(),this.__chain__)},It.prototype.next=function fi(){this.__values__===M&&(this.__values__=wp(this.value()));var b=this.__index__>=this.__values__.length;return{done:b,value:b?M:this.__values__[this.__index__++]}},It.prototype.plant=function tn(b){for(var S,ee=this;ee instanceof Mo;){var Fe=im(ee);Fe.__index__=0,Fe.__values__=M,S?vt.__wrapped__=Fe:S=Fe;var vt=Fe;ee=ee.__wrapped__}return vt.__wrapped__=b,S},It.prototype.reverse=function Kn(){var b=this.__wrapped__;if(b instanceof ks){var S=b;return this.__actions__.length&&(S=new ks(this)),(S=S.reverse()).__actions__.push({func:an,args:[$m],thisArg:M}),new oa(S,this.__chain__)}return this.thru($m)},It.prototype.toJSON=It.prototype.valueOf=It.prototype.value=function si(){return yu(this.__wrapped__,this.__actions__)},It.prototype.first=It.prototype.head,Wp&&(It.prototype[Wp]=function Jt(){return this}),It}();Xl._=Sm,(X=function(){return Sm}.call(be,z,be,He))!==M&&(He.exports=X)}.call(this)},535:(He,be,z)=>{var X=z(9850);function U(O,V){if("function"!=typeof O||null!=V&&"function"!=typeof V)throw new TypeError("Expected a function");var L=function(){var R=arguments,j=V?V.apply(this,R):R[0],J=L.cache;if(J.has(j))return J.get(j);var Z=O.apply(this,R);return L.cache=J.set(j,Z)||J,Z};return L.cache=new(U.Cache||X),L}U.Cache=X,He.exports=U},1710:(He,be,z)=>{var X=z(2119);He.exports=function(){return X.Date.now()}},4793:(He,be,z)=>{var X=z(5963);He.exports=function M(U,O,V){return null==U?U:X(U,O,V)}},1467:(He,be,z)=>{var X=z(3348),M=z(5940),U=z(4129),V=/^[-+]0x[0-9a-f]+$/i,L=/^0b[01]+$/i,R=/^0o[0-7]+$/i,j=parseInt;He.exports=function J(Z){if("number"==typeof Z)return Z;if(U(Z))return NaN;if(M(Z)){var te="function"==typeof Z.valueOf?Z.valueOf():Z;Z=M(te)?te+"":te}if("string"!=typeof Z)return 0===Z?Z:+Z;Z=X(Z);var ie=L.test(Z);return ie||R.test(Z)?j(Z.slice(2),ie?2:8):V.test(Z)?NaN:+Z}},4152:(He,be,z)=>{var X=z(4633),M=z(9454),U=z(9460),O=z(4129),V=z(2855),L=z(8533),R=z(3943);He.exports=function j(J){return U(J)?X(J,L):O(J)?[J]:M(V(R(J)))}},3943:(He,be,z)=>{var X=z(3935);He.exports=function M(U){return null==U?"":X(U)}},4826:(He,be,z)=>{"use strict";He.exports=z(6776)},6798:(He,be,z)=>{"use strict";He.exports=z(5485)},9612:He=>{"use strict";He.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},3266:He=>{"use strict";var V="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",L="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",te=new RegExp("^(?:"+V+"|"+L+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),ie=new RegExp("^(?:"+V+"|"+L+")");He.exports.n=te,He.exports.q=ie},3332:(He,be,z)=>{"use strict";var U=Object.prototype.hasOwnProperty;function O(ke,qe){return U.call(ke,qe)}function R(ke){return!(ke>=55296&&ke<=57343||ke>=64976&&ke<=65007||65535==(65535&ke)||65534==(65535&ke)||ke>=0&&ke<=8||11===ke||ke>=14&&ke<=31||ke>=127&&ke<=159||ke>1114111)}function j(ke){return ke>65535?(ke-=65536,String.fromCharCode(55296+(ke>>10),56320+(1023&ke))):String.fromCharCode(ke)}var J=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,te=new RegExp(J.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),ie=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,Y=z(6798),Ie=/[&<>"]/,ne=/[&<>"]/g,ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function N(ke){return ae[ke]}var re=/[.?*+^$[\]\\(){}|-]/g,xe=z(6020);be.lib={},be.lib.mdurl=z(7214),be.lib.ucmicro=z(9315),be.assign=function V(ke){var qe=Array.prototype.slice.call(arguments,1);return qe.forEach(function(ot){if(ot){if("object"!=typeof ot)throw new TypeError(ot+"must be object");Object.keys(ot).forEach(function(yt){ke[yt]=ot[yt]})}}),ke},be.isString=function M(ke){return"[object String]"===function X(ke){return Object.prototype.toString.call(ke)}(ke)},be.has=O,be.unescapeMd=function oe(ke){return ke.indexOf("\\")<0?ke:ke.replace(J,"$1")},be.unescapeAll=function ye(ke){return ke.indexOf("\\")<0&&ke.indexOf("&")<0?ke:ke.replace(te,function(qe,ot,yt){return ot||function G(ke,qe){var ot=0;return O(Y,qe)?Y[qe]:35===qe.charCodeAt(0)&&ie.test(qe)&&R(ot="x"===qe[1].toLowerCase()?parseInt(qe.slice(2),16):parseInt(qe.slice(1),10))?j(ot):ke}(qe,yt)})},be.isValidEntityCode=R,be.fromCodePoint=j,be.escapeHtml=function $(ke){return Ie.test(ke)?ke.replace(ne,N):ke},be.arrayReplaceAt=function L(ke,qe,ot){return[].concat(ke.slice(0,qe),ot,ke.slice(qe+1))},be.isSpace=function Ne(ke){switch(ke){case 9:case 32:return!0}return!1},be.isWhiteSpace=function Ee(ke){if(ke>=8192&&ke<=8202)return!0;switch(ke){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},be.isMdAsciiPunct=function Re(ke){switch(ke){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},be.isPunctChar=function ue(ke){return xe.test(ke)},be.escapeRE=function pe(ke){return ke.replace(re,"\\$&")},be.normalizeReference=function Je(ke){return ke=ke.trim().replace(/\s+/g," "),"\u1e7e"==="\u1e9e".toLowerCase()&&(ke=ke.replace(/\u1e9e/g,"\xdf")),ke.toLowerCase().toUpperCase()}},8198:(He,be,z)=>{"use strict";be.parseLinkLabel=z(9605),be.parseLinkDestination=z(4072),be.parseLinkTitle=z(4658)},4072:(He,be,z)=>{"use strict";var X=z(3332).unescapeAll;He.exports=function(U,O,V){var L,R,J=O,Z={ok:!1,pos:0,lines:0,str:""};if(60===U.charCodeAt(O)){for(O++;O<V;){if(10===(L=U.charCodeAt(O))||60===L)return Z;if(62===L)return Z.pos=O+1,Z.str=X(U.slice(J+1,O)),Z.ok=!0,Z;92===L&&O+1<V?O+=2:O++}return Z}for(R=0;O<V&&!(32===(L=U.charCodeAt(O))||L<32||127===L);)if(92===L&&O+1<V){if(32===U.charCodeAt(O+1))break;O+=2}else{if(40===L&&++R>32)return Z;if(41===L){if(0===R)break;R--}O++}return J===O||0!==R||(Z.str=X(U.slice(J,O)),Z.lines=0,Z.pos=O,Z.ok=!0),Z}},9605:He=>{"use strict";He.exports=function(z,X,M){var U,O,V,L,R=-1,j=z.posMax,J=z.pos;for(z.pos=X+1,U=1;z.pos<j;){if(93===(V=z.src.charCodeAt(z.pos))&&0==--U){O=!0;break}if(L=z.pos,z.md.inline.skipToken(z),91===V)if(L===z.pos-1)U++;else if(M)return z.pos=J,-1}return O&&(R=z.pos),z.pos=J,R}},4658:(He,be,z)=>{"use strict";var X=z(3332).unescapeAll;He.exports=function(U,O,V){var L,R,j=0,J=O,Z={ok:!1,pos:0,lines:0,str:""};if(O>=V||34!==(R=U.charCodeAt(O))&&39!==R&&40!==R)return Z;for(O++,40===R&&(R=41);O<V;){if((L=U.charCodeAt(O))===R)return Z.pos=O+1,Z.lines=j,Z.str=X(U.slice(J+1,O)),Z.ok=!0,Z;if(40===L&&41===R)return Z;10===L?j++:92===L&&O+1<V&&(O++,10===U.charCodeAt(O)&&j++),O++}return Z}},6776:(He,be,z)=>{"use strict";var X=z(3332),M=z(8198),U=z(7172),O=z(2080),V=z(4223),L=z(2900),R=z(3353),j=z(7214),J=z(4879),Z={default:z(4210),zero:z(7020),commonmark:z(8687)},te=/^(vbscript|javascript|file|data):/,ie=/^data:image\/(gif|png|jpeg|webp);/;function Y(ne){var ae=ne.trim().toLowerCase();return!te.test(ae)||!!ie.test(ae)}var G=["http:","https:","mailto:"];function oe(ne){var ae=j.parse(ne,!0);if(ae.hostname&&(!ae.protocol||G.indexOf(ae.protocol)>=0))try{ae.hostname=J.toASCII(ae.hostname)}catch{}return j.encode(j.format(ae))}function ye(ne){var ae=j.parse(ne,!0);if(ae.hostname&&(!ae.protocol||G.indexOf(ae.protocol)>=0))try{ae.hostname=J.toUnicode(ae.hostname)}catch{}return j.decode(j.format(ae),j.decode.defaultChars+"%")}function Ie(ne,ae){if(!(this instanceof Ie))return new Ie(ne,ae);ae||X.isString(ne)||(ae=ne||{},ne="default"),this.inline=new L,this.block=new V,this.core=new O,this.renderer=new U,this.linkify=new R,this.validateLink=Y,this.normalizeLink=oe,this.normalizeLinkText=ye,this.utils=X,this.helpers=X.assign({},M),this.options={},this.configure(ne),ae&&this.set(ae)}Ie.prototype.set=function(ne){return X.assign(this.options,ne),this},Ie.prototype.configure=function(ne){var N,ae=this;if(X.isString(ne)&&!(ne=Z[N=ne]))throw new Error('Wrong `markdown-it` preset "'+N+'", check name');if(!ne)throw new Error("Wrong `markdown-it` preset, can't be empty");return ne.options&&ae.set(ne.options),ne.components&&Object.keys(ne.components).forEach(function($){ne.components[$].rules&&ae[$].ruler.enableOnly(ne.components[$].rules),ne.components[$].rules2&&ae[$].ruler2.enableOnly(ne.components[$].rules2)}),this},Ie.prototype.enable=function(ne,ae){var N=[];Array.isArray(ne)||(ne=[ne]),["core","block","inline"].forEach(function(re){N=N.concat(this[re].ruler.enable(ne,!0))},this),N=N.concat(this.inline.ruler2.enable(ne,!0));var $=ne.filter(function(re){return N.indexOf(re)<0});if($.length&&!ae)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+$);return this},Ie.prototype.disable=function(ne,ae){var N=[];Array.isArray(ne)||(ne=[ne]),["core","block","inline"].forEach(function(re){N=N.concat(this[re].ruler.disable(ne,!0))},this),N=N.concat(this.inline.ruler2.disable(ne,!0));var $=ne.filter(function(re){return N.indexOf(re)<0});if($.length&&!ae)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+$);return this},Ie.prototype.use=function(ne){var ae=[this].concat(Array.prototype.slice.call(arguments,1));return ne.apply(ne,ae),this},Ie.prototype.parse=function(ne,ae){if("string"!=typeof ne)throw new Error("Input data should be a String");var N=new this.core.State(ne,this,ae);return this.core.process(N),N.tokens},Ie.prototype.render=function(ne,ae){return this.renderer.render(this.parse(ne,ae=ae||{}),this.options,ae)},Ie.prototype.parseInline=function(ne,ae){var N=new this.core.State(ne,this,ae);return N.inlineMode=!0,this.core.process(N),N.tokens},Ie.prototype.renderInline=function(ne,ae){return this.renderer.render(this.parseInline(ne,ae=ae||{}),this.options,ae)},He.exports=Ie},4223:(He,be,z)=>{"use strict";var X=z(1368),M=[["table",z(2281),["paragraph","reference"]],["code",z(6372)],["fence",z(7931),["paragraph","reference","blockquote","list"]],["blockquote",z(72),["paragraph","reference","blockquote","list"]],["hr",z(8570),["paragraph","reference","blockquote","list"]],["list",z(7827),["paragraph","reference","blockquote"]],["reference",z(5886)],["html_block",z(5134),["paragraph","reference","blockquote"]],["heading",z(3462),["paragraph","reference","blockquote"]],["lheading",z(5920)],["paragraph",z(851)]];function U(){this.ruler=new X;for(var O=0;O<M.length;O++)this.ruler.push(M[O][0],M[O][1],{alt:(M[O][2]||[]).slice()})}U.prototype.tokenize=function(O,V,L){for(var j,J=this.ruler.getRules(""),Z=J.length,te=V,ie=!1,Y=O.md.options.maxNesting;te<L&&(O.line=te=O.skipEmptyLines(te),!(te>=L||O.sCount[te]<O.blkIndent));){if(O.level>=Y){O.line=L;break}for(j=0;j<Z&&!J[j](O,te,L,!1);j++);O.tight=!ie,O.isEmpty(O.line-1)&&(ie=!0),(te=O.line)<L&&O.isEmpty(te)&&(ie=!0,te++,O.line=te)}},U.prototype.parse=function(O,V,L,R){var j;!O||(j=new this.State(O,V,L,R),this.tokenize(j,j.line,j.lineMax))},U.prototype.State=z(1845),He.exports=U},2080:(He,be,z)=>{"use strict";var X=z(1368),M=[["normalize",z(7398)],["block",z(8905)],["inline",z(3591)],["linkify",z(9212)],["replacements",z(1982)],["smartquotes",z(8157)],["text_join",z(2245)]];function U(){this.ruler=new X;for(var O=0;O<M.length;O++)this.ruler.push(M[O][0],M[O][1])}U.prototype.process=function(O){var V,L,R;for(V=0,L=(R=this.ruler.getRules("")).length;V<L;V++)R[V](O)},U.prototype.State=z(1076),He.exports=U},2900:(He,be,z)=>{"use strict";var X=z(1368),M=[["text",z(1767)],["linkify",z(6234)],["newline",z(2921)],["escape",z(8763)],["backticks",z(415)],["strikethrough",z(8165).w],["emphasis",z(425).w],["link",z(7219)],["image",z(7936)],["autolink",z(6973)],["html_inline",z(3722)],["entity",z(3559)]],U=[["balance_pairs",z(9269)],["strikethrough",z(8165).g],["emphasis",z(425).g],["fragments_join",z(5767)]];function O(){var V;for(this.ruler=new X,V=0;V<M.length;V++)this.ruler.push(M[V][0],M[V][1]);for(this.ruler2=new X,V=0;V<U.length;V++)this.ruler2.push(U[V][0],U[V][1])}O.prototype.skipToken=function(V){var L,R,j=V.pos,J=this.ruler.getRules(""),Z=J.length,te=V.md.options.maxNesting,ie=V.cache;if(typeof ie[j]<"u")V.pos=ie[j];else{if(V.level<te)for(R=0;R<Z&&(V.level++,L=J[R](V,!0),V.level--,!L);R++);else V.pos=V.posMax;L||V.pos++,ie[j]=V.pos}},O.prototype.tokenize=function(V){for(var L,R,j=this.ruler.getRules(""),J=j.length,Z=V.posMax,te=V.md.options.maxNesting;V.pos<Z;){if(V.level<te)for(R=0;R<J&&!(L=j[R](V,!1));R++);if(L){if(V.pos>=Z)break}else V.pending+=V.src[V.pos++]}V.pending&&V.pushPending()},O.prototype.parse=function(V,L,R,j){var J,Z,te,ie=new this.State(V,L,R,j);for(this.tokenize(ie),te=(Z=this.ruler2.getRules("")).length,J=0;J<te;J++)Z[J](ie)},O.prototype.State=z(630),He.exports=O},8687:He=>{"use strict";He.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},4210:He=>{"use strict";He.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},7020:He=>{"use strict";He.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},7172:(He,be,z)=>{"use strict";var X=z(3332).assign,M=z(3332).unescapeAll,U=z(3332).escapeHtml,O={};function V(){this.rules=X({},O)}O.code_inline=function(L,R,j,J,Z){return"<code"+Z.renderAttrs(L[R])+">"+U(L[R].content)+"</code>"},O.code_block=function(L,R,j,J,Z){return"<pre"+Z.renderAttrs(L[R])+"><code>"+U(L[R].content)+"</code></pre>\n"},O.fence=function(L,R,j,J,Z){var oe,ye,Ie,ne,te=L[R],ie=te.info?M(te.info).trim():"",Y="",G="";return ie&&(Y=(Ie=ie.split(/(\s+)/g))[0],G=Ie.slice(2).join("")),0===(oe=j.highlight&&j.highlight(te.content,Y,G)||U(te.content)).indexOf("<pre")?oe+"\n":ie?(ye=te.attrIndex("class"),ne=te.attrs?te.attrs.slice():[],ye<0?ne.push(["class",j.langPrefix+Y]):(ne[ye]=ne[ye].slice(),ne[ye][1]+=" "+j.langPrefix+Y),"<pre><code"+Z.renderAttrs({attrs:ne})+">"+oe+"</code></pre>\n"):"<pre><code"+Z.renderAttrs(te)+">"+oe+"</code></pre>\n"},O.image=function(L,R,j,J,Z){var te=L[R];return te.attrs[te.attrIndex("alt")][1]=Z.renderInlineAsText(te.children,j,J),Z.renderToken(L,R,j)},O.hardbreak=function(L,R,j){return j.xhtmlOut?"<br />\n":"<br>\n"},O.softbreak=function(L,R,j){return j.breaks?j.xhtmlOut?"<br />\n":"<br>\n":"\n"},O.text=function(L,R){return U(L[R].content)},O.html_block=function(L,R){return L[R].content},O.html_inline=function(L,R){return L[R].content},V.prototype.renderAttrs=function(R){var j,J,Z;if(!R.attrs)return"";for(Z="",j=0,J=R.attrs.length;j<J;j++)Z+=" "+U(R.attrs[j][0])+'="'+U(R.attrs[j][1])+'"';return Z},V.prototype.renderToken=function(R,j,J){var Z,te="",ie=!1,Y=R[j];return Y.hidden?"":(Y.block&&-1!==Y.nesting&&j&&R[j-1].hidden&&(te+="\n"),te+=(-1===Y.nesting?"</":"<")+Y.tag,te+=this.renderAttrs(Y),0===Y.nesting&&J.xhtmlOut&&(te+=" /"),Y.block&&(ie=!0,1===Y.nesting&&j+1<R.length&&("inline"===(Z=R[j+1]).type||Z.hidden||-1===Z.nesting&&Z.tag===Y.tag)&&(ie=!1)),te+=ie?">\n":">")},V.prototype.renderInline=function(L,R,j){for(var J,Z="",te=this.rules,ie=0,Y=L.length;ie<Y;ie++)Z+=typeof te[J=L[ie].type]<"u"?te[J](L,ie,R,j,this):this.renderToken(L,ie,R);return Z},V.prototype.renderInlineAsText=function(L,R,j){for(var J="",Z=0,te=L.length;Z<te;Z++)"text"===L[Z].type?J+=L[Z].content:"image"===L[Z].type?J+=this.renderInlineAsText(L[Z].children,R,j):"softbreak"===L[Z].type&&(J+="\n");return J},V.prototype.render=function(L,R,j){var J,Z,te,ie="",Y=this.rules;for(J=0,Z=L.length;J<Z;J++)ie+="inline"===(te=L[J].type)?this.renderInline(L[J].children,R,j):typeof Y[te]<"u"?Y[L[J].type](L,J,R,j,this):this.renderToken(L,J,R,j);return ie},He.exports=V},1368:He=>{"use strict";function be(){this.__rules__=[],this.__cache__=null}be.prototype.__find__=function(z){for(var X=0;X<this.__rules__.length;X++)if(this.__rules__[X].name===z)return X;return-1},be.prototype.__compile__=function(){var z=this,X=[""];z.__rules__.forEach(function(M){!M.enabled||M.alt.forEach(function(U){X.indexOf(U)<0&&X.push(U)})}),z.__cache__={},X.forEach(function(M){z.__cache__[M]=[],z.__rules__.forEach(function(U){!U.enabled||M&&U.alt.indexOf(M)<0||z.__cache__[M].push(U.fn)})})},be.prototype.at=function(z,X,M){var U=this.__find__(z),O=M||{};if(-1===U)throw new Error("Parser rule not found: "+z);this.__rules__[U].fn=X,this.__rules__[U].alt=O.alt||[],this.__cache__=null},be.prototype.before=function(z,X,M,U){var O=this.__find__(z),V=U||{};if(-1===O)throw new Error("Parser rule not found: "+z);this.__rules__.splice(O,0,{name:X,enabled:!0,fn:M,alt:V.alt||[]}),this.__cache__=null},be.prototype.after=function(z,X,M,U){var O=this.__find__(z),V=U||{};if(-1===O)throw new Error("Parser rule not found: "+z);this.__rules__.splice(O+1,0,{name:X,enabled:!0,fn:M,alt:V.alt||[]}),this.__cache__=null},be.prototype.push=function(z,X,M){this.__rules__.push({name:z,enabled:!0,fn:X,alt:(M||{}).alt||[]}),this.__cache__=null},be.prototype.enable=function(z,X){Array.isArray(z)||(z=[z]);var M=[];return z.forEach(function(U){var O=this.__find__(U);if(O<0){if(X)return;throw new Error("Rules manager: invalid rule name "+U)}this.__rules__[O].enabled=!0,M.push(U)},this),this.__cache__=null,M},be.prototype.enableOnly=function(z,X){Array.isArray(z)||(z=[z]),this.__rules__.forEach(function(M){M.enabled=!1}),this.enable(z,X)},be.prototype.disable=function(z,X){Array.isArray(z)||(z=[z]);var M=[];return z.forEach(function(U){var O=this.__find__(U);if(O<0){if(X)return;throw new Error("Rules manager: invalid rule name "+U)}this.__rules__[O].enabled=!1,M.push(U)},this),this.__cache__=null,M},be.prototype.getRules=function(z){return null===this.__cache__&&this.__compile__(),this.__cache__[z]||[]},He.exports=be},72:(He,be,z)=>{"use strict";var X=z(3332).isSpace;He.exports=function(U,O,V,L){var R,j,J,Z,te,ie,Y,G,oe,ye,Ie,ne,ae,N,$,re,pe,Ne,Ee,xe,ue=U.lineMax,Re=U.bMarks[O]+U.tShift[O],Je=U.eMarks[O];if(U.sCount[O]-U.blkIndent>=4||62!==U.src.charCodeAt(Re++))return!1;if(L)return!0;for(Z=oe=U.sCount[O]+1,32===U.src.charCodeAt(Re)?(Re++,Z++,oe++,R=!1,re=!0):9===U.src.charCodeAt(Re)?(re=!0,(U.bsCount[O]+oe)%4==3?(Re++,Z++,oe++,R=!1):R=!0):re=!1,ye=[U.bMarks[O]],U.bMarks[O]=Re;Re<Je&&(j=U.src.charCodeAt(Re),X(j));)9===j?oe+=4-(oe+U.bsCount[O]+(R?1:0))%4:oe++,Re++;for(Ie=[U.bsCount[O]],U.bsCount[O]=U.sCount[O]+1+(re?1:0),ie=Re>=Je,N=[U.sCount[O]],U.sCount[O]=oe-Z,$=[U.tShift[O]],U.tShift[O]=Re-U.bMarks[O],Ne=U.md.block.ruler.getRules("blockquote"),ae=U.parentType,U.parentType="blockquote",G=O+1;G<V&&(xe=U.sCount[G]<U.blkIndent,!((Re=U.bMarks[G]+U.tShift[G])>=(Je=U.eMarks[G])));G++)if(62!==U.src.charCodeAt(Re++)||xe){if(ie)break;for(pe=!1,J=0,te=Ne.length;J<te;J++)if(Ne[J](U,G,V,!0)){pe=!0;break}if(pe){U.lineMax=G,0!==U.blkIndent&&(ye.push(U.bMarks[G]),Ie.push(U.bsCount[G]),$.push(U.tShift[G]),N.push(U.sCount[G]),U.sCount[G]-=U.blkIndent);break}ye.push(U.bMarks[G]),Ie.push(U.bsCount[G]),$.push(U.tShift[G]),N.push(U.sCount[G]),U.sCount[G]=-1}else{for(Z=oe=U.sCount[G]+1,32===U.src.charCodeAt(Re)?(Re++,Z++,oe++,R=!1,re=!0):9===U.src.charCodeAt(Re)?(re=!0,(U.bsCount[G]+oe)%4==3?(Re++,Z++,oe++,R=!1):R=!0):re=!1,ye.push(U.bMarks[G]),U.bMarks[G]=Re;Re<Je&&(j=U.src.charCodeAt(Re),X(j));)9===j?oe+=4-(oe+U.bsCount[G]+(R?1:0))%4:oe++,Re++;ie=Re>=Je,Ie.push(U.bsCount[G]),U.bsCount[G]=U.sCount[G]+1+(re?1:0),N.push(U.sCount[G]),U.sCount[G]=oe-Z,$.push(U.tShift[G]),U.tShift[G]=Re-U.bMarks[G]}for(ne=U.blkIndent,U.blkIndent=0,(Ee=U.push("blockquote_open","blockquote",1)).markup=">",Ee.map=Y=[O,0],U.md.block.tokenize(U,O,G),(Ee=U.push("blockquote_close","blockquote",-1)).markup=">",U.lineMax=ue,U.parentType=ae,Y[1]=U.line,J=0;J<$.length;J++)U.bMarks[J+O]=ye[J],U.tShift[J+O]=$[J],U.sCount[J+O]=N[J],U.bsCount[J+O]=Ie[J];return U.blkIndent=ne,!0}},6372:He=>{"use strict";He.exports=function(z,X,M){var U,O,V;if(z.sCount[X]-z.blkIndent<4)return!1;for(O=U=X+1;U<M;)if(z.isEmpty(U))U++;else{if(!(z.sCount[U]-z.blkIndent>=4))break;O=++U}return z.line=O,(V=z.push("code_block","code",0)).content=z.getLines(X,O,4+z.blkIndent,!1)+"\n",V.map=[X,z.line],!0}},7931:He=>{"use strict";He.exports=function(z,X,M,U){var O,V,L,R,j,J,Z,te=!1,ie=z.bMarks[X]+z.tShift[X],Y=z.eMarks[X];if(z.sCount[X]-z.blkIndent>=4||ie+3>Y||126!==(O=z.src.charCodeAt(ie))&&96!==O||(j=ie,(V=(ie=z.skipChars(ie,O))-j)<3)||(Z=z.src.slice(j,ie),L=z.src.slice(ie,Y),96===O&&L.indexOf(String.fromCharCode(O))>=0))return!1;if(U)return!0;for(R=X;!(++R>=M||(ie=j=z.bMarks[R]+z.tShift[R],Y=z.eMarks[R],ie<Y&&z.sCount[R]<z.blkIndent));)if(!(z.src.charCodeAt(ie)!==O||z.sCount[R]-z.blkIndent>=4||(ie=z.skipChars(ie,O),ie-j<V||(ie=z.skipSpaces(ie),ie<Y)))){te=!0;break}return V=z.sCount[X],z.line=R+(te?1:0),(J=z.push("fence","code",0)).info=L,J.content=z.getLines(X+1,R,V,!0),J.markup=Z,J.map=[X,z.line],!0}},3462:(He,be,z)=>{"use strict";var X=z(3332).isSpace;He.exports=function(U,O,V,L){var R,j,J,Z,te=U.bMarks[O]+U.tShift[O],ie=U.eMarks[O];if(U.sCount[O]-U.blkIndent>=4||35!==(R=U.src.charCodeAt(te))||te>=ie)return!1;for(j=1,R=U.src.charCodeAt(++te);35===R&&te<ie&&j<=6;)j++,R=U.src.charCodeAt(++te);return!(j>6||te<ie&&!X(R)||(L||(ie=U.skipSpacesBack(ie,te),(J=U.skipCharsBack(ie,35,te))>te&&X(U.src.charCodeAt(J-1))&&(ie=J),U.line=O+1,(Z=U.push("heading_open","h"+String(j),1)).markup="########".slice(0,j),Z.map=[O,U.line],(Z=U.push("inline","",0)).content=U.src.slice(te,ie).trim(),Z.map=[O,U.line],Z.children=[],(Z=U.push("heading_close","h"+String(j),-1)).markup="########".slice(0,j)),0))}},8570:(He,be,z)=>{"use strict";var X=z(3332).isSpace;He.exports=function(U,O,V,L){var R,j,J,Z,te=U.bMarks[O]+U.tShift[O],ie=U.eMarks[O];if(U.sCount[O]-U.blkIndent>=4||42!==(R=U.src.charCodeAt(te++))&&45!==R&&95!==R)return!1;for(j=1;te<ie;){if((J=U.src.charCodeAt(te++))!==R&&!X(J))return!1;J===R&&j++}return!(j<3||(L||(U.line=O+1,(Z=U.push("hr","hr",0)).map=[O,U.line],Z.markup=Array(j+1).join(String.fromCharCode(R))),0))}},5134:(He,be,z)=>{"use strict";var X=z(9612),M=z(3266).q,U=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+X.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(M.source+"\\s*$"),/^$/,!1]];He.exports=function(V,L,R,j){var J,Z,te,ie,Y=V.bMarks[L]+V.tShift[L],G=V.eMarks[L];if(V.sCount[L]-V.blkIndent>=4||!V.md.options.html||60!==V.src.charCodeAt(Y))return!1;for(ie=V.src.slice(Y,G),J=0;J<U.length&&!U[J][0].test(ie);J++);if(J===U.length)return!1;if(j)return U[J][2];if(Z=L+1,!U[J][1].test(ie))for(;Z<R&&!(V.sCount[Z]<V.blkIndent);Z++)if(ie=V.src.slice(Y=V.bMarks[Z]+V.tShift[Z],G=V.eMarks[Z]),U[J][1].test(ie)){0!==ie.length&&Z++;break}return V.line=Z,(te=V.push("html_block","",0)).map=[L,Z],te.content=V.getLines(L,Z,V.blkIndent,!0),!0}},5920:He=>{"use strict";He.exports=function(z,X,M){var U,O,V,L,R,j,J,Z,te,Y,ie=X+1,G=z.md.block.ruler.getRules("paragraph");if(z.sCount[X]-z.blkIndent>=4)return!1;for(Y=z.parentType,z.parentType="paragraph";ie<M&&!z.isEmpty(ie);ie++)if(!(z.sCount[ie]-z.blkIndent>3)){if(z.sCount[ie]>=z.blkIndent&&(j=z.bMarks[ie]+z.tShift[ie])<(J=z.eMarks[ie])&&(45===(te=z.src.charCodeAt(j))||61===te)&&(j=z.skipChars(j,te),(j=z.skipSpaces(j))>=J)){Z=61===te?1:2;break}if(!(z.sCount[ie]<0)){for(O=!1,V=0,L=G.length;V<L;V++)if(G[V](z,ie,M,!0)){O=!0;break}if(O)break}}return!!Z&&(U=z.getLines(X,ie,z.blkIndent,!1).trim(),z.line=ie+1,(R=z.push("heading_open","h"+String(Z),1)).markup=String.fromCharCode(te),R.map=[X,z.line],(R=z.push("inline","",0)).content=U,R.map=[X,z.line-1],R.children=[],(R=z.push("heading_close","h"+String(Z),-1)).markup=String.fromCharCode(te),z.parentType=Y,!0)}},7827:(He,be,z)=>{"use strict";var X=z(3332).isSpace;function M(V,L){var R,j,J,Z;return j=V.bMarks[L]+V.tShift[L],J=V.eMarks[L],42!==(R=V.src.charCodeAt(j++))&&45!==R&&43!==R||j<J&&(Z=V.src.charCodeAt(j),!X(Z))?-1:j}function U(V,L){var R,j=V.bMarks[L]+V.tShift[L],J=j,Z=V.eMarks[L];if(J+1>=Z||(R=V.src.charCodeAt(J++))<48||R>57)return-1;for(;;){if(J>=Z)return-1;if(!((R=V.src.charCodeAt(J++))>=48&&R<=57)){if(41===R||46===R)break;return-1}if(J-j>=10)return-1}return J<Z&&(R=V.src.charCodeAt(J),!X(R))?-1:J}He.exports=function(L,R,j,J){var Z,te,ie,Y,G,oe,ye,Ie,ne,ae,N,$,re,pe,Ne,Ee,xe,ue,Re,Je,ke,qe,ot,yt,hn,Be,lt,Ve,Ge=!1,bt=!0;if(L.sCount[R]-L.blkIndent>=4||L.listIndent>=0&&L.sCount[R]-L.listIndent>=4&&L.sCount[R]<L.blkIndent)return!1;if(J&&"paragraph"===L.parentType&&L.sCount[R]>=L.blkIndent&&(Ge=!0),(ot=U(L,R))>=0){if(ye=!0,hn=L.bMarks[R]+L.tShift[R],re=Number(L.src.slice(hn,ot-1)),Ge&&1!==re)return!1}else{if(!((ot=M(L,R))>=0))return!1;ye=!1}if(Ge&&L.skipSpaces(ot)>=L.eMarks[R])return!1;if($=L.src.charCodeAt(ot-1),J)return!0;for(N=L.tokens.length,ye?(Ve=L.push("ordered_list_open","ol",1),1!==re&&(Ve.attrs=[["start",re]])):Ve=L.push("bullet_list_open","ul",1),Ve.map=ae=[R,0],Ve.markup=String.fromCharCode($),Ne=R,yt=!1,lt=L.md.block.ruler.getRules("list"),ue=L.parentType,L.parentType="list";Ne<j;){for(qe=ot,pe=L.eMarks[Ne],oe=Ee=L.sCount[Ne]+ot-(L.bMarks[R]+L.tShift[R]);qe<pe;){if(9===(Z=L.src.charCodeAt(qe)))Ee+=4-(Ee+L.bsCount[Ne])%4;else{if(32!==Z)break;Ee++}qe++}if((G=(te=qe)>=pe?1:Ee-oe)>4&&(G=1),Y=oe+G,(Ve=L.push("list_item_open","li",1)).markup=String.fromCharCode($),Ve.map=Ie=[R,0],ye&&(Ve.info=L.src.slice(hn,ot-1)),ke=L.tight,Je=L.tShift[R],Re=L.sCount[R],xe=L.listIndent,L.listIndent=L.blkIndent,L.blkIndent=Y,L.tight=!0,L.tShift[R]=te-L.bMarks[R],L.sCount[R]=Ee,te>=pe&&L.isEmpty(R+1)?L.line=Math.min(L.line+2,j):L.md.block.tokenize(L,R,j,!0),(!L.tight||yt)&&(bt=!1),yt=L.line-R>1&&L.isEmpty(L.line-1),L.blkIndent=L.listIndent,L.listIndent=xe,L.tShift[R]=Je,L.sCount[R]=Re,L.tight=ke,(Ve=L.push("list_item_close","li",-1)).markup=String.fromCharCode($),Ne=R=L.line,Ie[1]=Ne,te=L.bMarks[R],Ne>=j||L.sCount[Ne]<L.blkIndent||L.sCount[R]-L.blkIndent>=4)break;for(Be=!1,ie=0,ne=lt.length;ie<ne;ie++)if(lt[ie](L,Ne,j,!0)){Be=!0;break}if(Be)break;if(ye){if((ot=U(L,Ne))<0)break;hn=L.bMarks[Ne]+L.tShift[Ne]}else if((ot=M(L,Ne))<0)break;if($!==L.src.charCodeAt(ot-1))break}return(Ve=ye?L.push("ordered_list_close","ol",-1):L.push("bullet_list_close","ul",-1)).markup=String.fromCharCode($),ae[1]=Ne,L.line=Ne,L.parentType=ue,bt&&function O(V,L){var R,j,J=V.level+2;for(R=L+2,j=V.tokens.length-2;R<j;R++)V.tokens[R].level===J&&"paragraph_open"===V.tokens[R].type&&(V.tokens[R+2].hidden=!0,V.tokens[R].hidden=!0,R+=2)}(L,N),!0}},851:He=>{"use strict";He.exports=function(z,X){var M,U,O,V,L,R,j=X+1,J=z.md.block.ruler.getRules("paragraph"),Z=z.lineMax;for(R=z.parentType,z.parentType="paragraph";j<Z&&!z.isEmpty(j);j++)if(!(z.sCount[j]-z.blkIndent>3||z.sCount[j]<0)){for(U=!1,O=0,V=J.length;O<V;O++)if(J[O](z,j,Z,!0)){U=!0;break}if(U)break}return M=z.getLines(X,j,z.blkIndent,!1).trim(),z.line=j,(L=z.push("paragraph_open","p",1)).map=[X,z.line],(L=z.push("inline","",0)).content=M,L.map=[X,z.line],L.children=[],L=z.push("paragraph_close","p",-1),z.parentType=R,!0}},5886:(He,be,z)=>{"use strict";var X=z(3332).normalizeReference,M=z(3332).isSpace;He.exports=function(O,V,L,R){var j,J,Z,te,ie,Y,G,oe,ye,Ie,ne,ae,N,$,re,pe,Ne=0,Ee=O.bMarks[V]+O.tShift[V],xe=O.eMarks[V],ue=V+1;if(O.sCount[V]-O.blkIndent>=4||91!==O.src.charCodeAt(Ee))return!1;for(;++Ee<xe;)if(93===O.src.charCodeAt(Ee)&&92!==O.src.charCodeAt(Ee-1)){if(Ee+1===xe||58!==O.src.charCodeAt(Ee+1))return!1;break}for(te=O.lineMax,re=O.md.block.ruler.getRules("reference"),Ie=O.parentType,O.parentType="reference";ue<te&&!O.isEmpty(ue);ue++)if(!(O.sCount[ue]-O.blkIndent>3||O.sCount[ue]<0)){for($=!1,Y=0,G=re.length;Y<G;Y++)if(re[Y](O,ue,te,!0)){$=!0;break}if($)break}for(xe=(N=O.getLines(V,ue,O.blkIndent,!1).trim()).length,Ee=1;Ee<xe;Ee++){if(91===(j=N.charCodeAt(Ee)))return!1;if(93===j){ye=Ee;break}(10===j||92===j&&++Ee<xe&&10===N.charCodeAt(Ee))&&Ne++}if(ye<0||58!==N.charCodeAt(ye+1))return!1;for(Ee=ye+2;Ee<xe;Ee++)if(10===(j=N.charCodeAt(Ee)))Ne++;else if(!M(j))break;if(!(ne=O.md.helpers.parseLinkDestination(N,Ee,xe)).ok||(ie=O.md.normalizeLink(ne.str),!O.md.validateLink(ie)))return!1;for(J=Ee=ne.pos,Z=Ne+=ne.lines,ae=Ee;Ee<xe;Ee++)if(10===(j=N.charCodeAt(Ee)))Ne++;else if(!M(j))break;for(ne=O.md.helpers.parseLinkTitle(N,Ee,xe),Ee<xe&&ae!==Ee&&ne.ok?(pe=ne.str,Ee=ne.pos,Ne+=ne.lines):(pe="",Ee=J,Ne=Z);Ee<xe&&(j=N.charCodeAt(Ee),M(j));)Ee++;if(Ee<xe&&10!==N.charCodeAt(Ee)&&pe)for(pe="",Ee=J,Ne=Z;Ee<xe&&(j=N.charCodeAt(Ee),M(j));)Ee++;return!(Ee<xe&&10!==N.charCodeAt(Ee)||(oe=X(N.slice(1,ye)),!oe)||(R||(typeof O.env.references>"u"&&(O.env.references={}),typeof O.env.references[oe]>"u"&&(O.env.references[oe]={title:pe,href:ie}),O.parentType=Ie,O.line=V+Ne+1),0))}},1845:(He,be,z)=>{"use strict";var X=z(6263),M=z(3332).isSpace;function U(O,V,L,R){var j,J,Z,te,ie,Y,G,oe;for(this.src=O,this.md=V,this.env=L,this.tokens=R,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",oe=!1,Z=te=Y=G=0,ie=(J=this.src).length;te<ie;te++){if(j=J.charCodeAt(te),!oe){if(M(j)){Y++,9===j?G+=4-G%4:G++;continue}oe=!0}(10===j||te===ie-1)&&(10!==j&&te++,this.bMarks.push(Z),this.eMarks.push(te),this.tShift.push(Y),this.sCount.push(G),this.bsCount.push(0),oe=!1,Y=0,G=0,Z=te+1)}this.bMarks.push(J.length),this.eMarks.push(J.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}U.prototype.push=function(O,V,L){var R=new X(O,V,L);return R.block=!0,L<0&&this.level--,R.level=this.level,L>0&&this.level++,this.tokens.push(R),R},U.prototype.isEmpty=function(V){return this.bMarks[V]+this.tShift[V]>=this.eMarks[V]},U.prototype.skipEmptyLines=function(V){for(var L=this.lineMax;V<L&&!(this.bMarks[V]+this.tShift[V]<this.eMarks[V]);V++);return V},U.prototype.skipSpaces=function(V){for(var L,R=this.src.length;V<R&&(L=this.src.charCodeAt(V),M(L));V++);return V},U.prototype.skipSpacesBack=function(V,L){if(V<=L)return V;for(;V>L;)if(!M(this.src.charCodeAt(--V)))return V+1;return V},U.prototype.skipChars=function(V,L){for(var R=this.src.length;V<R&&this.src.charCodeAt(V)===L;V++);return V},U.prototype.skipCharsBack=function(V,L,R){if(V<=R)return V;for(;V>R;)if(L!==this.src.charCodeAt(--V))return V+1;return V},U.prototype.getLines=function(V,L,R,j){var J,Z,te,ie,Y,G,oe,ye=V;if(V>=L)return"";for(G=new Array(L-V),J=0;ye<L;ye++,J++){for(Z=0,oe=ie=this.bMarks[ye],Y=ye+1<L||j?this.eMarks[ye]+1:this.eMarks[ye];ie<Y&&Z<R;){if(te=this.src.charCodeAt(ie),M(te))9===te?Z+=4-(Z+this.bsCount[ye])%4:Z++;else{if(!(ie-oe<this.tShift[ye]))break;Z++}ie++}G[J]=Z>R?new Array(Z-R+1).join(" ")+this.src.slice(ie,Y):this.src.slice(ie,Y)}return G.join("")},U.prototype.Token=X,He.exports=U},2281:(He,be,z)=>{"use strict";var X=z(3332).isSpace;function M(O,V){return O.src.slice(O.bMarks[V]+O.tShift[V],O.eMarks[V])}function U(O){var j,V=[],L=0,R=O.length,J=!1,Z=0,te="";for(j=O.charCodeAt(L);L<R;)124===j&&(J?(te+=O.substring(Z,L-1),Z=L):(V.push(te+O.substring(Z,L)),te="",Z=L+1)),J=92===j,L++,j=O.charCodeAt(L);return V.push(te+O.substring(Z)),V}He.exports=function(V,L,R,j){var J,Z,te,ie,Y,G,oe,ye,Ie,ne,ae,N,$,re,pe,Ne,Ee,xe;if(L+2>R||V.sCount[G=L+1]<V.blkIndent||V.sCount[G]-V.blkIndent>=4||(te=V.bMarks[G]+V.tShift[G])>=V.eMarks[G]||124!==(Ee=V.src.charCodeAt(te++))&&45!==Ee&&58!==Ee||te>=V.eMarks[G]||124!==(xe=V.src.charCodeAt(te++))&&45!==xe&&58!==xe&&!X(xe)||45===Ee&&X(xe))return!1;for(;te<V.eMarks[G];){if(124!==(J=V.src.charCodeAt(te))&&45!==J&&58!==J&&!X(J))return!1;te++}for(oe=(Z=M(V,L+1)).split("|"),ne=[],ie=0;ie<oe.length;ie++){if(!(ae=oe[ie].trim())){if(0===ie||ie===oe.length-1)continue;return!1}if(!/^:?-+:?$/.test(ae))return!1;58===ae.charCodeAt(ae.length-1)?ne.push(58===ae.charCodeAt(0)?"center":"right"):58===ae.charCodeAt(0)?ne.push("left"):ne.push("")}if(-1===(Z=M(V,L).trim()).indexOf("|")||V.sCount[L]-V.blkIndent>=4||((oe=U(Z)).length&&""===oe[0]&&oe.shift(),oe.length&&""===oe[oe.length-1]&&oe.pop(),0===(ye=oe.length)||ye!==ne.length))return!1;if(j)return!0;for(re=V.parentType,V.parentType="table",Ne=V.md.block.ruler.getRules("blockquote"),(Ie=V.push("table_open","table",1)).map=N=[L,0],(Ie=V.push("thead_open","thead",1)).map=[L,L+1],(Ie=V.push("tr_open","tr",1)).map=[L,L+1],ie=0;ie<oe.length;ie++)Ie=V.push("th_open","th",1),ne[ie]&&(Ie.attrs=[["style","text-align:"+ne[ie]]]),(Ie=V.push("inline","",0)).content=oe[ie].trim(),Ie.children=[],Ie=V.push("th_close","th",-1);for(Ie=V.push("tr_close","tr",-1),Ie=V.push("thead_close","thead",-1),G=L+2;G<R&&!(V.sCount[G]<V.blkIndent);G++){for(pe=!1,ie=0,Y=Ne.length;ie<Y;ie++)if(Ne[ie](V,G,R,!0)){pe=!0;break}if(pe||!(Z=M(V,G).trim())||V.sCount[G]-V.blkIndent>=4)break;for((oe=U(Z)).length&&""===oe[0]&&oe.shift(),oe.length&&""===oe[oe.length-1]&&oe.pop(),G===L+2&&((Ie=V.push("tbody_open","tbody",1)).map=$=[L+2,0]),(Ie=V.push("tr_open","tr",1)).map=[G,G+1],ie=0;ie<ye;ie++)Ie=V.push("td_open","td",1),ne[ie]&&(Ie.attrs=[["style","text-align:"+ne[ie]]]),(Ie=V.push("inline","",0)).content=oe[ie]?oe[ie].trim():"",Ie.children=[],Ie=V.push("td_close","td",-1);Ie=V.push("tr_close","tr",-1)}return $&&(Ie=V.push("tbody_close","tbody",-1),$[1]=G),Ie=V.push("table_close","table",-1),N[1]=G,V.parentType=re,V.line=G,!0}},8905:He=>{"use strict";He.exports=function(z){var X;z.inlineMode?((X=new z.Token("inline","",0)).content=z.src,X.map=[0,1],X.children=[],z.tokens.push(X)):z.md.block.parse(z.src,z.md,z.env,z.tokens)}},3591:He=>{"use strict";He.exports=function(z){var M,U,O,X=z.tokens;for(U=0,O=X.length;U<O;U++)"inline"===(M=X[U]).type&&z.md.inline.parse(M.content,z.md,z.env,M.children)}},9212:(He,be,z)=>{"use strict";var X=z(3332).arrayReplaceAt;He.exports=function(V){var L,R,j,J,Z,te,ie,Y,G,oe,ye,Ie,ne,N,$,pe,re=V.tokens;if(V.md.options.linkify)for(R=0,j=re.length;R<j;R++)if("inline"===re[R].type&&V.md.linkify.pretest(re[R].content))for(ne=0,L=(J=re[R].children).length-1;L>=0;L--)if("link_close"!==(te=J[L]).type){if("html_inline"===te.type&&(/^<a[>\s]/i.test(te.content)&&ne>0&&ne--,/^<\/a\s*>/i.test(te.content)&&ne++),!(ne>0)&&"text"===te.type&&V.md.linkify.test(te.content)){for(pe=V.md.linkify.match(G=te.content),ie=[],Ie=te.level,ye=0,pe.length>0&&0===pe[0].index&&L>0&&"text_special"===J[L-1].type&&(pe=pe.slice(1)),Y=0;Y<pe.length;Y++)N=V.md.normalizeLink(pe[Y].url),V.md.validateLink(N)&&($=pe[Y].text,$=pe[Y].schema?"mailto:"!==pe[Y].schema||/^mailto:/i.test($)?V.md.normalizeLinkText($):V.md.normalizeLinkText("mailto:"+$).replace(/^mailto:/,""):V.md.normalizeLinkText("http://"+$).replace(/^http:\/\//,""),(oe=pe[Y].index)>ye&&((Z=new V.Token("text","",0)).content=G.slice(ye,oe),Z.level=Ie,ie.push(Z)),(Z=new V.Token("link_open","a",1)).attrs=[["href",N]],Z.level=Ie++,Z.markup="linkify",Z.info="auto",ie.push(Z),(Z=new V.Token("text","",0)).content=$,Z.level=Ie,ie.push(Z),(Z=new V.Token("link_close","a",-1)).level=--Ie,Z.markup="linkify",Z.info="auto",ie.push(Z),ye=pe[Y].lastIndex);ye<G.length&&((Z=new V.Token("text","",0)).content=G.slice(ye),Z.level=Ie,ie.push(Z)),re[R].children=J=X(J,L,ie)}}else for(L--;J[L].level!==te.level&&"link_open"!==J[L].type;)L--}},7398:He=>{"use strict";var be=/\r\n?|\n/g,z=/\0/g;He.exports=function(M){var U;U=(U=M.src.replace(be,"\n")).replace(z,"\ufffd"),M.src=U}},1982:He=>{"use strict";var be=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,z=/\((c|tm|r)\)/i,X=/\((c|tm|r)\)/gi,M={c:"\xa9",r:"\xae",tm:"\u2122"};function U(L,R){return M[R.toLowerCase()]}function O(L){var R,j,J=0;for(R=L.length-1;R>=0;R--)"text"===(j=L[R]).type&&!J&&(j.content=j.content.replace(X,U)),"link_open"===j.type&&"auto"===j.info&&J--,"link_close"===j.type&&"auto"===j.info&&J++}function V(L){var R,j,J=0;for(R=L.length-1;R>=0;R--)"text"===(j=L[R]).type&&!J&&be.test(j.content)&&(j.content=j.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1\u2014").replace(/(^|\s)--(?=\s|$)/gm,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1\u2013")),"link_open"===j.type&&"auto"===j.info&&J--,"link_close"===j.type&&"auto"===j.info&&J++}He.exports=function(R){var j;if(R.md.options.typographer)for(j=R.tokens.length-1;j>=0;j--)"inline"===R.tokens[j].type&&(z.test(R.tokens[j].content)&&O(R.tokens[j].children),be.test(R.tokens[j].content)&&V(R.tokens[j].children))}},8157:(He,be,z)=>{"use strict";var X=z(3332).isWhiteSpace,M=z(3332).isPunctChar,U=z(3332).isMdAsciiPunct,O=/['"]/,V=/['"]/g;function R(J,Z,te){return J.slice(0,Z)+te+J.slice(Z+1)}function j(J,Z){var te,ie,Y,G,oe,ye,Ie,ne,ae,N,$,re,pe,Ne,Ee,xe,ue,Re,Je,ke,qe;for(Je=[],te=0;te<J.length;te++){for(ie=J[te],Ie=J[te].level,ue=Je.length-1;ue>=0&&!(Je[ue].level<=Ie);ue--);if(Je.length=ue+1,"text"===ie.type){oe=0,ye=(Y=ie.content).length;e:for(;oe<ye&&(V.lastIndex=oe,G=V.exec(Y),G);){if(Ee=xe=!0,oe=G.index+1,Re="'"===G[0],ae=32,G.index-1>=0)ae=Y.charCodeAt(G.index-1);else for(ue=te-1;ue>=0&&"softbreak"!==J[ue].type&&"hardbreak"!==J[ue].type;ue--)if(J[ue].content){ae=J[ue].content.charCodeAt(J[ue].content.length-1);break}if(N=32,oe<ye)N=Y.charCodeAt(oe);else for(ue=te+1;ue<J.length&&"softbreak"!==J[ue].type&&"hardbreak"!==J[ue].type;ue++)if(J[ue].content){N=J[ue].content.charCodeAt(0);break}if($=U(ae)||M(String.fromCharCode(ae)),re=U(N)||M(String.fromCharCode(N)),pe=X(ae),(Ne=X(N))?Ee=!1:re&&(pe||$||(Ee=!1)),pe?xe=!1:$&&(Ne||re||(xe=!1)),34===N&&'"'===G[0]&&ae>=48&&ae<=57&&(xe=Ee=!1),Ee&&xe&&(Ee=$,xe=re),Ee||xe){if(xe)for(ue=Je.length-1;ue>=0&&(ne=Je[ue],!(Je[ue].level<Ie));ue--)if(ne.single===Re&&Je[ue].level===Ie){ne=Je[ue],Re?(ke=Z.md.options.quotes[2],qe=Z.md.options.quotes[3]):(ke=Z.md.options.quotes[0],qe=Z.md.options.quotes[1]),ie.content=R(ie.content,G.index,qe),J[ne.token].content=R(J[ne.token].content,ne.pos,ke),oe+=qe.length-1,ne.token===te&&(oe+=ke.length-1),ye=(Y=ie.content).length,Je.length=ue;continue e}Ee?Je.push({token:te,pos:G.index,single:Re,level:Ie}):xe&&Re&&(ie.content=R(ie.content,G.index,"\u2019"))}else Re&&(ie.content=R(ie.content,G.index,"\u2019"))}}}}He.exports=function(Z){var te;if(Z.md.options.typographer)for(te=Z.tokens.length-1;te>=0;te--)"inline"!==Z.tokens[te].type||!O.test(Z.tokens[te].content)||j(Z.tokens[te].children,Z)}},1076:(He,be,z)=>{"use strict";var X=z(6263);function M(U,O,V){this.src=U,this.env=V,this.tokens=[],this.inlineMode=!1,this.md=O}M.prototype.Token=X,He.exports=M},2245:He=>{"use strict";He.exports=function(z){var X,M,U,O,V,L,R=z.tokens;for(X=0,M=R.length;X<M;X++)if("inline"===R[X].type){for(V=(U=R[X].children).length,O=0;O<V;O++)"text_special"===U[O].type&&(U[O].type="text");for(O=L=0;O<V;O++)"text"===U[O].type&&O+1<V&&"text"===U[O+1].type?U[O+1].content=U[O].content+U[O+1].content:(O!==L&&(U[L]=U[O]),L++);O!==L&&(U.length=L)}}},6973:He=>{"use strict";var be=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,z=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;He.exports=function(M,U){var O,V,L,R,j,J,Z=M.pos;if(60!==M.src.charCodeAt(Z))return!1;for(j=M.pos,J=M.posMax;;){if(++Z>=J||60===(R=M.src.charCodeAt(Z)))return!1;if(62===R)break}return O=M.src.slice(j+1,Z),z.test(O)?(V=M.md.normalizeLink(O),!!M.md.validateLink(V)&&(U||((L=M.push("link_open","a",1)).attrs=[["href",V]],L.markup="autolink",L.info="auto",(L=M.push("text","",0)).content=M.md.normalizeLinkText(O),(L=M.push("link_close","a",-1)).markup="autolink",L.info="auto"),M.pos+=O.length+2,!0)):!!be.test(O)&&(V=M.md.normalizeLink("mailto:"+O),!!M.md.validateLink(V)&&(U||((L=M.push("link_open","a",1)).attrs=[["href",V]],L.markup="autolink",L.info="auto",(L=M.push("text","",0)).content=M.md.normalizeLinkText(O),(L=M.push("link_close","a",-1)).markup="autolink",L.info="auto"),M.pos+=O.length+2,!0))}},415:He=>{"use strict";He.exports=function(z,X){var M,U,O,V,L,R,j,J,Z=z.pos;if(96!==z.src.charCodeAt(Z))return!1;for(M=Z,Z++,U=z.posMax;Z<U&&96===z.src.charCodeAt(Z);)Z++;if(j=(O=z.src.slice(M,Z)).length,z.backticksScanned&&(z.backticks[j]||0)<=M)return X||(z.pending+=O),z.pos+=j,!0;for(L=R=Z;-1!==(L=z.src.indexOf("`",R));){for(R=L+1;R<U&&96===z.src.charCodeAt(R);)R++;if((J=R-L)===j)return X||((V=z.push("code_inline","code",0)).markup=O,V.content=z.src.slice(Z,L).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),z.pos=R,!0;z.backticks[J]=L}return z.backticksScanned=!0,X||(z.pending+=O),z.pos+=j,!0}},9269:He=>{"use strict";function be(z,X){var M,U,O,V,L,R,j,J,Z={},te=X.length;if(te){var ie=0,Y=-2,G=[];for(M=0;M<te;M++)if(O=X[M],G.push(0),(X[ie].marker!==O.marker||Y!==O.token-1)&&(ie=M),Y=O.token,O.length=O.length||0,O.close){for(Z.hasOwnProperty(O.marker)||(Z[O.marker]=[-1,-1,-1,-1,-1,-1]),L=Z[O.marker][(O.open?3:0)+O.length%3],R=U=ie-G[ie]-1;U>L;U-=G[U]+1)if((V=X[U]).marker===O.marker&&V.open&&V.end<0&&(j=!1,(V.close||O.open)&&(V.length+O.length)%3==0&&(V.length%3!=0||O.length%3!=0)&&(j=!0),!j)){G[M]=M-U+(J=U>0&&!X[U-1].open?G[U-1]+1:0),G[U]=J,O.open=!1,V.end=M,V.close=!1,R=-1,Y=-2;break}-1!==R&&(Z[O.marker][(O.open?3:0)+(O.length||0)%3]=R)}}}He.exports=function(X){var M,U=X.tokens_meta,O=X.tokens_meta.length;for(be(0,X.delimiters),M=0;M<O;M++)U[M]&&U[M].delimiters&&be(0,U[M].delimiters)}},425:He=>{"use strict";function be(z,X){var M,U,O,V,L,R;for(M=X.length-1;M>=0;M--)(95===(U=X[M]).marker||42===U.marker)&&-1!==U.end&&(O=X[U.end],R=M>0&&X[M-1].end===U.end+1&&X[M-1].marker===U.marker&&X[M-1].token===U.token-1&&X[U.end+1].token===O.token+1,L=String.fromCharCode(U.marker),(V=z.tokens[U.token]).type=R?"strong_open":"em_open",V.tag=R?"strong":"em",V.nesting=1,V.markup=R?L+L:L,V.content="",(V=z.tokens[O.token]).type=R?"strong_close":"em_close",V.tag=R?"strong":"em",V.nesting=-1,V.markup=R?L+L:L,V.content="",R&&(z.tokens[X[M-1].token].content="",z.tokens[X[U.end+1].token].content="",M--))}He.exports.w=function(X,M){var U,O,R=X.src.charCodeAt(X.pos);if(M||95!==R&&42!==R)return!1;for(O=X.scanDelims(X.pos,42===R),U=0;U<O.length;U++)X.push("text","",0).content=String.fromCharCode(R),X.delimiters.push({marker:R,length:O.length,token:X.tokens.length-1,end:-1,open:O.can_open,close:O.can_close});return X.pos+=O.length,!0},He.exports.g=function(X){var M,U=X.tokens_meta,O=X.tokens_meta.length;for(be(X,X.delimiters),M=0;M<O;M++)U[M]&&U[M].delimiters&&be(X,U[M].delimiters)}},3559:(He,be,z)=>{"use strict";var X=z(6798),M=z(3332).has,U=z(3332).isValidEntityCode,O=z(3332).fromCodePoint,V=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,L=/^&([a-z][a-z0-9]{1,31});/i;He.exports=function(j,J){var te,ie,Y,G=j.pos,oe=j.posMax;if(38!==j.src.charCodeAt(G)||G+1>=oe)return!1;if(35===j.src.charCodeAt(G+1)){if(ie=j.src.slice(G).match(V))return J||(te="x"===ie[1][0].toLowerCase()?parseInt(ie[1].slice(1),16):parseInt(ie[1],10),(Y=j.push("text_special","",0)).content=U(te)?O(te):O(65533),Y.markup=ie[0],Y.info="entity"),j.pos+=ie[0].length,!0}else if((ie=j.src.slice(G).match(L))&&M(X,ie[1]))return J||((Y=j.push("text_special","",0)).content=X[ie[1]],Y.markup=ie[0],Y.info="entity"),j.pos+=ie[0].length,!0;return!1}},8763:(He,be,z)=>{"use strict";for(var X=z(3332).isSpace,M=[],U=0;U<256;U++)M.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(O){M[O.charCodeAt(0)]=1}),He.exports=function(V,L){var R,j,J,Z,te,ie=V.pos,Y=V.posMax;if(92!==V.src.charCodeAt(ie)||++ie>=Y)return!1;if(10===(R=V.src.charCodeAt(ie))){for(L||V.push("hardbreak","br",0),ie++;ie<Y&&(R=V.src.charCodeAt(ie),X(R));)ie++;return V.pos=ie,!0}return Z=V.src[ie],R>=55296&&R<=56319&&ie+1<Y&&(j=V.src.charCodeAt(ie+1))>=56320&&j<=57343&&(Z+=V.src[ie+1],ie++),J="\\"+Z,L||((te=V.push("text_special","",0)).content=R<256&&0!==M[R]?Z:J,te.markup=J,te.info="escape"),V.pos=ie+1,!0}},5767:He=>{"use strict";He.exports=function(z){var X,M,U=0,O=z.tokens,V=z.tokens.length;for(X=M=0;X<V;X++)O[X].nesting<0&&U--,O[X].level=U,O[X].nesting>0&&U++,"text"===O[X].type&&X+1<V&&"text"===O[X+1].type?O[X+1].content=O[X].content+O[X+1].content:(X!==M&&(O[M]=O[X]),M++);X!==M&&(O.length=M)}},3722:(He,be,z)=>{"use strict";var X=z(3266).n;He.exports=function(L,R){var j,J,Z,te,ie=L.pos;return!(!L.md.options.html||(Z=L.posMax,60!==L.src.charCodeAt(ie)||ie+2>=Z)||(j=L.src.charCodeAt(ie+1),33!==j&&63!==j&&47!==j&&!function O(V){var L=32|V;return L>=97&&L<=122}(j))||(J=L.src.slice(ie).match(X),!J)||(R||((te=L.push("html_inline","",0)).content=L.src.slice(ie,ie+J[0].length),function M(V){return/^<a[>\s]/i.test(V)}(te.content)&&L.linkLevel++,function U(V){return/^<\/a\s*>/i.test(V)}(te.content)&&L.linkLevel--),L.pos+=J[0].length,0))}},7936:(He,be,z)=>{"use strict";var X=z(3332).normalizeReference,M=z(3332).isSpace;He.exports=function(O,V){var L,R,j,J,Z,te,ie,Y,G,oe,ye,Ie,ne,ae="",N=O.pos,$=O.posMax;if(33!==O.src.charCodeAt(O.pos)||91!==O.src.charCodeAt(O.pos+1)||(te=O.pos+2,(Z=O.md.helpers.parseLinkLabel(O,O.pos+1,!1))<0))return!1;if((ie=Z+1)<$&&40===O.src.charCodeAt(ie)){for(ie++;ie<$&&(R=O.src.charCodeAt(ie),M(R)||10===R);ie++);if(ie>=$)return!1;for(ne=ie,(G=O.md.helpers.parseLinkDestination(O.src,ie,O.posMax)).ok&&(ae=O.md.normalizeLink(G.str),O.md.validateLink(ae)?ie=G.pos:ae=""),ne=ie;ie<$&&(R=O.src.charCodeAt(ie),M(R)||10===R);ie++);if(G=O.md.helpers.parseLinkTitle(O.src,ie,O.posMax),ie<$&&ne!==ie&&G.ok)for(oe=G.str,ie=G.pos;ie<$&&(R=O.src.charCodeAt(ie),M(R)||10===R);ie++);else oe="";if(ie>=$||41!==O.src.charCodeAt(ie))return O.pos=N,!1;ie++}else{if(typeof O.env.references>"u")return!1;if(ie<$&&91===O.src.charCodeAt(ie)?(ne=ie+1,(ie=O.md.helpers.parseLinkLabel(O,ie))>=0?J=O.src.slice(ne,ie++):ie=Z+1):ie=Z+1,J||(J=O.src.slice(te,Z)),!(Y=O.env.references[X(J)]))return O.pos=N,!1;ae=Y.href,oe=Y.title}return V||(j=O.src.slice(te,Z),O.md.inline.parse(j,O.md,O.env,Ie=[]),(ye=O.push("image","img",0)).attrs=L=[["src",ae],["alt",""]],ye.children=Ie,ye.content=j,oe&&L.push(["title",oe])),O.pos=ie,O.posMax=$,!0}},7219:(He,be,z)=>{"use strict";var X=z(3332).normalizeReference,M=z(3332).isSpace;He.exports=function(O,V){var L,R,j,J,Z,te,ie,Y,oe="",ye="",Ie=O.pos,ne=O.posMax,ae=O.pos,N=!0;if(91!==O.src.charCodeAt(O.pos)||(Z=O.pos+1,(J=O.md.helpers.parseLinkLabel(O,O.pos,!0))<0))return!1;if((te=J+1)<ne&&40===O.src.charCodeAt(te)){for(N=!1,te++;te<ne&&(R=O.src.charCodeAt(te),M(R)||10===R);te++);if(te>=ne)return!1;if(ae=te,(ie=O.md.helpers.parseLinkDestination(O.src,te,O.posMax)).ok){for(oe=O.md.normalizeLink(ie.str),O.md.validateLink(oe)?te=ie.pos:oe="",ae=te;te<ne&&(R=O.src.charCodeAt(te),M(R)||10===R);te++);if(ie=O.md.helpers.parseLinkTitle(O.src,te,O.posMax),te<ne&&ae!==te&&ie.ok)for(ye=ie.str,te=ie.pos;te<ne&&(R=O.src.charCodeAt(te),M(R)||10===R);te++);}(te>=ne||41!==O.src.charCodeAt(te))&&(N=!0),te++}if(N){if(typeof O.env.references>"u")return!1;if(te<ne&&91===O.src.charCodeAt(te)?(ae=te+1,(te=O.md.helpers.parseLinkLabel(O,te))>=0?j=O.src.slice(ae,te++):te=J+1):te=J+1,j||(j=O.src.slice(Z,J)),!(Y=O.env.references[X(j)]))return O.pos=Ie,!1;oe=Y.href,ye=Y.title}return V||(O.pos=Z,O.posMax=J,O.push("link_open","a",1).attrs=L=[["href",oe]],ye&&L.push(["title",ye]),O.linkLevel++,O.md.inline.tokenize(O),O.linkLevel--,O.push("link_close","a",-1)),O.pos=te,O.posMax=ne,!0}},6234:He=>{"use strict";var be=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;He.exports=function(X,M){var U,O,V,L,R,j,J,Z;return!(!X.md.options.linkify||X.linkLevel>0||(U=X.pos,O=X.posMax,U+3>O)||58!==X.src.charCodeAt(U)||47!==X.src.charCodeAt(U+1)||47!==X.src.charCodeAt(U+2)||(V=X.pending.match(be),!V)||(L=V[1],R=X.md.linkify.matchAtStart(X.src.slice(U-L.length)),!R)||(j=R.url,j=j.replace(/\*+$/,""),J=X.md.normalizeLink(j),!X.md.validateLink(J))||(M||(X.pending=X.pending.slice(0,-L.length),(Z=X.push("link_open","a",1)).attrs=[["href",J]],Z.markup="linkify",Z.info="auto",(Z=X.push("text","",0)).content=X.md.normalizeLinkText(j),(Z=X.push("link_close","a",-1)).markup="linkify",Z.info="auto"),X.pos+=j.length-L.length,0))}},2921:(He,be,z)=>{"use strict";var X=z(3332).isSpace;He.exports=function(U,O){var V,L,R,j=U.pos;if(10!==U.src.charCodeAt(j))return!1;if(V=U.pending.length-1,L=U.posMax,!O)if(V>=0&&32===U.pending.charCodeAt(V))if(V>=1&&32===U.pending.charCodeAt(V-1)){for(R=V-1;R>=1&&32===U.pending.charCodeAt(R-1);)R--;U.pending=U.pending.slice(0,R),U.push("hardbreak","br",0)}else U.pending=U.pending.slice(0,-1),U.push("softbreak","br",0);else U.push("softbreak","br",0);for(j++;j<L&&X(U.src.charCodeAt(j));)j++;return U.pos=j,!0}},630:(He,be,z)=>{"use strict";var X=z(6263),M=z(3332).isWhiteSpace,U=z(3332).isPunctChar,O=z(3332).isMdAsciiPunct;function V(L,R,j,J){this.src=L,this.env=j,this.md=R,this.tokens=J,this.tokens_meta=Array(J.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}V.prototype.pushPending=function(){var L=new X("text","",0);return L.content=this.pending,L.level=this.pendingLevel,this.tokens.push(L),this.pending="",L},V.prototype.push=function(L,R,j){this.pending&&this.pushPending();var J=new X(L,R,j),Z=null;return j<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),J.level=this.level,j>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],Z={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(J),this.tokens_meta.push(Z),J},V.prototype.scanDelims=function(L,R){var J,Z,te,ie,Y,G,oe,ye,Ie,j=L,ne=!0,ae=!0,N=this.posMax,$=this.src.charCodeAt(L);for(J=L>0?this.src.charCodeAt(L-1):32;j<N&&this.src.charCodeAt(j)===$;)j++;return te=j-L,Z=j<N?this.src.charCodeAt(j):32,oe=O(J)||U(String.fromCharCode(J)),Ie=O(Z)||U(String.fromCharCode(Z)),G=M(J),(ye=M(Z))?ne=!1:Ie&&(G||oe||(ne=!1)),G?ae=!1:oe&&(ye||Ie||(ae=!1)),R?(ie=ne,Y=ae):(ie=ne&&(!ae||oe),Y=ae&&(!ne||Ie)),{can_open:ie,can_close:Y,length:te}},V.prototype.Token=X,He.exports=V},8165:He=>{"use strict";function be(z,X){var M,U,O,V,L,R=[],j=X.length;for(M=0;M<j;M++)126===(O=X[M]).marker&&-1!==O.end&&(V=X[O.end],(L=z.tokens[O.token]).type="s_open",L.tag="s",L.nesting=1,L.markup="~~",L.content="",(L=z.tokens[V.token]).type="s_close",L.tag="s",L.nesting=-1,L.markup="~~",L.content="","text"===z.tokens[V.token-1].type&&"~"===z.tokens[V.token-1].content&&R.push(V.token-1));for(;R.length;){for(U=(M=R.pop())+1;U<z.tokens.length&&"s_close"===z.tokens[U].type;)U++;M!==--U&&(L=z.tokens[U],z.tokens[U]=z.tokens[M],z.tokens[M]=L)}}He.exports.w=function(X,M){var U,O,L,R,J=X.src.charCodeAt(X.pos);if(M||126!==J||(L=(O=X.scanDelims(X.pos,!0)).length,R=String.fromCharCode(J),L<2))return!1;for(L%2&&(X.push("text","",0).content=R,L--),U=0;U<L;U+=2)X.push("text","",0).content=R+R,X.delimiters.push({marker:J,length:0,token:X.tokens.length-1,end:-1,open:O.can_open,close:O.can_close});return X.pos+=O.length,!0},He.exports.g=function(X){var M,U=X.tokens_meta,O=X.tokens_meta.length;for(be(X,X.delimiters),M=0;M<O;M++)U[M]&&U[M].delimiters&&be(X,U[M].delimiters)}},1767:He=>{"use strict";function be(z){switch(z){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}He.exports=function(X,M){for(var U=X.pos;U<X.posMax&&!be(X.src.charCodeAt(U));)U++;return U!==X.pos&&(M||(X.pending+=X.src.slice(X.pos,U)),X.pos=U,!0)}},6263:He=>{"use strict";function be(z,X,M){this.type=z,this.tag=X,this.attrs=null,this.map=null,this.nesting=M,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}be.prototype.attrIndex=function(X){var M,U,O;if(!this.attrs)return-1;for(U=0,O=(M=this.attrs).length;U<O;U++)if(M[U][0]===X)return U;return-1},be.prototype.attrPush=function(X){this.attrs?this.attrs.push(X):this.attrs=[X]},be.prototype.attrSet=function(X,M){var U=this.attrIndex(X),O=[X,M];U<0?this.attrPush(O):this.attrs[U]=O},be.prototype.attrGet=function(X){var M=this.attrIndex(X),U=null;return M>=0&&(U=this.attrs[M][1]),U},be.prototype.attrJoin=function(X,M){var U=this.attrIndex(X);U<0?this.attrPush([X,M]):this.attrs[U][1]=this.attrs[U][1]+" "+M},He.exports=be},9801:He=>{"use strict";var be={};function X(M,U){var O;return"string"!=typeof U&&(U=X.defaultChars),O=function z(M){var U,O,V=be[M];if(V)return V;for(V=be[M]=[],U=0;U<128;U++)O=String.fromCharCode(U),V.push(O);for(U=0;U<M.length;U++)V[O=M.charCodeAt(U)]="%"+("0"+O.toString(16).toUpperCase()).slice(-2);return V}(U),M.replace(/(%[a-f0-9]{2})+/gi,function(V){var L,R,j,J,Z,te,ie,Y="";for(L=0,R=V.length;L<R;L+=3)(j=parseInt(V.slice(L+1,L+3),16))<128?Y+=O[j]:192==(224&j)&&L+3<R&&128==(192&(J=parseInt(V.slice(L+4,L+6),16)))?(Y+=(ie=j<<6&1984|63&J)<128?"\ufffd\ufffd":String.fromCharCode(ie),L+=3):224==(240&j)&&L+6<R&&(J=parseInt(V.slice(L+4,L+6),16),Z=parseInt(V.slice(L+7,L+9),16),128==(192&J)&&128==(192&Z))?(Y+=(ie=j<<12&61440|J<<6&4032|63&Z)<2048||ie>=55296&&ie<=57343?"\ufffd\ufffd\ufffd":String.fromCharCode(ie),L+=6):240==(248&j)&&L+9<R&&(J=parseInt(V.slice(L+4,L+6),16),Z=parseInt(V.slice(L+7,L+9),16),te=parseInt(V.slice(L+10,L+12),16),128==(192&J)&&128==(192&Z)&&128==(192&te))?((ie=j<<18&1835008|J<<12&258048|Z<<6&4032|63&te)<65536||ie>1114111?Y+="\ufffd\ufffd\ufffd\ufffd":(ie-=65536,Y+=String.fromCharCode(55296+(ie>>10),56320+(1023&ie))),L+=9):Y+="\ufffd";return Y})}X.defaultChars=";/?:@&=+$,#",X.componentChars="",He.exports=X},526:He=>{"use strict";var be={};function X(M,U,O){var V,L,R,j,J,Z="";for("string"!=typeof U&&(O=U,U=X.defaultChars),typeof O>"u"&&(O=!0),J=function z(M){var U,O,V=be[M];if(V)return V;for(V=be[M]=[],U=0;U<128;U++)O=String.fromCharCode(U),/^[0-9a-z]$/i.test(O)?V.push(O):V.push("%"+("0"+U.toString(16).toUpperCase()).slice(-2));for(U=0;U<M.length;U++)V[M.charCodeAt(U)]=M[U];return V}(U),V=0,L=M.length;V<L;V++)if(R=M.charCodeAt(V),O&&37===R&&V+2<L&&/^[0-9a-f]{2}$/i.test(M.slice(V+1,V+3)))Z+=M.slice(V,V+3),V+=2;else if(R<128)Z+=J[R];else if(R>=55296&&R<=57343){if(R>=55296&&R<=56319&&V+1<L&&(j=M.charCodeAt(V+1))>=56320&&j<=57343){Z+=encodeURIComponent(M[V]+M[V+1]),V++;continue}Z+="%EF%BF%BD"}else Z+=encodeURIComponent(M[V]);return Z}X.defaultChars=";/?:@&=+$,-_.!~*'()#",X.componentChars="-_.!~*'()",He.exports=X},381:He=>{"use strict";He.exports=function(z){var X="";return X+=z.protocol||"",X+=z.slashes?"//":"",X+=z.auth?z.auth+"@":"",z.hostname&&-1!==z.hostname.indexOf(":")?X+="["+z.hostname+"]":X+=z.hostname||"",X+=z.port?":"+z.port:"",X+=z.pathname||"",(X+=z.search||"")+(z.hash||"")}},7214:(He,be,z)=>{"use strict";He.exports.encode=z(526),He.exports.decode=z(9801),He.exports.format=z(381),He.exports.parse=z(3850)},3850:He=>{"use strict";function be(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var z=/^([a-z0-9.+-]+:)/i,X=/:[0-9]*$/,M=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,O=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),V=["'"].concat(O),L=["%","/","?",";","#"].concat(V),R=["/","?","#"],J=/^[+a-z0-9A-Z_-]{0,63}$/,Z=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,te={javascript:!0,"javascript:":!0},ie={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};be.prototype.parse=function(G,oe){var ye,Ie,ne,ae,N,$=G;if($=$.trim(),!oe&&1===G.split("#").length){var re=M.exec($);if(re)return this.pathname=re[1],re[2]&&(this.search=re[2]),this}var pe=z.exec($);if(pe&&(ne=(pe=pe[0]).toLowerCase(),this.protocol=pe,$=$.substr(pe.length)),(oe||pe||$.match(/^\/\/[^@\/]+@[^@\/]+/))&&(N="//"===$.substr(0,2))&&!(pe&&te[pe])&&($=$.substr(2),this.slashes=!0),!te[pe]&&(N||pe&&!ie[pe])){var Ee,xe,Ne=-1;for(ye=0;ye<R.length;ye++)-1!==(ae=$.indexOf(R[ye]))&&(-1===Ne||ae<Ne)&&(Ne=ae);for(-1!==(xe=-1===Ne?$.lastIndexOf("@"):$.lastIndexOf("@",Ne))&&(Ee=$.slice(0,xe),$=$.slice(xe+1),this.auth=Ee),Ne=-1,ye=0;ye<L.length;ye++)-1!==(ae=$.indexOf(L[ye]))&&(-1===Ne||ae<Ne)&&(Ne=ae);-1===Ne&&(Ne=$.length),":"===$[Ne-1]&&Ne--;var ue=$.slice(0,Ne);$=$.slice(Ne),this.parseHost(ue),this.hostname=this.hostname||"";var Re="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Re){var Je=this.hostname.split(/\./);for(ye=0,Ie=Je.length;ye<Ie;ye++){var ke=Je[ye];if(ke&&!ke.match(J)){for(var qe="",ot=0,yt=ke.length;ot<yt;ot++)ke.charCodeAt(ot)>127?qe+="x":qe+=ke[ot];if(!qe.match(J)){var hn=Je.slice(0,ye),Be=Je.slice(ye+1),lt=ke.match(Z);lt&&(hn.push(lt[1]),Be.unshift(lt[2])),Be.length&&($=Be.join(".")+$),this.hostname=hn.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),Re&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var Ve=$.indexOf("#");-1!==Ve&&(this.hash=$.substr(Ve),$=$.slice(0,Ve));var Ge=$.indexOf("?");return-1!==Ge&&(this.search=$.substr(Ge),$=$.slice(0,Ge)),$&&(this.pathname=$),ie[ne]&&this.hostname&&!this.pathname&&(this.pathname=""),this},be.prototype.parseHost=function(G){var oe=X.exec(G);oe&&(":"!==(oe=oe[0])&&(this.port=oe.substr(1)),G=G.substr(0,G.length-oe.length)),G&&(this.hostname=G)},He.exports=function Y(G,oe){if(G&&G instanceof be)return G;var ye=new be;return ye.parse(G,oe),ye}},1462:(He,be,z)=>{"use strict";He.exports=z(6371)},744:He=>{"use strict";const z="[^\\\\/]",R="(?:\\/|$)",j="(?:^|\\/)",J=`\\.{1,2}${R}`,Ie={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:R,DOTS_SLASH:J,NO_DOT:"(?!\\.)",NO_DOTS:`(?!${j}${J})`,NO_DOT_SLASH:`(?!\\.{0,1}${R})`,NO_DOTS_SLASH:`(?!${J})`,QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:j,SEP:"/"},ne={...Ie,SLASH_LITERAL:"[\\\\/]",QMARK:z,STAR:`${z}*?`,DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)",SEP:"\\"};He.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars:N=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${N.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:N=>!0===N?ne:Ie}},1302:(He,be,z)=>{"use strict";const X=z(744),M=z(7688),{MAX_LENGTH:U,POSIX_REGEX_SOURCE:O,REGEX_NON_SPECIAL_CHARS:V,REGEX_SPECIAL_CHARS_BACKREF:L,REPLACEMENTS:R}=X,j=(te,ie)=>{if("function"==typeof ie.expandRange)return ie.expandRange(...te,ie);te.sort();const Y=`[${te.join("-")}]`;try{new RegExp(Y)}catch{return te.map(oe=>M.escapeRegex(oe)).join("..")}return Y},J=(te,ie)=>`Missing ${te}: "${ie}" - use "\\\\${ie}" to match literal characters`,Z=(te,ie)=>{if("string"!=typeof te)throw new TypeError("Expected a string");te=R[te]||te;const Y={...ie},G="number"==typeof Y.maxLength?Math.min(U,Y.maxLength):U;let oe=te.length;if(oe>G)throw new SyntaxError(`Input length: ${oe}, exceeds maximum allowed length: ${G}`);const ye={type:"bos",value:"",output:Y.prepend||""},Ie=[ye],ne=Y.capture?"":"?:",ae=X.globChars(Y.windows),N=X.extglobChars(ae),{DOT_LITERAL:$,PLUS_LITERAL:re,SLASH_LITERAL:pe,ONE_CHAR:Ne,DOTS_SLASH:Ee,NO_DOT:xe,NO_DOT_SLASH:ue,NO_DOTS_SLASH:Re,QMARK:Je,QMARK_NO_DOT:ke,STAR:qe,START_ANCHOR:ot}=ae,yt=xt=>`(${ne}(?:(?!${ot}${xt.dot?Ee:$}).)*?)`,hn=Y.dot?"":xe,Be=Y.dot?Je:ke;let lt=!0===Y.bash?yt(Y):qe;Y.capture&&(lt=`(${lt})`),"boolean"==typeof Y.noext&&(Y.noextglob=Y.noext);const Ve={input:te,index:-1,start:0,dot:!0===Y.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:Ie};te=M.removePrefix(te,Ve),oe=te.length;const Ge=[],bt=[],wt=[];let gt,st=ye;const Me=()=>Ve.index===oe-1,ce=Ve.peek=(xt=1)=>te[Ve.index+xt],At=Ve.advance=()=>te[++Ve.index],Ft=()=>te.slice(Ve.index+1),Tn=(xt="",un=0)=>{Ve.consumed+=xt,Ve.index+=un},$n=xt=>{Ve.output+=null!=xt.output?xt.output:xt.value,Tn(xt.value)},Dt=()=>{let xt=1;for(;"!"===ce()&&("("!==ce(2)||"?"===ce(3));)At(),Ve.start++,xt++;return xt%2!=0&&(Ve.negated=!0,Ve.start++,!0)},kt=xt=>{Ve[xt]++,wt.push(xt)},ln=xt=>{Ve[xt]--,wt.pop()},Ye=xt=>{if("globstar"===st.type){const un=Ve.braces>0&&("comma"===xt.type||"brace"===xt.type),_n=!0===xt.extglob||Ge.length&&("pipe"===xt.type||"paren"===xt.type);"slash"!==xt.type&&"paren"!==xt.type&&!un&&!_n&&(Ve.output=Ve.output.slice(0,-st.output.length),st.type="star",st.value="*",st.output=lt,Ve.output+=st.output)}if(Ge.length&&"paren"!==xt.type&&!N[xt.value]&&(Ge[Ge.length-1].inner+=xt.value),(xt.value||xt.output)&&$n(xt),st&&"text"===st.type&&"text"===xt.type)return st.value+=xt.value,void(st.output=(st.output||"")+xt.value);xt.prev=st,Ie.push(xt),st=xt},De=(xt,un)=>{const _n={...N[un],conditions:1,inner:""};_n.prev=st,_n.parens=Ve.parens,_n.output=Ve.output;const Jn=(Y.capture?"(":"")+_n.open;kt("parens"),Ye({type:xt,value:un,output:Ve.output?"":Ne}),Ye({type:"paren",extglob:!0,value:At(),output:Jn}),Ge.push(_n)},ze=xt=>{let un=xt.close+(Y.capture?")":"");if("negate"===xt.type){let _n=lt;xt.inner&&xt.inner.length>1&&xt.inner.includes("/")&&(_n=yt(Y)),(_n!==lt||Me()||/^\)+$/.test(Ft()))&&(un=xt.close=`)$))${_n}`),"bos"===xt.prev.type&&Me()&&(Ve.negatedExtglob=!0)}Ye({type:"paren",extglob:!0,value:gt,output:un}),ln("parens")};if(!1!==Y.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(te)){let xt=!1,un=te.replace(L,(_n,Jn,Dr,ps,kr,Wo)=>"\\"===ps?(xt=!0,_n):"?"===ps?Jn?Jn+ps+(kr?Je.repeat(kr.length):""):0===Wo?Be+(kr?Je.repeat(kr.length):""):Je.repeat(Dr.length):"."===ps?$.repeat(Dr.length):"*"===ps?Jn?Jn+ps+(kr?lt:""):lt:Jn?_n:`\\${_n}`);return!0===xt&&(un=!0===Y.unescape?un.replace(/\\/g,""):un.replace(/\\+/g,_n=>_n.length%2==0?"\\\\":_n?"\\":"")),un===te&&!0===Y.contains?(Ve.output=te,Ve):(Ve.output=M.wrapOutput(un,Ve,ie),Ve)}for(;!Me();){if(gt=At(),"\0"===gt)continue;if("\\"===gt){const _n=ce();if("/"===_n&&!0!==Y.bash||"."===_n||";"===_n)continue;if(!_n){gt+="\\",Ye({type:"text",value:gt});continue}const Jn=/^\\+/.exec(Ft());let Dr=0;if(Jn&&Jn[0].length>2&&(Dr=Jn[0].length,Ve.index+=Dr,Dr%2!=0&&(gt+="\\")),!0===Y.unescape?gt=At()||"":gt+=At()||"",0===Ve.brackets){Ye({type:"text",value:gt});continue}}if(Ve.brackets>0&&("]"!==gt||"["===st.value||"[^"===st.value)){if(!1!==Y.posix&&":"===gt){const _n=st.value.slice(1);if(_n.includes("[")&&(st.posix=!0,_n.includes(":"))){const Jn=st.value.lastIndexOf("["),Dr=st.value.slice(0,Jn),ps=st.value.slice(Jn+2),kr=O[ps];if(kr){st.value=Dr+kr,Ve.backtrack=!0,At(),!ye.output&&1===Ie.indexOf(st)&&(ye.output=Ne);continue}}}("["===gt&&":"!==ce()||"-"===gt&&"]"===ce())&&(gt=`\\${gt}`),"]"===gt&&("["===st.value||"[^"===st.value)&&(gt=`\\${gt}`),!0===Y.posix&&"!"===gt&&"["===st.value&&(gt="^"),st.value+=gt,$n({value:gt});continue}if(1===Ve.quotes&&'"'!==gt){gt=M.escapeRegex(gt),st.value+=gt,$n({value:gt});continue}if('"'===gt){Ve.quotes=1===Ve.quotes?0:1,!0===Y.keepQuotes&&Ye({type:"text",value:gt});continue}if("("===gt){kt("parens"),Ye({type:"paren",value:gt});continue}if(")"===gt){if(0===Ve.parens&&!0===Y.strictBrackets)throw new SyntaxError(J("opening","("));const _n=Ge[Ge.length-1];if(_n&&Ve.parens===_n.parens+1){ze(Ge.pop());continue}Ye({type:"paren",value:gt,output:Ve.parens?")":"\\)"}),ln("parens");continue}if("["===gt){if(!0!==Y.nobracket&&Ft().includes("]"))kt("brackets");else{if(!0!==Y.nobracket&&!0===Y.strictBrackets)throw new SyntaxError(J("closing","]"));gt=`\\${gt}`}Ye({type:"bracket",value:gt});continue}if("]"===gt){if(!0===Y.nobracket||st&&"bracket"===st.type&&1===st.value.length){Ye({type:"text",value:gt,output:`\\${gt}`});continue}if(0===Ve.brackets){if(!0===Y.strictBrackets)throw new SyntaxError(J("opening","["));Ye({type:"text",value:gt,output:`\\${gt}`});continue}ln("brackets");const _n=st.value.slice(1);if(!0!==st.posix&&"^"===_n[0]&&!_n.includes("/")&&(gt=`/${gt}`),st.value+=gt,$n({value:gt}),!1===Y.literalBrackets||M.hasRegexChars(_n))continue;const Jn=M.escapeRegex(st.value);if(Ve.output=Ve.output.slice(0,-st.value.length),!0===Y.literalBrackets){Ve.output+=Jn,st.value=Jn;continue}st.value=`(${ne}${Jn}|${st.value})`,Ve.output+=st.value;continue}if("{"===gt&&!0!==Y.nobrace){kt("braces");const _n={type:"brace",value:gt,output:"(",outputIndex:Ve.output.length,tokensIndex:Ve.tokens.length};bt.push(_n),Ye(_n);continue}if("}"===gt){const _n=bt[bt.length-1];if(!0===Y.nobrace||!_n){Ye({type:"text",value:gt,output:gt});continue}let Jn=")";if(!0===_n.dots){const Dr=Ie.slice(),ps=[];for(let kr=Dr.length-1;kr>=0&&(Ie.pop(),"brace"!==Dr[kr].type);kr--)"dots"!==Dr[kr].type&&ps.unshift(Dr[kr].value);Jn=j(ps,Y),Ve.backtrack=!0}if(!0!==_n.comma&&!0!==_n.dots){const Dr=Ve.output.slice(0,_n.outputIndex),ps=Ve.tokens.slice(_n.tokensIndex);_n.value=_n.output="\\{",gt=Jn="\\}",Ve.output=Dr;for(const kr of ps)Ve.output+=kr.output||kr.value}Ye({type:"brace",value:gt,output:Jn}),ln("braces"),bt.pop();continue}if("|"===gt){Ge.length>0&&Ge[Ge.length-1].conditions++,Ye({type:"text",value:gt});continue}if(","===gt){let _n=gt;const Jn=bt[bt.length-1];Jn&&"braces"===wt[wt.length-1]&&(Jn.comma=!0,_n="|"),Ye({type:"comma",value:gt,output:_n});continue}if("/"===gt){if("dot"===st.type&&Ve.index===Ve.start+1){Ve.start=Ve.index+1,Ve.consumed="",Ve.output="",Ie.pop(),st=ye;continue}Ye({type:"slash",value:gt,output:pe});continue}if("."===gt){if(Ve.braces>0&&"dot"===st.type){"."===st.value&&(st.output=$);const _n=bt[bt.length-1];st.type="dots",st.output+=gt,st.value+=gt,_n.dots=!0;continue}if(Ve.braces+Ve.parens===0&&"bos"!==st.type&&"slash"!==st.type){Ye({type:"text",value:gt,output:$});continue}Ye({type:"dot",value:gt,output:$});continue}if("?"===gt){if((!st||"("!==st.value)&&!0!==Y.noextglob&&"("===ce()&&"?"!==ce(2)){De("qmark",gt);continue}if(st&&"paren"===st.type){const Jn=ce();let Dr=gt;if("<"===Jn&&!M.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===st.value&&!/[!=<:]/.test(Jn)||"<"===Jn&&!/<([!=]|\w+>)/.test(Ft()))&&(Dr=`\\${gt}`),Ye({type:"text",value:gt,output:Dr});continue}if(!0!==Y.dot&&("slash"===st.type||"bos"===st.type)){Ye({type:"qmark",value:gt,output:ke});continue}Ye({type:"qmark",value:gt,output:Je});continue}if("!"===gt){if(!0!==Y.noextglob&&"("===ce()&&("?"!==ce(2)||!/[!=<:]/.test(ce(3)))){De("negate",gt);continue}if(!0!==Y.nonegate&&0===Ve.index){Dt();continue}}if("+"===gt){if(!0!==Y.noextglob&&"("===ce()&&"?"!==ce(2)){De("plus",gt);continue}if(st&&"("===st.value||!1===Y.regex){Ye({type:"plus",value:gt,output:re});continue}if(st&&("bracket"===st.type||"paren"===st.type||"brace"===st.type)||Ve.parens>0){Ye({type:"plus",value:gt});continue}Ye({type:"plus",value:re});continue}if("@"===gt){if(!0!==Y.noextglob&&"("===ce()&&"?"!==ce(2)){Ye({type:"at",extglob:!0,value:gt,output:""});continue}Ye({type:"text",value:gt});continue}if("*"!==gt){("$"===gt||"^"===gt)&&(gt=`\\${gt}`);const _n=V.exec(Ft());_n&&(gt+=_n[0],Ve.index+=_n[0].length),Ye({type:"text",value:gt});continue}if(st&&("globstar"===st.type||!0===st.star)){st.type="star",st.star=!0,st.value+=gt,st.output=lt,Ve.backtrack=!0,Ve.globstar=!0,Tn(gt);continue}let xt=Ft();if(!0!==Y.noextglob&&/^\([^?]/.test(xt)){De("star",gt);continue}if("star"===st.type){if(!0===Y.noglobstar){Tn(gt);continue}const _n=st.prev,Jn=_n.prev,Dr="slash"===_n.type||"bos"===_n.type,ps=Jn&&("star"===Jn.type||"globstar"===Jn.type);if(!0===Y.bash&&(!Dr||xt[0]&&"/"!==xt[0])){Ye({type:"star",value:gt,output:""});continue}const kr=Ve.braces>0&&("comma"===_n.type||"brace"===_n.type),Wo=Ge.length&&("pipe"===_n.type||"paren"===_n.type);if(!Dr&&"paren"!==_n.type&&!kr&&!Wo){Ye({type:"star",value:gt,output:""});continue}for(;"/**"===xt.slice(0,3);){const tr=te[Ve.index+4];if(tr&&"/"!==tr)break;xt=xt.slice(3),Tn("/**",3)}if("bos"===_n.type&&Me()){st.type="globstar",st.value+=gt,st.output=yt(Y),Ve.output=st.output,Ve.globstar=!0,Tn(gt);continue}if("slash"===_n.type&&"bos"!==_n.prev.type&&!ps&&Me()){Ve.output=Ve.output.slice(0,-(_n.output+st.output).length),_n.output=`(?:${_n.output}`,st.type="globstar",st.output=yt(Y)+(Y.strictSlashes?")":"|$)"),st.value+=gt,Ve.globstar=!0,Ve.output+=_n.output+st.output,Tn(gt);continue}if("slash"===_n.type&&"bos"!==_n.prev.type&&"/"===xt[0]){const tr=void 0!==xt[1]?"|$":"";Ve.output=Ve.output.slice(0,-(_n.output+st.output).length),_n.output=`(?:${_n.output}`,st.type="globstar",st.output=`${yt(Y)}${pe}|${pe}${tr})`,st.value+=gt,Ve.output+=_n.output+st.output,Ve.globstar=!0,Tn(gt+At()),Ye({type:"slash",value:"/",output:""});continue}if("bos"===_n.type&&"/"===xt[0]){st.type="globstar",st.value+=gt,st.output=`(?:^|${pe}|${yt(Y)}${pe})`,Ve.output=st.output,Ve.globstar=!0,Tn(gt+At()),Ye({type:"slash",value:"/",output:""});continue}Ve.output=Ve.output.slice(0,-st.output.length),st.type="globstar",st.output=yt(Y),st.value+=gt,Ve.output+=st.output,Ve.globstar=!0,Tn(gt);continue}const un={type:"star",value:gt,output:lt};!0!==Y.bash?!st||"bracket"!==st.type&&"paren"!==st.type||!0!==Y.regex?((Ve.index===Ve.start||"slash"===st.type||"dot"===st.type)&&("dot"===st.type?(Ve.output+=ue,st.output+=ue):!0===Y.dot?(Ve.output+=Re,st.output+=Re):(Ve.output+=hn,st.output+=hn),"*"!==ce()&&(Ve.output+=Ne,st.output+=Ne)),Ye(un)):(un.output=gt,Ye(un)):(un.output=".*?",("bos"===st.type||"slash"===st.type)&&(un.output=hn+un.output),Ye(un))}for(;Ve.brackets>0;){if(!0===Y.strictBrackets)throw new SyntaxError(J("closing","]"));Ve.output=M.escapeLast(Ve.output,"["),ln("brackets")}for(;Ve.parens>0;){if(!0===Y.strictBrackets)throw new SyntaxError(J("closing",")"));Ve.output=M.escapeLast(Ve.output,"("),ln("parens")}for(;Ve.braces>0;){if(!0===Y.strictBrackets)throw new SyntaxError(J("closing","}"));Ve.output=M.escapeLast(Ve.output,"{"),ln("braces")}if(!0!==Y.strictSlashes&&("star"===st.type||"bracket"===st.type)&&Ye({type:"maybe_slash",value:"",output:`${pe}?`}),!0===Ve.backtrack){Ve.output="";for(const xt of Ve.tokens)Ve.output+=null!=xt.output?xt.output:xt.value,xt.suffix&&(Ve.output+=xt.suffix)}return Ve};Z.fastpaths=(te,ie)=>{const Y={...ie},G="number"==typeof Y.maxLength?Math.min(U,Y.maxLength):U,oe=te.length;if(oe>G)throw new SyntaxError(`Input length: ${oe}, exceeds maximum allowed length: ${G}`);te=R[te]||te;const{DOT_LITERAL:ye,SLASH_LITERAL:Ie,ONE_CHAR:ne,DOTS_SLASH:ae,NO_DOT:N,NO_DOTS:$,NO_DOTS_SLASH:re,STAR:pe,START_ANCHOR:Ne}=X.globChars(Y.windows),Ee=Y.dot?$:N,xe=Y.dot?re:N,ue=Y.capture?"":"?:";let Je=!0===Y.bash?".*?":pe;Y.capture&&(Je=`(${Je})`);const ke=hn=>!0===hn.noglobstar?Je:`(${ue}(?:(?!${Ne}${hn.dot?ae:ye}).)*?)`,qe=hn=>{switch(hn){case"*":return`${Ee}${ne}${Je}`;case".*":return`${ye}${ne}${Je}`;case"*.*":return`${Ee}${Je}${ye}${ne}${Je}`;case"*/*":return`${Ee}${Je}${Ie}${ne}${xe}${Je}`;case"**":return Ee+ke(Y);case"**/*":return`(?:${Ee}${ke(Y)}${Ie})?${xe}${ne}${Je}`;case"**/*.*":return`(?:${Ee}${ke(Y)}${Ie})?${xe}${Je}${ye}${ne}${Je}`;case"**/.*":return`(?:${Ee}${ke(Y)}${Ie})?${ye}${ne}${Je}`;default:{const Be=/^(.*?)\.(\w+)$/.exec(hn);if(!Be)return;const lt=qe(Be[1]);return lt?lt+ye+Be[2]:void 0}}},ot=M.removePrefix(te,{negated:!1,prefix:""});let yt=qe(ot);return yt&&!0!==Y.strictSlashes&&(yt+=`${Ie}?`),yt},He.exports=Z},6371:(He,be,z)=>{"use strict";const X=z(2484),M=z(1302),U=z(7688),O=z(744),L=(R,j,J=!1)=>{if(Array.isArray(R)){const Ie=R.map(ae=>L(ae,j,J));return ae=>{for(const N of Ie){const $=N(ae);if($)return $}return!1}}const Z=(R=>R&&"object"==typeof R&&!Array.isArray(R))(R)&&R.tokens&&R.input;if(""===R||"string"!=typeof R&&!Z)throw new TypeError("Expected pattern to be a non-empty string");const te=j||{},ie=te.windows,Y=Z?L.compileRe(R,j):L.makeRe(R,j,!1,!0),G=Y.state;delete Y.state;let oe=()=>!1;if(te.ignore){const Ie={...j,ignore:null,onMatch:null,onResult:null};oe=L(te.ignore,Ie,J)}const ye=(Ie,ne=!1)=>{const{isMatch:ae,match:N,output:$}=L.test(Ie,Y,j,{glob:R,posix:ie}),re={glob:R,state:G,regex:Y,posix:ie,input:Ie,output:$,match:N,isMatch:ae};return"function"==typeof te.onResult&&te.onResult(re),!1===ae?(re.isMatch=!1,!!ne&&re):oe(Ie)?("function"==typeof te.onIgnore&&te.onIgnore(re),re.isMatch=!1,!!ne&&re):("function"==typeof te.onMatch&&te.onMatch(re),!ne||re)};return J&&(ye.state=G),ye};L.test=(R,j,J,{glob:Z,posix:te}={})=>{if("string"!=typeof R)throw new TypeError("Expected input to be a string");if(""===R)return{isMatch:!1,output:""};const ie=J||{},Y=ie.format||(te?U.toPosixSlashes:null);let G=R===Z,oe=G&&Y?Y(R):R;return!1===G&&(oe=Y?Y(R):R,G=oe===Z),(!1===G||!0===ie.capture)&&(G=!0===ie.matchBase||!0===ie.basename?L.matchBase(R,j,J,te):j.exec(oe)),{isMatch:Boolean(G),match:G,output:oe}},L.matchBase=(R,j,J)=>(j instanceof RegExp?j:L.makeRe(j,J)).test(U.basename(R)),L.isMatch=(R,j,J)=>L(j,J)(R),L.parse=(R,j)=>Array.isArray(R)?R.map(J=>L.parse(J,j)):M(R,{...j,fastpaths:!1}),L.scan=(R,j)=>X(R,j),L.compileRe=(R,j,J=!1,Z=!1)=>{if(!0===J)return R.output;const te=j||{};let G=`${te.contains?"":"^"}(?:${R.output})${te.contains?"":"$"}`;R&&!0===R.negated&&(G=`^(?!${G}).*$`);const oe=L.toRegex(G,j);return!0===Z&&(oe.state=R),oe},L.makeRe=(R,j,J=!1,Z=!1)=>{if(!R||"string"!=typeof R)throw new TypeError("Expected a non-empty string");const te=j||{};let G,ie={negated:!1,fastpaths:!0},Y="";return R.startsWith("./")&&(R=R.slice(2),Y=ie.prefix="./"),!1!==te.fastpaths&&("."===R[0]||"*"===R[0])&&(G=M.fastpaths(R,j)),void 0===G?(ie=M(R,j),ie.prefix=Y+(ie.prefix||"")):ie.output=G,L.compileRe(ie,j,J,Z)},L.toRegex=(R,j)=>{try{const J=j||{};return new RegExp(R,J.flags||(J.nocase?"i":""))}catch(J){if(j&&!0===j.debug)throw J;return/$^/}},L.constants=O,He.exports=L},2484:(He,be,z)=>{"use strict";const X=z(7688),{CHAR_ASTERISK:M,CHAR_AT:U,CHAR_BACKWARD_SLASH:O,CHAR_COMMA:V,CHAR_DOT:L,CHAR_EXCLAMATION_MARK:R,CHAR_FORWARD_SLASH:j,CHAR_LEFT_CURLY_BRACE:J,CHAR_LEFT_PARENTHESES:Z,CHAR_LEFT_SQUARE_BRACKET:te,CHAR_PLUS:ie,CHAR_QUESTION_MARK:Y,CHAR_RIGHT_CURLY_BRACE:G,CHAR_RIGHT_PARENTHESES:oe,CHAR_RIGHT_SQUARE_BRACKET:ye}=z(744),Ie=N=>N===j||N===O,ne=N=>{!0!==N.isPrefix&&(N.depth=N.isGlobstar?1/0:1)};He.exports=(N,$)=>{const re=$||{},pe=N.length-1,Ne=!0===re.parts||!0===re.scanToEnd,Ee=[],xe=[],ue=[];let gt,Me,Re=N,Je=-1,ke=0,qe=0,ot=!1,yt=!1,hn=!1,Be=!1,lt=!1,Ve=!1,Ge=!1,bt=!1,wt=!1,st=0,ce={value:"",depth:0,isGlob:!1};const At=()=>Je>=pe,Tn=()=>(gt=Me,Re.charCodeAt(++Je));for(;Je<pe;){let Ye;if(Me=Tn(),Me!==O){if(!0===Ve||Me===J){for(st++;!0!==At()&&(Me=Tn());)if(Me!==O)if(Me!==J){if(!0!==Ve&&Me===L&&(Me=Tn())===L){if(ot=ce.isBrace=!0,hn=ce.isGlob=!0,wt=!0,!0===Ne)continue;break}if(!0!==Ve&&Me===V){if(ot=ce.isBrace=!0,hn=ce.isGlob=!0,wt=!0,!0===Ne)continue;break}if(Me===G&&(st--,0===st)){Ve=!1,ot=ce.isBrace=!0,wt=!0;break}}else st++;else Ge=ce.backslashes=!0,Tn();if(!0===Ne)continue;break}if(Me!==j){if(!0!==re.noext&&1==(Me===ie||Me===U||Me===M||Me===Y||Me===R)&&Re.charCodeAt(Je+1)===Z){if(hn=ce.isGlob=!0,Be=ce.isExtglob=!0,wt=!0,!0===Ne){for(;!0!==At()&&(Me=Tn());)if(Me!==O){if(Me===oe){hn=ce.isGlob=!0,wt=!0;break}}else Ge=ce.backslashes=!0,Me=Tn();continue}break}if(Me===M){if(gt===M&&(lt=ce.isGlobstar=!0),hn=ce.isGlob=!0,wt=!0,!0===Ne)continue;break}if(Me===Y){if(hn=ce.isGlob=!0,wt=!0,!0===Ne)continue;break}if(Me===te)for(;!0!==At()&&(Ye=Tn());)if(Ye!==O){if(Ye===ye){if(yt=ce.isBracket=!0,hn=ce.isGlob=!0,wt=!0,!0===Ne)continue;break}}else Ge=ce.backslashes=!0,Tn();if(!0===re.nonegate||Me!==R||Je!==ke){if(!0!==re.noparen&&Me===Z){if(hn=ce.isGlob=!0,!0===Ne){for(;!0!==At()&&(Me=Tn());)if(Me!==Z){if(Me===oe){wt=!0;break}}else Ge=ce.backslashes=!0,Me=Tn();continue}break}if(!0===hn){if(wt=!0,!0===Ne)continue;break}}else bt=ce.negated=!0,ke++}else{if(Ee.push(Je),xe.push(ce),ce={value:"",depth:0,isGlob:!1},!0===wt)continue;if(gt===L&&Je===ke+1){ke+=2;continue}qe=Je+1}}else Ge=ce.backslashes=!0,Me=Tn(),Me===J&&(Ve=!0)}!0===re.noext&&(Be=!1,hn=!1);let $n=Re,Dt="",kt="";ke>0&&(Dt=Re.slice(0,ke),Re=Re.slice(ke),qe-=ke),$n&&!0===hn&&qe>0?($n=Re.slice(0,qe),kt=Re.slice(qe)):!0===hn?($n="",kt=Re):$n=Re,$n&&""!==$n&&"/"!==$n&&$n!==Re&&Ie($n.charCodeAt($n.length-1))&&($n=$n.slice(0,-1)),!0===re.unescape&&(kt&&(kt=X.removeBackslashes(kt)),$n&&!0===Ge&&($n=X.removeBackslashes($n)));const ln={prefix:Dt,input:N,start:ke,base:$n,glob:kt,isBrace:ot,isBracket:yt,isGlob:hn,isExtglob:Be,isGlobstar:lt,negated:bt};if(!0===re.tokens&&(ln.maxDepth=0,Ie(Me)||xe.push(ce),ln.tokens=xe),!0===re.parts||!0===re.tokens){let Ye;for(let De=0;De<Ee.length;De++){const xt=Ee[De],un=N.slice(Ye?Ye+1:ke,xt);re.tokens&&(0===De&&0!==ke?(xe[De].isPrefix=!0,xe[De].value=Dt):xe[De].value=un,ne(xe[De]),ln.maxDepth+=xe[De].depth),(0!==De||""!==un)&&ue.push(un),Ye=xt}if(Ye&&Ye+1<N.length){const De=N.slice(Ye+1);ue.push(De),re.tokens&&(xe[xe.length-1].value=De,ne(xe[xe.length-1]),ln.maxDepth+=xe[xe.length-1].depth)}ln.slashes=Ee,ln.parts=ue}return ln}},7688:(He,be,z)=>{"use strict";const{REGEX_BACKSLASH:X,REGEX_REMOVE_BACKSLASH:M,REGEX_SPECIAL_CHARS:U,REGEX_SPECIAL_CHARS_GLOBAL:O}=z(744);be.isObject=V=>null!==V&&"object"==typeof V&&!Array.isArray(V),be.hasRegexChars=V=>U.test(V),be.isRegexChar=V=>1===V.length&&be.hasRegexChars(V),be.escapeRegex=V=>V.replace(O,"\\$1"),be.toPosixSlashes=V=>V.replace(X,"/"),be.removeBackslashes=V=>V.replace(M,L=>"\\"===L?"":L),be.supportsLookbehinds=()=>{const V=process.version.slice(1).split(".").map(Number);return 3===V.length&&V[0]>=9||8===V[0]&&V[1]>=10},be.escapeLast=(V,L,R)=>{const j=V.lastIndexOf(L,R);return-1===j?V:"\\"===V[j-1]?be.escapeLast(V,L,j-1):`${V.slice(0,j)}\\${V.slice(j)}`},be.removePrefix=(V,L={})=>{let R=V;return R.startsWith("./")&&(R=R.slice(2),L.prefix="./"),R},be.wrapOutput=(V,L={},R={})=>{let Z=`${R.contains?"":"^"}(?:${V})${R.contains?"":"$"}`;return!0===L.negated&&(Z=`(?:^(?!${Z}).*$)`),Z},be.basename=(V,{windows:L}={})=>L?V.replace(/[\\/]$/,"").replace(/.*[\\/]/,""):V.replace(/\/$/,"").replace(/.*\//,"")},4879:(He,be,z)=>{"use strict";z.r(be),z.d(be,{decode:()=>Ee,default:()=>ke,encode:()=>xe,toASCII:()=>Re,toUnicode:()=>ue,ucs2decode:()=>N,ucs2encode:()=>$});const X=2147483647,M=36,Z=/^xn--/,te=/[^\0-\x7E]/,ie=/[\x2E\u3002\uFF0E\uFF61]/g,Y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},oe=Math.floor,ye=String.fromCharCode;function Ie(qe){throw new RangeError(Y[qe])}function ae(qe,ot){const yt=qe.split("@");let hn="";yt.length>1&&(hn=yt[0]+"@",qe=yt[1]);const lt=function ne(qe,ot){const yt=[];let hn=qe.length;for(;hn--;)yt[hn]=ot(qe[hn]);return yt}((qe=qe.replace(ie,".")).split("."),ot).join(".");return hn+lt}function N(qe){const ot=[];let yt=0;const hn=qe.length;for(;yt<hn;){const Be=qe.charCodeAt(yt++);if(Be>=55296&&Be<=56319&&yt<hn){const lt=qe.charCodeAt(yt++);56320==(64512&lt)?ot.push(((1023&Be)<<10)+(1023&lt)+65536):(ot.push(Be),yt--)}else ot.push(Be)}return ot}const $=qe=>String.fromCodePoint(...qe),re=function(qe){return qe-48<10?qe-22:qe-65<26?qe-65:qe-97<26?qe-97:M},pe=function(qe,ot){return qe+22+75*(qe<26)-((0!=ot)<<5)},Ne=function(qe,ot,yt){let hn=0;for(qe=yt?oe(qe/700):qe>>1,qe+=oe(qe/ot);qe>455;hn+=M)qe=oe(qe/35);return oe(hn+36*qe/(qe+38))},Ee=function(qe){const ot=[],yt=qe.length;let hn=0,Be=128,lt=72,Ve=qe.lastIndexOf("-");Ve<0&&(Ve=0);for(let Ge=0;Ge<Ve;++Ge)qe.charCodeAt(Ge)>=128&&Ie("not-basic"),ot.push(qe.charCodeAt(Ge));for(let Ge=Ve>0?Ve+1:0;Ge<yt;){let bt=hn;for(let st=1,gt=M;;gt+=M){Ge>=yt&&Ie("invalid-input");const Me=re(qe.charCodeAt(Ge++));(Me>=M||Me>oe((X-hn)/st))&&Ie("overflow"),hn+=Me*st;const ce=gt<=lt?1:gt>=lt+26?26:gt-lt;if(Me<ce)break;const At=M-ce;st>oe(X/At)&&Ie("overflow"),st*=At}const wt=ot.length+1;lt=Ne(hn-bt,wt,0==bt),oe(hn/wt)>X-Be&&Ie("overflow"),Be+=oe(hn/wt),hn%=wt,ot.splice(hn++,0,Be)}return String.fromCodePoint(...ot)},xe=function(qe){const ot=[];let yt=(qe=N(qe)).length,hn=128,Be=0,lt=72;for(const bt of qe)bt<128&&ot.push(ye(bt));let Ve=ot.length,Ge=Ve;for(Ve&&ot.push("-");Ge<yt;){let bt=X;for(const st of qe)st>=hn&&st<bt&&(bt=st);const wt=Ge+1;bt-hn>oe((X-Be)/wt)&&Ie("overflow"),Be+=(bt-hn)*wt,hn=bt;for(const st of qe)if(st<hn&&++Be>X&&Ie("overflow"),st==hn){let gt=Be;for(let Me=M;;Me+=M){const ce=Me<=lt?1:Me>=lt+26?26:Me-lt;if(gt<ce)break;const At=gt-ce,Ft=M-ce;ot.push(ye(pe(ce+At%Ft,0))),gt=oe(At/Ft)}ot.push(ye(pe(gt,0))),lt=Ne(Be,wt,Ge==Ve),Be=0,++Ge}++Be,++hn}return ot.join("")},ue=function(qe){return ae(qe,function(ot){return Z.test(ot)?Ee(ot.slice(4).toLowerCase()):ot})},Re=function(qe){return ae(qe,function(ot){return te.test(ot)?"xn--"+xe(ot):ot})},ke={version:"2.1.0",ucs2:{decode:N,encode:$},decode:Ee,encode:xe,toASCII:Re,toUnicode:ue}},891:He=>{"use strict";var z={};function X(L,R,j){j||(j=Error);var Z=function(te){function ie(Y,G,oe){return te.call(this,function J(te,ie,Y){return"string"==typeof R?R:R(te,ie,Y)}(Y,G,oe))||this}return function be(L,R){L.prototype=Object.create(R.prototype),L.prototype.constructor=L,L.__proto__=R}(ie,te),ie}(j);Z.prototype.name=j.name,Z.prototype.code=L,z[L]=Z}function M(L,R){if(Array.isArray(L)){var j=L.length;return L=L.map(function(J){return String(J)}),j>2?"one of ".concat(R," ").concat(L.slice(0,j-1).join(", "),", or ")+L[j-1]:2===j?"one of ".concat(R," ").concat(L[0]," or ").concat(L[1]):"of ".concat(R," ").concat(L[0])}return"of ".concat(R," ").concat(String(L))}X("ERR_INVALID_OPT_VALUE",function(L,R){return'The value "'+R+'" is invalid for option "'+L+'"'},TypeError),X("ERR_INVALID_ARG_TYPE",function(L,R,j){var J,Z;if("string"==typeof R&&function U(L,R,j){return L.substr(!j||j<0?0:+j,R.length)===R}(R,"not ")?(J="must not be",R=R.replace(/^not /,"")):J="must be",function O(L,R,j){return(void 0===j||j>L.length)&&(j=L.length),L.substring(j-R.length,j)===R}(L," argument"))Z="The ".concat(L," ").concat(J," ").concat(M(R,"type"));else{var te=function V(L,R,j){return"number"!=typeof j&&(j=0),!(j+R.length>L.length)&&-1!==L.indexOf(R,j)}(L,".")?"property":"argument";Z='The "'.concat(L,'" ').concat(te," ").concat(J," ").concat(M(R,"type"))}return Z+". Received type ".concat(typeof j)},TypeError),X("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),X("ERR_METHOD_NOT_IMPLEMENTED",function(L){return"The "+L+" method is not implemented"}),X("ERR_STREAM_PREMATURE_CLOSE","Premature close"),X("ERR_STREAM_DESTROYED",function(L){return"Cannot call "+L+" after a stream was destroyed"}),X("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),X("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),X("ERR_STREAM_WRITE_AFTER_END","write after end"),X("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),X("ERR_UNKNOWN_ENCODING",function(L){return"Unknown encoding: "+L},TypeError),X("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),He.exports.q=z},1339:(He,be,z)=>{"use strict";var X=Object.keys||function(Z){var te=[];for(var ie in Z)te.push(ie);return te};He.exports=R;var M=z(3154),U=z(520);z(3894)(R,M);for(var O=X(U.prototype),V=0;V<O.length;V++){var L=O[V];R.prototype[L]||(R.prototype[L]=U.prototype[L])}function R(Z){if(!(this instanceof R))return new R(Z);M.call(this,Z),U.call(this,Z),this.allowHalfOpen=!0,Z&&(!1===Z.readable&&(this.readable=!1),!1===Z.writable&&(this.writable=!1),!1===Z.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",j)))}function j(){this._writableState.ended||process.nextTick(J,this)}function J(Z){Z.end()}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(te){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=te,this._writableState.destroyed=te)}})},6071:(He,be,z)=>{"use strict";He.exports=M;var X=z(6025);function M(U){if(!(this instanceof M))return new M(U);X.call(this,U)}z(3894)(M,X),M.prototype._transform=function(U,O,V){V(null,U)}},3154:(He,be,z)=>{"use strict";var X;He.exports=ue,ue.ReadableState=xe,z(9069);var Z,U=function(kt,ln){return kt.listeners(ln).length},O=z(4970),V=z(3172).Buffer,L=global.Uint8Array||function(){},J=z(4616);Z=J&&J.debuglog?J.debuglog("stream"):function(){};var N,$,re,te=z(5019),ie=z(1920),G=z(7102).getHighWaterMark,oe=z(891).q,ye=oe.ERR_INVALID_ARG_TYPE,Ie=oe.ERR_STREAM_PUSH_AFTER_EOF,ne=oe.ERR_METHOD_NOT_IMPLEMENTED,ae=oe.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;z(3894)(ue,O);var pe=ie.errorOrDestroy,Ne=["error","close","destroy","pause","resume"];function xe(Dt,kt,ln){X=X||z(1339),"boolean"!=typeof ln&&(ln=kt instanceof X),this.objectMode=!!(Dt=Dt||{}).objectMode,ln&&(this.objectMode=this.objectMode||!!Dt.readableObjectMode),this.highWaterMark=G(this,Dt,"readableHighWaterMark",ln),this.buffer=new te,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==Dt.emitClose,this.autoDestroy=!!Dt.autoDestroy,this.destroyed=!1,this.defaultEncoding=Dt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Dt.encoding&&(N||(N=z(3054).s),this.decoder=new N(Dt.encoding),this.encoding=Dt.encoding)}function ue(Dt){if(X=X||z(1339),!(this instanceof ue))return new ue(Dt);this._readableState=new xe(Dt,this,this instanceof X),this.readable=!0,Dt&&("function"==typeof Dt.read&&(this._read=Dt.read),"function"==typeof Dt.destroy&&(this._destroy=Dt.destroy)),O.call(this)}function Re(Dt,kt,ln,Ye,De){Z("readableAddChunk",kt);var xt,ze=Dt._readableState;if(null===kt)ze.reading=!1,function hn(Dt,kt){if(Z("onEofChunk"),!kt.ended){if(kt.decoder){var ln=kt.decoder.end();ln&&ln.length&&(kt.buffer.push(ln),kt.length+=kt.objectMode?1:ln.length)}kt.ended=!0,kt.sync?Be(Dt):(kt.needReadable=!1,kt.emittedReadable||(kt.emittedReadable=!0,lt(Dt)))}}(Dt,ze);else if(De||(xt=function ke(Dt,kt){var ln;return!function j(Dt){return V.isBuffer(Dt)||Dt instanceof L}(kt)&&"string"!=typeof kt&&void 0!==kt&&!Dt.objectMode&&(ln=new ye("chunk",["string","Buffer","Uint8Array"],kt)),ln}(ze,kt)),xt)pe(Dt,xt);else if(ze.objectMode||kt&&kt.length>0)if("string"!=typeof kt&&!ze.objectMode&&Object.getPrototypeOf(kt)!==V.prototype&&(kt=function R(Dt){return V.from(Dt)}(kt)),Ye)ze.endEmitted?pe(Dt,new ae):Je(Dt,ze,kt,!0);else if(ze.ended)pe(Dt,new Ie);else{if(ze.destroyed)return!1;ze.reading=!1,ze.decoder&&!ln?(kt=ze.decoder.write(kt),ze.objectMode||0!==kt.length?Je(Dt,ze,kt,!1):Ve(Dt,ze)):Je(Dt,ze,kt,!1)}else Ye||(ze.reading=!1,Ve(Dt,ze));return!ze.ended&&(ze.length<ze.highWaterMark||0===ze.length)}function Je(Dt,kt,ln,Ye){kt.flowing&&0===kt.length&&!kt.sync?(kt.awaitDrain=0,Dt.emit("data",ln)):(kt.length+=kt.objectMode?1:ln.length,Ye?kt.buffer.unshift(ln):kt.buffer.push(ln),kt.needReadable&&Be(Dt)),Ve(Dt,kt)}Object.defineProperty(ue.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(kt){!this._readableState||(this._readableState.destroyed=kt)}}),ue.prototype.destroy=ie.destroy,ue.prototype._undestroy=ie.undestroy,ue.prototype._destroy=function(Dt,kt){kt(Dt)},ue.prototype.push=function(Dt,kt){var Ye,ln=this._readableState;return ln.objectMode?Ye=!0:"string"==typeof Dt&&((kt=kt||ln.defaultEncoding)!==ln.encoding&&(Dt=V.from(Dt,kt),kt=""),Ye=!0),Re(this,Dt,kt,!1,Ye)},ue.prototype.unshift=function(Dt){return Re(this,Dt,null,!0,!1)},ue.prototype.isPaused=function(){return!1===this._readableState.flowing},ue.prototype.setEncoding=function(Dt){N||(N=z(3054).s);var kt=new N(Dt);this._readableState.decoder=kt,this._readableState.encoding=this._readableState.decoder.encoding;for(var ln=this._readableState.buffer.head,Ye="";null!==ln;)Ye+=kt.write(ln.data),ln=ln.next;return this._readableState.buffer.clear(),""!==Ye&&this._readableState.buffer.push(Ye),this._readableState.length=Ye.length,this};var qe=1073741824;function yt(Dt,kt){return Dt<=0||0===kt.length&&kt.ended?0:kt.objectMode?1:Dt!=Dt?kt.flowing&&kt.length?kt.buffer.head.data.length:kt.length:(Dt>kt.highWaterMark&&(kt.highWaterMark=function ot(Dt){return Dt>=qe?Dt=qe:(Dt--,Dt|=Dt>>>1,Dt|=Dt>>>2,Dt|=Dt>>>4,Dt|=Dt>>>8,Dt|=Dt>>>16,Dt++),Dt}(Dt)),Dt<=kt.length?Dt:kt.ended?kt.length:(kt.needReadable=!0,0))}function Be(Dt){var kt=Dt._readableState;Z("emitReadable",kt.needReadable,kt.emittedReadable),kt.needReadable=!1,kt.emittedReadable||(Z("emitReadable",kt.flowing),kt.emittedReadable=!0,process.nextTick(lt,Dt))}function lt(Dt){var kt=Dt._readableState;Z("emitReadable_",kt.destroyed,kt.length,kt.ended),!kt.destroyed&&(kt.length||kt.ended)&&(Dt.emit("readable"),kt.emittedReadable=!1),kt.needReadable=!kt.flowing&&!kt.ended&&kt.length<=kt.highWaterMark,ce(Dt)}function Ve(Dt,kt){kt.readingMore||(kt.readingMore=!0,process.nextTick(Ge,Dt,kt))}function Ge(Dt,kt){for(;!kt.reading&&!kt.ended&&(kt.length<kt.highWaterMark||kt.flowing&&0===kt.length);){var ln=kt.length;if(Z("maybeReadMore read 0"),Dt.read(0),ln===kt.length)break}kt.readingMore=!1}function wt(Dt){var kt=Dt._readableState;kt.readableListening=Dt.listenerCount("readable")>0,kt.resumeScheduled&&!kt.paused?kt.flowing=!0:Dt.listenerCount("data")>0&&Dt.resume()}function st(Dt){Z("readable nexttick read 0"),Dt.read(0)}function Me(Dt,kt){Z("resume",kt.reading),kt.reading||Dt.read(0),kt.resumeScheduled=!1,Dt.emit("resume"),ce(Dt),kt.flowing&&!kt.reading&&Dt.read(0)}function ce(Dt){var kt=Dt._readableState;for(Z("flow",kt.flowing);kt.flowing&&null!==Dt.read(););}function At(Dt,kt){return 0===kt.length?null:(kt.objectMode?ln=kt.buffer.shift():!Dt||Dt>=kt.length?(ln=kt.decoder?kt.buffer.join(""):1===kt.buffer.length?kt.buffer.first():kt.buffer.concat(kt.length),kt.buffer.clear()):ln=kt.buffer.consume(Dt,kt.decoder),ln);var ln}function Ft(Dt){var kt=Dt._readableState;Z("endReadable",kt.endEmitted),kt.endEmitted||(kt.ended=!0,process.nextTick(Tn,kt,Dt))}function Tn(Dt,kt){if(Z("endReadableNT",Dt.endEmitted,Dt.length),!Dt.endEmitted&&0===Dt.length&&(Dt.endEmitted=!0,kt.readable=!1,kt.emit("end"),Dt.autoDestroy)){var ln=kt._writableState;(!ln||ln.autoDestroy&&ln.finished)&&kt.destroy()}}function $n(Dt,kt){for(var ln=0,Ye=Dt.length;ln<Ye;ln++)if(Dt[ln]===kt)return ln;return-1}ue.prototype.read=function(Dt){Z("read",Dt),Dt=parseInt(Dt,10);var kt=this._readableState,ln=Dt;if(0!==Dt&&(kt.emittedReadable=!1),0===Dt&&kt.needReadable&&((0!==kt.highWaterMark?kt.length>=kt.highWaterMark:kt.length>0)||kt.ended))return Z("read: emitReadable",kt.length,kt.ended),0===kt.length&&kt.ended?Ft(this):Be(this),null;if(0===(Dt=yt(Dt,kt))&&kt.ended)return 0===kt.length&&Ft(this),null;var De,Ye=kt.needReadable;return Z("need readable",Ye),(0===kt.length||kt.length-Dt<kt.highWaterMark)&&Z("length less than watermark",Ye=!0),kt.ended||kt.reading?Z("reading or ended",Ye=!1):Ye&&(Z("do read"),kt.reading=!0,kt.sync=!0,0===kt.length&&(kt.needReadable=!0),this._read(kt.highWaterMark),kt.sync=!1,kt.reading||(Dt=yt(ln,kt))),null===(De=Dt>0?At(Dt,kt):null)?(kt.needReadable=kt.length<=kt.highWaterMark,Dt=0):(kt.length-=Dt,kt.awaitDrain=0),0===kt.length&&(kt.ended||(kt.needReadable=!0),ln!==Dt&&kt.ended&&Ft(this)),null!==De&&this.emit("data",De),De},ue.prototype._read=function(Dt){pe(this,new ne("_read()"))},ue.prototype.pipe=function(Dt,kt){var ln=this,Ye=this._readableState;switch(Ye.pipesCount){case 0:Ye.pipes=Dt;break;case 1:Ye.pipes=[Ye.pipes,Dt];break;default:Ye.pipes.push(Dt)}Ye.pipesCount+=1,Z("pipe count=%d opts=%j",Ye.pipesCount,kt);var ze=kt&&!1===kt.end||Dt===process.stdout||Dt===process.stderr?il:un;function un(){Z("onend"),Dt.end()}Ye.endEmitted?process.nextTick(ze):ln.once("end",ze),Dt.on("unpipe",function xt($l,ql){Z("onunpipe"),$l===ln&&ql&&!1===ql.hasUnpiped&&(ql.hasUnpiped=!0,function Dr(){Z("cleanup"),Dt.removeListener("close",Wo),Dt.removeListener("finish",tr),Dt.removeListener("drain",_n),Dt.removeListener("error",kr),Dt.removeListener("unpipe",xt),ln.removeListener("end",un),ln.removeListener("end",il),ln.removeListener("data",ps),Jn=!0,Ye.awaitDrain&&(!Dt._writableState||Dt._writableState.needDrain)&&_n()}())});var _n=function bt(Dt){return function(){var ln=Dt._readableState;Z("pipeOnDrain",ln.awaitDrain),ln.awaitDrain&&ln.awaitDrain--,0===ln.awaitDrain&&U(Dt,"data")&&(ln.flowing=!0,ce(Dt))}}(ln);Dt.on("drain",_n);var Jn=!1;function ps($l){Z("ondata");var ql=Dt.write($l);Z("dest.write",ql),!1===ql&&((1===Ye.pipesCount&&Ye.pipes===Dt||Ye.pipesCount>1&&-1!==$n(Ye.pipes,Dt))&&!Jn&&(Z("false write response, pause",Ye.awaitDrain),Ye.awaitDrain++),ln.pause())}function kr($l){Z("onerror",$l),il(),Dt.removeListener("error",kr),0===U(Dt,"error")&&pe(Dt,$l)}function Wo(){Dt.removeListener("finish",tr),il()}function tr(){Z("onfinish"),Dt.removeListener("close",Wo),il()}function il(){Z("unpipe"),ln.unpipe(Dt)}return ln.on("data",ps),function Ee(Dt,kt,ln){if("function"==typeof Dt.prependListener)return Dt.prependListener(kt,ln);Dt._events&&Dt._events[kt]?Array.isArray(Dt._events[kt])?Dt._events[kt].unshift(ln):Dt._events[kt]=[ln,Dt._events[kt]]:Dt.on(kt,ln)}(Dt,"error",kr),Dt.once("close",Wo),Dt.once("finish",tr),Dt.emit("pipe",ln),Ye.flowing||(Z("pipe resume"),ln.resume()),Dt},ue.prototype.unpipe=function(Dt){var kt=this._readableState,ln={hasUnpiped:!1};if(0===kt.pipesCount)return this;if(1===kt.pipesCount)return Dt&&Dt!==kt.pipes||(Dt||(Dt=kt.pipes),kt.pipes=null,kt.pipesCount=0,kt.flowing=!1,Dt&&Dt.emit("unpipe",this,ln)),this;if(!Dt){var Ye=kt.pipes,De=kt.pipesCount;kt.pipes=null,kt.pipesCount=0,kt.flowing=!1;for(var ze=0;ze<De;ze++)Ye[ze].emit("unpipe",this,{hasUnpiped:!1});return this}var xt=$n(kt.pipes,Dt);return-1===xt||(kt.pipes.splice(xt,1),kt.pipesCount-=1,1===kt.pipesCount&&(kt.pipes=kt.pipes[0]),Dt.emit("unpipe",this,ln)),this},ue.prototype.addListener=ue.prototype.on=function(Dt,kt){var ln=O.prototype.on.call(this,Dt,kt),Ye=this._readableState;return"data"===Dt?(Ye.readableListening=this.listenerCount("readable")>0,!1!==Ye.flowing&&this.resume()):"readable"===Dt&&!Ye.endEmitted&&!Ye.readableListening&&(Ye.readableListening=Ye.needReadable=!0,Ye.flowing=!1,Ye.emittedReadable=!1,Z("on readable",Ye.length,Ye.reading),Ye.length?Be(this):Ye.reading||process.nextTick(st,this)),ln},ue.prototype.removeListener=function(Dt,kt){var ln=O.prototype.removeListener.call(this,Dt,kt);return"readable"===Dt&&process.nextTick(wt,this),ln},ue.prototype.removeAllListeners=function(Dt){var kt=O.prototype.removeAllListeners.apply(this,arguments);return("readable"===Dt||void 0===Dt)&&process.nextTick(wt,this),kt},ue.prototype.resume=function(){var Dt=this._readableState;return Dt.flowing||(Z("resume"),Dt.flowing=!Dt.readableListening,function gt(Dt,kt){kt.resumeScheduled||(kt.resumeScheduled=!0,process.nextTick(Me,Dt,kt))}(this,Dt)),Dt.paused=!1,this},ue.prototype.pause=function(){return Z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(Z("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},ue.prototype.wrap=function(Dt){var kt=this,ln=this._readableState,Ye=!1;for(var De in Dt.on("end",function(){if(Z("wrapped end"),ln.decoder&&!ln.ended){var xt=ln.decoder.end();xt&&xt.length&&kt.push(xt)}kt.push(null)}),Dt.on("data",function(xt){Z("wrapped data"),ln.decoder&&(xt=ln.decoder.write(xt)),ln.objectMode&&null==xt||!(ln.objectMode||xt&&xt.length)||kt.push(xt)||(Ye=!0,Dt.pause())}),Dt)void 0===this[De]&&"function"==typeof Dt[De]&&(this[De]=function(un){return function(){return Dt[un].apply(Dt,arguments)}}(De));for(var ze=0;ze<Ne.length;ze++)Dt.on(Ne[ze],this.emit.bind(this,Ne[ze]));return this._read=function(xt){Z("wrapped _read",xt),Ye&&(Ye=!1,Dt.resume())},this},"function"==typeof Symbol&&(ue.prototype[Symbol.asyncIterator]=function(){return void 0===$&&($=z(3872)),$(this)}),Object.defineProperty(ue.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ue.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ue.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(kt){this._readableState&&(this._readableState.flowing=kt)}}),ue._fromList=At,Object.defineProperty(ue.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(ue.from=function(Dt,kt){return void 0===re&&(re=z(7412)),re(ue,Dt,kt)})},6025:(He,be,z)=>{"use strict";He.exports=j;var X=z(891).q,M=X.ERR_METHOD_NOT_IMPLEMENTED,U=X.ERR_MULTIPLE_CALLBACK,O=X.ERR_TRANSFORM_ALREADY_TRANSFORMING,V=X.ERR_TRANSFORM_WITH_LENGTH_0,L=z(1339);function R(te,ie){var Y=this._transformState;Y.transforming=!1;var G=Y.writecb;if(null===G)return this.emit("error",new U);Y.writechunk=null,Y.writecb=null,null!=ie&&this.push(ie),G(te);var oe=this._readableState;oe.reading=!1,(oe.needReadable||oe.length<oe.highWaterMark)&&this._read(oe.highWaterMark)}function j(te){if(!(this instanceof j))return new j(te);L.call(this,te),this._transformState={afterTransform:R.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,te&&("function"==typeof te.transform&&(this._transform=te.transform),"function"==typeof te.flush&&(this._flush=te.flush)),this.on("prefinish",J)}function J(){var te=this;"function"!=typeof this._flush||this._readableState.destroyed?Z(this,null,null):this._flush(function(ie,Y){Z(te,ie,Y)})}function Z(te,ie,Y){if(ie)return te.emit("error",ie);if(null!=Y&&te.push(Y),te._writableState.length)throw new V;if(te._transformState.transforming)throw new O;return te.push(null)}z(3894)(j,L),j.prototype.push=function(te,ie){return this._transformState.needTransform=!1,L.prototype.push.call(this,te,ie)},j.prototype._transform=function(te,ie,Y){Y(new M("_transform()"))},j.prototype._write=function(te,ie,Y){var G=this._transformState;if(G.writecb=Y,G.writechunk=te,G.writeencoding=ie,!G.transforming){var oe=this._readableState;(G.needTransform||oe.needReadable||oe.length<oe.highWaterMark)&&this._read(oe.highWaterMark)}},j.prototype._read=function(te){var ie=this._transformState;null===ie.writechunk||ie.transforming?ie.needTransform=!0:(ie.transforming=!0,this._transform(ie.writechunk,ie.writeencoding,ie.afterTransform))},j.prototype._destroy=function(te,ie){L.prototype._destroy.call(this,te,function(Y){ie(Y)})}},520:(He,be,z)=>{"use strict";function M(ce){var At=this;this.next=null,this.entry=null,this.finish=function(){!function Me(ce,At,Ft){var Tn=ce.entry;for(ce.entry=null;Tn;){var $n=Tn.callback;At.pendingcb--,$n(Ft),Tn=Tn.next}At.corkedRequestsFree.next=ce}(At,ce)}}var U;He.exports=xe,xe.WritableState=Ne;var Ee,O={deprecate:z(3532)},V=z(4970),L=z(3172).Buffer,R=global.Uint8Array||function(){},Z=z(1920),ie=z(7102).getHighWaterMark,Y=z(891).q,G=Y.ERR_INVALID_ARG_TYPE,oe=Y.ERR_METHOD_NOT_IMPLEMENTED,ye=Y.ERR_MULTIPLE_CALLBACK,Ie=Y.ERR_STREAM_CANNOT_PIPE,ne=Y.ERR_STREAM_DESTROYED,ae=Y.ERR_STREAM_NULL_VALUES,N=Y.ERR_STREAM_WRITE_AFTER_END,$=Y.ERR_UNKNOWN_ENCODING,re=Z.errorOrDestroy;function pe(){}function Ne(ce,At,Ft){U=U||z(1339),"boolean"!=typeof Ft&&(Ft=At instanceof U),this.objectMode=!!(ce=ce||{}).objectMode,Ft&&(this.objectMode=this.objectMode||!!ce.writableObjectMode),this.highWaterMark=ie(this,ce,"writableHighWaterMark",Ft),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===ce.decodeStrings),this.defaultEncoding=ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($n){!function hn(ce,At){var Ft=ce._writableState,Tn=Ft.sync,$n=Ft.writecb;if("function"!=typeof $n)throw new ye;if(function yt(ce){ce.writing=!1,ce.writecb=null,ce.length-=ce.writelen,ce.writelen=0}(Ft),At)!function ot(ce,At,Ft,Tn,$n){--At.pendingcb,Ft?(process.nextTick($n,Tn),process.nextTick(st,ce,At),ce._writableState.errorEmitted=!0,re(ce,Tn)):($n(Tn),ce._writableState.errorEmitted=!0,re(ce,Tn),st(ce,At))}(ce,Ft,Tn,At,$n);else{var Dt=Ge(Ft)||ce.destroyed;!Dt&&!Ft.corked&&!Ft.bufferProcessing&&Ft.bufferedRequest&&Ve(ce,Ft),Tn?process.nextTick(Be,ce,Ft,Dt,$n):Be(ce,Ft,Dt,$n)}}(At,$n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==ce.emitClose,this.autoDestroy=!!ce.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new M(this)}function xe(ce){var At=this instanceof(U=U||z(1339));if(!At&&!Ee.call(xe,this))return new xe(ce);this._writableState=new Ne(ce,this,At),this.writable=!0,ce&&("function"==typeof ce.write&&(this._write=ce.write),"function"==typeof ce.writev&&(this._writev=ce.writev),"function"==typeof ce.destroy&&(this._destroy=ce.destroy),"function"==typeof ce.final&&(this._final=ce.final)),V.call(this)}function qe(ce,At,Ft,Tn,$n,Dt,kt){At.writelen=Tn,At.writecb=kt,At.writing=!0,At.sync=!0,At.destroyed?At.onwrite(new ne("write")):Ft?ce._writev($n,At.onwrite):ce._write($n,Dt,At.onwrite),At.sync=!1}function Be(ce,At,Ft,Tn){Ft||function lt(ce,At){0===At.length&&At.needDrain&&(At.needDrain=!1,ce.emit("drain"))}(ce,At),At.pendingcb--,Tn(),st(ce,At)}function Ve(ce,At){At.bufferProcessing=!0;var Ft=At.bufferedRequest;if(ce._writev&&Ft&&Ft.next){var $n=new Array(At.bufferedRequestCount),Dt=At.corkedRequestsFree;Dt.entry=Ft;for(var kt=0,ln=!0;Ft;)$n[kt]=Ft,Ft.isBuf||(ln=!1),Ft=Ft.next,kt+=1;$n.allBuffers=ln,qe(ce,At,!0,At.length,$n,"",Dt.finish),At.pendingcb++,At.lastBufferedRequest=null,Dt.next?(At.corkedRequestsFree=Dt.next,Dt.next=null):At.corkedRequestsFree=new M(At),At.bufferedRequestCount=0}else{for(;Ft;){var Ye=Ft.chunk;if(qe(ce,At,!1,At.objectMode?1:Ye.length,Ye,Ft.encoding,Ft.callback),Ft=Ft.next,At.bufferedRequestCount--,At.writing)break}null===Ft&&(At.lastBufferedRequest=null)}At.bufferedRequest=Ft,At.bufferProcessing=!1}function Ge(ce){return ce.ending&&0===ce.length&&null===ce.bufferedRequest&&!ce.finished&&!ce.writing}function bt(ce,At){ce._final(function(Ft){At.pendingcb--,Ft&&re(ce,Ft),At.prefinished=!0,ce.emit("prefinish"),st(ce,At)})}function st(ce,At){var Ft=Ge(At);if(Ft&&(function wt(ce,At){!At.prefinished&&!At.finalCalled&&("function"!=typeof ce._final||At.destroyed?(At.prefinished=!0,ce.emit("prefinish")):(At.pendingcb++,At.finalCalled=!0,process.nextTick(bt,ce,At)))}(ce,At),0===At.pendingcb&&(At.finished=!0,ce.emit("finish"),At.autoDestroy))){var Tn=ce._readableState;(!Tn||Tn.autoDestroy&&Tn.endEmitted)&&ce.destroy()}return Ft}z(3894)(xe,V),Ne.prototype.getBuffer=function(){for(var At=this.bufferedRequest,Ft=[];At;)Ft.push(At),At=At.next;return Ft},function(){try{Object.defineProperty(Ne.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Ee=Function.prototype[Symbol.hasInstance],Object.defineProperty(xe,Symbol.hasInstance,{value:function(At){return!!Ee.call(this,At)||this===xe&&At&&At._writableState instanceof Ne}})):Ee=function(At){return At instanceof this},xe.prototype.pipe=function(){re(this,new Ie)},xe.prototype.write=function(ce,At,Ft){var Tn=this._writableState,$n=!1,Dt=!Tn.objectMode&&function J(ce){return L.isBuffer(ce)||ce instanceof R}(ce);return Dt&&!L.isBuffer(ce)&&(ce=function j(ce){return L.from(ce)}(ce)),"function"==typeof At&&(Ft=At,At=null),Dt?At="buffer":At||(At=Tn.defaultEncoding),"function"!=typeof Ft&&(Ft=pe),Tn.ending?function ue(ce,At){var Ft=new N;re(ce,Ft),process.nextTick(At,Ft)}(this,Ft):(Dt||function Re(ce,At,Ft,Tn){var $n;return null===Ft?$n=new ae:"string"!=typeof Ft&&!At.objectMode&&($n=new G("chunk",["string","Buffer"],Ft)),!$n||(re(ce,$n),process.nextTick(Tn,$n),!1)}(this,Tn,ce,Ft))&&(Tn.pendingcb++,$n=function ke(ce,At,Ft,Tn,$n,Dt){if(!Ft){var kt=function Je(ce,At,Ft){return!ce.objectMode&&!1!==ce.decodeStrings&&"string"==typeof At&&(At=L.from(At,Ft)),At}(At,Tn,$n);Tn!==kt&&(Ft=!0,$n="buffer",Tn=kt)}var ln=At.objectMode?1:Tn.length;At.length+=ln;var Ye=At.length<At.highWaterMark;if(Ye||(At.needDrain=!0),At.writing||At.corked){var De=At.lastBufferedRequest;At.lastBufferedRequest={chunk:Tn,encoding:$n,isBuf:Ft,callback:Dt,next:null},De?De.next=At.lastBufferedRequest:At.bufferedRequest=At.lastBufferedRequest,At.bufferedRequestCount+=1}else qe(ce,At,!1,ln,Tn,$n,Dt);return Ye}(this,Tn,Dt,ce,At,Ft)),$n},xe.prototype.cork=function(){this._writableState.corked++},xe.prototype.uncork=function(){var ce=this._writableState;ce.corked&&(ce.corked--,!ce.writing&&!ce.corked&&!ce.bufferProcessing&&ce.bufferedRequest&&Ve(this,ce))},xe.prototype.setDefaultEncoding=function(At){if("string"==typeof At&&(At=At.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((At+"").toLowerCase())>-1))throw new $(At);return this._writableState.defaultEncoding=At,this},Object.defineProperty(xe.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(xe.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),xe.prototype._write=function(ce,At,Ft){Ft(new oe("_write()"))},xe.prototype._writev=null,xe.prototype.end=function(ce,At,Ft){var Tn=this._writableState;return"function"==typeof ce?(Ft=ce,ce=null,At=null):"function"==typeof At&&(Ft=At,At=null),null!=ce&&this.write(ce,At),Tn.corked&&(Tn.corked=1,this.uncork()),Tn.ending||function gt(ce,At,Ft){At.ending=!0,st(ce,At),Ft&&(At.finished?process.nextTick(Ft):ce.once("finish",Ft)),At.ended=!0,ce.writable=!1}(this,Tn,Ft),this},Object.defineProperty(xe.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(xe.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(At){!this._writableState||(this._writableState.destroyed=At)}}),xe.prototype.destroy=Z.destroy,xe.prototype._undestroy=Z.undestroy,xe.prototype._destroy=function(ce,At){At(ce)}},3872:(He,be,z)=>{"use strict";var X;function M(ne,ae,N){return ae in ne?Object.defineProperty(ne,ae,{value:N,enumerable:!0,configurable:!0,writable:!0}):ne[ae]=N,ne}var U=z(7542),O=Symbol("lastResolve"),V=Symbol("lastReject"),L=Symbol("error"),R=Symbol("ended"),j=Symbol("lastPromise"),J=Symbol("handlePromise"),Z=Symbol("stream");function te(ne,ae){return{value:ne,done:ae}}function ie(ne){var ae=ne[O];if(null!==ae){var N=ne[Z].read();null!==N&&(ne[j]=null,ne[O]=null,ne[V]=null,ae(te(N,!1)))}}function Y(ne){process.nextTick(ie,ne)}var oe=Object.getPrototypeOf(function(){}),ye=Object.setPrototypeOf((M(X={get stream(){return this[Z]},next:function(){var ae=this,N=this[L];if(null!==N)return Promise.reject(N);if(this[R])return Promise.resolve(te(void 0,!0));if(this[Z].destroyed)return new Promise(function(Ne,Ee){process.nextTick(function(){ae[L]?Ee(ae[L]):Ne(te(void 0,!0))})});var re,$=this[j];if($)re=new Promise(function G(ne,ae){return function(N,$){ne.then(function(){ae[R]?N(te(void 0,!0)):ae[J](N,$)},$)}}($,this));else{var pe=this[Z].read();if(null!==pe)return Promise.resolve(te(pe,!1));re=new Promise(this[J])}return this[j]=re,re}},Symbol.asyncIterator,function(){return this}),M(X,"return",function(){var ae=this;return new Promise(function(N,$){ae[Z].destroy(null,function(re){re?$(re):N(te(void 0,!0))})})}),X),oe);He.exports=function(ae){var N,$=Object.create(ye,(M(N={},Z,{value:ae,writable:!0}),M(N,O,{value:null,writable:!0}),M(N,V,{value:null,writable:!0}),M(N,L,{value:null,writable:!0}),M(N,R,{value:ae._readableState.endEmitted,writable:!0}),M(N,J,{value:function(pe,Ne){var Ee=$[Z].read();Ee?($[j]=null,$[O]=null,$[V]=null,pe(te(Ee,!1))):($[O]=pe,$[V]=Ne)},writable:!0}),N));return $[j]=null,U(ae,function(re){if(re&&"ERR_STREAM_PREMATURE_CLOSE"!==re.code){var pe=$[V];return null!==pe&&($[j]=null,$[O]=null,$[V]=null,pe(re)),void($[L]=re)}var Ne=$[O];null!==Ne&&($[j]=null,$[O]=null,$[V]=null,Ne(te(void 0,!0))),$[R]=!0}),ae.on("readable",Y.bind(null,$)),$}},5019:(He,be,z)=>{"use strict";function X(Y,G){var oe=Object.keys(Y);if(Object.getOwnPropertySymbols){var ye=Object.getOwnPropertySymbols(Y);G&&(ye=ye.filter(function(Ie){return Object.getOwnPropertyDescriptor(Y,Ie).enumerable})),oe.push.apply(oe,ye)}return oe}function U(Y,G,oe){return G in Y?Object.defineProperty(Y,G,{value:oe,enumerable:!0,configurable:!0,writable:!0}):Y[G]=oe,Y}function V(Y,G){for(var oe=0;oe<G.length;oe++){var ye=G[oe];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(Y,ye.key,ye)}}var j=z(3172).Buffer,Z=z(2361).inspect,te=Z&&Z.custom||"inspect";function ie(Y,G,oe){j.prototype.copy.call(Y,G,oe)}He.exports=function(){function Y(){(function O(Y,G){if(!(Y instanceof G))throw new TypeError("Cannot call a class as a function")})(this,Y),this.head=null,this.tail=null,this.length=0}return function L(Y,G,oe){G&&V(Y.prototype,G),oe&&V(Y,oe)}(Y,[{key:"push",value:function(oe){var ye={data:oe,next:null};this.length>0?this.tail.next=ye:this.head=ye,this.tail=ye,++this.length}},{key:"unshift",value:function(oe){var ye={data:oe,next:this.head};0===this.length&&(this.tail=ye),this.head=ye,++this.length}},{key:"shift",value:function(){if(0!==this.length){var oe=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,oe}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(oe){if(0===this.length)return"";for(var ye=this.head,Ie=""+ye.data;ye=ye.next;)Ie+=oe+ye.data;return Ie}},{key:"concat",value:function(oe){if(0===this.length)return j.alloc(0);for(var ye=j.allocUnsafe(oe>>>0),Ie=this.head,ne=0;Ie;)ie(Ie.data,ye,ne),ne+=Ie.data.length,Ie=Ie.next;return ye}},{key:"consume",value:function(oe,ye){var Ie;return oe<this.head.data.length?(Ie=this.head.data.slice(0,oe),this.head.data=this.head.data.slice(oe)):Ie=oe===this.head.data.length?this.shift():ye?this._getString(oe):this._getBuffer(oe),Ie}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(oe){var ye=this.head,Ie=1,ne=ye.data;for(oe-=ne.length;ye=ye.next;){var ae=ye.data,N=oe>ae.length?ae.length:oe;if(ne+=N===ae.length?ae:ae.slice(0,oe),0==(oe-=N)){N===ae.length?(++Ie,this.head=ye.next?ye.next:this.tail=null):(this.head=ye,ye.data=ae.slice(N));break}++Ie}return this.length-=Ie,ne}},{key:"_getBuffer",value:function(oe){var ye=j.allocUnsafe(oe),Ie=this.head,ne=1;for(Ie.data.copy(ye),oe-=Ie.data.length;Ie=Ie.next;){var ae=Ie.data,N=oe>ae.length?ae.length:oe;if(ae.copy(ye,ye.length-oe,0,N),0==(oe-=N)){N===ae.length?(++ne,this.head=Ie.next?Ie.next:this.tail=null):(this.head=Ie,Ie.data=ae.slice(N));break}++ne}return this.length-=ne,ye}},{key:te,value:function(oe,ye){return Z(this,function M(Y){for(var G=1;G<arguments.length;G++){var oe=null!=arguments[G]?arguments[G]:{};G%2?X(Object(oe),!0).forEach(function(ye){U(Y,ye,oe[ye])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(oe)):X(Object(oe)).forEach(function(ye){Object.defineProperty(Y,ye,Object.getOwnPropertyDescriptor(oe,ye))})}return Y}({},ye,{depth:0,customInspect:!1}))}}]),Y}()},1920:He=>{"use strict";function z(V,L){U(V,L),X(V)}function X(V){V._writableState&&!V._writableState.emitClose||V._readableState&&!V._readableState.emitClose||V.emit("close")}function U(V,L){V.emit("error",L)}He.exports={destroy:function be(V,L){var R=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(L?L(V):V&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(U,this,V)):process.nextTick(U,this,V)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(V||null,function(Z){!L&&Z?R._writableState?R._writableState.errorEmitted?process.nextTick(X,R):(R._writableState.errorEmitted=!0,process.nextTick(z,R,Z)):process.nextTick(z,R,Z):L?(process.nextTick(X,R),L(Z)):process.nextTick(X,R)}),this)},undestroy:function M(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function O(V,L){var R=V._readableState,j=V._writableState;R&&R.autoDestroy||j&&j.autoDestroy?V.destroy(L):V.emit("error",L)}}},7542:(He,be,z)=>{"use strict";var X=z(891).q.ERR_STREAM_PREMATURE_CLOSE;function U(){}He.exports=function V(L,R,j){if("function"==typeof R)return V(L,null,R);R||(R={}),j=function M(L){var R=!1;return function(){if(!R){R=!0;for(var j=arguments.length,J=new Array(j),Z=0;Z<j;Z++)J[Z]=arguments[Z];L.apply(this,J)}}}(j||U);var J=R.readable||!1!==R.readable&&L.readable,Z=R.writable||!1!==R.writable&&L.writable,te=function(){L.writable||Y()},ie=L._writableState&&L._writableState.finished,Y=function(){Z=!1,ie=!0,J||j.call(L)},G=L._readableState&&L._readableState.endEmitted,oe=function(){J=!1,G=!0,Z||j.call(L)},ye=function(N){j.call(L,N)},Ie=function(){var N;return J&&!G?((!L._readableState||!L._readableState.ended)&&(N=new X),j.call(L,N)):Z&&!ie?((!L._writableState||!L._writableState.ended)&&(N=new X),j.call(L,N)):void 0},ne=function(){L.req.on("finish",Y)};return function O(L){return L.setHeader&&"function"==typeof L.abort}(L)?(L.on("complete",Y),L.on("abort",Ie),L.req?ne():L.on("request",ne)):Z&&!L._writableState&&(L.on("end",te),L.on("close",te)),L.on("end",oe),L.on("finish",Y),!1!==R.error&&L.on("error",ye),L.on("close",Ie),function(){L.removeListener("complete",Y),L.removeListener("abort",Ie),L.removeListener("request",ne),L.req&&L.req.removeListener("finish",Y),L.removeListener("end",te),L.removeListener("close",te),L.removeListener("finish",Y),L.removeListener("end",oe),L.removeListener("error",ye),L.removeListener("close",Ie)}}},7412:He=>{He.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(He,be,z)=>{"use strict";var X,U=z(891).q,O=U.ERR_MISSING_ARGS,V=U.ERR_STREAM_DESTROYED;function L(Y){if(Y)throw Y}function j(Y,G,oe,ye){ye=function M(Y){var G=!1;return function(){G||(G=!0,Y.apply(void 0,arguments))}}(ye);var Ie=!1;Y.on("close",function(){Ie=!0}),void 0===X&&(X=z(7542)),X(Y,{readable:G,writable:oe},function(ae){if(ae)return ye(ae);Ie=!0,ye()});var ne=!1;return function(ae){if(!Ie&&!ne){if(ne=!0,function R(Y){return Y.setHeader&&"function"==typeof Y.abort}(Y))return Y.abort();if("function"==typeof Y.destroy)return Y.destroy();ye(ae||new V("pipe"))}}}function J(Y){Y()}function Z(Y,G){return Y.pipe(G)}function te(Y){return Y.length&&"function"==typeof Y[Y.length-1]?Y.pop():L}He.exports=function ie(){for(var Y=arguments.length,G=new Array(Y),oe=0;oe<Y;oe++)G[oe]=arguments[oe];var ye=te(G);if(Array.isArray(G[0])&&(G=G[0]),G.length<2)throw new O("streams");var Ie,ne=G.map(function(ae,N){var $=N<G.length-1;return j(ae,$,N>0,function(pe){Ie||(Ie=pe),pe&&ne.forEach(J),!$&&(ne.forEach(J),ye(Ie))})});return G.reduce(Z)}},7102:(He,be,z)=>{"use strict";var X=z(891).q.ERR_INVALID_OPT_VALUE;He.exports={getHighWaterMark:function U(O,V,L,R){var j=function M(O,V,L){return null!=O.highWaterMark?O.highWaterMark:V?O[L]:null}(V,R,L);if(null!=j){if(!isFinite(j)||Math.floor(j)!==j||j<0)throw new X(R?L:"highWaterMark",j);return Math.floor(j)}return O.objectMode?16:16384}}},4970:(He,be,z)=>{He.exports=z(9069).EventEmitter},1503:(He,be,z)=>{!function(X){X.parser=function(Me,ce){return new U(Me,ce)},X.SAXParser=U,X.SAXStream=Z,X.createStream=function J(Me,ce){return new Z(Me,ce)},X.MAX_BUFFER_LENGTH=65536;var R,M=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function U(Me,ce){if(!(this instanceof U))return new U(Me,ce);var At=this;(function V(Me){for(var ce=0,At=M.length;ce<At;ce++)Me[M[ce]]=""})(At),At.q=At.c="",At.bufferCheckPosition=X.MAX_BUFFER_LENGTH,At.opt=ce||{},At.opt.lowercase=At.opt.lowercase||At.opt.lowercasetags,At.looseCase=At.opt.lowercase?"toLowerCase":"toUpperCase",At.tags=[],At.closed=At.closedRoot=At.sawRoot=!1,At.tag=At.error=null,At.strict=!!Me,At.noscript=!(!Me&&!At.opt.noscript),At.state=Ee.BEGIN,At.strictEntities=At.opt.strictEntities,At.ENTITIES=Object.create(At.strictEntities?X.XML_ENTITIES:X.ENTITIES),At.attribList=[],At.opt.xmlns&&(At.ns=Object.create(oe)),At.trackPosition=!1!==At.opt.position,At.trackPosition&&(At.position=At.line=At.column=0),ue(At,"onready")}X.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(Me){function ce(){}return ce.prototype=Me,new ce}),Object.keys||(Object.keys=function(Me){var ce=[];for(var At in Me)Me.hasOwnProperty(At)&&ce.push(At);return ce}),U.prototype={end:function(){ot(this)},write:function gt(Me){var ce=this;if(this.error)throw this.error;if(ce.closed)return qe(ce,"Cannot write after close. Assign an onready handler.");if(null===Me)return ot(ce);"object"==typeof Me&&(Me=Me.toString());for(var At=0,Ft="";Ft=st(Me,At++),ce.c=Ft,Ft;)switch(ce.trackPosition&&(ce.position++,"\n"===Ft?(ce.line++,ce.column=0):ce.column++),ce.state){case Ee.BEGIN:if(ce.state=Ee.BEGIN_WHITESPACE,"\ufeff"===Ft)continue;wt(ce,Ft);continue;case Ee.BEGIN_WHITESPACE:wt(ce,Ft);continue;case Ee.TEXT:if(ce.sawRoot&&!ce.closedRoot){for(var Tn=At-1;Ft&&"<"!==Ft&&"&"!==Ft;)(Ft=st(Me,At++))&&ce.trackPosition&&(ce.position++,"\n"===Ft?(ce.line++,ce.column=0):ce.column++);ce.textNode+=Me.substring(Tn,At-1)}"<"!==Ft||ce.sawRoot&&ce.closedRoot&&!ce.strict?(!N(Ft)&&(!ce.sawRoot||ce.closedRoot)&&yt(ce,"Text data outside of root node."),"&"===Ft?ce.state=Ee.TEXT_ENTITY:ce.textNode+=Ft):(ce.state=Ee.OPEN_WAKA,ce.startTagPosition=ce.position);continue;case Ee.SCRIPT:"<"===Ft?ce.state=Ee.SCRIPT_ENDING:ce.script+=Ft;continue;case Ee.SCRIPT_ENDING:"/"===Ft?ce.state=Ee.CLOSE_TAG:(ce.script+="<"+Ft,ce.state=Ee.SCRIPT);continue;case Ee.OPEN_WAKA:"!"===Ft?(ce.state=Ee.SGML_DECL,ce.sgmlDecl=""):N(Ft)||(pe(ye,Ft)?(ce.state=Ee.OPEN_TAG,ce.tagName=Ft):"/"===Ft?(ce.state=Ee.CLOSE_TAG,ce.tagName=""):"?"===Ft?(ce.state=Ee.PROC_INST,ce.procInstName=ce.procInstBody=""):(yt(ce,"Unencoded <"),ce.startTagPosition+1<ce.position&&(Ft=new Array(ce.position-ce.startTagPosition).join(" ")+Ft),ce.textNode+="<"+Ft,ce.state=Ee.TEXT));continue;case Ee.SGML_DECL:"[CDATA["===(ce.sgmlDecl+Ft).toUpperCase()?(Re(ce,"onopencdata"),ce.state=Ee.CDATA,ce.sgmlDecl="",ce.cdata=""):ce.sgmlDecl+Ft==="--"?(ce.state=Ee.COMMENT,ce.comment="",ce.sgmlDecl=""):"DOCTYPE"===(ce.sgmlDecl+Ft).toUpperCase()?(ce.state=Ee.DOCTYPE,(ce.doctype||ce.sawRoot)&&yt(ce,"Inappropriately located doctype declaration"),ce.doctype="",ce.sgmlDecl=""):">"===Ft?(Re(ce,"onsgmldeclaration",ce.sgmlDecl),ce.sgmlDecl="",ce.state=Ee.TEXT):($(Ft)&&(ce.state=Ee.SGML_DECL_QUOTED),ce.sgmlDecl+=Ft);continue;case Ee.SGML_DECL_QUOTED:Ft===ce.q&&(ce.state=Ee.SGML_DECL,ce.q=""),ce.sgmlDecl+=Ft;continue;case Ee.DOCTYPE:">"===Ft?(ce.state=Ee.TEXT,Re(ce,"ondoctype",ce.doctype),ce.doctype=!0):(ce.doctype+=Ft,"["===Ft?ce.state=Ee.DOCTYPE_DTD:$(Ft)&&(ce.state=Ee.DOCTYPE_QUOTED,ce.q=Ft));continue;case Ee.DOCTYPE_QUOTED:ce.doctype+=Ft,Ft===ce.q&&(ce.q="",ce.state=Ee.DOCTYPE);continue;case Ee.DOCTYPE_DTD:ce.doctype+=Ft,"]"===Ft?ce.state=Ee.DOCTYPE:$(Ft)&&(ce.state=Ee.DOCTYPE_DTD_QUOTED,ce.q=Ft);continue;case Ee.DOCTYPE_DTD_QUOTED:ce.doctype+=Ft,Ft===ce.q&&(ce.state=Ee.DOCTYPE_DTD,ce.q="");continue;case Ee.COMMENT:"-"===Ft?ce.state=Ee.COMMENT_ENDING:ce.comment+=Ft;continue;case Ee.COMMENT_ENDING:"-"===Ft?(ce.state=Ee.COMMENT_ENDED,ce.comment=ke(ce.opt,ce.comment),ce.comment&&Re(ce,"oncomment",ce.comment),ce.comment=""):(ce.comment+="-"+Ft,ce.state=Ee.COMMENT);continue;case Ee.COMMENT_ENDED:">"!==Ft?(yt(ce,"Malformed comment"),ce.comment+="--"+Ft,ce.state=Ee.COMMENT):ce.state=Ee.TEXT;continue;case Ee.CDATA:"]"===Ft?ce.state=Ee.CDATA_ENDING:ce.cdata+=Ft;continue;case Ee.CDATA_ENDING:"]"===Ft?ce.state=Ee.CDATA_ENDING_2:(ce.cdata+="]"+Ft,ce.state=Ee.CDATA);continue;case Ee.CDATA_ENDING_2:">"===Ft?(ce.cdata&&Re(ce,"oncdata",ce.cdata),Re(ce,"onclosecdata"),ce.cdata="",ce.state=Ee.TEXT):"]"===Ft?ce.cdata+="]":(ce.cdata+="]]"+Ft,ce.state=Ee.CDATA);continue;case Ee.PROC_INST:"?"===Ft?ce.state=Ee.PROC_INST_ENDING:N(Ft)?ce.state=Ee.PROC_INST_BODY:ce.procInstName+=Ft;continue;case Ee.PROC_INST_BODY:if(!ce.procInstBody&&N(Ft))continue;"?"===Ft?ce.state=Ee.PROC_INST_ENDING:ce.procInstBody+=Ft;continue;case Ee.PROC_INST_ENDING:">"===Ft?(Re(ce,"onprocessinginstruction",{name:ce.procInstName,body:ce.procInstBody}),ce.procInstName=ce.procInstBody="",ce.state=Ee.TEXT):(ce.procInstBody+="?"+Ft,ce.state=Ee.PROC_INST_BODY);continue;case Ee.OPEN_TAG:pe(Ie,Ft)?ce.tagName+=Ft:(hn(ce),">"===Ft?Ve(ce):"/"===Ft?ce.state=Ee.OPEN_TAG_SLASH:(N(Ft)||yt(ce,"Invalid character in tag name"),ce.state=Ee.ATTRIB));continue;case Ee.OPEN_TAG_SLASH:">"===Ft?(Ve(ce,!0),Ge(ce)):(yt(ce,"Forward-slash in opening tag not followed by >"),ce.state=Ee.ATTRIB);continue;case Ee.ATTRIB:if(N(Ft))continue;">"===Ft?Ve(ce):"/"===Ft?ce.state=Ee.OPEN_TAG_SLASH:pe(ye,Ft)?(ce.attribName=Ft,ce.attribValue="",ce.state=Ee.ATTRIB_NAME):yt(ce,"Invalid attribute name");continue;case Ee.ATTRIB_NAME:"="===Ft?ce.state=Ee.ATTRIB_VALUE:">"===Ft?(yt(ce,"Attribute without value"),ce.attribValue=ce.attribName,lt(ce),Ve(ce)):N(Ft)?ce.state=Ee.ATTRIB_NAME_SAW_WHITE:pe(Ie,Ft)?ce.attribName+=Ft:yt(ce,"Invalid attribute name");continue;case Ee.ATTRIB_NAME_SAW_WHITE:if("="===Ft)ce.state=Ee.ATTRIB_VALUE;else{if(N(Ft))continue;yt(ce,"Attribute without value"),ce.tag.attributes[ce.attribName]="",ce.attribValue="",Re(ce,"onattribute",{name:ce.attribName,value:""}),ce.attribName="",">"===Ft?Ve(ce):pe(ye,Ft)?(ce.attribName=Ft,ce.state=Ee.ATTRIB_NAME):(yt(ce,"Invalid attribute name"),ce.state=Ee.ATTRIB)}continue;case Ee.ATTRIB_VALUE:if(N(Ft))continue;$(Ft)?(ce.q=Ft,ce.state=Ee.ATTRIB_VALUE_QUOTED):(yt(ce,"Unquoted attribute value"),ce.state=Ee.ATTRIB_VALUE_UNQUOTED,ce.attribValue=Ft);continue;case Ee.ATTRIB_VALUE_QUOTED:if(Ft!==ce.q){"&"===Ft?ce.state=Ee.ATTRIB_VALUE_ENTITY_Q:ce.attribValue+=Ft;continue}lt(ce),ce.q="",ce.state=Ee.ATTRIB_VALUE_CLOSED;continue;case Ee.ATTRIB_VALUE_CLOSED:N(Ft)?ce.state=Ee.ATTRIB:">"===Ft?Ve(ce):"/"===Ft?ce.state=Ee.OPEN_TAG_SLASH:pe(ye,Ft)?(yt(ce,"No whitespace between attributes"),ce.attribName=Ft,ce.attribValue="",ce.state=Ee.ATTRIB_NAME):yt(ce,"Invalid attribute name");continue;case Ee.ATTRIB_VALUE_UNQUOTED:if(!re(Ft)){"&"===Ft?ce.state=Ee.ATTRIB_VALUE_ENTITY_U:ce.attribValue+=Ft;continue}lt(ce),">"===Ft?Ve(ce):ce.state=Ee.ATTRIB;continue;case Ee.CLOSE_TAG:if(ce.tagName)">"===Ft?Ge(ce):pe(Ie,Ft)?ce.tagName+=Ft:ce.script?(ce.script+="</"+ce.tagName,ce.tagName="",ce.state=Ee.SCRIPT):(N(Ft)||yt(ce,"Invalid tagname in closing tag"),ce.state=Ee.CLOSE_TAG_SAW_WHITE);else{if(N(Ft))continue;Ne(ye,Ft)?ce.script?(ce.script+="</"+Ft,ce.state=Ee.SCRIPT):yt(ce,"Invalid tagname in closing tag."):ce.tagName=Ft}continue;case Ee.CLOSE_TAG_SAW_WHITE:if(N(Ft))continue;">"===Ft?Ge(ce):yt(ce,"Invalid characters in closing tag");continue;case Ee.TEXT_ENTITY:case Ee.ATTRIB_VALUE_ENTITY_Q:case Ee.ATTRIB_VALUE_ENTITY_U:var Dt,kt;switch(ce.state){case Ee.TEXT_ENTITY:Dt=Ee.TEXT,kt="textNode";break;case Ee.ATTRIB_VALUE_ENTITY_Q:Dt=Ee.ATTRIB_VALUE_QUOTED,kt="attribValue";break;case Ee.ATTRIB_VALUE_ENTITY_U:Dt=Ee.ATTRIB_VALUE_UNQUOTED,kt="attribValue"}";"===Ft?(ce[kt]+=bt(ce),ce.entity="",ce.state=Dt):pe(ce.entity.length?ae:ne,Ft)?ce.entity+=Ft:(yt(ce,"Invalid character in entity name"),ce[kt]+="&"+ce.entity+Ft,ce.entity="",ce.state=Dt);continue;default:throw new Error(ce,"Unknown state: "+ce.state)}return ce.position>=ce.bufferCheckPosition&&function O(Me){for(var ce=Math.max(X.MAX_BUFFER_LENGTH,10),At=0,Ft=0,Tn=M.length;Ft<Tn;Ft++){var $n=Me[M[Ft]].length;if($n>ce)switch(M[Ft]){case"textNode":Je(Me);break;case"cdata":Re(Me,"oncdata",Me.cdata),Me.cdata="";break;case"script":Re(Me,"onscript",Me.script),Me.script="";break;default:qe(Me,"Max buffer length exceeded: "+M[Ft])}At=Math.max(At,$n)}Me.bufferCheckPosition=X.MAX_BUFFER_LENGTH-At+Me.position}(ce),ce},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function L(Me){Je(Me),""!==Me.cdata&&(Re(Me,"oncdata",Me.cdata),Me.cdata=""),""!==Me.script&&(Re(Me,"onscript",Me.script),Me.script="")}(this)}};try{R=z(295).Stream}catch{R=function(){}}var j=X.EVENTS.filter(function(Me){return"error"!==Me&&"end"!==Me});function Z(Me,ce){if(!(this instanceof Z))return new Z(Me,ce);R.apply(this),this._parser=new U(Me,ce),this.writable=!0,this.readable=!0;var At=this;this._parser.onend=function(){At.emit("end")},this._parser.onerror=function(Ft){At.emit("error",Ft),At._parser.error=null},this._decoder=null,j.forEach(function(Ft){Object.defineProperty(At,"on"+Ft,{get:function(){return At._parser["on"+Ft]},set:function(Tn){if(!Tn)return At.removeAllListeners(Ft),At._parser["on"+Ft]=Tn,Tn;At.on(Ft,Tn)},enumerable:!0,configurable:!1})})}(Z.prototype=Object.create(R.prototype,{constructor:{value:Z}})).write=function(Me){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(Me)){if(!this._decoder){var ce=z(3054).s;this._decoder=new ce("utf8")}Me=this._decoder.write(Me)}return this._parser.write(Me.toString()),this.emit("data",Me),!0},Z.prototype.end=function(Me){return Me&&Me.length&&this.write(Me),this._parser.end(),!0},Z.prototype.on=function(Me,ce){var At=this;return!At._parser["on"+Me]&&-1!==j.indexOf(Me)&&(At._parser["on"+Me]=function(){var Ft=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);Ft.splice(0,0,Me),At.emit.apply(At,Ft)}),R.prototype.on.call(At,Me,ce)};var Y="http://www.w3.org/XML/1998/namespace",G="http://www.w3.org/2000/xmlns/",oe={xml:Y,xmlns:G},ye=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Ie=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,ne=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ae=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function N(Me){return" "===Me||"\n"===Me||"\r"===Me||"\t"===Me}function $(Me){return'"'===Me||"'"===Me}function re(Me){return">"===Me||N(Me)}function pe(Me,ce){return Me.test(ce)}function Ne(Me,ce){return!pe(Me,ce)}var Me,ce,At,Ee=0;for(var xe in X.STATE={BEGIN:Ee++,BEGIN_WHITESPACE:Ee++,TEXT:Ee++,TEXT_ENTITY:Ee++,OPEN_WAKA:Ee++,SGML_DECL:Ee++,SGML_DECL_QUOTED:Ee++,DOCTYPE:Ee++,DOCTYPE_QUOTED:Ee++,DOCTYPE_DTD:Ee++,DOCTYPE_DTD_QUOTED:Ee++,COMMENT_STARTING:Ee++,COMMENT:Ee++,COMMENT_ENDING:Ee++,COMMENT_ENDED:Ee++,CDATA:Ee++,CDATA_ENDING:Ee++,CDATA_ENDING_2:Ee++,PROC_INST:Ee++,PROC_INST_BODY:Ee++,PROC_INST_ENDING:Ee++,OPEN_TAG:Ee++,OPEN_TAG_SLASH:Ee++,ATTRIB:Ee++,ATTRIB_NAME:Ee++,ATTRIB_NAME_SAW_WHITE:Ee++,ATTRIB_VALUE:Ee++,ATTRIB_VALUE_QUOTED:Ee++,ATTRIB_VALUE_CLOSED:Ee++,ATTRIB_VALUE_UNQUOTED:Ee++,ATTRIB_VALUE_ENTITY_Q:Ee++,ATTRIB_VALUE_ENTITY_U:Ee++,CLOSE_TAG:Ee++,CLOSE_TAG_SAW_WHITE:Ee++,SCRIPT:Ee++,SCRIPT_ENDING:Ee++},X.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},X.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(X.ENTITIES).forEach(function(Me){var ce=X.ENTITIES[Me],At="number"==typeof ce?String.fromCharCode(ce):ce;X.ENTITIES[Me]=At}),X.STATE)X.STATE[X.STATE[xe]]=xe;function ue(Me,ce,At){Me[ce]&&Me[ce](At)}function Re(Me,ce,At){Me.textNode&&Je(Me),ue(Me,ce,At)}function Je(Me){Me.textNode=ke(Me.opt,Me.textNode),Me.textNode&&ue(Me,"ontext",Me.textNode),Me.textNode=""}function ke(Me,ce){return Me.trim&&(ce=ce.trim()),Me.normalize&&(ce=ce.replace(/\s+/g," ")),ce}function qe(Me,ce){return Je(Me),Me.trackPosition&&(ce+="\nLine: "+Me.line+"\nColumn: "+Me.column+"\nChar: "+Me.c),ce=new Error(ce),Me.error=ce,ue(Me,"onerror",ce),Me}function ot(Me){return Me.sawRoot&&!Me.closedRoot&&yt(Me,"Unclosed root tag"),Me.state!==Ee.BEGIN&&Me.state!==Ee.BEGIN_WHITESPACE&&Me.state!==Ee.TEXT&&qe(Me,"Unexpected end"),Je(Me),Me.c="",Me.closed=!0,ue(Me,"onend"),U.call(Me,Me.strict,Me.opt),Me}function yt(Me,ce){if("object"!=typeof Me||!(Me instanceof U))throw new Error("bad call to strictFail");Me.strict&&qe(Me,ce)}function hn(Me){Me.strict||(Me.tagName=Me.tagName[Me.looseCase]());var ce=Me.tags[Me.tags.length-1]||Me,At=Me.tag={name:Me.tagName,attributes:{}};Me.opt.xmlns&&(At.ns=ce.ns),Me.attribList.length=0,Re(Me,"onopentagstart",At)}function Be(Me,ce){var Ft=Me.indexOf(":")<0?["",Me]:Me.split(":"),Tn=Ft[0],$n=Ft[1];return ce&&"xmlns"===Me&&(Tn="xmlns",$n=""),{prefix:Tn,local:$n}}function lt(Me){if(Me.strict||(Me.attribName=Me.attribName[Me.looseCase]()),-1!==Me.attribList.indexOf(Me.attribName)||Me.tag.attributes.hasOwnProperty(Me.attribName))Me.attribName=Me.attribValue="";else{if(Me.opt.xmlns){var ce=Be(Me.attribName,!0),Ft=ce.local;if("xmlns"===ce.prefix)if("xml"===Ft&&Me.attribValue!==Y)yt(Me,"xml: prefix must be bound to "+Y+"\nActual: "+Me.attribValue);else if("xmlns"===Ft&&Me.attribValue!==G)yt(Me,"xmlns: prefix must be bound to "+G+"\nActual: "+Me.attribValue);else{var Tn=Me.tag,$n=Me.tags[Me.tags.length-1]||Me;Tn.ns===$n.ns&&(Tn.ns=Object.create($n.ns)),Tn.ns[Ft]=Me.attribValue}Me.attribList.push([Me.attribName,Me.attribValue])}else Me.tag.attributes[Me.attribName]=Me.attribValue,Re(Me,"onattribute",{name:Me.attribName,value:Me.attribValue});Me.attribName=Me.attribValue=""}}function Ve(Me,ce){if(Me.opt.xmlns){var At=Me.tag,Ft=Be(Me.tagName);At.prefix=Ft.prefix,At.local=Ft.local,At.uri=At.ns[Ft.prefix]||"",At.prefix&&!At.uri&&(yt(Me,"Unbound namespace prefix: "+JSON.stringify(Me.tagName)),At.uri=Ft.prefix),At.ns&&(Me.tags[Me.tags.length-1]||Me).ns!==At.ns&&Object.keys(At.ns).forEach(function(Jn){Re(Me,"onopennamespace",{prefix:Jn,uri:At.ns[Jn]})});for(var $n=0,Dt=Me.attribList.length;$n<Dt;$n++){var kt=Me.attribList[$n],ln=kt[0],Ye=kt[1],De=Be(ln,!0),ze=De.prefix,un=""===ze?"":At.ns[ze]||"",_n={name:ln,value:Ye,prefix:ze,local:De.local,uri:un};ze&&"xmlns"!==ze&&!un&&(yt(Me,"Unbound namespace prefix: "+JSON.stringify(ze)),_n.uri=ze),Me.tag.attributes[ln]=_n,Re(Me,"onattribute",_n)}Me.attribList.length=0}Me.tag.isSelfClosing=!!ce,Me.sawRoot=!0,Me.tags.push(Me.tag),Re(Me,"onopentag",Me.tag),ce||(Me.state=Me.noscript||"script"!==Me.tagName.toLowerCase()?Ee.TEXT:Ee.SCRIPT,Me.tag=null,Me.tagName=""),Me.attribName=Me.attribValue="",Me.attribList.length=0}function Ge(Me){if(!Me.tagName)return yt(Me,"Weird empty close tag."),Me.textNode+="</>",void(Me.state=Ee.TEXT);if(Me.script){if("script"!==Me.tagName)return Me.script+="</"+Me.tagName+">",Me.tagName="",void(Me.state=Ee.SCRIPT);Re(Me,"onscript",Me.script),Me.script=""}var ce=Me.tags.length,At=Me.tagName;Me.strict||(At=At[Me.looseCase]());for(var Ft=At;ce--&&Me.tags[ce].name!==Ft;)yt(Me,"Unexpected close tag");if(ce<0)return yt(Me,"Unmatched closing tag: "+Me.tagName),Me.textNode+="</"+Me.tagName+">",void(Me.state=Ee.TEXT);Me.tagName=At;for(var $n=Me.tags.length;$n-- >ce;){var Dt=Me.tag=Me.tags.pop();Me.tagName=Me.tag.name,Re(Me,"onclosetag",Me.tagName);var kt={};for(var ln in Dt.ns)kt[ln]=Dt.ns[ln];Me.opt.xmlns&&Dt.ns!==(Me.tags[Me.tags.length-1]||Me).ns&&Object.keys(Dt.ns).forEach(function(De){Re(Me,"onclosenamespace",{prefix:De,uri:Dt.ns[De]})})}0===ce&&(Me.closedRoot=!0),Me.tagName=Me.attribValue=Me.attribName="",Me.attribList.length=0,Me.state=Ee.TEXT}function bt(Me){var Ft,ce=Me.entity,At=ce.toLowerCase(),Tn="";return Me.ENTITIES[ce]?Me.ENTITIES[ce]:Me.ENTITIES[At]?Me.ENTITIES[At]:("#"===(ce=At).charAt(0)&&("x"===ce.charAt(1)?(ce=ce.slice(2),Tn=(Ft=parseInt(ce,16)).toString(16)):(ce=ce.slice(1),Tn=(Ft=parseInt(ce,10)).toString(10))),ce=ce.replace(/^0+/,""),isNaN(Ft)||Tn.toLowerCase()!==ce?(yt(Me,"Invalid character entity"),"&"+Me.entity+";"):String.fromCodePoint(Ft))}function wt(Me,ce){"<"===ce?(Me.state=Ee.OPEN_WAKA,Me.startTagPosition=Me.position):N(ce)||(yt(Me,"Non-whitespace before first tag."),Me.textNode=ce,Me.state=Ee.TEXT)}function st(Me,ce){var At="";return ce<Me.length&&(At=Me.charAt(ce)),At}Ee=X.STATE,String.fromCodePoint||(Me=String.fromCharCode,ce=Math.floor,At=function(){var Ft=16384,Tn=[],kt=-1,ln=arguments.length;if(!ln)return"";for(var Ye="";++kt<ln;){var De=Number(arguments[kt]);if(!isFinite(De)||De<0||De>1114111||ce(De)!==De)throw RangeError("Invalid code point: "+De);De<=65535?Tn.push(De):Tn.push(55296+((De-=65536)>>10),De%1024+56320),(kt+1===ln||Tn.length>Ft)&&(Ye+=Me.apply(null,Tn),Tn.length=0)}return Ye},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:At,configurable:!0,writable:!0}):String.fromCodePoint=At)}(be)},6563:function(){!function(He,be){"use strict";if(!He.setImmediate){var O,z=1,X={},M=!1,U=He.document,oe=Object.getPrototypeOf&&Object.getPrototypeOf(He);oe=oe&&oe.setTimeout?oe:He,"[object process]"==={}.toString.call(He.process)?function J(){O=function(ye){process.nextTick(function(){j(ye)})}}():function Z(){if(He.postMessage&&!He.importScripts){var ye=!0,Ie=He.onmessage;return He.onmessage=function(){ye=!1},He.postMessage("","*"),He.onmessage=Ie,ye}}()?function te(){var ye="setImmediate$"+Math.random()+"$",Ie=function(ne){ne.source===He&&"string"==typeof ne.data&&0===ne.data.indexOf(ye)&&j(+ne.data.slice(ye.length))};He.addEventListener?He.addEventListener("message",Ie,!1):He.attachEvent("onmessage",Ie),O=function(ne){He.postMessage(ye+ne,"*")}}():He.MessageChannel?function ie(){var ye=new MessageChannel;ye.port1.onmessage=function(Ie){j(Ie.data)},O=function(Ie){ye.port2.postMessage(Ie)}}():U&&"onreadystatechange"in U.createElement("script")?function Y(){var ye=U.documentElement;O=function(Ie){var ne=U.createElement("script");ne.onreadystatechange=function(){j(Ie),ne.onreadystatechange=null,ye.removeChild(ne),ne=null},ye.appendChild(ne)}}():function G(){O=function(ye){setTimeout(j,0,ye)}}(),oe.setImmediate=function V(ye){"function"!=typeof ye&&(ye=new Function(""+ye));for(var Ie=new Array(arguments.length-1),ne=0;ne<Ie.length;ne++)Ie[ne]=arguments[ne+1];var ae={callback:ye,args:Ie};return X[z]=ae,O(z),z++},oe.clearImmediate=L}function L(ye){delete X[ye]}function j(ye){if(M)setTimeout(j,0,ye);else{var Ie=X[ye];if(Ie){M=!0;try{!function R(ye){var Ie=ye.callback,ne=ye.args;switch(ne.length){case 0:Ie();break;case 1:Ie(ne[0]);break;case 2:Ie(ne[0],ne[1]);break;case 3:Ie(ne[0],ne[1],ne[2]);break;default:Ie.apply(void 0,ne)}}(Ie)}finally{L(ye),M=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},2002:function(He,be,z){"use strict";var J,X=this&&this.__extends||(J=function(Z,te){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,Y){ie.__proto__=Y}||function(ie,Y){for(var G in Y)Object.prototype.hasOwnProperty.call(Y,G)&&(ie[G]=Y[G])})(Z,te)},function(Z,te){if("function"!=typeof te&&null!==te)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function ie(){this.constructor=Z}J(Z,te),Z.prototype=null===te?Object.create(te):(ie.prototype=te.prototype,new ie)}),M=this&&this.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(be,"__esModule",{value:!0});var U=z(2630),O=M(z(4539)),V=z(1699),L=z(57),R=1.5,j=function(J){function Z(){var te=J.call(this)||this;return te.x=.5,te.y=.5,te.angle=0,te.ratio=1,te.minRatio=null,te.maxRatio=null,te.nextFrame=null,te.previousState=null,te.enabled=!0,te.previousState=te.getState(),te}return X(Z,J),Z.from=function(te){return(new Z).setState(te)},Z.prototype.enable=function(){return this.enabled=!0,this},Z.prototype.disable=function(){return this.enabled=!1,this},Z.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},Z.prototype.hasState=function(te){return this.x===te.x&&this.y===te.y&&this.ratio===te.ratio&&this.angle===te.angle},Z.prototype.getPreviousState=function(){var te=this.previousState;return te?{x:te.x,y:te.y,angle:te.angle,ratio:te.ratio}:null},Z.prototype.getBoundedRatio=function(te){var ie=te;return"number"==typeof this.minRatio&&(ie=Math.max(ie,this.minRatio)),"number"==typeof this.maxRatio&&(ie=Math.min(ie,this.maxRatio)),ie},Z.prototype.validateState=function(te){var ie={};return"number"==typeof te.x&&(ie.x=te.x),"number"==typeof te.y&&(ie.y=te.y),"number"==typeof te.angle&&(ie.angle=te.angle),"number"==typeof te.ratio&&(ie.ratio=this.getBoundedRatio(te.ratio)),ie},Z.prototype.isAnimated=function(){return!!this.nextFrame},Z.prototype.setState=function(te){if(!this.enabled)return this;this.previousState=this.getState();var ie=this.validateState(te);return"number"==typeof ie.x&&(this.x=ie.x),"number"==typeof ie.y&&(this.y=ie.y),"number"==typeof ie.angle&&(this.angle=ie.angle),"number"==typeof ie.ratio&&(this.ratio=ie.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},Z.prototype.animate=function(te,ie,Y){var G=this;if(this.enabled){var oe=Object.assign({},U.ANIMATE_DEFAULTS,ie),ye=this.validateState(te),Ie="function"==typeof oe.easing?oe.easing:O.default[oe.easing],ne=Date.now(),ae=this.getState(),N=function(){var $=(Date.now()-ne)/oe.duration;if($>=1)return G.nextFrame=null,G.setState(ye),void(G.animationCallback&&(G.animationCallback.call(null),G.animationCallback=void 0));var re=Ie($),pe={};"number"==typeof ye.x&&(pe.x=ae.x+(ye.x-ae.x)*re),"number"==typeof ye.y&&(pe.y=ae.y+(ye.y-ae.y)*re),"number"==typeof ye.angle&&(pe.angle=ae.angle+(ye.angle-ae.angle)*re),"number"==typeof ye.ratio&&(pe.ratio=ae.ratio+(ye.ratio-ae.ratio)*re),G.setState(pe),G.nextFrame=(0,V.requestFrame)(N)};this.nextFrame?((0,V.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,V.requestFrame)(N)):N(),this.animationCallback=Y}},Z.prototype.animatedZoom=function(te){if(te){if("number"==typeof te)return this.animate({ratio:this.ratio/te});this.animate({ratio:this.ratio/(te.factor||R)},te)}else this.animate({ratio:this.ratio/R})},Z.prototype.animatedUnzoom=function(te){if(te){if("number"==typeof te)return this.animate({ratio:this.ratio*te});this.animate({ratio:this.ratio*(te.factor||R)},te)}else this.animate({ratio:this.ratio*R})},Z.prototype.animatedReset=function(te){this.animate({x:.5,y:.5,ratio:1,angle:0},te)},Z.prototype.copy=function(){return Z.from(this.getState())},Z}(L.TypedEventEmitter);be.default=j},5473:function(He,be,z){"use strict";var ie,X=this&&this.__extends||(ie=function(Y,G){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(oe,ye){oe.__proto__=ye}||function(oe,ye){for(var Ie in ye)Object.prototype.hasOwnProperty.call(ye,Ie)&&(oe[Ie]=ye[Ie])})(Y,G)},function(Y,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function oe(){this.constructor=Y}ie(Y,G),Y.prototype=null===G?Object.create(G):(oe.prototype=G.prototype,new oe)}),M=this&&this.__assign||function(){return M=Object.assign||function(ie){for(var Y,G=1,oe=arguments.length;G<oe;G++)for(var ye in Y=arguments[G])Object.prototype.hasOwnProperty.call(Y,ye)&&(ie[ye]=Y[ye]);return ie},M.apply(this,arguments)};Object.defineProperty(be,"__esModule",{value:!0}),be.getWheelDelta=be.getTouchCoords=be.getTouchesArray=be.getWheelCoords=be.getMouseCoords=be.getPosition=void 0;var U=z(57);function O(ie,Y){var G=Y.getBoundingClientRect();return{x:ie.clientX-G.left,y:ie.clientY-G.top}}function V(ie,Y){var G=M(M({},O(ie,Y)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){G.sigmaDefaultPrevented=!0},original:ie});return G}function j(ie){for(var Y=[],G=0,oe=Math.min(ie.length,2);G<oe;G++)Y.push(ie[G]);return Y}function Z(ie){if(typeof ie.deltaY<"u")return-3*ie.deltaY/360;if(typeof ie.detail<"u")return ie.detail/-9;throw new Error("Captor: could not extract delta from event.")}be.getPosition=O,be.getMouseCoords=V,be.getWheelCoords=function L(ie,Y){return M(M({},V(ie,Y)),{delta:Z(ie)})},be.getTouchesArray=j,be.getTouchCoords=function J(ie,Y){return{touches:j(ie.touches).map(function(G){return O(G,Y)}),original:ie}},be.getWheelDelta=Z;var te=function(ie){function Y(G,oe){var ye=ie.call(this)||this;return ye.container=G,ye.renderer=oe,ye}return X(Y,ie),Y}(U.TypedEventEmitter);be.default=te},2465:function(He,be,z){"use strict";var ye,X=this&&this.__extends||(ye=function(Ie,ne){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,N){ae.__proto__=N}||function(ae,N){for(var $ in N)Object.prototype.hasOwnProperty.call(N,$)&&(ae[$]=N[$])})(Ie,ne)},function(Ie,ne){if("function"!=typeof ne&&null!==ne)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");function ae(){this.constructor=Ie}ye(Ie,ne),Ie.prototype=null===ne?Object.create(ne):(ae.prototype=ne.prototype,new ae)}),M=this&&this.__createBinding||(Object.create?function(ye,Ie,ne,ae){void 0===ae&&(ae=ne),Object.defineProperty(ye,ae,{enumerable:!0,get:function(){return Ie[ne]}})}:function(ye,Ie,ne,ae){void 0===ae&&(ae=ne),ye[ae]=Ie[ne]}),U=this&&this.__setModuleDefault||(Object.create?function(ye,Ie){Object.defineProperty(ye,"default",{enumerable:!0,value:Ie})}:function(ye,Ie){ye.default=Ie}),O=this&&this.__importStar||function(ye){if(ye&&ye.__esModule)return ye;var Ie={};if(null!=ye)for(var ne in ye)"default"!==ne&&Object.prototype.hasOwnProperty.call(ye,ne)&&M(Ie,ye,ne);return U(Ie,ye),Ie};Object.defineProperty(be,"__esModule",{value:!0});var V=O(z(5473)),oe=function(ye){function Ie(ne,ae){var N=ye.call(this,ne,ae)||this;return N.enabled=!0,N.draggedEvents=0,N.downStartTime=null,N.lastMouseX=null,N.lastMouseY=null,N.isMouseDown=!1,N.isMoving=!1,N.movingTimeout=null,N.startCameraState=null,N.clicks=0,N.doubleClickTimeout=null,N.currentWheelDirection=0,N.handleClick=N.handleClick.bind(N),N.handleRightClick=N.handleRightClick.bind(N),N.handleDown=N.handleDown.bind(N),N.handleUp=N.handleUp.bind(N),N.handleMove=N.handleMove.bind(N),N.handleWheel=N.handleWheel.bind(N),N.handleOut=N.handleOut.bind(N),ne.addEventListener("click",N.handleClick,!1),ne.addEventListener("contextmenu",N.handleRightClick,!1),ne.addEventListener("mousedown",N.handleDown,!1),ne.addEventListener("wheel",N.handleWheel,!1),ne.addEventListener("mouseout",N.handleOut,!1),document.addEventListener("mousemove",N.handleMove,!1),document.addEventListener("mouseup",N.handleUp,!1),N}return X(Ie,ye),Ie.prototype.kill=function(){var ne=this.container;ne.removeEventListener("click",this.handleClick),ne.removeEventListener("contextmenu",this.handleRightClick),ne.removeEventListener("mousedown",this.handleDown),ne.removeEventListener("wheel",this.handleWheel),ne.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},Ie.prototype.handleClick=function(ne){var ae=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(ne);setTimeout(function(){ae.clicks=0,ae.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",(0,V.getMouseCoords)(ne,this.container))}},Ie.prototype.handleRightClick=function(ne){!this.enabled||this.emit("rightClick",(0,V.getMouseCoords)(ne,this.container))},Ie.prototype.handleDoubleClick=function(ne){if(this.enabled){ne.preventDefault(),ne.stopPropagation();var ae=(0,V.getMouseCoords)(ne,this.container);if(this.emit("doubleClick",ae),!ae.sigmaDefaultPrevented){var N=this.renderer.getCamera(),$=N.getBoundedRatio(N.getState().ratio/2.2);N.animate(this.renderer.getViewportZoomedState((0,V.getPosition)(ne,this.container),$),{easing:"quadraticInOut",duration:200})}}},Ie.prototype.handleDown=function(ne){if(this.enabled){this.startCameraState=this.renderer.getCamera().getState();var ae=(0,V.getPosition)(ne,this.container),$=ae.y;this.lastMouseX=ae.x,this.lastMouseY=$,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0,this.emit("mousedown",(0,V.getMouseCoords)(ne,this.container))}},Ie.prototype.handleUp=function(ne){var ae=this;if(this.enabled&&this.isMouseDown){var N=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var $=(0,V.getPosition)(ne,this.container),re=$.x,pe=$.y,Ne=N.getState(),Ee=N.getPreviousState()||{x:0,y:0};this.isMoving?N.animate({x:Ne.x+3*(Ne.x-Ee.x),y:Ne.y+3*(Ne.y-Ee.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==re||this.lastMouseY!==pe)&&N.setState({x:Ne.x,y:Ne.y}),this.isMoving=!1,setTimeout(function(){ae.draggedEvents=0,ae.renderer.refresh()},0),this.emit("mouseup",(0,V.getMouseCoords)(ne,this.container))}},Ie.prototype.handleMove=function(ne){var ae=this;if(this.enabled){var N=(0,V.getMouseCoords)(ne,this.container);if(this.emit("mousemovebody",N),ne.target===this.container&&this.emit("mousemove",N),!N.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){ae.movingTimeout=null,ae.isMoving=!1},100);var $=this.renderer.getCamera(),re=(0,V.getPosition)(ne,this.container),pe=re.x,Ne=re.y,Ee=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),xe=this.renderer.viewportToFramedGraph({x:pe,y:Ne}),ue=Ee.x-xe.x,Re=Ee.y-xe.y,Je=$.getState();$.setState({x:Je.x+ue,y:Je.y+Re}),this.lastMouseX=pe,this.lastMouseY=Ne,ne.preventDefault(),ne.stopPropagation()}}},Ie.prototype.handleWheel=function(ne){var ae=this;if(this.enabled){ne.preventDefault(),ne.stopPropagation();var N=(0,V.getWheelDelta)(ne);if(N){var $=(0,V.getWheelCoords)(ne,this.container);if(this.emit("wheel",$),!$.sigmaDefaultPrevented){var re=N>0?1/1.7:1.7,pe=this.renderer.getCamera(),Ne=pe.getBoundedRatio(pe.getState().ratio*re),Ee=N>0?1:-1,xe=Date.now();this.currentWheelDirection===Ee&&this.lastWheelTriggerTime&&xe-this.lastWheelTriggerTime<50||(pe.animate(this.renderer.getViewportZoomedState((0,V.getPosition)(ne,this.container),Ne),{easing:"quadraticOut",duration:250},function(){ae.currentWheelDirection=0}),this.currentWheelDirection=Ee,this.lastWheelTriggerTime=xe)}}}},Ie.prototype.handleOut=function(){},Ie}(V.default);be.default=oe},1565:function(He,be,z){"use strict";var te,X=this&&this.__extends||(te=function(ie,Y){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,oe){G.__proto__=oe}||function(G,oe){for(var ye in oe)Object.prototype.hasOwnProperty.call(oe,ye)&&(G[ye]=oe[ye])})(ie,Y)},function(ie,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function G(){this.constructor=ie}te(ie,Y),ie.prototype=null===Y?Object.create(Y):(G.prototype=Y.prototype,new G)}),M=this&&this.__createBinding||(Object.create?function(te,ie,Y,G){void 0===G&&(G=Y),Object.defineProperty(te,G,{enumerable:!0,get:function(){return ie[Y]}})}:function(te,ie,Y,G){void 0===G&&(G=Y),te[G]=ie[Y]}),U=this&&this.__setModuleDefault||(Object.create?function(te,ie){Object.defineProperty(te,"default",{enumerable:!0,value:ie})}:function(te,ie){te.default=ie}),O=this&&this.__importStar||function(te){if(te&&te.__esModule)return te;var ie={};if(null!=te)for(var Y in te)"default"!==Y&&Object.prototype.hasOwnProperty.call(te,Y)&&M(ie,te,Y);return U(ie,te),ie},V=this&&this.__read||function(te,ie){var Y="function"==typeof Symbol&&te[Symbol.iterator];if(!Y)return te;var oe,Ie,G=Y.call(te),ye=[];try{for(;(void 0===ie||ie-- >0)&&!(oe=G.next()).done;)ye.push(oe.value)}catch(ne){Ie={error:ne}}finally{try{oe&&!oe.done&&(Y=G.return)&&Y.call(G)}finally{if(Ie)throw Ie.error}}return ye};Object.defineProperty(be,"__esModule",{value:!0});var L=O(z(5473)),Z=function(te){function ie(Y,G){var oe=te.call(this,Y,G)||this;return oe.enabled=!0,oe.isMoving=!1,oe.touchMode=0,oe.handleStart=oe.handleStart.bind(oe),oe.handleLeave=oe.handleLeave.bind(oe),oe.handleMove=oe.handleMove.bind(oe),Y.addEventListener("touchstart",oe.handleStart,!1),Y.addEventListener("touchend",oe.handleLeave,!1),Y.addEventListener("touchcancel",oe.handleLeave,!1),Y.addEventListener("touchmove",oe.handleMove,!1),oe}return X(ie,te),ie.prototype.kill=function(){var Y=this.container;Y.removeEventListener("touchstart",this.handleStart),Y.removeEventListener("touchend",this.handleLeave),Y.removeEventListener("touchcancel",this.handleLeave),Y.removeEventListener("touchmove",this.handleMove)},ie.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},ie.prototype.dispatchRelatedMouseEvent=function(Y,G,oe,ye){var Ie=oe||(0,L.getPosition)(G.touches[0],this.container),ne=new MouseEvent(Y,{clientX:Ie.x,clientY:Ie.y,altKey:G.altKey,ctrlKey:G.ctrlKey});ne.isFakeSigmaMouseEvent=!0,(ye||this.container).dispatchEvent(ne)},ie.prototype.handleStart=function(Y){var G=this;if(this.enabled){Y.preventDefault(),1===Y.touches.length&&this.dispatchRelatedMouseEvent("mousedown",Y);var oe=(0,L.getTouchesArray)(Y.touches);if(this.isMoving=!0,this.touchMode=oe.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=oe.map(function(pe){return(0,L.getPosition)(pe,G.container)}),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var ye=V(this.startTouchesPositions,2),Ie=ye[0],ne=Ie.x,ae=Ie.y,N=ye[1],$=N.x,re=N.y;this.startTouchesAngle=Math.atan2(re-ae,$-ne),this.startTouchesDistance=Math.sqrt(Math.pow($-ne,2)+Math.pow(re-ae,2))}this.emit("touchdown",(0,L.getTouchCoords)(Y,this.container))}},ie.prototype.handleLeave=function(Y){if(this.enabled){switch(Y.preventDefault(),0===Y.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",Y,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",Y,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===Y.touches.length){this.handleStart(Y),Y.preventDefault();break}case 1:if(this.isMoving){var G=this.renderer.getCamera(),oe=G.getState(),ye=G.getPreviousState()||{x:0,y:0};G.animate({x:oe.x+3*(oe.x-ye.x),y:oe.y+3*(oe.y-ye.y)},{duration:200,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,L.getTouchCoords)(Y,this.container))}},ie.prototype.handleMove=function(Y){var G,oe=this;if(this.enabled){Y.preventDefault(),1===Y.touches.length&&this.dispatchRelatedMouseEvent("mousemove",Y);var ye=this.renderer.getCamera(),Ie=this.startCameraState,ae=(0,L.getTouchesArray)(Y.touches).map(function(gt){return(0,L.getPosition)(gt,oe.container)});switch(this.lastTouchesPositions=ae,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){oe.isMoving=!1},200),this.touchMode){case 1:var N=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),$=N.x,re=N.y,pe=this.renderer.viewportToFramedGraph(ae[0]);ye.setState({x:Ie.x+$-(Ne=pe.x),y:Ie.y+re-(Ee=pe.y)});break;case 2:var xe={},ue=ae[0],Re=ue.x,Je=ue.y,ke=ae[1],qe=ke.x,ot=ke.y,yt=Math.atan2(ot-Je,qe-Re)-this.startTouchesAngle,hn=Math.hypot(ot-Je,qe-Re)/this.startTouchesDistance,Be=ye.getBoundedRatio(Ie.ratio/hn);xe.ratio=Be,xe.angle=Ie.angle+yt;var Ne,lt=this.getDimensions(),Ve=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:Ie}),Ge=Math.min(lt.width,lt.height),st=Be/Ge,Ee=Je-Ge/2/(Ge/lt.height);Ee=(G=V([(Ne=Re-Ge/2/(Ge/lt.width))*Math.cos(-xe.angle)-Ee*Math.sin(-xe.angle),Ee*Math.cos(-xe.angle)+Ne*Math.sin(-xe.angle)],2))[1],xe.x=Ve.x-(Ne=G[0])*st,xe.y=Ve.y+Ee*st,ye.setState(xe)}this.emit("touchmove",(0,L.getTouchCoords)(Y,this.container))}},ie}(L.default);be.default=Z},4942:(He,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.edgeLabelsToDisplayFromNodes=be.LabelGrid=void 0;var z=function(){function U(O,V){this.key=O,this.size=V}return U.compare=function(O,V){return O.size>V.size?-1:O.size<V.size||O.key>V.key?1:-1},U}(),X=function(){function U(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return U.prototype.resizeAndClear=function(O,V){this.width=O.width,this.height=O.height,this.cellSize=V,this.columns=Math.ceil(O.width/V),this.rows=Math.ceil(O.height/V),this.cells={}},U.prototype.getIndex=function(O){var V=Math.floor(O.x/this.cellSize);return Math.floor(O.y/this.cellSize)*this.columns+V},U.prototype.add=function(O,V,L){var R=new z(O,V),j=this.getIndex(L),J=this.cells[j];J||(this.cells[j]=J=[]),J.push(R)},U.prototype.organize=function(){for(var O in this.cells)this.cells[O].sort(z.compare)},U.prototype.getLabelsToDisplay=function(O,V){var L=this.cellSize*this.cellSize,J=Math.ceil(L/O/O*V/L),Z=[];for(var te in this.cells)for(var ie=this.cells[te],Y=0;Y<Math.min(J,ie.length);Y++)Z.push(ie[Y].key);return Z},U}();be.LabelGrid=X,be.edgeLabelsToDisplayFromNodes=function M(U){var V=U.hoveredNode,L=U.highlightedNodes,R=U.displayedNodeLabels,j=[];return U.graph.forEachEdge(function(J,Z,te,ie){(te===V||ie===V||L.has(te)||L.has(ie)||R.has(te)&&R.has(ie))&&j.push(J)}),j}},3650:function(He,be,z){"use strict";var X=this&&this.__read||function(xe,ue){var Re="function"==typeof Symbol&&xe[Symbol.iterator];if(!Re)return xe;var ke,ot,Je=Re.call(xe),qe=[];try{for(;(void 0===ue||ue-- >0)&&!(ke=Je.next()).done;)qe.push(ke.value)}catch(yt){ot={error:yt}}finally{try{ke&&!ke.done&&(Re=Je.return)&&Re.call(Je)}finally{if(ot)throw ot.error}}return qe},M=this&&this.__spreadArray||function(xe,ue,Re){if(Re||2===arguments.length)for(var qe,Je=0,ke=ue.length;Je<ke;Je++)(qe||!(Je in ue))&&(qe||(qe=Array.prototype.slice.call(ue,0,Je)),qe[Je]=ue[Je]);return xe.concat(qe||Array.prototype.slice.call(ue))},U=this&&this.__importDefault||function(xe){return xe&&xe.__esModule?xe:{default:xe}};Object.defineProperty(be,"__esModule",{value:!0}),be.rectangleCollidesWithQuad=be.squareCollidesWithQuad=be.getCircumscribedAlignedRectangle=be.isRectangleAligned=void 0;var O=U(z(3333)),R="outside",ye=!1;function Ie(xe){return xe.x1===xe.x2||xe.y1===xe.y2}function ne(xe){var ue=Math.sqrt(Math.pow(xe.x2-xe.x1,2)+Math.pow(xe.y2-xe.y1,2)),Re_x=(xe.y1-xe.y2)*xe.height/ue,Re_y=(xe.x2-xe.x1)*xe.height/ue,Je={x:xe.x1,y:xe.y1},ke={x:xe.x2,y:xe.y2},qe={x:xe.x1+Re_x,y:xe.y1+Re_y},ot={x:xe.x2+Re_x,y:xe.y2+Re_y},yt=Math.min(Je.x,ke.x,qe.x,ot.x),hn=Math.max(Je.x,ke.x,qe.x,ot.x),Be=Math.min(Je.y,ke.y,qe.y,ot.y);return{x1:yt,y1:Be,x2:hn,y2:Be,height:Math.max(Je.y,ke.y,qe.y,ot.y)-Be}}function ae(xe,ue,Re,Je,ke,qe,ot){return xe<Je+qe&&xe+Re>Je&&ue<ke+ot&&ue+Re>ke}function N(xe,ue,Re,Je,ke,qe,ot,yt){return xe<ke+ot&&xe+Re>ke&&ue<qe+yt&&ue+Je>qe}function $(xe,ue,Re,Je,ke,qe){var Be=xe<Re+ke/2;return ue<Je+qe/2?Be?1:2:Be?3:4}be.isRectangleAligned=Ie,be.getCircumscribedAlignedRectangle=ne,be.squareCollidesWithQuad=ae,be.rectangleCollidesWithQuad=N;var Ee=function(){function xe(ue){var Re;void 0===ue&&(ue={}),this.containers=((Re={})[R]=[],Re),this.cache=null,this.lastRectangle=null;var Je=Math.pow(4,5);this.data=new Float32Array((4*Je-1)/3*4),this.resize(ue.boundaries?ue.boundaries:{x:0,y:0,width:1,height:1})}return xe.prototype.add=function(ue,Re,Je,ke){return function pe(xe,ue,Re,Je,ke,qe,ot){for(var yt=ke-ot,hn=qe-ot,Be=2*ot,lt=0,Ve=0;;){if(lt>=xe)return Re[Ve]=Re[Ve]||[],void Re[Ve].push(Je);var Ge=4*Ve+4,bt=4*Ve+8,wt=4*Ve+12,st=4*Ve+16,gt=ae(yt,hn,Be,ue[Ge+0],ue[Ge+1],ue[Ge+2],ue[Ge+3]),Me=ae(yt,hn,Be,ue[bt+0],ue[bt+1],ue[bt+2],ue[bt+3]),ce=ae(yt,hn,Be,ue[wt+0],ue[wt+1],ue[wt+2],ue[wt+3]),At=ae(yt,hn,Be,ue[st+0],ue[st+1],ue[st+2],ue[st+3]),Ft=[gt,Me,ce,At].reduce(function(Tn,$n){return $n?Tn+1:Tn},0);if(0===Ft&&0===lt)return Re[R].push(Je),void(!ye&&Re[R].length>=5&&(ye=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===Ft)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(lt,", key: ").concat(Je,", x: ").concat(ke,", y: ").concat(qe,", size: ").concat(ot,")."));if(3===Ft)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(lt,", key: ").concat(Je,", x: ").concat(ke,", y: ").concat(qe,", size: ").concat(ot,")."));if(Ft>1)return Re[Ve]=Re[Ve]||[],void Re[Ve].push(Je);lt++,gt&&(Ve=Ge),Me&&(Ve=bt),ce&&(Ve=wt),At&&(Ve=st)}}(5,this.data,this.containers,ue,Re,Je,ke),this},xe.prototype.resize=function(ue){this.clear(),this.data[0]=ue.x,this.data[1]=ue.y,this.data[2]=ue.width,this.data[3]=ue.height,function re(xe,ue){for(var Re=[0,0];Re.length;){var Je=Re.pop(),ke=Re.pop(),qe=4*ke+4,ot=4*ke+8,yt=4*ke+12,hn=4*ke+16,Be=ue[ke+0],lt=ue[ke+1],bt=ue[ke+2]/2,wt=ue[ke+3]/2;ue[qe+0]=Be,ue[qe+1]=lt,ue[qe+2]=bt,ue[qe+3]=wt,ue[ot+0]=Be+bt,ue[ot+1]=lt,ue[ot+2]=bt,ue[ot+3]=wt,ue[yt+0]=Be,ue[yt+1]=lt+wt,ue[yt+2]=bt,ue[yt+3]=wt,ue[hn+0]=Be+bt,ue[hn+1]=lt+wt,ue[hn+2]=bt,ue[hn+3]=wt,Je<xe-1&&(Re.push(hn,Je+1),Re.push(yt,Je+1),Re.push(ot,Je+1),Re.push(qe,Je+1))}}(5,this.data)},xe.prototype.clear=function(){var ue;return this.containers=((ue={})[R]=[],ue),this},xe.prototype.point=function(ue,Re){var Je=this.containers[R],ke=0,qe=0;do{this.containers[ke]&&Je.push.apply(Je,M([],X(this.containers[ke]),!1)),ke=4*ke+4*$(ue,Re,this.data[ke+0],this.data[ke+1],this.data[ke+2],this.data[ke+3]),qe++}while(qe<=5);return Je},xe.prototype.rectangle=function(ue,Re,Je,ke,qe){var ot,yt=this.lastRectangle;return yt&&ue===yt.x1&&Je===yt.x2&&Re===yt.y1&&ke===yt.y2&&qe===yt.height||(this.lastRectangle={x1:ue,y1:Re,x2:Je,y2:ke,height:qe},Ie(this.lastRectangle)||(this.lastRectangle=ne(this.lastRectangle)),this.cache=function Ne(xe,ue,Re,Je,ke,qe,ot){for(var Be,yt=[0,0],hn=[];yt.length;){var lt=yt.pop(),Ve=yt.pop();if((Be=Re[Ve])&&(0,O.default)(hn,Be),!(lt>=xe)){var Ge=4*Ve+4,bt=4*Ve+8,wt=4*Ve+12,st=4*Ve+16,gt=N(Je,ke,qe,ot,ue[Ge+0],ue[Ge+1],ue[Ge+2],ue[Ge+3]),Me=N(Je,ke,qe,ot,ue[bt+0],ue[bt+1],ue[bt+2],ue[bt+3]),ce=N(Je,ke,qe,ot,ue[wt+0],ue[wt+1],ue[wt+2],ue[wt+3]),At=N(Je,ke,qe,ot,ue[st+0],ue[st+1],ue[st+2],ue[st+3]);gt&&yt.push(Ge,lt+1),Me&&yt.push(bt,lt+1),ce&&yt.push(wt,lt+1),At&&yt.push(st,lt+1)}}return hn}(5,this.data,this.containers,ue,Re,Math.abs(ue-Je)||Math.abs(Re-ke),qe),(ot=this.cache).push.apply(ot,M([],X(this.containers[R]),!1))),this.cache},xe}();be.default=Ee},756:function(He,be,z){"use strict";var X=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(be,"__esModule",{value:!0}),be.Sigma=be.MouseCaptor=be.QuadTree=be.Camera=void 0;var M=X(z(4870));be.Sigma=M.default;var U=X(z(2002));be.Camera=U.default;var O=X(z(3650));be.QuadTree=O.default;var V=X(z(2465));be.MouseCaptor=V.default,be.default=M.default},1285:(He,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.default=function z(X,M,U,O,V){var L=V.edgeLabelSize,R=V.edgeLabelFont,j=V.edgeLabelWeight,Z=M.label;if(Z){X.fillStyle=V.edgeLabelColor.attribute?M[V.edgeLabelColor.attribute]||V.edgeLabelColor.color||"#000":V.edgeLabelColor.color,X.font="".concat(j," ").concat(L,"px ").concat(R);var te=U.size,ie=O.size,Y=U.x,G=U.y,oe=O.x,ye=O.y,Ie=(Y+oe)/2,ne=(G+ye)/2,ae=oe-Y,N=ye-G,$=Math.sqrt(ae*ae+N*N);if(!($<te+ie)){Ie=((Y+=ae*te/$)+(oe-=ae*ie/$))/2,ne=((G+=N*te/$)+(ye-=N*ie/$))/2,ae=oe-Y,N=ye-G,$=Math.sqrt(ae*ae+N*N);var Ne,re=X.measureText(Z).width;if(re>$){for(re=X.measureText(Z+="\u2026").width;re>$&&Z.length>1;)Z=Z.slice(0,-2)+"\u2026",re=X.measureText(Z).width;if(Z.length<4)return}Ne=ae>0?N>0?Math.acos(ae/$):Math.asin(N/$):N>0?Math.acos(ae/$)+Math.PI:Math.asin(ae/$)+Math.PI/2,X.save(),X.translate(Ie,ne),X.rotate(Ne),X.fillText(Z,-re/2,M.size/2+L),X.restore()}}}},4997:function(He,be,z){"use strict";var X=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(be,"__esModule",{value:!0});var M=X(z(9597));be.default=function U(O,V,L){var R=L.labelSize,j=L.labelFont;if(O.font="".concat(L.labelWeight," ").concat(R,"px ").concat(j),O.fillStyle="#FFF",O.shadowOffsetX=0,O.shadowOffsetY=0,O.shadowBlur=8,O.shadowColor="#000","string"==typeof V.label){var te=O.measureText(V.label).width,ie=Math.round(te+5),Y=Math.round(R+4),G=Math.max(V.size,R/2)+2,oe=Math.asin(Y/2/G),ye=Math.sqrt(Math.abs(Math.pow(G,2)-Math.pow(Y/2,2)));O.beginPath(),O.moveTo(V.x+ye,V.y+Y/2),O.lineTo(V.x+G+ie,V.y+Y/2),O.lineTo(V.x+G+ie,V.y-Y/2),O.lineTo(V.x+ye,V.y-Y/2),O.arc(V.x,V.y,G,oe,-oe),O.closePath(),O.fill()}else O.beginPath(),O.arc(V.x,V.y,V.size+2,0,2*Math.PI),O.closePath(),O.fill();O.shadowOffsetX=0,O.shadowOffsetY=0,O.shadowBlur=0,(0,M.default)(O,V,L)}},9597:(He,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.default=function z(X,M,U){if(M.label){var O=U.labelSize,V=U.labelFont,L=U.labelWeight;X.fillStyle=U.labelColor.attribute?M[U.labelColor.attribute]||U.labelColor.color||"#000":U.labelColor.color,X.font="".concat(L," ").concat(O,"px ").concat(V),X.fillText(M.label,M.x+M.size+3,M.y+O/3)}}},6160:function(He,be,z){"use strict";var V,X=this&&this.__extends||(V=function(L,R){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,J){j.__proto__=J}||function(j,J){for(var Z in J)Object.prototype.hasOwnProperty.call(J,Z)&&(j[Z]=J[Z])})(L,R)},function(L,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function j(){this.constructor=L}V(L,R),L.prototype=null===R?Object.create(R):(j.prototype=R.prototype,new j)});Object.defineProperty(be,"__esModule",{value:!0}),be.createEdgeCompoundProgram=be.AbstractEdgeProgram=void 0;var U=function(V){function L(R,j,J,Z,te){return V.call(this,R,j,J,Z,te)||this}return X(L,V),L}(z(727).AbstractProgram);be.AbstractEdgeProgram=U,be.createEdgeCompoundProgram=function O(V){return function(){function L(R,j){this.programs=V.map(function(J){return new J(R,j)})}return L.prototype.bufferData=function(){this.programs.forEach(function(R){return R.bufferData()})},L.prototype.allocate=function(R){this.programs.forEach(function(j){return j.allocate(R)})},L.prototype.bind=function(){},L.prototype.computeIndices=function(){this.programs.forEach(function(R){return R.computeIndices()})},L.prototype.render=function(R){this.programs.forEach(function(j){j.bind(),j.bufferData(),j.render(R)})},L.prototype.process=function(R,j,J,Z,te){this.programs.forEach(function(ie){return ie.process(R,j,J,Z,te)})},L}()}},4588:function(He,be,z){"use strict";var V,X=this&&this.__extends||(V=function(L,R){return(V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,J){j.__proto__=J}||function(j,J){for(var Z in J)Object.prototype.hasOwnProperty.call(J,Z)&&(j[Z]=J[Z])})(L,R)},function(L,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function j(){this.constructor=L}V(L,R),L.prototype=null===R?Object.create(R):(j.prototype=R.prototype,new j)});Object.defineProperty(be,"__esModule",{value:!0}),be.createNodeCompoundProgram=be.AbstractNodeProgram=void 0;var U=function(V){function L(R,j,J,Z,te){var ie=V.call(this,R,j,J,Z,te)||this;ie.positionLocation=R.getAttribLocation(ie.program,"a_position"),ie.sizeLocation=R.getAttribLocation(ie.program,"a_size"),ie.colorLocation=R.getAttribLocation(ie.program,"a_color");var Y=R.getUniformLocation(ie.program,"u_matrix");if(null===Y)throw new Error("AbstractNodeProgram: error while getting matrixLocation");ie.matrixLocation=Y;var G=R.getUniformLocation(ie.program,"u_ratio");if(null===G)throw new Error("AbstractNodeProgram: error while getting ratioLocation");ie.ratioLocation=G;var oe=R.getUniformLocation(ie.program,"u_scale");if(null===oe)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return ie.scaleLocation=oe,ie}return X(L,V),L.prototype.bind=function(){var R=this.gl;R.enableVertexAttribArray(this.positionLocation),R.enableVertexAttribArray(this.sizeLocation),R.enableVertexAttribArray(this.colorLocation),R.vertexAttribPointer(this.positionLocation,2,R.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),R.vertexAttribPointer(this.sizeLocation,1,R.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),R.vertexAttribPointer(this.colorLocation,4,R.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},L}(z(727).AbstractProgram);be.AbstractNodeProgram=U,be.createNodeCompoundProgram=function O(V){return function(){function L(R,j){this.programs=V.map(function(J){return new J(R,j)})}return L.prototype.bufferData=function(){this.programs.forEach(function(R){return R.bufferData()})},L.prototype.allocate=function(R){this.programs.forEach(function(j){return j.allocate(R)})},L.prototype.bind=function(){},L.prototype.render=function(R){this.programs.forEach(function(j){j.bind(),j.bufferData(),j.render(R)})},L.prototype.process=function(R,j,J){this.programs.forEach(function(Z){return Z.process(R,j,J)})},L}()}},727:(He,be,z)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.AbstractProgram=void 0;var X=z(5166),M=function(){function U(O,V,L,R,j){this.array=new Float32Array,this.points=R,this.attributes=j,this.gl=O,this.vertexShaderSource=V,this.fragmentShaderSource=L;var J=O.createBuffer();if(null===J)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=J,O.bindBuffer(O.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,X.loadVertexShader)(O,this.vertexShaderSource),this.fragmentShader=(0,X.loadFragmentShader)(O,this.fragmentShaderSource),this.program=(0,X.loadProgram)(O,[this.vertexShader,this.fragmentShader])}return U.prototype.bufferData=function(){var O=this.gl;O.bufferData(O.ARRAY_BUFFER,this.array,O.DYNAMIC_DRAW)},U.prototype.allocate=function(O){this.array=new Float32Array(this.points*this.attributes*O)},U.prototype.hasNothingToRender=function(){return 0===this.array.length},U}();be.AbstractProgram=M},1391:function(He,be,z){"use strict";var X=this&&this.__importDefault||function(L){return L&&L.__esModule?L:{default:L}};Object.defineProperty(be,"__esModule",{value:!0});var M=z(6160),U=X(z(1034)),O=X(z(2542)),V=(0,M.createEdgeCompoundProgram)([O.default,U.default]);be.default=V},1034:function(He,be,z){"use strict";var te,X=this&&this.__extends||(te=function(ie,Y){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,oe){G.__proto__=oe}||function(G,oe){for(var ye in oe)Object.prototype.hasOwnProperty.call(oe,ye)&&(G[ye]=oe[ye])})(ie,Y)},function(ie,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function G(){this.constructor=ie}te(ie,Y),ie.prototype=null===Y?Object.create(Y):(G.prototype=Y.prototype,new G)}),M=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(be,"__esModule",{value:!0});var U=z(1699),O=M(z(4647)),V=M(z(2018)),Z=function(te){function ie(Y){var G=te.call(this,Y,O.default,V.default,3,9)||this;G.positionLocation=Y.getAttribLocation(G.program,"a_position"),G.colorLocation=Y.getAttribLocation(G.program,"a_color"),G.normalLocation=Y.getAttribLocation(G.program,"a_normal"),G.radiusLocation=Y.getAttribLocation(G.program,"a_radius"),G.barycentricLocation=Y.getAttribLocation(G.program,"a_barycentric");var oe=Y.getUniformLocation(G.program,"u_matrix");if(null===oe)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");G.matrixLocation=oe;var ye=Y.getUniformLocation(G.program,"u_sqrtZoomRatio");if(null===ye)throw new Error("EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation");G.sqrtZoomRatioLocation=ye;var Ie=Y.getUniformLocation(G.program,"u_correctionRatio");if(null===Ie)throw new Error("EdgeArrowHeadProgram: error while getting correctionRatioLocation");return G.correctionRatioLocation=Ie,G.bind(),G}return X(ie,te),ie.prototype.bind=function(){var Y=this.gl;Y.enableVertexAttribArray(this.positionLocation),Y.enableVertexAttribArray(this.normalLocation),Y.enableVertexAttribArray(this.radiusLocation),Y.enableVertexAttribArray(this.colorLocation),Y.enableVertexAttribArray(this.barycentricLocation),Y.vertexAttribPointer(this.positionLocation,2,Y.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,0),Y.vertexAttribPointer(this.normalLocation,2,Y.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,8),Y.vertexAttribPointer(this.radiusLocation,1,Y.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,16),Y.vertexAttribPointer(this.colorLocation,4,Y.UNSIGNED_BYTE,!0,9*Float32Array.BYTES_PER_ELEMENT,20),Y.vertexAttribPointer(this.barycentricLocation,3,Y.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,24)},ie.prototype.computeIndices=function(){},ie.prototype.process=function(Y,G,oe,ye,Ie){if(ye)for(var ne=27*Ie,ae=ne+27;ne<ae;ne++)this.array[ne]=0;else{var N=oe.size||1,$=G.size||1,re=Y.x,pe=Y.y,Ne=G.x,Ee=G.y,xe=(0,U.floatColor)(oe.color),ue=Ne-re,Re=Ee-pe,Je=ue*ue+Re*Re,ke=0,qe=0;Je&&(ke=-Re*(Je=1/Math.sqrt(Je))*N,qe=ue*Je*N);var ot=27*Ie,yt=this.array;yt[ot++]=Ne,yt[ot++]=Ee,yt[ot++]=-ke,yt[ot++]=-qe,yt[ot++]=$,yt[ot++]=xe,yt[ot++]=1,yt[ot++]=0,yt[ot++]=0,yt[ot++]=Ne,yt[ot++]=Ee,yt[ot++]=-ke,yt[ot++]=-qe,yt[ot++]=$,yt[ot++]=xe,yt[ot++]=0,yt[ot++]=1,yt[ot++]=0,yt[ot++]=Ne,yt[ot++]=Ee,yt[ot++]=-ke,yt[ot++]=-qe,yt[ot++]=$,yt[ot++]=xe,yt[ot++]=0,yt[ot++]=0,yt[ot]=1}},ie.prototype.render=function(Y){if(!this.hasNothingToRender()){var G=this.gl;G.useProgram(this.program),G.uniformMatrix3fv(this.matrixLocation,!1,Y.matrix),G.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(Y.ratio)),G.uniform1f(this.correctionRatioLocation,Y.correctionRatio),G.drawArrays(G.TRIANGLES,0,this.array.length/9)}},ie}(z(6160).AbstractEdgeProgram);be.default=Z},2542:function(He,be,z){"use strict";var te,X=this&&this.__extends||(te=function(ie,Y){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,oe){G.__proto__=oe}||function(G,oe){for(var ye in oe)Object.prototype.hasOwnProperty.call(oe,ye)&&(G[ye]=oe[ye])})(ie,Y)},function(ie,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function G(){this.constructor=ie}te(ie,Y),ie.prototype=null===Y?Object.create(Y):(G.prototype=Y.prototype,new G)}),M=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(be,"__esModule",{value:!0});var U=z(6160),O=z(1699),V=M(z(2529)),L=M(z(427)),Z=function(te){function ie(Y){var G=te.call(this,Y,V.default,L.default,4,6)||this,oe=Y.createBuffer();if(null===oe)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");G.indicesBuffer=oe,G.positionLocation=Y.getAttribLocation(G.program,"a_position"),G.colorLocation=Y.getAttribLocation(G.program,"a_color"),G.normalLocation=Y.getAttribLocation(G.program,"a_normal"),G.radiusLocation=Y.getAttribLocation(G.program,"a_radius");var ye=Y.getUniformLocation(G.program,"u_matrix");if(null===ye)throw new Error("EdgeClampedProgram: error while getting matrixLocation");G.matrixLocation=ye;var Ie=Y.getUniformLocation(G.program,"u_sqrtZoomRatio");if(null===Ie)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");G.sqrtZoomRatioLocation=Ie;var ne=Y.getUniformLocation(G.program,"u_correctionRatio");if(null===ne)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");return G.correctionRatioLocation=ne,G.canUse32BitsIndices=(0,O.canUse32BitsIndices)(Y),G.IndicesArray=G.canUse32BitsIndices?Uint32Array:Uint16Array,G.indicesArray=new G.IndicesArray,G.indicesType=G.canUse32BitsIndices?Y.UNSIGNED_INT:Y.UNSIGNED_SHORT,G.bind(),G}return X(ie,te),ie.prototype.bind=function(){var Y=this.gl;Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),Y.enableVertexAttribArray(this.positionLocation),Y.enableVertexAttribArray(this.normalLocation),Y.enableVertexAttribArray(this.colorLocation),Y.enableVertexAttribArray(this.radiusLocation),Y.vertexAttribPointer(this.positionLocation,2,Y.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),Y.vertexAttribPointer(this.normalLocation,2,Y.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),Y.vertexAttribPointer(this.colorLocation,4,Y.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,16),Y.vertexAttribPointer(this.radiusLocation,1,Y.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,20)},ie.prototype.process=function(Y,G,oe,ye,Ie){if(ye)for(var ne=24*Ie,ae=ne+24;ne<ae;ne++)this.array[ne]=0;else{var N=oe.size||1,$=Y.x,re=Y.y,pe=G.x,Ne=G.y,Ee=G.size||1,xe=(0,O.floatColor)(oe.color),ue=pe-$,Re=Ne-re,Je=ue*ue+Re*Re,ke=0,qe=0;Je&&(ke=-Re*(Je=1/Math.sqrt(Je))*N,qe=ue*Je*N);var ot=24*Ie,yt=this.array;yt[ot++]=$,yt[ot++]=re,yt[ot++]=ke,yt[ot++]=qe,yt[ot++]=xe,yt[ot++]=0,yt[ot++]=$,yt[ot++]=re,yt[ot++]=-ke,yt[ot++]=-qe,yt[ot++]=xe,yt[ot++]=0,yt[ot++]=pe,yt[ot++]=Ne,yt[ot++]=ke,yt[ot++]=qe,yt[ot++]=xe,yt[ot++]=Ee,yt[ot++]=pe,yt[ot++]=Ne,yt[ot++]=-ke,yt[ot++]=-qe,yt[ot++]=xe,yt[ot]=-Ee}},ie.prototype.computeIndices=function(){for(var Y=this.array.length/6,oe=new this.IndicesArray(Y+Y/2),ye=0,Ie=0;ye<Y;ye+=4)oe[Ie++]=ye,oe[Ie++]=ye+1,oe[Ie++]=ye+2,oe[Ie++]=ye+2,oe[Ie++]=ye+1,oe[Ie++]=ye+3;this.indicesArray=oe},ie.prototype.bufferData=function(){te.prototype.bufferData.call(this);var Y=this.gl;Y.bufferData(Y.ELEMENT_ARRAY_BUFFER,this.indicesArray,Y.STATIC_DRAW)},ie.prototype.render=function(Y){if(!this.hasNothingToRender()){var G=this.gl;G.useProgram(this.program),G.uniformMatrix3fv(this.matrixLocation,!1,Y.matrix),G.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(Y.ratio)),G.uniform1f(this.correctionRatioLocation,Y.correctionRatio),G.drawElements(G.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},ie}(U.AbstractEdgeProgram);be.default=Z},8959:function(He,be,z){"use strict";var te,X=this&&this.__extends||(te=function(ie,Y){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,oe){G.__proto__=oe}||function(G,oe){for(var ye in oe)Object.prototype.hasOwnProperty.call(oe,ye)&&(G[ye]=oe[ye])})(ie,Y)},function(ie,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");function G(){this.constructor=ie}te(ie,Y),ie.prototype=null===Y?Object.create(Y):(G.prototype=Y.prototype,new G)}),M=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(be,"__esModule",{value:!0});var U=z(1699),O=M(z(3364)),V=M(z(427)),Z=function(te){function ie(Y){var G=te.call(this,Y,O.default,V.default,4,5)||this,oe=Y.createBuffer();if(null===oe)throw new Error("EdgeProgram: error while creating indicesBuffer");G.indicesBuffer=oe,G.positionLocation=Y.getAttribLocation(G.program,"a_position"),G.colorLocation=Y.getAttribLocation(G.program,"a_color"),G.normalLocation=Y.getAttribLocation(G.program,"a_normal");var ye=Y.getUniformLocation(G.program,"u_matrix");if(null===ye)throw new Error("EdgeProgram: error while getting matrixLocation");G.matrixLocation=ye;var Ie=Y.getUniformLocation(G.program,"u_correctionRatio");if(null===Ie)throw new Error("EdgeProgram: error while getting correctionRatioLocation");G.correctionRatioLocation=Ie;var ne=Y.getUniformLocation(G.program,"u_sqrtZoomRatio");if(null===ne)throw new Error("EdgeProgram: error while getting sqrtZoomRatioLocation");return G.sqrtZoomRatioLocation=ne,G.canUse32BitsIndices=(0,U.canUse32BitsIndices)(Y),G.IndicesArray=G.canUse32BitsIndices?Uint32Array:Uint16Array,G.indicesArray=new G.IndicesArray,G.indicesType=G.canUse32BitsIndices?Y.UNSIGNED_INT:Y.UNSIGNED_SHORT,G.bind(),G}return X(ie,te),ie.prototype.bind=function(){var Y=this.gl;Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),Y.enableVertexAttribArray(this.positionLocation),Y.enableVertexAttribArray(this.normalLocation),Y.enableVertexAttribArray(this.colorLocation),Y.vertexAttribPointer(this.positionLocation,2,Y.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),Y.vertexAttribPointer(this.normalLocation,2,Y.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,8),Y.vertexAttribPointer(this.colorLocation,4,Y.UNSIGNED_BYTE,!0,5*Float32Array.BYTES_PER_ELEMENT,16)},ie.prototype.computeIndices=function(){for(var Y=this.array.length/5,oe=new this.IndicesArray(Y+Y/2),ye=0,Ie=0;ye<Y;ye+=4)oe[Ie++]=ye,oe[Ie++]=ye+1,oe[Ie++]=ye+2,oe[Ie++]=ye+2,oe[Ie++]=ye+1,oe[Ie++]=ye+3;this.indicesArray=oe},ie.prototype.bufferData=function(){te.prototype.bufferData.call(this);var Y=this.gl;Y.bufferData(Y.ELEMENT_ARRAY_BUFFER,this.indicesArray,Y.STATIC_DRAW)},ie.prototype.process=function(Y,G,oe,ye,Ie){if(ye)for(var ne=20*Ie,ae=ne+20;ne<ae;ne++)this.array[ne]=0;else{var N=oe.size||1,$=Y.x,re=Y.y,pe=G.x,Ne=G.y,Ee=(0,U.floatColor)(oe.color),xe=pe-$,ue=Ne-re,Re=xe*xe+ue*ue,Je=0,ke=0;Re&&(Je=-ue*(Re=1/Math.sqrt(Re))*N,ke=xe*Re*N);var qe=20*Ie,ot=this.array;ot[qe++]=$,ot[qe++]=re,ot[qe++]=Je,ot[qe++]=ke,ot[qe++]=Ee,ot[qe++]=$,ot[qe++]=re,ot[qe++]=-Je,ot[qe++]=-ke,ot[qe++]=Ee,ot[qe++]=pe,ot[qe++]=Ne,ot[qe++]=Je,ot[qe++]=ke,ot[qe++]=Ee,ot[qe++]=pe,ot[qe++]=Ne,ot[qe++]=-Je,ot[qe++]=-ke,ot[qe]=Ee}},ie.prototype.render=function(Y){if(!this.hasNothingToRender()){var G=this.gl;G.useProgram(this.program),G.uniformMatrix3fv(this.matrixLocation,!1,Y.matrix),G.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(Y.ratio)),G.uniform1f(this.correctionRatioLocation,Y.correctionRatio),G.drawElements(G.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},ie}(z(6160).AbstractEdgeProgram);be.default=Z},105:function(He,be,z){"use strict";var Z,X=this&&this.__extends||(Z=function(te,ie){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,G){Y.__proto__=G}||function(Y,G){for(var oe in G)Object.prototype.hasOwnProperty.call(G,oe)&&(Y[oe]=G[oe])})(te,ie)},function(te,ie){if("function"!=typeof ie&&null!==ie)throw new TypeError("Class extends value "+String(ie)+" is not a constructor or null");function Y(){this.constructor=te}Z(te,ie),te.prototype=null===ie?Object.create(ie):(Y.prototype=ie.prototype,new Y)}),M=this&&this.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(be,"__esModule",{value:!0});var U=z(1699),O=M(z(7768)),V=M(z(2181)),J=function(Z){function te(ie){var Y=Z.call(this,ie,O.default,V.default,1,4)||this;return Y.bind(),Y}return X(te,Z),te.prototype.process=function(ie,Y,G){var oe=this.array,ye=1*G*4;if(Y)return oe[ye++]=0,oe[ye++]=0,oe[ye++]=0,void(oe[ye++]=0);var Ie=(0,U.floatColor)(ie.color);oe[ye++]=ie.x,oe[ye++]=ie.y,oe[ye++]=ie.size,oe[ye]=Ie},te.prototype.render=function(ie){if(!this.hasNothingToRender()){var Y=this.gl;Y.useProgram(this.program),Y.uniform1f(this.ratioLocation,1/Math.sqrt(ie.ratio)),Y.uniform1f(this.scaleLocation,ie.scalingRatio),Y.uniformMatrix3fv(this.matrixLocation,!1,ie.matrix),Y.drawArrays(Y.POINTS,0,this.array.length/4)}},te}(z(4588).AbstractNodeProgram);be.default=J},2018:He=>{(()=>{"use strict";var be={d:(M,U)=>{for(var O in U)be.o(U,O)&&!be.o(M,O)&&Object.defineProperty(M,O,{enumerable:!0,get:U[O]})},o:(M,U)=>Object.prototype.hasOwnProperty.call(M,U),r:M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})}},z={};be.r(z),be.d(z,{default:()=>X});const X="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";He.exports=z})()},4647:He=>{(()=>{"use strict";var be={d:(M,U)=>{for(var O in U)be.o(U,O)&&!be.o(M,O)&&Object.defineProperty(M,O,{enumerable:!0,get:U[O]})},o:(M,U)=>Object.prototype.hasOwnProperty.call(M,U),r:M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})}},z={};be.r(z),be.d(z,{default:()=>X});const X="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";He.exports=z})()},2529:He=>{(()=>{"use strict";var be={d:(M,U)=>{for(var O in U)be.o(U,O)&&!be.o(M,O)&&Object.defineProperty(M,O,{enumerable:!0,get:U[O]})},o:(M,U)=>Object.prototype.hasOwnProperty.call(M,U),r:M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})}},z={};be.r(z),be.d(z,{default:()=>X});const X="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";He.exports=z})()},427:He=>{(()=>{"use strict";var be={d:(M,U)=>{for(var O in U)be.o(U,O)&&!be.o(M,O)&&Object.defineProperty(M,O,{enumerable:!0,get:U[O]})},o:(M,U)=>Object.prototype.hasOwnProperty.call(M,U),r:M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})}},z={};be.r(z),be.d(z,{default:()=>X});const X="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}\n";He.exports=z})()},3364:He=>{(()=>{"use strict";var be={d:(M,U)=>{for(var O in U)be.o(U,O)&&!be.o(M,O)&&Object.defineProperty(M,O,{enumerable:!0,get:U[O]})},o:(M,U)=>Object.prototype.hasOwnProperty.call(M,U),r:M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})}},z={};be.r(z),be.d(z,{default:()=>X});const X='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the SQRT zoom ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n\n  // Finally, we adapt the edge thickness to the "SQRT rule" in sigma (so that\n  // items are not too big when zoomed in, and not too small when zoomed out).\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\n  // it\'s simpler like this:\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasint effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n';He.exports=z})()},2181:He=>{(()=>{"use strict";var be={d:(M,U)=>{for(var O in U)be.o(U,O)&&!be.o(M,O)&&Object.defineProperty(M,O,{enumerable:!0,get:U[O]})},o:(M,U)=>Object.prototype.hasOwnProperty.call(M,U),r:M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})}},z={};be.r(z),be.d(z,{default:()=>X});const X="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(transparent, v_color, t);\n}\n";He.exports=z})()},7768:He=>{(()=>{"use strict";var be={d:(M,U)=>{for(var O in U)be.o(U,O)&&!be.o(M,O)&&Object.defineProperty(M,O,{enumerable:!0,get:U[O]})},o:(M,U)=>Object.prototype.hasOwnProperty.call(M,U),r:M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})}},z={};be.r(z),be.d(z,{default:()=>X});const X="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";He.exports=z})()},5166:(He,be)=>{"use strict";function z(O,V,L){var j=V.createShader("VERTEX"===O?V.VERTEX_SHADER:V.FRAGMENT_SHADER);if(null===j)throw new Error("loadShader: error while creating the shader");if(V.shaderSource(j,L),V.compileShader(j),!V.getShaderParameter(j,V.COMPILE_STATUS)){var Z=V.getShaderInfoLog(j);throw V.deleteShader(j),new Error("loadShader: error while compiling the shader:\n".concat(Z,"\n").concat(L))}return j}Object.defineProperty(be,"__esModule",{value:!0}),be.loadProgram=be.loadFragmentShader=be.loadVertexShader=void 0,be.loadVertexShader=function X(O,V){return z("VERTEX",O,V)},be.loadFragmentShader=function M(O,V){return z("FRAGMENT",O,V)},be.loadProgram=function U(O,V){var R,j,L=O.createProgram();if(null===L)throw new Error("loadProgram: error while creating the program.");for(R=0,j=V.length;R<j;R++)O.attachShader(L,V[R]);if(O.linkProgram(L),!O.getProgramParameter(L,O.LINK_STATUS))throw O.deleteProgram(L),new Error("loadProgram: error while linking the program.");return L}},2621:function(He,be,z){"use strict";var X=this&&this.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(be,"__esModule",{value:!0}),be.DEFAULT_SETTINGS=be.validateSettings=void 0;var M=X(z(9597)),U=X(z(4997)),O=X(z(1285)),V=X(z(105)),L=X(z(8959)),R=X(z(1391));be.validateSettings=function j(J){if("number"!=typeof J.labelDensity||J.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var Z=J.minCameraRatio,te=J.maxCameraRatio;if("number"==typeof Z&&"number"==typeof te&&te<Z)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},be.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:M.default,hoverRenderer:U.default,edgeLabelRenderer:O.default,allowInvalidContainer:!1,nodeProgramClasses:{circle:V.default},edgeProgramClasses:{arrow:R.default,line:L.default}}},4870:function(He,be,z){"use strict";var ne,X=this&&this.__extends||(ne=function(ae,N){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,re){$.__proto__=re}||function($,re){for(var pe in re)Object.prototype.hasOwnProperty.call(re,pe)&&($[pe]=re[pe])})(ae,N)},function(ae,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function $(){this.constructor=ae}ne(ae,N),ae.prototype=null===N?Object.create(N):($.prototype=N.prototype,new $)}),M=this&&this.__assign||function(){return M=Object.assign||function(ne){for(var ae,N=1,$=arguments.length;N<$;N++)for(var re in ae=arguments[N])Object.prototype.hasOwnProperty.call(ae,re)&&(ne[re]=ae[re]);return ne},M.apply(this,arguments)},U=this&&this.__values||function(ne){var ae="function"==typeof Symbol&&Symbol.iterator,N=ae&&ne[ae],$=0;if(N)return N.call(ne);if(ne&&"number"==typeof ne.length)return{next:function(){return ne&&$>=ne.length&&(ne=void 0),{value:ne&&ne[$++],done:!ne}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")},O=this&&this.__importDefault||function(ne){return ne&&ne.__esModule?ne:{default:ne}};Object.defineProperty(be,"__esModule",{value:!0});var V=O(z(2002)),L=O(z(2465)),R=O(z(3650)),j=z(57),J=z(1699),Z=z(4942),te=z(2621),ie=O(z(1565)),Y=z(7611),G=z(3180);function oe(ne,ae,N){if(!N.hasOwnProperty("x")||!N.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(ae,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return N.color||(N.color=ne.defaultNodeColor),!N.label&&""!==N.label&&(N.label=null),N.label=null!=N.label?""+N.label:null,N.size||(N.size=2),N.hasOwnProperty("hidden")||(N.hidden=!1),N.hasOwnProperty("highlighted")||(N.highlighted=!1),N.hasOwnProperty("forceLabel")||(N.forceLabel=!1),(!N.type||""===N.type)&&(N.type=ne.defaultNodeType),N.zIndex||(N.zIndex=0),N}function ye(ne,ae,N){return N.color||(N.color=ne.defaultEdgeColor),N.label||(N.label=""),N.size||(N.size=.5),N.hasOwnProperty("hidden")||(N.hidden=!1),N.hasOwnProperty("forceLabel")||(N.forceLabel=!1),(!N.type||""===N.type)&&(N.type=ne.defaultEdgeType),N.zIndex||(N.zIndex=0),N}var Ie=function(ne){function ae(N,$,re){void 0===re&&(re={});var pe=ne.call(this)||this;if(pe.elements={},pe.canvasContexts={},pe.webGLContexts={},pe.activeListeners={},pe.quadtree=new R.default,pe.labelGrid=new Z.LabelGrid,pe.nodeDataCache={},pe.edgeDataCache={},pe.nodesWithForcedLabels=[],pe.edgesWithForcedLabels=[],pe.nodeExtent={x:[0,1],y:[0,1]},pe.matrix=(0,Y.identity)(),pe.invMatrix=(0,Y.identity)(),pe.correctionRatio=1,pe.customBBox=null,pe.normalizationFunction=(0,J.createNormalizationFunction)({x:[0,1],y:[0,1]}),pe.cameraSizeRatio=1,pe.width=0,pe.height=0,pe.pixelRatio=(0,J.getPixelRatio)(),pe.displayedLabels=new Set,pe.highlightedNodes=new Set,pe.hoveredNode=null,pe.hoveredEdge=null,pe.renderFrame=null,pe.renderHighlightedNodesFrame=null,pe.needToProcess=!1,pe.needToSoftProcess=!1,pe.checkEdgesEventsFrame=null,pe.nodePrograms={},pe.hoverNodePrograms={},pe.edgePrograms={},pe.settings=(0,J.assign)({},te.DEFAULT_SETTINGS,re),(0,te.validateSettings)(pe.settings),(0,J.validateGraph)(N),!($ instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var Ne in pe.graph=N,pe.container=$,pe.createWebGLContext("edges",{preserveDrawingBuffer:!0}),pe.createCanvasContext("edgeLabels"),pe.createWebGLContext("nodes"),pe.createCanvasContext("labels"),pe.createCanvasContext("hovers"),pe.createWebGLContext("hoverNodes"),pe.createCanvasContext("mouse"),pe.webGLContexts){var Ee=pe.webGLContexts[Ne];Ee.blendFunc(Ee.ONE,Ee.ONE_MINUS_SRC_ALPHA),Ee.enable(Ee.BLEND)}for(var xe in pe.settings.nodeProgramClasses){var ue=pe.settings.nodeProgramClasses[xe];pe.nodePrograms[xe]=new ue(pe.webGLContexts.nodes,pe),pe.hoverNodePrograms[xe]=new ue(pe.webGLContexts.hoverNodes,pe)}for(var xe in pe.settings.edgeProgramClasses)pe.edgePrograms[xe]=new(0,pe.settings.edgeProgramClasses[xe])(pe.webGLContexts.edges,pe);return pe.resize(),pe.camera=new V.default,pe.bindCameraHandlers(),pe.mouseCaptor=new L.default(pe.elements.mouse,pe),pe.touchCaptor=new ie.default(pe.elements.mouse,pe),pe.bindEventHandlers(),pe.bindGraphHandlers(),pe.handleSettingsUpdate(),pe.process(),pe.render(),pe}return X(ae,ne),ae.prototype.createCanvas=function(N){var $=(0,J.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(N)});return this.elements[N]=$,this.container.appendChild($),$},ae.prototype.createCanvasContext=function(N){var $=this.createCanvas(N);return this.canvasContexts[N]=$.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},ae.prototype.createWebGLContext=function(N,$){var Ne,re=this.createCanvas(N),pe=M({preserveDrawingBuffer:!1,antialias:!1},$||{});return(Ne=re.getContext("webgl2",pe))||(Ne=re.getContext("webgl",pe)),Ne||(Ne=re.getContext("experimental-webgl",pe)),this.webGLContexts[N]=Ne,this},ae.prototype.bindCameraHandlers=function(){var N=this;return this.activeListeners.camera=function(){N._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},ae.prototype.mouseIsOnNode=function(N,$,re){var pe=N.x,Ne=N.y,Ee=$.x,xe=$.y;return pe>Ee-re&&pe<Ee+re&&Ne>xe-re&&Ne<xe+re&&Math.sqrt(Math.pow(pe-Ee,2)+Math.pow(Ne-xe,2))<re},ae.prototype.getQuadNodes=function(N){var $=this.viewportToFramedGraph(N);return this.quadtree.point($.x,1-$.y)},ae.prototype.getNodeAtPosition=function(N){for(var $=N.x,re=N.y,pe=this.getQuadNodes(N),Ne=1/0,Ee=null,xe=0,ue=pe.length;xe<ue;xe++){var Re=pe[xe],Je=this.nodeDataCache[Re],ke=this.framedGraphToViewport(Je),qe=this.scaleSize(Je.size);if(!Je.hidden&&this.mouseIsOnNode(N,ke,qe)){var ot=Math.sqrt(Math.pow($-ke.x,2)+Math.pow(re-ke.y,2));ot<Ne&&(Ne=ot,Ee=Re)}}return Ee},ae.prototype.bindEventHandlers=function(){var N=this;this.activeListeners.handleResize=function(){N.needToSoftProcess=!0,N._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(re){var pe={event:re,preventSigmaDefault:function(){re.preventSigmaDefault()}},Ne=N.getNodeAtPosition(re);if(Ne&&N.hoveredNode!==Ne&&!N.nodeDataCache[Ne].hidden)return N.hoveredNode&&N.emit("leaveNode",M(M({},pe),{node:N.hoveredNode})),N.hoveredNode=Ne,N.emit("enterNode",M(M({},pe),{node:Ne})),void N.scheduleHighlightedNodesRender();if(N.hoveredNode){var Ee=N.nodeDataCache[N.hoveredNode],xe=N.framedGraphToViewport(Ee),ue=N.scaleSize(Ee.size);if(!N.mouseIsOnNode(re,xe,ue)){var Re=N.hoveredNode;return N.hoveredNode=null,N.emit("leaveNode",M(M({},pe),{node:Re})),void N.scheduleHighlightedNodesRender()}}!0===N.settings.enableEdgeHoverEvents?N.checkEdgeHoverEvents(pe):"debounce"===N.settings.enableEdgeHoverEvents&&(N.checkEdgesEventsFrame||(N.checkEdgesEventsFrame=(0,J.requestFrame)(function(){N.checkEdgeHoverEvents(pe),N.checkEdgesEventsFrame=null})))};var $=function(re){return function(pe){var Ne={event:pe,preventSigmaDefault:function(){pe.preventSigmaDefault()}},xe=pe.original.isFakeSigmaMouseEvent?N.getNodeAtPosition(pe):N.hoveredNode;if(xe)return N.emit("".concat(re,"Node"),M(M({},Ne),{node:xe}));if("wheel"===re?N.settings.enableEdgeWheelEvents:N.settings.enableEdgeClickEvents){var ue=N.getEdgeAtPoint(pe.x,pe.y);if(ue)return N.emit("".concat(re,"Edge"),M(M({},Ne),{edge:ue}))}return N.emit("".concat(re,"Stage"),Ne)}};return this.activeListeners.handleClick=$("click"),this.activeListeners.handleRightClick=$("rightClick"),this.activeListeners.handleDoubleClick=$("doubleClick"),this.activeListeners.handleWheel=$("wheel"),this.activeListeners.handleDown=$("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},ae.prototype.bindGraphHandlers=function(){var N=this,$=this.graph;return this.activeListeners.graphUpdate=function(){N.needToProcess=!0,N._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){N.needToSoftProcess=!0,N._scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(re){delete N.nodeDataCache[re.key],N.hoveredNode===re.key&&(N.hoveredNode=null),N.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(re){delete N.edgeDataCache[re.key],N.hoveredEdge===re.key&&(N.hoveredEdge=null),N.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){N.edgeDataCache={},N.hoveredEdge=null,N.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){N.nodeDataCache={},N.hoveredNode=null,N.activeListeners.clearEdgesGraphUpdate()},$.on("nodeAdded",this.activeListeners.graphUpdate),$.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),$.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),$.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),$.on("edgeAdded",this.activeListeners.graphUpdate),$.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),$.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),$.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),$.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),$.on("cleared",this.activeListeners.clearGraphUpdate),this},ae.prototype.checkEdgeHoverEvents=function(N){var $=this.hoveredNode?null:this.getEdgeAtPoint(N.event.x,N.event.y);return $!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",M(M({},N),{edge:this.hoveredEdge})),$&&this.emit("enterEdge",M(M({},N),{edge:$})),this.hoveredEdge=$),this},ae.prototype.getEdgeAtPoint=function(N,$){var re,pe,Ne=this,xe=this.edgeDataCache,ue=this.nodeDataCache;if(!(0,G.isPixelColored)(this.webGLContexts.edges,N*this.pixelRatio,$*this.pixelRatio))return null;var Re=this.viewportToGraph({x:N,y:$}),Je=Re.x,ke=Re.y,qe=0;if(this.graph.someEdge(function(bt,wt,st,gt,Me,ce){var At=Me.x,Ft=Me.y,Tn=ce.x,$n=ce.y;if(xe[bt].hidden||ue[st].hidden||ue[gt].hidden)return!1;if(At!==Tn||Ft!==$n){var Dt=Math.sqrt(Math.pow(Tn-At,2)+Math.pow($n-Ft,2)),kt=Ne.graphToViewport({x:At,y:Ft}),ln=kt.x,Ye=kt.y,De=Ne.graphToViewport({x:Tn,y:$n}),xt=De.y,un=Math.sqrt(Math.pow(De.x-ln,2)+Math.pow(xt-Ye,2));return qe=Dt/un,!0}}),!qe)return null;var ot=this.graph.filterEdges(function(bt,wt,st,gt,Me,ce){return!(xe[bt].hidden||ue[st].hidden||ue[gt].hidden)&&(!!(0,G.doEdgeCollideWithPoint)(Je,ke,Me.x,Me.y,ce.x,ce.y,xe[bt].size*qe/Ne.cameraSizeRatio)||void 0)});if(0===ot.length)return null;var yt=ot[ot.length-1],hn=-1/0;try{for(var Be=U(ot),lt=Be.next();!lt.done;lt=Be.next()){var Ve=lt.value,Ge=this.graph.getEdgeAttribute(Ve,"zIndex");Ge>=hn&&(yt=Ve,hn=Ge)}}catch(bt){re={error:bt}}finally{try{lt&&!lt.done&&(pe=Be.return)&&pe.call(Be)}finally{if(re)throw re.error}}return yt},ae.prototype.process=function(N){var $=this;void 0===N&&(N=!1);var re=this.graph,pe=this.settings,Ne=this.getDimensions(),Ee=[1/0,-1/0],xe=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(Ne,pe.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,J.graphExtent)(re),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var ue=new V.default,Re=(0,J.matrixFromCamera)(ue.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,J.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var Je={},ke=re.nodes(),qe=0,ot=ke.length;qe<ot;qe++){var yt=ke[qe],hn=Object.assign({},re.getNodeAttributes(yt));pe.nodeReducer&&(hn=pe.nodeReducer(yt,hn)),Je[(Be=oe(this.settings,yt,hn)).type]=(Je[Be.type]||0)+1,this.nodeDataCache[yt]=Be,this.normalizationFunction.applyTo(Be),Be.forceLabel&&this.nodesWithForcedLabels.push(yt),this.settings.zIndex&&(Be.zIndex<Ee[0]&&(Ee[0]=Be.zIndex),Be.zIndex>Ee[1]&&(Ee[1]=Be.zIndex))}for(var lt in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(lt))throw new Error('Sigma: could not find a suitable program for node type "'.concat(lt,'"!'));N||this.nodePrograms[lt].allocate(Je[lt]||0),Je[lt]=0}for(this.settings.zIndex&&Ee[0]!==Ee[1]&&(ke=(0,J.zIndexOrdering)(Ee,function(At){return $.nodeDataCache[At].zIndex},ke)),qe=0,ot=ke.length;qe<ot;qe++)this.quadtree.add(yt=ke[qe],(Be=this.nodeDataCache[yt]).x,1-Be.y,Be.size/this.width),"string"==typeof Be.label&&!Be.hidden&&this.labelGrid.add(yt,Be.size,this.framedGraphToViewport(Be,{matrix:Re})),this.nodePrograms[Be.type].process(Be,Be.hidden,Je[Be.type]++),Be.highlighted&&!Be.hidden&&this.highlightedNodes.add(yt);this.labelGrid.organize();var Ve={},Ge=re.edges();for(qe=0,ot=Ge.length;qe<ot;qe++){var bt=Ge[qe];hn=Object.assign({},re.getEdgeAttributes(bt)),pe.edgeReducer&&(hn=pe.edgeReducer(bt,hn)),Ve[(Be=ye(this.settings,0,hn)).type]=(Ve[Be.type]||0)+1,this.edgeDataCache[bt]=Be,Be.forceLabel&&!Be.hidden&&this.edgesWithForcedLabels.push(bt),this.settings.zIndex&&(Be.zIndex<xe[0]&&(xe[0]=Be.zIndex),Be.zIndex>xe[1]&&(xe[1]=Be.zIndex))}for(var lt in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(lt))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(lt,'"!'));N||this.edgePrograms[lt].allocate(Ve[lt]||0),Ve[lt]=0}for(this.settings.zIndex&&xe[0]!==xe[1]&&(Ge=(0,J.zIndexOrdering)(xe,function(At){return $.edgeDataCache[At].zIndex},Ge)),qe=0,ot=Ge.length;qe<ot;qe++){var Be=this.edgeDataCache[bt=Ge[qe]],wt=re.extremities(bt),st=this.nodeDataCache[wt[0]],gt=this.nodeDataCache[wt[1]];this.edgePrograms[Be.type].process(st,gt,Be,Be.hidden||st.hidden||gt.hidden,Ve[Be.type]++)}for(var lt in this.edgePrograms){var ce=this.edgePrograms[lt];!N&&"function"==typeof ce.computeIndices&&ce.computeIndices()}return this},ae.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},ae.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},ae.prototype._scheduleRefresh=function(){var N=this;return this.renderFrame||(this.renderFrame=(0,J.requestFrame)(function(){N._refresh(),N.renderFrame=null})),this},ae.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var $,N=this.camera.getState();if(N.ratio>=1)$=new Set(this.graph.nodes());else{var re=this.viewRectangle();$=new Set(this.quadtree.rectangle(re.x1,1-re.y1,re.x2,1-re.y2,re.height))}var pe=this.labelGrid.getLabelsToDisplay(N.ratio,this.settings.labelDensity).concat(this.nodesWithForcedLabels);this.displayedLabels=new Set;for(var Ne=this.canvasContexts.labels,Ee=0,xe=pe.length;Ee<xe;Ee++){var ue=pe[Ee],Re=this.nodeDataCache[ue];if(!this.displayedLabels.has(ue)&&!Re.hidden){var Je=this.framedGraphToViewport(Re),ke=Je.x,qe=Je.y,ot=this.scaleSize(Re.size);!Re.forceLabel&&ot<this.settings.labelRenderedSizeThreshold||!$.has(ue)||(this.displayedLabels.add(ue),this.settings.labelRenderer(Ne,M(M({key:ue},Re),{size:ot,x:ke,y:qe}),this.settings))}}return this},ae.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var N=this.canvasContexts.edgeLabels;N.clearRect(0,0,this.width,this.height);for(var $=(0,Z.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),re=new Set,pe=0,Ne=$.length;pe<Ne;pe++){var Ee=$[pe],xe=this.graph.extremities(Ee),ue=this.nodeDataCache[xe[0]],Re=this.nodeDataCache[xe[1]],Je=this.edgeDataCache[Ee];re.has(Ee)||Je.hidden||ue.hidden||Re.hidden||(this.settings.edgeLabelRenderer(N,M(M({key:Ee},Je),{size:this.scaleSize(Je.size)}),M(M(M({key:xe[0]},ue),this.framedGraphToViewport(ue)),{size:this.scaleSize(ue.size)}),M(M(M({key:xe[1]},Re),this.framedGraphToViewport(Re)),{size:this.scaleSize(Re.size)}),this.settings),re.add(Ee))}return this},ae.prototype.renderHighlightedNodes=function(){var N=this,$=this.canvasContexts.hovers;$.clearRect(0,0,this.width,this.height);var pe=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&pe.push(this.hoveredNode),this.highlightedNodes.forEach(function(ue){ue!==N.hoveredNode&&pe.push(ue)}),pe.forEach(function(ue){return function(ue){var Re=N.nodeDataCache[ue],Je=N.framedGraphToViewport(Re),ke=Je.x,qe=Je.y,ot=N.scaleSize(Re.size);N.settings.hoverRenderer($,M(M({key:ue},Re),{size:ot,x:ke,y:qe}),N.settings)}(ue)});var Ne={};for(var Ee in pe.forEach(function(ue){var Re=N.nodeDataCache[ue].type;Ne[Re]=(Ne[Re]||0)+1}),this.hoverNodePrograms)this.hoverNodePrograms[Ee].allocate(Ne[Ee]||0),Ne[Ee]=0;for(var Ee in pe.forEach(function(ue){var Re=N.nodeDataCache[ue];N.hoverNodePrograms[Re.type].process(Re,Re.hidden,Ne[Re.type]++)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.hoverNodePrograms){var xe=this.hoverNodePrograms[Ee];xe.bind(),xe.bufferData(),xe.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:this.pixelRatio})}},ae.prototype.scheduleHighlightedNodesRender=function(){var N=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,J.requestFrame)(function(){N.renderHighlightedNodesFrame=null,N.renderHighlightedNodes(),N.renderEdgeLabels()}))},ae.prototype.render=function(){var N=this;this.emit("beforeRender");var $=function(){return N.emit("afterRender"),N};if(this.renderFrame&&((0,J.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return $();var re=this.mouseCaptor,pe=this.camera.isAnimated()||re.isMoving||re.draggedEvents||re.currentWheelDirection,Ne=this.camera.getState(),Ee=this.getDimensions(),xe=this.getGraphDimensions(),ue=this.getSetting("stagePadding")||0;for(var Re in this.matrix=(0,J.matrixFromCamera)(Ne,Ee,xe,ue),this.invMatrix=(0,J.matrixFromCamera)(Ne,Ee,xe,ue,!0),this.correctionRatio=(0,J.getMatrixImpact)(this.matrix,Ne,Ee),this.nodePrograms)(Je=this.nodePrograms[Re]).bind(),Je.bufferData(),Je.render({matrix:this.matrix,width:this.width,height:this.height,ratio:Ne.ratio,correctionRatio:this.correctionRatio/Ne.ratio,scalingRatio:this.pixelRatio});if(!this.settings.hideEdgesOnMove||!pe)for(var Re in this.edgePrograms){var Je;(Je=this.edgePrograms[Re]).bind(),Je.bufferData(),Je.render({matrix:this.matrix,width:this.width,height:this.height,ratio:Ne.ratio,correctionRatio:this.correctionRatio/Ne.ratio,scalingRatio:this.pixelRatio})}return this.settings.hideLabelsOnMove&&pe||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),$()},ae.prototype.updateCachedValues=function(){var N=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(N)},ae.prototype.getCamera=function(){return this.camera},ae.prototype.getContainer=function(){return this.container},ae.prototype.getGraph=function(){return this.graph},ae.prototype.getMouseCaptor=function(){return this.mouseCaptor},ae.prototype.getTouchCaptor=function(){return this.touchCaptor},ae.prototype.getDimensions=function(){return{width:this.width,height:this.height}},ae.prototype.getGraphDimensions=function(){var N=this.customBBox||this.nodeExtent;return{width:N.x[1]-N.x[0]||1,height:N.y[1]-N.y[0]||1}},ae.prototype.getNodeDisplayData=function(N){var $=this.nodeDataCache[N];return $?Object.assign({},$):void 0},ae.prototype.getEdgeDisplayData=function(N){var $=this.edgeDataCache[N];return $?Object.assign({},$):void 0},ae.prototype.getSettings=function(){return M({},this.settings)},ae.prototype.getSetting=function(N){return this.settings[N]},ae.prototype.setSetting=function(N,$){return this.settings[N]=$,(0,te.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},ae.prototype.updateSetting=function(N,$){return this.settings[N]=$(this.settings[N]),(0,te.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},ae.prototype.resize=function(){var N=this.width,$=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,J.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.");this.height=1}if(N===this.width&&$===this.height)return this;for(var re in this.emit("resize"),this.elements){var pe=this.elements[re];pe.style.width=this.width+"px",pe.style.height=this.height+"px"}for(var re in this.canvasContexts)this.elements[re].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[re].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[re].scale(this.pixelRatio,this.pixelRatio);for(var re in this.webGLContexts)this.elements[re].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[re].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[re].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},ae.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},ae.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},ae.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},ae.prototype.getViewportZoomedState=function(N,$){var re=this.camera.getState(),Ne=re.angle,Ee=re.x,xe=re.y,ue=$/re.ratio,Re={x:this.width/2,y:this.height/2},Je=this.viewportToFramedGraph(N),ke=this.viewportToFramedGraph(Re);return{angle:Ne,x:(Je.x-ke.x)*(1-ue)+Ee,y:(Je.y-ke.y)*(1-ue)+xe,ratio:$}},ae.prototype.viewRectangle=function(){var N=0*this.width/8,$=0*this.height/8,re=this.viewportToFramedGraph({x:0-N,y:0-$}),pe=this.viewportToFramedGraph({x:this.width+N,y:0-$}),Ne=this.viewportToFramedGraph({x:0,y:this.height+$});return{x1:re.x,y1:re.y,x2:pe.x,y2:pe.y,height:pe.y-Ne.y}},ae.prototype.framedGraphToViewport=function(N,$){void 0===$&&($={});var pe=$.matrix?$.matrix:$.cameraState||$.viewportDimensions||$.graphDimensions?(0,J.matrixFromCamera)($.cameraState||this.camera.getState(),$.viewportDimensions||this.getDimensions(),$.graphDimensions||this.getGraphDimensions(),$.padding||this.getSetting("stagePadding")||0):this.matrix,Ne=(0,Y.multiplyVec2)(pe,N);return{x:(1+Ne.x)*this.width/2,y:(1-Ne.y)*this.height/2}},ae.prototype.viewportToFramedGraph=function(N,$){void 0===$&&($={});var pe=$.matrix?$.matrix:$.cameraState||$.viewportDimensions||!$.graphDimensions?(0,J.matrixFromCamera)($.cameraState||this.camera.getState(),$.viewportDimensions||this.getDimensions(),$.graphDimensions||this.getGraphDimensions(),$.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,Ne=(0,Y.multiplyVec2)(pe,{x:N.x/this.width*2-1,y:1-N.y/this.height*2});return isNaN(Ne.x)&&(Ne.x=0),isNaN(Ne.y)&&(Ne.y=0),Ne},ae.prototype.viewportToGraph=function(N,$){return void 0===$&&($={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(N,$))},ae.prototype.graphToViewport=function(N,$){return void 0===$&&($={}),this.framedGraphToViewport(this.normalizationFunction(N),$)},ae.prototype.getBBox=function(){return(0,J.graphExtent)(this.graph)},ae.prototype.getCustomBBox=function(){return this.customBBox},ae.prototype.setCustomBBox=function(N){return this.customBBox=N,this._scheduleRefresh(),this},ae.prototype.kill=function(){var N=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),N.removeListener("nodeAdded",this.activeListeners.dropNodeGraphUpdate),N.removeListener("nodeDropped",this.activeListeners.graphUpdate),N.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),N.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),N.removeListener("edgeAdded",this.activeListeners.graphUpdate),N.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),N.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),N.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),N.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),N.removeListener("cleared",this.activeListeners.clearGraphUpdate),this.quadtree=new R.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,J.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,J.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var $=this.container;$.firstChild;)$.removeChild($.firstChild)},ae.prototype.scaleSize=function(N){return N/this.cameraSizeRatio},ae.prototype.getCanvases=function(){return M({},this.elements)},ae}(j.TypedEventEmitter);be.default=Ie},57:function(He,be,z){"use strict";var O,X=this&&this.__extends||(O=function(V,L){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,j){R.__proto__=j}||function(R,j){for(var J in j)Object.prototype.hasOwnProperty.call(j,J)&&(R[J]=j[J])})(V,L)},function(V,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function R(){this.constructor=V}O(V,L),V.prototype=null===L?Object.create(L):(R.prototype=L.prototype,new R)});Object.defineProperty(be,"__esModule",{value:!0}),be.TypedEventEmitter=void 0;var U=function(O){function V(){var L=O.call(this)||this;return L.rawEmitter=L,L}return X(V,O),V}(z(9069).EventEmitter);be.TypedEventEmitter=U},2630:function(He,be,z){"use strict";var X=this&&this.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(be,"__esModule",{value:!0}),be.animateNodes=be.ANIMATE_DEFAULTS=void 0;var M=z(1699),U=X(z(4539));be.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},be.animateNodes=function O(V,L,R,j){var J=Object.assign({},be.ANIMATE_DEFAULTS,R),Z="function"==typeof J.easing?J.easing:U.default[J.easing],te=Date.now(),ie={};for(var Y in L){var G=L[Y];for(var oe in ie[Y]={},G)ie[Y][oe]=V.getNodeAttribute(Y,oe)}var ye=null,Ie=function(){ye=null;var ne=(Date.now()-te)/J.duration;if(ne>=1){for(var ae in L){var N=L[ae];for(var $ in N)V.setNodeAttribute(ae,$,N[$])}"function"==typeof j&&j()}else{for(var ae in ne=Z(ne),L){N=L[ae];var re=ie[ae];for(var $ in N)V.setNodeAttribute(ae,$,N[$]*ne+re[$]*(1-ne))}ye=(0,M.requestFrame)(Ie)}};return Ie(),function(){ye&&(0,M.cancelFrame)(ye)}}},5147:(He,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.HTML_COLORS=void 0,be.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"}},4539:(He,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.cubicInOut=be.cubicOut=be.cubicIn=be.quadraticInOut=be.quadraticOut=be.quadraticIn=be.linear=void 0,be.linear=function(j){return j},be.quadraticIn=function(j){return j*j},be.quadraticOut=function(j){return j*(2-j)},be.quadraticInOut=function(j){return(j*=2)<1?.5*j*j:-.5*(--j*(j-2)-1)},be.cubicIn=function(j){return j*j*j},be.cubicOut=function(j){return--j*j*j+1},be.cubicInOut=function(j){return(j*=2)<1?.5*j*j*j:.5*((j-=2)*j*j+2)},be.default={linear:be.linear,quadraticIn:be.quadraticIn,quadraticOut:be.quadraticOut,quadraticInOut:be.quadraticInOut,cubicIn:be.cubicIn,cubicOut:be.cubicOut,cubicInOut:be.cubicInOut}},3180:(He,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.doEdgeCollideWithPoint=be.isPixelColored=void 0,be.isPixelColored=function z(M,U,O){var V=new Uint8Array(4);return M.readPixels(U,M.drawingBufferHeight-O,1,1,M.RGBA,M.UNSIGNED_BYTE,V),V[3]>0},be.doEdgeCollideWithPoint=function X(M,U,O,V,L,R,j){return!(M<O-j&&M<L-j||U<V-j&&U<R-j||M>O+j&&M>L+j||U>V+j&&U>R+j)&&Math.abs((L-O)*(V-U)-(O-M)*(R-V))/Math.sqrt(Math.pow(L-O,2)+Math.pow(R-V,2))<j/2}},1699:function(He,be,z){"use strict";var X=this&&this.__read||function(ke,qe){var ot="function"==typeof Symbol&&ke[Symbol.iterator];if(!ot)return ke;var hn,lt,yt=ot.call(ke),Be=[];try{for(;(void 0===qe||qe-- >0)&&!(hn=yt.next()).done;)Be.push(hn.value)}catch(Ve){lt={error:Ve}}finally{try{hn&&!hn.done&&(ot=yt.return)&&ot.call(yt)}finally{if(lt)throw lt.error}}return Be},M=this&&this.__importDefault||function(ke){return ke&&ke.__esModule?ke:{default:ke}};Object.defineProperty(be,"__esModule",{value:!0}),be.validateGraph=be.canUse32BitsIndices=be.extractPixel=be.getMatrixImpact=be.matrixFromCamera=be.getCorrectionRatio=be.floatColor=be.floatArrayColor=be.parseColor=be.zIndexOrdering=be.createNormalizationFunction=be.graphExtent=be.getPixelRatio=be.createElement=be.cancelFrame=be.requestFrame=be.assignDeep=be.assign=be.isPlainObject=void 0;var U=M(z(6714)),O=z(7611),V=z(5147);function L(ke){return"object"==typeof ke&&null!==ke&&ke.constructor===Object}be.isPlainObject=L,be.assign=function R(ke){for(var qe=[],ot=1;ot<arguments.length;ot++)qe[ot-1]=arguments[ot];ke=ke||{};for(var yt=0,hn=qe.length;yt<hn;yt++){var Be=qe[yt];!Be||Object.assign(ke,Be)}return ke},be.assignDeep=function j(ke){for(var qe=[],ot=1;ot<arguments.length;ot++)qe[ot-1]=arguments[ot];ke=ke||{};for(var yt=0,hn=qe.length;yt<hn;yt++){var Be=qe[yt];if(Be)for(var lt in Be)ke[lt]=L(Be[lt])?j(ke[lt],Be[lt]):Be[lt]}return ke},be.requestFrame=typeof requestAnimationFrame<"u"?function(ke){return requestAnimationFrame(ke)}:function(ke){return setTimeout(ke,0)},be.cancelFrame=typeof cancelAnimationFrame<"u"?function(ke){return cancelAnimationFrame(ke)}:function(ke){return clearTimeout(ke)},be.createElement=function J(ke,qe,ot){var yt=document.createElement(ke);if(qe)for(var hn in qe)yt.style[hn]=qe[hn];if(ot)for(var hn in ot)yt.setAttribute(hn,ot[hn]);return yt},be.getPixelRatio=function Z(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1},be.graphExtent=function te(ke){if(!ke.order)return{x:[0,1],y:[0,1]};var qe=1/0,ot=-1/0,yt=1/0,hn=-1/0;return ke.forEachNode(function(Be,lt){var Ve=lt.x,Ge=lt.y;Ve<qe&&(qe=Ve),Ve>ot&&(ot=Ve),Ge<yt&&(yt=Ge),Ge>hn&&(hn=Ge)}),{x:[qe,ot],y:[yt,hn]}},be.createNormalizationFunction=function ie(ke){var qe=X(ke.x,2),ot=qe[0],yt=qe[1],hn=X(ke.y,2),Be=hn[0],lt=hn[1],Ve=Math.max(yt-ot,lt-Be),Ge=(yt+ot)/2,bt=(lt+Be)/2;(0===Ve||Math.abs(Ve)===1/0||isNaN(Ve))&&(Ve=1),isNaN(Ge)&&(Ge=0),isNaN(bt)&&(bt=0);var wt=function(st){return{x:.5+(st.x-Ge)/Ve,y:.5+(st.y-bt)/Ve}};return wt.applyTo=function(st){st.x=.5+(st.x-Ge)/Ve,st.y=.5+(st.y-bt)/Ve},wt.inverse=function(st){return{x:Ge+Ve*(st.x-.5),y:bt+Ve*(st.y-.5)}},wt.ratio=Ve,wt},be.zIndexOrdering=function Y(ke,qe,ot){return ot.sort(function(yt,hn){var Be=qe(yt)||0,lt=qe(hn)||0;return Be<lt?-1:Be>lt?1:0})};var G=new Int8Array(4),oe=new Int32Array(G.buffer,0,1),ye=new Float32Array(G.buffer,0,1),Ie=/^\s*rgba?\s*\(/,ne=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function ae(ke){var qe=0,ot=0,yt=0,hn=1;if("#"===ke[0])4===ke.length?(qe=parseInt(ke.charAt(1)+ke.charAt(1),16),ot=parseInt(ke.charAt(2)+ke.charAt(2),16),yt=parseInt(ke.charAt(3)+ke.charAt(3),16)):(qe=parseInt(ke.charAt(1)+ke.charAt(2),16),ot=parseInt(ke.charAt(3)+ke.charAt(4),16),yt=parseInt(ke.charAt(5)+ke.charAt(6),16));else if(Ie.test(ke)){var Be=ke.match(ne);Be&&(qe=+Be[1],ot=+Be[2],yt=+Be[3],Be[4]&&(hn=+Be[4]))}return{r:qe,g:ot,b:yt,a:hn}}be.parseColor=ae;var N={};for(var $ in V.HTML_COLORS)N[$]=pe(V.HTML_COLORS[$]),N[V.HTML_COLORS[$]]=N[$];function pe(ke){if(typeof N[ke]<"u")return N[ke];var qe=ae(ke),Be=qe.a;oe[0]=4278190079&((Be=255*Be|0)<<24|qe.b<<16|qe.g<<8|qe.r);var lt=ye[0];return N[ke]=lt,lt}function Ne(ke,qe){var ot=ke.height/ke.width,yt=qe.height/qe.width;return ot<1&&yt>1||ot>1&&yt<1?1:Math.min(Math.max(yt,1/yt),Math.max(1/ot,ot))}be.floatArrayColor=function re(ke){var qe=ae(ke=V.HTML_COLORS[ke]||ke);return new Float32Array([qe.r/255,qe.g/255,qe.b/255,qe.a])},be.floatColor=pe,be.getCorrectionRatio=Ne,be.matrixFromCamera=function Ee(ke,qe,ot,yt,hn){var Be=ke.angle,lt=ke.ratio,Ve=ke.x,Ge=ke.y,bt=qe.width,wt=qe.height,st=(0,O.identity)(),gt=Math.min(bt,wt)-2*yt,Me=Ne(qe,ot);return hn?((0,O.multiply)(st,(0,O.translate)((0,O.identity)(),Ve,Ge)),(0,O.multiply)(st,(0,O.scale)((0,O.identity)(),lt)),(0,O.multiply)(st,(0,O.rotate)((0,O.identity)(),Be)),(0,O.multiply)(st,(0,O.scale)((0,O.identity)(),bt/gt/2/Me,wt/gt/2/Me))):((0,O.multiply)(st,(0,O.scale)((0,O.identity)(),gt/bt*2*Me,gt/wt*2*Me)),(0,O.multiply)(st,(0,O.rotate)((0,O.identity)(),-Be)),(0,O.multiply)(st,(0,O.scale)((0,O.identity)(),1/lt)),(0,O.multiply)(st,(0,O.translate)((0,O.identity)(),-Ve,-Ge))),st},be.getMatrixImpact=function xe(ke,qe,ot){var yt=(0,O.multiplyVec2)(ke,{x:Math.cos(qe.angle),y:Math.sin(qe.angle)},0),Be=yt.y;return 1/Math.sqrt(Math.pow(yt.x,2)+Math.pow(Be,2))/ot.width},be.extractPixel=function ue(ke,qe,ot,yt){var hn=yt||new Uint8Array(4);return ke.readPixels(qe,ot,1,1,ke.RGBA,ke.UNSIGNED_BYTE,hn),hn},be.canUse32BitsIndices=function Re(ke){return typeof WebGL2RenderingContext<"u"&&ke instanceof WebGL2RenderingContext||!!ke.getExtension("OES_element_index_uint")},be.validateGraph=function Je(ke){if(!(0,U.default)(ke))throw new Error("Sigma: invalid graph instance.");ke.forEachNode(function(qe,ot){if(!Number.isFinite(ot.x)||!Number.isFinite(ot.y))throw new Error("Sigma: Coordinates of node ".concat(qe," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}},7611:(He,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.multiplyVec2=be.multiply=be.translate=be.rotate=be.scale=be.identity=void 0,be.identity=function z(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},be.scale=function X(L,R,j){return L[0]=R,L[4]="number"==typeof j?j:R,L},be.rotate=function M(L,R){var j=Math.sin(R),J=Math.cos(R);return L[0]=J,L[1]=j,L[3]=-j,L[4]=J,L},be.translate=function U(L,R,j){return L[6]=R,L[7]=j,L},be.multiply=function O(L,R){var j=L[0],J=L[1],Z=L[2],te=L[3],ie=L[4],Y=L[5],G=L[6],oe=L[7],ye=L[8],Ie=R[0],ne=R[1],ae=R[2],N=R[3],$=R[4],re=R[5],pe=R[6],Ne=R[7],Ee=R[8];return L[0]=Ie*j+ne*te+ae*G,L[1]=Ie*J+ne*ie+ae*oe,L[2]=Ie*Z+ne*Y+ae*ye,L[3]=N*j+$*te+re*G,L[4]=N*J+$*ie+re*oe,L[5]=N*Z+$*Y+re*ye,L[6]=pe*j+Ne*te+Ee*G,L[7]=pe*J+Ne*ie+Ee*oe,L[8]=pe*Z+Ne*Y+Ee*ye,L},be.multiplyVec2=function V(L,R,j){void 0===j&&(j=1);var oe=R.x,ye=R.y;return{x:oe*L[0]+ye*L[3]+L[6]*j,y:oe*L[1]+ye*L[4]+L[7]*j}}},295:(He,be,z)=>{He.exports=U;var X=z(9069).EventEmitter;function U(){X.call(this)}z(3894)(U,X),U.Readable=z(3154),U.Writable=z(520),U.Duplex=z(1339),U.Transform=z(6025),U.PassThrough=z(6071),U.finished=z(7542),U.pipeline=z(954),U.Stream=U,U.prototype.pipe=function(O,V){var L=this;function R(G){O.writable&&!1===O.write(G)&&L.pause&&L.pause()}function j(){L.readable&&L.resume&&L.resume()}L.on("data",R),O.on("drain",j),!O._isStdio&&(!V||!1!==V.end)&&(L.on("end",Z),L.on("close",te));var J=!1;function Z(){J||(J=!0,O.end())}function te(){J||(J=!0,"function"==typeof O.destroy&&O.destroy())}function ie(G){if(Y(),0===X.listenerCount(this,"error"))throw G}function Y(){L.removeListener("data",R),O.removeListener("drain",j),L.removeListener("end",Z),L.removeListener("close",te),L.removeListener("error",ie),O.removeListener("error",ie),L.removeListener("end",Y),L.removeListener("close",Y),O.removeListener("close",Y)}return L.on("error",ie),O.on("error",ie),L.on("end",Y),L.on("close",Y),O.on("close",Y),O.emit("pipe",L),O}},3054:(He,be,z)=>{"use strict";var X=z(858).Buffer,M=X.isEncoding||function(ne){switch((ne=""+ne)&&ne.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function V(ne){var ae;switch(this.encoding=function O(ne){var ae=function U(ne){if(!ne)return"utf8";for(var ae;;)switch(ne){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return ne;default:if(ae)return;ne=(""+ne).toLowerCase(),ae=!0}}(ne);if("string"!=typeof ae&&(X.isEncoding===M||!M(ne)))throw new Error("Unknown encoding: "+ne);return ae||ne}(ne),this.encoding){case"utf16le":this.text=ie,this.end=Y,ae=4;break;case"utf8":this.fillLast=J,ae=4;break;case"base64":this.text=G,this.end=oe,ae=3;break;default:return this.write=ye,void(this.end=Ie)}this.lastNeed=0,this.lastTotal=0,this.lastChar=X.allocUnsafe(ae)}function L(ne){return ne<=127?0:ne>>5==6?2:ne>>4==14?3:ne>>3==30?4:ne>>6==2?-1:-2}function J(ne){var ae=this.lastTotal-this.lastNeed,N=function j(ne,ae,N){if(128!=(192&ae[0]))return ne.lastNeed=0,"\ufffd";if(ne.lastNeed>1&&ae.length>1){if(128!=(192&ae[1]))return ne.lastNeed=1,"\ufffd";if(ne.lastNeed>2&&ae.length>2&&128!=(192&ae[2]))return ne.lastNeed=2,"\ufffd"}}(this,ne);return void 0!==N?N:this.lastNeed<=ne.length?(ne.copy(this.lastChar,ae,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(ne.copy(this.lastChar,ae,0,ne.length),void(this.lastNeed-=ne.length))}function ie(ne,ae){if((ne.length-ae)%2==0){var N=ne.toString("utf16le",ae);if(N){var $=N.charCodeAt(N.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1],N.slice(0,-1)}return N}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=ne[ne.length-1],ne.toString("utf16le",ae,ne.length-1)}function Y(ne){var ae=ne&&ne.length?this.write(ne):"";return this.lastNeed?ae+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):ae}function G(ne,ae){var N=(ne.length-ae)%3;return 0===N?ne.toString("base64",ae):(this.lastNeed=3-N,this.lastTotal=3,1===N?this.lastChar[0]=ne[ne.length-1]:(this.lastChar[0]=ne[ne.length-2],this.lastChar[1]=ne[ne.length-1]),ne.toString("base64",ae,ne.length-N))}function oe(ne){var ae=ne&&ne.length?this.write(ne):"";return this.lastNeed?ae+this.lastChar.toString("base64",0,3-this.lastNeed):ae}function ye(ne){return ne.toString(this.encoding)}function Ie(ne){return ne&&ne.length?this.write(ne):""}be.s=V,V.prototype.write=function(ne){if(0===ne.length)return"";var ae,N;if(this.lastNeed){if(void 0===(ae=this.fillLast(ne)))return"";N=this.lastNeed,this.lastNeed=0}else N=0;return N<ne.length?ae?ae+this.text(ne,N):this.text(ne,N):ae||""},V.prototype.end=function te(ne){var ae=ne&&ne.length?this.write(ne):"";return this.lastNeed?ae+"\ufffd":ae},V.prototype.text=function Z(ne,ae){var N=function R(ne,ae,N){var $=ae.length-1;if($<N)return 0;var re=L(ae[$]);return re>=0?(re>0&&(ne.lastNeed=re-1),re):--$<N||-2===re?0:(re=L(ae[$]))>=0?(re>0&&(ne.lastNeed=re-2),re):--$<N||-2===re?0:(re=L(ae[$]))>=0?(re>0&&(2===re?re=0:ne.lastNeed=re-3),re):0}(this,ne,ae);if(!this.lastNeed)return ne.toString("utf8",ae);this.lastTotal=N;var $=ne.length-(N-this.lastNeed);return ne.copy(this.lastChar,0,$),ne.toString("utf8",ae,$)},V.prototype.fillLast=function(ne){if(this.lastNeed<=ne.length)return ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);ne.copy(this.lastChar,this.lastTotal-this.lastNeed,0,ne.length),this.lastNeed-=ne.length}},858:(He,be,z)=>{var X=z(3172),M=X.Buffer;function U(V,L){for(var R in V)L[R]=V[R]}function O(V,L,R){return M(V,L,R)}M.from&&M.alloc&&M.allocUnsafe&&M.allocUnsafeSlow?He.exports=X:(U(X,be),be.Buffer=O),O.prototype=Object.create(M.prototype),U(M,O),O.from=function(V,L,R){if("number"==typeof V)throw new TypeError("Argument must not be a number");return M(V,L,R)},O.alloc=function(V,L,R){if("number"!=typeof V)throw new TypeError("Argument must be a number");var j=M(V);return void 0!==L?"string"==typeof R?j.fill(L,R):j.fill(L):j.fill(0),j},O.allocUnsafe=function(V){if("number"!=typeof V)throw new TypeError("Argument must be a number");return M(V)},O.allocUnsafeSlow=function(V){if("number"!=typeof V)throw new TypeError("Argument must be a number");return X.SlowBuffer(V)}},5570:function(He,be,z){"use strict";var X=this&&this.__extends||function(J,Z){for(var te in Z)Z.hasOwnProperty(te)&&(J[te]=Z[te]);function ie(){this.constructor=J}J.prototype=null===Z?Object.create(Z):(ie.prototype=Z.prototype,new ie)},M=z(5237),O={type:"change"},V={type:"start"},L={type:"end"},R=1e-6,j=function(J){function Z(te,ie,Y){var G=J.call(this)||this;return G.object=te,G.domElement=void 0!==ie?ie:document,G.window=void 0!==Y?Y:window,G.enabled=!0,G.target=new M.Vector3,G.minDistance=0,G.maxDistance=1/0,G.minZoom=0,G.maxZoom=1/0,G.minPolarAngle=0,G.maxPolarAngle=Math.PI,G.minAzimuthAngle=-1/0,G.maxAzimuthAngle=1/0,G.enableDamping=!1,G.dampingFactor=.25,G.enableZoom=!0,G.zoomSpeed=1,G.enableRotate=!0,G.rotateSpeed=1,G.enablePan=!0,G.keyPanSpeed=7,G.autoRotate=!1,G.autoRotateSpeed=2,G.enableKeys=!0,G.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},G.mouseButtons={ORBIT:M.MOUSE.LEFT,ZOOM:M.MOUSE.MIDDLE,PAN:M.MOUSE.RIGHT},G.target0=G.target.clone(),G.position0=G.object.position.clone(),G.zoom0=G.object.zoom,G.updateOffset=new M.Vector3,G.updateQuat=(new M.Quaternion).setFromUnitVectors(te.up,new M.Vector3(0,1,0)),G.updateQuatInverse=G.updateQuat.clone().inverse(),G.updateLastPosition=new M.Vector3,G.updateLastQuaternion=new M.Quaternion,G.state=-1,G.scale=1,G.spherical=new M.Spherical,G.sphericalDelta=new M.Spherical,G.panOffset=new M.Vector3,G.zoomChanged=!1,G.rotateStart=new M.Vector2,G.rotateEnd=new M.Vector2,G.rotateDelta=new M.Vector2,G.panStart=new M.Vector2,G.panEnd=new M.Vector2,G.panDelta=new M.Vector2,G.dollyStart=new M.Vector2,G.dollyEnd=new M.Vector2,G.dollyDelta=new M.Vector2,G.panLeftV=new M.Vector3,G.panUpV=new M.Vector3,G.panInternalOffset=new M.Vector3,G.onMouseDown=function(oe){if(!1!==G.enabled){if(oe.preventDefault(),oe.button===G.mouseButtons.ORBIT){if(!1===G.enableRotate)return;G.rotateStart.set(oe.clientX,oe.clientY),G.state=0}else if(oe.button===G.mouseButtons.ZOOM){if(!1===G.enableZoom)return;G.dollyStart.set(oe.clientX,oe.clientY),G.state=1}else if(oe.button===G.mouseButtons.PAN){if(!1===G.enablePan)return;G.panStart.set(oe.clientX,oe.clientY),G.state=2}-1!==G.state&&(document.addEventListener("mousemove",G.onMouseMove,!1),document.addEventListener("mouseup",G.onMouseUp,!1),G.dispatchEvent(V))}},G.onMouseMove=function(oe){if(!1!==G.enabled)if(oe.preventDefault(),0===G.state){if(!1===G.enableRotate)return;G.rotateEnd.set(oe.clientX,oe.clientY),G.rotateDelta.subVectors(G.rotateEnd,G.rotateStart);var ye=G.domElement===document?G.domElement.body:G.domElement;G.rotateLeft(2*Math.PI*G.rotateDelta.x/ye.clientWidth*G.rotateSpeed),G.rotateUp(2*Math.PI*G.rotateDelta.y/ye.clientHeight*G.rotateSpeed),G.rotateStart.copy(G.rotateEnd),G.update()}else if(1===G.state){if(!1===G.enableZoom)return;G.dollyEnd.set(oe.clientX,oe.clientY),G.dollyDelta.subVectors(G.dollyEnd,G.dollyStart),G.dollyDelta.y>0?G.dollyIn(G.getZoomScale()):G.dollyDelta.y<0&&G.dollyOut(G.getZoomScale()),G.dollyStart.copy(G.dollyEnd),G.update()}else if(2===G.state){if(!1===G.enablePan)return;G.panEnd.set(oe.clientX,oe.clientY),G.panDelta.subVectors(G.panEnd,G.panStart),G.pan(G.panDelta.x,G.panDelta.y),G.panStart.copy(G.panEnd),G.update()}},G.onMouseUp=function(oe){!1!==G.enabled&&(document.removeEventListener("mousemove",G.onMouseMove,!1),document.removeEventListener("mouseup",G.onMouseUp,!1),G.dispatchEvent(L),G.state=-1)},G.onMouseWheel=function(oe){!1===G.enabled||!1===G.enableZoom||-1!==G.state&&0!==G.state||(oe.preventDefault(),oe.stopPropagation(),oe.deltaY<0?G.dollyOut(G.getZoomScale()):oe.deltaY>0&&G.dollyIn(G.getZoomScale()),G.update(),G.dispatchEvent(V),G.dispatchEvent(L))},G.onKeyDown=function(oe){if(!1!==G.enabled&&!1!==G.enableKeys&&!1!==G.enablePan)switch(oe.keyCode){case G.keys.UP:G.pan(0,G.keyPanSpeed),G.update();break;case G.keys.BOTTOM:G.pan(0,-G.keyPanSpeed),G.update();break;case G.keys.LEFT:G.pan(G.keyPanSpeed,0),G.update();break;case G.keys.RIGHT:G.pan(-G.keyPanSpeed,0),G.update()}},G.onTouchStart=function(oe){if(!1!==G.enabled){switch(oe.touches.length){case 1:if(!1===G.enableRotate)return;G.rotateStart.set(oe.touches[0].pageX,oe.touches[0].pageY),G.state=3;break;case 2:if(!1===G.enableZoom)return;var ye=oe.touches[0].pageX-oe.touches[1].pageX,Ie=oe.touches[0].pageY-oe.touches[1].pageY,ne=Math.sqrt(ye*ye+Ie*Ie);G.dollyStart.set(0,ne),G.state=4;break;case 3:if(!1===G.enablePan)return;G.panStart.set(oe.touches[0].pageX,oe.touches[0].pageY),G.state=5;break;default:G.state=-1}-1!==G.state&&G.dispatchEvent(V)}},G.onTouchMove=function(oe){if(!1!==G.enabled)switch(oe.preventDefault(),oe.stopPropagation(),oe.touches.length){case 1:if(!1===G.enableRotate||3!==G.state)return;G.rotateEnd.set(oe.touches[0].pageX,oe.touches[0].pageY),G.rotateDelta.subVectors(G.rotateEnd,G.rotateStart);var ye=G.domElement===document?G.domElement.body:G.domElement;G.rotateLeft(2*Math.PI*G.rotateDelta.x/ye.clientWidth*G.rotateSpeed),G.rotateUp(2*Math.PI*G.rotateDelta.y/ye.clientHeight*G.rotateSpeed),G.rotateStart.copy(G.rotateEnd),G.update();break;case 2:if(!1===G.enableZoom||4!==G.state)return;var Ie=oe.touches[0].pageX-oe.touches[1].pageX,ne=oe.touches[0].pageY-oe.touches[1].pageY,ae=Math.sqrt(Ie*Ie+ne*ne);G.dollyEnd.set(0,ae),G.dollyDelta.subVectors(G.dollyEnd,G.dollyStart),G.dollyDelta.y>0?G.dollyOut(G.getZoomScale()):G.dollyDelta.y<0&&G.dollyIn(G.getZoomScale()),G.dollyStart.copy(G.dollyEnd),G.update();break;case 3:if(!1===G.enablePan||5!==G.state)return;G.panEnd.set(oe.touches[0].pageX,oe.touches[0].pageY),G.panDelta.subVectors(G.panEnd,G.panStart),G.pan(G.panDelta.x,G.panDelta.y),G.panStart.copy(G.panEnd),G.update();break;default:G.state=-1}},G.onTouchEnd=function(oe){!1!==G.enabled&&(G.dispatchEvent(L),G.state=-1)},G.onContextMenu=function(oe){oe.preventDefault()},G.domElement.addEventListener("contextmenu",G.onContextMenu,!1),G.domElement.addEventListener("mousedown",G.onMouseDown,!1),G.domElement.addEventListener("wheel",G.onMouseWheel,!1),G.domElement.addEventListener("touchstart",G.onTouchStart,!1),G.domElement.addEventListener("touchend",G.onTouchEnd,!1),G.domElement.addEventListener("touchmove",G.onTouchMove,!1),G.window.addEventListener("keydown",G.onKeyDown,!1),G.update(),G}return X(Z,J),Z.prototype.update=function(){var te=this.object.position;return this.updateOffset.copy(te).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&-1===this.state&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),te.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>R||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>R)&&(this.dispatchEvent(O),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},Z.prototype.panLeft=function(te,ie){this.panLeftV.setFromMatrixColumn(ie,0),this.panLeftV.multiplyScalar(-te),this.panOffset.add(this.panLeftV)},Z.prototype.panUp=function(te,ie){this.panUpV.setFromMatrixColumn(ie,1),this.panUpV.multiplyScalar(te),this.panOffset.add(this.panUpV)},Z.prototype.pan=function(te,ie){var Y=this.domElement===document?this.domElement.body:this.domElement;if(this.object instanceof M.PerspectiveCamera){this.panInternalOffset.copy(this.object.position).sub(this.target);var oe=this.panInternalOffset.length();oe*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*te*oe/Y.clientHeight,this.object.matrix),this.panUp(2*ie*oe/Y.clientHeight,this.object.matrix)}else this.object instanceof M.OrthographicCamera?(this.panLeft(te*(this.object.right-this.object.left)/this.object.zoom/Y.clientWidth,this.object.matrix),this.panUp(ie*(this.object.top-this.object.bottom)/this.object.zoom/Y.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},Z.prototype.dollyIn=function(te){this.object instanceof M.PerspectiveCamera?this.scale/=te:this.object instanceof M.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*te)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},Z.prototype.dollyOut=function(te){this.object instanceof M.PerspectiveCamera?this.scale*=te:this.object instanceof M.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/te)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},Z.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},Z.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},Z.prototype.rotateLeft=function(te){this.sphericalDelta.theta-=te},Z.prototype.rotateUp=function(te){this.sphericalDelta.phi-=te},Z.prototype.getPolarAngle=function(){return this.spherical.phi},Z.prototype.getAzimuthalAngle=function(){return this.spherical.theta},Z.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},Z.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(O),this.update(),this.state=-1},Object.defineProperty(Z.prototype,"center",{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!0,configurable:!0}),Object.defineProperty(Z.prototype,"noZoom",{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(te){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!te},enumerable:!0,configurable:!0}),Z}(M.EventDispatcher);be.OrbitControls=j},5237:(He,be,z)=>{"use strict";function X(){}z.r(be),z.d(be,{AddEquation:()=>Re,AddOperation:()=>ze,AdditiveBlending:()=>pe,AlphaFormat:()=>gl,AlwaysDepth:()=>At,AmbientLight:()=>Kg,AnimationClip:()=>Ml,AnimationMixer:()=>ig,AnimationObjectGroup:()=>vc,AnimationUtils:()=>mc,ArcCurve:()=>bp,ArrowHelper:()=>Bc,Audio:()=>yh,AudioAnalyser:()=>Vm,AudioContext:()=>yp,AudioListener:()=>zm,AudioLoader:()=>tg,AxisHelper:()=>Of,BackSide:()=>G,BasicDepthPacking:()=>yv,BasicShadowMap:()=>Z,BinaryTextureLoader:()=>zl,BlendingMode:()=>ue,Bone:()=>Pm,BooleanKeyframeTrack:()=>Zg,BoundingBoxHelper:()=>Xy,Box2:()=>ad,Box3:()=>Ms,BoxBufferGeometry:()=>Nl,BoxGeometry:()=>Il,BoxHelper:()=>ag,BufferAttribute:()=>gr,BufferGeometry:()=>Lr,BufferGeometryLoader:()=>mh,ByteType:()=>id,Cache:()=>_u,Camera:()=>Ua,CameraHelper:()=>im,CanvasRenderer:()=>Ky,CanvasTexture:()=>up,CatmullRomCurve3:()=>Gm,CineonToneMapping:()=>Dr,CircleBufferGeometry:()=>Pa,CircleGeometry:()=>Bl,ClampToEdgeWrapping:()=>uc,Clock:()=>Hm,ClosedSplineCurve3:()=>$m,Color:()=>Kr,ColorKeyframeTrack:()=>pp,CompressedTexture:()=>Fc,CompressedTextureLoader:()=>Om,ConeBufferGeometry:()=>eg,ConeGeometry:()=>Jp,CubeCamera:()=>Ul,CubeGeometry:()=>Il,CubeReflectionMapping:()=>kr,CubeRefractionMapping:()=>Wo,CubeTexture:()=>Od,CubeTextureLoader:()=>Fm,CubeUVReflectionMapping:()=>ql,CubeUVRefractionMapping:()=>Wf,CubicBezierCurve:()=>Zd,CubicBezierCurve3:()=>Gy,CubicInterpolant:()=>Wh,CullFaceBack:()=>V,CullFaceFront:()=>L,CullFaceFrontBack:()=>R,CullFaceNone:()=>O,Curve:()=>Vl,CurvePath:()=>em,CurveUtils:()=>nc,CustomBlending:()=>xe,CylinderBufferGeometry:()=>Tf,CylinderGeometry:()=>Jl,Cylindrical:()=>bl,DataTexture:()=>rs,DataTextureLoader:()=>tc,DefaultLoadingManager:()=>pc,DepthFormat:()=>mt,DepthStencilFormat:()=>ct,DepthTexture:()=>Xg,DirectionalLight:()=>Df,DirectionalLightHelper:()=>og,DirectionalLightShadow:()=>Mf,DiscreteInterpolant:()=>Wu,DodecahedronBufferGeometry:()=>ph,DodecahedronGeometry:()=>Kp,DoubleSide:()=>oe,DstAlphaFactor:()=>bt,DstColorFactor:()=>st,DynamicBufferAttribute:()=>Bv,EdgesGeometry:()=>_l,EdgesHelper:()=>Q_,EllipseCurve:()=>pd,EqualDepth:()=>$n,EquirectangularReflectionMapping:()=>tr,EquirectangularRefractionMapping:()=>il,Euler:()=>ks,EventDispatcher:()=>X,ExtrudeGeometry:()=>nu,Face3:()=>Bo,Face4:()=>Wm,FaceColors:()=>ae,FaceNormalsHelper:()=>qh,FileLoader:()=>Do,FlatShading:()=>ye,Float32Attribute:()=>qy,Float32BufferAttribute:()=>ls,Float64Attribute:()=>Z_,Float64BufferAttribute:()=>Pc,FloatType:()=>kd,Fog:()=>kc,FogExp2:()=>Nh,Font:()=>tm,FontLoader:()=>Qd,FrontFaceDirectionCCW:()=>J,FrontFaceDirectionCW:()=>j,FrontSide:()=>Y,Frustum:()=>No,GammaEncoding:()=>Vp,Geometry:()=>Ds,GeometryIdCount:()=>Gg,GeometryUtils:()=>sm,GreaterDepth:()=>kt,GreaterEqualDepth:()=>Dt,GridHelper:()=>sg,Group:()=>lp,HalfFloatType:()=>Ic,HemisphereLight:()=>gc,HemisphereLightHelper:()=>_d,IcosahedronBufferGeometry:()=>$d,IcosahedronGeometry:()=>hp,ImageLoader:()=>Yg,ImageUtils:()=>Uv,ImmediateRenderObject:()=>kf,InstancedBufferAttribute:()=>Jd,InstancedBufferGeometry:()=>qu,InstancedInterleavedBuffer:()=>_h,Int16Attribute:()=>Aa,Int16BufferAttribute:()=>ap,Int32Attribute:()=>Xh,Int32BufferAttribute:()=>Cf,Int8Attribute:()=>Au,Int8BufferAttribute:()=>Oh,IntType:()=>rh,InterleavedBuffer:()=>md,InterleavedBufferAttribute:()=>Pf,Interpolant:()=>Tl,InterpolateDiscrete:()=>Ws,InterpolateLinear:()=>So,InterpolateSmooth:()=>Eo,JSONLoader:()=>Jg,KeyframeTrack:()=>ju,LOD:()=>la,LatheBufferGeometry:()=>wo,LatheGeometry:()=>Ef,Layers:()=>qp,LensFlare:()=>dh,LessDepth:()=>Ft,LessEqualDepth:()=>Tn,Light:()=>eo,LightShadow:()=>gh,Line:()=>vu,Line3:()=>Fl,LineBasicMaterial:()=>cl,LineCurve:()=>vh,LineCurve3:()=>mb,LineDashedMaterial:()=>fc,LinePieces:()=>Nv,LineSegments:()=>Co,LineStrip:()=>Ff,LinearEncoding:()=>ss,LinearFilter:()=>Sa,LinearInterpolant:()=>Yd,LinearMipMapLinearFilter:()=>Ou,LinearMipMapNearestFilter:()=>Eh,LinearToneMapping:()=>un,Loader:()=>iu,LoadingManager:()=>El,LogLuvEncoding:()=>Lg,LoopOnce:()=>yr,LoopPingPong:()=>ur,LoopRepeat:()=>pr,LuminanceAlphaFormat:()=>rd,LuminanceFormat:()=>$f,MOUSE:()=>U,Material:()=>Zs,MaterialLoader:()=>Qg,Math:()=>xs,Matrix3:()=>Nt,Matrix4:()=>bs,MaxEquation:()=>ot,Mesh:()=>wa,MeshBasicMaterial:()=>Va,MeshDepthMaterial:()=>Ci,MeshFaceMaterial:()=>vb,MeshLambertMaterial:()=>dp,MeshNormalMaterial:()=>ec,MeshPhongMaterial:()=>Sl,MeshPhysicalMaterial:()=>Gu,MeshStandardMaterial:()=>Hu,MeshToonMaterial:()=>ka,MinEquation:()=>qe,MirroredRepeatWrapping:()=>Sh,MixOperation:()=>De,MorphBlendMesh:()=>ua,MultiMaterial:()=>yu,MultiplyBlending:()=>Ee,MultiplyOperation:()=>Ye,NearestFilter:()=>Xa,NearestMipMapLinearFilter:()=>uu,NearestMipMapNearestFilter:()=>Pd,NeverDepth:()=>ce,NoBlending:()=>$,NoColors:()=>ne,NoToneMapping:()=>xt,NormalBlending:()=>re,NotEqualDepth:()=>ln,NumberKeyframeTrack:()=>Cu,Object3D:()=>Cr,ObjectLoader:()=>gp,OctahedronBufferGeometry:()=>tu,OctahedronGeometry:()=>ud,OneFactor:()=>hn,OneMinusDstAlphaFactor:()=>wt,OneMinusDstColorFactor:()=>gt,OneMinusSrcAlphaFactor:()=>Ge,OneMinusSrcColorFactor:()=>lt,OrthographicCamera:()=>Vd,PCFShadowMap:()=>te,PCFSoftShadowMap:()=>ie,ParametricBufferGeometry:()=>Wd,ParametricGeometry:()=>jd,Particle:()=>jy,ParticleBasicMaterial:()=>Y_,ParticleSystem:()=>q_,ParticleSystemMaterial:()=>$y,Path:()=>cs,PerspectiveCamera:()=>xl,Plane:()=>It,PlaneBufferGeometry:()=>aa,PlaneGeometry:()=>km,PointCloud:()=>Wy,PointCloudMaterial:()=>X_,PointLight:()=>bu,PointLightHelper:()=>yd,Points:()=>$s,PointsMaterial:()=>Oc,PolarGridHelper:()=>Xu,PolyhedronBufferGeometry:()=>Ql,PolyhedronGeometry:()=>jo,PositionalAudio:()=>ng,Projector:()=>Yy,PropertyBinding:()=>Fa,PropertyMixer:()=>Nc,QuadraticBezierCurve:()=>gd,QuadraticBezierCurve3:()=>rm,Quaternion:()=>kl,QuaternionKeyframeTrack:()=>Kd,QuaternionLinearInterpolant:()=>fa,REVISION:()=>M,RGBADepthPacking:()=>Ty,RGBAFormat:()=>rl,RGBA_PVRTC_2BPPV1_Format:()=>oi,RGBA_PVRTC_4BPPV1_Format:()=>Ai,RGBA_S3TC_DXT1_Format:()=>Oe,RGBA_S3TC_DXT3_Format:()=>it,RGBA_S3TC_DXT5_Format:()=>Rt,RGBDEncoding:()=>vv,RGBEEncoding:()=>_i,RGBEFormat:()=>et,RGBFormat:()=>Sc,RGBM16Encoding:()=>To,RGBM7Encoding:()=>Ps,RGB_ETC1_Format:()=>gi,RGB_PVRTC_2BPPV1_Format:()=>Dn,RGB_PVRTC_4BPPV1_Format:()=>Yt,RGB_S3TC_DXT1_Format:()=>ge,RawShaderMaterial:()=>Ga,Ray:()=>oa,Raycaster:()=>ru,RectAreaLight:()=>Oa,RectAreaLightHelper:()=>ef,ReinhardToneMapping:()=>_n,RepeatWrapping:()=>ih,ReverseSubtractEquation:()=>ke,RingBufferGeometry:()=>Bs,RingGeometry:()=>rr,Scene:()=>Bh,SceneUtils:()=>hl,ShaderChunk:()=>qs,ShaderLib:()=>Rc,ShaderMaterial:()=>eu,ShadowMaterial:()=>Xd,Shape:()=>$u,ShapeBufferGeometry:()=>Zp,ShapeGeometry:()=>Qp,ShapePath:()=>vp,ShapeUtils:()=>Ra,ShortType:()=>pl,Skeleton:()=>cd,SkeletonHelper:()=>$h,SkinnedMesh:()=>qg,SmoothShading:()=>Ie,Sphere:()=>Ot,SphereBufferGeometry:()=>ca,SphereGeometry:()=>$o,Spherical:()=>nm,SphericalReflectionMapping:()=>$l,Spline:()=>$_,SplineCurve:()=>wu,SplineCurve3:()=>Hy,SpotLight:()=>Gh,SpotLightHelper:()=>jh,SpotLightShadow:()=>fp,Sprite:()=>mu,SpriteMaterial:()=>zu,SrcAlphaFactor:()=>Ve,SrcAlphaSaturateFactor:()=>Me,SrcColorFactor:()=>Be,StereoCamera:()=>Bm,StringKeyframeTrack:()=>Nm,SubtractEquation:()=>Je,SubtractiveBlending:()=>Ne,TetrahedronBufferGeometry:()=>ul,TetrahedronGeometry:()=>zh,TextGeometry:()=>dd,Texture:()=>Yo,TextureFilter:()=>nd,TextureLoader:()=>Hh,TextureMapping:()=>jf,TextureWrapping:()=>ku,TorusBufferGeometry:()=>Vu,TorusGeometry:()=>Uh,TorusKnotBufferGeometry:()=>Qa,TorusKnotGeometry:()=>hd,Triangle:()=>Ca,TriangleFanDrawMode:()=>hs,TriangleStripDrawMode:()=>Fu,TrianglesDrawMode:()=>Ya,TubeBufferGeometry:()=>qd,TubeGeometry:()=>Vh,UVMapping:()=>ps,Uint16Attribute:()=>zv,Uint16BufferAttribute:()=>zd,Uint32Attribute:()=>Vv,Uint32BufferAttribute:()=>Bu,Uint8Attribute:()=>K_,Uint8BufferAttribute:()=>vl,Uint8ClampedAttribute:()=>pa,Uint8ClampedBufferAttribute:()=>Bd,Uncharted2ToneMapping:()=>Jn,Uniform:()=>Um,UniformsLib:()=>ds,UniformsUtils:()=>sl,UnsignedByteType:()=>ff,UnsignedInt248Type:()=>mf,UnsignedIntType:()=>gf,UnsignedShort4444Type:()=>Mg,UnsignedShort5551Type:()=>Th,UnsignedShort565Type:()=>ro,UnsignedShortType:()=>pf,Vector2:()=>er,Vector3:()=>on,Vector4:()=>Ko,VectorKeyframeTrack:()=>Lf,Vertex:()=>jm,VertexColors:()=>N,VertexNormalsHelper:()=>rg,VideoTexture:()=>cp,WebGLRenderTarget:()=>Ec,WebGLRenderTargetCube:()=>sd,WebGLRenderer:()=>Gd,WireframeGeometry:()=>fh,WireframeHelper:()=>yb,WrapAroundEnding:()=>ms,XHRLoader:()=>tf,ZeroCurvatureEnding:()=>gs,ZeroFactor:()=>yt,ZeroSlopeEnding:()=>Ea,sRGBEncoding:()=>Dg}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(a){return a<0?-1:a>0?1:+a}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(a),g=1;g<arguments.length;g++){var y=arguments[g];if(null!=y)for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(h[x]=y[x])}return h}),Object.assign(X.prototype,{addEventListener:function(a,h){void 0===this._listeners&&(this._listeners={});var g=this._listeners;void 0===g[a]&&(g[a]=[]),-1===g[a].indexOf(h)&&g[a].push(h)},hasEventListener:function(a,h){if(void 0===this._listeners)return!1;var g=this._listeners;return void 0!==g[a]&&-1!==g[a].indexOf(h)},removeEventListener:function(a,h){if(void 0!==this._listeners){var y=this._listeners[a];if(void 0!==y){var x=y.indexOf(h);-1!==x&&y.splice(x,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var g=this._listeners[a.type];if(void 0!==g){a.target=this;var y=[],x=0,D=g.length;for(x=0;x<D;x++)y[x]=g[x];for(x=0;x<D;x++)y[x].call(this,a)}}}});var y,a,h,g,M="83",U={LEFT:0,MIDDLE:1,RIGHT:2},O=0,V=1,L=2,R=3,j=0,J=1,Z=0,te=1,ie=2,Y=0,G=1,oe=2,ye=1,Ie=2,ne=0,ae=1,N=2,$=0,re=1,pe=2,Ne=3,Ee=4,xe=5,ue={NoBlending:$,NormalBlending:re,AdditiveBlending:pe,SubtractiveBlending:Ne,MultiplyBlending:Ee,CustomBlending:xe},Re=100,Je=101,ke=102,qe=103,ot=104,yt=200,hn=201,Be=202,lt=203,Ve=204,Ge=205,bt=206,wt=207,st=208,gt=209,Me=210,ce=0,At=1,Ft=2,Tn=3,$n=4,Dt=5,kt=6,ln=7,Ye=0,De=1,ze=2,xt=0,un=1,_n=2,Jn=3,Dr=4,ps=300,kr=301,Wo=302,tr=303,il=304,$l=305,ql=306,Wf=307,jf={UVMapping:ps,CubeReflectionMapping:kr,CubeRefractionMapping:Wo,EquirectangularReflectionMapping:tr,EquirectangularRefractionMapping:il,SphericalReflectionMapping:$l,CubeUVReflectionMapping:ql,CubeUVRefractionMapping:Wf},ih=1e3,uc=1001,Sh=1002,ku={RepeatWrapping:ih,ClampToEdgeWrapping:uc,MirroredRepeatWrapping:Sh},Xa=1003,Pd=1004,uu=1005,Sa=1006,Eh=1007,Ou=1008,nd={NearestFilter:Xa,NearestMipMapNearestFilter:Pd,NearestMipMapLinearFilter:uu,LinearFilter:Sa,LinearMipMapNearestFilter:Eh,LinearMipMapLinearFilter:Ou},ff=1009,id=1010,pl=1011,pf=1012,rh=1013,gf=1014,kd=1015,Ic=1016,Mg=1017,Th=1018,ro=1019,mf=1020,gl=1021,Sc=1022,rl=1023,$f=1024,rd=1025,et=rl,mt=1026,ct=1027,ge=2001,Oe=2002,it=2003,Rt=2004,Yt=2100,Dn=2101,Ai=2102,oi=2103,gi=2151,yr=2200,pr=2201,ur=2202,Ws=2300,So=2301,Eo=2302,gs=2400,Ea=2401,ms=2402,Ya=0,Fu=1,hs=2,ss=3e3,Dg=3001,Vp=3007,_i=3002,Lg=3003,Ps=3004,To=3005,vv=3006,yv=3200,Ty=3201,xs={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),h=new Array(36),g=0,function(){for(var D=0;D<36;D++)8===D||13===D||18===D||23===D?h[D]="-":14===D?h[D]="4":(g<=2&&(g=33554432+16777216*Math.random()|0),y=15&g,g>>=4,h[D]=a[19===D?3&y|8:y]);return h.join("")}),clamp:function(a,h,g){return Math.max(h,Math.min(g,a))},euclideanModulo:function(a,h){return(a%h+h)%h},mapLinear:function(a,h,g,y,x){return y+(a-h)*(x-y)/(g-h)},lerp:function(a,h,g){return(1-g)*a+g*h},smoothstep:function(a,h,g){return a<=h?0:a>=g?1:(a=(a-h)/(g-h))*a*(3-2*a)},smootherstep:function(a,h,g){return a<=h?0:a>=g?1:(a=(a-h)/(g-h))*a*a*(a*(6*a-15)+10)},randInt:function(a,h){return a+Math.floor(Math.random()*(h-a+1))},randFloat:function(a,h){return a+Math.random()*(h-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*xs.DEG2RAD},radToDeg:function(a){return a*xs.RAD2DEG},isPowerOfTwo:function(a){return 0==(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,++a}};function er(a,h){this.x=a||0,this.y=h||0}er.prototype={constructor:er,isVector2:!0,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,h){return this.x=a,this.y=h,this},setScalar:function(a){return this.x=a,this.y=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setComponent:function(a,h){switch(a){case 0:this.x=h;break;case 1:this.y=h;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,h){return void 0!==h?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,h)):(this.x+=a.x,this.y+=a.y,this)},addScalar:function(a){return this.x+=a,this.y+=a,this},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this},addScaledVector:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this},sub:function(a,h){return void 0!==h?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,h)):(this.x-=a.x,this.y-=a.y,this)},subScalar:function(a){return this.x-=a,this.y-=a,this},subVectors:function(a,h){return this.x=a.x-h.x,this.y=a.y-h.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this},clamp:function(a,h){return this.x=Math.max(a.x,Math.min(h.x,this.x)),this.y=Math.max(a.y,Math.min(h.y,this.y)),this},clampScalar:function(){var a,h;return function(y,x){return void 0===a&&(a=new er,h=new er),a.set(y,y),h.set(x,x),this.clamp(a,h)}}(),clampLength:function(a,h){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(h,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var h=this.x-a.x,g=this.y-a.y;return h*h+g*g},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,h){return this.x+=(a.x-this.x)*h,this.y+=(a.y-this.y)*h,this},lerpVectors:function(a,h,g){return this.subVectors(h,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,h){return void 0===h&&(h=0),this.x=a[h],this.y=a[h+1],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.x,a[h+1]=this.y,a},fromAttribute:function(a,h,g){return void 0!==g&&console.warn("THREE.Vector2: offset has been removed from .fromAttribute()."),this.x=a.getX(h),this.y=a.getY(h),this},rotateAround:function(a,h){var g=Math.cos(h),y=Math.sin(h),x=this.x-a.x,D=this.y-a.y;return this.x=x*g-D*y+a.x,this.y=x*y+D*g+a.y,this}};var My=0;function Yo(a,h,g,y,x,D,F,H,le,se){Object.defineProperty(this,"id",{value:My++}),this.uuid=xs.generateUUID(),this.name="",this.image=void 0!==a?a:Yo.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==h?h:Yo.DEFAULT_MAPPING,this.wrapS=void 0!==g?g:uc,this.wrapT=void 0!==y?y:uc,this.magFilter=void 0!==x?x:Sa,this.minFilter=void 0!==D?D:Ou,this.anisotropy=void 0!==le?le:1,this.format=void 0!==F?F:rl,this.type=void 0!==H?H:ff,this.offset=new er(0,0),this.repeat=new er(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==se?se:ss,this.version=0,this.onUpdate=null}function Ko(a,h,g,y){this.x=a||0,this.y=h||0,this.z=g||0,this.w=void 0!==y?y:1}function Ec(a,h,g){this.uuid=xs.generateUUID(),this.width=a,this.height=h,this.scissor=new Ko(0,0,a,h),this.scissorTest=!1,this.viewport=new Ko(0,0,a,h),void 0===(g=g||{}).minFilter&&(g.minFilter=Sa),this.texture=new Yo(void 0,void 0,g.wrapS,g.wrapT,g.magFilter,g.minFilter,g.format,g.type,g.anisotropy,g.encoding),this.depthBuffer=void 0===g.depthBuffer||g.depthBuffer,this.stencilBuffer=void 0===g.stencilBuffer||g.stencilBuffer,this.depthTexture=void 0!==g.depthTexture?g.depthTexture:null}function sd(a,h,g){Ec.call(this,a,h,g),this.activeCubeFace=0,this.activeMipMapLevel=0}function kl(a,h,g,y){this._x=a||0,this._y=h||0,this._z=g||0,this._w=void 0!==y?y:1}function on(a,h,g){this.x=a||0,this.y=h||0,this.z=g||0}function bs(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Od(a,h,g,y,x,D,F,H,le,se){Yo.call(this,a=void 0!==a?a:[],h=void 0!==h?h:kr,g,y,x,D,F,H,le,se),this.flipY=!1}Yo.DEFAULT_IMAGE=void 0,Yo.DEFAULT_MAPPING=ps,Yo.prototype={constructor:Yo,isTexture:!0,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var g={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var y=this.image;void 0===y.uuid&&(y.uuid=xs.generateUUID()),void 0===a.images[y.uuid]&&(a.images[y.uuid]={uuid:y.uuid,url:function h(x){var D;return void 0!==x.toDataURL?D=x:((D=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=x.width,D.height=x.height,D.getContext("2d").drawImage(x,0,0,x.width,x.height)),D.width>2048||D.height>2048?D.toDataURL("image/jpeg",.6):D.toDataURL("image/png")}(y)}),g.image=y.uuid}return a.textures[this.uuid]=g,g},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping===ps){if(a.multiply(this.repeat),a.add(this.offset),a.x<0||a.x>1)switch(this.wrapS){case ih:a.x=a.x-Math.floor(a.x);break;case uc:a.x=a.x<0?0:1;break;case Sh:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case ih:a.y=a.y-Math.floor(a.y);break;case uc:a.y=a.y<0?0:1;break;case Sh:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}},Object.assign(Yo.prototype,X.prototype),Ko.prototype={constructor:Ko,isVector4:!0,set:function(a,h,g,y){return this.x=a,this.y=h,this.z=g,this.w=y,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this.w=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setW:function(a){return this.w=a,this},setComponent:function(a,h){switch(a){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;case 3:this.w=h;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},add:function(a,h){return void 0!==h?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,h)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this.z=a.z+h.z,this.w=a.w+h.w,this},addScaledVector:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this.z+=a.z*h,this.w+=a.w*h,this},sub:function(a,h){return void 0!==h?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,h)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this},subVectors:function(a,h){return this.x=a.x-h.x,this.y=a.y-h.y,this.z=a.z-h.z,this.w=a.w-h.w,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(a){var h=this.x,g=this.y,y=this.z,x=this.w,D=a.elements;return this.x=D[0]*h+D[4]*g+D[8]*y+D[12]*x,this.y=D[1]*h+D[5]*g+D[9]*y+D[13]*x,this.z=D[2]*h+D[6]*g+D[10]*y+D[14]*x,this.w=D[3]*h+D[7]*g+D[11]*y+D[15]*x,this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var h=Math.sqrt(1-a.w*a.w);return h<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/h,this.y=a.y/h,this.z=a.z/h),this},setAxisAngleFromRotationMatrix:function(a){var h,g,y,x,D=.01,F=.1,H=a.elements,le=H[0],se=H[4],ve=H[8],we=H[1],Ue=H[5],We=H[9],je=H[2],pt=H[6],ft=H[10];if(Math.abs(se-we)<D&&Math.abs(ve-je)<D&&Math.abs(We-pt)<D){if(Math.abs(se+we)<F&&Math.abs(ve+je)<F&&Math.abs(We+pt)<F&&Math.abs(le+Ue+ft-3)<F)return this.set(1,0,0,0),this;h=Math.PI;var ut=(le+1)/2,Et=(Ue+1)/2,Mt=(ft+1)/2,nn=(se+we)/4,qt=(ve+je)/4,yn=(We+pt)/4;return ut>Et&&ut>Mt?ut<D?(g=0,y=.707106781,x=.707106781):(y=nn/(g=Math.sqrt(ut)),x=qt/g):Et>Mt?Et<D?(g=.707106781,y=0,x=.707106781):(g=nn/(y=Math.sqrt(Et)),x=yn/y):Mt<D?(g=.707106781,y=.707106781,x=0):(g=qt/(x=Math.sqrt(Mt)),y=yn/x),this.set(g,y,x,h),this}var fn=Math.sqrt((pt-We)*(pt-We)+(ve-je)*(ve-je)+(we-se)*(we-se));return Math.abs(fn)<.001&&(fn=1),this.x=(pt-We)/fn,this.y=(ve-je)/fn,this.z=(we-se)/fn,this.w=Math.acos((le+Ue+ft-1)/2),this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this},clamp:function(a,h){return this.x=Math.max(a.x,Math.min(h.x,this.x)),this.y=Math.max(a.y,Math.min(h.y,this.y)),this.z=Math.max(a.z,Math.min(h.z,this.z)),this.w=Math.max(a.w,Math.min(h.w,this.w)),this},clampScalar:function(){var a,h;return function(y,x){return void 0===a&&(a=new Ko,h=new Ko),a.set(y,y,y,y),h.set(x,x,x,x),this.clamp(a,h)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,h){return this.x+=(a.x-this.x)*h,this.y+=(a.y-this.y)*h,this.z+=(a.z-this.z)*h,this.w+=(a.w-this.w)*h,this},lerpVectors:function(a,h,g){return this.subVectors(h,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,h){return void 0===h&&(h=0),this.x=a[h],this.y=a[h+1],this.z=a[h+2],this.w=a[h+3],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.x,a[h+1]=this.y,a[h+2]=this.z,a[h+3]=this.w,a},fromAttribute:function(a,h,g){return void 0!==g&&console.warn("THREE.Vector4: offset has been removed from .fromAttribute()."),this.x=a.getX(h),this.y=a.getY(h),this.z=a.getZ(h),this.w=a.getW(h),this}},Object.assign(Ec.prototype,X.prototype,{isWebGLRenderTarget:!0,setSize:function(a,h){(this.width!==a||this.height!==h)&&(this.width=a,this.height=h,this.dispose()),this.viewport.set(0,0,a,h),this.scissor.set(0,0,a,h)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.width=a.width,this.height=a.height,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(sd.prototype=Object.create(Ec.prototype)).constructor=sd,sd.prototype.isWebGLRenderTargetCube=!0,kl.prototype={constructor:kl,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a,this.onChangeCallback()},set:function(a,h,g,y){return this._x=a,this._y=h,this._z=g,this._w=y,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this.onChangeCallback(),this},setFromEuler:function(a,h){if(!1===(a&&a.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var g=Math.cos(a._x/2),y=Math.cos(a._y/2),x=Math.cos(a._z/2),D=Math.sin(a._x/2),F=Math.sin(a._y/2),H=Math.sin(a._z/2),le=a.order;return"XYZ"===le?(this._x=D*y*x+g*F*H,this._y=g*F*x-D*y*H,this._z=g*y*H+D*F*x,this._w=g*y*x-D*F*H):"YXZ"===le?(this._x=D*y*x+g*F*H,this._y=g*F*x-D*y*H,this._z=g*y*H-D*F*x,this._w=g*y*x+D*F*H):"ZXY"===le?(this._x=D*y*x-g*F*H,this._y=g*F*x+D*y*H,this._z=g*y*H+D*F*x,this._w=g*y*x-D*F*H):"ZYX"===le?(this._x=D*y*x-g*F*H,this._y=g*F*x+D*y*H,this._z=g*y*H-D*F*x,this._w=g*y*x+D*F*H):"YZX"===le?(this._x=D*y*x+g*F*H,this._y=g*F*x+D*y*H,this._z=g*y*H-D*F*x,this._w=g*y*x-D*F*H):"XZY"===le&&(this._x=D*y*x-g*F*H,this._y=g*F*x-D*y*H,this._z=g*y*H+D*F*x,this._w=g*y*x+D*F*H),!1!==h&&this.onChangeCallback(),this},setFromAxisAngle:function(a,h){var g=h/2,y=Math.sin(g);return this._x=a.x*y,this._y=a.y*y,this._z=a.z*y,this._w=Math.cos(g),this.onChangeCallback(),this},setFromRotationMatrix:function(a){var Ue,h=a.elements,g=h[0],y=h[4],x=h[8],D=h[1],F=h[5],H=h[9],le=h[2],se=h[6],ve=h[10],we=g+F+ve;return we>0?(Ue=.5/Math.sqrt(we+1),this._w=.25/Ue,this._x=(se-H)*Ue,this._y=(x-le)*Ue,this._z=(D-y)*Ue):g>F&&g>ve?(Ue=2*Math.sqrt(1+g-F-ve),this._w=(se-H)/Ue,this._x=.25*Ue,this._y=(y+D)/Ue,this._z=(x+le)/Ue):F>ve?(Ue=2*Math.sqrt(1+F-g-ve),this._w=(x-le)/Ue,this._x=(y+D)/Ue,this._y=.25*Ue,this._z=(H+se)/Ue):(Ue=2*Math.sqrt(1+ve-g-F),this._w=(D-y)/Ue,this._x=(x+le)/Ue,this._y=(H+se)/Ue,this._z=.25*Ue),this.onChangeCallback(),this},setFromUnitVectors:function(){var a,h;return function(x,D){return void 0===a&&(a=new on),(h=x.dot(D)+1)<1e-6?(h=0,Math.abs(x.x)>Math.abs(x.z)?a.set(-x.y,x.x,0):a.set(0,-x.z,x.y)):a.crossVectors(x,D),this._x=a.x,this._y=a.y,this._z=a.z,this._w=h,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(a=1/a),this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this.onChangeCallback(),this},multiply:function(a,h){return void 0!==h?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,h)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,h){var g=a._x,y=a._y,x=a._z,D=a._w,F=h._x,H=h._y,le=h._z,se=h._w;return this._x=g*se+D*F+y*le-x*H,this._y=y*se+D*H+x*F-g*le,this._z=x*se+D*le+g*H-y*F,this._w=D*se-g*F-y*H-x*le,this.onChangeCallback(),this},slerp:function(a,h){if(0===h)return this;if(1===h)return this.copy(a);var g=this._x,y=this._y,x=this._z,D=this._w,F=D*a._w+g*a._x+y*a._y+x*a._z;if(F<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,F=-F):this.copy(a),F>=1)return this._w=D,this._x=g,this._y=y,this._z=x,this;var H=Math.sqrt(1-F*F);if(Math.abs(H)<.001)return this._w=.5*(D+this._w),this._x=.5*(g+this._x),this._y=.5*(y+this._y),this._z=.5*(x+this._z),this;var le=Math.atan2(H,F),se=Math.sin((1-h)*le)/H,ve=Math.sin(h*le)/H;return this._w=D*se+this._w*ve,this._x=g*se+this._x*ve,this._y=y*se+this._y*ve,this._z=x*se+this._z*ve,this.onChangeCallback(),this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,h){return void 0===h&&(h=0),this._x=a[h],this._y=a[h+1],this._z=a[h+2],this._w=a[h+3],this.onChangeCallback(),this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this._x,a[h+1]=this._y,a[h+2]=this._z,a[h+3]=this._w,a},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},Object.assign(kl,{slerp:function(a,h,g,y){return g.copy(a).slerp(h,y)},slerpFlat:function(a,h,g,y,x,D,F){var H=g[y+0],le=g[y+1],se=g[y+2],ve=g[y+3],we=x[D+0],Ue=x[D+1],We=x[D+2],je=x[D+3];if(ve!==je||H!==we||le!==Ue||se!==We){var pt=1-F,ft=H*we+le*Ue+se*We+ve*je,ut=ft>=0?1:-1,Et=1-ft*ft;if(Et>Number.EPSILON){var Mt=Math.sqrt(Et),nn=Math.atan2(Mt,ft*ut);pt=Math.sin(pt*nn)/Mt,F=Math.sin(F*nn)/Mt}var qt=F*ut;if(H=H*pt+we*qt,le=le*pt+Ue*qt,se=se*pt+We*qt,ve=ve*pt+je*qt,pt===1-F){var yn=1/Math.sqrt(H*H+le*le+se*se+ve*ve);H*=yn,le*=yn,se*=yn,ve*=yn}}a[h]=H,a[h+1]=le,a[h+2]=se,a[h+3]=ve}}),on.prototype={constructor:on,isVector3:!0,set:function(a,h,g){return this.x=a,this.y=h,this.z=g,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setComponent:function(a,h){switch(a){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,h){return void 0!==h?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,h)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this.z=a.z+h.z,this},addScaledVector:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this.z+=a.z*h,this},sub:function(a,h){return void 0!==h?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,h)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this},subVectors:function(a,h){return this.x=a.x-h.x,this.y=a.y-h.y,this.z=a.z-h.z,this},multiply:function(a,h){return void 0!==h?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,h)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(a,h){return this.x=a.x*h.x,this.y=a.y*h.y,this.z=a.z*h.z,this},applyEuler:function(){var a;return function(g){return!1===(g&&g.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===a&&(a=new kl),this.applyQuaternion(a.setFromEuler(g))}}(),applyAxisAngle:function(){var a;return function(g,y){return void 0===a&&(a=new kl),this.applyQuaternion(a.setFromAxisAngle(g,y))}}(),applyMatrix3:function(a){var h=this.x,g=this.y,y=this.z,x=a.elements;return this.x=x[0]*h+x[3]*g+x[6]*y,this.y=x[1]*h+x[4]*g+x[7]*y,this.z=x[2]*h+x[5]*g+x[8]*y,this},applyMatrix4:function(a){var h=this.x,g=this.y,y=this.z,x=a.elements;return this.x=x[0]*h+x[4]*g+x[8]*y+x[12],this.y=x[1]*h+x[5]*g+x[9]*y+x[13],this.z=x[2]*h+x[6]*g+x[10]*y+x[14],this},applyProjection:function(a){var h=this.x,g=this.y,y=this.z,x=a.elements,D=1/(x[3]*h+x[7]*g+x[11]*y+x[15]);return this.x=(x[0]*h+x[4]*g+x[8]*y+x[12])*D,this.y=(x[1]*h+x[5]*g+x[9]*y+x[13])*D,this.z=(x[2]*h+x[6]*g+x[10]*y+x[14])*D,this},applyQuaternion:function(a){var h=this.x,g=this.y,y=this.z,x=a.x,D=a.y,F=a.z,H=a.w,le=H*h+D*y-F*g,se=H*g+F*h-x*y,ve=H*y+x*g-D*h,we=-x*h-D*g-F*y;return this.x=le*H+we*-x+se*-F-ve*-D,this.y=se*H+we*-D+ve*-x-le*-F,this.z=ve*H+we*-F+le*-D-se*-x,this},project:function(){var a;return function(g){return void 0===a&&(a=new bs),a.multiplyMatrices(g.projectionMatrix,a.getInverse(g.matrixWorld)),this.applyProjection(a)}}(),unproject:function(){var a;return function(g){return void 0===a&&(a=new bs),a.multiplyMatrices(g.matrixWorld,a.getInverse(g.projectionMatrix)),this.applyProjection(a)}}(),transformDirection:function(a){var h=this.x,g=this.y,y=this.z,x=a.elements;return this.x=x[0]*h+x[4]*g+x[8]*y,this.y=x[1]*h+x[5]*g+x[9]*y,this.z=x[2]*h+x[6]*g+x[10]*y,this.normalize()},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clamp:function(a,h){return this.x=Math.max(a.x,Math.min(h.x,this.x)),this.y=Math.max(a.y,Math.min(h.y,this.y)),this.z=Math.max(a.z,Math.min(h.z,this.z)),this},clampScalar:function(){var a,h;return function(y,x){return void 0===a&&(a=new on,h=new on),a.set(y,y,y),h.set(x,x,x),this.clamp(a,h)}}(),clampLength:function(a,h){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(h,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,h){return this.x+=(a.x-this.x)*h,this.y+=(a.y-this.y)*h,this.z+=(a.z-this.z)*h,this},lerpVectors:function(a,h,g){return this.subVectors(h,a).multiplyScalar(g).add(a)},cross:function(a,h){if(void 0!==h)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,h);var g=this.x,y=this.y,x=this.z;return this.x=y*a.z-x*a.y,this.y=x*a.x-g*a.z,this.z=g*a.y-y*a.x,this},crossVectors:function(a,h){var g=a.x,y=a.y,x=a.z,D=h.x,F=h.y,H=h.z;return this.x=y*H-x*F,this.y=x*D-g*H,this.z=g*F-y*D,this},projectOnVector:function(a){var h=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(h)},projectOnPlane:function(){var a;return function(g){return void 0===a&&(a=new on),a.copy(this).projectOnVector(g),this.sub(a)}}(),reflect:function(){var a;return function(g){return void 0===a&&(a=new on),this.sub(a.copy(g).multiplyScalar(2*this.dot(g)))}}(),angleTo:function(a){var h=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(xs.clamp(h,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var h=this.x-a.x,g=this.y-a.y,y=this.z-a.z;return h*h+g*g+y*y},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var h=Math.sin(a.phi)*a.radius;return this.x=h*Math.sin(a.theta),this.y=Math.cos(a.phi)*a.radius,this.z=h*Math.cos(a.theta),this},setFromCylindrical:function(a){return this.x=a.radius*Math.sin(a.theta),this.y=a.y,this.z=a.radius*Math.cos(a.theta),this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},setFromMatrixScale:function(a){var h=this.setFromMatrixColumn(a,0).length(),g=this.setFromMatrixColumn(a,1).length(),y=this.setFromMatrixColumn(a,2).length();return this.x=h,this.y=g,this.z=y,this},setFromMatrixColumn:function(a,h){if("number"==typeof a){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var g=a;a=h,h=g}return this.fromArray(a.elements,4*h)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,h){return void 0===h&&(h=0),this.x=a[h],this.y=a[h+1],this.z=a[h+2],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.x,a[h+1]=this.y,a[h+2]=this.z,a},fromAttribute:function(a,h,g){return void 0!==g&&console.warn("THREE.Vector3: offset has been removed from .fromAttribute()."),this.x=a.getX(h),this.y=a.getY(h),this.z=a.getZ(h),this}},bs.prototype={constructor:bs,isMatrix4:!0,set:function(a,h,g,y,x,D,F,H,le,se,ve,we,Ue,We,je,pt){var ft=this.elements;return ft[0]=a,ft[4]=h,ft[8]=g,ft[12]=y,ft[1]=x,ft[5]=D,ft[9]=F,ft[13]=H,ft[2]=le,ft[6]=se,ft[10]=ve,ft[14]=we,ft[3]=Ue,ft[7]=We,ft[11]=je,ft[15]=pt,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new bs).fromArray(this.elements)},copy:function(a){return this.elements.set(a.elements),this},copyPosition:function(a){var h=this.elements,g=a.elements;return h[12]=g[12],h[13]=g[13],h[14]=g[14],this},extractBasis:function(a,h,g){return a.setFromMatrixColumn(this,0),h.setFromMatrixColumn(this,1),g.setFromMatrixColumn(this,2),this},makeBasis:function(a,h,g){return this.set(a.x,h.x,g.x,0,a.y,h.y,g.y,0,a.z,h.z,g.z,0,0,0,0,1),this},extractRotation:function(){var a;return function(g){void 0===a&&(a=new on);var y=this.elements,x=g.elements,D=1/a.setFromMatrixColumn(g,0).length(),F=1/a.setFromMatrixColumn(g,1).length(),H=1/a.setFromMatrixColumn(g,2).length();return y[0]=x[0]*D,y[1]=x[1]*D,y[2]=x[2]*D,y[4]=x[4]*F,y[5]=x[5]*F,y[6]=x[6]*F,y[8]=x[8]*H,y[9]=x[9]*H,y[10]=x[10]*H,this}}(),makeRotationFromEuler:function(a){!1===(a&&a.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var h=this.elements,g=a.x,y=a.y,x=a.z,D=Math.cos(g),F=Math.sin(g),H=Math.cos(y),le=Math.sin(y),se=Math.cos(x),ve=Math.sin(x);if("XYZ"===a.order){var we=D*se,Ue=D*ve,We=F*se,je=F*ve;h[0]=H*se,h[4]=-H*ve,h[8]=le,h[1]=Ue+We*le,h[5]=we-je*le,h[9]=-F*H,h[2]=je-we*le,h[6]=We+Ue*le,h[10]=D*H}else if("YXZ"===a.order){var ft=H*ve,ut=le*se;h[0]=(pt=H*se)+(Et=le*ve)*F,h[4]=ut*F-ft,h[8]=D*le,h[1]=D*ve,h[5]=D*se,h[9]=-F,h[2]=ft*F-ut,h[6]=Et+pt*F,h[10]=D*H}else if("ZXY"===a.order){var pt,Et;ft=H*ve,ut=le*se,h[0]=(pt=H*se)-(Et=le*ve)*F,h[4]=-D*ve,h[8]=ut+ft*F,h[1]=ft+ut*F,h[5]=D*se,h[9]=Et-pt*F,h[2]=-D*le,h[6]=F,h[10]=D*H}else if("ZYX"===a.order)we=D*se,Ue=D*ve,We=F*se,je=F*ve,h[0]=H*se,h[4]=We*le-Ue,h[8]=we*le+je,h[1]=H*ve,h[5]=je*le+we,h[9]=Ue*le-We,h[2]=-le,h[6]=F*H,h[10]=D*H;else if("YZX"===a.order){var Mt=D*H,nn=D*le,qt=F*H,yn=F*le;h[0]=H*se,h[4]=yn-Mt*ve,h[8]=qt*ve+nn,h[1]=ve,h[5]=D*se,h[9]=-F*se,h[2]=-le*se,h[6]=nn*ve+qt,h[10]=Mt-yn*ve}else"XZY"===a.order&&(Mt=D*H,nn=D*le,qt=F*H,yn=F*le,h[0]=H*se,h[4]=-ve,h[8]=le*se,h[1]=Mt*ve+yn,h[5]=D*se,h[9]=nn*ve-qt,h[2]=qt*ve-nn,h[6]=F*se,h[10]=yn*ve+Mt);return h[3]=0,h[7]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this},makeRotationFromQuaternion:function(a){var h=this.elements,g=a.x,y=a.y,x=a.z,D=a.w,F=g+g,H=y+y,le=x+x,se=g*F,ve=g*H,we=g*le,Ue=y*H,We=y*le,je=x*le,pt=D*F,ft=D*H,ut=D*le;return h[0]=1-(Ue+je),h[4]=ve-ut,h[8]=we+ft,h[1]=ve+ut,h[5]=1-(se+je),h[9]=We-pt,h[2]=we-ft,h[6]=We+pt,h[10]=1-(se+Ue),h[3]=0,h[7]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this},lookAt:function(){var a,h,g;return function(x,D,F){void 0===a&&(a=new on,h=new on,g=new on);var H=this.elements;return g.subVectors(x,D).normalize(),0===g.lengthSq()&&(g.z=1),a.crossVectors(F,g).normalize(),0===a.lengthSq()&&(g.z+=1e-4,a.crossVectors(F,g).normalize()),h.crossVectors(g,a),H[0]=a.x,H[4]=h.x,H[8]=g.x,H[1]=a.y,H[5]=h.y,H[9]=g.y,H[2]=a.z,H[6]=h.z,H[10]=g.z,this}}(),multiply:function(a,h){return void 0!==h?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,h)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,h){var g=a.elements,y=h.elements,x=this.elements,D=g[0],F=g[4],H=g[8],le=g[12],se=g[1],ve=g[5],we=g[9],Ue=g[13],We=g[2],je=g[6],pt=g[10],ft=g[14],ut=g[3],Et=g[7],Mt=g[11],nn=g[15],qt=y[0],yn=y[4],fn=y[8],an=y[12],bn=y[1],Nn=y[5],Mi=y[9],fi=y[13],Jt=y[2],tn=y[6],Kn=y[10],si=y[14],Di=y[3],xi=y[7],mi=y[11],ar=y[15];return x[0]=D*qt+F*bn+H*Jt+le*Di,x[4]=D*yn+F*Nn+H*tn+le*xi,x[8]=D*fn+F*Mi+H*Kn+le*mi,x[12]=D*an+F*fi+H*si+le*ar,x[1]=se*qt+ve*bn+we*Jt+Ue*Di,x[5]=se*yn+ve*Nn+we*tn+Ue*xi,x[9]=se*fn+ve*Mi+we*Kn+Ue*mi,x[13]=se*an+ve*fi+we*si+Ue*ar,x[2]=We*qt+je*bn+pt*Jt+ft*Di,x[6]=We*yn+je*Nn+pt*tn+ft*xi,x[10]=We*fn+je*Mi+pt*Kn+ft*mi,x[14]=We*an+je*fi+pt*si+ft*ar,x[3]=ut*qt+Et*bn+Mt*Jt+nn*Di,x[7]=ut*yn+Et*Nn+Mt*tn+nn*xi,x[11]=ut*fn+Et*Mi+Mt*Kn+nn*mi,x[15]=ut*an+Et*fi+Mt*si+nn*ar,this},multiplyToArray:function(a,h,g){var y=this.elements;return this.multiplyMatrices(a,h),g[0]=y[0],g[1]=y[1],g[2]=y[2],g[3]=y[3],g[4]=y[4],g[5]=y[5],g[6]=y[6],g[7]=y[7],g[8]=y[8],g[9]=y[9],g[10]=y[10],g[11]=y[11],g[12]=y[12],g[13]=y[13],g[14]=y[14],g[15]=y[15],this},multiplyScalar:function(a){var h=this.elements;return h[0]*=a,h[4]*=a,h[8]*=a,h[12]*=a,h[1]*=a,h[5]*=a,h[9]*=a,h[13]*=a,h[2]*=a,h[6]*=a,h[10]*=a,h[14]*=a,h[3]*=a,h[7]*=a,h[11]*=a,h[15]*=a,this},applyToVector3Array:function(){var a;return function(g,y,x){void 0===a&&(a=new on),void 0===y&&(y=0),void 0===x&&(x=g.length);for(var D=0,F=y;D<x;D+=3,F+=3)a.fromArray(g,F),a.applyMatrix4(this),a.toArray(g,F);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new on);for(var y=0,x=g.count;y<x;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix4(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),determinant:function(){var a=this.elements,h=a[0],g=a[4],y=a[8],x=a[12],D=a[1],F=a[5],H=a[9],le=a[13],se=a[2],ve=a[6],we=a[10],Ue=a[14];return a[3]*(+x*H*ve-y*le*ve-x*F*we+g*le*we+y*F*Ue-g*H*Ue)+a[7]*(+h*H*Ue-h*le*we+x*D*we-y*D*Ue+y*le*se-x*H*se)+a[11]*(+h*le*ve-h*F*Ue-x*D*ve+g*D*Ue+x*F*se-g*le*se)+a[15]*(-y*F*se-h*H*ve+h*F*we+y*D*ve-g*D*we+g*H*se)},transpose:function(){var h,a=this.elements;return h=a[1],a[1]=a[4],a[4]=h,h=a[2],a[2]=a[8],a[8]=h,h=a[6],a[6]=a[9],a[9]=h,h=a[3],a[3]=a[12],a[12]=h,h=a[7],a[7]=a[13],a[13]=h,h=a[11],a[11]=a[14],a[14]=h,this},setPosition:function(a){var h=this.elements;return h[12]=a.x,h[13]=a.y,h[14]=a.z,this},getInverse:function(a,h){var g=this.elements,y=a.elements,x=y[0],D=y[1],F=y[2],H=y[3],le=y[4],se=y[5],ve=y[6],we=y[7],Ue=y[8],We=y[9],je=y[10],pt=y[11],ft=y[12],ut=y[13],Et=y[14],Mt=y[15],nn=We*Et*we-ut*je*we+ut*ve*pt-se*Et*pt-We*ve*Mt+se*je*Mt,qt=ft*je*we-Ue*Et*we-ft*ve*pt+le*Et*pt+Ue*ve*Mt-le*je*Mt,yn=Ue*ut*we-ft*We*we+ft*se*pt-le*ut*pt-Ue*se*Mt+le*We*Mt,fn=ft*We*ve-Ue*ut*ve-ft*se*je+le*ut*je+Ue*se*Et-le*We*Et,an=x*nn+D*qt+F*yn+H*fn;if(0===an){var bn="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===h)throw new Error(bn);return console.warn(bn),this.identity()}var Nn=1/an;return g[0]=nn*Nn,g[1]=(ut*je*H-We*Et*H-ut*F*pt+D*Et*pt+We*F*Mt-D*je*Mt)*Nn,g[2]=(se*Et*H-ut*ve*H+ut*F*we-D*Et*we-se*F*Mt+D*ve*Mt)*Nn,g[3]=(We*ve*H-se*je*H-We*F*we+D*je*we+se*F*pt-D*ve*pt)*Nn,g[4]=qt*Nn,g[5]=(Ue*Et*H-ft*je*H+ft*F*pt-x*Et*pt-Ue*F*Mt+x*je*Mt)*Nn,g[6]=(ft*ve*H-le*Et*H-ft*F*we+x*Et*we+le*F*Mt-x*ve*Mt)*Nn,g[7]=(le*je*H-Ue*ve*H+Ue*F*we-x*je*we-le*F*pt+x*ve*pt)*Nn,g[8]=yn*Nn,g[9]=(ft*We*H-Ue*ut*H-ft*D*pt+x*ut*pt+Ue*D*Mt-x*We*Mt)*Nn,g[10]=(le*ut*H-ft*se*H+ft*D*we-x*ut*we-le*D*Mt+x*se*Mt)*Nn,g[11]=(Ue*se*H-le*We*H-Ue*D*we+x*We*we+le*D*pt-x*se*pt)*Nn,g[12]=fn*Nn,g[13]=(Ue*ut*F-ft*We*F+ft*D*je-x*ut*je-Ue*D*Et+x*We*Et)*Nn,g[14]=(ft*se*F-le*ut*F-ft*D*ve+x*ut*ve+le*D*Et-x*se*Et)*Nn,g[15]=(le*We*F-Ue*se*F+Ue*D*ve-x*We*ve-le*D*je+x*se*je)*Nn,this},scale:function(a){var h=this.elements,g=a.x,y=a.y,x=a.z;return h[0]*=g,h[4]*=y,h[8]*=x,h[1]*=g,h[5]*=y,h[9]*=x,h[2]*=g,h[6]*=y,h[10]*=x,h[3]*=g,h[7]*=y,h[11]*=x,this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,h,g){return this.set(1,0,0,a,0,1,0,h,0,0,1,g,0,0,0,1),this},makeRotationX:function(a){var h=Math.cos(a),g=Math.sin(a);return this.set(1,0,0,0,0,h,-g,0,0,g,h,0,0,0,0,1),this},makeRotationY:function(a){var h=Math.cos(a),g=Math.sin(a);return this.set(h,0,g,0,0,1,0,0,-g,0,h,0,0,0,0,1),this},makeRotationZ:function(a){var h=Math.cos(a),g=Math.sin(a);return this.set(h,-g,0,0,g,h,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,h){var g=Math.cos(h),y=Math.sin(h),x=1-g,D=a.x,F=a.y,H=a.z,le=x*D,se=x*F;return this.set(le*D+g,le*F-y*H,le*H+y*F,0,le*F+y*H,se*F+g,se*H-y*D,0,le*H-y*F,se*H+y*D,x*H*H+g,0,0,0,0,1),this},makeScale:function(a,h,g){return this.set(a,0,0,0,0,h,0,0,0,0,g,0,0,0,0,1),this},makeShear:function(a,h,g){return this.set(1,h,g,0,a,1,g,0,a,h,1,0,0,0,0,1),this},compose:function(a,h,g){return this.makeRotationFromQuaternion(h),this.scale(g),this.setPosition(a),this},decompose:function(){var a,h;return function(y,x,D){void 0===a&&(a=new on,h=new bs);var F=this.elements,H=a.set(F[0],F[1],F[2]).length(),le=a.set(F[4],F[5],F[6]).length(),se=a.set(F[8],F[9],F[10]).length();this.determinant()<0&&(H=-H),y.x=F[12],y.y=F[13],y.z=F[14],h.elements.set(this.elements);var we=1/H,Ue=1/le,We=1/se;return h.elements[0]*=we,h.elements[1]*=we,h.elements[2]*=we,h.elements[4]*=Ue,h.elements[5]*=Ue,h.elements[6]*=Ue,h.elements[8]*=We,h.elements[9]*=We,h.elements[10]*=We,x.setFromRotationMatrix(h),D.x=H,D.y=le,D.z=se,this}}(),makeFrustum:function(a,h,g,y,x,D){var F=this.elements,le=2*x/(y-g),se=(h+a)/(h-a),ve=(y+g)/(y-g),we=-(D+x)/(D-x),Ue=-2*D*x/(D-x);return F[0]=2*x/(h-a),F[4]=0,F[8]=se,F[12]=0,F[1]=0,F[5]=le,F[9]=ve,F[13]=0,F[2]=0,F[6]=0,F[10]=we,F[14]=Ue,F[3]=0,F[7]=0,F[11]=-1,F[15]=0,this},makePerspective:function(a,h,g,y){var x=g*Math.tan(xs.DEG2RAD*a*.5),D=-x;return this.makeFrustum(D*h,x*h,D,x,g,y)},makeOrthographic:function(a,h,g,y,x,D){var F=this.elements,H=1/(h-a),le=1/(g-y),se=1/(D-x),ve=(h+a)*H,we=(g+y)*le,Ue=(D+x)*se;return F[0]=2*H,F[4]=0,F[8]=0,F[12]=-ve,F[1]=0,F[5]=2*le,F[9]=0,F[13]=-we,F[2]=0,F[6]=0,F[10]=-2*se,F[14]=-Ue,F[3]=0,F[7]=0,F[11]=0,F[15]=1,this},equals:function(a){for(var h=this.elements,g=a.elements,y=0;y<16;y++)if(h[y]!==g[y])return!1;return!0},fromArray:function(a,h){void 0===h&&(h=0);for(var g=0;g<16;g++)this.elements[g]=a[g+h];return this},toArray:function(a,h){void 0===a&&(a=[]),void 0===h&&(h=0);var g=this.elements;return a[h]=g[0],a[h+1]=g[1],a[h+2]=g[2],a[h+3]=g[3],a[h+4]=g[4],a[h+5]=g[5],a[h+6]=g[6],a[h+7]=g[7],a[h+8]=g[8],a[h+9]=g[9],a[h+10]=g[10],a[h+11]=g[11],a[h+12]=g[12],a[h+13]=g[13],a[h+14]=g[14],a[h+15]=g[15],a}},(Od.prototype=Object.create(Yo.prototype)).constructor=Od,Od.prototype.isCubeTexture=!0,Object.defineProperty(Od.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});var F_=new Yo,Rg=new Od;function _v(){this.seq=[],this.map={}}var Tc=[],so=[];function Mh(a,h,g){var y=a[0];if(y<=0||y>0)return a;var x=h*g,D=Tc[x];if(void 0===D&&(D=new Float32Array(x),Tc[x]=D),0!==h){y.toArray(D,0);for(var F=1,H=0;F!==h;++F)a[F].toArray(D,H+=g)}return D}function N_(a,h){var g=so[h];void 0===g&&(g=new Int32Array(h),so[h]=g);for(var y=0;y!==h;++y)g[y]=a.allocTextureUnit();return g}function hc(a,h){a.uniform1f(this.addr,h)}function Zi(a,h){a.uniform1i(this.addr,h)}function fb(a,h){void 0===h.x?a.uniform2fv(this.addr,h):a.uniform2f(this.addr,h.x,h.y)}function Sr(a,h){void 0!==h.x?a.uniform3f(this.addr,h.x,h.y,h.z):void 0!==h.r?a.uniform3f(this.addr,h.r,h.g,h.b):a.uniform3fv(this.addr,h)}function Mc(a,h){void 0===h.x?a.uniform4fv(this.addr,h):a.uniform4f(this.addr,h.x,h.y,h.z,h.w)}function Dy(a,h){a.uniformMatrix2fv(this.addr,!1,h.elements||h)}function B_(a,h){a.uniformMatrix3fv(this.addr,!1,h.elements||h)}function Ta(a,h){a.uniformMatrix4fv(this.addr,!1,h.elements||h)}function ha(a,h,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTexture2D(h||F_,y)}function qf(a,h,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTextureCube(h||Rg,y)}function Up(a,h){a.uniform2iv(this.addr,h)}function wm(a,h){a.uniform3iv(this.addr,h)}function Am(a,h){a.uniform4iv(this.addr,h)}function bv(a,h){a.uniform1fv(this.addr,h)}function Cv(a,h){a.uniform1iv(this.addr,h)}function Nu(a,h){a.uniform2fv(this.addr,Mh(h,this.size,2))}function Xl(a,h){a.uniform3fv(this.addr,Mh(h,this.size,3))}function z_(a,h){a.uniform4fv(this.addr,Mh(h,this.size,4))}function sh(a,h){a.uniformMatrix2fv(this.addr,!1,Mh(h,this.size,4))}function oh(a,h){a.uniformMatrix3fv(this.addr,!1,Mh(h,this.size,9))}function Ly(a,h){a.uniformMatrix4fv(this.addr,!1,Mh(h,this.size,16))}function Dh(a,h,g){var y=h.length,x=N_(g,y);a.uniform1iv(this.addr,x);for(var D=0;D!==y;++D)g.setTexture2D(h[D]||F_,x[D])}function Ma(a,h,g){var y=h.length,x=N_(g,y);a.uniform1iv(this.addr,x);for(var D=0;D!==y;++D)g.setTextureCube(h[D]||Rg,x[D])}function V_(a,h,g){this.id=a,this.addr=g,this.setValue=function os(a){switch(a){case 5126:return hc;case 35664:return fb;case 35665:return Sr;case 35666:return Mc;case 35674:return Dy;case 35675:return B_;case 35676:return Ta;case 35678:return ha;case 35680:return qf;case 5124:case 35670:return Zi;case 35667:case 35671:return Up;case 35668:case 35672:return wm;case 35669:case 35673:return Am}}(h.type)}function Ry(a,h,g){this.id=a,this.addr=g,this.size=h.size,this.setValue=function oo(a){switch(a){case 5126:return bv;case 35664:return Nu;case 35665:return Xl;case 35666:return z_;case 35674:return sh;case 35675:return oh;case 35676:return Ly;case 35678:return Dh;case 35680:return Ma;case 5124:case 35670:return Cv;case 35667:case 35671:return Up;case 35668:case 35672:return wm;case 35669:case 35673:return Am}}(h.type)}function Fd(a){this.id=a,_v.call(this)}Fd.prototype.setValue=function(a,h){for(var g=this.seq,y=0,x=g.length;y!==x;++y){var D=g[y];D.setValue(a,h[D.id])}};var _o=/([\w\d_]+)(\])?(\[|\.)?/g;function Ka(a,h){a.seq.push(h),a.map[h.id]=h}function Xf(a,h,g){var y=a.name,x=y.length;for(_o.lastIndex=0;;){var D=_o.exec(y),H=D[1],se=D[3];if("]"===D[2]&&(H|=0),void 0===se||"["===se&&_o.lastIndex+2===x){Ka(g,void 0===se?new V_(H,a,h):new Ry(H,a,h));break}var we=g.map[H];void 0===we&&Ka(g,we=new Fd(H)),g=we}}function Za(a,h,g){_v.call(this),this.renderer=g;for(var y=a.getProgramParameter(h,a.ACTIVE_UNIFORMS),x=0;x!==y;++x){var D=a.getActiveUniform(h,x);Xf(D,a.getUniformLocation(h,D.name),this)}}Za.prototype.setValue=function(a,h,g){var y=this.map[h];void 0!==y&&y.setValue(a,g,this.renderer)},Za.prototype.set=function(a,h,g){var y=this.map[g];void 0!==y&&y.setValue(a,h[g],this.renderer)},Za.prototype.setOptional=function(a,h,g){var y=h[g];void 0!==y&&this.setValue(a,g,y)},Za.upload=function(a,h,g,y){for(var x=0,D=h.length;x!==D;++x){var F=h[x],H=g[F.id];!1!==H.needsUpdate&&F.setValue(a,H.value,y)}},Za.seqWithValue=function(a,h){for(var g=[],y=0,x=a.length;y!==x;++y){var D=a[y];D.id in h&&g.push(D)}return g};var sl={merge:function(a){for(var h={},g=0;g<a.length;g++){var y=this.clone(a[g]);for(var x in y)h[x]=y[x]}return h},clone:function(a){var h={};for(var g in a)for(var y in h[g]={},a[g]){var x=a[g][y];h[g][y]=x&&(x.isColor||x.isMatrix3||x.isMatrix4||x.isVector2||x.isVector3||x.isVector4||x.isTexture)?x.clone():Array.isArray(x)?x.slice():x}return h}},qs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#include <premultiplied_alpha_fragment>\n\t#include <encodings_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};function Kr(a,h,g){return void 0===h&&void 0===g?this.set(a):this.setRGB(a,h,g)}Kr.prototype={constructor:Kr,isColor:!0,r:1,g:1,b:1,set:function(a){return a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this},setScalar:function(a){return this.r=a,this.g=a,this.b=a,this},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},setRGB:function(a,h,g){return this.r=a,this.g=h,this.b=g,this},setHSL:function(){function a(h,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?h+6*(g-h)*y:y<.5?g:y<2/3?h+6*(g-h)*(2/3-y):h}return function(g,y,x){if(g=xs.euclideanModulo(g,1),y=xs.clamp(y,0,1),x=xs.clamp(x,0,1),0===y)this.r=this.g=this.b=x;else{var D=x<=.5?x*(1+y):x+y-x*y,F=2*x-D;this.r=a(F,D,g+1/3),this.g=a(F,D,g),this.b=a(F,D,g-1/3)}return this}}(),setStyle:function(a){function h(we){void 0!==we&&parseFloat(we)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var g;if(g=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var y,D=g[2];switch(g[1]){case"rgb":case"rgba":if(y=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(D))return this.r=Math.min(255,parseInt(y[1],10))/255,this.g=Math.min(255,parseInt(y[2],10))/255,this.b=Math.min(255,parseInt(y[3],10))/255,h(y[5]),this;if(y=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(D))return this.r=Math.min(100,parseInt(y[1],10))/100,this.g=Math.min(100,parseInt(y[2],10))/100,this.b=Math.min(100,parseInt(y[3],10))/100,h(y[5]),this;break;case"hsl":case"hsla":if(y=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(D)){var F=parseFloat(y[1])/360,H=parseInt(y[2],10)/100,le=parseInt(y[3],10)/100;return h(y[5]),this.setHSL(F,H,le)}}}else if(g=/^\#([A-Fa-f0-9]+)$/.exec(a)){var se,ve=(se=g[1]).length;if(3===ve)return this.r=parseInt(se.charAt(0)+se.charAt(0),16)/255,this.g=parseInt(se.charAt(1)+se.charAt(1),16)/255,this.b=parseInt(se.charAt(2)+se.charAt(2),16)/255,this;if(6===ve)return this.r=parseInt(se.charAt(0)+se.charAt(1),16)/255,this.g=parseInt(se.charAt(2)+se.charAt(3),16)/255,this.b=parseInt(se.charAt(4)+se.charAt(5),16)/255,this}return a&&a.length>0&&(void 0!==(se=Ug[a])?this.setHex(se):console.warn("THREE.Color: Unknown color "+a)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},copyGammaToLinear:function(a,h){return void 0===h&&(h=2),this.r=Math.pow(a.r,h),this.g=Math.pow(a.g,h),this.b=Math.pow(a.b,h),this},copyLinearToGamma:function(a,h){void 0===h&&(h=2);var g=h>0?1/h:1;return this.r=Math.pow(a.r,g),this.g=Math.pow(a.g,g),this.b=Math.pow(a.b,g),this},convertGammaToLinear:function(){var a=this.r,h=this.g,g=this.b;return this.r=a*a,this.g=h*h,this.b=g*g,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){var H,le,h=a||{h:0,s:0,l:0},g=this.r,y=this.g,x=this.b,D=Math.max(g,y,x),F=Math.min(g,y,x),se=(F+D)/2;if(F===D)H=0,le=0;else{var ve=D-F;switch(le=se<=.5?ve/(D+F):ve/(2-D-F),D){case g:H=(y-x)/ve+(y<x?6:0);break;case y:H=(x-g)/ve+2;break;case x:H=(g-y)/ve+4}H/=6}return h.h=H,h.s=le,h.l=se,h},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,h,g){var y=this.getHSL();return y.h+=a,y.s+=h,y.l+=g,this.setHSL(y.h,y.s,y.l),this},add:function(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this},addColors:function(a,h){return this.r=a.r+h.r,this.g=a.g+h.g,this.b=a.b+h.b,this},addScalar:function(a){return this.r+=a,this.g+=a,this.b+=a,this},sub:function(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this},multiply:function(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this},multiplyScalar:function(a){return this.r*=a,this.g*=a,this.b*=a,this},lerp:function(a,h){return this.r+=(a.r-this.r)*h,this.g+=(a.g-this.g)*h,this.b+=(a.b-this.b)*h,this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,h){return void 0===h&&(h=0),this.r=a[h],this.g=a[h+1],this.b=a[h+2],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.r,a[h+1]=this.g,a[h+2]=this.b,a},toJSON:function(){return this.getHex()}};var Ug={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rs(a,h,g,y,x,D,F,H,le,se,ve,we){Yo.call(this,null,D,F,H,le,se,y,x,ve,we),this.image={data:a,width:h,height:g},this.magFilter=void 0!==le?le:Xa,this.minFilter=void 0!==se?se:Xa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}(rs.prototype=Object.create(Yo.prototype)).constructor=rs,rs.prototype.isDataTexture=!0;var ds={common:{diffuse:{value:new Kr(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Ko(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new er(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Kr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Kr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Ko(0,0,1,1)}}},Rc={basic:{uniforms:sl.merge([ds.common,ds.aomap,ds.lightmap,ds.fog]),vertexShader:qs.meshbasic_vert,fragmentShader:qs.meshbasic_frag},lambert:{uniforms:sl.merge([ds.common,ds.aomap,ds.lightmap,ds.emissivemap,ds.fog,ds.lights,{emissive:{value:new Kr(0)}}]),vertexShader:qs.meshlambert_vert,fragmentShader:qs.meshlambert_frag},phong:{uniforms:sl.merge([ds.common,ds.aomap,ds.lightmap,ds.emissivemap,ds.bumpmap,ds.normalmap,ds.displacementmap,ds.gradientmap,ds.fog,ds.lights,{emissive:{value:new Kr(0)},specular:{value:new Kr(1118481)},shininess:{value:30}}]),vertexShader:qs.meshphong_vert,fragmentShader:qs.meshphong_frag},standard:{uniforms:sl.merge([ds.common,ds.aomap,ds.lightmap,ds.emissivemap,ds.bumpmap,ds.normalmap,ds.displacementmap,ds.roughnessmap,ds.metalnessmap,ds.fog,ds.lights,{emissive:{value:new Kr(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:qs.meshphysical_vert,fragmentShader:qs.meshphysical_frag},points:{uniforms:sl.merge([ds.points,ds.fog]),vertexShader:qs.points_vert,fragmentShader:qs.points_frag},dashed:{uniforms:sl.merge([ds.common,ds.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qs.linedashed_vert,fragmentShader:qs.linedashed_frag},depth:{uniforms:sl.merge([ds.common,ds.displacementmap]),vertexShader:qs.depth_vert,fragmentShader:qs.depth_frag},normal:{uniforms:sl.merge([ds.common,ds.bumpmap,ds.normalmap,ds.displacementmap,{opacity:{value:1}}]),vertexShader:qs.normal_vert,fragmentShader:qs.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:qs.cube_vert,fragmentShader:qs.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:qs.equirect_vert,fragmentShader:qs.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new on}},vertexShader:qs.distanceRGBA_vert,fragmentShader:qs.distanceRGBA_frag}};function ad(a,h){this.min=void 0!==a?a:new er(1/0,1/0),this.max=void 0!==h?h:new er(-1/0,-1/0)}function $p(a,h){var x,D,F,H,le,se,ve,we,g=a.context,y=a.state;this.render=function(je,pt,ft){if(0!==h.length){var ut=new on,Et=ft.w/ft.z,Mt=.5*ft.z,nn=.5*ft.w,qt=16/ft.w,yn=new er(qt*Et,qt),fn=new on(1,1,0),an=new er(1,1),bn=new ad;bn.min.set(ft.x,ft.y),bn.max.set(ft.x+(ft.z-16),ft.y+(ft.w-16)),void 0===H&&function Ue(){var je=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),pt=new Uint16Array([0,1,2,0,2,3]);x=g.createBuffer(),D=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,x),g.bufferData(g.ARRAY_BUFFER,je,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,D),g.bufferData(g.ELEMENT_ARRAY_BUFFER,pt,g.STATIC_DRAW),ve=g.createTexture(),we=g.createTexture(),y.bindTexture(g.TEXTURE_2D,ve),g.texImage2D(g.TEXTURE_2D,0,g.RGB,16,16,0,g.RGB,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),y.bindTexture(g.TEXTURE_2D,we),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,16,16,0,g.RGBA,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),F={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},H=function We(je){var pt=g.createProgram(),ft=g.createShader(g.FRAGMENT_SHADER),ut=g.createShader(g.VERTEX_SHADER),Et="precision "+a.getPrecision()+" float;\n";return g.shaderSource(ft,Et+je.fragmentShader),g.shaderSource(ut,Et+je.vertexShader),g.compileShader(ft),g.compileShader(ut),g.attachShader(pt,ft),g.attachShader(pt,ut),g.linkProgram(pt),pt}(F),le={vertex:g.getAttribLocation(H,"position"),uv:g.getAttribLocation(H,"uv")},se={renderType:g.getUniformLocation(H,"renderType"),map:g.getUniformLocation(H,"map"),occlusionMap:g.getUniformLocation(H,"occlusionMap"),opacity:g.getUniformLocation(H,"opacity"),color:g.getUniformLocation(H,"color"),scale:g.getUniformLocation(H,"scale"),rotation:g.getUniformLocation(H,"rotation"),screenPosition:g.getUniformLocation(H,"screenPosition")}}(),g.useProgram(H),y.initAttributes(),y.enableAttribute(le.vertex),y.enableAttribute(le.uv),y.disableUnusedAttributes(),g.uniform1i(se.occlusionMap,0),g.uniform1i(se.map,1),g.bindBuffer(g.ARRAY_BUFFER,x),g.vertexAttribPointer(le.vertex,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(le.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,D),y.disable(g.CULL_FACE),y.setDepthWrite(!1);for(var Nn=0,Mi=h.length;Nn<Mi;Nn++){yn.set((qt=16/ft.w)*Et,qt);var fi=h[Nn];if(ut.set(fi.matrixWorld.elements[12],fi.matrixWorld.elements[13],fi.matrixWorld.elements[14]),ut.applyMatrix4(pt.matrixWorldInverse),ut.applyProjection(pt.projectionMatrix),fn.copy(ut),an.x=ft.x+fn.x*Mt+Mt-8,an.y=ft.y+fn.y*nn+nn-8,!0===bn.containsPoint(an)){y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,null),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,ve),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGB,an.x,an.y,16,16,0),g.uniform1i(se.renderType,0),g.uniform2f(se.scale,yn.x,yn.y),g.uniform3f(se.screenPosition,fn.x,fn.y,fn.z),y.disable(g.BLEND),y.enable(g.DEPTH_TEST),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,we),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGBA,an.x,an.y,16,16,0),g.uniform1i(se.renderType,1),y.disable(g.DEPTH_TEST),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,ve),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),fi.positionScreen.copy(fn),fi.customUpdateCallback?fi.customUpdateCallback(fi):fi.updateLensFlares(),g.uniform1i(se.renderType,2),y.enable(g.BLEND);for(var Jt=0,tn=fi.lensFlares.length;Jt<tn;Jt++){var Kn=fi.lensFlares[Jt];Kn.opacity>.001&&Kn.scale>.001&&(fn.x=Kn.x,fn.y=Kn.y,fn.z=Kn.z,yn.x=(qt=Kn.size*Kn.scale/ft.w)*Et,yn.y=qt,g.uniform3f(se.screenPosition,fn.x,fn.y,fn.z),g.uniform2f(se.scale,yn.x,yn.y),g.uniform1f(se.rotation,Kn.rotation),g.uniform1f(se.opacity,Kn.opacity),g.uniform3f(se.color,Kn.color.r,Kn.color.g,Kn.color.b),y.setBlending(Kn.blending,Kn.blendEquation,Kn.blendSrc,Kn.blendDst),a.setTexture2D(Kn.texture,1),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0))}}}y.enable(g.CULL_FACE),y.enable(g.DEPTH_TEST),y.setDepthWrite(!0),a.resetGLState()}}}function W_(a,h){var x,D,F,H,le,se,g=a.context,y=a.state,ve=new on,we=new kl,Ue=new on;function pt(ft,ut){return ft.renderOrder!==ut.renderOrder?ft.renderOrder-ut.renderOrder:ft.z!==ut.z?ut.z-ft.z:ut.id-ft.id}this.render=function(ft,ut){if(0!==h.length){void 0===F&&function We(){var ft=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),ut=new Uint16Array([0,1,2,0,2,3]);x=g.createBuffer(),D=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,x),g.bufferData(g.ARRAY_BUFFER,ft,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,D),g.bufferData(g.ELEMENT_ARRAY_BUFFER,ut,g.STATIC_DRAW),F=function je(){var ft=g.createProgram(),ut=g.createShader(g.VERTEX_SHADER),Et=g.createShader(g.FRAGMENT_SHADER);return g.shaderSource(ut,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),g.shaderSource(Et,["precision "+a.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),g.compileShader(ut),g.compileShader(Et),g.attachShader(ft,ut),g.attachShader(ft,Et),g.linkProgram(ft),ft}(),H={position:g.getAttribLocation(F,"position"),uv:g.getAttribLocation(F,"uv")},le={uvOffset:g.getUniformLocation(F,"uvOffset"),uvScale:g.getUniformLocation(F,"uvScale"),rotation:g.getUniformLocation(F,"rotation"),scale:g.getUniformLocation(F,"scale"),color:g.getUniformLocation(F,"color"),map:g.getUniformLocation(F,"map"),opacity:g.getUniformLocation(F,"opacity"),modelViewMatrix:g.getUniformLocation(F,"modelViewMatrix"),projectionMatrix:g.getUniformLocation(F,"projectionMatrix"),fogType:g.getUniformLocation(F,"fogType"),fogDensity:g.getUniformLocation(F,"fogDensity"),fogNear:g.getUniformLocation(F,"fogNear"),fogFar:g.getUniformLocation(F,"fogFar"),fogColor:g.getUniformLocation(F,"fogColor"),alphaTest:g.getUniformLocation(F,"alphaTest")};var Et=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");Et.width=8,Et.height=8;var Mt=Et.getContext("2d");Mt.fillStyle="white",Mt.fillRect(0,0,8,8),(se=new Yo(Et)).needsUpdate=!0}(),g.useProgram(F),y.initAttributes(),y.enableAttribute(H.position),y.enableAttribute(H.uv),y.disableUnusedAttributes(),y.disable(g.CULL_FACE),y.enable(g.BLEND),g.bindBuffer(g.ARRAY_BUFFER,x),g.vertexAttribPointer(H.position,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(H.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,D),g.uniformMatrix4fv(le.projectionMatrix,!1,ut.projectionMatrix.elements),y.activeTexture(g.TEXTURE0),g.uniform1i(le.map,0);var Et=0,Mt=0,nn=ft.fog;nn?(g.uniform3f(le.fogColor,nn.color.r,nn.color.g,nn.color.b),nn.isFog?(g.uniform1f(le.fogNear,nn.near),g.uniform1f(le.fogFar,nn.far),g.uniform1i(le.fogType,1),Et=1,Mt=1):nn.isFogExp2&&(g.uniform1f(le.fogDensity,nn.density),g.uniform1i(le.fogType,2),Et=2,Mt=2)):(g.uniform1i(le.fogType,0),Et=0,Mt=0);for(var qt=0,yn=h.length;qt<yn;qt++)(fn=h[qt]).modelViewMatrix.multiplyMatrices(ut.matrixWorldInverse,fn.matrixWorld),fn.z=-fn.modelViewMatrix.elements[14];h.sort(pt);var an=[];for(qt=0,yn=h.length;qt<yn;qt++){var fn,bn=(fn=h[qt]).material;if(!1!==bn.visible){g.uniform1f(le.alphaTest,bn.alphaTest),g.uniformMatrix4fv(le.modelViewMatrix,!1,fn.modelViewMatrix.elements),fn.matrixWorld.decompose(ve,we,Ue),an[0]=Ue.x,an[1]=Ue.y;var Nn=0;ft.fog&&bn.fog&&(Nn=Mt),Et!==Nn&&(g.uniform1i(le.fogType,Nn),Et=Nn),null!==bn.map?(g.uniform2f(le.uvOffset,bn.map.offset.x,bn.map.offset.y),g.uniform2f(le.uvScale,bn.map.repeat.x,bn.map.repeat.y)):(g.uniform2f(le.uvOffset,0,0),g.uniform2f(le.uvScale,1,1)),g.uniform1f(le.opacity,bn.opacity),g.uniform3f(le.color,bn.color.r,bn.color.g,bn.color.b),g.uniform1f(le.rotation,bn.rotation),g.uniform2fv(le.scale,an),y.setBlending(bn.blending,bn.blendEquation,bn.blendSrc,bn.blendDst),y.setDepthTest(bn.depthTest),y.setDepthWrite(bn.depthWrite),a.setTexture2D(bn.map?bn.map:se,0),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0)}}y.enable(g.CULL_FACE),a.resetGLState()}}}Rc.physical={uniforms:sl.merge([Rc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:qs.meshphysical_vert,fragmentShader:qs.meshphysical_frag},ad.prototype={constructor:ad,set:function(a,h){return this.min.copy(a),this.max.copy(h),this},setFromPoints:function(a){this.makeEmpty();for(var h=0,g=a.length;h<g;h++)this.expandByPoint(a[h]);return this},setFromCenterAndSize:function(){var a=new er;return function(g,y){var x=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(x),this.max.copy(g).add(x),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){var h=a||new er;return this.isEmpty()?h.set(0,0):h.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var h=a||new er;return this.isEmpty()?h.set(0,0):h.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,h){return(h||new er).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)},clampPoint:function(a,h){return(h||new er).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new er;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};var zy=0;function Zs(){Object.defineProperty(this,"id",{value:zy++}),this.uuid=xs.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=re,this.side=Y,this.shading=Ie,this.vertexColors=ne,this.opacity=1,this.transparent=!1,this.blendSrc=Ve,this.blendDst=Ge,this.blendEquation=Re,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Tn,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function eu(a){Zs.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function Ci(a){Zs.call(this),this.type="MeshDepthMaterial",this.depthPacking=yv,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(a)}function Ms(a,h){this.min=void 0!==a?a:new on(1/0,1/0,1/0),this.max=void 0!==h?h:new on(-1/0,-1/0,-1/0)}function Ot(a,h){this.center=void 0!==a?a:new on,this.radius=void 0!==h?h:0}function Nt(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function It(a,h){this.normal=void 0!==a?a:new on(1,0,0),this.constant=void 0!==h?h:0}function No(a,h,g,y,x,D){this.planes=[void 0!==a?a:new It,void 0!==h?h:new It,void 0!==g?g:new It,void 0!==y?y:new It,void 0!==x?x:new It,void 0!==D?D:new It]}function Mo(a,h,g,y){var x=a.context,D=a.state,F=new No,H=new bs,le=h.shadows,se=new er,ve=new er(y.maxTextureSize,y.maxTextureSize),we=new on,Ue=new on,We=[],ut=new Array(4),Et=new Array(4),Mt={},nn=[new on(1,0,0),new on(-1,0,0),new on(0,0,1),new on(0,0,-1),new on(0,1,0),new on(0,-1,0)],qt=[new on(0,1,0),new on(0,1,0),new on(0,1,0),new on(0,1,0),new on(0,0,1),new on(0,0,-1)],yn=[new Ko,new Ko,new Ko,new Ko,new Ko,new Ko],fn=new Ci;fn.depthPacking=Ty,fn.clipping=!0;for(var an=Rc.distanceRGBA,bn=sl.clone(an.uniforms),Nn=0;4!==Nn;++Nn){var Mi=0!=(1&Nn),fi=0!=(2&Nn),Jt=fn.clone();Jt.morphTargets=Mi,Jt.skinning=fi,ut[Nn]=Jt;var tn=new eu({defines:{USE_SHADOWMAP:""},uniforms:bn,vertexShader:an.vertexShader,fragmentShader:an.fragmentShader,morphTargets:Mi,skinning:fi,clipping:!0});Et[Nn]=tn}var Kn=this;function si(xi,mi,ar,Hi){var Zn=xi.geometry,qn=null,f=ut,c=xi.customDepthMaterial;if(ar&&(f=Et,c=xi.customDistanceMaterial),c)qn=c;else{var d=!1;mi.morphTargets&&(Zn&&Zn.isBufferGeometry?d=Zn.morphAttributes&&Zn.morphAttributes.position&&Zn.morphAttributes.position.length>0:Zn&&Zn.isGeometry&&(d=Zn.morphTargets&&Zn.morphTargets.length>0));var _=0;d&&(_|=1),xi.isSkinnedMesh&&mi.skinning&&(_|=2),qn=f[_]}if(a.localClippingEnabled&&!0===mi.clipShadows&&0!==mi.clippingPlanes.length){var C=qn.uuid,A=mi.uuid,E=Mt[C];void 0===E&&(Mt[C]=E={});var B=E[A];void 0===B&&(B=qn.clone(),E[A]=B),qn=B}qn.visible=mi.visible,qn.wireframe=mi.wireframe;var P=mi.side;return Kn.renderSingleSided&&P==oe&&(P=Y),Kn.renderReverseSided&&(P===Y?P=G:P===G&&(P=Y)),qn.side=P,qn.clipShadows=mi.clipShadows,qn.clippingPlanes=mi.clippingPlanes,qn.wireframeLinewidth=mi.wireframeLinewidth,qn.linewidth=mi.linewidth,ar&&void 0!==qn.uniforms.lightPos&&qn.uniforms.lightPos.value.copy(Hi),qn}function Di(xi,mi,ar){if(!1!==xi.visible){0!=(xi.layers.mask&mi.layers.mask)&&(xi.isMesh||xi.isLine||xi.isPoints)&&xi.castShadow&&(!1===xi.frustumCulled||!0===F.intersectsObject(xi))&&!0===xi.material.visible&&(xi.modelViewMatrix.multiplyMatrices(ar.matrixWorldInverse,xi.matrixWorld),We.push(xi));for(var qn=xi.children,f=0,c=qn.length;f<c;f++)Di(qn[f],mi,ar)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=te,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(xi,mi){if(!1!==Kn.enabled&&(!1!==Kn.autoUpdate||!1!==Kn.needsUpdate)&&0!==le.length){D.buffers.color.setClear(1,1,1,1),D.disable(x.BLEND),D.setDepthTest(!0),D.setScissorTest(!1);for(var ar,Hi,Zn=0,qn=le.length;Zn<qn;Zn++){var f=le[Zn],c=f.shadow;if(void 0!==c){var d=c.camera;if(se.copy(c.mapSize),se.min(ve),f&&f.isPointLight){ar=6,Hi=!0;var m=se.x,_=se.y;yn[0].set(2*m,_,m,_),yn[1].set(0,_,m,_),yn[2].set(3*m,_,m,_),yn[3].set(m,_,m,_),yn[4].set(3*m,0,m,_),yn[5].set(m,0,m,_),se.x*=4,se.y*=2}else ar=1,Hi=!1;null===c.map&&(c.map=new Ec(se.x,se.y,{minFilter:Xa,magFilter:Xa,format:rl}),d.updateProjectionMatrix()),c.isSpotLightShadow&&c.update(f),c&&c.isRectAreaLightShadow&&c.update(f);var A=c.map,E=c.matrix;Ue.setFromMatrixPosition(f.matrixWorld),d.position.copy(Ue),a.setRenderTarget(A),a.clear();for(var B=0;B<ar;B++){Hi?(we.copy(d.position),we.add(nn[B]),d.up.copy(qt[B]),d.lookAt(we),D.viewport(yn[B])):(we.setFromMatrixPosition(f.target.matrixWorld),d.lookAt(we)),d.updateMatrixWorld(),d.matrixWorldInverse.getInverse(d.matrixWorld),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(d.projectionMatrix),E.multiply(d.matrixWorldInverse),H.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),F.setFromMatrix(H),We.length=0,Di(xi,mi,d);for(var q=0,Q=We.length;q<Q;q++){var fe=We[q],me=g.update(fe),_e=fe.material;if(_e&&_e.isMultiMaterial)for(var Pe=me.groups,$e=_e.materials,Ke=0,ht=Pe.length;Ke<ht;Ke++){var rt=Pe[Ke],St=$e[rt.materialIndex];if(!0===St.visible){var Gt=si(fe,St,Hi,Ue);a.renderBufferDirect(d,null,me,Gt,fe,rt)}}else Gt=si(fe,_e,Hi,Ue),a.renderBufferDirect(d,null,me,Gt,fe,null)}}}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}var Wt=a.getClearColor(),Tt=a.getClearAlpha();a.setClearColor(Wt,Tt),Kn.needsUpdate=!1}}}function oa(a,h){this.origin=void 0!==a?a:new on,this.direction=void 0!==h?h:new on}function ks(a,h,g,y){this._x=a||0,this._y=h||0,this._z=g||0,this._order=y||ks.DefaultOrder}function qp(){this.mask=1}Zs.prototype={constructor:Zs,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update(),this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var h in a){var g=a[h];if(void 0!==g){var y=this[h];void 0!==y?y&&y.isColor?y.set(g):y&&y.isVector3&&g&&g.isVector3?y.copy(g):this[h]="overdraw"===h?Number(g):g:console.warn("THREE."+this.type+": '"+h+"' is not a property of this material.")}else console.warn("THREE.Material: '"+h+"' parameter is undefined.")}},toJSON:function(a){var h=void 0===a;h&&(a={textures:{},images:{}});var g={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function y(F){var H=[];for(var le in F){var se=F[le];delete se.metadata,H.push(se)}return H}if(g.uuid=this.uuid,g.type=this.type,""!==this.name&&(g.name=this.name),this.color&&this.color.isColor&&(g.color=this.color.getHex()),void 0!==this.roughness&&(g.roughness=this.roughness),void 0!==this.metalness&&(g.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(g.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(g.specular=this.specular.getHex()),void 0!==this.shininess&&(g.shininess=this.shininess),void 0!==this.clearCoat&&(g.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(g.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(g.map=this.map.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(g.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(g.lightMap=this.lightMap.toJSON(a).uuid),this.bumpMap&&this.bumpMap.isTexture&&(g.bumpMap=this.bumpMap.toJSON(a).uuid,g.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(g.normalMap=this.normalMap.toJSON(a).uuid,g.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(g.displacementMap=this.displacementMap.toJSON(a).uuid,g.displacementScale=this.displacementScale,g.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(g.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(g.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(g.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(g.specularMap=this.specularMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(g.envMap=this.envMap.toJSON(a).uuid,g.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(g.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.size&&(g.size=this.size),void 0!==this.sizeAttenuation&&(g.sizeAttenuation=this.sizeAttenuation),this.blending!==re&&(g.blending=this.blending),this.shading!==Ie&&(g.shading=this.shading),this.side!==Y&&(g.side=this.side),this.vertexColors!==ne&&(g.vertexColors=this.vertexColors),this.opacity<1&&(g.opacity=this.opacity),!0===this.transparent&&(g.transparent=this.transparent),g.depthFunc=this.depthFunc,g.depthTest=this.depthTest,g.depthWrite=this.depthWrite,this.alphaTest>0&&(g.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(g.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(g.wireframe=this.wireframe),this.wireframeLinewidth>1&&(g.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(g.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(g.wireframeLinejoin=this.wireframeLinejoin),g.skinning=this.skinning,g.morphTargets=this.morphTargets,h){var x=y(a.textures),D=y(a.images);x.length>0&&(g.textures=x),D.length>0&&(g.images=D)}return g},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.lights=a.lights,this.blending=a.blending,this.side=a.side,this.shading=a.shading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.overdraw=a.overdraw,this.visible=a.visible,this.clipShadows=a.clipShadows,this.clipIntersection=a.clipIntersection;var h=a.clippingPlanes,g=null;if(null!==h){var y=h.length;g=new Array(y);for(var x=0;x!==y;++x)g[x]=h[x].clone()}return this.clippingPlanes=g,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Zs.prototype,X.prototype),(eu.prototype=Object.create(Zs.prototype)).constructor=eu,eu.prototype.isShaderMaterial=!0,eu.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=sl.clone(a.uniforms),this.defines=a.defines,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.extensions=a.extensions,this},eu.prototype.toJSON=function(a){var h=Zs.prototype.toJSON.call(this,a);return h.uniforms=this.uniforms,h.vertexShader=this.vertexShader,h.fragmentShader=this.fragmentShader,h},(Ci.prototype=Object.create(Zs.prototype)).constructor=Ci,Ci.prototype.isMeshDepthMaterial=!0,Ci.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.depthPacking=a.depthPacking,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this},Ms.prototype={constructor:Ms,isBox3:!0,set:function(a,h){return this.min.copy(a),this.max.copy(h),this},setFromArray:function(a){for(var h=1/0,g=1/0,y=1/0,x=-1/0,D=-1/0,F=-1/0,H=0,le=a.length;H<le;H+=3){var se=a[H],ve=a[H+1],we=a[H+2];se<h&&(h=se),ve<g&&(g=ve),we<y&&(y=we),se>x&&(x=se),ve>D&&(D=ve),we>F&&(F=we)}this.min.set(h,g,y),this.max.set(x,D,F)},setFromBufferAttribute:function(a){for(var h=1/0,g=1/0,y=1/0,x=-1/0,D=-1/0,F=-1/0,H=0,le=a.count;H<le;H++){var se=a.getX(H),ve=a.getY(H),we=a.getZ(H);se<h&&(h=se),ve<g&&(g=ve),we<y&&(y=we),se>x&&(x=se),ve>D&&(D=ve),we>F&&(F=we)}this.min.set(h,g,y),this.max.set(x,D,F)},setFromPoints:function(a){this.makeEmpty();for(var h=0,g=a.length;h<g;h++)this.expandByPoint(a[h]);return this},setFromCenterAndSize:function(){var a=new on;return function(g,y){var x=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(x),this.max.copy(g).add(x),this}}(),setFromObject:function(){var a=new on;return function(g){var y=this;return g.updateMatrixWorld(!0),this.makeEmpty(),g.traverse(function(x){var D,F,H=x.geometry;if(void 0!==H)if(H.isGeometry){var le=H.vertices;for(D=0,F=le.length;D<F;D++)a.copy(le[D]),a.applyMatrix4(x.matrixWorld),y.expandByPoint(a)}else if(H.isBufferGeometry){var se=H.attributes.position;if(void 0!==se)for(D=0,F=se.count;D<F;D++)a.fromAttribute(se,D).applyMatrix4(x.matrixWorld),y.expandByPoint(a)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){var h=a||new on;return this.isEmpty()?h.set(0,0,0):h.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var h=a||new on;return this.isEmpty()?h.set(0,0,0):h.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,h){return(h||new on).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)},intersectsSphere:function(){var a;return function(g){return void 0===a&&(a=new on),this.clampPoint(g.center,a),a.distanceToSquared(g.center)<=g.radius*g.radius}}(),intersectsPlane:function(a){var h,g;return a.normal.x>0?(h=a.normal.x*this.min.x,g=a.normal.x*this.max.x):(h=a.normal.x*this.max.x,g=a.normal.x*this.min.x),a.normal.y>0?(h+=a.normal.y*this.min.y,g+=a.normal.y*this.max.y):(h+=a.normal.y*this.max.y,g+=a.normal.y*this.min.y),a.normal.z>0?(h+=a.normal.z*this.min.z,g+=a.normal.z*this.max.z):(h+=a.normal.z*this.max.z,g+=a.normal.z*this.min.z),h<=a.constant&&g>=a.constant},clampPoint:function(a,h){return(h||new on).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new on;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),getBoundingSphere:function(){var a=new on;return function(g){var y=g||new Ot;return this.getCenter(y.center),y.radius=.5*this.getSize(a).length(),y}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},applyMatrix4:function(){var a=[new on,new on,new on,new on,new on,new on,new on,new on];return function(g){return this.isEmpty()||(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(g),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(g),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(g),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(g),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(g),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(g),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(g),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(g),this.setFromPoints(a)),this}}(),translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}},Ot.prototype={constructor:Ot,set:function(a,h){return this.center.copy(a),this.radius=h,this},setFromPoints:function(){var a=new Ms;return function(g,y){var x=this.center;void 0!==y?x.copy(y):a.setFromPoints(g).getCenter(x);for(var D=0,F=0,H=g.length;F<H;F++)D=Math.max(D,x.distanceToSquared(g[F]));return this.radius=Math.sqrt(D),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},empty:function(){return this.radius<=0},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var h=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=h*h},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,h){var g=this.center.distanceToSquared(a),y=h||new on;return y.copy(a),g>this.radius*this.radius&&(y.sub(this.center).normalize(),y.multiplyScalar(this.radius).add(this.center)),y},getBoundingBox:function(a){var h=a||new Ms;return h.set(this.center,this.center),h.expandByScalar(this.radius),h},applyMatrix4:function(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}},Nt.prototype={constructor:Nt,isMatrix3:!0,set:function(a,h,g,y,x,D,F,H,le){var se=this.elements;return se[0]=a,se[1]=y,se[2]=F,se[3]=h,se[4]=x,se[5]=H,se[6]=g,se[7]=D,se[8]=le,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var h=a.elements;return this.set(h[0],h[3],h[6],h[1],h[4],h[7],h[2],h[5],h[8]),this},setFromMatrix4:function(a){var h=a.elements;return this.set(h[0],h[4],h[8],h[1],h[5],h[9],h[2],h[6],h[10]),this},applyToVector3Array:function(){var a;return function(g,y,x){void 0===a&&(a=new on),void 0===y&&(y=0),void 0===x&&(x=g.length);for(var D=0,F=y;D<x;D+=3,F+=3)a.fromArray(g,F),a.applyMatrix3(this),a.toArray(g,F);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new on);for(var y=0,x=g.count;y<x;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix3(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),multiplyScalar:function(a){var h=this.elements;return h[0]*=a,h[3]*=a,h[6]*=a,h[1]*=a,h[4]*=a,h[7]*=a,h[2]*=a,h[5]*=a,h[8]*=a,this},determinant:function(){var a=this.elements,h=a[0],g=a[1],y=a[2],x=a[3],D=a[4],F=a[5],H=a[6],le=a[7],se=a[8];return h*D*se-h*F*le-g*x*se+g*F*H+y*x*le-y*D*H},getInverse:function(a,h){a&&a.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var g=a.elements,y=this.elements,x=g[0],D=g[1],F=g[2],H=g[3],le=g[4],se=g[5],ve=g[6],we=g[7],Ue=g[8],We=Ue*le-se*we,je=se*ve-Ue*H,pt=we*H-le*ve,ft=x*We+D*je+F*pt;if(0===ft){var ut="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===h)throw new Error(ut);return console.warn(ut),this.identity()}var Et=1/ft;return y[0]=We*Et,y[1]=(F*we-Ue*D)*Et,y[2]=(se*D-F*le)*Et,y[3]=je*Et,y[4]=(Ue*x-F*ve)*Et,y[5]=(F*H-se*x)*Et,y[6]=pt*Et,y[7]=(D*ve-we*x)*Et,y[8]=(le*x-D*H)*Et,this},transpose:function(){var a,h=this.elements;return a=h[1],h[1]=h[3],h[3]=a,a=h[2],h[2]=h[6],h[6]=a,a=h[5],h[5]=h[7],h[7]=a,this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var h=this.elements;return a[0]=h[0],a[1]=h[3],a[2]=h[6],a[3]=h[1],a[4]=h[4],a[5]=h[7],a[6]=h[2],a[7]=h[5],a[8]=h[8],this},fromArray:function(a,h){void 0===h&&(h=0);for(var g=0;g<9;g++)this.elements[g]=a[g+h];return this},toArray:function(a,h){void 0===a&&(a=[]),void 0===h&&(h=0);var g=this.elements;return a[h]=g[0],a[h+1]=g[1],a[h+2]=g[2],a[h+3]=g[3],a[h+4]=g[4],a[h+5]=g[5],a[h+6]=g[6],a[h+7]=g[7],a[h+8]=g[8],a}},It.prototype={constructor:It,set:function(a,h){return this.normal.copy(a),this.constant=h,this},setComponents:function(a,h,g,y){return this.normal.set(a,h,g),this.constant=y,this},setFromNormalAndCoplanarPoint:function(a,h){return this.normal.copy(a),this.constant=-h.dot(this.normal),this},setFromCoplanarPoints:function(){var a=new on,h=new on;return function(y,x,D){var F=a.subVectors(D,x).cross(h.subVectors(y,x)).normalize();return this.setFromNormalAndCoplanarPoint(F,y),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.normal.copy(a.normal),this.constant=a.constant,this},normalize:function(){var a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,h){return this.orthoPoint(a,h).sub(a).negate()},orthoPoint:function(a,h){var g=this.distanceToPoint(a);return(h||new on).copy(this.normal).multiplyScalar(g)},intersectLine:function(){var a=new on;return function(g,y){var x=y||new on,D=g.delta(a),F=this.normal.dot(D);if(0===F)return 0===this.distanceToPoint(g.start)?x.copy(g.start):void 0;var H=-(g.start.dot(this.normal)+this.constant)/F;return H<0||H>1?void 0:x.copy(D).multiplyScalar(H).add(g.start)}}(),intersectsLine:function(a){var h=this.distanceToPoint(a.start),g=this.distanceToPoint(a.end);return h<0&&g>0||g<0&&h>0},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new on).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new on,h=new Nt;return function(y,x){var D=this.coplanarPoint(a).applyMatrix4(y),F=x||h.getNormalMatrix(y),H=this.normal.applyMatrix3(F).normalize();return this.constant=-D.dot(H),this}}(),translate:function(a){return this.constant=this.constant-a.dot(this.normal),this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}},No.prototype={constructor:No,set:function(a,h,g,y,x,D){var F=this.planes;return F[0].copy(a),F[1].copy(h),F[2].copy(g),F[3].copy(y),F[4].copy(x),F[5].copy(D),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var h=this.planes,g=0;g<6;g++)h[g].copy(a.planes[g]);return this},setFromMatrix:function(a){var h=this.planes,g=a.elements,y=g[0],x=g[1],D=g[2],F=g[3],H=g[4],le=g[5],se=g[6],ve=g[7],we=g[8],Ue=g[9],We=g[10],je=g[11],pt=g[12],ft=g[13],ut=g[14],Et=g[15];return h[0].setComponents(F-y,ve-H,je-we,Et-pt).normalize(),h[1].setComponents(F+y,ve+H,je+we,Et+pt).normalize(),h[2].setComponents(F+x,ve+le,je+Ue,Et+ft).normalize(),h[3].setComponents(F-x,ve-le,je-Ue,Et-ft).normalize(),h[4].setComponents(F-D,ve-se,je-We,Et-ut).normalize(),h[5].setComponents(F+D,ve+se,je+We,Et+ut).normalize(),this},intersectsObject:function(){var a=new Ot;return function(g){var y=g.geometry;return null===y.boundingSphere&&y.computeBoundingSphere(),a.copy(y.boundingSphere).applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new Ot;return function(g){return a.center.set(0,0,0),a.radius=.7071067811865476,a.applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var h=this.planes,g=a.center,y=-a.radius,x=0;x<6;x++)if(h[x].distanceToPoint(g)<y)return!1;return!0},intersectsBox:function(){var a=new on,h=new on;return function(y){for(var x=this.planes,D=0;D<6;D++){var F=x[D];a.x=F.normal.x>0?y.min.x:y.max.x,h.x=F.normal.x>0?y.max.x:y.min.x,a.y=F.normal.y>0?y.min.y:y.max.y,h.y=F.normal.y>0?y.max.y:y.min.y,a.z=F.normal.z>0?y.min.z:y.max.z,h.z=F.normal.z>0?y.max.z:y.min.z;var H=F.distanceToPoint(a),le=F.distanceToPoint(h);if(H<0&&le<0)return!1}return!0}}(),containsPoint:function(a){for(var h=this.planes,g=0;g<6;g++)if(h[g].distanceToPoint(a)<0)return!1;return!0}},oa.prototype={constructor:oa,set:function(a,h){return this.origin.copy(a),this.direction.copy(h),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,h){return(h||new on).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){return this.direction.copy(a).sub(this.origin).normalize(),this},recast:function(){var a=new on;return function(g){return this.origin.copy(this.at(g,a)),this}}(),closestPointToPoint:function(a,h){var g=h||new on;g.subVectors(a,this.origin);var y=g.dot(this.direction);return y<0?g.copy(this.origin):g.copy(this.direction).multiplyScalar(y).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new on;return function(g){var y=a.subVectors(g,this.origin).dot(this.direction);return y<0?this.origin.distanceToSquared(g):(a.copy(this.direction).multiplyScalar(y).add(this.origin),a.distanceToSquared(g))}}(),distanceSqToSegment:function(){var a=new on,h=new on,g=new on;return function(x,D,F,H){a.copy(x).add(D).multiplyScalar(.5),h.copy(D).sub(x).normalize(),g.copy(this.origin).sub(a);var je,pt,ft,ut,le=.5*x.distanceTo(D),se=-this.direction.dot(h),ve=g.dot(this.direction),we=-g.dot(h),Ue=g.lengthSq(),We=Math.abs(1-se*se);if(We>0)if(pt=se*ve-we,ut=le*We,(je=se*we-ve)>=0)if(pt>=-ut)if(pt<=ut){var Et=1/We;ft=(je*=Et)*(je+se*(pt*=Et)+2*ve)+pt*(se*je+pt+2*we)+Ue}else pt=le,ft=-(je=Math.max(0,-(se*pt+ve)))*je+pt*(pt+2*we)+Ue;else pt=-le,ft=-(je=Math.max(0,-(se*pt+ve)))*je+pt*(pt+2*we)+Ue;else pt<=-ut?ft=-(je=Math.max(0,-(-se*le+ve)))*je+(pt=je>0?-le:Math.min(Math.max(-le,-we),le))*(pt+2*we)+Ue:pt<=ut?(je=0,ft=(pt=Math.min(Math.max(-le,-we),le))*(pt+2*we)+Ue):ft=-(je=Math.max(0,-(se*le+ve)))*je+(pt=je>0?le:Math.min(Math.max(-le,-we),le))*(pt+2*we)+Ue;else pt=se>0?-le:le,ft=-(je=Math.max(0,-(se*pt+ve)))*je+pt*(pt+2*we)+Ue;return F&&F.copy(this.direction).multiplyScalar(je).add(this.origin),H&&H.copy(h).multiplyScalar(pt).add(a),ft}}(),intersectSphere:function(){var a=new on;return function(g,y){a.subVectors(g.center,this.origin);var x=a.dot(this.direction),D=a.dot(a)-x*x,F=g.radius*g.radius;if(D>F)return null;var H=Math.sqrt(F-D),le=x-H,se=x+H;return le<0&&se<0?null:this.at(le<0?se:le,y)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var h=a.normal.dot(this.direction);if(0===h)return 0===a.distanceToPoint(this.origin)?0:null;var g=-(this.origin.dot(a.normal)+a.constant)/h;return g>=0?g:null},intersectPlane:function(a,h){var g=this.distanceToPlane(a);return null===g?null:this.at(g,h)},intersectsPlane:function(a){var h=a.distanceToPoint(this.origin);return 0===h||a.normal.dot(this.direction)*h<0},intersectBox:function(a,h){var g,y,x,D,F,H,le=1/this.direction.x,se=1/this.direction.y,ve=1/this.direction.z,we=this.origin;return le>=0?(g=(a.min.x-we.x)*le,y=(a.max.x-we.x)*le):(g=(a.max.x-we.x)*le,y=(a.min.x-we.x)*le),se>=0?(x=(a.min.y-we.y)*se,D=(a.max.y-we.y)*se):(x=(a.max.y-we.y)*se,D=(a.min.y-we.y)*se),g>D||x>y||((x>g||g!=g)&&(g=x),(D<y||y!=y)&&(y=D),ve>=0?(F=(a.min.z-we.z)*ve,H=(a.max.z-we.z)*ve):(F=(a.max.z-we.z)*ve,H=(a.min.z-we.z)*ve),g>H||F>y)||((F>g||g!=g)&&(g=F),(H<y||y!=y)&&(y=H),y<0)?null:this.at(g>=0?g:y,h)},intersectsBox:function(){var a=new on;return function(g){return null!==this.intersectBox(g,a)}}(),intersectTriangle:function(){var a=new on,h=new on,g=new on,y=new on;return function(D,F,H,le,se){h.subVectors(F,D),g.subVectors(H,D),y.crossVectors(h,g);var we,ve=this.direction.dot(y);if(ve>0){if(le)return null;we=1}else{if(!(ve<0))return null;we=-1,ve=-ve}a.subVectors(this.origin,D);var Ue=we*this.direction.dot(g.crossVectors(a,g));if(Ue<0)return null;var We=we*this.direction.dot(h.cross(a));if(We<0||Ue+We>ve)return null;var je=-we*a.dot(y);return je<0?null:this.at(je/ve,se)}}(),applyMatrix4:function(a){return this.direction.add(this.origin).applyMatrix4(a),this.origin.applyMatrix4(a),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}},ks.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ks.DefaultOrder="XYZ",ks.prototype={constructor:ks,isEuler:!0,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a,this.onChangeCallback()},set:function(a,h,g,y){return this._x=a,this._y=h,this._z=g,this._order=y||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this.onChangeCallback(),this},setFromRotationMatrix:function(a,h,g){var y=xs.clamp,x=a.elements,D=x[0],F=x[4],H=x[8],le=x[1],se=x[5],ve=x[9],we=x[2],Ue=x[6],We=x[10];return"XYZ"===(h=h||this._order)?(this._y=Math.asin(y(H,-1,1)),Math.abs(H)<.99999?(this._x=Math.atan2(-ve,We),this._z=Math.atan2(-F,D)):(this._x=Math.atan2(Ue,se),this._z=0)):"YXZ"===h?(this._x=Math.asin(-y(ve,-1,1)),Math.abs(ve)<.99999?(this._y=Math.atan2(H,We),this._z=Math.atan2(le,se)):(this._y=Math.atan2(-we,D),this._z=0)):"ZXY"===h?(this._x=Math.asin(y(Ue,-1,1)),Math.abs(Ue)<.99999?(this._y=Math.atan2(-we,We),this._z=Math.atan2(-F,se)):(this._y=0,this._z=Math.atan2(le,D))):"ZYX"===h?(this._y=Math.asin(-y(we,-1,1)),Math.abs(we)<.99999?(this._x=Math.atan2(Ue,We),this._z=Math.atan2(le,D)):(this._x=0,this._z=Math.atan2(-F,se))):"YZX"===h?(this._z=Math.asin(y(le,-1,1)),Math.abs(le)<.99999?(this._x=Math.atan2(-ve,se),this._y=Math.atan2(-we,D)):(this._x=0,this._y=Math.atan2(H,We))):"XZY"===h?(this._z=Math.asin(-y(F,-1,1)),Math.abs(F)<.99999?(this._x=Math.atan2(Ue,se),this._y=Math.atan2(H,D)):(this._x=Math.atan2(-ve,We),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+h),this._order=h,!1!==g&&this.onChangeCallback(),this},setFromQuaternion:function(){var a;return function(g,y,x){return void 0===a&&(a=new bs),a.makeRotationFromQuaternion(g),this.setFromRotationMatrix(a,y,x)}}(),setFromVector3:function(a,h){return this.set(a.x,a.y,a.z,h||this._order)},reorder:function(){var a=new kl;return function(g){return a.setFromEuler(this),this.setFromQuaternion(a,g)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this.onChangeCallback(),this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this._x,a[h+1]=this._y,a[h+2]=this._z,a[h+3]=this._order,a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new on(this._x,this._y,this._z)},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},qp.prototype={constructor:qp,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!=(this.mask&a.mask)}};var op=0;function Cr(){Object.defineProperty(this,"id",{value:op++}),this.uuid=xs.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cr.DefaultUp.clone();var a=new on,h=new ks,g=new kl,y=new on(1,1,1);h.onChange(function x(){g.setFromEuler(h,!1)}),g.onChange(function D(){h.setFromQuaternion(g,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:h},quaternion:{enumerable:!0,value:g},scale:{enumerable:!0,value:y},modelViewMatrix:{value:new bs},normalMatrix:{value:new Nt}}),this.matrix=new bs,this.matrixWorld=new bs,this.matrixAutoUpdate=Cr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new qp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function Fl(a,h){this.start=void 0!==a?a:new on,this.end=void 0!==h?h:new on}function Ca(a,h,g){this.a=void 0!==a?a:new on,this.b=void 0!==h?h:new on,this.c=void 0!==g?g:new on}function Bo(a,h,g,y,x,D){this.a=a,this.b=h,this.c=g,this.normal=y&&y.isVector3?y:new on,this.vertexNormals=Array.isArray(y)?y:[],this.color=x&&x.isColor?x:new Kr,this.vertexColors=Array.isArray(x)?x:[],this.materialIndex=void 0!==D?D:0}function Va(a){Zs.call(this),this.type="MeshBasicMaterial",this.color=new Kr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ye,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(a)}function gr(a,h,g){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=xs.generateUUID(),this.array=a,this.itemSize=h,this.count=void 0!==a?a.length/h:0,this.normalized=!0===g,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Oh(a,h){gr.call(this,new Int8Array(a),h)}function vl(a,h){gr.call(this,new Uint8Array(a),h)}function Bd(a,h){gr.call(this,new Uint8ClampedArray(a),h)}function ap(a,h){gr.call(this,new Int16Array(a),h)}function zd(a,h){gr.call(this,new Uint16Array(a),h)}function Cf(a,h){gr.call(this,new Int32Array(a),h)}function Bu(a,h){gr.call(this,new Uint32Array(a),h)}function ls(a,h){gr.call(this,new Float32Array(a),h)}function Pc(a,h){gr.call(this,new Float64Array(a),h)}function Hg(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ds(){Object.defineProperty(this,"id",{value:Gg()}),this.uuid=xs.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Cr.DefaultUp=new on(0,1,0),Cr.DefaultMatrixAutoUpdate=!0,Object.assign(Cr.prototype,X.prototype,{isObject3D:!0,applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,h){this.quaternion.setFromAxisAngle(a,h)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new kl;return function(g,y){return a.setFromAxisAngle(g,y),this.quaternion.multiply(a),this}}(),rotateX:function(){var a=new on(1,0,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateY:function(){var a=new on(0,1,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateZ:function(){var a=new on(0,0,1);return function(g){return this.rotateOnAxis(a,g)}}(),translateOnAxis:function(){var a=new on;return function(g,y){return a.copy(g).applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(y)),this}}(),translateX:function(){var a=new on(1,0,0);return function(g){return this.translateOnAxis(a,g)}}(),translateY:function(){var a=new on(0,1,0);return function(g){return this.translateOnAxis(a,g)}}(),translateZ:function(){var a=new on(0,0,1);return function(g){return this.translateOnAxis(a,g)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new bs;return function(g){return g.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new bs;return function(g){a.lookAt(g,this.position,this.up),this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(arguments.length>1){for(var h=0;h<arguments.length;h++)this.add(arguments[h]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)},remove:function(a){if(arguments.length>1)for(var h=0;h<arguments.length;h++)this.remove(arguments[h]);var g=this.children.indexOf(a);-1!==g&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(g,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,h){if(this[a]===h)return this;for(var g=0,y=this.children.length;g<y;g++){var D=this.children[g].getObjectByProperty(a,h);if(void 0!==D)return D}},getWorldPosition:function(a){var h=a||new on;return this.updateMatrixWorld(!0),h.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new on,h=new on;return function(y){var x=y||new kl;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,x,h),x}}(),getWorldRotation:function(){var a=new kl;return function(g){var y=g||new ks;return this.getWorldQuaternion(a),y.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new on,h=new kl;return function(y){var x=y||new on;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,h,x),x}}(),getWorldDirection:function(){var a=new kl;return function(g){var y=g||new on;return this.getWorldQuaternion(a),y.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var h=this.children,g=0,y=h.length;g<y;g++)h[g].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var h=this.children,g=0,y=h.length;g<y;g++)h[g].traverseVisible(a)}},traverseAncestors:function(a){var h=this.parent;null!==h&&(a(h),h.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var h=this.children,g=0,y=h.length;g<y;g++)h[g].updateMatrixWorld(a)},toJSON:function(a){var h=void 0===a||""===a,g={};h&&(a={geometries:{},materials:{},textures:{},images:{}},g.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var y={};if(y.uuid=this.uuid,y.type=this.type,""!==this.name&&(y.name=this.name),"{}"!==JSON.stringify(this.userData)&&(y.userData=this.userData),!0===this.castShadow&&(y.castShadow=!0),!0===this.receiveShadow&&(y.receiveShadow=!0),!1===this.visible&&(y.visible=!1),y.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),y.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),y.material=this.material.uuid),this.children.length>0){y.children=[];for(var x=0;x<this.children.length;x++)y.children.push(this.children[x].toJSON(a).object)}if(h){var D=se(a.geometries),F=se(a.materials),H=se(a.textures),le=se(a.images);D.length>0&&(g.geometries=D),F.length>0&&(g.materials=F),H.length>0&&(g.textures=H),le.length>0&&(g.images=le)}return g.object=y,g;function se(ve){var we=[];for(var Ue in ve){var We=ve[Ue];delete We.metadata,we.push(We)}return we}},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,h){if(void 0===h&&(h=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===h)for(var g=0;g<a.children.length;g++)this.add(a.children[g].clone());return this}}),Fl.prototype={constructor:Fl,set:function(a,h){return this.start.copy(a),this.end.copy(h),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.start.copy(a.start),this.end.copy(a.end),this},getCenter:function(a){return(a||new on).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new on).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,h){var g=h||new on;return this.delta(g).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new on,h=new on;return function(y,x){a.subVectors(y,this.start),h.subVectors(this.end,this.start);var D=h.dot(h),H=h.dot(a)/D;return x&&(H=xs.clamp(H,0,1)),H}}(),closestPointToPoint:function(a,h,g){var y=this.closestPointToPointParameter(a,h),x=g||new on;return this.delta(x).multiplyScalar(y).add(this.start)},applyMatrix4:function(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}},Ca.normal=function(){var a=new on;return function(g,y,x,D){var F=D||new on;F.subVectors(x,y),a.subVectors(g,y),F.cross(a);var H=F.lengthSq();return H>0?F.multiplyScalar(1/Math.sqrt(H)):F.set(0,0,0)}}(),Ca.barycoordFromPoint=function(){var a=new on,h=new on,g=new on;return function(x,D,F,H,le){a.subVectors(H,D),h.subVectors(F,D),g.subVectors(x,D);var se=a.dot(a),ve=a.dot(h),we=a.dot(g),Ue=h.dot(h),We=h.dot(g),je=se*Ue-ve*ve,pt=le||new on;if(0===je)return pt.set(-2,-1,-1);var ft=1/je,ut=(Ue*we-ve*We)*ft,Et=(se*We-ve*we)*ft;return pt.set(1-ut-Et,Et,ut)}}(),Ca.containsPoint=function(){var a=new on;return function(g,y,x,D){var F=Ca.barycoordFromPoint(g,y,x,D,a);return F.x>=0&&F.y>=0&&F.x+F.y<=1}}(),Ca.prototype={constructor:Ca,set:function(a,h,g){return this.a.copy(a),this.b.copy(h),this.c.copy(g),this},setFromPointsAndIndices:function(a,h,g,y){return this.a.copy(a[h]),this.b.copy(a[g]),this.c.copy(a[y]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},area:function(){var a=new on,h=new on;return function(){return a.subVectors(this.c,this.b),h.subVectors(this.a,this.b),.5*a.cross(h).length()}}(),midpoint:function(a){return(a||new on).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Ca.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new It).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,h){return Ca.barycoordFromPoint(a,this.a,this.b,this.c,h)},containsPoint:function(a){return Ca.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a,h,g,y;return function(D,F){void 0===a&&(a=new It,h=[new Fl,new Fl,new Fl],g=new on,y=new on);var H=F||new on,le=1/0;if(a.setFromCoplanarPoints(this.a,this.b,this.c),a.projectPoint(D,g),!0===this.containsPoint(g))H.copy(g);else{h[0].set(this.a,this.b),h[1].set(this.b,this.c),h[2].set(this.c,this.a);for(var se=0;se<h.length;se++){h[se].closestPointToPoint(g,!0,y);var ve=g.distanceToSquared(y);ve<le&&(le=ve,H.copy(y))}}return H}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}},Bo.prototype={constructor:Bo,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a,this.b=a.b,this.c=a.c,this.normal.copy(a.normal),this.color.copy(a.color),this.materialIndex=a.materialIndex;for(var h=0,g=a.vertexNormals.length;h<g;h++)this.vertexNormals[h]=a.vertexNormals[h].clone();for(h=0,g=a.vertexColors.length;h<g;h++)this.vertexColors[h]=a.vertexColors[h].clone();return this}},(Va.prototype=Object.create(Zs.prototype)).constructor=Va,Va.prototype.isMeshBasicMaterial=!0,Va.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this},gr.prototype={constructor:gr,isBufferAttribute:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.dynamic=a.dynamic,this},copyAt:function(a,h,g){a*=this.itemSize,g*=h.itemSize;for(var y=0,x=this.itemSize;y<x;y++)this.array[a+y]=h.array[g+y];return this},copyArray:function(a){return this.array.set(a),this},copyColorsArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var D=a[y];void 0===D&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",y),D=new Kr),h[g++]=D.r,h[g++]=D.g,h[g++]=D.b}return this},copyIndicesArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var D=a[y];h[g++]=D.a,h[g++]=D.b,h[g++]=D.c}return this},copyVector2sArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var D=a[y];void 0===D&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",y),D=new er),h[g++]=D.x,h[g++]=D.y}return this},copyVector3sArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var D=a[y];void 0===D&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",y),D=new on),h[g++]=D.x,h[g++]=D.y,h[g++]=D.z}return this},copyVector4sArray:function(a){for(var h=this.array,g=0,y=0,x=a.length;y<x;y++){var D=a[y];void 0===D&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",y),D=new Ko),h[g++]=D.x,h[g++]=D.y,h[g++]=D.z,h[g++]=D.w}return this},set:function(a,h){return void 0===h&&(h=0),this.array.set(a,h),this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,h){return this.array[a*this.itemSize]=h,this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,h){return this.array[a*this.itemSize+1]=h,this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,h){return this.array[a*this.itemSize+2]=h,this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,h){return this.array[a*this.itemSize+3]=h,this},setXY:function(a,h,g){return this.array[0+(a*=this.itemSize)]=h,this.array[a+1]=g,this},setXYZ:function(a,h,g,y){return this.array[0+(a*=this.itemSize)]=h,this.array[a+1]=g,this.array[a+2]=y,this},setXYZW:function(a,h,g,y,x){return this.array[0+(a*=this.itemSize)]=h,this.array[a+1]=g,this.array[a+2]=y,this.array[a+3]=x,this},onUpload:function(a){return this.onUploadCallback=a,this},clone:function(){return(new this.constructor).copy(this)}},(Oh.prototype=Object.create(gr.prototype)).constructor=Oh,(vl.prototype=Object.create(gr.prototype)).constructor=vl,(Bd.prototype=Object.create(gr.prototype)).constructor=Bd,(ap.prototype=Object.create(gr.prototype)).constructor=ap,(zd.prototype=Object.create(gr.prototype)).constructor=zd,(Cf.prototype=Object.create(gr.prototype)).constructor=Cf,(Bu.prototype=Object.create(gr.prototype)).constructor=Bu,(ls.prototype=Object.create(gr.prototype)).constructor=ls,(Pc.prototype=Object.create(gr.prototype)).constructor=Pc,Object.assign(Hg.prototype,{computeGroups:function(a){for(var h,g=[],y=void 0,x=a.faces,D=0;D<x.length;D++){var F=x[D];F.materialIndex!==y&&(y=F.materialIndex,void 0!==h&&(h.count=3*D-h.start,g.push(h)),h={start:3*D,materialIndex:y})}void 0!==h&&(h.count=3*D-h.start,g.push(h)),this.groups=g},fromGeometry:function(a){var le,h=a.faces,g=a.vertices,y=a.faceVertexUvs,x=y[0]&&y[0].length>0,D=y[1]&&y[1].length>0,F=a.morphTargets,H=F.length;if(H>0){le=[];for(var se=0;se<H;se++)le[se]=[];this.morphTargets.position=le}var Ue,ve=a.morphNormals,we=ve.length;if(we>0){for(Ue=[],se=0;se<we;se++)Ue[se]=[];this.morphTargets.normal=Ue}var We=a.skinIndices,je=a.skinWeights,pt=We.length===g.length,ft=je.length===g.length;for(se=0;se<h.length;se++){var ut=h[se];this.vertices.push(g[ut.a],g[ut.b],g[ut.c]);var Et=ut.vertexNormals;if(3===Et.length)this.normals.push(Et[0],Et[1],Et[2]);else{var Mt=ut.normal;this.normals.push(Mt,Mt,Mt)}var yn,nn=ut.vertexColors;if(3===nn.length)this.colors.push(nn[0],nn[1],nn[2]);else{var qt=ut.color;this.colors.push(qt,qt,qt)}!0===x&&(void 0!==(yn=y[0][se])?this.uvs.push(yn[0],yn[1],yn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",se),this.uvs.push(new er,new er,new er))),!0===D&&(void 0!==(yn=y[1][se])?this.uvs2.push(yn[0],yn[1],yn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",se),this.uvs2.push(new er,new er,new er)));for(var fn=0;fn<H;fn++){var an=F[fn].vertices;le[fn].push(an[ut.a],an[ut.b],an[ut.c])}for(fn=0;fn<we;fn++){var bn=ve[fn].vertexNormals[se];Ue[fn].push(bn.a,bn.b,bn.c)}pt&&this.skinIndices.push(We[ut.a],We[ut.b],We[ut.c]),ft&&this.skinWeights.push(je[ut.a],je[ut.b],je[ut.c])}return this.computeGroups(a),this.verticesNeedUpdate=a.verticesNeedUpdate,this.normalsNeedUpdate=a.normalsNeedUpdate,this.colorsNeedUpdate=a.colorsNeedUpdate,this.uvsNeedUpdate=a.uvsNeedUpdate,this.groupsNeedUpdate=a.groupsNeedUpdate,this}}),Object.assign(Ds.prototype,X.prototype,{isGeometry:!0,applyMatrix:function(a){for(var h=(new Nt).getNormalMatrix(a),g=0,y=this.vertices.length;g<y;g++)this.vertices[g].applyMatrix4(a);for(g=0,y=this.faces.length;g<y;g++){var D=this.faces[g];D.normal.applyMatrix3(h).normalize();for(var F=0,H=D.vertexNormals.length;F<H;F++)D.vertexNormals[F].applyMatrix3(h).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new bs),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new bs),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new bs),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,x){return void 0===a&&(a=new bs),a.makeTranslation(g,y,x),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,x){return void 0===a&&(a=new bs),a.makeScale(g,y,x),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new Cr),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){var h=this,g=null!==a.index?a.index.array:void 0,y=a.attributes,x=y.position.array,D=void 0!==y.normal?y.normal.array:void 0,F=void 0!==y.color?y.color.array:void 0,H=void 0!==y.uv?y.uv.array:void 0,le=void 0!==y.uv2?y.uv2.array:void 0;void 0!==le&&(this.faceVertexUvs[1]=[]);for(var se=[],ve=[],we=[],Ue=0,We=0;Ue<x.length;Ue+=3,We+=2)h.vertices.push(new on(x[Ue],x[Ue+1],x[Ue+2])),void 0!==D&&se.push(new on(D[Ue],D[Ue+1],D[Ue+2])),void 0!==F&&h.colors.push(new Kr(F[Ue],F[Ue+1],F[Ue+2])),void 0!==H&&ve.push(new er(H[We],H[We+1])),void 0!==le&&we.push(new er(le[We],le[We+1]));function je(nn,qt,yn,fn){var Nn=new Bo(nn,qt,yn,void 0!==D?[se[nn].clone(),se[qt].clone(),se[yn].clone()]:[],void 0!==F?[h.colors[nn].clone(),h.colors[qt].clone(),h.colors[yn].clone()]:[],fn);h.faces.push(Nn),void 0!==H&&h.faceVertexUvs[0].push([ve[nn].clone(),ve[qt].clone(),ve[yn].clone()]),void 0!==le&&h.faceVertexUvs[1].push([we[nn].clone(),we[qt].clone(),we[yn].clone()])}if(void 0!==g){var pt=a.groups;if(pt.length>0)for(Ue=0;Ue<pt.length;Ue++)for(var ft=pt[Ue],ut=ft.start,Mt=(We=ut,ut+ft.count);We<Mt;We+=3)je(g[We],g[We+1],g[We+2],ft.materialIndex);else for(Ue=0;Ue<g.length;Ue+=3)je(g[Ue],g[Ue+1],g[Ue+2])}else for(Ue=0;Ue<x.length/3;Ue+=3)je(Ue,Ue+1,Ue+2);return this.computeFaceNormals(),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,h=this.boundingSphere.radius,g=0===h?1:1/h,y=new bs;return y.set(g,0,0,-g*a.x,0,g,0,-g*a.y,0,0,g,-g*a.z,0,0,0,1),this.applyMatrix(y),this},computeFaceNormals:function(){for(var a=new on,h=new on,g=0,y=this.faces.length;g<y;g++){var x=this.faces[g],D=this.vertices[x.a],F=this.vertices[x.b];a.subVectors(this.vertices[x.c],F),h.subVectors(D,F),a.cross(h),a.normalize(),x.normal.copy(a)}},computeVertexNormals:function(a){var h,g,y,x,D,F;for(void 0===a&&(a=!0),F=new Array(this.vertices.length),h=0,g=this.vertices.length;h<g;h++)F[h]=new on;if(a){var H,le,ve=new on,we=new on;for(y=0,x=this.faces.length;y<x;y++)H=this.vertices[(D=this.faces[y]).a],ve.subVectors(this.vertices[D.c],le=this.vertices[D.b]),we.subVectors(H,le),ve.cross(we),F[D.a].add(ve),F[D.b].add(ve),F[D.c].add(ve)}else for(this.computeFaceNormals(),y=0,x=this.faces.length;y<x;y++)F[(D=this.faces[y]).a].add(D.normal),F[D.b].add(D.normal),F[D.c].add(D.normal);for(h=0,g=this.vertices.length;h<g;h++)F[h].normalize();for(y=0,x=this.faces.length;y<x;y++){var Ue=(D=this.faces[y]).vertexNormals;3===Ue.length?(Ue[0].copy(F[D.a]),Ue[1].copy(F[D.b]),Ue[2].copy(F[D.c])):(Ue[0]=F[D.a].clone(),Ue[1]=F[D.b].clone(),Ue[2]=F[D.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,h,g;for(this.computeFaceNormals(),a=0,h=this.faces.length;a<h;a++){var y=(g=this.faces[a]).vertexNormals;3===y.length?(y[0].copy(g.normal),y[1].copy(g.normal),y[2].copy(g.normal)):(y[0]=g.normal.clone(),y[1]=g.normal.clone(),y[2]=g.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,h,g,y,x;for(g=0,y=this.faces.length;g<y;g++)for((x=this.faces[g]).__originalFaceNormal?x.__originalFaceNormal.copy(x.normal):x.__originalFaceNormal=x.normal.clone(),x.__originalVertexNormals||(x.__originalVertexNormals=[]),a=0,h=x.vertexNormals.length;a<h;a++)x.__originalVertexNormals[a]?x.__originalVertexNormals[a].copy(x.vertexNormals[a]):x.__originalVertexNormals[a]=x.vertexNormals[a].clone();var D=new Ds;for(D.faces=this.faces,a=0,h=this.morphTargets.length;a<h;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];var F=this.morphNormals[a].faceNormals,H=this.morphNormals[a].vertexNormals;for(g=0,y=this.faces.length;g<y;g++)se=new on,ve={a:new on,b:new on,c:new on},F.push(se),H.push(ve)}var se,ve,le=this.morphNormals[a];for(D.vertices=this.morphTargets[a].vertices,D.computeFaceNormals(),D.computeVertexNormals(),g=0,y=this.faces.length;g<y;g++)ve=le.vertexNormals[g],(se=le.faceNormals[g]).copy((x=this.faces[g]).normal),ve.a.copy(x.vertexNormals[0]),ve.b.copy(x.vertexNormals[1]),ve.c.copy(x.vertexNormals[2])}for(g=0,y=this.faces.length;g<y;g++)(x=this.faces[g]).normal=x.__originalFaceNormal,x.vertexNormals=x.__originalVertexNormals},computeLineDistances:function(){for(var a=0,h=this.vertices,g=0,y=h.length;g<y;g++)g>0&&(a+=h[g].distanceTo(h[g-1])),this.lineDistances[g]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ms),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Ot),this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,h,g){if(!1!==(a&&a.isGeometry)){var y,x=this.vertices.length,D=this.vertices,F=a.vertices,H=this.faces,le=a.faces,se=this.faceVertexUvs[0],ve=a.faceVertexUvs[0],we=this.colors,Ue=a.colors;void 0===g&&(g=0),void 0!==h&&(y=(new Nt).getNormalMatrix(h));for(var We=0,je=F.length;We<je;We++){var ft=F[We].clone();void 0!==h&&ft.applyMatrix4(h),D.push(ft)}for(We=0,je=Ue.length;We<je;We++)we.push(Ue[We].clone());for(We=0,je=le.length;We<je;We++){var Et,Mt,ut=le[We],qt=ut.vertexNormals,yn=ut.vertexColors;(Et=new Bo(ut.a+x,ut.b+x,ut.c+x)).normal.copy(ut.normal),void 0!==y&&Et.normal.applyMatrix3(y).normalize();for(var fn=0,an=qt.length;fn<an;fn++)Mt=qt[fn].clone(),void 0!==y&&Mt.applyMatrix3(y).normalize(),Et.vertexNormals.push(Mt);for(Et.color.copy(ut.color),fn=0,an=yn.length;fn<an;fn++)Et.vertexColors.push(yn[fn].clone());Et.materialIndex=ut.materialIndex+g,H.push(Et)}for(We=0,je=ve.length;We<je;We++){var bn=ve[We],Nn=[];if(void 0!==bn){for(fn=0,an=bn.length;fn<an;fn++)Nn.push(bn[fn].clone());se.push(Nn)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a)},mergeMesh:function(a){!1!==(a&&a.isMesh)?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){var y,x,H,le,se,ve,we,Ue,a={},h=[],g=[],F=Math.pow(10,4);for(H=0,le=this.vertices.length;H<le;H++)y=this.vertices[H],void 0===a[x=Math.round(y.x*F)+"_"+Math.round(y.y*F)+"_"+Math.round(y.z*F)]?(a[x]=H,h.push(this.vertices[H]),g[H]=h.length-1):g[H]=g[a[x]];var We=[];for(H=0,le=this.faces.length;H<le;H++){(se=this.faces[H]).a=g[se.a],se.b=g[se.b],se.c=g[se.c],ve=[se.a,se.b,se.c];for(var pt=0;pt<3;pt++)if(ve[pt]===ve[(pt+1)%3]){We.push(H);break}}for(H=We.length-1;H>=0;H--){var ft=We[H];for(this.faces.splice(ft,1),we=0,Ue=this.faceVertexUvs.length;we<Ue;we++)this.faceVertexUvs[we].splice(ft,1)}var ut=this.vertices.length-h.length;return this.vertices=h,ut},sortFacesByMaterialIndex:function(){for(var a=this.faces,h=a.length,g=0;g<h;g++)a[g]._id=g;a.sort(function y(se,ve){return se.materialIndex-ve.materialIndex});var F,H,x=this.faceVertexUvs[0],D=this.faceVertexUvs[1];for(x&&x.length===h&&(F=[]),D&&D.length===h&&(H=[]),g=0;g<h;g++){var le=a[g]._id;F&&F.push(x[le]),H&&H.push(D[le])}F&&(this.faceVertexUvs[0]=F),H&&(this.faceVertexUvs[1]=H)},toJSON:function(){var a={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var h=this.parameters;for(var g in h)void 0!==h[g]&&(a[g]=h[g]);return a}for(var y=[],x=0;x<this.vertices.length;x++){var D=this.vertices[x];y.push(D.x,D.y,D.z)}var F=[],H=[],le={},se=[],ve={},we=[],Ue={};for(x=0;x<this.faces.length;x++){var We=this.faces[x],ft=void 0!==this.faceVertexUvs[0][x],ut=We.normal.length()>0,Et=We.vertexNormals.length>0,Mt=1!==We.color.r||1!==We.color.g||1!==We.color.b,nn=We.vertexColors.length>0,qt=0;if(qt=bn(qt,0,0),qt=bn(qt,1,!0),qt=bn(qt,2,!1),qt=bn(qt,3,ft),qt=bn(qt,4,ut),qt=bn(qt,5,Et),qt=bn(qt,6,Mt),qt=bn(qt,7,nn),F.push(qt),F.push(We.a,We.b,We.c),F.push(We.materialIndex),ft){var yn=this.faceVertexUvs[0][x];F.push(fi(yn[0]),fi(yn[1]),fi(yn[2]))}if(ut&&F.push(Nn(We.normal)),Et){var fn=We.vertexNormals;F.push(Nn(fn[0]),Nn(fn[1]),Nn(fn[2]))}if(Mt&&F.push(Mi(We.color)),nn){var an=We.vertexColors;F.push(Mi(an[0]),Mi(an[1]),Mi(an[2]))}}function bn(Jt,tn,Kn){return Kn?Jt|1<<tn:Jt&~(1<<tn)}function Nn(Jt){var tn=Jt.x.toString()+Jt.y.toString()+Jt.z.toString();return void 0!==le[tn]||(le[tn]=H.length/3,H.push(Jt.x,Jt.y,Jt.z)),le[tn]}function Mi(Jt){var tn=Jt.r.toString()+Jt.g.toString()+Jt.b.toString();return void 0!==ve[tn]||(ve[tn]=se.length,se.push(Jt.getHex())),ve[tn]}function fi(Jt){var tn=Jt.x.toString()+Jt.y.toString();return void 0!==Ue[tn]||(Ue[tn]=we.length/2,we.push(Jt.x,Jt.y)),Ue[tn]}return a.data={},a.data.vertices=y,a.data.normals=H,se.length>0&&(a.data.colors=se),we.length>0&&(a.data.uvs=[we]),a.data.faces=F,a},clone:function(){return(new Ds).copy(this)},copy:function(a){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var h=a.vertices,g=0,y=h.length;g<y;g++)this.vertices.push(h[g].clone());var x=a.colors;for(g=0,y=x.length;g<y;g++)this.colors.push(x[g].clone());var D=a.faces;for(g=0,y=D.length;g<y;g++)this.faces.push(D[g].clone());for(g=0,y=a.faceVertexUvs.length;g<y;g++){var F=a.faceVertexUvs[g];void 0===this.faceVertexUvs[g]&&(this.faceVertexUvs[g]=[]);for(var H=0,le=F.length;H<le;H++){for(var se=F[H],ve=[],we=0,Ue=se.length;we<Ue;we++)ve.push(se[we].clone());this.faceVertexUvs[g].push(ve)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Dv=0;function Gg(){return Dv++}function Lr(){Object.defineProperty(this,"id",{value:Gg()}),this.uuid=xs.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function wa(a,h){Cr.call(this),this.type="Mesh",this.geometry=void 0!==a?a:new Lr,this.material=void 0!==h?h:new Va({color:16777215*Math.random()}),this.drawMode=Ya,this.updateMorphTargets()}function Nl(a,h,g,y,x,D){Lr.call(this),this.type="BoxBufferGeometry",this.parameters={width:a,height:h,depth:g,widthSegments:y,heightSegments:x,depthSegments:D};var F=this,H=function Et(qt,yn,fn){var an=0;return an+=(qt+1)*(yn+1)*2,(an+=(qt+1)*(fn+1)*2)+(fn+1)*(yn+1)*2}(y=Math.floor(y)||1,x=Math.floor(x)||1,D=Math.floor(D)||1),le=function Mt(qt,yn,fn){var an=0;return an+=qt*yn*2,6*((an+=qt*fn*2)+fn*yn*2)}(y,x,D),se=new(le>65535?Uint32Array:Uint16Array)(le),ve=new Float32Array(3*H),we=new Float32Array(3*H),Ue=new Float32Array(2*H),We=0,je=0,pt=0,ft=0,ut=0;function nn(qt,yn,fn,an,bn,Nn,Mi,fi,Jt,tn,Kn){for(var si=Nn/Jt,Di=Mi/tn,xi=Nn/2,mi=Mi/2,ar=fi/2,Hi=Jt+1,Zn=tn+1,qn=0,f=0,c=new on,d=0;d<Zn;d++)for(var m=d*Di-mi,_=0;_<Hi;_++)c[qt]=(_*si-xi)*an,c[yn]=m*bn,c[fn]=ar,ve[We]=c.x,ve[We+1]=c.y,ve[We+2]=c.z,c[qt]=0,c[yn]=0,c[fn]=fi>0?1:-1,we[We]=c.x,we[We+1]=c.y,we[We+2]=c.z,Ue[je]=_/Jt,Ue[je+1]=1-d/tn,We+=3,je+=2,qn+=1;for(d=0;d<tn;d++)for(_=0;_<Jt;_++){var E=ft+_+Hi*(d+1),B=ft+(_+1)+Hi*(d+1),P=ft+(_+1)+Hi*d;se[pt]=ft+_+Hi*d,se[pt+1]=E,se[pt+2]=P,se[pt+3]=E,se[pt+4]=B,se[pt+5]=P,pt+=6,f+=6}F.addGroup(ut,f,Kn),ut+=f,ft+=qn}nn("z","y","x",-1,-1,g,h,a,D,x,0),nn("z","y","x",1,-1,g,h,-a,D,x,1),nn("x","z","y",1,1,a,g,h,y,D,2),nn("x","z","y",1,-1,a,g,-h,y,D,3),nn("x","y","z",1,-1,a,h,g,y,x,4),nn("x","y","z",-1,-1,a,h,-g,y,x,5),this.setIndex(new gr(se,1)),this.addAttribute("position",new gr(ve,3)),this.addAttribute("normal",new gr(we,3)),this.addAttribute("uv",new gr(Ue,2))}function aa(a,h,g,y){Lr.call(this),this.type="PlaneBufferGeometry",this.parameters={width:a,height:h,widthSegments:g,heightSegments:y};for(var x=a/2,D=h/2,F=Math.floor(g)||1,H=Math.floor(y)||1,le=F+1,se=H+1,ve=a/F,we=h/H,Ue=new Float32Array(le*se*3),We=new Float32Array(le*se*3),je=new Float32Array(le*se*2),pt=0,ft=0,ut=0;ut<se;ut++)for(var Et=ut*we-D,Mt=0;Mt<le;Mt++)Ue[pt]=Mt*ve-x,Ue[pt+1]=-Et,We[pt+2]=1,je[ft]=Mt/F,je[ft+1]=1-ut/H,pt+=3,ft+=2;pt=0;var qt=new(Ue.length/3>65535?Uint32Array:Uint16Array)(F*H*6);for(ut=0;ut<H;ut++)for(Mt=0;Mt<F;Mt++){var fn=Mt+le*(ut+1),an=Mt+1+le*(ut+1),bn=Mt+1+le*ut;qt[pt]=Mt+le*ut,qt[pt+1]=fn,qt[pt+2]=bn,qt[pt+3]=fn,qt[pt+4]=an,qt[pt+5]=bn,pt+=6}this.setIndex(new gr(qt,1)),this.addAttribute("position",new gr(Ue,3)),this.addAttribute("normal",new gr(We,3)),this.addAttribute("uv",new gr(je,2))}function Ua(){Cr.call(this),this.type="Camera",this.matrixWorldInverse=new bs,this.projectionMatrix=new bs}function xl(a,h,g,y){Ua.call(this),this.type="PerspectiveCamera",this.fov=void 0!==a?a:50,this.zoom=1,this.near=void 0!==g?g:.1,this.far=void 0!==y?y:2e3,this.focus=10,this.aspect=void 0!==h?h:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Vd(a,h,g,y,x,D){Ua.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=h,this.top=g,this.bottom=y,this.near=void 0!==x?x:.1,this.far=void 0!==D?D:2e3,this.updateProjectionMatrix()}function dc(a,h,g){var y,D,F;return{setMode:function x(ve){y=ve},setIndex:function H(ve){ve.array instanceof Uint32Array&&h.get("OES_element_index_uint")?(D=a.UNSIGNED_INT,F=4):ve.array instanceof Uint16Array?(D=a.UNSIGNED_SHORT,F=2):(D=a.UNSIGNED_BYTE,F=1)},render:function le(ve,we){a.drawElements(y,we,D,ve*F),g.calls++,g.vertices+=we,y===a.TRIANGLES&&(g.faces+=we/3)},renderInstances:function se(ve,we,Ue){var We=h.get("ANGLE_instanced_arrays");null!==We?(We.drawElementsInstancedANGLE(y,Ue,D,we*F,ve.maxInstancedCount),g.calls++,g.vertices+=Ue*ve.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=ve.maxInstancedCount*Ue/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function wf(a,h,g){var y;return{setMode:function x(H){y=H},render:function D(H,le){a.drawArrays(y,H,le),g.calls++,g.vertices+=le,y===a.TRIANGLES&&(g.faces+=le/3)},renderInstances:function F(H){var le=h.get("ANGLE_instanced_arrays");if(null!==le){var se=H.attributes.position,ve=0;le.drawArraysInstancedANGLE(y,0,ve=se.isInterleavedBufferAttribute?se.data.count:se.count,H.maxInstancedCount),g.calls++,g.vertices+=ve*H.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=H.maxInstancedCount*ve/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function Ha(){var a={};return{get:function(h){if(void 0!==a[h.id])return a[h.id];var g;switch(h.type){case"DirectionalLight":g={direction:new on,color:new Kr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new er};break;case"SpotLight":g={position:new on,direction:new on,color:new Kr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new er};break;case"PointLight":g={position:new on,color:new Kr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new er};break;case"HemisphereLight":g={direction:new on,skyColor:new Kr,groundColor:new Kr};break;case"RectAreaLight":g={color:new Kr,position:new on,halfWidth:new on,halfHeight:new on}}return a[h.id]=g,g}}}function Rv(a,h,g){var y=a.createShader(h);return a.shaderSource(y,g),a.compileShader(y),!1===a.getShaderParameter(y,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==a.getShaderInfoLog(y)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",h===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(y),function Lv(a){for(var h=a.split("\n"),g=0;g<h.length;g++)h[g]=g+1+": "+h[g];return h.join("\n")}(g)),y}Object.assign(Lr.prototype,X.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,h){return!1===(h&&h.isBufferAttribute)&&!1===(h&&h.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(a,new gr(arguments[1],arguments[2]))):"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(h)):(this.attributes[a]=h,this)},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){return delete this.attributes[a],this},addGroup:function(a,h,g){this.groups.push({start:a,count:h,materialIndex:void 0!==g?g:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,h){this.drawRange.start=a,this.drawRange.count=h},applyMatrix:function(a){var h=this.attributes.position;void 0!==h&&(a.applyToVector3Array(h.array),h.needsUpdate=!0);var g=this.attributes.normal;return void 0!==g&&((new Nt).getNormalMatrix(a).applyToVector3Array(g.array),g.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new bs),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new bs),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new bs),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,x){return void 0===a&&(a=new bs),a.makeTranslation(g,y,x),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,x){return void 0===a&&(a=new bs),a.makeScale(g,y,x),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new Cr),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},setFromObject:function(a){var h=a.geometry;if(a.isPoints||a.isLine){var g=new ls(3*h.vertices.length,3),y=new ls(3*h.colors.length,3);if(this.addAttribute("position",g.copyVector3sArray(h.vertices)),this.addAttribute("color",y.copyColorsArray(h.colors)),h.lineDistances&&h.lineDistances.length===h.vertices.length){var x=new ls(h.lineDistances.length,1);this.addAttribute("lineDistance",x.copyArray(h.lineDistances))}null!==h.boundingSphere&&(this.boundingSphere=h.boundingSphere.clone()),null!==h.boundingBox&&(this.boundingBox=h.boundingBox.clone())}else a.isMesh&&h&&h.isGeometry&&this.fromGeometry(h);return this},updateFromObject:function(a){var y,h=a.geometry;if(a.isMesh){var g=h.__directGeometry;if(!0===h.elementsNeedUpdate&&(g=void 0,h.elementsNeedUpdate=!1),void 0===g)return this.fromGeometry(h);g.verticesNeedUpdate=h.verticesNeedUpdate,g.normalsNeedUpdate=h.normalsNeedUpdate,g.colorsNeedUpdate=h.colorsNeedUpdate,g.uvsNeedUpdate=h.uvsNeedUpdate,g.groupsNeedUpdate=h.groupsNeedUpdate,h.verticesNeedUpdate=!1,h.normalsNeedUpdate=!1,h.colorsNeedUpdate=!1,h.uvsNeedUpdate=!1,h.groupsNeedUpdate=!1,h=g}return!0===h.verticesNeedUpdate&&(void 0!==(y=this.attributes.position)&&(y.copyVector3sArray(h.vertices),y.needsUpdate=!0),h.verticesNeedUpdate=!1),!0===h.normalsNeedUpdate&&(void 0!==(y=this.attributes.normal)&&(y.copyVector3sArray(h.normals),y.needsUpdate=!0),h.normalsNeedUpdate=!1),!0===h.colorsNeedUpdate&&(void 0!==(y=this.attributes.color)&&(y.copyColorsArray(h.colors),y.needsUpdate=!0),h.colorsNeedUpdate=!1),h.uvsNeedUpdate&&(void 0!==(y=this.attributes.uv)&&(y.copyVector2sArray(h.uvs),y.needsUpdate=!0),h.uvsNeedUpdate=!1),h.lineDistancesNeedUpdate&&(void 0!==(y=this.attributes.lineDistance)&&(y.copyArray(h.lineDistances),y.needsUpdate=!0),h.lineDistancesNeedUpdate=!1),h.groupsNeedUpdate&&(h.computeGroups(a.geometry),this.groups=h.groups,h.groupsNeedUpdate=!1),this},fromGeometry:function(a){return a.__directGeometry=(new Hg).fromGeometry(a),this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var h=new Float32Array(3*a.vertices.length);if(this.addAttribute("position",new gr(h,3).copyVector3sArray(a.vertices)),a.normals.length>0){var g=new Float32Array(3*a.normals.length);this.addAttribute("normal",new gr(g,3).copyVector3sArray(a.normals))}if(a.colors.length>0){var y=new Float32Array(3*a.colors.length);this.addAttribute("color",new gr(y,3).copyColorsArray(a.colors))}if(a.uvs.length>0){var x=new Float32Array(2*a.uvs.length);this.addAttribute("uv",new gr(x,2).copyVector2sArray(a.uvs))}if(a.uvs2.length>0){var D=new Float32Array(2*a.uvs2.length);this.addAttribute("uv2",new gr(D,2).copyVector2sArray(a.uvs2))}if(a.indices.length>0){var H=new(a.vertices.length>65535?Uint32Array:Uint16Array)(3*a.indices.length);this.setIndex(new gr(H,1).copyIndicesArray(a.indices))}for(var le in this.groups=a.groups,a.morphTargets){for(var se=[],ve=a.morphTargets[le],we=0,Ue=ve.length;we<Ue;we++){var We=ve[we],je=new ls(3*We.length,3);se.push(je.copyVector3sArray(We))}this.morphAttributes[le]=se}if(a.skinIndices.length>0){var pt=new ls(4*a.skinIndices.length,4);this.addAttribute("skinIndex",pt.copyVector4sArray(a.skinIndices))}if(a.skinWeights.length>0){var ft=new ls(4*a.skinWeights.length,4);this.addAttribute("skinWeight",ft.copyVector4sArray(a.skinWeights))}return null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Ms);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Ms,h=new on;return function(){null===this.boundingSphere&&(this.boundingSphere=new Ot);var y=this.attributes.position;if(y){var x=this.boundingSphere.center;a.setFromBufferAttribute(y),a.getCenter(x);for(var D=0,F=0,H=y.count;F<H;F++)h.x=y.getX(F),h.y=y.getY(F),h.z=y.getZ(F),D=Math.max(D,x.distanceToSquared(h));this.boundingSphere.radius=Math.sqrt(D),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,h=this.attributes,g=this.groups;if(h.position){var y=h.position.array;if(void 0===h.normal)this.addAttribute("normal",new gr(new Float32Array(y.length),3));else for(var x=h.normal.array,D=0,F=x.length;D<F;D++)x[D]=0;var le,se,ve,H=h.normal.array,we=new on,Ue=new on,We=new on,je=new on,pt=new on;if(a){var ft=a.array;0===g.length&&this.addGroup(0,ft.length);for(var ut=0,Et=g.length;ut<Et;++ut){var Mt=g[ut],nn=Mt.start;for(D=nn,F=nn+Mt.count;D<F;D+=3)se=3*ft[D+1],ve=3*ft[D+2],we.fromArray(y,le=3*ft[D+0]),Ue.fromArray(y,se),We.fromArray(y,ve),je.subVectors(We,Ue),pt.subVectors(we,Ue),je.cross(pt),H[le]+=je.x,H[le+1]+=je.y,H[le+2]+=je.z,H[se]+=je.x,H[se+1]+=je.y,H[se+2]+=je.z,H[ve]+=je.x,H[ve+1]+=je.y,H[ve+2]+=je.z}}else for(D=0,F=y.length;D<F;D+=9)we.fromArray(y,D),Ue.fromArray(y,D+3),We.fromArray(y,D+6),je.subVectors(We,Ue),pt.subVectors(we,Ue),je.cross(pt),H[D]=je.x,H[D+1]=je.y,H[D+2]=je.z,H[D+3]=je.x,H[D+4]=je.y,H[D+5]=je.z,H[D+6]=je.x,H[D+7]=je.y,H[D+8]=je.z;this.normalizeNormals(),h.normal.needsUpdate=!0}},merge:function(a,h){if(!1!==(a&&a.isBufferGeometry)){void 0===h&&(h=0);var g=this.attributes;for(var y in g)if(void 0!==a.attributes[y])for(var D=g[y].array,F=a.attributes[y],H=F.array,se=0,ve=F.itemSize*h;se<H.length;se++,ve++)D[ve]=H[se];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){for(var h,g,y,x,a=this.attributes.normal.array,D=0,F=a.length;D<F;D+=3)h=a[D],g=a[D+1],y=a[D+2],x=1/Math.sqrt(h*h+g*g+y*y),a[D]*=x,a[D+1]*=x,a[D+2]*=x},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new Lr,h=this.index.array,g=this.attributes;for(var y in g){for(var x=g[y],D=x.array,F=x.itemSize,H=new D.constructor(h.length*F),le=0,se=0,ve=0,we=h.length;ve<we;ve++){le=h[ve]*F;for(var Ue=0;Ue<F;Ue++)H[se++]=D[le++]}a.addAttribute(y,new gr(H,F))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var h=this.parameters;for(var g in h)void 0!==h[g]&&(a[g]=h[g]);return a}a.data={attributes:{}};var y=this.index;if(null!==y){var x=Array.prototype.slice.call(y.array);a.data.index={type:y.array.constructor.name,array:x}}var D=this.attributes;for(var g in D){var F=D[g];x=Array.prototype.slice.call(F.array),a.data.attributes[g]={itemSize:F.itemSize,type:F.array.constructor.name,array:x,normalized:F.normalized}}var H=this.groups;H.length>0&&(a.data.groups=JSON.parse(JSON.stringify(H)));var le=this.boundingSphere;return null!==le&&(a.data.boundingSphere={center:le.center.toArray(),radius:le.radius}),a},clone:function(){return(new Lr).copy(this)},copy:function(a){var h=a.index;null!==h&&this.setIndex(h.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var D=a.groups,F=0,H=D.length;F<H;F++){var le=D[F];this.addGroup(le.start,le.count,le.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Lr.MaxIndex=65535,wa.prototype=Object.assign(Object.create(Cr.prototype),{constructor:wa,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){return Cr.prototype.copy.call(this,a),this.drawMode=a.drawMode,this},updateMorphTargets:function(){var a=this.geometry.morphTargets;if(void 0!==a&&a.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var h=0,g=a.length;h<g;h++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[a[h].name]=h}},raycast:function(){var a=new bs,h=new oa,g=new Ot,y=new on,x=new on,D=new on,F=new on,H=new on,le=new on,se=new er,ve=new er,we=new er,Ue=new on,We=new on,je=new on;function pt(Et,Mt,nn,qt,yn,fn,an){return Ca.barycoordFromPoint(Et,Mt,nn,qt,Ue),yn.multiplyScalar(Ue.x),fn.multiplyScalar(Ue.y),an.multiplyScalar(Ue.z),yn.add(fn).add(an),yn.clone()}function ft(Et,Mt,nn,qt,yn,fn,an){var Nn=Et.material;if(null===(Nn.side===G?nn.intersectTriangle(fn,yn,qt,!0,an):nn.intersectTriangle(qt,yn,fn,Nn.side!==oe,an)))return null;je.copy(an),je.applyMatrix4(Et.matrixWorld);var Mi=Mt.ray.origin.distanceTo(je);return Mi<Mt.near||Mi>Mt.far?null:{distance:Mi,point:je.clone(),object:Et}}function ut(Et,Mt,nn,qt,yn,fn,an,bn){y.fromArray(qt,3*fn),x.fromArray(qt,3*an),D.fromArray(qt,3*bn);var Nn=ft(Et,Mt,nn,y,x,D,We);return Nn&&(yn&&(se.fromArray(yn,2*fn),ve.fromArray(yn,2*an),we.fromArray(yn,2*bn),Nn.uv=pt(We,y,x,D,se,ve,we)),Nn.face=new Bo(fn,an,bn,Ca.normal(y,x,D)),Nn.faceIndex=fn),Nn}return function(Mt,nn){var an,bn,qt=this.geometry,yn=this.material,fn=this.matrixWorld;if(void 0!==yn&&(null===qt.boundingSphere&&qt.computeBoundingSphere(),g.copy(qt.boundingSphere),g.applyMatrix4(fn),!1!==Mt.ray.intersectsSphere(g)&&(a.getInverse(fn),h.copy(Mt.ray).applyMatrix4(a),null===qt.boundingBox||!1!==h.intersectsBox(qt.boundingBox))))if(qt.isBufferGeometry){var Nn,Jt=qt.index,tn=qt.attributes,Kn=tn.position.array;if(void 0!==tn.uv&&(an=tn.uv.array),null!==Jt)for(var si=Jt.array,Di=0,xi=si.length;Di<xi;Di+=3)(bn=ut(this,Mt,h,Kn,an,Nn=si[Di],si[Di+1],si[Di+2]))&&(bn.faceIndex=Math.floor(Di/3),nn.push(bn));else for(Di=0,xi=Kn.length;Di<xi;Di+=9)(bn=ut(this,Mt,h,Kn,an,Nn=Di/3,Nn+1,Nn+2))&&(bn.index=Nn,nn.push(bn))}else if(qt.isGeometry){var mi,ar,Hi,Zn=yn&&yn.isMultiMaterial,qn=!0===Zn?yn.materials:null,f=qt.vertices,c=qt.faces,d=qt.faceVertexUvs[0];d.length>0&&(an=d);for(var m=0,_=c.length;m<_;m++){var C=c[m],A=!0===Zn?qn[C.materialIndex]:yn;if(void 0!==A){if(mi=f[C.a],ar=f[C.b],Hi=f[C.c],!0===A.morphTargets){var E=qt.morphTargets,B=this.morphTargetInfluences;y.set(0,0,0),x.set(0,0,0),D.set(0,0,0);for(var P=0,q=E.length;P<q;P++){var Q=B[P];if(0!==Q){var fe=E[P].vertices;y.addScaledVector(F.subVectors(fe[C.a],mi),Q),x.addScaledVector(H.subVectors(fe[C.b],ar),Q),D.addScaledVector(le.subVectors(fe[C.c],Hi),Q)}}y.add(mi),x.add(ar),D.add(Hi),mi=y,ar=x,Hi=D}if(bn=ft(this,Mt,h,mi,ar,Hi,We)){if(an){var me=an[m];se.copy(me[0]),ve.copy(me[1]),we.copy(me[2]),bn.uv=pt(We,mi,ar,Hi,se,ve,we)}bn.face=C,bn.faceIndex=m,nn.push(bn)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Nl.prototype=Object.create(Lr.prototype)).constructor=Nl,(aa.prototype=Object.create(Lr.prototype)).constructor=aa,(Ua.prototype=Object.create(Cr.prototype)).constructor=Ua,Ua.prototype.isCamera=!0,Ua.prototype.getWorldDirection=function(){var a=new kl;return function(g){var y=g||new on;return this.getWorldQuaternion(a),y.set(0,0,-1).applyQuaternion(a)}}(),Ua.prototype.lookAt=function(){var a=new bs;return function(g){a.lookAt(this.position,g,this.up),this.quaternion.setFromRotationMatrix(a)}}(),Ua.prototype.clone=function(){return(new this.constructor).copy(this)},Ua.prototype.copy=function(a){return Cr.prototype.copy.call(this,a),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this},xl.prototype=Object.assign(Object.create(Ua.prototype),{constructor:xl,isPerspectiveCamera:!0,copy:function(a){return Ua.prototype.copy.call(this,a),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this},setFocalLength:function(a){var h=.5*this.getFilmHeight()/a;this.fov=2*xs.RAD2DEG*Math.atan(h),this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*xs.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*xs.RAD2DEG*Math.atan(Math.tan(.5*xs.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,h,g,y,x,D){this.aspect=a/h,this.view={fullWidth:a,fullHeight:h,offsetX:g,offsetY:y,width:x,height:D},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,h=a*Math.tan(.5*xs.DEG2RAD*this.fov)/this.zoom,g=2*h,y=this.aspect*g,x=-.5*y,D=this.view;if(null!==D){var F=D.fullWidth,H=D.fullHeight;x+=D.offsetX*y/F,h-=D.offsetY*g/H,y*=D.width/F,g*=D.height/H}var le=this.filmOffset;0!==le&&(x+=a*le/this.getFilmWidth()),this.projectionMatrix.makeFrustum(x,x+y,h-g,h,a,this.far)},toJSON:function(a){var h=Cr.prototype.toJSON.call(this,a);return h.object.fov=this.fov,h.object.zoom=this.zoom,h.object.near=this.near,h.object.far=this.far,h.object.focus=this.focus,h.object.aspect=this.aspect,null!==this.view&&(h.object.view=Object.assign({},this.view)),h.object.filmGauge=this.filmGauge,h.object.filmOffset=this.filmOffset,h}}),Vd.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Vd,isOrthographicCamera:!0,copy:function(a){return Ua.prototype.copy.call(this,a),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this},setViewOffset:function(a,h,g,y,x,D){this.view={fullWidth:a,fullHeight:h,offsetX:g,offsetY:y,width:x,height:D},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),h=(this.top-this.bottom)/(2*this.zoom),g=(this.right+this.left)/2,y=(this.top+this.bottom)/2,x=g-a,D=g+a,F=y+h,H=y-h;if(null!==this.view){var le=this.zoom/(this.view.width/this.view.fullWidth),se=this.zoom/(this.view.height/this.view.fullHeight),ve=(this.right-this.left)/this.view.width,we=(this.top-this.bottom)/this.view.height;D=(x+=ve*(this.view.offsetX/le))+ve*(this.view.width/le),H=(F-=we*(this.view.offsetY/se))-we*(this.view.height/se)}this.projectionMatrix.makeOrthographic(x,D,F,H,this.near,this.far)},toJSON:function(a){var h=Cr.prototype.toJSON.call(this,a);return h.object.zoom=this.zoom,h.object.left=this.left,h.object.right=this.right,h.object.top=this.top,h.object.bottom=this.bottom,h.object.near=this.near,h.object.far=this.far,null!==this.view&&(h.object.view=Object.assign({},this.view)),h}});var Wg=0;function jg(a){switch(a){case ss:return["Linear","( value )"];case Dg:return["sRGB","( value )"];case _i:return["RGBE","( value )"];case Ps:return["RGBM","( value, 7.0 )"];case To:return["RGBM","( value, 16.0 )"];case vv:return["RGBD","( value, 256.0 )"];case Vp:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+a)}}function Af(a,h){var g=jg(h);return"vec4 "+a+"( vec4 value ) { return "+g[0]+"ToLinear"+g[1]+"; }"}function Rm(a,h){var g=jg(h);return"vec4 "+a+"( vec4 value ) { return LinearTo"+g[0]+g[1]+"; }"}function xf(a,h){var g;switch(h){case un:g="Linear";break;case _n:g="Reinhard";break;case Jn:g="Uncharted2";break;case Dr:g="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+h)}return"vec3 "+a+"( vec3 color ) { return "+g+"ToneMapping( color ); }"}function If(a){return""!==a}function Sf(a,h){return a.replace(/NUM_DIR_LIGHTS/g,h.numDirLights).replace(/NUM_SPOT_LIGHTS/g,h.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,h.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,h.numPointLights).replace(/NUM_HEMI_LIGHTS/g,h.numHemiLights)}function yl(a){return a.replace(/#include +<([\w\d.]+)>/g,function g(y,x){var D=qs[x];if(void 0===D)throw new Error("Can not resolve #include <"+x+">");return yl(D)})}function Xp(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function g(y,x,D,F){for(var H="",le=parseInt(x);le<parseInt(D);le++)H+=F.replace(/\[ i \]/g,"[ "+le+" ]");return H})}function Vy(a,h,g,y){var x=a.context,D=g.extensions,F=g.defines,H=g.__webglShader.vertexShader,le=g.__webglShader.fragmentShader,se="SHADOWMAP_TYPE_BASIC";y.shadowMapType===te?se="SHADOWMAP_TYPE_PCF":y.shadowMapType===ie&&(se="SHADOWMAP_TYPE_PCF_SOFT");var ve="ENVMAP_TYPE_CUBE",we="ENVMAP_MODE_REFLECTION",Ue="ENVMAP_BLENDING_MULTIPLY";if(y.envMap){switch(g.envMap.mapping){case kr:case Wo:ve="ENVMAP_TYPE_CUBE";break;case ql:case Wf:ve="ENVMAP_TYPE_CUBE_UV";break;case tr:case il:ve="ENVMAP_TYPE_EQUIREC";break;case $l:ve="ENVMAP_TYPE_SPHERE"}switch(g.envMap.mapping){case Wo:case il:we="ENVMAP_MODE_REFRACTION"}switch(g.combine){case Ye:Ue="ENVMAP_BLENDING_MULTIPLY";break;case De:Ue="ENVMAP_BLENDING_MIX";break;case ze:Ue="ENVMAP_BLENDING_ADD"}}var ut,Et,We=a.gammaFactor>0?a.gammaFactor:1,je=function Ud(a,h,g){return[(a=a||{}).derivatives||h.envMapCubeUV||h.bumpMap||h.normalMap||h.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||h.logarithmicDepthBuffer)&&g.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&g.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||h.envMap)&&g.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(If).join("\n")}(D,y,a.extensions),pt=function $g(a){var h=[];for(var g in a){var y=a[g];!1!==y&&h.push("#define "+g+" "+y)}return h.join("\n")}(F),ft=x.createProgram();g.isRawShaderMaterial?(ut=[pt,"\n"].filter(If).join("\n"),Et=[je,pt,"\n"].filter(If).join("\n")):(ut=["precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,pt,y.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+We,"#define MAX_BONES "+y.maxBones,y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+we:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.displacementMap&&y.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.flatShading?"#define FLAT_SHADED":"",y.skinning?"#define USE_SKINNING":"",y.useVertexTexture?"#define BONE_TEXTURE":"",y.morphTargets?"#define USE_MORPHTARGETS":"",y.morphNormals&&!1===y.flatShading?"#define USE_MORPHNORMALS":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+se:"",y.sizeAttenuation?"#define USE_SIZEATTENUATION":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(If).join("\n"),Et=[je,"precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,pt,y.alphaTest?"#define ALPHATEST "+y.alphaTest:"","#define GAMMA_FACTOR "+We,y.useFog&&y.fog?"#define USE_FOG":"",y.useFog&&y.fogExp?"#define FOG_EXP2":"",y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+ve:"",y.envMap?"#define "+we:"",y.envMap?"#define "+Ue:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.gradientMap?"#define USE_GRADIENTMAP":"",y.flatShading?"#define FLAT_SHADED":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(y.numClippingPlanes-y.numClipIntersection),y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+se:"",y.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",y.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",y.envMap&&a.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",y.toneMapping!==xt?"#define TONE_MAPPING":"",y.toneMapping!==xt?qs.tonemapping_pars_fragment:"",y.toneMapping!==xt?xf("toneMapping",y.toneMapping):"",y.outputEncoding||y.mapEncoding||y.envMapEncoding||y.emissiveMapEncoding?qs.encodings_pars_fragment:"",y.mapEncoding?Af("mapTexelToLinear",y.mapEncoding):"",y.envMapEncoding?Af("envMapTexelToLinear",y.envMapEncoding):"",y.emissiveMapEncoding?Af("emissiveMapTexelToLinear",y.emissiveMapEncoding):"",y.outputEncoding?Rm("linearToOutputTexel",y.outputEncoding):"",y.depthPacking?"#define DEPTH_PACKING "+g.depthPacking:"","\n"].filter(If).join("\n")),H=Sf(H=yl(H),y),le=Sf(le=yl(le),y),g.isShaderMaterial||(H=Xp(H),le=Xp(le));var nn=Et+le,qt=Rv(x,x.VERTEX_SHADER,ut+H),yn=Rv(x,x.FRAGMENT_SHADER,nn);x.attachShader(ft,qt),x.attachShader(ft,yn),void 0!==g.index0AttributeName?x.bindAttribLocation(ft,0,g.index0AttributeName):!0===y.morphTargets&&x.bindAttribLocation(ft,0,"position"),x.linkProgram(ft);var fi,Jt,fn=x.getProgramInfoLog(ft),an=x.getShaderInfoLog(qt),bn=x.getShaderInfoLog(yn),Nn=!0,Mi=!0;return!1===x.getProgramParameter(ft,x.LINK_STATUS)?(Nn=!1,console.error("THREE.WebGLProgram: shader error: ",x.getError(),"gl.VALIDATE_STATUS",x.getProgramParameter(ft,x.VALIDATE_STATUS),"gl.getProgramInfoLog",fn,an,bn)):""!==fn?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",fn):(""===an||""===bn)&&(Mi=!1),Mi&&(this.diagnostics={runnable:Nn,material:g,programLog:fn,vertexShader:{log:an,prefix:ut},fragmentShader:{log:bn,prefix:Et}}),x.deleteShader(qt),x.deleteShader(yn),this.getUniforms=function(){return void 0===fi&&(fi=new Za(x,ft,a)),fi},this.getAttributes=function(){return void 0===Jt&&(Jt=function Fh(a,h,g){for(var y={},x=a.getProgramParameter(h,a.ACTIVE_ATTRIBUTES),D=0;D<x;D++){var H=a.getActiveAttrib(h,D).name;y[H]=a.getAttribLocation(h,H)}return y}(x,ft)),Jt},this.destroy=function(){x.deleteProgram(ft),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Wg++,this.code=h,this.usedTimes=1,this.program=ft,this.vertexShader=qt,this.fragmentShader=yn,this}function Uy(a,h){var g=[],y={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},x=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];function F(H,le){var se;return H?H.isTexture?se=H.encoding:H.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),se=H.texture.encoding):se=ss,se===ss&&le&&(se=Vp),se}this.getParameters=function(H,le,se,ve,we,Ue){var We=y[H.type],je=function D(H){if(h.floatVertexTextures&&H&&H.skeleton&&H.skeleton.useVertexTexture)return 1024;var ve=Math.floor((h.maxVertexUniforms-20)/4);return void 0!==H&&H&&H.isSkinnedMesh&&(ve=Math.min(H.skeleton.bones.length,ve))<H.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+H.skeleton.bones.length+", this GPU supports just "+ve+" (try OpenGL instead of ANGLE)"),ve}(Ue),pt=a.getPrecision();null!==H.precision&&(pt=h.getMaxPrecision(H.precision))!==H.precision&&console.warn("THREE.WebGLProgram.getParameters:",H.precision,"not supported, using",pt,"instead.");var ft=a.getCurrentRenderTarget();return{shaderID:We,precision:pt,supportsVertexTextures:h.vertexTextures,outputEncoding:F(ft?ft.texture:null,a.gammaOutput),map:!!H.map,mapEncoding:F(H.map,a.gammaInput),envMap:!!H.envMap,envMapMode:H.envMap&&H.envMap.mapping,envMapEncoding:F(H.envMap,a.gammaInput),envMapCubeUV:!!H.envMap&&(H.envMap.mapping===ql||H.envMap.mapping===Wf),lightMap:!!H.lightMap,aoMap:!!H.aoMap,emissiveMap:!!H.emissiveMap,emissiveMapEncoding:F(H.emissiveMap,a.gammaInput),bumpMap:!!H.bumpMap,normalMap:!!H.normalMap,displacementMap:!!H.displacementMap,roughnessMap:!!H.roughnessMap,metalnessMap:!!H.metalnessMap,specularMap:!!H.specularMap,alphaMap:!!H.alphaMap,gradientMap:!!H.gradientMap,combine:H.combine,vertexColors:H.vertexColors,fog:!!se,useFog:H.fog,fogExp:se&&se.isFogExp2,flatShading:H.shading===ye,sizeAttenuation:H.sizeAttenuation,logarithmicDepthBuffer:h.logarithmicDepthBuffer,skinning:H.skinning,maxBones:je,useVertexTexture:h.floatVertexTextures&&Ue&&Ue.skeleton&&Ue.skeleton.useVertexTexture,morphTargets:H.morphTargets,morphNormals:H.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:le.directional.length,numPointLights:le.point.length,numSpotLights:le.spot.length,numRectAreaLights:le.rectArea.length,numHemiLights:le.hemi.length,numClippingPlanes:ve,numClipIntersection:we,shadowMapEnabled:a.shadowMap.enabled&&Ue.receiveShadow&&le.shadows.length>0,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:H.premultipliedAlpha,alphaTest:H.alphaTest,doubleSided:H.side===oe,flipSided:H.side===G,depthPacking:void 0!==H.depthPacking&&H.depthPacking}},this.getProgramCode=function(H,le){var se=[];if(le.shaderID?se.push(le.shaderID):(se.push(H.fragmentShader),se.push(H.vertexShader)),void 0!==H.defines)for(var ve in H.defines)se.push(ve),se.push(H.defines[ve]);for(var we=0;we<x.length;we++)se.push(le[x[we]]);return se.join()},this.acquireProgram=function(H,le,se){for(var ve,we=0,Ue=g.length;we<Ue;we++){var We=g[we];if(We.code===se){++(ve=We).usedTimes;break}}return void 0===ve&&(ve=new Vy(a,se,H,le),g.push(ve)),ve},this.releaseProgram=function(H){if(0==--H.usedTimes){var le=g.indexOf(H);g[le]=g[g.length-1],g.pop(),H.destroy()}},this.programs=g}function Hd(a,h,g){var y={};function x(se){var ve=se.target,we=y[ve.id];null!==we.index&&F(we.index),function H(se){for(var ve in se)F(se[ve])}(we.attributes),ve.removeEventListener("dispose",x),delete y[ve.id];var Ue=h.get(ve);Ue.wireframe&&F(Ue.wireframe),h.delete(ve);var We=h.get(we);We.wireframe&&F(We.wireframe),h.delete(we),g.memory.geometries--}function F(se){var ve=function D(se){return se.isInterleavedBufferAttribute?h.get(se.data).__webglBuffer:h.get(se).__webglBuffer}(se);void 0!==ve&&(a.deleteBuffer(ve),function le(se){h.delete(se.isInterleavedBufferAttribute?se.data:se)}(se))}return{get:function(se){var we,ve=se.geometry;return void 0!==y[ve.id]?y[ve.id]:(ve.addEventListener("dispose",x),ve.isBufferGeometry?we=ve:ve.isGeometry&&(void 0===ve._bufferGeometry&&(ve._bufferGeometry=(new Lr).setFromObject(se)),we=ve._bufferGeometry),y[ve.id]=we,g.memory.geometries++,we)}}}function ld(a,h,g){var y=new Hd(a,h,g);function D(we,Ue){var We=we.isInterleavedBufferAttribute?we.data:we,je=h.get(We);void 0===je.__webglBuffer?function F(we,Ue,We){we.__webglBuffer=a.createBuffer(),a.bindBuffer(We,we.__webglBuffer),a.bufferData(We,Ue.array,Ue.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW);var pt=a.FLOAT,ft=Ue.array;ft instanceof Float32Array?pt=a.FLOAT:ft instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):ft instanceof Uint16Array?pt=a.UNSIGNED_SHORT:ft instanceof Int16Array?pt=a.SHORT:ft instanceof Uint32Array?pt=a.UNSIGNED_INT:ft instanceof Int32Array?pt=a.INT:ft instanceof Int8Array?pt=a.BYTE:ft instanceof Uint8Array&&(pt=a.UNSIGNED_BYTE),we.bytesPerElement=ft.BYTES_PER_ELEMENT,we.type=pt,we.version=Ue.version,Ue.onUploadCallback()}(je,We,Ue):je.version!==We.version&&function H(we,Ue,We){a.bindBuffer(We,we.__webglBuffer),!1===Ue.dynamic?a.bufferData(We,Ue.array,a.STATIC_DRAW):-1===Ue.updateRange.count?a.bufferSubData(We,0,Ue.array):0===Ue.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(a.bufferSubData(We,Ue.updateRange.offset*Ue.array.BYTES_PER_ELEMENT,Ue.array.subarray(Ue.updateRange.offset,Ue.updateRange.offset+Ue.updateRange.count)),Ue.updateRange.count=0),we.version=Ue.version}(je,We,Ue)}return{getAttributeBuffer:function le(we){return we.isInterleavedBufferAttribute?h.get(we.data).__webglBuffer:h.get(we).__webglBuffer},getAttributeProperties:function se(we){return h.get(we.isInterleavedBufferAttribute?we.data:we)},getWireframeAttribute:function ve(we){var Ue=h.get(we);if(void 0!==Ue.wireframe)return Ue.wireframe;var Et,We=[],je=we.index,pt=we.attributes,ft=pt.position;if(null!==je)for(var Mt=0,nn=(Et=je.array).length;Mt<nn;Mt+=3)We.push(qt=Et[Mt+0],yn=Et[Mt+1],yn,fn=Et[Mt+2],fn,qt);else for(Mt=0,nn=(Et=pt.position.array).length/3-1;Mt<nn;Mt+=3){var qt,yn,fn;We.push(qt=Mt+0,yn=Mt+1,yn,fn=Mt+2,fn,qt)}var bn=new gr(new(ft.count>65535?Uint32Array:Uint16Array)(We),1);return D(bn,a.ELEMENT_ARRAY_BUFFER),Ue.wireframe=bn,bn},update:function x(we){var Ue=y.get(we);we.geometry.isGeometry&&Ue.updateFromObject(we);var We=Ue.index,je=Ue.attributes;for(var pt in null!==We&&D(We,a.ELEMENT_ARRAY_BUFFER),je)D(je[pt],a.ARRAY_BUFFER);var ft=Ue.morphAttributes;for(var pt in ft)for(var ut=ft[pt],Et=0,Mt=ut.length;Et<Mt;Et++)D(ut[Et],a.ARRAY_BUFFER);return Ue}}}function Pv(a,h,g,y,x,D,F){var H=F.memory,le=typeof WebGL2RenderingContext<"u"&&a instanceof WebGL2RenderingContext;function se(Jt,tn){if(Jt.width>tn||Jt.height>tn){var Kn=tn/Math.max(Jt.width,Jt.height),si=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return si.width=Math.floor(Jt.width*Kn),si.height=Math.floor(Jt.height*Kn),si.getContext("2d").drawImage(Jt,0,0,Jt.width,Jt.height,0,0,si.width,si.height),console.warn("THREE.WebGLRenderer: image is too big ("+Jt.width+"x"+Jt.height+"). Resized to "+si.width+"x"+si.height,Jt),si}return Jt}function ve(Jt){return xs.isPowerOfTwo(Jt.width)&&xs.isPowerOfTwo(Jt.height)}function We(Jt){return Jt===Xa||Jt===Pd||Jt===uu?a.NEAREST:a.LINEAR}function je(Jt){var tn=Jt.target;tn.removeEventListener("dispose",je),function ft(Jt){var tn=y.get(Jt);if(Jt.image&&tn.__image__webglTextureCube)a.deleteTexture(tn.__image__webglTextureCube);else{if(void 0===tn.__webglInit)return;a.deleteTexture(tn.__webglTexture)}y.delete(Jt)}(tn),H.textures--}function pt(Jt){var tn=Jt.target;tn.removeEventListener("dispose",pt),function ut(Jt){var tn=y.get(Jt),Kn=y.get(Jt.texture);if(Jt){if(void 0!==Kn.__webglTexture&&a.deleteTexture(Kn.__webglTexture),Jt.depthTexture&&Jt.depthTexture.dispose(),Jt.isWebGLRenderTargetCube)for(var si=0;si<6;si++)a.deleteFramebuffer(tn.__webglFramebuffer[si]),tn.__webglDepthbuffer&&a.deleteRenderbuffer(tn.__webglDepthbuffer[si]);else a.deleteFramebuffer(tn.__webglFramebuffer),tn.__webglDepthbuffer&&a.deleteRenderbuffer(tn.__webglDepthbuffer);y.delete(Jt.texture),y.delete(Jt)}}(tn),H.textures--}function Et(Jt,tn){var Kn=y.get(Jt);if(Jt.version>0&&Kn.__version!==Jt.version){var si=Jt.image;if(void 0===si)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",Jt);else{if(!1!==si.complete)return void function yn(Jt,tn,Kn){void 0===Jt.__webglInit&&(Jt.__webglInit=!0,tn.addEventListener("dispose",je),Jt.__webglTexture=a.createTexture(),H.textures++),g.activeTexture(a.TEXTURE0+Kn),g.bindTexture(a.TEXTURE_2D,Jt.__webglTexture),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,tn.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,tn.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,tn.unpackAlignment);var si=se(tn.image,x.maxTextureSize);(function Ue(Jt){return Jt.wrapS!==uc||Jt.wrapT!==uc||Jt.minFilter!==Xa&&Jt.minFilter!==Sa})(tn)&&!1===ve(si)&&(si=function we(Jt){if(Jt instanceof HTMLImageElement||Jt instanceof HTMLCanvasElement){var tn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return tn.width=xs.nearestPowerOfTwo(Jt.width),tn.height=xs.nearestPowerOfTwo(Jt.height),tn.getContext("2d").drawImage(Jt,0,0,tn.width,tn.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+Jt.width+"x"+Jt.height+"). Resized to "+tn.width+"x"+tn.height,Jt),tn}return Jt}(si));var Di=ve(si),xi=D(tn.format),mi=D(tn.type);qt(a.TEXTURE_2D,tn,Di);var ar,Hi=tn.mipmaps;if(tn.isDepthTexture){var Zn=a.DEPTH_COMPONENT;if(tn.type===kd){if(!le)throw new Error("Float Depth Texture only supported in WebGL2.0");Zn=a.DEPTH_COMPONENT32F}else le&&(Zn=a.DEPTH_COMPONENT16);tn.format===mt&&Zn===a.DEPTH_COMPONENT&&tn.type!==pf&&tn.type!==gf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),tn.type=pf,mi=D(tn.type)),tn.format===ct&&(Zn=a.DEPTH_STENCIL,tn.type!==mf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),tn.type=mf,mi=D(tn.type))),g.texImage2D(a.TEXTURE_2D,0,Zn,si.width,si.height,0,xi,mi,null)}else if(tn.isDataTexture)if(Hi.length>0&&Di){for(var qn=0,f=Hi.length;qn<f;qn++)g.texImage2D(a.TEXTURE_2D,qn,xi,(ar=Hi[qn]).width,ar.height,0,xi,mi,ar.data);tn.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,xi,si.width,si.height,0,xi,mi,si.data);else if(tn.isCompressedTexture)for(qn=0,f=Hi.length;qn<f;qn++)ar=Hi[qn],tn.format!==rl&&tn.format!==Sc?g.getCompressedTextureFormats().indexOf(xi)>-1?g.compressedTexImage2D(a.TEXTURE_2D,qn,xi,ar.width,ar.height,0,ar.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):g.texImage2D(a.TEXTURE_2D,qn,xi,ar.width,ar.height,0,xi,mi,ar.data);else if(Hi.length>0&&Di){for(qn=0,f=Hi.length;qn<f;qn++)g.texImage2D(a.TEXTURE_2D,qn,xi,xi,mi,ar=Hi[qn]);tn.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,xi,xi,mi,si);tn.generateMipmaps&&Di&&a.generateMipmap(a.TEXTURE_2D),Jt.__version=tn.version,tn.onUpdate&&tn.onUpdate(tn)}(Kn,Jt,tn);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",Jt)}}g.activeTexture(a.TEXTURE0+tn),g.bindTexture(a.TEXTURE_2D,Kn.__webglTexture)}function qt(Jt,tn,Kn){var si;if(Kn?(a.texParameteri(Jt,a.TEXTURE_WRAP_S,D(tn.wrapS)),a.texParameteri(Jt,a.TEXTURE_WRAP_T,D(tn.wrapT)),a.texParameteri(Jt,a.TEXTURE_MAG_FILTER,D(tn.magFilter)),a.texParameteri(Jt,a.TEXTURE_MIN_FILTER,D(tn.minFilter))):(a.texParameteri(Jt,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(Jt,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),(tn.wrapS!==uc||tn.wrapT!==uc)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",tn),a.texParameteri(Jt,a.TEXTURE_MAG_FILTER,We(tn.magFilter)),a.texParameteri(Jt,a.TEXTURE_MIN_FILTER,We(tn.minFilter)),tn.minFilter!==Xa&&tn.minFilter!==Sa&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",tn)),si=h.get("EXT_texture_filter_anisotropic")){if(tn.type===kd&&null===h.get("OES_texture_float_linear")||tn.type===Ic&&null===h.get("OES_texture_half_float_linear"))return;(tn.anisotropy>1||y.get(tn).__currentAnisotropy)&&(a.texParameterf(Jt,si.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(tn.anisotropy,x.getMaxAnisotropy())),y.get(tn).__currentAnisotropy=tn.anisotropy)}}function fn(Jt,tn,Kn,si){var Di=D(tn.texture.format),xi=D(tn.texture.type);g.texImage2D(si,0,Di,tn.width,tn.height,0,Di,xi,null),a.bindFramebuffer(a.FRAMEBUFFER,Jt),a.framebufferTexture2D(a.FRAMEBUFFER,Kn,si,y.get(tn.texture).__webglTexture,0),a.bindFramebuffer(a.FRAMEBUFFER,null)}function an(Jt,tn){a.bindRenderbuffer(a.RENDERBUFFER,Jt),tn.depthBuffer&&!tn.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,tn.width,tn.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,Jt)):tn.depthBuffer&&tn.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,tn.width,tn.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,Jt)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,tn.width,tn.height),a.bindRenderbuffer(a.RENDERBUFFER,null)}this.setTexture2D=Et,this.setTextureCube=function Mt(Jt,tn){var Kn=y.get(Jt);if(6===Jt.image.length)if(Jt.version>0&&Kn.__version!==Jt.version){Kn.__image__webglTextureCube||(Jt.addEventListener("dispose",je),Kn.__image__webglTextureCube=a.createTexture(),H.textures++),g.activeTexture(a.TEXTURE0+tn),g.bindTexture(a.TEXTURE_CUBE_MAP,Kn.__image__webglTextureCube),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,Jt.flipY);for(var si=Jt&&Jt.isCompressedTexture,Di=Jt.image[0]&&Jt.image[0].isDataTexture,xi=[],mi=0;mi<6;mi++)xi[mi]=si||Di?Di?Jt.image[mi].image:Jt.image[mi]:se(Jt.image[mi],x.maxCubemapSize);var Hi=ve(xi[0]),Zn=D(Jt.format),qn=D(Jt.type);for(qt(a.TEXTURE_CUBE_MAP,Jt,Hi),mi=0;mi<6;mi++)if(si)for(var f,c=xi[mi].mipmaps,d=0,m=c.length;d<m;d++)f=c[d],Jt.format!==rl&&Jt.format!==Sc?g.getCompressedTextureFormats().indexOf(Zn)>-1?g.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+mi,d,Zn,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+mi,d,Zn,f.width,f.height,0,Zn,qn,f.data);else Di?g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+mi,0,Zn,xi[mi].width,xi[mi].height,0,Zn,qn,xi[mi].data):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+mi,0,Zn,Zn,qn,xi[mi]);Jt.generateMipmaps&&Hi&&a.generateMipmap(a.TEXTURE_CUBE_MAP),Kn.__version=Jt.version,Jt.onUpdate&&Jt.onUpdate(Jt)}else g.activeTexture(a.TEXTURE0+tn),g.bindTexture(a.TEXTURE_CUBE_MAP,Kn.__image__webglTextureCube)},this.setTextureCubeDynamic=function nn(Jt,tn){g.activeTexture(a.TEXTURE0+tn),g.bindTexture(a.TEXTURE_CUBE_MAP,y.get(Jt).__webglTexture)},this.setupRenderTarget=function Mi(Jt){var tn=y.get(Jt),Kn=y.get(Jt.texture);Jt.addEventListener("dispose",pt),Kn.__webglTexture=a.createTexture(),H.textures++;var si=!0===Jt.isWebGLRenderTargetCube,Di=ve(Jt);if(si){tn.__webglFramebuffer=[];for(var xi=0;xi<6;xi++)tn.__webglFramebuffer[xi]=a.createFramebuffer()}else tn.__webglFramebuffer=a.createFramebuffer();if(si){for(g.bindTexture(a.TEXTURE_CUBE_MAP,Kn.__webglTexture),qt(a.TEXTURE_CUBE_MAP,Jt.texture,Di),xi=0;xi<6;xi++)fn(tn.__webglFramebuffer[xi],Jt,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+xi);Jt.texture.generateMipmaps&&Di&&a.generateMipmap(a.TEXTURE_CUBE_MAP),g.bindTexture(a.TEXTURE_CUBE_MAP,null)}else g.bindTexture(a.TEXTURE_2D,Kn.__webglTexture),qt(a.TEXTURE_2D,Jt.texture,Di),fn(tn.__webglFramebuffer,Jt,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),Jt.texture.generateMipmaps&&Di&&a.generateMipmap(a.TEXTURE_2D),g.bindTexture(a.TEXTURE_2D,null);Jt.depthBuffer&&function Nn(Jt){var tn=y.get(Jt),Kn=!0===Jt.isWebGLRenderTargetCube;if(Jt.depthTexture){if(Kn)throw new Error("target.depthTexture not supported in Cube render targets");!function bn(Jt,tn){if(tn&&tn.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(a.bindFramebuffer(a.FRAMEBUFFER,Jt),!tn.depthTexture||!tn.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!y.get(tn.depthTexture).__webglTexture||tn.depthTexture.image.width!==tn.width||tn.depthTexture.image.height!==tn.height)&&(tn.depthTexture.image.width=tn.width,tn.depthTexture.image.height=tn.height,tn.depthTexture.needsUpdate=!0),Et(tn.depthTexture,0);var si=y.get(tn.depthTexture).__webglTexture;if(tn.depthTexture.format===mt)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,si,0);else{if(tn.depthTexture.format!==ct)throw new Error("Unknown depthTexture format");a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,si,0)}}(tn.__webglFramebuffer,Jt)}else if(Kn){tn.__webglDepthbuffer=[];for(var si=0;si<6;si++)a.bindFramebuffer(a.FRAMEBUFFER,tn.__webglFramebuffer[si]),tn.__webglDepthbuffer[si]=a.createRenderbuffer(),an(tn.__webglDepthbuffer[si],Jt)}else a.bindFramebuffer(a.FRAMEBUFFER,tn.__webglFramebuffer),tn.__webglDepthbuffer=a.createRenderbuffer(),an(tn.__webglDepthbuffer,Jt);a.bindFramebuffer(a.FRAMEBUFFER,null)}(Jt)},this.updateRenderTargetMipmap=function fi(Jt){var tn=Jt.texture;if(tn.generateMipmaps&&ve(Jt)&&tn.minFilter!==Xa&&tn.minFilter!==Sa){var Kn=Jt&&Jt.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,si=y.get(tn).__webglTexture;g.bindTexture(Kn,si),a.generateMipmap(Kn),g.bindTexture(Kn,null)}}}function j_(){var a={};return{get:function(h){var g=h.uuid,y=a[g];return void 0===y&&(a[g]=y={}),y},delete:function(h){delete a[h.uuid]},clear:function(){a={}}}}function kv(a,h,g){var F=new function y(){var dt=!1,Qt=new Ko,Ht=null,xn=new Ko;return{setMask:function(sn){Ht!==sn&&!dt&&(a.colorMask(sn,sn,sn,sn),Ht=sn)},setLocked:function(sn){dt=sn},setClear:function(sn,vn,Ln,Fn,ri){!0===ri&&(sn*=Fn,vn*=Fn,Ln*=Fn),Qt.set(sn,vn,Ln,Fn),!1===xn.equals(Qt)&&(a.clearColor(sn,vn,Ln,Fn),xn.copy(Qt))},reset:function(){dt=!1,Ht=null,xn.set(0,0,0,1)}}},H=new function x(){var dt=!1,Qt=null,Ht=null,xn=null;return{setTest:function(sn){sn?m(a.DEPTH_TEST):_(a.DEPTH_TEST)},setMask:function(sn){Qt!==sn&&!dt&&(a.depthMask(sn),Qt=sn)},setFunc:function(sn){if(Ht!==sn){if(sn)switch(sn){case ce:a.depthFunc(a.NEVER);break;case At:a.depthFunc(a.ALWAYS);break;case Ft:a.depthFunc(a.LESS);break;case Tn:a.depthFunc(a.LEQUAL);break;case $n:a.depthFunc(a.EQUAL);break;case Dt:a.depthFunc(a.GEQUAL);break;case kt:a.depthFunc(a.GREATER);break;case ln:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);Ht=sn}},setLocked:function(sn){dt=sn},setClear:function(sn){xn!==sn&&(a.clearDepth(sn),xn=sn)},reset:function(){dt=!1,Qt=null,Ht=null,xn=null}}},le=new function D(){var dt=!1,Qt=null,Ht=null,xn=null,sn=null,vn=null,Ln=null,Fn=null,ri=null;return{setTest:function(Rn){Rn?m(a.STENCIL_TEST):_(a.STENCIL_TEST)},setMask:function(Rn){Qt!==Rn&&!dt&&(a.stencilMask(Rn),Qt=Rn)},setFunc:function(Rn,ei,di){(Ht!==Rn||xn!==ei||sn!==di)&&(a.stencilFunc(Rn,ei,di),Ht=Rn,xn=ei,sn=di)},setOp:function(Rn,ei,di){(vn!==Rn||Ln!==ei||Fn!==di)&&(a.stencilOp(Rn,ei,di),vn=Rn,Ln=ei,Fn=di)},setLocked:function(Rn){dt=Rn},setClear:function(Rn){ri!==Rn&&(a.clearStencil(Rn),ri=Rn)},reset:function(){dt=!1,Qt=null,Ht=null,xn=null,sn=null,vn=null,Ln=null,Fn=null,ri=null}}},se=a.getParameter(a.MAX_VERTEX_ATTRIBS),ve=new Uint8Array(se),we=new Uint8Array(se),Ue=new Uint8Array(se),We={},je=null,pt=null,ft=null,ut=null,Et=null,Mt=null,nn=null,qt=null,yn=!1,fn=null,an=null,bn=null,Nn=null,Mi=null,fi=null,Jt=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),tn=parseFloat(/^WebGL\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),Kn=parseFloat(tn)>=1,si=null,Di={},xi=new Ko,mi=new Ko;function ar(dt,Qt,Ht){var xn=new Uint8Array(4),sn=a.createTexture();a.bindTexture(dt,sn),a.texParameteri(dt,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(dt,a.TEXTURE_MAG_FILTER,a.NEAREST);for(var vn=0;vn<Ht;vn++)a.texImage2D(Qt+vn,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,xn);return sn}var Hi={};function m(dt){!0!==We[dt]&&(a.enable(dt),We[dt]=!0)}function _(dt){!1!==We[dt]&&(a.disable(dt),We[dt]=!1)}function A(dt,Qt,Ht,xn,sn,vn,Ln,Fn){dt!==$?m(a.BLEND):_(a.BLEND),(dt!==pt||Fn!==yn)&&(dt===pe?Fn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):dt===Ne?Fn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):dt===Ee?Fn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):Fn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),pt=dt,yn=Fn),dt===xe?(sn=sn||Qt,vn=vn||Ht,Ln=Ln||xn,(Qt!==ft||sn!==Mt)&&(a.blendEquationSeparate(g(Qt),g(sn)),ft=Qt,Mt=sn),(Ht!==ut||xn!==Et||vn!==nn||Ln!==qt)&&(a.blendFuncSeparate(g(Ht),g(xn),g(vn),g(Ln)),ut=Ht,Et=xn,nn=vn,qt=Ln)):(ft=null,ut=null,Et=null,Mt=null,nn=null,qt=null)}function q(dt){H.setFunc(dt)}function Pe(dt){fn!==dt&&(a.frontFace(dt?a.CW:a.CCW),fn=dt)}function $e(dt){dt!==O?(m(a.CULL_FACE),dt!==an&&a.cullFace(dt===V?a.BACK:dt===L?a.FRONT:a.FRONT_AND_BACK)):_(a.CULL_FACE),an=dt}function Gt(dt){void 0===dt&&(dt=a.TEXTURE0+Jt-1),si!==dt&&(a.activeTexture(dt),si=dt)}return Hi[a.TEXTURE_2D]=ar(a.TEXTURE_2D,a.TEXTURE_2D,1),Hi[a.TEXTURE_CUBE_MAP]=ar(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:F,depth:H,stencil:le},init:function Zn(){F.setClear(0,0,0,1),H.setClear(1),le.setClear(0),m(a.DEPTH_TEST),q(Tn),Pe(!1),$e(V),m(a.CULL_FACE),m(a.BLEND),A(re)},initAttributes:function qn(){for(var dt=0,Qt=ve.length;dt<Qt;dt++)ve[dt]=0},enableAttribute:function f(dt){ve[dt]=1,0===we[dt]&&(a.enableVertexAttribArray(dt),we[dt]=1),0!==Ue[dt]&&(h.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(dt,0),Ue[dt]=0)},enableAttributeAndDivisor:function c(dt,Qt,Ht){ve[dt]=1,0===we[dt]&&(a.enableVertexAttribArray(dt),we[dt]=1),Ue[dt]!==Qt&&(Ht.vertexAttribDivisorANGLE(dt,Qt),Ue[dt]=Qt)},disableUnusedAttributes:function d(){for(var dt=0,Qt=we.length;dt!==Qt;++dt)we[dt]!==ve[dt]&&(a.disableVertexAttribArray(dt),we[dt]=0)},enable:m,disable:_,getCompressedTextureFormats:function C(){if(null===je&&(je=[],h.get("WEBGL_compressed_texture_pvrtc")||h.get("WEBGL_compressed_texture_s3tc")||h.get("WEBGL_compressed_texture_etc1")))for(var dt=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),Qt=0;Qt<dt.length;Qt++)je.push(dt[Qt]);return je},setBlending:A,setColorWrite:function E(dt){F.setMask(dt)},setDepthTest:function B(dt){H.setTest(dt)},setDepthWrite:function P(dt){H.setMask(dt)},setDepthFunc:q,setStencilTest:function Q(dt){le.setTest(dt)},setStencilWrite:function fe(dt){le.setMask(dt)},setStencilFunc:function me(dt,Qt,Ht){le.setFunc(dt,Qt,Ht)},setStencilOp:function _e(dt,Qt,Ht){le.setOp(dt,Qt,Ht)},setFlipSided:Pe,setCullFace:$e,setLineWidth:function Ke(dt){dt!==bn&&(Kn&&a.lineWidth(dt),bn=dt)},setPolygonOffset:function ht(dt,Qt,Ht){dt?(m(a.POLYGON_OFFSET_FILL),(Nn!==Qt||Mi!==Ht)&&(a.polygonOffset(Qt,Ht),Nn=Qt,Mi=Ht)):_(a.POLYGON_OFFSET_FILL)},getScissorTest:function rt(){return fi},setScissorTest:function St(dt){fi=dt,dt?m(a.SCISSOR_TEST):_(a.SCISSOR_TEST)},activeTexture:Gt,bindTexture:function Wt(dt,Qt){null===si&&Gt();var Ht=Di[si];void 0===Ht&&(Di[si]=Ht={type:void 0,texture:void 0}),(Ht.type!==dt||Ht.texture!==Qt)&&(a.bindTexture(dt,Qt||Hi[dt]),Ht.type=dt,Ht.texture=Qt)},compressedTexImage2D:function Tt(){try{a.compressedTexImage2D.apply(a,arguments)}catch(dt){console.error(dt)}},texImage2D:function jt(){try{a.texImage2D.apply(a,arguments)}catch(dt){console.error(dt)}},scissor:function Pt(dt){!1===xi.equals(dt)&&(a.scissor(dt.x,dt.y,dt.z,dt.w),xi.copy(dt))},viewport:function Zt(dt){!1===mi.equals(dt)&&(a.viewport(dt.x,dt.y,dt.z,dt.w),mi.copy(dt))},reset:function Kt(){for(var dt=0;dt<we.length;dt++)1===we[dt]&&(a.disableVertexAttribArray(dt),we[dt]=0);We={},je=null,si=null,Di={},pt=null,fn=null,an=null,F.reset(),H.reset(),le.reset()}}}function gb(a,h,g){var y;function D(nn){if("highp"===nn){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";nn="mediump"}return"mediump"===nn&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var F=void 0!==g.precision?g.precision:"highp",H=D(F);H!==F&&(console.warn("THREE.WebGLRenderer:",F,"not supported, using",H,"instead."),F=H);var le=!0===g.logarithmicDepthBuffer&&!!h.get("EXT_frag_depth"),se=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),ve=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),we=a.getParameter(a.MAX_TEXTURE_SIZE),Ue=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),We=a.getParameter(a.MAX_VERTEX_ATTRIBS),je=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),pt=a.getParameter(a.MAX_VARYING_VECTORS),ft=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),ut=ve>0,Et=!!h.get("OES_texture_float");return{getMaxAnisotropy:function x(){if(void 0!==y)return y;var nn=h.get("EXT_texture_filter_anisotropic");return y=null!==nn?a.getParameter(nn.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:D,precision:F,logarithmicDepthBuffer:le,maxTextures:se,maxVertexTextures:ve,maxTextureSize:we,maxCubemapSize:Ue,maxAttributes:We,maxVertexUniforms:je,maxVaryings:pt,maxFragmentUniforms:ft,vertexTextures:ut,floatFragmentTextures:Et,floatVertexTextures:ut&&Et}}function Yp(a){var h={};return{get:function(g){if(void 0!==h[g])return h[g];var y;switch(g){case"WEBGL_depth_texture":y=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":y=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":y=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":y=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":y=a.getExtension("WEBGL_compressed_texture_etc1");break;default:y=a.getExtension(g)}return null===y&&console.warn("THREE.WebGLRenderer: "+g+" extension not supported."),h[g]=y,y}}}function ll(){var a=this,h=null,g=0,y=!1,x=!1,D=new It,F=new Nt,H={value:null,needsUpdate:!1};function le(){H.value!==h&&(H.value=h,H.needsUpdate=g>0),a.numPlanes=g,a.numIntersection=0}function se(ve,we,Ue,We){var je=null!==ve?ve.length:0,pt=null;if(0!==je){if(pt=H.value,!0!==We||null===pt){var ft=Ue+4*je,ut=we.matrixWorldInverse;F.getNormalMatrix(ut),(null===pt||pt.length<ft)&&(pt=new Float32Array(ft));for(var Et=0,Mt=Ue;Et!==je;++Et,Mt+=4)D.copy(ve[Et]).applyMatrix4(ut,F),D.normal.toArray(pt,Mt),pt[Mt+3]=D.constant}H.value=pt,H.needsUpdate=!0}return a.numPlanes=je,pt}this.uniform=H,this.numPlanes=0,this.numIntersection=0,this.init=function(ve,we,Ue){var We=0!==ve.length||we||0!==g||y;return y=we,h=se(ve,Ue,0),g=ve.length,We},this.beginShadows=function(){x=!0,se(null)},this.endShadows=function(){x=!1,le()},this.setState=function(ve,we,Ue,We,je,pt){if(!y||null===ve||0===ve.length||x&&!Ue)x?se(null):le();else{var ft=x?0:g,ut=4*ft,Et=je.clippingState||null;H.value=Et,Et=se(ve,We,ut,pt);for(var Mt=0;Mt!==ut;++Mt)Et[Mt]=h[Mt];je.clippingState=Et,this.numIntersection=we?this.numPlanes:0,this.numPlanes+=ft}}}function Gd(a){console.log("THREE.WebGLRenderer",M);var h=void 0!==(a=a||{}).canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),g=void 0!==a.context?a.context:null,y=void 0!==a.alpha&&a.alpha,x=void 0===a.depth||a.depth,D=void 0===a.stencil||a.stencil,F=void 0!==a.antialias&&a.antialias,H=void 0===a.premultipliedAlpha||a.premultipliedAlpha,le=void 0!==a.preserveDrawingBuffer&&a.preserveDrawingBuffer,se=[],ve=[],we=-1,Ue=[],We=-1,je=new Float32Array(8),pt=[],ft=[];this.domElement=h,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=un,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var E,ut=this,Et=null,Mt=null,nn=null,qt=-1,yn="",fn=null,an=new Ko,bn=null,Nn=new Ko,Mi=0,fi=new Kr(0),Jt=0,tn=h.width,Kn=h.height,si=1,Di=new Ko(0,0,tn,Kn),xi=!1,mi=new Ko(0,0,tn,Kn),ar=new No,Hi=new ll,Zn=!1,qn=!1,f=new Ot,c=new bs,d=new on,m=new bs,_=new bs,C={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},A={calls:0,vertices:0,faces:0,points:0};this.info={render:A,memory:{geometries:0,textures:0},programs:null};try{var B={alpha:y,depth:x,stencil:D,antialias:F,premultipliedAlpha:H,preserveDrawingBuffer:le};if(null===(E=g||h.getContext("webgl",B)||h.getContext("experimental-webgl",B)))throw null!==h.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===E.getShaderPrecisionFormat&&(E.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),h.addEventListener("webglcontextlost",Ht,!1)}catch(Ze){console.error("THREE.WebGLRenderer: "+Ze)}var P=new Yp(E);P.get("WEBGL_depth_texture"),P.get("OES_texture_float"),P.get("OES_texture_float_linear"),P.get("OES_texture_half_float"),P.get("OES_texture_half_float_linear"),P.get("OES_standard_derivatives"),P.get("ANGLE_instanced_arrays"),P.get("OES_element_index_uint")&&(Lr.MaxIndex=4294967296);var q=new gb(E,P,a),Q=new kv(E,P,Ri),fe=new j_,me=new Pv(E,P,Q,fe,q,Ri,this.info),_e=new ld(E,fe,this.info),Pe=new Uy(this,q),$e=new Ha;this.info.programs=Pe.programs;var Ke=new wf(E,P,A),ht=new dc(E,P,A),rt=new Vd(-1,1,1,-1,0,1),St=new xl,Gt=new wa(new aa(2,2),new Va({depthTest:!1,depthWrite:!1,fog:!1})),Wt=Rc.cube,Tt=new wa(new Nl(5,5,5),new eu({uniforms:Wt.uniforms,vertexShader:Wt.vertexShader,fragmentShader:Wt.fragmentShader,side:G,depthTest:!1,depthWrite:!1,fog:!1}));function jt(){return null===Mt?si:1}function Pt(){Q.init(),Q.scissor(an.copy(Di).multiplyScalar(si)),Q.viewport(Nn.copy(mi).multiplyScalar(si)),Q.buffers.color.setClear(fi.r,fi.g,fi.b,Jt,H)}function Zt(){Et=null,fn=null,yn="",qt=-1,Q.reset()}Pt(),this.context=E,this.capabilities=q,this.extensions=P,this.properties=fe,this.state=Q;var Kt=new Mo(this,C,_e,q);this.shadowMap=Kt;var Ze,dt=new W_(this,pt),Qt=new $p(this,ft);function Ht(Ze){Ze.preventDefault(),Zt(),Pt(),fe.clear()}function xn(Ze){var Ct=Ze.target;Ct.removeEventListener("dispose",xn),function sn(Ze){vn(Ze),fe.delete(Ze)}(Ct)}function vn(Ze){var Ct=fe.get(Ze).program;Ze.program=void 0,void 0!==Ct&&Pe.releaseProgram(Ct)}function Fn(Ze,Ct){return Math.abs(Ct[0])-Math.abs(Ze[0])}function ri(Ze,Ct){return Ze.object.renderOrder!==Ct.object.renderOrder?Ze.object.renderOrder-Ct.object.renderOrder:Ze.material.program&&Ct.material.program&&Ze.material.program!==Ct.material.program?Ze.material.program.id-Ct.material.program.id:Ze.material.id!==Ct.material.id?Ze.material.id-Ct.material.id:Ze.z!==Ct.z?Ze.z-Ct.z:Ze.id-Ct.id}function Rn(Ze,Ct){return Ze.object.renderOrder!==Ct.object.renderOrder?Ze.object.renderOrder-Ct.object.renderOrder:Ze.z!==Ct.z?Ct.z-Ze.z:Ze.id-Ct.id}function ei(Ze,Ct,gn,Cn,An){var ir,cr;gn.transparent?(ir=Ue,cr=++We):(ir=ve,cr=++we);var ai=ir[cr];void 0!==ai?(ai.id=Ze.id,ai.object=Ze,ai.geometry=Ct,ai.material=gn,ai.z=d.z,ai.group=An):ir.push(ai={id:Ze.id,object:Ze,geometry:Ct,material:gn,z:d.z,group:An})}function vi(Ze){if(!ar.intersectsSphere(Ze))return!1;var Ct=Hi.numPlanes;if(0===Ct)return!0;var gn=ut.clippingPlanes,Cn=Ze.center,An=-Ze.radius,ir=0;do{if(gn[ir].distanceToPoint(Cn)<An)return!1}while(++ir!==Ct);return!0}function pi(Ze,Ct){if(!1!==Ze.visible){if(0!=(Ze.layers.mask&Ct.layers.mask))if(Ze.isLight)se.push(Ze);else if(Ze.isSprite)(!1===Ze.frustumCulled||!0===function Ii(Ze){return f.center.set(0,0,0),f.radius=.7071067811865476,f.applyMatrix4(Ze.matrixWorld),vi(f)}(Ze))&&pt.push(Ze);else if(Ze.isLensFlare)ft.push(Ze);else if(Ze.isImmediateRenderObject)!0===ut.sortObjects&&(d.setFromMatrixPosition(Ze.matrixWorld),d.applyProjection(c)),ei(Ze,null,Ze.material,0,null);else if((Ze.isMesh||Ze.isLine||Ze.isPoints)&&(Ze.isSkinnedMesh&&Ze.skeleton.update(),!1===Ze.frustumCulled||!0===function di(Ze){var Ct=Ze.geometry;return null===Ct.boundingSphere&&Ct.computeBoundingSphere(),f.copy(Ct.boundingSphere).applyMatrix4(Ze.matrixWorld),vi(f)}(Ze))){var Cn=Ze.material;if(!0===Cn.visible){!0===ut.sortObjects&&(d.setFromMatrixPosition(Ze.matrixWorld),d.applyProjection(c));var An=_e.update(Ze);if(Cn.isMultiMaterial)for(var ir=An.groups,cr=Cn.materials,ai=0,Vr=ir.length;ai<Vr;ai++){var Vi=ir[ai],Ui=cr[Vi.materialIndex];!0===Ui.visible&&ei(Ze,An,Ui,0,Vi)}else ei(Ze,An,Cn,0,null)}}var nr=Ze.children;for(ai=0,Vr=nr.length;ai<Vr;ai++)pi(nr[ai],Ct)}}function kn(Ze,Ct,gn,Cn){for(var An=0,ir=Ze.length;An<ir;An++){var cr=Ze[An],ai=cr.object,Vr=cr.geometry,Vi=void 0===Cn?cr.material:Cn,Ui=cr.group;if(ai.modelViewMatrix.multiplyMatrices(gn.matrixWorldInverse,ai.matrixWorld),ai.normalMatrix.getNormalMatrix(ai.modelViewMatrix),ai.onBeforeRender(ut,Ct,gn,Vr,Vi,Ui),ai.isImmediateRenderObject){Ei(Vi);var nr=Qi(gn,Ct.fog,Vi,ai);yn="",ai.render(function(to){ut.renderBufferImmediate(to,nr,Vi)})}else ut.renderBufferDirect(gn,Ct.fog,Vr,Vi,ai,Ui);ai.onAfterRender(ut,Ct,gn,Vr,Vi,Ui)}}function Ei(Ze){Ze.side===oe?Q.disable(E.CULL_FACE):Q.enable(E.CULL_FACE),Q.setFlipSided(Ze.side===G),!0===Ze.transparent?Q.setBlending(Ze.blending,Ze.blendEquation,Ze.blendSrc,Ze.blendDst,Ze.blendEquationAlpha,Ze.blendSrcAlpha,Ze.blendDstAlpha,Ze.premultipliedAlpha):Q.setBlending($),Q.setDepthFunc(Ze.depthFunc),Q.setDepthTest(Ze.depthTest),Q.setDepthWrite(Ze.depthWrite),Q.setColorWrite(Ze.colorWrite),Q.setPolygonOffset(Ze.polygonOffset,Ze.polygonOffsetFactor,Ze.polygonOffsetUnits)}function Qi(Ze,Ct,gn,Cn){Mi=0;var An=fe.get(gn);Zn&&(qn||Ze!==fn)&&Hi.setState(gn.clippingPlanes,gn.clipIntersection,gn.clipShadows,Ze,An,Ze===fn&&gn.id===qt),!1===gn.needsUpdate&&(void 0===An.program||gn.fog&&An.fog!==Ct||gn.lights&&An.lightsHash!==C.hash||void 0!==An.numClippingPlanes&&(An.numClippingPlanes!==Hi.numPlanes||An.numIntersection!==Hi.numIntersection))&&(gn.needsUpdate=!0),gn.needsUpdate&&(function li(Ze,Ct,gn){var Cn=fe.get(Ze),An=Pe.getParameters(Ze,C,Ct,Hi.numPlanes,Hi.numIntersection,gn),ir=Pe.getProgramCode(Ze,An),cr=Cn.program,ai=!0;if(void 0===cr)Ze.addEventListener("dispose",xn);else if(cr.code!==ir)vn(Ze);else{if(void 0!==An.shaderID)return;ai=!1}if(ai){if(An.shaderID){var Vr=Rc[An.shaderID];Cn.__webglShader={name:Ze.type,uniforms:sl.clone(Vr.uniforms),vertexShader:Vr.vertexShader,fragmentShader:Vr.fragmentShader}}else Cn.__webglShader={name:Ze.type,uniforms:Ze.uniforms,vertexShader:Ze.vertexShader,fragmentShader:Ze.fragmentShader};Ze.__webglShader=Cn.__webglShader,cr=Pe.acquireProgram(Ze,An,ir),Cn.program=cr,Ze.program=cr}var Vi=cr.getAttributes();if(Ze.morphTargets){Ze.numSupportedMorphTargets=0;for(var Ui=0;Ui<ut.maxMorphTargets;Ui++)Vi["morphTarget"+Ui]>=0&&Ze.numSupportedMorphTargets++}if(Ze.morphNormals)for(Ze.numSupportedMorphNormals=0,Ui=0;Ui<ut.maxMorphNormals;Ui++)Vi["morphNormal"+Ui]>=0&&Ze.numSupportedMorphNormals++;var nr=Cn.__webglShader.uniforms;(!Ze.isShaderMaterial&&!Ze.isRawShaderMaterial||!0===Ze.clipping)&&(Cn.numClippingPlanes=Hi.numPlanes,Cn.numIntersection=Hi.numIntersection,nr.clippingPlanes=Hi.uniform),Cn.fog=Ct,Cn.lightsHash=C.hash,Ze.lights&&(nr.ambientLightColor.value=C.ambient,nr.directionalLights.value=C.directional,nr.spotLights.value=C.spot,nr.rectAreaLights.value=C.rectArea,nr.pointLights.value=C.point,nr.hemisphereLights.value=C.hemi,nr.directionalShadowMap.value=C.directionalShadowMap,nr.directionalShadowMatrix.value=C.directionalShadowMatrix,nr.spotShadowMap.value=C.spotShadowMap,nr.spotShadowMatrix.value=C.spotShadowMatrix,nr.pointShadowMap.value=C.pointShadowMap,nr.pointShadowMatrix.value=C.pointShadowMatrix);var to=Cn.program.getUniforms(),fo=Za.seqWithValue(to.seq,nr);Cn.uniformsList=fo}(gn,Ct,Cn),gn.needsUpdate=!1);var cr=!1,ai=!1,Vr=!1,Vi=An.program,Ui=Vi.getUniforms(),nr=An.__webglShader.uniforms;if(Vi.id!==Et&&(E.useProgram(Vi.program),Et=Vi.id,cr=!0,ai=!0,Vr=!0),gn.id!==qt&&(qt=gn.id,ai=!0),cr||Ze!==fn){if(Ui.set(E,Ze,"projectionMatrix"),q.logarithmicDepthBuffer&&Ui.setValue(E,"logDepthBufFC",2/(Math.log(Ze.far+1)/Math.LN2)),Ze!==fn&&(fn=Ze,ai=!0,Vr=!0),gn.isShaderMaterial||gn.isMeshPhongMaterial||gn.isMeshStandardMaterial||gn.envMap){var to=Ui.map.cameraPosition;void 0!==to&&to.setValue(E,d.setFromMatrixPosition(Ze.matrixWorld))}(gn.isMeshPhongMaterial||gn.isMeshLambertMaterial||gn.isMeshBasicMaterial||gn.isMeshStandardMaterial||gn.isShaderMaterial||gn.skinning)&&Ui.setValue(E,"viewMatrix",Ze.matrixWorldInverse),Ui.set(E,ut,"toneMappingExposure"),Ui.set(E,ut,"toneMappingWhitePoint")}if(gn.skinning){Ui.setOptional(E,Cn,"bindMatrix"),Ui.setOptional(E,Cn,"bindMatrixInverse");var fo=Cn.skeleton;fo&&(q.floatVertexTextures&&fo.useVertexTexture?(Ui.set(E,fo,"boneTexture"),Ui.set(E,fo,"boneTextureWidth"),Ui.set(E,fo,"boneTextureHeight")):Ui.setOptional(E,fo,"boneMatrices"))}return ai&&(gn.lights&&function ts(Ze,Ct){Ze.ambientLightColor.needsUpdate=Ct,Ze.directionalLights.needsUpdate=Ct,Ze.pointLights.needsUpdate=Ct,Ze.spotLights.needsUpdate=Ct,Ze.rectAreaLights.needsUpdate=Ct,Ze.hemisphereLights.needsUpdate=Ct}(nr,Vr),Ct&&gn.fog&&function or(Ze,Ct){Ze.fogColor.value=Ct.color,Ct.isFog?(Ze.fogNear.value=Ct.near,Ze.fogFar.value=Ct.far):Ct.isFogExp2&&(Ze.fogDensity.value=Ct.density)}(nr,Ct),(gn.isMeshBasicMaterial||gn.isMeshLambertMaterial||gn.isMeshPhongMaterial||gn.isMeshStandardMaterial||gn.isMeshNormalMaterial||gn.isMeshDepthMaterial)&&function lr(Ze,Ct){var gn;if(Ze.opacity.value=Ct.opacity,Ze.diffuse.value=Ct.color,Ct.emissive&&Ze.emissive.value.copy(Ct.emissive).multiplyScalar(Ct.emissiveIntensity),Ze.map.value=Ct.map,Ze.specularMap.value=Ct.specularMap,Ze.alphaMap.value=Ct.alphaMap,Ct.lightMap&&(Ze.lightMap.value=Ct.lightMap,Ze.lightMapIntensity.value=Ct.lightMapIntensity),Ct.aoMap&&(Ze.aoMap.value=Ct.aoMap,Ze.aoMapIntensity.value=Ct.aoMapIntensity),Ct.map?gn=Ct.map:Ct.specularMap?gn=Ct.specularMap:Ct.displacementMap?gn=Ct.displacementMap:Ct.normalMap?gn=Ct.normalMap:Ct.bumpMap?gn=Ct.bumpMap:Ct.roughnessMap?gn=Ct.roughnessMap:Ct.metalnessMap?gn=Ct.metalnessMap:Ct.alphaMap?gn=Ct.alphaMap:Ct.emissiveMap&&(gn=Ct.emissiveMap),void 0!==gn){gn.isWebGLRenderTarget&&(gn=gn.texture);var Cn=gn.offset,An=gn.repeat;Ze.offsetRepeat.value.set(Cn.x,Cn.y,An.x,An.y)}Ze.envMap.value=Ct.envMap,Ze.flipEnvMap.value=Ct.envMap&&Ct.envMap.isCubeTexture?-1:1,Ze.reflectivity.value=Ct.reflectivity,Ze.refractionRatio.value=Ct.refractionRatio}(nr,gn),gn.isLineBasicMaterial?Wr(nr,gn):gn.isLineDashedMaterial?(Wr(nr,gn),function Jr(Ze,Ct){Ze.dashSize.value=Ct.dashSize,Ze.totalSize.value=Ct.dashSize+Ct.gapSize,Ze.scale.value=Ct.scale}(nr,gn)):gn.isPointsMaterial?function mr(Ze,Ct){if(Ze.diffuse.value=Ct.color,Ze.opacity.value=Ct.opacity,Ze.size.value=Ct.size*si,Ze.scale.value=.5*Kn,Ze.map.value=Ct.map,null!==Ct.map){var gn=Ct.map.offset,Cn=Ct.map.repeat;Ze.offsetRepeat.value.set(gn.x,gn.y,Cn.x,Cn.y)}}(nr,gn):gn.isMeshLambertMaterial?function Zr(Ze,Ct){Ct.emissiveMap&&(Ze.emissiveMap.value=Ct.emissiveMap)}(nr,gn):gn.isMeshToonMaterial?function br(Ze,Ct){ki(Ze,Ct),Ct.gradientMap&&(Ze.gradientMap.value=Ct.gradientMap)}(nr,gn):gn.isMeshPhongMaterial?ki(nr,gn):gn.isMeshPhysicalMaterial?function es(Ze,Ct){Ze.clearCoat.value=Ct.clearCoat,Ze.clearCoatRoughness.value=Ct.clearCoatRoughness,wr(Ze,Ct)}(nr,gn):gn.isMeshStandardMaterial?wr(nr,gn):gn.isMeshDepthMaterial?gn.displacementMap&&(nr.displacementMap.value=gn.displacementMap,nr.displacementScale.value=gn.displacementScale,nr.displacementBias.value=gn.displacementBias):gn.isMeshNormalMaterial&&function zs(Ze,Ct){Ct.bumpMap&&(Ze.bumpMap.value=Ct.bumpMap,Ze.bumpScale.value=Ct.bumpScale),Ct.normalMap&&(Ze.normalMap.value=Ct.normalMap,Ze.normalScale.value.copy(Ct.normalScale)),Ct.displacementMap&&(Ze.displacementMap.value=Ct.displacementMap,Ze.displacementScale.value=Ct.displacementScale,Ze.displacementBias.value=Ct.displacementBias)}(nr,gn),void 0!==nr.ltcMat&&(nr.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==nr.ltcMag&&(nr.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),Za.upload(E,An.uniformsList,nr,ut)),Ui.set(E,Cn,"modelViewMatrix"),Ui.set(E,Cn,"normalMatrix"),Ui.setValue(E,"modelMatrix",Cn.matrixWorld),Vi}function Wr(Ze,Ct){Ze.diffuse.value=Ct.color,Ze.opacity.value=Ct.opacity}function ki(Ze,Ct){Ze.specular.value=Ct.specular,Ze.shininess.value=Math.max(Ct.shininess,1e-4),Ct.emissiveMap&&(Ze.emissiveMap.value=Ct.emissiveMap),Ct.bumpMap&&(Ze.bumpMap.value=Ct.bumpMap,Ze.bumpScale.value=Ct.bumpScale),Ct.normalMap&&(Ze.normalMap.value=Ct.normalMap,Ze.normalScale.value.copy(Ct.normalScale)),Ct.displacementMap&&(Ze.displacementMap.value=Ct.displacementMap,Ze.displacementScale.value=Ct.displacementScale,Ze.displacementBias.value=Ct.displacementBias)}function wr(Ze,Ct){Ze.roughness.value=Ct.roughness,Ze.metalness.value=Ct.metalness,Ct.roughnessMap&&(Ze.roughnessMap.value=Ct.roughnessMap),Ct.metalnessMap&&(Ze.metalnessMap.value=Ct.metalnessMap),Ct.emissiveMap&&(Ze.emissiveMap.value=Ct.emissiveMap),Ct.bumpMap&&(Ze.bumpMap.value=Ct.bumpMap,Ze.bumpScale.value=Ct.bumpScale),Ct.normalMap&&(Ze.normalMap.value=Ct.normalMap,Ze.normalScale.value.copy(Ct.normalScale)),Ct.displacementMap&&(Ze.displacementMap.value=Ct.displacementMap,Ze.displacementScale.value=Ct.displacementScale,Ze.displacementBias.value=Ct.displacementBias),Ct.envMap&&(Ze.envMapIntensity.value=Ct.envMapIntensity)}function Ri(Ze){var Ct;if(Ze===ih)return E.REPEAT;if(Ze===uc)return E.CLAMP_TO_EDGE;if(Ze===Sh)return E.MIRRORED_REPEAT;if(Ze===Xa)return E.NEAREST;if(Ze===Pd)return E.NEAREST_MIPMAP_NEAREST;if(Ze===uu)return E.NEAREST_MIPMAP_LINEAR;if(Ze===Sa)return E.LINEAR;if(Ze===Eh)return E.LINEAR_MIPMAP_NEAREST;if(Ze===Ou)return E.LINEAR_MIPMAP_LINEAR;if(Ze===ff)return E.UNSIGNED_BYTE;if(Ze===Mg)return E.UNSIGNED_SHORT_4_4_4_4;if(Ze===Th)return E.UNSIGNED_SHORT_5_5_5_1;if(Ze===ro)return E.UNSIGNED_SHORT_5_6_5;if(Ze===id)return E.BYTE;if(Ze===pl)return E.SHORT;if(Ze===pf)return E.UNSIGNED_SHORT;if(Ze===rh)return E.INT;if(Ze===gf)return E.UNSIGNED_INT;if(Ze===kd)return E.FLOAT;if(Ze===Ic&&null!==(Ct=P.get("OES_texture_half_float")))return Ct.HALF_FLOAT_OES;if(Ze===gl)return E.ALPHA;if(Ze===Sc)return E.RGB;if(Ze===rl)return E.RGBA;if(Ze===$f)return E.LUMINANCE;if(Ze===rd)return E.LUMINANCE_ALPHA;if(Ze===mt)return E.DEPTH_COMPONENT;if(Ze===ct)return E.DEPTH_STENCIL;if(Ze===Re)return E.FUNC_ADD;if(Ze===Je)return E.FUNC_SUBTRACT;if(Ze===ke)return E.FUNC_REVERSE_SUBTRACT;if(Ze===yt)return E.ZERO;if(Ze===hn)return E.ONE;if(Ze===Be)return E.SRC_COLOR;if(Ze===lt)return E.ONE_MINUS_SRC_COLOR;if(Ze===Ve)return E.SRC_ALPHA;if(Ze===Ge)return E.ONE_MINUS_SRC_ALPHA;if(Ze===bt)return E.DST_ALPHA;if(Ze===wt)return E.ONE_MINUS_DST_ALPHA;if(Ze===st)return E.DST_COLOR;if(Ze===gt)return E.ONE_MINUS_DST_COLOR;if(Ze===Me)return E.SRC_ALPHA_SATURATE;if((Ze===ge||Ze===Oe||Ze===it||Ze===Rt)&&null!==(Ct=P.get("WEBGL_compressed_texture_s3tc"))){if(Ze===ge)return Ct.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Ze===Oe)return Ct.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Ze===it)return Ct.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Ze===Rt)return Ct.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((Ze===Yt||Ze===Dn||Ze===Ai||Ze===oi)&&null!==(Ct=P.get("WEBGL_compressed_texture_pvrtc"))){if(Ze===Yt)return Ct.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Ze===Dn)return Ct.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Ze===Ai)return Ct.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Ze===oi)return Ct.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(Ze===gi&&null!==(Ct=P.get("WEBGL_compressed_texture_etc1")))return Ct.COMPRESSED_RGB_ETC1_WEBGL;if((Ze===qe||Ze===ot)&&null!==(Ct=P.get("EXT_blend_minmax"))){if(Ze===qe)return Ct.MIN_EXT;if(Ze===ot)return Ct.MAX_EXT}return Ze===mf&&null!==(Ct=P.get("WEBGL_depth_texture"))?Ct.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return E},this.getContextAttributes=function(){return E.getContextAttributes()},this.forceContextLoss=function(){P.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return q.getMaxAnisotropy()},this.getPrecision=function(){return q.precision},this.getPixelRatio=function(){return si},this.setPixelRatio=function(Ze){void 0!==Ze&&(si=Ze,this.setSize(mi.z,mi.w,!1))},this.getSize=function(){return{width:tn,height:Kn}},this.setSize=function(Ze,Ct,gn){tn=Ze,Kn=Ct,h.width=Ze*si,h.height=Ct*si,!1!==gn&&(h.style.width=Ze+"px",h.style.height=Ct+"px"),this.setViewport(0,0,Ze,Ct)},this.setViewport=function(Ze,Ct,gn,Cn){Q.viewport(mi.set(Ze,Ct,gn,Cn))},this.setScissor=function(Ze,Ct,gn,Cn){Q.scissor(Di.set(Ze,Ct,gn,Cn))},this.setScissorTest=function(Ze){Q.setScissorTest(xi=Ze)},this.getClearColor=function(){return fi},this.setClearColor=function(Ze,Ct){fi.set(Ze),Q.buffers.color.setClear(fi.r,fi.g,fi.b,Jt=void 0!==Ct?Ct:1,H)},this.getClearAlpha=function(){return Jt},this.setClearAlpha=function(Ze){Q.buffers.color.setClear(fi.r,fi.g,fi.b,Jt=Ze,H)},this.clear=function(Ze,Ct,gn){var Cn=0;(void 0===Ze||Ze)&&(Cn|=E.COLOR_BUFFER_BIT),(void 0===Ct||Ct)&&(Cn|=E.DEPTH_BUFFER_BIT),(void 0===gn||gn)&&(Cn|=E.STENCIL_BUFFER_BIT),E.clear(Cn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(Ze,Ct,gn,Cn){this.setRenderTarget(Ze),this.clear(Ct,gn,Cn)},this.resetGLState=Zt,this.dispose=function(){Ue=[],We=-1,ve=[],we=-1,h.removeEventListener("webglcontextlost",Ht,!1)},this.renderBufferImmediate=function(Ze,Ct,gn){Q.initAttributes();var Cn=fe.get(Ze);Ze.hasPositions&&!Cn.position&&(Cn.position=E.createBuffer()),Ze.hasNormals&&!Cn.normal&&(Cn.normal=E.createBuffer()),Ze.hasUvs&&!Cn.uv&&(Cn.uv=E.createBuffer()),Ze.hasColors&&!Cn.color&&(Cn.color=E.createBuffer());var An=Ct.getAttributes();if(Ze.hasPositions&&(E.bindBuffer(E.ARRAY_BUFFER,Cn.position),E.bufferData(E.ARRAY_BUFFER,Ze.positionArray,E.DYNAMIC_DRAW),Q.enableAttribute(An.position),E.vertexAttribPointer(An.position,3,E.FLOAT,!1,0,0)),Ze.hasNormals){if(E.bindBuffer(E.ARRAY_BUFFER,Cn.normal),!gn.isMeshPhongMaterial&&!gn.isMeshStandardMaterial&&!gn.isMeshNormalMaterial&&gn.shading===ye)for(var ir=0,cr=3*Ze.count;ir<cr;ir+=9){var ai=Ze.normalArray,Vr=(ai[ir+0]+ai[ir+3]+ai[ir+6])/3,Vi=(ai[ir+1]+ai[ir+4]+ai[ir+7])/3,Ui=(ai[ir+2]+ai[ir+5]+ai[ir+8])/3;ai[ir+0]=Vr,ai[ir+1]=Vi,ai[ir+2]=Ui,ai[ir+3]=Vr,ai[ir+4]=Vi,ai[ir+5]=Ui,ai[ir+6]=Vr,ai[ir+7]=Vi,ai[ir+8]=Ui}E.bufferData(E.ARRAY_BUFFER,Ze.normalArray,E.DYNAMIC_DRAW),Q.enableAttribute(An.normal),E.vertexAttribPointer(An.normal,3,E.FLOAT,!1,0,0)}Ze.hasUvs&&gn.map&&(E.bindBuffer(E.ARRAY_BUFFER,Cn.uv),E.bufferData(E.ARRAY_BUFFER,Ze.uvArray,E.DYNAMIC_DRAW),Q.enableAttribute(An.uv),E.vertexAttribPointer(An.uv,2,E.FLOAT,!1,0,0)),Ze.hasColors&&gn.vertexColors!==ne&&(E.bindBuffer(E.ARRAY_BUFFER,Cn.color),E.bufferData(E.ARRAY_BUFFER,Ze.colorArray,E.DYNAMIC_DRAW),Q.enableAttribute(An.color),E.vertexAttribPointer(An.color,3,E.FLOAT,!1,0,0)),Q.disableUnusedAttributes(),E.drawArrays(E.TRIANGLES,0,Ze.count),Ze.count=0},this.renderBufferDirect=function(Ze,Ct,gn,Cn,An,ir){Ei(Cn);var cr=Qi(Ze,Ct,Cn,An),ai=!1,Vr=gn.id+"_"+cr.id+"_"+Cn.wireframe;Vr!==yn&&(yn=Vr,ai=!0);var Vi=An.morphTargetInfluences;if(void 0!==Vi){for(var Ui=[],nr=0,to=Vi.length;nr<to;nr++)Ui.push([fo=Vi[nr],nr]);Ui.sort(Fn),Ui.length>8&&(Ui.length=8);var Na=gn.morphAttributes;for(nr=0,to=Ui.length;nr<to;nr++){var fo;if(je[nr]=(fo=Ui[nr])[0],0!==fo[0]){var Lo=fo[1];!0===Cn.morphTargets&&Na.position&&gn.addAttribute("morphTarget"+nr,Na.position[Lo]),!0===Cn.morphNormals&&Na.normal&&gn.addAttribute("morphNormal"+nr,Na.normal[Lo])}else!0===Cn.morphTargets&&gn.removeAttribute("morphTarget"+nr),!0===Cn.morphNormals&&gn.removeAttribute("morphNormal"+nr)}nr=Ui.length;for(var qo=je.length;nr<qo;nr++)je[nr]=0;cr.getUniforms().setValue(E,"morphTargetInfluences",je),ai=!0}Lo=gn.index;var Wa,Jo=gn.attributes.position,Er=1;!0===Cn.wireframe&&(Lo=_e.getWireframeAttribute(gn),Er=2),null!==Lo?(Wa=ht).setIndex(Lo):Wa=Ke,ai&&(function Ln(Ze,Ct,gn,Cn){var An;if(gn&&gn.isInstancedBufferGeometry&&null===(An=P.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===Cn&&(Cn=0),Q.initAttributes();var ir=gn.attributes,cr=Ct.getAttributes(),ai=Ze.defaultAttributeValues;for(var Vr in cr){var Vi=cr[Vr];if(Vi>=0){var Ui=ir[Vr];if(void 0!==Ui){var nr=Ui.normalized,to=Ui.itemSize,fo=_e.getAttributeProperties(Ui),Na=fo.__webglBuffer,qo=fo.type,Lo=fo.bytesPerElement;if(Ui.isInterleavedBufferAttribute){var Jo=Ui.data,Er=Jo.stride,Wa=Ui.offset;Jo&&Jo.isInstancedInterleavedBuffer?(Q.enableAttributeAndDivisor(Vi,Jo.meshPerAttribute,An),void 0===gn.maxInstancedCount&&(gn.maxInstancedCount=Jo.meshPerAttribute*Jo.count)):Q.enableAttribute(Vi),E.bindBuffer(E.ARRAY_BUFFER,Na),E.vertexAttribPointer(Vi,to,qo,nr,Er*Lo,(Cn*Er+Wa)*Lo)}else Ui.isInstancedBufferAttribute?(Q.enableAttributeAndDivisor(Vi,Ui.meshPerAttribute,An),void 0===gn.maxInstancedCount&&(gn.maxInstancedCount=Ui.meshPerAttribute*Ui.count)):Q.enableAttribute(Vi),E.bindBuffer(E.ARRAY_BUFFER,Na),E.vertexAttribPointer(Vi,to,qo,nr,0,Cn*to*Lo)}else if(void 0!==ai){var Hl=ai[Vr];if(void 0!==Hl)switch(Hl.length){case 2:E.vertexAttrib2fv(Vi,Hl);break;case 3:E.vertexAttrib3fv(Vi,Hl);break;case 4:E.vertexAttrib4fv(Vi,Hl);break;default:E.vertexAttrib1fv(Vi,Hl)}}}}Q.disableUnusedAttributes()}}(Cn,cr,gn),null!==Lo&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,_e.getAttributeBuffer(Lo)));var Hl=0;null!==Lo?Hl=Lo.count:void 0!==Jo&&(Hl=Jo.count);var Gl=gn.drawRange.start*Er,zc=gn.drawRange.count*Er,Cp=null!==ir?ir.start*Er:0,Nf=null!==ir?ir.count*Er:1/0,Vc=Math.max(Gl,Cp),ic=Math.min(Hl,Gl+zc,Cp+Nf)-1,Uc=Math.max(0,ic-Vc+1);if(0!==Uc){if(An.isMesh)if(!0===Cn.wireframe)Q.setLineWidth(Cn.wireframeLinewidth*jt()),Wa.setMode(E.LINES);else switch(An.drawMode){case Ya:Wa.setMode(E.TRIANGLES);break;case Fu:Wa.setMode(E.TRIANGLE_STRIP);break;case hs:Wa.setMode(E.TRIANGLE_FAN)}else if(An.isLine){var wp=Cn.linewidth;void 0===wp&&(wp=1),Q.setLineWidth(wp*jt()),Wa.setMode(An.isLineSegments?E.LINES:E.LINE_STRIP)}else An.isPoints&&Wa.setMode(E.POINTS);gn&&gn.isInstancedBufferGeometry?gn.maxInstancedCount>0&&Wa.renderInstances(gn,Vc,Uc):Wa.render(Vc,Uc)}},this.render=function(Ze,Ct,gn,Cn){if(void 0===Ct||!0===Ct.isCamera){yn="",qt=-1,fn=null,!0===Ze.autoUpdate&&Ze.updateMatrixWorld(),null===Ct.parent&&Ct.updateMatrixWorld(),Ct.matrixWorldInverse.getInverse(Ct.matrixWorld),c.multiplyMatrices(Ct.projectionMatrix,Ct.matrixWorldInverse),ar.setFromMatrix(c),se.length=0,we=-1,We=-1,pt.length=0,ft.length=0,Zn=Hi.init(this.clippingPlanes,qn=this.localClippingEnabled,Ct),pi(Ze,Ct),ve.length=we+1,Ue.length=We+1,!0===ut.sortObjects&&(ve.sort(ri),Ue.sort(Rn)),Zn&&Hi.beginShadows(),function $i(Ze){for(var Ct=0,gn=0,Cn=Ze.length;gn<Cn;gn++){var An=Ze[gn];An.castShadow&&(C.shadows[Ct++]=An)}C.shadows.length=Ct}(se),Kt.render(Ze,Ct),function zt(Ze,Ct){var gn,Cn,An,Vr,Vi,Ui,nr,ir=0,cr=0,ai=0,to=Ct.matrixWorldInverse,fo=0,Na=0,qo=0,Lo=0,Jo=0;for(gn=0,Cn=Ze.length;gn<Cn;gn++)if(Vr=(An=Ze[gn]).color,Vi=An.intensity,Ui=An.distance,nr=An.shadow&&An.shadow.map?An.shadow.map.texture:null,An.isAmbientLight)ir+=Vr.r*Vi,cr+=Vr.g*Vi,ai+=Vr.b*Vi;else if(An.isDirectionalLight)(Er=$e.get(An)).color.copy(An.color).multiplyScalar(An.intensity),Er.direction.setFromMatrixPosition(An.matrixWorld),d.setFromMatrixPosition(An.target.matrixWorld),Er.direction.sub(d),Er.direction.transformDirection(to),Er.shadow=An.castShadow,An.castShadow&&(Er.shadowBias=An.shadow.bias,Er.shadowRadius=An.shadow.radius,Er.shadowMapSize=An.shadow.mapSize),C.directionalShadowMap[fo]=nr,C.directionalShadowMatrix[fo]=An.shadow.matrix,C.directional[fo++]=Er;else if(An.isSpotLight)(Er=$e.get(An)).position.setFromMatrixPosition(An.matrixWorld),Er.position.applyMatrix4(to),Er.color.copy(Vr).multiplyScalar(Vi),Er.distance=Ui,Er.direction.setFromMatrixPosition(An.matrixWorld),d.setFromMatrixPosition(An.target.matrixWorld),Er.direction.sub(d),Er.direction.transformDirection(to),Er.coneCos=Math.cos(An.angle),Er.penumbraCos=Math.cos(An.angle*(1-An.penumbra)),Er.decay=0===An.distance?0:An.decay,Er.shadow=An.castShadow,An.castShadow&&(Er.shadowBias=An.shadow.bias,Er.shadowRadius=An.shadow.radius,Er.shadowMapSize=An.shadow.mapSize),C.spotShadowMap[qo]=nr,C.spotShadowMatrix[qo]=An.shadow.matrix,C.spot[qo++]=Er;else if(An.isRectAreaLight)(Er=$e.get(An)).color.copy(Vr).multiplyScalar(Vi/(An.width*An.height)),Er.position.setFromMatrixPosition(An.matrixWorld),Er.position.applyMatrix4(to),_.identity(),m.copy(An.matrixWorld),m.premultiply(to),_.extractRotation(m),Er.halfWidth.set(.5*An.width,0,0),Er.halfHeight.set(0,.5*An.height,0),Er.halfWidth.applyMatrix4(_),Er.halfHeight.applyMatrix4(_),C.rectArea[Lo++]=Er;else if(An.isPointLight)(Er=$e.get(An)).position.setFromMatrixPosition(An.matrixWorld),Er.position.applyMatrix4(to),Er.color.copy(An.color).multiplyScalar(An.intensity),Er.distance=An.distance,Er.decay=0===An.distance?0:An.decay,Er.shadow=An.castShadow,An.castShadow&&(Er.shadowBias=An.shadow.bias,Er.shadowRadius=An.shadow.radius,Er.shadowMapSize=An.shadow.mapSize),C.pointShadowMap[Na]=nr,void 0===C.pointShadowMatrix[Na]&&(C.pointShadowMatrix[Na]=new bs),d.setFromMatrixPosition(An.matrixWorld).negate(),C.pointShadowMatrix[Na].identity().setPosition(d),C.point[Na++]=Er;else if(An.isHemisphereLight){var Er;(Er=$e.get(An)).direction.setFromMatrixPosition(An.matrixWorld),Er.direction.transformDirection(to),Er.direction.normalize(),Er.skyColor.copy(An.color).multiplyScalar(Vi),Er.groundColor.copy(An.groundColor).multiplyScalar(Vi),C.hemi[Jo++]=Er}C.ambient[0]=ir,C.ambient[1]=cr,C.ambient[2]=ai,C.directional.length=fo,C.spot.length=qo,C.rectArea.length=Lo,C.point.length=Na,C.hemi.length=Jo,C.hash=fo+","+Na+","+qo+","+Lo+","+Jo+","+C.shadows.length}(se,Ct),Zn&&Hi.endShadows(),A.calls=0,A.vertices=0,A.faces=0,A.points=0,void 0===gn&&(gn=null),this.setRenderTarget(gn);var An=Ze.background;if(null===An?Q.buffers.color.setClear(fi.r,fi.g,fi.b,Jt,H):An&&An.isColor&&(Q.buffers.color.setClear(An.r,An.g,An.b,1,H),Cn=!0),(this.autoClear||Cn)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),An&&An.isCubeTexture?(St.projectionMatrix.copy(Ct.projectionMatrix),St.matrixWorld.extractRotation(Ct.matrixWorld),St.matrixWorldInverse.getInverse(St.matrixWorld),Tt.material.uniforms.tCube.value=An,Tt.modelViewMatrix.multiplyMatrices(St.matrixWorldInverse,Tt.matrixWorld),_e.update(Tt),ut.renderBufferDirect(St,null,Tt.geometry,Tt.material,Tt,null)):An&&An.isTexture&&(Gt.material.map=An,_e.update(Gt),ut.renderBufferDirect(rt,null,Gt.geometry,Gt.material,Gt,null)),Ze.overrideMaterial){var ir=Ze.overrideMaterial;kn(ve,Ze,Ct,ir),kn(Ue,Ze,Ct,ir)}else Q.setBlending($),kn(ve,Ze,Ct),kn(Ue,Ze,Ct);dt.render(Ze,Ct),Qt.render(Ze,Ct,Nn),gn&&me.updateRenderTargetMipmap(gn),Q.setDepthTest(!0),Q.setDepthWrite(!0),Q.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(Ze,Ct){Q.setCullFace(Ze),Q.setFlipSided(Ct===j)},this.allocTextureUnit=function Qn(){var Ze=Mi;return Ze>=q.maxTextures&&console.warn("WebGLRenderer: trying to use "+Ze+" texture units while this GPU supports only "+q.maxTextures),Mi+=1,Ze},this.setTexture2D=(Ze=!1,function(gn,Cn){gn&&gn.isWebGLRenderTarget&&(Ze||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Ze=!0),gn=gn.texture),me.setTexture2D(gn,Cn)}),this.setTexture=function(){var Ze=!1;return function(gn,Cn){Ze||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),Ze=!0),me.setTexture2D(gn,Cn)}}(),this.setTextureCube=function(){var Ze=!1;return function(gn,Cn){gn&&gn.isWebGLRenderTargetCube&&(Ze||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Ze=!0),gn=gn.texture),gn&&gn.isCubeTexture||Array.isArray(gn.image)&&6===gn.image.length?me.setTextureCube(gn,Cn):me.setTextureCubeDynamic(gn,Cn)}}(),this.getCurrentRenderTarget=function(){return Mt},this.setRenderTarget=function(Ze){Mt=Ze,Ze&&void 0===fe.get(Ze).__webglFramebuffer&&me.setupRenderTarget(Ze);var gn,Ct=Ze&&Ze.isWebGLRenderTargetCube;if(Ze){var Cn=fe.get(Ze);gn=Ct?Cn.__webglFramebuffer[Ze.activeCubeFace]:Cn.__webglFramebuffer,an.copy(Ze.scissor),bn=Ze.scissorTest,Nn.copy(Ze.viewport)}else gn=null,an.copy(Di).multiplyScalar(si),bn=xi,Nn.copy(mi).multiplyScalar(si);if(nn!==gn&&(E.bindFramebuffer(E.FRAMEBUFFER,gn),nn=gn),Q.scissor(an),Q.setScissorTest(bn),Q.viewport(Nn),Ct){var An=fe.get(Ze.texture);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+Ze.activeCubeFace,An.__webglTexture,Ze.activeMipMapLevel)}},this.readRenderTargetPixels=function(Ze,Ct,gn,Cn,An,ir){if(!1!==(Ze&&Ze.isWebGLRenderTarget)){var cr=fe.get(Ze).__webglFramebuffer;if(cr){var ai=!1;cr!==nn&&(E.bindFramebuffer(E.FRAMEBUFFER,cr),ai=!0);try{var Vr=Ze.texture,Vi=Vr.format,Ui=Vr.type;if(Vi!==rl&&Ri(Vi)!==E.getParameter(E.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(Ui===ff||Ri(Ui)===E.getParameter(E.IMPLEMENTATION_COLOR_READ_TYPE)||Ui===kd&&(P.get("OES_texture_float")||P.get("WEBGL_color_buffer_float"))||Ui===Ic&&P.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");E.checkFramebufferStatus(E.FRAMEBUFFER)===E.FRAMEBUFFER_COMPLETE?Ct>=0&&Ct<=Ze.width-Cn&&gn>=0&&gn<=Ze.height-An&&E.readPixels(Ct,gn,Cn,An,Ri(Vi),Ri(Ui),ir):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{ai&&E.bindFramebuffer(E.FRAMEBUFFER,nn)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function Nh(a,h){this.name="",this.color=new Kr(a),this.density=void 0!==h?h:25e-5}function kc(a,h,g){this.name="",this.color=new Kr(a),this.near=void 0!==h?h:1,this.far=void 0!==g?g:1e3}function Bh(){Cr.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function dh(a,h,g,y,x){Cr.call(this),this.lensFlares=[],this.positionScreen=new on,this.customUpdateCallback=void 0,void 0!==a&&this.add(a,h,g,y,x)}function zu(a){Zs.call(this),this.type="SpriteMaterial",this.color=new Kr(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(a)}function mu(a){Cr.call(this),this.type="Sprite",this.material=void 0!==a?a:new zu}function la(){Cr.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function cd(a,h,g){if(this.useVertexTexture=void 0===g||g,this.identityMatrix=new bs,this.bones=(a=a||[]).slice(0),this.useVertexTexture){var y=Math.sqrt(4*this.bones.length);y=xs.nextPowerOfTwo(Math.ceil(y)),y=Math.max(y,4),this.boneTextureWidth=y,this.boneTextureHeight=y,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new rs(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,rl,kd)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===h)this.calculateInverses();else if(this.bones.length===h.length)this.boneInverses=h.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var x=0,D=this.bones.length;x<D;x++)this.boneInverses.push(new bs)}}function Pm(){Cr.call(this),this.type="Bone"}function qg(a,h,g){wa.call(this,a,h),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new bs,this.bindMatrixInverse=new bs;var y=[];if(this.geometry&&void 0!==this.geometry.bones){for(var x,D,F=0,H=this.geometry.bones.length;F<H;++F)D=this.geometry.bones[F],x=new Pm,y.push(x),x.name=D.name,x.position.fromArray(D.pos),x.quaternion.fromArray(D.rotq),void 0!==D.scl&&x.scale.fromArray(D.scl);for(F=0,H=this.geometry.bones.length;F<H;++F)-1!==(D=this.geometry.bones[F]).parent&&null!==D.parent&&void 0!==y[D.parent]?y[D.parent].add(y[F]):this.add(y[F])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new cd(y,void 0,g),this.matrixWorld)}function cl(a){Zs.call(this),this.type="LineBasicMaterial",this.color=new Kr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(a)}function vu(a,h,g){if(1===g)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Co(a,h);Cr.call(this),this.type="Line",this.geometry=void 0!==a?a:new Lr,this.material=void 0!==h?h:new cl({color:16777215*Math.random()})}function Co(a,h){vu.call(this,a,h),this.type="LineSegments"}function Oc(a){Zs.call(this),this.type="PointsMaterial",this.color=new Kr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(a)}function $s(a,h){Cr.call(this),this.type="Points",this.geometry=void 0!==a?a:new Lr,this.material=void 0!==h?h:new Oc({color:16777215*Math.random()})}function lp(){Cr.call(this),this.type="Group"}function cp(a,h,g,y,x,D,F,H,le){Yo.call(this,a,h,g,y,x,D,F,H,le),this.generateMipmaps=!1;var se=this;!function ve(){requestAnimationFrame(ve),a.readyState>=a.HAVE_CURRENT_DATA&&(se.needsUpdate=!0)}()}function Fc(a,h,g,y,x,D,F,H,le,se,ve,we){Yo.call(this,null,D,F,H,le,se,y,x,ve,we),this.image={width:h,height:g},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}function up(a,h,g,y,x,D,F,H,le){Yo.call(this,a,h,g,y,x,D,F,H,le),this.needsUpdate=!0}function Xg(a,h,g,y,x,D,F,H,le,se){if((se=void 0!==se?se:mt)!==mt&&se!==ct)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===g&&se===mt&&(g=pf),void 0===g&&se===ct&&(g=mf),Yo.call(this,null,y,x,D,F,H,se,g,le),this.image={width:a,height:h},this.magFilter=void 0!==F?F:Xa,this.minFilter=void 0!==H?H:Xa,this.flipY=!1,this.generateMipmaps=!1}function fh(a){Lr.call(this);var h=[0,0],g={};function y(fi,Jt){return fi-Jt}var x=["a","b","c"];if(a&&a.isGeometry){for(var D=a.vertices,F=a.faces,H=0,le=new Uint32Array(6*F.length),se=0,ve=F.length;se<ve;se++)for(var we=F[se],Ue=0;Ue<3;Ue++)h[0]=we[x[Ue]],h[1]=we[x[(Ue+1)%3]],h.sort(y),void 0===g[We=h.toString()]&&(le[2*H]=h[0],le[2*H+1]=h[1],g[We]=!0,H++);var je=new Float32Array(2*H*3);for(se=0,ve=H;se<ve;se++)for(Ue=0;Ue<2;Ue++){var pt=D[le[2*se+Ue]];je[0+(ft=6*se+3*Ue)]=pt.x,je[ft+1]=pt.y,je[ft+2]=pt.z}this.addAttribute("position",new gr(je,3))}else if(a&&a.isBufferGeometry)if(null!==a.index){var ut=a.index.array,Et=(D=a.attributes.position,a.groups);H=0,0===Et.length&&a.addGroup(0,ut.length),le=new Uint32Array(2*ut.length);for(var Mt=0,nn=Et.length;Mt<nn;++Mt)for(var qt=Et[Mt],yn=qt.start,an=(se=yn,yn+qt.count);se<an;se+=3)for(Ue=0;Ue<3;Ue++){var We;h[0]=ut[se+Ue],h[1]=ut[se+(Ue+1)%3],h.sort(y),void 0===g[We=h.toString()]&&(le[2*H]=h[0],le[2*H+1]=h[1],g[We]=!0,H++)}for(je=new Float32Array(2*H*3),se=0,ve=H;se<ve;se++)for(Ue=0;Ue<2;Ue++)je[0+(ft=6*se+3*Ue)]=D.getX(bn=le[2*se+Ue]),je[ft+1]=D.getY(bn),je[ft+2]=D.getZ(bn);this.addAttribute("position",new gr(je,3))}else{var Nn=(H=(D=a.attributes.position.array).length/3)/3;for(je=new Float32Array(2*H*3),se=0,ve=Nn;se<ve;se++)for(Ue=0;Ue<3;Ue++){var ft,bn,Mi=9*se+3*Ue;je[0+(ft=18*se+6*Ue)]=D[Mi],je[ft+1]=D[Mi+1],je[ft+2]=D[Mi+2],je[ft+3]=D[bn=9*se+(Ue+1)%3*3],je[ft+4]=D[bn+1],je[ft+5]=D[bn+2]}this.addAttribute("position",new gr(je,3))}}function Wd(a,h,g){Lr.call(this),this.type="ParametricBufferGeometry",this.parameters={func:a,slices:h,stacks:g};var D,F,H,le,se,y=[],x=[],ve=h+1;for(D=0;D<=g;D++)for(se=D/g,F=0;F<=h;F++)H=a(le=F/h,se),y.push(H.x,H.y,H.z),x.push(le,se);var We,je,pt,we=[];for(D=0;D<g;D++)for(F=0;F<h;F++)je=(D+1)*ve+F+1,we.push(D*ve+F,We=D*ve+F+1,pt=(D+1)*ve+F),we.push(We,je,pt);this.setIndex(new(we.length>65535?Bu:zd)(we,1)),this.addAttribute("position",new ls(y,3)),this.addAttribute("uv",new ls(x,2)),this.computeVertexNormals()}function jd(a,h,g){Ds.call(this),this.type="ParametricGeometry",this.parameters={func:a,slices:h,stacks:g},this.fromBufferGeometry(new Wd(a,h,g)),this.mergeVertices()}function Ql(a,h,g,y){Lr.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:a,indices:h,radius:g,detail:y},g=g||1;var x=[],D=[];function H(ut,Et,Mt,nn){var fn,an,qt=Math.pow(2,nn),yn=[];for(fn=0;fn<=qt;fn++){yn[fn]=[];var bn=ut.clone().lerp(Mt,fn/qt),Nn=Et.clone().lerp(Mt,fn/qt),Mi=qt-fn;for(an=0;an<=Mi;an++)yn[fn][an]=0===an&&fn===qt?bn:bn.clone().lerp(Nn,an/Mi)}for(fn=0;fn<qt;fn++)for(an=0;an<2*(qt-fn)-1;an++){var fi=Math.floor(an/2);an%2==0?(we(yn[fn][fi+1]),we(yn[fn+1][fi]),we(yn[fn][fi])):(we(yn[fn][fi+1]),we(yn[fn+1][fi+1]),we(yn[fn+1][fi]))}}function we(ut){x.push(ut.x,ut.y,ut.z)}function Ue(ut,Et){var Mt=3*ut;Et.x=a[Mt+0],Et.y=a[Mt+1],Et.z=a[Mt+2]}function je(ut,Et,Mt,nn){nn<0&&1===ut.x&&(D[Et]=ut.x-1),0===Mt.x&&0===Mt.z&&(D[Et]=nn/2/Math.PI+.5)}function pt(ut){return Math.atan2(ut.z,-ut.x)}function ft(ut){return Math.atan2(-ut.y,Math.sqrt(ut.x*ut.x+ut.z*ut.z))}(function F(ut){for(var Et=new on,Mt=new on,nn=new on,qt=0;qt<h.length;qt+=3)Ue(h[qt+0],Et),Ue(h[qt+1],Mt),Ue(h[qt+2],nn),H(Et,Mt,nn,ut)})(y=y||0),function le(ut){for(var Et=new on,Mt=0;Mt<x.length;Mt+=3)Et.x=x[Mt+0],Et.y=x[Mt+1],Et.z=x[Mt+2],Et.normalize().multiplyScalar(ut),x[Mt+0]=Et.x,x[Mt+1]=Et.y,x[Mt+2]=Et.z}(g),function se(){for(var ut=new on,Et=0;Et<x.length;Et+=3){ut.x=x[Et+0],ut.y=x[Et+1],ut.z=x[Et+2];var Mt=pt(ut)/2/Math.PI+.5,nn=ft(ut)/Math.PI+.5;D.push(Mt,1-nn)}(function We(){for(var ut=new on,Et=new on,Mt=new on,nn=new on,qt=new er,yn=new er,fn=new er,an=0,bn=0;an<x.length;an+=9,bn+=6){ut.set(x[an+0],x[an+1],x[an+2]),Et.set(x[an+3],x[an+4],x[an+5]),Mt.set(x[an+6],x[an+7],x[an+8]),qt.set(D[bn+0],D[bn+1]),yn.set(D[bn+2],D[bn+3]),fn.set(D[bn+4],D[bn+5]),nn.copy(ut).add(Et).add(Mt).divideScalar(3);var Nn=pt(nn);je(qt,bn+0,ut,Nn),je(yn,bn+2,Et,Nn),je(fn,bn+4,Mt,Nn)}})(),function ve(){for(var ut=0;ut<D.length;ut+=6){var Et=D[ut+0],Mt=D[ut+2],nn=D[ut+4],qt=Math.max(Et,Mt,nn),yn=Math.min(Et,Mt,nn);qt>.9&&yn<.1&&(Et<.2&&(D[ut+0]+=1),Mt<.2&&(D[ut+2]+=1),nn<.2&&(D[ut+4]+=1))}}()}(),this.addAttribute("position",new ls(x,3)),this.addAttribute("normal",new ls(x.slice(),3)),this.addAttribute("uv",new ls(D,2)),this.normalizeNormals(),this.boundingSphere=new Ot(new on,g)}function ul(a,h){Ql.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,h),this.type="TetrahedronBufferGeometry",this.parameters={radius:a,detail:h}}function zh(a,h){Ds.call(this),this.type="TetrahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new ul(a,h)),this.mergeVertices()}function tu(a,h){Ql.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,h),this.type="OctahedronBufferGeometry",this.parameters={radius:a,detail:h}}function ud(a,h){Ds.call(this),this.type="OctahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new tu(a,h)),this.mergeVertices()}function $d(a,h){var g=(1+Math.sqrt(5))/2;Ql.call(this,[-1,g,0,1,g,0,-1,-g,0,1,-g,0,0,-1,g,0,1,g,0,-1,-g,0,1,-g,g,0,-1,g,0,1,-g,0,-1,-g,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,h),this.type="IcosahedronBufferGeometry",this.parameters={radius:a,detail:h}}function hp(a,h){Ds.call(this),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new $d(a,h)),this.mergeVertices()}function ph(a,h){var g=(1+Math.sqrt(5))/2,y=1/g;Ql.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-y,-g,0,-y,g,0,y,-g,0,y,g,-y,-g,0,-y,g,0,y,-g,0,y,g,0,-g,0,-y,g,0,-y,-g,0,y,g,0,y],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,h),this.type="DodecahedronBufferGeometry",this.parameters={radius:a,detail:h}}function Kp(a,h){Ds.call(this),this.type="DodecahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new ph(a,h)),this.mergeVertices()}function jo(a,h,g,y){Ds.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:h,radius:g,detail:y},this.fromBufferGeometry(new Ql(a,h,g,y)),this.mergeVertices()}function qd(a,h,g,y,x){Lr.call(this),this.type="TubeBufferGeometry",this.parameters={path:a,tubularSegments:h,radius:g,radialSegments:y,closed:x},g=g||1,y=y||8;var D=a.computeFrenetFrames(h=h||64,x=x||!1);this.tangents=D.tangents,this.normals=D.normals,this.binormals=D.binormals;var se,ve,F=new on,H=new on,le=new er,we=[],Ue=[],We=[],je=[];function ft(Mt){var nn=a.getPointAt(Mt/h),qt=D.normals[Mt],yn=D.binormals[Mt];for(ve=0;ve<=y;ve++){var fn=ve/y*Math.PI*2,an=Math.sin(fn),bn=-Math.cos(fn);H.x=bn*qt.x+an*yn.x,H.y=bn*qt.y+an*yn.y,H.z=bn*qt.z+an*yn.z,H.normalize(),Ue.push(H.x,H.y,H.z),F.x=nn.x+g*H.x,F.y=nn.y+g*H.y,F.z=nn.z+g*H.z,we.push(F.x,F.y,F.z)}}(function pt(){for(se=0;se<h;se++)ft(se);ft(!1===x?h:0),function Et(){for(se=0;se<=h;se++)for(ve=0;ve<=y;ve++)le.x=se/h,le.y=ve/y,We.push(le.x,le.y)}(),function ut(){for(ve=1;ve<=h;ve++)for(se=1;se<=y;se++){var nn=(y+1)*ve+(se-1),qt=(y+1)*ve+se,yn=(y+1)*(ve-1)+se;je.push((y+1)*(ve-1)+(se-1),nn,yn),je.push(nn,qt,yn)}}()})(),this.setIndex(new(je.length>65535?Bu:zd)(je,1)),this.addAttribute("position",new ls(we,3)),this.addAttribute("normal",new ls(Ue,3)),this.addAttribute("uv",new ls(We,2))}function Vh(a,h,g,y,x,D){Ds.call(this),this.type="TubeGeometry",this.parameters={path:a,tubularSegments:h,radius:g,radialSegments:y,closed:x},void 0!==D&&console.warn("THREE.TubeGeometry: taper has been removed.");var F=new qd(a,h,g,y,x);this.tangents=F.tangents,this.normals=F.normals,this.binormals=F.binormals,this.fromBufferGeometry(F),this.mergeVertices()}function Qa(a,h,g,y,x,D){Lr.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:a,tube:h,tubularSegments:g,radialSegments:y,p:x,q:D},a=a||100,h=h||40,g=Math.floor(g)||64,x=x||2,D=D||3;var Ue,We,F=((y=Math.floor(y)||8)+1)*(g+1),H=y*g*2*3,le=new gr(new(H>65535?Uint32Array:Uint16Array)(H),1),se=new gr(new Float32Array(3*F),3),ve=new gr(new Float32Array(3*F),3),we=new gr(new Float32Array(2*F),2),je=0,pt=0,ft=new on,ut=new on,Et=new er,Mt=new on,nn=new on,qt=new on,yn=new on,fn=new on;for(Ue=0;Ue<=g;++Ue){var an=Ue/g*x*Math.PI*2;for(si(an,x,D,a,Mt),si(an+.01,x,D,a,nn),yn.subVectors(nn,Mt),fn.addVectors(nn,Mt),qt.crossVectors(yn,fn),fn.crossVectors(qt,yn),qt.normalize(),fn.normalize(),We=0;We<=y;++We){var bn=We/y*Math.PI*2,Nn=-h*Math.cos(bn),Mi=h*Math.sin(bn);ft.x=Mt.x+(Nn*fn.x+Mi*qt.x),ft.y=Mt.y+(Nn*fn.y+Mi*qt.y),ft.z=Mt.z+(Nn*fn.z+Mi*qt.z),se.setXYZ(je,ft.x,ft.y,ft.z),ut.subVectors(ft,Mt).normalize(),ve.setXYZ(je,ut.x,ut.y,ut.z),Et.x=Ue/g,Et.y=We/y,we.setXY(je,Et.x,Et.y),je++}}for(We=1;We<=g;We++)for(Ue=1;Ue<=y;Ue++){var Jt=(y+1)*We+(Ue-1),tn=(y+1)*We+Ue,Kn=(y+1)*(We-1)+Ue;le.setX(pt,(y+1)*(We-1)+(Ue-1)),pt++,le.setX(pt,Jt),pt++,le.setX(pt,Kn),pt++,le.setX(pt,Jt),pt++,le.setX(pt,tn),pt++,le.setX(pt,Kn),pt++}function si(Di,xi,mi,ar,Hi){var Zn=Math.cos(Di),qn=Math.sin(Di),f=mi/xi*Di,c=Math.cos(f);Hi.x=ar*(2+c)*.5*Zn,Hi.y=ar*(2+c)*qn*.5,Hi.z=ar*Math.sin(f)*.5}this.setIndex(le),this.addAttribute("position",se),this.addAttribute("normal",ve),this.addAttribute("uv",we)}function hd(a,h,g,y,x,D,F){Ds.call(this),this.type="TorusKnotGeometry",this.parameters={radius:a,tube:h,tubularSegments:g,radialSegments:y,p:x,q:D},void 0!==F&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Qa(a,h,g,y,x,D)),this.mergeVertices()}function Vu(a,h,g,y,x){Lr.call(this),this.type="TorusBufferGeometry",this.parameters={radius:a,tube:h,radialSegments:g,tubularSegments:y,arc:x},a=a||100,h=h||40,g=Math.floor(g)||8,y=Math.floor(y)||6,x=x||2*Math.PI;var ut,Et,D=(g+1)*(y+1),F=g*y*2*3,H=new(F>65535?Uint32Array:Uint16Array)(F),le=new Float32Array(3*D),se=new Float32Array(3*D),ve=new Float32Array(2*D),we=0,Ue=0,We=0,je=new on,pt=new on,ft=new on;for(ut=0;ut<=g;ut++)for(Et=0;Et<=y;Et++){var Mt=Et/y*x,nn=ut/g*Math.PI*2;pt.x=(a+h*Math.cos(nn))*Math.cos(Mt),pt.y=(a+h*Math.cos(nn))*Math.sin(Mt),pt.z=h*Math.sin(nn),le[we]=pt.x,le[we+1]=pt.y,le[we+2]=pt.z,je.x=a*Math.cos(Mt),je.y=a*Math.sin(Mt),ft.subVectors(pt,je).normalize(),se[we]=ft.x,se[we+1]=ft.y,se[we+2]=ft.z,ve[Ue]=Et/y,ve[Ue+1]=ut/g,we+=3,Ue+=2}for(ut=1;ut<=g;ut++)for(Et=1;Et<=y;Et++){var yn=(y+1)*(ut-1)+Et-1,fn=(y+1)*(ut-1)+Et,an=(y+1)*ut+Et;H[We]=(y+1)*ut+Et-1,H[We+1]=yn,H[We+2]=an,H[We+3]=yn,H[We+4]=fn,H[We+5]=an,We+=6}this.setIndex(new gr(H,1)),this.addAttribute("position",new gr(le,3)),this.addAttribute("normal",new gr(se,3)),this.addAttribute("uv",new gr(ve,2))}function Uh(a,h,g,y,x){Ds.call(this),this.type="TorusGeometry",this.parameters={radius:a,tube:h,radialSegments:g,tubularSegments:y,arc:x},this.fromBufferGeometry(new Vu(a,h,g,y,x))}Nh.prototype.isFogExp2=!0,Nh.prototype.clone=function(){return new Nh(this.color.getHex(),this.density)},Nh.prototype.toJSON=function(a){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},kc.prototype.isFog=!0,kc.prototype.clone=function(){return new kc(this.color.getHex(),this.near,this.far)},kc.prototype.toJSON=function(a){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},(Bh.prototype=Object.create(Cr.prototype)).constructor=Bh,Bh.prototype.copy=function(a,h){return Cr.prototype.copy.call(this,a,h),null!==a.background&&(this.background=a.background.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this},Bh.prototype.toJSON=function(a){var h=Cr.prototype.toJSON.call(this,a);return null!==this.background&&(h.object.background=this.background.toJSON(a)),null!==this.fog&&(h.object.fog=this.fog.toJSON()),h},dh.prototype=Object.assign(Object.create(Cr.prototype),{constructor:dh,isLensFlare:!0,copy:function(a){Cr.prototype.copy.call(this,a),this.positionScreen.copy(a.positionScreen),this.customUpdateCallback=a.customUpdateCallback;for(var h=0,g=a.lensFlares.length;h<g;h++)this.lensFlares.push(a.lensFlares[h]);return this},add:function(a,h,g,y,x,D){void 0===h&&(h=-1),void 0===g&&(g=0),void 0===D&&(D=1),void 0===x&&(x=new Kr(16777215)),void 0===y&&(y=re),g=Math.min(g,Math.max(0,g)),this.lensFlares.push({texture:a,size:h,distance:g,x:0,y:0,z:0,scale:1,rotation:0,opacity:D,color:x,blending:y})},updateLensFlares:function(){var a,g,h=this.lensFlares.length,y=2*-this.positionScreen.x,x=2*-this.positionScreen.y;for(a=0;a<h;a++)(g=this.lensFlares[a]).x=this.positionScreen.x+y*g.distance,g.y=this.positionScreen.y+x*g.distance,g.wantedRotation=g.x*Math.PI*.25,g.rotation+=.25*(g.wantedRotation-g.rotation)}}),(zu.prototype=Object.create(Zs.prototype)).constructor=zu,zu.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.rotation=a.rotation,this},mu.prototype=Object.assign(Object.create(Cr.prototype),{constructor:mu,isSprite:!0,raycast:function(){var a=new on;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var x=g.ray.distanceSqToPoint(a);x>this.scale.x*this.scale.y/4||y.push({distance:Math.sqrt(x),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),la.prototype=Object.assign(Object.create(Cr.prototype),{constructor:la,copy:function(a){Cr.prototype.copy.call(this,a,!1);for(var h=a.levels,g=0,y=h.length;g<y;g++){var x=h[g];this.addLevel(x.object.clone(),x.distance)}return this},addLevel:function(a,h){void 0===h&&(h=0),h=Math.abs(h);for(var g=this.levels,y=0;y<g.length&&!(h<g[y].distance);y++);g.splice(y,0,{distance:h,object:a}),this.add(a)},getObjectForDistance:function(a){for(var h=this.levels,g=1,y=h.length;g<y&&!(a<h[g].distance);g++);return h[g-1].object},raycast:function(){var a=new on;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var x=g.ray.origin.distanceTo(a);this.getObjectForDistance(x).raycast(g,y)}}(),update:function(){var a=new on,h=new on;return function(y){var x=this.levels;if(x.length>1){a.setFromMatrixPosition(y.matrixWorld),h.setFromMatrixPosition(this.matrixWorld);var D=a.distanceTo(h);x[0].object.visible=!0;for(var F=1,H=x.length;F<H&&D>=x[F].distance;F++)x[F-1].object.visible=!1,x[F].object.visible=!0;for(;F<H;F++)x[F].object.visible=!1}}}(),toJSON:function(a){var h=Cr.prototype.toJSON.call(this,a);h.object.levels=[];for(var g=this.levels,y=0,x=g.length;y<x;y++){var D=g[y];h.object.levels.push({object:D.object.uuid,distance:D.distance})}return h}}),Object.assign(cd.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,h=this.bones.length;a<h;a++){var g=new bs;this.bones[a]&&g.getInverse(this.bones[a].matrixWorld),this.boneInverses.push(g)}},pose:function(){for(var a,h=0,g=this.bones.length;h<g;h++)(a=this.bones[h])&&a.matrixWorld.getInverse(this.boneInverses[h]);for(h=0,g=this.bones.length;h<g;h++)(a=this.bones[h])&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))},update:function(){var a=new bs;return function(){for(var g=0,y=this.bones.length;g<y;g++)a.multiplyMatrices(this.bones[g]?this.bones[g].matrixWorld:this.identityMatrix,this.boneInverses[g]),a.toArray(this.boneMatrices,16*g);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new cd(this.bones,this.boneInverses,this.useVertexTexture)}}),Pm.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Pm,isBone:!0}),qg.prototype=Object.assign(Object.create(wa.prototype),{constructor:qg,isSkinnedMesh:!0,bind:function(a,h){this.skeleton=a,void 0===h&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),h=this.matrixWorld),this.bindMatrix.copy(h),this.bindMatrixInverse.getInverse(h)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var h=this.geometry.skinWeights[a];(g=1/h.lengthManhattan())!=1/0?h.multiplyScalar(g):h.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var y=new Ko,x=this.geometry.attributes.skinWeight;for(a=0;a<x.count;a++){var g;y.x=x.getX(a),y.y=x.getY(a),y.z=x.getZ(a),y.w=x.getW(a),(g=1/y.lengthManhattan())!=1/0?y.multiplyScalar(g):y.set(1,0,0,0),x.setXYZW(a,y.x,y.y,y.z,y.w)}}},updateMatrixWorld:function(a){wa.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),(cl.prototype=Object.create(Zs.prototype)).constructor=cl,cl.prototype.isLineBasicMaterial=!0,cl.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this},vu.prototype=Object.assign(Object.create(Cr.prototype),{constructor:vu,isLine:!0,raycast:function(){var a=new bs,h=new oa,g=new Ot;return function(x,D){var F=x.linePrecision,H=F*F,le=this.geometry,se=this.matrixWorld;if(null===le.boundingSphere&&le.computeBoundingSphere(),g.copy(le.boundingSphere),g.applyMatrix4(se),!1!==x.ray.intersectsSphere(g)){a.getInverse(se),h.copy(x.ray).applyMatrix4(a);var ve=new on,we=new on,Ue=new on,We=new on,je=this&&this.isLineSegments?2:1;if(le.isBufferGeometry){var pt=le.index,ut=le.attributes.position.array;if(null!==pt)for(var Et=pt.array,Mt=0,nn=Et.length-1;Mt<nn;Mt+=je){var yn=Et[Mt+1];ve.fromArray(ut,3*Et[Mt]),we.fromArray(ut,3*yn),h.distanceSqToSegment(ve,we,We,Ue)>H||(We.applyMatrix4(this.matrixWorld),(an=x.ray.origin.distanceTo(We))<x.near||an>x.far||D.push({distance:an,point:Ue.clone().applyMatrix4(this.matrixWorld),index:Mt,face:null,faceIndex:null,object:this}))}else for(Mt=0,nn=ut.length/3-1;Mt<nn;Mt+=je)ve.fromArray(ut,3*Mt),we.fromArray(ut,3*Mt+3),h.distanceSqToSegment(ve,we,We,Ue)>H||(We.applyMatrix4(this.matrixWorld),(an=x.ray.origin.distanceTo(We))<x.near||an>x.far||D.push({distance:an,point:Ue.clone().applyMatrix4(this.matrixWorld),index:Mt,face:null,faceIndex:null,object:this}))}else if(le.isGeometry){var bn=le.vertices,Nn=bn.length;for(Mt=0;Mt<Nn-1;Mt+=je){var an;h.distanceSqToSegment(bn[Mt],bn[Mt+1],We,Ue)>H||(We.applyMatrix4(this.matrixWorld),(an=x.ray.origin.distanceTo(We))<x.near||an>x.far||D.push({distance:an,point:Ue.clone().applyMatrix4(this.matrixWorld),index:Mt,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Co.prototype=Object.assign(Object.create(vu.prototype),{constructor:Co,isLineSegments:!0}),(Oc.prototype=Object.create(Zs.prototype)).constructor=Oc,Oc.prototype.isPointsMaterial=!0,Oc.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this},$s.prototype=Object.assign(Object.create(Cr.prototype),{constructor:$s,isPoints:!0,raycast:function(){var a=new bs,h=new oa,g=new Ot;return function(x,D){var F=this,H=this.geometry,le=this.matrixWorld,se=x.params.Points.threshold;if(null===H.boundingSphere&&H.computeBoundingSphere(),g.copy(H.boundingSphere),g.applyMatrix4(le),!1!==x.ray.intersectsSphere(g)){a.getInverse(le),h.copy(x.ray).applyMatrix4(a);var ve=se/((this.scale.x+this.scale.y+this.scale.z)/3),we=ve*ve,Ue=new on;if(H.isBufferGeometry){var je=H.index,ft=H.attributes.position.array;if(null!==je)for(var ut=je.array,Et=0,Mt=ut.length;Et<Mt;Et++){var nn=ut[Et];Ue.fromArray(ft,3*nn),We(Ue,nn)}else{Et=0;for(var qt=ft.length/3;Et<qt;Et++)Ue.fromArray(ft,3*Et),We(Ue,Et)}}else{var yn=H.vertices;for(Et=0,qt=yn.length;Et<qt;Et++)We(yn[Et],Et)}}function We(fn,an){var bn=h.distanceSqToPoint(fn);if(bn<we){var Nn=h.closestPointToPoint(fn);Nn.applyMatrix4(le);var Mi=x.ray.origin.distanceTo(Nn);if(Mi<x.near||Mi>x.far)return;D.push({distance:Mi,distanceToRay:Math.sqrt(bn),point:Nn.clone(),index:an,face:null,object:F})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),lp.prototype=Object.assign(Object.create(Cr.prototype),{constructor:lp}),(cp.prototype=Object.create(Yo.prototype)).constructor=cp,(Fc.prototype=Object.create(Yo.prototype)).constructor=Fc,Fc.prototype.isCompressedTexture=!0,(up.prototype=Object.create(Yo.prototype)).constructor=up,(Xg.prototype=Object.create(Yo.prototype)).constructor=Xg,Xg.prototype.isDepthTexture=!0,(fh.prototype=Object.create(Lr.prototype)).constructor=fh,(Wd.prototype=Object.create(Lr.prototype)).constructor=Wd,(jd.prototype=Object.create(Ds.prototype)).constructor=jd,(Ql.prototype=Object.create(Lr.prototype)).constructor=Ql,(ul.prototype=Object.create(Ql.prototype)).constructor=ul,(zh.prototype=Object.create(Ds.prototype)).constructor=zh,(tu.prototype=Object.create(Ql.prototype)).constructor=tu,(ud.prototype=Object.create(Ds.prototype)).constructor=ud,($d.prototype=Object.create(Ql.prototype)).constructor=$d,(hp.prototype=Object.create(Ds.prototype)).constructor=hp,(ph.prototype=Object.create(Ql.prototype)).constructor=ph,(Kp.prototype=Object.create(Ds.prototype)).constructor=Kp,(jo.prototype=Object.create(Ds.prototype)).constructor=jo,(qd.prototype=Object.create(Lr.prototype)).constructor=qd,(Vh.prototype=Object.create(Ds.prototype)).constructor=Vh,(Qa.prototype=Object.create(Lr.prototype)).constructor=Qa,(hd.prototype=Object.create(Ds.prototype)).constructor=hd,(Vu.prototype=Object.create(Lr.prototype)).constructor=Vu,(Uh.prototype=Object.create(Ds.prototype)).constructor=Uh;var Ra={area:function(a){for(var h=a.length,g=0,y=h-1,x=0;x<h;y=x++)g+=a[y].x*a[x].y-a[x].x*a[y].y;return.5*g},triangulate:function(){function a(h,g,y,x,D,F){var H,le,se,ve,we,Ue,We,je,pt,ft,ut,Et,Mt,nn,qt;if(((ve=h[F[y]].x)-(le=h[F[g]].x))*((We=h[F[x]].y)-(se=h[F[g]].y))-((we=h[F[y]].y)-se)*((Ue=h[F[x]].x)-le)<=0)return!1;for(ft=Ue-ve,ut=We-we,Et=le-Ue,Mt=se-We,nn=ve-le,qt=we-se,H=0;H<D;H++)if(pt=h[F[H]].y,!((je=h[F[H]].x)===le&&pt===se||je===ve&&pt===we||je===Ue&&pt===We)&&ft*(pt-we)-ut*(je-ve)>=-Number.EPSILON&&Et*(pt-We)-Mt*(je-Ue)>=-Number.EPSILON&&nn*(pt-se)-qt*(je-le)>=-Number.EPSILON)return!1;return!0}return function(g,y){var x=g.length;if(x<3)return null;var le,se,ve,D=[],F=[],H=[];if(Ra.area(g)>0)for(se=0;se<x;se++)F[se]=se;else for(se=0;se<x;se++)F[se]=x-1-se;var we=x,Ue=2*we;for(se=we-1;we>2;){if(Ue--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),y?H:D;if(we<=(le=se)&&(le=0),we<=(se=le+1)&&(se=0),we<=(ve=se+1)&&(ve=0),a(g,le,se,ve,we,F)){var ft,ut;for(D.push([g[F[le]],g[F[se]],g[F[ve]]]),H.push([F[le],F[se],F[ve]]),ft=se,ut=se+1;ut<we;ft++,ut++)F[ft]=F[ut];Ue=2*--we}}return y?H:D}}(),triangulateShape:function(a,h){function g(Mt){var nn=Mt.length;nn>2&&Mt[nn-1].equals(Mt[0])&&Mt.pop()}function y(Mt,nn,qt){return Mt.x!==nn.x?Mt.x<nn.x?Mt.x<=qt.x&&qt.x<=nn.x:nn.x<=qt.x&&qt.x<=Mt.x:Mt.y<nn.y?Mt.y<=qt.y&&qt.y<=nn.y:nn.y<=qt.y&&qt.y<=Mt.y}function x(Mt,nn,qt,yn,fn){var an=nn.x-Mt.x,bn=nn.y-Mt.y,Nn=yn.x-qt.x,Mi=yn.y-qt.y,fi=Mt.x-qt.x,Jt=Mt.y-qt.y,tn=bn*Nn-an*Mi,Kn=bn*fi-an*Jt;if(Math.abs(tn)>Number.EPSILON){var si;if(tn>0){if(Kn<0||Kn>tn)return[];if((si=Mi*fi-Nn*Jt)<0||si>tn)return[]}else{if(Kn>0||Kn<tn)return[];if((si=Mi*fi-Nn*Jt)>0||si<tn)return[]}if(0===si)return!fn||0!==Kn&&Kn!==tn?[Mt]:[];if(si===tn)return!fn||0!==Kn&&Kn!==tn?[nn]:[];if(0===Kn)return[qt];if(Kn===tn)return[yn];var Di=si/tn;return[{x:Mt.x+Di*an,y:Mt.y+Di*bn}]}if(0!==Kn||Mi*fi!=Nn*Jt)return[];var ar,Hi,Zn,qn,f,c,d,m,xi=0===an&&0===bn,mi=0===Nn&&0===Mi;return xi&&mi?Mt.x!==qt.x||Mt.y!==qt.y?[]:[Mt]:xi?y(qt,yn,Mt)?[Mt]:[]:mi?y(Mt,nn,qt)?[qt]:[]:(0!==an?(Mt.x<nn.x?(ar=Mt,Zn=Mt.x,Hi=nn,qn=nn.x):(ar=nn,Zn=nn.x,Hi=Mt,qn=Mt.x),qt.x<yn.x?(f=qt,d=qt.x,c=yn,m=yn.x):(f=yn,d=yn.x,c=qt,m=qt.x)):(Mt.y<nn.y?(ar=Mt,Zn=Mt.y,Hi=nn,qn=nn.y):(ar=nn,Zn=nn.y,Hi=Mt,qn=Mt.y),qt.y<yn.y?(f=qt,d=qt.y,c=yn,m=yn.y):(f=yn,d=yn.y,c=qt,m=qt.y)),Zn<=d?qn<d?[]:qn===d?fn?[]:[f]:qn<=m?[f,Hi]:[f,c]:Zn>m?[]:Zn===m?fn?[]:[ar]:qn<=m?[ar,Hi]:[ar,c])}function D(Mt,nn,qt,yn){var fn=nn.x-Mt.x,an=nn.y-Mt.y,bn=qt.x-Mt.x,Nn=qt.y-Mt.y,Mi=yn.x-Mt.x,fi=yn.y-Mt.y,Jt=fn*Nn-an*bn,tn=fn*fi-an*Mi;if(Math.abs(Jt)>Number.EPSILON){var Kn=Mi*Nn-fi*bn;return Jt>0?tn>=0&&Kn>=0:tn>=0||Kn>=0}return tn>0}g(a),h.forEach(g);for(var H,le,se,ve,we,Ue,We={},je=a.concat(),pt=0,ft=h.length;pt<ft;pt++)Array.prototype.push.apply(je,h[pt]);for(H=0,le=je.length;H<le;H++)void 0!==We[we=je[H].x+":"+je[H].y]&&console.warn("THREE.ShapeUtils: Duplicate point",we,H),We[we]=H;var ut=function F(Mt,nn){var yn,qt=Mt.concat();function fn(m,_){var C=qt.length-1,A=m-1;A<0&&(A=C);var E=m+1;E>C&&(E=0);var B=D(qt[m],qt[A],qt[E],yn[_]);if(!B)return!1;var P=yn.length-1,q=_-1;q<0&&(q=P);var Q=_+1;return Q>P&&(Q=0),!!(B=D(yn[_],yn[q],yn[Q],qt[m]))}function an(m,_){var C,A;for(C=0;C<qt.length;C++)if(A=C+1,x(m,_,qt[C],qt[A%=qt.length],!0).length>0)return!0;return!1}var bn=[];function Nn(m,_){var C,A,E,B;for(C=0;C<bn.length;C++)for(A=nn[bn[C]],E=0;E<A.length;E++)if(B=E+1,x(m,_,A[E],A[B%=A.length],!0).length>0)return!0;return!1}for(var Mi,fi,Jt,tn,Kn,si,xi,mi,ar,Hi,Di=[],Zn=0,qn=nn.length;Zn<qn;Zn++)bn.push(Zn);for(var f=0,c=2*bn.length;bn.length>0;){if(--c<0){console.log("Infinite Loop! Holes left:"+bn.length+", Probably Hole outside Shape!");break}for(fi=f;fi<qt.length;fi++){for(Jt=qt[fi],Mi=-1,Zn=0;Zn<bn.length;Zn++)if(void 0===Di[si=Jt.x+":"+Jt.y+":"+(Kn=bn[Zn])]){yn=nn[Kn];for(var d=0;d<yn.length;d++)if(tn=yn[d],fn(fi,d)&&!an(Jt,tn)&&!Nn(Jt,tn)){Mi=d,bn.splice(Zn,1),xi=qt.slice(0,fi+1),mi=qt.slice(fi),ar=yn.slice(Mi),Hi=yn.slice(0,Mi+1),qt=xi.concat(ar).concat(Hi).concat(mi),f=fi;break}if(Mi>=0)break;Di[si]=!0}if(Mi>=0)break}}return qt}(a,h),Et=Ra.triangulate(ut,!1);for(H=0,le=Et.length;H<le;H++)for(ve=Et[H],se=0;se<3;se++)void 0!==(Ue=We[we=ve[se].x+":"+ve[se].y])&&(ve[se]=Ue);return Et.concat()},isClockWise:function(a){return Ra.area(a)<0},b2:function(x,D,F,H){return function a(y,x){var D=1-y;return D*D*x}(x,D)+function h(y,x){return 2*(1-y)*y*x}(x,F)+function g(y,x){return y*y*x}(x,H)},b3:function(D,F,H,le,se){return function a(x,D){var F=1-x;return F*F*F*D}(D,F)+function h(x,D){var F=1-x;return 3*F*F*x*D}(D,H)+function g(x,D){return 3*(1-x)*x*x*D}(D,le)+function y(x,D){return x*x*x*D}(D,se)}};function nu(a,h){typeof a>"u"?a=[]:(Ds.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,h),this.computeFaceNormals())}function dd(a,h){var g=(h=h||{}).font;if(!1===(g&&g.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ds;var y=g.generateShapes(a,h.size,h.curveSegments);h.amount=void 0!==h.height?h.height:50,void 0===h.bevelThickness&&(h.bevelThickness=10),void 0===h.bevelSize&&(h.bevelSize=8),void 0===h.bevelEnabled&&(h.bevelEnabled=!1),nu.call(this,y,h),this.type="TextGeometry"}function ca(a,h,g,y,x,D,F){Lr.call(this),this.type="SphereBufferGeometry",this.parameters={radius:a,widthSegments:h,heightSegments:g,phiStart:y,phiLength:x,thetaStart:D,thetaLength:F},a=a||50,h=Math.max(3,Math.floor(h)||8),g=Math.max(2,Math.floor(g)||6),y=void 0!==y?y:0,x=void 0!==x?x:2*Math.PI;for(var H=(D=void 0!==D?D:0)+(F=void 0!==F?F:Math.PI),le=(h+1)*(g+1),se=new gr(new Float32Array(3*le),3),ve=new gr(new Float32Array(3*le),3),we=new gr(new Float32Array(2*le),2),Ue=0,We=[],je=new on,pt=0;pt<=g;pt++){for(var ft=[],ut=pt/g,Et=0;Et<=h;Et++){var Mt=Et/h,nn=-a*Math.cos(y+Mt*x)*Math.sin(D+ut*F),qt=a*Math.cos(D+ut*F),yn=a*Math.sin(y+Mt*x)*Math.sin(D+ut*F);je.set(nn,qt,yn).normalize(),se.setXYZ(Ue,nn,qt,yn),ve.setXYZ(Ue,je.x,je.y,je.z),we.setXY(Ue,Mt,1-ut),ft.push(Ue),Ue++}We.push(ft)}var fn=[];for(pt=0;pt<g;pt++)for(Et=0;Et<h;Et++){var bn=We[pt][Et],Nn=We[pt+1][Et],Mi=We[pt+1][Et+1];(0!==pt||D>0)&&fn.push(We[pt][Et+1],bn,Mi),(pt!==g-1||H<Math.PI)&&fn.push(bn,Nn,Mi)}this.setIndex(new(se.count>65535?Bu:zd)(fn,1)),this.addAttribute("position",se),this.addAttribute("normal",ve),this.addAttribute("uv",we),this.boundingSphere=new Ot(new on,a)}function $o(a,h,g,y,x,D,F){Ds.call(this),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:h,heightSegments:g,phiStart:y,phiLength:x,thetaStart:D,thetaLength:F},this.fromBufferGeometry(new ca(a,h,g,y,x,D,F))}function Bs(a,h,g,y,x,D){Lr.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:a,outerRadius:h,thetaSegments:g,phiSegments:y,thetaStart:x,thetaLength:D},a=a||20,h=h||50,x=void 0!==x?x:0,D=void 0!==D?D:2*Math.PI;var je,Mt,nn,F=((g=void 0!==g?Math.max(3,g):8)+1)*((y=void 0!==y?Math.max(1,y):1)+1),H=g*y*2*3,le=new gr(new(H>65535?Uint32Array:Uint16Array)(H),1),se=new gr(new Float32Array(3*F),3),ve=new gr(new Float32Array(3*F),3),we=new gr(new Float32Array(2*F),2),Ue=0,We=0,pt=a,ft=(h-a)/y,ut=new on,Et=new er;for(Mt=0;Mt<=y;Mt++){for(nn=0;nn<=g;nn++)je=x+nn/g*D,ut.x=pt*Math.cos(je),ut.y=pt*Math.sin(je),se.setXYZ(Ue,ut.x,ut.y,ut.z),ve.setXYZ(Ue,0,0,1),Et.x=(ut.x/h+1)/2,Et.y=(ut.y/h+1)/2,we.setXY(Ue,Et.x,Et.y),Ue++;pt+=ft}for(Mt=0;Mt<y;Mt++){var qt=Mt*(g+1);for(nn=0;nn<g;nn++){var yn=je=nn+qt,fn=je+g+1,an=je+g+2,bn=je+1;le.setX(We,yn),We++,le.setX(We,fn),We++,le.setX(We,an),We++,le.setX(We,yn),We++,le.setX(We,an),We++,le.setX(We,bn),We++}}this.setIndex(le),this.addAttribute("position",se),this.addAttribute("normal",ve),this.addAttribute("uv",we)}function rr(a,h,g,y,x,D){Ds.call(this),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:h,thetaSegments:g,phiSegments:y,thetaStart:x,thetaLength:D},this.fromBufferGeometry(new Bs(a,h,g,y,x,D))}function km(a,h,g,y){Ds.call(this),this.type="PlaneGeometry",this.parameters={width:a,height:h,widthSegments:g,heightSegments:y},this.fromBufferGeometry(new aa(a,h,g,y))}function wo(a,h,g,y){Lr.call(this),this.type="LatheBufferGeometry",this.parameters={points:a,segments:h,phiStart:g,phiLength:y},h=Math.floor(h)||12,g=g||0,y=y||2*Math.PI,y=xs.clamp(y,0,2*Math.PI);var we,pt,ft,x=(h+1)*a.length,D=h*a.length*2*3,F=new gr(new(D>65535?Uint32Array:Uint16Array)(D),1),H=new gr(new Float32Array(3*x),3),le=new gr(new Float32Array(2*x),2),se=0,ve=0,Ue=1/h,We=new on,je=new er;for(pt=0;pt<=h;pt++){var ut=g+pt*Ue*y,Et=Math.sin(ut),Mt=Math.cos(ut);for(ft=0;ft<=a.length-1;ft++)We.x=a[ft].x*Et,We.y=a[ft].y,We.z=a[ft].x*Mt,H.setXYZ(se,We.x,We.y,We.z),je.x=pt/h,je.y=ft/(a.length-1),le.setXY(se,je.x,je.y),se++}for(pt=0;pt<h;pt++)for(ft=0;ft<a.length-1;ft++){var qt=(we=ft+pt*a.length)+a.length,yn=we+a.length+1,fn=we+1;F.setX(ve,we),ve++,F.setX(ve,qt),ve++,F.setX(ve,fn),ve++,F.setX(ve,qt),ve++,F.setX(ve,yn),ve++,F.setX(ve,fn),ve++}if(this.setIndex(F),this.addAttribute("position",H),this.addAttribute("uv",le),this.computeVertexNormals(),y===2*Math.PI){var an=this.attributes.normal.array,bn=new on,Nn=new on,Mi=new on;for(we=h*a.length*3,pt=0,ft=0;pt<a.length;pt++,ft+=3)bn.x=an[ft+0],bn.y=an[ft+1],bn.z=an[ft+2],Nn.x=an[we+ft+0],Nn.y=an[we+ft+1],Nn.z=an[we+ft+2],Mi.addVectors(bn,Nn).normalize(),an[ft+0]=an[we+ft+0]=Mi.x,an[ft+1]=an[we+ft+1]=Mi.y,an[ft+2]=an[we+ft+2]=Mi.z}}function Ef(a,h,g,y){Ds.call(this),this.type="LatheGeometry",this.parameters={points:a,segments:h,phiStart:g,phiLength:y},this.fromBufferGeometry(new wo(a,h,g,y)),this.mergeVertices()}function Zp(a,h){Lr.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:a,curveSegments:h},h=h||12;var g=[],y=[],x=[],D=[],F=0,H=0;if(!1===Array.isArray(a))se(a);else for(var le=0;le<a.length;le++)se(a[le]),this.addGroup(F,H,le),F+=H,H=0;function se(ve){var we,Ue,We,je=g.length/3,pt=ve.extractPoints(h),ft=pt.shape,ut=pt.holes;if(!1===Ra.isClockWise(ft))for(ft=ft.reverse(),we=0,Ue=ut.length;we<Ue;we++)!0===Ra.isClockWise(We=ut[we])&&(ut[we]=We.reverse());var Et=Ra.triangulateShape(ft,ut);for(we=0,Ue=ut.length;we<Ue;we++)ft=ft.concat(We=ut[we]);for(we=0,Ue=ft.length;we<Ue;we++){var Mt=ft[we];g.push(Mt.x,Mt.y,0),y.push(0,0,1),x.push(Mt.x,Mt.y)}for(we=0,Ue=Et.length;we<Ue;we++){var nn=Et[we];D.push(nn[0]+je,nn[1]+je,nn[2]+je),H+=3}}this.setIndex(new(D.length>65535?Bu:zd)(D,1)),this.addAttribute("position",new ls(g,3)),this.addAttribute("normal",new ls(y,3)),this.addAttribute("uv",new ls(x,2))}function Qp(a,h){Ds.call(this),this.type="ShapeGeometry","object"==typeof h&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),h=h.curveSegments),this.parameters={shapes:a,curveSegments:h},this.fromBufferGeometry(new Zp(a,h)),this.mergeVertices()}function _l(a,h){Lr.call(this),h=void 0!==h?h:1;var g=Math.cos(xs.DEG2RAD*h),y=[0,0],x={};function D(Et,Mt){return Et-Mt}var H,F=["a","b","c"];a.isBufferGeometry?(H=new Ds).fromBufferGeometry(a):H=a.clone(),H.mergeVertices(),H.computeFaceNormals();for(var le=H.vertices,se=H.faces,ve=0,we=se.length;ve<we;ve++)for(var Ue=se[ve],We=0;We<3;We++)y[0]=Ue[F[We]],y[1]=Ue[F[(We+1)%3]],y.sort(D),void 0===x[je=y.toString()]?x[je]={vert1:y[0],vert2:y[1],face1:ve,face2:void 0}:x[je].face2=ve;var pt=[];for(var je in x){var ft=x[je];if(void 0===ft.face2||se[ft.face1].normal.dot(se[ft.face2].normal)<=g){var ut=le[ft.vert1];pt.push(ut.x),pt.push(ut.y),pt.push(ut.z),pt.push((ut=le[ft.vert2]).x),pt.push(ut.y),pt.push(ut.z)}}this.addAttribute("position",new ls(pt,3))}function Tf(a,h,g,y,x,D,F,H){Lr.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:a,radiusBottom:h,height:g,radialSegments:y,heightSegments:x,openEnded:D,thetaStart:F,thetaLength:H};var le=this;a=void 0!==a?a:20,h=void 0!==h?h:20,g=void 0!==g?g:100,y=Math.floor(y)||8,x=Math.floor(x)||1,D=void 0!==D&&D,F=void 0!==F?F:0,H=void 0!==H?H:2*Math.PI;var se=0;!1===D&&(a>0&&se++,h>0&&se++);var ve=function qt(){var bn=(y+1)*(x+1);return!1===D&&(bn+=(y+1)*se+y*se),bn}(),we=function yn(){var bn=y*x*2*3;return!1===D&&(bn+=y*se*3),bn}(),Ue=new gr(new(we>65535?Uint32Array:Uint16Array)(we),1),We=new gr(new Float32Array(3*ve),3),je=new gr(new Float32Array(3*ve),3),pt=new gr(new Float32Array(2*ve),2),ft=0,ut=0,Et=[],Mt=g/2,nn=0;function an(bn){var Nn,Mi,fi,Jt=new er,tn=new on,Kn=0,si=!0===bn?a:h,Di=!0===bn?1:-1;for(Mi=ft,Nn=1;Nn<=y;Nn++)We.setXYZ(ft,0,Mt*Di,0),je.setXYZ(ft,0,Di,0),Jt.x=.5,Jt.y=.5,pt.setXY(ft,Jt.x,Jt.y),ft++;for(fi=ft,Nn=0;Nn<=y;Nn++){var mi=Nn/y*H+F,ar=Math.cos(mi),Hi=Math.sin(mi);tn.x=si*Hi,tn.y=Mt*Di,tn.z=si*ar,We.setXYZ(ft,tn.x,tn.y,tn.z),je.setXYZ(ft,0,Di,0),Jt.x=.5*ar+.5,Jt.y=.5*Hi*Di+.5,pt.setXY(ft,Jt.x,Jt.y),ft++}for(Nn=0;Nn<y;Nn++){var Zn=Mi+Nn,qn=fi+Nn;!0===bn?(Ue.setX(ut,qn),ut++,Ue.setX(ut,qn+1),ut++,Ue.setX(ut,Zn),ut++):(Ue.setX(ut,qn+1),ut++,Ue.setX(ut,qn),ut++,Ue.setX(ut,Zn),ut++),Kn+=3}le.addGroup(nn,Kn,!0===bn?1:2),nn+=Kn}(function fn(){var bn,Nn,Mi=new on,fi=new on,Jt=0,tn=(h-a)/g;for(Nn=0;Nn<=x;Nn++){var Kn=[],si=Nn/x,Di=si*(h-a)+a;for(bn=0;bn<=y;bn++){var xi=bn/y,mi=xi*H+F,ar=Math.sin(mi),Hi=Math.cos(mi);fi.x=Di*ar,fi.y=-si*g+Mt,fi.z=Di*Hi,We.setXYZ(ft,fi.x,fi.y,fi.z),Mi.set(ar,tn,Hi).normalize(),je.setXYZ(ft,Mi.x,Mi.y,Mi.z),pt.setXY(ft,xi,1-si),Kn.push(ft),ft++}Et.push(Kn)}for(bn=0;bn<y;bn++)for(Nn=0;Nn<x;Nn++){var qn=Et[Nn+1][bn],f=Et[Nn+1][bn+1],c=Et[Nn][bn+1];Ue.setX(ut,Et[Nn][bn]),ut++,Ue.setX(ut,qn),ut++,Ue.setX(ut,c),ut++,Ue.setX(ut,qn),ut++,Ue.setX(ut,f),ut++,Ue.setX(ut,c),ut++,Jt+=6}le.addGroup(nn,Jt,0),nn+=Jt})(),!1===D&&(a>0&&an(!0),h>0&&an(!1)),this.setIndex(Ue),this.addAttribute("position",We),this.addAttribute("normal",je),this.addAttribute("uv",pt)}function Jl(a,h,g,y,x,D,F,H){Ds.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:a,radiusBottom:h,height:g,radialSegments:y,heightSegments:x,openEnded:D,thetaStart:F,thetaLength:H},this.fromBufferGeometry(new Tf(a,h,g,y,x,D,F,H)),this.mergeVertices()}function Jp(a,h,g,y,x,D,F){Jl.call(this,0,a,h,g,y,x,D,F),this.type="ConeGeometry",this.parameters={radius:a,height:h,radialSegments:g,heightSegments:y,openEnded:x,thetaStart:D,thetaLength:F}}function eg(a,h,g,y,x,D,F){Tf.call(this,0,a,h,g,y,x,D,F),this.type="ConeBufferGeometry",this.parameters={radius:a,height:h,radialSegments:g,heightSegments:y,openEnded:x,thetaStart:D,thetaLength:F}}function Pa(a,h,g,y){Lr.call(this),this.type="CircleBufferGeometry",this.parameters={radius:a,segments:h,thetaStart:g,thetaLength:y},a=a||50,h=void 0!==h?Math.max(3,h):8,g=void 0!==g?g:0,y=void 0!==y?y:2*Math.PI;var x=h+2,D=new Float32Array(3*x),F=new Float32Array(3*x),H=new Float32Array(2*x);F[2]=1,H[0]=.5,H[1]=.5;for(var le=0,se=3,ve=2;le<=h;le++,se+=3,ve+=2){var we=g+le/h*y;D[se]=a*Math.cos(we),D[se+1]=a*Math.sin(we),F[se+2]=1,H[ve]=(D[se]/a+1)/2,H[ve+1]=(D[se+1]/a+1)/2}var Ue=[];for(se=1;se<=h;se++)Ue.push(se,se+1,0);this.setIndex(new gr(new Uint16Array(Ue),1)),this.addAttribute("position",new gr(D,3)),this.addAttribute("normal",new gr(F,3)),this.addAttribute("uv",new gr(H,2)),this.boundingSphere=new Ot(new on,a)}function Bl(a,h,g,y){Ds.call(this),this.type="CircleGeometry",this.parameters={radius:a,segments:h,thetaStart:g,thetaLength:y},this.fromBufferGeometry(new Pa(a,h,g,y))}function Il(a,h,g,y,x,D){Ds.call(this),this.type="BoxGeometry",this.parameters={width:a,height:h,depth:g,widthSegments:y,heightSegments:x,depthSegments:D},this.fromBufferGeometry(new Nl(a,h,g,y,x,D)),this.mergeVertices()}(nu.prototype=Object.create(Ds.prototype)).constructor=nu,nu.prototype.addShapeList=function(a,h){for(var g=a.length,y=0;y<g;y++)this.addShape(a[y],h)},nu.prototype.addShape=function(a,h){var ve,We,je,pt,ft,g=void 0!==h.amount?h.amount:100,y=void 0!==h.bevelThickness?h.bevelThickness:6,x=void 0!==h.bevelSize?h.bevelSize:y-2,D=void 0!==h.bevelSegments?h.bevelSegments:3,F=void 0===h.bevelEnabled||h.bevelEnabled,H=void 0!==h.curveSegments?h.curveSegments:12,le=void 0!==h.steps?h.steps:1,se=h.extrudePath,we=!1,Ue=void 0!==h.UVGenerator?h.UVGenerator:nu.WorldUVGenerator;se&&(ve=se.getSpacedPoints(le),we=!0,F=!1,We=void 0!==h.frames?h.frames:se.computeFrenetFrames(le,!1),je=new on,pt=new on,ft=new on),F||(D=0,y=0,x=0);var ut,Et,Mt,nn=this,qt=this.vertices.length,yn=a.extractPoints(H),fn=yn.shape,an=yn.holes,bn=!Ra.isClockWise(fn);if(bn){for(fn=fn.reverse(),Et=0,Mt=an.length;Et<Mt;Et++)Ra.isClockWise(ut=an[Et])&&(an[Et]=ut.reverse());bn=!1}var Nn=Ra.triangulateShape(fn,an),Mi=fn;for(Et=0,Mt=an.length;Et<Mt;Et++)fn=fn.concat(ut=an[Et]);function fi(me,_e,Pe){return _e||console.error("THREE.ExtrudeGeometry: vec does not exist"),_e.clone().multiplyScalar(Pe).add(me)}var Jt,tn,Kn,si,Di,mi,xi=fn.length,ar=Nn.length;function Hi(me,_e,Pe){var $e,Ke,ht=1,rt=me.x-_e.x,St=me.y-_e.y,Gt=Pe.x-me.x,Wt=Pe.y-me.y,Tt=rt*rt+St*St;if(Math.abs(rt*Wt-St*Gt)>Number.EPSILON){var Pt=Math.sqrt(Tt),Zt=Math.sqrt(Gt*Gt+Wt*Wt),Kt=_e.x-St/Pt,dt=_e.y+rt/Pt,xn=((Pe.x-Wt/Zt-Kt)*Wt-(Pe.y+Gt/Zt-dt)*Gt)/(rt*Wt-St*Gt),sn=($e=Kt+rt*xn-me.x)*$e+(Ke=dt+St*xn-me.y)*Ke;if(sn<=2)return new er($e,Ke);ht=Math.sqrt(sn/2)}else{var vn=!1;rt>Number.EPSILON?Gt>Number.EPSILON&&(vn=!0):rt<-Number.EPSILON?Gt<-Number.EPSILON&&(vn=!0):Math.sign(St)===Math.sign(Wt)&&(vn=!0),vn?($e=-St,Ke=rt,ht=Math.sqrt(Tt)):($e=rt,Ke=St,ht=Math.sqrt(Tt/2))}return new er($e/ht,Ke/ht)}for(var Zn=[],qn=0,f=Mi.length,c=f-1,d=qn+1;qn<f;qn++,c++,d++)c===f&&(c=0),d===f&&(d=0),Zn[qn]=Hi(Mi[qn],Mi[c],Mi[d]);var _,A,m=[],C=Zn.concat();for(Et=0,Mt=an.length;Et<Mt;Et++){for(_=[],c=(f=(ut=an[Et]).length)-1,d=1+(qn=0);qn<f;qn++,c++,d++)c===f&&(c=0),d===f&&(d=0),_[qn]=Hi(ut[qn],ut[c],ut[d]);m.push(_),C=C.concat(_)}for(Jt=0;Jt<D;Jt++){for(Kn=Jt/D,si=y*Math.cos(Kn*Math.PI/2),tn=x*Math.sin(Kn*Math.PI/2),qn=0,f=Mi.length;qn<f;qn++)q((Di=fi(Mi[qn],Zn[qn],tn)).x,Di.y,-si);for(Et=0,Mt=an.length;Et<Mt;Et++)for(_=m[Et],qn=0,f=(ut=an[Et]).length;qn<f;qn++)q((Di=fi(ut[qn],_[qn],tn)).x,Di.y,-si)}for(tn=x,qn=0;qn<xi;qn++)Di=F?fi(fn[qn],C[qn],tn):fn[qn],we?(pt.copy(We.normals[0]).multiplyScalar(Di.x),je.copy(We.binormals[0]).multiplyScalar(Di.y),ft.copy(ve[0]).add(pt).add(je),q(ft.x,ft.y,ft.z)):q(Di.x,Di.y,0);for(A=1;A<=le;A++)for(qn=0;qn<xi;qn++)Di=F?fi(fn[qn],C[qn],tn):fn[qn],we?(pt.copy(We.normals[A]).multiplyScalar(Di.x),je.copy(We.binormals[A]).multiplyScalar(Di.y),ft.copy(ve[A]).add(pt).add(je),q(ft.x,ft.y,ft.z)):q(Di.x,Di.y,g/le*A);for(Jt=D-1;Jt>=0;Jt--){for(Kn=Jt/D,si=y*Math.cos(Kn*Math.PI/2),tn=x*Math.sin(Kn*Math.PI/2),qn=0,f=Mi.length;qn<f;qn++)q((Di=fi(Mi[qn],Zn[qn],tn)).x,Di.y,g+si);for(Et=0,Mt=an.length;Et<Mt;Et++)for(_=m[Et],qn=0,f=(ut=an[Et]).length;qn<f;qn++)Di=fi(ut[qn],_[qn],tn),we?q(Di.x,Di.y+ve[le-1].y,ve[le-1].x+si):q(Di.x,Di.y,g+si)}function P(me,_e){var Pe,$e;for(qn=me.length;--qn>=0;){Pe=qn,($e=qn-1)<0&&($e=me.length-1);var Ke=0,ht=le+2*D;for(Ke=0;Ke<ht;Ke++){var rt=xi*Ke,St=xi*(Ke+1);fe(_e+Pe+rt,_e+$e+rt,_e+$e+St,_e+Pe+St)}}}function q(me,_e,Pe){nn.vertices.push(new on(me,_e,Pe))}function Q(me,_e,Pe){nn.faces.push(new Bo(me+=qt,_e+=qt,Pe+=qt,null,null,0));var $e=Ue.generateTopUV(nn,me,_e,Pe);nn.faceVertexUvs[0].push($e)}function fe(me,_e,Pe,$e,Ke,ht,rt,St,Gt){Pe+=qt,nn.faces.push(new Bo(me+=qt,_e+=qt,$e+=qt,null,null,1)),nn.faces.push(new Bo(_e,Pe,$e,null,null,1));var Wt=Ue.generateSideWallUV(nn,me,_e,Pe,$e);nn.faceVertexUvs[0].push([Wt[0],Wt[1],Wt[3]]),nn.faceVertexUvs[0].push([Wt[1],Wt[2],Wt[3]])}(function E(){if(F){var me=0,_e=xi*me;for(qn=0;qn<ar;qn++)Q((mi=Nn[qn])[2]+_e,mi[1]+_e,mi[0]+_e);for(_e=xi*(me=le+2*D),qn=0;qn<ar;qn++)Q((mi=Nn[qn])[0]+_e,mi[1]+_e,mi[2]+_e)}else{for(qn=0;qn<ar;qn++)Q((mi=Nn[qn])[2],mi[1],mi[0]);for(qn=0;qn<ar;qn++)Q((mi=Nn[qn])[0]+xi*le,mi[1]+xi*le,mi[2]+xi*le)}})(),function B(){var me=0;for(P(Mi,me),me+=Mi.length,Et=0,Mt=an.length;Et<Mt;Et++)P(ut=an[Et],me),me+=ut.length}()},nu.WorldUVGenerator={generateTopUV:function(a,h,g,y){var x=a.vertices,D=x[h],F=x[g],H=x[y];return[new er(D.x,D.y),new er(F.x,F.y),new er(H.x,H.y)]},generateSideWallUV:function(a,h,g,y,x){var D=a.vertices,F=D[h],H=D[g],le=D[y],se=D[x];return Math.abs(F.y-H.y)<.01?[new er(F.x,1-F.z),new er(H.x,1-H.z),new er(le.x,1-le.z),new er(se.x,1-se.z)]:[new er(F.y,1-F.z),new er(H.y,1-H.z),new er(le.y,1-le.z),new er(se.y,1-se.z)]}},(dd.prototype=Object.create(nu.prototype)).constructor=dd,(ca.prototype=Object.create(Lr.prototype)).constructor=ca,($o.prototype=Object.create(Ds.prototype)).constructor=$o,(Bs.prototype=Object.create(Lr.prototype)).constructor=Bs,(rr.prototype=Object.create(Ds.prototype)).constructor=rr,(km.prototype=Object.create(Ds.prototype)).constructor=km,(wo.prototype=Object.create(Lr.prototype)).constructor=wo,(Ef.prototype=Object.create(Ds.prototype)).constructor=Ef,(Zp.prototype=Object.create(Lr.prototype)).constructor=Zp,(Qp.prototype=Object.create(Ds.prototype)).constructor=Qp,(_l.prototype=Object.create(Lr.prototype)).constructor=_l,(Tf.prototype=Object.create(Lr.prototype)).constructor=Tf,(Jl.prototype=Object.create(Ds.prototype)).constructor=Jl,(Jp.prototype=Object.create(Jl.prototype)).constructor=Jp,(eg.prototype=Object.create(Tf.prototype)).constructor=eg,(Pa.prototype=Object.create(Lr.prototype)).constructor=Pa,(Bl.prototype=Object.create(Ds.prototype)).constructor=Bl,(Il.prototype=Object.create(Ds.prototype)).constructor=Il;var Uu=Object.freeze({WireframeGeometry:fh,ParametricGeometry:jd,ParametricBufferGeometry:Wd,TetrahedronGeometry:zh,TetrahedronBufferGeometry:ul,OctahedronGeometry:ud,OctahedronBufferGeometry:tu,IcosahedronGeometry:hp,IcosahedronBufferGeometry:$d,DodecahedronGeometry:Kp,DodecahedronBufferGeometry:ph,PolyhedronGeometry:jo,PolyhedronBufferGeometry:Ql,TubeGeometry:Vh,TubeBufferGeometry:qd,TorusKnotGeometry:hd,TorusKnotBufferGeometry:Qa,TorusGeometry:Uh,TorusBufferGeometry:Vu,TextGeometry:dd,SphereBufferGeometry:ca,SphereGeometry:$o,RingGeometry:rr,RingBufferGeometry:Bs,PlaneBufferGeometry:aa,PlaneGeometry:km,LatheGeometry:Ef,LatheBufferGeometry:wo,ShapeGeometry:Qp,ShapeBufferGeometry:Zp,ExtrudeGeometry:nu,EdgesGeometry:_l,ConeGeometry:Jp,ConeBufferGeometry:eg,CylinderGeometry:Jl,CylinderBufferGeometry:Tf,CircleBufferGeometry:Pa,CircleGeometry:Bl,BoxBufferGeometry:Nl,BoxGeometry:Il});function Xd(){eu.call(this,{uniforms:sl.merge([ds.lights,{opacity:{value:1}}]),vertexShader:qs.shadow_vert,fragmentShader:qs.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})}function Ga(a){eu.call(this,a),this.type="RawShaderMaterial"}function yu(a){this.uuid=xs.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(a)?a:[],this.visible=!0}function Hu(a){Zs.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Kr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function Gu(a){Hu.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(a)}function Sl(a){Zs.call(this),this.type="MeshPhongMaterial",this.color=new Kr(16777215),this.specular=new Kr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ye,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function ka(a){Sl.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(a)}function ec(a){Zs.call(this,a),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function dp(a){Zs.call(this),this.type="MeshLambertMaterial",this.color=new Kr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ye,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function fc(a){Zs.call(this),this.type="LineDashedMaterial",this.color=new Kr(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(a)}(Xd.prototype=Object.create(eu.prototype)).constructor=Xd,Xd.prototype.isShadowMaterial=!0,(Ga.prototype=Object.create(eu.prototype)).constructor=Ga,Ga.prototype.isRawShaderMaterial=!0,yu.prototype={constructor:yu,isMultiMaterial:!0,toJSON:function(a){for(var h={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},g=this.materials,y=0,x=g.length;y<x;y++){var D=g[y].toJSON(a);delete D.metadata,h.materials.push(D)}return h.visible=this.visible,h},clone:function(){for(var a=new this.constructor,h=0;h<this.materials.length;h++)a.materials.push(this.materials[h].clone());return a.visible=this.visible,a}},(Hu.prototype=Object.create(Zs.prototype)).constructor=Hu,Hu.prototype.isMeshStandardMaterial=!0,Hu.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(Gu.prototype=Object.create(Hu.prototype)).constructor=Gu,Gu.prototype.isMeshPhysicalMaterial=!0,Gu.prototype.copy=function(a){return Hu.prototype.copy.call(this,a),this.defines={PHYSICAL:""},this.reflectivity=a.reflectivity,this.clearCoat=a.clearCoat,this.clearCoatRoughness=a.clearCoatRoughness,this},(Sl.prototype=Object.create(Zs.prototype)).constructor=Sl,Sl.prototype.isMeshPhongMaterial=!0,Sl.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(ka.prototype=Object.create(Sl.prototype)).constructor=ka,ka.prototype.isMeshToonMaterial=!0,ka.prototype.copy=function(a){return Sl.prototype.copy.call(this,a),this.gradientMap=a.gradientMap,this},(ec.prototype=Object.create(Zs.prototype)).constructor=ec,ec.prototype.isMeshNormalMaterial=!0,ec.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(dp.prototype=Object.create(Zs.prototype)).constructor=dp,dp.prototype.isMeshLambertMaterial=!0,dp.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(fc.prototype=Object.create(Zs.prototype)).constructor=fc,fc.prototype.isLineDashedMaterial=!0,fc.prototype.copy=function(a){return Zs.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this};var Ov=Object.freeze({ShadowMaterial:Xd,SpriteMaterial:zu,RawShaderMaterial:Ga,ShaderMaterial:eu,PointsMaterial:Oc,MultiMaterial:yu,MeshPhysicalMaterial:Gu,MeshStandardMaterial:Hu,MeshPhongMaterial:Sl,MeshToonMaterial:ka,MeshNormalMaterial:ec,MeshLambertMaterial:dp,MeshDepthMaterial:Ci,MeshBasicMaterial:Va,LineDashedMaterial:fc,LineBasicMaterial:cl,Material:Zs}),_u={enabled:!1,files:{},add:function(a,h){!1!==this.enabled&&(this.files[a]=h)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};function El(a,h,g){var y=this,x=!1,D=0,F=0;this.onStart=void 0,this.onLoad=a,this.onProgress=h,this.onError=g,this.itemStart=function(H){F++,!1===x&&void 0!==y.onStart&&y.onStart(H,D,F),x=!0},this.itemEnd=function(H){D++,void 0!==y.onProgress&&y.onProgress(H,D,F),D===F&&(x=!1,void 0!==y.onLoad&&y.onLoad())},this.itemError=function(H){void 0!==y.onError&&y.onError(H)}}var pc=new El;function Do(a){this.manager=void 0!==a?a:pc}function Om(a){this.manager=void 0!==a?a:pc,this._parser=null}Object.assign(Do.prototype,{load:function(a,h,g,y){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a);var x=this,D=_u.get(a);if(void 0!==D)return x.manager.itemStart(a),setTimeout(function(){h&&h(D),x.manager.itemEnd(a)},0),D;var H=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(H){var le=H[1],se=!!H[2],ve=H[3];ve=window.decodeURIComponent(ve),se&&(ve=window.atob(ve));try{var we,Ue=(this.responseType||"").toLowerCase();switch(Ue){case"arraybuffer":case"blob":we=new ArrayBuffer(ve.length);for(var We=new Uint8Array(we),je=0;je<ve.length;je++)We[je]=ve.charCodeAt(je);"blob"===Ue&&(we=new Blob([we],{type:le}));break;case"document":var pt=new DOMParser;we=pt.parseFromString(ve,le);break;case"json":we=JSON.parse(ve);break;default:we=ve}window.setTimeout(function(){h&&h(we),x.manager.itemEnd(a)},0)}catch(ut){window.setTimeout(function(){y&&y(ut),x.manager.itemError(a)},0)}}else{var ft=new XMLHttpRequest;ft.open("GET",a,!0),ft.addEventListener("load",function(ut){var Et=ut.target.response;_u.add(a,Et),200===this.status?(h&&h(Et),x.manager.itemEnd(a)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),h&&h(Et),x.manager.itemEnd(a)):(y&&y(ut),x.manager.itemError(a))},!1),void 0!==g&&ft.addEventListener("progress",function(ut){g(ut)},!1),ft.addEventListener("error",function(ut){y&&y(ut),x.manager.itemError(a)},!1),void 0!==this.responseType&&(ft.responseType=this.responseType),void 0!==this.withCredentials&&(ft.withCredentials=this.withCredentials),ft.overrideMimeType&&ft.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),ft.send(null)}return x.manager.itemStart(a),ft},setPath:function(a){return this.path=a,this},setResponseType:function(a){return this.responseType=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setMimeType:function(a){return this.mimeType=a,this}}),Object.assign(Om.prototype,{load:function(a,h,g,y){var x=this,D=[],F=new Fc;F.image=D;var H=new Do(this.manager);function le(Ue){H.load(a[Ue],function(We){var je=x._parser(We,!0);D[Ue]={width:je.width,height:je.height,format:je.format,mipmaps:je.mipmaps},6===(se+=1)&&(1===je.mipmapCount&&(F.minFilter=Sa),F.format=je.format,F.needsUpdate=!0,h&&h(F))},g,y)}if(H.setPath(this.path),H.setResponseType("arraybuffer"),Array.isArray(a))for(var se=0,ve=0,we=a.length;ve<we;++ve)le(ve);else H.load(a,function(Ue){var We=x._parser(Ue,!0);if(We.isCubemap)for(var je=We.mipmaps.length/We.mipmapCount,pt=0;pt<je;pt++){D[pt]={mipmaps:[]};for(var ft=0;ft<We.mipmapCount;ft++)D[pt].mipmaps.push(We.mipmaps[pt*We.mipmapCount+ft]),D[pt].format=We.format,D[pt].width=We.width,D[pt].height=We.height}else F.image.width=We.width,F.image.height=We.height,F.mipmaps=We.mipmaps;1===We.mipmapCount&&(F.minFilter=Sa),F.format=We.format,F.needsUpdate=!0,h&&h(F)},g,y);return F},setPath:function(a){return this.path=a,this}});var tc=zl;function zl(a){this.manager=void 0!==a?a:pc,this._parser=null}function Yg(a){this.manager=void 0!==a?a:pc}function Fm(a){this.manager=void 0!==a?a:pc}function Hh(a){this.manager=void 0!==a?a:pc}function eo(a,h){Cr.call(this),this.type="Light",this.color=new Kr(a),this.intensity=void 0!==h?h:1,this.receiveShadow=void 0}function gc(a,h,g){eo.call(this,a,g),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Cr.DefaultUp),this.updateMatrix(),this.groundColor=new Kr(h)}function gh(a){this.camera=a,this.bias=0,this.radius=1,this.mapSize=new er(512,512),this.map=null,this.matrix=new bs}function fp(){gh.call(this,new xl(50,1,.5,500))}function Gh(a,h,g,y,x,D){eo.call(this,a,h),this.type="SpotLight",this.position.copy(Cr.DefaultUp),this.updateMatrix(),this.target=new Cr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(F){this.intensity=F/Math.PI}}),this.distance=void 0!==g?g:0,this.angle=void 0!==y?y:Math.PI/3,this.penumbra=void 0!==x?x:0,this.decay=void 0!==D?D:1,this.shadow=new fp}function bu(a,h,g,y){eo.call(this,a,h),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(x){this.intensity=x/(4*Math.PI)}}),this.distance=void 0!==g?g:0,this.decay=void 0!==y?y:1,this.shadow=new gh(new xl(90,1,.5,500))}function Mf(a){gh.call(this,new Vd(-5,5,5,-5,.5,500))}function Df(a,h){eo.call(this,a,h),this.type="DirectionalLight",this.position.copy(Cr.DefaultUp),this.updateMatrix(),this.target=new Cr,this.shadow=new Mf}function Kg(a,h){eo.call(this,a,h),this.type="AmbientLight",this.castShadow=void 0}Object.assign(zl.prototype,{load:function(a,h,g,y){var x=this,D=new rs,F=new Do(this.manager);return F.setResponseType("arraybuffer"),F.load(a,function(H){var le=x._parser(H);!le||(void 0!==le.image?D.image=le.image:void 0!==le.data&&(D.image.width=le.width,D.image.height=le.height,D.image.data=le.data),D.wrapS=void 0!==le.wrapS?le.wrapS:uc,D.wrapT=void 0!==le.wrapT?le.wrapT:uc,D.magFilter=void 0!==le.magFilter?le.magFilter:Sa,D.minFilter=void 0!==le.minFilter?le.minFilter:Ou,D.anisotropy=void 0!==le.anisotropy?le.anisotropy:1,void 0!==le.format&&(D.format=le.format),void 0!==le.type&&(D.type=le.type),void 0!==le.mipmaps&&(D.mipmaps=le.mipmaps),1===le.mipmapCount&&(D.minFilter=Sa),D.needsUpdate=!0,h&&h(D,le))},g,y),D}}),Object.assign(Yg.prototype,{load:function(a,h,g,y){var x=this,D=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(D.onload=function(){D.onload=null,URL.revokeObjectURL(D.src),h&&h(D),x.manager.itemEnd(a)},D.onerror=y,0===a.indexOf("data:"))D.src=a;else if(void 0!==this.crossOrigin)D.crossOrigin=this.crossOrigin,D.src=a;else{var F=new Do;F.setPath(this.path),F.setResponseType("blob"),F.setWithCredentials(this.withCredentials),F.load(a,function(H){D.src=URL.createObjectURL(H)},g,y)}return x.manager.itemStart(a),D},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Fm.prototype,{load:function(a,h,g,y){var x=new Od,D=new Yg(this.manager);D.setCrossOrigin(this.crossOrigin),D.setPath(this.path);var F=0;function H(se){D.load(a[se],function(ve){x.images[se]=ve,6==++F&&(x.needsUpdate=!0,h&&h(x))},void 0,y)}for(var le=0;le<a.length;++le)H(le);return x},setCrossOrigin:function(a){return this.crossOrigin=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Hh.prototype,{load:function(a,h,g,y){var x=new Yo,D=new Yg(this.manager);return D.setCrossOrigin(this.crossOrigin),D.setWithCredentials(this.withCredentials),D.setPath(this.path),D.load(a,function(F){var H=a.search(/\.(jpg|jpeg)$/)>0||0===a.search(/^data\:image\/jpeg/);x.format=H?Sc:rl,x.image=F,x.needsUpdate=!0,void 0!==h&&h(x)},g,y),x},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),eo.prototype=Object.assign(Object.create(Cr.prototype),{constructor:eo,isLight:!0,copy:function(a){return Cr.prototype.copy.call(this,a),this.color.copy(a.color),this.intensity=a.intensity,this},toJSON:function(a){var h=Cr.prototype.toJSON.call(this,a);return h.object.color=this.color.getHex(),h.object.intensity=this.intensity,void 0!==this.groundColor&&(h.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(h.object.distance=this.distance),void 0!==this.angle&&(h.object.angle=this.angle),void 0!==this.decay&&(h.object.decay=this.decay),void 0!==this.penumbra&&(h.object.penumbra=this.penumbra),void 0!==this.shadow&&(h.object.shadow=this.shadow.toJSON()),h}}),gc.prototype=Object.assign(Object.create(eo.prototype),{constructor:gc,isHemisphereLight:!0,copy:function(a){return eo.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}),Object.assign(gh.prototype,{copy:function(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};return 0!==this.bias&&(a.bias=this.bias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}),fp.prototype=Object.assign(Object.create(gh.prototype),{constructor:fp,isSpotLightShadow:!0,update:function(a){var h=2*xs.RAD2DEG*a.angle,g=this.mapSize.width/this.mapSize.height,y=a.distance||500,x=this.camera;(h!==x.fov||g!==x.aspect||y!==x.far)&&(x.fov=h,x.aspect=g,x.far=y,x.updateProjectionMatrix())}}),Gh.prototype=Object.assign(Object.create(eo.prototype),{constructor:Gh,isSpotLight:!0,copy:function(a){return eo.prototype.copy.call(this,a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),bu.prototype=Object.assign(Object.create(eo.prototype),{constructor:bu,isPointLight:!0,copy:function(a){return eo.prototype.copy.call(this,a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}),Mf.prototype=Object.assign(Object.create(gh.prototype),{constructor:Mf}),Df.prototype=Object.assign(Object.create(eo.prototype),{constructor:Df,isDirectionalLight:!0,copy:function(a){return eo.prototype.copy.call(this,a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),Kg.prototype=Object.assign(Object.create(eo.prototype),{constructor:Kg,isAmbientLight:!0});var fd,mc={arraySlice:function(a,h,g){return mc.isTypedArray(a)?new a.constructor(a.subarray(h,g)):a.slice(h,g)},convertArray:function(a,h,g){return!a||!g&&a.constructor===h?a:"number"==typeof h.BYTES_PER_ELEMENT?new h(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var g=a.length,y=new Array(g),x=0;x!==g;++x)y[x]=x;return y.sort(function h(D,F){return a[D]-a[F]}),y},sortedArray:function(a,h,g){for(var y=a.length,x=new a.constructor(y),D=0,F=0;F!==y;++D)for(var H=g[D]*h,le=0;le!==h;++le)x[F++]=a[H+le];return x},flattenJSON:function(a,h,g,y){for(var x=1,D=a[0];void 0!==D&&void 0===D[y];)D=a[x++];if(void 0!==D){var F=D[y];if(void 0!==F)if(Array.isArray(F))do{void 0!==(F=D[y])&&(h.push(D.time),g.push.apply(g,F)),D=a[x++]}while(void 0!==D);else if(void 0!==F.toArray)do{void 0!==(F=D[y])&&(h.push(D.time),F.toArray(g,g.length)),D=a[x++]}while(void 0!==D);else do{void 0!==(F=D[y])&&(h.push(D.time),g.push(F)),D=a[x++]}while(void 0!==D)}}};function Tl(a,h,g,y){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==y?y:new h.constructor(g),this.sampleValues=h,this.valueSize=g}function Wh(a,h,g,y){Tl.call(this,a,h,g,y),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Yd(a,h,g,y){Tl.call(this,a,h,g,y)}function Wu(a,h,g,y){Tl.call(this,a,h,g,y)}function Yn(a,h,g,y){if(void 0===a)throw new Error("track name is undefined");if(void 0===h||0===h.length)throw new Error("no keyframes in track named "+a);this.name=a,this.times=mc.convertArray(h,this.TimeBufferType),this.values=mc.convertArray(g,this.ValueBufferType),this.setInterpolation(y||this.DefaultInterpolation),this.validate(),this.optimize()}function Lf(a,h,g,y){Yn.call(this,a,h,g,y)}function fa(a,h,g,y){Tl.call(this,a,h,g,y)}function Kd(a,h,g,y){Yn.call(this,a,h,g,y)}function Cu(a,h,g,y){Yn.call(this,a,h,g,y)}function Nm(a,h,g,y){Yn.call(this,a,h,g,y)}function Zg(a,h,g){Yn.call(this,a,h,g)}function pp(a,h,g,y){Yn.call(this,a,h,g,y)}function ju(a,h,g,y){Yn.apply(this,arguments)}function Ml(a,h,g){this.name=a,this.tracks=g,this.duration=void 0!==h?h:-1,this.uuid=xs.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Qg(a){this.manager=void 0!==a?a:pc,this.textures={}}function mh(a){this.manager=void 0!==a?a:pc}function iu(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Jg(a){"boolean"==typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0),this.manager=void 0!==a?a:pc,this.withCredentials=!1}function gp(a){this.manager=void 0!==a?a:pc,this.texturePath=""}function Vl(){}function vh(a,h){this.v1=a,this.v2=h}function em(){this.curves=[],this.autoClose=!1}function pd(a,h,g,y,x,D,F,H){this.aX=a,this.aY=h,this.xRadius=g,this.yRadius=y,this.aStartAngle=x,this.aEndAngle=D,this.aClockwise=F,this.aRotation=H||0}Tl.prototype={constructor:Tl,evaluate:function(a){var h=this.parameterPositions,g=this._cachedIndex,y=h[g],x=h[g-1];e:{t:{var D;n:{i:if(!(a<y)){for(var F=g+2;;){if(void 0===y){if(a<x)break i;return this._cachedIndex=g=h.length,this.afterEnd_(g-1,a,x)}if(g===F)break;if(x=y,a<(y=h[++g]))break t}D=h.length;break n}if(a>=x)break e;var H=h[1];for(a<H&&(g=2,x=H),F=g-2;;){if(void 0===x)return this._cachedIndex=0,this.beforeStart_(0,a,y);if(g===F)break;if(y=x,a>=(x=h[--g-1]))break t}D=g,g=0}for(;g<D;){var le=g+D>>>1;a<h[le]?D=le:g=le+1}if(y=h[g],void 0===(x=h[g-1]))return this._cachedIndex=0,this.beforeStart_(0,a,y);if(void 0===y)return this._cachedIndex=g=h.length,this.afterEnd_(g-1,x,a)}this._cachedIndex=g,this.intervalChanged_(g,x,y)}return this.interpolate_(g,x,a,y)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){for(var h=this.resultBuffer,g=this.sampleValues,y=this.valueSize,x=a*y,D=0;D!==y;++D)h[D]=g[x+D];return h},interpolate_:function(a,h,g,y){throw new Error("call to abstract method")},intervalChanged_:function(a,h,g){}},Object.assign(Tl.prototype,{beforeStart_:Tl.prototype.copySampleValue_,afterEnd_:Tl.prototype.copySampleValue_}),Wh.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Wh,DefaultSettings_:{endingStart:gs,endingEnd:gs},intervalChanged_:function(a,h,g){var y=this.parameterPositions,x=a-2,D=a+1,F=y[x],H=y[D];if(void 0===F)switch(this.getSettings_().endingStart){case Ea:x=a,F=2*h-g;break;case ms:F=h+y[x=y.length-2]-y[x+1];break;default:x=a,F=g}if(void 0===H)switch(this.getSettings_().endingEnd){case Ea:D=a,H=2*g-h;break;case ms:D=1,H=g+y[1]-y[0];break;default:D=a-1,H=h}var le=.5*(g-h),se=this.valueSize;this._weightPrev=le/(h-F),this._weightNext=le/(H-g),this._offsetPrev=x*se,this._offsetNext=D*se},interpolate_:function(a,h,g,y){for(var x=this.resultBuffer,D=this.sampleValues,F=this.valueSize,H=a*F,le=H-F,se=this._offsetPrev,ve=this._offsetNext,we=this._weightPrev,Ue=this._weightNext,We=(g-h)/(y-h),je=We*We,pt=je*We,ft=-we*pt+2*we*je-we*We,ut=(1+we)*pt+(-1.5-2*we)*je+(-.5+we)*We+1,Et=(-1-Ue)*pt+(1.5+Ue)*je+.5*We,Mt=Ue*pt-Ue*je,nn=0;nn!==F;++nn)x[nn]=ft*D[se+nn]+ut*D[le+nn]+Et*D[H+nn]+Mt*D[ve+nn];return x}}),Yd.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Yd,interpolate_:function(a,h,g,y){for(var x=this.resultBuffer,D=this.sampleValues,F=this.valueSize,H=a*F,le=H-F,se=(g-h)/(y-h),ve=1-se,we=0;we!==F;++we)x[we]=D[le+we]*ve+D[H+we]*se;return x}}),Wu.prototype=Object.assign(Object.create(Tl.prototype),{constructor:Wu,interpolate_:function(a,h,g,y){return this.copySampleValue_(a-1)}}),fd={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:So,InterpolantFactoryMethodDiscrete:function(a){return new Wu(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new Yd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Wh(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){var h;switch(a){case Ws:h=this.InterpolantFactoryMethodDiscrete;break;case So:h=this.InterpolantFactoryMethodLinear;break;case Eo:h=this.InterpolantFactoryMethodSmooth}if(void 0!==h)this.createInterpolant=h;else{var g="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(g);this.setInterpolation(this.DefaultInterpolation)}console.warn(g)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ws;case this.InterpolantFactoryMethodLinear:return So;case this.InterpolantFactoryMethodSmooth:return Eo}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var h=this.times,g=0,y=h.length;g!==y;++g)h[g]+=a;return this},scale:function(a){if(1!==a)for(var h=this.times,g=0,y=h.length;g!==y;++g)h[g]*=a;return this},trim:function(a,h){for(var g=this.times,y=g.length,x=0,D=y-1;x!==y&&g[x]<a;)++x;for(;-1!==D&&g[D]>h;)--D;if(++D,0!==x||D!==y){x>=D&&(x=(D=Math.max(D,1))-1);var F=this.getValueSize();this.times=mc.arraySlice(g,x,D),this.values=mc.arraySlice(this.values,x*F,D*F)}return this},validate:function(){var a=!0,h=this.getValueSize();h-Math.floor(h)!=0&&(console.error("invalid value size in track",this),a=!1);var g=this.times,y=this.values,x=g.length;0===x&&(console.error("track is empty",this),a=!1);for(var D=null,F=0;F!==x;F++){var H=g[F];if("number"==typeof H&&isNaN(H)){console.error("time is not a valid number",this,F,H),a=!1;break}if(null!==D&&D>H){console.error("out of order keys",this,F,H,D),a=!1;break}D=H}if(void 0!==y&&mc.isTypedArray(y)){F=0;for(var le=y.length;F!==le;++F){var se=y[F];if(isNaN(se)){console.error("value is not a valid number",this,F,se),a=!1;break}}}return a},optimize:function(){for(var a=this.times,h=this.values,g=this.getValueSize(),y=this.getInterpolation()===Eo,x=1,D=a.length-1,F=1;F<D;++F){var H=!1,le=a[F];if(le!==a[F+1]&&(1!==F||le!==le[0]))if(y)H=!0;else for(var ve=F*g,we=ve-g,Ue=ve+g,We=0;We!==g;++We){var je=h[ve+We];if(je!==h[we+We]||je!==h[Ue+We]){H=!0;break}}if(H){if(F!==x){a[x]=a[F];var pt=F*g,ft=x*g;for(We=0;We!==g;++We)h[ft+We]=h[pt+We]}++x}}if(D>0){for(a[x]=a[D],pt=D*g,ft=x*g,We=0;We!==g;++We)h[ft+We]=h[pt+We];++x}return x!==a.length&&(this.times=mc.arraySlice(a,0,x),this.values=mc.arraySlice(h,0,x*g)),this}},Lf.prototype=Object.assign(Object.create(fd),{constructor:Lf,ValueTypeName:"vector"}),fa.prototype=Object.assign(Object.create(Tl.prototype),{constructor:fa,interpolate_:function(a,h,g,y){for(var x=this.resultBuffer,D=this.sampleValues,F=this.valueSize,H=a*F,le=(g-h)/(y-h),se=H+F;H!==se;H+=4)kl.slerpFlat(x,0,D,H-F,D,H,le);return x}}),Kd.prototype=Object.assign(Object.create(fd),{constructor:Kd,ValueTypeName:"quaternion",DefaultInterpolation:So,InterpolantFactoryMethodLinear:function(a){return new fa(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0}),Cu.prototype=Object.assign(Object.create(fd),{constructor:Cu,ValueTypeName:"number"}),Nm.prototype=Object.assign(Object.create(fd),{constructor:Nm,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ws,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Zg.prototype=Object.assign(Object.create(fd),{constructor:Zg,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ws,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),pp.prototype=Object.assign(Object.create(fd),{constructor:pp,ValueTypeName:"color"}),ju.prototype=fd,fd.constructor=ju,Object.assign(ju,{parse:function(a){if(void 0===a.type)throw new Error("track type undefined, can not parse");var h=ju._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var g=[],y=[];mc.flattenJSON(a.keys,g,y,"value"),a.times=g,a.values=y}return void 0!==h.parse?h.parse(a):new h(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var g,h=a.constructor;if(void 0!==h.toJSON)g=h.toJSON(a);else{g={name:a.name,times:mc.convertArray(a.times,Array),values:mc.convertArray(a.values,Array)};var y=a.getInterpolation();y!==a.DefaultInterpolation&&(g.interpolation=y)}return g.type=a.ValueTypeName,g},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cu;case"vector":case"vector2":case"vector3":case"vector4":return Lf;case"color":return pp;case"quaternion":return Kd;case"bool":case"boolean":return Zg;case"string":return Nm}throw new Error("Unsupported typeName: "+a)}}),Ml.prototype={constructor:Ml,resetDuration:function(){for(var h=0,g=0,y=this.tracks.length;g!==y;++g){var x=this.tracks[g];h=Math.max(h,x.times[x.times.length-1])}this.duration=h},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}},Object.assign(Ml,{parse:function(a){for(var h=[],g=a.tracks,y=1/(a.fps||1),x=0,D=g.length;x!==D;++x)h.push(ju.parse(g[x]).scale(y));return new Ml(a.name,a.duration,h)},toJSON:function(a){for(var h=[],g=a.tracks,y={name:a.name,duration:a.duration,tracks:h},x=0,D=g.length;x!==D;++x)h.push(ju.toJSON(g[x]));return y},CreateFromMorphTargetSequence:function(a,h,g,y){for(var x=h.length,D=[],F=0;F<x;F++){var H=[],le=[];H.push((F+x-1)%x,F,(F+1)%x),le.push(0,1,0);var se=mc.getKeyframeOrder(H);H=mc.sortedArray(H,1,se),le=mc.sortedArray(le,1,se),!y&&0===H[0]&&(H.push(x),le.push(le[0])),D.push(new Cu(".morphTargetInfluences["+h[F].name+"]",H,le).scale(1/g))}return new Ml(a,-1,D)},findByName:function(a,h){var g=a;Array.isArray(a)||(g=a.geometry&&a.geometry.animations||a.animations);for(var x=0;x<g.length;x++)if(g[x].name===h)return g[x];return null},CreateClipsFromMorphTargetSequences:function(a,h,g){for(var y={},x=/^([\w-]*?)([\d]+)$/,D=0,F=a.length;D<F;D++){var H=a[D],le=H.name.match(x);if(le&&le.length>1){var ve=y[se=le[1]];ve||(y[se]=ve=[]),ve.push(H)}}var we=[];for(var se in y)we.push(Ml.CreateFromMorphTargetSequence(se,y[se],h,g));return we},parseAnimation:function(a,h){if(!a)return console.error("  no animation in JSONLoader data"),null;for(var g=function(Mt,nn,qt,yn,fn){if(0!==qt.length){var an=[],bn=[];mc.flattenJSON(qt,an,bn,yn),0!==an.length&&fn.push(new Mt(nn,an,bn))}},y=[],x=a.name||"default",D=a.length||-1,F=a.fps||30,H=a.hierarchy||[],le=0;le<H.length;le++){var se=H[le].keys;if(se&&0!==se.length)if(se[0].morphTargets){for(var ve={},we=0;we<se.length;we++)if(se[we].morphTargets)for(var Ue=0;Ue<se[we].morphTargets.length;Ue++)ve[se[we].morphTargets[Ue]]=-1;for(var We in ve){var je=[],pt=[];for(Ue=0;Ue!==se[we].morphTargets.length;++Ue){var ft=se[we];je.push(ft.time),pt.push(ft.morphTarget===We?1:0)}y.push(new Cu(".morphTargetInfluence["+We+"]",je,pt))}D=ve.length*(F||1)}else{var ut=".bones["+h[le].name+"]";g(Lf,ut+".position",se,"pos",y),g(Kd,ut+".quaternion",se,"rot",y),g(Lf,ut+".scale",se,"scl",y)}}return 0===y.length?null:new Ml(x,D,y)}}),Object.assign(Qg.prototype,{load:function(a,h,g,y){var x=this;new Do(x.manager).load(a,function(F){h(x.parse(JSON.parse(F)))},g,y)},setTextures:function(a){this.textures=a},parse:function(a){var h=this.textures;function g(H){return void 0===h[H]&&console.warn("THREE.MaterialLoader: Undefined texture",H),h[H]}var y=new Ov[a.type];if(void 0!==a.uuid&&(y.uuid=a.uuid),void 0!==a.name&&(y.name=a.name),void 0!==a.color&&y.color.setHex(a.color),void 0!==a.roughness&&(y.roughness=a.roughness),void 0!==a.metalness&&(y.metalness=a.metalness),void 0!==a.emissive&&y.emissive.setHex(a.emissive),void 0!==a.specular&&y.specular.setHex(a.specular),void 0!==a.shininess&&(y.shininess=a.shininess),void 0!==a.clearCoat&&(y.clearCoat=a.clearCoat),void 0!==a.clearCoatRoughness&&(y.clearCoatRoughness=a.clearCoatRoughness),void 0!==a.uniforms&&(y.uniforms=a.uniforms),void 0!==a.vertexShader&&(y.vertexShader=a.vertexShader),void 0!==a.fragmentShader&&(y.fragmentShader=a.fragmentShader),void 0!==a.vertexColors&&(y.vertexColors=a.vertexColors),void 0!==a.fog&&(y.fog=a.fog),void 0!==a.shading&&(y.shading=a.shading),void 0!==a.blending&&(y.blending=a.blending),void 0!==a.side&&(y.side=a.side),void 0!==a.opacity&&(y.opacity=a.opacity),void 0!==a.transparent&&(y.transparent=a.transparent),void 0!==a.alphaTest&&(y.alphaTest=a.alphaTest),void 0!==a.depthTest&&(y.depthTest=a.depthTest),void 0!==a.depthWrite&&(y.depthWrite=a.depthWrite),void 0!==a.colorWrite&&(y.colorWrite=a.colorWrite),void 0!==a.wireframe&&(y.wireframe=a.wireframe),void 0!==a.wireframeLinewidth&&(y.wireframeLinewidth=a.wireframeLinewidth),void 0!==a.wireframeLinecap&&(y.wireframeLinecap=a.wireframeLinecap),void 0!==a.wireframeLinejoin&&(y.wireframeLinejoin=a.wireframeLinejoin),void 0!==a.skinning&&(y.skinning=a.skinning),void 0!==a.morphTargets&&(y.morphTargets=a.morphTargets),void 0!==a.size&&(y.size=a.size),void 0!==a.sizeAttenuation&&(y.sizeAttenuation=a.sizeAttenuation),void 0!==a.map&&(y.map=g(a.map)),void 0!==a.alphaMap&&(y.alphaMap=g(a.alphaMap),y.transparent=!0),void 0!==a.bumpMap&&(y.bumpMap=g(a.bumpMap)),void 0!==a.bumpScale&&(y.bumpScale=a.bumpScale),void 0!==a.normalMap&&(y.normalMap=g(a.normalMap)),void 0!==a.normalScale){var x=a.normalScale;!1===Array.isArray(x)&&(x=[x,x]),y.normalScale=(new er).fromArray(x)}if(void 0!==a.displacementMap&&(y.displacementMap=g(a.displacementMap)),void 0!==a.displacementScale&&(y.displacementScale=a.displacementScale),void 0!==a.displacementBias&&(y.displacementBias=a.displacementBias),void 0!==a.roughnessMap&&(y.roughnessMap=g(a.roughnessMap)),void 0!==a.metalnessMap&&(y.metalnessMap=g(a.metalnessMap)),void 0!==a.emissiveMap&&(y.emissiveMap=g(a.emissiveMap)),void 0!==a.emissiveIntensity&&(y.emissiveIntensity=a.emissiveIntensity),void 0!==a.specularMap&&(y.specularMap=g(a.specularMap)),void 0!==a.envMap&&(y.envMap=g(a.envMap)),void 0!==a.reflectivity&&(y.reflectivity=a.reflectivity),void 0!==a.lightMap&&(y.lightMap=g(a.lightMap)),void 0!==a.lightMapIntensity&&(y.lightMapIntensity=a.lightMapIntensity),void 0!==a.aoMap&&(y.aoMap=g(a.aoMap)),void 0!==a.aoMapIntensity&&(y.aoMapIntensity=a.aoMapIntensity),void 0!==a.gradientMap&&(y.gradientMap=g(a.gradientMap)),void 0!==a.materials)for(var D=0,F=a.materials.length;D<F;D++)y.materials.push(this.parse(a.materials[D]));return y}}),Object.assign(mh.prototype,{load:function(a,h,g,y){var x=this;new Do(x.manager).load(a,function(F){h(x.parse(JSON.parse(F)))},g,y)},parse:function(a){var h=new Lr,g=a.data.index,y={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};if(void 0!==g){var x=new y[g.type](g.array);h.setIndex(new gr(x,1))}var D=a.data.attributes;for(var F in D){var H=D[F];x=new y[H.type](H.array),h.addAttribute(F,new gr(x,H.itemSize,H.normalized))}var le=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==le)for(var se=0,ve=le.length;se!==ve;++se){var we=le[se];h.addGroup(we.start,we.count,we.materialIndex)}var Ue=a.data.boundingSphere;if(void 0!==Ue){var We=new on;void 0!==Ue.center&&We.fromArray(Ue.center),h.boundingSphere=new Ot(We,Ue.radius)}return h}}),iu.prototype={constructor:iu,crossOrigin:void 0,extractUrlBase:function(a){var h=a.split("/");return 1===h.length?"./":(h.pop(),h.join("/")+"/")},initMaterials:function(a,h,g){for(var y=[],x=0;x<a.length;++x)y[x]=this.createMaterial(a[x],h,g);return y},createMaterial:function(){var a,h,g;return function(x,D,F){void 0===a&&(a=new Kr),void 0===h&&(h=new Hh),void 0===g&&(g=new Qg);var H={};function le(Ue,We,je,pt,ft){var Mt,ut=D+Ue,Et=iu.Handlers.get(ut);null!==Et?Mt=Et.load(ut):(h.setCrossOrigin(F),Mt=h.load(ut)),void 0!==We&&(Mt.repeat.fromArray(We),1!==We[0]&&(Mt.wrapS=ih),1!==We[1]&&(Mt.wrapT=ih)),void 0!==je&&Mt.offset.fromArray(je),void 0!==pt&&("repeat"===pt[0]&&(Mt.wrapS=ih),"mirror"===pt[0]&&(Mt.wrapS=Sh),"repeat"===pt[1]&&(Mt.wrapT=ih),"mirror"===pt[1]&&(Mt.wrapT=Sh)),void 0!==ft&&(Mt.anisotropy=ft);var nn=xs.generateUUID();return H[nn]=Mt,nn}var se={uuid:xs.generateUUID(),type:"MeshLambertMaterial"};for(var ve in x){var we=x[ve];switch(ve){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":se.name=we;break;case"blending":se.blending=ue[we];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",ve,"is no longer supported.");break;case"colorDiffuse":se.color=a.fromArray(we).getHex();break;case"colorSpecular":se.specular=a.fromArray(we).getHex();break;case"colorEmissive":se.emissive=a.fromArray(we).getHex();break;case"specularCoef":se.shininess=we;break;case"shading":"basic"===we.toLowerCase()&&(se.type="MeshBasicMaterial"),"phong"===we.toLowerCase()&&(se.type="MeshPhongMaterial"),"standard"===we.toLowerCase()&&(se.type="MeshStandardMaterial");break;case"mapDiffuse":se.map=le(we,x.mapDiffuseRepeat,x.mapDiffuseOffset,x.mapDiffuseWrap,x.mapDiffuseAnisotropy);break;case"mapEmissive":se.emissiveMap=le(we,x.mapEmissiveRepeat,x.mapEmissiveOffset,x.mapEmissiveWrap,x.mapEmissiveAnisotropy);break;case"mapLight":se.lightMap=le(we,x.mapLightRepeat,x.mapLightOffset,x.mapLightWrap,x.mapLightAnisotropy);break;case"mapAO":se.aoMap=le(we,x.mapAORepeat,x.mapAOOffset,x.mapAOWrap,x.mapAOAnisotropy);break;case"mapBump":se.bumpMap=le(we,x.mapBumpRepeat,x.mapBumpOffset,x.mapBumpWrap,x.mapBumpAnisotropy);break;case"mapBumpScale":se.bumpScale=we;break;case"mapNormal":se.normalMap=le(we,x.mapNormalRepeat,x.mapNormalOffset,x.mapNormalWrap,x.mapNormalAnisotropy);break;case"mapNormalFactor":se.normalScale=[we,we];break;case"mapSpecular":se.specularMap=le(we,x.mapSpecularRepeat,x.mapSpecularOffset,x.mapSpecularWrap,x.mapSpecularAnisotropy);break;case"mapMetalness":se.metalnessMap=le(we,x.mapMetalnessRepeat,x.mapMetalnessOffset,x.mapMetalnessWrap,x.mapMetalnessAnisotropy);break;case"mapRoughness":se.roughnessMap=le(we,x.mapRoughnessRepeat,x.mapRoughnessOffset,x.mapRoughnessWrap,x.mapRoughnessAnisotropy);break;case"mapAlpha":se.alphaMap=le(we,x.mapAlphaRepeat,x.mapAlphaOffset,x.mapAlphaWrap,x.mapAlphaAnisotropy);break;case"flipSided":se.side=G;break;case"doubleSided":se.side=oe;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),se.opacity=we;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":se[ve]=we;break;case"vertexColors":!0===we&&(se.vertexColors=N),"face"===we&&(se.vertexColors=ae);break;default:console.error("THREE.Loader.createMaterial: Unsupported",ve,we)}}return"MeshBasicMaterial"===se.type&&delete se.emissive,"MeshPhongMaterial"!==se.type&&delete se.specular,se.opacity<1&&(se.transparent=!0),g.setTextures(H),g.parse(se)}}()},iu.Handlers={handlers:[],add:function(a,h){this.handlers.push(a,h)},get:function(a){for(var h=this.handlers,g=0,y=h.length;g<y;g+=2){var D=h[g+1];if(h[g].test(a))return D}return null}},Object.assign(Jg.prototype,{load:function(a,h,g,y){var x=this,D=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:iu.prototype.extractUrlBase(a),F=new Do(this.manager);F.setWithCredentials(this.withCredentials),F.load(a,function(H){var le=JSON.parse(H),se=le.metadata;if(void 0!==se){var ve=se.type;if(void 0!==ve){if("object"===ve.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");if("scene"===ve.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.")}}var we=x.parse(le,D);h(we.geometry,we.materials)},g,y)},setTexturePath:function(a){this.texturePath=a},parse:function(a,h){var g=new Ds,y=void 0!==a.scale?1/a.scale:1;if(function x(se){function ve(m,_){return m&1<<_}var we,Ue,We,je,pt,ft,ut,Et,Mt,nn,qt,yn,fn,an,bn,Nn,Mi,fi,Jt,tn,Kn,si,Di,xi,mi,Zn=a.faces,qn=a.vertices,f=a.normals,c=a.colors,d=0;if(void 0!==a.uvs){for(we=0;we<a.uvs.length;we++)a.uvs[we].length&&d++;for(we=0;we<d;we++)g.faceVertexUvs[we]=[]}for(je=0,pt=qn.length;je<pt;)(fi=new on).x=qn[je++]*se,fi.y=qn[je++]*se,fi.z=qn[je++]*se,g.vertices.push(fi);for(je=0,pt=Zn.length;je<pt;)if(qt=ve(nn=Zn[je++],0),yn=ve(nn,1),fn=ve(nn,3),an=ve(nn,4),bn=ve(nn,5),Nn=ve(nn,6),Mi=ve(nn,7),qt){if((tn=new Bo).a=Zn[je],tn.b=Zn[je+1],tn.c=Zn[je+3],(Kn=new Bo).a=Zn[je+1],Kn.b=Zn[je+2],Kn.c=Zn[je+3],je+=4,yn&&(Mt=Zn[je++],tn.materialIndex=Mt,Kn.materialIndex=Mt),We=g.faces.length,fn)for(we=0;we<d;we++)for(xi=a.uvs[we],g.faceVertexUvs[we][We]=[],g.faceVertexUvs[we][We+1]=[],Ue=0;Ue<4;Ue++)mi=new er(xi[2*(Et=Zn[je++])],xi[2*Et+1]),2!==Ue&&g.faceVertexUvs[we][We].push(mi),0!==Ue&&g.faceVertexUvs[we][We+1].push(mi);if(an&&(ut=3*Zn[je++],tn.normal.set(f[ut++],f[ut++],f[ut]),Kn.normal.copy(tn.normal)),bn)for(we=0;we<4;we++)ut=3*Zn[je++],Di=new on(f[ut++],f[ut++],f[ut]),2!==we&&tn.vertexNormals.push(Di),0!==we&&Kn.vertexNormals.push(Di);if(Nn&&(ft=Zn[je++],tn.color.setHex(si=c[ft]),Kn.color.setHex(si)),Mi)for(we=0;we<4;we++)si=c[ft=Zn[je++]],2!==we&&tn.vertexColors.push(new Kr(si)),0!==we&&Kn.vertexColors.push(new Kr(si));g.faces.push(tn),g.faces.push(Kn)}else{if((Jt=new Bo).a=Zn[je++],Jt.b=Zn[je++],Jt.c=Zn[je++],yn&&(Mt=Zn[je++],Jt.materialIndex=Mt),We=g.faces.length,fn)for(we=0;we<d;we++)for(xi=a.uvs[we],g.faceVertexUvs[we][We]=[],Ue=0;Ue<3;Ue++)mi=new er(xi[2*(Et=Zn[je++])],xi[2*Et+1]),g.faceVertexUvs[we][We].push(mi);if(an&&(ut=3*Zn[je++],Jt.normal.set(f[ut++],f[ut++],f[ut])),bn)for(we=0;we<3;we++)ut=3*Zn[je++],Di=new on(f[ut++],f[ut++],f[ut]),Jt.vertexNormals.push(Di);if(Nn&&(ft=Zn[je++],Jt.color.setHex(c[ft])),Mi)for(we=0;we<3;we++)ft=Zn[je++],Jt.vertexColors.push(new Kr(c[ft]));g.faces.push(Jt)}}(y),function D(){var se=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var ve=0,we=a.skinWeights.length;ve<we;ve+=se)g.skinWeights.push(new Ko(a.skinWeights[ve],se>1?a.skinWeights[ve+1]:0,se>2?a.skinWeights[ve+2]:0,se>3?a.skinWeights[ve+3]:0));if(a.skinIndices)for(ve=0,we=a.skinIndices.length;ve<we;ve+=se)g.skinIndices.push(new Ko(a.skinIndices[ve],se>1?a.skinIndices[ve+1]:0,se>2?a.skinIndices[ve+2]:0,se>3?a.skinIndices[ve+3]:0));g.bones=a.bones,g.bones&&g.bones.length>0&&(g.skinWeights.length!==g.skinIndices.length||g.skinIndices.length!==g.vertices.length)&&console.warn("When skinning, number of vertices ("+g.vertices.length+"), skinIndices ("+g.skinIndices.length+"), and skinWeights ("+g.skinWeights.length+") should match.")}(),function F(se){if(void 0!==a.morphTargets)for(var ve=0,we=a.morphTargets.length;ve<we;ve++){g.morphTargets[ve]={},g.morphTargets[ve].name=a.morphTargets[ve].name,g.morphTargets[ve].vertices=[];for(var Ue=g.morphTargets[ve].vertices,We=a.morphTargets[ve].vertices,je=0,pt=We.length;je<pt;je+=3){var ft=new on;ft.x=We[je]*se,ft.y=We[je+1]*se,ft.z=We[je+2]*se,Ue.push(ft)}}if(void 0!==a.morphColors&&a.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var ut=g.faces,Et=a.morphColors[0].colors;for(ve=0,we=ut.length;ve<we;ve++)ut[ve].color.fromArray(Et,3*ve)}}(y),function H(){var se=[],ve=[];void 0!==a.animation&&ve.push(a.animation),void 0!==a.animations&&(a.animations.length?ve=ve.concat(a.animations):ve.push(a.animations));for(var we=0;we<ve.length;we++){var Ue=Ml.parseAnimation(ve[we],g.bones);Ue&&se.push(Ue)}if(g.morphTargets){var We=Ml.CreateClipsFromMorphTargetSequences(g.morphTargets,10);se=se.concat(We)}se.length>0&&(g.animations=se)}(),g.computeFaceNormals(),g.computeBoundingSphere(),void 0===a.materials||0===a.materials.length)return{geometry:g};var le=iu.prototype.initMaterials(a.materials,h,this.crossOrigin);return{geometry:g,materials:le}}}),Object.assign(gp.prototype,{load:function(a,h,g,y){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var x=this;new Do(x.manager).load(a,function(F){var H=null;try{H=JSON.parse(F)}catch(se){return void console.error("THREE:ObjectLoader: Can't parse "+a+".",se.message)}var le=H.metadata;void 0!==le&&void 0!==le.type&&"geometry"!==le.type.toLowerCase()?x.parse(H,h):console.error("THREE.ObjectLoader: Can't load "+a+". Use THREE.JSONLoader instead.")},g,y)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,h){var g=this.parseGeometries(a.geometries),y=this.parseImages(a.images,function(){void 0!==h&&h(F)}),x=this.parseTextures(a.textures,y),D=this.parseMaterials(a.materials,x),F=this.parseObject(a.object,g,D);return a.animations&&(F.animations=this.parseAnimations(a.animations)),(void 0===a.images||0===a.images.length)&&void 0!==h&&h(F),F},parseGeometries:function(a){var h={};if(void 0!==a)for(var g=new Jg,y=new mh,x=0,D=a.length;x<D;x++){var F,H=a[x];switch(H.type){case"PlaneGeometry":case"PlaneBufferGeometry":F=new Uu[H.type](H.width,H.height,H.widthSegments,H.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":F=new Uu[H.type](H.width,H.height,H.depth,H.widthSegments,H.heightSegments,H.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":F=new Uu[H.type](H.radius,H.segments,H.thetaStart,H.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":F=new Uu[H.type](H.radiusTop,H.radiusBottom,H.height,H.radialSegments,H.heightSegments,H.openEnded,H.thetaStart,H.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":F=new Uu[H.type](H.radius,H.height,H.radialSegments,H.heightSegments,H.openEnded,H.thetaStart,H.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":F=new Uu[H.type](H.radius,H.widthSegments,H.heightSegments,H.phiStart,H.phiLength,H.thetaStart,H.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":F=new Uu[H.type](H.radius,H.detail);break;case"RingGeometry":case"RingBufferGeometry":F=new Uu[H.type](H.innerRadius,H.outerRadius,H.thetaSegments,H.phiSegments,H.thetaStart,H.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":F=new Uu[H.type](H.radius,H.tube,H.radialSegments,H.tubularSegments,H.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":F=new Uu[H.type](H.radius,H.tube,H.tubularSegments,H.radialSegments,H.p,H.q);break;case"LatheGeometry":case"LatheBufferGeometry":F=new Uu[H.type](H.points,H.segments,H.phiStart,H.phiLength);break;case"BufferGeometry":F=y.parse(H);break;case"Geometry":F=g.parse(H.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+H.type+'"');continue}F.uuid=H.uuid,void 0!==H.name&&(F.name=H.name),h[H.uuid]=F}return h},parseMaterials:function(a,h){var g={};if(void 0!==a){var y=new Qg;y.setTextures(h);for(var x=0,D=a.length;x<D;x++){var F=y.parse(a[x]);g[F.uuid]=F}}return g},parseAnimations:function(a){for(var h=[],g=0;g<a.length;g++){var y=Ml.parse(a[g]);h.push(y)}return h},parseImages:function(a,h){var g=this,y={};function x(we){return g.manager.itemStart(we),F.load(we,function(){g.manager.itemEnd(we)},void 0,function(){g.manager.itemError(we)})}if(void 0!==a&&a.length>0){var F=new Yg(new El(h));F.setCrossOrigin(this.crossOrigin);for(var H=0,le=a.length;H<le;H++){var se=a[H],ve=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(se.url)?se.url:g.texturePath+se.url;y[se.uuid]=x(ve)}}return y},parseTextures:function(a,h){function g(le,se){return"number"==typeof le?le:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",le),se[le])}var y={};if(void 0!==a)for(var x=0,D=a.length;x<D;x++){var F=a[x];void 0===F.image&&console.warn('THREE.ObjectLoader: No "image" specified for',F.uuid),void 0===h[F.image]&&console.warn("THREE.ObjectLoader: Undefined image",F.image);var H=new Yo(h[F.image]);H.needsUpdate=!0,H.uuid=F.uuid,void 0!==F.name&&(H.name=F.name),void 0!==F.mapping&&(H.mapping=g(F.mapping,jf)),void 0!==F.offset&&H.offset.fromArray(F.offset),void 0!==F.repeat&&H.repeat.fromArray(F.repeat),void 0!==F.wrap&&(H.wrapS=g(F.wrap[0],ku),H.wrapT=g(F.wrap[1],ku)),void 0!==F.minFilter&&(H.minFilter=g(F.minFilter,nd)),void 0!==F.magFilter&&(H.magFilter=g(F.magFilter,nd)),void 0!==F.anisotropy&&(H.anisotropy=F.anisotropy),void 0!==F.flipY&&(H.flipY=F.flipY),y[F.uuid]=H}return y},parseObject:function(){var a=new bs;return function(g,y,x){var D;function F(je){return void 0===y[je]&&console.warn("THREE.ObjectLoader: Undefined geometry",je),y[je]}function H(je){if(void 0!==je)return void 0===x[je]&&console.warn("THREE.ObjectLoader: Undefined material",je),x[je]}switch(g.type){case"Scene":D=new Bh,void 0!==g.background&&Number.isInteger(g.background)&&(D.background=new Kr(g.background)),void 0!==g.fog&&("Fog"===g.fog.type?D.fog=new kc(g.fog.color,g.fog.near,g.fog.far):"FogExp2"===g.fog.type&&(D.fog=new Nh(g.fog.color,g.fog.density)));break;case"PerspectiveCamera":D=new xl(g.fov,g.aspect,g.near,g.far),void 0!==g.focus&&(D.focus=g.focus),void 0!==g.zoom&&(D.zoom=g.zoom),void 0!==g.filmGauge&&(D.filmGauge=g.filmGauge),void 0!==g.filmOffset&&(D.filmOffset=g.filmOffset),void 0!==g.view&&(D.view=Object.assign({},g.view));break;case"OrthographicCamera":D=new Vd(g.left,g.right,g.top,g.bottom,g.near,g.far);break;case"AmbientLight":D=new Kg(g.color,g.intensity);break;case"DirectionalLight":D=new Df(g.color,g.intensity);break;case"PointLight":D=new bu(g.color,g.intensity,g.distance,g.decay);break;case"SpotLight":D=new Gh(g.color,g.intensity,g.distance,g.angle,g.penumbra,g.decay);break;case"HemisphereLight":D=new gc(g.color,g.groundColor,g.intensity);break;case"Mesh":var le=F(g.geometry),se=H(g.material);D=le.bones&&le.bones.length>0?new qg(le,se):new wa(le,se);break;case"LOD":D=new la;break;case"Line":D=new vu(F(g.geometry),H(g.material),g.mode);break;case"LineSegments":D=new Co(F(g.geometry),H(g.material));break;case"PointCloud":case"Points":D=new $s(F(g.geometry),H(g.material));break;case"Sprite":D=new mu(H(g.material));break;case"Group":D=new lp;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:D=new Cr}if(D.uuid=g.uuid,void 0!==g.name&&(D.name=g.name),void 0!==g.matrix?(a.fromArray(g.matrix),a.decompose(D.position,D.quaternion,D.scale)):(void 0!==g.position&&D.position.fromArray(g.position),void 0!==g.rotation&&D.rotation.fromArray(g.rotation),void 0!==g.quaternion&&D.quaternion.fromArray(g.quaternion),void 0!==g.scale&&D.scale.fromArray(g.scale)),void 0!==g.castShadow&&(D.castShadow=g.castShadow),void 0!==g.receiveShadow&&(D.receiveShadow=g.receiveShadow),g.shadow&&(void 0!==g.shadow.bias&&(D.shadow.bias=g.shadow.bias),void 0!==g.shadow.radius&&(D.shadow.radius=g.shadow.radius),void 0!==g.shadow.mapSize&&D.shadow.mapSize.fromArray(g.shadow.mapSize),void 0!==g.shadow.camera&&(D.shadow.camera=this.parseObject(g.shadow.camera))),void 0!==g.visible&&(D.visible=g.visible),void 0!==g.userData&&(D.userData=g.userData),void 0!==g.children)for(var ve in g.children)D.add(this.parseObject(g.children[ve],y,x));if("LOD"===g.type)for(var we=g.levels,Ue=0;Ue<we.length;Ue++){var We=we[Ue];void 0!==(ve=D.getObjectByProperty("uuid",We.object))&&D.addLevel(ve,We.distance)}return D}}()}),Vl.prototype={constructor:Vl,getPoint:function(a){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(a){var h=this.getUtoTmapping(a);return this.getPoint(h)},getPoints:function(a){a||(a=5);for(var h=[],g=0;g<=a;g++)h.push(this.getPoint(g/a));return h},getSpacedPoints:function(a){a||(a=5);for(var h=[],g=0;g<=a;g++)h.push(this.getPointAt(g/a));return h},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var g,x,h=[],y=this.getPoint(0),D=0;for(h.push(0),x=1;x<=a;x++)D+=(g=this.getPoint(x/a)).distanceTo(y),h.push(D),y=g;return this.cacheArcLengths=h,h},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(a,h){var D,g=this.getLengths(),y=0,x=g.length;D=h||a*g[x-1];for(var le,F=0,H=x-1;F<=H;)if((le=g[y=Math.floor(F+(H-F)/2)]-D)<0)F=y+1;else{if(!(le>0)){H=y;break}H=y-1}if(g[y=H]===D)return y/(x-1);var se=g[y];return(y+(D-se)/(g[y+1]-se))/(x-1)},getTangent:function(a){var h=1e-4,g=a-h,y=a+h;g<0&&(g=0),y>1&&(y=1);var x=this.getPoint(g);return this.getPoint(y).clone().sub(x).normalize()},getTangentAt:function(a){var h=this.getUtoTmapping(a);return this.getTangent(h)},computeFrenetFrames:function(a,h){var le,ve,g=new on,y=[],x=[],D=[],F=new on,H=new bs;for(le=0;le<=a;le++)y[le]=this.getTangentAt(le/a),y[le].normalize();x[0]=new on,D[0]=new on;var we=Number.MAX_VALUE,Ue=Math.abs(y[0].x),We=Math.abs(y[0].y),je=Math.abs(y[0].z);for(Ue<=we&&(we=Ue,g.set(1,0,0)),We<=we&&(we=We,g.set(0,1,0)),je<=we&&g.set(0,0,1),F.crossVectors(y[0],g).normalize(),x[0].crossVectors(y[0],F),D[0].crossVectors(y[0],x[0]),le=1;le<=a;le++)x[le]=x[le-1].clone(),D[le]=D[le-1].clone(),F.crossVectors(y[le-1],y[le]),F.length()>Number.EPSILON&&(F.normalize(),ve=Math.acos(xs.clamp(y[le-1].dot(y[le]),-1,1)),x[le].applyMatrix4(H.makeRotationAxis(F,ve))),D[le].crossVectors(y[le],x[le]);if(!0===h)for(ve=Math.acos(xs.clamp(x[0].dot(x[a]),-1,1)),ve/=a,y[0].dot(F.crossVectors(x[0],x[a]))>0&&(ve=-ve),le=1;le<=a;le++)x[le].applyMatrix4(H.makeRotationAxis(y[le],ve*le)),D[le].crossVectors(y[le],x[le]);return{tangents:y,normals:x,binormals:D}}},Vl.create=function(a,h){return a.prototype=Object.create(Vl.prototype),a.prototype.constructor=a,a.prototype.getPoint=h,a},(vh.prototype=Object.create(Vl.prototype)).constructor=vh,vh.prototype.isLineCurve=!0,vh.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var h=this.v2.clone().sub(this.v1);return h.multiplyScalar(a).add(this.v1),h},vh.prototype.getPointAt=function(a){return this.getPoint(a)},vh.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()},em.prototype=Object.assign(Object.create(Vl.prototype),{constructor:em,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),h=this.curves[this.curves.length-1].getPoint(1);a.equals(h)||this.curves.push(new vh(h,a))},getPoint:function(a){for(var h=a*this.getLength(),g=this.getCurveLengths(),y=0;y<g.length;){if(g[y]>=h){var x=g[y]-h,D=this.curves[y],F=D.getLength();return D.getPointAt(0===F?0:1-x/F)}y++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],h=0,g=0,y=this.curves.length;g<y;g++)h+=this.curves[g].getLength(),a.push(h);return this.cacheLengths=a,a},getSpacedPoints:function(a){a||(a=40);for(var h=[],g=0;g<=a;g++)h.push(this.getPoint(g/a));return this.autoClose&&h.push(h[0]),h},getPoints:function(a){a=a||12;for(var g,h=[],y=0,x=this.curves;y<x.length;y++)for(var D=x[y],H=D.getPoints(D&&D.isEllipseCurve?2*a:D&&D.isLineCurve?1:D&&D.isSplineCurve?a*D.points.length:a),le=0;le<H.length;le++){var se=H[le];g&&g.equals(se)||(h.push(se),g=se)}return this.autoClose&&h.length>1&&!h[h.length-1].equals(h[0])&&h.push(h[0]),h},createPointsGeometry:function(a){var h=this.getPoints(a);return this.createGeometry(h)},createSpacedPointsGeometry:function(a){var h=this.getSpacedPoints(a);return this.createGeometry(h)},createGeometry:function(a){for(var h=new Ds,g=0,y=a.length;g<y;g++){var x=a[g];h.vertices.push(new on(x.x,x.y,x.z||0))}return h}}),(pd.prototype=Object.create(Vl.prototype)).constructor=pd,pd.prototype.isEllipseCurve=!0,pd.prototype.getPoint=function(a){for(var h=2*Math.PI,g=this.aEndAngle-this.aStartAngle,y=Math.abs(g)<Number.EPSILON;g<0;)g+=h;for(;g>h;)g-=h;g<Number.EPSILON&&(g=y?0:h),!0===this.aClockwise&&!y&&(g===h?g=-h:g-=h);var x=this.aStartAngle+a*g,D=this.aX+this.xRadius*Math.cos(x),F=this.aY+this.yRadius*Math.sin(x);if(0!==this.aRotation){var H=Math.cos(this.aRotation),le=Math.sin(this.aRotation),se=D-this.aX,ve=F-this.aY;D=se*H-ve*le+this.aX,F=se*le+ve*H+this.aY}return new er(D,F)};var nc={tangentQuadraticBezier:function(a,h,g,y){return 2*(1-a)*(g-h)+2*a*(y-g)},tangentCubicBezier:function(a,h,g,y,x){return-3*h*(1-a)*(1-a)+3*g*(1-a)*(1-a)-6*a*g*(1-a)+6*a*y*(1-a)-3*a*a*y+3*a*a*x},tangentSpline:function(a,h,g,y,x){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,h,g,y,x){var D=.5*(g-a),F=.5*(y-h),H=x*x;return(2*h-2*g+D+F)*(x*H)+(-3*h+3*g-2*D-F)*H+D*x+h}};function wu(a){this.points=void 0===a?[]:a}function Zd(a,h,g,y){this.v0=a,this.v1=h,this.v2=g,this.v3=y}function gd(a,h,g){this.v0=a,this.v1=h,this.v2=g}(wu.prototype=Object.create(Vl.prototype)).constructor=wu,wu.prototype.isSplineCurve=!0,wu.prototype.getPoint=function(a){var h=this.points,g=(h.length-1)*a,y=Math.floor(g),x=g-y,D=h[0===y?y:y-1],F=h[y],H=h[y>h.length-2?h.length-1:y+1],le=h[y>h.length-3?h.length-1:y+2],se=nc.interpolate;return new er(se(D.x,F.x,H.x,le.x,x),se(D.y,F.y,H.y,le.y,x))},(Zd.prototype=Object.create(Vl.prototype)).constructor=Zd,Zd.prototype.getPoint=function(a){var h=Ra.b3;return new er(h(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},Zd.prototype.getTangent=function(a){var h=nc.tangentCubicBezier;return new er(h(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},(gd.prototype=Object.create(Vl.prototype)).constructor=gd,gd.prototype.getPoint=function(a){var h=Ra.b2;return new er(h(a,this.v0.x,this.v1.x,this.v2.x),h(a,this.v0.y,this.v1.y,this.v2.y))},gd.prototype.getTangent=function(a){var h=nc.tangentQuadraticBezier;return new er(h(a,this.v0.x,this.v1.x,this.v2.x),h(a,this.v0.y,this.v1.y,this.v2.y)).normalize()};var mp=Object.assign(Object.create(em.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var h=1,g=a.length;h<g;h++)this.lineTo(a[h].x,a[h].y)},moveTo:function(a,h){this.currentPoint.set(a,h)},lineTo:function(a,h){var g=new vh(this.currentPoint.clone(),new er(a,h));this.curves.push(g),this.currentPoint.set(a,h)},quadraticCurveTo:function(a,h,g,y){var x=new gd(this.currentPoint.clone(),new er(a,h),new er(g,y));this.curves.push(x),this.currentPoint.set(g,y)},bezierCurveTo:function(a,h,g,y,x,D){var F=new Zd(this.currentPoint.clone(),new er(a,h),new er(g,y),new er(x,D));this.curves.push(F),this.currentPoint.set(x,D)},splineThru:function(a){var g=new wu([this.currentPoint.clone()].concat(a));this.curves.push(g),this.currentPoint.copy(a[a.length-1])},arc:function(a,h,g,y,x,D){this.absarc(a+this.currentPoint.x,h+this.currentPoint.y,g,y,x,D)},absarc:function(a,h,g,y,x,D){this.absellipse(a,h,g,g,y,x,D)},ellipse:function(a,h,g,y,x,D,F,H){this.absellipse(a+this.currentPoint.x,h+this.currentPoint.y,g,y,x,D,F,H)},absellipse:function(a,h,g,y,x,D,F,H){var le=new pd(a,h,g,y,x,D,F,H);if(this.curves.length>0){var se=le.getPoint(0);se.equals(this.currentPoint)||this.lineTo(se.x,se.y)}this.curves.push(le);var ve=le.getPoint(1);this.currentPoint.copy(ve)}});function $u(){cs.apply(this,arguments),this.holes=[]}function cs(a){em.call(this),this.currentPoint=new er,a&&this.fromPoints(a)}function vp(){this.subPaths=[],this.currentPath=null}function tm(a){this.data=a}function Qd(a){this.manager=void 0!==a?a:pc}$u.prototype=Object.assign(Object.create(mp),{constructor:$u,getPointsHoles:function(a){for(var h=[],g=0,y=this.holes.length;g<y;g++)h[g]=this.holes[g].getPoints(a);return h},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}}),cs.prototype=mp,mp.constructor=cs,vp.prototype={moveTo:function(a,h){this.currentPath=new cs,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,h)},lineTo:function(a,h){this.currentPath.lineTo(a,h)},quadraticCurveTo:function(a,h,g,y){this.currentPath.quadraticCurveTo(a,h,g,y)},bezierCurveTo:function(a,h,g,y,x,D){this.currentPath.bezierCurveTo(a,h,g,y,x,D)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,h){function g(Kn){for(var si=[],Di=0,xi=Kn.length;Di<xi;Di++){var mi=Kn[Di],ar=new $u;ar.curves=mi.curves,si.push(ar)}return si}function y(Kn,si){for(var Di=si.length,xi=!1,mi=Di-1,ar=0;ar<Di;mi=ar++){var Hi=si[mi],Zn=si[ar],qn=Zn.x-Hi.x,f=Zn.y-Hi.y;if(Math.abs(f)>Number.EPSILON){if(f<0&&(Hi=si[ar],qn=-qn,Zn=si[mi],f=-f),Kn.y<Hi.y||Kn.y>Zn.y)continue;if(Kn.y===Hi.y){if(Kn.x===Hi.x)return!0}else{var c=f*(Kn.x-Hi.x)-qn*(Kn.y-Hi.y);if(0===c)return!0;if(c<0)continue;xi=!xi}}else{if(Kn.y!==Hi.y)continue;if(Zn.x<=Kn.x&&Kn.x<=Hi.x||Hi.x<=Kn.x&&Kn.x<=Zn.x)return!0}}return xi}var x=Ra.isClockWise,D=this.subPaths;if(0===D.length)return[];if(!0===h)return g(D);var F,H,le,se=[];if(1===D.length)return H=D[0],(le=new $u).curves=H.curves,se.push(le),se;var ve=!x(D[0].getPoints());ve=a?!ve:ve;var pt,we=[],Ue=[],We=[],je=0;Ue[je]=void 0,We[je]=[];for(var ft=0,ut=D.length;ft<ut;ft++)F=x(pt=(H=D[ft]).getPoints()),(F=a?!F:F)?(!ve&&Ue[je]&&je++,Ue[je]={s:new $u,p:pt},Ue[je].s.curves=H.curves,ve&&je++,We[je]=[]):We[je].push({h:H,p:pt[0]});if(!Ue[0])return g(D);if(Ue.length>1){for(var Et=!1,Mt=[],nn=0,qt=Ue.length;nn<qt;nn++)we[nn]=[];for(nn=0,qt=Ue.length;nn<qt;nn++)for(var yn=We[nn],fn=0;fn<yn.length;fn++){for(var an=yn[fn],bn=!0,Nn=0;Nn<Ue.length;Nn++)y(an.p,Ue[Nn].p)&&(nn!==Nn&&Mt.push({froms:nn,tos:Nn,hole:fn}),bn?(bn=!1,we[Nn].push(an)):Et=!0);bn&&we[nn].push(an)}Mt.length>0&&(Et||(We=we))}ft=0;for(var Mi,fi=Ue.length;ft<fi;ft++){se.push(le=Ue[ft].s);for(var Jt=0,tn=(Mi=We[ft]).length;Jt<tn;Jt++)le.holes.push(Mi[Jt].h)}return se}},Object.assign(tm.prototype,{isFont:!0,generateShapes:function(a,h,g){function x(ve,we,Ue){var We=D.glyphs[ve]||D.glyphs["?"];if(We){var Et,Mt,nn,qt,yn,fn,an,bn,Nn,Mi,fi,je=new vp,pt=[],ft=Ra.b2,ut=Ra.b3;if(We.o)for(var Jt=We._cachedOutline||(We._cachedOutline=We.o.split(" ")),tn=0,Kn=Jt.length;tn<Kn;)switch(Jt[tn++]){case"m":Et=Jt[tn++]*we+Ue,Mt=Jt[tn++]*we,je.moveTo(Et,Mt);break;case"l":Et=Jt[tn++]*we+Ue,Mt=Jt[tn++]*we,je.lineTo(Et,Mt);break;case"q":if(nn=Jt[tn++]*we+Ue,qt=Jt[tn++]*we,an=Jt[tn++]*we+Ue,bn=Jt[tn++]*we,je.quadraticCurveTo(an,bn,nn,qt),fi=pt[pt.length-1]){yn=fi.x,fn=fi.y;for(var Di=1;Di<=g;Di++)ft(xi=Di/g,yn,an,nn),ft(xi,fn,bn,qt)}break;case"b":if(nn=Jt[tn++]*we+Ue,qt=Jt[tn++]*we,an=Jt[tn++]*we+Ue,bn=Jt[tn++]*we,Nn=Jt[tn++]*we+Ue,Mi=Jt[tn++]*we,je.bezierCurveTo(an,bn,Nn,Mi,nn,qt),fi=pt[pt.length-1])for(yn=fi.x,fn=fi.y,Di=1;Di<=g;Di++){var xi;ut(xi=Di/g,yn,an,Nn,nn),ut(xi,fn,bn,Mi,qt)}}return{offset:We.ha*we,path:je}}}void 0===h&&(h=100),void 0===g&&(g=4);for(var D=this.data,F=function y(ve){for(var we=String(ve).split(""),Ue=h/D.resolution,We=0,je=[],pt=0;pt<we.length;pt++){var ft=x(we[pt],Ue,We);We+=ft.offset,je.push(ft.path)}return je}(a),H=[],le=0,se=F.length;le<se;le++)Array.prototype.push.apply(H,F[le].toShapes());return H}}),Object.assign(Qd.prototype,{load:function(a,h,g,y){var x=this;new Do(this.manager).load(a,function(F){var H;try{H=JSON.parse(F)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),H=JSON.parse(F.substring(65,F.length-2))}var le=x.parse(H);h&&h(le)},g,y)},parse:function(a){return new tm(a)}});var Rf,yp={getContext:function(){return void 0===Rf&&(Rf=new(window.AudioContext||window.webkitAudioContext)),Rf},setContext:function(a){Rf=a}};function tg(a){this.manager=void 0!==a?a:pc}function Oa(a,h,g,y){eo.call(this,a,h),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==g?g:10,this.height=void 0!==y?y:10}function Bm(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ul(a,h,g){Cr.call(this),this.type="CubeCamera";var y=90,D=new xl(y,1,a,h);D.up.set(0,-1,0),D.lookAt(new on(1,0,0)),this.add(D);var F=new xl(y,1,a,h);F.up.set(0,-1,0),F.lookAt(new on(-1,0,0)),this.add(F);var H=new xl(y,1,a,h);H.up.set(0,0,1),H.lookAt(new on(0,1,0)),this.add(H);var le=new xl(y,1,a,h);le.up.set(0,0,-1),le.lookAt(new on(0,-1,0)),this.add(le);var se=new xl(y,1,a,h);se.up.set(0,-1,0),se.lookAt(new on(0,0,1)),this.add(se);var ve=new xl(y,1,a,h);ve.up.set(0,-1,0),ve.lookAt(new on(0,0,-1)),this.add(ve),this.renderTarget=new sd(g,g,{format:Sc,magFilter:Sa,minFilter:Sa}),this.updateCubeMap=function(Ue,We){null===this.parent&&this.updateMatrixWorld();var je=this.renderTarget,pt=je.texture.generateMipmaps;je.texture.generateMipmaps=!1,je.activeCubeFace=0,Ue.render(We,D,je),je.activeCubeFace=1,Ue.render(We,F,je),je.activeCubeFace=2,Ue.render(We,H,je),je.activeCubeFace=3,Ue.render(We,le,je),je.activeCubeFace=4,Ue.render(We,se,je),je.texture.generateMipmaps=pt,je.activeCubeFace=5,Ue.render(We,ve,je),Ue.setRenderTarget(null)}}function zm(){Cr.call(this),this.type="AudioListener",this.context=yp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function yh(a){Cr.call(this),this.type="Audio",this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function ng(a){yh.call(this,a),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Vm(a,h){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=void 0!==h?h:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}function Nc(a,h,g){this.binding=a,this.valueSize=g;var x,y=Float64Array;switch(h){case"quaternion":x=this._slerp;break;case"string":case"bool":y=Array,x=this._select;break;default:x=this._lerp}this.buffer=new y(4*g),this._mixBufferRegion=x,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Fa(a,h,g){this.path=h,this.parsedPath=g||Fa.parseTrackName(h),this.node=Fa.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a}function vc(a){this.uuid=xs.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var h={};this._indicesByUUID=h;for(var g=0,y=arguments.length;g!==y;++g)h[arguments[g].uuid]=g;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var x=this;this.stats={objects:{get total(){return x._objects.length},get inUse(){return this.total-x.nCachedObjects_}},get bindingsPerObject(){return x._bindings.length}}}function yc(a,h,g){this._mixer=a,this._clip=h,this._localRoot=g||null;for(var y=h.tracks,x=y.length,D=new Array(x),F={endingStart:gs,endingEnd:gs},H=0;H!==x;++H){var le=y[H].createInterpolant(null);D[H]=le,le.settings=F}this._interpolantSettings=F,this._interpolants=D,this._propertyBindings=new Array(x),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=pr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ig(a){this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Um(a){"string"==typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=arguments[1]),this.value=a}function qu(){Lr.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Pf(a,h,g,y){this.uuid=xs.generateUUID(),this.data=a,this.itemSize=h,this.offset=g,this.normalized=!0===y}function md(a,h){this.uuid=xs.generateUUID(),this.array=a,this.stride=h,this.count=void 0!==a?a.length/h:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function _h(a,h,g){md.call(this,a,h),this.meshPerAttribute=g||1}function Jd(a,h,g){gr.call(this,a,h),this.meshPerAttribute=g||1}function ru(a,h,g,y){this.ray=new oa(a,h),this.near=g||0,this.far=y||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function vd(a,h){return a.distance-h.distance}function _p(a,h,g,y){if(!1!==a.visible&&(a.raycast(h,g),!0===y))for(var x=a.children,D=0,F=x.length;D<F;D++)_p(x[D],h,g,!0)}function Hm(a){this.autoStart=void 0===a||a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function $_(a){this.points=a;var y,x,D,F,H,le,se,ve,we,h=[],g={x:0,y:0,z:0};function Ue(We,je,pt,ft,ut,Et,Mt){var nn=.5*(pt-We),qt=.5*(ft-je);return(2*(je-pt)+nn+qt)*Mt+(-3*(je-pt)-2*nn-qt)*Et+nn*ut+je}this.initFromArray=function(We){this.points=[];for(var je=0;je<We.length;je++)this.points[je]={x:We[je][0],y:We[je][1],z:We[je][2]}},this.getPoint=function(We){return y=(this.points.length-1)*We,x=Math.floor(y),D=y-x,h[0]=0===x?x:x-1,h[1]=x,h[2]=x>this.points.length-2?this.points.length-1:x+1,h[3]=x>this.points.length-3?this.points.length-1:x+2,g.x=Ue((le=this.points[h[0]]).x,(se=this.points[h[1]]).x,(ve=this.points[h[2]]).x,(we=this.points[h[3]]).x,D,F=D*D,H=D*F),g.y=Ue(le.y,se.y,ve.y,we.y,D,F,H),g.z=Ue(le.z,se.z,ve.z,we.z,D,F,H),g},this.getControlPointsArray=function(){var We,je,pt=this.points.length,ft=[];for(We=0;We<pt;We++)ft[We]=[(je=this.points[We]).x,je.y,je.z];return ft},this.getLength=function(We){var je,pt,ft,ut,Mt=0,nn=0,qt=new on,yn=new on,fn=[],an=0;for(fn[0]=0,We||(We=100),ft=this.points.length*We,qt.copy(this.points[0]),je=1;je<ft;je++)ut=this.getPoint(pt=je/ft),yn.copy(ut),an+=yn.distanceTo(qt),qt.copy(ut),(Mt=Math.floor((this.points.length-1)*pt))!==nn&&(fn[Mt]=an,nn=Mt);return fn[fn.length]=an,{chunks:fn,total:an}},this.reparametrizeByArcLength=function(We){var je,pt,ut,Et,nn,qt,yn=[],fn=new on,an=this.getLength();for(yn.push(fn.copy(this.points[0]).clone()),je=1;je<this.points.length;je++){for(nn=Math.ceil(We*(an.chunks[je]-an.chunks[je-1])/an.total),ut=(je-1)/(this.points.length-1),Et=je/(this.points.length-1),pt=1;pt<nn-1;pt++)qt=this.getPoint(ut+pt*(1/nn)*(Et-ut)),yn.push(fn.copy(qt).clone());yn.push(fn.copy(this.points[je]).clone())}this.points=yn}}function nm(a,h,g){return this.radius=void 0!==a?a:1,this.phi=void 0!==h?h:0,this.theta=void 0!==g?g:0,this}function bl(a,h,g){return this.radius=void 0!==a?a:1,this.theta=void 0!==h?h:0,this.y=void 0!==g?g:0,this}function ua(a,h){wa.call(this,a,h),this.animationsMap={},this.animationsList=[];var g=this.geometry.morphTargets.length,y="__default";this.createAnimation(y,0,g-1,g/1),this.setAnimationWeight(y,1)}function kf(a){Cr.call(this),this.material=a,this.render=function(h){}}function rg(a,h,g,y){this.object=a,this.size=void 0!==h?h:1;var x=void 0!==g?g:16711680,D=void 0!==y?y:1,F=0,H=this.object.geometry;H&&H.isGeometry?F=3*H.faces.length:H&&H.isBufferGeometry&&(F=H.attributes.normal.count);var le=new Lr,se=new ls(2*F*3,3);le.addAttribute("position",se),Co.call(this,le,new cl({color:x,linewidth:D})),this.matrixAutoUpdate=!1,this.update()}function jh(a){Cr.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;for(var h=new Lr,g=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],y=0,x=1;y<32;y++,x++){var F=y/32*Math.PI*2,H=x/32*Math.PI*2;g.push(Math.cos(F),Math.sin(F),1,Math.cos(H),Math.sin(H),1)}h.addAttribute("position",new ls(g,3));var le=new cl({fog:!1});this.cone=new Co(h,le),this.add(this.cone),this.update()}function $h(a){this.bones=this.getBoneList(a);for(var h=new Lr,g=[],y=[],x=new Kr(0,0,1),D=new Kr(0,1,0),F=0;F<this.bones.length;F++){var H=this.bones[F];H.parent&&H.parent.isBone&&(g.push(0,0,0),g.push(0,0,0),y.push(x.r,x.g,x.b),y.push(D.r,D.g,D.b))}h.addAttribute("position",new ls(g,3)),h.addAttribute("color",new ls(y,3));var le=new cl({vertexColors:N,depthTest:!1,depthWrite:!1,transparent:!0});Co.call(this,h,le),this.root=a,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function yd(a,h){this.light=a,this.light.updateMatrixWorld();var g=new ca(h,4,2),y=new Va({wireframe:!0,fog:!1});y.color.copy(this.light.color).multiplyScalar(this.light.intensity),wa.call(this,g,y),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function ef(a){Cr.call(this),this.light=a,this.light.updateMatrixWorld();var h=new Va({color:a.color,fog:!1}),g=new Va({color:a.color,fog:!1,wireframe:!0}),y=new Lr;y.addAttribute("position",new gr(new Float32Array(18),3)),this.add(new wa(y,h)),this.add(new wa(y,g)),this.update()}function _d(a,h){Cr.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;var g=new tu(h);g.rotateY(.5*Math.PI);var y=new Va({vertexColors:N,wireframe:!0}),x=g.getAttribute("position"),D=new Float32Array(3*x.count);g.addAttribute("color",new gr(D,3)),this.add(new wa(g,y)),this.update()}function sg(a,h,g,y){a=a||10,h=h||10,g=new Kr(void 0!==g?g:4473924),y=new Kr(void 0!==y?y:8947848);for(var x=h/2,D=2*a/h,F=[],H=[],le=0,se=0,ve=-a;le<=h;le++,ve+=D){F.push(-a,0,ve,a,0,ve),F.push(ve,0,-a,ve,0,a);var we=le===x?g:y;we.toArray(H,se),we.toArray(H,se+=3),we.toArray(H,se+=3),we.toArray(H,se+=3),se+=3}var Ue=new Lr;Ue.addAttribute("position",new ls(F,3)),Ue.addAttribute("color",new ls(H,3));var We=new cl({vertexColors:N});Co.call(this,Ue,We)}function Xu(a,h,g,y,x,D){a=a||10,h=h||16,g=g||8,y=y||64,x=new Kr(void 0!==x?x:4473924),D=new Kr(void 0!==D?D:8947848);var le,se,ve,we,Ue,We,je,F=[],H=[];for(we=0;we<=h;we++)ve=we/h*(2*Math.PI),le=Math.sin(ve)*a,se=Math.cos(ve)*a,F.push(0,0,0),F.push(le,0,se),H.push((je=1&we?x:D).r,je.g,je.b),H.push(je.r,je.g,je.b);for(we=0;we<=g;we++)for(je=1&we?x:D,We=a-a/g*we,Ue=0;Ue<y;Ue++)ve=Ue/y*(2*Math.PI),le=Math.sin(ve)*We,se=Math.cos(ve)*We,F.push(le,0,se),H.push(je.r,je.g,je.b),ve=(Ue+1)/y*(2*Math.PI),le=Math.sin(ve)*We,se=Math.cos(ve)*We,F.push(le,0,se),H.push(je.r,je.g,je.b);var pt=new Lr;pt.addAttribute("position",new ls(F,3)),pt.addAttribute("color",new ls(H,3));var ft=new cl({vertexColors:N});Co.call(this,pt,ft)}function qh(a,h,g,y){this.object=a,this.size=void 0!==h?h:1;var x=void 0!==g?g:16776960,D=void 0!==y?y:1,F=0,H=this.object.geometry;H&&H.isGeometry?F=H.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var le=new Lr,se=new ls(2*F*3,3);le.addAttribute("position",se),Co.call(this,le,new cl({color:x,linewidth:D})),this.matrixAutoUpdate=!1,this.update()}function og(a,h){Cr.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,void 0===h&&(h=1);var g=new Lr;g.addAttribute("position",new ls([-h,h,0,h,h,0,h,-h,0,-h,-h,0,-h,h,0],3));var y=new cl({fog:!1});this.add(new vu(g,y)),(g=new Lr).addAttribute("position",new ls([0,0,0,0,0,1],3)),this.add(new vu(g,y)),this.update()}function im(a){var h=new Lr,g=new cl({color:16777215,vertexColors:ae}),y=[],x=[],D={},F=new Kr(16755200),H=new Kr(16711680),le=new Kr(43775),se=new Kr(16777215),ve=new Kr(3355443);function we(We,je,pt){Ue(We,pt),Ue(je,pt)}function Ue(We,je){y.push(0,0,0),x.push(je.r,je.g,je.b),void 0===D[We]&&(D[We]=[]),D[We].push(y.length/3-1)}we("n1","n2",F),we("n2","n4",F),we("n4","n3",F),we("n3","n1",F),we("f1","f2",F),we("f2","f4",F),we("f4","f3",F),we("f3","f1",F),we("n1","f1",F),we("n2","f2",F),we("n3","f3",F),we("n4","f4",F),we("p","n1",H),we("p","n2",H),we("p","n3",H),we("p","n4",H),we("u1","u2",le),we("u2","u3",le),we("u3","u1",le),we("c","t",se),we("p","c",ve),we("cn1","cn2",ve),we("cn3","cn4",ve),we("cf1","cf2",ve),we("cf3","cf4",ve),h.addAttribute("position",new ls(y,3)),h.addAttribute("color",new ls(x,3)),Co.call(this,h,g),this.camera=a,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=D,this.update()}function ag(a,h){void 0===h&&(h=16776960);var g=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=new Float32Array(24),x=new Lr;x.setIndex(new gr(g,1)),x.addAttribute("position",new gr(y,3)),Co.call(this,x,new cl({color:h})),void 0!==a&&this.update(a)}Object.assign(tg.prototype,{load:function(a,h,g,y){var x=new Do(this.manager);x.setResponseType("arraybuffer"),x.load(a,function(D){yp.getContext().decodeAudioData(D,function(H){h(H)})},g,y)}}),Oa.prototype=Object.assign(Object.create(eo.prototype),{constructor:Oa,isRectAreaLight:!0,copy:function(a){return eo.prototype.copy.call(this,a),this.width=a.width,this.height=a.height,this}}),Object.assign(Bm.prototype,{update:function(){var a,h,g,y,x,D,F,H=new bs,le=new bs;return function(ve){if(a!==this||h!==ve.focus||g!==ve.fov||y!==ve.aspect*this.aspect||x!==ve.near||D!==ve.far||F!==ve.zoom){a=this,h=ve.focus,g=ve.fov,y=ve.aspect*this.aspect,x=ve.near,D=ve.far,F=ve.zoom;var ft,ut,Ue=ve.projectionMatrix.clone(),We=this.eyeSep/2,je=We*x/h,pt=x*Math.tan(xs.DEG2RAD*g*.5)/F;le.elements[12]=-We,H.elements[12]=We,Ue.elements[0]=2*x/((ut=pt*y+je)-(ft=-pt*y+je)),Ue.elements[8]=(ut+ft)/(ut-ft),this.cameraL.projectionMatrix.copy(Ue),Ue.elements[0]=2*x/((ut=pt*y-je)-(ft=-pt*y-je)),Ue.elements[8]=(ut+ft)/(ut-ft),this.cameraR.projectionMatrix.copy(Ue)}this.cameraL.matrixWorld.copy(ve.matrixWorld).multiply(le),this.cameraR.matrixWorld.copy(ve.matrixWorld).multiply(H)}}()}),(Ul.prototype=Object.create(Cr.prototype)).constructor=Ul,zm.prototype=Object.assign(Object.create(Cr.prototype),{constructor:zm,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=a,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new on,h=new kl,g=new on,y=new on;return function(D){Cr.prototype.updateMatrixWorld.call(this,D);var F=this.context.listener,H=this.up;this.matrixWorld.decompose(a,h,g),y.set(0,0,-1).applyQuaternion(h),F.positionX?(F.positionX.setValueAtTime(a.x,this.context.currentTime),F.positionY.setValueAtTime(a.y,this.context.currentTime),F.positionZ.setValueAtTime(a.z,this.context.currentTime),F.forwardX.setValueAtTime(y.x,this.context.currentTime),F.forwardY.setValueAtTime(y.y,this.context.currentTime),F.forwardZ.setValueAtTime(y.z,this.context.currentTime),F.upX.setValueAtTime(H.x,this.context.currentTime),F.upY.setValueAtTime(H.y,this.context.currentTime),F.upZ.setValueAtTime(H.z,this.context.currentTime)):(F.setPosition(a.x,a.y,a.z),F.setOrientation(y.x,y.y,y.z,H.x,H.y,H.z))}}()}),yh.prototype=Object.assign(Object.create(Cr.prototype),{constructor:yh,getOutput:function(){return this.gain},setNodeSource:function(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this},setBuffer:function(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.onended=this.onEnded.bind(this),a.playbackRate.setValueAtTime(this.playbackRate,this.startTime),a.start(0,this.startTime),this.isPlaying=!0,this.source=a,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var a=1,h=this.filters.length;a<h;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var a=1,h=this.filters.length;a<h;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){return a||(a=[]),!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(a){return this.gain.gain.value=a,this}}),ng.prototype=Object.assign(Object.create(yh.prototype),{constructor:ng,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new on;return function(g){Cr.prototype.updateMatrixWorld.call(this,g),a.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(a.x,a.y,a.z)}}()}),Object.assign(Vm.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var a=0,h=this.getFrequencyData(),g=0;g<h.length;g++)a+=h[g];return a/h.length}}),Nc.prototype={constructor:Nc,accumulate:function(a,h){var g=this.buffer,y=this.valueSize,x=a*y+y,D=this.cumulativeWeight;if(0===D){for(var F=0;F!==y;++F)g[x+F]=g[F];D=h}else this._mixBufferRegion(g,x,0,h/(D+=h),y);this.cumulativeWeight=D},apply:function(a){var h=this.valueSize,g=this.buffer,y=a*h+h,x=this.cumulativeWeight,D=this.binding;this.cumulativeWeight=0,x<1&&this._mixBufferRegion(g,y,3*h,1-x,h);for(var H=h,le=h+h;H!==le;++H)if(g[H]!==g[H+h]){D.setValue(g,y);break}},saveOriginalState:function(){var h=this.buffer,g=this.valueSize,y=3*g;this.binding.getValue(h,y);for(var x=g,D=y;x!==D;++x)h[x]=h[y+x%g];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,h,g,y,x){if(y>=.5)for(var D=0;D!==x;++D)a[h+D]=a[g+D]},_slerp:function(a,h,g,y,x){kl.slerpFlat(a,h,a,h,a,g,y)},_lerp:function(a,h,g,y,x){for(var D=1-y,F=0;F!==x;++F){var H=h+F;a[H]=a[H]*D+a[g+F]*y}}},Fa.prototype={constructor:Fa,getValue:function(h,g){this.bind(),this.getValue(h,g)},setValue:function(h,g){this.bind(),this.setValue(h,g)},bind:function(){var a=this.node,h=this.parsedPath,g=h.objectName,y=h.propertyName,x=h.propertyIndex;if(a||(a=Fa.findNode(this.rootNode,h.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,a){if(g){var D=h.objectIndex;switch(g){case"materials":if(!a.material)return void console.error("  can not bind to material as node does not have a material",this);if(!a.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);a=a.material.materials;break;case"bones":if(!a.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);a=a.skeleton.bones;for(var F=0;F<a.length;F++)if(a[F].name===D){D=F;break}break;default:if(void 0===a[g])return void console.error("  can not bind to objectName of node, undefined",this);a=a[g]}if(void 0!==D){if(void 0===a[D])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);a=a[D]}}var H=a[y];if(void 0!==H){var se=this.Versioning.None;void 0!==a.needsUpdate?(se=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(se=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);var ve=this.BindingType.Direct;if(void 0!==x){if("morphTargetInfluences"===y){if(!a.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!a.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(F=0;F<this.node.geometry.morphTargets.length;F++)if(a.geometry.morphTargets[F].name===x){x=F;break}}ve=this.BindingType.ArrayElement,this.resolvedProperty=H,this.propertyIndex=x}else void 0!==H.fromArray&&void 0!==H.toArray?(ve=this.BindingType.HasFromToArray,this.resolvedProperty=H):void 0!==H.length?(ve=this.BindingType.EntireArray,this.resolvedProperty=H):this.propertyName=y;this.getValue=this.GetterByBindingType[ve],this.setValue=this.SetterByBindingTypeAndVersioning[ve][se]}else console.error("  trying to update property for track: "+h.nodeName+"."+y+" but it wasn't found.",a)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Fa.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Fa.prototype.getValue,_setValue_unbound:Fa.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(h,g){h[g]=this.node[this.propertyName]},function(h,g){for(var y=this.resolvedProperty,x=0,D=y.length;x!==D;++x)h[g++]=y[x]},function(h,g){h[g]=this.resolvedProperty[this.propertyIndex]},function(h,g){this.resolvedProperty.toArray(h,g)}],SetterByBindingTypeAndVersioning:[[function(h,g){this.node[this.propertyName]=h[g]},function(h,g){this.node[this.propertyName]=h[g],this.targetObject.needsUpdate=!0},function(h,g){this.node[this.propertyName]=h[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(h,g){for(var y=this.resolvedProperty,x=0,D=y.length;x!==D;++x)y[x]=h[g++]},function(h,g){for(var y=this.resolvedProperty,x=0,D=y.length;x!==D;++x)y[x]=h[g++];this.targetObject.needsUpdate=!0},function(h,g){for(var y=this.resolvedProperty,x=0,D=y.length;x!==D;++x)y[x]=h[g++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(h,g){this.resolvedProperty[this.propertyIndex]=h[g]},function(h,g){this.resolvedProperty[this.propertyIndex]=h[g],this.targetObject.needsUpdate=!0},function(h,g){this.resolvedProperty[this.propertyIndex]=h[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(h,g){this.resolvedProperty.fromArray(h,g)},function(h,g){this.resolvedProperty.fromArray(h,g),this.targetObject.needsUpdate=!0},function(h,g){this.resolvedProperty.fromArray(h,g),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),(Fa.Composite=function(a,h,g){var y=g||Fa.parseTrackName(h);this._targetGroup=a,this._bindings=a.subscribe_(h,y)}).prototype={constructor:Fa.Composite,getValue:function(a,h){this.bind();var y=this._bindings[this._targetGroup.nCachedObjects_];void 0!==y&&y.getValue(a,h)},setValue:function(a,h){for(var g=this._bindings,y=this._targetGroup.nCachedObjects_,x=g.length;y!==x;++y)g[y].setValue(a,h)},bind:function(){for(var a=this._bindings,h=this._targetGroup.nCachedObjects_,g=a.length;h!==g;++h)a[h].bind()},unbind:function(){for(var a=this._bindings,h=this._targetGroup.nCachedObjects_,g=a.length;h!==g;++h)a[h].unbind()}},Fa.create=function(a,h,g){return a&&a.isAnimationObjectGroup?new Fa.Composite(a,h,g):new Fa(a,h,g)},Fa.parseTrackName=function(a){var g=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(a);if(!g)throw new Error("cannot parse trackName at all: "+a);var y={nodeName:g[2],objectName:g[3],objectIndex:g[4],propertyName:g[5],propertyIndex:g[6]};if(null===y.propertyName||0===y.propertyName.length)throw new Error("can not parse propertyName from trackName: "+a);return y},Fa.findNode=function(a,h){if(!h||""===h||"root"===h||"."===h||-1===h||h===a.name||h===a.uuid)return a;if(a.skeleton){var y=function(F){for(var H=0;H<F.bones.length;H++){var le=F.bones[H];if(le.name===h)return le}return null}(a.skeleton);if(y)return y}if(a.children){var x=function(F){for(var H=0;H<F.length;H++){var le=F[H];if(le.name===h||le.uuid===h)return le;var se=x(le.children);if(se)return se}return null},D=x(a.children);if(D)return D}return null},vc.prototype={constructor:vc,isAnimationObjectGroup:!0,add:function(a){for(var h=this._objects,g=h.length,y=this.nCachedObjects_,x=this._indicesByUUID,D=this._paths,F=this._parsedPaths,H=this._bindings,le=H.length,se=0,ve=arguments.length;se!==ve;++se){var we=arguments[se],Ue=we.uuid,We=x[Ue],je=void 0;if(void 0===We){We=g++,x[Ue]=We,h.push(we);for(var pt=0,ft=le;pt!==ft;++pt)H[pt].push(new Fa(we,D[pt],F[pt]))}else if(We<y){je=h[We];var ut=--y,Et=h[ut];for(x[Et.uuid]=We,h[We]=Et,x[Ue]=ut,h[ut]=we,pt=0,ft=le;pt!==ft;++pt){var Mt=H[pt],nn=Mt[ut],qt=Mt[We];Mt[We]=nn,void 0===qt&&(qt=new Fa(we,D[pt],F[pt])),Mt[ut]=qt}}else h[We]!==je&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=y},remove:function(a){for(var h=this._objects,g=this.nCachedObjects_,y=this._indicesByUUID,x=this._bindings,D=x.length,F=0,H=arguments.length;F!==H;++F){var le=arguments[F],se=le.uuid,ve=y[se];if(void 0!==ve&&ve>=g){var we=g++,Ue=h[we];y[Ue.uuid]=ve,h[ve]=Ue,y[se]=we,h[we]=le;for(var We=0,je=D;We!==je;++We){var pt=x[We],ft=pt[we],ut=pt[ve];pt[ve]=ft,pt[we]=ut}}}this.nCachedObjects_=g},uncache:function(a){for(var h=this._objects,g=h.length,y=this.nCachedObjects_,x=this._indicesByUUID,D=this._bindings,F=D.length,H=0,le=arguments.length;H!==le;++H){var se=arguments[H],ve=se.uuid,we=x[ve];if(void 0!==we)if(delete x[ve],we<y){var Ue=--y,We=h[Ue],pt=h[je=--g];x[We.uuid]=we,h[we]=We,x[pt.uuid]=Ue,h[Ue]=pt,h.pop();for(var ft=0,ut=F;ft!==ut;++ft){var Mt=(Et=D[ft])[Ue],nn=Et[je];Et[we]=Mt,Et[Ue]=nn,Et.pop()}}else{var je;for(x[(pt=h[je=--g]).uuid]=we,h[we]=pt,h.pop(),ft=0,ut=F;ft!==ut;++ft){var Et;(Et=D[ft])[we]=Et[je],Et.pop()}}}this.nCachedObjects_=y},subscribe_:function(a,h){var g=this._bindingsIndicesByPath,y=g[a],x=this._bindings;if(void 0!==y)return x[y];var D=this._paths,F=this._parsedPaths,H=this._objects,se=this.nCachedObjects_,ve=new Array(H.length);g[a]=y=x.length,D.push(a),F.push(h),x.push(ve);for(var we=se,Ue=H.length;we!==Ue;++we)ve[we]=new Fa(H[we],a,h);return ve},unsubscribe_:function(a){var h=this._bindingsIndicesByPath,g=h[a];if(void 0!==g){var y=this._paths,x=this._parsedPaths,D=this._bindings,F=D.length-1,H=D[F];h[a[F]]=g,D[g]=H,D.pop(),x[g]=x[F],x.pop(),y[g]=y[F],y.pop()}}},yc.prototype={constructor:yc,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){return this._startTime=a,this},setLoop:function(a,h){return this.loop=a,this.repetitions=h,this},setEffectiveWeight:function(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,h,g){if(a.fadeOut(h),this.fadeIn(h),g){var y=this._clip.duration,x=a._clip.duration,F=y/x;a.warp(1,x/y,h),this.warp(F,1,h)}return this},crossFadeTo:function(a,h,g){return a.crossFadeFrom(this,h,g)},stopFading:function(){var a=this._weightInterpolant;return null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},setEffectiveTimeScale:function(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){return this.timeScale=this._clip.duration/a,this.stopWarping()},syncWith:function(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,h,g){var y=this._mixer,x=y.time,D=this._timeScaleInterpolant,F=this.timeScale;null===D&&(D=y._lendControlInterpolant(),this._timeScaleInterpolant=D);var H=D.parameterPositions,le=D.sampleValues;return H[0]=x,H[1]=x+g,le[0]=a/F,le[1]=h/F,this},stopWarping:function(){var a=this._timeScaleInterpolant;return null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,h,g,y){var x=this._startTime;if(null!==x){var D=(a-x)*g;if(D<0||0===g)return;this._startTime=null,h=g*D}h*=this._updateTimeScale(a);var F=this._updateTime(h),H=this._updateWeight(a);if(H>0)for(var le=this._interpolants,se=this._propertyBindings,ve=0,we=le.length;ve!==we;++ve)le[ve].evaluate(F),se[ve].accumulate(y,H)},_updateWeight:function(a){var h=0;if(this.enabled){h=this.weight;var g=this._weightInterpolant;if(null!==g){var y=g.evaluate(a)[0];h*=y,a>g.parameterPositions[1]&&(this.stopFading(),0===y&&(this.enabled=!1))}}return this._effectiveWeight=h,h},_updateTimeScale:function(a){var h=0;if(!this.paused){h=this.timeScale;var g=this._timeScaleInterpolant;null!==g&&(h*=g.evaluate(a)[0],a>g.parameterPositions[1]&&(this.stopWarping(),0===h?this.paused=!0:this.timeScale=h))}return this._effectiveTimeScale=h,h},_updateTime:function(a){var h=this.time+a;if(0===a)return h;var g=this._clip.duration,y=this.loop,x=this._loopCount;if(y===yr){-1===x&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(h>=g)h=g;else{if(!(h<0))break e;h=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:a<0?-1:1})}}else{var D=y===ur;if(-1===x&&(a>=0?(x=0,this._setEndings(!0,0===this.repetitions,D)):this._setEndings(0===this.repetitions,!0,D)),h>=g||h<0){var F=Math.floor(h/g);h-=g*F,x+=Math.abs(F);var H=this.repetitions-x;if(H<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,h=a>0?g:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(0===H){var le=a<0;this._setEndings(le,!le,D)}else this._setEndings(!1,!1,D);this._loopCount=x,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:F})}}if(D&&1==(1&x))return this.time=h,g-h}return this.time=h,h},_setEndings:function(a,h,g){var y=this._interpolantSettings;g?(y.endingStart=Ea,y.endingEnd=Ea):(y.endingStart=a?this.zeroSlopeAtStart?Ea:gs:ms,y.endingEnd=h?this.zeroSlopeAtEnd?Ea:gs:ms)},_scheduleFading:function(a,h,g){var y=this._mixer,x=y.time,D=this._weightInterpolant;null===D&&(D=y._lendControlInterpolant(),this._weightInterpolant=D);var F=D.parameterPositions,H=D.sampleValues;return F[0]=x,H[0]=h,F[1]=x+a,H[1]=g,this}},Object.assign(ig.prototype,X.prototype,{clipAction:function(a,h){var g=h||this._root,y=g.uuid,x="string"==typeof a?Ml.findByName(g,a):a,D=null!==x?x.uuid:a,F=this._actionsByClip[D],H=null;if(void 0!==F){var le=F.actionByRoot[y];if(void 0!==le)return le;H=F.knownActions[0],null===x&&(x=H._clip)}if(null===x)return null;var se=new yc(this,x,h);return this._bindAction(se,H),this._addInactiveAction(se,D,y),se},existingAction:function(a,h){var g=h||this._root,y=g.uuid,x="string"==typeof a?Ml.findByName(g,a):a,F=this._actionsByClip[x?x.uuid:a];return void 0!==F&&F.actionByRoot[y]||null},stopAllAction:function(){var a=this._actions,h=this._nActiveActions,g=this._bindings,y=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var x=0;x!==h;++x)a[x].reset();for(x=0;x!==y;++x)g[x].useCount=0;return this},update:function(a){for(var h=this._actions,g=this._nActiveActions,y=this.time+=a*=this.timeScale,x=Math.sign(a),D=this._accuIndex^=1,F=0;F!==g;++F){var H=h[F];H.enabled&&H._update(y,a,x,D)}var le=this._bindings,se=this._nActiveBindings;for(F=0;F!==se;++F)le[F].apply(D);return this},getRoot:function(){return this._root},uncacheClip:function(a){var h=this._actions,g=a.uuid,y=this._actionsByClip,x=y[g];if(void 0!==x){for(var D=x.knownActions,F=0,H=D.length;F!==H;++F){var le=D[F];this._deactivateAction(le);var se=le._cacheIndex,ve=h[h.length-1];le._cacheIndex=null,le._byClipCacheIndex=null,ve._cacheIndex=se,h[se]=ve,h.pop(),this._removeInactiveBindingsForAction(le)}delete y[g]}},uncacheRoot:function(a){var h=a.uuid,g=this._actionsByClip;for(var y in g){var D=g[y].actionByRoot[h];void 0!==D&&(this._deactivateAction(D),this._removeInactiveAction(D))}var H=this._bindingsByRootAndName[h];if(void 0!==H)for(var le in H){var se=H[le];se.restoreOriginalState(),this._removeInactiveBinding(se)}},uncacheAction:function(a,h){var g=this.existingAction(a,h);null!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}}),Object.assign(ig.prototype,{_bindAction:function(a,h){var g=a._localRoot||this._root,y=a._clip.tracks,x=y.length,D=a._propertyBindings,F=a._interpolants,H=g.uuid,le=this._bindingsByRootAndName,se=le[H];void 0===se&&(le[H]=se={});for(var ve=0;ve!==x;++ve){var we=y[ve],Ue=we.name,We=se[Ue];if(void 0!==We)D[ve]=We;else{if(void 0!==(We=D[ve])){null===We._cacheIndex&&(++We.referenceCount,this._addInactiveBinding(We,H,Ue));continue}++(We=new Nc(Fa.create(g,Ue,h&&h._propertyBindings[ve].binding.parsedPath),we.ValueTypeName,we.getValueSize())).referenceCount,this._addInactiveBinding(We,H,Ue),D[ve]=We}F[ve].resultBuffer=We.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var h=(a._localRoot||this._root).uuid,g=a._clip.uuid,y=this._actionsByClip[g];this._bindAction(a,y&&y.knownActions[0]),this._addInactiveAction(a,g,h)}for(var x=a._propertyBindings,D=0,F=x.length;D!==F;++D){var H=x[D];0==H.useCount++&&(this._lendBinding(H),H.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var h=a._propertyBindings,g=0,y=h.length;g!==y;++g){var x=h[g];0==--x.useCount&&(x.restoreOriginalState(),this._takeBackBinding(x))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){var h=a._cacheIndex;return null!==h&&h<this._nActiveActions},_addInactiveAction:function(a,h,g){var y=this._actions,x=this._actionsByClip,D=x[h];if(void 0===D)D={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,x[h]=D;else{var F=D.knownActions;a._byClipCacheIndex=F.length,F.push(a)}a._cacheIndex=y.length,y.push(a),D.actionByRoot[g]=a},_removeInactiveAction:function(a){var h=this._actions,g=h[h.length-1],y=a._cacheIndex;g._cacheIndex=y,h[y]=g,h.pop(),a._cacheIndex=null;var x=a._clip.uuid,D=this._actionsByClip,F=D[x],H=F.knownActions,le=H[H.length-1],se=a._byClipCacheIndex;le._byClipCacheIndex=se,H[se]=le,H.pop(),a._byClipCacheIndex=null,delete F.actionByRoot[(h._localRoot||this._root).uuid],0===H.length&&delete D[x],this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){for(var h=a._propertyBindings,g=0,y=h.length;g!==y;++g){var x=h[g];0==--x.referenceCount&&this._removeInactiveBinding(x)}},_lendAction:function(a){var h=this._actions,g=a._cacheIndex,y=this._nActiveActions++,x=h[y];a._cacheIndex=y,h[y]=a,x._cacheIndex=g,h[g]=x},_takeBackAction:function(a){var h=this._actions,g=a._cacheIndex,y=--this._nActiveActions,x=h[y];a._cacheIndex=y,h[y]=a,x._cacheIndex=g,h[g]=x},_addInactiveBinding:function(a,h,g){var y=this._bindingsByRootAndName,x=y[h],D=this._bindings;void 0===x&&(y[h]=x={}),x[g]=a,a._cacheIndex=D.length,D.push(a)},_removeInactiveBinding:function(a){var h=this._bindings,g=a.binding,y=g.rootNode.uuid,x=g.path,D=this._bindingsByRootAndName,F=D[y],H=h[h.length-1],le=a._cacheIndex;H._cacheIndex=le,h[le]=H,h.pop(),delete F[x];e:{for(var se in F)break e;delete D[y]}},_lendBinding:function(a){var h=this._bindings,g=a._cacheIndex,y=this._nActiveBindings++,x=h[y];a._cacheIndex=y,h[y]=a,x._cacheIndex=g,h[g]=x},_takeBackBinding:function(a){var h=this._bindings,g=a._cacheIndex,y=--this._nActiveBindings,x=h[y];a._cacheIndex=y,h[y]=a,x._cacheIndex=g,h[g]=x},_lendControlInterpolant:function(){var a=this._controlInterpolants,h=this._nActiveControlInterpolants++,g=a[h];return void 0===g&&((g=new Yd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=h,a[h]=g),g},_takeBackControlInterpolant:function(a){var h=this._controlInterpolants,g=a.__cacheIndex,y=--this._nActiveControlInterpolants,x=h[y];a.__cacheIndex=y,h[y]=a,x.__cacheIndex=g,h[g]=x},_controlInterpolantsResultBuffer:new Float32Array(1)}),Um.prototype.clone=function(){return new Um(void 0===this.value.clone?this.value:this.value.clone())},(qu.prototype=Object.create(Lr.prototype)).constructor=qu,qu.prototype.isInstancedBufferGeometry=!0,qu.prototype.addGroup=function(a,h,g){this.groups.push({start:a,count:h,materialIndex:g})},qu.prototype.copy=function(a){var h=a.index;null!==h&&this.setIndex(h.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var D=a.groups,F=0,H=D.length;F<H;F++){var le=D[F];this.addGroup(le.start,le.count,le.materialIndex)}return this},Pf.prototype={constructor:Pf,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(a,h){return this.data.array[a*this.data.stride+this.offset]=h,this},setY:function(a,h){return this.data.array[a*this.data.stride+this.offset+1]=h,this},setZ:function(a,h){return this.data.array[a*this.data.stride+this.offset+2]=h,this},setW:function(a,h){return this.data.array[a*this.data.stride+this.offset+3]=h,this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,h,g){return this.data.array[(a=a*this.data.stride+this.offset)+0]=h,this.data.array[a+1]=g,this},setXYZ:function(a,h,g,y){return this.data.array[(a=a*this.data.stride+this.offset)+0]=h,this.data.array[a+1]=g,this.data.array[a+2]=y,this},setXYZW:function(a,h,g,y,x){return this.data.array[(a=a*this.data.stride+this.offset)+0]=h,this.data.array[a+1]=g,this.data.array[a+2]=y,this.data.array[a+3]=x,this}},md.prototype={constructor:md,isInterleavedBuffer:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.dynamic=a.dynamic,this},copyAt:function(a,h,g){a*=this.stride,g*=h.stride;for(var y=0,x=this.stride;y<x;y++)this.array[a+y]=h.array[g+y];return this},set:function(a,h){return void 0===h&&(h=0),this.array.set(a,h),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){return this.onUploadCallback=a,this}},(_h.prototype=Object.create(md.prototype)).constructor=_h,_h.prototype.isInstancedInterleavedBuffer=!0,_h.prototype.copy=function(a){return md.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},(Jd.prototype=Object.create(gr.prototype)).constructor=Jd,Jd.prototype.isInstancedBufferAttribute=!0,Jd.prototype.copy=function(a){return gr.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},ru.prototype={constructor:ru,linePrecision:1,set:function(a,h){this.ray.set(a,h)},setFromCamera:function(a,h){h&&h.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(h.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(h).sub(this.ray.origin).normalize()):h&&h.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(h.near+h.far)/(h.near-h.far)).unproject(h),this.ray.direction.set(0,0,-1).transformDirection(h.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,h){var g=[];return _p(a,this,g,h),g.sort(vd),g},intersectObjects:function(a,h){var g=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g;for(var y=0,x=a.length;y<x;y++)_p(a[y],this,g,h);return g.sort(vd),g}},Hm.prototype={constructor:Hm,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running&&this.start(),this.running){var h=(performance||Date).now();a=(h-this.oldTime)/1e3,this.oldTime=h,this.elapsedTime+=a}return a}},nm.prototype={constructor:nm,set:function(a,h,g){return this.radius=a,this.phi=h,this.theta=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this},makeSafe:function(){var a=1e-6;return this.phi=Math.max(a,Math.min(Math.PI-a,this.phi)),this},setFromVector3:function(a){return this.radius=a.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(xs.clamp(a.y/this.radius,-1,1))),this}},bl.prototype={constructor:bl,set:function(a,h,g){return this.radius=a,this.theta=h,this.y=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.theta=a.theta,this.y=a.y,this},setFromVector3:function(a){return this.radius=Math.sqrt(a.x*a.x+a.z*a.z),this.theta=Math.atan2(a.x,a.z),this.y=a.y,this}},(ua.prototype=Object.create(wa.prototype)).constructor=ua,ua.prototype.createAnimation=function(a,h,g,y){var x={start:h,end:g,length:g-h+1,fps:y,duration:(g-h)/y,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=x,this.animationsList.push(x)},ua.prototype.autoCreateAnimations=function(a){for(var g,h=/([a-z]+)_?(\d+)/i,y={},x=this.geometry,D=0,F=x.morphTargets.length;D<F;D++){var le=x.morphTargets[D].name.match(h);le&&le.length>1&&(y[se=le[1]]||(y[se]={start:1/0,end:-1/0}),D<(ve=y[se]).start&&(ve.start=D),D>ve.end&&(ve.end=D),g||(g=se))}for(var se in y){var ve;this.createAnimation(se,(ve=y[se]).start,ve.end,a)}this.firstAnimation=g},ua.prototype.setAnimationDirectionForward=function(a){var h=this.animationsMap[a];h&&(h.direction=1,h.directionBackwards=!1)},ua.prototype.setAnimationDirectionBackward=function(a){var h=this.animationsMap[a];h&&(h.direction=-1,h.directionBackwards=!0)},ua.prototype.setAnimationFPS=function(a,h){var g=this.animationsMap[a];g&&(g.fps=h,g.duration=(g.end-g.start)/g.fps)},ua.prototype.setAnimationDuration=function(a,h){var g=this.animationsMap[a];g&&(g.duration=h,g.fps=(g.end-g.start)/g.duration)},ua.prototype.setAnimationWeight=function(a,h){var g=this.animationsMap[a];g&&(g.weight=h)},ua.prototype.setAnimationTime=function(a,h){var g=this.animationsMap[a];g&&(g.time=h)},ua.prototype.getAnimationTime=function(a){var h=0,g=this.animationsMap[a];return g&&(h=g.time),h},ua.prototype.getAnimationDuration=function(a){var h=-1,g=this.animationsMap[a];return g&&(h=g.duration),h},ua.prototype.playAnimation=function(a){var h=this.animationsMap[a];h?(h.time=0,h.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")},ua.prototype.stopAnimation=function(a){var h=this.animationsMap[a];h&&(h.active=!1)},ua.prototype.update=function(a){for(var h=0,g=this.animationsList.length;h<g;h++){var y=this.animationsList[h];if(y.active){var x=y.duration/y.length;y.time+=y.direction*a,y.mirroredLoop?(y.time>y.duration||y.time<0)&&(y.direction*=-1,y.time>y.duration&&(y.time=y.duration,y.directionBackwards=!0),y.time<0&&(y.time=0,y.directionBackwards=!1)):(y.time=y.time%y.duration,y.time<0&&(y.time+=y.duration));var D=y.start+xs.clamp(Math.floor(y.time/x),0,y.length-1),F=y.weight;D!==y.currentFrame&&(this.morphTargetInfluences[y.lastFrame]=0,this.morphTargetInfluences[y.currentFrame]=1*F,this.morphTargetInfluences[D]=0,y.lastFrame=y.currentFrame,y.currentFrame=D);var H=y.time%x/x;y.directionBackwards&&(H=1-H),y.currentFrame!==y.lastFrame?(this.morphTargetInfluences[y.currentFrame]=H*F,this.morphTargetInfluences[y.lastFrame]=(1-H)*F):this.morphTargetInfluences[y.currentFrame]=F}}},(kf.prototype=Object.create(Cr.prototype)).constructor=kf,kf.prototype.isImmediateRenderObject=!0,(rg.prototype=Object.create(Co.prototype)).constructor=rg,rg.prototype.update=function(){var a=new on,h=new on,g=new Nt;return function(){var x=["a","b","c"];this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);var D=this.object.matrixWorld,F=this.geometry.attributes.position,H=this.object.geometry;if(H&&H.isGeometry)for(var le=H.vertices,se=H.faces,ve=0,we=0,Ue=se.length;we<Ue;we++)for(var We=se[we],je=0,pt=We.vertexNormals.length;je<pt;je++){var ut=We.vertexNormals[je];a.copy(le[We[x[je]]]).applyMatrix4(D),h.copy(ut).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),F.setXYZ(ve,a.x,a.y,a.z),F.setXYZ(ve+=1,h.x,h.y,h.z),ve+=1}else if(H&&H.isBufferGeometry){var Et=H.attributes.position,Mt=H.attributes.normal;for(ve=0,je=0,pt=Et.count;je<pt;je++)a.set(Et.getX(je),Et.getY(je),Et.getZ(je)).applyMatrix4(D),h.set(Mt.getX(je),Mt.getY(je),Mt.getZ(je)),h.applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),F.setXYZ(ve,a.x,a.y,a.z),F.setXYZ(ve+=1,h.x,h.y,h.z),ve+=1}return F.needsUpdate=!0,this}}(),(jh.prototype=Object.create(Cr.prototype)).constructor=jh,jh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},jh.prototype.update=function(){var a=new on,h=new on;return function(){var y=this.light.distance?this.light.distance:1e3,x=y*Math.tan(this.light.angle);this.cone.scale.set(x,x,y),a.setFromMatrixPosition(this.light.matrixWorld),h.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(h.sub(a)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),($h.prototype=Object.create(Co.prototype)).constructor=$h,$h.prototype.getBoneList=function(a){var h=[];a&&a.isBone&&h.push(a);for(var g=0;g<a.children.length;g++)h.push.apply(h,this.getBoneList(a.children[g]));return h},$h.prototype.update=function(){var a=new on,h=new bs,g=new bs;return function(){var x=this.geometry,D=x.getAttribute("position");g.getInverse(this.root.matrixWorld);for(var F=0,H=0;F<this.bones.length;F++){var le=this.bones[F];le.parent&&le.parent.isBone&&(h.multiplyMatrices(g,le.matrixWorld),a.setFromMatrixPosition(h),D.setXYZ(H,a.x,a.y,a.z),h.multiplyMatrices(g,le.parent.matrixWorld),a.setFromMatrixPosition(h),D.setXYZ(H+1,a.x,a.y,a.z),H+=2)}x.getAttribute("position").needsUpdate=!0}}(),(yd.prototype=Object.create(wa.prototype)).constructor=yd,yd.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},yd.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},(ef.prototype=Object.create(Cr.prototype)).constructor=ef,ef.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},ef.prototype.update=function(){var a=new on,h=new on;return function(){var y=this.children[0],x=this.children[1];if(this.light.target){a.setFromMatrixPosition(this.light.matrixWorld),h.setFromMatrixPosition(this.light.target.matrixWorld);var D=h.clone().sub(a);y.lookAt(D),x.lookAt(D)}y.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),x.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var F=.5*this.light.width,H=.5*this.light.height,le=y.geometry.getAttribute("position"),se=le.array;se[0]=F,se[1]=-H,se[2]=0,se[3]=F,se[4]=H,se[5]=0,se[6]=-F,se[7]=H,se[8]=0,se[9]=-F,se[10]=H,se[11]=0,se[12]=-F,se[13]=-H,se[14]=0,se[15]=F,se[16]=-H,se[17]=0,le.needsUpdate=!0}}(),(_d.prototype=Object.create(Cr.prototype)).constructor=_d,_d.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},_d.prototype.update=function(){var a=new on,h=new Kr,g=new Kr;return function(){var x=this.children[0],D=x.geometry.getAttribute("color");h.copy(this.light.color).multiplyScalar(this.light.intensity),g.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var F=0,H=D.count;F<H;F++){var le=F<H/2?h:g;D.setXYZ(F,le.r,le.g,le.b)}x.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()),D.needsUpdate=!0}}(),(sg.prototype=Object.create(Co.prototype)).constructor=sg,(Xu.prototype=Object.create(Co.prototype)).constructor=Xu,(qh.prototype=Object.create(Co.prototype)).constructor=qh,qh.prototype.update=function(){var a=new on,h=new on,g=new Nt;return function(){this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);for(var x=this.object.matrixWorld,D=this.geometry.attributes.position,F=this.object.geometry,H=F.vertices,le=F.faces,se=0,ve=0,we=le.length;ve<we;ve++){var Ue=le[ve],We=Ue.normal;a.copy(H[Ue.a]).add(H[Ue.b]).add(H[Ue.c]).divideScalar(3).applyMatrix4(x),h.copy(We).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),D.setXYZ(se,a.x,a.y,a.z),D.setXYZ(se+=1,h.x,h.y,h.z),se+=1}return D.needsUpdate=!0,this}}(),(og.prototype=Object.create(Cr.prototype)).constructor=og,og.prototype.dispose=function(){var a=this.children[0],h=this.children[1];a.geometry.dispose(),a.material.dispose(),h.geometry.dispose(),h.material.dispose()},og.prototype.update=function(){var a=new on,h=new on,g=new on;return function(){a.setFromMatrixPosition(this.light.matrixWorld),h.setFromMatrixPosition(this.light.target.matrixWorld),g.subVectors(h,a);var x=this.children[0],D=this.children[1];x.lookAt(g),x.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),D.lookAt(g),D.scale.z=g.length()}}(),(im.prototype=Object.create(Co.prototype)).constructor=im,im.prototype.update=function(){var a,h,g=new on,y=new Ua;function x(D,F,H,le){g.set(F,H,le).unproject(y);var se=h[D];if(void 0!==se)for(var ve=a.getAttribute("position"),we=0,Ue=se.length;we<Ue;we++)ve.setXYZ(se[we],g.x,g.y,g.z)}return function(){a=this.geometry,h=this.pointMap,y.projectionMatrix.copy(this.camera.projectionMatrix),x("c",0,0,-1),x("t",0,0,1),x("n1",-1,-1,-1),x("n2",1,-1,-1),x("n3",-1,1,-1),x("n4",1,1,-1),x("f1",-1,-1,1),x("f2",1,-1,1),x("f3",-1,1,1),x("f4",1,1,1),x("u1",.7,1.1,-1),x("u2",-.7,1.1,-1),x("u3",0,2,-1),x("cf1",-1,0,1),x("cf2",1,0,1),x("cf3",0,-1,1),x("cf4",0,1,1),x("cn1",-1,0,-1),x("cn2",1,0,-1),x("cn3",0,-1,-1),x("cn4",0,1,-1),a.getAttribute("position").needsUpdate=!0}}(),(ag.prototype=Object.create(Co.prototype)).constructor=ag,ag.prototype.update=function(){var a=new Ms;return function(g){if(g&&g.isBox3?a.copy(g):a.setFromObject(g),!a.isEmpty()){var y=a.min,x=a.max,D=this.geometry.attributes.position,F=D.array;F[0]=x.x,F[1]=x.y,F[2]=x.z,F[3]=y.x,F[4]=x.y,F[5]=x.z,F[6]=y.x,F[7]=y.y,F[8]=x.z,F[9]=x.x,F[10]=y.y,F[11]=x.z,F[12]=x.x,F[13]=x.y,F[14]=y.z,F[15]=y.x,F[16]=x.y,F[17]=y.z,F[18]=y.x,F[19]=y.y,F[20]=y.z,F[21]=x.x,F[22]=y.y,F[23]=y.z,D.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var lg=new Lr;lg.addAttribute("position",new ls([0,0,0,0,1,0],3));var Fv=new Tf(0,.5,1,5,1);function Bc(a,h,g,y,x,D){Cr.call(this),void 0===y&&(y=16776960),void 0===g&&(g=1),void 0===x&&(x=.2*g),void 0===D&&(D=.2*x),this.position.copy(h),this.line=new vu(lg,new cl({color:y})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new wa(Fv,new Va({color:y})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(g,x,D)}function Of(a){var h=[0,0,0,a=a||1,0,0,0,0,0,0,a,0,0,0,0,0,0,a],y=new Lr;y.addAttribute("position",new ls(h,3)),y.addAttribute("color",new ls([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var x=new cl({vertexColors:N});Co.call(this,y,x)}Fv.translate(0,-.5,0),(Bc.prototype=Object.create(Cr.prototype)).constructor=Bc,Bc.prototype.setDirection=function(){var h,a=new on;return function(y){y.y>.99999?this.quaternion.set(0,0,0,1):y.y<-.99999?this.quaternion.set(1,0,0,0):(a.set(y.z,0,-y.x).normalize(),h=Math.acos(y.y),this.quaternion.setFromAxisAngle(a,h))}}(),Bc.prototype.setLength=function(a,h,g){void 0===h&&(h=.2*a),void 0===g&&(g=.2*h),this.line.scale.set(1,Math.max(0,a-h),1),this.line.updateMatrix(),this.cone.scale.set(g,h,g),this.cone.position.y=a,this.cone.updateMatrix()},Bc.prototype.setColor=function(a){this.line.material.color.copy(a),this.cone.material.color.copy(a)},(Of.prototype=Object.create(Co.prototype)).constructor=Of;var Gm=function(){var a=new on,h=new x,g=new x,y=new x;function x(){}return x.prototype.init=function(D,F,H,le){this.c0=D,this.c1=H,this.c2=-3*D+3*F-2*H-le,this.c3=2*D-2*F+H+le},x.prototype.initNonuniformCatmullRom=function(D,F,H,le,se,ve,we){var Ue=(F-D)/se-(H-D)/(se+ve)+(H-F)/ve,We=(H-F)/ve-(le-F)/(ve+we)+(le-H)/we;this.init(F,H,Ue*=ve,We*=ve)},x.prototype.initCatmullRom=function(D,F,H,le,se){this.init(F,H,se*(H-D),se*(le-F))},x.prototype.calc=function(D){var F=D*D;return this.c0+this.c1*D+this.c2*F+this.c3*(F*D)},Vl.create(function(D){this.points=D||[],this.closed=!1},function(D){var H,le,se,ve,we,Ue,We,je,F=this.points;if((ve=F.length)<2&&console.log("duh, you need at least 2 points"),se=(H=(ve-(this.closed?0:1))*D)-(le=Math.floor(H)),this.closed?le+=le>0?0:(Math.floor(Math.abs(le)/F.length)+1)*F.length:0===se&&le===ve-1&&(le=ve-2,se=1),this.closed||le>0?we=F[(le-1)%ve]:(a.subVectors(F[0],F[1]).add(F[0]),we=a),Ue=F[le%ve],We=F[(le+1)%ve],this.closed||le+2<ve?je=F[(le+2)%ve]:(a.subVectors(F[ve-1],F[ve-2]).add(F[ve-1]),je=a),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var pt="chordal"===this.type?.5:.25,ft=Math.pow(we.distanceToSquared(Ue),pt),ut=Math.pow(Ue.distanceToSquared(We),pt),Et=Math.pow(We.distanceToSquared(je),pt);ut<1e-4&&(ut=1),ft<1e-4&&(ft=ut),Et<1e-4&&(Et=ut),h.initNonuniformCatmullRom(we.x,Ue.x,We.x,je.x,ft,ut,Et),g.initNonuniformCatmullRom(we.y,Ue.y,We.y,je.y,ft,ut,Et),y.initNonuniformCatmullRom(we.z,Ue.z,We.z,je.z,ft,ut,Et)}else if("catmullrom"===this.type){var Mt=void 0!==this.tension?this.tension:.5;h.initCatmullRom(we.x,Ue.x,We.x,je.x,Mt),g.initCatmullRom(we.y,Ue.y,We.y,je.y,Mt),y.initCatmullRom(we.z,Ue.z,We.z,je.z,Mt)}return new on(h.calc(se),g.calc(se),y.calc(se))})}(),Hy=Vl.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===a?[]:a},function(a){var h=this.points,g=(h.length-1)*a,y=Math.floor(g),x=g-y,D=h[0==y?y:y-1],F=h[y],H=h[y>h.length-2?h.length-1:y+1],le=h[y>h.length-3?h.length-1:y+2],se=nc.interpolate;return new on(se(D.x,F.x,H.x,le.x,x),se(D.y,F.y,H.y,le.y,x),se(D.z,F.z,H.z,le.z,x))}),Gy=Vl.create(function(a,h,g,y){this.v0=a,this.v1=h,this.v2=g,this.v3=y},function(a){var h=Ra.b3;return new on(h(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),h(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),rm=Vl.create(function(a,h,g){this.v0=a,this.v1=h,this.v2=g},function(a){var h=Ra.b2;return new on(h(a,this.v0.x,this.v1.x,this.v2.x),h(a,this.v0.y,this.v1.y,this.v2.y),h(a,this.v0.z,this.v1.z,this.v2.z))}),mb=Vl.create(function(a,h){this.v1=a,this.v2=h},function(a){if(1===a)return this.v2.clone();var h=new on;return h.subVectors(this.v2,this.v1),h.multiplyScalar(a),h.add(this.v1),h});function bp(a,h,g,y,x,D){pd.call(this,a,h,g,g,y,x,D)}(bp.prototype=Object.create(pd.prototype)).constructor=bp;var hl={createMultiMaterialObject:function(a,h){for(var g=new lp,y=0,x=h.length;y<x;y++)g.add(new wa(a,h[y]));return g},detach:function(a,h,g){a.applyMatrix(h.matrixWorld),h.remove(a),g.add(a)},attach:function(a,h,g){var y=new bs;y.getInverse(g.matrixWorld),a.applyMatrix(y),h.remove(a),g.add(a)}};function Wm(a,h,g,y,x,D,F){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Bo(a,h,g,x,D,F)}var Ff=0,Nv=1;function vb(a){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new yu(a)}function Wy(a,h){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new $s(a,h)}function jy(a){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new mu(a)}function q_(a,h){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new $s(a,h)}function X_(a){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Oc(a)}function Y_(a){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Oc(a)}function $y(a){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Oc(a)}function jm(a,h,g){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new on(a,h,g)}function Bv(a,h){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new gr(a,h).setDynamic(!0)}function Au(a,h){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Oh(a,h)}function K_(a,h){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new vl(a,h)}function pa(a,h){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Bd(a,h)}function Aa(a,h){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new ap(a,h)}function zv(a,h){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new zd(a,h)}function Xh(a,h){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Cf(a,h)}function Vv(a,h){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Bu(a,h)}function qy(a,h){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new ls(a,h)}function Z_(a,h){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Pc(a,h)}function $m(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Gm.call(this,a),this.type="catmullrom",this.closed=!0}function Xy(a,h){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ag(a,h)}function Q_(a,h){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Co(new _l(a.geometry),new cl({color:void 0!==h?h:16777215}))}function yb(a,h){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Co(new fh(a.geometry),new cl({color:void 0!==h?h:16777215}))}function tf(a){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Do(a)}$m.prototype=Object.create(Gm.prototype),sg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(ad.prototype,{center:function(a){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},size:function(a){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(a)}}),Object.assign(Ms.prototype,{center:function(a){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionSphere:function(a){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)},size:function(a){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(a)}}),Fl.prototype.center=function(a){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(a)},xs.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(Nt.prototype,{flattenToArrayOffset:function(a,h){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,h)},multiplyVector3:function(a){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToBuffer:function(a,h,g){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),Object.assign(bs.prototype,{extractPosition:function(a){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(a)},flattenToArrayOffset:function(a,h){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,h)},getPosition:function(){var a;return function(){return void 0===a&&(a=new on),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),a.applyProjection(this)},multiplyVector4:function(a){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),a.transformDirection(this)},crossVector:function(a){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a,h,g){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),It.prototype.isIntersectionLine=function(a){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(a)},kl.prototype.multiplyVector3=function(a){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)},Object.assign(oa.prototype,{isIntersectionBox:function(a){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionPlane:function(a){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(a)},isIntersectionSphere:function(a){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)}}),Object.assign($u.prototype,{extrude:function(a){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new nu(this,a)},makeGeometry:function(a){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Qp(this,a)}}),Object.assign(on.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,h){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(h,a)}}),Ds.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(Cr.prototype,{getChildByName:function(a){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,h){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(h,a)}}),Object.defineProperties(Cr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(la.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),xl.prototype.setLens=function(a,h){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==h&&(this.filmGauge=h),this.setFocalLength(a)},Object.defineProperties(eo.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=a}}}),Object.defineProperties(gr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Lr.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(a)},addDrawCall:function(a,h,g){void 0!==g&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(a,h)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Lr.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Um.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Zs.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new Kr}}}),Object.defineProperties(Sl.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(eu.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=a}}}),X.prototype=Object.assign(Object.create({constructor:X,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(a,this)}}),X.prototype),Object.assign(Gd.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Gd.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=a}}}),Object.defineProperties(Mo.prototype,{cullFace:{get:function(){return this.renderReverseSided?L:V},set:function(a){var h=a!==V;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+h+"."),this.renderReverseSided=h}}}),Object.defineProperties(Ec.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=a}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=a}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=a}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=a}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=a}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=a}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=a}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=a}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=a}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=a}}}),yh.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var h=this;return(new tg).load(a,function(y){h.setBuffer(y)}),this},Vm.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var sm={merge:function(a,h,g){var y;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),h.isMesh&&(h.matrixAutoUpdate&&h.updateMatrix(),y=h.matrix,h=h.geometry),a.merge(h,y,g)},center:function(a){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),a.center()}},Uv={crossOrigin:void 0,loadTexture:function(a,h,g,y){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var x=new Hh;x.setCrossOrigin(this.crossOrigin);var D=x.load(a,g,void 0,y);return h&&(D.mapping=h),D},loadTextureCube:function(a,h,g,y){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var x=new Fm;x.setCrossOrigin(this.crossOrigin);var D=x.load(a,g,void 0,y);return h&&(D.mapping=h),D},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Yy(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(a,h){console.warn("THREE.Projector: .projectVector() is now vector.project()."),a.project(h)},this.unprojectVector=function(a,h){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),a.unproject(h)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Ky(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}},2944:function(He,be,z){var X=typeof global<"u"&&global||typeof self<"u"&&self||window,M=Function.prototype.apply;function U(O,V){this._id=O,this._clearFn=V}be.setTimeout=function(){return new U(M.call(setTimeout,X,arguments),clearTimeout)},be.setInterval=function(){return new U(M.call(setInterval,X,arguments),clearInterval)},be.clearTimeout=be.clearInterval=function(O){O&&O.close()},U.prototype.unref=U.prototype.ref=function(){},U.prototype.close=function(){this._clearFn.call(X,this._id)},be.enroll=function(O,V){clearTimeout(O._idleTimeoutId),O._idleTimeout=V},be.unenroll=function(O){clearTimeout(O._idleTimeoutId),O._idleTimeout=-1},be._unrefActive=be.active=function(O){clearTimeout(O._idleTimeoutId);var V=O._idleTimeout;V>=0&&(O._idleTimeoutId=setTimeout(function(){O._onTimeout&&O._onTimeout()},V))},z(6563),be.setImmediate=typeof self<"u"&&self.setImmediate||typeof global<"u"&&global.setImmediate||this&&this.setImmediate,be.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof global<"u"&&global.clearImmediate||this&&this.clearImmediate},9699:He=>{He.exports=/[\0-\x1F\x7F-\x9F]/},9127:He=>{He.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},6020:He=>{He.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},5450:He=>{He.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},9315:(He,be,z)=>{"use strict";be.Any=z(1129),be.Cc=z(9699),be.Cf=z(9127),be.P=z(6020),be.Z=z(5450)},1129:He=>{He.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},3532:He=>{function z(X){try{if(!global.localStorage)return!1}catch{return!1}var M=global.localStorage[X];return null!=M&&"true"===String(M).toLowerCase()}He.exports=function be(X,M){if(z("noDeprecation"))return X;var U=!1;return function O(){if(!U){if(z("throwDeprecation"))throw new Error(M);z("traceDeprecation")?console.trace(M):console.warn(M),U=!0}return X.apply(this,arguments)}}},4922:function(He,be){(function(){"use strict";be.stripBOM=function(z){return"\ufeff"===z[0]?z.substring(1):z}}).call(this)},4032:function(He,be,z){(function(){"use strict";var X,M,U,O,V,L={}.hasOwnProperty;X=z(7904),M=z(7067).defaults,O=function(R){return"string"==typeof R&&(R.indexOf("&")>=0||R.indexOf(">")>=0||R.indexOf("<")>=0)},V=function(R){return"<![CDATA["+U(R)+"]]>"},U=function(R){return R.replace("]]>","]]]]><![CDATA[>")},be.Builder=function(){function R(j){var J,Z;for(J in this.options={},Z=M[.2])!L.call(Z,J)||(this.options[J]=Z[J]);for(J in j)!L.call(j,J)||(this.options[J]=j[J])}return R.prototype.buildObject=function(j){var J,Z,te,ie,Y,G;return J=this.options.attrkey,Z=this.options.charkey,1===Object.keys(j).length&&this.options.rootName===M[.2].rootName?j=j[Y=Object.keys(j)[0]]:Y=this.options.rootName,G=this,te=function(oe,ye){var Ie,ne,ae,N,$;if("object"!=typeof ye)G.options.cdata&&O(ye)?oe.raw(V(ye)):oe.txt(ye);else if(Array.isArray(ye)){for(N in ye)if(L.call(ye,N))for($ in ne=ye[N])ae=ne[$],oe=te(oe.ele($),ae).up()}else for($ in ye)if(L.call(ye,$))if(ne=ye[$],$===J){if("object"==typeof ne)for(Ie in ne)oe=oe.att(Ie,ne[Ie])}else if($===Z)oe=G.options.cdata&&O(ne)?oe.raw(V(ne)):oe.txt(ne);else if(Array.isArray(ne))for(N in ne)!L.call(ne,N)||(oe="string"==typeof(ae=ne[N])?G.options.cdata&&O(ae)?oe.ele($).raw(V(ae)).up():oe.ele($,ae).up():te(oe.ele($),ae).up());else"object"==typeof ne?oe=te(oe.ele($),ne).up():"string"==typeof ne&&G.options.cdata&&O(ne)?oe=oe.ele($).raw(V(ne)).up():(null==ne&&(ne=""),oe=oe.ele($,ne.toString()).up());return oe},ie=X.create(Y,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),te(ie,j).end(this.options.renderOpts)},R}()}).call(this)},7067:function(He,be){(function(){be.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},2238:function(He,be,z){(function(){"use strict";var X,M,U,O,V,L,R,j,J=function(ie,Y){return function(){return ie.apply(Y,arguments)}},te={}.hasOwnProperty;R=z(1503),U=z(9069),X=z(4922),L=z(3749),j=z(2944).setImmediate,M=z(7067).defaults,O=function(ie){return"object"==typeof ie&&null!=ie&&0===Object.keys(ie).length},V=function(ie,Y,G){var oe,ye;for(oe=0,ye=ie.length;oe<ye;oe++)Y=(0,ie[oe])(Y,G);return Y},be.Parser=function(ie){function Y(G){var oe,ye;if(this.parseStringPromise=J(this.parseStringPromise,this),this.parseString=J(this.parseString,this),this.reset=J(this.reset,this),this.assignOrPush=J(this.assignOrPush,this),this.processAsync=J(this.processAsync,this),!(this instanceof be.Parser))return new be.Parser(G);for(oe in this.options={},ye=M[.2])!te.call(ye,oe)||(this.options[oe]=ye[oe]);for(oe in G)!te.call(G,oe)||(this.options[oe]=G[oe]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(L.normalize)),this.reset()}return function(ie,Y){for(var G in Y)te.call(Y,G)&&(ie[G]=Y[G]);function oe(){this.constructor=ie}oe.prototype=Y.prototype,ie.prototype=new oe,ie.__super__=Y.prototype}(Y,ie),Y.prototype.processAsync=function(){var G,oe;try{return this.remaining.length<=this.options.chunkSize?(G=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(G),this.saxParser.close()):(G=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(G),j(this.processAsync))}catch(ye){if(oe=ye,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(oe)}},Y.prototype.assignOrPush=function(G,oe,ye){return oe in G?(G[oe]instanceof Array||(G[oe]=[G[oe]]),G[oe].push(ye)):G[oe]=this.options.explicitArray?[ye]:ye},Y.prototype.reset=function(){var G,oe,ye,Ie,ne;return this.removeAllListeners(),this.saxParser=R.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(ne=this,function(ae){if(ne.saxParser.resume(),!ne.saxParser.errThrown)return ne.saxParser.errThrown=!0,ne.emit("error",ae)}),this.saxParser.onend=function(ne){return function(){if(!ne.saxParser.ended)return ne.saxParser.ended=!0,ne.emit("end",ne.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,Ie=[],G=this.options.attrkey,oe=this.options.charkey,this.saxParser.onopentag=function(ne){return function(ae){var N,$,re,pe,Ne;if((re={})[oe]="",!ne.options.ignoreAttrs)for(N in Ne=ae.attributes)!te.call(Ne,N)||(!(G in re)&&!ne.options.mergeAttrs&&(re[G]={}),$=ne.options.attrValueProcessors?V(ne.options.attrValueProcessors,ae.attributes[N],N):ae.attributes[N],pe=ne.options.attrNameProcessors?V(ne.options.attrNameProcessors,N):N,ne.options.mergeAttrs?ne.assignOrPush(re,pe,$):re[G][pe]=$);return re["#name"]=ne.options.tagNameProcessors?V(ne.options.tagNameProcessors,ae.name):ae.name,ne.options.xmlns&&(re[ne.options.xmlnskey]={uri:ae.uri,local:ae.local}),Ie.push(re)}}(this),this.saxParser.onclosetag=function(ne){return function(){var ae,N,$,re,pe,Ne,Ee,xe,ue,Re;if(Ne=Ie.pop(),pe=Ne["#name"],(!ne.options.explicitChildren||!ne.options.preserveChildrenOrder)&&delete Ne["#name"],!0===Ne.cdata&&(ae=Ne.cdata,delete Ne.cdata),ue=Ie[Ie.length-1],Ne[oe].match(/^\s*$/)&&!ae?(N=Ne[oe],delete Ne[oe]):(ne.options.trim&&(Ne[oe]=Ne[oe].trim()),ne.options.normalize&&(Ne[oe]=Ne[oe].replace(/\s{2,}/g," ").trim()),Ne[oe]=ne.options.valueProcessors?V(ne.options.valueProcessors,Ne[oe],pe):Ne[oe],1===Object.keys(Ne).length&&oe in Ne&&!ne.EXPLICIT_CHARKEY&&(Ne=Ne[oe])),O(Ne)&&(Ne=""!==ne.options.emptyTag?ne.options.emptyTag:N),null!=ne.options.validator&&(Re="/"+function(){var Je,ke,qe;for(qe=[],Je=0,ke=Ie.length;Je<ke;Je++)qe.push((re=Ie[Je])["#name"]);return qe}().concat(pe).join("/"),function(){try{Ne=ne.options.validator(Re,ue&&ue[pe],Ne)}catch(ke){return ne.emit("error",ke)}}()),ne.options.explicitChildren&&!ne.options.mergeAttrs&&"object"==typeof Ne)if(ne.options.preserveChildrenOrder){if(ue){for($ in ue[ne.options.childkey]=ue[ne.options.childkey]||[],Ee={},Ne)!te.call(Ne,$)||(Ee[$]=Ne[$]);ue[ne.options.childkey].push(Ee),delete Ne["#name"],1===Object.keys(Ne).length&&oe in Ne&&!ne.EXPLICIT_CHARKEY&&(Ne=Ne[oe])}}else re={},ne.options.attrkey in Ne&&(re[ne.options.attrkey]=Ne[ne.options.attrkey],delete Ne[ne.options.attrkey]),!ne.options.charsAsChildren&&ne.options.charkey in Ne&&(re[ne.options.charkey]=Ne[ne.options.charkey],delete Ne[ne.options.charkey]),Object.getOwnPropertyNames(Ne).length>0&&(re[ne.options.childkey]=Ne),Ne=re;return Ie.length>0?ne.assignOrPush(ue,pe,Ne):(ne.options.explicitRoot&&(xe=Ne,(Ne={})[pe]=xe),ne.resultObject=Ne,ne.saxParser.ended=!0,ne.emit("end",ne.resultObject))}}(this),ye=function(ne){return function(ae){var N,$;if($=Ie[Ie.length-1])return $[oe]+=ae,ne.options.explicitChildren&&ne.options.preserveChildrenOrder&&ne.options.charsAsChildren&&(ne.options.includeWhiteChars||""!==ae.replace(/\\n/g,"").trim())&&($[ne.options.childkey]=$[ne.options.childkey]||[],(N={"#name":"__text__"})[oe]=ae,ne.options.normalize&&(N[oe]=N[oe].replace(/\s{2,}/g," ").trim()),$[ne.options.childkey].push(N)),$}}(this),this.saxParser.ontext=ye,this.saxParser.oncdata=function(ae){var N;if(N=ye(ae))return N.cdata=!0}},Y.prototype.parseString=function(G,oe){var ye;null!=oe&&"function"==typeof oe&&(this.on("end",function(Ie){return this.reset(),oe(null,Ie)}),this.on("error",function(Ie){return this.reset(),oe(Ie)}));try{return""===(G=G.toString()).trim()?(this.emit("end",null),!0):(G=X.stripBOM(G),this.options.async?(this.remaining=G,j(this.processAsync),this.saxParser):this.saxParser.write(G).close())}catch(Ie){if(ye=Ie,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",ye),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw ye}},Y.prototype.parseStringPromise=function(G){return new Promise((oe=this,function(ye,Ie){return oe.parseString(G,function(ne,ae){return ne?Ie(ne):ye(ae)})}));var oe},Y}(U),be.parseString=function(ie,Y,G){var oe,ye;return null!=G?("function"==typeof G&&(oe=G),"object"==typeof Y&&(ye=Y)):("function"==typeof Y&&(oe=Y),ye={}),new be.Parser(ye).parseString(ie,oe)},be.parseStringPromise=function(ie,Y){var G;return"object"==typeof Y&&(G=Y),new be.Parser(G).parseStringPromise(ie)}}).call(this)},3749:function(He,be){(function(){"use strict";var z;z=new RegExp(/(?!xmlns)^.*:/),be.normalize=function(X){return X.toLowerCase()},be.firstCharLowerCase=function(X){return X.charAt(0).toLowerCase()+X.slice(1)},be.stripPrefix=function(X){return X.replace(z,"")},be.parseNumbers=function(X){return isNaN(X)||(X=X%1==0?parseInt(X,10):parseFloat(X)),X},be.parseBooleans=function(X){return/^(?:true|false)$/i.test(X)&&(X="true"===X.toLowerCase()),X}}).call(this)},5452:function(He,be,z){(function(){"use strict";var X,M,U,O,L={}.hasOwnProperty;M=z(7067),X=z(4032),U=z(2238),O=z(3749),be.defaults=M.defaults,be.processors=O,be.ValidationError=function(R){function j(J){this.message=J}return function(R,j){for(var J in j)L.call(j,J)&&(R[J]=j[J]);function Z(){this.constructor=R}Z.prototype=j.prototype,R.prototype=new Z,R.__super__=j.prototype}(j,Error),j}(),be.Builder=X.Builder,be.Parser=U.Parser,be.parseString=U.parseString,be.parseStringPromise=U.parseStringPromise}).call(this)},599:function(He){(function(){He.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},2269:function(He){(function(){He.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},3452:function(He){(function(){var be,z,X,M,U,O,V,L=[].slice,R={}.hasOwnProperty;be=function(){var j,J,Z,te,ie,Y;if(Y=arguments[0],ie=2<=arguments.length?L.call(arguments,1):[],U(Object.assign))Object.assign.apply(null,arguments);else for(j=0,Z=ie.length;j<Z;j++)if(null!=(te=ie[j]))for(J in te)!R.call(te,J)||(Y[J]=te[J]);return Y},U=function(j){return!!j&&"[object Function]"===Object.prototype.toString.call(j)},O=function(j){var J;return!!j&&("function"==(J=typeof j)||"object"===J)},X=function(j){return U(Array.isArray)?Array.isArray(j):"[object Array]"===Object.prototype.toString.call(j)},M=function(j){var J;if(X(j))return!j.length;for(J in j)if(R.call(j,J))return!1;return!0},V=function(j){var J,Z;return O(j)&&(Z=Object.getPrototypeOf(j))&&(J=Z.constructor)&&"function"==typeof J&&J instanceof J&&Function.prototype.toString.call(J)===Function.prototype.toString.call(Object)},z=function(j){return U(j.valueOf)?j.valueOf():j},He.exports.assign=be,He.exports.isFunction=U,He.exports.isObject=O,He.exports.isArray=X,He.exports.isEmpty=M,He.exports.isPlainObject=V,He.exports.getValue=z}).call(this)},6316:function(He){(function(){He.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},5968:function(He,be,z){(function(){var X;X=z(2269),z(8563),He.exports=function(){function O(V,L,R){if(this.parent=V,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==L)throw new Error("Missing attribute name. "+this.debugInfo(L));this.name=this.stringify.name(L),this.value=this.stringify.attValue(R),this.type=X.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(O.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(O.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(O.prototype,"textContent",{get:function(){return this.value},set:function(V){return this.value=V||""}}),Object.defineProperty(O.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(O.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(O.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(O.prototype,"specified",{get:function(){return!0}}),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(V){return this.options.writer.attribute(this,this.options.writer.filterOptions(V))},O.prototype.debugInfo=function(V){return null==(V=V||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+V+"}, parent: <"+this.parent.name+">"},O.prototype.isEqualNode=function(V){return!(V.namespaceURI!==this.namespaceURI||V.prefix!==this.prefix||V.localName!==this.localName||V.value!==this.value)},O}()}).call(this)},1361:function(He,be,z){(function(){var X,U,V={}.hasOwnProperty;X=z(2269),U=z(2182),He.exports=function(L){function R(j,J){if(R.__super__.constructor.call(this,j),null==J)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=X.CData,this.value=this.stringify.cdata(J)}return function(L,R){for(var j in R)V.call(R,j)&&(L[j]=R[j]);function J(){this.constructor=L}J.prototype=R.prototype,L.prototype=new J,L.__super__=R.prototype}(R,L),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(j){return this.options.writer.cdata(this,this.options.writer.filterOptions(j))},R}(U)}).call(this)},2182:function(He,be,z){(function(){var M,O={}.hasOwnProperty;M=z(8563),He.exports=function(V){function L(R){L.__super__.constructor.call(this,R),this.value=""}return function(V,L){for(var R in L)O.call(L,R)&&(V[R]=L[R]);function j(){this.constructor=V}j.prototype=L.prototype,V.prototype=new j,V.__super__=L.prototype}(L,V),Object.defineProperty(L.prototype,"data",{get:function(){return this.value},set:function(R){return this.value=R||""}}),Object.defineProperty(L.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(L.prototype,"textContent",{get:function(){return this.value},set:function(R){return this.value=R||""}}),L.prototype.clone=function(){return Object.create(this)},L.prototype.substringData=function(R,j){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.appendData=function(R){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.insertData=function(R,j){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.deleteData=function(R,j){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.replaceData=function(R,j,J){throw new Error("This DOM method is not implemented."+this.debugInfo())},L.prototype.isEqualNode=function(R){return!(!L.__super__.isEqualNode.apply(this,arguments).isEqualNode(R)||R.data!==this.data)},L}(M)}).call(this)},2516:function(He,be,z){(function(){var X,M,V={}.hasOwnProperty;X=z(2269),M=z(2182),He.exports=function(L){function R(j,J){if(R.__super__.constructor.call(this,j),null==J)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=X.Comment,this.value=this.stringify.comment(J)}return function(L,R){for(var j in R)V.call(R,j)&&(L[j]=R[j]);function J(){this.constructor=L}J.prototype=R.prototype,L.prototype=new J,L.__super__=R.prototype}(R,L),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(j){return this.options.writer.comment(this,this.options.writer.filterOptions(j))},R}(M)}).call(this)},5806:function(He,be,z){(function(){var M,U;M=z(9276),U=z(3735),He.exports=function(){function O(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new M,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(O.prototype,"parameterNames",{get:function(){return new U(Object.keys(this.defaultParams))}}),O.prototype.getParameter=function(V){return this.params.hasOwnProperty(V)?this.params[V]:null},O.prototype.canSetParameter=function(V,L){return!0},O.prototype.setParameter=function(V,L){return null!=L?this.params[V]=L:delete this.params[V]},O}()}).call(this)},9276:function(He){(function(){He.exports=function(){function z(){}return z.prototype.handleError=function(X){throw new Error(X)},z}()}).call(this)},9906:function(He){(function(){He.exports=function(){function z(){}return z.prototype.hasFeature=function(X,M){return!0},z.prototype.createDocumentType=function(X,M,U){throw new Error("This DOM method is not implemented.")},z.prototype.createDocument=function(X,M,U){throw new Error("This DOM method is not implemented.")},z.prototype.createHTMLDocument=function(X){throw new Error("This DOM method is not implemented.")},z.prototype.getFeature=function(X,M){throw new Error("This DOM method is not implemented.")},z}()}).call(this)},3735:function(He){(function(){He.exports=function(){function z(X){this.arr=X||[]}return Object.defineProperty(z.prototype,"length",{get:function(){return this.arr.length}}),z.prototype.item=function(X){return this.arr[X]||null},z.prototype.contains=function(X){return-1!==this.arr.indexOf(X)},z}()}).call(this)},7274:function(He,be,z){(function(){var X,U,V={}.hasOwnProperty;U=z(8563),X=z(2269),He.exports=function(L){function R(j,J,Z,te,ie,Y){if(R.__super__.constructor.call(this,j),null==J)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==Z)throw new Error("Missing DTD attribute name. "+this.debugInfo(J));if(!te)throw new Error("Missing DTD attribute type. "+this.debugInfo(J));if(!ie)throw new Error("Missing DTD attribute default. "+this.debugInfo(J));if(0!==ie.indexOf("#")&&(ie="#"+ie),!ie.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(J));if(Y&&!ie.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(J));this.elementName=this.stringify.name(J),this.type=X.AttributeDeclaration,this.attributeName=this.stringify.name(Z),this.attributeType=this.stringify.dtdAttType(te),Y&&(this.defaultValue=this.stringify.dtdAttDefault(Y)),this.defaultValueType=ie}return function(L,R){for(var j in R)V.call(R,j)&&(L[j]=R[j]);function J(){this.constructor=L}J.prototype=R.prototype,L.prototype=new J,L.__super__=R.prototype}(R,L),R.prototype.toString=function(j){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(j))},R}(U)}).call(this)},2068:function(He,be,z){(function(){var X,U,V={}.hasOwnProperty;U=z(8563),X=z(2269),He.exports=function(L){function R(j,J,Z){if(R.__super__.constructor.call(this,j),null==J)throw new Error("Missing DTD element name. "+this.debugInfo());Z||(Z="(#PCDATA)"),Array.isArray(Z)&&(Z="("+Z.join(",")+")"),this.name=this.stringify.name(J),this.type=X.ElementDeclaration,this.value=this.stringify.dtdElementValue(Z)}return function(L,R){for(var j in R)V.call(R,j)&&(L[j]=R[j]);function J(){this.constructor=L}J.prototype=R.prototype,L.prototype=new J,L.__super__=R.prototype}(R,L),R.prototype.toString=function(j){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(j))},R}(U)}).call(this)},8349:function(He,be,z){(function(){var X,U,O,L={}.hasOwnProperty;O=z(3452).isObject,U=z(8563),X=z(2269),He.exports=function(R){function j(J,Z,te,ie){if(j.__super__.constructor.call(this,J),null==te)throw new Error("Missing DTD entity name. "+this.debugInfo(te));if(null==ie)throw new Error("Missing DTD entity value. "+this.debugInfo(te));if(this.pe=!!Z,this.name=this.stringify.name(te),this.type=X.EntityDeclaration,O(ie)){if(!ie.pubID&&!ie.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(te));if(ie.pubID&&!ie.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(te));if(this.internal=!1,null!=ie.pubID&&(this.pubID=this.stringify.dtdPubID(ie.pubID)),null!=ie.sysID&&(this.sysID=this.stringify.dtdSysID(ie.sysID)),null!=ie.nData&&(this.nData=this.stringify.dtdNData(ie.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(te))}else this.value=this.stringify.dtdEntityValue(ie),this.internal=!0}return function(R,j){for(var J in j)L.call(j,J)&&(R[J]=j[J]);function Z(){this.constructor=R}Z.prototype=j.prototype,R.prototype=new Z,R.__super__=j.prototype}(j,R),Object.defineProperty(j.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(j.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(j.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(j.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(j.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(j.prototype,"xmlVersion",{get:function(){return null}}),j.prototype.toString=function(J){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(J))},j}(U)}).call(this)},3087:function(He,be,z){(function(){var X,U,V={}.hasOwnProperty;U=z(8563),X=z(2269),He.exports=function(L){function R(j,J,Z){if(R.__super__.constructor.call(this,j),null==J)throw new Error("Missing DTD notation name. "+this.debugInfo(J));if(!Z.pubID&&!Z.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(J));this.name=this.stringify.name(J),this.type=X.NotationDeclaration,null!=Z.pubID&&(this.pubID=this.stringify.dtdPubID(Z.pubID)),null!=Z.sysID&&(this.sysID=this.stringify.dtdSysID(Z.sysID))}return function(L,R){for(var j in R)V.call(R,j)&&(L[j]=R[j]);function J(){this.constructor=L}J.prototype=R.prototype,L.prototype=new J,L.__super__=R.prototype}(R,L),Object.defineProperty(R.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(R.prototype,"systemId",{get:function(){return this.sysID}}),R.prototype.toString=function(j){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(j))},R}(U)}).call(this)},4789:function(He,be,z){(function(){var X,U,O,L={}.hasOwnProperty;O=z(3452).isObject,U=z(8563),X=z(2269),He.exports=function(R){function j(J,Z,te,ie){var Y;j.__super__.constructor.call(this,J),O(Z)&&(Z=(Y=Z).version,te=Y.encoding,ie=Y.standalone),Z||(Z="1.0"),this.type=X.Declaration,this.version=this.stringify.xmlVersion(Z),null!=te&&(this.encoding=this.stringify.xmlEncoding(te)),null!=ie&&(this.standalone=this.stringify.xmlStandalone(ie))}return function(R,j){for(var J in j)L.call(j,J)&&(R[J]=j[J]);function Z(){this.constructor=R}Z.prototype=j.prototype,R.prototype=new Z,R.__super__=j.prototype}(j,R),j.prototype.toString=function(J){return this.options.writer.declaration(this,this.options.writer.filterOptions(J))},j}(U)}).call(this)},9195:function(He,be,z){(function(){var X,M,U,O,V,R,j,J,te={}.hasOwnProperty;J=z(3452).isObject,j=z(8563),X=z(2269),M=z(7274),O=z(8349),U=z(2068),V=z(3087),R=z(5264),He.exports=function(ie){function Y(G,oe,ye){var Ie,ne,ae,N,$,re;if(Y.__super__.constructor.call(this,G),this.type=X.DocType,G.children)for(ne=0,ae=(N=G.children).length;ne<ae;ne++)if((Ie=N[ne]).type===X.Element){this.name=Ie.name;break}this.documentObject=G,J(oe)&&(oe=($=oe).pubID,ye=$.sysID),null==ye&&(ye=(re=[oe,ye])[0],oe=re[1]),null!=oe&&(this.pubID=this.stringify.dtdPubID(oe)),null!=ye&&(this.sysID=this.stringify.dtdSysID(ye))}return function(ie,Y){for(var G in Y)te.call(Y,G)&&(ie[G]=Y[G]);function oe(){this.constructor=ie}oe.prototype=Y.prototype,ie.prototype=new oe,ie.__super__=Y.prototype}(Y,ie),Object.defineProperty(Y.prototype,"entities",{get:function(){var G,oe,ye,Ie,ne;for(Ie={},oe=0,ye=(ne=this.children).length;oe<ye;oe++)(G=ne[oe]).type===X.EntityDeclaration&&!G.pe&&(Ie[G.name]=G);return new R(Ie)}}),Object.defineProperty(Y.prototype,"notations",{get:function(){var G,oe,ye,Ie,ne;for(Ie={},oe=0,ye=(ne=this.children).length;oe<ye;oe++)(G=ne[oe]).type===X.NotationDeclaration&&(Ie[G.name]=G);return new R(Ie)}}),Object.defineProperty(Y.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(Y.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(Y.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Y.prototype.element=function(G,oe){var ye;return ye=new U(this,G,oe),this.children.push(ye),this},Y.prototype.attList=function(G,oe,ye,Ie,ne){var ae;return ae=new M(this,G,oe,ye,Ie,ne),this.children.push(ae),this},Y.prototype.entity=function(G,oe){var ye;return ye=new O(this,!1,G,oe),this.children.push(ye),this},Y.prototype.pEntity=function(G,oe){var ye;return ye=new O(this,!0,G,oe),this.children.push(ye),this},Y.prototype.notation=function(G,oe){var ye;return ye=new V(this,G,oe),this.children.push(ye),this},Y.prototype.toString=function(G){return this.options.writer.docType(this,this.options.writer.filterOptions(G))},Y.prototype.ele=function(G,oe){return this.element(G,oe)},Y.prototype.att=function(G,oe,ye,Ie,ne){return this.attList(G,oe,ye,Ie,ne)},Y.prototype.ent=function(G,oe){return this.entity(G,oe)},Y.prototype.pent=function(G,oe){return this.pEntity(G,oe)},Y.prototype.not=function(G,oe){return this.notation(G,oe)},Y.prototype.up=function(){return this.root()||this.documentObject},Y.prototype.isEqualNode=function(G){return!(!Y.__super__.isEqualNode.apply(this,arguments).isEqualNode(G)||G.name!==this.name||G.publicId!==this.publicId||G.systemId!==this.systemId)},Y}(j)}).call(this)},519:function(He,be,z){(function(){var X,M,U,V,L,R,j,Z={}.hasOwnProperty;j=z(3452).isPlainObject,U=z(9906),M=z(5806),V=z(8563),X=z(2269),R=z(5041),L=z(4354),He.exports=function(te){function ie(Y){ie.__super__.constructor.call(this,null),this.name="#document",this.type=X.Document,this.documentURI=null,this.domConfig=new M,Y||(Y={}),Y.writer||(Y.writer=new L),this.options=Y,this.stringify=new R(Y)}return function(te,ie){for(var Y in ie)Z.call(ie,Y)&&(te[Y]=ie[Y]);function G(){this.constructor=te}G.prototype=ie.prototype,te.prototype=new G,te.__super__=ie.prototype}(ie,te),Object.defineProperty(ie.prototype,"implementation",{value:new U}),Object.defineProperty(ie.prototype,"doctype",{get:function(){var Y,G,oe,ye;for(G=0,oe=(ye=this.children).length;G<oe;G++)if((Y=ye[G]).type===X.DocType)return Y;return null}}),Object.defineProperty(ie.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(ie.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(ie.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(ie.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===X.Declaration?this.children[0].encoding:null}}),Object.defineProperty(ie.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===X.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(ie.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===X.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(ie.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(ie.prototype,"origin",{get:function(){return null}}),Object.defineProperty(ie.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(ie.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(ie.prototype,"contentType",{get:function(){return null}}),ie.prototype.end=function(Y){var G;return G={},Y?j(Y)&&(G=Y,Y=this.options.writer):Y=this.options.writer,Y.document(this,Y.filterOptions(G))},ie.prototype.toString=function(Y){return this.options.writer.document(this,this.options.writer.filterOptions(Y))},ie.prototype.createElement=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createTextNode=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createComment=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createCDATASection=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createProcessingInstruction=function(Y,G){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createAttribute=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createEntityReference=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.getElementsByTagName=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.importNode=function(Y,G){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createElementNS=function(Y,G){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createAttributeNS=function(Y,G){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.getElementsByTagNameNS=function(Y,G){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.getElementById=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.adoptNode=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.renameNode=function(Y,G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.getElementsByClassName=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createEvent=function(Y){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createNodeIterator=function(Y,G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie.prototype.createTreeWalker=function(Y,G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},ie}(V)}).call(this)},1105:function(He,be,z){(function(){var X,M,U,O,V,L,R,j,J,Z,te,ie,G,oe,ye,Ie,ne,ae,N,$,re,pe,Ne,Ee={}.hasOwnProperty;Ne=z(3452),re=Ne.isObject,$=Ne.isFunction,pe=Ne.isPlainObject,N=Ne.getValue,X=z(2269),ie=z(519),G=z(3352),O=z(1361),V=z(2516),ye=z(9942),ae=z(474),oe=z(4666),Z=z(4789),te=z(9195),L=z(7274),j=z(8349),R=z(2068),J=z(3087),U=z(5968),ne=z(5041),Ie=z(4354),M=z(6316),He.exports=function(){function xe(ue,Re,Je){var ke;this.name="?xml",this.type=X.Document,ue||(ue={}),ke={},ue.writer?pe(ue.writer)&&(ke=ue.writer,ue.writer=new Ie):ue.writer=new Ie,this.options=ue,this.writer=ue.writer,this.writerOptions=this.writer.filterOptions(ke),this.stringify=new ne(ue),this.onDataCallback=Re||function(){},this.onEndCallback=Je||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return xe.prototype.createChildNode=function(ue){var Je,ke,qe,ot,yt,hn,Be;switch(ue.type){case X.CData:this.cdata(ue.value);break;case X.Comment:this.comment(ue.value);break;case X.Element:for(Je in ke={},hn=ue.attribs)!Ee.call(hn,Je)||(ke[Je]=hn[Je].value);this.node(ue.name,ke);break;case X.Dummy:this.dummy();break;case X.Raw:this.raw(ue.value);break;case X.Text:this.text(ue.value);break;case X.ProcessingInstruction:this.instruction(ue.target,ue.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+ue.constructor.name)}for(ot=0,yt=(Be=ue.children).length;ot<yt;ot++)this.createChildNode(qe=Be[ot]),qe.type===X.Element&&this.up();return this},xe.prototype.dummy=function(){return this},xe.prototype.node=function(ue,Re,Je){var ke;if(null==ue)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(ue));return this.openCurrent(),ue=N(ue),null==Re&&(Re={}),Re=N(Re),re(Re)||(Je=(ke=[Re,Je])[0],Re=ke[1]),this.currentNode=new G(this,ue,Re),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=Je&&this.text(Je),this},xe.prototype.element=function(ue,Re,Je){var ke,qe,ot,yt,hn,Be;if(this.currentNode&&this.currentNode.type===X.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(ue)||re(ue)||$(ue))for(yt=this.options.noValidation,this.options.noValidation=!0,(Be=new ie(this.options).element("TEMP_ROOT")).element(ue),this.options.noValidation=yt,qe=0,ot=(hn=Be.children).length;qe<ot;qe++)this.createChildNode(ke=hn[qe]),ke.type===X.Element&&this.up();else this.node(ue,Re,Je);return this},xe.prototype.attribute=function(ue,Re){var Je;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(ue));if(null!=ue&&(ue=N(ue)),re(ue))for(Je in ue)!Ee.call(ue,Je)||this.attribute(Je,ue[Je]);else $(Re)&&(Re=Re.apply()),this.options.keepNullAttributes&&null==Re?this.currentNode.attribs[ue]=new U(this,ue,""):null!=Re&&(this.currentNode.attribs[ue]=new U(this,ue,Re));return this},xe.prototype.text=function(ue){var Re;return this.openCurrent(),Re=new ae(this,ue),this.onData(this.writer.text(Re,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.cdata=function(ue){var Re;return this.openCurrent(),Re=new O(this,ue),this.onData(this.writer.cdata(Re,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.comment=function(ue){var Re;return this.openCurrent(),Re=new V(this,ue),this.onData(this.writer.comment(Re,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.raw=function(ue){var Re;return this.openCurrent(),Re=new ye(this,ue),this.onData(this.writer.raw(Re,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.instruction=function(ue,Re){var Je,ke,ot,yt;if(this.openCurrent(),null!=ue&&(ue=N(ue)),null!=Re&&(Re=N(Re)),Array.isArray(ue))for(Je=0,ot=ue.length;Je<ot;Je++)this.instruction(ke=ue[Je]);else if(re(ue))for(ke in ue)!Ee.call(ue,ke)||this.instruction(ke,ue[ke]);else $(Re)&&(Re=Re.apply()),yt=new oe(this,ue,Re),this.onData(this.writer.processingInstruction(yt,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},xe.prototype.declaration=function(ue,Re,Je){var ke;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return ke=new Z(this,ue,Re,Je),this.onData(this.writer.declaration(ke,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.doctype=function(ue,Re,Je){if(this.openCurrent(),null==ue)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new te(this,Re,Je),this.currentNode.rootNodeName=ue,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},xe.prototype.dtdElement=function(ue,Re){var Je;return this.openCurrent(),Je=new R(this,ue,Re),this.onData(this.writer.dtdElement(Je,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.attList=function(ue,Re,Je,ke,qe){var ot;return this.openCurrent(),ot=new L(this,ue,Re,Je,ke,qe),this.onData(this.writer.dtdAttList(ot,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.entity=function(ue,Re){var Je;return this.openCurrent(),Je=new j(this,!1,ue,Re),this.onData(this.writer.dtdEntity(Je,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.pEntity=function(ue,Re){var Je;return this.openCurrent(),Je=new j(this,!0,ue,Re),this.onData(this.writer.dtdEntity(Je,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.notation=function(ue,Re){var Je;return this.openCurrent(),Je=new J(this,ue,Re),this.onData(this.writer.dtdNotation(Je,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},xe.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},xe.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},xe.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},xe.prototype.openNode=function(ue){var Je,ke,qe;if(!ue.isOpen){if(!this.root&&0===this.currentLevel&&ue.type===X.Element&&(this.root=ue),Je="",ue.type===X.Element){for(ke in this.writerOptions.state=M.OpenTag,Je=this.writer.indent(ue,this.writerOptions,this.currentLevel)+"<"+ue.name,qe=ue.attribs)!Ee.call(qe,ke)||(Je+=this.writer.attribute(qe[ke],this.writerOptions,this.currentLevel));Je+=(ue.children?">":"/>")+this.writer.endline(ue,this.writerOptions,this.currentLevel),this.writerOptions.state=M.InsideTag}else this.writerOptions.state=M.OpenTag,Je=this.writer.indent(ue,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+ue.rootNodeName,ue.pubID&&ue.sysID?Je+=' PUBLIC "'+ue.pubID+'" "'+ue.sysID+'"':ue.sysID&&(Je+=' SYSTEM "'+ue.sysID+'"'),ue.children?(Je+=" [",this.writerOptions.state=M.InsideTag):(this.writerOptions.state=M.CloseTag,Je+=">"),Je+=this.writer.endline(ue,this.writerOptions,this.currentLevel);return this.onData(Je,this.currentLevel),ue.isOpen=!0}},xe.prototype.closeNode=function(ue){var Re;if(!ue.isClosed)return"",this.writerOptions.state=M.CloseTag,Re=ue.type===X.Element?this.writer.indent(ue,this.writerOptions,this.currentLevel)+"</"+ue.name+">"+this.writer.endline(ue,this.writerOptions,this.currentLevel):this.writer.indent(ue,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(ue,this.writerOptions,this.currentLevel),this.writerOptions.state=M.None,this.onData(Re,this.currentLevel),ue.isClosed=!0},xe.prototype.onData=function(ue,Re){return this.documentStarted=!0,this.onDataCallback(ue,Re+1)},xe.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},xe.prototype.debugInfo=function(ue){return null==ue?"":"node: <"+ue+">"},xe.prototype.ele=function(){return this.element.apply(this,arguments)},xe.prototype.nod=function(ue,Re,Je){return this.node(ue,Re,Je)},xe.prototype.txt=function(ue){return this.text(ue)},xe.prototype.dat=function(ue){return this.cdata(ue)},xe.prototype.com=function(ue){return this.comment(ue)},xe.prototype.ins=function(ue,Re){return this.instruction(ue,Re)},xe.prototype.dec=function(ue,Re,Je){return this.declaration(ue,Re,Je)},xe.prototype.dtd=function(ue,Re,Je){return this.doctype(ue,Re,Je)},xe.prototype.e=function(ue,Re,Je){return this.element(ue,Re,Je)},xe.prototype.n=function(ue,Re,Je){return this.node(ue,Re,Je)},xe.prototype.t=function(ue){return this.text(ue)},xe.prototype.d=function(ue){return this.cdata(ue)},xe.prototype.c=function(ue){return this.comment(ue)},xe.prototype.r=function(ue){return this.raw(ue)},xe.prototype.i=function(ue,Re){return this.instruction(ue,Re)},xe.prototype.att=function(){return this.currentNode&&this.currentNode.type===X.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},xe.prototype.a=function(){return this.currentNode&&this.currentNode.type===X.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},xe.prototype.ent=function(ue,Re){return this.entity(ue,Re)},xe.prototype.pent=function(ue,Re){return this.pEntity(ue,Re)},xe.prototype.not=function(ue,Re){return this.notation(ue,Re)},xe}()}).call(this)},4173:function(He,be,z){(function(){var X,U,V={}.hasOwnProperty;U=z(8563),X=z(2269),He.exports=function(L){function R(j){R.__super__.constructor.call(this,j),this.type=X.Dummy}return function(L,R){for(var j in R)V.call(R,j)&&(L[j]=R[j]);function J(){this.constructor=L}J.prototype=R.prototype,L.prototype=new J,L.__super__=R.prototype}(R,L),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(j){return""},R}(U)}).call(this)},3352:function(He,be,z){(function(){var X,M,O,V,L,R,j,J,te={}.hasOwnProperty;J=z(3452),j=J.isObject,R=J.isFunction,L=J.getValue,V=z(8563),X=z(2269),M=z(5968),O=z(5264),He.exports=function(ie){function Y(G,oe,ye){var Ie,ne,ae,N;if(Y.__super__.constructor.call(this,G),null==oe)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(oe),this.type=X.Element,this.attribs={},this.schemaTypeInfo=null,null!=ye&&this.attribute(ye),G.type===X.Document&&(this.isRoot=!0,this.documentObject=G,G.rootObject=this,G.children))for(ne=0,ae=(N=G.children).length;ne<ae;ne++)if((Ie=N[ne]).type===X.DocType){Ie.name=this.name;break}}return function(ie,Y){for(var G in Y)te.call(Y,G)&&(ie[G]=Y[G]);function oe(){this.constructor=ie}oe.prototype=Y.prototype,ie.prototype=new oe,ie.__super__=Y.prototype}(Y,ie),Object.defineProperty(Y.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(Y.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(Y.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(Y.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(Y.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(Y.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(Y.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(Y.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new O(this.attribs)),this.attributeMap}}),Y.prototype.clone=function(){var oe,ye,Ie;for(oe in(ye=Object.create(this)).isRoot&&(ye.documentObject=null),ye.attribs={},Ie=this.attribs)!te.call(Ie,oe)||(ye.attribs[oe]=Ie[oe].clone());return ye.children=[],this.children.forEach(function(ne){var ae;return(ae=ne.clone()).parent=ye,ye.children.push(ae)}),ye},Y.prototype.attribute=function(G,oe){var ye;if(null!=G&&(G=L(G)),j(G))for(ye in G)!te.call(G,ye)||this.attribute(ye,G[ye]);else R(oe)&&(oe=oe.apply()),this.options.keepNullAttributes&&null==oe?this.attribs[G]=new M(this,G,""):null!=oe&&(this.attribs[G]=new M(this,G,oe));return this},Y.prototype.removeAttribute=function(G){var ye,Ie;if(null==G)throw new Error("Missing attribute name. "+this.debugInfo());if(G=L(G),Array.isArray(G))for(ye=0,Ie=G.length;ye<Ie;ye++)delete this.attribs[G[ye]];else delete this.attribs[G];return this},Y.prototype.toString=function(G){return this.options.writer.element(this,this.options.writer.filterOptions(G))},Y.prototype.att=function(G,oe){return this.attribute(G,oe)},Y.prototype.a=function(G,oe){return this.attribute(G,oe)},Y.prototype.getAttribute=function(G){return this.attribs.hasOwnProperty(G)?this.attribs[G].value:null},Y.prototype.setAttribute=function(G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.getAttributeNode=function(G){return this.attribs.hasOwnProperty(G)?this.attribs[G]:null},Y.prototype.setAttributeNode=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.removeAttributeNode=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.getElementsByTagName=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.getAttributeNS=function(G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.setAttributeNS=function(G,oe,ye){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.removeAttributeNS=function(G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.getAttributeNodeNS=function(G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.setAttributeNodeNS=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.getElementsByTagNameNS=function(G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.hasAttribute=function(G){return this.attribs.hasOwnProperty(G)},Y.prototype.hasAttributeNS=function(G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.setIdAttribute=function(G,oe){return this.attribs.hasOwnProperty(G)?this.attribs[G].isId:oe},Y.prototype.setIdAttributeNS=function(G,oe,ye){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.setIdAttributeNode=function(G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.getElementsByTagName=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.getElementsByTagNameNS=function(G,oe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.getElementsByClassName=function(G){throw new Error("This DOM method is not implemented."+this.debugInfo())},Y.prototype.isEqualNode=function(G){var oe,ye,Ie;if(!Y.__super__.isEqualNode.apply(this,arguments).isEqualNode(G)||G.namespaceURI!==this.namespaceURI||G.prefix!==this.prefix||G.localName!==this.localName||G.attribs.length!==this.attribs.length)return!1;for(oe=ye=0,Ie=this.attribs.length-1;0<=Ie?ye<=Ie:ye>=Ie;oe=0<=Ie?++ye:--ye)if(!this.attribs[oe].isEqualNode(G.attribs[oe]))return!1;return!0},Y}(V)}).call(this)},5264:function(He){(function(){He.exports=function(){function z(X){this.nodes=X}return Object.defineProperty(z.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),z.prototype.clone=function(){return this.nodes=null},z.prototype.getNamedItem=function(X){return this.nodes[X]},z.prototype.setNamedItem=function(X){var M;return M=this.nodes[X.nodeName],this.nodes[X.nodeName]=X,M||null},z.prototype.removeNamedItem=function(X){var M;return M=this.nodes[X],delete this.nodes[X],M||null},z.prototype.item=function(X){return this.nodes[Object.keys(this.nodes)[X]]||null},z.prototype.getNamedItemNS=function(X,M){throw new Error("This DOM method is not implemented.")},z.prototype.setNamedItemNS=function(X){throw new Error("This DOM method is not implemented.")},z.prototype.removeNamedItemNS=function(X,M){throw new Error("This DOM method is not implemented.")},z}()}).call(this)},8563:function(He,be,z){(function(){var X,M,U,O,V,L,R,j,te,ie,Y,G,oe,ye,Ie,ne,ae,N={}.hasOwnProperty;ae=z(3452),ne=ae.isObject,Ie=ae.isFunction,ye=ae.isEmpty,oe=ae.getValue,j=null,U=null,O=null,V=null,L=null,Y=null,G=null,ie=null,R=null,M=null,te=null,X=null,He.exports=function(){function $(re){this.parent=re,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,j||(j=z(3352),U=z(1361),O=z(2516),V=z(4789),L=z(9195),Y=z(9942),G=z(474),ie=z(4666),R=z(4173),M=z(2269),te=z(5112),z(5264),X=z(599))}return Object.defineProperty($.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty($.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty($.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty($.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty($.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new te(this.children)),this.childNodeList}}),Object.defineProperty($.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty($.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty($.prototype,"previousSibling",{get:function(){var re;return re=this.parent.children.indexOf(this),this.parent.children[re-1]||null}}),Object.defineProperty($.prototype,"nextSibling",{get:function(){var re;return re=this.parent.children.indexOf(this),this.parent.children[re+1]||null}}),Object.defineProperty($.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty($.prototype,"textContent",{get:function(){var re,pe,Ne,Ee,xe;if(this.nodeType===M.Element||this.nodeType===M.DocumentFragment){for(xe="",pe=0,Ne=(Ee=this.children).length;pe<Ne;pe++)(re=Ee[pe]).textContent&&(xe+=re.textContent);return xe}return null},set:function(re){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),$.prototype.setParent=function(re){var Ne,Ee,xe,ue;for(this.parent=re,re&&(this.options=re.options,this.stringify=re.stringify),ue=[],Ne=0,Ee=(xe=this.children).length;Ne<Ee;Ne++)ue.push(xe[Ne].setParent(this));return ue},$.prototype.element=function(re,pe,Ne){var Ee,ue,Re,Je,ke,qe,ot,yt,hn,Be;if(ke=null,null===pe&&null==Ne&&(pe=(yt=[{},null])[0],Ne=yt[1]),null==pe&&(pe={}),pe=oe(pe),ne(pe)||(Ne=(hn=[pe,Ne])[0],pe=hn[1]),null!=re&&(re=oe(re)),Array.isArray(re))for(ue=0,qe=re.length;ue<qe;ue++)ke=this.element(re[ue]);else if(Ie(re))ke=this.element(re.apply());else if(ne(re)){for(Je in re)if(N.call(re,Je))if(Ie(Be=re[Je])&&(Be=Be.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===Je.indexOf(this.stringify.convertAttKey))ke=this.attribute(Je.substr(this.stringify.convertAttKey.length),Be);else if(!this.options.separateArrayItems&&Array.isArray(Be)&&ye(Be))ke=this.dummy();else if(ne(Be)&&ye(Be))ke=this.element(Je);else if(this.options.keepNullNodes||null!=Be)if(!this.options.separateArrayItems&&Array.isArray(Be))for(Re=0,ot=Be.length;Re<ot;Re++)(Ee={})[Je]=Be[Re],ke=this.element(Ee);else ne(Be)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===Je.indexOf(this.stringify.convertTextKey)?ke=this.element(Be):(ke=this.element(Je)).element(Be):ke=this.element(Je,Be);else ke=this.dummy()}else ke=this.options.keepNullNodes||null!==Ne?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===re.indexOf(this.stringify.convertTextKey)?this.text(Ne):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===re.indexOf(this.stringify.convertCDataKey)?this.cdata(Ne):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===re.indexOf(this.stringify.convertCommentKey)?this.comment(Ne):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===re.indexOf(this.stringify.convertRawKey)?this.raw(Ne):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===re.indexOf(this.stringify.convertPIKey)?this.instruction(re.substr(this.stringify.convertPIKey.length),Ne):this.node(re,pe,Ne):this.dummy();if(null==ke)throw new Error("Could not create any elements with: "+re+". "+this.debugInfo());return ke},$.prototype.insertBefore=function(re,pe,Ne){var Ee,xe,ue,Re,Je;if(re?.type)return Re=pe,(ue=re).setParent(this),Re?(xe=children.indexOf(Re),Je=children.splice(xe),children.push(ue),Array.prototype.push.apply(children,Je)):children.push(ue),ue;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(re));return xe=this.parent.children.indexOf(this),Je=this.parent.children.splice(xe),Ee=this.parent.element(re,pe,Ne),Array.prototype.push.apply(this.parent.children,Je),Ee},$.prototype.insertAfter=function(re,pe,Ne){var Ee,xe,ue;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(re));return xe=this.parent.children.indexOf(this),ue=this.parent.children.splice(xe+1),Ee=this.parent.element(re,pe,Ne),Array.prototype.push.apply(this.parent.children,ue),Ee},$.prototype.remove=function(){var re;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return re=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[re,re-re+1].concat([])),this.parent},$.prototype.node=function(re,pe,Ne){var Ee,xe;return null!=re&&(re=oe(re)),pe||(pe={}),pe=oe(pe),ne(pe)||(Ne=(xe=[pe,Ne])[0],pe=xe[1]),Ee=new j(this,re,pe),null!=Ne&&Ee.text(Ne),this.children.push(Ee),Ee},$.prototype.text=function(re){var pe;return ne(re)&&this.element(re),pe=new G(this,re),this.children.push(pe),this},$.prototype.cdata=function(re){var pe;return pe=new U(this,re),this.children.push(pe),this},$.prototype.comment=function(re){var pe;return pe=new O(this,re),this.children.push(pe),this},$.prototype.commentBefore=function(re){var Ne,Ee;return Ne=this.parent.children.indexOf(this),Ee=this.parent.children.splice(Ne),this.parent.comment(re),Array.prototype.push.apply(this.parent.children,Ee),this},$.prototype.commentAfter=function(re){var Ne,Ee;return Ne=this.parent.children.indexOf(this),Ee=this.parent.children.splice(Ne+1),this.parent.comment(re),Array.prototype.push.apply(this.parent.children,Ee),this},$.prototype.raw=function(re){var pe;return pe=new Y(this,re),this.children.push(pe),this},$.prototype.dummy=function(){return new R(this)},$.prototype.instruction=function(re,pe){var Ne,xe,ue,Re;if(null!=re&&(re=oe(re)),null!=pe&&(pe=oe(pe)),Array.isArray(re))for(ue=0,Re=re.length;ue<Re;ue++)this.instruction(Ne=re[ue]);else if(ne(re))for(Ne in re)!N.call(re,Ne)||this.instruction(Ne,re[Ne]);else Ie(pe)&&(pe=pe.apply()),xe=new ie(this,re,pe),this.children.push(xe);return this},$.prototype.instructionBefore=function(re,pe){var Ee,xe;return Ee=this.parent.children.indexOf(this),xe=this.parent.children.splice(Ee),this.parent.instruction(re,pe),Array.prototype.push.apply(this.parent.children,xe),this},$.prototype.instructionAfter=function(re,pe){var Ee,xe;return Ee=this.parent.children.indexOf(this),xe=this.parent.children.splice(Ee+1),this.parent.instruction(re,pe),Array.prototype.push.apply(this.parent.children,xe),this},$.prototype.declaration=function(re,pe,Ne){var Ee,xe;return Ee=this.document(),xe=new V(Ee,re,pe,Ne),0===Ee.children.length?Ee.children.unshift(xe):Ee.children[0].type===M.Declaration?Ee.children[0]=xe:Ee.children.unshift(xe),Ee.root()||Ee},$.prototype.dtd=function(re,pe){var Ee,xe,ue,Re,Je,ke,qe,ot,yt;for(Ee=this.document(),xe=new L(Ee,re,pe),ue=Re=0,ke=(ot=Ee.children).length;Re<ke;ue=++Re)if(ot[ue].type===M.DocType)return Ee.children[ue]=xe,xe;for(ue=Je=0,qe=(yt=Ee.children).length;Je<qe;ue=++Je)if(yt[ue].isRoot)return Ee.children.splice(ue,0,xe),xe;return Ee.children.push(xe),xe},$.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},$.prototype.root=function(){var re;for(re=this;re;){if(re.type===M.Document)return re.rootObject;if(re.isRoot)return re;re=re.parent}},$.prototype.document=function(){var re;for(re=this;re;){if(re.type===M.Document)return re;re=re.parent}},$.prototype.end=function(re){return this.document().end(re)},$.prototype.prev=function(){var re;if((re=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[re-1]},$.prototype.next=function(){var re;if(-1===(re=this.parent.children.indexOf(this))||re===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[re+1]},$.prototype.importDocument=function(re){var pe;return(pe=re.root().clone()).parent=this,pe.isRoot=!1,this.children.push(pe),this},$.prototype.debugInfo=function(re){var pe,Ne;return null!=(re=re||this.name)||null!=(pe=this.parent)&&pe.name?null==re?"parent: <"+this.parent.name+">":null!=(Ne=this.parent)&&Ne.name?"node: <"+re+">, parent: <"+this.parent.name+">":"node: <"+re+">":""},$.prototype.ele=function(re,pe,Ne){return this.element(re,pe,Ne)},$.prototype.nod=function(re,pe,Ne){return this.node(re,pe,Ne)},$.prototype.txt=function(re){return this.text(re)},$.prototype.dat=function(re){return this.cdata(re)},$.prototype.com=function(re){return this.comment(re)},$.prototype.ins=function(re,pe){return this.instruction(re,pe)},$.prototype.doc=function(){return this.document()},$.prototype.dec=function(re,pe,Ne){return this.declaration(re,pe,Ne)},$.prototype.e=function(re,pe,Ne){return this.element(re,pe,Ne)},$.prototype.n=function(re,pe,Ne){return this.node(re,pe,Ne)},$.prototype.t=function(re){return this.text(re)},$.prototype.d=function(re){return this.cdata(re)},$.prototype.c=function(re){return this.comment(re)},$.prototype.r=function(re){return this.raw(re)},$.prototype.i=function(re,pe){return this.instruction(re,pe)},$.prototype.u=function(){return this.up()},$.prototype.importXMLBuilder=function(re){return this.importDocument(re)},$.prototype.replaceChild=function(re,pe){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.removeChild=function(re){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.appendChild=function(re){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.hasChildNodes=function(){return 0!==this.children.length},$.prototype.cloneNode=function(re){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isSupported=function(re,pe){return!0},$.prototype.hasAttributes=function(){return 0!==this.attribs.length},$.prototype.compareDocumentPosition=function(re){var Ne;return this===re?0:this.document()!==re.document()?(Ne=X.Disconnected|X.ImplementationSpecific,Math.random()<.5?Ne|=X.Preceding:Ne|=X.Following,Ne):this.isAncestor(re)?X.Contains|X.Preceding:this.isDescendant(re)?X.Contains|X.Following:this.isPreceding(re)?X.Preceding:X.Following},$.prototype.isSameNode=function(re){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.lookupPrefix=function(re){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isDefaultNamespace=function(re){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.lookupNamespaceURI=function(re){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isEqualNode=function(re){var pe,Ne,Ee;if(re.nodeType!==this.nodeType||re.children.length!==this.children.length)return!1;for(pe=Ne=0,Ee=this.children.length-1;0<=Ee?Ne<=Ee:Ne>=Ee;pe=0<=Ee?++Ne:--Ne)if(!this.children[pe].isEqualNode(re.children[pe]))return!1;return!0},$.prototype.getFeature=function(re,pe){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.setUserData=function(re,pe,Ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.getUserData=function(re){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.contains=function(re){return!!re&&(re===this||this.isDescendant(re))},$.prototype.isDescendant=function(re){var pe,Ee,xe,ue;for(Ee=0,xe=(ue=this.children).length;Ee<xe;Ee++)if(re===(pe=ue[Ee])||pe.isDescendant(re))return!0;return!1},$.prototype.isAncestor=function(re){return re.isDescendant(this)},$.prototype.isPreceding=function(re){var pe,Ne;return pe=this.treePosition(re),Ne=this.treePosition(this),-1!==pe&&-1!==Ne&&pe<Ne},$.prototype.isFollowing=function(re){var pe,Ne;return pe=this.treePosition(re),Ne=this.treePosition(this),-1!==pe&&-1!==Ne&&pe>Ne},$.prototype.treePosition=function(re){var pe,Ne;return Ne=0,pe=!1,this.foreachTreeNode(this.document(),function(Ee){if(Ne++,!pe&&Ee===re)return pe=!0}),pe?Ne:-1},$.prototype.foreachTreeNode=function(re,pe){var Ne,Ee,xe,ue,Re;for(re||(re=this.document()),Ee=0,xe=(ue=re.children).length;Ee<xe;Ee++){if(Re=pe(Ne=ue[Ee]))return Re;if(Re=this.foreachTreeNode(Ne,pe))return Re}},$}()}).call(this)},5112:function(He){(function(){He.exports=function(){function z(X){this.nodes=X}return Object.defineProperty(z.prototype,"length",{get:function(){return this.nodes.length||0}}),z.prototype.clone=function(){return this.nodes=null},z.prototype.item=function(X){return this.nodes[X]||null},z}()}).call(this)},4666:function(He,be,z){(function(){var X,M,V={}.hasOwnProperty;X=z(2269),M=z(2182),He.exports=function(L){function R(j,J,Z){if(R.__super__.constructor.call(this,j),null==J)throw new Error("Missing instruction target. "+this.debugInfo());this.type=X.ProcessingInstruction,this.target=this.stringify.insTarget(J),this.name=this.target,Z&&(this.value=this.stringify.insValue(Z))}return function(L,R){for(var j in R)V.call(R,j)&&(L[j]=R[j]);function J(){this.constructor=L}J.prototype=R.prototype,L.prototype=new J,L.__super__=R.prototype}(R,L),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(j){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(j))},R.prototype.isEqualNode=function(j){return!(!R.__super__.isEqualNode.apply(this,arguments).isEqualNode(j)||j.target!==this.target)},R}(M)}).call(this)},9942:function(He,be,z){(function(){var X,M,V={}.hasOwnProperty;X=z(2269),M=z(8563),He.exports=function(L){function R(j,J){if(R.__super__.constructor.call(this,j),null==J)throw new Error("Missing raw text. "+this.debugInfo());this.type=X.Raw,this.value=this.stringify.raw(J)}return function(L,R){for(var j in R)V.call(R,j)&&(L[j]=R[j]);function J(){this.constructor=L}J.prototype=R.prototype,L.prototype=new J,L.__super__=R.prototype}(R,L),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(j){return this.options.writer.raw(this,this.options.writer.filterOptions(j))},R}(M)}).call(this)},7647:function(He,be,z){(function(){var X,M,O,L={}.hasOwnProperty;X=z(2269),O=z(3576),M=z(6316),He.exports=function(R){function j(J,Z){this.stream=J,j.__super__.constructor.call(this,Z)}return function(R,j){for(var J in j)L.call(j,J)&&(R[J]=j[J]);function Z(){this.constructor=R}Z.prototype=j.prototype,R.prototype=new Z,R.__super__=j.prototype}(j,R),j.prototype.endline=function(J,Z,te){return J.isLastRootNode&&Z.state===M.CloseTag?"":j.__super__.endline.call(this,J,Z,te)},j.prototype.document=function(J,Z){var ie,Y,G,oe,ye,Ie,ne,ae;for(ie=Y=0,oe=(Ie=J.children).length;Y<oe;ie=++Y)Ie[ie].isLastRootNode=ie===J.children.length-1;for(Z=this.filterOptions(Z),ae=[],G=0,ye=(ne=J.children).length;G<ye;G++)ae.push(this.writeChildNode(ne[G],Z,0));return ae},j.prototype.attribute=function(J,Z,te){return this.stream.write(j.__super__.attribute.call(this,J,Z,te))},j.prototype.cdata=function(J,Z,te){return this.stream.write(j.__super__.cdata.call(this,J,Z,te))},j.prototype.comment=function(J,Z,te){return this.stream.write(j.__super__.comment.call(this,J,Z,te))},j.prototype.declaration=function(J,Z,te){return this.stream.write(j.__super__.declaration.call(this,J,Z,te))},j.prototype.docType=function(J,Z,te){var Y,G,oe;if(te||(te=0),this.openNode(J,Z,te),Z.state=M.OpenTag,this.stream.write(this.indent(J,Z,te)),this.stream.write("<!DOCTYPE "+J.root().name),J.pubID&&J.sysID?this.stream.write(' PUBLIC "'+J.pubID+'" "'+J.sysID+'"'):J.sysID&&this.stream.write(' SYSTEM "'+J.sysID+'"'),J.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(J,Z,te)),Z.state=M.InsideTag,Y=0,G=(oe=J.children).length;Y<G;Y++)this.writeChildNode(oe[Y],Z,te+1);Z.state=M.CloseTag,this.stream.write("]")}return Z.state=M.CloseTag,this.stream.write(Z.spaceBeforeSlash+">"),this.stream.write(this.endline(J,Z,te)),Z.state=M.None,this.closeNode(J,Z,te)},j.prototype.element=function(J,Z,te){var G,oe,ye,Ie,ne,N,$;for(ne in te||(te=0),this.openNode(J,Z,te),Z.state=M.OpenTag,this.stream.write(this.indent(J,Z,te)+"<"+J.name),N=J.attribs)!L.call(N,ne)||this.attribute(N[ne],Z,te);if(oe=0===(G=J.children.length)?null:J.children[0],0===G||J.children.every(function(re){return(re.type===X.Text||re.type===X.Raw)&&""===re.value}))Z.allowEmpty?(this.stream.write(">"),Z.state=M.CloseTag,this.stream.write("</"+J.name+">")):(Z.state=M.CloseTag,this.stream.write(Z.spaceBeforeSlash+"/>"));else if(!Z.pretty||1!==G||oe.type!==X.Text&&oe.type!==X.Raw||null==oe.value){for(this.stream.write(">"+this.endline(J,Z,te)),Z.state=M.InsideTag,ye=0,Ie=($=J.children).length;ye<Ie;ye++)this.writeChildNode($[ye],Z,te+1);Z.state=M.CloseTag,this.stream.write(this.indent(J,Z,te)+"</"+J.name+">")}else this.stream.write(">"),Z.state=M.InsideTag,Z.suppressPrettyCount++,this.writeChildNode(oe,Z,te+1),Z.suppressPrettyCount--,Z.state=M.CloseTag,this.stream.write("</"+J.name+">");return this.stream.write(this.endline(J,Z,te)),Z.state=M.None,this.closeNode(J,Z,te)},j.prototype.processingInstruction=function(J,Z,te){return this.stream.write(j.__super__.processingInstruction.call(this,J,Z,te))},j.prototype.raw=function(J,Z,te){return this.stream.write(j.__super__.raw.call(this,J,Z,te))},j.prototype.text=function(J,Z,te){return this.stream.write(j.__super__.text.call(this,J,Z,te))},j.prototype.dtdAttList=function(J,Z,te){return this.stream.write(j.__super__.dtdAttList.call(this,J,Z,te))},j.prototype.dtdElement=function(J,Z,te){return this.stream.write(j.__super__.dtdElement.call(this,J,Z,te))},j.prototype.dtdEntity=function(J,Z,te){return this.stream.write(j.__super__.dtdEntity.call(this,J,Z,te))},j.prototype.dtdNotation=function(J,Z,te){return this.stream.write(j.__super__.dtdNotation.call(this,J,Z,te))},j}(O)}).call(this)},4354:function(He,be,z){(function(){var M,O={}.hasOwnProperty;M=z(3576),He.exports=function(V){function L(R){L.__super__.constructor.call(this,R)}return function(V,L){for(var R in L)O.call(L,R)&&(V[R]=L[R]);function j(){this.constructor=V}j.prototype=L.prototype,V.prototype=new j,V.__super__=L.prototype}(L,V),L.prototype.document=function(R,j){var Z,te,ie,Y;for(j=this.filterOptions(j),ie="",Z=0,te=(Y=R.children).length;Z<te;Z++)ie+=this.writeChildNode(Y[Z],j,0);return j.pretty&&ie.slice(-j.newline.length)===j.newline&&(ie=ie.slice(0,-j.newline.length)),ie},L}(M)}).call(this)},5041:function(He){(function(){var z=function(M,U){return function(){return M.apply(U,arguments)}},X={}.hasOwnProperty;He.exports=function(){function M(U){var O,V;for(O in this.assertLegalName=z(this.assertLegalName,this),this.assertLegalChar=z(this.assertLegalChar,this),U||(U={}),this.options=U,this.options.version||(this.options.version="1.0"),V=U.stringify||{})!X.call(V,O)||(this[O]=V[O])}return M.prototype.name=function(U){return this.options.noValidation?U:this.assertLegalName(""+U||"")},M.prototype.text=function(U){return this.options.noValidation?U:this.assertLegalChar(this.textEscape(""+U||""))},M.prototype.cdata=function(U){return this.options.noValidation?U:(U=(U=""+U||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(U))},M.prototype.comment=function(U){if(this.options.noValidation)return U;if((U=""+U||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+U);return this.assertLegalChar(U)},M.prototype.raw=function(U){return this.options.noValidation?U:""+U||""},M.prototype.attValue=function(U){return this.options.noValidation?U:this.assertLegalChar(this.attEscape(U=""+U||""))},M.prototype.insTarget=function(U){return this.options.noValidation?U:this.assertLegalChar(""+U||"")},M.prototype.insValue=function(U){if(this.options.noValidation)return U;if((U=""+U||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+U);return this.assertLegalChar(U)},M.prototype.xmlVersion=function(U){if(this.options.noValidation)return U;if(!(U=""+U||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+U);return U},M.prototype.xmlEncoding=function(U){if(this.options.noValidation)return U;if(!(U=""+U||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+U);return this.assertLegalChar(U)},M.prototype.xmlStandalone=function(U){return this.options.noValidation?U:U?"yes":"no"},M.prototype.dtdPubID=function(U){return this.options.noValidation?U:this.assertLegalChar(""+U||"")},M.prototype.dtdSysID=function(U){return this.options.noValidation?U:this.assertLegalChar(""+U||"")},M.prototype.dtdElementValue=function(U){return this.options.noValidation?U:this.assertLegalChar(""+U||"")},M.prototype.dtdAttType=function(U){return this.options.noValidation?U:this.assertLegalChar(""+U||"")},M.prototype.dtdAttDefault=function(U){return this.options.noValidation?U:this.assertLegalChar(""+U||"")},M.prototype.dtdEntityValue=function(U){return this.options.noValidation?U:this.assertLegalChar(""+U||"")},M.prototype.dtdNData=function(U){return this.options.noValidation?U:this.assertLegalChar(""+U||"")},M.prototype.convertAttKey="@",M.prototype.convertPIKey="?",M.prototype.convertTextKey="#text",M.prototype.convertCDataKey="#cdata",M.prototype.convertCommentKey="#comment",M.prototype.convertRawKey="#raw",M.prototype.assertLegalChar=function(U){var V;if(this.options.noValidation)return U;if("1.0"===this.options.version){if(V=U.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+U+" at index "+V.index)}else if("1.1"===this.options.version&&(V=U.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+U+" at index "+V.index);return U},M.prototype.assertLegalName=function(U){if(this.options.noValidation)return U;if(this.assertLegalChar(U),!U.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return U},M.prototype.textEscape=function(U){return this.options.noValidation?U:U.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},M.prototype.attEscape=function(U){return this.options.noValidation?U:U.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},M}()}).call(this)},474:function(He,be,z){(function(){var X,M,V={}.hasOwnProperty;X=z(2269),M=z(2182),He.exports=function(L){function R(j,J){if(R.__super__.constructor.call(this,j),null==J)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=X.Text,this.value=this.stringify.text(J)}return function(L,R){for(var j in R)V.call(R,j)&&(L[j]=R[j]);function J(){this.constructor=L}J.prototype=R.prototype,L.prototype=new J,L.__super__=R.prototype}(R,L),Object.defineProperty(R.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(R.prototype,"wholeText",{get:function(){var j,J,Z;for(Z="",J=this.previousSibling;J;)Z=J.data+Z,J=J.previousSibling;for(Z+=this.data,j=this.nextSibling;j;)Z+=j.data,j=j.nextSibling;return Z}}),R.prototype.clone=function(){return Object.create(this)},R.prototype.toString=function(j){return this.options.writer.text(this,this.options.writer.filterOptions(j))},R.prototype.splitText=function(j){throw new Error("This DOM method is not implemented."+this.debugInfo())},R.prototype.replaceWholeText=function(j){throw new Error("This DOM method is not implemented."+this.debugInfo())},R}(M)}).call(this)},3576:function(He,be,z){(function(){var X,M,Ie,ne={}.hasOwnProperty;Ie=z(3452).assign,X=z(2269),z(4789),z(9195),z(1361),z(2516),z(3352),z(9942),z(474),z(4666),z(4173),z(7274),z(2068),z(8349),z(3087),M=z(6316),He.exports=function(){function ae(N){var $,re,pe;for($ in N||(N={}),this.options=N,re=N.writer||{})!ne.call(re,$)||(pe=re[$],this["_"+$]=this[$],this[$]=pe)}return ae.prototype.filterOptions=function(N){var $,re,pe,Ne,Ee,xe,ue,Re;return N||(N={}),N=Ie({},this.options,N),($={writer:this}).pretty=N.pretty||!1,$.allowEmpty=N.allowEmpty||!1,$.indent=null!=(re=N.indent)?re:"  ",$.newline=null!=(pe=N.newline)?pe:"\n",$.offset=null!=(Ne=N.offset)?Ne:0,$.dontPrettyTextNodes=null!=(Ee=null!=(xe=N.dontPrettyTextNodes)?xe:N.dontprettytextnodes)?Ee:0,$.spaceBeforeSlash=null!=(ue=null!=(Re=N.spaceBeforeSlash)?Re:N.spacebeforeslash)?ue:"",!0===$.spaceBeforeSlash&&($.spaceBeforeSlash=" "),$.suppressPrettyCount=0,$.user={},$.state=M.None,$},ae.prototype.indent=function(N,$,re){var pe;return!$.pretty||$.suppressPrettyCount?"":$.pretty&&(pe=(re||0)+$.offset+1)>0?new Array(pe).join($.indent):""},ae.prototype.endline=function(N,$,re){return!$.pretty||$.suppressPrettyCount?"":$.newline},ae.prototype.attribute=function(N,$,re){var pe;return this.openAttribute(N,$,re),pe=" "+N.name+'="'+N.value+'"',this.closeAttribute(N,$,re),pe},ae.prototype.cdata=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re)+"<![CDATA[",$.state=M.InsideTag,pe+=N.value,$.state=M.CloseTag,pe+="]]>"+this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.comment=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re)+"\x3c!-- ",$.state=M.InsideTag,pe+=N.value,$.state=M.CloseTag,pe+=" --\x3e"+this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.declaration=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re)+"<?xml",$.state=M.InsideTag,pe+=' version="'+N.version+'"',null!=N.encoding&&(pe+=' encoding="'+N.encoding+'"'),null!=N.standalone&&(pe+=' standalone="'+N.standalone+'"'),$.state=M.CloseTag,pe+=$.spaceBeforeSlash+"?>",pe+=this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.docType=function(N,$,re){var Ne,Ee,xe,ue;if(re||(re=0),this.openNode(N,$,re),$.state=M.OpenTag,xe=this.indent(N,$,re),xe+="<!DOCTYPE "+N.root().name,N.pubID&&N.sysID?xe+=' PUBLIC "'+N.pubID+'" "'+N.sysID+'"':N.sysID&&(xe+=' SYSTEM "'+N.sysID+'"'),N.children.length>0){for(xe+=" [",xe+=this.endline(N,$,re),$.state=M.InsideTag,Ne=0,Ee=(ue=N.children).length;Ne<Ee;Ne++)xe+=this.writeChildNode(ue[Ne],$,re+1);$.state=M.CloseTag,xe+="]"}return $.state=M.CloseTag,xe+=$.spaceBeforeSlash+">",xe+=this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),xe},ae.prototype.element=function(N,$,re){var Ne,Ee,xe,ue,Re,Je,ke,qe,ot,yt,hn,Be,lt;for(qe in re||(re=0),ot=!1,yt="",this.openNode(N,$,re),$.state=M.OpenTag,yt+=this.indent(N,$,re)+"<"+N.name,hn=N.attribs)!ne.call(hn,qe)||(yt+=this.attribute(hn[qe],$,re));if(xe=0===(Ee=N.children.length)?null:N.children[0],0===Ee||N.children.every(function(Ve){return(Ve.type===X.Text||Ve.type===X.Raw)&&""===Ve.value}))$.allowEmpty?(yt+=">",$.state=M.CloseTag,yt+="</"+N.name+">"+this.endline(N,$,re)):($.state=M.CloseTag,yt+=$.spaceBeforeSlash+"/>"+this.endline(N,$,re));else if(!$.pretty||1!==Ee||xe.type!==X.Text&&xe.type!==X.Raw||null==xe.value){if($.dontPrettyTextNodes)for(ue=0,Je=(Be=N.children).length;ue<Je;ue++)if(((Ne=Be[ue]).type===X.Text||Ne.type===X.Raw)&&null!=Ne.value){$.suppressPrettyCount++,ot=!0;break}for(yt+=">"+this.endline(N,$,re),$.state=M.InsideTag,Re=0,ke=(lt=N.children).length;Re<ke;Re++)yt+=this.writeChildNode(Ne=lt[Re],$,re+1);$.state=M.CloseTag,yt+=this.indent(N,$,re)+"</"+N.name+">",ot&&$.suppressPrettyCount--,yt+=this.endline(N,$,re),$.state=M.None}else yt+=">",$.state=M.InsideTag,$.suppressPrettyCount++,ot=!0,yt+=this.writeChildNode(xe,$,re+1),$.suppressPrettyCount--,ot=!1,$.state=M.CloseTag,yt+="</"+N.name+">"+this.endline(N,$,re);return this.closeNode(N,$,re),yt},ae.prototype.writeChildNode=function(N,$,re){switch(N.type){case X.CData:return this.cdata(N,$,re);case X.Comment:return this.comment(N,$,re);case X.Element:return this.element(N,$,re);case X.Raw:return this.raw(N,$,re);case X.Text:return this.text(N,$,re);case X.ProcessingInstruction:return this.processingInstruction(N,$,re);case X.Dummy:return"";case X.Declaration:return this.declaration(N,$,re);case X.DocType:return this.docType(N,$,re);case X.AttributeDeclaration:return this.dtdAttList(N,$,re);case X.ElementDeclaration:return this.dtdElement(N,$,re);case X.EntityDeclaration:return this.dtdEntity(N,$,re);case X.NotationDeclaration:return this.dtdNotation(N,$,re);default:throw new Error("Unknown XML node type: "+N.constructor.name)}},ae.prototype.processingInstruction=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re)+"<?",$.state=M.InsideTag,pe+=N.target,N.value&&(pe+=" "+N.value),$.state=M.CloseTag,pe+=$.spaceBeforeSlash+"?>",pe+=this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.raw=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re),$.state=M.InsideTag,pe+=N.value,$.state=M.CloseTag,pe+=this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.text=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re),$.state=M.InsideTag,pe+=N.value,$.state=M.CloseTag,pe+=this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.dtdAttList=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re)+"<!ATTLIST",$.state=M.InsideTag,pe+=" "+N.elementName+" "+N.attributeName+" "+N.attributeType,"#DEFAULT"!==N.defaultValueType&&(pe+=" "+N.defaultValueType),N.defaultValue&&(pe+=' "'+N.defaultValue+'"'),$.state=M.CloseTag,pe+=$.spaceBeforeSlash+">"+this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.dtdElement=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re)+"<!ELEMENT",$.state=M.InsideTag,pe+=" "+N.name+" "+N.value,$.state=M.CloseTag,pe+=$.spaceBeforeSlash+">"+this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.dtdEntity=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re)+"<!ENTITY",$.state=M.InsideTag,N.pe&&(pe+=" %"),pe+=" "+N.name,N.value?pe+=' "'+N.value+'"':(N.pubID&&N.sysID?pe+=' PUBLIC "'+N.pubID+'" "'+N.sysID+'"':N.sysID&&(pe+=' SYSTEM "'+N.sysID+'"'),N.nData&&(pe+=" NDATA "+N.nData)),$.state=M.CloseTag,pe+=$.spaceBeforeSlash+">"+this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.dtdNotation=function(N,$,re){var pe;return this.openNode(N,$,re),$.state=M.OpenTag,pe=this.indent(N,$,re)+"<!NOTATION",$.state=M.InsideTag,pe+=" "+N.name,N.pubID&&N.sysID?pe+=' PUBLIC "'+N.pubID+'" "'+N.sysID+'"':N.pubID?pe+=' PUBLIC "'+N.pubID+'"':N.sysID&&(pe+=' SYSTEM "'+N.sysID+'"'),$.state=M.CloseTag,pe+=$.spaceBeforeSlash+">"+this.endline(N,$,re),$.state=M.None,this.closeNode(N,$,re),pe},ae.prototype.openNode=function(N,$,re){},ae.prototype.closeNode=function(N,$,re){},ae.prototype.openAttribute=function(N,$,re){},ae.prototype.closeAttribute=function(N,$,re){},ae}()}).call(this)},7904:function(He,be,z){(function(){var X,M,U,O,V,L,R,j,J,Z;Z=z(3452),j=Z.assign,J=Z.isFunction,U=z(9906),O=z(519),V=z(1105),R=z(4354),L=z(7647),X=z(2269),M=z(6316),He.exports.create=function(te,ie,Y,G){var oe,ye;if(null==te)throw new Error("Root element needs a name.");return G=j({},ie,Y,G),ye=(oe=new O(G)).element(te),G.headless||(oe.declaration(G),(null!=G.pubID||null!=G.sysID)&&oe.dtd(G)),ye},He.exports.begin=function(te,ie,Y){var G;return J(te)&&(ie=(G=[te,ie])[0],Y=G[1],te={}),ie?new V(te,ie,Y):new O(te)},He.exports.stringWriter=function(te){return new R(te)},He.exports.streamWriter=function(te,ie){return new L(te,ie)},He.exports.implementation=new U,He.exports.nodeType=X,He.exports.writerState=M}).call(this)},2361:()=>{},4616:()=>{},5485:He=>{"use strict";He.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\u{1d504}","afr":"\u{1d51e}","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1d538}","aopf":"\u{1d552}","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\u{1d49c}","ascr":"\u{1d4b6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\u{1d505}","bfr":"\u{1d51f}","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\u{1d539}","bopf":"\u{1d553}","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\u{1d4b7}","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\u{1d520}","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\u{1d554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\u{1d49e}","cscr":"\u{1d4b8}","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\u{1d507}","dfr":"\u{1d521}","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\u{1d53b}","dopf":"\u{1d555}","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\u{1d49f}","dscr":"\u{1d4b9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1d508}","efr":"\u{1d522}","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1d53c}","eopf":"\u{1d556}","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\u{1d509}","ffr":"\u{1d523}","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\u{1d53d}","fopf":"\u{1d557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\u{1d4bb}","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\u{1d50a}","gfr":"\u{1d524}","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\u{1d53e}","gopf":"\u{1d558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\u{1d4a2}","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\u{1d525}","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\u{1d559}","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1d4bd}","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\u{1d526}","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\u{1d540}","iopf":"\u{1d55a}","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\u{1d4be}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1d50d}","jfr":"\u{1d527}","jmath":"\u0237","Jopf":"\u{1d541}","jopf":"\u{1d55b}","Jscr":"\u{1d4a5}","jscr":"\u{1d4bf}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\u{1d50e}","kfr":"\u{1d528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\u{1d542}","kopf":"\u{1d55c}","Kscr":"\u{1d4a6}","kscr":"\u{1d4c0}","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\u{1d50f}","lfr":"\u{1d529}","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\u{1d543}","lopf":"\u{1d55d}","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\u{1d4c1}","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\u{1d510}","mfr":"\u{1d52a}","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\u{1d544}","mopf":"\u{1d55e}","mp":"\u2213","mscr":"\u{1d4c2}","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1d511}","nfr":"\u{1d52b}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\u{1d55f}","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\u{1d4a9}","nscr":"\u{1d4c3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\u{1d512}","ofr":"\u{1d52c}","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\u{1d546}","oopf":"\u{1d560}","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\u{1d4aa}","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\u{1d513}","pfr":"\u{1d52d}","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\u{1d561}","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\u{1d4ab}","pscr":"\u{1d4c5}","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\u{1d514}","qfr":"\u{1d52e}","qint":"\u2a0c","qopf":"\u{1d562}","Qopf":"\u211a","qprime":"\u2057","Qscr":"\u{1d4ac}","qscr":"\u{1d4c6}","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\u{1d52f}","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\u{1d563}","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\u{1d4c7}","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1d516}","sfr":"\u{1d530}","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\u{1d54a}","sopf":"\u{1d564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\u{1d4ae}","sscr":"\u{1d4c8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\u{1d517}","tfr":"\u{1d531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\u{1d54b}","topf":"\u{1d565}","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\u{1d4af}","tscr":"\u{1d4c9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\u{1d518}","ufr":"\u{1d532}","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1d54c}","uopf":"\u{1d566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\u{1d4b0}","uscr":"\u{1d4ca}","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\u{1d519}","vfr":"\u{1d533}","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\u{1d54d}","vopf":"\u{1d567}","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\u{1d4b1}","vscr":"\u{1d4cb}","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1d51a}","wfr":"\u{1d534}","Wopf":"\u{1d54e}","wopf":"\u{1d568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1d4b2}","wscr":"\u{1d4cc}","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\u{1d51b}","xfr":"\u{1d535}","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\u{1d54f}","xopf":"\u{1d569}","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\u{1d4b3}","xscr":"\u{1d4cd}","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\u{1d51c}","yfr":"\u{1d536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1d550}","yopf":"\u{1d56a}","Yscr":"\u{1d4b4}","yscr":"\u{1d4ce}","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\u{1d537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\u{1d56b}","Zopf":"\u2124","Zscr":"\u{1d4b5}","zscr":"\u{1d4cf}","zwj":"\u200d","zwnj":"\u200c"}')}},He=>{He(He.s=30)}]);