(self.webpackChunkfront=self.webpackChunkfront||[]).push([[179],{2534:(Be,be,V)=>{"use strict";function Y(i){return"function"==typeof i}function D(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const H=D(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function B(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class W{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(Y(n))try{n()}catch(s){t=s instanceof H?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{q(s)}catch(o){t=t??[],o instanceof H?t=[...t,...o.errors]:t.push(o)}}if(t)throw new H(t)}}add(t){var e;if(t&&t!==this)if(this.closed)q(t);else{if(t instanceof W){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&B(e,t)}remove(t){const{_finalizers:e}=this;e&&B(e,t),t instanceof W&&t._removeParent(this)}}W.EMPTY=(()=>{const i=new W;return i.closed=!0,i})();const P=W.EMPTY;function O(i){return i instanceof W||i&&"closed"in i&&Y(i.remove)&&Y(i.add)&&Y(i.unsubscribe)}function q(i){Y(i)?i():i.unsubscribe()}const te={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J={setTimeout(i,t,...e){const{delegate:n}=J;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=J;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function oe(i){J.setTimeout(()=>{const{onUnhandledError:t}=te;if(!t)throw i;t(i)})}function se(){}const Q=xe("C",void 0,void 0);function xe(i,t,e){return{kind:i,value:t,error:e}}let Oe=null;function re(i){if(te.useDeprecatedSynchronousErrorHandling){const t=!Oe;if(t&&(Oe={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=Oe;if(Oe=null,e)throw n}}else i()}class z extends W{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,O(t)&&t.add(this)):this.destination=at}static create(t,e,n){return new Ue(t,e,n)}next(t){this.isStopped?Pe(function ae(i){return xe("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Pe(function U(i){return xe("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Pe(Q,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $=Function.prototype.bind;function ne(i,t){return $.call(i,t)}class ge{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Re(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Re(n)}else Re(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Re(e)}}}class Ue extends z{constructor(t,e,n){let r;if(super(),Y(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&te.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&ne(t.next,s),error:t.error&&ne(t.error,s),complete:t.complete&&ne(t.complete,s)}):r=t}this.destination=new ge(r)}}function Re(i){te.useDeprecatedSynchronousErrorHandling?function ue(i){te.useDeprecatedSynchronousErrorHandling&&Oe&&(Oe.errorThrown=!0,Oe.error=i)}(i):oe(i)}function Pe(i,t){const{onStoppedNotification:e}=te;e&&J.setTimeout(()=>e(i,t))}const at={closed:!0,next:se,error:function rt(i){throw i},complete:se},xt="function"==typeof Symbol&&Symbol.observable||"@@observable";function He(i){return i}function gt(i){return 0===i.length?He:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let Ct=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function Dn(i){return i&&i instanceof z||function Ut(i){return i&&Y(i.next)&&Y(i.error)&&Y(i.complete)}(i)&&O(i)}(e)?e:new Ue(e,n,r);return re(()=>{const{operator:o,source:l}=this;s.add(o?o.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=kn(n))((r,s)=>{const o=new Ue({next:l=>{try{e(l)}catch(u){s(u),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[xt](){return this}pipe(...e){return gt(e)(this)}toPromise(e){return new(e=kn(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function kn(i){var t;return null!==(t=i??te.Promise)&&void 0!==t?t:Promise}const Jt=D(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let nn=(()=>{class i extends Ct{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new Ln(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new Jt}next(e){re(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){re(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){re(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?P:(this.currentObservers=null,s.push(e),new W(()=>{this.currentObservers=null,B(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new Ct;return e.source=this,e}}return i.create=(t,e)=>new Ln(t,e),i})();class Ln extends nn{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:P}}function xn(i){return Y(i?.lift)}function bn(i){return t=>{if(xn(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function yn(i,t,e,n,r){return new je(i,t,e,n,r)}class je extends z{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(l){try{e(l)}catch(u){t.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Ce(i,t){return bn((e,n)=>{let r=0;e.subscribe(yn(n,s=>{n.next(i.call(t,s,r++))}))})}function bs(i){return this instanceof bs?(this.v=i,this):new bs(i)}function ca(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(I){n[I]&&(r[I]=function(M){return new Promise(function(F,j){s.push([I,M,F,j])>1||l(I,M)})})}function l(I,M){try{!function u(I){I.value instanceof bs?Promise.resolve(I.value.v).then(p,v):x(s[0][2],I)}(n[I](M))}catch(F){x(s[0][3],F)}}function p(I){l("next",I)}function v(I){l("throw",I)}function x(I,M){I(M),s.shift(),s.length&&l(s[0][0],s[0][1])}}function tl(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function vn(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(l,u){!function r(s,o,l,u){Promise.resolve(u).then(function(p){s({value:p,done:l})},o)}(l,u,(o=i[s](o)).done,o.value)})}}}const Lu=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function qa(i){return Y(i?.then)}function Ld(i){return Y(i[xt])}function cu(i){return Symbol.asyncIterator&&Y(i?.[Symbol.asyncIterator])}function Aa(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Pu=function Ih(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ed(i){return Y(i?.[Pu])}function hf(i){return ca(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield bs(e.read());if(r)return yield bs(void 0);yield yield bs(n)}}finally{e.releaseLock()}})}function td(i){return Y(i?.getReader)}function dl(i){if(i instanceof Ct)return i;if(null!=i){if(Ld(i))return function df(i){return new Ct(t=>{const e=i[xt]();if(Y(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(Lu(i))return function nh(i){return new Ct(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(qa(i))return function ff(i){return new Ct(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,oe)})}(i);if(cu(i))return xc(i);if(ed(i))return function Pd(i){return new Ct(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(td(i))return function Tg(i){return xc(hf(i))}(i)}throw Aa(i)}function xc(i){return new Ct(t=>{(function Sh(i,t){var e,n,r,s;return function Je(i,t,e,n){return new(e||(e=Promise))(function(s,o){function l(v){try{p(n.next(v))}catch(x){o(x)}}function u(v){try{p(n.throw(v))}catch(x){o(x)}}function p(v){v.done?s(v.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(v.value).then(l,u)}p((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=tl(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function to(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function fl(i,t,e=1/0){return Y(t)?fl((n,r)=>Ce((s,o)=>t(n,s,r,o))(dl(i(n,r))),e):("number"==typeof t&&(e=t),bn((n,r)=>function pf(i,t,e,n,r,s,o,l){const u=[];let p=0,v=0,x=!1;const I=()=>{x&&!u.length&&!p&&t.complete()},M=j=>p<n?F(j):u.push(j),F=j=>{s&&t.next(j),p++;let X=!1;dl(e(j,v++)).subscribe(yn(t,ce=>{r?.(ce),s?M(ce):t.next(ce)},()=>{X=!0},void 0,()=>{if(X)try{for(p--;u.length&&p<n;){const ce=u.shift();o?to(t,o,()=>F(ce)):F(ce)}I()}catch(ce){t.error(ce)}}))};return i.subscribe(yn(t,M,()=>{x=!0,I()})),()=>{l?.()}}(n,r,i,e)))}function wc(i=1/0){return fl(He,i)}const nl=new Ct(i=>i.complete());function Ge(i){return i&&Y(i.schedule)}function it(i){return i[i.length-1]}function Ye(i){return Y(it(i))?i.pop():void 0}function he(i){return Ge(it(i))?i.pop():void 0}function $e(i,t=0){return bn((e,n)=>{e.subscribe(yn(n,r=>to(n,i,()=>n.next(r),t),()=>to(n,i,()=>n.complete(),t),r=>to(n,i,()=>n.error(r),t)))})}function _t(i,t=0){return bn((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function di(i,t){if(!i)throw new Error("Iterable cannot be null");return new Ct(e=>{to(e,t,()=>{const n=i[Symbol.asyncIterator]();to(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function sr(i,t){return t?function dr(i,t){if(null!=i){if(Ld(i))return function zt(i,t){return dl(i).pipe(_t(t),$e(t))}(i,t);if(Lu(i))return function yi(i,t){return new Ct(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(qa(i))return function In(i,t){return dl(i).pipe(_t(t),$e(t))}(i,t);if(cu(i))return di(i,t);if(ed(i))return function ti(i,t){return new Ct(e=>{let n;return to(e,t,()=>{n=i[Pu](),to(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>Y(n?.return)&&n.return()})}(i,t);if(td(i))return function mr(i,t){return di(hf(i),t)}(i,t)}throw Aa(i)}(i,t):dl(i)}function bo(i={}){const{connector:t=(()=>new nn),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,l,u,p=0,v=!1,x=!1;const I=()=>{l?.unsubscribe(),l=void 0},M=()=>{I(),o=u=void 0,v=x=!1},F=()=>{const j=o;M(),j?.unsubscribe()};return bn((j,X)=>{p++,!x&&!v&&I();const ce=u=u??t();X.add(()=>{p--,0===p&&!x&&!v&&(l=xo(F,r))}),ce.subscribe(X),!o&&p>0&&(o=new Ue({next:we=>ce.next(we),error:we=>{x=!0,I(),l=xo(M,e,we),ce.error(we)},complete:()=>{v=!0,I(),l=xo(M,n),ce.complete()}}),dl(j).subscribe(o))})(s)}}function xo(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new Ue({next:()=>{n.unsubscribe(),i()}});return t(...e).subscribe(n)}function cs(i){for(let t in i)if(i[t]===cs)return t;throw Error("Could not find renamed property on target object.")}function Ia(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function us(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(us).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Xa(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const Ru=cs({__forward_ref__:cs});function hs(i){return i.__forward_ref__=hs,i.toString=function(){return us(this())},i}function ts(i){return Mg(i)?i():i}function Mg(i){return"function"==typeof i&&i.hasOwnProperty(Ru)&&i.__forward_ref__===hs}class gi extends Error{constructor(t,e){super(function Dg(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}(t,e)),this.code=t}}function Ls(i){return"string"==typeof i?i:null==i?"":String(i)}function xs(i,t){throw new gi(-201,!1)}function Ic(i,t){null==i&&function no(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function Yi(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Dr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Sc(i){return Sy(i,$f)||Sy(i,bm)}function Sy(i,t){return i.hasOwnProperty(t)?i[t]:null}function ua(i){return i&&(i.hasOwnProperty(Vp)||i.hasOwnProperty(xm))?i[Vp]:null}const $f=cs({\u0275prov:cs}),Vp=cs({\u0275inj:cs}),bm=cs({ngInjectableDef:cs}),xm=cs({ngInjectorDef:cs});var ns=(()=>((ns=ns||{})[ns.Default=0]="Default",ns[ns.Host=1]="Host",ns[ns.Self=2]="Self",ns[ns.SkipSelf=4]="SkipSelf",ns[ns.Optional=8]="Optional",ns))();let vv;function ku(i){const t=vv;return vv=i,t}function Xl(i,t,e){const n=Sc(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&ns.Optional?null:void 0!==t?t:void xs(us(i))}function ih(i){return{toString:i}.toString()}var rh=(()=>((rh=rh||{})[rh.OnPush=0]="OnPush",rh[rh.Default=1]="Default",rh))(),Ea=(()=>{return(i=Ea||(Ea={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ea;var i})();const io=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),kd={},go=[],Ya=cs({\u0275cmp:cs}),qf=cs({\u0275dir:cs}),Ka=cs({\u0275pipe:cs}),il=cs({\u0275mod:cs}),uu=cs({\u0275fac:cs}),sh=cs({__NG_ELEMENT_ID__:cs});let Xf=0;function Ar(i){return ih(()=>{const e=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===rh.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||go,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ea.Emulated,id:"c"+Xf++,styles:i.styles||go,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=My(i.inputs,n),r.outputs=My(i.outputs),o&&o.forEach(l=>l(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Mh).filter(gf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ma).filter(gf):null,r})}function Mh(i){return $o(i)||Ol(i)}function gf(i){return null!==i}function Rr(i){return ih(()=>({type:i.type,bootstrap:i.bootstrap||go,declarations:i.declarations||go,imports:i.imports||go,exports:i.exports||go,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function My(i,t){if(null==i)return kd;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}const qr=Ar;function hu(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function $o(i){return i[Ya]||null}function Ol(i){return i[qf]||null}function Ma(i){return i[Ka]||null}function du(i,t){const e=i[il]||null;if(!e&&!0===t)throw new Error(`Type ${us(i)} does not have '\u0275mod' property.`);return e}function Kc(i){return Array.isArray(i)&&"object"==typeof i[1]}function Dh(i){return Array.isArray(i)&&!0===i[1]}function _v(i){return 0!=(8&i.flags)}function Rg(i){return 2==(2&i.flags)}function kg(i){return 1==(1&i.flags)}function Lh(i){return null!==i.template}function Im(i){return 0!=(256&i[2])}function np(i,t){return i.hasOwnProperty(uu)?i[uu]:null}class Tm{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ya(){return yf}function yf(i){return i.type.prototype.ngOnChanges&&(i.setInput=ip),Py}function Py(){const i=Mm(this),t=i?.current;if(t){const e=i.previous;if(e===kd)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function ip(i,t,e,n){const r=Mm(i)||function Fg(i,t){return i[Iv]=t}(i,{previous:kd,current:null}),s=r.current||(r.current={}),o=r.previous,l=this.declaredInputs[e],u=o[l];s[l]=new Tm(u&&u.currentValue,t,o===kd),i[n]=t}ya.ngInherit=!0;const Iv="__ngSimpleChanges__";function Mm(i){return i[Iv]||null}function na(i){for(;Array.isArray(i);)i=i[0];return i}function zg(i,t){return na(t[i])}function ch(i,t){return na(t[i.index])}function vs(i,t){return i.data[t]}function Tc(i,t){const e=t[i];return Kc(e)?e:e[0]}function mo(i){return 4==(4&i[2])}function Do(i){return 64==(64&i[2])}function $s(i,t){return null==t?null:i[t]}function jr(i){i[18]=0}function Vg(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const es={lFrame:ba(null),bindingsEnabled:!0};function Oy(){return es.bindingsEnabled}function mi(){return es.lFrame.lView}function Es(){return es.lFrame.tView}function wt(i){return es.lFrame.contextLView=i,i[8]}function It(i){return es.lFrame.contextLView=null,i}function ut(){let i=Lo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Lo(){return es.lFrame.currentTNode}function ia(i,t){const e=es.lFrame;e.currentTNode=i,e.isParent=t}function Ps(){return es.lFrame.isParent}function $p(){es.lFrame.isParent=!1}function Po(){const i=es.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function Rh(){return es.lFrame.bindingIndex++}function gl(i){const t=es.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function Nd(i,t){const e=es.lFrame;e.bindingIndex=e.bindingRootIndex=i,Ou(t)}function Ou(i){es.lFrame.currentDirectiveIndex=i}function Dc(){return es.lFrame.currentQueryIndex}function Ug(i){es.lFrame.currentQueryIndex=i}function Ts(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function Ev(i,t,e){if(e&ns.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&ns.Host||(r=Ts(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;t=r,i=s}const n=es.lFrame=Er();return n.currentTNode=t,n.lView=i,!0}function Hg(i){const t=Er(),e=i[1];es.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Er(){const i=es.lFrame,t=null===i?null:i.child;return null===t?ba(i):t}function ba(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function Nl(){const i=es.lFrame;return es.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ra=Nl;function za(){const i=Nl();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function uc(){return es.lFrame.selectedIndex}function Cf(i){es.lFrame.selectedIndex=i}function Va(){const i=es.lFrame;return vs(i.tView,i.selectedIndex)}function xf(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:p,ngOnDestroy:v}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-e,o),l&&((i.contentHooks||(i.contentHooks=[])).push(e,l),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,l)),u&&(i.viewHooks||(i.viewHooks=[])).push(-e,u),p&&((i.viewHooks||(i.viewHooks=[])).push(e,p),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,p)),null!=v&&(i.destroyHooks||(i.destroyHooks=[])).push(e,v)}}function zd(i,t,e){wf(i,t,3,e)}function jg(i,t,e,n){(3&i[2])===e&&wf(i,t,e,n)}function kh(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function wf(i,t,e,n){const s=n??-1,o=t.length-1;let l=0;for(let u=void 0!==n?65535&i[18]:0;u<o;u++)if("number"==typeof t[u+1]){if(l=t[u],null!=n&&l>=n)break}else t[u]<0&&(i[18]+=65536),(l<s||-1==s)&&(Af(i,e,t,u),i[18]=(4294901760&i[18])+u+2),u++}function Af(i,t,e,n){const r=e[n]<0,s=e[n+1],l=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{s.call(l)}finally{}}}else try{s.call(l)}finally{}}class qp{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Xp(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],l=e[n++];i.setAttribute(t,o,l,s)}else{const s=r,o=e[++n];Ud(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function ol(i){return 3===i||4===i||6===i}function Ud(i){return 64===i.charCodeAt(0)}function Oh(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||Lc(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function Lc(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const l=i[s++];if("number"==typeof l){if(l===t){o=-1;break}if(l>t){o=s-1;break}}}for(;s<i.length;){const l=i[s];if("number"==typeof l)break;if(l===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function Fh(i){return-1!==i}function uh(i){return 32767&i}function gu(i,t){let e=function Fu(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let sa=!0;function ad(i){const t=sa;return sa=i,t}let mu=0;const vo={};function js(i,t){const e=lp(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,ap(n.data,i),ap(t,null),ap(n.blueprint,null));const r=Rc(i,t),s=i.injectorIndex;if(Fh(r)){const o=uh(r),l=gu(r,t),u=l[1].data;for(let p=0;p<8;p++)t[s+p]=l[o+p]|u[o+p]}return t[s+8]=r,s}function ap(i,t){i.push(0,0,0,0,0,0,0,0,t)}function lp(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function Rc(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=Za(r),null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function cp(i,t,e){!function Pc(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(sh)&&(n=e[sh]),null==n&&(n=e[sh]=mu++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function hh(i,t,e){if(e&ns.Optional)return i;xs()}function Hd(i,t,e,n){if(e&ns.Optional&&void 0===n&&(n=null),0==(e&(ns.Self|ns.Host))){const r=i[9],s=ku(void 0);try{return r?r.get(t,n,e&ns.Optional):Xl(t,n,e&ns.Optional)}finally{ku(s)}}return hh(n,0,e)}function Gd(i,t,e,n=ns.Default,r){if(null!==i){if(1024&t[2]){const o=function Bh(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const l=Ql(s,o,e,n|ns.Self,vo);if(l!==vo)return l;let u=s.parent;if(!u){const p=o[21];if(p){const v=p.get(e,vo,n);if(v!==vo)return v}u=Za(o),o=o[15]}s=u}return r}(i,t,e,n,vo);if(o!==vo)return o}const s=Ql(i,t,e,n,vo);if(s!==vo)return s}return Hd(t,e,n,r)}function Ql(i,t,e,n,r){const s=function ld(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(sh)?i[sh]:void 0;return"number"==typeof t?t>=0?255&t:Yp:t}(e);if("function"==typeof s){if(!Ev(t,i,n))return n&ns.Host?hh(r,0,n):Hd(t,e,n,r);try{const o=s(n);if(null!=o||n&ns.Optional)return o;xs()}finally{ra()}}else if("number"==typeof s){let o=null,l=lp(i,t),u=-1,p=n&ns.Host?t[16][6]:null;for((-1===l||n&ns.SkipSelf)&&(u=-1===l?Rc(i,t):t[l+8],-1!==u&&up(n,!1)?(o=t[1],l=uh(u),t=gu(u,t)):l=-1);-1!==l;){const v=t[1];if(Wd(s,l,v.data)){const x=ll(l,t,e,o,n,p);if(x!==vo)return x}u=t[l+8],-1!==u&&up(n,t[1].data[l+8]===p)&&Wd(s,l,t)?(o=v,l=uh(u),t=gu(u,t)):l=-1}}return r}function ll(i,t,e,n,r,s){const o=t[1],l=o.data[i+8],v=Nh(l,o,e,null==n?Rg(l)&&sa:n!=o&&0!=(3&l.type),r&ns.Host&&s===l);return null!==v?Qc(t,o,v,l):vo}function Nh(i,t,e,n,r){const s=i.providerIndexes,o=t.data,l=1048575&s,u=i.directiveStart,v=s>>20,I=r?l+v:i.directiveEnd;for(let M=n?l:l+v;M<I;M++){const F=o[M];if(M<u&&e===F||M>=u&&F.type===e)return M}if(r){const M=o[u];if(M&&Lh(M)&&M.type===e)return u}return null}function Qc(i,t,e,n){let r=i[e];const s=t.data;if(function Fy(i){return i instanceof qp}(r)){const o=r;o.resolving&&function pv(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new gi(-200,`Circular dependency in DI detected for ${i}${e}`)}(function wo(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ls(i)}(s[e]));const l=ad(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?ku(o.injectImpl):null;Ev(i,n,ns.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function Lm(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=yf(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==u&&ku(u),ad(l),o.resolving=!1,ra()}}return r}function Wd(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function up(i,t){return!(i&ns.Self||i&ns.Host&&t)}class dh{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return Gd(this._tNode,this._lView,t,n,e)}}function Yp(){return new dh(ut(),mi())}function zo(i){return ih(()=>{const t=i.prototype.constructor,e=t[uu]||jd(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[uu]||jd(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function jd(i){return Mg(i)?()=>{const t=jd(ts(i));return t&&t()}:np(i)}function Za(i){const t=i[1],e=t.type;return 2===e?t.declTNode:1===e?i[6]:null}function cd(i){return function qg(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(ol(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(ut(),i)}const zh="__parameters__";function oa(i,t,e){return ih(()=>{const n=function ud(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return l.annotation=o,l;function l(u,p,v){const x=u.hasOwnProperty(zh)?u[zh]:Object.defineProperty(u,zh,{value:[]})[zh];for(;x.length<=v;)x.push(null);return(x[v]=x[v]||[]).push(o),u}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class Qi{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Yi({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ua(i,t){void 0===t&&(t=i);for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)?(t===i&&(t=i.slice(0,e)),Ua(n,t)):t!==i&&t.push(n)}return t}function vu(i,t){i.forEach(e=>Array.isArray(e)?vu(e,t):t(e))}function zu(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Vu(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Il(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function Sl(i,t,e){let n=Io(i,t);return n>=0?i[1|n]=e:(n=~n,function hp(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function dc(i,t){const e=Io(i,t);if(e>=0)return i[1|e]}function Io(i,t){return function tc(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const _u={},Ef="__NG_DI_FLAG__",Tf="ngTempTokenPath",pc=/\n/gm,Hh="__source";let qd;function Uu(i){const t=qd;return qd=i,t}function hd(i,t=ns.Default){if(void 0===qd)throw new gi(-203,!1);return null===qd?Xl(i,void 0,t):qd.get(i,t&ns.Optional?null:void 0,t)}function Xn(i,t=ns.Default){return(function yv(){return vv}()||hd)(ts(i),t)}function ha(i,t=ns.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),Xn(i,t)}function Xd(i){const t=[];for(let e=0;e<i.length;e++){const n=ts(i[e]);if(Array.isArray(n)){if(0===n.length)throw new gi(900,!1);let r,s=ns.Default;for(let o=0;o<n.length;o++){const l=n[o],u=Fm(l);"number"==typeof u?-1===u?r=l.token:s|=u:r=l}t.push(Xn(r,s))}else t.push(Xn(n))}return t}function Cu(i,t){return i[Ef]=t,i.prototype[Ef]=t,i}function Fm(i){return i[Ef]}const Hu=Cu(oa("Inject",i=>({token:i})),-1),Tl=Cu(oa("Optional"),8),ph=Cu(oa("SkipSelf"),4);let mh,kc,Wu;function gc(i){return function ka(){if(void 0===kc&&(kc=null,io.trustedTypes))try{kc=io.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return kc}()?.createHTML(i)||i}function pd(i){return function Lf(){if(void 0===Wu&&(Wu=null,io.trustedTypes))try{Wu=io.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Wu}()?.createHTML(i)||i}class tu{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class gd extends tu{getTypeName(){return"HTML"}}class yp extends tu{getTypeName(){return"Style"}}class Um extends tu{getTypeName(){return"Script"}}class H_ extends tu{getTypeName(){return"URL"}}class tm extends tu{getTypeName(){return"ResourceURL"}}function yl(i){return i instanceof tu?i.changingThisBreaksApplicationSecurity:i}function aa(i,t){const e=function Pf(i){return i instanceof tu&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}class rg{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(gc(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class ju{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=gc(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=gc(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const o=e.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&t.removeAttribute(o)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const sg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,og=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function ag(i){return(i=String(i)).match(sg)||i.match(og)?i:"unsafe:"+i}function Oc(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Rf(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const Hm=Oc("area,br,col,hr,img,wbr"),By=Oc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zy=Oc("rp,rt"),cl=Rf(Hm,Rf(By,Oc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rf(zy,Oc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Rf(zy,By)),Gm=Oc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kf=Oc("srcset"),Vy=Rf(Gm,kf,Oc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Oc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Uy=Oc("script,style,template");class G_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!cl.hasOwnProperty(e))return this.sanitizedSomething=!0,!Uy.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,l=o.toLowerCase();if(!Vy.hasOwnProperty(l)){this.sanitizedSomething=!0;continue}let u=s.value;Gm[l]&&(u=ag(u)),kf[l]&&(i=u,u=(i=String(i)).split(",").map(t=>ag(t.trim())).join(", ")),this.buf.push(" ",o,'="',Hy(u),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();cl.hasOwnProperty(e)&&!Hm.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Hy(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const W_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,j_=/([^\#-~ |!])/g;function Hy(i){return i.replace(/&/g,"&amp;").replace(W_,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(j_,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Wm;function Ov(i,t){let e=null;try{Wm=Wm||function vd(i){const t=new ju(i);return function jh(){try{return!!(new window.DOMParser).parseFromString(gc(""),"text/html")}catch{return!1}}()?new rg(t):t}(i);let n=t?String(t):"";e=Wm.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=Wm.getInertBodyElement(n)}while(n!==s);return gc((new G_).sanitizeChildren(xu(e)||e))}finally{if(e){const n=xu(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function xu(i){return"content"in i&&function $_(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var da=(()=>((da=da||{})[da.NONE=0]="NONE",da[da.HTML=1]="HTML",da[da.STYLE=2]="STYLE",da[da.SCRIPT=3]="SCRIPT",da[da.URL=4]="URL",da[da.RESOURCE_URL=5]="RESOURCE_URL",da))();function Oa(i){const t=rm();return t?pd(t.sanitize(da.HTML,i)||""):aa(i,"HTML")?pd(yl(i)):Ov(function zm(){return void 0!==mh?mh:typeof document<"u"?document:void 0}(),Ls(i))}function $h(i){const t=rm();return t?t.sanitize(da.URL,i)||"":aa(i,"URL")?yl(i):ag(Ls(i))}function rm(){const i=mi();return i&&i[12]}const Bv=new Qi("ENVIRONMENT_INITIALIZER"),jy=new Qi("INJECTOR",-1),$y=new Qi("INJECTOR_DEF_TYPES");class a{get(t,e=_u){if(e===_u){const n=new Error(`NullInjectorError: No provider for ${us(t)}!`);throw n.name="NullInjectorError",n}return e}}function h(...i){return{\u0275providers:g(0,i)}}function g(i,...t){const e=[],n=new Set;let r;return vu(t,s=>{const o=s;A(o,e,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&y(r,e),e}function y(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];vu(r,s=>{t.push(s)})}}function A(i,t,e,n){if(!(i=ts(i)))return!1;let r=null,s=ua(i);const o=!s&&$o(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const u=i.ngModule;if(s=ua(u),!s)return!1;r=u}const l=n.has(r);if(o){if(l)return!1;if(n.add(r),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const p of u)A(p,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let p;n.add(r);try{vu(s.imports,v=>{A(v,t,e,n)&&(p||(p=[]),p.push(v))})}finally{}void 0!==p&&y(p,t)}if(!l){const p=np(r)||(()=>new r);t.push({provide:r,useFactory:p,deps:go},{provide:$y,useValue:r,multi:!0},{provide:Bv,useValue:()=>Xn(r),multi:!0})}const u=s.providers;null==u||l||vu(u,v=>{t.push(v)})}}return r!==i&&void 0!==i.providers}const R=cs({provide:String,useValue:cs});function N(i){return null!==i&&"object"==typeof i&&R in i}function fe(i){return"function"==typeof i}const Le=new Qi("Set Injector scope."),ke={},Fe={};let nt;function tt(){return void 0===nt&&(nt=new a),nt}class Ke{}class pt extends Ke{constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ui(t,o=>this.processProvider(o)),this.records.set(jy,sn(void 0,this)),r.has("environment")&&this.records.set(Ke,sn(void 0,this));const s=this.records.get(Le);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get($y.multi,go,ns.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Uu(this),n=ku(void 0);try{return t()}finally{Uu(e),ku(n)}}get(t,e=_u,n=ns.Default){this.assertNotDestroyed();const r=Uu(this),s=ku(void 0);try{if(!(n&ns.SkipSelf)){let l=this.records.get(t);if(void 0===l){const u=function On(i){return"function"==typeof i||"object"==typeof i&&i instanceof Qi}(t)&&Sc(t);l=u&&this.injectableDefInScope(u)?sn(vt(t),ke):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(n&ns.Self?tt():this.parent).get(t,e=n&ns.Optional&&e===_u?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Tf]=o[Tf]||[]).unshift(us(t)),r)throw o;return function Kg(i,t,e,n){const r=i[Tf];throw t[Hh]&&r.unshift(t[Hh]),i.message=function fp(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=us(t);if(Array.isArray(t))r=t.map(us).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let l=t[o];s.push(o+":"+("string"==typeof l?JSON.stringify(l):us(l)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(pc,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[Tf]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{ku(s),Uu(r)}}resolveInjectorInitializers(){const t=Uu(this),e=ku(void 0);try{const n=this.get(Bv.multi,go,ns.Self);for(const r of n)r()}finally{Uu(t),ku(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(us(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new gi(205,!1)}processProvider(t){let e=fe(t=ts(t))?t:ts(t&&t.provide);const n=function Bt(i){return N(i)?sn(void 0,i.useValue):sn(cn(i),ke)}(t);if(fe(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=sn(void 0,ke,!0),r.factory=()=>Xd(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===ke&&(e.value=Fe,e.value=e.factory()),"object"==typeof e.value&&e.value&&function hn(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ts(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function vt(i){const t=Sc(i),e=null!==t?t.factory:np(i);if(null!==e)return e;if(i instanceof Qi)throw new gi(204,!1);if(i instanceof Function)return function Xt(i){const t=i.length;if(t>0)throw Il(t,"?"),new gi(204,!1);const e=function k_(i){const t=i&&(i[$f]||i[bm]);if(t){const e=function Sa(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new gi(204,!1)}function cn(i,t,e){let n;if(fe(i)){const r=ts(i);return np(r)||vt(r)}if(N(i))n=()=>ts(i.useValue);else if(function ee(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Xd(i.deps||[]));else if(function ie(i){return!(!i||!i.useExisting)}(i))n=()=>Xn(ts(i.useExisting));else{const r=ts(i&&(i.useClass||i.provide));if(!function en(i){return!!i.deps}(i))return np(r)||vt(r);n=()=>new r(...Xd(i.deps))}return n}function sn(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function Ai(i){return!!i.\u0275providers}function ui(i,t){for(const e of i)Array.isArray(e)?ui(e,t):Ai(e)?ui(e.\u0275providers,t):t(e)}class qt{}class _i{resolveComponentFactory(t){throw function Wn(i){const t=Error(`No component factory found for ${us(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let fi=(()=>{class i{}return i.NULL=new _i,i})();function nr(){return zi(ut(),mi())}function zi(i,t){return new qn(ch(i,t))}let qn=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=nr,i})();function Hn(i){return i instanceof qn?i.nativeElement:i}class c{}let d=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function m(){const i=mi(),e=Tc(ut().index,i);return(Kc(e)?e:i)[11]}(),i})(),_=(()=>{class i{}return i.\u0275prov=Yi({token:i,providedIn:"root",factory:()=>null}),i})();class b{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const w=new b("14.1.3"),E={};function Vt(i){return i.ngOriginalError}class et{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Vt(t);for(;e&&Vt(e);)e=Vt(e);return e||null}}const En=new Map;let Yn=0;const ir="__ngContext__";function Nr(i,t){Kc(t)?(i[ir]=t[20],function Ci(i){En.set(i[20],i)}(t)):i[ir]=t}function Yr(i){const t=i[ir];return"number"==typeof t?function pi(i){return En.get(i)||null}(t):t||null}function pr(i){const t=Yr(i);return t?Kc(t)?t:t.lView:null}const St=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(io))();function $n(i){return i.ownerDocument.defaultView}function an(i){return i instanceof Function?i():i}var Oi=(()=>((Oi=Oi||{})[Oi.Important=1]="Important",Oi[Oi.DashCase=2]="DashCase",Oi))();function Ki(i,t){return undefined(i,t)}function Uo(i){const t=i[3];return Dh(t)?t[3]:t}function Ir(i){return Hl(i[13])}function Ha(i){return Hl(i[4])}function Hl(i){for(;null!==i&&!Dh(i);)i=i[4];return i}function Fc(i,t,e,n,r){if(null!=n){let s,o=!1;Dh(n)?s=n:Kc(n)&&(o=!0,n=n[0]);const l=na(n);0===i&&null!==e?null==r?Q_(t,e,l):cg(t,e,l,r||null,!0):1===i&&null!==e?cg(t,e,l,r||null,!0):2===i?function EA(i,t,e){const n=Vv(i,t);n&&function ef(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,l,o):3===i&&t.destroyNode(l),null!=s&&function tT(i,t,e,n,r){const s=e[7];s!==na(e)&&Fc(t,i,n,s,r);for(let l=10;l<e.length;l++){const u=e[l];wu(u[1],u,i,t,n,s)}}(t,i,s,e,r)}}function ic(i,t,e){return i.createElement(t,e)}function Y_(i,t){const e=i[9],n=e.indexOf(t),r=t[3];512&t[2]&&(t[2]&=-513,Vg(r,-1)),e.splice(n,1)}function K_(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&Y_(r,n),t>0&&(i[e-1][4]=n[4]);const s=Vu(i,10+t);!function Bc(i,t){wu(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function Jo(i,t){if(!(128&t[2])){const e=t[11];e.destroyNode&&wu(i,t,e,3,null,null),function Zs(i){let t=i[13];if(!t)return Z_(i[1],i);for(;t;){let e=null;if(Kc(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)Kc(t)&&Z_(t[1],t),t=t[3];null===t&&(t=i),Kc(t)&&Z_(t[1],t),e=t&&t[4]}t=e}}(t)}}function Z_(i,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function lg(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof qp)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const l=r[s[o]],u=s[o+1];try{u.call(l)}finally{}}else try{s.call(r)}finally{}}}}(i,t),function fC(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+1],l="function"==typeof o?o(t):na(t[o]),u=n[r=e[s+2]],p=e[s+3];"boolean"==typeof p?l.removeEventListener(e[s],u,p):p>=0?n[r=p]():n[r=-p].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[7]=null}}(i,t),1===t[1].type&&t[11].destroy();const e=t[17];if(null!==e&&Dh(t[3])){e!==t[3]&&Y_(e,t);const n=t[19];null!==n&&n.detachView(i)}!function hi(i){En.delete(i[20])}(t)}}function qy(i,t,e){return function zv(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===Ea.None||r===Ea.Emulated)return null}return ch(n,e)}(i,t.parent,e)}function cg(i,t,e,n,r){i.insertBefore(t,e,n,r)}function Q_(i,t,e){i.appendChild(t,e)}function pC(i,t,e,n,r){null!==n?cg(i,t,e,n,r):Q_(i,t,e)}function Vv(i,t){return i.parentNode(t)}function _d(i,t,e){return IA(i,t,e)}let IA=function mC(i,t,e){return 40&i.type?ch(i,e):null};function yC(i,t,e,n){const r=qy(i,n,t),s=t[11],l=_d(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let u=0;u<e.length;u++)pC(s,r,e[u],l,!1);else pC(s,r,e,l,!1)}function Xy(i,t){if(null!==t){const e=t.type;if(3&e)return ch(t,i);if(4&e)return nx(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return Xy(i,n);{const r=i[t.index];return Dh(r)?nx(-1,r):na(r)}}if(32&e)return Ki(t,i)()||na(i[t.index]);{const n=SA(i,t);return null!==n?Array.isArray(n)?n[0]:Xy(Uo(i[16]),n):Xy(i,t.next)}}return null}function SA(i,t){return null!==t?i[16][6].projection[t.projection]:null}function nx(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return Xy(n,r)}return t[7]}function Vc(i,t,e,n,r,s,o){for(;null!=e;){const l=n[e.index],u=e.type;if(o&&0===t&&(l&&Nr(na(l),n),e.flags|=4),64!=(64&e.flags))if(8&u)Vc(i,t,e.child,n,r,s,!1),Fc(t,i,r,l,s);else if(32&u){const p=Ki(e,n);let v;for(;v=p();)Fc(t,i,r,v,s);Fc(t,i,r,l,s)}else 16&u?TA(i,t,n,e,r,s):Fc(t,i,r,l,s);e=o?e.projectionNext:e.next}}function wu(i,t,e,n,r,s){Vc(e,n,i.firstChild,t,r,s,!1)}function TA(i,t,e,n,r,s){const o=e[16],u=o[6].projection[n.projection];if(Array.isArray(u))for(let p=0;p<u.length;p++)Fc(t,i,r,u[p],s);else Vc(i,t,u,o[3],r,s,!0)}function DA(i,t,e){i.setAttribute(t,"style",e)}function ix(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function LA(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const PA="ng-template";function iT(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==LA(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function RA(i){return 4===i.type&&i.value!==PA}function kA(i,t,e){return t===(4!==i.type||e?i.value:PA)}function OA(i,t,e){let n=4;const r=i.attrs||[],s=function Yy(i){for(let t=0;t<i.length;t++)if(ol(i[t]))return t;return i.length}(r);let o=!1;for(let l=0;l<t.length;l++){const u=t[l];if("number"!=typeof u){if(!o)if(4&n){if(n=2|1&n,""!==u&&!kA(i,u,e)||""===u&&1===t.length){if(xp(n))return!1;o=!0}}else{const p=8&n?u:t[++l];if(8&n&&null!==i.attrs){if(!iT(i.attrs,p,e)){if(xp(n))return!1;o=!0}continue}const x=rT(8&n?"class":u,r,RA(i),e);if(-1===x){if(xp(n))return!1;o=!0;continue}if(""!==p){let I;I=x>s?"":r[x+1].toLowerCase();const M=8&n?I:null;if(M&&-1!==LA(M,p,0)||2&n&&p!==I){if(xp(n))return!1;o=!0}}}}else{if(!o&&!xp(n)&&!xp(u))return!1;if(o&&xp(u))continue;o=!1,n=u|1&n}}return xp(n)||o}function xp(i){return 0==(1&i)}function rT(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let l=t[++r];for(;"string"==typeof l;)l=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function oT(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function FA(i,t,e=!1){for(let n=0;n<t.length;n++)if(OA(i,t[n],e))return!0;return!1}function aT(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function NA(i,t){return i?":not("+t.trim()+")":t}function lT(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const l=i[++e];r+="["+o+(l.length>0?'="'+l+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!xp(o)&&(t+=NA(s,r),r=""),n=o,s=s||!xp(n);e++}return""!==r&&(t+=NA(s,r)),t}const qs={};function De(i){zA(Es(),mi(),uc()+i,!1)}function zA(i,t,e,n){if(!n)if(3==(3&t[2])){const s=i.preOrderCheckHooks;null!==s&&zd(t,s,e)}else{const s=i.preOrderHooks;null!==s&&jg(t,s,0,e)}Cf(e)}function GA(i,t=null,e=null,n){const r=WA(i,t,e,n);return r.resolveInjectorInitializers(),r}function WA(i,t=null,e=null,n,r=new Set){const s=[e||go,h(i)];return n=n||("object"==typeof i?void 0:us(i)),new pt(s,t||tt(),n||null,r)}let Au=(()=>{class i{static create(e,n){if(Array.isArray(e))return GA({name:""},n,e,"");{const r=e.name??"";return GA({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=_u,i.NULL=new a,i.\u0275prov=Yi({token:i,providedIn:"any",factory:()=>Xn(jy)}),i.__NG_ELEMENT_ID__=-1,i})();function Qt(i,t=ns.Default){const e=mi();return null===e?Xn(i,t):Gd(ut(),e,ts(i),t)}function hx(){throw new Error("invalid")}function J_(i,t){return i<<17|t<<2}function wp(i){return i>>17&32767}function e0(i){return 2|i}function Ap(i){return(131068&i)>>2}function dx(i,t){return-131069&i|t<<2}function fx(i){return 1|i}function XR(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],s=e[n+1];if(-1!==s){const o=i.data[s];Ug(r),o.contentQueries(2,t[s],s)}}}function rI(i,t,e,n,r,s,o,l,u,p,v){const x=t.blueprint.slice();return x[0]=r,x[2]=76|n,(null!==v||i&&1024&i[2])&&(x[2]|=1024),jr(x),x[3]=x[15]=i,x[8]=e,x[10]=o||i&&i[10],x[11]=l||i&&i[11],x[12]=u||i&&i[12]||null,x[9]=p||i&&i[9]||null,x[6]=s,x[20]=function li(){return Yn++}(),x[21]=v,x[16]=2==t.type?i[16]:x,x}function wC(i,t,e,n,r){let s=i.data[t];if(null===s)s=function DT(i,t,e,n,r){const s=Lo(),o=Ps(),u=i.data[t]=function S6(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(i,t,e,n,r),function Fd(){return es.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function Ao(){const i=es.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ia(s,!0),s}function AC(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function sI(i,t,e){Hg(t);try{const n=i.viewQuery;null!==n&&zT(1,n,e);const r=i.template;null!==r&&YR(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&XR(i,t),i.staticViewQueries&&zT(2,i.viewQuery,e);const s=i.components;null!==s&&function x6(i,t){for(let e=0;e<t.length;e++)H6(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,za()}}function vx(i,t,e,n){const r=t[2];if(128!=(128&r)){Hg(t);try{jr(t),function fr(i){return es.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&YR(i,t,e,2,n);const o=3==(3&r);if(o){const p=i.preOrderCheckHooks;null!==p&&zd(t,p,null)}else{const p=i.preOrderHooks;null!==p&&jg(t,p,0,null),kh(t,0)}if(function V6(i){for(let t=Ir(i);null!==t;t=Ha(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n],s=r[3];0==(512&r[2])&&Vg(s,1),r[2]|=512}}}(t),function z6(i){for(let t=Ir(i);null!==t;t=Ha(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Do(n)&&vx(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&XR(i,t),o){const p=i.contentCheckHooks;null!==p&&zd(t,p)}else{const p=i.contentHooks;null!==p&&jg(t,p,1),kh(t,1)}!function iI(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)Cf(~r);else{const s=r,o=e[++n],l=e[++n];Nd(o,s),l(2,t[s])}}}finally{Cf(-1)}}(i,t);const l=i.components;null!==l&&function b6(i,t){for(let e=0;e<t.length;e++)U6(i,t[e])}(t,l);const u=i.viewQuery;if(null!==u&&zT(2,u,n),o){const p=i.viewCheckHooks;null!==p&&zd(t,p)}else{const p=i.viewHooks;null!==p&&jg(t,p,2),kh(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,Vg(t[3],-1))}finally{za()}}}function w6(i,t,e,n){const r=t[10],o=mo(t);try{!o&&r.begin&&r.begin(),o&&sI(i,t,n),vx(i,t,e,n)}finally{!o&&r.end&&r.end()}}function YR(i,t,e,n,r){const s=uc(),o=2&n;try{Cf(-1),o&&t.length>22&&zA(i,t,22,!1),e(n,r)}finally{Cf(s)}}function KR(i,t,e){if(_v(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function LT(i,t,e){!Oy()||(function L6(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;i.firstCreatePass||js(e,t),Nr(n,t);const o=e.initialInputs;for(let l=r;l<s;l++){const u=i.data[l],p=Lh(u);p&&F6(t,e,u);const v=Qc(t,i,l,e);Nr(v,t),null!==o&&N6(0,l-r,v,u,0,o),p&&(Tc(e.index,t)[8]=v)}}(i,t,e,ch(e,t)),128==(128&e.flags)&&function P6(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function _f(){return es.lFrame.currentDirectiveIndex}();try{Cf(s);for(let l=n;l<r;l++){const u=i.data[l],p=t[l];Ou(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&ik(u,p)}}finally{Cf(-1),Ou(o)}}(i,t,e))}function PT(i,t,e=ch){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],l=-1===o?e(t,i):i[o];i[r++]=l}}}function ZR(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=RT(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function RT(i,t,e,n,r,s,o,l,u,p){const v=22+n,x=v+r,I=function A6(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:qs);return e}(v,x),M="function"==typeof p?p():p;return I[1]={type:i,blueprint:I,template:e,queries:null,viewQuery:l,declTNode:t,data:I.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1}}function QR(i,t,e,n){const r=uk(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&hk(i).push(n,r.length-1))}function JR(i,t,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}return e}function ek(i,t){const n=t.directiveEnd,r=i.data,s=t.attrs,o=[];let l=null,u=null;for(let p=t.directiveStart;p<n;p++){const v=r[p],x=v.inputs,I=null===s||RA(t)?null:B6(x,s);o.push(I),l=JR(x,p,l),u=JR(v.outputs,p,u)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=16),l.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=l,t.outputs=u}function Ep(i,t,e,n,r,s,o,l){const u=ch(t,e);let v,p=t.inputs;!l&&null!=p&&(v=p[n])?(VT(i,e,v,n,r),Rg(t)&&tk(e,t.index)):3&t.type&&(n=function E6(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(u,n,r))}function tk(i,t){const e=Tc(t,i);16&e[2]||(e[2]|=32)}function kT(i,t,e,n){let r=!1;if(Oy()){const s=function R6(i,t,e){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];FA(e,o.selectors,!1)&&(r||(r=[]),cp(js(e,t),i,o.type),Lh(o)?(rk(i,e),r.unshift(o)):r.push(o))}return r}(i,t,e),o=null===n?null:{"":-1};if(null!==s){r=!0,sk(e,i.data.length,s.length);for(let v=0;v<s.length;v++){const x=s[v];x.providersResolver&&x.providersResolver(x)}let l=!1,u=!1,p=AC(i,t,s.length,null);for(let v=0;v<s.length;v++){const x=s[v];e.mergedAttrs=Oh(e.mergedAttrs,x.hostAttrs),ok(i,e,t,p,x),O6(p,x,o),null!==x.contentQueries&&(e.flags|=8),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(e.flags|=128);const I=x.type.prototype;!l&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),l=!0),!u&&(I.ngOnChanges||I.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),u=!0),p++}ek(i,e)}o&&function k6(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new gi(-301,!1);n.push(t[r],s)}}}(e,n,o)}return e.mergedAttrs=Oh(e.mergedAttrs,e.attrs),r}function nk(i,t,e,n,r,s){const o=s.hostBindings;if(o){let l=i.hostBindingOpCodes;null===l&&(l=i.hostBindingOpCodes=[]);const u=~t.index;(function D6(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(l)!=u&&l.push(u),l.push(n,r,o)}}function ik(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function rk(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function O6(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Lh(t)&&(e[""]=i)}}function sk(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function ok(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=np(r.type)),o=new qp(s,Lh(r),Qt);i.blueprint[n]=o,e[n]=o,nk(i,t,0,n,AC(i,e,r.hostVars,qs),r)}function F6(i,t,e){const n=ch(t,i),r=ZR(e),s=i[10],o=oI(i,rI(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=o}function qm(i,t,e,n,r,s){const o=ch(i,t);!function OT(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const l=null==o?Ls(s):o(s,n||"",r);i.setAttribute(t,r,l,e)}}(t[11],o,s,i.value,e,n,r)}function N6(i,t,e,n,r,s){const o=s[t];if(null!==o){const l=n.setInput;for(let u=0;u<o.length;){const p=o[u++],v=o[u++],x=o[u++];null!==l?n.setInput(e,x,p,v):e[v]=x}}}function B6(i,t){let e=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,i[r],t[n+1])),n+=2}else n+=2;else n+=4}return e}function ak(i,t,e,n){return new Array(i,!0,!1,t,null,0,n,e,null,null)}function U6(i,t){const e=Tc(t,i);if(Do(e)){const n=e[1];48&e[2]?vx(n,e,n.template,e[8]):e[5]>0&&FT(e)}}function FT(i){for(let n=Ir(i);null!==n;n=Ha(n))for(let r=10;r<n.length;r++){const s=n[r];if(Do(s))if(512&s[2]){const o=s[1];vx(o,s,o.template,s[8])}else s[5]>0&&FT(s)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Tc(e[n],i);Do(r)&&r[5]>0&&FT(r)}}function H6(i,t){const e=Tc(t,i),n=e[1];(function G6(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),sI(n,e,e[8])}function oI(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function NT(i){for(;i;){i[2]|=32;const t=Uo(i);if(Im(i)&&!t)return i;i=t}return null}function ck(i){!function lk(i){for(let t=0;t<i.components.length;t++){const e=i.components[t],n=pr(e);if(null!==n){const r=n[1];w6(r,n,r.template,e)}}}(i[8])}function zT(i,t,e){Ug(0),t(i,e)}const j6=(()=>Promise.resolve(null))();function uk(i){return i[7]||(i[7]=[])}function hk(i){return i.cleanup||(i.cleanup=[])}function fk(i,t){const e=i[9],n=e?e.get(et,null):null;n&&n.handleError(t)}function VT(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],l=e[s++],u=t[o],p=i.data[o];null!==p.setInput?p.setInput(u,r,n,l):u[l]=r}}function Hv(i,t,e){const n=zg(t,i);!function Of(i,t,e){i.setValue(t,e)}(i[11],n,e)}function aI(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const l=t[o];"number"==typeof l?s=l:1==s?r=Xa(r,l):2==s&&(n=Xa(n,l+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function lI(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(na(s)),Dh(s))for(let l=10;l<s.length;l++){const u=s[l],p=u[1].firstChild;null!==p&&lI(u[1],u,p,n)}const o=e.type;if(8&o)lI(i,t,e.child,n);else if(32&o){const l=Ki(e,t);let u;for(;u=l();)n.push(u)}else if(16&o){const l=SA(t,e);if(Array.isArray(l))n.push(...l);else{const u=Uo(t[16]);lI(u[1],u,l,n,!0)}}e=r?e.projectionNext:e.next}return n}class yx{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return lI(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Dh(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(K_(t,n),Vu(e,n))}this._attachedToViewContainer=!1}Jo(this._lView[1],this._lView)}onDestroy(t){QR(this._lView[1],this._lView,null,t)}markForCheck(){NT(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function BT(i,t,e){const n=t[10];n.begin&&n.begin();try{vx(i,t,i.template,e)}catch(r){throw fk(t,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new gi(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zc(i,t){wu(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new gi(902,!1);this._appRef=t}}class $6 extends yx{constructor(t){super(t),this._view=t}detectChanges(){ck(this._view)}checkNoChanges(){}get context(){return null}}class UT extends fi{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=$o(t);return new _x(e,this.ngModule)}}function pk(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class X6{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){const r=this.injector.get(t,E,n);return r!==E||e===E?r:this.parentInjector.get(t,e,n)}}class _x extends qt{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function cT(i){return i.map(lT).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return pk(this.componentDef.inputs)}get outputs(){return pk(this.componentDef.outputs)}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof Ke?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new X6(t,s):t,l=o.get(c,null);if(null===l)throw new gi(407,!1);const u=o.get(_,null),p=l.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",x=n?function I6(i,t,e){return i.selectRootElement(t,e===Ea.ShadowDom)}(p,n,this.componentDef.encapsulation):ic(l.createRenderer(null,this.componentDef),v,function q6(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(v)),I=this.componentDef.onPush?288:272,M=function J6(i,t){return{components:[],scheduler:i||St,clean:j6,playerHandler:t||null,flags:0}}(),F=RT(0,null,null,1,0,null,null,null,null,null),j=rI(null,F,M,I,null,null,l,p,u,o,null);let X,ce;Hg(j);try{const we=function Z6(i,t,e,n,r,s){const o=e[1];e[22]=i;const u=wC(o,22,2,"#host",null),p=u.mergedAttrs=t.hostAttrs;null!==p&&(aI(u,p,!0),null!==i&&(Xp(r,i,p),null!==u.classes&&ix(r,i,u.classes),null!==u.styles&&DA(r,i,u.styles)));const v=n.createRenderer(i,t),x=rI(e,ZR(t),null,t.onPush?32:16,e[22],u,n,v,s||null,null,null);return o.firstCreatePass&&(cp(js(u,e),o,t.type),rk(o,u),sk(u,e.length,1)),oI(e,x),e[22]=x}(x,this.componentDef,j,l,p);if(x)if(n)Xp(p,x,["ng-version",w.full]);else{const{attrs:ye,classes:Ae}=function BA(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!xp(r))break;r=s}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);ye&&Xp(p,x,ye),Ae&&Ae.length>0&&ix(p,x,Ae.join(" "))}if(ce=vs(F,22),void 0!==e){const ye=ce.projection=[];for(let Ae=0;Ae<this.ngContentSelectors.length;Ae++){const We=e[Ae];ye.push(null!=We?Array.from(We):null)}}X=function Q6(i,t,e,n,r){const s=e[1],o=function M6(i,t,e){const n=ut();i.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),ok(i,n,t,AC(i,t,1,null),e),ek(i,n));const r=Qc(t,i,n.directiveStart,n);Nr(r,t);const s=ch(n,t);return s&&Nr(s,t),r}(s,e,t);if(n.components.push(o),i[8]=o,null!==r)for(const u of r)u(o,t);if(t.contentQueries){const u=ut();t.contentQueries(1,o,u.directiveStart)}const l=ut();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Cf(l.index),nk(e[1],l,0,l.directiveStart,l.directiveEnd,t),ik(t,o)),o}(we,this.componentDef,j,M,[eW]),sI(F,j,null)}finally{za()}return new K6(this.componentType,X,zi(ce,j),j,ce)}}class K6 extends class jt{}{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new $6(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;VT(s[1],s,r,t,e),tk(s,this._tNode.index)}}get injector(){return new dh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function eW(){const i=ut();xf(mi()[1],i)}function Qa(i){let t=function gk(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(Lh(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new gi(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=HT(i.inputs),o.declaredInputs=HT(i.declaredInputs),o.outputs=HT(i.outputs);const l=r.hostBindings;l&&rW(i,l);const u=r.viewQuery,p=r.contentQueries;if(u&&nW(i,u),p&&iW(i,p),Ia(i.inputs,r.inputs),Ia(i.declaredInputs,r.declaredInputs),Ia(i.outputs,r.outputs),Lh(r)&&r.data.animation){const v=i.data;v.animation=(v.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const l=s[o];l&&l.ngInherit&&l(i),l===Qa&&(e=!1)}}t=Object.getPrototypeOf(t)}!function tW(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Oh(r.hostAttrs,e=Oh(e,r.hostAttrs))}}(n)}function HT(i){return i===kd?{}:i===go?[]:i}function nW(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function iW(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function rW(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let cI=null;function t0(){if(!cI){const i=io.Symbol;if(i&&i.iterator)cI=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(cI=n)}}}return cI}function Cx(i){return!!GT(i)&&(Array.isArray(i)||!(i instanceof Map)&&t0()in i)}function GT(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Xm(i,t,e){return i[t]=e}function bx(i,t){return i[t]}function bd(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function n0(i,t,e,n){const r=bd(i,t,e);return bd(i,t+1,n)||r}function uI(i,t,e,n,r){const s=n0(i,t,e,n);return bd(i,t+2,r)||s}function ug(i,t,e,n,r,s){const o=n0(i,t,e,n);return n0(i,t+2,r,s)||o}function vr(i,t,e,n){const r=mi();return bd(r,Rh(),t)&&(Es(),qm(Va(),r,i,t,e,n)),vr}function SC(i,t,e,n){return bd(i,Rh(),e)?t+Ls(e)+n:qs}function EC(i,t,e,n,r,s){const l=n0(i,function Ba(){return es.lFrame.bindingIndex}(),e,r);return gl(2),l?t+Ls(e)+n+Ls(r)+s:qs}function Ze(i,t,e,n,r,s,o,l){const u=mi(),p=Es(),v=i+22,x=p.firstCreatePass?function fW(i,t,e,n,r,s,o,l,u){const p=t.consts,v=wC(t,i,4,o||null,$s(p,l));kT(t,e,v,$s(p,u)),xf(t,v);const x=v.tViews=RT(2,v,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,p);return null!==t.queries&&(t.queries.template(t,v),x.queries=t.queries.embeddedTView(v)),v}(v,p,u,t,e,n,r,s,o):p.data[v];ia(x,!1);const I=u[11].createComment("");yC(p,u,I,x),Nr(I,u),oI(u,u[v]=ak(I,u,I,x)),kg(x)&&LT(p,u,x),null!=o&&PT(u,x,l)}function co(i){return function pl(i,t){return i[t]}(function _r(){return es.lFrame.contextLView}(),22+i)}function ve(i,t,e){const n=mi();return bd(n,Rh(),t)&&Ep(Es(),Va(),n,i,t,n[11],e,!1),ve}function WT(i,t,e,n,r){const o=r?"class":"style";VT(i,e,t.inputs[o],o,n)}function ct(i,t,e,n){const r=mi(),s=Es(),o=22+i,l=r[11],u=r[o]=ic(l,t,function bf(){return es.lFrame.currentNamespace}()),p=s.firstCreatePass?function gW(i,t,e,n,r,s,o){const l=t.consts,p=wC(t,i,2,r,$s(l,s));return kT(t,e,p,$s(l,o)),null!==p.attrs&&aI(p,p.attrs,!1),null!==p.mergedAttrs&&aI(p,p.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,p),p}(o,s,r,0,t,e,n):s.data[o];ia(p,!0);const v=p.mergedAttrs;null!==v&&Xp(l,u,v);const x=p.classes;null!==x&&ix(l,u,x);const I=p.styles;return null!==I&&DA(l,u,I),64!=(64&p.flags)&&yC(s,r,u,p),0===function sd(){return es.lFrame.elementDepthCount}()&&Nr(u,r),function jp(){es.lFrame.elementDepthCount++}(),kg(p)&&(LT(s,r,p),KR(s,p,r)),null!==n&&PT(r,p),ct}function ht(){let i=ut();Ps()?$p():(i=i.parent,ia(i,!1));const t=i;!function V_(){es.lFrame.elementDepthCount--}();const e=Es();return e.firstCreatePass&&(xf(e,i),_v(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function Dv(i){return 0!=(16&i.flags)}(t)&&WT(e,t,mi(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function U_(i){return 0!=(32&i.flags)}(t)&&WT(e,t,mi(),t.stylesWithoutHost,!1),ht}function si(i,t,e,n){return ct(i,t,e,n),ht(),si}function Hr(i,t,e){const n=mi(),r=Es(),s=i+22,o=r.firstCreatePass?function mW(i,t,e,n,r){const s=t.consts,o=$s(s,n),l=wC(t,i,8,"ng-container",o);return null!==o&&aI(l,o,!0),kT(t,e,l,$s(s,r)),null!==t.queries&&t.queries.elementStart(t,l),l}(s,r,n,t,e):r.data[s];ia(o,!0);const l=n[s]=n[11].createComment("");return yC(r,n,l,o),Nr(l,n),kg(o)&&(LT(r,n,o),KR(r,o,n)),null!=e&&PT(n,o),Hr}function Gr(){let i=ut();const t=Es();return Ps()?$p():(i=i.parent,ia(i,!1)),t.firstCreatePass&&(xf(t,i),_v(i)&&t.queries.elementEnd(i)),Gr}function qi(i,t,e){return Hr(i,t,e),Gr(),qi}function Pi(){return mi()}function xx(i){return!!i&&"function"==typeof i.then}const jT=function Ik(i){return!!i&&"function"==typeof i.subscribe};function mn(i,t,e,n){const r=mi(),s=Es(),o=ut();return function Ek(i,t,e,n,r,s,o,l){const u=kg(n),v=i.firstCreatePass&&hk(i),x=t[8],I=uk(t);let M=!0;if(3&n.type||l){const X=ch(n,t),ce=l?l(X):X,we=I.length,ye=l?We=>l(na(We[n.index])):n.index;let Ae=null;if(!l&&u&&(Ae=function vW(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const l=t[7],u=r[s+2];return l.length>u?l[u]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==Ae)(Ae.__ngLastListenerFn__||Ae).__ngNextListenerFn__=s,Ae.__ngLastListenerFn__=s,M=!1;else{s=Mk(n,t,x,s,!1);const We=e.listen(ce,r,s);I.push(s,We),v&&v.push(r,ye,we,we+1)}}else s=Mk(n,t,x,s,!1);const F=n.outputs;let j;if(M&&null!==F&&(j=F[r])){const X=j.length;if(X)for(let ce=0;ce<X;ce+=2){const ot=t[j[ce]][j[ce+1]].subscribe(s),Mt=I.length;I.push(s,ot),v&&v.push(r,n.index,Mt,-(Mt+1))}}}(s,r,r[11],o,i,t,0,n),mn}function Tk(i,t,e,n){try{return!1!==e(n)}catch(r){return fk(i,r),!1}}function Mk(i,t,e,n,r){return function s(o){if(o===Function)return n;NT(2&i.flags?Tc(i.index,t):t);let u=Tk(t,0,n,o),p=s.__ngNextListenerFn__;for(;p;)u=Tk(t,0,p,o)&&u,p=p.__ngNextListenerFn__;return r&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function _e(i=1){return function wl(i){return(es.lFrame.contextLView=function Bd(i,t){for(;i>0;)t=t[15],i--;return t}(i,es.lFrame.contextLView))[8]}(i)}function yW(i,t){let e=null;const n=function sT(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?FA(i,s,!0):aT(n,s))return r}else e=r}return e}function Ff(i){const t=mi()[16][6];if(!t.projection){const n=t.projection=Il(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?yW(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function nu(i,t=0,e){const n=mi(),r=Es(),s=wC(r,22+i,16,null,e||null);null===s.projection&&(s.projection=t),$p(),64!=(64&s.flags)&&function eT(i,t,e){TA(t[11],0,t,e,qy(i,e,t),_d(e.parent||t[6],e,t))}(r,n,s)}function hI(i,t,e,n,r){const s=mi(),o=SC(s,t,e,n);return o!==qs&&Ep(Es(),Va(),s,i,o,s[11],r,!1),hI}function zk(i,t,e,n,r){const s=i[e+1],o=null===t;let l=n?wp(s):Ap(s),u=!1;for(;0!==l&&(!1===u||o);){const v=i[l+1];bW(i[l],t)&&(u=!0,i[l+1]=n?fx(v):e0(v)),l=n?wp(v):Ap(v)}u&&(i[e+1]=n?e0(s):fx(s))}function bW(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Io(i,t)>=0}const $u={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Vk(i){return i.substring($u.key,$u.keyEnd)}function xW(i){return i.substring($u.value,$u.valueEnd)}function Uk(i,t){const e=$u.textEnd;return e===t?-1:(t=$u.keyEnd=function IW(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,$u.key=t,e),kC(i,t,e))}function Hk(i,t){const e=$u.textEnd;let n=$u.key=kC(i,t,e);return e===n?-1:(n=$u.keyEnd=function SW(i,t,e){let n;for(;t<e&&(45===(n=i.charCodeAt(t))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)t++;return t}(i,n,e),n=Wk(i,n,e),n=$u.value=kC(i,n,e),n=$u.valueEnd=function EW(i,t,e){let n=-1,r=-1,s=-1,o=t,l=o;for(;o<e;){const u=i.charCodeAt(o++);if(59===u)return l;34===u||39===u?l=o=jk(i,u,o,e):t===o-4&&85===s&&82===r&&76===n&&40===u?l=o=jk(i,41,o,e):u>32&&(l=o),s=r,r=n,n=-33&u}return l}(i,n,e),Wk(i,n,e))}function Gk(i){$u.key=0,$u.keyEnd=0,$u.value=0,$u.valueEnd=0,$u.textEnd=i.length}function kC(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function Wk(i,t,e,n){return(t=kC(i,t,e))<e&&t++,t}function jk(i,t,e,n){let r=-1,s=e;for(;s<n;){const o=i.charCodeAt(s++);if(o==t&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function tf(i,t,e){return sm(i,t,e,!1),tf}function Tp(i,t){return sm(i,t,null,!0),Tp}function la(i){om(Xk,TW,i,!1)}function TW(i,t){for(let e=function AW(i){return Gk(i),Hk(i,kC(i,0,$u.textEnd))}(t);e>=0;e=Hk(t,e))Xk(i,Vk(t),xW(t))}function Vr(i){om(Sl,Ym,i,!0)}function Ym(i,t){for(let e=function wW(i){return Gk(i),Uk(i,kC(i,0,$u.textEnd))}(t);e>=0;e=Uk(t,e))Sl(i,Vk(t),!0)}function sm(i,t,e,n){const r=mi(),s=Es(),o=gl(2);s.firstUpdatePass&&qk(s,i,o,n),t!==qs&&bd(r,o,t)&&Yk(s,s.data[uc()],r,r[11],i,r[o+1]=function OW(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=us(yl(i)))),i}(t,e),n,o)}function om(i,t,e,n){const r=Es(),s=gl(2);r.firstUpdatePass&&qk(r,null,s,n);const o=mi();if(e!==qs&&bd(o,s,e)){const l=r.data[uc()];if(Zk(l,n)&&!$k(r,s)){let u=n?l.classesWithoutHost:l.stylesWithoutHost;null!==u&&(e=Xa(u,e||"")),WT(r,l,o,e,n)}else!function kW(i,t,e,n,r,s,o,l){r===qs&&(r=go);let u=0,p=0,v=0<r.length?r[0]:null,x=0<s.length?s[0]:null;for(;null!==v||null!==x;){const I=u<r.length?r[u+1]:void 0,M=p<s.length?s[p+1]:void 0;let j,F=null;v===x?(u+=2,p+=2,I!==M&&(F=x,j=M)):null===x||null!==v&&v<x?(u+=2,F=v):(p+=2,F=x,j=M),null!==F&&Yk(i,t,e,n,F,j,o,l),v=u<r.length?r[u]:null,x=p<s.length?s[p]:null}}(r,l,o,o[11],o[s+1],o[s+1]=function RW(i,t,e){if(null==e||""===e)return go;const n=[],r=yl(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}function $k(i,t){return t>=i.expandoStartIndex}function qk(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[uc()],o=$k(i,e);Zk(s,n)&&null===t&&!o&&(t=!1),t=function MW(i,t,e,n){const r=function rs(i){const t=es.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=wx(e=$T(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=$T(r,i,t,e,n),null===s){let u=function DW(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==Ap(n))return i[wp(n)]}(i,t,n);void 0!==u&&Array.isArray(u)&&(u=$T(null,i,t,u[1],n),u=wx(u,t.attrs,n),function LW(i,t,e,n){i[wp(e?t.classBindings:t.styleBindings)]=n}(i,t,n,u))}else s=function PW(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=wx(n,i[s].hostAttrs,e);return wx(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function _W(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,l=wp(o),u=Ap(o);i[n]=e;let v,p=!1;if(Array.isArray(e)){const x=e;v=x[1],(null===v||Io(x,v)>0)&&(p=!0)}else v=e;if(r)if(0!==u){const I=wp(i[l+1]);i[n+1]=J_(I,l),0!==I&&(i[I+1]=dx(i[I+1],n)),i[l+1]=function AT(i,t){return 131071&i|t<<17}(i[l+1],n)}else i[n+1]=J_(l,0),0!==l&&(i[l+1]=dx(i[l+1],n)),l=n;else i[n+1]=J_(u,0),0===l?l=n:i[u+1]=dx(i[u+1],n),u=n;p&&(i[n+1]=e0(i[n+1])),zk(i,v,n,!0),zk(i,v,n,!1),function CW(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Io(s,t)>=0&&(e[n+1]=fx(e[n+1]))}(t,v,i,n,s),o=J_(l,u),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function $T(i,t,e,n,r){let s=null;const o=e.directiveEnd;let l=e.directiveStylingLast;for(-1===l?l=e.directiveStart:l++;l<o&&(s=t[l],n=wx(n,s.hostAttrs,r),s!==i);)l++;return null!==i&&(e.directiveStylingLast=l),n}function wx(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Sl(i,o,!!e||t[++s]))}return void 0===i?null:i}function Xk(i,t,e){Sl(i,t,yl(e))}function Yk(i,t,e,n,r,s,o,l){if(!(3&t.type))return;const u=i.data,p=u[l+1];dI(function JA(i){return 1==(1&i)}(p)?Kk(u,t,e,r,Ap(p),o):void 0)||(dI(s)||function QA(i){return 2==(2&i)}(p)&&(s=Kk(u,null,e,r,l,o)),function MA(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:Oi.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Oi.Important),i.setStyle(e,n,r,s))}}(n,o,zg(uc(),e),r,s))}function Kk(i,t,e,n,r,s){const o=null===t;let l;for(;r>0;){const u=i[r],p=Array.isArray(u),v=p?u[1]:u,x=null===v;let I=e[r+1];I===qs&&(I=x?go:void 0);let M=x?dc(I,n):v===n?I:void 0;if(p&&!dI(M)&&(M=dc(u,n)),dI(M)&&(l=M,o))return l;const F=i[r+1];r=o?wp(F):Ap(F)}if(null!==t){let u=s?t.residualClasses:t.residualStyles;null!=u&&(l=dc(u,n))}return l}function dI(i){return void 0!==i}function Zk(i,t){return 0!=(i.flags&(t?16:32))}function cr(i,t=""){const e=mi(),n=Es(),r=i+22,s=n.firstCreatePass?wC(n,r,1,t,null):n.data[r],o=e[r]=function Cp(i,t){return i.createText(t)}(e[11],t);yC(n,e,o,s),ia(s,!1)}function ds(i){return Yh("",i,""),ds}function Yh(i,t,e){const n=mi(),r=SC(n,i,t,e);return r!==qs&&Hv(n,uc(),r),Yh}function fI(i,t,e,n,r){const s=mi(),o=EC(s,i,t,e,n,r);return o!==qs&&Hv(s,uc(),o),fI}const r0=void 0;var t9=["en",[["a","p"],["AM","PM"],r0],[["AM","PM"],r0,r0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],r0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],r0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",r0,"{1} 'at' {0}",r0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function e9(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let OC={};function nf(i){const t=function n9(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=vO(t);if(e)return e;const n=t.split("-")[0];if(e=vO(n),e)return e;if("en"===n)return t9;throw new gi(701,!1)}function vO(i){return i in OC||(OC[i]=io.ng&&io.ng.common&&io.ng.common.locales&&io.ng.common.locales[i]),OC[i]}var Fr=(()=>((Fr=Fr||{})[Fr.LocaleId=0]="LocaleId",Fr[Fr.DayPeriodsFormat=1]="DayPeriodsFormat",Fr[Fr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Fr[Fr.DaysFormat=3]="DaysFormat",Fr[Fr.DaysStandalone=4]="DaysStandalone",Fr[Fr.MonthsFormat=5]="MonthsFormat",Fr[Fr.MonthsStandalone=6]="MonthsStandalone",Fr[Fr.Eras=7]="Eras",Fr[Fr.FirstDayOfWeek=8]="FirstDayOfWeek",Fr[Fr.WeekendRange=9]="WeekendRange",Fr[Fr.DateFormat=10]="DateFormat",Fr[Fr.TimeFormat=11]="TimeFormat",Fr[Fr.DateTimeFormat=12]="DateTimeFormat",Fr[Fr.NumberSymbols=13]="NumberSymbols",Fr[Fr.NumberFormats=14]="NumberFormats",Fr[Fr.CurrencyCode=15]="CurrencyCode",Fr[Fr.CurrencySymbol=16]="CurrencySymbol",Fr[Fr.CurrencyName=17]="CurrencyName",Fr[Fr.Currencies=18]="Currencies",Fr[Fr.Directionality=19]="Directionality",Fr[Fr.PluralCase=20]="PluralCase",Fr[Fr.ExtraData=21]="ExtraData",Fr))();const FC="en-US";let yO=FC;function YT(i,t,e,n,r){if(i=ts(i),Array.isArray(i))for(let s=0;s<i.length;s++)YT(i[s],t,e,n,r);else{const s=Es(),o=mi();let l=fe(i)?i:ts(i.provide),u=cn(i);const p=ut(),v=1048575&p.providerIndexes,x=p.directiveStart,I=p.providerIndexes>>20;if(fe(i)||!i.multi){const M=new qp(u,r,Qt),F=ZT(l,t,r?v:v+I,x);-1===F?(cp(js(p,o),s,l),KT(s,i,t.length),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(M),o.push(M)):(e[F]=M,o[F]=M)}else{const M=ZT(l,t,v+I,x),F=ZT(l,t,v,v+I),j=M>=0&&e[M],X=F>=0&&e[F];if(r&&!X||!r&&!j){cp(js(p,o),s,l);const ce=function ej(i,t,e,n,r){const s=new qp(i,e,Qt);return s.multi=[],s.index=t,s.componentProviders=0,GO(s,r,n&&!e),s}(r?J9:Q9,e.length,r,n,u);!r&&X&&(e[F].providerFactory=ce),KT(s,i,t.length,0),t.push(l),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(ce),o.push(ce)}else KT(s,i,M>-1?M:F,GO(e[r?F:M],u,!r&&n));!r&&n&&X&&e[F].componentProviders++}}}function KT(i,t,e,n){const r=fe(t),s=function me(i){return!!i.useClass}(t);if(r||s){const u=(s?ts(t.useClass):t).prototype.ngOnDestroy;if(u){const p=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const v=p.indexOf(e);-1===v?p.push(e,[n,u]):p[v+1].push(n,u)}else p.push(e,u)}}}function GO(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function ZT(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function Q9(i,t,e,n){return QT(this.multi,[])}function J9(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,l=Qc(e,e[1],this.providerFactory.index,n);s=l.slice(0,o),QT(r,s);for(let u=o;u<l.length;u++)s.push(l[u])}else s=[],QT(r,s);return s}function QT(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function ko(i,t=[]){return e=>{e.providersResolver=(n,r)=>function Z9(i,t,e){const n=Es();if(n.firstCreatePass){const r=Lh(i);YT(e,n.data,n.blueprint,r,!0),YT(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class s0{}class WO{}class jO extends s0{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new UT(this);const n=du(t);this._bootstrapComponents=an(n.bootstrap),this._r3Injector=WA(t,e,[{provide:s0,useValue:this},{provide:fi,useValue:this.componentFactoryResolver}],us(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class JT extends WO{constructor(t){super(),this.moduleType=t}create(t){return new jO(this.moduleType,t)}}class nj extends s0{constructor(t,e,n){super(),this.componentFactoryResolver=new UT(this),this.instance=null;const r=new pt([...t,{provide:s0,useValue:this},{provide:fi,useValue:this.componentFactoryResolver}],e||tt(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function yI(i,t,e=null){return new nj(i,t,e).injector}function xa(i,t,e){const n=Po()+i,r=mi();return r[n]===qs?Xm(r,n,e?t.call(e):t()):bx(r,n)}function Bi(i,t,e,n){return function JO(i,t,e,n,r,s){const o=t+e;return bd(i,o,r)?Xm(i,o+1,s?n.call(s,r):n(r)):Tx(i,o+1)}(mi(),Po(),i,t,e,n)}function ys(i,t,e,n,r){return function eF(i,t,e,n,r,s,o){const l=t+e;return n0(i,l,r,s)?Xm(i,l+2,o?n.call(o,r,s):n(r,s)):Tx(i,l+2)}(mi(),Po(),i,t,e,n,r)}function qu(i,t,e,n,r,s){return function tF(i,t,e,n,r,s,o,l){const u=t+e;return uI(i,u,r,s,o)?Xm(i,u+3,l?n.call(l,r,s,o):n(r,s,o)):Tx(i,u+3)}(mi(),Po(),i,t,e,n,r,s)}function Nf(i,t,e,n,r,s,o){return function nF(i,t,e,n,r,s,o,l,u){const p=t+e;return ug(i,p,r,s,o,l)?Xm(i,p+4,u?n.call(u,r,s,o,l):n(r,s,o,l)):Tx(i,p+4)}(mi(),Po(),i,t,e,n,r,s,o)}function BC(i,t,e,n,r,s,o,l){const u=Po()+i,p=mi(),v=ug(p,u,e,n,r,s);return bd(p,u+4,o)||v?Xm(p,u+5,l?t.call(l,e,n,r,s,o):t(e,n,r,s,o)):bx(p,u+5)}function zC(i,t,e,n,r,s,o,l,u){const p=Po()+i,v=mi(),x=ug(v,p,e,n,r,s);return n0(v,p+4,o,l)||x?Xm(v,p+6,u?t.call(u,e,n,r,s,o,l):t(e,n,r,s,o,l)):bx(v,p+6)}function tM(i,t,e,n){return function iF(i,t,e,n,r,s){let o=t+e,l=!1;for(let u=0;u<r.length;u++)bd(i,o++,r[u])&&(l=!0);return l?Xm(i,o,n.apply(s,r)):Tx(i,o)}(mi(),Po(),i,t,e,n)}function Tx(i,t){const e=i[t];return e===qs?void 0:e}function nM(i){return t=>{setTimeout(i,void 0,t)}}const jn=class bj extends nn{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const u=t;r=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=nM(s),r&&(r=nM(r)),o&&(o=nM(o)));const l=super.subscribe({next:r,error:s,complete:o});return t instanceof W&&t.add(l),l}};function xj(){return this._results[t0()]()}class iM{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=t0(),n=iM.prototype;n[e]||(n[e]=xj)}get changes(){return this._changes||(this._changes=new jn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Ua(t);(this._changesDetected=!function $d(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let am=(()=>{class i{}return i.__NG_ELEMENT_ID__=Ij,i})();const wj=am,Aj=class extends wj{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tViews,r=rI(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),sI(n,r,t),new yx(r)}};function Ij(){return _I(ut(),mi())}function _I(i,t){return 4&i.type?new Aj(t,i,zi(i,t)):null}let hg=(()=>{class i{}return i.__NG_ELEMENT_ID__=Sj,i})();function Sj(){return oF(ut(),mi())}const Ej=hg,rF=class extends Ej{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return zi(this._hostTNode,this._hostLView)}get injector(){return new dh(this._hostTNode,this._hostLView)}get parentInjector(){const t=Rc(this._hostTNode,this._hostLView);if(Fh(t)){const e=gu(t,this._hostLView),n=uh(t);return new dh(e[1].data[n+8],e)}return new dh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=sF(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,n,r,s){const o=t&&!function Al(i){return"function"==typeof i}(t);let l;if(o)l=e;else{const x=e||{};l=x.index,n=x.injector,r=x.projectableNodes,s=x.environmentInjector||x.ngModuleRef}const u=o?t:new _x($o(t)),p=n||this.parentInjector;if(!s&&null==u.ngModule){const I=(o?p:this.parentInjector).get(Ke,null);I&&(s=I)}const v=u.create(p,r,void 0,s);return this.insert(v.hostView,l),v}insert(t,e){const n=t._lView,r=n[1];if(function kr(i){return Dh(i[3])}(n)){const v=this.indexOf(t);if(-1!==v)this.detach(v);else{const x=n[3],I=new rF(x,x[6],x[3]);I.detach(I.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function dC(i,t,e,n){const r=10+n,s=e.length;n>0&&(e[r-1][4]=t),n<s-10?(t[4]=e[r],zu(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const o=t[17];null!==o&&e!==o&&function yd(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(o,t);const l=t[19];null!==l&&l.insertView(i),t[2]|=64}(r,n,o,s);const l=nx(s,o),u=n[11],p=Vv(u,o[7]);return null!==p&&function bp(i,t,e,n,r,s){n[0]=r,n[6]=t,wu(i,n,e,1,r,s)}(r,o[6],u,n,p,l),t.attachToViewContainerRef(),zu(rM(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=sF(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=K_(this._lContainer,e);n&&(Vu(rM(this._lContainer),e),Jo(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=K_(this._lContainer,e);return n&&null!=Vu(rM(this._lContainer),e)?new yx(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function sF(i){return i[8]}function rM(i){return i[8]||(i[8]=[])}function oF(i,t){let e;const n=t[i.index];if(Dh(n))e=n;else{let r;if(8&i.type)r=na(n);else{const s=t[11];r=s.createComment("");const o=ch(i,t);cg(s,Vv(s,o),r,function Uv(i,t){return i.nextSibling(t)}(s,o),!1)}t[i.index]=e=ak(n,t,r,i),oI(t,e)}return new rF(e,i,t)}class sM{constructor(t){this.queryList=t,this.matches=null}clone(){return new sM(this.queryList)}setDirty(){this.queryList.setDirty()}}class oM{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new oM(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==hF(t,e).matches&&this.queries[e].setDirty()}}class aF{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class aM{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new aM(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class lM{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new lM(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,Dj(e,s)),this.matchTNodeWithReadOption(t,e,Nh(e,t,s,!1,!1))}else n===am?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Nh(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===qn||r===hg||r===am&&4&e.type)this.addMatch(e.index,-2);else{const s=Nh(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Dj(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function Pj(i,t,e,n){return-1===e?function Lj(i,t){return 11&i.type?zi(i,t):4&i.type?_I(i,t):null}(t,i):-2===e?function Rj(i,t,e){return e===qn?zi(t,i):e===am?_I(t,i):e===hg?oF(t,i):void 0}(i,t,n):Qc(i,i[1],e,t)}function lF(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const s=i.data,o=e.matches,l=[];for(let u=0;u<o.length;u+=2){const p=o[u];l.push(p<0?null:Pj(t,s[p],o[u+1],e.metadata.read))}r.matches=l}return r.matches}function cM(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=lF(i,t,r,e);for(let l=0;l<s.length;l+=2){const u=s[l];if(u>0)n.push(o[l/2]);else{const p=s[l+1],v=t[-u];for(let x=10;x<v.length;x++){const I=v[x];I[17]===I[3]&&cM(I[1],I,p,n)}if(null!==v[9]){const x=v[9];for(let I=0;I<x.length;I++){const M=x[I];cM(M[1],M,p,n)}}}}}return n}function or(i){const t=mi(),e=Es(),n=Dc();Ug(n+1);const r=hF(e,n);if(i.dirty&&mo(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?cM(e,t,n,[]):lF(e,t,r,n);i.reset(s,Hn),i.notifyOnChanges()}return!0}return!1}function is(i,t,e){const n=Es();n.firstCreatePass&&(uF(n,new aF(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),cF(n,mi(),t)}function Ga(i,t,e,n){const r=Es();if(r.firstCreatePass){const s=ut();uF(r,new aF(t,e,n),s.index),function Oj(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}cF(r,mi(),e)}function ar(){return function kj(i,t){return i[19].queries[t].queryList}(mi(),Dc())}function cF(i,t,e){const n=new iM(4==(4&e));QR(i,t,n,n.destroy),null===t[19]&&(t[19]=new oM),t[19].queries.push(new sM(n))}function uF(i,t,e){null===i.queries&&(i.queries=new aM),i.queries.track(new lM(t,e))}function hF(i,t){return i.queries.getByIndex(t)}function vc(i,t){return _I(i,t)}function bI(...i){}const Lx=new Qi("Application Initializer");let xI=(()=>{class i{constructor(e){this.appInits=e,this.resolve=bI,this.reject=bI,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(xx(s))e.push(s);else if(jT(s)){const o=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(Xn(Lx,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Px=new Qi("AppId",{providedIn:"root",factory:function DF(){return`${pM()}${pM()}${pM()}`}});function pM(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const LF=new Qi("Platform Initializer"),GC=new Qi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),PF=new Qi("appBootstrapListener"),RF=new Qi("AnimationModuleType");let t7=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Gv=new Qi("LocaleId",{providedIn:"root",factory:()=>ha(Gv,ns.Optional|ns.SkipSelf)||function n7(){return typeof $localize<"u"&&$localize.locale||FC}()});class s7{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let gM=(()=>{class i{compileModuleSync(e){return new JT(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=an(du(e).declarations).reduce((o,l)=>{const u=$o(l);return u&&o.push(new _x(u)),o},[]);return new s7(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const l7=(()=>Promise.resolve(0))();function mM(i){typeof Zone>"u"?l7.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Yo{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jn(!1),this.onMicrotaskEmpty=new jn(!1),this.onStable=new jn(!1),this.onError=new jn(!1),typeof Zone>"u")throw new gi(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function c7(){let i=io.requestAnimationFrame,t=io.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function d7(i){const t=()=>{!function h7(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(io,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,yM(i),i.isCheckStableRunning=!0,vM(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),yM(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,l)=>{try{return FF(i),e.invokeTask(r,s,o,l)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),NF(i)}},onInvoke:(e,n,r,s,o,l,u)=>{try{return FF(i),e.invoke(r,s,o,l,u)}finally{i.shouldCoalesceRunChangeDetection&&t(),NF(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,yM(i),vM(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yo.isInAngularZone())throw new gi(909,!1)}static assertNotInAngularZone(){if(Yo.isInAngularZone())throw new gi(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,u7,bI,bI);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const u7={};function vM(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function yM(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function FF(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function NF(i){i._nesting--,vM(i)}class f7{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jn,this.onMicrotaskEmpty=new jn,this.onStable=new jn,this.onError=new jn}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const BF=new Qi(""),wI=new Qi("");let bM,_M=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bM||(function p7(i){bM=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yo.assertNotInAngularZone(),mM(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mM(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(Xn(Yo),Xn(CM),Xn(wI))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),CM=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return bM?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ky=null;const zF=new Qi("AllowMultipleToken"),xM=new Qi("PlatformDestroyListeners");class VF{constructor(t,e){this.name=t,this.token=e}}function HF(i,t,e=[]){const n=`Platform: ${t}`,r=new Qi(n);return(s=[])=>{let o=wM();if(!o||o.injector.get(zF,!1)){const l=[...e,...s,{provide:r,useValue:!0}];i?i(l):function v7(i){if(Ky&&!Ky.get(zF,!1))throw new gi(400,!1);Ky=i;const t=i.get(WF);(function UF(i){const t=i.get(LF,null);t&&t.forEach(e=>e())})(i)}(function GF(i=[],t){return Au.create({name:t,providers:[{provide:Le,useValue:"platform"},{provide:xM,useValue:new Set([()=>Ky=null])},...i]})}(l,n))}return function _7(i){const t=wM();if(!t)throw new gi(401,!1);return t}()}}function wM(){return Ky?.get(WF)??null}let WF=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function C7(i,t){let e;return e="noop"===i?new f7:("zone.js"===i?void 0:i)||new Yo(t),e}(n?.ngZone,function jF(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Yo,useValue:r}];return r.run(()=>{const o=Au.create({providers:s,parent:this.injector,name:e.moduleType.name}),l=e.create(o),u=l.injector.get(et,null);if(!u)throw new gi(402,!1);return r.runOutsideAngular(()=>{const p=r.onError.subscribe({next:v=>{u.handleError(v)}});l.onDestroy(()=>{AI(this._modules,l),p.unsubscribe()})}),function $F(i,t,e){try{const n=e();return xx(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(u,r,()=>{const p=l.injector.get(xI);return p.runInitializers(),p.donePromise.then(()=>(function _O(i){Ic(i,"Expected localeId to be defined"),"string"==typeof i&&(yO=i.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Gv,FC)||FC),this._moduleDoBootstrap(l),l))})})}bootstrapModule(e,n=[]){const r=qF({},n);return function g7(i,t,e){const n=new JT(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(Rx);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new gi(403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new gi(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(xM,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(Xn(Au))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function qF(i,t){return Array.isArray(t)?t.reduce(qF,i):{...i,...t}}let Rx=(()=>{class i{constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Ct(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),o=new Ct(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Yo.assertNotInAngularZone(),mM(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const p=this._zone.onUnstable.subscribe(()=>{Yo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),p.unsubscribe()}});this.isStable=function Gs(...i){const t=he(i),e=function Se(i,t){return"number"==typeof it(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?dl(n[0]):wc(e)(sr(n,t)):nl}(s,o.pipe(bo()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){const r=e instanceof qt;if(!this._injector.get(xI).done)throw!r&&function UC(i){const t=$o(i)||Ol(i)||Ma(i);return null!==t&&t.standalone}(e),new gi(405,false);let o;o=r?e:this._injector.get(fi).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const l=function m7(i){return i.isBoundToModule}(o)?void 0:this._injector.get(s0),p=o.create(Au.NULL,[],n||o.selector,l),v=p.location.nativeElement,x=p.injector.get(BF,null);return x?.registerApplication(v),p.onDestroy(()=>{this.detachView(p.hostView),AI(this.components,p),x?.unregisterApplication(v)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new gi(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;AI(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(PF,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>AI(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new gi(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(Xn(Yo),Xn(Ke),Xn(et))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function AI(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let YF=!0,KF=!1;function ZF(){return KF=!0,YF}let Ho=(()=>{class i{}return i.__NG_ELEMENT_ID__=w7,i})();function w7(i){return function A7(i,t,e){if(Rg(i)&&!e){const n=Tc(i.index,t);return new yx(n,n)}return 47&i.type?new yx(t[16],t):null}(ut(),mi(),16==(16&i))}class tN{constructor(){}supports(t){return Cx(t)}create(t){return new D7(t)}}const M7=(i,t)=>t;class D7{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||M7}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<iN(n,r,s)?e:n,l=iN(o,r,s),u=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const p=l-r,v=u-r;if(p!=v){for(let I=0;I<p;I++){const M=I<s.length?s[I]:s[I]=0,F=M+I;v<=F&&F<p&&(s[I]=M+1)}s[o.previousIndex]=v-p}}l!==u&&t(o,l,u)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Cx(t))throw new gi(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)s=t[l],o=this._trackByFn(l,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,l)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,l),n=!0),e=e._next}else r=0,function cW(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[t0()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,l=>{o=this._trackByFn(r,l),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,l,o,r)),Object.is(e.item,l)||this._addIdentityChange(e,l)):(e=this._mismatch(e,l,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new L7(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new nN),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nN),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class L7{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class P7{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class nN{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new P7,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iN(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class rN{constructor(){}supports(t){return t instanceof Map||GT(t)}create(){return new R7}}class R7{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||GT(t)))throw new gi(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new k7(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class k7{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sN(){return new EI([new tN])}let EI=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||sN()),deps:[[i,new ph,new Tl]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new gi(901,!1)}}return i.\u0275prov=Yi({token:i,providedIn:"root",factory:sN}),i})();function oN(){return new kx([new rN])}let kx=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||oN()),deps:[[i,new ph,new Tl]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new gi(901,!1)}}return i.\u0275prov=Yi({token:i,providedIn:"root",factory:oN}),i})();const N7=HF(null,"core",[]);let B7=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(Xn(Rx))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({}),i})();function jv(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}let TI=null;function Km(){return TI}const Xu=new Qi("DocumentToken");let TM=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(){return function H7(){return Xn(aN)}()},providedIn:"platform"}),i})();const G7=new Qi("Location Initialized");let aN=(()=>{class i extends TM{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Km().getBaseHref(this._doc)}onPopState(e){const n=Km().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Km().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){lN()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){lN()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(Xn(Xu))},i.\u0275prov=Yi({token:i,factory:function(){return function W7(){return new aN(Xn(Xu))}()},providedIn:"platform"}),i})();function lN(){return!!window.history.pushState}function MM(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function cN(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function $v(i){return i&&"?"!==i[0]?"?"+i:i}let a0=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(){return ha(hN)},providedIn:"root"}),i})();const uN=new Qi("appBaseHref");let hN=(()=>{class i extends a0{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??ha(Xu).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return MM(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+$v(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+$v(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+$v(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(Xn(TM),Xn(uN,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),j7=(()=>{class i extends a0{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=MM(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+$v(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+$v(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(Xn(TM),Xn(uN,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),DM=(()=>{class i{constructor(e){this._subject=new jn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._baseHref=cN(dN(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+$v(n))}normalize(e){return i.stripTrailingSlash(function q7(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,dN(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$v(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$v(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=$v,i.joinWithSlash=MM,i.stripTrailingSlash=cN,i.\u0275fac=function(e){return new(e||i)(Xn(a0))},i.\u0275prov=Yi({token:i,factory:function(){return function $7(){return new DM(Xn(a0))}()},providedIn:"root"}),i})();function dN(i){return i.replace(/\/index.html$/,"")}var iu=(()=>((iu=iu||{})[iu.Format=0]="Format",iu[iu.Standalone=1]="Standalone",iu))(),Go=(()=>((Go=Go||{})[Go.Narrow=0]="Narrow",Go[Go.Abbreviated=1]="Abbreviated",Go[Go.Wide=2]="Wide",Go[Go.Short=3]="Short",Go))(),yc=(()=>((yc=yc||{})[yc.Short=0]="Short",yc[yc.Medium=1]="Medium",yc[yc.Long=2]="Long",yc[yc.Full=3]="Full",yc))(),Rs=(()=>((Rs=Rs||{})[Rs.Decimal=0]="Decimal",Rs[Rs.Group=1]="Group",Rs[Rs.List=2]="List",Rs[Rs.PercentSign=3]="PercentSign",Rs[Rs.PlusSign=4]="PlusSign",Rs[Rs.MinusSign=5]="MinusSign",Rs[Rs.Exponential=6]="Exponential",Rs[Rs.SuperscriptingExponent=7]="SuperscriptingExponent",Rs[Rs.PerMille=8]="PerMille",Rs[Rs.Infinity=9]="Infinity",Rs[Rs.NaN=10]="NaN",Rs[Rs.TimeSeparator=11]="TimeSeparator",Rs[Rs.CurrencyDecimal=12]="CurrencyDecimal",Rs[Rs.CurrencyGroup=13]="CurrencyGroup",Rs))();function MI(i,t){return fg(nf(i)[Fr.DateFormat],t)}function DI(i,t){return fg(nf(i)[Fr.TimeFormat],t)}function LI(i,t){return fg(nf(i)[Fr.DateTimeFormat],t)}function dg(i,t){const e=nf(i),n=e[Fr.NumberSymbols][t];if(typeof n>"u"){if(t===Rs.CurrencyDecimal)return e[Fr.NumberSymbols][Rs.Decimal];if(t===Rs.CurrencyGroup)return e[Fr.NumberSymbols][Rs.Group]}return n}function pN(i){if(!i[Fr.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[Fr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fg(i,t){for(let e=t;e>-1;e--)if(typeof i[e]<"u")return i[e];throw new Error("Locale data API: locale data undefined")}function PM(i){const[t,e]=i.split(":");return{hours:+t,minutes:+e}}const o$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ox={},a$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Yu=(()=>((Yu=Yu||{})[Yu.Short=0]="Short",Yu[Yu.ShortGMT=1]="ShortGMT",Yu[Yu.Long=2]="Long",Yu[Yu.Extended=3]="Extended",Yu))(),zs=(()=>((zs=zs||{})[zs.FullYear=0]="FullYear",zs[zs.Month=1]="Month",zs[zs.Date=2]="Date",zs[zs.Hours=3]="Hours",zs[zs.Minutes=4]="Minutes",zs[zs.Seconds=5]="Seconds",zs[zs.FractionalSeconds=6]="FractionalSeconds",zs[zs.Day=7]="Day",zs))(),uo=(()=>((uo=uo||{})[uo.DayPeriods=0]="DayPeriods",uo[uo.Days=1]="Days",uo[uo.Months=2]="Months",uo[uo.Eras=3]="Eras",uo))();function l$(i,t,e,n){let r=function v$(i){if(vN(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){const[r,s=1,o=1]=i.split("-").map(l=>+l);return PI(r,s-1,o)}const e=parseFloat(i);if(!isNaN(i-e))return new Date(e);let n;if(n=i.match(o$))return function y$(i){const t=new Date(0);let e=0,n=0;const r=i[8]?t.setUTCFullYear:t.setFullYear,s=i[8]?t.setUTCHours:t.setHours;i[9]&&(e=Number(i[9]+i[10]),n=Number(i[9]+i[11])),r.call(t,Number(i[1]),Number(i[2])-1,Number(i[3]));const o=Number(i[4]||0)-e,l=Number(i[5]||0)-n,u=Number(i[6]||0),p=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return s.call(t,o,l,u,p),t}(n)}const t=new Date(i);if(!vN(t))throw new Error(`Unable to convert "${i}" into a date`);return t}(i);t=qv(e,t)||t;let l,o=[];for(;t;){if(l=a$.exec(t),!l){o.push(t);break}{o=o.concat(l.slice(1));const v=o.pop();if(!v)break;t=v}}let u=r.getTimezoneOffset();n&&(u=mN(n,u),r=function m$(i,t,e){const n=e?-1:1,r=i.getTimezoneOffset();return function g$(i,t){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+t),i}(i,n*(mN(t,r)-r))}(r,n,!0));let p="";return o.forEach(v=>{const x=function p$(i){if(kM[i])return kM[i];let t;switch(i){case"G":case"GG":case"GGG":t=Ml(uo.Eras,Go.Abbreviated);break;case"GGGG":t=Ml(uo.Eras,Go.Wide);break;case"GGGGG":t=Ml(uo.Eras,Go.Narrow);break;case"y":t=Su(zs.FullYear,1,0,!1,!0);break;case"yy":t=Su(zs.FullYear,2,0,!0,!0);break;case"yyy":t=Su(zs.FullYear,3,0,!1,!0);break;case"yyyy":t=Su(zs.FullYear,4,0,!1,!0);break;case"Y":t=FI(1);break;case"YY":t=FI(2,!0);break;case"YYY":t=FI(3);break;case"YYYY":t=FI(4);break;case"M":case"L":t=Su(zs.Month,1,1);break;case"MM":case"LL":t=Su(zs.Month,2,1);break;case"MMM":t=Ml(uo.Months,Go.Abbreviated);break;case"MMMM":t=Ml(uo.Months,Go.Wide);break;case"MMMMM":t=Ml(uo.Months,Go.Narrow);break;case"LLL":t=Ml(uo.Months,Go.Abbreviated,iu.Standalone);break;case"LLLL":t=Ml(uo.Months,Go.Wide,iu.Standalone);break;case"LLLLL":t=Ml(uo.Months,Go.Narrow,iu.Standalone);break;case"w":t=RM(1);break;case"ww":t=RM(2);break;case"W":t=RM(1,!0);break;case"d":t=Su(zs.Date,1);break;case"dd":t=Su(zs.Date,2);break;case"c":case"cc":t=Su(zs.Day,1);break;case"ccc":t=Ml(uo.Days,Go.Abbreviated,iu.Standalone);break;case"cccc":t=Ml(uo.Days,Go.Wide,iu.Standalone);break;case"ccccc":t=Ml(uo.Days,Go.Narrow,iu.Standalone);break;case"cccccc":t=Ml(uo.Days,Go.Short,iu.Standalone);break;case"E":case"EE":case"EEE":t=Ml(uo.Days,Go.Abbreviated);break;case"EEEE":t=Ml(uo.Days,Go.Wide);break;case"EEEEE":t=Ml(uo.Days,Go.Narrow);break;case"EEEEEE":t=Ml(uo.Days,Go.Short);break;case"a":case"aa":case"aaa":t=Ml(uo.DayPeriods,Go.Abbreviated);break;case"aaaa":t=Ml(uo.DayPeriods,Go.Wide);break;case"aaaaa":t=Ml(uo.DayPeriods,Go.Narrow);break;case"b":case"bb":case"bbb":t=Ml(uo.DayPeriods,Go.Abbreviated,iu.Standalone,!0);break;case"bbbb":t=Ml(uo.DayPeriods,Go.Wide,iu.Standalone,!0);break;case"bbbbb":t=Ml(uo.DayPeriods,Go.Narrow,iu.Standalone,!0);break;case"B":case"BB":case"BBB":t=Ml(uo.DayPeriods,Go.Abbreviated,iu.Format,!0);break;case"BBBB":t=Ml(uo.DayPeriods,Go.Wide,iu.Format,!0);break;case"BBBBB":t=Ml(uo.DayPeriods,Go.Narrow,iu.Format,!0);break;case"h":t=Su(zs.Hours,1,-12);break;case"hh":t=Su(zs.Hours,2,-12);break;case"H":t=Su(zs.Hours,1);break;case"HH":t=Su(zs.Hours,2);break;case"m":t=Su(zs.Minutes,1);break;case"mm":t=Su(zs.Minutes,2);break;case"s":t=Su(zs.Seconds,1);break;case"ss":t=Su(zs.Seconds,2);break;case"S":t=Su(zs.FractionalSeconds,1);break;case"SS":t=Su(zs.FractionalSeconds,2);break;case"SSS":t=Su(zs.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=kI(Yu.Short);break;case"ZZZZZ":t=kI(Yu.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=kI(Yu.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=kI(Yu.Long);break;default:return null}return kM[i]=t,t}(v);p+=x?x(r,e,u):"''"===v?"'":v.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),p}function PI(i,t,e){const n=new Date(0);return n.setFullYear(i,t,e),n.setHours(0,0,0),n}function qv(i,t){const e=function X7(i){return nf(i)[Fr.LocaleId]}(i);if(Ox[e]=Ox[e]||{},Ox[e][t])return Ox[e][t];let n="";switch(t){case"shortDate":n=MI(i,yc.Short);break;case"mediumDate":n=MI(i,yc.Medium);break;case"longDate":n=MI(i,yc.Long);break;case"fullDate":n=MI(i,yc.Full);break;case"shortTime":n=DI(i,yc.Short);break;case"mediumTime":n=DI(i,yc.Medium);break;case"longTime":n=DI(i,yc.Long);break;case"fullTime":n=DI(i,yc.Full);break;case"short":const r=qv(i,"shortTime"),s=qv(i,"shortDate");n=RI(LI(i,yc.Short),[r,s]);break;case"medium":const o=qv(i,"mediumTime"),l=qv(i,"mediumDate");n=RI(LI(i,yc.Medium),[o,l]);break;case"long":const u=qv(i,"longTime"),p=qv(i,"longDate");n=RI(LI(i,yc.Long),[u,p]);break;case"full":const v=qv(i,"fullTime"),x=qv(i,"fullDate");n=RI(LI(i,yc.Full),[v,x])}return n&&(Ox[e][t]=n),n}function RI(i,t){return t&&(i=i.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),i}function cm(i,t,e="-",n,r){let s="";(i<0||r&&i<=0)&&(r?i=1-i:(i=-i,s=e));let o=String(i);for(;o.length<t;)o="0"+o;return n&&(o=o.slice(o.length-t)),s+o}function Su(i,t,e=0,n=!1,r=!1){return function(s,o){let l=function u$(i,t){switch(i){case zs.FullYear:return t.getFullYear();case zs.Month:return t.getMonth();case zs.Date:return t.getDate();case zs.Hours:return t.getHours();case zs.Minutes:return t.getMinutes();case zs.Seconds:return t.getSeconds();case zs.FractionalSeconds:return t.getMilliseconds();case zs.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}(i,s);if((e>0||l>-e)&&(l+=e),i===zs.Hours)0===l&&-12===e&&(l=12);else if(i===zs.FractionalSeconds)return function c$(i,t){return cm(i,3).substring(0,t)}(l,t);const u=dg(o,Rs.MinusSign);return cm(l,t,u,n,r)}}function Ml(i,t,e=iu.Format,n=!1){return function(r,s){return function h$(i,t,e,n,r,s){switch(e){case uo.Months:return function Z7(i,t,e){const n=nf(i),s=fg([n[Fr.MonthsFormat],n[Fr.MonthsStandalone]],t);return fg(s,e)}(t,r,n)[i.getMonth()];case uo.Days:return function K7(i,t,e){const n=nf(i),s=fg([n[Fr.DaysFormat],n[Fr.DaysStandalone]],t);return fg(s,e)}(t,r,n)[i.getDay()];case uo.DayPeriods:const o=i.getHours(),l=i.getMinutes();if(s){const p=function t$(i){const t=nf(i);return pN(t),(t[Fr.ExtraData][2]||[]).map(n=>"string"==typeof n?PM(n):[PM(n[0]),PM(n[1])])}(t),v=function n$(i,t,e){const n=nf(i);pN(n);const s=fg([n[Fr.ExtraData][0],n[Fr.ExtraData][1]],t)||[];return fg(s,e)||[]}(t,r,n),x=p.findIndex(I=>{if(Array.isArray(I)){const[M,F]=I,j=o>=M.hours&&l>=M.minutes,X=o<F.hours||o===F.hours&&l<F.minutes;if(M.hours<F.hours){if(j&&X)return!0}else if(j||X)return!0}else if(I.hours===o&&I.minutes===l)return!0;return!1});if(-1!==x)return v[x]}return function Y7(i,t,e){const n=nf(i),s=fg([n[Fr.DayPeriodsFormat],n[Fr.DayPeriodsStandalone]],t);return fg(s,e)}(t,r,n)[o<12?0:1];case uo.Eras:return function Q7(i,t){return fg(nf(i)[Fr.Eras],t)}(t,n)[i.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(r,s,i,t,e,n)}}function kI(i){return function(t,e,n){const r=-1*n,s=dg(e,Rs.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case Yu.Short:return(r>=0?"+":"")+cm(o,2,s)+cm(Math.abs(r%60),2,s);case Yu.ShortGMT:return"GMT"+(r>=0?"+":"")+cm(o,1,s);case Yu.Long:return"GMT"+(r>=0?"+":"")+cm(o,2,s)+":"+cm(Math.abs(r%60),2,s);case Yu.Extended:return 0===n?"Z":(r>=0?"+":"")+cm(o,2,s)+":"+cm(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${i}"`)}}}function gN(i){return PI(i.getFullYear(),i.getMonth(),i.getDate()+(4-i.getDay()))}function RM(i,t=!1){return function(e,n){let r;if(t){const s=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,o=e.getDate();r=1+Math.floor((o+s)/7)}else{const s=gN(e),o=function f$(i){const t=PI(i,0,1).getDay();return PI(i,0,1+(t<=4?4:11)-t)}(s.getFullYear()),l=s.getTime()-o.getTime();r=1+Math.round(l/6048e5)}return cm(r,i,dg(n,Rs.MinusSign))}}function FI(i,t=!1){return function(e,n){return cm(gN(e).getFullYear(),i,dg(n,Rs.MinusSign),t)}}const kM={};function mN(i,t){i=i.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(e)?t:e}function vN(i){return i instanceof Date&&!isNaN(i.valueOf())}function bN(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let _o=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Cx(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${us(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(Qt(EI),Qt(kx),Qt(qn),Qt(d))},i.\u0275dir=qr({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class L${constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ru=(()=>{class i{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new L$(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const l=n.get(s);n.move(l,o),AN(l,r)}});for(let r=0,s=n.length;r<s;r++){const l=n.get(r).context;l.index=r,l.count=s,l.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{AN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Qt(hg),Qt(am),Qt(EI))},i.\u0275dir=qr({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function AN(i,t){i.context.$implicit=t.item}let Oo=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new R$,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){IN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){IN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(Qt(hg),Qt(am))},i.\u0275dir=qr({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class R${constructor(){this.$implicit=null,this.ngIf=null}}function IN(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${us(t)}'.`)}let Ko=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:Oi.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(kx),Qt(d))},i.\u0275dir=qr({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),Dl=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(Qt(hg))},i.\u0275dir=qr({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ya]}),i})();const $$=new Qi("DATE_PIPE_DEFAULT_TIMEZONE");let EN=(()=>{class i{constructor(e,n){this.locale=e,this.defaultTimezone=n}transform(e,n="mediumDate",r,s){if(null==e||""===e||e!=e)return null;try{return l$(e,n,s||this.locale,r??this.defaultTimezone??void 0)}catch(o){throw function um(i,t){return new gi(2100,!1)}()}}}return i.\u0275fac=function(e){return new(e||i)(Qt(Gv,16),Qt($$,24))},i.\u0275pipe=hu({name:"date",type:i,pure:!0,standalone:!0}),i})(),Vs=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({}),i})();const MN="browser";function WM(i){return i===MN}let oq=(()=>{class i{}return i.\u0275prov=Yi({token:i,providedIn:"root",factory:()=>new aq(Xn(Xu),window)}),i})();class aq{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function lq(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=DN(this.window.history)||DN(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function DN(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class LN{}class jM extends class cq extends class U7{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function V7(i){TI||(TI=i)}(new jM)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function uq(){return Nx=Nx||document.querySelector("base"),Nx?Nx.getAttribute("href"):null}();return null==e?null:function hq(i){BI=BI||document.createElement("a"),BI.setAttribute("href",i);const t=BI.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Nx=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return bN(document.cookie,t)}}let BI,Nx=null;const PN=new Qi("TRANSITION_ID"),fq=[{provide:Lx,useFactory:function dq(i,t,e){return()=>{e.get(xI).donePromise.then(()=>{const n=Km(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[PN,Xu,Au],multi:!0}];let gq=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const zI=new Qi("EventManagerPlugins");let VI=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(Xn(zI),Xn(Yo))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class RN{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Km().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let kN=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),Bx=(()=>{class i extends kN{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(ON),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(ON))}}return i.\u0275fac=function(e){return new(e||i)(Xn(Xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();function ON(i){Km().remove(i)}const $M={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qM=/%COMP%/g;function UI(i,t,e){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?UI(i,r,e):(r=r.replace(qM,i),e.push(r))}return e}function BN(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let HI=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new XM(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case Ea.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new bq(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case Ea.ShadowDom:return new xq(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=UI(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(Xn(VI),Xn(Bx),Xn(Px))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class XM{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS($M[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(VN(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(VN(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=$M[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=$M[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Oi.DashCase|Oi.Important)?t.style.setProperty(e,n,r&Oi.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Oi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,BN(n)):this.eventManager.addEventListener(t,e,BN(n))}}function VN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class bq extends XM{constructor(t,e,n,r){super(t),this.component=n;const s=UI(r+"-"+n.id,n.styles,[]);e.addStyles(s),this.contentAttr=function yq(i){return"_ngcontent-%COMP%".replace(qM,i)}(r+"-"+n.id),this.hostAttr=function _q(i){return"_nghost-%COMP%".replace(qM,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class xq extends XM{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=UI(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const l=document.createElement("style");l.textContent=s[o],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let wq=(()=>{class i extends RN{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(Xn(Xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const UN=["alt","control","meta","shift"],Iq={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},HN={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Sq={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let Eq=(()=>{class i extends RN{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Km().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if(UN.forEach(u=>{const p=n.indexOf(u);p>-1&&(n.splice(p,1),o+=u+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static getEventFullKey(e){let n="",r=function Tq(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&HN.hasOwnProperty(t)&&(t=HN[t]))}return Iq[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),UN.forEach(s=>{s!=r&&(0,Sq[s])(e)&&(n+=s+".")}),n+=r,n}static eventCallback(e,n,r){return s=>{i.getEventFullKey(s)===e&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(Xn(Xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const Pq=HF(N7,"browser",[{provide:GC,useValue:MN},{provide:LF,useValue:function Mq(){jM.makeCurrent()},multi:!0},{provide:Xu,useFactory:function Lq(){return function tg(i){mh=i}(document),document},deps:[]}]),WN=new Qi(""),jN=[{provide:wI,useClass:class pq{addToWindow(t){io.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},io.getAllAngularTestabilities=()=>t.getAllTestabilities(),io.getAllAngularRootElements=()=>t.getAllRootElements(),io.frameworkStabilizers||(io.frameworkStabilizers=[]),io.frameworkStabilizers.push(n=>{const r=io.getAllAngularTestabilities();let s=r.length,o=!1;const l=function(u){o=o||u,s--,0==s&&n(o)};r.forEach(function(u){u.whenStable(l)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Km().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:BF,useClass:_M,deps:[Yo,CM,wI]},{provide:_M,useClass:_M,deps:[Yo,CM,wI]}],$N=[{provide:Le,useValue:"root"},{provide:et,useFactory:function Dq(){return new et},deps:[]},{provide:zI,useClass:wq,multi:!0,deps:[Xu,Yo,GC]},{provide:zI,useClass:Eq,multi:!0,deps:[Xu]},{provide:HI,useClass:HI,deps:[VI,Bx,Px]},{provide:c,useExisting:HI},{provide:kN,useExisting:Bx},{provide:Bx,useClass:Bx,deps:[Xu]},{provide:VI,useClass:VI,deps:[zI,Yo]},{provide:LN,useClass:gq,deps:[]},[]];let qN=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:Px,useValue:e.appId},{provide:PN,useExisting:Px},fq]}}}return i.\u0275fac=function(e){return new(e||i)(Xn(WN,12))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({providers:[...$N,...jN],imports:[Vs,B7]}),i})(),KM=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(Xn(Xu))},i.\u0275prov=Yi({token:i,factory:function(e){let n=null;return n=e?new e:function kq(){return new KM(Xn(Xu))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let KN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(e){let n=null;return n=e?new(e||i):Xn(ZN),n},providedIn:"root"}),i})(),ZN=(()=>{class i extends KN{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case da.NONE:return n;case da.HTML:return aa(n,"HTML")?yl(n):Ov(this._doc,String(n)).toString();case da.STYLE:return aa(n,"Style")?yl(n):n;case da.SCRIPT:if(aa(n,"Script"))return yl(n);throw new Error("unsafe value used in a script context");case da.URL:return aa(n,"URL")?yl(n):ag(String(n));case da.RESOURCE_URL:if(aa(n,"ResourceURL"))return yl(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function ig(i){return new gd(i)}(e)}bypassSecurityTrustStyle(e){return function Gh(i){return new yp(i)}(e)}bypassSecurityTrustScript(e){return function Wh(i){return new Um(i)}(e)}bypassSecurityTrustUrl(e){return function md(i){return new H_(i)}(e)}bypassSecurityTrustResourceUrl(e){return function Qd(i){return new tm(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(Xn(Xu))},i.\u0275prov=Yi({token:i,factory:function(e){let n=null;return n=e?new e:function Uq(i){return new ZN(i.get(Xu))}(Xn(Au)),n},providedIn:"root"}),i})();function Wr(...i){return sr(i,he(i))}function Xv(i,t){return Y(t)?fl(i,t,1):fl(i,1)}function pg(i,t){return bn((e,n)=>{let r=0;e.subscribe(yn(n,s=>i.call(t,s,r++)&&n.next(s)))})}class QN{}class GI{}class Zm{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Zm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Zm;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Zm?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(l=>-1===s.indexOf(l)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Hq{encodeKey(t){return JN(t)}encodeValue(t){return JN(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const Wq=/%(\d[a-f0-9])/gi,jq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function JN(i){return encodeURIComponent(i).replace(Wq,(t,e)=>jq[e]??t)}function WI(i){return`${i}`}class Yv{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Hq,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Gq(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,l]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],u=e.get(o)||[];u.push(l),e.set(o,u)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(WI):[WI(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Yv({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(WI(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(WI(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class $q{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function e3(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function t3(i){return typeof Blob<"u"&&i instanceof Blob}function n3(i){return typeof FormData<"u"&&i instanceof FormData}class l0{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function qq(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Zm),this.context||(this.context=new $q),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const l=e.indexOf("?");this.urlWithParams=e+(-1===l?"?":l<e.length-1?"&":"")+o}}else this.params=new Yv,this.urlWithParams=e}serializeBody(){return null===this.body?null:e3(this.body)||t3(this.body)||n3(this.body)||function Xq(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Yv?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||n3(this.body)?null:t3(this.body)?this.body.type||null:e3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Yv?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,p=t.params||this.params;const v=t.context??this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((x,I)=>x.set(I,t.setHeaders[I]),u)),t.setParams&&(p=Object.keys(t.setParams).reduce((x,I)=>x.set(I,t.setParams[I]),p)),new l0(e,n,s,{params:p,headers:u,context:v,reportProgress:l,responseType:r,withCredentials:o})}}var _c=(()=>((_c=_c||{})[_c.Sent=0]="Sent",_c[_c.UploadProgress=1]="UploadProgress",_c[_c.ResponseHeader=2]="ResponseHeader",_c[_c.DownloadProgress=3]="DownloadProgress",_c[_c.Response=4]="Response",_c[_c.User=5]="User",_c))();class QM{constructor(t,e=200,n="OK"){this.headers=t.headers||new Zm,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class JM extends QM{constructor(t={}){super(t),this.type=_c.ResponseHeader}clone(t={}){return new JM({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class WC extends QM{constructor(t={}){super(t),this.type=_c.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new WC({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class r3 extends QM{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function eD(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let tD=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof l0)s=e;else{let u,p;u=r.headers instanceof Zm?r.headers:new Zm(r.headers),r.params&&(p=r.params instanceof Yv?r.params:new Yv({fromObject:r.params})),s=new l0(e,n,void 0!==r.body?r.body:null,{headers:u,context:r.context,params:p,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Wr(s).pipe(Xv(u=>this.handler.handle(u)));if(e instanceof l0||"events"===r.observe)return o;const l=o.pipe(pg(u=>u instanceof WC));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(Ce(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(Ce(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(Ce(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return l.pipe(Ce(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Yv).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,eD(r,n))}post(e,n,r={}){return this.request("POST",e,eD(r,n))}put(e,n,r={}){return this.request("PUT",e,eD(r,n))}}return i.\u0275fac=function(e){return new(e||i)(Xn(QN))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class s3{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const o3=new Qi("HTTP_INTERCEPTORS");let Yq=(()=>{class i{intercept(e,n){return n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const Kq=/^\)\]\}',?\n/;let a3=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ct(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((M,F)=>r.setRequestHeader(M,F.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const M=e.detectContentTypeHeader();null!==M&&r.setRequestHeader("Content-Type",M)}if(e.responseType){const M=e.responseType.toLowerCase();r.responseType="json"!==M?M:"text"}const s=e.serializeBody();let o=null;const l=()=>{if(null!==o)return o;const M=r.statusText||"OK",F=new Zm(r.getAllResponseHeaders()),j=function Zq(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||e.url;return o=new JM({headers:F,status:r.status,statusText:M,url:j}),o},u=()=>{let{headers:M,status:F,statusText:j,url:X}=l(),ce=null;204!==F&&(ce=typeof r.response>"u"?r.responseText:r.response),0===F&&(F=ce?200:0);let we=F>=200&&F<300;if("json"===e.responseType&&"string"==typeof ce){const ye=ce;ce=ce.replace(Kq,"");try{ce=""!==ce?JSON.parse(ce):null}catch(Ae){ce=ye,we&&(we=!1,ce={error:Ae,text:ce})}}we?(n.next(new WC({body:ce,headers:M,status:F,statusText:j,url:X||void 0})),n.complete()):n.error(new r3({error:ce,headers:M,status:F,statusText:j,url:X||void 0}))},p=M=>{const{url:F}=l(),j=new r3({error:M,status:r.status||0,statusText:r.statusText||"Unknown Error",url:F||void 0});n.error(j)};let v=!1;const x=M=>{v||(n.next(l()),v=!0);let F={type:_c.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(F.total=M.total),"text"===e.responseType&&!!r.responseText&&(F.partialText=r.responseText),n.next(F)},I=M=>{let F={type:_c.UploadProgress,loaded:M.loaded};M.lengthComputable&&(F.total=M.total),n.next(F)};return r.addEventListener("load",u),r.addEventListener("error",p),r.addEventListener("timeout",p),r.addEventListener("abort",p),e.reportProgress&&(r.addEventListener("progress",x),null!==s&&r.upload&&r.upload.addEventListener("progress",I)),r.send(s),n.next({type:_c.Sent}),()=>{r.removeEventListener("error",p),r.removeEventListener("abort",p),r.removeEventListener("load",u),r.removeEventListener("timeout",p),e.reportProgress&&(r.removeEventListener("progress",x),null!==s&&r.upload&&r.upload.removeEventListener("progress",I)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(Xn(LN))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const nD=new Qi("XSRF_COOKIE_NAME"),iD=new Qi("XSRF_HEADER_NAME");class l3{}let Qq=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=bN(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(Xn(Xu),Xn(GC),Xn(nD))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),rD=(()=>{class i{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(Xn(l3),Xn(iD))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),Jq=(()=>{class i{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(o3,[]);this.chain=n.reduceRight((r,s)=>new s3(r,s),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(Xn(GI),Xn(Au))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),eX=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:rD,useClass:Yq}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:nD,useValue:e.cookieName}:[],e.headerName?{provide:iD,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({providers:[rD,{provide:o3,useExisting:rD,multi:!0},{provide:l3,useClass:Qq},{provide:nD,useValue:"XSRF-TOKEN"},{provide:iD,useValue:"X-XSRF-TOKEN"}]}),i})(),c3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({providers:[tD,{provide:QN,useClass:Jq},a3,{provide:GI,useExisting:a3}],imports:[eX.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),i})();class zf extends nn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const jI=D(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:tX}=Array,{getPrototypeOf:nX,prototype:iX,keys:rX}=Object;function u3(i){if(1===i.length){const t=i[0];if(tX(t))return{args:t,keys:null};if(function sX(i){return i&&"object"==typeof i&&nX(i)===iX}(t)){const e=rX(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:oX}=Array;function h3(i){return Ce(t=>function aX(i,t){return oX(t)?i(...t):i(t)}(i,t))}function d3(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function f3(...i){const t=he(i),e=Ye(i),{args:n,keys:r}=u3(i);if(0===n.length)return sr([],t);const s=new Ct(function lX(i,t,e=He){return n=>{p3(t,()=>{const{length:r}=i,s=new Array(r);let o=r,l=r;for(let u=0;u<r;u++)p3(t,()=>{const p=sr(i[u],t);let v=!1;p.subscribe(yn(n,x=>{s[u]=x,v||(v=!0,l--),l||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>d3(r,o):He));return e?s.pipe(h3(e)):s}function p3(i,t,e){i?to(e,i,t):t()}function sD(...i){return function cX(){return wc(1)}()(sr(i,he(i)))}function g3(i){return new Ct(t=>{dl(i()).subscribe(t)})}function jC(i,t){const e=Y(i)?i:()=>i,n=r=>r.error(e());return new Ct(t?r=>t.schedule(n,0,r):n)}function oD(){return bn((i,t)=>{let e=null;i._refCount++;const n=yn(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class m3 extends Ct{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,xn(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new W;const e=this.getSubject();t.add(this.source.subscribe(yn(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=W.EMPTY)}return t}refCount(){return oD()(this)}}function hm(i,t){return bn((e,n)=>{let r=null,s=0,o=!1;const l=()=>o&&!r&&n.complete();e.subscribe(yn(n,u=>{r?.unsubscribe();let p=0;const v=s++;dl(i(u,v)).subscribe(r=yn(n,x=>n.next(t?t(u,x,v,p++):x),()=>{r=null,l()}))},()=>{o=!0,l()}))})}function $C(i){return i<=0?()=>nl:bn((t,e)=>{let n=0;t.subscribe(yn(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function $I(i){return bn((t,e)=>{let n=!1;t.subscribe(yn(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function v3(i=hX){return bn((t,e)=>{let n=!1;t.subscribe(yn(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function hX(){return new jI}function Qy(i,t){const e=arguments.length>=2;return n=>n.pipe(i?pg((r,s)=>i(r,s,n)):He,$C(1),e?$I(t):v3(()=>new jI))}function xd(i,t,e){const n=Y(i)||t||e?{next:i,error:t,complete:e}:i;return n?bn((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let l=!0;r.subscribe(yn(s,u=>{var p;null===(p=n.next)||void 0===p||p.call(n,u),s.next(u)},()=>{var u;l=!1,null===(u=n.complete)||void 0===u||u.call(n),s.complete()},u=>{var p;l=!1,null===(p=n.error)||void 0===p||p.call(n,u),s.error(u)},()=>{var u,p;l&&(null===(u=n.unsubscribe)||void 0===u||u.call(n)),null===(p=n.finalize)||void 0===p||p.call(n)}))}):He}function Qm(i){return bn((t,e)=>{let s,n=null,r=!1;n=t.subscribe(yn(e,void 0,void 0,o=>{s=dl(i(o,Qm(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function dX(i,t,e,n,r){return(s,o)=>{let l=e,u=t,p=0;s.subscribe(yn(o,v=>{const x=p++;u=l?i(u,v,x):(l=!0,v),n&&o.next(u)},r&&(()=>{l&&o.next(u),o.complete()})))}}function aD(i,t){return bn(dX(i,t,arguments.length>=2,!0))}function lD(i){return i<=0?()=>nl:bn((t,e)=>{let n=[];t.subscribe(yn(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function y3(i,t){const e=arguments.length>=2;return n=>n.pipe(i?pg((r,s)=>i(r,s,n)):He,lD(1),e?$I(t):v3(()=>new jI))}function cD(i){return bn((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const Eo="primary";class gX{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function qC(i){return new gX(i)}function mX(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],l=i[s];if(o.startsWith(":"))r[o.substring(1)]=l;else if(o!==l.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Jm(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!_3(i[r],t[r]))return!1;return!0}function _3(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function C3(i){return Array.prototype.concat.apply([],i)}function b3(i){return i.length>0?i[i.length-1]:null}function Kh(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Kv(i){return jT(i)?i:xx(i)?sr(Promise.resolve(i)):Wr(i)}const _X={exact:function A3(i,t,e){if(!u0(i.segments,t.segments)||!qI(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!A3(i.children[n],t.children[n],e))return!1;return!0},subset:I3},x3={exact:function CX(i,t){return Jm(i,t)},subset:function bX(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>_3(i[e],t[e]))},ignored:()=>!0};function w3(i,t,e){return _X[e.paths](i.root,t.root,e.matrixParams)&&x3[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function I3(i,t,e){return S3(i,t,t.segments,e)}function S3(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!u0(r,e)||t.hasChildren()||!qI(r,e,n))}if(i.segments.length===e.length){if(!u0(i.segments,e)||!qI(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!I3(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(u0(i.segments,r)&&qI(i.segments,r,n)&&i.children[Eo])&&S3(i.children[Eo],t,s,n)}}function qI(i,t,e){return t.every((n,r)=>x3[e](i[r].parameters,n.parameters))}class c0{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qC(this.queryParams)),this._queryParamMap}toString(){return AX.serialize(this)}}class Fo{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Kh(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return XI(this)}}class zx{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=qC(this.parameters)),this._parameterMap}toString(){return D3(this)}}function u0(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let E3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(){return new hD},providedIn:"root"}),i})();class hD{parse(t){const e=new RX(t);return new c0(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Vx(t.root,!0)}`,n=function EX(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${YI(e)}=${YI(r)}`).join("&"):`${YI(e)}=${YI(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function IX(i){return encodeURI(i)}(t.fragment)}`:""}`}}const AX=new hD;function XI(i){return i.segments.map(t=>D3(t)).join("/")}function Vx(i,t){if(!i.hasChildren())return XI(i);if(t){const e=i.children[Eo]?Vx(i.children[Eo],!1):"",n=[];return Kh(i.children,(r,s)=>{s!==Eo&&n.push(`${s}:${Vx(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function wX(i,t){let e=[];return Kh(i.children,(n,r)=>{r===Eo&&(e=e.concat(t(n,r)))}),Kh(i.children,(n,r)=>{r!==Eo&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===Eo?[Vx(i.children[Eo],!1)]:[`${r}:${Vx(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Eo]?`${XI(i)}/${e[0]}`:`${XI(i)}/(${e.join("//")})`}}function T3(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function YI(i){return T3(i).replace(/%3B/gi,";")}function dD(i){return T3(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function KI(i){return decodeURIComponent(i)}function M3(i){return KI(i.replace(/\+/g,"%20"))}function D3(i){return`${dD(i.path)}${function SX(i){return Object.keys(i).map(t=>`;${dD(t)}=${dD(i[t])}`).join("")}(i.parameters)}`}const TX=/^[^\/()?;=#]+/;function ZI(i){const t=i.match(TX);return t?t[0]:""}const MX=/^[^=?&#]+/,LX=/^[^&#]+/;class RX{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fo([],{}):new Fo([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Eo]=new Fo(t,e)),n}parseSegment(){const t=ZI(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new gi(4009,!1);return this.capture(t),new zx(KI(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ZI(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=ZI(this.remaining);r&&(n=r,this.capture(n))}t[KI(e)]=KI(n)}parseQueryParam(t){const e=function DX(i){const t=i.match(MX);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function PX(i){const t=i.match(LX);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=M3(e),s=M3(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ZI(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new gi(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Eo);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Eo]:new Fo([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new gi(4011,!1)}}function fD(i){return i.segments.length>0?new Fo([],{[Eo]:i}):i}function QI(i){const t={};for(const n of Object.keys(i.children)){const s=QI(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function kX(i){if(1===i.numberOfChildren&&i.children[Eo]){const t=i.children[Eo];return new Fo(i.segments.concat(t.segments),t.children)}return i}(new Fo(i.segments,t))}function h0(i){return i instanceof c0}function NX(i,t,e,n,r){if(0===e.length)return XC(t.root,t.root,t.root,n,r);const s=function R3(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new P3(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return Kh(s.outlets,(u,p)=>{l[p]="string"==typeof u?u.split("/"):u}),[...r,{outlets:l}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?e=!0:".."===l?t++:""!=l&&r.push(l))}),r):[...r,s]},[]);return new P3(e,t,n)}(e);return s.toRoot()?XC(t.root,t.root,new Fo([],{}),n,r):function o(u){const p=function zX(i,t,e,n){if(i.isAbsolute)return new YC(t.root,!0,0);if(-1===n)return new YC(e,e===t.root,0);return function k3(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new gi(4005,!1);r=n.segments.length}return new YC(n,!1,r-s)}(e,n+(Ux(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,u),v=p.processChildren?Gx(p.segmentGroup,p.index,s.commands):gD(p.segmentGroup,p.index,s.commands);return XC(t.root,p.segmentGroup,v,n,r)}(i.snapshot?._lastPathIndex)}function Ux(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Hx(i){return"object"==typeof i&&null!=i&&i.outlets}function XC(i,t,e,n,r){let o,s={};n&&Kh(n,(u,p)=>{s[p]=Array.isArray(u)?u.map(v=>`${v}`):`${u}`}),o=i===t?e:L3(i,t,e);const l=fD(QI(o));return new c0(l,s,r)}function L3(i,t,e){const n={};return Kh(i.children,(r,s)=>{n[s]=r===t?e:L3(r,t,e)}),new Fo(i.segments,n)}class P3{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Ux(n[0]))throw new gi(4003,!1);const r=n.find(Hx);if(r&&r!==b3(n))throw new gi(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class YC{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function gD(i,t,e){if(i||(i=new Fo([],{})),0===i.segments.length&&i.hasChildren())return Gx(i,t,e);const n=function UX(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],l=e[n];if(Hx(l))break;const u=`${l}`,p=n<e.length-1?e[n+1]:null;if(r>0&&void 0===u)break;if(u&&p&&"object"==typeof p&&void 0===p.outlets){if(!F3(u,p,o))return s;n+=2}else{if(!F3(u,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new Fo(i.segments.slice(0,n.pathIndex),{});return s.children[Eo]=new Fo(i.segments.slice(n.pathIndex),i.children),Gx(s,0,r)}return n.match&&0===r.length?new Fo(i.segments,{}):n.match&&!i.hasChildren()?mD(i,t,e):n.match?Gx(i,0,r):mD(i,t,e)}function Gx(i,t,e){if(0===e.length)return new Fo(i.segments,{});{const n=function VX(i){return Hx(i[0])?i[0].outlets:{[Eo]:i}}(e),r={};return Kh(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=gD(i.children[o],t,s))}),Kh(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new Fo(i.segments,r)}}function mD(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Hx(s)){const u=HX(s.outlets);return new Fo(n,u)}if(0===r&&Ux(e[0])){n.push(new zx(i.segments[t].path,O3(e[0]))),r++;continue}const o=Hx(s)?s.outlets[Eo]:`${s}`,l=r<e.length-1?e[r+1]:null;o&&l&&Ux(l)?(n.push(new zx(o,O3(l))),r+=2):(n.push(new zx(o,{})),r++)}return new Fo(n,{})}function HX(i){const t={};return Kh(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=mD(new Fo([],{}),0,e))}),t}function O3(i){const t={};return Kh(i,(e,n)=>t[n]=`${e}`),t}function F3(i,t,e){return i==e.path&&Jm(t,e.parameters)}class Zv{constructor(t,e){this.id=t,this.url=e}}class vD extends Zv{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class d0 extends Zv{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class JI extends Zv{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class N3 extends Zv{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class GX extends Zv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WX extends Zv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jX extends Zv{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $X extends Zv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qX extends Zv{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XX{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YX{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class KX{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZX{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QX{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class JX{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class B3{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class z3{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=yD(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=yD(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=_D(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return _D(t,this._root).map(e=>e.value)}}function yD(i,t){if(i===t.value)return t;for(const e of t.children){const n=yD(i,e);if(n)return n}return null}function _D(i,t){if(i===t.value)return[t];for(const e of t.children){const n=_D(i,e);if(n.length)return n.unshift(t),n}return[]}class Qv{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function KC(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class V3 extends z3{constructor(t,e){super(t),this.snapshot=e,CD(this,t)}toString(){return this.snapshot.toString()}}function U3(i,t){const e=function tY(i,t){const o=new e1([],{},{},"",{},Eo,t,null,i.root,-1,{});return new G3("",new Qv(o,[]))}(i,t),n=new zf([new zx("",{})]),r=new zf({}),s=new zf({}),o=new zf({}),l=new zf(""),u=new Jy(n,r,o,l,s,Eo,t,e.root);return u.snapshot=e.root,new V3(new Qv(u,[]),e)}class Jy{constructor(t,e,n,r,s,o,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ce(t=>qC(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ce(t=>qC(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function H3(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function nY(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class e1{constructor(t,e,n,r,s,o,l,u,p,v,x,I){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=l,this.routeConfig=u,this._urlSegment=p,this._lastPathIndex=v,this._correctedLastPathIndex=I??v,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qC(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qC(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class G3 extends z3{constructor(t,e){super(e),this.url=t,CD(this,e)}toString(){return W3(this._root)}}function CD(i,t){t.value._routerState=i,t.children.forEach(e=>CD(i,e))}function W3(i){const t=i.children.length>0?` { ${i.children.map(W3).join(", ")} } `:"";return`${i.value}${t}`}function bD(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Jm(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),Jm(t.params,e.params)||i.params.next(e.params),function vX(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Jm(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),Jm(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function xD(i,t){const e=Jm(i.params,t.params)&&function xX(i,t){return u0(i,t)&&i.every((e,n)=>Jm(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||xD(i.parent,t.parent))}function Wx(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function rY(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Wx(i,n,r);return Wx(i,n)})}(i,t,e);return new Qv(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(l=>Wx(i,l)),o}}const n=function sY(i){return new Jy(new zf(i.url),new zf(i.params),new zf(i.queryParams),new zf(i.fragment),new zf(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>Wx(i,s));return new Qv(n,r)}}const wD="ngNavigationCancelingError";function j3(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=h0(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=$3(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function $3(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[wD]=!0,n.cancellationCode=t,e&&(n.url=e),n}function q3(i){return X3(i)&&h0(i.url)}function X3(i){return i&&i[wD]}class oY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jx,this.attachRef=null}}let jx=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new oY,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const t1=!1;let AD=(()=>{class i{constructor(e,n,r,s,o){this.parentContexts=e,this.location=n,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new jn,this.deactivateEvents=new jn,this.attachEvents=new jn,this.detachEvents=new jn,this.name=r||Eo,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new gi(4012,t1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new gi(4012,t1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new gi(4012,t1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new gi(4013,t1);this._activatedRoute=e;const r=this.location,o=e._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new aY(e,l,r.injector);if(n&&function lY(i){return!!i.resolveComponentFactory}(n)){const p=n.resolveComponentFactory(o);this.activated=r.createComponent(p,r.length,u)}else this.activated=r.createComponent(o,{index:r.length,injector:u,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)(Qt(jx),Qt(hg),cd("name"),Qt(Ho),Qt(Ke))},i.\u0275dir=qr({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class aY{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Jy?this.route:t===jx?this.childContexts:this.parent.get(t,e)}}let Y3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ar({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,n){1&e&&si(0,"router-outlet")},dependencies:[AD],encapsulation:2}),i})();function K3(i,t){return i.providers&&!i._injector&&(i._injector=yI(i.providers,t,`Route: ${i.path}`)),i._injector??t}function SD(i){const t=i.children&&i.children.map(SD),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Eo&&(e.component=Y3),e}function gg(i){return i.outlet||Eo}function Z3(i,t){const e=i.filter(n=>gg(n)===t);return e.push(...i.filter(n=>gg(n)!==t)),e}function Q3(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class fY{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),bD(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=KC(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Kh(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=KC(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:l})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=KC(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=KC(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new JX(s.value.snapshot))}),t.children.length&&this.forwardEvent(new ZX(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(bD(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(l.contexts),o.attachRef=l.componentRef,o.route=l.route.value,o.outlet&&o.outlet.attach(l.componentRef,l.route.value),bD(l.route.value),this.activateChildRoutes(t,null,o.children)}else{const l=Q3(r.snapshot),u=l?.get(fi)??null;o.attachRef=null,o.route=r,o.resolver=u,o.injector=l,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class J3{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class n1{constructor(t,e){this.component=t,this.route=e}}function pY(i,t,e){const n=i._root;return $x(n,t?t._root:null,e,[n.value])}function r1(i,t,e){return(Q3(t)??e).get(i)}function $x(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=KC(t);return i.children.forEach(o=>{(function mY(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,l=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function vY(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!u0(i.url,t.url);case"pathParamsOrQueryParamsChange":return!u0(i.url,t.url)||!Jm(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xD(i,t)||!Jm(i.queryParams,t.queryParams);default:return!xD(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new J3(n)):(s.data=o.data,s._resolvedData=o._resolvedData),$x(i,t,s.component?l?l.children:null:e,n,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new n1(l.outlet.component,o))}else o&&qx(t,l,r),r.canActivateChecks.push(new J3(n)),$x(i,null,s.component?l?l.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),Kh(s,(o,l)=>qx(o,e.getContext(l),r)),r}function qx(i,t,e){const n=KC(i),r=i.value;Kh(n,(s,o)=>{qx(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new n1(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Xx(i){return"function"==typeof i}function ED(i){return i instanceof jI||"EmptyError"===i?.name}const s1=Symbol("INITIAL_VALUE");function ZC(){return hm(i=>f3(i.map(t=>t.pipe($C(1),function uX(...i){const t=he(i);return bn((e,n)=>{(t?sD(i,e,t):sD(i,e)).subscribe(n)})}(s1)))).pipe(Ce(t=>{for(const e of t)if(!0!==e){if(e===s1)return s1;if(!1===e||e instanceof c0)return e}return!0}),pg(t=>t!==s1),$C(1)))}function eB(i){return function ft(...i){return gt(i)}(xd(t=>{if(h0(t))throw j3(0,t)}),Ce(t=>!0===t))}const TD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function tB(i,t,e,n,r){const s=MD(i,t,e);return s.matched?function kY(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?Wr(r.map(o=>{const l=i.get(o),u=function wY(i){return i&&Xx(i.canMatch)}(l)?l.canMatch(t,e):l(t,e);return Kv(u)})).pipe(ZC(),eB()):Wr(!0)}(n=K3(t,n),t,e).pipe(Ce(o=>!0===o?s:{...TD})):Wr(s)}function MD(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...TD}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||mX)(e,i,t);if(!r)return{...TD};const s={};Kh(r.posParams,(l,u)=>{s[u]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function o1(i,t,e,n,r="corrected"){if(e.length>0&&function NY(i,t,e){return e.some(n=>a1(i,t,n)&&gg(n)!==Eo)}(i,e,n)){const o=new Fo(t,function FY(i,t,e,n){const r={};r[Eo]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&gg(s)!==Eo){const o=new Fo([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[gg(s)]=o}return r}(i,t,n,new Fo(e,i.children)));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function BY(i,t,e){return e.some(n=>a1(i,t,n))}(i,e,n)){const o=new Fo(i.segments,function OY(i,t,e,n,r,s){const o={};for(const l of n)if(a1(i,e,l)&&!r[gg(l)]){const u=new Fo([],{});u._sourceSegment=i,u._segmentIndexShift="legacy"===s?i.segments.length:t.length,o[gg(l)]=u}return{...r,...o}}(i,t,e,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new Fo(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function a1(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function nB(i,t,e,n){return!!(gg(i)===n||n!==Eo&&a1(t,e,i))&&("**"===i.path||MD(t,i,e).matched)}function iB(i,t,e){return 0===t.length&&!i.children[e]}const l1=!1;class c1{constructor(t){this.segmentGroup=t||null}}class rB{constructor(t){this.urlTree=t}}function Yx(i){return jC(new c1(i))}function sB(i){return jC(new rB(i))}class HY{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=o1(this.urlTree.root,[],[],this.config).segmentGroup,e=new Fo(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Eo).pipe(Ce(s=>this.createUrlTree(QI(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qm(s=>{if(s instanceof rB)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof c1?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Eo).pipe(Ce(r=>this.createUrlTree(QI(r),t.queryParams,t.fragment))).pipe(Qm(r=>{throw r instanceof c1?this.noMatchError(r):r}))}noMatchError(t){return new gi(4002,l1)}createUrlTree(t,e,n){const r=fD(t);return new c0(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Ce(s=>new Fo([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return sr(r).pipe(Xv(s=>{const o=n.children[s],l=Z3(e,s);return this.expandSegmentGroup(t,l,o,s).pipe(Ce(u=>({segment:u,outlet:s})))}),aD((s,o)=>(s[o.outlet]=o.segment,s),{}),y3())}expandSegment(t,e,n,r,s,o){return sr(n).pipe(Xv(l=>this.expandSegmentAgainstRoute(t,e,n,l,r,s,o).pipe(Qm(p=>{if(p instanceof c1)return Wr(null);throw p}))),Qy(l=>!!l),Qm((l,u)=>{if(ED(l))return iB(e,r,s)?Wr(new Fo([],{})):Yx(e);throw l}))}expandSegmentAgainstRoute(t,e,n,r,s,o,l){return nB(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):Yx(e):Yx(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?sB(s):this.lineralizeSegments(n,s).pipe(fl(o=>{const l=new Fo(o,{});return this.expandSegment(t,l,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:l,consumedSegments:u,remainingSegments:p,positionalParamSegments:v}=MD(e,r,s);if(!l)return Yx(e);const x=this.applyRedirectCommands(u,r.redirectTo,v);return r.redirectTo.startsWith("/")?sB(x):this.lineralizeSegments(r,x).pipe(fl(I=>this.expandSegment(t,e,n,I.concat(p),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=K3(n,t),n.loadChildren?(n._loadedRoutes?Wr({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(Ce(l=>(n._loadedRoutes=l.routes,n._loadedInjector=l.injector,new Fo(r,{})))):Wr(new Fo(r,{}))):tB(e,n,r,t).pipe(hm(({matched:o,consumedSegments:l,remainingSegments:u})=>o?this.getChildConfig(t=n._injector??t,n,r).pipe(fl(v=>{const x=v.injector??t,I=v.routes,{segmentGroup:M,slicedSegments:F}=o1(e,l,u,I),j=new Fo(M.segments,M.children);if(0===F.length&&j.hasChildren())return this.expandChildren(x,I,j).pipe(Ce(ye=>new Fo(l,ye)));if(0===I.length&&0===F.length)return Wr(new Fo(l,{}));const X=gg(n)===s;return this.expandSegment(x,j,I,F,X?Eo:s,!0).pipe(Ce(we=>new Fo(l.concat(we.segments),we.children)))})):Yx(e)))}getChildConfig(t,e,n){return e.children?Wr({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Wr({routes:e._loadedRoutes,injector:e._loadedInjector}):function RY(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?Wr(!0):Wr(r.map(o=>{const l=i.get(o),u=function _Y(i){return i&&Xx(i.canLoad)}(l)?l.canLoad(t,e):l(t,e);return Kv(u)})).pipe(ZC(),eB())}(t,e,n).pipe(fl(r=>r?this.configLoader.loadChildren(t,e).pipe(xd(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function VY(i){return jC($3(l1,3))}())):Wr({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Wr(n);if(r.numberOfChildren>1||!r.children[Eo])return jC(new gi(4e3,l1));r=r.children[Eo]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new c0(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Kh(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const l=r.substring(1);n[s]=e[l]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return Kh(e.children,(l,u)=>{o[u]=this.createSegmentGroup(t,l,n,r)}),new Fo(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new gi(4001,l1);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class WY{}class qY{constructor(t,e,n,r,s,o,l,u){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=l,this.urlSerializer=u}recognize(){const t=o1(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Eo).pipe(Ce(e=>{if(null===e)return null;const n=new e1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Eo,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Qv(n,e),s=new G3(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=H3(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return sr(Object.keys(n.children)).pipe(Xv(r=>{const s=n.children[r],o=Z3(e,r);return this.processSegmentGroup(t,o,s,r)}),aD((r,s)=>r&&s?(r.push(...s),r):null),function fX(i,t=!1){return bn((e,n)=>{let r=0;e.subscribe(yn(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}(r=>null!==r),$I(null),y3(),Ce(r=>{if(null===r)return null;const s=oB(r);return function XY(i){i.sort((t,e)=>t.value.outlet===Eo?-1:e.value.outlet===Eo?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return sr(e).pipe(Xv(o=>this.processSegmentAgainstRoute(o._injector??t,o,n,r,s)),Qy(o=>!!o),Qm(o=>{if(ED(o))return iB(n,r,s)?Wr([]):Wr(null);throw o}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!nB(e,n,r,s))return Wr(null);let o;if("**"===e.path){const l=r.length>0?b3(r).parameters:{},u=lB(n)+r.length;o=Wr({snapshot:new e1(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uB(e),gg(e),e.component??e._loadedComponent??null,e,aB(n),u,hB(e),u),consumedSegments:[],remainingSegments:[]})}else o=tB(n,e,r,t).pipe(Ce(({matched:l,consumedSegments:u,remainingSegments:p,parameters:v})=>{if(!l)return null;const x=lB(n)+u.length;return{snapshot:new e1(u,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,uB(e),gg(e),e.component??e._loadedComponent??null,e,aB(n),x,hB(e),x),consumedSegments:u,remainingSegments:p}}));return o.pipe(hm(l=>{if(null===l)return Wr(null);const{snapshot:u,consumedSegments:p,remainingSegments:v}=l;t=e._injector??t;const x=e._loadedInjector??t,I=function YY(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:M,slicedSegments:F}=o1(n,p,v,I.filter(X=>void 0===X.redirectTo),this.relativeLinkResolution);if(0===F.length&&M.hasChildren())return this.processChildren(x,I,M).pipe(Ce(X=>null===X?null:[new Qv(u,X)]));if(0===I.length&&0===F.length)return Wr([new Qv(u,[])]);const j=gg(e)===s;return this.processSegment(x,I,M,F,j?Eo:s).pipe(Ce(X=>null===X?null:[new Qv(u,X)]))}))}}function KY(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function oB(i){const t=[],e=new Set;for(const n of i){if(!KY(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=oB(n.children);t.push(new Qv(n.value,r))}return t.filter(n=>!e.has(n))}function aB(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function lB(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function uB(i){return i.data||{}}function hB(i){return i.resolve||{}}const DD=Symbol("RouteTitle");function dB(i){return"string"==typeof i.title||null===i.title}function LD(i){return hm(t=>{const e=i(t);return e?sr(e).pipe(Ce(()=>t)):Wr(t)})}let fB=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===Eo);return n}getResolvedTitleForRoute(e){return e.data[DD]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:function(){return ha(pB)},providedIn:"root"}),i})(),pB=(()=>{class i extends fB{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(Xn(KM))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class rK{}class oK extends class sK{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const PD=new Qi("",{providedIn:"root",factory:()=>({})}),RD=new Qi("ROUTES");let kD=(()=>{class i{constructor(e,n){this.injector=e,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Wr(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Kv(e.loadComponent()).pipe(xd(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),cD(()=>{this.componentLoaders.delete(e)})),r=new m3(n,()=>new nn).pipe(oD());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Wr({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(Ce(l=>{this.onLoadEndListener&&this.onLoadEndListener(n);let u,p,v=!1;Array.isArray(l)?p=l:(u=l.create(e).injector,p=C3(u.get(RD,[],ns.Self|ns.Optional)));return{routes:p.map(SD),injector:u}}),cD(()=>{this.childrenLoaders.delete(n)})),o=new m3(s,()=>new nn).pipe(oD());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(e){return Kv(e()).pipe(fl(n=>n instanceof WO||Array.isArray(n)?Wr(n):sr(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(e){return new(e||i)(Xn(Au),Xn(gM))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class lK{}class cK{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function uK(i){throw i}function hK(i,t,e){return t.parse("/")}const dK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function mB(){const i=ha(E3),t=ha(jx),e=ha(DM),n=ha(Au),r=ha(gM),s=ha(RD,{optional:!0})??[],o=ha(PD,{optional:!0})??{},l=ha(pB),u=ha(fB,{optional:!0}),p=ha(lK,{optional:!0}),v=ha(rK,{optional:!0}),x=new wd(null,i,t,e,n,r,C3(s));return p&&(x.urlHandlingStrategy=p),v&&(x.routeReuseStrategy=v),x.titleStrategy=u??l,function pK(i,t){i.errorHandler&&(t.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(t.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(t.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(t.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(t.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(t.canceledNavigationResolution=i.canceledNavigationResolution)}(o,x),x}let wd=(()=>{class i{constructor(e,n,r,s,o,l,u){this.rootComponentType=e,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new nn,this.errorHandler=uK,this.malformedUriErrorHandler=hK,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Wr(void 0),this.urlHandlingStrategy=new cK,this.routeReuseStrategy=new oK,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(kD),this.configLoader.onLoadEndListener=I=>this.triggerEvent(new YX(I)),this.configLoader.onLoadStartListener=I=>this.triggerEvent(new XX(I)),this.ngModule=o.get(s0),this.console=o.get(t7);const x=o.get(Yo);this.isNgZoneEnabled=x instanceof Yo&&Yo.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=function yX(){return new c0(new Fo([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=U3(this.currentUrlTree,this.rootComponentType),this.transitions=new zf({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const n=this.events;return e.pipe(pg(r=>0!==r.id),Ce(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),hm(r=>{let s=!1,o=!1;return Wr(r).pipe(xd(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),hm(l=>{const u=this.browserUrlTree.toString(),p=!this.navigated||l.extractedUrl.toString()!==u||u!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||p)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return vB(l.source)&&(this.browserUrlTree=l.extractedUrl),Wr(l).pipe(hm(x=>{const I=this.transitions.getValue();return n.next(new vD(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),I!==this.transitions.getValue()?nl:Promise.resolve(x)}),function GY(i,t,e,n){return hm(r=>function UY(i,t,e,n,r){return new HY(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(Ce(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),xd(x=>{this.currentNavigation={...this.currentNavigation,finalUrl:x.urlAfterRedirects},r.urlAfterRedirects=x.urlAfterRedirects}),function QY(i,t,e,n,r,s){return fl(o=>function $Y(i,t,e,n,r,s,o="emptyOnly",l="legacy"){return new qY(i,t,e,n,r,o,l,s).recognize().pipe(hm(u=>null===u?function jY(i){return new Ct(t=>t.error(i))}(new WY):Wr(u)))}(i,t,e,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,r,s).pipe(Ce(l=>({...o,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),xd(x=>{if(r.targetSnapshot=x.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const M=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(M,x)}this.browserUrlTree=x.urlAfterRedirects}const I=new GX(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);n.next(I)}));if(p&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:I,extractedUrl:M,source:F,restoredState:j,extras:X}=l,ce=new vD(I,this.serializeUrl(M),F,j);n.next(ce);const we=U3(M,this.rootComponentType).snapshot;return Wr(r={...l,targetSnapshot:we,urlAfterRedirects:M,extras:{...X,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=l.rawUrl,l.resolve(null),nl}),xd(l=>{const u=new WX(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),Ce(l=>r={...l,guards:pY(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function IY(i,t){return fl(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Wr({...e,guardsResult:!0}):function SY(i,t,e,n){return sr(i).pipe(fl(r=>function PY(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Wr(s.map(l=>{const u=r1(l,t,r);return Kv(function xY(i){return i&&Xx(i.canDeactivate)}(u)?u.canDeactivate(i,t,e,n):u(i,t,e,n)).pipe(Qy())})).pipe(ZC()):Wr(!0)}(r.component,r.route,e,t,n)),Qy(r=>!0!==r,!0))}(o,n,r,i).pipe(fl(l=>l&&function yY(i){return"boolean"==typeof i}(l)?function EY(i,t,e,n){return sr(t).pipe(Xv(r=>sD(function MY(i,t){return null!==i&&t&&t(new KX(i)),Wr(!0)}(r.route.parent,n),function TY(i,t){return null!==i&&t&&t(new QX(i)),Wr(!0)}(r.route,n),function LY(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function gY(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>g3(()=>Wr(o.guards.map(u=>{const p=r1(u,o.node,e);return Kv(function bY(i){return i&&Xx(i.canActivateChild)}(p)?p.canActivateChild(n,i):p(n,i)).pipe(Qy())})).pipe(ZC())));return Wr(s).pipe(ZC())}(i,r.path,e),function DY(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return Wr(!0);const r=n.map(s=>g3(()=>{const o=r1(s,t,e);return Kv(function CY(i){return i&&Xx(i.canActivate)}(o)?o.canActivate(t,i):o(t,i)).pipe(Qy())}));return Wr(r).pipe(ZC())}(i,r.route,e))),Qy(r=>!0!==r,!0))}(n,s,i,t):Wr(l)),Ce(l=>({...e,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),xd(l=>{if(r.guardsResult=l.guardsResult,h0(l.guardsResult))throw j3(0,l.guardsResult);const u=new jX(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(u)}),pg(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),LD(l=>{if(l.guards.canActivateChecks.length)return Wr(l).pipe(xd(u=>{const p=new $X(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}),hm(u=>{let p=!1;return Wr(u).pipe(function JY(i,t){return fl(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return Wr(e);let s=0;return sr(r).pipe(Xv(o=>function eK(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!dB(r)&&(s[DD]=r.title),function tK(i,t,e,n){const r=function nK(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return Wr({});const s={};return sr(r).pipe(fl(o=>function iK(i,t,e,n){const r=r1(i,t,n);return Kv(r.resolve?r.resolve(t,e):r(t,e))}(i[o],t,e,n).pipe(Qy(),xd(l=>{s[o]=l}))),lD(1),function pX(i){return Ce(()=>i)}(s),Qm(o=>ED(o)?nl:jC(o)))}(s,i,t,n).pipe(Ce(o=>(i._resolvedData=o,i.data=H3(i,e).resolve,r&&dB(r)&&(i.data[DD]=r.title),null)))}(o.route,n,i,t)),xd(()=>s++),lD(1),fl(o=>s===r.length?Wr(e):nl))})}(this.paramsInheritanceStrategy,this.ngModule.injector),xd({next:()=>p=!0,complete:()=>{p||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",2))}}))}),xd(u=>{const p=new qX(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(p)}))}),LD(l=>{const u=p=>{const v=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(p.routeConfig).pipe(xd(x=>{p.component=x}),Ce(()=>{})));for(const x of p.children)v.push(...u(x));return v};return f3(u(l.targetSnapshot.root)).pipe($I(),$C(1))}),LD(()=>this.afterPreactivation()),Ce(l=>{const u=function iY(i,t,e){const n=Wx(i,t._root,e?e._root:void 0);return new V3(n,t)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:u}}),xd(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((i,t,e)=>Ce(n=>(new fY(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),xd({next(){s=!0},complete(){s=!0}}),cD(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Qm(l=>{if(o=!0,X3(l)){q3(l)||(this.navigated=!0,this.restoreHistory(r,!0));const u=new JI(r.id,this.serializeUrl(r.extractedUrl),l.message,l.cancellationCode);if(n.next(u),q3(l)){const p=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||vB(r.source)};this.scheduleNavigation(p,"imperative",null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const u=new N3(r.id,this.serializeUrl(r.extractedUrl),l,r.targetSnapshot??void 0);n.next(u);try{r.resolve(this.errorHandler(l))}catch(p){r.reject(p)}}return nl}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(r.state=l)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(SD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:l,preserveFragment:u}=n,p=r||this.routerState.root,v=u?this.currentUrlTree.fragment:o;let x=null;switch(l){case"merge":x={...this.currentUrlTree.queryParams,...s};break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=s||null}return null!==x&&(x=this.removeEmptyProps(x)),NX(p,this.currentUrlTree,e,x,v??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=h0(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(e,n={skipLocationChange:!1}){return function gK(i){for(let t=0;t<i.length;t++){if(null==i[t])throw new gi(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...dK}:!1===n?{...fK}:n,h0(e))return w3(this.currentUrlTree,e,r);const s=this.parseUrl(e);return w3(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new d0(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let l,u,p;o?(l=o.resolve,u=o.reject,p=o.promise):p=new Promise((I,M)=>{l=I,u=M});const v=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),x=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):x=0,this.setTransition({id:v,targetPageId:x,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:l,reject:u,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(I=>Promise.reject(I))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,n,r){const s=new JI(e.id,this.serializeUrl(e.extractedUrl),n,r);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){hx()},i.\u0275prov=Yi({token:i,factory:function(){return mB()},providedIn:"root"}),i})();function vB(i){return"imperative"!==i}let OD=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new nn,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const n=this.renderer,r=this.el.nativeElement;null!==e?n.setAttribute(r,"tabindex",e):n.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:jv(this.skipLocationChange),replaceUrl:jv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:jv(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Qt(wd),Qt(Jy),cd("tabindex"),Qt(d),Qt(qn))},i.\u0275dir=qr({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,n){1&e&&mn("click",function(){return n.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ya]}),i})(),QC=(()=>{class i{constructor(e,n,r){this.router=e,this.route=n,this.locationStrategy=r,this.commands=null,this.href=null,this.onChanges=new nn,this.subscription=e.events.subscribe(s=>{s instanceof d0&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,n,r,s,o){if(0!==e||n||r||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const l={skipLocationChange:jv(this.skipLocationChange),replaceUrl:jv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,l),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:jv(this.preserveFragment)})}}return i.\u0275fac=function(e){return new(e||i)(Qt(wd),Qt(Jy),Qt(a0))},i.\u0275dir=qr({type:i,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,n){1&e&&mn("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&vr("target",n.target)("href",n.href,$h)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ya]}),i})(),FD=(()=>{class i{constructor(e,n,r,s,o,l){this.router=e,this.element=n,this.renderer=r,this.cdr=s,this.link=o,this.linkWithHref=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new jn,this.routerEventsSubscription=e.events.subscribe(u=>{u instanceof d0&&this.update()})}ngAfterContentInit(){Wr(this.links.changes,this.linksWithHrefs.changes,Wr(null)).pipe(wc()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=sr(e).pipe(wc()).subscribe(n=>{this.isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){const n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(e))})}isLinkActive(e){const n=function mK(i){return!!i.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&e.isActive(r.urlTree,n)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return i.\u0275fac=function(e){return new(e||i)(Qt(wd),Qt(qn),Qt(d),Qt(Ho),Qt(OD,8),Qt(QC,8))},i.\u0275dir=qr({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(e,n,r){if(1&e&&(Ga(r,OD,5),Ga(r,QC,5)),2&e){let s;or(s=ar())&&(n.links=s),or(s=ar())&&(n.linksWithHrefs=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ya]}),i})();class yB{}let _B=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(pg(e=>e instanceof d0),Xv(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=yI(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,l=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(l,s.children??s._loadedRoutes))}return sr(r).pipe(wc())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):Wr(null);const s=r.pipe(fl(o=>null===o?Wr(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?sr([s,this.loader.loadComponent(n)]).pipe(wc()):s})}}return i.\u0275fac=function(e){return new(e||i)(Xn(wd),Xn(gM),Xn(Ke),Xn(yB),Xn(kD))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const CB=new Qi("");let vK=(()=>{class i{constructor(e,n,r={}){this.router=e,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof vD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof d0&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof B3&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.router.triggerEvent(new B3(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(e){hx()},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const bB=new Qi("ROUTER_FORROOT_GUARD"),xB=new Qi(""),yK=[DM,{provide:E3,useClass:hD},{provide:wd,useFactory:mB},jx,{provide:Jy,useFactory:function _K(i){return i.routerState.root},deps:[wd]},kD];function CK(){return new VF("Router",wd)}let t_=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[yK,[],wB(e),{provide:bB,useFactory:AK,deps:[[wd,new Tl,new ph]]},{provide:PD,useValue:n||{}},n?.useHash?{provide:a0,useClass:j7}:{provide:a0,useClass:hN},{provide:CB,useFactory:()=>{const i=ha(wd),t=ha(oq),e=ha(PD);return e.scrollOffset&&t.setOffset(e.scrollOffset),new vK(i,t,e)}},n?.preloadingStrategy?LK(n.preloadingStrategy):[],{provide:VF,multi:!0,useFactory:CK},n?.initialNavigation?SK(n):[],[{provide:AB,useFactory:IK},{provide:PF,multi:!0,useExisting:AB}]]}}static forChild(e){return{ngModule:i,providers:[wB(e)]}}}return i.\u0275fac=function(e){return new(e||i)(Xn(bB,8))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({}),i})();function AK(i){return"guarded"}function wB(i){return[{provide:RD,multi:!0,useValue:i}]}function IK(){const i=ha(Au);return t=>{const e=i.get(Rx);if(t!==e.components[0])return;const n=i.get(wd),r=i.get(IB);1===i.get(ND)&&n.initialNavigation(),i.get(xB,null,ns.Optional)?.setUpPreloading(),i.get(CB,null,ns.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.next(),r.complete()}}const AB=new Qi("");function SK(i){return["disabled"===i.initialNavigation?[{provide:Lx,multi:!0,useFactory:()=>{const i=ha(wd);return()=>{i.setUpLocationChangeListener()}}},{provide:ND,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:ND,useValue:0},{provide:Lx,multi:!0,deps:[Au],useFactory:i=>{const t=i.get(G7,Promise.resolve(null));let e=!1;return()=>t.then(()=>new Promise(r=>{const s=i.get(wd),o=i.get(IB);(function n(r){i.get(wd).events.pipe(pg(o=>o instanceof d0||o instanceof JI||o instanceof N3),Ce(o=>o instanceof d0||o instanceof JI&&(0===o.code||1===o.code)&&null),pg(o=>null!==o),$C(1)).subscribe(()=>{r()})})(()=>{r(!0),e=!0}),s.afterPreactivation=()=>(r(!0),e||o.closed?Wr(void 0):o),s.initialNavigation()}))}}]:[]]}const IB=new Qi("",{factory:()=>new nn}),ND=new Qi("",{providedIn:"root",factory:()=>1});function LK(i){return[_B,{provide:xB,useExisting:_B},{provide:yB,useExisting:i}]}var Qr=V(7489);class gr{static equals(t,e,n){return n?this.resolveFieldData(t,n)===this.resolveFieldData(e,n):this.equalsByValue(t,e)}static equalsByValue(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var s,o,l,n=Array.isArray(t),r=Array.isArray(e);if(n&&r){if((o=t.length)!=e.length)return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[s],e[s]))return!1;return!0}if(n!=r)return!1;var u=t instanceof Date,p=e instanceof Date;if(u!=p)return!1;if(u&&p)return t.getTime()==e.getTime();var v=t instanceof RegExp,x=e instanceof RegExp;if(v!=x)return!1;if(v&&x)return t.toString()==e.toString();var I=Object.keys(t);if((o=I.length)!==Object.keys(e).length)return!1;for(s=o;0!=s--;)if(!Object.prototype.hasOwnProperty.call(e,I[s]))return!1;for(s=o;0!=s--;)if(!this.equalsByValue(t[l=I[s]],e[l]))return!1;return!0}return t!=t&&e!=e}static resolveFieldData(t,e){if(t&&e){if(this.isFunction(e))return e(t);if(-1==e.indexOf("."))return t[e];{let n=e.split("."),r=t;for(let s=0,o=n.length;s<o;++s){if(null==r)return null;r=r[n[s]]}return r}}return null}static isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)}static reorderArray(t,e,n){t&&e!==n&&(n>=t.length&&(n%=t.length,e%=t.length),t.splice(n,0,t.splice(e,1)[0]))}static insertIntoOrderedArray(t,e,n,r){if(n.length>0){let s=!1;for(let o=0;o<n.length;o++)if(this.findIndexInList(n[o],r)>e){n.splice(o,0,t),s=!0;break}s||n.push(t)}else n.push(t)}static findIndexInList(t,e){let n=-1;if(e)for(let r=0;r<e.length;r++)if(e[r]==t){n=r;break}return n}static contains(t,e){if(null!=t&&e&&e.length)for(let n of e)if(this.equals(t,n))return!0;return!1}static removeAccents(t){return t&&t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}static isEmpty(t){return null==t||""===t||Array.isArray(t)&&0===t.length||!(t instanceof Date)&&"object"==typeof t&&0===Object.keys(t).length}static isNotEmpty(t){return!this.isEmpty(t)}}var SB=0;function Kx(){return"pr_id_"+ ++SB}var Ll=function PK(){let i=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,l)=>{o&&(o.style.zIndex=String(((s,o)=>{let l=i.length>0?i[i.length-1]:{key:s,value:o},u=l.value+(l.key===s?0:o)+1;return i.push({key:s,value:u}),u})(s,l)))},clear:s=>{s&&((s=>{i=i.filter(o=>o.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>i.length>0?i[i.length-1].value:0}}();const EB=["*"];let Zh=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.IN="in",i.LESS_THAN="lt",i.LESS_THAN_OR_EQUAL_TO="lte",i.GREATER_THAN="gt",i.GREATER_THAN_OR_EQUAL_TO="gte",i.BETWEEN="between",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.DATE_IS="dateIs",i.DATE_IS_NOT="dateIsNot",i.DATE_BEFORE="dateBefore",i.DATE_AFTER="dateAfter",i})(),Mp=(()=>{class i{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[Zh.STARTS_WITH,Zh.CONTAINS,Zh.NOT_CONTAINS,Zh.ENDS_WITH,Zh.EQUALS,Zh.NOT_EQUALS],numeric:[Zh.EQUALS,Zh.NOT_EQUALS,Zh.LESS_THAN,Zh.LESS_THAN_OR_EQUAL_TO,Zh.GREATER_THAN,Zh.GREATER_THAN_OR_EQUAL_TO],date:[Zh.DATE_IS,Zh.DATE_IS_NOT,Zh.DATE_BEFORE,Zh.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new nn,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Gc=(()=>{class i{}return i.STARTS_WITH="startsWith",i.CONTAINS="contains",i.NOT_CONTAINS="notContains",i.ENDS_WITH="endsWith",i.EQUALS="equals",i.NOT_EQUALS="notEquals",i.NO_FILTER="noFilter",i.LT="lt",i.LTE="lte",i.GT="gt",i.GTE="gte",i.IS="is",i.IS_NOT="isNot",i.BEFORE="before",i.AFTER="after",i.CLEAR="clear",i.APPLY="apply",i.MATCH_ALL="matchAll",i.MATCH_ANY="matchAny",i.ADD_RULE="addRule",i.REMOVE_RULE="removeRule",i.ACCEPT="accept",i.REJECT="reject",i.CHOOSE="choose",i.UPLOAD="upload",i.CANCEL="cancel",i.DAY_NAMES="dayNames",i.DAY_NAMES_SHORT="dayNamesShort",i.DAY_NAMES_MIN="dayNamesMin",i.MONTH_NAMES="monthNames",i.MONTH_NAMES_SHORT="monthNamesShort",i.FIRST_DAY_OF_WEEK="firstDayOfWeek",i.TODAY="today",i.WEEK_HEADER="weekHeader",i.WEAK="weak",i.MEDIUM="medium",i.STRONG="strong",i.PASSWORD_PROMPT="passwordPrompt",i.EMPTY_MESSAGE="emptyMessage",i.EMPTY_FILTER_MESSAGE="emptyFilterMessage",i})(),BD=(()=>{class i{constructor(){this.requireConfirmationSource=new nn,this.acceptConfirmationSource=new nn,this.requireConfirmation$=this.requireConfirmationSource.asObservable(),this.accept=this.acceptConfirmationSource.asObservable()}confirm(e){return this.requireConfirmationSource.next(e),this}close(){return this.requireConfirmationSource.next(null),this}onAccept(){this.acceptConfirmationSource.next(null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),d1=(()=>{class i{constructor(){this.filters={startsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=gr.removeAccents(n.toString()).toLocaleLowerCase(r);return gr.removeAccents(e.toString()).toLocaleLowerCase(r).slice(0,s.length)===s},contains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=gr.removeAccents(n.toString()).toLocaleLowerCase(r);return-1!==gr.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},notContains:(e,n,r)=>{if(null==n||"string"==typeof n&&""===n.trim())return!0;if(null==e)return!1;let s=gr.removeAccents(n.toString()).toLocaleLowerCase(r);return-1===gr.removeAccents(e.toString()).toLocaleLowerCase(r).indexOf(s)},endsWith:(e,n,r)=>{if(null==n||""===n.trim())return!0;if(null==e)return!1;let s=gr.removeAccents(n.toString()).toLocaleLowerCase(r),o=gr.removeAccents(e.toString()).toLocaleLowerCase(r);return-1!==o.indexOf(s,o.length-s.length)},equals:(e,n,r)=>null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():gr.removeAccents(e.toString()).toLocaleLowerCase(r)==gr.removeAccents(n.toString()).toLocaleLowerCase(r)),notEquals:(e,n,r)=>!(null==n||"string"==typeof n&&""===n.trim()||null!=e&&(e.getTime&&n.getTime?e.getTime()===n.getTime():gr.removeAccents(e.toString()).toLocaleLowerCase(r)==gr.removeAccents(n.toString()).toLocaleLowerCase(r))),in:(e,n)=>{if(null==n||0===n.length)return!0;for(let r=0;r<n.length;r++)if(gr.equals(e,n[r]))return!0;return!1},between:(e,n)=>null==n||null==n[0]||null==n[1]||null!=e&&(e.getTime?n[0].getTime()<=e.getTime()&&e.getTime()<=n[1].getTime():n[0]<=e&&e<=n[1]),lt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<n.getTime():e<n),lte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()<=n.getTime():e<=n),gt:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>n.getTime():e>n),gte:(e,n,r)=>null==n||null!=e&&(e.getTime&&n.getTime?e.getTime()>=n.getTime():e>=n),is:(e,n,r)=>this.filters.equals(e,n,r),isNot:(e,n,r)=>this.filters.notEquals(e,n,r),before:(e,n,r)=>this.filters.lt(e,n,r),after:(e,n,r)=>this.filters.gt(e,n,r),dateIs:(e,n)=>null==n||null!=e&&e.toDateString()===n.toDateString(),dateIsNot:(e,n)=>null==n||null!=e&&e.toDateString()!==n.toDateString(),dateBefore:(e,n)=>null==n||null!=e&&e.getTime()<n.getTime(),dateAfter:(e,n)=>null==n||null!=e&&e.getTime()>n.getTime()}}filter(e,n,r,s,o){let l=[];if(e)for(let u of e)for(let p of n){let v=gr.resolveFieldData(u,p);if(this.filters[s](v,r,o)){l.push(u);break}}return l}register(e,n){this.filters[e]=n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),TB=(()=>{class i{constructor(){this.activeItemKeyChange=new nn,this.activeItemKeyChange$=this.activeItemKeyChange.asObservable()}changeKey(e){this.activeItemKey=e,this.activeItemKeyChange.next(this.activeItemKey)}reset(){this.activeItemKey=null,this.activeItemKeyChange.next(this.activeItemKey)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),Jv=(()=>{class i{constructor(){this.messageSource=new nn,this.clearSource=new nn,this.messageObserver=this.messageSource.asObservable(),this.clearObserver=this.clearSource.asObservable()}add(e){e&&this.messageSource.next(e)}addAll(e){e&&e.length&&this.messageSource.next(e)}clear(e){this.clearSource.next(e||null)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),Zx=(()=>{class i{constructor(){this.clickSource=new nn,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),MB=(()=>{class i{}return i.AND="and",i.OR="or",i})(),zD=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ar({type:i,selectors:[["p-header"]],ngContentSelectors:EB,decls:1,vars:0,template:function(e,n){1&e&&(Ff(),nu(0))},encapsulation:2}),i})(),f1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ar({type:i,selectors:[["p-footer"]],ngContentSelectors:EB,decls:1,vars:0,template:function(e,n){1&e&&(Ff(),nu(0))},encapsulation:2}),i})(),_l=(()=>{class i{constructor(e){this.template=e}getType(){return this.name}}return i.\u0275fac=function(e){return new(e||i)(Qt(am))},i.\u0275dir=qr({type:i,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),i})(),Na=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})(),RK=(()=>{class i{constructor(){this.dragStartSource=new nn,this.dragStopSource=new nn,this.dragStart$=this.dragStartSource.asObservable(),this.dragStop$=this.dragStopSource.asObservable()}startDrag(e){this.dragStartSource.next(e)}stopDrag(e){this.dragStopSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class kK extends W{constructor(t,e){super()}schedule(t,e=0){return this}}const p1={setInterval(i,t,...e){const{delegate:n}=p1;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=p1;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class DB extends kK{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return p1.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;p1.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,B(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const VD={now:()=>(VD.delegate||Date).now(),delegate:void 0};class Qx{constructor(t,e=Qx.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}Qx.now=VD.now;class LB extends Qx{constructor(t,e=Qx.now){super(t,e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const NK=new class FK extends LB{}(class OK extends DB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!=n&&n>0||null==n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});function PB(i,t=He){return i=i??VK,bn((e,n)=>{let r,s=!0;e.subscribe(yn(n,o=>{const l=t(o);(s||!i(r,l))&&(s=!1,r=l,n.next(o))}))})}function VK(i,t){return i===t}const Jx={};function ew(i,t){if(Jx[i]=(Jx[i]||0)+1,"function"==typeof t)return UD(i,(...n)=>({...t(...n),type:i}));switch(t?t._as:"empty"){case"empty":return UD(i,()=>({type:i}));case"props":return UD(i,n=>({...n,type:i}));default:throw new Error("Unexpected config.")}}function UD(i,t){return Object.defineProperty(t,"type",{value:i,writable:!1})}const RB="@ngrx/store/init";let JC=(()=>{class i extends zf{constructor(){super({type:RB})}next(e){if("function"==typeof e)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof e>"u")throw new TypeError("Actions must be objects");if(typeof e.type>"u")throw new TypeError("Actions must have a type property");super.next(e)}complete(){}ngOnDestroy(){super.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const GK=[JC],kB=new Qi("@ngrx/store Internal Root Guard"),OB=new Qi("@ngrx/store Internal Initial State"),GD=new Qi("@ngrx/store Initial State"),FB=new Qi("@ngrx/store Reducer Factory"),NB=new Qi("@ngrx/store Internal Reducer Factory Provider"),BB=new Qi("@ngrx/store Initial Reducers"),WD=new Qi("@ngrx/store Internal Initial Reducers"),zB=new Qi("@ngrx/store Store Features"),VB=new Qi("@ngrx/store Internal Store Reducers"),jD=new Qi("@ngrx/store Internal Feature Reducers"),UB=new Qi("@ngrx/store Internal Feature Configs"),HB=new Qi("@ngrx/store Internal Store Features"),GB=new Qi("@ngrx/store Internal Feature Reducers Token"),WB=new Qi("@ngrx/store Feature Reducers"),jB=new Qi("@ngrx/store User Provided Meta Reducers"),g1=new Qi("@ngrx/store Meta Reducers"),$B=new Qi("@ngrx/store Internal Resolved Meta Reducers"),qB=new Qi("@ngrx/store User Runtime Checks Config"),XB=new Qi("@ngrx/store Internal User Runtime Checks Config"),nw=new Qi("@ngrx/store Internal Runtime Checks"),$D=new Qi("@ngrx/store Check if Action types are unique");function qD(i,t={}){const e=Object.keys(i),n={};for(let s=0;s<e.length;s++){const o=e[s];"function"==typeof i[o]&&(n[o]=i[o])}const r=Object.keys(n);return function(o,l){o=void 0===o?t:o;let u=!1;const p={};for(let v=0;v<r.length;v++){const x=r[v],M=o[x],F=(0,n[x])(M,l);p[x]=F,u=u||F!==M}return u?p:o}}function YB(...i){return function(t){if(0===i.length)return t;const e=i[i.length-1];return i.slice(0,-1).reduceRight((r,s)=>s(r),e(t))}}function KB(i,t){return Array.isArray(t)&&t.length>0&&(i=YB.apply(null,[...t,i])),(e,n)=>{const r=i(e);return(s,o)=>r(s=void 0===s?n:s,o)}}class XD extends Ct{}class ZB extends JC{}let m1=(()=>{class i extends zf{constructor(e,n,r,s){super(s(r,n)),this.dispatcher=e,this.initialState=n,this.reducers=r,this.reducerFactory=s}get currentReducers(){return this.reducers}addFeature(e){this.addFeatures([e])}addFeatures(e){const n=e.reduce((r,{reducers:s,reducerFactory:o,metaReducers:l,initialState:u,key:p})=>{const v="function"==typeof s?function jK(i){const t=Array.isArray(i)&&i.length>0?YB(...i):e=>e;return(e,n)=>(e=t(e),(r,s)=>e(r=void 0===r?n:r,s))}(l)(s,u):KB(o,l)(s,u);return r[p]=v,r},{});this.addReducers(n)}removeFeature(e){this.removeFeatures([e])}removeFeatures(e){this.removeReducers(e.map(n=>n.key))}addReducer(e,n){this.addReducers({[e]:n})}addReducers(e){this.reducers={...this.reducers,...e},this.updateReducers(Object.keys(e))}removeReducer(e){this.removeReducers([e])}removeReducers(e){e.forEach(n=>{this.reducers=function WK(i,t){return Object.keys(i).filter(e=>e!==t).reduce((e,n)=>Object.assign(e,{[n]:i[n]}),{})}(this.reducers,n)}),this.updateReducers(e)}updateReducers(e){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:"@ngrx/store/update-reducers",features:e})}ngOnDestroy(){this.complete()}}return i.\u0275fac=function(e){return new(e||i)(Xn(ZB),Xn(GD),Xn(BB),Xn(FB))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const qK=[m1,{provide:XD,useExisting:m1},{provide:ZB,useExisting:JC}];let YD=(()=>{class i extends nn{ngOnDestroy(){this.complete()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=zo(i)))(n||i)}}(),i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const XK=[YD];class QB extends Ct{}let JB=(()=>{class i extends zf{constructor(e,n,r,s){super(s);const l=e.pipe($e(NK)).pipe(function BK(...i){const t=Ye(i);return bn((e,n)=>{const r=i.length,s=new Array(r);let o=i.map(()=>!1),l=!1;for(let u=0;u<r;u++)dl(i[u]).subscribe(yn(n,p=>{s[u]=p,!l&&!o[u]&&(o[u]=!0,(l=o.every(He))&&(o=null))},se));e.subscribe(yn(n,u=>{if(l){const p=[u,...s];n.next(t?t(...p):p)}}))})}(n)),p=l.pipe(aD(YK,{state:s}));this.stateSubscription=p.subscribe(({state:v,action:x})=>{this.next(v),r.next(x)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return i.INIT=RB,i.\u0275fac=function(e){return new(e||i)(Xn(JC),Xn(XD),Xn(YD),Xn(GD))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();function YK(i={state:void 0},[t,e]){const{state:n}=i;return{state:e(n,t),action:t}}const KK=[JB,{provide:QB,useExisting:JB}];let f0=(()=>{class i extends Ct{constructor(e,n,r){super(),this.actionsObserver=n,this.reducerManager=r,this.source=e}select(e,...n){return QK.call(null,e,...n)(this)}lift(e){const n=new i(this,this.actionsObserver,this.reducerManager);return n.operator=e,n}dispatch(e){this.actionsObserver.next(e)}next(e){this.actionsObserver.next(e)}error(e){this.actionsObserver.error(e)}complete(){this.actionsObserver.complete()}addReducer(e,n){this.reducerManager.addReducer(e,n)}removeReducer(e){this.reducerManager.removeReducer(e)}}return i.\u0275fac=function(e){return new(e||i)(Xn(QB),Xn(JC),Xn(m1))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const ZK=[f0];function QK(i,t,...e){return function(r){let s;if("string"==typeof i){const o=[t,...e].filter(Boolean);s=r.pipe(function zK(...i){const t=i.length;if(0===t)throw new Error("list of properties cannot be empty.");return Ce(e=>{let n=e;for(let r=0;r<t;r++){const s=n?.[i[r]];if(!(typeof s<"u"))return;n=s}return n})}(i,...o))}else{if("function"!=typeof i)throw new TypeError(`Unexpected type '${typeof i}' in select operator, expected 'string' or 'function'`);s=r.pipe(Ce(o=>i(o,t)))}return s.pipe(PB())}}const KD="https://ngrx.io/guide/store/configuration/runtime-checks";function ez(i){return void 0===i}function tz(i){return null===i}function nz(i){return Array.isArray(i)}function iz(i){return"object"==typeof i&&null!==i}function ZD(i){return"function"==typeof i}function QD(i,t){return i===t}function oZ(i,t,e){for(let n=0;n<i.length;n++)if(!e(i[n],t[n]))return!0;return!1}function JD(i,t=QD,e=QD){let s,n=null,r=null;return{memoized:function p(){if(void 0!==s)return s.result;if(!n)return r=i.apply(null,arguments),n=arguments,r;if(!oZ(arguments,n,t))return r;const v=i.apply(null,arguments);return n=arguments,e(r,v)?r:(r=v,v)},reset:function o(){n=null,r=null},setResult:function l(v){s={result:v}},clearResult:function u(){s=void 0}}}function aZ(i,t,e,n){if(void 0===e){const s=t.map(o=>o(i));return n.memoized.apply(null,s)}const r=t.map(s=>s(i,e));return n.memoized.apply(null,[...r,e])}function v1(i){return function oz(...i){return function lZ(i,t={stateFn:aZ}){return function(...e){let n=e;if(Array.isArray(n[0])){const[v,...x]=n;n=[...v,...x]}const r=n.slice(0,n.length-1),s=n[n.length-1],o=r.filter(v=>v.release&&"function"==typeof v.release),l=i(function(...v){return s.apply(null,v)}),u=JD(function(v,x){return t.stateFn.apply(null,[v,r,x,l])});return Object.assign(u.memoized,{release:function p(){u.reset(),l.reset(),o.forEach(v=>v.release())},projector:l.memoized,setResult:u.setResult,clearResult:u.clearResult})}}(JD)(...i)}(t=>{const e=t[i];return ZF()&&!(i in t)&&console.warn(`@ngrx/store: The feature name "${i}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${i}', ...) or StoreModule.forFeature('${i}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),e},t=>t)}function e2(i){Object.freeze(i);const t=ZD(i);return Object.getOwnPropertyNames(i).forEach(e=>{if(!e.startsWith("\u0275")&&function rZ(i,t){return Object.prototype.hasOwnProperty.call(i,t)}(i,e)&&(!t||"caller"!==e&&"callee"!==e&&"arguments"!==e)){const n=i[e];(iz(n)||ZD(n))&&!Object.isFrozen(n)&&e2(n)}}),i}function t2(i,t=[]){return(ez(i)||tz(i))&&0===t.length?{path:["root"],value:i}:Object.keys(i).reduce((n,r)=>{if(n)return n;const s=i[r];return function iZ(i){return ZD(i)&&i.hasOwnProperty("\u0275cmp")}(s)?n:!(ez(s)||tz(s)||function tZ(i){return"number"==typeof i}(s)||function eZ(i){return"boolean"==typeof i}(s)||function JK(i){return"string"==typeof i}(s)||nz(s))&&(function rz(i){if(!function nZ(i){return iz(i)&&!nz(i)}(i))return!1;const t=Object.getPrototypeOf(i);return t===Object.prototype||null===t}(s)?t2(s,[...t,r]):{path:[...t,r],value:s})},!1)}function az(i,t){if(!1===i)return;const e=i.path.join("."),n=new Error(`Detected unserializable ${t} at "${e}". ${KD}#strict${t}serializability`);throw n.value=i.value,n.unserializablePath=e,n}function pZ(i){return ZF()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...i}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function gZ({strictActionSerializability:i,strictStateSerializability:t}){return e=>i||t?function dZ(i,t){return function(e,n){t.action(n)&&az(t2(n),"action");const r=i(e,n);return t.state()&&az(t2(r),"state"),r}}(e,{action:n=>i&&!n2(n),state:()=>t}):e}function mZ({strictActionImmutability:i,strictStateImmutability:t}){return e=>i||t?function hZ(i,t){return function(e,n){const r=t.action(n)?e2(n):n,s=i(e,r);return t.state()?e2(s):s}}(e,{action:n=>i&&!n2(n),state:()=>t}):e}function n2(i){return i.type.startsWith("@ngrx")}function vZ({strictActionWithinNgZone:i}){return t=>i?function fZ(i,t){return function(e,n){if(t.action(n)&&!Yo.isInAngularZone())throw new Error(`Action '${n.type}' running outside NgZone. ${KD}#strictactionwithinngzone`);return i(e,n)}}(t,{action:e=>i&&!n2(e)}):t}function yZ(i){return[{provide:XB,useValue:i},{provide:qB,useFactory:_Z,deps:[XB]},{provide:nw,deps:[qB],useFactory:pZ},{provide:g1,multi:!0,deps:[nw],useFactory:mZ},{provide:g1,multi:!0,deps:[nw],useFactory:gZ},{provide:g1,multi:!0,deps:[nw],useFactory:vZ}]}function lz(){return[{provide:$D,multi:!0,deps:[nw],useFactory:CZ}]}function _Z(i){return i}function CZ(i){if(!i.strictActionTypeUniqueness)return;const t=Object.entries(Jx).filter(([,e])=>e>1).map(([e])=>e);if(t.length)throw new Error(`Action types are registered more than once, ${t.map(e=>`"${e}"`).join(", ")}. ${KD}#strictactiontypeuniqueness`)}let cz=(()=>{class i{constructor(e,n,r,s,o,l){}}return i.\u0275fac=function(e){return new(e||i)(Xn(JC),Xn(XD),Xn(YD),Xn(f0),Xn(kB,8),Xn($D,8))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({}),i})(),bZ=(()=>{class i{constructor(e,n,r,s,o){this.features=e,this.featureReducers=n,this.reducerManager=r;const l=e.map((u,p)=>{const x=n.shift()[p];return{...u,reducers:x,initialState:uz(u.initialState)}});r.addFeatures(l)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return i.\u0275fac=function(e){return new(e||i)(Xn(HB),Xn(WB),Xn(m1),Xn(cz),Xn($D,8))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({}),i})(),xZ=(()=>{class i{static forRoot(e,n={}){return{ngModule:cz,providers:[{provide:kB,useFactory:EZ,deps:[[f0,new Tl,new ph]]},{provide:OB,useValue:n.initialState},{provide:GD,useFactory:uz,deps:[OB]},{provide:WD,useValue:e},{provide:VB,useExisting:e instanceof Qi?e:WD},{provide:BB,deps:[Au,WD,[new Hu(VB)]],useFactory:wZ},{provide:jB,useValue:n.metaReducers?n.metaReducers:[]},{provide:$B,deps:[g1,jB],useFactory:SZ},{provide:NB,useValue:n.reducerFactory?n.reducerFactory:qD},{provide:FB,deps:[NB,$B],useFactory:KB},GK,qK,XK,KK,ZK,yZ(n.runtimeChecks),lz()]}}static forFeature(e,n,r={}){return{ngModule:bZ,providers:[{provide:UB,multi:!0,useValue:e instanceof Object?{}:r},{provide:zB,multi:!0,useValue:{key:e instanceof Object?e.name:e,reducerFactory:r instanceof Qi||!r.reducerFactory?qD:r.reducerFactory,metaReducers:r instanceof Qi||!r.metaReducers?[]:r.metaReducers,initialState:r instanceof Qi||!r.initialState?void 0:r.initialState}},{provide:HB,deps:[Au,UB,zB],useFactory:AZ},{provide:jD,multi:!0,useValue:e instanceof Object?e.reducer:n},{provide:GB,multi:!0,useExisting:n instanceof Qi?n:jD},{provide:WB,multi:!0,deps:[Au,jD,[new Hu(GB)]],useFactory:IZ},lz()]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({}),i})();function wZ(i,t){return t instanceof Qi?i.get(t):t}function AZ(i,t,e){return e.map((n,r)=>{if(t[r]instanceof Qi){const s=i.get(t[r]);return{key:n.key,reducerFactory:s.reducerFactory?s.reducerFactory:qD,metaReducers:s.metaReducers?s.metaReducers:[],initialState:s.initialState}}return n})}function IZ(i,t){return t.map(n=>n instanceof Qi?i.get(n):n)}function uz(i){return"function"==typeof i?i():i}function SZ(i,t){return i.concat(t)}function EZ(i){if(i)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function y1(...i){return{reducer:i.pop(),types:i.map(n=>n.type)}}function _1(i,...t){const e=new Map;for(const n of t)for(const r of n.types){const s=e.get(r);e.set(r,s?(l,u)=>n.reducer(s(l,u),u):n.reducer)}return function(n=i,r){const s=e.get(r.type);return s?s(n,r):n}}const iw=ew("[SysGraph List/API] Retrieve Graphs Success",{_as:"props",_p:void 0}),C1=ew("[SysGraph List/API] Retrieve Graph Success",{_as:"props",_p:void 0}),r2=v1("graphs"),s2=v1("graph"),MZ=new LB(DB);class RZ extends nn{constructor(t=1/0,e=1/0,n=VD){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;e||(n.push(t),!r&&n.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!t.closed;o+=n?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<n.length&&n.splice(0,n.length-s),!r){const o=e.now();let l=0;for(let u=1;u<n.length&&n[u]<=o;u+=2)l=u;l&&n.splice(0,l+1)}}}function o2(i,t,e){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=i):n=i??1/0,bo({connector:()=>new RZ(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}var hz={},dz={};function kZ(i){for(var t=[],e=0,n=0,r=0;r<i.length;r+=1){var s=hz[i[r]];if(void 0===s)throw new Error("Invalid character ("+i[r]+")");var o=32&s;if(n+=(s&=31)<<e,o)e+=5;else{var l=1&n;n>>>=1,t.push(l?0===n?-2147483648:-n:n),n=e=0}}return t}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(function(i,t){hz[i]=t,dz[t]=i});const b1="TOKEN_LOGGER_CONFIG";class OZ{constructor(t){this.config=this._clone(t)}get level(){return this.config.level}get serverLogLevel(){return this.config.serverLogLevel}updateConfig(t){this.config=this._clone(t)}partialUpdateConfig(t){!t||Object.keys(t).forEach(e=>{this.config[e]=t[e]})}getConfig(){return this._clone(this.config)}_clone(t){const e={level:null};return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}}const rw="TOKEN_LOGGER_CONFIG_ENGINE_FACTORY";class FZ{provideConfigEngine(t){return new OZ(t)}}const sw="TOKEN_LOGGER_MAPPER_SERVICE";let NZ=(()=>{class i{constructor(e){this.httpBackend=e,this.sourceMapCache=new Map,this.logPositionCache=new Map}getLogPosition(e,n){const r=this.getStackLine(e);if(!r)return Wr({fileName:"",lineNumber:0,columnNumber:0});const s=this.getLocalPosition(r);if(!e.enableSourceMaps)return Wr(s);const o=this.getSourceMapLocation(r);return this.getSourceMap(o,s)}getStackLine(e){const n=new Error;try{throw n}catch{try{let s=4;return n.stack.split("\n")[0].includes(".js:")||(s+=1),n.stack.split("\n")[s+(e.proxiedSteps||0)]}catch{return null}}}getLocalPosition(e){const n=e.lastIndexOf("/");let r=e.indexOf(")");r<0&&(r=void 0);const o=e.substring(n+1,r).split(":");return 3===o.length?{fileName:o[0],lineNumber:+o[1],columnNumber:+o[2]}:{fileName:"unknown",lineNumber:0,columnNumber:0}}getTranspileLocation(e){let n=e.indexOf("(");n<0&&(n=e.lastIndexOf("@"),n<0&&(n=e.lastIndexOf(" ")));let r=e.indexOf(")");return r<0&&(r=void 0),e.substring(n+1,r)}getSourceMapLocation(e){const n=this.getTranspileLocation(e),r=n.substring(0,n.lastIndexOf(":"));return r.substring(0,r.lastIndexOf(":"))+".map"}getMapping(e,n){let r=0,s=0,o=0;const l=e.mappings.split(";");for(let u=0;u<l.length;u++){let p=0;const v=l[u].split(",");for(let x=0;x<v.length;x++){const I=kZ(v[x]);if(I.length>=4&&(p+=I[0],r+=I[1],s+=I[2],o+=I[3]),u===n.lineNumber){if(p===n.columnNumber)return{fileName:e.sources[r],lineNumber:s,columnNumber:o};if(x+1===v.length)return{fileName:e.sources[r],lineNumber:s,columnNumber:0}}}}return{fileName:"unknown",lineNumber:0,columnNumber:0}}getSourceMap(e,n){const r=new l0("GET",e),s=`${n.fileName}:${n.lineNumber}:${n.columnNumber}`;if(this.logPositionCache.has(s))return this.logPositionCache.get(s);this.sourceMapCache.has(e)||(this.httpBackend?this.sourceMapCache.set(e,this.httpBackend.handle(r).pipe(pg(l=>l instanceof WC),Ce(l=>l.body),function PZ(i=1/0){let t;t=i&&"object"==typeof i?i:{count:i};const{count:e=1/0,delay:n,resetOnSuccess:r=!1}=t;return e<=0?He:bn((s,o)=>{let u,l=0;const p=()=>{let v=!1;u=s.subscribe(yn(o,x=>{r&&(l=0),o.next(x)},void 0,x=>{if(l++<e){const I=()=>{u?(u.unsubscribe(),u=null,p()):v=!0};if(null!=n){const M="number"==typeof n?function LZ(i=0,t,e=MZ){let n=-1;return null!=t&&(Ge(t)?e=t:n=t),new Ct(r=>{let s=function DZ(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}(n):dl(n(x,l)),F=yn(o,()=>{F.unsubscribe(),I()},()=>{o.complete()});M.subscribe(F)}else I()}else o.error(x)})),v&&(u.unsubscribe(),u=null,p())};p()})}(3),o2(1))):(console.error("NGXLogger : Can't get sourcemap because HttpBackend is not provided. You need to import HttpClientModule"),this.sourceMapCache.set(e,Wr(null))));const o=this.sourceMapCache.get(e).pipe(Ce(l=>l?this.getMapping(l,n):n),Qm(()=>Wr(n)),o2(1));return this.logPositionCache.set(s,o),o}}return i.\u0275fac=function(e){return new(e||i)(Xn(GI,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const ow="TOKEN_LOGGER_METADATA_SERVICE";let BZ=(()=>{class i{constructor(e){this.datePipe=e}computeTimestamp(e){const n=()=>(new Date).toISOString();return e.timestampFormat?this.datePipe?this.datePipe.transform(new Date,e.timestampFormat):(console.error("NGXLogger : Can't use timeStampFormat because DatePipe is not provided. You need to provide DatePipe"),n()):n()}getMetadata(e,n,r,s){const o={level:e,additional:s};return o.message=r&&"function"==typeof r?r():r,o.timestamp=this.computeTimestamp(n),o}}return i.\u0275fac=function(e){return new(e||i)(Xn(EN,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const aw="TOKEN_LOGGER_RULES_SERVICE";let zZ=(()=>{class i{shouldCallWriter(e,n,r,s){return!n.disableConsoleLogging&&e>=n.level}shouldCallServer(e,n,r,s){return!!n.serverLoggingUrl&&e>=n.serverLogLevel}shouldCallMonitor(e,n,r,s){return this.shouldCallWriter(e,n,r,s)||this.shouldCallServer(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const lw="TOKEN_LOGGER_SERVER_SERVICE";let VZ=(()=>{class i{constructor(e){this.httpBackend=e}secureErrorObject(e){return e?.stack}secureAdditionalParameters(e){return null==e?null:e.map((n,r)=>{try{return n instanceof Error?this.secureErrorObject(n):("object"==typeof n&&JSON.stringify(n),n)}catch{return`The additional[${r}] value could not be parsed using JSON.stringify().`}})}secureMessage(e){try{if(e instanceof Error)return this.secureErrorObject(e);"string"!=typeof e&&(e=JSON.stringify(e,null,2))}catch{e='The provided "message" value could not be parsed with JSON.stringify().'}return e}alterHttpRequest(e){return e}logOnServer(e,n,r){if(!this.httpBackend)return console.error("NGXLogger : Can't log on server because HttpBackend is not provided. You need to import HttpClientModule"),Wr(null);let s=new l0("POST",e,n,r||{}),o=Wr(s);const l=this.alterHttpRequest(s);return function TZ(i){return!!i&&(i instanceof Ct||Y(i.lift)&&Y(i.subscribe))}(l)?o=l:l?o=Wr(l):console.warn("NGXLogger : alterHttpRequest returned an invalid request. Using default one instead"),o.pipe(Xv(u=>u?this.httpBackend.handle(u):(console.warn("NGXLogger : alterHttpRequest returned an invalid request (observable). Using default one instead"),this.httpBackend.handle(s))),pg(u=>u instanceof WC),Ce(u=>u.body))}customiseRequestBody(e){return e}sendToServer(e,n){const r={...e};r.additional=this.secureAdditionalParameters(r.additional),r.message=this.secureMessage(r.message);const s=this.customiseRequestBody(r),o=n.customHttpHeaders||new Zm;o.has("Content-Type")||o.set("Content-Type","application/json"),this.logOnServer(n.serverLoggingUrl,s,{headers:o,params:n.customHttpParams||new Yv,responseType:n.httpResponseType||"json",withCredentials:n.withCredentials||!1}).pipe(Qm(l=>(console.error("NGXLogger: Failed to log on server",l),jC(l)))).subscribe()}}return i.\u0275fac=function(e){return new(e||i)(Xn(GI,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();const cw="TOKEN_LOGGER_WRITER_SERVICE";var Wc=(()=>{return(i=Wc||(Wc={}))[i.TRACE=0]="TRACE",i[i.DEBUG=1]="DEBUG",i[i.INFO=2]="INFO",i[i.LOG=3]="LOG",i[i.WARN=4]="WARN",i[i.ERROR=5]="ERROR",i[i.FATAL=6]="FATAL",i[i.OFF=7]="OFF",Wc;var i})();const UZ=["purple","teal","gray","gray","red","red","red"];let HZ=(()=>{class i{constructor(e){this.platformId=e,this.prepareMetaStringFuncs=[this.getTimestampToWrite,this.getLevelToWrite,this.getFileDetailsToWrite,this.getContextToWrite],this.isIE=WM(e)&&navigator&&navigator.userAgent&&!(-1===navigator.userAgent.indexOf("MSIE")&&!navigator.userAgent.match(/Trident\//)&&!navigator.userAgent.match(/Edge\//)),this.logFunc=this.isIE?this.logIE.bind(this):this.logModern.bind(this)}getTimestampToWrite(e,n){return e.timestamp}getLevelToWrite(e,n){return Wc[e.level]}getFileDetailsToWrite(e,n){return!0===n.disableFileDetails?"":`[${e.fileName}:${e.lineNumber}:${e.columnNumber}]`}getContextToWrite(e,n){return n.context?`{${n.context}}`:""}prepareMetaString(e,n){let r="";return this.prepareMetaStringFuncs.forEach(s=>{const o=s(e,n);o&&(r=r+" "+o)}),r.trim()}getColor(e,n){if(e.level!==Wc.OFF)return(n.colorScheme??UZ)[e.level]}logIE(e,n,r){const s=e.additional||[];switch(e.level){case Wc.WARN:console.warn(`${r} `,e.message,...s);break;case Wc.ERROR:case Wc.FATAL:console.error(`${r} `,e.message,...s);break;case Wc.INFO:console.info(`${r} `,e.message,...s);break;default:console.log(`${r} `,e.message,...s)}}logModern(e,n,r){const s=this.getColor(e,n),o=e.additional||[];switch(e.level){case Wc.WARN:console.warn(`%c${r}`,`color:${s}`,e.message,...o);break;case Wc.ERROR:case Wc.FATAL:console.error(`%c${r}`,`color:${s}`,e.message,...o);break;case Wc.INFO:console.info(`%c${r}`,`color:${s}`,e.message,...o);break;case Wc.DEBUG:console.debug(`%c${r}`,`color:${s}`,e.message,...o);break;default:console.log(`%c${r}`,`color:${s}`,e.message,...o)}}writeMessage(e,n){const r=this.prepareMetaString(e,n);this.logFunc(e,n,r)}}return i.\u0275fac=function(e){return new(e||i)(Xn(GC))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),dm=(()=>{class i{constructor(e,n,r,s,o,l,u){this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u,this.configEngine=n.provideConfigEngine(e)}get level(){return this.configEngine.level}get serverLogLevel(){return this.configEngine.serverLogLevel}trace(e,...n){this._log(Wc.TRACE,e,n)}debug(e,...n){this._log(Wc.DEBUG,e,n)}info(e,...n){this._log(Wc.INFO,e,n)}log(e,...n){this._log(Wc.LOG,e,n)}warn(e,...n){this._log(Wc.WARN,e,n)}error(e,...n){this._log(Wc.ERROR,e,n)}fatal(e,...n){this._log(Wc.FATAL,e,n)}setCustomHttpHeaders(e){const n=this.getConfigSnapshot();n.customHttpHeaders=e,this.updateConfig(n)}setCustomParams(e){const n=this.getConfigSnapshot();n.customHttpParams=e,this.updateConfig(n)}setWithCredentialsOptionValue(e){const n=this.getConfigSnapshot();n.withCredentials=e,this.updateConfig(n)}registerMonitor(e){this._loggerMonitor=e}updateConfig(e){this.configEngine.updateConfig(e)}partialUpdateConfig(e){this.configEngine.partialUpdateConfig(e)}getConfigSnapshot(){return this.configEngine.getConfig()}_log(e,n,r=[]){const s=this.configEngine.getConfig(),o=this.ruleService.shouldCallWriter(e,s,n,r),l=this.ruleService.shouldCallServer(e,s,n,r),u=this.ruleService.shouldCallMonitor(e,s,n,r);if(!o&&!l&&!u)return;const p=this.metadataService.getMetadata(e,s,n,r);this.mapperService.getLogPosition(s,p).pipe($C(1)).subscribe(v=>{v&&(p.fileName=v.fileName,p.lineNumber=v.lineNumber,p.columnNumber=v.columnNumber),u&&this._loggerMonitor&&this._loggerMonitor.onLog(p,s),o&&this.writerService.writeMessage(p,s),l&&this.serverService.sendToServer(p,s)})}}return i.\u0275fac=function(e){return new(e||i)(Xn(b1),Xn(rw),Xn(ow),Xn(aw),Xn(sw),Xn(cw),Xn(lw))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),GZ=(()=>{class i{constructor(e,n,r,s,o,l,u){this.logger=e,this.configEngineFactory=n,this.metadataService=r,this.ruleService=s,this.mapperService=o,this.writerService=l,this.serverService=u}create(e,n,r,s){return this.getNewInstance({config:e,serverService:n,logMonitor:r,mapperService:s})}getNewInstance(e){const n=new dm(e?.config??this.logger.getConfigSnapshot(),e?.configEngineFactory??this.configEngineFactory,e?.metadataService??this.metadataService,e?.ruleService??this.ruleService,e?.mapperService??this.mapperService,e?.writerService??this.writerService,e?.serverService??this.serverService);return e?.partialConfig&&n.partialUpdateConfig(e.partialConfig),e?.logMonitor&&n.registerMonitor(e.logMonitor),n}}return i.\u0275fac=function(e){return new(e||i)(Xn(dm),Xn(rw),Xn(ow),Xn(aw),Xn(sw),Xn(cw),Xn(lw))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),WZ=(()=>{class i{static forRoot(e,n){if(n||(n={}),n.configProvider){if(n.configProvider.provide!==b1)throw new Error(`Wrong injection token for configProvider, it should be ${b1} and you used ${n.configProvider.provide}`)}else n.configProvider={provide:b1,useValue:e||{}};if(n.configEngineFactoryProvider){if(n.configEngineFactoryProvider.provide!==rw)throw new Error(`Wrong injection token for configEngineFactoryProvider, it should be '${rw}' and you used '${n.configEngineFactoryProvider.provide}'`)}else n.configEngineFactoryProvider={provide:rw,useClass:FZ};if(n.metadataProvider){if(n.metadataProvider.provide!==ow)throw new Error(`Wrong injection token for metadataProvider, it should be '${ow}' and you used '${n.metadataProvider.provide}'`)}else n.metadataProvider={provide:ow,useClass:BZ};if(n.ruleProvider){if(n.ruleProvider.provide!==aw)throw new Error(`Wrong injection token for ruleProvider, it should be '${aw}' and you used '${n.ruleProvider.provide}'`)}else n.ruleProvider={provide:aw,useClass:zZ};if(n.mapperProvider){if(n.mapperProvider.provide!==sw)throw new Error(`Wrong injection token for mapperProvider, it should be '${sw}' and you used '${n.mapperProvider.provide}'`)}else n.mapperProvider={provide:sw,useClass:NZ};if(n.writerProvider){if(n.writerProvider.provide!==cw)throw new Error(`Wrong injection token for writerProvider, it should be '${cw}' and you used '${n.writerProvider.provide}'`)}else n.writerProvider={provide:cw,useClass:HZ};if(n.serverProvider){if(n.serverProvider.provide!==lw)throw new Error(`Wrong injection token for serverProvider, it should be '${lw}' and you used '${n.writerProvider.provide}'`)}else n.serverProvider={provide:lw,useClass:VZ};return{ngModule:i,providers:[dm,n.configProvider,n.configEngineFactoryProvider,n.metadataProvider,n.ruleProvider,n.mapperProvider,n.writerProvider,n.serverProvider,GZ]}}static forChild(){return{ngModule:i}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[[Vs]]}),i})();function pz(i,t,e,n,r,s,o){try{var l=i[s](o),u=l.value}catch(p){return void e(p)}l.done?t(u):Promise.resolve(u).then(n,r)}function eb(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(u){pz(s,n,r,o,l,"next",u)}function l(u){pz(s,n,r,o,l,"throw",u)}o(void 0)})}}var jZ=V(5452),fm=(()=>{return(i=fm||(fm={})).Local="local_strategy",i.Session="session_strategy",i.InMemory="in_memory_strategy",fm;var i})();function x1(){}let ev=(()=>{class i{static normalize(e){return e=i.isCaseSensitive?e:e.toLowerCase(),`${i.prefix}${i.separator}${e}`}static isNormalizedKey(e){return 0===e.indexOf(i.prefix+i.separator)}static setPrefix(e){i.prefix=e}static setSeparator(e){i.separator=e}static setCaseSensitive(e){i.isCaseSensitive=e}static consumeConfiguration(e){"prefix"in e&&this.setPrefix(e.prefix),"separator"in e&&this.setSeparator(e.separator),"caseSensitive"in e&&this.setCaseSensitive(e.caseSensitive)}}return i.prefix="ngx-webstorage",i.separator="|",i.isCaseSensitive=!1,i})();class w1{constructor(t){this.strategy=t}retrieve(t){let e;return this.strategy.get(ev.normalize(t)).subscribe(n=>e=typeof n>"u"?null:n),e}store(t,e){return this.strategy.set(ev.normalize(t),e).subscribe(x1),e}clear(t){void 0!==t?this.strategy.del(ev.normalize(t)).subscribe(x1):this.strategy.clear().subscribe(x1)}getStrategyName(){return this.strategy.name}observe(t){return t=ev.normalize(t),this.strategy.keyChanges.pipe(pg(e=>null===e||e===t),hm(()=>this.strategy.get(t)),PB(),o2({refCount:!0,bufferSize:1}))}}let a2=(()=>{class i{constructor(){this.caches={}}get(e,n){return this.getCacheStore(e)[n]}set(e,n,r){this.getCacheStore(e)[n]=r}del(e,n){delete this.getCacheStore(e)[n]}clear(e){this.caches[e]={}}getCacheStore(e){return e in this.caches?this.caches[e]:this.caches[e]={}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const gz=new Qi("window_local_storage"),ZZ={provide:gz,useFactory:function KZ(){return typeof window<"u"?window.localStorage:null}},mz=new Qi("window_session_storage"),JZ={provide:mz,useFactory:function QZ(){return typeof window<"u"?window.sessionStorage:null}};class vz{constructor(t,e){this.storage=t,this.cache=e,this.keyChanges=new nn}get isAvailable(){return void 0===this._isAvailable&&(this._isAvailable=class $Z{static isStorageAvailable(t){let e=!0;try{"object"==typeof t?(t.setItem("test-storage","foobar"),t.removeItem("test-storage")):e=!1}catch{e=!1}return e}}.isStorageAvailable(this.storage)),this._isAvailable}get(t){let e=this.cache.get(this.name,t);if(void 0!==e)return Wr(e);try{const n=this.storage.getItem(t);null!==n&&(e=JSON.parse(n),this.cache.set(this.name,t,e))}catch(n){console.warn(n)}return Wr(e)}set(t,e){const n=JSON.stringify(e);return this.storage.setItem(t,n),this.cache.set(this.name,t,e),this.keyChanges.next(t),Wr(e)}del(t){return this.storage.removeItem(t),this.cache.del(this.name,t),this.keyChanges.next(t),Wr(null)}clear(){return this.storage.clear(),this.cache.clear(this.name),this.keyChanges.next(null),Wr(null)}}class ey extends vz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=ey.strategyName,WM(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==e?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}ey.strategyName=fm.Local,ey.\u0275fac=function(t){return new(t||ey)(Xn(gz),Xn(a2),Xn(GC),Xn(Yo))},ey.\u0275prov=Yi({token:ey,factory:ey.\u0275fac});class ty extends vz{constructor(t,e,n,r){super(t,e),this.storage=t,this.cache=e,this.platformId=n,this.zone=r,this.name=ty.strategyName,WM(this.platformId)&&this.listenExternalChanges()}listenExternalChanges(){window.addEventListener("storage",t=>this.zone.run(()=>{if(t.storageArea!==this.storage)return;const e=t.key;null!==t.key?this.cache.del(this.name,t.key):this.cache.clear(this.name),this.keyChanges.next(e)}))}}ty.strategyName=fm.Session,ty.\u0275fac=function(t){return new(t||ty)(Xn(mz),Xn(a2),Xn(GC),Xn(Yo))},ty.\u0275prov=Yi({token:ty,factory:ty.\u0275fac});class ny{constructor(t){this.cache=t,this.keyChanges=new nn,this.isAvailable=!0,this.name=ny.strategyName}get(t){return Wr(this.cache.get(this.name,t))}set(t,e){return this.cache.set(this.name,t,e),this.keyChanges.next(t),Wr(e)}del(t){return this.cache.del(this.name,t),this.keyChanges.next(t),Wr(null)}clear(){return this.cache.clear(this.name),this.keyChanges.next(null),Wr(null)}}ny.strategyName=fm.InMemory,ny.\u0275fac=function(t){return new(t||ny)(Xn(a2))},ny.\u0275prov=Yi({token:ny,factory:ny.\u0275fac});const A1=new Qi("STORAGE_STRATEGIES"),eQ=[{provide:A1,useClass:ny,multi:!0},{provide:A1,useClass:ey,multi:!0},{provide:A1,useClass:ty,multi:!0}],yz="invalid_strategy";let p0=(()=>{class i{constructor(e){this.strategies=e,this.registration$=new nn,e||(e=[]),this.strategies=e.reverse().map((n,r,s)=>n.name).map((n,r,s)=>s.indexOf(n)===r?r:null).filter(n=>null!==n).map(n=>e[n])}static get(e){if(!this.isStrategyRegistered(e))throw Error(yz);let n=this.index[e];return n.isAvailable||(n=this.index[fm.InMemory]),n}static set(e,n){this.index[e]=n}static clear(e){void 0!==e?delete this.index[e]:this.index={}}static isStrategyRegistered(e){return e in this.index}static hasRegistredStrategies(){return Object.keys(this.index).length>0}getStrategy(e){return i.get(e)}indexStrategies(){this.strategies.forEach(e=>this.register(e.name,e))}indexStrategy(e,n=!1){if(i.isStrategyRegistered(e)&&!n)return i.get(e);const r=this.strategies.find(s=>s.name===e);if(!r)throw new Error(yz);return this.register(e,r,n),r}register(e,n,r=!1){(!i.isStrategyRegistered(e)||r)&&(i.set(e,n),this.registration$.next(e))}}return i.index={},i.\u0275fac=function(e){return new(e||i)(Xn(A1,8))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class _z extends w1{}const aQ=[{provide:_z,useFactory:function nQ(i){const t=i.indexStrategy(fm.Local);return new w1(t)},deps:[p0]},{provide:class rQ extends w1{},useFactory:function sQ(i){const t=i.indexStrategy(fm.Session);return new w1(t)},deps:[p0]}],bz=new Qi("ngx_webstorage_config");function lQ(i){return i.indexStrategies(),()=>p0.index}let cQ=(()=>{class i{constructor(e,n){n?ev.consumeConfiguration(n):console.error("NgxWebstorage : Possible misconfiguration (The forRoot method usage is mandatory since the 3.0.0)")}static forRoot(e={}){return{ngModule:i,providers:[{provide:bz,useValue:e},ZZ,JZ,...aQ,...eQ,{provide:Lx,useFactory:lQ,deps:[p0],multi:!0}]}}}return i.\u0275fac=function(e){return new(e||i)(Xn(p0),Xn(bz,8))},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({}),i})(),uw=(()=>{class i{constructor(e){this.storage=e,this.retrieveGraphs()||this.storage.store("graphs",[]),this.retrieveTags()||this.storage.store("tags",[]),this.retrievePreferences()||this.storage.store("preferences",{grid:!1})}retrieveGraphs(){return JSON.parse(JSON.stringify(this.storage.retrieve("graphs")))}retrievePreferences(){return JSON.parse(JSON.stringify(this.storage.retrieve("preferences")))}retrieveTags(){return JSON.parse(JSON.stringify(this.storage.retrieve("tags")))}deleteGraph(e){let n=this.retrieveGraphs();return Qr.remove(n,r=>r.id===e.id),this.storage.store("graphs",n),n}findAllTags(){return this.retrieveTags()}findAllGraphs(){return this.retrieveGraphs()}findGraph(e){let n=this.retrieveGraphs(),r=Qr.find(n,s=>e===s.id);if(r)return r}storeGraph(e){let n=this.retrieveGraphs(),r=Qr.find(n,s=>e.id===s.id);r?(r.id=e.id,r.label=e.label,r.edges=e.edges,r.nodes=e.nodes):n.push(e),this.storage.store("graphs",n)}storePreferences(e){this.storage.store("preferences",e)}storeTags(e){this.storage.store("tags",e)}}return i.\u0275fac=function(e){return new(e||i)(Xn(_z))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xz=(()=>{class i{constructor(){}ascii_to_u8a(e){return new Uint8Array(e.length).map((r,s)=>e.codePointAt(s)??0)}u8a_to_hex(e){let n="";for(const r of e)n+=r.toString(16).padStart(2,"0");return n}hex_to_u8a(e){if(e.length%2)throw new Error("odd string length");const n=new Uint8Array(e.length/2);for(let r=0;r<n.length;r++){const s=e.slice(2*r,2*r+2);n[r]=parseInt(s,16)}return n}u8a_to_ascii(e){let n="";for(const r of e)n+=String.fromCharCode(r);return n}encode(e){return this.u8a_to_hex(this.ascii_to_u8a(e))}decode(e){return this.u8a_to_ascii(this.hex_to_u8a(e))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const wz=new jZ.Parser;let I1=(()=>{class i{constructor(e,n,r,s){this.messageService=e,this.databaseService=n,this.base16=r,this.logger=s}getGraphs(e){let n=this.databaseService.findAllGraphs(),r=new Array;return Qr.each(n,s=>{r.push(s)}),r}getGraph(e){return this.databaseService.findGraph(e)}saveGraph(e){this.databaseService.storeGraph(e)}getAllTags(){return this.databaseService.findAllTags()}saveTags(e){this.databaseService.storeTags(e)}outputNodes(e){return Qr.map(Qr.sortBy(e?.nodes,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,x:n.x,y:n.y,group:void 0===n.group?null:n.group,tag:void 0===n.tag?null:n.tag};return n.parent&&(r.parent=this.base16.decode(n.parent)),n.cdata&&(r.cdata=n.cdata),n.alias&&(r.alias=n.alias),r})}outputEdges(e){return Qr.map(Qr.sortBy(e?.edges,n=>n.id),n=>{let r={uid:this.base16.decode(n.id),label:n.label,source:this.base16.decode(n.source),target:this.base16.decode(n.target),tag:void 0===n.tag?null:n.tag};return n.cdata&&(r.cdata=n.cdata),r})}toGexf(e){this.logger.info("alias",e);let n=[];n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),n.push('<meta lastmodifieddate="2009-03-20">'),n.push("<creator>Gexf.net</creator>"),n.push("<description>A hello world! file</description>"),n.push("</meta>"),n.push('<graph mode="static" defaultedgetype="directed">'),n.push("<nodes>"),Qr.each(Qr.sortBy(this.outputNodes(e),"uid"),s=>{let o=" />";s.cdata&&(o=">"),null==s.alias&&(s.alias=""),n.push(null===s.tag?s.parent?`<node id="${s.uid}" parent="${parent}" label="${s.label}" alias="${s.alias}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:`<node id="${s.uid}" label="${s.label}" alias="${s.alias}" group="${s.group}" x="${s.x}" y="${s.y}"${o}`:s.parent?`<node id="${s.uid}" parent="${s.parent}" label="${s.label}" alias="${s.alias}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`:`<node id="${s.uid}" label="${s.label}" alias="${s.alias}" group="${s.group}" x="${s.x}" y="${s.y}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</node>"))}),n.push("</nodes>"),n.push("<edges>");let r=Qr.map(this.outputEdges(e),s=>(s.uid=`${s.source}:${s.target}`,s));return Qr.each(Qr.sortBy(r,"uid"),s=>{let o=" />";s.cdata&&(o=">"),n.push(null===s.tag?`<edge id="${s.source}:${s.target}" source="${s.source}" target="${s.target}" label="${s.label}"${o}`:`<edge id="${s.source}:${s.target}" source="${s.source}" target="${s.target}" label="${s.label}" tag="${s.tag}"${o}`),s.cdata&&(n.push(`<![CDATA[${s.cdata}]]>`),n.push("</edge>"))}),n.push("</edges>"),n.push("</graph>"),n.push("</gexf>"),n}toGraphml(e){let n=[];return n.push('<?xml version="1.0" encoding="UTF-8"?>'),n.push('<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">'),n.push('<graph id="G" edgedefault="undirected">'),Qr.each(this.outputNodes(e),r=>{let s=" />";r.cdata&&(s=">"),n.push(null===r.tag?r.parent?`<node id="${r.uid}" parent="${parent}" label="${r.label}" group="${r.group}" x="${r.x}" y="${r.y}"${s}`:`<node id="${r.uid}" label="${r.label}" group="${r.group}" x="${r.x}" y="${r.y}"${s}`:r.parent?`<node id="${r.uid}" parent="${r.parent}" label="${r.label}" group="${r.group}" x="${r.x}" y="${r.y}" tag="${r.tag}"${s}`:`<node id="${r.uid}" label="${r.label}" group="${r.group}" x="${r.x}" y="${r.y}" tag="${r.tag}"${s}`),r.cdata&&(n.push(`<![CDATA[${r.cdata}]]>`),n.push("</node>"))}),Qr.each(this.outputEdges(e),r=>{let s=" />";r.cdata&&(s=">"),n.push(null===r.tag?`<edge id="${r.source}:${r.target}" source="${r.source}" target="${r.target}" label="${r.label}"${s}`:`<edge id="${r.source}:${r.target}" source="${r.source}" target="${r.target}" label="${r.label}" tag="${r.tag}"${s}`),r.cdata&&(n.push(`<![CDATA[${r.cdata}]]>`),n.push("</edge>"))}),n.push("</graph>"),n.push("</graphml>"),n}filterCDATA(e){if(e){let n="";for(let r=1;r<e.length-1;r++)n+=e.charAt(r);return n}}loadGraphGexf(e,n,r){var s=this;return eb(function*(){return s.logger.info(`loadGraphGexf: ${e}`),new Promise(o=>{wz.parseString(r,(l,u)=>{if(l)throw s.logger.error(l),l;let p={id:e,label:n,nodes:[],edges:[]};Qr.each(u.gexf.graph,v=>{let x={};s.logger.info("loading nodes",v.nodes),Qr.each(v.nodes,I=>{Qr.each(I.node,M=>{let F={id:s.base16.encode(M.$.id),x:parseFloat(M.$.x),y:parseFloat(M.$.y),cdata:s.filterCDATA(M._),alias:M.$.alias?M.$.alias:"",label:M.$.label?M.$.label:"",group:M.$.group?M.$.group:"",tag:M.$.tag?M.$.tag:""};x[F.id]=!0,M.$.parent&&(F.parent=s.base16.encode(M.$.parent)),p.nodes.push(F)})}),s.logger.info("loading edges",v.edges),Qr.each(v.edges,I=>{Qr.each(I.edge,M=>{let F={id:s.base16.encode(M.$.id),source:s.base16.encode(M.$.source),target:s.base16.encode(M.$.target),cdata:s.filterCDATA(M._),label:M.$.label?M.$.label:"",tag:M.$.tag?M.$.tag:""};if(!x[F.source])throw s.logger.error("source unkown",M.$),new Error(`source unkown ${M.$.source}`);if(!x[F.target])throw s.logger.error("target unkown",M.$),new Error(`target unkown ${M.$.target}`);p.edges.push(F)})})}),s.logger.info(p),o(p)})})})()}extractMlData(e,n){let r=Qr.find(e.data,s=>{if(s.$.key===n)return s});return r?r._:0}loadGraphMl(e,n,r){var s=this;return eb(function*(){return s.logger.info(`loadGraphMl: ${e}`),new Promise(o=>{wz.parseString(r,(l,u)=>{if(l)throw l;let p={id:e,label:n,nodes:[],edges:[]},v=[];Qr.each(u.graphml.graph.key,x=>{v.push({label:x.id,type:x["attr.type"]})}),Qr.each(u.graphml.graph,x=>{Qr.each(x.node,I=>{let M={id:I.$.id,label:s.extractMlData(I,"tooltip"),x:parseFloat(s.extractMlData(I,"x")),y:parseFloat(s.extractMlData(I,"y"))};p.nodes.push(M)}),Qr.each(x.edge,I=>{p.edges.push({id:I.$.id,label:"default",source:I.$.source,target:I.$.target})})}),o(p)})})})()}uploadHandler(e,n,r){var s=this;return new Promise(o=>{let l=new FileReader;l.addEventListener("loadend",eb(function*(){let u=new String(l.result),p={id:n,label:r,nodes:[],edges:[]};u.includes('xmlns="http://gexf')&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GEXF file to ${r}`}),p=yield s.loadGraphGexf(n,r,u.toString())),u.includes("http://graphml.graphdrawing.org")&&(s.messageService.add({severity:"info",summary:"Info",detail:`Load GRAPHML file to ${r}`}),p=yield s.loadGraphMl(n,r,u.toString())),0==p.nodes.length&&s.messageService.add({severity:"warn",summary:"warn",detail:`No node for ${r}`}),o(p)})),l.readAsText(e)})}}return i.\u0275fac=function(e){return new(e||i)(Xn(Jv),Xn(uw),Xn(xz),Xn(dm))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),l2=(()=>{class i{constructor(e){this.logger=e}fallbackCopyTextToClipboard(e){var n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();try{var r=document.execCommand("copy");this.logger.info("Fallback: Copying text command was "+(r?"successful":"unsuccessful"))}catch(o){this.logger.error("Fallback: Oops, unable to copy",o)}document.body.removeChild(n)}copyTextToClipboard(e){navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{this.logger.info("Async: Copying to clipboard was successful!")},n=>{this.logger.error("Async: Could not copy text: ",n)}):this.fallbackCopyTextToClipboard(e)}}return i.\u0275fac=function(e){return new(e||i)(Xn(dm))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Az=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(Qt(d),Qt(qn))},i.\u0275dir=qr({type:i}),i})(),g0=(()=>{class i extends Az{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=zo(i)))(n||i)}}(),i.\u0275dir=qr({type:i,features:[Qa]}),i})();const jc=new Qi("NgValueAccessor"),dQ={provide:jc,useExisting:hs(()=>hw),multi:!0},pQ=new Qi("CompositionEventMode");let hw=(()=>{class i extends Az{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fQ(){const i=Km()?Km().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(Qt(d),Qt(qn),Qt(pQ,8))},i.\u0275dir=qr({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&mn("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[ko([dQ]),Qa]}),i})();const Ad=new Qi("NgValidators"),i_=new Qi("NgAsyncValidators");function Oz(i){return null!=i}function Fz(i){return xx(i)?sr(i):i}function Nz(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function Bz(i,t){return t.map(e=>e(i))}function zz(i){return i.map(t=>function vQ(i){return!i.validate}(t)?t:e=>t.validate(e))}function c2(i){return null!=i?function Vz(i){if(!i)return null;const t=i.filter(Oz);return 0==t.length?null:function(e){return Nz(Bz(e,t))}}(zz(i)):null}function u2(i){return null!=i?function Uz(i){if(!i)return null;const t=i.filter(Oz);return 0==t.length?null:function(e){return function uQ(...i){const t=Ye(i),{args:e,keys:n}=u3(i),r=new Ct(s=>{const{length:o}=e;if(!o)return void s.complete();const l=new Array(o);let u=o,p=o;for(let v=0;v<o;v++){let x=!1;dl(e[v]).subscribe(yn(s,I=>{x||(x=!0,p--),l[v]=I},()=>u--,void 0,()=>{(!u||!x)&&(p||s.next(n?d3(n,l):l),s.complete())}))}});return t?r.pipe(h3(t)):r}(Bz(e,t).map(Fz)).pipe(Ce(Nz))}}(zz(i)):null}function Hz(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function h2(i){return i?Array.isArray(i)?i:[i]:[]}function E1(i,t){return Array.isArray(i)?i.includes(t):i===t}function jz(i,t){const e=h2(t);return h2(i).forEach(r=>{E1(e,r)||e.push(r)}),e}function $z(i,t){return h2(t).filter(e=>!E1(i,e))}class qz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=c2(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=u2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class sf extends qz{get formDirective(){return null}get path(){return null}}class tv extends qz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let dw=(()=>{class i extends class Xz{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(Qt(tv,2))},i.\u0275dir=qr({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&Tp("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[Qa]}),i})();const fw="VALID",M1="INVALID",tb="PENDING",pw="DISABLED";function Kz(i){return Array.isArray(i)?c2(i):i||null}function Zz(i){return Array.isArray(i)?u2(i):i||null}function D1(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function gw(i,t){(function y2(i,t){const e=function Gz(i){return i._rawValidators}(i);null!==t.validator?i.setValidators(Hz(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=function Wz(i){return i._rawAsyncValidators}(i);null!==t.asyncValidator?i.setAsyncValidators(Hz(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();R1(t._rawValidators,r),R1(t._rawAsyncValidators,r)})(i,t),t.valueAccessor.writeValue(i.value),i.disabled&&t.valueAccessor.setDisabledState?.(!0),function EQ(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&tV(i,t)})}(i,t),function MQ(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function TQ(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&tV(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function SQ(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function R1(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function tV(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function sV(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function oV(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const NQ={provide:tv,useExisting:hs(()=>r_)},uV=(()=>Promise.resolve(null))();let r_=(()=>{class i extends tv{constructor(e,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class eV{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Kz(this._rawValidators),this._composedAsyncValidatorFn=Zz(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===fw}get invalid(){return this.status===M1}get pending(){return this.status==tb}get disabled(){return this.status===pw}get enabled(){return this.status!==pw}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Kz(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Zz(t)}addValidators(t){this.setValidators(jz(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(jz(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators($z(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators($z(t,this._rawAsyncValidators))}hasValidator(t){return E1(this._rawValidators,t)}hasAsyncValidator(t){return E1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=tb,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=pw,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=fw,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fw||this.status===tb)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pw:fw}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=tb,this._hasOwnPendingAsyncValidator=!0;const e=Fz(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new jn,this.statusChanges=new jn}_calculateStatus(){return this._allControlsDisabled()?pw:this.errors?M1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tb)?tb:this._anyControlsHaveStatus(M1)?M1:fw}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){D1(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}{constructor(t=null,e,n){super(function g2(i){return(D1(i)?i.validators:i)||null}(e),function m2(i,t){return(D1(t)?t.asyncValidators:i)||null}(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),D1(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=oV(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){sV(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){sV(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){oV(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},this._registered=!1,this.update=new jn,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function C2(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===hw?e=s:function PQ(i){return Object.getPrototypeOf(i.constructor)===g0}(s)?n=s:r=s}),r||n||e||null}(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function _2(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gw(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){uV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&jv(n);uV.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function L1(i,t){return[...t.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(Qt(sf,9),Qt(Ad,10),Qt(i_,10),Qt(jc,10),Qt(Ho,8))},i.\u0275dir=qr({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ko([NQ]),Qa,ya]}),i})(),dV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({}),i})(),lJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[dV]}),i})(),O1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[lJ]}),i})();class DV{}const iy="*";function ry(i,t){return{type:7,name:i,definitions:t,options:{}}}function Cc(i,t=null){return{type:4,styles:t,timings:i}}function LV(i,t=null){return{type:2,steps:i,options:t}}function Ja(i){return{type:6,styles:i,offset:null}}function v0(i,t,e){return{type:0,name:i,styles:t,options:e}}function Eu(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function nb(i,t=null){return{type:8,animation:i,options:t}}function hJ(i=null){return{type:9,options:i}}function PV(i,t=null){return{type:10,animation:i,options:t}}function dJ(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function RV(i){Promise.resolve(null).then(i)}class vw{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){RV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class kV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?RV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,l)=>Math.max(o,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}let Gt=(()=>{class i{static addClass(e,n){e.classList?e.classList.add(n):e.className+=" "+n}static addMultipleClasses(e,n){if(e.classList){let r=n.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=n.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,n){e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,n){return e.classList?e.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(n){return n!==e})}static find(e,n){return Array.from(e.querySelectorAll(n))}static findSingle(e,n){return e?e.querySelector(n):null}static index(e){let n=e.parentNode.childNodes,r=0;for(var s=0;s<n.length;s++){if(n[s]==e)return r;1==n[s].nodeType&&r++}return-1}static indexWithinGroup(e,n){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var o=0;o<r.length;o++){if(r[o]==e)return s;r[o].attributes&&r[o].attributes[n]&&1==r[o].nodeType&&s++}return-1}static relativePosition(e,n){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=n.offsetHeight,o=n.getBoundingClientRect(),l=this.getViewport();let u,p;o.top+s+r.height>l.height?(u=-1*r.height,e.style.transformOrigin="bottom",o.top+u<0&&(u=-1*o.top)):(u=s,e.style.transformOrigin="top"),p=r.width>l.width?-1*o.left:o.left+r.width>l.width?-1*(o.left+r.width-l.width):0,e.style.top=u+"px",e.style.left=p+"px"}static absolutePosition(e,n){let M,F,r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,o=r.width,l=n.offsetHeight,u=n.offsetWidth,p=n.getBoundingClientRect(),v=this.getWindowScrollTop(),x=this.getWindowScrollLeft(),I=this.getViewport();p.top+l+s>I.height?(M=p.top+v-s,e.style.transformOrigin="bottom",M<0&&(M=v)):(M=l+p.top+v,e.style.transformOrigin="top"),F=p.left+o>I.width?Math.max(0,p.left+x+u-o):p.left+x,e.style.top=M+"px",e.style.left=F+"px"}static getParents(e,n=[]){return null===e.parentNode?n:this.getParents(e.parentNode,n.concat([e.parentNode]))}static getScrollableParents(e){let n=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,o=l=>{let u=window.getComputedStyle(l,null);return s.test(u.getPropertyValue("overflow"))||s.test(u.getPropertyValue("overflowX"))||s.test(u.getPropertyValue("overflowY"))};for(let l of r){let u=1===l.nodeType&&l.dataset.scrollselectors;if(u){let p=u.split(",");for(let v of p){let x=this.findSingle(l,v);x&&o(x)&&n.push(x)}}9!==l.nodeType&&o(l)&&n.push(l)}}return n}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",n}static getHiddenElementDimensions(e){let n={};return e.style.visibility="hidden",e.style.display="block",n.width=e.offsetWidth,n.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",n}static scrollInView(e,n){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(e).getPropertyValue("paddingTop"),l=o?parseFloat(o):0,u=e.getBoundingClientRect(),v=n.getBoundingClientRect().top+document.body.scrollTop-(u.top+document.body.scrollTop)-s-l,x=e.scrollTop,I=e.clientHeight,M=this.getOuterHeight(n);v<0?e.scrollTop=x+v:v+M>I&&(e.scrollTop=x+v-I+M)}static fadeIn(e,n){e.style.opacity=0;let r=+new Date,s=0,o=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/n,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(e,n){var r=1,l=50/n;let u=setInterval(()=>{(r-=l)<=0&&(r=0,clearInterval(u)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,n){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(o){return-1!==[].indexOf.call(document.querySelectorAll(o),this)}).call(e,n)}static getOuterWidth(e,n){let r=e.offsetWidth;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let n=getComputedStyle(e);return parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)}static getHorizontalMargin(e){let n=getComputedStyle(e);return parseFloat(n.marginLeft)+parseFloat(n.marginRight)}static innerWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static width(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),n}static getInnerHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),n}static getOuterHeight(e,n){let r=e.offsetHeight;if(n){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let n=e.offsetHeight,r=getComputedStyle(e);return n-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),n}static getWidth(e){let n=e.offsetWidth,r=getComputedStyle(e);return n-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),n}static getViewport(){let e=window,n=document,r=n.documentElement,s=n.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var n=e.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,n){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(n,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,n){if(this.isElement(n))n.appendChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot append "+n+" to "+e;n.el.nativeElement.appendChild(e)}}static removeChild(e,n){if(this.isElement(n))n.removeChild(e);else{if(!n.el||!n.el.nativeElement)throw"Cannot remove "+e+" from "+n;n.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let n=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let n=document.createElement("div");n.className="p-scrollbar-measure",document.body.appendChild(n);let r=n.offsetWidth-n.clientWidth;return document.body.removeChild(n),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let n=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=n,n}static invokeElementMethod(e,n,r){e[n].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let n=i.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of n)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return i.zindex=1e3,i.calculatedScrollbarWidth=null,i.calculatedScrollbarHeight=null,i})();class yw{constructor(t,e=(()=>{})){this.element=t,this.listener=e}bindScrollListener(){this.scrollableParents=Gt.getScrollableParents(this.element);for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let t=0;t<this.scrollableParents.length;t++)this.scrollableParents[t].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let s_=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Gt.appendChild(this.container,this.el.nativeElement):Gt.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Gt.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Ll.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Ll.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+Gt.getWindowScrollLeft(),top:e.top+Gt.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),n=e.left+Gt.getOuterWidth(this.el.nativeElement),r=e.top+(Gt.getOuterHeight(this.el.nativeElement)-Gt.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),n=e.left-Gt.getOuterWidth(this.container),r=e.top+(Gt.getOuterHeight(this.el.nativeElement)-Gt.getOuterHeight(this.container))/2;this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),n=e.left+(Gt.getOuterWidth(this.el.nativeElement)-Gt.getOuterWidth(this.container))/2,r=e.top-Gt.getOuterHeight(this.container);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),n=e.left+(Gt.getOuterWidth(this.el.nativeElement)-Gt.getOuterWidth(this.container))/2,r=e.top+Gt.getOuterHeight(this.el.nativeElement);this.container.style.left=n+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return Gt.hasClass(e,"p-inputwrapper")?Gt.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let n="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?n+" "+this.getOption("tooltipStyleClass"):n}isOutOfBounds(){let e=this.container.getBoundingClientRect(),n=e.top,r=e.left,s=Gt.getOuterWidth(this.container),o=Gt.getOuterHeight(this.container),l=Gt.getViewport();return r+s>l.width||r<0||n<0||n+o>l.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new yw(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Gt.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Ll.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(Yo),Qt(Mp))},i.\u0275dir=qr({type:i,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[ya]}),i})(),nv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();const fJ=["element"],pJ=["content"];function gJ(i,t){1&i&&qi(0)}const M2=function(i,t){return{$implicit:i,options:t}};function mJ(i,t){if(1&i&&(Hr(0),Ze(1,gJ,1,0,"ng-container",7),Gr()),2&i){const e=_e(2);De(1),ve("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",ys(2,M2,e.loadedItems,e.getContentOptions()))}}function vJ(i,t){1&i&&qi(0)}function yJ(i,t){if(1&i&&(Hr(0),Ze(1,vJ,1,0,"ng-container",7),Gr()),2&i){const e=t.$implicit,n=t.index,r=_e(3);De(1),ve("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ys(2,M2,e,r.getOptions(n)))}}const _J=function(i){return{"p-scroller-loading":i}};function CJ(i,t){if(1&i&&(ct(0,"div",8,9),Ze(2,yJ,2,5,"ng-container",10),ht()),2&i){const e=_e(2);ve("ngClass",Bi(4,_J,e.d_loading))("ngStyle",e.contentStyle),De(2),ve("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function bJ(i,t){1&i&&si(0,"div",11),2&i&&ve("ngStyle",_e(2).spacerStyle)}function xJ(i,t){1&i&&qi(0)}const wJ=function(i){return{numCols:i}},OV=function(i){return{options:i}};function AJ(i,t){if(1&i&&(Hr(0),Ze(1,xJ,1,0,"ng-container",7),Gr()),2&i){const e=t.index,n=_e(4);De(1),ve("ngTemplateOutlet",n.loaderTemplate)("ngTemplateOutletContext",Bi(4,OV,n.getLoaderOptions(e,n.both&&Bi(2,wJ,n._numItemsInViewport.cols))))}}function IJ(i,t){if(1&i&&(Hr(0),Ze(1,AJ,2,6,"ng-container",14),Gr()),2&i){const e=_e(3);De(1),ve("ngForOf",e.loaderArr)}}function SJ(i,t){1&i&&qi(0)}const EJ=function(){return{styleClass:"p-scroller-loading-icon"}};function TJ(i,t){if(1&i&&(Hr(0),Ze(1,SJ,1,0,"ng-container",7),Gr()),2&i){const e=_e(4);De(1),ve("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",Bi(3,OV,xa(2,EJ)))}}function MJ(i,t){1&i&&si(0,"i",16)}function DJ(i,t){if(1&i&&(Ze(0,TJ,2,5,"ng-container",0),Ze(1,MJ,1,0,"ng-template",null,15,vc)),2&i){const e=co(2);ve("ngIf",_e(3).loaderIconTemplate)("ngIfElse",e)}}const LJ=function(i){return{"p-component-overlay":i}};function PJ(i,t){if(1&i&&(ct(0,"div",12),Ze(1,IJ,2,1,"ng-container",0),Ze(2,DJ,3,2,"ng-template",null,13,vc),ht()),2&i){const e=co(3),n=_e(2);ve("ngClass",Bi(3,LJ,!n.loaderTemplate)),De(1),ve("ngIf",n.loaderTemplate)("ngIfElse",e)}}const RJ=function(i,t){return{"p-scroller":!0,"p-both-scroll":i,"p-horizontal-scroll":t}};function kJ(i,t){if(1&i){const e=Pi();Hr(0),ct(1,"div",2,3),mn("scroll",function(r){return wt(e),It(_e().onContainerScroll(r))}),Ze(3,mJ,2,5,"ng-container",0),Ze(4,CJ,3,6,"ng-template",null,4,vc),Ze(6,bJ,1,1,"div",5),Ze(7,PJ,4,5,"div",6),ht(),Gr()}if(2&i){const e=co(5),n=_e();De(1),Vr(n._styleClass),ve("ngStyle",n._style)("ngClass",ys(10,RJ,n.both,n.horizontal)),vr("id",n._id)("tabindex",n.tabindex),De(2),ve("ngIf",n.contentTemplate)("ngIfElse",e),De(3),ve("ngIf",n._showSpacer),De(1),ve("ngIf",!n.loaderDisabled&&n._showLoader&&n.d_loading)}}function OJ(i,t){1&i&&qi(0)}const FJ=function(i,t){return{rows:i,columns:t}};function NJ(i,t){if(1&i&&(Hr(0),Ze(1,OJ,1,0,"ng-container",7),Gr()),2&i){const e=_e(2);De(1),ve("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",ys(5,M2,e.items,ys(2,FJ,e._items,e.loadedColumns)))}}function BJ(i,t){if(1&i&&(nu(0),Ze(1,NJ,2,8,"ng-container",17)),2&i){const e=_e();De(1),ve("ngIf",e.contentTemplate)}}const zJ=["*"];let F1=(()=>{class i{constructor(e,n){this.cd=e,this.zone=n,this.onLazyLoad=new jn,this.onScroll=new jn,this.onScrollIndexChange=new jn,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._delay=0,this._resizeDelay=10,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1,this._disabled||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([n,r])=>this[`_${n}`]!==r&&(this[`_${n}`]=r))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}ngOnInit(){this.setInitialState()}ngOnChanges(e){let n=!1;if(e.loading){const{previousValue:r,currentValue:s}=e.loading;this.lazy&&r!==s&&s!==this.d_loading&&(this.d_loading=s,n=!0)}if(this.initialized&&!n&&(e.items||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init(),e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:r,currentValue:s}=e.numToleratedItems;r!==s&&s!==this.d_numToleratedItems&&(this.d_numToleratedItems=s)}if(e.options){const{previousValue:r,currentValue:s}=e.options;this.lazy&&r?.loading!==s?.loading&&s?.loading!==this.d_loading&&(this.d_loading=s.loading),r?.numToleratedItems!==s?.numToleratedItems&&s?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=s.numToleratedItems)}}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.setContentEl(this.contentEl),this.init(),this.defaultWidth=Gt.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=Gt.getHeight(this.elementViewChild.nativeElement),this.initialized=!0}ngAfterViewChecked(){this.calculateAutoSize()}ngOnDestroy(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||Gt.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems}getElementRef(){return this.elementViewChild}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,n="auto"){const{numToleratedItems:r}=this.calculateNumItems(),s=this.getContentPosition(),o=(p=0,v)=>p<=v?0:p,l=(p,v,x)=>p*v+x,u=(p=0,v=0)=>this.scrollTo({left:p,top:v,behavior:n});if(this.both){const p={rows:o(e[0],r[0]),cols:o(e[1],r[1])};(p.rows!==this.first.rows||p.cols!==this.first.cols)&&u(l(p.cols,this._itemSize[1],s.left),l(p.rows,this._itemSize[0],s.top))}else{const p=o(e,r);p!==this.first&&(this.horizontal?u(l(p,this._itemSize,s.left),0):u(0,l(p,this._itemSize,s.top)))}}scrollInView(e,n,r="auto"){if(n){const{first:s,viewport:o}=this.getRenderedRange(),l=(v=0,x=0)=>this.scrollTo({left:v,top:x,behavior:r}),p="to-end"===n;if("to-start"===n){if(this.both)o.first.rows-s.rows>e[0]?l(o.first.cols*this._itemSize[1],(o.first.rows-1)*this._itemSize[0]):o.first.cols-s.cols>e[1]&&l((o.first.cols-1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.first-s>e){const v=(o.first-1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else if(p)if(this.both)o.last.rows-s.rows<=e[0]+1?l(o.first.cols*this._itemSize[1],(o.first.rows+1)*this._itemSize[0]):o.last.cols-s.cols<=e[1]+1&&l((o.first.cols+1)*this._itemSize[1],o.first.rows*this._itemSize[0]);else if(o.last-s<=e+1){const v=(o.first+1)*this._itemSize;this.horizontal?l(v,0):l(0,v)}}else this.scrollToIndex(e,r)}getRenderedRange(){const e=(s,o)=>Math.floor(s/(o||s));let n=this.first,r=0;if(this.elementViewChild?.nativeElement){const{scrollTop:s,scrollLeft:o}=this.elementViewChild.nativeElement;this.both?(n={rows:e(s,this._itemSize[0]),cols:e(o,this._itemSize[1])},r={rows:n.rows+this.numItemsInViewport.rows,cols:n.cols+this.numItemsInViewport.cols}):(n=e(this.horizontal?o:s,this._itemSize),r=n+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:n,last:r}}}calculateNumItems(){const e=this.getContentPosition(),n=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,r=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,s=(p,v)=>Math.ceil(p/(v||p)),o=p=>Math.ceil(p/2),l=this.both?{rows:s(r,this._itemSize[0]),cols:s(n,this._itemSize[1])}:s(this.horizontal?n:r,this._itemSize);return{numItemsInViewport:l,numToleratedItems:this.d_numToleratedItems||(this.both?[o(l.rows),o(l.cols)]:o(l))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:n}=this.calculateNumItems(),r=(l,u,p,v=!1)=>this.getLast(l+u+(l<p?2:3)*p,v),s=this.first,o=this.both?{rows:r(this.first.rows,e.rows,n[0]),cols:r(this.first.cols,e.cols,n[1],!0)}:r(this.first,e,n);this.last=o,this.numItemsInViewport=e,this.d_numToleratedItems=n,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&this.handleEvents("onLazyLoad",{first:s,last:o})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:n}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(n<this.defaultHeight?n:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,n=!1){return this._items?Math.min(n?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),n=parseInt(e.paddingLeft,10)+Math.max(parseInt(e.left,10),0),r=parseInt(e.paddingRight,10)+Math.max(parseInt(e.right,10),0),s=parseInt(e.paddingTop,10)+Math.max(parseInt(e.top,10),0),o=parseInt(e.paddingBottom,10)+Math.max(parseInt(e.bottom,10),0);return{left:n,right:r,top:s,bottom:o,x:n+r,y:s+o}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,n=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,r=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,s=(o,l)=>this.elementViewChild.nativeElement.style[o]=l;this.both||this.horizontal?(s("height",r),s("width",n)):s("height",r)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),n=(r,s,o,l=0)=>this.spacerStyle={...this.spacerStyle,[`${r}`]:(s||[]).length*o+l+"px"};this.both?(n("height",this._items,this._itemSize[0],e.y),n("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?n("width",this._columns||this._items,this._itemSize,e.x):n("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl){const n=e?e.first:this.first,r=(o,l)=>o*l,s=(o=0,l=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${o}px, ${l}px, 0)`};if(this.both)s(r(n.cols,this._itemSize[1]),r(n.rows,this._itemSize[0]));else{const o=r(n,this._itemSize);this.horizontal?s(o,0):s(0,o)}}}onScrollPositionChange(e){const n=e.target,r=this.getContentPosition(),s=(X,ce)=>X?X>ce?X-ce:X:0,o=(X,ce)=>Math.floor(X/(ce||X)),l=(X,ce,we,ye,Ae,We)=>X<=Ae?Ae:We?we-ye-Ae:ce+Ae-1,u=(X,ce,we,ye,Ae,We,ot)=>X<=We?0:Math.max(0,ot?X<ce?we:X-We:X>ce?we:X-2*We),p=(X,ce,we,ye,Ae,We=!1)=>{let ot=ce+ye+2*Ae;return X>=Ae&&(ot+=Ae+1),this.getLast(ot,We)},v=s(n.scrollTop,r.top),x=s(n.scrollLeft,r.left);let I=this.both?{rows:0,cols:0}:0,M=this.last,F=!1,j=this.lastScrollPos;if(this.both){const X=this.lastScrollPos.top<=v,ce=this.lastScrollPos.left<=x,we={rows:o(v,this._itemSize[0]),cols:o(x,this._itemSize[1])},ye={rows:l(we.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],X),cols:l(we.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],ce)};I={rows:u(we.rows,ye.rows,this.first.rows,0,0,this.d_numToleratedItems[0],X),cols:u(we.cols,ye.cols,this.first.cols,0,0,this.d_numToleratedItems[1],ce)},M={rows:p(we.rows,I.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:p(we.cols,I.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},F=I.rows!==this.first.rows||M.rows!==this.last.rows||I.cols!==this.first.cols||M.cols!==this.last.cols,j={top:v,left:x}}else{const X=this.horizontal?x:v,ce=this.lastScrollPos<=X,we=o(X,this._itemSize);I=u(we,l(we,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,ce),this.first,0,0,this.d_numToleratedItems,ce),M=p(we,I,0,this.numItemsInViewport,this.d_numToleratedItems),F=I!==this.first||M!==this.last,j=X}return{first:I,last:M,isRangeChanged:F,scrollPos:j}}onScrollChange(e){const{first:n,last:r,isRangeChanged:s,scrollPos:o}=this.onScrollPositionChange(e);if(s){const l={first:n,last:r};this.setContentPosition(l),this.first=n,this.last=r,this.lastScrollPos=o,this.handleEvents("onScrollIndexChange",l),this._lazy&&this.handleEvents("onLazyLoad",l)}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:n}=this.onScrollPositionChange(e);n&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.cd.detectChanges())},this._delay)}else this.onScrollChange(e)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(this.elementViewChild){const[e,n]=[Gt.getWidth(this.elementViewChild.nativeElement),Gt.getHeight(this.elementViewChild.nativeElement)],[r,s]=[e!==this.defaultWidth,n!==this.defaultHeight];(this.both?r||s:this.horizontal?r:this.vertical&&s)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=n,this.init()})}},this._resizeDelay)}handleEvents(e,n){return this.options&&this.options[e]?this.options[e](n):this[e].emit(n)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,n)=>this.getLoaderOptions(e,n),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const n=(this._items||[]).length,r=this.both?this.first.rows+e:this.first+e;return{index:r,count:n,first:0===r,last:r===n-1,even:r%2==0,odd:r%2!=0}}getLoaderOptions(e,n){const r=this.loaderArr.length;return{index:e,count:r,first:0===e,last:e===r-1,even:e%2==0,odd:e%2!=0,...n}}}return i.\u0275fac=function(e){return new(e||i)(Qt(Ho),Qt(Yo))},i.\u0275cmp=Ar({type:i,selectors:[["p-scroller"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(fJ,5),is(pJ,5)),2&e){let r;or(r=ar())&&(n.elementViewChild=r.first),or(r=ar())&&(n.contentViewChild=r.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",delay:"delay",resizeDelay:"resizeDelay",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[ya],ngContentSelectors:zJ,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,n){if(1&e&&(Ff(),Ze(0,kJ,8,13,"ng-container",0),Ze(1,BJ,2,1,"ng-template",null,1,vc)),2&e){const r=co(2);ve("ngIf",!n._disabled)("ngIfElse",r)}},dependencies:[_o,ru,Oo,Dl,Ko],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}\n"],encapsulation:2}),i})(),iv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})(),yh=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let n=this.getInk();if(!n||"none"===getComputedStyle(n,null).display)return;if(Gt.removeClass(n,"p-ink-active"),!Gt.getHeight(n)&&!Gt.getWidth(n)){let l=Math.max(Gt.getOuterWidth(this.el.nativeElement),Gt.getOuterHeight(this.el.nativeElement));n.style.height=l+"px",n.style.width=l+"px"}let r=Gt.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-Gt.getWidth(n)/2,o=e.pageY-r.top+document.body.scrollLeft-Gt.getHeight(n)/2;n.style.top=o+"px",n.style.left=s+"px",Gt.addClass(n,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&Gt.removeClass(e,"p-ink-active")}onAnimationEnd(e){Gt.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),Gt.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(Yo),Qt(Mp,8))},i.\u0275dir=qr({type:i,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),i})(),su=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})(),VJ=(()=>{class i{constructor(e){this.host=e,this.focused=!1}ngAfterContentChecked(){if(!this.focused&&this.autofocus){const e=Gt.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn))},i.\u0275dir=qr({type:i,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:["pAutoFocus","autofocus"]}}),i})(),UJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();function HJ(i,t){if(1&i&&(ct(0,"span"),cr(1),ht()),2&i){const e=_e();De(1),ds(e.label||"empty")}}function GJ(i,t){1&i&&qi(0)}const _w=function(i){return{height:i}},WJ=function(i,t){return{"p-dropdown-item":!0,"p-highlight":i,"p-disabled":t}},D2=function(i){return{$implicit:i}},jJ=["container"],$J=["filter"],qJ=["in"],XJ=["editableInput"],YJ=["items"],KJ=["scroller"];function ZJ(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(2);De(1),ds(e.label||"empty")}}function QJ(i,t){1&i&&qi(0)}const JJ=function(i){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":i}};function eee(i,t){if(1&i&&(ct(0,"span",12),Ze(1,ZJ,2,1,"ng-container",13),Ze(2,QJ,1,0,"ng-container",14),ht()),2&i){const e=_e();ve("ngClass",Bi(9,JJ,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),vr("id",e.labelId),De(1),ve("ngIf",!e.selectedItemTemplate),De(1),ve("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",Bi(11,D2,e.selectedOption))}}const tee=function(i){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":i}};function nee(i,t){if(1&i&&(ct(0,"span",15),cr(1),ht()),2&i){const e=_e();ve("ngClass",Bi(2,tee,null==e.placeholder||0===e.placeholder.length)),De(1),ds(e.placeholder||"empty")}}function iee(i,t){if(1&i){const e=Pi();ct(0,"input",16,17),mn("click",function(){return wt(e),It(_e().onEditableInputClick())})("input",function(r){return wt(e),It(_e().onEditableInputChange(r))})("focus",function(r){return wt(e),It(_e().onEditableInputFocus(r))})("blur",function(r){return wt(e),It(_e().onInputBlur(r))}),ht()}if(2&i){const e=_e();ve("disabled",e.disabled),vr("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function ree(i,t){if(1&i){const e=Pi();ct(0,"i",18),mn("click",function(r){return wt(e),It(_e().clear(r))}),ht()}}function see(i,t){1&i&&qi(0)}function oee(i,t){1&i&&qi(0)}const FV=function(i){return{options:i}};function aee(i,t){if(1&i&&(Hr(0),Ze(1,oee,1,0,"ng-container",14),Gr()),2&i){const e=_e(3);De(1),ve("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Bi(2,FV,e.filterOptions))}}function lee(i,t){if(1&i){const e=Pi();ct(0,"div",27)(1,"input",28,29),mn("keydown.enter",function(r){return r.preventDefault()})("keydown",function(r){return wt(e),It(_e(3).onKeydown(r,!1))})("input",function(r){return wt(e),It(_e(3).onFilterInputChange(r))}),ht(),si(3,"span",30),ht()}if(2&i){const e=_e(3);De(1),ve("value",e.filterValue||""),vr("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function cee(i,t){if(1&i&&(ct(0,"div",24),mn("click",function(n){return n.stopPropagation()}),Ze(1,aee,2,4,"ng-container",25),Ze(2,lee,4,4,"ng-template",null,26,vc),ht()),2&i){const e=co(3),n=_e(2);De(1),ve("ngIf",n.filterTemplate)("ngIfElse",e)}}function uee(i,t){1&i&&qi(0)}const NV=function(i,t){return{$implicit:i,options:t}};function hee(i,t){if(1&i&&Ze(0,uee,1,0,"ng-container",14),2&i){const e=t.$implicit,n=t.options;_e(2),ve("ngTemplateOutlet",co(7))("ngTemplateOutletContext",ys(2,NV,e,n))}}function dee(i,t){1&i&&qi(0)}function fee(i,t){if(1&i&&Ze(0,dee,1,0,"ng-container",14),2&i){const e=t.options;ve("ngTemplateOutlet",_e(4).loaderTemplate)("ngTemplateOutletContext",Bi(2,FV,e))}}function pee(i,t){1&i&&(Hr(0),Ze(1,fee,1,4,"ng-template",34),Gr())}function gee(i,t){if(1&i){const e=Pi();ct(0,"p-scroller",31,32),mn("onLazyLoad",function(r){return wt(e),It(_e(2).onLazyLoad.emit(r))}),Ze(2,hee,1,5,"ng-template",33),Ze(3,pee,2,0,"ng-container",13),ht()}if(2&i){const e=_e(2);la(Bi(8,_w,e.scrollHeight)),ve("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),De(3),ve("ngIf",e.loaderTemplate)}}function mee(i,t){1&i&&qi(0)}const vee=function(){return{}};function yee(i,t){if(1&i&&(Hr(0),Ze(1,mee,1,0,"ng-container",14),Gr()),2&i){_e();const e=co(7),n=_e();De(1),ve("ngTemplateOutlet",e)("ngTemplateOutletContext",ys(3,NV,n.optionsToDisplay,xa(2,vee)))}}function _ee(i,t){if(1&i&&(ct(0,"span"),cr(1),ht()),2&i){const e=_e().$implicit,n=_e(4);De(1),ds(n.getOptionGroupLabel(e)||"empty")}}function Cee(i,t){1&i&&qi(0)}function bee(i,t){1&i&&qi(0)}const BV=function(i,t){return{$implicit:i,selectedOption:t}};function xee(i,t){if(1&i&&(ct(0,"li",40),Ze(1,_ee,2,1,"span",13),Ze(2,Cee,1,0,"ng-container",14),ht(),Ze(3,bee,1,0,"ng-container",14)),2&i){const e=t.$implicit,n=_e(2).options,r=co(5),s=_e(2);ve("ngStyle",Bi(6,_w,n.itemSize+"px")),De(1),ve("ngIf",!s.groupTemplate),De(1),ve("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",Bi(8,D2,e)),De(1),ve("ngTemplateOutlet",r)("ngTemplateOutletContext",ys(10,BV,s.getOptionGroupChildren(e),s.selectedOption))}}function wee(i,t){if(1&i&&(Hr(0),Ze(1,xee,4,13,"ng-template",39),Gr()),2&i){const e=_e().$implicit;De(1),ve("ngForOf",e)}}function Aee(i,t){1&i&&qi(0)}function Iee(i,t){if(1&i&&(Hr(0),Ze(1,Aee,1,0,"ng-container",14),Gr()),2&i){const e=_e().$implicit,n=co(5),r=_e(2);De(1),ve("ngTemplateOutlet",n)("ngTemplateOutletContext",ys(2,BV,e,r.selectedOption))}}function See(i,t){if(1&i){const e=Pi();ct(0,"p-dropdownItem",41),mn("onClick",function(r){return wt(e),It(_e(4).onItemClick(r))}),ht()}if(2&i){const e=t.$implicit,n=_e().selectedOption,r=_e(3);ve("option",e)("selected",n==e)("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)}}function Eee(i,t){1&i&&Ze(0,See,1,5,"ng-template",39),2&i&&ve("ngForOf",t.$implicit)}function Tee(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(4);De(1),Yh(" ",e.emptyFilterMessageLabel," ")}}function Mee(i,t){1&i&&qi(0,null,43)}function Dee(i,t){if(1&i&&(ct(0,"li",42),Ze(1,Tee,2,1,"ng-container",25),Ze(2,Mee,2,0,"ng-container",19),ht()),2&i){const e=_e().options,n=_e(2);ve("ngStyle",Bi(4,_w,e.itemSize+"px")),De(1),ve("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),De(1),ve("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function Lee(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(4);De(1),Yh(" ",e.emptyMessageLabel," ")}}function Pee(i,t){1&i&&qi(0,null,44)}function Ree(i,t){if(1&i&&(ct(0,"li",42),Ze(1,Lee,2,1,"ng-container",25),Ze(2,Pee,2,0,"ng-container",19),ht()),2&i){const e=_e().options,n=_e(2);ve("ngStyle",Bi(4,_w,e.itemSize+"px")),De(1),ve("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),De(1),ve("ngTemplateOutlet",n.emptyTemplate)}}function kee(i,t){if(1&i&&(ct(0,"ul",35,36),Ze(2,wee,2,1,"ng-container",13),Ze(3,Iee,2,5,"ng-container",13),Ze(4,Eee,1,1,"ng-template",null,37,vc),Ze(6,Dee,3,6,"li",38),Ze(7,Ree,3,6,"li",38),ht()),2&i){const e=t.options,n=_e(2);la(e.contentStyle),ve("ngClass",e.contentStyleClass),vr("id",n.listId),De(2),ve("ngIf",n.group),De(1),ve("ngIf",!n.group),De(3),ve("ngIf",n.filterValue&&n.isEmpty()),De(1),ve("ngIf",!n.filterValue&&n.isEmpty())}}function Oee(i,t){1&i&&qi(0)}const Fee=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Nee=function(i){return{value:"visible",params:i}};function Bee(i,t){if(1&i){const e=Pi();ct(0,"div",0),mn("click",function(r){return wt(e),It(_e().onOverlayClick(r))})("@overlayAnimation.start",function(r){return wt(e),It(_e().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return wt(e),It(_e().onOverlayAnimationEnd(r))}),Ze(1,see,1,0,"ng-container",19),Ze(2,cee,4,2,"div",20),ct(3,"div",21),Ze(4,gee,4,10,"p-scroller",22),Ze(5,yee,2,6,"ng-container",13),Ze(6,kee,8,8,"ng-template",null,23,vc),ht(),Ze(8,Oee,1,0,"ng-container",19),ht()}if(2&i){const e=_e();Vr(e.panelStyleClass),ve("ngClass","p-dropdown-panel p-component")("@overlayAnimation",Bi(15,Nee,ys(12,Fee,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),De(1),ve("ngTemplateOutlet",e.headerTemplate),De(1),ve("ngIf",e.filter),De(1),tf("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),De(1),ve("ngIf",e.virtualScroll),De(1),ve("ngIf",!e.virtualScroll),De(3),ve("ngTemplateOutlet",e.footerTemplate)}}const zee=function(i,t,e,n){return{"p-dropdown p-component":!0,"p-disabled":i,"p-dropdown-open":t,"p-focus":e,"p-dropdown-clearable":n}},Vee={provide:jc,useExisting:hs(()=>L2),multi:!0};let Uee=(()=>{class i{constructor(){this.onClick=new jn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ar({type:i,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(ct(0,"li",0),mn("click",function(s){return n.onOptionClick(s)}),Ze(1,HJ,2,1,"span",1),Ze(2,GJ,1,0,"ng-container",2),ht()),2&e&&(ve("ngStyle",Bi(8,_w,n.itemSize+"px"))("id",n.selected?"p-highlighted-option":"")("ngClass",ys(10,WJ,n.selected,n.disabled)),vr("aria-label",n.label)("aria-selected",n.selected),De(1),ve("ngIf",!n.template),De(1),ve("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Bi(13,D2,n.option)))},dependencies:[_o,Oo,Dl,Ko,yh],encapsulation:2}),i})(),L2=(()=>{class i{constructor(e,n,r,s,o,l,u){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.filterService=o,this.config=l,this.overlayService=u,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.autoZIndex=!0,this.baseZIndex=0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.onChange=new jn,this.onFilter=new jn,this.onFocus=new jn,this.onBlur=new jn,this.onClick=new jn,this.onShow=new jn,this.onHide=new jn,this.onClear=new jn,this.onLazyLoad=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=Kx()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&gr.isNotEmpty(this.value)&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Gc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Gc.EMPTY_FILTER_MESSAGE)}get filled(){return this.value||null!=this.value||null!=this.value}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?gr.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?gr.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?gr.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?gr.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?gr.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const n=e.option;this.isOptionDisabled(n)||(this.selectItem(e.originalEvent,n),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},150)}selectItem(e,n){this.selectedOption!=n&&(this.selectedOption=n,this.value=this.getOptionValue(n),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(Gt.findSingle(this.overlay,"li.p-highlight")&&Gt.scrollInView(this.itemsWrapper,Gt.findSingle(this.overlay,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}isInputClick(e){return Gt.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputClick(){this.bindDocumentClickListener()}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){switch(e.toState){case"visible":if(this.overlay=e.element,this.itemsWrapper=Gt.findSingle(this.overlay,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Ll.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.options&&this.options.length)if(this.virtualScroll){const n=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==n&&this.scroller.scrollToIndex(n)}else{let n=Gt.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");n&&n.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e);break;case"void":this.onOverlayHide(),this.onHide.emit(e)}}onOverlayAnimationEnd(e){"void"===e.toState&&Ll.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Gt.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Gt.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}alignOverlay(){this.overlay&&(this.appendTo?Gt.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Gt.relativePosition(this.overlay,this.containerViewChild.nativeElement))}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e-1;0<=r;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=this.optionsToDisplay.length-1;r>=e;r--){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}findNextEnabledOption(e){let n;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let r=e+1;r<this.optionsToDisplay.length;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}if(!n)for(let r=0;r<e;r++){let s=this.optionsToDisplay[r];if(!this.isOptionDisabled(s)){n=s;break}}}return n}onKeydown(e,n){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex+1;s<this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0):this.optionsToDisplay[r.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findNextEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let r=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==r){let s=r.itemIndex-1;if(s>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[r.groupIndex])[s]),this.selectedOptionUpdated=!0;else if(s<0){let o=this.optionsToDisplay[r.groupIndex-1];o&&(this.selectItem(e,this.getOptionGroupChildren(o)[this.getOptionGroupChildren(o).length-1]),this.selectedOptionUpdated=!0)}}}else{let r=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,s=this.findPrevEnabledOption(r);s&&(this.selectItem(e,s),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:n&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:n&&!e.metaKey&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const n=e.key;let r;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=n,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+n:n,this.group){let s=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};r=this.searchOptionWithinGroup(s)}else{let s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;r=this.searchOption(++s)}r&&!this.isOptionDisabled(r)&&(this.selectItem(e,r),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let n;return this.searchValue&&(n=this.searchOptionInRange(e,this.optionsToDisplay.length),n||(n=this.searchOptionInRange(0,e))),n}searchOptionInRange(e,n){for(let r=e;r<n;r++){let s=this.optionsToDisplay[r];if(this.getOptionLabel(s).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(s))return s}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let r=e.groupIndex;r<this.optionsToDisplay.length;r++)for(let s=e.groupIndex===r?e.itemIndex+1:0;s<this.getOptionGroupChildren(this.optionsToDisplay[r]).length;s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}for(let r=0;r<=e.groupIndex;r++)for(let s=0;s<(e.groupIndex===r?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[r]).length);s++){let o=this.getOptionGroupChildren(this.optionsToDisplay[r])[s];if(this.getOptionLabel(o).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(o))return o}}return null}findOptionIndex(e,n){let r=-1;if(n)for(let s=0;s<n.length;s++)if(null==e&&null==this.getOptionValue(n[s])||gr.equals(e,this.getOptionValue(n[s]),this.dataKey)){r=s;break}return r}findOptionGroupIndex(e,n){let r,s;if(n)for(let o=0;o<n.length&&(r=o,s=this.findOptionIndex(e,this.getOptionGroupChildren(n[o])),-1===s);o++);return-1!==s?{groupIndex:r,itemIndex:s}:-1}findOption(e,n,r){if(this.group&&!r){let s;if(n&&n.length)for(let o of n)if(s=this.findOption(e,this.getOptionGroupChildren(o),!0),s)break;return s}{let s=this.findOptionIndex(e,n);return-1!=s?n[s]:null}}onFilterInputChange(e){let n=e.target.value;n&&n.length?(this._filterValue=n,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this.optionsToDisplay=n}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?Gt.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():Gt.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&(this.hide(),this.unbindDocumentClickListener()),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Gt.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new yw(this.containerViewChild.nativeElement,e=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.itemsWrapper=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Ll.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(d),Qt(Ho),Qt(Yo),Qt(d1),Qt(Mp),Qt(Zx))},i.\u0275cmp=Ar({type:i,selectors:[["p-dropdown"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(jJ,5),is($J,5),is(qJ,5),is(XJ,5),is(YJ,5),is(KJ,5)),2&e){let r;or(r=ar())&&(n.containerViewChild=r.first),or(r=ar())&&(n.filterViewChild=r.first),or(r=ar())&&(n.accessibleViewChild=r.first),or(r=ar())&&(n.editableInputViewChild=r.first),or(r=ar())&&(n.itemsViewChild=r.first),or(r=ar())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,n){2&e&&Tp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused||n.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",disabled:"disabled",itemSize:"itemSize",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[ko([Vee])],decls:12,vars:25,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","role","combobox",3,"disabled","pAutoFocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","click","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","click","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,n){1&e&&(ct(0,"div",0,1),mn("click",function(s){return n.onMouseclick(s)}),ct(2,"div",2)(3,"input",3,4),mn("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)})("keydown",function(s){return n.onKeydown(s,!0)}),ht()(),Ze(5,eee,3,13,"span",5),Ze(6,nee,2,4,"span",6),Ze(7,iee,2,4,"input",7),Ze(8,ree,1,0,"i",8),ct(9,"div",9),si(10,"span",10),ht(),Ze(11,Bee,9,17,"div",11),ht()),2&e&&(Vr(n.styleClass),ve("ngClass",Nf(20,zee,n.disabled,n.overlayVisible,n.focused,n.showClear&&!n.disabled))("ngStyle",n.style),De(3),ve("disabled",n.disabled)("pAutoFocus",n.autofocus),vr("id",n.inputId)("placeholder",n.placeholder)("aria-label",n.ariaLabel)("aria-expanded",!1)("aria-labelledby",n.ariaLabelledBy)("tabindex",n.tabindex)("aria-activedescendant",n.overlayVisible?n.labelId:null),De(2),ve("ngIf",!n.editable&&null!=n.label),De(1),ve("ngIf",!n.editable&&null==n.label),De(1),ve("ngIf",n.editable),De(1),ve("ngIf",null!=n.value&&n.showClear&&!n.disabled),De(1),vr("aria-expanded",n.overlayVisible),De(1),ve("ngClass",n.dropdownIcon),De(1),ve("ngIf",n.overlayVisible))},dependencies:[_o,ru,Oo,Dl,Ko,_l,s_,F1,VJ,Uee],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown .p-dropdown-panel{min-width:100%}.p-dropdown-panel{position:absolute;top:0;left:0}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,data:{animation:[ry("overlayAnimation",[Eu(":enter",[Ja({opacity:0,transform:"scaleY(0.8)"}),Cc("{{showTransitionParams}}")]),Eu(":leave",[Cc("{{hideTransitionParams}}",Ja({opacity:0}))])])]},changeDetection:0}),i})(),N1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na,nv,su,iv,UJ,Na,iv]}),i})(),P2=(()=>{class i{constructor(e,n,r){this.el=e,this.ngModel=n,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(r_,8),Qt(Ho))},i.\u0275dir=qr({type:i,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,n){1&e&&mn("input",function(s){return n.onInput(s)}),2&e&&Tp("p-filled",n.filled)}}),i})(),R2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();function Hee(i,t){1&i&&qi(0)}const Gee=function(i,t,e,n){return{"p-button-icon":!0,"p-button-icon-left":i,"p-button-icon-right":t,"p-button-icon-top":e,"p-button-icon-bottom":n}};function Wee(i,t){if(1&i&&si(0,"span",4),2&i){const e=_e();Vr(e.loading?"p-button-loading-icon "+e.loadingIcon:e.icon),ve("ngClass",Nf(4,Gee,"left"===e.iconPos&&e.label,"right"===e.iconPos&&e.label,"top"===e.iconPos&&e.label,"bottom"===e.iconPos&&e.label)),vr("aria-hidden",!0)}}function jee(i,t){if(1&i&&(ct(0,"span",5),cr(1),ht()),2&i){const e=_e();vr("aria-hidden",e.icon&&!e.label),De(1),ds(e.label||"\xa0")}}function $ee(i,t){if(1&i&&(ct(0,"span",4),cr(1),ht()),2&i){const e=_e();Vr(e.badgeClass),ve("ngClass",e.badgeStyleClass()),De(1),ds(e.badge)}}const qee=function(i,t,e,n,r){return{"p-button p-component":!0,"p-button-icon-only":i,"p-button-vertical":t,"p-disabled":e,"p-button-loading":n,"p-button-loading-label-only":r}},Xee=["*"];let Cw=(()=>{class i{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,Gt.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),(this.icon||this.loading)&&this.createIconEl();let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",this.label?e.appendChild(document.createTextNode(this.label)):e.innerHTML="&nbsp;",this.el.nativeElement.appendChild(e),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createIconEl(){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let n=this.label?"p-button-icon-"+this.iconPos:null;n&&Gt.addClass(e,n);let r=this.getIconClass();r&&Gt.addMultipleClasses(e,r);let s=Gt.findSingle(this.el.nativeElement,".p-button-label");s?this.el.nativeElement.insertBefore(e,s):this.el.nativeElement.appendChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}setIconClass(){let e=Gt.findSingle(this.el.nativeElement,".p-button-icon");e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIconEl()}removeIconElement(){let e=Gt.findSingle(this.el.nativeElement,".p-button-icon");this.el.nativeElement.removeChild(e)}get label(){return this._label}set label(e){this._label=e,this.initialized&&(Gt.findSingle(this.el.nativeElement,".p-button-label").textContent=this._label||"&nbsp;",(this.loading||this.icon)&&this.setIconClass(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.setIconClass(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.loading||this.icon?this.setIconClass():this.removeIconElement(),this.setStyleClass())}ngOnDestroy(){this.initialized=!1}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn))},i.\u0275dir=qr({type:i,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),i})(),B1=(()=>{class i{constructor(){this.type="button",this.iconPos="left",this.loading=!1,this.loadingIcon="pi pi-spinner pi-spin",this.onClick=new jn,this.onFocus=new jn,this.onBlur=new jn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ar({type:i,selectors:[["p-button"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:Xee,decls:6,vars:17,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[3,"ngClass","class",4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass"],[1,"p-button-label"]],template:function(e,n){1&e&&(Ff(),ct(0,"button",0),mn("click",function(s){return n.onClick.emit(s)})("focus",function(s){return n.onFocus.emit(s)})("blur",function(s){return n.onBlur.emit(s)}),nu(1),Ze(2,Hee,1,0,"ng-container",1),Ze(3,Wee,1,9,"span",2),Ze(4,jee,2,2,"span",3),Ze(5,$ee,2,4,"span",2),ht()),2&e&&(Vr(n.styleClass),ve("ngStyle",n.style)("disabled",n.disabled||n.loading)("ngClass",BC(11,qee,n.icon&&!n.label,("top"===n.iconPos||"bottom"===n.iconPos)&&n.label,n.disabled||n.loading,n.loading,n.loading&&!n.icon&&n.label)),vr("type",n.type)("aria-label",n.ariaLabel),De(2),ve("ngTemplateOutlet",n.contentTemplate),De(1),ve("ngIf",!n.contentTemplate&&(n.icon||n.loading)),De(1),ve("ngIf",!n.contentTemplate),De(1),ve("ngIf",!n.contentTemplate&&n.badge))},dependencies:[_o,Oo,Dl,Ko,yh],encapsulation:2,changeDetection:0}),i})(),rv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,su]}),i})();const Yee=["input"];function Kee(i,t){if(1&i){const e=Pi();ct(0,"i",6),mn("click",function(){return wt(e),It(_e().clear())}),ht()}}const zV=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},VV=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function Zee(i,t){if(1&i){const e=Pi();ct(0,"span",7)(1,"button",8),mn("mousedown",function(r){return wt(e),It(_e().onUpButtonMouseDown(r))})("mouseup",function(){return wt(e),It(_e().onUpButtonMouseUp())})("mouseleave",function(){return wt(e),It(_e().onUpButtonMouseLeave())})("keydown",function(r){return wt(e),It(_e().onUpButtonKeyDown(r))})("keyup",function(){return wt(e),It(_e().onUpButtonKeyUp())}),ht(),ct(2,"button",8),mn("mousedown",function(r){return wt(e),It(_e().onDownButtonMouseDown(r))})("mouseup",function(){return wt(e),It(_e().onDownButtonMouseUp())})("mouseleave",function(){return wt(e),It(_e().onDownButtonMouseLeave())})("keydown",function(r){return wt(e),It(_e().onDownButtonKeyDown(r))})("keyup",function(){return wt(e),It(_e().onDownButtonKeyUp())}),ht()()}if(2&i){const e=_e();De(1),Vr(e.incrementButtonClass),ve("ngClass",xa(10,zV))("icon",e.incrementButtonIcon)("disabled",e.disabled),De(1),Vr(e.decrementButtonClass),ve("ngClass",xa(11,VV))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function Qee(i,t){if(1&i){const e=Pi();ct(0,"button",8),mn("mousedown",function(r){return wt(e),It(_e().onUpButtonMouseDown(r))})("mouseup",function(){return wt(e),It(_e().onUpButtonMouseUp())})("mouseleave",function(){return wt(e),It(_e().onUpButtonMouseLeave())})("keydown",function(r){return wt(e),It(_e().onUpButtonKeyDown(r))})("keyup",function(){return wt(e),It(_e().onUpButtonKeyUp())}),ht()}if(2&i){const e=_e();Vr(e.incrementButtonClass),ve("ngClass",xa(5,zV))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function Jee(i,t){if(1&i){const e=Pi();ct(0,"button",8),mn("mousedown",function(r){return wt(e),It(_e().onDownButtonMouseDown(r))})("mouseup",function(){return wt(e),It(_e().onDownButtonMouseUp())})("mouseleave",function(){return wt(e),It(_e().onDownButtonMouseLeave())})("keydown",function(r){return wt(e),It(_e().onDownButtonKeyDown(r))})("keyup",function(){return wt(e),It(_e().onDownButtonKeyUp())}),ht()}if(2&i){const e=_e();Vr(e.decrementButtonClass),ve("ngClass",xa(5,VV))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const ete=function(i,t,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":i,"p-inputnumber-buttons-horizontal":t,"p-inputnumber-buttons-vertical":e}},tte={provide:jc,useExisting:hs(()=>UV),multi:!0};let UV=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new jn,this.onFocus=new jn,this.onBlur=new jn,this.onKeyDown=new jn,this.onClear=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!e[r])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),n=new Map(e.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>n.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return e.toString()}return""}parseValue(e){let n=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(n){if("-"===n)return n;let r=+n;return isNaN(r)?null:r}return null}repeat(e,n,r){if(this.readonly)return;let s=n||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,r)},s),this.spin(e,r)}spin(e,n){let r=this.step*n,s=this.parseValue(this.input.nativeElement.value)||0,o=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(o).length||(this.updateInput(o,null,"spin",null),this.updateModel(e,o),this.handleOnInput(e,s,o))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let n=e.target.selectionStart,r=e.target.selectionEnd,s=e.target.value,o=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(s.charAt(n-1))||e.preventDefault();break;case 39:this.isNumeralChar(s.charAt(n))||e.preventDefault();break;case 13:o=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(e,o);break;case 8:if(e.preventDefault(),n===r){const l=s.charAt(n-1),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n-2)+s.slice(n-1);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n-1,n-1):o=s.slice(0,n-1)+s.slice(n);else if(u>0&&n>u){const x=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n-1)+x+s.slice(n)}else 1===p?(o=s.slice(0,n-1)+"0"+s.slice(n),o=this.parseValue(o)>0?o:""):o=s.slice(0,n-1)+s.slice(n)}this.updateValue(e,o,null,"delete-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range");break;case 46:if(e.preventDefault(),n===r){const l=s.charAt(n),{decimalCharIndex:u,decimalCharIndexWithoutPrefix:p}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(l)){const v=this.getDecimalLength(s);if(this._group.test(l))this._group.lastIndex=0,o=s.slice(0,n)+s.slice(n+2);else if(this._decimal.test(l))this._decimal.lastIndex=0,v?this.input.nativeElement.setSelectionRange(n+1,n+1):o=s.slice(0,n)+s.slice(n+1);else if(u>0&&n>u){const x=this.isDecimalMode()&&(this.minFractionDigits||0)<v?"":"0";o=s.slice(0,n)+x+s.slice(n+1)}else 1===p?(o=s.slice(0,n)+"0"+s.slice(n+1),o=this.parseValue(o)>0?o:""):o=s.slice(0,n)+s.slice(n+1)}this.updateValue(e,o,null,"delete-back-single")}else o=this.deleteRange(s,n,r),this.updateValue(e,o,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;e.preventDefault();let n=e.which||e.keyCode,r=String.fromCharCode(n);const s=this.isDecimalSign(r),o=this.isMinusSign(r);(48<=n&&n<=57||o||s)&&this.insert(e,r,{isDecimalSign:s,isMinusSign:o})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let n=(e.clipboardData||window.clipboardData).getData("Text");if(n){let r=this.parseValue(n);null!=r&&this.insert(e,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let n=e.search(this._decimal);this._decimal.lastIndex=0;const s=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:n,decimalCharIndexWithoutPrefix:s}}getCharIndexes(e){const n=e.search(this._decimal);this._decimal.lastIndex=0;const r=e.search(this._minusSign);this._minusSign.lastIndex=0;const s=e.search(this._suffix);this._suffix.lastIndex=0;const o=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:n,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:o}}insert(e,n,r={isDecimalSign:!1,isMinusSign:!1}){const s=n.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let o=this.input.nativeElement.selectionStart,l=this.input.nativeElement.selectionEnd,u=this.input.nativeElement.value.trim();const{decimalCharIndex:p,minusCharIndex:v,suffixCharIndex:x,currencyCharIndex:I}=this.getCharIndexes(u);let M;if(r.isMinusSign)0===o&&(M=u,(-1===v||0!==l)&&(M=this.insertText(u,n,0,l)),this.updateValue(e,M,n,"insert"));else if(r.isDecimalSign)p>0&&o===p?this.updateValue(e,u,n,"insert"):(p>o&&p<l||-1===p&&this.maxFractionDigits)&&(M=this.insertText(u,n,o,l),this.updateValue(e,M,n,"insert"));else{const F=this.numberFormat.resolvedOptions().maximumFractionDigits,j=o!==l?"range-insert":"insert";if(p>0&&o>p){if(o+n.length-(p+1)<=F){const X=I>=o?I-1:x>=o?x:u.length;M=u.slice(0,o)+n+u.slice(o+n.length,X)+u.slice(X),this.updateValue(e,M,n,j)}}else M=this.insertText(u,n,o,l),this.updateValue(e,M,n,j)}}insertText(e,n,r,s){if(2===("."===n?n:n.split(".")).length){const l=e.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,l>0?e.slice(0,r)+this.formatValue(n)+e.slice(s):e||this.formatValue(n)}return s-r===e.length?this.formatValue(n):0===r?n+e.slice(s):s===e.length?e.slice(0,r)+n:e.slice(0,r)+n+e.slice(s)}deleteRange(e,n,r){let s;return s=r-n===e.length?"":0===n?e.slice(r):r===e.length?e.slice(0,n):e.slice(0,n)+e.slice(r),s}initCursor(){let e=this.input.nativeElement.selectionStart,n=this.input.nativeElement.value,r=n.length,s=null,o=(this.prefixChar||"").length;n=n.replace(this._prefix,""),e-=o;let l=n.charAt(e);if(this.isNumeralChar(l))return e+o;let u=e-1;for(;u>=0;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u--}if(null!==s)this.input.nativeElement.setSelectionRange(s+1,s+1);else{for(u=e;u<r;){if(l=n.charAt(u),this.isNumeralChar(l)){s=u+o;break}u++}null!==s&&this.input.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){this.readonly||this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,n,r,s){let o=this.input.nativeElement.value,l=null;null!=n&&(l=this.parseValue(n),l=l||this.allowEmpty?l:0,this.updateInput(l,r,s,n),this.handleOnInput(e,o,l))}handleOnInput(e,n,r){this.isValueChanged(n,r)&&this.onInput.emit({originalEvent:e,value:r})}isValueChanged(e,n){return null===n&&null!==e||null!=n&&n!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,n,r,s){n=n||"";let o=this.input.nativeElement.value,l=this.formatValue(e),u=o.length;if(l!==s&&(l=this.concatValues(l,s)),0===u){this.input.nativeElement.value=l,this.input.nativeElement.setSelectionRange(0,0);const v=this.initCursor()+n.length;this.input.nativeElement.setSelectionRange(v,v)}else{let p=this.input.nativeElement.selectionStart,v=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<l.length)return;this.input.nativeElement.value=l;let x=l.length;if("range-insert"===r){const I=this.parseValue((o||"").slice(0,p)),F=(null!==I?I.toString():"").split("").join(`(${this.groupChar})?`),j=new RegExp(F,"g");j.test(l);const X=n.split("").join(`(${this.groupChar})?`),ce=new RegExp(X,"g");ce.test(l.slice(j.lastIndex)),v=j.lastIndex+ce.lastIndex,this.input.nativeElement.setSelectionRange(v,v)}else if(x===u)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(v+1,v+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(v-1,v-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(v,v);else if("delete-back-single"===r){let I=o.charAt(v-1),M=o.charAt(v),F=u-x,j=this._group.test(M);j&&1===F?v+=1:!j&&this.isNumeralChar(I)&&(v+=-1*F+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(v,v)}else if("-"===o&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const M=this.initCursor()+n.length+1;this.input.nativeElement.setSelectionRange(M,M)}else v+=x-u,this.input.nativeElement.setSelectionRange(v,v)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,n){if(e&&n){let r=n.search(this._decimal);return this._decimal.lastIndex=0,-1!==r?e.split(this._decimal)[0]+n.slice(r):e}return e}getDecimalLength(e){if(e){const n=e.split(this._decimal);if(2===n.length)return n[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let n=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(n),this.input.nativeElement.setAttribute("aria-valuenow",n),this.updateModel(e,n),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,n){this.value!==n&&(this.value=n,this.onModelChange(n)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-inputNumber"]],viewQuery:function(e,n){if(1&e&&is(Yee,5),2&e){let r;or(r=ar())&&(n.input=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Tp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focused)("p-inputnumber-clearable",n.showClear&&"vertical"!=n.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[ko([tte]),ya],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,n){1&e&&(ct(0,"span",0)(1,"input",1,2),mn("input",function(s){return n.onUserInput(s)})("keydown",function(s){return n.onInputKeyDown(s)})("keypress",function(s){return n.onInputKeyPress(s)})("paste",function(s){return n.onPaste(s)})("click",function(){return n.onInputClick()})("focus",function(s){return n.onInputFocus(s)})("blur",function(s){return n.onInputBlur(s)}),ht(),Ze(3,Kee,1,0,"i",3),Ze(4,Zee,3,12,"span",4),Ze(5,Qee,1,6,"button",5),Ze(6,Jee,1,6,"button",5),ht()),2&e&&(Vr(n.styleClass),ve("ngClass",qu(28,ete,n.showButtons&&"stacked"===n.buttonLayout,n.showButtons&&"horizontal"===n.buttonLayout,n.showButtons&&"vertical"===n.buttonLayout))("ngStyle",n.style),De(1),Vr(n.inputStyleClass),ve("ngClass","p-inputnumber-input")("ngStyle",n.inputStyle)("value",n.formattedValue())("disabled",n.disabled)("readonly",n.readonly),vr("placeholder",n.placeholder)("title",n.title)("id",n.inputId)("size",n.size)("name",n.name)("autocomplete",n.autocomplete)("maxlength",n.maxlength)("tabindex",n.tabindex)("aria-label",n.ariaLabel)("aria-required",n.ariaRequired)("required",n.required)("min",n.min)("max",n.max),De(2),ve("ngIf","vertical"!=n.buttonLayout&&n.showClear&&n.value),De(1),ve("ngIf",n.showButtons&&"stacked"===n.buttonLayout),De(1),ve("ngIf",n.showButtons&&"stacked"!==n.buttonLayout),De(1),ve("ngIf",n.showButtons&&"stacked"!==n.buttonLayout))},dependencies:[_o,Oo,Ko,P2,Cw],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),z1=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,R2,rv]}),i})();function nte(i,t){1&i&&qi(0)}const k2=function(i){return{$implicit:i}};function ite(i,t){if(1&i&&(ct(0,"div",15),Ze(1,nte,1,0,"ng-container",16),ht()),2&i){const e=_e(2);De(1),ve("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",Bi(2,k2,e.paginatorState))}}function rte(i,t){if(1&i&&(ct(0,"span",17),cr(1),ht()),2&i){const e=_e(2);De(1),ds(e.currentPageReport)}}const V1=function(i){return{"p-disabled":i}};function ste(i,t){if(1&i){const e=Pi();ct(0,"button",18),mn("click",function(r){return wt(e),It(_e(2).changePageToFirst(r))}),si(1,"span",19),ht()}if(2&i){const e=_e(2);ve("disabled",e.isFirstPage()||e.empty())("ngClass",Bi(2,V1,e.isFirstPage()||e.empty()))}}const ote=function(i){return{"p-highlight":i}};function ate(i,t){if(1&i){const e=Pi();ct(0,"button",22),mn("click",function(r){const o=wt(e).$implicit;return It(_e(3).onPageLinkClick(r,o-1))}),cr(1),ht()}if(2&i){const e=t.$implicit,n=_e(3);ve("ngClass",Bi(2,ote,e-1==n.getPage())),De(1),ds(e)}}function lte(i,t){if(1&i&&(ct(0,"span",20),Ze(1,ate,2,4,"button",21),ht()),2&i){const e=_e(2);De(1),ve("ngForOf",e.pageLinks)}}function cte(i,t){1&i&&cr(0),2&i&&ds(_e(3).currentPageReport)}function ute(i,t){if(1&i){const e=Pi();ct(0,"p-dropdown",23),mn("onChange",function(r){return wt(e),It(_e(2).onPageDropdownChange(r))}),Ze(1,cte,1,1,"ng-template",24),ht()}if(2&i){const e=_e(2);ve("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function hte(i,t){if(1&i){const e=Pi();ct(0,"button",25),mn("click",function(r){return wt(e),It(_e(2).changePageToLast(r))}),si(1,"span",26),ht()}if(2&i){const e=_e(2);ve("disabled",e.isLastPage()||e.empty())("ngClass",Bi(2,V1,e.isLastPage()||e.empty()))}}function dte(i,t){if(1&i){const e=Pi();ct(0,"p-inputNumber",27),mn("ngModelChange",function(r){return wt(e),It(_e(2).changePage(r-1))}),ht()}if(2&i){const e=_e(2);ve("ngModel",e.currentPage())("disabled",e.empty())}}function fte(i,t){1&i&&qi(0)}function pte(i,t){if(1&i&&Ze(0,fte,1,0,"ng-container",16),2&i){const e=t.$implicit;ve("ngTemplateOutlet",_e(4).dropdownItemTemplate)("ngTemplateOutletContext",Bi(2,k2,e))}}function gte(i,t){1&i&&(Hr(0),Ze(1,pte,1,4,"ng-template",30),Gr())}function mte(i,t){if(1&i){const e=Pi();ct(0,"p-dropdown",28),mn("ngModelChange",function(r){return wt(e),It(_e(2).rows=r)})("onChange",function(r){return wt(e),It(_e(2).onRppChange(r))}),Ze(1,gte,2,0,"ng-container",29),ht()}if(2&i){const e=_e(2);ve("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),De(1),ve("ngIf",e.dropdownItemTemplate)}}function vte(i,t){1&i&&qi(0)}function yte(i,t){if(1&i&&(ct(0,"div",31),Ze(1,vte,1,0,"ng-container",16),ht()),2&i){const e=_e(2);De(1),ve("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",Bi(2,k2,e.paginatorState))}}function _te(i,t){if(1&i){const e=Pi();ct(0,"div",1),Ze(1,ite,2,4,"div",2),Ze(2,rte,2,1,"span",3),Ze(3,ste,2,4,"button",4),ct(4,"button",5),mn("click",function(r){return wt(e),It(_e().changePageToPrev(r))}),si(5,"span",6),ht(),Ze(6,lte,2,1,"span",7),Ze(7,ute,2,5,"p-dropdown",8),ct(8,"button",9),mn("click",function(r){return wt(e),It(_e().changePageToNext(r))}),si(9,"span",10),ht(),Ze(10,hte,2,4,"button",11),Ze(11,dte,1,2,"p-inputNumber",12),Ze(12,mte,2,6,"p-dropdown",13),Ze(13,yte,2,4,"div",14),ht()}if(2&i){const e=_e();Vr(e.styleClass),ve("ngStyle",e.style)("ngClass","p-paginator p-component"),De(1),ve("ngIf",e.templateLeft),De(1),ve("ngIf",e.showCurrentPageReport),De(1),ve("ngIf",e.showFirstLastIcon),De(1),ve("disabled",e.isFirstPage()||e.empty())("ngClass",Bi(17,V1,e.isFirstPage()||e.empty())),De(2),ve("ngIf",e.showPageLinks),De(1),ve("ngIf",e.showJumpToPageDropdown),De(1),ve("disabled",e.isLastPage()||e.empty())("ngClass",Bi(19,V1,e.isLastPage()||e.empty())),De(2),ve("ngIf",e.showFirstLastIcon),De(1),ve("ngIf",e.showJumpToPageInput),De(1),ve("ngIf",e.rowsPerPageOptions),De(1),ve("ngIf",e.templateRight)}}let Cte=(()=>{class i{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new jn,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),n=Math.min(this.pageLinkSize,e),r=Math.max(0,Math.ceil(this.getPage()-n/2)),s=Math.min(e-1,r+n-1);return r=Math.max(0,r-(this.pageLinkSize-(s-r+1))),[r,s]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),r=e[1];for(let s=e[0];s<=r;s++)this.pageLinks.push(s+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let s=0;s<this.getPageCount();s++)this.pageItems.push({label:String(s+1),value:s})}}changePage(e){var n=this.getPageCount();if(e>=0&&e<n){this._first=this.rows*e;var r={page:e,first:this.first,rows:this.rows,pageCount:n};this.updatePageLinks(),this.onPageChange.emit(r),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,n){this.changePage(n),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return i.\u0275fac=function(e){return new(e||i)(Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[ya],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,n){1&e&&Ze(0,_te,14,21,"div",0),2&e&&ve("ngIf",!!n.alwaysShow||n.pageLinks&&n.pageLinks.length>1)},dependencies:[_o,ru,Oo,Dl,Ko,L2,_l,UV,dw,r_,yh],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),i})(),HV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,N1,z1,O1,Na,su,N1,z1,O1,Na]}),i})();function bte(i,t){1&i&&si(0,"span",8),2&i&&(Vr(_e(2).$implicit.icon),ve("ngClass","p-button-icon p-button-icon-left"))}function xte(i,t){if(1&i&&(Hr(0),Ze(1,bte,1,3,"span",6),ct(2,"span",7),cr(3),ht(),Gr()),2&i){const e=_e().$implicit,n=_e();De(1),ve("ngIf",e.icon),De(2),ds(n.getOptionLabel(e))}}function wte(i,t){1&i&&qi(0)}const Ate=function(i,t){return{$implicit:i,index:t}};function Ite(i,t){if(1&i&&Ze(0,wte,1,0,"ng-container",9),2&i){const e=_e(),n=e.$implicit,r=e.index;ve("ngTemplateOutlet",_e().itemTemplate)("ngTemplateOutletContext",ys(2,Ate,n,r))}}const Ste=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-button-icon-only":e}};function Ete(i,t){if(1&i){const e=Pi();ct(0,"div",2,3),mn("click",function(r){const s=wt(e),o=s.$implicit,l=s.index;return It(_e().onItemClick(r,o,l))})("keydown.enter",function(r){const s=wt(e),o=s.$implicit,l=s.index;return It(_e().onItemClick(r,o,l))})("blur",function(){return wt(e),It(_e().onBlur())}),Ze(2,xte,4,2,"ng-container",4),Ze(3,Ite,1,5,"ng-template",null,5,vc),ht()}if(2&i){const e=t.$implicit,n=co(4),r=_e();Vr(e.styleClass),ve("ngClass",qu(10,Ste,r.isSelected(e),r.disabled||r.isOptionDisabled(e),e.icon&&!r.getOptionLabel(e))),vr("aria-pressed",r.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",r.disabled?null:r.tabindex)("aria-labelledby",r.getOptionLabel(e)),De(2),ve("ngIf",!r.itemTemplate)("ngIfElse",n)}}const Tte={provide:jc,useExisting:hs(()=>Mte),multi:!0};let Mte=(()=>{class i{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new jn,this.onChange=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?gr.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?gr.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?gr.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,n,r){if(!this.disabled&&!this.isOptionDisabled(n)){if(this.multiple)this.isSelected(n)?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let s=this.getOptionValue(n);this.value!==s&&(this.value=this.getOptionValue(n),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:n,index:r})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(n=>!gr.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(gr.equals(s,r,this.dataKey)){n=!0;break}}else n=gr.equals(this.getOptionValue(e),this.value,this.dataKey);return n}}return i.\u0275fac=function(e){return new(e||i)(Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-selectButton"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,am,5),2&e){let s;or(s=ar())&&(n.itemTemplate=s.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[ko([Tte])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(ct(0,"div",0),Ze(1,Ete,5,14,"div",1),ht()),2&e&&(Vr(n.styleClass),ve("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",n.style),De(1),ve("ngForOf",n.options))},dependencies:[_o,ru,Oo,Dl,Ko,yh],styles:[".p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only .p-button-label{visibility:hidden;width:0;flex:0 0 auto}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Dte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,su]}),i})();const Lte=function(i,t,e){return{"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function Pte(i,t){if(1&i){const e=Pi();ct(0,"label",7),mn("click",function(r){wt(e);const s=_e(),o=co(3);return It(s.onClick(r,o))}),cr(1),ht()}if(2&i){const e=_e();ve("ngClass",qu(3,Lte,null!=e.value,e.disabled,e.focused)),vr("for",e.inputId),De(1),ds(e.label)}}const Rte=function(i,t){return{"p-checkbox p-component":!0,"p-checkbox-disabled":i,"p-checkbox-focused":t}},kte=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},Ote={provide:jc,useExisting:hs(()=>Fte),multi:!0};let Fte=(()=>{class i{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,n.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[ko([Ote])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,n){if(1&e){const r=Pi();ct(0,"div",0)(1,"div",1)(2,"input",2,3),mn("keyup",function(o){return n.onKeyup(o)})("keydown",function(o){return n.onKeydown(o)})("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),ht()(),ct(4,"div",4),mn("click",function(o){wt(r);const l=co(3);return It(n.onClick(o,l))}),si(5,"span",5),ht()(),Ze(6,Pte,2,7,"label",6)}2&e&&(Vr(n.styleClass),ve("ngStyle",n.style)("ngClass",ys(14,Rte,n.disabled,n.focused)),De(2),ve("name",n.name)("readonly",n.readonly)("disabled",n.disabled),vr("id",n.inputId)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy),De(2),ve("ngClass",qu(17,kte,null!=n.value,n.disabled,n.focused)),vr("aria-checked",!0===n.value),De(1),ve("ngClass",!0===n.value?n.checkboxTrueIcon:!1===n.value?n.checkboxFalseIcon:""),De(1),ve("ngIf",n.label))},dependencies:[_o,Oo,Ko],encapsulation:2,changeDetection:0}),i})(),Nte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();const Bte=["container"],zte=["inputfield"],Vte=["contentWrapper"];function Ute(i,t){if(1&i){const e=Pi();ct(0,"i",8),mn("click",function(){return wt(e),It(_e(2).clear())}),ht()}}function Hte(i,t){if(1&i){const e=Pi();ct(0,"button",9),mn("click",function(r){wt(e),_e();const s=co(1);return It(_e().onButtonClick(r,s))}),ht()}if(2&i){const e=_e(2);ve("icon",e.icon)("disabled",e.disabled),vr("aria-label",e.iconAriaLabel)}}function Gte(i,t){if(1&i){const e=Pi();ct(0,"input",4,5),mn("focus",function(r){return wt(e),It(_e().onInputFocus(r))})("keydown",function(r){return wt(e),It(_e().onInputKeydown(r))})("click",function(){return wt(e),It(_e().onInputClick())})("blur",function(r){return wt(e),It(_e().onInputBlur(r))})("input",function(r){return wt(e),It(_e().onUserInput(r))}),ht(),Ze(2,Ute,1,0,"i",6),Ze(3,Hte,1,3,"button",7)}if(2&i){const e=_e();Vr(e.inputStyleClass),ve("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),vr("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),De(2),ve("ngIf",e.showClear&&!e.disabled&&null!=e.value),De(1),ve("ngIf",e.showIcon)}}function Wte(i,t){1&i&&qi(0)}function jte(i,t){if(1&i){const e=Pi();ct(0,"button",30),mn("keydown",function(r){return wt(e),It(_e(4).onContainerButtonKeydown(r))})("click",function(r){return wt(e),It(_e(4).onPrevButtonClick(r))}),si(1,"span",31),ht()}}function $te(i,t){if(1&i){const e=Pi();ct(0,"button",32),mn("click",function(r){return wt(e),It(_e(4).switchToMonthView(r))})("keydown",function(r){return wt(e),It(_e(4).onContainerButtonKeydown(r))}),cr(1),ht()}if(2&i){const e=_e().$implicit,n=_e(3);ve("disabled",n.switchViewButtonDisabled()),De(1),Yh(" ",n.getMonthName(e.month)," ")}}function qte(i,t){if(1&i){const e=Pi();ct(0,"button",33),mn("click",function(r){return wt(e),It(_e(4).switchToYearView(r))})("keydown",function(r){return wt(e),It(_e(4).onContainerButtonKeydown(r))}),cr(1),ht()}if(2&i){const e=_e().$implicit,n=_e(3);ve("disabled",n.switchViewButtonDisabled()),De(1),Yh(" ",n.getYear(e)," ")}}function Xte(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(5);De(1),fI("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function Yte(i,t){1&i&&qi(0)}const GV=function(i){return{$implicit:i}};function Kte(i,t){if(1&i&&(ct(0,"span",34),Ze(1,Xte,2,2,"ng-container",13),Ze(2,Yte,1,0,"ng-container",35),ht()),2&i){const e=_e(4);De(1),ve("ngIf",!e.decadeTemplate),De(1),ve("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",Bi(3,GV,e.yearPickerValues))}}function Zte(i,t){if(1&i&&(ct(0,"th",41)(1,"span"),cr(2),ht()()),2&i){const e=_e(5);De(2),ds(e.getTranslation("weekHeader"))}}function Qte(i,t){if(1&i&&(ct(0,"th",42)(1,"span"),cr(2),ht()()),2&i){const e=t.$implicit;De(2),ds(e)}}function Jte(i,t){if(1&i&&(ct(0,"td",45)(1,"span",46),cr(2),ht()()),2&i){const e=_e().index,n=_e(2).$implicit;De(2),Yh(" ",n.weekNumbers[e]," ")}}function ene(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(2).$implicit;De(1),ds(e.day)}}function tne(i,t){1&i&&qi(0)}const nne=function(i,t){return{"p-highlight":i,"p-disabled":t}};function ine(i,t){if(1&i){const e=Pi();Hr(0),ct(1,"span",48),mn("click",function(r){wt(e);const s=_e().$implicit;return It(_e(6).onDateSelect(r,s))})("keydown",function(r){wt(e);const s=_e().$implicit,o=_e(3).index;return It(_e(3).onDateCellKeydown(r,s,o))}),Ze(2,ene,2,1,"ng-container",13),Ze(3,tne,1,0,"ng-container",35),ht(),Gr()}if(2&i){const e=_e().$implicit,n=_e(6);De(1),ve("ngClass",ys(4,nne,n.isSelected(e),!e.selectable)),De(1),ve("ngIf",!n.dateTemplate),De(1),ve("ngTemplateOutlet",n.dateTemplate)("ngTemplateOutletContext",Bi(7,GV,e))}}const rne=function(i,t){return{"p-datepicker-other-month":i,"p-datepicker-today":t}};function sne(i,t){if(1&i&&(ct(0,"td",47),Ze(1,ine,4,9,"ng-container",13),ht()),2&i){const e=t.$implicit,n=_e(6);ve("ngClass",ys(2,rne,e.otherMonth,e.today)),De(1),ve("ngIf",!e.otherMonth||n.showOtherMonths)}}function one(i,t){if(1&i&&(ct(0,"tr"),Ze(1,Jte,3,1,"td",43),Ze(2,sne,2,5,"td",44),ht()),2&i){const e=t.$implicit,n=_e(5);De(1),ve("ngIf",n.showWeek),De(1),ve("ngForOf",e)}}function ane(i,t){if(1&i&&(ct(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),Ze(4,Zte,3,1,"th",38),Ze(5,Qte,3,1,"th",39),ht()(),ct(6,"tbody"),Ze(7,one,3,2,"tr",40),ht()()()),2&i){const e=_e().$implicit,n=_e(3);De(4),ve("ngIf",n.showWeek),De(1),ve("ngForOf",n.weekDays),De(2),ve("ngForOf",e.dates)}}function lne(i,t){if(1&i){const e=Pi();ct(0,"div",20)(1,"div",21),Ze(2,jte,2,0,"button",22),ct(3,"div",23),Ze(4,$te,2,2,"button",24),Ze(5,qte,2,2,"button",25),Ze(6,Kte,3,5,"span",26),ht(),ct(7,"button",27),mn("keydown",function(r){return wt(e),It(_e(3).onContainerButtonKeydown(r))})("click",function(r){return wt(e),It(_e(3).onNextButtonClick(r))}),si(8,"span",28),ht()(),Ze(9,ane,8,3,"div",29),ht()}if(2&i){const e=t.index,n=_e(3);De(2),ve("ngIf",0===e),De(2),ve("ngIf","date"===n.currentView),De(1),ve("ngIf","year"!==n.currentView),De(1),ve("ngIf","year"===n.currentView),De(1),tf("display",1===n.numberOfMonths||e===n.numberOfMonths-1?"inline-flex":"none"),De(2),ve("ngIf","date"===n.currentView)}}const WV=function(i){return{"p-highlight":i}};function cne(i,t){if(1&i){const e=Pi();ct(0,"span",51),mn("click",function(r){const o=wt(e).index;return It(_e(4).onMonthSelect(r,o))})("keydown",function(r){const o=wt(e).index;return It(_e(4).onMonthCellKeydown(r,o))}),cr(1),ht()}if(2&i){const e=t.$implicit,n=t.index,r=_e(4);ve("ngClass",Bi(2,WV,r.isMonthSelected(n))),De(1),Yh(" ",e," ")}}function une(i,t){if(1&i&&(ct(0,"div",49),Ze(1,cne,2,4,"span",50),ht()),2&i){const e=_e(3);De(1),ve("ngForOf",e.monthPickerValues())}}function hne(i,t){if(1&i){const e=Pi();ct(0,"span",54),mn("click",function(r){const o=wt(e).$implicit;return It(_e(4).onYearSelect(r,o))})("keydown",function(r){const o=wt(e).$implicit;return It(_e(4).onYearCellKeydown(r,o))}),cr(1),ht()}if(2&i){const e=t.$implicit,n=_e(4);ve("ngClass",Bi(2,WV,n.isYearSelected(e))),De(1),Yh(" ",e," ")}}function dne(i,t){if(1&i&&(ct(0,"div",52),Ze(1,hne,2,4,"span",53),ht()),2&i){const e=_e(3);De(1),ve("ngForOf",e.yearPickerValues())}}function fne(i,t){if(1&i&&(Hr(0),ct(1,"div",16),Ze(2,lne,10,7,"div",17),ht(),Ze(3,une,2,1,"div",18),Ze(4,dne,2,1,"div",19),Gr()),2&i){const e=_e(2);De(2),ve("ngForOf",e.months),De(1),ve("ngIf","month"===e.currentView),De(1),ve("ngIf","year"===e.currentView)}}function pne(i,t){1&i&&(Hr(0),cr(1,"0"),Gr())}function gne(i,t){1&i&&(Hr(0),cr(1,"0"),Gr())}function mne(i,t){if(1&i&&(ct(0,"div",60)(1,"span"),cr(2),ht()()),2&i){const e=_e(3);De(2),ds(e.timeSeparator)}}function vne(i,t){1&i&&(Hr(0),cr(1,"0"),Gr())}function yne(i,t){if(1&i){const e=Pi();ct(0,"div",65)(1,"button",57),mn("keydown",function(r){return wt(e),It(_e(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),It(_e(3).incrementSecond(r))})("keydown.space",function(r){return wt(e),It(_e(3).incrementSecond(r))})("mousedown",function(r){return wt(e),It(_e(3).onTimePickerElementMouseDown(r,2,1))})("mouseup",function(r){return wt(e),It(_e(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),It(_e(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),It(_e(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),It(_e(3).onTimePickerElementMouseLeave())}),si(2,"span",58),ht(),ct(3,"span"),Ze(4,vne,2,0,"ng-container",13),cr(5),ht(),ct(6,"button",57),mn("keydown",function(r){return wt(e),It(_e(3).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),It(_e(3).decrementSecond(r))})("keydown.space",function(r){return wt(e),It(_e(3).decrementSecond(r))})("mousedown",function(r){return wt(e),It(_e(3).onTimePickerElementMouseDown(r,2,-1))})("mouseup",function(r){return wt(e),It(_e(3).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),It(_e(3).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),It(_e(3).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),It(_e(3).onTimePickerElementMouseLeave())}),si(7,"span",59),ht()()}if(2&i){const e=_e(3);De(4),ve("ngIf",e.currentSecond<10),De(1),ds(e.currentSecond)}}function _ne(i,t){if(1&i){const e=Pi();ct(0,"div",66)(1,"button",67),mn("keydown",function(r){return wt(e),It(_e(3).onContainerButtonKeydown(r))})("click",function(r){return wt(e),It(_e(3).toggleAMPM(r))})("keydown.enter",function(r){return wt(e),It(_e(3).toggleAMPM(r))}),si(2,"span",58),ht(),ct(3,"span"),cr(4),ht(),ct(5,"button",67),mn("keydown",function(r){return wt(e),It(_e(3).onContainerButtonKeydown(r))})("click",function(r){return wt(e),It(_e(3).toggleAMPM(r))})("keydown.enter",function(r){return wt(e),It(_e(3).toggleAMPM(r))}),si(6,"span",59),ht()()}if(2&i){const e=_e(3);De(4),ds(e.pm?"PM":"AM")}}function Cne(i,t){if(1&i){const e=Pi();ct(0,"div",55)(1,"div",56)(2,"button",57),mn("keydown",function(r){return wt(e),It(_e(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),It(_e(2).incrementHour(r))})("keydown.space",function(r){return wt(e),It(_e(2).incrementHour(r))})("mousedown",function(r){return wt(e),It(_e(2).onTimePickerElementMouseDown(r,0,1))})("mouseup",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),It(_e(2).onTimePickerElementMouseLeave())}),si(3,"span",58),ht(),ct(4,"span"),Ze(5,pne,2,0,"ng-container",13),cr(6),ht(),ct(7,"button",57),mn("keydown",function(r){return wt(e),It(_e(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),It(_e(2).decrementHour(r))})("keydown.space",function(r){return wt(e),It(_e(2).decrementHour(r))})("mousedown",function(r){return wt(e),It(_e(2).onTimePickerElementMouseDown(r,0,-1))})("mouseup",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),It(_e(2).onTimePickerElementMouseLeave())}),si(8,"span",59),ht()(),ct(9,"div",60)(10,"span"),cr(11),ht()(),ct(12,"div",61)(13,"button",57),mn("keydown",function(r){return wt(e),It(_e(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),It(_e(2).incrementMinute(r))})("keydown.space",function(r){return wt(e),It(_e(2).incrementMinute(r))})("mousedown",function(r){return wt(e),It(_e(2).onTimePickerElementMouseDown(r,1,1))})("mouseup",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),It(_e(2).onTimePickerElementMouseLeave())}),si(14,"span",58),ht(),ct(15,"span"),Ze(16,gne,2,0,"ng-container",13),cr(17),ht(),ct(18,"button",57),mn("keydown",function(r){return wt(e),It(_e(2).onContainerButtonKeydown(r))})("keydown.enter",function(r){return wt(e),It(_e(2).decrementMinute(r))})("keydown.space",function(r){return wt(e),It(_e(2).decrementMinute(r))})("mousedown",function(r){return wt(e),It(_e(2).onTimePickerElementMouseDown(r,1,-1))})("mouseup",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("keyup.enter",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("keyup.space",function(r){return wt(e),It(_e(2).onTimePickerElementMouseUp(r))})("mouseleave",function(){return wt(e),It(_e(2).onTimePickerElementMouseLeave())}),si(19,"span",59),ht()(),Ze(20,mne,3,1,"div",62),Ze(21,yne,8,2,"div",63),Ze(22,_ne,7,1,"div",64),ht()}if(2&i){const e=_e(2);De(5),ve("ngIf",e.currentHour<10),De(1),ds(e.currentHour),De(5),ds(e.timeSeparator),De(5),ve("ngIf",e.currentMinute<10),De(1),ds(e.currentMinute),De(3),ve("ngIf",e.showSeconds),De(1),ve("ngIf",e.showSeconds),De(1),ve("ngIf","12"==e.hourFormat)}}const jV=function(i){return[i]};function bne(i,t){if(1&i){const e=Pi();ct(0,"div",68)(1,"button",69),mn("keydown",function(r){return wt(e),It(_e(2).onContainerButtonKeydown(r))})("click",function(r){return wt(e),It(_e(2).onTodayButtonClick(r))}),ht(),ct(2,"button",69),mn("keydown",function(r){return wt(e),It(_e(2).onContainerButtonKeydown(r))})("click",function(r){return wt(e),It(_e(2).onClearButtonClick(r))}),ht()()}if(2&i){const e=_e(2);De(1),ve("label",e.getTranslation("today"))("ngClass",Bi(4,jV,e.todayButtonStyleClass)),De(1),ve("label",e.getTranslation("clear"))("ngClass",Bi(6,jV,e.clearButtonStyleClass))}}function xne(i,t){1&i&&qi(0)}const wne=function(i,t,e,n,r,s){return{"p-datepicker p-component":!0,"p-datepicker-inline":i,"p-disabled":t,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":n,"p-datepicker-monthpicker":r,"p-datepicker-touch-ui":s}},$V=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},Ane=function(i){return{value:"visibleTouchUI",params:i}},Ine=function(i){return{value:"visible",params:i}};function Sne(i,t){if(1&i){const e=Pi();ct(0,"div",10,11),mn("@overlayAnimation.start",function(r){return wt(e),It(_e().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return wt(e),It(_e().onOverlayAnimationDone(r))})("click",function(r){return wt(e),It(_e().onOverlayClick(r))}),nu(2),Ze(3,Wte,1,0,"ng-container",12),Ze(4,fne,5,3,"ng-container",13),Ze(5,Cne,23,8,"div",14),Ze(6,bne,3,8,"div",15),nu(7,1),Ze(8,xne,1,0,"ng-container",12),ht()}if(2&i){const e=_e();Vr(e.panelStyleClass),ve("ngStyle",e.panelStyle)("ngClass",zC(11,wne,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?Bi(21,Ane,ys(18,$V,e.showTransitionOptions,e.hideTransitionOptions)):Bi(26,Ine,ys(23,$V,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),De(3),ve("ngTemplateOutlet",e.headerTemplate),De(1),ve("ngIf",!e.timeOnly),De(1),ve("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),De(1),ve("ngIf",e.showButtonBar),De(2),ve("ngTemplateOutlet",e.footerTemplate)}}const Ene=[[["p-header"]],[["p-footer"]]],Tne=function(i,t,e,n){return{"p-calendar":!0,"p-calendar-w-btn":i,"p-calendar-timeonly":t,"p-calendar-disabled":e,"p-focus":n}},Mne=["p-header","p-footer"],Dne={provide:jc,useExisting:hs(()=>Lne),multi:!0};let Lne=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.config=o,this.overlayService=l,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new jn,this.onBlur=new jn,this.onClose=new jn,this.onSelect=new jn,this.onClear=new jn,this.onInput=new jn,this.onTodayClick=new jn,this.onClearClick=new jn,this.onMonthChange=new jn,this.onYearChange=new jn,this.onClickOutside=new jn,this.onShow=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(u,p){return"12"==this.hourFormat?12===u?p?12:0:p?u+12:u:u}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const n=e||new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.initTime(n),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const n=e.split(":"),r=parseInt(n[0]),s=parseInt(n[1]);this.populateYearOptions(r,s)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=Kx();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=Gt.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,n){this.yearOptions=[];for(let r=e;r<=n;r++)this.yearOptions.push(r)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),n=this.getTranslation(Gc.DAY_NAMES_MIN);for(let r=0;r<7;r++)this.weekDays.push(n[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let n=0;n<=11;n++)e.push(this.config.getTranslation("monthNamesShort")[n]);return e}yearPickerValues(){let e=[],n=this.currentYear-this.currentYear%10;for(let r=0;r<10;r++)e.push(n+r);return e}createMonths(e,n){this.months=this.months=[];for(let r=0;r<this.numberOfMonths;r++){let s=e+r,o=n;s>11&&(s=s%11-1,o=n+1),this.months.push(this.createMonth(s,o))}}getWeekNumber(e){let n=new Date(e.getTime());n.setDate(n.getDate()+4-(n.getDay()||7));let r=n.getTime();return n.setMonth(0),n.setDate(1),Math.floor(Math.round((r-n.getTime())/864e5)/7)+1}createMonth(e,n){let r=[],s=this.getFirstDayOfMonthIndex(e,n),o=this.getDaysCountInMonth(e,n),l=this.getDaysCountInPrevMonth(e,n),u=1,p=new Date,v=[],x=Math.ceil((o+s)/7);for(let I=0;I<x;I++){let M=[];if(0==I){for(let j=l-s+1;j<=l;j++){let X=this.getPreviousMonthAndYear(e,n);M.push({day:j,month:X.month,year:X.year,otherMonth:!0,today:this.isToday(p,j,X.month,X.year),selectable:this.isSelectable(j,X.month,X.year,!0)})}let F=7-M.length;for(let j=0;j<F;j++)M.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)}),u++}else for(let F=0;F<7;F++){if(u>o){let j=this.getNextMonthAndYear(e,n);M.push({day:u-o,month:j.month,year:j.year,otherMonth:!0,today:this.isToday(p,u-o,j.month,j.year),selectable:this.isSelectable(u-o,j.month,j.year,!0)})}else M.push({day:u,month:e,year:n,today:this.isToday(p,u,e,n),selectable:this.isSelectable(u,e,n,!1)});u++}this.showWeek&&v.push(this.getWeekNumber(new Date(M[0].year,M[0].month,M[0].day))),r.push(M)}return{month:e,year:n,dates:r,weekNumbers:v}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,n){!this.disabled&&n.selectable?(this.isMultipleSelection()&&this.isSelected(n)?(this.value=this.value.filter((r,s)=>!this.isDateEquals(r,n)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(n)&&this.selectDate(n),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,n){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:n,day:1,selectable:!0}):(this.currentMonth=n,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,n){"year"===this.view?this.onDateSelect(e,{year:n,month:0,day:1,selectable:!0}):(this.currentYear=n,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let n=0;n<this.value.length;n++)e+=this.formatDateTime(this.value[n]),n!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let r=this.value[1];e=this.formatDateTime(this.value[0]),r&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(r))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let n=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?n=this.formatTime(e):(n=this.formatDate(e,this.getDateFormat()),this.showTime&&(n+=" "+this.formatTime(e)))),n}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let n=new Date(e.year,e.month,e.day);if(this.showTime&&(n.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),n.setMinutes(this.currentMinute),n.setSeconds(this.currentSecond)),this.minDate&&this.minDate>n&&(n=this.minDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.maxDate&&this.maxDate<n&&(n=this.maxDate,this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds()),this.isSingleSelection())this.updateModel(n);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,n]:[n]);else if(this.isRangeSelection())if(this.value&&this.value.length){let r=this.value[0],s=this.value[1];!s&&n.getTime()>=r.getTime()?s=n:(r=n,s=null),this.updateModel([r,s])}else this.updateModel([n,null]);this.onSelect.emit(n)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let n=null;this.value&&(n=this.value.map(r=>this.formatDateTime(r))),this.onModelChange(n)}}getFirstDayOfMonthIndex(e,n){let r=new Date;r.setDate(1),r.setMonth(e),r.setFullYear(n);let s=r.getDay()+this.getSundayIndex();return s>=7?s-7:s}getDaysCountInMonth(e,n){return 32-this.daylightSavingAdjust(new Date(n,e,32)).getDate()}getDaysCountInPrevMonth(e,n){let r=this.getPreviousMonthAndYear(e,n);return this.getDaysCountInMonth(r.month,r.year)}getPreviousMonthAndYear(e,n){let r,s;return 0===e?(r=11,s=n-1):(r=e-1,s=n),{month:r,year:s}}getNextMonthAndYear(e,n){let r,s;return 11===e?(r=0,s=n+1):(r=e+1,s=n),{month:r,year:s}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let n=!1;for(let r of this.value)if(n=this.isDateEquals(r,e),n)break;return n}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getMonth()===e&&n.getFullYear()===this.currentYear}return!1}isYearSelected(e){if(this.isComparable()){let n=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&n.getFullYear()===e}return!1}isDateEquals(e,n){return!!(e&&e instanceof Date)&&e.getDate()===n.day&&e.getMonth()===n.month&&e.getFullYear()===n.year}isDateBetween(e,n,r){if(e&&n){let o=new Date(r.year,r.month,r.day);return e.getTime()<=o.getTime()&&n.getTime()>=o.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,n,r,s){return e.getDate()===n&&e.getMonth()===r&&e.getFullYear()===s}isSelectable(e,n,r,s){let o=!0,l=!0,u=!0,p=!0;return!(s&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>r||this.minDate.getFullYear()===r&&(this.minDate.getMonth()>n||this.minDate.getMonth()===n&&this.minDate.getDate()>e))&&(o=!1),this.maxDate&&(this.maxDate.getFullYear()<r||this.maxDate.getFullYear()===r&&(this.maxDate.getMonth()<n||this.maxDate.getMonth()===n&&this.maxDate.getDate()<e))&&(l=!1),this.disabledDates&&(u=!this.isDateDisabled(e,n,r)),this.disabledDays&&(p=!this.isDayDisabled(e,n,r)),o&&l&&u&&p)}isDateDisabled(e,n,r){if(this.disabledDates)for(let s of this.disabledDates)if(s.getFullYear()===r&&s.getMonth()===n&&s.getDate()===e)return!0;return!1}isDayDisabled(e,n,r){if(this.disabledDays){let o=new Date(r,n,e).getDay();return-1!==this.disabledDays.indexOf(o)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,n){this.overlayVisible?this.hideOverlay():(n.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(Gt.getFocusableElements(this.contentViewChild.nativeElement).forEach(n=>n.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,n,r){const s=e.currentTarget,o=s.parentElement;switch(e.which){case 40:{s.tabIndex="-1";let l=Gt.index(o),u=o.parentElement.nextElementSibling;u?Gt.hasClass(u.children[l].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(u.children[l].children[0].tabIndex="0",u.children[l].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{s.tabIndex="-1";let l=Gt.index(o),u=o.parentElement.previousElementSibling;if(u){let p=u.children[l].children[0];Gt.hasClass(p,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(p.tabIndex="0",p.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{s.tabIndex="-1";let l=o.previousElementSibling;if(l){let u=l.children[0];Gt.hasClass(u,"p-disabled")||Gt.hasClass(u.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!0,r);e.preventDefault();break}case 39:{s.tabIndex="-1";let l=o.nextElementSibling;if(l){let u=l.children[0];Gt.hasClass(u,"p-disabled")?this.navigateToMonth(!1,r):(u.tabIndex="0",u.focus())}else this.navigateToMonth(!1,r);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Gt.index(r);let l=s[40===e.which?o+3:o-3];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,n),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,n){const r=e.currentTarget;switch(e.which){case 38:case 40:{r.tabIndex="-1";var s=r.parentElement.children,o=Gt.index(r);let l=s[40===e.which?o+2:o-2];l&&(l.tabIndex="0",l.focus()),e.preventDefault();break}case 37:{r.tabIndex="-1";let l=r.previousElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{r.tabIndex="-1";let l=r.nextElementSibling;l?(l.tabIndex="0",l.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,n),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,n){if(e)if(1===this.numberOfMonths||0===n)this.navigationState={backward:!0},this.navBackward(event);else{let s=Gt.find(this.contentViewChild.nativeElement.children[n-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),o=s[s.length-1];o.tabIndex="0",o.focus()}else if(1===this.numberOfMonths||n===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let s=Gt.findSingle(this.contentViewChild.nativeElement.children[n+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");s.tabIndex="0",s.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?Gt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():Gt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let n;n=Gt.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),n&&n.length>0&&(e=n[n.length-1])}else e=Gt.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){let e;if("month"===this.currentView){let n=Gt.find(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),r=Gt.findSingle(this.contentViewChild.nativeElement,".p-monthpicker .p-monthpicker-month.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Gt.find(this.contentViewChild.nativeElement,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if("year"===this.currentView){let n=Gt.find(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),r=Gt.findSingle(this.contentViewChild.nativeElement,".p-yearpicker .p-yearpicker-year.p-highlight");n.forEach(s=>s.tabIndex=-1),e=r||n[0],0===n.length&&Gt.find(this.contentViewChild.nativeElement,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(o=>o.tabIndex=-1)}else if(e=Gt.findSingle(this.contentViewChild.nativeElement,"span.p-highlight"),!e){let n=Gt.findSingle(this.contentViewChild.nativeElement,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");e=n||Gt.findSingle(this.contentViewChild.nativeElement,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}e&&(e.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{e.focus()},1),this.preventFocus=!1)}trapFocus(e){let n=Gt.getFocusableElements(this.contentViewChild.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==r||0===r)if(this.focusTrap)n[n.length-1].focus();else{if(-1===r)return this.hideOverlay();if(0===r)return}else n[r-1].focus();else if(-1==r||r===n.length-1){if(!this.focusTrap&&-1!=r)return this.hideOverlay();n[0].focus()}else n[r+1].focus()}else n[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,n,r,s){let o=this.value;const l=this.convertTo24Hour(e,s);this.isRangeSelection()&&(o=this.value[1]||this.value[0]),this.isMultipleSelection()&&(o=this.value[this.value.length-1]);const u=o?o.toDateString():null;return!(this.minDate&&u&&this.minDate.toDateString()===u&&(this.minDate.getHours()>l||this.minDate.getHours()===l&&(this.minDate.getMinutes()>n||this.minDate.getMinutes()===n&&this.minDate.getSeconds()>r))||this.maxDate&&u&&this.maxDate.toDateString()===u&&(this.maxDate.getHours()<l||this.maxDate.getHours()===l&&(this.maxDate.getMinutes()<n||this.maxDate.getMinutes()===n&&this.maxDate.getSeconds()<r)))}incrementHour(e){let r=this.currentHour+this.stepHour,s=this.pm;"24"==this.hourFormat?r=r>=24?r-24:r:"12"==this.hourFormat&&(this.currentHour<12&&r>11&&(s=!this.pm),r=r>=13?r-12:r),this.validateTime(r,this.currentMinute,this.currentSecond,s)&&(this.currentHour=r,this.pm=s),e.preventDefault()}onTimePickerElementMouseDown(e,n,r){this.disabled||(this.repeat(e,null,n,r),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,n,r,s){let o=n||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,r,s),this.cd.markForCheck()},o),r){case 0:1===s?this.incrementHour(e):this.decrementHour(e);break;case 1:1===s?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===s?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let n=this.currentHour-this.stepHour,r=this.pm;"24"==this.hourFormat?n=n<0?24+n:n:"12"==this.hourFormat&&(12===this.currentHour&&(r=!this.pm),n=n<=0?12+n:n),this.validateTime(n,this.currentMinute,this.currentSecond,r)&&(this.currentHour=n,this.pm=r),e.preventDefault()}incrementMinute(e){let n=this.currentMinute+this.stepMinute;n=n>59?n-60:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}decrementMinute(e){let n=this.currentMinute-this.stepMinute;n=n<0?60+n:n,this.validateTime(this.currentHour,n,this.currentSecond,this.pm)&&(this.currentMinute=n),e.preventDefault()}incrementSecond(e){let n=this.currentSecond+this.stepSecond;n=n>59?n-60:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}decrementSecond(e){let n=this.currentSecond-this.stepSecond;n=n<0?60+n:n,this.validateTime(this.currentHour,this.currentMinute,n,this.pm)&&(this.currentSecond=n),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const n=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,n)&&(this.pm=n,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let n=e.target.value;try{let r=this.parseValueFromString(n);this.isValidSelection(r)&&(this.updateModel(r),this.updateUI())}catch{this.updateModel(this.keepInvalid?n:null)}this.filled=null!=n&&n.length,this.onInput.emit(e)}isValidSelection(e){let n=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(n=!1):e.every(r=>this.isSelectable(r.getDate(),r.getMonth(),r.getFullYear(),!1))&&this.isRangeSelection()&&(n=e.length>1&&e[1]>e[0]),n}parseValueFromString(e){if(!e||0===e.trim().length)return null;let n;if(this.isSingleSelection())n=this.parseDateTime(e);else if(this.isMultipleSelection()){let r=e.split(this.multipleSeparator);n=[];for(let s of r)n.push(this.parseDateTime(s.trim()))}else if(this.isRangeSelection()){let r=e.split(" "+this.rangeSeparator+" ");n=[];for(let s=0;s<r.length;s++)n[s]=this.parseDateTime(r[s].trim())}return n}parseDateTime(e){let n,r=e.split(" ");if(this.timeOnly)n=new Date,this.populateTime(n,r[0],r[1]);else{const s=this.getDateFormat();if(this.showTime){let o="12"==this.hourFormat?r.pop():null,l=r.pop();n=this.parseDate(r.join(" "),s),this.populateTime(n,l,o)}else n=this.parseDate(e,s)}return n}populateTime(e,n,r){if("12"==this.hourFormat&&!r)throw"Invalid Time";this.pm="PM"===r||"pm"===r;let s=this.parseTime(n);e.setHours(s.hour),e.setMinutes(s.minute),e.setSeconds(s.second)}isValidDate(e){return e instanceof Date&&gr.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let n=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=n.getMonth(),this.currentYear=n.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(n.getHours()),this.currentMinute=n.getMinutes(),this.currentSecond=n.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?Ll.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):Ll.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&Ll.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Gt.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=Gt.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=Gt.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=Gt.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",Gt.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):Gt.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),Gt.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",r=>{this.disableModality()}),document.body.appendChild(this.mask),Gt.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(Gt.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let n,e=document.body.children;for(let r=0;r<e.length;r++)if(Gt.hasClass(e[r],"p-datepicker-mask-scrollblocker")){n=!0;break}n||Gt.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Gc.FIRST_DAY_OF_WEEK)}formatDate(e,n){if(!e)return"";let r;const s=v=>{const x=r+1<n.length&&n.charAt(r+1)===v;return x&&r++,x},o=(v,x,I)=>{let M=""+x;if(s(v))for(;M.length<I;)M="0"+M;return M},l=(v,x,I,M)=>s(v)?M[x]:I[x];let u="",p=!1;if(e)for(r=0;r<n.length;r++)if(p)"'"!==n.charAt(r)||s("'")?u+=n.charAt(r):p=!1;else switch(n.charAt(r)){case"d":u+=o("d",e.getDate(),2);break;case"D":u+=l("D",e.getDay(),this.getTranslation(Gc.DAY_NAMES_SHORT),this.getTranslation(Gc.DAY_NAMES));break;case"o":u+=o("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=o("m",e.getMonth()+1,2);break;case"M":u+=l("M",e.getMonth(),this.getTranslation(Gc.MONTH_NAMES_SHORT),this.getTranslation(Gc.MONTH_NAMES));break;case"y":u+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":u+=e.getTime();break;case"!":u+=1e4*e.getTime()+this.ticksTo1970;break;case"'":s("'")?u+="'":p=!0;break;default:u+=n.charAt(r)}return u}formatTime(e){if(!e)return"";let n="",r=e.getHours(),s=e.getMinutes(),o=e.getSeconds();return"12"==this.hourFormat&&r>11&&12!=r&&(r-=12),n+="12"==this.hourFormat&&0===r?12:r<10?"0"+r:r,n+=":",n+=s<10?"0"+s:s,this.showSeconds&&(n+=":",n+=o<10?"0"+o:o),"12"==this.hourFormat&&(n+=e.getHours()>11?" PM":" AM"),n}parseTime(e){let n=e.split(":");if(n.length!==(this.showSeconds?3:2))throw"Invalid time";let s=parseInt(n[0]),o=parseInt(n[1]),l=this.showSeconds?parseInt(n[2]):null;if(isNaN(s)||isNaN(o)||s>23||o>59||"12"==this.hourFormat&&s>12||this.showSeconds&&(isNaN(l)||l>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==s&&this.pm?s+=12:!this.pm&&12===s&&(s-=12)),{hour:s,minute:o,second:l}}parseDate(e,n){if(null==n||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let r,s,o,F,l=0,u="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),p=-1,v=-1,x=-1,I=-1,M=!1,j=ye=>{let Ae=r+1<n.length&&n.charAt(r+1)===ye;return Ae&&r++,Ae},X=ye=>{let Ae=j(ye),We="@"===ye?14:"!"===ye?20:"y"===ye&&Ae?4:"o"===ye?3:2,Mt=new RegExp("^\\d{"+("y"===ye?We:1)+","+We+"}"),Xe=e.substring(l).match(Mt);if(!Xe)throw"Missing number at position "+l;return l+=Xe[0].length,parseInt(Xe[0],10)},ce=(ye,Ae,We)=>{let ot=-1,Mt=j(ye)?We:Ae,Xe=[];for(let yt=0;yt<Mt.length;yt++)Xe.push([yt,Mt[yt]]);Xe.sort((yt,tn)=>-(yt[1].length-tn[1].length));for(let yt=0;yt<Xe.length;yt++){let tn=Xe[yt][1];if(e.substr(l,tn.length).toLowerCase()===tn.toLowerCase()){ot=Xe[yt][0],l+=tn.length;break}}if(-1!==ot)return ot+1;throw"Unknown name at position "+l},we=()=>{if(e.charAt(l)!==n.charAt(r))throw"Unexpected literal at position "+l;l++};for("month"===this.view&&(x=1),r=0;r<n.length;r++)if(M)"'"!==n.charAt(r)||j("'")?we():M=!1;else switch(n.charAt(r)){case"d":x=X("d");break;case"D":ce("D",this.getTranslation(Gc.DAY_NAMES_SHORT),this.getTranslation(Gc.DAY_NAMES));break;case"o":I=X("o");break;case"m":v=X("m");break;case"M":v=ce("M",this.getTranslation(Gc.MONTH_NAMES_SHORT),this.getTranslation(Gc.MONTH_NAMES));break;case"y":p=X("y");break;case"@":F=new Date(X("@")),p=F.getFullYear(),v=F.getMonth()+1,x=F.getDate();break;case"!":F=new Date((X("!")-this.ticksTo1970)/1e4),p=F.getFullYear(),v=F.getMonth()+1,x=F.getDate();break;case"'":j("'")?we():M=!0;break;default:we()}if(l<e.length&&(o=e.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=u?0:-100)),I>-1)for(v=1,x=I;s=this.getDaysCountInMonth(p,v-1),!(x<=s);)v++,x-=s;if("year"===this.view&&(v=-1===v?1:v,x=-1===x?1:x),F=this.daylightSavingAdjust(new Date(p,v-1,x)),F.getFullYear()!==p||F.getMonth()+1!==v||F.getDate()!==x)throw"Invalid date";return F}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let n=new Date,r={day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),otherMonth:n.getMonth()!==this.currentMonth||n.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,r),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let n=[...this.responsiveOptions].filter(r=>!(!r.breakpoint||!r.numMonths)).sort((r,s)=>-1*r.breakpoint.localeCompare(s.breakpoint,void 0,{numeric:!0}));for(let r=0;r<n.length;r++){let{breakpoint:s,numMonths:o}=n[r],l=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${o}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let u=o;u<this.numberOfMonths;u++)l+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${u+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${s}) {\n                            ${l}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",n=>{this.isOutsideClicked(n)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(n),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new yw(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return Gt.hasClass(e.target,"p-datepicker-prev")||Gt.hasClass(e.target,"p-datepicker-prev-icon")||Gt.hasClass(e.target,"p-datepicker-next")||Gt.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!Gt.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&Ll.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(d),Qt(Ho),Qt(Yo),Qt(Mp),Qt(Zx))},i.\u0275cmp=Ar({type:i,selectors:[["p-calendar"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(Bte,5),is(zte,5),is(Vte,5)),2&e){let r;or(r=ar())&&(n.containerViewChild=r.first),or(r=ar())&&(n.inputfieldViewChild=r.first),or(r=ar())&&(n.content=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Tp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus)("p-calendar-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[ko([Dne])],ngContentSelectors:Mne,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,n){1&e&&(Ff(Ene),ct(0,"span",0,1),Ze(2,Gte,4,17,"ng-template",2),Ze(3,Sne,9,28,"div",3),ht()),2&e&&(Vr(n.styleClass),ve("ngClass",Nf(6,Tne,n.showIcon,n.timeOnly,n.disabled,n.focus))("ngStyle",n.style),De(2),ve("ngIf",!n.inline),De(1),ve("ngIf",n.inline||n.overlayVisible))},dependencies:[_o,ru,Oo,Dl,Ko,Cw,yh],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[ry("overlayAnimation",[v0("visibleTouchUI",Ja({transform:"translate(-50%,-50%)",opacity:1})),Eu("void => visible",[Ja({opacity:0,transform:"scaleY(0.8)"}),Cc("{{showTransitionParams}}",Ja({opacity:1,transform:"*"}))]),Eu("visible => void",[Cc("{{hideTransitionParams}}",Ja({opacity:0}))]),Eu("void => visibleTouchUI",[Ja({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),Cc("{{showTransitionParams}}")]),Eu("visibleTouchUI => void",[Cc("{{hideTransitionParams}}",Ja({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),i})(),qV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,rv,Na,su,rv,Na]}),i})();const Pne=["container"],Rne=["resizeHelper"],kne=["reorderIndicatorUp"],One=["reorderIndicatorDown"],Fne=["wrapper"],Nne=["table"],Bne=["tableHeader"],zne=["scroller"];function Vne(i,t){if(1&i&&(ct(0,"div",15),si(1,"i"),ht()),2&i){const e=_e();De(1),Vr("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function Une(i,t){1&i&&qi(0)}function Hne(i,t){if(1&i&&(ct(0,"div",16),Ze(1,Une,1,0,"ng-container",17),ht()),2&i){const e=_e();De(1),ve("ngTemplateOutlet",e.captionTemplate)}}function Gne(i,t){if(1&i){const e=Pi();ct(0,"p-paginator",18),mn("onPageChange",function(r){return wt(e),It(_e().onPageChange(r))}),ht()}if(2&i){const e=_e();ve("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function Wne(i,t){1&i&&qi(0)}const XV=function(i,t){return{$implicit:i,options:t}};function jne(i,t){if(1&i&&Ze(0,Wne,1,0,"ng-container",22),2&i){const e=t.$implicit,n=t.options;_e(2),ve("ngTemplateOutlet",co(10))("ngTemplateOutletContext",ys(2,XV,e,n))}}const $ne=function(i){return{height:i}};function qne(i,t){if(1&i){const e=Pi();ct(0,"p-scroller",19,20),mn("onLazyLoad",function(r){return wt(e),It(_e().onLazyItemLoad(r))}),Ze(2,jne,1,5,"ng-template",21),ht()}if(2&i){const e=_e();la(Bi(12,$ne,"flex"!==e.scrollHeight?e.scrollHeight:void 0)),ve("items",e.processedData)("columns",e.columns)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("delay",e.lazy?e.virtualScrollDelay:0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)}}function Xne(i,t){1&i&&qi(0)}const Yne=function(i){return{columns:i}};function Kne(i,t){if(1&i&&(Hr(0),Ze(1,Xne,1,0,"ng-container",22),Gr()),2&i){const e=_e(),n=co(10);De(1),ve("ngTemplateOutlet",n)("ngTemplateOutletContext",ys(4,XV,e.processedData,Bi(2,Yne,e.columns)))}}function Zne(i,t){1&i&&qi(0)}function Qne(i,t){1&i&&qi(0)}function Jne(i,t){if(1&i&&si(0,"tbody",29),2&i){const e=_e().options,n=_e();ve("value",n.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",n.frozenBodyTemplate)("frozen",!0)}}function eie(i,t){1&i&&qi(0)}const bw=function(i){return{$implicit:i}};function tie(i,t){if(1&i&&(ct(0,"tfoot",30),Ze(1,eie,1,0,"ng-container",22),ht()),2&i){const e=_e().options,n=_e();De(1),ve("ngTemplateOutlet",n.footerGroupedTemplate||n.footerTemplate)("ngTemplateOutletContext",Bi(2,bw,e.columns))}}function nie(i,t){if(1&i&&(ct(0,"table",23,24),Ze(2,Zne,1,0,"ng-container",22),ct(3,"thead",25),Ze(4,Qne,1,0,"ng-container",22),ht(),Ze(5,Jne,1,5,"tbody",26),si(6,"tbody",27),Ze(7,tie,2,4,"tfoot",28),ht()),2&i){const e=t.options,n=_e();la(e.spacerStyle),ve("ngClass",n.tableStyleClass)("ngStyle",n.tableStyle),vr("id",n.id+"-table"),De(2),ve("ngTemplateOutlet",n.colGroupTemplate)("ngTemplateOutletContext",Bi(18,bw,e.columns)),De(2),ve("ngTemplateOutlet",n.headerGroupedTemplate||n.headerTemplate)("ngTemplateOutletContext",Bi(20,bw,e.columns)),De(1),ve("ngIf",n.frozenValue||n.frozenBodyTemplate),De(1),la(e.contentStyle),ve("ngClass",e.contentStyleClass)("value",n.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",n.bodyTemplate)("scrollerOptions",e),De(1),ve("ngIf",n.footerGroupedTemplate||n.footerTemplate)}}function iie(i,t){if(1&i){const e=Pi();ct(0,"p-paginator",31),mn("onPageChange",function(r){return wt(e),It(_e().onPageChange(r))}),ht()}if(2&i){const e=_e();ve("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function rie(i,t){1&i&&qi(0)}function sie(i,t){if(1&i&&(ct(0,"div",32),Ze(1,rie,1,0,"ng-container",17),ht()),2&i){const e=_e();De(1),ve("ngTemplateOutlet",e.summaryTemplate)}}function oie(i,t){1&i&&si(0,"div",33,34)}function aie(i,t){1&i&&si(0,"span",35,36)}function lie(i,t){1&i&&si(0,"span",37,38)}const cie=function(i,t,e,n,r,s,o,l,u,p,v,x,I,M){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":i,"p-datatable-auto-layout":t,"p-datatable-resizable":e,"p-datatable-resizable-fit":n,"p-datatable-scrollable":r,"p-datatable-scrollable-vertical":s,"p-datatable-scrollable-horizontal":o,"p-datatable-scrollable-both":l,"p-datatable-flex-scrollable":u,"p-datatable-responsive-stack":p,"p-datatable-responsive-scroll":v,"p-datatable-responsive":x,"p-datatable-grouped-header":I,"p-datatable-grouped-footer":M}},uie=function(i){return{maxHeight:i}},hie=["pTableBody",""];function die(i,t){1&i&&qi(0)}const U1=function(i,t,e,n,r){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r}};function fie(i,t){if(1&i&&(Hr(0,3),Ze(1,die,1,0,"ng-container",4),Gr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);De(1),ve("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",BC(2,U1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function pie(i,t){1&i&&qi(0)}function gie(i,t){if(1&i&&(Hr(0),Ze(1,pie,1,0,"ng-container",4),Gr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);De(1),ve("ngTemplateOutlet",s.template)("ngTemplateOutletContext",BC(2,U1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function mie(i,t){1&i&&qi(0)}const vie=function(i,t,e,n,r,s,o){return{$implicit:i,rowIndex:t,columns:e,editing:n,frozen:r,rowgroup:s,rowspan:o}};function yie(i,t){if(1&i&&(Hr(0),Ze(1,mie,1,0,"ng-container",4),Gr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);De(1),ve("ngTemplateOutlet",s.template)("ngTemplateOutletContext",function QO(i,t,e,n,r,s,o,l,u,p){const v=Po()+i,x=mi();let I=ug(x,v,e,n,r,s);return uI(x,v+4,o,l,u)||I?Xm(x,v+7,p?t.call(p,e,n,r,s,o,l,u):t(e,n,r,s,o,l,u)):bx(x,v+7)}(2,vie,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen,s.shouldRenderRowspan(s.value,n,s.getRowIndex(r)),s.calculateRowGroupSize(s.value,n,s.getRowIndex(r))))}}function _ie(i,t){1&i&&qi(0)}function Cie(i,t){if(1&i&&(Hr(0,3),Ze(1,_ie,1,0,"ng-container",4),Gr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);De(1),ve("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",BC(2,U1,n,s.getRowIndex(r),s.columns,"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function bie(i,t){if(1&i&&(Ze(0,fie,2,8,"ng-container",2),Ze(1,gie,2,8,"ng-container",0),Ze(2,yie,2,10,"ng-container",0),Ze(3,Cie,2,8,"ng-container",2)),2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),De(1),ve("ngIf","rowspan"!==r.dt.rowGroupMode),De(1),ve("ngIf","rowspan"===r.dt.rowGroupMode),De(1),ve("ngIf",r.dt.groupFooterTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupFooter(r.value,e,r.getRowIndex(n)))}}function xie(i,t){if(1&i&&(Hr(0),Ze(1,bie,4,4,"ng-template",1),Gr()),2&i){const e=_e();De(1),ve("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function wie(i,t){1&i&&qi(0)}function Aie(i,t){if(1&i&&Ze(0,wie,1,0,"ng-container",4),2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngTemplateOutlet",e?r.template:r.dt.loadingBodyTemplate)("ngTemplateOutletContext",BC(2,U1,e,r.getRowIndex(n),r.columns,"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen))}}function Iie(i,t){if(1&i&&(Hr(0),Ze(1,Aie,1,8,"ng-template",1),Gr()),2&i){const e=_e();De(1),ve("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Sie(i,t){1&i&&qi(0)}const H1=function(i,t,e,n,r,s){return{$implicit:i,rowIndex:t,columns:e,expanded:n,editing:r,frozen:s}};function Eie(i,t){if(1&i&&(Hr(0),Ze(1,Sie,1,0,"ng-container",4),Gr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);De(1),ve("ngTemplateOutlet",s.template)("ngTemplateOutletContext",zC(2,H1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Tie(i,t){1&i&&qi(0)}function Mie(i,t){if(1&i&&(Hr(0,3),Ze(1,Tie,1,0,"ng-container",4),Gr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);De(1),ve("ngTemplateOutlet",s.dt.groupHeaderTemplate)("ngTemplateOutletContext",zC(2,H1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}function Die(i,t){1&i&&qi(0)}function Lie(i,t){1&i&&qi(0)}function Pie(i,t){if(1&i&&(Hr(0,3),Ze(1,Lie,1,0,"ng-container",4),Gr()),2&i){const e=_e(2),n=e.$implicit,r=e.index,s=_e(2);De(1),ve("ngTemplateOutlet",s.dt.groupFooterTemplate)("ngTemplateOutletContext",zC(2,H1,n,s.getRowIndex(r),s.columns,s.dt.isRowExpanded(n),"row"===s.dt.editMode&&s.dt.isRowEditing(n),s.frozen))}}const YV=function(i,t,e,n){return{$implicit:i,rowIndex:t,columns:e,frozen:n}};function Rie(i,t){if(1&i&&(Hr(0),Ze(1,Die,1,0,"ng-container",4),Ze(2,Pie,2,9,"ng-container",2),Gr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);De(1),ve("ngTemplateOutlet",s.dt.expandedRowTemplate)("ngTemplateOutletContext",Nf(3,YV,n,s.getRowIndex(r),s.columns,s.frozen)),De(1),ve("ngIf",s.dt.groupFooterTemplate&&"subheader"===s.dt.rowGroupMode&&s.shouldRenderRowGroupFooter(s.value,n,s.getRowIndex(r)))}}function kie(i,t){if(1&i&&(Ze(0,Eie,2,9,"ng-container",0),Ze(1,Mie,2,9,"ng-container",2),Ze(2,Rie,3,8,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngIf",!r.dt.groupHeaderTemplate),De(1),ve("ngIf",r.dt.groupHeaderTemplate&&"subheader"===r.dt.rowGroupMode&&r.shouldRenderRowGroupHeader(r.value,e,r.getRowIndex(n))),De(1),ve("ngIf",r.dt.isRowExpanded(e))}}function Oie(i,t){if(1&i&&(Hr(0),Ze(1,kie,3,3,"ng-template",1),Gr()),2&i){const e=_e();De(1),ve("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Fie(i,t){1&i&&qi(0)}function Nie(i,t){1&i&&qi(0)}function Bie(i,t){if(1&i&&(Hr(0),Ze(1,Nie,1,0,"ng-container",4),Gr()),2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e(2);De(1),ve("ngTemplateOutlet",s.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",Nf(2,YV,n,s.getRowIndex(r),s.columns,s.frozen))}}function zie(i,t){if(1&i&&(Ze(0,Fie,1,0,"ng-container",4),Ze(1,Bie,2,7,"ng-container",0)),2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngTemplateOutlet",r.template)("ngTemplateOutletContext",zC(3,H1,e,r.getRowIndex(n),r.columns,r.dt.isRowExpanded(e),"row"===r.dt.editMode&&r.dt.isRowEditing(e),r.frozen)),De(1),ve("ngIf",r.dt.isRowExpanded(e))}}function Vie(i,t){if(1&i&&(Hr(0),Ze(1,zie,2,10,"ng-template",1),Gr()),2&i){const e=_e();De(1),ve("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function Uie(i,t){1&i&&qi(0)}const KV=function(i,t){return{$implicit:i,frozen:t}};function Hie(i,t){if(1&i&&(Hr(0),Ze(1,Uie,1,0,"ng-container",4),Gr()),2&i){const e=_e();De(1),ve("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",ys(2,KV,e.columns,e.frozen))}}function Gie(i,t){1&i&&qi(0)}function Wie(i,t){if(1&i&&(Hr(0),Ze(1,Gie,1,0,"ng-container",4),Gr()),2&i){const e=_e();De(1),ve("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",ys(2,KV,e.columns,e.frozen))}}function jie(i,t){if(1&i&&(ct(0,"span",2),cr(1),ht()),2&i){const e=_e();De(1),ds(e.getBadgeValue())}}const $ie=function(i,t,e){return{"pi-sort-amount-up-alt":i,"pi-sort-amount-down":t,"pi-sort-alt":e}},ZV=function(i,t){return{"p-checkbox-focused":i,"p-checkbox-disabled":t}},Yie=function(i,t,e){return{"p-checkbox-box p-component":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}},QV=function(i){return{"pi pi-check":i}},Kie=function(i,t,e){return{"p-checkbox-box":!0,"p-highlight":i,"p-focus":t,"p-disabled":e}};let xw=(()=>{class i{constructor(){this.sortSource=new nn,this.selectionSource=new nn,this.contextMenuSource=new nn,this.valueSource=new nn,this.totalRecordsSource=new nn,this.columnsSource=new nn,this.resetSource=new nn,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),ib=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.zone=n,this.tableService=r,this.cd=s,this.filterService=o,this.overlayService=l,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new jn,this.selectionChange=new jn,this.contextMenuSelectionChange=new jn,this.contextMenuSelectionMode="separate",this.rowTrackBy=(u,p)=>p,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="stack",this.breakpoint="960px",this.onRowSelect=new jn,this.onRowUnselect=new jn,this.onPage=new jn,this.onSort=new jn,this.onFilter=new jn,this.onLazyLoad=new jn,this.onRowExpand=new jn,this.onRowCollapse=new jn,this.onContextMenuSelect=new jn,this.onColResize=new jn,this.onColReorder=new jn,this.onRowReorder=new jn,this.onEditInit=new jn,this.onEditComplete=new jn,this.onEditCancel=new jn,this.onHeaderCheckboxToggle=new jn,this.sortFunction=new jn,this.firstChange=new jn,this.rowsChange=new jn,this.onStateSave=new jn,this.onStateRestore=new jn,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=Kx()}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get processedData(){return this.filteredValue||this.value||[]}dataToRender(e){const n=e||this.processedData;if(n&&this.paginator){const r=this.lazy?0:this.first;return n.slice(r,r+this.rows)}return n}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(gr.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(gr.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.onPage.emit({first:this.first,rows:this.rows}),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let n=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let r=n.metaKey||n.ctrlKey,s=this.getSortMeta(e.field);s?r?s.order=-1*s.order:(this._multiSortMeta=[{field:e.field,order:-1*s.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!r||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,n=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&n){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:n}):(this.value.sort((s,o)=>{let l=gr.resolveFieldData(s,e),u=gr.resolveFieldData(o,e),p=null;return p=null==l&&null!=u?-1:null!=l&&null==u?1:null==l&&null==u?0:"string"==typeof l&&"string"==typeof u?l.localeCompare(u):l<u?-1:l>u?1:0,n*p}),this._value=[...this.value]),this.hasFilter()&&this._filter());let r={field:e,order:n};this.onSort.emit(r),this.tableService.onSort(r)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,n)=>this.multisortField(e,n,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,n,r,s){let o=gr.resolveFieldData(e,r[s].field),l=gr.resolveFieldData(n,r[s].field),u=null;if(null==o&&null!=l)u=-1;else if(null!=o&&null==l)u=1;else if(null==o&&null==l)u=0;else if("string"==typeof o||o instanceof String){if(o.localeCompare&&o!=l)return r[s].order*o.localeCompare(l)}else u=o<l?-1:1;return o==l?r.length-1>s?this.multisortField(e,n,r,s+1):0:r[s].order*u}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let n=0;n<this.multiSortMeta.length;n++)if(this.multiSortMeta[n].field===e)return this.multiSortMeta[n];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let n=!1;if(this.multiSortMeta)for(let r=0;r<this.multiSortMeta.length;r++)if(this.multiSortMeta[r].field==e){n=!0;break}return n}}handleRowClick(e){let n=e.originalEvent.target,r=n.nodeName,s=n.parentElement&&n.parentElement.nodeName;if("INPUT"!=r&&"BUTTON"!=r&&"A"!=r&&"INPUT"!=s&&"BUTTON"!=s&&"A"!=s&&!Gt.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let o=e.rowData,l=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)Gt.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=l,this.selectRange(e.originalEvent,l);else{let u=this.isSelected(o);if(!u&&!this.isRowSelectable(o,l))return;let p=!this.rowTouched&&this.metaKeySelection,v=this.dataKey?String(gr.resolveFieldData(o,this.dataKey)):null;if(this.anchorRowIndex=l,this.rangeRowIndex=l,p){let x=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(u&&x){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let I=this.findIndexInSelection(o);this._selection=this.selection.filter((M,F)=>F!=I),this.selectionChange.emit(this.selection),v&&delete this.selectionKeys[v]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row"})}else this.isSingleSelectionMode()?(this._selection=o,this.selectionChange.emit(o),v&&(this.selectionKeys={},this.selectionKeys[v]=1)):this.isMultipleSelectionMode()&&(x?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,o],this.selectionChange.emit(this.selection),v&&(this.selectionKeys[v]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})}else if("single"===this.selectionMode)u?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l})):(this._selection=o,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys={},this.selectionKeys[v]=1));else if("multiple"===this.selectionMode)if(u){let x=this.findIndexInSelection(o);this._selection=this.selection.filter((I,M)=>M!=x),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&delete this.selectionKeys[v]}else this._selection=this.selection?[...this.selection,o]:[o],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:o,type:"row",index:l}),v&&(this.selectionKeys[v]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const n=e.rowData,r=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=n,this.contextMenuSelectionChange.emit(n),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:n,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(n);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let s=this.isSelected(n),o=this.dataKey?String(gr.resolveFieldData(n,this.dataKey)):null;if(!s){if(!this.isRowSelectable(n,r))return;this.isSingleSelectionMode()?(this.selection=n,this.selectionChange.emit(n),o&&(this.selectionKeys={},this.selectionKeys[o]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),o&&(this.selectionKeys[o]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:n,index:e.rowIndex})}}}selectRange(e,n){let r,s;this.anchorRowIndex>n?(r=n,s=this.anchorRowIndex):this.anchorRowIndex<n?(r=this.anchorRowIndex,s=n):(r=n,s=n),this.lazy&&this.paginator&&(r-=this.first,s-=this.first);let o=[];for(let l=r;l<=s;l++){let u=this.filteredValue?this.filteredValue[l]:this.value[l];if(!this.isSelected(u)){if(!this.isRowSelectable(u,n))continue;o.push(u),this._selection=[...this.selection,u];let p=this.dataKey?String(gr.resolveFieldData(u,this.dataKey)):null;p&&(this.selectionKeys[p]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:o,type:"row"})}clearSelectionRange(e){let n,r;this.rangeRowIndex>this.anchorRowIndex?(n=this.anchorRowIndex,r=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(n=this.rangeRowIndex,r=this.anchorRowIndex):(n=this.rangeRowIndex,r=this.rangeRowIndex);for(let s=n;s<=r;s++){let o=this.value[s],l=this.findIndexInSelection(o);this._selection=this.selection.filter((p,v)=>v!=l);let u=this.dataKey?String(gr.resolveFieldData(o,this.dataKey)):null;u&&delete this.selectionKeys[u],this.onRowUnselect.emit({originalEvent:e,data:o,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[gr.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let n=-1;if(this.selection&&this.selection.length)for(let r=0;r<this.selection.length;r++)if(this.equals(e,this.selection[r])){n=r;break}return n}isRowSelectable(e,n){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:n}))}toggleRowWithRadio(e,n){if(this.preventSelectionSetterPropagation=!0,this.selection!=n){if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=n,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(gr.resolveFieldData(n,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,n){this.selection=this.selection||[];let r=this.isSelected(n),s=this.dataKey?String(gr.resolveFieldData(n,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,r){let o=this.findIndexInSelection(n);this._selection=this.selection.filter((l,u)=>u!=o),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&delete this.selectionKeys[s]}else{if(!this.isRowSelectable(n,e.rowIndex))return;this._selection=this.selection?[...this.selection,n]:[n],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:n,type:"checkbox"}),s&&(this.selectionKeys[s]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,n){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:n});else{const r=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let s=this.selectionPageOnly&&this._selection?this._selection.filter(o=>!r.some(l=>this.equals(o,l))):[];n&&(s=this.frozenValue?[...s,...this.frozenValue,...r]:[...s,...r],s=this.rowSelectable?s.filter((o,l)=>this.rowSelectable({data:o,index:l})):s),this._selection=s,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:n}),this.isStateful()&&this.saveState()}}equals(e,n){return"equals"===this.compareSelectionBy?e===n:gr.equals(e,n,this.dataKey)}filter(e,n,r){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[n]&&delete this.filters[n]:this.filters[n]={value:e,matchMode:r},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,n){this.filter(e,"global",n)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let n=0;n<this.value.length;n++){let l,r=!0,s=!1,o=!1;for(let u in this.filters)if(this.filters.hasOwnProperty(u)&&"global"!==u){o=!0;let p=u,v=this.filters[p];if(Array.isArray(v)){for(let x of v)if(r=this.executeLocalFilter(p,this.value[n],x),x.operator===MB.OR&&r||x.operator===MB.AND&&!r)break}else r=this.executeLocalFilter(p,this.value[n],v);if(!r)break}if(this.filters.global&&!s&&e)for(let u=0;u<e.length&&(s=this.filterService.filters[this.filters.global.matchMode](gr.resolveFieldData(this.value[n],e[u].field||e[u]),this.filters.global.value,this.filterLocale),!s);u++);l=this.filters.global?o?o&&r&&s:s:o&&r,l&&this.filteredValue.push(this.value[n])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,n,r){let s=r.value,o=r.matchMode||Zh.STARTS_WITH,l=gr.resolveFieldData(n,e);return(0,this.filterService.filters[o])(l,s,this.filterLocale)}hasFilter(){let e=!0;for(let n in this.filters)if(this.filters.hasOwnProperty(n)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let n,r="",s=this.columns;e&&e.selectionOnly?n=this.selection||[]:(n=this.filteredValue||this.value,this.frozenValue&&(n=n?[...this.frozenValue,...n]:this.frozenValue));for(let u=0;u<s.length;u++){let p=s[u];!1!==p.exportable&&p.field&&(r+='"'+this.getExportHeader(p)+'"',u<s.length-1&&(r+=this.csvSeparator))}n.forEach((u,p)=>{r+="\n";for(let v=0;v<s.length;v++){let x=s[v];if(!1!==x.exportable&&x.field){let I=gr.resolveFieldData(u,x.field);I=null!=I?this.exportFunction?this.exportFunction({data:I,field:x.field}):String(I).replace(/"/g,'""'):"",r+='"'+I+'"',v<s.length-1&&(r+=this.csvSeparator)}}});let o=new Blob([r],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a");l.style.display="none",document.body.appendChild(l),void 0!==l.download?(l.setAttribute("href",URL.createObjectURL(o)),l.setAttribute("download",this.exportFilename+".csv"),l.click()):(r="data:text/csv;charset=utf-8,"+r,window.open(encodeURI(r))),document.body.removeChild(l)}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,n,r,s){this.editingCell=e,this.editingCellData=n,this.editingCellField=r,this.editingCellRowIndex=s,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===Gt.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(Gt.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let n=String(gr.resolveFieldData(e,this.dataKey));this.editingRowKeys[n]=!0}saveRowEdit(e,n){if(0===Gt.find(n,".ng-invalid.ng-dirty").length){let r=String(gr.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[r]}}cancelRowEdit(e){let n=String(gr.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[n]}toggleRow(e,n){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let r=String(gr.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[r]?(delete this.expandedRowKeys[r],this.onRowCollapse.emit({originalEvent:n,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[r]=!0,this.onRowExpand.emit({originalEvent:n,data:e})),n&&n.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(gr.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(gr.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let n=Gt.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let n=Gt.getOffset(this.containerViewChild.nativeElement).left;Gt.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-n+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,r=this.resizeColumnElement.offsetWidth+e;if(r>=(this.resizeColumnElement.style.minWidth||15)){if("fit"===this.columnResizeMode){let l=this.resizeColumnElement.nextElementSibling.offsetWidth-e;r>15&&l>15&&this.resizeTableCells(r,l)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+e+"px"),this.resizeTableCells(r,null));this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",Gt.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,n){let r=Gt.index(this.resizeColumnElement),s=[];const o=Gt.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");Gt.find(o,"tr > th").forEach(p=>s.push(Gt.getOuterWidth(p))),this.destroyStyleElement(),this.createStyleElement();let u="";s.forEach((p,v)=>{let x=v===r?e:n&&v===r+1?n:p;u+=`\n                #${this.id} .p-datatable-thead > tr > th:nth-child(${v+1}),\n                #${this.id} .p-datatable-tbody > tr > td:nth-child(${v+1}),\n                #${this.id} .p-datatable-tfoot > tr > td:nth-child(${v+1}) {\n                    ${this.scrollable?`flex: 1 1 ${x}px !important`:`width: ${x}px !important`}\n                }\n            `}),this.styleElement.innerHTML=u}onColumnDragStart(e,n){this.reorderIconWidth=Gt.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=Gt.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=n,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,n){if(this.reorderableColumns&&this.draggedColumn&&n){e.preventDefault();let r=Gt.getOffset(this.containerViewChild.nativeElement),s=Gt.getOffset(n);if(this.draggedColumn!=n){let o=Gt.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),l=Gt.indexWithinGroup(n,"preorderablecolumn"),u=s.left-r.left,v=s.left+n.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=s.top-r.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=s.top-r.top+n.offsetHeight+"px",e.pageX>v?(this.reorderIndicatorUpViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u+n.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=u-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),l-o==1&&-1===this.dropPosition||l-o==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,n){if(e.preventDefault(),this.draggedColumn){let r=Gt.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),s=Gt.indexWithinGroup(n,"preorderablecolumn"),o=r!=s;o&&(s-r==1&&-1===this.dropPosition||r-s==1&&1===this.dropPosition)&&(o=!1),o&&s<r&&1===this.dropPosition&&(s+=1),o&&s>r&&-1===this.dropPosition&&(s-=1),o&&(gr.reorderArray(this.columns,r,s),this.onColReorder.emit({dragIndex:r,dropIndex:s,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,n){this.rowDragging=!0,this.draggedRowIndex=n,e.dataTransfer.setData("text","b")}onRowDragOver(e,n,r){if(this.rowDragging&&this.draggedRowIndex!==n){let s=Gt.getOffset(r).top+Gt.getWindowScrollTop(),o=e.pageY,l=s+Gt.getOuterHeight(r)/2,u=r.previousElementSibling;o<l?(Gt.removeClass(r,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=n,u?Gt.addClass(u,"p-datatable-dragpoint-bottom"):Gt.addClass(r,"p-datatable-dragpoint-top")):(u?Gt.removeClass(u,"p-datatable-dragpoint-bottom"):Gt.addClass(r,"p-datatable-dragpoint-top"),this.droppedRowIndex=n+1,Gt.addClass(r,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,n){let r=n.previousElementSibling;r&&Gt.removeClass(r,"p-datatable-dragpoint-bottom"),Gt.removeClass(n,"p-datatable-dragpoint-bottom"),Gt.removeClass(n,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,n){if(null!=this.droppedRowIndex){let r=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;gr.reorderArray(this.value,this.draggedRowIndex,r),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:r})}this.onRowDragLeave(e,n),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let n={};this.paginator&&(n.first=this.first,n.rows=this.rows),this.sortField&&(n.sortField=this.sortField,n.sortOrder=this.sortOrder),this.multiSortMeta&&(n.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(n.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(n),this.reorderableColumns&&this.saveColumnOrder(n),this.selection&&(n.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(n.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(n)),this.onStateSave.emit(n)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const n=this.getStorage().getItem(this.stateKey),r=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(n){let o=JSON.parse(n,function(o,l){return"string"==typeof l&&r.test(l)?new Date(l):l});this.paginator&&(void 0!==this.first&&(this.first=o.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=o.rows,this.rowsChange.emit(this.rows))),o.sortField&&(this.restoringSort=!0,this._sortField=o.sortField,this._sortOrder=o.sortOrder),o.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=o.multiSortMeta),o.filters&&(this.restoringFilter=!0,this.filters=o.filters),this.resizableColumns&&(this.columnWidthsState=o.columnWidths,this.tableWidthState=o.tableWidth),o.expandedRowKeys&&(this.expandedRowKeys=o.expandedRowKeys),o.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(o.selection)),this.stateRestored=!0,this.onStateRestore.emit(o)}}saveColumnWidths(e){let n=[];Gt.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(s=>n.push(Gt.getOuterWidth(s))),e.columnWidths=n.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=Gt.getOuterWidth(this.tableViewChild.nativeElement)+"px")}setResizeTableWidth(e){if(this.virtualScroll){const n=Gt.findSingle(this.containerViewChild.nativeElement,".p-scroller > table > tbody");n.style.width=e,n.style.minWidth=e}this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),gr.isNotEmpty(e)){this.createStyleElement();let n="";e.forEach((r,s)=>{n+=`\n                        #${this.id} .p-datatable-thead > tr > th:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tbody > tr > td:nth-child(${s+1}),\n                        #${this.id} .p-datatable-tfoot > tr > td:nth-child(${s+1}) {\n                            ${this.scrollable?`flex: 1 1 ${r}px !important`:`width: ${r}px !important`}\n                        }\n                    `}),this.styleElement.innerHTML=n}}}saveColumnOrder(e){if(this.columns){let n=[];this.columns.map(r=>{n.push(r.field||r.key)}),e.columnOrder=n}}restoreColumnOrder(){const n=this.getStorage().getItem(this.stateKey);if(n){let s=JSON.parse(n).columnOrder;if(s){let o=[];s.map(l=>{let u=this.findColumnByKey(l);u&&o.push(u)}),this.columnOrderStateRestored=!0,this.columns=o}}}findColumnByKey(e){if(!this.columns)return null;for(let n of this.columns)if(n.key===e||n.field===e)return n}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id} .p-datatable-thead > tr > th,\n    #${this.id} .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id} .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(Yo),Qt(xw),Qt(Ho),Qt(d1),Qt(Zx))},i.\u0275cmp=Ar({type:i,selectors:[["p-table"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(Pne,5),is(Rne,5),is(kne,5),is(One,5),is(Fne,5),is(Nne,5),is(Bne,5),is(zne,5)),2&e){let r;or(r=ar())&&(n.containerViewChild=r.first),or(r=ar())&&(n.resizeHelperViewChild=r.first),or(r=ar())&&(n.reorderIndicatorUpViewChild=r.first),or(r=ar())&&(n.reorderIndicatorDownViewChild=r.first),or(r=ar())&&(n.wrapperViewChild=r.first),or(r=ar())&&(n.tableViewChild=r.first),or(r=ar())&&(n.tableHeaderViewChild=r.first),or(r=ar())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[ko([xw]),ya],decls:16,vars:33,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","delay","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",1,"p-datatable-table",3,"ngClass","ngStyle"],["table",""],[1,"p-datatable-thead"],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-tfoot"],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,n){1&e&&(ct(0,"div",0,1),Ze(2,Vne,2,2,"div",2),Ze(3,Hne,2,1,"div",3),Ze(4,Gne,1,17,"p-paginator",4),ct(5,"div",5,6),Ze(7,qne,3,14,"p-scroller",7),Ze(8,Kne,2,7,"ng-container",8),Ze(9,nie,8,22,"ng-template",null,9,vc),ht(),Ze(11,iie,1,17,"p-paginator",10),Ze(12,sie,2,1,"div",11),Ze(13,oie,2,0,"div",12),Ze(14,aie,2,0,"span",13),Ze(15,lie,2,0,"span",14),ht()),2&e&&(Vr(n.styleClass),ve("ngStyle",n.style)("ngClass",tM(16,cie,[n.rowHover||n.selectionMode,n.autoLayout,n.resizableColumns,n.resizableColumns&&"fit"===n.columnResizeMode,n.scrollable,n.scrollable&&"vertical"===n.scrollDirection,n.scrollable&&"horizontal"===n.scrollDirection,n.scrollable&&"both"===n.scrollDirection,n.scrollable&&"flex"===n.scrollHeight,"stack"===n.responsiveLayout,"scroll"===n.responsiveLayout,n.responsive,null!=n.headerGroupedTemplate,null!=n.footerGroupedTemplate])),vr("id",n.id),De(2),ve("ngIf",n.loading&&n.showLoader),De(1),ve("ngIf",n.captionTemplate),De(1),ve("ngIf",n.paginator&&("top"===n.paginatorPosition||"both"==n.paginatorPosition)),De(1),ve("ngStyle",Bi(31,uie,n.virtualScroll?"":n.scrollHeight)),De(2),ve("ngIf",n.virtualScroll),De(1),ve("ngIf",!n.virtualScroll),De(3),ve("ngIf",n.paginator&&("bottom"===n.paginatorPosition||"both"==n.paginatorPosition)),De(1),ve("ngIf",n.summaryTemplate),De(1),ve("ngIf",n.resizableColumns),De(1),ve("ngIf",n.reorderableColumns),De(1),ve("ngIf",n.reorderableColumns))},dependencies:function(){return[_o,Oo,Dl,Ko,Cte,_l,F1,_re]},styles:[".p-datatable{position:relative}.p-datatable table{border-collapse:collapse;min-width:100%;table-layout:fixed}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-auto-layout>.p-datatable-wrapper{overflow-x:auto}.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper{overflow-x:auto}.p-datatable-responsive-scroll>.p-datatable-wrapper>table,.p-datatable-auto-layout>.p-datatable-wrapper>table{table-layout:auto}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable .p-datatable-wrapper{position:relative;overflow:auto}.p-datatable-scrollable .p-datatable-thead,.p-datatable-scrollable .p-datatable-tbody,.p-datatable-scrollable .p-datatable-tfoot{display:block}.p-datatable-scrollable .p-datatable-thead>tr,.p-datatable-scrollable .p-datatable-tbody>tr,.p-datatable-scrollable .p-datatable-tfoot>tr{display:flex;flex-wrap:nowrap;width:100%}.p-datatable-scrollable .p-datatable-thead>tr>th,.p-datatable-scrollable .p-datatable-tbody>tr>td,.p-datatable-scrollable .p-datatable-tfoot>tr>td{display:flex;flex:1 1 0;align-items:center}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-thead,.p-datatable-scrollable>.p-datatable-wrapper>.p-scroller-viewport>.p-scroller>.p-datatable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable>.p-datatable-wrapper>.p-datatable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-scrollable-both .p-datatable-thead>tr>th,.p-datatable-scrollable-both .p-datatable-tbody>tr>td,.p-datatable-scrollable-both .p-datatable-tfoot>tr>td,.p-datatable-scrollable-horizontal .p-datatable-thead>tr>th .p-datatable-scrollable-horizontal .p-datatable-tbody>tr>td,.p-datatable-scrollable-horizontal .p-datatable-tfoot>tr>td{flex:0 0 auto}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable .p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable .p-rowgroup-header{position:sticky;z-index:1}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot{display:table;border-collapse:collapse;width:100%;table-layout:fixed}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr{display:table-row}.p-datatable-scrollable.p-datatable-grouped-header .p-datatable-thead>tr>th,.p-datatable-scrollable.p-datatable-grouped-footer .p-datatable-tfoot>tr>td{display:table-cell}.p-datatable-scrollable .p-scroller>.p-datatable-table{display:inline-block}.p-datatable-flex-scrollable{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-flex-scrollable .p-datatable-virtual-scrollable-body{flex:1}.p-datatable-resizable>.p-datatable-wrapper{overflow-x:auto}.p-datatable-resizable .p-datatable-thead>tr>th,.p-datatable-resizable .p-datatable-tfoot>tr>td,.p-datatable-resizable .p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable .p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-fit .p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable .p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),i})(),_re=(()=>{class i{constructor(e,n,r,s){this.dt=e,this.tableService=n,this.cd=r,this.el=s,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition(),this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.updateScrollerPosition()}ngOnChanges(e){if(e.scrollerOptions){const{previousValue:n,currentValue:r}=e.scrollerOptions;this.dt.virtualScroll&&this.getScrollerOption("vertical")&&this.getScrollerOption("itemSize",n)!==this.getScrollerOption("itemSize",r)&&this.updateScrollerPosition()}}shouldRenderRowGroupHeader(e,n,r){let s=gr.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==gr.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,n,r){let s=gr.resolveFieldData(n,this.dt.groupRowsBy),o=e[r+1];return!o||s!==gr.resolveFieldData(o,this.dt.groupRowsBy)}shouldRenderRowspan(e,n,r){let s=gr.resolveFieldData(n,this.dt.groupRowsBy),o=e[r-1];return!o||s!==gr.resolveFieldData(o,this.dt.groupRowsBy)}calculateRowGroupSize(e,n,r){let s=gr.resolveFieldData(n,this.dt.groupRowsBy),o=s,l=0;for(;s===o;){l++;let u=e[++r];if(!u)break;o=gr.resolveFieldData(u,this.dt.groupRowsBy)}return 1===l?null:l}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=Gt.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=Gt.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}updateScrollerPosition(){const e=Gt.getOuterHeight(this.el.nativeElement.previousElementSibling);this.el.nativeElement.style.top=(this.el.nativeElement.style.top||0)+e+"px"}getScrollerOption(e,n){return this.dt.virtualScroll&&(n=n||this.scrollerOptions)?n[e]:null}getRowIndex(e){const n=this.dt.paginator?this.dt.first+e:e,r=this.getScrollerOption("getItemOptions");return r?r(n).index:n}}return i.\u0275fac=function(e){return new(e||i)(Qt(ib),Qt(xw),Qt(Ho),Qt(qn))},i.\u0275cmp=Ar({type:i,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},features:[ya],attrs:hie,decls:6,vars:6,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(Ze(0,xie,2,2,"ng-container",0),Ze(1,Iie,2,2,"ng-container",0),Ze(2,Oie,2,2,"ng-container",0),Ze(3,Vie,2,2,"ng-container",0),Ze(4,Hie,2,5,"ng-container",0),Ze(5,Wie,2,5,"ng-container",0)),2&e&&(ve("ngIf",!n.dt.expandedRowTemplate&&!n.dt.virtualScroll),De(1),ve("ngIf",!n.dt.expandedRowTemplate&&n.dt.virtualScroll),De(1),ve("ngIf",n.dt.expandedRowTemplate&&!(n.frozen&&n.dt.frozenExpandedRowTemplate)),De(1),ve("ngIf",n.dt.frozenExpandedRowTemplate&&n.frozen),De(1),ve("ngIf",n.dt.loading),De(1),ve("ngIf",n.dt.isEmpty()&&!n.dt.loading))},dependencies:[ru,Oo,Dl],encapsulation:2}),i})(),Cre=(()=>{class i{constructor(e){this.dt=e,this.isEnabled()&&(this.subscription=this.dt.tableService.sortSource$.subscribe(n=>{this.updateSortState()}))}ngOnInit(){this.isEnabled()&&this.updateSortState()}updateSortState(){this.sorted=this.dt.isSorted(this.field),this.sortOrder=this.sorted?1===this.dt.sortOrder?"ascending":"descending":"none"}onClick(e){this.isEnabled()&&!this.isFilterElement(e.target)&&(this.updateSortState(),this.dt.sort({originalEvent:e,field:this.field}),Gt.clearSelection())}onEnterKey(e){this.onClick(e)}isEnabled(){return!0!==this.pSortableColumnDisabled}isFilterElement(e){return Gt.hasClass(e,"pi-filter-icon")||Gt.hasClass(e,"p-column-filter-menu-button")}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(ib))},i.\u0275dir=qr({type:i,selectors:[["","pSortableColumn",""]],hostAttrs:[1,"p-element"],hostVars:7,hostBindings:function(e,n){1&e&&mn("click",function(s){return n.onClick(s)})("keydown.enter",function(s){return n.onEnterKey(s)}),2&e&&(vr("tabindex",n.isEnabled()?"0":null)("role","columnheader")("aria-sort",n.sortOrder),Tp("p-sortable-column",n.isEnabled())("p-highlight",n.sorted))},inputs:{field:["pSortableColumn","field"],pSortableColumnDisabled:"pSortableColumnDisabled"}}),i})(),bre=(()=>{class i{constructor(e,n){this.dt=e,this.cd=n,this.subscription=this.dt.tableService.sortSource$.subscribe(r=>{this.updateSortState()})}ngOnInit(){this.updateSortState()}onClick(e){e.preventDefault()}updateSortState(){if("single"===this.dt.sortMode)this.sortOrder=this.dt.isSorted(this.field)?this.dt.sortOrder:0;else if("multiple"===this.dt.sortMode){let e=this.dt.getSortMeta(this.field);this.sortOrder=e?e.order:0}this.cd.markForCheck()}getMultiSortMetaIndex(){let e=this.dt._multiSortMeta,n=-1;if(e&&"multiple"===this.dt.sortMode&&(this.dt.showInitialSortBadge||e.length>1))for(let r=0;r<e.length;r++){let s=e[r];if(s.field===this.field||s.field===this.field){n=r;break}}return n}getBadgeValue(){let e=this.getMultiSortMetaIndex();return this.dt.groupRowsBy&&e>-1?e:e+1}isMultiSorted(){return"multiple"===this.dt.sortMode&&this.getMultiSortMetaIndex()>-1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(ib),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-sortIcon"]],hostAttrs:[1,"p-element"],inputs:{field:"field"},decls:2,vars:6,consts:[[1,"p-sortable-column-icon","pi","pi-fw",3,"ngClass"],["class","p-sortable-column-badge",4,"ngIf"],[1,"p-sortable-column-badge"]],template:function(e,n){1&e&&(si(0,"i",0),Ze(1,jie,2,1,"span",1)),2&e&&(ve("ngClass",qu(2,$ie,1===n.sortOrder,-1===n.sortOrder,0===n.sortOrder)),De(1),ve("ngIf",n.isMultiSorted()))},dependencies:[_o,Oo],encapsulation:2,changeDetection:0}),i})(),xre=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.subscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.dt.isSelected(this.value),this.cd.markForCheck()})}ngOnInit(){this.checked=this.dt.isSelected(this.value)}onClick(e){this.disabled||this.dt.toggleRowWithCheckbox({originalEvent:e,rowIndex:this.index},this.value),Gt.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(ib),Qt(xw),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-tableCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",value:"value",index:"index",inputId:"inputId",name:"name",required:"required",ariaLabel:"ariaLabel"},decls:6,vars:19,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(ct(0,"div",0),mn("click",function(s){return n.onClick(s)}),ct(1,"div",1)(2,"input",2),mn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),ht()(),ct(3,"div",3,4),si(5,"span",5),ht()()),2&e&&(ve("ngClass",ys(10,ZV,n.focused,n.disabled)),De(2),ve("checked",n.checked)("disabled",n.disabled),vr("id",n.inputId)("name",n.name)("required",n.required)("aria-label",n.ariaLabel),De(1),ve("ngClass",qu(13,Yie,n.checked,n.focused,n.disabled)),vr("aria-checked",n.checked),De(2),ve("ngClass",Bi(17,QV,n.checked)))},dependencies:[_o],encapsulation:2,changeDetection:0}),i})(),wre=(()=>{class i{constructor(e,n,r){this.dt=e,this.tableService=n,this.cd=r,this.valueChangeSubscription=this.dt.tableService.valueSource$.subscribe(()=>{this.checked=this.updateCheckedState()}),this.selectionChangeSubscription=this.dt.tableService.selectionSource$.subscribe(()=>{this.checked=this.updateCheckedState()})}ngOnInit(){this.checked=this.updateCheckedState()}onClick(e){this.disabled||this.dt.value&&this.dt.value.length>0&&this.dt.toggleRowsWithCheckbox(e,!this.checked),Gt.clearSelection()}onFocus(){this.focused=!0}onBlur(){this.focused=!1}isDisabled(){return this.disabled||!this.dt.value||!this.dt.value.length}ngOnDestroy(){this.selectionChangeSubscription&&this.selectionChangeSubscription.unsubscribe(),this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe()}updateCheckedState(){if(this.cd.markForCheck(),null!==this.dt._selectAll)return this.dt._selectAll;{const e=this.dt.selectionPageOnly?this.dt.dataToRender(this.dt.processedData):this.dt.processedData,n=this.dt.frozenValue?[...this.dt.frozenValue,...e]:e,r=this.dt.rowSelectable?n.filter((s,o)=>this.dt.rowSelectable({data:s,index:o})):n;return gr.isNotEmpty(r)&&gr.isNotEmpty(this.dt.selection)&&r.every(s=>this.dt.selection.some(o=>this.dt.equals(s,o)))}}}return i.\u0275fac=function(e){return new(e||i)(Qt(ib),Qt(xw),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-tableHeaderCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",inputId:"inputId",name:"name",ariaLabel:"ariaLabel"},decls:7,vars:18,consts:[[1,"p-checkbox","p-component",3,"ngClass","click"],[1,"p-hidden-accessible"],["type","checkbox",3,"checked","disabled","focus","blur"],["cb",""],["role","checkbox",3,"ngClass"],["box",""],[1,"p-checkbox-icon",3,"ngClass"]],template:function(e,n){1&e&&(ct(0,"div",0),mn("click",function(s){return n.onClick(s)}),ct(1,"div",1)(2,"input",2,3),mn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()}),ht()(),ct(4,"div",4,5),si(6,"span",6),ht()()),2&e&&(ve("ngClass",ys(9,ZV,n.focused,n.isDisabled())),De(2),ve("checked",n.checked)("disabled",n.isDisabled()),vr("id",n.inputId)("name",n.name)("aria-label",n.ariaLabel),De(2),ve("ngClass",qu(12,Kie,n.checked,n.focused,n.isDisabled())),vr("aria-checked",n.checked),De(2),ve("ngClass",Bi(16,QV,n.checked)))},dependencies:[_o],encapsulation:2,changeDetection:0}),i})(),Are=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,HV,R2,N1,O1,rv,Dte,qV,z1,Nte,iv,Na,iv]}),i})(),Ire=(()=>{class i{constructor(e){this.el=e}onkeydown(e){if(!0!==this.pFocusTrapDisabled){e.preventDefault();let n=Gt.getFocusableElements(this.el.nativeElement);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn))},i.\u0275dir=qr({type:i,selectors:[["","pFocusTrap",""]],hostAttrs:[1,"p-element"],hostBindings:function(e,n){1&e&&mn("keydown.tab",function(s){return n.onkeydown(s)})("keydown.shift.tab",function(s){return n.onkeydown(s)})},inputs:{pFocusTrapDisabled:"pFocusTrapDisabled"}}),i})(),Sre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();const Ere=["titlebar"],Tre=["content"],Mre=["footer"];function Dre(i,t){if(1&i){const e=Pi();ct(0,"div",11),mn("mousedown",function(r){return wt(e),It(_e(3).initResize(r))}),ht()}}function Lre(i,t){if(1&i&&(ct(0,"span",18),cr(1),ht()),2&i){const e=_e(4);vr("id",e.id+"-label"),De(1),ds(e.header)}}function Pre(i,t){1&i&&(ct(0,"span",18),nu(1,1),ht()),2&i&&vr("id",_e(4).id+"-label")}function Rre(i,t){1&i&&qi(0)}const kre=function(){return{"p-dialog-header-icon p-dialog-header-maximize p-link":!0}};function Ore(i,t){if(1&i){const e=Pi();ct(0,"button",19),mn("click",function(){return wt(e),It(_e(4).maximize())})("keydown.enter",function(){return wt(e),It(_e(4).maximize())}),si(1,"span",20),ht()}if(2&i){const e=_e(4);ve("ngClass",xa(2,kre)),De(1),ve("ngClass",e.maximized?e.minimizeIcon:e.maximizeIcon)}}const Fre=function(){return{"p-dialog-header-icon p-dialog-header-close p-link":!0}};function Nre(i,t){if(1&i){const e=Pi();ct(0,"button",21),mn("click",function(r){return wt(e),It(_e(4).close(r))})("keydown.enter",function(r){return wt(e),It(_e(4).close(r))}),si(1,"span",22),ht()}if(2&i){const e=_e(4);ve("ngClass",xa(4,Fre)),vr("aria-label",e.closeAriaLabel)("tabindex",e.closeTabindex),De(1),ve("ngClass",e.closeIcon)}}function Bre(i,t){if(1&i){const e=Pi();ct(0,"div",12,13),mn("mousedown",function(r){return wt(e),It(_e(3).initDrag(r))}),Ze(2,Lre,2,2,"span",14),Ze(3,Pre,2,1,"span",14),Ze(4,Rre,1,0,"ng-container",9),ct(5,"div",15),Ze(6,Ore,2,3,"button",16),Ze(7,Nre,2,5,"button",17),ht()()}if(2&i){const e=_e(3);De(2),ve("ngIf",!e.headerFacet&&!e.headerTemplate),De(1),ve("ngIf",e.headerFacet),De(1),ve("ngTemplateOutlet",e.headerTemplate),De(2),ve("ngIf",e.maximizable),De(1),ve("ngIf",e.closable)}}function zre(i,t){1&i&&qi(0)}function Vre(i,t){1&i&&qi(0)}function Ure(i,t){if(1&i&&(ct(0,"div",23,24),nu(2,2),Ze(3,Vre,1,0,"ng-container",9),ht()),2&i){const e=_e(3);De(3),ve("ngTemplateOutlet",e.footerTemplate)}}const Hre=function(i,t,e,n){return{"p-dialog p-component":!0,"p-dialog-rtl":i,"p-dialog-draggable":t,"p-dialog-resizable":e,"p-dialog-maximized":n}},Gre=function(i,t){return{transform:i,transition:t}},Wre=function(i){return{value:"visible",params:i}};function jre(i,t){if(1&i){const e=Pi();ct(0,"div",3,4),mn("@animation.start",function(r){return wt(e),It(_e(2).onAnimationStart(r))})("@animation.done",function(r){return wt(e),It(_e(2).onAnimationEnd(r))}),Ze(2,Dre,1,0,"div",5),Ze(3,Bre,8,5,"div",6),ct(4,"div",7,8),nu(6),Ze(7,zre,1,0,"ng-container",9),ht(),Ze(8,Ure,4,1,"div",10),ht()}if(2&i){const e=_e(2);Vr(e.styleClass),ve("ngClass",Nf(15,Hre,e.rtl,e.draggable,e.resizable,e.maximized))("ngStyle",e.style)("pFocusTrapDisabled",!1===e.focusTrap)("@animation",Bi(23,Wre,ys(20,Gre,e.transformOptions,e.transitionOptions))),vr("aria-labelledby",e.id+"-label"),De(2),ve("ngIf",e.resizable),De(1),ve("ngIf",e.showHeader),De(1),Vr(e.contentStyleClass),ve("ngClass","p-dialog-content")("ngStyle",e.contentStyle),De(3),ve("ngTemplateOutlet",e.contentTemplate),De(1),ve("ngIf",e.footerFacet||e.footerTemplate)}}const $re=function(i,t,e,n,r,s,o,l,u,p){return{"p-dialog-mask":!0,"p-component-overlay p-component-overlay-enter":i,"p-dialog-mask-scrollblocker":t,"p-dialog-left":e,"p-dialog-right":n,"p-dialog-top":r,"p-dialog-top-left":s,"p-dialog-top-right":o,"p-dialog-bottom":l,"p-dialog-bottom-left":u,"p-dialog-bottom-right":p}};function qre(i,t){if(1&i&&(ct(0,"div",1),Ze(1,jre,9,25,"div",2),ht()),2&i){const e=_e();Vr(e.maskStyleClass),ve("ngClass",tM(4,$re,[e.modal,e.modal||e.blockScroll,"left"===e.position,"right"===e.position,"top"===e.position,"topleft"===e.position||"top-left"===e.position,"topright"===e.position||"top-right"===e.position,"bottom"===e.position,"bottomleft"===e.position||"bottom-left"===e.position,"bottomright"===e.position||"bottom-right"===e.position])),De(1),ve("ngIf",e.visible)}}const Xre=["*",[["p-header"]],[["p-footer"]]],Yre=["*","p-header","p-footer"],Kre=nb([Ja({transform:"{{transform}}",opacity:0}),Cc("{{transition}}")]),Zre=nb([Cc("{{transition}}",Ja({transform:"{{transform}}",opacity:0}))]);let O2=(()=>{class i{constructor(e,n,r,s,o){this.el=e,this.renderer=n,this.zone=r,this.cd=s,this.config=o,this.draggable=!0,this.resizable=!0,this.closeOnEscape=!0,this.closable=!0,this.showHeader=!0,this.blockScroll=!1,this.autoZIndex=!0,this.baseZIndex=0,this.minX=0,this.minY=0,this.focusOnShow=!0,this.keepInViewport=!0,this.focusTrap=!0,this.transitionOptions="150ms cubic-bezier(0, 0, 0.2, 1)",this.closeIcon="pi pi-times",this.closeTabindex="-1",this.minimizeIcon="pi pi-window-minimize",this.maximizeIcon="pi pi-window-maximize",this.onShow=new jn,this.onHide=new jn,this.visibleChange=new jn,this.onResizeInit=new jn,this.onResizeEnd=new jn,this.onDragEnd=new jn,this.onMaximize=new jn,this.id=Kx(),this._style={},this._position="center",this.transformOptions="scale(0.7)"}get positionLeft(){return 0}set positionLeft(e){console.log("positionLeft property is deprecated.")}get positionTop(){return 0}set positionTop(e){console.log("positionTop property is deprecated.")}get responsive(){return!1}set responsive(e){console.log("Responsive property is deprecated.")}get breakpoint(){return 649}set breakpoint(e){console.log("Breakpoint property is not utilized and deprecated, use breakpoints or CSS media queries instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngOnInit(){this.breakpoints&&this.createStyle()}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.maskVisible&&(this.maskVisible=!0)}get style(){return this._style}set style(e){e&&(this._style={...e},this.originalStyle=e)}get position(){return this._position}set position(e){switch(this._position=e,e){case"topleft":case"bottomleft":case"left":this.transformOptions="translate3d(-100%, 0px, 0px)";break;case"topright":case"bottomright":case"right":this.transformOptions="translate3d(100%, 0px, 0px)";break;case"bottom":this.transformOptions="translate3d(0px, 100%, 0px)";break;case"top":this.transformOptions="translate3d(0px, -100%, 0px)";break;default:this.transformOptions="scale(0.7)"}}focus(){let e=Gt.findSingle(this.container,"[autofocus]");e&&this.zone.runOutsideAngular(()=>{setTimeout(()=>e.focus(),5)})}close(e){this.visibleChange.emit(!1),e.preventDefault()}enableModality(){this.closable&&this.dismissableMask&&(this.maskClickListener=this.renderer.listen(this.wrapper,"mousedown",e=>{this.wrapper&&this.wrapper.isSameNode(e.target)&&this.close(e)})),this.modal&&Gt.addClass(document.body,"p-overflow-hidden")}disableModality(){this.wrapper&&(this.dismissableMask&&this.unbindMaskClickListener(),this.modal&&Gt.removeClass(document.body,"p-overflow-hidden"),this.cd.destroyed||this.cd.detectChanges())}maximize(){this.maximized=!this.maximized,!this.modal&&!this.blockScroll&&(this.maximized?Gt.addClass(document.body,"p-overflow-hidden"):Gt.removeClass(document.body,"p-overflow-hidden")),this.onMaximize.emit({maximized:this.maximized})}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}moveOnTop(){this.autoZIndex&&(Ll.set("modal",this.container,this.baseZIndex+this.config.zIndex.modal),this.wrapper.style.zIndex=String(parseInt(this.container.style.zIndex,10)-1))}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints)e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-dialog[${this.id}] {\n                            width: ${this.breakpoints[n]} !important;\n                        }\n                    }\n                `;this.styleElement.innerHTML=e}}initDrag(e){Gt.hasClass(e.target,"p-dialog-header-icon")||Gt.hasClass(e.target.parentElement,"p-dialog-header-icon")||this.draggable&&(this.dragging=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,this.container.style.margin="0",Gt.addClass(document.body,"p-unselectable-text"))}onKeydown(e){if(this.focusTrap&&9===e.which){e.preventDefault();let n=Gt.getFocusableElements(this.container);if(n&&n.length>0)if(n[0].ownerDocument.activeElement){let r=n.indexOf(n[0].ownerDocument.activeElement);e.shiftKey?-1==r||0===r?n[n.length-1].focus():n[r-1].focus():-1==r||r===n.length-1?n[0].focus():n[r+1].focus()}else n[0].focus()}}onDrag(e){if(this.dragging){let n=Gt.getOuterWidth(this.container),r=Gt.getOuterHeight(this.container),s=e.pageX-this.lastPageX,o=e.pageY-this.lastPageY,l=this.container.getBoundingClientRect(),u=l.left+s,p=l.top+o,v=Gt.getViewport();this.container.style.position="fixed",this.keepInViewport?(u>=this.minX&&u+n<v.width&&(this._style.left=u+"px",this.lastPageX=e.pageX,this.container.style.left=u+"px"),p>=this.minY&&p+r<v.height&&(this._style.top=p+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")):(this.lastPageX=e.pageX,this.container.style.left=u+"px",this.lastPageY=e.pageY,this.container.style.top=p+"px")}}endDrag(e){this.dragging&&(this.dragging=!1,Gt.removeClass(document.body,"p-unselectable-text"),this.cd.detectChanges(),this.onDragEnd.emit(e))}resetPosition(){this.container.style.position="",this.container.style.left="",this.container.style.top="",this.container.style.margin=""}center(){this.resetPosition()}initResize(e){this.resizable&&(this.resizing=!0,this.lastPageX=e.pageX,this.lastPageY=e.pageY,Gt.addClass(document.body,"p-unselectable-text"),this.onResizeInit.emit(e))}onResize(e){if(this.resizing){let n=e.pageX-this.lastPageX,r=e.pageY-this.lastPageY,s=Gt.getOuterWidth(this.container),o=Gt.getOuterHeight(this.container),l=Gt.getOuterHeight(this.contentViewChild.nativeElement),u=s+n,p=o+r,v=this.container.style.minWidth,x=this.container.style.minHeight,I=this.container.getBoundingClientRect(),M=Gt.getViewport();(!parseInt(this.container.style.top)||!parseInt(this.container.style.left))&&(u+=n,p+=r),(!v||u>parseInt(v))&&I.left+u<M.width&&(this._style.width=u+"px",this.container.style.width=this._style.width),(!x||p>parseInt(x))&&I.top+p<M.height&&(this.contentViewChild.nativeElement.style.height=l+p-o+"px",this._style.height&&(this._style.height=p+"px",this.container.style.height=this._style.height)),this.lastPageX=e.pageX,this.lastPageY=e.pageY}}resizeEnd(e){this.resizing&&(this.resizing=!1,Gt.removeClass(document.body,"p-unselectable-text"),this.onResizeEnd.emit(e))}bindGlobalListeners(){this.draggable&&(this.bindDocumentDragListener(),this.bindDocumentDragEndListener()),this.resizable&&this.bindDocumentResizeListeners(),this.closeOnEscape&&this.closable&&this.bindDocumentEscapeListener()}unbindGlobalListeners(){this.unbindDocumentDragListener(),this.unbindDocumentDragEndListener(),this.unbindDocumentResizeListeners(),this.unbindDocumentEscapeListener()}bindDocumentDragListener(){this.zone.runOutsideAngular(()=>{this.documentDragListener=this.onDrag.bind(this),window.document.addEventListener("mousemove",this.documentDragListener)})}unbindDocumentDragListener(){this.documentDragListener&&(window.document.removeEventListener("mousemove",this.documentDragListener),this.documentDragListener=null)}bindDocumentDragEndListener(){this.zone.runOutsideAngular(()=>{this.documentDragEndListener=this.endDrag.bind(this),window.document.addEventListener("mouseup",this.documentDragEndListener)})}unbindDocumentDragEndListener(){this.documentDragEndListener&&(window.document.removeEventListener("mouseup",this.documentDragEndListener),this.documentDragEndListener=null)}bindDocumentResizeListeners(){this.zone.runOutsideAngular(()=>{this.documentResizeListener=this.onResize.bind(this),this.documentResizeEndListener=this.resizeEnd.bind(this),window.document.addEventListener("mousemove",this.documentResizeListener),window.document.addEventListener("mouseup",this.documentResizeEndListener)})}unbindDocumentResizeListeners(){this.documentResizeListener&&this.documentResizeEndListener&&(window.document.removeEventListener("mousemove",this.documentResizeListener),window.document.removeEventListener("mouseup",this.documentResizeEndListener),this.documentResizeListener=null,this.documentResizeEndListener=null)}bindDocumentEscapeListener(){this.documentEscapeListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{27==n.which&&this.close(n)})}unbindDocumentEscapeListener(){this.documentEscapeListener&&(this.documentEscapeListener(),this.documentEscapeListener=null)}appendContainer(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.wrapper):Gt.appendChild(this.wrapper,this.appendTo))}restoreAppend(){this.container&&this.appendTo&&this.el.nativeElement.appendChild(this.wrapper)}onAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.wrapper=this.container.parentElement,this.appendContainer(),this.moveOnTop(),this.bindGlobalListeners(),this.container.setAttribute(this.id,""),this.modal&&this.enableModality(),!this.modal&&this.blockScroll&&Gt.addClass(document.body,"p-overflow-hidden"),this.focusOnShow&&this.focus();break;case"void":this.wrapper&&this.modal&&Gt.addClass(this.wrapper,"p-component-overlay-leave")}}onAnimationEnd(e){switch(e.toState){case"void":this.onContainerDestroy(),this.onHide.emit({});break;case"visible":this.onShow.emit({})}}onContainerDestroy(){this.unbindGlobalListeners(),this.dragging=!1,this.maskVisible=!1,this.maximized&&(Gt.removeClass(document.body,"p-overflow-hidden"),this.maximized=!1),this.modal&&this.disableModality(),this.blockScroll&&Gt.removeClass(document.body,"p-overflow-hidden"),this.container&&this.autoZIndex&&Ll.clear(this.container),this.container=null,this.wrapper=null,this._style=this.originalStyle?{...this.originalStyle}:{}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.container&&(this.restoreAppend(),this.onContainerDestroy()),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(d),Qt(Yo),Qt(Ho),Qt(Mp))},i.\u0275cmp=Ar({type:i,selectors:[["p-dialog"]],contentQueries:function(e,n,r){if(1&e&&(Ga(r,zD,5),Ga(r,f1,5),Ga(r,_l,4)),2&e){let s;or(s=ar())&&(n.headerFacet=s.first),or(s=ar())&&(n.footerFacet=s.first),or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(Ere,5),is(Tre,5),is(Mre,5)),2&e){let r;or(r=ar())&&(n.headerViewChild=r.first),or(r=ar())&&(n.contentViewChild=r.first),or(r=ar())&&(n.footerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{header:"header",draggable:"draggable",resizable:"resizable",positionLeft:"positionLeft",positionTop:"positionTop",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",modal:"modal",closeOnEscape:"closeOnEscape",dismissableMask:"dismissableMask",rtl:"rtl",closable:"closable",responsive:"responsive",appendTo:"appendTo",breakpoints:"breakpoints",styleClass:"styleClass",maskStyleClass:"maskStyleClass",showHeader:"showHeader",breakpoint:"breakpoint",blockScroll:"blockScroll",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",minX:"minX",minY:"minY",focusOnShow:"focusOnShow",maximizable:"maximizable",keepInViewport:"keepInViewport",focusTrap:"focusTrap",transitionOptions:"transitionOptions",closeIcon:"closeIcon",closeAriaLabel:"closeAriaLabel",closeTabindex:"closeTabindex",minimizeIcon:"minimizeIcon",maximizeIcon:"maximizeIcon",visible:"visible",style:"style",position:"position"},outputs:{onShow:"onShow",onHide:"onHide",visibleChange:"visibleChange",onResizeInit:"onResizeInit",onResizeEnd:"onResizeEnd",onDragEnd:"onDragEnd",onMaximize:"onMaximize"},ngContentSelectors:Yre,decls:1,vars:1,consts:[[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","class","pFocusTrapDisabled",4,"ngIf"],["pFocusTrap","","role","dialog",3,"ngClass","ngStyle","pFocusTrapDisabled"],["container",""],["class","p-resizable-handle","style","z-index: 90;",3,"mousedown",4,"ngIf"],["class","p-dialog-header",3,"mousedown",4,"ngIf"],[3,"ngClass","ngStyle"],["content",""],[4,"ngTemplateOutlet"],["class","p-dialog-footer",4,"ngIf"],[1,"p-resizable-handle",2,"z-index","90",3,"mousedown"],[1,"p-dialog-header",3,"mousedown"],["titlebar",""],["class","p-dialog-title",4,"ngIf"],[1,"p-dialog-header-icons"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],["type","button","pRipple","",3,"ngClass","click","keydown.enter",4,"ngIf"],[1,"p-dialog-title"],["type","button","tabindex","-1","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-maximize-icon",3,"ngClass"],["type","button","pRipple","",3,"ngClass","click","keydown.enter"],[1,"p-dialog-header-close-icon",3,"ngClass"],[1,"p-dialog-footer"],["footer",""]],template:function(e,n){1&e&&(Ff(Xre),Ze(0,qre,2,15,"div",0)),2&e&&ve("ngIf",n.maskVisible)},dependencies:[_o,Oo,Dl,Ko,Ire,yh],styles:[".p-dialog-mask{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dialog-mask.p-component-overlay{pointer-events:auto}.p-dialog{display:flex;flex-direction:column;pointer-events:auto;max-height:90%;transform:scale(1);position:relative}.p-dialog-content{overflow-y:auto;flex-grow:1}.p-dialog-header{display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.p-dialog-draggable .p-dialog-header{cursor:move}.p-dialog-footer{flex-shrink:0}.p-dialog .p-dialog-header-icons{display:flex;align-items:center}.p-dialog .p-dialog-header-icon{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-fluid .p-dialog-footer .p-button{width:auto}.p-dialog-top .p-dialog,.p-dialog-bottom .p-dialog,.p-dialog-left .p-dialog,.p-dialog-right .p-dialog,.p-dialog-top-left .p-dialog,.p-dialog-top-right .p-dialog,.p-dialog-bottom-left .p-dialog,.p-dialog-bottom-right .p-dialog{margin:.75rem;transform:translate(0)}.p-dialog-maximized{transition:none;transform:none;width:100vw!important;height:100vh!important;top:0px!important;left:0px!important;max-height:100%;height:100%}.p-dialog-maximized .p-dialog-content{flex-grow:1}.p-dialog-left{justify-content:flex-start}.p-dialog-right{justify-content:flex-end}.p-dialog-top{align-items:flex-start}.p-dialog-top-left{justify-content:flex-start;align-items:flex-start}.p-dialog-top-right{justify-content:flex-end;align-items:flex-start}.p-dialog-bottom{align-items:flex-end}.p-dialog-bottom-left{justify-content:flex-start;align-items:flex-end}.p-dialog-bottom-right{justify-content:flex-end;align-items:flex-end}.p-dialog .p-resizable-handle{position:absolute;font-size:.1px;display:block;cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.p-confirm-dialog .p-dialog-content{display:flex;align-items:center}\n"],encapsulation:2,data:{animation:[ry("animation",[Eu("void => visible",[PV(Kre)]),Eu("visible => void",[PV(Zre)])])]},changeDetection:0}),i})(),Qre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Sre,su,Na]}),i})();const JV=["container"],Jre=function(i,t,e,n){return{"pi-info-circle":i,"pi-exclamation-triangle":t,"pi-times-circle":e,"pi-check":n}};function ese(i,t){if(1&i&&(Hr(0),si(1,"span",6),ct(2,"div",7)(3,"div",8),cr(4),ht(),ct(5,"div",9),cr(6),ht()(),Gr()),2&i){const e=_e();De(1),Vr("p-toast-message-icon pi"+(e.message.icon?" "+e.message.icon:"")),ve("ngClass",Nf(5,Jre,"info"==e.message.severity,"warn"==e.message.severity,"error"==e.message.severity,"success"==e.message.severity)),De(3),ds(e.message.summary),De(2),ds(e.message.detail)}}function tse(i,t){1&i&&qi(0)}function nse(i,t){if(1&i){const e=Pi();ct(0,"button",10),mn("click",function(r){return wt(e),It(_e().onCloseIconClick(r))})("keydown.enter",function(r){return wt(e),It(_e().onCloseIconClick(r))}),si(1,"span",11),ht()}}const ise=function(i){return[i,"p-toast-message"]},rse=function(i,t,e,n){return{showTransformParams:i,hideTransformParams:t,showTransitionParams:e,hideTransitionParams:n}},sse=function(i){return{value:"visible",params:i}},ose=function(i){return{$implicit:i}};function ase(i,t){if(1&i){const e=Pi();ct(0,"p-toastItem",3),mn("onClose",function(r){return wt(e),It(_e().onMessageClose(r))})("@toastAnimation.start",function(r){return wt(e),It(_e().onAnimationStart(r))})("@toastAnimation.done",function(r){return wt(e),It(_e().onAnimationEnd(r))}),ht()}if(2&i){const e=t.$implicit,n=t.index,r=_e();ve("message",e)("index",n)("template",r.template)("@toastAnimation",void 0)("showTransformOptions",r.showTransformOptions)("hideTransformOptions",r.hideTransformOptions)("showTransitionOptions",r.showTransitionOptions)("hideTransitionOptions",r.hideTransitionOptions)}}let lse=(()=>{class i{constructor(e){this.zone=e,this.onClose=new jn}ngAfterViewInit(){this.initTimeout()}initTimeout(){this.message.sticky||this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>{this.onClose.emit({index:this.index,message:this.message})},this.message.life||3e3)})}clearTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}onMouseEnter(){this.clearTimeout()}onMouseLeave(){this.initTimeout()}onCloseIconClick(e){this.clearTimeout(),this.onClose.emit({index:this.index,message:this.message}),e.preventDefault()}ngOnDestroy(){this.clearTimeout()}}return i.\u0275fac=function(e){return new(e||i)(Qt(Yo))},i.\u0275cmp=Ar({type:i,selectors:[["p-toastItem"]],viewQuery:function(e,n){if(1&e&&is(JV,5),2&e){let r;or(r=ar())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{message:"message",index:"index",template:"template",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{onClose:"onClose"},decls:6,vars:21,consts:[[3,"ngClass","mouseenter","mouseleave"],["container",""],["role","alert","aria-live","assertive","aria-atomic","true",1,"p-toast-message-content",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button","class","p-toast-icon-close p-link","pRipple","",3,"click","keydown.enter",4,"ngIf"],[3,"ngClass"],[1,"p-toast-message-text"],[1,"p-toast-summary"],[1,"p-toast-detail"],["type","button","pRipple","",1,"p-toast-icon-close","p-link",3,"click","keydown.enter"],[1,"p-toast-icon-close-icon","pi","pi-times"]],template:function(e,n){1&e&&(ct(0,"div",0,1),mn("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()}),ct(2,"div",2),Ze(3,ese,7,10,"ng-container",3),Ze(4,tse,1,0,"ng-container",4),Ze(5,nse,2,0,"button",5),ht()()),2&e&&(Vr(n.message.styleClass),ve("ngClass",Bi(10,ise,"p-toast-message-"+n.message.severity))("@messageState",Bi(17,sse,Nf(12,rse,n.showTransformOptions,n.hideTransformOptions,n.showTransitionOptions,n.hideTransitionOptions))),vr("id",n.message.id),De(2),ve("ngClass",n.message.contentStyleClass),De(1),ve("ngIf",!n.template),De(1),ve("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Bi(19,ose,n.message)),De(1),ve("ngIf",!1!==n.message.closable))},dependencies:[_o,Oo,Dl,yh],encapsulation:2,data:{animation:[ry("messageState",[v0("visible",Ja({transform:"translateY(0)",opacity:1})),Eu("void => *",[Ja({transform:"{{showTransformParams}}",opacity:0}),Cc("{{showTransitionParams}}")]),Eu("* => void",[Cc("{{hideTransitionParams}}",Ja({height:0,opacity:0,transform:"{{hideTransformParams}}"}))])])]},changeDetection:0}),i})(),F2=(()=>{class i{constructor(e,n,r){this.messageService=e,this.cd=n,this.config=r,this.autoZIndex=!0,this.baseZIndex=0,this.position="top-right",this.preventOpenDuplicates=!1,this.preventDuplicates=!1,this.showTransformOptions="translateY(100%)",this.hideTransformOptions="translateY(-100%)",this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="250ms ease-in",this.onClose=new jn,this.id=Kx()}ngOnInit(){this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e)if(e instanceof Array){const n=e.filter(r=>this.canAdd(r));this.add(n)}else this.canAdd(e)&&this.add([e])}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.messages=null):this.messages=null,this.cd.markForCheck()})}ngAfterViewInit(){this.breakpoints&&this.createStyle()}add(e){this.messages=this.messages?[...this.messages,...e]:[...e],this.preventDuplicates&&(this.messagesArchieve=this.messagesArchieve?[...this.messagesArchieve,...e]:[...e]),this.cd.markForCheck()}canAdd(e){let n=this.key===e.key;return n&&this.preventOpenDuplicates&&(n=!this.containsMessage(this.messages,e)),n&&this.preventDuplicates&&(n=!this.containsMessage(this.messagesArchieve,e)),n}containsMessage(e,n){return!!e&&null!=e.find(r=>r.summary===n.summary&&r.detail==n.detail&&r.severity===n.severity)}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.template=e.template})}onMessageClose(e){this.messages.splice(e.index,1),this.onClose.emit({message:e.message}),this.cd.detectChanges()}onAnimationStart(e){"void"===e.fromState&&(this.containerViewChild.nativeElement.setAttribute(this.id,""),this.autoZIndex&&""===this.containerViewChild.nativeElement.style.zIndex&&Ll.set("modal",this.containerViewChild.nativeElement,this.baseZIndex||this.config.zIndex.modal))}onAnimationEnd(e){"void"===e.toState&&this.autoZIndex&&gr.isEmpty(this.messages)&&Ll.clear(this.containerViewChild.nativeElement)}createStyle(){if(!this.styleElement){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement);let e="";for(let n in this.breakpoints){let r="";for(let s in this.breakpoints[n])r+=s+":"+this.breakpoints[n][s]+" !important;";e+=`\n                    @media screen and (max-width: ${n}) {\n                        .p-toast[${this.id}] {\n                           ${r}\n                        }\n                    }\n                `}this.styleElement.innerHTML=e}}destroyStyle(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.containerViewChild&&this.autoZIndex&&Ll.clear(this.containerViewChild.nativeElement),this.clearSubscription&&this.clearSubscription.unsubscribe(),this.destroyStyle()}}return i.\u0275fac=function(e){return new(e||i)(Qt(Jv),Qt(Ho),Qt(Mp))},i.\u0275cmp=Ar({type:i,selectors:[["p-toast"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&is(JV,5),2&e){let r;or(r=ar())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{key:"key",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",position:"position",preventOpenDuplicates:"preventOpenDuplicates",preventDuplicates:"preventDuplicates",showTransformOptions:"showTransformOptions",hideTransformOptions:"hideTransformOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",breakpoints:"breakpoints"},outputs:{onClose:"onClose"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose",4,"ngFor","ngForOf"],[3,"message","index","template","showTransformOptions","hideTransformOptions","showTransitionOptions","hideTransitionOptions","onClose"]],template:function(e,n){1&e&&(ct(0,"div",0,1),Ze(2,ase,1,8,"p-toastItem",2),ht()),2&e&&(Vr(n.styleClass),ve("ngClass","p-toast p-component p-toast-"+n.position)("ngStyle",n.style),De(2),ve("ngForOf",n.messages))},dependencies:[_o,ru,Ko,lse],styles:[".p-toast{position:fixed;width:25rem}.p-toast-message{overflow:hidden}.p-toast-message-content{display:flex;align-items:flex-start}.p-toast-message-text{flex:1 1 auto}.p-toast-top-right{top:20px;right:20px}.p-toast-top-left{top:20px;left:20px}.p-toast-bottom-left{bottom:20px;left:20px}.p-toast-bottom-right{bottom:20px;right:20px}.p-toast-top-center{top:20px;left:50%;transform:translate(-50%)}.p-toast-bottom-center{bottom:20px;left:50%;transform:translate(-50%)}.p-toast-center{left:50%;top:50%;min-width:20vw;transform:translate(-50%,-50%)}.p-toast-icon-close{display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-toast-icon-close.p-link{cursor:pointer}\n"],encapsulation:2,data:{animation:[ry("toastAnimation",[Eu(":enter, :leave",[dJ("@*",hJ())])])]},changeDetection:0}),i})(),e4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,su,Na]}),i})();function cse(i,t){1&i&&si(0,"span",11),2&i&&ve("innerHTML",_e(2).$implicit.summary,Oa)}function use(i,t){1&i&&si(0,"span",12),2&i&&ve("innerHTML",_e(2).$implicit.detail,Oa)}function hse(i,t){if(1&i&&(Hr(0),Ze(1,cse,1,1,"span",9),Ze(2,use,1,1,"span",10),Gr()),2&i){const e=_e().$implicit;De(1),ve("ngIf",e.summary),De(1),ve("ngIf",e.detail)}}function dse(i,t){if(1&i&&(ct(0,"span",15),cr(1),ht()),2&i){const e=_e(2).$implicit;De(1),ds(e.summary)}}function fse(i,t){if(1&i&&(ct(0,"span",16),cr(1),ht()),2&i){const e=_e(2).$implicit;De(1),ds(e.detail)}}function pse(i,t){if(1&i&&(Ze(0,dse,2,1,"span",13),Ze(1,fse,2,1,"span",14)),2&i){const e=_e().$implicit;ve("ngIf",e.summary),De(1),ve("ngIf",e.detail)}}function gse(i,t){if(1&i){const e=Pi();ct(0,"button",17),mn("click",function(){wt(e);const r=_e().index;return It(_e(2).removeMessage(r))}),si(1,"i",18),ht()}}const mse=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},vse=function(i){return{value:"visible",params:i}},yse=function(i,t,e,n){return{"pi-info-circle":i,"pi-check":t,"pi-exclamation-triangle":e,"pi-times-circle":n}};function _se(i,t){if(1&i&&(ct(0,"div",4)(1,"div",5),si(2,"span",6),Ze(3,hse,3,2,"ng-container",1),Ze(4,pse,2,2,"ng-template",null,7,vc),Ze(6,gse,2,0,"button",8),ht()()),2&i){const e=t.$implicit,n=co(5),r=_e(2);Vr("p-message p-message-"+e.severity),ve("@messageAnimation",Bi(12,vse,ys(9,mse,r.showTransitionOptions,r.hideTransitionOptions))),De(2),Vr("p-message-icon pi"+(e.icon?" "+e.icon:"")),ve("ngClass",Nf(14,yse,"info"===e.severity,"success"===e.severity,"warn"===e.severity,"error"===e.severity)),De(1),ve("ngIf",!r.escape)("ngIfElse",n),De(3),ve("ngIf",r.closable)}}function Cse(i,t){if(1&i&&(Hr(0),Ze(1,_se,7,19,"div",3),Gr()),2&i){const e=_e();De(1),ve("ngForOf",e.value)}}function bse(i,t){1&i&&qi(0)}function xse(i,t){if(1&i&&(ct(0,"div",19)(1,"div",5),Ze(2,bse,1,0,"ng-container",20),ht()()),2&i){const e=_e();ve("ngClass","p-message p-message-"+e.severity),De(2),ve("ngTemplateOutlet",e.contentTemplate)}}let wse=(()=>{class i{constructor(e,n,r){this.messageService=e,this.el=n,this.cd=r,this.closable=!0,this.enableService=!0,this.escape=!0,this.showTransitionOptions="300ms ease-out",this.hideTransitionOptions="200ms cubic-bezier(0.86, 0, 0.07, 1)",this.valueChange=new jn}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.contentTemplate=e.template}),this.messageService&&this.enableService&&!this.contentTemplate&&(this.messageSubscription=this.messageService.messageObserver.subscribe(e=>{if(e){if(e instanceof Array){let n=e.filter(r=>this.key===r.key);this.value=this.value?[...this.value,...n]:[...n]}else this.key===e.key&&(this.value=this.value?[...this.value,e]:[e]);this.cd.markForCheck()}}),this.clearSubscription=this.messageService.clearObserver.subscribe(e=>{e?this.key===e&&(this.value=null):this.value=null,this.cd.markForCheck()}))}hasMessages(){let e=this.el.nativeElement.parentElement;return!(!e||!e.offsetParent)&&(null!=this.contentTemplate||this.value&&this.value.length>0)}clear(){this.value=[],this.valueChange.emit(this.value)}removeMessage(e){this.value=this.value.filter((n,r)=>r!==e),this.valueChange.emit(this.value)}get icon(){const e=this.severity||(this.hasMessages()?this.value[0].severity:null);if(this.hasMessages())switch(e){case"success":return"pi-check";case"info":default:return"pi-info-circle";case"error":return"pi-times";case"warn":return"pi-exclamation-triangle"}return null}ngOnDestroy(){this.messageSubscription&&this.messageSubscription.unsubscribe(),this.clearSubscription&&this.clearSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(Jv,8),Qt(qn),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-messages"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{value:"value",closable:"closable",style:"style",styleClass:"styleClass",enableService:"enableService",key:"key",escape:"escape",severity:"severity",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions"},outputs:{valueChange:"valueChange"},decls:4,vars:5,consts:[["role","alert",1,"p-messages","p-component",3,"ngStyle"],[4,"ngIf","ngIfElse"],["staticMessage",""],["role","alert",3,"class",4,"ngFor","ngForOf"],["role","alert"],[1,"p-message-wrapper"],[3,"ngClass"],["escapeOut",""],["class","p-message-close p-link","type","button","pRipple","",3,"click",4,"ngIf"],["class","p-message-summary",3,"innerHTML",4,"ngIf"],["class","p-message-detail",3,"innerHTML",4,"ngIf"],[1,"p-message-summary",3,"innerHTML"],[1,"p-message-detail",3,"innerHTML"],["class","p-message-summary",4,"ngIf"],["class","p-message-detail",4,"ngIf"],[1,"p-message-summary"],[1,"p-message-detail"],["type","button","pRipple","",1,"p-message-close","p-link",3,"click"],[1,"p-message-close-icon","pi","pi-times"],["role","alert",3,"ngClass"],[4,"ngTemplateOutlet"]],template:function(e,n){if(1&e&&(ct(0,"div",0),Ze(1,Cse,2,1,"ng-container",1),Ze(2,xse,3,2,"ng-template",null,2,vc),ht()),2&e){const r=co(3);Vr(n.styleClass),ve("ngStyle",n.style),De(1),ve("ngIf",!n.contentTemplate)("ngIfElse",r)}},dependencies:[_o,ru,Oo,Dl,Ko,yh],styles:[".p-message-wrapper{display:flex;align-items:center}.p-message-close{display:flex;align-items:center;justify-content:center}.p-message-close.p-link{margin-left:auto;overflow:hidden;position:relative}.p-messages .p-message.ng-animating{overflow:hidden}\n"],encapsulation:2,data:{animation:[ry("messageAnimation",[Eu(":enter",[Ja({opacity:0,transform:"translateY(-25%)"}),Cc("{{showTransitionParams}}")]),Eu(":leave",[Cc("{{hideTransitionParams}}",Ja({height:0,marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,opacity:0}))])])]},changeDetection:0}),i})(),t4=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,su]}),i})();function Ase(i,t){if(1&i&&(ct(0,"div",5),cr(1),ht()),2&i){const e=_e(2);tf("display",null!=e.value&&0!==e.value?"flex":"none"),De(1),fI("",e.value,"",e.unit,"")}}function Ise(i,t){if(1&i&&(ct(0,"div",3),Ze(1,Ase,2,4,"div",4),ht()),2&i){const e=_e();tf("width",e.value+"%"),De(1),ve("ngIf",e.showValue)}}function Sse(i,t){1&i&&(ct(0,"div",6),si(1,"div",7),ht())}const Ese=function(i,t){return{"p-progressbar p-component":!0,"p-progressbar-determinate":i,"p-progressbar-indeterminate":t}};let Tse=(()=>{class i{constructor(){this.showValue=!0,this.unit="%",this.mode="determinate"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ar({type:i,selectors:[["p-progressBar"]],hostAttrs:[1,"p-element"],inputs:{value:"value",showValue:"showValue",style:"style",styleClass:"styleClass",unit:"unit",mode:"mode"},decls:3,vars:10,consts:[["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:flex",3,"width",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","flex"],["class","p-progressbar-label",3,"display",4,"ngIf"],[1,"p-progressbar-label"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(e,n){1&e&&(ct(0,"div",0),Ze(1,Ise,2,3,"div",1),Ze(2,Sse,2,0,"div",2),ht()),2&e&&(Vr(n.styleClass),ve("ngStyle",n.style)("ngClass",ys(7,Ese,"determinate"===n.mode,"indeterminate"===n.mode)),vr("aria-valuenow",n.value),De(1),ve("ngIf","determinate"===n.mode),De(1),ve("ngIf","indeterminate"===n.mode))},dependencies:[_o,Oo,Ko],styles:['.p-progressbar{position:relative;overflow:hidden}.p-progressbar-determinate .p-progressbar-value{height:100%;width:0%;position:absolute;display:none;border:0 none;display:flex;align-items:center;justify-content:center;overflow:hidden}.p-progressbar-determinate .p-progressbar-label{display:inline-flex}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-indeterminate .p-progressbar-value:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.p-progressbar-indeterminate .p-progressbar-value:after{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right;animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}\n'],encapsulation:2,changeDetection:0}),i})(),N2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();const Mse=["advancedfileinput"],Dse=["basicfileinput"],Lse=["content"];function Pse(i,t){if(1&i){const e=Pi();ct(0,"p-button",17),mn("onClick",function(){return wt(e),It(_e(2).upload())}),ht()}if(2&i){const e=_e(2);ve("label",e.uploadButtonLabel)("icon",e.uploadIcon)("disabled",!e.hasFiles()||e.isFileLimitExceeded())}}function Rse(i,t){if(1&i){const e=Pi();ct(0,"p-button",17),mn("onClick",function(){return wt(e),It(_e(2).clear())}),ht()}if(2&i){const e=_e(2);ve("label",e.cancelButtonLabel)("icon",e.cancelIcon)("disabled",!e.hasFiles()||e.uploading)}}function kse(i,t){1&i&&qi(0)}function Ose(i,t){1&i&&si(0,"p-progressBar",18),2&i&&ve("value",_e(2).progress)("showValue",!1)}function Fse(i,t){if(1&i&&si(0,"img",26),2&i){const e=_e().$implicit,n=_e(4);ve("src",e.objectURL,$h)("width",n.previewWidth)}}function Nse(i,t){if(1&i){const e=Pi();ct(0,"div",22)(1,"div"),Ze(2,Fse,1,2,"img",23),ht(),ct(3,"div",24),cr(4),ht(),ct(5,"div"),cr(6),ht(),ct(7,"div")(8,"button",25),mn("click",function(r){const o=wt(e).index;return It(_e(4).remove(r,o))}),ht()()()}if(2&i){const e=t.$implicit,n=_e(4);De(2),ve("ngIf",n.isImage(e)),De(2),ds(e.name),De(2),ds(n.formatSize(e.size)),De(2),ve("disabled",n.uploading)}}function Bse(i,t){if(1&i&&(ct(0,"div"),Ze(1,Nse,9,4,"div",21),ht()),2&i){const e=_e(3);De(1),ve("ngForOf",e.files)}}function zse(i,t){}function Vse(i,t){if(1&i&&(ct(0,"div"),Ze(1,zse,0,0,"ng-template",27),ht()),2&i){const e=_e(3);De(1),ve("ngForOf",e.files)("ngForTemplate",e.fileTemplate)}}function Use(i,t){if(1&i&&(ct(0,"div",19),Ze(1,Bse,2,1,"div",20),Ze(2,Vse,2,2,"div",20),ht()),2&i){const e=_e(2);De(1),ve("ngIf",!e.fileTemplate),De(1),ve("ngIf",e.fileTemplate)}}function Hse(i,t){1&i&&qi(0)}const Gse=function(i,t){return{"p-focus":i,"p-disabled":t}},Wse=function(i){return{$implicit:i}};function jse(i,t){if(1&i){const e=Pi();ct(0,"div",2)(1,"div",3)(2,"span",4),mn("focus",function(){return wt(e),It(_e().onFocus())})("blur",function(){return wt(e),It(_e().onBlur())})("click",function(){return wt(e),It(_e().choose())})("keydown.enter",function(){return wt(e),It(_e().choose())}),ct(3,"input",5,6),mn("change",function(r){return wt(e),It(_e().onFileSelect(r))}),ht(),si(5,"span",7),ct(6,"span",8),cr(7),ht()(),Ze(8,Pse,1,3,"p-button",9),Ze(9,Rse,1,3,"p-button",9),Ze(10,kse,1,0,"ng-container",10),ht(),ct(11,"div",11,12),mn("dragenter",function(r){return wt(e),It(_e().onDragEnter(r))})("dragleave",function(r){return wt(e),It(_e().onDragLeave(r))})("drop",function(r){return wt(e),It(_e().onDrop(r))}),Ze(13,Ose,1,2,"p-progressBar",13),si(14,"p-messages",14),Ze(15,Use,3,2,"div",15),Ze(16,Hse,1,0,"ng-container",16),ht()()}if(2&i){const e=_e();Vr(e.styleClass),ve("ngClass","p-fileupload p-fileupload-advanced p-component")("ngStyle",e.style),De(2),ve("ngClass",ys(22,Gse,e.focus,e.disabled||e.isChooseDisabled())),De(1),ve("multiple",e.multiple)("accept",e.accept)("disabled",e.disabled||e.isChooseDisabled()),vr("title",""),De(2),Vr(e.chooseIcon),ve("ngClass","p-button-icon p-button-icon-left"),De(2),ds(e.chooseButtonLabel),De(1),ve("ngIf",!e.auto&&e.showUploadButton),De(1),ve("ngIf",!e.auto&&e.showCancelButton),De(1),ve("ngTemplateOutlet",e.toolbarTemplate),De(3),ve("ngIf",e.hasFiles()),De(1),ve("value",e.msgs)("enableService",!1),De(1),ve("ngIf",e.hasFiles()),De(1),ve("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",Bi(25,Wse,e.files))}}function $se(i,t){if(1&i){const e=Pi();ct(0,"input",32,33),mn("change",function(r){return wt(e),It(_e(2).onFileSelect(r))})("focus",function(){return wt(e),It(_e(2).onFocus())})("blur",function(){return wt(e),It(_e(2).onBlur())}),ht()}if(2&i){const e=_e(2);ve("accept",e.accept)("multiple",e.multiple)("disabled",e.disabled)}}const qse=function(i,t,e,n){return{"p-button p-component p-fileupload-choose":!0,"p-button-icon-only":i,"p-fileupload-choose-selected":t,"p-focus":e,"p-disabled":n}};function Xse(i,t){if(1&i){const e=Pi();ct(0,"div",28),si(1,"p-messages",14),ct(2,"span",29),mn("mouseup",function(){return wt(e),It(_e().onBasicUploaderClick())})("keydown",function(r){return wt(e),It(_e().onBasicKeydown(r))}),si(3,"span",30),ct(4,"span",8),cr(5),ht(),Ze(6,$se,2,3,"input",31),ht()()}if(2&i){const e=_e();De(1),ve("value",e.msgs)("enableService",!1),De(1),Vr(e.styleClass),ve("ngClass",Nf(9,qse,!e.chooseLabel,e.hasFiles(),e.focus,e.disabled))("ngStyle",e.style),De(1),ve("ngClass",e.hasFiles()&&!e.auto?e.uploadIcon:e.chooseIcon),De(2),ds(e.auto?e.chooseLabel:e.hasFiles()?e.files[0].name:e.chooseLabel),De(1),ve("ngIf",!e.hasFiles())}}let n4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.sanitizer=n,this.zone=r,this.http=s,this.cd=o,this.config=l,this.method="post",this.invalidFileSizeMessageSummary="{0}: Invalid file size, ",this.invalidFileSizeMessageDetail="maximum upload size is {0}.",this.invalidFileTypeMessageSummary="{0}: Invalid file type, ",this.invalidFileTypeMessageDetail="allowed file types: {0}.",this.invalidFileLimitMessageDetail="limit is {0} at most.",this.invalidFileLimitMessageSummary="Maximum number of files exceeded, ",this.previewWidth=50,this.chooseIcon="pi pi-plus",this.uploadIcon="pi pi-upload",this.cancelIcon="pi pi-times",this.showUploadButton=!0,this.showCancelButton=!0,this.mode="advanced",this.onBeforeUpload=new jn,this.onSend=new jn,this.onUpload=new jn,this.onError=new jn,this.onClear=new jn,this.onRemove=new jn,this.onSelect=new jn,this.onProgress=new jn,this.uploadHandler=new jn,this._files=[],this.progress=0,this.uploadedFileCount=0}set files(e){this._files=[];for(let n=0;n<e.length;n++){let r=e[n];this.validate(r)&&(this.isImage(r)&&(r.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(e[n]))),this._files.push(e[n]))}}get files(){return this._files}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"file":default:this.fileTemplate=e.template;break;case"content":this.contentTemplate=e.template;break;case"toolbar":this.toolbarTemplate=e.template}})}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()})}ngAfterViewInit(){"advanced"===this.mode&&this.zone.runOutsideAngular(()=>{this.content&&this.content.nativeElement.addEventListener("dragover",this.onDragOver.bind(this))})}choose(){this.advancedFileInput.nativeElement.click()}onFileSelect(e){if("drop"!==e.type&&this.isIE11()&&this.duplicateIEEvent)return void(this.duplicateIEEvent=!1);this.msgs=[],this.multiple||(this.files=[]);let n=e.dataTransfer?e.dataTransfer.files:e.target.files;for(let r=0;r<n.length;r++){let s=n[r];this.isFileSelected(s)||this.validate(s)&&(this.isImage(s)&&(s.objectURL=this.sanitizer.bypassSecurityTrustUrl(window.URL.createObjectURL(n[r]))),this.files.push(n[r]))}this.onSelect.emit({originalEvent:e,files:n,currentFiles:this.files}),this.fileLimit&&"advanced"==this.mode&&this.checkFileLimit(),this.hasFiles()&&this.auto&&("advanced"!==this.mode||!this.isFileLimitExceeded())&&this.upload(),"drop"!==e.type&&this.isIE11()?this.clearIEInput():this.clearInputElement()}isFileSelected(e){for(let n of this.files)if(n.name+n.type+n.size===e.name+e.type+e.size)return!0;return!1}isIE11(){return!!window.MSInputMethodContext&&!!document.documentMode}validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.msgs.push({severity:"error",summary:this.invalidFileTypeMessageSummary.replace("{0}",e.name),detail:this.invalidFileTypeMessageDetail.replace("{0}",this.accept)}),!1):!(this.maxFileSize&&e.size>this.maxFileSize&&(this.msgs.push({severity:"error",summary:this.invalidFileSizeMessageSummary.replace("{0}",e.name),detail:this.invalidFileSizeMessageDetail.replace("{0}",this.formatSize(this.maxFileSize))}),1))}isFileTypeValid(e){let n=this.accept.split(",").map(r=>r.trim());for(let r of n)if(this.isWildcard(r)?this.getTypeClass(e.type)===this.getTypeClass(r):e.type==r||this.getFileExtension(e).toLowerCase()===r.toLowerCase())return!0;return!1}getTypeClass(e){return e.substring(0,e.indexOf("/"))}isWildcard(e){return-1!==e.indexOf("*")}getFileExtension(e){return"."+e.name.split(".").pop()}isImage(e){return/^image\//.test(e.type)}onImageLoad(e){window.URL.revokeObjectURL(e.src)}upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.uploadHandler.emit({files:this.files}),this.cd.markForCheck();else{this.uploading=!0,this.msgs=[];let e=new FormData;this.onBeforeUpload.emit({formData:e});for(let n=0;n<this.files.length;n++)e.append(this.name,this.files[n],this.files[n].name);this.http[this.method](this.url,e,{headers:this.headers,reportProgress:!0,observe:"events",withCredentials:this.withCredentials}).subscribe(n=>{switch(n.type){case _c.Sent:this.onSend.emit({originalEvent:n,formData:e});break;case _c.Response:this.uploading=!1,this.progress=0,n.status>=200&&n.status<300?(this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.onUpload.emit({originalEvent:n,files:this.files})):this.onError.emit({files:this.files}),this.clear();break;case _c.UploadProgress:n.loaded&&(this.progress=Math.round(100*n.loaded/n.total)),this.onProgress.emit({originalEvent:n,progress:this.progress})}this.cd.markForCheck()},n=>{this.uploading=!1,this.onError.emit({files:this.files,error:n})})}}clear(){this.files=[],this.onClear.emit(),this.clearInputElement(),this.cd.markForCheck()}remove(e,n){this.clearInputElement(),this.onRemove.emit({originalEvent:e,file:this.files[n]}),this.files.splice(n,1)}isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focus&&(this.focus=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount}isChooseDisabled(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount}checkFileLimit(){this.isFileLimitExceeded()&&this.msgs.push({severity:"error",summary:this.invalidFileLimitMessageSummary.replace("{0}",this.fileLimit.toString()),detail:this.invalidFileLimitMessageDetail.replace("{0}",this.fileLimit.toString())})}clearInputElement(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.advancedFileInput.nativeElement.value=""),this.basicFileInput&&this.basicFileInput.nativeElement&&(this.basicFileInput.nativeElement.value="")}clearIEInput(){this.advancedFileInput&&this.advancedFileInput.nativeElement&&(this.duplicateIEEvent=!0,this.advancedFileInput.nativeElement.value="")}hasFiles(){return this.files&&this.files.length>0}onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())}onDragOver(e){this.disabled||(Gt.addClass(this.content.nativeElement,"p-fileupload-highlight"),this.dragHighlight=!0,e.stopPropagation(),e.preventDefault())}onDragLeave(e){this.disabled||Gt.removeClass(this.content.nativeElement,"p-fileupload-highlight")}onDrop(e){if(!this.disabled){Gt.removeClass(this.content.nativeElement,"p-fileupload-highlight"),e.stopPropagation(),e.preventDefault();let n=e.dataTransfer?e.dataTransfer.files:e.target.files;(this.multiple||n&&1===n.length)&&this.onFileSelect(e)}}onFocus(){this.focus=!0}onBlur(){this.focus=!1}formatSize(e){if(0==e)return"0 B";let o=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,o)).toFixed(3))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}onBasicUploaderClick(){this.hasFiles()?this.upload():this.basicFileInput.nativeElement.click()}onBasicKeydown(e){switch(e.code){case"Space":case"Enter":this.onBasicUploaderClick(),e.preventDefault()}}getBlockableElement(){return this.el.nativeElement.children[0]}get chooseButtonLabel(){return this.chooseLabel||this.config.getTranslation(Gc.CHOOSE)}get uploadButtonLabel(){return this.uploadLabel||this.config.getTranslation(Gc.UPLOAD)}get cancelButtonLabel(){return this.cancelLabel||this.config.getTranslation(Gc.CANCEL)}ngOnDestroy(){this.content&&this.content.nativeElement&&this.content.nativeElement.removeEventListener("dragover",this.onDragOver),this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(KN),Qt(Yo),Qt(tD),Qt(Ho),Qt(Mp))},i.\u0275cmp=Ar({type:i,selectors:[["p-fileUpload"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(Mse,5),is(Dse,5),is(Lse,5)),2&e){let r;or(r=ar())&&(n.advancedFileInput=r.first),or(r=ar())&&(n.basicFileInput=r.first),or(r=ar())&&(n.content=r.first)}},hostAttrs:[1,"p-element"],inputs:{name:"name",url:"url",method:"method",multiple:"multiple",accept:"accept",disabled:"disabled",auto:"auto",withCredentials:"withCredentials",maxFileSize:"maxFileSize",invalidFileSizeMessageSummary:"invalidFileSizeMessageSummary",invalidFileSizeMessageDetail:"invalidFileSizeMessageDetail",invalidFileTypeMessageSummary:"invalidFileTypeMessageSummary",invalidFileTypeMessageDetail:"invalidFileTypeMessageDetail",invalidFileLimitMessageDetail:"invalidFileLimitMessageDetail",invalidFileLimitMessageSummary:"invalidFileLimitMessageSummary",style:"style",styleClass:"styleClass",previewWidth:"previewWidth",chooseLabel:"chooseLabel",uploadLabel:"uploadLabel",cancelLabel:"cancelLabel",chooseIcon:"chooseIcon",uploadIcon:"uploadIcon",cancelIcon:"cancelIcon",showUploadButton:"showUploadButton",showCancelButton:"showCancelButton",mode:"mode",headers:"headers",customUpload:"customUpload",fileLimit:"fileLimit",files:"files"},outputs:{onBeforeUpload:"onBeforeUpload",onSend:"onSend",onUpload:"onUpload",onError:"onError",onClear:"onClear",onRemove:"onRemove",onSelect:"onSelect",onProgress:"onProgress",uploadHandler:"uploadHandler"},decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class",4,"ngIf"],["class","p-fileupload p-fileupload-basic p-component",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"p-fileupload-buttonbar"],["pRipple","","tabindex","0",1,"p-button","p-component","p-fileupload-choose",3,"ngClass","focus","blur","click","keydown.enter"],["type","file",3,"multiple","accept","disabled","change"],["advancedfileinput",""],[3,"ngClass"],[1,"p-button-label"],["type","button",3,"label","icon","disabled","onClick",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"p-fileupload-content",3,"dragenter","dragleave","drop"],["content",""],[3,"value","showValue",4,"ngIf"],[3,"value","enableService"],["class","p-fileupload-files",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"label","icon","disabled","onClick"],[3,"value","showValue"],[1,"p-fileupload-files"],[4,"ngIf"],["class","p-fileupload-row",4,"ngFor","ngForOf"],[1,"p-fileupload-row"],[3,"src","width",4,"ngIf"],[1,"p-fileupload-filename"],["type","button","icon","pi pi-times","pButton","",3,"disabled","click"],[3,"src","width"],["ngFor","",3,"ngForOf","ngForTemplate"],[1,"p-fileupload","p-fileupload-basic","p-component"],["tabindex","0","pRipple","",3,"ngClass","ngStyle","mouseup","keydown"],[1,"p-button-icon","p-button-icon-left","pi",3,"ngClass"],["type","file",3,"accept","multiple","disabled","change","focus","blur",4,"ngIf"],["type","file",3,"accept","multiple","disabled","change","focus","blur"],["basicfileinput",""]],template:function(e,n){1&e&&(Ze(0,jse,17,27,"div",0),Ze(1,Xse,7,14,"div",1)),2&e&&(ve("ngIf","advanced"===n.mode),De(1),ve("ngIf","basic"===n.mode))},dependencies:[_o,ru,Oo,Dl,Ko,Cw,B1,Tse,wse,yh],styles:[".p-fileupload-content{position:relative}.p-fileupload-row{display:flex;align-items:center}.p-fileupload-row>div{flex:1 1 auto;width:25%}.p-fileupload-row>div:last-child{text-align:right}.p-fileupload-content .p-progressbar{width:100%;position:absolute;top:0;left:0}.p-button.p-fileupload-choose{position:relative;overflow:hidden}.p-button.p-fileupload-choose input[type=file],.p-fileupload-choose.p-fileupload-choose-selected input[type=file]{display:none}.p-fluid .p-fileupload .p-button{width:auto}.p-fileupload-filename{word-break:break-all}\n"],encapsulation:2,changeDetection:0}),i})(),Yse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na,rv,N2,t4,su,Na,rv,N2,t4]}),i})();function Kse(i,t){1&i&&qi(0)}function Zse(i,t){if(1&i&&(ct(0,"div",3),Ze(1,Kse,1,0,"ng-container",4),ht()),2&i){const e=_e();De(1),ve("ngTemplateOutlet",e.leftTemplate)}}function Qse(i,t){1&i&&qi(0)}function Jse(i,t){if(1&i&&(ct(0,"div",5),Ze(1,Qse,1,0,"ng-container",4),ht()),2&i){const e=_e();De(1),ve("ngTemplateOutlet",e.rightTemplate)}}const eoe=["*"];let toe=(()=>{class i{constructor(e){this.el=e}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"left":this.leftTemplate=e.template;break;case"right":this.rightTemplate=e.template}})}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn))},i.\u0275cmp=Ar({type:i,selectors:[["p-toolbar"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:eoe,decls:4,vars:6,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left",4,"ngIf"],["class","p-toolbar-group-right",4,"ngIf"],[1,"p-toolbar-group-left"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-right"]],template:function(e,n){1&e&&(Ff(),ct(0,"div",0),nu(1),Ze(2,Zse,2,1,"div",1),Ze(3,Jse,2,1,"div",2),ht()),2&e&&(Vr(n.styleClass),ve("ngClass","p-toolbar p-component")("ngStyle",n.style),De(2),ve("ngIf",n.leftTemplate),De(1),ve("ngIf",n.rightTemplate))},dependencies:[_o,Oo,Dl,Ko],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0}),i})(),noe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();function ioe(i,t){1&i&&si(0,"i",8),2&i&&(Vr(_e(2).confirmation.icon),ve("ngClass","p-confirm-popup-icon"))}function roe(i,t){if(1&i){const e=Pi();ct(0,"button",9),mn("click",function(){return wt(e),It(_e(2).reject())}),ht()}if(2&i){const e=_e(2);Vr(e.confirmation.rejectButtonStyleClass||"p-button-text"),ve("icon",e.confirmation.rejectIcon)("label",e.rejectButtonLabel)("ngClass","p-confirm-popup-reject p-button-sm"),vr("aria-label",e.rejectButtonLabel)}}function soe(i,t){if(1&i){const e=Pi();ct(0,"button",9),mn("click",function(){return wt(e),It(_e(2).accept())}),ht()}if(2&i){const e=_e(2);Vr(e.confirmation.acceptButtonStyleClass),ve("icon",e.confirmation.acceptIcon)("label",e.acceptButtonLabel)("ngClass","p-confirm-popup-accept p-button-sm"),vr("aria-label",e.acceptButtonLabel)}}const ooe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},aoe=function(i){return{value:"open",params:i}};function loe(i,t){if(1&i){const e=Pi();ct(0,"div",1),mn("click",function(r){return wt(e),It(_e().onOverlayClick(r))})("@animation.start",function(r){return wt(e),It(_e().onAnimationStart(r))})("@animation.done",function(r){return wt(e),It(_e().onAnimationEnd(r))}),ct(1,"div",2,3),Ze(3,ioe,1,3,"i",4),ct(4,"span",5),cr(5),ht()(),ct(6,"div",6),Ze(7,roe,1,6,"button",7),Ze(8,soe,1,6,"button",7),ht()()}if(2&i){const e=_e();Vr(e.styleClass),ve("ngClass","p-confirm-popup p-component")("ngStyle",e.style)("@animation",Bi(12,aoe,ys(9,ooe,e.showTransitionOptions,e.hideTransitionOptions))),De(3),ve("ngIf",e.confirmation.icon),De(2),ds(e.confirmation.message),De(2),ve("ngIf",!1!==e.confirmation.rejectVisible),De(1),ve("ngIf",!1!==e.confirmation.acceptVisible)}}let coe=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.confirmationService=n,this.renderer=r,this.cd=s,this.config=o,this.overlayService=l,this.defaultFocus="accept",this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.autoZIndex=!0,this.baseZIndex=0,this.subscription=this.confirmationService.requireConfirmation$.subscribe(u=>{u?u.key===this.key&&(this.confirmation=u,this.confirmation.accept&&(this.confirmation.acceptEvent=new jn,this.confirmation.acceptEvent.subscribe(this.confirmation.accept)),this.confirmation.reject&&(this.confirmation.rejectEvent=new jn,this.confirmation.rejectEvent.subscribe(this.confirmation.reject)),this.visible=!0):this.hide()})}get visible(){return this._visible}set visible(e){this._visible=e,this.cd.markForCheck()}onAnimationStart(e){if("open"===e.toState){this.container=e.element,document.body.appendChild(this.container),this.align(),this.bindListeners();const n=this.getElementToFocus();n&&n.focus()}}onAnimationEnd(e){"void"===e.toState&&this.onContainerDestroy()}getElementToFocus(){switch(this.defaultFocus){case"accept":return Gt.findSingle(this.container,".p-confirm-popup-accept");case"reject":return Gt.findSingle(this.container,".p-confirm-popup-reject");case"none":return null}}align(){this.autoZIndex&&Ll.set("overlay",this.container,this.config.zIndex.overlay),Gt.absolutePosition(this.container,this.confirmation.target);const e=Gt.getOffset(this.container),n=Gt.getOffset(this.confirmation.target);let r=0;e.left<n.left&&(r=n.left-e.left),this.container.style.setProperty("--overlayArrowLeft",`${r}px`),e.top<n.top&&Gt.addClass(this.container,"p-confirm-popup-flipped")}hide(){this.visible=!1}accept(){this.confirmation.acceptEvent&&this.confirmation.acceptEvent.emit(),this.hide()}reject(){this.confirmation.rejectEvent&&this.confirmation.rejectEvent.emit(),this.hide()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}bindListeners(){this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener()}unbindListeners(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener()}bindDocumentClickListener(){if(!this.documentClickListener){let e=Gt.isIOS()?"touchstart":"click";const n=this.el?this.el.nativeElement.ownerDocument:document;this.documentClickListener=this.renderer.listen(n,e,r=>{let s=this.confirmation.target;this.container!==r.target&&!this.container.contains(r.target)&&s!==r.target&&!s.contains(r.target)&&this.hide()})}}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}onWindowResize(){this.visible&&!Gt.isTouchDevice()&&this.hide()}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new yw(this.confirmation.target,()=>{this.visible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unsubscribeConfirmationSubscriptions(){this.confirmation&&(this.confirmation.acceptEvent&&this.confirmation.acceptEvent.unsubscribe(),this.confirmation.rejectEvent&&this.confirmation.rejectEvent.unsubscribe())}onContainerDestroy(){this.unbindListeners(),this.unsubscribeConfirmationSubscriptions(),this.autoZIndex&&Ll.clear(this.container),this.confirmation=null,this.container=null}restoreAppend(){this.container&&document.body.removeChild(this.container),this.onContainerDestroy()}get acceptButtonLabel(){return this.confirmation.acceptLabel||this.config.getTranslation(Gc.ACCEPT)}get rejectButtonLabel(){return this.confirmation.rejectLabel||this.config.getTranslation(Gc.REJECT)}ngOnDestroy(){this.restoreAppend(),this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(BD),Qt(d),Qt(Ho),Qt(Mp),Qt(Zx))},i.\u0275cmp=Ar({type:i,selectors:[["p-confirmPopup"]],hostAttrs:[1,"p-element"],inputs:{key:"key",defaultFocus:"defaultFocus",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",style:"style",styleClass:"styleClass",visible:"visible"},decls:1,vars:1,consts:[[3,"ngClass","ngStyle","class","click",4,"ngIf"],[3,"ngClass","ngStyle","click"],[1,"p-confirm-popup-content"],["content",""],[3,"ngClass","class",4,"ngIf"],[1,"p-confirm-popup-message"],[1,"p-confirm-popup-footer"],["type","button","pButton","",3,"icon","label","ngClass","class","click",4,"ngIf"],[3,"ngClass"],["type","button","pButton","",3,"icon","label","ngClass","click"]],template:function(e,n){1&e&&Ze(0,loe,9,14,"div",0),2&e&&ve("ngIf",n.visible)},dependencies:[_o,Oo,Ko,Cw],styles:['.p-confirm-popup{position:absolute;margin-top:10px;top:0;left:0}.p-confirm-popup-flipped{margin-top:0;margin-bottom:10px}.p-confirm-popup:after,.p-confirm-popup:before{bottom:100%;left:calc(var(--overlayArrowLeft, 0) + 1.25rem);content:" ";height:0;width:0;position:absolute;pointer-events:none}.p-confirm-popup:after{border-width:8px;margin-left:-8px}.p-confirm-popup:before{border-width:10px;margin-left:-10px}.p-confirm-popup-flipped:after,.p-confirm-popup-flipped:before{bottom:auto;top:100%}.p-confirm-popup.p-confirm-popup-flipped:after{border-bottom-color:transparent}.p-confirm-popup.p-confirm-popup-flipped:before{border-bottom-color:transparent}.p-confirm-popup .p-confirm-popup-content{display:flex;align-items:center}\n'],encapsulation:2,data:{animation:[ry("animation",[v0("void",Ja({transform:"scaleY(0.8)",opacity:0})),v0("open",Ja({transform:"translateY(0)",opacity:1})),Eu("void => open",Cc("{{showTransitionParams}}")),Eu("open => void",Cc("{{hideTransitionParams}}"))])]},changeDetection:0}),i})(),uoe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,rv]}),i})();function hoe(i,t){if(1&i){const e=Pi();ct(0,"span",13)(1,"input",14),mn("ngModelChange",function(r){return wt(e),It(_e().newGraph=r)}),ht(),ct(2,"label",15),cr(3,"Name"),ht(),ct(4,"button",16),mn("click",function(){wt(e);const r=_e();return It(r.openNew(r.newGraph))}),ht()()}if(2&i){const e=_e();De(1),ve("ngModel",e.newGraph)}}function doe(i,t){}function foe(i,t){1&i&&(ct(0,"div",17)(1,"h5",18),cr(2,"Manage Graphs"),ht(),ct(3,"span",19),si(4,"i",20)(5,"input",21),ht()())}function poe(i,t){1&i&&(ct(0,"tr")(1,"th",22),si(2,"p-tableHeaderCheckbox"),ht(),ct(3,"th",23),cr(4,"Label "),si(5,"p-sortIcon",24),ht(),ct(6,"th"),cr(7,"Action(s) "),ht()())}function goe(i,t){if(1&i){const e=Pi();ct(0,"tr")(1,"td"),si(2,"p-tableCheckbox",25),ht(),ct(3,"td"),cr(4),ht(),ct(5,"td")(6,"button",26),mn("click",function(){const s=wt(e).$implicit;return It(_e().showImport(s))}),ht(),ct(7,"span"),cr(8,"\xa0"),ht(),ct(9,"button",27),mn("click",function(){const s=wt(e).$implicit;return It(_e().gexf(s))}),ht(),ct(10,"span"),cr(11,"\xa0"),ht(),ct(12,"button",28),mn("click",function(r){const o=wt(e).$implicit;return It(_e().confirm(r,o))}),ht(),ct(13,"span"),cr(14,"\xa0"),ht(),ct(15,"button",29),mn("click",function(){const s=wt(e).$implicit;return It(_e().selectCytoscape(s))}),ht(),ct(16,"span"),cr(17,"\xa0"),ht(),ct(18,"button",30),mn("click",function(){const s=wt(e).$implicit;return It(_e().selectThreejs(s))}),ht()()()}if(2&i){const e=t.$implicit;De(2),ve("value",e),De(2),ds(e.label)}}function moe(i,t){if(1&i){const e=Pi();ct(0,"p-button",31),mn("click",function(){return wt(e),It(_e().displayExport=!1)}),ht()}}const voe=function(){return["label"]},yoe=function(){return{width:"50vw"}};let _oe=(()=>{class i{constructor(e,n,r,s,o,l,u,p){this.router=e,this.logger=n,this.graphsService=r,this.clipboardService=s,this.databaseService=o,this.confirmationService=l,this.messageService=u,this.store=p,this.graph=void 0,this.graphs=[],this.displayImport=!1,this.displayExport=!1,this.exportData=[],this.exportDataHtml="",this.Delete="false",this.xml=[],this.graph$=this.store.select(s2),this.graphs$=this.store.select(r2),this.graph$.subscribe(v=>{!v||(this.graph=v)}),this.graphs$.subscribe(v=>{!v||(this.graphs=Qr.map(v,x=>({id:x.id,label:x.label,nodes:x.nodes,edges:x.edges})))})}ngOnInit(){let e=this.databaseService.findAllGraphs();this.store.dispatch(iw({graphs:e}))}confirm(e,n){this.confirmationService.confirm({target:e.target||void 0,message:"Are you sure that you want to proceed ?",icon:"pi pi-exclamation-triangle",accept:()=>{this.deleteGraph(n)},reject:()=>{}})}deleteGraph(e){let n=this.databaseService.deleteGraph(e);this.store.dispatch(iw({graphs:n}))}showImport(e){this.displayImport=!0,this.selectedGraph=e}openNew(e){if(e){this.databaseService.storeGraph({id:e,label:e,edges:[],nodes:[]});let n=this.databaseService.findAllGraphs();this.store.dispatch(iw({graphs:n}))}}uploadHandler(e,n){n&&this.graphsService.uploadHandler(e.files[0],n.id,n.id).then(r=>{this.databaseService.storeGraph(r),this.displayImport=!1})}gexf(e){let n=this.graphsService.getGraph(e.id+"");this.exportData=this.graphsService.toGexf(n),this.exportDataHtml=this.exportData.join("\n"),this.clipboardService.copyTextToClipboard(this.exportData.join("\n")),this.displayExport=!0}selectCytoscape(e){this.router.navigate(["graphs","cytoscape",e.id])}selectThreejs(e){this.router.navigate(["graphs","threejs",e.id])}}return i.\u0275fac=function(e){return new(e||i)(Qt(wd),Qt(dm),Qt(I1),Qt(l2),Qt(uw),Qt(BD),Qt(Jv),Qt(f0))},i.\u0275cmp=Ar({type:i,selectors:[["app-graph-selector"]],features:[ko([Jv])],decls:17,vars:17,consts:[[1,"card"],["styleClass","mb-4"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"modal","header","visible","visibleChange"],["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","baseZIndex","visibleChange"],["pTemplate","footer"],[1,"p-float-label"],["id","float-input","type","text","pInputText","",3,"ngModel","ngModelChange"],["for","float-input"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search..."],[2,"width","3rem"],["pSortableColumn","label"],["field","label"],[3,"value"],["pButton","","type","button","pTooltip","Import","tooltipPosition","top","icon","pi pi-cloud-upload",3,"click"],["pButton","","pRipple","","pTooltip","Copy to clipboard","tooltipPosition","top","icon","pi pi-cloud-download",3,"click"],["pButton","","pRipple","","pTooltip","Remove this graph","tooltipPosition","top","icon","pi pi-trash",1,"p-button-danger",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["pButton","","pRipple","","pTooltip","Select this graph for 3D preview","tooltipPosition","top","icon","pi pi-sign-out",3,"click"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"]],template:function(e,n){1&e&&(ct(0,"div",0)(1,"p-toolbar",1),Ze(2,hoe,5,1,"ng-template",2),Ze(3,doe,0,0,"ng-template",3),ht(),si(4,"p-toast"),ct(5,"p-table",4,5),Ze(7,foe,6,0,"ng-template",6),Ze(8,poe,8,0,"ng-template",7),Ze(9,goe,19,2,"ng-template",8),ht()(),si(10,"p-confirmPopup"),ct(11,"p-dialog",9),mn("visibleChange",function(s){return n.displayImport=s}),ct(12,"p-fileUpload",10),mn("uploadHandler",function(s){return n.uploadHandler(s,n.selectedGraph)}),ht()(),ct(13,"p-dialog",11),mn("visibleChange",function(s){return n.displayExport=s}),ct(14,"pre"),cr(15),ht(),Ze(16,moe,1,0,"ng-template",12),ht()),2&e&&(De(5),ve("value",n.graphs)("rows",10)("paginator",!0)("globalFilterFields",xa(15,voe))("rowHover",!0)("showCurrentPageReport",!0),De(6),hI("header","Import ",null==n.selectedGraph?null:n.selectedGraph.label,""),ve("modal",!0)("visible",n.displayImport),De(1),ve("customUpload",!0),De(1),la(xa(16,yoe)),ve("visible",n.displayExport)("baseZIndex",1e4),De(2),ds(n.exportDataHtml))},dependencies:[ib,_l,Cre,bre,xre,wre,Cw,B1,O2,s_,F2,P2,n4,toe,hw,dw,r_,coe]}),i})();var Coe=V(5595),boe=V.n(Coe),xoe=V(3424),woe=V.n(xoe),Aoe=V(756),Ioe=V.n(Aoe);const Soe=["myGraph"];function Eoe(i,t){if(1&i&&(ct(0,"pre"),cr(1),ht()),2&i){const e=t.$implicit;De(1),Yh("",e,"\n")}}let Toe=(()=>{class i{constructor(e,n,r,s){this.http=e,this.logger=n,this.graphsService=r,this.store=s,this.subscription=null,this.graph=new(boe()),this.display=!1,this.xml=[],this.graphs$=this.store.select(r2),this.graphs$.subscribe(o=>{o&&0!==o.length&&(this.graph.clear(),Qr.each(o[0].nodes,u=>{this.graph.addNode(u.id,{x:u.x,y:u.y,label:u.label,color:u.color,size:u.size,uid:u.id})}),Qr.each(o[0].edges,u=>{u.source&&u.target?this.graph.addEdge(u.source,u.target,{label:u.label,type:"arrow",size:5,uid:u.id,source:u.source,target:u.target}):this.logger.info(u)}),new(woe())(this.graph,{isNodeFixed:(u,p)=>p.highlighted}))})}ngOnInit(){let e=this.graphsService.getGraphs("Default");this.store.dispatch(iw({graphs:e}))}ngAfterViewInit(){let e=null,n=!1;this.renderer=new(Ioe())(this.graph,this.myGraph?.nativeElement,{renderEdgeLabels:!0}),this.renderer.on("downNode",r=>{n=!0,e=r.node,this.graph.setNodeAttribute(e,"highlighted",!0)}),this.renderer.getMouseCaptor().on("mousemovebody",r=>{if(!n||!e||!this.renderer)return;const s=this.renderer.viewportToGraph(r);this.graph.setNodeAttribute(e,"x",s.x),this.graph.setNodeAttribute(e,"y",s.y),r.preventSigmaDefault(),r.original.preventDefault(),r.original.stopPropagation()}),this.renderer.getMouseCaptor().on("mouseup",()=>{e&&this.graph.removeNodeAttribute(e,"highlighted"),n=!1,e=null}),this.renderer.getMouseCaptor().on("mousedown",()=>{this.renderer?.getCustomBBox()||this.renderer?.setCustomBBox(this.renderer.getBBox())})}gexf(){this.xml=[],this.xml.push('<?xml version="1.0" encoding="UTF-8"?>'),this.xml.push('<gexf xmlns="http://gexf.net/1.2" version="1.2">'),this.xml.push('<meta lastmodifieddate="2009-03-20">'),this.xml.push("<creator>Gexf.net</creator>"),this.xml.push("<description>A hello world! file</description>"),this.xml.push("</meta>"),this.xml.push('<graph mode="static" defaultedgetype="directed">'),this.xml.push("<nodes>"),this.graph.forEachNode(e=>{let n=this.graph.getNodeAttribute(e,"uid"),r=this.graph.getNodeAttribute(e,"label"),s=this.graph.getNodeAttribute(e,"x"),o=this.graph.getNodeAttribute(e,"y");this.xml.push(`<node id="${n}" label="${r}" x="${s}" y="${o}" />`)}),this.xml.push("</nodes>"),this.xml.push("<edges>"),this.graph.forEachEdge(e=>{let n=this.graph.getEdgeAttribute(e,"uid"),r=this.graph.getEdgeAttribute(e,"label"),s=this.graph.getEdgeAttribute(e,"source"),o=this.graph.getEdgeAttribute(e,"target");this.xml.push(`<edge id="${n}" source="${s}" target="${o}" label="${r}" />`)}),this.xml.push("</edges>"),this.xml.push("</graph>"),this.xml.push("</gexf>"),this.display=!0}uploadHandler(e){let n=new FileReader;n.addEventListener("loadend",()=>{}),n.readAsText(e.files[0])}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(tD),Qt(dm),Qt(I1),Qt(f0))},i.\u0275cmp=Ar({type:i,selectors:[["app-graph"]],viewQuery:function(e,n){if(1&e&&is(Soe,5),2&e){let r;or(r=ar())&&(n.myGraph=r.first)}},hostBindings:function(e,n){1&e&&mn("beforeunload",function(s){return n.ngOnDestroy(s)},0,$n)},decls:6,vars:3,consts:[["name","myfile[]",3,"customUpload","uploadHandler"],["header","Gexf",3,"visible","visibleChange"],[4,"ngFor","ngForOf"],["label","Gexf",3,"onClick"],[1,"sigma-container"],["myGraph",""]],template:function(e,n){1&e&&(ct(0,"p-fileUpload",0),mn("uploadHandler",function(s){return n.uploadHandler(s)}),ht(),ct(1,"p-dialog",1),mn("visibleChange",function(s){return n.display=s}),Ze(2,Eoe,2,1,"pre",2),ht(),ct(3,"p-button",3),mn("onClick",function(){return n.gexf()}),ht(),si(4,"div",4,5)),2&e&&(ve("customUpload",!0),De(1),ve("visible",n.display),De(1),ve("ngForOf",n.xml))},dependencies:[ru,B1,O2,n4],styles:[".sigma-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}"]}),i})();const Moe=v1("tags"),r4={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let G1;const Doe=new Uint8Array(16);function Loe(){if(!G1&&(G1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!G1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return G1(Doe)}const Qh=[];for(let i=0;i<256;++i)Qh.push((i+256).toString(16).slice(1));const o4=function Poe(i,t,e){if(r4.randomUUID&&!t&&!i)return r4.randomUUID();const n=(i=i||{}).random||(i.rng||Loe)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=n[r];return t}return function s4(i,t=0){return(Qh[i[t+0]]+Qh[i[t+1]]+Qh[i[t+2]]+Qh[i[t+3]]+"-"+Qh[i[t+4]]+Qh[i[t+5]]+"-"+Qh[i[t+6]]+Qh[i[t+7]]+"-"+Qh[i[t+8]]+Qh[i[t+9]]+"-"+Qh[i[t+10]]+Qh[i[t+11]]+Qh[i[t+12]]+Qh[i[t+13]]+Qh[i[t+14]]+Qh[i[t+15]]).toLowerCase()}(n)};var W1=V(6864);class ww extends class koe extends class Roe{ready(t){console.debug(`layout ready, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}stop(t){console.debug(`layout stop, cytoscape.LayoutEventObject: ${JSON.stringify(t)}`)}}{constructor(){super(...arguments),this.zoom=null,this.pan=null,this.animate=!1,this.animationDuration=500,this.animationEasing=void 0,this.animateFilter=(t,e)=>!0}}{constructor(){super(...arguments),this.fit=!0,this.padding=30,this.boundingBox=null,this.avoidOverlap=!0,this.nodeDimensionsIncludeLabels=!1,this.spacingFactor=1.75,this.sort=null,this.transform=(t,e)=>e}}class Ooe extends ww{constructor(){super(...arguments),this.name="grid",this.avoidOverlapPadding=10,this.condense=!1,this.rows=null,this.cols=null,this.position=null}}class Foe extends ww{constructor(){super(...arguments),this.name="circle",this.startAngle=1.5*Math.PI,this.sweep=null,this.clockwise=!0}}class Noe{constructor(){this.name="concentric",this.startAngle=1.5*Math.PI,this.equidistant=!1,this.minNodeSpacing=10,this.boundingBox=null,this.height=null,this.width=null,this.spacingFactor=null}concentric(t){return 0}levelWidth(t){return 0}}class Boe extends ww{constructor(){super(...arguments),this.name="breadthfirst",this.directed=!1,this.circle=!1,this.maximal=!1,this.grid=!1,this.nodeDimensionsIncludeLabels=!1}}class zoe extends ww{constructor(){super(...arguments),this.name="cose",this.animationThreshold=250,this.refresh=20,this.randomize=!1,this.componentSpacing=40,this.nodeOverlap=4e3,this.nestingFactor=1.2,this.gravity=1,this.numIter=1e3,this.initialTemp=1e3,this.coolingFactor=.99,this.minTemp=1,this.nodeRepulsion=t=>2048,this.idealEdgeLength=t=>32,this.edgeElasticity=t=>32}}class Voe extends ww{constructor(){super(),this.name="dagre",this.nodeSep=null,this.edgeSep=null,this.rankSep=null,this.rankDir="TB",this.ranker=null,this.minLen=t=>1,this.edgeWeight=t=>1}}const B2=ew("[Tag List/API] Retrieve Tags Success",{_as:"props",_p:void 0}),Hoe=["sublist"],Goe=["menuitem"],Woe=function(i){return{"p-hidden":i}};function joe(i,t){if(1&i&&si(0,"li",5,6),2&i){const e=_e().$implicit;ve("ngClass",Bi(1,Woe,!1===e.visible))}}function $oe(i,t){if(1&i&&si(0,"span",17),2&i){const e=_e(3).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function qoe(i,t){if(1&i&&(ct(0,"span",18),cr(1),ht()),2&i){const e=_e(3).$implicit;De(1),ds(e.label)}}function Xoe(i,t){1&i&&si(0,"span",19),2&i&&ve("innerHTML",_e(3).$implicit.label,Oa)}function Yoe(i,t){if(1&i&&(ct(0,"span",20),cr(1),ht()),2&i){const e=_e(3).$implicit;ve("ngClass",e.badgeStyleClass),De(1),ds(e.badge)}}function Koe(i,t){1&i&&si(0,"span",21)}const a4=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function Zoe(i,t){if(1&i){const e=Pi();ct(0,"a",11),mn("click",function(r){wt(e),_e();const s=co(1),o=_e(),l=o.$implicit,u=o.index,p=_e();return It(p.onItemClick(r,l,s,p.getKey(u)))}),Ze(1,$oe,1,2,"span",12),Ze(2,qoe,2,1,"span",13),Ze(3,Xoe,1,1,"ng-template",null,14,vc),Ze(5,Yoe,2,2,"span",15),Ze(6,Koe,1,0,"span",16),ht()}if(2&i){const e=co(4),n=_e(2),r=n.$implicit,s=n.index,o=_e();ve("target",r.target)("ngClass",Bi(13,a4,r.disabled)),vr("href",r.url?r.url:null,$h)("title",r.title)("id",r.id)("tabindex",r.disabled?null:"0")("aria-haspopup",null!=o.item.items)("aria-expanded",o.isActive(o.getKey(s))),De(1),ve("ngIf",r.icon),De(1),ve("ngIf",!1!==r.escape)("ngIfElse",e),De(3),ve("ngIf",r.badge),De(1),ve("ngIf",r.items)}}function Qoe(i,t){if(1&i&&si(0,"span",17),2&i){const e=_e(3).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Joe(i,t){if(1&i&&(ct(0,"span",18),cr(1),ht()),2&i){const e=_e(3).$implicit;De(1),ds(e.label)}}function eae(i,t){1&i&&si(0,"span",19),2&i&&ve("innerHTML",_e(3).$implicit.label,Oa)}function tae(i,t){if(1&i&&(ct(0,"span",20),cr(1),ht()),2&i){const e=_e(3).$implicit;ve("ngClass",e.badgeStyleClass),De(1),ds(e.badge)}}function nae(i,t){1&i&&si(0,"span",21)}const iae=function(){return{exact:!1}};function rae(i,t){if(1&i){const e=Pi();ct(0,"a",22),mn("click",function(r){wt(e),_e();const s=co(1),o=_e(),l=o.$implicit,u=o.index,p=_e();return It(p.onItemClick(r,l,s,p.getKey(u)))}),Ze(1,Qoe,1,2,"span",12),Ze(2,Joe,2,1,"span",13),Ze(3,eae,1,1,"ng-template",null,23,vc),Ze(5,tae,2,2,"span",15),Ze(6,nae,1,0,"span",16),ht()}if(2&i){const e=co(4),n=_e(2).$implicit;ve("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||xa(20,iae))("target",n.target)("ngClass",Bi(21,a4,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),vr("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),De(1),ve("ngIf",n.icon),De(1),ve("ngIf",!1!==n.escape)("ngIfElse",e),De(3),ve("ngIf",n.badge),De(1),ve("ngIf",n.items)}}function sae(i,t){if(1&i){const e=Pi();ct(0,"p-contextMenuSub",24),mn("leafClick",function(){return wt(e),It(_e(3).onLeafClick())}),ht()}if(2&i){const e=_e(2),n=e.index,r=e.$implicit;ve("parentItemKey",_e().getKey(n))("item",r)}}const oae=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function aae(i,t){if(1&i){const e=Pi();ct(0,"li",7,6),mn("mouseenter",function(r){wt(e);const s=_e(),o=s.$implicit,l=s.index,u=_e();return It(u.onItemMouseEnter(r,o,u.getKey(l)))})("mouseleave",function(r){wt(e);const s=_e().$implicit;return It(_e().onItemMouseLeave(r,s))}),Ze(2,Zoe,7,15,"a",8),Ze(3,rae,7,23,"a",9),Ze(4,sae,1,2,"p-contextMenuSub",10),ht()}if(2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e();Vr(n.styleClass),ve("ngClass",ys(9,oae,s.isActive(s.getKey(r)),!1===n.visible))("ngStyle",n.style)("tooltipOptions",n.tooltipOptions),vr("data-ik",s.getKey(r)),De(2),ve("ngIf",!n.routerLink),De(1),ve("ngIf",n.routerLink),De(1),ve("ngIf",n.items)}}function lae(i,t){if(1&i&&(Ze(0,joe,2,3,"li",3),Ze(1,aae,5,12,"li",4)),2&i){const e=t.$implicit;ve("ngIf",e.separator),De(1),ve("ngIf",!e.separator)}}const cae=function(i){return{"p-submenu-list":i}},uae=["container"];let hae=(()=>{class i{constructor(e){this.leafClick=new jn,this.contextMenu=e}ngOnInit(){this.activeItemKeyChangeSubscription=this.contextMenu.contextMenuService.activeItemKeyChange$.pipe(function Uoe(i){return bn((t,e)=>{dl(i).subscribe(yn(e,()=>e.complete(),se)),!e.closed&&t.subscribe(e)})}(this.contextMenu.ngDestroy$)).subscribe(e=>{this.activeItemKey=e,this.isActive(this.parentItemKey)&&Gt.hasClass(this.sublistViewChild.nativeElement,"p-submenu-list-active")&&this.contextMenu.positionSubmenu(this.sublistViewChild.nativeElement),this.contextMenu.cd.markForCheck()})}onItemMouseEnter(e,n,r){if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),n.disabled)this.activeItemKey=null;else{if(n.items){let s=Gt.findSingle(e.currentTarget,".p-submenu-list");Gt.addClass(s,"p-submenu-list-active")}this.contextMenu.contextMenuService.changeKey(r)}}onItemMouseLeave(e,n){n.disabled||this.contextMenu.el.nativeElement.contains(e.toElement)&&(n.items&&this.contextMenu.removeActiveFromSubLists(e.currentTarget),this.root||this.contextMenu.contextMenuService.changeKey(this.parentItemKey))}onItemClick(e,n,r,s){if(n.disabled)e.preventDefault();else{if(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items){let o=Gt.findSingle(r,".p-submenu-list");o&&(this.isActive(s)&&Gt.hasClass(o,"p-submenu-list-active")?this.contextMenu.removeActiveFromSubLists(r):Gt.addClass(o,"p-submenu-list-active"),this.contextMenu.contextMenuService.changeKey(s))}n.items||this.onLeafClick()}}onLeafClick(){this.root&&this.contextMenu.hide(),this.leafClick.emit()}getKey(e){return this.root?String(e):this.parentItemKey+"_"+e}isActive(e){return this.activeItemKey&&(this.activeItemKey.startsWith(e+"_")||this.activeItemKey===e)}}return i.\u0275fac=function(e){return new(e||i)(Qt(hs(()=>l4)))},i.\u0275cmp=Ar({type:i,selectors:[["p-contextMenuSub"]],viewQuery:function(e,n){if(1&e&&(is(Hoe,5),is(Goe,5)),2&e){let r;or(r=ar())&&(n.sublistViewChild=r.first),or(r=ar())&&(n.menuitemViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",parentItemKey:"parentItemKey"},outputs:{leafClick:"leafClick"},decls:3,vars:4,consts:[[3,"ngClass"],["sublist",""],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["pTooltip","","role","none",3,"ngClass","ngStyle","class","tooltipOptions","mouseenter","mouseleave",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["menuitem",""],["pTooltip","","role","none",3,"ngClass","ngStyle","tooltipOptions","mouseenter","mouseleave"],["pRipple","",3,"target","ngClass","click",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click",4,"ngIf"],[3,"parentItemKey","item","leafClick",4,"ngIf"],["pRipple","",3,"target","ngClass","click"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi pi-angle-right",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi","pi-angle-right"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click"],["htmlRouteLabel",""],[3,"parentItemKey","item","leafClick"]],template:function(e,n){1&e&&(ct(0,"ul",0,1),Ze(2,lae,2,2,"ng-template",2),ht()),2&e&&(ve("ngClass",Bi(2,cae,!n.root)),De(2),ve("ngForOf",n.root?n.item:n.item.items))},dependencies:[_o,ru,Oo,Ko,QC,FD,yh,s_,i],encapsulation:2}),i})(),l4=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.zone=s,this.contextMenuService=o,this.config=l,this.autoZIndex=!0,this.baseZIndex=0,this.triggerEvent="contextmenu",this.onShow=new jn,this.onHide=new jn,this.ngDestroy$=new nn,this.preventDocumentDefault=!1}ngAfterViewInit(){this.global?this.triggerEventListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document",this.triggerEvent,n=>{this.show(n),n.preventDefault()}):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,this.triggerEvent,e=>{this.show(e),e.preventDefault()})),this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):Gt.appendChild(this.containerViewChild.nativeElement,this.appendTo))}show(e){this.clearActiveItem(),this.position(e),this.moveOnTop(),this.containerViewChild.nativeElement.style.display="block",this.preventDocumentDefault=!0,Gt.fadeIn(this.containerViewChild.nativeElement,250),this.bindGlobalListeners(),e&&e.preventDefault(),this.onShow.emit()}hide(){this.containerViewChild.nativeElement.style.display="none",this.autoZIndex&&Ll.clear(this.containerViewChild.nativeElement),this.clearActiveItem(),this.unbindGlobalListeners(),this.onHide.emit()}moveOnTop(){this.autoZIndex&&this.containerViewChild&&"block"!==this.containerViewChild.nativeElement.style.display&&Ll.set("menu",this.containerViewChild.nativeElement,this.baseZIndex+this.config.zIndex.menu)}toggle(e){this.containerViewChild.nativeElement.offsetParent?this.hide():this.show(e)}position(e){if(e){let n=e.pageX+1,r=e.pageY+1,s=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetWidth:Gt.getHiddenElementOuterWidth(this.containerViewChild.nativeElement),o=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetHeight:Gt.getHiddenElementOuterHeight(this.containerViewChild.nativeElement),l=Gt.getViewport();n+s-document.body.scrollLeft>l.width&&(n-=s),r+o-document.body.scrollTop>l.height&&(r-=o),n<document.body.scrollLeft&&(n=document.body.scrollLeft),r<document.body.scrollTop&&(r=document.body.scrollTop),this.containerViewChild.nativeElement.style.left=n+"px",this.containerViewChild.nativeElement.style.top=r+"px"}}positionSubmenu(e){let n=e.parentElement.parentElement,r=Gt.getViewport(),s=e.offsetParent?e.offsetWidth:Gt.getHiddenElementOuterWidth(e),o=e.offsetHeight?e.offsetHeight:Gt.getHiddenElementOuterHeight(e),l=Gt.getOuterWidth(n.children[0]),u=Gt.getOuterHeight(n.children[0]),p=Gt.getOffset(n.parentElement);e.style.zIndex=++Gt.zindex,parseInt(p.top)+u+o>r.height-Gt.calculateScrollbarHeight()?(e.style.removeProperty("top"),e.style.bottom="0px"):(e.style.removeProperty("bottom"),e.style.top="0px"),e.style.left=parseInt(p.left)+l+s>r.width-Gt.calculateScrollbarWidth()?-s+"px":l+"px"}isItemMatched(e){return Gt.hasClass(e,"p-menuitem")&&!Gt.hasClass(e.children[0],"p-disabled")}findNextItem(e,n){let r=e.nextElementSibling;if(r)return this.isItemMatched(r)?r:this.findNextItem(r,n);{let s=e.parentElement.children[0];return this.isItemMatched(s)?s:n?null:this.findNextItem(s,!0)}}findPrevItem(e,n){let r=e.previousElementSibling;if(r)return this.isItemMatched(r)?r:this.findPrevItem(r,n);{let s=e.parentElement.children[e.parentElement.children.length-1];return this.isItemMatched(s)?s:n?null:this.findPrevItem(s,!0)}}getActiveItem(){let e=this.contextMenuService.activeItemKey;return null==e?null:Gt.findSingle(this.containerViewChild.nativeElement,'.p-menuitem[data-ik="'+e+'"]')}clearActiveItem(){this.contextMenuService.activeItemKey&&(this.removeActiveFromSubLists(this.containerViewChild.nativeElement),this.contextMenuService.reset())}removeActiveFromSubLists(e){let n=Gt.find(e,".p-submenu-list-active");for(let r of n)Gt.removeClass(r,"p-submenu-list-active")}removeActiveFromSublist(e){e&&Gt.findSingle(e,".p-submenu-list")&&Gt.hasClass(e,"p-submenu-list-active")&&Gt.removeClass(e,"p-submenu-list-active")}bindGlobalListeners(){if(!this.documentClickListener){const e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!n.ctrlKey&&2!==n.button&&this.hide()}),this.documentTriggerListener=this.renderer.listen(e,this.triggerEvent,n=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(n)&&!this.preventDocumentDefault&&this.hide(),this.preventDocumentDefault=!1})}this.zone.runOutsideAngular(()=>{this.windowResizeListener||(this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener))}),this.documentKeydownListener||(this.documentKeydownListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",n=>{let r=this.getActiveItem();switch(n.key){case"ArrowDown":if(r)this.removeActiveFromSublist(r),r=this.findNextItem(r);else{let s=Gt.findSingle(this.containerViewChild.nativeElement,".p-menuitem-link").parentElement;r=this.isItemMatched(s)?s:this.findNextItem(s)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowUp":if(r)this.removeActiveFromSublist(r),r=this.findPrevItem(r);else{let s=Gt.findSingle(this.containerViewChild.nativeElement,"ul"),o=s.children[s.children.length-1];r=this.isItemMatched(o)?o:this.findPrevItem(o)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),n.preventDefault();break;case"ArrowRight":if(r){let s=Gt.findSingle(r,".p-submenu-list");s&&(Gt.addClass(s,"p-submenu-list-active"),r=Gt.findSingle(s,".p-menuitem-link:not(.p-disabled)").parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"ArrowLeft":if(r){let s=r.parentElement;s&&Gt.hasClass(s,"p-submenu-list-active")&&(Gt.removeClass(s,"p-submenu-list-active"),r=s.parentElement.parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}n.preventDefault();break;case"Escape":this.hide(),n.preventDefault();break;case"Enter":r&&this.handleItemClick(n,this.findModelItemFromKey(this.contextMenuService.activeItemKey),r),n.preventDefault()}}))}findModelItemFromKey(e){return null!=e&&this.model?e.split("_").reduce((r,s)=>r?r.items[s]:this.model[s],null):null}handleItemClick(e,n,r){if(n&&!n.disabled){if(n.command&&n.command({originalEvent:e,item:n}),n.items){let s=Gt.findSingle(r,".p-submenu-list");s&&(Gt.hasClass(s,"p-submenu-list-active")?this.removeActiveFromSubLists(r):(Gt.addClass(s,"p-submenu-list-active"),this.positionSubmenu(s)))}n.items||this.hide()}}unbindGlobalListeners(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null),this.documentTriggerListener&&(this.documentTriggerListener(),this.documentTriggerListener=null),this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null),this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}onWindowResize(e){this.containerViewChild.nativeElement.offsetParent&&this.hide()}isOutsideClicked(e){return!(this.containerViewChild.nativeElement.isSameNode(e.target)||this.containerViewChild.nativeElement.contains(e.target))}ngOnDestroy(){this.unbindGlobalListeners(),this.triggerEventListener&&this.triggerEventListener(),this.containerViewChild&&this.autoZIndex&&Ll.clear(this.containerViewChild.nativeElement),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement),this.ngDestroy$.next(!0),this.ngDestroy$.complete()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(d),Qt(Ho),Qt(Yo),Qt(TB),Qt(Mp))},i.\u0275cmp=Ar({type:i,selectors:[["p-contextMenu"]],viewQuery:function(e,n){if(1&e&&is(uae,5),2&e){let r;or(r=ar())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",global:"global",target:"target",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",triggerEvent:"triggerEvent"},outputs:{onShow:"onShow",onHide:"onHide"},decls:3,vars:6,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"item","root"]],template:function(e,n){1&e&&(ct(0,"div",0,1),si(2,"p-contextMenuSub",2),ht()),2&e&&(Vr(n.styleClass),ve("ngClass","p-contextmenu p-component")("ngStyle",n.style),De(2),ve("item",n.model)("root",!0))},dependencies:[_o,Ko,hae],styles:[".p-contextmenu{position:absolute;display:none}.p-contextmenu ul{margin:0;padding:0;list-style:none}.p-contextmenu .p-submenu-list{position:absolute;min-width:100%;z-index:1;display:none}.p-contextmenu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-contextmenu .p-menuitem-text{line-height:1}.p-contextmenu .p-menuitem{position:relative}.p-contextmenu .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-contextmenu .p-menuitem-active>p-contextmenusub>.p-submenu-list.p-submenu-list-active{display:block!important}\n"],encapsulation:2,changeDetection:0}),i})(),dae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({providers:[TB],imports:[Vs,t_,su,nv,t_,nv]}),i})(),fae=(()=>{class i{constructor(e,n,r,s){this.el=e,this.ngModel=n,this.control=r,this.cd=s,this.onResize=new jn}ngOnInit(){this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(()=>{this.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(()=>{this.updateState()}))}ngAfterViewInit(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}onInput(e){this.updateState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}onFocus(e){this.autoResize&&this.resize(e)}onBlur(e){this.autoResize&&this.resize(e)}resize(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}updateState(){this.updateFilledState(),this.autoResize&&this.resize()}ngOnDestroy(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(r_,8),Qt(tv,8),Qt(Ho))},i.\u0275dir=qr({type:i,selectors:[["","pInputTextarea",""]],hostAttrs:[1,"p-inputtextarea","p-inputtext","p-component","p-element"],hostVars:4,hostBindings:function(e,n){1&e&&mn("input",function(s){return n.onInput(s)})("focus",function(s){return n.onFocus(s)})("blur",function(s){return n.onBlur(s)}),2&e&&Tp("p-filled",n.filled)("p-inputtextarea-resizable",n.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),i})(),pae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();function gae(i,t){1&i&&qi(0)}function mae(i,t){if(1&i&&(Hr(0),Ze(1,gae,1,0,"ng-container",3),Gr()),2&i){const e=_e(2);De(1),ve("ngTemplateOutlet",e.contentTemplate)}}function vae(i,t){if(1&i&&(ct(0,"div",1),nu(1),Ze(2,mae,2,1,"ng-container",2),ht()),2&i){const e=_e();ve("hidden",!e.selected),vr("id",e.id)("aria-hidden",!e.selected)("aria-labelledby",e.id+"-label"),De(2),ve("ngIf",e.contentTemplate&&(e.cache?e.loaded:e.selected))}}const c4=["*"],yae=["content"],_ae=["navbar"],Cae=["prevBtn"],bae=["nextBtn"],xae=["inkbar"];function wae(i,t){if(1&i){const e=Pi();ct(0,"button",12,13),mn("click",function(){return wt(e),It(_e().navBackward())}),si(2,"span",14),ht()}}function Aae(i,t){1&i&&si(0,"span",24),2&i&&ve("ngClass",_e(3).$implicit.leftIcon)}function Iae(i,t){1&i&&si(0,"span",25),2&i&&ve("ngClass",_e(3).$implicit.rightIcon)}function Sae(i,t){if(1&i&&(Hr(0),Ze(1,Aae,1,1,"span",21),ct(2,"span",22),cr(3),ht(),Ze(4,Iae,1,1,"span",23),Gr()),2&i){const e=_e(2).$implicit;De(1),ve("ngIf",e.leftIcon),De(2),ds(e.header),De(1),ve("ngIf",e.rightIcon)}}function Eae(i,t){1&i&&qi(0)}function Tae(i,t){if(1&i){const e=Pi();ct(0,"span",26),mn("click",function(r){wt(e);const s=_e(2).$implicit;return It(_e().close(r,s))}),ht()}}const Mae=function(i,t){return{"p-highlight":i,"p-disabled":t}};function Dae(i,t){if(1&i){const e=Pi();ct(0,"li",16)(1,"a",17),mn("click",function(r){wt(e);const s=_e().$implicit;return It(_e().open(r,s))})("keydown.enter",function(r){wt(e);const s=_e().$implicit;return It(_e().open(r,s))}),Ze(2,Sae,5,3,"ng-container",18),Ze(3,Eae,1,0,"ng-container",19),Ze(4,Tae,1,0,"span",20),ht()()}if(2&i){const e=_e().$implicit;Vr(e.headerStyleClass),ve("ngClass",ys(16,Mae,e.selected,e.disabled))("ngStyle",e.headerStyle),De(1),ve("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),vr("id",e.id+"-label")("aria-selected",e.selected)("aria-controls",e.id)("aria-selected",e.selected)("tabindex",e.disabled?null:"0"),De(1),ve("ngIf",!e.headerTemplate),De(1),ve("ngTemplateOutlet",e.headerTemplate),De(1),ve("ngIf",e.closable)}}function Lae(i,t){1&i&&Ze(0,Dae,5,19,"li",15),2&i&&ve("ngIf",!t.$implicit.closed)}function Pae(i,t){if(1&i){const e=Pi();ct(0,"button",27,28),mn("click",function(){return wt(e),It(_e().navForward())}),si(2,"span",29),ht()}}const Rae=function(i){return{"p-tabview p-component":!0,"p-tabview-scrollable":i}};let kae=0,u4=(()=>{class i{constructor(e,n,r){this.viewContainer=n,this.cd=r,this.cache=!0,this.tooltipPosition="top",this.tooltipPositionStyle="absolute",this.id="p-tabpanel-"+kae++,this.tabView=e}ngAfterContentInit(){this.templates.forEach(e=>{"header"===e.getType()?this.headerTemplate=e.template:this.contentTemplate=e.template})}get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||this.cd.detectChanges(),e&&(this.loaded=!0)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.tabView.cd.markForCheck()}get header(){return this._header}set header(e){this._header=e,Promise.resolve().then(()=>{this.tabView.updateInkBar(),this.tabView.cd.markForCheck()})}get leftIcon(){return this._leftIcon}set leftIcon(e){this._leftIcon=e,this.tabView.cd.markForCheck()}get rightIcon(){return this._rightIcon}set rightIcon(e){this._rightIcon=e,this.tabView.cd.markForCheck()}ngOnDestroy(){this.view=null}}return i.\u0275fac=function(e){return new(e||i)(Qt(hs(()=>h4)),Qt(hg),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-tabPanel"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",cache:"cache",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",selected:"selected",disabled:"disabled",header:"header",leftIcon:"leftIcon",rightIcon:"rightIcon"},ngContentSelectors:c4,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(e,n){1&e&&(Ff(),Ze(0,vae,3,5,"div",0)),2&e&&ve("ngIf",!n.closed)},dependencies:[Oo,Dl],encapsulation:2}),i})(),h4=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.orientation="top",this.onChange=new jn,this.onClose=new jn,this.activeIndexChange=new jn,this.backwardIsDisabled=!0,this.forwardIsDisabled=!1}ngAfterContentInit(){this.initTabs(),this.tabChangesSubscription=this.tabPanels.changes.subscribe(e=>{this.initTabs()})}ngAfterViewChecked(){this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}ngOnDestroy(){this.tabChangesSubscription&&this.tabChangesSubscription.unsubscribe()}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}open(e,n){if(n.disabled)e&&e.preventDefault();else{if(!n.selected){let r=this.findSelectedTab();r&&(r.selected=!1),this.tabChanged=!0,n.selected=!0;let s=this.findTabIndex(n);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(s),this.onChange.emit({originalEvent:e,index:s}),this.updateScrollBar(s)}e&&e.preventDefault()}}close(e,n){this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(n),close:()=>{this.closeTab(n)}}):(this.closeTab(n),this.onClose.emit({originalEvent:e,index:this.findTabIndex(n)})),e.stopPropagation()}closeTab(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(let n=0;n<this.tabs.length;n++){let r=this.tabs[n];if(!r.closed&&!e.disabled){r.selected=!0;break}}}e.closed=!0}}findSelectedTab(){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}findTabIndex(e){let n=-1;for(let r=0;r<this.tabs.length;r++)if(this.tabs[r]==e){n=r;break}return n}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0,this.tabChanged=!0,this.updateScrollBar(e))}updateInkBar(){if(this.navbar){const e=Gt.findSingle(this.navbar.nativeElement,"li.p-highlight");if(!e)return;this.inkbar.nativeElement.style.width=Gt.getWidth(e)+"px",this.inkbar.nativeElement.style.left=Gt.getOffset(e).left-Gt.getOffset(this.navbar.nativeElement).left+"px"}}updateScrollBar(e){this.navbar.nativeElement.children[e].scrollIntoView({block:"nearest"})}updateButtonState(){const e=this.content.nativeElement,{scrollLeft:n,scrollWidth:r}=e,s=Gt.getWidth(e);this.backwardIsDisabled=0===n,this.forwardIsDisabled=parseInt(n)===r-s}onScroll(e){this.scrollable&&this.updateButtonState(),e.preventDefault()}getVisibleButtonWidths(){return[this.prevBtn?.nativeElement,this.nextBtn?.nativeElement].reduce((e,n)=>n?e+Gt.getWidth(n):e,0)}navBackward(){const e=this.content.nativeElement,n=Gt.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft-n;e.scrollLeft=r<=0?0:r}navForward(){const e=this.content.nativeElement,n=Gt.getWidth(e)-this.getVisibleButtonWidths(),r=e.scrollLeft+n,s=e.scrollWidth-n;e.scrollLeft=r>=s?s:r}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-tabView"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,u4,4),2&e){let s;or(s=ar())&&(n.tabPanels=s)}},viewQuery:function(e,n){if(1&e&&(is(yae,5),is(_ae,5),is(Cae,5),is(bae,5),is(xae,5)),2&e){let r;or(r=ar())&&(n.content=r.first),or(r=ar())&&(n.navbar=r.first),or(r=ar())&&(n.prevBtn=r.first),or(r=ar())&&(n.nextBtn=r.first),or(r=ar())&&(n.inkbar=r.first)}},hostAttrs:[1,"p-element"],inputs:{orientation:"orientation",style:"style",styleClass:"styleClass",controlClose:"controlClose",scrollable:"scrollable",activeIndex:"activeIndex"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:c4,decls:13,vars:9,consts:[[3,"ngClass","ngStyle"],[1,"p-tabview-nav-container"],["class","p-tabview-nav-prev p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-nav-content",3,"scroll"],["content",""],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],["class","p-tabview-nav-next p-tabview-nav-btn p-link","type","button","pRipple","",3,"click",4,"ngIf"],[1,"p-tabview-panels"],["type","button","pRipple","",1,"p-tabview-nav-prev","p-tabview-nav-btn","p-link",3,"click"],["prevBtn",""],[1,"pi","pi-chevron-left"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown.enter"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tabview-close pi pi-times",3,"click",4,"ngIf"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-close","pi","pi-times",3,"click"],["type","button","pRipple","",1,"p-tabview-nav-next","p-tabview-nav-btn","p-link",3,"click"],["nextBtn",""],[1,"pi","pi-chevron-right"]],template:function(e,n){1&e&&(Ff(),ct(0,"div",0)(1,"div",1),Ze(2,wae,3,0,"button",2),ct(3,"div",3,4),mn("scroll",function(s){return n.onScroll(s)}),ct(5,"ul",5,6),Ze(7,Lae,1,1,"ng-template",7),si(8,"li",8,9),ht()(),Ze(10,Pae,3,0,"button",10),ht(),ct(11,"div",11),nu(12),ht()()),2&e&&(Vr(n.styleClass),ve("ngClass",Bi(7,Rae,n.scrollable))("ngStyle",n.style),De(2),ve("ngIf",n.scrollable&&!n.backwardIsDisabled),De(5),ve("ngForOf",n.tabs),De(3),ve("ngIf",n.scrollable&&!n.forwardIsDisabled))},dependencies:[_o,ru,Oo,Dl,Ko,s_,yh],styles:[".p-tabview-nav-container{position:relative}.p-tabview-scrollable .p-tabview-nav-container{overflow:hidden}.p-tabview-nav-content{overflow-x:auto;overflow-y:hidden;scroll-behavior:smooth;scrollbar-width:none;overscroll-behavior:contain auto}.p-tabview-nav{display:flex;margin:0;padding:0;list-style-type:none;flex:1 1 auto}.p-tabview-nav-link{cursor:pointer;-webkit-user-select:none;user-select:none;display:flex;align-items:center;position:relative;text-decoration:none;overflow:hidden}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1;white-space:nowrap}.p-tabview-nav-btn{position:absolute;top:0;z-index:2;height:100%;display:flex;align-items:center;justify-content:center}.p-tabview-nav-prev{left:0}.p-tabview-nav-next{right:0}.p-tabview-nav-content::-webkit-scrollbar{display:none}.p-tabview-close{z-index:1}\n"],encapsulation:2,changeDetection:0}),i})(),Oae=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na,nv,su,Na]}),i})();const d4=function(i){return{"p-treenode-droppoint-active":i}};function Fae(i,t){if(1&i){const e=Pi();ct(0,"li",4),mn("drop",function(r){return wt(e),It(_e(2).onDropPoint(r,-1))})("dragover",function(r){return wt(e),It(_e(2).onDropPointDragOver(r))})("dragenter",function(r){return wt(e),It(_e(2).onDropPointDragEnter(r,-1))})("dragleave",function(r){return wt(e),It(_e(2).onDropPointDragLeave(r))}),ht()}if(2&i){const e=_e(2);ve("ngClass",Bi(1,d4,e.draghoverPrev))}}const Nae=function(i){return{"p-checkbox-disabled":i}},Bae=function(i,t){return{"p-highlight":i,"p-indeterminate":t}},zae=function(i,t){return{"pi-check":i,"pi-minus":t}};function Vae(i,t){if(1&i&&(ct(0,"div",13)(1,"div",14),si(2,"span",15),ht()()),2&i){const e=_e(3);ve("ngClass",Bi(4,Nae,!1===e.node.selectable)),vr("aria-checked",e.isSelected()),De(1),ve("ngClass",ys(6,Bae,e.isSelected(),e.node.partialSelected)),De(1),ve("ngClass",ys(9,zae,e.isSelected(),e.node.partialSelected))}}function Uae(i,t){1&i&&si(0,"span"),2&i&&Vr(_e(3).getIcon())}function Hae(i,t){if(1&i&&(ct(0,"span"),cr(1),ht()),2&i){const e=_e(3);De(1),ds(e.node.label)}}function Gae(i,t){1&i&&qi(0)}const f4=function(i){return{$implicit:i}};function Wae(i,t){if(1&i&&(ct(0,"span"),Ze(1,Gae,1,0,"ng-container",16),ht()),2&i){const e=_e(3);De(1),ve("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",Bi(2,f4,e.node))}}function jae(i,t){if(1&i&&si(0,"p-treeNode",19),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=_e(4);ve("node",e)("parentNode",o.node)("firstChild",n)("lastChild",r)("index",s)("itemSize",o.itemSize)("level",o.level+1)}}function $ae(i,t){if(1&i&&(ct(0,"ul",17),Ze(1,jae,1,7,"p-treeNode",18),ht()),2&i){const e=_e(3);tf("display",e.node.expanded?"block":"none"),De(1),ve("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const qae=function(i,t){return["p-treenode",i,t]},p4=function(i){return{height:i}},Xae=function(i,t,e){return{"p-treenode-selectable":i,"p-treenode-dragover":t,"p-highlight":e}},Yae=function(i,t){return{"pi-chevron-right":i,"pi-chevron-down":t}};function Kae(i,t){if(1&i){const e=Pi();ct(0,"li",5)(1,"div",6),mn("click",function(r){return wt(e),It(_e(2).onNodeClick(r))})("contextmenu",function(r){return wt(e),It(_e(2).onNodeRightClick(r))})("touchend",function(){return wt(e),It(_e(2).onNodeTouchEnd())})("drop",function(r){return wt(e),It(_e(2).onDropNode(r))})("dragover",function(r){return wt(e),It(_e(2).onDropNodeDragOver(r))})("dragenter",function(r){return wt(e),It(_e(2).onDropNodeDragEnter(r))})("dragleave",function(r){return wt(e),It(_e(2).onDropNodeDragLeave(r))})("dragstart",function(r){return wt(e),It(_e(2).onDragStart(r))})("dragend",function(r){return wt(e),It(_e(2).onDragStop(r))})("keydown",function(r){return wt(e),It(_e(2).onKeyDown(r))}),ct(2,"button",7),mn("click",function(r){return wt(e),It(_e(2).toggle(r))}),si(3,"span",8),ht(),Ze(4,Vae,3,12,"div",9),Ze(5,Uae,1,2,"span",3),ct(6,"span",10),Ze(7,Hae,2,1,"span",11),Ze(8,Wae,2,4,"span",11),ht()(),Ze(9,$ae,2,4,"ul",12),ht()}if(2&i){const e=_e(2);ve("ngClass",ys(18,qae,e.node.styleClass||"",e.isLeaf()?"p-treenode-leaf":""))("ngStyle",Bi(21,p4,e.itemSize+"px")),De(1),tf("padding-left",e.level*e.indentation+"rem"),ve("draggable",e.tree.draggableNodes)("ngClass",qu(23,Xae,e.tree.selectionMode&&!1!==e.node.selectable,e.draghoverNode,e.isSelected())),vr("tabindex",0)("aria-posinset",e.index+1)("aria-expanded",e.node.expanded)("aria-selected",e.isSelected())("aria-label",e.node.label),De(1),vr("aria-label",e.tree.togglerAriaLabel),De(1),ve("ngClass",ys(27,Yae,!e.node.expanded,e.node.expanded)),De(1),ve("ngIf","checkbox"==e.tree.selectionMode),De(1),ve("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),De(2),ve("ngIf",!e.tree.getTemplateForNode(e.node)),De(1),ve("ngIf",e.tree.getTemplateForNode(e.node)),De(1),ve("ngIf",!e.tree.virtualScroll&&e.node.children&&e.node.expanded)}}function Zae(i,t){if(1&i){const e=Pi();ct(0,"li",4),mn("drop",function(r){return wt(e),It(_e(2).onDropPoint(r,1))})("dragover",function(r){return wt(e),It(_e(2).onDropPointDragOver(r))})("dragenter",function(r){return wt(e),It(_e(2).onDropPointDragEnter(r,1))})("dragleave",function(r){return wt(e),It(_e(2).onDropPointDragLeave(r))}),ht()}if(2&i){const e=_e(2);ve("ngClass",Bi(1,d4,e.draghoverNext))}}const g4=function(i){return{"p-treenode-connector-line":i}};function Qae(i,t){if(1&i&&(ct(0,"td",25)(1,"table",26)(2,"tbody")(3,"tr"),si(4,"td",27),ht(),ct(5,"tr"),si(6,"td",27),ht()()()()),2&i){const e=_e(3);De(4),ve("ngClass",Bi(2,g4,!e.firstChild)),De(2),ve("ngClass",Bi(4,g4,!e.lastChild))}}const Jae=function(i,t){return{"pi-plus":i,"pi-minus":t}};function ele(i,t){if(1&i){const e=Pi();ct(0,"span",28),mn("click",function(r){return wt(e),It(_e(3).toggle(r))}),ht()}if(2&i){const e=_e(3);ve("ngClass",ys(2,Jae,!e.node.expanded,e.node.expanded)),vr("aria-label",e.tree.togglerAriaLabel)}}function tle(i,t){1&i&&si(0,"span"),2&i&&Vr(_e(3).getIcon())}function nle(i,t){if(1&i&&(ct(0,"span"),cr(1),ht()),2&i){const e=_e(3);De(1),ds(e.node.label)}}function ile(i,t){1&i&&qi(0)}function rle(i,t){if(1&i&&(ct(0,"span"),Ze(1,ile,1,0,"ng-container",16),ht()),2&i){const e=_e(3);De(1),ve("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",Bi(2,f4,e.node))}}function sle(i,t){if(1&i&&si(0,"p-treeNode",32),2&i){const n=t.first,r=t.last;ve("node",t.$implicit)("firstChild",n)("lastChild",r)}}function ole(i,t){if(1&i&&(ct(0,"td",29)(1,"div",30),Ze(2,sle,1,3,"p-treeNode",31),ht()()),2&i){const e=_e(3);tf("display",e.node.expanded?"table-cell":"none"),De(2),ve("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const ale=function(i){return{"p-treenode-collapsed":i}},lle=function(i,t){return{"p-treenode-selectable":i,"p-highlight":t}};function cle(i,t){if(1&i){const e=Pi();ct(0,"table")(1,"tbody")(2,"tr"),Ze(3,Qae,7,6,"td",20),ct(4,"td",21)(5,"div",22),mn("click",function(r){return wt(e),It(_e(2).onNodeClick(r))})("contextmenu",function(r){return wt(e),It(_e(2).onNodeRightClick(r))})("touchend",function(){return wt(e),It(_e(2).onNodeTouchEnd())})("keydown",function(r){return wt(e),It(_e(2).onNodeKeydown(r))}),Ze(6,ele,1,5,"span",23),Ze(7,tle,1,2,"span",3),ct(8,"span",10),Ze(9,nle,2,1,"span",11),Ze(10,rle,2,4,"span",11),ht()()(),Ze(11,ole,3,4,"td",24),ht()()()}if(2&i){const e=_e(2);Vr(e.node.styleClass),De(3),ve("ngIf",!e.root),De(1),ve("ngClass",Bi(10,ale,!e.node.expanded)),De(1),ve("ngClass",ys(12,lle,e.tree.selectionMode,e.isSelected())),De(1),ve("ngIf",!e.isLeaf()),De(1),ve("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),De(2),ve("ngIf",!e.tree.getTemplateForNode(e.node)),De(1),ve("ngIf",e.tree.getTemplateForNode(e.node)),De(1),ve("ngIf",e.node.children&&e.node.expanded)}}function ule(i,t){if(1&i&&(Ze(0,Fae,1,3,"li",1),Ze(1,Kae,10,30,"li",2),Ze(2,Zae,1,3,"li",1),Ze(3,cle,12,15,"table",3)),2&i){const e=_e();ve("ngIf",e.tree.droppableNodes),De(1),ve("ngIf",!e.tree.horizontal),De(1),ve("ngIf",e.tree.droppableNodes&&e.lastChild),De(1),ve("ngIf",e.tree.horizontal)}}const hle=["filter"],dle=["scroller"],fle=["wrapper"];function ple(i,t){if(1&i&&(ct(0,"div",9),si(1,"i"),ht()),2&i){const e=_e(2);De(1),Vr("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function gle(i,t){1&i&&qi(0)}function mle(i,t){if(1&i){const e=Pi();ct(0,"div",10)(1,"input",11,12),mn("keydown.enter",function(r){return r.preventDefault()})("input",function(r){return wt(e),It(_e(2)._filter(r.target.value))}),ht(),si(3,"span",13),ht()}if(2&i){const e=_e(2);De(1),vr("placeholder",e.filterPlaceholder)}}function vle(i,t){if(1&i&&si(0,"p-treeNode",20),2&i){const e=t.$implicit,n=t.first,r=t.last,s=t.index,o=_e(2).options,l=_e(3);ve("level",e.level)("rowNode",e)("node",e.node)("firstChild",n)("lastChild",r)("index",l.getIndex(o,s))("itemSize",o.itemSize)("indentation",l.indentation)}}function yle(i,t){if(1&i&&(ct(0,"ul",18),Ze(1,vle,1,8,"p-treeNode",19),ht()),2&i){const e=_e(),n=e.options,r=e.$implicit,s=_e(3);la(n.contentStyle),ve("ngClass",n.contentStyleClass),vr("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledBy),De(1),ve("ngForOf",r)("ngForTrackBy",s.trackBy)}}function _le(i,t){1&i&&Ze(0,yle,2,7,"ul",17),2&i&&ve("ngIf",t.$implicit)}function Cle(i,t){1&i&&qi(0)}const ble=function(i){return{options:i}};function xle(i,t){if(1&i&&Ze(0,Cle,1,0,"ng-container",22),2&i){const e=t.options;ve("ngTemplateOutlet",_e(4).loaderTemplate)("ngTemplateOutletContext",Bi(2,ble,e))}}function wle(i,t){1&i&&(Hr(0),Ze(1,xle,1,4,"ng-template",21),Gr())}function Ale(i,t){if(1&i){const e=Pi();ct(0,"p-scroller",14,15),mn("onScroll",function(r){return wt(e),It(_e(2).onScroll.emit(r))})("onScrollIndexChange",function(r){return wt(e),It(_e(2).onScrollIndexChange.emit(r))})("onLazyLoad",function(r){return wt(e),It(_e(2).onLazyLoad.emit(r))}),Ze(2,_le,1,1,"ng-template",16),Ze(3,wle,2,0,"ng-container",7),ht()}if(2&i){const e=_e(2);la(Bi(7,p4,e.scrollHeight)),ve("items",e.serializedValue)("itemSize",e.virtualScrollItemSize||e._virtualNodeHeight)("lazy",e.lazy)("options",e.virtualScrollOptions),De(3),ve("ngIf",e.loaderTemplate)}}function Ile(i,t){if(1&i&&si(0,"p-treeNode",28),2&i){const n=t.first,r=t.last,s=t.index;ve("node",t.$implicit)("firstChild",n)("lastChild",r)("index",s)("level",0)}}function Sle(i,t){if(1&i&&(ct(0,"ul",26),Ze(1,Ile,1,5,"p-treeNode",27),ht()),2&i){const e=_e(3);vr("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),De(1),ve("ngForOf",e.getRootNode())("ngForTrackBy",e.trackBy)}}function Ele(i,t){if(1&i&&(Hr(0),ct(1,"div",23,24),Ze(3,Sle,2,4,"ul",25),ht(),Gr()),2&i){const e=_e(2);De(1),tf("max-height",e.scrollHeight),De(2),ve("ngIf",e.getRootNode())}}function Tle(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(3);De(1),Yh(" ",e.emptyMessageLabel," ")}}function Mle(i,t){1&i&&qi(0,null,31)}function Dle(i,t){if(1&i&&(ct(0,"div",29),Ze(1,Tle,2,1,"ng-container",30),Ze(2,Mle,2,0,"ng-container",4),ht()),2&i){const e=_e(2);De(1),ve("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),De(1),ve("ngTemplateOutlet",e.emptyMessageTemplate)}}function Lle(i,t){1&i&&qi(0)}const Ple=function(i,t,e,n){return{"p-tree p-component":!0,"p-tree-selectable":i,"p-treenode-dragover":t,"p-tree-loading":e,"p-tree-flex-scrollable":n}};function Rle(i,t){if(1&i){const e=Pi();ct(0,"div",2),mn("drop",function(r){return wt(e),It(_e().onDrop(r))})("dragover",function(r){return wt(e),It(_e().onDragOver(r))})("dragenter",function(){return wt(e),It(_e().onDragEnter())})("dragleave",function(r){return wt(e),It(_e().onDragLeave(r))}),Ze(1,ple,2,2,"div",3),Ze(2,gle,1,0,"ng-container",4),Ze(3,mle,4,1,"div",5),Ze(4,Ale,4,9,"p-scroller",6),Ze(5,Ele,4,3,"ng-container",7),Ze(6,Dle,3,3,"div",8),Ze(7,Lle,1,0,"ng-container",4),ht()}if(2&i){const e=_e();Vr(e.styleClass),ve("ngClass",Nf(11,Ple,e.selectionMode,e.dragHover,e.loading,"flex"===e.scrollHeight))("ngStyle",e.style),De(1),ve("ngIf",e.loading),De(1),ve("ngTemplateOutlet",e.headerTemplate),De(1),ve("ngIf",e.filter),De(1),ve("ngIf",e.virtualScroll),De(1),ve("ngIf",!e.virtualScroll),De(1),ve("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),De(1),ve("ngTemplateOutlet",e.footerTemplate)}}function kle(i,t){1&i&&qi(0)}function Ole(i,t){if(1&i&&(ct(0,"div",34),si(1,"i"),ht()),2&i){const e=_e(2);De(1),Vr("p-tree-loading-icon pi-spin "+e.loadingIcon)}}function Fle(i,t){if(1&i&&(ct(0,"table"),si(1,"p-treeNode",35),ht()),2&i){const e=_e(2);De(1),ve("node",e.value[0])("root",!0)}}function Nle(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(3);De(1),Yh(" ",e.emptyMessageLabel," ")}}function Ble(i,t){1&i&&qi(0,null,31)}function zle(i,t){if(1&i&&(ct(0,"div",29),Ze(1,Nle,2,1,"ng-container",30),Ze(2,Ble,2,0,"ng-container",4),ht()),2&i){const e=_e(2);De(1),ve("ngIf",!e.emptyMessageTemplate)("ngIfElse",e.emptyFilter),De(1),ve("ngTemplateOutlet",e.emptyMessageTemplate)}}function Vle(i,t){1&i&&qi(0)}const Ule=function(i){return{"p-tree p-tree-horizontal p-component":!0,"p-tree-selectable":i}};function Hle(i,t){if(1&i&&(ct(0,"div",32),Ze(1,kle,1,0,"ng-container",4),Ze(2,Ole,2,2,"div",33),Ze(3,Fle,2,2,"table",7),Ze(4,zle,3,3,"div",8),Ze(5,Vle,1,0,"ng-container",4),ht()),2&i){const e=_e();Vr(e.styleClass),ve("ngClass",Bi(9,Ule,e.selectionMode))("ngStyle",e.style),De(1),ve("ngTemplateOutlet",e.headerTemplate),De(1),ve("ngIf",e.loading),De(1),ve("ngIf",e.value&&e.value[0]),De(1),ve("ngIf",!e.loading&&(null==e.getRootNode()||0===e.getRootNode().length)),De(1),ve("ngTemplateOutlet",e.footerTemplate)}}let Gle=(()=>{class i{constructor(e){this.tree=e}ngOnInit(){this.node.parent=this.parentNode,this.parentNode&&this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value))}getIcon(){let e;return e=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children.length?this.node.expandedIcon:this.node.collapsedIcon,i.ICON_CLASS+" "+e}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(e){this.node.expanded?this.collapse(e):this.expand(e)}expand(e){this.node.expanded=!0,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeExpand.emit({originalEvent:e,node:this.node})}collapse(e){this.node.expanded=!1,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeCollapse.emit({originalEvent:e,node:this.node})}onNodeClick(e){this.tree.onNodeClick(e,this.node)}onNodeKeydown(e){13===e.which&&this.tree.onNodeClick(e,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(e){this.tree.onNodeRightClick(e,this.node)}isSelected(){return this.tree.isSelected(this.node)}onDropPoint(e,n){e.preventDefault();let r=this.tree.dragNode,l=this.tree.dragNodeTree!==this.tree||1===n||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(r,this.node,this.tree.dragNodeScope)&&l){let u={...this.createDropPointEventMetadata(n)};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index,accept:()=>{this.processPointDrop(u)}}):(this.processPointDrop(u),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:r,dropNode:this.node,index:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(e){let n=e.dropNode.parent?e.dropNode.parent.children:this.tree.value;e.dragNodeSubNodes.splice(e.dragNodeIndex,1);let r=this.index;e.position<0?(r=e.dragNodeSubNodes===n?e.dragNodeIndex>e.index?e.index:e.index-1:e.index,n.splice(r,0,e.dragNode)):(r=n.length,n.push(e.dragNode)),this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:e.dragNodeIndex})}createDropPointEventMetadata(e){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:e}}onDropPointDragOver(e){e.dataTransfer.dropEffect="move",e.preventDefault()}onDropPointDragEnter(e,n){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(n<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(e){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(e){this.tree.draggableNodes&&!1!==this.node.draggable?(e.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):e.preventDefault()}onDragStop(e){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(e){e.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(e.preventDefault(),e.stopPropagation())}onDropNode(e){if(this.tree.droppableNodes&&!1!==this.node.droppable){let n=this.tree.dragNode;if(this.tree.allowDrop(n,this.node,this.tree.dragNodeScope)){let r={...this.createDropNodeEventMetadata()};this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index,accept:()=>{this.processNodeDrop(r)}}):(this.processNodeDrop(r),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,index:this.index}))}}e.preventDefault(),e.stopPropagation(),this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(e){let n=e.dragNodeIndex;e.dragNodeSubNodes.splice(n,1),e.dropNode.children?e.dropNode.children.push(e.dragNode):e.dropNode.children=[e.dragNode],this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:n})}onDropNodeDragEnter(e){this.tree.droppableNodes&&!1!==this.node.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(e){if(this.tree.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>=Math.floor(n.top+n.height)||e.y<n.top)&&(this.draghoverNode=!1)}}onKeyDown(e){const n=e.target.parentElement.parentElement;if(!("P-TREENODE"!==n.nodeName||this.tree.contextMenu&&"block"===this.tree.contextMenu.containerViewChild.nativeElement.style.display))switch(e.which){case 40:const r=this.tree.droppableNodes?n.children[1].children[1]:n.children[0].children[1];if(r&&r.children.length>0)this.focusNode(r.children[0]);else{const s=n.nextElementSibling;if(s)this.focusNode(s);else{let o=this.findNextSiblingOfAncestor(n);o&&this.focusNode(o)}}e.preventDefault();break;case 38:if(n.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(n.previousElementSibling));else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 39:!this.node.expanded&&!this.tree.isNodeLeaf(this.node)&&this.expand(e),e.preventDefault();break;case 37:if(this.node.expanded)this.collapse(e);else{let s=this.getParentNodeElement(n);s&&this.focusNode(s)}e.preventDefault();break;case 13:this.tree.onNodeClick(e,this.node),e.preventDefault()}}findNextSiblingOfAncestor(e){let n=this.getParentNodeElement(e);return n?n.nextElementSibling?n.nextElementSibling:this.findNextSiblingOfAncestor(n):null}findLastVisibleDescendant(e){const r=Array.from(e.children).find(s=>Gt.hasClass(s,"p-treenode")).children[1];return r&&r.children.length>0?this.findLastVisibleDescendant(r.children[r.children.length-1]):e}getParentNodeElement(e){const n=e.parentElement.parentElement.parentElement;return"P-TREENODE"===n.tagName?n:null}focusNode(e){this.tree.droppableNodes?e.children[1].children[0].focus():e.children[0].children[0].focus()}}return i.ICON_CLASS="p-treenode-icon ",i.\u0275fac=function(e){return new(e||i)(Qt(hs(()=>m4)))},i.\u0275cmp=Ar({type:i,selectors:[["p-treeNode"]],hostAttrs:[1,"p-element"],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:"root",index:"index",firstChild:"firstChild",lastChild:"lastChild",level:"level",indentation:"indentation",itemSize:"itemSize"},decls:1,vars:1,consts:[[3,"ngIf"],["class","p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle",4,"ngIf"],[3,"class",4,"ngIf"],[1,"p-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave"],[3,"ngClass","ngStyle"],["role","treeitem",1,"p-treenode-content",3,"draggable","ngClass","click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","keydown"],["type","button","pRipple","","tabindex","-1",1,"p-tree-toggler","p-link",3,"click"],[1,"p-tree-toggler-icon","pi","pi-fw",3,"ngClass"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[1,"p-treenode-label"],[4,"ngIf"],["class","p-treenode-children","style","display: none;","role","group",3,"display",4,"ngIf"],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon","pi",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"p-treenode-children",2,"display","none"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","itemSize","level"],["class","p-treenode-connector",4,"ngIf"],[1,"p-treenode",3,"ngClass"],["tabindex","0",1,"p-treenode-content",3,"ngClass","click","contextmenu","touchend","keydown"],["class","p-tree-toggler pi pi-fw",3,"ngClass","click",4,"ngIf"],["class","p-treenode-children-container",3,"display",4,"ngIf"],[1,"p-treenode-connector"],[1,"p-treenode-connector-table"],[3,"ngClass"],[1,"p-tree-toggler","pi","pi-fw",3,"ngClass","click"],[1,"p-treenode-children-container"],[1,"p-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(e,n){1&e&&Ze(0,ule,4,4,"ng-template",0),2&e&&ve("ngIf",n.node)},dependencies:[_o,ru,Oo,Dl,Ko,yh,i],encapsulation:2}),i})(),m4=(()=>{class i{constructor(e,n,r){this.el=e,this.dragDropService=n,this.config=r,this.layout="vertical",this.metaKeySelection=!0,this.propagateSelectionUp=!0,this.propagateSelectionDown=!0,this.loadingIcon="pi pi-spinner",this.emptyMessage="",this.filterBy="label",this.filterMode="lenient",this.lazy=!1,this.indentation=1.5,this.trackBy=(s,o)=>o,this.selectionChange=new jn,this.onNodeSelect=new jn,this.onNodeUnselect=new jn,this.onNodeExpand=new jn,this.onNodeCollapse=new jn,this.onNodeContextMenuSelect=new jn,this.onNodeDrop=new jn,this.onLazyLoad=new jn,this.onScroll=new jn,this.onScrollIndexChange=new jn,this.onFilter=new jn}get virtualNodeHeight(){return this._virtualNodeHeight}set virtualNodeHeight(e){this._virtualNodeHeight=e,console.warn("The virtualNodeHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(e=>{this.dragNodeTree=e.tree,this.dragNode=e.node,this.dragNodeSubNodes=e.subNodes,this.dragNodeIndex=e.index,this.dragNodeScope=e.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(e=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(e){e.value&&this.updateSerializedValue()}get horizontal(){return"horizontal"==this.layout}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Gc.EMPTY_MESSAGE)}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"empty":this.emptyMessageTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;default:this.templateMap[e.name]=e.template}})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(e,n,r,s){if(n&&n.length)for(let o of n){o.parent=e;const l={node:o,parent:e,level:r,visible:s&&(!e||e.expanded)};this.serializedValue.push(l),l.visible&&o.expanded&&this.serializeNodes(o,o.children,r+1,l.visible)}}onNodeClick(e,n){let r=e.target;if(!Gt.hasClass(r,"p-tree-toggler")&&!Gt.hasClass(r,"p-tree-toggler-icon")){if(this.selectionMode){if(!1===n.selectable||this.hasFilteredNodes()&&!(n=this.getNodeWithKey(n.key,this.value)))return;let s=this.findIndexInSelection(n),o=s>=0;if(this.isCheckboxSelectionMode())o?(this.propagateSelectionDown?this.propagateDown(n,!1):this.selection=this.selection.filter((l,u)=>u!=s),this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.propagateSelectionDown?this.propagateDown(n,!0):this.selection=[...this.selection||[],n],this.propagateSelectionUp&&n.parent&&this.propagateUp(n.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:n}));else if(!this.nodeTouched&&this.metaKeySelection){let u=e.metaKey||e.ctrlKey;o&&u?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((p,v)=>v!=s),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.isMultipleSelectionMode()&&(this.selection=u&&this.selection||[],this.selection=[...this.selection,n],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:e,node:n}))}else this.isSingleSelectionMode()?o?(this.selection=null,this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=n,this.onNodeSelect.emit({originalEvent:e,node:n})):o?(this.selection=this.selection.filter((u,p)=>p!=s),this.onNodeUnselect.emit({originalEvent:e,node:n})):(this.selection=[...this.selection||[],n],this.onNodeSelect.emit({originalEvent:e,node:n})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(e,n){if(this.contextMenu){let r=e.target;if(r.className&&0===r.className.indexOf("p-tree-toggler"))return;this.findIndexInSelection(n)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(n):this.selectionChange.emit([n])),this.contextMenu.show(e),this.onNodeContextMenuSelect.emit({originalEvent:e,node:n})}}findIndexInSelection(e){let n=-1;if(this.selectionMode&&this.selection)if(this.isSingleSelectionMode())n=this.selection.key&&this.selection.key===e.key||this.selection==e?0:-1;else for(let r=0;r<this.selection.length;r++){let s=this.selection[r];if(s.key&&s.key===e.key||s==e){n=r;break}}return n}syncNodeOption(e,n,r,s){const o=this.hasFilteredNodes()?this.getNodeWithKey(e.key,n):null;o&&(o[r]=s||e[r])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}getNodeWithKey(e,n){for(let r of n){if(r.key===e)return r;if(r.children){let s=this.getNodeWithKey(e,r.children);if(s)return s}}}propagateUp(e,n){if(e.children&&e.children.length){let s=0,o=!1;for(let l of e.children)this.isSelected(l)?s++:l.partialSelected&&(o=!0);if(n&&s==e.children.length)this.selection=[...this.selection||[],e],e.partialSelected=!1;else{if(!n){let l=this.findIndexInSelection(e);l>=0&&(this.selection=this.selection.filter((u,p)=>p!=l))}e.partialSelected=!!(o||s>0&&s!=e.children.length)}this.syncNodeOption(e,this.filteredNodes,"partialSelected")}let r=e.parent;r&&this.propagateUp(r,n)}propagateDown(e,n){let r=this.findIndexInSelection(e);if(n&&-1==r?this.selection=[...this.selection||[],e]:!n&&r>-1&&(this.selection=this.selection.filter((s,o)=>o!=r)),e.partialSelected=!1,this.syncNodeOption(e,this.filteredNodes,"partialSelected"),e.children&&e.children.length)for(let s of e.children)this.propagateDown(s,n)}isSelected(e){return-1!=this.findIndexInSelection(e)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(e){return 0!=e.leaf&&!(e.children&&e.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(e){return this.templateMap?e.type?this.templateMap[e.type]:this.templateMap.default:null}onDragOver(e){this.droppableNodes&&(!this.value||0===this.value.length)&&(e.dataTransfer.dropEffect="move",e.preventDefault())}onDrop(e){if(this.droppableNodes&&(!this.value||0===this.value.length)){e.preventDefault();let n=this.dragNode;if(this.allowDrop(n,null,this.dragNodeScope)){let r=this.dragNodeIndex;this.value=this.value||[],this.validateDrop?this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r,accept:()=>{this.processTreeDrop(n,r)}}):(this.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:null,index:r}),this.processTreeDrop(n,r))}}}processTreeDrop(e,n){this.dragNodeSubNodes.splice(n,1),this.value.push(e),this.dragDropService.stopDrag({node:e})}onDragEnter(){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(e){if(this.droppableNodes){let n=e.currentTarget.getBoundingClientRect();(e.x>n.left+n.width||e.x<n.left||e.y>n.top+n.height||e.y<n.top)&&(this.dragHover=!1)}}allowDrop(e,n,r){if(e){if(this.isValidDragScope(r)){let s=!0;if(n)if(e===n)s=!1;else{let o=n.parent;for(;null!=o;){if(o===e){s=!1;break}o=o.parent}}return s}return!1}return!1}isValidDragScope(e){let n=this.droppableScope;if(n){if("string"==typeof n){if("string"==typeof e)return n===e;if(e instanceof Array)return-1!=e.indexOf(n)}else if(n instanceof Array){if("string"==typeof e)return-1!=n.indexOf(e);if(e instanceof Array)for(let r of n)for(let s of e)if(r===s)return!0}return!1}return!0}_filter(e){let n=e;if(""===n)this.filteredNodes=null;else{this.filteredNodes=[];const r=this.filterBy.split(","),s=gr.removeAccents(n).toLocaleLowerCase(this.filterLocale),o="strict"===this.filterMode;for(let l of this.value){let u={...l},p={searchFields:r,filterText:s,isStrictMode:o};(o&&(this.findFilteredNodes(u,p)||this.isFilterMatched(u,p))||!o&&(this.isFilterMatched(u,p)||this.findFilteredNodes(u,p)))&&this.filteredNodes.push(u)}}this.updateSerializedValue(),this.onFilter.emit({filter:n,filteredValue:this.filteredNodes})}resetFilter(){this.filteredNodes=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value="")}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}findFilteredNodes(e,n){if(e){let r=!1;if(e.children){let s=[...e.children];e.children=[];for(let o of s){let l={...o};this.isFilterMatched(l,n)&&(r=!0,e.children.push(l))}}if(r)return e.expanded=!0,!0}}isFilterMatched(e,{searchFields:n,filterText:r,isStrictMode:s}){let o=!1;for(let l of n)gr.removeAccents(String(gr.resolveFieldData(e,l))).toLocaleLowerCase(this.filterLocale).indexOf(r)>-1&&(o=!0);return(!o||s&&!this.isNodeLeaf(e))&&(o=this.findFilteredNodes(e,{searchFields:n,filterText:r,isStrictMode:s})||o),o}getIndex(e,n){const r=e.getItemOptions;return r?r(n).index:n}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(RK,8),Qt(Mp))},i.\u0275cmp=Ar({type:i,selectors:[["p-tree"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(hle,5),is(dle,5),is(fle,5)),2&e){let r;or(r=ar())&&(n.filterViewChild=r.first),or(r=ar())&&(n.scroller=r.first),or(r=ar())&&(n.wrapperViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",selectionMode:"selectionMode",selection:"selection",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",layout:"layout",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:"draggableNodes",droppableNodes:"droppableNodes",metaKeySelection:"metaKeySelection",propagateSelectionUp:"propagateSelectionUp",propagateSelectionDown:"propagateSelectionDown",loading:"loading",loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",ariaLabel:"ariaLabel",togglerAriaLabel:"togglerAriaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:"validateDrop",filter:"filter",filterBy:"filterBy",filterMode:"filterMode",filterPlaceholder:"filterPlaceholder",filteredNodes:"filteredNodes",filterLocale:"filterLocale",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",indentation:"indentation",trackBy:"trackBy",virtualNodeHeight:"virtualNodeHeight"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange",onFilter:"onFilter"},features:[ya],decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle","drop","dragover","dragenter","dragleave"],["class","p-tree-loading-overlay p-component-overlay",4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tree-filter-container",4,"ngIf"],["styleClass","p-tree-wrapper",3,"items","style","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad",4,"ngIf"],[4,"ngIf"],["class","p-tree-empty-message",4,"ngIf"],[1,"p-tree-loading-overlay","p-component-overlay"],[1,"p-tree-filter-container"],["type","text","autocomplete","off",1,"p-tree-filter","p-inputtext","p-component",3,"keydown.enter","input"],["filter",""],[1,"p-tree-filter-icon","pi","pi-search"],["styleClass","p-tree-wrapper",3,"items","itemSize","lazy","options","onScroll","onScrollIndexChange","onLazyLoad"],["scroller",""],["pTemplate","content"],["class","p-tree-container","role","tree",3,"ngClass","style",4,"ngIf"],["role","tree",1,"p-tree-container",3,"ngClass"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation",4,"ngFor","ngForOf","ngForTrackBy"],[3,"level","rowNode","node","firstChild","lastChild","index","itemSize","indentation"],["pTemplate","loader"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-tree-wrapper"],["wrapper",""],["class","p-tree-container","role","tree",4,"ngIf"],["role","tree",1,"p-tree-container"],[3,"node","firstChild","lastChild","index","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level"],[1,"p-tree-empty-message"],[4,"ngIf","ngIfElse"],["emptyFilter",""],[3,"ngClass","ngStyle"],["class","p-tree-loading-mask p-component-overlay",4,"ngIf"],[1,"p-tree-loading-mask","p-component-overlay"],[3,"node","root"]],template:function(e,n){1&e&&(Ze(0,Rle,8,16,"div",0),Ze(1,Hle,6,11,"div",1)),2&e&&(ve("ngIf",!n.horizontal),De(1),ve("ngIf",n.horizontal))},dependencies:[_o,ru,Oo,Dl,Ko,_l,F1,Gle],styles:[".p-tree-container{margin:0;padding:0;list-style-type:none;overflow:auto}.p-treenode-children{margin:0;padding:0;list-style-type:none}.p-tree-wrapper{overflow:auto}.p-treenode-selectable{cursor:pointer;-webkit-user-select:none;user-select:none}.p-tree-toggler{cursor:pointer;-webkit-user-select:none;user-select:none;display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative;flex-shrink:0}.p-treenode-leaf>.p-treenode-content .p-tree-toggler{visibility:hidden}.p-treenode-content{display:flex;align-items:center}.p-tree-filter{width:100%}.p-tree-filter-container{position:relative;display:block;width:100%}.p-tree-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-tree-loading{position:relative;min-height:4rem}.p-tree .p-tree-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-tree-flex-scrollable{display:flex;flex:1;height:100%;flex-direction:column}.p-tree-flex-scrollable .p-tree-wrapper{flex:1}.p-tree .p-treenode-droppoint{height:4px;list-style-type:none}.p-tree .p-treenode-droppoint-active{border:0 none}.p-tree-horizontal{width:auto;padding-left:0;padding-right:0;overflow:auto}.p-tree.p-tree-horizontal table,.p-tree.p-tree-horizontal tr,.p-tree.p-tree-horizontal td{border-collapse:collapse;margin:0;padding:0;vertical-align:middle}.p-tree-horizontal .p-treenode-content{font-weight:400;padding:.4em 1em .4em .2em;display:flex;align-items:center}.p-tree-horizontal .p-treenode-parent .p-treenode-content{font-weight:400;white-space:nowrap}.p-tree.p-tree-horizontal .p-treenode{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-x scroll center center transparent;padding:.25rem 2.5rem}.p-tree.p-tree-horizontal .p-treenode.p-treenode-leaf,.p-tree.p-tree-horizontal .p-treenode.p-treenode-collapsed{padding-right:0}.p-tree.p-tree-horizontal .p-treenode-children{padding:0;margin:0}.p-tree.p-tree-horizontal .p-treenode-connector{width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-table{height:100%;width:1px}.p-tree.p-tree-horizontal .p-treenode-connector-line{background:url(data:image/gif;base64,R0lGODlhAQABAIAAALGxsf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4xLWMwMzQgNDYuMjcyOTc2LCBTYXQgSmFuIDI3IDIwMDcgMjI6Mzc6MzcgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhhcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+CiAgICAgICAgIDx4YXA6Q3JlYXRvclRvb2w+QWRvYmUgRmlyZXdvcmtzIENTMzwveGFwOkNyZWF0b3JUb29sPgogICAgICAgICA8eGFwOkNyZWF0ZURhdGU+MjAxMC0wMy0xMVQxMDoxNjo0MVo8L3hhcDpDcmVhdGVEYXRlPgogICAgICAgICA8eGFwOk1vZGlmeURhdGU+MjAxMC0wMy0xMVQxMjo0NDoxOVo8L3hhcDpNb2RpZnlEYXRlPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9naWY8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PAA6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQABwD/ACwAAAAAAQABAAACAkQBADs=) repeat-y scroll 0 0 transparent;width:1px}.p-tree.p-tree-horizontal table{height:0}.p-scroller .p-tree-container{overflow:visible}\n"],encapsulation:2}),i})(),Wle=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na,su,iv,Na,iv]}),i})();function jle(i,t){if(1&i&&si(0,"span",11),2&i){const e=_e(2).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function $le(i,t){1&i&&qi(0)}const v4=function(i){return{"p-disabled":i}},qle=function(){return{exact:!1}},y4=function(i){return{$implicit:i}};function Xle(i,t){if(1&i){const e=Pi();ct(0,"a",8),mn("click",function(r){wt(e);const s=_e().$implicit;return It(_e().onItemClick(r,s))})("keydown.enter",function(r){wt(e);const s=_e(),o=s.$implicit,l=s.index;return It(_e().onItemClick(r,o,l))}),Ze(1,jle,1,2,"span",9),Ze(2,$le,1,0,"ng-container",10),ht()}if(2&i){const e=_e().$implicit,n=_e();ve("routerLink",e.routerLink)("queryParams",e.queryParams)("ngClass",Bi(17,v4,e.disabled))("routerLinkActiveOptions",e.routerLinkActiveOptions||xa(19,qle))("target",e.target)("tooltipOptions",e.tooltipOptions)("fragment",e.fragment)("queryParamsHandling",e.queryParamsHandling)("preserveFragment",e.preserveFragment)("skipLocationChange",e.skipLocationChange)("replaceUrl",e.replaceUrl)("state",e.state),vr("id",e.id)("tabindex",e.disabled||n.readonly?null:e.tabindex?e.tabindex:"0"),De(1),ve("ngIf",e.icon&&!n.itemTemplate),De(1),ve("ngTemplateOutlet",n.itemTemplate)("ngTemplateOutletContext",Bi(20,y4,e))}}function Yle(i,t){if(1&i&&si(0,"span",11),2&i){const e=_e(2).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Kle(i,t){1&i&&qi(0)}function Zle(i,t){if(1&i){const e=Pi();ct(0,"a",12),mn("click",function(r){wt(e);const s=_e().$implicit;return It(_e().onItemClick(r,s))})("keydown.enter",function(r){wt(e);const s=_e(),o=s.$implicit,l=s.index;return It(_e().onItemClick(r,o,l))}),Ze(1,Yle,1,2,"span",9),Ze(2,Kle,1,0,"ng-container",10),ht()}if(2&i){const e=_e(),n=e.$implicit,r=e.index,s=_e();ve("tooltipPosition",n.tooltipPosition)("tooltipOptions",n.tooltipOptions)("ngClass",Bi(10,v4,n.disabled))("target",n.target),vr("href",n.url||null,$h)("id",n.id)("tabindex",n.disabled||r!==s.activeIndex&&s.readonly?null:n.tabindex?n.tabindex:"0"),De(1),ve("ngIf",n.icon&&!s.itemTemplate),De(1),ve("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",Bi(12,y4,n))}}function Qle(i,t){if(1&i){const e=Pi();ct(0,"li",5),mn("mouseenter",function(){const s=wt(e).index;return It(_e().onItemMouseEnter(s))}),Ze(1,Xle,3,22,"a",6),Ze(2,Zle,3,14,"ng-template",null,7,vc),ht()}if(2&i){const e=t.$implicit,n=t.index,r=co(3),s=_e();ve("ngClass",s.itemClass(n)),De(1),ve("ngIf",s.isClickableRouterLink(e))("ngIfElse",r)}}let Jle=(()=>{class i{constructor(e,n){this.el=e,this.cd=n,this.model=null,this.position="bottom",this.currentIndex=-3}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.itemTemplate=e.template})}onListMouseLeave(){this.currentIndex=-3,this.cd.markForCheck()}onItemMouseEnter(e){this.currentIndex=e,this.cd.markForCheck()}onItemClick(e,n){n.command&&n.command({originalEvent:e,item:n})}get containerClass(){return{[`p-dock p-component  p-dock-${this.position}`]:!0}}isClickableRouterLink(e){return e.routerLink&&!e.disabled}itemClass(e){return{"p-dock-item":!0,"p-dock-item-second-prev":this.currentIndex-2===e,"p-dock-item-prev":this.currentIndex-1===e,"p-dock-item-current":this.currentIndex===e,"p-dock-item-next":this.currentIndex+1===e,"p-dock-item-second-next":this.currentIndex+2===e}}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-dock"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",model:"model",position:"position"},decls:5,vars:6,consts:[[3,"ngClass","ngStyle"],[1,"p-dock-list-container"],["role","menu",1,"p-dock-list",3,"mouseleave"],["list",""],[3,"ngClass","mouseenter",4,"ngFor","ngForOf"],[3,"ngClass","mouseenter"],["pRipple","","class","p-dock-action","role","menuitem","pTooltip","",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter",4,"ngIf","ngIfElse"],["elseBlock",""],["pRipple","","role","menuitem","pTooltip","",1,"p-dock-action",3,"routerLink","queryParams","ngClass","routerLinkActiveOptions","target","tooltipOptions","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","keydown.enter"],["class","p-dock-action-icon",3,"ngClass","ngStyle",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-dock-action-icon",3,"ngClass","ngStyle"],["role","menuitem","pRipple","","pTooltip","",1,"p-dock-action",3,"tooltipPosition","tooltipOptions","ngClass","target","click","keydown.enter"]],template:function(e,n){1&e&&(ct(0,"div",0)(1,"div",1)(2,"ul",2,3),mn("mouseleave",function(){return n.onListMouseLeave()}),Ze(4,Qle,4,3,"li",4),ht()()()),2&e&&(Vr(n.styleClass),ve("ngClass",n.containerClass)("ngStyle",n.style),vr("id",n.id),De(4),ve("ngForOf",n.model))},dependencies:[_o,ru,Oo,Dl,Ko,QC,yh,s_],styles:[".p-dock{position:absolute;z-index:1;display:flex;justify-content:center;align-items:center;pointer-events:none}.p-dock-list-container{display:flex;pointer-events:auto}.p-dock-list{margin:0;padding:0;list-style:none;display:flex;align-items:center;justify-content:center}.p-dock-item{transition:all .2s cubic-bezier(.4,0,.2,1);will-change:transform}.p-dock-action{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;cursor:default}.p-dock-item-second-prev,.p-dock-item-second-next{transform:scale(1.2)}.p-dock-item-prev,.p-dock-item-next{transform:scale(1.4)}.p-dock-item-current{transform:scale(1.6);z-index:1}.p-dock-top{left:0;top:0;width:100%}.p-dock-top .p-dock-item{transform-origin:center top}.p-dock-bottom{left:0;bottom:0;width:100%}.p-dock-bottom .p-dock-item{transform-origin:center bottom}.p-dock-right{right:0;top:0;height:100%}.p-dock-right .p-dock-item{transform-origin:center right}.p-dock-right .p-dock-list{flex-direction:column}.p-dock-left{left:0;top:0;height:100%}.p-dock-left .p-dock-item{transform-origin:center left}.p-dock-left .p-dock-list{flex-direction:column}\n"],encapsulation:2,changeDetection:0}),i})(),ece=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,t_,su,nv,Na,nv,t_]}),i})();const tce=["cb"],nce=function(i,t,e){return{"p-checkbox-label":!0,"p-checkbox-label-active":i,"p-disabled":t,"p-checkbox-label-focus":e}};function ice(i,t){if(1&i){const e=Pi();ct(0,"label",7),mn("click",function(r){wt(e);const s=_e(),o=co(3);return It(s.onClick(r,o,!0))}),cr(1),ht()}if(2&i){const e=_e();Vr(e.labelStyleClass),ve("ngClass",qu(5,nce,e.checked(),e.disabled,e.focused)),vr("for",e.inputId),De(1),ds(e.label)}}const rce=function(i,t,e){return{"p-checkbox p-component":!0,"p-checkbox-checked":i,"p-checkbox-disabled":t,"p-checkbox-focused":e}},sce=function(i,t,e){return{"p-highlight":i,"p-disabled":t,"p-focus":e}},oce={provide:jc,useExisting:hs(()=>_4),multi:!0};let _4=(()=>{class i{constructor(e){this.cd=e,this.checkboxIcon="pi pi-check",this.trueValue=!0,this.falseValue=!1,this.onChange=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.focused=!1}onClick(e,n,r){e.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(e),r&&n.focus())}updateModel(e){let n;this.binary?(n=this.checked()?this.falseValue:this.trueValue,this.model=n,this.onModelChange(n)):(n=this.checked()?this.model.filter(r=>!gr.equals(r,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(n),this.model=n,this.formControl&&this.formControl.setValue(n)),this.onChange.emit({checked:n,originalEvent:e})}handleChange(e){this.readonly||this.updateModel(e)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild.nativeElement.focus()}writeValue(e){this.model=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:gr.contains(this.value,this.model)}}return i.\u0275fac=function(e){return new(e||i)(Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-checkbox"]],viewQuery:function(e,n){if(1&e&&is(tce,5),2&e){let r;or(r=ar())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[ko([oce])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(e,n){if(1&e){const r=Pi();ct(0,"div",0)(1,"div",1)(2,"input",2,3),mn("focus",function(){return n.onFocus()})("blur",function(){return n.onBlur()})("change",function(o){return n.handleChange(o)}),ht()(),ct(4,"div",4),mn("click",function(o){wt(r);const l=co(3);return It(n.onClick(o,l,!0))}),si(5,"span",5),ht()(),Ze(6,ice,2,9,"label",6)}2&e&&(Vr(n.styleClass),ve("ngStyle",n.style)("ngClass",qu(18,rce,n.checked(),n.disabled,n.focused)),De(2),ve("readonly",n.readonly)("value",n.value)("checked",n.checked())("disabled",n.disabled),vr("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-labelledby",n.ariaLabelledBy)("aria-label",n.ariaLabel)("aria-checked",n.checked())("required",n.required),De(2),ve("ngClass",qu(22,sce,n.checked(),n.disabled,n.focused)),De(1),ve("ngClass",n.checked()?n.checkboxIcon:null),De(1),ve("ngIf",n.label))},dependencies:[_o,Oo,Ko],styles:[".p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}\n"],encapsulation:2,changeDetection:0}),i})(),ace=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();function sy(){}const lce=function(){let i=0;return function(){return i++}}();function fa(i){return null===i||typeof i>"u"}function Pl(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Zo(i){return null!==i&&"[object Object]"===Object.prototype.toString.call(i)}const ou=i=>("number"==typeof i||i instanceof Number)&&isFinite(+i);function mg(i,t){return ou(i)?i:t}function ho(i,t){return typeof i>"u"?t:i}const C4=(i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Rl(i,t,e){if(i&&"function"==typeof i.call)return i.apply(e,t)}function el(i,t,e,n){let r,s,o;if(Pl(i))if(s=i.length,n)for(r=s-1;r>=0;r--)t.call(e,i[r],r);else for(r=0;r<s;r++)t.call(e,i[r],r);else if(Zo(i))for(o=Object.keys(i),s=o.length,r=0;r<s;r++)t.call(e,i[o[r]],o[r])}function j1(i,t){let e,n,r,s;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function $1(i){if(Pl(i))return i.map($1);if(Zo(i)){const t=Object.create(null),e=Object.keys(i),n=e.length;let r=0;for(;r<n;++r)t[e[r]]=$1(i[e[r]]);return t}return i}function b4(i){return-1===["__proto__","prototype","constructor"].indexOf(i)}function uce(i,t,e,n){if(!b4(i))return;const r=t[i],s=e[i];Zo(r)&&Zo(s)?Aw(r,s,n):t[i]=$1(s)}function Aw(i,t,e){const n=Pl(t)?t:[t],r=n.length;if(!Zo(i))return i;const s=(e=e||{}).merger||uce;for(let o=0;o<r;++o){if(!Zo(t=n[o]))continue;const l=Object.keys(t);for(let u=0,p=l.length;u<p;++u)s(l[u],i,t,e)}return i}function Iw(i,t){return Aw(i,t,{merger:hce})}function hce(i,t,e){if(!b4(i))return;const n=t[i],r=e[i];Zo(n)&&Zo(r)?Iw(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=$1(r))}const x4={"":i=>i,x:i=>i.x,y:i=>i.y};function o_(i,t){return(x4[t]||(x4[t]=function dce(i){const t=function fce(i){const t=i.split("."),e=[];let n="";for(const r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}(i);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t)))(i)}function z2(i){return i.charAt(0).toUpperCase()+i.slice(1)}const vg=i=>typeof i<"u",a_=i=>"function"==typeof i,w4=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0},sc=Math.PI,ul=2*sc,gce=ul+sc,q1=Number.POSITIVE_INFINITY,mce=sc/180,$c=sc/2,Sw=sc/4,A4=2*sc/3,yg=Math.log10,sv=Math.sign;function I4(i){const t=Math.round(i);i=Ew(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(yg(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function rb(i){return!isNaN(parseFloat(i))&&isFinite(i)}function Ew(i,t,e){return Math.abs(i-t)<e}function S4(i,t,e){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function pm(i){return i*(sc/180)}function V2(i){return i*(180/sc)}function E4(i){if(!ou(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function T4(i,t){const e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n);let s=Math.atan2(n,e);return s<-.5*sc&&(s+=ul),{angle:s,distance:r}}function U2(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function _ce(i,t){return(i-t+gce)%ul-sc}function Dp(i){return(i%ul+ul)%ul}function Tw(i,t,e,n){const r=Dp(i),s=Dp(t),o=Dp(e),l=Dp(s-r),u=Dp(o-r),p=Dp(r-s),v=Dp(r-o);return r===s||r===o||n&&s===o||l>u&&p<v}function _h(i,t,e){return Math.max(t,Math.min(e,i))}function oy(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function H2(i,t,e){e=e||(o=>i[o]<t);let s,n=i.length-1,r=0;for(;n-r>1;)s=r+n>>1,e(s)?r=s:n=s;return{lo:r,hi:n}}const ay=(i,t,e,n)=>H2(i,e,n?r=>i[r][t]<=e:r=>i[r][t]<e),bce=(i,t,e)=>H2(i,e,n=>i[n][t]>=e),M4=["push","pop","shift","splice","unshift"];function D4(i,t){const e=i._chartjs;if(!e)return;const n=e.listeners,r=n.indexOf(t);-1!==r&&n.splice(r,1),!(n.length>0)&&(M4.forEach(s=>{delete i[s]}),delete i._chartjs)}function L4(i){const t=new Set;let e,n;for(e=0,n=i.length;e<n;++e)t.add(i[e]);return t.size===n?i:Array.from(t)}const P4=typeof window>"u"?function(i){return i()}:window.requestAnimationFrame;function R4(i,t,e){const n=e||(o=>Array.prototype.slice.call(o));let r=!1,s=[];return function(...o){s=n(o),r||(r=!0,P4.call(window,()=>{r=!1,i.apply(t,s)}))}}const G2=i=>"start"===i?"left":"end"===i?"right":"center",Id=(i,t,e)=>"start"===i?t:"end"===i?e:(t+e)/2;function k4(i,t,e){const n=t.length;let r=0,s=n;if(i._sorted){const{iScale:o,_parsed:l}=i,u=o.axis,{min:p,max:v,minDefined:x,maxDefined:I}=o.getUserBounds();x&&(r=_h(Math.min(ay(l,o.axis,p).lo,e?n:ay(t,u,o.getPixelForValue(p)).lo),0,n-1)),s=I?_h(Math.max(ay(l,o.axis,v,!0).hi+1,e?0:ay(t,u,o.getPixelForValue(v),!0).hi+1),r,n)-r:n-r}return{start:r,count:s}}function O4(i){const{xScale:t,yScale:e,_scaleRanges:n}=i,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=r,!0;const s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,r),s}const X1=i=>0===i||1===i,F4=(i,t,e)=>-Math.pow(2,10*(i-=1))*Math.sin((i-t)*ul/e),N4=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*ul/e)+1,Mw={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>1-Math.cos(i*$c),easeOutSine:i=>Math.sin(i*$c),easeInOutSine:i=>-.5*(Math.cos(sc*i)-1),easeInExpo:i=>0===i?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>1===i?1:1-Math.pow(2,-10*i),easeInOutExpo:i=>X1(i)?i:i<.5?.5*Math.pow(2,10*(2*i-1)):.5*(2-Math.pow(2,-10*(2*i-1))),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>X1(i)?i:F4(i,.075,.3),easeOutElastic:i=>X1(i)?i:N4(i,.075,.3),easeInOutElastic:i=>X1(i)?i:i<.5?.5*F4(2*i,.1125,.45):.5+.5*N4(2*i-1,.1125,.45),easeInBack:i=>i*i*(2.70158*i-1.70158),easeOutBack:i=>(i-=1)*i*(2.70158*i+1.70158)+1,easeInOutBack(i){let t=1.70158;return(i/=.5)<1?i*i*((1+(t*=1.525))*i-t)*.5:.5*((i-=2)*i*((1+(t*=1.525))*i+t)+2)},easeInBounce:i=>1-Mw.easeOutBounce(1-i),easeOutBounce:i=>i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375,easeInOutBounce:i=>i<.5?.5*Mw.easeInBounce(2*i):.5*Mw.easeOutBounce(2*i-1)+.5};function Dw(i){return i+.5|0}const l_=(i,t,e)=>Math.max(Math.min(i,e),t);function Lw(i){return l_(Dw(2.55*i),0,255)}function c_(i){return l_(Dw(255*i),0,255)}function ly(i){return l_(Dw(i/2.55)/100,0,1)}function B4(i){return l_(Dw(100*i),0,100)}const _g={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},W2=[..."0123456789ABCDEF"],Sce=i=>W2[15&i],Ece=i=>W2[(240&i)>>4]+W2[15&i],Y1=i=>(240&i)>>4==(15&i);const Pce=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function z4(i,t,e){const n=t*Math.min(e,1-e),r=(s,o=(s+i/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Rce(i,t,e){const n=(r,s=(r+i/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function kce(i,t,e){const n=z4(i,1,.5);let r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function j2(i){const e=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(e,n,r),o=Math.min(e,n,r),l=(s+o)/2;let u,p,v;return s!==o&&(v=s-o,p=l>.5?v/(2-s-o):v/(s+o),u=function Oce(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}(e,n,r,v,s),u=60*u+.5),[0|u,p||0,l]}function $2(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(c_)}function q2(i,t,e){return $2(z4,i,t,e)}function V4(i){return(i%360+360)%360}const U4={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},H4={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let K1;const Gce=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,X2=i=>i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055,sb=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Z1(i,t,e){if(i){let n=j2(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,0===t?360:1)),n=q2(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function G4(i,t){return i&&Object.assign(t||{},i)}function W4(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=c_(i[3]))):(t=G4(i,{r:0,g:0,b:0,a:1})).a=c_(t.a),t}function qce(i){return"r"===i.charAt(0)?function Wce(i){const t=Gce.exec(i);let n,r,s,e=255;if(t){if(t[7]!==n){const o=+t[7];e=t[8]?Lw(o):l_(255*o,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?Lw(n):l_(n,0,255)),r=255&(t[4]?Lw(r):l_(r,0,255)),s=255&(t[6]?Lw(s):l_(s,0,255)),{r:n,g:r,b:s,a:e}}}(i):function Bce(i){const t=Pce.exec(i);let n,e=255;if(!t)return;t[5]!==n&&(e=t[6]?Lw(+t[5]):c_(+t[5]));const r=V4(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function Fce(i,t,e){return $2(kce,i,t,e)}(r,s,o):"hsv"===t[1]?function Nce(i,t,e){return $2(Rce,i,t,e)}(r,s,o):q2(r,s,o),{r:n[0],g:n[1],b:n[2],a:e}}(i)}class Q1{constructor(t){if(t instanceof Q1)return t;const e=typeof t;let n;"object"===e?n=W4(t):"string"===e&&(n=function Mce(i){var e,t=i.length;return"#"===i[0]&&(4===t||5===t?e={r:255&17*_g[i[1]],g:255&17*_g[i[2]],b:255&17*_g[i[3]],a:5===t?17*_g[i[4]]:255}:(7===t||9===t)&&(e={r:_g[i[1]]<<4|_g[i[2]],g:_g[i[3]]<<4|_g[i[4]],b:_g[i[5]]<<4|_g[i[6]],a:9===t?_g[i[7]]<<4|_g[i[8]]:255})),e}(t)||function Hce(i){K1||(K1=function Uce(){const i={},t=Object.keys(H4),e=Object.keys(U4);let n,r,s,o,l;for(n=0;n<t.length;n++){for(o=l=t[n],r=0;r<e.length;r++)s=e[r],l=l.replace(s,U4[s]);s=parseInt(H4[o],16),i[l]=[s>>16&255,s>>8&255,255&s]}return i}(),K1.transparent=[0,0,0,0]);const t=K1[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}(t)||qce(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=G4(this._rgb);return t&&(t.a=ly(t.a)),t}set rgb(t){this._rgb=W4(t)}rgbString(){return this._valid?function jce(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${ly(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}(this._rgb):void 0}hexString(){return this._valid?function Lce(i){var t=(i=>Y1(i.r)&&Y1(i.g)&&Y1(i.b)&&Y1(i.a))(i)?Sce:Ece;return i?"#"+t(i.r)+t(i.g)+t(i.b)+((i,t)=>i<255?t(i):"")(i.a,t):void 0}(this._rgb):void 0}hslString(){return this._valid?function Vce(i){if(!i)return;const t=j2(i),e=t[0],n=B4(t[1]),r=B4(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${ly(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let s;const o=e===s?.5:e,l=2*o-1,u=n.a-r.a,p=((l*u==-1?l:(l+u)/(1+l*u))+1)/2;s=1-p,n.r=255&p*n.r+s*r.r+.5,n.g=255&p*n.g+s*r.g+.5,n.b=255&p*n.b+s*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function $ce(i,t,e){const n=sb(ly(i.r)),r=sb(ly(i.g)),s=sb(ly(i.b));return{r:c_(X2(n+e*(sb(ly(t.r))-n))),g:c_(X2(r+e*(sb(ly(t.g))-r))),b:c_(X2(s+e*(sb(ly(t.b))-s))),a:i.a+e*(t.a-i.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Q1(this.rgb)}alpha(t){return this._rgb.a=c_(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=Dw(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Z1(this._rgb,2,t),this}darken(t){return Z1(this._rgb,2,-t),this}saturate(t){return Z1(this._rgb,1,t),this}desaturate(t){return Z1(this._rgb,1,-t),this}rotate(t){return function zce(i,t){var e=j2(i);e[0]=V4(e[0]+t),e=q2(e),i.r=e[0],i.g=e[1],i.b=e[2]}(this._rgb,t),this}}function j4(i){return new Q1(i)}function $4(i){if(i&&"object"==typeof i){const t=i.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function q4(i){return $4(i)?i:j4(i)}function Y2(i){return $4(i)?i:j4(i).saturate(.5).darken(.1).hexString()}const y0=Object.create(null),K2=Object.create(null);function Pw(i,t){if(!t)return i;const e=t.split(".");for(let n=0,r=e.length;n<r;++n){const s=e[n];i=i[s]||(i[s]=Object.create(null))}return i}function Z2(i,t,e){return"string"==typeof t?Aw(Pw(i,t),e):Aw(Pw(i,""),t)}var ea=new class Xce{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,n)=>Y2(n.backgroundColor),this.hoverBorderColor=(e,n)=>Y2(n.borderColor),this.hoverColor=(e,n)=>Y2(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,e){return Z2(this,t,e)}get(t){return Pw(this,t)}describe(t,e){return Z2(K2,t,e)}override(t,e){return Z2(y0,t,e)}route(t,e,n,r){const s=Pw(this,t),o=Pw(this,n),l="_"+e;Object.defineProperties(s,{[l]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){const u=this[l],p=o[r];return Zo(u)?Object.assign({},p,u):ho(u,p)},set(u){this[l]=u}}})}}({_scriptable:i=>!i.startsWith("on"),_indexable:i=>"events"!==i,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function J1(i,t,e,n,r){let s=t[r];return s||(s=t[r]=i.measureText(r).width,e.push(r)),s>n&&(n=s),n}function Kce(i,t,e,n){let r=(n=n||{}).data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),i.save(),i.font=t;let o=0;const l=e.length;let u,p,v,x,I;for(u=0;u<l;u++)if(x=e[u],null!=x&&!0!==Pl(x))o=J1(i,r,s,o,x);else if(Pl(x))for(p=0,v=x.length;p<v;p++)I=x[p],null!=I&&!Pl(I)&&(o=J1(i,r,s,o,I));i.restore();const M=s.length/2;if(M>e.length){for(u=0;u<M;u++)delete r[s[u]];s.splice(0,M)}return o}function _0(i,t,e){const n=i.currentDevicePixelRatio,r=0!==e?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function X4(i,t){(t=t||i.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore()}function Q2(i,t,e,n){Y4(i,t,e,n,null)}function Y4(i,t,e,n,r){let s,o,l,u,p,v;const x=t.pointStyle,I=t.rotation,M=t.radius;let F=(I||0)*mce;if(x&&"object"==typeof x&&(s=x.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return i.save(),i.translate(e,n),i.rotate(F),i.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),void i.restore();if(!(isNaN(M)||M<=0)){switch(i.beginPath(),x){default:r?i.ellipse(e,n,r/2,M,0,0,ul):i.arc(e,n,M,0,ul),i.closePath();break;case"triangle":i.moveTo(e+Math.sin(F)*M,n-Math.cos(F)*M),F+=A4,i.lineTo(e+Math.sin(F)*M,n-Math.cos(F)*M),F+=A4,i.lineTo(e+Math.sin(F)*M,n-Math.cos(F)*M),i.closePath();break;case"rectRounded":p=.516*M,u=M-p,o=Math.cos(F+Sw)*u,l=Math.sin(F+Sw)*u,i.arc(e-o,n-l,p,F-sc,F-$c),i.arc(e+l,n-o,p,F-$c,F),i.arc(e+o,n+l,p,F,F+$c),i.arc(e-l,n+o,p,F+$c,F+sc),i.closePath();break;case"rect":if(!I){u=Math.SQRT1_2*M,v=r?r/2:u,i.rect(e-v,n-u,2*v,2*u);break}F+=Sw;case"rectRot":o=Math.cos(F)*M,l=Math.sin(F)*M,i.moveTo(e-o,n-l),i.lineTo(e+l,n-o),i.lineTo(e+o,n+l),i.lineTo(e-l,n+o),i.closePath();break;case"crossRot":F+=Sw;case"cross":o=Math.cos(F)*M,l=Math.sin(F)*M,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"star":o=Math.cos(F)*M,l=Math.sin(F)*M,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o),F+=Sw,o=Math.cos(F)*M,l=Math.sin(F)*M,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l),i.moveTo(e+l,n-o),i.lineTo(e-l,n+o);break;case"line":o=r?r/2:Math.cos(F)*M,l=Math.sin(F)*M,i.moveTo(e-o,n-l),i.lineTo(e+o,n+l);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(F)*M,n+Math.sin(F)*M)}i.fill(),t.borderWidth>0&&i.stroke()}}function Rw(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function eS(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function tS(i){i.restore()}function Zce(i,t,e,n,r){if(!t)return i.lineTo(e.x,e.y);if("middle"===r){const s=(t.x+e.x)/2;i.lineTo(s,t.y),i.lineTo(s,e.y)}else"after"===r!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function Qce(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function C0(i,t,e,n,r,s={}){const o=Pl(t)?t:[t],l=s.strokeWidth>0&&""!==s.strokeColor;let u,p;for(i.save(),i.font=r.string,function Jce(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),fa(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}(i,s),u=0;u<o.length;++u)p=o[u],l&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),fa(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(p,e,n,s.maxWidth)),i.fillText(p,e,n,s.maxWidth),eue(i,e,n,p,s),n+=r.lineHeight;i.restore()}function eue(i,t,e,n,r){if(r.strikethrough||r.underline){const s=i.measureText(n),o=t-s.actualBoundingBoxLeft,l=t+s.actualBoundingBoxRight,u=e-s.actualBoundingBoxAscent,p=e+s.actualBoundingBoxDescent,v=r.strikethrough?(u+p)/2:p;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,v),i.lineTo(l,v),i.stroke()}}function kw(i,t){const{x:e,y:n,w:r,h:s,radius:o}=t;i.arc(e+o.topLeft,n+o.topLeft,o.topLeft,-$c,sc,!0),i.lineTo(e,n+s-o.bottomLeft),i.arc(e+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,sc,$c,!0),i.lineTo(e+r-o.bottomRight,n+s),i.arc(e+r-o.bottomRight,n+s-o.bottomRight,o.bottomRight,$c,0,!0),i.lineTo(e+r,n+o.topRight),i.arc(e+r-o.topRight,n+o.topRight,o.topRight,0,-$c,!0),i.lineTo(e+o.topLeft,n)}const tue=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),nue=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function iue(i,t){const e=(""+i).match(tue);if(!e||"normal"===e[1])return 1.2*t;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100}return t*i}const rue=i=>+i||0;function J2(i,t){const e={},n=Zo(t),r=n?Object.keys(t):t,s=Zo(i)?n?o=>ho(i[o],i[t[o]]):o=>i[o]:()=>i;for(const o of r)e[o]=rue(s(o));return e}function K4(i){return J2(i,{top:"y",right:"x",bottom:"y",left:"x"})}function b0(i){return J2(i,["topLeft","topRight","bottomLeft","bottomRight"])}function Sd(i){const t=K4(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ku(i,t){let e=ho((i=i||{}).size,(t=t||ea.font).size);"string"==typeof e&&(e=parseInt(e,10));let n=ho(i.style,t.style);n&&!(""+n).match(nue)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const r={family:ho(i.family,t.family),lineHeight:iue(ho(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:ho(i.weight,t.weight),string:""};return r.string=function Yce(i){return!i||fa(i.size)||fa(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}(r),r}function Ow(i,t,e,n){let s,o,l,r=!0;for(s=0,o=i.length;s<o;++s)if(l=i[s],void 0!==l&&(void 0!==t&&"function"==typeof l&&(l=l(t),r=!1),void 0!==e&&Pl(l)&&(l=l[e%l.length],r=!1),void 0!==l))return n&&!r&&(n.cacheable=!1),l}function u_(i,t){return Object.assign(Object.create(i),t)}function eL(i,t=[""],e=i,n,r=(()=>i[0])){vg(n)||(n=tU("_fallback",i));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:e,_fallback:n,_getTarget:r,override:o=>eL([o,...i],t,e,n)};return new Proxy(s,{deleteProperty:(o,l)=>(delete o[l],delete o._keys,delete i[0][l],!0),get:(o,l)=>Q4(o,l,()=>function fue(i,t,e,n){let r;for(const s of t)if(r=tU(oue(s,i),e),vg(r))return tL(i,r)?nL(e,n,i,r):r}(l,t,i,o)),getOwnPropertyDescriptor:(o,l)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],l),getPrototypeOf:()=>Reflect.getPrototypeOf(i[0]),has:(o,l)=>nU(o).includes(l),ownKeys:o=>nU(o),set(o,l,u){const p=o._storage||(o._storage=r());return o[l]=p[l]=u,delete o._keys,!0}})}function ob(i,t,e,n){const r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:Z4(i,n),setContext:s=>ob(i,s,e,n),override:s=>ob(i.override(s),t,e,n)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete i[o],!0),get:(s,o,l)=>Q4(s,o,()=>function aue(i,t,e){const{_proxy:n,_context:r,_subProxy:s,_descriptors:o}=i;let l=n[t];return a_(l)&&o.isScriptable(t)&&(l=function lue(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_stack:l}=e;if(l.has(i))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+i);return l.add(i),t=t(s,o||n),l.delete(i),tL(i,t)&&(t=nL(r._scopes,r,i,t)),t}(t,l,i,e)),Pl(l)&&l.length&&(l=function cue(i,t,e,n){const{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=e;if(vg(s.index)&&n(i))t=t[s.index%t.length];else if(Zo(t[0])){const u=t,p=r._scopes.filter(v=>v!==u);t=[];for(const v of u){const x=nL(p,r,i,v);t.push(ob(x,s,o&&o[i],l))}}return t}(t,l,i,o.isIndexable)),tL(t,l)&&(l=ob(l,r,s&&s[t],o)),l}(s,o,l)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o),getPrototypeOf:()=>Reflect.getPrototypeOf(i),has:(s,o)=>Reflect.has(i,o),ownKeys:()=>Reflect.ownKeys(i),set:(s,o,l)=>(i[o]=l,delete s[o],!0)})}function Z4(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:a_(e)?e:()=>e,isIndexable:a_(n)?n:()=>n}}const oue=(i,t)=>i?i+z2(t):t,tL=(i,t)=>Zo(t)&&"adapters"!==i&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Q4(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];const n=e();return i[t]=n,n}function J4(i,t,e){return a_(i)?i(t,e):i}const uue=(i,t)=>!0===i?t:"string"==typeof i?o_(t,i):void 0;function hue(i,t,e,n,r){for(const s of t){const o=uue(e,s);if(o){i.add(o);const l=J4(o._fallback,e,r);if(vg(l)&&l!==e&&l!==n)return l}else if(!1===o&&vg(n)&&e!==n)return null}return!1}function nL(i,t,e,n){const r=t._rootScopes,s=J4(t._fallback,e,n),o=[...i,...r],l=new Set;l.add(n);let u=eU(l,o,e,s||e,n);return!(null===u||vg(s)&&s!==e&&(u=eU(l,o,s,u,n),null===u))&&eL(Array.from(l),[""],r,s,()=>function due(i,t,e){const n=i._getTarget();t in n||(n[t]={});const r=n[t];return Pl(r)&&Zo(e)?e:r}(t,e,n))}function eU(i,t,e,n,r){for(;e;)e=hue(i,t,e,n,r);return e}function tU(i,t){for(const e of t){if(!e)continue;const n=e[i];if(vg(n))return n}}function nU(i){let t=i._keys;return t||(t=i._keys=function pue(i){const t=new Set;for(const e of i)for(const n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}(i._scopes)),t}function iU(i,t,e,n){const{iScale:r}=i,{key:s="r"}=this._parsing,o=new Array(n);let l,u,p,v;for(l=0,u=n;l<u;++l)p=l+e,v=t[p],o[l]={r:r.parse(o_(v,s),p)};return o}const gue=Number.EPSILON||1e-14,ab=(i,t)=>t<i.length&&!i[t].skip&&i[t],rU=i=>"x"===i?"y":"x";function mue(i,t,e,n){const r=i.skip?t:i,s=t,o=e.skip?t:e,l=U2(s,r),u=U2(o,s);let p=l/(l+u),v=u/(l+u);p=isNaN(p)?0:p,v=isNaN(v)?0:v;const x=n*p,I=n*v;return{previous:{x:s.x-x*(o.x-r.x),y:s.y-x*(o.y-r.y)},next:{x:s.x+I*(o.x-r.x),y:s.y+I*(o.y-r.y)}}}function nS(i,t,e){return Math.max(Math.min(i,e),t)}function bue(i,t,e,n,r){let s,o,l,u;if(t.spanGaps&&(i=i.filter(p=>!p.skip)),"monotone"===t.cubicInterpolationMode)!function _ue(i,t="x"){const e=rU(t),n=i.length,r=Array(n).fill(0),s=Array(n);let o,l,u,p=ab(i,0);for(o=0;o<n;++o)if(l=u,u=p,p=ab(i,o+1),u){if(p){const v=p[t]-u[t];r[o]=0!==v?(p[e]-u[e])/v:0}s[o]=l?p?sv(r[o-1])!==sv(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function vue(i,t,e){const n=i.length;let r,s,o,l,u,p=ab(i,0);for(let v=0;v<n-1;++v)if(u=p,p=ab(i,v+1),u&&p){if(Ew(t[v],0,gue)){e[v]=e[v+1]=0;continue}r=e[v]/t[v],s=e[v+1]/t[v],l=Math.pow(r,2)+Math.pow(s,2),!(l<=9)&&(o=3/Math.sqrt(l),e[v]=r*o*t[v],e[v+1]=s*o*t[v])}})(i,r,s),function yue(i,t,e="x"){const n=rU(e),r=i.length;let s,o,l,u=ab(i,0);for(let p=0;p<r;++p){if(o=l,l=u,u=ab(i,p+1),!l)continue;const v=l[e],x=l[n];o&&(s=(v-o[e])/3,l[`cp1${e}`]=v-s,l[`cp1${n}`]=x-s*t[p]),u&&(s=(u[e]-v)/3,l[`cp2${e}`]=v+s,l[`cp2${n}`]=x+s*t[p])}}(i,s,t)}(i,r);else{let p=n?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)l=i[s],u=mue(p,l,i[Math.min(s+1,o-(n?0:1))%o],t.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,p=l}t.capBezierPoints&&function Cue(i,t){let e,n,r,s,o,l=Rw(i[0],t);for(e=0,n=i.length;e<n;++e)o=s,s=l,l=e<n-1&&Rw(i[e+1],t),s&&(r=i[e],o&&(r.cp1x=nS(r.cp1x,t.left,t.right),r.cp1y=nS(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=nS(r.cp2x,t.left,t.right),r.cp2y=nS(r.cp2y,t.top,t.bottom)))}(i,e)}function sU(){return typeof window<"u"&&typeof document<"u"}function iL(i){let t=i.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function iS(i,t,e){let n;return"string"==typeof i?(n=parseInt(i,10),-1!==i.indexOf("%")&&(n=n/100*t.parentNode[e])):n=i,n}const rS=i=>window.getComputedStyle(i,null),wue=["top","right","bottom","left"];function x0(i,t,e){const n={};e=e?"-"+e:"";for(let r=0;r<4;r++){const s=wue[r];n[s]=parseFloat(i[t+"-"+s+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function w0(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:n}=t,r=rS(e),s="border-box"===r.boxSizing,o=x0(r,"padding"),l=x0(r,"border","width"),{x:u,y:p,box:v}=function Iue(i,t){const e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:s}=n;let l,u,o=!1;if(((i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot))(r,s,i.target))l=r,u=s;else{const p=t.getBoundingClientRect();l=n.clientX-p.left,u=n.clientY-p.top,o=!0}return{x:l,y:u,box:o}}(i,e),x=o.left+(v&&l.left),I=o.top+(v&&l.top);let{width:M,height:F}=t;return s&&(M-=o.width+l.width,F-=o.height+l.height),{x:Math.round((u-x)/M*e.width/n),y:Math.round((p-I)/F*e.height/n)}}const rL=i=>Math.round(10*i)/10;function oU(i,t,e){const n=t||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=r/n,i.width=s/n;const o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),(i.currentDevicePixelRatio!==n||o.height!==r||o.width!==s)&&(i.currentDevicePixelRatio=n,o.height=r,o.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0)}const Tue=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return i}();function aU(i,t){const e=function xue(i,t){return rS(i).getPropertyValue(t)}(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function A0(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Mue(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:"middle"===n?e<.5?i.y:t.y:"after"===n?e<1?i.y:t.y:e>0?t.y:i.y}}function Due(i,t,e,n){const r={x:i.cp2x,y:i.cp2y},s={x:t.cp1x,y:t.cp1y},o=A0(i,r,e),l=A0(r,s,e),u=A0(s,t,e),p=A0(o,l,e),v=A0(l,u,e);return A0(p,v,e)}const lU=new Map;function Fw(i,t,e){return function Lue(i,t){t=t||{};const e=i+JSON.stringify(t);let n=lU.get(e);return n||(n=new Intl.NumberFormat(i,t),lU.set(e,n)),n}(t,e).format(i)}function lb(i,t,e){return i?function(i,t){return{x:e=>i+i+t-e,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,n)=>e-n,leftForLtr:(e,n)=>e-n}}(t,e):{x:i=>i,setWidth(i){},textAlign:i=>i,xPlus:(i,t)=>i+t,leftForLtr:(i,t)=>i}}function cU(i,t){let e,n;("ltr"===t||"rtl"===t)&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function uU(i,t){void 0!==t&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function hU(i){return"angle"===i?{between:Tw,compare:_ce,normalize:Dp}:{between:oy,compare:(t,e)=>t-e,normalize:t=>t}}function dU({start:i,end:t,count:e,loop:n,style:r}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e==0,style:r}}function fU(i,t,e){if(!e)return[i];const{property:n,start:r,end:s}=e,o=t.length,{compare:l,between:u,normalize:p}=hU(n),{start:v,end:x,loop:I,style:M}=function kue(i,t,e){const{property:n,start:r,end:s}=e,{between:o,normalize:l}=hU(n),u=t.length;let I,M,{start:p,end:v,loop:x}=i;if(x){for(p+=u,v+=u,I=0,M=u;I<M&&o(l(t[p%u][n]),r,s);++I)p--,v--;p%=u,v%=u}return v<p&&(v+=u),{start:p,end:v,loop:x,style:i.style}}(i,t,e),F=[];let ce,we,ye,j=!1,X=null;for(let Xe=v,yt=v;Xe<=x;++Xe)we=t[Xe%o],!we.skip&&(ce=p(we[n]),ce!==ye&&(j=u(ce,r,s),null===X&&(j||u(r,ye,ce)&&0!==l(r,ye))&&(X=0===l(ce,r)?Xe:yt),null!==X&&(!j||0===l(s,ce)||u(s,ye,ce))&&(F.push(dU({start:X,end:Xe,loop:I,count:o,style:M})),X=null),yt=Xe,ye=ce));return null!==X&&F.push(dU({start:X,end:x,loop:I,count:o,style:M})),F}function pU(i,t){const e=[],n=i.segments;for(let r=0;r<n.length;r++){const s=fU(n[r],i.points,t);s.length&&e.push(...s)}return e}function mU(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function zue(i,t){return t&&JSON.stringify(i)!==JSON.stringify(t)}var cy=new class Vue{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const o=e.duration;e.listeners[r].forEach(l=>l({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=P4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const s=n.items;let u,o=s.length-1,l=!1;for(;o>=0;--o)u=s[o],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(t),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,n,t,"progress")),s.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=s.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);!e||(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const vU="transparent",Uue={boolean:(i,t,e)=>e>.5?t:i,color(i,t,e){const n=q4(i||vU),r=n.valid&&q4(t||vU);return r&&r.valid?r.mix(n,e).hexString():t},number:(i,t,e)=>i+(t-i)*e};class Hue{constructor(t,e,n,r){const s=e[n];r=Ow([t.to,r,s,t.from]);const o=Ow([t.from,s,r]);this._active=!0,this._fn=t.fn||Uue[t.type||typeof o],this._easing=Mw[t.easing]||Mw.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Ow([t.to,e,r,t.from]),this._from=Ow([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,s=this._from,o=this._loop,l=this._to;let u;if(this._active=s!==l&&(o||e<n),!this._active)return this._target[r]=l,void this._notify(!0);e<0?this._target[r]=s:(u=e/n%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(s,l,u))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}}ea.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const jue=Object.keys(ea.animation);ea.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>"onProgress"!==i&&"onComplete"!==i&&"fn"!==i}),ea.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),ea.describe("animations",{_fallback:"animation"}),ea.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>0|i}}}});class yU{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Zo(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const r=t[n];if(!Zo(r))return;const s={};for(const o of jue)s[o]=r[o];(Pl(r.properties)&&r.properties||[n]).forEach(o=>{(o===n||!e.has(o))&&e.set(o,s)})})}_animateOptions(t,e){const n=e.options,r=function que(i,t){if(!t)return;let e=i.options;if(e)return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e;i.options=t}(t,n);if(!r)return[];const s=this._createAnimations(r,n);return n.$shared&&function $ue(i,t){const e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){const s=i[n[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,e){const n=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),l=Date.now();let u;for(u=o.length-1;u>=0;--u){const p=o[u];if("$"===p.charAt(0))continue;if("options"===p){r.push(...this._animateOptions(t,e));continue}const v=e[p];let x=s[p];const I=n.get(p);if(x){if(I&&x.active()){x.update(I,v,l);continue}x.cancel()}I&&I.duration?(s[p]=x=new Hue(I,t,p,v),r.push(x)):t[p]=v}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(cy.add(this._chart,n),!0):void 0}}function _U(i,t){const e=i&&i.options||{},n=e.reverse,r=void 0===e.min?t:0,s=void 0===e.max?t:0;return{start:n?s:r,end:n?r:s}}function CU(i,t){const e=[],n=i._getSortedDatasetMetas(t);let r,s;for(r=0,s=n.length;r<s;++r)e.push(n[r].index);return e}function bU(i,t,e,n={}){const r=i.keys,s="single"===n.mode;let o,l,u,p;if(null!==t){for(o=0,l=r.length;o<l;++o){if(u=+r[o],u===e){if(n.all)continue;break}p=i.values[u],ou(p)&&(s||0===t||sv(t)===sv(p))&&(t+=p)}return t}}function xU(i,t){const e=i&&i.options.stacked;return e||void 0===e&&void 0!==t.stack}function Jue(i,t,e){const n=i[t]||(i[t]={});return n[e]||(n[e]={})}function wU(i,t,e,n){for(const r of t.getMatchingVisibleMetas(n).reverse()){const s=i[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function AU(i,t){const{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:l}=n,u=s.axis,p=o.axis,v=function Zue(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}(s,o,n),x=t.length;let I;for(let M=0;M<x;++M){const F=t[M],{[u]:j,[p]:X}=F;I=(F._stacks||(F._stacks={}))[p]=Jue(r,v,j),I[l]=X,I._top=wU(I,o,!0,n.type),I._bottom=wU(I,o,!1,n.type)}}function sL(i,t){const e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function Nw(i,t){const e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(const r of t){const s=r._stacks;if(!s||void 0===s[n]||void 0===s[n][e])return;delete s[n][e]}}}const oL=i=>"reset"===i||"none"===i,IU=(i,t)=>t?i:Object.assign({},i);let ov=(()=>{class i{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=xU(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&Nw(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(I,M,F,j)=>"x"===I?M:"r"===I?j:F,o=n.xAxisID=ho(r.xAxisID,sL(e,"x")),l=n.yAxisID=ho(r.yAxisID,sL(e,"y")),u=n.rAxisID=ho(r.rAxisID,sL(e,"r")),p=n.indexAxis,v=n.iAxisID=s(p,o,l,u),x=n.vAxisID=s(p,l,o,u);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(u),n.iScale=this.getScaleForId(v),n.vScale=this.getScaleForId(x)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&D4(this._data,this),e._stacked&&Nw(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Zo(n))this._data=function Kue(i){const t=Object.keys(i),e=new Array(t.length);let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],e[n]={x:s,y:i[s]};return e}(n);else if(r!==n){if(r){D4(r,this);const s=this._cachedMeta;Nw(s),s._parsed=[]}n&&Object.isExtensible(n)&&function wce(i,t){i._chartjs?i._chartjs.listeners.push(t):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),M4.forEach(e=>{const n="_onData"+z2(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return i._chartjs.listeners.forEach(l=>{"function"==typeof l[n]&&l[n](...s)}),o}})}))}(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=n._stacked;n._stacked=xU(n.vScale,n),n.stack!==r.stack&&(s=!0,Nw(n),n.stack=r.stack),this._resyncElements(e),(s||o!==n._stacked)&&AU(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:l}=r,u=o.axis;let x,I,M,p=0===e&&n===s.length||r._sorted,v=e>0&&r._parsed[e-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,M=s;else{M=Pl(s[e])?this.parseArrayData(r,s,e,n):Zo(s[e])?this.parseObjectData(r,s,e,n):this.parsePrimitiveData(r,s,e,n);const F=()=>null===I[u]||v&&I[u]<v[u];for(x=0;x<n;++x)r._parsed[x+e]=I=M[x],p&&(F()&&(p=!1),v=I);r._sorted=p}l&&AU(this,M)}parsePrimitiveData(e,n,r,s){const{iScale:o,vScale:l}=e,u=o.axis,p=l.axis,v=o.getLabels(),x=o===l,I=new Array(s);let M,F,j;for(M=0,F=s;M<F;++M)j=M+r,I[M]={[u]:x||o.parse(v[j],j),[p]:l.parse(n[j],j)};return I}parseArrayData(e,n,r,s){const{xScale:o,yScale:l}=e,u=new Array(s);let p,v,x,I;for(p=0,v=s;p<v;++p)x=p+r,I=n[x],u[p]={x:o.parse(I[0],x),y:l.parse(I[1],x)};return u}parseObjectData(e,n,r,s){const{xScale:o,yScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v=new Array(s);let x,I,M,F;for(x=0,I=s;x<I;++x)M=x+r,F=n[M],v[x]={x:o.parse(o_(F,u),M),y:l.parse(o_(F,p),M)};return v}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const o=this._cachedMeta,l=n[e.axis];return bU({keys:CU(this.chart,!0),values:n._stacks[e.axis]},l,o.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const o=r[n.axis];let l=null===o?NaN:o;const u=s&&r._stacks[n.axis];s&&u&&(s.values=u,l=bU(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,l=s.length,u=this._getOtherScale(e),p=((i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:CU(this.chart,!0),values:null})(n,r),v={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:x,max:I}=function Que(i){const{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}(u);let M,F;function j(){F=s[M];const X=F[u.axis];return!ou(F[e.axis])||x>X||I<X}for(M=0;M<l&&(j()||(this.updateRangeFromParsed(v,e,F,p),!o));++M);if(o)for(M=l-1;M>=0;--M)if(!j()){this.updateRangeFromParsed(v,e,F,p);break}return v}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,o,l;for(s=0,o=n.length;s<o;++s)l=n[s][e.axis],ou(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=function Yue(i){let t,e,n,r;return Zo(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:!1===i}}(ho(this.options.clip,function Xue(i,t,e){if(!1===e)return!1;const n=_U(i,e),r=_U(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,l=[],u=this._drawStart||0,p=this._drawCount||s.length-u,v=this.options.drawActiveElementsOnTop;let x;for(r.dataset&&r.dataset.draw(e,o,u,p),x=u;x<u+p;++x){const I=s[x];I.hidden||(I.active&&v?l.push(I):I.draw(e,o))}for(x=0;x<l.length;++x)l[x].draw(e,o)}getStyle(e,n){const r=n?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=function the(i,t,e){return u_(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=function ehe(i,t){return u_(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s="active"===n,o=this._cachedDataOpts,l=e+"-"+n,u=o[l],p=this.enableOptionSharing&&vg(r);if(u)return IU(u,p);const v=this.chart.config,x=v.datasetElementScopeKeys(this._type,e),I=s?[`${e}Hover`,"hover",e,""]:[e,""],M=v.getOptionScopes(this.getDataset(),x),F=Object.keys(ea.elements[e]),X=v.resolveNamedOptions(M,F,()=>this.getContext(r,s),I);return X.$shared&&(X.$shared=p,o[l]=Object.freeze(IU(X,p))),X}_resolveAnimations(e,n,r){const s=this.chart,o=this._cachedDataOpts,l=`animation-${n}`,u=o[l];if(u)return u;let p;if(!1!==s.options.animation){const x=this.chart.config,I=x.datasetAnimationScopeKeys(this._type,n),M=x.getOptionScopes(this.getDataset(),I);p=x.createResolver(M,this.getContext(e,r,n))}const v=new yU(s,p&&p.animations);return p&&p._cacheable&&(o[l]=Object.freeze(v)),v}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||oL(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,r),{sharedOptions:o,includeOptions:l}}updateElement(e,n,r,s){oL(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!oL(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const o=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[u,p,v]of this._syncList)this[u](p,v);this._syncList=[];const s=r.length,o=n.length,l=Math.min(o,s);l&&this.parse(0,l),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,n,r=!0){const s=this._cachedMeta,o=s.data,l=e+n;let u;const p=v=>{for(v.length+=n,u=v.length-1;u>=l;u--)v[u]=v[u-n]};for(p(o),u=e;u<l;++u)o[u]=new this.dataElementType;this._parsing&&p(s._parsed),this.parse(e,n),r&&this.updateElements(o,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Nw(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i.defaults={},i})();function rhe(i){const t=i.iScale,e=function ihe(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let n=[];for(let r=0,s=e.length;r<s;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=L4(n.sort((r,s)=>r-s))}return i._cache.$bar}(t,i.type);let r,s,o,l,n=t._length;const u=()=>{32767===o||-32768===o||(vg(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),u();for(l=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),u();return n}function SU(i,t,e,n){return Pl(i)?function ahe(i,t,e,n){const r=e.parse(i[0],n),s=e.parse(i[1],n),o=Math.min(r,s),l=Math.max(r,s);let u=o,p=l;Math.abs(o)>Math.abs(l)&&(u=l,p=o),t[e.axis]=p,t._custom={barStart:u,barEnd:p,start:r,end:s,min:o,max:l}}(i,t,e,n):t[e.axis]=e.parse(i,n),t}function EU(i,t,e,n){const r=i.iScale,s=i.vScale,o=r.getLabels(),l=r===s,u=[];let p,v,x,I;for(p=e,v=e+n;p<v;++p)I=t[p],x={},x[r.axis]=l||r.parse(o[p],p),u.push(SU(I,x,s,p));return u}function aL(i){return i&&void 0!==i.barStart&&void 0!==i.barEnd}function uhe(i,t,e,n){let r=t.borderSkipped;const s={};if(!r)return void(i.borderSkipped=s);if(!0===r)return void(i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:l,reverse:u,top:p,bottom:v}=function che(i){let t,e,n,r,s;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:n,reverse:t,top:r,bottom:s}}(i);"middle"===r&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=p:(e._bottom||0)===n?r=v:(s[TU(v,o,l,u)]=!0,r=p)),s[TU(r,o,l,u)]=!0,i.borderSkipped=s}function TU(i,t,e,n){return n?(i=function hhe(i,t,e){return i===t?e:i===e?t:i}(i,t,e),i=MU(i,e,t)):i=MU(i,t,e),i}function MU(i,t,e){return"start"===i?t:"end"===i?e:i}function dhe(i,{inflateAmount:t},e){i.inflateAmount="auto"===t?1===e?.33:0:t}ov.prototype.datasetElementType=null,ov.prototype.dataElementType=null;let fhe=(()=>{class i extends ov{parsePrimitiveData(e,n,r,s){return EU(e,n,r,s)}parseArrayData(e,n,r,s){return EU(e,n,r,s)}parseObjectData(e,n,r,s){const{iScale:o,vScale:l}=e,{xAxisKey:u="x",yAxisKey:p="y"}=this._parsing,v="x"===o.axis?u:p,x="x"===l.axis?u:p,I=[];let M,F,j,X;for(M=r,F=r+s;M<F;++M)X=n[M],j={},j[o.axis]=o.parse(o_(X,v),M),I.push(SU(o_(X,x),j,l,M));return I}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);const o=r._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:s}=n,o=this.getParsed(e),l=o._custom,u=aL(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){const o="reset"===s,{index:l,_cachedMeta:{vScale:u}}=this,p=u.getBasePixel(),v=u.isHorizontal(),x=this._getRuler(),{sharedOptions:I,includeOptions:M}=this._getSharedOptions(n,s);for(let F=n;F<n+r;F++){const j=this.getParsed(F),X=o||fa(j[u.axis])?{base:p,head:p}:this._calculateBarValuePixels(F),ce=this._calculateBarIndexPixels(F,x),we=(j._stacks||{})[u.axis],ye={horizontal:v,base:X.base,enableBorderRadius:!we||aL(j._custom)||l===we._top||l===we._bottom,x:v?X.head:ce.center,y:v?ce.center:X.head,height:v?ce.size:Math.abs(X.size),width:v?Math.abs(X.size):ce.size};M&&(ye.options=I||this.resolveDataElementOptions(F,e[F].active?"active":s));const Ae=ye.options||e[F].options;uhe(ye,Ae,we,l),dhe(ye,Ae,x.ratio),this.updateElement(e[F],F,ye,s)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(p=>p.controller.options.grouped),o=r.options.stacked,l=[],u=p=>{const v=p.controller.getParsed(n),x=v&&v[p.vScale.axis];if(fa(x)||isNaN(x))return!0};for(const p of s)if((void 0===n||!u(p))&&((!1===o||-1===l.indexOf(p.stack)||void 0===o&&void 0===p.stack)&&l.push(p.stack),p.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const s=this._getStacks(e,r),o=void 0!==n?s.indexOf(n):-1;return-1===o?s.length-1:o}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,s=[];let o,l;for(o=0,l=n.data.length;o<l;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const u=e.barThickness;return{min:u||rhe(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r},options:{base:s,minBarLength:o}}=this,l=s||0,u=this.getParsed(e),p=u._custom,v=aL(p);let F,j,x=u[n.axis],I=0,M=r?this.applyStack(n,u,r):x;M!==x&&(I=M-x,M=x),v&&(x=p.barStart,M=p.barEnd-p.barStart,0!==x&&sv(x)!==sv(p.barEnd)&&(I=0),I+=x);const X=fa(s)||v?I:s;let ce=n.getPixelForValue(X);if(F=this.chart.getDataVisibility(e)?n.getPixelForValue(I+M):ce,j=F-ce,Math.abs(j)<o){j=function lhe(i,t,e){return 0!==i?sv(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}(j,n,l)*o,x===l&&(ce-=j/2);const we=n.getPixelForDecimal(0),ye=n.getPixelForDecimal(1),Ae=Math.min(we,ye),We=Math.max(we,ye);ce=Math.max(Math.min(ce,We),Ae),F=ce+j}if(ce===n.getPixelForValue(l)){const we=sv(j)*n.getLineWidthForValue(l)/2;ce+=we,j-=we}return{size:j,base:ce,head:F,center:F+j/2}}_calculateBarIndexPixels(e,n){const r=n.scale,s=this.options,o=s.skipNull,l=ho(s.maxBarThickness,1/0);let u,p;if(n.grouped){const v=o?this._getStackCount(e):n.stackCount,x="flex"===s.barThickness?function ohe(i,t,e,n){const r=t.pixels,s=r[i];let o=i>0?r[i-1]:null,l=i<r.length-1?r[i+1]:null;const u=e.categoryPercentage;null===o&&(o=s-(null===l?t.end-t.start:l-s)),null===l&&(l=s+s-o);const p=s-(s-Math.min(o,l))/2*u;return{chunk:Math.abs(l-o)/2*u/n,ratio:e.barPercentage,start:p}}(e,n,s,v):function she(i,t,e,n){const r=e.barThickness;let s,o;return fa(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*n,o=1),{chunk:s/n,ratio:o,start:t.pixels[i]-s/2}}(e,n,s,v),I=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);u=x.start+x.chunk*I+x.chunk/2,p=Math.min(l,x.chunk*x.ratio)}else u=r.getPixelForValue(this.getParsed(e)[r.axis],e),p=Math.min(l,n.min*n.ratio);return{base:u-p/2,head:u+p/2,center:u,size:p}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[n.axis]&&r[o].draw(this._ctx)}}return i.id="bar",i.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},i.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},i})(),phe=(()=>{class i extends ov{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,s){const o=super.parsePrimitiveData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=this.resolveDataElementOptions(l+r).radius;return o}parseArrayData(e,n,r,s){const o=super.parseArrayData(e,n,r,s);for(let l=0;l<o.length;l++)o[l]._custom=ho(n[r+l][2],this.resolveDataElementOptions(l+r).radius);return o}parseObjectData(e,n,r,s){const o=super.parseObjectData(e,n,r,s);for(let l=0;l<o.length;l++){const u=n[r+l];o[l]._custom=ho(u&&u.r&&+u.r,this.resolveDataElementOptions(l+r).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,{xScale:r,yScale:s}=n,o=this.getParsed(e),l=r.getLabelForValue(o.x),u=s.getLabelForValue(o.y),p=o._custom;return{label:n.label,value:"("+l+", "+u+(p?", "+p:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u}=this._cachedMeta,{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,s),x=l.axis,I=u.axis;for(let M=n;M<n+r;M++){const F=e[M],j=!o&&this.getParsed(M),X={},ce=X[x]=o?l.getPixelForDecimal(.5):l.getPixelForValue(j[x]),we=X[I]=o?u.getBasePixel():u.getPixelForValue(j[I]);X.skip=isNaN(ce)||isNaN(we),v&&(X.options=p||this.resolveDataElementOptions(M,F.active?"active":s),o&&(X.options.radius=0)),this.updateElement(F,M,X,s)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==n&&(s.radius=0),s.radius+=ho(r&&r._custom,o),s}}return i.id="bubble",i.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},i.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},i})(),DU=(()=>{class i extends ov{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let l,u,o=p=>+r[p];if(Zo(r[e])){const{key:p="value"}=this._parsing;o=v=>+o_(r[v],p)}for(l=e,u=e+n;l<u;++l)s._parsed[l]=o(l)}}_getRotation(){return pm(this.options.rotation-90)}_getCircumference(){return pm(this.options.circumference)}_getRotationExtents(){let e=ul,n=-ul;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),l=s._getCircumference();e=Math.min(e,o),n=Math.max(n,o+l)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,o=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(r.width,r.height)-l)/2,0),p=Math.min(((i,t)=>"string"==typeof i&&i.endsWith("%")?parseFloat(i)/100:i/t)(this.options.cutout,u),1),v=this._getRingWeight(this.index),{circumference:x,rotation:I}=this._getRotationExtents(),{ratioX:M,ratioY:F,offsetX:j,offsetY:X}=function ghe(i,t,e){let n=1,r=1,s=0,o=0;if(t<ul){const l=i,u=l+t,p=Math.cos(l),v=Math.sin(l),x=Math.cos(u),I=Math.sin(u),M=(ye,Ae,We)=>Tw(ye,l,u,!0)?1:Math.max(Ae,Ae*e,We,We*e),F=(ye,Ae,We)=>Tw(ye,l,u,!0)?-1:Math.min(Ae,Ae*e,We,We*e),j=M(0,p,x),X=M($c,v,I),ce=F(sc,p,x),we=F(sc+$c,v,I);n=(j-ce)/2,r=(X-we)/2,s=-(j+ce)/2,o=-(X+we)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:o}}(I,x,p),ye=Math.max(Math.min((r.width-l)/M,(r.height-l)/F)/2,0),Ae=C4(this.options.radius,ye),ot=(Ae-Math.max(Ae*p,0))/this._getVisibleDatasetWeightTotal();this.offsetX=j*Ae,this.offsetY=X*Ae,s.total=this.calculateTotal(),this.outerRadius=Ae-ot*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ot*v,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/ul)}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,u=l.chartArea,x=(u.left+u.right)/2,I=(u.top+u.bottom)/2,M=o&&l.options.animation.animateScale,F=M?0:this.innerRadius,j=M?0:this.outerRadius,{sharedOptions:X,includeOptions:ce}=this._getSharedOptions(n,s);let ye,we=this._getRotation();for(ye=0;ye<n;++ye)we+=this._circumference(ye,o);for(ye=n;ye<n+r;++ye){const Ae=this._circumference(ye,o),We=e[ye],ot={x:x+this.offsetX,y:I+this.offsetY,startAngle:we,endAngle:we+Ae,circumference:Ae,outerRadius:j,innerRadius:F};ce&&(ot.options=X||this.resolveDataElementOptions(ye,We.active?"active":s)),we+=Ae,this.updateElement(We,ye,ot,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s,r=0;for(s=0;s<n.length;s++){const o=e._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ul*(Math.abs(e)/n):0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=Fw(this._cachedMeta._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,o,l,u,p;if(!e)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){l=r.getDatasetMeta(s),e=l.data,u=l.controller;break}if(!e)return 0;for(s=0,o=e.length;s<o;++s)p=u.resolveDataElementOptions(s),"inner"!==p.borderAlign&&(n=Math.max(n,p.borderWidth||0,p.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ho(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i.id="doughnut",i.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},i.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const n=": "+t.formattedValue;return Pl(e)?(e=e.slice(),e[0]+=n):e+=n,e}}}}},i})(),mhe=(()=>{class i extends ov{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=n,l=this.chart._animationsDisabled;let{start:u,count:p}=k4(n,s,l);this._drawStart=u,this._drawCount=p,O4(n)&&(u=0,p=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const v=this.resolveDatasetElementOptions(e);this.options.showLine||(v.borderWidth=0),v.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:v},e),this.updateElements(s,u,p,e)}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,{sharedOptions:x,includeOptions:I}=this._getSharedOptions(n,s),M=l.axis,F=u.axis,{spanGaps:j,segment:X}=this.options,ce=rb(j)?j:Number.POSITIVE_INFINITY,we=this.chart._animationsDisabled||o||"none"===s;let ye=n>0&&this.getParsed(n-1);for(let Ae=n;Ae<n+r;++Ae){const We=e[Ae],ot=this.getParsed(Ae),Mt=we?We:{},Xe=fa(ot[F]),yt=Mt[M]=l.getPixelForValue(ot[M],Ae),tn=Mt[F]=o||Xe?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,ot,p):ot[F],Ae);Mt.skip=isNaN(yt)||isNaN(tn)||Xe,Mt.stop=Ae>0&&Math.abs(ot[M]-ye[M])>ce,X&&(Mt.parsed=ot,Mt.raw=v.data[Ae]),I&&(Mt.options=x||this.resolveDataElementOptions(Ae,We.active?"active":s)),we||this.updateElement(We,Ae,Mt,s),ye=ot}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i.id="line",i.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},i.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},i})(),vhe=(()=>{class i extends ov{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this.chart,s=r.data.labels||[],o=Fw(this._cachedMeta._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,n,r,s){return iU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(s/2,0),u=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,n,r,s){const o="reset"===s,l=this.chart,p=l.options.animation,v=this._cachedMeta.rScale,x=v.xCenter,I=v.yCenter,M=v.getIndexAngle(0)-.5*sc;let j,F=M;const X=360/this.countVisibleElements();for(j=0;j<n;++j)F+=this._computeAngle(j,s,X);for(j=n;j<n+r;j++){const ce=e[j];let we=F,ye=F+this._computeAngle(j,s,X),Ae=l.getDataVisibility(j)?v.getDistanceFromCenterForValue(this.getParsed(j).r):0;F=ye,o&&(p.animateScale&&(Ae=0),p.animateRotate&&(we=ye=M));const We={x,y:I,innerRadius:0,outerRadius:Ae,startAngle:we,endAngle:ye,options:this.resolveDataElementOptions(j,ce.active?"active":s)};this.updateElement(ce,j,We,s)}}countVisibleElements(){let n=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?pm(this.resolveDataElementOptions(e,n).angle||r):0}}return i.id="polarArea",i.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},i.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n}}=t.legend.options;return e.labels.map((r,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,lineWidth:l.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},i})(),yhe=(()=>{class i extends DU{}return i.id="pie",i.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},i})(),_he=(()=>{class i extends ov{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return iU.bind(this)(e,n,r,s)}update(e){const n=this._cachedMeta,r=n.dataset,s=n.data||[],o=n.iScale.getLabels();if(r.points=s,"resize"!==e){const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:l},e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){const o=this._cachedMeta.rScale,l="reset"===s;for(let u=n;u<n+r;u++){const p=e[u],v=this.resolveDataElementOptions(u,p.active?"active":s),x=o.getPointPositionForValue(u,this.getParsed(u).r),I=l?o.xCenter:x.x,M=l?o.yCenter:x.y,F={x:I,y:M,angle:x.angle,skip:isNaN(I)||isNaN(M),options:v};this.updateElement(p,u,F,s)}}}return i.id="radar",i.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},i.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},i})();class gm{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return rb(this.x)&&rb(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}}gm.defaults={},gm.defaultRoutes=void 0;const LU={values:i=>Pl(i)?i:""+i,numeric(i,t,e){if(0===i)return"0";const n=this.chart.options.locale;let r,s=i;if(e.length>1){const p=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(p<1e-4||p>1e15)&&(r="scientific"),s=function Che(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}(i,e)}const o=yg(Math.abs(s)),l=Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),Fw(i,n,u)},logarithmic(i,t,e){if(0===i)return"0";const n=i/Math.pow(10,Math.floor(yg(i)));return 1===n||2===n||5===n?LU.numeric.call(this,i,t,e):""}};var sS={formatters:LU};function oS(i,t,e,n,r){const s=ho(n,0),o=Math.min(ho(r,i.length),i.length);let u,p,v,l=0;for(e=Math.ceil(e),r&&(u=r-n,e=u/Math.floor(u/e)),v=s;v<0;)l++,v=Math.round(s+l*e);for(p=Math.max(s,0);p<o;p++)p===v&&(t.push(i[p]),l++,v=Math.round(s+l*e))}ea.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,t)=>t.lineWidth,tickColor:(i,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),ea.route("scale.ticks","color","","color"),ea.route("scale.grid","color","","borderColor"),ea.route("scale.grid","borderColor","","borderColor"),ea.route("scale.title","color","","color"),ea.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&"callback"!==i&&"parser"!==i,_indexable:i=>"borderDash"!==i&&"tickBorderDash"!==i}),ea.describe("scales",{_fallback:"scale"}),ea.describe("scale.ticks",{_scriptable:i=>"backdropPadding"!==i&&"callback"!==i,_indexable:i=>"backdropPadding"!==i});const PU=(i,t,e)=>"top"===t||"left"===t?i[t]+e:i[t]-e;function RU(i,t){const e=[],n=i.length/t,r=i.length;let s=0;for(;s<r;s+=n)e.push(i[Math.floor(s)]);return e}function The(i,t,e){const n=i.ticks.length,r=Math.min(t,n-1),s=i._startPixel,o=i._endPixel,l=1e-6;let p,u=i.getPixelForTick(r);if(!(e&&(p=1===n?Math.max(u-s,o-u):0===t?(i.getPixelForTick(1)-u)/2:(u-i.getPixelForTick(r-1))/2,u+=r<t?p:-p,u<s-l||u>o+l)))return u}function Bw(i){return i.drawTicks?i.tickLength:0}function kU(i,t){if(!i.display)return 0;const e=Ku(i.font,t),n=Sd(i.padding);return(Pl(i.text)?i.text.length:1)*e.lineHeight+n.height}function Phe(i,t,e){let n=G2(i);return(e&&"right"!==t||!e&&"right"===t)&&(n=(i=>"left"===i?"right":"right"===i?"left":i)(n)),n}class I0 extends gm{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=mg(t,Number.POSITIVE_INFINITY),e=mg(e,Number.NEGATIVE_INFINITY),n=mg(n,Number.POSITIVE_INFINITY),r=mg(r,Number.NEGATIVE_INFINITY),{min:mg(t,n),max:mg(e,r),minDefined:ou(t),maxDefined:ou(e)}}getMinMax(t){let o,{min:e,max:n,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:e,max:n};const l=this.getMatchingVisibleMetas();for(let u=0,p=l.length;u<p;++u)o=l[u].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(n=Math.max(n,o.max));return e=s&&e>n?n:e,n=r&&e>n?e:n,{min:mg(e,mg(n,e)),max:mg(n,mg(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Rl(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function sue(i,t,e){const{min:n,max:r}=i,s=C4(t,(r-n)/2),o=(l,u)=>e&&0===l?0:l+u;return{min:o(n,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?RU(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function bhe(i,t){const e=i.options.ticks,n=e.maxTicksLimit||function xhe(i){const t=i.options.offset,e=i._tickSize();return Math.floor(Math.min(i._length/e+(t?0:1),i._maxLength/e))}(i),r=e.major.enabled?function Ahe(i){const t=[];let e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}(t):[],s=r.length,o=r[0],l=r[s-1],u=[];if(s>n)return function Ihe(i,t,e,n){let o,r=0,s=e[0];for(n=Math.ceil(n),o=0;o<i.length;o++)o===s&&(t.push(i[o]),r++,s=e[r*n])}(t,u,r,s/n),u;const p=function whe(i,t,e){const n=function She(i){const t=i.length;let e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}(i),r=t.length/e;if(!n)return Math.max(r,1);const s=function vce(i){const t=[],e=Math.sqrt(i);let n;for(n=1;n<e;n++)i%n==0&&(t.push(n),t.push(i/n));return e===(0|e)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}(n);for(let o=0,l=s.length-1;o<l;o++){const u=s[o];if(u>r)return u}return Math.max(r,1)}(r,t,n);if(s>0){let v,x;const I=s>1?Math.round((l-o)/(s-1)):null;for(oS(t,u,p,fa(I)?0:o-I,o),v=0,x=s-1;v<x;v++)oS(t,u,p,r[v],r[v+1]);return oS(t,u,p,l,fa(I)?t.length:l+I),u}return oS(t,u,p),u}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,n,t=this.options.reverse;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Rl(this.options.afterUpdate,[this])}beforeSetDimensions(){Rl(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Rl(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Rl(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Rl(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.label=Rl(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){Rl(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Rl(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=this.ticks.length,r=e.minRotation||0,s=e.maxRotation;let l,u,p,o=r;if(!this._isVisible()||!e.display||r>=s||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const v=this._getLabelSizes(),x=v.widest.width,I=v.highest.height,M=_h(this.chart.width-x,0,this.maxWidth);l=t.offset?this.maxWidth/n:M/(n-1),x+6>l&&(l=M/(n-(t.offset?.5:1)),u=this.maxHeight-Bw(t.grid)-e.padding-kU(t.title,this.chart.options.font),p=Math.sqrt(x*x+I*I),o=V2(Math.min(Math.asin(_h((v.highest.height+6)/l,-1,1)),Math.asin(_h(u/p,-1,1))-Math.asin(_h(I/p,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Rl(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Rl(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const u=kU(r,e.options.font);if(l?(t.width=this.maxWidth,t.height=Bw(s)+u):(t.height=this.maxHeight,t.width=Bw(s)+u),n.display&&this.ticks.length){const{first:p,last:v,widest:x,highest:I}=this._getLabelSizes(),M=2*n.padding,F=pm(this.labelRotation),j=Math.cos(F),X=Math.sin(F);l?t.height=Math.min(this.maxHeight,t.height+(n.mirror?0:X*x.width+j*I.height)+M):t.width=Math.min(this.maxWidth,t.width+(n.mirror?0:j*x.width+X*I.height)+M),this._calculatePadding(p,v,X,j)}}this._handleMargins(),l?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:s,padding:o},position:l}=this.options,u=0!==this.labelRotation,p="top"!==l&&"x"===this.axis;if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let I=0,M=0;u?p?(I=r*t.width,M=n*e.height):(I=n*t.height,M=r*e.width):"start"===s?M=e.width:"end"===s?I=t.width:"inner"!==s&&(I=t.width/2,M=e.width/2),this.paddingLeft=Math.max((I-v+o)*this.width/(this.width-v),0),this.paddingRight=Math.max((M-x+o)*this.width/(this.width-x),0)}else{let v=e.height/2,x=t.height/2;"start"===s?(v=0,x=t.height):"end"===s&&(v=e.height,x=0),this.paddingTop=v+o,this.paddingBottom=x+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Rl(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)fa(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=RU(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length)}return t}_computeLabelSizes(t,e){const{ctx:n,_longestTextCache:r}=this,s=[],o=[];let p,v,x,I,M,F,j,X,ce,we,ye,l=0,u=0;for(p=0;p<e;++p){if(I=t[p].label,M=this._resolveTickFontOptions(p),n.font=F=M.string,j=r[F]=r[F]||{data:{},gc:[]},X=M.lineHeight,ce=we=0,fa(I)||Pl(I)){if(Pl(I))for(v=0,x=I.length;v<x;++v)ye=I[v],!fa(ye)&&!Pl(ye)&&(ce=J1(n,j.data,j.gc,ce,ye),we+=X)}else ce=J1(n,j.data,j.gc,ce,I),we=X;s.push(ce),o.push(we),l=Math.max(ce,l),u=Math.max(we,u)}!function Mhe(i,t){el(i,e=>{const n=e.gc,r=n.length/2;let s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}(r,e);const Ae=s.indexOf(l),We=o.indexOf(u),ot=Mt=>({width:s[Mt]||0,height:o[Mt]||0});return{first:ot(0),last:ot(e-1),widest:ot(Ae),highest:ot(We),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return function Cce(i){return _h(i,-32768,32767)}(this._alignToPixels?_0(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function Lhe(i,t,e){return u_(i,{tick:e,index:t,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=function Dhe(i,t){return u_(i,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=pm(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,l=s?s.widest.width+o:0,u=s?s.highest.height+o:0;return this.isHorizontal()?u*n>l*r?l/n:u/r:u*r<l*n?u/n:l/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:s,position:o}=r,l=s.offset,u=this.isHorizontal(),v=this.ticks.length+(l?1:0),x=Bw(s),I=[],M=s.setContext(this.getContext()),F=M.drawBorder?M.borderWidth:0,j=F/2,X=function(Nn){return _0(n,Nn,F)};let ce,we,ye,Ae,We,ot,Mt,Xe,yt,tn,zn,Qn;if("top"===o)ce=X(this.bottom),ot=this.bottom-x,Xe=ce-j,tn=X(t.top)+j,Qn=t.bottom;else if("bottom"===o)ce=X(this.top),tn=t.top,Qn=X(t.bottom)-j,ot=ce+j,Xe=this.top+x;else if("left"===o)ce=X(this.right),We=this.right-x,Mt=ce-j,yt=X(t.left)+j,zn=t.right;else if("right"===o)ce=X(this.left),yt=t.left,zn=X(t.right)-j,We=ce+j,Mt=this.left+x;else if("x"===e){if("center"===o)ce=X((t.top+t.bottom)/2+.5);else if(Zo(o)){const Nn=Object.keys(o)[0];ce=X(this.chart.scales[Nn].getPixelForValue(o[Nn]))}tn=t.top,Qn=t.bottom,ot=ce+j,Xe=ot+x}else if("y"===e){if("center"===o)ce=X((t.left+t.right)/2);else if(Zo(o)){const Nn=Object.keys(o)[0];ce=X(this.chart.scales[Nn].getPixelForValue(o[Nn]))}We=ce-j,Mt=We-x,yt=t.left,zn=t.right}const Un=ho(r.ticks.maxTicksLimit,v),An=Math.max(1,Math.ceil(v/Un));for(we=0;we<v;we+=An){const Nn=s.setContext(this.getContext(we)),_n=Nn.lineWidth,Vn=Nn.color,Fn=Nn.borderDash||[],Cn=Nn.borderDashOffset,Bn=Nn.tickWidth,Wi=Nn.tickColor,wi=Nn.tickBorderDash||[],Ji=Nn.tickBorderDashOffset;ye=The(this,we,l),void 0!==ye&&(Ae=_0(n,ye,_n),u?We=Mt=yt=zn=Ae:ot=Xe=tn=Qn=Ae,I.push({tx1:We,ty1:ot,tx2:Mt,ty2:Xe,x1:yt,y1:tn,x2:zn,y2:Qn,width:_n,color:Vn,borderDash:Fn,borderDashOffset:Cn,tickWidth:Bn,tickColor:Wi,tickBorderDash:wi,tickBorderDashOffset:Ji}))}return this._ticksLength=v,this._borderValue=ce,I}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:s}=n,o=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:p,padding:v,mirror:x}=s,I=Bw(n.grid),M=I+v,F=x?-v:M,j=-pm(this.labelRotation),X=[];let ce,we,ye,Ae,We,ot,Mt,Xe,yt,tn,zn,Qn,Un="middle";if("top"===r)ot=this.bottom-F,Mt=this._getXAxisLabelAlignment();else if("bottom"===r)ot=this.top+F,Mt=this._getXAxisLabelAlignment();else if("left"===r){const Nn=this._getYAxisLabelAlignment(I);Mt=Nn.textAlign,We=Nn.x}else if("right"===r){const Nn=this._getYAxisLabelAlignment(I);Mt=Nn.textAlign,We=Nn.x}else if("x"===e){if("center"===r)ot=(t.top+t.bottom)/2+M;else if(Zo(r)){const Nn=Object.keys(r)[0];ot=this.chart.scales[Nn].getPixelForValue(r[Nn])+M}Mt=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)We=(t.left+t.right)/2-M;else if(Zo(r)){const Nn=Object.keys(r)[0];We=this.chart.scales[Nn].getPixelForValue(r[Nn])}Mt=this._getYAxisLabelAlignment(I).textAlign}"y"===e&&("start"===u?Un="top":"end"===u&&(Un="bottom"));const An=this._getLabelSizes();for(ce=0,we=l.length;ce<we;++ce){ye=l[ce],Ae=ye.label;const Nn=s.setContext(this.getContext(ce));Xe=this.getPixelForTick(ce)+s.labelOffset,yt=this._resolveTickFontOptions(ce),tn=yt.lineHeight,zn=Pl(Ae)?Ae.length:1;const _n=zn/2,Vn=Nn.color,Fn=Nn.textStrokeColor,Cn=Nn.textStrokeWidth;let Wi,Bn=Mt;if(o?(We=Xe,"inner"===Mt&&(Bn=ce===we-1?this.options.reverse?"left":"right":0===ce?this.options.reverse?"right":"left":"center"),Qn="top"===r?"near"===p||0!==j?-zn*tn+tn/2:"center"===p?-An.highest.height/2-_n*tn+tn:tn/2-An.highest.height:"near"===p||0!==j?tn/2:"center"===p?An.highest.height/2-_n*tn:An.highest.height-zn*tn,x&&(Qn*=-1)):(ot=Xe,Qn=(1-zn)*tn/2),Nn.showLabelBackdrop){const wi=Sd(Nn.backdropPadding),Ji=An.heights[ce],hr=An.widths[ce];let Is=ot+Qn-wi.top,Si=We-wi.left;switch(Un){case"middle":Is-=Ji/2;break;case"bottom":Is-=Ji}switch(Mt){case"center":Si-=hr/2;break;case"right":Si-=hr}Wi={left:Si,top:Is,width:hr+wi.width,height:Ji+wi.height,color:Nn.backdropColor}}X.push({rotation:j,label:Ae,font:yt,color:Vn,strokeColor:Fn,strokeWidth:Cn,textOffset:Qn,textAlign:Bn,textBaseline:Un,translation:[We,ot],backdrop:Wi})}return X}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-pm(this.labelRotation))return"top"===t?"left":"right";let r="center";return"start"===e.align?r="left":"end"===e.align?r="right":"inner"===e.align&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,l=t+s,u=this._getLabelSizes().widest.width;let p,v;return"left"===e?r?(v=this.right+s,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v+=u)):(v=this.right-l,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v=this.left)):"right"===e?r?(v=this.left+s,"near"===n?p="right":"center"===n?(p="center",v-=u/2):(p="left",v-=u)):(v=this.left+l,"near"===n?p="left":"center"===n?(p="center",v+=u/2):(p="right",v=this.right)):p="right",{textAlign:p,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,s,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let s,o;const l=(u,p,v)=>{!v.width||!v.color||(n.save(),n.lineWidth=v.width,n.strokeStyle=v.color,n.setLineDash(v.borderDash||[]),n.lineDashOffset=v.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(p.x,p.y),n.stroke(),n.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){const u=r[s];e.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),e.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{grid:n}}=this,r=n.setContext(this.getContext()),s=n.drawBorder?r.borderWidth:0;if(!s)return;const o=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,p,v,x;this.isHorizontal()?(u=_0(t,this.left,s)-s/2,p=_0(t,this.right,o)+o/2,v=x=l):(v=_0(t,this.top,s)-s/2,x=_0(t,this.bottom,o)+o/2,u=p=l),e.save(),e.lineWidth=r.borderWidth,e.strokeStyle=r.borderColor,e.beginPath(),e.moveTo(u,v),e.lineTo(p,x),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&eS(n,r);const s=this._labelItems||(this._labelItems=this._computeLabelItems(t));let o,l;for(o=0,l=s.length;o<l;++o){const u=s[o],p=u.font,v=u.label;u.backdrop&&(n.fillStyle=u.backdrop.color,n.fillRect(u.backdrop.left,u.backdrop.top,u.backdrop.width,u.backdrop.height)),C0(n,v,0,u.textOffset,p,u)}r&&tS(n)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const s=Ku(n.font),o=Sd(n.padding),l=n.align;let u=s.lineHeight/2;"bottom"===e||"center"===e||Zo(e)?(u+=o.bottom,Pl(n.text)&&(u+=s.lineHeight*(n.text.length-1))):u+=o.top;const{titleX:p,titleY:v,maxWidth:x,rotation:I}=function Rhe(i,t,e,n){const{top:r,left:s,bottom:o,right:l,chart:u}=i,{chartArea:p,scales:v}=u;let I,M,F,x=0;const j=o-r,X=l-s;if(i.isHorizontal()){if(M=Id(n,s,l),Zo(e)){const ce=Object.keys(e)[0];F=v[ce].getPixelForValue(e[ce])+j-t}else F="center"===e?(p.bottom+p.top)/2+j-t:PU(i,e,t);I=l-s}else{if(Zo(e)){const ce=Object.keys(e)[0];M=v[ce].getPixelForValue(e[ce])-X+t}else M="center"===e?(p.left+p.right)/2-X+t:PU(i,e,t);F=Id(n,o,r),x="left"===e?-$c:$c}return{titleX:M,titleY:F,maxWidth:I,rotation:x}}(this,u,e,l);C0(t,n.text,0,0,s,{color:n.color,maxWidth:x,rotation:I,textAlign:Phe(l,e,r),textBaseline:"middle",translation:[p,v]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=ho(t.grid&&t.grid.z,-1);return this._isVisible()&&this.draw===I0.prototype.draw?[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:e,draw:r=>{this.drawLabels(r)}}]:[{z:e,draw:r=>{this.draw(r)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let s,o;for(s=0,o=e.length;s<o;++s){const l=e[s];l[n]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){return Ku(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class aS{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function Fhe(i){return"id"in i&&"defaults"in i})(e)&&(n=this.register(e));const r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,function khe(i,t,e){const n=Aw(Object.create(null),[e?ea.get(e):{},ea.get(t),i.defaults]);ea.set(t,n),i.defaultRoutes&&function Ohe(i,t){Object.keys(t).forEach(e=>{const n=e.split("."),r=n.pop(),s=[i].concat(n).join("."),o=t[e].split("."),l=o.pop(),u=o.join(".");ea.route(s,r,u,l)})}(t,i.defaultRoutes),i.descriptors&&ea.describe(t,i.descriptors)}(t,o,n),this.override&&ea.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in ea[r]&&(delete ea[r][n],this.override&&delete y0[n])}}var av=new class Nhe{constructor(){this.controllers=new aS(ov,"datasets",!0),this.elements=new aS(gm,"elements"),this.plugins=new aS(Object,"plugins"),this.scales=new aS(I0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{const s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):el(r,o=>{const l=n||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,e,n){const r=z2(t);Rl(n["before"+r],[],n),e[t](n),Rl(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}},Bhe=Object.freeze({__proto__:null,BarController:fhe,BubbleController:phe,DoughnutController:DU,LineController:mhe,PolarAreaController:vhe,PieController:yhe,RadarController:_he,ScatterController:(()=>{class i extends ov{update(e){const n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled;let{start:o,count:l}=k4(n,r,s);if(this._drawStart=o,this._drawCount=l,O4(n)&&(o=0,l=r.length),this.options.showLine){const{dataset:u,_dataset:p}=n;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!p._decimated,u.points=r;const v=this.resolveDatasetElementOptions(e);v.segment=this.options.segment,this.updateElement(u,void 0,{animated:!s,options:v},e)}this.updateElements(r,o,l,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=av.getElement("line")),super.addElements()}updateElements(e,n,r,s){const o="reset"===s,{iScale:l,vScale:u,_stacked:p,_dataset:v}=this._cachedMeta,x=this.resolveDataElementOptions(n,s),I=this.getSharedOptions(x),M=this.includeOptions(s,I),F=l.axis,j=u.axis,{spanGaps:X,segment:ce}=this.options,we=rb(X)?X:Number.POSITIVE_INFINITY,ye=this.chart._animationsDisabled||o||"none"===s;let Ae=n>0&&this.getParsed(n-1);for(let We=n;We<n+r;++We){const ot=e[We],Mt=this.getParsed(We),Xe=ye?ot:{},yt=fa(Mt[j]),tn=Xe[F]=l.getPixelForValue(Mt[F],We),zn=Xe[j]=o||yt?u.getBasePixel():u.getPixelForValue(p?this.applyStack(u,Mt,p):Mt[j],We);Xe.skip=isNaN(tn)||isNaN(zn)||yt,Xe.stop=We>0&&Math.abs(Mt[F]-Ae[F])>we,ce&&(Xe.parsed=Mt,Xe.raw=v.data[We]),M&&(Xe.options=I||this.resolveDataElementOptions(We,ot.active?"active":s)),ye||this.updateElement(ot,We,Xe,s),Ae=Mt}this.updateSharedOptions(I,s,x)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let u=0;for(let p=n.length-1;p>=0;--p)u=Math.max(u,n[p].size(this.resolveDataElementOptions(p))/2);return u>0&&u}const r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),l=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,l)/2}}return i.id="scatter",i.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},i.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},i})()});function S0(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var zhe={_date:(()=>{class i{constructor(e){this.options=e||{}}init(e){}formats(){return S0()}parse(e,n){return S0()}format(e,n){return S0()}add(e,n,r){return S0()}diff(e,n,r){return S0()}startOf(e,n,r){return S0()}endOf(e,n){return S0()}}return i.override=function(t){Object.assign(i.prototype,t)},i})()};function Vhe(i,t,e,n){const{controller:r,data:s,_sorted:o}=i,l=r._cachedMeta.iScale;if(l&&t===l.axis&&"r"!==t&&o&&s.length){const u=l._reversePixels?bce:ay;if(!n)return u(s,t,e);if(r._sharedOptions){const p=s[0],v="function"==typeof p.getRange&&p.getRange(t);if(v){const x=u(s,t,e-v),I=u(s,t,e+v);return{lo:x.lo,hi:I.hi}}}}return{lo:0,hi:s.length-1}}function zw(i,t,e,n,r){const s=i.getSortedVisibleDatasetMetas(),o=e[t];for(let l=0,u=s.length;l<u;++l){const{index:p,data:v}=s[l],{lo:x,hi:I}=Vhe(s[l],t,o,r);for(let M=x;M<=I;++M){const F=v[M];F.skip||n(F,p,M)}}}function lL(i,t,e,n,r){const s=[];return!r&&!i.isPointInArea(t)||zw(i,e,t,function(l,u,p){!r&&!Rw(l,i.chartArea,0)||l.inRange(t.x,t.y,n)&&s.push({element:l,datasetIndex:u,index:p})},!0),s}function cL(i,t,e,n,r,s){return s||i.isPointInArea(t)?"r"!==e||n?function Ghe(i,t,e,n,r,s){let o=[];const l=function Uhe(i){const t=-1!==i.indexOf("x"),e=-1!==i.indexOf("y");return function(n,r){const s=t?Math.abs(n.x-r.x):0,o=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(e);let u=Number.POSITIVE_INFINITY;return zw(i,e,t,function p(v,x,I){const M=v.inRange(t.x,t.y,r);if(n&&!M)return;const F=v.getCenterPoint(r);if(!s&&!i.isPointInArea(F)&&!M)return;const X=l(t,F);X<u?(o=[{element:v,datasetIndex:x,index:I}],u=X):X===u&&o.push({element:v,datasetIndex:x,index:I})}),o}(i,t,e,n,r,s):function Hhe(i,t,e,n){let r=[];return zw(i,e,t,function s(o,l,u){const{startAngle:p,endAngle:v}=o.getProps(["startAngle","endAngle"],n),{angle:x}=T4(o,{x:t.x,y:t.y});Tw(x,p,v)&&r.push({element:o,datasetIndex:l,index:u})}),r}(i,t,e,r):[]}function OU(i,t,e,n,r){const s=[],o="x"===e?"inXRange":"inYRange";let l=!1;return zw(i,e,t,(u,p,v)=>{u[o](t[e],r)&&(s.push({element:u,datasetIndex:p,index:v}),l=l||u.inRange(t.x,t.y,r))}),n&&!l?[]:s}var Whe={evaluateInteractionItems:zw,modes:{index(i,t,e,n){const r=w0(t,i),s=e.axis||"x",o=e.includeInvisible||!1,l=e.intersect?lL(i,r,s,n,o):cL(i,r,s,!1,n,o),u=[];return l.length?(i.getSortedVisibleDatasetMetas().forEach(p=>{const v=l[0].index,x=p.data[v];x&&!x.skip&&u.push({element:x,datasetIndex:p.index,index:v})}),u):[]},dataset(i,t,e,n){const r=w0(t,i),s=e.axis||"xy",o=e.includeInvisible||!1;let l=e.intersect?lL(i,r,s,n,o):cL(i,r,s,!1,n,o);if(l.length>0){const u=l[0].datasetIndex,p=i.getDatasetMeta(u).data;l=[];for(let v=0;v<p.length;++v)l.push({element:p[v],datasetIndex:u,index:v})}return l},point:(i,t,e,n)=>lL(i,w0(t,i),e.axis||"xy",n,e.includeInvisible||!1),nearest:(i,t,e,n)=>cL(i,w0(t,i),e.axis||"xy",e.intersect,n,e.includeInvisible||!1),x:(i,t,e,n)=>OU(i,w0(t,i),"x",e.intersect,n),y:(i,t,e,n)=>OU(i,w0(t,i),"y",e.intersect,n)}};const FU=["left","top","right","bottom"];function Vw(i,t){return i.filter(e=>e.pos===t)}function NU(i,t){return i.filter(e=>-1===FU.indexOf(e.pos)&&e.box.axis===t)}function Uw(i,t){return i.sort((e,n)=>{const r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function BU(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function zU(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Yhe(i,t,e,n){const{pos:r,box:s}=e,o=i.maxPadding;if(!Zo(r)){e.size&&(i[r]-=e.size);const x=n[e.stack]||{size:0,count:1};x.size=Math.max(x.size,e.horizontal?s.height:s.width),e.size=x.size/x.count,i[r]+=e.size}s.getPadding&&zU(o,s.getPadding());const l=Math.max(0,t.outerWidth-BU(o,i,"left","right")),u=Math.max(0,t.outerHeight-BU(o,i,"top","bottom")),p=l!==i.w,v=u!==i.h;return i.w=l,i.h=u,e.horizontal?{same:p,other:v}:{same:v,other:p}}function Zhe(i,t){const e=t.maxPadding;return function n(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}(i?["left","right"]:["top","bottom"])}function Hw(i,t,e,n){const r=[];let s,o,l,u,p,v;for(s=0,o=i.length,p=0;s<o;++s){l=i[s],u=l.box,u.update(l.width||t.w,l.height||t.h,Zhe(l.horizontal,t));const{same:x,other:I}=Yhe(t,e,l,n);p|=x&&r.length,v=v||I,u.fullSize||r.push(l)}return p&&Hw(r,t,e,n)||v}function lS(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function VU(i,t,e,n){const r=e.padding;let{x:s,y:o}=t;for(const l of i){const u=l.box,p=n[l.stack]||{count:1,placed:0,weight:1},v=l.stackWeight/p.weight||1;if(l.horizontal){const x=t.w*v,I=p.size||u.height;vg(p.start)&&(o=p.start),u.fullSize?lS(u,r.left,o,e.outerWidth-r.right-r.left,I):lS(u,t.left+p.placed,o,x,I),p.start=o,p.placed+=x,o=u.bottom}else{const x=t.h*v,I=p.size||u.width;vg(p.start)&&(s=p.start),u.fullSize?lS(u,s,r.top,I,e.outerHeight-r.bottom-r.top):lS(u,s,t.top+p.placed,I,x),p.start=s,p.placed+=x,s=u.right}}t.x=s,t.y=o}ea.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ed={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;-1!==e&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;const r=Sd(i.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),l=function Xhe(i){const t=function jhe(i){const t=[];let e,n,r,s,o,l;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],({position:s,options:{stack:o,stackWeight:l=1}}=r),t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:l});return t}(i),e=Uw(t.filter(p=>p.box.fullSize),!0),n=Uw(Vw(t,"left"),!0),r=Uw(Vw(t,"right")),s=Uw(Vw(t,"top"),!0),o=Uw(Vw(t,"bottom")),l=NU(t,"x"),u=NU(t,"y");return{fullSize:e,leftAndTop:n.concat(s),rightAndBottom:r.concat(u).concat(o).concat(l),chartArea:Vw(t,"chartArea"),vertical:n.concat(r).concat(u),horizontal:s.concat(o).concat(l)}}(i.boxes),u=l.vertical,p=l.horizontal;el(i.boxes,j=>{"function"==typeof j.beforeLayout&&j.beforeLayout()});const v=u.reduce((j,X)=>X.box.options&&!1===X.box.options.display?j:j+1,0)||1,x=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/v,hBoxMaxHeight:o/2}),I=Object.assign({},r);zU(I,Sd(n));const M=Object.assign({maxPadding:I,w:s,h:o,x:r.left,y:r.top},r),F=function qhe(i,t){const e=function $he(i){const t={};for(const e of i){const{stack:n,pos:r,stackWeight:s}=e;if(!n||!FU.includes(r))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t;let s,o,l;for(s=0,o=i.length;s<o;++s){l=i[s];const{fullSize:u}=l.box,p=e[l.stack],v=p&&l.stackWeight/p.weight;l.horizontal?(l.width=v?v*n:u&&t.availableWidth,l.height=r):(l.width=n,l.height=v?v*r:u&&t.availableHeight)}return e}(u.concat(p),x);Hw(l.fullSize,M,x,F),Hw(u,M,x,F),Hw(p,M,x,F)&&Hw(u,M,x,F),function Khe(i){const t=i.maxPadding;function e(n){const r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}(M),VU(l.leftAndTop,M,x,F),M.x+=M.w,M.y+=M.h,VU(l.rightAndBottom,M,x,F),i.chartArea={left:M.left,top:M.top,right:M.left+M.w,bottom:M.top+M.h,height:M.h,width:M.w},el(l.chartArea,j=>{const X=j.box;Object.assign(X,i.chartArea),X.update(M.w,M.h,{left:0,top:0,right:0,bottom:0})})}};class UU{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class Qhe extends UU{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const cS="$chartjs",Jhe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},HU=i=>null===i||""===i,GU=!!Tue&&{passive:!0};function nde(i,t,e){i.canvas.removeEventListener(t,e,GU)}function uS(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function rde(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||uS(l.addedNodes,n),o=o&&!uS(l.removedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function sde(i,t,e){const n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||uS(l.removedNodes,n),o=o&&!uS(l.addedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}const Gw=new Map;let WU=0;function jU(){const i=window.devicePixelRatio;i!==WU&&(WU=i,Gw.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function lde(i,t,e){const n=i.canvas,r=n&&iL(n);if(!r)return;const s=R4((l,u)=>{const p=r.clientWidth;e(l,u),p<r.clientWidth&&e()},window),o=new ResizeObserver(l=>{const u=l[0],p=u.contentRect.width,v=u.contentRect.height;0===p&&0===v||s(p,v)});return o.observe(r),function ode(i,t){Gw.size||window.addEventListener("resize",jU),Gw.set(i,t)}(i,s),o}function uL(i,t,e){e&&e.disconnect(),"resize"===t&&function ade(i){Gw.delete(i),Gw.size||window.removeEventListener("resize",jU)}(i)}function cde(i,t,e){const n=i.canvas,r=R4(s=>{null!==i.ctx&&e(function ide(i,t){const e=Jhe[i.type]||i.type,{x:n,y:r}=w0(i,t);return{type:e,chart:t,native:i,x:void 0!==n?n:null,y:void 0!==r?r:null}}(s,i))},i,s=>{const o=s[0];return[o,o.offsetX,o.offsetY]});return function tde(i,t,e){i.addEventListener(t,e,GU)}(n,t,r),r}class ude extends UU{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function ede(i,t){const e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[cS]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",HU(r)){const s=aU(i,"width");void 0!==s&&(i.width=s)}if(HU(n))if(""===i.style.height)i.height=i.width/(t||2);else{const s=aU(i,"height");void 0!==s&&(i.height=s)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[cS])return!1;const n=e[cS].initial;["height","width"].forEach(s=>{const o=n[s];fa(o)?e.removeAttribute(s):e.setAttribute(s,o)});const r=n.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[cS],!0}addEventListener(t,e,n){this.removeEventListener(t,e),(t.$proxies||(t.$proxies={}))[e]=({attach:rde,detach:sde,resize:lde}[e]||cde)(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];r&&(({attach:uL,detach:uL,resize:uL}[e]||nde)(t,e,r),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return function Eue(i,t,e,n){const r=rS(i),s=x0(r,"margin"),o=iS(r.maxWidth,i,"clientWidth")||q1,l=iS(r.maxHeight,i,"clientHeight")||q1,u=function Sue(i,t,e){let n,r;if(void 0===t||void 0===e){const s=iL(i);if(s){const o=s.getBoundingClientRect(),l=rS(s),u=x0(l,"border","width"),p=x0(l,"padding");t=o.width-p.width-u.width,e=o.height-p.height-u.height,n=iS(l.maxWidth,s,"clientWidth"),r=iS(l.maxHeight,s,"clientHeight")}else t=i.clientWidth,e=i.clientHeight}return{width:t,height:e,maxWidth:n||q1,maxHeight:r||q1}}(i,t,e);let{width:p,height:v}=u;if("content-box"===r.boxSizing){const x=x0(r,"border","width"),I=x0(r,"padding");p-=I.width+x.width,v-=I.height+x.height}return p=Math.max(0,p-s.width),v=Math.max(0,n?Math.floor(p/n):v-s.height),p=rL(Math.min(p,o,u.maxWidth)),v=rL(Math.min(v,l,u.maxHeight)),p&&!v&&(v=rL(p/2)),{width:p,height:v}}(t,e,n,r)}isAttached(t){const e=iL(t);return!(!e||!e.isConnected)}}class dde{constructor(){this._init=[]}notify(t,e,n,r){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,n);return"afterDestroy"===e&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(const s of t){const o=s.plugin;if(!1===Rl(o[n],[e,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){fa(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=ho(n.options&&n.options.plugins,{}),s=function fde(i){const t={},e=[],n=Object.keys(av.plugins.items);for(let s=0;s<n.length;s++)e.push(av.getPlugin(n[s]));const r=i.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===e.indexOf(o)&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}(n);return!1!==r||e?function gde(i,{plugins:t,localIds:e},n,r){const s=[],o=i.getContext();for(const l of t){const u=l.id,p=pde(n[u],r);null!==p&&s.push({plugin:l,options:mde(i.config,{plugin:l,local:e[u]},p,o)})}return s}(t,s,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(s,o)=>s.filter(l=>!o.some(u=>l.plugin.id===u.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function pde(i,t){return t||!1!==i?!0===i?{}:i:null}function mde(i,{plugin:t,local:e},n,r){const s=i.pluginScopeKeys(t),o=i.getOptionScopes(n,s);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hL(i,t){return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||(ea.datasets[i]||{}).indexAxis||"x"}function dL(i,t){return"x"===i||"y"===i?i:t.axis||function _de(i){return"top"===i||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0}(t.position)||i.charAt(0).toLowerCase()}function $U(i){const t=i.options||(i.options={});t.plugins=ho(t.plugins,{}),t.scales=function Cde(i,t){const e=y0[i.type]||{scales:{}},n=t.scales||{},r=hL(i.type,t),s=Object.create(null),o=Object.create(null);return Object.keys(n).forEach(l=>{const u=n[l];if(!Zo(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const p=dL(l,u),v=function yde(i,t){return i===t?"_index_":"_value_"}(p,r),x=e.scales||{};s[p]=s[p]||l,o[l]=Iw(Object.create(null),[{axis:p},u,x[p],x[v]])}),i.data.datasets.forEach(l=>{const u=l.type||i.type,p=l.indexAxis||hL(u,t),x=(y0[u]||{}).scales||{};Object.keys(x).forEach(I=>{const M=function vde(i,t){let e=i;return"_index_"===i?e=t:"_value_"===i&&(e="x"===t?"y":"x"),e}(I,p),F=l[M+"AxisID"]||s[M]||M;o[F]=o[F]||Object.create(null),Iw(o[F],[{axis:M},n[F],x[I]])})}),Object.keys(o).forEach(l=>{const u=o[l];Iw(u,[ea.scales[u.type],ea.scale])}),o}(i,t)}function qU(i){return(i=i||{}).datasets=i.datasets||[],i.labels=i.labels||[],i}const XU=new Map,YU=new Set;function hS(i,t){let e=XU.get(i);return e||(e=t(),XU.set(i,e),YU.add(e)),e}const Ww=(i,t,e)=>{const n=o_(t,e);void 0!==n&&i.add(n)};class xde{constructor(t){this._config=function bde(i){return(i=i||{}).data=qU(i.data),$U(i),i}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=qU(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$U(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return hS(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return hS(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return hS(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return hS(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:s}=this,o=this._cachedScopes(t,n),l=o.get(e);if(l)return l;const u=new Set;e.forEach(v=>{t&&(u.add(t),v.forEach(x=>Ww(u,t,x))),v.forEach(x=>Ww(u,r,x)),v.forEach(x=>Ww(u,y0[s]||{},x)),v.forEach(x=>Ww(u,ea,x)),v.forEach(x=>Ww(u,K2,x))});const p=Array.from(u);return 0===p.length&&p.push(Object.create(null)),YU.has(e)&&o.set(e,p),p}chartOptionScopes(){const{options:t,type:e}=this;return[t,y0[e]||{},ea.datasets[e]||{},{type:e},ea,K2]}resolveNamedOptions(t,e,n,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=KU(this._resolverCache,t,r);let u=o;(function Ade(i,t){const{isScriptable:e,isIndexable:n}=Z4(i);for(const r of t){const s=e(r),o=n(r),l=(o||s)&&i[r];if(s&&(a_(l)||wde(l))||o&&Pl(l))return!0}return!1})(o,e)&&(s.$shared=!1,u=ob(o,n=a_(n)?n():n,this.createResolver(t,n,l)));for(const p of e)s[p]=u[p];return s}createResolver(t,e,n=[""],r){const{resolver:s}=KU(this._resolverCache,t,n);return Zo(e)?ob(s,e,void 0,r):s}}function KU(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));const r=e.join();let s=n.get(r);return s||(s={resolver:eL(t,e),subPrefixes:e.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,s)),s}const wde=i=>Zo(i)&&Object.getOwnPropertyNames(i).reduce((t,e)=>t||a_(i[e]),!1),Sde=["top","bottom","left","right","chartArea"];function ZU(i,t){return"top"===i||"bottom"===i||-1===Sde.indexOf(i)&&"x"===t}function QU(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function JU(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Rl(e&&e.onComplete,[i],t)}function Ede(i){const t=i.chart,e=t.options.animation;Rl(e&&e.onProgress,[i],t)}function eH(i){return sU()&&"string"==typeof i?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const dS={},tH=i=>{const t=eH(i);return Object.values(dS).filter(e=>e.canvas===t).pop()};function Tde(i,t,e){const n=Object.keys(i);for(const r of n){const s=+r;if(s>=t){const o=i[r];delete i[r],(e>0||s>t)&&(i[s+e]=o)}}}class fS{constructor(t,e){const n=this.config=new xde(e),r=eH(t),s=tH(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function hde(i){return!sU()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Qhe:ude}(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),u=l&&l.canvas,p=u&&u.height,v=u&&u.width;this.id=lce(),this.ctx=l,this.canvas=u,this.width=v,this.height=p,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new dde,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function Ace(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}(x=>this.update(x),o.resizeDelay||0),this._dataChanges=[],dS[this.id]=this,l&&u?(cy.listen(this,"complete",JU),cy.listen(this,"progress",Ede),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:s}=this;return fa(t)?e&&s?s:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():oU(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return X4(this.canvas,this.ctx),this}stop(){return cy.stop(this),this}resize(t,e){cy.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,o=this.platform.getMaximumSize(this.canvas,t,e,n.maintainAspectRatio&&this.aspectRatio),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,oU(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Rl(n.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){el(this.options.scales||{},(n,r)=>{n.id=r})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let s=[];e&&(s=s.concat(Object.keys(e).map(o=>{const l=e[o],u=dL(o,l),p="r"===u,v="x"===u;return{options:l,dposition:p?"chartArea":v?"bottom":"left",dtype:p?"radialLinear":v?"category":"linear"}}))),el(s,o=>{const l=o.options,u=l.id,p=dL(u,l),v=ho(l.type,o.dtype);(void 0===l.position||ZU(l.position,p)!==ZU(o.dposition))&&(l.position=o.dposition),r[u]=!0;let x=null;u in n&&n[u].type===v?x=n[u]:(x=new(av.getScale(v))({id:u,type:v,ctx:this.ctx,chart:this}),n[x.id]=x),x.init(l,t)}),el(r,(o,l)=>{o||delete n[l]}),el(n,o=>{Ed.configure(this,o,o.options),Ed.addBox(this,o)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((r,s)=>r.index-s.index),n>e){for(let r=e;r<n;++r)this._destroyDatasetMeta(r);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(QU("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((n,r)=>{0===e.filter(s=>s===n._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const s=e[n];let o=this.getDatasetMeta(n);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=s.indexAxis||hL(l,this.options),o.order=s.order||0,o.index=n,o.label=""+s.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const u=av.getController(l),{datasetElementType:p,dataElementType:v}=ea.datasets[l];Object.assign(u.prototype,{dataElementType:av.getElement(v),datasetElementType:p&&av.getElement(p)}),o.controller=new u(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){el(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let p=0,v=this.data.datasets.length;p<v;p++){const{controller:x}=this.getDatasetMeta(p),I=!r&&-1===s.indexOf(x);x.buildOrUpdateElements(I),o=Math.max(+x.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||el(s,p=>{p.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(QU("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){el(this.scales,t=>{Ed.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!w4(e,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:s}of e)Tde(t,r,"_removeElements"===n?-s:s)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=s=>new Set(t.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let s=1;s<e;s++)if(!w4(r,n(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ed.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],el(this.boxes,r=>{n&&"chartArea"===r.position||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let e=0,n=this.data.datasets.length;e<n;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,a_(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(cy.has(this)?this.attached&&!cy.running(this)&&cy.start(this):(this.draw(),JU({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,s;for(r=0,s=e.length;r<s;++r){const o=e[r];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,r=!n.disabled,s=this.chartArea,o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&eS(e,{left:!1===n.left?0:s.left-n.left,right:!1===n.right?this.width:s.right+n.right,top:!1===n.top?0:s.top-n.top,bottom:!1===n.bottom?this.height:s.bottom+n.bottom}),t.controller.draw(),r&&tS(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Rw(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const s=Whe.modes[e];return"function"==typeof s?s(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(s=>s&&s._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=u_(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",s=this.getDatasetMeta(t),o=s.controller._resolveAnimations(void 0,r);vg(e)?(s.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(s,{visible:n}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),cy.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),X4(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete dS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(s,o)=>{e.addEventListener(this,s,o),t[s]=o},r=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};el(this.options.events,s=>n(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(u,p)=>{e.addEventListener(this,u,p),t[u]=p},r=(u,p)=>{t[u]&&(e.removeEventListener(this,u,p),delete t[u])},s=(u,p)=>{this.canvas&&this.resize(u,p)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",s),n("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),n("attach",l)},e.isAttached(this.canvas)?l():o()}unbindEvents(){el(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},el(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let s,o,l,u;for("dataset"===e&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),l=0,u=t.length;l<u;++l){o=t[l];const p=o&&this.getDatasetMeta(o.datasetIndex).controller;p&&p[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!j1(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}_updateHoverStyles(t,e,n){const r=this.options.hover,s=(u,p)=>u.filter(v=>!p.some(x=>v.datasetIndex===x.datasetIndex&&v.index===x.index)),o=s(e,t),l=n?t:s(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const s=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(s||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:s}=this,l=this._getActiveElements(t,r,n,e),u=function pce(i){return"mouseup"===i.type||"click"===i.type||"contextmenu"===i.type}(t),p=function Mde(i,t,e,n){return e&&"mouseout"!==i.type?n?t:i:null}(t,this._lastEvent,n,u);n&&(this._lastEvent=null,Rl(s.onHover,[t,l,this],this),u&&Rl(s.onClick,[t,l,this],this));const v=!j1(l,r);return(v||e)&&(this._active=l,this._updateHoverStyles(l,r,e)),this._lastEvent=p,v}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,r)}}const nH=()=>el(fS.instances,i=>i._plugins.invalidate()),h_=!0;function iH(i,t,e){const{startAngle:n,pixelMargin:r,x:s,y:o,outerRadius:l,innerRadius:u}=t;let p=r/l;i.beginPath(),i.arc(s,o,l,n-p,e+p),u>r?(p=r/u,i.arc(s,o,u,e+p,n-p,!0)):i.arc(s,o,r,e+$c,n-$c),i.closePath(),i.clip()}function cb(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function fL(i,t,e,n,r,s){const{x:o,y:l,startAngle:u,pixelMargin:p,innerRadius:v}=t,x=Math.max(t.outerRadius+n+e-p,0),I=v>0?v+n+e+p:0;let M=0;const F=r-u;if(n){const Vn=((v>0?v-n:0)+(x>0?x-n:0))/2;M=(F-(0!==Vn?F*Vn/(Vn+n):F))/2}const X=(F-Math.max(.001,F*x-e/sc)/x)/2,ce=u+X+M,we=r-X-M,{outerStart:ye,outerEnd:Ae,innerStart:We,innerEnd:ot}=function Lde(i,t,e,n){const r=function Dde(i){return J2(i,["outerStart","outerEnd","innerStart","innerEnd"])}(i.options.borderRadius),s=(e-t)/2,o=Math.min(s,n*t/2),l=u=>{const p=(e-Math.min(s,u))*n/2;return _h(u,0,Math.min(s,p))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:_h(r.innerStart,0,o),innerEnd:_h(r.innerEnd,0,o)}}(t,I,x,we-ce),Mt=x-ye,Xe=x-Ae,yt=ce+ye/Mt,tn=we-Ae/Xe,zn=I+We,Qn=I+ot,Un=ce+We/zn,An=we-ot/Qn;if(i.beginPath(),s){if(i.arc(o,l,x,yt,tn),Ae>0){const Vn=cb(Xe,tn,o,l);i.arc(Vn.x,Vn.y,Ae,tn,we+$c)}const Nn=cb(Qn,we,o,l);if(i.lineTo(Nn.x,Nn.y),ot>0){const Vn=cb(Qn,An,o,l);i.arc(Vn.x,Vn.y,ot,we+$c,An+Math.PI)}if(i.arc(o,l,I,we-ot/I,ce+We/I,!0),We>0){const Vn=cb(zn,Un,o,l);i.arc(Vn.x,Vn.y,We,Un+Math.PI,ce-$c)}const _n=cb(Mt,ce,o,l);if(i.lineTo(_n.x,_n.y),ye>0){const Vn=cb(Mt,yt,o,l);i.arc(Vn.x,Vn.y,ye,ce-$c,yt)}}else{i.moveTo(o,l);const Nn=Math.cos(yt)*x+o,_n=Math.sin(yt)*x+l;i.lineTo(Nn,_n);const Vn=Math.cos(tn)*x+o,Fn=Math.sin(tn)*x+l;i.lineTo(Vn,Fn)}i.closePath()}Object.defineProperties(fS,{defaults:{enumerable:h_,value:ea},instances:{enumerable:h_,value:dS},overrides:{enumerable:h_,value:y0},registry:{enumerable:h_,value:av},version:{enumerable:h_,value:"3.9.1"},getChart:{enumerable:h_,value:tH},register:{enumerable:h_,value:(...i)=>{av.add(...i),nH()}},unregister:{enumerable:h_,value:(...i)=>{av.remove(...i),nH()}}});class pS extends gm{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:s,distance:o}=T4(r,{x:t,y:e}),{startAngle:l,endAngle:u,innerRadius:p,outerRadius:v,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),I=this.options.spacing/2,F=ho(x,u-l)>=ul||Tw(s,l,u),j=oy(o,p+I,v+I);return F&&j}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:s,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:u,spacing:p}=this.options,v=(r+s)/2,x=(o+l+p+u)/2;return{x:e+Math.cos(v)*x,y:n+Math.sin(v)*x}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/2,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>ul?Math.floor(n/ul):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();let l=0;if(r){l=r/2;const p=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(p)*l,Math.sin(p)*l),this.circumference>=sc&&(l=r)}t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor;const u=function Pde(i,t,e,n,r){const{fullCircles:s,startAngle:o,circumference:l}=t;let u=t.endAngle;if(s){fL(i,t,e,n,o+ul,r);for(let p=0;p<s;++p)i.fill();isNaN(l)||(u=o+l%ul,l%ul==0&&(u+=ul))}return fL(i,t,e,n,u,r),i.fill(),u}(t,this,l,s,o);(function kde(i,t,e,n,r,s){const{options:o}=t,{borderWidth:l,borderJoinStyle:u}=o,p="inner"===o.borderAlign;!l||(p?(i.lineWidth=2*l,i.lineJoin=u||"round"):(i.lineWidth=l,i.lineJoin=u||"bevel"),t.fullCircles&&function Rde(i,t,e){const{x:n,y:r,startAngle:s,pixelMargin:o,fullCircles:l}=t,u=Math.max(t.outerRadius-o,0),p=t.innerRadius+o;let v;for(e&&iH(i,t,s+ul),i.beginPath(),i.arc(n,r,p,s+ul,s,!0),v=0;v<l;++v)i.stroke();for(i.beginPath(),i.arc(n,r,u,s,s+ul),v=0;v<l;++v)i.stroke()}(i,t,p),p&&iH(i,t,r),fL(i,t,e,n,r,s),i.stroke())})(t,this,l,s,u,o),t.restore()}}function rH(i,t,e=t){i.lineCap=ho(e.borderCapStyle,t.borderCapStyle),i.setLineDash(ho(e.borderDash,t.borderDash)),i.lineDashOffset=ho(e.borderDashOffset,t.borderDashOffset),i.lineJoin=ho(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=ho(e.borderWidth,t.borderWidth),i.strokeStyle=ho(e.borderColor,t.borderColor)}function Ode(i,t,e){i.lineTo(e.x,e.y)}function sH(i,t,e={}){const n=i.length,{start:r=0,end:s=n-1}=e,{start:o,end:l}=t,u=Math.max(r,o),p=Math.min(s,l);return{count:n,start:u,loop:t.loop,ilen:p<u&&!(r<o&&s<o||r>l&&s>l)?n+p-u:p-u}}function Nde(i,t,e,n){const{points:r,options:s}=t,{count:o,start:l,loop:u,ilen:p}=sH(r,e,n),v=function Fde(i){return i.stepped?Zce:i.tension||"monotone"===i.cubicInterpolationMode?Qce:Ode}(s);let M,F,j,{move:x=!0,reverse:I}=n||{};for(M=0;M<=p;++M)F=r[(l+(I?p-M:M))%o],!F.skip&&(x?(i.moveTo(F.x,F.y),x=!1):v(i,j,F,I,s.stepped),j=F);return u&&(F=r[(l+(I?p:0))%o],v(i,j,F,I,s.stepped)),!!u}function Bde(i,t,e,n){const r=t.points,{count:s,start:o,ilen:l}=sH(r,e,n),{move:u=!0,reverse:p}=n||{};let I,M,F,j,X,ce,v=0,x=0;const we=Ae=>(o+(p?l-Ae:Ae))%s,ye=()=>{j!==X&&(i.lineTo(v,X),i.lineTo(v,j),i.lineTo(v,ce))};for(u&&(M=r[we(0)],i.moveTo(M.x,M.y)),I=0;I<=l;++I){if(M=r[we(I)],M.skip)continue;const Ae=M.x,We=M.y,ot=0|Ae;ot===F?(We<j?j=We:We>X&&(X=We),v=(x*v+Ae)/++x):(ye(),i.lineTo(Ae,We),F=ot,x=0,j=X=We),ce=We}ye()}function pL(i){const t=i.options;return i._decimated||i._loop||t.tension||"monotone"===t.cubicInterpolationMode||t.stepped||t.borderDash&&t.borderDash.length?Nde:Bde}pS.id="arc",pS.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},pS.defaultRoutes={backgroundColor:"backgroundColor"};const Hde="function"==typeof Path2D;let gS=(()=>{class i extends gm{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(bue(this._points,r,e,r.spanGaps?this._loop:this._fullLoop,n),this._pointsUpdated=!0)}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function Nue(i,t){const e=i.points,n=i.options.spanGaps,r=e.length;if(!r)return[];const s=!!i._loop,{start:o,end:l}=function Oue(i,t,e,n){let r=0,s=t-1;if(e&&!n)for(;r<t&&!i[r].skip;)r++;for(;r<t&&i[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&i[s%t].skip;)s--;return s%=t,{start:r,end:s}}(e,r,s,n);return function gU(i,t,e,n){return n&&n.setContext&&e?function Bue(i,t,e,n){const r=i._chart.getContext(),s=mU(i.options),{_datasetIndex:o,options:{spanGaps:l}}=i,u=e.length,p=[];let v=s,x=t[0].start,I=x;function M(F,j,X,ce){const we=l?-1:1;if(F!==j){for(F+=u;e[F%u].skip;)F-=we;for(;e[j%u].skip;)j+=we;F%u!=j%u&&(p.push({start:F%u,end:j%u,loop:X,style:ce}),v=ce,x=j%u)}}for(const F of t){x=l?x:F.start;let X,j=e[x%u];for(I=x+1;I<=F.end;I++){const ce=e[I%u];X=mU(n.setContext(u_(r,{type:"segment",p0:j,p1:ce,p0DataIndex:(I-1)%u,p1DataIndex:I%u,datasetIndex:o}))),zue(X,v)&&M(x,I-1,F.loop,v),j=ce,v=X}x<I-1&&M(x,I-1,F.loop,v)}return p}(i,t,e,n):t}(i,!0===n?[{start:o,end:l,loop:s}]:function Fue(i,t,e,n){const r=i.length,s=[];let u,o=t,l=i[t];for(u=t+1;u<=e;++u){const p=i[u%r];p.skip||p.stop?l.skip||(s.push({start:t%r,end:(u-1)%r,loop:n=!1}),t=o=p.stop?u:null):(o=u,l.skip&&(t=u)),l=p}return null!==o&&s.push({start:t%r,end:o%r,loop:n}),s}(e,o,l<o?l+r:l,!!i._fullLoop&&0===o&&l===r-1),e,t)}(this,this.options.segment))}first(){const e=this.segments;return e.length&&this.points[e[0].start]}last(){const e=this.segments,r=e.length;return r&&this.points[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],o=this.points,l=pU(this,{property:n,start:s,end:s});if(!l.length)return;const u=[],p=function zde(i){return i.stepped?Mue:i.tension||"monotone"===i.cubicInterpolationMode?Due:A0}(r);let v,x;for(v=0,x=l.length;v<x;++v){const{start:I,end:M}=l[v],F=o[I],j=o[M];if(F===j){u.push(F);continue}const ce=p(F,j,Math.abs((s-F[n])/(j[n]-F[n])),r.stepped);ce[n]=e[n],u.push(ce)}return 1===u.length?u[0]:u}pathSegment(e,n,r){return pL(this)(e,this,n,r)}path(e,n,r){const s=this.segments,o=pL(this);let l=this._loop;n=n||0,r=r||this.points.length-n;for(const u of s)l&=o(e,this,u,{start:n,end:n+r-1});return!!l}draw(e,n,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(e.save(),function Gde(i,t,e,n){Hde&&!t.options.segment?function Vde(i,t,e,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,n)&&r.closePath()),rH(i,t.options),i.stroke(r)}(i,t,e,n):function Ude(i,t,e,n){const{segments:r,options:s}=t,o=pL(t);for(const l of r)rH(i,s,l.style),i.beginPath(),o(i,t,l,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}(i,t,e,n)}(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i.id="line",i.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t},i})();function oH(i,t,e,n){const r=i.options,{[e]:s}=i.getProps([e],n);return Math.abs(t-s)<r.radius+r.hitRadius}let Wde=(()=>{class i extends gm{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(n-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return oH(this,e,"x",n)}inYRange(e,n){return oH(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){let n=(e=e||this.options||{}).radius||0;return n=Math.max(n,n&&e.hoverRadius||0),2*(n+(n&&e.borderWidth||0))}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Rw(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Q2(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}return i.id="point",i.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},i.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},i})();function aH(i,t){const{x:e,y:n,base:r,width:s,height:o}=i.getProps(["x","y","base","width","height"],t);let l,u,p,v,x;return i.horizontal?(x=o/2,l=Math.min(e,r),u=Math.max(e,r),p=n-x,v=n+x):(x=s/2,l=e-x,u=e+x,p=Math.min(n,r),v=Math.max(n,r)),{left:l,top:p,right:u,bottom:v}}function d_(i,t,e,n){return i?0:_h(t,e,n)}function gL(i,t,e,n){const r=null===t,s=null===e,l=i&&!(r&&s)&&aH(i,n);return l&&(r||oy(t,l.left,l.right))&&(s||oy(e,l.top,l.bottom))}function Yde(i,t){i.rect(t.x,t.y,t.w,t.h)}function mL(i,t,e={}){const n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0;return{x:i.x+n,y:i.y+r,w:i.w+((i.x+i.w!==e.x+e.w?t:0)-n),h:i.h+((i.y+i.h!==e.y+e.h?t:0)-r),radius:i.radius}}class mS extends gm{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:o}=function qde(i){const t=aH(i),e=t.right-t.left,n=t.bottom-t.top,r=function jde(i,t,e){const r=i.borderSkipped,s=K4(i.options.borderWidth);return{t:d_(r.top,s.top,0,e),r:d_(r.right,s.right,0,t),b:d_(r.bottom,s.bottom,0,e),l:d_(r.left,s.left,0,t)}}(i,e/2,n/2),s=function $de(i,t,e){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=b0(r),o=Math.min(t,e),l=i.borderSkipped,u=n||Zo(r);return{topLeft:d_(!u||l.top||l.left,s.topLeft,0,o),topRight:d_(!u||l.top||l.right,s.topRight,0,o),bottomLeft:d_(!u||l.bottom||l.left,s.bottomLeft,0,o),bottomRight:d_(!u||l.bottom||l.right,s.bottomRight,0,o)}}(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),l=function Xde(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}(o.radius)?kw:Yde;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),l(t,mL(o,e,s)),t.clip(),l(t,mL(s,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),l(t,mL(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return gL(this,t,e,n)}inXRange(t,e){return gL(this,t,null,e)}inYRange(t,e){return gL(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}mS.id="bar",mS.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},mS.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Kde=Object.freeze({__proto__:null,ArcElement:pS,LineElement:gS,PointElement:Wde,BarElement:mS});function lH(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{value:t})}}function cH(i){i.data.datasets.forEach(t=>{lH(t)})}var efe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled)return void cH(i);const n=i.width;i.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:l}=r,u=i.getDatasetMeta(s),p=o||r.data;if("y"===Ow([l,i.options.indexAxis])||!u.controller.supportsDecimation)return;const v=i.scales[u.xAxisID];if("linear"!==v.type&&"time"!==v.type||i.options.parsing)return;let F,{start:x,count:I}=function Jde(i,t){const e=t.length;let r,n=0;const{iScale:s}=i,{min:o,max:l,minDefined:u,maxDefined:p}=s.getUserBounds();return u&&(n=_h(ay(t,s.axis,o).lo,0,e-1)),r=p?_h(ay(t,s.axis,l).hi+1,n,e)-n:e-n,{start:n,count:r}}(u,p);if(I<=(e.threshold||4*n))lH(r);else{switch(fa(o)&&(r._data=p,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(j){this._data=j}})),e.algorithm){case"lttb":F=function Zde(i,t,e,n,r){const s=r.samples||n;if(s>=e)return i.slice(t,t+e);const o=[],l=(e-2)/(s-2);let u=0;const p=t+e-1;let x,I,M,F,j,v=t;for(o[u++]=i[v],x=0;x<s-2;x++){let we,X=0,ce=0;const ye=Math.floor((x+1)*l)+1+t,Ae=Math.min(Math.floor((x+2)*l)+1,e)+t,We=Ae-ye;for(we=ye;we<Ae;we++)X+=i[we].x,ce+=i[we].y;X/=We,ce/=We;const ot=Math.floor(x*l)+1+t,Mt=Math.min(Math.floor((x+1)*l)+1,e)+t,{x:Xe,y:yt}=i[v];for(M=F=-1,we=ot;we<Mt;we++)F=.5*Math.abs((Xe-X)*(i[we].y-yt)-(Xe-i[we].x)*(ce-yt)),F>M&&(M=F,I=i[we],j=we);o[u++]=I,v=j}return o[u++]=i[p],o}(p,x,I,n,e);break;case"min-max":F=function Qde(i,t,e,n){let o,l,u,p,v,x,I,M,F,j,r=0,s=0;const X=[],we=i[t].x,Ae=i[t+e-1].x-we;for(o=t;o<t+e;++o){l=i[o],u=(l.x-we)/Ae*n,p=l.y;const We=0|u;if(We===v)p<F?(F=p,x=o):p>j&&(j=p,I=o),r=(s*r+l.x)/++s;else{const ot=o-1;if(!fa(x)&&!fa(I)){const Mt=Math.min(x,I),Xe=Math.max(x,I);Mt!==M&&Mt!==ot&&X.push({...i[Mt],x:r}),Xe!==M&&Xe!==ot&&X.push({...i[Xe],x:r})}o>0&&ot!==M&&X.push(i[ot]),X.push(l),v=We,s=0,F=j=p,x=I=M=o}}return X}(p,x,I,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=F}})},destroy(i){cH(i)}};function vL(i,t,e,n){if(n)return;let r=t[i],s=e[i];return"angle"===i&&(r=Dp(r),s=Dp(s)),{property:i,start:r,end:s}}function yL(i,t,e){for(;t>i;t--){const n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function uH(i,t,e,n){return i&&t?n(i[e],t[e]):i?i[e]:t?t[e]:0}function hH(i,t){let e=[],n=!1;return Pl(i)?(n=!0,e=i):e=function nfe(i,t){const{x:e=null,y:n=null}=i||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:l})=>{l=yL(o,l,r);const u=r[o],p=r[l];null!==n?(s.push({x:u.x,y:n}),s.push({x:p.x,y:n})):null!==e&&(s.push({x:e,y:u.y}),s.push({x:e,y:p.y}))}),s}(i,t),e.length?new gS({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function dH(i){return i&&!1!==i.fill}function ife(i,t,e){let r=i[t].fill;const s=[t];let o;if(!e)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!ou(r))return r;if(o=i[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function rfe(i,t,e){const n=function lfe(i){const t=i.options,e=t.fill;let n=ho(e&&e.target,e);return void 0===n&&(n=!!t.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(i);if(Zo(n))return!isNaN(n.value)&&n;let r=parseFloat(n);return ou(r)&&Math.floor(r)===r?function sfe(i,t,e,n){return("-"===i||"+"===i)&&(e=t+e),!(e===t||e<0||e>=n)&&e}(n[0],t,r,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function hfe(i,t,e){const n=[];for(let r=0;r<e.length;r++){const s=e[r],{first:o,last:l,point:u}=dfe(s,t,"x");if(!(!u||o&&l))if(o)n.unshift(u);else if(i.push(u),!l)break}i.push(...n)}function dfe(i,t,e){const n=i.interpolate(t,e);if(!n)return{};const r=n[e],s=i.segments,o=i.points;let l=!1,u=!1;for(let p=0;p<s.length;p++){const v=s[p],x=o[v.start][e],I=o[v.end][e];if(oy(r,x,I)){l=r===x,u=r===I;break}}return{first:l,last:u,point:n}}class fH{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:s,radius:o}=this;return t.arc(r,s,o,(e=e||{start:0,end:ul}).end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}}function _L(i,t,e){const n=function ffe(i){const{chart:t,fill:e,line:n}=i;if(ou(e))return function pfe(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}(t,e);if("stack"===e)return function cfe(i){const{scale:t,index:e,line:n}=i,r=[],s=n.segments,o=n.points,l=function ufe(i,t){const e=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const s=n[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}(t,e);l.push(hH({x:null,y:t.bottom},n));for(let u=0;u<s.length;u++){const p=s[u];for(let v=p.start;v<=p.end;v++)hfe(r,o[v],l)}return new gS({points:r,options:{}})}(i);if("shape"===e)return!0;const r=function gfe(i){return(i.scale||{}).getPointPositionForValue?function vfe(i){const{scale:t,fill:e}=i,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,o=function afe(i,t,e){let n;return n="start"===i?e:"end"===i?t.options.reverse?t.min:t.max:Zo(i)?i.value:t.getBaseValue(),n}(e,t,s),l=[];if(n.grid.circular){const u=t.getPointPositionForValue(0,s);return new fH({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(o)})}for(let u=0;u<r;++u)l.push(t.getPointPositionForValue(u,o));return l}(i):function mfe(i){const{scale:t={},fill:e}=i,n=function ofe(i,t){let e=null;return"start"===i?e=t.bottom:"end"===i?e=t.top:Zo(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}(e,t);if(ou(n)){const r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}(i)}(i);return r instanceof fH?r:hH(r,n)}(t),{line:r,scale:s,axis:o}=t,l=r.options,u=l.fill,p=l.backgroundColor,{above:v=p,below:x=p}=u||{};n&&r.points.length&&(eS(i,e),function yfe(i,t){const{line:e,target:n,above:r,below:s,area:o,scale:l}=t,u=e._loop?"angle":t.axis;i.save(),"x"===u&&s!==r&&(pH(i,n,o.top),gH(i,{line:e,target:n,color:r,scale:l,property:u}),i.restore(),i.save(),pH(i,n,o.bottom)),gH(i,{line:e,target:n,color:s,scale:l,property:u}),i.restore()}(i,{line:r,target:n,above:v,below:x,area:e,scale:s,axis:o}),tS(i))}function pH(i,t,e){const{segments:n,points:r}=t;let s=!0,o=!1;i.beginPath();for(const l of n){const{start:u,end:p}=l,v=r[u],x=r[yL(u,p,r)];s?(i.moveTo(v.x,v.y),s=!1):(i.lineTo(v.x,e),i.lineTo(v.x,v.y)),o=!!t.pathSegment(i,l,{move:o}),o?i.closePath():i.lineTo(x.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function gH(i,t){const{line:e,target:n,property:r,color:s,scale:o}=t,l=function tfe(i,t,e){const n=i.segments,r=i.points,s=t.points,o=[];for(const l of n){let{start:u,end:p}=l;p=yL(u,p,r);const v=vL(e,r[u],r[p],l.loop);if(!t.segments){o.push({source:l,target:v,start:r[u],end:r[p]});continue}const x=pU(t,v);for(const I of x){const M=vL(e,s[I.start],s[I.end],I.loop),F=fU(l,r,M);for(const j of F)o.push({source:j,target:I,start:{[e]:uH(v,M,"start",Math.max)},end:{[e]:uH(v,M,"end",Math.min)}})}}return o}(e,n,r);for(const{source:u,target:p,start:v,end:x}of l){const{style:{backgroundColor:I=s}={}}=u,M=!0!==n;i.save(),i.fillStyle=I,_fe(i,o,M&&vL(r,v,x)),i.beginPath();const F=!!e.pathSegment(i,u);let j;if(M){F?i.closePath():mH(i,n,x,r);const X=!!n.pathSegment(i,p,{move:F,reverse:!0});j=F&&X,j||mH(i,n,v,r)}i.closePath(),i.fill(j?"evenodd":"nonzero"),i.restore()}}function _fe(i,t,e){const{top:n,bottom:r}=t.chart.chartArea,{property:s,start:o,end:l}=e||{};"x"===s&&(i.beginPath(),i.rect(o,n,l-o,r-n),i.clip())}function mH(i,t,e,n){const r=t.interpolate(e,n);r&&i.lineTo(r.x,r.y)}var Cfe={id:"filler",afterDatasetsUpdate(i,t,e){const n=(i.data.datasets||[]).length,r=[];let s,o,l,u;for(o=0;o<n;++o)s=i.getDatasetMeta(o),l=s.dataset,u=null,l&&l.options&&l instanceof gS&&(u={visible:i.isDatasetVisible(o),index:o,fill:rfe(l,o,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:l}),s.$filler=u,r.push(u);for(o=0;o<n;++o)u=r[o],u&&!1!==u.fill&&(u.fill=ife(r,o,e.propagate))},beforeDraw(i,t,e){const n="beforeDraw"===e.drawTime,r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;!l||(l.line.updateControlPoints(s,l.axis),n&&l.fill&&_L(i.ctx,l,s))}},beforeDatasetsDraw(i,t,e){if("beforeDatasetsDraw"!==e.drawTime)return;const n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const s=n[r].$filler;dH(s)&&_L(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,t,e){const n=t.meta.$filler;!dH(n)||"beforeDatasetDraw"!==e.drawTime||_L(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const vH=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}};class yH extends gm{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Rl(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=Ku(n.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=vH(n,s);let p,v;e.font=r.string,this.isHorizontal()?(p=this.maxWidth,v=this._fitRows(o,s,l,u)+10):(v=this.maxHeight,p=this._fitCols(o,s,l,u)+10),this.width=Math.min(p,t.maxWidth||this.maxWidth),this.height=Math.min(v,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.lineWidths=[0],v=r+l;let x=t;s.textAlign="left",s.textBaseline="middle";let I=-1,M=-v;return this.legendItems.forEach((F,j)=>{const X=n+e/2+s.measureText(F.text).width;(0===j||p[p.length-1]+X+2*l>o)&&(x+=v,p[p.length-(j>0?0:1)]=0,M+=v,I++),u[j]={left:0,top:M,row:I,width:X,height:r},p[p.length-1]+=X+l}),x}_fitCols(t,e,n,r){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],p=this.columnSizes=[],v=o-t;let x=l,I=0,M=0,F=0,j=0;return this.legendItems.forEach((X,ce)=>{const we=n+e/2+s.measureText(X.text).width;ce>0&&M+r+2*l>v&&(x+=I+l,p.push({width:I,height:M}),F+=I+l,j++,I=M=0),u[ce]={left:F,top:M,col:j,width:we,height:r},I=Math.max(I,we),M+=r+l}),x+=I,p.push({width:I,height:M}),x}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:s}}=this,o=lb(s,this.left,this.width);if(this.isHorizontal()){let l=0,u=Id(n,this.left+r,this.right-this.lineWidths[l]);for(const p of e)l!==p.row&&(l=p.row,u=Id(n,this.left+r,this.right-this.lineWidths[l])),p.top+=this.top+t+r,p.left=o.leftForLtr(o.x(u),p.width),u+=p.width+r}else{let l=0,u=Id(n,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const p of e)p.col!==l&&(l=p.col,u=Id(n,this.top+t+r,this.bottom-this.columnSizes[l].height)),p.top=u,p.left+=this.left+r,p.left=o.leftForLtr(o.x(p.left),p.width),u+=p.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;eS(t,this),this._draw(),tS(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:s,labels:o}=t,l=ea.color,u=lb(t.rtl,this.left,this.width),p=Ku(o.font),{color:v,padding:x}=o,I=p.size,M=I/2;let F;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=p.string;const{boxWidth:j,boxHeight:X,itemHeight:ce}=vH(o,I),Ae=this.isHorizontal(),We=this._computeTitleHeight();F=Ae?{x:Id(s,this.left+x,this.right-n[0]),y:this.top+x+We,line:0}:{x:this.left+x,y:Id(s,this.top+We+x,this.bottom-e[0].height),line:0},cU(this.ctx,t.textDirection);const ot=ce+x;this.legendItems.forEach((Mt,Xe)=>{r.strokeStyle=Mt.fontColor||v,r.fillStyle=Mt.fontColor||v;const yt=r.measureText(Mt.text).width,tn=u.textAlign(Mt.textAlign||(Mt.textAlign=o.textAlign)),zn=j+M+yt;let Qn=F.x,Un=F.y;u.setWidth(this.width),Ae?Xe>0&&Qn+zn+x>this.right&&(Un=F.y+=ot,F.line++,Qn=F.x=Id(s,this.left+x,this.right-n[F.line])):Xe>0&&Un+ot>this.bottom&&(Qn=F.x=Qn+e[F.line].width+x,F.line++,Un=F.y=Id(s,this.top+We+x,this.bottom-e[F.line].height)),function(Mt,Xe,yt){if(isNaN(j)||j<=0||isNaN(X)||X<0)return;r.save();const tn=ho(yt.lineWidth,1);if(r.fillStyle=ho(yt.fillStyle,l),r.lineCap=ho(yt.lineCap,"butt"),r.lineDashOffset=ho(yt.lineDashOffset,0),r.lineJoin=ho(yt.lineJoin,"miter"),r.lineWidth=tn,r.strokeStyle=ho(yt.strokeStyle,l),r.setLineDash(ho(yt.lineDash,[])),o.usePointStyle){const zn={radius:X*Math.SQRT2/2,pointStyle:yt.pointStyle,rotation:yt.rotation,borderWidth:tn},Qn=u.xPlus(Mt,j/2);Y4(r,zn,Qn,Xe+M,o.pointStyleWidth&&j)}else{const zn=Xe+Math.max((I-X)/2,0),Qn=u.leftForLtr(Mt,j),Un=b0(yt.borderRadius);r.beginPath(),Object.values(Un).some(An=>0!==An)?kw(r,{x:Qn,y:zn,w:j,h:X,radius:Un}):r.rect(Qn,zn,j,X),r.fill(),0!==tn&&r.stroke()}r.restore()}(u.x(Qn),Un,Mt),Qn=((i,t,e,n)=>i===(n?"left":"right")?e:"center"===i?(t+e)/2:t)(tn,Qn+j+M,Ae?Qn+zn:this.right,t.rtl),function(Mt,Xe,yt){C0(r,yt.text,Mt,Xe+ce/2,p,{strikethrough:yt.hidden,textAlign:u.textAlign(yt.textAlign)})}(u.x(Qn),Un,Mt),Ae?F.x+=zn+x:F.y+=ot}),uU(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Ku(e.font),r=Sd(e.padding);if(!e.display)return;const s=lb(t.rtl,this.left,this.width),o=this.ctx,l=e.position,p=r.top+n.size/2;let v,x=this.left,I=this.width;if(this.isHorizontal())I=Math.max(...this.lineWidths),v=this.top+p,x=Id(t.align,x,this.right-I);else{const F=this.columnSizes.reduce((j,X)=>Math.max(j,X.height),0);v=p+Id(t.align,this.top,this.bottom-F-t.labels.padding-this._computeTitleHeight())}const M=Id(l,x,x+I);o.textAlign=s.textAlign(G2(l)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,C0(o,e.text,M,v,n)}_computeTitleHeight(){const t=this.options.title,e=Ku(t.font),n=Sd(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,s;if(oy(t,this.left,this.right)&&oy(e,this.top,this.bottom))for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],oy(t,r.left,r.left+r.width)&&oy(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function xfe(i,t){return!(("mousemove"!==i&&"mouseout"!==i||!t.onHover&&!t.onLeave)&&(!t.onClick||"click"!==i&&"mouseup"!==i))}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const r=this._hoveredItem,s=((i,t)=>null!==i&&null!==t&&i.datasetIndex===t.datasetIndex&&i.index===t.index)(r,n);r&&!s&&Rl(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!s&&Rl(e.onHover,[t,n,this],this)}else n&&Rl(e.onClick,[t,n,this],this)}}var wfe={id:"legend",_element:yH,start(i,t,e){const n=i.legend=new yH({ctx:i.ctx,options:e,chart:i});Ed.configure(i,n,e),Ed.addBox(i,n)},stop(i){Ed.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const n=i.legend;Ed.configure(i,n,e),n.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:s}}=i.legend.options;return i._getSortedDatasetMetas().map(o=>{const l=o.controller.getStyle(e?0:void 0),u=Sd(l.borderWidth);return{text:t[o.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!o.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class CL extends gm{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Pl(n.text)?n.text.length:1;this._padding=Sd(n.padding);const s=r*Ku(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:s,options:o}=this,l=o.align;let p,v,x,u=0;return this.isHorizontal()?(v=Id(l,n,s),x=e+t,p=s-n):("left"===o.position?(v=n+t,x=Id(l,r,e),u=-.5*sc):(v=s-t,x=Id(l,e,r),u=.5*sc),p=r-e),{titleX:v,titleY:x,maxWidth:p,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Ku(e.font),s=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:u,rotation:p}=this._drawArgs(s);C0(t,e.text,0,0,n,{color:e.color,maxWidth:u,rotation:p,textAlign:G2(e.align),textBaseline:"middle",translation:[o,l]})}}var Ife={id:"title",_element:CL,start(i,t,e){!function Afe(i,t){const e=new CL({ctx:i.ctx,options:t,chart:i});Ed.configure(i,e,t),Ed.addBox(i,e),i.titleBlock=e}(i,e)},stop(i){Ed.removeBox(i,i.titleBlock),delete i.titleBlock},beforeUpdate(i,t,e){const n=i.titleBlock;Ed.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const vS=new WeakMap;var Sfe={id:"subtitle",start(i,t,e){const n=new CL({ctx:i.ctx,options:e,chart:i});Ed.configure(i,n,e),Ed.addBox(i,n),vS.set(i,n)},stop(i){Ed.removeBox(i,vS.get(i)),vS.delete(i)},beforeUpdate(i,t,e){const n=vS.get(i);Ed.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const jw={average(i){if(!i.length)return!1;let t,e,n=0,r=0,s=0;for(t=0,e=i.length;t<e;++t){const o=i[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n+=l.x,r+=l.y,++s}}return{x:n/s,y:r/s}},nearest(i,t){if(!i.length)return!1;let s,o,l,e=t.x,n=t.y,r=Number.POSITIVE_INFINITY;for(s=0,o=i.length;s<o;++s){const u=i[s].element;if(u&&u.hasValue()){const v=U2(t,u.getCenterPoint());v<r&&(r=v,l=u)}}if(l){const u=l.tooltipPosition();e=u.x,n=u.y}return{x:e,y:n}}};function lv(i,t){return t&&(Pl(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function uy(i){return("string"==typeof i||i instanceof String)&&i.indexOf("\n")>-1?i.split("\n"):i}function Efe(i,t){const{element:e,datasetIndex:n,index:r}=t,s=i.getDatasetMeta(n).controller,{label:o,value:l}=s.getLabelAndValue(r);return{chart:i,label:o,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function _H(i,t){const e=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:o,boxHeight:l}=t,u=Ku(t.bodyFont),p=Ku(t.titleFont),v=Ku(t.footerFont),x=s.length,I=r.length,M=n.length,F=Sd(t.padding);let j=F.height,X=0,ce=n.reduce((Ae,We)=>Ae+We.before.length+We.lines.length+We.after.length,0);ce+=i.beforeBody.length+i.afterBody.length,x&&(j+=x*p.lineHeight+(x-1)*t.titleSpacing+t.titleMarginBottom),ce&&(j+=M*(t.displayColors?Math.max(l,u.lineHeight):u.lineHeight)+(ce-M)*u.lineHeight+(ce-1)*t.bodySpacing),I&&(j+=t.footerMarginTop+I*v.lineHeight+(I-1)*t.footerSpacing);let we=0;const ye=function(Ae){X=Math.max(X,e.measureText(Ae).width+we)};return e.save(),e.font=p.string,el(i.title,ye),e.font=u.string,el(i.beforeBody.concat(i.afterBody),ye),we=t.displayColors?o+2+t.boxPadding:0,el(n,Ae=>{el(Ae.before,ye),el(Ae.lines,ye),el(Ae.after,ye)}),we=0,e.font=v.string,el(i.footer,ye),e.restore(),X+=F.width,{width:X,height:j}}function Dfe(i,t,e,n){const{x:r,width:s}=e,{width:o,chartArea:{left:l,right:u}}=i;let p="center";return"center"===n?p=r<=(l+u)/2?"left":"right":r<=s/2?p="left":r>=o-s/2&&(p="right"),function Mfe(i,t,e,n){const{x:r,width:s}=n,o=e.caretSize+e.caretPadding;if("left"===i&&r+s+o>t.width||"right"===i&&r-s-o<0)return!0}(p,i,t,e)&&(p="center"),p}function CH(i,t,e){const n=e.yAlign||t.yAlign||function Tfe(i,t){const{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}(i,e);return{xAlign:e.xAlign||t.xAlign||Dfe(i,t,e,n),yAlign:n}}function bH(i,t,e,n){const{caretSize:r,caretPadding:s,cornerRadius:o}=i,{xAlign:l,yAlign:u}=e,p=r+s,{topLeft:v,topRight:x,bottomLeft:I,bottomRight:M}=b0(o);let F=function Lfe(i,t){let{x:e,width:n}=i;return"right"===t?e-=n:"center"===t&&(e-=n/2),e}(t,l);const j=function Pfe(i,t,e){let{y:n,height:r}=i;return"top"===t?n+=e:n-="bottom"===t?r+e:r/2,n}(t,u,p);return"center"===u?"left"===l?F+=p:"right"===l&&(F-=p):"left"===l?F-=Math.max(v,I)+r:"right"===l&&(F+=Math.max(x,M)+r),{x:_h(F,0,n.width-t.width),y:_h(j,0,n.height-t.height)}}function yS(i,t,e){const n=Sd(e.padding);return"center"===t?i.x+i.width/2:"right"===t?i.x+i.width-n.right:i.x+n.left}function xH(i){return lv([],uy(i))}function wH(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}let AH=(()=>{class i extends gm{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,o=new yU(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function Rfe(i,t,e){return u_(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=r.beforeTitle.apply(this,[e]),o=r.title.apply(this,[e]),l=r.afterTitle.apply(this,[e]);let u=[];return u=lv(u,uy(s)),u=lv(u,uy(o)),u=lv(u,uy(l)),u}getBeforeBody(e,n){return xH(n.callbacks.beforeBody.apply(this,[e]))}getBody(e,n){const{callbacks:r}=n,s=[];return el(e,o=>{const l={before:[],lines:[],after:[]},u=wH(r,o);lv(l.before,uy(u.beforeLabel.call(this,o))),lv(l.lines,u.label.call(this,o)),lv(l.after,uy(u.afterLabel.call(this,o))),s.push(l)}),s}getAfterBody(e,n){return xH(n.callbacks.afterBody.apply(this,[e]))}getFooter(e,n){const{callbacks:r}=n,s=r.beforeFooter.apply(this,[e]),o=r.footer.apply(this,[e]),l=r.afterFooter.apply(this,[e]);let u=[];return u=lv(u,uy(s)),u=lv(u,uy(o)),u=lv(u,uy(l)),u}_createItems(e){const n=this._active,r=this.chart.data,s=[],o=[],l=[];let p,v,u=[];for(p=0,v=n.length;p<v;++p)u.push(Efe(this.chart,n[p]));return e.filter&&(u=u.filter((x,I,M)=>e.filter(x,I,M,r))),e.itemSort&&(u=u.sort((x,I)=>e.itemSort(x,I,r))),el(u,x=>{const I=wH(e.callbacks,x);s.push(I.labelColor.call(this,x)),o.push(I.labelPointStyle.call(this,x)),l.push(I.labelTextColor.call(this,x))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=u,u}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let o,l=[];if(s.length){const u=jw[r.position].call(this,s,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const p=this._size=_H(this,r),v=Object.assign({},u,p),x=CH(this.chart,r,v),I=bH(r,v,x,this.chart);this.xAlign=x.xAlign,this.yAlign=x.yAlign,o={opacity:1,x:I.x,y:I.y,width:p.width,height:p.height,caretX:u.x,caretY:u.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const o=this.getCaretPosition(e,r,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:o}=this,{caretSize:l,cornerRadius:u}=r,{topLeft:p,topRight:v,bottomLeft:x,bottomRight:I}=b0(u),{x:M,y:F}=e,{width:j,height:X}=n;let ce,we,ye,Ae,We,ot;return"center"===o?(We=F+X/2,"left"===s?(ce=M,we=ce-l,Ae=We+l,ot=We-l):(ce=M+j,we=ce+l,Ae=We-l,ot=We+l),ye=ce):(we="left"===s?M+Math.max(p,x)+l:"right"===s?M+j-Math.max(v,I)-l:this.caretX,"top"===o?(Ae=F,We=Ae-l,ce=we-l,ye=we+l):(Ae=F+X,We=Ae+l,ce=we+l,ye=we-l),ot=Ae),{x1:ce,x2:we,x3:ye,y1:Ae,y2:We,y3:ot}}drawTitle(e,n,r){const s=this.title,o=s.length;let l,u,p;if(o){const v=lb(r.rtl,this.x,this.width);for(e.x=yS(this,r.titleAlign,r),n.textAlign=v.textAlign(r.titleAlign),n.textBaseline="middle",l=Ku(r.titleFont),u=r.titleSpacing,n.fillStyle=r.titleColor,n.font=l.string,p=0;p<o;++p)n.fillText(s[p],v.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+u,p+1===o&&(e.y+=r.titleMarginBottom-u)}}_drawColorBox(e,n,r,s,o){const l=this.labelColors[r],u=this.labelPointStyles[r],{boxHeight:p,boxWidth:v,boxPadding:x}=o,I=Ku(o.bodyFont),M=yS(this,"left",o),F=s.x(M),X=n.y+(p<I.lineHeight?(I.lineHeight-p)/2:0);if(o.usePointStyle){const ce={radius:Math.min(v,p)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},we=s.leftForLtr(F,v)+v/2,ye=X+p/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Q2(e,ce,we,ye),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Q2(e,ce,we,ye)}else{e.lineWidth=Zo(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const ce=s.leftForLtr(F,v-x),we=s.leftForLtr(s.xPlus(F,1),v-x-2),ye=b0(l.borderRadius);Object.values(ye).some(Ae=>0!==Ae)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,kw(e,{x:ce,y:X,w:v,h:p,radius:ye}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),kw(e,{x:we,y:X+1,w:v-2,h:p-2,radius:ye}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(ce,X,v,p),e.strokeRect(ce,X,v,p),e.fillStyle=l.backgroundColor,e.fillRect(we,X+1,v-2,p-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:o,bodyAlign:l,displayColors:u,boxHeight:p,boxWidth:v,boxPadding:x}=r,I=Ku(r.bodyFont);let M=I.lineHeight,F=0;const j=lb(r.rtl,this.x,this.width),X=function(yt){n.fillText(yt,j.x(e.x+F),e.y+M/2),e.y+=M+o},ce=j.textAlign(l);let we,ye,Ae,We,ot,Mt,Xe;for(n.textAlign=l,n.textBaseline="middle",n.font=I.string,e.x=yS(this,ce,r),n.fillStyle=r.bodyColor,el(this.beforeBody,X),F=u&&"right"!==ce?"center"===l?v/2+x:v+2+x:0,We=0,Mt=s.length;We<Mt;++We){for(we=s[We],ye=this.labelTextColors[We],n.fillStyle=ye,el(we.before,X),Ae=we.lines,u&&Ae.length&&(this._drawColorBox(n,e,We,j,r),M=Math.max(I.lineHeight,p)),ot=0,Xe=Ae.length;ot<Xe;++ot)X(Ae[ot]),M=I.lineHeight;el(we.after,X)}F=0,M=I.lineHeight,el(this.afterBody,X),e.y-=o}drawFooter(e,n,r){const s=this.footer,o=s.length;let l,u;if(o){const p=lb(r.rtl,this.x,this.width);for(e.x=yS(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=p.textAlign(r.footerAlign),n.textBaseline="middle",l=Ku(r.footerFont),n.fillStyle=r.footerColor,n.font=l.string,u=0;u<o;++u)n.fillText(s[u],p.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:o,yAlign:l}=this,{x:u,y:p}=e,{width:v,height:x}=r,{topLeft:I,topRight:M,bottomLeft:F,bottomRight:j}=b0(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(u+I,p),"top"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+v-M,p),n.quadraticCurveTo(u+v,p,u+v,p+M),"center"===l&&"right"===o&&this.drawCaret(e,n,r,s),n.lineTo(u+v,p+x-j),n.quadraticCurveTo(u+v,p+x,u+v-j,p+x),"bottom"===l&&this.drawCaret(e,n,r,s),n.lineTo(u+F,p+x),n.quadraticCurveTo(u,p+x,u,p+x-F),"center"===l&&"left"===o&&this.drawCaret(e,n,r,s),n.lineTo(u,p+I),n.quadraticCurveTo(u,p,u+I,p),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const l=jw[e.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=_H(this,e),p=Object.assign({},l,this._size),v=CH(n,e,p),x=bH(e,p,v,n);(s._to!==x.x||o._to!==x.y)&&(this.xAlign=v.xAlign,this.yAlign=v.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,x))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=Sd(n.padding);n.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,n),cU(e,n.textDirection),o.y+=l.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),uU(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:u,index:p})=>{const v=this.chart.getDatasetMeta(u);if(!v)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:v.data[p],index:p}}),o=!j1(r,s),l=this._positionChanged(s,n);(o||l)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],l=this._getActiveElements(e,o,n,r),u=this._positionChanged(l,e),p=n||!j1(l,o)||u;return p&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),p}_getActiveElements(e,n,r,s){const o=this.options;if("mouseout"===e.type)return[];if(!s)return n;const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,n){const{caretX:r,caretY:s,options:o}=this,l=jw[o.position].call(this,e,n);return!1!==l&&(r!==l.x||s!==l.y)}}return i.positioners=jw,i})();var Ofe=Object.freeze({__proto__:null,Decimation:efe,Filler:Cfe,Legend:wfe,SubTitle:Sfe,Title:Ife,Tooltip:{id:"tooltip",_element:AH,positioners:jw,afterInit(i,t,e){e&&(i.tooltip=new AH({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(!1===i.notifyPlugins("beforeTooltipDraw",e))return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){i.tooltip&&i.tooltip.handleEvent(t.event,t.replay,t.inChartArea)&&(t.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:sy,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:sy,beforeBody:sy,beforeLabel:sy,label(i){if(this&&this.options&&"dataset"===this.options.mode)return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return fa(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:sy,afterBody:sy,beforeFooter:sy,footer:sy,afterFooter:sy}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>"filter"!==i&&"itemSort"!==i&&"external"!==i,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class _S extends I0{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const n=this.getLabels();for(const{index:r,label:s}of e)n[r]===s&&n.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(fa(t))return null;const n=this.getLabels();return((i,t)=>null===i?null:_h(Math.round(i),0,t))(e=isFinite(e)&&n[e]===t?e:function Nfe(i,t,e,n){const r=i.indexOf(t);return-1===r?((i,t,e,n)=>("string"==typeof t?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e))(i,t,e,n):r!==i.lastIndexOf(t)?e:r}(n,t,ho(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let s=this.getLabels();s=0===t&&e===s.length-1?s:s.slice(t,e+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=e;o++)r.push({value:o});return r}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function IH(i,t,{horizontal:e,minRotation:n}){const r=pm(n),s=(e?Math.sin(r):Math.cos(r))||.001;return Math.min(t/s,.75*t*(""+i).length)}_S.id="category",_S.defaults={ticks:{callback:_S.prototype.getLabelForValue}};class CS extends I0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return fa(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this;const o=u=>r=e?r:u,l=u=>s=n?s:u;if(t){const u=sv(r),p=sv(s);u<0&&p<0?l(0):u>0&&p>0&&o(0)}if(r===s){let u=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(u=Math.abs(.05*s)),l(s+u),t||o(r-u)}this.min=r,this.max=s}getTickLimit(){const t=this.options.ticks;let r,{maxTicksLimit:e,stepSize:n}=t;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const o=function zfe(i,t){const e=[],{bounds:r,step:s,min:o,max:l,precision:u,count:p,maxTicks:v,maxDigits:x,includeBounds:I}=i,M=s||1,F=v-1,{min:j,max:X}=t,ce=!fa(o),we=!fa(l),ye=!fa(p),Ae=(X-j)/(x+1);let ot,Mt,Xe,yt,We=I4((X-j)/F/M)*M;if(We<1e-14&&!ce&&!we)return[{value:j},{value:X}];yt=Math.ceil(X/We)-Math.floor(j/We),yt>F&&(We=I4(yt*We/F/M)*M),fa(u)||(ot=Math.pow(10,u),We=Math.ceil(We*ot)/ot),"ticks"===r?(Mt=Math.floor(j/We)*We,Xe=Math.ceil(X/We)*We):(Mt=j,Xe=X),ce&&we&&s&&function yce(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}((l-o)/s,We/1e3)?(yt=Math.round(Math.min((l-o)/We,v)),We=(l-o)/yt,Mt=o,Xe=l):ye?(Mt=ce?o:Mt,Xe=we?l:Xe,yt=p-1,We=(Xe-Mt)/yt):(yt=(Xe-Mt)/We,yt=Ew(yt,Math.round(yt),We/1e3)?Math.round(yt):Math.ceil(yt));const tn=Math.max(E4(We),E4(Mt));ot=Math.pow(10,fa(u)?tn:u),Mt=Math.round(Mt*ot)/ot,Xe=Math.round(Xe*ot)/ot;let zn=0;for(ce&&(I&&Mt!==o?(e.push({value:o}),Mt<o&&zn++,Ew(Math.round((Mt+zn*We)*ot)/ot,o,IH(o,Ae,i))&&zn++):Mt<o&&zn++);zn<yt;++zn)e.push({value:Math.round((Mt+zn*We)*ot)/ot});return we&&I&&Xe!==l?e.length&&Ew(e[e.length-1].value,l,IH(l,Ae,i))?e[e.length-1].value=l:e.push({value:l}):(!we||Xe===l)&&e.push({value:Xe}),e}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&S4(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Fw(t,this.chart.options.locale,this.options.ticks.format)}}class bL extends CS{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ou(t)?t:0,this.max=ou(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=pm(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function SH(i){return i/Math.pow(10,Math.floor(yg(i)))==1}bL.id="linear",bL.defaults={ticks:{callback:sS.formatters.numeric}};class xL extends I0{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=CS.prototype.parse.apply(this,[t,e]);if(0!==n)return ou(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ou(t)?Math.max(0,t):null,this.max=ou(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const s=u=>n=t?n:u,o=u=>r=e?r:u,l=(u,p)=>Math.pow(10,Math.floor(yg(u))+p);n===r&&(n<=0?(s(1),o(10)):(s(l(n,-1)),o(l(r,1)))),n<=0&&s(l(r,-1)),r<=0&&o(l(n,1)),this._zero&&this.min!==this._suggestedMin&&n===l(this.min,0)&&s(l(n,-1)),this.min=n,this.max=r}buildTicks(){const t=this.options,n=function Vfe(i,t){const e=Math.floor(yg(t.max)),n=Math.ceil(t.max/Math.pow(10,e)),r=[];let s=mg(i.min,Math.pow(10,Math.floor(yg(t.min)))),o=Math.floor(yg(s)),l=Math.floor(s/Math.pow(10,o)),u=o<0?Math.pow(10,Math.abs(o)):1;do{r.push({value:s,major:SH(s)}),++l,10===l&&(l=1,++o,u=o>=0?1:u),s=Math.round(l*Math.pow(10,o)*u)/u}while(o<e||o===e&&l<n);const p=mg(i.max,s);return r.push({value:p,major:SH(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&S4(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return void 0===t?"0":Fw(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=yg(t),this._valueRange=yg(this.max)-yg(t)}getPixelForValue(t){return(void 0===t||0===t)&&(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(yg(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function wL(i){const t=i.ticks;if(t.display&&i.display){const e=Sd(t.backdropPadding);return ho(t.font&&t.font.size,ea.font.size)+e.height}return 0}function Ufe(i,t,e){return e=Pl(e)?e:[e],{w:Kce(i,t.string,e),h:e.length*t.lineHeight}}function EH(i,t,e,n,r){return i===n||i===r?{start:t-e/2,end:t+e/2}:i<n||i>r?{start:t-e,end:t}:{start:t,end:t+e}}function Gfe(i,t,e,n,r){const s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e));let l=0,u=0;n.start<t.l?(l=(t.l-n.start)/s,i.l=Math.min(i.l,t.l-l)):n.end>t.r&&(l=(n.end-t.r)/s,i.r=Math.max(i.r,t.r+l)),r.start<t.t?(u=(t.t-r.start)/o,i.t=Math.min(i.t,t.t-u)):r.end>t.b&&(u=(r.end-t.b)/o,i.b=Math.max(i.b,t.b+u))}function jfe(i){return 0===i||180===i?"center":i<180?"left":"right"}function $fe(i,t,e){return"right"===e?i-=t:"center"===e&&(i-=t/2),i}function qfe(i,t,e){return 90===e||270===e?i-=t/2:(e>270||e<90)&&(i-=t),i}function TH(i,t,e,n){const{ctx:r}=i;if(e)r.arc(i.xCenter,i.yCenter,t,0,ul);else{let s=i.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<n;o++)s=i.getPointPosition(o,t),r.lineTo(s.x,s.y)}}xL.id="logarithmic",xL.defaults={ticks:{callback:sS.formatters.logarithmic,major:{enabled:!0}}};class $w extends CS{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Sd(wL(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=ou(t)&&!isNaN(t)?t:0,this.max=ou(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wL(this.options))}generateTickLabels(t){CS.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{const r=Rl(this.options.pointLabels.callback,[e,n],this);return r||0===r?r:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){const t=this.options;t.display&&t.pointLabels.display?function Hfe(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),n=[],r=[],s=i._pointLabels.length,o=i.options.pointLabels,l=o.centerPointLabels?sc/s:0;for(let u=0;u<s;u++){const p=o.setContext(i.getPointLabelContext(u));r[u]=p.padding;const v=i.getPointPosition(u,i.drawingArea+r[u],l),x=Ku(p.font),I=Ufe(i.ctx,x,i._pointLabels[u]);n[u]=I;const M=Dp(i.getIndexAngle(u)+l),F=Math.round(V2(M));Gfe(e,t,M,EH(F,v.x,I.w,0,180),EH(F,v.y,I.h,90,270))}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=function Wfe(i,t,e){const n=[],r=i._pointLabels.length,s=i.options,o=wL(s)/2,l=i.drawingArea,u=s.pointLabels.centerPointLabels?sc/r:0;for(let p=0;p<r;p++){const v=i.getPointPosition(p,l+o+e[p],u),x=Math.round(V2(Dp(v.angle+$c))),I=t[p],M=qfe(v.y,I.h,x),F=jfe(x),j=$fe(v.x,I.w,F);n.push({x:v.x,y:M,textAlign:F,left:j,top:M,right:j+I.w,bottom:M+I.h})}return n}(i,n,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return Dp(t*(ul/(this._pointLabels.length||1))+pm(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(fa(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(fa(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function Kfe(i,t,e){return u_(i,{label:e,index:t,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-$c+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:s}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),TH(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r}=e,s=this._pointLabels.length;let o,l,u;if(e.pointLabels.display&&function Xfe(i,t){const{ctx:e,options:{pointLabels:n}}=i;for(let r=t-1;r>=0;r--){const s=n.setContext(i.getPointLabelContext(r)),o=Ku(s.font),{x:l,y:u,textAlign:p,left:v,top:x,right:I,bottom:M}=i._pointLabelItems[r],{backdropColor:F}=s;if(!fa(F)){const j=b0(s.borderRadius),X=Sd(s.backdropPadding);e.fillStyle=F;const ce=v-X.left,we=x-X.top,ye=I-v+X.width,Ae=M-x+X.height;Object.values(j).some(We=>0!==We)?(e.beginPath(),kw(e,{x:ce,y:we,w:ye,h:Ae,radius:j}),e.fill()):e.fillRect(ce,we,ye,Ae)}C0(e,i._pointLabels[r],l,u+o.lineHeight/2,o,{color:s.color,textAlign:p,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((p,v)=>{0!==v&&(l=this.getDistanceFromCenterForValue(p.value),function Yfe(i,t,e,n){const r=i.ctx,s=t.circular,{color:o,lineWidth:l}=t;!s&&!n||!o||!l||e<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(t.borderDash),r.lineDashOffset=t.borderDashOffset,r.beginPath(),TH(i,e,s,n),r.closePath(),r.stroke(),r.restore())}(this,r.setContext(this.getContext(v-1)),l,s))}),n.display){for(t.save(),o=s-1;o>=0;o--){const p=n.setContext(this.getPointLabelContext(o)),{color:v,lineWidth:x}=p;!x||!v||(t.lineWidth=x,t.strokeStyle=v,t.setLineDash(p.borderDash),t.lineDashOffset=p.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),u=this.getPointPosition(o,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(u.x,u.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((l,u)=>{if(0===u&&!e.reverse)return;const p=n.setContext(this.getContext(u)),v=Ku(p.font);if(s=this.getDistanceFromCenterForValue(this.ticks[u].value),p.showLabelBackdrop){t.font=v.string,o=t.measureText(l.label).width,t.fillStyle=p.backdropColor;const x=Sd(p.backdropPadding);t.fillRect(-o/2-x.left,-s-v.size/2-x.top,o+x.width,v.size+x.height)}C0(t,l.label,0,-s,v,{color:p.color})}),t.restore()}drawTitle(){}}$w.id="radialLinear",$w.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:sS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:i=>i,padding:5,centerPointLabels:!1}},$w.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},$w.descriptors={angleLines:{_fallback:"grid"}};const bS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vf=Object.keys(bS);function Zfe(i,t){return i-t}function MH(i,t){if(fa(t))return null;const e=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts;let o=t;return"function"==typeof n&&(o=n(o)),ou(o)||(o="string"==typeof n?e.parse(o,n):e.parse(o)),null===o?null:(r&&(o="week"!==r||!rb(s)&&!0!==s?e.startOf(o,r):e.startOf(o,"isoWeek",s)),+o)}function DH(i,t,e,n){const r=Vf.length;for(let s=Vf.indexOf(i);s<r-1;++s){const o=bS[Vf[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(l*o.size))<=n)return Vf[s]}return Vf[r-1]}function LH(i,t,e){if(e){if(e.length){const{lo:n,hi:r}=H2(e,t);i[e[n]>=t?e[n]:e[r]]=!0}}else i[t]=!0}function PH(i,t,e){const n=[],r={},s=t.length;let o,l;for(o=0;o<s;++o)l=t[o],r[l]=o,n.push({value:l,major:!1});return 0!==s&&e?function epe(i,t,e,n){const r=i._adapter,s=+r.startOf(t[0].value,n),o=t[t.length-1].value;let l,u;for(l=s;l<=o;l=+r.add(l,1,n))u=e[l],u>=0&&(t[u].major=!0);return t}(i,n,r,e):n}let AL=(()=>{class i extends I0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n){const r=e.time||(e.time={}),s=this._adapter=new zhe._date(e.adapters.date);s.init(n),Iw(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return void 0===e?null:MH(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:l,maxDefined:u}=this.getUserBounds();function p(v){!l&&!isNaN(v.min)&&(s=Math.min(s,v.min)),!u&&!isNaN(v.max)&&(o=Math.max(o,v.max))}(!l||!u)&&(p(this._getLabelBounds()),("ticks"!==e.bounds||"labels"!==e.ticks.source)&&p(this.getMinMax(!1))),s=ou(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),o=ou(o)&&!isNaN(o)?o:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,u=function xce(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}(s,o,this.max);return this._unit=n.unit||(r.autoSkip?DH(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):function Qfe(i,t,e,n,r){for(let s=Vf.length-1;s>=Vf.indexOf(e);s--){const o=Vf[s];if(bS[o].common&&i._adapter.diff(r,n,o)>=t-1)return o}return Vf[e?Vf.indexOf(e):0]}(this,u.length,n.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function Jfe(i){for(let t=Vf.indexOf(i)+1,e=Vf.length;t<e;++t)if(bS[Vf[t]].common)return Vf[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&u.reverse(),PH(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let s,o,n=0,r=0;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),n=1===e.length?1-s:(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),r=1===e.length?o:(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;n=_h(n,0,l),r=_h(r,0,l),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,o=s.time,l=o.unit||DH(o.minUnit,n,r,this._getLabelCapacity(n)),u=ho(o.stepSize,1),p="week"===l&&o.isoWeekday,v=rb(p)||!0===p,x={};let M,F,I=n;if(v&&(I=+e.startOf(I,"isoWeek",p)),I=+e.startOf(I,v?"day":l),e.diff(r,n,l)>1e5*u)throw new Error(n+" and "+r+" are too far apart with stepSize of "+u+" "+l);const j="data"===s.ticks.source&&this.getDataTimestamps();for(M=I,F=0;M<r;M=+e.add(M,u,l),F++)LH(x,M,j);return(M===r||"ticks"===s.bounds||1===F)&&LH(x,M,j),Object.keys(x).sort((X,ce)=>X-ce).map(X=>+X)}getLabelForValue(e){const r=this.options.time;return this._adapter.format(e,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}_tickFormatFunction(e,n,r,s){const o=this.options,l=o.time.displayFormats,u=this._unit,p=this._majorUnit,x=p&&l[p],I=r[n],F=this._adapter.format(e,s||(p&&x&&I&&I.major?x:u&&l[u])),j=o.ticks.callback;return j?Rl(j,[F,n,r],this):F}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=pm(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:r*o+u*l,h:r*l+u*o}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,o=this._tickFormatFunction(e,0,PH(this,[e],this._majorUnit),s),l=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let n,r,e=this._cache.data||[];if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(MH(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return L4(e.sort(Zfe))}}return i.id="time",i.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},i})();function xS(i,t,e){let s,o,l,u,n=0,r=i.length-1;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=ay(i,"pos",t)),({pos:s,time:l}=i[n]),({pos:o,time:u}=i[r])):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=ay(i,"time",t)),({time:s,pos:l}=i[n]),({time:o,pos:u}=i[r]));const p=o-s;return p?l+(u-l)*(t-s)/p:l}class IL extends AL{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=xS(e,this.min),this._tableRange=xS(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],s=[];let o,l,u,p,v;for(o=0,l=t.length;o<l;++o)p=t[o],p>=e&&p<=n&&r.push(p);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)v=r[o+1],u=r[o-1],p=r[o],Math.round((v+u)/2)!==p&&s.push({time:p,pos:o/(l-1)});return s}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(xS(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return xS(this._table,n*this._tableRange+this._minPos,!0)}}IL.id="timeseries",IL.defaults=AL.defaults,fS.register(Bhe,Kde,Ofe,Object.freeze({__proto__:null,CategoryScale:_S,LinearScale:bL,LogarithmicScale:xL,RadialLinearScale:$w,TimeScale:AL,TimeSeriesScale:IL}));const ipe=fS;let rpe=(()=>{class i{constructor(e){this.el=e,this.plugins=[],this.responsive=!0,this.onDataSelect=new jn,this._options={}}get data(){return this._data}set data(e){this._data=e,this.reinit()}get options(){return this._options}set options(e){this._options=e,this.reinit()}ngAfterViewInit(){this.initChart(),this.initialized=!0}onCanvasClick(e){if(this.chart){const n=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),r=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);n&&n[0]&&r&&this.onDataSelect.emit({originalEvent:e,element:n[0],dataset:r})}}initChart(){let e=this.options||{};e.responsive=this.responsive,e.responsive&&(this.height||this.width)&&(e.maintainAspectRatio=!1),this.chart=new ipe(this.el.nativeElement.children[0].children[0],{type:this.type,data:this.data,options:this.options,plugins:this.plugins})}getCanvas(){return this.el.nativeElement.children[0].children[0]}getBase64Image(){return this.chart.toBase64Image()}generateLegend(){if(this.chart)return this.chart.generateLegend()}refresh(){this.chart&&this.chart.update()}reinit(){this.chart&&(this.chart.destroy(),this.initChart())}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.initialized=!1,this.chart=null)}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn))},i.\u0275cmp=Ar({type:i,selectors:[["p-chart"]],hostAttrs:[1,"p-element"],inputs:{type:"type",plugins:"plugins",width:"width",height:"height",responsive:"responsive",data:"data",options:"options"},outputs:{onDataSelect:"onDataSelect"},decls:2,vars:6,consts:[[2,"position","relative"],[3,"click"]],template:function(e,n){1&e&&(ct(0,"div",0)(1,"canvas",1),mn("click",function(s){return n.onCanvasClick(s)}),ht()()),2&e&&(tf("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height),De(1),vr("width",n.responsive&&!n.width?null:n.width)("height",n.responsive&&!n.height?null:n.height))},encapsulation:2,changeDetection:0}),i})(),spe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})(),RH=(()=>{class i{constructor(){this.fileDropped=new jn}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1}ondrop(e){e.preventDefault(),e.stopPropagation(),this.fileOver=!1;let n=e.dataTransfer.files;n.length>0&&this.fileDropped.emit(n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=qr({type:i,selectors:[["","dropZoneDirective",""]],hostVars:2,hostBindings:function(e,n){1&e&&mn("dragover",function(s){return n.onDragOver(s)})("dragleave",function(s){return n.onDragLeave(s)})("drop",function(s){return n.ondrop(s)}),2&e&&Tp("fileover",n.fileOver)},outputs:{fileDropped:"fileDropped"}}),i})();const ope=["myCytoscape"],ape=["myPng"],lpe=["myTreeTable"];function cpe(i,t){if(1&i){const e=Pi();ct(0,"span",32)(1,"span",33)(2,"p-checkbox",34),mn("ngModelChange",function(r){return wt(e),It(_e().groupEnabled=r)}),ht(),ct(3,"label",35),cr(4,"Group"),ht()(),ct(5,"span",33)(6,"p-checkbox",34),mn("ngModelChange",function(r){return wt(e),It(_e().drawModeEnabled=r)}),ht(),ct(7,"label",35),cr(8,"Draw mode"),ht()(),ct(9,"span",33)(10,"p"),cr(11),ht()()()}if(2&i){const e=_e();De(2),ve("ngModel",e.groupEnabled)("binary",!0)("readonly",!0),De(4),ve("ngModel",e.drawModeEnabled)("binary",!0)("readonly",!0),De(5),ds(e.selectorDisplay)}}function upe(i,t){if(1&i&&si(0,"img",36),2&i){const e=t.$implicit;ve("src",e.icon,$h)("alt",e.label)}}function hpe(i,t){if(1&i&&si(0,"img",36),2&i){const e=t.$implicit;ve("src",e.icon,$h)("alt",e.label)}}function dpe(i,t){if(1&i&&si(0,"img",36),2&i){const e=t.$implicit;ve("src",e.icon,$h)("alt",e.label)}}const SL=function(){return{width:"100%"}};function fpe(i,t){if(1&i){const e=Pi();ct(0,"div",37)(1,"div",38)(2,"div",39)(3,"span",40),si(4,"i",41),ht(),ct(5,"input",42),mn("ngModelChange",function(r){return wt(e),It(_e().captureData.clone=r)}),ht()()(),ct(6,"div",38)(7,"div",39)(8,"span",40),si(9,"i",43),ht(),ct(10,"input",42),mn("ngModelChange",function(r){return wt(e),It(_e().captureData.label=r)}),ht()()(),ct(11,"div",38)(12,"div",39)(13,"span",40),si(14,"i",44),ht(),ct(15,"p-dropdown",45),mn("ngModelChange",function(r){return wt(e),It(_e().captureData.alias=r)}),ht()()(),ct(16,"div",38)(17,"div",39)(18,"span",40),si(19,"i",46),ht(),ct(20,"p-dropdown",47),mn("ngModelChange",function(r){return wt(e),It(_e().captureData.tag=r)}),ht()()(),ct(21,"div",38)(22,"div",39)(23,"span",40),si(24,"i",48),ht(),ct(25,"input",42),mn("ngModelChange",function(r){return wt(e),It(_e().captureData.group=r)}),ht()()(),ct(26,"div",38)(27,"div",39)(28,"span",49)(29,"p-checkbox",50),mn("ngModelChange",function(r){return wt(e),It(_e()._lockedElement=r)})("onChange",function(r){return wt(e),It(_e().handleChangeLock(r))}),ht()(),si(30,"input",51),ht()()()}if(2&i){const e=_e();De(5),ve("ngModel",e.captureData.clone),De(5),ve("ngModel",e.captureData.label),De(5),la(xa(13,SL)),ve("options",e.allNodes)("ngModel",e.captureData.alias),De(5),la(xa(14,SL)),ve("options",e.captureData.tags)("ngModel",e.captureData.tag),De(5),ve("ngModel",e.captureData.group),De(4),ve("ngModel",e._lockedElement)("binary",!0)}}function ppe(i,t){if(1&i){const e=Pi();ct(0,"p-button",52),mn("click",function(){wt(e);const r=_e();return It(r.applyNodeUpdate(r.captureData))}),ht()}}function gpe(i,t){if(1&i){const e=Pi();ct(0,"div",37)(1,"div",38)(2,"div",39)(3,"span",40),si(4,"i",43),ht(),ct(5,"input",42),mn("ngModelChange",function(r){return wt(e),It(_e().captureData.label=r)}),ht()()(),ct(6,"div",38)(7,"div",39)(8,"span",40),si(9,"i",46),ht(),ct(10,"p-dropdown",47),mn("ngModelChange",function(r){return wt(e),It(_e().captureData.tag=r)}),ht()()(),ct(11,"div",38)(12,"div",39)(13,"span",40),si(14,"i",53),ht(),ct(15,"input",54),mn("ngModelChange",function(r){return wt(e),It(_e().currentSelectedEdge.data()._source=r)}),ht()()(),ct(16,"div",38)(17,"div",39)(18,"span",40),si(19,"i",55),ht(),ct(20,"input",54),mn("ngModelChange",function(r){return wt(e),It(_e().currentSelectedEdge.data()._target=r)}),ht()()()()}if(2&i){const e=_e();De(5),ve("ngModel",e.captureData.label),De(5),la(xa(7,SL)),ve("options",e.captureData.tags)("ngModel",e.captureData.tag),De(5),ve("ngModel",e.currentSelectedEdge.data()._source),De(5),ve("ngModel",e.currentSelectedEdge.data()._target)}}function mpe(i,t){if(1&i){const e=Pi();ct(0,"p-button",52),mn("click",function(){wt(e);const r=_e();return It(r.applyEdgeUpdate(r.captureData))}),ht()}}function vpe(i,t){if(1&i){const e=Pi();ct(0,"p-button",56),mn("click",function(){wt(e);const r=_e();return It(r.previewNewCData(r.captureData))}),ht(),ct(1,"p-button",57),mn("click",function(){wt(e);const r=_e();return It(r.applyNewCData(r.captureData))}),ht()}}const ype=function(){return{height:"94vh"}},_pe=function(){return{width:"35vw",height:"55vw"}},Cpe=function(){return{width:"40vw",height:"42vw"}},bpe=function(){return{width:"40vw",height:"32vw"}},EL=function(){return{width:"60vw",height:"50vw"}},xpe=function(){return{width:"100%",height:"28vw"}},wpe=function(){return{width:"40vw",height:"45vw"}},Ape=function(){return{width:"40%"}},Ipe=function(){return{"960px":"50vw"}};var TL=V(4826)(),Spe=V(2960);W1.use(Spe);var Epe=V(4147);W1.use(Epe),V(9050)(W1);let Mpe=(()=>{class i{constructor(e,n,r,s,o,l,u,p){this.graphsService=e,this.databaseService=n,this.clipboardService=r,this.logger=s,this.messageService=o,this.base16=l,this.store=u,this.route=p,this.displaySelectionNode=!1,this.displaySelectionEdge=!1,this.displayFinder=!1,this.displayMarkdown=!1,this.displayStyle=!1,this.dockRightItems=[{label:"Export GEXF to clipboard",tooltipOptions:{tooltipLabel:"Export GEXF to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-gexf.png",command:()=>{this.id&&(this.gexf(this.id,this.id),this.messageService.add({severity:"info",summary:"Info",detail:"Store GEXF in clipboard"}))}},{label:"Export GRAPHML to clipboard",tooltipOptions:{tooltipLabel:"Export GRAPHML to clipboard",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-graphml.png",command:()=>{this.id&&(this.graphml(this.id,this.id),this.messageService.add({severity:"info",summary:"Info",detail:"Store GRAPHML in clipboard"}))}},{label:"Export PNG",tooltipOptions:{tooltipLabel:"Export PNG",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/export-png.png",command:()=>{if(document){let v=this.cy?.png({bg:"white",full:!0})||"";this.myPng?.nativeElement.setAttribute("src",v)}this.displayExportPng=!0}},{label:"Save",tooltipOptions:{tooltipLabel:"Save current diagram",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/save.png",command:()=>{if(this.id){let v=this.toSysGraph(this.id,this.id);this.databaseService.storeGraph(v),this.messageService.add({severity:"info",summary:"Info",detail:"Save graph"})}}}],this.dockLeftItems=[{label:"Finder",tooltipOptions:{tooltipLabel:"Find element(s)",tooltipPosition:"right",positionTop:-15,positionLeft:15},icon:"assets/dock/find.png",command:()=>{this.displayFinder=!0}},{id:"style",label:"Display style",tooltipOptions:{tooltipLabel:"Display style simply drag and drop style file on this view",tooltipPosition:"top",positionTop:-15,positionLeft:15},icon:"assets/dock/style.png",command:()=>{this.displayStyle=!0}}],this.dockBottomItems=[],this.responsiveOptions=[{breakpoint:"1024px",numVisible:3},{breakpoint:"768px",numVisible:2},{breakpoint:"560px",numVisible:1}],this.subscriptions=[],this.displayExportPng=!1,this.displayTool=!0,this.searchNode="",this.graphs=[],this.allNodes=[],this.cols=[{field:"label",header:"Label"}],this.breadFirstLayoutOptions=new Boe,this.concentricLayoutOptions=new Noe,this.circleLayoutOptions=new Foe,this.gridLayoutOptions=new Ooe,this.coseLayoutOptions=new zoe,this.dagreLayoutOptions=new Voe,this.items=[],this.groupEnabled=!0,this.selectorDisplay="",this.drawModeEnabled=!1,this.rules=[],this.graph$=this.store.select(s2),this.graphs$=this.store.select(r2),this._lockedElement=!1,this.nodeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedNode||this.cy?.$(`#${this.currentSelectedNode.data().id}`).remove()}},{label:"Clone",icon:"pi pi-clone",command:()=>{this.onCloneNode(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedNode)return;let v=Qr.uniq(Qr.map(Qr.filter(this.databaseService.findAllTags(),I=>I.label&&"node"==I.selector),I=>I.label));v.unshift("");let x=this.currentSelectedNode.data().clone?this.currentSelectedNode.data().clone:this.currentSelectedNode.data().id;this.captureData={id:this.currentSelectedNode.data().id,clone:this.base16.decode(x),label:this.currentSelectedNode.data().label,alias:this.currentSelectedNode.data().alias,tag:this.currentSelectedNode.data().tag,group:this.currentSelectedNode.data().group,tags:v},setTimeout(()=>{this.captureData.tag=this.currentSelectedNode.data().tag},100),this.displaySelectionNode=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}},{label:"Link to node",icon:"pi pi-upload",command:()=>{this.edgehandles.start(this.currentSelectedNode),this.onClearAnySelection()}},{label:"Goto to alias",icon:"pi pi-arrow-right",command:()=>{this.onSelectAlias(this.currentSelectedNode)}}],this.edgeItem=[{label:"Drop",icon:"pi pi-trash",command:()=>{!this.currentSelectedEdge||this.cy?.$(`#${this.currentSelectedEdge.data().id}`).remove()}},{label:"Edit",icon:"pi pi-book",command:()=>{if(!this.currentSelectedEdge)return;let v=Qr.uniq(Qr.map(Qr.filter(this.databaseService.findAllTags(),x=>x.label&&"edge"==x.selector),x=>x.label));v.unshift(""),this.captureData={id:this.currentSelectedEdge.data().id,label:this.currentSelectedEdge.data().label,tag:this.currentSelectedEdge.data().tag,tags:v},setTimeout(()=>{this.captureData.tag=this.currentSelectedEdge.data().tag},100),this.displaySelectionEdge=!0}},{label:"Documentation",icon:"pi pi-eye",command:()=>{this.displayMarkdown=!0}}],this.coreItem=[{label:"Add new node",icon:"pi pi-plus",command:()=>{this.createNewNode()}},{label:"Group",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleGroupEnabled()}},{label:"Statistics",icon:"pi pi-chart-pie",command:()=>{let v=Qr.sortBy(Qr.filter(Qr.map(this.cy?.nodes(),I=>I.data().group),I=>I&&""!==I)),x={};Qr.each(v,I=>{x[I]?x[I]+=1:x[I]=1}),this.dataGroupStatistics={datasets:[{data:Qr.map(x,(I,M)=>I),backgroundColor:Qr.map(x,(I,M)=>{switch(I){case 1:return"#42A5F5";case 2:return"#66BB6A";case 3:return"#FFA726";case 4:return"#26C6DA";default:return"#7E57C2"}}),label:"My dataset"}],labels:Qr.map(x,(I,M)=>M)},this.displayGroupStatistic=!0}}]},{label:"Layout",icon:"pi pi-sitemap",items:[{label:"Bread First Layout",icon:"pi pi-ellipsis-h",command:()=>{this.breadFirstLayoutOptions&&this.cy?.layout(this.breadFirstLayoutOptions).run(),this.onClearAnySelection()}},{label:"Concentric Layout",icon:"pi pi-ellipsis-h",command:()=>{this.concentricLayoutOptions&&this.cy?.layout(this.concentricLayoutOptions).run(),this.onClearAnySelection()}},{label:"Circle Layout",icon:"pi pi-ellipsis-h",command:()=>{this.circleLayoutOptions&&this.cy?.layout(this.circleLayoutOptions).run(),this.onClearAnySelection()}},{label:"Grid Layout",icon:"pi pi-ellipsis-h",command:()=>{this.gridLayoutOptions&&this.cy?.layout(this.gridLayoutOptions).run(),this.onClearAnySelection()}},{label:"Cose Layout",icon:"pi pi-ellipsis-h",command:()=>{this.coseLayoutOptions&&this.cy?.layout(this.coseLayoutOptions).run(),this.onClearAnySelection()}},{label:"Dagre Layout",icon:"pi pi-ellipsis-h",command:()=>{this.dagreLayoutOptions&&this.cy?.layout(this.dagreLayoutOptions).run(),this.onClearAnySelection()}}]},{label:"Zoom",icon:"pi pi-circle",items:[{label:"0.1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.1)}},{label:"0.2",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.2)}},{label:"0.3",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.3)}},{label:"0.5",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.5)}},{label:"0.6",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.6)}},{label:"0.75",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(.75)}},{label:"1",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.zoom(1)}},{label:"fit",icon:"pi pi-ellipsis-h",command:()=>{this.cy?.fit()}}]},{label:"Draw mode",icon:"pi pi-share-alt",items:[{label:"Toggle",icon:"pi pi-undo",command:()=>{this.onToggleDrawModeEnabled()}}]}],this.captureData={},this.tags="",this.tags$=this.store.select(Moe),this.currentSelectedNode=void 0,this.currentSelectedEdge=void 0,this.dataGroupStatistics={datasets:[{data:[],backgroundColor:[],label:"Dataset"}],labels:[]},this.displayGroupStatistic=!1,this.config={dark:!1},this.preferences=this.databaseService.retrievePreferences(),this.subscriptions.push(this.graph$.subscribe(v=>{if(v){if(this.cy?.startBatch(),this.cy?.boxSelectionEnabled(this.boxSelectionEnabled),this.cy?.nodes().remove(),this.cy?.edges().remove(),this.graphs=[],v.nodes&&(this.graphs.push(this.buildChildNodes(v)),this.allNodes=Qr.map(v.nodes,x=>this.base16.decode(x.id)),this.allNodes.unshift(""),this.cy?.add(Qr.map(v.nodes,x=>{let I={data:{id:x.id,label:x.label,cdata:x.cdata,alias:x.alias,group:x.group,tag:x.tag},position:{x:x.x,y:x.y}};return x.parent&&(I.data.parent=x.parent),I}))),v.edges&&(this.graphs.push(this.buildChildEdges(v)),this.cy?.add(Qr.map(v.edges,x=>({data:{id:x.id,label:x.label,cdata:x.cdata,source:x.source||"",target:x.target||"",_source:l.decode(x.source||""),_target:l.decode(x.target||""),tag:x.tag}})))),this.cy){this.edgehandles&&this.edgehandles.destroy(),Qr.each(this.rules,M=>{M.destroy()}),this.rules=[];let x=Qr.uniq(Qr.map(Qr.filter(v.nodes,M=>""!==M.group),M=>M.group)),I=this.cy;this.edgehandles=I.edgehandles(),Qr.each(x,M=>{let F=this.cy?.$(`[group = "${M}"]`);this.rules.push(I.automove({nodesMatching:F,reposition:"drag",dragWith:F}))})}this.cy?.endBatch(),this.cy?.fit()}})),this.subscriptions.push(this.tags$.subscribe(v=>{!v||(this.tags=JSON.stringify(v,null,2),this.cy?.style(this.retrieveStyle()))}))}ngOnInit(){this.route.queryParams.subscribe(n=>{this.id=n.id});let e=this.graphsService.getAllTags();this.store.dispatch(B2({tags:e})),this.items=this.coreItem}onSelectAlias(e){if(e.data()&&e.data().alias){let n=this.cy?.$(`#${this.base16.encode(e.data().alias)}`);this.logger.info("Alias",e.data().alias,n),this.cy?.center(n)}}applyNodeUpdate(e){this.cy?.$(`#${e.id}`).data("clone",this.base16.encode(e.clone)).data("alias",e.alias).data("group",e.group).data("label",e.label).data("tag",e.tag),this.displaySelectionNode=!1}applyEdgeUpdate(e){this.cy?.$(`#${e.id}`).data("label",e.label).data("tag",e.tag),this.displaySelectionEdge=!1}ngOnDestroy(){this.subscriptions&&Qr.each(this.subscriptions,e=>{e.unsubscribe()})}onHide(){this.onClearAnySelection()}createNewNode(){this.cy?.add([{data:{id:this.base16.encode(`default@${o4()}`),label:"default",cdata:"TODO ...",tag:""},position:{x:0,y:0}}])}nodeSelect(e){let n=[{opacity:.2},{opacity:1}],r=this.cy?.$(`#${this.selectedNode.key}`);this.cy?.center(r),this.selectedNode.data._source?(this.animate(this.cy?.$(`#${this.selectedNode.data._source}`),n),this.animate(this.cy?.$(`#${this.selectedNode.data._target}`),n)):this.animate(this.cy?.$(`#${this.selectedNode.data._id}`),n)}onToggleGroupEnabled(){this.groupEnabled?(this.groupEnabled=!1,Qr.each(this.rules,e=>{e.disable()})):(this.groupEnabled=!0,Qr.each(this.rules,e=>{e.enable()})),this.onClearAnySelection()}onToggleDrawModeEnabled(){this.drawModeEnabled?(this.edgehandles.disableDrawMode(),this.drawModeEnabled=!1):(this.edgehandles.enableDrawMode(),this.drawModeEnabled=!0),this.onClearAnySelection()}buildChildNodes(e){return{key:"1",label:"Nodes",data:{uid:1,label:"Nodes"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:Qr.map(e.nodes,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,label:n.label},icon:"pi pi-fw pi-clone",children:[]}))}}buildChildEdges(e){return{key:"1",label:"Edges",data:{uid:2,label:"Edges"},expandedIcon:"pi pi-folder-open",collapsedIcon:"pi pi-folder",children:Qr.map(e.edges,n=>({key:n.id,leaf:!0,label:n.label,data:{_id:n.id,_source:n.source,_target:n.target,label:n.label},icon:"pi pi-fw pi-share-alt",children:[]}))}}onFileDropped(e){let n=e[0].name;this.id&&n.endsWith(".json")?this.onFileStyleDropped(e):this.id&&n.endsWith(".gexf")&&this.onFileGexfDropped(e)}onFileGexfDropped(e){this.messageService.add({severity:"info",summary:"Upload/GEXF",detail:`Filename ${e[0].name}`}),this.id&&this.graphsService.uploadHandler(e[0],this.id,this.id).then(n=>{this.databaseService.storeGraph(n),this.store.dispatch(C1({graph:n}))})}onFileStyleDropped(e){var n=this;this.messageService.add({severity:"info",summary:"Upload/Style",detail:`Filename ${e[0].name}`});let r=new FileReader;r.addEventListener("loadend",eb(function*(){let s=JSON.parse(r.result+"");n.graphsService.saveTags(s),n.store.dispatch(B2({tags:s}))})),r.readAsText(e[0])}ngAfterViewInit(){this.cy=W1({container:this.myGraph?.nativeElement,layout:{name:"preset"},motionBlur:!0,selectionType:"single",boxSelectionEnabled:!1,style:this.retrieveStyle()}),this.preferences.grid&&this.cy?.snapToGrid(),this.cy.on("mouseover",e=>{this.logger.debug(e)}),this.cy.on("mouseout",e=>{this.logger.debug(e)}),this.cy.on("dblclick","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickNode(e)}),this.cy.on("dblclick","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onDblClickEdge(e)}),this.cy.on("cxttap","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickNode(e)}),this.cy.on("cxttap","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onRightClickEdge(e)}),this.cy.on("click",e=>{this.onClearAnySelection()}),this.cy.on("click","node",e=>{this.items=this.nodeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickNode(e)}),this.cy.on("click","edge",e=>{this.items=this.edgeItem,this.selectorDisplay=this.base16.decode(e.target.id()),this.onLeftClickEdge(e)}),this.cy.on("mouseover",e=>{}),this.route.params.subscribe(e=>{this.id=e.label;let n=this.graphsService.getGraph(this.id+"");n&&this.store.dispatch(C1({graph:n}))})}onRightClickNode(e){this.logger.info("[NODE] rclick",e)}onRightClickEdge(e){this.logger.info("[EDGE] rclick",e)}onDblClickNode(e){this.logger.info("[NODE] dblclick",e)}onDblClickEdge(e){this.logger.info("[EDGE] dblclick",e)}onLeftClickNode(e){this.logger.info("[NODE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.messageService.add({severity:"info",summary:`Select node ${e.target.data().label}`,detail:`${this.base16.decode(e.target.id())}`}),this.currentSelectedEdge=void 0,this.currentSelectedNode=e.target[0],this.captureData=this.currentSelectedNode.data().cdata?{selectElementId:this.currentSelectedNode.data().id,selectElementCdata:TL.render(this.currentSelectedNode.data().cdata),selectElementRawCdata:this.currentSelectedNode.data().cdata}:{selectElementId:this.currentSelectedNode.data().id,selectElementCdata:"",selectElementRawCdata:this.currentSelectedNode.data().cdata},this._lockedElement=this.currentSelectedNode.locked()}onLeftClickEdge(e){this.logger.info("[EDGE] lclick",e),this.selectorDisplay=this.base16.decode(e.target.id()),this.messageService.add({severity:"info",summary:`Select edge ${e.target.data().label}`,detail:`${this.base16.decode(e.target.id())}`}),this.currentSelectedNode=void 0,this.currentSelectedEdge=e.target[0],this.captureData=this.currentSelectedEdge.data().cdata?{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:TL.render(this.currentSelectedEdge.data().cdata),selectElementRawCdata:this.currentSelectedEdge.data().cdata}:{selectElementId:this.currentSelectedEdge.data().id,selectElementCdata:"",selectElementRawCdata:this.currentSelectedEdge.data().cdata}}previewNewCData(e){e.selectElementCdata=TL.render(e.selectElementRawCdata)}applyNewCData(e){this.logger.info("Apply new data on id",this.base16.decode(e.selectElementId)),this.cy?.$(`#${e.selectElementId}`).data("cdata",e.selectElementRawCdata),this.displayMarkdown=!1}onCloneNode(e){1===e.length&&e[0].isNode()&&this.cy?.add(Qr.map(e,n=>{let s=`${this.base16.decode(n.data()?.id).split("@")[0]}@${o4()}`,o={data:{id:this.base16.encode(s),label:n.data()?.label,cdata:"TODO ...",group:"",tag:n.data()?.tag},position:{x:n.position().x+50,y:n.position().y+50}};return n.data()?.parent&&(o.data.parent=n.data()?.parent),this.logger.info("Clone node",o),o}))}onCloneEdge(e){}onClearAnySelection(){this.logger.info("Clear selection"),this.selectorDisplay="",this.currentSelectedEdge=void 0,this.currentSelectedNode=void 0,this.items=this.coreItem}retrieveStyle(){let e=this.graphsService.getAllTags(),n=[];Qr.each(e,s=>{if(s.label)n.push({selector:`${s.selector}[tag = '${s.label}']`,css:s.style?.css?s.style?.css:{}});else{let o={selector:`${s.selector}`,css:s.style?.css?s.style?.css:{}};void 0===o.css.content&&(o.css.content=l=>{let u=l.data().cdata?"*":"",p=l.data().alias?"...":"";return l.data().label&&l.data().group?`${l.data().label} (${l.data().group}) ${u} ${p}`:l.data().label?`${l.data().label} ${u}`:""}),n.push(o)}});let r=[];return Qr.each(n,s=>{r.push(s)}),r}onSelect(e){let n=[{opacity:.2},{opacity:1}];e._source?(this.animate(this.cy?.$(`#${e._source}`),n),this.animate(this.cy?.$(`#${e._target}`),n)):this.animate(this.cy?.$(`#${e._id}`),n)}animate(e,n){if(e&&e.length>0){let r=e[0],s=Qr.map(n,o=>()=>{r.animate({style:o},{duration:250})});Qr.each(s,o=>o())}}handleChangeLock(e){if(!this.currentSelectedNode)return;this.logger.info("lock",this.currentSelectedNode.data().id);let n=this.cy?.$(`#${this.currentSelectedNode.data().id}`);this.logger.info("lock",n),e.checked?(n?.lock(),n?.animate({style:{opacity:.2}},{duration:1e3})):(n?.animate({style:{opacity:1}},{duration:1e3}),n?.unlock())}toSysGraph(e,n){let r={};return{id:e,label:n,nodes:Qr.map(this.cy?.nodes(),s=>{let o={id:s.data().clone||s.data().id||"",label:s.data().label||"",x:s.position().x||0,y:s.position().y||0,size:10,color:"0",group:s.data().group,tag:s.data().tag};return r[s.data().id||""]=o,s.data().alias&&(o.alias=s.data().alias),s.data().cdata&&(o.cdata=s.data().cdata),s.data().parent&&(o.parent=s.data().parent),o}),edges:Qr.map(this.cy?.edges(),s=>{let o=s.data().source,l=s.data().target,u={id:s.data().id||"",label:s.data().label||"",source:o,target:l,cdata:s.data().cdata,tag:s.data().tag};return s.data().cdata&&(u.cdata=s.data().cdata),u})}}gexf(e,n){let r=this.toSysGraph(e,n);this.clipboardService.copyTextToClipboard(this.graphsService.toGexf(r).join("\n"))}graphml(e,n){let r=this.toSysGraph(e,n);this.clipboardService.copyTextToClipboard(this.graphsService.toGraphml(r).join("\n"))}updateChartOptions(){this.chartOptions=this.config&&this.config.dark?this.getDarkTheme():this.getLightTheme()}getLightTheme(){return{plugins:{legend:{labels:{color:"#495057"}}},scales:{r:{grid:{color:"#ebedef"}}}}}getDarkTheme(){return{plugins:{legend:{labels:{color:"#ebedef"}}},scales:{r:{grid:{color:"rgba(255,255,255,0.2)"}}}}}}return i.\u0275fac=function(e){return new(e||i)(Qt(I1),Qt(uw),Qt(l2),Qt(dm),Qt(Jv),Qt(xz),Qt(f0),Qt(Jy))},i.\u0275cmp=Ar({type:i,selectors:[["app-graph-cytoscape"]],viewQuery:function(e,n){if(1&e&&(is(ope,5),is(ape,5),is(lpe,5)),2&e){let r;or(r=ar())&&(n.myGraph=r.first),or(r=ar())&&(n.myPng=r.first),or(r=ar())&&(n.myTreeTable=r.first)}},decls:42,vars:79,consts:[[3,"target","model"],["cm",""],["class","cytoscape-selector",4,"ngIf"],[1,"dock-window"],["position","left",3,"model"],["pTemplate","item"],["position","right",3,"model"],["position","bottom",3,"model"],["area",""],[1,"flex"],["dropZoneDirective","",1,"w-12",3,"fileDropped"],["id","cytoscape",1,"cytoscape-container"],["myCytoscape",""],["header","Find any element",3,"visible","maximizable","draggable","resizable","visibleChange"],["selectionMode","single","filterMode","strict",3,"value","selection","filter","selectionChange","onNodeSelect"],["myTree",""],["header","Current node",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["class","grid p-fluid",4,"ngIf"],["pTemplate","footer"],["header","Current edge",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["header","Documentation",3,"visible","modal","maximizable","draggable","resizable","visibleChange","onHide"],["header","Preview"],[3,"innerHTML"],["header","Edit"],["pInputTextarea","",3,"ngModel","ngModelChange"],["header","Group statistics",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["type","polarArea",3,"data","options"],["header","Drag and drop file to update style",3,"modal","visible","maximizable","breakpoints","draggable","resizable","visibleChange"],["dropZoneDirective","",3,"fileDropped"],["header","Png file to export","header","Png export",3,"modal","visible","visibleChange"],["src",""],["myPng",""],[1,"cytoscape-selector"],[1,"field-checkbox"],["inputId","binary",3,"ngModel","binary","readonly","ngModelChange"],["for","binary"],["width","100%",3,"src","alt"],[1,"grid","p-fluid"],[1,"col-12"],[1,"p-inputgroup"],[1,"p-inputgroup-addon"],["pTooltip","Internal ID to override current ID on next save or diagram export","tooltipPosition","top",1,"pi","pi-bookmark"],["type","text","pInputText","","placeholder","",3,"ngModel","ngModelChange"],["pTooltip","Label","tooltipPosition","top",1,"pi","pi-hashtag"],["pTooltip","Alias for","tooltipPosition","top",1,"pi","pi-link"],["scrollHeight","120px","defaultLabel","Select an alias",3,"options","ngModel","ngModelChange"],["pTooltip","Tags","tooltipPosition","top",1,"pi","pi-tags"],["scrollHeight","120px","defaultLabel","Select a tag",3,"options","ngModel","ngModelChange"],["pTooltip","Group","tooltipPosition","top",1,"pi","pi-clone"],["pTooltip","Locked item ?","tooltipPosition","top",1,"p-inputgroup-addon"],["inputId","binary",3,"ngModel","binary","ngModelChange","onChange"],["type","text","pInputText","","placeholder","Locked","readonly","true"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"],["pTooltip","Source","tooltipPosition","top",1,"pi","pi-cog"],["type","text","pInputText","","placeholder","","readonly","true",3,"ngModel","ngModelChange"],["pTooltip","Target","tooltipPosition","top",1,"pi","pi-cog"],["icon","pi pi-check","label","Preview","styleClass","p-button-text",3,"click"],["icon","pi pi-save","label","Update","styleClass","p-button-text",3,"click"]],template:function(e,n){1&e&&(si(0,"p-contextMenu",0,1)(2,"p-toast"),Ze(3,cpe,12,7,"span",2),ct(4,"div",3)(5,"p-dock",4),Ze(6,upe,1,2,"ng-template",5),ht(),ct(7,"p-dock",6),Ze(8,hpe,1,2,"ng-template",5),ht(),ct(9,"p-dock",7),Ze(10,dpe,1,2,"ng-template",5),ht()(),ct(11,"div",null,8)(13,"div",9)(14,"div",10),mn("fileDropped",function(s){return n.onFileDropped(s)}),si(15,"div",11,12),ht()()(),ct(17,"p-dialog",13),mn("visibleChange",function(s){return n.displayFinder=s}),ct(18,"p-tree",14,15),mn("selectionChange",function(s){return n.selectedNode=s})("onNodeSelect",function(s){return n.nodeSelect(s)}),ht()(),ct(20,"p-dialog",16),mn("visibleChange",function(s){return n.displaySelectionNode=s})("onHide",function(){return n.onHide()}),Ze(21,fpe,31,15,"div",17),Ze(22,ppe,1,0,"ng-template",18),ht(),ct(23,"p-dialog",19),mn("visibleChange",function(s){return n.displaySelectionEdge=s})("onHide",function(){return n.onHide()}),Ze(24,gpe,21,8,"div",17),Ze(25,mpe,1,0,"ng-template",18),ht(),ct(26,"p-dialog",20),mn("visibleChange",function(s){return n.displayMarkdown=s})("onHide",function(){return n.onHide()}),ct(27,"p-tabView")(28,"p-tabPanel",21),si(29,"div",22),ht(),ct(30,"p-tabPanel",23)(31,"textarea",24),mn("ngModelChange",function(s){return n.captureData.selectElementRawCdata=s}),ht()()(),Ze(32,vpe,2,0,"ng-template",18),ht(),ct(33,"p-dialog",25),mn("visibleChange",function(s){return n.displayGroupStatistic=s}),si(34,"p-chart",26),ht(),ct(35,"p-dialog",27),mn("visibleChange",function(s){return n.displayStyle=s}),ct(36,"pre",28),mn("fileDropped",function(s){return n.onFileDropped(s)}),cr(37),ht()(),ct(38,"p-dialog",29),mn("visibleChange",function(s){return n.displayExportPng=s}),si(39,"img",30,31)(41,"img"),ht()),2&e&&(ve("target",co(12))("model",n.items),De(3),ve("ngIf",n.preferences.info),De(2),ve("model",n.dockLeftItems),De(2),ve("model",n.dockRightItems),De(2),ve("model",n.dockBottomItems),De(5),la(xa(68,ype)),De(3),la(xa(69,_pe)),ve("visible",n.displayFinder)("maximizable",!0)("draggable",!0)("resizable",!1),De(1),ve("value",n.graphs)("selection",n.selectedNode)("filter",!0),De(2),la(xa(70,Cpe)),ve("visible",n.displaySelectionNode)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),De(1),ve("ngIf",n.currentSelectedNode),De(2),la(xa(71,bpe)),ve("visible",n.displaySelectionEdge)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),De(1),ve("ngIf",n.currentSelectedEdge),De(2),la(xa(72,EL)),ve("visible",n.displayMarkdown)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),De(3),ve("innerHTML",n.captureData.selectElementCdata,Oa),De(2),la(xa(73,xpe)),ve("ngModel",n.captureData.selectElementRawCdata),De(2),la(xa(74,wpe)),ve("visible",n.displayGroupStatistic)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!1),De(1),la(xa(75,Ape)),ve("data",n.dataGroupStatistics)("options",n.chartOptions),De(1),la(xa(76,EL)),ve("modal",!0)("visible",n.displayStyle)("maximizable",!0)("breakpoints",xa(77,Ipe))("draggable",!1)("resizable",!1),De(2),ds(n.tags),De(1),la(xa(78,EL)),ve("modal",!0)("visible",n.displayExportPng))},dependencies:[Oo,_l,B1,O2,l4,s_,L2,F2,P2,fae,hw,dw,r_,h4,u4,m4,Jle,_4,rpe,RH],styles:[".cytoscape-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;padding:0;overflow:hidden}.cytoscape-selector[_ngcontent-%COMP%]{position:absolute;top:100px;left:50px;width:50%;z-index:-10000}"]}),i})(),Dpe=(()=>{class i{constructor(e,n,r){this.messageService=e,this.databaseService=n,this.logger=r}uploadHandler(e){return new Promise(n=>{let r=new FileReader;r.addEventListener("loadend",eb(function*(){for(var s=new Uint8Array(r.result),o=s.length,l=[];o--;)l[o]=String.fromCharCode(s[o]);var u=window.btoa(l.join(""));n(u)})),r.readAsArrayBuffer(e)})}}return i.\u0275fac=function(e){return new(e||i)(Xn(Jv),Xn(uw),Xn(dm))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Lpe=["container"];function Ppe(i,t){1&i&&qi(0)}function Rpe(i,t){if(1&i){const e=Pi();ct(0,"div",5),mn("mousedown",function(r){wt(e);const s=_e().index;return It(_e().onGutterMouseDown(r,s))})("touchstart",function(r){wt(e);const s=_e().index;return It(_e().onGutterTouchStart(r,s))}),si(1,"div",6),ht()}2&i&&ve("ngStyle",_e(2).gutterStyle())}function kpe(i,t){if(1&i&&(ct(0,"div",0),Ze(1,Ppe,1,0,"ng-container",3),ht(),Ze(2,Rpe,2,1,"div",4)),2&i){const e=t.$implicit,n=t.index,r=_e();Vr(r.panelStyleClass),ve("ngClass",r.panelContainerClass())("ngStyle",r.panelStyle),De(1),ve("ngTemplateOutlet",e),De(1),ve("ngIf",n!==r.panels.length-1)}}let Ope=(()=>{class i{constructor(e,n){this.cd=e,this.el=n,this.stateStorage="session",this.stateKey=null,this.layout="horizontal",this.gutterSize=4,this.minSizes=[],this.onResizeEnd=new jn,this.onResizeStart=new jn,this.nested=!1,this.panels=[],this.dragging=!1,this.mouseMoveListener=null,this.mouseUpListener=null,this.touchMoveListener=null,this.touchEndListener=null,this.size=null,this.gutterElement=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.nextPanelSize=null,this.prevPanelSize=null,this._panelSizes=[],this.prevPanelIndex=null}get panelSizes(){return this._panelSizes}set panelSizes(e){if(this._panelSizes=e,this.el&&this.el.nativeElement&&this.panels.length>0){let n=[...this.el.nativeElement.children[0].children].filter(s=>Gt.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"})}}ngOnInit(){this.nested=this.isNested()}ngAfterContentInit(){this.templates.forEach(e=>{e.getType(),this.panels.push(e.template)})}ngAfterViewInit(){if(this.panels&&this.panels.length){let e=!1;if(this.isStateful()&&(e=this.restoreState()),!e){let n=[...this.el.nativeElement.children[0].children].filter(s=>Gt.hasClass(s,"p-splitter-panel")),r=[];this.panels.map((s,o)=>{let u=(this.panelSizes.length-1>=o?this.panelSizes[o]:null)||100/this.panels.length;r[o]=u,n[o].style.flexBasis="calc("+u+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),this._panelSizes=r}}}resizeStart(e,n){this.gutterElement=e.currentTarget,this.size=this.horizontal()?Gt.getWidth(this.containerViewChild.nativeElement):Gt.getHeight(this.containerViewChild.nativeElement),this.dragging=!0,this.startPos=this.horizontal()?e.pageX||e.changedTouches[0].pageX:e.pageY||e.changedTouches[0].pageY,this.prevPanelElement=this.gutterElement.previousElementSibling,this.nextPanelElement=this.gutterElement.nextElementSibling,this.prevPanelSize=100*(this.horizontal()?Gt.getOuterWidth(this.prevPanelElement,!0):Gt.getOuterHeight(this.prevPanelElement,!0))/this.size,this.nextPanelSize=100*(this.horizontal()?Gt.getOuterWidth(this.nextPanelElement,!0):Gt.getOuterHeight(this.nextPanelElement,!0))/this.size,this.prevPanelIndex=n,Gt.addClass(this.gutterElement,"p-splitter-gutter-resizing"),Gt.addClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.onResizeStart.emit({originalEvent:e,sizes:this._panelSizes})}onResize(e){let n;n=this.horizontal()?100*e.pageX/this.size-100*this.startPos/this.size:100*e.pageY/this.size-100*this.startPos/this.size;let r=this.prevPanelSize+n,s=this.nextPanelSize-n;this.validateResize(r,s)&&(this.prevPanelElement.style.flexBasis="calc("+r+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this.nextPanelElement.style.flexBasis="calc("+s+"% - "+(this.panels.length-1)*this.gutterSize+"px)",this._panelSizes[this.prevPanelIndex]=r,this._panelSizes[this.prevPanelIndex+1]=s)}resizeEnd(e){this.isStateful()&&this.saveState(),this.onResizeEnd.emit({originalEvent:e,sizes:this._panelSizes}),Gt.removeClass(this.gutterElement,"p-splitter-gutter-resizing"),Gt.removeClass(this.containerViewChild.nativeElement,"p-splitter-resizing"),this.clear()}onGutterMouseDown(e,n){this.resizeStart(e,n),this.bindMouseListeners()}onGutterTouchStart(e,n){e.cancelable&&(this.resizeStart(e,n),this.bindTouchListeners(),e.preventDefault())}onGutterTouchEnd(e){this.resizeEnd(e),this.unbindTouchListeners(),e.cancelable&&e.preventDefault()}validateResize(e,n){return!(this.minSizes.length>=1&&this.minSizes[0]&&this.minSizes[0]>e||this.minSizes.length>1&&this.minSizes[1]&&this.minSizes[1]>n)}bindMouseListeners(){this.mouseMoveListener||(this.mouseMoveListener=e=>this.onResize(e),document.addEventListener("mousemove",this.mouseMoveListener)),this.mouseUpListener||(this.mouseUpListener=e=>{this.resizeEnd(e),this.unbindMouseListeners()},document.addEventListener("mouseup",this.mouseUpListener))}bindTouchListeners(){this.touchMoveListener||(this.touchMoveListener=e=>this.onResize(e.changedTouches[0]),document.addEventListener("touchmove",this.touchMoveListener)),this.touchEndListener||(this.touchEndListener=e=>{this.resizeEnd(e),this.unbindTouchListeners()},document.addEventListener("touchend",this.touchEndListener))}unbindMouseListeners(){this.mouseMoveListener&&(document.removeEventListener("mousemove",this.mouseMoveListener),this.mouseMoveListener=null),this.mouseUpListener&&(document.removeEventListener("mouseup",this.mouseUpListener),this.mouseUpListener=null)}unbindTouchListeners(){this.touchMoveListener&&(document.removeEventListener("touchmove",this.touchMoveListener),this.touchMoveListener=null),this.touchEndListener&&(document.removeEventListener("touchend",this.touchEndListener),this.touchEndListener=null)}clear(){this.dragging=!1,this.size=null,this.startPos=null,this.prevPanelElement=null,this.nextPanelElement=null,this.prevPanelSize=null,this.nextPanelSize=null,this.gutterElement=null,this.prevPanelIndex=null}isNested(){if(this.el.nativeElement){let e=this.el.nativeElement.parentElement;for(;e&&!Gt.hasClass(e,"p-splitter");)e=e.parentElement;return null!==e}return!1}isStateful(){return null!=this.stateKey}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}saveState(){this.getStorage().setItem(this.stateKey,JSON.stringify(this._panelSizes))}restoreState(){const n=this.getStorage().getItem(this.stateKey);return!!n&&(this._panelSizes=JSON.parse(n),[...this.containerViewChild.nativeElement.children].filter(s=>Gt.hasClass(s,"p-splitter-panel")).forEach((s,o)=>{s.style.flexBasis="calc("+this._panelSizes[o]+"% - "+(this.panels.length-1)*this.gutterSize+"px)"}),!0)}containerClass(){return{"p-splitter p-component":!0,"p-splitter-horizontal":"horizontal"===this.layout,"p-splitter-vertical":"vertical"===this.layout}}panelContainerClass(){return{"p-splitter-panel":!0,"p-splitter-panel-nested":!0}}gutterStyle(){return this.horizontal()?{width:this.gutterSize+"px"}:{height:this.gutterSize+"px"}}horizontal(){return"horizontal"===this.layout}}return i.\u0275fac=function(e){return new(e||i)(Qt(Ho),Qt(qn))},i.\u0275cmp=Ar({type:i,selectors:[["p-splitter"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&is(Lpe,5),2&e){let r;or(r=ar())&&(n.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(e,n){2&e&&Tp("p-splitter-panel-nested",n.nested)},inputs:{styleClass:"styleClass",panelStyleClass:"panelStyleClass",style:"style",panelStyle:"panelStyle",stateStorage:"stateStorage",stateKey:"stateKey",layout:"layout",gutterSize:"gutterSize",minSizes:"minSizes",panelSizes:"panelSizes"},outputs:{onResizeEnd:"onResizeEnd",onResizeStart:"onResizeStart"},decls:3,vars:5,consts:[[3,"ngClass","ngStyle"],["container",""],["ngFor","",3,"ngForOf"],[4,"ngTemplateOutlet"],["class","p-splitter-gutter",3,"ngStyle","mousedown","touchstart",4,"ngIf"],[1,"p-splitter-gutter",3,"ngStyle","mousedown","touchstart"],[1,"p-splitter-gutter-handle"]],template:function(e,n){1&e&&(ct(0,"div",0,1),Ze(2,kpe,3,6,"ng-template",2),ht()),2&e&&(Vr(n.styleClass),ve("ngClass",n.containerClass())("ngStyle",n.style),De(2),ve("ngForOf",n.panels))},dependencies:[_o,ru,Oo,Dl,Ko],styles:[".p-splitter{display:flex;flex-wrap:nowrap}.p-splitter-vertical{flex-direction:column}.p-splitter-panel{flex-grow:1}.p-splitter-panel-nested{display:flex}.p-splitter-panel p-splitter{flex-grow:1}.p-splitter-panel .p-splitter{flex-grow:1;border:0 none}.p-splitter-gutter{flex-grow:0;flex-shrink:0;display:flex;align-items:center;justify-content:center;cursor:col-resize}.p-splitter-horizontal.p-splitter-resizing{cursor:col-resize;-webkit-user-select:none;user-select:none}.p-splitter-horizontal>.p-splitter-gutter>.p-splitter-gutter-handle{height:24px;width:100%}.p-splitter-horizontal>.p-splitter-gutter{cursor:col-resize}.p-splitter-vertical.p-splitter-resizing{cursor:row-resize;-webkit-user-select:none;user-select:none}.p-splitter-vertical>.p-splitter-gutter{cursor:row-resize}.p-splitter-vertical>.p-splitter-gutter>.p-splitter-gutter-handle{width:24px;height:100%}\n"],encapsulation:2,changeDetection:0}),i})(),Fpe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na]}),i})();const Npe=["myImg"];function Bpe(i,t){1&i&&(ct(0,"pre"),cr(1,"Drop here"),ht())}function zpe(i,t){1&i&&si(0,"img",2,3),2&i&&ve("src",_e().viewer,$h)}const Vpe=function(){return{height:"256px"}};let Upe=(()=>{class i{constructor(e,n,r,s){this.logger=e,this.messageService=n,this.clipboardService=r,this.converterService=s,this.viewer="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAgAElEQVR4nO3dT8hsW3rX8edUvfd27unb/iFR9NJpK90d2+hInAiJKHrVBjmke6Akk0hwboYOVFicQzqSIIZGBEVQcKLQoFwjIgYRB04jUTCgkmijgkZDHCR0MB73es9blV1v7T9rV63az289+7tgD5K367PqWWtX/Z573npX2ccf/5H3u+u97rJrRn7c0+Pf7114eHh4eHh4yl6oYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw8PDw8Nb33OdHA8PDw8PD8/Hc50cDw8PDw8Pz8dznRwPDw8PDw/Px3OdHA8PDw8PD8/Hc50cDw8PDw8Pz8cLVQweHh4eHh5emReqGDw8PDw8PLwrvVDF4OHh4eHh4RH+eHh4eHh4eEqT4+Hh4eHh4RH+eHh4eHh4eHf2QhWDh4eHh4eHV+aFKgYPDw8PDw+vzAtVDB4eHh4eHl6ZF6oYPDw8PDw8vDIvVDF4eHh4eHh4xUCcYvDw8PDw8PDKEbfJ8fDw8PDw8Fw918nx8PDw8PDw1vdcJ8fDw5v2Hh4evrLb7f52/+p+9LeuvZ5bt3r5+SmvHx4eXoWhXgweXkRvv9+/efHixdvj1f3o6qvv1PLy81NePzw8vGHPdXI8PLx5r98AmFj4P2sAJNcPDw9v2HOdHA8Pb947NgAmGP69BkB2/fDw8IY918nx8PDmvd1u99pEwz9f+fkprx8eHt6w5zo5Hh7evNf9KJlo+D95qWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeHjxvGS64T/bAAisHx4eHuGPh9ekl0w3/CcbAJH1w8PDG3lAnGLw8GJ6yXTDf7QBEFo/PDy8kQfFKQYPL6aXTDf8BxsAsfXDw8MbeWCcYvDwYnrJdMP/ogEQXD88PLyRB8cpBg8vppdMN/zPGgDR9cPDwxsB4hSDhxfTS6Yb/qcGQHj98PDwxhC3yfHw8EpGMt3wf2wAxNcPDw+v1lAvBg8vkteNJBz+xwZAdv3w8PAqDfVi8PCiebvd7rVw+L/Nz095/fDw8CoM9WLw8CJ6+/3+jWr458fn56e8fnh4eMOe6+R4eHjzXr8BMLHwf9YASK4fHh7esOc6OR4e3rx3bABMMPx7DYDs+uHh4Q17rpPj4eHNe/l37CYa/vl6+gxAtXrV9wMPL4rnOjkeHt68Z4VfBzx0rfTXA6lmver7gYcXxQtVDB5eUC+Zbvhf1QA0vh94eCG8UMXg4QX1kumG/+IGIMB+4OHF9EIVg4cXw0umG/6LGoAg+4GHF88LVQweXhwvmW74FzcAgfYDDy+WF6oYPLxYXjLd8C9qAILtBx5eHC9UMXh48bxkuuE/2wAIrB8eHh7hj4fXpJdMN/wnGwCR9cPDwxt5QJxi8PBiesl0w3+0ARBaPzw8vJEHxSkGDy+ml0w3/AcbALH1w8PDG3lgnGLw8GJ6yXTD/6IBEFw/PDy8kQfHKQYPL6aXTDf8zxoA0fXDw8MbAeIUg4cX00umG/6nBkB4/fDw8MYQt8nx8PBKRjLd8H9sAMTXDw8Pr9ZQLwYPL5LXjSQc/scGQHb98PDwKg31YvDwonm73e61cPi/zc9Pef3w8PAqDPVi8PAievv9/o1q+OfH5+envH54eHjDnuvkeHh4816/ATCx8H/WAEiuHx4e3rDnOjkeHt68d2wATDD8ew2A7Prh4eENe66T4+HhzXv5d+wmGv75evoMQLV61fcDDy+K5zo5Hh7evGeFXwc8dK301wOpZr3q+4GHF8ULVQweXlAvmW74X9UANL4feHghvFDF4OEF9ZLphv/iBiDAfuDhxfRCFYOHF8NLphv+ixqAIPuBhxfPC1UMHl4cL5lu+Bc3AIH2Aw8vlheqGDy8WF4y3fAvagCC7QceXhwvVDF4ePG8ZLrhP9sACKwfHh4e4Y+H16SXTDf8JxsAkfXDw8MbeUCcYvDwYnrJdMN/tAEQWj88PLyRB8UpBg8vppdMN/wHGwCx9cPDwxt5YJxi8PBiesl0w/+iARBcPzw8vJEHxykGDy+ml0w3/M8aANH1w8PDGwHiFIOHF9NLphv+pwZAeP3w8PDGELfJ8fDwSkYy3fB/bADE1w8PD6/WUC8GDy+S140kHP7HBkB2/fDw8CoN9WLw8KJ5u93utXD4v83PT3n98PDwKgz1YvDwInr7/f6Navjnx+fnp7x+eHh4w57r5Hh4ePNevwEwsfB/1gBIrh8eHt6w5zo5Hh7evHdsAEww/HsNgOz64eHhDXuuk+Ph4c17+XfsJhr++Xr6DEC1etX3Aw8viuc6OR4e3rxnhV8HPHSt9NcDqWa96vuBhxfFC1UMHl5QL5lu+F/VADS+H3h4IbxQxeDhBfWS6Yb/4gYgwH7g4cX0QhWDhxfDS6Yb/osagCD7gYcXzwtVDB5eHC+ZbvgXNwCB9gMPL5YXqhg8vFheMt3wL2oAgu0HHl4cL1QxeLW8j7vri8LPb0teMt3wn20ABNZvK15+vX4s/Pzw1LxQxeDV8v5Ed/1qd33TnjUBIs9va14y3fCfbABE1m8L3qG7fr67vtVdrwSfH56iF6oYvBreMfyPb+6nJkDk+W3RS6Yb/qMNgND6RfcO9i78j/sx2AQEqhevlheqGLxbvefhf2oCuiD4osDz26qXTDf8BxsAsfWL7B3sPPwHm4BA9eLV9EIVg3eLNxb+x3D45suXH3xPoHpb8pLphv9FAyC4flG9gw2H/1kTEKhevNpeqGLw7hX+x+vYBLReb2teMt3wP2sARNcvonew6fA/NQEPDw9fCVAv3j28UMXg3TP8T01A/nXAis8Pr9cACIb/qQEQXr9o3sHKwv+4p9967733vtpwvXj38kIVg3fv8D/+7OKvA+70/PDejWS64f/YAIivXyTvYMvC/9QEPP1LwL2fH16DnuvkeE2F/+ImQKTeZr1uJOHwPzYAsusXyDvYdeF/3N/JPxEUrBdvBc91crwmw7+4CRCpt2lvt9u9Fg7/t/n5Ka9fEO9gt4X/8VrUBARaP7xbh3oxeKuG/2wTIFJv895+v3+jGv758fn5Ka9fAO9gdcJ/URMQaP3wRjzXyfGaD//RJkCk3hBevwEwsfB/1gBIrl/j3sHqhn9RExBo/fAmPNfJ8Vb17hX+F02ASL1hvGMDYILh32sAZNevYe9g9wn/ySYg0PrhzXiuk+Ot5t07/E9NwAtODKzu5d+xm2j45+vpMwDV6lXfj5W8g903/AebgEDrh1fguU6Ot4q3VvgfPU4MrOxZ4dcBD10r/fVAqlmv+n6s4B1snfA/awICrR9eoReqGLyLsXb4Hy9ODKzrJdMN/6sagMb3457ewdYN/1MTwImB2/NCFYN3NrzC/9QEvODEwFpeMt3wX9wABNiPe3kH8wn/o8GJgVv3QhWzXc87/I8/48TAOl4y3fBf1AAE2Y97eAfzDf9TE8CJgRv1QhWzXU8l/Bc3ASLrp+gl0w3/4gYg0H7U9g6mEf5HjxMDt+aFKma7nlr4FzcBIuun6iXTCYerGoBg+1HTO5hW+B8vTgzciheqmO16quE/2wSIrJ+yl0wrHBY1AALrp+odTDP8FzUBgfZje16oYrbrqYf/aBMgsn7qXjK9cChqAETWT9E7mHb4FzUBgfZjm16oYrbptRL+F02AyPq14CXT3t9Uud7BEcg7WBvhP9kEBNqP7Xqhitme11r4n5qAF5wYuMRLpr2/qXK9FyOQd7C2wn+wCQi0H9v2QhWzLa/V8D96nBhY7iXT3t9Uud6zEcg7WJvhf9YEBNoPvFDFbMdrPfyPFycGlo1k2vubKtd7GoG8g7Ud/qcmgBMDA3mhitmGFyX8T03AC04MnBvJtPc3Va7XgnkHixH+R4MTA6N4oYqJ70UL/+PPODFweiTT3t8kvn6Ef32PEwMDea6T4xV5X7KY4b+4CRDZj9W8biTx/U3K6+fo5fs539eKr7caXn4/+tId1w9vBc91crxF3huL8+YxdHFi4IC32+1eK+9vfn7K6+fkHSzmf/n3vZ+44/rhreC5To53lXfWBDT85rG4CRDdj7t7+/3+jfL+5uenvH6EP+GPN+y5To53tffYBDT85rG4CRDfj7t6/QbABPe31wBIrh/hT/jjDXuuk+Nd7+12ux9t9M1jcRPQwn7c0zs2ACa6v08NgOz6Ef6EP96w5zo53m1e98b7tcbePBY3AS84MfD9/Dt209iPQe/pMwDV6lXfD8L/LuuH5+C5To53u5f/JcDaePO41tv8iYFW+HXAQ9dK+5tq1qu+H4R/9fXDc/JCFbNhb/CvA+auht6Mtn5iYDKt/Xjupcr1Lh6EP+GPt9wLVczGvUVNQINvRls+MTCZ3n70f54q17toEP6EP14lL1Qx2/OKmoCG34y2emJgMs39WNwABNmPPA5G+N+yfnhqXqhitutNNgENvxktbgJE9qOGl0x3P4obgED7cTDC/5b1w1PzQhWDx4mBWvtxq5dMez9S5XpnB+FP+ONV8kIVg3ccnBiotR+3eMm09yNVrndyEP6EP14lL1QxeM8HJwZq7ce1XjLt/UiV6x0dhD/hj1fRC1UM3oXHiYFa+3Gll0x7P1LlegcH4U/441X2QhWDN+hxYuBt6yfgJdPej1S53otB+BP+eHfwQhWDN+pxYuBt6+fsJdPej1S53rNB+BP+eHfyQhWDN+dxYuBt6+flJdPej1S53tMg/Al/vDt6oYrBK/E4MfC29fPwkmnvR6pcrzl7ByP8b1k/vFa8UMXglXqcGHjb+q3tJdPejyS+foQ/4Y9Xa6gXg1fkcWLgbeu3mteNJL4fSXn9CH/CH6/SUC8Gb5HHiYFa+zHo7Xa718r7kZ+f8voR/oQ/XoWhXgzeVR4nBmrtx4W33+/fKO9Hfn7K60f4E/54w57r5HgyHicGau3HmddvAArrXXU/eg2A5PoR/oQ/3rDnOjmejseJgVr70feODcDCelfbj6cGQHb9CP+7rR9e457r5HhaHicG3rZ+9/Ly79ivrHeV/Xj6DEC1egl/wh9vHc91cjw9jxMDb1u/e3hW+HXAI/WusR+pZr2EP+GPt44Xqhi8ah4nBt62frW9dGO9996PVLnexYPwJ/zxlnuhisGr6nFi4G3rV9NLFeq9536kyvUuGoQ/4Y9XyQtVDN6tHicG3rZ+tbxUqd577UeqXG/xIPwJf7xKXqhi8Gp5nBh42/rV8FLFeu+xH6lyvUWD8Cf88Sp5oYrBq+1xYqDvfqTK9dZev1S53tlB+BP+eJW8UMXg3cvjxEC//Uji65cq1zs5CH/CH6+SF6oYvHt7nBjosx9JfP1S5XpHB+FP+ONV9EIVg3d3jxMDXfYjia9fqlzv4CD8CX+8yl6oYvBW8Tgx8Lb1u8JL4uuXKtd7MQh/wh/vDl6oYvBW8zgx8Lb1W+gl8fVLles9G4Q/4Y93Jy9UMXhre5wYeNv6lY60Ur3XeqlyvadB+BP+eHf0QhWD5+FxYuBt61cy0or1XuOkyvXaQu9ghP8t64e3VS9UMXheHicG3rZ+cyOJr18i/Al/vHY918nxQnicGHjb+k2NJL5+ifAn/PHa9FwnxwvlcWLgHfZjt9u9Vl6//PwIf8Ifrz3PdXK8kB4nBlbej/1+/0Z5/fLzI/wJf7z2PNfJ8cJ6nBhYcT/6DYDi+vUaAMKf8MdryHOdHC+ux4mB9fbj2ACort9TA0D4E/54jXmuk+PF9jgx8Lb1O175d+wi9Q56T58BqFYv4X+X9cPDu/BcJ8eL73Fi4G3r9/G7f6ZLQvUOealmvYR/9fXDwxv0QhWDJ+txYuBt65fE6n3upcr19sfBCP9b1g8Pb+o/LuIUgyftcWLg9euXBOvt/zxVrvc4Dkb437J+eHjLvFDF4Kl5nBh43fol0XoXNwCEP+GPJ+qFKgZP1ePEwOXrl4TrLW4ACH/CH0/UC1UMnrrHiYHL1i+J15umal1Y78EI/1vWDw+P8MeT9zgxsHz9kni9aeyJL6z3YIT/LeuHh0f44zXjcWJg2fol8XrT2BMn/Al/PGEvVDF4zXmcGFi0fkm83jS2v4Q/4Y8n7IUqBq9JjxMDZ0cSrzdN7S/hT/jjiXqhisFr1uPEwMmRxOtNc/tL+JePFl+/eI16oYrBa93jxMDhkcTrTYX72x8HI/wvRuOvX7zWvFDF4EXwODHwciTxevPzI/wJf7zWvFDF4EXxODHwfCTxehPhT/jjteu5To6HNzA4MfA3RhKvNxH+hD9em57r5Hh4E4MTAz9+/FPJ18r15udH+BP+eO15rpPj4RWMzZ8YuN/v3yjXm58f4U/447XnuU6Oh1c4Nn1iYL8BUKy31wAQ/oVD/PWGtxHPdXI8vFJvyycGHhsA1XqfGgDCv3C08HrD24bnOjke3hJvqycG5t+xizy/Qe/pMwDPt+5ghP/FaOn1hhffc50cD2+pt8UTA63w64Ad603Ptu5ghP/FaPH1hhfbC1UM3ma8rZ0YmMSe33Mv9bbuYIT/xWj89YYX1AtVDN6mvC2dGJgEn1//5+npeR6M8L8YQV5veFvwQhWDF93byomBSfT59RuAgxH+FyPY6w0vsheqGLyteFs4MfDrws8vXz9phP/FEHl94OER/nihvegnBv6y+PP7JfHnR/jj4RH+eIG96CcG4hH+eHh1vVDF4G3di35iIB7hj4dXzwtVDN7mvQ2cGIhH+OPh1fFCFYOH9/EmTgzEI/zx8G73QhWDh/d0beDEQDzCHw/vNi9UMXh45170EwPxCH88vOu9UMXg4V160U8MxCP88fCu80IVg4c37EU/MRCP8MfDu9pznRwPbwUv+omBeIQ/Ht59h3oxeHgTI/qJgXiEPx7efYZ6MXh4BYMTA/EIfzy8JY9roRg8vMLBiYHb9gh/PLzu8a6T4+F5eZwYuFmP8MfDe/JcJ8fD8/Q4MXBzHuGPh9fzXCfHw/P2ODFwMx7hj4f3zAtVDB7elR4nBsb2CH88vAEvVDF4eDd4nBgY0yP88fBKvVDF4OEt8zgxMJZH+OPhEf54eMXej5lGeOHd5v3Y1CYPDZH7Dw+P8MfDc/Q4MbBtj//yx8Mj/PHwrvY4MbBNj/DHwyP88fBu9jgxsC2P8MfDW+KFKgYPr7LHiYHNeIQ/Ht5SL1QxeHh38DgxUN4j/PHwrvFCFYOHdyePEwNlPcIfD+9aL1QxeHj39TgxUMsj/PHwbvFCFYOHd3+PEwM1PMIfD+9WL1QxeHjreJwYSPjj4YXxXCfHw2vQm2wCGg5XdY/wx8Mj/PHw3D1ODCT88fCa9Vwnx8ML4HFiIOGPh9ek5zo5Hl4QjxMDCX88vOY818nx8KJ4nBhI+OPhtea5To6HF8nb73c/3li4qnt8pS8e3h0918nx8KJ5nBjIf/nj4bXihSoGD0/E48RAwh8PT94LVQwenpDHiYGEPx5eW16oYvDwfD1ODCT88fDa8EIVg4en4XFiIOGPh6fthSoGD0/L48RAwh8PT9MLVQwenqbHiYGEPx6elidazEfd9aeP18PDww901w/2rh/o/3zpVcH73sr1ngZeaI8TAwl/vNu9/P675vv9Uu+jyvUWj8We6M3wyrTf3D6pXK/hbcPjxEDCH+9mL7//qt3P/etV5XqLxlWe6M3w2AAIv7l9IrF5eE16+/3+a2L3M+GP15JX1AA4vj5mGwCZ/VC8GbrxSvzN7ROJzcNr1tvwiYGEP96t3mwD4Pz6mGwABNbv7MFyN8PDw8NXlN/cujfvfyyxeXite1s7MZDwx6vhTTYAAq+P0QZAZP3OALmboRtfVX5ze9YAyK0fXlPeVk4MJPzxanmjDYDI62OwARBav3PEbfIRr98AmOCbW68BiPBiwvP38rfeKYV1bY9v9cOr6Q02AEKvj4sGQGz9bhv3LubYAJjom9tTAyCzeXghvKgnBvJf/ni1vYsGQOz1cdYACK7f9WONYvJnAEz4ze2pAahWr9LNgOfqRTsxkPDHu4d31gAIvj5ODYDo+l031irGeucALL1Wuhk+qVmvys2AJ+FFOTGQ8Me7l3dqAERfH68q12v38lwnn/CuagBWvBkWNwAt3Ax4Ml7rJwYS/nj39B4bAOHXxyvx9Tt5rpNPeIsbgJVvhkUNQCs3A56O1/CJgYQ/3l29bnwiHP7HBkB2/fqe6+QT3qIGwOFmKG4A1F9MeLpegycGEv54d/fyZ7CEw/9t/gyb8vr1PdfJJ7ziBsCpEyxqAFp4MeFpew2dGEj4463iPW8ATOz1kf+KTXn9+p7r5BNeUQPg+M9Asw1AKy8mvCY89RMDCX+81bx+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/vHie6omBhD/eqt6xATDB8O81ALLrN+mJ3AyTDYDAB0BGGwCR9cOL6RU1AYQ/XmQvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDieionBhL+eC6eFX4d8NC10utj9uuAl9S7yn6I3QyDDYBI+A82AGLrhxfb8z4xkPDH8/SuagBWfH0sbgBc90PwZrhoAITC/6IBEFw/vPie14mBhD+et7e4AVg5PxY1AK77IXoznDUAYuF/1ri61v4AABCHSURBVACIrh/eNry1Twwk/PEUvEUNgEN+FDcA7vshejOcGgDB8D81AO6bh7d5b8UTAwl/PBWvuAFwyo+iBkBiP0RvhscGQDT8HxsAic3Dw/t4lRMDCX88Ja+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4T9cdTwwk/PHUvNkGwDk/JhsAgfU7e7DczZD/jlI4/N/mv0OV2Dw8vHOv9omBhD+eojfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64W3aq3ViIOGPp+qNNgAC4T/aAAit3zniNvmI128ATCz8nzUAEV5MePG8W08MJPzxlL3BBkAk/AcbALH1u23cu5hjA2CC4d9rAGQ2Dw9vYFx7YiDhj6fuXTQAQuF/0QAIrt/1Y41i8mcATDT8ew1AtXqVbga8UN7SEwMJf7wWvLMGQCz8zxoA0fW7bqxVjBV+HfDQtdLNMPt1wEvqVbkZ8EJ6pScGEv54rXinBkAw/E8NgPD6nTzXySe8qxqAFW+GxQ1ACzcDXlhv7sRAwh+vJe+xARAN/8cGQHz9Tp7r5BPe4gZg5ZthUQPQys2AF9ebODGQ8MdryuvGJ8Lhf2wAZNev77lOPuEtagAcbobiBkD9xYS3HW/gxEDCH685L38GSzj83+bPsCmvX99znXzCK24AnDrBogaghRcT3ra83omBhD9ek97zBsCEwj8/Pv8Vm/L69T3XySe8ogbA8Z+BZhuAVl5MeJv0viz+/PDwRr1+A2Bi4f+sAZBcv77nOvmEN9sAOP8OaLIBEFg/PDw8vJDesQEwwfDvNQCy6zfpidwMkw2AwAdARhsAkfXDw8PDC+nlBsBEwz9fT58BqFbvavshdDOMNgAC4T/aAAitHx4eHl5Izwq/DnjoWik/Zr8OeEm9q+yH2M0w2ACIhP9gAyC2fnh4eHhRvasagBXzY3ED4LofgjfDRQMgFP4XDYDg+uHh4eFF9RY3ACvnx6IGwHU/RG+GswZALPzPGgDR9cPDw8OL6i1qABzyo7gBcN8P0Zvh1AAIhv+pAXDfPDw8PLztecUNgFN+FDUAEvshejM8NgCi4f/YAEhsHh4eHt72vKIGwDE/ZhsAmf1QvBm68Uo4/I8NgP/m4eHh4W3Pm20AnPNjsgEQWL+zB8vdDPnvKIXD/23+O1SJzcPDw8PbnjfZAAj8x+NoAyCyfmeA3M2QT1JSDf/8+GcNgNz64eHh4QX2RhsAgfAfbQCE1u8ccZt8xOs3ACYW/s8agAgvJjw8PLyWvMEGQCT8BxsAsfW7bdy7mGMDYILh32sAZDYPDw8Pb0PeRQMgFP4XDYDg+l0/1igmfwbARMO/1wBUq1fpZsDDw8MT984aALHwP2sARNfvurFWMVb4dcBD10o3w+zXAS+pV+VmwMPDw2vAOzUAguF/agCE1+/kuU4+4V3VAKx4MyxuAFq4GfDw8PAa8B4bANHwf2wAxNfv5LlOPuEtbgBWvhkWNQCt3Ax4eHh46l43PhEO/2MDILt+fc918glvUQPgcDMUNwDqLyY8PDy8lrz8GSzh8H+bP8OmvH59z3XyCa+4AXDqBIsagBZeTHh4eHgtec8bABMK//z4/FdsyuvX91wnn/CKGgDHfwaabQBaeTHh4eHhteT1GwATC/9nDYDk+vU918knvNkGwPl3QJMNgMD64eHh4YX0jg2ACYZ/rwGQXb9JT+RmmGwABD4AMtoAiKwfHh4eXkgvNwAmGv75evoMQLV6V9sPoZthtAEQCP/RBkBo/fDw8PBCelb4dcBD10r5Mft1wEvqXWU/xG6GwQZAJPwHGwCx9cPDw8OL6l3VAKyYH4sbANf9ELwZLhoAofC/aAAE1w8PDw8vqre4AVg5PxY1AK77IXoznDUAYuF/1gCIrh8eHh5eVG9RA+CQH8UNgPt+iN4MpwZAMPxPDYD75uHh4eFtzytuAJzyo6gBkNgP0ZvhsQEQDf/HBkBi8/Dw8PC25xU1AI75MdsAyOyH4s3QjVfC4X9sAPw3Dw8PD2973mwD4Jwfkw2AwPqdPVjuZsh/Rykc/m/z36FKbB4eHh7e9rzJBkDgPx5HGwCR9TsD5G6GfJKSavjnxz9rAOTWDw8PDy+wN9oACIT/aAMgtH7niNvkI16/ATCx8H/WAER4MeHh4eG15A02ACLhP9gAiK3fbePexRwbABMM/14DILN5eHh4eBvyLhoAofC/aAAE1+/6sUYx+TMAJhr+vQagWr1KNwMeHh6euHfWAIiF/1kDILp+1421irHCrwMeula6GWa/DnhJvSo3Ax4eHl4D3qkBEAz/UwMgvH4nz3XyCe+qBmDFm2FxA9DCzYCHh4fXgPfYAIiG/2MDIL5+J8918glvcQOw8s2wqAFo5WbAw8PDU/e68Ylw+B8bANn163uuk094ixoAh5uhuAFQfzHh4eHhteTlz2AJh//b/Bk25fXre66TT3jFDYBTJ1jUALTwYsLDw8NryXveAJhQ+OfH579iU16/vuc6+YRX1AA4/jPQbAPQyosJDw8PryWv3wCYWPg/awAk16/vuU4+4c02AM6/A5psAATWDw8PDy+kd2wATDD8ew2A7PpNeiI3w2QDIPABkNEGQGT98PDw8EJ6uQEw0fDP19NnAKrVu9p+CN0Mow2AQPiPNgBC64eHh4cX0rPCrwMeulbKj9mvA15S7yr7IXYzDDYAIuE/2ACIrR8eHh5eVO+qBmDF/FjcALjuh+DNcNEACIX/RQMguH54eHh4Ub3FDcDK+bGoAXDdD9Gb4awBEAv/swZAdP3w8PDwonqLGgCH/ChuANz3Q/RmODUAguF/agDcNw8PDw9ve15xA+CUH0UNgMR+iN4Mjw2AaPg/NgASm4eHh4e3Pa+oAXDMj9kGQGY/FG+GbrwSDv9jA+C/eXh4eHjb82YbAOf8mGwABNbv7MFyN0P+O0rh8H+b/w5VYvPw8PDwtudNNgAC//E42gCIrN8ZIHczdOP7VcM/P75rAP6JxObh4eHhbc/7KdMN/3z9qcr1Do4qnuLN0I0/phr+7xqAFz8jsXl4eHh42/P+jemGf77+cOV6L0Ztz3Xy596nPvWpP6ga/k/X//30p19+QWXz8PDw8DbiHbrr1003/PP1+yvWezFqe66TD3kffPBtv9d0w//o/b1a9SrdDHh4eHjC3t837fDP1xeF1+/6sVYxu93ud5p2+B+vv6S4fnh4eHjBvBfdlUw//PP12wXXb9BznXzCy1/48GumHf7H65921/d1115o/fDw8PAiePl99Q911z8zjff7uSvn1oPQ+k16rpPPeD9n+uHfv361u/5Ld/2noat7/MU19r8tufDw8PCCe/n9NL+vKr7fj13/vpXwz47r5DOe+nGPeHh4eHh4/esfthL+sw2AcyfzE9b+zYCHh4eHtxFvt9v9eCvhP9kACPwzxg9b4zcDHh4eHt52vIeHhz/XSviPfgZAIPzz+G5r/GbAw8PDw9uO9/Llyy+1Ev6Dnkj4H8cvWMM3Ax4eHh7eZrz/TPjX9f6utXsz4OHh4eFtxNvtdn+H8K/r/Vlr9GbAw8PDw9uO9/Cw/yHCv6737d31LWvwZsDDw8PD24z3rf1+l/Nq8SD8p8c/avBmwMPDw8PbjvcNu2K4569y+OfHPTw8/JkGbwY8PDw8vO14328Lh3v4Pz1INvzz47/whe/6sFvkX2zsZsDDw8PD24b3i901f6xub0iE/9MDZcP/aO33u7/W0M2Ah4eHh7cdL59aWzxkwv/pwdLhn6/PfObD7+x+9CvWxs2Ah4eHh7cNL39Z0UdWOKTC/wmQDv+e9zdM/2bAw8PDw9uO93UrHHLhf0TcJl/mfc6e/iSw9Apwc+Hh4eHhaXq/1l2/ywqGZPhfOxyL+eumezPg4eHh4W3H+0krGIR/Pe83ddd/M82bAQ8PDw9vG95/767fYjOD8K/v/ZDp3Qx4eHh4eNvxftBmhkheTnquk1/pveiuf2laNwMeHh4e3ja8n7aZIZSXk57r5Dd439Vdv2QaNwMeHh4e3ja8/91dB5sYgnk56rlOfqP3qrv+n8W6ufDw8PDwNL2cN1+1iSGcl4Oe6+S3et34eqCbCw8PDw9P1/urNjHU83LIa7qYz33uOz/c7Xb/OsjNhYeHh4en6f0rmzjvv4W8HPKaL+Y7vuPbf9tu9+JnG7+58PDw8PA0vX/XXb/VRkZLeTnrtVjMhx9++tD96BeszZsLDw8PD0/T+2Z35e+iGRwt5mWo8O9539Nd/8Paurnw8PDw8DS9nCe/x0ZG43kpNHk97/Pd9R+sjZsLDw8PD0/T+/nu+pKNjCB5KTB5fe93dNfPmPbNhYeHh4en6f3b7vqsjYxQeRmqmN8Y+Yzmf2GaNxceHh4enqb3z7vrN9vIEMm3el6oYs7HvrtSd/266dxceHh4eHh6Xj7k56/Yu9wYHGL5VscLVczw+KP27pubIt2seHh4eHh1vPxhvz9pE0M4327zQhUzMna73Ufd9Y0gNyseHh4eXh3vH9i7z42NDvV8u8kLVcyM9/777/3x3e7FzzV8s+Lh4eHh3e79x+76ss2MlvLtKi9UMQXeZz/70We6H/1le/ZtgqVXkJsfDw8Pb4ve/+quv9hd32Yzo8V8W+yFKmaZ92F3/Yg9fT6g5Apw8+Ph4eFt0fuf9u5D4fkvxGZHgHy731AvZqH3aXvXCPys6dyseHh4eHi3e/l9/c9310srHMHyre5QL+ZG7/fZuz8FOftXgYZvfjw8PLytefmf+f9md32fLRxieXR3z3VyYS//Legf6K6/sNvtfqq7oX65oZsfDw8Pb0ver3Tv0z+93+/fvPfee19++fKD4a+5nRnCeXQ3z3XyVrzD4XOf+dSn3v/e7gb74e5HX+uub9i74yL/a3f9H4v1YsLDw8NT8/L7bH6/ze+7+f33R/P7cX5fzu/Pyvmh7LlOHszLHy7JXxv5+edXd6N//oMPPvjdL1++/NLxyv93/v8P/e/nLjw8PLwNePn99OJDeyLv9yE818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDu9ILVQweHh4eHh4e4Y+Hh4eHh4enNDkeHh4eHh4e4Y+Hh4eHh4d3Zy9UMXh4eHh4eHhlXqhi8PDw8PDw8Mq8UMXg4eHh4eHhlXmhisHDw8PDw8Mr80IVg4eHh4eHh1cMxCkGDw8PDw8PrxxxmxwPDw8PDw/P1XOdHA8PDw8PD299z3VyPDw8PDw8vPU918nx8PDw8PDwfDzXyfHw8PDw8PB8PNfJ8fDw8PDw8Hw818nx8PDw8PDwfDzXyfHw8PDw8PB8vFDF4OHh4eHh4ZV5oYrBw8PDw8PDK/P+P4jnb7D01hqeAAAAAElFTkSuQmCC"}ngOnInit(){}onFileDropped(e){this.converterService.uploadHandler(e[0]).then(n=>{this.logger.info(n),n.startsWith("PHN2Z")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/SVG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/svg+xml;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/svg+xml;base64,"+n)),n.startsWith("iVBOR")&&(this.messageService.add({severity:"info",summary:"Copied to clipboard/PNG",detail:`Filename ${e[0].name}`}),this.viewer="data:image/png;base64,"+n,this.clipboardService.copyTextToClipboard("data:image/png;base64,"+n))})}}return i.\u0275fac=function(e){return new(e||i)(Qt(dm),Qt(Jv),Qt(l2),Qt(Dpe))},i.\u0275cmp=Ar({type:i,selectors:[["app-converter"]],viewQuery:function(e,n){if(1&e&&is(Npe,5),2&e){let r;or(r=ar())&&(n.myImg=r.first)}},decls:4,vars:3,consts:[["dropZoneDirective","",3,"fileDropped"],["pTemplate",""],["alt","drop here",3,"src"],["myImg",""]],template:function(e,n){1&e&&(si(0,"p-toast"),ct(1,"p-splitter",0),mn("fileDropped",function(s){return n.onFileDropped(s)}),Ze(2,Bpe,2,0,"ng-template",1),Ze(3,zpe,2,1,"ng-template",1),ht()),2&e&&(De(1),la(xa(2,Vpe)))},dependencies:[_l,F2,Ope,RH]}),i})();const Hpe=function(i,t,e){return{"p-inputswitch p-component":!0,"p-inputswitch-checked":i,"p-disabled":t,"p-focus":e}},Gpe={provide:jc,useExisting:hs(()=>kH),multi:!0};let kH=(()=>{class i{constructor(e){this.cd=e,this.trueValue=!0,this.falseValue=!1,this.onChange=new jn,this.modelValue=!1,this.focused=!1,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,n){!this.disabled&&!this.readonly&&(e.preventDefault(),this.toggle(e),n.focus())}onInputChange(e){this.readonly||this.updateModel(e,e.target.checked)}toggle(e){this.updateModel(e,!this.checked())}updateModel(e,n){this.modelValue=n?this.trueValue:this.falseValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:e,checked:this.modelValue})}onFocus(e){this.focused=!0}onBlur(e){this.focused=!1,this.onModelTouched()}writeValue(e){this.modelValue=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}}return i.\u0275fac=function(e){return new(e||i)(Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-inputSwitch"]],hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:"tabindex",inputId:"inputId",name:"name",disabled:"disabled",readonly:"readonly",trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy"},outputs:{onChange:"onChange"},features:[ko([Gpe])],decls:5,vars:16,consts:[[3,"ngClass","ngStyle","click"],[1,"p-hidden-accessible"],["type","checkbox","role","switch",3,"checked","disabled","change","focus","blur"],["cb",""],[1,"p-inputswitch-slider"]],template:function(e,n){if(1&e){const r=Pi();ct(0,"div",0),mn("click",function(o){wt(r);const l=co(3);return It(n.onClick(o,l))}),ct(1,"div",1)(2,"input",2,3),mn("change",function(o){return n.onInputChange(o)})("focus",function(o){return n.onFocus(o)})("blur",function(o){return n.onBlur(o)}),ht()(),si(4,"span",4),ht()}2&e&&(Vr(n.styleClass),ve("ngClass",qu(12,Hpe,n.checked(),n.disabled,n.focused))("ngStyle",n.style),De(2),ve("checked",n.checked())("disabled",n.disabled),vr("aria-label",n.ariaLabel)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-checked",n.checked())("aria-labelledby",n.ariaLabelledBy))},dependencies:[_o,Ko],styles:['.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}\n'],encapsulation:2,changeDetection:0}),i})(),Wpe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();function jpe(i,t){if(1&i&&(ct(0,"span",10),cr(1),ht()),2&i){const e=_e(2);vr("id",e.id+"_header"),De(1),ds(e.header)}}function $pe(i,t){1&i&&qi(0)}function qpe(i,t){}function Xpe(i,t){1&i&&Ze(0,qpe,0,0,"ng-template")}function Ype(i,t){if(1&i){const e=Pi();ct(0,"button",11),mn("click",function(r){return wt(e),It(_e(2).onIconClick(r))})("keydown.enter",function(r){return wt(e),It(_e(2).onIconClick(r))}),si(1,"span"),ht()}if(2&i){const e=_e(2);vr("aria-label","collapse button")("id",e.id+"-label")("aria-controls",e.id+"-content")("aria-expanded",!e.collapsed),De(1),Vr(e.collapsed?e.expandIcon:e.collapseIcon)}}const Kpe=function(i,t,e){return{"p-panel-icons-start":i,"p-panel-icons-end":t,"p-panel-icons-center":e}};function Zpe(i,t){if(1&i){const e=Pi();ct(0,"div",6),mn("click",function(r){return wt(e),It(_e().onHeaderClick(r))}),Ze(1,jpe,2,2,"span",7),nu(2,1),Ze(3,$pe,1,0,"ng-container",4),ct(4,"div",8),Ze(5,Xpe,1,0,null,4),Ze(6,Ype,2,6,"button",9),ht()()}if(2&i){const e=_e();vr("id",e.id+"-titlebar"),De(1),ve("ngIf",e.header),De(2),ve("ngTemplateOutlet",e.headerTemplate),De(1),ve("ngClass",qu(6,Kpe,"start"===e.iconPos,"end"===e.iconPos,"center"===e.iconPos)),De(1),ve("ngTemplateOutlet",e.iconTemplate),De(1),ve("ngIf",e.toggleable)}}function Qpe(i,t){1&i&&qi(0)}function Jpe(i,t){1&i&&qi(0)}function ege(i,t){if(1&i&&(ct(0,"div",12),nu(1,2),Ze(2,Jpe,1,0,"ng-container",4),ht()),2&i){const e=_e();De(2),ve("ngTemplateOutlet",e.footerTemplate)}}const tge=["*",[["p-header"]],[["p-footer"]]],nge=function(i,t){return{"p-panel p-component":!0,"p-panel-toggleable":i,"p-panel-expanded":t}},ige=function(i){return{transitionParams:i,height:"0",opacity:"0"}},rge=function(i){return{value:"hidden",params:i}},sge=function(i){return{transitionParams:i,height:"*",opacity:"1"}},oge=function(i){return{value:"visible",params:i}},age=["*","p-header","p-footer"];let lge=0,cge=(()=>{class i{constructor(e){this.el=e,this.collapsed=!1,this.iconPos="end",this.expandIcon="pi pi-plus",this.collapseIcon="pi pi-minus",this.showHeader=!0,this.toggler="icon",this.collapsedChange=new jn,this.onBeforeToggle=new jn,this.onAfterToggle=new jn,this.transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)",this.id="p-panel-"+lge++}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"icons":this.iconTemplate=e.template}})}onHeaderClick(e){"header"===this.toggler&&this.toggle(e)}onIconClick(e){"icon"===this.toggler&&this.toggle(e)}toggle(e){if(this.animating)return!1;this.animating=!0,this.onBeforeToggle.emit({originalEvent:e,collapsed:this.collapsed}),this.toggleable&&(this.collapsed?this.expand(e):this.collapse(e)),e.preventDefault()}expand(e){this.collapsed=!1,this.collapsedChange.emit(this.collapsed)}collapse(e){this.collapsed=!0,this.collapsedChange.emit(this.collapsed)}getBlockableElement(){return this.el.nativeElement.children[0]}onToggleDone(e){this.animating=!1,this.onAfterToggle.emit({originalEvent:e,collapsed:this.collapsed})}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn))},i.\u0275cmp=Ar({type:i,selectors:[["p-panel"]],contentQueries:function(e,n,r){if(1&e&&(Ga(r,f1,5),Ga(r,_l,4)),2&e){let s;or(s=ar())&&(n.footerFacet=s.first),or(s=ar())&&(n.templates=s)}},hostAttrs:[1,"p-element"],inputs:{toggleable:"toggleable",header:"header",collapsed:"collapsed",style:"style",styleClass:"styleClass",iconPos:"iconPos",expandIcon:"expandIcon",collapseIcon:"collapseIcon",showHeader:"showHeader",toggler:"toggler",transitionOptions:"transitionOptions"},outputs:{collapsedChange:"collapsedChange",onBeforeToggle:"onBeforeToggle",onAfterToggle:"onAfterToggle"},ngContentSelectors:age,decls:7,vars:23,consts:[[3,"ngClass","ngStyle"],["class","p-panel-header",3,"click",4,"ngIf"],["role","region",1,"p-toggleable-content"],[1,"p-panel-content"],[4,"ngTemplateOutlet"],["class","p-panel-footer",4,"ngIf"],[1,"p-panel-header",3,"click"],["class","p-panel-title",4,"ngIf"],["role","tablist",1,"p-panel-icons",3,"ngClass"],["type","button","class","p-panel-header-icon p-panel-toggler p-link","pRipple","","role","tab",3,"click","keydown.enter",4,"ngIf"],[1,"p-panel-title"],["type","button","pRipple","","role","tab",1,"p-panel-header-icon","p-panel-toggler","p-link",3,"click","keydown.enter"],[1,"p-panel-footer"]],template:function(e,n){1&e&&(Ff(tge),ct(0,"div",0),Ze(1,Zpe,7,10,"div",1),ct(2,"div",2),mn("@panelContent.done",function(s){return n.onToggleDone(s)}),ct(3,"div",3),nu(4),Ze(5,Qpe,1,0,"ng-container",4),ht(),Ze(6,ege,3,1,"div",5),ht()()),2&e&&(Vr(n.styleClass),ve("ngClass",ys(12,nge,n.toggleable,!n.collapsed&&n.toggleable))("ngStyle",n.style),vr("id",n.id),De(1),ve("ngIf",n.showHeader),De(1),ve("@panelContent",n.collapsed?Bi(17,rge,Bi(15,ige,n.animating?n.transitionOptions:"0ms")):Bi(21,oge,Bi(19,sge,n.animating?n.transitionOptions:"0ms"))),vr("id",n.id+"-content")("aria-hidden",n.collapsed)("aria-labelledby",n.id+"-titlebar"),De(3),ve("ngTemplateOutlet",n.contentTemplate),De(1),ve("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[_o,Oo,Dl,Ko,yh],styles:[".p-panel-header{display:flex;align-items:center}.p-panel-title{line-height:1;order:1}.p-panel-header-icon{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-panel-toggleable.p-panel-expanded .p-toggleable-content:not(.ng-animating){overflow:visible}.p-panel-toggleable .p-toggleable-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[ry("panelContent",[v0("hidden",Ja({height:"0"})),v0("void",Ja({height:"{{height}}"}),{params:{height:"0"}}),v0("visible",Ja({height:"*"})),Eu("visible <=> hidden",[Cc("{{transitionParams}}")]),Eu("void => hidden",Cc("{{transitionParams}}")),Eu("void => visible",Cc("{{transitionParams}}"))])]},changeDetection:0}),i})(),uge=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na,su,Na]}),i})(),hge=(()=>{class i{constructor(e){this.databaseService=e,this.preferences=this.databaseService.retrievePreferences()}ngOnInit(){}handleChange(e){this.databaseService.storePreferences(this.preferences)}}return i.\u0275fac=function(e){return new(e||i)(Qt(uw))},i.\u0275cmp=Ar({type:i,selectors:[["app-preference"]],decls:9,vars:3,consts:[["header","Render",3,"toggleable"],[1,"field-checkbox"],[3,"ngModel","ngModelChange","onChange"],["for","ny"]],template:function(e,n){1&e&&(ct(0,"p-panel",0)(1,"div",1)(2,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.grid=s})("onChange",function(s){return n.handleChange(s)}),ht(),ct(3,"label",3),cr(4,"Apply grid"),ht()(),ct(5,"div",1)(6,"p-inputSwitch",2),mn("ngModelChange",function(s){return n.preferences.info=s})("onChange",function(s){return n.handleChange(s)}),ht(),ct(7,"label",3),cr(8,"Apply display info"),ht()()()),2&e&&(ve("toggleable",!0),De(2),ve("ngModel",n.preferences.grid),De(4),ve("ngModel",n.preferences.info))},dependencies:[kH,dw,r_,cge]}),i})();var dge=V(4826)();let fge=(()=>{class i{constructor(){this.about=dge.render('\n  ## My system\n\n  This tool aim to design complex system with a component view target\n  - based on [cytoscapejs](https://js.cytoscape.org)\n  - based on [primeng](https://www.primefaces.org/primeng/)\n\n  I used it on my own to design my system\n\n  ## November 2022\n\n  ### Features releases\n\n  - Add alias option on node\n  - Modify inline documentation\n  - Rework any node id on next save\n  - Add 3d view of graph\n\n  ### Bugs\n  \n  - Rewrite with a new GUID cloned node (without infinte @.. append)\n\n  ## October 2022\n\n  ### Features releases\n\n  - Add icon to menu action (core, node and edge)\n  - Add a default content value in style if content is not defined\n\n  ![Alt text](assets/about/display-node.PNG "display node label")\n\n  ### Bugs\n\n  - Add favicon.ico (replace default angular favicon.ico)\n  - Generate error in console while mis selecting any node\n\n  ')}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ar({type:i,selectors:[["app-about"]],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&si(0,"div",0),2&e&&ve("innerHTML",n.about,Oa)}}),i})();const af=1001,Zu=1003,Tu=1006,M0=1009,D0=1014,g_=1015,Yw=1016,pb=1020,bg=1023,L0=1026,gb=1027,P0=3e3,qc=3001,dy="srgb",k0="srgb-linear";class yb{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Td=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],O0=Math.PI/180,Kw=180/Math.PI;function Lp(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Td[255&i]+Td[i>>8&255]+Td[i>>16&255]+Td[i>>24&255]+"-"+Td[255&t]+Td[t>>8&255]+"-"+Td[t>>16&15|64]+Td[t>>24&255]+"-"+Td[63&e|128]+Td[e>>8&255]+"-"+Td[e>>16&255]+Td[e>>24&255]+Td[255&n]+Td[n>>8&255]+Td[n>>16&255]+Td[n>>24&255]).toLowerCase()}function au(i,t,e){return Math.max(t,Math.min(e,i))}function Zw(i,t,e){return(1-e)*i+e*t}function GL(i){return 0==(i&i-1)&&0!==i}function PS(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function fy(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Cl(i,t){switch(t.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}class Gi{constructor(t=0,e=0){Gi.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Pp{constructor(){Pp.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,n,r,s,o,l,u,p){const v=this.elements;return v[0]=t,v[1]=r,v[2]=l,v[3]=e,v[4]=s,v[5]=u,v[6]=n,v[7]=o,v[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[3],u=n[6],p=n[1],v=n[4],x=n[7],I=n[2],M=n[5],F=n[8],j=r[0],X=r[3],ce=r[6],we=r[1],ye=r[4],Ae=r[7],We=r[2],ot=r[5],Mt=r[8];return s[0]=o*j+l*we+u*We,s[3]=o*X+l*ye+u*ot,s[6]=o*ce+l*Ae+u*Mt,s[1]=p*j+v*we+x*We,s[4]=p*X+v*ye+x*ot,s[7]=p*ce+v*Ae+x*Mt,s[2]=I*j+M*we+F*We,s[5]=I*X+M*ye+F*ot,s[8]=I*ce+M*Ae+F*Mt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8];return e*o*v-e*l*p-n*s*v+n*l*u+r*s*p-r*o*u}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],x=v*o-l*p,I=l*u-v*s,M=p*s-o*u,F=e*x+n*I+r*M;if(0===F)return this.set(0,0,0,0,0,0,0,0,0);const j=1/F;return t[0]=x*j,t[1]=(r*p-v*n)*j,t[2]=(l*n-r*o)*j,t[3]=I*j,t[4]=(v*e-r*u)*j,t[5]=(r*s-l*e)*j,t[6]=M*j,t[7]=(n*u-p*e)*j,t[8]=(o*e-n*s)*j,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,l){const u=Math.cos(s),p=Math.sin(s);return this.set(n*u,n*p,-n*(u*o+p*l)+o+t,-r*p,r*u,-r*(-p*o+u*l)+l+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),r=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],p=r[4],v=r[7];return r[0]=e*s+n*u,r[3]=e*o+n*p,r[6]=e*l+n*v,r[1]=-n*s+e*u,r[4]=-n*o+e*p,r[7]=-n*l+e*v,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function y5(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function Qw(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function F0(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function RS(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const WL={[dy]:{[k0]:F0},[k0]:{[dy]:RS}},mm={legacyMode:!0,get workingColorSpace(){return k0},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,t,e){if(this.legacyMode||t===e||!t||!e)return i;if(WL[t]&&void 0!==WL[t][e]){const n=WL[t][e];return i.r=n(i.r),i.g=n(i.g),i.b=n(i.b),i}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(i,t){return this.convert(i,this.workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this.workingColorSpace)}},_5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qu={r:0,g:0,b:0},vm={h:0,s:0,l:0},kS={h:0,s:0,l:0};function jL(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}function OS(i,t){return t.r=i.r,t.g=i.g,t.b=i.b,t}let Cb,Jr=(()=>{class i{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===r?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=dy){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,mm.toWorkingColorSpace(this,n),this}setRGB(e,n,r,s=k0){return this.r=e,this.g=n,this.b=r,mm.toWorkingColorSpace(this,s),this}setHSL(e,n,r,s=k0){if(e=function HL(i,t){return(i%t+t)%t}(e,1),n=au(n,0,1),r=au(r,0,1),0===n)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,l=2*r-o;this.r=jL(l,o,e+1/3),this.g=jL(l,o,e),this.b=jL(l,o,e-1/3)}return mm.toWorkingColorSpace(this,s),this}setStyle(e,n=dy){function r(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let o;const u=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,mm.toWorkingColorSpace(this,n),r(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,mm.toWorkingColorSpace(this,n),r(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u)){const p=parseFloat(o[1])/360,v=parseFloat(o[2])/100,x=parseFloat(o[3])/100;return r(o[4]),this.setHSL(p,v,x,n)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],l=o.length;if(3===l)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,mm.toWorkingColorSpace(this,n),this;if(6===l)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,mm.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}setColorName(e,n=dy){const r=_5[e.toLowerCase()];return void 0!==r?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=F0(e.r),this.g=F0(e.g),this.b=F0(e.b),this}copyLinearToSRGB(e){return this.r=RS(e.r),this.g=RS(e.g),this.b=RS(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=dy){return mm.fromWorkingColorSpace(OS(this,Qu),e),au(255*Qu.r,0,255)<<16^au(255*Qu.g,0,255)<<8^au(255*Qu.b,0,255)<<0}getHexString(e=dy){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=k0){mm.fromWorkingColorSpace(OS(this,Qu),n);const r=Qu.r,s=Qu.g,o=Qu.b,l=Math.max(r,s,o),u=Math.min(r,s,o);let p,v;const x=(u+l)/2;if(u===l)p=0,v=0;else{const I=l-u;switch(v=x<=.5?I/(l+u):I/(2-l-u),l){case r:p=(s-o)/I+(s<o?6:0);break;case s:p=(o-r)/I+2;break;case o:p=(r-s)/I+4}p/=6}return e.h=p,e.s=v,e.l=x,e}getRGB(e,n=k0){return mm.fromWorkingColorSpace(OS(this,Qu),n),e.r=Qu.r,e.g=Qu.g,e.b=Qu.b,e}getStyle(e=dy){return mm.fromWorkingColorSpace(OS(this,Qu),e),e!==dy?`color(${e} ${Qu.r} ${Qu.g} ${Qu.b})`:`rgb(${255*Qu.r|0},${255*Qu.g|0},${255*Qu.b|0})`}offsetHSL(e,n,r){return this.getHSL(vm),vm.h+=e,vm.s+=n,vm.l+=r,this.setHSL(vm.h,vm.s,vm.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(vm),e.getHSL(kS);const r=Zw(vm.h,kS.h,n),s=Zw(vm.s,kS.s,n),o=Zw(vm.l,kS.l,n);return this.setHSL(r,s,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return i.NAMES=_5,i})();class C5{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Cb&&(Cb=Qw("canvas")),Cb.width=t.width,Cb.height=t.height;const n=Cb.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Cb}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Qw("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*F0(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*F0(e[n]/255)):F0(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class bb{constructor(t=null){this.isSource=!0,this.uuid=Lp(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)s.push($L(r[o].isDataTexture?r[o].image:r[o]))}else s=$L(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function $L(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?C5.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Sme=0,m_=(()=>{class i extends yb{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=af,s=af,o=Tu,l=1008,u=bg,p=M0,v=1,x=P0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Sme++}),this.uuid=Lp(),this.name="",this.source=new bb(e),this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=l,this.anisotropy=v,this.format=u,this.internalFormat=null,this.type=p,this.offset=new Gi(0,0),this.repeat=new Gi(1,1),this.center=new Gi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pp,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=x,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case af:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case af:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i})();class hl{constructor(t=0,e=0,n=0,r=1){hl.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const u=t.elements,p=u[0],v=u[4],x=u[8],I=u[1],M=u[5],F=u[9],j=u[2],X=u[6],ce=u[10];if(Math.abs(v-I)<.01&&Math.abs(x-j)<.01&&Math.abs(F-X)<.01){if(Math.abs(v+I)<.1&&Math.abs(x+j)<.1&&Math.abs(F+X)<.1&&Math.abs(p+M+ce-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const ye=(p+1)/2,Ae=(M+1)/2,We=(ce+1)/2,ot=(v+I)/4,Mt=(x+j)/4,Xe=(F+X)/4;return ye>Ae&&ye>We?ye<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(ye),r=ot/n,s=Mt/n):Ae>We?Ae<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(Ae),n=ot/r,s=Xe/r):We<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(We),n=Mt/s,r=Xe/s),this.set(n,r,s,e),this}let we=Math.sqrt((X-F)*(X-F)+(x-j)*(x-j)+(I-v)*(I-v));return Math.abs(we)<.001&&(we=1),this.x=(X-F)/we,this.y=(x-j)/we,this.z=(I-v)/we,this.w=Math.acos((p+M+ce-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class N0 extends yb{constructor(t=1,e=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new hl(0,0,t,e),this.scissorTest=!1,this.viewport=new hl(0,0,t,e),this.texture=new m_({width:t,height:e,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Tu,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(t,e,n=1){(this.width!==t||this.height!==e||this.depth!==n)&&(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new bb(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class qL extends m_{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Zu,this.minFilter=Zu,this.wrapR=af,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class b5 extends m_{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Zu,this.minFilter=Zu,this.wrapR=af,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Rp{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,o,l){let u=n[r+0],p=n[r+1],v=n[r+2],x=n[r+3];const I=s[o+0],M=s[o+1],F=s[o+2],j=s[o+3];if(0===l)return t[e+0]=u,t[e+1]=p,t[e+2]=v,void(t[e+3]=x);if(1===l)return t[e+0]=I,t[e+1]=M,t[e+2]=F,void(t[e+3]=j);if(x!==j||u!==I||p!==M||v!==F){let X=1-l;const ce=u*I+p*M+v*F+x*j,we=ce>=0?1:-1,ye=1-ce*ce;if(ye>Number.EPSILON){const We=Math.sqrt(ye),ot=Math.atan2(We,ce*we);X=Math.sin(X*ot)/We,l=Math.sin(l*ot)/We}const Ae=l*we;if(u=u*X+I*Ae,p=p*X+M*Ae,v=v*X+F*Ae,x=x*X+j*Ae,X===1-l){const We=1/Math.sqrt(u*u+p*p+v*v+x*x);u*=We,p*=We,v*=We,x*=We}}t[e]=u,t[e+1]=p,t[e+2]=v,t[e+3]=x}static multiplyQuaternionsFlat(t,e,n,r,s,o){const l=n[r],u=n[r+1],p=n[r+2],v=n[r+3],x=s[o],I=s[o+1],M=s[o+2],F=s[o+3];return t[e]=l*F+v*x+u*M-p*I,t[e+1]=u*F+v*I+p*x-l*M,t[e+2]=p*F+v*M+l*I-u*x,t[e+3]=v*F-l*x-u*I-p*M,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){const n=t._x,r=t._y,s=t._z,o=t._order,l=Math.cos,u=Math.sin,p=l(n/2),v=l(r/2),x=l(s/2),I=u(n/2),M=u(r/2),F=u(s/2);switch(o){case"XYZ":this._x=I*v*x+p*M*F,this._y=p*M*x-I*v*F,this._z=p*v*F+I*M*x,this._w=p*v*x-I*M*F;break;case"YXZ":this._x=I*v*x+p*M*F,this._y=p*M*x-I*v*F,this._z=p*v*F-I*M*x,this._w=p*v*x+I*M*F;break;case"ZXY":this._x=I*v*x-p*M*F,this._y=p*M*x+I*v*F,this._z=p*v*F+I*M*x,this._w=p*v*x-I*M*F;break;case"ZYX":this._x=I*v*x-p*M*F,this._y=p*M*x+I*v*F,this._z=p*v*F-I*M*x,this._w=p*v*x+I*M*F;break;case"YZX":this._x=I*v*x+p*M*F,this._y=p*M*x+I*v*F,this._z=p*v*F-I*M*x,this._w=p*v*x-I*M*F;break;case"XZY":this._x=I*v*x-p*M*F,this._y=p*M*x-I*v*F,this._z=p*v*F+I*M*x,this._w=p*v*x+I*M*F;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],l=e[5],u=e[9],p=e[2],v=e[6],x=e[10],I=n+l+x;if(I>0){const M=.5/Math.sqrt(I+1);this._w=.25/M,this._x=(v-u)*M,this._y=(s-p)*M,this._z=(o-r)*M}else if(n>l&&n>x){const M=2*Math.sqrt(1+n-l-x);this._w=(v-u)/M,this._x=.25*M,this._y=(r+o)/M,this._z=(s+p)/M}else if(l>x){const M=2*Math.sqrt(1+l-n-x);this._w=(s-p)/M,this._x=(r+o)/M,this._y=.25*M,this._z=(u+v)/M}else{const M=2*Math.sqrt(1+x-n-l);this._w=(o-r)/M,this._x=(s+p)/M,this._y=(u+v)/M,this._z=.25*M}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(au(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,l=e._x,u=e._y,p=e._z,v=e._w;return this._x=n*v+o*l+r*p-s*u,this._y=r*v+o*u+s*l-n*p,this._z=s*v+o*p+n*u-r*l,this._w=o*v-n*l-r*u-s*p,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let l=o*t._w+n*t._x+r*t._y+s*t._z;if(l<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,l=-l):this.copy(t),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const M=1-e;return this._w=M*o+e*this._w,this._x=M*n+e*this._x,this._y=M*r+e*this._y,this._z=M*s+e*this._z,this.normalize(),this._onChangeCallback(),this}const p=Math.sqrt(u),v=Math.atan2(p,l),x=Math.sin((1-e)*v)/p,I=Math.sin(e*v)/p;return this._w=o*x+this._w*I,this._x=n*x+this._x*I,this._y=r*x+this._y*I,this._z=s*x+this._z*I,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(s),n*Math.cos(s),e*Math.sin(r))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class $t{constructor(t=0,e=0,n=0){$t.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(x5.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(x5.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,l=t.z,u=t.w,p=u*e+o*r-l*n,v=u*n+l*e-s*r,x=u*r+s*n-o*e,I=-s*e-o*n-l*r;return this.x=p*u+I*-s+v*-l-x*-o,this.y=v*u+I*-o+x*-s-p*-l,this.z=x*u+I*-l+p*-o-v*-s,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,l=e.y,u=e.z;return this.x=r*u-s*l,this.y=s*o-n*u,this.z=n*l-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return XL.copy(this).projectOnVector(t),this.sub(XL)}reflect(t){return this.sub(XL.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(au(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const XL=new $t,x5=new Rp;class v_{constructor(t=new $t(1/0,1/0,1/0),e=new $t(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.length;u<p;u+=3){const v=t[u],x=t[u+1],I=t[u+2];v<e&&(e=v),x<n&&(n=x),I<r&&(r=I),v>s&&(s=v),x>o&&(o=x),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromBufferAttribute(t){let e=1/0,n=1/0,r=1/0,s=-1/0,o=-1/0,l=-1/0;for(let u=0,p=t.count;u<p;u++){const v=t.getX(u),x=t.getY(u),I=t.getZ(u);v<e&&(e=v),x<n&&(n=x),I<r&&(r=I),v>s&&(s=v),x>o&&(o=x),I>l&&(l=I)}return this.min.set(e,n,r),this.max.set(s,o,l),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=B0.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n)if(e&&null!=n.attributes&&void 0!==n.attributes.position){const s=n.attributes.position;for(let o=0,l=s.count;o<l;o++)B0.fromBufferAttribute(s,o).applyMatrix4(t.matrixWorld),this.expandByPoint(B0)}else null===n.boundingBox&&n.computeBoundingBox(),YL.copy(n.boundingBox),YL.applyMatrix4(t.matrixWorld),this.union(YL);const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,B0),B0.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Jw),FS.subVectors(this.max,Jw),xb.subVectors(t.a,Jw),wb.subVectors(t.b,Jw),Ab.subVectors(t.c,Jw),y_.subVectors(wb,xb),__.subVectors(Ab,wb),z0.subVectors(xb,Ab);let e=[0,-y_.z,y_.y,0,-__.z,__.y,0,-z0.z,z0.y,y_.z,0,-y_.x,__.z,0,-__.x,z0.z,0,-z0.x,-y_.y,y_.x,0,-__.y,__.x,0,-z0.y,z0.x,0];return!(!KL(e,xb,wb,Ab,FS)||(e=[1,0,0,0,1,0,0,0,1],!KL(e,xb,wb,Ab,FS)))&&(NS.crossVectors(y_,__),e=[NS.x,NS.y,NS.z],KL(e,xb,wb,Ab,FS))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return B0.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(B0).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(py[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),py[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),py[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),py[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),py[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),py[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),py[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),py[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(py)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const py=[new $t,new $t,new $t,new $t,new $t,new $t,new $t,new $t],B0=new $t,YL=new v_,xb=new $t,wb=new $t,Ab=new $t,y_=new $t,__=new $t,z0=new $t,Jw=new $t,FS=new $t,NS=new $t,V0=new $t;function KL(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){V0.fromArray(i,s);const l=r.x*Math.abs(V0.x)+r.y*Math.abs(V0.y)+r.z*Math.abs(V0.z),u=t.dot(V0),p=e.dot(V0),v=n.dot(V0);if(Math.max(-Math.max(u,p,v),Math.min(u,p,v))>l)return!1}return!0}const Eme=new v_,eA=new $t,ZL=new $t;class Ib{constructor(t=new $t,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Eme.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;eA.subVectors(t,this.center);const e=eA.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(eA,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(ZL.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(eA.copy(t.center).add(ZL)),this.expandByPoint(eA.copy(t.center).sub(ZL))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const gy=new $t,QL=new $t,BS=new $t,C_=new $t,JL=new $t,zS=new $t,eP=new $t;class VS{constructor(t=new $t,e=new $t(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,gy)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=gy.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(gy.copy(this.direction).multiplyScalar(e).add(this.origin),gy.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){QL.copy(t).add(e).multiplyScalar(.5),BS.copy(e).sub(t).normalize(),C_.copy(this.origin).sub(QL);const s=.5*t.distanceTo(e),o=-this.direction.dot(BS),l=C_.dot(this.direction),u=-C_.dot(BS),p=C_.lengthSq(),v=Math.abs(1-o*o);let x,I,M,F;if(v>0)if(x=o*u-l,I=o*l-u,F=s*v,x>=0)if(I>=-F)if(I<=F){const j=1/v;x*=j,I*=j,M=x*(x+o*I+2*l)+I*(o*x+I+2*u)+p}else I=s,x=Math.max(0,-(o*I+l)),M=-x*x+I*(I+2*u)+p;else I=-s,x=Math.max(0,-(o*I+l)),M=-x*x+I*(I+2*u)+p;else I<=-F?(x=Math.max(0,-(-o*s+l)),I=x>0?-s:Math.min(Math.max(-s,-u),s),M=-x*x+I*(I+2*u)+p):I<=F?(x=0,I=Math.min(Math.max(-s,-u),s),M=I*(I+2*u)+p):(x=Math.max(0,-(o*s+l)),I=x>0?s:Math.min(Math.max(-s,-u),s),M=-x*x+I*(I+2*u)+p);else I=o>0?-s:s,x=Math.max(0,-(o*I+l)),M=-x*x+I*(I+2*u)+p;return n&&n.copy(this.direction).multiplyScalar(x).add(this.origin),r&&r.copy(BS).multiplyScalar(I).add(QL),M}intersectSphere(t,e){gy.subVectors(t.center,this.origin);const n=gy.dot(this.direction),r=gy.dot(gy)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),l=n-o,u=n+o;return l<0&&u<0?null:this.at(l<0?u:l,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,l,u;const p=1/this.direction.x,v=1/this.direction.y,x=1/this.direction.z,I=this.origin;return p>=0?(n=(t.min.x-I.x)*p,r=(t.max.x-I.x)*p):(n=(t.max.x-I.x)*p,r=(t.min.x-I.x)*p),v>=0?(s=(t.min.y-I.y)*v,o=(t.max.y-I.y)*v):(s=(t.max.y-I.y)*v,o=(t.min.y-I.y)*v),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),x>=0?(l=(t.min.z-I.z)*x,u=(t.max.z-I.z)*x):(l=(t.max.z-I.z)*x,u=(t.min.z-I.z)*x),n>u||l>r)||((l>n||n!=n)&&(n=l),(u<r||r!=r)&&(r=u),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,gy)}intersectTriangle(t,e,n,r,s){JL.subVectors(e,t),zS.subVectors(n,t),eP.crossVectors(JL,zS);let l,o=this.direction.dot(eP);if(o>0){if(r)return null;l=1}else{if(!(o<0))return null;l=-1,o=-o}C_.subVectors(this.origin,t);const u=l*this.direction.dot(zS.crossVectors(C_,zS));if(u<0)return null;const p=l*this.direction.dot(JL.cross(C_));if(p<0||u+p>o)return null;const v=-l*C_.dot(eP);return v<0?null:this.at(v/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class fo{constructor(){fo.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,n,r,s,o,l,u,p,v,x,I,M,F,j,X){const ce=this.elements;return ce[0]=t,ce[4]=e,ce[8]=n,ce[12]=r,ce[1]=s,ce[5]=o,ce[9]=l,ce[13]=u,ce[2]=p,ce[6]=v,ce[10]=x,ce[14]=I,ce[3]=M,ce[7]=F,ce[11]=j,ce[15]=X,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new fo).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/Sb.setFromMatrixColumn(t,0).length(),s=1/Sb.setFromMatrixColumn(t,1).length(),o=1/Sb.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(r),p=Math.sin(r),v=Math.cos(s),x=Math.sin(s);if("XYZ"===t.order){const I=o*v,M=o*x,F=l*v,j=l*x;e[0]=u*v,e[4]=-u*x,e[8]=p,e[1]=M+F*p,e[5]=I-j*p,e[9]=-l*u,e[2]=j-I*p,e[6]=F+M*p,e[10]=o*u}else if("YXZ"===t.order){const I=u*v,M=u*x,F=p*v,j=p*x;e[0]=I+j*l,e[4]=F*l-M,e[8]=o*p,e[1]=o*x,e[5]=o*v,e[9]=-l,e[2]=M*l-F,e[6]=j+I*l,e[10]=o*u}else if("ZXY"===t.order){const I=u*v,M=u*x,F=p*v,j=p*x;e[0]=I-j*l,e[4]=-o*x,e[8]=F+M*l,e[1]=M+F*l,e[5]=o*v,e[9]=j-I*l,e[2]=-o*p,e[6]=l,e[10]=o*u}else if("ZYX"===t.order){const I=o*v,M=o*x,F=l*v,j=l*x;e[0]=u*v,e[4]=F*p-M,e[8]=I*p+j,e[1]=u*x,e[5]=j*p+I,e[9]=M*p-F,e[2]=-p,e[6]=l*u,e[10]=o*u}else if("YZX"===t.order){const I=o*u,M=o*p,F=l*u,j=l*p;e[0]=u*v,e[4]=j-I*x,e[8]=F*x+M,e[1]=x,e[5]=o*v,e[9]=-l*v,e[2]=-p*v,e[6]=M*x+F,e[10]=I-j*x}else if("XZY"===t.order){const I=o*u,M=o*p,F=l*u,j=l*p;e[0]=u*v,e[4]=-x,e[8]=p*v,e[1]=I*x+j,e[5]=o*v,e[9]=M*x-F,e[2]=F*x-M,e[6]=l*v,e[10]=j*x+I}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Tme,t,Mme)}lookAt(t,e,n){const r=this.elements;return kp.subVectors(t,e),0===kp.lengthSq()&&(kp.z=1),kp.normalize(),b_.crossVectors(n,kp),0===b_.lengthSq()&&(1===Math.abs(n.z)?kp.x+=1e-4:kp.z+=1e-4,kp.normalize(),b_.crossVectors(n,kp)),b_.normalize(),US.crossVectors(kp,b_),r[0]=b_.x,r[4]=US.x,r[8]=kp.x,r[1]=b_.y,r[5]=US.y,r[9]=kp.y,r[2]=b_.z,r[6]=US.z,r[10]=kp.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],l=n[4],u=n[8],p=n[12],v=n[1],x=n[5],I=n[9],M=n[13],F=n[2],j=n[6],X=n[10],ce=n[14],we=n[3],ye=n[7],Ae=n[11],We=n[15],ot=r[0],Mt=r[4],Xe=r[8],yt=r[12],tn=r[1],zn=r[5],Qn=r[9],Un=r[13],An=r[2],Nn=r[6],_n=r[10],Vn=r[14],Fn=r[3],Cn=r[7],Bn=r[11],Wi=r[15];return s[0]=o*ot+l*tn+u*An+p*Fn,s[4]=o*Mt+l*zn+u*Nn+p*Cn,s[8]=o*Xe+l*Qn+u*_n+p*Bn,s[12]=o*yt+l*Un+u*Vn+p*Wi,s[1]=v*ot+x*tn+I*An+M*Fn,s[5]=v*Mt+x*zn+I*Nn+M*Cn,s[9]=v*Xe+x*Qn+I*_n+M*Bn,s[13]=v*yt+x*Un+I*Vn+M*Wi,s[2]=F*ot+j*tn+X*An+ce*Fn,s[6]=F*Mt+j*zn+X*Nn+ce*Cn,s[10]=F*Xe+j*Qn+X*_n+ce*Bn,s[14]=F*yt+j*Un+X*Vn+ce*Wi,s[3]=we*ot+ye*tn+Ae*An+We*Fn,s[7]=we*Mt+ye*zn+Ae*Nn+We*Cn,s[11]=we*Xe+ye*Qn+Ae*_n+We*Bn,s[15]=we*yt+ye*Un+Ae*Vn+We*Wi,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],l=t[5],u=t[9],p=t[13],v=t[2],x=t[6],I=t[10],M=t[14];return t[3]*(+s*u*x-r*p*x-s*l*I+n*p*I+r*l*M-n*u*M)+t[7]*(+e*u*M-e*p*I+s*o*I-r*o*M+r*p*v-s*u*v)+t[11]*(+e*p*x-e*l*M-s*o*x+n*o*M+s*l*v-n*p*v)+t[15]*(-r*l*v-e*u*x+e*l*I+r*o*x-n*o*I+n*u*v)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],l=t[5],u=t[6],p=t[7],v=t[8],x=t[9],I=t[10],M=t[11],F=t[12],j=t[13],X=t[14],ce=t[15],we=x*X*p-j*I*p+j*u*M-l*X*M-x*u*ce+l*I*ce,ye=F*I*p-v*X*p-F*u*M+o*X*M+v*u*ce-o*I*ce,Ae=v*j*p-F*x*p+F*l*M-o*j*M-v*l*ce+o*x*ce,We=F*x*u-v*j*u-F*l*I+o*j*I+v*l*X-o*x*X,ot=e*we+n*ye+r*Ae+s*We;if(0===ot)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Mt=1/ot;return t[0]=we*Mt,t[1]=(j*I*s-x*X*s-j*r*M+n*X*M+x*r*ce-n*I*ce)*Mt,t[2]=(l*X*s-j*u*s+j*r*p-n*X*p-l*r*ce+n*u*ce)*Mt,t[3]=(x*u*s-l*I*s-x*r*p+n*I*p+l*r*M-n*u*M)*Mt,t[4]=ye*Mt,t[5]=(v*X*s-F*I*s+F*r*M-e*X*M-v*r*ce+e*I*ce)*Mt,t[6]=(F*u*s-o*X*s-F*r*p+e*X*p+o*r*ce-e*u*ce)*Mt,t[7]=(o*I*s-v*u*s+v*r*p-e*I*p-o*r*M+e*u*M)*Mt,t[8]=Ae*Mt,t[9]=(F*x*s-v*j*s-F*n*M+e*j*M+v*n*ce-e*x*ce)*Mt,t[10]=(o*j*s-F*l*s+F*n*p-e*j*p-o*n*ce+e*l*ce)*Mt,t[11]=(v*l*s-o*x*s-v*n*p+e*x*p+o*n*M-e*l*M)*Mt,t[12]=We*Mt,t[13]=(v*j*r-F*x*r+F*n*I-e*j*I-v*n*X+e*x*X)*Mt,t[14]=(F*l*r-o*j*r-F*n*u+e*j*u+o*n*X-e*l*X)*Mt,t[15]=(o*x*r-v*l*r+v*n*u-e*x*u-o*n*I+e*l*I)*Mt,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,l=t.y,u=t.z,p=s*o,v=s*l;return this.set(p*o+n,p*l-r*u,p*u+r*l,0,p*l+r*u,v*l+n,v*u-r*o,0,p*u-r*l,v*u+r*o,s*u*u+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,l=e._z,u=e._w,p=s+s,v=o+o,x=l+l,I=s*p,M=s*v,F=s*x,j=o*v,X=o*x,ce=l*x,we=u*p,ye=u*v,Ae=u*x,We=n.x,ot=n.y,Mt=n.z;return r[0]=(1-(j+ce))*We,r[1]=(M+Ae)*We,r[2]=(F-ye)*We,r[3]=0,r[4]=(M-Ae)*ot,r[5]=(1-(I+ce))*ot,r[6]=(X+we)*ot,r[7]=0,r[8]=(F+ye)*Mt,r[9]=(X-we)*Mt,r[10]=(1-(I+j))*Mt,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=Sb.set(r[0],r[1],r[2]).length();const o=Sb.set(r[4],r[5],r[6]).length(),l=Sb.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],ym.copy(this);const p=1/s,v=1/o,x=1/l;return ym.elements[0]*=p,ym.elements[1]*=p,ym.elements[2]*=p,ym.elements[4]*=v,ym.elements[5]*=v,ym.elements[6]*=v,ym.elements[8]*=x,ym.elements[9]*=x,ym.elements[10]*=x,e.setFromRotationMatrix(ym),n.x=s,n.y=o,n.z=l,this}makePerspective(t,e,n,r,s,o){const l=this.elements,p=2*s/(n-r),v=(e+t)/(e-t),x=(n+r)/(n-r),I=-(o+s)/(o-s),M=-2*o*s/(o-s);return l[0]=2*s/(e-t),l[4]=0,l[8]=v,l[12]=0,l[1]=0,l[5]=p,l[9]=x,l[13]=0,l[2]=0,l[6]=0,l[10]=I,l[14]=M,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,s,o){const l=this.elements,u=1/(e-t),p=1/(n-r),v=1/(o-s),x=(e+t)*u,I=(n+r)*p,M=(o+s)*v;return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-x,l[1]=0,l[5]=2*p,l[9]=0,l[13]=-I,l[2]=0,l[6]=0,l[10]=-2*v,l[14]=-M,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Sb=new $t,ym=new fo,Tme=new $t(0,0,0),Mme=new $t(1,1,1),b_=new $t,US=new $t,kp=new $t,w5=new fo,A5=new Rp;let Dme=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DefaultOrder){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,o=s[0],l=s[4],u=s[8],p=s[1],v=s[5],x=s[9],I=s[2],M=s[6],F=s[10];switch(n){case"XYZ":this._y=Math.asin(au(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-x,F),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(M,v),this._z=0);break;case"YXZ":this._x=Math.asin(-au(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(u,F),this._z=Math.atan2(p,v)):(this._y=Math.atan2(-I,o),this._z=0);break;case"ZXY":this._x=Math.asin(au(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(-I,F),this._z=Math.atan2(-l,v)):(this._y=0,this._z=Math.atan2(p,o));break;case"ZYX":this._y=Math.asin(-au(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(M,F),this._z=Math.atan2(p,o)):(this._x=0,this._z=Math.atan2(-l,v));break;case"YZX":this._z=Math.asin(au(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-x,v),this._y=Math.atan2(-I,o)):(this._x=0,this._y=Math.atan2(u,F));break;case"XZY":this._z=Math.asin(-au(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(M,v),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-x,F),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return w5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(w5,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return A5.setFromEuler(this),this.setFromQuaternion(A5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return i.DefaultOrder="XYZ",i.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],i})();class tP{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Lme=0;const I5=new $t,Eb=new Rp,my=new fo,HS=new $t,tA=new $t,Pme=new $t,Rme=new Rp,S5=new $t(1,0,0),E5=new $t(0,1,0),T5=new $t(0,0,1),kme={type:"added"},M5={type:"removed"};let Uf=(()=>{class i extends yb{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Lme++}),this.uuid=Lp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DefaultUp.clone();const e=new $t,n=new Dme,r=new Rp,s=new $t(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function l(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new fo},normalMatrix:{value:new Pp}}),this.matrix=new fo,this.matrixWorld=new fo,this.matrixAutoUpdate=i.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DefaultMatrixWorldAutoUpdate,this.layers=new tP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Eb.setFromAxisAngle(e,n),this.quaternion.multiply(Eb),this}rotateOnWorldAxis(e,n){return Eb.setFromAxisAngle(e,n),this.quaternion.premultiply(Eb),this}rotateX(e){return this.rotateOnAxis(S5,e)}rotateY(e){return this.rotateOnAxis(E5,e)}rotateZ(e){return this.rotateOnAxis(T5,e)}translateOnAxis(e,n){return I5.copy(e).applyQuaternion(this.quaternion),this.position.add(I5.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(S5,e)}translateY(e){return this.translateOnAxis(E5,e)}translateZ(e){return this.translateOnAxis(T5,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(my.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?HS.copy(e):HS.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),tA.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?my.lookAt(tA,HS,this.up):my.lookAt(HS,tA,this.up),this.quaternion.setFromRotationMatrix(my),s&&(my.extractRotation(s.matrixWorld),Eb.setFromRotationMatrix(my),this.quaternion.premultiply(Eb.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(kme)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(M5)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(M5)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),my.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),my.multiply(e.parent.matrixWorld)),e.applyMatrix4(my),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const l=this.children[r].getObjectByProperty(e,n);if(void 0!==l)return l}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tA,e,Pme),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tA,Rme,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===e)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,l=s.length;o<l;o++){const u=s[o];!0===u.matrixWorldAutoUpdate&&u.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(u,p){return void 0===u[p.uuid]&&(u[p.uuid]=p.toJSON(e)),p.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const u=this.geometry.parameters;if(void 0!==u&&void 0!==u.shapes){const p=u.shapes;if(Array.isArray(p))for(let v=0,x=p.length;v<x;v++)o(e.shapes,p[v]);else o(e.shapes,p)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const u=[];for(let p=0,v=this.material.length;p<v;p++)u.push(o(e.materials,this.material[p]));s.material=u}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++)s.animations.push(o(e.animations,this.animations[u]))}if(n){const u=l(e.geometries),p=l(e.materials),v=l(e.textures),x=l(e.images),I=l(e.shapes),M=l(e.skeletons),F=l(e.animations),j=l(e.nodes);u.length>0&&(r.geometries=u),p.length>0&&(r.materials=p),v.length>0&&(r.textures=v),x.length>0&&(r.images=x),I.length>0&&(r.shapes=I),M.length>0&&(r.skeletons=M),F.length>0&&(r.animations=F),j.length>0&&(r.nodes=j)}return r.object=s,r;function l(u){const p=[];for(const v in u){const x=u[v];delete x.metadata,p.push(x)}return p}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DefaultUp=new $t(0,1,0),i.DefaultMatrixAutoUpdate=!0,i.DefaultMatrixWorldAutoUpdate=!0,i})();const _m=new $t,vy=new $t,nP=new $t,yy=new $t,Tb=new $t,Mb=new $t,D5=new $t,iP=new $t,rP=new $t,sP=new $t;class Cm{constructor(t=new $t,e=new $t,n=new $t){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),_m.subVectors(t,e),r.cross(_m);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){_m.subVectors(r,e),vy.subVectors(n,e),nP.subVectors(t,e);const o=_m.dot(_m),l=_m.dot(vy),u=_m.dot(nP),p=vy.dot(vy),v=vy.dot(nP),x=o*p-l*l;if(0===x)return s.set(-2,-1,-1);const I=1/x,M=(p*u-l*v)*I,F=(o*v-l*u)*I;return s.set(1-M-F,F,M)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,yy),yy.x>=0&&yy.y>=0&&yy.x+yy.y<=1}static getUV(t,e,n,r,s,o,l,u){return this.getBarycoord(t,e,n,r,yy),u.set(0,0),u.addScaledVector(s,yy.x),u.addScaledVector(o,yy.y),u.addScaledVector(l,yy.z),u}static isFrontFacing(t,e,n,r){return _m.subVectors(n,e),vy.subVectors(t,e),_m.cross(vy).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return _m.subVectors(this.c,this.b),vy.subVectors(this.a,this.b),.5*_m.cross(vy).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Cm.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Cm.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,r,s){return Cm.getUV(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return Cm.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Cm.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,l;Tb.subVectors(r,n),Mb.subVectors(s,n),iP.subVectors(t,n);const u=Tb.dot(iP),p=Mb.dot(iP);if(u<=0&&p<=0)return e.copy(n);rP.subVectors(t,r);const v=Tb.dot(rP),x=Mb.dot(rP);if(v>=0&&x<=v)return e.copy(r);const I=u*x-v*p;if(I<=0&&u>=0&&v<=0)return o=u/(u-v),e.copy(n).addScaledVector(Tb,o);sP.subVectors(t,s);const M=Tb.dot(sP),F=Mb.dot(sP);if(F>=0&&M<=F)return e.copy(s);const j=M*p-u*F;if(j<=0&&p>=0&&F<=0)return l=p/(p-F),e.copy(n).addScaledVector(Mb,l);const X=v*F-M*x;if(X<=0&&x-v>=0&&M-F>=0)return D5.subVectors(s,r),l=(x-v)/(x-v+(M-F)),e.copy(r).addScaledVector(D5,l);const ce=1/(X+j+I);return o=j*ce,l=I*ce,e.copy(n).addScaledVector(Tb,o).addScaledVector(Mb,l)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Ome=0;class U0 extends yb{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ome++}),this.uuid=Lp(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class H0 extends U0{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Jr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Mu=new $t,GS=new Gi;class Ch{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)GS.fromBufferAttribute(this,e),GS.applyMatrix3(t),this.setXY(e,GS.x,GS.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Mu.fromBufferAttribute(this,e),Mu.applyMatrix3(t),this.setXYZ(e,Mu.x,Mu.y,Mu.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Mu.fromBufferAttribute(this,e),Mu.applyMatrix4(t),this.setXYZ(e,Mu.x,Mu.y,Mu.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Mu.fromBufferAttribute(this,e),Mu.applyNormalMatrix(t),this.setXYZ(e,Mu.x,Mu.y,Mu.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Mu.fromBufferAttribute(this,e),Mu.transformDirection(t),this.setXYZ(e,Mu.x,Mu.y,Mu.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=fy(e,this.array)),e}setX(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=fy(e,this.array)),e}setY(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=fy(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=fy(e,this.array)),e}setW(t,e){return this.normalized&&(e=Cl(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Cl(e,this.array),n=Cl(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=Cl(e,this.array),n=Cl(n,this.array),r=Cl(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=Cl(e,this.array),n=Cl(n,this.array),r=Cl(r,this.array),s=Cl(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class L5 extends Ch{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class P5 extends Ch{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class os extends Ch{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Fme=0;const xg=new fo,oP=new Uf,Db=new $t,Op=new v_,nA=new v_,bh=new $t;class No extends yb{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Fme++}),this.uuid=Lp(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(y5(t)?P5:L5)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Pp).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return xg.makeRotationFromQuaternion(t),this.applyMatrix4(xg),this}rotateX(t){return xg.makeRotationX(t),this.applyMatrix4(xg),this}rotateY(t){return xg.makeRotationY(t),this.applyMatrix4(xg),this}rotateZ(t){return xg.makeRotationZ(t),this.applyMatrix4(xg),this}translate(t,e,n){return xg.makeTranslation(t,e,n),this.applyMatrix4(xg),this}scale(t,e,n){return xg.makeScale(t,e,n),this.applyMatrix4(xg),this}lookAt(t){return oP.lookAt(t),oP.updateMatrix(),this.applyMatrix4(oP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Db).negate(),this.translate(Db.x,Db.y,Db.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new os(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new v_);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new $t(-1/0,-1/0,-1/0),new $t(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)Op.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(bh.addVectors(this.boundingBox.min,Op.min),this.boundingBox.expandByPoint(bh),bh.addVectors(this.boundingBox.max,Op.max),this.boundingBox.expandByPoint(bh)):(this.boundingBox.expandByPoint(Op.min),this.boundingBox.expandByPoint(Op.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ib);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new $t,1/0);if(t){const n=this.boundingSphere.center;if(Op.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)nA.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(bh.addVectors(Op.min,nA.min),Op.expandByPoint(bh),bh.addVectors(Op.max,nA.max),Op.expandByPoint(bh)):(Op.expandByPoint(nA.min),Op.expandByPoint(nA.max));Op.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)bh.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(bh));if(e)for(let s=0,o=e.length;s<o;s++){const l=e[s],u=this.morphTargetsRelative;for(let p=0,v=l.count;p<v;p++)bh.fromBufferAttribute(l,p),u&&(Db.fromBufferAttribute(t,p),bh.add(Db)),r=Math.max(r,n.distanceToSquared(bh))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,r=e.position.array,s=e.normal.array,o=e.uv.array,l=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Ch(new Float32Array(4*l),4));const u=this.getAttribute("tangent").array,p=[],v=[];for(let tn=0;tn<l;tn++)p[tn]=new $t,v[tn]=new $t;const x=new $t,I=new $t,M=new $t,F=new Gi,j=new Gi,X=new Gi,ce=new $t,we=new $t;function ye(tn,zn,Qn){x.fromArray(r,3*tn),I.fromArray(r,3*zn),M.fromArray(r,3*Qn),F.fromArray(o,2*tn),j.fromArray(o,2*zn),X.fromArray(o,2*Qn),I.sub(x),M.sub(x),j.sub(F),X.sub(F);const Un=1/(j.x*X.y-X.x*j.y);!isFinite(Un)||(ce.copy(I).multiplyScalar(X.y).addScaledVector(M,-j.y).multiplyScalar(Un),we.copy(M).multiplyScalar(j.x).addScaledVector(I,-X.x).multiplyScalar(Un),p[tn].add(ce),p[zn].add(ce),p[Qn].add(ce),v[tn].add(we),v[zn].add(we),v[Qn].add(we))}let Ae=this.groups;0===Ae.length&&(Ae=[{start:0,count:n.length}]);for(let tn=0,zn=Ae.length;tn<zn;++tn){const Qn=Ae[tn],Un=Qn.start;for(let Nn=Un,_n=Un+Qn.count;Nn<_n;Nn+=3)ye(n[Nn+0],n[Nn+1],n[Nn+2])}const We=new $t,ot=new $t,Mt=new $t,Xe=new $t;function yt(tn){Mt.fromArray(s,3*tn),Xe.copy(Mt);const zn=p[tn];We.copy(zn),We.sub(Mt.multiplyScalar(Mt.dot(zn))).normalize(),ot.crossVectors(Xe,zn);const Un=ot.dot(v[tn])<0?-1:1;u[4*tn]=We.x,u[4*tn+1]=We.y,u[4*tn+2]=We.z,u[4*tn+3]=Un}for(let tn=0,zn=Ae.length;tn<zn;++tn){const Qn=Ae[tn],Un=Qn.start;for(let Nn=Un,_n=Un+Qn.count;Nn<_n;Nn+=3)yt(n[Nn+0]),yt(n[Nn+1]),yt(n[Nn+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Ch(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let I=0,M=n.count;I<M;I++)n.setXYZ(I,0,0,0);const r=new $t,s=new $t,o=new $t,l=new $t,u=new $t,p=new $t,v=new $t,x=new $t;if(t)for(let I=0,M=t.count;I<M;I+=3){const F=t.getX(I+0),j=t.getX(I+1),X=t.getX(I+2);r.fromBufferAttribute(e,F),s.fromBufferAttribute(e,j),o.fromBufferAttribute(e,X),v.subVectors(o,s),x.subVectors(r,s),v.cross(x),l.fromBufferAttribute(n,F),u.fromBufferAttribute(n,j),p.fromBufferAttribute(n,X),l.add(v),u.add(v),p.add(v),n.setXYZ(F,l.x,l.y,l.z),n.setXYZ(j,u.x,u.y,u.z),n.setXYZ(X,p.x,p.y,p.z)}else for(let I=0,M=e.count;I<M;I+=3)r.fromBufferAttribute(e,I+0),s.fromBufferAttribute(e,I+1),o.fromBufferAttribute(e,I+2),v.subVectors(o,s),x.subVectors(r,s),v.cross(x),n.setXYZ(I+0,v.x,v.y,v.z),n.setXYZ(I+1,v.x,v.y,v.z),n.setXYZ(I+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)bh.fromBufferAttribute(t,e),bh.normalize(),t.setXYZ(e,bh.x,bh.y,bh.z)}toNonIndexed(){function t(l,u){const p=l.array,v=l.itemSize,x=l.normalized,I=new p.constructor(u.length*v);let M=0,F=0;for(let j=0,X=u.length;j<X;j++){M=l.isInterleavedBufferAttribute?u[j]*l.data.stride+l.offset:u[j]*v;for(let ce=0;ce<v;ce++)I[F++]=p[M++]}return new Ch(I,v,x)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new No,n=this.index.array,r=this.attributes;for(const l in r){const p=t(r[l],n);e.setAttribute(l,p)}const s=this.morphAttributes;for(const l in s){const u=[],p=s[l];for(let v=0,x=p.length;v<x;v++){const M=t(p[v],n);u.push(M)}e.morphAttributes[l]=u}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const p=o[l];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const u=this.parameters;for(const p in u)void 0!==u[p]&&(t[p]=u[p]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const u in n)t.data.attributes[u]=n[u].toJSON(t.data);const r={};let s=!1;for(const u in this.morphAttributes){const p=this.morphAttributes[u],v=[];for(let x=0,I=p.length;x<I;x++)v.push(p[x].toJSON(t.data));v.length>0&&(r[u]=v,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const p in r)this.setAttribute(p,r[p].clone(e));const s=t.morphAttributes;for(const p in s){const v=[],x=s[p];for(let I=0,M=x.length;I<M;I++)v.push(x[I].clone(e));this.morphAttributes[p]=v}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let p=0,v=o.length;p<v;p++){const x=o[p];this.addGroup(x.start,x.count,x.materialIndex)}const l=t.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=t.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const R5=new fo,Lb=new VS,aP=new Ib,x_=new $t,w_=new $t,A_=new $t,lP=new $t,cP=new $t,uP=new $t,WS=new $t,jS=new $t,$S=new $t,qS=new Gi,XS=new Gi,YS=new Gi,hP=new $t,KS=new $t;class Md extends Uf{constructor(t=new No,e=new H0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}raycast(t,e){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),aP.copy(n.boundingSphere),aP.applyMatrix4(s),!1===t.ray.intersectsSphere(aP))||(R5.copy(s).invert(),Lb.copy(t.ray).applyMatrix4(R5),null!==n.boundingBox&&!1===Lb.intersectsBox(n.boundingBox)))return;let o;const l=n.index,u=n.attributes.position,p=n.morphAttributes.position,v=n.morphTargetsRelative,x=n.attributes.uv,I=n.attributes.uv2,M=n.groups,F=n.drawRange;if(null!==l)if(Array.isArray(r))for(let j=0,X=M.length;j<X;j++){const ce=M[j],we=r[ce.materialIndex];for(let We=Math.max(ce.start,F.start),ot=Math.min(l.count,Math.min(ce.start+ce.count,F.start+F.count));We<ot;We+=3){const Mt=l.getX(We),Xe=l.getX(We+1),yt=l.getX(We+2);o=ZS(this,we,t,Lb,u,p,v,x,I,Mt,Xe,yt),o&&(o.faceIndex=Math.floor(We/3),o.face.materialIndex=ce.materialIndex,e.push(o))}}else for(let ce=Math.max(0,F.start),we=Math.min(l.count,F.start+F.count);ce<we;ce+=3){const ye=l.getX(ce),Ae=l.getX(ce+1),We=l.getX(ce+2);o=ZS(this,r,t,Lb,u,p,v,x,I,ye,Ae,We),o&&(o.faceIndex=Math.floor(ce/3),e.push(o))}else if(void 0!==u)if(Array.isArray(r))for(let j=0,X=M.length;j<X;j++){const ce=M[j],we=r[ce.materialIndex];for(let We=Math.max(ce.start,F.start),ot=Math.min(u.count,Math.min(ce.start+ce.count,F.start+F.count));We<ot;We+=3)o=ZS(this,we,t,Lb,u,p,v,x,I,We,We+1,We+2),o&&(o.faceIndex=Math.floor(We/3),o.face.materialIndex=ce.materialIndex,e.push(o))}else for(let ce=Math.max(0,F.start),we=Math.min(u.count,F.start+F.count);ce<we;ce+=3)o=ZS(this,r,t,Lb,u,p,v,x,I,ce,ce+1,ce+2),o&&(o.faceIndex=Math.floor(ce/3),e.push(o))}}function ZS(i,t,e,n,r,s,o,l,u,p,v,x){x_.fromBufferAttribute(r,p),w_.fromBufferAttribute(r,v),A_.fromBufferAttribute(r,x);const I=i.morphTargetInfluences;if(s&&I){WS.set(0,0,0),jS.set(0,0,0),$S.set(0,0,0);for(let F=0,j=s.length;F<j;F++){const X=I[F],ce=s[F];0!==X&&(lP.fromBufferAttribute(ce,p),cP.fromBufferAttribute(ce,v),uP.fromBufferAttribute(ce,x),o?(WS.addScaledVector(lP,X),jS.addScaledVector(cP,X),$S.addScaledVector(uP,X)):(WS.addScaledVector(lP.sub(x_),X),jS.addScaledVector(cP.sub(w_),X),$S.addScaledVector(uP.sub(A_),X)))}x_.add(WS),w_.add(jS),A_.add($S)}i.isSkinnedMesh&&(i.boneTransform(p,x_),i.boneTransform(v,w_),i.boneTransform(x,A_));const M=function Nme(i,t,e,n,r,s,o,l){let u;if(u=1===t.side?n.intersectTriangle(o,s,r,!0,l):n.intersectTriangle(r,s,o,2!==t.side,l),null===u)return null;KS.copy(l),KS.applyMatrix4(i.matrixWorld);const p=e.ray.origin.distanceTo(KS);return p<e.near||p>e.far?null:{distance:p,point:KS.clone(),object:i}}(i,t,e,n,x_,w_,A_,hP);if(M){l&&(qS.fromBufferAttribute(l,p),XS.fromBufferAttribute(l,v),YS.fromBufferAttribute(l,x),M.uv=Cm.getUV(hP,x_,w_,A_,qS,XS,YS,new Gi)),u&&(qS.fromBufferAttribute(u,p),XS.fromBufferAttribute(u,v),YS.fromBufferAttribute(u,x),M.uv2=Cm.getUV(hP,x_,w_,A_,qS,XS,YS,new Gi));const F={a:p,b:v,c:x,normal:new $t,materialIndex:0};Cm.getNormal(x_,w_,A_,F.normal),M.face=F}return M}class I_ extends No{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const u=[],p=[],v=[],x=[];let I=0,M=0;function F(j,X,ce,we,ye,Ae,We,ot,Mt,Xe,yt){const tn=Ae/Mt,zn=We/Xe,Qn=Ae/2,Un=We/2,An=ot/2,Nn=Mt+1,_n=Xe+1;let Vn=0,Fn=0;const Cn=new $t;for(let Bn=0;Bn<_n;Bn++){const Wi=Bn*zn-Un;for(let wi=0;wi<Nn;wi++)Cn[j]=(wi*tn-Qn)*we,Cn[X]=Wi*ye,Cn[ce]=An,p.push(Cn.x,Cn.y,Cn.z),Cn[j]=0,Cn[X]=0,Cn[ce]=ot>0?1:-1,v.push(Cn.x,Cn.y,Cn.z),x.push(wi/Mt),x.push(1-Bn/Xe),Vn+=1}for(let Bn=0;Bn<Xe;Bn++)for(let Wi=0;Wi<Mt;Wi++){const Ji=I+Wi+Nn*(Bn+1),hr=I+(Wi+1)+Nn*(Bn+1),Is=I+(Wi+1)+Nn*Bn;u.push(I+Wi+Nn*Bn,Ji,Is),u.push(Ji,hr,Is),Fn+=6}l.addGroup(M,Fn,yt),M+=Fn,I+=Vn}F("z","y","x",-1,-1,n,e,t,o,s,0),F("z","y","x",1,-1,n,e,-t,o,s,1),F("x","z","y",1,1,t,n,e,r,o,2),F("x","z","y",1,-1,t,n,-e,r,o,3),F("x","y","z",1,-1,t,e,n,r,s,4),F("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new os(p,3)),this.setAttribute("normal",new os(v,3)),this.setAttribute("uv",new os(x,2))}static fromJSON(t){return new I_(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Pb(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];t[e][n]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.clone():Array.isArray(r)?r.slice():r}}return t}function lf(i){const t={};for(let e=0;e<i.length;e++){const n=Pb(i[e]);for(const r in n)t[r]=n[r]}return t}const zme={clone:Pb,merge:lf};class S_ extends U0{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Pb(t.uniforms),this.uniformsGroups=function Bme(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class dP extends Uf{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new fo,this.projectionMatrix=new fo,this.projectionMatrixInverse=new fo}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Jh extends dP{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Kw*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*O0*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Kw*Math.atan(Math.tan(.5*O0*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*O0*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const u=o.fullWidth,p=o.fullHeight;s+=o.offsetX*r/u,e-=o.offsetY*n/p,r*=o.width/u,n*=o.height/p}const l=this.filmOffset;0!==l&&(s+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Hme extends Uf{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Jh(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new $t(1,0,0)),this.add(r);const s=new Jh(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new $t(-1,0,0)),this.add(s);const o=new Jh(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new $t(0,1,0)),this.add(o);const l=new Jh(90,1,t,e);l.layers=this.layers,l.up.set(0,0,-1),l.lookAt(new $t(0,-1,0)),this.add(l);const u=new Jh(90,1,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new $t(0,0,1)),this.add(u);const p=new Jh(90,1,t,e);p.layers=this.layers,p.up.set(0,-1,0),p.lookAt(new $t(0,0,-1)),this.add(p)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,l,u,p]=this.children,v=t.getRenderTarget(),x=t.toneMapping,I=t.xr.enabled;t.toneMapping=0,t.xr.enabled=!1;const M=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,s),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,u),n.texture.generateMipmaps=M,t.setRenderTarget(n,5),t.render(e,p),t.setRenderTarget(v),t.toneMapping=x,t.xr.enabled=I,n.texture.needsPMREMUpdate=!0}}class QS extends m_{constructor(t,e,n,r,s,o,l,u,p,v){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,r,s,o,l,u,p,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Gme extends N0{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new QS([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Tu}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new I_(5,5,5),s=new S_({name:"CubemapFromEquirect",uniforms:Pb(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=e;const o=new Md(r,s),l=e.minFilter;return 1008===e.minFilter&&(e.minFilter=Tu),new Hme(1,10,this).update(t,o),e.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}const fP=new $t,Wme=new $t,jme=new Pp;class G0{constructor(t=new $t(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=fP.subVectors(n,e).cross(Wme.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(fP),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(n).multiplyScalar(s).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||jme.getNormalMatrix(t),r=this.coplanarPoint(fP).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ob=new Ib,JS=new $t;class pP{constructor(t=new G0,e=new G0,n=new G0,r=new G0,s=new G0,o=new G0){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const l=this.planes;return l[0].copy(t),l[1].copy(e),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,r=n[0],s=n[1],o=n[2],l=n[3],u=n[4],p=n[5],v=n[6],x=n[7],I=n[8],M=n[9],F=n[10],j=n[11],X=n[12],ce=n[13],we=n[14],ye=n[15];return e[0].setComponents(l-r,x-u,j-I,ye-X).normalize(),e[1].setComponents(l+r,x+u,j+I,ye+X).normalize(),e[2].setComponents(l+s,x+p,j+M,ye+ce).normalize(),e[3].setComponents(l-s,x-p,j-M,ye-ce).normalize(),e[4].setComponents(l-o,x-v,j-F,ye-we).normalize(),e[5].setComponents(l+o,x+v,j+F,ye+we).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ob.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Ob)}intersectsSprite(t){return Ob.center.set(0,0,0),Ob.radius=.7071067811865476,Ob.applyMatrix4(t.matrixWorld),this.intersectsSphere(Ob)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(JS.x=r.normal.x>0?t.max.x:t.min.x,JS.y=r.normal.y>0?t.max.y:t.min.y,JS.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(JS)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function k5(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function $me(i,t){const e=t.isWebGL2,n=new WeakMap;return{get:function o(p){return p.isInterleavedBufferAttribute&&(p=p.data),n.get(p)},remove:function l(p){p.isInterleavedBufferAttribute&&(p=p.data);const v=n.get(p);v&&(i.deleteBuffer(v.buffer),n.delete(p))},update:function u(p,v){if(p.isGLBufferAttribute){const I=n.get(p);return void((!I||I.version<p.version)&&n.set(p,{buffer:p.buffer,type:p.type,bytesPerElement:p.elementSize,version:p.version}))}p.isInterleavedBufferAttribute&&(p=p.data);const x=n.get(p);void 0===x?n.set(p,function r(p,v){const x=p.array,I=p.usage,M=i.createBuffer();let F;if(i.bindBuffer(v,M),i.bufferData(v,x,I),p.onUploadCallback(),x instanceof Float32Array)F=5126;else if(x instanceof Uint16Array)if(p.isFloat16BufferAttribute){if(!e)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");F=5131}else F=5123;else if(x instanceof Int16Array)F=5122;else if(x instanceof Uint32Array)F=5125;else if(x instanceof Int32Array)F=5124;else if(x instanceof Int8Array)F=5120;else if(x instanceof Uint8Array)F=5121;else{if(!(x instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+x);F=5121}return{buffer:M,type:F,bytesPerElement:x.BYTES_PER_ELEMENT,version:p.version}}(p,v)):x.version<p.version&&(function s(p,v,x){const I=v.array,M=v.updateRange;i.bindBuffer(x,p),-1===M.count?i.bufferSubData(x,0,I):(e?i.bufferSubData(x,M.offset*I.BYTES_PER_ELEMENT,I,M.offset,M.count):i.bufferSubData(x,M.offset*I.BYTES_PER_ELEMENT,I.subarray(M.offset,M.offset+M.count)),M.count=-1)}(x.buffer,p,v),x.version=p.version)}}}class eE extends No{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,l=Math.floor(n),u=Math.floor(r),p=l+1,v=u+1,x=t/l,I=e/u,M=[],F=[],j=[],X=[];for(let ce=0;ce<v;ce++){const we=ce*I-o;for(let ye=0;ye<p;ye++)F.push(ye*x-s,-we,0),j.push(0,0,1),X.push(ye/l),X.push(1-ce/u)}for(let ce=0;ce<u;ce++)for(let we=0;we<l;we++){const Ae=we+p*(ce+1),We=we+1+p*(ce+1),ot=we+1+p*ce;M.push(we+p*ce,Ae,ot),M.push(Ae,We,ot)}this.setIndex(M),this.setAttribute("position",new os(F,3)),this.setAttribute("normal",new os(j,3)),this.setAttribute("uv",new os(X,2))}static fromJSON(t){return new eE(t.width,t.height,t.widthSegments,t.heightSegments)}}const To={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Sr={common:{diffuse:{value:new Jr(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Pp},uv2Transform:{value:new Pp},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Gi(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Jr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Jr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pp}},sprite:{diffuse:{value:new Jr(16777215)},opacity:{value:1},center:{value:new Gi(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Pp}}},cv={basic:{uniforms:lf([Sr.common,Sr.specularmap,Sr.envmap,Sr.aomap,Sr.lightmap,Sr.fog]),vertexShader:To.meshbasic_vert,fragmentShader:To.meshbasic_frag},lambert:{uniforms:lf([Sr.common,Sr.specularmap,Sr.envmap,Sr.aomap,Sr.lightmap,Sr.emissivemap,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,Sr.fog,Sr.lights,{emissive:{value:new Jr(0)}}]),vertexShader:To.meshlambert_vert,fragmentShader:To.meshlambert_frag},phong:{uniforms:lf([Sr.common,Sr.specularmap,Sr.envmap,Sr.aomap,Sr.lightmap,Sr.emissivemap,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,Sr.fog,Sr.lights,{emissive:{value:new Jr(0)},specular:{value:new Jr(1118481)},shininess:{value:30}}]),vertexShader:To.meshphong_vert,fragmentShader:To.meshphong_frag},standard:{uniforms:lf([Sr.common,Sr.envmap,Sr.aomap,Sr.lightmap,Sr.emissivemap,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,Sr.roughnessmap,Sr.metalnessmap,Sr.fog,Sr.lights,{emissive:{value:new Jr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:To.meshphysical_vert,fragmentShader:To.meshphysical_frag},toon:{uniforms:lf([Sr.common,Sr.aomap,Sr.lightmap,Sr.emissivemap,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,Sr.gradientmap,Sr.fog,Sr.lights,{emissive:{value:new Jr(0)}}]),vertexShader:To.meshtoon_vert,fragmentShader:To.meshtoon_frag},matcap:{uniforms:lf([Sr.common,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,Sr.fog,{matcap:{value:null}}]),vertexShader:To.meshmatcap_vert,fragmentShader:To.meshmatcap_frag},points:{uniforms:lf([Sr.points,Sr.fog]),vertexShader:To.points_vert,fragmentShader:To.points_frag},dashed:{uniforms:lf([Sr.common,Sr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:To.linedashed_vert,fragmentShader:To.linedashed_frag},depth:{uniforms:lf([Sr.common,Sr.displacementmap]),vertexShader:To.depth_vert,fragmentShader:To.depth_frag},normal:{uniforms:lf([Sr.common,Sr.bumpmap,Sr.normalmap,Sr.displacementmap,{opacity:{value:1}}]),vertexShader:To.meshnormal_vert,fragmentShader:To.meshnormal_frag},sprite:{uniforms:lf([Sr.sprite,Sr.fog]),vertexShader:To.sprite_vert,fragmentShader:To.sprite_frag},background:{uniforms:{uvTransform:{value:new Pp},t2D:{value:null}},vertexShader:To.background_vert,fragmentShader:To.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:To.backgroundCube_vert,fragmentShader:To.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:To.cube_vert,fragmentShader:To.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:To.equirect_vert,fragmentShader:To.equirect_frag},distanceRGBA:{uniforms:lf([Sr.common,Sr.displacementmap,{referencePosition:{value:new $t},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:To.distanceRGBA_vert,fragmentShader:To.distanceRGBA_frag},shadow:{uniforms:lf([Sr.lights,Sr.fog,{color:{value:new Jr(0)},opacity:{value:1}}]),vertexShader:To.shadow_vert,fragmentShader:To.shadow_frag}};function jye(i,t,e,n,r,s,o){const l=new Jr(0);let p,v,u=!0===s?0:1,x=null,I=0,M=null;function j(X,ce){n.buffers.color.setClear(X.r,X.g,X.b,ce,o)}return{getClearColor:function(){return l},setClearColor:function(X,ce=1){l.set(X),u=ce,j(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(X){u=X,j(l,u)},render:function F(X,ce){let we=!1,ye=!0===ce.isScene?ce.background:null;ye&&ye.isTexture&&(ye=(ce.backgroundBlurriness>0?e:t).get(ye));const Ae=i.xr,We=Ae.getSession&&Ae.getSession();We&&"additive"===We.environmentBlendMode&&(ye=null),null===ye?j(l,u):ye&&ye.isColor&&(j(ye,1),we=!0),(i.autoClear||we)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),ye&&(ye.isCubeTexture||306===ye.mapping)?(void 0===v&&(v=new Md(new I_(1,1,1),new S_({name:"BackgroundCubeMaterial",uniforms:Pb(cv.backgroundCube.uniforms),vertexShader:cv.backgroundCube.vertexShader,fragmentShader:cv.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(ot,Mt,Xe){this.matrixWorld.copyPosition(Xe.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(v)),v.material.uniforms.envMap.value=ye,v.material.uniforms.flipEnvMap.value=ye.isCubeTexture&&!1===ye.isRenderTargetTexture?-1:1,v.material.uniforms.backgroundBlurriness.value=ce.backgroundBlurriness,(x!==ye||I!==ye.version||M!==i.toneMapping)&&(v.material.needsUpdate=!0,x=ye,I=ye.version,M=i.toneMapping),v.layers.enableAll(),X.unshift(v,v.geometry,v.material,0,0,null)):ye&&ye.isTexture&&(void 0===p&&(p=new Md(new eE(2,2),new S_({name:"BackgroundMaterial",uniforms:Pb(cv.background.uniforms),vertexShader:cv.background.vertexShader,fragmentShader:cv.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(p)),p.material.uniforms.t2D.value=ye,!0===ye.matrixAutoUpdate&&ye.updateMatrix(),p.material.uniforms.uvTransform.value.copy(ye.matrix),(x!==ye||I!==ye.version||M!==i.toneMapping)&&(p.material.needsUpdate=!0,x=ye,I=ye.version,M=i.toneMapping),p.layers.enableAll(),X.unshift(p,p.geometry,p.material,0,0,null))}}}function $ye(i,t,e,n){const r=i.getParameter(34921),s=n.isWebGL2?null:t.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,l={},u=X(null);let p=u,v=!1;function M(An){return n.isWebGL2?i.bindVertexArray(An):s.bindVertexArrayOES(An)}function F(An){return n.isWebGL2?i.deleteVertexArray(An):s.deleteVertexArrayOES(An)}function X(An){const Nn=[],_n=[],Vn=[];for(let Fn=0;Fn<r;Fn++)Nn[Fn]=0,_n[Fn]=0,Vn[Fn]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Nn,enabledAttributes:_n,attributeDivisors:Vn,object:An,attributes:{},index:null}}function ye(){const An=p.newAttributes;for(let Nn=0,_n=An.length;Nn<_n;Nn++)An[Nn]=0}function Ae(An){We(An,0)}function We(An,Nn){const Vn=p.enabledAttributes,Fn=p.attributeDivisors;p.newAttributes[An]=1,0===Vn[An]&&(i.enableVertexAttribArray(An),Vn[An]=1),Fn[An]!==Nn&&((n.isWebGL2?i:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](An,Nn),Fn[An]=Nn)}function ot(){const An=p.newAttributes,Nn=p.enabledAttributes;for(let _n=0,Vn=Nn.length;_n<Vn;_n++)Nn[_n]!==An[_n]&&(i.disableVertexAttribArray(_n),Nn[_n]=0)}function Mt(An,Nn,_n,Vn,Fn,Cn){!0!==n.isWebGL2||5124!==_n&&5125!==_n?i.vertexAttribPointer(An,Nn,_n,Vn,Fn,Cn):i.vertexAttribIPointer(An,Nn,_n,Fn,Cn)}function Qn(){Un(),v=!0,p!==u&&(p=u,M(p.object))}function Un(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function x(An,Nn,_n,Vn,Fn){let Cn=!1;if(o){const Bn=function j(An,Nn,_n){const Vn=!0===_n.wireframe;let Fn=l[An.id];void 0===Fn&&(Fn={},l[An.id]=Fn);let Cn=Fn[Nn.id];void 0===Cn&&(Cn={},Fn[Nn.id]=Cn);let Bn=Cn[Vn];return void 0===Bn&&(Bn=X(function I(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),Cn[Vn]=Bn),Bn}(Vn,_n,Nn);p!==Bn&&(p=Bn,M(p.object)),Cn=function ce(An,Nn,_n,Vn){const Fn=p.attributes,Cn=Nn.attributes;let Bn=0;const Wi=_n.getAttributes();for(const wi in Wi)if(Wi[wi].location>=0){const hr=Fn[wi];let Is=Cn[wi];if(void 0===Is&&("instanceMatrix"===wi&&An.instanceMatrix&&(Is=An.instanceMatrix),"instanceColor"===wi&&An.instanceColor&&(Is=An.instanceColor)),void 0===hr||hr.attribute!==Is||Is&&hr.data!==Is.data)return!0;Bn++}return p.attributesNum!==Bn||p.index!==Vn}(An,Vn,_n,Fn),Cn&&function we(An,Nn,_n,Vn){const Fn={},Cn=Nn.attributes;let Bn=0;const Wi=_n.getAttributes();for(const wi in Wi)if(Wi[wi].location>=0){let hr=Cn[wi];void 0===hr&&("instanceMatrix"===wi&&An.instanceMatrix&&(hr=An.instanceMatrix),"instanceColor"===wi&&An.instanceColor&&(hr=An.instanceColor));const Is={};Is.attribute=hr,hr&&hr.data&&(Is.data=hr.data),Fn[wi]=Is,Bn++}p.attributes=Fn,p.attributesNum=Bn,p.index=Vn}(An,Vn,_n,Fn)}else{const Bn=!0===Nn.wireframe;(p.geometry!==Vn.id||p.program!==_n.id||p.wireframe!==Bn)&&(p.geometry=Vn.id,p.program=_n.id,p.wireframe=Bn,Cn=!0)}null!==Fn&&e.update(Fn,34963),(Cn||v)&&(v=!1,function Xe(An,Nn,_n,Vn){if(!1===n.isWebGL2&&(An.isInstancedMesh||Vn.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;ye();const Fn=Vn.attributes,Cn=_n.getAttributes(),Bn=Nn.defaultAttributeValues;for(const Wi in Cn){const wi=Cn[Wi];if(wi.location>=0){let Ji=Fn[Wi];if(void 0===Ji&&("instanceMatrix"===Wi&&An.instanceMatrix&&(Ji=An.instanceMatrix),"instanceColor"===Wi&&An.instanceColor&&(Ji=An.instanceColor)),void 0!==Ji){const hr=Ji.normalized,Is=Ji.itemSize,Si=e.get(Ji);if(void 0===Si)continue;const _s=Si.buffer,fs=Si.type,ps=Si.bytesPerElement;if(Ji.isInterleavedBufferAttribute){const Mr=Ji.data,Co=Mr.stride,Vi=Ji.offset;if(Mr.isInstancedInterleavedBuffer){for(let Ri=0;Ri<wi.locationSize;Ri++)We(wi.location+Ri,Mr.meshPerAttribute);!0!==An.isInstancedMesh&&void 0===Vn._maxInstanceCount&&(Vn._maxInstanceCount=Mr.meshPerAttribute*Mr.count)}else for(let Ri=0;Ri<wi.locationSize;Ri++)Ae(wi.location+Ri);i.bindBuffer(34962,_s);for(let Ri=0;Ri<wi.locationSize;Ri++)Mt(wi.location+Ri,Is/wi.locationSize,fs,hr,Co*ps,(Vi+Is/wi.locationSize*Ri)*ps)}else{if(Ji.isInstancedBufferAttribute){for(let Mr=0;Mr<wi.locationSize;Mr++)We(wi.location+Mr,Ji.meshPerAttribute);!0!==An.isInstancedMesh&&void 0===Vn._maxInstanceCount&&(Vn._maxInstanceCount=Ji.meshPerAttribute*Ji.count)}else for(let Mr=0;Mr<wi.locationSize;Mr++)Ae(wi.location+Mr);i.bindBuffer(34962,_s);for(let Mr=0;Mr<wi.locationSize;Mr++)Mt(wi.location+Mr,Is/wi.locationSize,fs,hr,Is*ps,Is/wi.locationSize*Mr*ps)}}else if(void 0!==Bn){const hr=Bn[Wi];if(void 0!==hr)switch(hr.length){case 2:i.vertexAttrib2fv(wi.location,hr);break;case 3:i.vertexAttrib3fv(wi.location,hr);break;case 4:i.vertexAttrib4fv(wi.location,hr);break;default:i.vertexAttrib1fv(wi.location,hr)}}}}ot()}(An,Nn,_n,Vn),null!==Fn&&i.bindBuffer(34963,e.get(Fn).buffer))},reset:Qn,resetDefaultState:Un,dispose:function yt(){Qn();for(const An in l){const Nn=l[An];for(const _n in Nn){const Vn=Nn[_n];for(const Fn in Vn)F(Vn[Fn].object),delete Vn[Fn];delete Nn[_n]}delete l[An]}},releaseStatesOfGeometry:function tn(An){if(void 0===l[An.id])return;const Nn=l[An.id];for(const _n in Nn){const Vn=Nn[_n];for(const Fn in Vn)F(Vn[Fn].object),delete Vn[Fn];delete Nn[_n]}delete l[An.id]},releaseStatesOfProgram:function zn(An){for(const Nn in l){const _n=l[Nn];if(void 0===_n[An.id])continue;const Vn=_n[An.id];for(const Fn in Vn)F(Vn[Fn].object),delete Vn[Fn];delete _n[An.id]}},initAttributes:ye,enableAttribute:Ae,disableUnusedAttributes:ot}}function qye(i,t,e,n){const r=n.isWebGL2;let s;this.setMode=function o(p){s=p},this.render=function l(p,v){i.drawArrays(s,p,v),e.update(v,s,1)},this.renderInstances=function u(p,v,x){if(0===x)return;let I,M;if(r)I=i,M="drawArraysInstanced";else if(I=t.get("ANGLE_instanced_arrays"),M="drawArraysInstancedANGLE",null===I)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");I[M](s,p,v,x),e.update(v,s,x)}}function Xye(i,t,e){let n;function s(Mt){if("highp"===Mt){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";Mt="mediump"}return"mediump"===Mt&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&i instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&i instanceof WebGL2ComputeRenderingContext;let l=void 0!==e.precision?e.precision:"highp";const u=s(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const p=o||t.has("WEBGL_draw_buffers"),v=!0===e.logarithmicDepthBuffer,x=i.getParameter(34930),I=i.getParameter(35660),M=i.getParameter(3379),F=i.getParameter(34076),j=i.getParameter(34921),X=i.getParameter(36347),ce=i.getParameter(36348),we=i.getParameter(36349),ye=I>0,Ae=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:p,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const Mt=t.get("EXT_texture_filter_anisotropic");n=i.getParameter(Mt.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:l,logarithmicDepthBuffer:v,maxTextures:x,maxVertexTextures:I,maxTextureSize:M,maxCubemapSize:F,maxAttributes:j,maxVertexUniforms:X,maxVaryings:ce,maxFragmentUniforms:we,vertexTextures:ye,floatFragmentTextures:Ae,floatVertexTextures:ye&&Ae,maxSamples:o?i.getParameter(36183):0}}function Yye(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new G0,l=new Pp,u={value:null,needsUpdate:!1};function p(){u.value!==e&&(u.value=e,u.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function v(x,I,M,F){const j=null!==x?x.length:0;let X=null;if(0!==j){if(X=u.value,!0!==F||null===X){const ce=M+4*j,we=I.matrixWorldInverse;l.getNormalMatrix(we),(null===X||X.length<ce)&&(X=new Float32Array(ce));for(let ye=0,Ae=M;ye!==j;++ye,Ae+=4)o.copy(x[ye]).applyMatrix4(we,l),o.normal.toArray(X,Ae),X[Ae+3]=o.constant}u.value=X,u.needsUpdate=!0}return t.numPlanes=j,t.numIntersection=0,X}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(x,I,M){const F=0!==x.length||I||0!==n||r;return r=I,e=v(x,M,0),n=x.length,F},this.beginShadows=function(){s=!0,v(null)},this.endShadows=function(){s=!1,p()},this.setState=function(x,I,M){const F=x.clippingPlanes,j=x.clipIntersection,X=x.clipShadows,ce=i.get(x);if(!r||null===F||0===F.length||s&&!X)s?v(null):p();else{const we=s?0:n,ye=4*we;let Ae=ce.clippingState||null;u.value=Ae,Ae=v(F,I,ye,M);for(let We=0;We!==ye;++We)Ae[We]=e[We];ce.clippingState=Ae,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=we}}}function Kye(i){let t=new WeakMap;function e(o,l){return 303===l?o.mapping=301:304===l&&(o.mapping=302),o}function r(o){const l=o.target;l.removeEventListener("dispose",r);const u=t.get(l);void 0!==u&&(t.delete(l),u.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const l=o.mapping;if(303===l||304===l){if(t.has(o))return e(t.get(o).texture,o.mapping);{const u=o.image;if(u&&u.height>0){const p=new Gme(u.height/2);return p.fromEquirectangularTexture(i,o),t.set(o,p),o.addEventListener("dispose",r),e(p.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}cv.physical={uniforms:lf([cv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Gi(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Jr(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Gi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Jr(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Jr(1,1,1)},specularColorMap:{value:null}}]),vertexShader:To.meshphysical_vert,fragmentShader:To.meshphysical_frag};class gP extends dP{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,l=r+e,u=r-e;if(null!==this.view&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,o=s+p*this.view.width,l-=v*this.view.offsetY,u=l-v*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const O5=[.125,.215,.35,.446,.526,.582],mP=new gP,F5=new Jr;let vP=null;const j0=(1+Math.sqrt(5))/2,Nb=1/j0,N5=[new $t(1,1,1),new $t(-1,1,1),new $t(1,1,-1),new $t(-1,1,-1),new $t(0,j0,Nb),new $t(0,j0,-Nb),new $t(Nb,0,j0),new $t(-Nb,0,j0),new $t(j0,Nb,0),new $t(-j0,Nb,0)];class B5{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){vP=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=U5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=V5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(vP),t.scissorTest=!1,tE(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(301===t.mapping||302===t.mapping?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),vP=this._renderer.getRenderTarget();const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Tu,minFilter:Tu,generateMipmaps:!1,type:Yw,format:bg,encoding:P0,depthBuffer:!1},r=z5(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=z5(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Zye(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+O5.length;for(let o=0;o<s;o++){const l=Math.pow(2,r);e.push(l);let u=1/l;o>i-4?u=O5[o-i+4-1]:0===o&&(u=0),n.push(u);const p=1/(l-2),v=-p,x=1+p,I=[v,v,x,v,x,x,v,v,x,x,v,x],M=6,F=6,j=3,X=2,ce=1,we=new Float32Array(j*F*M),ye=new Float32Array(X*F*M),Ae=new Float32Array(ce*F*M);for(let ot=0;ot<M;ot++){const Mt=ot%3*2/3-1,Xe=ot>2?0:-1;we.set([Mt,Xe,0,Mt+2/3,Xe,0,Mt+2/3,Xe+1,0,Mt,Xe,0,Mt+2/3,Xe+1,0,Mt,Xe+1,0],j*F*ot),ye.set(I,X*F*ot),Ae.set([ot,ot,ot,ot,ot,ot],ce*F*ot)}const We=new No;We.setAttribute("position",new Ch(we,j)),We.setAttribute("uv",new Ch(ye,X)),We.setAttribute("faceIndex",new Ch(Ae,ce)),t.push(We),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function Qye(i,t,e){const n=new Float32Array(20),r=new $t(0,1,0);return new S_({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Md(this._lodPlanes[0],t);this._renderer.compile(e,mP)}_sceneToCubeUV(t,e,n,r){const l=new Jh(90,1,e,n),u=[1,-1,1,1,1,1],p=[1,1,1,-1,-1,-1],v=this._renderer,x=v.autoClear,I=v.toneMapping;v.getClearColor(F5),v.toneMapping=0,v.autoClear=!1;const M=new H0({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),F=new Md(new I_,M);let j=!1;const X=t.background;X?X.isColor&&(M.color.copy(X),t.background=null,j=!0):(M.color.copy(F5),j=!0);for(let ce=0;ce<6;ce++){const we=ce%3;0===we?(l.up.set(0,u[ce],0),l.lookAt(p[ce],0,0)):1===we?(l.up.set(0,0,u[ce]),l.lookAt(0,p[ce],0)):(l.up.set(0,u[ce],0),l.lookAt(0,0,p[ce]));const ye=this._cubeSize;tE(r,we*ye,ce>2?ye:0,ye,ye),v.setRenderTarget(r),j&&v.render(F,l),v.render(t,l)}F.geometry.dispose(),F.material.dispose(),v.toneMapping=I,v.autoClear=x,t.background=X}_textureToCubeUV(t,e){const n=this._renderer,r=301===t.mapping||302===t.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=U5()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=V5());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Md(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const u=this._cubeSize;tE(e,0,0,3*u,2*u),n.setRenderTarget(e),n.render(o,mP)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,N5[(r-1)%N5.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,l){const u=this._renderer,p=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const x=new Md(this._lodPlanes[r],p),I=p.uniforms,M=this._sizeLods[n]-1,F=isFinite(s)?Math.PI/(2*M):2*Math.PI/39,j=s/F,X=isFinite(s)?1+Math.floor(3*j):20;X>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${X} samples when the maximum is set to 20`);const ce=[];let we=0;for(let Mt=0;Mt<20;++Mt){const Xe=Mt/j,yt=Math.exp(-Xe*Xe/2);ce.push(yt),0===Mt?we+=yt:Mt<X&&(we+=2*yt)}for(let Mt=0;Mt<ce.length;Mt++)ce[Mt]=ce[Mt]/we;I.envMap.value=t.texture,I.samples.value=X,I.weights.value=ce,I.latitudinal.value="latitudinal"===o,l&&(I.poleAxis.value=l);const{_lodMax:ye}=this;I.dTheta.value=F,I.mipInt.value=ye-n;const Ae=this._sizeLods[r];tE(e,3*Ae*(r>ye-4?r-ye+4:0),4*(this._cubeSize-Ae),3*Ae,2*Ae),u.setRenderTarget(e),u.render(x,mP)}}function z5(i,t,e){const n=new N0(i,t,e);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function tE(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function V5(){return new S_({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function U5(){return new S_({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Jye(i){let t=new WeakMap,e=null;function s(l){const u=l.target;u.removeEventListener("dispose",s);const p=t.get(u);void 0!==p&&(t.delete(u),p.dispose())}return{get:function n(l){if(l&&l.isTexture){const u=l.mapping,p=303===u||304===u,v=301===u||302===u;if(p||v){if(l.isRenderTargetTexture&&!0===l.needsPMREMUpdate){l.needsPMREMUpdate=!1;let x=t.get(l);return null===e&&(e=new B5(i)),x=p?e.fromEquirectangular(l,x):e.fromCubemap(l,x),t.set(l,x),x.texture}if(t.has(l))return t.get(l).texture;{const x=l.image;if(p&&x&&x.height>0||v&&x&&function r(l){let u=0;for(let v=0;v<6;v++)void 0!==l[v]&&u++;return 6===u}(x)){null===e&&(e=new B5(i));const I=p?e.fromEquirectangular(l):e.fromCubemap(l);return t.set(l,I),l.addEventListener("dispose",s),I.texture}return null}}}return l},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function e_e(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(n){n.isWebGL2?e("EXT_color_buffer_float"):(e("WEBGL_depth_texture"),e("OES_texture_float"),e("OES_texture_half_float"),e("OES_texture_half_float_linear"),e("OES_standard_derivatives"),e("OES_element_index_uint"),e("OES_vertex_array_object"),e("ANGLE_instanced_arrays")),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function t_e(i,t,e,n){const r={},s=new WeakMap;function o(x){const I=x.target;null!==I.index&&t.remove(I.index);for(const F in I.attributes)t.remove(I.attributes[F]);I.removeEventListener("dispose",o),delete r[I.id];const M=s.get(I);M&&(t.remove(M),s.delete(I)),n.releaseStatesOfGeometry(I),!0===I.isInstancedBufferGeometry&&delete I._maxInstanceCount,e.memory.geometries--}function p(x){const I=[],M=x.index,F=x.attributes.position;let j=0;if(null!==M){const we=M.array;j=M.version;for(let ye=0,Ae=we.length;ye<Ae;ye+=3){const We=we[ye+0],ot=we[ye+1],Mt=we[ye+2];I.push(We,ot,ot,Mt,Mt,We)}}else{j=F.version;for(let ye=0,Ae=F.array.length/3-1;ye<Ae;ye+=3){const We=ye+0,ot=ye+1,Mt=ye+2;I.push(We,ot,ot,Mt,Mt,We)}}const X=new(y5(I)?P5:L5)(I,1);X.version=j;const ce=s.get(x);ce&&t.remove(ce),s.set(x,X)}return{get:function l(x,I){return!0===r[I.id]||(I.addEventListener("dispose",o),r[I.id]=!0,e.memory.geometries++),I},update:function u(x){const I=x.attributes;for(const F in I)t.update(I[F],34962);const M=x.morphAttributes;for(const F in M){const j=M[F];for(let X=0,ce=j.length;X<ce;X++)t.update(j[X],34962)}},getWireframeAttribute:function v(x){const I=s.get(x);if(I){const M=x.index;null!==M&&I.version<M.version&&p(x)}else p(x);return s.get(x)}}}function n_e(i,t,e,n){const r=n.isWebGL2;let s,l,u;this.setMode=function o(I){s=I},this.setIndex=function p(I){l=I.type,u=I.bytesPerElement},this.render=function v(I,M){i.drawElements(s,M,l,I*u),e.update(M,s,1)},this.renderInstances=function x(I,M,F){if(0===F)return;let j,X;if(r)j=i,X="drawElementsInstanced";else if(j=t.get("ANGLE_instanced_arrays"),X="drawElementsInstancedANGLE",null===j)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");j[X](s,M,l,I*u,F),e.update(M,s,F)}}function i_e(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,l){switch(e.calls++,o){case 4:e.triangles+=l*(s/3);break;case 1:e.lines+=l*(s/2);break;case 3:e.lines+=l*(s-1);break;case 2:e.lines+=l*s;break;case 0:e.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function r_e(i,t){return i[0]-t[0]}function s_e(i,t){return Math.abs(t[1])-Math.abs(i[1])}function o_e(i,t,e){const n={},r=new Float32Array(8),s=new WeakMap,o=new hl,l=[];for(let p=0;p<8;p++)l[p]=[p,0];return{update:function u(p,v,x,I){const M=p.morphTargetInfluences;if(!0===t.isWebGL2){const F=v.morphAttributes.position||v.morphAttributes.normal||v.morphAttributes.color,j=void 0!==F?F.length:0;let X=s.get(v);if(void 0===X||X.count!==j){let Nn=function(){Un.dispose(),s.delete(v),v.removeEventListener("dispose",Nn)};void 0!==X&&X.texture.dispose();const ye=void 0!==v.morphAttributes.position,Ae=void 0!==v.morphAttributes.normal,We=void 0!==v.morphAttributes.color,ot=v.morphAttributes.position||[],Mt=v.morphAttributes.normal||[],Xe=v.morphAttributes.color||[];let yt=0;!0===ye&&(yt=1),!0===Ae&&(yt=2),!0===We&&(yt=3);let tn=v.attributes.position.count*yt,zn=1;tn>t.maxTextureSize&&(zn=Math.ceil(tn/t.maxTextureSize),tn=t.maxTextureSize);const Qn=new Float32Array(tn*zn*4*j),Un=new qL(Qn,tn,zn,j);Un.type=g_,Un.needsUpdate=!0;const An=4*yt;for(let _n=0;_n<j;_n++){const Vn=ot[_n],Fn=Mt[_n],Cn=Xe[_n],Bn=tn*zn*4*_n;for(let Wi=0;Wi<Vn.count;Wi++){const wi=Wi*An;!0===ye&&(o.fromBufferAttribute(Vn,Wi),Qn[Bn+wi+0]=o.x,Qn[Bn+wi+1]=o.y,Qn[Bn+wi+2]=o.z,Qn[Bn+wi+3]=0),!0===Ae&&(o.fromBufferAttribute(Fn,Wi),Qn[Bn+wi+4]=o.x,Qn[Bn+wi+5]=o.y,Qn[Bn+wi+6]=o.z,Qn[Bn+wi+7]=0),!0===We&&(o.fromBufferAttribute(Cn,Wi),Qn[Bn+wi+8]=o.x,Qn[Bn+wi+9]=o.y,Qn[Bn+wi+10]=o.z,Qn[Bn+wi+11]=4===Cn.itemSize?o.w:1)}}X={count:j,texture:Un,size:new Gi(tn,zn)},s.set(v,X),v.addEventListener("dispose",Nn)}let ce=0;for(let ye=0;ye<M.length;ye++)ce+=M[ye];const we=v.morphTargetsRelative?1:1-ce;I.getUniforms().setValue(i,"morphTargetBaseInfluence",we),I.getUniforms().setValue(i,"morphTargetInfluences",M),I.getUniforms().setValue(i,"morphTargetsTexture",X.texture,e),I.getUniforms().setValue(i,"morphTargetsTextureSize",X.size)}else{const F=void 0===M?0:M.length;let j=n[v.id];if(void 0===j||j.length!==F){j=[];for(let Ae=0;Ae<F;Ae++)j[Ae]=[Ae,0];n[v.id]=j}for(let Ae=0;Ae<F;Ae++){const We=j[Ae];We[0]=Ae,We[1]=M[Ae]}j.sort(s_e);for(let Ae=0;Ae<8;Ae++)Ae<F&&j[Ae][1]?(l[Ae][0]=j[Ae][0],l[Ae][1]=j[Ae][1]):(l[Ae][0]=Number.MAX_SAFE_INTEGER,l[Ae][1]=0);l.sort(r_e);const X=v.morphAttributes.position,ce=v.morphAttributes.normal;let we=0;for(let Ae=0;Ae<8;Ae++){const We=l[Ae],ot=We[0],Mt=We[1];ot!==Number.MAX_SAFE_INTEGER&&Mt?(X&&v.getAttribute("morphTarget"+Ae)!==X[ot]&&v.setAttribute("morphTarget"+Ae,X[ot]),ce&&v.getAttribute("morphNormal"+Ae)!==ce[ot]&&v.setAttribute("morphNormal"+Ae,ce[ot]),r[Ae]=Mt,we+=Mt):(X&&!0===v.hasAttribute("morphTarget"+Ae)&&v.deleteAttribute("morphTarget"+Ae),ce&&!0===v.hasAttribute("morphNormal"+Ae)&&v.deleteAttribute("morphNormal"+Ae),r[Ae]=0)}const ye=v.morphTargetsRelative?1:1-we;I.getUniforms().setValue(i,"morphTargetBaseInfluence",ye),I.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function a_e(i,t,e,n){let r=new WeakMap;function l(u){const p=u.target;p.removeEventListener("dispose",l),e.remove(p.instanceMatrix),null!==p.instanceColor&&e.remove(p.instanceColor)}return{update:function s(u){const p=n.render.frame,x=t.get(u,u.geometry);return r.get(x)!==p&&(t.update(x),r.set(x,p)),u.isInstancedMesh&&(!1===u.hasEventListener("dispose",l)&&u.addEventListener("dispose",l),e.update(u.instanceMatrix,34962),null!==u.instanceColor&&e.update(u.instanceColor,34962)),x},dispose:function o(){r=new WeakMap}}}const H5=new m_,G5=new qL,W5=new b5,j5=new QS,$5=[],q5=[],X5=new Float32Array(16),Y5=new Float32Array(9),K5=new Float32Array(4);function Bb(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=$5[r];if(void 0===s&&(s=new Float32Array(r),$5[r]=s),0!==t){n.toArray(s,0);for(let o=1,l=0;o!==t;++o)l+=e,i[o].toArray(s,l)}return s}function Ju(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function eh(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function nE(i,t){let e=q5[t];void 0===e&&(e=new Int32Array(t),q5[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function l_e(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function c_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ju(e,t))return;i.uniform2fv(this.addr,t),eh(e,t)}}function u_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Ju(e,t))return;i.uniform3fv(this.addr,t),eh(e,t)}}function h_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ju(e,t))return;i.uniform4fv(this.addr,t),eh(e,t)}}function d_e(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Ju(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),eh(e,t)}else{if(Ju(e,n))return;K5.set(n),i.uniformMatrix2fv(this.addr,!1,K5),eh(e,n)}}function f_e(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Ju(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),eh(e,t)}else{if(Ju(e,n))return;Y5.set(n),i.uniformMatrix3fv(this.addr,!1,Y5),eh(e,n)}}function p_e(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Ju(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),eh(e,t)}else{if(Ju(e,n))return;X5.set(n),i.uniformMatrix4fv(this.addr,!1,X5),eh(e,n)}}function g_e(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function m_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ju(e,t))return;i.uniform2iv(this.addr,t),eh(e,t)}}function v_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ju(e,t))return;i.uniform3iv(this.addr,t),eh(e,t)}}function y_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ju(e,t))return;i.uniform4iv(this.addr,t),eh(e,t)}}function __e(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function C_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ju(e,t))return;i.uniform2uiv(this.addr,t),eh(e,t)}}function b_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ju(e,t))return;i.uniform3uiv(this.addr,t),eh(e,t)}}function x_e(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ju(e,t))return;i.uniform4uiv(this.addr,t),eh(e,t)}}function w_e(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||H5,r)}function A_e(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||W5,r)}function I_e(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||j5,r)}function S_e(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||G5,r)}function T_e(i,t){i.uniform1fv(this.addr,t)}function M_e(i,t){const e=Bb(t,this.size,2);i.uniform2fv(this.addr,e)}function D_e(i,t){const e=Bb(t,this.size,3);i.uniform3fv(this.addr,e)}function L_e(i,t){const e=Bb(t,this.size,4);i.uniform4fv(this.addr,e)}function P_e(i,t){const e=Bb(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function R_e(i,t){const e=Bb(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function k_e(i,t){const e=Bb(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function O_e(i,t){i.uniform1iv(this.addr,t)}function F_e(i,t){i.uniform2iv(this.addr,t)}function N_e(i,t){i.uniform3iv(this.addr,t)}function B_e(i,t){i.uniform4iv(this.addr,t)}function z_e(i,t){i.uniform1uiv(this.addr,t)}function V_e(i,t){i.uniform2uiv(this.addr,t)}function U_e(i,t){i.uniform3uiv(this.addr,t)}function H_e(i,t){i.uniform4uiv(this.addr,t)}function G_e(i,t,e){const n=this.cache,r=t.length,s=nE(e,r);Ju(n,s)||(i.uniform1iv(this.addr,s),eh(n,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||H5,s[o])}function W_e(i,t,e){const n=this.cache,r=t.length,s=nE(e,r);Ju(n,s)||(i.uniform1iv(this.addr,s),eh(n,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||W5,s[o])}function j_e(i,t,e){const n=this.cache,r=t.length,s=nE(e,r);Ju(n,s)||(i.uniform1iv(this.addr,s),eh(n,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||j5,s[o])}function $_e(i,t,e){const n=this.cache,r=t.length,s=nE(e,r);Ju(n,s)||(i.uniform1iv(this.addr,s),eh(n,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||G5,s[o])}class X_e{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function E_e(i){switch(i){case 5126:return l_e;case 35664:return c_e;case 35665:return u_e;case 35666:return h_e;case 35674:return d_e;case 35675:return f_e;case 35676:return p_e;case 5124:case 35670:return g_e;case 35667:case 35671:return m_e;case 35668:case 35672:return v_e;case 35669:case 35673:return y_e;case 5125:return __e;case 36294:return C_e;case 36295:return b_e;case 36296:return x_e;case 35678:case 36198:case 36298:case 36306:case 35682:return w_e;case 35679:case 36299:case 36307:return A_e;case 35680:case 36300:case 36308:case 36293:return I_e;case 36289:case 36303:case 36311:case 36292:return S_e}}(e.type)}}class Y_e{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function q_e(i){switch(i){case 5126:return T_e;case 35664:return M_e;case 35665:return D_e;case 35666:return L_e;case 35674:return P_e;case 35675:return R_e;case 35676:return k_e;case 5124:case 35670:return O_e;case 35667:case 35671:return F_e;case 35668:case 35672:return N_e;case 35669:case 35673:return B_e;case 5125:return z_e;case 36294:return V_e;case 36295:return U_e;case 36296:return H_e;case 35678:case 36198:case 36298:case 36306:case 35682:return G_e;case 35679:case 36299:case 36307:return W_e;case 35680:case 36300:case 36308:case 36293:return j_e;case 36289:case 36303:case 36311:case 36292:return $_e}}(e.type)}}class K_e{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const l=r[s];l.setValue(t,e[l.id],n)}}}const _P=/(\w+)(\])?(\[|\.)?/g;function Z5(i,t){i.seq.push(t),i.map[t.id]=t}function Z_e(i,t,e){const n=i.name,r=n.length;for(_P.lastIndex=0;;){const s=_P.exec(n),o=_P.lastIndex;let l=s[1];const p=s[3];if("]"===s[2]&&(l|=0),void 0===p||"["===p&&o+2===r){Z5(e,void 0===p?new X_e(l,i,t):new Y_e(l,i,t));break}{let x=e.map[l];void 0===x&&(x=new K_e(l),Z5(e,x)),e=x}}}class iE{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);Z_e(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,o=e.length;s!==o;++s){const l=e[s],u=n[l.id];!1!==u.needsUpdate&&l.setValue(t,u.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&n.push(o)}return n}}function Q5(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}let Q_e=0;function J5(i,t,e){const n=i.getShaderParameter(t,35713),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function J_e(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const l=o+1;n.push(`${l===t?">":" "} ${l}: ${e[o]}`)}return n.join("\n")}(i.getShaderSource(t),o)}return r}function t0e(i,t){const e=function e0e(i){switch(i){case P0:return["Linear","( value )"];case qc:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(t);return"vec4 "+i+"( vec4 value ) { return LinearTo"+e[0]+e[1]+"; }"}function n0e(i,t){let e;switch(t){case 1:e="Linear";break;case 2:e="Reinhard";break;case 3:e="OptimizedCineon";break;case 4:e="ACESFilmic";break;case 5:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function iA(i){return""!==i}function eG(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function tG(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const o0e=/^[ \t]*#include +<([\w\d./]+)>/gm;function CP(i){return i.replace(o0e,a0e)}function a0e(i,t){const e=To[t];if(void 0===e)throw new Error("Can not resolve #include <"+t+">");return CP(e)}const l0e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nG(i){return i.replace(l0e,c0e)}function c0e(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function iG(i){let t="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function g0e(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,l=e.fragmentShader;const u=function u0e(i){let t="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(e),p=function h0e(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),v=function d0e(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(t="ENVMAP_MODE_REFRACTION"),t}(e),x=function f0e(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(e),I=function p0e(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),M=e.isWebGL2?"":function i0e(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.tangentSpaceNormalMap||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(iA).join("\n")}(e),F=function r0e(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),j=r.createProgram();let X,ce,we=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(X=[F].filter(iA).join("\n"),X.length>0&&(X+="\n"),ce=[M,F].filter(iA).join("\n"),ce.length>0&&(ce+="\n")):(X=[iG(e),"#define SHADER_NAME "+e.shaderName,F,e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.supportsVertexTextures?"#define VERTEX_TEXTURES":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+v:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.displacementMap&&e.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors&&e.isWebGL2?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0&&e.isWebGL2?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(iA).join("\n"),ce=[M,iG(e),"#define SHADER_NAME "+e.shaderName,F,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+v:"",e.envMap?"#define "+x:"",I?"#define CUBEUV_TEXEL_WIDTH "+I.texelWidth:"",I?"#define CUBEUV_TEXEL_HEIGHT "+I.texelHeight:"",I?"#define CUBEUV_MAX_MIP "+I.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMap&&e.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",e.normalMap&&e.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",e.specularColorMap?"#define USE_SPECULARCOLORMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEENCOLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.vertexTangents?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUvs?"#define USE_UV":"",e.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+u:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.logarithmicDepthBuffer&&e.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==e.toneMapping?"#define TONE_MAPPING":"",0!==e.toneMapping?To.tonemapping_pars_fragment:"",0!==e.toneMapping?n0e("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",To.encodings_pars_fragment,t0e("linearToOutputTexel",e.outputEncoding),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(iA).join("\n")),o=CP(o),o=eG(o,e),o=tG(o,e),l=CP(l),l=eG(l,e),l=tG(l,e),o=nG(o),l=nG(l),e.isWebGL2&&!0!==e.isRawShaderMaterial&&(we="#version 300 es\n",X=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+X,ce=["#define varying in","300 es"===e.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===e.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+ce);const Ae=we+ce+l,We=Q5(r,35633,we+X+o),ot=Q5(r,35632,Ae);if(r.attachShader(j,We),r.attachShader(j,ot),void 0!==e.index0AttributeName?r.bindAttribLocation(j,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(j,0,"position"),r.linkProgram(j),i.debug.checkShaderErrors){const yt=r.getProgramInfoLog(j).trim(),tn=r.getShaderInfoLog(We).trim(),zn=r.getShaderInfoLog(ot).trim();let Qn=!0,Un=!0;if(!1===r.getProgramParameter(j,35714)){Qn=!1;const An=J5(r,We,"vertex"),Nn=J5(r,ot,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(j,35715)+"\n\nProgram Info Log: "+yt+"\n"+An+"\n"+Nn)}else""!==yt?console.warn("THREE.WebGLProgram: Program Info Log:",yt):(""===tn||""===zn)&&(Un=!1);Un&&(this.diagnostics={runnable:Qn,programLog:yt,vertexShader:{log:tn,prefix:X},fragmentShader:{log:zn,prefix:ce}})}let Mt,Xe;return r.deleteShader(We),r.deleteShader(ot),this.getUniforms=function(){return void 0===Mt&&(Mt=new iE(r,j)),Mt},this.getAttributes=function(){return void 0===Xe&&(Xe=function s0e(i,t){const e={},n=i.getProgramParameter(t,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let l=1;35674===s.type&&(l=2),35675===s.type&&(l=3),35676===s.type&&(l=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:l}}return e}(r,j)),Xe},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(j),this.program=void 0},this.name=e.shaderName,this.id=Q_e++,this.cacheKey=t,this.usedTimes=1,this.program=j,this.vertexShader=We,this.fragmentShader=ot,this}let m0e=0;class v0e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new y0e(t),e.set(t,n)),n}}class y0e{constructor(t){this.id=m0e++,this.code=t,this.usedTimes=0}}function _0e(i,t,e,n,r,s,o){const l=new tP,u=new v0e,p=[],v=r.isWebGL2,x=r.logarithmicDepthBuffer,I=r.vertexTextures;let M=r.precision;const F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function j(Xe,yt,tn,zn,Qn){const Un=zn.fog,An=Qn.geometry,_n=(Xe.isMeshStandardMaterial?e:t).get(Xe.envMap||(Xe.isMeshStandardMaterial?zn.environment:null)),Vn=_n&&306===_n.mapping?_n.image.height:null,Fn=F[Xe.type];null!==Xe.precision&&(M=r.getMaxPrecision(Xe.precision),M!==Xe.precision&&console.warn("THREE.WebGLProgram.getParameters:",Xe.precision,"not supported, using",M,"instead."));const Cn=An.morphAttributes.position||An.morphAttributes.normal||An.morphAttributes.color,Bn=void 0!==Cn?Cn.length:0;let wi,Ji,hr,Is,Wi=0;if(void 0!==An.morphAttributes.position&&(Wi=1),void 0!==An.morphAttributes.normal&&(Wi=2),void 0!==An.morphAttributes.color&&(Wi=3),Fn){const Co=cv[Fn];wi=Co.vertexShader,Ji=Co.fragmentShader}else wi=Xe.vertexShader,Ji=Xe.fragmentShader,u.update(Xe),hr=u.getVertexShaderID(Xe),Is=u.getFragmentShaderID(Xe);const Si=i.getRenderTarget(),fs=Xe.clearcoat>0,ps=Xe.iridescence>0;return{isWebGL2:v,shaderID:Fn,shaderName:Xe.type,vertexShader:wi,fragmentShader:Ji,defines:Xe.defines,customVertexShaderID:hr,customFragmentShaderID:Is,isRawShaderMaterial:!0===Xe.isRawShaderMaterial,glslVersion:Xe.glslVersion,precision:M,instancing:!0===Qn.isInstancedMesh,instancingColor:!0===Qn.isInstancedMesh&&null!==Qn.instanceColor,supportsVertexTextures:I,outputEncoding:null===Si?i.outputEncoding:!0===Si.isXRRenderTarget?Si.texture.encoding:P0,map:!!Xe.map,matcap:!!Xe.matcap,envMap:!!_n,envMapMode:_n&&_n.mapping,envMapCubeUVHeight:Vn,lightMap:!!Xe.lightMap,aoMap:!!Xe.aoMap,emissiveMap:!!Xe.emissiveMap,bumpMap:!!Xe.bumpMap,normalMap:!!Xe.normalMap,objectSpaceNormalMap:1===Xe.normalMapType,tangentSpaceNormalMap:0===Xe.normalMapType,decodeVideoTexture:!!Xe.map&&!0===Xe.map.isVideoTexture&&Xe.map.encoding===qc,clearcoat:fs,clearcoatMap:fs&&!!Xe.clearcoatMap,clearcoatRoughnessMap:fs&&!!Xe.clearcoatRoughnessMap,clearcoatNormalMap:fs&&!!Xe.clearcoatNormalMap,iridescence:ps,iridescenceMap:ps&&!!Xe.iridescenceMap,iridescenceThicknessMap:ps&&!!Xe.iridescenceThicknessMap,displacementMap:!!Xe.displacementMap,roughnessMap:!!Xe.roughnessMap,metalnessMap:!!Xe.metalnessMap,specularMap:!!Xe.specularMap,specularIntensityMap:!!Xe.specularIntensityMap,specularColorMap:!!Xe.specularColorMap,opaque:!1===Xe.transparent&&1===Xe.blending,alphaMap:!!Xe.alphaMap,alphaTest:Xe.alphaTest>0,gradientMap:!!Xe.gradientMap,sheen:Xe.sheen>0,sheenColorMap:!!Xe.sheenColorMap,sheenRoughnessMap:!!Xe.sheenRoughnessMap,transmission:Xe.transmission>0,transmissionMap:!!Xe.transmissionMap,thicknessMap:!!Xe.thicknessMap,combine:Xe.combine,vertexTangents:!!Xe.normalMap&&!!An.attributes.tangent,vertexColors:Xe.vertexColors,vertexAlphas:!0===Xe.vertexColors&&!!An.attributes.color&&4===An.attributes.color.itemSize,vertexUvs:!!(Xe.map||Xe.bumpMap||Xe.normalMap||Xe.specularMap||Xe.alphaMap||Xe.emissiveMap||Xe.roughnessMap||Xe.metalnessMap||Xe.clearcoatMap||Xe.clearcoatRoughnessMap||Xe.clearcoatNormalMap||Xe.iridescenceMap||Xe.iridescenceThicknessMap||Xe.displacementMap||Xe.transmissionMap||Xe.thicknessMap||Xe.specularIntensityMap||Xe.specularColorMap||Xe.sheenColorMap||Xe.sheenRoughnessMap),uvsVertexOnly:!(Xe.map||Xe.bumpMap||Xe.normalMap||Xe.specularMap||Xe.alphaMap||Xe.emissiveMap||Xe.roughnessMap||Xe.metalnessMap||Xe.clearcoatNormalMap||Xe.iridescenceMap||Xe.iridescenceThicknessMap||Xe.transmission>0||Xe.transmissionMap||Xe.thicknessMap||Xe.specularIntensityMap||Xe.specularColorMap||Xe.sheen>0||Xe.sheenColorMap||Xe.sheenRoughnessMap||!Xe.displacementMap),fog:!!Un,useFog:!0===Xe.fog,fogExp2:Un&&Un.isFogExp2,flatShading:!!Xe.flatShading,sizeAttenuation:Xe.sizeAttenuation,logarithmicDepthBuffer:x,skinning:!0===Qn.isSkinnedMesh,morphTargets:void 0!==An.morphAttributes.position,morphNormals:void 0!==An.morphAttributes.normal,morphColors:void 0!==An.morphAttributes.color,morphTargetsCount:Bn,morphTextureStride:Wi,numDirLights:yt.directional.length,numPointLights:yt.point.length,numSpotLights:yt.spot.length,numSpotLightMaps:yt.spotLightMap.length,numRectAreaLights:yt.rectArea.length,numHemiLights:yt.hemi.length,numDirLightShadows:yt.directionalShadowMap.length,numPointLightShadows:yt.pointShadowMap.length,numSpotLightShadows:yt.spotShadowMap.length,numSpotLightShadowsWithMaps:yt.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:Xe.dithering,shadowMapEnabled:i.shadowMap.enabled&&tn.length>0,shadowMapType:i.shadowMap.type,toneMapping:Xe.toneMapped?i.toneMapping:0,physicallyCorrectLights:i.physicallyCorrectLights,premultipliedAlpha:Xe.premultipliedAlpha,doubleSided:2===Xe.side,flipSided:1===Xe.side,useDepthPacking:!!Xe.depthPacking,depthPacking:Xe.depthPacking||0,index0AttributeName:Xe.index0AttributeName,extensionDerivatives:Xe.extensions&&Xe.extensions.derivatives,extensionFragDepth:Xe.extensions&&Xe.extensions.fragDepth,extensionDrawBuffers:Xe.extensions&&Xe.extensions.drawBuffers,extensionShaderTextureLOD:Xe.extensions&&Xe.extensions.shaderTextureLOD,rendererExtensionFragDepth:v||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:v||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:v||n.has("EXT_shader_texture_lod"),customProgramCacheKey:Xe.customProgramCacheKey()}},getProgramCacheKey:function X(Xe){const yt=[];if(Xe.shaderID?yt.push(Xe.shaderID):(yt.push(Xe.customVertexShaderID),yt.push(Xe.customFragmentShaderID)),void 0!==Xe.defines)for(const tn in Xe.defines)yt.push(tn),yt.push(Xe.defines[tn]);return!1===Xe.isRawShaderMaterial&&(function ce(Xe,yt){Xe.push(yt.precision),Xe.push(yt.outputEncoding),Xe.push(yt.envMapMode),Xe.push(yt.envMapCubeUVHeight),Xe.push(yt.combine),Xe.push(yt.vertexUvs),Xe.push(yt.fogExp2),Xe.push(yt.sizeAttenuation),Xe.push(yt.morphTargetsCount),Xe.push(yt.morphAttributeCount),Xe.push(yt.numDirLights),Xe.push(yt.numPointLights),Xe.push(yt.numSpotLights),Xe.push(yt.numSpotLightMaps),Xe.push(yt.numHemiLights),Xe.push(yt.numRectAreaLights),Xe.push(yt.numDirLightShadows),Xe.push(yt.numPointLightShadows),Xe.push(yt.numSpotLightShadows),Xe.push(yt.numSpotLightShadowsWithMaps),Xe.push(yt.shadowMapType),Xe.push(yt.toneMapping),Xe.push(yt.numClippingPlanes),Xe.push(yt.numClipIntersection),Xe.push(yt.depthPacking)}(yt,Xe),function we(Xe,yt){l.disableAll(),yt.isWebGL2&&l.enable(0),yt.supportsVertexTextures&&l.enable(1),yt.instancing&&l.enable(2),yt.instancingColor&&l.enable(3),yt.map&&l.enable(4),yt.matcap&&l.enable(5),yt.envMap&&l.enable(6),yt.lightMap&&l.enable(7),yt.aoMap&&l.enable(8),yt.emissiveMap&&l.enable(9),yt.bumpMap&&l.enable(10),yt.normalMap&&l.enable(11),yt.objectSpaceNormalMap&&l.enable(12),yt.tangentSpaceNormalMap&&l.enable(13),yt.clearcoat&&l.enable(14),yt.clearcoatMap&&l.enable(15),yt.clearcoatRoughnessMap&&l.enable(16),yt.clearcoatNormalMap&&l.enable(17),yt.iridescence&&l.enable(18),yt.iridescenceMap&&l.enable(19),yt.iridescenceThicknessMap&&l.enable(20),yt.displacementMap&&l.enable(21),yt.specularMap&&l.enable(22),yt.roughnessMap&&l.enable(23),yt.metalnessMap&&l.enable(24),yt.gradientMap&&l.enable(25),yt.alphaMap&&l.enable(26),yt.alphaTest&&l.enable(27),yt.vertexColors&&l.enable(28),yt.vertexAlphas&&l.enable(29),yt.vertexUvs&&l.enable(30),yt.vertexTangents&&l.enable(31),yt.uvsVertexOnly&&l.enable(32),Xe.push(l.mask),l.disableAll(),yt.fog&&l.enable(0),yt.useFog&&l.enable(1),yt.flatShading&&l.enable(2),yt.logarithmicDepthBuffer&&l.enable(3),yt.skinning&&l.enable(4),yt.morphTargets&&l.enable(5),yt.morphNormals&&l.enable(6),yt.morphColors&&l.enable(7),yt.premultipliedAlpha&&l.enable(8),yt.shadowMapEnabled&&l.enable(9),yt.physicallyCorrectLights&&l.enable(10),yt.doubleSided&&l.enable(11),yt.flipSided&&l.enable(12),yt.useDepthPacking&&l.enable(13),yt.dithering&&l.enable(14),yt.specularIntensityMap&&l.enable(15),yt.specularColorMap&&l.enable(16),yt.transmission&&l.enable(17),yt.transmissionMap&&l.enable(18),yt.thicknessMap&&l.enable(19),yt.sheen&&l.enable(20),yt.sheenColorMap&&l.enable(21),yt.sheenRoughnessMap&&l.enable(22),yt.decodeVideoTexture&&l.enable(23),yt.opaque&&l.enable(24),Xe.push(l.mask)}(yt,Xe),yt.push(i.outputEncoding)),yt.push(Xe.customProgramCacheKey),yt.join()},getUniforms:function ye(Xe){const yt=F[Xe.type];let tn;return tn=yt?zme.clone(cv[yt].uniforms):Xe.uniforms,tn},acquireProgram:function Ae(Xe,yt){let tn;for(let zn=0,Qn=p.length;zn<Qn;zn++){const Un=p[zn];if(Un.cacheKey===yt){tn=Un,++tn.usedTimes;break}}return void 0===tn&&(tn=new g0e(i,yt,Xe,s),p.push(tn)),tn},releaseProgram:function We(Xe){if(0==--Xe.usedTimes){const yt=p.indexOf(Xe);p[yt]=p[p.length-1],p.pop(),Xe.destroy()}},releaseShaderCache:function ot(Xe){u.remove(Xe)},programs:p,dispose:function Mt(){u.dispose()}}}function C0e(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,l){i.get(s)[o]=l},dispose:function r(){i=new WeakMap}}}function b0e(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function rG(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function sG(){const i=[];let t=0;const e=[],n=[],r=[];function o(x,I,M,F,j,X){let ce=i[t];return void 0===ce?(ce={id:x.id,object:x,geometry:I,material:M,groupOrder:F,renderOrder:x.renderOrder,z:j,group:X},i[t]=ce):(ce.id=x.id,ce.object=x,ce.geometry=I,ce.material=M,ce.groupOrder=F,ce.renderOrder=x.renderOrder,ce.z=j,ce.group=X),t++,ce}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function l(x,I,M,F,j,X){const ce=o(x,I,M,F,j,X);M.transmission>0?n.push(ce):!0===M.transparent?r.push(ce):e.push(ce)},unshift:function u(x,I,M,F,j,X){const ce=o(x,I,M,F,j,X);M.transmission>0?n.unshift(ce):!0===M.transparent?r.unshift(ce):e.unshift(ce)},finish:function v(){for(let x=t,I=i.length;x<I;x++){const M=i[x];if(null===M.id)break;M.id=null,M.object=null,M.geometry=null,M.material=null,M.group=null}},sort:function p(x,I){e.length>1&&e.sort(x||b0e),n.length>1&&n.sort(I||rG),r.length>1&&r.sort(I||rG)}}}function x0e(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let o;return void 0===s?(o=new sG,i.set(n,[o])):r>=s.length?(o=new sG,s.push(o)):o=s[r],o},dispose:function e(){i=new WeakMap}}}function w0e(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new $t,color:new Jr};break;case"SpotLight":e={position:new $t,direction:new $t,color:new Jr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new $t,color:new Jr,distance:0,decay:0};break;case"HemisphereLight":e={direction:new $t,skyColor:new Jr,groundColor:new Jr};break;case"RectAreaLight":e={color:new Jr,position:new $t,halfWidth:new $t,halfHeight:new $t}}return i[t.id]=e,e}}}let I0e=0;function S0e(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function E0e(i,t){const e=new w0e,n=function A0e(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gi};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gi,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let v=0;v<9;v++)r.probe.push(new $t);const s=new $t,o=new fo,l=new fo;return{setup:function u(v,x){let I=0,M=0,F=0;for(let zn=0;zn<9;zn++)r.probe[zn].set(0,0,0);let j=0,X=0,ce=0,we=0,ye=0,Ae=0,We=0,ot=0,Mt=0,Xe=0;v.sort(S0e);const yt=!0!==x?Math.PI:1;for(let zn=0,Qn=v.length;zn<Qn;zn++){const Un=v[zn],An=Un.color,Nn=Un.intensity,_n=Un.distance,Vn=Un.shadow&&Un.shadow.map?Un.shadow.map.texture:null;if(Un.isAmbientLight)I+=An.r*Nn*yt,M+=An.g*Nn*yt,F+=An.b*Nn*yt;else if(Un.isLightProbe)for(let Fn=0;Fn<9;Fn++)r.probe[Fn].addScaledVector(Un.sh.coefficients[Fn],Nn);else if(Un.isDirectionalLight){const Fn=e.get(Un);if(Fn.color.copy(Un.color).multiplyScalar(Un.intensity*yt),Un.castShadow){const Cn=Un.shadow,Bn=n.get(Un);Bn.shadowBias=Cn.bias,Bn.shadowNormalBias=Cn.normalBias,Bn.shadowRadius=Cn.radius,Bn.shadowMapSize=Cn.mapSize,r.directionalShadow[j]=Bn,r.directionalShadowMap[j]=Vn,r.directionalShadowMatrix[j]=Un.shadow.matrix,Ae++}r.directional[j]=Fn,j++}else if(Un.isSpotLight){const Fn=e.get(Un);Fn.position.setFromMatrixPosition(Un.matrixWorld),Fn.color.copy(An).multiplyScalar(Nn*yt),Fn.distance=_n,Fn.coneCos=Math.cos(Un.angle),Fn.penumbraCos=Math.cos(Un.angle*(1-Un.penumbra)),Fn.decay=Un.decay,r.spot[ce]=Fn;const Cn=Un.shadow;if(Un.map&&(r.spotLightMap[Mt]=Un.map,Mt++,Cn.updateMatrices(Un),Un.castShadow&&Xe++),r.spotLightMatrix[ce]=Cn.matrix,Un.castShadow){const Bn=n.get(Un);Bn.shadowBias=Cn.bias,Bn.shadowNormalBias=Cn.normalBias,Bn.shadowRadius=Cn.radius,Bn.shadowMapSize=Cn.mapSize,r.spotShadow[ce]=Bn,r.spotShadowMap[ce]=Vn,ot++}ce++}else if(Un.isRectAreaLight){const Fn=e.get(Un);Fn.color.copy(An).multiplyScalar(Nn),Fn.halfWidth.set(.5*Un.width,0,0),Fn.halfHeight.set(0,.5*Un.height,0),r.rectArea[we]=Fn,we++}else if(Un.isPointLight){const Fn=e.get(Un);if(Fn.color.copy(Un.color).multiplyScalar(Un.intensity*yt),Fn.distance=Un.distance,Fn.decay=Un.decay,Un.castShadow){const Cn=Un.shadow,Bn=n.get(Un);Bn.shadowBias=Cn.bias,Bn.shadowNormalBias=Cn.normalBias,Bn.shadowRadius=Cn.radius,Bn.shadowMapSize=Cn.mapSize,Bn.shadowCameraNear=Cn.camera.near,Bn.shadowCameraFar=Cn.camera.far,r.pointShadow[X]=Bn,r.pointShadowMap[X]=Vn,r.pointShadowMatrix[X]=Un.shadow.matrix,We++}r.point[X]=Fn,X++}else if(Un.isHemisphereLight){const Fn=e.get(Un);Fn.skyColor.copy(Un.color).multiplyScalar(Nn*yt),Fn.groundColor.copy(Un.groundColor).multiplyScalar(Nn*yt),r.hemi[ye]=Fn,ye++}}we>0&&(t.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Sr.LTC_FLOAT_1,r.rectAreaLTC2=Sr.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Sr.LTC_HALF_1,r.rectAreaLTC2=Sr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=I,r.ambient[1]=M,r.ambient[2]=F;const tn=r.hash;(tn.directionalLength!==j||tn.pointLength!==X||tn.spotLength!==ce||tn.rectAreaLength!==we||tn.hemiLength!==ye||tn.numDirectionalShadows!==Ae||tn.numPointShadows!==We||tn.numSpotShadows!==ot||tn.numSpotMaps!==Mt)&&(r.directional.length=j,r.spot.length=ce,r.rectArea.length=we,r.point.length=X,r.hemi.length=ye,r.directionalShadow.length=Ae,r.directionalShadowMap.length=Ae,r.pointShadow.length=We,r.pointShadowMap.length=We,r.spotShadow.length=ot,r.spotShadowMap.length=ot,r.directionalShadowMatrix.length=Ae,r.pointShadowMatrix.length=We,r.spotLightMatrix.length=ot+Mt-Xe,r.spotLightMap.length=Mt,r.numSpotLightShadowsWithMaps=Xe,tn.directionalLength=j,tn.pointLength=X,tn.spotLength=ce,tn.rectAreaLength=we,tn.hemiLength=ye,tn.numDirectionalShadows=Ae,tn.numPointShadows=We,tn.numSpotShadows=ot,tn.numSpotMaps=Mt,r.version=I0e++)},setupView:function p(v,x){let I=0,M=0,F=0,j=0,X=0;const ce=x.matrixWorldInverse;for(let we=0,ye=v.length;we<ye;we++){const Ae=v[we];if(Ae.isDirectionalLight){const We=r.directional[I];We.direction.setFromMatrixPosition(Ae.matrixWorld),s.setFromMatrixPosition(Ae.target.matrixWorld),We.direction.sub(s),We.direction.transformDirection(ce),I++}else if(Ae.isSpotLight){const We=r.spot[F];We.position.setFromMatrixPosition(Ae.matrixWorld),We.position.applyMatrix4(ce),We.direction.setFromMatrixPosition(Ae.matrixWorld),s.setFromMatrixPosition(Ae.target.matrixWorld),We.direction.sub(s),We.direction.transformDirection(ce),F++}else if(Ae.isRectAreaLight){const We=r.rectArea[j];We.position.setFromMatrixPosition(Ae.matrixWorld),We.position.applyMatrix4(ce),l.identity(),o.copy(Ae.matrixWorld),o.premultiply(ce),l.extractRotation(o),We.halfWidth.set(.5*Ae.width,0,0),We.halfHeight.set(0,.5*Ae.height,0),We.halfWidth.applyMatrix4(l),We.halfHeight.applyMatrix4(l),j++}else if(Ae.isPointLight){const We=r.point[M];We.position.setFromMatrixPosition(Ae.matrixWorld),We.position.applyMatrix4(ce),M++}else if(Ae.isHemisphereLight){const We=r.hemi[X];We.direction.setFromMatrixPosition(Ae.matrixWorld),We.direction.transformDirection(ce),X++}}},state:r}}function oG(i,t){const e=new E0e(i,t),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:e},setupLights:function u(x){e.setup(n,x)},setupLightsView:function p(x){e.setupView(n,x)},pushLight:function o(x){n.push(x)},pushShadow:function l(x){r.push(x)}}}function T0e(i,t){let e=new WeakMap;return{get:function n(s,o=0){const l=e.get(s);let u;return void 0===l?(u=new oG(i,t),e.set(s,[u])):o>=l.length?(u=new oG(i,t),l.push(u)):u=l[o],u},dispose:function r(){e=new WeakMap}}}class aG extends U0{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class lG extends U0{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new $t,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function L0e(i,t,e){let n=new pP;const r=new Gi,s=new Gi,o=new hl,l=new aG({depthPacking:3201}),u=new lG,p={},v=e.maxTextureSize,x={0:1,1:0,2:2},I=new S_({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Gi},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),M=I.clone();M.defines.HORIZONTAL_PASS=1;const F=new No;F.setAttribute("position",new Ch(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new Md(F,I),X=this;function ce(Ae,We){const ot=t.update(j);I.defines.VSM_SAMPLES!==Ae.blurSamples&&(I.defines.VSM_SAMPLES=Ae.blurSamples,M.defines.VSM_SAMPLES=Ae.blurSamples,I.needsUpdate=!0,M.needsUpdate=!0),null===Ae.mapPass&&(Ae.mapPass=new N0(r.x,r.y)),I.uniforms.shadow_pass.value=Ae.map.texture,I.uniforms.resolution.value=Ae.mapSize,I.uniforms.radius.value=Ae.radius,i.setRenderTarget(Ae.mapPass),i.clear(),i.renderBufferDirect(We,null,ot,I,j,null),M.uniforms.shadow_pass.value=Ae.mapPass.texture,M.uniforms.resolution.value=Ae.mapSize,M.uniforms.radius.value=Ae.radius,i.setRenderTarget(Ae.map),i.clear(),i.renderBufferDirect(We,null,ot,M,j,null)}function we(Ae,We,ot,Mt,Xe,yt){let tn=null;const zn=!0===ot.isPointLight?Ae.customDistanceMaterial:Ae.customDepthMaterial;if(tn=void 0!==zn?zn:!0===ot.isPointLight?u:l,i.localClippingEnabled&&!0===We.clipShadows&&Array.isArray(We.clippingPlanes)&&0!==We.clippingPlanes.length||We.displacementMap&&0!==We.displacementScale||We.alphaMap&&We.alphaTest>0){const Qn=tn.uuid,Un=We.uuid;let An=p[Qn];void 0===An&&(An={},p[Qn]=An);let Nn=An[Un];void 0===Nn&&(Nn=tn.clone(),An[Un]=Nn),tn=Nn}return tn.visible=We.visible,tn.wireframe=We.wireframe,tn.side=3===yt?null!==We.shadowSide?We.shadowSide:We.side:null!==We.shadowSide?We.shadowSide:x[We.side],tn.alphaMap=We.alphaMap,tn.alphaTest=We.alphaTest,tn.clipShadows=We.clipShadows,tn.clippingPlanes=We.clippingPlanes,tn.clipIntersection=We.clipIntersection,tn.displacementMap=We.displacementMap,tn.displacementScale=We.displacementScale,tn.displacementBias=We.displacementBias,tn.wireframeLinewidth=We.wireframeLinewidth,tn.linewidth=We.linewidth,!0===ot.isPointLight&&!0===tn.isMeshDistanceMaterial&&(tn.referencePosition.setFromMatrixPosition(ot.matrixWorld),tn.nearDistance=Mt,tn.farDistance=Xe),tn}function ye(Ae,We,ot,Mt,Xe){if(!1===Ae.visible)return;if(Ae.layers.test(We.layers)&&(Ae.isMesh||Ae.isLine||Ae.isPoints)&&(Ae.castShadow||Ae.receiveShadow&&3===Xe)&&(!Ae.frustumCulled||n.intersectsObject(Ae))){Ae.modelViewMatrix.multiplyMatrices(ot.matrixWorldInverse,Ae.matrixWorld);const zn=t.update(Ae),Qn=Ae.material;if(Array.isArray(Qn)){const Un=zn.groups;for(let An=0,Nn=Un.length;An<Nn;An++){const _n=Un[An],Vn=Qn[_n.materialIndex];if(Vn&&Vn.visible){const Fn=we(Ae,Vn,Mt,ot.near,ot.far,Xe);i.renderBufferDirect(ot,null,zn,Fn,Ae,_n)}}}else if(Qn.visible){const Un=we(Ae,Qn,Mt,ot.near,ot.far,Xe);i.renderBufferDirect(ot,null,zn,Un,Ae,null)}}const tn=Ae.children;for(let zn=0,Qn=tn.length;zn<Qn;zn++)ye(tn[zn],We,ot,Mt,Xe)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(Ae,We,ot){if(!1===X.enabled||!1===X.autoUpdate&&!1===X.needsUpdate||0===Ae.length)return;const Mt=i.getRenderTarget(),Xe=i.getActiveCubeFace(),yt=i.getActiveMipmapLevel(),tn=i.state;tn.setBlending(0),tn.buffers.color.setClear(1,1,1,1),tn.buffers.depth.setTest(!0),tn.setScissorTest(!1);for(let zn=0,Qn=Ae.length;zn<Qn;zn++){const Un=Ae[zn],An=Un.shadow;if(void 0===An){console.warn("THREE.WebGLShadowMap:",Un,"has no shadow.");continue}if(!1===An.autoUpdate&&!1===An.needsUpdate)continue;r.copy(An.mapSize);const Nn=An.getFrameExtents();r.multiply(Nn),s.copy(An.mapSize),(r.x>v||r.y>v)&&(r.x>v&&(s.x=Math.floor(v/Nn.x),r.x=s.x*Nn.x,An.mapSize.x=s.x),r.y>v&&(s.y=Math.floor(v/Nn.y),r.y=s.y*Nn.y,An.mapSize.y=s.y)),null===An.map&&(An.map=new N0(r.x,r.y,3!==this.type?{minFilter:Zu,magFilter:Zu}:{}),An.map.texture.name=Un.name+".shadowMap",An.camera.updateProjectionMatrix()),i.setRenderTarget(An.map),i.clear();const _n=An.getViewportCount();for(let Vn=0;Vn<_n;Vn++){const Fn=An.getViewport(Vn);o.set(s.x*Fn.x,s.y*Fn.y,s.x*Fn.z,s.y*Fn.w),tn.viewport(o),An.updateMatrices(Un,Vn),n=An.getFrustum(),ye(We,ot,An.camera,Un,this.type)}!0!==An.isPointLightShadow&&3===this.type&&ce(An,ot),An.needsUpdate=!1}X.needsUpdate=!1,i.setRenderTarget(Mt,Xe,yt)}}function P0e(i,t,e){const n=e.isWebGL2,l=new function r(){let Tn=!1;const bi=new hl;let lr=null;const Xr=new hl(0,0,0,0);return{setMask:function(Cs){lr!==Cs&&!Tn&&(i.colorMask(Cs,Cs,Cs,Cs),lr=Cs)},setLocked:function(Cs){Tn=Cs},setClear:function(Cs,Wa,wh,Dd,iC){!0===iC&&(Cs*=Dd,Wa*=Dd,wh*=Dd),bi.set(Cs,Wa,wh,Dd),!1===Xr.equals(bi)&&(i.clearColor(Cs,Wa,wh,Dd),Xr.copy(bi))},reset:function(){Tn=!1,lr=null,Xr.set(-1,0,0,0)}}},u=new function s(){let Tn=!1,bi=null,lr=null,Xr=null;return{setTest:function(Cs){Cs?_s(2929):fs(2929)},setMask:function(Cs){bi!==Cs&&!Tn&&(i.depthMask(Cs),bi=Cs)},setFunc:function(Cs){if(lr!==Cs){switch(Cs){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}lr=Cs}},setLocked:function(Cs){Tn=Cs},setClear:function(Cs){Xr!==Cs&&(i.clearDepth(Cs),Xr=Cs)},reset:function(){Tn=!1,bi=null,lr=null,Xr=null}}},p=new function o(){let Tn=!1,bi=null,lr=null,Xr=null,Cs=null,Wa=null,wh=null,Dd=null,iC=null;return{setTest:function(ac){Tn||(ac?_s(2960):fs(2960))},setMask:function(ac){bi!==ac&&!Tn&&(i.stencilMask(ac),bi=ac)},setFunc:function(ac,wy,Sg){(lr!==ac||Xr!==wy||Cs!==Sg)&&(i.stencilFunc(ac,wy,Sg),lr=ac,Xr=wy,Cs=Sg)},setOp:function(ac,wy,Sg){(Wa!==ac||wh!==wy||Dd!==Sg)&&(i.stencilOp(ac,wy,Sg),Wa=ac,wh=wy,Dd=Sg)},setLocked:function(ac){Tn=ac},setClear:function(ac){iC!==ac&&(i.clearStencil(ac),iC=ac)},reset:function(){Tn=!1,bi=null,lr=null,Xr=null,Cs=null,Wa=null,wh=null,Dd=null,iC=null}}},v=new WeakMap,x=new WeakMap;let I={},M={},F=new WeakMap,j=[],X=null,ce=!1,we=null,ye=null,Ae=null,We=null,ot=null,Mt=null,Xe=null,yt=!1,tn=null,zn=null,Qn=null,Un=null,An=null;const Nn=i.getParameter(35661);let _n=!1,Vn=0;const Fn=i.getParameter(7938);-1!==Fn.indexOf("WebGL")?(Vn=parseFloat(/^WebGL (\d)/.exec(Fn)[1]),_n=Vn>=1):-1!==Fn.indexOf("OpenGL ES")&&(Vn=parseFloat(/^OpenGL ES (\d)/.exec(Fn)[1]),_n=Vn>=2);let Cn=null,Bn={};const Wi=i.getParameter(3088),wi=i.getParameter(2978),Ji=(new hl).fromArray(Wi),hr=(new hl).fromArray(wi);function Is(Tn,bi,lr){const Xr=new Uint8Array(4),Cs=i.createTexture();i.bindTexture(Tn,Cs),i.texParameteri(Tn,10241,9728),i.texParameteri(Tn,10240,9728);for(let Wa=0;Wa<lr;Wa++)i.texImage2D(bi+Wa,0,6408,1,1,0,6408,5121,Xr);return Cs}const Si={};function _s(Tn){!0!==I[Tn]&&(i.enable(Tn),I[Tn]=!0)}function fs(Tn){!1!==I[Tn]&&(i.disable(Tn),I[Tn]=!1)}Si[3553]=Is(3553,3553,1),Si[34067]=Is(34067,34069,6),l.setClear(0,0,0,1),u.setClear(1),p.setClear(0),_s(2929),u.setFunc(3),Pr(!1),po(1),_s(2884),xr(0);const Vi={100:32774,101:32778,102:32779};if(n)Vi[103]=32775,Vi[104]=32776;else{const Tn=t.get("EXT_blend_minmax");null!==Tn&&(Vi[103]=Tn.MIN_EXT,Vi[104]=Tn.MAX_EXT)}const Ri={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function xr(Tn,bi,lr,Xr,Cs,Wa,wh,Dd){if(0!==Tn){if(!1===ce&&(_s(3042),ce=!0),5===Tn)Cs=Cs||bi,Wa=Wa||lr,wh=wh||Xr,(bi!==ye||Cs!==ot)&&(i.blendEquationSeparate(Vi[bi],Vi[Cs]),ye=bi,ot=Cs),(lr!==Ae||Xr!==We||Wa!==Mt||wh!==Xe)&&(i.blendFuncSeparate(Ri[lr],Ri[Xr],Ri[Wa],Ri[wh]),Ae=lr,We=Xr,Mt=Wa,Xe=wh),we=Tn,yt=null;else if(Tn!==we||Dd!==yt){if((100!==ye||100!==ot)&&(i.blendEquation(32774),ye=100,ot=100),Dd)switch(Tn){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Tn)}else switch(Tn){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Tn)}Ae=null,We=null,Mt=null,Xe=null,we=Tn,yt=Dd}}else!0===ce&&(fs(3042),ce=!1)}function Pr(Tn){tn!==Tn&&(i.frontFace(Tn?2304:2305),tn=Tn)}function po(Tn){0!==Tn?(_s(2884),Tn!==zn&&i.cullFace(1===Tn?1029:2===Tn?1028:1032)):fs(2884),zn=Tn}function Ns(Tn,bi,lr){Tn?(_s(32823),(Un!==bi||An!==lr)&&(i.polygonOffset(bi,lr),Un=bi,An=lr)):fs(32823)}return{buffers:{color:l,depth:u,stencil:p},enable:_s,disable:fs,bindFramebuffer:function ps(Tn,bi){return M[Tn]!==bi&&(i.bindFramebuffer(Tn,bi),M[Tn]=bi,n&&(36009===Tn&&(M[36160]=bi),36160===Tn&&(M[36009]=bi)),!0)},drawBuffers:function Mr(Tn,bi){let lr=j,Xr=!1;if(Tn)if(lr=F.get(bi),void 0===lr&&(lr=[],F.set(bi,lr)),Tn.isWebGLMultipleRenderTargets){const Cs=Tn.texture;if(lr.length!==Cs.length||36064!==lr[0]){for(let Wa=0,wh=Cs.length;Wa<wh;Wa++)lr[Wa]=36064+Wa;lr.length=Cs.length,Xr=!0}}else 36064!==lr[0]&&(lr[0]=36064,Xr=!0);else 1029!==lr[0]&&(lr[0]=1029,Xr=!0);Xr&&(e.isWebGL2?i.drawBuffers(lr):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(lr))},useProgram:function Co(Tn){return X!==Tn&&(i.useProgram(Tn),X=Tn,!0)},setBlending:xr,setMaterial:function ls(Tn,bi){2===Tn.side?fs(2884):_s(2884);let lr=1===Tn.side;bi&&(lr=!lr),Pr(lr),1===Tn.blending&&!1===Tn.transparent?xr(0):xr(Tn.blending,Tn.blendEquation,Tn.blendSrc,Tn.blendDst,Tn.blendEquationAlpha,Tn.blendSrcAlpha,Tn.blendDstAlpha,Tn.premultipliedAlpha),u.setFunc(Tn.depthFunc),u.setTest(Tn.depthTest),u.setMask(Tn.depthWrite),l.setMask(Tn.colorWrite);const Xr=Tn.stencilWrite;p.setTest(Xr),Xr&&(p.setMask(Tn.stencilWriteMask),p.setFunc(Tn.stencilFunc,Tn.stencilRef,Tn.stencilFuncMask),p.setOp(Tn.stencilFail,Tn.stencilZFail,Tn.stencilZPass)),Ns(Tn.polygonOffset,Tn.polygonOffsetFactor,Tn.polygonOffsetUnits),!0===Tn.alphaToCoverage?_s(32926):fs(32926)},setFlipSided:Pr,setCullFace:po,setLineWidth:function Xs(Tn){Tn!==Qn&&(_n&&i.lineWidth(Tn),Qn=Tn)},setPolygonOffset:Ns,setScissorTest:function jl(Tn){Tn?_s(3089):fs(3089)},activeTexture:function bl(Tn){void 0===Tn&&(Tn=33984+Nn-1),Cn!==Tn&&(i.activeTexture(Tn),Cn=Tn)},bindTexture:function rn(Tn,bi,lr){void 0===lr&&(lr=null===Cn?33984+Nn-1:Cn);let Xr=Bn[lr];void 0===Xr&&(Xr={type:void 0,texture:void 0},Bn[lr]=Xr),(Xr.type!==Tn||Xr.texture!==bi)&&(Cn!==lr&&(i.activeTexture(lr),Cn=lr),i.bindTexture(Tn,bi||Si[Tn]),Xr.type=Tn,Xr.texture=bi)},unbindTexture:function Nt(){const Tn=Bn[Cn];void 0!==Tn&&void 0!==Tn.type&&(i.bindTexture(Tn.type,null),Tn.type=void 0,Tn.texture=void 0)},compressedTexImage2D:function ai(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},compressedTexImage3D:function ur(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texImage2D:function Ys(){try{i.texImage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texImage3D:function gs(){try{i.texImage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},updateUBOMapping:function wa(Tn,bi){let lr=x.get(bi);void 0===lr&&(lr=new WeakMap,x.set(bi,lr));let Xr=lr.get(Tn);void 0===Xr&&(Xr=i.getUniformBlockIndex(bi,Tn.name),lr.set(Tn,Xr))},uniformBlockBinding:function oc(Tn,bi){const Xr=x.get(bi).get(Tn);v.get(Tn)!==Xr&&(i.uniformBlockBinding(bi,Xr,Tn.__bindingPointIndex),v.set(Tn,Xr))},texStorage2D:function ki(){try{i.texStorage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texStorage3D:function Ms(){try{i.texStorage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texSubImage2D:function br(){try{i.texSubImage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},texSubImage3D:function Br(){try{i.texSubImage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},compressedTexSubImage2D:function Qs(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},compressedTexSubImage3D:function Ur(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Tn){console.error("THREE.WebGLState:",Tn)}},scissor:function Us(Tn){!1===Ji.equals(Tn)&&(i.scissor(Tn.x,Tn.y,Tn.z,Tn.w),Ji.copy(Tn))},viewport:function Ds(Tn){!1===hr.equals(Tn)&&(i.viewport(Tn.x,Tn.y,Tn.z,Tn.w),hr.copy(Tn))},reset:function xh(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),I={},Cn=null,Bn={},M={},F=new WeakMap,j=[],X=null,ce=!1,we=null,ye=null,Ae=null,We=null,ot=null,Mt=null,Xe=null,yt=!1,tn=null,zn=null,Qn=null,Un=null,An=null,Ji.set(0,0,i.canvas.width,i.canvas.height),hr.set(0,0,i.canvas.width,i.canvas.height),l.reset(),u.reset(),p.reset()}}}function R0e(i,t,e,n,r,s,o){const l=r.isWebGL2,u=r.maxTextures,p=r.maxCubemapSize,v=r.maxTextureSize,x=r.maxSamples,I=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,M=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),F=new WeakMap;let j;const X=new WeakMap;let ce=!1;try{ce=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function we(rn,Nt){return ce?new OffscreenCanvas(rn,Nt):Qw("canvas")}function ye(rn,Nt,ai,ur){let br=1;if((rn.width>ur||rn.height>ur)&&(br=ur/Math.max(rn.width,rn.height)),br<1||!0===Nt){if(typeof HTMLImageElement<"u"&&rn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&rn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&rn instanceof ImageBitmap){const Br=Nt?PS:Math.floor,Qs=Br(br*rn.width),Ur=Br(br*rn.height);void 0===j&&(j=we(Qs,Ur));const ki=ai?we(Qs,Ur):j;return ki.width=Qs,ki.height=Ur,ki.getContext("2d").drawImage(rn,0,0,Qs,Ur),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+rn.width+"x"+rn.height+") to ("+Qs+"x"+Ur+")."),ki}return"data"in rn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+rn.width+"x"+rn.height+")."),rn}return rn}function Ae(rn){return GL(rn.width)&&GL(rn.height)}function ot(rn,Nt){return rn.generateMipmaps&&Nt&&rn.minFilter!==Zu&&rn.minFilter!==Tu}function Mt(rn){i.generateMipmap(rn)}function Xe(rn,Nt,ai,ur,br=!1){if(!1===l)return Nt;if(null!==rn){if(void 0!==i[rn])return i[rn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+rn+"'")}let Br=Nt;return 6403===Nt&&(5126===ai&&(Br=33326),5131===ai&&(Br=33325),5121===ai&&(Br=33321)),33319===Nt&&(5126===ai&&(Br=33328),5131===ai&&(Br=33327),5121===ai&&(Br=33323)),6408===Nt&&(5126===ai&&(Br=34836),5131===ai&&(Br=34842),5121===ai&&(Br=ur===qc&&!1===br?35907:32856),32819===ai&&(Br=32854),32820===ai&&(Br=32855)),(33325===Br||33326===Br||33327===Br||33328===Br||34842===Br||34836===Br)&&t.get("EXT_color_buffer_float"),Br}function yt(rn,Nt,ai){return!0===ot(rn,ai)||rn.isFramebufferTexture&&rn.minFilter!==Zu&&rn.minFilter!==Tu?Math.log2(Math.max(Nt.width,Nt.height))+1:void 0!==rn.mipmaps&&rn.mipmaps.length>0?rn.mipmaps.length:rn.isCompressedTexture&&Array.isArray(rn.image)?Nt.mipmaps.length:1}function tn(rn){return rn===Zu||1004===rn||1005===rn?9728:9729}function zn(rn){const Nt=rn.target;Nt.removeEventListener("dispose",zn),function Un(rn){const Nt=n.get(rn);if(void 0===Nt.__webglInit)return;const ai=rn.source,ur=X.get(ai);if(ur){const br=ur[Nt.__cacheKey];br.usedTimes--,0===br.usedTimes&&An(rn),0===Object.keys(ur).length&&X.delete(ai)}n.remove(rn)}(Nt),Nt.isVideoTexture&&F.delete(Nt)}function Qn(rn){const Nt=rn.target;Nt.removeEventListener("dispose",Qn),function Nn(rn){const Nt=rn.texture,ai=n.get(rn),ur=n.get(Nt);if(void 0!==ur.__webglTexture&&(i.deleteTexture(ur.__webglTexture),o.memory.textures--),rn.depthTexture&&rn.depthTexture.dispose(),rn.isWebGLCubeRenderTarget)for(let br=0;br<6;br++)i.deleteFramebuffer(ai.__webglFramebuffer[br]),ai.__webglDepthbuffer&&i.deleteRenderbuffer(ai.__webglDepthbuffer[br]);else{if(i.deleteFramebuffer(ai.__webglFramebuffer),ai.__webglDepthbuffer&&i.deleteRenderbuffer(ai.__webglDepthbuffer),ai.__webglMultisampledFramebuffer&&i.deleteFramebuffer(ai.__webglMultisampledFramebuffer),ai.__webglColorRenderbuffer)for(let br=0;br<ai.__webglColorRenderbuffer.length;br++)ai.__webglColorRenderbuffer[br]&&i.deleteRenderbuffer(ai.__webglColorRenderbuffer[br]);ai.__webglDepthRenderbuffer&&i.deleteRenderbuffer(ai.__webglDepthRenderbuffer)}if(rn.isWebGLMultipleRenderTargets)for(let br=0,Br=Nt.length;br<Br;br++){const Qs=n.get(Nt[br]);Qs.__webglTexture&&(i.deleteTexture(Qs.__webglTexture),o.memory.textures--),n.remove(Nt[br])}n.remove(Nt),n.remove(rn)}(Nt)}function An(rn){const Nt=n.get(rn);i.deleteTexture(Nt.__webglTexture),delete X.get(rn.source)[Nt.__cacheKey],o.memory.textures--}let _n=0;function Bn(rn,Nt){const ai=n.get(rn);if(rn.isVideoTexture&&function jl(rn){const Nt=o.render.frame;F.get(rn)!==Nt&&(F.set(rn,Nt),rn.update())}(rn),!1===rn.isRenderTargetTexture&&rn.version>0&&ai.__version!==rn.version){const ur=rn.image;if(null===ur)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ur.complete)return void fs(ai,rn,Nt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(3553,ai.__webglTexture,33984+Nt)}const hr={1e3:10497,[af]:33071,1002:33648},Is={[Zu]:9728,1004:9984,1005:9986,[Tu]:9729,1007:9985,1008:9987};function Si(rn,Nt,ai){if(ai?(i.texParameteri(rn,10242,hr[Nt.wrapS]),i.texParameteri(rn,10243,hr[Nt.wrapT]),(32879===rn||35866===rn)&&i.texParameteri(rn,32882,hr[Nt.wrapR]),i.texParameteri(rn,10240,Is[Nt.magFilter]),i.texParameteri(rn,10241,Is[Nt.minFilter])):(i.texParameteri(rn,10242,33071),i.texParameteri(rn,10243,33071),(32879===rn||35866===rn)&&i.texParameteri(rn,32882,33071),(Nt.wrapS!==af||Nt.wrapT!==af)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(rn,10240,tn(Nt.magFilter)),i.texParameteri(rn,10241,tn(Nt.minFilter)),Nt.minFilter!==Zu&&Nt.minFilter!==Tu&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const ur=t.get("EXT_texture_filter_anisotropic");if(Nt.type===g_&&!1===t.has("OES_texture_float_linear")||!1===l&&Nt.type===Yw&&!1===t.has("OES_texture_half_float_linear"))return;(Nt.anisotropy>1||n.get(Nt).__currentAnisotropy)&&(i.texParameterf(rn,ur.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Nt.anisotropy,r.getMaxAnisotropy())),n.get(Nt).__currentAnisotropy=Nt.anisotropy)}}function _s(rn,Nt){let ai=!1;void 0===rn.__webglInit&&(rn.__webglInit=!0,Nt.addEventListener("dispose",zn));const ur=Nt.source;let br=X.get(ur);void 0===br&&(br={},X.set(ur,br));const Br=function Cn(rn){const Nt=[];return Nt.push(rn.wrapS),Nt.push(rn.wrapT),Nt.push(rn.wrapR||0),Nt.push(rn.magFilter),Nt.push(rn.minFilter),Nt.push(rn.anisotropy),Nt.push(rn.internalFormat),Nt.push(rn.format),Nt.push(rn.type),Nt.push(rn.generateMipmaps),Nt.push(rn.premultiplyAlpha),Nt.push(rn.flipY),Nt.push(rn.unpackAlignment),Nt.push(rn.encoding),Nt.join()}(Nt);if(Br!==rn.__cacheKey){void 0===br[Br]&&(br[Br]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ai=!0),br[Br].usedTimes++;const Qs=br[rn.__cacheKey];void 0!==Qs&&(br[rn.__cacheKey].usedTimes--,0===Qs.usedTimes&&An(Nt)),rn.__cacheKey=Br,rn.__webglTexture=br[Br].texture}return ai}function fs(rn,Nt,ai){let ur=3553;(Nt.isDataArrayTexture||Nt.isCompressedArrayTexture)&&(ur=35866),Nt.isData3DTexture&&(ur=32879);const br=_s(rn,Nt),Br=Nt.source;e.bindTexture(ur,rn.__webglTexture,33984+ai);const Qs=n.get(Br);if(Br.version!==Qs.__version||!0===br){e.activeTexture(33984+ai),i.pixelStorei(37440,Nt.flipY),i.pixelStorei(37441,Nt.premultiplyAlpha),i.pixelStorei(3317,Nt.unpackAlignment),i.pixelStorei(37443,0);const Ur=function We(rn){return!l&&(rn.wrapS!==af||rn.wrapT!==af||rn.minFilter!==Zu&&rn.minFilter!==Tu)}(Nt)&&!1===Ae(Nt.image);let ki=ye(Nt.image,Ur,!1,v);ki=bl(Nt,ki);const Ms=Ae(ki)||l,Ys=s.convert(Nt.format,Nt.encoding);let Ds,gs=s.convert(Nt.type),Us=Xe(Nt.internalFormat,Ys,gs,Nt.encoding,Nt.isVideoTexture);Si(ur,Nt,Ms);const wa=Nt.mipmaps,oc=l&&!0!==Nt.isVideoTexture,xh=void 0===Qs.__version||!0===br,Tn=yt(Nt,ki,Ms);if(Nt.isDepthTexture)Us=6402,l?Us=Nt.type===g_?36012:Nt.type===D0?33190:Nt.type===pb?35056:33189:Nt.type===g_&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Nt.format===L0&&6402===Us&&1012!==Nt.type&&Nt.type!==D0&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Nt.type=D0,gs=s.convert(Nt.type)),Nt.format===gb&&6402===Us&&(Us=34041,Nt.type!==pb&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Nt.type=pb,gs=s.convert(Nt.type))),xh&&(oc?e.texStorage2D(3553,1,Us,ki.width,ki.height):e.texImage2D(3553,0,Us,ki.width,ki.height,0,Ys,gs,null));else if(Nt.isDataTexture)if(wa.length>0&&Ms){oc&&xh&&e.texStorage2D(3553,Tn,Us,wa[0].width,wa[0].height);for(let bi=0,lr=wa.length;bi<lr;bi++)Ds=wa[bi],oc?e.texSubImage2D(3553,bi,0,0,Ds.width,Ds.height,Ys,gs,Ds.data):e.texImage2D(3553,bi,Us,Ds.width,Ds.height,0,Ys,gs,Ds.data);Nt.generateMipmaps=!1}else oc?(xh&&e.texStorage2D(3553,Tn,Us,ki.width,ki.height),e.texSubImage2D(3553,0,0,0,ki.width,ki.height,Ys,gs,ki.data)):e.texImage2D(3553,0,Us,ki.width,ki.height,0,Ys,gs,ki.data);else if(Nt.isCompressedTexture)if(Nt.isCompressedArrayTexture){oc&&xh&&e.texStorage3D(35866,Tn,Us,wa[0].width,wa[0].height,ki.depth);for(let bi=0,lr=wa.length;bi<lr;bi++)Ds=wa[bi],Nt.format!==bg?null!==Ys?oc?e.compressedTexSubImage3D(35866,bi,0,0,0,Ds.width,Ds.height,ki.depth,Ys,Ds.data,0,0):e.compressedTexImage3D(35866,bi,Us,Ds.width,Ds.height,ki.depth,0,Ds.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oc?e.texSubImage3D(35866,bi,0,0,0,Ds.width,Ds.height,ki.depth,Ys,gs,Ds.data):e.texImage3D(35866,bi,Us,Ds.width,Ds.height,ki.depth,0,Ys,gs,Ds.data)}else{oc&&xh&&e.texStorage2D(3553,Tn,Us,wa[0].width,wa[0].height);for(let bi=0,lr=wa.length;bi<lr;bi++)Ds=wa[bi],Nt.format!==bg?null!==Ys?oc?e.compressedTexSubImage2D(3553,bi,0,0,Ds.width,Ds.height,Ys,Ds.data):e.compressedTexImage2D(3553,bi,Us,Ds.width,Ds.height,0,Ds.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oc?e.texSubImage2D(3553,bi,0,0,Ds.width,Ds.height,Ys,gs,Ds.data):e.texImage2D(3553,bi,Us,Ds.width,Ds.height,0,Ys,gs,Ds.data)}else if(Nt.isDataArrayTexture)oc?(xh&&e.texStorage3D(35866,Tn,Us,ki.width,ki.height,ki.depth),e.texSubImage3D(35866,0,0,0,0,ki.width,ki.height,ki.depth,Ys,gs,ki.data)):e.texImage3D(35866,0,Us,ki.width,ki.height,ki.depth,0,Ys,gs,ki.data);else if(Nt.isData3DTexture)oc?(xh&&e.texStorage3D(32879,Tn,Us,ki.width,ki.height,ki.depth),e.texSubImage3D(32879,0,0,0,0,ki.width,ki.height,ki.depth,Ys,gs,ki.data)):e.texImage3D(32879,0,Us,ki.width,ki.height,ki.depth,0,Ys,gs,ki.data);else if(Nt.isFramebufferTexture){if(xh)if(oc)e.texStorage2D(3553,Tn,Us,ki.width,ki.height);else{let bi=ki.width,lr=ki.height;for(let Xr=0;Xr<Tn;Xr++)e.texImage2D(3553,Xr,Us,bi,lr,0,Ys,gs,null),bi>>=1,lr>>=1}}else if(wa.length>0&&Ms){oc&&xh&&e.texStorage2D(3553,Tn,Us,wa[0].width,wa[0].height);for(let bi=0,lr=wa.length;bi<lr;bi++)Ds=wa[bi],oc?e.texSubImage2D(3553,bi,0,0,Ys,gs,Ds):e.texImage2D(3553,bi,Us,Ys,gs,Ds);Nt.generateMipmaps=!1}else oc?(xh&&e.texStorage2D(3553,Tn,Us,ki.width,ki.height),e.texSubImage2D(3553,0,0,0,Ys,gs,ki)):e.texImage2D(3553,0,Us,Ys,gs,ki);ot(Nt,Ms)&&Mt(ur),Qs.__version=Br.version,Nt.onUpdate&&Nt.onUpdate(Nt)}rn.__version=Nt.version}function Mr(rn,Nt,ai,ur,br){const Br=s.convert(ai.format,ai.encoding),Qs=s.convert(ai.type),Ur=Xe(ai.internalFormat,Br,Qs,ai.encoding);n.get(Nt).__hasExternalTextures||(32879===br||35866===br?e.texImage3D(br,0,Ur,Nt.width,Nt.height,Nt.depth,0,Br,Qs,null):e.texImage2D(br,0,Ur,Nt.width,Nt.height,0,Br,Qs,null)),e.bindFramebuffer(36160,rn),Ns(Nt)?I.framebufferTexture2DMultisampleEXT(36160,ur,br,n.get(ai).__webglTexture,0,Xs(Nt)):(3553===br||br>=34069&&br<=34074)&&i.framebufferTexture2D(36160,ur,br,n.get(ai).__webglTexture,0),e.bindFramebuffer(36160,null)}function Co(rn,Nt,ai){if(i.bindRenderbuffer(36161,rn),Nt.depthBuffer&&!Nt.stencilBuffer){let ur=33189;if(ai||Ns(Nt)){const br=Nt.depthTexture;br&&br.isDepthTexture&&(br.type===g_?ur=36012:br.type===D0&&(ur=33190));const Br=Xs(Nt);Ns(Nt)?I.renderbufferStorageMultisampleEXT(36161,Br,ur,Nt.width,Nt.height):i.renderbufferStorageMultisample(36161,Br,ur,Nt.width,Nt.height)}else i.renderbufferStorage(36161,ur,Nt.width,Nt.height);i.framebufferRenderbuffer(36160,36096,36161,rn)}else if(Nt.depthBuffer&&Nt.stencilBuffer){const ur=Xs(Nt);ai&&!1===Ns(Nt)?i.renderbufferStorageMultisample(36161,ur,35056,Nt.width,Nt.height):Ns(Nt)?I.renderbufferStorageMultisampleEXT(36161,ur,35056,Nt.width,Nt.height):i.renderbufferStorage(36161,34041,Nt.width,Nt.height),i.framebufferRenderbuffer(36160,33306,36161,rn)}else{const ur=!0===Nt.isWebGLMultipleRenderTargets?Nt.texture:[Nt.texture];for(let br=0;br<ur.length;br++){const Br=ur[br],Qs=s.convert(Br.format,Br.encoding),Ur=s.convert(Br.type),ki=Xe(Br.internalFormat,Qs,Ur,Br.encoding),Ms=Xs(Nt);ai&&!1===Ns(Nt)?i.renderbufferStorageMultisample(36161,Ms,ki,Nt.width,Nt.height):Ns(Nt)?I.renderbufferStorageMultisampleEXT(36161,Ms,ki,Nt.width,Nt.height):i.renderbufferStorage(36161,ki,Nt.width,Nt.height)}}i.bindRenderbuffer(36161,null)}function Ri(rn){const Nt=n.get(rn),ai=!0===rn.isWebGLCubeRenderTarget;if(rn.depthTexture&&!Nt.__autoAllocateDepthBuffer){if(ai)throw new Error("target.depthTexture not supported in Cube render targets");!function Vi(rn,Nt){if(Nt&&Nt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,rn),!Nt.depthTexture||!Nt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(Nt.depthTexture).__webglTexture||Nt.depthTexture.image.width!==Nt.width||Nt.depthTexture.image.height!==Nt.height)&&(Nt.depthTexture.image.width=Nt.width,Nt.depthTexture.image.height=Nt.height,Nt.depthTexture.needsUpdate=!0),Bn(Nt.depthTexture,0);const ur=n.get(Nt.depthTexture).__webglTexture,br=Xs(Nt);if(Nt.depthTexture.format===L0)Ns(Nt)?I.framebufferTexture2DMultisampleEXT(36160,36096,3553,ur,0,br):i.framebufferTexture2D(36160,36096,3553,ur,0);else{if(Nt.depthTexture.format!==gb)throw new Error("Unknown depthTexture format");Ns(Nt)?I.framebufferTexture2DMultisampleEXT(36160,33306,3553,ur,0,br):i.framebufferTexture2D(36160,33306,3553,ur,0)}}(Nt.__webglFramebuffer,rn)}else if(ai){Nt.__webglDepthbuffer=[];for(let ur=0;ur<6;ur++)e.bindFramebuffer(36160,Nt.__webglFramebuffer[ur]),Nt.__webglDepthbuffer[ur]=i.createRenderbuffer(),Co(Nt.__webglDepthbuffer[ur],rn,!1)}else e.bindFramebuffer(36160,Nt.__webglFramebuffer),Nt.__webglDepthbuffer=i.createRenderbuffer(),Co(Nt.__webglDepthbuffer,rn,!1);e.bindFramebuffer(36160,null)}function Xs(rn){return Math.min(x,rn.samples)}function Ns(rn){const Nt=n.get(rn);return l&&rn.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==Nt.__useRenderToTexture}function bl(rn,Nt){const ai=rn.encoding,ur=rn.format,br=rn.type;return!0===rn.isCompressedTexture||!0===rn.isVideoTexture||1035===rn.format||ai!==P0&&(ai===qc?!1===l?!0===t.has("EXT_sRGB")&&ur===bg?(rn.format=1035,rn.minFilter=Tu,rn.generateMipmaps=!1):Nt=C5.sRGBToLinear(Nt):(ur!==bg||br!==M0)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ai)),Nt}this.allocateTextureUnit=function Fn(){const rn=_n;return rn>=u&&console.warn("THREE.WebGLTextures: Trying to use "+rn+" texture units while this GPU supports only "+u),_n+=1,rn},this.resetTextureUnits=function Vn(){_n=0},this.setTexture2D=Bn,this.setTexture2DArray=function Wi(rn,Nt){const ai=n.get(rn);rn.version>0&&ai.__version!==rn.version?fs(ai,rn,Nt):e.bindTexture(35866,ai.__webglTexture,33984+Nt)},this.setTexture3D=function wi(rn,Nt){const ai=n.get(rn);rn.version>0&&ai.__version!==rn.version?fs(ai,rn,Nt):e.bindTexture(32879,ai.__webglTexture,33984+Nt)},this.setTextureCube=function Ji(rn,Nt){const ai=n.get(rn);rn.version>0&&ai.__version!==rn.version?function ps(rn,Nt,ai){if(6!==Nt.image.length)return;const ur=_s(rn,Nt),br=Nt.source;e.bindTexture(34067,rn.__webglTexture,33984+ai);const Br=n.get(br);if(br.version!==Br.__version||!0===ur){e.activeTexture(33984+ai),i.pixelStorei(37440,Nt.flipY),i.pixelStorei(37441,Nt.premultiplyAlpha),i.pixelStorei(3317,Nt.unpackAlignment),i.pixelStorei(37443,0);const Qs=Nt.isCompressedTexture||Nt.image[0].isCompressedTexture,Ur=Nt.image[0]&&Nt.image[0].isDataTexture,ki=[];for(let bi=0;bi<6;bi++)ki[bi]=Qs||Ur?Ur?Nt.image[bi].image:Nt.image[bi]:ye(Nt.image[bi],!1,!0,p),ki[bi]=bl(Nt,ki[bi]);const Ms=ki[0],Ys=Ae(Ms)||l,gs=s.convert(Nt.format,Nt.encoding),Us=s.convert(Nt.type),Ds=Xe(Nt.internalFormat,gs,Us,Nt.encoding),wa=l&&!0!==Nt.isVideoTexture,oc=void 0===Br.__version||!0===ur;let Tn,xh=yt(Nt,Ms,Ys);if(Si(34067,Nt,Ys),Qs){wa&&oc&&e.texStorage2D(34067,xh,Ds,Ms.width,Ms.height);for(let bi=0;bi<6;bi++){Tn=ki[bi].mipmaps;for(let lr=0;lr<Tn.length;lr++){const Xr=Tn[lr];Nt.format!==bg?null!==gs?wa?e.compressedTexSubImage2D(34069+bi,lr,0,0,Xr.width,Xr.height,gs,Xr.data):e.compressedTexImage2D(34069+bi,lr,Ds,Xr.width,Xr.height,0,Xr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):wa?e.texSubImage2D(34069+bi,lr,0,0,Xr.width,Xr.height,gs,Us,Xr.data):e.texImage2D(34069+bi,lr,Ds,Xr.width,Xr.height,0,gs,Us,Xr.data)}}}else{Tn=Nt.mipmaps,wa&&oc&&(Tn.length>0&&xh++,e.texStorage2D(34067,xh,Ds,ki[0].width,ki[0].height));for(let bi=0;bi<6;bi++)if(Ur){wa?e.texSubImage2D(34069+bi,0,0,0,ki[bi].width,ki[bi].height,gs,Us,ki[bi].data):e.texImage2D(34069+bi,0,Ds,ki[bi].width,ki[bi].height,0,gs,Us,ki[bi].data);for(let lr=0;lr<Tn.length;lr++){const Cs=Tn[lr].image[bi].image;wa?e.texSubImage2D(34069+bi,lr+1,0,0,Cs.width,Cs.height,gs,Us,Cs.data):e.texImage2D(34069+bi,lr+1,Ds,Cs.width,Cs.height,0,gs,Us,Cs.data)}}else{wa?e.texSubImage2D(34069+bi,0,0,0,gs,Us,ki[bi]):e.texImage2D(34069+bi,0,Ds,gs,Us,ki[bi]);for(let lr=0;lr<Tn.length;lr++){const Xr=Tn[lr];wa?e.texSubImage2D(34069+bi,lr+1,0,0,gs,Us,Xr.image[bi]):e.texImage2D(34069+bi,lr+1,Ds,gs,Us,Xr.image[bi])}}}ot(Nt,Ys)&&Mt(34067),Br.__version=br.version,Nt.onUpdate&&Nt.onUpdate(Nt)}rn.__version=Nt.version}(ai,rn,Nt):e.bindTexture(34067,ai.__webglTexture,33984+Nt)},this.rebindTextures=function xr(rn,Nt,ai){const ur=n.get(rn);void 0!==Nt&&Mr(ur.__webglFramebuffer,rn,rn.texture,36064,3553),void 0!==ai&&Ri(rn)},this.setupRenderTarget=function ls(rn){const Nt=rn.texture,ai=n.get(rn),ur=n.get(Nt);rn.addEventListener("dispose",Qn),!0!==rn.isWebGLMultipleRenderTargets&&(void 0===ur.__webglTexture&&(ur.__webglTexture=i.createTexture()),ur.__version=Nt.version,o.memory.textures++);const br=!0===rn.isWebGLCubeRenderTarget,Br=!0===rn.isWebGLMultipleRenderTargets,Qs=Ae(rn)||l;if(br){ai.__webglFramebuffer=[];for(let Ur=0;Ur<6;Ur++)ai.__webglFramebuffer[Ur]=i.createFramebuffer()}else{if(ai.__webglFramebuffer=i.createFramebuffer(),Br)if(r.drawBuffers){const Ur=rn.texture;for(let ki=0,Ms=Ur.length;ki<Ms;ki++){const Ys=n.get(Ur[ki]);void 0===Ys.__webglTexture&&(Ys.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&rn.samples>0&&!1===Ns(rn)){const Ur=Br?Nt:[Nt];ai.__webglMultisampledFramebuffer=i.createFramebuffer(),ai.__webglColorRenderbuffer=[],e.bindFramebuffer(36160,ai.__webglMultisampledFramebuffer);for(let ki=0;ki<Ur.length;ki++){const Ms=Ur[ki];ai.__webglColorRenderbuffer[ki]=i.createRenderbuffer(),i.bindRenderbuffer(36161,ai.__webglColorRenderbuffer[ki]);const Ys=s.convert(Ms.format,Ms.encoding),gs=s.convert(Ms.type),Us=Xe(Ms.internalFormat,Ys,gs,Ms.encoding,!0===rn.isXRRenderTarget),Ds=Xs(rn);i.renderbufferStorageMultisample(36161,Ds,Us,rn.width,rn.height),i.framebufferRenderbuffer(36160,36064+ki,36161,ai.__webglColorRenderbuffer[ki])}i.bindRenderbuffer(36161,null),rn.depthBuffer&&(ai.__webglDepthRenderbuffer=i.createRenderbuffer(),Co(ai.__webglDepthRenderbuffer,rn,!0)),e.bindFramebuffer(36160,null)}}if(br){e.bindTexture(34067,ur.__webglTexture),Si(34067,Nt,Qs);for(let Ur=0;Ur<6;Ur++)Mr(ai.__webglFramebuffer[Ur],rn,Nt,36064,34069+Ur);ot(Nt,Qs)&&Mt(34067),e.unbindTexture()}else if(Br){const Ur=rn.texture;for(let ki=0,Ms=Ur.length;ki<Ms;ki++){const Ys=Ur[ki],gs=n.get(Ys);e.bindTexture(3553,gs.__webglTexture),Si(3553,Ys,Qs),Mr(ai.__webglFramebuffer,rn,Ys,36064+ki,3553),ot(Ys,Qs)&&Mt(3553)}e.unbindTexture()}else{let Ur=3553;(rn.isWebGL3DRenderTarget||rn.isWebGLArrayRenderTarget)&&(l?Ur=rn.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),e.bindTexture(Ur,ur.__webglTexture),Si(Ur,Nt,Qs),Mr(ai.__webglFramebuffer,rn,Nt,36064,Ur),ot(Nt,Qs)&&Mt(Ur),e.unbindTexture()}rn.depthBuffer&&Ri(rn)},this.updateRenderTargetMipmap=function Pr(rn){const Nt=Ae(rn)||l,ai=!0===rn.isWebGLMultipleRenderTargets?rn.texture:[rn.texture];for(let ur=0,br=ai.length;ur<br;ur++){const Br=ai[ur];if(ot(Br,Nt)){const Qs=rn.isWebGLCubeRenderTarget?34067:3553,Ur=n.get(Br).__webglTexture;e.bindTexture(Qs,Ur),Mt(Qs),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function po(rn){if(l&&rn.samples>0&&!1===Ns(rn)){const Nt=rn.isWebGLMultipleRenderTargets?rn.texture:[rn.texture],ai=rn.width,ur=rn.height;let br=16384;const Br=[],Qs=rn.stencilBuffer?33306:36096,Ur=n.get(rn),ki=!0===rn.isWebGLMultipleRenderTargets;if(ki)for(let Ms=0;Ms<Nt.length;Ms++)e.bindFramebuffer(36160,Ur.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ms,36161,null),e.bindFramebuffer(36160,Ur.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ms,3553,null,0);e.bindFramebuffer(36008,Ur.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,Ur.__webglFramebuffer);for(let Ms=0;Ms<Nt.length;Ms++){Br.push(36064+Ms),rn.depthBuffer&&Br.push(Qs);const Ys=void 0!==Ur.__ignoreDepthValues&&Ur.__ignoreDepthValues;if(!1===Ys&&(rn.depthBuffer&&(br|=256),rn.stencilBuffer&&(br|=1024)),ki&&i.framebufferRenderbuffer(36008,36064,36161,Ur.__webglColorRenderbuffer[Ms]),!0===Ys&&(i.invalidateFramebuffer(36008,[Qs]),i.invalidateFramebuffer(36009,[Qs])),ki){const gs=n.get(Nt[Ms]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,gs,0)}i.blitFramebuffer(0,0,ai,ur,0,0,ai,ur,br,9728),M&&i.invalidateFramebuffer(36008,Br)}if(e.bindFramebuffer(36008,null),e.bindFramebuffer(36009,null),ki)for(let Ms=0;Ms<Nt.length;Ms++){e.bindFramebuffer(36160,Ur.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+Ms,36161,Ur.__webglColorRenderbuffer[Ms]);const Ys=n.get(Nt[Ms]).__webglTexture;e.bindFramebuffer(36160,Ur.__webglFramebuffer),i.framebufferTexture2D(36009,36064+Ms,3553,Ys,0)}e.bindFramebuffer(36009,Ur.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Ri,this.setupFrameBufferTexture=Mr,this.useMultisampledRTT=Ns}function k0e(i,t,e){const n=e.isWebGL2;return{convert:function r(s,o=null){let l;if(s===M0)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===D0)return 5125;if(s===g_)return 5126;if(s===Yw)return n?5131:(l=t.get("OES_texture_half_float"),null!==l?l.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===bg)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===L0)return 6402;if(s===gb)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return l=t.get("EXT_sRGB"),null!==l?l.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===qc){if(l=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===l)return null;if(33776===s)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(l=t.get("WEBGL_compressed_texture_s3tc"),null===l)return null;if(33776===s)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(l=t.get("WEBGL_compressed_texture_pvrtc"),null===l)return null;if(35840===s)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return l=t.get("WEBGL_compressed_texture_etc1"),null!==l?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(l=t.get("WEBGL_compressed_texture_etc"),null===l)return null;if(37492===s)return o===qc?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(37496===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(l=t.get("WEBGL_compressed_texture_astc"),null===l)return null;if(37808===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===qc?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(l=t.get("EXT_texture_compression_bptc"),null===l)return null;if(36492===s)return o===qc?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===pb?n?34042:(l=t.get("WEBGL_depth_texture"),null!==l?l.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class O0e extends Jh{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class zb extends Uf{constructor(){super(),this.isGroup=!0,this.type="Group"}}const F0e={type:"move"};class bP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new zb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new zb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $t,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $t),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new zb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $t,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $t),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const l=this._targetRay,u=this._grip,p=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(p&&t.hand){o=!0;for(const j of t.hand.values()){const X=e.getJointPose(j,n);if(void 0===p.joints[j.jointName]){const we=new zb;we.matrixAutoUpdate=!1,we.visible=!1,p.joints[j.jointName]=we,p.add(we)}const ce=p.joints[j.jointName];null!==X&&(ce.matrix.fromArray(X.transform.matrix),ce.matrix.decompose(ce.position,ce.rotation,ce.scale),ce.jointRadius=X.radius),ce.visible=null!==X}const I=p.joints["index-finger-tip"].position.distanceTo(p.joints["thumb-tip"].position),M=.02,F=.005;p.inputState.pinching&&I>M+F?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&I<=M-F&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==u&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));null!==l&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(F0e)))}return null!==l&&(l.visible=null!==r),null!==u&&(u.visible=null!==s),null!==p&&(p.visible=null!==o),this}}class N0e extends m_{constructor(t,e,n,r,s,o,l,u,p,v){if((v=void 0!==v?v:L0)!==L0&&v!==gb)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&v===L0&&(n=D0),void 0===n&&v===gb&&(n=pb),super(null,r,s,o,l,u,v,n,p),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==l?l:Zu,this.minFilter=void 0!==u?u:Zu,this.flipY=!1,this.generateMipmaps=!1}}class B0e extends yb{constructor(t,e){super();const n=this;let r=null,s=1,o=null,l="local-floor",u=null,p=null,v=null,x=null,I=null,M=null;const F=e.getContextAttributes();let j=null,X=null;const ce=[],we=[],ye=new Jh;ye.layers.enable(1),ye.viewport=new hl;const Ae=new Jh;Ae.layers.enable(2),Ae.viewport=new hl;const We=[ye,Ae],ot=new O0e;ot.layers.enable(1),ot.layers.enable(2);let Mt=null,Xe=null;function yt(Cn){const Bn=we.indexOf(Cn.inputSource);if(-1===Bn)return;const Wi=ce[Bn];void 0!==Wi&&Wi.dispatchEvent({type:Cn.type,data:Cn.inputSource})}function tn(){r.removeEventListener("select",yt),r.removeEventListener("selectstart",yt),r.removeEventListener("selectend",yt),r.removeEventListener("squeeze",yt),r.removeEventListener("squeezestart",yt),r.removeEventListener("squeezeend",yt),r.removeEventListener("end",tn),r.removeEventListener("inputsourceschange",zn);for(let Cn=0;Cn<ce.length;Cn++){const Bn=we[Cn];null!==Bn&&(we[Cn]=null,ce[Cn].disconnect(Bn))}Mt=null,Xe=null,t.setRenderTarget(j),I=null,x=null,v=null,r=null,X=null,Fn.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function zn(Cn){for(let Bn=0;Bn<Cn.removed.length;Bn++){const Wi=Cn.removed[Bn],wi=we.indexOf(Wi);wi>=0&&(we[wi]=null,ce[wi].dispatchEvent({type:"disconnected",data:Wi}))}for(let Bn=0;Bn<Cn.added.length;Bn++){const Wi=Cn.added[Bn];let wi=we.indexOf(Wi);if(-1===wi){for(let hr=0;hr<ce.length;hr++){if(hr>=we.length){we.push(Wi),wi=hr;break}if(null===we[hr]){we[hr]=Wi,wi=hr;break}}if(-1===wi)break}const Ji=ce[wi];Ji&&Ji.dispatchEvent({type:"connected",data:Wi})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Cn){let Bn=ce[Cn];return void 0===Bn&&(Bn=new bP,ce[Cn]=Bn),Bn.getTargetRaySpace()},this.getControllerGrip=function(Cn){let Bn=ce[Cn];return void 0===Bn&&(Bn=new bP,ce[Cn]=Bn),Bn.getGripSpace()},this.getHand=function(Cn){let Bn=ce[Cn];return void 0===Bn&&(Bn=new bP,ce[Cn]=Bn),Bn.getHandSpace()},this.setFramebufferScaleFactor=function(Cn){s=Cn,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Cn){l=Cn,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(Cn){u=Cn},this.getBaseLayer=function(){return null!==x?x:I},this.getBinding=function(){return v},this.getFrame=function(){return M},this.getSession=function(){return r},this.setSession=function(){var Cn=eb(function*(Bn){if(r=Bn,null!==r){if(j=t.getRenderTarget(),r.addEventListener("select",yt),r.addEventListener("selectstart",yt),r.addEventListener("selectend",yt),r.addEventListener("squeeze",yt),r.addEventListener("squeezestart",yt),r.addEventListener("squeezeend",yt),r.addEventListener("end",tn),r.addEventListener("inputsourceschange",zn),!0!==F.xrCompatible&&(yield e.makeXRCompatible()),void 0===r.renderState.layers||!1===t.capabilities.isWebGL2)I=new XRWebGLLayer(r,e,{antialias:void 0!==r.renderState.layers||F.antialias,alpha:F.alpha,depth:F.depth,stencil:F.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:I}),X=new N0(I.framebufferWidth,I.framebufferHeight,{format:bg,type:M0,encoding:t.outputEncoding,stencilBuffer:F.stencil});else{let Wi=null,wi=null,Ji=null;F.depth&&(Ji=F.stencil?35056:33190,Wi=F.stencil?gb:L0,wi=F.stencil?pb:D0);const hr={colorFormat:32856,depthFormat:Ji,scaleFactor:s};v=new XRWebGLBinding(r,e),x=v.createProjectionLayer(hr),r.updateRenderState({layers:[x]}),X=new N0(x.textureWidth,x.textureHeight,{format:bg,type:M0,depthTexture:new N0e(x.textureWidth,x.textureHeight,wi,void 0,void 0,void 0,void 0,void 0,void 0,Wi),stencilBuffer:F.stencil,encoding:t.outputEncoding,samples:F.antialias?4:0}),t.properties.get(X).__ignoreDepthValues=x.ignoreDepthValues}X.isXRRenderTarget=!0,this.setFoveation(1),u=null,o=yield r.requestReferenceSpace(l),Fn.setContext(r),Fn.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Bn){return Cn.apply(this,arguments)}}();const Qn=new $t,Un=new $t;function Nn(Cn,Bn){null===Bn?Cn.matrixWorld.copy(Cn.matrix):Cn.matrixWorld.multiplyMatrices(Bn.matrixWorld,Cn.matrix),Cn.matrixWorldInverse.copy(Cn.matrixWorld).invert()}this.updateCamera=function(Cn){if(null===r)return;ot.near=Ae.near=ye.near=Cn.near,ot.far=Ae.far=ye.far=Cn.far,(Mt!==ot.near||Xe!==ot.far)&&(r.updateRenderState({depthNear:ot.near,depthFar:ot.far}),Mt=ot.near,Xe=ot.far);const Bn=Cn.parent,Wi=ot.cameras;Nn(ot,Bn);for(let Ji=0;Ji<Wi.length;Ji++)Nn(Wi[Ji],Bn);ot.matrixWorld.decompose(ot.position,ot.quaternion,ot.scale),Cn.matrix.copy(ot.matrix),Cn.matrix.decompose(Cn.position,Cn.quaternion,Cn.scale);const wi=Cn.children;for(let Ji=0,hr=wi.length;Ji<hr;Ji++)wi[Ji].updateMatrixWorld(!0);2===Wi.length?function An(Cn,Bn,Wi){Qn.setFromMatrixPosition(Bn.matrixWorld),Un.setFromMatrixPosition(Wi.matrixWorld);const wi=Qn.distanceTo(Un),Ji=Bn.projectionMatrix.elements,hr=Wi.projectionMatrix.elements,Is=Ji[14]/(Ji[10]-1),Si=Ji[14]/(Ji[10]+1),_s=(Ji[9]+1)/Ji[5],fs=(Ji[9]-1)/Ji[5],ps=(Ji[8]-1)/Ji[0],Mr=(hr[8]+1)/hr[0],Co=Is*ps,Vi=Is*Mr,Ri=wi/(-ps+Mr),xr=Ri*-ps;Bn.matrixWorld.decompose(Cn.position,Cn.quaternion,Cn.scale),Cn.translateX(xr),Cn.translateZ(Ri),Cn.matrixWorld.compose(Cn.position,Cn.quaternion,Cn.scale),Cn.matrixWorldInverse.copy(Cn.matrixWorld).invert();const ls=Is+Ri,Pr=Si+Ri;Cn.projectionMatrix.makePerspective(Co-xr,Vi+(wi-xr),_s*Si/Pr*ls,fs*Si/Pr*ls,ls,Pr)}(ot,ye,Ae):ot.projectionMatrix.copy(ye.projectionMatrix)},this.getCamera=function(){return ot},this.getFoveation=function(){return null!==x?x.fixedFoveation:null!==I?I.fixedFoveation:void 0},this.setFoveation=function(Cn){null!==x&&(x.fixedFoveation=Cn),null!==I&&void 0!==I.fixedFoveation&&(I.fixedFoveation=Cn)};let _n=null;const Fn=new k5;Fn.setAnimationLoop(function Vn(Cn,Bn){if(p=Bn.getViewerPose(u||o),M=Bn,null!==p){const Wi=p.views;null!==I&&(t.setRenderTargetFramebuffer(X,I.framebuffer),t.setRenderTarget(X));let wi=!1;Wi.length!==ot.cameras.length&&(ot.cameras.length=0,wi=!0);for(let Ji=0;Ji<Wi.length;Ji++){const hr=Wi[Ji];let Is=null;if(null!==I)Is=I.getViewport(hr);else{const _s=v.getViewSubImage(x,hr);Is=_s.viewport,0===Ji&&(t.setRenderTargetTextures(X,_s.colorTexture,x.ignoreDepthValues?void 0:_s.depthStencilTexture),t.setRenderTarget(X))}let Si=We[Ji];void 0===Si&&(Si=new Jh,Si.layers.enable(Ji),Si.viewport=new hl,We[Ji]=Si),Si.matrix.fromArray(hr.transform.matrix),Si.projectionMatrix.fromArray(hr.projectionMatrix),Si.viewport.set(Is.x,Is.y,Is.width,Is.height),0===Ji&&ot.matrix.copy(Si.matrix),!0===wi&&ot.cameras.push(Si)}}for(let Wi=0;Wi<ce.length;Wi++){const wi=we[Wi],Ji=ce[Wi];null!==wi&&void 0!==Ji&&Ji.update(wi,Bn,u||o)}_n&&_n(Cn,Bn),M=null}),this.setAnimationLoop=function(Cn){_n=Cn},this.dispose=function(){}}}function z0e(i,t){function r(j,X){j.opacity.value=X.opacity,X.color&&j.diffuse.value.copy(X.color),X.emissive&&j.emissive.value.copy(X.emissive).multiplyScalar(X.emissiveIntensity),X.map&&(j.map.value=X.map),X.alphaMap&&(j.alphaMap.value=X.alphaMap),X.bumpMap&&(j.bumpMap.value=X.bumpMap,j.bumpScale.value=X.bumpScale,1===X.side&&(j.bumpScale.value*=-1)),X.displacementMap&&(j.displacementMap.value=X.displacementMap,j.displacementScale.value=X.displacementScale,j.displacementBias.value=X.displacementBias),X.emissiveMap&&(j.emissiveMap.value=X.emissiveMap),X.normalMap&&(j.normalMap.value=X.normalMap,j.normalScale.value.copy(X.normalScale),1===X.side&&j.normalScale.value.negate()),X.specularMap&&(j.specularMap.value=X.specularMap),X.alphaTest>0&&(j.alphaTest.value=X.alphaTest);const ce=t.get(X).envMap;if(ce&&(j.envMap.value=ce,j.flipEnvMap.value=ce.isCubeTexture&&!1===ce.isRenderTargetTexture?-1:1,j.reflectivity.value=X.reflectivity,j.ior.value=X.ior,j.refractionRatio.value=X.refractionRatio),X.lightMap){j.lightMap.value=X.lightMap;const Ae=!0!==i.physicallyCorrectLights?Math.PI:1;j.lightMapIntensity.value=X.lightMapIntensity*Ae}let we,ye;X.aoMap&&(j.aoMap.value=X.aoMap,j.aoMapIntensity.value=X.aoMapIntensity),X.map?we=X.map:X.specularMap?we=X.specularMap:X.displacementMap?we=X.displacementMap:X.normalMap?we=X.normalMap:X.bumpMap?we=X.bumpMap:X.roughnessMap?we=X.roughnessMap:X.metalnessMap?we=X.metalnessMap:X.alphaMap?we=X.alphaMap:X.emissiveMap?we=X.emissiveMap:X.clearcoatMap?we=X.clearcoatMap:X.clearcoatNormalMap?we=X.clearcoatNormalMap:X.clearcoatRoughnessMap?we=X.clearcoatRoughnessMap:X.iridescenceMap?we=X.iridescenceMap:X.iridescenceThicknessMap?we=X.iridescenceThicknessMap:X.specularIntensityMap?we=X.specularIntensityMap:X.specularColorMap?we=X.specularColorMap:X.transmissionMap?we=X.transmissionMap:X.thicknessMap?we=X.thicknessMap:X.sheenColorMap?we=X.sheenColorMap:X.sheenRoughnessMap&&(we=X.sheenRoughnessMap),void 0!==we&&(we.isWebGLRenderTarget&&(we=we.texture),!0===we.matrixAutoUpdate&&we.updateMatrix(),j.uvTransform.value.copy(we.matrix)),X.aoMap?ye=X.aoMap:X.lightMap&&(ye=X.lightMap),void 0!==ye&&(ye.isWebGLRenderTarget&&(ye=ye.texture),!0===ye.matrixAutoUpdate&&ye.updateMatrix(),j.uv2Transform.value.copy(ye.matrix))}return{refreshFogUniforms:function e(j,X){j.fogColor.value.copy(X.color),X.isFog?(j.fogNear.value=X.near,j.fogFar.value=X.far):X.isFogExp2&&(j.fogDensity.value=X.density)},refreshMaterialUniforms:function n(j,X,ce,we,ye){X.isMeshBasicMaterial||X.isMeshLambertMaterial?r(j,X):X.isMeshToonMaterial?(r(j,X),function v(j,X){X.gradientMap&&(j.gradientMap.value=X.gradientMap)}(j,X)):X.isMeshPhongMaterial?(r(j,X),function p(j,X){j.specular.value.copy(X.specular),j.shininess.value=Math.max(X.shininess,1e-4)}(j,X)):X.isMeshStandardMaterial?(r(j,X),function x(j,X){j.roughness.value=X.roughness,j.metalness.value=X.metalness,X.roughnessMap&&(j.roughnessMap.value=X.roughnessMap),X.metalnessMap&&(j.metalnessMap.value=X.metalnessMap),t.get(X).envMap&&(j.envMapIntensity.value=X.envMapIntensity)}(j,X),X.isMeshPhysicalMaterial&&function I(j,X,ce){j.ior.value=X.ior,X.sheen>0&&(j.sheenColor.value.copy(X.sheenColor).multiplyScalar(X.sheen),j.sheenRoughness.value=X.sheenRoughness,X.sheenColorMap&&(j.sheenColorMap.value=X.sheenColorMap),X.sheenRoughnessMap&&(j.sheenRoughnessMap.value=X.sheenRoughnessMap)),X.clearcoat>0&&(j.clearcoat.value=X.clearcoat,j.clearcoatRoughness.value=X.clearcoatRoughness,X.clearcoatMap&&(j.clearcoatMap.value=X.clearcoatMap),X.clearcoatRoughnessMap&&(j.clearcoatRoughnessMap.value=X.clearcoatRoughnessMap),X.clearcoatNormalMap&&(j.clearcoatNormalScale.value.copy(X.clearcoatNormalScale),j.clearcoatNormalMap.value=X.clearcoatNormalMap,1===X.side&&j.clearcoatNormalScale.value.negate())),X.iridescence>0&&(j.iridescence.value=X.iridescence,j.iridescenceIOR.value=X.iridescenceIOR,j.iridescenceThicknessMinimum.value=X.iridescenceThicknessRange[0],j.iridescenceThicknessMaximum.value=X.iridescenceThicknessRange[1],X.iridescenceMap&&(j.iridescenceMap.value=X.iridescenceMap),X.iridescenceThicknessMap&&(j.iridescenceThicknessMap.value=X.iridescenceThicknessMap)),X.transmission>0&&(j.transmission.value=X.transmission,j.transmissionSamplerMap.value=ce.texture,j.transmissionSamplerSize.value.set(ce.width,ce.height),X.transmissionMap&&(j.transmissionMap.value=X.transmissionMap),j.thickness.value=X.thickness,X.thicknessMap&&(j.thicknessMap.value=X.thicknessMap),j.attenuationDistance.value=X.attenuationDistance,j.attenuationColor.value.copy(X.attenuationColor)),j.specularIntensity.value=X.specularIntensity,j.specularColor.value.copy(X.specularColor),X.specularIntensityMap&&(j.specularIntensityMap.value=X.specularIntensityMap),X.specularColorMap&&(j.specularColorMap.value=X.specularColorMap)}(j,X,ye)):X.isMeshMatcapMaterial?(r(j,X),function M(j,X){X.matcap&&(j.matcap.value=X.matcap)}(j,X)):X.isMeshDepthMaterial?r(j,X):X.isMeshDistanceMaterial?(r(j,X),function F(j,X){j.referencePosition.value.copy(X.referencePosition),j.nearDistance.value=X.nearDistance,j.farDistance.value=X.farDistance}(j,X)):X.isMeshNormalMaterial?r(j,X):X.isLineBasicMaterial?(function s(j,X){j.diffuse.value.copy(X.color),j.opacity.value=X.opacity}(j,X),X.isLineDashedMaterial&&function o(j,X){j.dashSize.value=X.dashSize,j.totalSize.value=X.dashSize+X.gapSize,j.scale.value=X.scale}(j,X)):X.isPointsMaterial?function l(j,X,ce,we){let ye;j.diffuse.value.copy(X.color),j.opacity.value=X.opacity,j.size.value=X.size*ce,j.scale.value=.5*we,X.map&&(j.map.value=X.map),X.alphaMap&&(j.alphaMap.value=X.alphaMap),X.alphaTest>0&&(j.alphaTest.value=X.alphaTest),X.map?ye=X.map:X.alphaMap&&(ye=X.alphaMap),void 0!==ye&&(!0===ye.matrixAutoUpdate&&ye.updateMatrix(),j.uvTransform.value.copy(ye.matrix))}(j,X,ce,we):X.isSpriteMaterial?function u(j,X){let ce;j.diffuse.value.copy(X.color),j.opacity.value=X.opacity,j.rotation.value=X.rotation,X.map&&(j.map.value=X.map),X.alphaMap&&(j.alphaMap.value=X.alphaMap),X.alphaTest>0&&(j.alphaTest.value=X.alphaTest),X.map?ce=X.map:X.alphaMap&&(ce=X.alphaMap),void 0!==ce&&(!0===ce.matrixAutoUpdate&&ce.updateMatrix(),j.uvTransform.value.copy(ce.matrix))}(j,X):X.isShadowMaterial?(j.color.value.copy(X.color),j.opacity.value=X.opacity):X.isShaderMaterial&&(X.uniformsNeedUpdate=!1)}}}function V0e(i,t,e,n){let r={},s={},o=[];const l=e.isWebGL2?i.getParameter(35375):0;function M(we,ye,Ae){const We=we.value;if(void 0===Ae[ye])return Ae[ye]="number"==typeof We?We:We.clone(),!0;if("number"==typeof We){if(Ae[ye]!==We)return Ae[ye]=We,!0}else{const ot=Ae[ye];if(!1===ot.equals(We))return ot.copy(We),!0}return!1}function j(we){const ye=we.value,Ae={boundary:0,storage:0};return"number"==typeof ye?(Ae.boundary=4,Ae.storage=4):ye.isVector2?(Ae.boundary=8,Ae.storage=8):ye.isVector3||ye.isColor?(Ae.boundary=16,Ae.storage=12):ye.isVector4?(Ae.boundary=16,Ae.storage=16):ye.isMatrix3?(Ae.boundary=48,Ae.storage=48):ye.isMatrix4?(Ae.boundary=64,Ae.storage=64):ye.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ye),Ae}function X(we){const ye=we.target;ye.removeEventListener("dispose",X);const Ae=o.indexOf(ye.__bindingPointIndex);o.splice(Ae,1),i.deleteBuffer(r[ye.id]),delete r[ye.id],delete s[ye.id]}return{bind:function u(we,ye){n.uniformBlockBinding(we,ye.program)},update:function p(we,ye){let Ae=r[we.id];void 0===Ae&&(function F(we){const ye=we.uniforms;let Ae=0;let ot=0;for(let Mt=0,Xe=ye.length;Mt<Xe;Mt++){const yt=ye[Mt],tn=j(yt);if(yt.__data=new Float32Array(tn.storage/Float32Array.BYTES_PER_ELEMENT),yt.__offset=Ae,Mt>0){ot=Ae%16;const zn=16-ot;0!==ot&&zn-tn.boundary<0&&(Ae+=16-ot,yt.__offset=Ae)}Ae+=tn.storage}ot=Ae%16,ot>0&&(Ae+=16-ot),we.__size=Ae,we.__cache={}}(we),Ae=function v(we){const ye=function x(){for(let we=0;we<l;we++)if(-1===o.indexOf(we))return o.push(we),we;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();we.__bindingPointIndex=ye;const Ae=i.createBuffer(),We=we.__size,ot=we.usage;return i.bindBuffer(35345,Ae),i.bufferData(35345,We,ot),i.bindBuffer(35345,null),i.bindBufferBase(35345,ye,Ae),Ae}(we),r[we.id]=Ae,we.addEventListener("dispose",X)),n.updateUBOMapping(we,ye.program);const ot=t.render.frame;s[we.id]!==ot&&(function I(we){const Ae=we.uniforms,We=we.__cache;i.bindBuffer(35345,r[we.id]);for(let ot=0,Mt=Ae.length;ot<Mt;ot++){const Xe=Ae[ot];if(!0===M(Xe,ot,We)){const yt=Xe.value,tn=Xe.__offset;"number"==typeof yt?(Xe.__data[0]=yt,i.bufferSubData(35345,tn,Xe.__data)):(Xe.value.isMatrix3?(Xe.__data[0]=Xe.value.elements[0],Xe.__data[1]=Xe.value.elements[1],Xe.__data[2]=Xe.value.elements[2],Xe.__data[3]=Xe.value.elements[0],Xe.__data[4]=Xe.value.elements[3],Xe.__data[5]=Xe.value.elements[4],Xe.__data[6]=Xe.value.elements[5],Xe.__data[7]=Xe.value.elements[0],Xe.__data[8]=Xe.value.elements[6],Xe.__data[9]=Xe.value.elements[7],Xe.__data[10]=Xe.value.elements[8],Xe.__data[11]=Xe.value.elements[0]):yt.toArray(Xe.__data),i.bufferSubData(35345,tn,Xe.__data))}}i.bindBuffer(35345,null)}(we),s[we.id]=ot)},dispose:function ce(){for(const we in r)i.deleteBuffer(r[we]);o=[],r={},s={}}}}function cG(i={}){this.isWebGLRenderer=!0;const t=void 0!==i.canvas?i.canvas:function U0e(){const i=Qw("canvas");return i.style.display="block",i}(),e=void 0!==i.context?i.context:null,n=void 0===i.depth||i.depth,r=void 0===i.stencil||i.stencil,s=void 0!==i.antialias&&i.antialias,o=void 0===i.premultipliedAlpha||i.premultipliedAlpha,l=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,u=void 0!==i.powerPreference?i.powerPreference:"default",p=void 0!==i.failIfMajorPerformanceCaveat&&i.failIfMajorPerformanceCaveat;let v;v=null!==e?e.getContextAttributes().alpha:void 0!==i.alpha&&i.alpha;let x=null,I=null;const M=[],F=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=P0,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const j=this;let X=!1,ce=0,we=0,ye=null,Ae=-1,We=null;const ot=new hl,Mt=new hl;let Xe=null,yt=t.width,tn=t.height,zn=1,Qn=null,Un=null;const An=new hl(0,0,yt,tn),Nn=new hl(0,0,yt,tn);let _n=!1;const Vn=new pP;let Fn=!1,Cn=!1,Bn=null;const Wi=new fo,wi=new Gi,Ji=new $t,hr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Is(){return null===ye?zn:1}let fs,ps,Mr,Co,Vi,Ri,xr,ls,Pr,po,Xs,Ns,jl,bl,rn,Nt,ai,ur,br,Br,Qs,Ur,ki,Ms,Si=e;function _s(Yt,Kn){for(let vi=0;vi<Yt.length;vi++){const Li=t.getContext(Yt[vi],Kn);if(null!==Li)return Li}return null}try{const Yt={alpha:!0,depth:n,stencil:r,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r146"),t.addEventListener("webglcontextlost",Us,!1),t.addEventListener("webglcontextrestored",Ds,!1),t.addEventListener("webglcontextcreationerror",wa,!1),null===Si){const Kn=["webgl2","webgl","experimental-webgl"];if(!0===j.isWebGL1Renderer&&Kn.shift(),Si=_s(Kn,Yt),null===Si)throw _s(Kn)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Si.getShaderPrecisionFormat&&(Si.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Yt){throw console.error("THREE.WebGLRenderer: "+Yt.message),Yt}function Ys(){fs=new e_e(Si),ps=new Xye(Si,fs,i),fs.init(ps),Ur=new k0e(Si,fs,ps),Mr=new P0e(Si,fs,ps),Co=new i_e,Vi=new C0e,Ri=new R0e(Si,fs,Mr,Vi,ps,Ur,Co),xr=new Kye(j),ls=new Jye(j),Pr=new $me(Si,ps),ki=new $ye(Si,fs,Pr,ps),po=new t_e(Si,Pr,Co,ki),Xs=new a_e(Si,po,Pr,Co),br=new o_e(Si,ps,Ri),Nt=new Yye(Vi),Ns=new _0e(j,xr,ls,fs,ps,ki,Nt),jl=new z0e(j,Vi),bl=new x0e,rn=new T0e(fs,ps),ur=new jye(j,xr,ls,Mr,Xs,v,o),ai=new L0e(j,Xs,ps),Ms=new V0e(Si,Co,ps,Mr),Br=new qye(Si,fs,Co,ps),Qs=new n_e(Si,fs,Co,ps),Co.programs=Ns.programs,j.capabilities=ps,j.extensions=fs,j.properties=Vi,j.renderLists=bl,j.shadowMap=ai,j.state=Mr,j.info=Co}Ys();const gs=new B0e(j,Si);function Us(Yt){Yt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),X=!0}function Ds(){console.log("THREE.WebGLRenderer: Context Restored."),X=!1;const Yt=Co.autoReset,Kn=ai.enabled,vi=ai.autoUpdate,Gn=ai.needsUpdate,Li=ai.type;Ys(),Co.autoReset=Yt,ai.enabled=Kn,ai.autoUpdate=vi,ai.needsUpdate=Gn,ai.type=Li}function wa(Yt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Yt.statusMessage)}function oc(Yt){const Kn=Yt.target;Kn.removeEventListener("dispose",oc),function xh(Yt){(function Tn(Yt){const Kn=Vi.get(Yt).programs;void 0!==Kn&&(Kn.forEach(function(vi){Ns.releaseProgram(vi)}),Yt.isShaderMaterial&&Ns.releaseShaderCache(Yt))})(Yt),Vi.remove(Yt)}(Kn)}this.xr=gs,this.getContext=function(){return Si},this.getContextAttributes=function(){return Si.getContextAttributes()},this.forceContextLoss=function(){const Yt=fs.get("WEBGL_lose_context");Yt&&Yt.loseContext()},this.forceContextRestore=function(){const Yt=fs.get("WEBGL_lose_context");Yt&&Yt.restoreContext()},this.getPixelRatio=function(){return zn},this.setPixelRatio=function(Yt){void 0!==Yt&&(zn=Yt,this.setSize(yt,tn,!1))},this.getSize=function(Yt){return Yt.set(yt,tn)},this.setSize=function(Yt,Kn,vi){gs.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(yt=Yt,tn=Kn,t.width=Math.floor(Yt*zn),t.height=Math.floor(Kn*zn),!1!==vi&&(t.style.width=Yt+"px",t.style.height=Kn+"px"),this.setViewport(0,0,Yt,Kn))},this.getDrawingBufferSize=function(Yt){return Yt.set(yt*zn,tn*zn).floor()},this.setDrawingBufferSize=function(Yt,Kn,vi){yt=Yt,tn=Kn,zn=vi,t.width=Math.floor(Yt*vi),t.height=Math.floor(Kn*vi),this.setViewport(0,0,Yt,Kn)},this.getCurrentViewport=function(Yt){return Yt.copy(ot)},this.getViewport=function(Yt){return Yt.copy(An)},this.setViewport=function(Yt,Kn,vi,Gn){Yt.isVector4?An.set(Yt.x,Yt.y,Yt.z,Yt.w):An.set(Yt,Kn,vi,Gn),Mr.viewport(ot.copy(An).multiplyScalar(zn).floor())},this.getScissor=function(Yt){return Yt.copy(Nn)},this.setScissor=function(Yt,Kn,vi,Gn){Yt.isVector4?Nn.set(Yt.x,Yt.y,Yt.z,Yt.w):Nn.set(Yt,Kn,vi,Gn),Mr.scissor(Mt.copy(Nn).multiplyScalar(zn).floor())},this.getScissorTest=function(){return _n},this.setScissorTest=function(Yt){Mr.setScissorTest(_n=Yt)},this.setOpaqueSort=function(Yt){Qn=Yt},this.setTransparentSort=function(Yt){Un=Yt},this.getClearColor=function(Yt){return Yt.copy(ur.getClearColor())},this.setClearColor=function(){ur.setClearColor.apply(ur,arguments)},this.getClearAlpha=function(){return ur.getClearAlpha()},this.setClearAlpha=function(){ur.setClearAlpha.apply(ur,arguments)},this.clear=function(Yt=!0,Kn=!0,vi=!0){let Gn=0;Yt&&(Gn|=16384),Kn&&(Gn|=256),vi&&(Gn|=1024),Si.clear(Gn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Us,!1),t.removeEventListener("webglcontextrestored",Ds,!1),t.removeEventListener("webglcontextcreationerror",wa,!1),bl.dispose(),rn.dispose(),Vi.dispose(),xr.dispose(),ls.dispose(),Xs.dispose(),ki.dispose(),Ms.dispose(),Ns.dispose(),gs.dispose(),gs.removeEventListener("sessionstart",Xr),gs.removeEventListener("sessionend",Cs),Bn&&(Bn.dispose(),Bn=null),Wa.stop()},this.renderBufferDirect=function(Yt,Kn,vi,Gn,Li,ks){null===Kn&&(Kn=hr);const ro=Li.isMesh&&Li.matrixWorld.determinant()<0,Bo=function mEe(Yt,Kn,vi,Gn,Li){!0!==Kn.isScene&&(Kn=hr),Ri.resetTextureUnits();const ks=Kn.fog,Bo=null===ye?j.outputEncoding:!0===ye.isXRRenderTarget?ye.texture.encoding:P0,Mo=(Gn.isMeshStandardMaterial?ls:xr).get(Gn.envMap||(Gn.isMeshStandardMaterial?Kn.environment:null)),ja=!0===Gn.vertexColors&&!!vi.attributes.color&&4===vi.attributes.color.itemSize,Qo=!!Gn.normalMap&&!!vi.attributes.tangent,pa=!!vi.morphAttributes.position,Yc=!!vi.morphAttributes.normal,rC=!!vi.morphAttributes.color,Qb=Gn.toneMapped?j.toneMapping:0,Jb=vi.morphAttributes.position||vi.morphAttributes.normal||vi.morphAttributes.color,fv=void 0!==Jb?Jb.length:0,$a=Vi.get(Gn),ex=I.state.lights;!0!==Fn||!0!==Cn&&Yt===We||Nt.setState(Gn,Yt,Yt===We&&Gn.id===Ae);let Du=!1;Gn.version===$a.__version?($a.needsLights&&$a.lightsStateVersion!==ex.state.version||$a.outputEncoding!==Bo||Li.isInstancedMesh&&!1===$a.instancing||!Li.isInstancedMesh&&!0===$a.instancing||Li.isSkinnedMesh&&!1===$a.skinning||!Li.isSkinnedMesh&&!0===$a.skinning||$a.envMap!==Mo||!0===Gn.fog&&$a.fog!==ks||void 0!==$a.numClippingPlanes&&($a.numClippingPlanes!==Nt.numPlanes||$a.numIntersection!==Nt.numIntersection)||$a.vertexAlphas!==ja||$a.vertexTangents!==Qo||$a.morphTargets!==pa||$a.morphNormals!==Yc||$a.morphColors!==rC||$a.toneMapping!==Qb||!0===ps.isWebGL2&&$a.morphTargetsCount!==fv)&&(Du=!0):(Du=!0,$a.__version=Gn.version);let Eg=$a.currentProgram;!0===Du&&(Eg=Sg(Gn,Kn,Li));let L_=!1,AA=!1,kR=!1;const uf=Eg.getUniforms(),sC=$a.uniforms;if(Mr.useProgram(Eg.program)&&(L_=!0,AA=!0,kR=!0),Gn.id!==Ae&&(Ae=Gn.id,AA=!0),L_||We!==Yt){if(uf.setValue(Si,"projectionMatrix",Yt.projectionMatrix),ps.logarithmicDepthBuffer&&uf.setValue(Si,"logDepthBufFC",2/(Math.log(Yt.far+1)/Math.LN2)),We!==Yt&&(We=Yt,AA=!0,kR=!0),Gn.isShaderMaterial||Gn.isMeshPhongMaterial||Gn.isMeshToonMaterial||Gn.isMeshStandardMaterial||Gn.envMap){const Bp=uf.map.cameraPosition;void 0!==Bp&&Bp.setValue(Si,Ji.setFromMatrixPosition(Yt.matrixWorld))}(Gn.isMeshPhongMaterial||Gn.isMeshToonMaterial||Gn.isMeshLambertMaterial||Gn.isMeshBasicMaterial||Gn.isMeshStandardMaterial||Gn.isShaderMaterial)&&uf.setValue(Si,"isOrthographic",!0===Yt.isOrthographicCamera),(Gn.isMeshPhongMaterial||Gn.isMeshToonMaterial||Gn.isMeshLambertMaterial||Gn.isMeshBasicMaterial||Gn.isMeshStandardMaterial||Gn.isShaderMaterial||Gn.isShadowMaterial||Li.isSkinnedMesh)&&uf.setValue(Si,"viewMatrix",Yt.matrixWorldInverse)}if(Li.isSkinnedMesh){uf.setOptional(Si,Li,"bindMatrix"),uf.setOptional(Si,Li,"bindMatrixInverse");const Bp=Li.skeleton;Bp&&(ps.floatVertexTextures?(null===Bp.boneTexture&&Bp.computeBoneTexture(),uf.setValue(Si,"boneTexture",Bp.boneTexture,Ri),uf.setValue(Si,"boneTextureSize",Bp.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const OR=vi.morphAttributes;if((void 0!==OR.position||void 0!==OR.normal||void 0!==OR.color&&!0===ps.isWebGL2)&&br.update(Li,vi,Gn,Eg),(AA||$a.receiveShadow!==Li.receiveShadow)&&($a.receiveShadow=Li.receiveShadow,uf.setValue(Si,"receiveShadow",Li.receiveShadow)),Gn.isMeshGouraudMaterial&&null!==Gn.envMap&&(sC.envMap.value=Mo,sC.flipEnvMap.value=Mo.isCubeTexture&&!1===Mo.isRenderTargetTexture?-1:1),AA&&(uf.setValue(Si,"toneMappingExposure",j.toneMappingExposure),$a.needsLights&&function vEe(Yt,Kn){Yt.ambientLightColor.needsUpdate=Kn,Yt.lightProbe.needsUpdate=Kn,Yt.directionalLights.needsUpdate=Kn,Yt.directionalLightShadows.needsUpdate=Kn,Yt.pointLights.needsUpdate=Kn,Yt.pointLightShadows.needsUpdate=Kn,Yt.spotLights.needsUpdate=Kn,Yt.spotLightShadows.needsUpdate=Kn,Yt.rectAreaLights.needsUpdate=Kn,Yt.hemisphereLights.needsUpdate=Kn}(sC,kR),ks&&!0===Gn.fog&&jl.refreshFogUniforms(sC,ks),jl.refreshMaterialUniforms(sC,Gn,zn,tn,Bn),iE.upload(Si,$a.uniformsList,sC,Ri)),Gn.isShaderMaterial&&!0===Gn.uniformsNeedUpdate&&(iE.upload(Si,$a.uniformsList,sC,Ri),Gn.uniformsNeedUpdate=!1),Gn.isSpriteMaterial&&uf.setValue(Si,"center",Li.center),uf.setValue(Si,"modelViewMatrix",Li.modelViewMatrix),uf.setValue(Si,"normalMatrix",Li.normalMatrix),uf.setValue(Si,"modelMatrix",Li.matrixWorld),Gn.isShaderMaterial||Gn.isRawShaderMaterial){const Bp=Gn.uniformsGroups;for(let FR=0,_Ee=Bp.length;FR<_Ee;FR++)if(ps.isWebGL2){const C6=Bp[FR];Ms.update(C6,Eg),Ms.bind(C6,Eg)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Eg}(Yt,Kn,vi,Gn,Li);Mr.setMaterial(Gn,ro);let Mo=vi.index;const ja=vi.attributes.position;if(null===Mo){if(void 0===ja||0===ja.count)return}else if(0===Mo.count)return;let Qo=1;!0===Gn.wireframe&&(Mo=po.getWireframeAttribute(vi),Qo=2),ki.setup(Li,Gn,Bo,vi,Mo);let pa,Yc=Br;null!==Mo&&(pa=Pr.get(Mo),Yc=Qs,Yc.setIndex(pa));const rC=null!==Mo?Mo.count:ja.count,Qb=vi.drawRange.start*Qo,Jb=vi.drawRange.count*Qo,fv=null!==ks?ks.start*Qo:0,$a=null!==ks?ks.count*Qo:1/0,ex=Math.max(Qb,fv),Du=Math.min(rC,Qb+Jb,fv+$a)-1,Eg=Math.max(0,Du-ex+1);if(0!==Eg){if(Li.isMesh)!0===Gn.wireframe?(Mr.setLineWidth(Gn.wireframeLinewidth*Is()),Yc.setMode(1)):Yc.setMode(4);else if(Li.isLine){let L_=Gn.linewidth;void 0===L_&&(L_=1),Mr.setLineWidth(L_*Is()),Yc.setMode(Li.isLineSegments?1:Li.isLineLoop?2:3)}else Li.isPoints?Yc.setMode(0):Li.isSprite&&Yc.setMode(4);if(Li.isInstancedMesh)Yc.renderInstances(ex,Eg,Li.count);else if(vi.isInstancedBufferGeometry){const L_=Math.min(vi.instanceCount,vi._maxInstanceCount);Yc.renderInstances(ex,Eg,L_)}else Yc.render(ex,Eg)}},this.compile=function(Yt,Kn){function vi(Gn,Li,ks){!0===Gn.transparent&&2===Gn.side?(Gn.side=1,Gn.needsUpdate=!0,Sg(Gn,Li,ks),Gn.side=0,Gn.needsUpdate=!0,Sg(Gn,Li,ks),Gn.side=2):Sg(Gn,Li,ks)}I=rn.get(Yt),I.init(),F.push(I),Yt.traverseVisible(function(Gn){Gn.isLight&&Gn.layers.test(Kn.layers)&&(I.pushLight(Gn),Gn.castShadow&&I.pushShadow(Gn))}),I.setupLights(j.physicallyCorrectLights),Yt.traverse(function(Gn){const Li=Gn.material;if(Li)if(Array.isArray(Li))for(let ks=0;ks<Li.length;ks++)vi(Li[ks],Yt,Gn);else vi(Li,Yt,Gn)}),F.pop(),I=null};let bi=null;function Xr(){Wa.stop()}function Cs(){Wa.start()}const Wa=new k5;function wh(Yt,Kn,vi,Gn){if(!1===Yt.visible)return;if(Yt.layers.test(Kn.layers))if(Yt.isGroup)vi=Yt.renderOrder;else if(Yt.isLOD)!0===Yt.autoUpdate&&Yt.update(Kn);else if(Yt.isLight)I.pushLight(Yt),Yt.castShadow&&I.pushShadow(Yt);else if(Yt.isSprite){if(!Yt.frustumCulled||Vn.intersectsSprite(Yt)){Gn&&Ji.setFromMatrixPosition(Yt.matrixWorld).applyMatrix4(Wi);const ro=Xs.update(Yt),Bo=Yt.material;Bo.visible&&x.push(Yt,ro,Bo,vi,Ji.z,null)}}else if((Yt.isMesh||Yt.isLine||Yt.isPoints)&&(Yt.isSkinnedMesh&&Yt.skeleton.frame!==Co.render.frame&&(Yt.skeleton.update(),Yt.skeleton.frame=Co.render.frame),!Yt.frustumCulled||Vn.intersectsObject(Yt))){Gn&&Ji.setFromMatrixPosition(Yt.matrixWorld).applyMatrix4(Wi);const ro=Xs.update(Yt),Bo=Yt.material;if(Array.isArray(Bo)){const Mo=ro.groups;for(let ja=0,Qo=Mo.length;ja<Qo;ja++){const pa=Mo[ja],Yc=Bo[pa.materialIndex];Yc&&Yc.visible&&x.push(Yt,ro,Yc,vi,Ji.z,pa)}}else Bo.visible&&x.push(Yt,ro,Bo,vi,Ji.z,null)}const ks=Yt.children;for(let ro=0,Bo=ks.length;ro<Bo;ro++)wh(ks[ro],Kn,vi,Gn)}function Dd(Yt,Kn,vi,Gn){const Li=Yt.opaque,ks=Yt.transmissive,ro=Yt.transparent;I.setupLightsView(vi),ks.length>0&&function iC(Yt,Kn,vi){const Gn=ps.isWebGL2;null===Bn&&(Bn=new N0(1,1,{generateMipmaps:!0,type:fs.has("EXT_color_buffer_half_float")?Yw:M0,minFilter:1008,samples:Gn&&!0===s?4:0})),j.getDrawingBufferSize(wi),Gn?Bn.setSize(wi.x,wi.y):Bn.setSize(PS(wi.x),PS(wi.y));const Li=j.getRenderTarget();j.setRenderTarget(Bn),j.clear();const ks=j.toneMapping;j.toneMapping=0,ac(Yt,Kn,vi),j.toneMapping=ks,Ri.updateMultisampleRenderTarget(Bn),Ri.updateRenderTargetMipmap(Bn),j.setRenderTarget(Li)}(Li,Kn,vi),Gn&&Mr.viewport(ot.copy(Gn)),Li.length>0&&ac(Li,Kn,vi),ks.length>0&&ac(ks,Kn,vi),ro.length>0&&ac(ro,Kn,vi),Mr.buffers.depth.setTest(!0),Mr.buffers.depth.setMask(!0),Mr.buffers.color.setMask(!0),Mr.setPolygonOffset(!1)}function ac(Yt,Kn,vi){const Gn=!0===Kn.isScene?Kn.overrideMaterial:null;for(let Li=0,ks=Yt.length;Li<ks;Li++){const ro=Yt[Li],Bo=ro.object,Mo=ro.geometry,ja=null===Gn?ro.material:Gn,Qo=ro.group;Bo.layers.test(vi.layers)&&wy(Bo,Kn,vi,Mo,ja,Qo)}}function wy(Yt,Kn,vi,Gn,Li,ks){Yt.onBeforeRender(j,Kn,vi,Gn,Li,ks),Yt.modelViewMatrix.multiplyMatrices(vi.matrixWorldInverse,Yt.matrixWorld),Yt.normalMatrix.getNormalMatrix(Yt.modelViewMatrix),Li.onBeforeRender(j,Kn,vi,Gn,Yt,ks),!0===Li.transparent&&2===Li.side?(Li.side=1,Li.needsUpdate=!0,j.renderBufferDirect(vi,Kn,Gn,Li,Yt,ks),Li.side=0,Li.needsUpdate=!0,j.renderBufferDirect(vi,Kn,Gn,Li,Yt,ks),Li.side=2):j.renderBufferDirect(vi,Kn,Gn,Li,Yt,ks),Yt.onAfterRender(j,Kn,vi,Gn,Li,ks)}function Sg(Yt,Kn,vi){!0!==Kn.isScene&&(Kn=hr);const Gn=Vi.get(Yt),Li=I.state.lights,ro=Li.state.version,Bo=Ns.getParameters(Yt,Li.state,I.state.shadowsArray,Kn,vi),Mo=Ns.getProgramCacheKey(Bo);let ja=Gn.programs;Gn.environment=Yt.isMeshStandardMaterial?Kn.environment:null,Gn.fog=Kn.fog,Gn.envMap=(Yt.isMeshStandardMaterial?ls:xr).get(Yt.envMap||Gn.environment),void 0===ja&&(Yt.addEventListener("dispose",oc),ja=new Map,Gn.programs=ja);let Qo=ja.get(Mo);if(void 0!==Qo){if(Gn.currentProgram===Qo&&Gn.lightsStateVersion===ro)return _6(Yt,Bo),Qo}else Bo.uniforms=Ns.getUniforms(Yt),Yt.onBuild(vi,Bo,j),Yt.onBeforeCompile(Bo,j),Qo=Ns.acquireProgram(Bo,Mo),ja.set(Mo,Qo),Gn.uniforms=Bo.uniforms;const pa=Gn.uniforms;(!Yt.isShaderMaterial&&!Yt.isRawShaderMaterial||!0===Yt.clipping)&&(pa.clippingPlanes=Nt.uniform),_6(Yt,Bo),Gn.needsLights=function yEe(Yt){return Yt.isMeshLambertMaterial||Yt.isMeshToonMaterial||Yt.isMeshPhongMaterial||Yt.isMeshStandardMaterial||Yt.isShadowMaterial||Yt.isShaderMaterial&&!0===Yt.lights}(Yt),Gn.lightsStateVersion=ro,Gn.needsLights&&(pa.ambientLightColor.value=Li.state.ambient,pa.lightProbe.value=Li.state.probe,pa.directionalLights.value=Li.state.directional,pa.directionalLightShadows.value=Li.state.directionalShadow,pa.spotLights.value=Li.state.spot,pa.spotLightShadows.value=Li.state.spotShadow,pa.rectAreaLights.value=Li.state.rectArea,pa.ltc_1.value=Li.state.rectAreaLTC1,pa.ltc_2.value=Li.state.rectAreaLTC2,pa.pointLights.value=Li.state.point,pa.pointLightShadows.value=Li.state.pointShadow,pa.hemisphereLights.value=Li.state.hemi,pa.directionalShadowMap.value=Li.state.directionalShadowMap,pa.directionalShadowMatrix.value=Li.state.directionalShadowMatrix,pa.spotShadowMap.value=Li.state.spotShadowMap,pa.spotLightMatrix.value=Li.state.spotLightMatrix,pa.spotLightMap.value=Li.state.spotLightMap,pa.pointShadowMap.value=Li.state.pointShadowMap,pa.pointShadowMatrix.value=Li.state.pointShadowMatrix);const Yc=Qo.getUniforms(),rC=iE.seqWithValue(Yc.seq,pa);return Gn.currentProgram=Qo,Gn.uniformsList=rC,Qo}function _6(Yt,Kn){const vi=Vi.get(Yt);vi.outputEncoding=Kn.outputEncoding,vi.instancing=Kn.instancing,vi.skinning=Kn.skinning,vi.morphTargets=Kn.morphTargets,vi.morphNormals=Kn.morphNormals,vi.morphColors=Kn.morphColors,vi.morphTargetsCount=Kn.morphTargetsCount,vi.numClippingPlanes=Kn.numClippingPlanes,vi.numIntersection=Kn.numClipIntersection,vi.vertexAlphas=Kn.vertexAlphas,vi.vertexTangents=Kn.vertexTangents,vi.toneMapping=Kn.toneMapping}Wa.setAnimationLoop(function lr(Yt){bi&&bi(Yt)}),typeof self<"u"&&Wa.setContext(self),this.setAnimationLoop=function(Yt){bi=Yt,gs.setAnimationLoop(Yt),null===Yt?Wa.stop():Wa.start()},gs.addEventListener("sessionstart",Xr),gs.addEventListener("sessionend",Cs),this.render=function(Yt,Kn){if(void 0===Kn||!0===Kn.isCamera){if(!0!==X){if(!0===Yt.matrixWorldAutoUpdate&&Yt.updateMatrixWorld(),null===Kn.parent&&!0===Kn.matrixWorldAutoUpdate&&Kn.updateMatrixWorld(),!0===gs.enabled&&!0===gs.isPresenting&&(!0===gs.cameraAutoUpdate&&gs.updateCamera(Kn),Kn=gs.getCamera()),!0===Yt.isScene&&Yt.onBeforeRender(j,Yt,Kn,ye),I=rn.get(Yt,F.length),I.init(),F.push(I),Wi.multiplyMatrices(Kn.projectionMatrix,Kn.matrixWorldInverse),Vn.setFromProjectionMatrix(Wi),Cn=this.localClippingEnabled,Fn=Nt.init(this.clippingPlanes,Cn,Kn),x=bl.get(Yt,M.length),x.init(),M.push(x),wh(Yt,Kn,0,j.sortObjects),x.finish(),!0===j.sortObjects&&x.sort(Qn,Un),!0===Fn&&Nt.beginShadows(),ai.render(I.state.shadowsArray,Yt,Kn),!0===Fn&&Nt.endShadows(),!0===this.info.autoReset&&this.info.reset(),ur.render(x,Yt),I.setupLights(j.physicallyCorrectLights),Kn.isArrayCamera){const Gn=Kn.cameras;for(let Li=0,ks=Gn.length;Li<ks;Li++){const ro=Gn[Li];Dd(x,Yt,ro,ro.viewport)}}else Dd(x,Yt,Kn);null!==ye&&(Ri.updateMultisampleRenderTarget(ye),Ri.updateRenderTargetMipmap(ye)),!0===Yt.isScene&&Yt.onAfterRender(j,Yt,Kn),ki.resetDefaultState(),Ae=-1,We=null,F.pop(),I=F.length>0?F[F.length-1]:null,M.pop(),x=M.length>0?M[M.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return ce},this.getActiveMipmapLevel=function(){return we},this.getRenderTarget=function(){return ye},this.setRenderTargetTextures=function(Yt,Kn,vi){Vi.get(Yt.texture).__webglTexture=Kn,Vi.get(Yt.depthTexture).__webglTexture=vi;const Gn=Vi.get(Yt);Gn.__hasExternalTextures=!0,Gn.__hasExternalTextures&&(Gn.__autoAllocateDepthBuffer=void 0===vi,Gn.__autoAllocateDepthBuffer||!0===fs.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Gn.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Yt,Kn){const vi=Vi.get(Yt);vi.__webglFramebuffer=Kn,vi.__useDefaultFramebuffer=void 0===Kn},this.setRenderTarget=function(Yt,Kn=0,vi=0){ye=Yt,ce=Kn,we=vi;let Gn=!0,Li=null,ks=!1,ro=!1;if(Yt){const Mo=Vi.get(Yt);void 0!==Mo.__useDefaultFramebuffer?(Mr.bindFramebuffer(36160,null),Gn=!1):void 0===Mo.__webglFramebuffer?Ri.setupRenderTarget(Yt):Mo.__hasExternalTextures&&Ri.rebindTextures(Yt,Vi.get(Yt.texture).__webglTexture,Vi.get(Yt.depthTexture).__webglTexture);const ja=Yt.texture;(ja.isData3DTexture||ja.isDataArrayTexture||ja.isCompressedArrayTexture)&&(ro=!0);const Qo=Vi.get(Yt).__webglFramebuffer;Yt.isWebGLCubeRenderTarget?(Li=Qo[Kn],ks=!0):Li=ps.isWebGL2&&Yt.samples>0&&!1===Ri.useMultisampledRTT(Yt)?Vi.get(Yt).__webglMultisampledFramebuffer:Qo,ot.copy(Yt.viewport),Mt.copy(Yt.scissor),Xe=Yt.scissorTest}else ot.copy(An).multiplyScalar(zn).floor(),Mt.copy(Nn).multiplyScalar(zn).floor(),Xe=_n;if(Mr.bindFramebuffer(36160,Li)&&ps.drawBuffers&&Gn&&Mr.drawBuffers(Yt,Li),Mr.viewport(ot),Mr.scissor(Mt),Mr.setScissorTest(Xe),ks){const Mo=Vi.get(Yt.texture);Si.framebufferTexture2D(36160,36064,34069+Kn,Mo.__webglTexture,vi)}else if(ro){const Mo=Vi.get(Yt.texture);Si.framebufferTextureLayer(36160,36064,Mo.__webglTexture,vi||0,Kn||0)}Ae=-1},this.readRenderTargetPixels=function(Yt,Kn,vi,Gn,Li,ks,ro){if(!Yt||!Yt.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Bo=Vi.get(Yt).__webglFramebuffer;if(Yt.isWebGLCubeRenderTarget&&void 0!==ro&&(Bo=Bo[ro]),Bo){Mr.bindFramebuffer(36160,Bo);try{const Mo=Yt.texture,ja=Mo.format,Qo=Mo.type;if(ja!==bg&&Ur.convert(ja)!==Si.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const pa=Qo===Yw&&(fs.has("EXT_color_buffer_half_float")||ps.isWebGL2&&fs.has("EXT_color_buffer_float"));if(!(Qo===M0||Ur.convert(Qo)===Si.getParameter(35738)||Qo===g_&&(ps.isWebGL2||fs.has("OES_texture_float")||fs.has("WEBGL_color_buffer_float"))||pa))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Kn>=0&&Kn<=Yt.width-Gn&&vi>=0&&vi<=Yt.height-Li&&Si.readPixels(Kn,vi,Gn,Li,Ur.convert(ja),Ur.convert(Qo),ks)}finally{const Mo=null!==ye?Vi.get(ye).__webglFramebuffer:null;Mr.bindFramebuffer(36160,Mo)}}},this.copyFramebufferToTexture=function(Yt,Kn,vi=0){const Gn=Math.pow(2,-vi),Li=Math.floor(Kn.image.width*Gn),ks=Math.floor(Kn.image.height*Gn);Ri.setTexture2D(Kn,0),Si.copyTexSubImage2D(3553,vi,0,0,Yt.x,Yt.y,Li,ks),Mr.unbindTexture()},this.copyTextureToTexture=function(Yt,Kn,vi,Gn=0){const Li=Kn.image.width,ks=Kn.image.height,ro=Ur.convert(vi.format),Bo=Ur.convert(vi.type);Ri.setTexture2D(vi,0),Si.pixelStorei(37440,vi.flipY),Si.pixelStorei(37441,vi.premultiplyAlpha),Si.pixelStorei(3317,vi.unpackAlignment),Kn.isDataTexture?Si.texSubImage2D(3553,Gn,Yt.x,Yt.y,Li,ks,ro,Bo,Kn.image.data):Kn.isCompressedTexture?Si.compressedTexSubImage2D(3553,Gn,Yt.x,Yt.y,Kn.mipmaps[0].width,Kn.mipmaps[0].height,ro,Kn.mipmaps[0].data):Si.texSubImage2D(3553,Gn,Yt.x,Yt.y,ro,Bo,Kn.image),0===Gn&&vi.generateMipmaps&&Si.generateMipmap(3553),Mr.unbindTexture()},this.copyTextureToTexture3D=function(Yt,Kn,vi,Gn,Li=0){if(j.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const ks=Yt.max.x-Yt.min.x+1,ro=Yt.max.y-Yt.min.y+1,Bo=Yt.max.z-Yt.min.z+1,Mo=Ur.convert(Gn.format),ja=Ur.convert(Gn.type);let Qo;if(Gn.isData3DTexture)Ri.setTexture3D(Gn,0),Qo=32879;else{if(!Gn.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Ri.setTexture2DArray(Gn,0),Qo=35866}Si.pixelStorei(37440,Gn.flipY),Si.pixelStorei(37441,Gn.premultiplyAlpha),Si.pixelStorei(3317,Gn.unpackAlignment);const pa=Si.getParameter(3314),Yc=Si.getParameter(32878),rC=Si.getParameter(3316),Qb=Si.getParameter(3315),Jb=Si.getParameter(32877),fv=vi.isCompressedTexture?vi.mipmaps[0]:vi.image;Si.pixelStorei(3314,fv.width),Si.pixelStorei(32878,fv.height),Si.pixelStorei(3316,Yt.min.x),Si.pixelStorei(3315,Yt.min.y),Si.pixelStorei(32877,Yt.min.z),vi.isDataTexture||vi.isData3DTexture?Si.texSubImage3D(Qo,Li,Kn.x,Kn.y,Kn.z,ks,ro,Bo,Mo,ja,fv.data):vi.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Si.compressedTexSubImage3D(Qo,Li,Kn.x,Kn.y,Kn.z,ks,ro,Bo,Mo,fv.data)):Si.texSubImage3D(Qo,Li,Kn.x,Kn.y,Kn.z,ks,ro,Bo,Mo,ja,fv),Si.pixelStorei(3314,pa),Si.pixelStorei(32878,Yc),Si.pixelStorei(3316,rC),Si.pixelStorei(3315,Qb),Si.pixelStorei(32877,Jb),0===Li&&Gn.generateMipmaps&&Si.generateMipmap(Qo),Mr.unbindTexture()},this.initTexture=function(Yt){Yt.isCubeTexture?Ri.setTextureCube(Yt,0):Yt.isData3DTexture?Ri.setTexture3D(Yt,0):Yt.isDataArrayTexture||Yt.isCompressedArrayTexture?Ri.setTexture2DArray(Yt,0):Ri.setTexture2D(Yt,0),Mr.unbindTexture()},this.resetState=function(){ce=0,we=0,ye=null,Mr.reset(),ki.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class H0e extends cG{}).prototype.isWebGL1Renderer=!0;class uG extends Uf{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.backgroundBlurriness=this.backgroundBlurriness),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}}class Hf extends U0{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Jr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const IG=new $t,SG=new $t,EG=new fo,SP=new VS,cE=new Ib;class uA extends Uf{constructor(t=new No,e=new Hf){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)IG.fromBufferAttribute(e,r-1),SG.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=IG.distanceTo(SG);t.setAttribute("lineDistance",new os(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),cE.copy(n.boundingSphere),cE.applyMatrix4(r),cE.radius+=s,!1===t.ray.intersectsSphere(cE))return;EG.copy(r).invert(),SP.copy(t.ray).applyMatrix4(EG);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,p=new $t,v=new $t,x=new $t,I=new $t,M=this.isLineSegments?2:1,F=n.index,X=n.attributes.position;if(null!==F)for(let ye=Math.max(0,o.start),Ae=Math.min(F.count,o.start+o.count)-1;ye<Ae;ye+=M){const We=F.getX(ye),ot=F.getX(ye+1);if(p.fromBufferAttribute(X,We),v.fromBufferAttribute(X,ot),SP.distanceSqToSegment(p,v,I,x)>u)continue;I.applyMatrix4(this.matrixWorld);const Xe=t.ray.origin.distanceTo(I);Xe<t.near||Xe>t.far||e.push({distance:Xe,point:x.clone().applyMatrix4(this.matrixWorld),index:ye,face:null,faceIndex:null,object:this})}else for(let ye=Math.max(0,o.start),Ae=Math.min(X.count,o.start+o.count)-1;ye<Ae;ye+=M){if(p.fromBufferAttribute(X,ye),v.fromBufferAttribute(X,ye+1),SP.distanceSqToSegment(p,v,I,x)>u)continue;I.applyMatrix4(this.matrixWorld);const ot=t.ray.origin.distanceTo(I);ot<t.near||ot>t.far||e.push({distance:ot,point:x.clone().applyMatrix4(this.matrixWorld),index:ye,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}class uv{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let p,l=0,u=s-1;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),p=n[r]-o,p<0)l=r+1;else{if(!(p>0)){u=r;break}u=r-1}if(r=u,n[r]===o)return r/(s-1);const v=n[r];return(r+(o-v)/(n[r+1]-v))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),l=this.getPoint(s),u=e||(o.isVector2?new Gi:new $t);return u.copy(l).sub(o).normalize(),u}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new $t,r=[],s=[],o=[],l=new $t,u=new fo;for(let M=0;M<=t;M++)r[M]=this.getTangentAt(M/t,new $t);s[0]=new $t,o[0]=new $t;let p=Number.MAX_VALUE;const v=Math.abs(r[0].x),x=Math.abs(r[0].y),I=Math.abs(r[0].z);v<=p&&(p=v,n.set(1,0,0)),x<=p&&(p=x,n.set(0,1,0)),I<=p&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],l),o[0].crossVectors(r[0],s[0]);for(let M=1;M<=t;M++){if(s[M]=s[M-1].clone(),o[M]=o[M-1].clone(),l.crossVectors(r[M-1],r[M]),l.length()>Number.EPSILON){l.normalize();const F=Math.acos(au(r[M-1].dot(r[M]),-1,1));s[M].applyMatrix4(u.makeRotationAxis(l,F))}o[M].crossVectors(r[M],s[M])}if(!0===e){let M=Math.acos(au(s[0].dot(s[t]),-1,1));M/=t,r[0].dot(l.crossVectors(s[0],s[t]))>0&&(M=-M);for(let F=1;F<=t;F++)s[F].applyMatrix4(u.makeRotationAxis(r[F],M*F)),o[F].crossVectors(r[F],s[F])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class TP extends uv{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(t,e){const n=e||new Gi,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const l=this.aStartAngle+t*s;let u=this.aX+this.xRadius*Math.cos(l),p=this.aY+this.yRadius*Math.sin(l);if(0!==this.aRotation){const v=Math.cos(this.aRotation),x=Math.sin(this.aRotation),I=u-this.aX,M=p-this.aY;u=I*v-M*x+this.aX,p=I*x+M*v+this.aY}return n.set(u,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function MP(){let i=0,t=0,e=0,n=0;function r(s,o,l,u){i=s,t=l,e=-3*s+3*o-2*l-u,n=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,p){r(o,l,p*(l-s),p*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,p,v,x){let I=(o-s)/p-(l-s)/(p+v)+(l-o)/v,M=(l-o)/v-(u-o)/(v+x)+(u-l)/x;I*=v,M*=v,r(o,l,I,M)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}const dE=new $t,DP=new MP,LP=new MP,PP=new MP;function kG(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),l=i*i;return(2*e-2*n+s+o)*(i*l)+(-3*e+3*n-2*s-o)*l+s*i+e}function hA(i,t,e,n){return function tCe(i,t){const e=1-i;return e*e*t}(i,t)+function nCe(i,t){return 2*(1-i)*i*t}(i,e)+function iCe(i,t){return i*i*t}(i,n)}function dA(i,t,e,n,r){return function rCe(i,t){const e=1-i;return e*e*e*t}(i,t)+function sCe(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function oCe(i,t){return 3*(1-i)*i*i*t}(i,n)+function aCe(i,t){return i*i*i*t}(i,r)}class OG extends uv{constructor(t=new Gi,e=new Gi,n=new Gi,r=new Gi){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new Gi){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(dA(t,r.x,s.x,o.x,l.x),dA(t,r.y,s.y,o.y,l.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class RP extends uv{constructor(t=new Gi,e=new Gi){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Gi){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new Gi;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class FG extends uv{constructor(t=new Gi,e=new Gi,n=new Gi){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Gi){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(hA(t,r.x,s.x,o.x),hA(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class BG extends uv{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Gi){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),l=s-o,u=r[0===o?o:o-1],p=r[o],v=r[o>r.length-2?r.length-1:o+1],x=r[o>r.length-3?r.length-1:o+2];return n.set(kG(l,u.x,p.x,v.x,x.x),kG(l,u.y,p.y,v.y,x.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new Gi).fromArray(r))}return this}}var kP=Object.freeze({__proto__:null,ArcCurve:class J0e extends TP{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class eCe extends uv{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new $t){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let p,v,l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===u&&l===s-1&&(l=s-2,u=1),this.closed||l>0?p=r[(l-1)%s]:(dE.subVectors(r[0],r[1]).add(r[0]),p=dE);const x=r[l%s],I=r[(l+1)%s];if(this.closed||l+2<s?v=r[(l+2)%s]:(dE.subVectors(r[s-1],r[s-2]).add(r[s-1]),v=dE),"centripetal"===this.curveType||"chordal"===this.curveType){const M="chordal"===this.curveType?.5:.25;let F=Math.pow(p.distanceToSquared(x),M),j=Math.pow(x.distanceToSquared(I),M),X=Math.pow(I.distanceToSquared(v),M);j<1e-4&&(j=1),F<1e-4&&(F=j),X<1e-4&&(X=j),DP.initNonuniformCatmullRom(p.x,x.x,I.x,v.x,F,j,X),LP.initNonuniformCatmullRom(p.y,x.y,I.y,v.y,F,j,X),PP.initNonuniformCatmullRom(p.z,x.z,I.z,v.z,F,j,X)}else"catmullrom"===this.curveType&&(DP.initCatmullRom(p.x,x.x,I.x,v.x,this.tension),LP.initCatmullRom(p.y,x.y,I.y,v.y,this.tension),PP.initCatmullRom(p.z,x.z,I.z,v.z,this.tension));return n.set(DP.calc(u),LP.calc(u),PP.calc(u)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new $t).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:OG,CubicBezierCurve3:class lCe extends uv{constructor(t=new $t,e=new $t,n=new $t,r=new $t){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new $t){const n=e,r=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(dA(t,r.x,s.x,o.x,l.x),dA(t,r.y,s.y,o.y,l.y),dA(t,r.z,s.z,o.z,l.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:TP,LineCurve:RP,LineCurve3:class cCe extends uv{constructor(t=new $t,e=new $t){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new $t){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:FG,QuadraticBezierCurve3:class NG extends uv{constructor(t=new $t,e=new $t,n=new $t){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new $t){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(hA(t,r.x,s.x,o.x),hA(t,r.y,s.y,o.y),hA(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:BG});class uCe extends uv{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new RP(e,t))}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,l=this.curves[s],u=l.getLength();return l.getPointAt(0===u?0:1-o/u,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],u=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let p=0;p<u.length;p++){const v=u[p];n&&n.equals(v)||(e.push(v),n=v)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new kP[r.type]).fromJSON(r))}return this}}class fE extends uCe{constructor(t){super(),this.type="Path",this.currentPoint=new Gi,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new RP(this.currentPoint.clone(),new Gi(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new FG(this.currentPoint.clone(),new Gi(t,e),new Gi(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const l=new OG(this.currentPoint.clone(),new Gi(t,e),new Gi(n,r),new Gi(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new BG(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,l,u){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,l,u),this}absellipse(t,e,n,r,s,o,l,u){const p=new TP(t,e,n,r,s,o,l,u);if(this.curves.length>0){const x=p.getPoint(0);x.equals(this.currentPoint)||this.lineTo(x.x,x.y)}this.curves.push(p);const v=p.getPoint(1);return this.currentPoint.copy(v),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class jb extends fE{constructor(t){super(t),this.uuid=Lp(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new fE).fromJSON(r))}return this}}function zG(i,t,e,n,r){let s,o;if(r===function TCe(i,t,e,n){let r=0;for(let s=t,o=e-n;s<e;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}(i,t,e,n)>0)for(s=t;s<e;s+=n)o=HG(s,i[s],i[s+1],o);else for(s=e-n;s>=t;s-=n)o=HG(s,i[s],i[s+1],o);return o&&yE(o,o.next)&&(mA(o),o=o.next),o}function q0(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!yE(e,e.next)&&0!==bc(e.prev,e,e.next))e=e.next;else{if(mA(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function pA(i,t,e,n,r,s,o){if(!i)return;!o&&s&&function xCe(i,t,e,n){let r=i;do{0===r.z&&(r.z=VP(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function wCe(i){let t,e,n,r,s,o,l,u,p=1;do{for(e=i,i=null,s=null,o=0;e;){for(o++,n=e,l=0,t=0;t<p&&(l++,n=n.nextZ,n);t++);for(u=p;l>0||u>0&&n;)0!==l&&(0===u||!n||e.z<=n.z)?(r=e,e=e.nextZ,l--):(r=n,n=n.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;e=n}s.nextZ=null,p*=2}while(o>1)}(r)}(i,n,r,s);let u,p,l=i;for(;i.prev!==i.next;)if(u=i.prev,p=i.next,s?pCe(i,n,r,s):fCe(i))t.push(u.i/e|0),t.push(i.i/e|0),t.push(p.i/e|0),mA(i),i=p.next,l=p.next;else if((i=p)===l){o?1===o?pA(i=gCe(q0(i),t,e),t,e,n,r,s,2):2===o&&mCe(i,t,e,n,r,s):pA(q0(i),t,e,n,r,s,1);break}}function fCe(i){const t=i.prev,e=i,n=i.next;if(bc(t,e,n)>=0)return!1;const r=t.x,s=e.x,o=n.x,l=t.y,u=e.y,p=n.y,v=r<s?r<o?r:o:s<o?s:o,x=l<u?l<p?l:p:u<p?u:p,I=r>s?r>o?r:o:s>o?s:o,M=l>u?l>p?l:p:u>p?u:p;let F=n.next;for(;F!==t;){if(F.x>=v&&F.x<=I&&F.y>=x&&F.y<=M&&$b(r,l,s,u,o,p,F.x,F.y)&&bc(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function pCe(i,t,e,n){const r=i.prev,s=i,o=i.next;if(bc(r,s,o)>=0)return!1;const l=r.x,u=s.x,p=o.x,v=r.y,x=s.y,I=o.y,M=l<u?l<p?l:p:u<p?u:p,F=v<x?v<I?v:I:x<I?x:I,j=l>u?l>p?l:p:u>p?u:p,X=v>x?v>I?v:I:x>I?x:I,ce=VP(M,F,t,e,n),we=VP(j,X,t,e,n);let ye=i.prevZ,Ae=i.nextZ;for(;ye&&ye.z>=ce&&Ae&&Ae.z<=we;){if(ye.x>=M&&ye.x<=j&&ye.y>=F&&ye.y<=X&&ye!==r&&ye!==o&&$b(l,v,u,x,p,I,ye.x,ye.y)&&bc(ye.prev,ye,ye.next)>=0||(ye=ye.prevZ,Ae.x>=M&&Ae.x<=j&&Ae.y>=F&&Ae.y<=X&&Ae!==r&&Ae!==o&&$b(l,v,u,x,p,I,Ae.x,Ae.y)&&bc(Ae.prev,Ae,Ae.next)>=0))return!1;Ae=Ae.nextZ}for(;ye&&ye.z>=ce;){if(ye.x>=M&&ye.x<=j&&ye.y>=F&&ye.y<=X&&ye!==r&&ye!==o&&$b(l,v,u,x,p,I,ye.x,ye.y)&&bc(ye.prev,ye,ye.next)>=0)return!1;ye=ye.prevZ}for(;Ae&&Ae.z<=we;){if(Ae.x>=M&&Ae.x<=j&&Ae.y>=F&&Ae.y<=X&&Ae!==r&&Ae!==o&&$b(l,v,u,x,p,I,Ae.x,Ae.y)&&bc(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.nextZ}return!0}function gCe(i,t,e){let n=i;do{const r=n.prev,s=n.next.next;!yE(r,s)&&VG(r,n,n.next,s)&&gA(r,s)&&gA(s,r)&&(t.push(r.i/e|0),t.push(n.i/e|0),t.push(s.i/e|0),mA(n),mA(n.next),n=i=s),n=n.next}while(n!==i);return q0(n)}function mCe(i,t,e,n,r,s){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&ICe(o,l)){let u=UG(o,l);return o=q0(o,o.next),u=q0(u,u.next),pA(o,t,e,n,r,s,0),void pA(u,t,e,n,r,s,0)}l=l.next}o=o.next}while(o!==i)}function yCe(i,t){return i.x-t.x}function _Ce(i,t){const e=function CCe(i,t){let r,e=t,n=-1/0;const s=i.x,o=i.y;do{if(o<=e.y&&o>=e.next.y&&e.next.y!==e.y){const I=e.x+(o-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(I<=s&&I>n&&(n=I,r=e.x<e.next.x?e:e.next,I===s))return r}e=e.next}while(e!==t);if(!r)return null;const l=r,u=r.x,p=r.y;let x,v=1/0;e=r;do{s>=e.x&&e.x>=u&&s!==e.x&&$b(o<p?s:n,o,u,p,o<p?n:s,o,e.x,e.y)&&(x=Math.abs(o-e.y)/(s-e.x),gA(e,i)&&(x<v||x===v&&(e.x>r.x||e.x===r.x&&bCe(r,e)))&&(r=e,v=x)),e=e.next}while(e!==l);return r}(i,t);if(!e)return t;const n=UG(e,i);return q0(n,n.next),q0(e,e.next)}function bCe(i,t){return bc(i.prev,i,t.prev)<0&&bc(t.next,i,i.next)<0}function VP(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-e)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ACe(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function $b(i,t,e,n,r,s,o,l){return(r-o)*(t-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(e-o)*(t-l)&&(e-o)*(s-l)>=(r-o)*(n-l)}function ICe(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function SCe(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&VG(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(gA(i,t)&&gA(t,i)&&function ECe(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,s=(i.y+t.y)/2;do{e.y>s!=e.next.y>s&&e.next.y!==e.y&&r<(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(bc(i.prev,i,t.prev)||bc(i,t.prev,t))||yE(i,t)&&bc(i.prev,i,i.next)>0&&bc(t.prev,t,t.next)>0)}function bc(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function yE(i,t){return i.x===t.x&&i.y===t.y}function VG(i,t,e,n){const r=CE(bc(i,t,e)),s=CE(bc(i,t,n)),o=CE(bc(e,n,i)),l=CE(bc(e,n,t));return!!(r!==s&&o!==l||0===r&&_E(i,e,t)||0===s&&_E(i,n,t)||0===o&&_E(e,i,n)||0===l&&_E(e,t,n))}function _E(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function CE(i){return i>0?1:i<0?-1:0}function gA(i,t){return bc(i.prev,i,i.next)<0?bc(i,t,i.next)>=0&&bc(i,i.prev,t)>=0:bc(i,t,i.prev)<0||bc(i,i.next,t)<0}function UG(i,t){const e=new UP(i.i,i.x,i.y),n=new UP(t.i,t.x,t.y),r=i.next,s=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,s.next=n,n.prev=s,n}function HG(i,t,e,n){const r=new UP(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function mA(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function UP(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class _y{static area(t){const e=t.length;let n=0;for(let r=e-1,s=0;s<e;r=s++)n+=t[r].x*t[s].y-t[s].x*t[r].y;return.5*n}static isClockWise(t){return _y.area(t)<0}static triangulateShape(t,e){const n=[],r=[],s=[];GG(t),WG(n,t);let o=t.length;e.forEach(GG);for(let u=0;u<e.length;u++)r.push(o),o+=e[u].length,WG(n,e[u]);const l=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let s=zG(i,0,r,e,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,p,v,x,I,M;if(n&&(s=function vCe(i,t,e,n){const r=[];let s,o,l,u,p;for(s=0,o=t.length;s<o;s++)l=t[s]*n,u=s<o-1?t[s+1]*n:i.length,p=zG(i,l,u,n,!1),p===p.next&&(p.steiner=!0),r.push(ACe(p));for(r.sort(yCe),s=0;s<r.length;s++)e=_Ce(r[s],e);return e}(i,t,s,e)),i.length>80*e){l=p=i[0],u=v=i[1];for(let F=e;F<r;F+=e)x=i[F],I=i[F+1],x<l&&(l=x),I<u&&(u=I),x>p&&(p=x),I>v&&(v=I);M=Math.max(p-l,v-u),M=0!==M?32767/M:0}return pA(s,o,e,l,u,M,0),o}(n,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function GG(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function WG(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class bE extends No{constructor(t=new jb([new Gi(.5,.5),new Gi(-.5,.5),new Gi(-.5,-.5),new Gi(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,r=[],s=[];for(let l=0,u=t.length;l<u;l++)o(t[l]);function o(l){const u=[],p=void 0!==e.curveSegments?e.curveSegments:12,v=void 0!==e.steps?e.steps:1,x=void 0!==e.depth?e.depth:1;let I=void 0===e.bevelEnabled||e.bevelEnabled,M=void 0!==e.bevelThickness?e.bevelThickness:.2,F=void 0!==e.bevelSize?e.bevelSize:M-.1,j=void 0!==e.bevelOffset?e.bevelOffset:0,X=void 0!==e.bevelSegments?e.bevelSegments:3;const ce=e.extrudePath,we=void 0!==e.UVGenerator?e.UVGenerator:MCe;let ye,We,ot,Mt,Xe,Ae=!1;ce&&(ye=ce.getSpacedPoints(v),Ae=!0,I=!1,We=ce.computeFrenetFrames(v,!1),ot=new $t,Mt=new $t,Xe=new $t),I||(X=0,M=0,F=0,j=0);const yt=l.extractPoints(p);let tn=yt.shape;const zn=yt.holes;if(!_y.isClockWise(tn)){tn=tn.reverse();for(let Vi=0,Ri=zn.length;Vi<Ri;Vi++){const xr=zn[Vi];_y.isClockWise(xr)&&(zn[Vi]=xr.reverse())}}const Un=_y.triangulateShape(tn,zn),An=tn;for(let Vi=0,Ri=zn.length;Vi<Ri;Vi++)tn=tn.concat(zn[Vi]);function Nn(Vi,Ri,xr){return Ri||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ri.clone().multiplyScalar(xr).add(Vi)}const _n=tn.length,Vn=Un.length;function Fn(Vi,Ri,xr){let ls,Pr,po;const Xs=Vi.x-Ri.x,Ns=Vi.y-Ri.y,jl=xr.x-Vi.x,bl=xr.y-Vi.y,rn=Xs*Xs+Ns*Ns;if(Math.abs(Xs*bl-Ns*jl)>Number.EPSILON){const ai=Math.sqrt(rn),ur=Math.sqrt(jl*jl+bl*bl),br=Ri.x-Ns/ai,Br=Ri.y+Xs/ai,ki=((xr.x-bl/ur-br)*bl-(xr.y+jl/ur-Br)*jl)/(Xs*bl-Ns*jl);ls=br+Xs*ki-Vi.x,Pr=Br+Ns*ki-Vi.y;const Ms=ls*ls+Pr*Pr;if(Ms<=2)return new Gi(ls,Pr);po=Math.sqrt(Ms/2)}else{let ai=!1;Xs>Number.EPSILON?jl>Number.EPSILON&&(ai=!0):Xs<-Number.EPSILON?jl<-Number.EPSILON&&(ai=!0):Math.sign(Ns)===Math.sign(bl)&&(ai=!0),ai?(ls=-Ns,Pr=Xs,po=Math.sqrt(rn)):(ls=Xs,Pr=Ns,po=Math.sqrt(rn/2))}return new Gi(ls/po,Pr/po)}const Cn=[];for(let Vi=0,Ri=An.length,xr=Ri-1,ls=Vi+1;Vi<Ri;Vi++,xr++,ls++)xr===Ri&&(xr=0),ls===Ri&&(ls=0),Cn[Vi]=Fn(An[Vi],An[xr],An[ls]);const Bn=[];let Wi,wi=Cn.concat();for(let Vi=0,Ri=zn.length;Vi<Ri;Vi++){const xr=zn[Vi];Wi=[];for(let ls=0,Pr=xr.length,po=Pr-1,Xs=ls+1;ls<Pr;ls++,po++,Xs++)po===Pr&&(po=0),Xs===Pr&&(Xs=0),Wi[ls]=Fn(xr[ls],xr[po],xr[Xs]);Bn.push(Wi),wi=wi.concat(Wi)}for(let Vi=0;Vi<X;Vi++){const Ri=Vi/X,xr=M*Math.cos(Ri*Math.PI/2),ls=F*Math.sin(Ri*Math.PI/2)+j;for(let Pr=0,po=An.length;Pr<po;Pr++){const Xs=Nn(An[Pr],Cn[Pr],ls);_s(Xs.x,Xs.y,-xr)}for(let Pr=0,po=zn.length;Pr<po;Pr++){const Xs=zn[Pr];Wi=Bn[Pr];for(let Ns=0,jl=Xs.length;Ns<jl;Ns++){const bl=Nn(Xs[Ns],Wi[Ns],ls);_s(bl.x,bl.y,-xr)}}}const Ji=F+j;for(let Vi=0;Vi<_n;Vi++){const Ri=I?Nn(tn[Vi],wi[Vi],Ji):tn[Vi];Ae?(Mt.copy(We.normals[0]).multiplyScalar(Ri.x),ot.copy(We.binormals[0]).multiplyScalar(Ri.y),Xe.copy(ye[0]).add(Mt).add(ot),_s(Xe.x,Xe.y,Xe.z)):_s(Ri.x,Ri.y,0)}for(let Vi=1;Vi<=v;Vi++)for(let Ri=0;Ri<_n;Ri++){const xr=I?Nn(tn[Ri],wi[Ri],Ji):tn[Ri];Ae?(Mt.copy(We.normals[Vi]).multiplyScalar(xr.x),ot.copy(We.binormals[Vi]).multiplyScalar(xr.y),Xe.copy(ye[Vi]).add(Mt).add(ot),_s(Xe.x,Xe.y,Xe.z)):_s(xr.x,xr.y,x/v*Vi)}for(let Vi=X-1;Vi>=0;Vi--){const Ri=Vi/X,xr=M*Math.cos(Ri*Math.PI/2),ls=F*Math.sin(Ri*Math.PI/2)+j;for(let Pr=0,po=An.length;Pr<po;Pr++){const Xs=Nn(An[Pr],Cn[Pr],ls);_s(Xs.x,Xs.y,x+xr)}for(let Pr=0,po=zn.length;Pr<po;Pr++){const Xs=zn[Pr];Wi=Bn[Pr];for(let Ns=0,jl=Xs.length;Ns<jl;Ns++){const bl=Nn(Xs[Ns],Wi[Ns],ls);Ae?_s(bl.x,bl.y+ye[v-1].y,ye[v-1].x+xr):_s(bl.x,bl.y,x+xr)}}}function Si(Vi,Ri){let xr=Vi.length;for(;--xr>=0;){const ls=xr;let Pr=xr-1;Pr<0&&(Pr=Vi.length-1);for(let po=0,Xs=v+2*X;po<Xs;po++){const Ns=_n*po,jl=_n*(po+1);ps(Ri+ls+Ns,Ri+Pr+Ns,Ri+Pr+jl,Ri+ls+jl)}}}function _s(Vi,Ri,xr){u.push(Vi),u.push(Ri),u.push(xr)}function fs(Vi,Ri,xr){Mr(Vi),Mr(Ri),Mr(xr);const ls=r.length/3,Pr=we.generateTopUV(n,r,ls-3,ls-2,ls-1);Co(Pr[0]),Co(Pr[1]),Co(Pr[2])}function ps(Vi,Ri,xr,ls){Mr(Vi),Mr(Ri),Mr(ls),Mr(Ri),Mr(xr),Mr(ls);const Pr=r.length/3,po=we.generateSideWallUV(n,r,Pr-6,Pr-3,Pr-2,Pr-1);Co(po[0]),Co(po[1]),Co(po[3]),Co(po[1]),Co(po[2]),Co(po[3])}function Mr(Vi){r.push(u[3*Vi+0]),r.push(u[3*Vi+1]),r.push(u[3*Vi+2])}function Co(Vi){s.push(Vi.x),s.push(Vi.y)}(function hr(){const Vi=r.length/3;if(I){let Ri=0,xr=_n*Ri;for(let ls=0;ls<Vn;ls++){const Pr=Un[ls];fs(Pr[2]+xr,Pr[1]+xr,Pr[0]+xr)}Ri=v+2*X,xr=_n*Ri;for(let ls=0;ls<Vn;ls++){const Pr=Un[ls];fs(Pr[0]+xr,Pr[1]+xr,Pr[2]+xr)}}else{for(let Ri=0;Ri<Vn;Ri++){const xr=Un[Ri];fs(xr[2],xr[1],xr[0])}for(let Ri=0;Ri<Vn;Ri++){const xr=Un[Ri];fs(xr[0]+_n*v,xr[1]+_n*v,xr[2]+_n*v)}}n.addGroup(Vi,r.length/3-Vi,0)})(),function Is(){const Vi=r.length/3;let Ri=0;Si(An,Ri),Ri+=An.length;for(let xr=0,ls=zn.length;xr<ls;xr++){const Pr=zn[xr];Si(Pr,Ri),Ri+=Pr.length}n.addGroup(Vi,r.length/3-Vi,1)}()}this.setAttribute("position",new os(r,3)),this.setAttribute("uv",new os(s,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function DCe(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)e.shapes.push(i[n].uuid);else e.shapes.push(i.uuid);return e.options=Object.assign({},t),void 0!==t.extrudePath&&(e.options.extrudePath=t.extrudePath.toJSON()),e}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let s=0,o=t.shapes.length;s<o;s++)n.push(e[t.shapes[s]]);const r=t.options.extrudePath;return void 0!==r&&(t.options.extrudePath=(new kP[r.type]).fromJSON(r)),new bE(n,t.options)}}const MCe={generateTopUV:function(i,t,e,n,r){const l=t[3*n],u=t[3*n+1],p=t[3*r],v=t[3*r+1];return[new Gi(t[3*e],t[3*e+1]),new Gi(l,u),new Gi(p,v)]},generateSideWallUV:function(i,t,e,n,r,s){const o=t[3*e],l=t[3*e+1],u=t[3*e+2],p=t[3*n],v=t[3*n+1],x=t[3*n+2],I=t[3*r],M=t[3*r+1],F=t[3*r+2],j=t[3*s],X=t[3*s+1],ce=t[3*s+2];return Math.abs(l-v)<Math.abs(o-p)?[new Gi(o,1-u),new Gi(p,1-x),new Gi(I,1-F),new Gi(j,1-ce)]:[new Gi(l,1-u),new Gi(v,1-x),new Gi(M,1-F),new Gi(X,1-ce)]}};class AE extends U0{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Jr(16777215),this.specular=new Jr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Jr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Gi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function wg(i,t,e){return YP(i)?new i.constructor(i.subarray(t,void 0!==e?e:i.length)):i.slice(t,e)}function X0(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function YP(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}class IE{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let l=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const l=e[1];t<l&&(n=2,s=l);for(let u=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const l=n+o>>>1;t<e[l]?o=l:n=l+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class WCe extends IE{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,l=r[s],u=r[o];if(void 0===l)switch(this.getSettings_().endingStart){case 2401:s=t,l=2*e-n;break;case 2402:s=r.length-2,l=e+r[s]-r[s+1];break;default:s=t,l=n}if(void 0===u)switch(this.getSettings_().endingEnd){case 2401:o=t,u=2*n-e;break;case 2402:o=1,u=n+r[1]-r[0];break;default:o=t-1,u=e}const p=.5*(n-e),v=this.valueSize;this._weightPrev=p/(e-l),this._weightNext=p/(u-n),this._offsetPrev=s*v,this._offsetNext=o*v}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=this._offsetPrev,x=this._offsetNext,I=this._weightPrev,M=this._weightNext,F=(n-e)/(r-e),j=F*F,X=j*F,ce=-I*X+2*I*j-I*F,we=(1+I)*X+(-1.5-2*I)*j+(-.5+I)*F+1,ye=(-1-M)*X+(1.5+M)*j+.5*F,Ae=M*X-M*j;for(let We=0;We!==l;++We)s[We]=ce*o[v+We]+we*o[p+We]+ye*o[u+We]+Ae*o[x+We];return s}}class XG extends IE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=t*l,p=u-l,v=(n-e)/(r-e),x=1-v;for(let I=0;I!==l;++I)s[I]=o[p+I]*x+o[u+I]*v;return s}}class jCe extends IE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class hv{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=X0(e,this.TimeBufferType),this.values=X0(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:X0(t.times,Array),values:X0(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new jCe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new XG(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new WCe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=wg(n,s,o),this.values=wg(this.values,s*l,o*l)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let l=0;l!==s;l++){const u=n[l];if("number"==typeof u&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),t=!1;break}if(null!==o&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),t=!1;break}o=u}if(void 0!==r&&YP(r))for(let l=0,u=r.length;l!==u;++l){const p=r[l];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,p),t=!1;break}}return t}optimize(){const t=wg(this.times),e=wg(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let l=1;l<s;++l){let u=!1;const p=t[l];if(p!==t[l+1]&&(1!==l||p!==t[0]))if(r)u=!0;else{const x=l*n,I=x-n,M=x+n;for(let F=0;F!==n;++F){const j=e[x+F];if(j!==e[I+F]||j!==e[M+F]){u=!0;break}}}if(u){if(l!==o){t[o]=t[l];const x=l*n,I=o*n;for(let M=0;M!==n;++M)e[I+M]=e[x+M]}++o}}if(s>0){t[o]=t[s];for(let l=s*n,u=o*n,p=0;p!==n;++p)e[u+p]=e[l+p];++o}return o!==t.length?(this.times=wg(t,0,o),this.values=wg(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=wg(this.times,0),e=wg(this.values,0),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}hv.prototype.TimeBufferType=Float32Array,hv.prototype.ValueBufferType=Float32Array,hv.prototype.DefaultInterpolation=2301;class qb extends hv{}qb.prototype.ValueTypeName="bool",qb.prototype.ValueBufferType=Array,qb.prototype.DefaultInterpolation=2300,qb.prototype.InterpolantFactoryMethodLinear=void 0,qb.prototype.InterpolantFactoryMethodSmooth=void 0;(class YG extends hv{}).prototype.ValueTypeName="color";(class SE extends hv{}).prototype.ValueTypeName="number";class $Ce extends IE{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-e)/(r-e);let p=t*l;for(let v=p+l;p!==v;p+=4)Rp.slerpFlat(s,0,o,p-l,o,p,u);return s}}class vA extends hv{InterpolantFactoryMethodLinear(t){return new $Ce(this.times,this.values,this.getValueSize(),t)}}vA.prototype.ValueTypeName="quaternion",vA.prototype.DefaultInterpolation=2301,vA.prototype.InterpolantFactoryMethodSmooth=void 0;class Xb extends hv{}Xb.prototype.ValueTypeName="string",Xb.prototype.ValueBufferType=Array,Xb.prototype.DefaultInterpolation=2300,Xb.prototype.InterpolantFactoryMethodLinear=void 0,Xb.prototype.InterpolantFactoryMethodSmooth=void 0;(class EE extends hv{}).prototype.ValueTypeName="vector";const Yb={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class KG{constructor(t,e,n){const r=this;let u,s=!1,o=0,l=0;const p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(v){l++,!1===s&&void 0!==r.onStart&&r.onStart(v,o,l),s=!0},this.itemEnd=function(v){o++,void 0!==r.onProgress&&r.onProgress(v,o,l),o===l&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(v){void 0!==r.onError&&r.onError(v)},this.resolveURL=function(v){return u?u(v):v},this.setURLModifier=function(v){return u=v,this},this.addHandler=function(v,x){return p.push(v,x),this},this.removeHandler=function(v){const x=p.indexOf(v);return-1!==x&&p.splice(x,2),this},this.getHandler=function(v){for(let x=0,I=p.length;x<I;x+=2){const M=p[x],F=p[x+1];if(M.global&&(M.lastIndex=0),M.test(v))return F}return null}}}const YCe=new KG;class ZG{constructor(t){this.manager=void 0!==t?t:YCe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(r,s){n.load(t,r,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Cy={};class KCe extends Error{constructor(t,e){super(t),this.response=e}}class by extends ZG{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=Yb.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==Cy[t])return void Cy[t].push({onLoad:e,onProgress:n,onError:r});Cy[t]=[],Cy[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(o).then(p=>{if(200===p.status||0===p.status){if(0===p.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===p.body||void 0===p.body.getReader)return p;const v=Cy[t],x=p.body.getReader(),I=p.headers.get("Content-Length"),M=I?parseInt(I):0,F=0!==M;let j=0;const X=new ReadableStream({start(ce){!function we(){x.read().then(({done:ye,value:Ae})=>{if(ye)ce.close();else{j+=Ae.byteLength;const We=new ProgressEvent("progress",{lengthComputable:F,loaded:j,total:M});for(let ot=0,Mt=v.length;ot<Mt;ot++){const Xe=v[ot];Xe.onProgress&&Xe.onProgress(We)}ce.enqueue(Ae),we()}})}()}});return new Response(X)}throw new KCe(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(u){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(v=>(new DOMParser).parseFromString(v,l));case"json":return p.json();default:if(void 0===l)return p.text();{const x=/charset="?([^;"\s]*)"?/i.exec(l),I=x&&x[1]?x[1].toLowerCase():void 0,M=new TextDecoder(I);return p.arrayBuffer().then(F=>M.decode(F))}}}).then(p=>{Yb.add(t,p);const v=Cy[t];delete Cy[t];for(let x=0,I=v.length;x<I;x++){const M=v[x];M.onLoad&&M.onLoad(p)}}).catch(p=>{const v=Cy[t];if(void 0===v)throw this.manager.itemError(t),p;delete Cy[t];for(let x=0,I=v.length;x<I;x++){const M=v[x];M.onError&&M.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class QP extends Uf{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Jr(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const JP=new fo,QG=new $t,JG=new $t;class e8{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Gi(512,512),this.map=null,this.mapPass=null,this.matrix=new fo,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new pP,this._frameExtents=new Gi(1,1),this._viewportCount=1,this._viewports=[new hl(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;QG.setFromMatrixPosition(t.matrixWorld),e.position.copy(QG),JG.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(JG),e.updateMatrixWorld(),JP.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(JP),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(JP)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class QCe extends e8{constructor(){super(new Jh(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*Kw*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class t8 extends QP{constructor(t,e,n=0,r=Math.PI/3,s=0,o=1){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Uf.DefaultUp),this.updateMatrix(),this.target=new Uf,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new QCe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class tbe extends e8{constructor(){super(new gP(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class r8 extends QP{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Uf.DefaultUp),this.updateMatrix(),this.target=new Uf,this.shadow=new tbe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class s8 extends QP{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}const nR="\\[\\]\\.:\\/",dbe=new RegExp("["+nR+"]","g"),iR="[^"+nR+"]",fbe="[^"+nR.replace("\\.","")+"]",ybe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",iR)+/(WCOD+)?/.source.replace("WCOD",fbe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iR)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iR)+"$"),_be=["material","materials","bones","map"];class Cbe{constructor(t,e,n){const r=n||Wl.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let Wl=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(dbe,"")}static parseTrackName(e){const n=ybe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==_be.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let l=0;l<o.length;l++){const u=o[l];if(u.name===n||u.uuid===n)return u;const p=r(u.children);if(p)return p}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let v=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let x=0;x<e.length;x++)if(e[x].name===v){v=x;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==v){if(void 0===e[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[v]}}const l=e[s];if(void 0===l)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}p=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else void 0!==l.fromArray&&void 0!==l.toArray?(p=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(p=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=Cbe,i})();Wl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Wl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Wl.prototype.GetterByBindingType=[Wl.prototype._getValue_direct,Wl.prototype._getValue_array,Wl.prototype._getValue_arrayElement,Wl.prototype._getValue_toArray],Wl.prototype.SetterByBindingTypeAndVersioning=[[Wl.prototype._setValue_direct,Wl.prototype._setValue_direct_setNeedsUpdate,Wl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wl.prototype._setValue_array,Wl.prototype._setValue_array_setNeedsUpdate,Wl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wl.prototype._setValue_arrayElement,Wl.prototype._setValue_arrayElement_setNeedsUpdate,Wl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wl.prototype._setValue_fromArray,Wl.prototype._setValue_fromArray_setNeedsUpdate,Wl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class Ibe{constructor(){this.type="ShapePath",this.color=new Jr,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new fE,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this}bezierCurveTo(t,e,n,r,s,o){return this.currentPath.bezierCurveTo(t,e,n,r,s,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function n(ce,we){const ye=we.length;let Ae=!1;for(let We=ye-1,ot=0;ot<ye;We=ot++){let Mt=we[We],Xe=we[ot],yt=Xe.x-Mt.x,tn=Xe.y-Mt.y;if(Math.abs(tn)>Number.EPSILON){if(tn<0&&(Mt=we[ot],yt=-yt,Xe=we[We],tn=-tn),ce.y<Mt.y||ce.y>Xe.y)continue;if(ce.y===Mt.y){if(ce.x===Mt.x)return!0}else{const zn=tn*(ce.x-Mt.x)-yt*(ce.y-Mt.y);if(0===zn)return!0;if(zn<0)continue;Ae=!Ae}}else{if(ce.y!==Mt.y)continue;if(Xe.x<=ce.x&&ce.x<=Mt.x||Mt.x<=ce.x&&ce.x<=Xe.x)return!0}}return Ae}const r=_y.isClockWise,s=this.subPaths;if(0===s.length)return[];let o,l,u;const p=[];if(1===s.length)return l=s[0],u=new jb,u.curves=l.curves,p.push(u),p;let v=!r(s[0].getPoints());v=t?!v:v;const x=[],I=[];let j,X,M=[],F=0;I[F]=void 0,M[F]=[];for(let ce=0,we=s.length;ce<we;ce++)l=s[ce],j=l.getPoints(),o=r(j),o=t?!o:o,o?(!v&&I[F]&&F++,I[F]={s:new jb,p:j},I[F].s.curves=l.curves,v&&F++,M[F]=[]):M[F].push({h:l,p:j[0]});if(!I[0])return function e(ce){const we=[];for(let ye=0,Ae=ce.length;ye<Ae;ye++){const We=ce[ye],ot=new jb;ot.curves=We.curves,we.push(ot)}return we}(s);if(I.length>1){let ce=!1,we=0;for(let ye=0,Ae=I.length;ye<Ae;ye++)x[ye]=[];for(let ye=0,Ae=I.length;ye<Ae;ye++){const We=M[ye];for(let ot=0;ot<We.length;ot++){const Mt=We[ot];let Xe=!0;for(let yt=0;yt<I.length;yt++)n(Mt.p,I[yt].p)&&(ye!==yt&&we++,Xe?(Xe=!1,x[yt].push(Mt)):ce=!0);Xe&&x[ye].push(Mt)}}we>0&&!1===ce&&(M=x)}for(let ce=0,we=I.length;ce<we;ce++){u=I[ce].s,p.push(u),X=M[ce];for(let ye=0,Ae=X.length;ye<Ae;ye++)u.holes.push(X[ye].h)}return p}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"146"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="146");var Mbe=V(5570);class Dbe extends ZG{constructor(t){super(t)}load(t,e,n,r){const s=this,o=new by(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(l){const u=s.parse(JSON.parse(l));e&&e(u)},n,r)}parse(t){return new Lbe(t)}}class Lbe{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],r=function Pbe(i,t,e){const n=Array.from(i),r=t/e.resolution,s=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,o=[];let l=0,u=0;for(let p=0;p<n.length;p++){const v=n[p];if("\n"===v)l=0,u-=s;else{const x=Rbe(v,r,l,u,e);x&&(l+=x.offsetX,o.push(x.path))}}return o}(t,e,this.data);for(let s=0,o=r.length;s<o;s++)n.push(...r[s].toShapes(!1));return n}}function Rbe(i,t,e,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");const o=new Ibe;let l,u,p,v,x,I,M,F;if(s.o){const j=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let X=0,ce=j.length;X<ce;)switch(j[X++]){case"m":l=j[X++]*t+e,u=j[X++]*t+n,o.moveTo(l,u);break;case"l":l=j[X++]*t+e,u=j[X++]*t+n,o.lineTo(l,u);break;case"q":p=j[X++]*t+e,v=j[X++]*t+n,x=j[X++]*t+e,I=j[X++]*t+n,o.quadraticCurveTo(x,I,p,v);break;case"b":p=j[X++]*t+e,v=j[X++]*t+n,x=j[X++]*t+e,I=j[X++]*t+n,M=j[X++]*t+e,F=j[X++]*t+n,o.bezierCurveTo(x,I,M,F,p,v)}}return{offsetX:s.ha*t,path:o}}class kbe extends bE{constructor(t,e={}){const n=e.font;if(void 0===n)super();else{const r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(r,e)}this.type="TextGeometry"}}const Obe=["canvas"],Fbe=[{path:"graphs",component:_oe},{path:"graphs/sigma/:label",component:Toe},{path:"graphs/cytoscape/:label",component:Mpe},{path:"graphs/threejs/:label",component:(()=>{class i{constructor(e,n,r,s){this.graphsService=e,this.logger=n,this.store=r,this.route=s,this.rotationSpeedX=.05,this.rotationSpeedY=.01,this.size=200,this.frustumSize=600,this.texture="/assets/texture.jpg",this.cameraZ=1,this.fieldOfView=1,this.nearClippingPlane=150,this.farClippingPlane=1e3,this.scene=new uG,this.group=new zb,this.graph$=this.store.select(s2),this.subscriptions=[],this.subscriptions.push(this.graph$.subscribe(o=>{!o||(this.group.clear(),this.loadGraph(o,this.scene))}))}get canvas(){return this.canvasRef?.nativeElement}ngOnInit(){}ngAfterViewInit(){this.route.params.subscribe(e=>{this.id=e.label,this.clearScene(),this.startRenderingLoop();let n=this.graphsService.getGraph(this.id+"");n&&this.store.dispatch(C1({graph:n}))})}ngOnDestroy(){this.subscriptions&&Qr.each(this.subscriptions,e=>{e.unsubscribe()})}clearScene(){this.scene.add(this.group),this.camera=new Jh(45,this.getAspectRatio(),1,1e3),this.camera.position.set(0,15,35);let e=new AE({color:16711680,shininess:150,specular:2236962}),n=new I_(1e3,.15,1e3);e=new AE({color:10530223,shininess:150,specular:1118481});const r=new Md(n,e);r.scale.multiplyScalar(3),r.castShadow=!1,r.receiveShadow=!0,this.scene.add(r),this.scene.add(new s8(4210752));let s=new t8(4210752);s.name="Spot Light",s.angle=Math.PI/5,s.penumbra=.3,s.position.set(5,5,5),s.castShadow=!0,s.shadow.camera.near=8,s.shadow.camera.far=30,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,this.scene.add(s),this.scene.add(s.shadow.camera);let o=new r8(16777215,1);o.name="Dir. Light",o.position.set(0,10,0),o.castShadow=!0,o.shadow.camera.near=1,o.shadow.camera.far=10,o.shadow.camera.right=15,o.shadow.camera.left=-15,o.shadow.camera.top=15,o.shadow.camera.bottom=-15,o.shadow.mapSize.width=1024,o.shadow.mapSize.height=1024,this.scene.add(o),this.scene.add(o.shadow.camera)}getAspectRatio(){return this.canvas.clientWidth/this.canvas.clientHeight}loadGraph(e,n){let r={};if(e){this.logger.info("Load",e);let s=new $t(1,0,0);Qr.each(e.nodes,u=>{let p=new I_(1,.1,1),v=new AE({color:16711680,shininess:150,specular:2236962}),x=new Md(p,v);x.name=u.id,r[u.id]={x:u.x,y:u.y},x.position.set(u.x/50,2,u.y/50),x.castShadow=!0,x.receiveShadow=!0,n.add(x),this.group.add(x),(new Dbe).load("assets/fonts/helvetiker_regular.typeface.json",M=>{const F=new kbe(u.label,{font:M,size:.3,height:.1,curveSegments:5,bevelEnabled:!1,bevelThickness:0,bevelSize:0,bevelOffset:0,bevelSegments:0});F.computeBoundingBox(),F.boundingBox||new v_;let ce=new Md(F,v);ce.position.set(u.x/50,2,u.y/50),ce.rotateOnAxis(s,-Math.PI/2),n.add(ce),this.group.add(ce)})}),Qr.each(e.edges,u=>{let p=r[u.source],v=r[u.target];const x=new Hf({color:255}),I=[];I.push(new $t(p.x/50,2,p.y/50)),I.push(new $t(v.x/50,2,v.y/50));const M=(new No).setFromPoints(I),F=new uA(M,x);n.add(F),this.group.add(F)});let l=(new v_).setFromObject(this.group).getSize(new $t);this.group.translateX(-l.x/2),this.group.translateZ(-l.z/2),this.logger.info("Loaded",this.group.children.length,l)}}startRenderingLoop(){this.renderer=new cG({canvas:this.canvas}),this.renderer.setPixelRatio(devicePixelRatio),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=0;let e=this;const n=new Mbe.OrbitControls(this.camera,this.renderer.domElement);n.autoRotate=!0,n.enableZoom=!0,n.enablePan=!1,n.minDistance=20,n.enableDamping=!0,n.dampingFactor=.2,n.enableKeys=!0,n.update(),function r(){requestAnimationFrame(r),e.renderer.render(e.scene,e.camera)}()}}return i.\u0275fac=function(e){return new(e||i)(Qt(I1),Qt(dm),Qt(f0),Qt(Jy))},i.\u0275cmp=Ar({type:i,selectors:[["app-threejs"]],viewQuery:function(e,n){if(1&e&&is(Obe,5),2&e){let r;or(r=ar())&&(n.canvasRef=r.first)}},inputs:{rotationSpeedX:"rotationSpeedX",rotationSpeedY:"rotationSpeedY",size:"size",frustumSize:"frustumSize",texture:"texture",cameraZ:"cameraZ",fieldOfView:"fieldOfView",nearClippingPlane:["nearClipping","nearClippingPlane"],farClippingPlane:["farClipping","farClippingPlane"]},decls:2,vars:0,consts:[["id","canvas",2,"height","100%","width","100%"],["canvas",""]],template:function(e,n){1&e&&si(0,"canvas",0,1)}}),i})()},{path:"converters/images",component:Upe},{path:"preferences",component:hge},{path:"about",component:fge}];let Nbe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[t_.forRoot(Fbe,{useHash:!0}),t_]}),i})();const Bbe=function(i){return{"p-hidden":i}};function zbe(i,t){if(1&i&&si(0,"li",4),2&i){const e=_e().$implicit;ve("ngClass",Bi(1,Bbe,!1===e.visible))}}function Vbe(i,t){if(1&i&&si(0,"span",16),2&i){const e=_e(3).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function Ube(i,t){if(1&i&&(ct(0,"span",17),cr(1),ht()),2&i){const e=_e(3).$implicit;De(1),ds(e.label)}}function Hbe(i,t){1&i&&si(0,"span",18),2&i&&ve("innerHTML",_e(3).$implicit.label,Oa)}function Gbe(i,t){if(1&i&&(ct(0,"span",19),cr(1),ht()),2&i){const e=_e(3).$implicit;ve("ngClass",e.badgeStyleClass),De(1),ds(e.badge)}}const S8=function(i,t){return{"pi-angle-down":i,"pi-angle-right":t}};function Wbe(i,t){if(1&i&&si(0,"span",20),2&i){const e=_e(4);ve("ngClass",ys(1,S8,e.root,!e.root))}}const E8=function(i){return{"p-menuitem-link":!0,"p-disabled":i}};function jbe(i,t){if(1&i){const e=Pi();ct(0,"a",10),mn("click",function(r){wt(e);const s=_e(2).$implicit;return It(_e().onItemClick(r,s))})("mouseenter",function(r){wt(e);const s=_e(2).$implicit;return It(_e().onItemMouseEnter(r,s))}),Ze(1,Vbe,1,2,"span",11),Ze(2,Ube,2,1,"span",12),Ze(3,Hbe,1,1,"ng-template",null,13,vc),Ze(5,Gbe,2,2,"span",14),Ze(6,Wbe,1,4,"span",15),ht()}if(2&i){const e=co(4),n=_e(2).$implicit,r=_e();ve("target",n.target)("ngClass",Bi(14,E8,n.disabled)),vr("href",n.url,$h)("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0")("aria-haspopup",null!=r.item.items)("aria-expanded",r.item===r.activeItem),De(1),ve("ngIf",n.icon),De(1),ve("ngIf",!1!==n.escape)("ngIfElse",e),De(3),ve("ngIf",n.badge),De(1),ve("ngIf",n.items)}}function $be(i,t){if(1&i&&si(0,"span",16),2&i){const e=_e(3).$implicit;ve("ngClass",e.icon)("ngStyle",e.iconStyle)}}function qbe(i,t){if(1&i&&(ct(0,"span",17),cr(1),ht()),2&i){const e=_e(3).$implicit;De(1),ds(e.label)}}function Xbe(i,t){1&i&&si(0,"span",18),2&i&&ve("innerHTML",_e(3).$implicit.label,Oa)}function Ybe(i,t){if(1&i&&(ct(0,"span",19),cr(1),ht()),2&i){const e=_e(3).$implicit;ve("ngClass",e.badgeStyleClass),De(1),ds(e.badge)}}function Kbe(i,t){if(1&i&&si(0,"span",20),2&i){const e=_e(4);ve("ngClass",ys(1,S8,e.root,!e.root))}}const Zbe=function(){return{exact:!1}};function Qbe(i,t){if(1&i){const e=Pi();ct(0,"a",21),mn("click",function(r){wt(e);const s=_e(2).$implicit;return It(_e().onItemClick(r,s))})("mouseenter",function(r){wt(e);const s=_e(2).$implicit;return It(_e().onItemMouseEnter(r,s))}),Ze(1,$be,1,2,"span",11),Ze(2,qbe,2,1,"span",12),Ze(3,Xbe,1,1,"ng-template",null,22,vc),Ze(5,Ybe,2,2,"span",14),Ze(6,Kbe,1,4,"span",15),ht()}if(2&i){const e=co(4),n=_e(2).$implicit;ve("routerLink",n.routerLink)("queryParams",n.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",n.routerLinkActiveOptions||xa(21,Zbe))("target",n.target)("ngClass",Bi(22,E8,n.disabled))("fragment",n.fragment)("queryParamsHandling",n.queryParamsHandling)("preserveFragment",n.preserveFragment)("skipLocationChange",n.skipLocationChange)("replaceUrl",n.replaceUrl)("state",n.state),vr("data-automationid",n.automationId)("title",n.title)("id",n.id)("tabindex",n.disabled?null:"0"),De(1),ve("ngIf",n.icon),De(1),ve("ngIf",!1!==n.escape)("ngIfElse",e),De(3),ve("ngIf",n.badge),De(1),ve("ngIf",n.items)}}function Jbe(i,t){if(1&i){const e=Pi();ct(0,"p-menubarSub",23),mn("leafClick",function(){return wt(e),It(_e(3).onLeafClick())}),ht()}if(2&i){const e=_e(2).$implicit,n=_e();ve("parentActive",e===n.activeItem)("item",e)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay)}}const exe=function(i,t){return{"p-menuitem":!0,"p-menuitem-active":i,"p-hidden":t}};function txe(i,t){if(1&i&&(ct(0,"li",5,6),Ze(2,jbe,7,16,"a",7),Ze(3,Qbe,7,24,"a",8),Ze(4,Jbe,1,4,"p-menubarSub",9),ht()),2&i){const e=_e().$implicit,n=_e();Vr(e.styleClass),ve("ngClass",ys(8,exe,e===n.activeItem,!1===e.visible))("ngStyle",e.style)("tooltipOptions",e.tooltipOptions),De(2),ve("ngIf",!e.routerLink),De(1),ve("ngIf",e.routerLink),De(1),ve("ngIf",e.items)}}function nxe(i,t){if(1&i&&(Ze(0,zbe,1,3,"li",2),Ze(1,txe,5,11,"li",3)),2&i){const e=t.$implicit;ve("ngIf",e.separator),De(1),ve("ngIf",!e.separator)}}const ixe=function(i,t){return{"p-submenu-list":i,"p-menubar-root-list":t}},rxe=["menubutton"],sxe=["rootmenu"];function oxe(i,t){1&i&&qi(0)}function axe(i,t){if(1&i&&(ct(0,"div",9),Ze(1,oxe,1,0,"ng-container",10),ht()),2&i){const e=_e();De(1),ve("ngTemplateOutlet",e.startTemplate)}}function lxe(i,t){1&i&&qi(0)}function cxe(i,t){if(1&i&&(ct(0,"div",11),Ze(1,lxe,1,0,"ng-container",10),ht()),2&i){const e=_e();De(1),ve("ngTemplateOutlet",e.endTemplate)}}function uxe(i,t){1&i&&(ct(0,"div",11),nu(1),ht())}const hxe=function(i){return{"p-menubar p-component":!0,"p-menubar-mobile-active":i}},dxe=["*"];let fxe=(()=>{class i{constructor(e,n,r){this.el=e,this.renderer=n,this.cd=r,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new jn,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(e){this.root||(this._parentActive=e,e||(this.activeItem=null))}onItemClick(e,n){n.disabled?e.preventDefault():(!n.url&&!n.routerLink&&e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items&&(this.activeItem&&n===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=n,this.root&&this.bindDocumentClickListener())),n.items||this.onLeafClick())}onItemMouseEnter(e,n){n.disabled||this.mobileActive?e.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=n,this.bindDocumentClickListener()):(this.activeItem=n,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=e=>{this.el&&!this.el.nativeElement.contains(e.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))}unbindDocumentClickListener(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)}ngOnDestroy(){this.unbindDocumentClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(d),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(e,n){1&e&&(ct(0,"ul",0),Ze(1,nxe,2,2,"ng-template",1),ht()),2&e&&(ve("ngClass",ys(3,ixe,!n.root,n.root)),vr("role",n.root?"menubar":"menu"),De(1),ve("ngForOf",n.root?n.item:n.item.items))},dependencies:[_o,ru,Oo,Ko,QC,FD,yh,s_,i],encapsulation:2}),i})(),pxe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.cd=r,this.config=s,this.autoZIndex=!0,this.baseZIndex=0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"start":this.startTemplate=e.template;break;case"end":this.endTemplate=e.template}})}toggle(e){this.mobileActive?(this.hide(),Ll.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,Ll.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),e.preventDefault()}bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=e=>{this.mobileActive&&this.rootmenu.el.nativeElement!==e.target&&!this.rootmenu.el.nativeElement.contains(e.target)&&this.menubutton.nativeElement!==e.target&&!this.menubutton.nativeElement.contains(e.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))}hide(){this.mobileActive=!1,this.cd.markForCheck(),Ll.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}ngOnDestroy(){this.unbindOutsideClickListener()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(d),Qt(Ho),Qt(Mp))},i.\u0275cmp=Ar({type:i,selectors:[["p-menubar"]],contentQueries:function(e,n,r){if(1&e&&Ga(r,_l,4),2&e){let s;or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(rxe,5),is(sxe,5)),2&e){let r;or(r=ar())&&(n.menubutton=r.first),or(r=ar())&&(n.rootmenu=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay"},ngContentSelectors:dxe,decls:10,vars:14,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],[1,"p-menubar-end"]],template:function(e,n){if(1&e&&(Ff(),ct(0,"div",0),Ze(1,axe,2,1,"div",1),ct(2,"a",2,3),mn("click",function(s){return n.toggle(s)}),si(4,"i",4),ht(),ct(5,"p-menubarSub",5,6),mn("leafClick",function(){return n.onLeafClick()}),ht(),Ze(7,cxe,2,1,"div",7),Ze(8,uxe,2,0,"ng-template",null,8,vc),ht()),2&e){const r=co(9);Vr(n.styleClass),ve("ngClass",Bi(12,hxe,n.mobileActive))("ngStyle",n.style),De(1),ve("ngIf",n.startTemplate),De(4),ve("item",n.model)("baseZIndex",n.baseZIndex)("autoZIndex",n.autoZIndex)("mobileActive",n.mobileActive)("autoDisplay",n.autoDisplay),De(2),ve("ngIf",n.endTemplate)("ngIfElse",r)}},dependencies:[_o,Oo,Dl,Ko,fxe],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:1}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),i})(),gxe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,t_,su,nv,Na,t_,nv,Na]}),i})();function mxe(i,t){1&i&&si(0,"img",2)}let vxe=(()=>{class i{constructor(e){this.title=e,this.titlee=`MySystem 1.1.0a : ${new Date}`,this.items=[],this.title.setTitle("MySystem 1.1.0a")}ngOnInit(){this.items=[{label:"Graph",icon:"pi pi-fw pi-box",items:[{label:"Graph(s)",icon:"pi pi-fw pi-book",routerLink:"/graphs"}]},{label:"Misc",icon:"pi pi-fw pi-cog",items:[{label:"Preferences",icon:"pi pi-fw pi-database",routerLink:"/preferences"},{label:"Images",icon:"pi pi-fw pi-cloud-upload",routerLink:"/converters/images"},{label:"About",icon:"pi pi-fw pi-at",routerLink:"/about"}]}]}}return i.\u0275fac=function(e){return new(e||i)(Qt(KM))},i.\u0275cmp=Ar({type:i,selectors:[["app-root"]],decls:3,vars:1,consts:[[3,"model"],["pTemplate","start"],["src","assets/favicon.png","height","40",1,"mr-2"]],template:function(e,n){1&e&&(ct(0,"p-menubar",0),Ze(1,mxe,1,0,"ng-template",1),ht(),si(2,"router-outlet")),2&e&&ve("model",n.items)},dependencies:[AD,_l,pxe]}),i})();function T8(i){return new gi(3e3,!1)}function Qxe(){return typeof window<"u"&&typeof window.document<"u"}function aR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function T_(i){switch(i.length){case 0:return new vw;case 1:return i[0];default:return new kV(i)}}function M8(i,t,e,n,r=new Map,s=new Map){const o=[],l=[];let u=-1,p=null;if(n.forEach(v=>{const x=v.get("offset"),I=x==u,M=I&&p||new Map;v.forEach((F,j)=>{let X=j,ce=F;if("offset"!==j)switch(X=t.normalizePropertyName(X,o),ce){case"!":ce=r.get(j);break;case iy:ce=s.get(j);break;default:ce=t.normalizeStyleValue(j,X,ce,o)}M.set(X,ce)}),I||l.push(M),p=M,u=x}),o.length)throw function Vxe(i){return new gi(3502,!1)}();return l}function lR(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&cR(e,"start",i)));break;case"done":i.onDone(()=>n(e&&cR(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&cR(e,"destroy",i)))}}function cR(i,t,e){const s=uR(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function uR(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Fp(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function D8(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let hR=(i,t)=>!1,L8=(i,t,e)=>[],P8=null;function dR(i){const t=i.parentNode||i.host;return t===P8?null:t}(aR()||typeof Element<"u")&&(Qxe()?(P8=(()=>document.documentElement)(),hR=(i,t)=>{for(;t;){if(t===i)return!0;t=dR(t)}return!1}):hR=(i,t)=>i.contains(t),L8=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let eC=null,R8=!1;const k8=hR,O8=L8;let F8=(()=>{class i{validateStyleProperty(e){return function ewe(i){eC||(eC=function twe(){return typeof document<"u"?document.body:null}()||{},R8=!!eC.style&&"WebkitAppearance"in eC.style);let t=!0;return eC.style&&!function Jxe(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in eC.style,!t&&R8&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in eC.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return k8(e,n)}getParentElement(e){return dR(e)}query(e,n,r){return O8(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,l=[],u){return new vw(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})(),fR=(()=>{class i{}return i.NOOP=new F8,i})();const pR="ng-enter",NE="ng-leave",BE="ng-trigger",zE=".ng-trigger",B8="ng-animating",gR=".ng-animating";function M_(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:mR(parseFloat(t[1]),t[2])}function mR(i,t){return"s"===t?1e3*i:i}function VE(i,t,e){return i.hasOwnProperty("duration")?i:function rwe(i,t,e){let r,s=0,o="";if("string"==typeof i){const l=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return t.push(T8()),{duration:0,delay:0,easing:""};r=mR(parseFloat(l[1]),l[2]);const u=l[3];null!=u&&(s=mR(parseFloat(u),l[4]));const p=l[5];p&&(o=p)}else r=i;if(!e){let l=!1,u=t.length;r<0&&(t.push(function yxe(){return new gi(3100,!1)}()),l=!0),s<0&&(t.push(function _xe(){return new gi(3101,!1)}()),l=!0),l&&t.splice(u,0,T8())}return{duration:r,delay:s,easing:o}}(i,t,e)}function _A(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function z8(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function D_(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function U8(i,t,e){return e?t+":"+e+";":""}function H8(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=U8(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=U8(0,lwe(e),i.style[e]));i.setAttribute("style",t)}function dv(i,t,e){i.style&&(t.forEach((n,r)=>{const s=yR(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),aR()&&H8(i))}function tC(i,t){i.style&&(t.forEach((e,n)=>{const r=yR(n);i.style[r]=""}),aR()&&H8(i))}function CA(i){return Array.isArray(i)?1==i.length?i[0]:LV(i):i}const vR=new RegExp("{{\\s*(.+?)\\s*}}","g");function G8(i){let t=[];if("string"==typeof i){let e;for(;e=vR.exec(i);)t.push(e[1]);vR.lastIndex=0}return t}function UE(i,t,e){const n=i.toString(),r=n.replace(vR,(s,o)=>{let l=t[o];return null==l&&(e.push(function bxe(i){return new gi(3003,!1)}()),l=""),l.toString()});return r==n?i:r}function HE(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const awe=/-+([a-z0-9])/g;function yR(i){return i.replace(awe,(...t)=>t[1].toUpperCase())}function lwe(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Np(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function xxe(i){return new gi(3004,!1)}()}}function W8(i,t){return window.getComputedStyle(i)[t]}function pwe(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function gwe(i,t,e){if(":"==i[0]){const u=function mwe(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function Fxe(i){return new gi(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof u)return void t.push(u);i=u}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function Oxe(i){return new gi(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push(j8(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&t.push(j8(o,r))}(n,e,t)):e.push(i),e}const $E=new Set(["true","1"]),qE=new Set(["false","0"]);function j8(i,t){const e=$E.has(i)||qE.has(i),n=$E.has(t)||qE.has(t);return(r,s)=>{let o="*"==i||i==r,l="*"==t||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?$E.has(i):qE.has(i)),!l&&n&&"boolean"==typeof s&&(l=s?$E.has(t):qE.has(t)),o&&l}}const vwe=new RegExp("s*:selfs*,?","g");function _R(i,t,e,n){return new ywe(i).build(t,e,n)}class ywe{constructor(t){this._driver=t}build(t,e,n){const r=new bwe(e);return this._resetContextStyleTimingState(r),Np(this,CA(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function Axe(){return new gi(3006,!1)}()),t.definitions.forEach(l=>{if(this._resetContextStyleTimingState(e),0==l.type){const u=l,p=u.name;p.toString().split(/\s*,\s*/).forEach(v=>{u.name=v,s.push(this.visitState(u,e))}),u.name=p}else if(1==l.type){const u=this.visitTransition(l,e);n+=u.queryCount,r+=u.depCount,o.push(u)}else e.errors.push(function Ixe(){return new gi(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{G8(u).forEach(p=>{o.hasOwnProperty(p)||s.add(p)})})}),s.size&&(HE(s.values()),e.errors.push(function Sxe(i,t){return new gi(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Np(this,CA(t.animation),e);return{type:1,matchers:pwe(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:nC(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Np(this,n,e)),options:nC(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const l=Np(this,o,e);return r=Math.max(r,e.currentTime),l});return e.currentTime=r,{type:3,steps:s,options:nC(t.options)}}visitAnimate(t,e){const n=function wwe(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return CR(VE(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=CR(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=VE(e,t);return CR(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:Ja({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,l=!1;if(!o){l=!0;const p={};n.easing&&(p.easing=n.easing),o=Ja(p)}e.currentTime+=n.duration+n.delay;const u=this.visitStyle(o,e);u.isEmptyStep=l,r=u}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let l of r)"string"==typeof l?l===iy?n.push(l):e.errors.push(new gi(3002,!1)):n.push(z8(l));let s=!1,o=null;return n.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(o=l.get("easing"),l.delete("easing")),!s))for(let u of l.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,u)=>{const p=e.collectedStyles.get(e.currentQuerySelector),v=p.get(u);let x=!0;v&&(s!=r&&s>=v.startTime&&r<=v.endTime&&(e.errors.push(function Txe(i,t,e,n,r){return new gi(3010,!1)}()),x=!1),s=v.startTime),x&&p.set(u,{startTime:s,endTime:r}),e.options&&function owe(i,t,e){const n=t.params||{},r=G8(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function Cxe(i){return new gi(3001,!1)}())})}(l,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Mxe(){return new gi(3011,!1)}()),n;let s=0;const o=[];let l=!1,u=!1,p=0;const v=t.steps.map(ce=>{const we=this._makeStyleAst(ce,e);let ye=null!=we.offset?we.offset:function xwe(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(we.styles),Ae=0;return null!=ye&&(s++,Ae=we.offset=ye),u=u||Ae<0||Ae>1,l=l||Ae<p,p=Ae,o.push(Ae),we});u&&e.errors.push(function Dxe(){return new gi(3012,!1)}()),l&&e.errors.push(function Lxe(){return new gi(3200,!1)}());const x=t.steps.length;let I=0;s>0&&s<x?e.errors.push(function Pxe(){return new gi(3202,!1)}()):0==s&&(I=1/(x-1));const M=x-1,F=e.currentTime,j=e.currentAnimateTimings,X=j.duration;return v.forEach((ce,we)=>{const ye=I>0?we==M?1:I*we:o[we],Ae=ye*X;e.currentTime=F+j.delay+Ae,j.duration=Ae,this._validateStyleAst(ce,e),ce.offset=ye,n.styles.push(ce)}),n}visitReference(t,e){return{type:8,animation:Np(this,CA(t.animation),e),options:nC(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:nC(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:nC(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function _we(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(vwe,"")),i=i.replace(/@\*/g,zE).replace(/@\w+/g,e=>zE+"-"+e.slice(1)).replace(/:animating/g,gR),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Fp(e.collectedStyles,e.currentQuerySelector,new Map);const l=Np(this,CA(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:l,originalSelector:t.selector,options:nC(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Rxe(){return new gi(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:VE(t.timings,e.errors,!0);return{type:12,animation:Np(this,CA(t.animation),e),timings:n,options:null}}}class bwe{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function nC(i){return i?(i=_A(i)).params&&(i.params=function Cwe(i){return i?_A(i):null}(i.params)):i={},i}function CR(i,t,e){return{duration:i,delay:t,easing:e}}function bR(i,t,e,n,r,s,o=null,l=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:l}}class XE{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Swe=new RegExp(":enter","g"),Twe=new RegExp(":leave","g");function xR(i,t,e,n,r,s=new Map,o=new Map,l,u,p=[]){return(new Mwe).buildKeyframes(i,t,e,n,r,s,o,l,u,p)}class Mwe{buildKeyframes(t,e,n,r,s,o,l,u,p,v=[]){p=p||new XE;const x=new wR(t,e,p,r,s,v,[]);x.options=u;const I=u.delay?M_(u.delay):0;x.currentTimeline.delayNextStep(I),x.currentTimeline.setStyles([o],null,x.errors,u),Np(this,n,x);const M=x.timelines.filter(F=>F.containsAnimation());if(M.length&&l.size){let F;for(let j=M.length-1;j>=0;j--){const X=M[j];if(X.element===e){F=X;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([l],null,x.errors,u)}return M.length?M.map(F=>F.buildKeyframes()):[bR(e,[],[],[],0,I,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?M_(n.duration):null,l=null!=n.delay?M_(n.delay):null;return 0!==o&&t.forEach(u=>{const p=e.appendInstructionToTimeline(u,o,l);s=Math.max(s,p.duration+p.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Np(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=YE);const o=M_(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Np(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?M_(t.options.delay):0;t.steps.forEach(o=>{const l=e.createSubContext(t.options);s&&l.delayNextStep(s),Np(this,o,l),r=Math.max(r,l.currentTimeline.currentTime),n.push(l.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return VE(e.params?UE(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,l=e.createSubContext().currentTimeline;l.easing=n.easing,t.styles.forEach(u=>{l.forwardTime((u.offset||0)*s),l.setStyles(u.styles,u.easing,e.errors,e.options),l.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(l),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?M_(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=YE);let o=n;const l=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=l.length;let u=null;l.forEach((p,v)=>{e.currentQueryIndex=v;const x=e.createSubContext(t.options,p);s&&x.delayNextStep(s),p===e.element&&(u=x.currentTimeline),Np(this,t.animation,x),x.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,x.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),u&&(e.currentTimeline.mergeTimelineCollectedStyles(u),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),l=o*(e.currentQueryTotal-1);let u=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=l-u;break;case"full":u=n.currentStaggerTime}const v=e.currentTimeline;u&&v.delayNextStep(u);const x=v.currentTime;Np(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-x+(r.startTime-n.currentTimeline.startTime)}}const YE={};class wR{constructor(t,e,n,r,s,o,l,u){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=YE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new KE(this._driver,e,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=M_(n.duration)),null!=n.delay&&(r.delay=M_(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(l=>{(!e||!o.hasOwnProperty(l))&&(o[l]=UE(s[l],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new wR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=YE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new Dwe(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let l=[];if(r&&l.push(this.element),t.length>0){t=(t=t.replace(Swe,"."+this._enterClassName)).replace(Twe,"."+this._leaveClassName);let p=this._driver.query(this.element,t,1!=n);0!==n&&(p=n<0?p.slice(p.length+n,p.length):p.slice(0,n)),l.push(...p)}return!s&&0==l.length&&o.push(function kxe(i){return new gi(3014,!1)}()),l}}class KE{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new KE(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||iy),this._currentKeyframe.set(e,iy);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function Lwe(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,iy)}else D_(r,e)}),e}(t,this._globalTimelineStyles);for(let[l,u]of o){const p=UE(u,s,n);this._pendingStyles.set(l,p),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??iy),this._updateStyle(l,p)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((l,u)=>{const p=D_(l,new Map,this._backFill);p.forEach((v,x)=>{"!"===v?t.add(x):v===iy&&e.add(x)}),n||p.set("offset",u/this.duration),r.push(p)});const s=t.size?HE(t.values()):[],o=e.size?HE(e.values()):[];if(n){const l=r[0],u=new Map(l);l.set("offset",0),u.set("offset",1),r=[l,u]}return bR(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Dwe extends KE{constructor(t,e,n,r,s,o,l=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,l=e/o,u=D_(t[0]);u.set("offset",0),s.push(u);const p=D_(t[0]);p.set("offset",X8(l)),s.push(p);const v=t.length-1;for(let x=1;x<=v;x++){let I=D_(t[x]);const M=I.get("offset");I.set("offset",X8((e+M*n)/o)),s.push(I)}n=o,e=0,r="",t=s}return bR(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function X8(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class AR{}const Pwe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Rwe extends AR{normalizePropertyName(t,e){return yR(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(Pwe.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const l=n.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&r.push(function wxe(i,t){return new gi(3005,!1)}())}return o+s}}function Y8(i,t,e,n,r,s,o,l,u,p,v,x,I){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:l,queriedElements:u,preStyleProps:p,postStyleProps:v,totalTime:x,errors:I}}const IR={};class K8{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function kwe(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,l,u,p,v){const x=[],I=this.ast.options&&this.ast.options.params||IR,F=this.buildStyles(n,l&&l.params||IR,x),j=u&&u.params||IR,X=this.buildStyles(r,j,x),ce=new Set,we=new Map,ye=new Map,Ae="void"===r,We={params:Owe(j,I),delay:this.ast.options?.delay},ot=v?[]:xR(t,e,this.ast.animation,s,o,F,X,We,p,x);let Mt=0;if(ot.forEach(yt=>{Mt=Math.max(yt.duration+yt.delay,Mt)}),x.length)return Y8(e,this._triggerName,n,r,Ae,F,X,[],[],we,ye,Mt,x);ot.forEach(yt=>{const tn=yt.element,zn=Fp(we,tn,new Set);yt.preStyleProps.forEach(Un=>zn.add(Un));const Qn=Fp(ye,tn,new Set);yt.postStyleProps.forEach(Un=>Qn.add(Un)),tn!==e&&ce.add(tn)});const Xe=HE(ce.values());return Y8(e,this._triggerName,n,r,Ae,F,X,ot,Xe,we,ye,Mt)}}function Owe(i,t){const e=_A(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class Fwe{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=_A(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,l)=>{o&&(o=UE(o,r,e));const u=this.normalizer.normalizePropertyName(l,e);o=this.normalizer.normalizeStyleValue(l,u,o,e),n.set(u,o)})}),n}}class Bwe{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new Fwe(r.style,r.options&&r.options.params||{},n))}),Z8(this.states,"true","1"),Z8(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new K8(t,r,this.states))}),this.fallbackTransition=function zwe(i,t,e){return new K8(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,l)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Z8(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const Vwe=new XE;class Uwe{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],s=_R(this._driver,e,n,[]);if(n.length)throw function Uxe(i){return new gi(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=M8(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const l=new Map;if(s?(o=xR(this._driver,e,s,pR,NE,new Map,new Map,n,Vwe,r),o.forEach(v=>{const x=Fp(l,v.element,new Map);v.postStyleProps.forEach(I=>x.set(I,null))})):(r.push(function Hxe(){return new gi(3300,!1)}()),o=[]),r.length)throw function Gxe(i){return new gi(3504,!1)}();l.forEach((v,x)=>{v.forEach((I,M)=>{v.set(M,this._driver.computeStyle(x,M,iy))})});const p=T_(o.map(v=>{const x=l.get(v.element);return this._buildPlayer(v,new Map,x)}));return this._playersById.set(t,p),p.onDestroy(()=>this.destroy(t)),this.players.push(p),p}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Wxe(i){return new gi(3301,!1)}();return e}listen(t,e,n,r){const s=uR(e,"","","");return lR(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Q8="ng-animate-queued",SR="ng-animate-disabled",$we=[],J8={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},qwe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ag="__ng_removed";class ER{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function Zwe(i){return i??null}(n?t.value:t),n){const s=_A(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const bA="void",TR=new ER(bA);class Xwe{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Ig(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function jxe(i,t){return new gi(3302,!1)}();if(null==n||0==n.length)throw function $xe(i){return new gi(3303,!1)}();if(!function Qwe(i){return"start"==i||"done"==i}(n))throw function qxe(i,t){return new gi(3400,!1)}();const s=Fp(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const l=Fp(this._engine.statesByElement,t,new Map);return l.has(e)||(Ig(t,BE),Ig(t,BE+"-"+e),l.set(e,TR)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(e)||l.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Xxe(i){return new gi(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new MR(this.id,e,t);let l=this._engine.statesByElement.get(t);l||(Ig(t,BE),Ig(t,BE+"-"+e),this._engine.statesByElement.set(t,l=new Map));let u=l.get(e);const p=new ER(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&p.absorbOptions(u.options),l.set(e,p),u||(u=TR),p.value!==bA&&u.value===p.value){if(!function tAe(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(u.params,p.params)){const j=[],X=s.matchStyles(u.value,u.params,j),ce=s.matchStyles(p.value,p.params,j);j.length?this._engine.reportError(j):this._engine.afterFlush(()=>{tC(t,X),dv(t,ce)})}return}const I=Fp(this._engine.playersByElement,t,[]);I.forEach(j=>{j.namespaceId==this.id&&j.triggerName==e&&j.queued&&j.destroy()});let M=s.matchTransition(u.value,p.value,t,p.params),F=!1;if(!M){if(!r)return;M=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:M,fromState:u,toState:p,player:o,isFallbackTransition:F}),F||(Ig(t,Q8),o.onStart(()=>{Kb(t,Q8)})),o.onDone(()=>{let j=this.players.indexOf(o);j>=0&&this.players.splice(j,1);const X=this._engine.playersByElement.get(t);if(X){let ce=X.indexOf(o);ce>=0&&X.splice(ce,1)}}),this.players.push(o),I.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,zE,!0);n.forEach(r=>{if(r[Ag])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const l=[];if(s.forEach((u,p)=>{if(o.set(p,u.value),this._triggers.has(p)){const v=this.trigger(t,p,bA,r);v&&l.push(v)}}),l.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&T_(l).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const u=this._triggers.get(o).fallbackTransition,p=n.get(o)||TR,v=new ER(bA),x=new MR(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:u,fromState:p,toState:v,player:x,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Ag];(!s||s===J8)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Ig(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(l=>{if(l.name==n.triggerName){const u=uR(s,n.triggerName,n.fromState.value,n.toState.value);u._data=t,lR(n.player,l.phase,u,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class Ywe{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new Xwe(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,l=this.driver.getParentElement(e);for(;l;){const u=r.get(l);if(u){const p=n.indexOf(u);n.splice(p+1,0,t),o=!0;break}l=this.driver.getParentElement(l)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(ZE(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!ZE(e))return;const s=e[Ag];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Ig(t,SR)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Kb(t,SR))}removeNode(t,e,n,r){if(ZE(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Ag]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return ZE(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,zE,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,gR,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return T_(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Ag];if(e&&e.setForRemoval){if(t[Ag]=J8,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(SR)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Ig(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?T_(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function Yxe(i){return new gi(3402,!1)}()}_flushAnimations(t,e){const n=new XE,r=[],s=new Map,o=[],l=new Map,u=new Map,p=new Map,v=new Set;this.disabledNodes.forEach(_n=>{v.add(_n);const Vn=this.driver.query(_n,".ng-animate-queued",!0);for(let Fn=0;Fn<Vn.length;Fn++)v.add(Vn[Fn])});const x=this.bodyNode,I=Array.from(this.statesByElement.keys()),M=n6(I,this.collectedEnterElements),F=new Map;let j=0;M.forEach((_n,Vn)=>{const Fn=pR+j++;F.set(Vn,Fn),_n.forEach(Cn=>Ig(Cn,Fn))});const X=[],ce=new Set,we=new Set;for(let _n=0;_n<this.collectedLeaveElements.length;_n++){const Vn=this.collectedLeaveElements[_n],Fn=Vn[Ag];Fn&&Fn.setForRemoval&&(X.push(Vn),ce.add(Vn),Fn.hasAnimation?this.driver.query(Vn,".ng-star-inserted",!0).forEach(Cn=>ce.add(Cn)):we.add(Vn))}const ye=new Map,Ae=n6(I,Array.from(ce));Ae.forEach((_n,Vn)=>{const Fn=NE+j++;ye.set(Vn,Fn),_n.forEach(Cn=>Ig(Cn,Fn))}),t.push(()=>{M.forEach((_n,Vn)=>{const Fn=F.get(Vn);_n.forEach(Cn=>Kb(Cn,Fn))}),Ae.forEach((_n,Vn)=>{const Fn=ye.get(Vn);_n.forEach(Cn=>Kb(Cn,Fn))}),X.forEach(_n=>{this.processLeaveNode(_n)})});const We=[],ot=[];for(let _n=this._namespaceList.length-1;_n>=0;_n--)this._namespaceList[_n].drainQueuedTransitions(e).forEach(Fn=>{const Cn=Fn.player,Bn=Fn.element;if(We.push(Cn),this.collectedEnterElements.length){const _s=Bn[Ag];if(_s&&_s.setForMove){if(_s.previousTriggersValues&&_s.previousTriggersValues.has(Fn.triggerName)){const fs=_s.previousTriggersValues.get(Fn.triggerName),ps=this.statesByElement.get(Fn.element);if(ps&&ps.has(Fn.triggerName)){const Mr=ps.get(Fn.triggerName);Mr.value=fs,ps.set(Fn.triggerName,Mr)}}return void Cn.destroy()}}const Wi=!x||!this.driver.containsElement(x,Bn),wi=ye.get(Bn),Ji=F.get(Bn),hr=this._buildInstruction(Fn,n,Ji,wi,Wi);if(hr.errors&&hr.errors.length)return void ot.push(hr);if(Wi)return Cn.onStart(()=>tC(Bn,hr.fromStyles)),Cn.onDestroy(()=>dv(Bn,hr.toStyles)),void r.push(Cn);if(Fn.isFallbackTransition)return Cn.onStart(()=>tC(Bn,hr.fromStyles)),Cn.onDestroy(()=>dv(Bn,hr.toStyles)),void r.push(Cn);const Is=[];hr.timelines.forEach(_s=>{_s.stretchStartingKeyframe=!0,this.disabledNodes.has(_s.element)||Is.push(_s)}),hr.timelines=Is,n.append(Bn,hr.timelines),o.push({instruction:hr,player:Cn,element:Bn}),hr.queriedElements.forEach(_s=>Fp(l,_s,[]).push(Cn)),hr.preStyleProps.forEach((_s,fs)=>{if(_s.size){let ps=u.get(fs);ps||u.set(fs,ps=new Set),_s.forEach((Mr,Co)=>ps.add(Co))}}),hr.postStyleProps.forEach((_s,fs)=>{let ps=p.get(fs);ps||p.set(fs,ps=new Set),_s.forEach((Mr,Co)=>ps.add(Co))})});if(ot.length){const _n=[];ot.forEach(Vn=>{_n.push(function Kxe(i,t){return new gi(3505,!1)}())}),We.forEach(Vn=>Vn.destroy()),this.reportError(_n)}const Mt=new Map,Xe=new Map;o.forEach(_n=>{const Vn=_n.element;n.has(Vn)&&(Xe.set(Vn,Vn),this._beforeAnimationBuild(_n.player.namespaceId,_n.instruction,Mt))}),r.forEach(_n=>{const Vn=_n.element;this._getPreviousPlayers(Vn,!1,_n.namespaceId,_n.triggerName,null).forEach(Cn=>{Fp(Mt,Vn,[]).push(Cn),Cn.destroy()})});const yt=X.filter(_n=>s6(_n,u,p)),tn=new Map;t6(tn,this.driver,we,p,iy).forEach(_n=>{s6(_n,u,p)&&yt.push(_n)});const Qn=new Map;M.forEach((_n,Vn)=>{t6(Qn,this.driver,new Set(_n),u,"!")}),yt.forEach(_n=>{const Vn=tn.get(_n),Fn=Qn.get(_n);tn.set(_n,new Map([...Array.from(Vn?.entries()??[]),...Array.from(Fn?.entries()??[])]))});const Un=[],An=[],Nn={};o.forEach(_n=>{const{element:Vn,player:Fn,instruction:Cn}=_n;if(n.has(Vn)){if(v.has(Vn))return Fn.onDestroy(()=>dv(Vn,Cn.toStyles)),Fn.disabled=!0,Fn.overrideTotalTime(Cn.totalTime),void r.push(Fn);let Bn=Nn;if(Xe.size>1){let wi=Vn;const Ji=[];for(;wi=wi.parentNode;){const hr=Xe.get(wi);if(hr){Bn=hr;break}Ji.push(wi)}Ji.forEach(hr=>Xe.set(hr,Bn))}const Wi=this._buildAnimation(Fn.namespaceId,Cn,Mt,s,Qn,tn);if(Fn.setRealPlayer(Wi),Bn===Nn)Un.push(Fn);else{const wi=this.playersByElement.get(Bn);wi&&wi.length&&(Fn.parentPlayer=T_(wi)),r.push(Fn)}}else tC(Vn,Cn.fromStyles),Fn.onDestroy(()=>dv(Vn,Cn.toStyles)),An.push(Fn),v.has(Vn)&&r.push(Fn)}),An.forEach(_n=>{const Vn=s.get(_n.element);if(Vn&&Vn.length){const Fn=T_(Vn);_n.setRealPlayer(Fn)}}),r.forEach(_n=>{_n.parentPlayer?_n.syncPlayerEvents(_n.parentPlayer):_n.destroy()});for(let _n=0;_n<X.length;_n++){const Vn=X[_n],Fn=Vn[Ag];if(Kb(Vn,NE),Fn&&Fn.hasAnimation)continue;let Cn=[];if(l.size){let Wi=l.get(Vn);Wi&&Wi.length&&Cn.push(...Wi);let wi=this.driver.query(Vn,gR,!0);for(let Ji=0;Ji<wi.length;Ji++){let hr=l.get(wi[Ji]);hr&&hr.length&&Cn.push(...hr)}}const Bn=Cn.filter(Wi=>!Wi.destroyed);Bn.length?Jwe(this,Vn,Bn):this.processLeaveNode(Vn)}return X.length=0,Un.forEach(_n=>{this.players.push(_n),_n.onDone(()=>{_n.destroy();const Vn=this.players.indexOf(_n);this.players.splice(Vn,1)}),_n.play()}),Un}elementContainsData(t,e){let n=!1;const r=e[Ag];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const l=this.playersByQueriedElement.get(t);l&&(o=l)}else{const l=this.playersByElement.get(t);if(l){const u=!s||s==bA;l.forEach(p=>{p.queued||!u&&p.triggerName!=r||o.push(p)})}}return(n||r)&&(o=o.filter(l=>!(n&&n!=l.namespaceId||r&&r!=l.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,l=e.isRemovalTransition?void 0:e.triggerName;for(const u of e.timelines){const p=u.element,v=p!==s,x=Fp(n,p,[]);this._getPreviousPlayers(p,v,o,l,e.toState).forEach(M=>{const F=M.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),M.destroy(),x.push(M)})}tC(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const l=e.triggerName,u=e.element,p=[],v=new Set,x=new Set,I=e.timelines.map(F=>{const j=F.element;v.add(j);const X=j[Ag];if(X&&X.removedBeforeQueried)return new vw(F.duration,F.delay);const ce=j!==u,we=function eAe(i){const t=[];return r6(i,t),t}((n.get(j)||$we).map(Mt=>Mt.getRealPlayer())).filter(Mt=>!!Mt.element&&Mt.element===j),ye=s.get(j),Ae=o.get(j),We=M8(0,this._normalizer,0,F.keyframes,ye,Ae),ot=this._buildPlayer(F,We,we);if(F.subTimeline&&r&&x.add(j),ce){const Mt=new MR(t,l,j);Mt.setRealPlayer(ot),p.push(Mt)}return ot});p.forEach(F=>{Fp(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function Kwe(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,F.element,F))}),v.forEach(F=>Ig(F,B8));const M=T_(I);return M.onDestroy(()=>{v.forEach(F=>Kb(F,B8)),dv(u,e.toStyles)}),x.forEach(F=>{Fp(r,F,[]).push(M)}),M}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new vw(t.duration,t.delay)}}class MR{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new vw,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>lR(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Fp(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function ZE(i){return i&&1===i.nodeType}function e6(i,t){const e=i.style.display;return i.style.display=t??"none",e}function t6(i,t,e,n,r){const s=[];e.forEach(u=>s.push(e6(u)));const o=[];n.forEach((u,p)=>{const v=new Map;u.forEach(x=>{const I=t.computeStyle(p,x,r);v.set(x,I),(!I||0==I.length)&&(p[Ag]=qwe,o.push(p))}),i.set(p,v)});let l=0;return e.forEach(u=>e6(u,s[l++])),o}function n6(i,t){const e=new Map;if(i.forEach(l=>e.set(l,[])),0==t.length)return e;const r=new Set(t),s=new Map;function o(l){if(!l)return 1;let u=s.get(l);if(u)return u;const p=l.parentNode;return u=e.has(p)?p:r.has(p)?1:o(p),s.set(l,u),u}return t.forEach(l=>{const u=o(l);1!==u&&e.get(u).push(l)}),e}function Ig(i,t){i.classList?.add(t)}function Kb(i,t){i.classList?.remove(t)}function Jwe(i,t,e){T_(e).onDone(()=>i.processLeaveNode(t))}function r6(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof kV?r6(n.players,t):t.push(n)}}function s6(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class QE{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Ywe(t,e,n),this._timelineEngine=new Uwe(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let l=this._triggerCache[o];if(!l){const u=[],v=_R(this._driver,s,u,[]);if(u.length)throw function zxe(i,t){return new gi(3404,!1)}();l=function Nwe(i,t,e){return new Bwe(i,t,e)}(r,v,this._normalizer),this._triggerCache[o]=l}this._transitionEngine.registerTrigger(e,r,l)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=D8(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,l]=D8(n);return this._timelineEngine.listen(o,e,l,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let iAe=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&dv(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dv(this._element,this._initialStyles),this._endStyles&&(dv(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(tC(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(tC(this._element,this._endStyles),this._endStyles=null),dv(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function DR(i){let t=null;return i.forEach((e,n)=>{(function rAe(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class o6{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:W8(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class sAe{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return k8(t,e)}getParentElement(t){return dR(t)}query(t,e,n){return O8(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const u={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const p=new Map,v=o.filter(M=>M instanceof o6);(function cwe(i,t){return 0===i||0===t})(n,r)&&v.forEach(M=>{M.currentSnapshot.forEach((F,j)=>p.set(j,F))});let x=function swe(i){return i.length?i[0]instanceof Map?i:i.map(t=>z8(t)):[]}(e).map(M=>D_(M));x=function uwe(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(l=>o.set(l,W8(i,l)))}}return t}(t,x,p);const I=function nAe(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=DR(t[0]),t.length>1&&(n=DR(t[t.length-1]))):t instanceof Map&&(e=DR(t)),e||n?new iAe(i,e,n):null}(t,x);return new o6(t,x,u,I)}}let oAe=(()=>{class i extends DV{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ea.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?LV(e):e;return a6(this._renderer,null,n,"register",[r]),new aAe(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(Xn(c),Xn(Xu))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class aAe extends class uJ{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new lAe(this._id,t,e||{},this._renderer)}}class lAe{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return a6(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function a6(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const l6="@.disabled";let cAe=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const l=o?.parentNode(s);l&&o.removeChild(l,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let v=this._rendererCache.get(s);return v||(v=new c6("",s,this.engine),this._rendererCache.set(s,v)),v}const o=n.id,l=n.id+"-"+this._currentId;this._currentId++,this.engine.register(l,e);const u=v=>{Array.isArray(v)?v.forEach(u):this.engine.registerTrigger(o,l,e,v.name,v)};return n.data.animation.forEach(u),new uAe(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,l]=s;o(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(Xn(c),Xn(QE),Xn(Yo))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})();class c6{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==l6?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class uAe extends c6{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==l6?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function hAe(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function dAe(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,l=>{this.factory.scheduleListenerCallback(l._data||-1,n,l)})}return this.delegate.listen(t,e,n)}}const u6=[{provide:DV,useClass:oAe},{provide:AR,useFactory:function pAe(){return new Rwe}},{provide:QE,useClass:(()=>{class i extends QE{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(Xn(Xu),Xn(fR),Xn(AR),Xn(Rx))},i.\u0275prov=Yi({token:i,factory:i.\u0275fac}),i})()},{provide:c,useFactory:function gAe(i,t,e){return new cAe(i,t,e)},deps:[HI,QE,Yo]}],LR=[{provide:fR,useFactory:()=>new sAe},{provide:RF,useValue:"BrowserAnimations"},...u6],h6=[{provide:fR,useClass:F8},{provide:RF,useValue:"NoopAnimations"},...u6];let mAe=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?h6:LR}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({providers:LR,imports:[qN]}),i})();const vAe=["sliderHandle"],yAe=["sliderHandleStart"],_Ae=["sliderHandleEnd"],CAe=function(i,t){return{left:i,width:t}};function bAe(i,t){if(1&i&&si(0,"span",4),2&i){const e=_e();ve("ngStyle",ys(1,CAe,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const xAe=function(i,t){return{bottom:i,height:t}};function wAe(i,t){if(1&i&&si(0,"span",4),2&i){const e=_e();ve("ngStyle",ys(1,xAe,null!=e.offset?e.offset+"%":e.handleValues[0]+"%",e.diff?e.diff+"%":e.handleValues[1]-e.handleValues[0]+"%"))}}const AAe=function(i){return{height:i}};function IAe(i,t){if(1&i&&si(0,"span",4),2&i){const e=_e();ve("ngStyle",Bi(1,AAe,e.handleValue+"%"))}}const SAe=function(i){return{width:i}};function EAe(i,t){if(1&i&&si(0,"span",4),2&i){const e=_e();ve("ngStyle",Bi(1,SAe,e.handleValue+"%"))}}const PR=function(i,t){return{left:i,bottom:t}};function TAe(i,t){if(1&i){const e=Pi();ct(0,"span",5,6),mn("keydown",function(r){return wt(e),It(_e().onHandleKeydown(r))})("mousedown",function(r){return wt(e),It(_e().onMouseDown(r))})("touchstart",function(r){return wt(e),It(_e().onTouchStart(r))})("touchmove",function(r){return wt(e),It(_e().onTouchMove(r))})("touchend",function(r){return wt(e),It(_e().onTouchEnd(r))}),ht()}if(2&i){const e=_e();tf("transition",e.dragging?"none":null),ve("ngStyle",ys(8,PR,"horizontal"==e.orientation?e.handleValue+"%":null,"vertical"==e.orientation?e.handleValue+"%":null)),vr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const d6=function(i){return{"p-slider-handle-active":i}};function MAe(i,t){if(1&i){const e=Pi();ct(0,"span",7,8),mn("keydown",function(r){return wt(e),It(_e().onHandleKeydown(r,0))})("mousedown",function(r){return wt(e),It(_e().onMouseDown(r,0))})("touchstart",function(r){return wt(e),It(_e().onTouchStart(r,0))})("touchmove",function(r){return wt(e),It(_e().onTouchMove(r,0))})("touchend",function(r){return wt(e),It(_e().onTouchEnd(r))}),ht()}if(2&i){const e=_e();tf("transition",e.dragging?"none":null),ve("ngStyle",ys(9,PR,e.rangeStartLeft,e.rangeStartBottom))("ngClass",Bi(12,d6,0==e.handleIndex)),vr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[0]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}function DAe(i,t){if(1&i){const e=Pi();ct(0,"span",7,9),mn("keydown",function(r){return wt(e),It(_e().onHandleKeydown(r,1))})("mousedown",function(r){return wt(e),It(_e().onMouseDown(r,1))})("touchstart",function(r){return wt(e),It(_e().onTouchStart(r,1))})("touchmove",function(r){return wt(e),It(_e().onTouchMove(r,1))})("touchend",function(r){return wt(e),It(_e().onTouchEnd(r))}),ht()}if(2&i){const e=_e();tf("transition",e.dragging?"none":null),ve("ngStyle",ys(9,PR,e.rangeEndLeft,e.rangeEndBottom))("ngClass",Bi(12,d6,1==e.handleIndex)),vr("tabindex",e.disabled?null:e.tabindex)("aria-valuemin",e.min)("aria-valuenow",e.value?e.value[1]:null)("aria-valuemax",e.max)("aria-labelledby",e.ariaLabelledBy)}}const LAe=function(i,t,e,n){return{"p-slider p-component":!0,"p-disabled":i,"p-slider-horizontal":t,"p-slider-vertical":e,"p-slider-animate":n}},PAe={provide:jc,useExisting:hs(()=>RAe),multi:!0};let RAe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.renderer=n,this.ngZone=r,this.cd=s,this.min=0,this.max=100,this.orientation="horizontal",this.tabindex=0,this.onChange=new jn,this.onSlideEnd=new jn,this.handleValues=[],this.onModelChange=()=>{},this.onModelTouched=()=>{},this.handleIndex=0}onMouseDown(e,n){this.disabled||(this.dragging=!0,this.updateDomData(),this.sliderHandleClick=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,this.bindDragListeners(),e.target.focus(),e.preventDefault(),this.animate&&Gt.removeClass(this.el.nativeElement.children[0],"p-slider-animate"))}onTouchStart(e,n){if(!this.disabled){var r=e.changedTouches[0];this.startHandleValue=this.range?this.handleValues[n]:this.handleValue,this.dragging=!0,this.handleIndex=this.range&&this.handleValues&&this.handleValues[0]===this.max?0:n,"horizontal"===this.orientation?(this.startx=parseInt(r.clientX,10),this.barWidth=this.el.nativeElement.children[0].offsetWidth):(this.starty=parseInt(r.clientY,10),this.barHeight=this.el.nativeElement.children[0].offsetHeight),this.animate&&Gt.removeClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault()}}onTouchMove(e,n){if(!this.disabled){var s,r=e.changedTouches[0];s="horizontal"===this.orientation?Math.floor(100*(parseInt(r.clientX,10)-this.startx)/this.barWidth)+this.startHandleValue:Math.floor(100*(this.starty-parseInt(r.clientY,10))/this.barHeight)+this.startHandleValue,this.setValueFromHandle(e,s),e.preventDefault()}}onTouchEnd(e,n){this.disabled||(this.dragging=!1,this.onSlideEnd.emit(this.range?{originalEvent:e,values:this.values}:{originalEvent:e,value:this.value}),this.animate&&Gt.addClass(this.el.nativeElement.children[0],"p-slider-animate"),e.preventDefault())}onBarClick(e){this.disabled||(this.sliderHandleClick||(this.updateDomData(),this.handleChange(e)),this.sliderHandleClick=!1)}onHandleKeydown(e,n){this.disabled||(38==e.which||39==e.which?this.spin(e,1,n):(37==e.which||40==e.which)&&this.spin(e,-1,n))}spin(e,n,r){let s=(this.step||1)*n;this.range?(this.handleIndex=r,this.updateValue(this.values[this.handleIndex]+s),this.updateHandleValue()):(this.updateValue(this.value+s),this.updateHandleValue()),e.preventDefault()}handleChange(e){let n=this.calculateHandleValue(e);this.setValueFromHandle(e,n)}bindDragListeners(){this.ngZone.runOutsideAngular(()=>{const e=this.el?this.el.nativeElement.ownerDocument:"document";this.dragListener||(this.dragListener=this.renderer.listen(e,"mousemove",n=>{this.dragging&&this.ngZone.run(()=>{this.handleChange(n)})})),this.mouseupListener||(this.mouseupListener=this.renderer.listen(e,"mouseup",n=>{this.dragging&&(this.dragging=!1,this.ngZone.run(()=>{this.onSlideEnd.emit(this.range?{originalEvent:n,values:this.values}:{originalEvent:n,value:this.value}),this.animate&&Gt.addClass(this.el.nativeElement.children[0],"p-slider-animate")}))}))})}unbindDragListeners(){this.dragListener&&this.dragListener(),this.mouseupListener&&this.mouseupListener()}setValueFromHandle(e,n){this.sliderHandleClick=!1;let r=this.getValueFromHandle(n);this.range?this.step?this.handleStepChange(r,this.values[this.handleIndex]):(this.handleValues[this.handleIndex]=n,this.updateValue(r,e)):this.step?this.handleStepChange(r,this.value):(this.handleValue=n,this.updateValue(r,e)),this.cd.markForCheck()}handleStepChange(e,n){let r=e-n,s=n;r<0?s=n+Math.ceil(e/this.step-n/this.step)*this.step:r>0&&(s=n+Math.floor(e/this.step-n/this.step)*this.step),this.updateValue(s),this.updateHandleValue()}writeValue(e){this.range?this.values=e||[0,0]:this.value=e||0,this.updateHandleValue(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get rangeStartLeft(){return this.isVertical()?null:this.handleValues[0]+"%"}get rangeStartBottom(){return this.isVertical()?this.handleValues[0]+"%":"auto"}get rangeEndLeft(){return this.isVertical()?null:this.handleValues[1]+"%"}get rangeEndBottom(){return this.isVertical()?this.handleValues[1]+"%":"auto"}isVertical(){return"vertical"===this.orientation}updateDomData(){let e=this.el.nativeElement.children[0].getBoundingClientRect();this.initX=e.left+Gt.getWindowScrollLeft(),this.initY=e.top+Gt.getWindowScrollTop(),this.barWidth=this.el.nativeElement.children[0].offsetWidth,this.barHeight=this.el.nativeElement.children[0].offsetHeight}calculateHandleValue(e){return"horizontal"===this.orientation?100*(e.pageX-this.initX)/this.barWidth:100*(this.initY+this.barHeight-e.pageY)/this.barHeight}updateHandleValue(){this.range?(this.handleValues[0]=100*(this.values[0]<this.min?0:this.values[0]-this.min)/(this.max-this.min),this.handleValues[1]=100*(this.values[1]>this.max?100:this.values[1]-this.min)/(this.max-this.min)):this.handleValue=this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)}updateValue(e,n){if(this.range){let r=e;0==this.handleIndex?(r<this.min?(r=this.min,this.handleValues[0]=0):r>this.values[1]&&(r>this.max&&(r=this.max,this.handleValues[0]=100),this.handleValues[0]=r),this.sliderHandleStart.nativeElement.focus()):(r>this.max?(r=this.max,this.handleValues[1]=100,this.offset=this.handleValues[1]):r<this.min?(r=this.min,this.handleValues[1]=r):r<this.values[0]&&(this.offset=this.handleValues[1]),this.sliderHandleEnd.nativeElement.focus()),this.diff=Math.abs(this.handleValues[0]-this.handleValues[1]),this.offset=Math.min(this.handleValues[0],this.handleValues[1]),this.values[this.handleIndex]=this.getNormalizedValue(r),this.onModelChange([this.minVal,this.maxVal]),this.onChange.emit({event:n,values:this.values})}else e<this.min?(e=this.min,this.handleValue=0):e>this.max&&(e=this.max,this.handleValue=100),this.value=this.getNormalizedValue(e),this.onModelChange(this.value),this.onChange.emit({event:n,value:this.value}),this.sliderHandle.nativeElement.focus()}getValueFromHandle(e){return e/100*(this.max-this.min)+this.min}getDecimalsCount(e){return e&&Math.floor(e)!==e&&e.toString().split(".")[1].length||0}getNormalizedValue(e){let n=this.getDecimalsCount(this.step);return n>0?+e.toFixed(n):Math.floor(e)}ngOnDestroy(){this.unbindDragListeners()}get minVal(){return Math.min(this.values[1],this.values[0])}get maxVal(){return Math.max(this.values[1],this.values[0])}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(d),Qt(Yo),Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-slider"]],viewQuery:function(e,n){if(1&e&&(is(vAe,5),is(yAe,5),is(_Ae,5)),2&e){let r;or(r=ar())&&(n.sliderHandle=r.first),or(r=ar())&&(n.sliderHandleStart=r.first),or(r=ar())&&(n.sliderHandleEnd=r.first)}},hostAttrs:[1,"p-element"],inputs:{animate:"animate",disabled:"disabled",min:"min",max:"max",orientation:"orientation",step:"step",range:"range",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex"},outputs:{onChange:"onChange",onSlideEnd:"onSlideEnd"},features:[ko([PAe])],decls:8,vars:16,consts:[[3,"ngStyle","ngClass","click"],["class","p-slider-range",3,"ngStyle",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],["class","p-slider-handle",3,"transition","ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend",4,"ngIf"],[1,"p-slider-range",3,"ngStyle"],[1,"p-slider-handle",3,"ngStyle","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandle",""],[1,"p-slider-handle",3,"ngStyle","ngClass","keydown","mousedown","touchstart","touchmove","touchend"],["sliderHandleStart",""],["sliderHandleEnd",""]],template:function(e,n){1&e&&(ct(0,"div",0),mn("click",function(s){return n.onBarClick(s)}),Ze(1,bAe,1,4,"span",1),Ze(2,wAe,1,4,"span",1),Ze(3,IAe,1,3,"span",1),Ze(4,EAe,1,3,"span",1),Ze(5,TAe,2,11,"span",2),Ze(6,MAe,2,14,"span",3),Ze(7,DAe,2,14,"span",3),ht()),2&e&&(Vr(n.styleClass),ve("ngStyle",n.style)("ngClass",Nf(11,LAe,n.disabled,"horizontal"==n.orientation,"vertical"==n.orientation,n.animate)),De(1),ve("ngIf",n.range&&"horizontal"==n.orientation),De(1),ve("ngIf",n.range&&"vertical"==n.orientation),De(1),ve("ngIf",!n.range&&"vertical"==n.orientation),De(1),ve("ngIf",!n.range&&"horizontal"==n.orientation),De(1),ve("ngIf",!n.range),De(1),ve("ngIf",n.range),De(1),ve("ngIf",n.range))},dependencies:[_o,Oo,Ko],styles:[".p-slider{position:relative}.p-slider .p-slider-handle{position:absolute;cursor:grab;touch-action:none;display:block}.p-slider-range{position:absolute;display:block}.p-slider-horizontal .p-slider-range{top:0;left:0;height:100%}.p-slider-horizontal .p-slider-handle{top:50%}.p-slider-vertical{height:100px}.p-slider-vertical .p-slider-handle{left:50%}.p-slider-vertical .p-slider-range{bottom:0;left:0;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),kAe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();function OAe(i,t){if(1&i&&(ct(0,"span"),cr(1),ht()),2&i){const e=_e();De(1),ds(e.label)}}function FAe(i,t){1&i&&qi(0)}const xA=function(i){return{height:i}},NAe=function(i,t){return{"p-highlight":i,"p-disabled":t}},BAe=function(i){return{"p-highlight":i}},f6=function(i){return{"pi pi-check":i}},wA=function(i){return{$implicit:i}},zAe=["container"],VAe=["filterInput"],UAe=["in"],HAe=["items"],GAe=["scroller"];function WAe(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(2);De(1),ds(e.valuesAsString||"empty")}}function jAe(i,t){if(1&i){const e=Pi();ct(0,"span",18),mn("click",function(r){wt(e);const s=_e().$implicit;return It(_e(3).removeChip(s,r))}),ht()}}function $Ae(i,t){if(1&i&&(ct(0,"div",14,15)(2,"span",16),cr(3),ht(),Ze(4,jAe,1,0,"span",17),ht()),2&i){const e=t.$implicit,n=_e(3);De(3),ds(n.findLabelByValue(e)),De(1),ve("ngIf",!n.disabled)}}function qAe(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(3);De(1),ds(e.placeholder||e.defaultLabel||"empty")}}function XAe(i,t){if(1&i&&(Hr(0),Ze(1,$Ae,5,2,"div",13),Ze(2,qAe,2,1,"ng-container",7),Gr()),2&i){const e=_e(2);De(1),ve("ngForOf",e.value),De(1),ve("ngIf",!e.value||0===e.value.length)}}function YAe(i,t){if(1&i&&(Hr(0),Ze(1,WAe,2,1,"ng-container",7),Ze(2,XAe,3,2,"ng-container",7),Gr()),2&i){const e=_e();De(1),ve("ngIf","comma"===e.display),De(1),ve("ngIf","chip"===e.display)}}function KAe(i,t){1&i&&qi(0)}function ZAe(i,t){if(1&i){const e=Pi();ct(0,"i",19),mn("click",function(r){return wt(e),It(_e().clear(r))}),ht()}}function QAe(i,t){1&i&&qi(0)}function JAe(i,t){1&i&&qi(0)}const p6=function(i){return{options:i}};function eIe(i,t){if(1&i&&(Hr(0),Ze(1,JAe,1,0,"ng-container",8),Gr()),2&i){const e=_e(3);De(1),ve("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Bi(2,p6,e.filterOptions))}}const tIe=function(i){return{"p-checkbox-disabled":i}},nIe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}};function iIe(i,t){if(1&i){const e=Pi();ct(0,"div",34)(1,"div",2)(2,"input",35),mn("focus",function(){return wt(e),It(_e(4).onHeaderCheckboxFocus())})("blur",function(){return wt(e),It(_e(4).onHeaderCheckboxBlur())})("keydown.space",function(r){return wt(e),It(_e(4).toggleAll(r))}),ht()(),ct(3,"div",36),mn("click",function(r){return wt(e),It(_e(4).toggleAll(r))}),si(4,"span",37),ht()()}if(2&i){const e=_e(4);ve("ngClass",Bi(6,tIe,e.disabled||e.toggleAllDisabled)),De(2),ve("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),De(1),ve("ngClass",qu(8,nIe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),vr("aria-checked",e.allChecked),De(1),ve("ngClass",Bi(12,f6,e.allChecked))}}function rIe(i,t){if(1&i){const e=Pi();ct(0,"div",38)(1,"input",39,40),mn("input",function(r){return wt(e),It(_e(4).onFilterInputChange(r))}),ht(),si(3,"span",41),ht()}if(2&i){const e=_e(4);De(1),ve("value",e.filterValue||"")("disabled",e.disabled),vr("autocomplete",e.autocomplete)("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function sIe(i,t){if(1&i){const e=Pi();Ze(0,iIe,5,14,"div",30),Ze(1,rIe,4,5,"div",31),ct(2,"button",32),mn("click",function(r){return wt(e),It(_e(3).close(r))}),si(3,"span",33),ht()}if(2&i){const e=_e(3);ve("ngIf",e.showToggleAll&&!e.selectionLimit),De(1),ve("ngIf",e.filter)}}function oIe(i,t){if(1&i&&(ct(0,"div",26),nu(1),Ze(2,QAe,1,0,"ng-container",27),Ze(3,eIe,2,4,"ng-container",28),Ze(4,sIe,4,2,"ng-template",null,29,vc),ht()),2&i){const e=co(5),n=_e(2);De(2),ve("ngTemplateOutlet",n.headerTemplate),De(1),ve("ngIf",n.filterTemplate)("ngIfElse",e)}}function aIe(i,t){1&i&&qi(0)}const g6=function(i,t){return{$implicit:i,options:t}};function lIe(i,t){if(1&i&&Ze(0,aIe,1,0,"ng-container",8),2&i){const e=t.$implicit,n=t.options;_e(2),ve("ngTemplateOutlet",co(6))("ngTemplateOutletContext",ys(2,g6,e,n))}}function cIe(i,t){1&i&&qi(0)}function uIe(i,t){if(1&i&&Ze(0,cIe,1,0,"ng-container",8),2&i){const e=t.options;ve("ngTemplateOutlet",_e(4).loaderTemplate)("ngTemplateOutletContext",Bi(2,p6,e))}}function hIe(i,t){1&i&&(Hr(0),Ze(1,uIe,1,4,"ng-template",45),Gr())}function dIe(i,t){if(1&i){const e=Pi();ct(0,"p-scroller",42,43),mn("onLazyLoad",function(r){return wt(e),It(_e(2).onLazyLoad.emit(r))}),Ze(2,lIe,1,5,"ng-template",44),Ze(3,hIe,2,0,"ng-container",7),ht()}if(2&i){const e=_e(2);la(Bi(9,xA,e.scrollHeight)),ve("items",e.optionsToRender)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("tabindex",-1)("lazy",e.lazy)("options",e.virtualScrollOptions),De(3),ve("ngIf",e.loaderTemplate)}}function fIe(i,t){1&i&&qi(0)}const pIe=function(){return{}};function gIe(i,t){if(1&i&&(Hr(0),Ze(1,fIe,1,0,"ng-container",8),Gr()),2&i){_e();const e=co(6),n=_e();De(1),ve("ngTemplateOutlet",e)("ngTemplateOutletContext",ys(3,g6,n.optionsToRender,xa(2,pIe)))}}function mIe(i,t){if(1&i&&(ct(0,"span"),cr(1),ht()),2&i){const e=_e().$implicit,n=_e(4);De(1),ds(n.getOptionGroupLabel(e)||"empty")}}function vIe(i,t){1&i&&qi(0)}function yIe(i,t){1&i&&qi(0)}function _Ie(i,t){if(1&i&&(ct(0,"li",51),Ze(1,mIe,2,1,"span",7),Ze(2,vIe,1,0,"ng-container",8),ht(),Ze(3,yIe,1,0,"ng-container",8)),2&i){const e=t.$implicit,n=_e(2).options,r=co(5),s=_e(2);ve("ngStyle",Bi(6,xA,n.itemSize+"px")),De(1),ve("ngIf",!s.groupTemplate),De(1),ve("ngTemplateOutlet",s.groupTemplate)("ngTemplateOutletContext",Bi(8,wA,e)),De(1),ve("ngTemplateOutlet",r)("ngTemplateOutletContext",Bi(10,wA,s.getOptionGroupChildren(e)))}}function CIe(i,t){if(1&i&&(Hr(0),Ze(1,_Ie,4,12,"ng-template",50),Gr()),2&i){const e=_e().$implicit;De(1),ve("ngForOf",e)}}function bIe(i,t){1&i&&qi(0)}function xIe(i,t){if(1&i&&(Hr(0),Ze(1,bIe,1,0,"ng-container",8),Gr()),2&i){const e=_e().$implicit,n=co(5);De(1),ve("ngTemplateOutlet",n)("ngTemplateOutletContext",Bi(2,wA,e))}}function wIe(i,t){if(1&i){const e=Pi();ct(0,"p-multiSelectItem",52),mn("onClick",function(r){return wt(e),It(_e(4).onOptionClick(r))})("onKeydown",function(r){return wt(e),It(_e(4).onOptionKeydown(r))}),ht()}if(2&i){const e=t.$implicit,n=_e(2).options,r=_e(2);ve("option",e)("selected",r.isSelected(e))("label",r.getOptionLabel(e))("disabled",r.isOptionDisabled(e))("template",r.itemTemplate)("itemSize",n.itemSize)}}function AIe(i,t){1&i&&Ze(0,wIe,1,6,"ng-template",50),2&i&&ve("ngForOf",t.$implicit)}function IIe(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(4);De(1),Yh(" ",e.emptyFilterMessageLabel," ")}}function SIe(i,t){1&i&&qi(0,null,54)}function EIe(i,t){if(1&i&&(ct(0,"li",53),Ze(1,IIe,2,1,"ng-container",28),Ze(2,SIe,2,0,"ng-container",27),ht()),2&i){const e=_e().options,n=_e(2);ve("ngStyle",Bi(4,xA,e.itemSize+"px")),De(1),ve("ngIf",!n.emptyFilterTemplate&&!n.emptyTemplate)("ngIfElse",n.emptyFilter),De(1),ve("ngTemplateOutlet",n.emptyFilterTemplate||n.emptyTemplate)}}function TIe(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(4);De(1),Yh(" ",e.emptyMessageLabel," ")}}function MIe(i,t){1&i&&qi(0,null,55)}function DIe(i,t){if(1&i&&(ct(0,"li",53),Ze(1,TIe,2,1,"ng-container",28),Ze(2,MIe,2,0,"ng-container",27),ht()),2&i){const e=_e().options,n=_e(2);ve("ngStyle",Bi(4,xA,e.itemSize+"px")),De(1),ve("ngIf",!n.emptyTemplate)("ngIfElse",n.empty),De(1),ve("ngTemplateOutlet",n.emptyTemplate)}}function LIe(i,t){if(1&i&&(ct(0,"ul",46,47),Ze(2,CIe,2,1,"ng-container",7),Ze(3,xIe,2,4,"ng-container",7),Ze(4,AIe,1,1,"ng-template",null,48,vc),Ze(6,EIe,3,6,"li",49),Ze(7,DIe,3,6,"li",49),ht()),2&i){const e=t.options,n=_e(2);la(e.contentStyle),ve("ngClass",e.contentStyleClass),De(2),ve("ngIf",n.group),De(1),ve("ngIf",!n.group),De(3),ve("ngIf",n.hasFilter()&&n.isEmpty()),De(1),ve("ngIf",!n.hasFilter()&&n.isEmpty())}}function PIe(i,t){1&i&&qi(0)}function RIe(i,t){if(1&i&&(ct(0,"div",56),nu(1,1),Ze(2,PIe,1,0,"ng-container",27),ht()),2&i){const e=_e(2);De(2),ve("ngTemplateOutlet",e.footerTemplate)}}const kIe=function(){return["p-multiselect-panel p-component"]},OIe=function(i,t){return{showTransitionParams:i,hideTransitionParams:t}},FIe=function(i){return{value:"visible",params:i}};function NIe(i,t){if(1&i){const e=Pi();ct(0,"div",20),mn("@overlayAnimation.start",function(r){return wt(e),It(_e().onOverlayAnimationStart(r))})("@overlayAnimation.done",function(r){return wt(e),It(_e().onOverlayAnimationEnd(r))})("keydown",function(r){return wt(e),It(_e().onKeydown(r))})("click",function(r){return wt(e),It(_e().onOverlayClick(r))}),Ze(1,oIe,6,3,"div",21),ct(2,"div",22),Ze(3,dIe,4,11,"p-scroller",23),Ze(4,gIe,2,6,"ng-container",7),Ze(5,LIe,8,7,"ng-template",null,24,vc),ht(),Ze(7,RIe,3,1,"div",25),ht()}if(2&i){const e=_e();Vr(e.panelStyleClass),ve("ngClass",xa(11,kIe))("@overlayAnimation",Bi(15,FIe,ys(12,OIe,e.showTransitionOptions,e.hideTransitionOptions)))("ngStyle",e.panelStyle),De(1),ve("ngIf",e.showHeader),De(1),tf("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),De(1),ve("ngIf",e.virtualScroll),De(1),ve("ngIf",!e.virtualScroll),De(3),ve("ngIf",e.footerFacet||e.footerTemplate)}}const BIe=[[["p-header"]],[["p-footer"]]],zIe=function(i,t,e,n){return{"p-multiselect p-component":!0,"p-multiselect-open":i,"p-multiselect-chip":t,"p-focus":e,"p-disabled":n}},VIe=function(i,t){return{"p-placeholder":i,"p-multiselect-label-empty":t}},UIe=function(){return{"p-multiselect-trigger":!0}},HIe=["p-header","p-footer"],GIe={provide:jc,useExisting:hs(()=>jIe),multi:!0};let WIe=(()=>{class i{constructor(){this.onClick=new jn,this.onKeydown=new jn}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}onOptionKeydown(e){this.onKeydown.emit({originalEvent:e,option:this.option})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Ar({type:i,selectors:[["p-multiSelectItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick",onKeydown:"onKeydown"},decls:6,vars:20,consts:[["pRipple","",1,"p-multiselect-item",3,"ngStyle","ngClass","click","keydown"],[1,"p-checkbox","p-component"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(ct(0,"li",0),mn("click",function(s){return n.onOptionClick(s)})("keydown",function(s){return n.onOptionKeydown(s)}),ct(1,"div",1)(2,"div",2),si(3,"span",3),ht()(),Ze(4,OAe,2,1,"span",4),Ze(5,FAe,1,0,"ng-container",5),ht()),2&e&&(ve("ngStyle",Bi(9,xA,n.itemSize+"px"))("ngClass",ys(11,NAe,n.selected,n.disabled)),vr("aria-label",n.label)("tabindex",n.disabled?null:"0"),De(2),ve("ngClass",Bi(14,BAe,n.selected)),De(1),ve("ngClass",Bi(16,f6,n.selected)),De(1),ve("ngIf",!n.template),De(1),ve("ngTemplateOutlet",n.template)("ngTemplateOutletContext",Bi(18,wA,n.option)))},dependencies:[_o,Oo,Dl,Ko,yh],encapsulation:2}),i})(),jIe=(()=>{class i{constructor(e,n,r,s,o,l){this.el=e,this.renderer=n,this.cd=r,this.filterService=s,this.config=o,this.overlayService=l,this.filter=!0,this.displaySelectedLabel=!0,this.maxSelectedLabels=3,this.selectedItemsLabel="ellipsis",this.showToggleAll=!0,this.emptyFilterMessage="",this.emptyMessage="",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.showHeader=!0,this.autoZIndex=!0,this.baseZIndex=0,this.scrollHeight="200px",this.lazy=!1,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.display="comma",this.autocomplete="on",this.showClear=!1,this.onChange=new jn,this.onFilter=new jn,this.onFocus=new jn,this.onBlur=new jn,this.onClick=new jn,this.onClear=new jn,this.onPanelShow=new jn,this.onPanelHide=new jn,this.onLazyLoad=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}set defaultLabel(e){this._defaultLabel=e,this.updateLabel()}get defaultLabel(){return this._defaultLabel}set placeholder(e){this._placeholder=e,this.updateLabel()}get placeholder(){return this._placeholder}get options(){return this._options}set options(e){this._options=e,this.updateLabel()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.updateLabel(),this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"selectedItems":this.selectedItemsTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngAfterViewInit(){this.overlayVisible&&this.show()}ngAfterViewChecked(){this.filtered&&(this.alignOverlay(),this.filtered=!1)}getOptionLabel(e){return this.optionLabel?gr.resolveFieldData(e,this.optionLabel):e&&null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?gr.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}getOptionGroupLabel(e){return this.optionGroupLabel?gr.resolveFieldData(e,this.optionGroupLabel):e&&null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?gr.resolveFieldData(e,this.optionGroupChildren):e.items}isOptionDisabled(e){return(this.optionDisabled?gr.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled)||this.maxSelectionLimitReached&&!this.isSelected(e)}writeValue(e){this.value=e,this.updateLabel(),this.updateFilledState(),this.checkSelectionLimit(),this.cd.markForCheck()}checkSelectionLimit(){this.maxSelectionLimitReached=!(!this.selectionLimit||!this.value||this.value.length!==this.selectionLimit)}updateFilledState(){this.filled=this.value&&this.value.length>0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e){let n=e.option;if(this.isOptionDisabled(n))return;let r=this.getOptionValue(n),s=this.findSelectionIndex(r);-1!=s?(this.value=this.value.filter((o,l)=>l!=s),this.selectionLimit&&(this.maxSelectionLimitReached=!1)):((!this.selectionLimit||!this.value||this.value.length<this.selectionLimit)&&(this.value=[...this.value||[],r]),this.checkSelectionLimit()),this.onModelChange(this.value),this.onChange.emit({originalEvent:e.originalEvent,value:this.value,itemValue:r}),this.updateLabel(),this.updateFilledState()}isSelected(e){return-1!=this.findSelectionIndex(this.getOptionValue(e))}findSelectionIndex(e){let n=-1;if(this.value)for(let r=0;r<this.value.length;r++)if(gr.equals(this.value[r],e,this.dataKey)){n=r;break}return n}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateFilledState(),this.updateLabel(),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}show(){this.overlayVisible||(this.overlayVisible=!0,this.preventDocumentDefault=!0,this.cd.markForCheck())}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.overlay=e.element,this.virtualScroll&&this.scroller?.setContentEl(this.itemsViewChild.nativeElement),this.appendOverlay(),this.autoZIndex&&Ll.set("overlay",this.overlay,this.baseZIndex+this.config.zIndex.overlay),this.alignOverlay(),this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener(),this.filterInputChild&&this.filterInputChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterInputChild.nativeElement.focus()),this.onPanelShow.emit();break;case"void":this.onOverlayHide()}}onOverlayAnimationEnd(e){"void"===e.toState&&Ll.clear(e.element)}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):Gt.appendChild(this.overlay,this.appendTo),this.overlay.style.minWidth||(this.overlay.style.minWidth=Gt.getWidth(this.containerViewChild.nativeElement)+"px"))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.overlay&&(this.appendTo?Gt.absolutePosition(this.overlay,this.containerViewChild.nativeElement):Gt.relativePosition(this.overlay,this.containerViewChild.nativeElement))}hide(){this.overlayVisible=!1,this.unbindDocumentClickListener(),this.resetFilterOnHide&&this.resetFilter(),this.onPanelHide.emit(),this.cd.markForCheck()}resetFilter(){this.filterInputChild&&this.filterInputChild.nativeElement&&(this.filterInputChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}close(e){this.hide(),e.preventDefault(),e.stopPropagation()}clear(e){this.value=null,this.updateLabel(),this.updateFilledState(),this.onClear.emit(),this.onModelChange(this.value),e.stopPropagation()}onMouseclick(e,n){this.disabled||this.readonly||e.target.isSameNode(this.accessibleViewChild.nativeElement)||(this.onClick.emit(e),!this.isOverlayClick(e)&&!Gt.hasClass(e.target,"p-multiselect-token-icon")&&(this.overlayVisible?this.hide():(n.focus(),this.show())))}removeChip(e,n){this.value=this.value.filter(r=>!gr.equals(r,e,this.dataKey)),this.onModelChange(this.value),this.checkSelectionLimit(),this.onChange.emit({originalEvent:n,value:this.value,itemValue:e}),this.updateLabel(),this.updateFilledState()}isOverlayClick(e){let n=e.target;return!!this.overlay&&(this.overlay.isSameNode(n)||this.overlay.contains(n))}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.el.nativeElement.contains(e.target)||this.isOverlayClick(e))}onInputFocus(e){this.focus=!0,this.onFocus.emit({originalEvent:e})}onInputBlur(e){this.focus=!1,this.onBlur.emit({originalEvent:e}),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}onOptionKeydown(e){if(!this.readonly)switch(e.originalEvent.which){case 40:var n=this.findNextItem(e.originalEvent.target.parentElement);n&&n.focus(),e.originalEvent.preventDefault();break;case 38:var r=this.findPrevItem(e.originalEvent.target.parentElement);r&&r.focus(),e.originalEvent.preventDefault();break;case 13:this.onOptionClick(e),e.originalEvent.preventDefault();break;case 9:this.hide()}}findNextItem(e){let n=e.nextElementSibling;return n?Gt.hasClass(n.children[0],"p-disabled")||Gt.isHidden(n.children[0])||Gt.hasClass(n,"p-multiselect-item-group")?this.findNextItem(n):n.children[0]:null}findPrevItem(e){let n=e.previousElementSibling;return n?Gt.hasClass(n.children[0],"p-disabled")||Gt.isHidden(n.children[0])||Gt.hasClass(n,"p-multiselect-item-group")?this.findPrevItem(n):n.children[0]:null}onKeydown(e){switch(e.which){case 40:!this.overlayVisible&&e.altKey&&(this.show(),e.preventDefault());break;case 32:this.overlayVisible||(this.show(),e.preventDefault());break;case 27:this.hide()}}updateLabel(){if(this.value&&this.options&&this.value.length&&this.displaySelectedLabel){let e="";for(let n=0;n<this.value.length;n++){let r=this.findLabelByValue(this.value[n]);r&&(e.length>0&&(e+=", "),e+=r)}if(this.value.length<=this.maxSelectedLabels||"ellipsis"===this.selectedItemsLabel)this.valuesAsString=e;else{let n=/{(.*?)}/;this.valuesAsString=n.test(this.selectedItemsLabel)?this.selectedItemsLabel.replace(this.selectedItemsLabel.match(n)[0],this.value.length+""):this.selectedItemsLabel}}else this.valuesAsString=this.placeholder||this.defaultLabel}findLabelByValue(e){if(this.group){let n=null;for(let r=0;r<this.options.length;r++){let s=this.getOptionGroupChildren(this.options[r]);if(s&&(n=this.searchLabelByValue(e,s),n))break}return n}return this.searchLabelByValue(e,this.options)}searchLabelByValue(e,n){let r=null;for(let s=0;s<n.length;s++){let o=n[s],l=this.getOptionValue(o);if(null==e&&null==l||gr.equals(e,l,this.dataKey)){r=this.getOptionLabel(o);break}}return r}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Gc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Gc.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilterInputChange(e){this._filterValue=e.target.value,this.activateFilter(),this.onFilter.emit({originalEvent:e,filter:this._filterValue}),this.cd.detectChanges(),this.alignOverlay()}activateFilter(){if(this.hasFilter()&&this._options){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.group){let n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this.filterService.filter(this.options,e,this._filterValue,this.filterMatchMode,this.filterLocale)}else this._filteredOptions=null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","click",n=>{!this.preventDocumentDefault&&this.isOutsideClicked(n)&&this.hide(),this.preventDocumentDefault=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener)}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}onWindowResize(){this.overlayVisible&&!Gt.isTouchDevice()&&this.hide()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new yw(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}onOverlayHide(){this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null,this.onModelTouched()}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.overlay&&Ll.clear(this.overlay),this.restoreOverlayAppend(),this.onOverlayHide()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(d),Qt(Ho),Qt(d1),Qt(Mp),Qt(Zx))},i.\u0275cmp=Ar({type:i,selectors:[["p-multiSelect"]],contentQueries:function(e,n,r){if(1&e&&(Ga(r,f1,5),Ga(r,zD,5),Ga(r,_l,4)),2&e){let s;or(s=ar())&&(n.footerFacet=s.first),or(s=ar())&&(n.headerFacet=s.first),or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(zAe,5),is(VAe,5),is(UAe,5),is(HAe,5),is(GAe,5)),2&e){let r;or(r=ar())&&(n.containerViewChild=r.first),or(r=ar())&&(n.filterInputChild=r.first),or(r=ar())&&(n.accessibleViewChild=r.first),or(r=ar())&&(n.itemsViewChild=r.first),or(r=ar())&&(n.scroller=r.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,n){2&e&&Tp("p-inputwrapper-filled",n.filled)("p-inputwrapper-focus",n.focus||n.overlayVisible)("p-multiselect-clearable",n.showClear&&!n.disabled)},inputs:{style:"style",styleClass:"styleClass",panelStyle:"panelStyle",panelStyleClass:"panelStyleClass",inputId:"inputId",disabled:"disabled",readonly:"readonly",group:"group",filter:"filter",filterPlaceHolder:"filterPlaceHolder",filterLocale:"filterLocale",overlayVisible:"overlayVisible",tabindex:"tabindex",appendTo:"appendTo",dataKey:"dataKey",name:"name",label:"label",ariaLabelledBy:"ariaLabelledBy",displaySelectedLabel:"displaySelectedLabel",maxSelectedLabels:"maxSelectedLabels",selectionLimit:"selectionLimit",selectedItemsLabel:"selectedItemsLabel",showToggleAll:"showToggleAll",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",showHeader:"showHeader",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",filterBy:"filterBy",scrollHeight:"scrollHeight",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",ariaFilterLabel:"ariaFilterLabel",filterMatchMode:"filterMatchMode",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",display:"display",autocomplete:"autocomplete",showClear:"showClear",defaultLabel:"defaultLabel",placeholder:"placeholder",options:"options",filterValue:"filterValue",itemSize:"itemSize"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onClear:"onClear",onPanelShow:"onPanelShow",onPanelHide:"onPanelHide",onLazyLoad:"onLazyLoad"},features:[ko([GIe])],ngContentSelectors:HIe,decls:13,vars:34,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","readonly","aria-haspopup","listbox","role","listbox",3,"disabled","focus","blur","keydown"],["in",""],[1,"p-multiselect-label-container",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[1,"p-multiselect-label",3,"ngClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-multiselect-clear-icon pi pi-times",3,"click",4,"ngIf"],[3,"ngClass"],[1,"p-multiselect-trigger-icon",3,"ngClass"],[3,"ngClass","ngStyle","class","keydown","click",4,"ngIf"],["class","p-multiselect-token",4,"ngFor","ngForOf"],[1,"p-multiselect-token"],["token",""],[1,"p-multiselect-token-label"],["class","p-multiselect-token-icon pi pi-times-circle",3,"click",4,"ngIf"],[1,"p-multiselect-token-icon","pi","pi-times-circle",3,"click"],[1,"p-multiselect-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle","keydown","click"],["class","p-multiselect-header",4,"ngIf"],[1,"p-multiselect-items-wrapper"],[3,"items","style","itemSize","autoSize","tabindex","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],["class","p-multiselect-footer",4,"ngIf"],[1,"p-multiselect-header"],[4,"ngTemplateOutlet"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],["class","p-multiselect-filter-container",4,"ngIf"],["type","button","pRipple","",1,"p-multiselect-close","p-link",3,"click"],[1,"p-multiselect-close-icon","pi","pi-times"],[1,"p-checkbox","p-component",3,"ngClass"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[1,"p-multiselect-filter-container"],["type","text","role","textbox",1,"p-multiselect-filter","p-inputtext","p-component",3,"value","disabled","input"],["filterInput",""],[1,"p-multiselect-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","tabindex","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","content"],["pTemplate","loader"],["role","listbox","aria-multiselectable","true",1,"p-multiselect-items","p-component",3,"ngClass"],["items",""],["itemslist",""],["class","p-multiselect-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-multiselect-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","itemSize","onClick","onKeydown"],[1,"p-multiselect-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""],[1,"p-multiselect-footer"]],template:function(e,n){if(1&e){const r=Pi();Ff(BIe),ct(0,"div",0,1),mn("click",function(o){wt(r);const l=co(4);return It(n.onMouseclick(o,l))}),ct(2,"div",2)(3,"input",3,4),mn("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)})("keydown",function(o){return n.onKeydown(o)}),ht()(),ct(5,"div",5)(6,"div",6),Ze(7,YAe,3,2,"ng-container",7),Ze(8,KAe,1,0,"ng-container",8),ht(),Ze(9,ZAe,1,0,"i",9),ht(),ct(10,"div",10),si(11,"span",11),ht(),Ze(12,NIe,8,17,"div",12),ht()}2&e&&(Vr(n.styleClass),ve("ngClass",Nf(23,zIe,n.overlayVisible,"chip"===n.display,n.focus,n.disabled))("ngStyle",n.style),De(3),ve("disabled",n.disabled),vr("label",n.label)("id",n.inputId)("name",n.name)("tabindex",n.tabindex)("aria-expanded",n.overlayVisible)("aria-labelledby",n.ariaLabelledBy),De(2),ve("pTooltip",n.tooltip)("tooltipPosition",n.tooltipPosition)("positionStyle",n.tooltipPositionStyle)("tooltipStyleClass",n.tooltipStyleClass),De(1),ve("ngClass",ys(28,VIe,n.valuesAsString===(n.defaultLabel||n.placeholder),!(null!=n.valuesAsString&&0!==n.valuesAsString.length||null!=n.placeholder&&0!==n.placeholder.length))),De(1),ve("ngIf",!n.selectedItemsTemplate),De(1),ve("ngTemplateOutlet",n.selectedItemsTemplate)("ngTemplateOutletContext",Bi(31,wA,n.value)),De(1),ve("ngIf",null!=n.value&&n.filled&&!n.disabled&&n.showClear),De(1),ve("ngClass",xa(33,UIe)),De(1),ve("ngClass",n.dropdownIcon),De(1),ve("ngIf",n.overlayVisible))},dependencies:[_o,ru,Oo,Dl,Ko,_l,s_,yh,F1,WIe],styles:[".p-multiselect{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-multiselect-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-multiselect-label-container{overflow:hidden;flex:1 1 auto;cursor:pointer}.p-multiselect-label{display:block;white-space:nowrap;cursor:pointer;overflow:hidden;text-overflow:ellipsis}.p-multiselect-label-empty{overflow:hidden;visibility:hidden}.p-multiselect-token{cursor:default;display:inline-flex;align-items:center;flex:0 0 auto}.p-multiselect-token-icon{cursor:pointer}.p-multiselect .p-multiselect-panel{min-width:100%}.p-multiselect-panel{position:absolute;top:0;left:0}.p-multiselect-items-wrapper{overflow:auto}.p-multiselect-items{margin:0;padding:0;list-style-type:none}.p-multiselect-item{cursor:pointer;display:flex;align-items:center;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-multiselect-header{display:flex;align-items:center;justify-content:space-between}.p-multiselect-filter-container{position:relative;flex:1 1 auto}.p-multiselect-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-multiselect-filter-container .p-inputtext{width:100%}.p-multiselect-close{display:flex;align-items:center;justify-content:center;flex-shrink:0;overflow:hidden;position:relative}.p-fluid .p-multiselect{display:flex}.p-multiselect-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-multiselect-clearable{position:relative}\n"],encapsulation:2,data:{animation:[ry("overlayAnimation",[Eu(":enter",[Ja({opacity:0,transform:"scaleY(0.8)"}),Cc("{{showTransitionParams}}")]),Eu(":leave",[Cc("{{hideTransitionParams}}",Ja({opacity:0}))])])]},changeDetection:0}),i})(),$Ie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na,nv,su,iv,Na,iv]}),i})();function qIe(i,t){if(1&i){const e=Pi();ct(0,"span",3),mn("click",function(r){return wt(e),It(_e().clear(r))})("keydown.enter",function(r){return wt(e),It(_e().clear(r))}),ht()}if(2&i){const e=_e();ve("ngClass",e.iconCancelClass)("ngStyle",e.iconCancelStyle),vr("tabindex",e.disabled||e.readonly?null:"0")}}function XIe(i,t){if(1&i){const e=Pi();ct(0,"span",4),mn("click",function(r){const o=wt(e).index;return It(_e().rate(r,o))})("keydown.enter",function(r){const o=wt(e).index;return It(_e().rate(r,o))}),ht()}if(2&i){const e=t.index,n=_e();ve("ngClass",!n.value||e>=n.value?n.iconOffClass:n.iconOnClass)("ngStyle",!n.value||e>=n.value?n.iconOffStyle:n.iconOnStyle),vr("tabindex",n.disabled||n.readonly?null:"0")}}const YIe=function(i,t){return{"p-readonly":i,"p-disabled":t}},KIe={provide:jc,useExisting:hs(()=>ZIe),multi:!0};let ZIe=(()=>{class i{constructor(e){this.cd=e,this.stars=5,this.cancel=!0,this.iconOnClass="pi pi-star-fill",this.iconOffClass="pi pi-star",this.iconCancelClass="pi pi-ban",this.onRate=new jn,this.onCancel=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.starsArray=[];for(let e=0;e<this.stars;e++)this.starsArray[e]=e}rate(e,n){!this.readonly&&!this.disabled&&(this.value=n+1,this.onModelChange(this.value),this.onModelTouched(),this.onRate.emit({originalEvent:e,value:n+1})),e.preventDefault()}clear(e){!this.readonly&&!this.disabled&&(this.value=null,this.onModelChange(this.value),this.onModelTouched(),this.onCancel.emit(e)),e.preventDefault()}writeValue(e){this.value=e,this.cd.detectChanges()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(Qt(Ho))},i.\u0275cmp=Ar({type:i,selectors:[["p-rating"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",readonly:"readonly",stars:"stars",cancel:"cancel",iconOnClass:"iconOnClass",iconOnStyle:"iconOnStyle",iconOffClass:"iconOffClass",iconOffStyle:"iconOffStyle",iconCancelClass:"iconCancelClass",iconCancelStyle:"iconCancelStyle"},outputs:{onRate:"onRate",onCancel:"onCancel"},features:[ko([KIe])],decls:3,vars:6,consts:[[1,"p-rating",3,"ngClass"],["class","p-rating-icon p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter",4,"ngIf"],["class","p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter",4,"ngFor","ngForOf"],[1,"p-rating-icon","p-rating-cancel",3,"ngClass","ngStyle","click","keydown.enter"],[1,"p-rating-icon",3,"ngClass","ngStyle","click","keydown.enter"]],template:function(e,n){1&e&&(ct(0,"div",0),Ze(1,qIe,1,3,"span",1),Ze(2,XIe,1,3,"span",2),ht()),2&e&&(ve("ngClass",ys(3,YIe,n.readonly,n.disabled)),De(1),ve("ngIf",n.cancel),De(1),ve("ngForOf",n.starsArray))},dependencies:[_o,ru,Oo,Ko],styles:[".p-rating-icon{cursor:pointer}.p-rating.p-rating-readonly .p-rating-icon{cursor:default}\n"],encapsulation:2,changeDetection:0}),i})(),QIe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();const JIe=["rb"],e1e=function(i,t,e){return{"p-radiobutton-label":!0,"p-radiobutton-label-active":i,"p-disabled":t,"p-radiobutton-label-focus":e}};function t1e(i,t){if(1&i){const e=Pi();ct(0,"label",4),mn("click",function(r){return wt(e),It(_e().select(r))}),cr(1),ht()}if(2&i){const e=_e(),n=co(3);Vr(e.labelStyleClass),ve("ngClass",qu(5,e1e,n.checked,e.disabled,e.focused)),vr("for",e.inputId),De(1),ds(e.label)}}const n1e=function(i,t,e){return{"p-radiobutton p-component":!0,"p-radiobutton-checked":i,"p-radiobutton-disabled":t,"p-radiobutton-focused":e}},i1e=function(i,t,e){return{"p-radiobutton-box":!0,"p-highlight":i,"p-disabled":t,"p-focus":e}},r1e={provide:jc,useExisting:hs(()=>o1e),multi:!0};let s1e=(()=>{class i{constructor(){this.accessors=[]}add(e,n){this.accessors.push([e,n])}remove(e){this.accessors=this.accessors.filter(n=>n[1]!==e)}select(e){this.accessors.forEach(n=>{this.isSameGroup(n,e)&&n[1]!==e&&n[1].writeValue(e.value)})}isSameGroup(e,n){return!!e[0].control&&e[0].control.root===n.control.control.root&&e[1].name===n.name}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Yi({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),o1e=(()=>{class i{constructor(e,n,r){this.cd=e,this.injector=n,this.registry=r,this.onClick=new jn,this.onFocus=new jn,this.onBlur=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}ngOnInit(){this.control=this.injector.get(tv),this.checkName(),this.registry.add(this.control,this)}handleClick(e,n,r){e.preventDefault(),!this.disabled&&(this.select(e),r&&n.focus())}select(e){this.disabled||(this.inputViewChild.nativeElement.checked=!0,this.checked=!0,this.onModelChange(this.value),this.registry.select(this),this.onClick.emit(e))}writeValue(e){this.checked=e==this.value,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.inputViewChild.nativeElement.checked=this.checked),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onModelTouched(),this.onBlur.emit(e)}onChange(e){this.select(e)}focus(){this.inputViewChild.nativeElement.focus()}ngOnDestroy(){this.registry.remove(this)}checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this.throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}throwNameError(){throw new Error('\n          If you define both a name and a formControlName attribute on your radio button, their values\n          must match. Ex: <p-radioButton formControlName="food" name="food"></p-radioButton>\n        ')}}return i.\u0275fac=function(e){return new(e||i)(Qt(Ho),Qt(Au),Qt(s1e))},i.\u0275cmp=Ar({type:i,selectors:[["p-radioButton"]],viewQuery:function(e,n){if(1&e&&is(JIe,5),2&e){let r;or(r=ar())&&(n.inputViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",formControlName:"formControlName",name:"name",disabled:"disabled",label:"label",tabindex:"tabindex",inputId:"inputId",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[ko([r1e])],decls:7,vars:23,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","radio",3,"checked","disabled","change","focus","blur"],["rb",""],[3,"ngClass","click"],[1,"p-radiobutton-icon"],[3,"class","ngClass","click",4,"ngIf"]],template:function(e,n){if(1&e){const r=Pi();ct(0,"div",0)(1,"div",1)(2,"input",2,3),mn("change",function(o){return n.onChange(o)})("focus",function(o){return n.onInputFocus(o)})("blur",function(o){return n.onInputBlur(o)}),ht()(),ct(4,"div",4),mn("click",function(o){wt(r);const l=co(3);return It(n.handleClick(o,l,!0))}),si(5,"span",5),ht()(),Ze(6,t1e,2,9,"label",6)}2&e&&(Vr(n.styleClass),ve("ngStyle",n.style)("ngClass",qu(15,n1e,n.checked,n.disabled,n.focused)),De(2),ve("checked",n.checked)("disabled",n.disabled),vr("id",n.inputId)("name",n.name)("value",n.value)("tabindex",n.tabindex)("aria-checked",n.checked)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy),De(2),ve("ngClass",qu(19,i1e,n.checked,n.disabled,n.focused)),De(2),ve("ngIf",n.label))},dependencies:[_o,Oo,Ko],encapsulation:2,changeDetection:0}),i})(),a1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();nb([Ja({transform:"{{transform}}",opacity:0}),Cc("{{transition}}",Ja({transform:"none",opacity:1}))]),nb([Cc("{{transition}}",Ja({transform:"{{transform}}",opacity:0}))]);let A1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,rv,su,rv,Na]}),i})(),I1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})(),D1e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,su,Na,Na]}),i})();const L1e=_1([],y1(iw,(i,{graphs:t})=>t)),P1e=_1({id:"default",label:"default",nodes:[],edges:[]},y1(C1,(i,{graph:t})=>t)),R1e=_1([],y1(B2,(i,{tags:t})=>t));let cSe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,HV,su,iv,Na,iv]}),i})();const uSe=["headerchkbox"],hSe=["filter"];function dSe(i,t){1&i&&qi(0)}function fSe(i,t){if(1&i&&(ct(0,"div",7),nu(1),Ze(2,dSe,1,0,"ng-container",8),ht()),2&i){const e=_e();De(2),ve("ngTemplateOutlet",e.headerTemplate)}}const v6=function(i){return{"p-checkbox-disabled":i}},pSe=function(i,t,e){return{"p-highlight":i,"p-focus":t,"p-disabled":e}},y6=function(i){return{"pi pi-check":i}};function gSe(i,t){if(1&i){const e=Pi();ct(0,"div",12)(1,"div",13)(2,"input",14),mn("focus",function(){return wt(e),It(_e(2).onHeaderCheckboxFocus())})("blur",function(){return wt(e),It(_e(2).onHeaderCheckboxBlur())})("keydown.space",function(r){return wt(e),It(_e(2).toggleAll(r))}),ht()(),ct(3,"div",15,16),mn("click",function(r){return wt(e),It(_e(2).toggleAll(r))}),si(5,"span",17),ht()()}if(2&i){const e=_e(2);ve("ngClass",Bi(5,v6,e.disabled||e.toggleAllDisabled)),De(2),ve("checked",e.allChecked)("disabled",e.disabled||e.toggleAllDisabled),De(1),ve("ngClass",qu(7,pSe,e.allChecked,e.headerCheckboxFocus,e.disabled||e.toggleAllDisabled)),De(2),ve("ngClass",Bi(11,y6,e.allChecked))}}function mSe(i,t){1&i&&qi(0)}const vSe=function(i){return{options:i}};function ySe(i,t){if(1&i&&(Hr(0),Ze(1,mSe,1,0,"ng-container",18),Gr()),2&i){const e=_e(2);De(1),ve("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",Bi(2,vSe,e.filterOptions))}}function _Se(i,t){if(1&i){const e=Pi();ct(0,"div",20)(1,"input",21,22),mn("input",function(r){return wt(e),It(_e(3).onFilter(r))}),ht(),si(3,"span",23),ht()}if(2&i){const e=_e(3);De(1),ve("value",e.filterValue||"")("disabled",e.disabled),vr("placeholder",e.filterPlaceHolder)("aria-label",e.ariaFilterLabel)}}function CSe(i,t){1&i&&Ze(0,_Se,4,4,"div",19),2&i&&ve("ngIf",_e(2).filter)}function bSe(i,t){if(1&i&&(ct(0,"div",7),Ze(1,gSe,6,13,"div",9),Ze(2,ySe,2,4,"ng-container",10),Ze(3,CSe,1,1,"ng-template",null,11,vc),ht()),2&i){const e=co(4),n=_e();De(1),ve("ngIf",n.checkbox&&n.multiple&&n.showToggleAll),De(1),ve("ngIf",n.filterTemplate)("ngIfElse",e)}}function xSe(i,t){if(1&i&&(ct(0,"span"),cr(1),ht()),2&i){const e=_e().$implicit,n=_e(2);De(1),ds(n.getOptionGroupLabel(e)||"empty")}}function wSe(i,t){1&i&&qi(0)}function ASe(i,t){1&i&&qi(0)}const RR=function(i){return{$implicit:i}};function ISe(i,t){if(1&i&&(ct(0,"li",25),Ze(1,xSe,2,1,"span",3),Ze(2,wSe,1,0,"ng-container",18),ht(),Ze(3,ASe,1,0,"ng-container",18)),2&i){const e=t.$implicit,n=_e(2),r=co(8);De(1),ve("ngIf",!n.groupTemplate),De(1),ve("ngTemplateOutlet",n.groupTemplate)("ngTemplateOutletContext",Bi(5,RR,e)),De(1),ve("ngTemplateOutlet",r)("ngTemplateOutletContext",Bi(7,RR,n.getOptionGroupChildren(e)))}}function SSe(i,t){if(1&i&&(Hr(0),Ze(1,ISe,4,9,"ng-template",24),Gr()),2&i){const e=_e();De(1),ve("ngForOf",e.optionsToRender)}}function ESe(i,t){1&i&&qi(0)}function TSe(i,t){if(1&i&&(Hr(0),Ze(1,ESe,1,0,"ng-container",18),Gr()),2&i){const e=_e(),n=co(8);De(1),ve("ngTemplateOutlet",n)("ngTemplateOutletContext",Bi(2,RR,e.optionsToRender))}}const MSe=function(i){return{"p-highlight":i}};function DSe(i,t){if(1&i&&(ct(0,"div",12)(1,"div",28),si(2,"span",17),ht()()),2&i){const e=_e().$implicit,n=_e(2);ve("ngClass",Bi(3,v6,n.disabled||n.isOptionDisabled(e))),De(1),ve("ngClass",Bi(5,MSe,n.isSelected(e))),De(1),ve("ngClass",Bi(7,y6,n.isSelected(e)))}}function LSe(i,t){if(1&i&&(ct(0,"span"),cr(1),ht()),2&i){const e=_e().$implicit,n=_e(2);De(1),ds(n.getOptionLabel(e))}}function PSe(i,t){1&i&&qi(0)}const RSe=function(i,t){return{"p-listbox-item":!0,"p-highlight":i,"p-disabled":t}},kSe=function(i,t){return{$implicit:i,index:t}};function OSe(i,t){if(1&i){const e=Pi();ct(0,"li",27),mn("click",function(r){const o=wt(e).$implicit;return It(_e(2).onOptionClick(r,o))})("dblclick",function(r){const o=wt(e).$implicit;return It(_e(2).onOptionDoubleClick(r,o))})("touchend",function(){const s=wt(e).$implicit;return It(_e(2).onOptionTouchEnd(s))})("keydown",function(r){const o=wt(e).$implicit;return It(_e(2).onOptionKeyDown(r,o))}),Ze(1,DSe,3,9,"div",9),Ze(2,LSe,2,1,"span",3),Ze(3,PSe,1,0,"ng-container",18),ht()}if(2&i){const e=t.$implicit,n=t.index,r=_e(2);ve("ngClass",ys(8,RSe,r.isSelected(e),r.isOptionDisabled(e))),vr("tabindex",r.disabled||r.isOptionDisabled(e)?null:"0")("aria-label",r.getOptionLabel(e))("aria-selected",r.isSelected(e)),De(1),ve("ngIf",r.checkbox&&r.multiple),De(1),ve("ngIf",!r.itemTemplate),De(1),ve("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",ys(11,kSe,e,n))}}function FSe(i,t){1&i&&Ze(0,OSe,4,14,"li",26),2&i&&ve("ngForOf",t.$implicit)}function NSe(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(2);De(1),Yh(" ",e.emptyFilterMessageLabel," ")}}function BSe(i,t){1&i&&qi(0,null,30)}function zSe(i,t){if(1&i&&(ct(0,"li",29),Ze(1,NSe,2,1,"ng-container",10),Ze(2,BSe,2,0,"ng-container",8),ht()),2&i){const e=_e();De(1),ve("ngIf",!e.emptyFilterTemplate&&!e.emptyTemplate)("ngIfElse",e.emptyFilter),De(1),ve("ngTemplateOutlet",e.emptyFilterTemplate||e.emptyTemplate)}}function VSe(i,t){if(1&i&&(Hr(0),cr(1),Gr()),2&i){const e=_e(2);De(1),Yh(" ",e.emptyMessageLabel," ")}}function USe(i,t){1&i&&qi(0,null,31)}function HSe(i,t){if(1&i&&(ct(0,"li",29),Ze(1,VSe,2,1,"ng-container",10),Ze(2,USe,2,0,"ng-container",8),ht()),2&i){const e=_e();De(1),ve("ngIf",!e.emptyTemplate)("ngIfElse",e.empty),De(1),ve("ngTemplateOutlet",e.emptyTemplate)}}function GSe(i,t){1&i&&qi(0)}function WSe(i,t){if(1&i&&(ct(0,"div",32),nu(1,1),Ze(2,GSe,1,0,"ng-container",8),ht()),2&i){const e=_e();De(2),ve("ngTemplateOutlet",e.footerTemplate)}}const jSe=[[["p-header"]],[["p-footer"]]],$Se=function(i){return{"p-listbox p-component":!0,"p-disabled":i}},qSe=["p-header","p-footer"],XSe={provide:jc,useExisting:hs(()=>YSe),multi:!0};let YSe=(()=>{class i{constructor(e,n,r,s){this.el=e,this.cd=n,this.filterService=r,this.config=s,this.checkbox=!1,this.filter=!1,this.filterMatchMode="contains",this.metaKeySelection=!0,this.showToggleAll=!0,this.optionGroupChildren="items",this.onChange=new jn,this.onClick=new jn,this.onDblClick=new jn,this.onModelChange=()=>{},this.onModelTouched=()=>{}}get options(){return this._options}set options(e){this._options=e,this.hasFilter()&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngOnInit(){this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.cd.markForCheck()}),this.filterBy&&(this.filterOptions={filter:e=>this.onFilter(e),reset:()=>this.resetFilter()})}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template}})}getOptionLabel(e){return this.optionLabel?gr.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?gr.resolveFieldData(e,this.optionGroupChildren):e.items}getOptionGroupLabel(e){return this.optionGroupLabel?gr.resolveFieldData(e,this.optionGroupLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?gr.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?gr.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onOptionClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||(this.multiple?this.checkbox?this.onOptionClickCheckbox(e,n):this.onOptionClickMultiple(e,n):this.onOptionClickSingle(e,n),this.onClick.emit({originalEvent:e,option:n,value:this.value}),this.optionTouched=!1)}onOptionTouchEnd(e){this.disabled||this.isOptionDisabled(e)||this.readonly||(this.optionTouched=!0)}onOptionDoubleClick(e,n){this.disabled||this.isOptionDisabled(n)||this.readonly||this.onDblClick.emit({originalEvent:e,option:n,value:this.value})}onOptionClickSingle(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?l&&(this.value=null,s=!0):(this.value=this.getOptionValue(n),s=!0)}else this.value=r?null:this.getOptionValue(n),s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickMultiple(e,n){let r=this.isSelected(n),s=!1;if(!this.optionTouched&&this.metaKeySelection){let l=e.metaKey||e.ctrlKey;r?(l?this.removeOption(n):this.value=[this.getOptionValue(n)],s=!0):(this.value=l&&this.value||[],this.value=[...this.value,this.getOptionValue(n)],s=!0)}else r?this.removeOption(n):this.value=[...this.value||[],this.getOptionValue(n)],s=!0;s&&(this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}onOptionClickCheckbox(e,n){this.disabled||this.readonly||(this.isSelected(n)?this.removeOption(n):(this.value=this.value?this.value:[],this.value=[...this.value,this.getOptionValue(n)]),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}removeOption(e){this.value=this.value.filter(n=>!gr.equals(n,this.getOptionValue(e),this.dataKey))}isSelected(e){let n=!1,r=this.getOptionValue(e);if(this.multiple){if(this.value)for(let s of this.value)if(gr.equals(s,r,this.dataKey)){n=!0;break}}else n=gr.equals(this.value,r,this.dataKey);return n}get allChecked(){let e=this.optionsToRender;if(!e||0===e.length)return!1;{let n=0,r=0,s=0,o=this.group?0:this.optionsToRender.length;for(let l of e)if(this.group)for(let u of this.getOptionGroupChildren(l)){let p=this.isOptionDisabled(u),v=this.isSelected(u);if(p)v?n++:r++;else{if(!v)return!1;s++}o++}else{let u=this.isOptionDisabled(l),p=this.isSelected(l);if(u)p?n++:r++;else{if(!p)return!1;s++}}return o===n||o===s||s&&o===s+r+n}}get optionsToRender(){return this._filteredOptions||this.options}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Gc.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Gc.EMPTY_FILTER_MESSAGE)}hasFilter(){return this._filterValue&&this._filterValue.trim().length>0}isEmpty(){return!this.optionsToRender||this.optionsToRender&&0===this.optionsToRender.length}onFilter(e){this._filterValue=e.target.value,this.activateFilter()}activateFilter(){if(this.hasFilter()&&this._options)if(this.group){let e=(this.filterBy||this.optionLabel||"label").split(","),n=[];for(let r of this.options){let s=this.filterService.filter(this.getOptionGroupChildren(r),e,this.filterValue,this.filterMatchMode,this.filterLocale);s&&s.length&&n.push({...r,[this.optionGroupChildren]:s})}this._filteredOptions=n}else this._filteredOptions=this._options.filter(e=>this.filterService.filters[this.filterMatchMode](this.getOptionLabel(e),this._filterValue,this.filterLocale));else this._filteredOptions=null}resetFilter(){this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this._filterValue=null,this._filteredOptions=null}get toggleAllDisabled(){let e=this.optionsToRender;if(!e||0===e.length)return!0;for(let n of e)if(!this.isOptionDisabled(n))return!1;return!0}toggleAll(e){this.disabled||this.toggleAllDisabled||this.readonly||(this.allChecked?this.uncheckAll():this.checkAll(),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),e.preventDefault())}checkAll(){let n=[];this.optionsToRender.forEach(r=>{if(this.group){let s=this.getOptionGroupChildren(r);s&&s.forEach(o=>{let l=this.isOptionDisabled(o);(!l||l&&this.isSelected(o))&&n.push(this.getOptionValue(o))})}else{let s=this.isOptionDisabled(r);(!s||s&&this.isSelected(r))&&n.push(this.getOptionValue(r))}}),this.value=n}uncheckAll(){let n=[];this.optionsToRender.forEach(r=>{this.group?r.items&&r.items.forEach(s=>{this.isOptionDisabled(s)&&this.isSelected(s)&&n.push(this.getOptionValue(s))}):this.isOptionDisabled(r)&&this.isSelected(r)&&n.push(this.getOptionValue(r))}),this.value=n}onOptionKeyDown(e,n){if(this.readonly)return;let r=e.currentTarget;switch(e.which){case 40:var s=this.findNextItem(r);s&&s.focus(),e.preventDefault();break;case 38:var o=this.findPrevItem(r);o&&o.focus(),e.preventDefault();break;case 13:this.onOptionClick(e,n),e.preventDefault()}}findNextItem(e){let n=e.nextElementSibling;return n?Gt.hasClass(n,"p-disabled")||Gt.isHidden(n)||Gt.hasClass(n,"p-listbox-item-group")?this.findNextItem(n):n:null}findPrevItem(e){let n=e.previousElementSibling;return n?Gt.hasClass(n,"p-disabled")||Gt.isHidden(n)||Gt.hasClass(n,"p-listbox-item-group")?this.findPrevItem(n):n:null}onHeaderCheckboxFocus(){this.headerCheckboxFocus=!0}onHeaderCheckboxBlur(){this.headerCheckboxFocus=!1}ngOnDestroy(){this.translationSubscription&&this.translationSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(Qt(qn),Qt(Ho),Qt(d1),Qt(Mp))},i.\u0275cmp=Ar({type:i,selectors:[["p-listbox"]],contentQueries:function(e,n,r){if(1&e&&(Ga(r,zD,5),Ga(r,f1,5),Ga(r,_l,4)),2&e){let s;or(s=ar())&&(n.headerFacet=s.first),or(s=ar())&&(n.footerFacet=s.first),or(s=ar())&&(n.templates=s)}},viewQuery:function(e,n){if(1&e&&(is(uSe,5),is(hSe,5)),2&e){let r;or(r=ar())&&(n.headerCheckboxViewChild=r.first),or(r=ar())&&(n.filterViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{multiple:"multiple",style:"style",styleClass:"styleClass",listStyle:"listStyle",listStyleClass:"listStyleClass",readonly:"readonly",disabled:"disabled",checkbox:"checkbox",filter:"filter",filterBy:"filterBy",filterMatchMode:"filterMatchMode",filterLocale:"filterLocale",metaKeySelection:"metaKeySelection",dataKey:"dataKey",showToggleAll:"showToggleAll",optionLabel:"optionLabel",optionValue:"optionValue",optionGroupChildren:"optionGroupChildren",optionGroupLabel:"optionGroupLabel",optionDisabled:"optionDisabled",ariaFilterLabel:"ariaFilterLabel",filterPlaceHolder:"filterPlaceHolder",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",group:"group",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onClick:"onClick",onDblClick:"onDblClick"},features:[ko([XSe])],ngContentSelectors:qSe,decls:12,vars:17,consts:[[3,"ngClass","ngStyle"],["class","p-listbox-header",4,"ngIf"],["role","listbox","aria-multiselectable","multiple",1,"p-listbox-list"],[4,"ngIf"],["itemslist",""],["class","p-listbox-empty-message",4,"ngIf"],["class","p-listbox-footer",4,"ngIf"],[1,"p-listbox-header"],[4,"ngTemplateOutlet"],["class","p-checkbox p-component",3,"ngClass",4,"ngIf"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-checkbox","p-component",3,"ngClass"],[1,"p-hidden-accessible"],["type","checkbox","readonly","readonly",3,"checked","disabled","focus","blur","keydown.space"],[1,"p-checkbox-box",3,"ngClass","click"],["headerchkbox",""],[1,"p-checkbox-icon",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","p-listbox-filter-container",4,"ngIf"],[1,"p-listbox-filter-container"],["type","text",1,"p-listbox-filter","p-inputtext","p-component",3,"value","disabled","input"],["filter",""],[1,"p-listbox-filter-icon","pi","pi-search"],["ngFor","",3,"ngForOf"],[1,"p-listbox-item-group"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown",4,"ngFor","ngForOf"],["pRipple","","role","option",3,"ngClass","click","dblclick","touchend","keydown"],[1,"p-checkbox-box",3,"ngClass"],[1,"p-listbox-empty-message"],["emptyFilter",""],["empty",""],[1,"p-listbox-footer"]],template:function(e,n){1&e&&(Ff(jSe),ct(0,"div",0),Ze(1,fSe,3,1,"div",1),Ze(2,bSe,5,3,"div",1),ct(3,"div",0)(4,"ul",2),Ze(5,SSe,2,1,"ng-container",3),Ze(6,TSe,2,4,"ng-container",3),Ze(7,FSe,1,1,"ng-template",null,4,vc),Ze(9,zSe,3,3,"li",5),Ze(10,HSe,3,3,"li",5),ht()(),Ze(11,WSe,3,1,"div",6),ht()),2&e&&(Vr(n.styleClass),ve("ngClass",Bi(15,$Se,n.disabled))("ngStyle",n.style),De(1),ve("ngIf",n.headerFacet||n.headerTemplate),De(1),ve("ngIf",n.checkbox&&n.multiple&&n.showToggleAll||n.filter),De(1),Vr(n.listStyleClass),ve("ngClass","p-listbox-list-wrapper")("ngStyle",n.listStyle),De(2),ve("ngIf",n.group),De(1),ve("ngIf",!n.group),De(3),ve("ngIf",n.hasFilter()&&n.isEmpty()),De(1),ve("ngIf",!n.hasFilter()&&n.isEmpty()),De(1),ve("ngIf",n.footerFacet||n.footerTemplate))},dependencies:[_o,ru,Oo,Dl,Ko,yh],styles:[".p-listbox-list-wrapper{overflow:auto}.p-listbox-list{list-style-type:none;margin:0;padding:0}.p-listbox-item{cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;-webkit-user-select:none;user-select:none}.p-listbox-header{display:flex;align-items:center}.p-listbox-filter-container{position:relative;flex:1 1 auto}.p-listbox-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-listbox-filter{width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),KSe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na,su,Na]}),i})();nb([Ja({transform:"{{transform}}",opacity:0}),Cc("{{transition}}")]),nb([Cc("{{transition}}",Ja({transform:"{{transform}}",opacity:0}))]);let nEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,su]}),i})(),aEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na]}),i})(),cEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs,Na]}),i})(),dEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i}),i.\u0275inj=Dr({imports:[Vs]}),i})();const pEe=_1({grid:!1,info:!1},y1(ew("[SysPreference] Retrieve Preferences Success",{_as:"props",_p:void 0}),(i,{Preferences:t})=>t));let gEe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Rr({type:i,bootstrap:[vxe]}),i.\u0275inj=Dr({providers:[BD,Jv],imports:[qN,cQ.forRoot(),Nbe,mAe,c3,Vs,WZ.forRoot({level:Wc.DEBUG}),Are,qV,kAe,Qre,$Ie,dae,N1,rv,e4,R2,N2,c3,Yse,noe,QIe,a1e,z1,A1e,pae,Wpe,Fpe,gxe,O1,I1e,Oae,D1e,uoe,Wle,cSe,e4,KSe,nEe,aEe,cEe,ece,dEe,ace,uge,spe,nv,xZ.forRoot({tags:R1e,graphs:L1e,graph:P1e,preferences:pEe})]}),i})();(function x7(){if(KF)throw new Error("Cannot enable prod mode after platform setup.");YF=!1})(),Pq().bootstrapModule(gEe).catch(i=>console.error(i))},3333:Be=>{Be.exports=function(V,Y){var D=Y.length;if(0!==D){var H=V.length;V.length+=D;for(var B=0;B<D;B++)V[H+B]=Y[B]}}},5343:(Be,be)=>{"use strict";be.byteLength=function O(Q){var U=P(Q),xe=U[1];return 3*(U[0]+xe)/4-xe},be.toByteArray=function te(Q){var U,$,ae=P(Q),xe=ae[0],Oe=ae[1],re=new D(function q(Q,U,ae){return 3*(U+ae)/4-ae}(0,xe,Oe)),ue=0,z=Oe>0?xe-4:xe;for($=0;$<z;$+=4)U=Y[Q.charCodeAt($)]<<18|Y[Q.charCodeAt($+1)]<<12|Y[Q.charCodeAt($+2)]<<6|Y[Q.charCodeAt($+3)],re[ue++]=U>>16&255,re[ue++]=U>>8&255,re[ue++]=255&U;return 2===Oe&&(U=Y[Q.charCodeAt($)]<<2|Y[Q.charCodeAt($+1)]>>4,re[ue++]=255&U),1===Oe&&(U=Y[Q.charCodeAt($)]<<10|Y[Q.charCodeAt($+1)]<<4|Y[Q.charCodeAt($+2)]>>2,re[ue++]=U>>8&255,re[ue++]=255&U),re},be.fromByteArray=function se(Q){for(var U,ae=Q.length,xe=ae%3,Oe=[],ue=0,z=ae-xe;ue<z;ue+=16383)Oe.push(oe(Q,ue,ue+16383>z?z:ue+16383));return 1===xe?Oe.push(V[(U=Q[ae-1])>>2]+V[U<<4&63]+"=="):2===xe&&Oe.push(V[(U=(Q[ae-2]<<8)+Q[ae-1])>>10]+V[U>>4&63]+V[U<<2&63]+"="),Oe.join("")};for(var V=[],Y=[],D=typeof Uint8Array<"u"?Uint8Array:Array,H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=0,W=H.length;B<W;++B)V[B]=H[B],Y[H.charCodeAt(B)]=B;function P(Q){var U=Q.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ae=Q.indexOf("=");return-1===ae&&(ae=U),[ae,ae===U?0:4-ae%4]}function J(Q){return V[Q>>18&63]+V[Q>>12&63]+V[Q>>6&63]+V[63&Q]}function oe(Q,U,ae){for(var Oe=[],re=U;re<ae;re+=3)Oe.push(J((Q[re]<<16&16711680)+(Q[re+1]<<8&65280)+(255&Q[re+2])));return Oe.join("")}Y["-".charCodeAt(0)]=62,Y["_".charCodeAt(0)]=63},3172:(Be,be,V)=>{"use strict";var Y=V(5343),D=V(8461),H="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;be.Buffer=O,be.SlowBuffer=function re(Je){return+Je!=Je&&(Je=0),O.alloc(+Je)},be.INSPECT_MAX_BYTES=50;var B=2147483647;function P(Je){if(Je>B)throw new RangeError('The value "'+Je+'" is invalid for option "size"');var Te=new Uint8Array(Je);return Object.setPrototypeOf(Te,O.prototype),Te}function O(Je,Te,Me){if("number"==typeof Je){if("string"==typeof Te)throw new TypeError('The "string" argument must be of type string. Received type number');return oe(Je)}return q(Je,Te,Me)}function q(Je,Te,Me){if("string"==typeof Je)return function se(Je,Te){if(("string"!=typeof Te||""===Te)&&(Te="utf8"),!O.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);var Me=0|ue(Je,Te),Ot=P(Me),vn=Ot.write(Je,Te);return vn!==Me&&(Ot=Ot.slice(0,vn)),Ot}(Je,Te);if(ArrayBuffer.isView(Je))return function U(Je){if(At(Je,Uint8Array)){var Te=new Uint8Array(Je);return ae(Te.buffer,Te.byteOffset,Te.byteLength)}return Q(Je)}(Je);if(null==Je)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Je);if(At(Je,ArrayBuffer)||Je&&At(Je.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(At(Je,SharedArrayBuffer)||Je&&At(Je.buffer,SharedArrayBuffer)))return ae(Je,Te,Me);if("number"==typeof Je)throw new TypeError('The "value" argument must not be of type number. Received type number');var Ot=Je.valueOf&&Je.valueOf();if(null!=Ot&&Ot!==Je)return O.from(Ot,Te,Me);var vn=function xe(Je){if(O.isBuffer(Je)){var Te=0|Oe(Je.length),Me=P(Te);return 0===Me.length||Je.copy(Me,0,0,Te),Me}return void 0!==Je.length?"number"!=typeof Je.length||Pt(Je.length)?P(0):Q(Je):"Buffer"===Je.type&&Array.isArray(Je.data)?Q(Je.data):void 0}(Je);if(vn)return vn;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Je[Symbol.toPrimitive])return O.from(Je[Symbol.toPrimitive]("string"),Te,Me);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Je)}function te(Je){if("number"!=typeof Je)throw new TypeError('"size" argument must be of type number');if(Je<0)throw new RangeError('The value "'+Je+'" is invalid for option "size"')}function oe(Je){return te(Je),P(Je<0?0:0|Oe(Je))}function Q(Je){for(var Te=Je.length<0?0:0|Oe(Je.length),Me=P(Te),Ot=0;Ot<Te;Ot+=1)Me[Ot]=255&Je[Ot];return Me}function ae(Je,Te,Me){if(Te<0||Je.byteLength<Te)throw new RangeError('"offset" is outside of buffer bounds');if(Je.byteLength<Te+(Me||0))throw new RangeError('"length" is outside of buffer bounds');var Ot;return Ot=void 0===Te&&void 0===Me?new Uint8Array(Je):void 0===Me?new Uint8Array(Je,Te):new Uint8Array(Je,Te,Me),Object.setPrototypeOf(Ot,O.prototype),Ot}function Oe(Je){if(Je>=B)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+B.toString(16)+" bytes");return 0|Je}function ue(Je,Te){if(O.isBuffer(Je))return Je.length;if(ArrayBuffer.isView(Je)||At(Je,ArrayBuffer))return Je.byteLength;if("string"!=typeof Je)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Je);var Me=Je.length,Ot=arguments.length>2&&!0===arguments[2];if(!Ot&&0===Me)return 0;for(var vn=!1;;)switch(Te){case"ascii":case"latin1":case"binary":return Me;case"utf8":case"utf-8":return Ce(Je).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Me;case"hex":return Me>>>1;case"base64":return ci(Je).length;default:if(vn)return Ot?-1:Ce(Je).length;Te=(""+Te).toLowerCase(),vn=!0}}function z(Je,Te,Me){var Ot=!1;if((void 0===Te||Te<0)&&(Te=0),Te>this.length||((void 0===Me||Me>this.length)&&(Me=this.length),Me<=0)||(Me>>>=0)<=(Te>>>=0))return"";for(Je||(Je="utf8");;)switch(Je){case"hex":return Ut(this,Te,Me);case"utf8":case"utf-8":return He(this,Te,Me);case"ascii":return Ct(this,Te,Me);case"latin1":case"binary":return kn(this,Te,Me);case"base64":return xt(this,Te,Me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Dn(this,Te,Me);default:if(Ot)throw new TypeError("Unknown encoding: "+Je);Je=(Je+"").toLowerCase(),Ot=!0}}function $(Je,Te,Me){var Ot=Je[Te];Je[Te]=Je[Me],Je[Me]=Ot}function ne(Je,Te,Me,Ot,vn){if(0===Je.length)return-1;if("string"==typeof Me?(Ot=Me,Me=0):Me>2147483647?Me=2147483647:Me<-2147483648&&(Me=-2147483648),Pt(Me=+Me)&&(Me=vn?0:Je.length-1),Me<0&&(Me=Je.length+Me),Me>=Je.length){if(vn)return-1;Me=Je.length-1}else if(Me<0){if(!vn)return-1;Me=0}if("string"==typeof Te&&(Te=O.from(Te,Ot)),O.isBuffer(Te))return 0===Te.length?-1:ge(Je,Te,Me,Ot,vn);if("number"==typeof Te)return Te&=255,"function"==typeof Uint8Array.prototype.indexOf?vn?Uint8Array.prototype.indexOf.call(Je,Te,Me):Uint8Array.prototype.lastIndexOf.call(Je,Te,Me):ge(Je,[Te],Me,Ot,vn);throw new TypeError("val must be string, number or Buffer")}function ge(Je,Te,Me,Ot,vn){var bs,ii=1,Fi=Je.length,Hs=Te.length;if(void 0!==Ot&&("ucs2"===(Ot=String(Ot).toLowerCase())||"ucs-2"===Ot||"utf16le"===Ot||"utf-16le"===Ot)){if(Je.length<2||Te.length<2)return-1;ii=2,Fi/=2,Hs/=2,Me/=2}function so($l,ql){return 1===ii?$l[ql]:$l.readUInt16BE(ql*ii)}if(vn){var ca=-1;for(bs=Me;bs<Fi;bs++)if(so(Je,bs)===so(Te,-1===ca?0:bs-ca)){if(-1===ca&&(ca=bs),bs-ca+1===Hs)return ca*ii}else-1!==ca&&(bs-=bs-ca),ca=-1}else for(Me+Hs>Fi&&(Me=Fi-Hs),bs=Me;bs>=0;bs--){for(var er=!0,tl=0;tl<Hs;tl++)if(so(Je,bs+tl)!==so(Te,tl)){er=!1;break}if(er)return bs}return-1}function Ue(Je,Te,Me,Ot){Me=Number(Me)||0;var vn=Je.length-Me;Ot?(Ot=Number(Ot))>vn&&(Ot=vn):Ot=vn;var ii=Te.length;Ot>ii/2&&(Ot=ii/2);for(var Fi=0;Fi<Ot;++Fi){var Hs=parseInt(Te.substr(2*Fi,2),16);if(Pt(Hs))return Fi;Je[Me+Fi]=Hs}return Fi}function Re(Je,Te,Me,Ot){return $i(Ce(Te,Je.length-Me),Je,Me,Ot)}function rt(Je,Te,Me,Ot){return $i(function Dt(Je){for(var Te=[],Me=0;Me<Je.length;++Me)Te.push(255&Je.charCodeAt(Me));return Te}(Te),Je,Me,Ot)}function Pe(Je,Te,Me,Ot){return $i(ci(Te),Je,Me,Ot)}function at(Je,Te,Me,Ot){return $i(function Rt(Je,Te){for(var Me,Ot,ii=[],Fi=0;Fi<Je.length&&!((Te-=2)<0);++Fi)Ot=(Me=Je.charCodeAt(Fi))>>8,ii.push(Me%256),ii.push(Ot);return ii}(Te,Je.length-Me),Je,Me,Ot)}function xt(Je,Te,Me){return Y.fromByteArray(0===Te&&Me===Je.length?Je:Je.slice(Te,Me))}function He(Je,Te,Me){Me=Math.min(Je.length,Me);for(var Ot=[],vn=Te;vn<Me;){var so,bs,ca,er,ii=Je[vn],Fi=null,Hs=ii>239?4:ii>223?3:ii>191?2:1;if(vn+Hs<=Me)switch(Hs){case 1:ii<128&&(Fi=ii);break;case 2:128==(192&(so=Je[vn+1]))&&(er=(31&ii)<<6|63&so)>127&&(Fi=er);break;case 3:bs=Je[vn+2],128==(192&(so=Je[vn+1]))&&128==(192&bs)&&(er=(15&ii)<<12|(63&so)<<6|63&bs)>2047&&(er<55296||er>57343)&&(Fi=er);break;case 4:bs=Je[vn+2],ca=Je[vn+3],128==(192&(so=Je[vn+1]))&&128==(192&bs)&&128==(192&ca)&&(er=(15&ii)<<18|(63&so)<<12|(63&bs)<<6|63&ca)>65535&&er<1114112&&(Fi=er)}null===Fi?(Fi=65533,Hs=1):Fi>65535&&(Ot.push((Fi-=65536)>>>10&1023|55296),Fi=56320|1023&Fi),Ot.push(Fi),vn+=Hs}return function gt(Je){var Te=Je.length;if(Te<=4096)return String.fromCharCode.apply(String,Je);for(var Me="",Ot=0;Ot<Te;)Me+=String.fromCharCode.apply(String,Je.slice(Ot,Ot+=4096));return Me}(Ot)}function Ct(Je,Te,Me){var Ot="";Me=Math.min(Je.length,Me);for(var vn=Te;vn<Me;++vn)Ot+=String.fromCharCode(127&Je[vn]);return Ot}function kn(Je,Te,Me){var Ot="";Me=Math.min(Je.length,Me);for(var vn=Te;vn<Me;++vn)Ot+=String.fromCharCode(Je[vn]);return Ot}function Ut(Je,Te,Me){var Ot=Je.length;(!Te||Te<0)&&(Te=0),(!Me||Me<0||Me>Ot)&&(Me=Ot);for(var vn="",ii=Te;ii<Me;++ii)vn+=un[Je[ii]];return vn}function Dn(Je,Te,Me){for(var Ot=Je.slice(Te,Me),vn="",ii=0;ii<Ot.length-1;ii+=2)vn+=String.fromCharCode(Ot[ii]+256*Ot[ii+1]);return vn}function Jt(Je,Te,Me){if(Je%1!=0||Je<0)throw new RangeError("offset is not uint");if(Je+Te>Me)throw new RangeError("Trying to access beyond buffer length")}function nn(Je,Te,Me,Ot,vn,ii){if(!O.isBuffer(Je))throw new TypeError('"buffer" argument must be a Buffer instance');if(Te>vn||Te<ii)throw new RangeError('"value" argument is out of bounds');if(Me+Ot>Je.length)throw new RangeError("Index out of range")}function Ln(Je,Te,Me,Ot,vn,ii){if(Me+Ot>Je.length)throw new RangeError("Index out of range");if(Me<0)throw new RangeError("Index out of range")}function xn(Je,Te,Me,Ot,vn){return Te=+Te,Me>>>=0,vn||Ln(Je,0,Me,4),D.write(Je,Te,Me,Ot,23,4),Me+4}function bn(Je,Te,Me,Ot,vn){return Te=+Te,Me>>>=0,vn||Ln(Je,0,Me,8),D.write(Je,Te,Me,Ot,52,8),Me+8}be.kMaxLength=B,!(O.TYPED_ARRAY_SUPPORT=function W(){try{var Je=new Uint8Array(1),Te={foo:function(){return 42}};return Object.setPrototypeOf(Te,Uint8Array.prototype),Object.setPrototypeOf(Je,Te),42===Je.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(O.prototype,"parent",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.buffer}}),Object.defineProperty(O.prototype,"offset",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.byteOffset}}),O.poolSize=8192,O.from=function(Je,Te,Me){return q(Je,Te,Me)},Object.setPrototypeOf(O.prototype,Uint8Array.prototype),Object.setPrototypeOf(O,Uint8Array),O.alloc=function(Je,Te,Me){return function J(Je,Te,Me){return te(Je),Je<=0?P(Je):void 0!==Te?"string"==typeof Me?P(Je).fill(Te,Me):P(Je).fill(Te):P(Je)}(Je,Te,Me)},O.allocUnsafe=function(Je){return oe(Je)},O.allocUnsafeSlow=function(Je){return oe(Je)},O.isBuffer=function(Te){return null!=Te&&!0===Te._isBuffer&&Te!==O.prototype},O.compare=function(Te,Me){if(At(Te,Uint8Array)&&(Te=O.from(Te,Te.offset,Te.byteLength)),At(Me,Uint8Array)&&(Me=O.from(Me,Me.offset,Me.byteLength)),!O.isBuffer(Te)||!O.isBuffer(Me))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Te===Me)return 0;for(var Ot=Te.length,vn=Me.length,ii=0,Fi=Math.min(Ot,vn);ii<Fi;++ii)if(Te[ii]!==Me[ii]){Ot=Te[ii],vn=Me[ii];break}return Ot<vn?-1:vn<Ot?1:0},O.isEncoding=function(Te){switch(String(Te).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},O.concat=function(Te,Me){if(!Array.isArray(Te))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Te.length)return O.alloc(0);var Ot;if(void 0===Me)for(Me=0,Ot=0;Ot<Te.length;++Ot)Me+=Te[Ot].length;var vn=O.allocUnsafe(Me),ii=0;for(Ot=0;Ot<Te.length;++Ot){var Fi=Te[Ot];if(At(Fi,Uint8Array))ii+Fi.length>vn.length?O.from(Fi).copy(vn,ii):Uint8Array.prototype.set.call(vn,Fi,ii);else{if(!O.isBuffer(Fi))throw new TypeError('"list" argument must be an Array of Buffers');Fi.copy(vn,ii)}ii+=Fi.length}return vn},O.byteLength=ue,O.prototype._isBuffer=!0,O.prototype.swap16=function(){var Te=this.length;if(Te%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Me=0;Me<Te;Me+=2)$(this,Me,Me+1);return this},O.prototype.swap32=function(){var Te=this.length;if(Te%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Me=0;Me<Te;Me+=4)$(this,Me,Me+3),$(this,Me+1,Me+2);return this},O.prototype.swap64=function(){var Te=this.length;if(Te%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Me=0;Me<Te;Me+=8)$(this,Me,Me+7),$(this,Me+1,Me+6),$(this,Me+2,Me+5),$(this,Me+3,Me+4);return this},O.prototype.toLocaleString=O.prototype.toString=function(){var Te=this.length;return 0===Te?"":0===arguments.length?He(this,0,Te):z.apply(this,arguments)},O.prototype.equals=function(Te){if(!O.isBuffer(Te))throw new TypeError("Argument must be a Buffer");return this===Te||0===O.compare(this,Te)},O.prototype.inspect=function(){var Te="",Me=be.INSPECT_MAX_BYTES;return Te=this.toString("hex",0,Me).replace(/(.{2})/g,"$1 ").trim(),this.length>Me&&(Te+=" ... "),"<Buffer "+Te+">"},H&&(O.prototype[H]=O.prototype.inspect),O.prototype.compare=function(Te,Me,Ot,vn,ii){if(At(Te,Uint8Array)&&(Te=O.from(Te,Te.offset,Te.byteLength)),!O.isBuffer(Te))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Te);if(void 0===Me&&(Me=0),void 0===Ot&&(Ot=Te?Te.length:0),void 0===vn&&(vn=0),void 0===ii&&(ii=this.length),Me<0||Ot>Te.length||vn<0||ii>this.length)throw new RangeError("out of range index");if(vn>=ii&&Me>=Ot)return 0;if(vn>=ii)return-1;if(Me>=Ot)return 1;if(this===Te)return 0;for(var Fi=(ii>>>=0)-(vn>>>=0),Hs=(Ot>>>=0)-(Me>>>=0),so=Math.min(Fi,Hs),bs=this.slice(vn,ii),ca=Te.slice(Me,Ot),er=0;er<so;++er)if(bs[er]!==ca[er]){Fi=bs[er],Hs=ca[er];break}return Fi<Hs?-1:Hs<Fi?1:0},O.prototype.includes=function(Te,Me,Ot){return-1!==this.indexOf(Te,Me,Ot)},O.prototype.indexOf=function(Te,Me,Ot){return ne(this,Te,Me,Ot,!0)},O.prototype.lastIndexOf=function(Te,Me,Ot){return ne(this,Te,Me,Ot,!1)},O.prototype.write=function(Te,Me,Ot,vn){if(void 0===Me)vn="utf8",Ot=this.length,Me=0;else if(void 0===Ot&&"string"==typeof Me)vn=Me,Ot=this.length,Me=0;else{if(!isFinite(Me))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Me>>>=0,isFinite(Ot)?(Ot>>>=0,void 0===vn&&(vn="utf8")):(vn=Ot,Ot=void 0)}var ii=this.length-Me;if((void 0===Ot||Ot>ii)&&(Ot=ii),Te.length>0&&(Ot<0||Me<0)||Me>this.length)throw new RangeError("Attempt to write outside buffer bounds");vn||(vn="utf8");for(var Fi=!1;;)switch(vn){case"hex":return Ue(this,Te,Me,Ot);case"utf8":case"utf-8":return Re(this,Te,Me,Ot);case"ascii":case"latin1":case"binary":return rt(this,Te,Me,Ot);case"base64":return Pe(this,Te,Me,Ot);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,Te,Me,Ot);default:if(Fi)throw new TypeError("Unknown encoding: "+vn);vn=(""+vn).toLowerCase(),Fi=!0}},O.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},O.prototype.slice=function(Te,Me){var Ot=this.length;(Te=~~Te)<0?(Te+=Ot)<0&&(Te=0):Te>Ot&&(Te=Ot),(Me=void 0===Me?Ot:~~Me)<0?(Me+=Ot)<0&&(Me=0):Me>Ot&&(Me=Ot),Me<Te&&(Me=Te);var vn=this.subarray(Te,Me);return Object.setPrototypeOf(vn,O.prototype),vn},O.prototype.readUintLE=O.prototype.readUIntLE=function(Te,Me,Ot){Te>>>=0,Me>>>=0,Ot||Jt(Te,Me,this.length);for(var vn=this[Te],ii=1,Fi=0;++Fi<Me&&(ii*=256);)vn+=this[Te+Fi]*ii;return vn},O.prototype.readUintBE=O.prototype.readUIntBE=function(Te,Me,Ot){Te>>>=0,Me>>>=0,Ot||Jt(Te,Me,this.length);for(var vn=this[Te+--Me],ii=1;Me>0&&(ii*=256);)vn+=this[Te+--Me]*ii;return vn},O.prototype.readUint8=O.prototype.readUInt8=function(Te,Me){return Te>>>=0,Me||Jt(Te,1,this.length),this[Te]},O.prototype.readUint16LE=O.prototype.readUInt16LE=function(Te,Me){return Te>>>=0,Me||Jt(Te,2,this.length),this[Te]|this[Te+1]<<8},O.prototype.readUint16BE=O.prototype.readUInt16BE=function(Te,Me){return Te>>>=0,Me||Jt(Te,2,this.length),this[Te]<<8|this[Te+1]},O.prototype.readUint32LE=O.prototype.readUInt32LE=function(Te,Me){return Te>>>=0,Me||Jt(Te,4,this.length),(this[Te]|this[Te+1]<<8|this[Te+2]<<16)+16777216*this[Te+3]},O.prototype.readUint32BE=O.prototype.readUInt32BE=function(Te,Me){return Te>>>=0,Me||Jt(Te,4,this.length),16777216*this[Te]+(this[Te+1]<<16|this[Te+2]<<8|this[Te+3])},O.prototype.readIntLE=function(Te,Me,Ot){Te>>>=0,Me>>>=0,Ot||Jt(Te,Me,this.length);for(var vn=this[Te],ii=1,Fi=0;++Fi<Me&&(ii*=256);)vn+=this[Te+Fi]*ii;return vn>=(ii*=128)&&(vn-=Math.pow(2,8*Me)),vn},O.prototype.readIntBE=function(Te,Me,Ot){Te>>>=0,Me>>>=0,Ot||Jt(Te,Me,this.length);for(var vn=Me,ii=1,Fi=this[Te+--vn];vn>0&&(ii*=256);)Fi+=this[Te+--vn]*ii;return Fi>=(ii*=128)&&(Fi-=Math.pow(2,8*Me)),Fi},O.prototype.readInt8=function(Te,Me){return Te>>>=0,Me||Jt(Te,1,this.length),128&this[Te]?-1*(255-this[Te]+1):this[Te]},O.prototype.readInt16LE=function(Te,Me){Te>>>=0,Me||Jt(Te,2,this.length);var Ot=this[Te]|this[Te+1]<<8;return 32768&Ot?4294901760|Ot:Ot},O.prototype.readInt16BE=function(Te,Me){Te>>>=0,Me||Jt(Te,2,this.length);var Ot=this[Te+1]|this[Te]<<8;return 32768&Ot?4294901760|Ot:Ot},O.prototype.readInt32LE=function(Te,Me){return Te>>>=0,Me||Jt(Te,4,this.length),this[Te]|this[Te+1]<<8|this[Te+2]<<16|this[Te+3]<<24},O.prototype.readInt32BE=function(Te,Me){return Te>>>=0,Me||Jt(Te,4,this.length),this[Te]<<24|this[Te+1]<<16|this[Te+2]<<8|this[Te+3]},O.prototype.readFloatLE=function(Te,Me){return Te>>>=0,Me||Jt(Te,4,this.length),D.read(this,Te,!0,23,4)},O.prototype.readFloatBE=function(Te,Me){return Te>>>=0,Me||Jt(Te,4,this.length),D.read(this,Te,!1,23,4)},O.prototype.readDoubleLE=function(Te,Me){return Te>>>=0,Me||Jt(Te,8,this.length),D.read(this,Te,!0,52,8)},O.prototype.readDoubleBE=function(Te,Me){return Te>>>=0,Me||Jt(Te,8,this.length),D.read(this,Te,!1,52,8)},O.prototype.writeUintLE=O.prototype.writeUIntLE=function(Te,Me,Ot,vn){Te=+Te,Me>>>=0,Ot>>>=0,vn||nn(this,Te,Me,Ot,Math.pow(2,8*Ot)-1,0);var Fi=1,Hs=0;for(this[Me]=255&Te;++Hs<Ot&&(Fi*=256);)this[Me+Hs]=Te/Fi&255;return Me+Ot},O.prototype.writeUintBE=O.prototype.writeUIntBE=function(Te,Me,Ot,vn){Te=+Te,Me>>>=0,Ot>>>=0,vn||nn(this,Te,Me,Ot,Math.pow(2,8*Ot)-1,0);var Fi=Ot-1,Hs=1;for(this[Me+Fi]=255&Te;--Fi>=0&&(Hs*=256);)this[Me+Fi]=Te/Hs&255;return Me+Ot},O.prototype.writeUint8=O.prototype.writeUInt8=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,1,255,0),this[Me]=255&Te,Me+1},O.prototype.writeUint16LE=O.prototype.writeUInt16LE=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,2,65535,0),this[Me]=255&Te,this[Me+1]=Te>>>8,Me+2},O.prototype.writeUint16BE=O.prototype.writeUInt16BE=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,2,65535,0),this[Me]=Te>>>8,this[Me+1]=255&Te,Me+2},O.prototype.writeUint32LE=O.prototype.writeUInt32LE=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,4,4294967295,0),this[Me+3]=Te>>>24,this[Me+2]=Te>>>16,this[Me+1]=Te>>>8,this[Me]=255&Te,Me+4},O.prototype.writeUint32BE=O.prototype.writeUInt32BE=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,4,4294967295,0),this[Me]=Te>>>24,this[Me+1]=Te>>>16,this[Me+2]=Te>>>8,this[Me+3]=255&Te,Me+4},O.prototype.writeIntLE=function(Te,Me,Ot,vn){if(Te=+Te,Me>>>=0,!vn){var ii=Math.pow(2,8*Ot-1);nn(this,Te,Me,Ot,ii-1,-ii)}var Fi=0,Hs=1,so=0;for(this[Me]=255&Te;++Fi<Ot&&(Hs*=256);)Te<0&&0===so&&0!==this[Me+Fi-1]&&(so=1),this[Me+Fi]=(Te/Hs>>0)-so&255;return Me+Ot},O.prototype.writeIntBE=function(Te,Me,Ot,vn){if(Te=+Te,Me>>>=0,!vn){var ii=Math.pow(2,8*Ot-1);nn(this,Te,Me,Ot,ii-1,-ii)}var Fi=Ot-1,Hs=1,so=0;for(this[Me+Fi]=255&Te;--Fi>=0&&(Hs*=256);)Te<0&&0===so&&0!==this[Me+Fi+1]&&(so=1),this[Me+Fi]=(Te/Hs>>0)-so&255;return Me+Ot},O.prototype.writeInt8=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,1,127,-128),Te<0&&(Te=255+Te+1),this[Me]=255&Te,Me+1},O.prototype.writeInt16LE=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,2,32767,-32768),this[Me]=255&Te,this[Me+1]=Te>>>8,Me+2},O.prototype.writeInt16BE=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,2,32767,-32768),this[Me]=Te>>>8,this[Me+1]=255&Te,Me+2},O.prototype.writeInt32LE=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,4,2147483647,-2147483648),this[Me]=255&Te,this[Me+1]=Te>>>8,this[Me+2]=Te>>>16,this[Me+3]=Te>>>24,Me+4},O.prototype.writeInt32BE=function(Te,Me,Ot){return Te=+Te,Me>>>=0,Ot||nn(this,Te,Me,4,2147483647,-2147483648),Te<0&&(Te=4294967295+Te+1),this[Me]=Te>>>24,this[Me+1]=Te>>>16,this[Me+2]=Te>>>8,this[Me+3]=255&Te,Me+4},O.prototype.writeFloatLE=function(Te,Me,Ot){return xn(this,Te,Me,!0,Ot)},O.prototype.writeFloatBE=function(Te,Me,Ot){return xn(this,Te,Me,!1,Ot)},O.prototype.writeDoubleLE=function(Te,Me,Ot){return bn(this,Te,Me,!0,Ot)},O.prototype.writeDoubleBE=function(Te,Me,Ot){return bn(this,Te,Me,!1,Ot)},O.prototype.copy=function(Te,Me,Ot,vn){if(!O.isBuffer(Te))throw new TypeError("argument should be a Buffer");if(Ot||(Ot=0),!vn&&0!==vn&&(vn=this.length),Me>=Te.length&&(Me=Te.length),Me||(Me=0),vn>0&&vn<Ot&&(vn=Ot),vn===Ot||0===Te.length||0===this.length)return 0;if(Me<0)throw new RangeError("targetStart out of bounds");if(Ot<0||Ot>=this.length)throw new RangeError("Index out of range");if(vn<0)throw new RangeError("sourceEnd out of bounds");vn>this.length&&(vn=this.length),Te.length-Me<vn-Ot&&(vn=Te.length-Me+Ot);var ii=vn-Ot;return this===Te&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(Me,Ot,vn):Uint8Array.prototype.set.call(Te,this.subarray(Ot,vn),Me),ii},O.prototype.fill=function(Te,Me,Ot,vn){if("string"==typeof Te){if("string"==typeof Me?(vn=Me,Me=0,Ot=this.length):"string"==typeof Ot&&(vn=Ot,Ot=this.length),void 0!==vn&&"string"!=typeof vn)throw new TypeError("encoding must be a string");if("string"==typeof vn&&!O.isEncoding(vn))throw new TypeError("Unknown encoding: "+vn);if(1===Te.length){var ii=Te.charCodeAt(0);("utf8"===vn&&ii<128||"latin1"===vn)&&(Te=ii)}}else"number"==typeof Te?Te&=255:"boolean"==typeof Te&&(Te=Number(Te));if(Me<0||this.length<Me||this.length<Ot)throw new RangeError("Out of range index");if(Ot<=Me)return this;var Fi;if(Me>>>=0,Ot=void 0===Ot?this.length:Ot>>>0,Te||(Te=0),"number"==typeof Te)for(Fi=Me;Fi<Ot;++Fi)this[Fi]=Te;else{var Hs=O.isBuffer(Te)?Te:O.from(Te,vn),so=Hs.length;if(0===so)throw new TypeError('The value "'+Te+'" is invalid for argument "value"');for(Fi=0;Fi<Ot-Me;++Fi)this[Fi+Me]=Hs[Fi%so]}return this};var yn=/[^+/0-9A-Za-z-_]/g;function Ce(Je,Te){Te=Te||1/0;for(var Me,Ot=Je.length,vn=null,ii=[],Fi=0;Fi<Ot;++Fi){if((Me=Je.charCodeAt(Fi))>55295&&Me<57344){if(!vn){if(Me>56319){(Te-=3)>-1&&ii.push(239,191,189);continue}if(Fi+1===Ot){(Te-=3)>-1&&ii.push(239,191,189);continue}vn=Me;continue}if(Me<56320){(Te-=3)>-1&&ii.push(239,191,189),vn=Me;continue}Me=65536+(vn-55296<<10|Me-56320)}else vn&&(Te-=3)>-1&&ii.push(239,191,189);if(vn=null,Me<128){if((Te-=1)<0)break;ii.push(Me)}else if(Me<2048){if((Te-=2)<0)break;ii.push(Me>>6|192,63&Me|128)}else if(Me<65536){if((Te-=3)<0)break;ii.push(Me>>12|224,Me>>6&63|128,63&Me|128)}else{if(!(Me<1114112))throw new Error("Invalid code point");if((Te-=4)<0)break;ii.push(Me>>18|240,Me>>12&63|128,Me>>6&63|128,63&Me|128)}}return ii}function ci(Je){return Y.toByteArray(function je(Je){if((Je=(Je=Je.split("=")[0]).trim().replace(yn,"")).length<2)return"";for(;Je.length%4!=0;)Je+="=";return Je}(Je))}function $i(Je,Te,Me,Ot){for(var vn=0;vn<Ot&&!(vn+Me>=Te.length||vn>=Je.length);++vn)Te[vn+Me]=Je[vn];return vn}function At(Je,Te){return Je instanceof Te||null!=Je&&null!=Je.constructor&&null!=Je.constructor.name&&Je.constructor.name===Te.name}function Pt(Je){return Je!=Je}var un=function(){for(var Je="0123456789abcdef",Te=new Array(256),Me=0;Me<16;++Me)for(var Ot=16*Me,vn=0;vn<16;++vn)Te[Ot+vn]=Je[Me]+Je[vn];return Te}()},4147:function(Be){Be.exports=function(be){var V={};function Y(D){if(V[D])return V[D].exports;var H=V[D]={i:D,l:!1,exports:{}};return be[D].call(H.exports,H,H.exports,Y),H.l=!0,H.exports}return Y.m=be,Y.c=V,Y.i=function(D){return D},Y.d=function(D,H,B){Y.o(D,H)||Object.defineProperty(D,H,{configurable:!1,enumerable:!0,get:B})},Y.n=function(D){var H=D&&D.__esModule?function(){return D.default}:function(){return D};return Y.d(H,"a",H),H},Y.o=function(D,H){return Object.prototype.hasOwnProperty.call(D,H)},Y.p="",Y(Y.s=3)}([function(be,V,Y){"use strict";var D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Dn){return typeof Dn}:function(Dn){return Dn&&"function"==typeof Symbol&&Dn.constructor===Symbol&&Dn!==Symbol.prototype?"symbol":typeof Dn},H=Y(2),B=D(""),W=D({}),P=D(function(){}),O=function(Jt){return(typeof Jt>"u"?"undefined":D(Jt))===W},te=function(Jt){return(typeof Jt>"u"?"undefined":D(Jt))===P},J=function(Jt){return O(Jt)&&te(Jt.collection)},oe=Y(1),se=function(Jt){return null!=Jt&&!Jt.removed()},Q=function(Jt,nn){return(Q=null!=Jt.has?function(xn,bn){return xn.has(bn)}:function(xn,bn){return xn.intersection(bn).length>0})(Jt,nn)},U=function(Jt){if(function(Jt){return(typeof Jt>"u"?"undefined":D(Jt))===B}(Jt))return function(nn){return nn.is(Jt)};if(te(Jt))return Jt;if(J(Jt))return function(nn){return Q(Jt,nn)};throw new Error("Can not create match function for spec",Jt)},xe=function(Jt,nn,Ln,xn,bn){var yn=function(Jt,nn,Ln,xn){var bn={cy:Jt,events:nn,selector:Ln||"node",fn:xn};return Jt.on(bn.events,bn.selector,bn.fn),bn}(nn,Ln,xn,bn);(Jt.bindings=Jt.bindings||[]).push(yn)},Oe=function(Jt){Jt.bindings.forEach(function(xn){xn.cy.off(xn.events,xn.selector,xn.fn)}),Jt.bindings=[]},ue=function(Jt){return function(nn){var Ln=nn.position(),xn=Jt.delta;if(null!=Jt.delta&&!nn.same(Jt.grabbedNode)&&!nn.grabbed())return{x:Ln.x+xn.x,y:Ln.y+xn.y}}},z=function(Jt){return function(nn){for(var Ln=nn.neighborhood(),xn={x:0,y:0},bn=0,yn=0;yn<Ln.length;yn++){var je=Ln[yn];if(je.isNode()&&!Jt(je)){var Ce=je.position();xn.x+=Ce.x,xn.y+=Ce.y,bn++}}if(!(bn<2))return xn.x/=bn,xn.y/=bn,xn}},$=function(Jt,nn,Ln){return Jt<nn?nn:Jt>Ln?Ln:Jt},ne=function(Jt,nn){var Ln=Jt.position();return{x:$(Ln.x,nn.x1,nn.x2),y:$(Ln.y,nn.y1,nn.y2)}},ge=function(Jt){return function(nn){return ne(nn,Jt)}},Re=function(Jt){return function(nn){return function(Jt,nn){var Ln=Jt.position(),xn=Ln.x,bn=Ln.y,yn=nn.x1,je=nn.y1,Ce=nn.x2,Dt=nn.y2,$i=Math.abs;if(yn<=xn&&xn<=Ce&&je<=bn&&bn<=Dt){var At=$i(yn-xn),Pt=$i(Ce-xn),un=$i(je-bn),Je=$i(Dt-bn),Te=Math.min(At,Pt,un,Je);return Te===At?{x:yn,y:bn}:Te===Pt?{x:Ce,y:bn}:Te===un?{x:xn,y:je}:{x:xn,y:Dt}}return{x:xn,y:bn}}(nn,Jt)}},rt=function(Jt){return function(nn){var Ln=Jt.extent(),xn=nn.outerWidth(),bn=nn.outerHeight();return ne(nn,{x1:Ln.x1+xn/2,x2:Ln.x2-xn/2,y1:Ln.y1+bn/2,y2:Ln.y2-bn/2})}},He=function(Jt,nn){return"mean"===nn.reposition?function(Jt){return function(nn,Ln){var xn=function(yn){return Jt.matches(yn)&&yn.neighborhood().length>2&&!yn.grabbed()};xe(Jt,Ln,"position","node",function(){(this.neighborhood().some(xn)||Jt.meanOnSelfPosition(this)&&xn(this))&&nn(Ln,[Jt])}),xe(Jt,Ln,"add remove","edge",function(){[Ln.getElementById(this.data("source")),Ln.getElementById(this.data("target"))].some(xn)&&nn(Ln,[Jt])})}}(nn):"drag"===nn.reposition?function(Jt){return function(nn,Ln){xe(Jt,Ln,"grab","node",function(){if(Jt.dragWithMatches(this)){var bn=this.position();Jt.grabbedNode=this,Jt.p1={x:bn.x,y:bn.y},Jt.delta={x:0,y:0}}}),xe(Jt,Ln,"drag","node",function(){if(this.same(Jt.grabbedNode)){var bn=Jt.delta,yn=Jt.p1,je=this.position(),Ce={x:je.x,y:je.y};bn.x=Ce.x-yn.x,bn.y=Ce.y-yn.y,Jt.p1=Ce,nn(Ln,[Jt])}}),xe(Jt,Ln,"free","node",function(){Jt.grabbedNode=null,Jt.delta=null,Jt.p1=null})}}(nn):O(nn.reposition)||"matching"===nn.when||"viewport"===nn.reposition?function(Jt){return function(nn,Ln){xe(Jt,Ln,"position","node",function(){Jt.matches(this)&&nn(Ln,[Jt])})}}(nn):nn.when},ft=function(Jt,nn,Ln){var xn=oe({},H,Ln);if(xn.getNewPos=function(Jt,nn){var Ln=Jt.reposition;return"mean"===Ln?z(U(Jt.meanIgnores)):"viewport"===Ln?rt(nn):"drag"===Ln?ue(Jt):O(Ln)?null==Ln.type||"inside"==Ln.type?ge(Ln):"outside"==Ln.type?Re(Ln):void 0:Ln}(xn,Jt),xn.listener=He(0,xn),J(xn.nodesMatching))xn.nodes=xn.nodesMatching.slice(),xn.matches=function(je){return se(je)&&Q(xn.nodes,je)};else{var yn=U(xn.nodesMatching);xn.matches=function(je){return se(je)&&yn(je)}}return null!=xn.dragWith&&(xn.dragWithMatches=U(xn.dragWith)),xn.listener(function(){kn(Jt,[xn])},Jt),xn.enabled=!0,nn.rules.push(xn),xn},Ct=function(Jt,nn){Jt.removeListener("add","node",nn.onAddNode),Jt.removeListener("remove","node",nn.onRmNode)},kn=function(Jt,nn){var Ln=Jt.scratch().automove;nn=nn??Ln.rules,Jt.batch(function(){for(var xn=0;xn<nn.length;xn++){var bn=nn[xn];if(bn.destroyed||!bn.enabled)break;for(var yn=bn.nodes||Ln.nodes,je=yn.length-1;je>=0;je--){var Ce=yn[je];if(Ce.removed())yn.unmerge(Ce);else if(bn.matches(Ce)){var Dt=Ce.position(),Rt=bn.getNewPos(Ce);null!=Rt&&(Dt.x!==Rt.x||Dt.y!==Rt.y)&&(Ce.position(Rt),Ce.trigger("automove",[bn]))}}}})};be.exports=function(Jt){var nn=this,Ln=nn.scratch().automove=nn.scratch().automove||{rules:[]};if(0===Ln.rules.length&&(Ln.nodes=nn.nodes().slice(),function(Jt,nn){nn.onAddNode=function(Ln){nn.nodes.merge(Ln.target)},nn.onRmNode=function(Ln){nn.nodes.unmerge(Ln.target)},Jt.on("add","node",nn.onAddNode),Jt.on("remove","node",nn.onRmNode)}(nn,Ln)),"destroy"===Jt)return Ln.rules.forEach(function(bn){Oe(bn),bn.destroyed=!0}),Ln.rules.splice(0,Ln.rules.length),void Ct(nn,Ln);var xn=ft(nn,Ln,Jt);return kn(nn,[xn]),{apply:function(){kn(nn,[xn])},disable:function(){this.toggle(!1)},enable:function(){this.toggle(!0)},enabled:function(){return xn.enabled},toggle:function(yn){xn.enabled=void 0!==yn?yn:!xn.enabled,xn.enabled&&kn(nn,[xn])},destroy:function(){var yn=Ln.rules;return Oe(xn),xn.destroyed=!0,yn.splice(yn.indexOf(xn),1),0===yn.length&&Ct(nn,Ln),this}}}},function(be,V,Y){"use strict";be.exports=null!=Object.assign?Object.assign.bind(Object):function(D){for(var H=arguments.length,B=Array(H>1?H-1:0),W=1;W<H;W++)B[W-1]=arguments[W];return B.forEach(function(P){Object.keys(P).forEach(function(O){return D[O]=P[O]})}),D}},function(be,V,Y){"use strict";be.exports={nodesMatching:function(B){return!1},reposition:"mean",when:void 0,meanIgnores:function(B){return!1},meanOnSelfPosition:function(B){return!0},dragWith:function(B){return!1}}},function(be,V,Y){"use strict";var D=Y(0),H=function(W){!W||W("core","automove",D)};typeof cytoscape<"u"&&H(cytoscape),be.exports=H}])},2960:function(Be,be,V){var Y,D;Be.exports=(Y=V(8132),D=V(8078),function(H){var B={};function W(P){if(B[P])return B[P].exports;var O=B[P]={i:P,l:!1,exports:{}};return H[P].call(O.exports,O,O.exports,W),O.l=!0,O.exports}return W.m=H,W.c=B,W.i=function(P){return P},W.d=function(P,O,q){W.o(P,O)||Object.defineProperty(P,O,{configurable:!1,enumerable:!0,get:q})},W.n=function(P){var O=P&&P.__esModule?function(){return P.default}:function(){return P};return W.d(O,"a",O),O},W.o=function(P,O){return Object.prototype.hasOwnProperty.call(P,O)},W.p="",W(W.s=12)}([function(H,B,W){"use strict";H.exports=null!=Object.assign?Object.assign.bind(Object):function(P){for(var O=arguments.length,q=Array(O>1?O-1:0),te=1;te<O;te++)q[te-1]=arguments[te];return q.filter(function(J){return null!=J}).forEach(function(J){Object.keys(J).forEach(function(oe){return P[oe]=J[oe]})}),P}},function(H,B,W){"use strict";var P=W(10),O=W(0);H.exports=function(q){return new P(O({cy:this},q))}},function(H,B,W){"use strict";H.exports={disableGestures:function P(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var te=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,te),window.addEventListener("touchmove",this.preventDefault,te),window.addEventListener("wheel",this.preventDefault,te)}return this},resetGestures:function O(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var te=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,te),window.removeEventListener("touchmove",this.preventDefault,te),window.removeEventListener("wheel",this.preventDefault,te)}return this},saveGestureState:function q(){var te=this.cy;return this.lastPanningEnabled=te.panningEnabled(),this.lastZoomingEnabled=te.zoomingEnabled(),this.lastBoxSelectionEnabled=te.boxSelectionEnabled(),this}}},function(H,B,W){"use strict";H.exports={addCytoscapeListeners:function P(){var O=this,q=this.cy,te=this.options;return this.addListener(q,"drag",function(){return O.grabbingNode=!0}),this.addListener(q,"free",function(){return O.grabbingNode=!1}),this.addListener(q,"tapstart","node",function(J){O.drawMode&&O.start(J.target)}),this.addListener(q,"tapdrag",function(J){O.update(J.position)}),this.addListener(q,"tapdragover","node",function(J){te.snap||O.preview(J.target)}),this.addListener(q,"tapdragout","node",function(J){te.snap||O.unpreview(J.target)}),this.addListener(q,"tapend",function(){O.stop()}),this}}},function(H,B,W){"use strict";H.exports={canConnect:function(q,te){return!q.same(te)},edgeParams:function(q,te){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0}},function(H,B,W){"use strict";H.exports={toggleDrawMode:function P(te){var J=this.cy;return this.drawMode=te??!this.drawMode,this.drawMode?(this.prevUngrabifyState=J.autoungrabify(),J.autoungrabify(!0),this.emit("drawon")):(J.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this},enableDrawMode:function O(){return this.toggleDrawMode(!0)},disableDrawMode:function q(){return this.toggleDrawMode(!1)}}},function(H,B,W){"use strict";var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(xe){return typeof xe}:function(xe){return xe&&"function"==typeof Symbol&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe},O=W(0);function J(xe,Oe,re){var ue={};return O(ue,Oe,xe),O(ue.data,Oe.data,xe.data),ue.classes=function(Oe){return(typeof Oe>"u"?"undefined":P(Oe))===P("")}(Oe.classes)?Oe.classes+" "+re:function(Oe){return(typeof Oe>"u"?"undefined":P(Oe))===P([])&&null!=Oe.length}(Oe.classes)?Oe.classes.join(" ")+" "+re:re,ue}H.exports={makeEdges:function oe(){var xe=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Oe=this.cy,ue=this.presumptiveTargets,z=this.previewEles,$=this.active,ne=this.sourceNode,ge=this.targetNode,Ue=xe?"eh-preview":"",Re=Oe.collection(),rt=this.canConnect(ge);if($&&rt){if(!ge||0===ge.size())return z.remove(),void this.emit("cancel",this.mp(),ne,ue);if(!xe)return z.removeClass("eh-preview").style("events",""),void this.emit("complete",this.mp(),ne,ge,z);var Pe=Oe.add(J({group:"edges",data:{source:ne.id(),target:ge.id()}},this.edgeParams(ge),Ue));return Re=Re.merge(Pe),xe?(this.previewEles=Re,Re.style("events","no")):(Re.style("events",""),this.emit("complete",this.mp(),ne,ge,Re)),this}},makePreview:function se(){return this.makeEdges(!0),this},removePreview:function U(){return this.previewShown()&&this.previewEles.remove(),this},previewShown:function Q(){return this.previewEles.nonempty()&&this.previewEles.inside()},updateEdge:function ae(){var xe=this,Oe=this.sourceNode,re=this.ghostNode,ue=this.cy,ne=this.mx,ge=this.my,Ue=void 0,Re=void 0;if(Oe)return(!re||0===re.length||re.removed())&&(Re=this.ghostEles=ue.collection(),ue.batch(function(){(re=xe.ghostNode=ue.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}})).style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var rt={};(Ue=ue.add(O({},rt,{group:"edges",data:O({},rt.data,{source:Oe.id(),target:re.id()}),classes:"eh-ghost eh-ghost-edge"}))).style({events:"no"})}),Re.merge(re).merge(Ue)),re.position({x:ne,y:ge}),this}}},function(H,B,W){"use strict";H.exports={disableEdgeEvents:function P(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this},enableEdgeEvents:function O(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}}},function(H,B,W){"use strict";H.exports={enable:function P(){return this.enabled=!0,this.emit("enable"),this},disable:function O(){return this.enabled=!1,this.emit("disable"),this}}},function(H,B,W){"use strict";var P=W(13),O=Math.sqrt(2);H.exports={start:function oe(Oe){var re=this;if(this.canStartOn(Oe)){this.active=!0,this.sourceNode=Oe,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var ue=function($){return $.id()};this.canConnect=P(function(z){return re.options.canConnect(re.sourceNode,z)},ue),this.edgeParams=P(function(z){return re.options.edgeParams(re.sourceNode,z)},ue),this.emit("start",this.hp(),Oe)}},update:function se(Oe){if(this.active){var re=Oe;return this.mx=re.x,this.my=re.y,this.updateEdge(),this.throttledSnap(),this}},preview:function U(Oe){var re=this,ue=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],z=this.options,$=this.sourceNode,ge=this.ghostEles,Ue=this.presumptiveTargets,Re=this.previewEles,rt=this.active,Pe=$,at=Oe.same(this.ghostNode),xt=!this.canConnect(Oe),He=Oe.same(this.targetNode);if(!rt||at||xt||He)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var ft=function(){re.targetNode=Oe,Ue.merge(Oe),Oe.addClass("eh-presumptive-target"),Oe.addClass("eh-target"),re.emit("hoverover",re.mp(),Pe,Oe),Oe.addClass("eh-preview"),ge.addClass("eh-preview-active"),$.addClass("eh-preview-active"),Oe.addClass("eh-preview-active"),re.makePreview(),re.emit("previewon",re.mp(),Pe,Oe,Re)};return ue&&z.hoverDelay>0?this.previewTimeout=setTimeout(ft,z.hoverDelay):ft(),!0},unpreview:function ae(Oe){if(this.active){var ue=this.sourceNode,z=this.previewEles,$=this.ghostEles,ne=this.cy;clearTimeout(this.previewTimeout),this.previewTimeout=null;var ge=ue;return Oe.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),$.removeClass("eh-preview-active"),ue.removeClass("eh-preview-active"),this.targetNode=ne.collection(),this.removePreview(ge,Oe),this.emit("hoverout",this.mp(),ge,Oe),this.emit("previewoff",this.mp(),ge,Oe,z),this}},stop:function xe(){if(this.active){var Oe=this.sourceNode,re=this.targetNode,ue=this.ghostEles,z=this.presumptiveTargets;return clearTimeout(this.previewTimeout),Oe.removeClass("eh-source eh-preview-active"),re.removeClass("eh-target eh-preview eh-hover eh-preview-active"),z.removeClass("eh-presumptive-target"),this.makeEdges(),ue.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),Oe),this}},snap:function Q(){if(!this.active||!this.options.snap)return!1;var Oe=this.cy,re=this.targetNode,ue=this.options.snapThreshold,z=this.mp(),$=this.previewEles,ne=this.ghostNode,Ue=function(xn,bn,yn,je){var Ce=yn-xn,Dt=je-bn;return Ce*Ce+Dt*Dt},rt=function(xn){return function(xn,bn){return Ue(xn.x,xn.y,bn.x,bn.y)}(xn.position(),z)},Pe=function(xn){var yn=function(xn){return O*Math.max(xn.outerWidth(),xn.outerHeight())/2}(xn)+ue;return yn*yn},at=function(xn){return rt(xn)<=Pe(xn)},xt=function(xn){var bn=xn.position(),yn=xn.outerWidth()/2,je=xn.outerHeight()/2,Ce=bn.x,Dt=bn.y,Rt=z.x,ci=z.y,$i=Ce-yn,At=Ce+yn,Pt=Dt-je,un=Dt+je,Je=$i<=Rt&&Rt<=At,Te=Pt<=ci&&ci<=un;if(Je&&Te)return 0;if(Je){var Me=ci-Pt,Ot=ci-un;return Math.min(Me*Me,Ot*Ot)}if(Te){var vn=Rt-$i,ii=Rt-At;return Math.min(vn*vn,ii*ii)}return Rt<$i&&ci<Pt?Ue(Rt,ci,$i,Pt):Rt>At&&ci<Pt?Ue(Rt,ci,At,Pt):Ue(Rt,ci,Rt<$i&&ci>un?$i:At,un)},Ct=function(xn){var bn=z,je=xn.outerWidth()/2,Dt=xn.outerHeight()/2,Rt=xn.position();return Rt.x-je<=bn.x&&bn.x<=Rt.x+je&&Rt.y-Dt<=bn.y&&bn.y<=Rt.y+Dt},Ut=Oe.nodes(function(Ln){return!((xn=Ln).same($)||xn.same(ne))&&at(Ln);var xn}).sort(function(xn,bn){return xt(xn)-xt(bn)}),Dn=!1;re.nonempty()&&!at(re)&&this.unpreview(re);for(var Jt=0;Jt<Ut.length;Jt++){var nn=Ut[Jt];if((!nn.isParent()||!Ct(nn))&&(!nn.isChild()||Ct(nn.parent()))&&(nn.same(re)||this.preview(nn,false))){Dn=!0;break}}return Dn},canStartOn:function q(Oe){var Pe,re=this.previewEles,ue=this.ghostEles;return this.enabled&&!this.active&&!this.grabbingNode&&null!=Oe&&Oe.nonempty()&&!(function(Pe){return re.anySame(Pe)}(Pe=Oe)||function(Pe){return ue.anySame(Pe)}(Pe))},canStartDrawModeOn:function te(Oe){return this.canStartOn(Oe)&&this.drawMode},canStartNonDrawModeOn:function J(Oe){return this.canStartOn(Oe)&&!this.drawMode}}},function(H,B,W){"use strict";var P=W(4),O=W(0),q=W(14),te=W(2),J=W(3),oe=W(5),se=W(6),Q=W(8),U=W(9),ae=W(11),xe=W(7);function Oe(z){this.cy=z.cy,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=O({},P,z),this.saveGestureState(),this.addListeners(),this.throttledSnap=q(this.snap.bind(this),1e3/z.snapFrequency),this.preventDefault=function(Ue){return Ue.preventDefault()},this.canConnect=function(){return!1};var ne=!1;try{var ge=Object.defineProperty({},"passive",{get:function(){ne=!0}});window.addEventListener("test",null,ge)}catch{}this.windowListenerOptions=!ne||{capture:!0,passive:!1}}var re=Oe.prototype={};re.destroy=function(){this.removeListeners()},re.setOptions=function(z){O(this.options,z)},re.mp=function(){return{x:this.mx,y:this.my}},re.hp=function(){return{x:this.hx,y:this.hy}},re.clearCollections=function(){var z=this.cy;this.previewEles=z.collection(),this.ghostEles=z.collection(),this.ghostNode=z.collection(),this.sourceNode=z.collection(),this.targetNode=z.collection(),this.presumptiveTargets=z.collection()},[te,J,oe,se,Q,U,ae,xe].forEach(function($){return O(re,$)}),H.exports=Oe},function(H,B,W){"use strict";var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(U){return typeof U}:function(U){return U&&"function"==typeof Symbol&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U};function te(U,ae,xe,Oe,re){return(typeof xe>"u"?"undefined":P(xe))!==P("")&&(re=Oe=xe,xe=null),null==re&&(re=!1),{target:U,event:ae,selector:xe,callback:Oe,options:re}}function J(U){return U instanceof Element}H.exports={addListener:function oe(U,ae,xe,Oe,re){var ue=te(U,ae,xe,Oe,re);return this.listeners.push(ue),J(ue.target)?ue.target.addEventListener(ue.event,ue.callback,ue.options):ue.selector?ue.target.addListener(ue.event,ue.selector,ue.callback,ue.options):ue.target.addListener(ue.event,ue.callback,ue.options),this},addListeners:function O(){var U=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return U.destroy()}),this},removeListener:function se(U,ae,xe,Oe,re){for(var ue=te(U,ae,xe,Oe,re),z=this.listeners.length-1;z>=0;z--){var $=this.listeners[z];if(!(ue.target!==$.target||ue.event!==$.event||null!=ue.selector&&ue.selector!==$.selector||null!=ue.callback&&ue.callback!==$.callback)){this.listeners.splice(z,1),J(ue.target)?ue.target.removeEventListener(ue.event,ue.callback,ue.options):ue.selector?ue.target.removeListener(ue.event,ue.selector,ue.callback,ue.options):ue.target.removeListener(ue.event,ue.callback,ue.options);break}}return this},removeListeners:function q(){for(var U=this.listeners.length-1;U>=0;U--){var ae=this.listeners[U];this.removeListener(ae.target,ae.event,ae.selector,ae.callback,ae.options)}return this},emit:function Q(U,ae){for(var xe=this.cy,Oe=arguments.length,re=Array(Oe>2?Oe-2:0),ue=2;ue<Oe;ue++)re[ue-2]=arguments[ue];return xe.emit({type:"eh"+U,position:ae},re),this}}},function(H,B,W){"use strict";var P=W(1),O=function(te){!te||te("core","edgehandles",P)};typeof cytoscape<"u"&&O(cytoscape),H.exports=O},function(H,B){H.exports=Y},function(H,B){H.exports=D}]))},9050:(Be,be,V)=>{var Y;!function(D){"use strict";var H=function(B){!B||B("core","snapToGrid",function(W){var P=this,O=W,q=P.container(),te={stackOrder:-1,gridSpacing:40,strokeStyle:"#CCCCCC",lineWidth:1,lineDash:[5,8],zoomDash:!0,panGrid:!0,snapToGrid:!0,drawGrid:!0},J={snapOn:function(){D(this).trigger("snaptogrid.snapon")},snapOff:function(){D(this).trigger("snaptogrid.snapoff")},gridOn:function(){D(this).trigger("snaptogrid.gridon")},gridOff:function(){D(this).trigger("snaptogrid.gridoff")},refresh:function(){D(this).trigger("snaptogrid.refresh")},option:function(oe,se){var Q=D(this),U=Q.data("snapToGrid");if(null!=U){var ae=U.options;if(void 0===se){if(typeof oe!=typeof{})return ae[oe];ae=D.extend(!0,{},defaults,oe),U.options=ae}else ae[oe]=se;return Q.data("snapToGrid",U),Q.trigger("snaptogrid.refresh"),Q}},init:function(){var Q,oe=D("<canvas></canvas>"),se=D(this),U=D.extend(!0,{},te,W);se.data("snapToGrid",U);var ae,xe=function(){return ae||(ae=se.data("snapToGrid"))},Oe=function(){oe.attr("height",se.height()).attr("width",se.width()).css({position:"absolute",top:0,left:0,"z-index":xe().stackOrder}),setTimeout(function(){var at=oe.offset(),xt=se.offset();oe.attr("height",se.height()).attr("width",se.width()).css({top:-(at.top-xt.top),left:-(at.left-xt.left)}),re()},0)},re=function(){if(ue(),xe().drawGrid){var at=P.zoom(),xt=se.width(),He=se.height(),ft=xe().gridSpacing*at,gt=P.pan(),Ct=gt.x%ft,kn=gt.y%ft;if(Q.strokeStyle=xe().strokeStyle,Q.lineWidth=xe().lineWidth,xe().zoomDash){for(var Ut=xe().lineDash.slice(),Dn=0;Dn<Ut.length;Dn++)Ut[Dn]=xe().lineDash[Dn]*at;Q.setLineDash(Ut)}else Q.setLineDash(xe().lineDash);for(Q.lineDashOffset=xe().panGrid?-gt.y:0,Dn=Ct;Dn<xt;Dn+=ft)Q.beginPath(),Q.moveTo(Dn,0),Q.lineTo(Dn,He),Q.stroke();for(Q.lineDashOffset=xe().panGrid?-gt.x:0,Dn=kn;Dn<He;Dn+=ft)Q.beginPath(),Q.moveTo(0,Dn),Q.lineTo(xt,Dn),Q.stroke()}},ue=function(){var at=se.width(),xt=se.height();Q.clearRect(0,0,at,xt)},z=function(at){var xt=at.position(),He=Math.floor(xt.x/xe().gridSpacing),ft=Math.floor(xt.y/xe().gridSpacing);at.position({x:(He+.5)*xe().gridSpacing,y:(ft+.5)*xe().gridSpacing})},$=function(){P.nodes().each(function(at){z(at)})},ne=function(at){xe().snapToGrid&&z(at.target)},ge=function(at){xe().snapToGrid&&z(at.target)};se.append(oe),D(window).on("resize",Oe),se.on("snaptogrid.snapon",function(){xe().snapToGrid=!0,$()}),se.on("snaptogrid.snapoff",function(){xe().snapToGrid=!1}),se.on("snaptogrid.gridon",function(){xe().drawGrid=!0,re()}),se.on("snaptogrid.gridoff",function(){xe().drawGrid=!1,re()}),se.on("snaptogrid.refresh",Oe),Q=oe[0].getContext("2d"),P.ready(function(){Oe(),xe().snapToGrid&&$(),P.on("zoom",re),P.on("pan",re),P.on("free",ne),P.on("add",ge)})}};return J[O]?J[O].apply(q,Array.prototype.slice.call(arguments,1)):"object"!=typeof O&&O?(console.error("No such function `"+O+"` for snapToGrid"),this):J.init.apply(q,arguments)})};Be.exports&&(Be.exports=H),void 0!==(Y=function(){return H}.call(be,V,be,Be))&&(Be.exports=Y),typeof cytoscape<"u"&&H(cytoscape)}(typeof jQuery<"u"?jQuery:null)},6864:(Be,be,V)=>{"use strict";var Y=V(406),D=V(5203),H=V(8817),B=V(4793),W=V(4152);function P(f){return f&&"object"==typeof f&&"default"in f?f:{default:f}}var O=P(Y),q=P(D),te=P(H),J=P(B),oe=P(W);function se(f){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"==typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c})(f)}function Q(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function U(f,c){for(var d=0;d<c.length;d++){var m=c[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(f,m.key,m)}}function ae(f,c,d){return c&&U(f.prototype,c),d&&U(f,d),Object.defineProperty(f,"prototype",{writable:!1}),f}function xe(f,c,d){return c in f?Object.defineProperty(f,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):f[c]=d,f}function Oe(f,c){return function re(f){if(Array.isArray(f))return f}(f)||function ue(f,c){var d=null==f?null:typeof Symbol<"u"&&f[Symbol.iterator]||f["@@iterator"];if(null!=d){var w,E,m=[],_=!0,b=!1;try{for(d=d.call(f);!(_=(w=d.next()).done)&&(m.push(w.value),!c||m.length!==c);_=!0);}catch(k){b=!0,E=k}finally{try{!_&&null!=d.return&&d.return()}finally{if(b)throw E}}return m}}(f,c)||function z(f,c){if(f){if("string"==typeof f)return $(f,c);var d=Object.prototype.toString.call(f).slice(8,-1);if("Object"===d&&f.constructor&&(d=f.constructor.name),"Map"===d||"Set"===d)return Array.from(f);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return $(f,c)}}(f,c)||function ne(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(f,c){(null==c||c>f.length)&&(c=f.length);for(var d=0,m=new Array(c);d<c;d++)m[d]=f[d];return m}var ge=typeof window>"u"?null:window,Ue=ge?ge.navigator:null,Re=se(""),rt=se({}),Pe=se(function(){}),at=typeof HTMLElement>"u"?"undefined":se(HTMLElement),xt=function(c){return c&&c.instanceString&&ft(c.instanceString)?c.instanceString():null},He=function(c){return null!=c&&se(c)==Re},ft=function(c){return null!=c&&se(c)===Pe},gt=function(c){return!nn(c)&&(Array.isArray?Array.isArray(c):null!=c&&c instanceof Array)},Ct=function(c){return null!=c&&se(c)===rt&&!gt(c)&&c.constructor===Object},Ut=function(c){return null!=c&&se(c)===se(1)&&!isNaN(c)},Jt=function(c){if("undefined"!==at)return null!=c&&c instanceof HTMLElement},nn=function(c){return Ln(c)||xn(c)},Ln=function(c){return"collection"===xt(c)&&c._private.single},xn=function(c){return"collection"===xt(c)&&!c._private.single},bn=function(c){return"core"===xt(c)},yn=function(c){return"stylesheet"===xt(c)},Ce=function(c){return null==c||!(""!==c&&!c.match(/^\s+$/))},ci=function(c){return function(c){return null!=c&&se(c)===rt}(c)&&ft(c.then)},At=function(c,d){d||(d=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var b=[],w=0;w<arguments.length;w++)b.push(arguments[w]);return b.join("$")});var m=function _(){var E,b=this,w=arguments,k=d.apply(b,w),L=_.cache;return(E=L[k])||(E=L[k]=c.apply(b,w)),E};return m.cache={},m},Pt=At(function(f){return f.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()})}),un=At(function(f){return f.replace(/(-\w)/g,function(c){return c[1].toUpperCase()})}),Je=At(function(f,c){return f+c[0].toUpperCase()+c.substring(1)},function(f,c){return f+"$"+c}),Te=function(c){return Ce(c)?c:c.charAt(0).toUpperCase()+c.substring(1)},Me="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",bs=function(c,d){return c<d?-1:c>d?1:0},er=null!=Object.assign?Object.assign.bind(Object):function(f){for(var c=arguments,d=1;d<c.length;d++){var m=c[d];if(null!=m)for(var _=Object.keys(m),b=0;b<_.length;b++){var w=_[b];f[w]=m[w]}}return f},th={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},lc=function(c){for(var d=c.map,m=c.keys,_=m.length,b=0;b<_;b++){var w=m[b];if(Ct(w))throw Error("Tried to set map with object key");b<m.length-1?(null==d[w]&&(d[w]={}),d=d[w]):d[w]=c.value}},Ah=function(c){for(var d=c.map,m=c.keys,_=m.length,b=0;b<_;b++){var w=m[b];if(Ct(w))throw Error("Tried to get map with object key");if(null==(d=d[w]))return d}return d},Lu=ge?ge.performance:null,qa=Lu&&Lu.now?function(){return Lu.now()}:function(){return Date.now()},Ld=function(){if(ge){if(ge.requestAnimationFrame)return function(f){ge.requestAnimationFrame(f)};if(ge.mozRequestAnimationFrame)return function(f){ge.mozRequestAnimationFrame(f)};if(ge.webkitRequestAnimationFrame)return function(f){ge.webkitRequestAnimationFrame(f)};if(ge.msRequestAnimationFrame)return function(f){ge.msRequestAnimationFrame(f)}}return function(f){f&&setTimeout(function(){f(qa())},1e3/60)}}(),cu=function(c){return Ld(c)},Aa=qa,Ih=9261,Pu=65599,ed=5381,hf=function(c){for(var _,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ih,m=d;!(_=c.next()).done;)m=m*Pu+_.value|0;return m},td=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ih;return d*Pu+c|0},dl=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ed;return(d<<5)+d+c|0},nh=function(c){return 2097152*c[0]+c[1]},ff=function(c,d){return[td(c[0],d[0]),dl(c[1],d[1])]},xc=function(c,d){var m={value:0,done:!1},_=0,b=c.length;return hf({next:function(){return _<b?m.value=c.charCodeAt(_++):m.done=!0,m}},d)},Tg=function(){return Sh(arguments)},Sh=function(c){for(var d,m=0;m<c.length;m++){var _=c[m];d=0===m?xc(_):xc(_,d)}return d},to=!0,pf=null!=console.warn,fl=null!=console.trace,wc=Number.MAX_SAFE_INTEGER||9007199254740991,nl=function(){return!0},jf=function(){return!1},nd=function(){return 0},Ge=function(){},it=function(c){throw new Error(c)},Ye=function(c){if(void 0===c)return to;to=!!c},he=function(c){!Ye()||(pf?console.warn(c):(console.log(c),fl&&console.trace()))},$e=function(c){return null==c?c:gt(c)?c.slice():Ct(c)?function(c){return er({},c)}(c):c},zt=function(c,d){for(d=c="";c++<36;d+=51*c&52?(15^c?8^Math.random()*(20^c?16:4):4).toString(16):"-");return d},In={},yi=function(){return In},ti=function(c){var d=Object.keys(c);return function(m){for(var _={},b=0;b<d.length;b++){var w=d[b],E=m?.[w];_[w]=void 0===E?c[w]:E}return _}},di=function(c,d,m){for(var _=c.length-1;_>=0&&(c[_]!==d||(c.splice(_,1),!m));_--);},mr=function(c){c.splice(0,c.length)},sr=function(c,d,m){return m&&(d=Je(m,d)),c[d]},Gs=function(c,d,m,_){m&&(d=Je(m,d)),c[d]=_},xo=typeof Map<"u"?Map:function(){function f(){Q(this,f),this._obj={}}return ae(f,[{key:"set",value:function(d,m){return this._obj[d]=m,this}},{key:"delete",value:function(d){return this._obj[d]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(d){return void 0!==this._obj[d]}},{key:"get",value:function(d){return this._obj[d]}}]),f}(),Ia=function(){function f(c){if(Q(this,f),this._obj=Object.create(null),this.size=0,null!=c){var d;d=null!=c.instanceString&&c.instanceString()===this.instanceString()?c.toArray():c;for(var m=0;m<d.length;m++)this.add(d[m])}}return ae(f,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(d){var m=this._obj;1!==m[d]&&(m[d]=1,this.size++)}},{key:"delete",value:function(d){var m=this._obj;1===m[d]&&(m[d]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(d){return 1===this._obj[d]}},{key:"toArray",value:function(){var d=this;return Object.keys(this._obj).filter(function(m){return d.has(m)})}},{key:"forEach",value:function(d,m){return this.toArray().forEach(d,m)}}]),f}(),us="undefined"!==(typeof Set>"u"?"undefined":se(Set))?Set:Ia,Xa=function(c,d){var m=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==c&&void 0!==d&&bn(c)){var _=d.group;if(null==_&&(_=d.data&&null!=d.data.source&&null!=d.data.target?"edges":"nodes"),"nodes"===_||"edges"===_){this.length=1,this[0]=this;var b=this._private={cy:c,single:!0,data:d.data||{},position:d.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:_,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!d.selected,selectable:void 0===d.selectable||!!d.selectable,locked:!!d.locked,grabbed:!1,grabbable:void 0===d.grabbable||!!d.grabbable,pannable:void 0===d.pannable?"edges"===_:!!d.pannable,active:!1,classes:new us,animation:{current:[],queue:[]},rscratch:{},scratch:d.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==b.position.x&&(b.position.x=0),null==b.position.y&&(b.position.y=0),d.renderedPosition){var w=d.renderedPosition,E=c.pan(),k=c.zoom();b.position={x:(w.x-E.x)/k,y:(w.y-E.y)/k}}var L=[];gt(d.classes)?L=d.classes:He(d.classes)&&(L=d.classes.split(/\s+/));for(var G=0,K=L.length;G<K;G++){var le=L[G];!le||""===le||b.classes.add(le)}this.createEmitter();var de=d.style||d.css;de&&(he("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(de)),(void 0===m||m)&&this.restore()}else it("An element must be of type `nodes` or `edges`; you specified `"+_+"`")}else it("An element must have a core reference and parameters set")},Ru=function(c){return c={bfs:c.bfs||!c.dfs,dfs:c.dfs||!c.bfs},function(m,_,b){var w;Ct(m)&&!nn(m)&&(m=(w=m).roots||w.root,_=w.visit,b=w.directed),b=2!==arguments.length||ft(_)?b:_,_=ft(_)?_:function(){};for(var Ie,E=this._private.cy,k=m=He(m)?this.filter(m):m,L=[],G=[],K={},le={},de={},pe=0,Ne=this.byGroup(),ze=Ne.nodes,Qe=Ne.edges,qe=0;qe<k.length;qe++){var dt=k[qe],Lt=dt.id();dt.isNode()&&(L.unshift(dt),c.bfs&&(de[Lt]=!0,G.push(dt)),le[Lt]=0)}for(var kt=function(){var Wt=c.bfs?L.shift():L.pop(),Tt=Wt.id();if(c.dfs){if(de[Tt])return"continue";de[Tt]=!0,G.push(Wt)}var Jn,gn=le[Tt],Kt=K[Tt],ln=null!=Kt?Kt.source():null,Sn=null!=Kt?Kt.target():null,Rn=null==Kt?void 0:Wt.same(ln)?Sn[0]:ln[0];if(!0===(Jn=_(Wt,Kt,Rn,pe++,gn)))return Ie=Wt,"break";if(!1===Jn)return"break";for(var En=Wt.connectedEdges().filter(function(hi){return(!b||hi.source().same(Wt))&&Qe.has(hi)}),Yn=0;Yn<En.length;Yn++){var li=En[Yn],Ci=li.connectedNodes().filter(function(hi){return!hi.same(Wt)&&ze.has(hi)}),pi=Ci.id();0!==Ci.length&&!de[pi]&&(L.push(Ci=Ci[0]),c.bfs&&(de[pi]=!0,G.push(Ci)),K[pi]=li,le[pi]=le[Tt]+1)}};0!==L.length;){var mt=kt();if("continue"!==mt&&"break"===mt)break}for(var Ft=E.collection(),bt=0;bt<G.length;bt++){var Ht=G[bt],Vt=K[Ht.id()];null!=Vt&&Ft.push(Vt),Ft.push(Ht)}return{path:E.collection(Ft),found:E.collection(Ie)}}},hs={breadthFirstSearch:Ru({bfs:!0}),depthFirstSearch:Ru({dfs:!0})};hs.bfs=hs.breadthFirstSearch,hs.dfs=hs.depthFirstSearch;var ts=ti({root:null,weight:function(c){return 1},directed:!1}),Mg={dijkstra:function(c){if(!Ct(c)){var d=arguments;c={root:d[0],weight:d[1],directed:d[2]}}var m=ts(c),_=m.root,b=m.weight,w=m.directed,E=this,k=b,L=He(_)?this.filter(_)[0]:_[0],G={},K={},le={},de=this.byGroup(),pe=de.nodes,Ie=de.edges;Ie.unmergeBy(function(gn){return gn.isLoop()});for(var Ne=function(Kt){return G[Kt.id()]},ze=function(Kt,ln){G[Kt.id()]=ln,Qe.updateItem(Kt)},Qe=new q.default(function(gn,Kt){return Ne(gn)-Ne(Kt)}),qe=0;qe<pe.length;qe++){var dt=pe[qe];G[dt.id()]=dt.same(L)?0:1/0,Qe.push(dt)}for(var Lt=function(Kt,ln){for(var Jn,Sn=(w?Kt.edgesTo(ln):Kt.edgesWith(ln)).intersect(Ie),Rn=1/0,En=0;En<Sn.length;En++){var Yn=Sn[En],li=k(Yn);(li<Rn||!Jn)&&(Rn=li,Jn=Yn)}return{edge:Jn,dist:Rn}};Qe.size()>0;){var kt=Qe.pop(),mt=Ne(kt),Ft=kt.id();if(le[Ft]=mt,mt!==1/0)for(var bt=kt.neighborhood().intersect(pe),Ht=0;Ht<bt.length;Ht++){var Vt=bt[Ht],et=Vt.id(),Wt=Lt(kt,Vt),Tt=mt+Wt.dist;Tt<Ne(Vt)&&(ze(Vt,Tt),K[et]={node:kt,edge:Wt.edge})}}return{distanceTo:function(Kt){var ln=He(Kt)?pe.filter(Kt)[0]:Kt[0];return le[ln.id()]},pathTo:function(Kt){var ln=He(Kt)?pe.filter(Kt)[0]:Kt[0],Sn=[],Rn=ln,Jn=Rn.id();if(ln.length>0)for(Sn.unshift(ln);K[Jn];){var En=K[Jn];Sn.unshift(En.edge),Sn.unshift(En.node),Jn=(Rn=En.node).id()}return E.spawn(Sn)}}}},zp={kruskal:function(c){c=c||function(qe){return 1};for(var d=this.byGroup(),m=d.nodes,_=d.edges,b=m.length,w=new Array(b),E=m,k=function(dt){for(var Lt=0;Lt<w.length;Lt++)if(w[Lt].has(dt))return Lt},L=0;L<b;L++)w[L]=this.spawn(m[L]);for(var G=_.sort(function(qe,dt){return c(qe)-c(dt)}),K=0;K<G.length;K++){var le=G[K],de=le.source()[0],pe=le.target()[0],Ie=k(de),Ne=k(pe),ze=w[Ie],Qe=w[Ne];Ie!==Ne&&(E.merge(le),ze.merge(Qe),w.splice(Ne,1))}return E}},gi=ti({root:null,goal:null,weight:function(c){return 1},heuristic:function(c){return 0},directed:!1}),Dg={aStar:function(c){var d=this.cy(),m=gi(c),_=m.root,b=m.goal,w=m.heuristic,E=m.directed,k=m.weight;_=d.collection(_)[0],b=d.collection(b)[0];var qe,dt,L=_.id(),G=b.id(),K={},le={},de={},pe=new q.default(function(Jn,En){return le[Jn.id()]-le[En.id()]}),Ie=new us,Ne={},ze={},Qe=function(En,Yn){pe.push(En),Ie.add(Yn)};Qe(_,L),K[L]=0,le[L]=w(_);for(var mt=0;pe.size()>0;){if(dt=(qe=pe.pop()).id(),Ie.delete(dt),mt++,dt===G){for(var Ft=[],bt=b,Ht=G,Vt=ze[Ht];Ft.unshift(bt),null!=Vt&&Ft.unshift(Vt),null!=(bt=Ne[Ht]);)Vt=ze[Ht=bt.id()];return{found:!0,distance:K[dt],path:this.spawn(Ft),steps:mt}}de[dt]=!0;for(var et=qe._private.edges,Wt=0;Wt<et.length;Wt++){var Tt=et[Wt];if(this.hasElementWithId(Tt.id())&&(!E||Tt.data("source")===dt)){var gn=Tt.source(),Kt=Tt.target(),ln=gn.id()!==dt?gn:Kt,Sn=ln.id();if(this.hasElementWithId(Sn)&&!de[Sn]){var Rn=K[dt]+k(Tt);if(!Ie.has(Sn)){K[Sn]=Rn,le[Sn]=Rn+w(ln),Qe(ln,Sn),Ne[Sn]=qe,ze[Sn]=Tt;continue}Rn<K[Sn]&&(K[Sn]=Rn,le[Sn]=Rn+w(ln),Ne[Sn]=qe,ze[Sn]=Tt)}}}}return{found:!1,distance:void 0,path:void 0,steps:mt}}},Ls=ti({weight:function(c){return 1},directed:!1}),wo={floydWarshall:function(c){for(var d=this.cy(),m=Ls(c),b=m.directed,w=m.weight,E=this.byGroup(),k=E.nodes,L=E.edges,G=k.length,K=G*G,le=function(li){return k.indexOf(li)},de=function(li){return k[li]},pe=new Array(K),Ie=0;Ie<K;Ie++){var Ne=Ie%G;pe[Ie]=(Ie-Ne)/G===Ne?0:1/0}for(var Qe=new Array(K),qe=new Array(K),dt=0;dt<L.length;dt++){var Lt=L[dt],kt=Lt.source()[0],mt=Lt.target()[0];if(kt!==mt){var Ft=le(kt),bt=le(mt),Ht=Ft*G+bt,Vt=w(Lt);if(pe[Ht]>Vt&&(pe[Ht]=Vt,Qe[Ht]=bt,qe[Ht]=Lt),!b){var et=bt*G+Ft;!b&&pe[et]>Vt&&(pe[et]=Vt,Qe[et]=Ft,qe[et]=Lt)}}}for(var Wt=0;Wt<G;Wt++)for(var Tt=0;Tt<G;Tt++)for(var gn=Tt*G+Wt,Kt=0;Kt<G;Kt++){var ln=Tt*G+Kt,Sn=Wt*G+Kt;pe[gn]+pe[Sn]<pe[ln]&&(pe[ln]=pe[gn]+pe[Sn],Qe[ln]=Qe[gn])}var Jn=function(li){return le(function(li){return(He(li)?d.filter(li):li)[0]}(li))};return{distance:function(li,Ci){var pi=Jn(li),hi=Jn(Ci);return pe[pi*G+hi]},path:function(li,Ci){var pi=Jn(li),hi=Jn(Ci),Mn=de(pi);if(pi===hi)return Mn.collection();if(null==Qe[pi*G+hi])return d.collection();var ri=d.collection();for(ri.merge(Mn);pi!==hi;)ri.merge(qe[pi*G+(pi=Qe[pi*G+hi])]),ri.merge(de(pi));return ri}}}},pv=ti({weight:function(c){return 1},directed:!1,root:null}),gv={bellmanFord:function(c){var d=this,m=pv(c),b=m.directed,w=m.root,E=m.weight,k=this,L=this.cy(),G=this.byGroup(),K=G.edges,le=G.nodes,de=le.length,pe=new xo,Ie=!1,Ne=[];w=L.collection(w)[0],K.unmergeBy(function(Mi){return Mi.isLoop()});for(var ze=K.length,Qe=function(yr){var Cr=pe.get(yr.id());return Cr||(Cr={},pe.set(yr.id(),Cr)),Cr},qe=function(yr){return(He(yr)?L.$(yr):yr)[0]},kt=0;kt<de;kt++){var mt=le[kt],Ft=Qe(mt);Ft.dist=mt.same(w)?0:1/0,Ft.pred=null,Ft.edge=null}for(var bt=!1,Ht=function(yr,Cr,Kr,Fs,Zr,Ui){var St=Fs.dist+Ui;St<Zr.dist&&!Kr.same(Fs.edge)&&(Zr.dist=St,Zr.pred=yr,Zr.edge=Kr,bt=!0)},Vt=1;Vt<de;Vt++){bt=!1;for(var et=0;et<ze;et++){var Wt=K[et],Tt=Wt.source(),gn=Wt.target(),Kt=E(Wt),ln=Qe(Tt),Sn=Qe(gn);Ht(Tt,0,Wt,ln,Sn,Kt),b||Ht(gn,0,Wt,Sn,ln,Kt)}if(!bt)break}if(bt)for(var Rn=[],Jn=0;Jn<ze;Jn++){var En=K[Jn],Yn=En.source(),li=En.target(),Ci=E(En),pi=Qe(Yn).dist,hi=Qe(li).dist;if(pi+Ci<hi||!b&&hi+Ci<pi){if(Ie||(he("Graph contains a negative weight cycle for Bellman-Ford"),Ie=!0),!1===c.findNegativeWeightCycles)break;var Mn=[];pi+Ci<hi&&Mn.push(Yn),!b&&hi+Ci<pi&&Mn.push(li);for(var ri=Mn.length,xi=0;xi<ri;xi++){var ji=Mn[xi],ir=[ji];ir.push(Qe(ji).edge);for(var Nr=Qe(ji).pred;-1===ir.indexOf(Nr);)ir.push(Nr),ir.push(Qe(Nr).edge),Nr=Qe(Nr).pred;for(var Yr=(ir=ir.slice(ir.indexOf(Nr)))[0].id(),pr=0,tr=2;tr<ir.length;tr+=2)ir[tr].id()<Yr&&(Yr=ir[tr].id(),pr=tr);(ir=ir.slice(pr).concat(ir.slice(0,pr))).push(ir[0]);var $r=ir.map(function(Mi){return Mi.id()}).join(",");-1===Rn.indexOf($r)&&(Ne.push(k.spawn(ir)),Rn.push($r))}}}return{distanceTo:function(yr){return Qe(qe(yr)).dist},pathTo:function(yr){for(var Cr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,Kr=qe(yr),Fs=[],Zr=Kr;;){if(null==Zr)return d.spawn();var Ui=Qe(Zr),St=Ui.edge,$n=Ui.pred;if(Fs.unshift(Zr[0]),Zr.same(Cr)&&Fs.length>0)break;null!=St&&Fs.unshift(St),Zr=$n}return k.spawn(Fs)},hasNegativeWeightCycle:Ie,negativeWeightCycles:Ne}}},Ay=Math.sqrt(2),xs=function(c,d,m){0===m.length&&it("Karger-Stein must be run on a connected (sub)graph");for(var _=m[c],E=d[_[1]],k=d[_[2]],L=m,G=L.length-1;G>=0;G--){var K=L[G],le=K[1],de=K[2];(d[le]===E&&d[de]===k||d[le]===k&&d[de]===E)&&L.splice(G,1)}for(var pe=0;pe<L.length;pe++){var Ie=L[pe];Ie[1]===k?(L[pe]=Ie.slice(),L[pe][1]=E):Ie[2]===k&&(L[pe]=Ie.slice(),L[pe][2]=E)}for(var Ne=0;Ne<d.length;Ne++)d[Ne]===k&&(d[Ne]=E);return L},Xi=function(c,d,m,_){for(;m>_;){var b=Math.floor(Math.random()*d.length);d=xs(b,c,d),m--}return d},Iy={kargerStein:function(){var c=this,d=this.byGroup(),m=d.nodes,_=d.edges;_.unmergeBy(function(Sn){return Sn.isLoop()});var b=m.length,w=_.length,E=Math.ceil(Math.pow(Math.log(b)/Math.LN2,2)),k=Math.floor(b/Ay);if(!(b<2)){for(var L=[],G=0;G<w;G++){var K=_[G];L.push([G,m.indexOf(K.source()),m.indexOf(K.target())])}for(var le=1/0,de=[],pe=new Array(b),Ie=new Array(b),Ne=new Array(b),ze=function(Rn,Jn){for(var En=0;En<b;En++)Jn[En]=Rn[En]},Qe=0;Qe<=E;Qe++){for(var qe=0;qe<b;qe++)Ie[qe]=qe;var dt=Xi(Ie,L.slice(),b,k),Lt=dt.slice();ze(Ie,Ne);var kt=Xi(Ie,dt,k,2),mt=Xi(Ne,Lt,k,2);kt.length<=mt.length&&kt.length<le?(le=kt.length,de=kt,ze(Ie,pe)):mt.length<=kt.length&&mt.length<le&&(le=mt.length,de=mt,ze(Ne,pe))}for(var Ft=this.spawn(de.map(function(Sn){return _[Sn[0]]})),bt=this.spawn(),Ht=this.spawn(),Vt=pe[0],et=0;et<pe.length;et++){var Tt=m[et];pe[et]===Vt?bt.merge(Tt):Ht.merge(Tt)}var gn=function(Rn){var Jn=c.spawn();return Rn.forEach(function(En){Jn.merge(En),En.connectedEdges().forEach(function(Yn){c.contains(Yn)&&!Ft.contains(Yn)&&Jn.merge(Yn)})}),Jn},Kt=[gn(bt),gn(Ht)];return{cut:Ft,components:Kt,partition1:bt,partition2:Ht}}it("At least 2 nodes are required for Karger-Stein algorithm")}},jo=function(c,d,m){return{x:c.x*d+m.x,y:c.y*d+m.y}},Ac=function(c,d,m){return{x:(c.x-m.x)/d,y:(c.y-m.y)/d}},id=function(c){return{x:c[0],y:c[1]}},Lg=function(c,d){return Math.atan2(d,c)-Math.PI/2},mv=Math.log2||function(f){return Math.log(f)/Math.log(2)},Ic=function(c){return c>0?1:c<0?-1:0},no=function(c,d){return Math.sqrt(Eh(c,d))},Eh=function(c,d){var m=d.x-c.x,_=d.y-c.y;return m*m+_*_},R_=function(c){for(var d=c.length,m=0,_=0;_<d;_++)m+=c[_];for(var b=0;b<d;b++)c[b]=c[b]/m;return c},cc=function(c,d,m,_){return(1-_)*(1-_)*c+2*(1-_)*_*d+_*_*m},Yi=function(c,d,m,_){return{x:cc(c.x,d.x,m.x,_),y:cc(c.y,d.y,m.y,_)}},Dr=function(c,d,m){return Math.max(c,Math.min(m,d))},Sc=function(c){if(null==c)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=c.x1&&null!=c.y1){if(null!=c.x2&&null!=c.y2&&c.x2>=c.x1&&c.y2>=c.y1)return{x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2,w:c.x2-c.x1,h:c.y2-c.y1};if(null!=c.w&&null!=c.h&&c.w>=0&&c.h>=0)return{x1:c.x1,y1:c.y1,x2:c.x1+c.w,y2:c.y1+c.h,w:c.w,h:c.h}}},Sa=function(c,d){c.x1=Math.min(c.x1,d.x1),c.x2=Math.max(c.x2,d.x2),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,d.y1),c.y2=Math.max(c.y2,d.y2),c.h=c.y2-c.y1},ua=function(c,d,m){c.x1=Math.min(c.x1,d),c.x2=Math.max(c.x2,d),c.w=c.x2-c.x1,c.y1=Math.min(c.y1,m),c.y2=Math.max(c.y2,m),c.h=c.y2-c.y1},$f=function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c.x1-=d,c.x2+=d,c.y1-=d,c.y2+=d,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},Vp=function(c){var m,_,b,w,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===d.length)m=_=b=w=d[0];else if(2===d.length)m=b=d[0],w=_=d[1];else if(4===d.length){var E=Oe(d,4);m=E[0],_=E[1],b=E[2],w=E[3]}return c.x1-=w,c.x2+=_,c.y1-=m,c.y2+=b,c.w=c.x2-c.x1,c.h=c.y2-c.y1,c},bm=function(c,d){c.x1=d.x1,c.y1=d.y1,c.x2=d.x2,c.y2=d.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1},xm=function(c,d){return!(c.x1>d.x2||d.x1>c.x2||c.x2<d.x1||d.x2<c.x1||c.y2<d.y1||d.y2<c.y1||c.y1>d.y2||d.y1>c.y2)},ns=function(c,d,m){return c.x1<=d&&d<=c.x2&&c.y1<=m&&m<=c.y2},vv=function(c,d){return ns(c,d.x,d.y)},yv=function(c,d){return ns(c,d.x1,d.y1)&&ns(c,d.x2,d.y2)},ku=function(c,d,m,_,b,w,E){var K,k=gf(b,w),L=b/2,G=w/2,de=_-G-E;if((K=il(c,d,m,_,m-L+k-E,de,m+L-k+E,de,!1)).length>0)return K;var Ne=m+L+E;if((K=il(c,d,m,_,Ne,_-G+k-E,Ne,_+G-k+E,!1)).length>0)return K;var Lt=_+G+E;if((K=il(c,d,m,_,m-L+k-E,Lt,m+L-k+E,Lt,!1)).length>0)return K;var et,Ft=m-L-E;if((K=il(c,d,m,_,Ft,_-G+k-E,Ft,_+G-k+E,!1)).length>0)return K;var Wt=m-L+k,Tt=_-G+k;if((et=qf(c,d,m,_,Wt,Tt,k+E)).length>0&&et[0]<=Wt&&et[1]<=Tt)return[et[0],et[1]];var gn=m+L-k,Kt=_-G+k;if((et=qf(c,d,m,_,gn,Kt,k+E)).length>0&&et[0]>=gn&&et[1]<=Kt)return[et[0],et[1]];var ln=m+L-k,Sn=_+G-k;if((et=qf(c,d,m,_,ln,Sn,k+E)).length>0&&et[0]>=ln&&et[1]>=Sn)return[et[0],et[1]];var Rn=m-L+k,Jn=_+G-k;return(et=qf(c,d,m,_,Rn,Jn,k+E)).length>0&&et[0]<=Rn&&et[1]>=Jn?[et[0],et[1]]:[]},Xl=function(c,d,m,_,b,w,E){var k=E,L=Math.min(m,b),G=Math.max(m,b),K=Math.min(_,w),le=Math.max(_,w);return L-k<=c&&c<=G+k&&K-k<=d&&d<=le+k},O_=function(c,d,m,_,b,w,E,k,L){var G_x1=Math.min(m,E,b)-L,G_x2=Math.max(m,E,b)+L,G_y1=Math.min(_,k,w)-L,G_y2=Math.max(_,k,w)+L;return!(c<G_x1||c>G_x2||d<G_y1||d>G_y2)},Ey=function(c,d,m,_,b,w,E,k){var de=[];!function(c,d,m,_,b){var E,k,L,G,K,le,de,pe;0===c&&(c=1e-5),L=-27*(_/=c)+(d/=c)*(9*(m/=c)-d*d*2),E=(k=(3*m-d*d)/9)*k*k+(L/=54)*L,b[1]=0,de=d/3,E>0?(K=(K=L+Math.sqrt(E))<0?-Math.pow(-K,1/3):Math.pow(K,1/3),le=(le=L-Math.sqrt(E))<0?-Math.pow(-le,1/3):Math.pow(le,1/3),b[0]=-de+K+le,b[4]=b[2]=-(de+=(K+le)/2),de=Math.sqrt(3)*(-le+K)/2,b[3]=de,b[5]=-de):(b[5]=b[3]=0,0===E?(pe=L<0?-Math.pow(-L,1/3):Math.pow(L,1/3),b[0]=2*pe-de,b[4]=b[2]=-(pe+de)):(G=(k=-k)*k*k,G=Math.acos(L/Math.sqrt(G)),pe=2*Math.sqrt(k),b[0]=-de+pe*Math.cos(G/3),b[2]=-de+pe*Math.cos((G+2*Math.PI)/3),b[4]=-de+pe*Math.cos((G+4*Math.PI)/3)))}(1*m*m-4*m*b+2*m*E+4*b*b-4*b*E+E*E+_*_-4*_*w+2*_*k+4*w*w-4*w*k+k*k,9*m*b-3*m*m-3*m*E-6*b*b+3*b*E+9*_*w-3*_*_-3*_*k-6*w*w+3*w*k,3*m*m-6*m*b+m*E-m*c+2*b*b+2*b*c-E*c+3*_*_-6*_*w+_*k-_*d+2*w*w+2*w*d-k*d,1*m*b-m*m+m*c-b*c+_*w-_*_+_*d-w*d,de);for(var Ie=[],Ne=0;Ne<6;Ne+=2)Math.abs(de[Ne+1])<1e-7&&de[Ne]>=0&&de[Ne]<=1&&Ie.push(de[Ne]);Ie.push(1),Ie.push(0);for(var Qe,qe,dt,ze=-1,Lt=0;Lt<Ie.length;Lt++)Qe=Math.pow(1-Ie[Lt],2)*m+2*(1-Ie[Lt])*Ie[Lt]*b+Ie[Lt]*Ie[Lt]*E,qe=Math.pow(1-Ie[Lt],2)*_+2*(1-Ie[Lt])*Ie[Lt]*w+Ie[Lt]*Ie[Lt]*k,dt=Math.pow(Qe-c,2)+Math.pow(qe-d,2),ze>=0?dt<ze&&(ze=dt):ze=dt;return ze},Th=function(c,d,m,_,b,w){var E=[c-m,d-_],k=[b-m,w-_],L=k[0]*k[0]+k[1]*k[1],G=E[0]*E[0]+E[1]*E[1],K=E[0]*k[0]+E[1]*k[1],le=K*K/L;return K<0?G:le>L?(c-b)*(c-b)+(d-w)*(d-w):G-le},Ea=function(c,d,m){for(var _,b,w,E,L=0,G=0;G<m.length/2;G++)if(b=m[2*G+1],G+1<m.length/2?(w=m[2*(G+1)],E=m[2*(G+1)+1]):(w=m[2*(G+1-m.length/2)],E=m[2*(G+1-m.length/2)+1]),(_=m[2*G])!=c||w!=c){if(!(_>=c&&c>=w||_<=c&&c<=w))continue;(c-_)/(w-_)*(E-b)+b>d&&L++}return L%2!=0},io=function(c,d,m,_,b,w,E,k,L){var K,Ie,G=new Array(m.length);null!=k[0]?(K=Math.atan(k[1]/k[0]),k[0]<0?K+=Math.PI/2:K=-K-Math.PI/2):K=k;for(var le=Math.cos(-K),de=Math.sin(-K),pe=0;pe<G.length/2;pe++)G[2*pe]=w/2*(m[2*pe]*le-m[2*pe+1]*de),G[2*pe+1]=E/2*(m[2*pe+1]*le+m[2*pe]*de),G[2*pe]+=_,G[2*pe+1]+=b;if(L>0){var Ne=kd(G,-L);Ie=Ty(Ne)}else Ie=G;return Ea(c,d,Ie)},Ty=function(c){for(var E,k,L,G,d=new Array(c.length/2),K=0;K<c.length/4;K++){K<c.length/4-1?(E=c[4*(K+1)],k=c[4*(K+1)+1],L=c[4*(K+1)+2],G=c[4*(K+1)+3]):(E=c[0],k=c[1],L=c[2],G=c[3]);var le=il(c[4*K],c[4*K+1],c[4*K+2],c[4*K+3],E,k,L,G,!0);d[2*K]=le[0],d[2*K+1]=le[1]}return d},kd=function(c,d){for(var _,b,w,E,m=new Array(2*c.length),k=0;k<c.length/2;k++){k<c.length/2-1?(w=c[2*(k+1)],E=c[2*(k+1)+1]):(w=c[0],E=c[1]);var L=E-(b=c[2*k+1]),G=-(w-(_=c[2*k])),K=Math.sqrt(L*L+G*G),le=L/K,de=G/K;m[4*k]=_+le*d,m[4*k+1]=b+de*d,m[4*k+2]=w+le*d,m[4*k+3]=E+de*d}return m},Ya=function(c,d,m,_,b,w,E){return c-=b,d-=w,(c/=m/2+E)*c+(d/=_/2+E)*d<=1},qf=function(c,d,m,_,b,w,E){var k=[m-c,_-d],L=[c-b,d-w],G=k[0]*k[0]+k[1]*k[1],K=2*(L[0]*k[0]+L[1]*k[1]),de=K*K-4*G*(L[0]*L[0]+L[1]*L[1]-E*E);if(de<0)return[];var pe=(-K+Math.sqrt(de))/(2*G),Ie=(-K-Math.sqrt(de))/(2*G),Ne=Math.min(pe,Ie),ze=Math.max(pe,Ie),Qe=[];if(Ne>=0&&Ne<=1&&Qe.push(Ne),ze>=0&&ze<=1&&Qe.push(ze),0===Qe.length)return[];var qe=Qe[0]*k[0]+c,dt=Qe[0]*k[1]+d;return Qe.length>1?Qe[0]==Qe[1]?[qe,dt]:[qe,dt,Qe[1]*k[0]+c,Qe[1]*k[1]+d]:[qe,dt]},Ka=function(c,d,m){return d<=c&&c<=m||m<=c&&c<=d?c:c<=d&&d<=m||m<=d&&d<=c?d:m},il=function(c,d,m,_,b,w,E,k,L){var G=c-b,K=m-c,le=E-b,de=d-w,pe=_-d,Ie=k-w,Ne=le*de-Ie*G,ze=K*de-pe*G,Qe=Ie*K-le*pe;if(0!==Qe){var qe=Ne/Qe,dt=ze/Qe;return-.001<=qe&&qe<=1.001&&-.001<=dt&&dt<=1.001||L?[c+qe*K,d+qe*pe]:[]}return 0===Ne||0===ze?Ka(c,m,E)===E?[E,k]:Ka(c,m,b)===b?[b,w]:Ka(b,E,m)===m?[m,_]:[]:[]},uu=function(c,d,m,_,b,w,E,k){var G,de,L=[],K=new Array(m.length),le=!0;if(null==w&&(le=!1),le){for(var pe=0;pe<K.length/2;pe++)K[2*pe]=m[2*pe]*w+_,K[2*pe+1]=m[2*pe+1]*E+b;if(k>0){var Ie=kd(K,-k);de=Ty(Ie)}else de=K}else de=m;for(var Qe,qe,dt=0;dt<de.length/2;dt++)dt<de.length/2-1?(Qe=de[2*(dt+1)],qe=de[2*(dt+1)+1]):(Qe=de[0],qe=de[1]),0!==(G=il(c,d,_,b,de[2*dt],de[2*dt+1],Qe,qe)).length&&L.push(G[0],G[1]);return L},Xf=function(c,d,m){var _=[c[0]-d[0],c[1]-d[1]],b=Math.sqrt(_[0]*_[0]+_[1]*_[1]),w=(b-m)/b;return w<0&&(w=1e-5),[d[0]+w*_[0],d[1]+w*_[1]]},Ar=function(c,d){var m=Mh(c,d);return Ta(m)},Ta=function(c){for(var d,m,_=c.length/2,b=1/0,w=1/0,E=-1/0,k=-1/0,L=0;L<_;L++)d=c[2*L],m=c[2*L+1],b=Math.min(b,d),E=Math.max(E,d),w=Math.min(w,m),k=Math.max(k,m);for(var G=2/(E-b),K=2/(k-w),le=0;le<_;le++)d=c[2*le]=c[2*le]*G,m=c[2*le+1]=c[2*le+1]*K,b=Math.min(b,d),E=Math.max(E,d),w=Math.min(w,m),k=Math.max(k,m);if(w<-1)for(var de=0;de<_;de++)m=c[2*de+1]=c[2*de+1]+(-1-w);return c},Mh=function(c,d){var m=1/c*2*Math.PI,_=c%2==0?Math.PI/2+m/2:Math.PI/2;_+=d;for(var w,b=new Array(2*c),E=0;E<c;E++)w=E*m+_,b[2*E]=Math.cos(w),b[2*E+1]=Math.sin(-w);return b},gf=function(c,d){return Math.min(c/4,d/4,8)},Rr=function(c,d){return Math.min(c/10,d/10,8)},qr=function(c,d){return{heightOffset:Math.min(15,.05*d),widthOffset:Math.min(100,.25*c),ctrlPtOffsetPct:.05}},hu=ti({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(c){return 1}}),$o={pageRank:function(c){for(var d=hu(c),m=d.dampingFactor,_=d.precision,b=d.iterations,w=d.weight,E=this._private.cy,k=this.byGroup(),L=k.nodes,G=k.edges,K=L.length,de=G.length,pe=new Array(K*K),Ie=new Array(K),Ne=(1-m)/K,ze=0;ze<K;ze++){for(var Qe=0;Qe<K;Qe++)pe[ze*K+Qe]=0;Ie[ze]=0}for(var dt=0;dt<de;dt++){var Lt=G[dt],kt=Lt.data("source"),mt=Lt.data("target");if(kt!==mt){var Ft=L.indexOfId(kt),bt=L.indexOfId(mt),Ht=w(Lt);pe[bt*K+Ft]+=Ht,Ie[Ft]+=Ht}}for(var et=1/K+Ne,Wt=0;Wt<K;Wt++)if(0===Ie[Wt])for(var Tt=0;Tt<K;Tt++)pe[Tt*K+Wt]=et;else for(var Kt=0;Kt<K;Kt++){var ln=Kt*K+Wt;pe[ln]=pe[ln]/Ie[Wt]+Ne}for(var Jn,Sn=new Array(K),Rn=new Array(K),En=0;En<K;En++)Sn[En]=1;for(var Yn=0;Yn<b;Yn++){for(var li=0;li<K;li++)Rn[li]=0;for(var Ci=0;Ci<K;Ci++)for(var pi=0;pi<K;pi++)Rn[Ci]+=pe[Ci*K+pi]*Sn[pi];R_(Rn),Jn=Sn,Sn=Rn,Rn=Jn;for(var Mn=0,ri=0;ri<K;ri++){var xi=Jn[ri]-Sn[ri];Mn+=xi*xi}if(Mn<_)break}return{rank:function(Nr){return Nr=E.collection(Nr)[0],Sn[L.indexOf(Nr)]}}}},Ol=ti({root:null,weight:function(c){return 1},directed:!1,alpha:0}),Ma={degreeCentralityNormalized:function(c){c=Ol(c);var d=this.cy(),m=this.nodes(),_=m.length;if(c.directed){for(var G={},K={},le=0,de=0,pe=0;pe<_;pe++){var Ie=m[pe],Ne=Ie.id();c.root=Ie;var ze=this.degreeCentrality(c);le<ze.indegree&&(le=ze.indegree),de<ze.outdegree&&(de=ze.outdegree),G[Ne]=ze.indegree,K[Ne]=ze.outdegree}return{indegree:function(qe){return 0==le?0:(He(qe)&&(qe=d.filter(qe)),G[qe.id()]/le)},outdegree:function(qe){return 0===de?0:(He(qe)&&(qe=d.filter(qe)),K[qe.id()]/de)}}}for(var b={},w=0,E=0;E<_;E++){var k=m[E];c.root=k;var L=this.degreeCentrality(c);w<L.degree&&(w=L.degree),b[k.id()]=L.degree}return{degree:function(qe){return 0===w?0:(He(qe)&&(qe=d.filter(qe)),b[qe.id()]/w)}}},degreeCentrality:function(c){c=Ol(c);var d=this.cy(),m=this,b=c.root,w=c.weight,E=c.directed,k=c.alpha;if(b=d.collection(b)[0],E){for(var de=b.connectedEdges(),pe=de.filter(function(kt){return kt.target().same(b)&&m.has(kt)}),Ie=de.filter(function(kt){return kt.source().same(b)&&m.has(kt)}),Ne=pe.length,ze=Ie.length,Qe=0,qe=0,dt=0;dt<pe.length;dt++)Qe+=w(pe[dt]);for(var Lt=0;Lt<Ie.length;Lt++)qe+=w(Ie[Lt]);return{indegree:Math.pow(Ne,1-k)*Math.pow(Qe,k),outdegree:Math.pow(ze,1-k)*Math.pow(qe,k)}}for(var L=b.connectedEdges().intersection(m),G=L.length,K=0,le=0;le<L.length;le++)K+=w(L[le]);return{degree:Math.pow(G,1-k)*Math.pow(K,k)}}};Ma.dc=Ma.degreeCentrality,Ma.dcn=Ma.degreeCentralityNormalised=Ma.degreeCentralityNormalized;var du=ti({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Yl={closenessCentralityNormalized:function(c){for(var d=du(c),m=d.harmonic,_=d.weight,b=d.directed,w=this.cy(),E={},k=0,L=this.nodes(),G=this.floydWarshall({weight:_,directed:b}),K=0;K<L.length;K++){for(var le=0,de=L[K],pe=0;pe<L.length;pe++)if(K!==pe){var Ie=G.distance(de,L[pe]);le+=m?1/Ie:Ie}m||(le=1/le),k<le&&(k=le),E[de.id()]=le}return{closeness:function(ze){return 0==k?0:(ze=He(ze)?w.filter(ze)[0].id():ze.id(),E[ze]/k)}}},closenessCentrality:function(c){var d=du(c),m=d.root,_=d.weight,b=d.directed,w=d.harmonic;m=this.filter(m)[0];for(var E=this.dijkstra({root:m,weight:_,directed:b}),k=0,L=this.nodes(),G=0;G<L.length;G++){var K=L[G];if(!K.same(m)){var le=E.distanceTo(K);k+=w?1/le:le}}return w?k:1/k}};Yl.cc=Yl.closenessCentrality,Yl.ccn=Yl.closenessCentralityNormalised=Yl.closenessCentralityNormalized;var wr=ti({weight:null,directed:!1}),Ss={betweennessCentrality:function(c){for(var d=wr(c),m=d.directed,_=d.weight,b=null!=_,w=this.cy(),E=this.nodes(),k={},L={},G=0,K={set:function(qe,dt){L[qe]=dt,dt>G&&(G=dt)},get:function(qe){return L[qe]}},le=0;le<E.length;le++){var de=E[le],pe=de.id();k[pe]=m?de.outgoers().nodes():de.openNeighborhood().nodes(),K.set(pe,0)}for(var Ie=function(qe){for(var dt=E[qe].id(),Lt=[],kt={},mt={},Ft={},bt=new q.default(function(pi,hi){return Ft[pi]-Ft[hi]}),Ht=0;Ht<E.length;Ht++){var Vt=E[Ht].id();kt[Vt]=[],mt[Vt]=0,Ft[Vt]=1/0}for(mt[dt]=1,Ft[dt]=0,bt.push(dt);!bt.empty();){var et=bt.pop();if(Lt.push(et),b)for(var Wt=0;Wt<k[et].length;Wt++){var Kt,Tt=k[et][Wt],gn=w.getElementById(et);Kt=gn.edgesTo(Tt).length>0?gn.edgesTo(Tt)[0]:Tt.edgesTo(gn)[0];var ln=_(Kt);Tt=Tt.id(),Ft[Tt]>Ft[et]+ln&&(Ft[Tt]=Ft[et]+ln,bt.nodes.indexOf(Tt)<0?bt.push(Tt):bt.updateItem(Tt),mt[Tt]=0,kt[Tt]=[]),Ft[Tt]==Ft[et]+ln&&(mt[Tt]=mt[Tt]+mt[et],kt[Tt].push(et))}else for(var Sn=0;Sn<k[et].length;Sn++){var Rn=k[et][Sn].id();Ft[Rn]==1/0&&(bt.push(Rn),Ft[Rn]=Ft[et]+1),Ft[Rn]==Ft[et]+1&&(mt[Rn]=mt[Rn]+mt[et],kt[Rn].push(et))}}for(var Jn={},En=0;En<E.length;En++)Jn[E[En].id()]=0;for(;Lt.length>0;){for(var Yn=Lt.pop(),li=0;li<kt[Yn].length;li++){var Ci=kt[Yn][li];Jn[Ci]=Jn[Ci]+mt[Ci]/mt[Yn]*(1+Jn[Yn])}Yn!=E[qe].id()&&K.set(Yn,K.get(Yn)+Jn[Yn])}},Ne=0;Ne<E.length;Ne++)Ie(Ne);var ze={betweenness:function(qe){var dt=w.collection(qe).id();return K.get(dt)},betweennessNormalized:function(qe){if(0==G)return 0;var dt=w.collection(qe).id();return K.get(dt)/G}};return ze.betweennessNormalised=ze.betweennessNormalized,ze}};Ss.bc=Ss.betweennessCentrality;var ga=ti({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(f){return 1}]}),Yf=function(c,d){for(var m=0,_=0;_<d.length;_++)m+=d[_](c);return m},rd=function(c,d){for(var m,_=0;_<d;_++){m=0;for(var b=0;b<d;b++)m+=c[b*d+_];for(var w=0;w<d;w++)c[w*d+_]=c[w*d+_]/m}},rl=function(c,d,m){for(var _=new Array(m*m),b=0;b<m;b++){for(var w=0;w<m;w++)_[b*m+w]=0;for(var E=0;E<m;E++)for(var k=0;k<m;k++)_[b*m+k]+=c[b*m+E]*d[E*m+k]}return _},Up=function(c,d,m){for(var _=c.slice(0),b=1;b<m;b++)c=rl(c,_,d);return c},Kl=function(c,d,m){for(var _=new Array(d*d),b=0;b<d*d;b++)_[b]=Math.pow(c[b],m);return rd(_,d),_},Ws=function(c,d,m,_){for(var b=0;b<m;b++)if(Math.round(c[b]*Math.pow(10,_))/Math.pow(10,_)!=Math.round(d[b]*Math.pow(10,_))/Math.pow(10,_))return!1;return!0},Kf=function(c,d){for(var m=0;m<c.length;m++)if(!d[m]||c[m].id()!==d[m].id())return!1;return!0},vf=function(c){for(var d=this.nodes(),m=this.edges(),_=this.cy(),b=function(c){return ga(c)}(c),w={},E=0;E<d.length;E++)w[d[E].id()]=E;for(var K,k=d.length,L=k*k,G=new Array(L),le=0;le<L;le++)G[le]=0;for(var de=0;de<m.length;de++){var pe=m[de],Ie=w[pe.source().id()],Ne=w[pe.target().id()],ze=Yf(pe,b.attributes);G[Ie*k+Ne]+=ze,G[Ne*k+Ie]+=ze}(function(c,d,m){for(var _=0;_<d;_++)c[_*d+_]=m})(G,k,b.multFactor),rd(G,k);for(var Qe=!0,qe=0;Qe&&qe<b.maxIterations;)Qe=!1,K=Up(G,k,b.expandFactor),G=Kl(K,k,b.inflateFactor),Ws(G,K,L,4)||(Qe=!0),qe++;var dt=function(c,d,m,_){for(var b=[],w=0;w<d;w++){for(var E=[],k=0;k<d;k++)Math.round(1e3*c[w*d+k])/1e3>0&&E.push(m[k]);0!==E.length&&b.push(_.collection(E))}return b}(G,k,d,_);return dt=function(c){for(var d=0;d<c.length;d++)for(var m=0;m<c.length;m++)d!=m&&Kf(c[d],c[m])&&c.splice(m,1);return c}(dt),dt},Ec={markovClustering:vf,mcl:vf},Pg=function(c){return c},Zf=function(c,d){return Math.abs(d-c)},oh=function(c,d,m){return c+Zf(d,m)},ah=function(c,d,m){return c+Math.pow(m-d,2)},Dy=function(c){return Math.sqrt(c)},ma=function(c,d,m){return Math.max(c,Zf(d,m))},Qf=function(c,d,m,_,b){for(var w=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Pg,E=_,G=0;G<c;G++)E=b(E,d(G),m(G));return w(E)},Jf={euclidean:function(c,d,m){return c>=2?Qf(c,d,m,0,ah,Dy):Qf(c,d,m,0,oh)},squaredEuclidean:function(c,d,m){return Qf(c,d,m,0,ah)},manhattan:function(c,d,m){return Qf(c,d,m,0,oh)},max:function(c,d,m){return Qf(c,d,m,-1/0,ma)}};function pu(f,c,d,m,_,b){var w;return w=ft(f)?f:Jf[f]||Jf.euclidean,0===c&&ft(f)?w(_,b):w(c,d,m,_,b)}Jf["squared-euclidean"]=Jf.squaredEuclidean,Jf.squaredeuclidean=Jf.squaredEuclidean;var Hp=ti({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),ep=function(c){return Hp(c)},tp=function(c,d,m,_,b){var E="kMedoids"!==b?function(K){return m[K]}:function(K){return _[K](m)};return pu(c,_.length,E,function(le){return _[le](d)},m,d)},Od=function(c,d,m){for(var _=m.length,b=new Array(_),w=new Array(_),E=new Array(d),k=null,L=0;L<_;L++)b[L]=c.min(m[L]).value,w[L]=c.max(m[L]).value;for(var G=0;G<d;G++){k=[];for(var K=0;K<_;K++)k[K]=Math.random()*(w[K]-b[K])+b[K];E[G]=k}return E},sl=function(c,d,m,_,b){for(var w=1/0,E=0,k=0;k<d.length;k++){var L=tp(m,c,d[k],_,b);L<w&&(w=L,E=k)}return E},lh=function(c,d,m){for(var _=[],b=null,w=0;w<d.length;w++)m[(b=d[w]).id()]===c&&_.push(b);return _},Kc=function(c,d,m){return Math.abs(d-c)<=m},Dh=function(c,d,m){for(var _=0;_<c.length;_++)for(var b=0;b<c[_].length;b++)if(Math.abs(c[_][b]-d[_][b])>m)return!1;return!0},_v=function(c,d,m){for(var _=0;_<m;_++)if(c===d[_])return!0;return!1},Rg=function(c,d){var m=new Array(d);if(c.length<50)for(var _=0;_<d;_++){for(var b=c[Math.floor(Math.random()*c.length)];_v(b,m,_);)b=c[Math.floor(Math.random()*c.length)];m[_]=b}else for(var w=0;w<d;w++)m[w]=c[Math.floor(Math.random()*c.length)];return m},kg=function(c,d,m){for(var _=0,b=0;b<d.length;b++)_+=tp("manhattan",d[b],c,m,"kMedoids");return _},wn=function(c,d,m,_,b){for(var w,E,k=0;k<d.length;k++)for(var L=0;L<c.length;L++)_[k][L]=Math.pow(m[k][L],b.m);for(var G=0;G<c.length;G++)for(var K=0;K<b.attributes.length;K++){w=0,E=0;for(var le=0;le<d.length;le++)w+=_[le][G]*b.attributes[K](d[le]),E+=_[le][G];c[G][K]=w/E}},oi=function(c,d,m,_,b){for(var w=0;w<c.length;w++)d[w]=c[w].slice();for(var E,k,L,G=2/(b.m-1),K=0;K<m.length;K++)for(var le=0;le<_.length;le++){E=0;for(var de=0;de<m.length;de++)k=tp(b.distance,_[le],m[K],b.attributes,"cmeans"),L=tp(b.distance,_[le],m[de],b.attributes,"cmeans"),E+=Math.pow(k/L,G);c[le][K]=1/E}},Lr=function(c){var b,w,E,k,L,d=this.cy(),m=this.nodes(),_=ep(c);k=new Array(m.length);for(var G=0;G<m.length;G++)k[G]=new Array(_.k);E=new Array(m.length);for(var K=0;K<m.length;K++)E[K]=new Array(_.k);for(var le=0;le<m.length;le++){for(var de=0,pe=0;pe<_.k;pe++)E[le][pe]=Math.random(),de+=E[le][pe];for(var Ie=0;Ie<_.k;Ie++)E[le][Ie]=E[le][Ie]/de}w=new Array(_.k);for(var Ne=0;Ne<_.k;Ne++)w[Ne]=new Array(_.attributes.length);L=new Array(m.length);for(var ze=0;ze<m.length;ze++)L[ze]=new Array(_.k);for(var Qe=!0,qe=0;Qe&&qe<_.maxIterations;)Qe=!1,wn(w,m,E,L,_),oi(E,k,w,m,_),Dh(E,k,_.sensitivityThreshold)||(Qe=!0),qe++;return b=function(c,d,m,_){for(var b=new Array(m.k),w=0;w<b.length;w++)b[w]=[];for(var E,k,L=0;L<d.length;L++){E=-1/0,k=-1;for(var G=0;G<d[0].length;G++)d[L][G]>E&&(E=d[L][G],k=G);b[k].push(c[L])}for(var K=0;K<b.length;K++)b[K]=_.collection(b[K]);return b}(m,E,_,d),{clusters:b,degreeOfMembership:E}},Bs={kMeans:function(c){var k,d=this.cy(),m=this.nodes(),_=null,b=ep(c),w=new Array(b.k),E={};k=b.testMode?"number"==typeof b.testCentroids?Od(m,b.k,b.attributes):"object"===se(b.testCentroids)?b.testCentroids:Od(m,b.k,b.attributes):Od(m,b.k,b.attributes);for(var L=!0,G=0;L&&G<b.maxIterations;){for(var K=0;K<m.length;K++)E[(_=m[K]).id()]=sl(_,k,b.distance,b.attributes,"kMeans");L=!1;for(var le=0;le<b.k;le++){var de=lh(le,m,E);if(0!==de.length){for(var pe=b.attributes.length,Ie=k[le],Ne=new Array(pe),ze=new Array(pe),Qe=0;Qe<pe;Qe++){ze[Qe]=0;for(var qe=0;qe<de.length;qe++)ze[Qe]+=b.attributes[Qe](_=de[qe]);Ne[Qe]=ze[Qe]/de.length,Kc(Ne[Qe],Ie[Qe],b.sensitivityThreshold)||(L=!0)}k[le]=Ne,w[le]=d.collection(de)}}G++}return w},kMedoids:function(c){var E,L,d=this.cy(),m=this.nodes(),_=null,b=ep(c),w=new Array(b.k),k={},G=new Array(b.k);b.testMode?"number"==typeof b.testCentroids||(E="object"===se(b.testCentroids)?b.testCentroids:Rg(m,b.k)):E=Rg(m,b.k);for(var K=!0,le=0;K&&le<b.maxIterations;){for(var de=0;de<m.length;de++)k[(_=m[de]).id()]=sl(_,E,b.distance,b.attributes,"kMedoids");K=!1;for(var pe=0;pe<E.length;pe++){var Ie=lh(pe,m,k);if(0!==Ie.length){G[pe]=kg(E[pe],Ie,b.attributes);for(var Ne=0;Ne<Ie.length;Ne++)(L=kg(Ie[Ne],Ie,b.attributes))<G[pe]&&(G[pe]=L,E[pe]=Ie[Ne],K=!0);w[pe]=d.collection(Ie)}}le++}return w},fuzzyCMeans:Lr,fcm:Lr},qo=ti({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Zl={single:"min",complete:"max"},Cv=function(c,d,m,_,b){for(var k,w=0,E=1/0,L=b.attributes,G=function(bt,Ht){return pu(b.distance,L.length,function(Vt){return L[Vt](bt)},function(Vt){return L[Vt](Ht)},bt,Ht)},K=0;K<c.length;K++){var le=c[K].key,de=m[le][_[le]];de<E&&(w=le,E=de)}if("threshold"===b.mode&&E>=b.threshold||"dendrogram"===b.mode&&1===c.length)return!1;var Ne,pe=d[w],Ie=d[_[w]];Ne="dendrogram"===b.mode?{left:pe,right:Ie,key:pe.key}:{value:pe.value.concat(Ie.value),key:pe.key},c[pe.index]=Ne,c.splice(Ie.index,1),d[pe.key]=Ne;for(var ze=0;ze<c.length;ze++){var Qe=c[ze];pe.key===Qe.key?k=1/0:"min"===b.linkage?(k=m[pe.key][Qe.key],m[pe.key][Qe.key]>m[Ie.key][Qe.key]&&(k=m[Ie.key][Qe.key])):"max"===b.linkage?(k=m[pe.key][Qe.key],m[pe.key][Qe.key]<m[Ie.key][Qe.key]&&(k=m[Ie.key][Qe.key])):k="mean"===b.linkage?(m[pe.key][Qe.key]*pe.size+m[Ie.key][Qe.key]*Ie.size)/(pe.size+Ie.size):"dendrogram"===b.mode?G(Qe.value,pe.value):G(Qe.value[0],pe.value[0]),m[pe.key][Qe.key]=m[Qe.key][pe.key]=k}for(var qe=0;qe<c.length;qe++){var dt=c[qe].key;if(_[dt]===pe.key||_[dt]===Ie.key){for(var Lt=dt,kt=0;kt<c.length;kt++){var mt=c[kt].key;m[dt][mt]<m[dt][Lt]&&(Lt=mt)}_[dt]=Lt}c[qe].index=qe}return pe.key=Ie.key=pe.index=Ie.index=null,!0},bv=function f(c,d,m){!c||(c.value?d.push(c.value):(c.left&&f(c.left,d),c.right&&f(c.right,d)))},Ph=function f(c,d){if(!c)return"";if(c.left&&c.right){var m=f(c.left,d),_=f(c.right,d),b=d.add({group:"nodes",data:{id:m+","+_}});return d.add({group:"edges",data:{source:m,target:b.id()}}),d.add({group:"edges",data:{source:_,target:b.id()}}),b.id()}return c.value?c.value.id():void 0},xv=function f(c,d,m){if(!c)return[];var _=[],b=[],w=[];return 0===d?(c.left&&bv(c.left,_),c.right&&bv(c.right,b),w=_.concat(b),[m.collection(w)]):1===d?c.value?[m.collection(c.value)]:(c.left&&bv(c.left,_),c.right&&bv(c.right,b),[m.collection(_),m.collection(b)]):c.value?[m.collection(c.value)]:(c.left&&(_=f(c.left,d-1,m)),c.right&&(b=f(c.right,d-1,m)),_.concat(b))},N_=function(c){for(var d=this.cy(),m=this.nodes(),_=function(c){var d=qo(c),m=Zl[d.linkage];return null!=m&&(d.linkage=m),d}(c),b=_.attributes,w=function(qe,dt){return pu(_.distance,b.length,function(Lt){return b[Lt](qe)},function(Lt){return b[Lt](dt)},qe,dt)},E=[],k=[],L=[],G=[],K=0;K<m.length;K++){var le={value:"dendrogram"===_.mode?m[K]:[m[K]],key:K,index:K};E[K]=le,G[K]=le,k[K]=[],L[K]=0}for(var de=0;de<E.length;de++)for(var pe=0;pe<=de;pe++){var Ie;Ie="dendrogram"===_.mode?de===pe?1/0:w(E[de].value,E[pe].value):de===pe?1/0:w(E[de].value[0],E[pe].value[0]),k[de][pe]=Ie,k[pe][de]=Ie,Ie<k[de][L[de]]&&(L[de]=pe)}for(var Ne=Cv(E,G,k,L,_);Ne;)Ne=Cv(E,G,k,L,_);var ze;return"dendrogram"===_.mode?(ze=xv(E[0],_.dendrogramDepth,d),_.addDendrogram&&Ph(E[0],d)):(ze=new Array(E.length),E.forEach(function(Qe,qe){Qe.key=Qe.index=null,ze[qe]=d.collection(Qe.value)})),ze},Og={hierarchicalClustering:N_,hca:N_},wv=ti({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),ta=function(c,d,m,_){var b=function(E,k){return _[k](E)};return-pu(c,_.length,function(w){return b(d,w)},function(w){return b(m,w)},d,m)},Em=function(c,d,m){for(var _=[],b=0;b<c;b++){for(var w=-1,E=-1/0,k=0;k<m.length;k++){var L=m[k];d[b*c+L]>E&&(w=L,E=d[b*c+L])}w>0&&_.push(w)}for(var G=0;G<m.length;G++)_[m[G]]=m[G];return _},B_=function(c){for(var d=this.cy(),m=this.nodes(),_=function(c){var d=c.damping,m=c.preference;.5<=d&&d<1||it("Damping must range on [0.5, 1).  Got: ".concat(d));var _=["median","mean","min","max"];return _.some(function(b){return b===m})||Ut(m)||it("Preference must be one of [".concat(_.map(function(b){return"'".concat(b,"'")}).join(", "),"] or a number.  Got: ").concat(m)),wv(c)}(c),b={},w=0;w<m.length;w++)b[m[w].id()]=w;var E,k,L,G,K,le,bt;k=(E=m.length)*E,L=new Array(k);for(var de=0;de<k;de++)L[de]=-1/0;for(var pe=0;pe<E;pe++)for(var Ie=0;Ie<E;Ie++)pe!==Ie&&(L[pe*E+Ie]=ta(_.distance,m[pe],m[Ie],_.attributes));G=function(c,d){var m;return m="median"===d?function(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,b=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],w=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(m<c.length&&c.splice(m,c.length-m),d>0&&c.splice(0,d)):c=c.slice(d,m);for(var E=0,k=c.length-1;k>=0;k--)w?isFinite(c[k])||(c[k]=-1/0,E++):c.splice(k,1);b&&c.sort(function(le,de){return le-de});var G=c.length,K=Math.floor(G/2);return G%2!=0?c[K+1+E]:(c[K-1+E]+c[K+E])/2}(c):"mean"===d?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=0,b=0,w=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;w<m;w++){var E=c[w];isFinite(E)&&(_+=E,b++)}return _/b}(c):"min"===d?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=1/0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b<m;b++){var w=c[b];isFinite(w)&&(_=Math.min(w,_))}return _}(c):"max"===d?function(c){for(var m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.length,_=-1/0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b<m;b++){var w=c[b];isFinite(w)&&(_=Math.max(w,_))}return _}(c):d,m}(L,_.preference);for(var Ne=0;Ne<E;Ne++)L[Ne*E+Ne]=G;K=new Array(k);for(var ze=0;ze<k;ze++)K[ze]=0;le=new Array(k);for(var Qe=0;Qe<k;Qe++)le[Qe]=0;for(var qe=new Array(E),dt=new Array(E),Lt=new Array(E),kt=0;kt<E;kt++)qe[kt]=0,dt[kt]=0,Lt[kt]=0;for(var mt=new Array(E*_.minIterations),Ft=0;Ft<mt.length;Ft++)mt[Ft]=0;for(bt=0;bt<_.maxIterations;bt++){for(var Ht=0;Ht<E;Ht++){for(var Vt=-1/0,et=-1/0,Wt=-1,Tt=0,gn=0;gn<E;gn++)qe[gn]=K[Ht*E+gn],(Tt=le[Ht*E+gn]+L[Ht*E+gn])>=Vt?(et=Vt,Vt=Tt,Wt=gn):Tt>et&&(et=Tt);for(var Kt=0;Kt<E;Kt++)K[Ht*E+Kt]=(1-_.damping)*(L[Ht*E+Kt]-Vt)+_.damping*qe[Kt];K[Ht*E+Wt]=(1-_.damping)*(L[Ht*E+Wt]-et)+_.damping*qe[Wt]}for(var ln=0;ln<E;ln++){for(var Sn=0,Rn=0;Rn<E;Rn++)qe[Rn]=le[Rn*E+ln],dt[Rn]=Math.max(0,K[Rn*E+ln]),Sn+=dt[Rn];Sn-=dt[ln],dt[ln]=K[ln*E+ln],Sn+=dt[ln];for(var Jn=0;Jn<E;Jn++)le[Jn*E+ln]=(1-_.damping)*Math.min(0,Sn-dt[Jn])+_.damping*qe[Jn];le[ln*E+ln]=(1-_.damping)*(Sn-dt[ln])+_.damping*qe[ln]}for(var En=0,Yn=0;Yn<E;Yn++){var li=le[Yn*E+Yn]+K[Yn*E+Yn]>0?1:0;mt[bt%_.minIterations*E+Yn]=li,En+=li}if(En>0&&(bt>=_.minIterations-1||bt==_.maxIterations-1)){for(var Ci=0,pi=0;pi<E;pi++){Lt[pi]=0;for(var hi=0;hi<_.minIterations;hi++)Lt[pi]+=mt[hi*E+pi];(0===Lt[pi]||Lt[pi]===_.minIterations)&&Ci++}if(Ci===E)break}}for(var Mn=function(c,d,m){for(var _=[],b=0;b<c;b++)d[b*c+b]+m[b*c+b]>0&&_.push(b);return _}(E,K,le),ri=function(c,d,m){for(var _=Em(c,d,m),b=0;b<m.length;b++){for(var w=[],E=0;E<_.length;E++)_[E]===m[b]&&w.push(E);for(var k=-1,L=-1/0,G=0;G<w.length;G++){for(var K=0,le=0;le<w.length;le++)K+=d[w[le]*c+w[G]];K>L&&(k=G,L=K)}m[b]=w[k]}return Em(c,d,m)}(E,L,Mn),xi={},ji=0;ji<Mn.length;ji++)xi[Mn[ji]]=[];for(var ir=0;ir<m.length;ir++){var Yr=ri[b[m[ir].id()]];null!=Yr&&xi[Yr].push(m[ir])}for(var pr=new Array(Mn.length),tr=0;tr<Mn.length;tr++)pr[tr]=d.collection(xi[Mn[tr]]);return pr},np={affinityPropagation:B_,ap:B_},Tm=ti({root:void 0,directed:!1}),ya={hierholzer:function(c){if(!Ct(c)){var d=arguments;c={root:d[0],directed:d[1]}}var k,L,G,m=Tm(c),_=m.root,b=m.directed,w=this,E=!1;_&&(G=He(_)?this.filter(_)[0].id():_[0].id());var K={},le={};w.forEach(b?function(Qe){var qe=Qe.id();if(Qe.isNode()){var dt=Qe.indegree(!0),Lt=Qe.outdegree(!0),kt=dt-Lt,mt=Lt-dt;1==kt?k?E=!0:k=qe:1==mt?L?E=!0:L=qe:(mt>1||kt>1)&&(E=!0),K[qe]=[],Qe.outgoers().forEach(function(Ft){Ft.isEdge()&&K[qe].push(Ft.id())})}else le[qe]=[void 0,Qe.target().id()]}:function(Qe){var qe=Qe.id();Qe.isNode()?(Qe.degree(!0)%2&&(k?L?E=!0:L=qe:k=qe),K[qe]=[],Qe.connectedEdges().forEach(function(Lt){return K[qe].push(Lt.id())})):le[qe]=[Qe.source().id(),Qe.target().id()]});var de={found:!1,trail:void 0};if(E)return de;if(L&&k)if(b){if(G&&L!=G)return de;G=L}else{if(G&&L!=G&&k!=G)return de;G||(G=L)}else G||(G=w[0].id());var pe=function(qe){for(var kt,mt,Ft,dt=qe,Lt=[qe];K[dt].length;)kt=K[dt].shift(),mt=le[kt][0],dt!=(Ft=le[kt][1])?(K[Ft]=K[Ft].filter(function(bt){return bt!=kt}),dt=Ft):!b&&dt!=mt&&(K[mt]=K[mt].filter(function(bt){return bt!=kt}),dt=mt),Lt.unshift(kt),Lt.unshift(dt);return Lt},Ie=[],Ne=[];for(Ne=pe(G);1!=Ne.length;)0==K[Ne[0]].length?(Ie.unshift(w.getElementById(Ne.shift())),Ie.unshift(w.getElementById(Ne.shift()))):Ne=pe(Ne.shift()).concat(Ne);for(var ze in Ie.unshift(w.getElementById(Ne.shift())),K)if(K[ze].length)return de;return de.found=!0,de.trail=this.spawn(Ie,!0),de}},yf=function(){var c=this,d={},m=0,_=0,b=[],w=[],E={},L=function K(le,de,pe){le===pe&&(_+=1),d[de]={id:m,low:m++,cutVertex:!1};var Ne,ze,Qe,qe,Ie=c.getElementById(de).connectedEdges().intersection(c);0===Ie.size()?b.push(c.spawn(c.getElementById(de))):Ie.forEach(function(dt){Ne=dt.source().id(),ze=dt.target().id(),(Qe=Ne===de?ze:Ne)!==pe&&(qe=dt.id(),E[qe]||(E[qe]=!0,w.push({x:de,y:Qe,edge:dt})),Qe in d?d[de].low=Math.min(d[de].low,d[Qe].id):(K(le,Qe,de),d[de].low=Math.min(d[de].low,d[Qe].low),d[de].id<=d[Qe].low&&(d[de].cutVertex=!0,function(le,de){for(var pe=w.length-1,Ie=[],Ne=c.spawn();w[pe].x!=le||w[pe].y!=de;)Ie.push(w.pop().edge),pe--;Ie.push(w.pop().edge),Ie.forEach(function(ze){var Qe=ze.connectedNodes().intersection(c);Ne.merge(ze),Qe.forEach(function(qe){var dt=qe.id(),Lt=qe.connectedEdges().intersection(c);Ne.merge(qe),Ne.merge(d[dt].cutVertex?Lt.filter(function(kt){return kt.isLoop()}):Lt)})}),b.push(Ne)}(de,Qe))))})};c.forEach(function(K){if(K.isNode()){var le=K.id();le in d||(_=0,L(le,le),d[le].cutVertex=_>1)}});var G=Object.keys(d).filter(function(K){return d[K].cutVertex}).map(function(K){return c.getElementById(K)});return{cut:c.spawn(G),components:b}},ip=function(){var c=this,d={},m=0,_=[],b=[],w=c.spawn(c),E=function k(L){if(b.push(L),d[L]={index:m,low:m++,explored:!1},c.getElementById(L).connectedEdges().intersection(c).forEach(function(Ie){var Ne=Ie.target().id();Ne!==L&&(Ne in d||k(Ne),d[Ne].explored||(d[L].low=Math.min(d[L].low,d[Ne].low)))}),d[L].index===d[L].low){for(var K=c.spawn();;){var le=b.pop();if(K.merge(c.getElementById(le)),d[le].low=d[L].index,d[le].explored=!0,le===L)break}var de=K.edgesWith(K),pe=K.merge(de);_.push(pe),w=w.difference(pe)}};return c.forEach(function(k){if(k.isNode()){var L=k.id();L in d||E(L)}}),{cut:w,components:_}},Mm={};[hs,Mg,zp,Dg,wo,gv,Iy,$o,Ma,Yl,Ss,Ec,Bs,Og,np,ya,{hopcroftTarjanBiconnected:yf,htbc:yf,htb:yf,hopcroftTarjanBiconnectedComponents:yf},{tarjanStronglyConnected:ip,tsc:ip,tscc:ip,tarjanStronglyConnectedComponents:ip}].forEach(function(f){er(Mm,f)});var _a=function f(c){if(!(this instanceof f))return new f(c);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof c&&c.call(this,this.fulfill.bind(this),this.reject.bind(this))};_a.prototype={fulfill:function(c){return rp(this,1,"fulfillValue",c)},reject:function(c){return rp(this,2,"rejectReason",c)},then:function(c,d){var m=this,_=new _a;return m.onFulfilled.push(ky(c,_,"fulfill")),m.onRejected.push(ky(d,_,"reject")),Ry(m),_.proxy}};var rp=function(c,d,m,_){return 0===c.state&&(c.state=d,c[m]=_,Ry(c)),c},Ry=function(c){1===c.state?Dm(c,"onFulfilled",c.fulfillValue):2===c.state&&Dm(c,"onRejected",c.rejectReason)},Dm=function(c,d,m){if(0!==c[d].length){var _=c[d];c[d]=[];var b=function(){for(var E=0;E<_.length;E++)_[E](m)};"function"==typeof setImmediate?setImmediate(b):setTimeout(b,0)}},ky=function(c,d,m){return function(_){if("function"!=typeof c)d[m].call(d,_);else{var b;try{b=c(_)}catch(w){return void d.reject(w)}Sv(d,b)}}},Sv=function f(c,d){if(c!==d&&c.proxy!==d){var m;if("object"===se(d)&&null!==d||"function"==typeof d)try{m=d.then}catch(b){return void c.reject(b)}if("function"!=typeof m)c.fulfill(d);else{var _=!1;try{m.call(d,function(b){_||(_=!0,b===d?c.reject(new TypeError("circular thenable chain")):f(c,b))},function(b){_||(_=!0,c.reject(b))})}catch(b){_||c.reject(b)}}}else c.reject(new TypeError("cannot resolve promise with itself"))};_a.all=function(f){return new _a(function(c,d){for(var m=new Array(f.length),_=0,b=function(k,L){m[k]=L,++_===f.length&&c(m)},w=0;w<f.length;w++)!function(E){var k=f[E];null!=k&&null!=k.then?k.then(function(K){b(E,K)},function(K){d(K)}):b(E,k)}(w)})},_a.resolve=function(f){return new _a(function(c,d){c(f)})},_a.reject=function(f){return new _a(function(c,d){d(f)})};var na=typeof Promise<"u"?Promise:_a,Bg=function(c,d,m){var _=bn(c),b=!_,w=this._private=er({duration:1e3},d,m);if(w.target=c,w.style=w.style||w.css,w.started=!1,w.playing=!1,w.hooked=!1,w.applying=!1,w.progress=0,w.completes=[],w.frames=[],w.complete&&ft(w.complete)&&w.completes.push(w.complete),b){var E=c.position();w.startPosition=w.startPosition||{x:E.x,y:E.y},w.startStyle=w.startStyle||c.cy().style().getAnimationStartStyle(c,w.style)}if(_){var k=c.pan();w.startPan={x:k.x,y:k.y},w.startZoom=c.zoom()}this.length=1,this[0]=this},Wp=Bg.prototype;er(Wp,{instanceString:function(){return"animation"},hook:function(){var c=this._private;if(!c.hooked){var m=c.target._private.animation;(c.queue?m.queue:m.current).push(this),nn(c.target)&&c.target.cy().addToAnimationPool(c.target),c.hooked=!0}return this},play:function(){var c=this._private;return 1===c.progress&&(c.progress=0),c.playing=!0,c.started=!1,c.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var c=this._private;return c.applying=!0,c.started=!1,c.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var c=this._private;return c.playing=!1,c.started=!1,this},stop:function(){var c=this._private;return c.playing=!1,c.started=!1,c.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(c){var d=this._private;return void 0===c?d.progress*d.duration:this.progress(c/d.duration)},progress:function(c){var d=this._private,m=d.playing;return void 0===c?d.progress:(m&&this.pause(),d.progress=c,d.started=!1,m&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var c=this._private,d=c.playing;d&&this.pause(),c.progress=1-c.progress,c.started=!1;var m=function(L,G){var K=c[L];null!=K&&(c[L]=c[G],c[G]=K)};if(m("zoom","startZoom"),m("pan","startPan"),m("position","startPosition"),c.style)for(var _=0;_<c.style.length;_++){var b=c.style[_],w=b.name,E=c.startStyle[w];c.startStyle[w]=b,c.style[_]=E}return d&&this.play(),this},promise:function(c){var m,d=this._private;return m="frame"===c?d.frames:d.completes,new na(function(_,b){m.push(function(){_()})})}}),Wp.complete=Wp.completed,Wp.run=Wp.play,Wp.running=Wp.playing;var ch={data:function(c){return c=er({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(_){},beforeSet:function(_,b){},onSet:function(_){},canSet:function(_){return!0}},c),function(_,b){var w=c,E=this,k=void 0!==E.length,L=k?E:[E],G=k?E[0]:E;if(He(_)){var de,le=-1!==_.indexOf(".")&&oe.default(_);if(w.allowGetting&&void 0===b)return G&&(w.beforeGet(G),de=le&&void 0===G._private[w.field][_]?te.default(G._private[w.field],le):G._private[w.field][_]),de;if(w.allowSetting&&void 0!==b&&!w.immutableKeys[_]){var Ie=xe({},_,b);w.beforeSet(E,Ie);for(var Ne=0,ze=L.length;Ne<ze;Ne++){var Qe=L[Ne];w.canSet(Qe)&&(le&&void 0===G._private[w.field][_]?J.default(Qe._private[w.field],le,b):Qe._private[w.field][_]=b)}w.updateStyle&&E.updateStyle(),w.onSet(E),w.settingTriggersEvent&&E[w.triggerFnName](w.settingEvent)}}else if(w.allowSetting&&Ct(_)){var dt,Lt,qe=_,kt=Object.keys(qe);w.beforeSet(E,qe);for(var mt=0;mt<kt.length;mt++)if(Lt=qe[dt=kt[mt]],!w.immutableKeys[dt])for(var bt=0;bt<L.length;bt++){var Ht=L[bt];w.canSet(Ht)&&(Ht._private[w.field][dt]=Lt)}w.updateStyle&&E.updateStyle(),w.onSet(E),w.settingTriggersEvent&&E[w.triggerFnName](w.settingEvent)}else if(w.allowBinding&&ft(_))E.on(w.bindingEvent,_);else if(w.allowGetting&&void 0===_){var et;return G&&(w.beforeGet(G),et=G._private[w.field]),et}return E}},removeData:function(c){return c=er({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},c),function(_){var b=c,w=this,k=void 0!==w.length?w:[w];if(He(_)){for(var L=_.split(/\s+/),G=L.length,K=0;K<G;K++){var le=L[K];if(!Ce(le)&&!b.immutableKeys[le])for(var pe=0,Ie=k.length;pe<Ie;pe++)k[pe]._private[b.field][le]=void 0}b.triggerEvent&&w[b.triggerFnName](b.event)}else if(void 0===_){for(var Ne=0,ze=k.length;Ne<ze;Ne++)for(var Qe=k[Ne]._private[b.field],qe=Object.keys(Qe),dt=0;dt<qe.length;dt++){var Lt=qe[dt];!b.immutableKeys[Lt]&&(Qe[Lt]=void 0)}b.triggerEvent&&w[b.triggerFnName](b.event)}return w}}},z_={eventAliasesOn:function(c){var d=c;d.addListener=d.listen=d.bind=d.on,d.unlisten=d.unbind=d.off=d.removeListener,d.trigger=d.emit,d.pon=d.promiseOn=function(m,_){var b=this,w=Array.prototype.slice.call(arguments,0);return new na(function(E,k){var G=w.concat([function(de){b.off.apply(b,K),E(de)}]),K=G.concat([]);b.on.apply(b,G)})}}},vs={};[{animated:function(){return function(){var d=this,_=void 0!==d.length?d:[d];if(!(this._private.cy||this).styleEnabled())return!1;var w=_[0];return w?w._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var d=this,_=void 0!==d.length?d:[d];if(!(this._private.cy||this).styleEnabled())return this;for(var w=0;w<_.length;w++)_[w]._private.animation.queue=[];return this}},delay:function(){return function(d,m){return(this._private.cy||this).styleEnabled()?this.animate({delay:d,duration:d,complete:m}):this}},delayAnimation:function(){return function(d,m){return(this._private.cy||this).styleEnabled()?this.animation({delay:d,duration:d,complete:m}):this}},animation:function(){return function(d,m){var _=this,b=void 0!==_.length,w=b?_:[_],E=this._private.cy||this,k=!b,L=!k;if(!E.styleEnabled())return this;var G=E.style();if(d=er({},d,m),0===Object.keys(d).length)return new Bg(w[0],d);switch(void 0===d.duration&&(d.duration=400),d.duration){case"slow":d.duration=600;break;case"fast":d.duration=200}if(L&&(d.style=G.getPropsList(d.style||d.css),d.css=void 0),L&&null!=d.renderedPosition){var le=d.renderedPosition,de=E.pan(),pe=E.zoom();d.position=Ac(le,pe,de)}if(k&&null!=d.panBy){var Ie=d.panBy,Ne=E.pan();d.pan={x:Ne.x+Ie.x,y:Ne.y+Ie.y}}var ze=d.center||d.centre;if(k&&null!=ze){var Qe=E.getCenterPan(ze.eles,d.zoom);null!=Qe&&(d.pan=Qe)}if(k&&null!=d.fit){var qe=d.fit,dt=E.getFitViewport(qe.eles||qe.boundingBox,qe.padding);null!=dt&&(d.pan=dt.pan,d.zoom=dt.zoom)}if(k&&Ct(d.zoom)){var Lt=E.getZoomedViewport(d.zoom);null!=Lt?(Lt.zoomed&&(d.zoom=Lt.zoom),Lt.panned&&(d.pan=Lt.pan)):d.zoom=null}return new Bg(w[0],d)}},animate:function(){return function(d,m){var _=this,w=void 0!==_.length?_:[_];if(!(this._private.cy||this).styleEnabled())return this;m&&(d=er({},d,m));for(var k=0;k<w.length;k++){var L=w[k],G=L.animated()&&(void 0===d.queue||d.queue);L.animation(d,G?{queue:!0}:void 0).play()}return this}},stop:function(){return function(d,m){var _=this,w=void 0!==_.length?_:[_],E=this._private.cy||this;if(!E.styleEnabled())return this;for(var k=0;k<w.length;k++){for(var G=w[k]._private,K=G.animation.current,le=0;le<K.length;le++)m&&(K[le]._private.duration=0);d&&(G.animation.queue=[]),m||(G.animation.current=[])}return E.notify("draw"),this}}},ch,z_].forEach(function(f){er(vs,f)});var pl={animate:vs.animate(),animation:vs.animation(),animated:vs.animated(),clearQueue:vs.clearQueue(),delay:vs.delay(),delayAnimation:vs.delayAnimation(),stop:vs.stop()},Tc={classes:function(c){var d=this;if(void 0===c){var m=[];return d[0]._private.classes.forEach(function(pe){return m.push(pe)}),m}gt(c)||(c=(c||"").match(/\S+/g)||[]);for(var _=[],b=new us(c),w=0;w<d.length;w++){for(var E=d[w],k=E._private,L=k.classes,G=!1,K=0;K<c.length;K++)if(!L.has(c[K])){G=!0;break}G||(G=L.size!==c.length),G&&(k.classes=b,_.push(E))}return _.length>0&&this.spawn(_).updateStyle().emit("class"),d},addClass:function(c){return this.toggleClass(c,!0)},hasClass:function(c){var d=this[0];return null!=d&&d._private.classes.has(c)},toggleClass:function(c,d){gt(c)||(c=c.match(/\S+/g)||[]);for(var m=this,_=void 0===d,b=[],w=0,E=m.length;w<E;w++)for(var k=m[w],L=k._private.classes,G=!1,K=0;K<c.length;K++){var le=c[K],de=L.has(le),pe=!1;d||_&&!de?(L.add(le),pe=!0):(!d||_&&de)&&(L.delete(le),pe=!0),!G&&pe&&(b.push(k),G=!0)}return b.length>0&&this.spawn(b).updateStyle().emit("class"),m},removeClass:function(c){return this.toggleClass(c,!1)},flashClass:function(c,d){var m=this;if(null==d)d=250;else if(0===d)return m;return m.addClass(c),setTimeout(function(){m.removeClass(c)},d),m}};Tc.className=Tc.classNames=Tc.classes;var mo={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:Me,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};mo.variable="(?:[\\w-.]|(?:\\\\"+mo.metaChar+"))+",mo.className="(?:[\\w-]|(?:\\\\"+mo.metaChar+"))+",mo.value=mo.string+"|"+mo.number,mo.id=mo.variable,function(){var f,c,d;for(f=mo.comparatorOp.split("|"),d=0;d<f.length;d++)mo.comparatorOp+="|@"+(c=f[d]);for(f=mo.comparatorOp.split("|"),d=0;d<f.length;d++)!((c=f[d]).indexOf("!")>=0)&&"="!==c&&(mo.comparatorOp+="|\\!"+c)}();var $s=[{selector:":selected",matches:function(c){return c.selected()}},{selector:":unselected",matches:function(c){return!c.selected()}},{selector:":selectable",matches:function(c){return c.selectable()}},{selector:":unselectable",matches:function(c){return!c.selectable()}},{selector:":locked",matches:function(c){return c.locked()}},{selector:":unlocked",matches:function(c){return!c.locked()}},{selector:":visible",matches:function(c){return c.visible()}},{selector:":hidden",matches:function(c){return!c.visible()}},{selector:":transparent",matches:function(c){return c.transparent()}},{selector:":grabbed",matches:function(c){return c.grabbed()}},{selector:":free",matches:function(c){return!c.grabbed()}},{selector:":removed",matches:function(c){return c.removed()}},{selector:":inside",matches:function(c){return!c.removed()}},{selector:":grabbable",matches:function(c){return c.grabbable()}},{selector:":ungrabbable",matches:function(c){return!c.grabbable()}},{selector:":animated",matches:function(c){return c.animated()}},{selector:":unanimated",matches:function(c){return!c.animated()}},{selector:":parent",matches:function(c){return c.isParent()}},{selector:":childless",matches:function(c){return c.isChildless()}},{selector:":child",matches:function(c){return c.isChild()}},{selector:":orphan",matches:function(c){return c.isOrphan()}},{selector:":nonorphan",matches:function(c){return c.isChild()}},{selector:":compound",matches:function(c){return c.isNode()?c.isParent():c.source().isParent()||c.target().isParent()}},{selector:":loop",matches:function(c){return c.isLoop()}},{selector:":simple",matches:function(c){return c.isSimple()}},{selector:":active",matches:function(c){return c.active()}},{selector:":inactive",matches:function(c){return!c.active()}},{selector:":backgrounding",matches:function(c){return c.backgrounding()}},{selector:":nonbackgrounding",matches:function(c){return!c.backgrounding()}}].sort(function(f,c){return function(c,d){return-1*bs(c,d)}(f.selector,c.selector)}),jr=function(){for(var c,f={},d=0;d<$s.length;d++)f[(c=$s[d]).selector]=c.matches;return f}(),es="("+$s.map(function(f){return f.selector}).join("|")+")",as=function(c){return c.replace(new RegExp("\\\\("+mo.metaChar+")","g"),function(d,m){return m})},Mc=function(c,d,m){c[c.length-1]=m},sd=[{name:"group",query:!0,regex:"("+mo.group+")",populate:function(c,d,m){var b=Oe(m,1)[0];d.checks.push({type:0,value:"*"===b?b:b+"s"})}},{name:"state",query:!0,regex:es,populate:function(c,d,m){var _=Oe(m,1);d.checks.push({type:7,value:_[0]})}},{name:"id",query:!0,regex:"\\#("+mo.id+")",populate:function(c,d,m){var _=Oe(m,1);d.checks.push({type:8,value:as(_[0])})}},{name:"className",query:!0,regex:"\\.("+mo.className+")",populate:function(c,d,m){var _=Oe(m,1);d.checks.push({type:9,value:as(_[0])})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+mo.variable+")\\s*\\]",populate:function(c,d,m){var _=Oe(m,1);d.checks.push({type:4,field:as(_[0])})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+mo.variable+")\\s*("+mo.comparatorOp+")\\s*("+mo.value+")\\s*\\]",populate:function(c,d,m){var _=Oe(m,3),b=_[0],w=_[1],E=_[2];E=null!=new RegExp("^"+mo.string+"$").exec(E)?E.substring(1,E.length-1):parseFloat(E),d.checks.push({type:3,field:as(b),operator:w,value:E})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+mo.boolOp+")\\s*("+mo.variable+")\\s*\\]",populate:function(c,d,m){var _=Oe(m,2),b=_[0];d.checks.push({type:5,field:as(_[1]),operator:b})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+mo.meta+")\\s*("+mo.comparatorOp+")\\s*("+mo.number+")\\s*\\]\\]",populate:function(c,d,m){var _=Oe(m,3),w=_[1],E=_[2];d.checks.push({type:6,field:as(_[0]),operator:w,value:parseFloat(E)})}},{name:"nextQuery",separator:!0,regex:mo.separator,populate:function(c,d){var m=c.currentSubject,_=c.edgeCount,b=c.compoundCount,w=c[c.length-1];return null!=m&&(w.subject=m,c.currentSubject=null),w.edgeCount=_,w.compoundCount=b,c.edgeCount=0,c.compoundCount=0,c[c.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:mo.directedEdge,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},b={checks:[]};return m.checks.push({type:11,source:d,target:b}),Mc(c,0,m),c.edgeCount++,b}var w={checks:[]},k={checks:[]};return w.checks.push({type:12,source:d,target:k}),Mc(c,0,w),c.edgeCount++,k}},{name:"undirectedEdge",separator:!0,regex:mo.undirectedEdge,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},b={checks:[]};return m.checks.push({type:10,nodes:[d,b]}),Mc(c,0,m),c.edgeCount++,b}var w={checks:[]},k={checks:[]};return w.checks.push({type:14,node:d,neighbor:k}),Mc(c,0,w),k}},{name:"child",separator:!0,regex:mo.child,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:15,parent:c[c.length-1],child:_}),Mc(c,0,m),c.compoundCount++,_}if(c.currentSubject===d){var w={checks:[]},k={checks:[]},L={checks:[]},G={checks:[]},K={checks:[]};return w.checks.push({type:19,left:c[c.length-1],right:k,subject:L}),L.checks=d.checks,d.checks=[{type:20}],K.checks.push({type:20}),k.checks.push({type:17,parent:K,child:G}),Mc(c,0,w),c.currentSubject=L,c.compoundCount++,G}var le={checks:[]},de={checks:[]},pe=[{type:17,parent:le,child:de}];return le.checks=d.checks,d.checks=pe,c.compoundCount++,de}},{name:"descendant",separator:!0,regex:mo.descendant,populate:function(c,d){if(null==c.currentSubject){var m={checks:[]},_={checks:[]};return m.checks.push({type:16,ancestor:c[c.length-1],descendant:_}),Mc(c,0,m),c.compoundCount++,_}if(c.currentSubject===d){var w={checks:[]},k={checks:[]},L={checks:[]},G={checks:[]},K={checks:[]};return w.checks.push({type:19,left:c[c.length-1],right:k,subject:L}),L.checks=d.checks,d.checks=[{type:20}],K.checks.push({type:20}),k.checks.push({type:18,ancestor:K,descendant:G}),Mc(c,0,w),c.currentSubject=L,c.compoundCount++,G}var le={checks:[]},de={checks:[]},pe=[{type:18,ancestor:le,descendant:de}];return le.checks=d.checks,d.checks=pe,c.compoundCount++,de}},{name:"subject",modifier:!0,regex:mo.subject,populate:function(c,d){if(null!=c.currentSubject&&c.currentSubject!==d)return he("Redefinition of subject in selector `"+c.toString()+"`"),!1;c.currentSubject=d;var _=c[c.length-1].checks[0],b=null==_?null:_.type;11===b?_.type=13:10===b&&(_.type=14,_.node=_.nodes[1],_.neighbor=_.nodes[0],_.nodes=null)}}];sd.forEach(function(f){return f.regexObj=new RegExp("^"+f.regex)});var jp=function(c){for(var d,m,_,b=0;b<sd.length;b++){var w=sd[b],E=w.name,k=c.match(w.regexObj);if(null!=k){m=k,d=w,_=E,c=c.substring(k[0].length);break}}return{expr:d,match:m,name:_,remaining:c}},Zc={parse:function(c){var d=this,m=d.inputText=c,_=d[0]={checks:[]};for(d.length=1,m=function(c){var d=c.match(/^\s+/);return d&&(c=c.substring(d[0].length)),c}(m);;){var b=jp(m);if(null==b.expr)return he("The selector `"+c+"`is invalid"),!1;var w=b.match.slice(1),E=b.expr.populate(d,_,w);if(!1===E)return!1;if(null!=E&&(_=E),(m=b.remaining).match(/^\s*$/))break}var k=d[d.length-1];null!=d.currentSubject&&(k.subject=d.currentSubject),k.edgeCount=d.edgeCount,k.compoundCount=d.compoundCount;for(var L=0;L<d.length;L++){var G=d[L];if(G.compoundCount>0&&G.edgeCount>0)return he("The selector `"+c+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(G.edgeCount>1)return he("The selector `"+c+"` is invalid because it uses multiple edge selectors"),!1;1===G.edgeCount&&he("The selector `"+c+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var c=function(G){return G??""},d=function(G){return He(G)?'"'+G+'"':c(G)},m=function(G){return" "+G+" "},b=function(G,K){return G.checks.reduce(function(le,de,pe){return le+(K===G&&0===pe?"$":"")+function(G,K){var de=G.value;switch(G.type){case 0:var pe=c(de);return pe.substring(0,pe.length-1);case 3:return"["+G.field+m(c(G.operator))+d(de)+"]";case 5:var Qe=G.field;return"["+c(G.operator)+Qe+"]";case 4:return"["+G.field+"]";case 6:return"[["+G.field+m(c(G.operator))+d(de)+"]]";case 7:return de;case 8:return"#"+de;case 9:return"."+de;case 17:case 15:return b(G.parent,K)+m(">")+b(G.child,K);case 18:case 16:return b(G.ancestor,K)+" "+b(G.descendant,K);case 19:var kt=b(G.left,K),mt=b(G.subject,K),Ft=b(G.right,K);return kt+(kt.length>0?" ":"")+mt+Ft;case 20:return""}}(de,K)},"")},w="",E=0;E<this.length;E++){var k=this[E];w+=b(k,k.subject),this.length>1&&E<this.length-1&&(w+=", ")}return this.toStringCache=w,w}},mi=function(c,d,m){var _,k,L,b=He(c),w=Ut(c),E=He(m),G=!1,K=!1,le=!1;switch(d.indexOf("!")>=0&&(d=d.replace("!",""),K=!0),d.indexOf("@")>=0&&(d=d.replace("@",""),G=!0),(b||E||G)&&(k=b||w?""+c:"",L=""+m),G&&(c=k=k.toLowerCase(),m=L=L.toLowerCase()),d){case"*=":_=k.indexOf(L)>=0;break;case"$=":_=k.indexOf(L,k.length-L.length)>=0;break;case"^=":_=0===k.indexOf(L);break;case"=":_=c===m;break;case">":le=!0,_=c>m;break;case">=":le=!0,_=c>=m;break;case"<":le=!0,_=c<m;break;case"<=":le=!0,_=c<=m;break;default:_=!1}return K&&(null!=c||!le)&&(_=!_),_},It=function(c,d){return c.data(d)},Lo=[],Ao=function(c,d){return c.checks.every(function(m){return Lo[m.type](m,d)})};Lo[0]=function(f,c){var d=f.value;return"*"===d||d===c.group()},Lo[7]=function(f,c){return function(c,d){return jr[c](d)}(f.value,c)},Lo[8]=function(f,c){var d=f.value;return c.id()===d},Lo[9]=function(f,c){return c.hasClass(f.value)},Lo[6]=function(f,c){var m=f.operator,_=f.value;return mi(function(c,d){return c[d]()}(c,f.field),m,_)},Lo[3]=function(f,c){var m=f.operator,_=f.value;return mi(It(c,f.field),m,_)},Lo[5]=function(f,c){var m=f.operator;return function(c,d){switch(d){case"?":return!!c;case"!":return!c;case"^":return void 0===c}}(It(c,f.field),m)},Lo[4]=function(f,c){return function(c){return void 0!==c}(It(c,f.field))},Lo[10]=function(f,c){var d=f.nodes[0],m=f.nodes[1],_=c.source(),b=c.target();return Ao(d,_)&&Ao(m,b)||Ao(m,_)&&Ao(d,b)},Lo[14]=function(f,c){return Ao(f.node,c)&&c.neighborhood().some(function(d){return d.isNode()&&Ao(f.neighbor,d)})},Lo[11]=function(f,c){return Ao(f.source,c.source())&&Ao(f.target,c.target())},Lo[12]=function(f,c){return Ao(f.source,c)&&c.outgoers().some(function(d){return d.isNode()&&Ao(f.target,d)})},Lo[13]=function(f,c){return Ao(f.target,c)&&c.incomers().some(function(d){return d.isNode()&&Ao(f.source,d)})},Lo[15]=function(f,c){return Ao(f.child,c)&&Ao(f.parent,c.parent())},Lo[17]=function(f,c){return Ao(f.parent,c)&&c.children().some(function(d){return Ao(f.child,d)})},Lo[16]=function(f,c){return Ao(f.descendant,c)&&c.ancestors().some(function(d){return Ao(f.ancestor,d)})},Lo[18]=function(f,c){return Ao(f.ancestor,c)&&c.descendants().some(function(d){return Ao(f.descendant,d)})},Lo[19]=function(f,c){return Ao(f.subject,c)&&Ao(f.left,c)&&Ao(f.right,c)},Lo[20]=function(){return!0},Lo[1]=function(f,c){return f.value.has(c)},Lo[2]=function(f,c){return(0,f.value)(c)};var $p={matches:function(c){for(var m=0;m<this.length;m++)if(Ao(this[m],c))return!0;return!1},filter:function(c){var d=this;if(1===d.length&&1===d[0].checks.length&&8===d[0].checks[0].type)return c.getElementById(d[0].checks[0].value).collection();var m=function(b){for(var w=0;w<d.length;w++)if(Ao(d[w],b))return!0;return!1};return null==d.text()&&(m=function(){return!0}),c.filter(m)}},sp=function(c){this.inputText=c,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==c||He(c)&&c.match(/^\s*$/)||(nn(c)?this.addQuery({checks:[{type:1,value:c.collection()}]}):ft(c)?this.addQuery({checks:[{type:2,value:c}]}):He(c)?this.parse(c)||(this.invalid=!0):it("A selector must be created from a string; found "))},_r=sp.prototype;[Zc,$p].forEach(function(f){return er(_r,f)}),_r.text=function(){return this.inputText},_r.size=function(){return this.length},_r.eq=function(f){return this[f]},_r.sameText=function(f){return!this.invalid&&!f.invalid&&this.text()===f.text()},_r.addQuery=function(f){this[this.length++]=f},_r.selector=_r.toString;var Fl={allAre:function(c){var d=new sp(c);return this.every(function(m){return d.matches(m)})},is:function(c){var d=new sp(c);return this.some(function(m){return d.matches(m)})},some:function(c,d){for(var m=0;m<this.length;m++)if(d?c.apply(d,[this[m],m,this]):c(this[m],m,this))return!0;return!1},every:function(c,d){for(var m=0;m<this.length;m++)if(!(d?c.apply(d,[this[m],m,this]):c(this[m],m,this)))return!1;return!0},same:function(c){if(this===c)return!0;c=this.cy().collection(c);var d=this.length;return d===c.length&&(1===d?this[0]===c[0]:this.every(function(_){return c.hasElementWithId(_.id())}))},anySame:function(c){return c=this.cy().collection(c),this.some(function(d){return c.hasElementWithId(d.id())})},allAreNeighbors:function(c){c=this.cy().collection(c);var d=this.neighborhood();return c.every(function(m){return d.hasElementWithId(m.id())})},contains:function(c){c=this.cy().collection(c);var d=this;return c.every(function(m){return d.hasElementWithId(m.id())})}};Fl.allAreNeighbours=Fl.allAreNeighbors,Fl.has=Fl.contains,Fl.equal=Fl.equals=Fl.same;var Fd,op,Ca=function(c,d){return function(_,b,w,E){var G,k=_,L=this;if(null==k?G="":nn(k)&&1===k.length&&(G=k.id()),1===L.length&&G){var K=L[0]._private,le=K.traversalCache=K.traversalCache||{},de=le[d]=le[d]||[],pe=xc(G);return de[pe]||(de[pe]=c.call(L,_,b,w,E))}return c.call(L,_,b,w,E)}},Po={parent:function(c){var d=[];if(1===this.length){var m=this[0]._private.parent;if(m)return m}for(var _=0;_<this.length;_++){var w=this[_]._private.parent;w&&d.push(w)}return this.spawn(d,!0).filter(c)},parents:function(c){for(var d=[],m=this.parent();m.nonempty();){for(var _=0;_<m.length;_++)d.push(m[_]);m=m.parent()}return this.spawn(d,!0).filter(c)},commonAncestors:function(c){for(var d,m=0;m<this.length;m++){var b=this[m].parents();d=(d=d||b).intersect(b)}return d.filter(c)},orphans:function(c){return this.stdFilter(function(d){return d.isOrphan()}).filter(c)},nonorphans:function(c){return this.stdFilter(function(d){return d.isChild()}).filter(c)},children:Ca(function(f){for(var c=[],d=0;d<this.length;d++)for(var _=this[d]._private.children,b=0;b<_.length;b++)c.push(_[b]);return this.spawn(c,!0).filter(f)},"children"),siblings:function(c){return this.parent().children().not(this).filter(c)},isParent:function(){var c=this[0];if(c)return c.isNode()&&0!==c._private.children.length},isChildless:function(){var c=this[0];if(c)return c.isNode()&&0===c._private.children.length},isChild:function(){var c=this[0];if(c)return c.isNode()&&null!=c._private.parent},isOrphan:function(){var c=this[0];if(c)return c.isNode()&&null==c._private.parent},descendants:function(c){var d=[];return function m(_){for(var b=0;b<_.length;b++){var w=_[b];d.push(w),w.children().nonempty()&&m(w.children())}}(this.children()),this.spawn(d,!0).filter(c)}};function Ba(f,c,d,m){for(var _=[],b=new us,E=f.cy().hasCompoundNodes(),k=0;k<f.length;k++){var L=f[k];d?_.push(L):E&&m(_,b,L)}for(;_.length>0;){var G=_.shift();c(G),b.add(G.id()),E&&m(_,b,G)}return f}function fr(f,c,d){if(d.isParent())for(var m=d._private.children,_=0;_<m.length;_++){var b=m[_];c.has(b.id())||f.push(b)}}function Rh(f,c,d){if(d.isChild()){var m=d._private.parent;c.has(m.id())||f.push(m)}}function gl(f,c,d){Rh(f,c,d),fr(f,c,d)}Po.forEachDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ba(this,f,c,fr)},Po.forEachUp=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ba(this,f,c,Rh)},Po.forEachUpAndDown=function(f){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Ba(this,f,c,gl)},Po.ancestors=Po.parents,Fd=op={data:vs.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:vs.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:vs.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:vs.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:vs.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:vs.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var c=this[0];if(c)return c._private.data.id}},Fd.attr=Fd.data,Fd.removeAttr=Fd.removeData;var Nd=op,_f={};function Ou(f){return function(c){var d=this;if(void 0===c&&(c=!0),0===d.length);else if(d.isNode()&&!d.removed()){for(var m=0,_=d[0],b=_._private.edges,w=0;w<b.length;w++){var E=b[w];!c&&E.isLoop()||(m+=f(_,E))}return m}}}function rs(f,c){return function(d){for(var m,_=this.nodes(),b=0;b<_.length;b++){var E=_[b][f](d);void 0!==E&&(void 0===m||c(E,m))&&(m=E)}return m}}er(_f,{degree:Ou(function(f,c){return c.source().same(c.target())?2:1}),indegree:Ou(function(f,c){return c.target().same(f)?1:0}),outdegree:Ou(function(f,c){return c.source().same(f)?1:0})}),er(_f,{minDegree:rs("degree",function(f,c){return f<c}),maxDegree:rs("degree",function(f,c){return f>c}),minIndegree:rs("indegree",function(f,c){return f<c}),maxIndegree:rs("indegree",function(f,c){return f>c}),minOutdegree:rs("outdegree",function(f,c){return f<c}),maxOutdegree:rs("outdegree",function(f,c){return f>c})}),er(_f,{totalDegree:function(c){for(var d=0,m=this.nodes(),_=0;_<m.length;_++)d+=m[_].degree(c);return d}});var Dc,Ug,Ts=function(c,d,m){for(var _=0;_<c.length;_++){var b=c[_];if(!b.locked()){var w=b._private.position,E={x:null!=d.x?d.x-w.x:0,y:null!=d.y?d.y-w.y:0};b.isParent()&&!(0===E.x&&0===E.y)&&b.children().shift(E,m),b.dirtyBoundingBoxCache()}}},Ev={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(c){c.updateCompoundBounds()},beforeSet:function(c,d){Ts(c,d,!1)},onSet:function(c){c.dirtyCompoundBoundsCache()},canSet:function(c){return!c.locked()}};Dc=Ug={position:vs.data(Ev),silentPosition:vs.data(er({},Ev,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(c,d){Ts(c,d,!0)},onSet:function(c){c.dirtyCompoundBoundsCache()}})),positions:function(c,d){if(Ct(c))d?this.silentPosition(c):this.position(c);else if(ft(c)){var m=c,_=this.cy();_.startBatch();for(var b=0;b<this.length;b++){var E,w=this[b];(E=m(w,b))&&(d?w.silentPosition(E):w.position(E))}_.endBatch()}return this},silentPositions:function(c){return this.positions(c,!0)},shift:function(c,d,m){var _;if(Ct(c)?(_={x:Ut(c.x)?c.x:0,y:Ut(c.y)?c.y:0},m=d):He(c)&&Ut(d)&&((_={x:0,y:0})[c]=d),null!=_){var b=this.cy();b.startBatch();for(var w=0;w<this.length;w++){var E=this[w];if(!(b.hasCompoundNodes()&&E.isChild()&&E.ancestors().anySame(this))){var k=E.position(),L={x:k.x+_.x,y:k.y+_.y};m?E.silentPosition(L):E.position(L)}}b.endBatch()}return this},silentShift:function(c,d){return Ct(c)?this.shift(c,!0):He(c)&&Ut(d)&&this.shift(c,d,!0),this},renderedPosition:function(c,d){var m=this[0],_=this.cy(),b=_.zoom(),w=_.pan(),E=Ct(c)?c:void 0,k=void 0!==E||void 0!==d&&He(c);if(m&&m.isNode()){if(!k){var K=m.position();return E=jo(K,b,w),void 0===c?E:E[c]}for(var L=0;L<this.length;L++){var G=this[L];void 0!==d?G.position(c,(d-w[c])/b):void 0!==E&&G.position(Ac(E,b,w))}}else if(!k)return;return this},relativePosition:function(c,d){var m=this[0],_=this.cy(),b=Ct(c)?c:void 0,w=void 0!==b||void 0!==d&&He(c),E=_.hasCompoundNodes();if(m&&m.isNode()){if(!w){var pe=m.position(),Ie=E?m.parent():null,Ne=Ie&&Ie.length>0;Ne&&(Ie=Ie[0]);var Qe=Ne?Ie.position():{x:0,y:0};return b={x:pe.x-Qe.x,y:pe.y-Qe.y},void 0===c?b:b[c]}for(var k=0;k<this.length;k++){var L=this[k],G=E?L.parent():null,K=G&&G.length>0;K&&(G=G[0]);var de=K?G.position():{x:0,y:0};void 0!==d?L.position(c,d+de[c]):void 0!==b&&L.position({x:b.x+de.x,y:b.y+de.y})}}else if(!w)return;return this}},Dc.modelPosition=Dc.point=Dc.position,Dc.modelPositions=Dc.points=Dc.positions,Dc.renderedPoint=Dc.renderedPosition,Dc.relativePoint=Dc.relativePosition;var Er,ba,Hg=Ug;Er=ba={},ba.renderedBoundingBox=function(f){var c=this.boundingBox(f),d=this.cy(),m=d.zoom(),_=d.pan(),b=c.x1*m+_.x,w=c.x2*m+_.x,E=c.y1*m+_.y,k=c.y2*m+_.y;return{x1:b,x2:w,y1:E,y2:k,w:w-b,h:k-E}},ba.dirtyCompoundBoundsCache=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();return c.styleEnabled()&&c.hasCompoundNodes()?(this.forEachUp(function(d){if(d.isParent()){var m=d._private;m.compoundBoundsClean=!1,m.bbCache=null,f||d.emitAndNotify("bounds")}}),this):this},ba.updateCompoundBounds=function(){var f=arguments.length>0&&void 0!==arguments[0]&&arguments[0],c=this.cy();if(!c.styleEnabled()||!c.hasCompoundNodes())return this;if(!f&&c.batching())return this;function d(w){if(w.isParent()){var E=w._private,k=w.children(),L="include"===w.pstyle("compound-sizing-wrt-labels").value,G={width:{val:w.pstyle("min-width").pfValue,left:w.pstyle("min-width-bias-left"),right:w.pstyle("min-width-bias-right")},height:{val:w.pstyle("min-height").pfValue,top:w.pstyle("min-height-bias-top"),bottom:w.pstyle("min-height-bias-bottom")}},K=k.boundingBox({includeLabels:L,includeOverlays:!1,useCache:!1}),le=E.position;(0===K.w||0===K.h)&&((K={w:w.pstyle("width").pfValue,h:w.pstyle("height").pfValue}).x1=le.x-K.w/2,K.x2=le.x+K.w/2,K.y1=le.y-K.h/2,K.y2=le.y+K.h/2);var Ie=G.width.left.value;"px"===G.width.left.units&&G.width.val>0&&(Ie=100*Ie/G.width.val);var Ne=G.width.right.value;"px"===G.width.right.units&&G.width.val>0&&(Ne=100*Ne/G.width.val);var ze=G.height.top.value;"px"===G.height.top.units&&G.height.val>0&&(ze=100*ze/G.height.val);var Qe=G.height.bottom.value;"px"===G.height.bottom.units&&G.height.val>0&&(Qe=100*Qe/G.height.val);var qe=de(G.width.val-K.w,Ie,Ne),dt=qe.biasDiff,Lt=qe.biasComplementDiff,kt=de(G.height.val-K.h,ze,Qe),mt=kt.biasDiff,Ft=kt.biasComplementDiff;E.autoPadding=function pe(bt,Ht,Vt,et){if("%"!==Vt.units)return"px"===Vt.units?Vt.pfValue:0;switch(et){case"width":return bt>0?Vt.pfValue*bt:0;case"height":return Ht>0?Vt.pfValue*Ht:0;case"average":return bt>0&&Ht>0?Vt.pfValue*(bt+Ht)/2:0;case"min":return bt>0&&Ht>0?bt>Ht?Vt.pfValue*Ht:Vt.pfValue*bt:0;case"max":return bt>0&&Ht>0?bt>Ht?Vt.pfValue*bt:Vt.pfValue*Ht:0;default:return 0}}(K.w,K.h,w.pstyle("padding"),w.pstyle("padding-relative-to").value),E.autoWidth=Math.max(K.w,G.width.val),le.x=(-dt+K.x1+K.x2+Lt)/2,E.autoHeight=Math.max(K.h,G.height.val),le.y=(-mt+K.y1+K.y2+Ft)/2}function de(bt,Ht,Vt){var et=0,Wt=0,Tt=Ht+Vt;return bt>0&&Tt>0&&(et=Ht/Tt*bt,Wt=Vt/Tt*bt),{biasDiff:et,biasComplementDiff:Wt}}}for(var m=0;m<this.length;m++){var _=this[m],b=_._private;(!b.compoundBoundsClean||f)&&(d(_),c.batching()||(b.compoundBoundsClean=!0))}return this};var Nl=function(c){return c===1/0||c===-1/0?0:c},ra=function(c,d,m,_,b){_-d==0||b-m==0||null==d||null==m||null==_||null==b||(c.x1=d<c.x1?d:c.x1,c.x2=_>c.x2?_:c.x2,c.y1=m<c.y1?m:c.y1,c.y2=b>c.y2?b:c.y2,c.w=c.x2-c.x1,c.h=c.y2-c.y1)},za=function(c,d){return null==d?c:ra(c,d.x1,d.y1,d.x2,d.y2)},wl=function(c,d,m){return sr(c,d,m)},Bd=function(c,d,m){if(!d.cy().headless()){var k,L,_=d._private,b=_.rstyle,w=b.arrowWidth/2;if("none"!==d.pstyle(m+"-arrow-shape").value){"source"===m?(k=b.srcX,L=b.srcY):"target"===m?(k=b.tgtX,L=b.tgtY):(k=b.midX,L=b.midY);var G=_.arrowBounds=_.arrowBounds||{},K=G[m]=G[m]||{};K.x1=k-w,K.y1=L-w,K.x2=k+w,K.y2=L+w,K.w=K.x2-K.x1,K.h=K.y2-K.y1,$f(K,1),ra(c,K.x1,K.y1,K.x2,K.y2)}}},uc=function(c,d,m){if(!d.cy().headless()){var _,b=d._private,w=b.rstyle;if(d.pstyle((_=m?m+"-":"")+"label").strValue){var Vt,et,Wt,Tt,k=d.pstyle("text-halign"),L=d.pstyle("text-valign"),G=wl(w,"labelWidth",m),K=wl(w,"labelHeight",m),le=wl(w,"labelX",m),de=wl(w,"labelY",m),pe=d.pstyle(_+"text-margin-x").pfValue,Ie=d.pstyle(_+"text-margin-y").pfValue,Ne=d.isEdge(),ze=d.pstyle(_+"text-rotation"),Qe=d.pstyle("text-outline-width").pfValue,dt=d.pstyle("text-border-width").pfValue/2,Lt=d.pstyle("text-background-padding").pfValue,mt=K,Ft=G,bt=Ft/2,Ht=mt/2;if(Ne)Vt=le-bt,et=le+bt,Wt=de-Ht,Tt=de+Ht;else{switch(k.value){case"left":Vt=le-Ft,et=le;break;case"center":Vt=le-bt,et=le+bt;break;case"right":Vt=le,et=le+Ft}switch(L.value){case"top":Wt=de-mt,Tt=de;break;case"center":Wt=de-Ht,Tt=de+Ht;break;case"bottom":Wt=de,Tt=de+mt}}Vt+=pe-Math.max(Qe,dt)-Lt-2,et+=pe+Math.max(Qe,dt)+Lt+2,Wt+=Ie-Math.max(Qe,dt)-Lt-2,Tt+=Ie+Math.max(Qe,dt)+Lt+2;var gn=m||"main",Kt=b.labelBounds,ln=Kt[gn]=Kt[gn]||{};ln.x1=Vt,ln.y1=Wt,ln.x2=et,ln.y2=Tt,ln.w=et-Vt,ln.h=Tt-Wt;var Sn=Ne&&"autorotate"===ze.strValue;if(Sn||null!=ze.pfValue&&0!==ze.pfValue){var Jn=Sn?wl(b.rstyle,"labelAngle",m):ze.pfValue,En=Math.cos(Jn),Yn=Math.sin(Jn),li=(Vt+et)/2,Ci=(Wt+Tt)/2;if(!Ne){switch(k.value){case"left":li=et;break;case"right":li=Vt}switch(L.value){case"top":Ci=Tt;break;case"bottom":Ci=Wt}}var pi=function(Yr,pr){return{x:(Yr-=li)*En-(pr-=Ci)*Yn+li,y:Yr*Yn+pr*En+Ci}},hi=pi(Vt,Wt),Mn=pi(Vt,Tt),ri=pi(et,Wt),xi=pi(et,Tt);Vt=Math.min(hi.x,Mn.x,ri.x,xi.x),et=Math.max(hi.x,Mn.x,ri.x,xi.x),Wt=Math.min(hi.y,Mn.y,ri.y,xi.y),Tt=Math.max(hi.y,Mn.y,ri.y,xi.y)}var ji=gn+"Rot",ir=Kt[ji]=Kt[ji]||{};ir.x1=Vt,ir.y1=Wt,ir.x2=et,ir.y2=Tt,ir.w=et-Vt,ir.h=Tt-Wt,ra(c,Vt,Wt,et,Tt),ra(b.labelBounds.all,Vt,Wt,et,Tt)}return c}},Va=function(c){var d=0,m=function(w){return(w?1:0)<<d++},_=0;return _+=m(c.incudeNodes),_+=m(c.includeEdges),_+=m(c.includeLabels),_+=m(c.includeMainLabels),_+=m(c.includeSourceLabels),(_+=m(c.includeTargetLabels))+m(c.includeOverlays)},Tv=function(c){if(c.isEdge()){var d=c.source().position(),m=c.target().position(),_=function(w){return Math.round(w)};return function(c,d){var m={value:0,done:!1},_=0,b=c.length;return hf({next:function(){return _<b?m.value=c[_++]:m.done=!0,m}},void 0)}([_(d.x),_(d.y),_(m.x),_(m.y)])}return 0},Mv=function(c,d){var _,m=c._private,b=c.isEdge(),E=(null==d?Wg:Va(d))===Wg,k=Tv(c),L=m.bbCachePosKey===k,G=d.useCache&&L,K=function(Ie){return null==Ie._private.bbCache||Ie._private.styleDirty};if(!G||K(c)||b&&K(c.source())||K(c.target())?(L||c.recalculateRenderedStyle(G),_=function(c,d){var G,K,le,de,pe,Ie,m=c._private.cy,_=m.styleEnabled(),b=m.headless(),w=Sc(),E=c._private,k=c.isNode(),L=c.isEdge(),Ne=E.rstyle,ze=k&&_?c.pstyle("bounds-expansion").pfValue:[0],Qe=function($r){return"none"!==$r.pstyle("display").value},qe=!_||Qe(c)&&(!L||Qe(c.source())&&Qe(c.target()));if(qe){var Lt=0;_&&d.includeOverlays&&0!==c.pstyle("overlay-opacity").value&&(Lt=c.pstyle("overlay-padding").value);var mt=0;_&&d.includeUnderlays&&0!==c.pstyle("underlay-opacity").value&&(mt=c.pstyle("underlay-padding").value);var Ft=Math.max(Lt,mt),Ht=0;if(_&&(Ht=c.pstyle("width").pfValue/2),k&&d.includeNodes){var Vt=c.position();pe=Vt.x,Ie=Vt.y;var Wt=c.outerWidth()/2,gn=c.outerHeight()/2;ra(w,G=pe-Wt,le=Ie-gn,K=pe+Wt,de=Ie+gn)}else if(L&&d.includeEdges)if(_&&!b){var Kt=c.pstyle("curve-style").strValue;if(G=Math.min(Ne.srcX,Ne.midX,Ne.tgtX),K=Math.max(Ne.srcX,Ne.midX,Ne.tgtX),le=Math.min(Ne.srcY,Ne.midY,Ne.tgtY),de=Math.max(Ne.srcY,Ne.midY,Ne.tgtY),ra(w,G-=Ht,le-=Ht,K+=Ht,de+=Ht),"haystack"===Kt){var ln=Ne.haystackPts;if(ln&&2===ln.length){if((G=ln[0].x)>(K=ln[1].x)){var Sn=G;G=K,K=Sn}if((le=ln[0].y)>(de=ln[1].y)){var Rn=le;le=de,de=Rn}ra(w,G-Ht,le-Ht,K+Ht,de+Ht)}}else if("bezier"===Kt||"unbundled-bezier"===Kt||"segments"===Kt||"taxi"===Kt){var Jn;switch(Kt){case"bezier":case"unbundled-bezier":Jn=Ne.bezierPts;break;case"segments":case"taxi":Jn=Ne.linePts}if(null!=Jn)for(var En=0;En<Jn.length;En++){var Yn=Jn[En];ra(w,G=Yn.x-Ht,le=Yn.y-Ht,K=Yn.x+Ht,de=Yn.y+Ht)}}}else{var Ci=c.source().position(),hi=c.target().position();if((G=Ci.x)>(K=hi.x)){var Mn=G;G=K,K=Mn}if((le=Ci.y)>(de=hi.y)){var ri=le;le=de,de=ri}ra(w,G-=Ht,le-=Ht,K+=Ht,de+=Ht)}if(_&&d.includeEdges&&L&&(Bd(w,c,"mid-source"),Bd(w,c,"mid-target"),Bd(w,c,"source"),Bd(w,c,"target")),_&&"yes"===c.pstyle("ghost").value){var ji=c.pstyle("ghost-offset-x").pfValue,ir=c.pstyle("ghost-offset-y").pfValue;ra(w,w.x1+ji,w.y1+ir,w.x2+ji,w.y2+ir)}var Nr=E.bodyBounds=E.bodyBounds||{};bm(Nr,w),Vp(Nr,ze),$f(Nr,1),_&&ra(w,(G=w.x1)-Ft,(le=w.y1)-Ft,(K=w.x2)+Ft,(de=w.y2)+Ft);var Yr=E.overlayBounds=E.overlayBounds||{};bm(Yr,w),Vp(Yr,ze),$f(Yr,1);var pr=E.labelBounds=E.labelBounds||{};null!=pr.all?function(c){c.x1=1/0,c.y1=1/0,c.x2=-1/0,c.y2=-1/0,c.w=0,c.h=0}(pr.all):pr.all=Sc(),_&&d.includeLabels&&(d.includeMainLabels&&uc(w,c,null),L&&(d.includeSourceLabels&&uc(w,c,"source"),d.includeTargetLabels&&uc(w,c,"target")))}return w.x1=Nl(w.x1),w.y1=Nl(w.y1),w.x2=Nl(w.x2),w.y2=Nl(w.y2),w.w=Nl(w.x2-w.x1),w.h=Nl(w.y2-w.y1),w.w>0&&w.h>0&&qe&&(Vp(w,ze),$f(w,1)),w}(c,Gg),m.bbCache=_,m.bbCachePosKey=k):_=m.bbCache,!E){var de=c.isNode();_=Sc(),(d.includeNodes&&de||d.includeEdges&&!de)&&za(_,d.includeOverlays?m.overlayBounds:m.bodyBounds),d.includeLabels&&(d.includeMainLabels&&(!b||d.includeSourceLabels&&d.includeTargetLabels)?za(_,m.labelBounds.all):(d.includeMainLabels&&za(_,m.labelBounds.mainRot),d.includeSourceLabels&&za(_,m.labelBounds.sourceRot),d.includeTargetLabels&&za(_,m.labelBounds.targetRot))),_.w=_.x2-_.x1,_.h=_.y2-_.y1}return _},Gg={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,useCache:!0},Wg=Va(Gg),bf=ti(Gg);ba.boundingBox=function(f){var c;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==f&&void 0!==f.useCache&&!0!==f.useCache){c=Sc();var d=bf(f=f||Gg),m=this;if(m.cy().styleEnabled())for(var w=0;w<m.length;w++){var E=m[w],k=E._private,L=Tv(E);E.recalculateRenderedStyle(d.useCache&&k.bbCachePosKey===L&&!k.styleDirty)}this.updateCompoundBounds(!f.useCache);for(var le=0;le<m.length;le++)za(c,Mv(m[le],d))}else f=void 0===f?Gg:bf(f),c=Mv(this[0],f);return c.x1=Nl(c.x1),c.y1=Nl(c.y1),c.x2=Nl(c.x2),c.y2=Nl(c.y2),c.w=Nl(c.x2-c.x1),c.h=Nl(c.y2-c.y1),c},ba.dirtyBoundingBoxCache=function(){for(var f=0;f<this.length;f++){var c=this[f]._private;c.bbCache=null,c.bbCachePosKey=null,c.bodyBounds=null,c.overlayBounds=null,c.labelBounds.all=null,c.labelBounds.source=null,c.labelBounds.target=null,c.labelBounds.main=null,c.labelBounds.sourceRot=null,c.labelBounds.targetRot=null,c.labelBounds.mainRot=null,c.arrowBounds.source=null,c.arrowBounds.target=null,c.arrowBounds["mid-source"]=null,c.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},ba.boundingBoxAt=function(f){var c=this.nodes(),d=this.cy(),m=d.hasCompoundNodes(),_=d.collection();if(m&&(_=c.filter(function(L){return L.isParent()}),c=c.not(_)),Ct(f)){var b=f;f=function(){return b}}d.startBatch(),c.forEach(function(G,K){return G._private.bbAtOldPos=f(G,K)}).silentPositions(f),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0));var k=function(c){return{x1:c.x1,x2:c.x2,w:c.w,y1:c.y1,y2:c.y2,h:c.h}}(this.boundingBox({useCache:!1}));return c.silentPositions(function(G){return G._private.bbAtOldPos}),m&&(_.dirtyCompoundBoundsCache(),_.dirtyBoundingBoxCache(),_.updateCompoundBounds(!0)),d.endBatch(),k},Er.boundingbox=Er.bb=Er.boundingBox,Er.renderedBoundingbox=Er.renderedBoundingBox;var xf,zd,Lm=ba;xf=zd={};var jg=function(c){c.uppercaseName=Te(c.name),c.autoName="auto"+c.uppercaseName,c.labelName="label"+c.uppercaseName,c.outerName="outer"+c.uppercaseName,c.uppercaseOuterName=Te(c.outerName),xf[c.name]=function(){var m=this[0],_=m._private;if(m){if(_.cy._private.styleEnabled){if(m.isParent())return m.updateCompoundBounds(),_[c.autoName]||0;var E=m.pstyle(c.name);return"label"===E.strValue?(m.recalculateRenderedStyle(),_.rstyle[c.labelName]||0):E.pfValue}return 1}},xf["outer"+c.uppercaseName]=function(){var m=this[0];if(m)return m._private.cy._private.styleEnabled?m[c.name]()+m.pstyle("border-width").pfValue+2*m.padding():1},xf["rendered"+c.uppercaseName]=function(){var m=this[0];if(m)return m[c.name]()*this.cy().zoom()},xf["rendered"+c.uppercaseOuterName]=function(){var m=this[0];if(m)return m[c.outerName]()*this.cy().zoom()}};jg({name:"width"}),jg({name:"height"}),zd.padding=function(){var f=this[0],c=f._private;return f.isParent()?(f.updateCompoundBounds(),void 0!==c.autoPadding?c.autoPadding:f.pstyle("padding").pfValue):f.pstyle("padding").pfValue},zd.paddedHeight=function(){var f=this[0];return f.height()+2*f.padding()},zd.paddedWidth=function(){var f=this[0];return f.width()+2*f.padding()};var kh=zd,Dv={controlPoints:{get:function(c){return c.renderer().getControlPoints(c)},mult:!0},segmentPoints:{get:function(c){return c.renderer().getSegmentPoints(c)},mult:!0},sourceEndpoint:{get:function(c){return c.renderer().getSourceEndpoint(c)}},targetEndpoint:{get:function(c){return c.renderer().getTargetEndpoint(c)}},midpoint:{get:function(c){return c.renderer().getEdgeMidpoint(c)}}},Lv=Object.keys(Dv).reduce(function(f,c){var d=Dv[c],m=function(c){return"rendered"+c[0].toUpperCase()+c.substr(1)}(c);return f[c]=function(){return function(c,d){if(c.isEdge())return d(c)}(this,d.get)},f[m]=d.mult?function(){return function(c,d){if(c.isEdge()){var m=c.cy(),_=m.pan(),b=m.zoom();return d(c).map(function(w){return jo(w,b,_)})}}(this,d.get)}:function(){return function(c,d){if(c.isEdge()){var m=c.cy();return jo(d(c),m.zoom(),m.pan())}}(this,d.get)},f},{}),lC=er({},Hg,Lm,kh,Lv),Xp=function(c,d){this.recycle(c,d)};function ol(){return!1}function Ud(){return!0}Xp.prototype={instanceString:function(){return"event"},recycle:function(c,d){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ol,null!=c&&c.preventDefault?(this.type=c.type,this.isDefaultPrevented=c.defaultPrevented?Ud:ol):null!=c&&c.type?d=c:this.type=c,null!=d&&(this.originalEvent=d.originalEvent,this.type=null!=d.type?d.type:this.type,this.cy=d.cy,this.target=d.target,this.position=d.position,this.renderedPosition=d.renderedPosition,this.namespace=d.namespace,this.layout=d.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var m=this.position,_=this.cy.zoom(),b=this.cy.pan();this.renderedPosition={x:m.x*_+b.x,y:m.y*_+b.y}}this.timeStamp=c&&c.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Ud;var c=this.originalEvent;!c||c.preventDefault&&c.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Ud;var c=this.originalEvent;!c||c.stopPropagation&&c.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Ud,this.stopPropagation()},isDefaultPrevented:ol,isPropagationStopped:ol,isImmediatePropagationStopped:ol};var Oh=/^([^.]+)(\.(?:[^.]+))?$/,Fh={qualifierCompare:function(c,d){return c===d},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(c){return c},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},uh=Object.keys(Fh),Fu={};function gu(){for(var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fu,c=arguments.length>1?arguments[1]:void 0,d=0;d<uh.length;d++){var m=uh[d];this[m]=f[m]||Fh[m]}this.context=c||this.context,this.listeners=[],this.emitting=0}var sa=gu.prototype,ad=function(c,d,m,_,b,w,E){ft(_)&&(b=_,_=null),E&&(w=null==w?E:er({},w,E));for(var k=gt(m)?m:m.split(/\s+/),L=0;L<k.length;L++){var G=k[L];if(!Ce(G)){var K=G.match(Oh);if(K&&!1===d(c,G,K[1],K[2]?K[2]:null,_,b,w))break}}},Pm=function(c,d){return c.addEventFields(c.context,d),new Xp(d.type,d)};sa.on=sa.addListener=function(f,c,d,m,_){return ad(this,function(b,w,E,k,L,G,K){ft(G)&&b.listeners.push({event:w,callback:G,type:E,namespace:k,qualifier:L,conf:K})},f,c,d,m,_),this},sa.one=function(f,c,d,m){return this.on(f,c,d,m,{one:!0})},sa.removeListener=sa.off=function(f,c,d,m){var _=this;0!==this.emitting&&(this.listeners=function(c){return c.slice()}(this.listeners));for(var b=this.listeners,w=function(L){var G=b[L];ad(_,function(K,le,de,pe,Ie,Ne){if((G.type===de||"*"===f)&&(!pe&&".*"!==G.namespace||G.namespace===pe)&&(!Ie||K.qualifierCompare(G.qualifier,Ie))&&(!Ne||G.callback===Ne))return b.splice(L,1),!1},f,c,d,m)},E=b.length-1;E>=0;E--)w(E);return this},sa.removeAllListeners=function(){return this.removeListener("*")},sa.emit=sa.trigger=function(f,c,d){var m=this.listeners,_=m.length;return this.emitting++,gt(c)||(c=[c]),function(c,d,m){if(function(c){return"event"===xt(c)}(m))d(c,m);else if(Ct(m))d(c,Pm(c,m));else for(var _=gt(m)?m:m.split(/\s+/),b=0;b<_.length;b++){var w=_[b];if(!Ce(w)){var E=w.match(Oh);E&&d(c,Pm(c,{type:E[1],namespace:E[2]?E[2]:null,target:c.context}))}}}(this,function(b,w){null!=d&&(_=(m=[{event:w.event,type:w.type,namespace:w.namespace,callback:d}]).length);for(var E=function(G){var K=m[G];if(K.type===w.type&&(!K.namespace||K.namespace===w.namespace||".*"===K.namespace)&&b.eventMatches(b.context,K,w)){var le=[w];null!=c&&function(c,d){for(var m=0;m<d.length;m++)c.push(d[m])}(le,c),b.beforeEmit(b.context,K,w),K.conf&&K.conf.one&&(b.listeners=b.listeners.filter(function(Ie){return Ie!==K}));var de=b.callbackContext(b.context,K,w),pe=K.callback.apply(de,le);b.afterEmit(b.context,K,w),!1===pe&&(w.stopPropagation(),w.preventDefault())}},k=0;k<_;k++)E(k);b.bubble(b.context)&&!w.isPropagationStopped()&&b.parent(b.context).emit(w,c)},f),this.emitting--,this};var al={qualifierCompare:function(c,d){return null==c||null==d?null==c&&null==d:c.sameText(d)},eventMatches:function(c,d,m){var _=d.qualifier;return null==_||c!==m.target&&Ln(m.target)&&_.matches(m.target)},addEventFields:function(c,d){d.cy=c.cy(),d.target=c},callbackContext:function(c,d,m){return null!=d.qualifier?m.target:c},beforeEmit:function(c,d){d.conf&&d.conf.once&&d.conf.onceCollection.removeListener(d.event,d.qualifier,d.callback)},bubble:function(){return!0},parent:function(c){return c.isChild()?c.parent():c.cy()}},mu=function(c){return He(c)?new sp(c):c},vo={createEmitter:function(){for(var c=0;c<this.length;c++){var d=this[c],m=d._private;m.emitter||(m.emitter=new gu(al,d))}return this},emitter:function(){return this._private.emitter},on:function(c,d,m){for(var _=mu(d),b=0;b<this.length;b++)this[b].emitter().on(c,_,m);return this},removeListener:function(c,d,m){for(var _=mu(d),b=0;b<this.length;b++)this[b].emitter().removeListener(c,_,m);return this},removeAllListeners:function(){for(var c=0;c<this.length;c++)this[c].emitter().removeAllListeners();return this},one:function(c,d,m){for(var _=mu(d),b=0;b<this.length;b++)this[b].emitter().one(c,_,m);return this},once:function(c,d,m){for(var _=mu(d),b=0;b<this.length;b++)this[b].emitter().on(c,_,m,{once:!0,onceCollection:this})},emit:function(c,d){for(var m=0;m<this.length;m++)this[m].emitter().emit(c,d);return this},emitAndNotify:function(c,d){if(0!==this.length)return this.cy().notify(c,this),this.emit(c,d),this}};vs.eventAliasesOn(vo);var Pc={nodes:function(c){return this.filter(function(d){return d.isNode()}).filter(c)},edges:function(c){return this.filter(function(d){return d.isEdge()}).filter(c)},byGroup:function(){for(var c=this.spawn(),d=this.spawn(),m=0;m<this.length;m++){var _=this[m];_.isNode()?c.push(_):d.push(_)}return{nodes:c,edges:d}},filter:function(c,d){if(void 0===c)return this;if(He(c)||nn(c))return new sp(c).filter(this);if(ft(c)){for(var m=this.spawn(),_=this,b=0;b<_.length;b++){var w=_[b];(d?c.apply(d,[w,b,_]):c(w,b,_))&&m.push(w)}return m}return this.spawn()},not:function(c){if(c){He(c)&&(c=this.filter(c));for(var d=this.spawn(),m=0;m<this.length;m++){var _=this[m];c.has(_)||d.push(_)}return d}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(c){if(He(c))return this.filter(c);for(var m=this.spawn(),w=this.length<c.length,E=w?this:c,k=w?c:this,L=0;L<E.length;L++){var G=E[L];k.has(G)&&m.push(G)}return m},xor:function(c){var d=this._private.cy;He(c)&&(c=d.$(c));var m=this.spawn(),b=c,w=function(k,L){for(var G=0;G<k.length;G++){var K=k[G];L.hasElementWithId(K._private.data.id)||m.push(K)}};return w(this,b),w(b,this),m},diff:function(c){var d=this._private.cy;He(c)&&(c=d.$(c));var m=this.spawn(),_=this.spawn(),b=this.spawn(),E=c,k=function(G,K,le){for(var de=0;de<G.length;de++){var pe=G[de];K.hasElementWithId(pe._private.data.id)?b.merge(pe):le.push(pe)}};return k(this,E,m),k(E,this,_),{left:m,right:_,both:b}},add:function(c){var d=this._private.cy;if(!c)return this;if(He(c)){var m=c;c=d.mutableElements().filter(m)}for(var _=this.spawnSelf(),b=0;b<c.length;b++){var w=c[b];!this.has(w)&&_.push(w)}return _},merge:function(c){var d=this._private,m=d.cy;if(!c)return this;if(c&&He(c)){var _=c;c=m.mutableElements().filter(_)}for(var b=d.map,w=0;w<c.length;w++){var E=c[w],k=E._private.data.id;if(!b.has(k)){var G=this.length++;this[G]=E,b.set(k,{ele:E,index:G})}}return this},unmergeAt:function(c){var m=this[c].id(),b=this._private.map;if(this[c]=void 0,b.delete(m),this.length>1&&c!==this.length-1){var E=this.length-1,k=this[E],L=k._private.data.id;this[E]=void 0,this[c]=k,b.set(L,{ele:k,index:c})}return this.length--,this},unmergeOne:function(c){var b=this._private.map.get((c=c[0])._private.data.id);return b?(this.unmergeAt(b.index),this):this},unmerge:function(c){var d=this._private.cy;if(!c)return this;if(c&&He(c)){var m=c;c=d.mutableElements().filter(m)}for(var _=0;_<c.length;_++)this.unmergeOne(c[_]);return this},unmergeBy:function(c){for(var d=this.length-1;d>=0;d--)c(this[d])&&this.unmergeAt(d);return this},map:function(c,d){for(var m=[],_=this,b=0;b<_.length;b++){var w=_[b],E=d?c.apply(d,[w,b,_]):c(w,b,_);m.push(E)}return m},reduce:function(c,d){for(var m=d,_=this,b=0;b<_.length;b++)m=c(m,_[b],b,_);return m},max:function(c,d){for(var _,m=-1/0,b=this,w=0;w<b.length;w++){var E=b[w],k=d?c.apply(d,[E,w,b]):c(E,w,b);k>m&&(m=k,_=E)}return{value:m,ele:_}},min:function(c,d){for(var _,m=1/0,b=this,w=0;w<b.length;w++){var E=b[w],k=d?c.apply(d,[E,w,b]):c(E,w,b);k<m&&(m=k,_=E)}return{value:m,ele:_}}},js=Pc;js.u=js["|"]=js["+"]=js.union=js.or=js.add,js["\\"]=js["!"]=js["-"]=js.difference=js.relativeComplement=js.subtract=js.not,js.n=js["&"]=js["."]=js.and=js.intersection=js.intersect,js["^"]=js["(+)"]=js["(-)"]=js.symmetricDifference=js.symdiff=js.xor,js.fnFilter=js.filterFn=js.stdFilter=js.filter,js.complement=js.abscomp=js.absoluteComplement;var c,lp=function(c,d){var _=c.cy().hasCompoundNodes();function b(G){var K=G.pstyle("z-compound-depth");return"auto"===K.value?_?G.zDepth():0:"bottom"===K.value?-1:"top"===K.value?wc:0}var w=b(c)-b(d);if(0!==w)return w;function E(G){return"auto"===G.pstyle("z-index-compare").value&&G.isNode()?1:0}var k=E(c)-E(d);if(0!==k)return k;var L=c.pstyle("z-index").value-d.pstyle("z-index").value;return 0!==L?L:c.poolIndex()-d.poolIndex()},Rc={forEach:function(c,d){if(ft(c))for(var m=this.length,_=0;_<m;_++){var b=this[_];if(!1===(d?c.apply(d,[b,_,this]):c(b,_,this)))break}return this},toArray:function(){for(var c=[],d=0;d<this.length;d++)c.push(this[d]);return c},slice:function(c,d){var m=[],_=this.length;null==d&&(d=_),null==c&&(c=0),c<0&&(c=_+c),d<0&&(d=_+d);for(var b=c;b>=0&&b<d&&b<_;b++)m.push(this[b]);return this.spawn(m)},size:function(){return this.length},eq:function(c){return this[c]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(c){if(!ft(c))return this;var d=this.toArray().sort(c);return this.spawn(d)},sortByZIndex:function(){return this.sort(lp)},zDepth:function(){var c=this[0];if(c){var d=c._private;if("nodes"===d.group){var _=d.data.parent?c.parents().size():0;return c.isParent()?_:wc-1}var w=d.target,E=d.source.zDepth(),k=w.zDepth();return Math.max(E,k,0)}}};Rc.each=Rc.forEach,c="undefined",(typeof Symbol>"u"?"undefined":se(Symbol))!=c&&se(Symbol.iterator)!=c&&(Rc[Symbol.iterator]=function(){var m=this,_={value:void 0,done:!1},b=0,w=this.length;return xe({next:function(){return b<w?_.value=m[b++]:(_.value=void 0,_.done=!0),_}},Symbol.iterator,function(){return this})});var qg=ti({nodeDimensionsIncludeLabels:!1}),hh={layoutDimensions:function(c){var d;if(c=qg(c),this.takesUpSpace())if(c.nodeDimensionsIncludeLabels){var m=this.boundingBox();d={w:m.w,h:m.h}}else d={w:this.outerWidth(),h:this.outerHeight()};else d={w:0,h:0};return(0===d.w||0===d.h)&&(d.w=d.h=1),d},layoutPositions:function(c,d,m){var _=this.nodes().filter(function(Lt){return!Lt.isParent()}),b=this.cy(),w=d.eles,E=function(kt){return kt.id()},k=At(m,E);c.emit({type:"layoutstart",layout:c}),c.animations=[];var G=d.spacingFactor&&1!==d.spacingFactor,le=function(){if(!G)return null;for(var kt=Sc(),mt=0;mt<_.length;mt++){var bt=k(_[mt],mt);ua(kt,bt.x,bt.y)}return kt}(),de=At(function(Lt,kt){var mt=k(Lt,kt);return G&&(mt=function(kt,mt,Ft){var bt_x=mt.x1+mt.w/2,bt_y=mt.y1+mt.h/2;return{x:bt_x+(Ft.x-bt_x)*kt,y:bt_y+(Ft.y-bt_y)*kt}}(Math.abs(d.spacingFactor),le,mt)),null!=d.transform&&(mt=d.transform(Lt,mt)),mt},E);if(d.animate){for(var pe=0;pe<_.length;pe++){var Ie=_[pe],Ne=de(Ie,pe);if(null==d.animateFilter||d.animateFilter(Ie,pe)){var Qe=Ie.animation({position:Ne,duration:d.animationDuration,easing:d.animationEasing});c.animations.push(Qe)}else Ie.position(Ne)}if(d.fit){var qe=b.animation({fit:{boundingBox:w.boundingBoxAt(de),padding:d.padding},duration:d.animationDuration,easing:d.animationEasing});c.animations.push(qe)}else if(void 0!==d.zoom&&void 0!==d.pan){var dt=b.animation({zoom:d.zoom,pan:d.pan,duration:d.animationDuration,easing:d.animationEasing});c.animations.push(dt)}c.animations.forEach(function(Lt){return Lt.play()}),c.one("layoutready",d.ready),c.emit({type:"layoutready",layout:c}),na.all(c.animations.map(function(Lt){return Lt.promise()})).then(function(){c.one("layoutstop",d.stop),c.emit({type:"layoutstop",layout:c})})}else _.positions(de),d.fit&&b.fit(d.eles,d.padding),null!=d.zoom&&b.zoom(d.zoom),d.pan&&b.pan(d.pan),c.one("layoutready",d.ready),c.emit({type:"layoutready",layout:c}),c.one("layoutstop",d.stop),c.emit({type:"layoutstop",layout:c});return this},layout:function(c){return this.cy().makeLayout(er({},c,{eles:this}))}};function Hd(f,c,d){var b,m=d._private,_=m.styleCache=m.styleCache||[];return null!=(b=_[f])||(b=_[f]=c(d)),b}function Gd(f,c){return f=xc(f),function(m){return Hd(f,c,m)}}function Ql(f,c){f=xc(f);var d=function(_){return c.call(_)};return function(){var _=this[0];if(_)return Hd(f,d,_)}}hh.createLayout=hh.makeLayout=hh.layout;var ll={recalculateRenderedStyle:function(c){var d=this.cy(),m=d.renderer(),_=d.styleEnabled();return m&&_&&m.recalculateRenderedStyle(this,c),this},dirtyStyleCache:function(){var m,c=this.cy(),d=function(b){return b._private.styleCache=null};return c.hasCompoundNodes()?((m=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(m.connectedEdges()),m.forEach(d)):this.forEach(function(_){d(_),_.connectedEdges().forEach(d)}),this},updateStyle:function(c){var d=this._private.cy;if(!d.styleEnabled())return this;if(d.batching())return d._private.batchStyleEles.merge(this),this;var b=this;c=!(!c&&void 0!==c),d.hasCompoundNodes()&&(b=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var w=b;return c?w.emitAndNotify("style"):w.emit("style"),b.forEach(function(E){return E._private.styleDirty=!0}),this},cleanStyle:function(){var c=this.cy();if(c.styleEnabled())for(var d=0;d<this.length;d++){var m=this[d];m._private.styleDirty&&(m._private.styleDirty=!1,c.style().apply(m))}},parsedStyle:function(c){var d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],m=this[0],_=m.cy();if(_.styleEnabled()&&m){this.cleanStyle();var b=m._private.style[c];return b??(d?_.style().getDefaultProperty(c):null)}},numericStyle:function(c){var d=this[0];if(d.cy().styleEnabled()&&d){var m=d.pstyle(c);return void 0!==m.pfValue?m.pfValue:m.value}},numericStyleUnits:function(c){var d=this[0];if(d.cy().styleEnabled()&&d)return d.pstyle(c).units},renderedStyle:function(c){var d=this.cy();if(!d.styleEnabled())return this;var m=this[0];return m?d.style().getRenderedStyle(m,c):void 0},style:function(c,d){var m=this.cy();if(!m.styleEnabled())return this;var b=m.style();if(Ct(c))b.applyBypass(this,c,!1),this.emitAndNotify("style");else if(He(c)){if(void 0===d){var E=this[0];return E?b.getStylePropertyValue(E,c):void 0}b.applyBypass(this,c,d,!1),this.emitAndNotify("style")}else if(void 0===c){var k=this[0];return k?b.getRawStyle(k):void 0}return this},removeStyle:function(c){var d=this.cy();if(!d.styleEnabled())return this;var _=d.style(),b=this;if(void 0===c)for(var w=0;w<b.length;w++)_.removeAllBypasses(b[w],!1);else{c=c.split(/\s+/);for(var k=0;k<b.length;k++)_.removeBypasses(b[k],c,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var c=this.cy();if(!c.styleEnabled())return 1;var d=c.hasCompoundNodes(),m=this[0];if(m){var _=m._private,b=m.pstyle("opacity").value;if(!d)return b;var w=_.data.parent?m.parents():null;if(w)for(var E=0;E<w.length;E++)b*=w[E].pstyle("opacity").value;return b}},transparent:function(){if(!this.cy().styleEnabled())return!1;var d=this[0],m=d.cy().hasCompoundNodes();return d?m?0===d.effectiveOpacity():0===d.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Nh(f,c){var m=f._private.data.parent?f.parents():null;if(m)for(var _=0;_<m.length;_++)if(!c(m[_]))return!1;return!0}function Qc(f){var c=f.ok,d=f.edgeOkViaNode||f.ok,m=f.parentOk||f.ok;return function(){var _=this.cy();if(!_.styleEnabled())return!0;var b=this[0],w=_.hasCompoundNodes();if(b){var E=b._private;if(!c(b))return!1;if(b.isNode())return!w||Nh(b,m);var k=E.source,L=E.target;return d(k)&&(!w||Nh(k,d))&&(k===L||d(L)&&(!w||Nh(L,d)))}}}var ld=Gd("eleTakesUpSpace",function(f){return"element"===f.pstyle("display").value&&0!==f.width()&&(!f.isNode()||0!==f.height())});ll.takesUpSpace=Ql("takesUpSpace",Qc({ok:ld}));var Wd=Gd("eleInteractive",function(f){return"yes"===f.pstyle("events").value&&"visible"===f.pstyle("visibility").value&&ld(f)}),up=Gd("parentInteractive",function(f){return"visible"===f.pstyle("visibility").value&&ld(f)});ll.interactive=Ql("interactive",Qc({ok:Wd,parentOk:up,edgeOkViaNode:ld})),ll.noninteractive=function(){var f=this[0];if(f)return!f.interactive()};var dh=Gd("eleVisible",function(f){return"visible"===f.pstyle("visibility").value&&0!==f.pstyle("opacity").pfValue&&ld(f)});ll.visible=Ql("visible",Qc({ok:dh,edgeOkViaNode:ld})),ll.hidden=function(){var f=this[0];if(f)return!f.visible()},ll.isBundledBezier=Ql("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),ll.bypass=ll.css=ll.style,ll.renderedCss=ll.renderedStyle,ll.removeBypass=ll.removeCss=ll.removeStyle,ll.pstyle=ll.parsedStyle;var zo={};function jd(f){return function(){var c=arguments,d=[];if(2===c.length){var m=c[0],_=c[1];this.on(f.event,m,_)}else if(1===c.length&&ft(c[0])){var b=c[0];this.on(f.event,b)}else if(0===c.length||1===c.length&&gt(c[0])){for(var w=1===c.length?c[0]:null,E=0;E<this.length;E++){var k=this[E],L=!f.ableField||k._private[f.ableField],G=k._private[f.field]!=f.value;if(f.overrideAble){var K=f.overrideAble(k);if(void 0!==K&&(L=K,!K))return this}L&&(k._private[f.field]=f.value,G&&d.push(k))}var le=this.spawn(d);le.updateStyle(),le.emit(f.event),w&&le.emit(w)}return this}}function Bh(f){zo[f.field]=function(){var c=this[0];if(c){if(f.overrideField){var d=f.overrideField(c);if(void 0!==d)return d}return c._private[f.field]}},zo[f.on]=jd({event:f.on,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!0}),zo[f.off]=jd({event:f.off,field:f.field,ableField:f.ableField,overrideAble:f.overrideAble,value:!1})}Bh({field:"locked",overrideField:function(c){return!!c.cy().autolock()||void 0},on:"lock",off:"unlock"}),Bh({field:"grabbable",overrideField:function(c){return!c.cy().autoungrabify()&&!c.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Bh({field:"selected",ableField:"selectable",overrideAble:function(c){return!c.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Bh({field:"selectable",overrideField:function(c){return!c.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),zo.deselect=zo.unselect,zo.grabbed=function(){var f=this[0];if(f)return f._private.grabbed},Bh({field:"active",on:"activate",off:"unactivate"}),Bh({field:"pannable",on:"panify",off:"unpanify"}),zo.inactive=function(){var f=this[0];if(f)return!f._private.active};var Za={},cd=function(c){return function(m){for(var b=[],w=0;w<this.length;w++){var E=this[w];if(E.isNode()){for(var k=!1,L=E.connectedEdges(),G=0;G<L.length;G++){var K=L[G],le=K.source(),de=K.target();if(c.noIncomingEdges&&de===E&&le!==E||c.noOutgoingEdges&&le===E&&de!==E){k=!0;break}}k||b.push(E)}}return this.spawn(b,!0).filter(m)}},Nu=function(c){return function(d){for(var _=[],b=0;b<this.length;b++){var w=this[b];if(w.isNode())for(var E=w.connectedEdges(),k=0;k<E.length;k++){var L=E[k],G=L.source(),K=L.target();c.outgoing&&G===w?(_.push(L),_.push(K)):c.incoming&&K===w&&(_.push(L),_.push(G))}}return this.spawn(_,!0).filter(d)}},zh=function(c){return function(d){for(var m=this,_=[],b={};;){var w=c.outgoing?m.outgoers():m.incomers();if(0===w.length)break;for(var E=!1,k=0;k<w.length;k++){var L=w[k],G=L.id();b[G]||(b[G]=!0,_.push(L),E=!0)}if(!E)break;m=w}return this.spawn(_,!0).filter(d)}};function Da(f){return function(d){for(var m=[],_=0;_<this.length;_++){var w=this[_]._private[f.attr];w&&m.push(w)}return this.spawn(m,!0).filter(d)}}function Jc(f){return function(d){var m=[],_=this._private.cy,b=f||{};He(d)&&(d=_.$(d));for(var w=0;w<d.length;w++)for(var E=d[w]._private.edges,k=0;k<E.length;k++){var L=E[k],G=L._private.data,K=this.hasElementWithId(G.source)&&d.hasElementWithId(G.target),le=d.hasElementWithId(G.source)&&this.hasElementWithId(G.target);!K&&!le||(b.thisIsSrc||b.thisIsTgt)&&(b.thisIsSrc&&!K||b.thisIsTgt&&!le)||m.push(L)}return this.spawn(m,!0)}}function ud(f){return f=er({},{codirected:!1},f),function(m){for(var _=[],b=this.edges(),w=f,E=0;E<b.length;E++)for(var L=b[E]._private,G=L.source,K=G._private.data.id,le=L.data.target,de=G._private.edges,pe=0;pe<de.length;pe++){var Ie=de[pe],Ne=Ie._private.data,ze=Ne.target,Qe=Ne.source,qe=ze===le&&Qe===K;(w.codirected&&qe||!w.codirected&&(qe||K===ze&&le===Qe))&&_.push(Ie)}return this.spawn(_,!0).filter(m)}}Za.clearTraversalCache=function(){for(var f=0;f<this.length;f++)this[f]._private.traversalCache=null},er(Za,{roots:cd({noIncomingEdges:!0}),leaves:cd({noOutgoingEdges:!0}),outgoers:Ca(Nu({outgoing:!0}),"outgoers"),successors:zh({outgoing:!0}),incomers:Ca(Nu({incoming:!0}),"incomers"),predecessors:zh({incoming:!0})}),er(Za,{neighborhood:Ca(function(f){for(var c=[],d=this.nodes(),m=0;m<d.length;m++)for(var _=d[m],b=_.connectedEdges(),w=0;w<b.length;w++){var E=b[w],k=E.source(),L=E.target(),G=_===k?L:k;G.length>0&&c.push(G[0]),c.push(E[0])}return this.spawn(c,!0).filter(f)},"neighborhood"),closedNeighborhood:function(c){return this.neighborhood().add(this).filter(c)},openNeighborhood:function(c){return this.neighborhood(c)}}),Za.neighbourhood=Za.neighborhood,Za.closedNeighbourhood=Za.closedNeighborhood,Za.openNeighbourhood=Za.openNeighborhood,er(Za,{source:Ca(function(c){var m,d=this[0];return d&&(m=d._private.source||d.cy().collection()),m&&c?m.filter(c):m},"source"),target:Ca(function(c){var m,d=this[0];return d&&(m=d._private.target||d.cy().collection()),m&&c?m.filter(c):m},"target"),sources:Da({attr:"source"}),targets:Da({attr:"target"})}),er(Za,{edgesWith:Ca(Jc(),"edgesWith"),edgesTo:Ca(Jc({thisIsSrc:!0}),"edgesTo")}),er(Za,{connectedEdges:Ca(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];if(_.isNode())for(var b=_._private.edges,w=0;w<b.length;w++)c.push(b[w])}return this.spawn(c,!0).filter(f)},"connectedEdges"),connectedNodes:Ca(function(f){for(var c=[],m=0;m<this.length;m++){var _=this[m];!_.isEdge()||(c.push(_.source()[0]),c.push(_.target()[0]))}return this.spawn(c,!0).filter(f)},"connectedNodes"),parallelEdges:Ca(ud(),"parallelEdges"),codirectedEdges:Ca(ud({codirected:!0}),"codirectedEdges")}),er(Za,{components:function(c){var d=this,m=d.cy(),_=m.collection(),b=null==c?d.nodes():c.nodes(),w=[];null!=c&&b.empty()&&(b=c.sources());var E=function(G,K){_.merge(G),b.unmerge(G),K.merge(G)};if(b.empty())return d.spawn();var k=function(){var G=m.collection();w.push(G);var K=b[0];E(K,G),d.bfs({directed:!1,roots:K,visit:function(de){return E(de,G)}}),G.forEach(function(le){le.connectedEdges().forEach(function(de){d.has(de)&&G.has(de.source())&&G.has(de.target())&&G.merge(de)})})};do{k()}while(b.length>0);return w},component:function(){var c=this[0];return c.cy().mutableElements().components(c)[0]}}),Za.componentsOf=Za.components;var oa=function(c,d){var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==c){var _=new xo,b=!1;if(d){if(d.length>0&&Ct(d[0])&&!Ln(d[0])){b=!0;for(var w=[],E=new us,k=0,L=d.length;k<L;k++){var G=d[k];null==G.data&&(G.data={});var K=G.data;if(null==K.id)K.id=zt();else if(c.hasElementWithId(K.id)||E.has(K.id))continue;var le=new Xa(c,G,!1);w.push(le),E.add(K.id)}d=w}}else d=[];this.length=0;for(var de=0,pe=d.length;de<pe;de++){var Ie=d[de][0];if(null!=Ie){var Ne=Ie._private.data.id;(!m||!_.has(Ne))&&(m&&_.set(Ne,{index:this.length,ele:Ie}),this[this.length]=Ie,this.length++)}}this._private={eles:this,cy:c,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(ze){this.lazyMap=ze},rebuildMap:function(){for(var Qe=this.lazyMap=new xo,qe=this.eles,dt=0;dt<qe.length;dt++){var Lt=qe[dt];Qe.set(Lt.id(),{index:dt,ele:Lt})}}},m&&(this._private.map=_),b&&this.restore()}else it("A collection must have a reference to the core")},Vo=Xa.prototype=oa.prototype=Object.create(Array.prototype);Vo.instanceString=function(){return"collection"},Vo.spawn=function(f,c){return new oa(this.cy(),f,c)},Vo.spawnSelf=function(){return this.spawn(this)},Vo.cy=function(){return this._private.cy},Vo.renderer=function(){return this._private.cy.renderer()},Vo.element=function(){return this[0]},Vo.collection=function(){return xn(this)?this:new oa(this._private.cy,[this])},Vo.unique=function(){return new oa(this._private.cy,this,!0)},Vo.hasElementWithId=function(f){return this._private.map.has(f=""+f)},Vo.getElementById=function(f){var c=this._private.cy,d=this._private.map.get(f=""+f);return d?d.ele:new oa(c)},Vo.$id=Vo.getElementById,Vo.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Vo.indexOf=function(f){return this._private.map.get(f[0]._private.data.id).index},Vo.indexOfId=function(f){return this._private.map.get(f=""+f).index},Vo.json=function(f){var c=this.element(),d=this.cy();if(null==c&&f)return this;if(null!=c){var m=c._private;if(Ct(f)){if(d.startBatch(),f.data){c.data(f.data);var _=m.data;if(c.isEdge()){var b=!1,w={},E=f.data.source,k=f.data.target;null!=E&&E!=_.source&&(w.source=""+E,b=!0),null!=k&&k!=_.target&&(w.target=""+k,b=!0),b&&(c=c.move(w))}else{var G=f.data.parent;"parent"in f.data&&(null!=G||null!=_.parent)&&G!=_.parent&&(void 0===G&&(G=null),null!=G&&(G=""+G),c=c.move({parent:G}))}}f.position&&c.position(f.position);var K=function(Ie,Ne,ze){var Qe=f[Ie];null!=Qe&&Qe!==m[Ie]&&(Qe?c[Ne]():c[ze]())};return K("removed","remove","restore"),K("selected","select","unselect"),K("selectable","selectify","unselectify"),K("locked","lock","unlock"),K("grabbable","grabify","ungrabify"),K("pannable","panify","unpanify"),null!=f.classes&&c.classes(f.classes),d.endBatch(),this}if(void 0===f){var le={data:$e(m.data),position:$e(m.position),group:m.group,removed:m.removed,selected:m.selected,selectable:m.selectable,locked:m.locked,grabbable:m.grabbable,pannable:m.pannable,classes:""},de=0;return m.classes.forEach(function(pe){return le.classes+=0==de++?pe:" "+pe}),le}}},Vo.jsons=function(){for(var f=[],c=0;c<this.length;c++){var m=this[c].json();f.push(m)}return f},Vo.clone=function(){for(var f=this.cy(),c=[],d=0;d<this.length;d++){var _=this[d].json(),b=new Xa(f,_,!1);c.push(b)}return new oa(f,c)},Vo.copy=Vo.clone,Vo.restore=function(){for(var E,f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this,m=d.cy(),_=m._private,b=[],w=[],k=0,L=d.length;k<L;k++){var G=d[k];c&&!G.removed()||(G.isNode()?b.push(G):w.push(G))}E=b.concat(w);var K,le=function(){E.splice(K,1),K--};for(K=0;K<E.length;K++){var de=E[K],pe=de._private,Ie=pe.data;if(de.clearTraversalCache(),c||pe.removed)if(void 0===Ie.id)Ie.id=zt();else if(Ut(Ie.id))Ie.id=""+Ie.id;else{if(Ce(Ie.id)||!He(Ie.id)){it("Can not create element with invalid string ID `"+Ie.id+"`"),le();continue}if(m.hasElementWithId(Ie.id)){it("Can not create second element with ID `"+Ie.id+"`"),le();continue}}var Ne=Ie.id;if(de.isNode()){var ze=pe.position;null==ze.x&&(ze.x=0),null==ze.y&&(ze.y=0)}if(de.isEdge()){for(var Qe=de,qe=["source","target"],dt=qe.length,Lt=!1,kt=0;kt<dt;kt++){var mt=qe[kt],Ft=Ie[mt];Ut(Ft)&&(Ft=Ie[mt]=""+Ie[mt]),null==Ft||""===Ft?(it("Can not create edge `"+Ne+"` with unspecified "+mt),Lt=!0):m.hasElementWithId(Ft)||(it("Can not create edge `"+Ne+"` with nonexistant "+mt+" `"+Ft+"`"),Lt=!0)}if(Lt){le();continue}var bt=m.getElementById(Ie.source),Ht=m.getElementById(Ie.target);bt.same(Ht)?bt._private.edges.push(Qe):(bt._private.edges.push(Qe),Ht._private.edges.push(Qe)),Qe._private.source=bt,Qe._private.target=Ht}pe.map=new xo,pe.map.set(Ne,{ele:de,index:0}),pe.removed=!1,c&&m.addToPool(de)}for(var Vt=0;Vt<b.length;Vt++){var et=b[Vt],Wt=et._private.data;Ut(Wt.parent)&&(Wt.parent=""+Wt.parent);var Tt=Wt.parent,gn=null!=Tt;if(gn){var Kt=m.getElementById(Tt);if(Kt.empty())Wt.parent=void 0;else{for(var ln=!1,Sn=Kt;!Sn.empty();){if(et.same(Sn)){ln=!0,Wt.parent=void 0;break}Sn=Sn.parent()}ln||(Kt[0]._private.children.push(et),et._private.parent=Kt[0],_.hasCompoundNodes=!0)}}}if(E.length>0){for(var Rn=E.length===d.length?d:new oa(m,E),Jn=0;Jn<Rn.length;Jn++){var En=Rn[Jn];En.isNode()||(En.parallelEdges().clearTraversalCache(),En.source().clearTraversalCache(),En.target().clearTraversalCache())}(_.hasCompoundNodes?m.collection().merge(Rn).merge(Rn.connectedNodes()).merge(Rn.parent()):Rn).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(f),f?Rn.emitAndNotify("add"):c&&Rn.emit("add")}return d},Vo.removed=function(){var f=this[0];return f&&f._private.removed},Vo.inside=function(){var f=this[0];return f&&!f._private.removed},Vo.remove=function(){var f=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],d=this,m=[],_={},b=d._private.cy;function w(Tt){for(var gn=Tt._private.edges,Kt=0;Kt<gn.length;Kt++)k(gn[Kt])}function E(Tt){for(var gn=Tt._private.children,Kt=0;Kt<gn.length;Kt++)k(gn[Kt])}function k(Tt){var gn=_[Tt.id()];c&&Tt.removed()||gn||(_[Tt.id()]=!0,Tt.isNode()?(m.push(Tt),w(Tt),E(Tt)):m.unshift(Tt))}for(var L=0,G=d.length;L<G;L++){var K=d[L];k(K)}function le(Tt,gn){di(Tt._private.edges,gn),Tt.clearTraversalCache()}function de(Tt){Tt.clearTraversalCache()}var pe=[];function Ie(Tt,gn){gn=gn[0];var Kt=(Tt=Tt[0])._private.children,ln=Tt.id();di(Kt,gn),gn._private.parent=null,pe.ids[ln]||(pe.ids[ln]=!0,pe.push(Tt))}pe.ids={},d.dirtyCompoundBoundsCache(),c&&b.removeFromPool(m);for(var Ne=0;Ne<m.length;Ne++){var ze=m[Ne];if(ze.isEdge()){var Qe=ze.source()[0],qe=ze.target()[0];le(Qe,ze),le(qe,ze);for(var dt=ze.parallelEdges(),Lt=0;Lt<dt.length;Lt++){var kt=dt[Lt];de(kt),kt.isBundledBezier()&&kt.dirtyBoundingBoxCache()}}else{var mt=ze.parent();0!==mt.length&&Ie(mt,ze)}c&&(ze._private.removed=!0)}var Ft=b._private.elements;b._private.hasCompoundNodes=!1;for(var bt=0;bt<Ft.length;bt++){var Ht=Ft[bt];if(Ht.isParent()){b._private.hasCompoundNodes=!0;break}}var Vt=new oa(this.cy(),m);Vt.size()>0&&(f?Vt.emitAndNotify("remove"):c&&Vt.emit("remove"));for(var et=0;et<pe.length;et++){var Wt=pe[et];(!c||!Wt.removed())&&Wt.updateStyle()}return Vt},Vo.move=function(f){var c=this._private.cy,d=this,m=!1,_=!1,b=function(pe){return null==pe?pe:""+pe};if(void 0!==f.source||void 0!==f.target){var w=b(f.source),E=b(f.target),k=null!=w&&c.hasElementWithId(w),L=null!=E&&c.hasElementWithId(E);(k||L)&&(c.batch(function(){d.remove(m,_),d.emitAndNotify("moveout");for(var de=0;de<d.length;de++){var pe=d[de],Ie=pe._private.data;pe.isEdge()&&(k&&(Ie.source=w),L&&(Ie.target=E))}d.restore(m,_)}),d.emitAndNotify("move"))}else if(void 0!==f.parent){var G=b(f.parent);if(null===G||c.hasElementWithId(G)){var le=null===G?void 0:G;c.batch(function(){var de=d.remove(m,_);de.emitAndNotify("moveout");for(var pe=0;pe<d.length;pe++){var Ie=d[pe],Ne=Ie._private.data;Ie.isNode()&&(Ne.parent=le)}de.restore(m,_)}),d.emitAndNotify("move")}}return this},[Mm,pl,Tc,Fl,Po,Nd,_f,lC,vo,Pc,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var c=this[0];if(c)return c._private.group}},Rc,hh,ll,zo,Za].forEach(function(f){er(Vo,f)});var Os={add:function(c){var d,m=this;if(nn(c)){var _=c;if(_._private.cy===m)d=_.restore();else{for(var b=[],w=0;w<_.length;w++)b.push(_[w].json());d=new oa(m,b)}}else if(gt(c))d=new oa(m,c);else if(Ct(c)&&(gt(c.nodes)||gt(c.edges))){for(var L=c,G=[],K=["nodes","edges"],le=0,de=K.length;le<de;le++){var pe=K[le],Ie=L[pe];if(gt(Ie))for(var Ne=0,ze=Ie.length;Ne<ze;Ne++){var Qe=er({group:pe},Ie[Ne]);G.push(Qe)}}d=new oa(m,G)}else d=new Xa(m,c).collection();return d},remove:function(c){return nn(c)||He(c)&&(c=this.$(c)),c.remove()}},Rm=function(){function f(m){return-m.tension*m.x-m.friction*m.v}function c(m,_,b){var w={x:m.x+b.dx*_,v:m.v+b.dv*_,tension:m.tension,friction:m.friction};return{dx:w.v,dv:f(w)}}function d(m,_){var b={dx:m.v,dv:f(m)},w=c(m,.5*_,b),E=c(m,.5*_,w),k=c(m,_,E),G=1/6*(b.dv+2*(w.dv+E.dv)+k.dv);return m.x=m.x+1/6*(b.dx+2*(w.dx+E.dx)+k.dx)*_,m.v=m.v+G*_,m}return function m(_,b,w){var le,de,pe,E={x:-1,v:0,tension:null,friction:null},k=[0],L=0,G=1e-4;for(_=parseFloat(_)||500,b=parseFloat(b)||20,w=w||null,E.tension=_,E.friction=b,de=(le=null!==w)?(L=m(_,b))/w*.016:.016;pe=d(pe||E,de),k.push(1+pe.x),L+=16,Math.abs(pe.x)>G&&Math.abs(pe.v)>G;);return le?function(Ie){return k[Ie*(k.length-1)|0]}:L}}(),yo=function(c,d,m,_){var b=function Qi(f,c,d,m){var _=4,b=.001,w=1e-7,E=10,k=11,L=1/(k-1),G=typeof Float32Array<"u";if(4!==arguments.length)return!1;for(var K=0;K<4;++K)if("number"!=typeof arguments[K]||isNaN(arguments[K])||!isFinite(arguments[K]))return!1;f=Math.min(f,1),d=Math.min(d,1),f=Math.max(f,0),d=Math.max(d,0);var le=G?new Float32Array(k):new Array(k);function de(Ht,Vt){return 1-3*Vt+3*Ht}function pe(Ht,Vt){return 3*Vt-6*Ht}function Ie(Ht){return 3*Ht}function Ne(Ht,Vt,et){return((de(Vt,et)*Ht+pe(Vt,et))*Ht+Ie(Vt))*Ht}function ze(Ht,Vt,et){return 3*de(Vt,et)*Ht*Ht+2*pe(Vt,et)*Ht+Ie(Vt)}function Qe(Ht,Vt){for(var et=0;et<_;++et){var Wt=ze(Vt,f,d);if(0===Wt)return Vt;Vt-=(Ne(Vt,f,d)-Ht)/Wt}return Vt}function qe(){for(var Ht=0;Ht<k;++Ht)le[Ht]=Ne(Ht*L,f,d)}function dt(Ht,Vt,et){var Wt,Tt,gn=0;do{(Wt=Ne(Tt=Vt+(et-Vt)/2,f,d)-Ht)>0?et=Tt:Vt=Tt}while(Math.abs(Wt)>w&&++gn<E);return Tt}function Lt(Ht){for(var Vt=0,et=1,Wt=k-1;et!==Wt&&le[et]<=Ht;++et)Vt+=L;--et;var gn=Vt+(Ht-le[et])/(le[et+1]-le[et])*L,Kt=ze(gn,f,d);return Kt>=b?Qe(Ht,gn):0===Kt?gn:dt(Ht,Vt,Vt+L)}var kt=!1;function mt(){kt=!0,(f!==c||d!==m)&&qe()}var Ft=function(Vt){return kt||mt(),f===c&&d===m?Vt:0===Vt?0:1===Vt?1:Ne(Lt(Vt),c,m)};Ft.getControlPoints=function(){return[{x:f,y:c},{x:d,y:m}]};var bt="generateBezier("+[f,c,d,m]+")";return Ft.toString=function(){return bt},Ft}(c,d,m,_);return function(w,E,k){return w+(E-w)*b(k)}},If={linear:function(c,d,m){return c+(d-c)*m},ease:yo(.25,.1,.25,1),"ease-in":yo(.42,0,1,1),"ease-out":yo(0,0,.58,1),"ease-in-out":yo(.42,0,.58,1),"ease-in-sine":yo(.47,0,.745,.715),"ease-out-sine":yo(.39,.575,.565,1),"ease-in-out-sine":yo(.445,.05,.55,.95),"ease-in-quad":yo(.55,.085,.68,.53),"ease-out-quad":yo(.25,.46,.45,.94),"ease-in-out-quad":yo(.455,.03,.515,.955),"ease-in-cubic":yo(.55,.055,.675,.19),"ease-out-cubic":yo(.215,.61,.355,1),"ease-in-out-cubic":yo(.645,.045,.355,1),"ease-in-quart":yo(.895,.03,.685,.22),"ease-out-quart":yo(.165,.84,.44,1),"ease-in-out-quart":yo(.77,0,.175,1),"ease-in-quint":yo(.755,.05,.855,.06),"ease-out-quint":yo(.23,1,.32,1),"ease-in-out-quint":yo(.86,0,.07,1),"ease-in-expo":yo(.95,.05,.795,.035),"ease-out-expo":yo(.19,1,.22,1),"ease-in-out-expo":yo(1,0,0,1),"ease-in-circ":yo(.6,.04,.98,.335),"ease-out-circ":yo(.075,.82,.165,1),"ease-in-out-circ":yo(.785,.135,.15,.86),spring:function(c,d,m){if(0===m)return If.linear;var _=Rm(c,d,m);return function(b,w,E){return b+(w-b)*_(E)}},"cubic-bezier":yo};function Kp(f,c,d,m,_){if(1===m||c===d)return d;var b=_(c,d,m);return null==f||((f.roundValue||f.color)&&(b=Math.round(b)),void 0!==f.min&&(b=Math.max(b,f.min)),void 0!==f.max&&(b=Math.min(b,f.max))),b}function Zp(f,c){return null!=f.pfValue||null!=f.value?null==f.pfValue||null!=c&&"%"===c.type.units?f.value:f.pfValue:f}function vl(f,c,d,m,_){var b=null!=_?_.type:null;d<0?d=0:d>1&&(d=1);var w=Zp(f,_),E=Zp(c,_);if(Ut(w)&&Ut(E))return Kp(b,w,E,d,m);if(gt(w)&&gt(E)){for(var k=[],L=0;L<E.length;L++){var G=w[L],K=E[L];if(null!=G&&null!=K){var le=Kp(b,G,K,d,m);k.push(le)}else k.push(K)}return k}}function Sf(f,c,d,m){var _=!m,b=f._private,w=c._private,E=w.easing,k=w.startTime,G=(m?f:f.cy()).style();if(!w.easingImpl)if(null==E)w.easingImpl=If.linear;else{var K,de,pe;K=He(E)?G.parse("transition-timing-function",E).value:E,He(K)?(de=K,pe=[]):(de=K[1],pe=K.slice(2).map(function(Rn){return+Rn})),pe.length>0?("spring"===de&&pe.push(w.duration),w.easingImpl=If[de].apply(null,pe)):w.easingImpl=If[de]}var Ne,Ie=w.easingImpl;if(Ne=0===w.duration?1:(d-k)/w.duration,w.applying&&(Ne=w.progress),Ne<0?Ne=0:Ne>1&&(Ne=1),null==w.delay){var ze=w.startPosition,Qe=w.position;if(Qe&&_&&!f.locked()){var qe={};Jl(ze.x,Qe.x)&&(qe.x=vl(ze.x,Qe.x,Ne,Ie)),Jl(ze.y,Qe.y)&&(qe.y=vl(ze.y,Qe.y,Ne,Ie)),f.position(qe)}var dt=w.startPan,Lt=w.pan,kt=b.pan,mt=null!=Lt&&m;mt&&(Jl(dt.x,Lt.x)&&(kt.x=vl(dt.x,Lt.x,Ne,Ie)),Jl(dt.y,Lt.y)&&(kt.y=vl(dt.y,Lt.y,Ne,Ie)),f.emit("pan"));var Ft=w.startZoom,bt=w.zoom,Ht=null!=bt&&m;Ht&&(Jl(Ft,bt)&&(b.zoom=Dr(b.minZoom,vl(Ft,bt,Ne,Ie),b.maxZoom)),f.emit("zoom")),(mt||Ht)&&f.emit("viewport");var Vt=w.style;if(Vt&&Vt.length>0&&_){for(var et=0;et<Vt.length;et++){var Wt=Vt[et],Tt=Wt.name,Kt=w.startStyle[Tt],Sn=vl(Kt,Wt,Ne,Ie,G.properties[Kt.name]);G.overrideBypass(f,Tt,Sn)}f.emit("style")}}return w.progress=Ne,Ne}function Jl(f,c){return!!(null!=f&&null!=c&&(Ut(f)&&Ut(c)||f&&c))}function Qp(f,c,d,m){var _=c._private;_.started=!0,_.startTime=d-_.progress*_.duration}function Jp(f,c){var d=c._private.aniEles,m=[];function _(G,K){var le=G._private,de=le.animation.current,pe=le.animation.queue,Ie=!1;if(0===de.length){var Ne=pe.shift();Ne&&de.push(Ne)}for(var ze=function(kt){for(var mt=kt.length-1;mt>=0;mt--)(0,kt[mt])();kt.splice(0,kt.length)},Qe=de.length-1;Qe>=0;Qe--){var qe=de[Qe],dt=qe._private;dt.stopped?(de.splice(Qe,1),dt.hooked=!1,dt.playing=!1,dt.started=!1,ze(dt.frames)):!dt.playing&&!dt.applying||(dt.playing&&dt.applying&&(dt.applying=!1),dt.started||Qp(0,qe,f),Sf(G,qe,f,K),dt.applying&&(dt.applying=!1),ze(dt.frames),null!=dt.step&&dt.step(f),qe.completed()&&(de.splice(Qe,1),dt.hooked=!1,dt.playing=!1,dt.started=!1,ze(dt.completes)),Ie=!0)}return!K&&0===de.length&&0===pe.length&&m.push(G),Ie}for(var b=!1,w=0;w<d.length;w++){var k=_(d[w]);b=b||k}var L=_(c,!0);(b||L)&&(d.length>0?c.notify("draw",d):c.notify("draw")),d.unmerge(m),c.emit("step")}var La={animate:vs.animate(),animation:vs.animation(),animated:vs.animated(),clearQueue:vs.clearQueue(),delay:vs.delay(),delayAnimation:vs.delayAnimation(),stop:vs.stop(),addToAnimationPool:function(c){!this.styleEnabled()||this._private.aniEles.merge(c)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var c=this;if(c._private.animationsRunning=!0,c.styleEnabled()){var m=c.renderer();m&&m.beforeRender?m.beforeRender(function(b,w){Jp(w,c)},m.beforeRenderPriorities.animations):function d(){!c._private.animationsRunning||cu(function(b){Jp(b,c),d()})}()}}},Bl={qualifierCompare:function(c,d){return null==c||null==d?null==c&&null==d:c.sameText(d)},eventMatches:function(c,d,m){var _=d.qualifier;return null==_||c!==m.target&&Ln(m.target)&&_.matches(m.target)},addEventFields:function(c,d){d.cy=c,d.target=c},callbackContext:function(c,d,m){return null!=d.qualifier?m.target:c}},Al=function(c){return He(c)?new sp(c):c},Bu={createEmitter:function(){var c=this._private;return c.emitter||(c.emitter=new gu(Bl,this)),this},emitter:function(){return this._private.emitter},on:function(c,d,m){return this.emitter().on(c,Al(d),m),this},removeListener:function(c,d,m){return this.emitter().removeListener(c,Al(d),m),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(c,d,m){return this.emitter().one(c,Al(d),m),this},once:function(c,d,m){return this.emitter().one(c,Al(d),m),this},emit:function(c,d){return this.emitter().emit(c,d),this},emitAndNotify:function(c,d){return this.emit(c),this.notify(c,d),this}};vs.eventAliasesOn(Bu);var $d={png:function(c){return this._private.renderer.png(c=c||{})},jpg:function(c){var d=this._private.renderer;return(c=c||{}).bg=c.bg||"#fff",d.jpg(c)}};$d.jpeg=$d.jpg;var Ua={layout:function(c){var d=this;if(null!=c)if(null!=c.name){var b,m=c.name,_=d.extension("layout",m);if(null!=_)return b=He(c.eles)?d.$(c.eles):null!=c.eles?c.eles:d.$(),new _(er({},c,{cy:d,eles:b}));it("No such layout `"+m+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else it("A `name` must be specified to make a layout");else it("Layout options must be specified to make a layout")}};Ua.createLayout=Ua.makeLayout=Ua.layout;var vu={notify:function(c,d){var m=this._private;if(this.batching()){m.batchNotifications=m.batchNotifications||{};var _=m.batchNotifications[c]=m.batchNotifications[c]||this.collection();null!=d&&_.merge(d)}else if(m.notificationsEnabled){var b=this.renderer();this.destroyed()||!b||b.notify(c,d)}},notifications:function(c){var d=this._private;return void 0===c?d.notificationsEnabled:(d.notificationsEnabled=!!c,this)},noNotifications:function(c){this.notifications(!1),c(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var c=this._private;return null==c.batchCount&&(c.batchCount=0),0===c.batchCount&&(c.batchStyleEles=this.collection(),c.batchNotifications={}),c.batchCount++,this},endBatch:function(){var c=this._private;if(0===c.batchCount)return this;if(c.batchCount--,0===c.batchCount){c.batchStyleEles.updateStyle();var d=this.renderer();Object.keys(c.batchNotifications).forEach(function(m){var _=c.batchNotifications[m];_.empty()?d.notify(m):d.notify(m,_)})}return this},batch:function(c){return this.startBatch(),c(),this.endBatch(),this},batchData:function(c){var d=this;return this.batch(function(){for(var m=Object.keys(c),_=0;_<m.length;_++){var b=m[_],w=c[b];d.getElementById(b).data(w)}})}},zu=ti({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Vu={renderTo:function(c,d,m,_){return this._private.renderer.renderTo(c,d,m,_),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(c){var d=this,m=d.extension("renderer",c.name);if(null!=m){void 0!==c.wheelSensitivity&&he("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var _=zu(c);_.cy=d,d._private.renderer=new m(_),this.notify("init")}else it("Can not initialise: No such renderer `".concat(c.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var c=this;c.notify("destroy");var d=c.container();if(d)for(d._cyreg=null;d.childNodes.length>0;)d.removeChild(d.childNodes[0]);c._private.renderer=null,c.mutableElements().forEach(function(m){var _=m._private;_.rscratch={},_.rstyle={},_.animation.current=[],_.animation.queue=[]})},onRender:function(c){return this.on("render",c)},offRender:function(c){return this.off("render",c)}};Vu.invalidateDimensions=Vu.resize;var Il={collection:function(c,d){return He(c)?this.$(c):nn(c)?c.collection():gt(c)?new oa(this,c,d):new oa(this)},nodes:function(c){var d=this.$(function(m){return m.isNode()});return c?d.filter(c):d},edges:function(c){var d=this.$(function(m){return m.isEdge()});return c?d.filter(c):d},$:function(c){var d=this._private.elements;return c?d.filter(c):d.spawnSelf()},mutableElements:function(){return this._private.elements}};Il.elements=Il.filter=Il.$;var Pa={apply:function(f){for(var c=this,_=c._private.cy.collection(),b=0;b<f.length;b++){var w=f[b],E=c.getContextMeta(w);if(!E.empty){var k=c.getContextStyle(E),L=c.applyContextStyle(E,k,w);w._private.appliedInitStyle?c.updateTransitions(w,L.diffProps):w._private.appliedInitStyle=!0,c.updateStyleHints(w)&&_.push(w)}}return _},getPropertiesDiff:function(f,c){var d=this,m=d._private.propDiffs=d._private.propDiffs||{},_=f+"-"+c,b=m[_];if(b)return b;for(var w=[],E={},k=0;k<d.length;k++){var L=d[k],K="t"===c[k],le="t"===f[k]!==K,de=L.mappedProperties.length>0;if(le||K&&de){var pe=void 0;le&&de||le?pe=L.properties:de&&(pe=L.mappedProperties);for(var Ie=0;Ie<pe.length;Ie++){for(var Ne=pe[Ie],ze=Ne.name,Qe=!1,qe=k+1;qe<d.length&&("t"!==c[qe]||!(Qe=null!=d[qe].properties[Ne.name]));qe++);!E[ze]&&!Qe&&(E[ze]=!0,w.push(ze))}}}return m[_]=w,w},getContextMeta:function(f){for(var m,c=this,d="",_=f._private.styleCxtKey||"",b=0;b<c.length;b++){var w=c[b];d+=w.selector&&w.selector.matches(f)?"t":"f"}return m=c.getPropertiesDiff(_,d),f._private.styleCxtKey=d,{key:d,diffPropNames:m,empty:0===m.length}},getContextStyle:function(f){var c=f.key,m=this._private.contextStyles=this._private.contextStyles||{};if(m[c])return m[c];for(var _={_private:{key:c}},b=0;b<this.length;b++){var w=this[b];if("t"===c[b])for(var k=0;k<w.properties.length;k++){var L=w.properties[k];_[L.name]=L}}return m[c]=_,_},applyContextStyle:function(f,c,d){for(var _=f.diffPropNames,b={},w=this.types,E=0;E<_.length;E++){var k=_[E],L=c[k],G=d.pstyle(k);if(!L){if(!G)continue;L=G.bypass?{name:k,deleteBypassed:!0}:{name:k,delete:!0}}if(G!==L){if(L.mapped===w.fn&&null!=G&&null!=G.mapping&&G.mapping.value===L.value){var K=G.mapping;if((K.fnValue=L.value(d))===K.prevFnValue)continue}var de=b[k]={prev:G};this.applyParsedProperty(d,L),de.next=d.pstyle(k),de.next&&de.next.bypass&&(de.next=de.next.bypassed)}}return{diffProps:b}},updateStyleHints:function(f){var m,c=f._private,d=this,_=d.propertyGroupKeys,b=function(ji,ir,Nr){return d.getPropertiesHash(ji,ir,Nr)},w=c.styleKey;if(f.removed())return!1;var ji,E="nodes"===c.group,k=f._private.style;m=Object.keys(k);for(var L=0;L<_.length;L++)c.styleKeys[_[L]]=[Ih,ed];for(var K=function(ji,ir){return c.styleKeys[ir][0]=td(ji,c.styleKeys[ir][0])},le=function(ji,ir){return c.styleKeys[ir][1]=dl(ji,c.styleKeys[ir][1])},de=function(ji,ir){K(ji,ir),le(ji,ir)},pe=function(ji,ir){for(var Nr=0;Nr<ji.length;Nr++){var Yr=ji.charCodeAt(Nr);K(Yr,ir),le(Yr,ir)}},ze=0;ze<m.length;ze++){var Qe=m[ze],qe=k[Qe];if(null!=qe){var dt=this.properties[Qe],Lt=dt.type,kt=dt.groupKey,mt=void 0;null!=dt.hashOverride?mt=dt.hashOverride(f,qe):null!=qe.pfValue&&(mt=qe.pfValue);var Ft=null==dt.enums?qe.value:null,bt=null!=mt,et=qe.units;!Lt.number||!bt&&null==Ft||Lt.multiple?pe(qe.strValue,kt):(de(-128<(ji=bt?mt:Ft)&&ji<128&&Math.floor(ji)!==ji?2e9-(1024*ji|0):ji,kt),!bt&&null!=et&&pe(et,kt))}}for(var Tt=[Ih,ed],gn=0;gn<_.length;gn++){var ln=c.styleKeys[_[gn]];Tt[0]=td(ln[0],Tt[0]),Tt[1]=dl(ln[1],Tt[1])}c.styleKey=function(c,d){return 2097152*c+d}(Tt[0],Tt[1]);var Sn=c.styleKeys;c.labelDimsKey=nh(Sn.labelDimensions);var Rn=b(f,["label"],Sn.labelDimensions);if(c.labelKey=nh(Rn),c.labelStyleKey=nh(ff(Sn.commonLabel,Rn)),!E){var Jn=b(f,["source-label"],Sn.labelDimensions);c.sourceLabelKey=nh(Jn),c.sourceLabelStyleKey=nh(ff(Sn.commonLabel,Jn));var En=b(f,["target-label"],Sn.labelDimensions);c.targetLabelKey=nh(En),c.targetLabelStyleKey=nh(ff(Sn.commonLabel,En))}if(E){var Yn=c.styleKeys,Mn=Yn.pie,ri=[Yn.nodeBody,Yn.nodeBorder,Yn.backgroundImage,Yn.compound,Mn].filter(function(xi){return null!=xi}).reduce(ff,[Ih,ed]);c.nodeKey=nh(ri),c.hasPie=null!=Mn&&Mn[0]!==Ih&&Mn[1]!==ed}return w!==c.styleKey},clearStyleHints:function(f){var c=f._private;c.styleCxtKey="",c.styleKeys={},c.styleKey=null,c.labelKey=null,c.labelStyleKey=null,c.sourceLabelKey=null,c.sourceLabelStyleKey=null,c.targetLabelKey=null,c.targetLabelStyleKey=null,c.nodeKey=null,c.hasPie=null},applyParsedProperty:function(f,c){var b,d=this,m=c,_=f._private.style,w=d.types,E=d.properties[m.name].type,k=m.bypass,L=_[m.name],G=L&&L.bypass,K=f._private,le="mapping",de=function(li){return null==li?null:null!=li.pfValue?li.pfValue:li.value},pe=function(){var li=de(L),Ci=de(m);d.checkTriggers(f,m.name,li,Ci)};if(m&&"pie"===m.name.substr(0,3)&&he("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===c.name&&f.isEdge()&&("bezier"!==c.value&&f.isLoop()||"haystack"===c.value&&(f.source().isParent()||f.target().isParent()))&&(m=c=this.parse(c.name,"bezier",k)),m.delete)return _[m.name]=void 0,pe(),!0;if(m.deleteBypassed)return L?!!L.bypass&&(L.bypassed=void 0,pe(),!0):(pe(),!0);if(m.deleteBypass)return L?!!L.bypass&&(_[m.name]=L.bypassed,pe(),!0):(pe(),!0);var Ie=function(){he("Do not assign mappings to elements without corresponding data (i.e. ele `"+f.id()+"` has no mapping for property `"+m.name+"` with data field `"+m.field+"`); try a `["+m.field+"]` selector to limit scope to elements with `"+m.field+"` defined")};switch(m.mapped){case w.mapData:for(var Ne=m.field.split("."),ze=K.data,Qe=0;Qe<Ne.length&&ze;Qe++)ze=ze[Ne[Qe]];if(null==ze)return Ie(),!1;var dt;if(!Ut(ze))return he("Do not use continuous mappers without specifying numeric data (i.e. `"+m.field+": "+ze+"` for `"+f.id()+"` is non-numeric)"),!1;var Lt=m.fieldMax-m.fieldMin;if((dt=0===Lt?0:(ze-m.fieldMin)/Lt)<0?dt=0:dt>1&&(dt=1),E.color){var kt=m.valueMin[0],Ft=m.valueMin[1],bt=m.valueMax[1],Ht=m.valueMin[2],Vt=m.valueMax[2],et=m.valueMin[3]??1,Wt=m.valueMax[3]??1,Tt=[Math.round(kt+(m.valueMax[0]-kt)*dt),Math.round(Ft+(bt-Ft)*dt),Math.round(Ht+(Vt-Ht)*dt),Math.round(et+(Wt-et)*dt)];b={bypass:m.bypass,name:m.name,value:Tt,strValue:"rgb("+Tt[0]+", "+Tt[1]+", "+Tt[2]+")"}}else{if(!E.number)return!1;b=this.parse(m.name,m.valueMin+(m.valueMax-m.valueMin)*dt,m.bypass,le)}if(!b)return Ie(),!1;b.mapping=m,m=b;break;case w.data:for(var Kt=m.field.split("."),ln=K.data,Sn=0;Sn<Kt.length&&ln;Sn++)ln=ln[Kt[Sn]];if(null!=ln&&(b=this.parse(m.name,ln,m.bypass,le)),!b)return Ie(),!1;b.mapping=m,m=b;break;case w.fn:var En=null!=m.fnValue?m.fnValue:(0,m.value)(f);if(m.prevFnValue=En,null==En)return he("Custom function mappers may not return null (i.e. `"+m.name+"` for ele `"+f.id()+"` is null)"),!1;if(!(b=this.parse(m.name,En,m.bypass,le)))return he("Custom function mappers may not return invalid values for the property type (i.e. `"+m.name+"` for ele `"+f.id()+"` is invalid)"),!1;b.mapping=$e(m),m=b;break;case void 0:break;default:return!1}return k?(m.bypassed=G?L.bypassed:L,_[m.name]=m):G?L.bypassed=m:_[m.name]=m,pe(),!0},cleanElements:function(f,c){for(var d=0;d<f.length;d++){var m=f[d];if(this.clearStyleHints(m),m.dirtyCompoundBoundsCache(),m.dirtyBoundingBoxCache(),c)for(var _=m._private.style,b=Object.keys(_),w=0;w<b.length;w++){var E=b[w],k=_[E];null!=k&&(k.bypass?k.bypassed=null:_[E]=null)}else m._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(f,c){var d=this,m=f._private,_=f.pstyle("transition-property").value,b=f.pstyle("transition-duration").pfValue,w=f.pstyle("transition-delay").pfValue;if(_.length>0&&b>0){for(var E={},k=!1,L=0;L<_.length;L++){var G=_[L],K=f.pstyle(G),le=c[G];if(le){var pe=le.prev,Ie=null!=le.next?le.next:K,Ne=!1,ze=void 0;!pe||(Ut(pe.pfValue)&&Ut(Ie.pfValue)?ze=pe.pfValue+1e-6*(Ne=Ie.pfValue-pe.pfValue):Ut(pe.value)&&Ut(Ie.value)?ze=pe.value+1e-6*(Ne=Ie.value-pe.value):gt(pe.value)&&gt(Ie.value)&&(Ne=pe.value[0]!==Ie.value[0]||pe.value[1]!==Ie.value[1]||pe.value[2]!==Ie.value[2],ze=pe.strValue),Ne&&(E[G]=Ie.strValue,this.applyBypass(f,G,ze),k=!0))}}if(!k)return;m.transitioning=!0,new na(function(qe){w>0?f.delayAnimation(w).play().promise().then(qe):qe()}).then(function(){return f.animation({style:E,duration:b,easing:f.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){d.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1})}else m.transitioning&&(this.removeBypasses(f,_),f.emitAndNotify("style"),m.transitioning=!1)},checkTrigger:function(f,c,d,m,_,b){var w=this.properties[c],E=_(w);null!=E&&E(d,m)&&b(w)},checkZOrderTrigger:function(f,c,d,m){var _=this;this.checkTrigger(f,c,d,m,function(b){return b.triggersZOrder},function(){_._private.cy.notify("zorder",f)})},checkBoundsTrigger:function(f,c,d,m){this.checkTrigger(f,c,d,m,function(_){return _.triggersBounds},function(_){f.dirtyCompoundBoundsCache(),f.dirtyBoundingBoxCache(),_.triggersBoundsOfParallelBeziers&&("curve-style"===c&&("bezier"===d||"bezier"===m)||"display"===c&&("none"===d||"none"===m))&&f.parallelEdges().forEach(function(b){b.isBundledBezier()&&b.dirtyBoundingBoxCache()})})},checkTriggers:function(f,c,d,m){f.dirtyStyleCache(),this.checkZOrderTrigger(f,c,d,m),this.checkBoundsTrigger(f,c,d,m)}},hc={applyBypass:function(f,c,d,m){var b=[];if("*"===c||"**"===c){if(void 0!==d)for(var E=0;E<this.properties.length;E++){var G=this.parse(this.properties[E].name,d,!0);G&&b.push(G)}}else if(He(c)){var K=this.parse(c,d,!0);K&&b.push(K)}else{if(!Ct(c))return!1;var le=c;m=d;for(var de=Object.keys(le),pe=0;pe<de.length;pe++){var Ie=de[pe],Ne=le[Ie];if(void 0===Ne&&(Ne=le[un(Ie)]),void 0!==Ne){var ze=this.parse(Ie,Ne,!0);ze&&b.push(ze)}}}if(0===b.length)return!1;for(var Qe=!1,qe=0;qe<f.length;qe++){for(var dt=f[qe],Lt={},kt=void 0,mt=0;mt<b.length;mt++){var Ft=b[mt];if(m){var bt=dt.pstyle(Ft.name);kt=Lt[Ft.name]={prev:bt}}Qe=this.applyParsedProperty(dt,$e(Ft))||Qe,m&&(kt.next=dt.pstyle(Ft.name))}Qe&&this.updateStyleHints(dt),m&&this.updateTransitions(dt,Lt,!0)}return Qe},overrideBypass:function(f,c,d){c=Pt(c);for(var m=0;m<f.length;m++){var _=f[m],b=_._private.style[c],w=this.properties[c].type,E=w.color,k=w.mutiple,L=b?null!=b.pfValue?b.pfValue:b.value:null;b&&b.bypass?(b.value=d,null!=b.pfValue&&(b.pfValue=d),b.strValue=E?"rgb("+d.join(",")+")":k?d.join(" "):""+d,this.updateStyleHints(_)):this.applyBypass(_,c,d),this.checkTriggers(_,c,L,d)}},removeAllBypasses:function(f,c){return this.removeBypasses(f,this.propertyNames,c)},removeBypasses:function(f,c,d){for(var _=0;_<f.length;_++){for(var b=f[_],w={},E=0;E<c.length;E++){var k=c[E],L=this.properties[k],G=b.pstyle(L.name);if(G&&G.bypass){var le=this.parse(k,"",!0),de=w[L.name]={prev:G};this.applyParsedProperty(b,le),de.next=b.pstyle(L.name)}}this.updateStyleHints(b),d&&this.updateTransitions(b,w,!0)}}},Pv={getEmSizeInPixels:function(){var f=this.containerCss("font-size");return null!=f?parseFloat(f):1},containerCss:function(f){var d=this._private.cy.container();if(ge&&d&&ge.getComputedStyle)return ge.getComputedStyle(d).getPropertyValue(f)}},yu={getRenderedStyle:function(f,c){return c?this.getStylePropertyValue(f,c,!0):this.getRawStyle(f,!0)},getRawStyle:function(f,c){var d=this;if(f=f[0]){for(var m={},_=0;_<d.properties.length;_++){var b=d.properties[_],w=d.getStylePropertyValue(f,b.name,c);null!=w&&(m[b.name]=w,m[un(b.name)]=w)}return m}},getIndexedStyle:function(f,c,d,m){return f.pstyle(c)[d][m]??f.cy().style().getDefaultProperty(c)[d][0]},getStylePropertyValue:function(f,c,d){if(f=f[0]){var _=this.properties[c];_.alias&&(_=_.pointsTo);var b=_.type,w=f.pstyle(_.name);if(w){var E=w.value,k=w.units,L=w.strValue;if(d&&b.number&&null!=E&&Ut(E)){var G=f.cy().zoom(),K=function(Ne){return Ne*G},le=function(Ne,ze){return K(Ne)+ze},de=gt(E);return(de?k.every(function(Ie){return null!=Ie}):null!=k)?de?E.map(function(Ie,Ne){return le(Ie,k[Ne])}).join(" "):le(E,k):de?E.map(function(Ie){return He(Ie)?Ie:""+K(Ie)}).join(" "):""+K(E)}if(null!=L)return L}return null}},getAnimationStartStyle:function(f,c){for(var d={},m=0;m<c.length;m++){var b=c[m].name,w=f.pstyle(b);void 0!==w&&(w=Ct(w)?this.parse(b,w.strValue):this.parse(b,w)),w&&(d[b]=w)}return d},getPropsList:function(f){var d=[],m=f,_=this.properties;if(m)for(var b=Object.keys(m),w=0;w<b.length;w++){var E=b[w],k=m[E],L=_[E]||_[Pt(E)],G=this.parse(L.name,k);G&&d.push(G)}return d},getNonDefaultPropertiesHash:function(f,c,d){var b,w,E,k,L,m=d.slice();for(k=0;k<c.length;k++)if(null!=(b=f.pstyle(c[k],!1)))if(null!=b.pfValue)m[0]=td(E,m[0]),m[1]=dl(E,m[1]);else for(w=b.strValue,L=0;L<w.length;L++)E=w.charCodeAt(L),m[0]=td(E,m[0]),m[1]=dl(E,m[1]);return m}};yu.getPropertiesHash=yu.getNonDefaultPropertiesHash;var Sl={appendFromJson:function(f){for(var c=this,d=0;d<f.length;d++){var m=f[d],_=m.selector,b=m.style||m.css,w=Object.keys(b);c.selector(_);for(var E=0;E<w.length;E++){var k=w[E];c.css(k,b[k])}}return c},fromJson:function(f){var c=this;return c.resetToDefault(),c.appendFromJson(f),c},json:function(){for(var f=[],c=this.defaultLength;c<this.length;c++){for(var d=this[c],m=d.selector,_=d.properties,b={},w=0;w<_.length;w++){var E=_[w];b[E.name]=E.strValue}f.push({selector:m?m.toString():"core",style:b})}return f}},dc={appendFromString:function(f){var _,b,w,d=this,m=""+f;function E(){m=m.length>_.length?m.substr(_.length):""}function k(){b=b.length>w.length?b.substr(w.length):""}for(m=m.replace(/[/][*](\s|.)+?[*][/]/g,"");!m.match(/^\s*$/);){var G=m.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!G){he("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+m);break}_=G[0];var K=G[1];if("core"!==K&&new sp(K).invalid)he("Skipping parsing of block: Invalid selector found in string stylesheet: "+K),E();else{var de=G[2],pe=!1;b=de;for(var Ie=[];!b.match(/^\s*$/);){var ze=b.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!ze){he("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+de),pe=!0;break}w=ze[0];var Qe=ze[1],qe=ze[2];this.properties[Qe]?d.parse(Qe,qe)?(Ie.push({name:Qe,val:qe}),k()):(he("Skipping property: Invalid property definition in: "+w),k()):(he("Skipping property: Invalid property name in: "+w),k())}if(pe){E();break}d.selector(K);for(var kt=0;kt<Ie.length;kt++){var mt=Ie[kt];d.css(mt.name,mt.val)}E()}}return d},fromString:function(f){var c=this;return c.resetToDefault(),c.appendFromString(f),c}},Io={};(function(){var f=Me,b=function(ri){return"^"+ri+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},w=function(ri){var xi=f+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+ri+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+f+")\\s*\\,\\s*("+f+")\\s*,\\s*("+xi+")\\s*\\,\\s*("+xi+")\\)$"},E=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Io.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:b("data")},layoutData:{mapping:!0,regex:b("layoutData")},scratch:{mapping:!0,regex:b("scratch")},mapData:{mapping:!0,regex:w("mapData")},mapLayoutData:{mapping:!0,regex:w("mapLayoutData")},mapScratch:{mapping:!0,regex:w("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:E,singleRegexMatchValue:!0},urls:{regexes:E,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(ri,xi){switch(ri.length){case 2:return"deg"!==xi[0]&&"rad"!==xi[0]&&"deg"!==xi[1]&&"rad"!==xi[1];case 1:return He(ri[0])||"deg"===xi[0]||"rad"===xi[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*,\\s*("+f+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(ri){var xi=ri.length;return 1===xi||2===xi||4===xi}}};var k={zeroNonZero:function(ri,xi){return(null==ri||null==xi)&&ri!==xi||0==ri&&0!=xi||0!=ri&&0==xi},any:function(ri,xi){return ri!=xi},emptyNonEmpty:function(ri,xi){var ji=Ce(ri),ir=Ce(xi);return ji&&!ir||!ji&&ir}},L=Io.types,G=[{name:"label",type:L.text,triggersBounds:k.any,triggersZOrder:k.emptyNonEmpty},{name:"text-rotation",type:L.textRotation,triggersBounds:k.any},{name:"text-margin-x",type:L.bidirectionalSize,triggersBounds:k.any},{name:"text-margin-y",type:L.bidirectionalSize,triggersBounds:k.any}],K=[{name:"source-label",type:L.text,triggersBounds:k.any},{name:"source-text-rotation",type:L.textRotation,triggersBounds:k.any},{name:"source-text-margin-x",type:L.bidirectionalSize,triggersBounds:k.any},{name:"source-text-margin-y",type:L.bidirectionalSize,triggersBounds:k.any},{name:"source-text-offset",type:L.size,triggersBounds:k.any}],le=[{name:"target-label",type:L.text,triggersBounds:k.any},{name:"target-text-rotation",type:L.textRotation,triggersBounds:k.any},{name:"target-text-margin-x",type:L.bidirectionalSize,triggersBounds:k.any},{name:"target-text-margin-y",type:L.bidirectionalSize,triggersBounds:k.any},{name:"target-text-offset",type:L.size,triggersBounds:k.any}],de=[{name:"font-family",type:L.fontFamily,triggersBounds:k.any},{name:"font-style",type:L.fontStyle,triggersBounds:k.any},{name:"font-weight",type:L.fontWeight,triggersBounds:k.any},{name:"font-size",type:L.size,triggersBounds:k.any},{name:"text-transform",type:L.textTransform,triggersBounds:k.any},{name:"text-wrap",type:L.textWrap,triggersBounds:k.any},{name:"text-overflow-wrap",type:L.textOverflowWrap,triggersBounds:k.any},{name:"text-max-width",type:L.size,triggersBounds:k.any},{name:"text-outline-width",type:L.size,triggersBounds:k.any},{name:"line-height",type:L.positiveNumber,triggersBounds:k.any}],pe=[{name:"text-valign",type:L.valign,triggersBounds:k.any},{name:"text-halign",type:L.halign,triggersBounds:k.any},{name:"color",type:L.color},{name:"text-outline-color",type:L.color},{name:"text-outline-opacity",type:L.zeroOneNumber},{name:"text-background-color",type:L.color},{name:"text-background-opacity",type:L.zeroOneNumber},{name:"text-background-padding",type:L.size,triggersBounds:k.any},{name:"text-border-opacity",type:L.zeroOneNumber},{name:"text-border-color",type:L.color},{name:"text-border-width",type:L.size,triggersBounds:k.any},{name:"text-border-style",type:L.borderStyle,triggersBounds:k.any},{name:"text-background-shape",type:L.textBackgroundShape,triggersBounds:k.any},{name:"text-justification",type:L.justification}],Ie=[{name:"events",type:L.bool},{name:"text-events",type:L.bool}],Ne=[{name:"display",type:L.display,triggersZOrder:k.any,triggersBounds:k.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:L.visibility,triggersZOrder:k.any},{name:"opacity",type:L.zeroOneNumber,triggersZOrder:k.zeroNonZero},{name:"text-opacity",type:L.zeroOneNumber},{name:"min-zoomed-font-size",type:L.size},{name:"z-compound-depth",type:L.zCompoundDepth,triggersZOrder:k.any},{name:"z-index-compare",type:L.zIndexCompare,triggersZOrder:k.any},{name:"z-index",type:L.nonNegativeInt,triggersZOrder:k.any}],ze=[{name:"overlay-padding",type:L.size,triggersBounds:k.any},{name:"overlay-color",type:L.color},{name:"overlay-opacity",type:L.zeroOneNumber,triggersBounds:k.zeroNonZero},{name:"overlay-shape",type:L.overlayShape,triggersBounds:k.any}],Qe=[{name:"underlay-padding",type:L.size,triggersBounds:k.any},{name:"underlay-color",type:L.color},{name:"underlay-opacity",type:L.zeroOneNumber,triggersBounds:k.zeroNonZero},{name:"underlay-shape",type:L.overlayShape,triggersBounds:k.any}],qe=[{name:"transition-property",type:L.propList},{name:"transition-duration",type:L.time},{name:"transition-delay",type:L.time},{name:"transition-timing-function",type:L.easing}],dt=function(ri,xi){return"label"===xi.value?-ri.poolIndex():xi.pfValue},Lt=[{name:"height",type:L.nodeSize,triggersBounds:k.any,hashOverride:dt},{name:"width",type:L.nodeSize,triggersBounds:k.any,hashOverride:dt},{name:"shape",type:L.nodeShape,triggersBounds:k.any},{name:"shape-polygon-points",type:L.polygonPointList,triggersBounds:k.any},{name:"background-color",type:L.color},{name:"background-fill",type:L.fill},{name:"background-opacity",type:L.zeroOneNumber},{name:"background-blacken",type:L.nOneOneNumber},{name:"background-gradient-stop-colors",type:L.colors},{name:"background-gradient-stop-positions",type:L.percentages},{name:"background-gradient-direction",type:L.gradientDirection},{name:"padding",type:L.sizeMaybePercent,triggersBounds:k.any},{name:"padding-relative-to",type:L.paddingRelativeTo,triggersBounds:k.any},{name:"bounds-expansion",type:L.boundsExpansion,triggersBounds:k.any}],kt=[{name:"border-color",type:L.color},{name:"border-opacity",type:L.zeroOneNumber},{name:"border-width",type:L.size,triggersBounds:k.any},{name:"border-style",type:L.borderStyle}],mt=[{name:"background-image",type:L.urls},{name:"background-image-crossorigin",type:L.bgCrossOrigin},{name:"background-image-opacity",type:L.zeroOneNumbers},{name:"background-image-containment",type:L.bgContainment},{name:"background-image-smoothing",type:L.bools},{name:"background-position-x",type:L.bgPos},{name:"background-position-y",type:L.bgPos},{name:"background-width-relative-to",type:L.bgRelativeTo},{name:"background-height-relative-to",type:L.bgRelativeTo},{name:"background-repeat",type:L.bgRepeat},{name:"background-fit",type:L.bgFit},{name:"background-clip",type:L.bgClip},{name:"background-width",type:L.bgWH},{name:"background-height",type:L.bgWH},{name:"background-offset-x",type:L.bgPos},{name:"background-offset-y",type:L.bgPos}],Ft=[{name:"position",type:L.position,triggersBounds:k.any},{name:"compound-sizing-wrt-labels",type:L.compoundIncludeLabels,triggersBounds:k.any},{name:"min-width",type:L.size,triggersBounds:k.any},{name:"min-width-bias-left",type:L.sizeMaybePercent,triggersBounds:k.any},{name:"min-width-bias-right",type:L.sizeMaybePercent,triggersBounds:k.any},{name:"min-height",type:L.size,triggersBounds:k.any},{name:"min-height-bias-top",type:L.sizeMaybePercent,triggersBounds:k.any},{name:"min-height-bias-bottom",type:L.sizeMaybePercent,triggersBounds:k.any}],bt=[{name:"line-style",type:L.lineStyle},{name:"line-color",type:L.color},{name:"line-fill",type:L.fill},{name:"line-cap",type:L.lineCap},{name:"line-opacity",type:L.zeroOneNumber},{name:"line-dash-pattern",type:L.numbers},{name:"line-dash-offset",type:L.number},{name:"line-gradient-stop-colors",type:L.colors},{name:"line-gradient-stop-positions",type:L.percentages},{name:"curve-style",type:L.curveStyle,triggersBounds:k.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:L.zeroOneNumber,triggersBounds:k.any},{name:"source-endpoint",type:L.edgeEndpoint,triggersBounds:k.any},{name:"target-endpoint",type:L.edgeEndpoint,triggersBounds:k.any},{name:"control-point-step-size",type:L.size,triggersBounds:k.any},{name:"control-point-distances",type:L.bidirectionalSizes,triggersBounds:k.any},{name:"control-point-weights",type:L.numbers,triggersBounds:k.any},{name:"segment-distances",type:L.bidirectionalSizes,triggersBounds:k.any},{name:"segment-weights",type:L.numbers,triggersBounds:k.any},{name:"taxi-turn",type:L.bidirectionalSizeMaybePercent,triggersBounds:k.any},{name:"taxi-turn-min-distance",type:L.size,triggersBounds:k.any},{name:"taxi-direction",type:L.axisDirection,triggersBounds:k.any},{name:"edge-distances",type:L.edgeDistances,triggersBounds:k.any},{name:"arrow-scale",type:L.positiveNumber,triggersBounds:k.any},{name:"loop-direction",type:L.angle,triggersBounds:k.any},{name:"loop-sweep",type:L.angle,triggersBounds:k.any},{name:"source-distance-from-node",type:L.size,triggersBounds:k.any},{name:"target-distance-from-node",type:L.size,triggersBounds:k.any}],Ht=[{name:"ghost",type:L.bool,triggersBounds:k.any},{name:"ghost-offset-x",type:L.bidirectionalSize,triggersBounds:k.any},{name:"ghost-offset-y",type:L.bidirectionalSize,triggersBounds:k.any},{name:"ghost-opacity",type:L.zeroOneNumber}],Vt=[{name:"selection-box-color",type:L.color},{name:"selection-box-opacity",type:L.zeroOneNumber},{name:"selection-box-border-color",type:L.color},{name:"selection-box-border-width",type:L.size},{name:"active-bg-color",type:L.color},{name:"active-bg-opacity",type:L.zeroOneNumber},{name:"active-bg-size",type:L.size},{name:"outside-texture-bg-color",type:L.color},{name:"outside-texture-bg-opacity",type:L.zeroOneNumber}],et=[];Io.pieBackgroundN=16,et.push({name:"pie-size",type:L.sizeMaybePercent});for(var Wt=1;Wt<=Io.pieBackgroundN;Wt++)et.push({name:"pie-"+Wt+"-background-color",type:L.color}),et.push({name:"pie-"+Wt+"-background-size",type:L.percent}),et.push({name:"pie-"+Wt+"-background-opacity",type:L.zeroOneNumber});var Tt=[],gn=Io.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:L.arrowShape,triggersBounds:k.any},{name:"arrow-color",type:L.color},{name:"arrow-fill",type:L.arrowFill}].forEach(function(Mn){gn.forEach(function(ri){Tt.push({name:ri+"-"+Mn.name,type:Mn.type,triggersBounds:Mn.triggersBounds})})},{});var Kt=Io.properties=[].concat(Ie,qe,Ne,ze,Qe,Ht,pe,de,G,K,le,Lt,kt,mt,et,Ft,bt,Tt,Vt),ln=Io.propertyGroups={behavior:Ie,transition:qe,visibility:Ne,overlay:ze,underlay:Qe,ghost:Ht,commonLabel:pe,labelDimensions:de,mainLabel:G,sourceLabel:K,targetLabel:le,nodeBody:Lt,nodeBorder:kt,backgroundImage:mt,pie:et,compound:Ft,edgeLine:bt,edgeArrow:Tt,core:Vt},Sn=Io.propertyGroupNames={};(Io.propertyGroupKeys=Object.keys(ln)).forEach(function(Mn){Sn[Mn]=ln[Mn].map(function(ri){return ri.name}),ln[Mn].forEach(function(ri){return ri.groupKey=Mn})});var Jn=Io.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Io.propertyNames=Kt.map(function(Mn){return Mn.name});for(var En=0;En<Kt.length;En++){var Yn=Kt[En];Kt[Yn.name]=Yn}for(var li=0;li<Jn.length;li++){var Ci=Jn[li],hi={name:Ci.name,alias:!0,pointsTo:Kt[Ci.pointsTo]};Kt.push(hi),Kt[Ci.name]=hi}})(),Io.getDefaultProperty=function(f){return this.getDefaultProperties()[f]},Io.getDefaultProperties=function(){var f=this._private;if(null!=f.defaultProperties)return f.defaultProperties;for(var c=er({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(k,L){for(var G=1;G<=Io.pieBackgroundN;G++)k[L.name.replace("{{i}}",G)]=L.value;return k},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(k,L){return Io.arrowPrefixes.forEach(function(G){k[G+"-"+L.name]=L.value}),k},{})),d={},m=0;m<this.properties.length;m++){var _=this.properties[m];if(!_.pointsTo){var b=_.name,E=this.parse(b,c[b]);d[b]=E}}return f.defaultProperties=d,f.defaultProperties},Io.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var km={parse:function(f,c,d,m){var _=this;if(ft(c))return _.parseImplWarn(f,c,d,m);var G,k=Tg(f,""+c,d?"t":"f","mapping"===m||!0===m||!1===m||null==m?"dontcare":m),L=_.propCache=_.propCache||[];return(G=L[k])||(G=L[k]=_.parseImplWarn(f,c,d,m)),(d||"mapping"===m)&&(G=$e(G))&&(G.value=$e(G.value)),G},parseImplWarn:function(f,c,d,m){var _=this.parseImpl(f,c,d,m);return!_&&null!=c&&he("The style property `".concat(f,": ").concat(c,"` is invalid")),_&&("width"===_.name||"height"===_.name)&&"label"===c&&he("The style value of `label` is deprecated for `"+_.name+"`"),_}};km.parseImpl=function(f,c,d,m){var _=this;f=Pt(f);var b=_.properties[f],w=c,E=_.types;if(!b||void 0===c)return null;b.alias&&(f=(b=b.pointsTo).name);var k=He(c);k&&(c=c.trim());var G,K,L=b.type;if(!L)return null;if(d&&(""===c||null===c))return{name:f,value:c,bypass:!0,deleteBypass:!0};if(ft(c))return{name:f,value:c,strValue:"fn",mapped:E.fn,bypass:d};if(!(!k||m||c.length<7||"a"!==c[1])){if(c.length>=7&&"d"===c[0]&&(G=new RegExp(E.data.regex).exec(c)))return!d&&{name:f,value:G,strValue:""+c,mapped:E.data,field:G[1],bypass:d};if(c.length>=10&&"m"===c[0]&&(K=new RegExp(E.mapData.regex).exec(c))){if(d||L.multiple)return!1;var de=E.mapData;if(!L.color&&!L.number)return!1;var pe=this.parse(f,K[4]);if(!pe||pe.mapped)return!1;var Ie=this.parse(f,K[5]);if(!Ie||Ie.mapped)return!1;if(pe.pfValue===Ie.pfValue||pe.strValue===Ie.strValue)return he("`"+f+": "+c+"` is not a valid mapper because the output range is zero; converting to `"+f+": "+pe.strValue+"`"),this.parse(f,pe.strValue);if(L.color){var Ne=pe.value,ze=Ie.value;if(!(Ne[0]!==ze[0]||Ne[1]!==ze[1]||Ne[2]!==ze[2]||Ne[3]!==ze[3]&&(null!=Ne[3]&&1!==Ne[3]||null!=ze[3]&&1!==ze[3])))return!1}return{name:f,value:K,strValue:""+c,mapped:de,field:K[1],fieldMin:parseFloat(K[2]),fieldMax:parseFloat(K[3]),valueMin:pe.value,valueMax:Ie.value,bypass:d}}}if(L.multiple&&"multiple"!==m){var qe;if(qe=k?c.split(/\s+/):gt(c)?c:[c],L.evenMultiple&&qe.length%2!=0)return null;for(var dt=[],Lt=[],kt=[],mt="",Ft=!1,bt=0;bt<qe.length;bt++){var Ht=_.parse(f,qe[bt],d,"multiple");Ft=Ft||He(Ht.value),dt.push(Ht.value),kt.push(null!=Ht.pfValue?Ht.pfValue:Ht.value),Lt.push(Ht.units),mt+=(bt>0?" ":"")+Ht.strValue}return L.validate&&!L.validate(dt,Lt)?null:L.singleEnum&&Ft?1===dt.length&&He(dt[0])?{name:f,value:dt[0],strValue:dt[0],bypass:d}:null:{name:f,value:dt,pfValue:kt,strValue:mt,bypass:d,units:Lt}}var Vt=function(){for(var xi=0;xi<L.enums.length;xi++)if(L.enums[xi]===c)return{name:f,value:c,strValue:""+c,bypass:d};return null};if(L.number){var et,Wt="px";if(L.units&&(et=L.units),L.implicitUnits&&(Wt=L.implicitUnits),!L.unitless)if(k){var Tt="px|em"+(L.allowPercent?"|\\%":"");et&&(Tt=et);var gn=c.match("^("+Me+")("+Tt+")?$");gn&&(c=gn[1],et=gn[2]||Wt)}else(!et||L.implicitUnits)&&(et=Wt);if(c=parseFloat(c),isNaN(c)&&void 0===L.enums)return null;if(isNaN(c)&&void 0!==L.enums)return c=w,Vt();if(L.integer&&!function(c){return Ut(c)&&Math.floor(c)===c}(c)||void 0!==L.min&&(c<L.min||L.strictMin&&c===L.min)||void 0!==L.max&&(c>L.max||L.strictMax&&c===L.max))return null;var Kt={name:f,value:c,strValue:""+c+(et||""),units:et,bypass:d};return Kt.pfValue=L.unitless||"px"!==et&&"em"!==et?c:"px"!==et&&et?this.getEmSizeInPixels()*c:c,("ms"===et||"s"===et)&&(Kt.pfValue="ms"===et?c:1e3*c),("deg"===et||"rad"===et)&&(Kt.pfValue="rad"===et?c:function(c){return Math.PI*c/180}(c)),"%"===et&&(Kt.pfValue=c/100),Kt}if(L.propList){var ln=[],Sn=""+c;if("none"!==Sn){for(var Rn=Sn.split(/\s*,\s*|\s+/),Jn=0;Jn<Rn.length;Jn++){var En=Rn[Jn].trim();_.properties[En]?ln.push(En):he("`"+En+"` is not a valid property name")}if(0===ln.length)return null}return{name:f,value:ln,strValue:0===ln.length?"none":ln.join(" "),bypass:d}}if(L.color){var Yn=function(c){return(gt(c)?c:null)||function(c){return th[c.toLowerCase()]}(c)||function(c){if((4===c.length||7===c.length)&&"#"===c[0]){var m,_,b,w=16;return 4===c.length?(m=parseInt(c[1]+c[1],w),_=parseInt(c[2]+c[2],w),b=parseInt(c[3]+c[3],w)):(m=parseInt(c[1]+c[2],w),_=parseInt(c[3]+c[4],w),b=parseInt(c[5]+c[6],w)),[m,_,b]}}(c)||function(c){var d,m=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(m){d=[];for(var _=[],b=1;b<=3;b++){var w=m[b];if("%"===w[w.length-1]&&(_[b]=!0),w=parseFloat(w),_[b]&&(w=w/100*255),w<0||w>255)return;d.push(Math.floor(w))}if((_[1]||_[2]||_[3])&&!(_[1]&&_[2]&&_[3]))return;var L=m[4];if(void 0!==L){if((L=parseFloat(L))<0||L>1)return;d.push(L)}}return d}(c)||function(c){var d,m,_,b,w,E,k,L;function G(pe,Ie,Ne){return Ne<0&&(Ne+=1),Ne>1&&(Ne-=1),Ne<1/6?pe+6*(Ie-pe)*Ne:Ne<.5?Ie:Ne<2/3?pe+(Ie-pe)*(2/3-Ne)*6:pe}var K=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(c);if(K){if((m=parseInt(K[1]))<0?m=(360- -1*m%360)%360:m>360&&(m%=360),m/=360,(_=parseFloat(K[2]))<0||_>100||(_/=100,(b=parseFloat(K[3]))<0||b>100)||(b/=100,void 0!==(w=K[4])&&((w=parseFloat(w))<0||w>1)))return;if(0===_)E=k=L=Math.round(255*b);else{var le=b<.5?b*(1+_):b+_-b*_,de=2*b-le;E=Math.round(255*G(de,le,m+1/3)),k=Math.round(255*G(de,le,m)),L=Math.round(255*G(de,le,m-1/3))}d=[E,k,L,w]}return d}(c)}(c);return Yn?{name:f,value:Yn,pfValue:Yn,strValue:"rgb("+Yn[0]+","+Yn[1]+","+Yn[2]+")",bypass:d}:null}if(L.regex||L.regexes){if(L.enums){var li=Vt();if(li)return li}for(var Ci=L.regexes?L.regexes:[L.regex],pi=0;pi<Ci.length;pi++){var Mn=new RegExp(Ci[pi]).exec(c);if(Mn)return{name:f,value:L.singleRegexMatchValue?Mn[1]:Mn,strValue:""+c,bypass:d}}return null}return L.string?{name:f,value:""+c,strValue:""+c,bypass:d}:L.enums?Vt():null};var tc=function f(c){if(!(this instanceof f))return new f(c);bn(c)?(this._private={cy:c,coreStyle:{}},this.length=0,this.resetToDefault()):it("A style must have a core reference")},zl=tc.prototype;zl.instanceString=function(){return"style"},zl.clear=function(){for(var f=this._private,d=f.cy.elements(),m=0;m<this.length;m++)this[m]=void 0;return this.length=0,f.contextStyles={},f.propDiffs={},this.cleanElements(d,!0),d.forEach(function(_){var b=_[0]._private;b.styleDirty=!0,b.appliedInitStyle=!1}),this},zl.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},zl.core=function(f){return this._private.coreStyle[f]||this.getDefaultProperty(f)},zl.selector=function(f){var c="core"===f?null:new sp(f),d=this.length++;return this[d]={selector:c,properties:[],mappedProperties:[],index:d},this},zl.css=function(){var f=this,c=arguments;if(1===c.length)for(var d=c[0],m=0;m<f.properties.length;m++){var _=f.properties[m],b=d[_.name];void 0===b&&(b=d[un(_.name)]),void 0!==b&&this.cssRule(_.name,b)}else 2===c.length&&this.cssRule(c[0],c[1]);return this},zl.style=zl.css,zl.cssRule=function(f,c){var d=this.parse(f,c);if(d){var m=this.length-1;this[m].properties.push(d),this[m].properties[d.name]=d,d.name.match(/pie-(\d+)-background-size/)&&d.value&&(this._private.hasPie=!0),d.mapped&&this[m].mappedProperties.push(d),!this[m].selector&&(this._private.coreStyle[d.name]=d)}return this},zl.append=function(f){return yn(f)?f.appendToStyle(this):gt(f)?this.appendFromJson(f):He(f)&&this.appendFromString(f),this},tc.fromJson=function(f,c){var d=new tc(f);return d.fromJson(c),d},tc.fromString=function(f,c){return new tc(f).fromString(c)},[Pa,hc,Pv,yu,Sl,dc,Io,km].forEach(function(f){er(zl,f)}),tc.types=zl.types,tc.properties=zl.properties,tc.propertyGroups=zl.propertyGroups,tc.propertyGroupNames=zl.propertyGroupNames,tc.propertyGroupKeys=zl.propertyGroupKeys;var Xg={style:function(c){return c&&this.setStyle(c).update(),this._private.style},setStyle:function(c){var d=this._private;return d.style=yn(c)?c.generateStyle(this):gt(c)?tc.fromJson(this,c):He(c)?tc.fromString(this,c):tc(this),d.style},updateStyle:function(){this.mutableElements().updateStyle()}},Vh={autolock:function(c){return void 0===c?this._private.autolock:(this._private.autolock=!!c,this)},autoungrabify:function(c){return void 0===c?this._private.autoungrabify:(this._private.autoungrabify=!!c,this)},autounselectify:function(c){return void 0===c?this._private.autounselectify:(this._private.autounselectify=!!c,this)},selectionType:function(c){var d=this._private;return null==d.selectionType&&(d.selectionType="single"),void 0===c?d.selectionType:(("additive"===c||"single"===c)&&(d.selectionType=c),this)},panningEnabled:function(c){return void 0===c?this._private.panningEnabled:(this._private.panningEnabled=!!c,this)},userPanningEnabled:function(c){return void 0===c?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!c,this)},zoomingEnabled:function(c){return void 0===c?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!c,this)},userZoomingEnabled:function(c){return void 0===c?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!c,this)},boxSelectionEnabled:function(c){return void 0===c?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!c,this)},pan:function(){var m,_,b,w,E,c=arguments,d=this._private.pan;switch(c.length){case 0:return d;case 1:if(He(c[0]))return d[m=c[0]];if(Ct(c[0])){if(!this._private.panningEnabled)return this;E=(b=c[0]).y,Ut(w=b.x)&&(d.x=w),Ut(E)&&(d.y=E),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;_=c[1],("x"===(m=c[0])||"y"===m)&&Ut(_)&&(d[m]=_),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(c,d){var b,w,E,k,L,m=arguments,_=this._private.pan;if(!this._private.panningEnabled)return this;switch(m.length){case 1:Ct(c)&&(L=(E=m[0]).y,Ut(k=E.x)&&(_.x+=k),Ut(L)&&(_.y+=L),this.emit("pan viewport"));break;case 2:w=d,("x"===(b=c)||"y"===b)&&Ut(w)&&(_[b]+=w),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(c,d){var m=this.getFitViewport(c,d);if(m){var _=this._private;_.zoom=m.zoom,_.pan=m.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(c,d){var m;if((Ut(c)&&void 0===d&&(d=c,c=void 0),this._private.panningEnabled&&this._private.zoomingEnabled)&&(He(c)?c=this.$(c):!function(c){return Ct(c)&&Ut(c.x1)&&Ut(c.x2)&&Ut(c.y1)&&Ut(c.y2)}(c)?nn(c)||(c=this.mutableElements()):((m={x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2}).w=m.x2-m.x1,m.h=m.y2-m.y1),!nn(c)||!c.empty())){m=m||c.boundingBox();var k,w=this.width(),E=this.height();if(d=Ut(d)?d:0,!isNaN(w)&&!isNaN(E)&&w>0&&E>0&&!isNaN(m.w)&&!isNaN(m.h)&&m.w>0&&m.h>0)return{zoom:k=(k=(k=Math.min((w-2*d)/m.w,(E-2*d)/m.h))>this._private.maxZoom?this._private.maxZoom:k)<this._private.minZoom?this._private.minZoom:k,pan:{x:(w-k*(m.x1+m.x2))/2,y:(E-k*(m.y1+m.y2))/2}}}},zoomRange:function(c,d){var m=this._private;if(null==d){var _=c;c=_.min,d=_.max}return Ut(c)&&Ut(d)&&c<=d?(m.minZoom=c,m.maxZoom=d):Ut(c)&&void 0===d&&c<=m.maxZoom?m.minZoom=c:Ut(d)&&void 0===c&&d>=m.minZoom&&(m.maxZoom=d),this},minZoom:function(c){return void 0===c?this._private.minZoom:this.zoomRange({min:c})},maxZoom:function(c){return void 0===c?this._private.maxZoom:this.zoomRange({max:c})},getZoomedViewport:function(c){var b,w,d=this._private,m=d.pan,_=d.zoom,E=!1;return d.zoomingEnabled||(E=!0),Ut(c)?w=c:Ct(c)&&(w=c.level,null!=c.position?b=jo(c.position,_,m):null!=c.renderedPosition&&(b=c.renderedPosition),null!=b&&!d.panningEnabled&&(E=!0)),w=(w=w>d.maxZoom?d.maxZoom:w)<d.minZoom?d.minZoom:w,!E&&Ut(w)&&w!==_&&(null==b||Ut(b.x)&&Ut(b.y))?null!=b?{zoomed:!0,panned:!0,zoom:w,pan:{x:-w/_*(b.x-m.x)+b.x,y:-w/_*(b.y-m.y)+b.y}}:{zoomed:!0,panned:!1,zoom:w,pan:m}:null},zoom:function(c){if(void 0===c)return this._private.zoom;var d=this.getZoomedViewport(c),m=this._private;return null!=d&&d.zoomed?(m.zoom=d.zoom,d.panned&&(m.pan.x=d.pan.x,m.pan.y=d.pan.y),this.emit("zoom"+(d.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(c){var d=this._private,m=!0,_=!0,b=[],w=!1,E=!1;if(!c)return this;if(Ut(c.zoom)||(m=!1),Ct(c.pan)||(_=!1),!m&&!_)return this;if(m){var k=c.zoom;k<d.minZoom||k>d.maxZoom||!d.zoomingEnabled?w=!0:(d.zoom=k,b.push("zoom"))}if(_&&(!w||!c.cancelOnFailedZoom)&&d.panningEnabled){var L=c.pan;Ut(L.x)&&(d.pan.x=L.x,E=!1),Ut(L.y)&&(d.pan.y=L.y,E=!1),E||b.push("pan")}return b.length>0&&(b.push("viewport"),this.emit(b.join(" ")),this.notify("viewport")),this},center:function(c){var d=this.getCenterPan(c);return d&&(this._private.pan=d,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(c,d){if(this._private.panningEnabled){if(He(c)){var m=c;c=this.mutableElements().filter(m)}else nn(c)||(c=this.mutableElements());if(0!==c.length){var _=c.boundingBox(),b=this.width(),w=this.height();return{x:(b-(d=void 0===d?this._private.zoom:d)*(_.x1+_.x2))/2,y:(w-d*(_.y1+_.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var m,_,c=this._private,d=c.container;return c.sizeCache=c.sizeCache||(d?(m=ge.getComputedStyle(d),{width:d.clientWidth-(_=function(w){return parseFloat(m.getPropertyValue(w))})("padding-left")-_("padding-right"),height:d.clientHeight-_("padding-top")-_("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var c=this._private.pan,d=this._private.zoom,m=this.renderedExtent(),_={x1:(m.x1-c.x)/d,x2:(m.x2-c.x)/d,y1:(m.y1-c.y)/d,y2:(m.y2-c.y)/d};return _.w=_.x2-_.x1,_.h=_.y2-_.y1,_},renderedExtent:function(){var c=this.width(),d=this.height();return{x1:0,y1:0,x2:c,y2:d,w:c,h:d}},multiClickDebounceTime:function(c){return c?(this._private.multiClickDebounceTime=c,this):this._private.multiClickDebounceTime}};Vh.centre=Vh.center,Vh.autolockNodes=Vh.autolock,Vh.autoungrabifyNodes=Vh.autoungrabify;var Js={data:vs.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:vs.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:vs.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:vs.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Js.attr=Js.data,Js.removeAttr=Js.removeData;var fc=function(c){var d=this,m=(c=er({},c)).container;m&&!Jt(m)&&Jt(m[0])&&(m=m[0]);var _=m?m._cyreg:null;(_=_||{})&&_.cy&&(_.cy.destroy(),_={});var b=_.readies=_.readies||[];m&&(m._cyreg=_),_.cy=d;var w=void 0!==ge&&void 0!==m&&!c.headless,E=c;E.layout=er({name:w?"grid":"null"},E.layout),E.renderer=er({name:w?"canvas":"null"},E.renderer);var k=function(pe,Ie,Ne){return void 0!==Ie?Ie:void 0!==Ne?Ne:pe},L=this._private={container:m,ready:!1,options:E,elements:new oa(this),listeners:[],aniEles:new oa(this),data:E.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:k(!0,E.zoomingEnabled),userZoomingEnabled:k(!0,E.userZoomingEnabled),panningEnabled:k(!0,E.panningEnabled),userPanningEnabled:k(!0,E.userPanningEnabled),boxSelectionEnabled:k(!0,E.boxSelectionEnabled),autolock:k(!1,E.autolock,E.autolockNodes),autoungrabify:k(!1,E.autoungrabify,E.autoungrabifyNodes),autounselectify:k(!1,E.autounselectify),styleEnabled:void 0===E.styleEnabled?w:E.styleEnabled,zoom:Ut(E.zoom)?E.zoom:1,pan:{x:Ct(E.pan)&&Ut(E.pan.x)?E.pan.x:0,y:Ct(E.pan)&&Ut(E.pan.y)?E.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:k(250,E.multiClickDebounceTime)};this.createEmitter(),this.selectionType(E.selectionType),this.zoomRange({min:E.minZoom,max:E.maxZoom}),L.styleEnabled&&d.setStyle([]);var K=er({},E,E.renderer);d.initRenderer(K),function(pe,Ie){if(pe.some(ci))return na.all(pe).then(Ie);Ie(pe)}([E.style,E.elements],function(de){var pe=de[0],Ie=de[1];L.styleEnabled&&d.style().append(pe),function(pe,Ie,Ne){d.notifications(!1);var ze=d.mutableElements();ze.length>0&&ze.remove(),null!=pe&&(Ct(pe)||gt(pe))&&d.add(pe),d.one("layoutready",function(qe){d.notifications(!0),d.emit(qe),d.one("load",Ie),d.emitAndNotify("load")}).one("layoutstop",function(){d.one("done",Ne),d.emit("done")});var Qe=er({},d._private.options.layout);Qe.eles=d.elements(),d.layout(Qe).run()}(Ie,function(){d.startAnimationLoop(),L.ready=!0,ft(E.ready)&&d.on("ready",E.ready);for(var Ne=0;Ne<b.length;Ne++)d.on("ready",b[Ne]);_&&(_.readies=[]),d.emit("ready")},E.done)})},fh=fc.prototype;er(fh,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(c){return this.isReady()?this.emitter().emit("ready",[],c):this.on("ready",c),this},destroy:function(){var c=this;if(!c.destroyed())return c.stopAnimationLoop(),c.destroyRenderer(),this.emit("destroy"),c._private.destroyed=!0,c},hasElementWithId:function(c){return this._private.elements.hasElementWithId(c)},getElementById:function(c){return this._private.elements.getElementById(c)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(c){return this._private.elements.merge(c),this},removeFromPool:function(c){return this._private.elements.unmerge(c),this},container:function(){return this._private.container||null},mount:function(c){if(null!=c){var d=this,m=d._private,_=m.options;return!Jt(c)&&Jt(c[0])&&(c=c[0]),d.stopAnimationLoop(),d.destroyRenderer(),m.container=c,m.styleEnabled=!0,d.invalidateSize(),d.initRenderer(er({},_,_.renderer,{name:"null"===_.renderer.name?"canvas":_.renderer.name})),d.startAnimationLoop(),d.style(_.style),d.emit("mount"),d}},unmount:function(){var c=this;return c.stopAnimationLoop(),c.destroyRenderer(),c.initRenderer({name:"null"}),c.emit("unmount"),c},options:function(){return $e(this._private.options)},json:function(c){var d=this,m=d._private,_=d.mutableElements();if(Ct(c)){if(d.startBatch(),c.elements){var w={},E=function(dt,Lt){for(var kt=[],mt=[],Ft=0;Ft<dt.length;Ft++){var bt=dt[Ft];if(bt.data.id){var Ht=""+bt.data.id,Vt=d.getElementById(Ht);w[Ht]=!0,0!==Vt.length?mt.push({ele:Vt,json:bt}):(Lt&&(bt.group=Lt),kt.push(bt))}else he("cy.json() cannot handle elements without an ID attribute")}d.add(kt);for(var et=0;et<mt.length;et++){var Wt=mt[et];Wt.ele.json(Wt.json)}};if(gt(c.elements))E(c.elements);else for(var k=["nodes","edges"],L=0;L<k.length;L++){var G=k[L],K=c.elements[G];gt(K)&&E(K,G)}var le=d.collection();_.filter(function(qe){return!w[qe.id()]}).forEach(function(qe){qe.isParent()?le.merge(qe):qe.remove()}),le.forEach(function(qe){return qe.children().move({parent:null})}),le.forEach(function(qe){return(dt=qe,d.getElementById(dt.id())).remove();var dt})}c.style&&d.style(c.style),null!=c.zoom&&c.zoom!==m.zoom&&d.zoom(c.zoom),c.pan&&(c.pan.x!==m.pan.x||c.pan.y!==m.pan.y)&&d.pan(c.pan),c.data&&d.data(c.data);for(var de=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],pe=0;pe<de.length;pe++){var Ie=de[pe];null!=c[Ie]&&d[Ie](c[Ie])}return d.endBatch(),this}var ze={};c?ze.elements=this.elements().map(function(qe){return qe.json()}):(ze.elements={},_.forEach(function(qe){var dt=qe.group();ze.elements[dt]||(ze.elements[dt]=[]),ze.elements[dt].push(qe.json())})),this._private.styleEnabled&&(ze.style=d.style().json()),ze.data=$e(d.data());var Qe=m.options;return ze.zoomingEnabled=m.zoomingEnabled,ze.userZoomingEnabled=m.userZoomingEnabled,ze.zoom=m.zoom,ze.minZoom=m.minZoom,ze.maxZoom=m.maxZoom,ze.panningEnabled=m.panningEnabled,ze.userPanningEnabled=m.userPanningEnabled,ze.pan=$e(m.pan),ze.boxSelectionEnabled=m.boxSelectionEnabled,ze.renderer=$e(Qe.renderer),ze.hideEdgesOnViewport=Qe.hideEdgesOnViewport,ze.textureOnViewport=Qe.textureOnViewport,ze.wheelSensitivity=Qe.wheelSensitivity,ze.motionBlur=Qe.motionBlur,ze.multiClickDebounceTime=Qe.multiClickDebounceTime,ze}}),fh.$id=fh.getElementById,[Os,La,Bu,$d,Ua,vu,Vu,Il,Xg,Vh,Js].forEach(function(f){er(fh,f)});var dp={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}},Uh=function(c){return c.scratch("breadthfirst")},_u=function(c,d){return c.scratch("breadthfirst",d)};function Ef(f){this.options=er({},dp,f)}Ef.prototype.run=function(){var L,f=this.options,c=f,d=f.cy,m=c.eles,_=m.nodes().filter(function(pr){return!pr.isParent()}),b=m,w=c.directed,E=c.maximal||c.maximalAdjustments>0,k=Sc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(nn(c.roots))L=c.roots;else if(gt(c.roots)){for(var G=[],K=0;K<c.roots.length;K++){var de=d.getElementById(c.roots[K]);G.push(de)}L=d.collection(G)}else if(He(c.roots))L=d.$(c.roots);else if(w)L=_.roots();else{var pe=m.components();L=d.collection();for(var Ie=function(tr){var $r=pe[tr],Mi=$r.maxDegree(!1),yr=$r.filter(function(Cr){return Cr.degree(!1)===Mi});L=L.add(yr)},Ne=0;Ne<pe.length;Ne++)Ie(Ne)}var ze=[],Qe={},qe=function(tr,$r){null==ze[$r]&&(ze[$r]=[]);var Mi=ze[$r].length;ze[$r].push(tr),_u(tr,{index:Mi,depth:$r})};b.bfs({roots:L,directed:c.directed,visit:function(tr,$r,Mi,yr,Cr){var Kr=tr[0],Fs=Kr.id();qe(Kr,Cr),Qe[Fs]=!0}});for(var Lt=[],kt=0;kt<_.length;kt++){var mt=_[kt];Qe[mt.id()]||Lt.push(mt)}var Ft=function(tr){for(var $r=ze[tr],Mi=0;Mi<$r.length;Mi++){var yr=$r[Mi];null!=yr?_u(yr,{depth:tr,index:Mi}):($r.splice(Mi,1),Mi--)}},bt=function(){for(var tr=0;tr<ze.length;tr++)Ft(tr)},Ht=function(tr,$r){for(var Mi=Uh(tr),yr=tr.incomers().filter(function(St){return St.isNode()&&m.has(St)}),Cr=-1,Kr=tr.id(),Fs=0;Fs<yr.length;Fs++){var Ui=Uh(yr[Fs]);Cr=Math.max(Cr,Ui.depth)}return Mi.depth<=Cr&&($r[Kr]?null:(function(tr,$r){var Mi=Uh(tr);ze[Mi.depth][Mi.index]=null,qe(tr,$r)}(tr,Cr+1),$r[Kr]=!0,!0))};if(w&&E){var Vt=[],et={},Wt=function(tr){return Vt.push(tr)};for(_.forEach(function(pr){return Vt.push(pr)});Vt.length>0;){var gn=Vt.shift(),Kt=Ht(gn,et);if(Kt)gn.outgoers().filter(function(pr){return pr.isNode()&&m.has(pr)}).forEach(Wt);else if(null===Kt){he("Detected double maximal shift for node `"+gn.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}bt();var ln=0;if(c.avoidOverlap)for(var Sn=0;Sn<_.length;Sn++){var Jn=_[Sn].layoutDimensions(c);ln=Math.max(ln,Jn.w,Jn.h)}var li={},Ci=function(tr){if(li[tr.id()])return li[tr.id()];for(var $r=Uh(tr).depth,Mi=tr.neighborhood(),yr=0,Cr=0,Kr=0;Kr<Mi.length;Kr++){var Fs=Mi[Kr];if(!Fs.isEdge()&&!Fs.isParent()&&_.has(Fs)){var Zr=Uh(Fs);if(null!=Zr){var Ui=Zr.index,St=Zr.depth;null!=Ui&&null!=St&&St<$r&&(yr+=Ui/ze[St].length,Cr++)}}}return yr/=Cr=Math.max(1,Cr),0===Cr&&(yr=0),li[tr.id()]=yr,yr},pi=function(tr,$r){var Cr=Ci(tr)-Ci($r);return 0===Cr?bs(tr.id(),$r.id()):Cr};void 0!==c.depthSort&&(pi=c.depthSort);for(var hi=0;hi<ze.length;hi++)ze[hi].sort(pi),Ft(hi);for(var Mn=[],ri=0;ri<Lt.length;ri++)Mn.push(Lt[ri]);ze.unshift(Mn),bt();for(var xi=0,ji=0;ji<ze.length;ji++)xi=Math.max(ze[ji].length,xi);var ir_x=k.x1+k.w/2,ir_y=k.x1+k.h/2,Nr=ze.reduce(function(pr,tr){return Math.max(pr,tr.length)},0);return m.nodes().layoutPositions(this,c,function(tr){var $r=Uh(tr),Mi=$r.depth,yr=$r.index,Cr=ze[Mi].length,Kr=Math.max(k.w/((c.grid?Nr:Cr)+1),ln),Fs=Math.max(k.h/(ze.length+1),ln),Zr=Math.min(k.w/2/ze.length,k.h/2/ze.length);if(Zr=Math.max(Zr,ln),c.circle){var St=Zr*Mi+Zr-(ze.length>0&&ze[0].length<=3?Zr/2:0),$n=2*Math.PI/ze[Mi].length*yr;return 0===Mi&&1===ze[0].length&&(St=1),{x:ir_x+St*Math.cos($n),y:ir_y+St*Math.sin($n)}}return{x:ir_x+(yr+1-(Cr+1)/2)*Kr,y:(Mi+1)*Fs}}),this};var Tf={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function Yg(f){this.options=er({},Tf,f)}Yg.prototype.run=function(){var f=this.options,c=f,d=f.cy,m=c.eles,_=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,b=m.nodes().not(":parent");c.sort&&(b=b.sort(c.sort));for(var G,w=Sc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()}),E={x:w.x1+w.w/2,y:w.y1+w.h/2},L=(void 0===c.sweep?2*Math.PI-2*Math.PI/b.length:c.sweep)/Math.max(1,b.length-1),K=0,le=0;le<b.length;le++){var pe=b[le].layoutDimensions(c);K=Math.max(K,pe.w,pe.h)}if(G=Ut(c.radius)?c.radius:b.length<=1?0:Math.min(w.h,w.w)/2-K,b.length>1&&c.avoidOverlap){K*=1.75;var ze=Math.cos(L)-Math.cos(0),Qe=Math.sin(L)-Math.sin(0),qe=Math.sqrt(K*K/(ze*ze+Qe*Qe));G=Math.max(qe,G)}return m.nodes().layoutPositions(this,c,function(kt,mt){var Ft=c.startAngle+mt*L*(_?1:-1),bt=G*Math.cos(Ft),Ht=G*Math.sin(Ft);return{x:E.x+bt,y:E.y+Ht}}),this};var pc={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(c){return c.degree()},levelWidth:function(c){return c.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function El(f){this.options=er({},pc,f)}El.prototype.run=function(){for(var f=this.options,c=f,d=void 0!==c.counterclockwise?!c.counterclockwise:c.clockwise,m=f.cy,_=c.eles,b=_.nodes().not(":parent"),w=Sc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:m.width(),h:m.height()}),E={x:w.x1+w.w/2,y:w.y1+w.h/2},k=[],L=0,G=0;G<b.length;G++){var le,K=b[G];le=c.concentric(K),k.push({value:le,node:K}),K._private.scratch.concentric=le}b.updateStyle();for(var de=0;de<b.length;de++){var Ie=b[de].layoutDimensions(c);L=Math.max(L,Ie.w,Ie.h)}k.sort(function(pr,tr){return tr.value-pr.value});for(var Ne=c.levelWidth(b),ze=[[]],Qe=ze[0],qe=0;qe<k.length;qe++){var dt=k[qe];Qe.length>0&&Math.abs(Qe[0].value-dt.value)>=Ne&&ze.push(Qe=[]),Qe.push(dt)}var kt=L+c.minNodeSpacing;if(!c.avoidOverlap){var mt=ze.length>0&&ze[0].length>1,Ft=Math.min(w.w,w.h)/2-kt;kt=Math.min(kt,Ft/(ze.length+mt?1:0))}for(var Ht=0,Vt=0;Vt<ze.length;Vt++){var et=ze[Vt],Wt=void 0===c.sweep?2*Math.PI-2*Math.PI/et.length:c.sweep,Tt=et.dTheta=Wt/Math.max(1,et.length-1);if(et.length>1&&c.avoidOverlap){var gn=Math.cos(Tt)-Math.cos(0),Kt=Math.sin(Tt)-Math.sin(0),ln=Math.sqrt(kt*kt/(gn*gn+Kt*Kt));Ht=Math.max(ln,Ht)}et.r=Ht,Ht+=kt}if(c.equidistant){for(var Sn=0,Rn=0,Jn=0;Jn<ze.length;Jn++)Sn=Math.max(Sn,ze[Jn].r-Rn);Rn=0;for(var li=0;li<ze.length;li++){var Ci=ze[li];0===li&&(Rn=Ci.r),Ci.r=Rn,Rn+=Sn}}for(var pi={},hi=0;hi<ze.length;hi++)for(var Mn=ze[hi],ri=Mn.dTheta,xi=Mn.r,ji=0;ji<Mn.length;ji++){var ir=Mn[ji],Nr=c.startAngle+(d?1:-1)*ri*ji,Yr={x:E.x+xi*Math.cos(Nr),y:E.y+xi*Math.sin(Nr)};pi[ir.node.id()]=Yr}return _.nodes().layoutPositions(this,c,function(pr){var tr=pr.id();return pi[tr]}),this};var Hh,qd={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(c,d){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(c){return 2048},nodeOverlap:4,idealEdgeLength:function(c){return 32},edgeElasticity:function(c){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Uu(f){this.options=er({},qd,f),this.options.layout=this}Uu.prototype.run=function(){var f=this.options,c=f.cy,d=this;d.stopped=!1,(!0===f.animate||!1===f.animate)&&d.emit({type:"layoutstart",layout:d}),Hh=!0===f.debug;var m=hd(c,d,f);Hh&&(void 0)(m),f.randomize&&Xd(m);var _=Aa(),b=function(){Fm(m,c,f),!0===f.fit&&c.fit(f.padding)},w=function(le){return!(d.stopped||le>=f.numIter||(Kg(m,f),m.temperature=m.temperature*f.coolingFactor,m.temperature<f.minTemp))},E=function(){if(!0===f.animate||!1===f.animate)b(),d.one("layoutstop",f.stop),d.emit({type:"layoutstop",layout:d});else{var le=f.eles.nodes(),de=Cu(m,f,le);le.layoutPositions(d,f,de)}},k=0,L=!0;if(!0===f.animate)!function K(){for(var le=0;L&&le<f.refresh;)L=w(k),k++,le++;L?(Aa()-_>=f.animationThreshold&&b(),cu(K)):(dd(m,f),E())}();else{for(;L;)L=w(k),k++;dd(m,f),E()}return this},Uu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Uu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var hd=function(c,d,m){for(var _=m.eles.edges(),b=m.eles.nodes(),w={isCompound:c.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:b.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:_.size(),temperature:m.initialTemp,clientWidth:c.width(),clientHeight:c.width(),boundingBox:Sc(m.boundingBox?m.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()})},E=m.eles.components(),k={},L=0;L<E.length;L++)for(var G=E[L],K=0;K<G.length;K++)k[G[K].id()]=L;for(L=0;L<w.nodeSize;L++){var pe=(de=b[L]).layoutDimensions(m);(Ie={}).isLocked=de.locked(),Ie.id=de.data("id"),Ie.parentId=de.data("parent"),Ie.cmptId=k[de.id()],Ie.children=[],Ie.positionX=de.position("x"),Ie.positionY=de.position("y"),Ie.offsetX=0,Ie.offsetY=0,Ie.height=pe.w,Ie.width=pe.h,Ie.maxX=Ie.positionX+Ie.width/2,Ie.minX=Ie.positionX-Ie.width/2,Ie.maxY=Ie.positionY+Ie.height/2,Ie.minY=Ie.positionY-Ie.height/2,Ie.padLeft=parseFloat(de.style("padding")),Ie.padRight=parseFloat(de.style("padding")),Ie.padTop=parseFloat(de.style("padding")),Ie.padBottom=parseFloat(de.style("padding")),Ie.nodeRepulsion=ft(m.nodeRepulsion)?m.nodeRepulsion(de):m.nodeRepulsion,w.layoutNodes.push(Ie),w.idToIndex[Ie.id]=L}var Ne=[],ze=0,Qe=-1,qe=[];for(L=0;L<w.nodeSize;L++){var de,dt=(de=w.layoutNodes[L]).parentId;null!=dt?w.layoutNodes[w.idToIndex[dt]].children.push(de.id):(Ne[++Qe]=de.id,qe.push(de.id))}for(w.graphSet.push(qe);ze<=Qe;){var Lt=Ne[ze++],mt=w.layoutNodes[w.idToIndex[Lt]].children;if(mt.length>0)for(w.graphSet.push(mt),L=0;L<mt.length;L++)Ne[++Qe]=mt[L]}for(L=0;L<w.graphSet.length;L++){var Ft=w.graphSet[L];for(K=0;K<Ft.length;K++)w.indexToGraph[w.idToIndex[Ft[K]]]=L}for(L=0;L<w.edgeSize;L++){var Ht=_[L],Vt={};Vt.id=Ht.data("id"),Vt.sourceId=Ht.data("source"),Vt.targetId=Ht.data("target");var et=ft(m.idealEdgeLength)?m.idealEdgeLength(Ht):m.idealEdgeLength,Wt=ft(m.edgeElasticity)?m.edgeElasticity(Ht):m.edgeElasticity,Tt=w.idToIndex[Vt.sourceId],gn=w.idToIndex[Vt.targetId];if(w.indexToGraph[Tt]!=w.indexToGraph[gn]){for(var Sn=Xn(Vt.sourceId,Vt.targetId,w),Rn=w.graphSet[Sn],Jn=0,Ie=w.layoutNodes[Tt];-1===Rn.indexOf(Ie.id);)Ie=w.layoutNodes[w.idToIndex[Ie.parentId]],Jn++;for(Ie=w.layoutNodes[gn];-1===Rn.indexOf(Ie.id);)Ie=w.layoutNodes[w.idToIndex[Ie.parentId]],Jn++;et*=Jn*m.nestingFactor}Vt.idealLength=et,Vt.elasticity=Wt,w.layoutEdges.push(Vt)}return w},Xn=function(c,d,m){var _=Mf(c,d,0,m);return 2>_.count?0:_.graph},Mf=function f(c,d,m,_){var b=_.graphSet[m];if(-1<b.indexOf(c)&&-1<b.indexOf(d))return{count:2,graph:m};for(var w=0,E=0;E<b.length;E++){var G=_.layoutNodes[_.idToIndex[b[E]]].children;if(0!==G.length){var le=f(c,d,_.indexToGraph[_.idToIndex[G[0]]],_);if(0!==le.count){if(1!==le.count)return le;if(2==++w)break}}}return{count:w,graph:m}},Xd=function(c,d){for(var m=c.clientWidth,_=c.clientHeight,b=0;b<c.nodeSize;b++){var w=c.layoutNodes[b];0===w.children.length&&!w.isLocked&&(w.positionX=Math.random()*m,w.positionY=Math.random()*_)}},Cu=function(c,d,m){var _=c.boundingBox,b={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return d.boundingBox&&(m.forEach(function(w){var E=c.layoutNodes[c.idToIndex[w.data("id")]];b.x1=Math.min(b.x1,E.positionX),b.x2=Math.max(b.x2,E.positionX),b.y1=Math.min(b.y1,E.positionY),b.y2=Math.max(b.y2,E.positionY)}),b.w=b.x2-b.x1,b.h=b.y2-b.y1),function(w,E){var k=c.layoutNodes[c.idToIndex[w.data("id")]];return d.boundingBox?{x:_.x1+(k.positionX-b.x1)/b.w*_.w,y:_.y1+(k.positionY-b.y1)/b.h*_.h}:{x:k.positionX,y:k.positionY}}},Fm=function(c,d,m){var _=m.layout,b=m.eles.nodes(),w=Cu(c,m,b);b.positions(w),!0!==c.ready&&(c.ready=!0,_.one("layoutready",m.ready),_.emit({type:"layoutready",layout:this}))},Kg=function(c,d,m){fp(c,d),eu(c),Qg(c,d),pp(c),Vl(c)},fp=function(c,d){for(var m=0;m<c.graphSet.length;m++)for(var _=c.graphSet[m],b=_.length,w=0;w<b;w++)for(var E=c.layoutNodes[c.idToIndex[_[w]]],k=w+1;k<b;k++)Tl(E,c.layoutNodes[c.idToIndex[_[k]]],c,d)},Hu=function(c){return-c+2*c*Math.random()},Tl=function(c,d,m,_){if(c.cmptId===d.cmptId||m.isCompound){var E=d.positionX-c.positionX,k=d.positionY-c.positionY;0===E&&0===k&&(E=Hu(1),k=Hu(1));var G=Zg(c,d,E,k);if(G>0)var de=(K=_.nodeOverlap*G)*E/(le=Math.sqrt(E*E+k*k)),pe=K*k/le;else{var K,Ie=ph(c,E,k),Ne=ph(d,-1*E,-1*k),ze=Ne.x-Ie.x,Qe=Ne.y-Ie.y,qe=ze*ze+Qe*Qe,le=Math.sqrt(qe);de=(K=(c.nodeRepulsion+d.nodeRepulsion)/qe)*ze/le,pe=K*Qe/le}c.isLocked||(c.offsetX-=de,c.offsetY-=pe),d.isLocked||(d.offsetX+=de,d.offsetY+=pe)}},Zg=function(c,d,m,_){if(m>0)var b=c.maxX-d.minX;else b=d.maxX-c.minX;if(_>0)var w=c.maxY-d.minY;else w=d.maxY-c.minY;return b>=0&&w>=0?Math.sqrt(b*b+w*w):0},ph=function(c,d,m){var _=c.positionX,b=c.positionY,w=c.height||1,E=c.width||1,k=m/d,L=w/E,G={};return 0===d&&0<m||0===d&&0>m?(G.x=_,G.y=b+w/2,G):0<d&&-1*L<=k&&k<=L?(G.x=_+E/2,G.y=b+E*m/2/d,G):0>d&&-1*L<=k&&k<=L?(G.x=_-E/2,G.y=b-E*m/2/d,G):0<m&&(k<=-1*L||k>=L)?(G.x=_+w*d/2/m,G.y=b+w/2,G):(0>m&&(k<=-1*L||k>=L)&&(G.x=_-w*d/2/m,G.y=b-w/2),G)},eu=function(c,d){for(var m=0;m<c.edgeSize;m++){var _=c.layoutEdges[m],w=c.layoutNodes[c.idToIndex[_.sourceId]],k=c.layoutNodes[c.idToIndex[_.targetId]],L=k.positionX-w.positionX,G=k.positionY-w.positionY;if(0!==L||0!==G){var K=ph(w,L,G),le=ph(k,-1*L,-1*G),de=le.x-K.x,pe=le.y-K.y,Ie=Math.sqrt(de*de+pe*pe),Ne=Math.pow(_.idealLength-Ie,2)/_.elasticity;if(0!==Ie)var ze=Ne*de/Ie,Qe=Ne*pe/Ie;else ze=0,Qe=0;w.isLocked||(w.offsetX+=ze,w.offsetY+=Qe),k.isLocked||(k.offsetX-=ze,k.offsetY-=Qe)}}},Qg=function(c,d){if(0!==d.gravity)for(var _=0;_<c.graphSet.length;_++){var b=c.graphSet[_],w=b.length;if(0===_)var E=c.clientHeight/2,k=c.clientWidth/2;else{var G=c.layoutNodes[c.idToIndex[c.layoutNodes[c.idToIndex[b[0]]].parentId]];E=G.positionX,k=G.positionY}for(var K=0;K<w;K++){var le=c.layoutNodes[c.idToIndex[b[K]]];if(!le.isLocked){var de=E-le.positionX,pe=k-le.positionY,Ie=Math.sqrt(de*de+pe*pe);if(Ie>1){var ze=d.gravity*pe/Ie;le.offsetX+=d.gravity*de/Ie,le.offsetY+=ze}}}}},pp=function(c,d){var m=[],_=0,b=-1;for(m.push.apply(m,c.graphSet[0]),b+=c.graphSet[0].length;_<=b;){var w=m[_++],k=c.layoutNodes[c.idToIndex[w]],L=k.children;if(0<L.length&&!k.isLocked){for(var G=k.offsetX,K=k.offsetY,le=0;le<L.length;le++){var de=c.layoutNodes[c.idToIndex[L[le]]];de.offsetX+=G,de.offsetY+=K,m[++b]=L[le]}k.offsetX=0,k.offsetY=0}}},Vl=function(c,d){for(var m=0;m<c.nodeSize;m++)0<(_=c.layoutNodes[m]).children.length&&(_.maxX=void 0,_.minX=void 0,_.maxY=void 0,_.minY=void 0);for(m=0;m<c.nodeSize;m++)if(!(0<(_=c.layoutNodes[m]).children.length||_.isLocked)){var b=gh(_.offsetX,_.offsetY,c.temperature);_.positionX+=b.x,_.positionY+=b.y,_.offsetX=0,_.offsetY=0,_.minX=_.positionX-_.width,_.maxX=_.positionX+_.width,_.minY=_.positionY-_.height,_.maxY=_.positionY+_.height,Jg(_,c)}for(m=0;m<c.nodeSize;m++){var _;0<(_=c.layoutNodes[m]).children.length&&!_.isLocked&&(_.positionX=(_.maxX+_.minX)/2,_.positionY=(_.maxY+_.minY)/2,_.width=_.maxX-_.minX,_.height=_.maxY-_.minY)}},gh=function(c,d,m){var _=Math.sqrt(c*c+d*d);if(_>m)var b={x:m*c/_,y:m*d/_};else b={x:c,y:d};return b},Jg=function f(c,d){var m=c.parentId;if(null!=m){var _=d.layoutNodes[d.idToIndex[m]],b=!1;if((null==_.maxX||c.maxX+_.padRight>_.maxX)&&(_.maxX=c.maxX+_.padRight,b=!0),(null==_.minX||c.minX-_.padLeft<_.minX)&&(_.minX=c.minX-_.padLeft,b=!0),(null==_.maxY||c.maxY+_.padBottom>_.maxY)&&(_.maxY=c.maxY+_.padBottom,b=!0),(null==_.minY||c.minY-_.padTop<_.minY)&&(_.minY=c.minY-_.padTop,b=!0),b)return f(_,d)}},dd=function(c,d){for(var m=c.layoutNodes,_=[],b=0;b<m.length;b++){var w=m[b],E=w.cmptId;(_[E]=_[E]||[]).push(w)}var L=0;for(b=0;b<_.length;b++)if(G=_[b]){G.x1=1/0,G.x2=-1/0,G.y1=1/0,G.y2=-1/0;for(var K=0;K<G.length;K++){var le=G[K];G.x1=Math.min(G.x1,le.positionX-le.width/2),G.x2=Math.max(G.x2,le.positionX+le.width/2),G.y1=Math.min(G.y1,le.positionY-le.height/2),G.y2=Math.max(G.y2,le.positionY+le.height/2)}G.w=G.x2-G.x1,G.h=G.y2-G.y1,L+=G.w*G.h}_.sort(function(Qe,qe){return qe.w*qe.h-Qe.w*Qe.h});var de=0,pe=0,Ie=0,Ne=0,ze=Math.sqrt(L)*c.clientWidth/c.clientHeight;for(b=0;b<_.length;b++){var G;if(G=_[b]){for(K=0;K<G.length;K++)(le=G[K]).isLocked||(le.positionX+=de-G.x1,le.positionY+=pe-G.y1);de+=G.w+d.componentSpacing,Ie+=G.w+d.componentSpacing,Ne=Math.max(Ne,G.h),Ie>ze&&(pe+=Ne+d.componentSpacing,de=0,Ie=0,Ne=0)}}},nc={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(c){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function bu(f){this.options=er({},nc,f)}bu.prototype.run=function(){var f=this.options,c=f,d=f.cy,m=c.eles,_=m.nodes().not(":parent");c.sort&&(_=_.sort(c.sort));var b=Sc(c.boundingBox?c.boundingBox:{x1:0,y1:0,w:d.width(),h:d.height()});if(0===b.h||0===b.w)m.nodes().layoutPositions(this,c,function(li){return{x:b.x1,y:b.y1}});else{var w=_.size(),E=Math.sqrt(w*b.h/b.w),k=Math.round(E),L=Math.round(b.w/b.h*E),G=function(Ci){if(null==Ci)return Math.min(k,L);Math.min(k,L)==k?k=Ci:L=Ci},K=function(Ci){if(null==Ci)return Math.max(k,L);Math.max(k,L)==k?k=Ci:L=Ci},le=c.rows,de=null!=c.cols?c.cols:c.columns;if(null!=le&&null!=de)k=le,L=de;else if(null!=le&&null==de)k=le,L=Math.ceil(w/k);else if(null==le&&null!=de)L=de,k=Math.ceil(w/L);else if(L*k>w){var pe=G(),Ie=K();(pe-1)*Ie>=w?G(pe-1):(Ie-1)*pe>=w&&K(Ie-1)}else for(;L*k<w;){var Ne=G(),ze=K();(ze+1)*Ne>=w?K(ze+1):G(Ne+1)}var Qe=b.w/L,qe=b.h/k;if(c.condense&&(Qe=0,qe=0),c.avoidOverlap)for(var dt=0;dt<_.length;dt++){var Lt=_[dt],kt=Lt._private.position;(null==kt.x||null==kt.y)&&(kt.x=0,kt.y=0);var mt=Lt.layoutDimensions(c),Ft=c.avoidOverlapPadding,Ht=mt.h+Ft;Qe=Math.max(Qe,mt.w+Ft),qe=Math.max(qe,Ht)}for(var Vt={},et=function(Ci,pi){return!!Vt["c-"+Ci+"-"+pi]},Wt=function(Ci,pi){Vt["c-"+Ci+"-"+pi]=!0},Tt=0,gn=0,Kt=function(){++gn>=L&&(gn=0,Tt++)},ln={},Sn=0;Sn<_.length;Sn++){var Rn=_[Sn],Jn=c.position(Rn);if(Jn&&(void 0!==Jn.row||void 0!==Jn.col)){var En={row:Jn.row,col:Jn.col};if(void 0===En.col)for(En.col=0;et(En.row,En.col);)En.col++;else if(void 0===En.row)for(En.row=0;et(En.row,En.col);)En.row++;ln[Rn.id()]=En,Wt(En.row,En.col)}}_.layoutPositions(this,c,function(Ci,pi){var hi,Mn;if(Ci.locked()||Ci.isParent())return!1;var ri=ln[Ci.id()];if(ri)hi=ri.col*Qe+Qe/2+b.x1,Mn=ri.row*qe+qe/2+b.y1;else{for(;et(Tt,gn);)Kt();hi=gn*Qe+Qe/2+b.x1,Mn=Tt*qe+qe/2+b.y1,Wt(Tt,gn),Kt()}return{x:hi,y:Mn}})}return this};var Yd={ready:function(){},stop:function(){}};function fd(f){this.options=er({},Yd,f)}fd.prototype.run=function(){var f=this.options,c=f.eles,d=this;return d.emit("layoutstart"),c.nodes().positions(function(){return{x:0,y:0}}),d.one("layoutready",f.ready),d.emit("layoutready"),d.one("layoutstop",f.stop),d.emit("layoutstop"),this},fd.prototype.stop=function(){return this};var gp={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function Gu(f){this.options=er({},gp,f)}Gu.prototype.run=function(){var f=this.options,d=f.eles.nodes(),m=ft(f.positions);return d.layoutPositions(this,f,function(b,w){var E=function _(b){return null==f.positions?function(c){return{x:c.x,y:c.y}}(b.position()):m?f.positions(b):f.positions[b._private.data.id]??null}(b);return!b.locked()&&null!=E&&E}),this};var ss={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(c,d){return!0},ready:void 0,stop:void 0,transform:function(c,d){return d}};function mp(f){this.options=er({},ss,f)}mp.prototype.run=function(){var f=this.options,c=f.cy,d=f.eles,m=Sc(f.boundingBox?f.boundingBox:{x1:0,y1:0,w:c.width(),h:c.height()});return d.nodes().layoutPositions(this,f,function(w,E){return{x:m.x1+Math.round(Math.random()*m.w),y:m.y1+Math.round(Math.random()*m.h)}}),this};var em=[{name:"breadthfirst",impl:Ef},{name:"circle",impl:Yg},{name:"concentric",impl:El},{name:"cose",impl:Uu},{name:"grid",impl:bu},{name:"null",impl:fd},{name:"preset",impl:Gu},{name:"random",impl:mp}];function Kd(f){this.options=f,this.notifications=0}var Df=function(){},vp=function(){throw new Error("A headless instance can not render images")};Kd.prototype={recalculateRenderedStyle:Df,notify:function(){this.notifications++},init:Df,isHeadless:function(){return!0},png:vp,jpg:vp};var eg={arrowShapeWidth:.3,registerArrowShapes:function(){var f=this.arrowShapes={},c=this,d=function(L,G,K,le,de,pe,Ie){return de.x-K/2-Ie<=L&&L<=de.x+K/2+Ie&&de.y-K/2-Ie<=G&&G<=de.y+K/2+Ie},m=function(L,G,K,le,de){var pe=L*Math.cos(le)-G*Math.sin(le),Ie=L*Math.sin(le)+G*Math.cos(le);return{x:pe*K+de.x,y:Ie*K+de.y}},_=function(L,G,K,le){for(var de=[],pe=0;pe<L.length;pe+=2)de.push(m(L[pe],L[pe+1],G,K,le));return de},b=function(L){for(var G=[],K=0;K<L.length;K++){var le=L[K];G.push(le.x,le.y)}return G},w=function(L){return L.pstyle("width").pfValue*L.pstyle("arrow-scale").pfValue*2},E=function(L,G){He(G)&&(G=f[G]),f[L]=er({name:L,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(le,de,pe,Ie,Ne,ze){var Qe=b(_(this.points,pe+2*ze,Ie,Ne));return Ea(le,de,Qe)},roughCollide:d,draw:function(le,de,pe,Ie){var Ne=_(this.points,de,pe,Ie);c.arrowShapeImpl("polygon")(le,Ne)},spacing:function(le){return 0},gap:w},G)};E("none",{collide:jf,roughCollide:jf,draw:Ge,spacing:nd,gap:nd}),E("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),E("arrow","triangle"),E("triangle-backcurve",{points:f.triangle.points,controlPoint:[0,-.15],roughCollide:d,draw:function(L,G,K,le,de){var pe=_(this.points,G,K,le),Ie=this.controlPoint,Ne=m(Ie[0],Ie[1],G,K,le);c.arrowShapeImpl(this.name)(L,pe,Ne)},gap:function(L){return.8*w(L)}}),E("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(L,G,K,le,de,pe,Ie){var Ne=b(_(this.points,K+2*Ie,le,de)),ze=b(_(this.pointsTee,K+2*Ie,le,de));return Ea(L,G,Ne)||Ea(L,G,ze)},draw:function(L,G,K,le,de){var pe=_(this.points,G,K,le),Ie=_(this.pointsTee,G,K,le);c.arrowShapeImpl(this.name)(L,pe,Ie)}}),E("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(L,G,K,le,de,pe,Ie){var Ne=de,ze=Math.pow(Ne.x-L,2)+Math.pow(Ne.y-G,2)<=Math.pow((K+2*Ie)*this.radius,2),Qe=b(_(this.points,K+2*Ie,le,de));return Ea(L,G,Qe)||ze},draw:function(L,G,K,le,de){var pe=_(this.pointsTr,G,K,le);c.arrowShapeImpl(this.name)(L,pe,le.x,le.y,this.radius*G)},spacing:function(L){return c.getArrowWidth(L.pstyle("width").pfValue,L.pstyle("arrow-scale").value)*this.radius}}),E("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(L,G){var K=this.baseCrossLinePts.slice(),le=G/L;return K[3]=K[3]-le,K[5]=K[5]-le,K},collide:function(L,G,K,le,de,pe,Ie){var Ne=b(_(this.points,K+2*Ie,le,de)),ze=b(_(this.crossLinePts(K,pe),K+2*Ie,le,de));return Ea(L,G,Ne)||Ea(L,G,ze)},draw:function(L,G,K,le,de){var pe=_(this.points,G,K,le),Ie=_(this.crossLinePts(G,de),G,K,le);c.arrowShapeImpl(this.name)(L,pe,Ie)}}),E("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(L){return.525*w(L)}}),E("circle",{radius:.15,collide:function(L,G,K,le,de,pe,Ie){var Ne=de;return Math.pow(Ne.x-L,2)+Math.pow(Ne.y-G,2)<=Math.pow((K+2*Ie)*this.radius,2)},draw:function(L,G,K,le,de){c.arrowShapeImpl(this.name)(L,le.x,le.y,this.radius*G)},spacing:function(L){return c.getArrowWidth(L.pstyle("width").pfValue,L.pstyle("arrow-scale").value)*this.radius}}),E("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(L){return 1},gap:function(L){return 1}}),E("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),E("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(L){return L.pstyle("width").pfValue*L.pstyle("arrow-scale").value}}),E("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(L){return.95*L.pstyle("width").pfValue*L.pstyle("arrow-scale").value}})}},Ra={projectIntoViewport:function(f,c){var d=this.cy,m=this.findContainerClientCoords(),_=m[0],b=m[1],w=m[4],E=d.pan(),k=d.zoom();return[((f-_)/w-E.x)/k,((c-b)/w-E.y)/k]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var f=this.container,c=f.getBoundingClientRect(),d=ge.getComputedStyle(f),m=function(ze){return parseFloat(d.getPropertyValue(ze))},__left=m("padding-left"),__right=m("padding-right"),__top=m("padding-top"),__bottom=m("padding-bottom"),b_left=m("border-left-width"),b_right=m("border-right-width"),b_top=m("border-top-width"),w=(m("border-bottom-width"),f.clientWidth);return this.containerBB=[c.left+__left+b_left,c.top+__top+b_top,w-(__left+__right),f.clientHeight-(__top+__bottom),c.width/(w+(b_left+b_right))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(f,c,d,m){return this.findNearestElements(f,c,d,m)[0]},findNearestElements:function(f,c,d,m){var pe,Ie,_=this,b=this,w=b.getCachedZSortedEles(),E=[],k=b.cy.zoom(),L=b.cy.hasCompoundNodes(),G=(m?24:8)/k,K=(m?8:2)/k,le=(m?8:2)/k,de=1/0;function Ne(mt,Ft){if(mt.isNode()){if(Ie)return;Ie=mt,E.push(mt)}if(mt.isEdge()&&(null==Ft||Ft<de))if(pe){if(pe.pstyle("z-compound-depth").value===mt.pstyle("z-compound-depth").value&&pe.pstyle("z-compound-depth").value===mt.pstyle("z-compound-depth").value)for(var bt=0;bt<E.length;bt++)if(E[bt].isEdge()){E[bt]=mt,pe=mt,de=Ft??de;break}}else E.push(mt),pe=mt,de=Ft??de}function ze(mt){var Ft=mt.outerWidth()+2*K,bt=mt.outerHeight()+2*K,Ht=Ft/2,Vt=bt/2,et=mt.position();if(et.x-Ht<=f&&f<=et.x+Ht&&et.y-Vt<=c&&c<=et.y+Vt&&b.nodeShapes[_.getNodeShape(mt)].checkPoint(f,c,0,Ft,bt,et.x,et.y))return Ne(mt,0),!0}function Qe(mt){var gn,Ft=mt._private,bt=Ft.rscratch,Ht=mt.pstyle("width").pfValue,Vt=mt.pstyle("arrow-scale").value,et=Ht/2+G,Wt=et*et,Tt=2*et,Sn=Ft.source,Rn=Ft.target;if("segments"===bt.edgeType||"straight"===bt.edgeType||"haystack"===bt.edgeType){for(var Kt=bt.allpts,ln=0;ln+3<Kt.length;ln+=2)if(Xl(f,c,Kt[ln],Kt[ln+1],Kt[ln+2],Kt[ln+3],Tt)&&Wt>(gn=Th(f,c,Kt[ln],Kt[ln+1],Kt[ln+2],Kt[ln+3])))return Ne(mt,gn),!0}else if("bezier"===bt.edgeType||"multibezier"===bt.edgeType||"self"===bt.edgeType||"compound"===bt.edgeType)for(Kt=bt.allpts,ln=0;ln+5<bt.allpts.length;ln+=4)if(O_(f,c,Kt[ln],Kt[ln+1],Kt[ln+2],Kt[ln+3],Kt[ln+4],Kt[ln+5],Tt)&&Wt>(gn=Ey(f,c,Kt[ln],Kt[ln+1],Kt[ln+2],Kt[ln+3],Kt[ln+4],Kt[ln+5])))return Ne(mt,gn),!0;Sn=Sn||Ft.source,Rn=Rn||Ft.target;var Jn=_.getArrowWidth(Ht,Vt),En=[{name:"source",x:bt.arrowStartX,y:bt.arrowStartY,angle:bt.srcArrowAngle},{name:"target",x:bt.arrowEndX,y:bt.arrowEndY,angle:bt.tgtArrowAngle},{name:"mid-source",x:bt.midX,y:bt.midY,angle:bt.midsrcArrowAngle},{name:"mid-target",x:bt.midX,y:bt.midY,angle:bt.midtgtArrowAngle}];for(ln=0;ln<En.length;ln++){var Yn=En[ln],li=b.arrowShapes[mt.pstyle(Yn.name+"-arrow-shape").value],Ci=mt.pstyle("width").pfValue;if(li.roughCollide(f,c,Jn,Yn.angle,{x:Yn.x,y:Yn.y},Ci,G)&&li.collide(f,c,Jn,Yn.angle,{x:Yn.x,y:Yn.y},Ci,G))return Ne(mt),!0}L&&E.length>0&&(ze(Sn),ze(Rn))}function qe(mt,Ft,bt){return sr(mt,Ft,bt)}function dt(mt,Ft){var Vt,bt=mt._private,Ht=le;Vt=Ft?Ft+"-":"",mt.boundingBox();var et=bt.labelBounds[Ft||"main"],Wt=mt.pstyle(Vt+"label").value;if("yes"===mt.pstyle("text-events").strValue&&Wt){var gn=qe(bt.rscratch,"labelX",Ft),Kt=qe(bt.rscratch,"labelY",Ft),ln=qe(bt.rscratch,"labelAngle",Ft),Sn=mt.pstyle(Vt+"text-margin-x").pfValue,Rn=mt.pstyle(Vt+"text-margin-y").pfValue,Jn=et.x1-Ht-Sn,En=et.x2+Ht-Sn,Yn=et.y1-Ht-Rn,li=et.y2+Ht-Rn;if(ln){var Ci=Math.cos(ln),pi=Math.sin(ln),hi=function(Yr,pr){return{x:(Yr-=gn)*Ci-(pr-=Kt)*pi+gn,y:Yr*pi+pr*Ci+Kt}},Mn=hi(Jn,Yn),ri=hi(Jn,li),xi=hi(En,Yn),ji=hi(En,li);if(Ea(f,c,[Mn.x+Sn,Mn.y+Rn,xi.x+Sn,xi.y+Rn,ji.x+Sn,ji.y+Rn,ri.x+Sn,ri.y+Rn]))return Ne(mt),!0}else if(ns(et,f,c))return Ne(mt),!0}}d&&(w=w.interactive);for(var Lt=w.length-1;Lt>=0;Lt--){var kt=w[Lt];kt.isNode()?ze(kt)||dt(kt):Qe(kt)||dt(kt)||dt(kt,"source")||dt(kt,"target")}return E},getAllInBox:function(f,c,d,m){for(var _=this.getCachedZSortedEles().interactive,b=[],w=Math.min(f,d),E=Math.max(f,d),k=Math.min(c,m),L=Math.max(c,m),G=Sc({x1:f=w,y1:c=k,x2:d=E,y2:m=L}),K=0;K<_.length;K++){var le=_[K];if(le.isNode()){var de=le,pe=de.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});xm(G,pe)&&!yv(pe,G)&&b.push(de)}else{var Ie=le,Ne=Ie._private,ze=Ne.rscratch;if(null!=ze.startX&&null!=ze.startY&&!ns(G,ze.startX,ze.startY)||null!=ze.endX&&null!=ze.endY&&!ns(G,ze.endX,ze.endY))continue;if("bezier"===ze.edgeType||"multibezier"===ze.edgeType||"self"===ze.edgeType||"compound"===ze.edgeType||"segments"===ze.edgeType||"haystack"===ze.edgeType){for(var Qe=Ne.rstyle.bezierPts||Ne.rstyle.linePts||Ne.rstyle.haystackPts,qe=!0,dt=0;dt<Qe.length;dt++)if(!vv(G,Qe[dt])){qe=!1;break}qe&&b.push(Ie)}else("haystack"===ze.edgeType||"straight"===ze.edgeType)&&b.push(Ie)}}return b}},Nm={calculateArrowAngles:function(f){var k,L,G,K,le,de,c=f._private.rscratch,d="haystack"===c.edgeType,m="bezier"===c.edgeType,_="multibezier"===c.edgeType,b="segments"===c.edgeType,w="compound"===c.edgeType,E="self"===c.edgeType;d?(G=c.haystackPts[0],K=c.haystackPts[1],le=c.haystackPts[2],de=c.haystackPts[3]):(G=c.arrowStartX,K=c.arrowStartY,le=c.arrowEndX,de=c.arrowEndY),ze=c.midX,Qe=c.midY,b?(k=G-c.segpts[0],L=K-c.segpts[1]):_||w||E||m?(k=G-cc((pe=c.allpts)[0],pe[2],pe[4],.1),L=K-cc(pe[1],pe[3],pe[5],.1)):(k=G-ze,L=K-Qe),c.srcArrowAngle=Lg(k,L);var ze=c.midX,Qe=c.midY;if(d&&(ze=(G+le)/2,Qe=(K+de)/2),k=le-G,L=de-K,b)if((pe=c.allpts).length/2%2==0)k=pe[qe=pe.length/2]-pe[dt=qe-2],L=pe[qe+1]-pe[dt+1];else{var qe,dt,Lt=2+(qe=pe.length/2-1);k=pe[qe]-pe[dt=qe-2],L=pe[qe+1]-pe[dt+1]}else if(_||w||E){var mt,Ft,bt,Ht,et,Vt,Wt,pe=c.allpts;c.ctrlpts.length/2%2==0?(mt=cc(pe[Vt=pe.length/2-1],pe[et=Vt+2],pe[Wt=et+2],0),Ft=cc(pe[Vt+1],pe[et+1],pe[Wt+1],0),bt=cc(pe[Vt],pe[et],pe[Wt],1e-4),Ht=cc(pe[Vt+1],pe[et+1],pe[Wt+1],1e-4)):(mt=cc(pe[Vt=(et=pe.length/2-1)-2],pe[et],pe[Wt=et+2],.4999),Ft=cc(pe[Vt+1],pe[et+1],pe[Wt+1],.4999),bt=cc(pe[Vt],pe[et],pe[Wt],.5),Ht=cc(pe[Vt+1],pe[et+1],pe[Wt+1],.5)),k=bt-mt,L=Ht-Ft}if(c.midtgtArrowAngle=Lg(k,L),c.midDispX=k,c.midDispY=L,k*=-1,L*=-1,b&&(pe=c.allpts).length/2%2!=0&&(k=-(pe[Lt=2+(qe=pe.length/2-1)]-pe[qe]),L=-(pe[Lt+1]-pe[qe+1])),c.midsrcArrowAngle=Lg(k,L),b)k=le-c.segpts[c.segpts.length-2],L=de-c.segpts[c.segpts.length-1];else if(_||w||E||m){var Tt=(pe=c.allpts).length;k=le-cc(pe[Tt-6],pe[Tt-4],pe[Tt-2],.9),L=de-cc(pe[Tt-5],pe[Tt-3],pe[Tt-1],.9)}else k=le-ze,L=de-Qe;c.tgtArrowAngle=Lg(k,L)}};Nm.getArrowWidth=Nm.getArrowHeight=function(f,c){var d=this.arrowWidthCache=this.arrowWidthCache||{},m=d[f+", "+c];return m||(m=Math.max(Math.pow(13.37*f,.9),29)*c,d[f+", "+c]=m,m)};var Ul={};function Bm(f){var c=[];if(null!=f){for(var d=0;d<f.length;d+=2)c.push({x:f[d],y:f[d+1]});return c}}Ul.findHaystackPoints=function(f){for(var c=0;c<f.length;c++){var d=f[c],m=d._private,_=m.rscratch;if(!_.haystack){var b=2*Math.random()*Math.PI;_.source={x:Math.cos(b),y:Math.sin(b)},b=2*Math.random()*Math.PI,_.target={x:Math.cos(b),y:Math.sin(b)}}var w=m.source,E=m.target,k=w.position(),L=E.position(),G=w.width(),K=E.width(),le=w.height(),de=E.height(),Ie=d.pstyle("haystack-radius").value/2;_.haystackPts=_.allpts=[_.source.x*G*Ie+k.x,_.source.y*le*Ie+k.y,_.target.x*K*Ie+L.x,_.target.y*de*Ie+L.y],_.midX=(_.allpts[0]+_.allpts[2])/2,_.midY=(_.allpts[1]+_.allpts[3])/2,_.edgeType="haystack",_.haystack=!0,this.storeEdgeProjections(d),this.calculateArrowAngles(d),this.recalculateEdgeLabelProjections(d),this.calculateLabelAngles(d)}},Ul.findSegmentsPoints=function(f,c){var d=f._private.rscratch,m=c.posPts,_=c.intersectionPts,b=c.vectorNormInverse,w=f.pstyle("edge-distances").value,E=f.pstyle("segment-weights"),k=f.pstyle("segment-distances"),L=Math.min(E.pfValue.length,k.pfValue.length);d.edgeType="segments",d.segpts=[];for(var G=0;G<L;G++){var K=E.pfValue[G],le=k.pfValue[G],de=1-K,Ie="node-position"===w?m:_,Ne={x:Ie.x1*de+Ie.x2*K,y:Ie.y1*de+Ie.y2*K};d.segpts.push(Ne.x+b.x*le,Ne.y+b.y*le)}},Ul.findLoopPoints=function(f,c,d,m){var _=f._private.rscratch,b=c.dirCounts,w=c.srcPos,E=f.pstyle("control-point-distances"),k=E?E.pfValue[0]:void 0,L=f.pstyle("loop-direction").pfValue,G=f.pstyle("loop-sweep").pfValue,K=f.pstyle("control-point-step-size").pfValue;_.edgeType="self";var le=d,de=K;m&&(le=0,de=k);var pe=L-Math.PI/2,Ie=pe-G/2,Ne=pe+G/2,ze=String(L+"_"+G);le=void 0===b[ze]?b[ze]=0:++b[ze],_.ctrlpts=[w.x+1.4*Math.cos(Ie)*de*(le/3+1),w.y+1.4*Math.sin(Ie)*de*(le/3+1),w.x+1.4*Math.cos(Ne)*de*(le/3+1),w.y+1.4*Math.sin(Ne)*de*(le/3+1)]},Ul.findCompoundLoopPoints=function(f,c,d,m){var _=f._private.rscratch;_.edgeType="compound";var b=c.srcPos,w=c.tgtPos,E=c.srcW,k=c.srcH,L=c.tgtW,G=c.tgtH,K=f.pstyle("control-point-step-size").pfValue,le=f.pstyle("control-point-distances"),pe=d,Ie=K;m&&(pe=0,Ie=le?le.pfValue[0]:void 0);var ze={x:b.x-E/2,y:b.y-k/2},Qe={x:w.x-L/2,y:w.y-G/2},qe={x:Math.min(ze.x,Qe.x),y:Math.min(ze.y,Qe.y)},Lt=Math.max(.5,Math.log(.01*E)),kt=Math.max(.5,Math.log(.01*L));_.ctrlpts=[qe.x,qe.y-(1+Math.pow(50,1.12)/100)*Ie*(pe/3+1)*Lt,qe.x-(1+Math.pow(50,1.12)/100)*Ie*(pe/3+1)*kt,qe.y]},Ul.findStraightEdgePoints=function(f){f._private.rscratch.edgeType="straight"},Ul.findBezierPoints=function(f,c,d,m,_){var b=f._private.rscratch,w=c.vectorNormInverse,E=c.posPts,k=c.intersectionPts,L=f.pstyle("edge-distances").value,G=f.pstyle("control-point-step-size").pfValue,K=f.pstyle("control-point-distances"),le=f.pstyle("control-point-weights"),de=K&&le?Math.min(K.value.length,le.value.length):1,pe=K?K.pfValue[0]:void 0,Ie=le.value[0],Ne=m;b.edgeType=Ne?"multibezier":"bezier",b.ctrlpts=[];for(var ze=0;ze<de;ze++){var qe,Qe=(.5-c.eles.length/2+d)*G*(_?-1:1),dt=Ic(Qe);Ne&&(pe=K?K.pfValue[ze]:G,Ie=le.value[ze]);var Lt=void 0!==(qe=m?pe:void 0!==pe?dt*pe:void 0)?qe:Qe,kt=1-Ie,Ft="node-position"===L?E:k,bt={x:Ft.x1*kt+Ft.x2*Ie,y:Ft.y1*kt+Ft.y2*Ie};b.ctrlpts.push(bt.x+w.x*Lt,bt.y+w.y*Lt)}},Ul.findTaxiPoints=function(f,c){var d=f._private.rscratch;d.edgeType="segments";var m="vertical",_="horizontal",b="leftward",w="rightward",E="downward",k="upward",G=c.posPts,K=c.srcW,le=c.srcH,de=c.tgtW,pe=c.tgtH,Ne="node-position"!==f.pstyle("edge-distances").value,ze=f.pstyle("taxi-direction").value,Qe=ze,qe=f.pstyle("taxi-turn"),dt="%"===qe.units,Lt=qe.pfValue,kt=Lt<0,mt=f.pstyle("taxi-turn-min-distance").pfValue,bt=Ne?(le+pe)/2:0,Ht=G.x2-G.x1,Vt=G.y2-G.y1,et=function(pn,Zi){return pn>0?Math.max(pn-Zi,0):Math.min(pn+Zi,0)},Wt=et(Ht,Ne?(K+de)/2:0),Tt=et(Vt,bt),gn=!1;"auto"===Qe?ze=Math.abs(Wt)>Math.abs(Tt)?_:m:Qe===k||Qe===E?(ze=m,gn=!0):(Qe===b||Qe===w)&&(ze=_,gn=!0);var En,Kt=ze===m,ln=Kt?Tt:Wt,Sn=Kt?Vt:Ht,Rn=Ic(Sn),Jn=!1;(!gn||!dt&&!kt)&&(Qe===E&&Sn<0||Qe===k&&Sn>0||Qe===b&&Sn>0||Qe===w&&Sn<0)&&(ln=(Rn*=-1)*Math.abs(ln),Jn=!0);var Ci=function(pn){return Math.abs(pn)<mt||Math.abs(pn)>=Math.abs(ln)},pi=Ci(En=dt?(Lt<0?1+Lt:Lt)*ln:(Lt<0?ln:0)+Lt*Rn),hi=Ci(Math.abs(ln)-Math.abs(En));if(!pi&&!hi||Jn)if(Kt){var St=G.y1+En+(Ne?le/2*Rn:0);d.segpts=[G.x1,St,G.x2,St]}else{var Ve=G.x1+En+(Ne?K/2*Rn:0);d.segpts=[Ve,G.y1,Ve,G.y2]}else if(Kt){var ri=Math.abs(Sn)<=le/2,xi=Math.abs(Ht)<=de/2;if(ri){var ji=(G.x1+G.x2)/2;d.segpts=[ji,G.y1,ji,G.y2]}else if(xi){var Yr=(G.y1+G.y2)/2;d.segpts=[G.x1,Yr,G.x2,Yr]}else d.segpts=[G.x1,G.y2]}else{var $r=Math.abs(Sn)<=K/2,Mi=Math.abs(Vt)<=pe/2;if($r){var yr=(G.y1+G.y2)/2;d.segpts=[G.x1,yr,G.x2,yr]}else if(Mi){var Fs=(G.x1+G.x2)/2;d.segpts=[Fs,G.y1,Fs,G.y2]}else d.segpts=[G.x2,G.y1]}},Ul.tryToCorrectInvalidPoints=function(f,c){var d=f._private.rscratch;if("bezier"===d.edgeType){var m=c.srcPos,_=c.tgtPos,b=c.srcW,w=c.srcH,E=c.tgtW,k=c.tgtH,L=c.srcShape,G=c.tgtShape,K=!Ut(d.startX)||!Ut(d.startY),le=!Ut(d.arrowStartX)||!Ut(d.arrowStartY),de=!Ut(d.endX)||!Ut(d.endY),pe=!Ut(d.arrowEndX)||!Ut(d.arrowEndY),ze=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,Qe=no({x:d.ctrlpts[0],y:d.ctrlpts[1]},{x:d.startX,y:d.startY}),qe=Qe<ze,dt=no({x:d.ctrlpts[0],y:d.ctrlpts[1]},{x:d.endX,y:d.endY}),Lt=dt<ze,kt=!1;if(K||le||qe){kt=!0;var mt={x:d.ctrlpts[0]-m.x,y:d.ctrlpts[1]-m.y},Ft=Math.sqrt(mt.x*mt.x+mt.y*mt.y),bt={x:mt.x/Ft,y:mt.y/Ft},Ht=Math.max(b,w),Vt={x:d.ctrlpts[0]+2*bt.x*Ht,y:d.ctrlpts[1]+2*bt.y*Ht},et=L.intersectLine(m.x,m.y,b,w,Vt.x,Vt.y,0);qe?(d.ctrlpts[0]=d.ctrlpts[0]+bt.x*(ze-Qe),d.ctrlpts[1]=d.ctrlpts[1]+bt.y*(ze-Qe)):(d.ctrlpts[0]=et[0]+bt.x*ze,d.ctrlpts[1]=et[1]+bt.y*ze)}if(de||pe||Lt){kt=!0;var Wt={x:d.ctrlpts[0]-_.x,y:d.ctrlpts[1]-_.y},Tt=Math.sqrt(Wt.x*Wt.x+Wt.y*Wt.y),gn={x:Wt.x/Tt,y:Wt.y/Tt},Kt=Math.max(b,w),ln={x:d.ctrlpts[0]+2*gn.x*Kt,y:d.ctrlpts[1]+2*gn.y*Kt},Sn=G.intersectLine(_.x,_.y,E,k,ln.x,ln.y,0);Lt?(d.ctrlpts[0]=d.ctrlpts[0]+gn.x*(ze-dt),d.ctrlpts[1]=d.ctrlpts[1]+gn.y*(ze-dt)):(d.ctrlpts[0]=Sn[0]+gn.x*ze,d.ctrlpts[1]=Sn[1]+gn.y*ze)}kt&&this.findEndpoints(f)}},Ul.storeAllpts=function(f){var c=f._private.rscratch;if("multibezier"===c.edgeType||"bezier"===c.edgeType||"self"===c.edgeType||"compound"===c.edgeType){c.allpts=[],c.allpts.push(c.startX,c.startY);for(var d=0;d+1<c.ctrlpts.length;d+=2)c.allpts.push(c.ctrlpts[d],c.ctrlpts[d+1]),d+3<c.ctrlpts.length&&c.allpts.push((c.ctrlpts[d]+c.ctrlpts[d+2])/2,(c.ctrlpts[d+1]+c.ctrlpts[d+3])/2);var m;c.allpts.push(c.endX,c.endY),c.ctrlpts.length/2%2==0?(c.midX=c.allpts[m=c.allpts.length/2-1],c.midY=c.allpts[m+1]):(c.midX=cc(c.allpts[m=c.allpts.length/2-3],c.allpts[m+2],c.allpts[m+4],.5),c.midY=cc(c.allpts[m+1],c.allpts[m+3],c.allpts[m+5],.5))}else if("straight"===c.edgeType)c.allpts=[c.startX,c.startY,c.endX,c.endY],c.midX=(c.startX+c.endX+c.arrowStartX+c.arrowEndX)/4,c.midY=(c.startY+c.endY+c.arrowStartY+c.arrowEndY)/4;else if("segments"===c.edgeType)if(c.allpts=[],c.allpts.push(c.startX,c.startY),c.allpts.push.apply(c.allpts,c.segpts),c.allpts.push(c.endX,c.endY),c.segpts.length%4==0){var b=c.segpts.length/2,w=b-2;c.midX=(c.segpts[w]+c.segpts[b])/2,c.midY=(c.segpts[w+1]+c.segpts[b+1])/2}else{var E=c.segpts.length/2-1;c.midX=c.segpts[E],c.midY=c.segpts[E+1]}},Ul.checkForInvalidEdgeWarning=function(f){var c=f[0]._private.rscratch;c.nodesOverlap||Ut(c.startX)&&Ut(c.startY)&&Ut(c.endX)&&Ut(c.endY)?c.loggedErr=!1:c.loggedErr||(c.loggedErr=!0,he("Edge `"+f.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},Ul.findEdgeControlPoints=function(f){var c=this;if(f&&0!==f.length){for(var d=this,_=d.cy.hasCompoundNodes(),b={map:new xo,get:function(mt){var Ft=this.map.get(mt[0]);return null!=Ft?Ft.get(mt[1]):null},set:function(mt,Ft){var bt=this.map.get(mt[0]);null==bt&&(bt=new xo,this.map.set(mt[0],bt)),bt.set(mt[1],Ft)}},w=[],E=[],k=0;k<f.length;k++){var L=f[k],G=L._private,K=L.pstyle("curve-style").value;if(!L.removed()&&L.takesUpSpace()){if("haystack"===K){E.push(L);continue}var le="unbundled-bezier"===K||"segments"===K||"straight"===K||"straight-triangle"===K||"taxi"===K,de="unbundled-bezier"===K||"bezier"===K,Ie=G.target,Qe=[G.source.poolIndex(),Ie.poolIndex()].sort(),qe=b.get(Qe);null==qe&&(b.set(Qe,qe={eles:[]}),w.push(Qe)),qe.eles.push(L),le&&(qe.hasUnbundled=!0),de&&(qe.hasBezier=!0)}}for(var dt=function(mt){var bt=b.get(w[mt]),Ht=void 0;if(!bt.hasUnbundled){var Vt=bt.eles[0].parallelEdges().filter(function(Ui){return Ui.isBundledBezier()});mr(bt.eles),Vt.forEach(function(Ui){return bt.eles.push(Ui)}),bt.eles.sort(function(Ui,St){return Ui.poolIndex()-St.poolIndex()})}var et=bt.eles[0],Wt=et.source(),Tt=et.target();if(Wt.poolIndex()>Tt.poolIndex()){var gn=Wt;Wt=Tt,Tt=gn}var Kt=bt.srcPos=Wt.position(),ln=bt.tgtPos=Tt.position(),Sn=bt.srcW=Wt.outerWidth(),Rn=bt.srcH=Wt.outerHeight(),Jn=bt.tgtW=Tt.outerWidth(),En=bt.tgtH=Tt.outerHeight(),Yn=bt.srcShape=d.nodeShapes[c.getNodeShape(Wt)],li=bt.tgtShape=d.nodeShapes[c.getNodeShape(Tt)];bt.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var Ci=0;Ci<bt.eles.length;Ci++){var pi=bt.eles[Ci],hi=pi[0]._private.rscratch,Mn=pi.pstyle("curve-style").value,ri="unbundled-bezier"===Mn||"segments"===Mn||"taxi"===Mn,xi=!Wt.same(pi.source());if(!bt.calculatedIntersection&&Wt!==Tt&&(bt.hasBezier||bt.hasUnbundled)){bt.calculatedIntersection=!0;var ji=Yn.intersectLine(Kt.x,Kt.y,Sn,Rn,ln.x,ln.y,0),ir=bt.srcIntn=ji,Nr=li.intersectLine(ln.x,ln.y,Jn,En,Kt.x,Kt.y,0),Yr=bt.tgtIntn=Nr,pr=bt.intersectionPts={x1:ji[0],x2:Nr[0],y1:ji[1],y2:Nr[1]},tr=bt.posPts={x1:Kt.x,x2:ln.x,y1:Kt.y,y2:ln.y},$r=Nr[1]-ji[1],Mi=Nr[0]-ji[0],yr=Math.sqrt(Mi*Mi+$r*$r),Cr=bt.vector={x:Mi,y:$r},Kr=bt.vectorNorm={x:Cr.x/yr,y:Cr.y/yr},Fs={x:-Kr.y,y:Kr.x};bt.nodesOverlap=!Ut(yr)||li.checkPoint(ji[0],ji[1],0,Jn,En,ln.x,ln.y)||Yn.checkPoint(Nr[0],Nr[1],0,Sn,Rn,Kt.x,Kt.y),bt.vectorNormInverse=Fs,Ht={nodesOverlap:bt.nodesOverlap,dirCounts:bt.dirCounts,calculatedIntersection:!0,hasBezier:bt.hasBezier,hasUnbundled:bt.hasUnbundled,eles:bt.eles,srcPos:ln,tgtPos:Kt,srcW:Jn,srcH:En,tgtW:Sn,tgtH:Rn,srcIntn:Yr,tgtIntn:ir,srcShape:li,tgtShape:Yn,posPts:{x1:tr.x2,y1:tr.y2,x2:tr.x1,y2:tr.y1},intersectionPts:{x1:pr.x2,y1:pr.y2,x2:pr.x1,y2:pr.y1},vector:{x:-Cr.x,y:-Cr.y},vectorNorm:{x:-Kr.x,y:-Kr.y},vectorNormInverse:{x:-Fs.x,y:-Fs.y}}}var Zr=xi?Ht:bt;hi.nodesOverlap=Zr.nodesOverlap,hi.srcIntn=Zr.srcIntn,hi.tgtIntn=Zr.tgtIntn,_&&(Wt.isParent()||Wt.isChild()||Tt.isParent()||Tt.isChild())&&(Wt.parents().anySame(Tt)||Tt.parents().anySame(Wt)||Wt.same(Tt)&&Wt.isParent())?c.findCompoundLoopPoints(pi,Zr,Ci,ri):Wt===Tt?c.findLoopPoints(pi,Zr,Ci,ri):"segments"===Mn?c.findSegmentsPoints(pi,Zr):"taxi"===Mn?c.findTaxiPoints(pi,Zr):"straight"===Mn||!ri&&bt.eles.length%2==1&&Ci===Math.floor(bt.eles.length/2)?c.findStraightEdgePoints(pi):c.findBezierPoints(pi,Zr,Ci,ri,xi),c.findEndpoints(pi),c.tryToCorrectInvalidPoints(pi,Zr),c.checkForInvalidEdgeWarning(pi),c.storeAllpts(pi),c.storeEdgeProjections(pi),c.calculateArrowAngles(pi),c.recalculateEdgeLabelProjections(pi),c.calculateLabelAngles(pi)}},Lt=0;Lt<w.length;Lt++)dt(Lt);this.findHaystackPoints(E)}},Ul.getSegmentPoints=function(f){var c=f[0]._private.rscratch;if("segments"===c.edgeType)return this.recalculateRenderedStyle(f),Bm(c.segpts)},Ul.getControlPoints=function(f){var c=f[0]._private.rscratch,d=c.edgeType;if("bezier"===d||"multibezier"===d||"self"===d||"compound"===d)return this.recalculateRenderedStyle(f),Bm(c.ctrlpts)},Ul.getEdgeMidpoint=function(f){var c=f[0]._private.rscratch;return this.recalculateRenderedStyle(f),{x:c.midX,y:c.midY}};var mh={manualEndptToPx:function(f,c){var m=f.position(),_=f.outerWidth(),b=f.outerHeight();if(2===c.value.length){var w=[c.pfValue[0],c.pfValue[1]];return"%"===c.units[0]&&(w[0]=w[0]*_),"%"===c.units[1]&&(w[1]=w[1]*b),w[0]+=m.x,w[1]+=m.y,w}var E=c.pfValue[0];E=-Math.PI/2+E;var k=2*Math.max(_,b),L=[m.x+Math.cos(E)*k,m.y+Math.sin(E)*k];return this.nodeShapes[this.getNodeShape(f)].intersectLine(m.x,m.y,_,b,L[0],L[1],0)},findEndpoints:function(f){var d,Ht,Vt,et,Wt,c=this,m=f.source()[0],_=f.target()[0],b=m.position(),w=_.position(),E=f.pstyle("target-arrow-shape").value,k=f.pstyle("source-arrow-shape").value,L=f.pstyle("target-distance-from-node").pfValue,G=f.pstyle("source-distance-from-node").pfValue,K=f.pstyle("curve-style").value,le=f._private.rscratch,de=le.edgeType,Ie="self"===de||"compound"===de,Ne="bezier"===de||"multibezier"===de||Ie,ze="bezier"!==de,Qe="straight"===de||"segments"===de,qe="segments"===de,dt=Ne||ze||Qe,Lt=Ie||"taxi"===K,kt=f.pstyle("source-endpoint"),mt=Lt?"outside-to-node":kt.value,Ft=f.pstyle("target-endpoint"),bt=Lt?"outside-to-node":Ft.value;if(le.srcManEndpt=kt,le.tgtManEndpt=Ft,Ne){var Tt=[le.ctrlpts[0],le.ctrlpts[1]];Ht=ze?[le.ctrlpts[le.ctrlpts.length-2],le.ctrlpts[le.ctrlpts.length-1]]:Tt,Vt=Tt}else if(Qe){var Kt=qe?le.segpts.slice(0,2):[w.x,w.y];Ht=qe?le.segpts.slice(le.segpts.length-2):[b.x,b.y],Vt=Kt}if("inside-to-node"===bt)d=[w.x,w.y];else if(Ft.units)d=this.manualEndptToPx(_,Ft);else if("outside-to-line"===bt)d=le.tgtIntn;else if("outside-to-node"===bt||"outside-to-node-or-label"===bt?et=Ht:("outside-to-line"===bt||"outside-to-line-or-label"===bt)&&(et=[b.x,b.y]),d=c.nodeShapes[this.getNodeShape(_)].intersectLine(w.x,w.y,_.outerWidth(),_.outerHeight(),et[0],et[1],0),"outside-to-node-or-label"===bt||"outside-to-line-or-label"===bt){var Sn=_._private.rscratch,En=Sn.labelX,Yn=Sn.labelY,li=Sn.labelWidth/2,Ci=Sn.labelHeight/2,pi=_.pstyle("text-valign").value;"top"===pi?Yn-=Ci:"bottom"===pi&&(Yn+=Ci);var hi=_.pstyle("text-halign").value;"left"===hi?En-=li:"right"===hi&&(En+=li);var Mn=uu(et[0],et[1],[En-li,Yn-Ci,En+li,Yn-Ci,En+li,Yn+Ci,En-li,Yn+Ci],w.x,w.y);if(Mn.length>0){var ri=b,xi=Eh(ri,id(d)),ji=Eh(ri,id(Mn)),ir=xi;ji<xi&&(d=Mn,ir=ji),Mn.length>2&&Eh(ri,{x:Mn[2],y:Mn[3]})<ir&&(d=[Mn[2],Mn[3]])}}var Yr=Xf(d,Ht,c.arrowShapes[E].spacing(f)+L),pr=Xf(d,Ht,c.arrowShapes[E].gap(f)+L);if(le.endX=pr[0],le.endY=pr[1],le.arrowEndX=Yr[0],le.arrowEndY=Yr[1],"inside-to-node"===mt)d=[b.x,b.y];else if(kt.units)d=this.manualEndptToPx(m,kt);else if("outside-to-line"===mt)d=le.srcIntn;else if("outside-to-node"===mt||"outside-to-node-or-label"===mt?Wt=Vt:("outside-to-line"===mt||"outside-to-line-or-label"===mt)&&(Wt=[w.x,w.y]),d=c.nodeShapes[this.getNodeShape(m)].intersectLine(b.x,b.y,m.outerWidth(),m.outerHeight(),Wt[0],Wt[1],0),"outside-to-node-or-label"===mt||"outside-to-line-or-label"===mt){var tr=m._private.rscratch,yr=tr.labelX,Cr=tr.labelY,Kr=tr.labelWidth/2,Fs=tr.labelHeight/2,Zr=m.pstyle("text-valign").value;"top"===Zr?Cr-=Fs:"bottom"===Zr&&(Cr+=Fs);var Ui=m.pstyle("text-halign").value;"left"===Ui?yr-=Kr:"right"===Ui&&(yr+=Kr);var St=uu(Wt[0],Wt[1],[yr-Kr,Cr-Fs,yr+Kr,Cr-Fs,yr+Kr,Cr+Fs,yr-Kr,Cr+Fs],b.x,b.y);if(St.length>0){var $n=w,Ei=Eh($n,id(d)),Ve=Eh($n,id(St)),lt=Ei;Ve<Ei&&(d=[St[0],St[1]],lt=Ve),St.length>2&&Eh($n,{x:St[2],y:St[3]})<lt&&(d=[St[2],St[3]])}}var dn=Xf(d,Vt,c.arrowShapes[k].spacing(f)+G),pn=Xf(d,Vt,c.arrowShapes[k].gap(f)+G);le.startX=pn[0],le.startY=pn[1],le.arrowStartX=dn[0],le.arrowStartY=dn[1],dt&&(le.badLine=!(Ut(le.startX)&&Ut(le.startY)&&Ut(le.endX)&&Ut(le.endY)))},getSourceEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[0],y:c.haystackPts[1]}:{x:c.arrowStartX,y:c.arrowStartY}},getTargetEndpoint:function(f){var c=f[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(f),c.edgeType)?{x:c.haystackPts[2],y:c.haystackPts[3]}:{x:c.arrowEndX,y:c.arrowEndY}}},tg={};function zm(f,c,d){for(var m=function(L,G,K,le){return cc(L,G,K,le)},b=c._private.rstyle.bezierPts,w=0;w<f.bezierProjPcts.length;w++){var E=f.bezierProjPcts[w];b.push({x:m(d[0],d[2],d[4],E),y:m(d[1],d[3],d[5],E)})}}tg.storeEdgeProjections=function(f){var c=f._private,d=c.rscratch,m=d.edgeType;if(c.rstyle.bezierPts=null,c.rstyle.linePts=null,c.rstyle.haystackPts=null,"multibezier"===m||"bezier"===m||"self"===m||"compound"===m){c.rstyle.bezierPts=[];for(var _=0;_+5<d.allpts.length;_+=4)zm(this,f,d.allpts.slice(_,_+6))}else if("segments"===m){var b=c.rstyle.linePts=[];for(_=0;_+1<d.allpts.length;_+=2)b.push({x:d.allpts[_],y:d.allpts[_+1]})}else if("haystack"===m){var w=d.haystackPts;c.rstyle.haystackPts=[{x:w[0],y:w[1]},{x:w[2],y:w[3]}]}c.rstyle.arrowWidth=this.getArrowWidth(f.pstyle("width").pfValue,f.pstyle("arrow-scale").value)*this.arrowShapeWidth},tg.recalculateEdgeProjections=function(f){this.findEdgeControlPoints(f)};var kc={recalculateNodeLabelProjection:function(f){var c=f.pstyle("label").strValue;if(!Ce(c)){var d,m,_=f._private,b=f.width(),w=f.height(),E=f.padding(),k=f.position(),L=f.pstyle("text-halign").strValue,G=f.pstyle("text-valign").strValue,K=_.rscratch,le=_.rstyle;switch(L){case"left":d=k.x-b/2-E;break;case"right":d=k.x+b/2+E;break;default:d=k.x}switch(G){case"top":m=k.y-w/2-E;break;case"bottom":m=k.y+w/2+E;break;default:m=k.y}K.labelX=d,K.labelY=m,le.labelX=d,le.labelY=m,this.calculateLabelAngles(f),this.applyLabelDimensions(f)}}},ka=function(c,d){var m=Math.atan(d/c);return 0===c&&m<0&&(m*=-1),m},gc=function(c,d){return ka(d.x-c.x,d.y-c.y)};kc.recalculateEdgeLabelProjections=function(f){var c,d=f._private,m=d.rscratch,_=this,b={mid:f.pstyle("label").strValue,source:f.pstyle("source-label").strValue,target:f.pstyle("target-label").strValue};if(b.mid||b.source||b.target){var w=function(K,le,de){Gs(d.rscratch,K,le,de),Gs(d.rstyle,K,le,de)};w("labelX",null,(c={x:m.midX,y:m.midY}).x),w("labelY",null,c.y);var E=ka(m.midDispX,m.midDispY);w("labelAutoAngle",null,E);var k=function G(){if(G.cache)return G.cache;for(var K=[],le=0;le+5<m.allpts.length;le+=4)K.push({p0:{x:m.allpts[le],y:m.allpts[le+1]},p1:{x:m.allpts[le+2],y:m.allpts[le+3]},p2:{x:m.allpts[le+4],y:m.allpts[le+5]},startDist:0,length:0,segments:[]});var Ne=d.rstyle.bezierPts,ze=_.bezierProjPcts.length;function Qe(mt,Ft,bt,Ht,Vt){var et=no(Ft,bt),Wt=mt.segments[mt.segments.length-1];mt.segments.push({p0:Ft,p1:bt,t0:Ht,t1:Vt,startDist:Wt?Wt.startDist+Wt.length:0,length:et}),mt.length+=et}for(var qe=0;qe<K.length;qe++){var dt=K[qe],Lt=K[qe-1];Lt&&(dt.startDist=Lt.startDist+Lt.length),Qe(dt,dt.p0,Ne[qe*ze],0,_.bezierProjPcts[0]);for(var kt=0;kt<ze-1;kt++)Qe(dt,Ne[qe*ze+kt],Ne[qe*ze+kt+1],_.bezierProjPcts[kt],_.bezierProjPcts[kt+1]);Qe(dt,Ne[qe*ze+ze-1],dt.p2,_.bezierProjPcts[ze-1],1)}return G.cache=K},L=function(K){var le,de="source"===K;if(b[K]){var pe=f.pstyle(K+"-text-offset").pfValue;switch(m.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var Ne,Ie=k(),ze=0,Qe=0,qe=0;qe<Ie.length;qe++){for(var dt=Ie[de?qe:Ie.length-1-qe],Lt=0;Lt<dt.segments.length;Lt++){var kt=dt.segments[de?Lt:dt.segments.length-1-Lt];if(ze=Qe,(Qe+=kt.length)>=pe||qe===Ie.length-1&&Lt===dt.segments.length-1){Ne={cp:dt,segment:kt};break}}if(Ne)break}var Ft=Ne.cp,bt=Ne.segment,Ht=(pe-ze)/bt.length,Vt=bt.t1-bt.t0,et=de?bt.t0+Vt*Ht:bt.t1-Vt*Ht;et=Dr(0,et,1),c=Yi(Ft.p0,Ft.p1,Ft.p2,et),le=function(c,d,m,_){var b=Dr(0,_-.001,1),w=Dr(0,_+.001,1),E=Yi(c,d,m,b),k=Yi(c,d,m,w);return gc(E,k)}(Ft.p0,Ft.p1,Ft.p2,et);break;case"straight":case"segments":case"haystack":for(var Tt,gn,Kt,ln,Wt=0,Sn=m.allpts.length,Rn=0;Rn+3<Sn&&(de?(Kt={x:m.allpts[Rn],y:m.allpts[Rn+1]},ln={x:m.allpts[Rn+2],y:m.allpts[Rn+3]}):(Kt={x:m.allpts[Sn-2-Rn],y:m.allpts[Sn-1-Rn]},ln={x:m.allpts[Sn-4-Rn],y:m.allpts[Sn-3-Rn]}),gn=Wt,!((Wt+=Tt=no(Kt,ln))>=pe));Rn+=2);var En=(pe-gn)/Tt;En=Dr(0,En,1),c=function(c,d,m,_){var b_x=d.x-c.x,b_y=d.y-c.y,w=no(c,d);return m=m??0,{x:c.x+b_x/w*(_=_??m*w),y:c.y+b_y/w*_}}(Kt,ln,En),le=gc(Kt,ln)}w("labelX",K,c.x),w("labelY",K,c.y),w("labelAutoAngle",K,le)}};L("source"),L("target"),this.applyLabelDimensions(f)}},kc.applyLabelDimensions=function(f){this.applyPrefixedLabelDimensions(f),f.isEdge()&&(this.applyPrefixedLabelDimensions(f,"source"),this.applyPrefixedLabelDimensions(f,"target"))},kc.applyPrefixedLabelDimensions=function(f,c){var d=f._private,m=this.getLabelText(f,c),_=this.calculateLabelDimensions(f,m),b=f.pstyle("line-height").pfValue,w=f.pstyle("text-wrap").strValue,E=sr(d.rscratch,"labelWrapCachedLines",c)||[],k="wrap"!==w?1:Math.max(E.length,1),L=_.height/k,G=L*b,K=_.width,le=_.height+(k-1)*(b-1)*L;Gs(d.rstyle,"labelWidth",c,K),Gs(d.rscratch,"labelWidth",c,K),Gs(d.rstyle,"labelHeight",c,le),Gs(d.rscratch,"labelHeight",c,le),Gs(d.rscratch,"labelLineHeight",c,G)},kc.getLabelText=function(f,c){var d=f._private,_=f.pstyle((c?c+"-":"")+"label").strValue,b=f.pstyle("text-transform").value,w=function(Jn,En){return En?(Gs(d.rscratch,Jn,c,En),En):sr(d.rscratch,Jn,c)};if(!_)return"";"none"==b||("uppercase"==b?_=_.toUpperCase():"lowercase"==b&&(_=_.toLowerCase()));var E=f.pstyle("text-wrap").value;if("wrap"===E){var k=w("labelKey");if(null!=k&&w("labelWrapKey")===k)return w("labelWrapCachedText");for(var G=_.split("\n"),K=f.pstyle("text-max-width").pfValue,de="anywhere"===f.pstyle("text-overflow-wrap").value,pe=[],Ie=/[\s\u200b]+/,Ne=de?"":" ",ze=0;ze<G.length;ze++){var Qe=G[ze],dt=this.calculateLabelDimensions(f,Qe).width;if(de){var Lt=Qe.split("").join("\u200b");Qe=Lt}if(dt>K){for(var kt=Qe.split(Ie),mt="",Ft=0;Ft<kt.length;Ft++){var bt=kt[Ft];this.calculateLabelDimensions(f,0===mt.length?bt:mt+Ne+bt).width<=K?mt+=bt+Ne:(mt&&pe.push(mt),mt=bt+Ne)}mt.match(/^[\s\u200b]+$/)||pe.push(mt)}else pe.push(Qe)}w("labelWrapCachedLines",pe),_=w("labelWrapCachedText",pe.join("\n")),w("labelWrapKey",k)}else if("ellipsis"===E){var Wt=f.pstyle("text-max-width").pfValue,Tt="",Kt=!1;if(this.calculateLabelDimensions(f,_).width<Wt)return _;for(var ln=0;ln<_.length&&!(this.calculateLabelDimensions(f,Tt+_[ln]+"\u2026").width>Wt);ln++)Tt+=_[ln],ln===_.length-1&&(Kt=!0);return Kt||(Tt+="\u2026"),Tt}return _},kc.getLabelJustification=function(f){var c=f.pstyle("text-justification").strValue,d=f.pstyle("text-halign").strValue;if("auto"!==c)return c;if(!f.isNode())return"center";switch(d){case"left":return"right";case"right":return"left";default:return"center"}},kc.calculateLabelDimensions=function(f,c){var m=xc(c,f._private.labelDimsKey),_=this.labelDimCache||(this.labelDimCache=[]),b=_[m];if(null!=b)return b;var E=f.pstyle("font-style").strValue,k=f.pstyle("font-size").pfValue,L=f.pstyle("font-family").strValue,G=f.pstyle("font-weight").strValue,K=this.labelCalcCanvas,le=this.labelCalcCanvasContext;if(!K){K=this.labelCalcCanvas=document.createElement("canvas"),le=this.labelCalcCanvasContext=K.getContext("2d");var de=K.style;de.position="absolute",de.left="-9999px",de.top="-9999px",de.zIndex="-1",de.visibility="hidden",de.pointerEvents="none"}le.font="".concat(E," ").concat(G," ").concat(k,"px ").concat(L);for(var pe=0,Ie=0,Ne=c.split("\n"),ze=0;ze<Ne.length;ze++){var qe=le.measureText(Ne[ze]),dt=Math.ceil(qe.width),Lt=k;pe=Math.max(dt,pe),Ie+=Lt}return _[m]={width:pe+=0,height:Ie+=0}},kc.calculateLabelAngle=function(f,c){var m=f._private.rscratch,_=f.isEdge(),w=f.pstyle((c?c+"-":"")+"text-rotation"),E=w.strValue;return"none"===E?0:_&&"autorotate"===E?m.labelAutoAngle:"autorotate"===E?0:w.pfValue},kc.calculateLabelAngles=function(f){var c=this,d=f.isEdge(),_=f._private.rscratch;_.labelAngle=c.calculateLabelAngle(f),d&&(_.sourceLabelAngle=c.calculateLabelAngle(f,"source"),_.targetLabelAngle=c.calculateLabelAngle(f,"target"))};var ng={},Wu=!1;ng.getNodeShape=function(f){var d=f.pstyle("shape").value;if("cutrectangle"===d&&(f.width()<28||f.height()<28))return Wu||(he("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Wu=!0),"rectangle";if(f.isParent())return"rectangle"===d||"roundrectangle"===d||"round-rectangle"===d||"cutrectangle"===d||"cut-rectangle"===d||"barrel"===d?d:"rectangle";if("polygon"===d){var m=f.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(m).name}return d};var pd={updateCachedGrabbedEles:function(){var f=this.cachedZSortedEles;if(f){f.drag=[],f.nondrag=[];for(var c=[],d=0;d<f.length;d++){var _=(m=f[d])._private.rscratch;m.grabbed()&&!m.isParent()?c.push(m):_.inDragLayer?f.drag.push(m):f.nondrag.push(m)}for(d=0;d<c.length;d++){var m;f.drag.push(m=c[d])}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(f){if(f||!this.cachedZSortedEles){var c=this.cy.mutableElements().toArray();c.sort(lp),c.interactive=c.filter(function(d){return d.interactive()}),this.cachedZSortedEles=c,this.updateCachedGrabbedEles()}else c=this.cachedZSortedEles;return c}},vh={};[Ra,Nm,Ul,mh,tg,kc,ng,{registerCalculationListeners:function(){var f=this.cy,c=f.collection(),d=this,m=function(w){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(c.merge(w),E)for(var k=0;k<w.length;k++){var L=w[k],G=L._private,K=G.rstyle;K.clean=!1,K.cleanConnected=!1}};d.binder(f).on("bounds.* dirty.*",function(w){m(w.target)}).on("style.* background.*",function(w){m(w.target,!1)});var _=function(w){if(w){var E=d.onUpdateEleCalcsFns;c.cleanStyle();for(var k=0;k<c.length;k++){var L=c[k],G=L._private.rstyle;L.isNode()&&!G.cleanConnected&&(m(L.connectedEdges()),G.cleanConnected=!0)}if(E)for(var K=0;K<E.length;K++)(0,E[K])(w,c);d.recalculateRenderedStyle(c),c=f.collection()}};d.flushRenderedStyleQueue=function(){_(!0)},d.beforeRender(_,d.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(f){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(f)},recalculateRenderedStyle:function(f,c){var d=function(dt){return dt._private.rstyle.cleanConnected},m=[],_=[];if(!this.destroyed){void 0===c&&(c=!0);for(var b=0;b<f.length;b++){var w=f[b],E=w._private,k=E.rstyle;w.isEdge()&&(!d(w.source())||!d(w.target()))&&(k.clean=!1),!(c&&k.clean||w.removed())&&"none"!==w.pstyle("display").value&&("nodes"===E.group?_.push(w):m.push(w),k.clean=!0)}for(var L=0;L<_.length;L++){var G=_[L],le=G._private.rstyle,de=G.position();this.recalculateNodeLabelProjection(G),le.nodeX=de.x,le.nodeY=de.y,le.nodeW=G.pstyle("width").pfValue,le.nodeH=G.pstyle("height").pfValue}this.recalculateEdgeProjections(m);for(var pe=0;pe<m.length;pe++){var Ne=m[pe]._private,ze=Ne.rstyle,Qe=Ne.rscratch;ze.srcX=Qe.arrowStartX,ze.srcY=Qe.arrowStartY,ze.tgtX=Qe.arrowEndX,ze.tgtY=Qe.arrowEndY,ze.midX=Qe.midX,ze.midY=Qe.midY,ze.labelAngle=Qe.labelAngle,ze.sourceLabelAngle=Qe.sourceLabelAngle,ze.targetLabelAngle=Qe.targetLabelAngle}}}},pd].forEach(function(f){er(vh,f)});var Zd={getCachedImage:function(f,c,d){var _=this.imageCache=this.imageCache||{},b=_[f];if(b)return b.image.complete||b.image.addEventListener("load",d),b.image;var w=(b=_[f]=_[f]||{}).image=new Image;w.addEventListener("load",d),w.addEventListener("error",function(){w.error=!0});var E="data:";return f.substring(0,E.length).toLowerCase()===E||(w.crossOrigin=c),w.src=f,w}},tu={registerBinding:function(f,c,d,m){var _=Array.prototype.slice.apply(arguments,[1]),b=this.binder(f);return b.on.apply(b,_)},binder:function(f){var c=this,d=f===window||f===document||f===document.body||function(c){return!(typeof HTMLElement>"u")&&c instanceof HTMLElement}(f);if(null==c.supportsPassiveEvents){var m=!1;try{var _=Object.defineProperty({},"passive",{get:function(){return m=!0,!0}});window.addEventListener("test",null,_)}catch{}c.supportsPassiveEvents=m}var b=function(E,k,L){var G=Array.prototype.slice.call(arguments);return d&&c.supportsPassiveEvents&&(G[2]={capture:L??!1,passive:!1,once:!1}),c.bindings.push({target:f,args:G}),(f.addEventListener||f.on).apply(f,G),this};return{on:b,addEventListener:b,addListener:b,bind:b}},nodeIsDraggable:function(f){return f&&f.isNode()&&!f.locked()&&f.grabbable()},nodeIsGrabbable:function(f){return this.nodeIsDraggable(f)&&f.interactive()}};tu.load=function(){var f=this,c=function(St){return St.selected()},d=function(St,$n,Ei,Ve){null==St&&(St=f.cy);for(var lt=0;lt<$n.length;lt++)St.emit({originalEvent:Ei,type:$n[lt],position:Ve})},m=function(St){return St.shiftKey||St.metaKey||St.ctrlKey},_=function(St,$n){var Ei=!0;if(f.cy.hasCompoundNodes()&&St&&St.pannable()){for(var Ve=0;$n&&Ve<$n.length;Ve++)if((St=$n[Ve]).isNode()&&St.isParent()&&!St.pannable()){Ei=!1;break}}else Ei=!0;return Ei},E=function(St){St[0]._private.rscratch.inDragLayer=!0},L=function(St){St[0]._private.rscratch.isGrabTarget=!0},K=function(St,$n){var Ei=$n.addToList;!Ei.has(St)&&St.grabbable()&&!St.locked()&&(Ei.merge(St),function(St){St[0]._private.grabbed=!0}(St))},de=function(St,$n){$n=$n||{};var Ei=St.cy().hasCompoundNodes();$n.inDragLayer&&(St.forEach(E),St.neighborhood().stdFilter(function(Ve){return!Ei||Ve.isEdge()}).forEach(E)),$n.addToList&&St.forEach(function(Ve){K(Ve,$n)}),function(St,$n){if(St.cy().hasCompoundNodes()&&(null!=$n.inDragLayer||null!=$n.addToList)){var Ei=St.descendants();$n.inDragLayer&&(Ei.forEach(E),Ei.connectedEdges().forEach(E)),$n.addToList&&K(Ei,$n)}}(St,$n),Ne(St,{inDragLayer:$n.inDragLayer}),f.updateCachedGrabbedEles()},pe=de,Ie=function(St){!St||(f.getCachedZSortedEles().forEach(function($n){(function(St){St[0]._private.grabbed=!1})($n),function(St){St[0]._private.rscratch.inDragLayer=!1}($n),function(St){St[0]._private.rscratch.isGrabTarget=!1}($n)}),f.updateCachedGrabbedEles())},Ne=function(St,$n){if((null!=$n.inDragLayer||null!=$n.addToList)&&St.cy().hasCompoundNodes()){var Ei=St.ancestors().orphans();if(!Ei.same(St)){var Ve=Ei.descendants().spawnSelf().merge(Ei).unmerge(St).unmerge(St.descendants()),lt=Ve.connectedEdges();$n.inDragLayer&&(lt.forEach(E),Ve.forEach(E)),$n.addToList&&Ve.forEach(function(an){K(an,$n)})}}},ze=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},Qe=typeof MutationObserver<"u",qe=typeof ResizeObserver<"u";Qe?(f.removeObserver=new MutationObserver(function(Ui){for(var St=0;St<Ui.length;St++){var Ei=Ui[St].removedNodes;if(Ei)for(var Ve=0;Ve<Ei.length;Ve++)if(Ei[Ve]===f.container){f.destroy();break}}}),f.container.parentNode&&f.removeObserver.observe(f.container.parentNode,{childList:!0})):f.registerBinding(f.container,"DOMNodeRemoved",function(Ui){f.destroy()});var dt=O.default(function(){f.cy.resize()},100);Qe&&(f.styleObserver=new MutationObserver(dt),f.styleObserver.observe(f.container,{attributes:!0})),f.registerBinding(window,"resize",dt),qe&&(f.resizeObserver=new ResizeObserver(dt),f.resizeObserver.observe(f.container));var kt=function(){f.invalidateContainerClientCoordsCache()};(function(St,$n){for(;null!=St;)f.registerBinding(Ui=St,"transitionend",kt),f.registerBinding(Ui,"animationend",kt),f.registerBinding(Ui,"scroll",kt),St=St.parentNode;var Ui})(f.container),f.registerBinding(f.container,"contextmenu",function(Ui){Ui.preventDefault()});var bt,Ht,Vt,Ft=function(St){for(var $n=f.findContainerClientCoords(),Ei=$n[0],Ve=$n[1],lt=$n[2],an=$n[3],dn=St.touches?St.touches:[St],pn=!1,Zi=0;Zi<dn.length;Zi++){var rr=dn[Zi];if(Ei<=rr.clientX&&rr.clientX<=Ei+lt&&Ve<=rr.clientY&&rr.clientY<=Ve+an){pn=!0;break}}if(!pn)return!1;for(var ni=f.container,Oi=St.target.parentNode,Ni=!1;Oi;){if(Oi===ni){Ni=!0;break}Oi=Oi.parentNode}return!!Ni};f.registerBinding(f.container,"mousedown",function(St){if(Ft(St)){St.preventDefault(),ze(),f.hoverData.capture=!0,f.hoverData.which=St.which;var $n=f.cy,Ei=[St.clientX,St.clientY],Ve=f.projectIntoViewport(Ei[0],Ei[1]),lt=f.selection,an=f.findNearestElements(Ve[0],Ve[1],!0,!1),dn=an[0],pn=f.dragData.possibleDragElements;if(f.hoverData.mdownPos=Ve,f.hoverData.mdownGPos=Ei,3==St.which){f.hoverData.cxtStarted=!0;var rr={originalEvent:St,type:"cxttapstart",position:{x:Ve[0],y:Ve[1]}};dn?(dn.activate(),dn.emit(rr),f.hoverData.down=dn):$n.emit(rr),f.hoverData.downTime=(new Date).getTime(),f.hoverData.cxtDragged=!1}else if(1==St.which){if(dn&&dn.activate(),null!=dn&&f.nodeIsGrabbable(dn)){var ni=function(Ki){return{originalEvent:St,type:Ki,position:{x:Ve[0],y:Ve[1]}}};if(L(dn),dn.selected()){pn=f.dragData.possibleDragElements=$n.collection();var Oi=$n.$(function(Ni){return Ni.isNode()&&Ni.selected()&&f.nodeIsGrabbable(Ni)});de(Oi,{addToList:pn}),dn.emit(ni("grabon")),Oi.forEach(function(Ki){Ki.emit(ni("grab"))})}else pn=f.dragData.possibleDragElements=$n.collection(),pe(dn,{addToList:pn}),dn.emit(ni("grabon")).emit(ni("grab"));f.redrawHint("eles",!0),f.redrawHint("drag",!0)}f.hoverData.down=dn,f.hoverData.downs=an,f.hoverData.downTime=(new Date).getTime(),d(dn,["mousedown","tapstart","vmousedown"],St,{x:Ve[0],y:Ve[1]}),null==dn?(lt[4]=1,f.data.bgActivePosistion={x:Ve[0],y:Ve[1]},f.redrawHint("select",!0),f.redraw()):dn.pannable()&&(lt[4]=1),f.hoverData.tapholdCancelled=!1,clearTimeout(f.hoverData.tapholdTimeout),f.hoverData.tapholdTimeout=setTimeout(function(){if(!f.hoverData.tapholdCancelled){var Ki=f.hoverData.down;Ki?Ki.emit({originalEvent:St,type:"taphold",position:{x:Ve[0],y:Ve[1]}}):$n.emit({originalEvent:St,type:"taphold",position:{x:Ve[0],y:Ve[1]}})}},f.tapholdDuration)}lt[0]=lt[2]=Ve[0],lt[1]=lt[3]=Ve[1]}},!1),f.registerBinding(window,"mousemove",function(St){var zc;if(f.hoverData.capture||Ft(St)){var Ei=!1,Ve=f.cy,lt=Ve.zoom(),an=[St.clientX,St.clientY],dn=f.projectIntoViewport(an[0],an[1]),pn=f.hoverData.mdownPos,Zi=f.hoverData.mdownGPos,rr=f.selection,ni=null;!f.hoverData.draggingEles&&!f.hoverData.dragging&&!f.hoverData.selecting&&(ni=f.findNearestElement(dn[0],dn[1],!0,!1));var eo,Or=f.hoverData.last,Oi=f.hoverData.down,Ni=[dn[0]-rr[2],dn[1]-rr[3]],Ki=f.dragData.possibleDragElements;if(Zi){var ao=an[0]-Zi[0],Uo=an[1]-Zi[1];f.hoverData.isOverThresholdDrag=eo=ao*ao+Uo*Uo>=f.desktopTapThreshold2}var Ir=m(St);eo&&(f.hoverData.tapholdCancelled=!0),Ei=!0,d(ni,["mousemove","vmousemove","tapdrag"],St,{x:dn[0],y:dn[1]});var Hl=function(){f.data.bgActivePosistion=void 0,f.hoverData.selecting||Ve.emit({originalEvent:St,type:"boxstart",position:{x:dn[0],y:dn[1]}}),rr[4]=1,f.hoverData.selecting=!0,f.redrawHint("select",!0),f.redraw()};if(3===f.hoverData.which){if(eo){var Gl={originalEvent:St,type:"cxtdrag",position:{x:dn[0],y:dn[1]}};Oi?Oi.emit(Gl):Ve.emit(Gl),f.hoverData.cxtDragged=!0,(!f.hoverData.cxtOver||ni!==f.hoverData.cxtOver)&&(f.hoverData.cxtOver&&f.hoverData.cxtOver.emit({originalEvent:St,type:"cxtdragout",position:{x:dn[0],y:dn[1]}}),f.hoverData.cxtOver=ni,ni&&ni.emit({originalEvent:St,type:"cxtdragover",position:{x:dn[0],y:dn[1]}}))}}else if(f.hoverData.dragging){if(Ei=!0,Ve.panningEnabled()&&Ve.userPanningEnabled()){var Fc;if(f.hoverData.justStartedPan){var Cp=f.hoverData.mdownPos;Fc={x:(dn[0]-Cp[0])*lt,y:(dn[1]-Cp[1])*lt},f.hoverData.justStartedPan=!1}else Fc={x:Ni[0]*lt,y:Ni[1]*lt};Ve.panBy(Fc),Ve.emit("dragpan"),f.hoverData.dragged=!0}dn=f.projectIntoViewport(St.clientX,St.clientY)}else if(1!=rr[4]||null!=Oi&&!Oi.pannable()){if(Oi&&Oi.pannable()&&Oi.active()&&Oi.unactivate(),(!Oi||!Oi.grabbed())&&ni!=Or&&(Or&&d(Or,["mouseout","tapdragout"],St,{x:dn[0],y:dn[1]}),ni&&d(ni,["mouseover","tapdragover"],St,{x:dn[0],y:dn[1]}),f.hoverData.last=ni),Oi)if(eo){if(Ve.boxSelectionEnabled()&&Ir)Oi&&Oi.grabbed()&&(Ie(Ki),Oi.emit("freeon"),Ki.emit("free"),f.dragData.didDrag&&(Oi.emit("dragfreeon"),Ki.emit("dragfree"))),Hl();else if(Oi&&Oi.grabbed()&&f.nodeIsDraggable(Oi)){var Nc=!f.dragData.didDrag;Nc&&f.redrawHint("eles",!0),f.dragData.didDrag=!0,f.hoverData.draggingEles||de(Ki,{inDragLayer:!0});var ic={x:0,y:0};if(Ut(Ni[0])&&Ut(Ni[1])&&(ic.x+=Ni[0],ic.y+=Ni[1],Nc)){var Bc=f.hoverData.dragDelta;Bc&&Ut(Bc[0])&&Ut(Bc[1])&&(ic.x+=Bc[0],ic.y+=Bc[1])}f.hoverData.draggingEles=!0,Ki.silentShift(ic).emit("position drag"),f.redrawHint("drag",!0),f.redraw()}}else 0===(zc=f.hoverData.dragDelta=f.hoverData.dragDelta||[]).length?(zc.push(Ni[0]),zc.push(Ni[1])):(zc[0]+=Ni[0],zc[1]+=Ni[1]);Ei=!0}else eo&&(f.hoverData.dragging||!Ve.boxSelectionEnabled()||!Ir&&Ve.panningEnabled()&&Ve.userPanningEnabled()?!f.hoverData.selecting&&Ve.panningEnabled()&&Ve.userPanningEnabled()&&_(Oi,f.hoverData.downs)&&(f.hoverData.dragging=!0,f.hoverData.justStartedPan=!0,rr[4]=0,f.data.bgActivePosistion=id(pn),f.redrawHint("select",!0),f.redraw()):Hl(),Oi&&Oi.pannable()&&Oi.active()&&Oi.unactivate());if(rr[2]=dn[0],rr[3]=dn[1],Ei)return St.stopPropagation&&St.stopPropagation(),St.preventDefault&&St.preventDefault(),!1}},!1),f.registerBinding(window,"mouseup",function(St){if(f.hoverData.capture){f.hoverData.capture=!1;var Ei=f.cy,Ve=f.projectIntoViewport(St.clientX,St.clientY),lt=f.selection,an=f.findNearestElement(Ve[0],Ve[1],!0,!1),dn=f.dragData.possibleDragElements,pn=f.hoverData.down,Zi=m(St);if(f.data.bgActivePosistion&&(f.redrawHint("select",!0),f.redraw()),f.hoverData.tapholdCancelled=!0,f.data.bgActivePosistion=void 0,pn&&pn.unactivate(),3===f.hoverData.which){var rr={originalEvent:St,type:"cxttapend",position:{x:Ve[0],y:Ve[1]}};if(pn?pn.emit(rr):Ei.emit(rr),!f.hoverData.cxtDragged){var ni={originalEvent:St,type:"cxttap",position:{x:Ve[0],y:Ve[1]}};pn?pn.emit(ni):Ei.emit(ni)}f.hoverData.cxtDragged=!1,f.hoverData.which=null}else if(1===f.hoverData.which){if(d(an,["mouseup","tapend","vmouseup"],St,{x:Ve[0],y:Ve[1]}),!f.dragData.didDrag&&!f.hoverData.dragged&&!f.hoverData.selecting&&!f.hoverData.isOverThresholdDrag&&(d(pn,["click","tap","vclick"],St,{x:Ve[0],y:Ve[1]}),Ht=!1,St.timeStamp-Vt<=Ei.multiClickDebounceTime()?(bt&&clearTimeout(bt),Ht=!0,Vt=null,d(pn,["dblclick","dbltap","vdblclick"],St,{x:Ve[0],y:Ve[1]})):(bt=setTimeout(function(){Ht||d(pn,["oneclick","onetap","voneclick"],St,{x:Ve[0],y:Ve[1]})},Ei.multiClickDebounceTime()),Vt=St.timeStamp)),null==pn&&!f.dragData.didDrag&&!f.hoverData.selecting&&!f.hoverData.dragged&&!m(St)&&(Ei.$(c).unselect(["tapunselect"]),dn.length>0&&f.redrawHint("eles",!0),f.dragData.possibleDragElements=dn=Ei.collection()),an==pn&&!f.dragData.didDrag&&!f.hoverData.selecting&&null!=an&&an._private.selectable&&(f.hoverData.dragging||("additive"===Ei.selectionType()||Zi?an.selected()?an.unselect(["tapunselect"]):an.select(["tapselect"]):Zi||(Ei.$(c).unmerge(an).unselect(["tapunselect"]),an.select(["tapselect"]))),f.redrawHint("eles",!0)),f.hoverData.selecting){var Or=Ei.collection(f.getAllInBox(lt[0],lt[1],lt[2],lt[3]));f.redrawHint("select",!0),Or.length>0&&f.redrawHint("eles",!0),Ei.emit({type:"boxend",originalEvent:St,position:{x:Ve[0],y:Ve[1]}}),"additive"===Ei.selectionType()||Zi||Ei.$(c).unmerge(Or).unselect(),Or.emit("box").stdFilter(function(eo){return eo.selectable()&&!eo.selected()}).select().emit("boxselect"),f.redraw()}if(f.hoverData.dragging&&(f.hoverData.dragging=!1,f.redrawHint("select",!0),f.redrawHint("eles",!0),f.redraw()),!lt[4]){f.redrawHint("drag",!0),f.redrawHint("eles",!0);var Ni=pn&&pn.grabbed();Ie(dn),Ni&&(pn.emit("freeon"),dn.emit("free"),f.dragData.didDrag&&(pn.emit("dragfreeon"),dn.emit("dragfree")))}}lt[4]=0,f.hoverData.down=null,f.hoverData.cxtStarted=!1,f.hoverData.draggingEles=!1,f.hoverData.selecting=!1,f.hoverData.isOverThresholdDrag=!1,f.dragData.didDrag=!1,f.hoverData.dragged=!1,f.hoverData.dragDelta=[],f.hoverData.mdownPos=null,f.hoverData.mdownGPos=null}},!1);var et=function(St){if(!f.scrollingPage){var $n=f.cy,Ei=$n.zoom(),Ve=$n.pan(),lt=f.projectIntoViewport(St.clientX,St.clientY),an=[lt[0]*Ei+Ve.x,lt[1]*Ei+Ve.y];if(f.hoverData.draggingEles||f.hoverData.dragging||f.hoverData.cxtStarted||0!==f.selection[4])return void St.preventDefault();if($n.panningEnabled()&&$n.userPanningEnabled()&&$n.zoomingEnabled()&&$n.userZoomingEnabled()){var dn;St.preventDefault(),f.data.wheelZooming=!0,clearTimeout(f.data.wheelTimeout),f.data.wheelTimeout=setTimeout(function(){f.data.wheelZooming=!1,f.redrawHint("eles",!0),f.redraw()},150),dn=null!=St.deltaY?St.deltaY/-250:null!=St.wheelDeltaY?St.wheelDeltaY/1e3:St.wheelDelta/1e3,dn*=f.wheelSensitivity,1===St.deltaMode&&(dn*=33);var Zi=$n.zoom()*Math.pow(10,dn);"gesturechange"===St.type&&(Zi=f.gestureStartZoom*St.scale),$n.zoom({level:Zi,renderedPosition:{x:an[0],y:an[1]}}),$n.emit("gesturechange"===St.type?"pinchzoom":"scrollzoom")}}};f.registerBinding(f.container,"wheel",et,!0),f.registerBinding(window,"scroll",function(St){f.scrollingPage=!0,clearTimeout(f.scrollingPageTimeout),f.scrollingPageTimeout=setTimeout(function(){f.scrollingPage=!1},250)},!0),f.registerBinding(f.container,"gesturestart",function(St){f.gestureStartZoom=f.cy.zoom(),f.hasTouchStarted||St.preventDefault()},!0),f.registerBinding(f.container,"gesturechange",function(Ui){f.hasTouchStarted||et(Ui)},!0),f.registerBinding(f.container,"mouseout",function(St){var $n=f.projectIntoViewport(St.clientX,St.clientY);f.cy.emit({originalEvent:St,type:"mouseout",position:{x:$n[0],y:$n[1]}})},!1),f.registerBinding(f.container,"mouseover",function(St){var $n=f.projectIntoViewport(St.clientX,St.clientY);f.cy.emit({originalEvent:St,type:"mouseover",position:{x:$n[0],y:$n[1]}})},!1);var Wt,Tt,gn,Kt,ln,Sn,Rn,Jn,En,Yn,li,Ci,pi,ri,xi,ji,ir,Nr,Yr,pr,hi=function(St,$n,Ei,Ve){return Math.sqrt((Ei-St)*(Ei-St)+(Ve-$n)*(Ve-$n))},Mn=function(St,$n,Ei,Ve){return(Ei-St)*(Ei-St)+(Ve-$n)*(Ve-$n)};if(f.registerBinding(f.container,"touchstart",ri=function(St){if(f.hasTouchStarted=!0,Ft(St)){ze(),f.touchData.capture=!0,f.data.bgActivePosistion=void 0;var $n=f.cy,Ei=f.touchData.now,Ve=f.touchData.earlier;if(St.touches[0]){var lt=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY);Ei[0]=lt[0],Ei[1]=lt[1]}if(St.touches[1]&&(lt=f.projectIntoViewport(St.touches[1].clientX,St.touches[1].clientY),Ei[2]=lt[0],Ei[3]=lt[1]),St.touches[2]&&(lt=f.projectIntoViewport(St.touches[2].clientX,St.touches[2].clientY),Ei[4]=lt[0],Ei[5]=lt[1]),St.touches[1]){f.touchData.singleTouchMoved=!0,Ie(f.dragData.touchDragEles);var an=f.findContainerClientCoords();li=an[2],Ci=an[3],Tt=St.touches[0].clientY-(Yn=an[1]),gn=St.touches[1].clientX-(En=an[0]),Kt=St.touches[1].clientY-Yn,pi=0<=(Wt=St.touches[0].clientX-En)&&Wt<=li&&0<=gn&&gn<=li&&0<=Tt&&Tt<=Ci&&0<=Kt&&Kt<=Ci;var dn=$n.pan(),pn=$n.zoom();if(ln=hi(Wt,Tt,gn,Kt),Sn=Mn(Wt,Tt,gn,Kt),Jn=[((Rn=[(Wt+gn)/2,(Tt+Kt)/2])[0]-dn.x)/pn,(Rn[1]-dn.y)/pn],Sn<4e4&&!St.touches[2]){var ni=f.findNearestElement(Ei[0],Ei[1],!0,!0),Or=f.findNearestElement(Ei[2],Ei[3],!0,!0);return ni&&ni.isNode()?(ni.activate().emit({originalEvent:St,type:"cxttapstart",position:{x:Ei[0],y:Ei[1]}}),f.touchData.start=ni):Or&&Or.isNode()?(Or.activate().emit({originalEvent:St,type:"cxttapstart",position:{x:Ei[0],y:Ei[1]}}),f.touchData.start=Or):$n.emit({originalEvent:St,type:"cxttapstart",position:{x:Ei[0],y:Ei[1]}}),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!0,f.touchData.cxtDragged=!1,f.data.bgActivePosistion=void 0,void f.redraw()}}if(St.touches[2])$n.boxSelectionEnabled()&&St.preventDefault();else if(!St.touches[1]&&St.touches[0]){var Oi=f.findNearestElements(Ei[0],Ei[1],!0,!0),Ni=Oi[0];if(null!=Ni&&(Ni.activate(),f.touchData.start=Ni,f.touchData.starts=Oi,f.nodeIsGrabbable(Ni))){var Ki=f.dragData.touchDragEles=$n.collection(),eo=null;f.redrawHint("eles",!0),f.redrawHint("drag",!0),Ni.selected()?(eo=$n.$(function(Xo){return Xo.selected()&&f.nodeIsGrabbable(Xo)}),de(eo,{addToList:Ki})):pe(Ni,{addToList:Ki}),L(Ni);var ao=function(Ir){return{originalEvent:St,type:Ir,position:{x:Ei[0],y:Ei[1]}}};Ni.emit(ao("grabon")),eo?eo.forEach(function(Xo){Xo.emit(ao("grab"))}):Ni.emit(ao("grab"))}d(Ni,["touchstart","tapstart","vmousedown"],St,{x:Ei[0],y:Ei[1]}),null==Ni&&(f.data.bgActivePosistion={x:lt[0],y:lt[1]},f.redrawHint("select",!0),f.redraw()),f.touchData.singleTouchMoved=!1,f.touchData.singleTouchStartTime=+new Date,clearTimeout(f.touchData.tapholdTimeout),f.touchData.tapholdTimeout=setTimeout(function(){!1===f.touchData.singleTouchMoved&&!f.pinching&&!f.touchData.selecting&&d(f.touchData.start,["taphold"],St,{x:Ei[0],y:Ei[1]})},f.tapholdDuration)}if(St.touches.length>=1){for(var Fa=f.touchData.startPosition=[],Uo=0;Uo<Ei.length;Uo++)Fa[Uo]=Ve[Uo]=Ei[Uo];var So=St.touches[0];f.touchData.startGPosition=[So.clientX,So.clientY]}}},!1),f.registerBinding(window,"touchmove",xi=function(St){var $n=f.touchData.capture;if($n||Ft(St)){var Ei=f.selection,Ve=f.cy,lt=f.touchData.now,an=f.touchData.earlier,dn=Ve.zoom();if(St.touches[0]){var pn=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY);lt[0]=pn[0],lt[1]=pn[1]}St.touches[1]&&(pn=f.projectIntoViewport(St.touches[1].clientX,St.touches[1].clientY),lt[2]=pn[0],lt[3]=pn[1]),St.touches[2]&&(pn=f.projectIntoViewport(St.touches[2].clientX,St.touches[2].clientY),lt[4]=pn[0],lt[5]=pn[1]);var rr,Zi=f.touchData.startGPosition;if($n&&St.touches[0]&&Zi){for(var ni=[],Or=0;Or<lt.length;Or++)ni[Or]=lt[Or]-an[Or];var Oi=St.touches[0].clientX-Zi[0],Ki=St.touches[0].clientY-Zi[1];rr=Oi*Oi+Ki*Ki>=f.touchTapThreshold2}if($n&&f.touchData.cxt){St.preventDefault();var Ir=Mn(Fa=St.touches[0].clientX-En,Uo=St.touches[0].clientY-Yn,So=St.touches[1].clientX-En,Xo=St.touches[1].clientY-Yn);if(Ir/Sn>=2.25||Ir>=22500){f.touchData.cxt=!1,f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var Of={originalEvent:St,type:"cxttapend",position:{x:lt[0],y:lt[1]}};f.touchData.start?(f.touchData.start.unactivate().emit(Of),f.touchData.start=null):Ve.emit(Of)}}if($n&&f.touchData.cxt){Of={originalEvent:St,type:"cxtdrag",position:{x:lt[0],y:lt[1]}},f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.touchData.start?f.touchData.start.emit(Of):Ve.emit(Of),f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxtDragged=!0;var Nc=f.findNearestElement(lt[0],lt[1],!0,!0);(!f.touchData.cxtOver||Nc!==f.touchData.cxtOver)&&(f.touchData.cxtOver&&f.touchData.cxtOver.emit({originalEvent:St,type:"cxtdragout",position:{x:lt[0],y:lt[1]}}),f.touchData.cxtOver=Nc,Nc&&Nc.emit({originalEvent:St,type:"cxtdragover",position:{x:lt[0],y:lt[1]}}))}else if($n&&St.touches[2]&&Ve.boxSelectionEnabled())St.preventDefault(),f.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,f.touchData.selecting||Ve.emit({originalEvent:St,type:"boxstart",position:{x:lt[0],y:lt[1]}}),f.touchData.selecting=!0,f.touchData.didSelect=!0,Ei[4]=1,Ei&&0!==Ei.length&&void 0!==Ei[0]?(Ei[2]=(lt[0]+lt[2]+lt[4])/3,Ei[3]=(lt[1]+lt[3]+lt[5])/3):(Ei[0]=(lt[0]+lt[2]+lt[4])/3,Ei[1]=(lt[1]+lt[3]+lt[5])/3,Ei[2]=(lt[0]+lt[2]+lt[4])/3+1,Ei[3]=(lt[1]+lt[3]+lt[5])/3+1),f.redrawHint("select",!0),f.redraw();else if($n&&St.touches[1]&&!f.touchData.didSelect&&Ve.zoomingEnabled()&&Ve.panningEnabled()&&Ve.userZoomingEnabled()&&Ve.userPanningEnabled()){if(St.preventDefault(),f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),ic=f.dragData.touchDragEles){f.redrawHint("drag",!0);for(var Bc=0;Bc<ic.length;Bc++){var bp=ic[Bc]._private;bp.grabbed=!1,bp.rscratch.inDragLayer=!1}}var Fa,Uo,So,Xo,zc=f.touchData.start,Zs=hi(Fa=St.touches[0].clientX-En,Uo=St.touches[0].clientY-Yn,So=St.touches[1].clientX-En,Xo=St.touches[1].clientY-Yn),dC=Zs/ln;if(pi){var Z_=(Fa-Wt+(So-gn))/2,fC=(Uo-Tt+(Xo-Kt))/2,lg=Ve.zoom(),qy=lg*dC,zv=Ve.pan(),cg=Jn[0]*lg+zv.x,Q_=Jn[1]*lg+zv.y,pC={x:-qy/lg*(cg-zv.x-Z_)+cg,y:-qy/lg*(Q_-zv.y-fC)+Q_};zc&&zc.active()&&(Ie(ic=f.dragData.touchDragEles),f.redrawHint("drag",!0),f.redrawHint("eles",!0),zc.unactivate().emit("freeon"),ic.emit("free"),f.dragData.didDrag&&(zc.emit("dragfreeon"),ic.emit("dragfree"))),Ve.viewport({zoom:qy,pan:pC,cancelOnFailedZoom:!0}),Ve.emit("pinchzoom"),ln=Zs,Wt=Fa,Tt=Uo,gn=So,Kt=Xo,f.pinching=!0}St.touches[0]&&(pn=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY),lt[0]=pn[0],lt[1]=pn[1]),St.touches[1]&&(pn=f.projectIntoViewport(St.touches[1].clientX,St.touches[1].clientY),lt[2]=pn[0],lt[3]=pn[1]),St.touches[2]&&(pn=f.projectIntoViewport(St.touches[2].clientX,St.touches[2].clientY),lt[4]=pn[0],lt[5]=pn[1])}else if(St.touches[0]&&!f.touchData.didSelect){var ef=f.touchData.start,gC=f.touchData.last;if(!f.hoverData.draggingEles&&!f.swipePanning&&(Nc=f.findNearestElement(lt[0],lt[1],!0,!0)),$n&&null!=ef&&St.preventDefault(),$n&&null!=ef&&f.nodeIsDraggable(ef))if(rr){var ic=f.dragData.touchDragEles,Vv=!f.dragData.didDrag;Vv&&de(ic,{inDragLayer:!0}),f.dragData.didDrag=!0;var Uv={x:0,y:0};Ut(ni[0])&&Ut(ni[1])&&(Uv.x+=ni[0],Uv.y+=ni[1],Vv)&&(f.redrawHint("eles",!0),(_d=f.touchData.dragDelta)&&Ut(_d[0])&&Ut(_d[1])&&(Uv.x+=_d[0],Uv.y+=_d[1])),f.hoverData.draggingEles=!0,ic.silentShift(Uv).emit("position drag"),f.redrawHint("drag",!0),f.touchData.startPosition[0]==an[0]&&f.touchData.startPosition[1]==an[1]&&f.redrawHint("eles",!0),f.redraw()}else{var _d;0===(_d=f.touchData.dragDelta=f.touchData.dragDelta||[]).length?(_d.push(ni[0]),_d.push(ni[1])):(_d[0]+=ni[0],_d[1]+=ni[1])}if(d(ef||Nc,["touchmove","tapdrag","vmousemove"],St,{x:lt[0],y:lt[1]}),(!ef||!ef.grabbed())&&Nc!=gC&&(gC&&gC.emit({originalEvent:St,type:"tapdragout",position:{x:lt[0],y:lt[1]}}),Nc&&Nc.emit({originalEvent:St,type:"tapdragover",position:{x:lt[0],y:lt[1]}})),f.touchData.last=Nc,$n)for(Bc=0;Bc<lt.length;Bc++)lt[Bc]&&f.touchData.startPosition[Bc]&&rr&&(f.touchData.singleTouchMoved=!0);$n&&(null==ef||ef.pannable())&&Ve.panningEnabled()&&Ve.userPanningEnabled()&&(_(ef,f.touchData.starts)&&(St.preventDefault(),f.data.bgActivePosistion||(f.data.bgActivePosistion=id(f.touchData.startPosition)),f.swipePanning?(Ve.panBy({x:ni[0]*dn,y:ni[1]*dn}),Ve.emit("dragpan")):rr&&(f.swipePanning=!0,Ve.panBy({x:Oi*dn,y:Ki*dn}),Ve.emit("dragpan"),ef&&(ef.unactivate(),f.redrawHint("select",!0),f.touchData.start=null))),pn=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY),lt[0]=pn[0],lt[1]=pn[1])}for(Or=0;Or<lt.length;Or++)an[Or]=lt[Or];$n&&St.touches.length>0&&!f.hoverData.draggingEles&&!f.swipePanning&&null!=f.data.bgActivePosistion&&(f.data.bgActivePosistion=void 0,f.redrawHint("select",!0),f.redraw())}},!1),f.registerBinding(window,"touchcancel",ji=function(St){var $n=f.touchData.start;f.touchData.capture=!1,$n&&$n.unactivate()}),f.registerBinding(window,"touchend",ir=function(St){var $n=f.touchData.start;if(f.touchData.capture){0===St.touches.length&&(f.touchData.capture=!1),St.preventDefault();var Ve=f.selection;f.swipePanning=!1,f.hoverData.draggingEles=!1;var rr,lt=f.cy,an=lt.zoom(),dn=f.touchData.now,pn=f.touchData.earlier;if(St.touches[0]){var Zi=f.projectIntoViewport(St.touches[0].clientX,St.touches[0].clientY);dn[0]=Zi[0],dn[1]=Zi[1]}if(St.touches[1]&&(Zi=f.projectIntoViewport(St.touches[1].clientX,St.touches[1].clientY),dn[2]=Zi[0],dn[3]=Zi[1]),St.touches[2]&&(Zi=f.projectIntoViewport(St.touches[2].clientX,St.touches[2].clientY),dn[4]=Zi[0],dn[5]=Zi[1]),$n&&$n.unactivate(),f.touchData.cxt){if(rr={originalEvent:St,type:"cxttapend",position:{x:dn[0],y:dn[1]}},$n?$n.emit(rr):lt.emit(rr),!f.touchData.cxtDragged){var ni={originalEvent:St,type:"cxttap",position:{x:dn[0],y:dn[1]}};$n?$n.emit(ni):lt.emit(ni)}return f.touchData.start&&(f.touchData.start._private.grabbed=!1),f.touchData.cxt=!1,f.touchData.start=null,void f.redraw()}if(!St.touches[2]&&lt.boxSelectionEnabled()&&f.touchData.selecting){f.touchData.selecting=!1;var Or=lt.collection(f.getAllInBox(Ve[0],Ve[1],Ve[2],Ve[3]));Ve[0]=void 0,Ve[1]=void 0,Ve[2]=void 0,Ve[3]=void 0,Ve[4]=0,f.redrawHint("select",!0),lt.emit({type:"boxend",originalEvent:St,position:{x:dn[0],y:dn[1]}}),Or.emit("box").stdFilter(function(Gl){return Gl.selectable()&&!Gl.selected()}).select().emit("boxselect"),Or.nonempty()&&f.redrawHint("eles",!0),f.redraw()}if($n?.unactivate(),St.touches[2])f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);else if(!St.touches[1]&&!St.touches[0]&&!St.touches[0]){f.data.bgActivePosistion=void 0,f.redrawHint("select",!0);var Ni=f.dragData.touchDragEles;if(null!=$n){var Ki=$n._private.grabbed;Ie(Ni),f.redrawHint("drag",!0),f.redrawHint("eles",!0),Ki&&($n.emit("freeon"),Ni.emit("free"),f.dragData.didDrag&&($n.emit("dragfreeon"),Ni.emit("dragfree"))),d($n,["touchend","tapend","vmouseup","tapdragout"],St,{x:dn[0],y:dn[1]}),$n.unactivate(),f.touchData.start=null}else{var eo=f.findNearestElement(dn[0],dn[1],!0,!0);d(eo,["touchend","tapend","vmouseup","tapdragout"],St,{x:dn[0],y:dn[1]})}var ao=f.touchData.startPosition[0]-dn[0],Uo=f.touchData.startPosition[1]-dn[1],Ir=(ao*ao+Uo*Uo)*an*an;f.touchData.singleTouchMoved||($n||lt.$(":selected").unselect(["tapunselect"]),d($n,["tap","vclick"],St,{x:dn[0],y:dn[1]}),Nr=!1,St.timeStamp-pr<=lt.multiClickDebounceTime()?(Yr&&clearTimeout(Yr),Nr=!0,pr=null,d($n,["dbltap","vdblclick"],St,{x:dn[0],y:dn[1]})):(Yr=setTimeout(function(){Nr||d($n,["onetap","voneclick"],St,{x:dn[0],y:dn[1]})},lt.multiClickDebounceTime()),pr=St.timeStamp)),null!=$n&&!f.dragData.didDrag&&$n._private.selectable&&Ir<f.touchTapThreshold2&&!f.pinching&&("single"===lt.selectionType()?(lt.$(c).unmerge($n).unselect(["tapunselect"]),$n.select(["tapselect"])):$n.selected()?$n.unselect(["tapunselect"]):$n.select(["tapselect"]),f.redrawHint("eles",!0)),f.touchData.singleTouchMoved=!0}for(var Ha=0;Ha<dn.length;Ha++)pn[Ha]=dn[Ha];f.dragData.didDrag=!1,0===St.touches.length&&(f.touchData.dragDelta=[],f.touchData.startPosition=null,f.touchData.startGPosition=null,f.touchData.didSelect=!1),St.touches.length<2&&(1===St.touches.length&&(f.touchData.startGPosition=[St.touches[0].clientX,St.touches[0].clientY]),f.pinching=!1,f.redrawHint("eles",!0),f.redraw())}},!1),typeof TouchEvent>"u"){var tr=[],$r=function(St){return{clientX:St.clientX,clientY:St.clientY,force:1,identifier:St.pointerId,pageX:St.pageX,pageY:St.pageY,radiusX:St.width/2,radiusY:St.height/2,screenX:St.screenX,screenY:St.screenY,target:St.target}},Cr=function(St){for(var $n=0;$n<tr.length;$n++)if(tr[$n].event.pointerId===St.pointerId)return void tr.splice($n,1)},Fs=function(St){St.touches=tr.map(function($n){return $n.touch})},Zr=function(St){return"mouse"===St.pointerType||4===St.pointerType};f.registerBinding(f.container,"pointerdown",function(Ui){Zr(Ui)||(Ui.preventDefault(),tr.push(function(St){return{event:St,touch:$r(St)}}(Ui)),Fs(Ui),ri(Ui))}),f.registerBinding(f.container,"pointerup",function(Ui){Zr(Ui)||(Cr(Ui),Fs(Ui),ir(Ui))}),f.registerBinding(f.container,"pointercancel",function(Ui){Zr(Ui)||(Cr(Ui),Fs(Ui),ji())}),f.registerBinding(f.container,"pointermove",function(Ui){var St,$n;Zr(Ui)||(Ui.preventDefault(),St=Ui,($n=tr.filter(function(Ei){return Ei.event.pointerId===St.pointerId})[0]).event=St,$n.touch=$r(St),Fs(Ui),xi(Ui))})}};var gd={generatePolygon:function(f,c){return this.nodeShapes[f]={renderer:this,name:f,points:c,draw:function(m,_,b,w,E){this.renderer.nodeShapeImpl("polygon",m,_,b,w,E,this.points)},intersectLine:function(m,_,b,w,E,k,L){return uu(E,k,this.points,m,_,b/2,w/2,L)},checkPoint:function(m,_,b,w,E,k,L){return io(m,_,this.points,k,L,w,E,[0,-1],b)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(c,d,m,_,b){this.renderer.nodeShapeImpl(this.name,c,d,m,_,b)},intersectLine:function(c,d,m,_,b,w,E){return function(c,d,m,_,b,w){var E=m-c,k=_-d;E/=b,k/=w;var L=Math.sqrt(E*E+k*k),G=L-1;if(G<0)return[];var K=G/L;return[(m-c)*K+c,(_-d)*K+d]}(b,w,c,d,m/2+E,_/2+E)},checkPoint:function(c,d,m,_,b,w,E){return Ya(c,d,_,b,w,E,m)}}},generateRoundPolygon:function(f,c){for(var d=new Array(2*c.length),m=0;m<c.length/2;m++){var b,_=2*m;b=m<c.length/2-1?2*(m+1):0,d[4*m]=c[_],d[4*m+1]=c[_+1];var w=c[b]-c[_],E=c[b+1]-c[_+1],k=Math.sqrt(w*w+E*E);d[4*m+2]=w/k,d[4*m+3]=E/k}return this.nodeShapes[f]={renderer:this,name:f,points:d,draw:function(G,K,le,de,pe){this.renderer.nodeShapeImpl("round-polygon",G,K,le,de,pe,this.points)},intersectLine:function(G,K,le,de,pe,Ie,Ne){return function(c,d,m,_,b,w,E,k){for(var G,L=[],K=new Array(m.length),le=w/2,de=E/2,pe=Rr(w,E),Ie=0;Ie<m.length/4;Ie++){var ze,Ne;Ne=0===Ie?m.length-2:4*Ie-2,ze=4*Ie+2;var Qe=_+le*m[4*Ie],qe=b+de*m[4*Ie+1],Lt=pe/Math.tan(Math.acos(-m[Ne]*m[ze]-m[Ne+1]*m[ze+1])/2),kt=Qe-Lt*m[Ne],mt=qe-Lt*m[Ne+1],Ft=Qe+Lt*m[ze],bt=qe+Lt*m[ze+1];0===Ie?(K[m.length-2]=kt,K[m.length-1]=mt):(K[4*Ie-2]=kt,K[4*Ie-1]=mt),K[4*Ie]=Ft,K[4*Ie+1]=bt;var Ht=m[Ne+1],Vt=-m[Ne];Ht*m[ze]+Vt*m[ze+1]<0&&(Ht*=-1,Vt*=-1),0!==(G=qf(c,d,_,b,kt+Ht*pe,mt+Vt*pe,pe)).length&&L.push(G[0],G[1])}for(var gn=0;gn<K.length/4;gn++)0!==(G=il(c,d,_,b,K[4*gn],K[4*gn+1],K[4*gn+2],K[4*gn+3],!1)).length&&L.push(G[0],G[1]);if(L.length>2){for(var Kt=[L[0],L[1]],ln=Math.pow(Kt[0]-c,2)+Math.pow(Kt[1]-d,2),Sn=1;Sn<L.length/2;Sn++){var Rn=Math.pow(L[2*Sn]-c,2)+Math.pow(L[2*Sn+1]-d,2);Rn<=ln&&(Kt[0]=L[2*Sn],Kt[1]=L[2*Sn+1],ln=Rn)}return Kt}return L}(pe,Ie,this.points,G,K,le,de)},checkPoint:function(G,K,le,de,pe,Ie,Ne){return function(c,d,m,_,b,w,E){for(var k=new Array(m.length),L=w/2,G=E/2,K=Rr(w,E),le=K*K,de=0;de<m.length/4;de++){var Ie,pe;pe=0===de?m.length-2:4*de-2,Ie=4*de+2;var Ne=_+L*m[4*de],ze=b+G*m[4*de+1],qe=K/Math.tan(Math.acos(-m[pe]*m[Ie]-m[pe+1]*m[Ie+1])/2),dt=Ne-qe*m[pe],Lt=ze-qe*m[pe+1],kt=Ne+qe*m[Ie],mt=ze+qe*m[Ie+1];k[4*de]=dt,k[4*de+1]=Lt,k[4*de+2]=kt,k[4*de+3]=mt;var Ft=m[pe+1],bt=-m[pe];Ft*m[Ie]+bt*m[Ie+1]<0&&(Ft*=-1,bt*=-1);var et=Lt+bt*K;if(Math.pow(dt+Ft*K-c,2)+Math.pow(et-d,2)<=le)return!0}return Ea(c,d,k)}(G,K,this.points,Ie,Ne,de,pe)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ar(4,0),draw:function(c,d,m,_,b){this.renderer.nodeShapeImpl(this.name,c,d,m,_,b)},intersectLine:function(c,d,m,_,b,w,E){return ku(b,w,c,d,m,_,E)},checkPoint:function(c,d,m,_,b,w,E){var k=gf(_,b),L=2*k;return!!(io(c,d,this.points,w,E,_,b-L,[0,-1],m)||io(c,d,this.points,w,E,_-L,b,[0,-1],m)||Ya(c,d,L,L,w-_/2+k,E-b/2+k,m)||Ya(c,d,L,L,w+_/2-k,E-b/2+k,m)||Ya(c,d,L,L,w+_/2-k,E+b/2-k,m)||Ya(c,d,L,L,w-_/2+k,E+b/2-k,m))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Ar(4,0),draw:function(c,d,m,_,b){this.renderer.nodeShapeImpl(this.name,c,d,m,_,b)},generateCutTrianglePts:function(c,d,m,_){var b=this.cornerLength,w=d/2,E=c/2,k=m-E,L=m+E,G=_-w,K=_+w;return{topLeft:[k,G+b,k+b,G,k+b,G+b],topRight:[L-b,G,L,G+b,L-b,G+b],bottomRight:[L,K-b,L-b,K,L-b,K-b],bottomLeft:[k+b,K,k,K-b,k+b,K-b]}},intersectLine:function(c,d,m,_,b,w,E){var k=this.generateCutTrianglePts(m+2*E,_+2*E,c,d),L=[].concat.apply([],[k.topLeft.splice(0,4),k.topRight.splice(0,4),k.bottomRight.splice(0,4),k.bottomLeft.splice(0,4)]);return uu(b,w,L,c,d)},checkPoint:function(c,d,m,_,b,w,E){if(io(c,d,this.points,w,E,_,b-2*this.cornerLength,[0,-1],m)||io(c,d,this.points,w,E,_-2*this.cornerLength,b,[0,-1],m))return!0;var k=this.generateCutTrianglePts(_,b,w,E);return Ea(c,d,k.topLeft)||Ea(c,d,k.topRight)||Ea(c,d,k.bottomRight)||Ea(c,d,k.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ar(4,0),draw:function(c,d,m,_,b){this.renderer.nodeShapeImpl(this.name,c,d,m,_,b)},intersectLine:function(c,d,m,_,b,w,E){var K=this.generateBarrelBezierPts(m+2*E,_+2*E,c,d),le=function(Ie){var Ne=Yi({x:Ie[0],y:Ie[1]},{x:Ie[2],y:Ie[3]},{x:Ie[4],y:Ie[5]},.15),ze=Yi({x:Ie[0],y:Ie[1]},{x:Ie[2],y:Ie[3]},{x:Ie[4],y:Ie[5]},.5),Qe=Yi({x:Ie[0],y:Ie[1]},{x:Ie[2],y:Ie[3]},{x:Ie[4],y:Ie[5]},.85);return[Ie[0],Ie[1],Ne.x,Ne.y,ze.x,ze.y,Qe.x,Qe.y,Ie[4],Ie[5]]},de=[].concat(le(K.topLeft),le(K.topRight),le(K.bottomRight),le(K.bottomLeft));return uu(b,w,de,c,d)},generateBarrelBezierPts:function(c,d,m,_){var b=d/2,w=c/2,E=m-w,k=m+w,L=_-b,G=_+b,K=qr(c,d),le=K.heightOffset,de=K.widthOffset,pe=K.ctrlPtOffsetPct*c,Ie={topLeft:[E,L+le,E+pe,L,E+de,L],topRight:[k-de,L,k-pe,L,k,L+le],bottomRight:[k,G-le,k-pe,G,k-de,G],bottomLeft:[E+de,G,E+pe,G,E,G-le]};return Ie.topLeft.isTop=!0,Ie.topRight.isTop=!0,Ie.bottomLeft.isBottom=!0,Ie.bottomRight.isBottom=!0,Ie},checkPoint:function(c,d,m,_,b,w,E){var k=qr(_,b),G=k.widthOffset;if(io(c,d,this.points,w,E,_,b-2*k.heightOffset,[0,-1],m)||io(c,d,this.points,w,E,_-2*G,b,[0,-1],m))return!0;for(var K=this.generateBarrelBezierPts(_,b,w,E),le=function(mt,Ft,bt){var Ht=bt[4],Vt=bt[2],et=bt[0],Wt=bt[5],Tt=bt[1],gn=Math.min(Ht,et),Kt=Math.max(Ht,et),ln=Math.min(Wt,Tt),Sn=Math.max(Wt,Tt);if(gn<=mt&&mt<=Kt&&ln<=Ft&&Ft<=Sn){var Rn=function(c,d,m){return[c-2*d+m,2*(d-c),c]}(Ht,Vt,et),Jn=function(c,d,m,_){var b=d*d-4*c*(m-=_);if(b<0)return[];var w=Math.sqrt(b),E=2*c;return[(-d+w)/E,(-d-w)/E]}(Rn[0],Rn[1],Rn[2],mt),En=Jn.filter(function(Yn){return 0<=Yn&&Yn<=1});if(En.length>0)return En[0]}return null},de=Object.keys(K),pe=0;pe<de.length;pe++){var Ne=K[de[pe]],ze=le(c,d,Ne);if(null!=ze){var Lt=cc(Ne[5],Ne[3],Ne[1],ze);if(Ne.isTop&&Lt<=d||Ne.isBottom&&d<=Lt)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ar(4,0),draw:function(c,d,m,_,b){this.renderer.nodeShapeImpl(this.name,c,d,m,_,b)},intersectLine:function(c,d,m,_,b,w,E){var L=d-(_/2+E),le=il(b,w,c,d,c-(m/2+E),L,c+(m/2+E),L,!1);return le.length>0?le:ku(b,w,c,d,m,_,E)},checkPoint:function(c,d,m,_,b,w,E){var k=gf(_,b),L=2*k;if(io(c,d,this.points,w,E,_,b-L,[0,-1],m)||io(c,d,this.points,w,E,_-L,b,[0,-1],m))return!0;var G=_/2+2*m,K=b/2+2*m;return!!(Ea(c,d,[w-G,E-K,w-G,E,w+G,E,w+G,E-K])||Ya(c,d,L,L,w+_/2-k,E+b/2-k,m)||Ya(c,d,L,L,w-_/2+k,E+b/2-k,m))}}},registerNodeShapes:function(){var f=this.nodeShapes={},c=this;this.generateEllipse(),this.generatePolygon("triangle",Ar(3,0)),this.generateRoundPolygon("round-triangle",Ar(3,0)),this.generatePolygon("rectangle",Ar(4,0)),f.square=f.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var d=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",d),this.generateRoundPolygon("round-diamond",d),this.generatePolygon("pentagon",Ar(5,0)),this.generateRoundPolygon("round-pentagon",Ar(5,0)),this.generatePolygon("hexagon",Ar(6,0)),this.generateRoundPolygon("round-hexagon",Ar(6,0)),this.generatePolygon("heptagon",Ar(7,0)),this.generateRoundPolygon("round-heptagon",Ar(7,0)),this.generatePolygon("octagon",Ar(8,0)),this.generateRoundPolygon("round-octagon",Ar(8,0));var m=new Array(20),_=Mh(5,0),b=Mh(5,Math.PI/5),w=.5*(3-Math.sqrt(5));w*=1.57;for(var E=0;E<b.length/2;E++)b[2*E]*=w,b[2*E+1]*=w;for(E=0;E<5;E++)m[4*E]=_[2*E],m[4*E+1]=_[2*E+1],m[4*E+2]=b[2*E],m[4*E+3]=b[2*E+1];m=Ta(m),this.generatePolygon("star",m),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var k=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",k),this.generateRoundPolygon("round-tag",k),f.makePolygon=function(L){var le,K="polygon-"+L.join("$");return(le=this[K])?le:c.generatePolygon(K,L)}}},yp={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(f){f=f||yi();var c=this;void 0===c.averageRedrawTime&&(c.averageRedrawTime=0),void 0===c.lastRedrawTime&&(c.lastRedrawTime=0),void 0===c.lastDrawTime&&(c.lastDrawTime=0),c.requestedFrame=!0,c.renderOptions=f},beforeRender:function(f,c){if(!this.destroyed){null==c&&it("Priority is not optional for beforeRender");var d=this.beforeRenderCallbacks;d.push({fn:f,priority:c}),d.sort(function(m,_){return _.priority-m.priority})}}},Um=function(c,d,m){for(var _=c.beforeRenderCallbacks,b=0;b<_.length;b++)_[b].fn(d,m)};yp.startRenderLoop=function(){var f=this,c=f.cy;f.renderLoopStarted||(f.renderLoopStarted=!0,cu(function m(_){if(!f.destroyed){if(!c.batching())if(f.requestedFrame&&!f.skipFrame){Um(f,!0,_);var b=Aa();f.render(f.renderOptions);var w=f.lastDrawTime=Aa();void 0===f.averageRedrawTime&&(f.averageRedrawTime=w-b),void 0===f.redrawCount&&(f.redrawCount=0),f.redrawCount++,void 0===f.redrawTotalTime&&(f.redrawTotalTime=0);var E=w-b;f.redrawTotalTime+=E,f.lastRedrawTime=E,f.averageRedrawTime=f.averageRedrawTime/2+E/2,f.requestedFrame=!1}else Um(f,!1,_);f.skipFrame=!1,cu(m)}}))};var tm=function(c){this.init(c)},yl=tm.prototype;yl.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],yl.init=function(f){var c=this;c.options=f,c.cy=f.cy;var d=c.container=f.cy.container();if(ge){var m=ge.document,_=m.head,b="__________cytoscape_stylesheet",w="__________cytoscape_container",E=null!=m.getElementById(b);if(d.className.indexOf(w)<0&&(d.className=(d.className||"")+" "+w),!E){var k=m.createElement("style");k.id=b,k.innerHTML="."+w+" { position: relative; }",_.insertBefore(k,_.children[0])}"static"===ge.getComputedStyle(d).getPropertyValue("position")&&he("A Cytoscape container has style position:static and so can not use UI extensions properly")}c.selection=[void 0,void 0,void 0,void 0,0],c.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],c.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},c.dragData={possibleDragElements:[]},c.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},c.redraws=0,c.showFps=f.showFps,c.debug=f.debug,c.hideEdgesOnViewport=f.hideEdgesOnViewport,c.textureOnViewport=f.textureOnViewport,c.wheelSensitivity=f.wheelSensitivity,c.motionBlurEnabled=f.motionBlur,c.forcedPixelRatio=Ut(f.pixelRatio)?f.pixelRatio:null,c.motionBlur=f.motionBlur,c.motionBlurOpacity=f.motionBlurOpacity,c.motionBlurTransparency=1-c.motionBlurOpacity,c.motionBlurPxRatio=1,c.mbPxRBlurry=1,c.minMbLowQualFrames=4,c.fullQualityMb=!1,c.clearedForMotionBlur=[],c.desktopTapThreshold=f.desktopTapThreshold,c.desktopTapThreshold2=f.desktopTapThreshold*f.desktopTapThreshold,c.touchTapThreshold=f.touchTapThreshold,c.touchTapThreshold2=f.touchTapThreshold*f.touchTapThreshold,c.tapholdDuration=500,c.bindings=[],c.beforeRenderCallbacks=[],c.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},c.registerNodeShapes(),c.registerArrowShapes(),c.registerCalculationListeners()},yl.notify=function(f,c){var d=this,m=d.cy;if(!this.destroyed){if("init"===f)return void d.load();if("destroy"===f)return void d.destroy();("add"===f||"remove"===f||"move"===f&&m.hasCompoundNodes()||"load"===f||"zorder"===f||"mount"===f)&&d.invalidateCachedZSortedEles(),"viewport"===f&&d.redrawHint("select",!0),("load"===f||"resize"===f||"mount"===f)&&(d.invalidateContainerClientCoordsCache(),d.matchCanvasSize(d.container)),d.redrawHint("eles",!0),d.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},yl.destroy=function(){var f=this;f.destroyed=!0,f.cy.stopAnimationLoop();for(var c=0;c<f.bindings.length;c++){var d=f.bindings[c],_=d.target;(_.off||_.removeEventListener).apply(_,d.args)}if(f.bindings=[],f.beforeRenderCallbacks=[],f.onUpdateEleCalcsFns=[],f.removeObserver&&f.removeObserver.disconnect(),f.styleObserver&&f.styleObserver.disconnect(),f.resizeObserver&&f.resizeObserver.disconnect(),f.labelCalcDiv)try{document.body.removeChild(f.labelCalcDiv)}catch{}},yl.isHeadless=function(){return!1},[eg,vh,Zd,tu,gd,yp].forEach(function(f){er(yl,f)});var aa=1e3/60,Pf_setupDequeueing=function(c){return function(){var m=this,_=this.renderer;if(!m.dequeueingSetup){m.dequeueingSetup=!0;var b=O.default(function(){_.redrawHint("eles",!0),_.redrawHint("drag",!0),_.redraw()},c.deqRedrawThreshold);_.beforeRender(function(L,G){var K=Aa(),le=_.averageRedrawTime,de=_.lastRedrawTime,pe=[],Ie=_.cy.extent(),Ne=_.getPixelRatio();for(L||_.flushRenderedStyleQueue();;){var ze=Aa(),Qe=ze-K,qe=ze-G;if(de<aa){if(qe>=c.deqFastCost*(aa-(L?le:0)))break}else if(L){if(Qe>=c.deqCost*de||Qe>=c.deqAvgCost*le)break}else if(qe>=c.deqNoDrawCost*aa)break;var Lt=c.deq(m,Ne,Ie);if(!(Lt.length>0))break;for(var kt=0;kt<Lt.length;kt++)pe.push(Lt[kt])}pe.length>0&&(c.onDeqd(m,pe),!L&&c.shouldRedraw(m,pe,Ne,Ie)&&b())},(c.priority||Ge)(m))}}},ig=function(){function f(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jf;Q(this,f),this.idsByKey=new xo,this.keyForId=new xo,this.cachesByLvl=new xo,this.lvls=[],this.getKey=c,this.doesEleInvalidateKey=d}return ae(f,[{key:"getIdsFor",value:function(d){null==d&&it("Can not get id list for null key");var m=this.idsByKey,_=this.idsByKey.get(d);return _||(_=new us,m.set(d,_)),_}},{key:"addIdForKey",value:function(d,m){null!=d&&this.getIdsFor(d).add(m)}},{key:"deleteIdForKey",value:function(d,m){null!=d&&this.getIdsFor(d).delete(m)}},{key:"getNumberOfIdsForKey",value:function(d){return null==d?0:this.getIdsFor(d).size}},{key:"updateKeyMappingFor",value:function(d){var m=d.id(),_=this.keyForId.get(m),b=this.getKey(d);this.deleteIdForKey(_,m),this.addIdForKey(b,m),this.keyForId.set(m,b)}},{key:"deleteKeyMappingFor",value:function(d){var m=d.id(),_=this.keyForId.get(m);this.deleteIdForKey(_,m),this.keyForId.delete(m)}},{key:"keyHasChangedFor",value:function(d){var m=d.id();return this.keyForId.get(m)!==this.getKey(d)}},{key:"isInvalid",value:function(d){return this.keyHasChangedFor(d)||this.doesEleInvalidateKey(d)}},{key:"getCachesAt",value:function(d){var m=this.cachesByLvl,_=this.lvls,b=m.get(d);return b||(b=new xo,m.set(d,b),_.push(d)),b}},{key:"getCache",value:function(d,m){return this.getCachesAt(m).get(d)}},{key:"get",value:function(d,m){var _=this.getKey(d),b=this.getCache(_,m);return null!=b&&this.updateKeyMappingFor(d),b}},{key:"getForCachedKey",value:function(d,m){var _=this.keyForId.get(d.id());return this.getCache(_,m)}},{key:"hasCache",value:function(d,m){return this.getCachesAt(m).has(d)}},{key:"has",value:function(d,m){var _=this.getKey(d);return this.hasCache(_,m)}},{key:"setCache",value:function(d,m,_){_.key=d,this.getCachesAt(m).set(d,_)}},{key:"set",value:function(d,m,_){var b=this.getKey(d);this.setCache(b,m,_),this.updateKeyMappingFor(d)}},{key:"deleteCache",value:function(d,m){this.getCachesAt(m).delete(d)}},{key:"delete",value:function(d,m){var _=this.getKey(d);this.deleteCache(_,m)}},{key:"invalidateKey",value:function(d){var m=this;this.lvls.forEach(function(_){return m.deleteCache(d,_)})}},{key:"invalidate",value:function(d){var m=d.id(),_=this.keyForId.get(m);this.deleteKeyMappingFor(d);var b=this.doesEleInvalidateKey(d);return b&&this.invalidateKey(_),b||0===this.getNumberOfIdsForKey(_)}}]),f}(),im={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},cC=ti({getKey:null,doesEleInvalidateKey:jf,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:nl,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),_p=function(c,d){var m=this;m.renderer=c,m.onDequeues=[];var _=cC(d);er(m,_),m.lookup=new ig(_.getKey,_.doesEleInvalidateKey),m.setupDequeueing()},cl=_p.prototype;cl.reasons=im,cl.getTextureQueue=function(f){var c=this;return c.eleImgCaches=c.eleImgCaches||{},c.eleImgCaches[f]=c.eleImgCaches[f]||[]},cl.getRetiredTextureQueue=function(f){var d=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return d[f]=d[f]||[]},cl.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new q.default(function(d,m){return m.reqs-d.reqs})},cl.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},cl.getElement=function(f,c,d,m,_){var b=this,w=this.renderer,E=w.cy.zoom(),k=this.lookup;if(!c||0===c.w||0===c.h||isNaN(c.w)||isNaN(c.h)||!f.visible()||f.removed()||!b.allowEdgeTxrCaching&&f.isEdge()||!b.allowParentTxrCaching&&f.isParent())return null;if(null==m&&(m=Math.ceil(mv(E*d))),m<-4)m=-4;else if(E>=7.99||m>3)return null;var L=Math.pow(2,m),G=c.h*L,K=c.w*L,le=w.eleTextBiggerThanMin(f,L);if(!this.isVisible(f,le))return null;var pe,de=k.get(f,m);if(de&&de.invalidated&&(de.invalidated=!1,de.texture.invalidatedWidth-=de.width),de)return de;if(pe=G<=25?25:G<=50?50:50*Math.ceil(G/50),G>1024||K>1024)return null;var Ie=b.getTextureQueue(pe),Ne=Ie[Ie.length-2],ze=function(){return b.recycleTexture(pe,K)||b.addTexture(pe,K)};Ne||(Ne=Ie[Ie.length-1]),Ne||(Ne=ze()),Ne.width-Ne.usedWidth<K&&(Ne=ze());for(var kt,Qe=function(Kt){return Kt&&Kt.scaledLabelShown===le},qe=_&&_===im.dequeue,dt=_&&_===im.highQuality,Lt=_&&_===im.downscale,mt=m+1;mt<=3;mt++){var Ft=k.get(f,mt);if(Ft){kt=Ft;break}}var bt=kt&&kt.level===m+1?kt:null,Ht=function(){Ne.context.drawImage(bt.texture.canvas,bt.x,0,bt.width,bt.height,Ne.usedWidth,0,K,G)};if(Ne.context.setTransform(1,0,0,1,0,0),Ne.context.clearRect(Ne.usedWidth,0,K,pe),Qe(bt))Ht();else if(Qe(kt)){if(!dt)return b.queueElement(f,kt.level-1),kt;for(var Vt=kt.level;Vt>m;Vt--)bt=b.getElement(f,c,d,Vt,im.downscale);Ht()}else{var et;if(!qe&&!dt&&!Lt)for(var Wt=m-1;Wt>=-4;Wt--){var Tt=k.get(f,Wt);if(Tt){et=Tt;break}}if(Qe(et))return b.queueElement(f,m),et;Ne.context.translate(Ne.usedWidth,0),Ne.context.scale(L,L),this.drawElement(Ne.context,f,c,le,!1),Ne.context.scale(1/L,1/L),Ne.context.translate(-Ne.usedWidth,0)}return de={x:Ne.usedWidth,texture:Ne,level:m,scale:L,width:K,height:G,scaledLabelShown:le},Ne.usedWidth+=Math.ceil(K+8),Ne.eleCaches.push(de),k.set(f,m,de),b.checkTextureFullness(Ne),de},cl.invalidateElements=function(f){for(var c=0;c<f.length;c++)this.invalidateElement(f[c])},cl.invalidateElement=function(f){var c=this,d=c.lookup,m=[];if(d.isInvalid(f)){for(var b=-4;b<=3;b++){var w=d.getForCachedKey(f,b);w&&m.push(w)}if(d.invalidate(f))for(var k=0;k<m.length;k++){var L=m[k],G=L.texture;G.invalidatedWidth+=L.width,L.invalidated=!0,c.checkTextureUtility(G)}c.removeFromQueue(f)}},cl.checkTextureUtility=function(f){f.invalidatedWidth>=.2*f.width&&this.retireTexture(f)},cl.checkTextureFullness=function(f){var d=this.getTextureQueue(f.height);f.usedWidth/f.width>.8&&f.fullnessChecks>=10?di(d,f):f.fullnessChecks++},cl.retireTexture=function(f){var d=f.height,m=this.getTextureQueue(d),_=this.lookup;di(m,f),f.retired=!0;for(var b=f.eleCaches,w=0;w<b.length;w++){var E=b[w];_.deleteCache(E.key,E.level)}mr(b),this.getRetiredTextureQueue(d).push(f)},cl.addTexture=function(f,c){var _={};return this.getTextureQueue(f).push(_),_.eleCaches=[],_.height=f,_.width=Math.max(1024,c),_.usedWidth=0,_.invalidatedWidth=0,_.fullnessChecks=0,_.canvas=this.renderer.makeOffscreenCanvas(_.width,_.height),_.context=_.canvas.getContext("2d"),_},cl.recycleTexture=function(f,c){for(var m=this.getTextureQueue(f),_=this.getRetiredTextureQueue(f),b=0;b<_.length;b++){var w=_[b];if(w.width>=c)return w.retired=!1,w.usedWidth=0,w.invalidatedWidth=0,w.fullnessChecks=0,mr(w.eleCaches),w.context.setTransform(1,0,0,1,0,0),w.context.clearRect(0,0,w.width,w.height),di(_,w),m.push(w),w}},cl.queueElement=function(f,c){var m=this.getElementQueue(),_=this.getElementKeyToQueue(),b=this.getKey(f),w=_[b];if(w)w.level=Math.max(w.level,c),w.eles.merge(f),w.reqs++,m.updateItem(w);else{var E={eles:f.spawn().merge(f),level:c,reqs:1,key:b};m.push(E),_[b]=E}},cl.dequeue=function(f){for(var c=this,d=c.getElementQueue(),m=c.getElementKeyToQueue(),_=[],b=c.lookup,w=0;w<1&&d.size()>0;w++){var E=d.pop(),k=E.key,L=E.eles[0],G=b.hasCache(L,E.level);if(m[k]=null,!G){_.push(E);var K=c.getBoundingBox(L);c.getElement(L,K,f,E.level,im.dequeue)}}return _},cl.removeFromQueue=function(f){var d=this.getElementQueue(),m=this.getElementKeyToQueue(),_=this.getKey(f),b=m[_];null!=b&&(1===b.eles.length?(b.reqs=wc,d.updateItem(b),d.pop(),m[_]=null):b.eles.unmerge(f))},cl.onDequeue=function(f){this.onDequeues.push(f)},cl.offDequeue=function(f){di(this.onDequeues,f)},cl.setupDequeueing=Pf_setupDequeueing({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,d,m){return c.dequeue(d,m)},onDeqd:function(c,d){for(var m=0;m<c.onDequeues.length;m++)(0,c.onDequeues[m])(d)},shouldRedraw:function(c,d,m,_){for(var b=0;b<d.length;b++)for(var w=d[b].eles,E=0;E<w.length;E++){var k=w[E].boundingBox();if(xm(k,_))return!0}return!1},priority:function(c){return c.renderer.beforeRenderPriorities.eleTxrDeq}});var da=function(c){var d=this,m=d.renderer=c,_=m.cy;d.layersByLevel={},d.firstGet=!0,d.lastInvalidationTime=Aa()-500,d.skipping=!1,d.eleTxrDeqs=_.collection(),d.scheduleElementRefinement=O.default(function(){d.refineElementTextures(d.eleTxrDeqs),d.eleTxrDeqs.unmerge(d.eleTxrDeqs)},50),m.beforeRender(function(w,E){d.skipping=E-d.lastInvalidationTime<=250},m.beforeRenderPriorities.lyrTxrSkip),d.layersQueue=new q.default(function(E,k){return k.reqs-E.reqs}),d.setupDequeueing()},Oa=da.prototype,Fv=0,$h=Math.pow(2,53)-1;Oa.makeLayer=function(f,c){var d=Math.pow(2,c),m=Math.ceil(f.w*d),_=Math.ceil(f.h*d),b=this.renderer.makeOffscreenCanvas(m,_),w={id:Fv=++Fv%$h,bb:f,level:c,width:m,height:_,canvas:b,context:b.getContext("2d"),eles:[],elesQueue:[],reqs:0},E=w.context,k=-w.bb.x1,L=-w.bb.y1;return E.scale(d,d),E.translate(k,L),w},Oa.getLayers=function(f,c,d){var m=this,w=m.renderer.cy.zoom(),E=m.firstGet;if(m.firstGet=!1,null==d)if((d=Math.ceil(mv(w*c)))<-4)d=-4;else if(w>=3.99||d>2)return null;m.validateLayersElesOrdering(d,f);var K,de,k=m.layersByLevel,L=Math.pow(2,d),G=k[d]=k[d]||[];if(m.levelIsComplete(d,f))return G;!function(){var Ht=function(gn){if(m.validateLayersElesOrdering(gn,f),m.levelIsComplete(gn,f))return de=k[gn],!0},Vt=function(gn){if(!de)for(var Kt=d+gn;-4<=Kt&&Kt<=2&&!Ht(Kt);Kt+=gn);};Vt(1),Vt(-1);for(var et=G.length-1;et>=0;et--){var Wt=G[et];Wt.invalid&&di(G,Wt)}}();var Ne=function(Ht){var Vt=(Ht=Ht||{}).after;if(function(){if(!K){K=Sc();for(var Ht=0;Ht<f.length;Ht++)Sa(K,f[Ht].boundingBox())}}(),K.w*L*(K.h*L)>16e6)return null;var Wt=m.makeLayer(K,d);if(null!=Vt){var Tt=G.indexOf(Vt)+1;G.splice(Tt,0,Wt)}else(void 0===Ht.insert||Ht.insert)&&G.unshift(Wt);return Wt};if(m.skipping&&!E)return null;for(var ze=null,Qe=f.length/1,qe=!E,dt=0;dt<f.length;dt++){var Lt=f[dt],kt=Lt._private.rscratch,mt=kt.imgLayerCaches=kt.imgLayerCaches||{},Ft=mt[d];if(Ft)ze=Ft;else{if((!ze||ze.eles.length>=Qe||!yv(ze.bb,Lt.boundingBox()))&&!(ze=Ne({insert:!0,after:ze})))return null;de||qe?m.queueLayer(ze,Lt):m.drawEleInLayer(ze,Lt,d,c),ze.eles.push(Lt),mt[d]=ze}}return de||(qe?null:G)},Oa.getEleLevelForLayerLevel=function(f,c){return f},Oa.drawEleInLayer=function(f,c,d,m){var b=this.renderer,w=f.context,E=c.boundingBox();0===E.w||0===E.h||!c.visible()||(d=this.getEleLevelForLayerLevel(d,m),b.setImgSmoothing(w,!1),b.drawCachedElement(w,c,null,null,d,!0),b.setImgSmoothing(w,!0))},Oa.levelIsComplete=function(f,c){var m=this.layersByLevel[f];if(!m||0===m.length)return!1;for(var _=0,b=0;b<m.length;b++){var w=m[b];if(w.reqs>0||w.invalid)return!1;_+=w.eles.length}return _===c.length},Oa.validateLayersElesOrdering=function(f,c){var d=this.layersByLevel[f];if(d)for(var m=0;m<d.length;m++){for(var _=d[m],b=-1,w=0;w<c.length;w++)if(_.eles[0]===c[w]){b=w;break}if(b<0)this.invalidateLayer(_);else{var E=b;for(w=0;w<_.eles.length;w++)if(_.eles[w]!==c[E+w]){this.invalidateLayer(_);break}}}},Oa.updateElementsInLayers=function(f,c){for(var m=Ln(f[0]),_=0;_<f.length;_++)for(var b=m?null:f[_],w=m?f[_]:f[_].ele,E=w._private.rscratch,k=E.imgLayerCaches=E.imgLayerCaches||{},L=-4;L<=2;L++){var G=k[L];!G||b&&this.getEleLevelForLayerLevel(G.level)!==b.level||c(G,w,b)}},Oa.haveLayers=function(){for(var c=!1,d=-4;d<=2;d++){var m=this.layersByLevel[d];if(m&&m.length>0){c=!0;break}}return c},Oa.invalidateElements=function(f){var c=this;0!==f.length&&(c.lastInvalidationTime=Aa(),0!==f.length&&c.haveLayers()&&c.updateElementsInLayers(f,function(m,_,b){c.invalidateLayer(m)}))},Oa.invalidateLayer=function(f){if(this.lastInvalidationTime=Aa(),!f.invalid){var c=f.level,d=f.eles;di(this.layersByLevel[c],f),f.elesQueue=[],f.invalid=!0,f.replacement&&(f.replacement.invalid=!0);for(var _=0;_<d.length;_++){var b=d[_]._private.rscratch.imgLayerCaches;b&&(b[c]=null)}}},Oa.refineElementTextures=function(f){var c=this;c.updateElementsInLayers(f,function(m,_,b){var w=m.replacement;if(w||((w=m.replacement=c.makeLayer(m.bb,m.level)).replaces=m,w.eles=m.eles),!w.reqs)for(var E=0;E<w.eles.length;E++)c.queueLayer(w,w.eles[E])})},Oa.enqueueElementRefinement=function(f){this.eleTxrDeqs.merge(f),this.scheduleElementRefinement()},Oa.queueLayer=function(f,c){var m=this.layersQueue,_=f.elesQueue,b=_.hasId=_.hasId||{};if(!f.replacement){if(c){if(b[c.id()])return;_.push(c),b[c.id()]=!0}f.reqs?(f.reqs++,m.updateItem(f)):(f.reqs=1,m.push(f))}},Oa.dequeue=function(f){for(var c=this,d=c.layersQueue,m=[],_=0;_<1&&0!==d.size();){var b=d.peek();if(b.replacement)d.pop();else if(b.replaces&&b!==b.replaces.replacement)d.pop();else if(b.invalid)d.pop();else{var w=b.elesQueue.shift();w&&(c.drawEleInLayer(b,w,b.level,f),_++),0===m.length&&m.push(!0),0===b.elesQueue.length&&(d.pop(),b.reqs=0,b.replaces&&c.applyLayerReplacement(b),c.requestRedraw())}}return m},Oa.applyLayerReplacement=function(f){var d=this.layersByLevel[f.level],m=f.replaces,_=d.indexOf(m);if(!(_<0||m.invalid)){d[_]=f;for(var b=0;b<f.eles.length;b++){var w=f.eles[b]._private,E=w.imgLayerCaches=w.imgLayerCaches||{};E&&(E[f.level]=f)}this.requestRedraw()}},Oa.requestRedraw=O.default(function(){var f=this.renderer;f.redrawHint("eles",!0),f.redrawHint("drag",!0),f.redraw()},100),Oa.setupDequeueing=Pf_setupDequeueing({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(c,d){return c.dequeue(d)},onDeqd:Ge,shouldRedraw:nl,priority:function(c){return c.renderer.beforeRenderPriorities.lyrTxrDeq}});var Gy,Nv={};function q_(f,c){for(var d=0;d<c.length;d++){var m=c[d];f.lineTo(m.x,m.y)}}function jm(f,c,d){for(var m,_=0;_<c.length;_++){var b=c[_];0===_&&(m=b),f.lineTo(b.x,b.y)}f.quadraticCurveTo(d.x,d.y,m.x,m.y)}function Wy(f,c,d){f.beginPath&&f.beginPath();for(var m=c,_=0;_<m.length;_++)f.lineTo((b=m[_]).x,b.y);var w=d,E=d[0];for(f.moveTo(E.x,E.y),_=1;_<w.length;_++){var b;f.lineTo((b=w[_]).x,b.y)}f.closePath&&f.closePath()}function X_(f,c,d,m,_){f.beginPath&&f.beginPath(),f.arc(d,m,_,0,2*Math.PI,!1);var b=c,w=b[0];f.moveTo(w.x,w.y);for(var E=0;E<b.length;E++){var k=b[E];f.lineTo(k.x,k.y)}f.closePath&&f.closePath()}function hC(f,c,d,m){f.arc(c,d,m,0,2*Math.PI,!1)}Nv.arrowShapeImpl=function(f){return(Gy||(Gy={polygon:q_,"triangle-backcurve":jm,"triangle-tee":Wy,"circle-triangle":X_,"triangle-cross":Wy,circle:hC}))[f]};var Jd={drawElement:function(f,c,d,m,_,b){c.isNode()?this.drawNode(f,c,d,m,_,b):this.drawEdge(f,c,d,m,_,b)},drawElementOverlay:function(f,c){c.isNode()?this.drawNodeOverlay(f,c):this.drawEdgeOverlay(f,c)},drawElementUnderlay:function(f,c){c.isNode()?this.drawNodeUnderlay(f,c):this.drawEdgeUnderlay(f,c)},drawCachedElementPortion:function(f,c,d,m,_,b,w,E){var k=this,L=d.getBoundingBox(c);if(0!==L.w&&0!==L.h){var G=d.getElement(c,L,m,_,b);if(null!=G){var K=E(k,c);if(0===K)return;var ze,Qe,qe,dt,Lt,Ft,le=w(k,c),de=L.x1,pe=L.y1,Ie=L.w,Ne=L.h;if(0!==le){var kt=d.getRotationPoint(c);f.translate(qe=kt.x,dt=kt.y),f.rotate(le),(Lt=k.getImgSmoothing(f))||k.setImgSmoothing(f,!0);var mt=d.getRotationOffset(c);ze=mt.x,Qe=mt.y}else ze=de,Qe=pe;1!==K&&(f.globalAlpha=(Ft=f.globalAlpha)*K),f.drawImage(G.texture.canvas,G.x,0,G.width,G.height,ze,Qe,Ie,Ne),1!==K&&(f.globalAlpha=Ft),0!==le&&(f.rotate(-le),f.translate(-qe,-dt),Lt||k.setImgSmoothing(f,!1))}else d.drawElement(f,c)}}},rm=function(){return 0},Bv=function(c,d){return c.getTextAngle(d,null)},jy=function(c,d){return c.getTextAngle(d,"source")},$y=function(c,d){return c.getTextAngle(d,"target")},a=function(c,d){return d.effectiveOpacity()},h=function(c,d){return d.pstyle("text-opacity").pfValue*d.effectiveOpacity()};Jd.drawCachedElement=function(f,c,d,m,_,b){var w=this,E=w.data,k=E.eleTxrCache,L=E.lblTxrCache,G=E.slbTxrCache,K=E.tlbTxrCache,le=c.boundingBox(),de=!0===b?k.reasons.highQuality:null;if(0!==le.w&&0!==le.h&&c.visible()&&(!m||xm(le,m))){var pe=c.isEdge(),Ie=c.element()._private.rscratch.badLine;w.drawElementUnderlay(f,c),w.drawCachedElementPortion(f,c,k,d,_,de,rm,a),(!pe||!Ie)&&w.drawCachedElementPortion(f,c,L,d,_,de,Bv,h),pe&&!Ie&&(w.drawCachedElementPortion(f,c,G,d,_,de,jy,h),w.drawCachedElementPortion(f,c,K,d,_,de,$y,h)),w.drawElementOverlay(f,c)}},Jd.drawElements=function(f,c){for(var m=0;m<c.length;m++)this.drawElement(f,c[m])},Jd.drawCachedElements=function(f,c,d,m){for(var b=0;b<c.length;b++)this.drawCachedElement(f,c[b],d,m)},Jd.drawCachedNodes=function(f,c,d,m){for(var b=0;b<c.length;b++){var w=c[b];!w.isNode()||this.drawCachedElement(f,w,d,m)}},Jd.drawLayeredElements=function(f,c,d,m){var b=this.data.lyrTxrCache.getLayers(c,d);if(b)for(var w=0;w<b.length;w++){var E=b[w],k=E.bb;0===k.w||0===k.h||f.drawImage(E.canvas,k.x1,k.y1,k.w,k.h)}else this.drawCachedElements(f,c,d,m)};var g={drawEdge:function(f,c,d){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],b=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],w=this,E=c._private.rscratch;if((!b||c.visible())&&!E.badLine&&null!=E.allpts&&!isNaN(E.allpts[0])){var k;d&&f.translate(-(k=d).x1,-k.y1);var L=b?c.pstyle("opacity").value:1,G=b?c.pstyle("line-opacity").value:1,K=c.pstyle("curve-style").value,le=c.pstyle("line-style").value,de=c.pstyle("width").pfValue,pe=c.pstyle("line-cap").value,Ie=L*G,Ne=L*G,ze=function(){var et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;"straight-triangle"===K?(w.eleStrokeStyle(f,c,et),w.drawEdgeTrianglePath(c,f,E.allpts)):(f.lineWidth=de,f.lineCap=pe,w.eleStrokeStyle(f,c,et),w.drawEdgePath(c,f,E.allpts,le),f.lineCap="butt")},Qe=function(){!_||w.drawEdgeOverlay(f,c)},qe=function(){!_||w.drawEdgeUnderlay(f,c)},dt=function(){var et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne;w.drawArrowheads(f,c,et)},Lt=function(){w.drawElementText(f,c,null,m)};f.lineJoin="round";var kt="yes"===c.pstyle("ghost").value;if(kt){var mt=c.pstyle("ghost-offset-x").pfValue,Ft=c.pstyle("ghost-offset-y").pfValue,bt=c.pstyle("ghost-opacity").value,Ht=Ie*bt;f.translate(mt,Ft),ze(Ht),dt(Ht),f.translate(-mt,-Ft)}qe(),ze(),dt(),Qe(),Lt(),d&&f.translate(k.x1,k.y1)}}},y=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(d,m){if(m.visible()){var _=m.pstyle("".concat(c,"-opacity")).value;if(0!==_){var b=this,w=b.usePaths(),E=m._private.rscratch,L=2*m.pstyle("".concat(c,"-padding")).pfValue,G=m.pstyle("".concat(c,"-color")).value;d.lineWidth=L,d.lineCap="self"!==E.edgeType||w?"round":"butt",b.colorStrokeStyle(d,G[0],G[1],G[2],_),b.drawEdgePath(m,d,E.allpts,"solid")}}}};g.drawEdgeOverlay=y("overlay"),g.drawEdgeUnderlay=y("underlay"),g.drawEdgePath=function(f,c,d,m){var w,_=f._private.rscratch,b=c,E=!1,k=this.usePaths(),L=f.pstyle("line-dash-pattern").pfValue,G=f.pstyle("line-dash-offset").pfValue;if(k){var K=d.join("$");_.pathCacheKey&&_.pathCacheKey===K?(w=c=_.pathCache,E=!0):(w=c=new Path2D,_.pathCacheKey=K,_.pathCache=w)}if(b.setLineDash)switch(m){case"dotted":b.setLineDash([1,1]);break;case"dashed":b.setLineDash(L),b.lineDashOffset=G;break;case"solid":b.setLineDash([])}if(!E&&!_.badLine)switch(c.beginPath&&c.beginPath(),c.moveTo(d[0],d[1]),_.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var de=2;de+3<d.length;de+=4)c.quadraticCurveTo(d[de],d[de+1],d[de+2],d[de+3]);break;case"straight":case"segments":case"haystack":for(var pe=2;pe+1<d.length;pe+=2)c.lineTo(d[pe],d[pe+1])}c=b,k?c.stroke(w):c.stroke(),c.setLineDash&&c.setLineDash([])},g.drawEdgeTrianglePath=function(f,c,d){c.fillStyle=c.strokeStyle;for(var m=f.pstyle("width").pfValue,_=0;_+1<d.length;_+=2){var b=[d[_+2]-d[_],d[_+3]-d[_+1]],w=Math.sqrt(b[0]*b[0]+b[1]*b[1]),E=[b[1]/w,-b[0]/w],k=[E[0]*m/2,E[1]*m/2];c.beginPath(),c.moveTo(d[_]-k[0],d[_+1]-k[1]),c.lineTo(d[_]+k[0],d[_+1]+k[1]),c.lineTo(d[_+2],d[_+3]),c.closePath(),c.fill()}},g.drawArrowheads=function(f,c,d){var m=c._private.rscratch,_="haystack"===m.edgeType;_||this.drawArrowhead(f,c,"source",m.arrowStartX,m.arrowStartY,m.srcArrowAngle,d),this.drawArrowhead(f,c,"mid-target",m.midX,m.midY,m.midtgtArrowAngle,d),this.drawArrowhead(f,c,"mid-source",m.midX,m.midY,m.midsrcArrowAngle,d),_||this.drawArrowhead(f,c,"target",m.arrowEndX,m.arrowEndY,m.tgtArrowAngle,d)},g.drawArrowhead=function(f,c,d,m,_,b,w){if(!(isNaN(m)||null==m||isNaN(_)||null==_||isNaN(b)||null==b)){var E=this,k=c.pstyle(d+"-arrow-shape").value;if("none"!==k){var L="hollow"===c.pstyle(d+"-arrow-fill").value?"both":"filled",G=c.pstyle(d+"-arrow-fill").value,K=c.pstyle("width").pfValue,le=c.pstyle("opacity").value;void 0===w&&(w=le);var de=f.globalCompositeOperation;(1!==w||"hollow"===G)&&(f.globalCompositeOperation="destination-out",E.colorFillStyle(f,255,255,255,1),E.colorStrokeStyle(f,255,255,255,1),E.drawArrowShape(c,f,L,K,k,m,_,b),f.globalCompositeOperation=de);var pe=c.pstyle(d+"-arrow-color").value;E.colorFillStyle(f,pe[0],pe[1],pe[2],w),E.colorStrokeStyle(f,pe[0],pe[1],pe[2],w),E.drawArrowShape(c,f,G,K,k,m,_,b)}}},g.drawArrowShape=function(f,c,d,m,_,b,w,E){var K,k=this,L=this.usePaths()&&"triangle-cross"!==_,G=!1,le=c,de={x:b,y:w},pe=f.pstyle("arrow-scale").value,Ie=this.getArrowWidth(m,pe),Ne=k.arrowShapes[_];if(L){var ze=k.arrowPathCache=k.arrowPathCache||[],Qe=xc(_),qe=ze[Qe];null!=qe?(K=c=qe,G=!0):(K=c=new Path2D,ze[Qe]=K)}G||(c.beginPath&&c.beginPath(),L?Ne.draw(c,1,0,{x:0,y:0},1):Ne.draw(c,Ie,E,de,m),c.closePath&&c.closePath()),c=le,L&&(c.translate(b,w),c.rotate(E),c.scale(Ie,Ie)),("filled"===d||"both"===d)&&(L?c.fill(K):c.fill()),("hollow"===d||"both"===d)&&(c.lineWidth=(Ne.matchEdgeWidth?m:1)/(L?Ie:1),c.lineJoin="miter",L?c.stroke(K):c.stroke()),L&&(c.scale(1/Ie,1/Ie),c.rotate(-E),c.translate(-b,-w))};var A={safeDrawImage:function(f,c,d,m,_,b,w,E,k,L){if(!(_<=0||b<=0||k<=0||L<=0))try{f.drawImage(c,d,m,_,b,w,E,k,L)}catch(G){he(G)}},drawInscribedImage:function(f,c,d,m,_){var b=this,w=d.position(),E=w.x,k=w.y,L=d.cy().style(),G=L.getIndexedStyle.bind(L),K=G(d,"background-fit","value",m),le=G(d,"background-repeat","value",m),de=d.width(),pe=d.height(),Ie=2*d.padding(),Ne=de+("inner"===G(d,"background-width-relative-to","value",m)?0:Ie),ze=pe+("inner"===G(d,"background-height-relative-to","value",m)?0:Ie),Qe=d._private.rscratch,dt="node"===G(d,"background-clip","value",m),Lt=G(d,"background-image-opacity","value",m)*_,kt=G(d,"background-image-smoothing","value",m),mt=c.width||c.cachedW,Ft=c.height||c.cachedH;(null==mt||null==Ft)&&(document.body.appendChild(c),mt=c.cachedW=c.width||c.offsetWidth,Ft=c.cachedH=c.height||c.offsetHeight,document.body.removeChild(c));var bt=mt,Ht=Ft;if("auto"!==G(d,"background-width","value",m)&&(bt="%"===G(d,"background-width","units",m)?G(d,"background-width","pfValue",m)*Ne:G(d,"background-width","pfValue",m)),"auto"!==G(d,"background-height","value",m)&&(Ht="%"===G(d,"background-height","units",m)?G(d,"background-height","pfValue",m)*ze:G(d,"background-height","pfValue",m)),0!==bt&&0!==Ht){if("contain"===K)bt*=Vt=Math.min(Ne/bt,ze/Ht),Ht*=Vt;else if("cover"===K){var Vt;bt*=Vt=Math.max(Ne/bt,ze/Ht),Ht*=Vt}var et=E-Ne/2,Wt=G(d,"background-position-x","units",m),Tt=G(d,"background-position-x","pfValue",m);et+="%"===Wt?(Ne-bt)*Tt:Tt;var gn=G(d,"background-offset-x","units",m),Kt=G(d,"background-offset-x","pfValue",m);et+="%"===gn?(Ne-bt)*Kt:Kt;var ln=k-ze/2,Sn=G(d,"background-position-y","units",m),Rn=G(d,"background-position-y","pfValue",m);ln+="%"===Sn?(ze-Ht)*Rn:Rn;var Jn=G(d,"background-offset-y","units",m),En=G(d,"background-offset-y","pfValue",m);ln+="%"===Jn?(ze-Ht)*En:En,Qe.pathCache&&(et-=E,ln-=k,E=0,k=0);var Yn=f.globalAlpha;f.globalAlpha=Lt;var li=b.getImgSmoothing(f),Ci=!1;if("no"===kt&&li?(b.setImgSmoothing(f,!1),Ci=!0):"yes"===kt&&!li&&(b.setImgSmoothing(f,!0),Ci=!0),"no-repeat"===le)dt&&(f.save(),Qe.pathCache?f.clip(Qe.pathCache):(b.nodeShapes[b.getNodeShape(d)].draw(f,E,k,Ne,ze),f.clip())),b.safeDrawImage(f,c,0,0,mt,Ft,et,ln,bt,Ht),dt&&f.restore();else{var pi=f.createPattern(c,le);f.fillStyle=pi,b.nodeShapes[b.getNodeShape(d)].draw(f,E,k,Ne,ze),f.translate(et,ln),f.fill(),f.translate(-et,-ln)}f.globalAlpha=Yn,Ci&&b.setImgSmoothing(f,li)}}},T={};function R(f,c,d,m,_){var b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;f.beginPath(),f.moveTo(c+b,d),f.lineTo(c+m-b,d),f.quadraticCurveTo(c+m,d,c+m,d+b),f.lineTo(c+m,d+_-b),f.quadraticCurveTo(c+m,d+_,c+m-b,d+_),f.lineTo(c+b,d+_),f.quadraticCurveTo(c,d+_,c,d+_-b),f.lineTo(c,d+b),f.quadraticCurveTo(c,d,c+b,d),f.closePath(),f.fill()}T.eleTextBiggerThanMin=function(f,c){if(!c){var d=f.cy().zoom(),m=this.getPixelRatio(),_=Math.ceil(mv(d*m));c=Math.pow(2,_)}return!(f.pstyle("font-size").pfValue*c<f.pstyle("min-zoomed-font-size").pfValue)},T.drawElementText=function(f,c,d,m,_){var b=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],w=this;if(null==m){if(b&&!w.eleTextBiggerThanMin(c))return}else if(!1===m)return;if(c.isNode()){var E=c.pstyle("label");if(!E||!E.value)return;var k=w.getLabelJustification(c);f.textAlign=k,f.textBaseline="bottom"}else{var L=c.element()._private.rscratch.badLine,G=c.pstyle("label"),K=c.pstyle("source-label"),le=c.pstyle("target-label");if(L||(!G||!G.value)&&(!K||!K.value)&&(!le||!le.value))return;f.textAlign="center",f.textBaseline="bottom"}var pe,de=!d;d&&f.translate(-(pe=d).x1,-pe.y1),null==_?(w.drawText(f,c,null,de,b),c.isEdge()&&(w.drawText(f,c,"source",de,b),w.drawText(f,c,"target",de,b))):w.drawText(f,c,_,de,b),d&&f.translate(pe.x1,pe.y1)},T.getFontCache=function(f){var c;this.fontCaches=this.fontCaches||[];for(var d=0;d<this.fontCaches.length;d++)if((c=this.fontCaches[d]).context===f)return c;return this.fontCaches.push(c={context:f}),c},T.setupTextStyle=function(f,c){var d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],m=c.pstyle("font-style").strValue,_=c.pstyle("font-size").pfValue+"px",b=c.pstyle("font-family").strValue,w=c.pstyle("font-weight").strValue,E=d?c.effectiveOpacity()*c.pstyle("text-opacity").value:1,k=c.pstyle("text-outline-opacity").value*E,L=c.pstyle("color").value,G=c.pstyle("text-outline-color").value;f.font=m+" "+w+" "+_+" "+b,f.lineJoin="round",this.colorFillStyle(f,L[0],L[1],L[2],E),this.colorStrokeStyle(f,G[0],G[1],G[2],k)},T.getTextAngle=function(f,c){var _=f._private.rscratch,w=f.pstyle((c?c+"-":"")+"text-rotation"),E=sr(_,"labelAngle",c);return"autorotate"===w.strValue?f.isEdge()?E:0:"none"===w.strValue?0:w.pfValue},T.drawText=function(f,c,d){var m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],b=c._private,w=b.rscratch,E=_?c.effectiveOpacity():1;if(!_||0!==E&&0!==c.pstyle("text-opacity").value){"main"===d&&(d=null);var G,K,k=sr(w,"labelX",d),L=sr(w,"labelY",d),le=this.getLabelText(c,d);if(null!=le&&""!==le&&!isNaN(k)&&!isNaN(L)){this.setupTextStyle(f,c,_);var Lt,de=d?d+"-":"",pe=sr(w,"labelWidth",d),Ie=sr(w,"labelHeight",d),Ne=c.pstyle(de+"text-margin-x").pfValue,ze=c.pstyle(de+"text-margin-y").pfValue,Qe=c.isEdge(),qe=c.pstyle("text-halign").value,dt=c.pstyle("text-valign").value;switch(Qe&&(qe="center",dt="center"),k+=Ne,L+=ze,0!==(Lt=m?this.getTextAngle(c,d):0)&&(f.translate(G=k,K=L),f.rotate(Lt),k=0,L=0),dt){case"top":break;case"center":L+=Ie/2;break;case"bottom":L+=Ie}var kt=c.pstyle("text-background-opacity").value,mt=c.pstyle("text-border-opacity").value,Ft=c.pstyle("text-border-width").pfValue,bt=c.pstyle("text-background-padding").pfValue;if(kt>0||Ft>0&&mt>0){var Ht=k-bt;switch(qe){case"left":Ht-=pe;break;case"center":Ht-=pe/2}var Vt=L-Ie-bt,et=pe+2*bt,Wt=Ie+2*bt;if(kt>0){var Tt=f.fillStyle,gn=c.pstyle("text-background-color").value;f.fillStyle="rgba("+gn[0]+","+gn[1]+","+gn[2]+","+kt*E+")";var Kt=c.pstyle("text-background-shape").strValue;0===Kt.indexOf("round")?R(f,Ht,Vt,et,Wt,2):f.fillRect(Ht,Vt,et,Wt),f.fillStyle=Tt}if(Ft>0&&mt>0){var ln=f.strokeStyle,Sn=f.lineWidth,Rn=c.pstyle("text-border-color").value,Jn=c.pstyle("text-border-style").value;if(f.strokeStyle="rgba("+Rn[0]+","+Rn[1]+","+Rn[2]+","+mt*E+")",f.lineWidth=Ft,f.setLineDash)switch(Jn){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"double":f.lineWidth=Ft/4,f.setLineDash([]);break;case"solid":f.setLineDash([])}if(f.strokeRect(Ht,Vt,et,Wt),"double"===Jn){var En=Ft/2;f.strokeRect(Ht+En,Vt+En,et-2*En,Wt-2*En)}f.setLineDash&&f.setLineDash([]),f.lineWidth=Sn,f.strokeStyle=ln}}var Yn=2*c.pstyle("text-outline-width").pfValue;if(Yn>0&&(f.lineWidth=Yn),"wrap"===c.pstyle("text-wrap").value){var li=sr(w,"labelWrapCachedLines",d),Ci=sr(w,"labelLineHeight",d),pi=pe/2,hi=this.getLabelJustification(c);switch("auto"===hi||("left"===qe?"left"===hi?k+=-pe:"center"===hi&&(k+=-pi):"center"===qe?"left"===hi?k+=-pi:"right"===hi&&(k+=pi):"right"===qe&&("center"===hi?k+=pi:"right"===hi&&(k+=pe))),dt){case"top":case"center":case"bottom":L-=(li.length-1)*Ci}for(var Mn=0;Mn<li.length;Mn++)Yn>0&&f.strokeText(li[Mn],k,L),f.fillText(li[Mn],k,L),L+=Ci}else Yn>0&&f.strokeText(le,k,L),f.fillText(le,k,L);0!==Lt&&(f.rotate(-Lt),f.translate(-G,-K))}}};var N={drawNode:function(f,c,d){var E,k,m=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],_=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],b=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],w=this,L=c._private,G=L.rscratch,K=c.position();if(Ut(K.x)&&Ut(K.y)&&(!b||c.visible())){var pe,ze,le=b?c.effectiveOpacity():1,de=w.usePaths(),Ie=!1,Ne=c.padding();E=c.width()+2*Ne,k=c.height()+2*Ne,d&&f.translate(-(ze=d).x1,-ze.y1);for(var Qe=c.pstyle("background-image"),qe=Qe.value,dt=new Array(qe.length),Lt=new Array(qe.length),kt=0,mt=0;mt<qe.length;mt++){var Ft=qe[mt],bt=dt[mt]=null!=Ft&&"none"!==Ft;if(bt){var Ht=c.cy().style().getIndexedStyle(c,"background-image-crossorigin","value",mt);kt++,Lt[mt]=w.getCachedImage(Ft,Ht,function(){L.backgroundTimestamp=Date.now(),c.emitAndNotify("background")})}}var Vt=c.pstyle("background-blacken").value,et=c.pstyle("border-width").pfValue,Wt=c.pstyle("background-opacity").value*le,Tt=c.pstyle("border-color").value,gn=c.pstyle("border-style").value,Kt=c.pstyle("border-opacity").value*le;f.lineJoin="miter";var ln=function(){var yr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt;w.eleFillStyle(f,c,yr)},Sn=function(){var yr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt;w.colorStrokeStyle(f,Tt[0],Tt[1],Tt[2],yr)},Rn=c.pstyle("shape").strValue,Jn=c.pstyle("shape-polygon-points").pfValue;if(de){f.translate(K.x,K.y);var En=w.nodePathCache=w.nodePathCache||[],Yn=Tg("polygon"===Rn?Rn+","+Jn.join(","):Rn,""+k,""+E),li=En[Yn];null!=li?(Ie=!0,G.pathCache=pe=li):(pe=new Path2D,En[Yn]=G.pathCache=pe)}var Ci=function(){if(!Ie){var yr=K;de&&(yr={x:0,y:0}),w.nodeShapes[w.getNodeShape(c)].draw(pe||f,yr.x,yr.y,E,k)}de?f.fill(pe):f.fill()},pi=function(){for(var yr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,Cr=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Kr=L.backgrounding,Fs=0,Zr=0;Zr<Lt.length;Zr++){var Ui=c.cy().style().getIndexedStyle(c,"background-image-containment","value",Zr);Cr&&"over"===Ui||!Cr&&"inside"===Ui?Fs++:dt[Zr]&&Lt[Zr].complete&&!Lt[Zr].error&&(Fs++,w.drawInscribedImage(f,Lt[Zr],c,Zr,yr))}L.backgrounding=Fs!==kt,Kr!==L.backgrounding&&c.updateStyle(!1)},hi=function(){var yr=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Cr=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;w.hasPie(c)&&(w.drawPie(f,c,Cr),yr&&(de||w.nodeShapes[w.getNodeShape(c)].draw(f,K.x,K.y,E,k)))},Mn=function(){var yr=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,Cr=(Vt>0?Vt:-Vt)*yr,Kr=Vt>0?0:255;0!==Vt&&(w.colorFillStyle(f,Kr,Kr,Kr,Cr),de?f.fill(pe):f.fill())},ri=function(){if(et>0){if(f.lineWidth=et,f.lineCap="butt",f.setLineDash)switch(gn){case"dotted":f.setLineDash([1,1]);break;case"dashed":f.setLineDash([4,2]);break;case"solid":case"double":f.setLineDash([])}if(de?f.stroke(pe):f.stroke(),"double"===gn){f.lineWidth=et/3;var yr=f.globalCompositeOperation;f.globalCompositeOperation="destination-out",de?f.stroke(pe):f.stroke(),f.globalCompositeOperation=yr}f.setLineDash&&f.setLineDash([])}},xi=function(){_&&w.drawNodeOverlay(f,c,K,E,k)},ji=function(){_&&w.drawNodeUnderlay(f,c,K,E,k)},ir=function(){w.drawElementText(f,c,null,m)},Nr="yes"===c.pstyle("ghost").value;if(Nr){var Yr=c.pstyle("ghost-offset-x").pfValue,pr=c.pstyle("ghost-offset-y").pfValue,tr=c.pstyle("ghost-opacity").value,$r=tr*le;f.translate(Yr,pr),ln(tr*Wt),Ci(),pi($r,!0),Sn(tr*Kt),ri(),hi(0!==Vt||0!==et),pi($r,!1),Mn($r),f.translate(-Yr,-pr)}de&&f.translate(-K.x,-K.y),ji(),de&&f.translate(K.x,K.y),ln(),Ci(),pi(le,!0),Sn(),ri(),hi(0!==Vt||0!==et),pi(le,!1),Mn(),de&&f.translate(-K.x,-K.y),ir(),xi(),d&&f.translate(ze.x1,ze.y1)}}},ie=function(c){if(!["overlay","underlay"].includes(c))throw new Error("Invalid state");return function(d,m,_,b,w){if(m.visible()){var k=m.pstyle("".concat(c,"-padding")).pfValue,L=m.pstyle("".concat(c,"-opacity")).value,G=m.pstyle("".concat(c,"-color")).value,K=m.pstyle("".concat(c,"-shape")).value;if(L>0){if(_=_||m.position(),null==b||null==w){var le=m.padding();b=m.width()+2*le,w=m.height()+2*le}this.colorFillStyle(d,G[0],G[1],G[2],L),this.nodeShapes[K].draw(d,_.x,_.y,b+2*k,w+2*k),d.fill()}}}};N.drawNodeOverlay=ie("overlay"),N.drawNodeUnderlay=ie("underlay"),N.hasPie=function(f){return(f=f[0])._private.hasPie},N.drawPie=function(f,c,d,m){c=c[0],m=m||c.position();var _=c.cy().style(),b=c.pstyle("pie-size"),w=m.x,E=m.y,k=c.width(),L=c.height(),G=Math.min(k,L)/2,K=0;this.usePaths()&&(w=0,E=0),"%"===b.units?G*=b.pfValue:void 0!==b.pfValue&&(G=b.pfValue/2);for(var de=1;de<=_.pieBackgroundN;de++){var pe=c.pstyle("pie-"+de+"-background-size").value,Ie=c.pstyle("pie-"+de+"-background-color").value,Ne=c.pstyle("pie-"+de+"-background-opacity").value*d,ze=pe/100;ze+K>1&&(ze=1-K);var Qe=1.5*Math.PI+2*Math.PI*K,dt=Qe+2*Math.PI*ze;0===pe||K>=1||K+ze>1||(f.beginPath(),f.moveTo(w,E),f.arc(w,E,G,Qe,dt),f.closePath(),this.colorFillStyle(f,Ie[0],Ie[1],Ie[2],Ne),f.fill(),K+=ze)}};for(var ee={getPixelRatio:function(){var f=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(f.backingStorePixelRatio||f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1)},paintCache:function(f){for(var m,c=this.paintCaches=this.paintCaches||[],d=!0,_=0;_<c.length;_++)if((m=c[_]).context===f){d=!1;break}return d&&c.push(m={context:f}),m},createGradientStyleFor:function(f,c,d,m,_){var b,w=this.usePaths(),E=d.pstyle(c+"-gradient-stop-colors").value,k=d.pstyle(c+"-gradient-stop-positions").pfValue;if("radial-gradient"===m)if(d.isEdge()){var L=d.sourceEndpoint(),G=d.targetEndpoint(),K=d.midpoint(),le=no(L,K),de=no(G,K);b=f.createRadialGradient(K.x,K.y,0,K.x,K.y,Math.max(le,de))}else{var pe=w?{x:0,y:0}:d.position(),Ie=d.paddedWidth(),Ne=d.paddedHeight();b=f.createRadialGradient(pe.x,pe.y,0,pe.x,pe.y,Math.max(Ie,Ne))}else if(d.isEdge()){var ze=d.sourceEndpoint(),Qe=d.targetEndpoint();b=f.createLinearGradient(ze.x,ze.y,Qe.x,Qe.y)}else{var qe=w?{x:0,y:0}:d.position(),kt=d.paddedWidth()/2,mt=d.paddedHeight()/2;switch(d.pstyle("background-gradient-direction").value){case"to-bottom":b=f.createLinearGradient(qe.x,qe.y-mt,qe.x,qe.y+mt);break;case"to-top":b=f.createLinearGradient(qe.x,qe.y+mt,qe.x,qe.y-mt);break;case"to-left":b=f.createLinearGradient(qe.x+kt,qe.y,qe.x-kt,qe.y);break;case"to-right":b=f.createLinearGradient(qe.x-kt,qe.y,qe.x+kt,qe.y);break;case"to-bottom-right":case"to-right-bottom":b=f.createLinearGradient(qe.x-kt,qe.y-mt,qe.x+kt,qe.y+mt);break;case"to-top-right":case"to-right-top":b=f.createLinearGradient(qe.x-kt,qe.y+mt,qe.x+kt,qe.y-mt);break;case"to-bottom-left":case"to-left-bottom":b=f.createLinearGradient(qe.x+kt,qe.y-mt,qe.x-kt,qe.y+mt);break;case"to-top-left":case"to-left-top":b=f.createLinearGradient(qe.x+kt,qe.y+mt,qe.x-kt,qe.y-mt)}}if(!b)return null;for(var bt=k.length===E.length,Ht=E.length,Vt=0;Vt<Ht;Vt++)b.addColorStop(bt?k[Vt]:Vt/(Ht-1),"rgba("+E[Vt][0]+","+E[Vt][1]+","+E[Vt][2]+","+_+")");return b},gradientFillStyle:function(f,c,d,m){var _=this.createGradientStyleFor(f,"background",c,d,m);if(!_)return null;f.fillStyle=_},colorFillStyle:function(f,c,d,m,_){f.fillStyle="rgba("+c+","+d+","+m+","+_+")"},eleFillStyle:function(f,c,d){var m=c.pstyle("background-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientFillStyle(f,c,m,d);else{var _=c.pstyle("background-color").value;this.colorFillStyle(f,_[0],_[1],_[2],d)}},gradientStrokeStyle:function(f,c,d,m){var _=this.createGradientStyleFor(f,"line",c,d,m);if(!_)return null;f.strokeStyle=_},colorStrokeStyle:function(f,c,d,m,_){f.strokeStyle="rgba("+c+","+d+","+m+","+_+")"},eleStrokeStyle:function(f,c,d){var m=c.pstyle("line-fill").value;if("linear-gradient"===m||"radial-gradient"===m)this.gradientStrokeStyle(f,c,m,d);else{var _=c.pstyle("line-color").value;this.colorStrokeStyle(f,_[0],_[1],_[2],d)}},matchCanvasSize:function(f){var c=this,d=c.data,m=c.findContainerClientCoords(),_=m[2],b=m[3],w=c.getPixelRatio();(f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_NODE]||f===c.data.bufferCanvases[c.MOTIONBLUR_BUFFER_DRAG])&&(w=c.motionBlurPxRatio);var G,k=_*w,L=b*w;if(k!==c.canvasWidth||L!==c.canvasHeight){c.fontCaches=null;var K=d.canvasContainer;K.style.width=_+"px",K.style.height=b+"px";for(var le=0;le<c.CANVAS_LAYERS;le++)(G=d.canvases[le]).width=k,G.height=L,G.style.width=_+"px",G.style.height=b+"px";for(le=0;le<c.BUFFER_COUNT;le++)(G=d.bufferCanvases[le]).width=k,G.height=L,G.style.width=_+"px",G.style.height=b+"px";c.textureMult=1,w<=1&&(G=d.bufferCanvases[c.TEXTURE_BUFFER],c.textureMult=2,G.width=k*c.textureMult,G.height=L*c.textureMult),c.canvasWidth=k,c.canvasHeight=L}},renderTo:function(f,c,d,m){this.render({forcedContext:f,forcedZoom:c,forcedPan:d,drawAllLayers:!0,forcedPxRatio:m})},render:function(f){var c=(f=f||yi()).forcedContext,d=f.drawAllLayers,m=f.drawOnlyNodeLayer,_=f.forcedZoom,b=f.forcedPan,w=this,E=void 0===f.forcedPxRatio?this.getPixelRatio():f.forcedPxRatio,k=w.cy,L=w.data,G=L.canvasNeedsRedraw,K=w.textureOnViewport&&!c&&(w.pinching||w.hoverData.dragging||w.swipePanning||w.data.wheelZooming),le=void 0!==f.motionBlur?f.motionBlur:w.motionBlur,de=w.motionBlurPxRatio,pe=k.hasCompoundNodes(),Ie=w.hoverData.draggingEles,ze=le=le&&!c&&w.motionBlurEnabled&&!(w.hoverData.selecting||w.touchData.selecting);c||(w.prevPxRatio!==E&&(w.invalidateContainerClientCoordsCache(),w.matchCanvasSize(w.container),w.redrawHint("eles",!0),w.redrawHint("drag",!0)),w.prevPxRatio=E),!c&&w.motionBlurTimeout&&clearTimeout(w.motionBlurTimeout),le&&(null==w.mbFrames&&(w.mbFrames=0),w.mbFrames++,w.mbFrames<3&&(ze=!1),w.mbFrames>w.minMbLowQualFrames&&(w.motionBlurPxRatio=w.mbPxRBlurry)),w.clearingMotionBlur&&(w.motionBlurPxRatio=1),w.textureDrawLastFrame&&!K&&(G[w.NODE]=!0,G[w.SELECT_BOX]=!0);var Qe=k.style(),qe=k.zoom(),dt=void 0!==_?_:qe,Lt=k.pan(),kt={x:Lt.x,y:Lt.y},mt={zoom:qe,pan:{x:Lt.x,y:Lt.y}},Ft=w.prevViewport;!(void 0===Ft||mt.zoom!==Ft.zoom||mt.pan.x!==Ft.pan.x||mt.pan.y!==Ft.pan.y)&&!(Ie&&!pe)&&(w.motionBlurPxRatio=1),b&&(kt=b),dt*=E,kt.x*=E,kt.y*=E;var Ht=w.getCachedZSortedEles();function Vt(pr,tr,$r,Mi,yr){var Cr=pr.globalCompositeOperation;pr.globalCompositeOperation="destination-out",w.colorFillStyle(pr,255,255,255,w.motionBlurTransparency),pr.fillRect(tr,$r,Mi,yr),pr.globalCompositeOperation=Cr}function et(pr,tr){var $r,Mi,yr,Cr;w.clearingMotionBlur||pr!==L.bufferContexts[w.MOTIONBLUR_BUFFER_NODE]&&pr!==L.bufferContexts[w.MOTIONBLUR_BUFFER_DRAG]?($r=kt,Mi=dt,yr=w.canvasWidth,Cr=w.canvasHeight):($r={x:Lt.x*de,y:Lt.y*de},Mi=qe*de,yr=w.canvasWidth*de,Cr=w.canvasHeight*de),pr.setTransform(1,0,0,1,0,0),"motionBlur"===tr?Vt(pr,0,0,yr,Cr):!c&&(void 0===tr||tr)&&pr.clearRect(0,0,yr,Cr),d||(pr.translate($r.x,$r.y),pr.scale(Mi,Mi)),b&&pr.translate(b.x,b.y),_&&pr.scale(_,_)}if(K||(w.textureDrawLastFrame=!1),K){if(w.textureDrawLastFrame=!0,!w.textureCache){w.textureCache={},w.textureCache.bb=k.mutableElements().boundingBox(),w.textureCache.texture=w.data.bufferCanvases[w.TEXTURE_BUFFER];var Wt=w.data.bufferContexts[w.TEXTURE_BUFFER];Wt.setTransform(1,0,0,1,0,0),Wt.clearRect(0,0,w.canvasWidth*w.textureMult,w.canvasHeight*w.textureMult),w.render({forcedContext:Wt,drawOnlyNodeLayer:!0,forcedPxRatio:E*w.textureMult}),(mt=w.textureCache.viewport={zoom:k.zoom(),pan:k.pan(),width:w.canvasWidth,height:w.canvasHeight}).mpan={x:(0-mt.pan.x)/mt.zoom,y:(0-mt.pan.y)/mt.zoom}}G[w.DRAG]=!1,G[w.NODE]=!1;var gn=w.textureCache.texture;mt=w.textureCache.viewport,(Tt=L.contexts[w.NODE]).setTransform(1,0,0,1,0,0),le?Vt(Tt,0,0,mt.width,mt.height):Tt.clearRect(0,0,mt.width,mt.height);var Kt=Qe.core("outside-texture-bg-color").value,ln=Qe.core("outside-texture-bg-opacity").value;w.colorFillStyle(Tt,Kt[0],Kt[1],Kt[2],ln),Tt.fillRect(0,0,mt.width,mt.height),qe=k.zoom(),et(Tt,!1),Tt.clearRect(mt.mpan.x,mt.mpan.y,mt.width/mt.zoom/E,mt.height/mt.zoom/E),Tt.drawImage(gn,mt.mpan.x,mt.mpan.y,mt.width/mt.zoom/E,mt.height/mt.zoom/E)}else w.textureOnViewport&&!c&&(w.textureCache=null);var Sn=k.extent(),Rn=w.pinching||w.hoverData.dragging||w.swipePanning||w.data.wheelZooming||w.hoverData.draggingEles||w.cy.animated(),Jn=w.hideEdgesOnViewport&&Rn,En=[];if(En[w.NODE]=!G[w.NODE]&&le&&!w.clearedForMotionBlur[w.NODE]||w.clearingMotionBlur,En[w.NODE]&&(w.clearedForMotionBlur[w.NODE]=!0),En[w.DRAG]=!G[w.DRAG]&&le&&!w.clearedForMotionBlur[w.DRAG]||w.clearingMotionBlur,En[w.DRAG]&&(w.clearedForMotionBlur[w.DRAG]=!0),G[w.NODE]||d||m||En[w.NODE]){var Yn=le&&!En[w.NODE]&&1!==de;et(Tt=c||(Yn?w.data.bufferContexts[w.MOTIONBLUR_BUFFER_NODE]:L.contexts[w.NODE]),le&&!Yn?"motionBlur":void 0),Jn?w.drawCachedNodes(Tt,Ht.nondrag,E,Sn):w.drawLayeredElements(Tt,Ht.nondrag,E,Sn),w.debug&&w.drawDebugPoints(Tt,Ht.nondrag),!d&&!le&&(G[w.NODE]=!1)}if(!m&&(G[w.DRAG]||d||En[w.DRAG])&&(Yn=le&&!En[w.DRAG]&&1!==de,et(Tt=c||(Yn?w.data.bufferContexts[w.MOTIONBLUR_BUFFER_DRAG]:L.contexts[w.DRAG]),le&&!Yn?"motionBlur":void 0),Jn?w.drawCachedNodes(Tt,Ht.drag,E,Sn):w.drawCachedElements(Tt,Ht.drag,E,Sn),w.debug&&w.drawDebugPoints(Tt,Ht.drag),!d&&!le&&(G[w.DRAG]=!1)),w.showFps||!m&&G[w.SELECT_BOX]&&!d){var Tt;if(et(Tt=c||L.contexts[w.SELECT_BOX]),1==w.selection[4]&&(w.hoverData.selecting||w.touchData.selecting)){qe=w.cy.zoom();var Ci=Qe.core("selection-box-border-width").value/qe;Tt.lineWidth=Ci,Tt.fillStyle="rgba("+Qe.core("selection-box-color").value[0]+","+Qe.core("selection-box-color").value[1]+","+Qe.core("selection-box-color").value[2]+","+Qe.core("selection-box-opacity").value+")",Tt.fillRect(w.selection[0],w.selection[1],w.selection[2]-w.selection[0],w.selection[3]-w.selection[1]),Ci>0&&(Tt.strokeStyle="rgba("+Qe.core("selection-box-border-color").value[0]+","+Qe.core("selection-box-border-color").value[1]+","+Qe.core("selection-box-border-color").value[2]+","+Qe.core("selection-box-opacity").value+")",Tt.strokeRect(w.selection[0],w.selection[1],w.selection[2]-w.selection[0],w.selection[3]-w.selection[1]))}if(L.bgActivePosistion&&!w.hoverData.selecting){qe=w.cy.zoom();var pi=L.bgActivePosistion;Tt.fillStyle="rgba("+Qe.core("active-bg-color").value[0]+","+Qe.core("active-bg-color").value[1]+","+Qe.core("active-bg-color").value[2]+","+Qe.core("active-bg-opacity").value+")",Tt.beginPath(),Tt.arc(pi.x,pi.y,Qe.core("active-bg-size").pfValue/qe,0,2*Math.PI),Tt.fill()}var hi=w.lastRedrawTime;if(w.showFps&&hi){hi=Math.round(hi);var Mn=Math.round(1e3/hi);Tt.setTransform(1,0,0,1,0,0),Tt.fillStyle="rgba(255, 0, 0, 0.75)",Tt.strokeStyle="rgba(255, 0, 0, 0.75)",Tt.lineWidth=1,Tt.fillText("1 frame = "+hi+" ms = "+Mn+" fps",0,20),Tt.strokeRect(0,30,250,20),Tt.fillRect(0,30,250*Math.min(Mn/60,1),20)}d||(G[w.SELECT_BOX]=!1)}if(le&&1!==de){var ir=L.contexts[w.DRAG],Nr=w.data.bufferCanvases[w.MOTIONBLUR_BUFFER_DRAG],Yr=function(tr,$r,Mi){tr.setTransform(1,0,0,1,0,0),Mi||!ze?tr.clearRect(0,0,w.canvasWidth,w.canvasHeight):Vt(tr,0,0,w.canvasWidth,w.canvasHeight),tr.drawImage($r,0,0,w.canvasWidth*de,w.canvasHeight*de,0,0,w.canvasWidth,w.canvasHeight)};(G[w.NODE]||En[w.NODE])&&(Yr(L.contexts[w.NODE],w.data.bufferCanvases[w.MOTIONBLUR_BUFFER_NODE],En[w.NODE]),G[w.NODE]=!1),(G[w.DRAG]||En[w.DRAG])&&(Yr(ir,Nr,En[w.DRAG]),G[w.DRAG]=!1)}w.prevViewport=mt,w.clearingMotionBlur&&(w.clearingMotionBlur=!1,w.motionBlurCleared=!0,w.motionBlur=!0),le&&(w.motionBlurTimeout=setTimeout(function(){w.motionBlurTimeout=null,w.clearedForMotionBlur[w.NODE]=!1,w.clearedForMotionBlur[w.DRAG]=!1,w.motionBlur=!1,w.clearingMotionBlur=!K,w.mbFrames=0,G[w.NODE]=!0,G[w.DRAG]=!0,w.redraw()},100)),c||k.emit("render")}},me={drawPolygonPath:function(f,c,d,m,_,b){var w=m/2,E=_/2;f.beginPath&&f.beginPath(),f.moveTo(c+w*b[0],d+E*b[1]);for(var k=1;k<b.length/2;k++)f.lineTo(c+w*b[2*k],d+E*b[2*k+1]);f.closePath()},drawRoundPolygonPath:function(f,c,d,m,_,b){var w=m/2,E=_/2,k=Rr(m,_);f.beginPath&&f.beginPath();for(var L=0;L<b.length/4;L++){var K,G;G=0===L?b.length-2:4*L-2,K=4*L+2;var le=c+w*b[4*L],de=d+E*b[4*L+1],Ie=k/Math.tan(Math.acos(-b[G]*b[K]-b[G+1]*b[K+1])/2),Ne=le-Ie*b[G],ze=de-Ie*b[G+1],Qe=le+Ie*b[K],qe=de+Ie*b[K+1];0===L?f.moveTo(Ne,ze):f.lineTo(Ne,ze),f.arcTo(le,de,Qe,qe,k)}f.closePath()},drawRoundRectanglePath:function(f,c,d,m,_){var b=m/2,w=_/2,E=gf(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,d-w),f.arcTo(c+b,d-w,c+b,d,E),f.arcTo(c+b,d+w,c,d+w,E),f.arcTo(c-b,d+w,c-b,d,E),f.arcTo(c-b,d-w,c,d-w,E),f.lineTo(c,d-w),f.closePath()},drawBottomRoundRectanglePath:function(f,c,d,m,_){var b=m/2,w=_/2,E=gf(m,_);f.beginPath&&f.beginPath(),f.moveTo(c,d-w),f.lineTo(c+b,d-w),f.lineTo(c+b,d),f.arcTo(c+b,d+w,c,d+w,E),f.arcTo(c-b,d+w,c-b,d,E),f.lineTo(c-b,d-w),f.lineTo(c,d-w),f.closePath()},drawCutRectanglePath:function(f,c,d,m,_){var b=m/2,w=_/2;f.beginPath&&f.beginPath(),f.moveTo(c-b+8,d-w),f.lineTo(c+b-8,d-w),f.lineTo(c+b,d-w+8),f.lineTo(c+b,d+w-8),f.lineTo(c+b-8,d+w),f.lineTo(c-b+8,d+w),f.lineTo(c-b,d+w-8),f.lineTo(c-b,d-w+8),f.closePath()},drawBarrelPath:function(f,c,d,m,_){var b=m/2,w=_/2,E=c-b,k=c+b,L=d-w,G=d+w,K=qr(m,_),le=K.widthOffset,de=K.heightOffset,pe=K.ctrlPtOffsetPct*le;f.beginPath&&f.beginPath(),f.moveTo(E,L+de),f.lineTo(E,G-de),f.quadraticCurveTo(E+pe,G,E+le,G),f.lineTo(k-le,G),f.quadraticCurveTo(k-pe,G,k,G-de),f.lineTo(k,L+de),f.quadraticCurveTo(k-pe,L,k-le,L),f.lineTo(E+le,L),f.quadraticCurveTo(E+pe,L,E,L+de),f.closePath()}},Le=Math.sin(0),ke=Math.cos(0),Fe={},nt={},tt=Math.PI/40,Ke=0*Math.PI;Ke<2*Math.PI;Ke+=tt)Fe[Ke]=Math.sin(Ke),nt[Ke]=Math.cos(Ke);me.drawEllipsePath=function(f,c,d,m,_){if(f.beginPath&&f.beginPath(),f.ellipse)f.ellipse(c,d,m/2,_/2,0,0,2*Math.PI);else for(var b,w,E=m/2,k=_/2,L=0*Math.PI;L<2*Math.PI;L+=tt)b=c-E*Fe[L]*Le+E*nt[L]*ke,w=d+k*nt[L]*Le+k*Fe[L]*ke,0===L?f.moveTo(b,w):f.lineTo(b,w);f.closePath()};var pt={};function Xt(f){var c=f.indexOf(",");return f.substr(c+1)}function Bt(f,c,d){var m=function(){return c.toDataURL(d,f.quality)};switch(f.output){case"blob-promise":return new na(function(_,b){try{c.toBlob(function(w){null!=w?_(w):b(new Error("`canvas.toBlob()` sent a null value in its callback"))},d,f.quality)}catch(w){b(w)}});case"blob":return function vt(f,c){for(var d=atob(f),m=new ArrayBuffer(d.length),_=new Uint8Array(m),b=0;b<d.length;b++)_[b]=d.charCodeAt(b);return new Blob([m],{type:c})}(Xt(m()),d);case"base64":return Xt(m());default:return m()}}pt.createBuffer=function(f,c){var d=document.createElement("canvas");return d.width=f,d.height=c,[d,d.getContext("2d")]},pt.bufferCanvasImage=function(f){var c=this.cy,m=c.mutableElements().boundingBox(),_=this.findContainerClientCoords(),b=f.full?Math.ceil(m.w):_[2],w=f.full?Math.ceil(m.h):_[3],E=Ut(f.maxWidth)||Ut(f.maxHeight),k=this.getPixelRatio(),L=1;if(void 0!==f.scale)b*=f.scale,w*=f.scale,L=f.scale;else if(E){var G=1/0,K=1/0;Ut(f.maxWidth)&&(G=L*f.maxWidth/b),Ut(f.maxHeight)&&(K=L*f.maxHeight/w),b*=L=Math.min(G,K),w*=L}E||(b*=k,w*=k,L*=k);var le=document.createElement("canvas");le.width=b,le.height=w,le.style.width=b+"px",le.style.height=w+"px";var de=le.getContext("2d");if(b>0&&w>0){de.clearRect(0,0,b,w),de.globalCompositeOperation="source-over";var pe=this.getCachedZSortedEles();if(f.full)de.translate(-m.x1*L,-m.y1*L),de.scale(L,L),this.drawElements(de,pe),de.scale(1/L,1/L),de.translate(m.x1*L,m.y1*L);else{var Ie=c.pan(),Ne={x:Ie.x*L,y:Ie.y*L};L*=c.zoom(),de.translate(Ne.x,Ne.y),de.scale(L,L),this.drawElements(de,pe),de.scale(1/L,1/L),de.translate(-Ne.x,-Ne.y)}f.bg&&(de.globalCompositeOperation="destination-over",de.fillStyle=f.bg,de.rect(0,0,b,w),de.fill())}return le},pt.png=function(f){return Bt(f,this.bufferCanvasImage(f),"image/png")},pt.jpg=function(f){return Bt(f,this.bufferCanvasImage(f),"image/jpeg")};var sn=hn,en=hn.prototype;function hn(f){var c=this;c.data={canvases:new Array(en.CANVAS_LAYERS),contexts:new Array(en.CANVAS_LAYERS),canvasNeedsRedraw:new Array(en.CANVAS_LAYERS),bufferCanvases:new Array(en.BUFFER_COUNT),bufferContexts:new Array(en.CANVAS_LAYERS)};var d="-webkit-tap-highlight-color",m="rgba(0,0,0,0)";c.data.canvasContainer=document.createElement("div");var _=c.data.canvasContainer.style;c.data.canvasContainer.style[d]=m,_.position="relative",_.zIndex="0",_.overflow="hidden";var b=f.cy.container();b.appendChild(c.data.canvasContainer),b.style[d]=m;var w={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Ue&&Ue.userAgent.match(/msie|trident|edge/i)&&(w["-ms-touch-action"]="none",w["touch-action"]="none");for(var E=0;E<en.CANVAS_LAYERS;E++){var k=c.data.canvases[E]=document.createElement("canvas");c.data.contexts[E]=k.getContext("2d"),Object.keys(w).forEach(function(hi){k.style[hi]=w[hi]}),k.style.position="absolute",k.setAttribute("data-id","layer"+E),k.style.zIndex=String(en.CANVAS_LAYERS-E),c.data.canvasContainer.appendChild(k),c.data.canvasNeedsRedraw[E]=!1}for(c.data.topCanvas=c.data.canvases[0],c.data.canvases[en.NODE].setAttribute("data-id","layer"+en.NODE+"-node"),c.data.canvases[en.SELECT_BOX].setAttribute("data-id","layer"+en.SELECT_BOX+"-selectbox"),c.data.canvases[en.DRAG].setAttribute("data-id","layer"+en.DRAG+"-drag"),E=0;E<en.BUFFER_COUNT;E++)c.data.bufferCanvases[E]=document.createElement("canvas"),c.data.bufferContexts[E]=c.data.bufferCanvases[E].getContext("2d"),c.data.bufferCanvases[E].style.position="absolute",c.data.bufferCanvases[E].setAttribute("data-id","buffer"+E),c.data.bufferCanvases[E].style.zIndex=String(-E-1),c.data.bufferCanvases[E].style.visibility="hidden";c.pathsEnabled=!0;var L=Sc(),K=function(Mn){return{x:-Mn.w/2,y:-Mn.h/2}},Lt=function(Mn){return Mn.boundingBox(),Mn[0]._private.bodyBounds},kt=function(Mn){return Mn.boundingBox(),Mn[0]._private.labelBounds.main||L},mt=function(Mn){return Mn.boundingBox(),Mn[0]._private.labelBounds.source||L},Ft=function(Mn){return Mn.boundingBox(),Mn[0]._private.labelBounds.target||L},bt=function(Mn,ri){return ri},Vt=function(Mn,ri,xi){var ji=Mn?Mn+"-":"";return{x:ri.x+xi.pstyle(ji+"text-margin-x").pfValue,y:ri.y+xi.pstyle(ji+"text-margin-y").pfValue}},et=function(Mn,ri,xi){var ji=Mn[0]._private.rscratch;return{x:ji[ri],y:ji[xi]}},Jn=c.data.eleTxrCache=new _p(c,{getKey:function(Mn){return Mn[0]._private.nodeKey},doesEleInvalidateKey:function(Mn){var ri=Mn[0]._private;return!(ri.oldBackgroundTimestamp===ri.backgroundTimestamp)},drawElement:function(Mn,ri,xi,ji,ir){return c.drawElement(Mn,ri,xi,!1,!1,ir)},getBoundingBox:Lt,getRotationPoint:function(Mn){return function(Mn){return{x:(Mn.x1+Mn.x2)/2,y:(Mn.y1+Mn.y2)/2}}(Lt(Mn))},getRotationOffset:function(Mn){return K(Lt(Mn))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),En=c.data.lblTxrCache=new _p(c,{getKey:function(Mn){return Mn[0]._private.labelStyleKey},drawElement:function(Mn,ri,xi,ji,ir){return c.drawElementText(Mn,ri,xi,ji,"main",ir)},getBoundingBox:kt,getRotationPoint:function(Mn){return Vt("",et(Mn,"labelX","labelY"),Mn)},getRotationOffset:function(Mn){var ri=kt(Mn),xi=K(kt(Mn));if(Mn.isNode()){switch(Mn.pstyle("text-halign").value){case"left":xi.x=-ri.w;break;case"right":xi.x=0}switch(Mn.pstyle("text-valign").value){case"top":xi.y=-ri.h;break;case"bottom":xi.y=0}}return xi},isVisible:bt}),Yn=c.data.slbTxrCache=new _p(c,{getKey:function(Mn){return Mn[0]._private.sourceLabelStyleKey},drawElement:function(Mn,ri,xi,ji,ir){return c.drawElementText(Mn,ri,xi,ji,"source",ir)},getBoundingBox:mt,getRotationPoint:function(Mn){return Vt("source",et(Mn,"sourceLabelX","sourceLabelY"),Mn)},getRotationOffset:function(Mn){return K(mt(Mn))},isVisible:bt}),li=c.data.tlbTxrCache=new _p(c,{getKey:function(Mn){return Mn[0]._private.targetLabelStyleKey},drawElement:function(Mn,ri,xi,ji,ir){return c.drawElementText(Mn,ri,xi,ji,"target",ir)},getBoundingBox:Ft,getRotationPoint:function(Mn){return Vt("target",et(Mn,"targetLabelX","targetLabelY"),Mn)},getRotationOffset:function(Mn){return K(Ft(Mn))},isVisible:bt}),Ci=c.data.lyrTxrCache=new da(c);c.onUpdateEleCalcs(function(Mn,ri){Jn.invalidateElements(ri),En.invalidateElements(ri),Yn.invalidateElements(ri),li.invalidateElements(ri),Ci.invalidateElements(ri);for(var xi=0;xi<ri.length;xi++){var ji=ri[xi]._private;ji.oldBackgroundTimestamp=ji.backgroundTimestamp}});var pi=function(Mn){for(var ri=0;ri<Mn.length;ri++)Ci.enqueueElementRefinement(Mn[ri].ele)};Jn.onDequeue(pi),En.onDequeue(pi),Yn.onDequeue(pi),li.onDequeue(pi)}en.CANVAS_LAYERS=3,en.SELECT_BOX=0,en.DRAG=1,en.NODE=2,en.BUFFER_COUNT=3,en.TEXTURE_BUFFER=0,en.MOTIONBLUR_BUFFER_NODE=1,en.MOTIONBLUR_BUFFER_DRAG=2,en.redrawHint=function(f,c){var d=this;switch(f){case"eles":d.data.canvasNeedsRedraw[en.NODE]=c;break;case"drag":d.data.canvasNeedsRedraw[en.DRAG]=c;break;case"select":d.data.canvasNeedsRedraw[en.SELECT_BOX]=c}};var On=typeof Path2D<"u";en.path2dEnabled=function(f){if(void 0===f)return this.pathsEnabled;this.pathsEnabled=!!f},en.usePaths=function(){return On&&this.pathsEnabled},en.setImgSmoothing=function(f,c){null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled=c:(f.webkitImageSmoothingEnabled=c,f.mozImageSmoothingEnabled=c,f.msImageSmoothingEnabled=c)},en.getImgSmoothing=function(f){return null!=f.imageSmoothingEnabled?f.imageSmoothingEnabled:f.webkitImageSmoothingEnabled||f.mozImageSmoothingEnabled||f.msImageSmoothingEnabled},en.makeOffscreenCanvas=function(f,c){var d;return"undefined"!==(typeof OffscreenCanvas>"u"?"undefined":se(OffscreenCanvas))?d=new OffscreenCanvas(f,c):((d=document.createElement("canvas")).width=f,d.height=c),d},[Nv,Jd,g,A,T,N,ee,me,pt,{nodeShapeImpl:function(f,c,d,m,_,b,w){switch(f){case"ellipse":return this.drawEllipsePath(c,d,m,_,b);case"polygon":return this.drawPolygonPath(c,d,m,_,b,w);case"round-polygon":return this.drawRoundPolygonPath(c,d,m,_,b,w);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(c,d,m,_,b);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(c,d,m,_,b);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(c,d,m,_,b);case"barrel":return this.drawBarrelPath(c,d,m,_,b)}}}].forEach(function(f){er(en,f)});var ui=[{type:"layout",extensions:em},{type:"renderer",extensions:[{name:"null",impl:Kd},{name:"base",impl:tm},{name:"canvas",impl:sn}]}],jt={},qt={};function Wn(f,c,d){var m=d,_=function(Ft){he("Can not register `"+c+"` for `"+f+"` since `"+Ft+"` already exists in the prototype and can not be overridden")};if("core"===f){if(fc.prototype[c])return _(c);fc.prototype[c]=d}else if("collection"===f){if(oa.prototype[c])return _(c);oa.prototype[c]=d}else if("layout"===f){for(var b=function(Ft){this.options=Ft,d.call(this,Ft),Ct(this._private)||(this._private={}),this._private.cy=Ft.cy,this._private.listeners=[],this.createEmitter()},w=b.prototype=Object.create(d.prototype),E=[],k=0;k<E.length;k++){var L=E[k];w[L]=w[L]||function(){return this}}w.start&&!w.run?w.run=function(){return this.start(),this}:!w.start&&w.run&&(w.start=function(){return this.run(),this});var G=d.prototype.stop;w.stop=function(){var mt=this.options;if(mt&&mt.animate){var Ft=this.animations;if(Ft)for(var bt=0;bt<Ft.length;bt++)Ft[bt].stop()}return G?G.call(this):this.emit("layoutstop"),this},w.destroy||(w.destroy=function(){return this}),w.cy=function(){return this._private.cy};var K=function(Ft){return Ft._private.cy},le={addEventFields:function(Ft,bt){bt.layout=Ft,bt.cy=K(Ft),bt.target=Ft},bubble:function(){return!0},parent:function(Ft){return K(Ft)}};er(w,{createEmitter:function(){return this._private.emitter=new gu(le,this),this},emitter:function(){return this._private.emitter},on:function(Ft,bt){return this.emitter().on(Ft,bt),this},one:function(Ft,bt){return this.emitter().one(Ft,bt),this},once:function(Ft,bt){return this.emitter().one(Ft,bt),this},removeListener:function(Ft,bt){return this.emitter().removeListener(Ft,bt),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(Ft,bt){return this.emitter().emit(Ft,bt),this}}),vs.eventAliasesOn(w),m=b}else if("renderer"===f&&"null"!==c&&"base"!==c){var de=ei("renderer","base"),pe=de.prototype,Ie=d,Ne=d.prototype,ze=function(){de.apply(this,arguments),Ie.apply(this,arguments)},Qe=ze.prototype;for(var qe in pe){var dt=pe[qe];if(null!=Ne[qe])return _(qe);Qe[qe]=dt}for(var kt in Ne)Qe[kt]=Ne[kt];pe.clientFunctions.forEach(function(mt){Qe[mt]=Qe[mt]||function(){it("Renderer does not implement `renderer."+mt+"()` on its prototype")}}),m=ze}else if("__proto__"===f||"constructor"===f||"prototype"===f)return it(f+" is an illegal type to be registered, possibly lead to prototype pollutions");return lc({map:jt,keys:[f,c],value:m})}function ei(f,c){return Ah({map:jt,keys:[f,c]})}function Ii(f,c,d,m,_){return lc({map:qt,keys:[f,c,d,m],value:_})}function _i(f,c,d,m){return Ah({map:qt,keys:[f,c,d,m]})}var fi=function(){return 2===arguments.length?ei.apply(null,arguments):3===arguments.length?Wn.apply(null,arguments):4===arguments.length?_i.apply(null,arguments):5===arguments.length?Ii.apply(null,arguments):void it("Invalid extension access syntax")};fc.prototype.extension=fi,ui.forEach(function(f){f.extensions.forEach(function(c){Wn(f.type,c.name,c.impl)})});var nr=function f(){if(!(this instanceof f))return new f;this.length=0},zi=nr.prototype;zi.instanceString=function(){return"stylesheet"},zi.selector=function(f){return this[this.length++]={selector:f,properties:[]},this},zi.css=function(f,c){var d=this.length-1;if(He(f))this[d].properties.push({name:f,value:c});else if(Ct(f))for(var m=f,_=Object.keys(m),b=0;b<_.length;b++){var w=_[b],E=m[w];if(null!=E){var k=tc.properties[w]||tc.properties[un(w)];null!=k&&this[d].properties.push({name:k.name,value:E})}}return this},zi.style=zi.css,zi.generateStyle=function(f){var c=new tc(f);return this.appendToStyle(c)},zi.appendToStyle=function(f){for(var c=0;c<this.length;c++){var d=this[c],_=d.properties;f.selector(d.selector);for(var b=0;b<_.length;b++){var w=_[b];f.css(w.name,w.value)}}return f};var Hn=function(c){return void 0===c&&(c={}),Ct(c)?new fc(c):He(c)?fi.apply(fi,arguments):void 0};Hn.use=function(f){var c=Array.prototype.slice.call(arguments,1);return c.unshift(Hn),f.apply(null,c),this},Hn.warnings=function(f){return Ye(f)},Hn.version="3.22.1",Hn.stylesheet=Hn.Stylesheet=nr,Be.exports=Hn},9069:Be=>{"use strict";var Y,be="object"==typeof Reflect?Reflect:null,V=be&&"function"==typeof be.apply?be.apply:function(z,$,ne){return Function.prototype.apply.call(z,$,ne)};Y=be&&"function"==typeof be.ownKeys?be.ownKeys:Object.getOwnPropertySymbols?function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:function(z){return Object.getOwnPropertyNames(z)};var H=Number.isNaN||function(z){return z!=z};function B(){B.init.call(this)}Be.exports=B,Be.exports.once=function xe(ue,z){return new Promise(function($,ne){function ge(Re){ue.removeListener(z,Ue),ne(Re)}function Ue(){"function"==typeof ue.removeListener&&ue.removeListener("error",ge),$([].slice.call(arguments))}re(ue,z,Ue,{once:!0}),"error"!==z&&function Oe(ue,z,$){"function"==typeof ue.on&&re(ue,"error",z,$)}(ue,ge,{once:!0})})},B.EventEmitter=B,B.prototype._events=void 0,B.prototype._eventsCount=0,B.prototype._maxListeners=void 0;var W=10;function P(ue){if("function"!=typeof ue)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ue)}function O(ue){return void 0===ue._maxListeners?B.defaultMaxListeners:ue._maxListeners}function q(ue,z,$,ne){var ge,Ue,Re;if(P($),void 0===(Ue=ue._events)?(Ue=ue._events=Object.create(null),ue._eventsCount=0):(void 0!==Ue.newListener&&(ue.emit("newListener",z,$.listener?$.listener:$),Ue=ue._events),Re=Ue[z]),void 0===Re)Re=Ue[z]=$,++ue._eventsCount;else if("function"==typeof Re?Re=Ue[z]=ne?[$,Re]:[Re,$]:ne?Re.unshift($):Re.push($),(ge=O(ue))>0&&Re.length>ge&&!Re.warned){Re.warned=!0;var rt=new Error("Possible EventEmitter memory leak detected. "+Re.length+" "+String(z)+" listeners added. Use emitter.setMaxListeners() to increase limit");rt.name="MaxListenersExceededWarning",rt.emitter=ue,rt.type=z,rt.count=Re.length,function D(ue){console&&console.warn&&console.warn(ue)}(rt)}return ue}function te(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function J(ue,z,$){var ne={fired:!1,wrapFn:void 0,target:ue,type:z,listener:$},ge=te.bind(ne);return ge.listener=$,ne.wrapFn=ge,ge}function oe(ue,z,$){var ne=ue._events;if(void 0===ne)return[];var ge=ne[z];return void 0===ge?[]:"function"==typeof ge?$?[ge.listener||ge]:[ge]:$?function ae(ue){for(var z=new Array(ue.length),$=0;$<z.length;++$)z[$]=ue[$].listener||ue[$];return z}(ge):Q(ge,ge.length)}function se(ue){var z=this._events;if(void 0!==z){var $=z[ue];if("function"==typeof $)return 1;if(void 0!==$)return $.length}return 0}function Q(ue,z){for(var $=new Array(z),ne=0;ne<z;++ne)$[ne]=ue[ne];return $}function re(ue,z,$,ne){if("function"==typeof ue.on)ne.once?ue.once(z,$):ue.on(z,$);else{if("function"!=typeof ue.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ue);ue.addEventListener(z,function ge(Ue){ne.once&&ue.removeEventListener(z,ge),$(Ue)})}}Object.defineProperty(B,"defaultMaxListeners",{enumerable:!0,get:function(){return W},set:function(ue){if("number"!=typeof ue||ue<0||H(ue))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ue+".");W=ue}}),B.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},B.prototype.setMaxListeners=function(z){if("number"!=typeof z||z<0||H(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this},B.prototype.getMaxListeners=function(){return O(this)},B.prototype.emit=function(z){for(var $=[],ne=1;ne<arguments.length;ne++)$.push(arguments[ne]);var ge="error"===z,Ue=this._events;if(void 0!==Ue)ge=ge&&void 0===Ue.error;else if(!ge)return!1;if(ge){var Re;if($.length>0&&(Re=$[0]),Re instanceof Error)throw Re;var rt=new Error("Unhandled error."+(Re?" ("+Re.message+")":""));throw rt.context=Re,rt}var Pe=Ue[z];if(void 0===Pe)return!1;if("function"==typeof Pe)V(Pe,this,$);else{var at=Pe.length,xt=Q(Pe,at);for(ne=0;ne<at;++ne)V(xt[ne],this,$)}return!0},B.prototype.on=B.prototype.addListener=function(z,$){return q(this,z,$,!1)},B.prototype.prependListener=function(z,$){return q(this,z,$,!0)},B.prototype.once=function(z,$){return P($),this.on(z,J(this,z,$)),this},B.prototype.prependOnceListener=function(z,$){return P($),this.prependListener(z,J(this,z,$)),this},B.prototype.off=B.prototype.removeListener=function(z,$){var ne,ge,Ue,Re,rt;if(P($),void 0===(ge=this._events))return this;if(void 0===(ne=ge[z]))return this;if(ne===$||ne.listener===$)0==--this._eventsCount?this._events=Object.create(null):(delete ge[z],ge.removeListener&&this.emit("removeListener",z,ne.listener||$));else if("function"!=typeof ne){for(Ue=-1,Re=ne.length-1;Re>=0;Re--)if(ne[Re]===$||ne[Re].listener===$){rt=ne[Re].listener,Ue=Re;break}if(Ue<0)return this;0===Ue?ne.shift():function U(ue,z){for(;z+1<ue.length;z++)ue[z]=ue[z+1];ue.pop()}(ne,Ue),1===ne.length&&(ge[z]=ne[0]),void 0!==ge.removeListener&&this.emit("removeListener",z,rt||$)}return this},B.prototype.removeAllListeners=function(z){var $,ne,ge;if(void 0===(ne=this._events))return this;if(void 0===ne.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ne[z]&&(0==--this._eventsCount?this._events=Object.create(null):delete ne[z]),this;if(0===arguments.length){var Re,Ue=Object.keys(ne);for(ge=0;ge<Ue.length;++ge)"removeListener"!==(Re=Ue[ge])&&this.removeAllListeners(Re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof($=ne[z]))this.removeListener(z,$);else if(void 0!==$)for(ge=$.length-1;ge>=0;ge--)this.removeListener(z,$[ge]);return this},B.prototype.listeners=function(z){return oe(this,z,!0)},B.prototype.rawListeners=function(z){return oe(this,z,!1)},B.listenerCount=function(ue,z){return"function"==typeof ue.listenerCount?ue.listenerCount(z):se.call(ue,z)},B.prototype.listenerCount=se,B.prototype.eventNames=function(){return this._eventsCount>0?Y(this._events):[]}},2698:Be=>{Be.exports={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}},4570:(Be,be)=>{be.assignLayoutChanges=function(V,Y,D){const{nodeXAttribute:H,nodeYAttribute:B}=D;V.updateEachNodeAttributes((W,P)=>{const O=Y[W];return!O||O.fixed||(P[H]=O.x,P[B]=O.y),P},{attributes:["x","y"]})},be.collectLayoutChanges=function(V){const Y={};for(const D in V){const H=V[D];Y[D]={x:H.x,y:H.y}}return Y}},8031:(Be,be,V)=>{const{createNodeValueGetter:Y,createEdgeValueGetter:D}=V(2954);Be.exports=function(B,W,P){const{nodeXAttribute:O,nodeYAttribute:q}=P,{attraction:te,repulsion:J,gravity:oe,inertia:se,maxMove:Q}=P.settings;let{shouldSkipNode:U,shouldSkipEdge:ae,isNodeFixed:xe}=P;xe=Y(xe),U=Y(U,!1),ae=D(ae,!1);const Oe=B.filterNodes((z,$)=>!U.fromEntry(z,$)),re=Oe.length;for(let z=0;z<re;z++){const $=Oe[z],ne=B.getNodeAttributes($),ge=W[$];W[$]=ge?{dx:ge.dx*se,dy:ge.dy*se,x:ne[O]||0,y:ne[q]||0}:{dx:0,dy:0,x:ne[O]||0,y:ne[q]||0}}if(J)for(let z=0;z<re;z++){const ne=W[Oe[z]];for(let ge=z+1;ge<re;ge++){const Re=W[Oe[ge]],rt=Re.x-ne.x,Pe=Re.y-ne.y,at=Math.sqrt(rt*rt+Pe*Pe)||1,xt=J/at*rt,He=J/at*Pe;ne.dx-=xt,ne.dy-=He,Re.dx+=xt,Re.dy+=He}}if(te&&B.forEachEdge((z,$,ne,ge,Ue,Re,rt)=>{if(ne===ge||U.fromEntry(ne,Ue)||U.fromEntry(ge,Re)||ae.fromEntry(z,$,ne,ge,Ue,Re,rt))return;const Pe=W[ne],at=W[ge],xt=at.x-Pe.x,He=at.y-Pe.y,ft=Math.sqrt(xt*xt+He*He)||1,gt=te*ft*xt,Ct=te*ft*He;Pe.dx+=gt,Pe.dy+=Ct,at.dx-=gt,at.dy-=Ct}),oe)for(let z=0;z<re;z++){const $=Oe[z],ne=W[$],{x:ge,y:Ue}=ne,Re=Math.sqrt(ge*ge+Ue*Ue)||1;W[$].dx-=ge*oe*Re,W[$].dy-=Ue*oe*Re}for(let z=0;z<re;z++){const $=Oe[z],ne=W[$],ge=Math.sqrt(ne.dx*ne.dx+ne.dy*ne.dy);ge>Q&&(ne.dx*=Q/ge,ne.dy*=Q/ge),xe.fromGraph(B,$)?ne.fixed=!0:(ne.x+=ne.dx,ne.y+=ne.dy,ne.fixed=!1)}return{converged:!1}}},3424:(Be,be,V)=>{const Y=V(6714),D=V(8487),H=V(8031),B=V(4570),W=V(2698);function P(O,q){if(!Y(O))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");q=D(q,W),this.callbacks={},q.onConverged&&(this.callbacks.onConverged=q.onConverged),this.graph=O,this.params=q,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}P.prototype.isRunning=function(){return this.running},P.prototype.runFrame=function(){let{converged:O}=H(this.graph,this.nodeStates,this.params);B.assignLayoutChanges(this.graph,this.nodeStates,this.params),O=!1,O?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},P.prototype.stop=function(){return this.running=!1,null!==this.frameID&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},P.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},P.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},Be.exports=P},8487:Be=>{function be(Y){return!Y||"object"!=typeof Y||"function"==typeof Y||Array.isArray(Y)||Y instanceof Set||Y instanceof Map||Y instanceof RegExp||Y instanceof Date}Be.exports=function V(Y,D){Y=Y||{};var H={};for(var B in D){var W=Y[B],P=D[B];H[B]=be(P)?void 0===W?P:W:V(W,P)}return H}},2954:(Be,be)=>{function V(H){return"number"!=typeof H||isNaN(H)?1:H}function D(H,B){var W={},P=function(te){return typeof te>"u"?B:te};"function"==typeof B&&(P=B);var O=function(te){return P(te[H])},q=function(){return P(void 0)};return"string"==typeof H?(W.fromAttributes=O,W.fromGraph=function(te,J){return O(te.getEdgeAttributes(J))},W.fromEntry=function(te,J){return O(J)},W.fromPartialEntry=W.fromEntry,W.fromMinimalEntry=W.fromEntry):"function"==typeof H?(W.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},W.fromGraph=function(te,J){var oe=te.extremities(J);return P(H(J,te.getEdgeAttributes(J),oe[0],oe[1],te.getNodeAttributes(oe[0]),te.getNodeAttributes(oe[1]),te.isUndirected(J)))},W.fromEntry=function(te,J,oe,se,Q,U,ae){return P(H(te,J,oe,se,Q,U,ae))},W.fromPartialEntry=function(te,J,oe,se){return P(H(te,J,oe,se))},W.fromMinimalEntry=function(te,J){return P(H(te,J))}):(W.fromAttributes=q,W.fromGraph=q,W.fromEntry=q,W.fromMinimalEntry=q),W}be.createNodeValueGetter=function Y(H,B){var W={},P=function(te){return typeof te>"u"?B:te};"function"==typeof B&&(P=B);var O=function(te){return P(te[H])},q=function(){return P(void 0)};return"string"==typeof H?(W.fromAttributes=O,W.fromGraph=function(te,J){return O(te.getNodeAttributes(J))},W.fromEntry=function(te,J){return O(J)}):"function"==typeof H?(W.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},W.fromGraph=function(te,J){return P(H(J,te.getNodeAttributes(J)))},W.fromEntry=function(te,J){return P(H(te,J))}):(W.fromAttributes=q,W.fromGraph=q,W.fromEntry=q),W},be.createEdgeValueGetter=D,be.createEdgeWeightGetter=function(H){return D(H,V)}},6714:Be=>{Be.exports=function(V){return null!==V&&"object"==typeof V&&"function"==typeof V.addUndirectedEdgeWithKey&&"function"==typeof V.dropNode&&"boolean"==typeof V.multi}},5595:function(Be){Be.exports=function(){"use strict";function be(Ge){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(it){return typeof it}:function(it){return it&&"function"==typeof Symbol&&it.constructor===Symbol&&it!==Symbol.prototype?"symbol":typeof it})(Ge)}function V(Ge,it){Ge.prototype=Object.create(it.prototype),Ge.prototype.constructor=Ge,D(Ge,it)}function Y(Ge){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(it){return it.__proto__||Object.getPrototypeOf(it)})(Ge)}function D(Ge,it){return(D=Object.setPrototypeOf||function(Ye,he){return Ye.__proto__=he,Ye})(Ge,it)}function H(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B(Ge,it,Ye){return(B=H()?Reflect.construct:function(he,Se,$e){var _t=[null];_t.push.apply(_t,Se);var zt=new(Function.bind.apply(he,_t));return $e&&D(zt,$e.prototype),zt}).apply(null,arguments)}function W(Ge){var it="function"==typeof Map?new Map:void 0;return W=function(Ye){if(null===Ye||-1===Function.toString.call(Ye).indexOf("[native code]"))return Ye;if("function"!=typeof Ye)throw new TypeError("Super expression must either be null or a function");if(void 0!==it){if(it.has(Ye))return it.get(Ye);it.set(Ye,Se)}function Se(){return B(Ye,arguments,Y(this).constructor)}return Se.prototype=Object.create(Ye.prototype,{constructor:{value:Se,enumerable:!1,writable:!0,configurable:!0}}),D(Se,Ye)},W(Ge)}function P(Ge){if(void 0===Ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ge}var O=function(){for(var Ge=arguments[0],it=1,Ye=arguments.length;it<Ye;it++)if(arguments[it])for(var he in arguments[it])Ge[he]=arguments[it][he];return Ge};function q(Ge,it,Ye,he){var Se=Ge._nodes.get(it),$e=null;return Se?$e="mixed"===he?Se.out&&Se.out[Ye]||Se.undirected&&Se.undirected[Ye]:"directed"===he?Se.out&&Se.out[Ye]:Se.undirected&&Se.undirected[Ye]:$e}function te(Ge){return null!==Ge&&"object"===be(Ge)&&"function"==typeof Ge.addUndirectedEdgeWithKey&&"function"==typeof Ge.dropNode}function J(Ge){return"object"===be(Ge)&&null!==Ge&&Ge.constructor===Object}function oe(Ge){var it;for(it in Ge)return!1;return!0}function se(Ge,it,Ye){Object.defineProperty(Ge,it,{enumerable:!1,configurable:!1,writable:!0,value:Ye})}function Q(Ge,it,Ye){var he={enumerable:!0,configurable:!0};"function"==typeof Ye?he.get=Ye:(he.value=Ye,he.writable=!1),Object.defineProperty(Ge,it,he)}function U(Ge){return!(!J(Ge)||Ge.attributes&&!Array.isArray(Ge.attributes))}"function"==typeof Object.assign&&(O=Object.assign);var ae,xe={exports:{}},Oe="object"==typeof Reflect?Reflect:null,re=Oe&&"function"==typeof Oe.apply?Oe.apply:function(Ge,it,Ye){return Function.prototype.apply.call(Ge,it,Ye)};ae=Oe&&"function"==typeof Oe.ownKeys?Oe.ownKeys:Object.getOwnPropertySymbols?function(Ge){return Object.getOwnPropertyNames(Ge).concat(Object.getOwnPropertySymbols(Ge))}:function(Ge){return Object.getOwnPropertyNames(Ge)};var ue=Number.isNaN||function(Ge){return Ge!=Ge};function z(){z.init.call(this)}xe.exports=z,xe.exports.once=function(Ge,it){return new Promise(function(Ye,he){function Se(_t){Ge.removeListener(it,$e),he(_t)}function $e(){"function"==typeof Ge.removeListener&&Ge.removeListener("error",Se),Ye([].slice.call(arguments))}var _t;He(Ge,it,$e,{once:!0}),"error"!==it&&("function"==typeof(_t=Ge).on&&He(_t,"error",Se,{once:!0}))})},z.EventEmitter=z,z.prototype._events=void 0,z.prototype._eventsCount=0,z.prototype._maxListeners=void 0;var $=10;function ne(Ge){if("function"!=typeof Ge)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ge)}function ge(Ge){return void 0===Ge._maxListeners?z.defaultMaxListeners:Ge._maxListeners}function Ue(Ge,it,Ye,he){var Se,$e,_t;if(ne(Ye),void 0===($e=Ge._events)?($e=Ge._events=Object.create(null),Ge._eventsCount=0):(void 0!==$e.newListener&&(Ge.emit("newListener",it,Ye.listener?Ye.listener:Ye),$e=Ge._events),_t=$e[it]),void 0===_t)_t=$e[it]=Ye,++Ge._eventsCount;else if("function"==typeof _t?_t=$e[it]=he?[Ye,_t]:[_t,Ye]:he?_t.unshift(Ye):_t.push(Ye),(Se=ge(Ge))>0&&_t.length>Se&&!_t.warned){_t.warned=!0;var In=new Error("Possible EventEmitter memory leak detected. "+_t.length+" "+String(it)+" listeners added. Use emitter.setMaxListeners() to increase limit");In.name="MaxListenersExceededWarning",In.emitter=Ge,In.type=it,In.count=_t.length,console&&console.warn&&console.warn(In)}return Ge}function Re(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function rt(Ge,it,Ye){var he={fired:!1,wrapFn:void 0,target:Ge,type:it,listener:Ye},Se=Re.bind(he);return Se.listener=Ye,he.wrapFn=Se,Se}function Pe(Ge,it,Ye){var he=Ge._events;if(void 0===he)return[];var Se=he[it];return void 0===Se?[]:"function"==typeof Se?Ye?[Se.listener||Se]:[Se]:Ye?function($e){for(var _t=new Array($e.length),zt=0;zt<_t.length;++zt)_t[zt]=$e[zt].listener||$e[zt];return _t}(Se):xt(Se,Se.length)}function at(Ge){var it=this._events;if(void 0!==it){var Ye=it[Ge];if("function"==typeof Ye)return 1;if(void 0!==Ye)return Ye.length}return 0}function xt(Ge,it){for(var Ye=new Array(it),he=0;he<it;++he)Ye[he]=Ge[he];return Ye}function He(Ge,it,Ye,he){if("function"==typeof Ge.on)he.once?Ge.once(it,Ye):Ge.on(it,Ye);else{if("function"!=typeof Ge.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Ge);Ge.addEventListener(it,function Se($e){he.once&&Ge.removeEventListener(it,Se),Ye($e)})}}function ft(Ge){if("function"!=typeof Ge)throw new Error("obliterator/iterator: expecting a function!");this.next=Ge}Object.defineProperty(z,"defaultMaxListeners",{enumerable:!0,get:function(){return $},set:function(Ge){if("number"!=typeof Ge||Ge<0||ue(Ge))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Ge+".");$=Ge}}),z.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},z.prototype.setMaxListeners=function(Ge){if("number"!=typeof Ge||Ge<0||ue(Ge))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Ge+".");return this._maxListeners=Ge,this},z.prototype.getMaxListeners=function(){return ge(this)},z.prototype.emit=function(Ge){for(var it=[],Ye=1;Ye<arguments.length;Ye++)it.push(arguments[Ye]);var he="error"===Ge,Se=this._events;if(void 0!==Se)he=he&&void 0===Se.error;else if(!he)return!1;if(he){var $e;if(it.length>0&&($e=it[0]),$e instanceof Error)throw $e;var _t=new Error("Unhandled error."+($e?" ("+$e.message+")":""));throw _t.context=$e,_t}var zt=Se[Ge];if(void 0===zt)return!1;if("function"==typeof zt)re(zt,this,it);else{var In=zt.length,yi=xt(zt,In);for(Ye=0;Ye<In;++Ye)re(yi[Ye],this,it)}return!0},z.prototype.on=z.prototype.addListener=function(Ge,it){return Ue(this,Ge,it,!1)},z.prototype.prependListener=function(Ge,it){return Ue(this,Ge,it,!0)},z.prototype.once=function(Ge,it){return ne(it),this.on(Ge,rt(this,Ge,it)),this},z.prototype.prependOnceListener=function(Ge,it){return ne(it),this.prependListener(Ge,rt(this,Ge,it)),this},z.prototype.off=z.prototype.removeListener=function(Ge,it){var Ye,he,Se,$e,_t;if(ne(it),void 0===(he=this._events))return this;if(void 0===(Ye=he[Ge]))return this;if(Ye===it||Ye.listener===it)0==--this._eventsCount?this._events=Object.create(null):(delete he[Ge],he.removeListener&&this.emit("removeListener",Ge,Ye.listener||it));else if("function"!=typeof Ye){for(Se=-1,$e=Ye.length-1;$e>=0;$e--)if(Ye[$e]===it||Ye[$e].listener===it){_t=Ye[$e].listener,Se=$e;break}if(Se<0)return this;0===Se?Ye.shift():function(zt,In){for(;In+1<zt.length;In++)zt[In]=zt[In+1];zt.pop()}(Ye,Se),1===Ye.length&&(he[Ge]=Ye[0]),void 0!==he.removeListener&&this.emit("removeListener",Ge,_t||it)}return this},z.prototype.removeAllListeners=function(Ge){var it,Ye,he;if(void 0===(Ye=this._events))return this;if(void 0===Ye.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==Ye[Ge]&&(0==--this._eventsCount?this._events=Object.create(null):delete Ye[Ge]),this;if(0===arguments.length){var Se,$e=Object.keys(Ye);for(he=0;he<$e.length;++he)"removeListener"!==(Se=$e[he])&&this.removeAllListeners(Se);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(it=Ye[Ge]))this.removeListener(Ge,it);else if(void 0!==it)for(he=it.length-1;he>=0;he--)this.removeListener(Ge,it[he]);return this},z.prototype.listeners=function(Ge){return Pe(this,Ge,!0)},z.prototype.rawListeners=function(Ge){return Pe(this,Ge,!1)},z.listenerCount=function(Ge,it){return"function"==typeof Ge.listenerCount?Ge.listenerCount(it):at.call(Ge,it)},z.prototype.listenerCount=at,z.prototype.eventNames=function(){return this._eventsCount>0?ae(this._events):[]},typeof Symbol<"u"&&(ft.prototype[Symbol.iterator]=function(){return this}),ft.of=function(){var Ge=arguments,it=Ge.length,Ye=0;return new ft(function(){return Ye>=it?{done:!0}:{done:!1,value:Ge[Ye++]}})},ft.empty=function(){return new ft(function(){return{done:!0}})},ft.fromSequence=function(Ge){var it=0,Ye=Ge.length;return new ft(function(){return it>=Ye?{done:!0}:{done:!1,value:Ge[it++]}})},ft.is=function(Ge){return Ge instanceof ft||"object"==typeof Ge&&null!==Ge&&"function"==typeof Ge.next};var gt=ft,Ct={};Ct.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Ct.SYMBOL_SUPPORT=typeof Symbol<"u";var kn=gt,Dn=Ct.ARRAY_BUFFER_SUPPORT,Jt=Ct.SYMBOL_SUPPORT,nn=function(Ge){var Ye,it="string"==typeof(Ye=Ge)||Array.isArray(Ye)||Dn&&ArrayBuffer.isView(Ye)?kn.fromSequence(Ye):"object"!=typeof Ye||null===Ye?null:Jt&&"function"==typeof Ye[Symbol.iterator]?Ye[Symbol.iterator]():"function"==typeof Ye.next?Ye:null;if(!it)throw new Error("obliterator: target is not iterable nor a valid iterator.");return it},Ln=nn,xn=function(Ge,it){for(var Ye,he=arguments.length>1?it:1/0,Se=he!==1/0?new Array(he):[],$e=0,_t=Ln(Ge);;){if($e===he)return Se;if((Ye=_t.next()).done)return $e!==it&&(Se.length=$e),Se;Se[$e++]=Ye.value}},bn=function(Ge){function it(Ye){var he;return(he=Ge.call(this)||this).name="GraphError",he.message=Ye,he}return V(it,Ge),it}(W(Error)),yn=function(Ge){function it(Ye){var he;return(he=Ge.call(this,Ye)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(P(he),it.prototype.constructor),he}return V(it,Ge),it}(bn),je=function(Ge){function it(Ye){var he;return(he=Ge.call(this,Ye)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(P(he),it.prototype.constructor),he}return V(it,Ge),it}(bn),Ce=function(Ge){function it(Ye){var he;return(he=Ge.call(this,Ye)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(P(he),it.prototype.constructor),he}return V(it,Ge),it}(bn);function Dt(Ge,it){this.key=Ge,this.attributes=it,this.clear()}function Rt(Ge,it){this.key=Ge,this.attributes=it,this.clear()}function ci(Ge,it){this.key=Ge,this.attributes=it,this.clear()}function $i(Ge,it,Ye,he,Se){this.key=it,this.attributes=Se,this.undirected=Ge,this.source=Ye,this.target=he}function At(Ge,it,Ye,he,Se,$e,_t){var zt,In,yi,ti;if(he=""+he,0===Ye){if(!(zt=Ge._nodes.get(he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" node in the graph.'));yi=Se,ti=$e}else if(3===Ye){if(!(In=Ge._edges.get(Se=""+Se)))throw new je("Graph.".concat(it,': could not find the "').concat(Se,'" edge in the graph.'));var di=In.source.key,mr=In.target.key;if(he===di)zt=In.target;else{if(he!==mr)throw new je("Graph.".concat(it,': the "').concat(he,'" node is not attached to the "').concat(Se,'" edge (').concat(di,", ").concat(mr,")."));zt=In.source}yi=$e,ti=_t}else{if(!(In=Ge._edges.get(he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'));zt=1===Ye?In.source:In.target,yi=Se,ti=$e}return[zt,yi,ti]}Dt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.in={},this.out={},this.undirected={}},Rt.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.in={},this.out={}},ci.prototype.clear=function(){this.undirectedDegree=0,this.undirected={}},$i.prototype.attach=function(){var Ge="out",it="in";this.undirected&&(Ge=it="undirected");var Ye=this.source.key,he=this.target.key;this.source[Ge][he]=this,this.undirected&&Ye===he||(this.target[it][Ye]=this)},$i.prototype.attachMulti=function(){var Ge="out",it="in",Ye=this.source.key,he=this.target.key;this.undirected&&(Ge=it="undirected");var Se=this.source[Ge],$e=Se[he];if(void 0===$e)return Se[he]=this,void(this.undirected&&Ye===he||(this.target[it][Ye]=this));$e.previous=this,this.next=$e,Se[he]=this,this.target[it][Ye]=this},$i.prototype.detach=function(){var Ge=this.source.key,Ye="out",he="in";this.undirected&&(Ye=he="undirected"),delete this.source[Ye][this.target.key],delete this.target[he][Ge]},$i.prototype.detachMulti=function(){var Ge=this.source.key,it=this.target.key,Ye="out",he="in";this.undirected&&(Ye=he="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[Ye][it],delete this.target[he][Ge]):(this.next.previous=void 0,this.source[Ye][it]=this.next,this.target[he][Ge]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var Pt=[{name:function(Ge){return"get".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e){var _t=At(this,it,Ye,he,Se,$e);return _t[0].attributes[_t[1]]}}},{name:function(Ge){return"get".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se){return At(this,it,Ye,he,Se)[0].attributes}}},{name:function(Ge){return"has".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e){var _t=At(this,it,Ye,he,Se,$e);return _t[0].attributes.hasOwnProperty(_t[1])}}},{name:function(Ge){return"set".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e,_t){var zt=At(this,it,Ye,he,Se,$e,_t),In=zt[0],yi=zt[1];return In.attributes[yi]=zt[2],this.emit("nodeAttributesUpdated",{key:In.key,type:"set",attributes:In.attributes,name:yi}),this}}},{name:function(Ge){return"update".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e,_t){var zt=At(this,it,Ye,he,Se,$e,_t),In=zt[0],yi=zt[1],ti=zt[2];if("function"!=typeof ti)throw new yn("Graph.".concat(it,": updater should be a function."));var di=In.attributes,mr=ti(di[yi]);return di[yi]=mr,this.emit("nodeAttributesUpdated",{key:In.key,type:"set",attributes:In.attributes,name:yi}),this}}},{name:function(Ge){return"remove".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e){var _t=At(this,it,Ye,he,Se,$e),zt=_t[0],In=_t[1];return delete zt.attributes[In],this.emit("nodeAttributesUpdated",{key:zt.key,type:"remove",attributes:zt.attributes,name:In}),this}}},{name:function(Ge){return"replace".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e){var _t=At(this,it,Ye,he,Se,$e),zt=_t[0],In=_t[1];if(!J(In))throw new yn("Graph.".concat(it,": provided attributes are not a plain object."));return zt.attributes=In,this.emit("nodeAttributesUpdated",{key:zt.key,type:"replace",attributes:zt.attributes}),this}}},{name:function(Ge){return"merge".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e){var _t=At(this,it,Ye,he,Se,$e),zt=_t[0],In=_t[1];if(!J(In))throw new yn("Graph.".concat(it,": provided attributes are not a plain object."));return O(zt.attributes,In),this.emit("nodeAttributesUpdated",{key:zt.key,type:"merge",attributes:zt.attributes,data:In}),this}}},{name:function(Ge){return"update".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e){var _t=At(this,it,Ye,he,Se,$e),zt=_t[0],In=_t[1];if("function"!=typeof In)throw new yn("Graph.".concat(it,": provided updater is not a function."));return zt.attributes=In(zt.attributes),this.emit("nodeAttributesUpdated",{key:zt.key,type:"update",attributes:zt.attributes}),this}}}],un=[{name:function(Ge){return"get".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Ce("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Ce("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+he,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new Ce("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(he=""+he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'))}return $e.attributes[Se]}}},{name:function(Ge){return"get".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he){var Se;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Ce("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new Ce("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var $e=""+he,_t=""+arguments[1];if(!(Se=q(this,$e,_t,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat($e,'" - "').concat(_t,'").'))}else{if("mixed"!==Ye)throw new Ce("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Se=this._edges.get(he=""+he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'))}return Se.attributes}}},{name:function(Ge){return"has".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Ce("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Ce("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+he,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new Ce("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(he=""+he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'))}return $e.attributes.hasOwnProperty(Se)}}},{name:function(Ge){return"set".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e){var _t;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Ce("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new Ce("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var zt=""+he,In=""+Se;if(Se=arguments[2],$e=arguments[3],!(_t=q(this,zt,In,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(zt,'" - "').concat(In,'").'))}else{if("mixed"!==Ye)throw new Ce("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(_t=this._edges.get(he=""+he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'))}return _t.attributes[Se]=$e,this.emit("edgeAttributesUpdated",{key:_t.key,type:"set",attributes:_t.attributes,name:Se}),this}}},{name:function(Ge){return"update".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se,$e){var _t;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Ce("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new Ce("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var zt=""+he,In=""+Se;if(Se=arguments[2],$e=arguments[3],!(_t=q(this,zt,In,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(zt,'" - "').concat(In,'").'))}else{if("mixed"!==Ye)throw new Ce("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(_t=this._edges.get(he=""+he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'))}if("function"!=typeof $e)throw new yn("Graph.".concat(it,": updater should be a function."));return _t.attributes[Se]=$e(_t.attributes[Se]),this.emit("edgeAttributesUpdated",{key:_t.key,type:"set",attributes:_t.attributes,name:Se}),this}}},{name:function(Ge){return"remove".concat(Ge,"Attribute")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Ce("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Ce("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+he,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new Ce("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(he=""+he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'))}return delete $e.attributes[Se],this.emit("edgeAttributesUpdated",{key:$e.key,type:"remove",attributes:$e.attributes,name:Se}),this}}},{name:function(Ge){return"replace".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Ce("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Ce("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+he,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new Ce("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(he=""+he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'))}if(!J(Se))throw new yn("Graph.".concat(it,": provided attributes are not a plain object."));return $e.attributes=Se,this.emit("edgeAttributesUpdated",{key:$e.key,type:"replace",attributes:$e.attributes}),this}}},{name:function(Ge){return"merge".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Ce("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Ce("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+he,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new Ce("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(he=""+he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'))}if(!J(Se))throw new yn("Graph.".concat(it,": provided attributes are not a plain object."));return O($e.attributes,Se),this.emit("edgeAttributesUpdated",{key:$e.key,type:"merge",attributes:$e.attributes,data:Se}),this}}},{name:function(Ge){return"update".concat(Ge,"Attributes")},attacher:function(Ge,it,Ye){Ge.prototype[it]=function(he,Se){var $e;if("mixed"!==this.type&&"mixed"!==Ye&&Ye!==this.type)throw new Ce("Graph.".concat(it,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Ce("Graph.".concat(it,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var _t=""+he,zt=""+Se;if(Se=arguments[2],!($e=q(this,_t,zt,Ye)))throw new je("Graph.".concat(it,': could not find an edge for the given path ("').concat(_t,'" - "').concat(zt,'").'))}else{if("mixed"!==Ye)throw new Ce("Graph.".concat(it,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!($e=this._edges.get(he=""+he)))throw new je("Graph.".concat(it,': could not find the "').concat(he,'" edge in the graph.'))}if("function"!=typeof Se)throw new yn("Graph.".concat(it,": provided updater is not a function."));return $e.attributes=Se($e.attributes),this.emit("edgeAttributesUpdated",{key:$e.key,type:"update",attributes:$e.attributes}),this}}}],Je=gt,Te=nn,Me=function(){var Ge=arguments,it=null,Ye=-1;return new Je(function(){for(var he=null;;){if(null===it){if(++Ye>=Ge.length)return{done:!0};it=Te(Ge[Ye])}if(!0!==(he=it.next()).done)break;it=null}return he})},Ot=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function vn(Ge,it,Ye,he){var Se=!1;for(var $e in it)if($e!==he){var _t=it[$e];if(Se=Ye(_t.key,_t.attributes,_t.source.key,_t.target.key,_t.source.attributes,_t.target.attributes,_t.undirected),Ge&&Se)return _t.key}}function ii(Ge,it,Ye,he){var Se,$e,_t,zt=!1;for(var In in it)if(In!==he){Se=it[In];do{if(zt=Ye(Se.key,Se.attributes,($e=Se.source).key,(_t=Se.target).key,$e.attributes,_t.attributes,Se.undirected),Ge&&zt)return Se.key;Se=Se.next}while(void 0!==Se)}}function Fi(Ge,it){var Ye,he=Object.keys(Ge),Se=he.length,$e=0;return new gt(function(){do{if(Ye)Ye=Ye.next;else{if($e>=Se)return{done:!0};var _t=he[$e++];if(_t===it){Ye=void 0;continue}Ye=Ge[_t]}}while(!Ye);return{done:!1,value:{edge:Ye.key,attributes:Ye.attributes,source:Ye.source.key,target:Ye.target.key,sourceAttributes:Ye.source.attributes,targetAttributes:Ye.target.attributes,undirected:Ye.undirected}}})}function Hs(Ge,it,Ye,he){var Se=it[Ye];if(Se){var $e=Se.source,_t=Se.target;return he(Se.key,Se.attributes,$e.key,_t.key,$e.attributes,_t.attributes,Se.undirected)&&Ge?Se.key:void 0}}function so(Ge,it,Ye,he){var Se=it[Ye];if(Se){var $e=!1;do{if($e=he(Se.key,Se.attributes,Se.source.key,Se.target.key,Se.source.attributes,Se.target.attributes,Se.undirected),Ge&&$e)return Se.key;Se=Se.next}while(void 0!==Se)}}function bs(Ge,it){var Ye=Ge[it];return void 0!==Ye.next?new gt(function(){if(!Ye)return{done:!0};var he={edge:Ye.key,attributes:Ye.attributes,source:Ye.source.key,target:Ye.target.key,sourceAttributes:Ye.source.attributes,targetAttributes:Ye.target.attributes,undirected:Ye.undirected};return Ye=Ye.next,{done:!1,value:he}}):gt.of({edge:Ye.key,attributes:Ye.attributes,source:Ye.source.key,target:Ye.target.key,sourceAttributes:Ye.source.attributes,targetAttributes:Ye.target.attributes,undirected:Ye.undirected})}function ca(Ge,it){if(0===Ge.size)return[];if("mixed"===it||it===Ge.type)return"function"==typeof Array.from?Array.from(Ge._edges.keys()):xn(Ge._edges.keys(),Ge._edges.size);for(var Ye,he,$e=new Array("undirected"===it?Ge.undirectedSize:Ge.directedSize),_t="undirected"===it,zt=Ge._edges.values(),In=0;!0!==(Ye=zt.next()).done;)(he=Ye.value).undirected===_t&&($e[In++]=he.key);return $e}function er(Ge,it,Ye,he){if(0!==it.size)for(var Se,$e,_t="mixed"!==Ye&&Ye!==it.type,zt="undirected"===Ye,In=!1,yi=it._edges.values();!0!==(Se=yi.next()).done;)if($e=Se.value,!_t||$e.undirected===zt){var di=$e.key,dr=$e.source,sr=$e.target;if(In=he(di,$e.attributes,dr.key,sr.key,dr.attributes,sr.attributes,$e.undirected),Ge&&In)return di}}function tl(Ge,it){if(0===Ge.size)return gt.empty();var Ye="mixed"!==it&&it!==Ge.type,he="undirected"===it,Se=Ge._edges.values();return new gt(function(){for(var $e,_t;;){if(($e=Se.next()).done)return $e;if(_t=$e.value,!Ye||_t.undirected===he)break}return{value:{edge:_t.key,attributes:_t.attributes,source:_t.source.key,target:_t.target.key,sourceAttributes:_t.source.attributes,targetAttributes:_t.target.attributes,undirected:_t.undirected},done:!1}})}function $l(Ge,it,Ye,he,Se,$e){var _t,zt=it?ii:vn;if("undirected"!==Ye&&("out"!==he&&(_t=zt(Ge,Se.in,$e),Ge&&_t)||"in"!==he&&(_t=zt(Ge,Se.out,$e,he?void 0:Se.key),Ge&&_t))||"directed"!==Ye&&(_t=zt(Ge,Se.undirected,$e),Ge&&_t))return _t}function ql(Ge,it,Ye,he){var Se=[];return $l(!1,Ge,it,Ye,he,function($e){Se.push($e)}),Se}function Gf(Ge,it,Ye){var he=gt.empty();return"undirected"!==Ge&&("out"!==it&&void 0!==Ye.in&&(he=Me(he,Fi(Ye.in))),"in"!==it&&void 0!==Ye.out&&(he=Me(he,Fi(Ye.out,it?void 0:Ye.key)))),"directed"!==Ge&&void 0!==Ye.undirected&&(he=Me(he,Fi(Ye.undirected))),he}function Wf(Ge,it,Ye,he,Se,$e,_t){var zt,In=Ye?so:Hs;if("undirected"!==it&&(void 0!==Se.in&&"out"!==he&&(zt=In(Ge,Se.in,$e,_t),Ge&&zt)||void 0!==Se.out&&"in"!==he&&(he||Se.key!==$e)&&(zt=In(Ge,Se.out,$e,_t),Ge&&zt))||"directed"!==it&&void 0!==Se.undirected&&(zt=In(Ge,Se.undirected,$e,_t),Ge&&zt))return zt}function th(Ge,it,Ye,he,Se){var $e=[];return Wf(!1,Ge,it,Ye,he,Se,function(_t){$e.push(_t)}),$e}function lc(Ge,it,Ye,he){var Se=gt.empty();return"undirected"!==Ge&&(void 0!==Ye.in&&"out"!==it&&he in Ye.in&&(Se=Me(Se,bs(Ye.in,he))),void 0!==Ye.out&&"in"!==it&&he in Ye.out&&(it||Ye.key!==he)&&(Se=Me(Se,bs(Ye.out,he)))),"directed"!==Ge&&void 0!==Ye.undirected&&he in Ye.undirected&&(Se=Me(Se,bs(Ye.undirected,he))),Se}var Ah=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Lu(){this.A=null,this.B=null}function qa(Ge,it,Ye,he,Se){for(var $e in he){var _t=he[$e],zt=_t.source,yi=zt===Ye?_t.target:zt;if(!it||!it.has(yi.key)){var ti=Se(yi.key,yi.attributes);if(Ge&&ti)return yi.key}}}function Ld(Ge,it,Ye,he,Se){if("mixed"!==it){if("undirected"===it)return qa(Ge,null,he,he.undirected,Se);if("string"==typeof Ye)return qa(Ge,null,he,he[Ye],Se)}var $e,_t=new Lu;if("undirected"!==it){if("out"!==Ye){if($e=qa(Ge,null,he,he.in,Se),Ge&&$e)return $e;_t.wrap(he.in)}if("in"!==Ye){if($e=qa(Ge,_t,he,he.out,Se),Ge&&$e)return $e;_t.wrap(he.out)}}if("directed"!==it&&($e=qa(Ge,_t,he,he.undirected,Se),Ge&&$e))return $e}function cu(Ge,it,Ye){var he=Object.keys(Ye),Se=he.length,$e=0;return new gt(function(){var _t=null;do{if($e>=Se)return Ge&&Ge.wrap(Ye),{done:!0};var zt=Ye[he[$e++]],In=zt.source;_t=In===it?zt.target:In,Ge&&Ge.has(_t.key)&&(_t=null)}while(null===_t);return{done:!1,value:{neighbor:_t.key,attributes:_t.attributes}}})}function Pu(Ge,it,Ye,he,Se){for(var $e,_t,zt,In,yi,ti,di,mr=he._nodes.values(),dr=he.type;!0!==($e=mr.next()).done;){var sr=!1;if(_t=$e.value,"undirected"!==dr)for(zt in In=_t.out){yi=In[zt];do{if(sr=!0,di=Se(_t.key,(ti=yi.target).key,_t.attributes,ti.attributes,yi.key,yi.attributes,yi.undirected),Ge&&di)return yi;yi=yi.next}while(yi)}if("directed"!==dr)for(zt in In=_t.undirected)if(!(it&&_t.key>zt)){yi=In[zt];do{if((ti=yi.target).key!==zt&&(ti=yi.source),sr=!0,di=Se(_t.key,ti.key,_t.attributes,ti.attributes,yi.key,yi.attributes,yi.undirected),Ge&&di)return yi;yi=yi.next}while(yi)}if(Ye&&!sr&&(di=Se(_t.key,null,_t.attributes,null,null,null,null),Ge&&di))return null}}function ed(Ge){if(!J(Ge))throw new yn('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in Ge))throw new yn("Graph.import: serialized node is missing its key.");if("attributes"in Ge&&(!J(Ge.attributes)||null===Ge.attributes))throw new yn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function hf(Ge){if(!J(Ge))throw new yn('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in Ge))throw new yn("Graph.import: serialized edge is missing its source.");if(!("target"in Ge))throw new yn("Graph.import: serialized edge is missing its target.");if("attributes"in Ge&&(!J(Ge.attributes)||null===Ge.attributes))throw new yn("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in Ge&&"boolean"!=typeof Ge.undirected)throw new yn("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}Lu.prototype.wrap=function(Ge){null===this.A?this.A=Ge:null===this.B&&(this.B=Ge)},Lu.prototype.has=function(Ge){return null!==this.A&&Ge in this.A||null!==this.B&&Ge in this.B};var td,dl=(td=255&Math.floor(256*Math.random()),function(){return td++}),df=new Set(["directed","undirected","mixed"]),nh=new Set(["domain","_events","_eventsCount","_maxListeners"]),ff={allowSelfLoops:!0,multi:!1,type:"mixed"};function Pd(Ge,it,Ye){var he=new Ge.NodeDataClass(it,Ye);return Ge._nodes.set(it,he),Ge.emit("nodeAdded",{key:it,attributes:Ye}),he}function xc(Ge,it,Ye,he,Se,$e,_t,zt){if(!he&&"undirected"===Ge.type)throw new Ce("Graph.".concat(it,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(he&&"directed"===Ge.type)throw new Ce("Graph.".concat(it,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(zt&&!J(zt))throw new yn("Graph.".concat(it,': invalid attributes. Expecting an object but got "').concat(zt,'"'));if($e=""+$e,_t=""+_t,zt=zt||{},!Ge.allowSelfLoops&&$e===_t)throw new Ce("Graph.".concat(it,': source & target are the same ("').concat($e,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var In=Ge._nodes.get($e),yi=Ge._nodes.get(_t);if(!In)throw new je("Graph.".concat(it,': source node "').concat($e,'" not found.'));if(!yi)throw new je("Graph.".concat(it,': target node "').concat(_t,'" not found.'));var ti={key:null,undirected:he,source:$e,target:_t,attributes:zt};if(Ye)Se=Ge._edgeKeyGenerator();else if(Ge._edges.has(Se=""+Se))throw new Ce("Graph.".concat(it,': the "').concat(Se,'" edge already exists in the graph.'));if(!Ge.multi&&(he?void 0!==In.undirected[_t]:void 0!==In.out[_t]))throw new Ce("Graph.".concat(it,': an edge linking "').concat($e,'" to "').concat(_t,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var di=new $i(he,Se,In,yi,zt);Ge._edges.set(Se,di);var mr=$e===_t;return he?(In.undirectedDegree++,yi.undirectedDegree++,mr&&Ge._undirectedSelfLoopCount++):(In.outDegree++,yi.inDegree++,mr&&Ge._directedSelfLoopCount++),Ge.multi?di.attachMulti():di.attach(),he?Ge._undirectedSize++:Ge._directedSize++,ti.key=Se,Ge.emit("edgeAdded",ti),Se}function Tg(Ge,it,Ye,he,Se,$e,_t,zt,In){if(!he&&"undirected"===Ge.type)throw new Ce("Graph.".concat(it,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(he&&"directed"===Ge.type)throw new Ce("Graph.".concat(it,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(zt)if(In){if("function"!=typeof zt)throw new yn("Graph.".concat(it,': invalid updater function. Expecting a function but got "').concat(zt,'"'))}else if(!J(zt))throw new yn("Graph.".concat(it,': invalid attributes. Expecting an object but got "').concat(zt,'"'));var yi;if($e=""+$e,_t=""+_t,In&&(yi=zt,zt=void 0),!Ge.allowSelfLoops&&$e===_t)throw new Ce("Graph.".concat(it,': source & target are the same ("').concat($e,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var ti,di,mr=Ge._nodes.get($e),dr=Ge._nodes.get(_t);if(!Ye&&(ti=Ge._edges.get(Se))){if(!(ti.source.key===$e&&ti.target.key===_t||he&&ti.source.key===_t&&ti.target.key===$e))throw new Ce("Graph.".concat(it,': inconsistency detected when attempting to merge the "').concat(Se,'" edge with "').concat($e,'" source & "').concat(_t,'" target vs. ("').concat(ti.source.key,'", "').concat(ti.target.key,'").'));di=ti}if(di||Ge.multi||!mr||(di=he?mr.undirected[_t]:mr.out[_t]),di){var sr=[di.key,!1,!1,!1];return(In?yi:zt)?(In?(di.attributes=yi(di.attributes),Ge.emit("edgeAttributesUpdated",{type:"replace",key:di.key,attributes:di.attributes})):(O(di.attributes,zt),Ge.emit("edgeAttributesUpdated",{type:"merge",key:di.key,attributes:di.attributes,data:zt})),sr):sr}zt=zt||{},In&&yi&&(zt=yi(zt));var bo={key:null,undirected:he,source:$e,target:_t,attributes:zt};if(Ye)Se=Ge._edgeKeyGenerator();else if(Ge._edges.has(Se=""+Se))throw new Ce("Graph.".concat(it,': the "').concat(Se,'" edge already exists in the graph.'));var xo=!1,cs=!1;mr||(mr=Pd(Ge,$e,{}),xo=!0,$e===_t&&(dr=mr,cs=!0)),dr||(dr=Pd(Ge,_t,{}),cs=!0),ti=new $i(he,Se,mr,dr,zt),Ge._edges.set(Se,ti);var Ia=$e===_t;return he?(mr.undirectedDegree++,dr.undirectedDegree++,Ia&&Ge._undirectedSelfLoopCount++):(mr.outDegree++,dr.inDegree++,Ia&&Ge._directedSelfLoopCount++),Ge.multi?ti.attachMulti():ti.attach(),he?Ge._undirectedSize++:Ge._directedSize++,bo.key=Se,Ge.emit("edgeAdded",bo),[Se,!0,xo,cs]}function Sh(Ge,it){Ge._edges.delete(it.key);var Ye=it.source,he=it.target,Se=it.attributes,$e=it.undirected,_t=Ye===he;$e?(Ye.undirectedDegree--,he.undirectedDegree--,_t&&Ge._undirectedSelfLoopCount--):(Ye.outDegree--,he.inDegree--,_t&&Ge._directedSelfLoopCount--),Ge.multi?it.detachMulti():it.detach(),$e?Ge._undirectedSize--:Ge._directedSize--,Ge.emit("edgeDropped",{key:it.key,attributes:Se,source:Ye.key,target:he.key,undirected:$e})}var Ge,to=function(Ge){function it(he){var Se;if(Se=Ge.call(this)||this,"boolean"!=typeof(he=O({},ff,he)).multi)throw new yn("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(he.multi,'".'));if(!df.has(he.type))throw new yn('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(he.type,'".'));if("boolean"!=typeof he.allowSelfLoops)throw new yn("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(he.allowSelfLoops,'".'));var $e="mixed"===he.type?Dt:"directed"===he.type?Rt:ci;se(P(Se),"NodeDataClass",$e);var _t="geid_"+dl()+"_",zt=0;return se(P(Se),"_attributes",{}),se(P(Se),"_nodes",new Map),se(P(Se),"_edges",new Map),se(P(Se),"_directedSize",0),se(P(Se),"_undirectedSize",0),se(P(Se),"_directedSelfLoopCount",0),se(P(Se),"_undirectedSelfLoopCount",0),se(P(Se),"_edgeKeyGenerator",function(){var In;do{In=_t+zt++}while(Se._edges.has(In));return In}),se(P(Se),"_options",he),nh.forEach(function(In){return se(P(Se),In,Se[In])}),Q(P(Se),"order",function(){return Se._nodes.size}),Q(P(Se),"size",function(){return Se._edges.size}),Q(P(Se),"directedSize",function(){return Se._directedSize}),Q(P(Se),"undirectedSize",function(){return Se._undirectedSize}),Q(P(Se),"selfLoopCount",function(){return Se._directedSelfLoopCount+Se._undirectedSelfLoopCount}),Q(P(Se),"directedSelfLoopCount",function(){return Se._directedSelfLoopCount}),Q(P(Se),"undirectedSelfLoopCount",function(){return Se._undirectedSelfLoopCount}),Q(P(Se),"multi",Se._options.multi),Q(P(Se),"type",Se._options.type),Q(P(Se),"allowSelfLoops",Se._options.allowSelfLoops),Q(P(Se),"implementation",function(){return"graphology"}),Se}V(it,Ge);var Ye=it.prototype;return Ye._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},Ye.hasNode=function(he){return this._nodes.has(""+he)},Ye.hasDirectedEdge=function(he,Se){if("undirected"===this.type)return!1;if(1===arguments.length){var _t=this._edges.get(""+he);return!!_t&&!_t.undirected}if(2===arguments.length){Se=""+Se;var zt=this._nodes.get(he=""+he);if(!zt)return!1;var In=zt.out[Se];return!(!In||this.multi&&!In.size)}throw new yn("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ye.hasUndirectedEdge=function(he,Se){if("directed"===this.type)return!1;if(1===arguments.length){var _t=this._edges.get(""+he);return!!_t&&_t.undirected}if(2===arguments.length){Se=""+Se;var zt=this._nodes.get(he=""+he);if(!zt)return!1;var In=zt.undirected[Se];return!(!In||this.multi&&!In.size)}throw new yn("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ye.hasEdge=function(he,Se){if(1===arguments.length)return this._edges.has(""+he);if(2===arguments.length){Se=""+Se;var _t=this._nodes.get(he=""+he);if(!_t)return!1;var zt=void 0!==_t.out&&_t.out[Se];return zt||(zt=void 0!==_t.undirected&&_t.undirected[Se]),!(!zt||this.multi&&!zt.size)}throw new yn("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},Ye.directedEdge=function(he,Se){if("undirected"!==this.type){if(he=""+he,Se=""+Se,this.multi)throw new Ce("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var $e=this._nodes.get(he);if(!$e)throw new je('Graph.directedEdge: could not find the "'.concat(he,'" source node in the graph.'));if(!this._nodes.has(Se))throw new je('Graph.directedEdge: could not find the "'.concat(Se,'" target node in the graph.'));var _t=$e.out&&$e.out[Se]||void 0;return _t?_t.key:void 0}},Ye.undirectedEdge=function(he,Se){if("directed"!==this.type){if(he=""+he,Se=""+Se,this.multi)throw new Ce("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var $e=this._nodes.get(he);if(!$e)throw new je('Graph.undirectedEdge: could not find the "'.concat(he,'" source node in the graph.'));if(!this._nodes.has(Se))throw new je('Graph.undirectedEdge: could not find the "'.concat(Se,'" target node in the graph.'));var _t=$e.undirected&&$e.undirected[Se]||void 0;return _t?_t.key:void 0}},Ye.edge=function(he,Se){if(this.multi)throw new Ce("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");Se=""+Se;var $e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.edge: could not find the "'.concat(he,'" source node in the graph.'));if(!this._nodes.has(Se))throw new je('Graph.edge: could not find the "'.concat(Se,'" target node in the graph.'));var _t=$e.out&&$e.out[Se]||$e.undirected&&$e.undirected[Se]||void 0;if(_t)return _t.key},Ye.areDirectedNeighbors=function(he,Se){Se=""+Se;var $e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.areDirectedNeighbors: could not find the "'.concat(he,'" node in the graph.'));return"undirected"!==this.type&&(Se in $e.in||Se in $e.out)},Ye.areOutNeighbors=function(he,Se){Se=""+Se;var $e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.areOutNeighbors: could not find the "'.concat(he,'" node in the graph.'));return"undirected"!==this.type&&Se in $e.out},Ye.areInNeighbors=function(he,Se){Se=""+Se;var $e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.areInNeighbors: could not find the "'.concat(he,'" node in the graph.'));return"undirected"!==this.type&&Se in $e.in},Ye.areUndirectedNeighbors=function(he,Se){Se=""+Se;var $e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.areUndirectedNeighbors: could not find the "'.concat(he,'" node in the graph.'));return"directed"!==this.type&&Se in $e.undirected},Ye.areNeighbors=function(he,Se){Se=""+Se;var $e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.areNeighbors: could not find the "'.concat(he,'" node in the graph.'));return"undirected"!==this.type&&(Se in $e.in||Se in $e.out)||"directed"!==this.type&&Se in $e.undirected},Ye.areInboundNeighbors=function(he,Se){Se=""+Se;var $e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.areInboundNeighbors: could not find the "'.concat(he,'" node in the graph.'));return"undirected"!==this.type&&Se in $e.in||"directed"!==this.type&&Se in $e.undirected},Ye.areOutboundNeighbors=function(he,Se){Se=""+Se;var $e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.areOutboundNeighbors: could not find the "'.concat(he,'" node in the graph.'));return"undirected"!==this.type&&Se in $e.out||"directed"!==this.type&&Se in $e.undirected},Ye.inDegree=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.inDegree: could not find the "'.concat(he,'" node in the graph.'));return"undirected"===this.type?0:Se.inDegree},Ye.outDegree=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.outDegree: could not find the "'.concat(he,'" node in the graph.'));return"undirected"===this.type?0:Se.outDegree},Ye.directedDegree=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.directedDegree: could not find the "'.concat(he,'" node in the graph.'));return"undirected"===this.type?0:Se.inDegree+Se.outDegree},Ye.undirectedDegree=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.undirectedDegree: could not find the "'.concat(he,'" node in the graph.'));return"directed"===this.type?0:Se.undirectedDegree},Ye.inboundDegree=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.inboundDegree: could not find the "'.concat(he,'" node in the graph.'));var $e=0;return"directed"!==this.type&&($e+=Se.undirectedDegree),"undirected"!==this.type&&($e+=Se.inDegree),$e},Ye.outboundDegree=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.outboundDegree: could not find the "'.concat(he,'" node in the graph.'));var $e=0;return"directed"!==this.type&&($e+=Se.undirectedDegree),"undirected"!==this.type&&($e+=Se.outDegree),$e},Ye.degree=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.degree: could not find the "'.concat(he,'" node in the graph.'));var $e=0;return"directed"!==this.type&&($e+=Se.undirectedDegree),"undirected"!==this.type&&($e+=Se.inDegree+Se.outDegree),$e},Ye.inDegreeWithoutSelfLoops=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(he,'" node in the graph.'));if("undirected"===this.type)return 0;var $e=Se.in[he];return Se.inDegree-($e?this.multi?$e.size:1:0)},Ye.outDegreeWithoutSelfLoops=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(he,'" node in the graph.'));if("undirected"===this.type)return 0;var $e=Se.out[he];return Se.outDegree-($e?this.multi?$e.size:1:0)},Ye.directedDegreeWithoutSelfLoops=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(he,'" node in the graph.'));if("undirected"===this.type)return 0;var $e=Se.out[he];return Se.inDegree+Se.outDegree-2*($e?this.multi?$e.size:1:0)},Ye.undirectedDegreeWithoutSelfLoops=function(he){var Se=this._nodes.get(he=""+he);if(!Se)throw new je('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(he,'" node in the graph.'));if("directed"===this.type)return 0;var $e=Se.undirected[he];return Se.undirectedDegree-2*($e?this.multi?$e.size:1:0)},Ye.inboundDegreeWithoutSelfLoops=function(he){var Se,$e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(he,'" node in the graph.'));var _t=0,zt=0;return"directed"!==this.type&&(_t+=$e.undirectedDegree,zt+=2*((Se=$e.undirected[he])?this.multi?Se.size:1:0)),"undirected"!==this.type&&(_t+=$e.inDegree,zt+=(Se=$e.out[he])?this.multi?Se.size:1:0),_t-zt},Ye.outboundDegreeWithoutSelfLoops=function(he){var Se,$e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(he,'" node in the graph.'));var _t=0,zt=0;return"directed"!==this.type&&(_t+=$e.undirectedDegree,zt+=2*((Se=$e.undirected[he])?this.multi?Se.size:1:0)),"undirected"!==this.type&&(_t+=$e.outDegree,zt+=(Se=$e.in[he])?this.multi?Se.size:1:0),_t-zt},Ye.degreeWithoutSelfLoops=function(he){var Se,$e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.degreeWithoutSelfLoops: could not find the "'.concat(he,'" node in the graph.'));var _t=0,zt=0;return"directed"!==this.type&&(_t+=$e.undirectedDegree,zt+=2*((Se=$e.undirected[he])?this.multi?Se.size:1:0)),"undirected"!==this.type&&(_t+=$e.inDegree+$e.outDegree,zt+=2*((Se=$e.out[he])?this.multi?Se.size:1:0)),_t-zt},Ye.source=function(he){var Se=this._edges.get(he=""+he);if(!Se)throw new je('Graph.source: could not find the "'.concat(he,'" edge in the graph.'));return Se.source.key},Ye.target=function(he){var Se=this._edges.get(he=""+he);if(!Se)throw new je('Graph.target: could not find the "'.concat(he,'" edge in the graph.'));return Se.target.key},Ye.extremities=function(he){var Se=this._edges.get(he=""+he);if(!Se)throw new je('Graph.extremities: could not find the "'.concat(he,'" edge in the graph.'));return[Se.source.key,Se.target.key]},Ye.opposite=function(he,Se){he=""+he;var $e=this._edges.get(Se=""+Se);if(!$e)throw new je('Graph.opposite: could not find the "'.concat(Se,'" edge in the graph.'));var _t=$e.source.key,zt=$e.target.key;if(he===_t)return zt;if(he===zt)return _t;throw new je('Graph.opposite: the "'.concat(he,'" node is not attached to the "').concat(Se,'" edge (').concat(_t,", ").concat(zt,")."))},Ye.hasExtremity=function(he,Se){Se=""+Se;var $e=this._edges.get(he=""+he);if(!$e)throw new je('Graph.hasExtremity: could not find the "'.concat(he,'" edge in the graph.'));return $e.source.key===Se||$e.target.key===Se},Ye.isUndirected=function(he){var Se=this._edges.get(he=""+he);if(!Se)throw new je('Graph.isUndirected: could not find the "'.concat(he,'" edge in the graph.'));return Se.undirected},Ye.isDirected=function(he){var Se=this._edges.get(he=""+he);if(!Se)throw new je('Graph.isDirected: could not find the "'.concat(he,'" edge in the graph.'));return!Se.undirected},Ye.isSelfLoop=function(he){var Se=this._edges.get(he=""+he);if(!Se)throw new je('Graph.isSelfLoop: could not find the "'.concat(he,'" edge in the graph.'));return Se.source===Se.target},Ye.addNode=function(he,Se){return function(_t,zt,In){if(In&&!J(In))throw new yn('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(In,'"'));if(In=In||{},_t._nodes.has(zt=""+zt))throw new Ce('Graph.addNode: the "'.concat(zt,'" node already exist in the graph.'));var yi=new _t.NodeDataClass(zt,In);return _t._nodes.set(zt,yi),_t.emit("nodeAdded",{key:zt,attributes:In}),yi}(this,he,Se).key},Ye.mergeNode=function(he,Se){if(Se&&!J(Se))throw new yn('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(Se,'"'));Se=Se||{};var $e=this._nodes.get(he=""+he);return $e?(Se&&(O($e.attributes,Se),this.emit("nodeAttributesUpdated",{type:"merge",key:he,attributes:$e.attributes,data:Se})),[he,!1]):($e=new this.NodeDataClass(he,Se),this._nodes.set(he,$e),this.emit("nodeAdded",{key:he,attributes:Se}),[he,!0])},Ye.updateNode=function(he,Se){if(Se&&"function"!=typeof Se)throw new yn('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(Se,'"'));var $e=this._nodes.get(he=""+he);if($e)return Se&&($e.attributes=Se($e.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:he,attributes:$e.attributes})),[he,!1];var zt=Se?Se({}):{};return $e=new this.NodeDataClass(he,zt),this._nodes.set(he,$e),this.emit("nodeAdded",{key:he,attributes:zt}),[he,!0]},Ye.dropNode=function(he){var Se,$e=this._nodes.get(he=""+he);if(!$e)throw new je('Graph.dropNode: could not find the "'.concat(he,'" node in the graph.'));if("undirected"!==this.type){for(var _t in $e.out){Se=$e.out[_t];do{Sh(this,Se),Se=Se.next}while(Se)}for(var zt in $e.in){Se=$e.in[zt];do{Sh(this,Se),Se=Se.next}while(Se)}}if("directed"!==this.type)for(var In in $e.undirected){Se=$e.undirected[In];do{Sh(this,Se),Se=Se.next}while(Se)}this._nodes.delete(he),this.emit("nodeDropped",{key:he,attributes:$e.attributes})},Ye.dropEdge=function(he){var Se;if(arguments.length>1){var $e=""+arguments[0],_t=""+arguments[1];if(!(Se=q(this,$e,_t,this.type)))throw new je('Graph.dropEdge: could not find the "'.concat($e,'" -> "').concat(_t,'" edge in the graph.'))}else if(!(Se=this._edges.get(he=""+he)))throw new je('Graph.dropEdge: could not find the "'.concat(he,'" edge in the graph.'));return Sh(this,Se),this},Ye.dropDirectedEdge=function(he,Se){if(arguments.length<2)throw new Ce("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ce("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var $e=q(this,he=""+he,Se=""+Se,"directed");if(!$e)throw new je('Graph.dropDirectedEdge: could not find a "'.concat(he,'" -> "').concat(Se,'" edge in the graph.'));return Sh(this,$e),this},Ye.dropUndirectedEdge=function(he,Se){if(arguments.length<2)throw new Ce("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Ce("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var $e=q(this,he,Se,"undirected");if(!$e)throw new je('Graph.dropUndirectedEdge: could not find a "'.concat(he,'" -> "').concat(Se,'" edge in the graph.'));return Sh(this,$e),this},Ye.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},Ye.clearEdges=function(){for(var he,Se=this._nodes.values();!0!==(he=Se.next()).done;)he.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},Ye.getAttribute=function(he){return this._attributes[he]},Ye.getAttributes=function(){return this._attributes},Ye.hasAttribute=function(he){return this._attributes.hasOwnProperty(he)},Ye.setAttribute=function(he,Se){return this._attributes[he]=Se,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:he}),this},Ye.updateAttribute=function(he,Se){if("function"!=typeof Se)throw new yn("Graph.updateAttribute: updater should be a function.");return this._attributes[he]=Se(this._attributes[he]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:he}),this},Ye.removeAttribute=function(he){return delete this._attributes[he],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:he}),this},Ye.replaceAttributes=function(he){if(!J(he))throw new yn("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=he,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},Ye.mergeAttributes=function(he){if(!J(he))throw new yn("Graph.mergeAttributes: provided attributes are not a plain object.");return O(this._attributes,he),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:he}),this},Ye.updateAttributes=function(he){if("function"!=typeof he)throw new yn("Graph.updateAttributes: provided updater is not a function.");return this._attributes=he(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},Ye.updateEachNodeAttributes=function(he,Se){if("function"!=typeof he)throw new yn("Graph.updateEachNodeAttributes: expecting an updater function.");if(Se&&!U(Se))throw new yn("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var $e,_t,zt=this._nodes.values();!0!==($e=zt.next()).done;)(_t=$e.value).attributes=he(_t.key,_t.attributes);this.emit("eachNodeAttributesUpdated",{hints:Se||null})},Ye.updateEachEdgeAttributes=function(he,Se){if("function"!=typeof he)throw new yn("Graph.updateEachEdgeAttributes: expecting an updater function.");if(Se&&!U(Se))throw new yn("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var $e,_t,zt,In,yi=this._edges.values();!0!==($e=yi.next()).done;)zt=(_t=$e.value).source,_t.attributes=he(_t.key,_t.attributes,zt.key,(In=_t.target).key,zt.attributes,In.attributes,_t.undirected);this.emit("eachEdgeAttributesUpdated",{hints:Se||null})},Ye.forEachAdjacencyEntry=function(he){if("function"!=typeof he)throw new yn("Graph.forEachAdjacencyEntry: expecting a callback.");Pu(!1,!1,!1,this,he)},Ye.forEachAdjacencyEntryWithOrphans=function(he){if("function"!=typeof he)throw new yn("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Pu(!1,!1,!0,this,he)},Ye.forEachAssymetricAdjacencyEntry=function(he){if("function"!=typeof he)throw new yn("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Pu(!1,!0,!1,this,he)},Ye.forEachAssymetricAdjacencyEntryWithOrphans=function(he){if("function"!=typeof he)throw new yn("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Pu(!1,!0,!0,this,he)},Ye.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):xn(this._nodes.keys(),this._nodes.size)},Ye.forEachNode=function(he){if("function"!=typeof he)throw new yn("Graph.forEachNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values();!0!==(Se=_t.next()).done;)he(($e=Se.value).key,$e.attributes)},Ye.findNode=function(he){if("function"!=typeof he)throw new yn("Graph.findNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values();!0!==(Se=_t.next()).done;)if(he(($e=Se.value).key,$e.attributes))return $e.key},Ye.mapNodes=function(he){if("function"!=typeof he)throw new yn("Graph.mapNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values(),zt=new Array(this.order),In=0;!0!==(Se=_t.next()).done;)zt[In++]=he(($e=Se.value).key,$e.attributes);return zt},Ye.someNode=function(he){if("function"!=typeof he)throw new yn("Graph.someNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values();!0!==(Se=_t.next()).done;)if(he(($e=Se.value).key,$e.attributes))return!0;return!1},Ye.everyNode=function(he){if("function"!=typeof he)throw new yn("Graph.everyNode: expecting a callback.");for(var Se,$e,_t=this._nodes.values();!0!==(Se=_t.next()).done;)if(!he(($e=Se.value).key,$e.attributes))return!1;return!0},Ye.filterNodes=function(he){if("function"!=typeof he)throw new yn("Graph.filterNodes: expecting a callback.");for(var Se,$e,_t=this._nodes.values(),zt=[];!0!==(Se=_t.next()).done;)he(($e=Se.value).key,$e.attributes)&&zt.push($e.key);return zt},Ye.reduceNodes=function(he,Se){if("function"!=typeof he)throw new yn("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new yn("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var $e,_t,zt=Se,In=this._nodes.values();!0!==($e=In.next()).done;)zt=he(zt,(_t=$e.value).key,_t.attributes);return zt},Ye.nodeEntries=function(){var he=this._nodes.values();return new gt(function(){var Se=he.next();if(Se.done)return Se;var $e=Se.value;return{value:{node:$e.key,attributes:$e.attributes},done:!1}})},Ye.export=function(){var he=new Array(this._nodes.size),Se=0;this._nodes.forEach(function(_t,zt){var yi,ti;he[Se++]=(ti={key:zt},oe((yi=_t).attributes)||(ti.attributes=O({},yi.attributes)),ti)});var $e=new Array(this._edges.size);return Se=0,this._edges.forEach(function(_t,zt){var yi,ti;$e[Se++]=(ti={key:zt,source:(yi=_t).source.key,target:yi.target.key},oe(yi.attributes)||(ti.attributes=O({},yi.attributes)),yi.undirected&&(ti.undirected=!0),ti)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:he,edges:$e}},Ye.import=function(he){var Se,$e,_t,zt,In,yi=this,ti=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(te(he))return he.forEachNode(function(us,Xa){ti?yi.mergeNode(us,Xa):yi.addNode(us,Xa)}),he.forEachEdge(function(us,Xa,Ru,hs,ts,Mg,zp){ti?zp?yi.mergeUndirectedEdgeWithKey(us,Ru,hs,Xa):yi.mergeDirectedEdgeWithKey(us,Ru,hs,Xa):zp?yi.addUndirectedEdgeWithKey(us,Ru,hs,Xa):yi.addDirectedEdgeWithKey(us,Ru,hs,Xa)}),this;if(!J(he))throw new yn("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(he.attributes){if(!J(he.attributes))throw new yn("Graph.import: invalid attributes. Expecting a plain object.");ti?this.mergeAttributes(he.attributes):this.replaceAttributes(he.attributes)}if(he.nodes){if(_t=he.nodes,!Array.isArray(_t))throw new yn("Graph.import: invalid nodes. Expecting an array.");for(Se=0,$e=_t.length;Se<$e;Se++){ed(zt=_t[Se]);var mr=zt.key,dr=zt.attributes;ti?this.mergeNode(mr,dr):this.addNode(mr,dr)}}if(he.edges){if(_t=he.edges,!Array.isArray(_t))throw new yn("Graph.import: invalid edges. Expecting an array.");for(Se=0,$e=_t.length;Se<$e;Se++){hf(In=_t[Se]);var Gs=In.source,bo=In.target,xo=In.attributes,cs=In.undirected,Ia=void 0!==cs&&cs;"key"in In?(ti?Ia?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:Ia?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,In.key,Gs,bo,xo):(ti?Ia?this.mergeUndirectedEdge:this.mergeDirectedEdge:Ia?this.addUndirectedEdge:this.addDirectedEdge).call(this,Gs,bo,xo)}}return this},Ye.nullCopy=function(he){var Se=new it(O({},this._options,he));return Se.replaceAttributes(O({},this.getAttributes())),Se},Ye.emptyCopy=function(he){var Se=this.nullCopy(he);return this._nodes.forEach(function($e,_t){var zt=O({},$e.attributes);$e=new Se.NodeDataClass(_t,zt),Se._nodes.set(_t,$e)}),Se},Ye.copy=function(he){if("string"==typeof(he=he||{}).type&&he.type!==this.type&&"mixed"!==he.type)throw new Ce('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(he.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof he.multi&&he.multi!==this.multi&&!0!==he.multi)throw new Ce("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof he.allowSelfLoops&&he.allowSelfLoops!==this.allowSelfLoops&&!0!==he.allowSelfLoops)throw new Ce("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var Se,$e,_t=this.emptyCopy(he),zt=this._edges.values();!0!==(Se=zt.next()).done;)xc(_t,"copy",!1,($e=Se.value).undirected,$e.key,$e.source.key,$e.target.key,O({},$e.attributes));return _t},Ye.toJSON=function(){return this.export()},Ye.toString=function(){return"[object Graph]"},Ye.inspect=function(){var he=this,Se={};this._nodes.forEach(function(yi,ti){Se[ti]=yi.attributes});var $e={},_t={};this._edges.forEach(function(yi,ti){var di,mr=yi.undirected?"--":"->",dr="",sr=yi.source.key,Gs=yi.target.key;yi.undirected&&sr>Gs&&(di=sr,sr=Gs,Gs=di);var bo="(".concat(sr,")").concat(mr,"(").concat(Gs,")");ti.startsWith("geid_")?he.multi&&(void 0===_t[bo]?_t[bo]=0:_t[bo]++,dr+="".concat(_t[bo],". ")):dr+="[".concat(ti,"]: "),$e[dr+=bo]=yi.attributes});var zt={};for(var In in this)this.hasOwnProperty(In)&&!nh.has(In)&&"function"!=typeof this[In]&&"symbol"!==be(In)&&(zt[In]=this[In]);return zt.attributes=this._attributes,zt.nodes=Se,zt.edges=$e,se(zt,"constructor",this.constructor),zt},it}(xe.exports.EventEmitter);typeof Symbol<"u"&&(to.prototype[Symbol.for("nodejs.util.inspect.custom")]=to.prototype.inspect),[{name:function(Ge){return"".concat(Ge,"Edge")},generateKey:!0},{name:function(Ge){return"".concat(Ge,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(Ge){return"".concat(Ge,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(Ge){return"".concat(Ge,"EdgeWithKey")}},{name:function(Ge){return"".concat(Ge,"DirectedEdgeWithKey")},type:"directed"},{name:function(Ge){return"".concat(Ge,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(Ge){["add","merge","update"].forEach(function(it){var Ye=Ge.name(it),he="add"===it?xc:Tg;to.prototype[Ye]=Ge.generateKey?function(Se,$e,_t){return he(this,Ye,!0,"undirected"===(Ge.type||this.type),null,Se,$e,_t,"update"===it)}:function(Se,$e,_t,zt){return he(this,Ye,!1,"undirected"===(Ge.type||this.type),Se,$e,_t,zt,"update"===it)}})}),Ge=to,Pt.forEach(function(it){var Ye=it.name,he=it.attacher;he(Ge,Ye("Node"),0),he(Ge,Ye("Source"),1),he(Ge,Ye("Target"),2),he(Ge,Ye("Opposite"),3)}),function(Ge){un.forEach(function(it){var Ye=it.name,he=it.attacher;he(Ge,Ye("Edge"),"mixed"),he(Ge,Ye("DirectedEdge"),"directed"),he(Ge,Ye("UndirectedEdge"),"undirected")})}(to),function(Ge){Ot.forEach(function(it){var he,Se,$e,_t;$e=(he=it).type,_t=he.direction,Ge.prototype[Se=he.name]=function(zt,In){if("mixed"!==$e&&"mixed"!==this.type&&$e!==this.type)return[];if(!arguments.length)return ca(this,$e);if(1===arguments.length){var yi=this._nodes.get(zt=""+zt);if(void 0===yi)throw new je("Graph.".concat(Se,': could not find the "').concat(zt,'" node in the graph.'));return ql(this.multi,"mixed"===$e?this.type:$e,_t,yi)}if(2===arguments.length){In=""+In;var ti=this._nodes.get(zt=""+zt);if(!ti)throw new je("Graph.".concat(Se,':  could not find the "').concat(zt,'" source node in the graph.'));if(!this._nodes.has(In))throw new je("Graph.".concat(Se,':  could not find the "').concat(In,'" target node in the graph.'));return th($e,this.multi,_t,ti,In)}throw new yn("Graph.".concat(Se,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(Ye,he){var Se=he.name,$e=he.type,_t=he.direction,zt="forEach"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[zt]=function(di,mr,dr){if("mixed"===$e||"mixed"===this.type||$e===this.type){if(1===arguments.length)return er(!1,this,$e,dr=di);if(2===arguments.length){dr=mr;var sr=this._nodes.get(di=""+di);if(void 0===sr)throw new je("Graph.".concat(zt,': could not find the "').concat(di,'" node in the graph.'));return $l(!1,this.multi,"mixed"===$e?this.type:$e,_t,sr,dr)}if(3===arguments.length){mr=""+mr;var Gs=this._nodes.get(di=""+di);if(!Gs)throw new je("Graph.".concat(zt,':  could not find the "').concat(di,'" source node in the graph.'));if(!this._nodes.has(mr))throw new je("Graph.".concat(zt,':  could not find the "').concat(mr,'" target node in the graph.'));return Wf(!1,$e,this.multi,_t,Gs,mr,dr)}throw new yn("Graph.".concat(zt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var In="map"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[In]=function(){var di,mr=Array.prototype.slice.call(arguments),dr=mr.pop();if(0===mr.length){var sr=0;"directed"!==$e&&(sr+=this.undirectedSize),"undirected"!==$e&&(sr+=this.directedSize),di=new Array(sr);var Gs=0;mr.push(function(bo,xo,cs,Ia,us,Xa,Ru){di[Gs++]=dr(bo,xo,cs,Ia,us,Xa,Ru)})}else di=[],mr.push(function(bo,xo,cs,Ia,us,Xa,Ru){di.push(dr(bo,xo,cs,Ia,us,Xa,Ru))});return this[zt].apply(this,mr),di};var yi="filter"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[yi]=function(){var di=Array.prototype.slice.call(arguments),mr=di.pop(),dr=[];return di.push(function(sr,Gs,bo,xo,cs,Ia,us){mr(sr,Gs,bo,xo,cs,Ia,us)&&dr.push(sr)}),this[zt].apply(this,di),dr};var ti="reduce"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[ti]=function(){var di,mr,dr=Array.prototype.slice.call(arguments);if(dr.length<2||dr.length>4)throw new yn("Graph.".concat(ti,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(dr.length,")."));if("function"==typeof dr[dr.length-1]&&"function"!=typeof dr[dr.length-2])throw new yn("Graph.".concat(ti,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===dr.length?(di=dr[0],mr=dr[1],dr=[]):3===dr.length?(di=dr[1],mr=dr[2],dr=[dr[0]]):4===dr.length&&(di=dr[2],mr=dr[3],dr=[dr[0],dr[1]]);var sr=mr;return dr.push(function(Gs,bo,xo,cs,Ia,us,Xa){sr=di(sr,Gs,bo,xo,cs,Ia,us,Xa)}),this[zt].apply(this,dr),sr}}(Ge,it),function(Ye,he){var Se=he.name,$e=he.type,_t=he.direction,zt="find"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[zt]=function(ti,di,mr){if("mixed"!==$e&&"mixed"!==this.type&&$e!==this.type)return!1;if(1===arguments.length)return er(!0,this,$e,mr=ti);if(2===arguments.length){mr=di;var dr=this._nodes.get(ti=""+ti);if(void 0===dr)throw new je("Graph.".concat(zt,': could not find the "').concat(ti,'" node in the graph.'));return $l(!0,this.multi,"mixed"===$e?this.type:$e,_t,dr,mr)}if(3===arguments.length){di=""+di;var sr=this._nodes.get(ti=""+ti);if(!sr)throw new je("Graph.".concat(zt,':  could not find the "').concat(ti,'" source node in the graph.'));if(!this._nodes.has(di))throw new je("Graph.".concat(zt,':  could not find the "').concat(di,'" target node in the graph.'));return Wf(!0,$e,this.multi,_t,sr,di,mr)}throw new yn("Graph.".concat(zt,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var In="some"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[In]=function(){var ti=Array.prototype.slice.call(arguments),di=ti.pop();return ti.push(function(mr,dr,sr,Gs,bo,xo,cs){return di(mr,dr,sr,Gs,bo,xo,cs)}),!!this[zt].apply(this,ti)};var yi="every"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[yi]=function(){var ti=Array.prototype.slice.call(arguments),di=ti.pop();return ti.push(function(mr,dr,sr,Gs,bo,xo,cs){return!di(mr,dr,sr,Gs,bo,xo,cs)}),!this[zt].apply(this,ti)}}(Ge,it),function(Ye,he){var $e=he.type,_t=he.direction,zt=he.name.slice(0,-1)+"Entries";Ye.prototype[zt]=function(In,yi){if("mixed"!==$e&&"mixed"!==this.type&&$e!==this.type)return gt.empty();if(!arguments.length)return tl(this,$e);if(1===arguments.length){var ti=this._nodes.get(In=""+In);if(!ti)throw new je("Graph.".concat(zt,': could not find the "').concat(In,'" node in the graph.'));return Gf($e,_t,ti)}if(2===arguments.length){yi=""+yi;var di=this._nodes.get(In=""+In);if(!di)throw new je("Graph.".concat(zt,':  could not find the "').concat(In,'" source node in the graph.'));if(!this._nodes.has(yi))throw new je("Graph.".concat(zt,':  could not find the "').concat(yi,'" target node in the graph.'));return lc($e,_t,di,yi)}throw new yn("Graph.".concat(zt,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(Ge,it)})}(to),function(Ge){Ah.forEach(function(it){var Ye,he,Se,$e,_t,zt,In;(function Aa(Ge,it){var Ye=it.name,he=it.type,Se=it.direction;Ge.prototype[Ye]=function($e){if("mixed"!==he&&"mixed"!==this.type&&he!==this.type)return[];var _t=this._nodes.get($e=""+$e);if(void 0===_t)throw new je("Graph.".concat(Ye,': could not find the "').concat($e,'" node in the graph.'));return function(zt,In,yi){if("mixed"!==zt){if("undirected"===zt)return Object.keys(yi.undirected);if("string"==typeof In)return Object.keys(yi[In])}var ti=[];return Ld(!1,zt,In,yi,function(di){ti.push(di)}),ti}("mixed"===he?this.type:he,Se,_t)}})(Ge,it),function(Ye,he){var Se=he.name,$e=he.type,_t=he.direction,zt="forEach"+Se[0].toUpperCase()+Se.slice(1,-1);Ye.prototype[zt]=function(di,mr){if("mixed"===$e||"mixed"===this.type||$e===this.type){var dr=this._nodes.get(di=""+di);if(void 0===dr)throw new je("Graph.".concat(zt,': could not find the "').concat(di,'" node in the graph.'));Ld(!1,"mixed"===$e?this.type:$e,_t,dr,mr)}};var In="map"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[In]=function(di,mr){var dr=[];return this[zt](di,function(sr,Gs){dr.push(mr(sr,Gs))}),dr};var yi="filter"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[yi]=function(di,mr){var dr=[];return this[zt](di,function(sr,Gs){mr(sr,Gs)&&dr.push(sr)}),dr};var ti="reduce"+Se[0].toUpperCase()+Se.slice(1);Ye.prototype[ti]=function(di,mr,dr){if(arguments.length<3)throw new yn("Graph.".concat(ti,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var sr=dr;return this[zt](di,function(Gs,bo){sr=mr(sr,Gs,bo)}),sr}}(Ge,it),Ye=Ge,$e=(he=it).type,_t=he.direction,zt=(Se=he.name)[0].toUpperCase()+Se.slice(1,-1),Ye.prototype[In="find"+zt]=function(di,mr){if("mixed"===$e||"mixed"===this.type||$e===this.type){var dr=this._nodes.get(di=""+di);if(void 0===dr)throw new je("Graph.".concat(In,': could not find the "').concat(di,'" node in the graph.'));return Ld(!0,"mixed"===$e?this.type:$e,_t,dr,mr)}},Ye.prototype["some"+zt]=function(di,mr){return!!this[In](di,mr)},Ye.prototype["every"+zt]=function(di,mr){return!this[In](di,function(dr,sr){return!mr(dr,sr)})},function Ih(Ge,it){var he=it.type,Se=it.direction,$e=it.name.slice(0,-1)+"Entries";Ge.prototype[$e]=function(_t){if("mixed"!==he&&"mixed"!==this.type&&he!==this.type)return gt.empty();var zt=this._nodes.get(_t=""+_t);if(void 0===zt)throw new je("Graph.".concat($e,': could not find the "').concat(_t,'" node in the graph.'));return function(In,yi,ti){if("mixed"!==In){if("undirected"===In)return cu(null,ti,ti.undirected);if("string"==typeof yi)return cu(null,ti,ti[yi])}var di=gt.empty(),mr=new Lu;return"undirected"!==In&&("out"!==yi&&(di=Me(di,cu(mr,ti,ti.in))),"in"!==yi&&(di=Me(di,cu(mr,ti,ti.out)))),"directed"!==In&&(di=Me(di,cu(mr,ti,ti.undirected))),di}("mixed"===he?this.type:he,Se,zt)}}(Ge,it)})}(to);var pf=function(Ge){function it(Ye){var he=O({type:"directed"},Ye);if("multi"in he&&!1!==he.multi)throw new yn("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==he.type)throw new yn('DirectedGraph.from: inconsistent "'+he.type+'" type in given options!');return Ge.call(this,he)||this}return V(it,Ge),it}(to),fl=function(Ge){function it(Ye){var he=O({type:"undirected"},Ye);if("multi"in he&&!1!==he.multi)throw new yn("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==he.type)throw new yn('UndirectedGraph.from: inconsistent "'+he.type+'" type in given options!');return Ge.call(this,he)||this}return V(it,Ge),it}(to),wc=function(Ge){function it(Ye){var he=O({multi:!0},Ye);if("multi"in he&&!0!==he.multi)throw new yn("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return Ge.call(this,he)||this}return V(it,Ge),it}(to),nl=function(Ge){function it(Ye){var he=O({type:"directed",multi:!0},Ye);if("multi"in he&&!0!==he.multi)throw new yn("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==he.type)throw new yn('MultiDirectedGraph.from: inconsistent "'+he.type+'" type in given options!');return Ge.call(this,he)||this}return V(it,Ge),it}(to),jf=function(Ge){function it(Ye){var he=O({type:"undirected",multi:!0},Ye);if("multi"in he&&!0!==he.multi)throw new yn("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==he.type)throw new yn('MultiUndirectedGraph.from: inconsistent "'+he.type+'" type in given options!');return Ge.call(this,he)||this}return V(it,Ge),it}(to);function nd(Ge){Ge.from=function(it,Ye){var he=O({},it.options,Ye),Se=new Ge(he);return Se.import(it),Se}}return nd(to),nd(pf),nd(fl),nd(wc),nd(nl),nd(jf),to.Graph=to,to.DirectedGraph=pf,to.UndirectedGraph=fl,to.MultiGraph=wc,to.MultiDirectedGraph=nl,to.MultiUndirectedGraph=jf,to.InvalidArgumentsGraphError=yn,to.NotFoundGraphError=je,to.UsageGraphError=Ce,to}()},5203:(Be,be,V)=>{Be.exports=V(8732)},8732:function(Be,be){var V,Y,D;(function(){var H,B,W,P,O,q,te,J,oe,se,Q,U,ae,xe,Oe;W=Math.floor,se=Math.min,B=function(re,ue){return re<ue?-1:re>ue?1:0},oe=function(re,ue,z,$,ne){var ge;if(null==z&&(z=0),null==ne&&(ne=B),z<0)throw new Error("lo must be non-negative");for(null==$&&($=re.length);z<$;)ne(ue,re[ge=W((z+$)/2)])<0?$=ge:z=ge+1;return[].splice.apply(re,[z,z-z].concat(ue)),ue},q=function(re,ue,z){return null==z&&(z=B),re.push(ue),xe(re,0,re.length-1,z)},O=function(re,ue){var z,$;return null==ue&&(ue=B),z=re.pop(),re.length?($=re[0],re[0]=z,Oe(re,0,ue)):$=z,$},J=function(re,ue,z){var $;return null==z&&(z=B),$=re[0],re[0]=ue,Oe(re,0,z),$},te=function(re,ue,z){var $;return null==z&&(z=B),re.length&&z(re[0],ue)<0&&(ue=($=[re[0],ue])[0],re[0]=$[1],Oe(re,0,z)),ue},P=function(re,ue){var $,ge,Re,rt,Pe;for(null==ue&&(ue=B),rt=[],$=0,ge=(Re=function(){Pe=[];for(var at=0,xt=W(re.length/2);0<=xt?at<xt:at>xt;0<=xt?at++:at--)Pe.push(at);return Pe}.apply(this).reverse()).length;$<ge;$++)rt.push(Oe(re,Re[$],ue));return rt},ae=function(re,ue,z){var $;if(null==z&&(z=B),-1!==($=re.indexOf(ue)))return xe(re,0,$,z),Oe(re,$,z)},Q=function(re,ue,z){var ne,ge,Ue,Re;if(null==z&&(z=B),!(ne=re.slice(0,ue)).length)return ne;for(P(ne,z),ge=0,Ue=(Re=re.slice(ue)).length;ge<Ue;ge++)te(ne,Re[ge],z);return ne.sort(z).reverse()},U=function(re,ue,z){var $,ge,Ue,Re,rt,Pe,at,xt,He;if(null==z&&(z=B),10*ue<=re.length){if(!(Ue=re.slice(0,ue).sort(z)).length)return Ue;for(ge=Ue[Ue.length-1],Re=0,Pe=(at=re.slice(ue)).length;Re<Pe;Re++)z($=at[Re],ge)<0&&(oe(Ue,$,0,null,z),Ue.pop(),ge=Ue[Ue.length-1]);return Ue}for(P(re,z),He=[],rt=0,xt=se(ue,re.length);0<=xt?rt<xt:rt>xt;0<=xt?++rt:--rt)He.push(O(re,z));return He},xe=function(re,ue,z,$){var ne,ge,Ue;for(null==$&&($=B),ne=re[z];z>ue&&$(ne,ge=re[Ue=z-1>>1])<0;)re[z]=ge,z=Ue;return re[z]=ne},Oe=function(re,ue,z){var $,ne,ge,Ue,Re;for(null==z&&(z=B),ne=re.length,Re=ue,ge=re[ue],$=2*ue+1;$<ne;)(Ue=$+1)<ne&&!(z(re[$],re[Ue])<0)&&($=Ue),re[ue]=re[$],$=2*(ue=$)+1;return re[ue]=ge,xe(re,Re,ue,z)},H=function(){function re(ue){this.cmp=ue??B,this.nodes=[]}return re.push=q,re.pop=O,re.replace=J,re.pushpop=te,re.heapify=P,re.updateItem=ae,re.nlargest=Q,re.nsmallest=U,re.prototype.push=function(ue){return q(this.nodes,ue,this.cmp)},re.prototype.pop=function(){return O(this.nodes,this.cmp)},re.prototype.peek=function(){return this.nodes[0]},re.prototype.contains=function(ue){return-1!==this.nodes.indexOf(ue)},re.prototype.replace=function(ue){return J(this.nodes,ue,this.cmp)},re.prototype.pushpop=function(ue){return te(this.nodes,ue,this.cmp)},re.prototype.heapify=function(){return P(this.nodes,this.cmp)},re.prototype.updateItem=function(ue){return ae(this.nodes,ue,this.cmp)},re.prototype.clear=function(){return this.nodes=[]},re.prototype.empty=function(){return 0===this.nodes.length},re.prototype.size=function(){return this.nodes.length},re.prototype.clone=function(){var ue;return(ue=new re).nodes=this.nodes.slice(0),ue},re.prototype.toArray=function(){return this.nodes.slice(0)},re.prototype.insert=re.prototype.push,re.prototype.top=re.prototype.peek,re.prototype.front=re.prototype.peek,re.prototype.has=re.prototype.contains,re.prototype.copy=re.prototype.clone,re}(),Y=[],void 0===(D="function"==typeof(V=function(){return H})?V.apply(be,Y):V)||(Be.exports=D)}).call(this)},8461:(Be,be)=>{be.read=function(V,Y,D,H,B){var W,P,O=8*B-H-1,q=(1<<O)-1,te=q>>1,J=-7,oe=D?B-1:0,se=D?-1:1,Q=V[Y+oe];for(oe+=se,W=Q&(1<<-J)-1,Q>>=-J,J+=O;J>0;W=256*W+V[Y+oe],oe+=se,J-=8);for(P=W&(1<<-J)-1,W>>=-J,J+=H;J>0;P=256*P+V[Y+oe],oe+=se,J-=8);if(0===W)W=1-te;else{if(W===q)return P?NaN:1/0*(Q?-1:1);P+=Math.pow(2,H),W-=te}return(Q?-1:1)*P*Math.pow(2,W-H)},be.write=function(V,Y,D,H,B,W){var P,O,q,te=8*W-B-1,J=(1<<te)-1,oe=J>>1,se=23===B?Math.pow(2,-24)-Math.pow(2,-77):0,Q=H?0:W-1,U=H?1:-1,ae=Y<0||0===Y&&1/Y<0?1:0;for(Y=Math.abs(Y),isNaN(Y)||Y===1/0?(O=isNaN(Y)?1:0,P=J):(P=Math.floor(Math.log(Y)/Math.LN2),Y*(q=Math.pow(2,-P))<1&&(P--,q*=2),(Y+=P+oe>=1?se/q:se*Math.pow(2,1-oe))*q>=2&&(P++,q/=2),P+oe>=J?(O=0,P=J):P+oe>=1?(O=(Y*q-1)*Math.pow(2,B),P+=oe):(O=Y*Math.pow(2,oe-1)*Math.pow(2,B),P=0));B>=8;V[D+Q]=255&O,Q+=U,O/=256,B-=8);for(P=P<<B|O,te+=B;te>0;V[D+Q]=255&P,Q+=U,P/=256,te-=8);V[D+Q-U]|=128*ae}},3894:Be=>{Be.exports="function"==typeof Object.create?function(V,Y){Y&&(V.super_=Y,V.prototype=Object.create(Y.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}))}:function(V,Y){if(Y){V.super_=Y;var D=function(){};D.prototype=Y.prototype,V.prototype=new D,V.prototype.constructor=V}}},3353:(Be,be,V)=>{"use strict";function Y(z){var $=Array.prototype.slice.call(arguments,1);return $.forEach(function(ne){!ne||Object.keys(ne).forEach(function(ge){z[ge]=ne[ge]})}),z}function D(z){return Object.prototype.toString.call(z)}function P(z){return"[object Function]"===D(z)}function O(z){return z.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var q={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1},J={"http:":{validate:function(z,$,ne){var ge=z.slice($);return ne.re.http||(ne.re.http=new RegExp("^\\/\\/"+ne.re.src_auth+ne.re.src_host_port_strict+ne.re.src_path,"i")),ne.re.http.test(ge)?ge.match(ne.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(z,$,ne){var ge=z.slice($);return ne.re.no_http||(ne.re.no_http=new RegExp("^"+ne.re.src_auth+"(?:localhost|(?:(?:"+ne.re.src_domain+")\\.)+"+ne.re.src_domain_root+")"+ne.re.src_port+ne.re.src_host_terminator+ne.re.src_path,"i")),ne.re.no_http.test(ge)?$>=3&&":"===z[$-3]||$>=3&&"/"===z[$-3]?0:ge.match(ne.re.no_http)[0].length:0}},"mailto:":{validate:function(z,$,ne){var ge=z.slice($);return ne.re.mailto||(ne.re.mailto=new RegExp("^"+ne.re.src_email_name+"@"+ne.re.src_host_strict,"i")),ne.re.mailto.test(ge)?ge.match(ne.re.mailto)[0].length:0}}},se="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function xe(z){var $=z.re=V(9234)(z.__opts__),ne=z.__tlds__.slice();function ge(Pe){return Pe.replace("%TLDS%",$.src_tlds)}z.onCompile(),z.__tlds_replaced__||ne.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),ne.push($.src_xn),$.src_tlds=ne.join("|"),$.email_fuzzy=RegExp(ge($.tpl_email_fuzzy),"i"),$.link_fuzzy=RegExp(ge($.tpl_link_fuzzy),"i"),$.link_no_ip_fuzzy=RegExp(ge($.tpl_link_no_ip_fuzzy),"i"),$.host_fuzzy_test=RegExp(ge($.tpl_host_fuzzy_test),"i");var Ue=[];function Re(Pe,at){throw new Error('(LinkifyIt) Invalid schema "'+Pe+'": '+at)}z.__compiled__={},Object.keys(z.__schemas__).forEach(function(Pe){var at=z.__schemas__[Pe];if(null!==at){var xt={validate:null,link:null};if(z.__compiled__[Pe]=xt,function B(z){return"[object Object]"===D(z)}(at))return function W(z){return"[object RegExp]"===D(z)}(at.validate)?xt.validate=function U(z){return function($,ne){var ge=$.slice(ne);return z.test(ge)?ge.match(z)[0].length:0}}(at.validate):P(at.validate)?xt.validate=at.validate:Re(Pe,at),void(P(at.normalize)?xt.normalize=at.normalize:at.normalize?Re(Pe,at):xt.normalize=function(z,$){$.normalize(z)});if(function H(z){return"[object String]"===D(z)}(at))return void Ue.push(Pe);Re(Pe,at)}}),Ue.forEach(function(Pe){!z.__compiled__[z.__schemas__[Pe]]||(z.__compiled__[Pe].validate=z.__compiled__[z.__schemas__[Pe]].validate,z.__compiled__[Pe].normalize=z.__compiled__[z.__schemas__[Pe]].normalize)}),z.__compiled__[""]={validate:null,normalize:function(z,$){$.normalize(z)}};var rt=Object.keys(z.__compiled__).filter(function(Pe){return Pe.length>0&&z.__compiled__[Pe]}).map(O).join("|");z.re.schema_test=RegExp("(^|(?!_)(?:[><\uff5c]|"+$.src_ZPCc+"))("+rt+")","i"),z.re.schema_search=RegExp("(^|(?!_)(?:[><\uff5c]|"+$.src_ZPCc+"))("+rt+")","ig"),z.re.schema_at_start=RegExp("^"+z.re.schema_search.source,"i"),z.re.pretest=RegExp("("+z.re.schema_test.source+")|("+z.re.host_fuzzy_test.source+")|@","i"),function Q(z){z.__index__=-1,z.__text_cache__=""}(z)}function Oe(z,$){var ne=z.__index__,ge=z.__last_index__,Ue=z.__text_cache__.slice(ne,ge);this.schema=z.__schema__.toLowerCase(),this.index=ne+$,this.lastIndex=ge+$,this.raw=Ue,this.text=Ue,this.url=Ue}function re(z,$){var ne=new Oe(z,$);return z.__compiled__[ne.schema].normalize(ne,z),ne}function ue(z,$){if(!(this instanceof ue))return new ue(z,$);$||function te(z){return Object.keys(z||{}).reduce(function($,ne){return $||q.hasOwnProperty(ne)},!1)}(z)&&($=z,z={}),this.__opts__=Y({},q,$),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Y({},J,z),this.__compiled__={},this.__tlds__=se,this.__tlds_replaced__=!1,this.re={},xe(this)}ue.prototype.add=function($,ne){return this.__schemas__[$]=ne,xe(this),this},ue.prototype.set=function($){return this.__opts__=Y(this.__opts__,$),this},ue.prototype.test=function($){if(this.__text_cache__=$,this.__index__=-1,!$.length)return!1;var ne,ge,Ue,Re,rt,Pe,at,xt;if(this.re.schema_test.test($))for((at=this.re.schema_search).lastIndex=0;null!==(ne=at.exec($));)if(Re=this.testSchemaAt($,ne[2],at.lastIndex)){this.__schema__=ne[2],this.__index__=ne.index+ne[1].length,this.__last_index__=ne.index+ne[0].length+Re;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(xt=$.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||xt<this.__index__)&&null!==(ge=$.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(rt=ge.index+ge[1].length,(this.__index__<0||rt<this.__index__)&&(this.__schema__="",this.__index__=rt,this.__last_index__=ge.index+ge[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&$.indexOf("@")>=0&&null!==(Ue=$.match(this.re.email_fuzzy))&&(rt=Ue.index+Ue[1].length,Pe=Ue.index+Ue[0].length,(this.__index__<0||rt<this.__index__||rt===this.__index__&&Pe>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=rt,this.__last_index__=Pe)),this.__index__>=0},ue.prototype.pretest=function($){return this.re.pretest.test($)},ue.prototype.testSchemaAt=function($,ne,ge){return this.__compiled__[ne.toLowerCase()]?this.__compiled__[ne.toLowerCase()].validate($,ge,this):0},ue.prototype.match=function($){var ne=0,ge=[];this.__index__>=0&&this.__text_cache__===$&&(ge.push(re(this,ne)),ne=this.__last_index__);for(var Ue=ne?$.slice(ne):$;this.test(Ue);)ge.push(re(this,ne)),Ue=Ue.slice(this.__last_index__),ne+=this.__last_index__;return ge.length?ge:null},ue.prototype.matchAtStart=function($){if(this.__text_cache__=$,this.__index__=-1,!$.length)return null;var ne=this.re.schema_at_start.exec($);if(!ne)return null;var ge=this.testSchemaAt($,ne[2],ne[0].length);return ge?(this.__schema__=ne[2],this.__index__=ne.index+ne[1].length,this.__last_index__=ne.index+ne[0].length+ge,re(this,0)):null},ue.prototype.tlds=function($,ne){return $=Array.isArray($)?$:[$],ne?(this.__tlds__=this.__tlds__.concat($).sort().filter(function(ge,Ue,Re){return ge!==Re[Ue-1]}).reverse(),xe(this),this):(this.__tlds__=$.slice(),this.__tlds_replaced__=!0,xe(this),this)},ue.prototype.normalize=function($){$.schema||($.url="http://"+$.url),"mailto:"===$.schema&&!/^mailto:/i.test($.url)&&($.url="mailto:"+$.url)},ue.prototype.onCompile=function(){},Be.exports=ue},9234:(Be,be,V)=>{"use strict";Be.exports=function(Y){var D={};Y=Y||{},D.src_Any=V(1129).source,D.src_Cc=V(9699).source,D.src_Z=V(5450).source,D.src_P=V(6020).source,D.src_ZPCc=[D.src_Z,D.src_P,D.src_Cc].join("|"),D.src_ZCc=[D.src_Z,D.src_Cc].join("|");return D.src_pseudo_letter="(?:(?![><\uff5c]|"+D.src_ZPCc+")"+D.src_Any+")",D.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",D.src_auth="(?:(?:(?!"+D.src_ZCc+"|[@/\\[\\]()]).)+@)?",D.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",D.src_host_terminator="(?=$|[><\uff5c]|"+D.src_ZPCc+")(?!"+(Y["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+D.src_ZPCc+"))",D.src_path="(?:[/?#](?:(?!"+D.src_ZCc+"|[><\uff5c]|[()[\\]{}.,\"'?!\\-;]).|\\[(?:(?!"+D.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+D.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+D.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+D.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+D.src_ZCc+"|[']).)+\\'|\\'(?="+D.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+D.src_ZCc+"|[.]|$)|"+(Y["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+D.src_ZCc+"|$)|;(?!"+D.src_ZCc+"|$)|\\!+(?!"+D.src_ZCc+"|[!]|$)|\\?(?!"+D.src_ZCc+"|[?]|$))+|\\/)?",D.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',D.src_xn="xn--[a-z0-9\\-]{1,59}",D.src_domain_root="(?:"+D.src_xn+"|"+D.src_pseudo_letter+"{1,63})",D.src_domain="(?:"+D.src_xn+"|(?:"+D.src_pseudo_letter+")|(?:"+D.src_pseudo_letter+"(?:-|"+D.src_pseudo_letter+"){0,61}"+D.src_pseudo_letter+"))",D.src_host="(?:(?:(?:(?:"+D.src_domain+")\\.)*"+D.src_domain+"))",D.tpl_host_fuzzy="(?:"+D.src_ip4+"|(?:(?:(?:"+D.src_domain+")\\.)+(?:%TLDS%)))",D.tpl_host_no_ip_fuzzy="(?:(?:(?:"+D.src_domain+")\\.)+(?:%TLDS%))",D.src_host_strict=D.src_host+D.src_host_terminator,D.tpl_host_fuzzy_strict=D.tpl_host_fuzzy+D.src_host_terminator,D.src_host_port_strict=D.src_host+D.src_port+D.src_host_terminator,D.tpl_host_port_fuzzy_strict=D.tpl_host_fuzzy+D.src_port+D.src_host_terminator,D.tpl_host_port_no_ip_fuzzy_strict=D.tpl_host_no_ip_fuzzy+D.src_port+D.src_host_terminator,D.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+D.src_ZPCc+"|>|$))",D.tpl_email_fuzzy='(^|[><\uff5c]|"|\\(|'+D.src_ZCc+")("+D.src_email_name+"@"+D.tpl_host_fuzzy_strict+")",D.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+D.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+D.tpl_host_port_fuzzy_strict+D.src_path+")",D.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uff5c]|"+D.src_ZPCc+"))((?![$+<=>^`|\uff5c])"+D.tpl_host_port_no_ip_fuzzy_strict+D.src_path+")",D}},8132:Be=>{var un,V="__lodash_hash_undefined__",B=/^\[object .+?Constructor\]$/,W="object"==typeof global&&global&&global.Object===Object&&global,P="object"==typeof self&&self&&self.Object===Object&&self,O=W||P||Function("return this")(),J=Array.prototype,oe=Function.prototype,se=Object.prototype,Q=O["__core-js_shared__"],U=(un=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+un:"",ae=oe.toString,xe=se.hasOwnProperty,Oe=se.toString,re=RegExp("^"+ae.call(xe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=J.splice,z=je(O,"Map"),$=je(Object,"create");function ne(un){var Je=-1,Te=un?un.length:0;for(this.clear();++Je<Te;){var Me=un[Je];this.set(Me[0],Me[1])}}function at(un){var Je=-1,Te=un?un.length:0;for(this.clear();++Je<Te;){var Me=un[Je];this.set(Me[0],Me[1])}}function kn(un){var Je=-1,Te=un?un.length:0;for(this.clear();++Je<Te;){var Me=un[Je];this.set(Me[0],Me[1])}}function xn(un,Je){for(var Te=un.length;Te--;)if($i(un[Te][0],Je))return Te;return-1}function yn(un,Je){var Te=un.__data__;return function Ce(un){var Je=typeof un;return"string"==Je||"number"==Je||"symbol"==Je||"boolean"==Je?"__proto__"!==un:null===un}(Je)?Te["string"==typeof Je?"string":"hash"]:Te.map}function je(un,Je){var Te=function q(un,Je){return un?.[Je]}(un,Je);return function bn(un){if(!Pt(un)||function Dt(un){return!!U&&U in un}(un))return!1;var Je=function At(un){var Je=Pt(un)?Oe.call(un):"";return"[object Function]"==Je||"[object GeneratorFunction]"==Je}(un)||function te(un){var Je=!1;if(null!=un&&"function"!=typeof un.toString)try{Je=!!(un+"")}catch{}return Je}(un)?re:B;return Je.test(function Rt(un){if(null!=un){try{return ae.call(un)}catch{}try{return un+""}catch{}}return""}(un))}(Te)?Te:void 0}function ci(un,Je){if("function"!=typeof un||Je&&"function"!=typeof Je)throw new TypeError("Expected a function");var Te=function(){var Me=arguments,Ot=Je?Je.apply(this,Me):Me[0],vn=Te.cache;if(vn.has(Ot))return vn.get(Ot);var ii=un.apply(this,Me);return Te.cache=vn.set(Ot,ii),ii};return Te.cache=new(ci.Cache||kn),Te}function $i(un,Je){return un===Je||un!=un&&Je!=Je}function Pt(un){var Je=typeof un;return!!un&&("object"==Je||"function"==Je)}ne.prototype.clear=function ge(){this.__data__=$?$(null):{}},ne.prototype.delete=function Ue(un){return this.has(un)&&delete this.__data__[un]},ne.prototype.get=function Re(un){var Je=this.__data__;if($){var Te=Je[un];return Te===V?void 0:Te}return xe.call(Je,un)?Je[un]:void 0},ne.prototype.has=function rt(un){var Je=this.__data__;return $?void 0!==Je[un]:xe.call(Je,un)},ne.prototype.set=function Pe(un,Je){return this.__data__[un]=$&&void 0===Je?V:Je,this},at.prototype.clear=function xt(){this.__data__=[]},at.prototype.delete=function He(un){var Je=this.__data__,Te=xn(Je,un);return!(Te<0||(Te==Je.length-1?Je.pop():ue.call(Je,Te,1),0))},at.prototype.get=function ft(un){var Je=this.__data__,Te=xn(Je,un);return Te<0?void 0:Je[Te][1]},at.prototype.has=function gt(un){return xn(this.__data__,un)>-1},at.prototype.set=function Ct(un,Je){var Te=this.__data__,Me=xn(Te,un);return Me<0?Te.push([un,Je]):Te[Me][1]=Je,this},kn.prototype.clear=function Ut(){this.__data__={hash:new ne,map:new(z||at),string:new ne}},kn.prototype.delete=function Dn(un){return yn(this,un).delete(un)},kn.prototype.get=function Jt(un){return yn(this,un).get(un)},kn.prototype.has=function nn(un){return yn(this,un).has(un)},kn.prototype.set=function Ln(un,Je){return yn(this,un).set(un,Je),this},ci.Cache=kn,Be.exports=ci},8078:Be=>{var be="Expected a function",D=/^\s+|\s+$/g,H=/^[-+]0x[0-9a-f]+$/i,B=/^0b[01]+$/i,W=/^0o[0-7]+$/i,P=parseInt,O="object"==typeof global&&global&&global.Object===Object&&global,q="object"==typeof self&&self&&self.Object===Object&&self,te=O||q||Function("return this")(),oe=Object.prototype.toString,se=Math.max,Q=Math.min,U=function(){return te.Date.now()};function Oe($){var ne=typeof $;return!!$&&("object"==ne||"function"==ne)}function z($){if("number"==typeof $)return $;if(function ue($){return"symbol"==typeof $||function re($){return!!$&&"object"==typeof $}($)&&"[object Symbol]"==oe.call($)}($))return NaN;if(Oe($)){var ne="function"==typeof $.valueOf?$.valueOf():$;$=Oe(ne)?ne+"":ne}if("string"!=typeof $)return 0===$?$:+$;$=$.replace(D,"");var ge=B.test($);return ge||W.test($)?P($.slice(2),ge?2:8):H.test($)?NaN:+$}Be.exports=function xe($,ne,ge){var Ue=!0,Re=!0;if("function"!=typeof $)throw new TypeError(be);return Oe(ge)&&(Ue="leading"in ge?!!ge.leading:Ue,Re="trailing"in ge?!!ge.trailing:Re),function ae($,ne,ge){var Ue,Re,rt,Pe,at,xt,He=0,ft=!1,gt=!1,Ct=!0;if("function"!=typeof $)throw new TypeError(be);function kn(je){var Ce=Ue,Dt=Re;return Ue=Re=void 0,He=je,Pe=$.apply(Dt,Ce)}function Ut(je){return He=je,at=setTimeout(nn,ne),ft?kn(je):Pe}function Jt(je){var Ce=je-xt;return void 0===xt||Ce>=ne||Ce<0||gt&&je-He>=rt}function nn(){var je=U();if(Jt(je))return Ln(je);at=setTimeout(nn,function Dn(je){var Rt=ne-(je-xt);return gt?Q(Rt,rt-(je-He)):Rt}(je))}function Ln(je){return at=void 0,Ct&&Ue?kn(je):(Ue=Re=void 0,Pe)}function yn(){var je=U(),Ce=Jt(je);if(Ue=arguments,Re=this,xt=je,Ce){if(void 0===at)return Ut(xt);if(gt)return at=setTimeout(nn,ne),kn(xt)}return void 0===at&&(at=setTimeout(nn,ne)),Pe}return ne=z(ne)||0,Oe(ge)&&(ft=!!ge.leading,rt=(gt="maxWait"in ge)?se(z(ge.maxWait)||0,ne):rt,Ct="trailing"in ge?!!ge.trailing:Ct),yn.cancel=function xn(){void 0!==at&&clearTimeout(at),He=0,Ue=xt=Re=at=void 0},yn.flush=function bn(){return void 0===at?Pe:Ln(U())},yn}($,ne,{leading:Ue,maxWait:ne,trailing:Re})}},4994:(Be,be,V)=>{var Y=V(4312),D=V(6421),H=V(5764),B=V(8685),W=V(6676);function P(O){var q=-1,te=null==O?0:O.length;for(this.clear();++q<te;){var J=O[q];this.set(J[0],J[1])}}P.prototype.clear=Y,P.prototype.delete=D,P.prototype.get=H,P.prototype.has=B,P.prototype.set=W,Be.exports=P},9215:(Be,be,V)=>{var Y=V(1840),D=V(4378),H=V(4981),B=V(7343),W=V(8895);function P(O){var q=-1,te=null==O?0:O.length;for(this.clear();++q<te;){var J=O[q];this.set(J[0],J[1])}}P.prototype.clear=Y,P.prototype.delete=D,P.prototype.get=H,P.prototype.has=B,P.prototype.set=W,Be.exports=P},1501:(Be,be,V)=>{var H=V(3436)(V(2119),"Map");Be.exports=H},9850:(Be,be,V)=>{var Y=V(638),D=V(1184),H=V(866),B=V(3771),W=V(1772);function P(O){var q=-1,te=null==O?0:O.length;for(this.clear();++q<te;){var J=O[q];this.set(J[0],J[1])}}P.prototype.clear=Y,P.prototype.delete=D,P.prototype.get=H,P.prototype.has=B,P.prototype.set=W,Be.exports=P},443:(Be,be,V)=>{var Y=V(2119);Be.exports=Y.Symbol},4633:Be=>{Be.exports=function be(V,Y){for(var D=-1,H=null==V?0:V.length,B=Array(H);++D<H;)B[D]=Y(V[D],D,V);return B}},9719:(Be,be,V)=>{var Y=V(5683),D=V(217),B=Object.prototype.hasOwnProperty;Be.exports=function W(P,O,q){var te=P[O];(!B.call(P,O)||!D(te,q)||void 0===q&&!(O in P))&&Y(P,O,q)}},3503:(Be,be,V)=>{var Y=V(217);Be.exports=function D(H,B){for(var W=H.length;W--;)if(Y(H[W][0],B))return W;return-1}},5683:(Be,be,V)=>{var Y=V(6713);Be.exports=function D(H,B,W){"__proto__"==B&&Y?Y(H,B,{configurable:!0,enumerable:!0,value:W,writable:!0}):H[B]=W}},5456:(Be,be,V)=>{var Y=V(6884),D=V(8533);Be.exports=function H(B,W){for(var P=0,O=(W=Y(W,B)).length;null!=B&&P<O;)B=B[D(W[P++])];return P&&P==O?B:void 0}},3337:(Be,be,V)=>{var Y=V(443),D=V(1318),H=V(2902),P=Y?Y.toStringTag:void 0;Be.exports=function O(q){return null==q?void 0===q?"[object Undefined]":"[object Null]":P&&P in Object(q)?D(q):H(q)}},7304:(Be,be,V)=>{var Y=V(5946),D=V(1943),H=V(5940),B=V(2827),P=/^\[object .+?Constructor\]$/,oe=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Be.exports=function se(Q){return!(!H(Q)||D(Q))&&(Y(Q)?oe:P).test(B(Q))}},5963:(Be,be,V)=>{var Y=V(9719),D=V(6884),H=V(8442),B=V(5940),W=V(8533);Be.exports=function P(O,q,te,J){if(!B(O))return O;for(var oe=-1,se=(q=D(q,O)).length,Q=se-1,U=O;null!=U&&++oe<se;){var ae=W(q[oe]),xe=te;if("__proto__"===ae||"constructor"===ae||"prototype"===ae)return O;if(oe!=Q){var Oe=U[ae];void 0===(xe=J?J(Oe,ae,U):void 0)&&(xe=B(Oe)?Oe:H(q[oe+1])?[]:{})}Y(U,ae,xe),U=U[ae]}return O}},3935:(Be,be,V)=>{var Y=V(443),D=V(4633),H=V(9460),B=V(4129),P=Y?Y.prototype:void 0,O=P?P.toString:void 0;Be.exports=function q(te){if("string"==typeof te)return te;if(H(te))return D(te,q)+"";if(B(te))return O?O.call(te):"";var J=te+"";return"0"==J&&1/te==-1/0?"-0":J}},3348:(Be,be,V)=>{var Y=V(2760),D=/^\s+/;Be.exports=function H(B){return B&&B.slice(0,Y(B)+1).replace(D,"")}},6884:(Be,be,V)=>{var Y=V(9460),D=V(5352),H=V(2855),B=V(3943);Be.exports=function W(P,O){return Y(P)?P:D(P,O)?[P]:H(B(P))}},9454:Be=>{Be.exports=function be(V,Y){var D=-1,H=V.length;for(Y||(Y=Array(H));++D<H;)Y[D]=V[D];return Y}},4610:(Be,be,V)=>{var Y=V(2119);Be.exports=Y["__core-js_shared__"]},6713:(Be,be,V)=>{var Y=V(3436),D=function(){try{var H=Y(Object,"defineProperty");return H({},"",{}),H}catch{}}();Be.exports=D},9122:Be=>{var be="object"==typeof global&&global&&global.Object===Object&&global;Be.exports=be},4537:(Be,be,V)=>{var Y=V(3819);Be.exports=function D(H,B){var W=H.__data__;return Y(B)?W["string"==typeof B?"string":"hash"]:W.map}},3436:(Be,be,V)=>{var Y=V(7304),D=V(1990);Be.exports=function H(B,W){var P=D(B,W);return Y(P)?P:void 0}},1318:(Be,be,V)=>{var Y=V(443),D=Object.prototype,H=D.hasOwnProperty,B=D.toString,W=Y?Y.toStringTag:void 0;Be.exports=function P(O){var q=H.call(O,W),te=O[W];try{O[W]=void 0;var J=!0}catch{}var oe=B.call(O);return J&&(q?O[W]=te:delete O[W]),oe}},1990:Be=>{Be.exports=function be(V,Y){return V?.[Y]}},4312:(Be,be,V)=>{var Y=V(862);Be.exports=function D(){this.__data__=Y?Y(null):{},this.size=0}},6421:Be=>{Be.exports=function be(V){var Y=this.has(V)&&delete this.__data__[V];return this.size-=Y?1:0,Y}},5764:(Be,be,V)=>{var Y=V(862),B=Object.prototype.hasOwnProperty;Be.exports=function W(P){var O=this.__data__;if(Y){var q=O[P];return"__lodash_hash_undefined__"===q?void 0:q}return B.call(O,P)?O[P]:void 0}},8685:(Be,be,V)=>{var Y=V(862),H=Object.prototype.hasOwnProperty;Be.exports=function B(W){var P=this.__data__;return Y?void 0!==P[W]:H.call(P,W)}},6676:(Be,be,V)=>{var Y=V(862);Be.exports=function H(B,W){var P=this.__data__;return this.size+=this.has(B)?0:1,P[B]=Y&&void 0===W?"__lodash_hash_undefined__":W,this}},8442:Be=>{var V=/^(?:0|[1-9]\d*)$/;Be.exports=function Y(D,H){var B=typeof D;return!!(H=H??9007199254740991)&&("number"==B||"symbol"!=B&&V.test(D))&&D>-1&&D%1==0&&D<H}},5352:(Be,be,V)=>{var Y=V(9460),D=V(4129),H=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,B=/^\w*$/;Be.exports=function W(P,O){if(Y(P))return!1;var q=typeof P;return!("number"!=q&&"symbol"!=q&&"boolean"!=q&&null!=P&&!D(P))||B.test(P)||!H.test(P)||null!=O&&P in Object(O)}},3819:Be=>{Be.exports=function be(V){var Y=typeof V;return"string"==Y||"number"==Y||"symbol"==Y||"boolean"==Y?"__proto__"!==V:null===V}},1943:(Be,be,V)=>{var B,Y=V(4610),D=(B=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"";Be.exports=function H(B){return!!D&&D in B}},1840:Be=>{Be.exports=function be(){this.__data__=[],this.size=0}},4378:(Be,be,V)=>{var Y=V(3503),H=Array.prototype.splice;Be.exports=function B(W){var P=this.__data__,O=Y(P,W);return!(O<0||(O==P.length-1?P.pop():H.call(P,O,1),--this.size,0))}},4981:(Be,be,V)=>{var Y=V(3503);Be.exports=function D(H){var B=this.__data__,W=Y(B,H);return W<0?void 0:B[W][1]}},7343:(Be,be,V)=>{var Y=V(3503);Be.exports=function D(H){return Y(this.__data__,H)>-1}},8895:(Be,be,V)=>{var Y=V(3503);Be.exports=function D(H,B){var W=this.__data__,P=Y(W,H);return P<0?(++this.size,W.push([H,B])):W[P][1]=B,this}},638:(Be,be,V)=>{var Y=V(4994),D=V(9215),H=V(1501);Be.exports=function B(){this.size=0,this.__data__={hash:new Y,map:new(H||D),string:new Y}}},1184:(Be,be,V)=>{var Y=V(4537);Be.exports=function D(H){var B=Y(this,H).delete(H);return this.size-=B?1:0,B}},866:(Be,be,V)=>{var Y=V(4537);Be.exports=function D(H){return Y(this,H).get(H)}},3771:(Be,be,V)=>{var Y=V(4537);Be.exports=function D(H){return Y(this,H).has(H)}},1772:(Be,be,V)=>{var Y=V(4537);Be.exports=function D(H,B){var W=Y(this,H),P=W.size;return W.set(H,B),this.size+=W.size==P?0:1,this}},719:(Be,be,V)=>{var Y=V(535);Be.exports=function H(B){var W=Y(B,function(O){return 500===P.size&&P.clear(),O}),P=W.cache;return W}},862:(Be,be,V)=>{var D=V(3436)(Object,"create");Be.exports=D},2902:Be=>{var V=Object.prototype.toString;Be.exports=function Y(D){return V.call(D)}},2119:(Be,be,V)=>{var Y=V(9122),D="object"==typeof self&&self&&self.Object===Object&&self,H=Y||D||Function("return this")();Be.exports=H},2855:(Be,be,V)=>{var Y=V(719),D=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,H=/\\(\\)?/g,B=Y(function(W){var P=[];return 46===W.charCodeAt(0)&&P.push(""),W.replace(D,function(O,q,te,J){P.push(te?J.replace(H,"$1"):q||O)}),P});Be.exports=B},8533:(Be,be,V)=>{var Y=V(4129);Be.exports=function H(B){if("string"==typeof B||Y(B))return B;var W=B+"";return"0"==W&&1/B==-1/0?"-0":W}},2827:Be=>{var V=Function.prototype.toString;Be.exports=function Y(D){if(null!=D){try{return V.call(D)}catch{}try{return D+""}catch{}}return""}},2760:Be=>{var be=/\s/;Be.exports=function V(Y){for(var D=Y.length;D--&&be.test(Y.charAt(D)););return D}},406:(Be,be,V)=>{var Y=V(5940),D=V(1710),H=V(1467),W=Math.max,P=Math.min;Be.exports=function O(q,te,J){var oe,se,Q,U,ae,xe,Oe=0,re=!1,ue=!1,z=!0;if("function"!=typeof q)throw new TypeError("Expected a function");function $(He){var ft=oe,gt=se;return oe=se=void 0,Oe=He,U=q.apply(gt,ft)}function ne(He){return Oe=He,ae=setTimeout(Re,te),re?$(He):U}function Ue(He){var ft=He-xe;return void 0===xe||ft>=te||ft<0||ue&&He-Oe>=Q}function Re(){var He=D();if(Ue(He))return rt(He);ae=setTimeout(Re,function ge(He){var Ct=te-(He-xe);return ue?P(Ct,Q-(He-Oe)):Ct}(He))}function rt(He){return ae=void 0,z&&oe?$(He):(oe=se=void 0,U)}function xt(){var He=D(),ft=Ue(He);if(oe=arguments,se=this,xe=He,ft){if(void 0===ae)return ne(xe);if(ue)return clearTimeout(ae),ae=setTimeout(Re,te),$(xe)}return void 0===ae&&(ae=setTimeout(Re,te)),U}return te=H(te)||0,Y(J)&&(re=!!J.leading,Q=(ue="maxWait"in J)?W(H(J.maxWait)||0,te):Q,z="trailing"in J?!!J.trailing:z),xt.cancel=function Pe(){void 0!==ae&&clearTimeout(ae),Oe=0,oe=xe=se=ae=void 0},xt.flush=function at(){return void 0===ae?U:rt(D())},xt}},217:Be=>{Be.exports=function be(V,Y){return V===Y||V!=V&&Y!=Y}},8817:(Be,be,V)=>{var Y=V(5456);Be.exports=function D(H,B,W){var P=null==H?void 0:Y(H,B);return void 0===P?W:P}},9460:Be=>{Be.exports=Array.isArray},5946:(Be,be,V)=>{var Y=V(3337),D=V(5940);Be.exports=function O(q){if(!D(q))return!1;var te=Y(q);return"[object Function]"==te||"[object GeneratorFunction]"==te||"[object AsyncFunction]"==te||"[object Proxy]"==te}},5940:Be=>{Be.exports=function be(V){var Y=typeof V;return null!=V&&("object"==Y||"function"==Y)}},2671:Be=>{Be.exports=function be(V){return null!=V&&"object"==typeof V}},4129:(Be,be,V)=>{var Y=V(3337),D=V(2671);Be.exports=function B(W){return"symbol"==typeof W||D(W)&&"[object Symbol]"==Y(W)}},7489:function(Be,be,V){var Y;Be=V.nmd(Be),function(){var D,P="Expected a function",q="__lodash_hash_undefined__",J="__lodash_placeholder__",$=32,Ct=1/0,kn=9007199254740991,Jt=4294967295,xn=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",$],["partialRight",64],["rearg",256]],bn="[object Arguments]",yn="[object Array]",Ce="[object Boolean]",Dt="[object Date]",ci="[object Error]",$i="[object Function]",At="[object GeneratorFunction]",Pt="[object Map]",un="[object Number]",Te="[object Object]",Me="[object Promise]",vn="[object RegExp]",ii="[object Set]",Fi="[object String]",Hs="[object Symbol]",bs="[object WeakMap]",er="[object ArrayBuffer]",tl="[object DataView]",$l="[object Float32Array]",ql="[object Float64Array]",Gf="[object Int8Array]",Wf="[object Int16Array]",th="[object Int32Array]",lc="[object Uint8Array]",Ah="[object Uint8ClampedArray]",Lu="[object Uint16Array]",qa="[object Uint32Array]",Ld=/\b__p \+= '';/g,cu=/\b(__p \+=) '' \+/g,Aa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ih=/&(?:amp|lt|gt|quot|#39);/g,Pu=/[&<>"']/g,ed=RegExp(Ih.source),hf=RegExp(Pu.source),td=/<%-([\s\S]+?)%>/g,dl=/<%([\s\S]+?)%>/g,df=/<%=([\s\S]+?)%>/g,nh=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ff=/^\w*$/,Pd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xc=/[\\^$.*+?()[\]{}|]/g,Tg=RegExp(xc.source),Sh=/^\s+/,to=/\s/,pf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fl=/\{\n\/\* \[wrapped with (.+)\] \*/,wc=/,? & /,nl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jf=/[()=,{}\[\]\/\s]/,nd=/\\(\\)?/g,Ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,it=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,Se=/^\[object .+?Constructor\]$/,$e=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,zt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,In=/($^)/,yi=/['\n\r\u2028\u2029\\]/g,ti="\\ud800-\\udfff",sr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Gs="\\u2700-\\u27bf",bo="a-z\\xdf-\\xf6\\xf8-\\xff",Xa="A-Z\\xc0-\\xd6\\xd8-\\xde",Ru="\\ufe0e\\ufe0f",hs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mg="["+ti+"]",zp="["+hs+"]",gi="["+sr+"]",Dg="\\d+",Ls="["+Gs+"]",wo="["+bo+"]",pv="[^"+ti+hs+Dg+Gs+bo+Xa+"]",gv="\\ud83c[\\udffb-\\udfff]",xs="[^"+ti+"]",Xi="(?:\\ud83c[\\udde6-\\uddff]){2}",Iy="[\\ud800-\\udbff][\\udc00-\\udfff]",Wo="["+Xa+"]",Ac="(?:"+wo+"|"+pv+")",id="(?:"+Wo+"|"+pv+")",kl="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Zt="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ms="(?:"+gi+"|"+gv+")?",Rd="["+Ru+"]?",Ic=Rd+ms+"(?:\\u200d(?:"+[xs,Xi,Iy].join("|")+")"+Rd+ms+")*",no="(?:"+[Ls,Xi,Iy].join("|")+")"+Ic,Eh="(?:"+[xs+gi+"?",gi,Xi,Iy,Mg].join("|")+")",R_=RegExp("['\u2019]","g"),cc=RegExp(gi,"g"),Yi=RegExp(gv+"(?="+gv+")|"+Eh+Ic,"g"),oC=RegExp([Wo+"?"+wo+"+"+kl+"(?="+[zp,Wo,"$"].join("|")+")",id+"+"+Zt+"(?="+[zp,Wo+Ac,"$"].join("|")+")",Wo+"?"+Ac+"+"+kl,Wo+"+"+Zt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dg,no].join("|"),"g"),Dr=RegExp("[\\u200d"+ti+sr+Ru+"]"),Sc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Sy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],k_=-1,Sa={};Sa[$l]=Sa[ql]=Sa[Gf]=Sa[Wf]=Sa[th]=Sa[lc]=Sa[Ah]=Sa[Lu]=Sa[qa]=!0,Sa[bn]=Sa[yn]=Sa[er]=Sa[Ce]=Sa[tl]=Sa[Dt]=Sa[ci]=Sa[$i]=Sa[Pt]=Sa[un]=Sa[Te]=Sa[vn]=Sa[ii]=Sa[Fi]=Sa[bs]=!1;var ua={};ua[bn]=ua[yn]=ua[er]=ua[tl]=ua[Ce]=ua[Dt]=ua[$l]=ua[ql]=ua[Gf]=ua[Wf]=ua[th]=ua[Pt]=ua[un]=ua[Te]=ua[vn]=ua[ii]=ua[Fi]=ua[Hs]=ua[lc]=ua[Ah]=ua[Lu]=ua[qa]=!0,ua[ci]=ua[$i]=ua[bs]=!1;var xm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ns=parseFloat,vv=parseInt,yv="object"==typeof global&&global&&global.Object===Object&&global,ku="object"==typeof self&&self&&self.Object===Object&&self,Xl=yv||ku||Function("return this")(),O_=be&&!be.nodeType&&be,ih=O_&&Be&&!Be.nodeType&&Be,rh=ih&&ih.exports===O_,Ey=rh&&yv.process,Th=function(){try{return ih&&ih.require&&ih.require("util").types||Ey&&Ey.binding&&Ey.binding("util")}catch{}}(),Ea=Th&&Th.isArrayBuffer,io=Th&&Th.isDate,F_=Th&&Th.isMap,Ty=Th&&Th.isRegExp,kd=Th&&Th.isSet,go=Th&&Th.isTypedArray;function Ya(wn,oi,Zn){switch(Zn.length){case 0:return wn.call(oi);case 1:return wn.call(oi,Zn[0]);case 2:return wn.call(oi,Zn[0],Zn[1]);case 3:return wn.call(oi,Zn[0],Zn[1],Zn[2])}return wn.apply(oi,Zn)}function qf(wn,oi,Zn,Lr){for(var Bs=-1,qo=null==wn?0:wn.length;++Bs<qo;){var Zl=wn[Bs];oi(Lr,Zl,Zn(Zl),wn)}return Lr}function Ka(wn,oi){for(var Zn=-1,Lr=null==wn?0:wn.length;++Zn<Lr&&!1!==oi(wn[Zn],Zn,wn););return wn}function il(wn,oi){for(var Zn=null==wn?0:wn.length;Zn--&&!1!==oi(wn[Zn],Zn,wn););return wn}function uu(wn,oi){for(var Zn=-1,Lr=null==wn?0:wn.length;++Zn<Lr;)if(!oi(wn[Zn],Zn,wn))return!1;return!0}function sh(wn,oi){for(var Zn=-1,Lr=null==wn?0:wn.length,Bs=0,qo=[];++Zn<Lr;){var Zl=wn[Zn];oi(Zl,Zn,wn)&&(qo[Bs++]=Zl)}return qo}function Xf(wn,oi){return!(null==wn||!wn.length)&&Ma(wn,oi,0)>-1}function Ar(wn,oi,Zn){for(var Lr=-1,Bs=null==wn?0:wn.length;++Lr<Bs;)if(Zn(oi,wn[Lr]))return!0;return!1}function Ta(wn,oi){for(var Zn=-1,Lr=null==wn?0:wn.length,Bs=Array(Lr);++Zn<Lr;)Bs[Zn]=oi(wn[Zn],Zn,wn);return Bs}function Mh(wn,oi){for(var Zn=-1,Lr=oi.length,Bs=wn.length;++Zn<Lr;)wn[Bs+Zn]=oi[Zn];return wn}function gf(wn,oi,Zn,Lr){var Bs=-1,qo=null==wn?0:wn.length;for(Lr&&qo&&(Zn=wn[++Bs]);++Bs<qo;)Zn=oi(Zn,wn[Bs],Bs,wn);return Zn}function Rr(wn,oi,Zn,Lr){var Bs=null==wn?0:wn.length;for(Lr&&Bs&&(Zn=wn[--Bs]);Bs--;)Zn=oi(Zn,wn[Bs],Bs,wn);return Zn}function wm(wn,oi){for(var Zn=-1,Lr=null==wn?0:wn.length;++Zn<Lr;)if(oi(wn[Zn],Zn,wn))return!0;return!1}var My=Ss("length");function $o(wn,oi,Zn){var Lr;return Zn(wn,function(Bs,qo,Zl){if(oi(Bs,qo,Zl))return Lr=qo,!1}),Lr}function Ol(wn,oi,Zn,Lr){for(var Bs=wn.length,qo=Zn+(Lr?1:-1);Lr?qo--:++qo<Bs;)if(oi(wn[qo],qo,wn))return qo;return-1}function Ma(wn,oi,Zn){return oi==oi?function tp(wn,oi,Zn){for(var Lr=Zn-1,Bs=wn.length;++Lr<Bs;)if(wn[Lr]===oi)return Lr;return-1}(wn,oi,Zn):Ol(wn,Yl,Zn)}function du(wn,oi,Zn,Lr){for(var Bs=Zn-1,qo=wn.length;++Bs<qo;)if(Lr(wn[Bs],oi))return Bs;return-1}function Yl(wn){return wn!=wn}function wr(wn,oi){var Zn=null==wn?0:wn.length;return Zn?xl(wn,oi)/Zn:NaN}function Ss(wn){return function(oi){return null==oi?D:oi[wn]}}function ga(wn){return function(oi){return null==wn?D:wn[oi]}}function fu(wn,oi,Zn,Lr,Bs){return Bs(wn,function(qo,Zl,va){Zn=Lr?(Lr=!1,qo):oi(Zn,qo,Zl,va)}),Zn}function xl(wn,oi){for(var Zn,Lr=-1,Bs=wn.length;++Lr<Bs;){var qo=oi(wn[Lr]);qo!==D&&(Zn=Zn===D?qo:Zn+qo)}return Zn}function rd(wn,oi){for(var Zn=-1,Lr=Array(wn);++Zn<wn;)Lr[Zn]=oi(Zn);return Lr}function Up(wn){return wn&&wn.slice(0,Kc(wn)+1).replace(Sh,"")}function Kl(wn){return function(oi){return wn(oi)}}function Ws(wn,oi){return Ta(oi,function(Zn){return wn[Zn]})}function mf(wn,oi){return wn.has(oi)}function Kf(wn,oi){for(var Zn=-1,Lr=wn.length;++Zn<Lr&&Ma(oi,wn[Zn],0)>-1;);return Zn}function Am(wn,oi){for(var Zn=wn.length;Zn--&&Ma(oi,wn[Zn],0)>-1;);return Zn}function vf(wn,oi){for(var Zn=wn.length,Lr=0;Zn--;)wn[Zn]===oi&&++Lr;return Lr}var Ec=ga({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Pg=ga({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zf(wn){return"\\"+xm[wn]}function ah(wn){return Dr.test(wn)}function Qf(wn){var oi=-1,Zn=Array(wn.size);return wn.forEach(function(Lr,Bs){Zn[++oi]=[Bs,Lr]}),Zn}function Jf(wn,oi){return function(Zn){return wn(oi(Zn))}}function pu(wn,oi){for(var Zn=-1,Lr=wn.length,Bs=0,qo=[];++Zn<Lr;){var Zl=wn[Zn];(Zl===oi||Zl===J)&&(wn[Zn]=J,qo[Bs++]=Zn)}return qo}function Hp(wn){var oi=-1,Zn=Array(wn.size);return wn.forEach(function(Lr){Zn[++oi]=Lr}),Zn}function sl(wn){return ah(wn)?function _v(wn){for(var oi=Yi.lastIndex=0;Yi.test(wn);)++oi;return oi}(wn):My(wn)}function lh(wn){return ah(wn)?function Rg(wn){return wn.match(Yi)||[]}(wn):function qr(wn){return wn.split("")}(wn)}function Kc(wn){for(var oi=wn.length;oi--&&to.test(wn.charAt(oi)););return oi}var Dh=ga({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Im=function wn(oi){var C,Zn=(oi=null==oi?Xl:Im.defaults(Xl.Object(),oi,Im.pick(Xl,Sy))).Array,Lr=oi.Date,Bs=oi.Error,qo=oi.Function,Zl=oi.Math,va=oi.Object,Cv=oi.RegExp,bv=oi.String,Ph=oi.TypeError,xv=Zn.prototype,Og=va.prototype,wv=oi["__core-js_shared__"],Av=qo.prototype.toString,ta=Og.hasOwnProperty,Ly=0,Sm=(C=/[^.]+$/.exec(wv&&wv.keys&&wv.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",Em=Og.toString,aC=Av.call(va),B_=Xl._,np=Cv("^"+Av.call(ta).replace(xc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tm=rh?oi.Buffer:D,ya=oi.Symbol,yf=oi.Uint8Array,Py=Tm?Tm.allocUnsafe:D,ip=Jf(va.getPrototypeOf,va),Iv=va.create,Mm=Og.propertyIsEnumerable,Fg=xv.splice,Ng=ya?ya.isConcatSpreadable:D,Gp=ya?ya.iterator:D,_a=ya?ya.toStringTag:D,rp=function(){try{var C=Kd(va,"defineProperty");return C({},"",{}),C}catch{}}(),Ry=oi.clearTimeout!==Xl.clearTimeout&&oi.clearTimeout,Dm=Lr&&Lr.now!==Xl.Date.now&&Lr.now,ky=oi.setTimeout!==Xl.setTimeout&&oi.setTimeout,Sv=Zl.ceil,na=Zl.floor,Bg=va.getOwnPropertySymbols,Wp=Tm?Tm.isBuffer:D,zg=oi.isFinite,ch=xv.join,z_=Jf(va.keys,va),vs=Zl.max,pl=Zl.min,Tc=Lr.now,mo=oi.parseInt,Do=Zl.random,kr=xv.reverse,$s=Kd(oi,"DataView"),jr=Kd(oi,"Map"),Vg=Kd(oi,"Promise"),es=Kd(oi,"Set"),as=Kd(oi,"WeakMap"),Mc=Kd(va,"create"),sd=as&&new as,jp={},V_=jh($s),Oy=jh(jr),Ks=jh(Vg),Zc=jh(es),mi=jh(as),Es=ya?ya.prototype:D,wt=Es?Es.valueOf:D,It=Es?Es.toString:D;function ut(C){if(ni(C)&&!Mi(C)&&!(C instanceof Ps)){if(C instanceof ia)return C;if(ta.call(C,"__wrapped__"))return nm(C)}return new ia(C)}var Lo=function(){function C(){}return function(S){if(!rr(S))return{};if(Iv)return Iv(S);C.prototype=S;var Z=new C;return C.prototype=D,Z}}();function Ao(){}function ia(C,S){this.__wrapped__=C,this.__actions__=[],this.__chain__=!!S,this.__index__=0,this.__values__=D}function Ps(C){this.__wrapped__=C,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Jt,this.__views__=[]}function Fl(C){var S=-1,Z=null==C?0:C.length;for(this.clear();++S<Z;){var Ee=C[S];this.set(Ee[0],Ee[1])}}function gl(C){var S=-1,Z=null==C?0:C.length;for(this.clear();++S<Z;){var Ee=C[S];this.set(Ee[0],Ee[1])}}function rs(C){var S=-1,Z=null==C?0:C.length;for(this.clear();++S<Z;){var Ee=C[S];this.set(Ee[0],Ee[1])}}function Er(C){var S=-1,Z=null==C?0:C.length;for(this.__data__=new rs;++S<Z;)this.add(C[S])}function ra(C){var S=this.__data__=new gl(C);this.size=S.size}function Va(C,S){var Z=Mi(C),Ee=!Z&&$r(C),st=!Z&&!Ee&&Zr(C),Et=!Z&&!Ee&&!st&&Fc(C),on=Z||Ee||st||Et,fn=on?rd(C.length,bv):[],Pn=fn.length;for(var Ti in C)(S||ta.call(C,Ti))&&(!on||!("length"==Ti||st&&("offset"==Ti||"parent"==Ti)||Et&&("buffer"==Ti||"byteLength"==Ti||"byteOffset"==Ti)||gc(Ti,Pn)))&&fn.push(Ti);return fn}function Tv(C){var S=C.length;return S?C[ud(0,S-1)]:D}function Mv(C,S){return vd(Js(C),Af(S,0,C.length))}function Gg(C){return vd(Js(C))}function Wg(C,S,Z){(Z!==D&&!Yr(C[S],Z)||Z===D&&!(S in C))&&kh(C,S,Z)}function bf(C,S,Z){var Ee=C[S];(!ta.call(C,S)||!Yr(Ee,Z)||Z===D&&!(S in C))&&kh(C,S,Z)}function Lm(C,S){for(var Z=C.length;Z--;)if(Yr(C[Z][0],S))return Z;return-1}function xf(C,S,Z,Ee){return od(C,function(st,Et,on){S(Ee,st,Z(st),on)}),Ee}function zd(C,S){return C&&fc(S,Vc(S),C)}function kh(C,S,Z){"__proto__"==S&&rp?rp(C,S,{configurable:!0,enumerable:!0,value:Z,writable:!0}):C[S]=Z}function wf(C,S){for(var Z=-1,Ee=S.length,st=Zn(Ee),Et=null==C;++Z<Ee;)st[Z]=Et?D:vC(C,S[Z]);return st}function Af(C,S,Z){return C==C&&(Z!==D&&(C=C<=Z?C:Z),S!==D&&(C=C>=S?C:S)),C}function ml(C,S,Z,Ee,st,Et){var on,fn=1&S,Pn=2&S,Ti=4&S;if(Z&&(on=st?Z(C,Ee,st,Et):Z(C)),on!==D)return on;if(!rr(C))return C;var Di=Mi(C);if(Di){if(on=function mh(C){var S=C.length,Z=new C.constructor(S);return S&&"string"==typeof C[0]&&ta.call(C,"index")&&(Z.index=C.index,Z.input=C.input),Z}(C),!fn)return Js(C,on)}else{var Hi=Ra(C),Tr=Hi==$i||Hi==At;if(Zr(C))return yu(C,fn);if(Hi==Te||Hi==bn||Tr&&!st){if(on=Pn||Tr?{}:tg(C),!fn)return Pn?function dp(C,S){return fc(C,eg(C),S)}(C,function jg(C,S){return C&&fc(S,wu(S),C)}(on,C)):function fh(C,S){return fc(C,vp(C),S)}(C,zd(on,C))}else{if(!ua[Hi])return st?C:{};on=function zm(C,S,Z){var Ee=C.constructor;switch(S){case er:return Sl(C);case Ce:case Dt:return new Ee(+C);case tl:return function dc(C,S){var Z=S?Sl(C.buffer):C.buffer;return new C.constructor(Z,C.byteOffset,C.byteLength)}(C,Z);case $l:case ql:case Gf:case Wf:case th:case lc:case Ah:case Lu:case qa:return tc(C,Z);case Pt:return new Ee;case un:case Fi:return new Ee(C);case vn:return function Io(C){var S=new C.constructor(C.source,it.exec(C));return S.lastIndex=C.lastIndex,S}(C);case ii:return new Ee;case Hs:return function km(C){return wt?va(wt.call(C)):{}}(C)}}(C,Hi,fn)}}Et||(Et=new ra);var zr=Et.get(C);if(zr)return zr;Et.set(C,on),Ha(C)?C.forEach(function(As){on.add(ml(As,S,Z,As,C,Et))}):Or(C)&&C.forEach(function(As,lo){on.set(lo,ml(As,S,Z,lo,C,Et))});var oo=Di?D:(Ti?Pn?Yd:bu:Pn?wu:Vc)(C);return Ka(oo||C,function(As,lo){oo&&(As=C[lo=As]),bf(on,lo,ml(As,S,Z,lo,C,Et))}),on}function Fy(C,S,Z){var Ee=Z.length;if(null==C)return!Ee;for(C=va(C);Ee--;){var st=Z[Ee],on=C[st];if(on===D&&!(st in C)||!(0,S[st])(on))return!1}return!0}function Ny(C,S,Z){if("function"!=typeof C)throw new Ph(P);return Gh(function(){C.apply(D,Z)},S)}function Vd(C,S,Z,Ee){var st=-1,Et=Xf,on=!0,fn=C.length,Pn=[],Ti=S.length;if(!fn)return Pn;Z&&(S=Ta(S,Kl(Z))),Ee?(Et=Ar,on=!1):S.length>=200&&(Et=mf,on=!1,S=new Er(S));e:for(;++st<fn;){var Di=C[st],Hi=null==Z?Di:Z(Di);if(Di=Ee||0!==Di?Di:0,on&&Hi==Hi){for(var Tr=Ti;Tr--;)if(S[Tr]===Hi)continue e;Pn.push(Di)}else Et(S,Hi,Ee)||Pn.push(Di)}return Pn}ut.templateSettings={escape:td,evaluate:dl,interpolate:df,variable:"",imports:{_:ut}},(ut.prototype=Ao.prototype).constructor=ut,(ia.prototype=Lo(Ao.prototype)).constructor=ia,(Ps.prototype=Lo(Ao.prototype)).constructor=Ps,Fl.prototype.clear=function Ca(){this.__data__=Mc?Mc(null):{},this.size=0},Fl.prototype.delete=function Po(C){var S=this.has(C)&&delete this.__data__[C];return this.size-=S?1:0,S},Fl.prototype.get=function Ba(C){var S=this.__data__;if(Mc){var Z=S[C];return Z===q?D:Z}return ta.call(S,C)?S[C]:D},Fl.prototype.has=function fr(C){var S=this.__data__;return Mc?S[C]!==D:ta.call(S,C)},Fl.prototype.set=function Rh(C,S){var Z=this.__data__;return this.size+=this.has(C)?0:1,Z[C]=Mc&&S===D?q:S,this},gl.prototype.clear=function Fd(){this.__data__=[],this.size=0},gl.prototype.delete=function op(C){var S=this.__data__,Z=Lm(S,C);return!(Z<0||(Z==S.length-1?S.pop():Fg.call(S,Z,1),--this.size,0))},gl.prototype.get=function Nd(C){var S=this.__data__,Z=Lm(S,C);return Z<0?D:S[Z][1]},gl.prototype.has=function _f(C){return Lm(this.__data__,C)>-1},gl.prototype.set=function Ou(C,S){var Z=this.__data__,Ee=Lm(Z,C);return Ee<0?(++this.size,Z.push([C,S])):Z[Ee][1]=S,this},rs.prototype.clear=function Dc(){this.size=0,this.__data__={hash:new Fl,map:new(jr||gl),string:new Fl}},rs.prototype.delete=function Ug(C){var S=mp(this,C).delete(C);return this.size-=S?1:0,S},rs.prototype.get=function Ts(C){return mp(this,C).get(C)},rs.prototype.has=function Ev(C){return mp(this,C).has(C)},rs.prototype.set=function Hg(C,S){var Z=mp(this,C),Ee=Z.size;return Z.set(C,S),this.size+=Z.size==Ee?0:1,this},Er.prototype.add=Er.prototype.push=function ba(C){return this.__data__.set(C,q),this},Er.prototype.has=function Nl(C){return this.__data__.has(C)},ra.prototype.clear=function za(){this.__data__=new gl,this.size=0},ra.prototype.delete=function wl(C){var S=this.__data__,Z=S.delete(C);return this.size=S.size,Z},ra.prototype.get=function Bd(C){return this.__data__.get(C)},ra.prototype.has=function uc(C){return this.__data__.has(C)},ra.prototype.set=function Cf(C,S){var Z=this.__data__;if(Z instanceof gl){var Ee=Z.__data__;if(!jr||Ee.length<199)return Ee.push([C,S]),this.size=++Z.size,this;Z=this.__data__=new rs(Ee)}return Z.set(C,S),this.size=Z.size,this};var od=Ef(Lc),Dv=Ef(Fh,!0);function U_(C,S){var Z=!0;return od(C,function(Ee,st,Et){return Z=!!S(Ee,st,Et)}),Z}function Lv(C,S,Z){for(var Ee=-1,st=C.length;++Ee<st;){var Et=C[Ee],on=S(Et);if(null!=on&&(fn===D?on==on&&!Gl(on):Z(on,fn)))var fn=on,Pn=Et}return Pn}function Xp(C,S){var Z=[];return od(C,function(Ee,st,Et){S(Ee,st,Et)&&Z.push(Ee)}),Z}function ol(C,S,Z,Ee,st){var Et=-1,on=C.length;for(Z||(Z=ka),st||(st=[]);++Et<on;){var fn=C[Et];S>0&&Z(fn)?S>1?ol(fn,S-1,Z,Ee,st):Mh(st,fn):Ee||(st[st.length]=fn)}return st}var Ud=Tf(),Oh=Tf(!0);function Lc(C,S){return C&&Ud(C,S,Vc)}function Fh(C,S){return C&&Oh(C,S,Vc)}function uh(C,S){return sh(S,function(Z){return dn(C[Z])})}function Fu(C,S){for(var Z=0,Ee=(S=ec(S,C)).length;null!=C&&Z<Ee;)C=C[ju(S[Z++])];return Z&&Z==Ee?C:D}function gu(C,S,Z){var Ee=S(C);return Mi(C)?Ee:Mh(Ee,Z(C))}function sa(C){return null==C?C===D?"[object Undefined]":"[object Null]":_a&&_a in va(C)?function Df(C){var S=ta.call(C,_a),Z=C[_a];try{C[_a]=D;var Ee=!0}catch{}var st=Em.call(C);return Ee&&(S?C[_a]=Z:delete C[_a]),st}(C):function H_(C){return Em.call(C)}(C)}function ad(C,S){return C>S}function Pm(C,S){return null!=C&&ta.call(C,S)}function $g(C,S){return null!=C&&S in va(C)}function mu(C,S,Z){for(var Ee=Z?Ar:Xf,st=C[0].length,Et=C.length,on=Et,fn=Zn(Et),Pn=1/0,Ti=[];on--;){var Di=C[on];on&&S&&(Di=Ta(Di,Kl(S))),Pn=pl(Di.length,Pn),fn[on]=!Z&&(S||st>=120&&Di.length>=120)?new Er(on&&Di):D}Di=C[0];var Hi=-1,Tr=fn[0];e:for(;++Hi<st&&Ti.length<Pn;){var zr=Di[Hi],ws=S?S(zr):zr;if(zr=Z||0!==zr?zr:0,!(Tr?mf(Tr,ws):Ee(Ti,ws,Z))){for(on=Et;--on;){var oo=fn[on];if(!(oo?mf(oo,ws):Ee(C[on],ws,Z)))continue e}Tr&&Tr.push(ws),Ti.push(zr)}}return Ti}function Pc(C,S,Z){var Ee=null==(C=yl(C,S=ec(S,C)))?C:C[ju(xu(S))];return null==Ee?D:Ya(Ee,C,Z)}function js(C){return ni(C)&&sa(C)==bn}function Rc(C,S,Z,Ee,st){return C===S||(null==C||null==S||!ni(C)&&!ni(S)?C!=C&&S!=S:function cp(C,S,Z,Ee,st,Et){var on=Mi(C),fn=Mi(S),Pn=on?yn:Ra(C),Ti=fn?yn:Ra(S),Di=(Pn=Pn==bn?Te:Pn)==Te,Hi=(Ti=Ti==bn?Te:Ti)==Te,Tr=Pn==Ti;if(Tr&&Zr(C)){if(!Zr(S))return!1;on=!0,Di=!1}if(Tr&&!Di)return Et||(Et=new ra),on||Fc(C)?gh(C,S,Z,Ee,st,Et):function Jg(C,S,Z,Ee,st,Et,on){switch(Z){case tl:if(C.byteLength!=S.byteLength||C.byteOffset!=S.byteOffset)return!1;C=C.buffer,S=S.buffer;case er:return!(C.byteLength!=S.byteLength||!Et(new yf(C),new yf(S)));case Ce:case Dt:case un:return Yr(+C,+S);case ci:return C.name==S.name&&C.message==S.message;case vn:case Fi:return C==S+"";case Pt:var fn=Qf;case ii:if(fn||(fn=Hp),C.size!=S.size&&!(1&Ee))return!1;var Ti=on.get(C);if(Ti)return Ti==S;Ee|=2,on.set(C,S);var Di=gh(fn(C),fn(S),Ee,st,Et,on);return on.delete(C),Di;case Hs:if(wt)return wt.call(C)==wt.call(S)}return!1}(C,S,Pn,Z,Ee,st,Et);if(!(1&Z)){var zr=Di&&ta.call(C,"__wrapped__"),ws=Hi&&ta.call(S,"__wrapped__");if(zr||ws){var oo=zr?C.value():C,As=ws?S.value():S;return Et||(Et=new ra),st(oo,As,Z,Ee,Et)}}return!!Tr&&(Et||(Et=new ra),function dd(C,S,Z,Ee,st,Et){var on=1&Z,fn=bu(C),Pn=fn.length;if(Pn!=bu(S).length&&!on)return!1;for(var Hi=Pn;Hi--;){var Tr=fn[Hi];if(!(on?Tr in S:ta.call(S,Tr)))return!1}var zr=Et.get(C),ws=Et.get(S);if(zr&&ws)return zr==S&&ws==C;var oo=!0;Et.set(C,S),Et.set(S,C);for(var As=on;++Hi<Pn;){var lo=C[Tr=fn[Hi]],Ro=S[Tr];if(Ee)var qh=on?Ee(Ro,lo,Tr,S,C,Et):Ee(lo,Ro,Tr,C,S,Et);if(!(qh===D?lo===Ro||st(lo,Ro,Z,Ee,Et):qh)){oo=!1;break}As||(As="constructor"==Tr)}if(oo&&!As){var Xh=C.constructor,Uc=S.constructor;Xh!=Uc&&"constructor"in C&&"constructor"in S&&!("function"==typeof Xh&&Xh instanceof Xh&&"function"==typeof Uc&&Uc instanceof Uc)&&(oo=!1)}return Et.delete(C),Et.delete(S),oo}(C,S,Z,Ee,st,Et))}(C,S,Z,Ee,Rc,st))}function hh(C,S,Z,Ee){var st=Z.length,Et=st,on=!Ee;if(null==C)return!Et;for(C=va(C);st--;){var fn=Z[st];if(on&&fn[2]?fn[1]!==C[fn[0]]:!(fn[0]in C))return!1}for(;++st<Et;){var Pn=(fn=Z[st])[0],Ti=C[Pn],Di=fn[1];if(on&&fn[2]){if(Ti===D&&!(Pn in C))return!1}else{var Hi=new ra;if(Ee)var Tr=Ee(Ti,Di,Pn,C,S,Hi);if(!(Tr===D?Rc(Di,Ti,3,Ee,Hi):Tr))return!1}}return!0}function Hd(C){return!(!rr(C)||function Lf(C){return!!Sm&&Sm in C}(C))&&(dn(C)?np:Se).test(jh(C))}function Nh(C){return"function"==typeof C?C:null==C?Cd:"object"==typeof C?Mi(C)?Yp(C[0],C[1]):dh(C):J_(C)}function Qc(C){if(!vh(C))return z_(C);var S=[];for(var Z in va(C))ta.call(C,Z)&&"constructor"!=Z&&S.push(Z);return S}function Wd(C,S){return C<S}function up(C,S){var Z=-1,Ee=Cr(C)?Zn(C.length):[];return od(C,function(st,Et,on){Ee[++Z]=S(st,Et,on)}),Ee}function dh(C){var S=em(C);return 1==S.length&&S[0][2]?tu(S[0][0],S[0][1]):function(Z){return Z===C||hh(Z,C,S)}}function Yp(C,S){return ng(C)&&Zd(S)?tu(ju(C),S):function(Z){var Ee=vC(Z,C);return Ee===D&&Ee===S?Xy(Z,C):Rc(S,Ee,3)}}function zo(C,S,Z,Ee,st){C!==S&&Ud(S,function(Et,on){if(st||(st=new ra),rr(Et))!function jd(C,S,Z,Ee,st,Et,on){var fn=Pf(C,Z),Pn=Pf(S,Z),Ti=on.get(Pn);if(Ti)Wg(C,Z,Ti);else{var Di=Et?Et(fn,Pn,Z+"",C,S,on):D,Hi=Di===D;if(Hi){var Tr=Mi(Pn),zr=!Tr&&Zr(Pn),ws=!Tr&&!zr&&Fc(Pn);Di=Pn,Tr||zr||ws?Mi(fn)?Di=fn:Kr(fn)?Di=Js(fn):zr?(Hi=!1,Di=yu(Pn,!0)):ws?(Hi=!1,Di=tc(Pn,!0)):Di=[]:So(Pn)||$r(Pn)?(Di=fn,$r(fn)?Di=Y_(fn):(!rr(fn)||dn(fn))&&(Di=tg(Pn))):Hi=!1}Hi&&(on.set(Pn,Di),st(Di,Pn,Ee,Et,on),on.delete(Pn)),Wg(C,Z,Di)}}(C,S,on,Z,zo,Ee,st);else{var fn=Ee?Ee(Pf(C,on),Et,on+"",C,S,st):D;fn===D&&(fn=Et),Wg(C,on,fn)}},wu)}function Bh(C,S){var Z=C.length;if(Z)return gc(S+=S<0?Z:0,Z)?C[S]:D}function Za(C,S,Z){S=S.length?Ta(S,function(Et){return Mi(Et)?function(on){return Fu(on,1===Et.length?Et[0]:Et)}:Et}):[Cd];var Ee=-1;return S=Ta(S,Kl(ss())),function Yf(wn,oi){var Zn=wn.length;for(wn.sort(oi);Zn--;)wn[Zn]=wn[Zn].value;return wn}(up(C,function(Et,on,fn){return{criteria:Ta(S,function(Ti){return Ti(Et)}),index:++Ee,value:Et}}),function(Et,on){return function Xg(C,S,Z){for(var Ee=-1,st=C.criteria,Et=S.criteria,on=st.length,fn=Z.length;++Ee<on;){var Pn=zl(st[Ee],Et[Ee]);if(Pn)return Ee>=fn?Pn:Pn*("desc"==Z[Ee]?-1:1)}return C.index-S.index}(Et,on,Z)})}function Nu(C,S,Z){for(var Ee=-1,st=S.length,Et={};++Ee<st;){var on=S[Ee],fn=Fu(C,on);Z(fn,on)&&yo(Et,ec(on,C),fn)}return Et}function Da(C,S,Z,Ee){var st=Ee?du:Ma,Et=-1,on=S.length,fn=C;for(C===S&&(S=Js(S)),Z&&(fn=Ta(C,Kl(Z)));++Et<on;)for(var Pn=0,Ti=S[Et],Di=Z?Z(Ti):Ti;(Pn=st(fn,Di,Pn,Ee))>-1;)fn!==C&&Fg.call(fn,Pn,1),Fg.call(C,Pn,1);return C}function Jc(C,S){for(var Z=C?S.length:0,Ee=Z-1;Z--;){var st=S[Z];if(Z==Ee||st!==Et){var Et=st;gc(st)?Fg.call(C,st,1):Bu(C,st)}}return C}function ud(C,S){return C+na(Do()*(S-C+1))}function Vo(C,S){var Z="";if(!C||S<1||S>kn)return Z;do{S%2&&(Z+=C),(S=na(S/2))&&(C+=C)}while(S);return Z}function Os(C,S){return Wh(tm(C,S,Cd),C+"")}function Qi(C){return Tv(Yy(C))}function Rm(C,S){var Z=Yy(C);return vd(Z,Af(S,0,Z.length))}function yo(C,S,Z,Ee){if(!rr(C))return C;for(var st=-1,Et=(S=ec(S,C)).length,on=Et-1,fn=C;null!=fn&&++st<Et;){var Pn=ju(S[st]),Ti=Z;if("__proto__"===Pn||"constructor"===Pn||"prototype"===Pn)return C;if(st!=on){var Di=fn[Pn];(Ti=Ee?Ee(Di,Pn,fn):D)===D&&(Ti=rr(Di)?Di:gc(S[st+1])?[]:{})}bf(fn,Pn,Ti),fn=fn[Pn]}return C}var If=sd?function(C,S){return sd.set(C,S),C}:Cd,Kp=rp?function(C,S){return rp(C,"toString",{configurable:!0,enumerable:!1,value:ax(S),writable:!0})}:Cd;function Zp(C){return vd(Yy(C))}function vl(C,S,Z){var Ee=-1,st=C.length;S<0&&(S=-S>st?0:st+S),(Z=Z>st?st:Z)<0&&(Z+=st),st=S>Z?0:Z-S>>>0,S>>>=0;for(var Et=Zn(st);++Ee<st;)Et[Ee]=C[Ee+S];return Et}function Sf(C,S){var Z;return od(C,function(Ee,st,Et){return!(Z=S(Ee,st,Et))}),!!Z}function Jl(C,S,Z){var Ee=0,st=null==C?Ee:C.length;if("number"==typeof S&&S==S&&st<=2147483647){for(;Ee<st;){var Et=Ee+st>>>1,on=C[Et];null!==on&&!Gl(on)&&(Z?on<=S:on<S)?Ee=Et+1:st=Et}return st}return Qp(C,S,Cd,Z)}function Qp(C,S,Z,Ee){var st=0,Et=null==C?0:C.length;if(0===Et)return 0;for(var on=(S=Z(S))!=S,fn=null===S,Pn=Gl(S),Ti=S===D;st<Et;){var Di=na((st+Et)/2),Hi=Z(C[Di]),Tr=Hi!==D,zr=null===Hi,ws=Hi==Hi,oo=Gl(Hi);if(on)var As=Ee||ws;else As=Ti?ws&&(Ee||Tr):fn?ws&&Tr&&(Ee||!zr):Pn?ws&&Tr&&!zr&&(Ee||!oo):!zr&&!oo&&(Ee?Hi<=S:Hi<S);As?st=Di+1:Et=Di}return pl(Et,4294967294)}function Jp(C,S){for(var Z=-1,Ee=C.length,st=0,Et=[];++Z<Ee;){var on=C[Z],fn=S?S(on):on;if(!Z||!Yr(fn,Pn)){var Pn=fn;Et[st++]=0===on?0:on}}return Et}function La(C){return"number"==typeof C?C:Gl(C)?NaN:+C}function Bl(C){if("string"==typeof C)return C;if(Mi(C))return Ta(C,Bl)+"";if(Gl(C))return It?It.call(C):"";var S=C+"";return"0"==S&&1/C==-Ct?"-0":S}function Al(C,S,Z){var Ee=-1,st=Xf,Et=C.length,on=!0,fn=[],Pn=fn;if(Z)on=!1,st=Ar;else if(Et>=200){var Ti=S?null:Zg(C);if(Ti)return Hp(Ti);on=!1,st=mf,Pn=new Er}else Pn=S?[]:fn;e:for(;++Ee<Et;){var Di=C[Ee],Hi=S?S(Di):Di;if(Di=Z||0!==Di?Di:0,on&&Hi==Hi){for(var Tr=Pn.length;Tr--;)if(Pn[Tr]===Hi)continue e;S&&Pn.push(Hi),fn.push(Di)}else st(Pn,Hi,Z)||(Pn!==fn&&Pn.push(Hi),fn.push(Di))}return fn}function Bu(C,S){return null==(C=yl(C,S=ec(S,C)))||delete C[ju(xu(S))]}function $d(C,S,Z,Ee){return yo(C,S,Z(Fu(C,S)),Ee)}function Ua(C,S,Z,Ee){for(var st=C.length,Et=Ee?st:-1;(Ee?Et--:++Et<st)&&S(C[Et],Et,C););return Z?vl(C,Ee?0:Et,Ee?Et+1:st):vl(C,Ee?Et+1:0,Ee?st:Et)}function vu(C,S){var Z=C;return Z instanceof Ps&&(Z=Z.value()),gf(S,function(Ee,st){return st.func.apply(st.thisArg,Mh([Ee],st.args))},Z)}function zu(C,S,Z){var Ee=C.length;if(Ee<2)return Ee?Al(C[0]):[];for(var st=-1,Et=Zn(Ee);++st<Ee;)for(var on=C[st],fn=-1;++fn<Ee;)fn!=st&&(Et[st]=Vd(Et[st]||on,C[fn],S,Z));return Al(ol(Et,1),S,Z)}function Vu(C,S,Z){for(var Ee=-1,st=C.length,Et=S.length,on={};++Ee<st;)Z(on,C[Ee],Ee<Et?S[Ee]:D);return on}function Il(C){return Kr(C)?C:[]}function Pa(C){return"function"==typeof C?C:Cd}function ec(C,S){return Mi(C)?C:ng(C,S)?[C]:rg(Jo(C))}var hp=Os;function hc(C,S,Z){var Ee=C.length;return Z=Z===D?Ee:Z,!S&&Z>=Ee?C:vl(C,S,Z)}var Pv=Ry||function(C){return Xl.clearTimeout(C)};function yu(C,S){if(S)return C.slice();var Z=C.length,Ee=Py?Py(Z):new C.constructor(Z);return C.copy(Ee),Ee}function Sl(C){var S=new C.constructor(C.byteLength);return new yf(S).set(new yf(C)),S}function tc(C,S){var Z=S?Sl(C.buffer):C.buffer;return new C.constructor(Z,C.byteOffset,C.length)}function zl(C,S){if(C!==S){var Z=C!==D,Ee=null===C,st=C==C,Et=Gl(C),on=S!==D,fn=null===S,Pn=S==S,Ti=Gl(S);if(!fn&&!Ti&&!Et&&C>S||Et&&on&&Pn&&!fn&&!Ti||Ee&&on&&Pn||!Z&&Pn||!st)return 1;if(!Ee&&!Et&&!Ti&&C<S||Ti&&Z&&st&&!Ee&&!Et||fn&&Z&&st||!on&&st||!Pn)return-1}return 0}function Om(C,S,Z,Ee){for(var st=-1,Et=C.length,on=Z.length,fn=-1,Pn=S.length,Ti=vs(Et-on,0),Di=Zn(Pn+Ti),Hi=!Ee;++fn<Pn;)Di[fn]=S[fn];for(;++st<on;)(Hi||st<Et)&&(Di[Z[st]]=C[st]);for(;Ti--;)Di[fn++]=C[st++];return Di}function Vh(C,S,Z,Ee){for(var st=-1,Et=C.length,on=-1,fn=Z.length,Pn=-1,Ti=S.length,Di=vs(Et-fn,0),Hi=Zn(Di+Ti),Tr=!Ee;++st<Di;)Hi[st]=C[st];for(var zr=st;++Pn<Ti;)Hi[zr+Pn]=S[Pn];for(;++on<fn;)(Tr||st<Et)&&(Hi[zr+Z[on]]=C[st++]);return Hi}function Js(C,S){var Z=-1,Ee=C.length;for(S||(S=Zn(Ee));++Z<Ee;)S[Z]=C[Z];return S}function fc(C,S,Z,Ee){var st=!Z;Z||(Z={});for(var Et=-1,on=S.length;++Et<on;){var fn=S[Et],Pn=Ee?Ee(Z[fn],C[fn],fn,Z,C):D;Pn===D&&(Pn=C[fn]),st?kh(Z,fn,Pn):bf(Z,fn,Pn)}return Z}function Uh(C,S){return function(Z,Ee){var st=Mi(Z)?qf:xf,Et=S?S():{};return st(Z,C,ss(Ee,2),Et)}}function _u(C){return Os(function(S,Z){var Ee=-1,st=Z.length,Et=st>1?Z[st-1]:D,on=st>2?Z[2]:D;for(Et=C.length>3&&"function"==typeof Et?(st--,Et):D,on&&mc(Z[0],Z[1],on)&&(Et=st<3?D:Et,st=1),S=va(S);++Ee<st;){var fn=Z[Ee];fn&&C(S,fn,Ee,Et)}return S})}function Ef(C,S){return function(Z,Ee){if(null==Z)return Z;if(!Cr(Z))return C(Z,Ee);for(var st=Z.length,Et=S?st:-1,on=va(Z);(S?Et--:++Et<st)&&!1!==Ee(on[Et],Et,on););return Z}}function Tf(C){return function(S,Z,Ee){for(var st=-1,Et=va(S),on=Ee(S),fn=on.length;fn--;){var Pn=on[C?fn:++st];if(!1===Z(Et[Pn],Pn,Et))break}return S}}function pc(C){return function(S){var Z=ah(S=Jo(S))?lh(S):D,Ee=Z?Z[0]:S.charAt(0),st=Z?hc(Z,1).join(""):S.slice(1);return Ee[C]()+st}}function El(C){return function(S){return gf($A(qs(S).replace(R_,"")),C,"")}}function Hh(C){return function(){var S=arguments;switch(S.length){case 0:return new C;case 1:return new C(S[0]);case 2:return new C(S[0],S[1]);case 3:return new C(S[0],S[1],S[2]);case 4:return new C(S[0],S[1],S[2],S[3]);case 5:return new C(S[0],S[1],S[2],S[3],S[4]);case 6:return new C(S[0],S[1],S[2],S[3],S[4],S[5]);case 7:return new C(S[0],S[1],S[2],S[3],S[4],S[5],S[6])}var Z=Lo(C.prototype),Ee=C.apply(Z,S);return rr(Ee)?Ee:Z}}function Uu(C){return function(S,Z,Ee){var st=va(S);if(!Cr(S)){var Et=ss(Z,3);S=Vc(S),Z=function(fn){return Et(st[fn],fn,st)}}var on=C(S,Z,Ee);return on>-1?st[Et?S[on]:on]:D}}function hd(C){return nc(function(S){var Z=S.length,Ee=Z,st=ia.prototype.thru;for(C&&S.reverse();Ee--;){var Et=S[Ee];if("function"!=typeof Et)throw new Ph(P);if(st&&!on&&"wrapper"==gp(Et))var on=new ia([],!0)}for(Ee=on?Ee:Z;++Ee<Z;){var fn=gp(Et=S[Ee]),Pn="wrapper"==fn?fd(Et):D;on=Pn&&Wu(Pn[0])&&424==Pn[1]&&!Pn[4].length&&1==Pn[9]?on[gp(Pn[0])].apply(on,Pn[3]):1==Et.length&&Wu(Et)?on[fn]():on.thru(Et)}return function(){var Ti=arguments,Di=Ti[0];if(on&&1==Ti.length&&Mi(Di))return on.plant(Di).value();for(var Hi=0,Tr=Z?S[Hi].apply(this,Ti):Di;++Hi<Z;)Tr=S[Hi].call(this,Tr);return Tr}})}function Xn(C,S,Z,Ee,st,Et,on,fn,Pn,Ti){var Di=128&S,Hi=1&S,Tr=2&S,zr=24&S,ws=512&S,oo=Tr?D:Hh(C);return function As(){for(var lo=arguments.length,Ro=Zn(lo),qh=lo;qh--;)Ro[qh]=arguments[qh];if(zr)var Xh=Gu(As),Uc=vf(Ro,Xh);if(Ee&&(Ro=Om(Ro,Ee,st,zr)),Et&&(Ro=Vh(Ro,Et,on,zr)),lo-=Uc,zr&&lo<Ti){var rc=pu(Ro,Xh);return Hu(C,S,Xn,As.placeholder,Z,Ro,rc,fn,Pn,Ti-lo)}var Ip=Hi?Z:this,Sp=Tr?Ip[C]:C;return lo=Ro.length,fn?Ro=aa(Ro,fn):ws&&lo>1&&Ro.reverse(),Di&&Pn<lo&&(Ro.length=Pn),this&&this!==Xl&&this instanceof As&&(Sp=oo||Hh(Sp)),Sp.apply(Ip,Ro)}}function Mf(C,S){return function(Z,Ee){return function vo(C,S,Z,Ee){return Lc(C,function(st,Et,on){S(Ee,Z(st),Et,on)}),Ee}(Z,C,S(Ee),{})}}function ha(C,S){return function(Z,Ee){var st;if(Z===D&&Ee===D)return S;if(Z!==D&&(st=Z),Ee!==D){if(st===D)return Ee;"string"==typeof Z||"string"==typeof Ee?(Z=Bl(Z),Ee=Bl(Ee)):(Z=La(Z),Ee=La(Ee)),st=C(Z,Ee)}return st}}function Xd(C){return nc(function(S){return S=Ta(S,Kl(ss())),Os(function(Z){var Ee=this;return C(S,function(st){return Ya(st,Ee,Z)})})})}function Cu(C,S){var Z=(S=S===D?" ":Bl(S)).length;if(Z<2)return Z?Vo(S,C):S;var Ee=Vo(S,Sv(C/sl(S)));return ah(S)?hc(lh(Ee),0,C).join(""):Ee.slice(0,C)}function Kg(C){return function(S,Z,Ee){return Ee&&"number"!=typeof Ee&&mc(S,Z,Ee)&&(Z=Ee=D),S=zc(S),Z===D?(Z=S,S=0):Z=zc(Z),function oa(C,S,Z,Ee){for(var st=-1,Et=vs(Sv((S-C)/(Z||1)),0),on=Zn(Et);Et--;)on[Ee?Et:++st]=C,C+=Z;return on}(S,Z,Ee=Ee===D?S<Z?1:-1:zc(Ee),C)}}function fp(C){return function(S,Z){return"string"==typeof S&&"string"==typeof Z||(S=yd(S),Z=yd(Z)),C(S,Z)}}function Hu(C,S,Z,Ee,st,Et,on,fn,Pn,Ti){var Di=8&S;S|=Di?$:64,4&(S&=~(Di?64:$))||(S&=-4);var oo=[C,S,st,Di?Et:D,Di?on:D,Di?D:Et,Di?D:on,fn,Pn,Ti],As=Z.apply(D,oo);return Wu(C)&&ig(As,oo),As.placeholder=Ee,md(As,C,S)}function Tl(C){var S=Zl[C];return function(Z,Ee){if(Z=yd(Z),(Ee=null==Ee?0:pl(Zs(Ee),292))&&zg(Z)){var st=(Jo(Z)+"e").split("e");return+((st=(Jo(S(st[0]+"e"+(+st[1]+Ee)))+"e").split("e"))[0]+"e"+(+st[1]-Ee))}return S(Z)}}var Zg=es&&1/Hp(new es([,-0]))[1]==Ct?function(C){return new es(C)}:ux;function ph(C){return function(S){var Z=Ra(S);return Z==Pt?Qf(S):Z==ii?function ep(wn){var oi=-1,Zn=Array(wn.size);return wn.forEach(function(Lr){Zn[++oi]=[Lr,Lr]}),Zn}(S):function rl(wn,oi){return Ta(oi,function(Zn){return[Zn,wn[Zn]]})}(S,C(S))}}function eu(C,S,Z,Ee,st,Et,on,fn){var Pn=2&S;if(!Pn&&"function"!=typeof C)throw new Ph(P);var Ti=Ee?Ee.length:0;if(Ti||(S&=-97,Ee=st=D),on=on===D?on:vs(Zs(on),0),fn=fn===D?fn:Zs(fn),Ti-=st?st.length:0,64&S){var Di=Ee,Hi=st;Ee=st=D}var Tr=Pn?D:fd(C),zr=[C,S,Z,Ee,st,Di,Hi,Et,on,fn];if(Tr&&function yp(C,S){var Z=C[1],Ee=S[1],st=Z|Ee;if(!(st<131||(128==Ee&&8==Z||128==Ee&&256==Z&&C[7].length<=S[8]||384==Ee&&S[7].length<=S[8]&&8==Z)))return C;1&Ee&&(C[2]=S[2],st|=1&Z?0:4);var fn=S[3];if(fn){var Pn=C[3];C[3]=Pn?Om(Pn,fn,S[4]):fn,C[4]=Pn?pu(C[3],J):S[4]}(fn=S[5])&&(C[5]=(Pn=C[5])?Vh(Pn,fn,S[6]):fn,C[6]=Pn?pu(C[5],J):S[6]),(fn=S[7])&&(C[7]=fn),128&Ee&&(C[8]=null==C[8]?S[8]:pl(C[8],S[8])),null==C[9]&&(C[9]=S[9]),C[0]=S[0],C[1]=st}(zr,Tr),C=zr[0],S=zr[1],Z=zr[2],Ee=zr[3],st=zr[4],!(fn=zr[9]=zr[9]===D?Pn?0:C.length:vs(zr[9]-Ti,0))&&24&S&&(S&=-25),S&&1!=S)ws=8==S||16==S?function qd(C,S,Z){var Ee=Hh(C);return function st(){for(var Et=arguments.length,on=Zn(Et),fn=Et,Pn=Gu(st);fn--;)on[fn]=arguments[fn];var Ti=Et<3&&on[0]!==Pn&&on[Et-1]!==Pn?[]:pu(on,Pn);return(Et-=Ti.length)<Z?Hu(C,S,Xn,st.placeholder,D,on,Ti,D,D,Z-Et):Ya(this&&this!==Xl&&this instanceof st?Ee:C,this,on)}}(C,S,fn):S!=$&&33!=S||st.length?Xn.apply(D,zr):function Fm(C,S,Z,Ee){var st=1&S,Et=Hh(C);return function on(){for(var fn=-1,Pn=arguments.length,Ti=-1,Di=Ee.length,Hi=Zn(Di+Pn),Tr=this&&this!==Xl&&this instanceof on?Et:C;++Ti<Di;)Hi[Ti]=Ee[Ti];for(;Pn--;)Hi[Ti++]=arguments[++fn];return Ya(Tr,st?Z:this,Hi)}}(C,S,Z,Ee);else var ws=function Yg(C,S,Z){var Ee=1&S,st=Hh(C);return function Et(){return(this&&this!==Xl&&this instanceof Et?st:C).apply(Ee?Z:this,arguments)}}(C,S,Z);return md((Tr?If:ig)(ws,zr),C,S)}function Qg(C,S,Z,Ee){return C===D||Yr(C,Og[Z])&&!ta.call(Ee,Z)?S:C}function pp(C,S,Z,Ee,st,Et){return rr(C)&&rr(S)&&(Et.set(S,C),zo(C,S,D,pp,Et),Et.delete(S)),C}function Vl(C){return So(C)?D:C}function gh(C,S,Z,Ee,st,Et){var on=1&Z,fn=C.length,Pn=S.length;if(fn!=Pn&&!(on&&Pn>fn))return!1;var Ti=Et.get(C),Di=Et.get(S);if(Ti&&Di)return Ti==S&&Di==C;var Hi=-1,Tr=!0,zr=2&Z?new Er:D;for(Et.set(C,S),Et.set(S,C);++Hi<fn;){var ws=C[Hi],oo=S[Hi];if(Ee)var As=on?Ee(oo,ws,Hi,S,C,Et):Ee(ws,oo,Hi,C,S,Et);if(As!==D){if(As)continue;Tr=!1;break}if(zr){if(!wm(S,function(lo,Ro){if(!mf(zr,Ro)&&(ws===lo||st(ws,lo,Z,Ee,Et)))return zr.push(Ro)})){Tr=!1;break}}else if(ws!==oo&&!st(ws,oo,Z,Ee,Et)){Tr=!1;break}}return Et.delete(C),Et.delete(S),Tr}function nc(C){return Wh(tm(C,D,kf),C+"")}function bu(C){return gu(C,Vc,vp)}function Yd(C){return gu(C,wu,eg)}var fd=sd?function(C){return sd.get(C)}:ux;function gp(C){for(var S=C.name+"",Z=jp[S],Ee=ta.call(jp,S)?Z.length:0;Ee--;){var st=Z[Ee],Et=st.func;if(null==Et||Et==C)return st.name}return S}function Gu(C){return(ta.call(ut,"placeholder")?ut:C).placeholder}function ss(){var C=ut.iteratee||CC;return C=C===CC?Nh:C,arguments.length?C(arguments[0],arguments[1]):C}function mp(C,S){var Z=C.__data__;return function Vm(C){var S=typeof C;return"string"==S||"number"==S||"symbol"==S||"boolean"==S?"__proto__"!==C:null===C}(S)?Z["string"==typeof S?"string":"hash"]:Z.map}function em(C){for(var S=Vc(C),Z=S.length;Z--;){var Ee=S[Z],st=C[Ee];S[Z]=[Ee,st,Zd(st)]}return S}function Kd(C,S){var Z=function oh(wn,oi){return null==wn?D:wn[oi]}(C,S);return Hd(Z)?Z:D}var vp=Bg?function(C){return null==C?[]:(C=va(C),sh(Bg(C),function(S){return Mm.call(C,S)}))}:e0,eg=Bg?function(C){for(var S=[];C;)Mh(S,vp(C)),C=ip(C);return S}:e0,Ra=sa;function Bm(C,S,Z){for(var Ee=-1,st=(S=ec(S,C)).length,Et=!1;++Ee<st;){var on=ju(S[Ee]);if(!(Et=null!=C&&Z(C,on)))break;C=C[on]}return Et||++Ee!=st?Et:!!(st=null==C?0:C.length)&&Zi(st)&&gc(on,st)&&(Mi(C)||$r(C))}function tg(C){return"function"!=typeof C.constructor||vh(C)?{}:Lo(ip(C))}function ka(C){return Mi(C)||$r(C)||!!(Ng&&C&&C[Ng])}function gc(C,S){var Z=typeof C;return!!(S=S??kn)&&("number"==Z||"symbol"!=Z&&_t.test(C))&&C>-1&&C%1==0&&C<S}function mc(C,S,Z){if(!rr(Z))return!1;var Ee=typeof S;return!!("number"==Ee?Cr(Z)&&gc(S,Z.length):"string"==Ee&&S in Z)&&Yr(Z[S],C)}function ng(C,S){if(Mi(C))return!1;var Z=typeof C;return!("number"!=Z&&"symbol"!=Z&&"boolean"!=Z&&null!=C&&!Gl(C))||ff.test(C)||!nh.test(C)||null!=S&&C in va(S)}function Wu(C){var S=gp(C),Z=ut[S];if("function"!=typeof Z||!(S in Ps.prototype))return!1;if(C===Z)return!0;var Ee=fd(Z);return!!Ee&&C===Ee[0]}($s&&Ra(new $s(new ArrayBuffer(1)))!=tl||jr&&Ra(new jr)!=Pt||Vg&&Ra(Vg.resolve())!=Me||es&&Ra(new es)!=ii||as&&Ra(new as)!=bs)&&(Ra=function(C){var S=sa(C),Z=S==Te?C.constructor:D,Ee=Z?jh(Z):"";if(Ee)switch(Ee){case V_:return tl;case Oy:return Pt;case Ks:return Me;case Zc:return ii;case mi:return bs}return S});var pd=wv?dn:Ap;function vh(C){var S=C&&C.constructor;return C===("function"==typeof S&&S.prototype||Og)}function Zd(C){return C==C&&!rr(C)}function tu(C,S){return function(Z){return null!=Z&&Z[C]===S&&(S!==D||C in va(Z))}}function tm(C,S,Z){return S=vs(S===D?C.length-1:S,0),function(){for(var Ee=arguments,st=-1,Et=vs(Ee.length-S,0),on=Zn(Et);++st<Et;)on[st]=Ee[S+st];st=-1;for(var fn=Zn(S+1);++st<S;)fn[st]=Ee[st];return fn[S]=Z(on),Ya(C,this,fn)}}function yl(C,S){return S.length<2?C:Fu(C,vl(S,0,-1))}function aa(C,S){for(var Z=C.length,Ee=pl(S.length,Z),st=Js(C);Ee--;){var Et=S[Ee];C[Ee]=gc(Et,Z)?st[Et]:D}return C}function Pf(C,S){if(("constructor"!==S||"function"!=typeof C[S])&&"__proto__"!=S)return C[S]}var ig=Qd(If),Gh=ky||function(C,S){return Xl.setTimeout(C,S)},Wh=Qd(Kp);function md(C,S,Z){var Ee=S+"";return Wh(C,function kc(C,S){var Z=S.length;if(!Z)return C;var Ee=Z-1;return S[Ee]=(Z>1?"& ":"")+S[Ee],S=S.join(Z>2?", ":" "),C.replace(pf,"{\n/* [wrapped with "+S+"] */\n")}(Ee,function sg(C,S){return Ka(xn,function(Z){var Ee="_."+Z[0];S&Z[1]&&!Xf(C,Ee)&&C.push(Ee)}),C.sort()}(function Ul(C){var S=C.match(fl);return S?S[1].split(wc):[]}(Ee),Z)))}function Qd(C){var S=0,Z=0;return function(){var Ee=Tc(),st=16-(Ee-Z);if(Z=Ee,st>0){if(++S>=800)return arguments[0]}else S=0;return C.apply(D,arguments)}}function vd(C,S){var Z=-1,Ee=C.length,st=Ee-1;for(S=S===D?Ee:S;++Z<S;){var Et=ud(Z,st),on=C[Et];C[Et]=C[Z],C[Z]=on}return C.length=S,C}var rg=function gd(C){var S=gn(C,function(Ee){return 500===Z.size&&Z.clear(),Ee}),Z=S.cache;return S}(function(C){var S=[];return 46===C.charCodeAt(0)&&S.push(""),C.replace(Pd,function(Z,Ee,st,Et){S.push(st?Et.replace(nd,"$1"):Ee||Z)}),S});function ju(C){if("string"==typeof C||Gl(C))return C;var S=C+"";return"0"==S&&1/C==-Ct?"-0":S}function jh(C){if(null!=C){try{return Av.call(C)}catch{}try{return C+""}catch{}}return""}function nm(C){if(C instanceof Ps)return C.clone();var S=new ia(C.__wrapped__,C.__chain__);return S.__actions__=Js(C.__actions__),S.__index__=C.__index__,S.__values__=C.__values__,S}var Oc=Os(function(C,S){return Kr(C)?Vd(C,ol(S,1,Kr,!0)):[]}),Rf=Os(function(C,S){var Z=xu(S);return Kr(Z)&&(Z=D),Kr(C)?Vd(C,ol(S,1,Kr,!0),ss(Z,2)):[]}),Hm=Os(function(C,S){var Z=xu(S);return Kr(Z)&&(Z=D),Kr(C)?Vd(C,ol(S,1,Kr,!0),D,Z):[]});function cl(C,S,Z){var Ee=null==C?0:C.length;if(!Ee)return-1;var st=null==Z?0:Zs(Z);return st<0&&(st=vs(Ee+st,0)),Ol(C,ss(S,3),st)}function Gm(C,S,Z){var Ee=null==C?0:C.length;if(!Ee)return-1;var st=Ee-1;return Z!==D&&(st=Zs(Z),st=Z<0?vs(Ee+st,0):pl(st,Ee-1)),Ol(C,ss(S,3),st,!0)}function kf(C){return null!=C&&C.length?ol(C,1):[]}function Uy(C){return C&&C.length?C[0]:D}var j_=Os(function(C){var S=Ta(C,Il);return S.length&&S[0]===C[0]?mu(S):[]}),Hy=Os(function(C){var S=xu(C),Z=Ta(C,Il);return S===xu(Z)?S=D:Z.pop(),Z.length&&Z[0]===C[0]?mu(Z,ss(S,2)):[]}),Wm=Os(function(C){var S=xu(C),Z=Ta(C,Il);return(S="function"==typeof S?S:D)&&Z.pop(),Z.length&&Z[0]===C[0]?mu(Z,D,S):[]});function xu(C){var S=null==C?0:C.length;return S?C[S-1]:D}var Oa=Os(Fv);function Fv(C,S){return C&&C.length&&S&&S.length?Da(C,S):C}var Gy=nc(function(C,S){var Z=null==C?0:C.length,Ee=wf(C,S);return Jc(C,Ta(S,function(st){return gc(st,Z)?+st:st}).sort(zl)),Ee});function jm(C){return null==C?C:kr.call(C)}var R=Os(function(C){return Al(ol(C,1,Kr,!0))}),N=Os(function(C){var S=xu(C);return Kr(S)&&(S=D),Al(ol(C,1,Kr,!0),ss(S,2))}),ie=Os(function(C){var S=xu(C);return S="function"==typeof S?S:D,Al(ol(C,1,Kr,!0),D,S)});function Le(C){if(!C||!C.length)return[];var S=0;return C=sh(C,function(Z){if(Kr(Z))return S=vs(Z.length,S),!0}),rd(S,function(Z){return Ta(C,Ss(Z))})}function ke(C,S){if(!C||!C.length)return[];var Z=Le(C);return null==S?Z:Ta(Z,function(Ee){return Ya(S,D,Ee)})}var Fe=Os(function(C,S){return Kr(C)?Vd(C,S):[]}),nt=Os(function(C){return zu(sh(C,Kr))}),tt=Os(function(C){var S=xu(C);return Kr(S)&&(S=D),zu(sh(C,Kr),ss(S,2))}),Ke=Os(function(C){var S=xu(C);return S="function"==typeof S?S:D,zu(sh(C,Kr),D,S)}),pt=Os(Le),Bt=Os(function(C){var S=C.length,Z=S>1?C[S-1]:D;return Z="function"==typeof Z?(C.pop(),Z):D,ke(C,Z)});function cn(C){var S=ut(C);return S.__chain__=!0,S}function en(C,S){return S(C)}var hn=nc(function(C){var S=C.length,Z=S?C[0]:0,Ee=this.__wrapped__,st=function(Et){return wf(Et,C)};return!(S>1||this.__actions__.length)&&Ee instanceof Ps&&gc(Z)?((Ee=Ee.slice(Z,+Z+(S?1:0))).__actions__.push({func:en,args:[st],thisArg:D}),new ia(Ee,this.__chain__).thru(function(Et){return S&&!Et.length&&Et.push(D),Et})):this.thru(st)}),Ii=Uh(function(C,S,Z){ta.call(C,Z)?++C[Z]:kh(C,Z,1)}),nr=Uu(cl),zi=Uu(Gm);function c(C,S){return(Mi(C)?Ka:od)(C,ss(S,3))}function d(C,S){return(Mi(C)?il:Dv)(C,ss(S,3))}var m=Uh(function(C,S,Z){ta.call(C,Z)?C[Z].push(S):kh(C,Z,[S])}),b=Os(function(C,S,Z){var Ee=-1,st="function"==typeof S,Et=Cr(C)?Zn(C.length):[];return od(C,function(on){Et[++Ee]=st?Ya(S,on,Z):Pc(on,S,Z)}),Et}),w=Uh(function(C,S,Z){kh(C,Z,S)});function E(C,S){return(Mi(C)?Ta:up)(C,ss(S,3))}var L=Uh(function(C,S,Z){C[Z?0:1].push(S)},function(){return[[],[]]}),Qe=Os(function(C,S){if(null==C)return[];var Z=S.length;return Z>1&&mc(C,S[0],S[1])?S=[]:Z>2&&mc(S[0],S[1],S[2])&&(S=[S[0]]),Za(C,ol(S,1),[])}),qe=Dm||function(){return Xl.Date.now()};function Lt(C,S,Z){return S=Z?D:S,eu(C,128,D,D,D,D,S=C&&null==S?C.length:S)}function kt(C,S){var Z;if("function"!=typeof S)throw new Ph(P);return C=Zs(C),function(){return--C>0&&(Z=S.apply(this,arguments)),C<=1&&(S=D),Z}}var mt=Os(function(C,S,Z){var Ee=1;if(Z.length){var st=pu(Z,Gu(mt));Ee|=$}return eu(C,Ee,S,Z,st)}),Ft=Os(function(C,S,Z){var Ee=3;if(Z.length){var st=pu(Z,Gu(Ft));Ee|=$}return eu(S,Ee,C,Z,st)});function Vt(C,S,Z){var Ee,st,Et,on,fn,Pn,Ti=0,Di=!1,Hi=!1,Tr=!0;if("function"!=typeof C)throw new Ph(P);function zr(rc){var Ip=Ee,Sp=st;return Ee=st=D,Ti=rc,on=C.apply(Sp,Ip)}function ws(rc){return Ti=rc,fn=Gh(lo,S),Di?zr(rc):on}function As(rc){var Ip=rc-Pn;return Pn===D||Ip>=S||Ip<0||Hi&&rc-Ti>=Et}function lo(){var rc=qe();if(As(rc))return Ro(rc);fn=Gh(lo,function oo(rc){var iI=S-(rc-Pn);return Hi?pl(iI,Et-(rc-Ti)):iI}(rc))}function Ro(rc){return fn=D,Tr&&Ee?zr(rc):(Ee=st=D,on)}function Uc(){var rc=qe(),Ip=As(rc);if(Ee=arguments,st=this,Pn=rc,Ip){if(fn===D)return ws(Pn);if(Hi)return Pv(fn),fn=Gh(lo,S),zr(Pn)}return fn===D&&(fn=Gh(lo,S)),on}return S=yd(S)||0,rr(Z)&&(Di=!!Z.leading,Et=(Hi="maxWait"in Z)?vs(yd(Z.maxWait)||0,S):Et,Tr="trailing"in Z?!!Z.trailing:Tr),Uc.cancel=function qh(){fn!==D&&Pv(fn),Ti=0,Ee=Pn=st=fn=D},Uc.flush=function Xh(){return fn===D?on:Ro(qe())},Uc}var et=Os(function(C,S){return Ny(C,1,S)}),Wt=Os(function(C,S,Z){return Ny(C,yd(S)||0,Z)});function gn(C,S){if("function"!=typeof C||null!=S&&"function"!=typeof S)throw new Ph(P);var Z=function(){var Ee=arguments,st=S?S.apply(this,Ee):Ee[0],Et=Z.cache;if(Et.has(st))return Et.get(st);var on=C.apply(this,Ee);return Z.cache=Et.set(st,on)||Et,on};return Z.cache=new(gn.Cache||rs),Z}function Kt(C){if("function"!=typeof C)throw new Ph(P);return function(){var S=arguments;switch(S.length){case 0:return!C.call(this);case 1:return!C.call(this,S[0]);case 2:return!C.call(this,S[0],S[1]);case 3:return!C.call(this,S[0],S[1],S[2])}return!C.apply(this,S)}}gn.Cache=rs;var Sn=hp(function(C,S){var Z=(S=1==S.length&&Mi(S[0])?Ta(S[0],Kl(ss())):Ta(ol(S,1),Kl(ss()))).length;return Os(function(Ee){for(var st=-1,Et=pl(Ee.length,Z);++st<Et;)Ee[st]=S[st].call(this,Ee[st]);return Ya(C,this,Ee)})}),Rn=Os(function(C,S){var Z=pu(S,Gu(Rn));return eu(C,$,D,S,Z)}),Jn=Os(function(C,S){var Z=pu(S,Gu(Jn));return eu(C,64,D,S,Z)}),En=nc(function(C,S){return eu(C,256,D,D,D,S)});function Yr(C,S){return C===S||C!=C&&S!=S}var pr=fp(ad),tr=fp(function(C,S){return C>=S}),$r=js(function(){return arguments}())?js:function(C){return ni(C)&&ta.call(C,"callee")&&!Mm.call(C,"callee")},Mi=Zn.isArray,yr=Ea?Kl(Ea):function ap(C){return ni(C)&&sa(C)==er};function Cr(C){return null!=C&&Zi(C.length)&&!dn(C)}function Kr(C){return ni(C)&&Cr(C)}var Zr=Wp||Ap,Ui=io?Kl(io):function lp(C){return ni(C)&&sa(C)==Dt};function lt(C){if(!ni(C))return!1;var S=sa(C);return S==ci||"[object DOMException]"==S||"string"==typeof C.message&&"string"==typeof C.name&&!So(C)}function dn(C){if(!rr(C))return!1;var S=sa(C);return S==$i||S==At||"[object AsyncFunction]"==S||"[object Proxy]"==S}function pn(C){return"number"==typeof C&&C==Zs(C)}function Zi(C){return"number"==typeof C&&C>-1&&C%1==0&&C<=kn}function rr(C){var S=typeof C;return null!=C&&("object"==S||"function"==S)}function ni(C){return null!=C&&"object"==typeof C}var Or=F_?Kl(F_):function qg(C){return ni(C)&&Ra(C)==Pt};function Uo(C){return"number"==typeof C||ni(C)&&sa(C)==un}function So(C){if(!ni(C)||sa(C)!=Te)return!1;var S=ip(C);if(null===S)return!0;var Z=ta.call(S,"constructor")&&S.constructor;return"function"==typeof Z&&Z instanceof Z&&Av.call(Z)==aC}var Xo=Ty?Kl(Ty):function Gd(C){return ni(C)&&sa(C)==vn},Ha=kd?Kl(kd):function Ql(C){return ni(C)&&Ra(C)==ii};function Hl(C){return"string"==typeof C||!Mi(C)&&ni(C)&&sa(C)==Fi}function Gl(C){return"symbol"==typeof C||ni(C)&&sa(C)==Hs}var Fc=go?Kl(go):function ll(C){return ni(C)&&Zi(C.length)&&!!Sa[sa(C)]},ic=fp(Wd),Bc=fp(function(C,S){return C<=S});function bp(C){if(!C)return[];if(Cr(C))return Hl(C)?lh(C):Js(C);if(Gp&&C[Gp])return function ma(wn){for(var oi,Zn=[];!(oi=wn.next()).done;)Zn.push(oi.value);return Zn}(C[Gp]());var S=Ra(C);return(S==Pt?Qf:S==ii?Hp:Yy)(C)}function zc(C){return C?(C=yd(C))===Ct||C===-Ct?17976931348623157e292*(C<0?-1:1):C==C?C:0:0===C?C:0}function Zs(C){var S=zc(C),Z=S%1;return S==S?Z?S-Z:S:0}function dC(C){return C?Af(Zs(C),0,Jt):0}function yd(C){if("number"==typeof C)return C;if(Gl(C))return NaN;if(rr(C)){var S="function"==typeof C.valueOf?C.valueOf():C;C=rr(S)?S+"":S}if("string"!=typeof C)return 0===C?C:+C;C=Up(C);var Z=he.test(C);return Z||$e.test(C)?vv(C.slice(2),Z?2:8):Ye.test(C)?NaN:+C}function Y_(C){return fc(C,wu(C))}function Jo(C){return null==C?"":Bl(C)}var Z_=_u(function(C,S){if(vh(S)||Cr(S))fc(S,Vc(S),C);else for(var Z in S)ta.call(S,Z)&&bf(C,Z,S[Z])}),fC=_u(function(C,S){fc(S,wu(S),C)}),lg=_u(function(C,S,Z,Ee){fc(S,wu(S),C,Ee)}),qy=_u(function(C,S,Z,Ee){fc(S,Vc(S),C,Ee)}),zv=nc(wf),Q_=Os(function(C,S){C=va(C);var Z=-1,Ee=S.length,st=Ee>2?S[2]:D;for(st&&mc(S[0],S[1],st)&&(Ee=1);++Z<Ee;)for(var Et=S[Z],on=wu(Et),fn=-1,Pn=on.length;++fn<Pn;){var Ti=on[fn],Di=C[Ti];(Di===D||Yr(Di,Og[Ti])&&!ta.call(C,Ti))&&(C[Ti]=Et[Ti])}return C}),pC=Os(function(C){return C.push(D,pp),Ya(MA,D,C)});function vC(C,S,Z){var Ee=null==C?D:Fu(C,S);return Ee===D?Z:Ee}function Xy(C,S){return null!=C&&Bm(C,S,$g)}var SA=Mf(function(C,S,Z){null!=S&&"function"!=typeof S.toString&&(S=Em.call(S)),C[S]=Z},ax(Cd)),nx=Mf(function(C,S,Z){null!=S&&"function"!=typeof S.toString&&(S=Em.call(S)),ta.call(C,S)?C[S].push(Z):C[S]=[Z]},ss),EA=Os(Pc);function Vc(C){return Cr(C)?Va(C):Qc(C)}function wu(C){return Cr(C)?Va(C,!0):function ld(C){if(!rr(C))return function Um(C){var S=[];if(null!=C)for(var Z in va(C))S.push(Z);return S}(C);var S=vh(C),Z=[];for(var Ee in C)"constructor"==Ee&&(S||!ta.call(C,Ee))||Z.push(Ee);return Z}(C)}var tT=_u(function(C,S,Z){zo(C,S,Z)}),MA=_u(function(C,S,Z,Ee){zo(C,S,Z,Ee)}),DA=nc(function(C,S){var Z={};if(null==C)return Z;var Ee=!1;S=Ta(S,function(Et){return Et=ec(Et,C),Ee||(Ee=Et.length>1),Et}),fc(C,Yd(C),Z),Ee&&(Z=ml(Z,7,Vl));for(var st=S.length;st--;)Bu(Z,S[st]);return Z}),LA=nc(function(C,S){return null==C?{}:function cd(C,S){return Nu(C,S,function(Z,Ee){return Xy(C,Ee)})}(C,S)});function nT(C,S){if(null==C)return{};var Z=Ta(Yd(C),function(Ee){return[Ee]});return S=ss(S),Nu(C,Z,function(Ee,st){return S(Ee,st[0])})}var kA=ph(Vc),OA=ph(wu);function Yy(C){return null==C?[]:Ws(C,Vc(C))}var cT=El(function(C,S,Z){return S=S.toLowerCase(),C+(Z?BA(S):S)});function BA(C){return $m(Jo(C).toLowerCase())}function qs(C){return(C=Jo(C))&&C.replace(zt,Ec).replace(cc,"")}var uT=El(function(C,S,Z){return C+(Z?"-":"")+S.toLowerCase()}),hT=El(function(C,S,Z){return C+(Z?" ":"")+S.toLowerCase()}),UA=pc("toLowerCase"),WA=El(function(C,S,Z){return C+(Z?"_":"")+S.toLowerCase()}),gT=El(function(C,S,Z){return C+(Z?" ":"")+$m(S)}),yT=El(function(C,S,Z){return C+(Z?" ":"")+S.toUpperCase()}),$m=pc("toUpperCase");function $A(C,S,Z){return C=Jo(C),(S=Z?D:S)===D?function Dy(wn){return Sc.test(wn)}(C)?function kg(wn){return wn.match(oC)||[]}(C):function hu(wn){return wn.match(nl)||[]}(C):C.match(S)||[]}var ox=Os(function(C,S){try{return Ya(C,D,S)}catch(Z){return lt(Z)?Z:new Bs(Z)}}),_C=nc(function(C,S){return Ka(S,function(Z){Z=ju(Z),kh(C,Z,mt(C[Z],C))}),C});function ax(C){return function(){return C}}var bT=hd(),xT=hd(!0);function Cd(C){return C}function CC(C){return Nh("function"==typeof C?C:ml(C,1))}var YA=Os(function(C,S){return function(Z){return Pc(Z,C,S)}}),lx=Os(function(C,S){return function(Z){return Pc(C,Z,S)}});function KA(C,S,Z){var Ee=Vc(S),st=uh(S,Ee);null==Z&&(!rr(S)||!st.length&&Ee.length)&&(Z=S,S=C,C=this,st=uh(S,Vc(S)));var Et=!(rr(Z)&&"chain"in Z&&!Z.chain),on=dn(C);return Ka(st,function(fn){var Pn=S[fn];C[fn]=Pn,on&&(C.prototype[fn]=function(){var Ti=this.__chain__;if(Et||Ti){var Di=C(this.__wrapped__),Hi=Di.__actions__=Js(this.__actions__);return Hi.push({func:Pn,args:arguments,thisArg:C}),Di.__chain__=Ti,Di}return Pn.apply(C,Mh([this.value()],arguments))})}),C}function ux(){}var Qt=Xd(Ta),hx=Xd(uu),ZA=Xd(wm);function J_(C){return ng(C)?Ss(ju(C)):function zh(C){return function(S){return Fu(S,C)}}(C)}var QA=Kg(),AT=Kg(!0);function e0(){return[]}function Ap(){return!1}var bC=ha(function(C,S){return C+S},0),xC=Tl("ceil"),px=ha(function(C,S){return C/S},1),gx=Tl("floor"),tI=ha(function(C,S){return C*S},1),$R=Tl("round"),MT=ha(function(C,S){return C-S},0);return ut.after=function dt(C,S){if("function"!=typeof S)throw new Ph(P);return C=Zs(C),function(){if(--C<1)return S.apply(this,arguments)}},ut.ary=Lt,ut.assign=Z_,ut.assignIn=fC,ut.assignInWith=lg,ut.assignWith=qy,ut.at=zv,ut.before=kt,ut.bind=mt,ut.bindAll=_C,ut.bindKey=Ft,ut.castArray=function Mn(){if(!arguments.length)return[];var C=arguments[0];return Mi(C)?C:[C]},ut.chain=cn,ut.chunk=function og(C,S,Z){S=(Z?mc(C,S,Z):S===D)?1:vs(Zs(S),0);var Ee=null==C?0:C.length;if(!Ee||S<1)return[];for(var st=0,Et=0,on=Zn(Sv(Ee/S));st<Ee;)on[Et++]=vl(C,st,st+=S);return on},ut.compact=function ag(C){for(var S=-1,Z=null==C?0:C.length,Ee=0,st=[];++S<Z;){var Et=C[S];Et&&(st[Ee++]=Et)}return st},ut.concat=function Rv(){var C=arguments.length;if(!C)return[];for(var S=Zn(C-1),Z=arguments[0],Ee=C;Ee--;)S[Ee-1]=arguments[Ee];return Mh(Mi(Z)?Js(Z):[Z],ol(S,1))},ut.cond=function _T(C){var S=null==C?0:C.length,Z=ss();return C=S?Ta(C,function(Ee){if("function"!=typeof Ee[1])throw new Ph(P);return[Z(Ee[0]),Ee[1]]}):[],Os(function(Ee){for(var st=-1;++st<S;){var Et=C[st];if(Ya(Et[0],this,Ee))return Ya(Et[1],this,Ee)}})},ut.conforms=function qA(C){return function qp(C){var S=Vc(C);return function(Z){return Fy(Z,C,S)}}(ml(C,1))},ut.constant=ax,ut.countBy=Ii,ut.create=function cg(C,S){var Z=Lo(C);return null==S?Z:zd(Z,S)},ut.curry=function bt(C,S,Z){var Ee=eu(C,8,D,D,D,D,D,S=Z?D:S);return Ee.placeholder=bt.placeholder,Ee},ut.curryRight=function Ht(C,S,Z){var Ee=eu(C,16,D,D,D,D,D,S=Z?D:S);return Ee.placeholder=Ht.placeholder,Ee},ut.debounce=Vt,ut.defaults=Q_,ut.defaultsDeep=pC,ut.defer=et,ut.delay=Wt,ut.difference=Oc,ut.differenceBy=Rf,ut.differenceWith=Hm,ut.drop=function By(C,S,Z){var Ee=null==C?0:C.length;return Ee?vl(C,(S=Z||S===D?1:Zs(S))<0?0:S,Ee):[]},ut.dropRight=function zy(C,S,Z){var Ee=null==C?0:C.length;return Ee?vl(C,0,(S=Ee-(S=Z||S===D?1:Zs(S)))<0?0:S):[]},ut.dropRightWhile=function im(C,S){return C&&C.length?Ua(C,ss(S,3),!0,!0):[]},ut.dropWhile=function cC(C,S){return C&&C.length?Ua(C,ss(S,3),!0):[]},ut.fill=function _p(C,S,Z,Ee){var st=null==C?0:C.length;return st?(Z&&"number"!=typeof Z&&mc(C,S,Z)&&(Z=0,Ee=st),function lC(C,S,Z,Ee){var st=C.length;for((Z=Zs(Z))<0&&(Z=-Z>st?0:st+Z),(Ee=Ee===D||Ee>st?st:Zs(Ee))<0&&(Ee+=st),Ee=Z>Ee?0:dC(Ee);Z<Ee;)C[Z++]=S;return C}(C,S,Z,Ee)):[]},ut.filter=function fi(C,S){return(Mi(C)?sh:Xp)(C,ss(S,3))},ut.flatMap=function qn(C,S){return ol(E(C,S),1)},ut.flatMapDeep=function Hn(C,S){return ol(E(C,S),Ct)},ut.flatMapDepth=function f(C,S,Z){return Z=Z===D?1:Zs(Z),ol(E(C,S),Z)},ut.flatten=kf,ut.flattenDeep=function kv(C){return null!=C&&C.length?ol(C,Ct):[]},ut.flattenDepth=function uC(C,S){return null!=C&&C.length?ol(C,S=S===D?1:Zs(S)):[]},ut.flip=function Tt(C){return eu(C,512)},ut.flow=bT,ut.flowRight=xT,ut.fromPairs=function Vy(C){for(var S=-1,Z=null==C?0:C.length,Ee={};++S<Z;){var st=C[S];Ee[st[0]]=st[1]}return Ee},ut.functions=function IA(C){return null==C?[]:uh(C,Vc(C))},ut.functionsIn=function tx(C){return null==C?[]:uh(C,wu(C))},ut.groupBy=m,ut.initial=function W_(C){return null!=C&&C.length?vl(C,0,-1):[]},ut.intersection=j_,ut.intersectionBy=Hy,ut.intersectionWith=Wm,ut.invert=SA,ut.invertBy=nx,ut.invokeMap=b,ut.iteratee=CC,ut.keyBy=w,ut.keys=Vc,ut.keysIn=wu,ut.map=E,ut.mapKeys=function eT(C,S){var Z={};return S=ss(S,3),Lc(C,function(Ee,st,Et){kh(Z,S(Ee,st,Et),Ee)}),Z},ut.mapValues=function TA(C,S){var Z={};return S=ss(S,3),Lc(C,function(Ee,st,Et){kh(Z,st,S(Ee,st,Et))}),Z},ut.matches=function wT(C){return dh(ml(C,1))},ut.matchesProperty=function XA(C,S){return Yp(C,ml(S,1))},ut.memoize=gn,ut.merge=tT,ut.mergeWith=MA,ut.method=YA,ut.methodOf=lx,ut.mixin=KA,ut.negate=Kt,ut.nthArg=function HR(C){return C=Zs(C),Os(function(S){return Bh(S,C)})},ut.omit=DA,ut.omitBy=function ix(C,S){return nT(C,Kt(ss(S)))},ut.once=function ln(C){return kt(2,C)},ut.orderBy=function k(C,S,Z,Ee){return null==C?[]:(Mi(S)||(S=null==S?[]:[S]),Mi(Z=Ee?D:Z)||(Z=null==Z?[]:[Z]),Za(C,S,Z))},ut.over=Qt,ut.overArgs=Sn,ut.overEvery=hx,ut.overSome=ZA,ut.partial=Rn,ut.partialRight=Jn,ut.partition=L,ut.pick=LA,ut.pickBy=nT,ut.property=J_,ut.propertyOf=function wp(C){return function(S){return null==C?D:Fu(C,S)}},ut.pull=Oa,ut.pullAll=Fv,ut.pullAllBy=function $h(C,S,Z){return C&&C.length&&S&&S.length?Da(C,S,ss(Z,2)):C},ut.pullAllWith=function Nv(C,S,Z){return C&&C.length&&S&&S.length?Da(C,S,D,Z):C},ut.pullAt=Gy,ut.range=QA,ut.rangeRight=AT,ut.rearg=En,ut.reject=function le(C,S){return(Mi(C)?sh:Xp)(C,Kt(ss(S,3)))},ut.remove=function q_(C,S){var Z=[];if(!C||!C.length)return Z;var Ee=-1,st=[],Et=C.length;for(S=ss(S,3);++Ee<Et;){var on=C[Ee];S(on,Ee,C)&&(Z.push(on),st.push(Ee))}return Jc(C,st),Z},ut.rest=function Yn(C,S){if("function"!=typeof C)throw new Ph(P);return Os(C,S=S===D?S:Zs(S))},ut.reverse=jm,ut.sampleSize=function pe(C,S,Z){return S=(Z?mc(C,S,Z):S===D)?1:Zs(S),(Mi(C)?Mv:Rm)(C,S)},ut.set=function iT(C,S,Z){return null==C?C:yo(C,S,Z)},ut.setWith=function RA(C,S,Z,Ee){return Ee="function"==typeof Ee?Ee:D,null==C?C:yo(C,S,Z,Ee)},ut.shuffle=function Ie(C){return(Mi(C)?Gg:Zp)(C)},ut.slice=function Wy(C,S,Z){var Ee=null==C?0:C.length;return Ee?(Z&&"number"!=typeof Z&&mc(C,S,Z)?(S=0,Z=Ee):(S=null==S?0:Zs(S),Z=Z===D?Ee:Zs(Z)),vl(C,S,Z)):[]},ut.sortBy=Qe,ut.sortedUniq=function $y(C){return C&&C.length?Jp(C):[]},ut.sortedUniqBy=function a(C,S){return C&&C.length?Jp(C,ss(S,2)):[]},ut.split=function Au(C,S,Z){return Z&&"number"!=typeof Z&&mc(C,S,Z)&&(S=Z=D),(Z=Z===D?Jt:Z>>>0)?(C=Jo(C))&&("string"==typeof S||null!=S&&!Xo(S))&&!(S=Bl(S))&&ah(C)?hc(lh(C),0,Z):C.split(S,Z):[]},ut.spread=function li(C,S){if("function"!=typeof C)throw new Ph(P);return S=null==S?0:vs(Zs(S),0),Os(function(Z){var Ee=Z[S],st=hc(Z,0,S);return Ee&&Mh(st,Ee),Ya(C,this,st)})},ut.tail=function h(C){var S=null==C?0:C.length;return S?vl(C,1,S):[]},ut.take=function g(C,S,Z){return C&&C.length?vl(C,0,(S=Z||S===D?1:Zs(S))<0?0:S):[]},ut.takeRight=function y(C,S,Z){var Ee=null==C?0:C.length;return Ee?vl(C,(S=Ee-(S=Z||S===D?1:Zs(S)))<0?0:S,Ee):[]},ut.takeRightWhile=function A(C,S){return C&&C.length?Ua(C,ss(S,3),!1,!0):[]},ut.takeWhile=function T(C,S){return C&&C.length?Ua(C,ss(S,3)):[]},ut.tap=function sn(C,S){return S(C),C},ut.throttle=function Ci(C,S,Z){var Ee=!0,st=!0;if("function"!=typeof C)throw new Ph(P);return rr(Z)&&(Ee="leading"in Z?!!Z.leading:Ee,st="trailing"in Z?!!Z.trailing:st),Vt(C,S,{leading:Ee,maxWait:S,trailing:st})},ut.thru=en,ut.toArray=bp,ut.toPairs=kA,ut.toPairsIn=OA,ut.toPath=function eI(C){return Mi(C)?Ta(C,ju):Gl(C)?[C]:Js(rg(Jo(C)))},ut.toPlainObject=Y_,ut.transform=function xp(C,S,Z){var Ee=Mi(C),st=Ee||Zr(C)||Fc(C);if(S=ss(S,4),null==Z){var Et=C&&C.constructor;Z=st?Ee?new Et:[]:rr(C)&&dn(Et)?Lo(ip(C)):{}}return(st?Ka:Lc)(C,function(on,fn,Pn){return S(Z,on,fn,Pn)}),Z},ut.unary=function pi(C){return Lt(C,1)},ut.union=R,ut.unionBy=N,ut.unionWith=ie,ut.uniq=function ee(C){return C&&C.length?Al(C):[]},ut.uniqBy=function fe(C,S){return C&&C.length?Al(C,ss(S,2)):[]},ut.uniqWith=function me(C,S){return S="function"==typeof S?S:D,C&&C.length?Al(C,D,S):[]},ut.unset=function rT(C,S){return null==C||Bu(C,S)},ut.unzip=Le,ut.unzipWith=ke,ut.update=function FA(C,S,Z){return null==C?C:$d(C,S,Pa(Z))},ut.updateWith=function sT(C,S,Z,Ee){return Ee="function"==typeof Ee?Ee:D,null==C?C:$d(C,S,Pa(Z),Ee)},ut.values=Yy,ut.valuesIn=function oT(C){return null==C?[]:Ws(C,wu(C))},ut.without=Fe,ut.words=$A,ut.wrap=function hi(C,S){return Rn(Pa(S),C)},ut.xor=nt,ut.xorBy=tt,ut.xorWith=Ke,ut.zip=pt,ut.zipObject=function vt(C,S){return Vu(C||[],S||[],bf)},ut.zipObjectDeep=function Xt(C,S){return Vu(C||[],S||[],yo)},ut.zipWith=Bt,ut.entries=kA,ut.entriesIn=OA,ut.extend=fC,ut.extendWith=lg,KA(ut,ut),ut.add=bC,ut.attempt=ox,ut.camelCase=cT,ut.capitalize=BA,ut.ceil=xC,ut.clamp=function aT(C,S,Z){return Z===D&&(Z=S,S=D),Z!==D&&(Z=(Z=yd(Z))==Z?Z:0),S!==D&&(S=(S=yd(S))==S?S:0),Af(yd(C),S,Z)},ut.clone=function ri(C){return ml(C,4)},ut.cloneDeep=function ji(C){return ml(C,5)},ut.cloneDeepWith=function ir(C,S){return ml(C,5,S="function"==typeof S?S:D)},ut.cloneWith=function xi(C,S){return ml(C,4,S="function"==typeof S?S:D)},ut.conformsTo=function Nr(C,S){return null==S||Fy(C,S,Vc(S))},ut.deburr=qs,ut.defaultTo=function CT(C,S){return null==C||C!=C?S:C},ut.divide=px,ut.endsWith=function De(C,S,Z){C=Jo(C),S=Bl(S);var Ee=C.length,st=Z=Z===D?Ee:Af(Zs(Z),0,Ee);return(Z-=S.length)>=0&&C.slice(Z,st)==S},ut.eq=Yr,ut.escape=function zA(C){return(C=Jo(C))&&hf.test(C)?C.replace(Pu,Pg):C},ut.escapeRegExp=function VA(C){return(C=Jo(C))&&Tg.test(C)?C.replace(xc,"\\$&"):C},ut.every=function _i(C,S,Z){var Ee=Mi(C)?uu:U_;return Z&&mc(C,S,Z)&&(S=D),Ee(C,ss(S,3))},ut.find=nr,ut.findIndex=cl,ut.findKey=function ef(C,S){return $o(C,ss(S,3),Lc)},ut.findLast=zi,ut.findLastIndex=Gm,ut.findLastKey=function gC(C,S){return $o(C,ss(S,3),Fh)},ut.floor=gx,ut.forEach=c,ut.forEachRight=d,ut.forIn=function Vv(C,S){return null==C?C:Ud(C,ss(S,3),wu)},ut.forInRight=function Uv(C,S){return null==C?C:Oh(C,ss(S,3),wu)},ut.forOwn=function _d(C,S){return C&&Lc(C,ss(S,3))},ut.forOwnRight=function mC(C,S){return C&&Fh(C,ss(S,3))},ut.get=vC,ut.gt=pr,ut.gte=tr,ut.has=function yC(C,S){return null!=C&&Bm(C,S,Pm)},ut.hasIn=Xy,ut.head=Uy,ut.identity=Cd,ut.includes=function _(C,S,Z,Ee){C=Cr(C)?C:Yy(C),Z=Z&&!Ee?Zs(Z):0;var st=C.length;return Z<0&&(Z=vs(st+Z,0)),Hl(C)?Z<=st&&C.indexOf(S,Z)>-1:!!st&&Ma(C,S,Z)>-1},ut.indexOf=function G_(C,S,Z){var Ee=null==C?0:C.length;if(!Ee)return-1;var st=null==Z?0:Zs(Z);return st<0&&(st=vs(Ee+st,0)),Ma(C,S,st)},ut.inRange=function NA(C,S,Z){return S=zc(S),Z===D?(Z=S,S=0):Z=zc(Z),function al(C,S,Z){return C>=pl(S,Z)&&C<vs(S,Z)}(C=yd(C),S,Z)},ut.invoke=EA,ut.isArguments=$r,ut.isArray=Mi,ut.isArrayBuffer=yr,ut.isArrayLike=Cr,ut.isArrayLikeObject=Kr,ut.isBoolean=function Fs(C){return!0===C||!1===C||ni(C)&&sa(C)==Ce},ut.isBuffer=Zr,ut.isDate=Ui,ut.isElement=function St(C){return ni(C)&&1===C.nodeType&&!So(C)},ut.isEmpty=function $n(C){if(null==C)return!0;if(Cr(C)&&(Mi(C)||"string"==typeof C||"function"==typeof C.splice||Zr(C)||Fc(C)||$r(C)))return!C.length;var S=Ra(C);if(S==Pt||S==ii)return!C.size;if(vh(C))return!Qc(C).length;for(var Z in C)if(ta.call(C,Z))return!1;return!0},ut.isEqual=function Ei(C,S){return Rc(C,S)},ut.isEqualWith=function Ve(C,S,Z){var Ee=(Z="function"==typeof Z?Z:D)?Z(C,S):D;return Ee===D?Rc(C,S,D,Z):!!Ee},ut.isError=lt,ut.isFinite=function an(C){return"number"==typeof C&&zg(C)},ut.isFunction=dn,ut.isInteger=pn,ut.isLength=Zi,ut.isMap=Or,ut.isMatch=function Oi(C,S){return C===S||hh(C,S,em(S))},ut.isMatchWith=function Ni(C,S,Z){return Z="function"==typeof Z?Z:D,hh(C,S,em(S),Z)},ut.isNaN=function Ki(C){return Uo(C)&&C!=+C},ut.isNative=function eo(C){if(pd(C))throw new Bs("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Hd(C)},ut.isNil=function Fa(C){return null==C},ut.isNull=function ao(C){return null===C},ut.isNumber=Uo,ut.isObject=rr,ut.isObjectLike=ni,ut.isPlainObject=So,ut.isRegExp=Xo,ut.isSafeInteger=function Ir(C){return pn(C)&&C>=-kn&&C<=kn},ut.isSet=Ha,ut.isString=Hl,ut.isSymbol=Gl,ut.isTypedArray=Fc,ut.isUndefined=function Cp(C){return C===D},ut.isWeakMap=function Of(C){return ni(C)&&Ra(C)==bs},ut.isWeakSet=function Nc(C){return ni(C)&&"[object WeakSet]"==sa(C)},ut.join=function Ov(C,S){return null==C?"":ch.call(C,S)},ut.kebabCase=uT,ut.last=xu,ut.lastIndexOf=function $_(C,S,Z){var Ee=null==C?0:C.length;if(!Ee)return-1;var st=Ee;return Z!==D&&(st=(st=Zs(Z))<0?vs(Ee+st,0):pl(st,Ee-1)),S==S?function Od(wn,oi,Zn){for(var Lr=Zn+1;Lr--;)if(wn[Lr]===oi)return Lr;return Lr}(C,S,st):Ol(C,Yl,st,!0)},ut.lowerCase=hT,ut.lowerFirst=UA,ut.lt=ic,ut.lte=Bc,ut.max=function mx(C){return C&&C.length?Lv(C,Cd,ad):D},ut.maxBy=function jR(C,S){return C&&C.length?Lv(C,ss(S,2),ad):D},ut.mean=function IT(C){return wr(C,Cd)},ut.meanBy=function ST(C,S){return wr(C,ss(S,2))},ut.min=function ET(C){return C&&C.length?Lv(C,Cd,Wd):D},ut.minBy=function TT(C,S){return C&&C.length?Lv(C,ss(S,2),Wd):D},ut.stubArray=e0,ut.stubFalse=Ap,ut.stubObject=function dx(){return{}},ut.stubString=function JA(){return""},ut.stubTrue=function fx(){return!0},ut.multiply=tI,ut.nth=function da(C,S){return C&&C.length?Bh(C,Zs(S)):D},ut.noConflict=function cx(){return Xl._===this&&(Xl._=B_),this},ut.noop=ux,ut.now=qe,ut.pad=function dT(C,S,Z){C=Jo(C);var Ee=(S=Zs(S))?sl(C):0;if(!S||Ee>=S)return C;var st=(S-Ee)/2;return Cu(na(st),Z)+C+Cu(Sv(st),Z)},ut.padEnd=function HA(C,S,Z){C=Jo(C);var Ee=(S=Zs(S))?sl(C):0;return S&&Ee<S?C+Cu(S-Ee,Z):C},ut.padStart=function fT(C,S,Z){C=Jo(C);var Ee=(S=Zs(S))?sl(C):0;return S&&Ee<S?Cu(S-Ee,Z)+C:C},ut.parseInt=function pT(C,S,Z){return Z||null==S?S=0:S&&(S=+S),mo(Jo(C).replace(Sh,""),S||0)},ut.random=function lT(C,S,Z){if(Z&&"boolean"!=typeof Z&&mc(C,S,Z)&&(S=Z=D),Z===D&&("boolean"==typeof S?(Z=S,S=D):"boolean"==typeof C&&(Z=C,C=D)),C===D&&S===D?(C=0,S=1):(C=zc(C),S===D?(S=C,C=0):S=zc(S)),C>S){var Ee=C;C=S,S=Ee}if(Z||C%1||S%1){var st=Do();return pl(C+st*(S-C+ns("1e-"+((st+"").length-1))),S)}return ud(C,S)},ut.reduce=function G(C,S,Z){var Ee=Mi(C)?gf:fu,st=arguments.length<3;return Ee(C,ss(S,4),Z,st,od)},ut.reduceRight=function K(C,S,Z){var Ee=Mi(C)?Rr:fu,st=arguments.length<3;return Ee(C,ss(S,4),Z,st,Dv)},ut.repeat=function NR(C,S,Z){return S=(Z?mc(C,S,Z):S===D)?1:Zs(S),Vo(Jo(C),S)},ut.replace=function GA(){var C=arguments,S=Jo(C[0]);return C.length<3?S:S.replace(C[1],C[2])},ut.result=function PA(C,S,Z){var Ee=-1,st=(S=ec(S,C)).length;for(st||(st=1,C=D);++Ee<st;){var Et=null==C?D:C[ju(S[Ee])];Et===D&&(Ee=st,Et=Z),C=dn(Et)?Et.call(C):Et}return C},ut.round=$R,ut.runInContext=wn,ut.sample=function de(C){return(Mi(C)?Tv:Qi)(C)},ut.size=function Ne(C){if(null==C)return 0;if(Cr(C))return Hl(C)?sl(C):C.length;var S=Ra(C);return S==Pt||S==ii?C.size:Qc(C).length},ut.snakeCase=WA,ut.some=function ze(C,S,Z){var Ee=Mi(C)?wm:Sf;return Z&&mc(C,S,Z)&&(S=D),Ee(C,ss(S,3))},ut.sortedIndex=function X_(C,S){return Jl(C,S)},ut.sortedIndexBy=function hC(C,S,Z){return Qp(C,S,ss(Z,2))},ut.sortedIndexOf=function Jd(C,S){var Z=null==C?0:C.length;if(Z){var Ee=Jl(C,S);if(Ee<Z&&Yr(C[Ee],S))return Ee}return-1},ut.sortedLastIndex=function rm(C,S){return Jl(C,S,!0)},ut.sortedLastIndexBy=function Bv(C,S,Z){return Qp(C,S,ss(Z,2),!0)},ut.sortedLastIndexOf=function jy(C,S){if(null!=C&&C.length){var Ee=Jl(C,S,!0)-1;if(Yr(C[Ee],S))return Ee}return-1},ut.startCase=gT,ut.startsWith=function rx(C,S,Z){return C=Jo(C),Z=null==Z?0:Af(Zs(Z),0,C.length),S=Bl(S),C.slice(Z,Z+S.length)==S},ut.subtract=MT,ut.sum=function qR(C){return C&&C.length?xl(C,Cd):0},ut.sumBy=function nI(C,S){return C&&C.length?xl(C,ss(S,2)):0},ut.template=function sx(C,S,Z){var Ee=ut.templateSettings;Z&&mc(C,S,Z)&&(S=D),C=Jo(C),S=lg({},S,Ee,Qg);var fn,Pn,st=lg({},S.imports,Ee.imports,Qg),Et=Vc(st),on=Ws(st,Et),Ti=0,Di=S.interpolate||In,Hi="__p += '",Tr=Cv((S.escape||In).source+"|"+Di.source+"|"+(Di===df?Ge:In).source+"|"+(S.evaluate||In).source+"|$","g"),zr="//# sourceURL="+(ta.call(S,"sourceURL")?(S.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++k_+"]")+"\n";C.replace(Tr,function(As,lo,Ro,qh,Xh,Uc){return Ro||(Ro=qh),Hi+=C.slice(Ti,Uc).replace(yi,Zf),lo&&(fn=!0,Hi+="' +\n__e("+lo+") +\n'"),Xh&&(Pn=!0,Hi+="';\n"+Xh+";\n__p += '"),Ro&&(Hi+="' +\n((__t = ("+Ro+")) == null ? '' : __t) +\n'"),Ti=Uc+As.length,As}),Hi+="';\n";var ws=ta.call(S,"variable")&&S.variable;if(ws){if(jf.test(ws))throw new Bs("Invalid `variable` option passed into `_.template`")}else Hi="with (obj) {\n"+Hi+"\n}\n";Hi=(Pn?Hi.replace(Ld,""):Hi).replace(cu,"$1").replace(Aa,"$1;"),Hi="function("+(ws||"obj")+") {\n"+(ws?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(fn?", __e = _.escape":"")+(Pn?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Hi+"return __p\n}";var oo=ox(function(){return qo(Et,zr+"return "+Hi).apply(D,on)});if(oo.source=Hi,lt(oo))throw oo;return oo},ut.times=function GR(C,S){if((C=Zs(C))<1||C>kn)return[];var Z=Jt,Ee=pl(C,Jt);S=ss(S),C-=Jt;for(var st=rd(Ee,S);++Z<C;)S(Z);return st},ut.toFinite=zc,ut.toInteger=Zs,ut.toLength=dC,ut.toLower=function mT(C){return Jo(C).toLowerCase()},ut.toNumber=yd,ut.toSafeInteger=function K_(C){return C?Af(Zs(C),-kn,kn):0===C?C:0},ut.toString=Jo,ut.toUpper=function BR(C){return Jo(C).toUpperCase()},ut.trim=function zR(C,S,Z){if((C=Jo(C))&&(Z||S===D))return Up(C);if(!C||!(S=Bl(S)))return C;var Ee=lh(C),st=lh(S);return hc(Ee,Kf(Ee,st),Am(Ee,st)+1).join("")},ut.trimEnd=function VR(C,S,Z){if((C=Jo(C))&&(Z||S===D))return C.slice(0,Kc(C)+1);if(!C||!(S=Bl(S)))return C;var Ee=lh(C);return hc(Ee,0,Am(Ee,lh(S))+1).join("")},ut.trimStart=function vT(C,S,Z){if((C=Jo(C))&&(Z||S===D))return C.replace(Sh,"");if(!C||!(S=Bl(S)))return C;var Ee=lh(C);return hc(Ee,Kf(Ee,lh(S))).join("")},ut.truncate=function jA(C,S){var Z=30,Ee="...";if(rr(S)){var st="separator"in S?S.separator:st;Z="length"in S?Zs(S.length):Z,Ee="omission"in S?Bl(S.omission):Ee}var Et=(C=Jo(C)).length;if(ah(C)){var on=lh(C);Et=on.length}if(Z>=Et)return C;var fn=Z-sl(Ee);if(fn<1)return Ee;var Pn=on?hc(on,0,fn).join(""):C.slice(0,fn);if(st===D)return Pn+Ee;if(on&&(fn+=Pn.length-fn),Xo(st)){if(C.slice(fn).search(st)){var Ti,Di=Pn;for(st.global||(st=Cv(st.source,Jo(it.exec(st))+"g")),st.lastIndex=0;Ti=st.exec(Di);)var Hi=Ti.index;Pn=Pn.slice(0,Hi===D?fn:Hi)}}else if(C.indexOf(Bl(st),fn)!=fn){var Tr=Pn.lastIndexOf(st);Tr>-1&&(Pn=Pn.slice(0,Tr))}return Pn+Ee},ut.unescape=function UR(C){return(C=Jo(C))&&ed.test(C)?C.replace(Ih,Dh):C},ut.uniqueId=function WR(C){var S=++Ly;return Jo(C)+S},ut.upperCase=yT,ut.upperFirst=$m,ut.each=c,ut.eachRight=d,ut.first=Uy,KA(ut,function(){var C={};return Lc(ut,function(S,Z){ta.call(ut.prototype,Z)||(C[Z]=S)}),C}(),{chain:!1}),ut.VERSION="4.17.21",Ka(["bind","bindKey","curry","curryRight","partial","partialRight"],function(C){ut[C].placeholder=ut}),Ka(["drop","take"],function(C,S){Ps.prototype[C]=function(Z){Z=Z===D?1:vs(Zs(Z),0);var Ee=this.__filtered__&&!S?new Ps(this):this.clone();return Ee.__filtered__?Ee.__takeCount__=pl(Z,Ee.__takeCount__):Ee.__views__.push({size:pl(Z,Jt),type:C+(Ee.__dir__<0?"Right":"")}),Ee},Ps.prototype[C+"Right"]=function(Z){return this.reverse()[C](Z).reverse()}}),Ka(["filter","map","takeWhile"],function(C,S){var Z=S+1,Ee=1==Z||3==Z;Ps.prototype[C]=function(st){var Et=this.clone();return Et.__iteratees__.push({iteratee:ss(st,3),type:Z}),Et.__filtered__=Et.__filtered__||Ee,Et}}),Ka(["head","last"],function(C,S){var Z="take"+(S?"Right":"");Ps.prototype[C]=function(){return this[Z](1).value()[0]}}),Ka(["initial","tail"],function(C,S){var Z="drop"+(S?"":"Right");Ps.prototype[C]=function(){return this.__filtered__?new Ps(this):this[Z](1)}}),Ps.prototype.compact=function(){return this.filter(Cd)},Ps.prototype.find=function(C){return this.filter(C).head()},Ps.prototype.findLast=function(C){return this.reverse().find(C)},Ps.prototype.invokeMap=Os(function(C,S){return"function"==typeof C?new Ps(this):this.map(function(Z){return Pc(Z,C,S)})}),Ps.prototype.reject=function(C){return this.filter(Kt(ss(C)))},Ps.prototype.slice=function(C,S){C=Zs(C);var Z=this;return Z.__filtered__&&(C>0||S<0)?new Ps(Z):(C<0?Z=Z.takeRight(-C):C&&(Z=Z.drop(C)),S!==D&&(Z=(S=Zs(S))<0?Z.dropRight(-S):Z.take(S-C)),Z)},Ps.prototype.takeRightWhile=function(C){return this.reverse().takeWhile(C).reverse()},Ps.prototype.toArray=function(){return this.take(Jt)},Lc(Ps.prototype,function(C,S){var Z=/^(?:filter|find|map|reject)|While$/.test(S),Ee=/^(?:head|last)$/.test(S),st=ut[Ee?"take"+("last"==S?"Right":""):S],Et=Ee||/^find/.test(S);!st||(ut.prototype[S]=function(){var on=this.__wrapped__,fn=Ee?[1]:arguments,Pn=on instanceof Ps,Ti=fn[0],Di=Pn||Mi(on),Hi=function(lo){var Ro=st.apply(ut,Mh([lo],fn));return Ee&&Tr?Ro[0]:Ro};Di&&Z&&"function"==typeof Ti&&1!=Ti.length&&(Pn=Di=!1);var Tr=this.__chain__,zr=!!this.__actions__.length,ws=Et&&!Tr,oo=Pn&&!zr;if(!Et&&Di){on=oo?on:new Ps(this);var As=C.apply(on,fn);return As.__actions__.push({func:en,args:[Hi],thisArg:D}),new ia(As,Tr)}return ws&&oo?C.apply(this,fn):(As=this.thru(Hi),ws?Ee?As.value()[0]:As.value():As)})}),Ka(["pop","push","shift","sort","splice","unshift"],function(C){var S=xv[C],Z=/^(?:push|sort|unshift)$/.test(C)?"tap":"thru",Ee=/^(?:pop|shift)$/.test(C);ut.prototype[C]=function(){var st=arguments;if(Ee&&!this.__chain__){var Et=this.value();return S.apply(Mi(Et)?Et:[],st)}return this[Z](function(on){return S.apply(Mi(on)?on:[],st)})}}),Lc(Ps.prototype,function(C,S){var Z=ut[S];if(Z){var Ee=Z.name+"";ta.call(jp,Ee)||(jp[Ee]=[]),jp[Ee].push({name:S,func:Z})}}),jp[Xn(D,2).name]=[{name:"wrapper",func:D}],Ps.prototype.clone=function $p(){var C=new Ps(this.__wrapped__);return C.__actions__=Js(this.__actions__),C.__dir__=this.__dir__,C.__filtered__=this.__filtered__,C.__iteratees__=Js(this.__iteratees__),C.__takeCount__=this.__takeCount__,C.__views__=Js(this.__views__),C},Ps.prototype.reverse=function sp(){if(this.__filtered__){var C=new Ps(this);C.__dir__=-1,C.__filtered__=!0}else(C=this.clone()).__dir__*=-1;return C},Ps.prototype.value=function _r(){var C=this.__wrapped__.value(),S=this.__dir__,Z=Mi(C),Ee=S<0,st=Z?C.length:0,Et=function Nm(C,S,Z){for(var Ee=-1,st=Z.length;++Ee<st;){var Et=Z[Ee],on=Et.size;switch(Et.type){case"drop":C+=on;break;case"dropRight":S-=on;break;case"take":S=pl(S,C+on);break;case"takeRight":C=vs(C,S-on)}}return{start:C,end:S}}(0,st,this.__views__),on=Et.start,fn=Et.end,Pn=fn-on,Ti=Ee?fn:on-1,Di=this.__iteratees__,Hi=Di.length,Tr=0,zr=pl(Pn,this.__takeCount__);if(!Z||!Ee&&st==Pn&&zr==Pn)return vu(C,this.__actions__);var ws=[];e:for(;Pn--&&Tr<zr;){for(var oo=-1,As=C[Ti+=S];++oo<Hi;){var lo=Di[oo],qh=lo.type,Xh=(0,lo.iteratee)(As);if(2==qh)As=Xh;else if(!Xh){if(1==qh)continue e;break e}}ws[Tr++]=As}return ws},ut.prototype.at=hn,ut.prototype.chain=function On(){return cn(this)},ut.prototype.commit=function Ai(){return new ia(this.value(),this.__chain__)},ut.prototype.next=function ui(){this.__values__===D&&(this.__values__=bp(this.value()));var C=this.__index__>=this.__values__.length;return{done:C,value:C?D:this.__values__[this.__index__++]}},ut.prototype.plant=function qt(C){for(var S,Z=this;Z instanceof Ao;){var Ee=nm(Z);Ee.__index__=0,Ee.__values__=D,S?st.__wrapped__=Ee:S=Ee;var st=Ee;Z=Z.__wrapped__}return st.__wrapped__=C,S},ut.prototype.reverse=function Wn(){var C=this.__wrapped__;if(C instanceof Ps){var S=C;return this.__actions__.length&&(S=new Ps(this)),(S=S.reverse()).__actions__.push({func:en,args:[jm],thisArg:D}),new ia(S,this.__chain__)}return this.thru(jm)},ut.prototype.toJSON=ut.prototype.valueOf=ut.prototype.value=function ei(){return vu(this.__wrapped__,this.__actions__)},ut.prototype.first=ut.prototype.head,Gp&&(ut.prototype[Gp]=function jt(){return this}),ut}();Xl._=Im,(Y=function(){return Im}.call(be,V,be,Be))!==D&&(Be.exports=Y)}.call(this)},535:(Be,be,V)=>{var Y=V(9850);function H(B,W){if("function"!=typeof B||null!=W&&"function"!=typeof W)throw new TypeError("Expected a function");var P=function(){var O=arguments,q=W?W.apply(this,O):O[0],te=P.cache;if(te.has(q))return te.get(q);var J=B.apply(this,O);return P.cache=te.set(q,J)||te,J};return P.cache=new(H.Cache||Y),P}H.Cache=Y,Be.exports=H},1710:(Be,be,V)=>{var Y=V(2119);Be.exports=function(){return Y.Date.now()}},4793:(Be,be,V)=>{var Y=V(5963);Be.exports=function D(H,B,W){return null==H?H:Y(H,B,W)}},1467:(Be,be,V)=>{var Y=V(3348),D=V(5940),H=V(4129),W=/^[-+]0x[0-9a-f]+$/i,P=/^0b[01]+$/i,O=/^0o[0-7]+$/i,q=parseInt;Be.exports=function te(J){if("number"==typeof J)return J;if(H(J))return NaN;if(D(J)){var oe="function"==typeof J.valueOf?J.valueOf():J;J=D(oe)?oe+"":oe}if("string"!=typeof J)return 0===J?J:+J;J=Y(J);var se=P.test(J);return se||O.test(J)?q(J.slice(2),se?2:8):W.test(J)?NaN:+J}},4152:(Be,be,V)=>{var Y=V(4633),D=V(9454),H=V(9460),B=V(4129),W=V(2855),P=V(8533),O=V(3943);Be.exports=function q(te){return H(te)?Y(te,P):B(te)?[te]:D(W(O(te)))}},3943:(Be,be,V)=>{var Y=V(3935);Be.exports=function D(H){return null==H?"":Y(H)}},4826:(Be,be,V)=>{"use strict";Be.exports=V(6776)},6798:(Be,be,V)=>{"use strict";Be.exports=V(5485)},2484:Be=>{"use strict";Be.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},3266:Be=>{"use strict";var W="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",P="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",oe=new RegExp("^(?:"+W+"|"+P+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?][\\s\\S]*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),se=new RegExp("^(?:"+W+"|"+P+")");Be.exports.n=oe,Be.exports.q=se},3332:(Be,be,V)=>{"use strict";var H=Object.prototype.hasOwnProperty;function B(He,ft){return H.call(He,ft)}function O(He){return!(He>=55296&&He<=57343||He>=64976&&He<=65007||65535==(65535&He)||65534==(65535&He)||He>=0&&He<=8||11===He||He>=14&&He<=31||He>=127&&He<=159||He>1114111)}function q(He){return He>65535?(He-=65536,String.fromCharCode(55296+(He>>10),56320+(1023&He))):String.fromCharCode(He)}var te=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,oe=new RegExp(te.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),se=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,Q=V(6798),Oe=/[&<>"]/,re=/[&<>"]/g,ue={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function z(He){return ue[He]}var ne=/[.?*+^$[\]\\(){}|-]/g,rt=V(6020);be.lib={},be.lib.mdurl=V(7214),be.lib.ucmicro=V(9315),be.assign=function W(He){var ft=Array.prototype.slice.call(arguments,1);return ft.forEach(function(gt){if(gt){if("object"!=typeof gt)throw new TypeError(gt+"must be object");Object.keys(gt).forEach(function(Ct){He[Ct]=gt[Ct]})}}),He},be.isString=function D(He){return"[object String]"===function Y(He){return Object.prototype.toString.call(He)}(He)},be.has=B,be.unescapeMd=function ae(He){return He.indexOf("\\")<0?He:He.replace(te,"$1")},be.unescapeAll=function xe(He){return He.indexOf("\\")<0&&He.indexOf("&")<0?He:He.replace(oe,function(ft,gt,Ct){return gt||function U(He,ft){var gt=0;return B(Q,ft)?Q[ft]:35===ft.charCodeAt(0)&&se.test(ft)&&O(gt="x"===ft[1].toLowerCase()?parseInt(ft.slice(2),16):parseInt(ft.slice(1),10))?q(gt):He}(ft,Ct)})},be.isValidEntityCode=O,be.fromCodePoint=q,be.escapeHtml=function $(He){return Oe.test(He)?He.replace(re,z):He},be.arrayReplaceAt=function P(He,ft,gt){return[].concat(He.slice(0,ft),gt,He.slice(ft+1))},be.isSpace=function Ue(He){switch(He){case 9:case 32:return!0}return!1},be.isWhiteSpace=function Re(He){if(He>=8192&&He<=8202)return!0;switch(He){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},be.isMdAsciiPunct=function at(He){switch(He){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},be.isPunctChar=function Pe(He){return rt.test(He)},be.escapeRE=function ge(He){return He.replace(ne,"\\$&")},be.normalizeReference=function xt(He){return He=He.trim().replace(/\s+/g," "),"\u1e7e"==="\u1e9e".toLowerCase()&&(He=He.replace(/\u1e9e/g,"\xdf")),He.toLowerCase().toUpperCase()}},8198:(Be,be,V)=>{"use strict";be.parseLinkLabel=V(9605),be.parseLinkDestination=V(4072),be.parseLinkTitle=V(4658)},4072:(Be,be,V)=>{"use strict";var Y=V(3332).unescapeAll;Be.exports=function(H,B,W){var P,O,te=B,J={ok:!1,pos:0,lines:0,str:""};if(60===H.charCodeAt(B)){for(B++;B<W;){if(10===(P=H.charCodeAt(B))||60===P)return J;if(62===P)return J.pos=B+1,J.str=Y(H.slice(te+1,B)),J.ok=!0,J;92===P&&B+1<W?B+=2:B++}return J}for(O=0;B<W&&!(32===(P=H.charCodeAt(B))||P<32||127===P);)if(92===P&&B+1<W){if(32===H.charCodeAt(B+1))break;B+=2}else{if(40===P&&++O>32)return J;if(41===P){if(0===O)break;O--}B++}return te===B||0!==O||(J.str=Y(H.slice(te,B)),J.lines=0,J.pos=B,J.ok=!0),J}},9605:Be=>{"use strict";Be.exports=function(V,Y,D){var H,B,W,P,O=-1,q=V.posMax,te=V.pos;for(V.pos=Y+1,H=1;V.pos<q;){if(93===(W=V.src.charCodeAt(V.pos))&&0==--H){B=!0;break}if(P=V.pos,V.md.inline.skipToken(V),91===W)if(P===V.pos-1)H++;else if(D)return V.pos=te,-1}return B&&(O=V.pos),V.pos=te,O}},4658:(Be,be,V)=>{"use strict";var Y=V(3332).unescapeAll;Be.exports=function(H,B,W){var P,O,q=0,te=B,J={ok:!1,pos:0,lines:0,str:""};if(B>=W||34!==(O=H.charCodeAt(B))&&39!==O&&40!==O)return J;for(B++,40===O&&(O=41);B<W;){if((P=H.charCodeAt(B))===O)return J.pos=B+1,J.lines=q,J.str=Y(H.slice(te+1,B)),J.ok=!0,J;if(40===P&&41===O)return J;10===P?q++:92===P&&B+1<W&&(B++,10===H.charCodeAt(B)&&q++),B++}return J}},6776:(Be,be,V)=>{"use strict";var Y=V(3332),D=V(8198),H=V(7172),B=V(2080),W=V(4223),P=V(2900),O=V(3353),q=V(7214),te=V(4879),J={default:V(4210),zero:V(7020),commonmark:V(8687)},oe=/^(vbscript|javascript|file|data):/,se=/^data:image\/(gif|png|jpeg|webp);/;function Q(re){var ue=re.trim().toLowerCase();return!oe.test(ue)||!!se.test(ue)}var U=["http:","https:","mailto:"];function ae(re){var ue=q.parse(re,!0);if(ue.hostname&&(!ue.protocol||U.indexOf(ue.protocol)>=0))try{ue.hostname=te.toASCII(ue.hostname)}catch{}return q.encode(q.format(ue))}function xe(re){var ue=q.parse(re,!0);if(ue.hostname&&(!ue.protocol||U.indexOf(ue.protocol)>=0))try{ue.hostname=te.toUnicode(ue.hostname)}catch{}return q.decode(q.format(ue),q.decode.defaultChars+"%")}function Oe(re,ue){if(!(this instanceof Oe))return new Oe(re,ue);ue||Y.isString(re)||(ue=re||{},re="default"),this.inline=new P,this.block=new W,this.core=new B,this.renderer=new H,this.linkify=new O,this.validateLink=Q,this.normalizeLink=ae,this.normalizeLinkText=xe,this.utils=Y,this.helpers=Y.assign({},D),this.options={},this.configure(re),ue&&this.set(ue)}Oe.prototype.set=function(re){return Y.assign(this.options,re),this},Oe.prototype.configure=function(re){var z,ue=this;if(Y.isString(re)&&!(re=J[z=re]))throw new Error('Wrong `markdown-it` preset "'+z+'", check name');if(!re)throw new Error("Wrong `markdown-it` preset, can't be empty");return re.options&&ue.set(re.options),re.components&&Object.keys(re.components).forEach(function($){re.components[$].rules&&ue[$].ruler.enableOnly(re.components[$].rules),re.components[$].rules2&&ue[$].ruler2.enableOnly(re.components[$].rules2)}),this},Oe.prototype.enable=function(re,ue){var z=[];Array.isArray(re)||(re=[re]),["core","block","inline"].forEach(function(ne){z=z.concat(this[ne].ruler.enable(re,!0))},this),z=z.concat(this.inline.ruler2.enable(re,!0));var $=re.filter(function(ne){return z.indexOf(ne)<0});if($.length&&!ue)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+$);return this},Oe.prototype.disable=function(re,ue){var z=[];Array.isArray(re)||(re=[re]),["core","block","inline"].forEach(function(ne){z=z.concat(this[ne].ruler.disable(re,!0))},this),z=z.concat(this.inline.ruler2.disable(re,!0));var $=re.filter(function(ne){return z.indexOf(ne)<0});if($.length&&!ue)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+$);return this},Oe.prototype.use=function(re){var ue=[this].concat(Array.prototype.slice.call(arguments,1));return re.apply(re,ue),this},Oe.prototype.parse=function(re,ue){if("string"!=typeof re)throw new Error("Input data should be a String");var z=new this.core.State(re,this,ue);return this.core.process(z),z.tokens},Oe.prototype.render=function(re,ue){return this.renderer.render(this.parse(re,ue=ue||{}),this.options,ue)},Oe.prototype.parseInline=function(re,ue){var z=new this.core.State(re,this,ue);return z.inlineMode=!0,this.core.process(z),z.tokens},Oe.prototype.renderInline=function(re,ue){return this.renderer.render(this.parseInline(re,ue=ue||{}),this.options,ue)},Be.exports=Oe},4223:(Be,be,V)=>{"use strict";var Y=V(1368),D=[["table",V(2281),["paragraph","reference"]],["code",V(6372)],["fence",V(7931),["paragraph","reference","blockquote","list"]],["blockquote",V(72),["paragraph","reference","blockquote","list"]],["hr",V(8570),["paragraph","reference","blockquote","list"]],["list",V(7827),["paragraph","reference","blockquote"]],["reference",V(5886)],["html_block",V(5134),["paragraph","reference","blockquote"]],["heading",V(3462),["paragraph","reference","blockquote"]],["lheading",V(5920)],["paragraph",V(851)]];function H(){this.ruler=new Y;for(var B=0;B<D.length;B++)this.ruler.push(D[B][0],D[B][1],{alt:(D[B][2]||[]).slice()})}H.prototype.tokenize=function(B,W,P){for(var q,te=this.ruler.getRules(""),J=te.length,oe=W,se=!1,Q=B.md.options.maxNesting;oe<P&&(B.line=oe=B.skipEmptyLines(oe),!(oe>=P||B.sCount[oe]<B.blkIndent));){if(B.level>=Q){B.line=P;break}for(q=0;q<J&&!te[q](B,oe,P,!1);q++);B.tight=!se,B.isEmpty(B.line-1)&&(se=!0),(oe=B.line)<P&&B.isEmpty(oe)&&(se=!0,oe++,B.line=oe)}},H.prototype.parse=function(B,W,P,O){var q;!B||(q=new this.State(B,W,P,O),this.tokenize(q,q.line,q.lineMax))},H.prototype.State=V(1845),Be.exports=H},2080:(Be,be,V)=>{"use strict";var Y=V(1368),D=[["normalize",V(7398)],["block",V(8905)],["inline",V(3591)],["linkify",V(9212)],["replacements",V(1982)],["smartquotes",V(8157)],["text_join",V(2245)]];function H(){this.ruler=new Y;for(var B=0;B<D.length;B++)this.ruler.push(D[B][0],D[B][1])}H.prototype.process=function(B){var W,P,O;for(W=0,P=(O=this.ruler.getRules("")).length;W<P;W++)O[W](B)},H.prototype.State=V(1076),Be.exports=H},2900:(Be,be,V)=>{"use strict";var Y=V(1368),D=[["text",V(1767)],["linkify",V(6234)],["newline",V(2921)],["escape",V(8763)],["backticks",V(415)],["strikethrough",V(8165).w],["emphasis",V(425).w],["link",V(7219)],["image",V(7936)],["autolink",V(6973)],["html_inline",V(3722)],["entity",V(3559)]],H=[["balance_pairs",V(9269)],["strikethrough",V(8165).g],["emphasis",V(425).g],["fragments_join",V(5767)]];function B(){var W;for(this.ruler=new Y,W=0;W<D.length;W++)this.ruler.push(D[W][0],D[W][1]);for(this.ruler2=new Y,W=0;W<H.length;W++)this.ruler2.push(H[W][0],H[W][1])}B.prototype.skipToken=function(W){var P,O,q=W.pos,te=this.ruler.getRules(""),J=te.length,oe=W.md.options.maxNesting,se=W.cache;if(typeof se[q]<"u")W.pos=se[q];else{if(W.level<oe)for(O=0;O<J&&(W.level++,P=te[O](W,!0),W.level--,!P);O++);else W.pos=W.posMax;P||W.pos++,se[q]=W.pos}},B.prototype.tokenize=function(W){for(var P,O,q=this.ruler.getRules(""),te=q.length,J=W.posMax,oe=W.md.options.maxNesting;W.pos<J;){if(W.level<oe)for(O=0;O<te&&!(P=q[O](W,!1));O++);if(P){if(W.pos>=J)break}else W.pending+=W.src[W.pos++]}W.pending&&W.pushPending()},B.prototype.parse=function(W,P,O,q){var te,J,oe,se=new this.State(W,P,O,q);for(this.tokenize(se),oe=(J=this.ruler2.getRules("")).length,te=0;te<oe;te++)J[te](se)},B.prototype.State=V(630),Be.exports=B},8687:Be=>{"use strict";Be.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}},4210:Be=>{"use strict";Be.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}},7020:Be=>{"use strict";Be.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}},7172:(Be,be,V)=>{"use strict";var Y=V(3332).assign,D=V(3332).unescapeAll,H=V(3332).escapeHtml,B={};function W(){this.rules=Y({},B)}B.code_inline=function(P,O,q,te,J){return"<code"+J.renderAttrs(P[O])+">"+H(P[O].content)+"</code>"},B.code_block=function(P,O,q,te,J){return"<pre"+J.renderAttrs(P[O])+"><code>"+H(P[O].content)+"</code></pre>\n"},B.fence=function(P,O,q,te,J){var ae,xe,Oe,re,oe=P[O],se=oe.info?D(oe.info).trim():"",Q="",U="";return se&&(Q=(Oe=se.split(/(\s+)/g))[0],U=Oe.slice(2).join("")),0===(ae=q.highlight&&q.highlight(oe.content,Q,U)||H(oe.content)).indexOf("<pre")?ae+"\n":se?(xe=oe.attrIndex("class"),re=oe.attrs?oe.attrs.slice():[],xe<0?re.push(["class",q.langPrefix+Q]):(re[xe]=re[xe].slice(),re[xe][1]+=" "+q.langPrefix+Q),"<pre><code"+J.renderAttrs({attrs:re})+">"+ae+"</code></pre>\n"):"<pre><code"+J.renderAttrs(oe)+">"+ae+"</code></pre>\n"},B.image=function(P,O,q,te,J){var oe=P[O];return oe.attrs[oe.attrIndex("alt")][1]=J.renderInlineAsText(oe.children,q,te),J.renderToken(P,O,q)},B.hardbreak=function(P,O,q){return q.xhtmlOut?"<br />\n":"<br>\n"},B.softbreak=function(P,O,q){return q.breaks?q.xhtmlOut?"<br />\n":"<br>\n":"\n"},B.text=function(P,O){return H(P[O].content)},B.html_block=function(P,O){return P[O].content},B.html_inline=function(P,O){return P[O].content},W.prototype.renderAttrs=function(O){var q,te,J;if(!O.attrs)return"";for(J="",q=0,te=O.attrs.length;q<te;q++)J+=" "+H(O.attrs[q][0])+'="'+H(O.attrs[q][1])+'"';return J},W.prototype.renderToken=function(O,q,te){var J,oe="",se=!1,Q=O[q];return Q.hidden?"":(Q.block&&-1!==Q.nesting&&q&&O[q-1].hidden&&(oe+="\n"),oe+=(-1===Q.nesting?"</":"<")+Q.tag,oe+=this.renderAttrs(Q),0===Q.nesting&&te.xhtmlOut&&(oe+=" /"),Q.block&&(se=!0,1===Q.nesting&&q+1<O.length&&("inline"===(J=O[q+1]).type||J.hidden||-1===J.nesting&&J.tag===Q.tag)&&(se=!1)),oe+=se?">\n":">")},W.prototype.renderInline=function(P,O,q){for(var te,J="",oe=this.rules,se=0,Q=P.length;se<Q;se++)J+=typeof oe[te=P[se].type]<"u"?oe[te](P,se,O,q,this):this.renderToken(P,se,O);return J},W.prototype.renderInlineAsText=function(P,O,q){for(var te="",J=0,oe=P.length;J<oe;J++)"text"===P[J].type?te+=P[J].content:"image"===P[J].type?te+=this.renderInlineAsText(P[J].children,O,q):"softbreak"===P[J].type&&(te+="\n");return te},W.prototype.render=function(P,O,q){var te,J,oe,se="",Q=this.rules;for(te=0,J=P.length;te<J;te++)se+="inline"===(oe=P[te].type)?this.renderInline(P[te].children,O,q):typeof Q[oe]<"u"?Q[P[te].type](P,te,O,q,this):this.renderToken(P,te,O,q);return se},Be.exports=W},1368:Be=>{"use strict";function be(){this.__rules__=[],this.__cache__=null}be.prototype.__find__=function(V){for(var Y=0;Y<this.__rules__.length;Y++)if(this.__rules__[Y].name===V)return Y;return-1},be.prototype.__compile__=function(){var V=this,Y=[""];V.__rules__.forEach(function(D){!D.enabled||D.alt.forEach(function(H){Y.indexOf(H)<0&&Y.push(H)})}),V.__cache__={},Y.forEach(function(D){V.__cache__[D]=[],V.__rules__.forEach(function(H){!H.enabled||D&&H.alt.indexOf(D)<0||V.__cache__[D].push(H.fn)})})},be.prototype.at=function(V,Y,D){var H=this.__find__(V),B=D||{};if(-1===H)throw new Error("Parser rule not found: "+V);this.__rules__[H].fn=Y,this.__rules__[H].alt=B.alt||[],this.__cache__=null},be.prototype.before=function(V,Y,D,H){var B=this.__find__(V),W=H||{};if(-1===B)throw new Error("Parser rule not found: "+V);this.__rules__.splice(B,0,{name:Y,enabled:!0,fn:D,alt:W.alt||[]}),this.__cache__=null},be.prototype.after=function(V,Y,D,H){var B=this.__find__(V),W=H||{};if(-1===B)throw new Error("Parser rule not found: "+V);this.__rules__.splice(B+1,0,{name:Y,enabled:!0,fn:D,alt:W.alt||[]}),this.__cache__=null},be.prototype.push=function(V,Y,D){this.__rules__.push({name:V,enabled:!0,fn:Y,alt:(D||{}).alt||[]}),this.__cache__=null},be.prototype.enable=function(V,Y){Array.isArray(V)||(V=[V]);var D=[];return V.forEach(function(H){var B=this.__find__(H);if(B<0){if(Y)return;throw new Error("Rules manager: invalid rule name "+H)}this.__rules__[B].enabled=!0,D.push(H)},this),this.__cache__=null,D},be.prototype.enableOnly=function(V,Y){Array.isArray(V)||(V=[V]),this.__rules__.forEach(function(D){D.enabled=!1}),this.enable(V,Y)},be.prototype.disable=function(V,Y){Array.isArray(V)||(V=[V]);var D=[];return V.forEach(function(H){var B=this.__find__(H);if(B<0){if(Y)return;throw new Error("Rules manager: invalid rule name "+H)}this.__rules__[B].enabled=!1,D.push(H)},this),this.__cache__=null,D},be.prototype.getRules=function(V){return null===this.__cache__&&this.__compile__(),this.__cache__[V]||[]},Be.exports=be},72:(Be,be,V)=>{"use strict";var Y=V(3332).isSpace;Be.exports=function(H,B,W,P){var O,q,te,J,oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re,rt,Pe=H.lineMax,at=H.bMarks[B]+H.tShift[B],xt=H.eMarks[B];if(H.sCount[B]-H.blkIndent>=4||62!==H.src.charCodeAt(at++))return!1;if(P)return!0;for(J=ae=H.sCount[B]+1,32===H.src.charCodeAt(at)?(at++,J++,ae++,O=!1,ne=!0):9===H.src.charCodeAt(at)?(ne=!0,(H.bsCount[B]+ae)%4==3?(at++,J++,ae++,O=!1):O=!0):ne=!1,xe=[H.bMarks[B]],H.bMarks[B]=at;at<xt&&(q=H.src.charCodeAt(at),Y(q));)9===q?ae+=4-(ae+H.bsCount[B]+(O?1:0))%4:ae++,at++;for(Oe=[H.bsCount[B]],H.bsCount[B]=H.sCount[B]+1+(ne?1:0),se=at>=xt,z=[H.sCount[B]],H.sCount[B]=ae-J,$=[H.tShift[B]],H.tShift[B]=at-H.bMarks[B],Ue=H.md.block.ruler.getRules("blockquote"),ue=H.parentType,H.parentType="blockquote",U=B+1;U<W&&(rt=H.sCount[U]<H.blkIndent,!((at=H.bMarks[U]+H.tShift[U])>=(xt=H.eMarks[U])));U++)if(62!==H.src.charCodeAt(at++)||rt){if(se)break;for(ge=!1,te=0,oe=Ue.length;te<oe;te++)if(Ue[te](H,U,W,!0)){ge=!0;break}if(ge){H.lineMax=U,0!==H.blkIndent&&(xe.push(H.bMarks[U]),Oe.push(H.bsCount[U]),$.push(H.tShift[U]),z.push(H.sCount[U]),H.sCount[U]-=H.blkIndent);break}xe.push(H.bMarks[U]),Oe.push(H.bsCount[U]),$.push(H.tShift[U]),z.push(H.sCount[U]),H.sCount[U]=-1}else{for(J=ae=H.sCount[U]+1,32===H.src.charCodeAt(at)?(at++,J++,ae++,O=!1,ne=!0):9===H.src.charCodeAt(at)?(ne=!0,(H.bsCount[U]+ae)%4==3?(at++,J++,ae++,O=!1):O=!0):ne=!1,xe.push(H.bMarks[U]),H.bMarks[U]=at;at<xt&&(q=H.src.charCodeAt(at),Y(q));)9===q?ae+=4-(ae+H.bsCount[U]+(O?1:0))%4:ae++,at++;se=at>=xt,Oe.push(H.bsCount[U]),H.bsCount[U]=H.sCount[U]+1+(ne?1:0),z.push(H.sCount[U]),H.sCount[U]=ae-J,$.push(H.tShift[U]),H.tShift[U]=at-H.bMarks[U]}for(re=H.blkIndent,H.blkIndent=0,(Re=H.push("blockquote_open","blockquote",1)).markup=">",Re.map=Q=[B,0],H.md.block.tokenize(H,B,U),(Re=H.push("blockquote_close","blockquote",-1)).markup=">",H.lineMax=Pe,H.parentType=ue,Q[1]=H.line,te=0;te<$.length;te++)H.bMarks[te+B]=xe[te],H.tShift[te+B]=$[te],H.sCount[te+B]=z[te],H.bsCount[te+B]=Oe[te];return H.blkIndent=re,!0}},6372:Be=>{"use strict";Be.exports=function(V,Y,D){var H,B,W;if(V.sCount[Y]-V.blkIndent<4)return!1;for(B=H=Y+1;H<D;)if(V.isEmpty(H))H++;else{if(!(V.sCount[H]-V.blkIndent>=4))break;B=++H}return V.line=B,(W=V.push("code_block","code",0)).content=V.getLines(Y,B,4+V.blkIndent,!1)+"\n",W.map=[Y,V.line],!0}},7931:Be=>{"use strict";Be.exports=function(V,Y,D,H){var B,W,P,O,q,te,J,oe=!1,se=V.bMarks[Y]+V.tShift[Y],Q=V.eMarks[Y];if(V.sCount[Y]-V.blkIndent>=4||se+3>Q||126!==(B=V.src.charCodeAt(se))&&96!==B||(q=se,(W=(se=V.skipChars(se,B))-q)<3)||(J=V.src.slice(q,se),P=V.src.slice(se,Q),96===B&&P.indexOf(String.fromCharCode(B))>=0))return!1;if(H)return!0;for(O=Y;!(++O>=D||(se=q=V.bMarks[O]+V.tShift[O],Q=V.eMarks[O],se<Q&&V.sCount[O]<V.blkIndent));)if(!(V.src.charCodeAt(se)!==B||V.sCount[O]-V.blkIndent>=4||(se=V.skipChars(se,B),se-q<W||(se=V.skipSpaces(se),se<Q)))){oe=!0;break}return W=V.sCount[Y],V.line=O+(oe?1:0),(te=V.push("fence","code",0)).info=P,te.content=V.getLines(Y+1,O,W,!0),te.markup=J,te.map=[Y,V.line],!0}},3462:(Be,be,V)=>{"use strict";var Y=V(3332).isSpace;Be.exports=function(H,B,W,P){var O,q,te,J,oe=H.bMarks[B]+H.tShift[B],se=H.eMarks[B];if(H.sCount[B]-H.blkIndent>=4||35!==(O=H.src.charCodeAt(oe))||oe>=se)return!1;for(q=1,O=H.src.charCodeAt(++oe);35===O&&oe<se&&q<=6;)q++,O=H.src.charCodeAt(++oe);return!(q>6||oe<se&&!Y(O)||(P||(se=H.skipSpacesBack(se,oe),(te=H.skipCharsBack(se,35,oe))>oe&&Y(H.src.charCodeAt(te-1))&&(se=te),H.line=B+1,(J=H.push("heading_open","h"+String(q),1)).markup="########".slice(0,q),J.map=[B,H.line],(J=H.push("inline","",0)).content=H.src.slice(oe,se).trim(),J.map=[B,H.line],J.children=[],(J=H.push("heading_close","h"+String(q),-1)).markup="########".slice(0,q)),0))}},8570:(Be,be,V)=>{"use strict";var Y=V(3332).isSpace;Be.exports=function(H,B,W,P){var O,q,te,J,oe=H.bMarks[B]+H.tShift[B],se=H.eMarks[B];if(H.sCount[B]-H.blkIndent>=4||42!==(O=H.src.charCodeAt(oe++))&&45!==O&&95!==O)return!1;for(q=1;oe<se;){if((te=H.src.charCodeAt(oe++))!==O&&!Y(te))return!1;te===O&&q++}return!(q<3||(P||(H.line=B+1,(J=H.push("hr","hr",0)).map=[B,H.line],J.markup=Array(q+1).join(String.fromCharCode(O))),0))}},5134:(Be,be,V)=>{"use strict";var Y=V(2484),D=V(3266).q,H=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Y.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(D.source+"\\s*$"),/^$/,!1]];Be.exports=function(W,P,O,q){var te,J,oe,se,Q=W.bMarks[P]+W.tShift[P],U=W.eMarks[P];if(W.sCount[P]-W.blkIndent>=4||!W.md.options.html||60!==W.src.charCodeAt(Q))return!1;for(se=W.src.slice(Q,U),te=0;te<H.length&&!H[te][0].test(se);te++);if(te===H.length)return!1;if(q)return H[te][2];if(J=P+1,!H[te][1].test(se))for(;J<O&&!(W.sCount[J]<W.blkIndent);J++)if(se=W.src.slice(Q=W.bMarks[J]+W.tShift[J],U=W.eMarks[J]),H[te][1].test(se)){0!==se.length&&J++;break}return W.line=J,(oe=W.push("html_block","",0)).map=[P,J],oe.content=W.getLines(P,J,W.blkIndent,!0),!0}},5920:Be=>{"use strict";Be.exports=function(V,Y,D){var H,B,W,P,O,q,te,J,oe,Q,se=Y+1,U=V.md.block.ruler.getRules("paragraph");if(V.sCount[Y]-V.blkIndent>=4)return!1;for(Q=V.parentType,V.parentType="paragraph";se<D&&!V.isEmpty(se);se++)if(!(V.sCount[se]-V.blkIndent>3)){if(V.sCount[se]>=V.blkIndent&&(q=V.bMarks[se]+V.tShift[se])<(te=V.eMarks[se])&&(45===(oe=V.src.charCodeAt(q))||61===oe)&&(q=V.skipChars(q,oe),(q=V.skipSpaces(q))>=te)){J=61===oe?1:2;break}if(!(V.sCount[se]<0)){for(B=!1,W=0,P=U.length;W<P;W++)if(U[W](V,se,D,!0)){B=!0;break}if(B)break}}return!!J&&(H=V.getLines(Y,se,V.blkIndent,!1).trim(),V.line=se+1,(O=V.push("heading_open","h"+String(J),1)).markup=String.fromCharCode(oe),O.map=[Y,V.line],(O=V.push("inline","",0)).content=H,O.map=[Y,V.line-1],O.children=[],(O=V.push("heading_close","h"+String(J),-1)).markup=String.fromCharCode(oe),V.parentType=Q,!0)}},7827:(Be,be,V)=>{"use strict";var Y=V(3332).isSpace;function D(W,P){var O,q,te,J;return q=W.bMarks[P]+W.tShift[P],te=W.eMarks[P],42!==(O=W.src.charCodeAt(q++))&&45!==O&&43!==O||q<te&&(J=W.src.charCodeAt(q),!Y(J))?-1:q}function H(W,P){var O,q=W.bMarks[P]+W.tShift[P],te=q,J=W.eMarks[P];if(te+1>=J||(O=W.src.charCodeAt(te++))<48||O>57)return-1;for(;;){if(te>=J)return-1;if(!((O=W.src.charCodeAt(te++))>=48&&O<=57)){if(41===O||46===O)break;return-1}if(te-q>=10)return-1}return te<J&&(O=W.src.charCodeAt(te),!Y(O))?-1:te}Be.exports=function(P,O,q,te){var J,oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re,rt,Pe,at,xt,He,ft,gt,Ct,kn,Ut,Dn,Jt,nn=!1,Ln=!0;if(P.sCount[O]-P.blkIndent>=4||P.listIndent>=0&&P.sCount[O]-P.listIndent>=4&&P.sCount[O]<P.blkIndent)return!1;if(te&&"paragraph"===P.parentType&&P.sCount[O]>=P.blkIndent&&(nn=!0),(gt=H(P,O))>=0){if(xe=!0,kn=P.bMarks[O]+P.tShift[O],ne=Number(P.src.slice(kn,gt-1)),nn&&1!==ne)return!1}else{if(!((gt=D(P,O))>=0))return!1;xe=!1}if(nn&&P.skipSpaces(gt)>=P.eMarks[O])return!1;if($=P.src.charCodeAt(gt-1),te)return!0;for(z=P.tokens.length,xe?(Jt=P.push("ordered_list_open","ol",1),1!==ne&&(Jt.attrs=[["start",ne]])):Jt=P.push("bullet_list_open","ul",1),Jt.map=ue=[O,0],Jt.markup=String.fromCharCode($),Ue=O,Ct=!1,Dn=P.md.block.ruler.getRules("list"),Pe=P.parentType,P.parentType="list";Ue<q;){for(ft=gt,ge=P.eMarks[Ue],ae=Re=P.sCount[Ue]+gt-(P.bMarks[O]+P.tShift[O]);ft<ge;){if(9===(J=P.src.charCodeAt(ft)))Re+=4-(Re+P.bsCount[Ue])%4;else{if(32!==J)break;Re++}ft++}if((U=(oe=ft)>=ge?1:Re-ae)>4&&(U=1),Q=ae+U,(Jt=P.push("list_item_open","li",1)).markup=String.fromCharCode($),Jt.map=Oe=[O,0],xe&&(Jt.info=P.src.slice(kn,gt-1)),He=P.tight,xt=P.tShift[O],at=P.sCount[O],rt=P.listIndent,P.listIndent=P.blkIndent,P.blkIndent=Q,P.tight=!0,P.tShift[O]=oe-P.bMarks[O],P.sCount[O]=Re,oe>=ge&&P.isEmpty(O+1)?P.line=Math.min(P.line+2,q):P.md.block.tokenize(P,O,q,!0),(!P.tight||Ct)&&(Ln=!1),Ct=P.line-O>1&&P.isEmpty(P.line-1),P.blkIndent=P.listIndent,P.listIndent=rt,P.tShift[O]=xt,P.sCount[O]=at,P.tight=He,(Jt=P.push("list_item_close","li",-1)).markup=String.fromCharCode($),Ue=O=P.line,Oe[1]=Ue,oe=P.bMarks[O],Ue>=q||P.sCount[Ue]<P.blkIndent||P.sCount[O]-P.blkIndent>=4)break;for(Ut=!1,se=0,re=Dn.length;se<re;se++)if(Dn[se](P,Ue,q,!0)){Ut=!0;break}if(Ut)break;if(xe){if((gt=H(P,Ue))<0)break;kn=P.bMarks[Ue]+P.tShift[Ue]}else if((gt=D(P,Ue))<0)break;if($!==P.src.charCodeAt(gt-1))break}return(Jt=xe?P.push("ordered_list_close","ol",-1):P.push("bullet_list_close","ul",-1)).markup=String.fromCharCode($),ue[1]=Ue,P.line=Ue,P.parentType=Pe,Ln&&function B(W,P){var O,q,te=W.level+2;for(O=P+2,q=W.tokens.length-2;O<q;O++)W.tokens[O].level===te&&"paragraph_open"===W.tokens[O].type&&(W.tokens[O+2].hidden=!0,W.tokens[O].hidden=!0,O+=2)}(P,z),!0}},851:Be=>{"use strict";Be.exports=function(V,Y){var D,H,B,W,P,O,q=Y+1,te=V.md.block.ruler.getRules("paragraph"),J=V.lineMax;for(O=V.parentType,V.parentType="paragraph";q<J&&!V.isEmpty(q);q++)if(!(V.sCount[q]-V.blkIndent>3||V.sCount[q]<0)){for(H=!1,B=0,W=te.length;B<W;B++)if(te[B](V,q,J,!0)){H=!0;break}if(H)break}return D=V.getLines(Y,q,V.blkIndent,!1).trim(),V.line=q,(P=V.push("paragraph_open","p",1)).map=[Y,V.line],(P=V.push("inline","",0)).content=D,P.map=[Y,V.line],P.children=[],P=V.push("paragraph_close","p",-1),V.parentType=O,!0}},5886:(Be,be,V)=>{"use strict";var Y=V(3332).normalizeReference,D=V(3332).isSpace;Be.exports=function(B,W,P,O){var q,te,J,oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue=0,Re=B.bMarks[W]+B.tShift[W],rt=B.eMarks[W],Pe=W+1;if(B.sCount[W]-B.blkIndent>=4||91!==B.src.charCodeAt(Re))return!1;for(;++Re<rt;)if(93===B.src.charCodeAt(Re)&&92!==B.src.charCodeAt(Re-1)){if(Re+1===rt||58!==B.src.charCodeAt(Re+1))return!1;break}for(oe=B.lineMax,ne=B.md.block.ruler.getRules("reference"),Oe=B.parentType,B.parentType="reference";Pe<oe&&!B.isEmpty(Pe);Pe++)if(!(B.sCount[Pe]-B.blkIndent>3||B.sCount[Pe]<0)){for($=!1,Q=0,U=ne.length;Q<U;Q++)if(ne[Q](B,Pe,oe,!0)){$=!0;break}if($)break}for(rt=(z=B.getLines(W,Pe,B.blkIndent,!1).trim()).length,Re=1;Re<rt;Re++){if(91===(q=z.charCodeAt(Re)))return!1;if(93===q){xe=Re;break}(10===q||92===q&&++Re<rt&&10===z.charCodeAt(Re))&&Ue++}if(xe<0||58!==z.charCodeAt(xe+1))return!1;for(Re=xe+2;Re<rt;Re++)if(10===(q=z.charCodeAt(Re)))Ue++;else if(!D(q))break;if(!(re=B.md.helpers.parseLinkDestination(z,Re,rt)).ok||(se=B.md.normalizeLink(re.str),!B.md.validateLink(se)))return!1;for(te=Re=re.pos,J=Ue+=re.lines,ue=Re;Re<rt;Re++)if(10===(q=z.charCodeAt(Re)))Ue++;else if(!D(q))break;for(re=B.md.helpers.parseLinkTitle(z,Re,rt),Re<rt&&ue!==Re&&re.ok?(ge=re.str,Re=re.pos,Ue+=re.lines):(ge="",Re=te,Ue=J);Re<rt&&(q=z.charCodeAt(Re),D(q));)Re++;if(Re<rt&&10!==z.charCodeAt(Re)&&ge)for(ge="",Re=te,Ue=J;Re<rt&&(q=z.charCodeAt(Re),D(q));)Re++;return!(Re<rt&&10!==z.charCodeAt(Re)||(ae=Y(z.slice(1,xe)),!ae)||(O||(typeof B.env.references>"u"&&(B.env.references={}),typeof B.env.references[ae]>"u"&&(B.env.references[ae]={title:ge,href:se}),B.parentType=Oe,B.line=W+Ue+1),0))}},1845:(Be,be,V)=>{"use strict";var Y=V(6263),D=V(3332).isSpace;function H(B,W,P,O){var q,te,J,oe,se,Q,U,ae;for(this.src=B,this.md=W,this.env=P,this.tokens=O,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",ae=!1,J=oe=Q=U=0,se=(te=this.src).length;oe<se;oe++){if(q=te.charCodeAt(oe),!ae){if(D(q)){Q++,9===q?U+=4-U%4:U++;continue}ae=!0}(10===q||oe===se-1)&&(10!==q&&oe++,this.bMarks.push(J),this.eMarks.push(oe),this.tShift.push(Q),this.sCount.push(U),this.bsCount.push(0),ae=!1,Q=0,U=0,J=oe+1)}this.bMarks.push(te.length),this.eMarks.push(te.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}H.prototype.push=function(B,W,P){var O=new Y(B,W,P);return O.block=!0,P<0&&this.level--,O.level=this.level,P>0&&this.level++,this.tokens.push(O),O},H.prototype.isEmpty=function(W){return this.bMarks[W]+this.tShift[W]>=this.eMarks[W]},H.prototype.skipEmptyLines=function(W){for(var P=this.lineMax;W<P&&!(this.bMarks[W]+this.tShift[W]<this.eMarks[W]);W++);return W},H.prototype.skipSpaces=function(W){for(var P,O=this.src.length;W<O&&(P=this.src.charCodeAt(W),D(P));W++);return W},H.prototype.skipSpacesBack=function(W,P){if(W<=P)return W;for(;W>P;)if(!D(this.src.charCodeAt(--W)))return W+1;return W},H.prototype.skipChars=function(W,P){for(var O=this.src.length;W<O&&this.src.charCodeAt(W)===P;W++);return W},H.prototype.skipCharsBack=function(W,P,O){if(W<=O)return W;for(;W>O;)if(P!==this.src.charCodeAt(--W))return W+1;return W},H.prototype.getLines=function(W,P,O,q){var te,J,oe,se,Q,U,ae,xe=W;if(W>=P)return"";for(U=new Array(P-W),te=0;xe<P;xe++,te++){for(J=0,ae=se=this.bMarks[xe],Q=xe+1<P||q?this.eMarks[xe]+1:this.eMarks[xe];se<Q&&J<O;){if(oe=this.src.charCodeAt(se),D(oe))9===oe?J+=4-(J+this.bsCount[xe])%4:J++;else{if(!(se-ae<this.tShift[xe]))break;J++}se++}U[te]=J>O?new Array(J-O+1).join(" ")+this.src.slice(se,Q):this.src.slice(se,Q)}return U.join("")},H.prototype.Token=Y,Be.exports=H},2281:(Be,be,V)=>{"use strict";var Y=V(3332).isSpace;function D(B,W){return B.src.slice(B.bMarks[W]+B.tShift[W],B.eMarks[W])}function H(B){var q,W=[],P=0,O=B.length,te=!1,J=0,oe="";for(q=B.charCodeAt(P);P<O;)124===q&&(te?(oe+=B.substring(J,P-1),J=P):(W.push(oe+B.substring(J,P)),oe="",J=P+1)),te=92===q,P++,q=B.charCodeAt(P);return W.push(oe+B.substring(J)),W}Be.exports=function(W,P,O,q){var te,J,oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re,rt;if(P+2>O||W.sCount[U=P+1]<W.blkIndent||W.sCount[U]-W.blkIndent>=4||(oe=W.bMarks[U]+W.tShift[U])>=W.eMarks[U]||124!==(Re=W.src.charCodeAt(oe++))&&45!==Re&&58!==Re||oe>=W.eMarks[U]||124!==(rt=W.src.charCodeAt(oe++))&&45!==rt&&58!==rt&&!Y(rt)||45===Re&&Y(rt))return!1;for(;oe<W.eMarks[U];){if(124!==(te=W.src.charCodeAt(oe))&&45!==te&&58!==te&&!Y(te))return!1;oe++}for(ae=(J=D(W,P+1)).split("|"),re=[],se=0;se<ae.length;se++){if(!(ue=ae[se].trim())){if(0===se||se===ae.length-1)continue;return!1}if(!/^:?-+:?$/.test(ue))return!1;58===ue.charCodeAt(ue.length-1)?re.push(58===ue.charCodeAt(0)?"center":"right"):58===ue.charCodeAt(0)?re.push("left"):re.push("")}if(-1===(J=D(W,P).trim()).indexOf("|")||W.sCount[P]-W.blkIndent>=4||((ae=H(J)).length&&""===ae[0]&&ae.shift(),ae.length&&""===ae[ae.length-1]&&ae.pop(),0===(xe=ae.length)||xe!==re.length))return!1;if(q)return!0;for(ne=W.parentType,W.parentType="table",Ue=W.md.block.ruler.getRules("blockquote"),(Oe=W.push("table_open","table",1)).map=z=[P,0],(Oe=W.push("thead_open","thead",1)).map=[P,P+1],(Oe=W.push("tr_open","tr",1)).map=[P,P+1],se=0;se<ae.length;se++)Oe=W.push("th_open","th",1),re[se]&&(Oe.attrs=[["style","text-align:"+re[se]]]),(Oe=W.push("inline","",0)).content=ae[se].trim(),Oe.children=[],Oe=W.push("th_close","th",-1);for(Oe=W.push("tr_close","tr",-1),Oe=W.push("thead_close","thead",-1),U=P+2;U<O&&!(W.sCount[U]<W.blkIndent);U++){for(ge=!1,se=0,Q=Ue.length;se<Q;se++)if(Ue[se](W,U,O,!0)){ge=!0;break}if(ge||!(J=D(W,U).trim())||W.sCount[U]-W.blkIndent>=4)break;for((ae=H(J)).length&&""===ae[0]&&ae.shift(),ae.length&&""===ae[ae.length-1]&&ae.pop(),U===P+2&&((Oe=W.push("tbody_open","tbody",1)).map=$=[P+2,0]),(Oe=W.push("tr_open","tr",1)).map=[U,U+1],se=0;se<xe;se++)Oe=W.push("td_open","td",1),re[se]&&(Oe.attrs=[["style","text-align:"+re[se]]]),(Oe=W.push("inline","",0)).content=ae[se]?ae[se].trim():"",Oe.children=[],Oe=W.push("td_close","td",-1);Oe=W.push("tr_close","tr",-1)}return $&&(Oe=W.push("tbody_close","tbody",-1),$[1]=U),Oe=W.push("table_close","table",-1),z[1]=U,W.parentType=ne,W.line=U,!0}},8905:Be=>{"use strict";Be.exports=function(V){var Y;V.inlineMode?((Y=new V.Token("inline","",0)).content=V.src,Y.map=[0,1],Y.children=[],V.tokens.push(Y)):V.md.block.parse(V.src,V.md,V.env,V.tokens)}},3591:Be=>{"use strict";Be.exports=function(V){var D,H,B,Y=V.tokens;for(H=0,B=Y.length;H<B;H++)"inline"===(D=Y[H]).type&&V.md.inline.parse(D.content,V.md,V.env,D.children)}},9212:(Be,be,V)=>{"use strict";var Y=V(3332).arrayReplaceAt;Be.exports=function(W){var P,O,q,te,J,oe,se,Q,U,ae,xe,Oe,re,z,$,ge,ne=W.tokens;if(W.md.options.linkify)for(O=0,q=ne.length;O<q;O++)if("inline"===ne[O].type&&W.md.linkify.pretest(ne[O].content))for(re=0,P=(te=ne[O].children).length-1;P>=0;P--)if("link_close"!==(oe=te[P]).type){if("html_inline"===oe.type&&(/^<a[>\s]/i.test(oe.content)&&re>0&&re--,/^<\/a\s*>/i.test(oe.content)&&re++),!(re>0)&&"text"===oe.type&&W.md.linkify.test(oe.content)){for(ge=W.md.linkify.match(U=oe.content),se=[],Oe=oe.level,xe=0,ge.length>0&&0===ge[0].index&&P>0&&"text_special"===te[P-1].type&&(ge=ge.slice(1)),Q=0;Q<ge.length;Q++)z=W.md.normalizeLink(ge[Q].url),W.md.validateLink(z)&&($=ge[Q].text,$=ge[Q].schema?"mailto:"!==ge[Q].schema||/^mailto:/i.test($)?W.md.normalizeLinkText($):W.md.normalizeLinkText("mailto:"+$).replace(/^mailto:/,""):W.md.normalizeLinkText("http://"+$).replace(/^http:\/\//,""),(ae=ge[Q].index)>xe&&((J=new W.Token("text","",0)).content=U.slice(xe,ae),J.level=Oe,se.push(J)),(J=new W.Token("link_open","a",1)).attrs=[["href",z]],J.level=Oe++,J.markup="linkify",J.info="auto",se.push(J),(J=new W.Token("text","",0)).content=$,J.level=Oe,se.push(J),(J=new W.Token("link_close","a",-1)).level=--Oe,J.markup="linkify",J.info="auto",se.push(J),xe=ge[Q].lastIndex);xe<U.length&&((J=new W.Token("text","",0)).content=U.slice(xe),J.level=Oe,se.push(J)),ne[O].children=te=Y(te,P,se)}}else for(P--;te[P].level!==oe.level&&"link_open"!==te[P].type;)P--}},7398:Be=>{"use strict";var be=/\r\n?|\n/g,V=/\0/g;Be.exports=function(D){var H;H=(H=D.src.replace(be,"\n")).replace(V,"\ufffd"),D.src=H}},1982:Be=>{"use strict";var be=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,V=/\((c|tm|r)\)/i,Y=/\((c|tm|r)\)/gi,D={c:"\xa9",r:"\xae",tm:"\u2122"};function H(P,O){return D[O.toLowerCase()]}function B(P){var O,q,te=0;for(O=P.length-1;O>=0;O--)"text"===(q=P[O]).type&&!te&&(q.content=q.content.replace(Y,H)),"link_open"===q.type&&"auto"===q.info&&te--,"link_close"===q.type&&"auto"===q.info&&te++}function W(P){var O,q,te=0;for(O=P.length-1;O>=0;O--)"text"===(q=P[O]).type&&!te&&be.test(q.content)&&(q.content=q.content.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/gm,"$1\u2014").replace(/(^|\s)--(?=\s|$)/gm,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/gm,"$1\u2013")),"link_open"===q.type&&"auto"===q.info&&te--,"link_close"===q.type&&"auto"===q.info&&te++}Be.exports=function(O){var q;if(O.md.options.typographer)for(q=O.tokens.length-1;q>=0;q--)"inline"===O.tokens[q].type&&(V.test(O.tokens[q].content)&&B(O.tokens[q].children),be.test(O.tokens[q].content)&&W(O.tokens[q].children))}},8157:(Be,be,V)=>{"use strict";var Y=V(3332).isWhiteSpace,D=V(3332).isPunctChar,H=V(3332).isMdAsciiPunct,B=/['"]/,W=/['"]/g;function O(te,J,oe){return te.slice(0,J)+oe+te.slice(J+1)}function q(te,J){var oe,se,Q,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re,rt,Pe,at,xt,He,ft;for(xt=[],oe=0;oe<te.length;oe++){for(se=te[oe],Oe=te[oe].level,Pe=xt.length-1;Pe>=0&&!(xt[Pe].level<=Oe);Pe--);if(xt.length=Pe+1,"text"===se.type){ae=0,xe=(Q=se.content).length;e:for(;ae<xe&&(W.lastIndex=ae,U=W.exec(Q),U);){if(Re=rt=!0,ae=U.index+1,at="'"===U[0],ue=32,U.index-1>=0)ue=Q.charCodeAt(U.index-1);else for(Pe=oe-1;Pe>=0&&"softbreak"!==te[Pe].type&&"hardbreak"!==te[Pe].type;Pe--)if(te[Pe].content){ue=te[Pe].content.charCodeAt(te[Pe].content.length-1);break}if(z=32,ae<xe)z=Q.charCodeAt(ae);else for(Pe=oe+1;Pe<te.length&&"softbreak"!==te[Pe].type&&"hardbreak"!==te[Pe].type;Pe++)if(te[Pe].content){z=te[Pe].content.charCodeAt(0);break}if($=H(ue)||D(String.fromCharCode(ue)),ne=H(z)||D(String.fromCharCode(z)),ge=Y(ue),(Ue=Y(z))?Re=!1:ne&&(ge||$||(Re=!1)),ge?rt=!1:$&&(Ue||ne||(rt=!1)),34===z&&'"'===U[0]&&ue>=48&&ue<=57&&(rt=Re=!1),Re&&rt&&(Re=$,rt=ne),Re||rt){if(rt)for(Pe=xt.length-1;Pe>=0&&(re=xt[Pe],!(xt[Pe].level<Oe));Pe--)if(re.single===at&&xt[Pe].level===Oe){re=xt[Pe],at?(He=J.md.options.quotes[2],ft=J.md.options.quotes[3]):(He=J.md.options.quotes[0],ft=J.md.options.quotes[1]),se.content=O(se.content,U.index,ft),te[re.token].content=O(te[re.token].content,re.pos,He),ae+=ft.length-1,re.token===oe&&(ae+=He.length-1),xe=(Q=se.content).length,xt.length=Pe;continue e}Re?xt.push({token:oe,pos:U.index,single:at,level:Oe}):rt&&at&&(se.content=O(se.content,U.index,"\u2019"))}else at&&(se.content=O(se.content,U.index,"\u2019"))}}}}Be.exports=function(J){var oe;if(J.md.options.typographer)for(oe=J.tokens.length-1;oe>=0;oe--)"inline"!==J.tokens[oe].type||!B.test(J.tokens[oe].content)||q(J.tokens[oe].children,J)}},1076:(Be,be,V)=>{"use strict";var Y=V(6263);function D(H,B,W){this.src=H,this.env=W,this.tokens=[],this.inlineMode=!1,this.md=B}D.prototype.Token=Y,Be.exports=D},2245:Be=>{"use strict";Be.exports=function(V){var Y,D,H,B,W,P,O=V.tokens;for(Y=0,D=O.length;Y<D;Y++)if("inline"===O[Y].type){for(W=(H=O[Y].children).length,B=0;B<W;B++)"text_special"===H[B].type&&(H[B].type="text");for(B=P=0;B<W;B++)"text"===H[B].type&&B+1<W&&"text"===H[B+1].type?H[B+1].content=H[B].content+H[B+1].content:(B!==P&&(H[P]=H[B]),P++);B!==P&&(H.length=P)}}},6973:Be=>{"use strict";var be=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,V=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;Be.exports=function(D,H){var B,W,P,O,q,te,J=D.pos;if(60!==D.src.charCodeAt(J))return!1;for(q=D.pos,te=D.posMax;;){if(++J>=te||60===(O=D.src.charCodeAt(J)))return!1;if(62===O)break}return B=D.src.slice(q+1,J),V.test(B)?(W=D.md.normalizeLink(B),!!D.md.validateLink(W)&&(H||((P=D.push("link_open","a",1)).attrs=[["href",W]],P.markup="autolink",P.info="auto",(P=D.push("text","",0)).content=D.md.normalizeLinkText(B),(P=D.push("link_close","a",-1)).markup="autolink",P.info="auto"),D.pos+=B.length+2,!0)):!!be.test(B)&&(W=D.md.normalizeLink("mailto:"+B),!!D.md.validateLink(W)&&(H||((P=D.push("link_open","a",1)).attrs=[["href",W]],P.markup="autolink",P.info="auto",(P=D.push("text","",0)).content=D.md.normalizeLinkText(B),(P=D.push("link_close","a",-1)).markup="autolink",P.info="auto"),D.pos+=B.length+2,!0))}},415:Be=>{"use strict";Be.exports=function(V,Y){var D,H,B,W,P,O,q,te,J=V.pos;if(96!==V.src.charCodeAt(J))return!1;for(D=J,J++,H=V.posMax;J<H&&96===V.src.charCodeAt(J);)J++;if(q=(B=V.src.slice(D,J)).length,V.backticksScanned&&(V.backticks[q]||0)<=D)return Y||(V.pending+=B),V.pos+=q,!0;for(P=O=J;-1!==(P=V.src.indexOf("`",O));){for(O=P+1;O<H&&96===V.src.charCodeAt(O);)O++;if((te=O-P)===q)return Y||((W=V.push("code_inline","code",0)).markup=B,W.content=V.src.slice(J,P).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),V.pos=O,!0;V.backticks[te]=P}return V.backticksScanned=!0,Y||(V.pending+=B),V.pos+=q,!0}},9269:Be=>{"use strict";function be(V,Y){var D,H,B,W,P,O,q,te,J={},oe=Y.length;if(oe){var se=0,Q=-2,U=[];for(D=0;D<oe;D++)if(B=Y[D],U.push(0),(Y[se].marker!==B.marker||Q!==B.token-1)&&(se=D),Q=B.token,B.length=B.length||0,B.close){for(J.hasOwnProperty(B.marker)||(J[B.marker]=[-1,-1,-1,-1,-1,-1]),P=J[B.marker][(B.open?3:0)+B.length%3],O=H=se-U[se]-1;H>P;H-=U[H]+1)if((W=Y[H]).marker===B.marker&&W.open&&W.end<0&&(q=!1,(W.close||B.open)&&(W.length+B.length)%3==0&&(W.length%3!=0||B.length%3!=0)&&(q=!0),!q)){U[D]=D-H+(te=H>0&&!Y[H-1].open?U[H-1]+1:0),U[H]=te,B.open=!1,W.end=D,W.close=!1,O=-1,Q=-2;break}-1!==O&&(J[B.marker][(B.open?3:0)+(B.length||0)%3]=O)}}}Be.exports=function(Y){var D,H=Y.tokens_meta,B=Y.tokens_meta.length;for(be(0,Y.delimiters),D=0;D<B;D++)H[D]&&H[D].delimiters&&be(0,H[D].delimiters)}},425:Be=>{"use strict";function be(V,Y){var D,H,B,W,P,O;for(D=Y.length-1;D>=0;D--)(95===(H=Y[D]).marker||42===H.marker)&&-1!==H.end&&(B=Y[H.end],O=D>0&&Y[D-1].end===H.end+1&&Y[D-1].marker===H.marker&&Y[D-1].token===H.token-1&&Y[H.end+1].token===B.token+1,P=String.fromCharCode(H.marker),(W=V.tokens[H.token]).type=O?"strong_open":"em_open",W.tag=O?"strong":"em",W.nesting=1,W.markup=O?P+P:P,W.content="",(W=V.tokens[B.token]).type=O?"strong_close":"em_close",W.tag=O?"strong":"em",W.nesting=-1,W.markup=O?P+P:P,W.content="",O&&(V.tokens[Y[D-1].token].content="",V.tokens[Y[H.end+1].token].content="",D--))}Be.exports.w=function(Y,D){var H,B,O=Y.src.charCodeAt(Y.pos);if(D||95!==O&&42!==O)return!1;for(B=Y.scanDelims(Y.pos,42===O),H=0;H<B.length;H++)Y.push("text","",0).content=String.fromCharCode(O),Y.delimiters.push({marker:O,length:B.length,token:Y.tokens.length-1,end:-1,open:B.can_open,close:B.can_close});return Y.pos+=B.length,!0},Be.exports.g=function(Y){var D,H=Y.tokens_meta,B=Y.tokens_meta.length;for(be(Y,Y.delimiters),D=0;D<B;D++)H[D]&&H[D].delimiters&&be(Y,H[D].delimiters)}},3559:(Be,be,V)=>{"use strict";var Y=V(6798),D=V(3332).has,H=V(3332).isValidEntityCode,B=V(3332).fromCodePoint,W=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,P=/^&([a-z][a-z0-9]{1,31});/i;Be.exports=function(q,te){var oe,se,Q,U=q.pos,ae=q.posMax;if(38!==q.src.charCodeAt(U)||U+1>=ae)return!1;if(35===q.src.charCodeAt(U+1)){if(se=q.src.slice(U).match(W))return te||(oe="x"===se[1][0].toLowerCase()?parseInt(se[1].slice(1),16):parseInt(se[1],10),(Q=q.push("text_special","",0)).content=H(oe)?B(oe):B(65533),Q.markup=se[0],Q.info="entity"),q.pos+=se[0].length,!0}else if((se=q.src.slice(U).match(P))&&D(Y,se[1]))return te||((Q=q.push("text_special","",0)).content=Y[se[1]],Q.markup=se[0],Q.info="entity"),q.pos+=se[0].length,!0;return!1}},8763:(Be,be,V)=>{"use strict";for(var Y=V(3332).isSpace,D=[],H=0;H<256;H++)D.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(B){D[B.charCodeAt(0)]=1}),Be.exports=function(W,P){var O,q,te,J,oe,se=W.pos,Q=W.posMax;if(92!==W.src.charCodeAt(se)||++se>=Q)return!1;if(10===(O=W.src.charCodeAt(se))){for(P||W.push("hardbreak","br",0),se++;se<Q&&(O=W.src.charCodeAt(se),Y(O));)se++;return W.pos=se,!0}return J=W.src[se],O>=55296&&O<=56319&&se+1<Q&&(q=W.src.charCodeAt(se+1))>=56320&&q<=57343&&(J+=W.src[se+1],se++),te="\\"+J,P||((oe=W.push("text_special","",0)).content=O<256&&0!==D[O]?J:te,oe.markup=te,oe.info="escape"),W.pos=se+1,!0}},5767:Be=>{"use strict";Be.exports=function(V){var Y,D,H=0,B=V.tokens,W=V.tokens.length;for(Y=D=0;Y<W;Y++)B[Y].nesting<0&&H--,B[Y].level=H,B[Y].nesting>0&&H++,"text"===B[Y].type&&Y+1<W&&"text"===B[Y+1].type?B[Y+1].content=B[Y].content+B[Y+1].content:(Y!==D&&(B[D]=B[Y]),D++);Y!==D&&(B.length=D)}},3722:(Be,be,V)=>{"use strict";var Y=V(3266).n;Be.exports=function(P,O){var q,te,J,oe,se=P.pos;return!(!P.md.options.html||(J=P.posMax,60!==P.src.charCodeAt(se)||se+2>=J)||(q=P.src.charCodeAt(se+1),33!==q&&63!==q&&47!==q&&!function B(W){var P=32|W;return P>=97&&P<=122}(q))||(te=P.src.slice(se).match(Y),!te)||(O||((oe=P.push("html_inline","",0)).content=P.src.slice(se,se+te[0].length),function D(W){return/^<a[>\s]/i.test(W)}(oe.content)&&P.linkLevel++,function H(W){return/^<\/a\s*>/i.test(W)}(oe.content)&&P.linkLevel--),P.pos+=te[0].length,0))}},7936:(Be,be,V)=>{"use strict";var Y=V(3332).normalizeReference,D=V(3332).isSpace;Be.exports=function(B,W){var P,O,q,te,J,oe,se,Q,U,ae,xe,Oe,re,ue="",z=B.pos,$=B.posMax;if(33!==B.src.charCodeAt(B.pos)||91!==B.src.charCodeAt(B.pos+1)||(oe=B.pos+2,(J=B.md.helpers.parseLinkLabel(B,B.pos+1,!1))<0))return!1;if((se=J+1)<$&&40===B.src.charCodeAt(se)){for(se++;se<$&&(O=B.src.charCodeAt(se),D(O)||10===O);se++);if(se>=$)return!1;for(re=se,(U=B.md.helpers.parseLinkDestination(B.src,se,B.posMax)).ok&&(ue=B.md.normalizeLink(U.str),B.md.validateLink(ue)?se=U.pos:ue=""),re=se;se<$&&(O=B.src.charCodeAt(se),D(O)||10===O);se++);if(U=B.md.helpers.parseLinkTitle(B.src,se,B.posMax),se<$&&re!==se&&U.ok)for(ae=U.str,se=U.pos;se<$&&(O=B.src.charCodeAt(se),D(O)||10===O);se++);else ae="";if(se>=$||41!==B.src.charCodeAt(se))return B.pos=z,!1;se++}else{if(typeof B.env.references>"u")return!1;if(se<$&&91===B.src.charCodeAt(se)?(re=se+1,(se=B.md.helpers.parseLinkLabel(B,se))>=0?te=B.src.slice(re,se++):se=J+1):se=J+1,te||(te=B.src.slice(oe,J)),!(Q=B.env.references[Y(te)]))return B.pos=z,!1;ue=Q.href,ae=Q.title}return W||(q=B.src.slice(oe,J),B.md.inline.parse(q,B.md,B.env,Oe=[]),(xe=B.push("image","img",0)).attrs=P=[["src",ue],["alt",""]],xe.children=Oe,xe.content=q,ae&&P.push(["title",ae])),B.pos=se,B.posMax=$,!0}},7219:(Be,be,V)=>{"use strict";var Y=V(3332).normalizeReference,D=V(3332).isSpace;Be.exports=function(B,W){var P,O,q,te,J,oe,se,Q,ae="",xe="",Oe=B.pos,re=B.posMax,ue=B.pos,z=!0;if(91!==B.src.charCodeAt(B.pos)||(J=B.pos+1,(te=B.md.helpers.parseLinkLabel(B,B.pos,!0))<0))return!1;if((oe=te+1)<re&&40===B.src.charCodeAt(oe)){for(z=!1,oe++;oe<re&&(O=B.src.charCodeAt(oe),D(O)||10===O);oe++);if(oe>=re)return!1;if(ue=oe,(se=B.md.helpers.parseLinkDestination(B.src,oe,B.posMax)).ok){for(ae=B.md.normalizeLink(se.str),B.md.validateLink(ae)?oe=se.pos:ae="",ue=oe;oe<re&&(O=B.src.charCodeAt(oe),D(O)||10===O);oe++);if(se=B.md.helpers.parseLinkTitle(B.src,oe,B.posMax),oe<re&&ue!==oe&&se.ok)for(xe=se.str,oe=se.pos;oe<re&&(O=B.src.charCodeAt(oe),D(O)||10===O);oe++);}(oe>=re||41!==B.src.charCodeAt(oe))&&(z=!0),oe++}if(z){if(typeof B.env.references>"u")return!1;if(oe<re&&91===B.src.charCodeAt(oe)?(ue=oe+1,(oe=B.md.helpers.parseLinkLabel(B,oe))>=0?q=B.src.slice(ue,oe++):oe=te+1):oe=te+1,q||(q=B.src.slice(J,te)),!(Q=B.env.references[Y(q)]))return B.pos=Oe,!1;ae=Q.href,xe=Q.title}return W||(B.pos=J,B.posMax=te,B.push("link_open","a",1).attrs=P=[["href",ae]],xe&&P.push(["title",xe]),B.linkLevel++,B.md.inline.tokenize(B),B.linkLevel--,B.push("link_close","a",-1)),B.pos=oe,B.posMax=re,!0}},6234:Be=>{"use strict";var be=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;Be.exports=function(Y,D){var H,B,W,P,O,q,te,J;return!(!Y.md.options.linkify||Y.linkLevel>0||(H=Y.pos,B=Y.posMax,H+3>B)||58!==Y.src.charCodeAt(H)||47!==Y.src.charCodeAt(H+1)||47!==Y.src.charCodeAt(H+2)||(W=Y.pending.match(be),!W)||(P=W[1],O=Y.md.linkify.matchAtStart(Y.src.slice(H-P.length)),!O)||(q=O.url,q=q.replace(/\*+$/,""),te=Y.md.normalizeLink(q),!Y.md.validateLink(te))||(D||(Y.pending=Y.pending.slice(0,-P.length),(J=Y.push("link_open","a",1)).attrs=[["href",te]],J.markup="linkify",J.info="auto",(J=Y.push("text","",0)).content=Y.md.normalizeLinkText(q),(J=Y.push("link_close","a",-1)).markup="linkify",J.info="auto"),Y.pos+=q.length-P.length,0))}},2921:(Be,be,V)=>{"use strict";var Y=V(3332).isSpace;Be.exports=function(H,B){var W,P,O,q=H.pos;if(10!==H.src.charCodeAt(q))return!1;if(W=H.pending.length-1,P=H.posMax,!B)if(W>=0&&32===H.pending.charCodeAt(W))if(W>=1&&32===H.pending.charCodeAt(W-1)){for(O=W-1;O>=1&&32===H.pending.charCodeAt(O-1);)O--;H.pending=H.pending.slice(0,O),H.push("hardbreak","br",0)}else H.pending=H.pending.slice(0,-1),H.push("softbreak","br",0);else H.push("softbreak","br",0);for(q++;q<P&&Y(H.src.charCodeAt(q));)q++;return H.pos=q,!0}},630:(Be,be,V)=>{"use strict";var Y=V(6263),D=V(3332).isWhiteSpace,H=V(3332).isPunctChar,B=V(3332).isMdAsciiPunct;function W(P,O,q,te){this.src=P,this.env=q,this.md=O,this.tokens=te,this.tokens_meta=Array(te.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}W.prototype.pushPending=function(){var P=new Y("text","",0);return P.content=this.pending,P.level=this.pendingLevel,this.tokens.push(P),this.pending="",P},W.prototype.push=function(P,O,q){this.pending&&this.pushPending();var te=new Y(P,O,q),J=null;return q<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),te.level=this.level,q>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],J={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(te),this.tokens_meta.push(J),te},W.prototype.scanDelims=function(P,O){var te,J,oe,se,Q,U,ae,xe,Oe,q=P,re=!0,ue=!0,z=this.posMax,$=this.src.charCodeAt(P);for(te=P>0?this.src.charCodeAt(P-1):32;q<z&&this.src.charCodeAt(q)===$;)q++;return oe=q-P,J=q<z?this.src.charCodeAt(q):32,ae=B(te)||H(String.fromCharCode(te)),Oe=B(J)||H(String.fromCharCode(J)),U=D(te),(xe=D(J))?re=!1:Oe&&(U||ae||(re=!1)),U?ue=!1:ae&&(xe||Oe||(ue=!1)),O?(se=re,Q=ue):(se=re&&(!ue||ae),Q=ue&&(!re||Oe)),{can_open:se,can_close:Q,length:oe}},W.prototype.Token=Y,Be.exports=W},8165:Be=>{"use strict";function be(V,Y){var D,H,B,W,P,O=[],q=Y.length;for(D=0;D<q;D++)126===(B=Y[D]).marker&&-1!==B.end&&(W=Y[B.end],(P=V.tokens[B.token]).type="s_open",P.tag="s",P.nesting=1,P.markup="~~",P.content="",(P=V.tokens[W.token]).type="s_close",P.tag="s",P.nesting=-1,P.markup="~~",P.content="","text"===V.tokens[W.token-1].type&&"~"===V.tokens[W.token-1].content&&O.push(W.token-1));for(;O.length;){for(H=(D=O.pop())+1;H<V.tokens.length&&"s_close"===V.tokens[H].type;)H++;D!==--H&&(P=V.tokens[H],V.tokens[H]=V.tokens[D],V.tokens[D]=P)}}Be.exports.w=function(Y,D){var H,B,P,O,te=Y.src.charCodeAt(Y.pos);if(D||126!==te||(P=(B=Y.scanDelims(Y.pos,!0)).length,O=String.fromCharCode(te),P<2))return!1;for(P%2&&(Y.push("text","",0).content=O,P--),H=0;H<P;H+=2)Y.push("text","",0).content=O+O,Y.delimiters.push({marker:te,length:0,token:Y.tokens.length-1,end:-1,open:B.can_open,close:B.can_close});return Y.pos+=B.length,!0},Be.exports.g=function(Y){var D,H=Y.tokens_meta,B=Y.tokens_meta.length;for(be(Y,Y.delimiters),D=0;D<B;D++)H[D]&&H[D].delimiters&&be(Y,H[D].delimiters)}},1767:Be=>{"use strict";function be(V){switch(V){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}Be.exports=function(Y,D){for(var H=Y.pos;H<Y.posMax&&!be(Y.src.charCodeAt(H));)H++;return H!==Y.pos&&(D||(Y.pending+=Y.src.slice(Y.pos,H)),Y.pos=H,!0)}},6263:Be=>{"use strict";function be(V,Y,D){this.type=V,this.tag=Y,this.attrs=null,this.map=null,this.nesting=D,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}be.prototype.attrIndex=function(Y){var D,H,B;if(!this.attrs)return-1;for(H=0,B=(D=this.attrs).length;H<B;H++)if(D[H][0]===Y)return H;return-1},be.prototype.attrPush=function(Y){this.attrs?this.attrs.push(Y):this.attrs=[Y]},be.prototype.attrSet=function(Y,D){var H=this.attrIndex(Y),B=[Y,D];H<0?this.attrPush(B):this.attrs[H]=B},be.prototype.attrGet=function(Y){var D=this.attrIndex(Y),H=null;return D>=0&&(H=this.attrs[D][1]),H},be.prototype.attrJoin=function(Y,D){var H=this.attrIndex(Y);H<0?this.attrPush([Y,D]):this.attrs[H][1]=this.attrs[H][1]+" "+D},Be.exports=be},9801:Be=>{"use strict";var be={};function Y(D,H){var B;return"string"!=typeof H&&(H=Y.defaultChars),B=function V(D){var H,B,W=be[D];if(W)return W;for(W=be[D]=[],H=0;H<128;H++)B=String.fromCharCode(H),W.push(B);for(H=0;H<D.length;H++)W[B=D.charCodeAt(H)]="%"+("0"+B.toString(16).toUpperCase()).slice(-2);return W}(H),D.replace(/(%[a-f0-9]{2})+/gi,function(W){var P,O,q,te,J,oe,se,Q="";for(P=0,O=W.length;P<O;P+=3)(q=parseInt(W.slice(P+1,P+3),16))<128?Q+=B[q]:192==(224&q)&&P+3<O&&128==(192&(te=parseInt(W.slice(P+4,P+6),16)))?(Q+=(se=q<<6&1984|63&te)<128?"\ufffd\ufffd":String.fromCharCode(se),P+=3):224==(240&q)&&P+6<O&&(te=parseInt(W.slice(P+4,P+6),16),J=parseInt(W.slice(P+7,P+9),16),128==(192&te)&&128==(192&J))?(Q+=(se=q<<12&61440|te<<6&4032|63&J)<2048||se>=55296&&se<=57343?"\ufffd\ufffd\ufffd":String.fromCharCode(se),P+=6):240==(248&q)&&P+9<O&&(te=parseInt(W.slice(P+4,P+6),16),J=parseInt(W.slice(P+7,P+9),16),oe=parseInt(W.slice(P+10,P+12),16),128==(192&te)&&128==(192&J)&&128==(192&oe))?((se=q<<18&1835008|te<<12&258048|J<<6&4032|63&oe)<65536||se>1114111?Q+="\ufffd\ufffd\ufffd\ufffd":(se-=65536,Q+=String.fromCharCode(55296+(se>>10),56320+(1023&se))),P+=9):Q+="\ufffd";return Q})}Y.defaultChars=";/?:@&=+$,#",Y.componentChars="",Be.exports=Y},526:Be=>{"use strict";var be={};function Y(D,H,B){var W,P,O,q,te,J="";for("string"!=typeof H&&(B=H,H=Y.defaultChars),typeof B>"u"&&(B=!0),te=function V(D){var H,B,W=be[D];if(W)return W;for(W=be[D]=[],H=0;H<128;H++)B=String.fromCharCode(H),/^[0-9a-z]$/i.test(B)?W.push(B):W.push("%"+("0"+H.toString(16).toUpperCase()).slice(-2));for(H=0;H<D.length;H++)W[D.charCodeAt(H)]=D[H];return W}(H),W=0,P=D.length;W<P;W++)if(O=D.charCodeAt(W),B&&37===O&&W+2<P&&/^[0-9a-f]{2}$/i.test(D.slice(W+1,W+3)))J+=D.slice(W,W+3),W+=2;else if(O<128)J+=te[O];else if(O>=55296&&O<=57343){if(O>=55296&&O<=56319&&W+1<P&&(q=D.charCodeAt(W+1))>=56320&&q<=57343){J+=encodeURIComponent(D[W]+D[W+1]),W++;continue}J+="%EF%BF%BD"}else J+=encodeURIComponent(D[W]);return J}Y.defaultChars=";/?:@&=+$,-_.!~*'()#",Y.componentChars="-_.!~*'()",Be.exports=Y},381:Be=>{"use strict";Be.exports=function(V){var Y="";return Y+=V.protocol||"",Y+=V.slashes?"//":"",Y+=V.auth?V.auth+"@":"",V.hostname&&-1!==V.hostname.indexOf(":")?Y+="["+V.hostname+"]":Y+=V.hostname||"",Y+=V.port?":"+V.port:"",Y+=V.pathname||"",(Y+=V.search||"")+(V.hash||"")}},7214:(Be,be,V)=>{"use strict";Be.exports.encode=V(526),Be.exports.decode=V(9801),Be.exports.format=V(381),Be.exports.parse=V(3850)},3850:Be=>{"use strict";function be(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var V=/^([a-z0-9.+-]+:)/i,Y=/:[0-9]*$/,D=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,B=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),W=["'"].concat(B),P=["%","/","?",";","#"].concat(W),O=["/","?","#"],te=/^[+a-z0-9A-Z_-]{0,63}$/,J=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,oe={javascript:!0,"javascript:":!0},se={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};be.prototype.parse=function(U,ae){var xe,Oe,re,ue,z,$=U;if($=$.trim(),!ae&&1===U.split("#").length){var ne=D.exec($);if(ne)return this.pathname=ne[1],ne[2]&&(this.search=ne[2]),this}var ge=V.exec($);if(ge&&(re=(ge=ge[0]).toLowerCase(),this.protocol=ge,$=$.substr(ge.length)),(ae||ge||$.match(/^\/\/[^@\/]+@[^@\/]+/))&&(z="//"===$.substr(0,2))&&!(ge&&oe[ge])&&($=$.substr(2),this.slashes=!0),!oe[ge]&&(z||ge&&!se[ge])){var Re,rt,Ue=-1;for(xe=0;xe<O.length;xe++)-1!==(ue=$.indexOf(O[xe]))&&(-1===Ue||ue<Ue)&&(Ue=ue);for(-1!==(rt=-1===Ue?$.lastIndexOf("@"):$.lastIndexOf("@",Ue))&&(Re=$.slice(0,rt),$=$.slice(rt+1),this.auth=Re),Ue=-1,xe=0;xe<P.length;xe++)-1!==(ue=$.indexOf(P[xe]))&&(-1===Ue||ue<Ue)&&(Ue=ue);-1===Ue&&(Ue=$.length),":"===$[Ue-1]&&Ue--;var Pe=$.slice(0,Ue);$=$.slice(Ue),this.parseHost(Pe),this.hostname=this.hostname||"";var at="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!at){var xt=this.hostname.split(/\./);for(xe=0,Oe=xt.length;xe<Oe;xe++){var He=xt[xe];if(He&&!He.match(te)){for(var ft="",gt=0,Ct=He.length;gt<Ct;gt++)He.charCodeAt(gt)>127?ft+="x":ft+=He[gt];if(!ft.match(te)){var kn=xt.slice(0,xe),Ut=xt.slice(xe+1),Dn=He.match(J);Dn&&(kn.push(Dn[1]),Ut.unshift(Dn[2])),Ut.length&&($=Ut.join(".")+$),this.hostname=kn.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),at&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var Jt=$.indexOf("#");-1!==Jt&&(this.hash=$.substr(Jt),$=$.slice(0,Jt));var nn=$.indexOf("?");return-1!==nn&&(this.search=$.substr(nn),$=$.slice(0,nn)),$&&(this.pathname=$),se[re]&&this.hostname&&!this.pathname&&(this.pathname=""),this},be.prototype.parseHost=function(U){var ae=Y.exec(U);ae&&(":"!==(ae=ae[0])&&(this.port=ae.substr(1)),U=U.substr(0,U.length-ae.length)),U&&(this.hostname=U)},Be.exports=function Q(U,ae){if(U&&U instanceof be)return U;var xe=new be;return xe.parse(U,ae),xe}},4879:(Be,be,V)=>{"use strict";V.r(be),V.d(be,{decode:()=>Re,default:()=>He,encode:()=>rt,toASCII:()=>at,toUnicode:()=>Pe,ucs2decode:()=>z,ucs2encode:()=>$});const Y=2147483647,D=36,J=/^xn--/,oe=/[^\0-\x7E]/,se=/[\x2E\u3002\uFF0E\uFF61]/g,Q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ae=Math.floor,xe=String.fromCharCode;function Oe(ft){throw new RangeError(Q[ft])}function ue(ft,gt){const Ct=ft.split("@");let kn="";Ct.length>1&&(kn=Ct[0]+"@",ft=Ct[1]);const Dn=function re(ft,gt){const Ct=[];let kn=ft.length;for(;kn--;)Ct[kn]=gt(ft[kn]);return Ct}((ft=ft.replace(se,".")).split("."),gt).join(".");return kn+Dn}function z(ft){const gt=[];let Ct=0;const kn=ft.length;for(;Ct<kn;){const Ut=ft.charCodeAt(Ct++);if(Ut>=55296&&Ut<=56319&&Ct<kn){const Dn=ft.charCodeAt(Ct++);56320==(64512&Dn)?gt.push(((1023&Ut)<<10)+(1023&Dn)+65536):(gt.push(Ut),Ct--)}else gt.push(Ut)}return gt}const $=ft=>String.fromCodePoint(...ft),ne=function(ft){return ft-48<10?ft-22:ft-65<26?ft-65:ft-97<26?ft-97:D},ge=function(ft,gt){return ft+22+75*(ft<26)-((0!=gt)<<5)},Ue=function(ft,gt,Ct){let kn=0;for(ft=Ct?ae(ft/700):ft>>1,ft+=ae(ft/gt);ft>455;kn+=D)ft=ae(ft/35);return ae(kn+36*ft/(ft+38))},Re=function(ft){const gt=[],Ct=ft.length;let kn=0,Ut=128,Dn=72,Jt=ft.lastIndexOf("-");Jt<0&&(Jt=0);for(let nn=0;nn<Jt;++nn)ft.charCodeAt(nn)>=128&&Oe("not-basic"),gt.push(ft.charCodeAt(nn));for(let nn=Jt>0?Jt+1:0;nn<Ct;){let Ln=kn;for(let bn=1,yn=D;;yn+=D){nn>=Ct&&Oe("invalid-input");const je=ne(ft.charCodeAt(nn++));(je>=D||je>ae((Y-kn)/bn))&&Oe("overflow"),kn+=je*bn;const Ce=yn<=Dn?1:yn>=Dn+26?26:yn-Dn;if(je<Ce)break;const Dt=D-Ce;bn>ae(Y/Dt)&&Oe("overflow"),bn*=Dt}const xn=gt.length+1;Dn=Ue(kn-Ln,xn,0==Ln),ae(kn/xn)>Y-Ut&&Oe("overflow"),Ut+=ae(kn/xn),kn%=xn,gt.splice(kn++,0,Ut)}return String.fromCodePoint(...gt)},rt=function(ft){const gt=[];let Ct=(ft=z(ft)).length,kn=128,Ut=0,Dn=72;for(const Ln of ft)Ln<128&&gt.push(xe(Ln));let Jt=gt.length,nn=Jt;for(Jt&&gt.push("-");nn<Ct;){let Ln=Y;for(const bn of ft)bn>=kn&&bn<Ln&&(Ln=bn);const xn=nn+1;Ln-kn>ae((Y-Ut)/xn)&&Oe("overflow"),Ut+=(Ln-kn)*xn,kn=Ln;for(const bn of ft)if(bn<kn&&++Ut>Y&&Oe("overflow"),bn==kn){let yn=Ut;for(let je=D;;je+=D){const Ce=je<=Dn?1:je>=Dn+26?26:je-Dn;if(yn<Ce)break;const Dt=yn-Ce,Rt=D-Ce;gt.push(xe(ge(Ce+Dt%Rt,0))),yn=ae(Dt/Rt)}gt.push(xe(ge(yn,0))),Dn=Ue(Ut,xn,nn==Jt),Ut=0,++nn}++Ut,++kn}return gt.join("")},Pe=function(ft){return ue(ft,function(gt){return J.test(gt)?Re(gt.slice(4).toLowerCase()):gt})},at=function(ft){return ue(ft,function(gt){return oe.test(gt)?"xn--"+rt(gt):gt})},He={version:"2.1.0",ucs2:{decode:z,encode:$},decode:Re,encode:rt,toASCII:at,toUnicode:Pe}},891:Be=>{"use strict";var V={};function Y(P,O,q){q||(q=Error);var J=function(oe){function se(Q,U,ae){return oe.call(this,function te(oe,se,Q){return"string"==typeof O?O:O(oe,se,Q)}(Q,U,ae))||this}return function be(P,O){P.prototype=Object.create(O.prototype),P.prototype.constructor=P,P.__proto__=O}(se,oe),se}(q);J.prototype.name=q.name,J.prototype.code=P,V[P]=J}function D(P,O){if(Array.isArray(P)){var q=P.length;return P=P.map(function(te){return String(te)}),q>2?"one of ".concat(O," ").concat(P.slice(0,q-1).join(", "),", or ")+P[q-1]:2===q?"one of ".concat(O," ").concat(P[0]," or ").concat(P[1]):"of ".concat(O," ").concat(P[0])}return"of ".concat(O," ").concat(String(P))}Y("ERR_INVALID_OPT_VALUE",function(P,O){return'The value "'+O+'" is invalid for option "'+P+'"'},TypeError),Y("ERR_INVALID_ARG_TYPE",function(P,O,q){var te,J;if("string"==typeof O&&function H(P,O,q){return P.substr(!q||q<0?0:+q,O.length)===O}(O,"not ")?(te="must not be",O=O.replace(/^not /,"")):te="must be",function B(P,O,q){return(void 0===q||q>P.length)&&(q=P.length),P.substring(q-O.length,q)===O}(P," argument"))J="The ".concat(P," ").concat(te," ").concat(D(O,"type"));else{var oe=function W(P,O,q){return"number"!=typeof q&&(q=0),!(q+O.length>P.length)&&-1!==P.indexOf(O,q)}(P,".")?"property":"argument";J='The "'.concat(P,'" ').concat(oe," ").concat(te," ").concat(D(O,"type"))}return J+". Received type ".concat(typeof q)},TypeError),Y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Y("ERR_METHOD_NOT_IMPLEMENTED",function(P){return"The "+P+" method is not implemented"}),Y("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Y("ERR_STREAM_DESTROYED",function(P){return"Cannot call "+P+" after a stream was destroyed"}),Y("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Y("ERR_STREAM_WRITE_AFTER_END","write after end"),Y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Y("ERR_UNKNOWN_ENCODING",function(P){return"Unknown encoding: "+P},TypeError),Y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Be.exports.q=V},1339:(Be,be,V)=>{"use strict";var Y=Object.keys||function(J){var oe=[];for(var se in J)oe.push(se);return oe};Be.exports=O;var D=V(3154),H=V(520);V(3894)(O,D);for(var B=Y(H.prototype),W=0;W<B.length;W++){var P=B[W];O.prototype[P]||(O.prototype[P]=H.prototype[P])}function O(J){if(!(this instanceof O))return new O(J);D.call(this,J),H.call(this,J),this.allowHalfOpen=!0,J&&(!1===J.readable&&(this.readable=!1),!1===J.writable&&(this.writable=!1),!1===J.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",q)))}function q(){this._writableState.ended||process.nextTick(te,this)}function te(J){J.end()}Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(oe){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=oe,this._writableState.destroyed=oe)}})},6071:(Be,be,V)=>{"use strict";Be.exports=D;var Y=V(6025);function D(H){if(!(this instanceof D))return new D(H);Y.call(this,H)}V(3894)(D,Y),D.prototype._transform=function(H,B,W){W(null,H)}},3154:(Be,be,V)=>{"use strict";var Y;Be.exports=Pe,Pe.ReadableState=rt,V(9069);var J,H=function(Pt,un){return Pt.listeners(un).length},B=V(4970),W=V(3172).Buffer,P=global.Uint8Array||function(){},te=V(4616);J=te&&te.debuglog?te.debuglog("stream"):function(){};var z,$,ne,oe=V(5019),se=V(1920),U=V(7102).getHighWaterMark,ae=V(891).q,xe=ae.ERR_INVALID_ARG_TYPE,Oe=ae.ERR_STREAM_PUSH_AFTER_EOF,re=ae.ERR_METHOD_NOT_IMPLEMENTED,ue=ae.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;V(3894)(Pe,B);var ge=se.errorOrDestroy,Ue=["error","close","destroy","pause","resume"];function rt(At,Pt,un){Y=Y||V(1339),"boolean"!=typeof un&&(un=Pt instanceof Y),this.objectMode=!!(At=At||{}).objectMode,un&&(this.objectMode=this.objectMode||!!At.readableObjectMode),this.highWaterMark=U(this,At,"readableHighWaterMark",un),this.buffer=new oe,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==At.emitClose,this.autoDestroy=!!At.autoDestroy,this.destroyed=!1,this.defaultEncoding=At.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,At.encoding&&(z||(z=V(3054).s),this.decoder=new z(At.encoding),this.encoding=At.encoding)}function Pe(At){if(Y=Y||V(1339),!(this instanceof Pe))return new Pe(At);this._readableState=new rt(At,this,this instanceof Y),this.readable=!0,At&&("function"==typeof At.read&&(this._read=At.read),"function"==typeof At.destroy&&(this._destroy=At.destroy)),B.call(this)}function at(At,Pt,un,Je,Te){J("readableAddChunk",Pt);var Ot,Me=At._readableState;if(null===Pt)Me.reading=!1,function kn(At,Pt){if(J("onEofChunk"),!Pt.ended){if(Pt.decoder){var un=Pt.decoder.end();un&&un.length&&(Pt.buffer.push(un),Pt.length+=Pt.objectMode?1:un.length)}Pt.ended=!0,Pt.sync?Ut(At):(Pt.needReadable=!1,Pt.emittedReadable||(Pt.emittedReadable=!0,Dn(At)))}}(At,Me);else if(Te||(Ot=function He(At,Pt){var un;return!function q(At){return W.isBuffer(At)||At instanceof P}(Pt)&&"string"!=typeof Pt&&void 0!==Pt&&!At.objectMode&&(un=new xe("chunk",["string","Buffer","Uint8Array"],Pt)),un}(Me,Pt)),Ot)ge(At,Ot);else if(Me.objectMode||Pt&&Pt.length>0)if("string"!=typeof Pt&&!Me.objectMode&&Object.getPrototypeOf(Pt)!==W.prototype&&(Pt=function O(At){return W.from(At)}(Pt)),Je)Me.endEmitted?ge(At,new ue):xt(At,Me,Pt,!0);else if(Me.ended)ge(At,new Oe);else{if(Me.destroyed)return!1;Me.reading=!1,Me.decoder&&!un?(Pt=Me.decoder.write(Pt),Me.objectMode||0!==Pt.length?xt(At,Me,Pt,!1):Jt(At,Me)):xt(At,Me,Pt,!1)}else Je||(Me.reading=!1,Jt(At,Me));return!Me.ended&&(Me.length<Me.highWaterMark||0===Me.length)}function xt(At,Pt,un,Je){Pt.flowing&&0===Pt.length&&!Pt.sync?(Pt.awaitDrain=0,At.emit("data",un)):(Pt.length+=Pt.objectMode?1:un.length,Je?Pt.buffer.unshift(un):Pt.buffer.push(un),Pt.needReadable&&Ut(At)),Jt(At,Pt)}Object.defineProperty(Pe.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(Pt){!this._readableState||(this._readableState.destroyed=Pt)}}),Pe.prototype.destroy=se.destroy,Pe.prototype._undestroy=se.undestroy,Pe.prototype._destroy=function(At,Pt){Pt(At)},Pe.prototype.push=function(At,Pt){var Je,un=this._readableState;return un.objectMode?Je=!0:"string"==typeof At&&((Pt=Pt||un.defaultEncoding)!==un.encoding&&(At=W.from(At,Pt),Pt=""),Je=!0),at(this,At,Pt,!1,Je)},Pe.prototype.unshift=function(At){return at(this,At,null,!0,!1)},Pe.prototype.isPaused=function(){return!1===this._readableState.flowing},Pe.prototype.setEncoding=function(At){z||(z=V(3054).s);var Pt=new z(At);this._readableState.decoder=Pt,this._readableState.encoding=this._readableState.decoder.encoding;for(var un=this._readableState.buffer.head,Je="";null!==un;)Je+=Pt.write(un.data),un=un.next;return this._readableState.buffer.clear(),""!==Je&&this._readableState.buffer.push(Je),this._readableState.length=Je.length,this};var ft=1073741824;function Ct(At,Pt){return At<=0||0===Pt.length&&Pt.ended?0:Pt.objectMode?1:At!=At?Pt.flowing&&Pt.length?Pt.buffer.head.data.length:Pt.length:(At>Pt.highWaterMark&&(Pt.highWaterMark=function gt(At){return At>=ft?At=ft:(At--,At|=At>>>1,At|=At>>>2,At|=At>>>4,At|=At>>>8,At|=At>>>16,At++),At}(At)),At<=Pt.length?At:Pt.ended?Pt.length:(Pt.needReadable=!0,0))}function Ut(At){var Pt=At._readableState;J("emitReadable",Pt.needReadable,Pt.emittedReadable),Pt.needReadable=!1,Pt.emittedReadable||(J("emitReadable",Pt.flowing),Pt.emittedReadable=!0,process.nextTick(Dn,At))}function Dn(At){var Pt=At._readableState;J("emitReadable_",Pt.destroyed,Pt.length,Pt.ended),!Pt.destroyed&&(Pt.length||Pt.ended)&&(At.emit("readable"),Pt.emittedReadable=!1),Pt.needReadable=!Pt.flowing&&!Pt.ended&&Pt.length<=Pt.highWaterMark,Ce(At)}function Jt(At,Pt){Pt.readingMore||(Pt.readingMore=!0,process.nextTick(nn,At,Pt))}function nn(At,Pt){for(;!Pt.reading&&!Pt.ended&&(Pt.length<Pt.highWaterMark||Pt.flowing&&0===Pt.length);){var un=Pt.length;if(J("maybeReadMore read 0"),At.read(0),un===Pt.length)break}Pt.readingMore=!1}function xn(At){var Pt=At._readableState;Pt.readableListening=At.listenerCount("readable")>0,Pt.resumeScheduled&&!Pt.paused?Pt.flowing=!0:At.listenerCount("data")>0&&At.resume()}function bn(At){J("readable nexttick read 0"),At.read(0)}function je(At,Pt){J("resume",Pt.reading),Pt.reading||At.read(0),Pt.resumeScheduled=!1,At.emit("resume"),Ce(At),Pt.flowing&&!Pt.reading&&At.read(0)}function Ce(At){var Pt=At._readableState;for(J("flow",Pt.flowing);Pt.flowing&&null!==At.read(););}function Dt(At,Pt){return 0===Pt.length?null:(Pt.objectMode?un=Pt.buffer.shift():!At||At>=Pt.length?(un=Pt.decoder?Pt.buffer.join(""):1===Pt.buffer.length?Pt.buffer.first():Pt.buffer.concat(Pt.length),Pt.buffer.clear()):un=Pt.buffer.consume(At,Pt.decoder),un);var un}function Rt(At){var Pt=At._readableState;J("endReadable",Pt.endEmitted),Pt.endEmitted||(Pt.ended=!0,process.nextTick(ci,Pt,At))}function ci(At,Pt){if(J("endReadableNT",At.endEmitted,At.length),!At.endEmitted&&0===At.length&&(At.endEmitted=!0,Pt.readable=!1,Pt.emit("end"),At.autoDestroy)){var un=Pt._writableState;(!un||un.autoDestroy&&un.finished)&&Pt.destroy()}}function $i(At,Pt){for(var un=0,Je=At.length;un<Je;un++)if(At[un]===Pt)return un;return-1}Pe.prototype.read=function(At){J("read",At),At=parseInt(At,10);var Pt=this._readableState,un=At;if(0!==At&&(Pt.emittedReadable=!1),0===At&&Pt.needReadable&&((0!==Pt.highWaterMark?Pt.length>=Pt.highWaterMark:Pt.length>0)||Pt.ended))return J("read: emitReadable",Pt.length,Pt.ended),0===Pt.length&&Pt.ended?Rt(this):Ut(this),null;if(0===(At=Ct(At,Pt))&&Pt.ended)return 0===Pt.length&&Rt(this),null;var Te,Je=Pt.needReadable;return J("need readable",Je),(0===Pt.length||Pt.length-At<Pt.highWaterMark)&&J("length less than watermark",Je=!0),Pt.ended||Pt.reading?J("reading or ended",Je=!1):Je&&(J("do read"),Pt.reading=!0,Pt.sync=!0,0===Pt.length&&(Pt.needReadable=!0),this._read(Pt.highWaterMark),Pt.sync=!1,Pt.reading||(At=Ct(un,Pt))),null===(Te=At>0?Dt(At,Pt):null)?(Pt.needReadable=Pt.length<=Pt.highWaterMark,At=0):(Pt.length-=At,Pt.awaitDrain=0),0===Pt.length&&(Pt.ended||(Pt.needReadable=!0),un!==At&&Pt.ended&&Rt(this)),null!==Te&&this.emit("data",Te),Te},Pe.prototype._read=function(At){ge(this,new re("_read()"))},Pe.prototype.pipe=function(At,Pt){var un=this,Je=this._readableState;switch(Je.pipesCount){case 0:Je.pipes=At;break;case 1:Je.pipes=[Je.pipes,At];break;default:Je.pipes.push(At)}Je.pipesCount+=1,J("pipe count=%d opts=%j",Je.pipesCount,Pt);var Me=Pt&&!1===Pt.end||At===process.stdout||At===process.stderr?tl:vn;function vn(){J("onend"),At.end()}Je.endEmitted?process.nextTick(Me):un.once("end",Me),At.on("unpipe",function Ot($l,ql){J("onunpipe"),$l===un&&ql&&!1===ql.hasUnpiped&&(ql.hasUnpiped=!0,function Hs(){J("cleanup"),At.removeListener("close",ca),At.removeListener("finish",er),At.removeListener("drain",ii),At.removeListener("error",bs),At.removeListener("unpipe",Ot),un.removeListener("end",vn),un.removeListener("end",tl),un.removeListener("data",so),Fi=!0,Je.awaitDrain&&(!At._writableState||At._writableState.needDrain)&&ii()}())});var ii=function Ln(At){return function(){var un=At._readableState;J("pipeOnDrain",un.awaitDrain),un.awaitDrain&&un.awaitDrain--,0===un.awaitDrain&&H(At,"data")&&(un.flowing=!0,Ce(At))}}(un);At.on("drain",ii);var Fi=!1;function so($l){J("ondata");var ql=At.write($l);J("dest.write",ql),!1===ql&&((1===Je.pipesCount&&Je.pipes===At||Je.pipesCount>1&&-1!==$i(Je.pipes,At))&&!Fi&&(J("false write response, pause",Je.awaitDrain),Je.awaitDrain++),un.pause())}function bs($l){J("onerror",$l),tl(),At.removeListener("error",bs),0===H(At,"error")&&ge(At,$l)}function ca(){At.removeListener("finish",er),tl()}function er(){J("onfinish"),At.removeListener("close",ca),tl()}function tl(){J("unpipe"),un.unpipe(At)}return un.on("data",so),function Re(At,Pt,un){if("function"==typeof At.prependListener)return At.prependListener(Pt,un);At._events&&At._events[Pt]?Array.isArray(At._events[Pt])?At._events[Pt].unshift(un):At._events[Pt]=[un,At._events[Pt]]:At.on(Pt,un)}(At,"error",bs),At.once("close",ca),At.once("finish",er),At.emit("pipe",un),Je.flowing||(J("pipe resume"),un.resume()),At},Pe.prototype.unpipe=function(At){var Pt=this._readableState,un={hasUnpiped:!1};if(0===Pt.pipesCount)return this;if(1===Pt.pipesCount)return At&&At!==Pt.pipes||(At||(At=Pt.pipes),Pt.pipes=null,Pt.pipesCount=0,Pt.flowing=!1,At&&At.emit("unpipe",this,un)),this;if(!At){var Je=Pt.pipes,Te=Pt.pipesCount;Pt.pipes=null,Pt.pipesCount=0,Pt.flowing=!1;for(var Me=0;Me<Te;Me++)Je[Me].emit("unpipe",this,{hasUnpiped:!1});return this}var Ot=$i(Pt.pipes,At);return-1===Ot||(Pt.pipes.splice(Ot,1),Pt.pipesCount-=1,1===Pt.pipesCount&&(Pt.pipes=Pt.pipes[0]),At.emit("unpipe",this,un)),this},Pe.prototype.addListener=Pe.prototype.on=function(At,Pt){var un=B.prototype.on.call(this,At,Pt),Je=this._readableState;return"data"===At?(Je.readableListening=this.listenerCount("readable")>0,!1!==Je.flowing&&this.resume()):"readable"===At&&!Je.endEmitted&&!Je.readableListening&&(Je.readableListening=Je.needReadable=!0,Je.flowing=!1,Je.emittedReadable=!1,J("on readable",Je.length,Je.reading),Je.length?Ut(this):Je.reading||process.nextTick(bn,this)),un},Pe.prototype.removeListener=function(At,Pt){var un=B.prototype.removeListener.call(this,At,Pt);return"readable"===At&&process.nextTick(xn,this),un},Pe.prototype.removeAllListeners=function(At){var Pt=B.prototype.removeAllListeners.apply(this,arguments);return("readable"===At||void 0===At)&&process.nextTick(xn,this),Pt},Pe.prototype.resume=function(){var At=this._readableState;return At.flowing||(J("resume"),At.flowing=!At.readableListening,function yn(At,Pt){Pt.resumeScheduled||(Pt.resumeScheduled=!0,process.nextTick(je,At,Pt))}(this,At)),At.paused=!1,this},Pe.prototype.pause=function(){return J("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(J("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Pe.prototype.wrap=function(At){var Pt=this,un=this._readableState,Je=!1;for(var Te in At.on("end",function(){if(J("wrapped end"),un.decoder&&!un.ended){var Ot=un.decoder.end();Ot&&Ot.length&&Pt.push(Ot)}Pt.push(null)}),At.on("data",function(Ot){J("wrapped data"),un.decoder&&(Ot=un.decoder.write(Ot)),un.objectMode&&null==Ot||!(un.objectMode||Ot&&Ot.length)||Pt.push(Ot)||(Je=!0,At.pause())}),At)void 0===this[Te]&&"function"==typeof At[Te]&&(this[Te]=function(vn){return function(){return At[vn].apply(At,arguments)}}(Te));for(var Me=0;Me<Ue.length;Me++)At.on(Ue[Me],this.emit.bind(this,Ue[Me]));return this._read=function(Ot){J("wrapped _read",Ot),Je&&(Je=!1,At.resume())},this},"function"==typeof Symbol&&(Pe.prototype[Symbol.asyncIterator]=function(){return void 0===$&&($=V(3872)),$(this)}),Object.defineProperty(Pe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Pe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Pe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Pt){this._readableState&&(this._readableState.flowing=Pt)}}),Pe._fromList=Dt,Object.defineProperty(Pe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(Pe.from=function(At,Pt){return void 0===ne&&(ne=V(7412)),ne(Pe,At,Pt)})},6025:(Be,be,V)=>{"use strict";Be.exports=q;var Y=V(891).q,D=Y.ERR_METHOD_NOT_IMPLEMENTED,H=Y.ERR_MULTIPLE_CALLBACK,B=Y.ERR_TRANSFORM_ALREADY_TRANSFORMING,W=Y.ERR_TRANSFORM_WITH_LENGTH_0,P=V(1339);function O(oe,se){var Q=this._transformState;Q.transforming=!1;var U=Q.writecb;if(null===U)return this.emit("error",new H);Q.writechunk=null,Q.writecb=null,null!=se&&this.push(se),U(oe);var ae=this._readableState;ae.reading=!1,(ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}function q(oe){if(!(this instanceof q))return new q(oe);P.call(this,oe),this._transformState={afterTransform:O.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,oe&&("function"==typeof oe.transform&&(this._transform=oe.transform),"function"==typeof oe.flush&&(this._flush=oe.flush)),this.on("prefinish",te)}function te(){var oe=this;"function"!=typeof this._flush||this._readableState.destroyed?J(this,null,null):this._flush(function(se,Q){J(oe,se,Q)})}function J(oe,se,Q){if(se)return oe.emit("error",se);if(null!=Q&&oe.push(Q),oe._writableState.length)throw new W;if(oe._transformState.transforming)throw new B;return oe.push(null)}V(3894)(q,P),q.prototype.push=function(oe,se){return this._transformState.needTransform=!1,P.prototype.push.call(this,oe,se)},q.prototype._transform=function(oe,se,Q){Q(new D("_transform()"))},q.prototype._write=function(oe,se,Q){var U=this._transformState;if(U.writecb=Q,U.writechunk=oe,U.writeencoding=se,!U.transforming){var ae=this._readableState;(U.needTransform||ae.needReadable||ae.length<ae.highWaterMark)&&this._read(ae.highWaterMark)}},q.prototype._read=function(oe){var se=this._transformState;null===se.writechunk||se.transforming?se.needTransform=!0:(se.transforming=!0,this._transform(se.writechunk,se.writeencoding,se.afterTransform))},q.prototype._destroy=function(oe,se){P.prototype._destroy.call(this,oe,function(Q){se(Q)})}},520:(Be,be,V)=>{"use strict";function D(Ce){var Dt=this;this.next=null,this.entry=null,this.finish=function(){!function je(Ce,Dt,Rt){var ci=Ce.entry;for(Ce.entry=null;ci;){var $i=ci.callback;Dt.pendingcb--,$i(Rt),ci=ci.next}Dt.corkedRequestsFree.next=Ce}(Dt,Ce)}}var H;Be.exports=rt,rt.WritableState=Ue;var Re,B={deprecate:V(3532)},W=V(4970),P=V(3172).Buffer,O=global.Uint8Array||function(){},J=V(1920),se=V(7102).getHighWaterMark,Q=V(891).q,U=Q.ERR_INVALID_ARG_TYPE,ae=Q.ERR_METHOD_NOT_IMPLEMENTED,xe=Q.ERR_MULTIPLE_CALLBACK,Oe=Q.ERR_STREAM_CANNOT_PIPE,re=Q.ERR_STREAM_DESTROYED,ue=Q.ERR_STREAM_NULL_VALUES,z=Q.ERR_STREAM_WRITE_AFTER_END,$=Q.ERR_UNKNOWN_ENCODING,ne=J.errorOrDestroy;function ge(){}function Ue(Ce,Dt,Rt){H=H||V(1339),"boolean"!=typeof Rt&&(Rt=Dt instanceof H),this.objectMode=!!(Ce=Ce||{}).objectMode,Rt&&(this.objectMode=this.objectMode||!!Ce.writableObjectMode),this.highWaterMark=se(this,Ce,"writableHighWaterMark",Rt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Ce.decodeStrings),this.defaultEncoding=Ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function($i){!function kn(Ce,Dt){var Rt=Ce._writableState,ci=Rt.sync,$i=Rt.writecb;if("function"!=typeof $i)throw new xe;if(function Ct(Ce){Ce.writing=!1,Ce.writecb=null,Ce.length-=Ce.writelen,Ce.writelen=0}(Rt),Dt)!function gt(Ce,Dt,Rt,ci,$i){--Dt.pendingcb,Rt?(process.nextTick($i,ci),process.nextTick(bn,Ce,Dt),Ce._writableState.errorEmitted=!0,ne(Ce,ci)):($i(ci),Ce._writableState.errorEmitted=!0,ne(Ce,ci),bn(Ce,Dt))}(Ce,Rt,ci,Dt,$i);else{var At=nn(Rt)||Ce.destroyed;!At&&!Rt.corked&&!Rt.bufferProcessing&&Rt.bufferedRequest&&Jt(Ce,Rt),ci?process.nextTick(Ut,Ce,Rt,At,$i):Ut(Ce,Rt,At,$i)}}(Dt,$i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==Ce.emitClose,this.autoDestroy=!!Ce.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new D(this)}function rt(Ce){var Dt=this instanceof(H=H||V(1339));if(!Dt&&!Re.call(rt,this))return new rt(Ce);this._writableState=new Ue(Ce,this,Dt),this.writable=!0,Ce&&("function"==typeof Ce.write&&(this._write=Ce.write),"function"==typeof Ce.writev&&(this._writev=Ce.writev),"function"==typeof Ce.destroy&&(this._destroy=Ce.destroy),"function"==typeof Ce.final&&(this._final=Ce.final)),W.call(this)}function ft(Ce,Dt,Rt,ci,$i,At,Pt){Dt.writelen=ci,Dt.writecb=Pt,Dt.writing=!0,Dt.sync=!0,Dt.destroyed?Dt.onwrite(new re("write")):Rt?Ce._writev($i,Dt.onwrite):Ce._write($i,At,Dt.onwrite),Dt.sync=!1}function Ut(Ce,Dt,Rt,ci){Rt||function Dn(Ce,Dt){0===Dt.length&&Dt.needDrain&&(Dt.needDrain=!1,Ce.emit("drain"))}(Ce,Dt),Dt.pendingcb--,ci(),bn(Ce,Dt)}function Jt(Ce,Dt){Dt.bufferProcessing=!0;var Rt=Dt.bufferedRequest;if(Ce._writev&&Rt&&Rt.next){var $i=new Array(Dt.bufferedRequestCount),At=Dt.corkedRequestsFree;At.entry=Rt;for(var Pt=0,un=!0;Rt;)$i[Pt]=Rt,Rt.isBuf||(un=!1),Rt=Rt.next,Pt+=1;$i.allBuffers=un,ft(Ce,Dt,!0,Dt.length,$i,"",At.finish),Dt.pendingcb++,Dt.lastBufferedRequest=null,At.next?(Dt.corkedRequestsFree=At.next,At.next=null):Dt.corkedRequestsFree=new D(Dt),Dt.bufferedRequestCount=0}else{for(;Rt;){var Je=Rt.chunk;if(ft(Ce,Dt,!1,Dt.objectMode?1:Je.length,Je,Rt.encoding,Rt.callback),Rt=Rt.next,Dt.bufferedRequestCount--,Dt.writing)break}null===Rt&&(Dt.lastBufferedRequest=null)}Dt.bufferedRequest=Rt,Dt.bufferProcessing=!1}function nn(Ce){return Ce.ending&&0===Ce.length&&null===Ce.bufferedRequest&&!Ce.finished&&!Ce.writing}function Ln(Ce,Dt){Ce._final(function(Rt){Dt.pendingcb--,Rt&&ne(Ce,Rt),Dt.prefinished=!0,Ce.emit("prefinish"),bn(Ce,Dt)})}function bn(Ce,Dt){var Rt=nn(Dt);if(Rt&&(function xn(Ce,Dt){!Dt.prefinished&&!Dt.finalCalled&&("function"!=typeof Ce._final||Dt.destroyed?(Dt.prefinished=!0,Ce.emit("prefinish")):(Dt.pendingcb++,Dt.finalCalled=!0,process.nextTick(Ln,Ce,Dt)))}(Ce,Dt),0===Dt.pendingcb&&(Dt.finished=!0,Ce.emit("finish"),Dt.autoDestroy))){var ci=Ce._readableState;(!ci||ci.autoDestroy&&ci.endEmitted)&&Ce.destroy()}return Rt}V(3894)(rt,W),Ue.prototype.getBuffer=function(){for(var Dt=this.bufferedRequest,Rt=[];Dt;)Rt.push(Dt),Dt=Dt.next;return Rt},function(){try{Object.defineProperty(Ue.prototype,"buffer",{get:B.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(Re=Function.prototype[Symbol.hasInstance],Object.defineProperty(rt,Symbol.hasInstance,{value:function(Dt){return!!Re.call(this,Dt)||this===rt&&Dt&&Dt._writableState instanceof Ue}})):Re=function(Dt){return Dt instanceof this},rt.prototype.pipe=function(){ne(this,new Oe)},rt.prototype.write=function(Ce,Dt,Rt){var ci=this._writableState,$i=!1,At=!ci.objectMode&&function te(Ce){return P.isBuffer(Ce)||Ce instanceof O}(Ce);return At&&!P.isBuffer(Ce)&&(Ce=function q(Ce){return P.from(Ce)}(Ce)),"function"==typeof Dt&&(Rt=Dt,Dt=null),At?Dt="buffer":Dt||(Dt=ci.defaultEncoding),"function"!=typeof Rt&&(Rt=ge),ci.ending?function Pe(Ce,Dt){var Rt=new z;ne(Ce,Rt),process.nextTick(Dt,Rt)}(this,Rt):(At||function at(Ce,Dt,Rt,ci){var $i;return null===Rt?$i=new ue:"string"!=typeof Rt&&!Dt.objectMode&&($i=new U("chunk",["string","Buffer"],Rt)),!$i||(ne(Ce,$i),process.nextTick(ci,$i),!1)}(this,ci,Ce,Rt))&&(ci.pendingcb++,$i=function He(Ce,Dt,Rt,ci,$i,At){if(!Rt){var Pt=function xt(Ce,Dt,Rt){return!Ce.objectMode&&!1!==Ce.decodeStrings&&"string"==typeof Dt&&(Dt=P.from(Dt,Rt)),Dt}(Dt,ci,$i);ci!==Pt&&(Rt=!0,$i="buffer",ci=Pt)}var un=Dt.objectMode?1:ci.length;Dt.length+=un;var Je=Dt.length<Dt.highWaterMark;if(Je||(Dt.needDrain=!0),Dt.writing||Dt.corked){var Te=Dt.lastBufferedRequest;Dt.lastBufferedRequest={chunk:ci,encoding:$i,isBuf:Rt,callback:At,next:null},Te?Te.next=Dt.lastBufferedRequest:Dt.bufferedRequest=Dt.lastBufferedRequest,Dt.bufferedRequestCount+=1}else ft(Ce,Dt,!1,un,ci,$i,At);return Je}(this,ci,At,Ce,Dt,Rt)),$i},rt.prototype.cork=function(){this._writableState.corked++},rt.prototype.uncork=function(){var Ce=this._writableState;Ce.corked&&(Ce.corked--,!Ce.writing&&!Ce.corked&&!Ce.bufferProcessing&&Ce.bufferedRequest&&Jt(this,Ce))},rt.prototype.setDefaultEncoding=function(Dt){if("string"==typeof Dt&&(Dt=Dt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Dt+"").toLowerCase())>-1))throw new $(Dt);return this._writableState.defaultEncoding=Dt,this},Object.defineProperty(rt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(rt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),rt.prototype._write=function(Ce,Dt,Rt){Rt(new ae("_write()"))},rt.prototype._writev=null,rt.prototype.end=function(Ce,Dt,Rt){var ci=this._writableState;return"function"==typeof Ce?(Rt=Ce,Ce=null,Dt=null):"function"==typeof Dt&&(Rt=Dt,Dt=null),null!=Ce&&this.write(Ce,Dt),ci.corked&&(ci.corked=1,this.uncork()),ci.ending||function yn(Ce,Dt,Rt){Dt.ending=!0,bn(Ce,Dt),Rt&&(Dt.finished?process.nextTick(Rt):Ce.once("finish",Rt)),Dt.ended=!0,Ce.writable=!1}(this,ci,Rt),this},Object.defineProperty(rt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(rt.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Dt){!this._writableState||(this._writableState.destroyed=Dt)}}),rt.prototype.destroy=J.destroy,rt.prototype._undestroy=J.undestroy,rt.prototype._destroy=function(Ce,Dt){Dt(Ce)}},3872:(Be,be,V)=>{"use strict";var Y;function D(re,ue,z){return ue in re?Object.defineProperty(re,ue,{value:z,enumerable:!0,configurable:!0,writable:!0}):re[ue]=z,re}var H=V(7542),B=Symbol("lastResolve"),W=Symbol("lastReject"),P=Symbol("error"),O=Symbol("ended"),q=Symbol("lastPromise"),te=Symbol("handlePromise"),J=Symbol("stream");function oe(re,ue){return{value:re,done:ue}}function se(re){var ue=re[B];if(null!==ue){var z=re[J].read();null!==z&&(re[q]=null,re[B]=null,re[W]=null,ue(oe(z,!1)))}}function Q(re){process.nextTick(se,re)}var ae=Object.getPrototypeOf(function(){}),xe=Object.setPrototypeOf((D(Y={get stream(){return this[J]},next:function(){var ue=this,z=this[P];if(null!==z)return Promise.reject(z);if(this[O])return Promise.resolve(oe(void 0,!0));if(this[J].destroyed)return new Promise(function(Ue,Re){process.nextTick(function(){ue[P]?Re(ue[P]):Ue(oe(void 0,!0))})});var ne,$=this[q];if($)ne=new Promise(function U(re,ue){return function(z,$){re.then(function(){ue[O]?z(oe(void 0,!0)):ue[te](z,$)},$)}}($,this));else{var ge=this[J].read();if(null!==ge)return Promise.resolve(oe(ge,!1));ne=new Promise(this[te])}return this[q]=ne,ne}},Symbol.asyncIterator,function(){return this}),D(Y,"return",function(){var ue=this;return new Promise(function(z,$){ue[J].destroy(null,function(ne){ne?$(ne):z(oe(void 0,!0))})})}),Y),ae);Be.exports=function(ue){var z,$=Object.create(xe,(D(z={},J,{value:ue,writable:!0}),D(z,B,{value:null,writable:!0}),D(z,W,{value:null,writable:!0}),D(z,P,{value:null,writable:!0}),D(z,O,{value:ue._readableState.endEmitted,writable:!0}),D(z,te,{value:function(ge,Ue){var Re=$[J].read();Re?($[q]=null,$[B]=null,$[W]=null,ge(oe(Re,!1))):($[B]=ge,$[W]=Ue)},writable:!0}),z));return $[q]=null,H(ue,function(ne){if(ne&&"ERR_STREAM_PREMATURE_CLOSE"!==ne.code){var ge=$[W];return null!==ge&&($[q]=null,$[B]=null,$[W]=null,ge(ne)),void($[P]=ne)}var Ue=$[B];null!==Ue&&($[q]=null,$[B]=null,$[W]=null,Ue(oe(void 0,!0))),$[O]=!0}),ue.on("readable",Q.bind(null,$)),$}},5019:(Be,be,V)=>{"use strict";function Y(Q,U){var ae=Object.keys(Q);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(Q);U&&(xe=xe.filter(function(Oe){return Object.getOwnPropertyDescriptor(Q,Oe).enumerable})),ae.push.apply(ae,xe)}return ae}function H(Q,U,ae){return U in Q?Object.defineProperty(Q,U,{value:ae,enumerable:!0,configurable:!0,writable:!0}):Q[U]=ae,Q}function W(Q,U){for(var ae=0;ae<U.length;ae++){var xe=U[ae];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(Q,xe.key,xe)}}var q=V(3172).Buffer,J=V(2361).inspect,oe=J&&J.custom||"inspect";function se(Q,U,ae){q.prototype.copy.call(Q,U,ae)}Be.exports=function(){function Q(){(function B(Q,U){if(!(Q instanceof U))throw new TypeError("Cannot call a class as a function")})(this,Q),this.head=null,this.tail=null,this.length=0}return function P(Q,U,ae){U&&W(Q.prototype,U),ae&&W(Q,ae)}(Q,[{key:"push",value:function(ae){var xe={data:ae,next:null};this.length>0?this.tail.next=xe:this.head=xe,this.tail=xe,++this.length}},{key:"unshift",value:function(ae){var xe={data:ae,next:this.head};0===this.length&&(this.tail=xe),this.head=xe,++this.length}},{key:"shift",value:function(){if(0!==this.length){var ae=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,ae}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(ae){if(0===this.length)return"";for(var xe=this.head,Oe=""+xe.data;xe=xe.next;)Oe+=ae+xe.data;return Oe}},{key:"concat",value:function(ae){if(0===this.length)return q.alloc(0);for(var xe=q.allocUnsafe(ae>>>0),Oe=this.head,re=0;Oe;)se(Oe.data,xe,re),re+=Oe.data.length,Oe=Oe.next;return xe}},{key:"consume",value:function(ae,xe){var Oe;return ae<this.head.data.length?(Oe=this.head.data.slice(0,ae),this.head.data=this.head.data.slice(ae)):Oe=ae===this.head.data.length?this.shift():xe?this._getString(ae):this._getBuffer(ae),Oe}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(ae){var xe=this.head,Oe=1,re=xe.data;for(ae-=re.length;xe=xe.next;){var ue=xe.data,z=ae>ue.length?ue.length:ae;if(re+=z===ue.length?ue:ue.slice(0,ae),0==(ae-=z)){z===ue.length?(++Oe,this.head=xe.next?xe.next:this.tail=null):(this.head=xe,xe.data=ue.slice(z));break}++Oe}return this.length-=Oe,re}},{key:"_getBuffer",value:function(ae){var xe=q.allocUnsafe(ae),Oe=this.head,re=1;for(Oe.data.copy(xe),ae-=Oe.data.length;Oe=Oe.next;){var ue=Oe.data,z=ae>ue.length?ue.length:ae;if(ue.copy(xe,xe.length-ae,0,z),0==(ae-=z)){z===ue.length?(++re,this.head=Oe.next?Oe.next:this.tail=null):(this.head=Oe,Oe.data=ue.slice(z));break}++re}return this.length-=re,xe}},{key:oe,value:function(ae,xe){return J(this,function D(Q){for(var U=1;U<arguments.length;U++){var ae=null!=arguments[U]?arguments[U]:{};U%2?Y(Object(ae),!0).forEach(function(xe){H(Q,xe,ae[xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Q,Object.getOwnPropertyDescriptors(ae)):Y(Object(ae)).forEach(function(xe){Object.defineProperty(Q,xe,Object.getOwnPropertyDescriptor(ae,xe))})}return Q}({},xe,{depth:0,customInspect:!1}))}}]),Q}()},1920:Be=>{"use strict";function V(W,P){H(W,P),Y(W)}function Y(W){W._writableState&&!W._writableState.emitClose||W._readableState&&!W._readableState.emitClose||W.emit("close")}function H(W,P){W.emit("error",P)}Be.exports={destroy:function be(W,P){var O=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(P?P(W):W&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(H,this,W)):process.nextTick(H,this,W)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(W||null,function(J){!P&&J?O._writableState?O._writableState.errorEmitted?process.nextTick(Y,O):(O._writableState.errorEmitted=!0,process.nextTick(V,O,J)):process.nextTick(V,O,J):P?(process.nextTick(Y,O),P(J)):process.nextTick(Y,O)}),this)},undestroy:function D(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function B(W,P){var O=W._readableState,q=W._writableState;O&&O.autoDestroy||q&&q.autoDestroy?W.destroy(P):W.emit("error",P)}}},7542:(Be,be,V)=>{"use strict";var Y=V(891).q.ERR_STREAM_PREMATURE_CLOSE;function H(){}Be.exports=function W(P,O,q){if("function"==typeof O)return W(P,null,O);O||(O={}),q=function D(P){var O=!1;return function(){if(!O){O=!0;for(var q=arguments.length,te=new Array(q),J=0;J<q;J++)te[J]=arguments[J];P.apply(this,te)}}}(q||H);var te=O.readable||!1!==O.readable&&P.readable,J=O.writable||!1!==O.writable&&P.writable,oe=function(){P.writable||Q()},se=P._writableState&&P._writableState.finished,Q=function(){J=!1,se=!0,te||q.call(P)},U=P._readableState&&P._readableState.endEmitted,ae=function(){te=!1,U=!0,J||q.call(P)},xe=function(z){q.call(P,z)},Oe=function(){var z;return te&&!U?((!P._readableState||!P._readableState.ended)&&(z=new Y),q.call(P,z)):J&&!se?((!P._writableState||!P._writableState.ended)&&(z=new Y),q.call(P,z)):void 0},re=function(){P.req.on("finish",Q)};return function B(P){return P.setHeader&&"function"==typeof P.abort}(P)?(P.on("complete",Q),P.on("abort",Oe),P.req?re():P.on("request",re)):J&&!P._writableState&&(P.on("end",oe),P.on("close",oe)),P.on("end",ae),P.on("finish",Q),!1!==O.error&&P.on("error",xe),P.on("close",Oe),function(){P.removeListener("complete",Q),P.removeListener("abort",Oe),P.removeListener("request",re),P.req&&P.req.removeListener("finish",Q),P.removeListener("end",oe),P.removeListener("close",oe),P.removeListener("finish",Q),P.removeListener("end",ae),P.removeListener("error",xe),P.removeListener("close",Oe)}}},7412:Be=>{Be.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(Be,be,V)=>{"use strict";var Y,H=V(891).q,B=H.ERR_MISSING_ARGS,W=H.ERR_STREAM_DESTROYED;function P(Q){if(Q)throw Q}function q(Q,U,ae,xe){xe=function D(Q){var U=!1;return function(){U||(U=!0,Q.apply(void 0,arguments))}}(xe);var Oe=!1;Q.on("close",function(){Oe=!0}),void 0===Y&&(Y=V(7542)),Y(Q,{readable:U,writable:ae},function(ue){if(ue)return xe(ue);Oe=!0,xe()});var re=!1;return function(ue){if(!Oe&&!re){if(re=!0,function O(Q){return Q.setHeader&&"function"==typeof Q.abort}(Q))return Q.abort();if("function"==typeof Q.destroy)return Q.destroy();xe(ue||new W("pipe"))}}}function te(Q){Q()}function J(Q,U){return Q.pipe(U)}function oe(Q){return Q.length&&"function"==typeof Q[Q.length-1]?Q.pop():P}Be.exports=function se(){for(var Q=arguments.length,U=new Array(Q),ae=0;ae<Q;ae++)U[ae]=arguments[ae];var xe=oe(U);if(Array.isArray(U[0])&&(U=U[0]),U.length<2)throw new B("streams");var Oe,re=U.map(function(ue,z){var $=z<U.length-1;return q(ue,$,z>0,function(ge){Oe||(Oe=ge),ge&&re.forEach(te),!$&&(re.forEach(te),xe(Oe))})});return U.reduce(J)}},7102:(Be,be,V)=>{"use strict";var Y=V(891).q.ERR_INVALID_OPT_VALUE;Be.exports={getHighWaterMark:function H(B,W,P,O){var q=function D(B,W,P){return null!=B.highWaterMark?B.highWaterMark:W?B[P]:null}(W,O,P);if(null!=q){if(!isFinite(q)||Math.floor(q)!==q||q<0)throw new Y(O?P:"highWaterMark",q);return Math.floor(q)}return B.objectMode?16:16384}}},4970:(Be,be,V)=>{Be.exports=V(9069).EventEmitter},1503:(Be,be,V)=>{!function(Y){Y.parser=function(je,Ce){return new H(je,Ce)},Y.SAXParser=H,Y.SAXStream=J,Y.createStream=function te(je,Ce){return new J(je,Ce)},Y.MAX_BUFFER_LENGTH=65536;var O,D=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function H(je,Ce){if(!(this instanceof H))return new H(je,Ce);var Dt=this;(function W(je){for(var Ce=0,Dt=D.length;Ce<Dt;Ce++)je[D[Ce]]=""})(Dt),Dt.q=Dt.c="",Dt.bufferCheckPosition=Y.MAX_BUFFER_LENGTH,Dt.opt=Ce||{},Dt.opt.lowercase=Dt.opt.lowercase||Dt.opt.lowercasetags,Dt.looseCase=Dt.opt.lowercase?"toLowerCase":"toUpperCase",Dt.tags=[],Dt.closed=Dt.closedRoot=Dt.sawRoot=!1,Dt.tag=Dt.error=null,Dt.strict=!!je,Dt.noscript=!(!je&&!Dt.opt.noscript),Dt.state=Re.BEGIN,Dt.strictEntities=Dt.opt.strictEntities,Dt.ENTITIES=Object.create(Dt.strictEntities?Y.XML_ENTITIES:Y.ENTITIES),Dt.attribList=[],Dt.opt.xmlns&&(Dt.ns=Object.create(ae)),Dt.trackPosition=!1!==Dt.opt.position,Dt.trackPosition&&(Dt.position=Dt.line=Dt.column=0),Pe(Dt,"onready")}Y.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(je){function Ce(){}return Ce.prototype=je,new Ce}),Object.keys||(Object.keys=function(je){var Ce=[];for(var Dt in je)je.hasOwnProperty(Dt)&&Ce.push(Dt);return Ce}),H.prototype={end:function(){gt(this)},write:function yn(je){var Ce=this;if(this.error)throw this.error;if(Ce.closed)return ft(Ce,"Cannot write after close. Assign an onready handler.");if(null===je)return gt(Ce);"object"==typeof je&&(je=je.toString());for(var Dt=0,Rt="";Rt=bn(je,Dt++),Ce.c=Rt,Rt;)switch(Ce.trackPosition&&(Ce.position++,"\n"===Rt?(Ce.line++,Ce.column=0):Ce.column++),Ce.state){case Re.BEGIN:if(Ce.state=Re.BEGIN_WHITESPACE,"\ufeff"===Rt)continue;xn(Ce,Rt);continue;case Re.BEGIN_WHITESPACE:xn(Ce,Rt);continue;case Re.TEXT:if(Ce.sawRoot&&!Ce.closedRoot){for(var ci=Dt-1;Rt&&"<"!==Rt&&"&"!==Rt;)(Rt=bn(je,Dt++))&&Ce.trackPosition&&(Ce.position++,"\n"===Rt?(Ce.line++,Ce.column=0):Ce.column++);Ce.textNode+=je.substring(ci,Dt-1)}"<"!==Rt||Ce.sawRoot&&Ce.closedRoot&&!Ce.strict?(!z(Rt)&&(!Ce.sawRoot||Ce.closedRoot)&&Ct(Ce,"Text data outside of root node."),"&"===Rt?Ce.state=Re.TEXT_ENTITY:Ce.textNode+=Rt):(Ce.state=Re.OPEN_WAKA,Ce.startTagPosition=Ce.position);continue;case Re.SCRIPT:"<"===Rt?Ce.state=Re.SCRIPT_ENDING:Ce.script+=Rt;continue;case Re.SCRIPT_ENDING:"/"===Rt?Ce.state=Re.CLOSE_TAG:(Ce.script+="<"+Rt,Ce.state=Re.SCRIPT);continue;case Re.OPEN_WAKA:"!"===Rt?(Ce.state=Re.SGML_DECL,Ce.sgmlDecl=""):z(Rt)||(ge(xe,Rt)?(Ce.state=Re.OPEN_TAG,Ce.tagName=Rt):"/"===Rt?(Ce.state=Re.CLOSE_TAG,Ce.tagName=""):"?"===Rt?(Ce.state=Re.PROC_INST,Ce.procInstName=Ce.procInstBody=""):(Ct(Ce,"Unencoded <"),Ce.startTagPosition+1<Ce.position&&(Rt=new Array(Ce.position-Ce.startTagPosition).join(" ")+Rt),Ce.textNode+="<"+Rt,Ce.state=Re.TEXT));continue;case Re.SGML_DECL:"[CDATA["===(Ce.sgmlDecl+Rt).toUpperCase()?(at(Ce,"onopencdata"),Ce.state=Re.CDATA,Ce.sgmlDecl="",Ce.cdata=""):Ce.sgmlDecl+Rt==="--"?(Ce.state=Re.COMMENT,Ce.comment="",Ce.sgmlDecl=""):"DOCTYPE"===(Ce.sgmlDecl+Rt).toUpperCase()?(Ce.state=Re.DOCTYPE,(Ce.doctype||Ce.sawRoot)&&Ct(Ce,"Inappropriately located doctype declaration"),Ce.doctype="",Ce.sgmlDecl=""):">"===Rt?(at(Ce,"onsgmldeclaration",Ce.sgmlDecl),Ce.sgmlDecl="",Ce.state=Re.TEXT):($(Rt)&&(Ce.state=Re.SGML_DECL_QUOTED),Ce.sgmlDecl+=Rt);continue;case Re.SGML_DECL_QUOTED:Rt===Ce.q&&(Ce.state=Re.SGML_DECL,Ce.q=""),Ce.sgmlDecl+=Rt;continue;case Re.DOCTYPE:">"===Rt?(Ce.state=Re.TEXT,at(Ce,"ondoctype",Ce.doctype),Ce.doctype=!0):(Ce.doctype+=Rt,"["===Rt?Ce.state=Re.DOCTYPE_DTD:$(Rt)&&(Ce.state=Re.DOCTYPE_QUOTED,Ce.q=Rt));continue;case Re.DOCTYPE_QUOTED:Ce.doctype+=Rt,Rt===Ce.q&&(Ce.q="",Ce.state=Re.DOCTYPE);continue;case Re.DOCTYPE_DTD:Ce.doctype+=Rt,"]"===Rt?Ce.state=Re.DOCTYPE:$(Rt)&&(Ce.state=Re.DOCTYPE_DTD_QUOTED,Ce.q=Rt);continue;case Re.DOCTYPE_DTD_QUOTED:Ce.doctype+=Rt,Rt===Ce.q&&(Ce.state=Re.DOCTYPE_DTD,Ce.q="");continue;case Re.COMMENT:"-"===Rt?Ce.state=Re.COMMENT_ENDING:Ce.comment+=Rt;continue;case Re.COMMENT_ENDING:"-"===Rt?(Ce.state=Re.COMMENT_ENDED,Ce.comment=He(Ce.opt,Ce.comment),Ce.comment&&at(Ce,"oncomment",Ce.comment),Ce.comment=""):(Ce.comment+="-"+Rt,Ce.state=Re.COMMENT);continue;case Re.COMMENT_ENDED:">"!==Rt?(Ct(Ce,"Malformed comment"),Ce.comment+="--"+Rt,Ce.state=Re.COMMENT):Ce.state=Re.TEXT;continue;case Re.CDATA:"]"===Rt?Ce.state=Re.CDATA_ENDING:Ce.cdata+=Rt;continue;case Re.CDATA_ENDING:"]"===Rt?Ce.state=Re.CDATA_ENDING_2:(Ce.cdata+="]"+Rt,Ce.state=Re.CDATA);continue;case Re.CDATA_ENDING_2:">"===Rt?(Ce.cdata&&at(Ce,"oncdata",Ce.cdata),at(Ce,"onclosecdata"),Ce.cdata="",Ce.state=Re.TEXT):"]"===Rt?Ce.cdata+="]":(Ce.cdata+="]]"+Rt,Ce.state=Re.CDATA);continue;case Re.PROC_INST:"?"===Rt?Ce.state=Re.PROC_INST_ENDING:z(Rt)?Ce.state=Re.PROC_INST_BODY:Ce.procInstName+=Rt;continue;case Re.PROC_INST_BODY:if(!Ce.procInstBody&&z(Rt))continue;"?"===Rt?Ce.state=Re.PROC_INST_ENDING:Ce.procInstBody+=Rt;continue;case Re.PROC_INST_ENDING:">"===Rt?(at(Ce,"onprocessinginstruction",{name:Ce.procInstName,body:Ce.procInstBody}),Ce.procInstName=Ce.procInstBody="",Ce.state=Re.TEXT):(Ce.procInstBody+="?"+Rt,Ce.state=Re.PROC_INST_BODY);continue;case Re.OPEN_TAG:ge(Oe,Rt)?Ce.tagName+=Rt:(kn(Ce),">"===Rt?Jt(Ce):"/"===Rt?Ce.state=Re.OPEN_TAG_SLASH:(z(Rt)||Ct(Ce,"Invalid character in tag name"),Ce.state=Re.ATTRIB));continue;case Re.OPEN_TAG_SLASH:">"===Rt?(Jt(Ce,!0),nn(Ce)):(Ct(Ce,"Forward-slash in opening tag not followed by >"),Ce.state=Re.ATTRIB);continue;case Re.ATTRIB:if(z(Rt))continue;">"===Rt?Jt(Ce):"/"===Rt?Ce.state=Re.OPEN_TAG_SLASH:ge(xe,Rt)?(Ce.attribName=Rt,Ce.attribValue="",Ce.state=Re.ATTRIB_NAME):Ct(Ce,"Invalid attribute name");continue;case Re.ATTRIB_NAME:"="===Rt?Ce.state=Re.ATTRIB_VALUE:">"===Rt?(Ct(Ce,"Attribute without value"),Ce.attribValue=Ce.attribName,Dn(Ce),Jt(Ce)):z(Rt)?Ce.state=Re.ATTRIB_NAME_SAW_WHITE:ge(Oe,Rt)?Ce.attribName+=Rt:Ct(Ce,"Invalid attribute name");continue;case Re.ATTRIB_NAME_SAW_WHITE:if("="===Rt)Ce.state=Re.ATTRIB_VALUE;else{if(z(Rt))continue;Ct(Ce,"Attribute without value"),Ce.tag.attributes[Ce.attribName]="",Ce.attribValue="",at(Ce,"onattribute",{name:Ce.attribName,value:""}),Ce.attribName="",">"===Rt?Jt(Ce):ge(xe,Rt)?(Ce.attribName=Rt,Ce.state=Re.ATTRIB_NAME):(Ct(Ce,"Invalid attribute name"),Ce.state=Re.ATTRIB)}continue;case Re.ATTRIB_VALUE:if(z(Rt))continue;$(Rt)?(Ce.q=Rt,Ce.state=Re.ATTRIB_VALUE_QUOTED):(Ct(Ce,"Unquoted attribute value"),Ce.state=Re.ATTRIB_VALUE_UNQUOTED,Ce.attribValue=Rt);continue;case Re.ATTRIB_VALUE_QUOTED:if(Rt!==Ce.q){"&"===Rt?Ce.state=Re.ATTRIB_VALUE_ENTITY_Q:Ce.attribValue+=Rt;continue}Dn(Ce),Ce.q="",Ce.state=Re.ATTRIB_VALUE_CLOSED;continue;case Re.ATTRIB_VALUE_CLOSED:z(Rt)?Ce.state=Re.ATTRIB:">"===Rt?Jt(Ce):"/"===Rt?Ce.state=Re.OPEN_TAG_SLASH:ge(xe,Rt)?(Ct(Ce,"No whitespace between attributes"),Ce.attribName=Rt,Ce.attribValue="",Ce.state=Re.ATTRIB_NAME):Ct(Ce,"Invalid attribute name");continue;case Re.ATTRIB_VALUE_UNQUOTED:if(!ne(Rt)){"&"===Rt?Ce.state=Re.ATTRIB_VALUE_ENTITY_U:Ce.attribValue+=Rt;continue}Dn(Ce),">"===Rt?Jt(Ce):Ce.state=Re.ATTRIB;continue;case Re.CLOSE_TAG:if(Ce.tagName)">"===Rt?nn(Ce):ge(Oe,Rt)?Ce.tagName+=Rt:Ce.script?(Ce.script+="</"+Ce.tagName,Ce.tagName="",Ce.state=Re.SCRIPT):(z(Rt)||Ct(Ce,"Invalid tagname in closing tag"),Ce.state=Re.CLOSE_TAG_SAW_WHITE);else{if(z(Rt))continue;Ue(xe,Rt)?Ce.script?(Ce.script+="</"+Rt,Ce.state=Re.SCRIPT):Ct(Ce,"Invalid tagname in closing tag."):Ce.tagName=Rt}continue;case Re.CLOSE_TAG_SAW_WHITE:if(z(Rt))continue;">"===Rt?nn(Ce):Ct(Ce,"Invalid characters in closing tag");continue;case Re.TEXT_ENTITY:case Re.ATTRIB_VALUE_ENTITY_Q:case Re.ATTRIB_VALUE_ENTITY_U:var At,Pt;switch(Ce.state){case Re.TEXT_ENTITY:At=Re.TEXT,Pt="textNode";break;case Re.ATTRIB_VALUE_ENTITY_Q:At=Re.ATTRIB_VALUE_QUOTED,Pt="attribValue";break;case Re.ATTRIB_VALUE_ENTITY_U:At=Re.ATTRIB_VALUE_UNQUOTED,Pt="attribValue"}";"===Rt?(Ce[Pt]+=Ln(Ce),Ce.entity="",Ce.state=At):ge(Ce.entity.length?ue:re,Rt)?Ce.entity+=Rt:(Ct(Ce,"Invalid character in entity name"),Ce[Pt]+="&"+Ce.entity+Rt,Ce.entity="",Ce.state=At);continue;default:throw new Error(Ce,"Unknown state: "+Ce.state)}return Ce.position>=Ce.bufferCheckPosition&&function B(je){for(var Ce=Math.max(Y.MAX_BUFFER_LENGTH,10),Dt=0,Rt=0,ci=D.length;Rt<ci;Rt++){var $i=je[D[Rt]].length;if($i>Ce)switch(D[Rt]){case"textNode":xt(je);break;case"cdata":at(je,"oncdata",je.cdata),je.cdata="";break;case"script":at(je,"onscript",je.script),je.script="";break;default:ft(je,"Max buffer length exceeded: "+D[Rt])}Dt=Math.max(Dt,$i)}je.bufferCheckPosition=Y.MAX_BUFFER_LENGTH-Dt+je.position}(Ce),Ce},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function P(je){xt(je),""!==je.cdata&&(at(je,"oncdata",je.cdata),je.cdata=""),""!==je.script&&(at(je,"onscript",je.script),je.script="")}(this)}};try{O=V(295).Stream}catch{O=function(){}}var q=Y.EVENTS.filter(function(je){return"error"!==je&&"end"!==je});function J(je,Ce){if(!(this instanceof J))return new J(je,Ce);O.apply(this),this._parser=new H(je,Ce),this.writable=!0,this.readable=!0;var Dt=this;this._parser.onend=function(){Dt.emit("end")},this._parser.onerror=function(Rt){Dt.emit("error",Rt),Dt._parser.error=null},this._decoder=null,q.forEach(function(Rt){Object.defineProperty(Dt,"on"+Rt,{get:function(){return Dt._parser["on"+Rt]},set:function(ci){if(!ci)return Dt.removeAllListeners(Rt),Dt._parser["on"+Rt]=ci,ci;Dt.on(Rt,ci)},enumerable:!0,configurable:!1})})}(J.prototype=Object.create(O.prototype,{constructor:{value:J}})).write=function(je){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(je)){if(!this._decoder){var Ce=V(3054).s;this._decoder=new Ce("utf8")}je=this._decoder.write(je)}return this._parser.write(je.toString()),this.emit("data",je),!0},J.prototype.end=function(je){return je&&je.length&&this.write(je),this._parser.end(),!0},J.prototype.on=function(je,Ce){var Dt=this;return!Dt._parser["on"+je]&&-1!==q.indexOf(je)&&(Dt._parser["on"+je]=function(){var Rt=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);Rt.splice(0,0,je),Dt.emit.apply(Dt,Rt)}),O.prototype.on.call(Dt,je,Ce)};var Q="http://www.w3.org/XML/1998/namespace",U="http://www.w3.org/2000/xmlns/",ae={xml:Q,xmlns:U},xe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Oe=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,re=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,ue=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function z(je){return" "===je||"\n"===je||"\r"===je||"\t"===je}function $(je){return'"'===je||"'"===je}function ne(je){return">"===je||z(je)}function ge(je,Ce){return je.test(Ce)}function Ue(je,Ce){return!ge(je,Ce)}var je,Ce,Dt,Re=0;for(var rt in Y.STATE={BEGIN:Re++,BEGIN_WHITESPACE:Re++,TEXT:Re++,TEXT_ENTITY:Re++,OPEN_WAKA:Re++,SGML_DECL:Re++,SGML_DECL_QUOTED:Re++,DOCTYPE:Re++,DOCTYPE_QUOTED:Re++,DOCTYPE_DTD:Re++,DOCTYPE_DTD_QUOTED:Re++,COMMENT_STARTING:Re++,COMMENT:Re++,COMMENT_ENDING:Re++,COMMENT_ENDED:Re++,CDATA:Re++,CDATA_ENDING:Re++,CDATA_ENDING_2:Re++,PROC_INST:Re++,PROC_INST_BODY:Re++,PROC_INST_ENDING:Re++,OPEN_TAG:Re++,OPEN_TAG_SLASH:Re++,ATTRIB:Re++,ATTRIB_NAME:Re++,ATTRIB_NAME_SAW_WHITE:Re++,ATTRIB_VALUE:Re++,ATTRIB_VALUE_QUOTED:Re++,ATTRIB_VALUE_CLOSED:Re++,ATTRIB_VALUE_UNQUOTED:Re++,ATTRIB_VALUE_ENTITY_Q:Re++,ATTRIB_VALUE_ENTITY_U:Re++,CLOSE_TAG:Re++,CLOSE_TAG_SAW_WHITE:Re++,SCRIPT:Re++,SCRIPT_ENDING:Re++},Y.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Y.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(Y.ENTITIES).forEach(function(je){var Ce=Y.ENTITIES[je],Dt="number"==typeof Ce?String.fromCharCode(Ce):Ce;Y.ENTITIES[je]=Dt}),Y.STATE)Y.STATE[Y.STATE[rt]]=rt;function Pe(je,Ce,Dt){je[Ce]&&je[Ce](Dt)}function at(je,Ce,Dt){je.textNode&&xt(je),Pe(je,Ce,Dt)}function xt(je){je.textNode=He(je.opt,je.textNode),je.textNode&&Pe(je,"ontext",je.textNode),je.textNode=""}function He(je,Ce){return je.trim&&(Ce=Ce.trim()),je.normalize&&(Ce=Ce.replace(/\s+/g," ")),Ce}function ft(je,Ce){return xt(je),je.trackPosition&&(Ce+="\nLine: "+je.line+"\nColumn: "+je.column+"\nChar: "+je.c),Ce=new Error(Ce),je.error=Ce,Pe(je,"onerror",Ce),je}function gt(je){return je.sawRoot&&!je.closedRoot&&Ct(je,"Unclosed root tag"),je.state!==Re.BEGIN&&je.state!==Re.BEGIN_WHITESPACE&&je.state!==Re.TEXT&&ft(je,"Unexpected end"),xt(je),je.c="",je.closed=!0,Pe(je,"onend"),H.call(je,je.strict,je.opt),je}function Ct(je,Ce){if("object"!=typeof je||!(je instanceof H))throw new Error("bad call to strictFail");je.strict&&ft(je,Ce)}function kn(je){je.strict||(je.tagName=je.tagName[je.looseCase]());var Ce=je.tags[je.tags.length-1]||je,Dt=je.tag={name:je.tagName,attributes:{}};je.opt.xmlns&&(Dt.ns=Ce.ns),je.attribList.length=0,at(je,"onopentagstart",Dt)}function Ut(je,Ce){var Rt=je.indexOf(":")<0?["",je]:je.split(":"),ci=Rt[0],$i=Rt[1];return Ce&&"xmlns"===je&&(ci="xmlns",$i=""),{prefix:ci,local:$i}}function Dn(je){if(je.strict||(je.attribName=je.attribName[je.looseCase]()),-1!==je.attribList.indexOf(je.attribName)||je.tag.attributes.hasOwnProperty(je.attribName))je.attribName=je.attribValue="";else{if(je.opt.xmlns){var Ce=Ut(je.attribName,!0),Rt=Ce.local;if("xmlns"===Ce.prefix)if("xml"===Rt&&je.attribValue!==Q)Ct(je,"xml: prefix must be bound to "+Q+"\nActual: "+je.attribValue);else if("xmlns"===Rt&&je.attribValue!==U)Ct(je,"xmlns: prefix must be bound to "+U+"\nActual: "+je.attribValue);else{var ci=je.tag,$i=je.tags[je.tags.length-1]||je;ci.ns===$i.ns&&(ci.ns=Object.create($i.ns)),ci.ns[Rt]=je.attribValue}je.attribList.push([je.attribName,je.attribValue])}else je.tag.attributes[je.attribName]=je.attribValue,at(je,"onattribute",{name:je.attribName,value:je.attribValue});je.attribName=je.attribValue=""}}function Jt(je,Ce){if(je.opt.xmlns){var Dt=je.tag,Rt=Ut(je.tagName);Dt.prefix=Rt.prefix,Dt.local=Rt.local,Dt.uri=Dt.ns[Rt.prefix]||"",Dt.prefix&&!Dt.uri&&(Ct(je,"Unbound namespace prefix: "+JSON.stringify(je.tagName)),Dt.uri=Rt.prefix),Dt.ns&&(je.tags[je.tags.length-1]||je).ns!==Dt.ns&&Object.keys(Dt.ns).forEach(function(Fi){at(je,"onopennamespace",{prefix:Fi,uri:Dt.ns[Fi]})});for(var $i=0,At=je.attribList.length;$i<At;$i++){var Pt=je.attribList[$i],un=Pt[0],Je=Pt[1],Te=Ut(un,!0),Me=Te.prefix,vn=""===Me?"":Dt.ns[Me]||"",ii={name:un,value:Je,prefix:Me,local:Te.local,uri:vn};Me&&"xmlns"!==Me&&!vn&&(Ct(je,"Unbound namespace prefix: "+JSON.stringify(Me)),ii.uri=Me),je.tag.attributes[un]=ii,at(je,"onattribute",ii)}je.attribList.length=0}je.tag.isSelfClosing=!!Ce,je.sawRoot=!0,je.tags.push(je.tag),at(je,"onopentag",je.tag),Ce||(je.state=je.noscript||"script"!==je.tagName.toLowerCase()?Re.TEXT:Re.SCRIPT,je.tag=null,je.tagName=""),je.attribName=je.attribValue="",je.attribList.length=0}function nn(je){if(!je.tagName)return Ct(je,"Weird empty close tag."),je.textNode+="</>",void(je.state=Re.TEXT);if(je.script){if("script"!==je.tagName)return je.script+="</"+je.tagName+">",je.tagName="",void(je.state=Re.SCRIPT);at(je,"onscript",je.script),je.script=""}var Ce=je.tags.length,Dt=je.tagName;je.strict||(Dt=Dt[je.looseCase]());for(var Rt=Dt;Ce--&&je.tags[Ce].name!==Rt;)Ct(je,"Unexpected close tag");if(Ce<0)return Ct(je,"Unmatched closing tag: "+je.tagName),je.textNode+="</"+je.tagName+">",void(je.state=Re.TEXT);je.tagName=Dt;for(var $i=je.tags.length;$i-- >Ce;){var At=je.tag=je.tags.pop();je.tagName=je.tag.name,at(je,"onclosetag",je.tagName);var Pt={};for(var un in At.ns)Pt[un]=At.ns[un];je.opt.xmlns&&At.ns!==(je.tags[je.tags.length-1]||je).ns&&Object.keys(At.ns).forEach(function(Te){at(je,"onclosenamespace",{prefix:Te,uri:At.ns[Te]})})}0===Ce&&(je.closedRoot=!0),je.tagName=je.attribValue=je.attribName="",je.attribList.length=0,je.state=Re.TEXT}function Ln(je){var Rt,Ce=je.entity,Dt=Ce.toLowerCase(),ci="";return je.ENTITIES[Ce]?je.ENTITIES[Ce]:je.ENTITIES[Dt]?je.ENTITIES[Dt]:("#"===(Ce=Dt).charAt(0)&&("x"===Ce.charAt(1)?(Ce=Ce.slice(2),ci=(Rt=parseInt(Ce,16)).toString(16)):(Ce=Ce.slice(1),ci=(Rt=parseInt(Ce,10)).toString(10))),Ce=Ce.replace(/^0+/,""),isNaN(Rt)||ci.toLowerCase()!==Ce?(Ct(je,"Invalid character entity"),"&"+je.entity+";"):String.fromCodePoint(Rt))}function xn(je,Ce){"<"===Ce?(je.state=Re.OPEN_WAKA,je.startTagPosition=je.position):z(Ce)||(Ct(je,"Non-whitespace before first tag."),je.textNode=Ce,je.state=Re.TEXT)}function bn(je,Ce){var Dt="";return Ce<je.length&&(Dt=je.charAt(Ce)),Dt}Re=Y.STATE,String.fromCodePoint||(je=String.fromCharCode,Ce=Math.floor,Dt=function(){var Rt=16384,ci=[],Pt=-1,un=arguments.length;if(!un)return"";for(var Je="";++Pt<un;){var Te=Number(arguments[Pt]);if(!isFinite(Te)||Te<0||Te>1114111||Ce(Te)!==Te)throw RangeError("Invalid code point: "+Te);Te<=65535?ci.push(Te):ci.push(55296+((Te-=65536)>>10),Te%1024+56320),(Pt+1===un||ci.length>Rt)&&(Je+=je.apply(null,ci),ci.length=0)}return Je},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Dt,configurable:!0,writable:!0}):String.fromCodePoint=Dt)}(be)},6563:function(){!function(Be,be){"use strict";if(!Be.setImmediate){var B,V=1,Y={},D=!1,H=Be.document,ae=Object.getPrototypeOf&&Object.getPrototypeOf(Be);ae=ae&&ae.setTimeout?ae:Be,"[object process]"==={}.toString.call(Be.process)?function te(){B=function(xe){process.nextTick(function(){q(xe)})}}():function J(){if(Be.postMessage&&!Be.importScripts){var xe=!0,Oe=Be.onmessage;return Be.onmessage=function(){xe=!1},Be.postMessage("","*"),Be.onmessage=Oe,xe}}()?function oe(){var xe="setImmediate$"+Math.random()+"$",Oe=function(re){re.source===Be&&"string"==typeof re.data&&0===re.data.indexOf(xe)&&q(+re.data.slice(xe.length))};Be.addEventListener?Be.addEventListener("message",Oe,!1):Be.attachEvent("onmessage",Oe),B=function(re){Be.postMessage(xe+re,"*")}}():Be.MessageChannel?function se(){var xe=new MessageChannel;xe.port1.onmessage=function(Oe){q(Oe.data)},B=function(Oe){xe.port2.postMessage(Oe)}}():H&&"onreadystatechange"in H.createElement("script")?function Q(){var xe=H.documentElement;B=function(Oe){var re=H.createElement("script");re.onreadystatechange=function(){q(Oe),re.onreadystatechange=null,xe.removeChild(re),re=null},xe.appendChild(re)}}():function U(){B=function(xe){setTimeout(q,0,xe)}}(),ae.setImmediate=function W(xe){"function"!=typeof xe&&(xe=new Function(""+xe));for(var Oe=new Array(arguments.length-1),re=0;re<Oe.length;re++)Oe[re]=arguments[re+1];var ue={callback:xe,args:Oe};return Y[V]=ue,B(V),V++},ae.clearImmediate=P}function P(xe){delete Y[xe]}function q(xe){if(D)setTimeout(q,0,xe);else{var Oe=Y[xe];if(Oe){D=!0;try{!function O(xe){var Oe=xe.callback,re=xe.args;switch(re.length){case 0:Oe();break;case 1:Oe(re[0]);break;case 2:Oe(re[0],re[1]);break;case 3:Oe(re[0],re[1],re[2]);break;default:Oe.apply(void 0,re)}}(Oe)}finally{P(xe),D=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},2002:function(Be,be,V){"use strict";var te,Y=this&&this.__extends||(te=function(J,oe){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,Q){se.__proto__=Q}||function(se,Q){for(var U in Q)Object.prototype.hasOwnProperty.call(Q,U)&&(se[U]=Q[U])})(J,oe)},function(J,oe){if("function"!=typeof oe&&null!==oe)throw new TypeError("Class extends value "+String(oe)+" is not a constructor or null");function se(){this.constructor=J}te(J,oe),J.prototype=null===oe?Object.create(oe):(se.prototype=oe.prototype,new se)}),D=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(be,"__esModule",{value:!0});var H=V(2630),B=D(V(4539)),W=V(1699),P=V(57),O=1.5,q=function(te){function J(){var oe=te.call(this)||this;return oe.x=.5,oe.y=.5,oe.angle=0,oe.ratio=1,oe.minRatio=null,oe.maxRatio=null,oe.nextFrame=null,oe.previousState=null,oe.enabled=!0,oe.previousState=oe.getState(),oe}return Y(J,te),J.from=function(oe){return(new J).setState(oe)},J.prototype.enable=function(){return this.enabled=!0,this},J.prototype.disable=function(){return this.enabled=!1,this},J.prototype.getState=function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}},J.prototype.hasState=function(oe){return this.x===oe.x&&this.y===oe.y&&this.ratio===oe.ratio&&this.angle===oe.angle},J.prototype.getPreviousState=function(){var oe=this.previousState;return oe?{x:oe.x,y:oe.y,angle:oe.angle,ratio:oe.ratio}:null},J.prototype.getBoundedRatio=function(oe){var se=oe;return"number"==typeof this.minRatio&&(se=Math.max(se,this.minRatio)),"number"==typeof this.maxRatio&&(se=Math.min(se,this.maxRatio)),se},J.prototype.validateState=function(oe){var se={};return"number"==typeof oe.x&&(se.x=oe.x),"number"==typeof oe.y&&(se.y=oe.y),"number"==typeof oe.angle&&(se.angle=oe.angle),"number"==typeof oe.ratio&&(se.ratio=this.getBoundedRatio(oe.ratio)),se},J.prototype.isAnimated=function(){return!!this.nextFrame},J.prototype.setState=function(oe){if(!this.enabled)return this;this.previousState=this.getState();var se=this.validateState(oe);return"number"==typeof se.x&&(this.x=se.x),"number"==typeof se.y&&(this.y=se.y),"number"==typeof se.angle&&(this.angle=se.angle),"number"==typeof se.ratio&&(this.ratio=se.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this},J.prototype.animate=function(oe,se,Q){var U=this;if(this.enabled){var ae=Object.assign({},H.ANIMATE_DEFAULTS,se),xe=this.validateState(oe),Oe="function"==typeof ae.easing?ae.easing:B.default[ae.easing],re=Date.now(),ue=this.getState(),z=function(){var $=(Date.now()-re)/ae.duration;if($>=1)return U.nextFrame=null,U.setState(xe),void(U.animationCallback&&(U.animationCallback.call(null),U.animationCallback=void 0));var ne=Oe($),ge={};"number"==typeof xe.x&&(ge.x=ue.x+(xe.x-ue.x)*ne),"number"==typeof xe.y&&(ge.y=ue.y+(xe.y-ue.y)*ne),"number"==typeof xe.angle&&(ge.angle=ue.angle+(xe.angle-ue.angle)*ne),"number"==typeof xe.ratio&&(ge.ratio=ue.ratio+(xe.ratio-ue.ratio)*ne),U.setState(ge),U.nextFrame=(0,W.requestFrame)(z)};this.nextFrame?((0,W.cancelFrame)(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=(0,W.requestFrame)(z)):z(),this.animationCallback=Q}},J.prototype.animatedZoom=function(oe){if(oe){if("number"==typeof oe)return this.animate({ratio:this.ratio/oe});this.animate({ratio:this.ratio/(oe.factor||O)},oe)}else this.animate({ratio:this.ratio/O})},J.prototype.animatedUnzoom=function(oe){if(oe){if("number"==typeof oe)return this.animate({ratio:this.ratio*oe});this.animate({ratio:this.ratio*(oe.factor||O)},oe)}else this.animate({ratio:this.ratio*O})},J.prototype.animatedReset=function(oe){this.animate({x:.5,y:.5,ratio:1,angle:0},oe)},J.prototype.copy=function(){return J.from(this.getState())},J}(P.TypedEventEmitter);be.default=q},5473:function(Be,be,V){"use strict";var se,Y=this&&this.__extends||(se=function(Q,U){return(se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ae,xe){ae.__proto__=xe}||function(ae,xe){for(var Oe in xe)Object.prototype.hasOwnProperty.call(xe,Oe)&&(ae[Oe]=xe[Oe])})(Q,U)},function(Q,U){if("function"!=typeof U&&null!==U)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function ae(){this.constructor=Q}se(Q,U),Q.prototype=null===U?Object.create(U):(ae.prototype=U.prototype,new ae)}),D=this&&this.__assign||function(){return D=Object.assign||function(se){for(var Q,U=1,ae=arguments.length;U<ae;U++)for(var xe in Q=arguments[U])Object.prototype.hasOwnProperty.call(Q,xe)&&(se[xe]=Q[xe]);return se},D.apply(this,arguments)};Object.defineProperty(be,"__esModule",{value:!0}),be.getWheelDelta=be.getTouchCoords=be.getTouchesArray=be.getWheelCoords=be.getMouseCoords=be.getPosition=void 0;var H=V(57);function B(se,Q){var U=Q.getBoundingClientRect();return{x:se.clientX-U.left,y:se.clientY-U.top}}function W(se,Q){var U=D(D({},B(se,Q)),{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){U.sigmaDefaultPrevented=!0},original:se});return U}function q(se){for(var Q=[],U=0,ae=Math.min(se.length,2);U<ae;U++)Q.push(se[U]);return Q}function J(se){if(typeof se.deltaY<"u")return-3*se.deltaY/360;if(typeof se.detail<"u")return se.detail/-9;throw new Error("Captor: could not extract delta from event.")}be.getPosition=B,be.getMouseCoords=W,be.getWheelCoords=function P(se,Q){return D(D({},W(se,Q)),{delta:J(se)})},be.getTouchesArray=q,be.getTouchCoords=function te(se,Q){return{touches:q(se.touches).map(function(U){return B(U,Q)}),original:se}},be.getWheelDelta=J;var oe=function(se){function Q(U,ae){var xe=se.call(this)||this;return xe.container=U,xe.renderer=ae,xe}return Y(Q,se),Q}(H.TypedEventEmitter);be.default=oe},2465:function(Be,be,V){"use strict";var xe,Y=this&&this.__extends||(xe=function(Oe,re){return(xe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ue,z){ue.__proto__=z}||function(ue,z){for(var $ in z)Object.prototype.hasOwnProperty.call(z,$)&&(ue[$]=z[$])})(Oe,re)},function(Oe,re){if("function"!=typeof re&&null!==re)throw new TypeError("Class extends value "+String(re)+" is not a constructor or null");function ue(){this.constructor=Oe}xe(Oe,re),Oe.prototype=null===re?Object.create(re):(ue.prototype=re.prototype,new ue)}),D=this&&this.__createBinding||(Object.create?function(xe,Oe,re,ue){void 0===ue&&(ue=re),Object.defineProperty(xe,ue,{enumerable:!0,get:function(){return Oe[re]}})}:function(xe,Oe,re,ue){void 0===ue&&(ue=re),xe[ue]=Oe[re]}),H=this&&this.__setModuleDefault||(Object.create?function(xe,Oe){Object.defineProperty(xe,"default",{enumerable:!0,value:Oe})}:function(xe,Oe){xe.default=Oe}),B=this&&this.__importStar||function(xe){if(xe&&xe.__esModule)return xe;var Oe={};if(null!=xe)for(var re in xe)"default"!==re&&Object.prototype.hasOwnProperty.call(xe,re)&&D(Oe,xe,re);return H(Oe,xe),Oe};Object.defineProperty(be,"__esModule",{value:!0});var W=B(V(5473)),ae=function(xe){function Oe(re,ue){var z=xe.call(this,re,ue)||this;return z.enabled=!0,z.draggedEvents=0,z.downStartTime=null,z.lastMouseX=null,z.lastMouseY=null,z.isMouseDown=!1,z.isMoving=!1,z.movingTimeout=null,z.startCameraState=null,z.clicks=0,z.doubleClickTimeout=null,z.currentWheelDirection=0,z.handleClick=z.handleClick.bind(z),z.handleRightClick=z.handleRightClick.bind(z),z.handleDown=z.handleDown.bind(z),z.handleUp=z.handleUp.bind(z),z.handleMove=z.handleMove.bind(z),z.handleWheel=z.handleWheel.bind(z),z.handleOut=z.handleOut.bind(z),re.addEventListener("click",z.handleClick,!1),re.addEventListener("contextmenu",z.handleRightClick,!1),re.addEventListener("mousedown",z.handleDown,!1),re.addEventListener("wheel",z.handleWheel,!1),re.addEventListener("mouseout",z.handleOut,!1),document.addEventListener("mousemove",z.handleMove,!1),document.addEventListener("mouseup",z.handleUp,!1),z}return Y(Oe,xe),Oe.prototype.kill=function(){var re=this.container;re.removeEventListener("click",this.handleClick),re.removeEventListener("contextmenu",this.handleRightClick),re.removeEventListener("mousedown",this.handleDown),re.removeEventListener("wheel",this.handleWheel),re.removeEventListener("mouseout",this.handleOut),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)},Oe.prototype.handleClick=function(re){var ue=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(re);setTimeout(function(){ue.clicks=0,ue.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",(0,W.getMouseCoords)(re,this.container))}},Oe.prototype.handleRightClick=function(re){!this.enabled||this.emit("rightClick",(0,W.getMouseCoords)(re,this.container))},Oe.prototype.handleDoubleClick=function(re){if(this.enabled){re.preventDefault(),re.stopPropagation();var ue=(0,W.getMouseCoords)(re,this.container);if(this.emit("doubleClick",ue),!ue.sigmaDefaultPrevented){var z=this.renderer.getCamera(),$=z.getBoundedRatio(z.getState().ratio/2.2);z.animate(this.renderer.getViewportZoomedState((0,W.getPosition)(re,this.container),$),{easing:"quadraticInOut",duration:200})}}},Oe.prototype.handleDown=function(re){if(this.enabled){this.startCameraState=this.renderer.getCamera().getState();var ue=(0,W.getPosition)(re,this.container),$=ue.y;this.lastMouseX=ue.x,this.lastMouseY=$,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0,this.emit("mousedown",(0,W.getMouseCoords)(re,this.container))}},Oe.prototype.handleUp=function(re){var ue=this;if(this.enabled&&this.isMouseDown){var z=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var $=(0,W.getPosition)(re,this.container),ne=$.x,ge=$.y,Ue=z.getState(),Re=z.getPreviousState()||{x:0,y:0};this.isMoving?z.animate({x:Ue.x+3*(Ue.x-Re.x),y:Ue.y+3*(Ue.y-Re.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==ne||this.lastMouseY!==ge)&&z.setState({x:Ue.x,y:Ue.y}),this.isMoving=!1,setTimeout(function(){ue.draggedEvents=0,ue.renderer.refresh()},0),this.emit("mouseup",(0,W.getMouseCoords)(re,this.container))}},Oe.prototype.handleMove=function(re){var ue=this;if(this.enabled){var z=(0,W.getMouseCoords)(re,this.container);if(this.emit("mousemovebody",z),re.target===this.container&&this.emit("mousemove",z),!z.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){ue.movingTimeout=null,ue.isMoving=!1},100);var $=this.renderer.getCamera(),ne=(0,W.getPosition)(re,this.container),ge=ne.x,Ue=ne.y,Re=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),rt=this.renderer.viewportToFramedGraph({x:ge,y:Ue}),Pe=Re.x-rt.x,at=Re.y-rt.y,xt=$.getState();$.setState({x:xt.x+Pe,y:xt.y+at}),this.lastMouseX=ge,this.lastMouseY=Ue,re.preventDefault(),re.stopPropagation()}}},Oe.prototype.handleWheel=function(re){var ue=this;if(this.enabled){re.preventDefault(),re.stopPropagation();var z=(0,W.getWheelDelta)(re);if(z){var $=(0,W.getWheelCoords)(re,this.container);if(this.emit("wheel",$),!$.sigmaDefaultPrevented){var ne=z>0?1/1.7:1.7,ge=this.renderer.getCamera(),Ue=ge.getBoundedRatio(ge.getState().ratio*ne),Re=z>0?1:-1,rt=Date.now();this.currentWheelDirection===Re&&this.lastWheelTriggerTime&&rt-this.lastWheelTriggerTime<50||(ge.animate(this.renderer.getViewportZoomedState((0,W.getPosition)(re,this.container),Ue),{easing:"quadraticOut",duration:250},function(){ue.currentWheelDirection=0}),this.currentWheelDirection=Re,this.lastWheelTriggerTime=rt)}}}},Oe.prototype.handleOut=function(){},Oe}(W.default);be.default=ae},1565:function(Be,be,V){"use strict";var oe,Y=this&&this.__extends||(oe=function(se,Q){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ae){U.__proto__=ae}||function(U,ae){for(var xe in ae)Object.prototype.hasOwnProperty.call(ae,xe)&&(U[xe]=ae[xe])})(se,Q)},function(se,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function U(){this.constructor=se}oe(se,Q),se.prototype=null===Q?Object.create(Q):(U.prototype=Q.prototype,new U)}),D=this&&this.__createBinding||(Object.create?function(oe,se,Q,U){void 0===U&&(U=Q),Object.defineProperty(oe,U,{enumerable:!0,get:function(){return se[Q]}})}:function(oe,se,Q,U){void 0===U&&(U=Q),oe[U]=se[Q]}),H=this&&this.__setModuleDefault||(Object.create?function(oe,se){Object.defineProperty(oe,"default",{enumerable:!0,value:se})}:function(oe,se){oe.default=se}),B=this&&this.__importStar||function(oe){if(oe&&oe.__esModule)return oe;var se={};if(null!=oe)for(var Q in oe)"default"!==Q&&Object.prototype.hasOwnProperty.call(oe,Q)&&D(se,oe,Q);return H(se,oe),se},W=this&&this.__read||function(oe,se){var Q="function"==typeof Symbol&&oe[Symbol.iterator];if(!Q)return oe;var ae,Oe,U=Q.call(oe),xe=[];try{for(;(void 0===se||se-- >0)&&!(ae=U.next()).done;)xe.push(ae.value)}catch(re){Oe={error:re}}finally{try{ae&&!ae.done&&(Q=U.return)&&Q.call(U)}finally{if(Oe)throw Oe.error}}return xe};Object.defineProperty(be,"__esModule",{value:!0});var P=B(V(5473)),J=function(oe){function se(Q,U){var ae=oe.call(this,Q,U)||this;return ae.enabled=!0,ae.isMoving=!1,ae.touchMode=0,ae.handleStart=ae.handleStart.bind(ae),ae.handleLeave=ae.handleLeave.bind(ae),ae.handleMove=ae.handleMove.bind(ae),Q.addEventListener("touchstart",ae.handleStart,!1),Q.addEventListener("touchend",ae.handleLeave,!1),Q.addEventListener("touchcancel",ae.handleLeave,!1),Q.addEventListener("touchmove",ae.handleMove,!1),ae}return Y(se,oe),se.prototype.kill=function(){var Q=this.container;Q.removeEventListener("touchstart",this.handleStart),Q.removeEventListener("touchend",this.handleLeave),Q.removeEventListener("touchcancel",this.handleLeave),Q.removeEventListener("touchmove",this.handleMove)},se.prototype.getDimensions=function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}},se.prototype.dispatchRelatedMouseEvent=function(Q,U,ae,xe){var Oe=ae||(0,P.getPosition)(U.touches[0],this.container),re=new MouseEvent(Q,{clientX:Oe.x,clientY:Oe.y,altKey:U.altKey,ctrlKey:U.ctrlKey});re.isFakeSigmaMouseEvent=!0,(xe||this.container).dispatchEvent(re)},se.prototype.handleStart=function(Q){var U=this;if(this.enabled){Q.preventDefault(),1===Q.touches.length&&this.dispatchRelatedMouseEvent("mousedown",Q);var ae=(0,P.getTouchesArray)(Q.touches);if(this.isMoving=!0,this.touchMode=ae.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=ae.map(function(ge){return(0,P.getPosition)(ge,U.container)}),this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var xe=W(this.startTouchesPositions,2),Oe=xe[0],re=Oe.x,ue=Oe.y,z=xe[1],$=z.x,ne=z.y;this.startTouchesAngle=Math.atan2(ne-ue,$-re),this.startTouchesDistance=Math.sqrt(Math.pow($-re,2)+Math.pow(ne-ue,2))}this.emit("touchdown",(0,P.getTouchCoords)(Q,this.container))}},se.prototype.handleLeave=function(Q){if(this.enabled){switch(Q.preventDefault(),0===Q.touches.length&&this.lastTouchesPositions&&this.lastTouchesPositions.length&&(this.dispatchRelatedMouseEvent("mouseup",Q,this.lastTouchesPositions[0],document),this.dispatchRelatedMouseEvent("click",Q,this.lastTouchesPositions[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===Q.touches.length){this.handleStart(Q),Q.preventDefault();break}case 1:if(this.isMoving){var U=this.renderer.getCamera(),ae=U.getState(),xe=U.getPreviousState()||{x:0,y:0};U.animate({x:ae.x+3*(ae.x-xe.x),y:ae.y+3*(ae.y-xe.y)},{duration:200,easing:"quadraticOut"})}this.isMoving=!1,this.touchMode=0}this.emit("touchup",(0,P.getTouchCoords)(Q,this.container))}},se.prototype.handleMove=function(Q){var U,ae=this;if(this.enabled){Q.preventDefault(),1===Q.touches.length&&this.dispatchRelatedMouseEvent("mousemove",Q);var xe=this.renderer.getCamera(),Oe=this.startCameraState,ue=(0,P.getTouchesArray)(Q.touches).map(function(yn){return(0,P.getPosition)(yn,ae.container)});switch(this.lastTouchesPositions=ue,this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){ae.isMoving=!1},200),this.touchMode){case 1:var z=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),$=z.x,ne=z.y,ge=this.renderer.viewportToFramedGraph(ue[0]);xe.setState({x:Oe.x+$-(Ue=ge.x),y:Oe.y+ne-(Re=ge.y)});break;case 2:var rt={},Pe=ue[0],at=Pe.x,xt=Pe.y,He=ue[1],ft=He.x,gt=He.y,Ct=Math.atan2(gt-xt,ft-at)-this.startTouchesAngle,kn=Math.hypot(gt-xt,ft-at)/this.startTouchesDistance,Ut=xe.getBoundedRatio(Oe.ratio/kn);rt.ratio=Ut,rt.angle=Oe.angle+Ct;var Ue,Dn=this.getDimensions(),Jt=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:Oe}),nn=Math.min(Dn.width,Dn.height),bn=Ut/nn,Re=xt-nn/2/(nn/Dn.height);Re=(U=W([(Ue=at-nn/2/(nn/Dn.width))*Math.cos(-rt.angle)-Re*Math.sin(-rt.angle),Re*Math.cos(-rt.angle)+Ue*Math.sin(-rt.angle)],2))[1],rt.x=Jt.x-(Ue=U[0])*bn,rt.y=Jt.y+Re*bn,xe.setState(rt)}this.emit("touchmove",(0,P.getTouchCoords)(Q,this.container))}},se}(P.default);be.default=J},4942:(Be,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.edgeLabelsToDisplayFromNodes=be.LabelGrid=void 0;var V=function(){function H(B,W){this.key=B,this.size=W}return H.compare=function(B,W){return B.size>W.size?-1:B.size<W.size||B.key>W.key?1:-1},H}(),Y=function(){function H(){this.width=0,this.height=0,this.cellSize=0,this.columns=0,this.rows=0,this.cells={}}return H.prototype.resizeAndClear=function(B,W){this.width=B.width,this.height=B.height,this.cellSize=W,this.columns=Math.ceil(B.width/W),this.rows=Math.ceil(B.height/W),this.cells={}},H.prototype.getIndex=function(B){var W=Math.floor(B.x/this.cellSize);return Math.floor(B.y/this.cellSize)*this.columns+W},H.prototype.add=function(B,W,P){var O=new V(B,W),q=this.getIndex(P),te=this.cells[q];te||(this.cells[q]=te=[]),te.push(O)},H.prototype.organize=function(){for(var B in this.cells)this.cells[B].sort(V.compare)},H.prototype.getLabelsToDisplay=function(B,W){var P=this.cellSize*this.cellSize,te=Math.ceil(P/B/B*W/P),J=[];for(var oe in this.cells)for(var se=this.cells[oe],Q=0;Q<Math.min(te,se.length);Q++)J.push(se[Q].key);return J},H}();be.LabelGrid=Y,be.edgeLabelsToDisplayFromNodes=function D(H){var W=H.hoveredNode,P=H.highlightedNodes,O=H.displayedNodeLabels,q=[];return H.graph.forEachEdge(function(te,J,oe,se){(oe===W||se===W||P.has(oe)||P.has(se)||O.has(oe)&&O.has(se))&&q.push(te)}),q}},3650:function(Be,be,V){"use strict";var Y=this&&this.__read||function(rt,Pe){var at="function"==typeof Symbol&&rt[Symbol.iterator];if(!at)return rt;var He,gt,xt=at.call(rt),ft=[];try{for(;(void 0===Pe||Pe-- >0)&&!(He=xt.next()).done;)ft.push(He.value)}catch(Ct){gt={error:Ct}}finally{try{He&&!He.done&&(at=xt.return)&&at.call(xt)}finally{if(gt)throw gt.error}}return ft},D=this&&this.__spreadArray||function(rt,Pe,at){if(at||2===arguments.length)for(var ft,xt=0,He=Pe.length;xt<He;xt++)(ft||!(xt in Pe))&&(ft||(ft=Array.prototype.slice.call(Pe,0,xt)),ft[xt]=Pe[xt]);return rt.concat(ft||Array.prototype.slice.call(Pe))},H=this&&this.__importDefault||function(rt){return rt&&rt.__esModule?rt:{default:rt}};Object.defineProperty(be,"__esModule",{value:!0}),be.rectangleCollidesWithQuad=be.squareCollidesWithQuad=be.getCircumscribedAlignedRectangle=be.isRectangleAligned=void 0;var B=H(V(3333)),O="outside",xe=!1;function Oe(rt){return rt.x1===rt.x2||rt.y1===rt.y2}function re(rt){var Pe=Math.sqrt(Math.pow(rt.x2-rt.x1,2)+Math.pow(rt.y2-rt.y1,2)),at_x=(rt.y1-rt.y2)*rt.height/Pe,at_y=(rt.x2-rt.x1)*rt.height/Pe,xt={x:rt.x1,y:rt.y1},He={x:rt.x2,y:rt.y2},ft={x:rt.x1+at_x,y:rt.y1+at_y},gt={x:rt.x2+at_x,y:rt.y2+at_y},Ct=Math.min(xt.x,He.x,ft.x,gt.x),kn=Math.max(xt.x,He.x,ft.x,gt.x),Ut=Math.min(xt.y,He.y,ft.y,gt.y);return{x1:Ct,y1:Ut,x2:kn,y2:Ut,height:Math.max(xt.y,He.y,ft.y,gt.y)-Ut}}function ue(rt,Pe,at,xt,He,ft,gt){return rt<xt+ft&&rt+at>xt&&Pe<He+gt&&Pe+at>He}function z(rt,Pe,at,xt,He,ft,gt,Ct){return rt<He+gt&&rt+at>He&&Pe<ft+Ct&&Pe+xt>ft}function $(rt,Pe,at,xt,He,ft){var Ut=rt<at+He/2;return Pe<xt+ft/2?Ut?1:2:Ut?3:4}be.isRectangleAligned=Oe,be.getCircumscribedAlignedRectangle=re,be.squareCollidesWithQuad=ue,be.rectangleCollidesWithQuad=z;var Re=function(){function rt(Pe){var at;void 0===Pe&&(Pe={}),this.containers=((at={})[O]=[],at),this.cache=null,this.lastRectangle=null;var xt=Math.pow(4,5);this.data=new Float32Array((4*xt-1)/3*4),this.resize(Pe.boundaries?Pe.boundaries:{x:0,y:0,width:1,height:1})}return rt.prototype.add=function(Pe,at,xt,He){return function ge(rt,Pe,at,xt,He,ft,gt){for(var Ct=He-gt,kn=ft-gt,Ut=2*gt,Dn=0,Jt=0;;){if(Dn>=rt)return at[Jt]=at[Jt]||[],void at[Jt].push(xt);var nn=4*Jt+4,Ln=4*Jt+8,xn=4*Jt+12,bn=4*Jt+16,yn=ue(Ct,kn,Ut,Pe[nn+0],Pe[nn+1],Pe[nn+2],Pe[nn+3]),je=ue(Ct,kn,Ut,Pe[Ln+0],Pe[Ln+1],Pe[Ln+2],Pe[Ln+3]),Ce=ue(Ct,kn,Ut,Pe[xn+0],Pe[xn+1],Pe[xn+2],Pe[xn+3]),Dt=ue(Ct,kn,Ut,Pe[bn+0],Pe[bn+1],Pe[bn+2],Pe[bn+3]),Rt=[yn,je,Ce,Dt].reduce(function(ci,$i){return $i?ci+1:ci},0);if(0===Rt&&0===Dn)return at[O].push(xt),void(!xe&&at[O].length>=5&&(xe=!0,console.warn("sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. You might have a problem with the normalization function or the custom bounding box.")));if(0===Rt)throw new Error("sigma/quadtree.insertNode: no collision (level: ".concat(Dn,", key: ").concat(xt,", x: ").concat(He,", y: ").concat(ft,", size: ").concat(gt,")."));if(3===Rt)throw new Error("sigma/quadtree.insertNode: 3 impossible collisions (level: ".concat(Dn,", key: ").concat(xt,", x: ").concat(He,", y: ").concat(ft,", size: ").concat(gt,")."));if(Rt>1)return at[Jt]=at[Jt]||[],void at[Jt].push(xt);Dn++,yn&&(Jt=nn),je&&(Jt=Ln),Ce&&(Jt=xn),Dt&&(Jt=bn)}}(5,this.data,this.containers,Pe,at,xt,He),this},rt.prototype.resize=function(Pe){this.clear(),this.data[0]=Pe.x,this.data[1]=Pe.y,this.data[2]=Pe.width,this.data[3]=Pe.height,function ne(rt,Pe){for(var at=[0,0];at.length;){var xt=at.pop(),He=at.pop(),ft=4*He+4,gt=4*He+8,Ct=4*He+12,kn=4*He+16,Ut=Pe[He+0],Dn=Pe[He+1],Ln=Pe[He+2]/2,xn=Pe[He+3]/2;Pe[ft+0]=Ut,Pe[ft+1]=Dn,Pe[ft+2]=Ln,Pe[ft+3]=xn,Pe[gt+0]=Ut+Ln,Pe[gt+1]=Dn,Pe[gt+2]=Ln,Pe[gt+3]=xn,Pe[Ct+0]=Ut,Pe[Ct+1]=Dn+xn,Pe[Ct+2]=Ln,Pe[Ct+3]=xn,Pe[kn+0]=Ut+Ln,Pe[kn+1]=Dn+xn,Pe[kn+2]=Ln,Pe[kn+3]=xn,xt<rt-1&&(at.push(kn,xt+1),at.push(Ct,xt+1),at.push(gt,xt+1),at.push(ft,xt+1))}}(5,this.data)},rt.prototype.clear=function(){var Pe;return this.containers=((Pe={})[O]=[],Pe),this},rt.prototype.point=function(Pe,at){var xt=this.containers[O],He=0,ft=0;do{this.containers[He]&&xt.push.apply(xt,D([],Y(this.containers[He]),!1)),He=4*He+4*$(Pe,at,this.data[He+0],this.data[He+1],this.data[He+2],this.data[He+3]),ft++}while(ft<=5);return xt},rt.prototype.rectangle=function(Pe,at,xt,He,ft){var gt,Ct=this.lastRectangle;return Ct&&Pe===Ct.x1&&xt===Ct.x2&&at===Ct.y1&&He===Ct.y2&&ft===Ct.height||(this.lastRectangle={x1:Pe,y1:at,x2:xt,y2:He,height:ft},Oe(this.lastRectangle)||(this.lastRectangle=re(this.lastRectangle)),this.cache=function Ue(rt,Pe,at,xt,He,ft,gt){for(var Ut,Ct=[0,0],kn=[];Ct.length;){var Dn=Ct.pop(),Jt=Ct.pop();if((Ut=at[Jt])&&(0,B.default)(kn,Ut),!(Dn>=rt)){var nn=4*Jt+4,Ln=4*Jt+8,xn=4*Jt+12,bn=4*Jt+16,yn=z(xt,He,ft,gt,Pe[nn+0],Pe[nn+1],Pe[nn+2],Pe[nn+3]),je=z(xt,He,ft,gt,Pe[Ln+0],Pe[Ln+1],Pe[Ln+2],Pe[Ln+3]),Ce=z(xt,He,ft,gt,Pe[xn+0],Pe[xn+1],Pe[xn+2],Pe[xn+3]),Dt=z(xt,He,ft,gt,Pe[bn+0],Pe[bn+1],Pe[bn+2],Pe[bn+3]);yn&&Ct.push(nn,Dn+1),je&&Ct.push(Ln,Dn+1),Ce&&Ct.push(xn,Dn+1),Dt&&Ct.push(bn,Dn+1)}}return kn}(5,this.data,this.containers,Pe,at,Math.abs(Pe-xt)||Math.abs(at-He),ft),(gt=this.cache).push.apply(gt,D([],Y(this.containers[O]),!1))),this.cache},rt}();be.default=Re},756:function(Be,be,V){"use strict";var Y=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(be,"__esModule",{value:!0}),be.Sigma=be.MouseCaptor=be.QuadTree=be.Camera=void 0;var D=Y(V(4870));be.Sigma=D.default;var H=Y(V(2002));be.Camera=H.default;var B=Y(V(3650));be.QuadTree=B.default;var W=Y(V(2465));be.MouseCaptor=W.default,be.default=D.default},1285:(Be,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.default=function V(Y,D,H,B,W){var P=W.edgeLabelSize,O=W.edgeLabelFont,q=W.edgeLabelWeight,J=D.label;if(J){Y.fillStyle=W.edgeLabelColor.attribute?D[W.edgeLabelColor.attribute]||W.edgeLabelColor.color||"#000":W.edgeLabelColor.color,Y.font="".concat(q," ").concat(P,"px ").concat(O);var oe=H.size,se=B.size,Q=H.x,U=H.y,ae=B.x,xe=B.y,Oe=(Q+ae)/2,re=(U+xe)/2,ue=ae-Q,z=xe-U,$=Math.sqrt(ue*ue+z*z);if(!($<oe+se)){Oe=((Q+=ue*oe/$)+(ae-=ue*se/$))/2,re=((U+=z*oe/$)+(xe-=z*se/$))/2,ue=ae-Q,z=xe-U,$=Math.sqrt(ue*ue+z*z);var Ue,ne=Y.measureText(J).width;if(ne>$){for(ne=Y.measureText(J+="\u2026").width;ne>$&&J.length>1;)J=J.slice(0,-2)+"\u2026",ne=Y.measureText(J).width;if(J.length<4)return}Ue=ue>0?z>0?Math.acos(ue/$):Math.asin(z/$):z>0?Math.acos(ue/$)+Math.PI:Math.asin(ue/$)+Math.PI/2,Y.save(),Y.translate(Oe,re),Y.rotate(Ue),Y.fillText(J,-ne/2,D.size/2+P),Y.restore()}}}},4997:function(Be,be,V){"use strict";var Y=this&&this.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(be,"__esModule",{value:!0});var D=Y(V(9597));be.default=function H(B,W,P){var O=P.labelSize,q=P.labelFont;if(B.font="".concat(P.labelWeight," ").concat(O,"px ").concat(q),B.fillStyle="#FFF",B.shadowOffsetX=0,B.shadowOffsetY=0,B.shadowBlur=8,B.shadowColor="#000","string"==typeof W.label){var oe=B.measureText(W.label).width,se=Math.round(oe+5),Q=Math.round(O+4),U=Math.max(W.size,O/2)+2,ae=Math.asin(Q/2/U),xe=Math.sqrt(Math.abs(Math.pow(U,2)-Math.pow(Q/2,2)));B.beginPath(),B.moveTo(W.x+xe,W.y+Q/2),B.lineTo(W.x+U+se,W.y+Q/2),B.lineTo(W.x+U+se,W.y-Q/2),B.lineTo(W.x+xe,W.y-Q/2),B.arc(W.x,W.y,U,ae,-ae),B.closePath(),B.fill()}else B.beginPath(),B.arc(W.x,W.y,W.size+2,0,2*Math.PI),B.closePath(),B.fill();B.shadowOffsetX=0,B.shadowOffsetY=0,B.shadowBlur=0,(0,D.default)(B,W,P)}},9597:(Be,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.default=function V(Y,D,H){if(D.label){var B=H.labelSize,W=H.labelFont,P=H.labelWeight;Y.fillStyle=H.labelColor.attribute?D[H.labelColor.attribute]||H.labelColor.color||"#000":H.labelColor.color,Y.font="".concat(P," ").concat(B,"px ").concat(W),Y.fillText(D.label,D.x+D.size+3,D.y+B/3)}}},6160:function(Be,be,V){"use strict";var W,Y=this&&this.__extends||(W=function(P,O){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,te){q.__proto__=te}||function(q,te){for(var J in te)Object.prototype.hasOwnProperty.call(te,J)&&(q[J]=te[J])})(P,O)},function(P,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function q(){this.constructor=P}W(P,O),P.prototype=null===O?Object.create(O):(q.prototype=O.prototype,new q)});Object.defineProperty(be,"__esModule",{value:!0}),be.createEdgeCompoundProgram=be.AbstractEdgeProgram=void 0;var H=function(W){function P(O,q,te,J,oe){return W.call(this,O,q,te,J,oe)||this}return Y(P,W),P}(V(727).AbstractProgram);be.AbstractEdgeProgram=H,be.createEdgeCompoundProgram=function B(W){return function(){function P(O,q){this.programs=W.map(function(te){return new te(O,q)})}return P.prototype.bufferData=function(){this.programs.forEach(function(O){return O.bufferData()})},P.prototype.allocate=function(O){this.programs.forEach(function(q){return q.allocate(O)})},P.prototype.bind=function(){},P.prototype.computeIndices=function(){this.programs.forEach(function(O){return O.computeIndices()})},P.prototype.render=function(O){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(O)})},P.prototype.process=function(O,q,te,J,oe){this.programs.forEach(function(se){return se.process(O,q,te,J,oe)})},P}()}},4588:function(Be,be,V){"use strict";var W,Y=this&&this.__extends||(W=function(P,O){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,te){q.__proto__=te}||function(q,te){for(var J in te)Object.prototype.hasOwnProperty.call(te,J)&&(q[J]=te[J])})(P,O)},function(P,O){if("function"!=typeof O&&null!==O)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function q(){this.constructor=P}W(P,O),P.prototype=null===O?Object.create(O):(q.prototype=O.prototype,new q)});Object.defineProperty(be,"__esModule",{value:!0}),be.createNodeCompoundProgram=be.AbstractNodeProgram=void 0;var H=function(W){function P(O,q,te,J,oe){var se=W.call(this,O,q,te,J,oe)||this;se.positionLocation=O.getAttribLocation(se.program,"a_position"),se.sizeLocation=O.getAttribLocation(se.program,"a_size"),se.colorLocation=O.getAttribLocation(se.program,"a_color");var Q=O.getUniformLocation(se.program,"u_matrix");if(null===Q)throw new Error("AbstractNodeProgram: error while getting matrixLocation");se.matrixLocation=Q;var U=O.getUniformLocation(se.program,"u_ratio");if(null===U)throw new Error("AbstractNodeProgram: error while getting ratioLocation");se.ratioLocation=U;var ae=O.getUniformLocation(se.program,"u_scale");if(null===ae)throw new Error("AbstractNodeProgram: error while getting scaleLocation");return se.scaleLocation=ae,se}return Y(P,W),P.prototype.bind=function(){var O=this.gl;O.enableVertexAttribArray(this.positionLocation),O.enableVertexAttribArray(this.sizeLocation),O.enableVertexAttribArray(this.colorLocation),O.vertexAttribPointer(this.positionLocation,2,O.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,0),O.vertexAttribPointer(this.sizeLocation,1,O.FLOAT,!1,this.attributes*Float32Array.BYTES_PER_ELEMENT,8),O.vertexAttribPointer(this.colorLocation,4,O.UNSIGNED_BYTE,!0,this.attributes*Float32Array.BYTES_PER_ELEMENT,12)},P}(V(727).AbstractProgram);be.AbstractNodeProgram=H,be.createNodeCompoundProgram=function B(W){return function(){function P(O,q){this.programs=W.map(function(te){return new te(O,q)})}return P.prototype.bufferData=function(){this.programs.forEach(function(O){return O.bufferData()})},P.prototype.allocate=function(O){this.programs.forEach(function(q){return q.allocate(O)})},P.prototype.bind=function(){},P.prototype.render=function(O){this.programs.forEach(function(q){q.bind(),q.bufferData(),q.render(O)})},P.prototype.process=function(O,q,te){this.programs.forEach(function(J){return J.process(O,q,te)})},P}()}},727:(Be,be,V)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.AbstractProgram=void 0;var Y=V(5166),D=function(){function H(B,W,P,O,q){this.array=new Float32Array,this.points=O,this.attributes=q,this.gl=B,this.vertexShaderSource=W,this.fragmentShaderSource=P;var te=B.createBuffer();if(null===te)throw new Error("AbstractProgram: error while creating the buffer");this.buffer=te,B.bindBuffer(B.ARRAY_BUFFER,this.buffer),this.vertexShader=(0,Y.loadVertexShader)(B,this.vertexShaderSource),this.fragmentShader=(0,Y.loadFragmentShader)(B,this.fragmentShaderSource),this.program=(0,Y.loadProgram)(B,[this.vertexShader,this.fragmentShader])}return H.prototype.bufferData=function(){var B=this.gl;B.bufferData(B.ARRAY_BUFFER,this.array,B.DYNAMIC_DRAW)},H.prototype.allocate=function(B){this.array=new Float32Array(this.points*this.attributes*B)},H.prototype.hasNothingToRender=function(){return 0===this.array.length},H}();be.AbstractProgram=D},1391:function(Be,be,V){"use strict";var Y=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(be,"__esModule",{value:!0});var D=V(6160),H=Y(V(1034)),B=Y(V(2542)),W=(0,D.createEdgeCompoundProgram)([B.default,H.default]);be.default=W},1034:function(Be,be,V){"use strict";var oe,Y=this&&this.__extends||(oe=function(se,Q){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ae){U.__proto__=ae}||function(U,ae){for(var xe in ae)Object.prototype.hasOwnProperty.call(ae,xe)&&(U[xe]=ae[xe])})(se,Q)},function(se,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function U(){this.constructor=se}oe(se,Q),se.prototype=null===Q?Object.create(Q):(U.prototype=Q.prototype,new U)}),D=this&&this.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(be,"__esModule",{value:!0});var H=V(1699),B=D(V(4647)),W=D(V(2018)),J=function(oe){function se(Q){var U=oe.call(this,Q,B.default,W.default,3,9)||this;U.positionLocation=Q.getAttribLocation(U.program,"a_position"),U.colorLocation=Q.getAttribLocation(U.program,"a_color"),U.normalLocation=Q.getAttribLocation(U.program,"a_normal"),U.radiusLocation=Q.getAttribLocation(U.program,"a_radius"),U.barycentricLocation=Q.getAttribLocation(U.program,"a_barycentric");var ae=Q.getUniformLocation(U.program,"u_matrix");if(null===ae)throw new Error("EdgeArrowHeadProgram: error while getting matrixLocation");U.matrixLocation=ae;var xe=Q.getUniformLocation(U.program,"u_sqrtZoomRatio");if(null===xe)throw new Error("EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation");U.sqrtZoomRatioLocation=xe;var Oe=Q.getUniformLocation(U.program,"u_correctionRatio");if(null===Oe)throw new Error("EdgeArrowHeadProgram: error while getting correctionRatioLocation");return U.correctionRatioLocation=Oe,U.bind(),U}return Y(se,oe),se.prototype.bind=function(){var Q=this.gl;Q.enableVertexAttribArray(this.positionLocation),Q.enableVertexAttribArray(this.normalLocation),Q.enableVertexAttribArray(this.radiusLocation),Q.enableVertexAttribArray(this.colorLocation),Q.enableVertexAttribArray(this.barycentricLocation),Q.vertexAttribPointer(this.positionLocation,2,Q.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,0),Q.vertexAttribPointer(this.normalLocation,2,Q.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,8),Q.vertexAttribPointer(this.radiusLocation,1,Q.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,16),Q.vertexAttribPointer(this.colorLocation,4,Q.UNSIGNED_BYTE,!0,9*Float32Array.BYTES_PER_ELEMENT,20),Q.vertexAttribPointer(this.barycentricLocation,3,Q.FLOAT,!1,9*Float32Array.BYTES_PER_ELEMENT,24)},se.prototype.computeIndices=function(){},se.prototype.process=function(Q,U,ae,xe,Oe){if(xe)for(var re=27*Oe,ue=re+27;re<ue;re++)this.array[re]=0;else{var z=ae.size||1,$=U.size||1,ne=Q.x,ge=Q.y,Ue=U.x,Re=U.y,rt=(0,H.floatColor)(ae.color),Pe=Ue-ne,at=Re-ge,xt=Pe*Pe+at*at,He=0,ft=0;xt&&(He=-at*(xt=1/Math.sqrt(xt))*z,ft=Pe*xt*z);var gt=27*Oe,Ct=this.array;Ct[gt++]=Ue,Ct[gt++]=Re,Ct[gt++]=-He,Ct[gt++]=-ft,Ct[gt++]=$,Ct[gt++]=rt,Ct[gt++]=1,Ct[gt++]=0,Ct[gt++]=0,Ct[gt++]=Ue,Ct[gt++]=Re,Ct[gt++]=-He,Ct[gt++]=-ft,Ct[gt++]=$,Ct[gt++]=rt,Ct[gt++]=0,Ct[gt++]=1,Ct[gt++]=0,Ct[gt++]=Ue,Ct[gt++]=Re,Ct[gt++]=-He,Ct[gt++]=-ft,Ct[gt++]=$,Ct[gt++]=rt,Ct[gt++]=0,Ct[gt++]=0,Ct[gt]=1}},se.prototype.render=function(Q){if(!this.hasNothingToRender()){var U=this.gl;U.useProgram(this.program),U.uniformMatrix3fv(this.matrixLocation,!1,Q.matrix),U.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(Q.ratio)),U.uniform1f(this.correctionRatioLocation,Q.correctionRatio),U.drawArrays(U.TRIANGLES,0,this.array.length/9)}},se}(V(6160).AbstractEdgeProgram);be.default=J},2542:function(Be,be,V){"use strict";var oe,Y=this&&this.__extends||(oe=function(se,Q){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ae){U.__proto__=ae}||function(U,ae){for(var xe in ae)Object.prototype.hasOwnProperty.call(ae,xe)&&(U[xe]=ae[xe])})(se,Q)},function(se,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function U(){this.constructor=se}oe(se,Q),se.prototype=null===Q?Object.create(Q):(U.prototype=Q.prototype,new U)}),D=this&&this.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(be,"__esModule",{value:!0});var H=V(6160),B=V(1699),W=D(V(2529)),P=D(V(427)),J=function(oe){function se(Q){var U=oe.call(this,Q,W.default,P.default,4,6)||this,ae=Q.createBuffer();if(null===ae)throw new Error("EdgeClampedProgram: error while getting resolutionLocation");U.indicesBuffer=ae,U.positionLocation=Q.getAttribLocation(U.program,"a_position"),U.colorLocation=Q.getAttribLocation(U.program,"a_color"),U.normalLocation=Q.getAttribLocation(U.program,"a_normal"),U.radiusLocation=Q.getAttribLocation(U.program,"a_radius");var xe=Q.getUniformLocation(U.program,"u_matrix");if(null===xe)throw new Error("EdgeClampedProgram: error while getting matrixLocation");U.matrixLocation=xe;var Oe=Q.getUniformLocation(U.program,"u_sqrtZoomRatio");if(null===Oe)throw new Error("EdgeClampedProgram: error while getting cameraRatioLocation");U.sqrtZoomRatioLocation=Oe;var re=Q.getUniformLocation(U.program,"u_correctionRatio");if(null===re)throw new Error("EdgeClampedProgram: error while getting viewportRatioLocation");return U.correctionRatioLocation=re,U.canUse32BitsIndices=(0,B.canUse32BitsIndices)(Q),U.IndicesArray=U.canUse32BitsIndices?Uint32Array:Uint16Array,U.indicesArray=new U.IndicesArray,U.indicesType=U.canUse32BitsIndices?Q.UNSIGNED_INT:Q.UNSIGNED_SHORT,U.bind(),U}return Y(se,oe),se.prototype.bind=function(){var Q=this.gl;Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),Q.enableVertexAttribArray(this.positionLocation),Q.enableVertexAttribArray(this.normalLocation),Q.enableVertexAttribArray(this.colorLocation),Q.enableVertexAttribArray(this.radiusLocation),Q.vertexAttribPointer(this.positionLocation,2,Q.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),Q.vertexAttribPointer(this.normalLocation,2,Q.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,8),Q.vertexAttribPointer(this.colorLocation,4,Q.UNSIGNED_BYTE,!0,6*Float32Array.BYTES_PER_ELEMENT,16),Q.vertexAttribPointer(this.radiusLocation,1,Q.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,20)},se.prototype.process=function(Q,U,ae,xe,Oe){if(xe)for(var re=24*Oe,ue=re+24;re<ue;re++)this.array[re]=0;else{var z=ae.size||1,$=Q.x,ne=Q.y,ge=U.x,Ue=U.y,Re=U.size||1,rt=(0,B.floatColor)(ae.color),Pe=ge-$,at=Ue-ne,xt=Pe*Pe+at*at,He=0,ft=0;xt&&(He=-at*(xt=1/Math.sqrt(xt))*z,ft=Pe*xt*z);var gt=24*Oe,Ct=this.array;Ct[gt++]=$,Ct[gt++]=ne,Ct[gt++]=He,Ct[gt++]=ft,Ct[gt++]=rt,Ct[gt++]=0,Ct[gt++]=$,Ct[gt++]=ne,Ct[gt++]=-He,Ct[gt++]=-ft,Ct[gt++]=rt,Ct[gt++]=0,Ct[gt++]=ge,Ct[gt++]=Ue,Ct[gt++]=He,Ct[gt++]=ft,Ct[gt++]=rt,Ct[gt++]=Re,Ct[gt++]=ge,Ct[gt++]=Ue,Ct[gt++]=-He,Ct[gt++]=-ft,Ct[gt++]=rt,Ct[gt]=-Re}},se.prototype.computeIndices=function(){for(var Q=this.array.length/6,ae=new this.IndicesArray(Q+Q/2),xe=0,Oe=0;xe<Q;xe+=4)ae[Oe++]=xe,ae[Oe++]=xe+1,ae[Oe++]=xe+2,ae[Oe++]=xe+2,ae[Oe++]=xe+1,ae[Oe++]=xe+3;this.indicesArray=ae},se.prototype.bufferData=function(){oe.prototype.bufferData.call(this);var Q=this.gl;Q.bufferData(Q.ELEMENT_ARRAY_BUFFER,this.indicesArray,Q.STATIC_DRAW)},se.prototype.render=function(Q){if(!this.hasNothingToRender()){var U=this.gl;U.useProgram(this.program),U.uniformMatrix3fv(this.matrixLocation,!1,Q.matrix),U.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(Q.ratio)),U.uniform1f(this.correctionRatioLocation,Q.correctionRatio),U.drawElements(U.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},se}(H.AbstractEdgeProgram);be.default=J},8959:function(Be,be,V){"use strict";var oe,Y=this&&this.__extends||(oe=function(se,Q){return(oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,ae){U.__proto__=ae}||function(U,ae){for(var xe in ae)Object.prototype.hasOwnProperty.call(ae,xe)&&(U[xe]=ae[xe])})(se,Q)},function(se,Q){if("function"!=typeof Q&&null!==Q)throw new TypeError("Class extends value "+String(Q)+" is not a constructor or null");function U(){this.constructor=se}oe(se,Q),se.prototype=null===Q?Object.create(Q):(U.prototype=Q.prototype,new U)}),D=this&&this.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(be,"__esModule",{value:!0});var H=V(1699),B=D(V(3364)),W=D(V(427)),J=function(oe){function se(Q){var U=oe.call(this,Q,B.default,W.default,4,5)||this,ae=Q.createBuffer();if(null===ae)throw new Error("EdgeProgram: error while creating indicesBuffer");U.indicesBuffer=ae,U.positionLocation=Q.getAttribLocation(U.program,"a_position"),U.colorLocation=Q.getAttribLocation(U.program,"a_color"),U.normalLocation=Q.getAttribLocation(U.program,"a_normal");var xe=Q.getUniformLocation(U.program,"u_matrix");if(null===xe)throw new Error("EdgeProgram: error while getting matrixLocation");U.matrixLocation=xe;var Oe=Q.getUniformLocation(U.program,"u_correctionRatio");if(null===Oe)throw new Error("EdgeProgram: error while getting correctionRatioLocation");U.correctionRatioLocation=Oe;var re=Q.getUniformLocation(U.program,"u_sqrtZoomRatio");if(null===re)throw new Error("EdgeProgram: error while getting sqrtZoomRatioLocation");return U.sqrtZoomRatioLocation=re,U.canUse32BitsIndices=(0,H.canUse32BitsIndices)(Q),U.IndicesArray=U.canUse32BitsIndices?Uint32Array:Uint16Array,U.indicesArray=new U.IndicesArray,U.indicesType=U.canUse32BitsIndices?Q.UNSIGNED_INT:Q.UNSIGNED_SHORT,U.bind(),U}return Y(se,oe),se.prototype.bind=function(){var Q=this.gl;Q.bindBuffer(Q.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),Q.enableVertexAttribArray(this.positionLocation),Q.enableVertexAttribArray(this.normalLocation),Q.enableVertexAttribArray(this.colorLocation),Q.vertexAttribPointer(this.positionLocation,2,Q.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,0),Q.vertexAttribPointer(this.normalLocation,2,Q.FLOAT,!1,5*Float32Array.BYTES_PER_ELEMENT,8),Q.vertexAttribPointer(this.colorLocation,4,Q.UNSIGNED_BYTE,!0,5*Float32Array.BYTES_PER_ELEMENT,16)},se.prototype.computeIndices=function(){for(var Q=this.array.length/5,ae=new this.IndicesArray(Q+Q/2),xe=0,Oe=0;xe<Q;xe+=4)ae[Oe++]=xe,ae[Oe++]=xe+1,ae[Oe++]=xe+2,ae[Oe++]=xe+2,ae[Oe++]=xe+1,ae[Oe++]=xe+3;this.indicesArray=ae},se.prototype.bufferData=function(){oe.prototype.bufferData.call(this);var Q=this.gl;Q.bufferData(Q.ELEMENT_ARRAY_BUFFER,this.indicesArray,Q.STATIC_DRAW)},se.prototype.process=function(Q,U,ae,xe,Oe){if(xe)for(var re=20*Oe,ue=re+20;re<ue;re++)this.array[re]=0;else{var z=ae.size||1,$=Q.x,ne=Q.y,ge=U.x,Ue=U.y,Re=(0,H.floatColor)(ae.color),rt=ge-$,Pe=Ue-ne,at=rt*rt+Pe*Pe,xt=0,He=0;at&&(xt=-Pe*(at=1/Math.sqrt(at))*z,He=rt*at*z);var ft=20*Oe,gt=this.array;gt[ft++]=$,gt[ft++]=ne,gt[ft++]=xt,gt[ft++]=He,gt[ft++]=Re,gt[ft++]=$,gt[ft++]=ne,gt[ft++]=-xt,gt[ft++]=-He,gt[ft++]=Re,gt[ft++]=ge,gt[ft++]=Ue,gt[ft++]=xt,gt[ft++]=He,gt[ft++]=Re,gt[ft++]=ge,gt[ft++]=Ue,gt[ft++]=-xt,gt[ft++]=-He,gt[ft]=Re}},se.prototype.render=function(Q){if(!this.hasNothingToRender()){var U=this.gl;U.useProgram(this.program),U.uniformMatrix3fv(this.matrixLocation,!1,Q.matrix),U.uniform1f(this.sqrtZoomRatioLocation,Math.sqrt(Q.ratio)),U.uniform1f(this.correctionRatioLocation,Q.correctionRatio),U.drawElements(U.TRIANGLES,this.indicesArray.length,this.indicesType,0)}},se}(V(6160).AbstractEdgeProgram);be.default=J},105:function(Be,be,V){"use strict";var J,Y=this&&this.__extends||(J=function(oe,se){return(J=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,U){Q.__proto__=U}||function(Q,U){for(var ae in U)Object.prototype.hasOwnProperty.call(U,ae)&&(Q[ae]=U[ae])})(oe,se)},function(oe,se){if("function"!=typeof se&&null!==se)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");function Q(){this.constructor=oe}J(oe,se),oe.prototype=null===se?Object.create(se):(Q.prototype=se.prototype,new Q)}),D=this&&this.__importDefault||function(J){return J&&J.__esModule?J:{default:J}};Object.defineProperty(be,"__esModule",{value:!0});var H=V(1699),B=D(V(7768)),W=D(V(2181)),te=function(J){function oe(se){var Q=J.call(this,se,B.default,W.default,1,4)||this;return Q.bind(),Q}return Y(oe,J),oe.prototype.process=function(se,Q,U){var ae=this.array,xe=1*U*4;if(Q)return ae[xe++]=0,ae[xe++]=0,ae[xe++]=0,void(ae[xe++]=0);var Oe=(0,H.floatColor)(se.color);ae[xe++]=se.x,ae[xe++]=se.y,ae[xe++]=se.size,ae[xe]=Oe},oe.prototype.render=function(se){if(!this.hasNothingToRender()){var Q=this.gl;Q.useProgram(this.program),Q.uniform1f(this.ratioLocation,1/Math.sqrt(se.ratio)),Q.uniform1f(this.scaleLocation,se.scalingRatio),Q.uniformMatrix3fv(this.matrixLocation,!1,se.matrix),Q.drawArrays(Q.POINTS,0,this.array.length/4)}},oe}(V(4588).AbstractNodeProgram);be.default=te},2018:Be=>{(()=>{"use strict";var be={d:(D,H)=>{for(var B in H)be.o(H,B)&&!be.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};be.r(V),be.d(V,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n";Be.exports=V})()},4647:Be=>{(()=>{"use strict";var be={d:(D,H)=>{for(var B in H)be.o(H,B)&&!be.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};be.r(V),be.d(V,{default:()=>Y});const Y="attribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec4 a_color;\nattribute vec3 a_barycentric;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadWidthLengthRatio = 0.66;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\n\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";Be.exports=V})()},2529:Be=>{(()=>{"use strict";var be={d:(D,H)=>{for(var B in H)be.o(H,B)&&!be.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};be.r(V),be.d(V,{default:()=>Y});const Y="attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\nattribute float a_radius;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\nconst float arrowHeadLengthThicknessRatio = 2.5;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(a_radius);\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";Be.exports=V})()},427:Be=>{(()=>{"use strict";var be={d:(D,H)=>{for(var B in H)be.o(H,B)&&!be.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};be.r(V),be.d(V,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float feather = 0.001;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n}\n";Be.exports=V})()},3364:Be=>{(()=>{"use strict";var be={d:(D,H)=>{for(var B in H)be.o(H,B)&&!be.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};be.r(V),be.d(V,{default:()=>Y});const Y='attribute vec4 a_color;\nattribute vec2 a_normal;\nattribute vec2 a_position;\n\nuniform mat3 u_matrix;\nuniform float u_sqrtZoomRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\n\nconst float minThickness = 1.7;\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // We require edges to be at least `minThickness` pixels thick *on screen*\n  // (so we need to compensate the SQRT zoom ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n\n  // Finally, we adapt the edge thickness to the "SQRT rule" in sigma (so that\n  // items are not too big when zoomed in, and not too small when zoomed out).\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\n  // it\'s simpler like this:\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasint effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\n\n  v_normal = unitNormal;\n  v_color = a_color;\n  v_color.a *= bias;\n}\n';Be.exports=V})()},2181:Be=>{(()=>{"use strict";var be={d:(D,H)=>{for(var B in H)be.o(H,B)&&!be.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};be.r(V),be.d(V,{default:()=>Y});const Y="precision mediump float;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float radius = 0.5;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\n  float dist = radius - length(m);\n\n  float t = 0.0;\n  if (dist > v_border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / v_border;\n\n  gl_FragColor = mix(transparent, v_color, t);\n}\n";Be.exports=V})()},7768:Be=>{(()=>{"use strict";var be={d:(D,H)=>{for(var B in H)be.o(H,B)&&!be.o(D,B)&&Object.defineProperty(D,B,{enumerable:!0,get:H[B]})},o:(D,H)=>Object.prototype.hasOwnProperty.call(D,H),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},V={};be.r(V),be.d(V,{default:()=>Y});const Y="attribute vec2 a_position;\nattribute float a_size;\nattribute vec4 a_color;\n\nuniform float u_ratio;\nuniform float u_scale;\nuniform mat3 u_matrix;\n\nvarying vec4 v_color;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  gl_Position = vec4(\n    (u_matrix * vec3(a_position, 1)).xy,\n    0,\n    1\n  );\n\n  // Multiply the point size twice:\n  //  - x SCALING_RATIO to correct the canvas scaling\n  //  - x 2 to correct the formulae\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\n\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\n\n  // Extract the color:\n  v_color = a_color;\n  v_color.a *= bias;\n}\n";Be.exports=V})()},5166:(Be,be)=>{"use strict";function V(B,W,P){var q=W.createShader("VERTEX"===B?W.VERTEX_SHADER:W.FRAGMENT_SHADER);if(null===q)throw new Error("loadShader: error while creating the shader");if(W.shaderSource(q,P),W.compileShader(q),!W.getShaderParameter(q,W.COMPILE_STATUS)){var J=W.getShaderInfoLog(q);throw W.deleteShader(q),new Error("loadShader: error while compiling the shader:\n".concat(J,"\n").concat(P))}return q}Object.defineProperty(be,"__esModule",{value:!0}),be.loadProgram=be.loadFragmentShader=be.loadVertexShader=void 0,be.loadVertexShader=function Y(B,W){return V("VERTEX",B,W)},be.loadFragmentShader=function D(B,W){return V("FRAGMENT",B,W)},be.loadProgram=function H(B,W){var O,q,P=B.createProgram();if(null===P)throw new Error("loadProgram: error while creating the program.");for(O=0,q=W.length;O<q;O++)B.attachShader(P,W[O]);if(B.linkProgram(P),!B.getProgramParameter(P,B.LINK_STATUS))throw B.deleteProgram(P),new Error("loadProgram: error while linking the program.");return P}},2621:function(Be,be,V){"use strict";var Y=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(be,"__esModule",{value:!0}),be.DEFAULT_SETTINGS=be.validateSettings=void 0;var D=Y(V(9597)),H=Y(V(4997)),B=Y(V(1285)),W=Y(V(105)),P=Y(V(8959)),O=Y(V(1391));be.validateSettings=function q(te){if("number"!=typeof te.labelDensity||te.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var J=te.minCameraRatio,oe=te.maxCameraRatio;if("number"==typeof J&&"number"==typeof oe&&oe<J)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")},be.DEFAULT_SETTINGS={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeClickEvents:!1,enableEdgeWheelEvents:!1,enableEdgeHoverEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,labelRenderer:D.default,hoverRenderer:H.default,edgeLabelRenderer:B.default,allowInvalidContainer:!1,nodeProgramClasses:{circle:W.default},edgeProgramClasses:{arrow:O.default,line:P.default}}},4870:function(Be,be,V){"use strict";var re,Y=this&&this.__extends||(re=function(ue,z){return(re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function($,ne){$.__proto__=ne}||function($,ne){for(var ge in ne)Object.prototype.hasOwnProperty.call(ne,ge)&&($[ge]=ne[ge])})(ue,z)},function(ue,z){if("function"!=typeof z&&null!==z)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function $(){this.constructor=ue}re(ue,z),ue.prototype=null===z?Object.create(z):($.prototype=z.prototype,new $)}),D=this&&this.__assign||function(){return D=Object.assign||function(re){for(var ue,z=1,$=arguments.length;z<$;z++)for(var ne in ue=arguments[z])Object.prototype.hasOwnProperty.call(ue,ne)&&(re[ne]=ue[ne]);return re},D.apply(this,arguments)},H=this&&this.__values||function(re){var ue="function"==typeof Symbol&&Symbol.iterator,z=ue&&re[ue],$=0;if(z)return z.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&$>=re.length&&(re=void 0),{value:re&&re[$++],done:!re}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")},B=this&&this.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(be,"__esModule",{value:!0});var W=B(V(2002)),P=B(V(2465)),O=B(V(3650)),q=V(57),te=V(1699),J=V(4942),oe=V(2621),se=B(V(1565)),Q=V(7611),U=V(3180);function ae(re,ue,z){if(!z.hasOwnProperty("x")||!z.hasOwnProperty("y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(ue,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return z.color||(z.color=re.defaultNodeColor),!z.label&&""!==z.label&&(z.label=null),z.label=null!=z.label?""+z.label:null,z.size||(z.size=2),z.hasOwnProperty("hidden")||(z.hidden=!1),z.hasOwnProperty("highlighted")||(z.highlighted=!1),z.hasOwnProperty("forceLabel")||(z.forceLabel=!1),(!z.type||""===z.type)&&(z.type=re.defaultNodeType),z.zIndex||(z.zIndex=0),z}function xe(re,ue,z){return z.color||(z.color=re.defaultEdgeColor),z.label||(z.label=""),z.size||(z.size=.5),z.hasOwnProperty("hidden")||(z.hidden=!1),z.hasOwnProperty("forceLabel")||(z.forceLabel=!1),(!z.type||""===z.type)&&(z.type=re.defaultEdgeType),z.zIndex||(z.zIndex=0),z}var Oe=function(re){function ue(z,$,ne){void 0===ne&&(ne={});var ge=re.call(this)||this;if(ge.elements={},ge.canvasContexts={},ge.webGLContexts={},ge.activeListeners={},ge.quadtree=new O.default,ge.labelGrid=new J.LabelGrid,ge.nodeDataCache={},ge.edgeDataCache={},ge.nodesWithForcedLabels=[],ge.edgesWithForcedLabels=[],ge.nodeExtent={x:[0,1],y:[0,1]},ge.matrix=(0,Q.identity)(),ge.invMatrix=(0,Q.identity)(),ge.correctionRatio=1,ge.customBBox=null,ge.normalizationFunction=(0,te.createNormalizationFunction)({x:[0,1],y:[0,1]}),ge.cameraSizeRatio=1,ge.width=0,ge.height=0,ge.pixelRatio=(0,te.getPixelRatio)(),ge.displayedLabels=new Set,ge.highlightedNodes=new Set,ge.hoveredNode=null,ge.hoveredEdge=null,ge.renderFrame=null,ge.renderHighlightedNodesFrame=null,ge.needToProcess=!1,ge.needToSoftProcess=!1,ge.checkEdgesEventsFrame=null,ge.nodePrograms={},ge.hoverNodePrograms={},ge.edgePrograms={},ge.settings=(0,te.assign)({},oe.DEFAULT_SETTINGS,ne),(0,oe.validateSettings)(ge.settings),(0,te.validateGraph)(z),!($ instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var Ue in ge.graph=z,ge.container=$,ge.createWebGLContext("edges",{preserveDrawingBuffer:!0}),ge.createCanvasContext("edgeLabels"),ge.createWebGLContext("nodes"),ge.createCanvasContext("labels"),ge.createCanvasContext("hovers"),ge.createWebGLContext("hoverNodes"),ge.createCanvasContext("mouse"),ge.webGLContexts){var Re=ge.webGLContexts[Ue];Re.blendFunc(Re.ONE,Re.ONE_MINUS_SRC_ALPHA),Re.enable(Re.BLEND)}for(var rt in ge.settings.nodeProgramClasses){var Pe=ge.settings.nodeProgramClasses[rt];ge.nodePrograms[rt]=new Pe(ge.webGLContexts.nodes,ge),ge.hoverNodePrograms[rt]=new Pe(ge.webGLContexts.hoverNodes,ge)}for(var rt in ge.settings.edgeProgramClasses)ge.edgePrograms[rt]=new(0,ge.settings.edgeProgramClasses[rt])(ge.webGLContexts.edges,ge);return ge.resize(),ge.camera=new W.default,ge.bindCameraHandlers(),ge.mouseCaptor=new P.default(ge.elements.mouse,ge),ge.touchCaptor=new se.default(ge.elements.mouse,ge),ge.bindEventHandlers(),ge.bindGraphHandlers(),ge.handleSettingsUpdate(),ge.process(),ge.render(),ge}return Y(ue,re),ue.prototype.createCanvas=function(z){var $=(0,te.createElement)("canvas",{position:"absolute"},{class:"sigma-".concat(z)});return this.elements[z]=$,this.container.appendChild($),$},ue.prototype.createCanvasContext=function(z){var $=this.createCanvas(z);return this.canvasContexts[z]=$.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this},ue.prototype.createWebGLContext=function(z,$){var Ue,ne=this.createCanvas(z),ge=D({preserveDrawingBuffer:!1,antialias:!1},$||{});return(Ue=ne.getContext("webgl2",ge))||(Ue=ne.getContext("webgl",ge)),Ue||(Ue=ne.getContext("experimental-webgl",ge)),this.webGLContexts[z]=Ue,this},ue.prototype.bindCameraHandlers=function(){var z=this;return this.activeListeners.camera=function(){z._scheduleRefresh()},this.camera.on("updated",this.activeListeners.camera),this},ue.prototype.mouseIsOnNode=function(z,$,ne){var ge=z.x,Ue=z.y,Re=$.x,rt=$.y;return ge>Re-ne&&ge<Re+ne&&Ue>rt-ne&&Ue<rt+ne&&Math.sqrt(Math.pow(ge-Re,2)+Math.pow(Ue-rt,2))<ne},ue.prototype.getQuadNodes=function(z){var $=this.viewportToFramedGraph(z);return this.quadtree.point($.x,1-$.y)},ue.prototype.getNodeAtPosition=function(z){for(var $=z.x,ne=z.y,ge=this.getQuadNodes(z),Ue=1/0,Re=null,rt=0,Pe=ge.length;rt<Pe;rt++){var at=ge[rt],xt=this.nodeDataCache[at],He=this.framedGraphToViewport(xt),ft=this.scaleSize(xt.size);if(!xt.hidden&&this.mouseIsOnNode(z,He,ft)){var gt=Math.sqrt(Math.pow($-He.x,2)+Math.pow(ne-He.y,2));gt<Ue&&(Ue=gt,Re=at)}}return Re},ue.prototype.bindEventHandlers=function(){var z=this;this.activeListeners.handleResize=function(){z.needToSoftProcess=!0,z._scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(ne){var ge={event:ne,preventSigmaDefault:function(){ne.preventSigmaDefault()}},Ue=z.getNodeAtPosition(ne);if(Ue&&z.hoveredNode!==Ue&&!z.nodeDataCache[Ue].hidden)return z.hoveredNode&&z.emit("leaveNode",D(D({},ge),{node:z.hoveredNode})),z.hoveredNode=Ue,z.emit("enterNode",D(D({},ge),{node:Ue})),void z.scheduleHighlightedNodesRender();if(z.hoveredNode){var Re=z.nodeDataCache[z.hoveredNode],rt=z.framedGraphToViewport(Re),Pe=z.scaleSize(Re.size);if(!z.mouseIsOnNode(ne,rt,Pe)){var at=z.hoveredNode;return z.hoveredNode=null,z.emit("leaveNode",D(D({},ge),{node:at})),void z.scheduleHighlightedNodesRender()}}!0===z.settings.enableEdgeHoverEvents?z.checkEdgeHoverEvents(ge):"debounce"===z.settings.enableEdgeHoverEvents&&(z.checkEdgesEventsFrame||(z.checkEdgesEventsFrame=(0,te.requestFrame)(function(){z.checkEdgeHoverEvents(ge),z.checkEdgesEventsFrame=null})))};var $=function(ne){return function(ge){var Ue={event:ge,preventSigmaDefault:function(){ge.preventSigmaDefault()}},rt=ge.original.isFakeSigmaMouseEvent?z.getNodeAtPosition(ge):z.hoveredNode;if(rt)return z.emit("".concat(ne,"Node"),D(D({},Ue),{node:rt}));if("wheel"===ne?z.settings.enableEdgeWheelEvents:z.settings.enableEdgeClickEvents){var Pe=z.getEdgeAtPoint(ge.x,ge.y);if(Pe)return z.emit("".concat(ne,"Edge"),D(D({},Ue),{edge:Pe}))}return z.emit("".concat(ne,"Stage"),Ue)}};return this.activeListeners.handleClick=$("click"),this.activeListeners.handleRightClick=$("rightClick"),this.activeListeners.handleDoubleClick=$("doubleClick"),this.activeListeners.handleWheel=$("wheel"),this.activeListeners.handleDown=$("down"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this},ue.prototype.bindGraphHandlers=function(){var z=this,$=this.graph;return this.activeListeners.graphUpdate=function(){z.needToProcess=!0,z._scheduleRefresh()},this.activeListeners.softGraphUpdate=function(){z.needToSoftProcess=!0,z._scheduleRefresh()},this.activeListeners.dropNodeGraphUpdate=function(ne){delete z.nodeDataCache[ne.key],z.hoveredNode===ne.key&&(z.hoveredNode=null),z.activeListeners.graphUpdate()},this.activeListeners.dropEdgeGraphUpdate=function(ne){delete z.edgeDataCache[ne.key],z.hoveredEdge===ne.key&&(z.hoveredEdge=null),z.activeListeners.graphUpdate()},this.activeListeners.clearEdgesGraphUpdate=function(){z.edgeDataCache={},z.hoveredEdge=null,z.activeListeners.graphUpdate()},this.activeListeners.clearGraphUpdate=function(){z.nodeDataCache={},z.hoveredNode=null,z.activeListeners.clearEdgesGraphUpdate()},$.on("nodeAdded",this.activeListeners.graphUpdate),$.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),$.on("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),$.on("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),$.on("edgeAdded",this.activeListeners.graphUpdate),$.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),$.on("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),$.on("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),$.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),$.on("cleared",this.activeListeners.clearGraphUpdate),this},ue.prototype.checkEdgeHoverEvents=function(z){var $=this.hoveredNode?null:this.getEdgeAtPoint(z.event.x,z.event.y);return $!==this.hoveredEdge&&(this.hoveredEdge&&this.emit("leaveEdge",D(D({},z),{edge:this.hoveredEdge})),$&&this.emit("enterEdge",D(D({},z),{edge:$})),this.hoveredEdge=$),this},ue.prototype.getEdgeAtPoint=function(z,$){var ne,ge,Ue=this,rt=this.edgeDataCache,Pe=this.nodeDataCache;if(!(0,U.isPixelColored)(this.webGLContexts.edges,z*this.pixelRatio,$*this.pixelRatio))return null;var at=this.viewportToGraph({x:z,y:$}),xt=at.x,He=at.y,ft=0;if(this.graph.someEdge(function(Ln,xn,bn,yn,je,Ce){var Dt=je.x,Rt=je.y,ci=Ce.x,$i=Ce.y;if(rt[Ln].hidden||Pe[bn].hidden||Pe[yn].hidden)return!1;if(Dt!==ci||Rt!==$i){var At=Math.sqrt(Math.pow(ci-Dt,2)+Math.pow($i-Rt,2)),Pt=Ue.graphToViewport({x:Dt,y:Rt}),un=Pt.x,Je=Pt.y,Te=Ue.graphToViewport({x:ci,y:$i}),Ot=Te.y,vn=Math.sqrt(Math.pow(Te.x-un,2)+Math.pow(Ot-Je,2));return ft=At/vn,!0}}),!ft)return null;var gt=this.graph.filterEdges(function(Ln,xn,bn,yn,je,Ce){return!(rt[Ln].hidden||Pe[bn].hidden||Pe[yn].hidden)&&(!!(0,U.doEdgeCollideWithPoint)(xt,He,je.x,je.y,Ce.x,Ce.y,rt[Ln].size*ft/Ue.cameraSizeRatio)||void 0)});if(0===gt.length)return null;var Ct=gt[gt.length-1],kn=-1/0;try{for(var Ut=H(gt),Dn=Ut.next();!Dn.done;Dn=Ut.next()){var Jt=Dn.value,nn=this.graph.getEdgeAttribute(Jt,"zIndex");nn>=kn&&(Ct=Jt,kn=nn)}}catch(Ln){ne={error:Ln}}finally{try{Dn&&!Dn.done&&(ge=Ut.return)&&ge.call(Ut)}finally{if(ne)throw ne.error}}return Ct},ue.prototype.process=function(z){var $=this;void 0===z&&(z=!1);var ne=this.graph,ge=this.settings,Ue=this.getDimensions(),Re=[1/0,-1/0],rt=[1/0,-1/0];this.quadtree.clear(),this.labelGrid.resizeAndClear(Ue,ge.labelGridCellSize),this.highlightedNodes=new Set,this.nodeExtent=(0,te.graphExtent)(ne),this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[];var Pe=new W.default,at=(0,te.matrixFromCamera)(Pe.getState(),this.getDimensions(),this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.normalizationFunction=(0,te.createNormalizationFunction)(this.customBBox||this.nodeExtent);for(var xt={},He=ne.nodes(),ft=0,gt=He.length;ft<gt;ft++){var Ct=He[ft],kn=Object.assign({},ne.getNodeAttributes(Ct));ge.nodeReducer&&(kn=ge.nodeReducer(Ct,kn)),xt[(Ut=ae(this.settings,Ct,kn)).type]=(xt[Ut.type]||0)+1,this.nodeDataCache[Ct]=Ut,this.normalizationFunction.applyTo(Ut),Ut.forceLabel&&this.nodesWithForcedLabels.push(Ct),this.settings.zIndex&&(Ut.zIndex<Re[0]&&(Re[0]=Ut.zIndex),Ut.zIndex>Re[1]&&(Re[1]=Ut.zIndex))}for(var Dn in this.nodePrograms){if(!this.nodePrograms.hasOwnProperty(Dn))throw new Error('Sigma: could not find a suitable program for node type "'.concat(Dn,'"!'));z||this.nodePrograms[Dn].allocate(xt[Dn]||0),xt[Dn]=0}for(this.settings.zIndex&&Re[0]!==Re[1]&&(He=(0,te.zIndexOrdering)(Re,function(Dt){return $.nodeDataCache[Dt].zIndex},He)),ft=0,gt=He.length;ft<gt;ft++)this.quadtree.add(Ct=He[ft],(Ut=this.nodeDataCache[Ct]).x,1-Ut.y,Ut.size/this.width),"string"==typeof Ut.label&&!Ut.hidden&&this.labelGrid.add(Ct,Ut.size,this.framedGraphToViewport(Ut,{matrix:at})),this.nodePrograms[Ut.type].process(Ut,Ut.hidden,xt[Ut.type]++),Ut.highlighted&&!Ut.hidden&&this.highlightedNodes.add(Ct);this.labelGrid.organize();var Jt={},nn=ne.edges();for(ft=0,gt=nn.length;ft<gt;ft++){var Ln=nn[ft];kn=Object.assign({},ne.getEdgeAttributes(Ln)),ge.edgeReducer&&(kn=ge.edgeReducer(Ln,kn)),Jt[(Ut=xe(this.settings,0,kn)).type]=(Jt[Ut.type]||0)+1,this.edgeDataCache[Ln]=Ut,Ut.forceLabel&&!Ut.hidden&&this.edgesWithForcedLabels.push(Ln),this.settings.zIndex&&(Ut.zIndex<rt[0]&&(rt[0]=Ut.zIndex),Ut.zIndex>rt[1]&&(rt[1]=Ut.zIndex))}for(var Dn in this.edgePrograms){if(!this.edgePrograms.hasOwnProperty(Dn))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(Dn,'"!'));z||this.edgePrograms[Dn].allocate(Jt[Dn]||0),Jt[Dn]=0}for(this.settings.zIndex&&rt[0]!==rt[1]&&(nn=(0,te.zIndexOrdering)(rt,function(Dt){return $.edgeDataCache[Dt].zIndex},nn)),ft=0,gt=nn.length;ft<gt;ft++){var Ut=this.edgeDataCache[Ln=nn[ft]],xn=ne.extremities(Ln),bn=this.nodeDataCache[xn[0]],yn=this.nodeDataCache[xn[1]];this.edgePrograms[Ut.type].process(bn,yn,Ut,Ut.hidden||bn.hidden||yn.hidden,Jt[Ut.type]++)}for(var Dn in this.edgePrograms){var Ce=this.edgePrograms[Dn];!z&&"function"==typeof Ce.computeIndices&&Ce.computeIndices()}return this},ue.prototype.handleSettingsUpdate=function(){return this.camera.minRatio=this.settings.minCameraRatio,this.camera.maxRatio=this.settings.maxCameraRatio,this.camera.setState(this.camera.validateState(this.camera.getState())),this},ue.prototype._refresh=function(){return this.needToProcess?this.process():this.needToSoftProcess&&this.process(!0),this.needToProcess=!1,this.needToSoftProcess=!1,this.render(),this},ue.prototype._scheduleRefresh=function(){var z=this;return this.renderFrame||(this.renderFrame=(0,te.requestFrame)(function(){z._refresh(),z.renderFrame=null})),this},ue.prototype.renderLabels=function(){if(!this.settings.renderLabels)return this;var $,z=this.camera.getState();if(z.ratio>=1)$=new Set(this.graph.nodes());else{var ne=this.viewRectangle();$=new Set(this.quadtree.rectangle(ne.x1,1-ne.y1,ne.x2,1-ne.y2,ne.height))}var ge=this.labelGrid.getLabelsToDisplay(z.ratio,this.settings.labelDensity).concat(this.nodesWithForcedLabels);this.displayedLabels=new Set;for(var Ue=this.canvasContexts.labels,Re=0,rt=ge.length;Re<rt;Re++){var Pe=ge[Re],at=this.nodeDataCache[Pe];if(!this.displayedLabels.has(Pe)&&!at.hidden){var xt=this.framedGraphToViewport(at),He=xt.x,ft=xt.y,gt=this.scaleSize(at.size);!at.forceLabel&&gt<this.settings.labelRenderedSizeThreshold||!$.has(Pe)||(this.displayedLabels.add(Pe),this.settings.labelRenderer(Ue,D(D({key:Pe},at),{size:gt,x:He,y:ft}),this.settings))}}return this},ue.prototype.renderEdgeLabels=function(){if(!this.settings.renderEdgeLabels)return this;var z=this.canvasContexts.edgeLabels;z.clearRect(0,0,this.width,this.height);for(var $=(0,J.edgeLabelsToDisplayFromNodes)({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedLabels,highlightedNodes:this.highlightedNodes}).concat(this.edgesWithForcedLabels),ne=new Set,ge=0,Ue=$.length;ge<Ue;ge++){var Re=$[ge],rt=this.graph.extremities(Re),Pe=this.nodeDataCache[rt[0]],at=this.nodeDataCache[rt[1]],xt=this.edgeDataCache[Re];ne.has(Re)||xt.hidden||Pe.hidden||at.hidden||(this.settings.edgeLabelRenderer(z,D(D({key:Re},xt),{size:this.scaleSize(xt.size)}),D(D(D({key:rt[0]},Pe),this.framedGraphToViewport(Pe)),{size:this.scaleSize(Pe.size)}),D(D(D({key:rt[1]},at),this.framedGraphToViewport(at)),{size:this.scaleSize(at.size)}),this.settings),ne.add(Re))}return this},ue.prototype.renderHighlightedNodes=function(){var z=this,$=this.canvasContexts.hovers;$.clearRect(0,0,this.width,this.height);var ge=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&ge.push(this.hoveredNode),this.highlightedNodes.forEach(function(Pe){Pe!==z.hoveredNode&&ge.push(Pe)}),ge.forEach(function(Pe){return function(Pe){var at=z.nodeDataCache[Pe],xt=z.framedGraphToViewport(at),He=xt.x,ft=xt.y,gt=z.scaleSize(at.size);z.settings.hoverRenderer($,D(D({key:Pe},at),{size:gt,x:He,y:ft}),z.settings)}(Pe)});var Ue={};for(var Re in ge.forEach(function(Pe){var at=z.nodeDataCache[Pe].type;Ue[at]=(Ue[at]||0)+1}),this.hoverNodePrograms)this.hoverNodePrograms[Re].allocate(Ue[Re]||0),Ue[Re]=0;for(var Re in ge.forEach(function(Pe){var at=z.nodeDataCache[Pe];z.hoverNodePrograms[at.type].process(at,at.hidden,Ue[at.type]++)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.hoverNodePrograms){var rt=this.hoverNodePrograms[Re];rt.bind(),rt.bufferData(),rt.render({matrix:this.matrix,width:this.width,height:this.height,ratio:this.camera.ratio,correctionRatio:this.correctionRatio/this.camera.ratio,scalingRatio:this.pixelRatio})}},ue.prototype.scheduleHighlightedNodesRender=function(){var z=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=(0,te.requestFrame)(function(){z.renderHighlightedNodesFrame=null,z.renderHighlightedNodes(),z.renderEdgeLabels()}))},ue.prototype.render=function(){var z=this;this.emit("beforeRender");var $=function(){return z.emit("afterRender"),z};if(this.renderFrame&&((0,te.cancelFrame)(this.renderFrame),this.renderFrame=null,this.needToProcess=!1,this.needToSoftProcess=!1),this.resize(),this.clear(),this.updateCachedValues(),!this.graph.order)return $();var ne=this.mouseCaptor,ge=this.camera.isAnimated()||ne.isMoving||ne.draggedEvents||ne.currentWheelDirection,Ue=this.camera.getState(),Re=this.getDimensions(),rt=this.getGraphDimensions(),Pe=this.getSetting("stagePadding")||0;for(var at in this.matrix=(0,te.matrixFromCamera)(Ue,Re,rt,Pe),this.invMatrix=(0,te.matrixFromCamera)(Ue,Re,rt,Pe,!0),this.correctionRatio=(0,te.getMatrixImpact)(this.matrix,Ue,Re),this.nodePrograms)(xt=this.nodePrograms[at]).bind(),xt.bufferData(),xt.render({matrix:this.matrix,width:this.width,height:this.height,ratio:Ue.ratio,correctionRatio:this.correctionRatio/Ue.ratio,scalingRatio:this.pixelRatio});if(!this.settings.hideEdgesOnMove||!ge)for(var at in this.edgePrograms){var xt;(xt=this.edgePrograms[at]).bind(),xt.bufferData(),xt.render({matrix:this.matrix,width:this.width,height:this.height,ratio:Ue.ratio,correctionRatio:this.correctionRatio/Ue.ratio,scalingRatio:this.pixelRatio})}return this.settings.hideLabelsOnMove&&ge||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),$()},ue.prototype.updateCachedValues=function(){var z=this.camera.getState().ratio;this.cameraSizeRatio=Math.sqrt(z)},ue.prototype.getCamera=function(){return this.camera},ue.prototype.getContainer=function(){return this.container},ue.prototype.getGraph=function(){return this.graph},ue.prototype.getMouseCaptor=function(){return this.mouseCaptor},ue.prototype.getTouchCaptor=function(){return this.touchCaptor},ue.prototype.getDimensions=function(){return{width:this.width,height:this.height}},ue.prototype.getGraphDimensions=function(){var z=this.customBBox||this.nodeExtent;return{width:z.x[1]-z.x[0]||1,height:z.y[1]-z.y[0]||1}},ue.prototype.getNodeDisplayData=function(z){var $=this.nodeDataCache[z];return $?Object.assign({},$):void 0},ue.prototype.getEdgeDisplayData=function(z){var $=this.edgeDataCache[z];return $?Object.assign({},$):void 0},ue.prototype.getSettings=function(){return D({},this.settings)},ue.prototype.getSetting=function(z){return this.settings[z]},ue.prototype.setSetting=function(z,$){return this.settings[z]=$,(0,oe.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},ue.prototype.updateSetting=function(z,$){return this.settings[z]=$(this.settings[z]),(0,oe.validateSettings)(this.settings),this.handleSettingsUpdate(),this.needToProcess=!0,this._scheduleRefresh(),this},ue.prototype.resize=function(){var z=this.width,$=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=(0,te.getPixelRatio)(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.");this.height=1}if(z===this.width&&$===this.height)return this;for(var ne in this.emit("resize"),this.elements){var ge=this.elements[ne];ge.style.width=this.width+"px",ge.style.height=this.height+"px"}for(var ne in this.canvasContexts)this.elements[ne].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[ne].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[ne].scale(this.pixelRatio,this.pixelRatio);for(var ne in this.webGLContexts)this.elements[ne].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[ne].setAttribute("height",this.height*this.pixelRatio+"px"),this.webGLContexts[ne].viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio);return this},ue.prototype.clear=function(){return this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT),this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this},ue.prototype.refresh=function(){return this.needToProcess=!0,this._refresh(),this},ue.prototype.scheduleRefresh=function(){return this.needToProcess=!0,this._scheduleRefresh(),this},ue.prototype.getViewportZoomedState=function(z,$){var ne=this.camera.getState(),Ue=ne.angle,Re=ne.x,rt=ne.y,Pe=$/ne.ratio,at={x:this.width/2,y:this.height/2},xt=this.viewportToFramedGraph(z),He=this.viewportToFramedGraph(at);return{angle:Ue,x:(xt.x-He.x)*(1-Pe)+Re,y:(xt.y-He.y)*(1-Pe)+rt,ratio:$}},ue.prototype.viewRectangle=function(){var z=0*this.width/8,$=0*this.height/8,ne=this.viewportToFramedGraph({x:0-z,y:0-$}),ge=this.viewportToFramedGraph({x:this.width+z,y:0-$}),Ue=this.viewportToFramedGraph({x:0,y:this.height+$});return{x1:ne.x,y1:ne.y,x2:ge.x,y2:ge.y,height:ge.y-Ue.y}},ue.prototype.framedGraphToViewport=function(z,$){void 0===$&&($={});var ge=$.matrix?$.matrix:$.cameraState||$.viewportDimensions||$.graphDimensions?(0,te.matrixFromCamera)($.cameraState||this.camera.getState(),$.viewportDimensions||this.getDimensions(),$.graphDimensions||this.getGraphDimensions(),$.padding||this.getSetting("stagePadding")||0):this.matrix,Ue=(0,Q.multiplyVec2)(ge,z);return{x:(1+Ue.x)*this.width/2,y:(1-Ue.y)*this.height/2}},ue.prototype.viewportToFramedGraph=function(z,$){void 0===$&&($={});var ge=$.matrix?$.matrix:$.cameraState||$.viewportDimensions||!$.graphDimensions?(0,te.matrixFromCamera)($.cameraState||this.camera.getState(),$.viewportDimensions||this.getDimensions(),$.graphDimensions||this.getGraphDimensions(),$.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,Ue=(0,Q.multiplyVec2)(ge,{x:z.x/this.width*2-1,y:1-z.y/this.height*2});return isNaN(Ue.x)&&(Ue.x=0),isNaN(Ue.y)&&(Ue.y=0),Ue},ue.prototype.viewportToGraph=function(z,$){return void 0===$&&($={}),this.normalizationFunction.inverse(this.viewportToFramedGraph(z,$))},ue.prototype.graphToViewport=function(z,$){return void 0===$&&($={}),this.framedGraphToViewport(this.normalizationFunction(z),$)},ue.prototype.getBBox=function(){return(0,te.graphExtent)(this.graph)},ue.prototype.getCustomBBox=function(){return this.customBBox},ue.prototype.setCustomBBox=function(z){return this.customBBox=z,this._scheduleRefresh(),this},ue.prototype.kill=function(){var z=this.graph;this.emit("kill"),this.removeAllListeners(),this.camera.removeListener("updated",this.activeListeners.camera),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),z.removeListener("nodeAdded",this.activeListeners.dropNodeGraphUpdate),z.removeListener("nodeDropped",this.activeListeners.graphUpdate),z.removeListener("nodeAttributesUpdated",this.activeListeners.softGraphUpdate),z.removeListener("eachNodeAttributesUpdated",this.activeListeners.graphUpdate),z.removeListener("edgeAdded",this.activeListeners.graphUpdate),z.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),z.removeListener("edgeAttributesUpdated",this.activeListeners.softGraphUpdate),z.removeListener("eachEdgeAttributesUpdated",this.activeListeners.graphUpdate),z.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),z.removeListener("cleared",this.activeListeners.clearGraphUpdate),this.quadtree=new O.default,this.nodeDataCache={},this.edgeDataCache={},this.nodesWithForcedLabels=[],this.edgesWithForcedLabels=[],this.highlightedNodes.clear(),this.renderFrame&&((0,te.cancelFrame)(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&((0,te.cancelFrame)(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var $=this.container;$.firstChild;)$.removeChild($.firstChild)},ue.prototype.scaleSize=function(z){return z/this.cameraSizeRatio},ue.prototype.getCanvases=function(){return D({},this.elements)},ue}(q.TypedEventEmitter);be.default=Oe},57:function(Be,be,V){"use strict";var B,Y=this&&this.__extends||(B=function(W,P){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,q){O.__proto__=q}||function(O,q){for(var te in q)Object.prototype.hasOwnProperty.call(q,te)&&(O[te]=q[te])})(W,P)},function(W,P){if("function"!=typeof P&&null!==P)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function O(){this.constructor=W}B(W,P),W.prototype=null===P?Object.create(P):(O.prototype=P.prototype,new O)});Object.defineProperty(be,"__esModule",{value:!0}),be.TypedEventEmitter=void 0;var H=function(B){function W(){var P=B.call(this)||this;return P.rawEmitter=P,P}return Y(W,B),W}(V(9069).EventEmitter);be.TypedEventEmitter=H},2630:function(Be,be,V){"use strict";var Y=this&&this.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(be,"__esModule",{value:!0}),be.animateNodes=be.ANIMATE_DEFAULTS=void 0;var D=V(1699),H=Y(V(4539));be.ANIMATE_DEFAULTS={easing:"quadraticInOut",duration:150},be.animateNodes=function B(W,P,O,q){var te=Object.assign({},be.ANIMATE_DEFAULTS,O),J="function"==typeof te.easing?te.easing:H.default[te.easing],oe=Date.now(),se={};for(var Q in P){var U=P[Q];for(var ae in se[Q]={},U)se[Q][ae]=W.getNodeAttribute(Q,ae)}var xe=null,Oe=function(){xe=null;var re=(Date.now()-oe)/te.duration;if(re>=1){for(var ue in P){var z=P[ue];for(var $ in z)W.setNodeAttribute(ue,$,z[$])}"function"==typeof q&&q()}else{for(var ue in re=J(re),P){z=P[ue];var ne=se[ue];for(var $ in z)W.setNodeAttribute(ue,$,z[$]*re+ne[$]*(1-re))}xe=(0,D.requestFrame)(Oe)}};return Oe(),function(){xe&&(0,D.cancelFrame)(xe)}}},5147:(Be,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.HTML_COLORS=void 0,be.HTML_COLORS={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"}},4539:(Be,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.cubicInOut=be.cubicOut=be.cubicIn=be.quadraticInOut=be.quadraticOut=be.quadraticIn=be.linear=void 0,be.linear=function(q){return q},be.quadraticIn=function(q){return q*q},be.quadraticOut=function(q){return q*(2-q)},be.quadraticInOut=function(q){return(q*=2)<1?.5*q*q:-.5*(--q*(q-2)-1)},be.cubicIn=function(q){return q*q*q},be.cubicOut=function(q){return--q*q*q+1},be.cubicInOut=function(q){return(q*=2)<1?.5*q*q*q:.5*((q-=2)*q*q+2)},be.default={linear:be.linear,quadraticIn:be.quadraticIn,quadraticOut:be.quadraticOut,quadraticInOut:be.quadraticInOut,cubicIn:be.cubicIn,cubicOut:be.cubicOut,cubicInOut:be.cubicInOut}},3180:(Be,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.doEdgeCollideWithPoint=be.isPixelColored=void 0,be.isPixelColored=function V(D,H,B){var W=new Uint8Array(4);return D.readPixels(H,D.drawingBufferHeight-B,1,1,D.RGBA,D.UNSIGNED_BYTE,W),W[3]>0},be.doEdgeCollideWithPoint=function Y(D,H,B,W,P,O,q){return!(D<B-q&&D<P-q||H<W-q&&H<O-q||D>B+q&&D>P+q||H>W+q&&H>O+q)&&Math.abs((P-B)*(W-H)-(B-D)*(O-W))/Math.sqrt(Math.pow(P-B,2)+Math.pow(O-W,2))<q/2}},1699:function(Be,be,V){"use strict";var Y=this&&this.__read||function(He,ft){var gt="function"==typeof Symbol&&He[Symbol.iterator];if(!gt)return He;var kn,Dn,Ct=gt.call(He),Ut=[];try{for(;(void 0===ft||ft-- >0)&&!(kn=Ct.next()).done;)Ut.push(kn.value)}catch(Jt){Dn={error:Jt}}finally{try{kn&&!kn.done&&(gt=Ct.return)&&gt.call(Ct)}finally{if(Dn)throw Dn.error}}return Ut},D=this&&this.__importDefault||function(He){return He&&He.__esModule?He:{default:He}};Object.defineProperty(be,"__esModule",{value:!0}),be.validateGraph=be.canUse32BitsIndices=be.extractPixel=be.getMatrixImpact=be.matrixFromCamera=be.getCorrectionRatio=be.floatColor=be.floatArrayColor=be.parseColor=be.zIndexOrdering=be.createNormalizationFunction=be.graphExtent=be.getPixelRatio=be.createElement=be.cancelFrame=be.requestFrame=be.assignDeep=be.assign=be.isPlainObject=void 0;var H=D(V(6714)),B=V(7611),W=V(5147);function P(He){return"object"==typeof He&&null!==He&&He.constructor===Object}be.isPlainObject=P,be.assign=function O(He){for(var ft=[],gt=1;gt<arguments.length;gt++)ft[gt-1]=arguments[gt];He=He||{};for(var Ct=0,kn=ft.length;Ct<kn;Ct++){var Ut=ft[Ct];!Ut||Object.assign(He,Ut)}return He},be.assignDeep=function q(He){for(var ft=[],gt=1;gt<arguments.length;gt++)ft[gt-1]=arguments[gt];He=He||{};for(var Ct=0,kn=ft.length;Ct<kn;Ct++){var Ut=ft[Ct];if(Ut)for(var Dn in Ut)He[Dn]=P(Ut[Dn])?q(He[Dn],Ut[Dn]):Ut[Dn]}return He},be.requestFrame=typeof requestAnimationFrame<"u"?function(He){return requestAnimationFrame(He)}:function(He){return setTimeout(He,0)},be.cancelFrame=typeof cancelAnimationFrame<"u"?function(He){return cancelAnimationFrame(He)}:function(He){return clearTimeout(He)},be.createElement=function te(He,ft,gt){var Ct=document.createElement(He);if(ft)for(var kn in ft)Ct.style[kn]=ft[kn];if(gt)for(var kn in gt)Ct.setAttribute(kn,gt[kn]);return Ct},be.getPixelRatio=function J(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1},be.graphExtent=function oe(He){if(!He.order)return{x:[0,1],y:[0,1]};var ft=1/0,gt=-1/0,Ct=1/0,kn=-1/0;return He.forEachNode(function(Ut,Dn){var Jt=Dn.x,nn=Dn.y;Jt<ft&&(ft=Jt),Jt>gt&&(gt=Jt),nn<Ct&&(Ct=nn),nn>kn&&(kn=nn)}),{x:[ft,gt],y:[Ct,kn]}},be.createNormalizationFunction=function se(He){var ft=Y(He.x,2),gt=ft[0],Ct=ft[1],kn=Y(He.y,2),Ut=kn[0],Dn=kn[1],Jt=Math.max(Ct-gt,Dn-Ut),nn=(Ct+gt)/2,Ln=(Dn+Ut)/2;(0===Jt||Math.abs(Jt)===1/0||isNaN(Jt))&&(Jt=1),isNaN(nn)&&(nn=0),isNaN(Ln)&&(Ln=0);var xn=function(bn){return{x:.5+(bn.x-nn)/Jt,y:.5+(bn.y-Ln)/Jt}};return xn.applyTo=function(bn){bn.x=.5+(bn.x-nn)/Jt,bn.y=.5+(bn.y-Ln)/Jt},xn.inverse=function(bn){return{x:nn+Jt*(bn.x-.5),y:Ln+Jt*(bn.y-.5)}},xn.ratio=Jt,xn},be.zIndexOrdering=function Q(He,ft,gt){return gt.sort(function(Ct,kn){var Ut=ft(Ct)||0,Dn=ft(kn)||0;return Ut<Dn?-1:Ut>Dn?1:0})};var U=new Int8Array(4),ae=new Int32Array(U.buffer,0,1),xe=new Float32Array(U.buffer,0,1),Oe=/^\s*rgba?\s*\(/,re=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/;function ue(He){var ft=0,gt=0,Ct=0,kn=1;if("#"===He[0])4===He.length?(ft=parseInt(He.charAt(1)+He.charAt(1),16),gt=parseInt(He.charAt(2)+He.charAt(2),16),Ct=parseInt(He.charAt(3)+He.charAt(3),16)):(ft=parseInt(He.charAt(1)+He.charAt(2),16),gt=parseInt(He.charAt(3)+He.charAt(4),16),Ct=parseInt(He.charAt(5)+He.charAt(6),16));else if(Oe.test(He)){var Ut=He.match(re);Ut&&(ft=+Ut[1],gt=+Ut[2],Ct=+Ut[3],Ut[4]&&(kn=+Ut[4]))}return{r:ft,g:gt,b:Ct,a:kn}}be.parseColor=ue;var z={};for(var $ in W.HTML_COLORS)z[$]=ge(W.HTML_COLORS[$]),z[W.HTML_COLORS[$]]=z[$];function ge(He){if(typeof z[He]<"u")return z[He];var ft=ue(He),Ut=ft.a;ae[0]=4278190079&((Ut=255*Ut|0)<<24|ft.b<<16|ft.g<<8|ft.r);var Dn=xe[0];return z[He]=Dn,Dn}function Ue(He,ft){var gt=He.height/He.width,Ct=ft.height/ft.width;return gt<1&&Ct>1||gt>1&&Ct<1?1:Math.min(Math.max(Ct,1/Ct),Math.max(1/gt,gt))}be.floatArrayColor=function ne(He){var ft=ue(He=W.HTML_COLORS[He]||He);return new Float32Array([ft.r/255,ft.g/255,ft.b/255,ft.a])},be.floatColor=ge,be.getCorrectionRatio=Ue,be.matrixFromCamera=function Re(He,ft,gt,Ct,kn){var Ut=He.angle,Dn=He.ratio,Jt=He.x,nn=He.y,Ln=ft.width,xn=ft.height,bn=(0,B.identity)(),yn=Math.min(Ln,xn)-2*Ct,je=Ue(ft,gt);return kn?((0,B.multiply)(bn,(0,B.translate)((0,B.identity)(),Jt,nn)),(0,B.multiply)(bn,(0,B.scale)((0,B.identity)(),Dn)),(0,B.multiply)(bn,(0,B.rotate)((0,B.identity)(),Ut)),(0,B.multiply)(bn,(0,B.scale)((0,B.identity)(),Ln/yn/2/je,xn/yn/2/je))):((0,B.multiply)(bn,(0,B.scale)((0,B.identity)(),yn/Ln*2*je,yn/xn*2*je)),(0,B.multiply)(bn,(0,B.rotate)((0,B.identity)(),-Ut)),(0,B.multiply)(bn,(0,B.scale)((0,B.identity)(),1/Dn)),(0,B.multiply)(bn,(0,B.translate)((0,B.identity)(),-Jt,-nn))),bn},be.getMatrixImpact=function rt(He,ft,gt){var Ct=(0,B.multiplyVec2)(He,{x:Math.cos(ft.angle),y:Math.sin(ft.angle)},0),Ut=Ct.y;return 1/Math.sqrt(Math.pow(Ct.x,2)+Math.pow(Ut,2))/gt.width},be.extractPixel=function Pe(He,ft,gt,Ct){var kn=Ct||new Uint8Array(4);return He.readPixels(ft,gt,1,1,He.RGBA,He.UNSIGNED_BYTE,kn),kn},be.canUse32BitsIndices=function at(He){return typeof WebGL2RenderingContext<"u"&&He instanceof WebGL2RenderingContext||!!He.getExtension("OES_element_index_uint")},be.validateGraph=function xt(He){if(!(0,H.default)(He))throw new Error("Sigma: invalid graph instance.");He.forEachNode(function(ft,gt){if(!Number.isFinite(gt.x)||!Number.isFinite(gt.y))throw new Error("Sigma: Coordinates of node ".concat(ft," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}},7611:(Be,be)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0}),be.multiplyVec2=be.multiply=be.translate=be.rotate=be.scale=be.identity=void 0,be.identity=function V(){return Float32Array.of(1,0,0,0,1,0,0,0,1)},be.scale=function Y(P,O,q){return P[0]=O,P[4]="number"==typeof q?q:O,P},be.rotate=function D(P,O){var q=Math.sin(O),te=Math.cos(O);return P[0]=te,P[1]=q,P[3]=-q,P[4]=te,P},be.translate=function H(P,O,q){return P[6]=O,P[7]=q,P},be.multiply=function B(P,O){var q=P[0],te=P[1],J=P[2],oe=P[3],se=P[4],Q=P[5],U=P[6],ae=P[7],xe=P[8],Oe=O[0],re=O[1],ue=O[2],z=O[3],$=O[4],ne=O[5],ge=O[6],Ue=O[7],Re=O[8];return P[0]=Oe*q+re*oe+ue*U,P[1]=Oe*te+re*se+ue*ae,P[2]=Oe*J+re*Q+ue*xe,P[3]=z*q+$*oe+ne*U,P[4]=z*te+$*se+ne*ae,P[5]=z*J+$*Q+ne*xe,P[6]=ge*q+Ue*oe+Re*U,P[7]=ge*te+Ue*se+Re*ae,P[8]=ge*J+Ue*Q+Re*xe,P},be.multiplyVec2=function W(P,O,q){void 0===q&&(q=1);var ae=O.x,xe=O.y;return{x:ae*P[0]+xe*P[3]+P[6]*q,y:ae*P[1]+xe*P[4]+P[7]*q}}},295:(Be,be,V)=>{Be.exports=H;var Y=V(9069).EventEmitter;function H(){Y.call(this)}V(3894)(H,Y),H.Readable=V(3154),H.Writable=V(520),H.Duplex=V(1339),H.Transform=V(6025),H.PassThrough=V(6071),H.finished=V(7542),H.pipeline=V(954),H.Stream=H,H.prototype.pipe=function(B,W){var P=this;function O(U){B.writable&&!1===B.write(U)&&P.pause&&P.pause()}function q(){P.readable&&P.resume&&P.resume()}P.on("data",O),B.on("drain",q),!B._isStdio&&(!W||!1!==W.end)&&(P.on("end",J),P.on("close",oe));var te=!1;function J(){te||(te=!0,B.end())}function oe(){te||(te=!0,"function"==typeof B.destroy&&B.destroy())}function se(U){if(Q(),0===Y.listenerCount(this,"error"))throw U}function Q(){P.removeListener("data",O),B.removeListener("drain",q),P.removeListener("end",J),P.removeListener("close",oe),P.removeListener("error",se),B.removeListener("error",se),P.removeListener("end",Q),P.removeListener("close",Q),B.removeListener("close",Q)}return P.on("error",se),B.on("error",se),P.on("end",Q),P.on("close",Q),B.on("close",Q),B.emit("pipe",P),B}},3054:(Be,be,V)=>{"use strict";var Y=V(858).Buffer,D=Y.isEncoding||function(re){switch((re=""+re)&&re.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function W(re){var ue;switch(this.encoding=function B(re){var ue=function H(re){if(!re)return"utf8";for(var ue;;)switch(re){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return re;default:if(ue)return;re=(""+re).toLowerCase(),ue=!0}}(re);if("string"!=typeof ue&&(Y.isEncoding===D||!D(re)))throw new Error("Unknown encoding: "+re);return ue||re}(re),this.encoding){case"utf16le":this.text=se,this.end=Q,ue=4;break;case"utf8":this.fillLast=te,ue=4;break;case"base64":this.text=U,this.end=ae,ue=3;break;default:return this.write=xe,void(this.end=Oe)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Y.allocUnsafe(ue)}function P(re){return re<=127?0:re>>5==6?2:re>>4==14?3:re>>3==30?4:re>>6==2?-1:-2}function te(re){var ue=this.lastTotal-this.lastNeed,z=function q(re,ue,z){if(128!=(192&ue[0]))return re.lastNeed=0,"\ufffd";if(re.lastNeed>1&&ue.length>1){if(128!=(192&ue[1]))return re.lastNeed=1,"\ufffd";if(re.lastNeed>2&&ue.length>2&&128!=(192&ue[2]))return re.lastNeed=2,"\ufffd"}}(this,re);return void 0!==z?z:this.lastNeed<=re.length?(re.copy(this.lastChar,ue,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(re.copy(this.lastChar,ue,0,re.length),void(this.lastNeed-=re.length))}function se(re,ue){if((re.length-ue)%2==0){var z=re.toString("utf16le",ue);if(z){var $=z.charCodeAt(z.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=re[re.length-2],this.lastChar[1]=re[re.length-1],z.slice(0,-1)}return z}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=re[re.length-1],re.toString("utf16le",ue,re.length-1)}function Q(re){var ue=re&&re.length?this.write(re):"";return this.lastNeed?ue+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):ue}function U(re,ue){var z=(re.length-ue)%3;return 0===z?re.toString("base64",ue):(this.lastNeed=3-z,this.lastTotal=3,1===z?this.lastChar[0]=re[re.length-1]:(this.lastChar[0]=re[re.length-2],this.lastChar[1]=re[re.length-1]),re.toString("base64",ue,re.length-z))}function ae(re){var ue=re&&re.length?this.write(re):"";return this.lastNeed?ue+this.lastChar.toString("base64",0,3-this.lastNeed):ue}function xe(re){return re.toString(this.encoding)}function Oe(re){return re&&re.length?this.write(re):""}be.s=W,W.prototype.write=function(re){if(0===re.length)return"";var ue,z;if(this.lastNeed){if(void 0===(ue=this.fillLast(re)))return"";z=this.lastNeed,this.lastNeed=0}else z=0;return z<re.length?ue?ue+this.text(re,z):this.text(re,z):ue||""},W.prototype.end=function oe(re){var ue=re&&re.length?this.write(re):"";return this.lastNeed?ue+"\ufffd":ue},W.prototype.text=function J(re,ue){var z=function O(re,ue,z){var $=ue.length-1;if($<z)return 0;var ne=P(ue[$]);return ne>=0?(ne>0&&(re.lastNeed=ne-1),ne):--$<z||-2===ne?0:(ne=P(ue[$]))>=0?(ne>0&&(re.lastNeed=ne-2),ne):--$<z||-2===ne?0:(ne=P(ue[$]))>=0?(ne>0&&(2===ne?ne=0:re.lastNeed=ne-3),ne):0}(this,re,ue);if(!this.lastNeed)return re.toString("utf8",ue);this.lastTotal=z;var $=re.length-(z-this.lastNeed);return re.copy(this.lastChar,0,$),re.toString("utf8",ue,$)},W.prototype.fillLast=function(re){if(this.lastNeed<=re.length)return re.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);re.copy(this.lastChar,this.lastTotal-this.lastNeed,0,re.length),this.lastNeed-=re.length}},858:(Be,be,V)=>{var Y=V(3172),D=Y.Buffer;function H(W,P){for(var O in W)P[O]=W[O]}function B(W,P,O){return D(W,P,O)}D.from&&D.alloc&&D.allocUnsafe&&D.allocUnsafeSlow?Be.exports=Y:(H(Y,be),be.Buffer=B),B.prototype=Object.create(D.prototype),H(D,B),B.from=function(W,P,O){if("number"==typeof W)throw new TypeError("Argument must not be a number");return D(W,P,O)},B.alloc=function(W,P,O){if("number"!=typeof W)throw new TypeError("Argument must be a number");var q=D(W);return void 0!==P?"string"==typeof O?q.fill(P,O):q.fill(P):q.fill(0),q},B.allocUnsafe=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return D(W)},B.allocUnsafeSlow=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return Y.SlowBuffer(W)}},5570:function(Be,be,V){"use strict";var Y=this&&this.__extends||function(te,J){for(var oe in J)J.hasOwnProperty(oe)&&(te[oe]=J[oe]);function se(){this.constructor=te}te.prototype=null===J?Object.create(J):(se.prototype=J.prototype,new se)},D=V(5237),B={type:"change"},W={type:"start"},P={type:"end"},O=1e-6,q=function(te){function J(oe,se,Q){var U=te.call(this)||this;return U.object=oe,U.domElement=void 0!==se?se:document,U.window=void 0!==Q?Q:window,U.enabled=!0,U.target=new D.Vector3,U.minDistance=0,U.maxDistance=1/0,U.minZoom=0,U.maxZoom=1/0,U.minPolarAngle=0,U.maxPolarAngle=Math.PI,U.minAzimuthAngle=-1/0,U.maxAzimuthAngle=1/0,U.enableDamping=!1,U.dampingFactor=.25,U.enableZoom=!0,U.zoomSpeed=1,U.enableRotate=!0,U.rotateSpeed=1,U.enablePan=!0,U.keyPanSpeed=7,U.autoRotate=!1,U.autoRotateSpeed=2,U.enableKeys=!0,U.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},U.mouseButtons={ORBIT:D.MOUSE.LEFT,ZOOM:D.MOUSE.MIDDLE,PAN:D.MOUSE.RIGHT},U.target0=U.target.clone(),U.position0=U.object.position.clone(),U.zoom0=U.object.zoom,U.updateOffset=new D.Vector3,U.updateQuat=(new D.Quaternion).setFromUnitVectors(oe.up,new D.Vector3(0,1,0)),U.updateQuatInverse=U.updateQuat.clone().inverse(),U.updateLastPosition=new D.Vector3,U.updateLastQuaternion=new D.Quaternion,U.state=-1,U.scale=1,U.spherical=new D.Spherical,U.sphericalDelta=new D.Spherical,U.panOffset=new D.Vector3,U.zoomChanged=!1,U.rotateStart=new D.Vector2,U.rotateEnd=new D.Vector2,U.rotateDelta=new D.Vector2,U.panStart=new D.Vector2,U.panEnd=new D.Vector2,U.panDelta=new D.Vector2,U.dollyStart=new D.Vector2,U.dollyEnd=new D.Vector2,U.dollyDelta=new D.Vector2,U.panLeftV=new D.Vector3,U.panUpV=new D.Vector3,U.panInternalOffset=new D.Vector3,U.onMouseDown=function(ae){if(!1!==U.enabled){if(ae.preventDefault(),ae.button===U.mouseButtons.ORBIT){if(!1===U.enableRotate)return;U.rotateStart.set(ae.clientX,ae.clientY),U.state=0}else if(ae.button===U.mouseButtons.ZOOM){if(!1===U.enableZoom)return;U.dollyStart.set(ae.clientX,ae.clientY),U.state=1}else if(ae.button===U.mouseButtons.PAN){if(!1===U.enablePan)return;U.panStart.set(ae.clientX,ae.clientY),U.state=2}-1!==U.state&&(document.addEventListener("mousemove",U.onMouseMove,!1),document.addEventListener("mouseup",U.onMouseUp,!1),U.dispatchEvent(W))}},U.onMouseMove=function(ae){if(!1!==U.enabled)if(ae.preventDefault(),0===U.state){if(!1===U.enableRotate)return;U.rotateEnd.set(ae.clientX,ae.clientY),U.rotateDelta.subVectors(U.rotateEnd,U.rotateStart);var xe=U.domElement===document?U.domElement.body:U.domElement;U.rotateLeft(2*Math.PI*U.rotateDelta.x/xe.clientWidth*U.rotateSpeed),U.rotateUp(2*Math.PI*U.rotateDelta.y/xe.clientHeight*U.rotateSpeed),U.rotateStart.copy(U.rotateEnd),U.update()}else if(1===U.state){if(!1===U.enableZoom)return;U.dollyEnd.set(ae.clientX,ae.clientY),U.dollyDelta.subVectors(U.dollyEnd,U.dollyStart),U.dollyDelta.y>0?U.dollyIn(U.getZoomScale()):U.dollyDelta.y<0&&U.dollyOut(U.getZoomScale()),U.dollyStart.copy(U.dollyEnd),U.update()}else if(2===U.state){if(!1===U.enablePan)return;U.panEnd.set(ae.clientX,ae.clientY),U.panDelta.subVectors(U.panEnd,U.panStart),U.pan(U.panDelta.x,U.panDelta.y),U.panStart.copy(U.panEnd),U.update()}},U.onMouseUp=function(ae){!1!==U.enabled&&(document.removeEventListener("mousemove",U.onMouseMove,!1),document.removeEventListener("mouseup",U.onMouseUp,!1),U.dispatchEvent(P),U.state=-1)},U.onMouseWheel=function(ae){!1===U.enabled||!1===U.enableZoom||-1!==U.state&&0!==U.state||(ae.preventDefault(),ae.stopPropagation(),ae.deltaY<0?U.dollyOut(U.getZoomScale()):ae.deltaY>0&&U.dollyIn(U.getZoomScale()),U.update(),U.dispatchEvent(W),U.dispatchEvent(P))},U.onKeyDown=function(ae){if(!1!==U.enabled&&!1!==U.enableKeys&&!1!==U.enablePan)switch(ae.keyCode){case U.keys.UP:U.pan(0,U.keyPanSpeed),U.update();break;case U.keys.BOTTOM:U.pan(0,-U.keyPanSpeed),U.update();break;case U.keys.LEFT:U.pan(U.keyPanSpeed,0),U.update();break;case U.keys.RIGHT:U.pan(-U.keyPanSpeed,0),U.update()}},U.onTouchStart=function(ae){if(!1!==U.enabled){switch(ae.touches.length){case 1:if(!1===U.enableRotate)return;U.rotateStart.set(ae.touches[0].pageX,ae.touches[0].pageY),U.state=3;break;case 2:if(!1===U.enableZoom)return;var xe=ae.touches[0].pageX-ae.touches[1].pageX,Oe=ae.touches[0].pageY-ae.touches[1].pageY,re=Math.sqrt(xe*xe+Oe*Oe);U.dollyStart.set(0,re),U.state=4;break;case 3:if(!1===U.enablePan)return;U.panStart.set(ae.touches[0].pageX,ae.touches[0].pageY),U.state=5;break;default:U.state=-1}-1!==U.state&&U.dispatchEvent(W)}},U.onTouchMove=function(ae){if(!1!==U.enabled)switch(ae.preventDefault(),ae.stopPropagation(),ae.touches.length){case 1:if(!1===U.enableRotate||3!==U.state)return;U.rotateEnd.set(ae.touches[0].pageX,ae.touches[0].pageY),U.rotateDelta.subVectors(U.rotateEnd,U.rotateStart);var xe=U.domElement===document?U.domElement.body:U.domElement;U.rotateLeft(2*Math.PI*U.rotateDelta.x/xe.clientWidth*U.rotateSpeed),U.rotateUp(2*Math.PI*U.rotateDelta.y/xe.clientHeight*U.rotateSpeed),U.rotateStart.copy(U.rotateEnd),U.update();break;case 2:if(!1===U.enableZoom||4!==U.state)return;var Oe=ae.touches[0].pageX-ae.touches[1].pageX,re=ae.touches[0].pageY-ae.touches[1].pageY,ue=Math.sqrt(Oe*Oe+re*re);U.dollyEnd.set(0,ue),U.dollyDelta.subVectors(U.dollyEnd,U.dollyStart),U.dollyDelta.y>0?U.dollyOut(U.getZoomScale()):U.dollyDelta.y<0&&U.dollyIn(U.getZoomScale()),U.dollyStart.copy(U.dollyEnd),U.update();break;case 3:if(!1===U.enablePan||5!==U.state)return;U.panEnd.set(ae.touches[0].pageX,ae.touches[0].pageY),U.panDelta.subVectors(U.panEnd,U.panStart),U.pan(U.panDelta.x,U.panDelta.y),U.panStart.copy(U.panEnd),U.update();break;default:U.state=-1}},U.onTouchEnd=function(ae){!1!==U.enabled&&(U.dispatchEvent(P),U.state=-1)},U.onContextMenu=function(ae){ae.preventDefault()},U.domElement.addEventListener("contextmenu",U.onContextMenu,!1),U.domElement.addEventListener("mousedown",U.onMouseDown,!1),U.domElement.addEventListener("wheel",U.onMouseWheel,!1),U.domElement.addEventListener("touchstart",U.onTouchStart,!1),U.domElement.addEventListener("touchend",U.onTouchEnd,!1),U.domElement.addEventListener("touchmove",U.onTouchMove,!1),U.window.addEventListener("keydown",U.onKeyDown,!1),U.update(),U}return Y(J,te),J.prototype.update=function(){var oe=this.object.position;return this.updateOffset.copy(oe).sub(this.target),this.updateOffset.applyQuaternion(this.updateQuat),this.spherical.setFromVector3(this.updateOffset),this.autoRotate&&-1===this.state&&this.rotateLeft(this.getAutoRotationAngle()),this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi,this.spherical.theta=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,this.spherical.theta)),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius*=this.scale,this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius)),this.target.add(this.panOffset),this.updateOffset.setFromSpherical(this.spherical),this.updateOffset.applyQuaternion(this.updateQuatInverse),oe.copy(this.target).add(this.updateOffset),this.object.lookAt(this.target),!0===this.enableDamping?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.panOffset.set(0,0,0),!!(this.zoomChanged||this.updateLastPosition.distanceToSquared(this.object.position)>O||8*(1-this.updateLastQuaternion.dot(this.object.quaternion))>O)&&(this.dispatchEvent(B),this.updateLastPosition.copy(this.object.position),this.updateLastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0)},J.prototype.panLeft=function(oe,se){this.panLeftV.setFromMatrixColumn(se,0),this.panLeftV.multiplyScalar(-oe),this.panOffset.add(this.panLeftV)},J.prototype.panUp=function(oe,se){this.panUpV.setFromMatrixColumn(se,1),this.panUpV.multiplyScalar(oe),this.panOffset.add(this.panUpV)},J.prototype.pan=function(oe,se){var Q=this.domElement===document?this.domElement.body:this.domElement;if(this.object instanceof D.PerspectiveCamera){this.panInternalOffset.copy(this.object.position).sub(this.target);var ae=this.panInternalOffset.length();ae*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*oe*ae/Q.clientHeight,this.object.matrix),this.panUp(2*se*ae/Q.clientHeight,this.object.matrix)}else this.object instanceof D.OrthographicCamera?(this.panLeft(oe*(this.object.right-this.object.left)/this.object.zoom/Q.clientWidth,this.object.matrix),this.panUp(se*(this.object.top-this.object.bottom)/this.object.zoom/Q.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)},J.prototype.dollyIn=function(oe){this.object instanceof D.PerspectiveCamera?this.scale/=oe:this.object instanceof D.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*oe)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},J.prototype.dollyOut=function(oe){this.object instanceof D.PerspectiveCamera?this.scale*=oe:this.object instanceof D.OrthographicCamera?(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/oe)),this.object.updateProjectionMatrix(),this.zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)},J.prototype.getAutoRotationAngle=function(){return 2*Math.PI/60/60*this.autoRotateSpeed},J.prototype.getZoomScale=function(){return Math.pow(.95,this.zoomSpeed)},J.prototype.rotateLeft=function(oe){this.sphericalDelta.theta-=oe},J.prototype.rotateUp=function(oe){this.sphericalDelta.phi-=oe},J.prototype.getPolarAngle=function(){return this.spherical.phi},J.prototype.getAzimuthalAngle=function(){return this.spherical.theta},J.prototype.dispose=function(){this.domElement.removeEventListener("contextmenu",this.onContextMenu,!1),this.domElement.removeEventListener("mousedown",this.onMouseDown,!1),this.domElement.removeEventListener("wheel",this.onMouseWheel,!1),this.domElement.removeEventListener("touchstart",this.onTouchStart,!1),this.domElement.removeEventListener("touchend",this.onTouchEnd,!1),this.domElement.removeEventListener("touchmove",this.onTouchMove,!1),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this.window.removeEventListener("keydown",this.onKeyDown,!1)},J.prototype.reset=function(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(B),this.update(),this.state=-1},Object.defineProperty(J.prototype,"center",{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target},enumerable:!0,configurable:!0}),Object.defineProperty(J.prototype,"noZoom",{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(oe){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!oe},enumerable:!0,configurable:!0}),J}(D.EventDispatcher);be.OrbitControls=q},5237:(Be,be,V)=>{"use strict";function Y(){}V.r(be),V.d(be,{AddEquation:()=>at,AddOperation:()=>Me,AdditiveBlending:()=>ge,AlphaFormat:()=>fl,AlwaysDepth:()=>Dt,AmbientLight:()=>Yg,AnimationClip:()=>Tl,AnimationMixer:()=>ng,AnimationObjectGroup:()=>gc,AnimationUtils:()=>pc,ArcCurve:()=>_p,ArrowHelper:()=>Oc,Audio:()=>mh,AudioAnalyser:()=>zm,AudioContext:()=>vp,AudioListener:()=>Bm,AudioLoader:()=>eg,AxisHelper:()=>Rf,BackSide:()=>U,BasicDepthPacking:()=>gv,BasicShadowMap:()=>J,BinaryTextureLoader:()=>zl,BlendingMode:()=>Pe,Bone:()=>Pm,BooleanKeyframeTrack:()=>Kg,BoundingBoxHelper:()=>Wy,Box2:()=>sd,Box3:()=>Es,BoxBufferGeometry:()=>Nl,BoxGeometry:()=>Al,BoxHelper:()=>og,BufferAttribute:()=>fr,BufferGeometry:()=>Er,BufferGeometryLoader:()=>ph,ByteType:()=>td,Cache:()=>yu,Camera:()=>za,CameraHelper:()=>nm,CanvasRenderer:()=>$y,CanvasTexture:()=>cp,CatmullRomCurve3:()=>Hm,CineonToneMapping:()=>Hs,CircleBufferGeometry:()=>La,CircleGeometry:()=>Bl,ClampToEdgeWrapping:()=>lc,Clock:()=>Um,ClosedSplineCurve3:()=>jm,Color:()=>jr,ColorKeyframeTrack:()=>fp,CompressedTexture:()=>Rc,CompressedTextureLoader:()=>km,ConeBufferGeometry:()=>Jp,ConeGeometry:()=>Qp,CubeCamera:()=>Ul,CubeGeometry:()=>Al,CubeReflectionMapping:()=>bs,CubeRefractionMapping:()=>ca,CubeTexture:()=>Rd,CubeTextureLoader:()=>Om,CubeUVReflectionMapping:()=>ql,CubeUVRefractionMapping:()=>Gf,CubicBezierCurve:()=>Yd,CubicBezierCurve3:()=>zy,CubicInterpolant:()=>Hh,CullFaceBack:()=>W,CullFaceFront:()=>P,CullFaceFrontBack:()=>O,CullFaceNone:()=>B,Curve:()=>Vl,CurvePath:()=>Jg,CurveUtils:()=>nc,CustomBlending:()=>rt,CylinderBufferGeometry:()=>Sf,CylinderGeometry:()=>Jl,Cylindrical:()=>yl,DataTexture:()=>es,DataTextureLoader:()=>tc,DefaultLoadingManager:()=>dc,DepthFormat:()=>it,DepthStencilFormat:()=>Ye,DepthTexture:()=>qg,DirectionalLight:()=>Tf,DirectionalLightHelper:()=>sg,DirectionalLightShadow:()=>Ef,DiscreteInterpolant:()=>Uu,DodecahedronBufferGeometry:()=>dh,DodecahedronGeometry:()=>Yp,DoubleSide:()=>ae,DstAlphaFactor:()=>Ln,DstColorFactor:()=>bn,DynamicBufferAttribute:()=>Ov,EdgesGeometry:()=>vl,EdgesHelper:()=>X_,EllipseCurve:()=>dd,EqualDepth:()=>$i,EquirectangularReflectionMapping:()=>er,EquirectangularRefractionMapping:()=>tl,Euler:()=>Ps,EventDispatcher:()=>Y,ExtrudeGeometry:()=>Jc,Face3:()=>Po,Face4:()=>Gm,FaceColors:()=>ue,FaceNormalsHelper:()=>jh,FileLoader:()=>Io,FlatShading:()=>xe,Float32Attribute:()=>Gy,Float32BufferAttribute:()=>rs,Float64Attribute:()=>q_,Float64BufferAttribute:()=>Dc,FloatType:()=>Pd,Fog:()=>Lc,FogExp2:()=>Oh,Font:()=>em,FontLoader:()=>Kd,FrontFaceDirectionCCW:()=>te,FrontFaceDirectionCW:()=>q,FrontSide:()=>Q,Frustum:()=>Lo,GammaEncoding:()=>zp,Geometry:()=>Ts,GeometryIdCount:()=>Hg,GeometryUtils:()=>rm,GreaterDepth:()=>Pt,GreaterEqualDepth:()=>At,GridHelper:()=>rg,Group:()=>ap,HalfFloatType:()=>xc,HemisphereLight:()=>fc,HemisphereLightHelper:()=>vd,IcosahedronBufferGeometry:()=>Wd,IcosahedronGeometry:()=>up,ImageLoader:()=>Xg,ImageUtils:()=>Bv,ImmediateRenderObject:()=>Pf,InstancedBufferAttribute:()=>Zd,InstancedBufferGeometry:()=>Wu,InstancedInterleavedBuffer:()=>vh,Int16Attribute:()=>Oa,Int16BufferAttribute:()=>op,Int32Attribute:()=>$h,Int32BufferAttribute:()=>_f,Int8Attribute:()=>xu,Int8BufferAttribute:()=>Rh,IntType:()=>nh,InterleavedBuffer:()=>pd,InterleavedBufferAttribute:()=>Lf,Interpolant:()=>El,InterpolateDiscrete:()=>Gs,InterpolateLinear:()=>bo,InterpolateSmooth:()=>xo,JSONLoader:()=>Qg,KeyframeTrack:()=>Hu,LOD:()=>sa,LatheBufferGeometry:()=>yo,LatheGeometry:()=>If,Layers:()=>$p,LensFlare:()=>uh,LessDepth:()=>Rt,LessEqualDepth:()=>ci,Light:()=>Js,LightShadow:()=>fh,Line:()=>mu,Line3:()=>Fl,LineBasicMaterial:()=>al,LineCurve:()=>gh,LineCurve3:()=>cC,LineDashedMaterial:()=>hc,LinePieces:()=>kv,LineSegments:()=>vo,LineStrip:()=>kf,LinearEncoding:()=>ts,LinearFilter:()=>Aa,LinearInterpolant:()=>qd,LinearMipMapLinearFilter:()=>Pu,LinearMipMapNearestFilter:()=>Ih,LinearToneMapping:()=>vn,Loader:()=>eu,LoadingManager:()=>Sl,LogLuvEncoding:()=>Dg,LoopOnce:()=>mr,LoopPingPong:()=>sr,LoopRepeat:()=>dr,LuminanceAlphaFormat:()=>nd,LuminanceFormat:()=>jf,MOUSE:()=>H,Material:()=>Ks,MaterialLoader:()=>Zg,Math:()=>xs,Matrix3:()=>It,Matrix4:()=>ms,MaxEquation:()=>gt,Mesh:()=>ba,MeshBasicMaterial:()=>Ba,MeshDepthMaterial:()=>mi,MeshFaceMaterial:()=>uC,MeshLambertMaterial:()=>hp,MeshNormalMaterial:()=>ec,MeshPhongMaterial:()=>Il,MeshPhysicalMaterial:()=>Vu,MeshStandardMaterial:()=>zu,MeshToonMaterial:()=>Pa,MinEquation:()=>ft,MirroredRepeatWrapping:()=>Ah,MixOperation:()=>Te,MorphBlendMesh:()=>aa,MultiMaterial:()=>vu,MultiplyBlending:()=>Re,MultiplyOperation:()=>Je,NearestFilter:()=>qa,NearestMipMapLinearFilter:()=>cu,NearestMipMapNearestFilter:()=>Ld,NeverDepth:()=>Ce,NoBlending:()=>$,NoColors:()=>re,NoToneMapping:()=>Ot,NormalBlending:()=>ne,NotEqualDepth:()=>un,NumberKeyframeTrack:()=>Cu,Object3D:()=>_r,ObjectLoader:()=>pp,OctahedronBufferGeometry:()=>Qc,OctahedronGeometry:()=>ld,OneFactor:()=>kn,OneMinusDstAlphaFactor:()=>xn,OneMinusDstColorFactor:()=>yn,OneMinusSrcAlphaFactor:()=>nn,OneMinusSrcColorFactor:()=>Dn,OrthographicCamera:()=>Bd,PCFShadowMap:()=>oe,PCFSoftShadowMap:()=>se,ParametricBufferGeometry:()=>Hd,ParametricGeometry:()=>Gd,Particle:()=>Uy,ParticleBasicMaterial:()=>j_,ParticleSystem:()=>G_,ParticleSystemMaterial:()=>Hy,Path:()=>ss,PerspectiveCamera:()=>wl,Plane:()=>ut,PlaneBufferGeometry:()=>ra,PlaneGeometry:()=>Rm,PointCloud:()=>Vy,PointCloudMaterial:()=>W_,PointLight:()=>_u,PointLightHelper:()=>md,Points:()=>js,PointsMaterial:()=>Pc,PolarGridHelper:()=>ju,PolyhedronBufferGeometry:()=>Ql,PolyhedronGeometry:()=>zo,PositionalAudio:()=>tg,Projector:()=>jy,PropertyBinding:()=>ka,PropertyMixer:()=>kc,QuadraticBezierCurve:()=>fd,QuadraticBezierCurve3:()=>im,Quaternion:()=>kl,QuaternionKeyframeTrack:()=>Xd,QuaternionLinearInterpolant:()=>ha,REVISION:()=>D,RGBADepthPacking:()=>Ay,RGBAFormat:()=>nl,RGBA_PVRTC_2BPPV1_Format:()=>ti,RGBA_PVRTC_4BPPV1_Format:()=>yi,RGBA_S3TC_DXT1_Format:()=>Se,RGBA_S3TC_DXT3_Format:()=>$e,RGBA_S3TC_DXT5_Format:()=>_t,RGBDEncoding:()=>pv,RGBEEncoding:()=>gi,RGBEFormat:()=>Ge,RGBFormat:()=>wc,RGBM16Encoding:()=>wo,RGBM7Encoding:()=>Ls,RGB_ETC1_Format:()=>di,RGB_PVRTC_2BPPV1_Format:()=>In,RGB_PVRTC_4BPPV1_Format:()=>zt,RGB_S3TC_DXT1_Format:()=>he,RawShaderMaterial:()=>Ua,Ray:()=>ia,Raycaster:()=>tu,RectAreaLight:()=>Ra,RectAreaLightHelper:()=>Qd,ReinhardToneMapping:()=>ii,RepeatWrapping:()=>th,ReverseSubtractEquation:()=>He,RingBufferGeometry:()=>Os,RingGeometry:()=>Qi,Scene:()=>Fh,SceneUtils:()=>cl,ShaderChunk:()=>$s,ShaderLib:()=>Mc,ShaderMaterial:()=>Zc,ShadowMaterial:()=>$d,Shape:()=>Gu,ShapeBufferGeometry:()=>Kp,ShapeGeometry:()=>Zp,ShapePath:()=>mp,ShapeUtils:()=>Da,ShortType:()=>dl,Skeleton:()=>ad,SkeletonHelper:()=>Wh,SkinnedMesh:()=>$g,SmoothShading:()=>Oe,Sphere:()=>wt,SphereBufferGeometry:()=>oa,SphereGeometry:()=>Vo,Spherical:()=>tm,SphericalReflectionMapping:()=>$l,Spline:()=>H_,SplineCurve:()=>bu,SplineCurve3:()=>By,SpotLight:()=>Uh,SpotLightHelper:()=>Gh,SpotLightShadow:()=>dp,Sprite:()=>gu,SpriteMaterial:()=>Fu,SrcAlphaFactor:()=>Jt,SrcAlphaSaturateFactor:()=>je,SrcColorFactor:()=>Ut,StereoCamera:()=>Nm,StringKeyframeTrack:()=>Fm,SubtractEquation:()=>xt,SubtractiveBlending:()=>Ue,TetrahedronBufferGeometry:()=>ll,TetrahedronGeometry:()=>Nh,TextGeometry:()=>ud,Texture:()=>Wo,TextureFilter:()=>ed,TextureLoader:()=>Vh,TextureMapping:()=>Wf,TextureWrapping:()=>Lu,TorusBufferGeometry:()=>Nu,TorusGeometry:()=>zh,TorusKnotBufferGeometry:()=>Za,TorusKnotGeometry:()=>cd,Triangle:()=>Ca,TriangleFanDrawMode:()=>hs,TriangleStripDrawMode:()=>Ru,TrianglesDrawMode:()=>Xa,TubeBufferGeometry:()=>jd,TubeGeometry:()=>Bh,UVMapping:()=>so,Uint16Attribute:()=>Fv,Uint16BufferAttribute:()=>Nd,Uint32Attribute:()=>Nv,Uint32BufferAttribute:()=>Ou,Uint8Attribute:()=>$_,Uint8BufferAttribute:()=>gl,Uint8ClampedAttribute:()=>da,Uint8ClampedBufferAttribute:()=>Fd,Uncharted2ToneMapping:()=>Fi,Uniform:()=>Vm,UniformsLib:()=>as,UniformsUtils:()=>il,UnsignedByteType:()=>hf,UnsignedInt248Type:()=>pf,UnsignedIntType:()=>ff,UnsignedShort4444Type:()=>Tg,UnsignedShort5551Type:()=>Sh,UnsignedShort565Type:()=>to,UnsignedShortType:()=>df,Vector2:()=>Xi,Vector3:()=>Zt,Vector4:()=>jo,VectorKeyframeTrack:()=>Mf,Vertex:()=>Wm,VertexColors:()=>z,VertexNormalsHelper:()=>ig,VideoTexture:()=>lp,WebGLRenderTarget:()=>Ac,WebGLRenderTargetCube:()=>id,WebGLRenderer:()=>Ud,WireframeGeometry:()=>hh,WireframeHelper:()=>hC,WrapAroundEnding:()=>us,XHRLoader:()=>Jd,ZeroCurvatureEnding:()=>cs,ZeroFactor:()=>Ct,ZeroSlopeEnding:()=>Ia,sRGBEncoding:()=>Mg}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(a){return a<0?-1:a>0?1:+a}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(a),g=1;g<arguments.length;g++){var y=arguments[g];if(null!=y)for(var A in y)Object.prototype.hasOwnProperty.call(y,A)&&(h[A]=y[A])}return h}),Object.assign(Y.prototype,{addEventListener:function(a,h){void 0===this._listeners&&(this._listeners={});var g=this._listeners;void 0===g[a]&&(g[a]=[]),-1===g[a].indexOf(h)&&g[a].push(h)},hasEventListener:function(a,h){if(void 0===this._listeners)return!1;var g=this._listeners;return void 0!==g[a]&&-1!==g[a].indexOf(h)},removeEventListener:function(a,h){if(void 0!==this._listeners){var y=this._listeners[a];if(void 0!==y){var A=y.indexOf(h);-1!==A&&y.splice(A,1)}}},dispatchEvent:function(a){if(void 0!==this._listeners){var g=this._listeners[a.type];if(void 0!==g){a.target=this;var y=[],A=0,T=g.length;for(A=0;A<T;A++)y[A]=g[A];for(A=0;A<T;A++)y[A].call(this,a)}}}});var y,a,h,g,D="83",H={LEFT:0,MIDDLE:1,RIGHT:2},B=0,W=1,P=2,O=3,q=0,te=1,J=0,oe=1,se=2,Q=0,U=1,ae=2,xe=1,Oe=2,re=0,ue=1,z=2,$=0,ne=1,ge=2,Ue=3,Re=4,rt=5,Pe={NoBlending:$,NormalBlending:ne,AdditiveBlending:ge,SubtractiveBlending:Ue,MultiplyBlending:Re,CustomBlending:rt},at=100,xt=101,He=102,ft=103,gt=104,Ct=200,kn=201,Ut=202,Dn=203,Jt=204,nn=205,Ln=206,xn=207,bn=208,yn=209,je=210,Ce=0,Dt=1,Rt=2,ci=3,$i=4,At=5,Pt=6,un=7,Je=0,Te=1,Me=2,Ot=0,vn=1,ii=2,Fi=3,Hs=4,so=300,bs=301,ca=302,er=303,tl=304,$l=305,ql=306,Gf=307,Wf={UVMapping:so,CubeReflectionMapping:bs,CubeRefractionMapping:ca,EquirectangularReflectionMapping:er,EquirectangularRefractionMapping:tl,SphericalReflectionMapping:$l,CubeUVReflectionMapping:ql,CubeUVRefractionMapping:Gf},th=1e3,lc=1001,Ah=1002,Lu={RepeatWrapping:th,ClampToEdgeWrapping:lc,MirroredRepeatWrapping:Ah},qa=1003,Ld=1004,cu=1005,Aa=1006,Ih=1007,Pu=1008,ed={NearestFilter:qa,NearestMipMapNearestFilter:Ld,NearestMipMapLinearFilter:cu,LinearFilter:Aa,LinearMipMapNearestFilter:Ih,LinearMipMapLinearFilter:Pu},hf=1009,td=1010,dl=1011,df=1012,nh=1013,ff=1014,Pd=1015,xc=1016,Tg=1017,Sh=1018,to=1019,pf=1020,fl=1021,wc=1022,nl=1023,jf=1024,nd=1025,Ge=nl,it=1026,Ye=1027,he=2001,Se=2002,$e=2003,_t=2004,zt=2100,In=2101,yi=2102,ti=2103,di=2151,mr=2200,dr=2201,sr=2202,Gs=2300,bo=2301,xo=2302,cs=2400,Ia=2401,us=2402,Xa=0,Ru=1,hs=2,ts=3e3,Mg=3001,zp=3007,gi=3002,Dg=3003,Ls=3004,wo=3005,pv=3006,gv=3200,Ay=3201,xs={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),h=new Array(36),g=0,function(){for(var T=0;T<36;T++)8===T||13===T||18===T||23===T?h[T]="-":14===T?h[T]="4":(g<=2&&(g=33554432+16777216*Math.random()|0),y=15&g,g>>=4,h[T]=a[19===T?3&y|8:y]);return h.join("")}),clamp:function(a,h,g){return Math.max(h,Math.min(g,a))},euclideanModulo:function(a,h){return(a%h+h)%h},mapLinear:function(a,h,g,y,A){return y+(a-h)*(A-y)/(g-h)},lerp:function(a,h,g){return(1-g)*a+g*h},smoothstep:function(a,h,g){return a<=h?0:a>=g?1:(a=(a-h)/(g-h))*a*(3-2*a)},smootherstep:function(a,h,g){return a<=h?0:a>=g?1:(a=(a-h)/(g-h))*a*a*(a*(6*a-15)+10)},randInt:function(a,h){return a+Math.floor(Math.random()*(h-a+1))},randFloat:function(a,h){return a+Math.random()*(h-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*xs.DEG2RAD},radToDeg:function(a){return a*xs.RAD2DEG},isPowerOfTwo:function(a){return 0==(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){return a--,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,++a}};function Xi(a,h){this.x=a||0,this.y=h||0}Xi.prototype={constructor:Xi,isVector2:!0,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,h){return this.x=a,this.y=h,this},setScalar:function(a){return this.x=a,this.y=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setComponent:function(a,h){switch(a){case 0:this.x=h;break;case 1:this.y=h;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,h){return void 0!==h?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,h)):(this.x+=a.x,this.y+=a.y,this)},addScalar:function(a){return this.x+=a,this.y+=a,this},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this},addScaledVector:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this},sub:function(a,h){return void 0!==h?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,h)):(this.x-=a.x,this.y-=a.y,this)},subScalar:function(a){return this.x-=a,this.y-=a,this},subVectors:function(a,h){return this.x=a.x-h.x,this.y=a.y-h.y,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a):(this.x=0,this.y=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this},clamp:function(a,h){return this.x=Math.max(a.x,Math.min(h.x,this.x)),this.y=Math.max(a.y,Math.min(h.y,this.y)),this},clampScalar:function(){var a,h;return function(y,A){return void 0===a&&(a=new Xi,h=new Xi),a.set(y,y),h.set(A,A),this.clamp(a,h)}}(),clampLength:function(a,h){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(h,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var a=Math.atan2(this.y,this.x);return a<0&&(a+=2*Math.PI),a},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var h=this.x-a.x,g=this.y-a.y;return h*h+g*g},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,h){return this.x+=(a.x-this.x)*h,this.y+=(a.y-this.y)*h,this},lerpVectors:function(a,h,g){return this.subVectors(h,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,h){return void 0===h&&(h=0),this.x=a[h],this.y=a[h+1],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.x,a[h+1]=this.y,a},fromAttribute:function(a,h,g){return void 0!==g&&console.warn("THREE.Vector2: offset has been removed from .fromAttribute()."),this.x=a.getX(h),this.y=a.getY(h),this},rotateAround:function(a,h){var g=Math.cos(h),y=Math.sin(h),A=this.x-a.x,T=this.y-a.y;return this.x=A*g-T*y+a.x,this.y=A*y+T*g+a.y,this}};var Iy=0;function Wo(a,h,g,y,A,T,R,N,ie,ee){Object.defineProperty(this,"id",{value:Iy++}),this.uuid=xs.generateUUID(),this.name="",this.image=void 0!==a?a:Wo.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==h?h:Wo.DEFAULT_MAPPING,this.wrapS=void 0!==g?g:lc,this.wrapT=void 0!==y?y:lc,this.magFilter=void 0!==A?A:Aa,this.minFilter=void 0!==T?T:Pu,this.anisotropy=void 0!==ie?ie:1,this.format=void 0!==R?R:nl,this.type=void 0!==N?N:hf,this.offset=new Xi(0,0),this.repeat=new Xi(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==ee?ee:ts,this.version=0,this.onUpdate=null}function jo(a,h,g,y){this.x=a||0,this.y=h||0,this.z=g||0,this.w=void 0!==y?y:1}function Ac(a,h,g){this.uuid=xs.generateUUID(),this.width=a,this.height=h,this.scissor=new jo(0,0,a,h),this.scissorTest=!1,this.viewport=new jo(0,0,a,h),void 0===(g=g||{}).minFilter&&(g.minFilter=Aa),this.texture=new Wo(void 0,void 0,g.wrapS,g.wrapT,g.magFilter,g.minFilter,g.format,g.type,g.anisotropy,g.encoding),this.depthBuffer=void 0===g.depthBuffer||g.depthBuffer,this.stencilBuffer=void 0===g.stencilBuffer||g.stencilBuffer,this.depthTexture=void 0!==g.depthTexture?g.depthTexture:null}function id(a,h,g){Ac.call(this,a,h,g),this.activeCubeFace=0,this.activeMipMapLevel=0}function kl(a,h,g,y){this._x=a||0,this._y=h||0,this._z=g||0,this._w=void 0!==y?y:1}function Zt(a,h,g){this.x=a||0,this.y=h||0,this.z=g||0}function ms(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Rd(a,h,g,y,A,T,R,N,ie,ee){Wo.call(this,a=void 0!==a?a:[],h=void 0!==h?h:bs,g,y,A,T,R,N,ie,ee),this.flipY=!1}Wo.DEFAULT_IMAGE=void 0,Wo.DEFAULT_MAPPING=so,Wo.prototype={constructor:Wo,isTexture:!0,set needsUpdate(a){!0===a&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this},toJSON:function(a){if(void 0!==a.textures[this.uuid])return a.textures[this.uuid];var g={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var y=this.image;void 0===y.uuid&&(y.uuid=xs.generateUUID()),void 0===a.images[y.uuid]&&(a.images[y.uuid]={uuid:y.uuid,url:function h(A){var T;return void 0!==A.toDataURL?T=A:((T=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=A.width,T.height=A.height,T.getContext("2d").drawImage(A,0,0,A.width,A.height)),T.width>2048||T.height>2048?T.toDataURL("image/jpeg",.6):T.toDataURL("image/png")}(y)}),g.image=y.uuid}return a.textures[this.uuid]=g,g},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(a){if(this.mapping===so){if(a.multiply(this.repeat),a.add(this.offset),a.x<0||a.x>1)switch(this.wrapS){case th:a.x=a.x-Math.floor(a.x);break;case lc:a.x=a.x<0?0:1;break;case Ah:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case th:a.y=a.y-Math.floor(a.y);break;case lc:a.y=a.y<0?0:1;break;case Ah:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}this.flipY&&(a.y=1-a.y)}}},Object.assign(Wo.prototype,Y.prototype),jo.prototype={constructor:jo,isVector4:!0,set:function(a,h,g,y){return this.x=a,this.y=h,this.z=g,this.w=y,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this.w=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setW:function(a){return this.w=a,this},setComponent:function(a,h){switch(a){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;case 3:this.w=h;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},add:function(a,h){return void 0!==h?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,h)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this.z=a.z+h.z,this.w=a.w+h.w,this},addScaledVector:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this.z+=a.z*h,this.w+=a.w*h,this},sub:function(a,h){return void 0!==h?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,h)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this},subVectors:function(a,h){return this.x=a.x-h.x,this.y=a.y-h.y,this.z=a.z-h.z,this.w=a.w-h.w,this},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(a){var h=this.x,g=this.y,y=this.z,A=this.w,T=a.elements;return this.x=T[0]*h+T[4]*g+T[8]*y+T[12]*A,this.y=T[1]*h+T[5]*g+T[9]*y+T[13]*A,this.z=T[2]*h+T[6]*g+T[10]*y+T[14]*A,this.w=T[3]*h+T[7]*g+T[11]*y+T[15]*A,this},divideScalar:function(a){return this.multiplyScalar(1/a)},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var h=Math.sqrt(1-a.w*a.w);return h<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/h,this.y=a.y/h,this.z=a.z/h),this},setAxisAngleFromRotationMatrix:function(a){var h,g,y,A,T=.01,R=.1,N=a.elements,ie=N[0],ee=N[4],fe=N[8],me=N[1],Le=N[5],ke=N[9],Fe=N[2],nt=N[6],tt=N[10];if(Math.abs(ee-me)<T&&Math.abs(fe-Fe)<T&&Math.abs(ke-nt)<T){if(Math.abs(ee+me)<R&&Math.abs(fe+Fe)<R&&Math.abs(ke+nt)<R&&Math.abs(ie+Le+tt-3)<R)return this.set(1,0,0,0),this;h=Math.PI;var Ke=(ie+1)/2,pt=(Le+1)/2,vt=(tt+1)/2,Xt=(ee+me)/4,Bt=(fe+Fe)/4,cn=(ke+nt)/4;return Ke>pt&&Ke>vt?Ke<T?(g=0,y=.707106781,A=.707106781):(y=Xt/(g=Math.sqrt(Ke)),A=Bt/g):pt>vt?pt<T?(g=.707106781,y=0,A=.707106781):(g=Xt/(y=Math.sqrt(pt)),A=cn/y):vt<T?(g=.707106781,y=.707106781,A=0):(g=Bt/(A=Math.sqrt(vt)),y=cn/A),this.set(g,y,A,h),this}var sn=Math.sqrt((nt-ke)*(nt-ke)+(fe-Fe)*(fe-Fe)+(me-ee)*(me-ee));return Math.abs(sn)<.001&&(sn=1),this.x=(nt-ke)/sn,this.y=(fe-Fe)/sn,this.z=(me-ee)/sn,this.w=Math.acos((ie+Le+tt-1)/2),this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this},clamp:function(a,h){return this.x=Math.max(a.x,Math.min(h.x,this.x)),this.y=Math.max(a.y,Math.min(h.y,this.y)),this.z=Math.max(a.z,Math.min(h.z,this.z)),this.w=Math.max(a.w,Math.min(h.w,this.w)),this},clampScalar:function(){var a,h;return function(y,A){return void 0===a&&(a=new jo,h=new jo),a.set(y,y,y,y),h.set(A,A,A,A),this.clamp(a,h)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,h){return this.x+=(a.x-this.x)*h,this.y+=(a.y-this.y)*h,this.z+=(a.z-this.z)*h,this.w+=(a.w-this.w)*h,this},lerpVectors:function(a,h,g){return this.subVectors(h,a).multiplyScalar(g).add(a)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,h){return void 0===h&&(h=0),this.x=a[h],this.y=a[h+1],this.z=a[h+2],this.w=a[h+3],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.x,a[h+1]=this.y,a[h+2]=this.z,a[h+3]=this.w,a},fromAttribute:function(a,h,g){return void 0!==g&&console.warn("THREE.Vector4: offset has been removed from .fromAttribute()."),this.x=a.getX(h),this.y=a.getY(h),this.z=a.getZ(h),this.w=a.getW(h),this}},Object.assign(Ac.prototype,Y.prototype,{isWebGLRenderTarget:!0,setSize:function(a,h){(this.width!==a||this.height!==h)&&(this.width=a,this.height=h,this.dispose()),this.viewport.set(0,0,a,h),this.scissor.set(0,0,a,h)},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.width=a.width,this.height=a.height,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(id.prototype=Object.create(Ac.prototype)).constructor=id,id.prototype.isWebGLRenderTargetCube=!0,kl.prototype={constructor:kl,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get w(){return this._w},set w(a){this._w=a,this.onChangeCallback()},set:function(a,h,g,y){return this._x=a,this._y=h,this._z=g,this._w=y,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this.onChangeCallback(),this},setFromEuler:function(a,h){if(!1===(a&&a.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var g=Math.cos(a._x/2),y=Math.cos(a._y/2),A=Math.cos(a._z/2),T=Math.sin(a._x/2),R=Math.sin(a._y/2),N=Math.sin(a._z/2),ie=a.order;return"XYZ"===ie?(this._x=T*y*A+g*R*N,this._y=g*R*A-T*y*N,this._z=g*y*N+T*R*A,this._w=g*y*A-T*R*N):"YXZ"===ie?(this._x=T*y*A+g*R*N,this._y=g*R*A-T*y*N,this._z=g*y*N-T*R*A,this._w=g*y*A+T*R*N):"ZXY"===ie?(this._x=T*y*A-g*R*N,this._y=g*R*A+T*y*N,this._z=g*y*N+T*R*A,this._w=g*y*A-T*R*N):"ZYX"===ie?(this._x=T*y*A-g*R*N,this._y=g*R*A+T*y*N,this._z=g*y*N-T*R*A,this._w=g*y*A+T*R*N):"YZX"===ie?(this._x=T*y*A+g*R*N,this._y=g*R*A+T*y*N,this._z=g*y*N-T*R*A,this._w=g*y*A-T*R*N):"XZY"===ie&&(this._x=T*y*A-g*R*N,this._y=g*R*A-T*y*N,this._z=g*y*N+T*R*A,this._w=g*y*A+T*R*N),!1!==h&&this.onChangeCallback(),this},setFromAxisAngle:function(a,h){var g=h/2,y=Math.sin(g);return this._x=a.x*y,this._y=a.y*y,this._z=a.z*y,this._w=Math.cos(g),this.onChangeCallback(),this},setFromRotationMatrix:function(a){var Le,h=a.elements,g=h[0],y=h[4],A=h[8],T=h[1],R=h[5],N=h[9],ie=h[2],ee=h[6],fe=h[10],me=g+R+fe;return me>0?(Le=.5/Math.sqrt(me+1),this._w=.25/Le,this._x=(ee-N)*Le,this._y=(A-ie)*Le,this._z=(T-y)*Le):g>R&&g>fe?(Le=2*Math.sqrt(1+g-R-fe),this._w=(ee-N)/Le,this._x=.25*Le,this._y=(y+T)/Le,this._z=(A+ie)/Le):R>fe?(Le=2*Math.sqrt(1+R-g-fe),this._w=(A-ie)/Le,this._x=(y+T)/Le,this._y=.25*Le,this._z=(N+ee)/Le):(Le=2*Math.sqrt(1+fe-g-R),this._w=(T-y)/Le,this._x=(A+ie)/Le,this._y=(N+ee)/Le,this._z=.25*Le),this.onChangeCallback(),this},setFromUnitVectors:function(){var a,h;return function(A,T){return void 0===a&&(a=new Zt),(h=A.dot(T)+1)<1e-6?(h=0,Math.abs(A.x)>Math.abs(A.z)?a.set(-A.y,A.x,0):a.set(0,-A.z,A.y)):a.crossVectors(A,T),this._x=a.x,this._y=a.y,this._z=a.z,this._w=h,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(a=1/a),this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this.onChangeCallback(),this},multiply:function(a,h){return void 0!==h?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,h)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,h){var g=a._x,y=a._y,A=a._z,T=a._w,R=h._x,N=h._y,ie=h._z,ee=h._w;return this._x=g*ee+T*R+y*ie-A*N,this._y=y*ee+T*N+A*R-g*ie,this._z=A*ee+T*ie+g*N-y*R,this._w=T*ee-g*R-y*N-A*ie,this.onChangeCallback(),this},slerp:function(a,h){if(0===h)return this;if(1===h)return this.copy(a);var g=this._x,y=this._y,A=this._z,T=this._w,R=T*a._w+g*a._x+y*a._y+A*a._z;if(R<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,R=-R):this.copy(a),R>=1)return this._w=T,this._x=g,this._y=y,this._z=A,this;var N=Math.sqrt(1-R*R);if(Math.abs(N)<.001)return this._w=.5*(T+this._w),this._x=.5*(g+this._x),this._y=.5*(y+this._y),this._z=.5*(A+this._z),this;var ie=Math.atan2(N,R),ee=Math.sin((1-h)*ie)/N,fe=Math.sin(h*ie)/N;return this._w=T*ee+this._w*fe,this._x=g*ee+this._x*fe,this._y=y*ee+this._y*fe,this._z=A*ee+this._z*fe,this.onChangeCallback(),this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,h){return void 0===h&&(h=0),this._x=a[h],this._y=a[h+1],this._z=a[h+2],this._w=a[h+3],this.onChangeCallback(),this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this._x,a[h+1]=this._y,a[h+2]=this._z,a[h+3]=this._w,a},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},Object.assign(kl,{slerp:function(a,h,g,y){return g.copy(a).slerp(h,y)},slerpFlat:function(a,h,g,y,A,T,R){var N=g[y+0],ie=g[y+1],ee=g[y+2],fe=g[y+3],me=A[T+0],Le=A[T+1],ke=A[T+2],Fe=A[T+3];if(fe!==Fe||N!==me||ie!==Le||ee!==ke){var nt=1-R,tt=N*me+ie*Le+ee*ke+fe*Fe,Ke=tt>=0?1:-1,pt=1-tt*tt;if(pt>Number.EPSILON){var vt=Math.sqrt(pt),Xt=Math.atan2(vt,tt*Ke);nt=Math.sin(nt*Xt)/vt,R=Math.sin(R*Xt)/vt}var Bt=R*Ke;if(N=N*nt+me*Bt,ie=ie*nt+Le*Bt,ee=ee*nt+ke*Bt,fe=fe*nt+Fe*Bt,nt===1-R){var cn=1/Math.sqrt(N*N+ie*ie+ee*ee+fe*fe);N*=cn,ie*=cn,ee*=cn,fe*=cn}}a[h]=N,a[h+1]=ie,a[h+2]=ee,a[h+3]=fe}}),Zt.prototype={constructor:Zt,isVector3:!0,set:function(a,h,g){return this.x=a,this.y=h,this.z=g,this},setScalar:function(a){return this.x=a,this.y=a,this.z=a,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},setComponent:function(a,h){switch(a){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;default:throw new Error("index is out of range: "+a)}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,h){return void 0!==h?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,h)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addVectors:function(a,h){return this.x=a.x+h.x,this.y=a.y+h.y,this.z=a.z+h.z,this},addScaledVector:function(a,h){return this.x+=a.x*h,this.y+=a.y*h,this.z+=a.z*h,this},sub:function(a,h){return void 0!==h?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,h)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)},subScalar:function(a){return this.x-=a,this.y-=a,this.z-=a,this},subVectors:function(a,h){return this.x=a.x-h.x,this.y=a.y-h.y,this.z=a.z-h.z,this},multiply:function(a,h){return void 0!==h?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,h)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)},multiplyScalar:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(a,h){return this.x=a.x*h.x,this.y=a.y*h.y,this.z=a.z*h.z,this},applyEuler:function(){var a;return function(g){return!1===(g&&g.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===a&&(a=new kl),this.applyQuaternion(a.setFromEuler(g))}}(),applyAxisAngle:function(){var a;return function(g,y){return void 0===a&&(a=new kl),this.applyQuaternion(a.setFromAxisAngle(g,y))}}(),applyMatrix3:function(a){var h=this.x,g=this.y,y=this.z,A=a.elements;return this.x=A[0]*h+A[3]*g+A[6]*y,this.y=A[1]*h+A[4]*g+A[7]*y,this.z=A[2]*h+A[5]*g+A[8]*y,this},applyMatrix4:function(a){var h=this.x,g=this.y,y=this.z,A=a.elements;return this.x=A[0]*h+A[4]*g+A[8]*y+A[12],this.y=A[1]*h+A[5]*g+A[9]*y+A[13],this.z=A[2]*h+A[6]*g+A[10]*y+A[14],this},applyProjection:function(a){var h=this.x,g=this.y,y=this.z,A=a.elements,T=1/(A[3]*h+A[7]*g+A[11]*y+A[15]);return this.x=(A[0]*h+A[4]*g+A[8]*y+A[12])*T,this.y=(A[1]*h+A[5]*g+A[9]*y+A[13])*T,this.z=(A[2]*h+A[6]*g+A[10]*y+A[14])*T,this},applyQuaternion:function(a){var h=this.x,g=this.y,y=this.z,A=a.x,T=a.y,R=a.z,N=a.w,ie=N*h+T*y-R*g,ee=N*g+R*h-A*y,fe=N*y+A*g-T*h,me=-A*h-T*g-R*y;return this.x=ie*N+me*-A+ee*-R-fe*-T,this.y=ee*N+me*-T+fe*-A-ie*-R,this.z=fe*N+me*-R+ie*-T-ee*-A,this},project:function(){var a;return function(g){return void 0===a&&(a=new ms),a.multiplyMatrices(g.projectionMatrix,a.getInverse(g.matrixWorld)),this.applyProjection(a)}}(),unproject:function(){var a;return function(g){return void 0===a&&(a=new ms),a.multiplyMatrices(g.matrixWorld,a.getInverse(g.projectionMatrix)),this.applyProjection(a)}}(),transformDirection:function(a){var h=this.x,g=this.y,y=this.z,A=a.elements;return this.x=A[0]*h+A[4]*g+A[8]*y,this.y=A[1]*h+A[5]*g+A[9]*y,this.z=A[2]*h+A[6]*g+A[10]*y,this.normalize()},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clamp:function(a,h){return this.x=Math.max(a.x,Math.min(h.x,this.x)),this.y=Math.max(a.y,Math.min(h.y,this.y)),this.z=Math.max(a.z,Math.min(h.z,this.z)),this},clampScalar:function(){var a,h;return function(y,A){return void 0===a&&(a=new Zt,h=new Zt),a.set(y,y,y),h.set(A,A,A),this.clamp(a,h)}}(),clampLength:function(a,h){var g=this.length();return this.multiplyScalar(Math.max(a,Math.min(h,g))/g)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,h){return this.x+=(a.x-this.x)*h,this.y+=(a.y-this.y)*h,this.z+=(a.z-this.z)*h,this},lerpVectors:function(a,h,g){return this.subVectors(h,a).multiplyScalar(g).add(a)},cross:function(a,h){if(void 0!==h)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,h);var g=this.x,y=this.y,A=this.z;return this.x=y*a.z-A*a.y,this.y=A*a.x-g*a.z,this.z=g*a.y-y*a.x,this},crossVectors:function(a,h){var g=a.x,y=a.y,A=a.z,T=h.x,R=h.y,N=h.z;return this.x=y*N-A*R,this.y=A*T-g*N,this.z=g*R-y*T,this},projectOnVector:function(a){var h=a.dot(this)/a.lengthSq();return this.copy(a).multiplyScalar(h)},projectOnPlane:function(){var a;return function(g){return void 0===a&&(a=new Zt),a.copy(this).projectOnVector(g),this.sub(a)}}(),reflect:function(){var a;return function(g){return void 0===a&&(a=new Zt),this.sub(a.copy(g).multiplyScalar(2*this.dot(g)))}}(),angleTo:function(a){var h=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(xs.clamp(h,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var h=this.x-a.x,g=this.y-a.y,y=this.z-a.z;return h*h+g*g+y*y},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var h=Math.sin(a.phi)*a.radius;return this.x=h*Math.sin(a.theta),this.y=Math.cos(a.phi)*a.radius,this.z=h*Math.cos(a.theta),this},setFromCylindrical:function(a){return this.x=a.radius*Math.sin(a.theta),this.y=a.y,this.z=a.radius*Math.cos(a.theta),this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},setFromMatrixScale:function(a){var h=this.setFromMatrixColumn(a,0).length(),g=this.setFromMatrixColumn(a,1).length(),y=this.setFromMatrixColumn(a,2).length();return this.x=h,this.y=g,this.z=y,this},setFromMatrixColumn:function(a,h){if("number"==typeof a){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var g=a;a=h,h=g}return this.fromArray(a.elements,4*h)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,h){return void 0===h&&(h=0),this.x=a[h],this.y=a[h+1],this.z=a[h+2],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.x,a[h+1]=this.y,a[h+2]=this.z,a},fromAttribute:function(a,h,g){return void 0!==g&&console.warn("THREE.Vector3: offset has been removed from .fromAttribute()."),this.x=a.getX(h),this.y=a.getY(h),this.z=a.getZ(h),this}},ms.prototype={constructor:ms,isMatrix4:!0,set:function(a,h,g,y,A,T,R,N,ie,ee,fe,me,Le,ke,Fe,nt){var tt=this.elements;return tt[0]=a,tt[4]=h,tt[8]=g,tt[12]=y,tt[1]=A,tt[5]=T,tt[9]=R,tt[13]=N,tt[2]=ie,tt[6]=ee,tt[10]=fe,tt[14]=me,tt[3]=Le,tt[7]=ke,tt[11]=Fe,tt[15]=nt,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new ms).fromArray(this.elements)},copy:function(a){return this.elements.set(a.elements),this},copyPosition:function(a){var h=this.elements,g=a.elements;return h[12]=g[12],h[13]=g[13],h[14]=g[14],this},extractBasis:function(a,h,g){return a.setFromMatrixColumn(this,0),h.setFromMatrixColumn(this,1),g.setFromMatrixColumn(this,2),this},makeBasis:function(a,h,g){return this.set(a.x,h.x,g.x,0,a.y,h.y,g.y,0,a.z,h.z,g.z,0,0,0,0,1),this},extractRotation:function(){var a;return function(g){void 0===a&&(a=new Zt);var y=this.elements,A=g.elements,T=1/a.setFromMatrixColumn(g,0).length(),R=1/a.setFromMatrixColumn(g,1).length(),N=1/a.setFromMatrixColumn(g,2).length();return y[0]=A[0]*T,y[1]=A[1]*T,y[2]=A[2]*T,y[4]=A[4]*R,y[5]=A[5]*R,y[6]=A[6]*R,y[8]=A[8]*N,y[9]=A[9]*N,y[10]=A[10]*N,this}}(),makeRotationFromEuler:function(a){!1===(a&&a.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var h=this.elements,g=a.x,y=a.y,A=a.z,T=Math.cos(g),R=Math.sin(g),N=Math.cos(y),ie=Math.sin(y),ee=Math.cos(A),fe=Math.sin(A);if("XYZ"===a.order){var me=T*ee,Le=T*fe,ke=R*ee,Fe=R*fe;h[0]=N*ee,h[4]=-N*fe,h[8]=ie,h[1]=Le+ke*ie,h[5]=me-Fe*ie,h[9]=-R*N,h[2]=Fe-me*ie,h[6]=ke+Le*ie,h[10]=T*N}else if("YXZ"===a.order){var tt=N*fe,Ke=ie*ee;h[0]=(nt=N*ee)+(pt=ie*fe)*R,h[4]=Ke*R-tt,h[8]=T*ie,h[1]=T*fe,h[5]=T*ee,h[9]=-R,h[2]=tt*R-Ke,h[6]=pt+nt*R,h[10]=T*N}else if("ZXY"===a.order){var nt,pt;tt=N*fe,Ke=ie*ee,h[0]=(nt=N*ee)-(pt=ie*fe)*R,h[4]=-T*fe,h[8]=Ke+tt*R,h[1]=tt+Ke*R,h[5]=T*ee,h[9]=pt-nt*R,h[2]=-T*ie,h[6]=R,h[10]=T*N}else if("ZYX"===a.order)me=T*ee,Le=T*fe,ke=R*ee,Fe=R*fe,h[0]=N*ee,h[4]=ke*ie-Le,h[8]=me*ie+Fe,h[1]=N*fe,h[5]=Fe*ie+me,h[9]=Le*ie-ke,h[2]=-ie,h[6]=R*N,h[10]=T*N;else if("YZX"===a.order){var vt=T*N,Xt=T*ie,Bt=R*N,cn=R*ie;h[0]=N*ee,h[4]=cn-vt*fe,h[8]=Bt*fe+Xt,h[1]=fe,h[5]=T*ee,h[9]=-R*ee,h[2]=-ie*ee,h[6]=Xt*fe+Bt,h[10]=vt-cn*fe}else"XZY"===a.order&&(vt=T*N,Xt=T*ie,Bt=R*N,cn=R*ie,h[0]=N*ee,h[4]=-fe,h[8]=ie*ee,h[1]=vt*fe+cn,h[5]=T*ee,h[9]=Xt*fe-Bt,h[2]=Bt*fe-Xt,h[6]=R*ee,h[10]=cn*fe+vt);return h[3]=0,h[7]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this},makeRotationFromQuaternion:function(a){var h=this.elements,g=a.x,y=a.y,A=a.z,T=a.w,R=g+g,N=y+y,ie=A+A,ee=g*R,fe=g*N,me=g*ie,Le=y*N,ke=y*ie,Fe=A*ie,nt=T*R,tt=T*N,Ke=T*ie;return h[0]=1-(Le+Fe),h[4]=fe-Ke,h[8]=me+tt,h[1]=fe+Ke,h[5]=1-(ee+Fe),h[9]=ke-nt,h[2]=me-tt,h[6]=ke+nt,h[10]=1-(ee+Le),h[3]=0,h[7]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this},lookAt:function(){var a,h,g;return function(A,T,R){void 0===a&&(a=new Zt,h=new Zt,g=new Zt);var N=this.elements;return g.subVectors(A,T).normalize(),0===g.lengthSq()&&(g.z=1),a.crossVectors(R,g).normalize(),0===a.lengthSq()&&(g.z+=1e-4,a.crossVectors(R,g).normalize()),h.crossVectors(g,a),N[0]=a.x,N[4]=h.x,N[8]=g.x,N[1]=a.y,N[5]=h.y,N[9]=g.y,N[2]=a.z,N[6]=h.z,N[10]=g.z,this}}(),multiply:function(a,h){return void 0!==h?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,h)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,h){var g=a.elements,y=h.elements,A=this.elements,T=g[0],R=g[4],N=g[8],ie=g[12],ee=g[1],fe=g[5],me=g[9],Le=g[13],ke=g[2],Fe=g[6],nt=g[10],tt=g[14],Ke=g[3],pt=g[7],vt=g[11],Xt=g[15],Bt=y[0],cn=y[4],sn=y[8],en=y[12],hn=y[1],On=y[5],Ai=y[9],ui=y[13],jt=y[2],qt=y[6],Wn=y[10],ei=y[14],Ii=y[3],_i=y[7],fi=y[11],nr=y[15];return A[0]=T*Bt+R*hn+N*jt+ie*Ii,A[4]=T*cn+R*On+N*qt+ie*_i,A[8]=T*sn+R*Ai+N*Wn+ie*fi,A[12]=T*en+R*ui+N*ei+ie*nr,A[1]=ee*Bt+fe*hn+me*jt+Le*Ii,A[5]=ee*cn+fe*On+me*qt+Le*_i,A[9]=ee*sn+fe*Ai+me*Wn+Le*fi,A[13]=ee*en+fe*ui+me*ei+Le*nr,A[2]=ke*Bt+Fe*hn+nt*jt+tt*Ii,A[6]=ke*cn+Fe*On+nt*qt+tt*_i,A[10]=ke*sn+Fe*Ai+nt*Wn+tt*fi,A[14]=ke*en+Fe*ui+nt*ei+tt*nr,A[3]=Ke*Bt+pt*hn+vt*jt+Xt*Ii,A[7]=Ke*cn+pt*On+vt*qt+Xt*_i,A[11]=Ke*sn+pt*Ai+vt*Wn+Xt*fi,A[15]=Ke*en+pt*ui+vt*ei+Xt*nr,this},multiplyToArray:function(a,h,g){var y=this.elements;return this.multiplyMatrices(a,h),g[0]=y[0],g[1]=y[1],g[2]=y[2],g[3]=y[3],g[4]=y[4],g[5]=y[5],g[6]=y[6],g[7]=y[7],g[8]=y[8],g[9]=y[9],g[10]=y[10],g[11]=y[11],g[12]=y[12],g[13]=y[13],g[14]=y[14],g[15]=y[15],this},multiplyScalar:function(a){var h=this.elements;return h[0]*=a,h[4]*=a,h[8]*=a,h[12]*=a,h[1]*=a,h[5]*=a,h[9]*=a,h[13]*=a,h[2]*=a,h[6]*=a,h[10]*=a,h[14]*=a,h[3]*=a,h[7]*=a,h[11]*=a,h[15]*=a,this},applyToVector3Array:function(){var a;return function(g,y,A){void 0===a&&(a=new Zt),void 0===y&&(y=0),void 0===A&&(A=g.length);for(var T=0,R=y;T<A;T+=3,R+=3)a.fromArray(g,R),a.applyMatrix4(this),a.toArray(g,R);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new Zt);for(var y=0,A=g.count;y<A;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix4(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),determinant:function(){var a=this.elements,h=a[0],g=a[4],y=a[8],A=a[12],T=a[1],R=a[5],N=a[9],ie=a[13],ee=a[2],fe=a[6],me=a[10],Le=a[14];return a[3]*(+A*N*fe-y*ie*fe-A*R*me+g*ie*me+y*R*Le-g*N*Le)+a[7]*(+h*N*Le-h*ie*me+A*T*me-y*T*Le+y*ie*ee-A*N*ee)+a[11]*(+h*ie*fe-h*R*Le-A*T*fe+g*T*Le+A*R*ee-g*ie*ee)+a[15]*(-y*R*ee-h*N*fe+h*R*me+y*T*fe-g*T*me+g*N*ee)},transpose:function(){var h,a=this.elements;return h=a[1],a[1]=a[4],a[4]=h,h=a[2],a[2]=a[8],a[8]=h,h=a[6],a[6]=a[9],a[9]=h,h=a[3],a[3]=a[12],a[12]=h,h=a[7],a[7]=a[13],a[13]=h,h=a[11],a[11]=a[14],a[14]=h,this},setPosition:function(a){var h=this.elements;return h[12]=a.x,h[13]=a.y,h[14]=a.z,this},getInverse:function(a,h){var g=this.elements,y=a.elements,A=y[0],T=y[1],R=y[2],N=y[3],ie=y[4],ee=y[5],fe=y[6],me=y[7],Le=y[8],ke=y[9],Fe=y[10],nt=y[11],tt=y[12],Ke=y[13],pt=y[14],vt=y[15],Xt=ke*pt*me-Ke*Fe*me+Ke*fe*nt-ee*pt*nt-ke*fe*vt+ee*Fe*vt,Bt=tt*Fe*me-Le*pt*me-tt*fe*nt+ie*pt*nt+Le*fe*vt-ie*Fe*vt,cn=Le*Ke*me-tt*ke*me+tt*ee*nt-ie*Ke*nt-Le*ee*vt+ie*ke*vt,sn=tt*ke*fe-Le*Ke*fe-tt*ee*Fe+ie*Ke*Fe+Le*ee*pt-ie*ke*pt,en=A*Xt+T*Bt+R*cn+N*sn;if(0===en){var hn="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===h)throw new Error(hn);return console.warn(hn),this.identity()}var On=1/en;return g[0]=Xt*On,g[1]=(Ke*Fe*N-ke*pt*N-Ke*R*nt+T*pt*nt+ke*R*vt-T*Fe*vt)*On,g[2]=(ee*pt*N-Ke*fe*N+Ke*R*me-T*pt*me-ee*R*vt+T*fe*vt)*On,g[3]=(ke*fe*N-ee*Fe*N-ke*R*me+T*Fe*me+ee*R*nt-T*fe*nt)*On,g[4]=Bt*On,g[5]=(Le*pt*N-tt*Fe*N+tt*R*nt-A*pt*nt-Le*R*vt+A*Fe*vt)*On,g[6]=(tt*fe*N-ie*pt*N-tt*R*me+A*pt*me+ie*R*vt-A*fe*vt)*On,g[7]=(ie*Fe*N-Le*fe*N+Le*R*me-A*Fe*me-ie*R*nt+A*fe*nt)*On,g[8]=cn*On,g[9]=(tt*ke*N-Le*Ke*N-tt*T*nt+A*Ke*nt+Le*T*vt-A*ke*vt)*On,g[10]=(ie*Ke*N-tt*ee*N+tt*T*me-A*Ke*me-ie*T*vt+A*ee*vt)*On,g[11]=(Le*ee*N-ie*ke*N-Le*T*me+A*ke*me+ie*T*nt-A*ee*nt)*On,g[12]=sn*On,g[13]=(Le*Ke*R-tt*ke*R+tt*T*Fe-A*Ke*Fe-Le*T*pt+A*ke*pt)*On,g[14]=(tt*ee*R-ie*Ke*R-tt*T*fe+A*Ke*fe+ie*T*pt-A*ee*pt)*On,g[15]=(ie*ke*R-Le*ee*R+Le*T*fe-A*ke*fe-ie*T*Fe+A*ee*Fe)*On,this},scale:function(a){var h=this.elements,g=a.x,y=a.y,A=a.z;return h[0]*=g,h[4]*=y,h[8]*=A,h[1]*=g,h[5]*=y,h[9]*=A,h[2]*=g,h[6]*=y,h[10]*=A,h[3]*=g,h[7]*=y,h[11]*=A,this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,h,g){return this.set(1,0,0,a,0,1,0,h,0,0,1,g,0,0,0,1),this},makeRotationX:function(a){var h=Math.cos(a),g=Math.sin(a);return this.set(1,0,0,0,0,h,-g,0,0,g,h,0,0,0,0,1),this},makeRotationY:function(a){var h=Math.cos(a),g=Math.sin(a);return this.set(h,0,g,0,0,1,0,0,-g,0,h,0,0,0,0,1),this},makeRotationZ:function(a){var h=Math.cos(a),g=Math.sin(a);return this.set(h,-g,0,0,g,h,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,h){var g=Math.cos(h),y=Math.sin(h),A=1-g,T=a.x,R=a.y,N=a.z,ie=A*T,ee=A*R;return this.set(ie*T+g,ie*R-y*N,ie*N+y*R,0,ie*R+y*N,ee*R+g,ee*N-y*T,0,ie*N-y*R,ee*N+y*T,A*N*N+g,0,0,0,0,1),this},makeScale:function(a,h,g){return this.set(a,0,0,0,0,h,0,0,0,0,g,0,0,0,0,1),this},makeShear:function(a,h,g){return this.set(1,h,g,0,a,1,g,0,a,h,1,0,0,0,0,1),this},compose:function(a,h,g){return this.makeRotationFromQuaternion(h),this.scale(g),this.setPosition(a),this},decompose:function(){var a,h;return function(y,A,T){void 0===a&&(a=new Zt,h=new ms);var R=this.elements,N=a.set(R[0],R[1],R[2]).length(),ie=a.set(R[4],R[5],R[6]).length(),ee=a.set(R[8],R[9],R[10]).length();this.determinant()<0&&(N=-N),y.x=R[12],y.y=R[13],y.z=R[14],h.elements.set(this.elements);var me=1/N,Le=1/ie,ke=1/ee;return h.elements[0]*=me,h.elements[1]*=me,h.elements[2]*=me,h.elements[4]*=Le,h.elements[5]*=Le,h.elements[6]*=Le,h.elements[8]*=ke,h.elements[9]*=ke,h.elements[10]*=ke,A.setFromRotationMatrix(h),T.x=N,T.y=ie,T.z=ee,this}}(),makeFrustum:function(a,h,g,y,A,T){var R=this.elements,ie=2*A/(y-g),ee=(h+a)/(h-a),fe=(y+g)/(y-g),me=-(T+A)/(T-A),Le=-2*T*A/(T-A);return R[0]=2*A/(h-a),R[4]=0,R[8]=ee,R[12]=0,R[1]=0,R[5]=ie,R[9]=fe,R[13]=0,R[2]=0,R[6]=0,R[10]=me,R[14]=Le,R[3]=0,R[7]=0,R[11]=-1,R[15]=0,this},makePerspective:function(a,h,g,y){var A=g*Math.tan(xs.DEG2RAD*a*.5),T=-A;return this.makeFrustum(T*h,A*h,T,A,g,y)},makeOrthographic:function(a,h,g,y,A,T){var R=this.elements,N=1/(h-a),ie=1/(g-y),ee=1/(T-A),fe=(h+a)*N,me=(g+y)*ie,Le=(T+A)*ee;return R[0]=2*N,R[4]=0,R[8]=0,R[12]=-fe,R[1]=0,R[5]=2*ie,R[9]=0,R[13]=-me,R[2]=0,R[6]=0,R[10]=-2*ee,R[14]=-Le,R[3]=0,R[7]=0,R[11]=0,R[15]=1,this},equals:function(a){for(var h=this.elements,g=a.elements,y=0;y<16;y++)if(h[y]!==g[y])return!1;return!0},fromArray:function(a,h){void 0===h&&(h=0);for(var g=0;g<16;g++)this.elements[g]=a[g+h];return this},toArray:function(a,h){void 0===a&&(a=[]),void 0===h&&(h=0);var g=this.elements;return a[h]=g[0],a[h+1]=g[1],a[h+2]=g[2],a[h+3]=g[3],a[h+4]=g[4],a[h+5]=g[5],a[h+6]=g[6],a[h+7]=g[7],a[h+8]=g[8],a[h+9]=g[9],a[h+10]=g[10],a[h+11]=g[11],a[h+12]=g[12],a[h+13]=g[13],a[h+14]=g[14],a[h+15]=g[15],a}},(Rd.prototype=Object.create(Wo.prototype)).constructor=Rd,Rd.prototype.isCubeTexture=!0,Object.defineProperty(Rd.prototype,"images",{get:function(){return this.image},set:function(a){this.image=a}});var P_=new Wo,Lg=new Rd;function mv(){this.seq=[],this.map={}}var Ic=[],no=[];function Eh(a,h,g){var y=a[0];if(y<=0||y>0)return a;var A=h*g,T=Ic[A];if(void 0===T&&(T=new Float32Array(A),Ic[A]=T),0!==h){y.toArray(T,0);for(var R=1,N=0;R!==h;++R)a[R].toArray(T,N+=g)}return T}function R_(a,h){var g=no[h];void 0===g&&(g=new Int32Array(h),no[h]=g);for(var y=0;y!==h;++y)g[y]=a.allocTextureUnit();return g}function cc(a,h){a.uniform1f(this.addr,h)}function Yi(a,h){a.uniform1i(this.addr,h)}function oC(a,h){void 0===h.x?a.uniform2fv(this.addr,h):a.uniform2f(this.addr,h.x,h.y)}function Dr(a,h){void 0!==h.x?a.uniform3f(this.addr,h.x,h.y,h.z):void 0!==h.r?a.uniform3f(this.addr,h.r,h.g,h.b):a.uniform3fv(this.addr,h)}function Sc(a,h){void 0===h.x?a.uniform4fv(this.addr,h):a.uniform4f(this.addr,h.x,h.y,h.z,h.w)}function Sy(a,h){a.uniformMatrix2fv(this.addr,!1,h.elements||h)}function k_(a,h){a.uniformMatrix3fv(this.addr,!1,h.elements||h)}function Sa(a,h){a.uniformMatrix4fv(this.addr,!1,h.elements||h)}function ua(a,h,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTexture2D(h||P_,y)}function $f(a,h,g){var y=g.allocTextureUnit();a.uniform1i(this.addr,y),g.setTextureCube(h||Lg,y)}function Vp(a,h){a.uniform2iv(this.addr,h)}function bm(a,h){a.uniform3iv(this.addr,h)}function xm(a,h){a.uniform4iv(this.addr,h)}function vv(a,h){a.uniform1fv(this.addr,h)}function yv(a,h){a.uniform1iv(this.addr,h)}function ku(a,h){a.uniform2fv(this.addr,Eh(h,this.size,2))}function Xl(a,h){a.uniform3fv(this.addr,Eh(h,this.size,3))}function O_(a,h){a.uniform4fv(this.addr,Eh(h,this.size,4))}function ih(a,h){a.uniformMatrix2fv(this.addr,!1,Eh(h,this.size,4))}function rh(a,h){a.uniformMatrix3fv(this.addr,!1,Eh(h,this.size,9))}function Ey(a,h){a.uniformMatrix4fv(this.addr,!1,Eh(h,this.size,16))}function Th(a,h,g){var y=h.length,A=R_(g,y);a.uniform1iv(this.addr,A);for(var T=0;T!==y;++T)g.setTexture2D(h[T]||P_,A[T])}function Ea(a,h,g){var y=h.length,A=R_(g,y);a.uniform1iv(this.addr,A);for(var T=0;T!==y;++T)g.setTextureCube(h[T]||Lg,A[T])}function F_(a,h,g){this.id=a,this.addr=g,this.setValue=function ns(a){switch(a){case 5126:return cc;case 35664:return oC;case 35665:return Dr;case 35666:return Sc;case 35674:return Sy;case 35675:return k_;case 35676:return Sa;case 35678:return ua;case 35680:return $f;case 5124:case 35670:return Yi;case 35667:case 35671:return Vp;case 35668:case 35672:return bm;case 35669:case 35673:return xm}}(h.type)}function Ty(a,h,g){this.id=a,this.addr=g,this.size=h.size,this.setValue=function io(a){switch(a){case 5126:return vv;case 35664:return ku;case 35665:return Xl;case 35666:return O_;case 35674:return ih;case 35675:return rh;case 35676:return Ey;case 35678:return Th;case 35680:return Ea;case 5124:case 35670:return yv;case 35667:case 35671:return Vp;case 35668:case 35672:return bm;case 35669:case 35673:return xm}}(h.type)}function kd(a){this.id=a,mv.call(this)}kd.prototype.setValue=function(a,h){for(var g=this.seq,y=0,A=g.length;y!==A;++y){var T=g[y];T.setValue(a,h[T.id])}};var go=/([\w\d_]+)(\])?(\[|\.)?/g;function Ya(a,h){a.seq.push(h),a.map[h.id]=h}function qf(a,h,g){var y=a.name,A=y.length;for(go.lastIndex=0;;){var T=go.exec(y),N=T[1],ee=T[3];if("]"===T[2]&&(N|=0),void 0===ee||"["===ee&&go.lastIndex+2===A){Ya(g,void 0===ee?new F_(N,a,h):new Ty(N,a,h));break}var me=g.map[N];void 0===me&&Ya(g,me=new kd(N)),g=me}}function Ka(a,h,g){mv.call(this),this.renderer=g;for(var y=a.getProgramParameter(h,a.ACTIVE_UNIFORMS),A=0;A!==y;++A){var T=a.getActiveUniform(h,A);qf(T,a.getUniformLocation(h,T.name),this)}}Ka.prototype.setValue=function(a,h,g){var y=this.map[h];void 0!==y&&y.setValue(a,g,this.renderer)},Ka.prototype.set=function(a,h,g){var y=this.map[g];void 0!==y&&y.setValue(a,h[g],this.renderer)},Ka.prototype.setOptional=function(a,h,g){var y=h[g];void 0!==y&&this.setValue(a,g,y)},Ka.upload=function(a,h,g,y){for(var A=0,T=h.length;A!==T;++A){var R=h[A],N=g[R.id];!1!==N.needsUpdate&&R.setValue(a,N.value,y)}},Ka.seqWithValue=function(a,h){for(var g=[],y=0,A=a.length;y!==A;++y){var T=a[y];T.id in h&&g.push(T)}return g};var il={merge:function(a){for(var h={},g=0;g<a.length;g++){var y=this.clone(a[g]);for(var A in y)h[A]=y[A]}return h},clone:function(a){var h={};for(var g in a)for(var y in h[g]={},a[g]){var A=a[g][y];h[g][y]=A&&(A.isColor||A.isMatrix3||A.isMatrix4||A.isVector2||A.isVector3||A.isVector4||A.isTexture)?A.clone():Array.isArray(A)?A.slice():A}return h}},$s={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\t\t\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#include <premultiplied_alpha_fragment>\n\t#include <encodings_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};function jr(a,h,g){return void 0===h&&void 0===g?this.set(a):this.setRGB(a,h,g)}jr.prototype={constructor:jr,isColor:!0,r:1,g:1,b:1,set:function(a){return a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this},setScalar:function(a){return this.r=a,this.g=a,this.b=a,this},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},setRGB:function(a,h,g){return this.r=a,this.g=h,this.b=g,this},setHSL:function(){function a(h,g,y){return y<0&&(y+=1),y>1&&(y-=1),y<1/6?h+6*(g-h)*y:y<.5?g:y<2/3?h+6*(g-h)*(2/3-y):h}return function(g,y,A){if(g=xs.euclideanModulo(g,1),y=xs.clamp(y,0,1),A=xs.clamp(A,0,1),0===y)this.r=this.g=this.b=A;else{var T=A<=.5?A*(1+y):A+y-A*y,R=2*A-T;this.r=a(R,T,g+1/3),this.g=a(R,T,g),this.b=a(R,T,g-1/3)}return this}}(),setStyle:function(a){function h(me){void 0!==me&&parseFloat(me)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}var g;if(g=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(a)){var y,T=g[2];switch(g[1]){case"rgb":case"rgba":if(y=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(T))return this.r=Math.min(255,parseInt(y[1],10))/255,this.g=Math.min(255,parseInt(y[2],10))/255,this.b=Math.min(255,parseInt(y[3],10))/255,h(y[5]),this;if(y=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(T))return this.r=Math.min(100,parseInt(y[1],10))/100,this.g=Math.min(100,parseInt(y[2],10))/100,this.b=Math.min(100,parseInt(y[3],10))/100,h(y[5]),this;break;case"hsl":case"hsla":if(y=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(T)){var R=parseFloat(y[1])/360,N=parseInt(y[2],10)/100,ie=parseInt(y[3],10)/100;return h(y[5]),this.setHSL(R,N,ie)}}}else if(g=/^\#([A-Fa-f0-9]+)$/.exec(a)){var ee,fe=(ee=g[1]).length;if(3===fe)return this.r=parseInt(ee.charAt(0)+ee.charAt(0),16)/255,this.g=parseInt(ee.charAt(1)+ee.charAt(1),16)/255,this.b=parseInt(ee.charAt(2)+ee.charAt(2),16)/255,this;if(6===fe)return this.r=parseInt(ee.charAt(0)+ee.charAt(1),16)/255,this.g=parseInt(ee.charAt(2)+ee.charAt(3),16)/255,this.b=parseInt(ee.charAt(4)+ee.charAt(5),16)/255,this}return a&&a.length>0&&(void 0!==(ee=Vg[a])?this.setHex(ee):console.warn("THREE.Color: Unknown color "+a)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},copyGammaToLinear:function(a,h){return void 0===h&&(h=2),this.r=Math.pow(a.r,h),this.g=Math.pow(a.g,h),this.b=Math.pow(a.b,h),this},copyLinearToGamma:function(a,h){void 0===h&&(h=2);var g=h>0?1/h:1;return this.r=Math.pow(a.r,g),this.g=Math.pow(a.g,g),this.b=Math.pow(a.b,g),this},convertGammaToLinear:function(){var a=this.r,h=this.g,g=this.b;return this.r=a*a,this.g=h*h,this.b=g*g,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(a){var N,ie,h=a||{h:0,s:0,l:0},g=this.r,y=this.g,A=this.b,T=Math.max(g,y,A),R=Math.min(g,y,A),ee=(R+T)/2;if(R===T)N=0,ie=0;else{var fe=T-R;switch(ie=ee<=.5?fe/(T+R):fe/(2-T-R),T){case g:N=(y-A)/fe+(y<A?6:0);break;case y:N=(A-g)/fe+2;break;case A:N=(g-y)/fe+4}N/=6}return h.h=N,h.s=ie,h.l=ee,h},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,h,g){var y=this.getHSL();return y.h+=a,y.s+=h,y.l+=g,this.setHSL(y.h,y.s,y.l),this},add:function(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this},addColors:function(a,h){return this.r=a.r+h.r,this.g=a.g+h.g,this.b=a.b+h.b,this},addScalar:function(a){return this.r+=a,this.g+=a,this.b+=a,this},sub:function(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this},multiply:function(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this},multiplyScalar:function(a){return this.r*=a,this.g*=a,this.b*=a,this},lerp:function(a,h){return this.r+=(a.r-this.r)*h,this.g+=(a.g-this.g)*h,this.b+=(a.b-this.b)*h,this},equals:function(a){return a.r===this.r&&a.g===this.g&&a.b===this.b},fromArray:function(a,h){return void 0===h&&(h=0),this.r=a[h],this.g=a[h+1],this.b=a[h+2],this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this.r,a[h+1]=this.g,a[h+2]=this.b,a},toJSON:function(){return this.getHex()}};var Vg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function es(a,h,g,y,A,T,R,N,ie,ee,fe,me){Wo.call(this,null,T,R,N,ie,ee,y,A,fe,me),this.image={data:a,width:h,height:g},this.magFilter=void 0!==ie?ie:qa,this.minFilter=void 0!==ee?ee:qa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}(es.prototype=Object.create(Wo.prototype)).constructor=es,es.prototype.isDataTexture=!0;var as={common:{diffuse:{value:new jr(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new jo(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Xi(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jr(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new jr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new jo(0,0,1,1)}}},Mc={basic:{uniforms:il.merge([as.common,as.aomap,as.lightmap,as.fog]),vertexShader:$s.meshbasic_vert,fragmentShader:$s.meshbasic_frag},lambert:{uniforms:il.merge([as.common,as.aomap,as.lightmap,as.emissivemap,as.fog,as.lights,{emissive:{value:new jr(0)}}]),vertexShader:$s.meshlambert_vert,fragmentShader:$s.meshlambert_frag},phong:{uniforms:il.merge([as.common,as.aomap,as.lightmap,as.emissivemap,as.bumpmap,as.normalmap,as.displacementmap,as.gradientmap,as.fog,as.lights,{emissive:{value:new jr(0)},specular:{value:new jr(1118481)},shininess:{value:30}}]),vertexShader:$s.meshphong_vert,fragmentShader:$s.meshphong_frag},standard:{uniforms:il.merge([as.common,as.aomap,as.lightmap,as.emissivemap,as.bumpmap,as.normalmap,as.displacementmap,as.roughnessmap,as.metalnessmap,as.fog,as.lights,{emissive:{value:new jr(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$s.meshphysical_vert,fragmentShader:$s.meshphysical_frag},points:{uniforms:il.merge([as.points,as.fog]),vertexShader:$s.points_vert,fragmentShader:$s.points_frag},dashed:{uniforms:il.merge([as.common,as.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$s.linedashed_vert,fragmentShader:$s.linedashed_frag},depth:{uniforms:il.merge([as.common,as.displacementmap]),vertexShader:$s.depth_vert,fragmentShader:$s.depth_frag},normal:{uniforms:il.merge([as.common,as.bumpmap,as.normalmap,as.displacementmap,{opacity:{value:1}}]),vertexShader:$s.normal_vert,fragmentShader:$s.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$s.cube_vert,fragmentShader:$s.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:$s.equirect_vert,fragmentShader:$s.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new Zt}},vertexShader:$s.distanceRGBA_vert,fragmentShader:$s.distanceRGBA_frag}};function sd(a,h){this.min=void 0!==a?a:new Xi(1/0,1/0),this.max=void 0!==h?h:new Xi(-1/0,-1/0)}function jp(a,h){var A,T,R,N,ie,ee,fe,me,g=a.context,y=a.state;this.render=function(Fe,nt,tt){if(0!==h.length){var Ke=new Zt,pt=tt.w/tt.z,vt=.5*tt.z,Xt=.5*tt.w,Bt=16/tt.w,cn=new Xi(Bt*pt,Bt),sn=new Zt(1,1,0),en=new Xi(1,1),hn=new sd;hn.min.set(tt.x,tt.y),hn.max.set(tt.x+(tt.z-16),tt.y+(tt.w-16)),void 0===N&&function Le(){var Fe=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),nt=new Uint16Array([0,1,2,0,2,3]);A=g.createBuffer(),T=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,A),g.bufferData(g.ARRAY_BUFFER,Fe,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,T),g.bufferData(g.ELEMENT_ARRAY_BUFFER,nt,g.STATIC_DRAW),fe=g.createTexture(),me=g.createTexture(),y.bindTexture(g.TEXTURE_2D,fe),g.texImage2D(g.TEXTURE_2D,0,g.RGB,16,16,0,g.RGB,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),y.bindTexture(g.TEXTURE_2D,me),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,16,16,0,g.RGBA,g.UNSIGNED_BYTE,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),R={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},N=function ke(Fe){var nt=g.createProgram(),tt=g.createShader(g.FRAGMENT_SHADER),Ke=g.createShader(g.VERTEX_SHADER),pt="precision "+a.getPrecision()+" float;\n";return g.shaderSource(tt,pt+Fe.fragmentShader),g.shaderSource(Ke,pt+Fe.vertexShader),g.compileShader(tt),g.compileShader(Ke),g.attachShader(nt,tt),g.attachShader(nt,Ke),g.linkProgram(nt),nt}(R),ie={vertex:g.getAttribLocation(N,"position"),uv:g.getAttribLocation(N,"uv")},ee={renderType:g.getUniformLocation(N,"renderType"),map:g.getUniformLocation(N,"map"),occlusionMap:g.getUniformLocation(N,"occlusionMap"),opacity:g.getUniformLocation(N,"opacity"),color:g.getUniformLocation(N,"color"),scale:g.getUniformLocation(N,"scale"),rotation:g.getUniformLocation(N,"rotation"),screenPosition:g.getUniformLocation(N,"screenPosition")}}(),g.useProgram(N),y.initAttributes(),y.enableAttribute(ie.vertex),y.enableAttribute(ie.uv),y.disableUnusedAttributes(),g.uniform1i(ee.occlusionMap,0),g.uniform1i(ee.map,1),g.bindBuffer(g.ARRAY_BUFFER,A),g.vertexAttribPointer(ie.vertex,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(ie.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,T),y.disable(g.CULL_FACE),y.setDepthWrite(!1);for(var On=0,Ai=h.length;On<Ai;On++){cn.set((Bt=16/tt.w)*pt,Bt);var ui=h[On];if(Ke.set(ui.matrixWorld.elements[12],ui.matrixWorld.elements[13],ui.matrixWorld.elements[14]),Ke.applyMatrix4(nt.matrixWorldInverse),Ke.applyProjection(nt.projectionMatrix),sn.copy(Ke),en.x=tt.x+sn.x*vt+vt-8,en.y=tt.y+sn.y*Xt+Xt-8,!0===hn.containsPoint(en)){y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,null),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,fe),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGB,en.x,en.y,16,16,0),g.uniform1i(ee.renderType,0),g.uniform2f(ee.scale,cn.x,cn.y),g.uniform3f(ee.screenPosition,sn.x,sn.y,sn.z),y.disable(g.BLEND),y.enable(g.DEPTH_TEST),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),y.activeTexture(g.TEXTURE0),y.bindTexture(g.TEXTURE_2D,me),g.copyTexImage2D(g.TEXTURE_2D,0,g.RGBA,en.x,en.y,16,16,0),g.uniform1i(ee.renderType,1),y.disable(g.DEPTH_TEST),y.activeTexture(g.TEXTURE1),y.bindTexture(g.TEXTURE_2D,fe),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0),ui.positionScreen.copy(sn),ui.customUpdateCallback?ui.customUpdateCallback(ui):ui.updateLensFlares(),g.uniform1i(ee.renderType,2),y.enable(g.BLEND);for(var jt=0,qt=ui.lensFlares.length;jt<qt;jt++){var Wn=ui.lensFlares[jt];Wn.opacity>.001&&Wn.scale>.001&&(sn.x=Wn.x,sn.y=Wn.y,sn.z=Wn.z,cn.x=(Bt=Wn.size*Wn.scale/tt.w)*pt,cn.y=Bt,g.uniform3f(ee.screenPosition,sn.x,sn.y,sn.z),g.uniform2f(ee.scale,cn.x,cn.y),g.uniform1f(ee.rotation,Wn.rotation),g.uniform1f(ee.opacity,Wn.opacity),g.uniform3f(ee.color,Wn.color.r,Wn.color.g,Wn.color.b),y.setBlending(Wn.blending,Wn.blendEquation,Wn.blendSrc,Wn.blendDst),a.setTexture2D(Wn.texture,1),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0))}}}y.enable(g.CULL_FACE),y.enable(g.DEPTH_TEST),y.setDepthWrite(!0),a.resetGLState()}}}function V_(a,h){var A,T,R,N,ie,ee,g=a.context,y=a.state,fe=new Zt,me=new kl,Le=new Zt;function nt(tt,Ke){return tt.renderOrder!==Ke.renderOrder?tt.renderOrder-Ke.renderOrder:tt.z!==Ke.z?Ke.z-tt.z:Ke.id-tt.id}this.render=function(tt,Ke){if(0!==h.length){void 0===R&&function ke(){var tt=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),Ke=new Uint16Array([0,1,2,0,2,3]);A=g.createBuffer(),T=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,A),g.bufferData(g.ARRAY_BUFFER,tt,g.STATIC_DRAW),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,T),g.bufferData(g.ELEMENT_ARRAY_BUFFER,Ke,g.STATIC_DRAW),R=function Fe(){var tt=g.createProgram(),Ke=g.createShader(g.VERTEX_SHADER),pt=g.createShader(g.FRAGMENT_SHADER);return g.shaderSource(Ke,["precision "+a.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),g.shaderSource(pt,["precision "+a.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),g.compileShader(Ke),g.compileShader(pt),g.attachShader(tt,Ke),g.attachShader(tt,pt),g.linkProgram(tt),tt}(),N={position:g.getAttribLocation(R,"position"),uv:g.getAttribLocation(R,"uv")},ie={uvOffset:g.getUniformLocation(R,"uvOffset"),uvScale:g.getUniformLocation(R,"uvScale"),rotation:g.getUniformLocation(R,"rotation"),scale:g.getUniformLocation(R,"scale"),color:g.getUniformLocation(R,"color"),map:g.getUniformLocation(R,"map"),opacity:g.getUniformLocation(R,"opacity"),modelViewMatrix:g.getUniformLocation(R,"modelViewMatrix"),projectionMatrix:g.getUniformLocation(R,"projectionMatrix"),fogType:g.getUniformLocation(R,"fogType"),fogDensity:g.getUniformLocation(R,"fogDensity"),fogNear:g.getUniformLocation(R,"fogNear"),fogFar:g.getUniformLocation(R,"fogFar"),fogColor:g.getUniformLocation(R,"fogColor"),alphaTest:g.getUniformLocation(R,"alphaTest")};var pt=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");pt.width=8,pt.height=8;var vt=pt.getContext("2d");vt.fillStyle="white",vt.fillRect(0,0,8,8),(ee=new Wo(pt)).needsUpdate=!0}(),g.useProgram(R),y.initAttributes(),y.enableAttribute(N.position),y.enableAttribute(N.uv),y.disableUnusedAttributes(),y.disable(g.CULL_FACE),y.enable(g.BLEND),g.bindBuffer(g.ARRAY_BUFFER,A),g.vertexAttribPointer(N.position,2,g.FLOAT,!1,16,0),g.vertexAttribPointer(N.uv,2,g.FLOAT,!1,16,8),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,T),g.uniformMatrix4fv(ie.projectionMatrix,!1,Ke.projectionMatrix.elements),y.activeTexture(g.TEXTURE0),g.uniform1i(ie.map,0);var pt=0,vt=0,Xt=tt.fog;Xt?(g.uniform3f(ie.fogColor,Xt.color.r,Xt.color.g,Xt.color.b),Xt.isFog?(g.uniform1f(ie.fogNear,Xt.near),g.uniform1f(ie.fogFar,Xt.far),g.uniform1i(ie.fogType,1),pt=1,vt=1):Xt.isFogExp2&&(g.uniform1f(ie.fogDensity,Xt.density),g.uniform1i(ie.fogType,2),pt=2,vt=2)):(g.uniform1i(ie.fogType,0),pt=0,vt=0);for(var Bt=0,cn=h.length;Bt<cn;Bt++)(sn=h[Bt]).modelViewMatrix.multiplyMatrices(Ke.matrixWorldInverse,sn.matrixWorld),sn.z=-sn.modelViewMatrix.elements[14];h.sort(nt);var en=[];for(Bt=0,cn=h.length;Bt<cn;Bt++){var sn,hn=(sn=h[Bt]).material;if(!1!==hn.visible){g.uniform1f(ie.alphaTest,hn.alphaTest),g.uniformMatrix4fv(ie.modelViewMatrix,!1,sn.modelViewMatrix.elements),sn.matrixWorld.decompose(fe,me,Le),en[0]=Le.x,en[1]=Le.y;var On=0;tt.fog&&hn.fog&&(On=vt),pt!==On&&(g.uniform1i(ie.fogType,On),pt=On),null!==hn.map?(g.uniform2f(ie.uvOffset,hn.map.offset.x,hn.map.offset.y),g.uniform2f(ie.uvScale,hn.map.repeat.x,hn.map.repeat.y)):(g.uniform2f(ie.uvOffset,0,0),g.uniform2f(ie.uvScale,1,1)),g.uniform1f(ie.opacity,hn.opacity),g.uniform3f(ie.color,hn.color.r,hn.color.g,hn.color.b),g.uniform1f(ie.rotation,hn.rotation),g.uniform2fv(ie.scale,en),y.setBlending(hn.blending,hn.blendEquation,hn.blendSrc,hn.blendDst),y.setDepthTest(hn.depthTest),y.setDepthWrite(hn.depthWrite),a.setTexture2D(hn.map?hn.map:ee,0),g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0)}}y.enable(g.CULL_FACE),a.resetGLState()}}}Mc.physical={uniforms:il.merge([Mc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:$s.meshphysical_vert,fragmentShader:$s.meshphysical_frag},sd.prototype={constructor:sd,set:function(a,h){return this.min.copy(a),this.max.copy(h),this},setFromPoints:function(a){this.makeEmpty();for(var h=0,g=a.length;h<g;h++)this.expandByPoint(a[h]);return this},setFromCenterAndSize:function(){var a=new Xi;return function(g,y){var A=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(A),this.max.copy(g).add(A),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(a){var h=a||new Xi;return this.isEmpty()?h.set(0,0):h.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var h=a||new Xi;return this.isEmpty()?h.set(0,0):h.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y},getParameter:function(a,h){return(h||new Xi).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)},clampPoint:function(a,h){return(h||new Xi).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new Xi;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}};var Oy=0;function Ks(){Object.defineProperty(this,"id",{value:Oy++}),this.uuid=xs.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=ne,this.side=Q,this.shading=Oe,this.vertexColors=re,this.opacity=1,this.transparent=!1,this.blendSrc=Jt,this.blendDst=nn,this.blendEquation=at,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ci,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function Zc(a){Ks.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}function mi(a){Ks.call(this),this.type="MeshDepthMaterial",this.depthPacking=gv,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(a)}function Es(a,h){this.min=void 0!==a?a:new Zt(1/0,1/0,1/0),this.max=void 0!==h?h:new Zt(-1/0,-1/0,-1/0)}function wt(a,h){this.center=void 0!==a?a:new Zt,this.radius=void 0!==h?h:0}function It(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function ut(a,h){this.normal=void 0!==a?a:new Zt(1,0,0),this.constant=void 0!==h?h:0}function Lo(a,h,g,y,A,T){this.planes=[void 0!==a?a:new ut,void 0!==h?h:new ut,void 0!==g?g:new ut,void 0!==y?y:new ut,void 0!==A?A:new ut,void 0!==T?T:new ut]}function Ao(a,h,g,y){var A=a.context,T=a.state,R=new Lo,N=new ms,ie=h.shadows,ee=new Xi,fe=new Xi(y.maxTextureSize,y.maxTextureSize),me=new Zt,Le=new Zt,ke=[],Ke=new Array(4),pt=new Array(4),vt={},Xt=[new Zt(1,0,0),new Zt(-1,0,0),new Zt(0,0,1),new Zt(0,0,-1),new Zt(0,1,0),new Zt(0,-1,0)],Bt=[new Zt(0,1,0),new Zt(0,1,0),new Zt(0,1,0),new Zt(0,1,0),new Zt(0,0,1),new Zt(0,0,-1)],cn=[new jo,new jo,new jo,new jo,new jo,new jo],sn=new mi;sn.depthPacking=Ay,sn.clipping=!0;for(var en=Mc.distanceRGBA,hn=il.clone(en.uniforms),On=0;4!==On;++On){var Ai=0!=(1&On),ui=0!=(2&On),jt=sn.clone();jt.morphTargets=Ai,jt.skinning=ui,Ke[On]=jt;var qt=new Zc({defines:{USE_SHADOWMAP:""},uniforms:hn,vertexShader:en.vertexShader,fragmentShader:en.fragmentShader,morphTargets:Ai,skinning:ui,clipping:!0});pt[On]=qt}var Wn=this;function ei(_i,fi,nr,zi){var qn=_i.geometry,Hn=null,f=Ke,c=_i.customDepthMaterial;if(nr&&(f=pt,c=_i.customDistanceMaterial),c)Hn=c;else{var d=!1;fi.morphTargets&&(qn&&qn.isBufferGeometry?d=qn.morphAttributes&&qn.morphAttributes.position&&qn.morphAttributes.position.length>0:qn&&qn.isGeometry&&(d=qn.morphTargets&&qn.morphTargets.length>0));var _=0;d&&(_|=1),_i.isSkinnedMesh&&fi.skinning&&(_|=2),Hn=f[_]}if(a.localClippingEnabled&&!0===fi.clipShadows&&0!==fi.clippingPlanes.length){var b=Hn.uuid,w=fi.uuid,E=vt[b];void 0===E&&(vt[b]=E={});var k=E[w];void 0===k&&(k=Hn.clone(),E[w]=k),Hn=k}Hn.visible=fi.visible,Hn.wireframe=fi.wireframe;var L=fi.side;return Wn.renderSingleSided&&L==ae&&(L=Q),Wn.renderReverseSided&&(L===Q?L=U:L===U&&(L=Q)),Hn.side=L,Hn.clipShadows=fi.clipShadows,Hn.clippingPlanes=fi.clippingPlanes,Hn.wireframeLinewidth=fi.wireframeLinewidth,Hn.linewidth=fi.linewidth,nr&&void 0!==Hn.uniforms.lightPos&&Hn.uniforms.lightPos.value.copy(zi),Hn}function Ii(_i,fi,nr){if(!1!==_i.visible){0!=(_i.layers.mask&fi.layers.mask)&&(_i.isMesh||_i.isLine||_i.isPoints)&&_i.castShadow&&(!1===_i.frustumCulled||!0===R.intersectsObject(_i))&&!0===_i.material.visible&&(_i.modelViewMatrix.multiplyMatrices(nr.matrixWorldInverse,_i.matrixWorld),ke.push(_i));for(var Hn=_i.children,f=0,c=Hn.length;f<c;f++)Ii(Hn[f],fi,nr)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=oe,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(_i,fi){if(!1!==Wn.enabled&&(!1!==Wn.autoUpdate||!1!==Wn.needsUpdate)&&0!==ie.length){T.buffers.color.setClear(1,1,1,1),T.disable(A.BLEND),T.setDepthTest(!0),T.setScissorTest(!1);for(var nr,zi,qn=0,Hn=ie.length;qn<Hn;qn++){var f=ie[qn],c=f.shadow;if(void 0!==c){var d=c.camera;if(ee.copy(c.mapSize),ee.min(fe),f&&f.isPointLight){nr=6,zi=!0;var m=ee.x,_=ee.y;cn[0].set(2*m,_,m,_),cn[1].set(0,_,m,_),cn[2].set(3*m,_,m,_),cn[3].set(m,_,m,_),cn[4].set(3*m,0,m,_),cn[5].set(m,0,m,_),ee.x*=4,ee.y*=2}else nr=1,zi=!1;null===c.map&&(c.map=new Ac(ee.x,ee.y,{minFilter:qa,magFilter:qa,format:nl}),d.updateProjectionMatrix()),c.isSpotLightShadow&&c.update(f),c&&c.isRectAreaLightShadow&&c.update(f);var w=c.map,E=c.matrix;Le.setFromMatrixPosition(f.matrixWorld),d.position.copy(Le),a.setRenderTarget(w),a.clear();for(var k=0;k<nr;k++){zi?(me.copy(d.position),me.add(Xt[k]),d.up.copy(Bt[k]),d.lookAt(me),T.viewport(cn[k])):(me.setFromMatrixPosition(f.target.matrixWorld),d.lookAt(me)),d.updateMatrixWorld(),d.matrixWorldInverse.getInverse(d.matrixWorld),E.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),E.multiply(d.projectionMatrix),E.multiply(d.matrixWorldInverse),N.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),R.setFromMatrix(N),ke.length=0,Ii(_i,fi,d);for(var G=0,K=ke.length;G<K;G++){var le=ke[G],de=g.update(le),pe=le.material;if(pe&&pe.isMultiMaterial)for(var Ie=de.groups,Ne=pe.materials,ze=0,Qe=Ie.length;ze<Qe;ze++){var qe=Ie[ze],dt=Ne[qe.materialIndex];if(!0===dt.visible){var Lt=ei(le,dt,zi,Le);a.renderBufferDirect(d,null,de,Lt,le,qe)}}else Lt=ei(le,pe,zi,Le),a.renderBufferDirect(d,null,de,Lt,le,null)}}}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}var kt=a.getClearColor(),mt=a.getClearAlpha();a.setClearColor(kt,mt),Wn.needsUpdate=!1}}}function ia(a,h){this.origin=void 0!==a?a:new Zt,this.direction=void 0!==h?h:new Zt}function Ps(a,h,g,y){this._x=a||0,this._y=h||0,this._z=g||0,this._order=y||Ps.DefaultOrder}function $p(){this.mask=1}Ks.prototype={constructor:Ks,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(a){!0===a&&this.update(),this._needsUpdate=a},setValues:function(a){if(void 0!==a)for(var h in a){var g=a[h];if(void 0!==g){var y=this[h];void 0!==y?y&&y.isColor?y.set(g):y&&y.isVector3&&g&&g.isVector3?y.copy(g):this[h]="overdraw"===h?Number(g):g:console.warn("THREE."+this.type+": '"+h+"' is not a property of this material.")}else console.warn("THREE.Material: '"+h+"' parameter is undefined.")}},toJSON:function(a){var h=void 0===a;h&&(a={textures:{},images:{}});var g={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function y(R){var N=[];for(var ie in R){var ee=R[ie];delete ee.metadata,N.push(ee)}return N}if(g.uuid=this.uuid,g.type=this.type,""!==this.name&&(g.name=this.name),this.color&&this.color.isColor&&(g.color=this.color.getHex()),void 0!==this.roughness&&(g.roughness=this.roughness),void 0!==this.metalness&&(g.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(g.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(g.specular=this.specular.getHex()),void 0!==this.shininess&&(g.shininess=this.shininess),void 0!==this.clearCoat&&(g.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(g.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(g.map=this.map.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(g.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(g.lightMap=this.lightMap.toJSON(a).uuid),this.bumpMap&&this.bumpMap.isTexture&&(g.bumpMap=this.bumpMap.toJSON(a).uuid,g.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(g.normalMap=this.normalMap.toJSON(a).uuid,g.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(g.displacementMap=this.displacementMap.toJSON(a).uuid,g.displacementScale=this.displacementScale,g.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(g.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(g.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(g.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(g.specularMap=this.specularMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(g.envMap=this.envMap.toJSON(a).uuid,g.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(g.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.size&&(g.size=this.size),void 0!==this.sizeAttenuation&&(g.sizeAttenuation=this.sizeAttenuation),this.blending!==ne&&(g.blending=this.blending),this.shading!==Oe&&(g.shading=this.shading),this.side!==Q&&(g.side=this.side),this.vertexColors!==re&&(g.vertexColors=this.vertexColors),this.opacity<1&&(g.opacity=this.opacity),!0===this.transparent&&(g.transparent=this.transparent),g.depthFunc=this.depthFunc,g.depthTest=this.depthTest,g.depthWrite=this.depthWrite,this.alphaTest>0&&(g.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(g.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(g.wireframe=this.wireframe),this.wireframeLinewidth>1&&(g.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(g.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(g.wireframeLinejoin=this.wireframeLinejoin),g.skinning=this.skinning,g.morphTargets=this.morphTargets,h){var A=y(a.textures),T=y(a.images);A.length>0&&(g.textures=A),T.length>0&&(g.images=T)}return g},clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.lights=a.lights,this.blending=a.blending,this.side=a.side,this.shading=a.shading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.overdraw=a.overdraw,this.visible=a.visible,this.clipShadows=a.clipShadows,this.clipIntersection=a.clipIntersection;var h=a.clippingPlanes,g=null;if(null!==h){var y=h.length;g=new Array(y);for(var A=0;A!==y;++A)g[A]=h[A].clone()}return this.clippingPlanes=g,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(Ks.prototype,Y.prototype),(Zc.prototype=Object.create(Ks.prototype)).constructor=Zc,Zc.prototype.isShaderMaterial=!0,Zc.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=il.clone(a.uniforms),this.defines=a.defines,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this.extensions=a.extensions,this},Zc.prototype.toJSON=function(a){var h=Ks.prototype.toJSON.call(this,a);return h.uniforms=this.uniforms,h.vertexShader=this.vertexShader,h.fragmentShader=this.fragmentShader,h},(mi.prototype=Object.create(Ks.prototype)).constructor=mi,mi.prototype.isMeshDepthMaterial=!0,mi.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.depthPacking=a.depthPacking,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this},Es.prototype={constructor:Es,isBox3:!0,set:function(a,h){return this.min.copy(a),this.max.copy(h),this},setFromArray:function(a){for(var h=1/0,g=1/0,y=1/0,A=-1/0,T=-1/0,R=-1/0,N=0,ie=a.length;N<ie;N+=3){var ee=a[N],fe=a[N+1],me=a[N+2];ee<h&&(h=ee),fe<g&&(g=fe),me<y&&(y=me),ee>A&&(A=ee),fe>T&&(T=fe),me>R&&(R=me)}this.min.set(h,g,y),this.max.set(A,T,R)},setFromBufferAttribute:function(a){for(var h=1/0,g=1/0,y=1/0,A=-1/0,T=-1/0,R=-1/0,N=0,ie=a.count;N<ie;N++){var ee=a.getX(N),fe=a.getY(N),me=a.getZ(N);ee<h&&(h=ee),fe<g&&(g=fe),me<y&&(y=me),ee>A&&(A=ee),fe>T&&(T=fe),me>R&&(R=me)}this.min.set(h,g,y),this.max.set(A,T,R)},setFromPoints:function(a){this.makeEmpty();for(var h=0,g=a.length;h<g;h++)this.expandByPoint(a[h]);return this},setFromCenterAndSize:function(){var a=new Zt;return function(g,y){var A=a.copy(y).multiplyScalar(.5);return this.min.copy(g).sub(A),this.max.copy(g).add(A),this}}(),setFromObject:function(){var a=new Zt;return function(g){var y=this;return g.updateMatrixWorld(!0),this.makeEmpty(),g.traverse(function(A){var T,R,N=A.geometry;if(void 0!==N)if(N.isGeometry){var ie=N.vertices;for(T=0,R=ie.length;T<R;T++)a.copy(ie[T]),a.applyMatrix4(A.matrixWorld),y.expandByPoint(a)}else if(N.isBufferGeometry){var ee=N.attributes.position;if(void 0!==ee)for(T=0,R=ee.count;T<R;T++)a.fromAttribute(ee,T).applyMatrix4(A.matrixWorld),y.expandByPoint(a)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.min.copy(a.min),this.max.copy(a.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(a){var h=a||new Zt;return this.isEmpty()?h.set(0,0,0):h.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(a){var h=a||new Zt;return this.isEmpty()?h.set(0,0,0):h.subVectors(this.max,this.min)},expandByPoint:function(a){return this.min.min(a),this.max.max(a),this},expandByVector:function(a){return this.min.sub(a),this.max.add(a),this},expandByScalar:function(a){return this.min.addScalar(-a),this.max.addScalar(a),this},containsPoint:function(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z},getParameter:function(a,h){return(h||new Zt).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)},intersectsSphere:function(){var a;return function(g){return void 0===a&&(a=new Zt),this.clampPoint(g.center,a),a.distanceToSquared(g.center)<=g.radius*g.radius}}(),intersectsPlane:function(a){var h,g;return a.normal.x>0?(h=a.normal.x*this.min.x,g=a.normal.x*this.max.x):(h=a.normal.x*this.max.x,g=a.normal.x*this.min.x),a.normal.y>0?(h+=a.normal.y*this.min.y,g+=a.normal.y*this.max.y):(h+=a.normal.y*this.max.y,g+=a.normal.y*this.min.y),a.normal.z>0?(h+=a.normal.z*this.min.z,g+=a.normal.z*this.max.z):(h+=a.normal.z*this.max.z,g+=a.normal.z*this.min.z),h<=a.constant&&g>=a.constant},clampPoint:function(a,h){return(h||new Zt).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new Zt;return function(g){return a.copy(g).clamp(this.min,this.max).sub(g).length()}}(),getBoundingSphere:function(){var a=new Zt;return function(g){var y=g||new wt;return this.getCenter(y.center),y.radius=.5*this.getSize(a).length(),y}}(),intersect:function(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this},union:function(a){return this.min.min(a.min),this.max.max(a.max),this},applyMatrix4:function(){var a=[new Zt,new Zt,new Zt,new Zt,new Zt,new Zt,new Zt,new Zt];return function(g){return this.isEmpty()||(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(g),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(g),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(g),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(g),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(g),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(g),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(g),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(g),this.setFromPoints(a)),this}}(),translate:function(a){return this.min.add(a),this.max.add(a),this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)}},wt.prototype={constructor:wt,set:function(a,h){return this.center.copy(a),this.radius=h,this},setFromPoints:function(){var a=new Es;return function(g,y){var A=this.center;void 0!==y?A.copy(y):a.setFromPoints(g).getCenter(A);for(var T=0,R=0,N=g.length;R<N;R++)T=Math.max(T,A.distanceToSquared(g[R]));return this.radius=Math.sqrt(T),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},empty:function(){return this.radius<=0},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-this.radius},intersectsSphere:function(a){var h=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=h*h},intersectsBox:function(a){return a.intersectsSphere(this)},intersectsPlane:function(a){return Math.abs(this.center.dot(a.normal)-a.constant)<=this.radius},clampPoint:function(a,h){var g=this.center.distanceToSquared(a),y=h||new Zt;return y.copy(a),g>this.radius*this.radius&&(y.sub(this.center).normalize(),y.multiplyScalar(this.radius).add(this.center)),y},getBoundingBox:function(a){var h=a||new Es;return h.set(this.center,this.center),h.expandByScalar(this.radius),h},applyMatrix4:function(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius}},It.prototype={constructor:It,isMatrix3:!0,set:function(a,h,g,y,A,T,R,N,ie){var ee=this.elements;return ee[0]=a,ee[1]=y,ee[2]=R,ee[3]=h,ee[4]=A,ee[5]=N,ee[6]=g,ee[7]=T,ee[8]=ie,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(a){var h=a.elements;return this.set(h[0],h[3],h[6],h[1],h[4],h[7],h[2],h[5],h[8]),this},setFromMatrix4:function(a){var h=a.elements;return this.set(h[0],h[4],h[8],h[1],h[5],h[9],h[2],h[6],h[10]),this},applyToVector3Array:function(){var a;return function(g,y,A){void 0===a&&(a=new Zt),void 0===y&&(y=0),void 0===A&&(A=g.length);for(var T=0,R=y;T<A;T+=3,R+=3)a.fromArray(g,R),a.applyMatrix3(this),a.toArray(g,R);return g}}(),applyToBufferAttribute:function(){var a;return function(g){void 0===a&&(a=new Zt);for(var y=0,A=g.count;y<A;y++)a.x=g.getX(y),a.y=g.getY(y),a.z=g.getZ(y),a.applyMatrix3(this),g.setXYZ(y,a.x,a.y,a.z);return g}}(),multiplyScalar:function(a){var h=this.elements;return h[0]*=a,h[3]*=a,h[6]*=a,h[1]*=a,h[4]*=a,h[7]*=a,h[2]*=a,h[5]*=a,h[8]*=a,this},determinant:function(){var a=this.elements,h=a[0],g=a[1],y=a[2],A=a[3],T=a[4],R=a[5],N=a[6],ie=a[7],ee=a[8];return h*T*ee-h*R*ie-g*A*ee+g*R*N+y*A*ie-y*T*N},getInverse:function(a,h){a&&a.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var g=a.elements,y=this.elements,A=g[0],T=g[1],R=g[2],N=g[3],ie=g[4],ee=g[5],fe=g[6],me=g[7],Le=g[8],ke=Le*ie-ee*me,Fe=ee*fe-Le*N,nt=me*N-ie*fe,tt=A*ke+T*Fe+R*nt;if(0===tt){var Ke="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===h)throw new Error(Ke);return console.warn(Ke),this.identity()}var pt=1/tt;return y[0]=ke*pt,y[1]=(R*me-Le*T)*pt,y[2]=(ee*T-R*ie)*pt,y[3]=Fe*pt,y[4]=(Le*A-R*fe)*pt,y[5]=(R*N-ee*A)*pt,y[6]=nt*pt,y[7]=(T*fe-me*A)*pt,y[8]=(ie*A-T*N)*pt,this},transpose:function(){var a,h=this.elements;return a=h[1],h[1]=h[3],h[3]=a,a=h[2],h[2]=h[6],h[6]=a,a=h[5],h[5]=h[7],h[7]=a,this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var h=this.elements;return a[0]=h[0],a[1]=h[3],a[2]=h[6],a[3]=h[1],a[4]=h[4],a[5]=h[7],a[6]=h[2],a[7]=h[5],a[8]=h[8],this},fromArray:function(a,h){void 0===h&&(h=0);for(var g=0;g<9;g++)this.elements[g]=a[g+h];return this},toArray:function(a,h){void 0===a&&(a=[]),void 0===h&&(h=0);var g=this.elements;return a[h]=g[0],a[h+1]=g[1],a[h+2]=g[2],a[h+3]=g[3],a[h+4]=g[4],a[h+5]=g[5],a[h+6]=g[6],a[h+7]=g[7],a[h+8]=g[8],a}},ut.prototype={constructor:ut,set:function(a,h){return this.normal.copy(a),this.constant=h,this},setComponents:function(a,h,g,y){return this.normal.set(a,h,g),this.constant=y,this},setFromNormalAndCoplanarPoint:function(a,h){return this.normal.copy(a),this.constant=-h.dot(this.normal),this},setFromCoplanarPoints:function(){var a=new Zt,h=new Zt;return function(y,A,T){var R=a.subVectors(T,A).cross(h.subVectors(y,A)).normalize();return this.setFromNormalAndCoplanarPoint(R,y),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.normal.copy(a.normal),this.constant=a.constant,this},normalize:function(){var a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,h){return this.orthoPoint(a,h).sub(a).negate()},orthoPoint:function(a,h){var g=this.distanceToPoint(a);return(h||new Zt).copy(this.normal).multiplyScalar(g)},intersectLine:function(){var a=new Zt;return function(g,y){var A=y||new Zt,T=g.delta(a),R=this.normal.dot(T);if(0===R)return 0===this.distanceToPoint(g.start)?A.copy(g.start):void 0;var N=-(g.start.dot(this.normal)+this.constant)/R;return N<0||N>1?void 0:A.copy(T).multiplyScalar(N).add(g.start)}}(),intersectsLine:function(a){var h=this.distanceToPoint(a.start),g=this.distanceToPoint(a.end);return h<0&&g>0||g<0&&h>0},intersectsBox:function(a){return a.intersectsPlane(this)},intersectsSphere:function(a){return a.intersectsPlane(this)},coplanarPoint:function(a){return(a||new Zt).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new Zt,h=new It;return function(y,A){var T=this.coplanarPoint(a).applyMatrix4(y),R=A||h.getNormalMatrix(y),N=this.normal.applyMatrix3(R).normalize();return this.constant=-T.dot(N),this}}(),translate:function(a){return this.constant=this.constant-a.dot(this.normal),this},equals:function(a){return a.normal.equals(this.normal)&&a.constant===this.constant}},Lo.prototype={constructor:Lo,set:function(a,h,g,y,A,T){var R=this.planes;return R[0].copy(a),R[1].copy(h),R[2].copy(g),R[3].copy(y),R[4].copy(A),R[5].copy(T),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){for(var h=this.planes,g=0;g<6;g++)h[g].copy(a.planes[g]);return this},setFromMatrix:function(a){var h=this.planes,g=a.elements,y=g[0],A=g[1],T=g[2],R=g[3],N=g[4],ie=g[5],ee=g[6],fe=g[7],me=g[8],Le=g[9],ke=g[10],Fe=g[11],nt=g[12],tt=g[13],Ke=g[14],pt=g[15];return h[0].setComponents(R-y,fe-N,Fe-me,pt-nt).normalize(),h[1].setComponents(R+y,fe+N,Fe+me,pt+nt).normalize(),h[2].setComponents(R+A,fe+ie,Fe+Le,pt+tt).normalize(),h[3].setComponents(R-A,fe-ie,Fe-Le,pt-tt).normalize(),h[4].setComponents(R-T,fe-ee,Fe-ke,pt-Ke).normalize(),h[5].setComponents(R+T,fe+ee,Fe+ke,pt+Ke).normalize(),this},intersectsObject:function(){var a=new wt;return function(g){var y=g.geometry;return null===y.boundingSphere&&y.computeBoundingSphere(),a.copy(y.boundingSphere).applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSprite:function(){var a=new wt;return function(g){return a.center.set(0,0,0),a.radius=.7071067811865476,a.applyMatrix4(g.matrixWorld),this.intersectsSphere(a)}}(),intersectsSphere:function(a){for(var h=this.planes,g=a.center,y=-a.radius,A=0;A<6;A++)if(h[A].distanceToPoint(g)<y)return!1;return!0},intersectsBox:function(){var a=new Zt,h=new Zt;return function(y){for(var A=this.planes,T=0;T<6;T++){var R=A[T];a.x=R.normal.x>0?y.min.x:y.max.x,h.x=R.normal.x>0?y.max.x:y.min.x,a.y=R.normal.y>0?y.min.y:y.max.y,h.y=R.normal.y>0?y.max.y:y.min.y,a.z=R.normal.z>0?y.min.z:y.max.z,h.z=R.normal.z>0?y.max.z:y.min.z;var N=R.distanceToPoint(a),ie=R.distanceToPoint(h);if(N<0&&ie<0)return!1}return!0}}(),containsPoint:function(a){for(var h=this.planes,g=0;g<6;g++)if(h[g].distanceToPoint(a)<0)return!1;return!0}},ia.prototype={constructor:ia,set:function(a,h){return this.origin.copy(a),this.direction.copy(h),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,h){return(h||new Zt).copy(this.direction).multiplyScalar(a).add(this.origin)},lookAt:function(a){return this.direction.copy(a).sub(this.origin).normalize(),this},recast:function(){var a=new Zt;return function(g){return this.origin.copy(this.at(g,a)),this}}(),closestPointToPoint:function(a,h){var g=h||new Zt;g.subVectors(a,this.origin);var y=g.dot(this.direction);return y<0?g.copy(this.origin):g.copy(this.direction).multiplyScalar(y).add(this.origin)},distanceToPoint:function(a){return Math.sqrt(this.distanceSqToPoint(a))},distanceSqToPoint:function(){var a=new Zt;return function(g){var y=a.subVectors(g,this.origin).dot(this.direction);return y<0?this.origin.distanceToSquared(g):(a.copy(this.direction).multiplyScalar(y).add(this.origin),a.distanceToSquared(g))}}(),distanceSqToSegment:function(){var a=new Zt,h=new Zt,g=new Zt;return function(A,T,R,N){a.copy(A).add(T).multiplyScalar(.5),h.copy(T).sub(A).normalize(),g.copy(this.origin).sub(a);var Fe,nt,tt,Ke,ie=.5*A.distanceTo(T),ee=-this.direction.dot(h),fe=g.dot(this.direction),me=-g.dot(h),Le=g.lengthSq(),ke=Math.abs(1-ee*ee);if(ke>0)if(nt=ee*fe-me,Ke=ie*ke,(Fe=ee*me-fe)>=0)if(nt>=-Ke)if(nt<=Ke){var pt=1/ke;tt=(Fe*=pt)*(Fe+ee*(nt*=pt)+2*fe)+nt*(ee*Fe+nt+2*me)+Le}else nt=ie,tt=-(Fe=Math.max(0,-(ee*nt+fe)))*Fe+nt*(nt+2*me)+Le;else nt=-ie,tt=-(Fe=Math.max(0,-(ee*nt+fe)))*Fe+nt*(nt+2*me)+Le;else nt<=-Ke?tt=-(Fe=Math.max(0,-(-ee*ie+fe)))*Fe+(nt=Fe>0?-ie:Math.min(Math.max(-ie,-me),ie))*(nt+2*me)+Le:nt<=Ke?(Fe=0,tt=(nt=Math.min(Math.max(-ie,-me),ie))*(nt+2*me)+Le):tt=-(Fe=Math.max(0,-(ee*ie+fe)))*Fe+(nt=Fe>0?ie:Math.min(Math.max(-ie,-me),ie))*(nt+2*me)+Le;else nt=ee>0?-ie:ie,tt=-(Fe=Math.max(0,-(ee*nt+fe)))*Fe+nt*(nt+2*me)+Le;return R&&R.copy(this.direction).multiplyScalar(Fe).add(this.origin),N&&N.copy(h).multiplyScalar(nt).add(a),tt}}(),intersectSphere:function(){var a=new Zt;return function(g,y){a.subVectors(g.center,this.origin);var A=a.dot(this.direction),T=a.dot(a)-A*A,R=g.radius*g.radius;if(T>R)return null;var N=Math.sqrt(R-T),ie=A-N,ee=A+N;return ie<0&&ee<0?null:this.at(ie<0?ee:ie,y)}}(),intersectsSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},distanceToPlane:function(a){var h=a.normal.dot(this.direction);if(0===h)return 0===a.distanceToPoint(this.origin)?0:null;var g=-(this.origin.dot(a.normal)+a.constant)/h;return g>=0?g:null},intersectPlane:function(a,h){var g=this.distanceToPlane(a);return null===g?null:this.at(g,h)},intersectsPlane:function(a){var h=a.distanceToPoint(this.origin);return 0===h||a.normal.dot(this.direction)*h<0},intersectBox:function(a,h){var g,y,A,T,R,N,ie=1/this.direction.x,ee=1/this.direction.y,fe=1/this.direction.z,me=this.origin;return ie>=0?(g=(a.min.x-me.x)*ie,y=(a.max.x-me.x)*ie):(g=(a.max.x-me.x)*ie,y=(a.min.x-me.x)*ie),ee>=0?(A=(a.min.y-me.y)*ee,T=(a.max.y-me.y)*ee):(A=(a.max.y-me.y)*ee,T=(a.min.y-me.y)*ee),g>T||A>y||((A>g||g!=g)&&(g=A),(T<y||y!=y)&&(y=T),fe>=0?(R=(a.min.z-me.z)*fe,N=(a.max.z-me.z)*fe):(R=(a.max.z-me.z)*fe,N=(a.min.z-me.z)*fe),g>N||R>y)||((R>g||g!=g)&&(g=R),(N<y||y!=y)&&(y=N),y<0)?null:this.at(g>=0?g:y,h)},intersectsBox:function(){var a=new Zt;return function(g){return null!==this.intersectBox(g,a)}}(),intersectTriangle:function(){var a=new Zt,h=new Zt,g=new Zt,y=new Zt;return function(T,R,N,ie,ee){h.subVectors(R,T),g.subVectors(N,T),y.crossVectors(h,g);var me,fe=this.direction.dot(y);if(fe>0){if(ie)return null;me=1}else{if(!(fe<0))return null;me=-1,fe=-fe}a.subVectors(this.origin,T);var Le=me*this.direction.dot(g.crossVectors(a,g));if(Le<0)return null;var ke=me*this.direction.dot(h.cross(a));if(ke<0||Le+ke>fe)return null;var Fe=-me*a.dot(y);return Fe<0?null:this.at(Fe/fe,ee)}}(),applyMatrix4:function(a){return this.direction.add(this.origin).applyMatrix4(a),this.origin.applyMatrix4(a),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}},Ps.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Ps.DefaultOrder="XYZ",Ps.prototype={constructor:Ps,isEuler:!0,get x(){return this._x},set x(a){this._x=a,this.onChangeCallback()},get y(){return this._y},set y(a){this._y=a,this.onChangeCallback()},get z(){return this._z},set z(a){this._z=a,this.onChangeCallback()},get order(){return this._order},set order(a){this._order=a,this.onChangeCallback()},set:function(a,h,g,y){return this._x=a,this._y=h,this._z=g,this._order=y||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this.onChangeCallback(),this},setFromRotationMatrix:function(a,h,g){var y=xs.clamp,A=a.elements,T=A[0],R=A[4],N=A[8],ie=A[1],ee=A[5],fe=A[9],me=A[2],Le=A[6],ke=A[10];return"XYZ"===(h=h||this._order)?(this._y=Math.asin(y(N,-1,1)),Math.abs(N)<.99999?(this._x=Math.atan2(-fe,ke),this._z=Math.atan2(-R,T)):(this._x=Math.atan2(Le,ee),this._z=0)):"YXZ"===h?(this._x=Math.asin(-y(fe,-1,1)),Math.abs(fe)<.99999?(this._y=Math.atan2(N,ke),this._z=Math.atan2(ie,ee)):(this._y=Math.atan2(-me,T),this._z=0)):"ZXY"===h?(this._x=Math.asin(y(Le,-1,1)),Math.abs(Le)<.99999?(this._y=Math.atan2(-me,ke),this._z=Math.atan2(-R,ee)):(this._y=0,this._z=Math.atan2(ie,T))):"ZYX"===h?(this._y=Math.asin(-y(me,-1,1)),Math.abs(me)<.99999?(this._x=Math.atan2(Le,ke),this._z=Math.atan2(ie,T)):(this._x=0,this._z=Math.atan2(-R,ee))):"YZX"===h?(this._z=Math.asin(y(ie,-1,1)),Math.abs(ie)<.99999?(this._x=Math.atan2(-fe,ee),this._y=Math.atan2(-me,T)):(this._x=0,this._y=Math.atan2(N,ke))):"XZY"===h?(this._z=Math.asin(-y(R,-1,1)),Math.abs(R)<.99999?(this._x=Math.atan2(Le,ee),this._y=Math.atan2(N,T)):(this._x=Math.atan2(-fe,ke),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+h),this._order=h,!1!==g&&this.onChangeCallback(),this},setFromQuaternion:function(){var a;return function(g,y,A){return void 0===a&&(a=new ms),a.makeRotationFromQuaternion(g),this.setFromRotationMatrix(a,y,A)}}(),setFromVector3:function(a,h){return this.set(a.x,a.y,a.z,h||this._order)},reorder:function(){var a=new kl;return function(g){return a.setFromEuler(this),this.setFromQuaternion(a,g)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this.onChangeCallback(),this},toArray:function(a,h){return void 0===a&&(a=[]),void 0===h&&(h=0),a[h]=this._x,a[h+1]=this._y,a[h+2]=this._z,a[h+3]=this._order,a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new Zt(this._x,this._y,this._z)},onChange:function(a){return this.onChangeCallback=a,this},onChangeCallback:function(){}},$p.prototype={constructor:$p,set:function(a){this.mask=1<<a},enable:function(a){this.mask|=1<<a},toggle:function(a){this.mask^=1<<a},disable:function(a){this.mask&=~(1<<a)},test:function(a){return 0!=(this.mask&a.mask)}};var sp=0;function _r(){Object.defineProperty(this,"id",{value:sp++}),this.uuid=xs.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_r.DefaultUp.clone();var a=new Zt,h=new Ps,g=new kl,y=new Zt(1,1,1);h.onChange(function A(){g.setFromEuler(h,!1)}),g.onChange(function T(){h.setFromQuaternion(g,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:a},rotation:{enumerable:!0,value:h},quaternion:{enumerable:!0,value:g},scale:{enumerable:!0,value:y},modelViewMatrix:{value:new ms},normalMatrix:{value:new It}}),this.matrix=new ms,this.matrixWorld=new ms,this.matrixAutoUpdate=_r.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new $p,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function Fl(a,h){this.start=void 0!==a?a:new Zt,this.end=void 0!==h?h:new Zt}function Ca(a,h,g){this.a=void 0!==a?a:new Zt,this.b=void 0!==h?h:new Zt,this.c=void 0!==g?g:new Zt}function Po(a,h,g,y,A,T){this.a=a,this.b=h,this.c=g,this.normal=y&&y.isVector3?y:new Zt,this.vertexNormals=Array.isArray(y)?y:[],this.color=A&&A.isColor?A:new jr,this.vertexColors=Array.isArray(A)?A:[],this.materialIndex=void 0!==T?T:0}function Ba(a){Ks.call(this),this.type="MeshBasicMaterial",this.color=new jr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Je,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(a)}function fr(a,h,g){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=xs.generateUUID(),this.array=a,this.itemSize=h,this.count=void 0!==a?a.length/h:0,this.normalized=!0===g,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Rh(a,h){fr.call(this,new Int8Array(a),h)}function gl(a,h){fr.call(this,new Uint8Array(a),h)}function Fd(a,h){fr.call(this,new Uint8ClampedArray(a),h)}function op(a,h){fr.call(this,new Int16Array(a),h)}function Nd(a,h){fr.call(this,new Uint16Array(a),h)}function _f(a,h){fr.call(this,new Int32Array(a),h)}function Ou(a,h){fr.call(this,new Uint32Array(a),h)}function rs(a,h){fr.call(this,new Float32Array(a),h)}function Dc(a,h){fr.call(this,new Float64Array(a),h)}function Ug(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ts(){Object.defineProperty(this,"id",{value:Hg()}),this.uuid=xs.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}_r.DefaultUp=new Zt(0,1,0),_r.DefaultMatrixAutoUpdate=!0,Object.assign(_r.prototype,Y.prototype,{isObject3D:!0,applyMatrix:function(a){this.matrix.multiplyMatrices(a,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(a,h){this.quaternion.setFromAxisAngle(a,h)},setRotationFromEuler:function(a){this.quaternion.setFromEuler(a,!0)},setRotationFromMatrix:function(a){this.quaternion.setFromRotationMatrix(a)},setRotationFromQuaternion:function(a){this.quaternion.copy(a)},rotateOnAxis:function(){var a=new kl;return function(g,y){return a.setFromAxisAngle(g,y),this.quaternion.multiply(a),this}}(),rotateX:function(){var a=new Zt(1,0,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateY:function(){var a=new Zt(0,1,0);return function(g){return this.rotateOnAxis(a,g)}}(),rotateZ:function(){var a=new Zt(0,0,1);return function(g){return this.rotateOnAxis(a,g)}}(),translateOnAxis:function(){var a=new Zt;return function(g,y){return a.copy(g).applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(y)),this}}(),translateX:function(){var a=new Zt(1,0,0);return function(g){return this.translateOnAxis(a,g)}}(),translateY:function(){var a=new Zt(0,1,0);return function(g){return this.translateOnAxis(a,g)}}(),translateZ:function(){var a=new Zt(0,0,1);return function(g){return this.translateOnAxis(a,g)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new ms;return function(g){return g.applyMatrix4(a.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new ms;return function(g){a.lookAt(g,this.position,this.up),this.quaternion.setFromRotationMatrix(a)}}(),add:function(a){if(arguments.length>1){for(var h=0;h<arguments.length;h++)this.add(arguments[h]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,a.dispatchEvent({type:"added"}),this.children.push(a)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)},remove:function(a){if(arguments.length>1)for(var h=0;h<arguments.length;h++)this.remove(arguments[h]);var g=this.children.indexOf(a);-1!==g&&(a.parent=null,a.dispatchEvent({type:"removed"}),this.children.splice(g,1))},getObjectById:function(a){return this.getObjectByProperty("id",a)},getObjectByName:function(a){return this.getObjectByProperty("name",a)},getObjectByProperty:function(a,h){if(this[a]===h)return this;for(var g=0,y=this.children.length;g<y;g++){var T=this.children[g].getObjectByProperty(a,h);if(void 0!==T)return T}},getWorldPosition:function(a){var h=a||new Zt;return this.updateMatrixWorld(!0),h.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new Zt,h=new Zt;return function(y){var A=y||new kl;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,A,h),A}}(),getWorldRotation:function(){var a=new kl;return function(g){var y=g||new Ps;return this.getWorldQuaternion(a),y.setFromQuaternion(a,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new Zt,h=new kl;return function(y){var A=y||new Zt;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,h,A),A}}(),getWorldDirection:function(){var a=new kl;return function(g){var y=g||new Zt;return this.getWorldQuaternion(a),y.set(0,0,1).applyQuaternion(a)}}(),raycast:function(){},traverse:function(a){a(this);for(var h=this.children,g=0,y=h.length;g<y;g++)h[g].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var h=this.children,g=0,y=h.length;g<y;g++)h[g].traverseVisible(a)}},traverseAncestors:function(a){var h=this.parent;null!==h&&(a(h),h.traverseAncestors(a))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix(),(!0===this.matrixWorldNeedsUpdate||!0===a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var h=this.children,g=0,y=h.length;g<y;g++)h[g].updateMatrixWorld(a)},toJSON:function(a){var h=void 0===a||""===a,g={};h&&(a={geometries:{},materials:{},textures:{},images:{}},g.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var y={};if(y.uuid=this.uuid,y.type=this.type,""!==this.name&&(y.name=this.name),"{}"!==JSON.stringify(this.userData)&&(y.userData=this.userData),!0===this.castShadow&&(y.castShadow=!0),!0===this.receiveShadow&&(y.receiveShadow=!0),!1===this.visible&&(y.visible=!1),y.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===a.geometries[this.geometry.uuid]&&(a.geometries[this.geometry.uuid]=this.geometry.toJSON(a)),y.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===a.materials[this.material.uuid]&&(a.materials[this.material.uuid]=this.material.toJSON(a)),y.material=this.material.uuid),this.children.length>0){y.children=[];for(var A=0;A<this.children.length;A++)y.children.push(this.children[A].toJSON(a).object)}if(h){var T=ee(a.geometries),R=ee(a.materials),N=ee(a.textures),ie=ee(a.images);T.length>0&&(g.geometries=T),R.length>0&&(g.materials=R),N.length>0&&(g.textures=N),ie.length>0&&(g.images=ie)}return g.object=y,g;function ee(fe){var me=[];for(var Le in fe){var ke=fe[Le];delete ke.metadata,me.push(ke)}return me}},clone:function(a){return(new this.constructor).copy(this,a)},copy:function(a,h){if(void 0===h&&(h=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===h)for(var g=0;g<a.children.length;g++)this.add(a.children[g].clone());return this}}),Fl.prototype={constructor:Fl,set:function(a,h){return this.start.copy(a),this.end.copy(h),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.start.copy(a.start),this.end.copy(a.end),this},getCenter:function(a){return(a||new Zt).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new Zt).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,h){var g=h||new Zt;return this.delta(g).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new Zt,h=new Zt;return function(y,A){a.subVectors(y,this.start),h.subVectors(this.end,this.start);var T=h.dot(h),N=h.dot(a)/T;return A&&(N=xs.clamp(N,0,1)),N}}(),closestPointToPoint:function(a,h,g){var y=this.closestPointToPointParameter(a,h),A=g||new Zt;return this.delta(A).multiplyScalar(y).add(this.start)},applyMatrix4:function(a){return this.start.applyMatrix4(a),this.end.applyMatrix4(a),this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)}},Ca.normal=function(){var a=new Zt;return function(g,y,A,T){var R=T||new Zt;R.subVectors(A,y),a.subVectors(g,y),R.cross(a);var N=R.lengthSq();return N>0?R.multiplyScalar(1/Math.sqrt(N)):R.set(0,0,0)}}(),Ca.barycoordFromPoint=function(){var a=new Zt,h=new Zt,g=new Zt;return function(A,T,R,N,ie){a.subVectors(N,T),h.subVectors(R,T),g.subVectors(A,T);var ee=a.dot(a),fe=a.dot(h),me=a.dot(g),Le=h.dot(h),ke=h.dot(g),Fe=ee*Le-fe*fe,nt=ie||new Zt;if(0===Fe)return nt.set(-2,-1,-1);var tt=1/Fe,Ke=(Le*me-fe*ke)*tt,pt=(ee*ke-fe*me)*tt;return nt.set(1-Ke-pt,pt,Ke)}}(),Ca.containsPoint=function(){var a=new Zt;return function(g,y,A,T){var R=Ca.barycoordFromPoint(g,y,A,T,a);return R.x>=0&&R.y>=0&&R.x+R.y<=1}}(),Ca.prototype={constructor:Ca,set:function(a,h,g){return this.a.copy(a),this.b.copy(h),this.c.copy(g),this},setFromPointsAndIndices:function(a,h,g,y){return this.a.copy(a[h]),this.b.copy(a[g]),this.c.copy(a[y]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},area:function(){var a=new Zt,h=new Zt;return function(){return a.subVectors(this.c,this.b),h.subVectors(this.a,this.b),.5*a.cross(h).length()}}(),midpoint:function(a){return(a||new Zt).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return Ca.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new ut).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,h){return Ca.barycoordFromPoint(a,this.a,this.b,this.c,h)},containsPoint:function(a){return Ca.containsPoint(a,this.a,this.b,this.c)},closestPointToPoint:function(){var a,h,g,y;return function(T,R){void 0===a&&(a=new ut,h=[new Fl,new Fl,new Fl],g=new Zt,y=new Zt);var N=R||new Zt,ie=1/0;if(a.setFromCoplanarPoints(this.a,this.b,this.c),a.projectPoint(T,g),!0===this.containsPoint(g))N.copy(g);else{h[0].set(this.a,this.b),h[1].set(this.b,this.c),h[2].set(this.c,this.a);for(var ee=0;ee<h.length;ee++){h[ee].closestPointToPoint(g,!0,y);var fe=g.distanceToSquared(y);fe<ie&&(ie=fe,N.copy(y))}}return N}}(),equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}},Po.prototype={constructor:Po,clone:function(){return(new this.constructor).copy(this)},copy:function(a){this.a=a.a,this.b=a.b,this.c=a.c,this.normal.copy(a.normal),this.color.copy(a.color),this.materialIndex=a.materialIndex;for(var h=0,g=a.vertexNormals.length;h<g;h++)this.vertexNormals[h]=a.vertexNormals[h].clone();for(h=0,g=a.vertexColors.length;h<g;h++)this.vertexColors[h]=a.vertexColors[h].clone();return this}},(Ba.prototype=Object.create(Ks.prototype)).constructor=Ba,Ba.prototype.isMeshBasicMaterial=!0,Ba.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this},fr.prototype={constructor:fr,isBufferAttribute:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.itemSize:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.dynamic=a.dynamic,this},copyAt:function(a,h,g){a*=this.itemSize,g*=h.itemSize;for(var y=0,A=this.itemSize;y<A;y++)this.array[a+y]=h.array[g+y];return this},copyArray:function(a){return this.array.set(a),this},copyColorsArray:function(a){for(var h=this.array,g=0,y=0,A=a.length;y<A;y++){var T=a[y];void 0===T&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",y),T=new jr),h[g++]=T.r,h[g++]=T.g,h[g++]=T.b}return this},copyIndicesArray:function(a){for(var h=this.array,g=0,y=0,A=a.length;y<A;y++){var T=a[y];h[g++]=T.a,h[g++]=T.b,h[g++]=T.c}return this},copyVector2sArray:function(a){for(var h=this.array,g=0,y=0,A=a.length;y<A;y++){var T=a[y];void 0===T&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",y),T=new Xi),h[g++]=T.x,h[g++]=T.y}return this},copyVector3sArray:function(a){for(var h=this.array,g=0,y=0,A=a.length;y<A;y++){var T=a[y];void 0===T&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",y),T=new Zt),h[g++]=T.x,h[g++]=T.y,h[g++]=T.z}return this},copyVector4sArray:function(a){for(var h=this.array,g=0,y=0,A=a.length;y<A;y++){var T=a[y];void 0===T&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",y),T=new jo),h[g++]=T.x,h[g++]=T.y,h[g++]=T.z,h[g++]=T.w}return this},set:function(a,h){return void 0===h&&(h=0),this.array.set(a,h),this},getX:function(a){return this.array[a*this.itemSize]},setX:function(a,h){return this.array[a*this.itemSize]=h,this},getY:function(a){return this.array[a*this.itemSize+1]},setY:function(a,h){return this.array[a*this.itemSize+1]=h,this},getZ:function(a){return this.array[a*this.itemSize+2]},setZ:function(a,h){return this.array[a*this.itemSize+2]=h,this},getW:function(a){return this.array[a*this.itemSize+3]},setW:function(a,h){return this.array[a*this.itemSize+3]=h,this},setXY:function(a,h,g){return this.array[0+(a*=this.itemSize)]=h,this.array[a+1]=g,this},setXYZ:function(a,h,g,y){return this.array[0+(a*=this.itemSize)]=h,this.array[a+1]=g,this.array[a+2]=y,this},setXYZW:function(a,h,g,y,A){return this.array[0+(a*=this.itemSize)]=h,this.array[a+1]=g,this.array[a+2]=y,this.array[a+3]=A,this},onUpload:function(a){return this.onUploadCallback=a,this},clone:function(){return(new this.constructor).copy(this)}},(Rh.prototype=Object.create(fr.prototype)).constructor=Rh,(gl.prototype=Object.create(fr.prototype)).constructor=gl,(Fd.prototype=Object.create(fr.prototype)).constructor=Fd,(op.prototype=Object.create(fr.prototype)).constructor=op,(Nd.prototype=Object.create(fr.prototype)).constructor=Nd,(_f.prototype=Object.create(fr.prototype)).constructor=_f,(Ou.prototype=Object.create(fr.prototype)).constructor=Ou,(rs.prototype=Object.create(fr.prototype)).constructor=rs,(Dc.prototype=Object.create(fr.prototype)).constructor=Dc,Object.assign(Ug.prototype,{computeGroups:function(a){for(var h,g=[],y=void 0,A=a.faces,T=0;T<A.length;T++){var R=A[T];R.materialIndex!==y&&(y=R.materialIndex,void 0!==h&&(h.count=3*T-h.start,g.push(h)),h={start:3*T,materialIndex:y})}void 0!==h&&(h.count=3*T-h.start,g.push(h)),this.groups=g},fromGeometry:function(a){var ie,h=a.faces,g=a.vertices,y=a.faceVertexUvs,A=y[0]&&y[0].length>0,T=y[1]&&y[1].length>0,R=a.morphTargets,N=R.length;if(N>0){ie=[];for(var ee=0;ee<N;ee++)ie[ee]=[];this.morphTargets.position=ie}var Le,fe=a.morphNormals,me=fe.length;if(me>0){for(Le=[],ee=0;ee<me;ee++)Le[ee]=[];this.morphTargets.normal=Le}var ke=a.skinIndices,Fe=a.skinWeights,nt=ke.length===g.length,tt=Fe.length===g.length;for(ee=0;ee<h.length;ee++){var Ke=h[ee];this.vertices.push(g[Ke.a],g[Ke.b],g[Ke.c]);var pt=Ke.vertexNormals;if(3===pt.length)this.normals.push(pt[0],pt[1],pt[2]);else{var vt=Ke.normal;this.normals.push(vt,vt,vt)}var cn,Xt=Ke.vertexColors;if(3===Xt.length)this.colors.push(Xt[0],Xt[1],Xt[2]);else{var Bt=Ke.color;this.colors.push(Bt,Bt,Bt)}!0===A&&(void 0!==(cn=y[0][ee])?this.uvs.push(cn[0],cn[1],cn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",ee),this.uvs.push(new Xi,new Xi,new Xi))),!0===T&&(void 0!==(cn=y[1][ee])?this.uvs2.push(cn[0],cn[1],cn[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",ee),this.uvs2.push(new Xi,new Xi,new Xi)));for(var sn=0;sn<N;sn++){var en=R[sn].vertices;ie[sn].push(en[Ke.a],en[Ke.b],en[Ke.c])}for(sn=0;sn<me;sn++){var hn=fe[sn].vertexNormals[ee];Le[sn].push(hn.a,hn.b,hn.c)}nt&&this.skinIndices.push(ke[Ke.a],ke[Ke.b],ke[Ke.c]),tt&&this.skinWeights.push(Fe[Ke.a],Fe[Ke.b],Fe[Ke.c])}return this.computeGroups(a),this.verticesNeedUpdate=a.verticesNeedUpdate,this.normalsNeedUpdate=a.normalsNeedUpdate,this.colorsNeedUpdate=a.colorsNeedUpdate,this.uvsNeedUpdate=a.uvsNeedUpdate,this.groupsNeedUpdate=a.groupsNeedUpdate,this}}),Object.assign(Ts.prototype,Y.prototype,{isGeometry:!0,applyMatrix:function(a){for(var h=(new It).getNormalMatrix(a),g=0,y=this.vertices.length;g<y;g++)this.vertices[g].applyMatrix4(a);for(g=0,y=this.faces.length;g<y;g++){var T=this.faces[g];T.normal.applyMatrix3(h).normalize();for(var R=0,N=T.vertexNormals.length;R<N;R++)T.vertexNormals[R].applyMatrix3(h).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new ms),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new ms),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new ms),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,A){return void 0===a&&(a=new ms),a.makeTranslation(g,y,A),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,A){return void 0===a&&(a=new ms),a.makeScale(g,y,A),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new _r),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),fromBufferGeometry:function(a){var h=this,g=null!==a.index?a.index.array:void 0,y=a.attributes,A=y.position.array,T=void 0!==y.normal?y.normal.array:void 0,R=void 0!==y.color?y.color.array:void 0,N=void 0!==y.uv?y.uv.array:void 0,ie=void 0!==y.uv2?y.uv2.array:void 0;void 0!==ie&&(this.faceVertexUvs[1]=[]);for(var ee=[],fe=[],me=[],Le=0,ke=0;Le<A.length;Le+=3,ke+=2)h.vertices.push(new Zt(A[Le],A[Le+1],A[Le+2])),void 0!==T&&ee.push(new Zt(T[Le],T[Le+1],T[Le+2])),void 0!==R&&h.colors.push(new jr(R[Le],R[Le+1],R[Le+2])),void 0!==N&&fe.push(new Xi(N[ke],N[ke+1])),void 0!==ie&&me.push(new Xi(ie[ke],ie[ke+1]));function Fe(Xt,Bt,cn,sn){var On=new Po(Xt,Bt,cn,void 0!==T?[ee[Xt].clone(),ee[Bt].clone(),ee[cn].clone()]:[],void 0!==R?[h.colors[Xt].clone(),h.colors[Bt].clone(),h.colors[cn].clone()]:[],sn);h.faces.push(On),void 0!==N&&h.faceVertexUvs[0].push([fe[Xt].clone(),fe[Bt].clone(),fe[cn].clone()]),void 0!==ie&&h.faceVertexUvs[1].push([me[Xt].clone(),me[Bt].clone(),me[cn].clone()])}if(void 0!==g){var nt=a.groups;if(nt.length>0)for(Le=0;Le<nt.length;Le++)for(var tt=nt[Le],Ke=tt.start,vt=(ke=Ke,Ke+tt.count);ke<vt;ke+=3)Fe(g[ke],g[ke+1],g[ke+2],tt.materialIndex);else for(Le=0;Le<g.length;Le+=3)Fe(g[Le],g[Le+1],g[Le+2])}else for(Le=0;Le<A.length/3;Le+=3)Fe(Le,Le+1,Le+2);return this.computeFaceNormals(),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},normalize:function(){this.computeBoundingSphere();var a=this.boundingSphere.center,h=this.boundingSphere.radius,g=0===h?1:1/h,y=new ms;return y.set(g,0,0,-g*a.x,0,g,0,-g*a.y,0,0,g,-g*a.z,0,0,0,1),this.applyMatrix(y),this},computeFaceNormals:function(){for(var a=new Zt,h=new Zt,g=0,y=this.faces.length;g<y;g++){var A=this.faces[g],T=this.vertices[A.a],R=this.vertices[A.b];a.subVectors(this.vertices[A.c],R),h.subVectors(T,R),a.cross(h),a.normalize(),A.normal.copy(a)}},computeVertexNormals:function(a){var h,g,y,A,T,R;for(void 0===a&&(a=!0),R=new Array(this.vertices.length),h=0,g=this.vertices.length;h<g;h++)R[h]=new Zt;if(a){var N,ie,fe=new Zt,me=new Zt;for(y=0,A=this.faces.length;y<A;y++)N=this.vertices[(T=this.faces[y]).a],fe.subVectors(this.vertices[T.c],ie=this.vertices[T.b]),me.subVectors(N,ie),fe.cross(me),R[T.a].add(fe),R[T.b].add(fe),R[T.c].add(fe)}else for(this.computeFaceNormals(),y=0,A=this.faces.length;y<A;y++)R[(T=this.faces[y]).a].add(T.normal),R[T.b].add(T.normal),R[T.c].add(T.normal);for(h=0,g=this.vertices.length;h<g;h++)R[h].normalize();for(y=0,A=this.faces.length;y<A;y++){var Le=(T=this.faces[y]).vertexNormals;3===Le.length?(Le[0].copy(R[T.a]),Le[1].copy(R[T.b]),Le[2].copy(R[T.c])):(Le[0]=R[T.a].clone(),Le[1]=R[T.b].clone(),Le[2]=R[T.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,h,g;for(this.computeFaceNormals(),a=0,h=this.faces.length;a<h;a++){var y=(g=this.faces[a]).vertexNormals;3===y.length?(y[0].copy(g.normal),y[1].copy(g.normal),y[2].copy(g.normal)):(y[0]=g.normal.clone(),y[1]=g.normal.clone(),y[2]=g.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,h,g,y,A;for(g=0,y=this.faces.length;g<y;g++)for((A=this.faces[g]).__originalFaceNormal?A.__originalFaceNormal.copy(A.normal):A.__originalFaceNormal=A.normal.clone(),A.__originalVertexNormals||(A.__originalVertexNormals=[]),a=0,h=A.vertexNormals.length;a<h;a++)A.__originalVertexNormals[a]?A.__originalVertexNormals[a].copy(A.vertexNormals[a]):A.__originalVertexNormals[a]=A.vertexNormals[a].clone();var T=new Ts;for(T.faces=this.faces,a=0,h=this.morphTargets.length;a<h;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];var R=this.morphNormals[a].faceNormals,N=this.morphNormals[a].vertexNormals;for(g=0,y=this.faces.length;g<y;g++)ee=new Zt,fe={a:new Zt,b:new Zt,c:new Zt},R.push(ee),N.push(fe)}var ee,fe,ie=this.morphNormals[a];for(T.vertices=this.morphTargets[a].vertices,T.computeFaceNormals(),T.computeVertexNormals(),g=0,y=this.faces.length;g<y;g++)fe=ie.vertexNormals[g],(ee=ie.faceNormals[g]).copy((A=this.faces[g]).normal),fe.a.copy(A.vertexNormals[0]),fe.b.copy(A.vertexNormals[1]),fe.c.copy(A.vertexNormals[2])}for(g=0,y=this.faces.length;g<y;g++)(A=this.faces[g]).normal=A.__originalFaceNormal,A.vertexNormals=A.__originalVertexNormals},computeLineDistances:function(){for(var a=0,h=this.vertices,g=0,y=h.length;g<y;g++)g>0&&(a+=h[g].distanceTo(h[g-1])),this.lineDistances[g]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Es),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new wt),this.boundingSphere.setFromPoints(this.vertices)},merge:function(a,h,g){if(!1!==(a&&a.isGeometry)){var y,A=this.vertices.length,T=this.vertices,R=a.vertices,N=this.faces,ie=a.faces,ee=this.faceVertexUvs[0],fe=a.faceVertexUvs[0],me=this.colors,Le=a.colors;void 0===g&&(g=0),void 0!==h&&(y=(new It).getNormalMatrix(h));for(var ke=0,Fe=R.length;ke<Fe;ke++){var tt=R[ke].clone();void 0!==h&&tt.applyMatrix4(h),T.push(tt)}for(ke=0,Fe=Le.length;ke<Fe;ke++)me.push(Le[ke].clone());for(ke=0,Fe=ie.length;ke<Fe;ke++){var pt,vt,Ke=ie[ke],Bt=Ke.vertexNormals,cn=Ke.vertexColors;(pt=new Po(Ke.a+A,Ke.b+A,Ke.c+A)).normal.copy(Ke.normal),void 0!==y&&pt.normal.applyMatrix3(y).normalize();for(var sn=0,en=Bt.length;sn<en;sn++)vt=Bt[sn].clone(),void 0!==y&&vt.applyMatrix3(y).normalize(),pt.vertexNormals.push(vt);for(pt.color.copy(Ke.color),sn=0,en=cn.length;sn<en;sn++)pt.vertexColors.push(cn[sn].clone());pt.materialIndex=Ke.materialIndex+g,N.push(pt)}for(ke=0,Fe=fe.length;ke<Fe;ke++){var hn=fe[ke],On=[];if(void 0!==hn){for(sn=0,en=hn.length;sn<en;sn++)On.push(hn[sn].clone());ee.push(On)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",a)},mergeMesh:function(a){!1!==(a&&a.isMesh)?(a.matrixAutoUpdate&&a.updateMatrix(),this.merge(a.geometry,a.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",a)},mergeVertices:function(){var y,A,N,ie,ee,fe,me,Le,a={},h=[],g=[],R=Math.pow(10,4);for(N=0,ie=this.vertices.length;N<ie;N++)y=this.vertices[N],void 0===a[A=Math.round(y.x*R)+"_"+Math.round(y.y*R)+"_"+Math.round(y.z*R)]?(a[A]=N,h.push(this.vertices[N]),g[N]=h.length-1):g[N]=g[a[A]];var ke=[];for(N=0,ie=this.faces.length;N<ie;N++){(ee=this.faces[N]).a=g[ee.a],ee.b=g[ee.b],ee.c=g[ee.c],fe=[ee.a,ee.b,ee.c];for(var nt=0;nt<3;nt++)if(fe[nt]===fe[(nt+1)%3]){ke.push(N);break}}for(N=ke.length-1;N>=0;N--){var tt=ke[N];for(this.faces.splice(tt,1),me=0,Le=this.faceVertexUvs.length;me<Le;me++)this.faceVertexUvs[me].splice(tt,1)}var Ke=this.vertices.length-h.length;return this.vertices=h,Ke},sortFacesByMaterialIndex:function(){for(var a=this.faces,h=a.length,g=0;g<h;g++)a[g]._id=g;a.sort(function y(ee,fe){return ee.materialIndex-fe.materialIndex});var R,N,A=this.faceVertexUvs[0],T=this.faceVertexUvs[1];for(A&&A.length===h&&(R=[]),T&&T.length===h&&(N=[]),g=0;g<h;g++){var ie=a[g]._id;R&&R.push(A[ie]),N&&N.push(T[ie])}R&&(this.faceVertexUvs[0]=R),N&&(this.faceVertexUvs[1]=N)},toJSON:function(){var a={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var h=this.parameters;for(var g in h)void 0!==h[g]&&(a[g]=h[g]);return a}for(var y=[],A=0;A<this.vertices.length;A++){var T=this.vertices[A];y.push(T.x,T.y,T.z)}var R=[],N=[],ie={},ee=[],fe={},me=[],Le={};for(A=0;A<this.faces.length;A++){var ke=this.faces[A],tt=void 0!==this.faceVertexUvs[0][A],Ke=ke.normal.length()>0,pt=ke.vertexNormals.length>0,vt=1!==ke.color.r||1!==ke.color.g||1!==ke.color.b,Xt=ke.vertexColors.length>0,Bt=0;if(Bt=hn(Bt,0,0),Bt=hn(Bt,1,!0),Bt=hn(Bt,2,!1),Bt=hn(Bt,3,tt),Bt=hn(Bt,4,Ke),Bt=hn(Bt,5,pt),Bt=hn(Bt,6,vt),Bt=hn(Bt,7,Xt),R.push(Bt),R.push(ke.a,ke.b,ke.c),R.push(ke.materialIndex),tt){var cn=this.faceVertexUvs[0][A];R.push(ui(cn[0]),ui(cn[1]),ui(cn[2]))}if(Ke&&R.push(On(ke.normal)),pt){var sn=ke.vertexNormals;R.push(On(sn[0]),On(sn[1]),On(sn[2]))}if(vt&&R.push(Ai(ke.color)),Xt){var en=ke.vertexColors;R.push(Ai(en[0]),Ai(en[1]),Ai(en[2]))}}function hn(jt,qt,Wn){return Wn?jt|1<<qt:jt&~(1<<qt)}function On(jt){var qt=jt.x.toString()+jt.y.toString()+jt.z.toString();return void 0!==ie[qt]||(ie[qt]=N.length/3,N.push(jt.x,jt.y,jt.z)),ie[qt]}function Ai(jt){var qt=jt.r.toString()+jt.g.toString()+jt.b.toString();return void 0!==fe[qt]||(fe[qt]=ee.length,ee.push(jt.getHex())),fe[qt]}function ui(jt){var qt=jt.x.toString()+jt.y.toString();return void 0!==Le[qt]||(Le[qt]=me.length/2,me.push(jt.x,jt.y)),Le[qt]}return a.data={},a.data.vertices=y,a.data.normals=N,ee.length>0&&(a.data.colors=ee),me.length>0&&(a.data.uvs=[me]),a.data.faces=R,a},clone:function(){return(new Ts).copy(this)},copy:function(a){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var h=a.vertices,g=0,y=h.length;g<y;g++)this.vertices.push(h[g].clone());var A=a.colors;for(g=0,y=A.length;g<y;g++)this.colors.push(A[g].clone());var T=a.faces;for(g=0,y=T.length;g<y;g++)this.faces.push(T[g].clone());for(g=0,y=a.faceVertexUvs.length;g<y;g++){var R=a.faceVertexUvs[g];void 0===this.faceVertexUvs[g]&&(this.faceVertexUvs[g]=[]);for(var N=0,ie=R.length;N<ie;N++){for(var ee=R[N],fe=[],me=0,Le=ee.length;me<Le;me++)fe.push(ee[me].clone());this.faceVertexUvs[g].push(fe)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Ev=0;function Hg(){return Ev++}function Er(){Object.defineProperty(this,"id",{value:Hg()}),this.uuid=xs.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function ba(a,h){_r.call(this),this.type="Mesh",this.geometry=void 0!==a?a:new Er,this.material=void 0!==h?h:new Ba({color:16777215*Math.random()}),this.drawMode=Xa,this.updateMorphTargets()}function Nl(a,h,g,y,A,T){Er.call(this),this.type="BoxBufferGeometry",this.parameters={width:a,height:h,depth:g,widthSegments:y,heightSegments:A,depthSegments:T};var R=this,N=function pt(Bt,cn,sn){var en=0;return en+=(Bt+1)*(cn+1)*2,(en+=(Bt+1)*(sn+1)*2)+(sn+1)*(cn+1)*2}(y=Math.floor(y)||1,A=Math.floor(A)||1,T=Math.floor(T)||1),ie=function vt(Bt,cn,sn){var en=0;return en+=Bt*cn*2,6*((en+=Bt*sn*2)+sn*cn*2)}(y,A,T),ee=new(ie>65535?Uint32Array:Uint16Array)(ie),fe=new Float32Array(3*N),me=new Float32Array(3*N),Le=new Float32Array(2*N),ke=0,Fe=0,nt=0,tt=0,Ke=0;function Xt(Bt,cn,sn,en,hn,On,Ai,ui,jt,qt,Wn){for(var ei=On/jt,Ii=Ai/qt,_i=On/2,fi=Ai/2,nr=ui/2,zi=jt+1,qn=qt+1,Hn=0,f=0,c=new Zt,d=0;d<qn;d++)for(var m=d*Ii-fi,_=0;_<zi;_++)c[Bt]=(_*ei-_i)*en,c[cn]=m*hn,c[sn]=nr,fe[ke]=c.x,fe[ke+1]=c.y,fe[ke+2]=c.z,c[Bt]=0,c[cn]=0,c[sn]=ui>0?1:-1,me[ke]=c.x,me[ke+1]=c.y,me[ke+2]=c.z,Le[Fe]=_/jt,Le[Fe+1]=1-d/qt,ke+=3,Fe+=2,Hn+=1;for(d=0;d<qt;d++)for(_=0;_<jt;_++){var E=tt+_+zi*(d+1),k=tt+(_+1)+zi*(d+1),L=tt+(_+1)+zi*d;ee[nt]=tt+_+zi*d,ee[nt+1]=E,ee[nt+2]=L,ee[nt+3]=E,ee[nt+4]=k,ee[nt+5]=L,nt+=6,f+=6}R.addGroup(Ke,f,Wn),Ke+=f,tt+=Hn}Xt("z","y","x",-1,-1,g,h,a,T,A,0),Xt("z","y","x",1,-1,g,h,-a,T,A,1),Xt("x","z","y",1,1,a,g,h,y,T,2),Xt("x","z","y",1,-1,a,g,-h,y,T,3),Xt("x","y","z",1,-1,a,h,g,y,A,4),Xt("x","y","z",-1,-1,a,h,-g,y,A,5),this.setIndex(new fr(ee,1)),this.addAttribute("position",new fr(fe,3)),this.addAttribute("normal",new fr(me,3)),this.addAttribute("uv",new fr(Le,2))}function ra(a,h,g,y){Er.call(this),this.type="PlaneBufferGeometry",this.parameters={width:a,height:h,widthSegments:g,heightSegments:y};for(var A=a/2,T=h/2,R=Math.floor(g)||1,N=Math.floor(y)||1,ie=R+1,ee=N+1,fe=a/R,me=h/N,Le=new Float32Array(ie*ee*3),ke=new Float32Array(ie*ee*3),Fe=new Float32Array(ie*ee*2),nt=0,tt=0,Ke=0;Ke<ee;Ke++)for(var pt=Ke*me-T,vt=0;vt<ie;vt++)Le[nt]=vt*fe-A,Le[nt+1]=-pt,ke[nt+2]=1,Fe[tt]=vt/R,Fe[tt+1]=1-Ke/N,nt+=3,tt+=2;nt=0;var Bt=new(Le.length/3>65535?Uint32Array:Uint16Array)(R*N*6);for(Ke=0;Ke<N;Ke++)for(vt=0;vt<R;vt++){var sn=vt+ie*(Ke+1),en=vt+1+ie*(Ke+1),hn=vt+1+ie*Ke;Bt[nt]=vt+ie*Ke,Bt[nt+1]=sn,Bt[nt+2]=hn,Bt[nt+3]=sn,Bt[nt+4]=en,Bt[nt+5]=hn,nt+=6}this.setIndex(new fr(Bt,1)),this.addAttribute("position",new fr(Le,3)),this.addAttribute("normal",new fr(ke,3)),this.addAttribute("uv",new fr(Fe,2))}function za(){_r.call(this),this.type="Camera",this.matrixWorldInverse=new ms,this.projectionMatrix=new ms}function wl(a,h,g,y){za.call(this),this.type="PerspectiveCamera",this.fov=void 0!==a?a:50,this.zoom=1,this.near=void 0!==g?g:.1,this.far=void 0!==y?y:2e3,this.focus=10,this.aspect=void 0!==h?h:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Bd(a,h,g,y,A,T){za.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=h,this.top=g,this.bottom=y,this.near=void 0!==A?A:.1,this.far=void 0!==T?T:2e3,this.updateProjectionMatrix()}function uc(a,h,g){var y,T,R;return{setMode:function A(fe){y=fe},setIndex:function N(fe){fe.array instanceof Uint32Array&&h.get("OES_element_index_uint")?(T=a.UNSIGNED_INT,R=4):fe.array instanceof Uint16Array?(T=a.UNSIGNED_SHORT,R=2):(T=a.UNSIGNED_BYTE,R=1)},render:function ie(fe,me){a.drawElements(y,me,T,fe*R),g.calls++,g.vertices+=me,y===a.TRIANGLES&&(g.faces+=me/3)},renderInstances:function ee(fe,me,Le){var ke=h.get("ANGLE_instanced_arrays");null!==ke?(ke.drawElementsInstancedANGLE(y,Le,T,me*R,fe.maxInstancedCount),g.calls++,g.vertices+=Le*fe.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=fe.maxInstancedCount*Le/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function Cf(a,h,g){var y;return{setMode:function A(N){y=N},render:function T(N,ie){a.drawArrays(y,N,ie),g.calls++,g.vertices+=ie,y===a.TRIANGLES&&(g.faces+=ie/3)},renderInstances:function R(N){var ie=h.get("ANGLE_instanced_arrays");if(null!==ie){var ee=N.attributes.position,fe=0;ie.drawArraysInstancedANGLE(y,0,fe=ee.isInterleavedBufferAttribute?ee.data.count:ee.count,N.maxInstancedCount),g.calls++,g.vertices+=fe*N.maxInstancedCount,y===a.TRIANGLES&&(g.faces+=N.maxInstancedCount*fe/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}function Va(){var a={};return{get:function(h){if(void 0!==a[h.id])return a[h.id];var g;switch(h.type){case"DirectionalLight":g={direction:new Zt,color:new jr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Xi};break;case"SpotLight":g={position:new Zt,direction:new Zt,color:new jr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Xi};break;case"PointLight":g={position:new Zt,color:new jr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Xi};break;case"HemisphereLight":g={direction:new Zt,skyColor:new jr,groundColor:new jr};break;case"RectAreaLight":g={color:new jr,position:new Zt,halfWidth:new Zt,halfHeight:new Zt}}return a[h.id]=g,g}}}function Mv(a,h,g){var y=a.createShader(h);return a.shaderSource(y,g),a.compileShader(y),!1===a.getShaderParameter(y,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==a.getShaderInfoLog(y)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",h===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(y),function Tv(a){for(var h=a.split("\n"),g=0;g<h.length;g++)h[g]=g+1+": "+h[g];return h.join("\n")}(g)),y}Object.assign(Er.prototype,Y.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(a){this.index=a},addAttribute:function(a,h){return!1===(h&&h.isBufferAttribute)&&!1===(h&&h.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(a,new fr(arguments[1],arguments[2]))):"index"===a?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(h)):(this.attributes[a]=h,this)},getAttribute:function(a){return this.attributes[a]},removeAttribute:function(a){return delete this.attributes[a],this},addGroup:function(a,h,g){this.groups.push({start:a,count:h,materialIndex:void 0!==g?g:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(a,h){this.drawRange.start=a,this.drawRange.count=h},applyMatrix:function(a){var h=this.attributes.position;void 0!==h&&(a.applyToVector3Array(h.array),h.needsUpdate=!0);var g=this.attributes.normal;return void 0!==g&&((new It).getNormalMatrix(a).applyToVector3Array(g.array),g.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var a;return function(g){return void 0===a&&(a=new ms),a.makeRotationX(g),this.applyMatrix(a),this}}(),rotateY:function(){var a;return function(g){return void 0===a&&(a=new ms),a.makeRotationY(g),this.applyMatrix(a),this}}(),rotateZ:function(){var a;return function(g){return void 0===a&&(a=new ms),a.makeRotationZ(g),this.applyMatrix(a),this}}(),translate:function(){var a;return function(g,y,A){return void 0===a&&(a=new ms),a.makeTranslation(g,y,A),this.applyMatrix(a),this}}(),scale:function(){var a;return function(g,y,A){return void 0===a&&(a=new ms),a.makeScale(g,y,A),this.applyMatrix(a),this}}(),lookAt:function(){var a;return function(g){void 0===a&&(a=new _r),a.lookAt(g),a.updateMatrix(),this.applyMatrix(a.matrix)}}(),center:function(){this.computeBoundingBox();var a=this.boundingBox.getCenter().negate();return this.translate(a.x,a.y,a.z),a},setFromObject:function(a){var h=a.geometry;if(a.isPoints||a.isLine){var g=new rs(3*h.vertices.length,3),y=new rs(3*h.colors.length,3);if(this.addAttribute("position",g.copyVector3sArray(h.vertices)),this.addAttribute("color",y.copyColorsArray(h.colors)),h.lineDistances&&h.lineDistances.length===h.vertices.length){var A=new rs(h.lineDistances.length,1);this.addAttribute("lineDistance",A.copyArray(h.lineDistances))}null!==h.boundingSphere&&(this.boundingSphere=h.boundingSphere.clone()),null!==h.boundingBox&&(this.boundingBox=h.boundingBox.clone())}else a.isMesh&&h&&h.isGeometry&&this.fromGeometry(h);return this},updateFromObject:function(a){var y,h=a.geometry;if(a.isMesh){var g=h.__directGeometry;if(!0===h.elementsNeedUpdate&&(g=void 0,h.elementsNeedUpdate=!1),void 0===g)return this.fromGeometry(h);g.verticesNeedUpdate=h.verticesNeedUpdate,g.normalsNeedUpdate=h.normalsNeedUpdate,g.colorsNeedUpdate=h.colorsNeedUpdate,g.uvsNeedUpdate=h.uvsNeedUpdate,g.groupsNeedUpdate=h.groupsNeedUpdate,h.verticesNeedUpdate=!1,h.normalsNeedUpdate=!1,h.colorsNeedUpdate=!1,h.uvsNeedUpdate=!1,h.groupsNeedUpdate=!1,h=g}return!0===h.verticesNeedUpdate&&(void 0!==(y=this.attributes.position)&&(y.copyVector3sArray(h.vertices),y.needsUpdate=!0),h.verticesNeedUpdate=!1),!0===h.normalsNeedUpdate&&(void 0!==(y=this.attributes.normal)&&(y.copyVector3sArray(h.normals),y.needsUpdate=!0),h.normalsNeedUpdate=!1),!0===h.colorsNeedUpdate&&(void 0!==(y=this.attributes.color)&&(y.copyColorsArray(h.colors),y.needsUpdate=!0),h.colorsNeedUpdate=!1),h.uvsNeedUpdate&&(void 0!==(y=this.attributes.uv)&&(y.copyVector2sArray(h.uvs),y.needsUpdate=!0),h.uvsNeedUpdate=!1),h.lineDistancesNeedUpdate&&(void 0!==(y=this.attributes.lineDistance)&&(y.copyArray(h.lineDistances),y.needsUpdate=!0),h.lineDistancesNeedUpdate=!1),h.groupsNeedUpdate&&(h.computeGroups(a.geometry),this.groups=h.groups,h.groupsNeedUpdate=!1),this},fromGeometry:function(a){return a.__directGeometry=(new Ug).fromGeometry(a),this.fromDirectGeometry(a.__directGeometry)},fromDirectGeometry:function(a){var h=new Float32Array(3*a.vertices.length);if(this.addAttribute("position",new fr(h,3).copyVector3sArray(a.vertices)),a.normals.length>0){var g=new Float32Array(3*a.normals.length);this.addAttribute("normal",new fr(g,3).copyVector3sArray(a.normals))}if(a.colors.length>0){var y=new Float32Array(3*a.colors.length);this.addAttribute("color",new fr(y,3).copyColorsArray(a.colors))}if(a.uvs.length>0){var A=new Float32Array(2*a.uvs.length);this.addAttribute("uv",new fr(A,2).copyVector2sArray(a.uvs))}if(a.uvs2.length>0){var T=new Float32Array(2*a.uvs2.length);this.addAttribute("uv2",new fr(T,2).copyVector2sArray(a.uvs2))}if(a.indices.length>0){var N=new(a.vertices.length>65535?Uint32Array:Uint16Array)(3*a.indices.length);this.setIndex(new fr(N,1).copyIndicesArray(a.indices))}for(var ie in this.groups=a.groups,a.morphTargets){for(var ee=[],fe=a.morphTargets[ie],me=0,Le=fe.length;me<Le;me++){var ke=fe[me],Fe=new rs(3*ke.length,3);ee.push(Fe.copyVector3sArray(ke))}this.morphAttributes[ie]=ee}if(a.skinIndices.length>0){var nt=new rs(4*a.skinIndices.length,4);this.addAttribute("skinIndex",nt.copyVector4sArray(a.skinIndices))}if(a.skinWeights.length>0){var tt=new rs(4*a.skinWeights.length,4);this.addAttribute("skinWeight",tt.copyVector4sArray(a.skinWeights))}return null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Es);var a=this.attributes.position;void 0!==a?this.boundingBox.setFromBufferAttribute(a):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var a=new Es,h=new Zt;return function(){null===this.boundingSphere&&(this.boundingSphere=new wt);var y=this.attributes.position;if(y){var A=this.boundingSphere.center;a.setFromBufferAttribute(y),a.getCenter(A);for(var T=0,R=0,N=y.count;R<N;R++)h.x=y.getX(R),h.y=y.getY(R),h.z=y.getZ(R),T=Math.max(T,A.distanceToSquared(h));this.boundingSphere.radius=Math.sqrt(T),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,h=this.attributes,g=this.groups;if(h.position){var y=h.position.array;if(void 0===h.normal)this.addAttribute("normal",new fr(new Float32Array(y.length),3));else for(var A=h.normal.array,T=0,R=A.length;T<R;T++)A[T]=0;var ie,ee,fe,N=h.normal.array,me=new Zt,Le=new Zt,ke=new Zt,Fe=new Zt,nt=new Zt;if(a){var tt=a.array;0===g.length&&this.addGroup(0,tt.length);for(var Ke=0,pt=g.length;Ke<pt;++Ke){var vt=g[Ke],Xt=vt.start;for(T=Xt,R=Xt+vt.count;T<R;T+=3)ee=3*tt[T+1],fe=3*tt[T+2],me.fromArray(y,ie=3*tt[T+0]),Le.fromArray(y,ee),ke.fromArray(y,fe),Fe.subVectors(ke,Le),nt.subVectors(me,Le),Fe.cross(nt),N[ie]+=Fe.x,N[ie+1]+=Fe.y,N[ie+2]+=Fe.z,N[ee]+=Fe.x,N[ee+1]+=Fe.y,N[ee+2]+=Fe.z,N[fe]+=Fe.x,N[fe+1]+=Fe.y,N[fe+2]+=Fe.z}}else for(T=0,R=y.length;T<R;T+=9)me.fromArray(y,T),Le.fromArray(y,T+3),ke.fromArray(y,T+6),Fe.subVectors(ke,Le),nt.subVectors(me,Le),Fe.cross(nt),N[T]=Fe.x,N[T+1]=Fe.y,N[T+2]=Fe.z,N[T+3]=Fe.x,N[T+4]=Fe.y,N[T+5]=Fe.z,N[T+6]=Fe.x,N[T+7]=Fe.y,N[T+8]=Fe.z;this.normalizeNormals(),h.normal.needsUpdate=!0}},merge:function(a,h){if(!1!==(a&&a.isBufferGeometry)){void 0===h&&(h=0);var g=this.attributes;for(var y in g)if(void 0!==a.attributes[y])for(var T=g[y].array,R=a.attributes[y],N=R.array,ee=0,fe=R.itemSize*h;ee<N.length;ee++,fe++)T[fe]=N[ee];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a)},normalizeNormals:function(){for(var h,g,y,A,a=this.attributes.normal.array,T=0,R=a.length;T<R;T+=3)h=a[T],g=a[T+1],y=a[T+2],A=1/Math.sqrt(h*h+g*g+y*y),a[T]*=A,a[T+1]*=A,a[T+2]*=A},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var a=new Er,h=this.index.array,g=this.attributes;for(var y in g){for(var A=g[y],T=A.array,R=A.itemSize,N=new T.constructor(h.length*R),ie=0,ee=0,fe=0,me=h.length;fe<me;fe++){ie=h[fe]*R;for(var Le=0;Le<R;Le++)N[ee++]=T[ie++]}a.addAttribute(y,new fr(N,R))}return a},toJSON:function(){var a={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),void 0!==this.parameters){var h=this.parameters;for(var g in h)void 0!==h[g]&&(a[g]=h[g]);return a}a.data={attributes:{}};var y=this.index;if(null!==y){var A=Array.prototype.slice.call(y.array);a.data.index={type:y.array.constructor.name,array:A}}var T=this.attributes;for(var g in T){var R=T[g];A=Array.prototype.slice.call(R.array),a.data.attributes[g]={itemSize:R.itemSize,type:R.array.constructor.name,array:A,normalized:R.normalized}}var N=this.groups;N.length>0&&(a.data.groups=JSON.parse(JSON.stringify(N)));var ie=this.boundingSphere;return null!==ie&&(a.data.boundingSphere={center:ie.center.toArray(),radius:ie.radius}),a},clone:function(){return(new Er).copy(this)},copy:function(a){var h=a.index;null!==h&&this.setIndex(h.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var T=a.groups,R=0,N=T.length;R<N;R++){var ie=T[R];this.addGroup(ie.start,ie.count,ie.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Er.MaxIndex=65535,ba.prototype=Object.assign(Object.create(_r.prototype),{constructor:ba,isMesh:!0,setDrawMode:function(a){this.drawMode=a},copy:function(a){return _r.prototype.copy.call(this,a),this.drawMode=a.drawMode,this},updateMorphTargets:function(){var a=this.geometry.morphTargets;if(void 0!==a&&a.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var h=0,g=a.length;h<g;h++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[a[h].name]=h}},raycast:function(){var a=new ms,h=new ia,g=new wt,y=new Zt,A=new Zt,T=new Zt,R=new Zt,N=new Zt,ie=new Zt,ee=new Xi,fe=new Xi,me=new Xi,Le=new Zt,ke=new Zt,Fe=new Zt;function nt(pt,vt,Xt,Bt,cn,sn,en){return Ca.barycoordFromPoint(pt,vt,Xt,Bt,Le),cn.multiplyScalar(Le.x),sn.multiplyScalar(Le.y),en.multiplyScalar(Le.z),cn.add(sn).add(en),cn.clone()}function tt(pt,vt,Xt,Bt,cn,sn,en){var On=pt.material;if(null===(On.side===U?Xt.intersectTriangle(sn,cn,Bt,!0,en):Xt.intersectTriangle(Bt,cn,sn,On.side!==ae,en)))return null;Fe.copy(en),Fe.applyMatrix4(pt.matrixWorld);var Ai=vt.ray.origin.distanceTo(Fe);return Ai<vt.near||Ai>vt.far?null:{distance:Ai,point:Fe.clone(),object:pt}}function Ke(pt,vt,Xt,Bt,cn,sn,en,hn){y.fromArray(Bt,3*sn),A.fromArray(Bt,3*en),T.fromArray(Bt,3*hn);var On=tt(pt,vt,Xt,y,A,T,ke);return On&&(cn&&(ee.fromArray(cn,2*sn),fe.fromArray(cn,2*en),me.fromArray(cn,2*hn),On.uv=nt(ke,y,A,T,ee,fe,me)),On.face=new Po(sn,en,hn,Ca.normal(y,A,T)),On.faceIndex=sn),On}return function(vt,Xt){var en,hn,Bt=this.geometry,cn=this.material,sn=this.matrixWorld;if(void 0!==cn&&(null===Bt.boundingSphere&&Bt.computeBoundingSphere(),g.copy(Bt.boundingSphere),g.applyMatrix4(sn),!1!==vt.ray.intersectsSphere(g)&&(a.getInverse(sn),h.copy(vt.ray).applyMatrix4(a),null===Bt.boundingBox||!1!==h.intersectsBox(Bt.boundingBox))))if(Bt.isBufferGeometry){var On,jt=Bt.index,qt=Bt.attributes,Wn=qt.position.array;if(void 0!==qt.uv&&(en=qt.uv.array),null!==jt)for(var ei=jt.array,Ii=0,_i=ei.length;Ii<_i;Ii+=3)(hn=Ke(this,vt,h,Wn,en,On=ei[Ii],ei[Ii+1],ei[Ii+2]))&&(hn.faceIndex=Math.floor(Ii/3),Xt.push(hn));else for(Ii=0,_i=Wn.length;Ii<_i;Ii+=9)(hn=Ke(this,vt,h,Wn,en,On=Ii/3,On+1,On+2))&&(hn.index=On,Xt.push(hn))}else if(Bt.isGeometry){var fi,nr,zi,qn=cn&&cn.isMultiMaterial,Hn=!0===qn?cn.materials:null,f=Bt.vertices,c=Bt.faces,d=Bt.faceVertexUvs[0];d.length>0&&(en=d);for(var m=0,_=c.length;m<_;m++){var b=c[m],w=!0===qn?Hn[b.materialIndex]:cn;if(void 0!==w){if(fi=f[b.a],nr=f[b.b],zi=f[b.c],!0===w.morphTargets){var E=Bt.morphTargets,k=this.morphTargetInfluences;y.set(0,0,0),A.set(0,0,0),T.set(0,0,0);for(var L=0,G=E.length;L<G;L++){var K=k[L];if(0!==K){var le=E[L].vertices;y.addScaledVector(R.subVectors(le[b.a],fi),K),A.addScaledVector(N.subVectors(le[b.b],nr),K),T.addScaledVector(ie.subVectors(le[b.c],zi),K)}}y.add(fi),A.add(nr),T.add(zi),fi=y,nr=A,zi=T}if(hn=tt(this,vt,h,fi,nr,zi,ke)){if(en){var de=en[m];ee.copy(de[0]),fe.copy(de[1]),me.copy(de[2]),hn.uv=nt(ke,fi,nr,zi,ee,fe,me)}hn.face=b,hn.faceIndex=m,Xt.push(hn)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),(Nl.prototype=Object.create(Er.prototype)).constructor=Nl,(ra.prototype=Object.create(Er.prototype)).constructor=ra,(za.prototype=Object.create(_r.prototype)).constructor=za,za.prototype.isCamera=!0,za.prototype.getWorldDirection=function(){var a=new kl;return function(g){var y=g||new Zt;return this.getWorldQuaternion(a),y.set(0,0,-1).applyQuaternion(a)}}(),za.prototype.lookAt=function(){var a=new ms;return function(g){a.lookAt(this.position,g,this.up),this.quaternion.setFromRotationMatrix(a)}}(),za.prototype.clone=function(){return(new this.constructor).copy(this)},za.prototype.copy=function(a){return _r.prototype.copy.call(this,a),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this},wl.prototype=Object.assign(Object.create(za.prototype),{constructor:wl,isPerspectiveCamera:!0,copy:function(a){return za.prototype.copy.call(this,a),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this},setFocalLength:function(a){var h=.5*this.getFilmHeight()/a;this.fov=2*xs.RAD2DEG*Math.atan(h),this.updateProjectionMatrix()},getFocalLength:function(){var a=Math.tan(.5*xs.DEG2RAD*this.fov);return.5*this.getFilmHeight()/a},getEffectiveFOV:function(){return 2*xs.RAD2DEG*Math.atan(Math.tan(.5*xs.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(a,h,g,y,A,T){this.aspect=a/h,this.view={fullWidth:a,fullHeight:h,offsetX:g,offsetY:y,width:A,height:T},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=this.near,h=a*Math.tan(.5*xs.DEG2RAD*this.fov)/this.zoom,g=2*h,y=this.aspect*g,A=-.5*y,T=this.view;if(null!==T){var R=T.fullWidth,N=T.fullHeight;A+=T.offsetX*y/R,h-=T.offsetY*g/N,y*=T.width/R,g*=T.height/N}var ie=this.filmOffset;0!==ie&&(A+=a*ie/this.getFilmWidth()),this.projectionMatrix.makeFrustum(A,A+y,h-g,h,a,this.far)},toJSON:function(a){var h=_r.prototype.toJSON.call(this,a);return h.object.fov=this.fov,h.object.zoom=this.zoom,h.object.near=this.near,h.object.far=this.far,h.object.focus=this.focus,h.object.aspect=this.aspect,null!==this.view&&(h.object.view=Object.assign({},this.view)),h.object.filmGauge=this.filmGauge,h.object.filmOffset=this.filmOffset,h}}),Bd.prototype=Object.assign(Object.create(za.prototype),{constructor:Bd,isOrthographicCamera:!0,copy:function(a){return za.prototype.copy.call(this,a),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this},setViewOffset:function(a,h,g,y,A,T){this.view={fullWidth:a,fullHeight:h,offsetX:g,offsetY:y,width:A,height:T},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var a=(this.right-this.left)/(2*this.zoom),h=(this.top-this.bottom)/(2*this.zoom),g=(this.right+this.left)/2,y=(this.top+this.bottom)/2,A=g-a,T=g+a,R=y+h,N=y-h;if(null!==this.view){var ie=this.zoom/(this.view.width/this.view.fullWidth),ee=this.zoom/(this.view.height/this.view.fullHeight),fe=(this.right-this.left)/this.view.width,me=(this.top-this.bottom)/this.view.height;T=(A+=fe*(this.view.offsetX/ie))+fe*(this.view.width/ie),N=(R-=me*(this.view.offsetY/ee))-me*(this.view.height/ee)}this.projectionMatrix.makeOrthographic(A,T,R,N,this.near,this.far)},toJSON:function(a){var h=_r.prototype.toJSON.call(this,a);return h.object.zoom=this.zoom,h.object.left=this.left,h.object.right=this.right,h.object.top=this.top,h.object.bottom=this.bottom,h.object.near=this.near,h.object.far=this.far,null!==this.view&&(h.object.view=Object.assign({},this.view)),h}});var Gg=0;function Wg(a){switch(a){case ts:return["Linear","( value )"];case Mg:return["sRGB","( value )"];case gi:return["RGBE","( value )"];case Ls:return["RGBM","( value, 7.0 )"];case wo:return["RGBM","( value, 16.0 )"];case pv:return["RGBD","( value, 256.0 )"];case zp:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+a)}}function bf(a,h){var g=Wg(h);return"vec4 "+a+"( vec4 value ) { return "+g[0]+"ToLinear"+g[1]+"; }"}function Lm(a,h){var g=Wg(h);return"vec4 "+a+"( vec4 value ) { return LinearTo"+g[0]+g[1]+"; }"}function xf(a,h){var g;switch(h){case vn:g="Linear";break;case ii:g="Reinhard";break;case Fi:g="Uncharted2";break;case Hs:g="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+h)}return"vec3 "+a+"( vec3 color ) { return "+g+"ToneMapping( color ); }"}function wf(a){return""!==a}function Af(a,h){return a.replace(/NUM_DIR_LIGHTS/g,h.numDirLights).replace(/NUM_SPOT_LIGHTS/g,h.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,h.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,h.numPointLights).replace(/NUM_HEMI_LIGHTS/g,h.numHemiLights)}function ml(a){return a.replace(/#include +<([\w\d.]+)>/g,function g(y,A){var T=$s[A];if(void 0===T)throw new Error("Can not resolve #include <"+A+">");return ml(T)})}function qp(a){return a.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function g(y,A,T,R){for(var N="",ie=parseInt(A);ie<parseInt(T);ie++)N+=R.replace(/\[ i \]/g,"[ "+ie+" ]");return N})}function Fy(a,h,g,y){var A=a.context,T=g.extensions,R=g.defines,N=g.__webglShader.vertexShader,ie=g.__webglShader.fragmentShader,ee="SHADOWMAP_TYPE_BASIC";y.shadowMapType===oe?ee="SHADOWMAP_TYPE_PCF":y.shadowMapType===se&&(ee="SHADOWMAP_TYPE_PCF_SOFT");var fe="ENVMAP_TYPE_CUBE",me="ENVMAP_MODE_REFLECTION",Le="ENVMAP_BLENDING_MULTIPLY";if(y.envMap){switch(g.envMap.mapping){case bs:case ca:fe="ENVMAP_TYPE_CUBE";break;case ql:case Gf:fe="ENVMAP_TYPE_CUBE_UV";break;case er:case tl:fe="ENVMAP_TYPE_EQUIREC";break;case $l:fe="ENVMAP_TYPE_SPHERE"}switch(g.envMap.mapping){case ca:case tl:me="ENVMAP_MODE_REFRACTION"}switch(g.combine){case Je:Le="ENVMAP_BLENDING_MULTIPLY";break;case Te:Le="ENVMAP_BLENDING_MIX";break;case Me:Le="ENVMAP_BLENDING_ADD"}}var Ke,pt,ke=a.gammaFactor>0?a.gammaFactor:1,Fe=function zd(a,h,g){return[(a=a||{}).derivatives||h.envMapCubeUV||h.bumpMap||h.normalMap||h.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(a.fragDepth||h.logarithmicDepthBuffer)&&g.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",a.drawBuffers&&g.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(a.shaderTextureLOD||h.envMap)&&g.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(wf).join("\n")}(T,y,a.extensions),nt=function jg(a){var h=[];for(var g in a){var y=a[g];!1!==y&&h.push("#define "+g+" "+y)}return h.join("\n")}(R),tt=A.createProgram();g.isRawShaderMaterial?(Ke=[nt,"\n"].filter(wf).join("\n"),pt=[Fe,nt,"\n"].filter(wf).join("\n")):(Ke=["precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,nt,y.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+ke,"#define MAX_BONES "+y.maxBones,y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+me:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.displacementMap&&y.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.flatShading?"#define FLAT_SHADED":"",y.skinning?"#define USE_SKINNING":"",y.useVertexTexture?"#define BONE_TEXTURE":"",y.morphTargets?"#define USE_MORPHTARGETS":"",y.morphNormals&&!1===y.flatShading?"#define USE_MORPHNORMALS":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+ee:"",y.sizeAttenuation?"#define USE_SIZEATTENUATION":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(wf).join("\n"),pt=[Fe,"precision "+y.precision+" float;","precision "+y.precision+" int;","#define SHADER_NAME "+g.__webglShader.name,nt,y.alphaTest?"#define ALPHATEST "+y.alphaTest:"","#define GAMMA_FACTOR "+ke,y.useFog&&y.fog?"#define USE_FOG":"",y.useFog&&y.fogExp?"#define FOG_EXP2":"",y.map?"#define USE_MAP":"",y.envMap?"#define USE_ENVMAP":"",y.envMap?"#define "+fe:"",y.envMap?"#define "+me:"",y.envMap?"#define "+Le:"",y.lightMap?"#define USE_LIGHTMAP":"",y.aoMap?"#define USE_AOMAP":"",y.emissiveMap?"#define USE_EMISSIVEMAP":"",y.bumpMap?"#define USE_BUMPMAP":"",y.normalMap?"#define USE_NORMALMAP":"",y.specularMap?"#define USE_SPECULARMAP":"",y.roughnessMap?"#define USE_ROUGHNESSMAP":"",y.metalnessMap?"#define USE_METALNESSMAP":"",y.alphaMap?"#define USE_ALPHAMAP":"",y.vertexColors?"#define USE_COLOR":"",y.gradientMap?"#define USE_GRADIENTMAP":"",y.flatShading?"#define FLAT_SHADED":"",y.doubleSided?"#define DOUBLE_SIDED":"",y.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+y.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(y.numClippingPlanes-y.numClipIntersection),y.shadowMapEnabled?"#define USE_SHADOWMAP":"",y.shadowMapEnabled?"#define "+ee:"",y.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",y.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",y.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",y.logarithmicDepthBuffer&&a.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",y.envMap&&a.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",y.toneMapping!==Ot?"#define TONE_MAPPING":"",y.toneMapping!==Ot?$s.tonemapping_pars_fragment:"",y.toneMapping!==Ot?xf("toneMapping",y.toneMapping):"",y.outputEncoding||y.mapEncoding||y.envMapEncoding||y.emissiveMapEncoding?$s.encodings_pars_fragment:"",y.mapEncoding?bf("mapTexelToLinear",y.mapEncoding):"",y.envMapEncoding?bf("envMapTexelToLinear",y.envMapEncoding):"",y.emissiveMapEncoding?bf("emissiveMapTexelToLinear",y.emissiveMapEncoding):"",y.outputEncoding?Lm("linearToOutputTexel",y.outputEncoding):"",y.depthPacking?"#define DEPTH_PACKING "+g.depthPacking:"","\n"].filter(wf).join("\n")),N=Af(N=ml(N),y),ie=Af(ie=ml(ie),y),g.isShaderMaterial||(N=qp(N),ie=qp(ie));var Xt=pt+ie,Bt=Mv(A,A.VERTEX_SHADER,Ke+N),cn=Mv(A,A.FRAGMENT_SHADER,Xt);A.attachShader(tt,Bt),A.attachShader(tt,cn),void 0!==g.index0AttributeName?A.bindAttribLocation(tt,0,g.index0AttributeName):!0===y.morphTargets&&A.bindAttribLocation(tt,0,"position"),A.linkProgram(tt);var ui,jt,sn=A.getProgramInfoLog(tt),en=A.getShaderInfoLog(Bt),hn=A.getShaderInfoLog(cn),On=!0,Ai=!0;return!1===A.getProgramParameter(tt,A.LINK_STATUS)?(On=!1,console.error("THREE.WebGLProgram: shader error: ",A.getError(),"gl.VALIDATE_STATUS",A.getProgramParameter(tt,A.VALIDATE_STATUS),"gl.getProgramInfoLog",sn,en,hn)):""!==sn?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",sn):(""===en||""===hn)&&(Ai=!1),Ai&&(this.diagnostics={runnable:On,material:g,programLog:sn,vertexShader:{log:en,prefix:Ke},fragmentShader:{log:hn,prefix:pt}}),A.deleteShader(Bt),A.deleteShader(cn),this.getUniforms=function(){return void 0===ui&&(ui=new Ka(A,tt,a)),ui},this.getAttributes=function(){return void 0===jt&&(jt=function kh(a,h,g){for(var y={},A=a.getProgramParameter(h,a.ACTIVE_ATTRIBUTES),T=0;T<A;T++){var N=a.getActiveAttrib(h,T).name;y[N]=a.getAttribLocation(h,N)}return y}(A,tt)),jt},this.destroy=function(){A.deleteProgram(tt),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Gg++,this.code=h,this.usedTimes=1,this.program=tt,this.vertexShader=Bt,this.fragmentShader=cn,this}function Ny(a,h){var g=[],y={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},A=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];function R(N,ie){var ee;return N?N.isTexture?ee=N.encoding:N.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),ee=N.texture.encoding):ee=ts,ee===ts&&ie&&(ee=zp),ee}this.getParameters=function(N,ie,ee,fe,me,Le){var ke=y[N.type],Fe=function T(N){if(h.floatVertexTextures&&N&&N.skeleton&&N.skeleton.useVertexTexture)return 1024;var fe=Math.floor((h.maxVertexUniforms-20)/4);return void 0!==N&&N&&N.isSkinnedMesh&&(fe=Math.min(N.skeleton.bones.length,fe))<N.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+N.skeleton.bones.length+", this GPU supports just "+fe+" (try OpenGL instead of ANGLE)"),fe}(Le),nt=a.getPrecision();null!==N.precision&&(nt=h.getMaxPrecision(N.precision))!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",nt,"instead.");var tt=a.getCurrentRenderTarget();return{shaderID:ke,precision:nt,supportsVertexTextures:h.vertexTextures,outputEncoding:R(tt?tt.texture:null,a.gammaOutput),map:!!N.map,mapEncoding:R(N.map,a.gammaInput),envMap:!!N.envMap,envMapMode:N.envMap&&N.envMap.mapping,envMapEncoding:R(N.envMap,a.gammaInput),envMapCubeUV:!!N.envMap&&(N.envMap.mapping===ql||N.envMap.mapping===Gf),lightMap:!!N.lightMap,aoMap:!!N.aoMap,emissiveMap:!!N.emissiveMap,emissiveMapEncoding:R(N.emissiveMap,a.gammaInput),bumpMap:!!N.bumpMap,normalMap:!!N.normalMap,displacementMap:!!N.displacementMap,roughnessMap:!!N.roughnessMap,metalnessMap:!!N.metalnessMap,specularMap:!!N.specularMap,alphaMap:!!N.alphaMap,gradientMap:!!N.gradientMap,combine:N.combine,vertexColors:N.vertexColors,fog:!!ee,useFog:N.fog,fogExp:ee&&ee.isFogExp2,flatShading:N.shading===xe,sizeAttenuation:N.sizeAttenuation,logarithmicDepthBuffer:h.logarithmicDepthBuffer,skinning:N.skinning,maxBones:Fe,useVertexTexture:h.floatVertexTextures&&Le&&Le.skeleton&&Le.skeleton.useVertexTexture,morphTargets:N.morphTargets,morphNormals:N.morphNormals,maxMorphTargets:a.maxMorphTargets,maxMorphNormals:a.maxMorphNormals,numDirLights:ie.directional.length,numPointLights:ie.point.length,numSpotLights:ie.spot.length,numRectAreaLights:ie.rectArea.length,numHemiLights:ie.hemi.length,numClippingPlanes:fe,numClipIntersection:me,shadowMapEnabled:a.shadowMap.enabled&&Le.receiveShadow&&ie.shadows.length>0,shadowMapType:a.shadowMap.type,toneMapping:a.toneMapping,physicallyCorrectLights:a.physicallyCorrectLights,premultipliedAlpha:N.premultipliedAlpha,alphaTest:N.alphaTest,doubleSided:N.side===ae,flipSided:N.side===U,depthPacking:void 0!==N.depthPacking&&N.depthPacking}},this.getProgramCode=function(N,ie){var ee=[];if(ie.shaderID?ee.push(ie.shaderID):(ee.push(N.fragmentShader),ee.push(N.vertexShader)),void 0!==N.defines)for(var fe in N.defines)ee.push(fe),ee.push(N.defines[fe]);for(var me=0;me<A.length;me++)ee.push(ie[A[me]]);return ee.join()},this.acquireProgram=function(N,ie,ee){for(var fe,me=0,Le=g.length;me<Le;me++){var ke=g[me];if(ke.code===ee){++(fe=ke).usedTimes;break}}return void 0===fe&&(fe=new Fy(a,ee,N,ie),g.push(fe)),fe},this.releaseProgram=function(N){if(0==--N.usedTimes){var ie=g.indexOf(N);g[ie]=g[g.length-1],g.pop(),N.destroy()}},this.programs=g}function Vd(a,h,g){var y={};function A(ee){var fe=ee.target,me=y[fe.id];null!==me.index&&R(me.index),function N(ee){for(var fe in ee)R(ee[fe])}(me.attributes),fe.removeEventListener("dispose",A),delete y[fe.id];var Le=h.get(fe);Le.wireframe&&R(Le.wireframe),h.delete(fe);var ke=h.get(me);ke.wireframe&&R(ke.wireframe),h.delete(me),g.memory.geometries--}function R(ee){var fe=function T(ee){return ee.isInterleavedBufferAttribute?h.get(ee.data).__webglBuffer:h.get(ee).__webglBuffer}(ee);void 0!==fe&&(a.deleteBuffer(fe),function ie(ee){h.delete(ee.isInterleavedBufferAttribute?ee.data:ee)}(ee))}return{get:function(ee){var me,fe=ee.geometry;return void 0!==y[fe.id]?y[fe.id]:(fe.addEventListener("dispose",A),fe.isBufferGeometry?me=fe:fe.isGeometry&&(void 0===fe._bufferGeometry&&(fe._bufferGeometry=(new Er).setFromObject(ee)),me=fe._bufferGeometry),y[fe.id]=me,g.memory.geometries++,me)}}}function od(a,h,g){var y=new Vd(a,h,g);function T(me,Le){var ke=me.isInterleavedBufferAttribute?me.data:me,Fe=h.get(ke);void 0===Fe.__webglBuffer?function R(me,Le,ke){me.__webglBuffer=a.createBuffer(),a.bindBuffer(ke,me.__webglBuffer),a.bufferData(ke,Le.array,Le.dynamic?a.DYNAMIC_DRAW:a.STATIC_DRAW);var nt=a.FLOAT,tt=Le.array;tt instanceof Float32Array?nt=a.FLOAT:tt instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):tt instanceof Uint16Array?nt=a.UNSIGNED_SHORT:tt instanceof Int16Array?nt=a.SHORT:tt instanceof Uint32Array?nt=a.UNSIGNED_INT:tt instanceof Int32Array?nt=a.INT:tt instanceof Int8Array?nt=a.BYTE:tt instanceof Uint8Array&&(nt=a.UNSIGNED_BYTE),me.bytesPerElement=tt.BYTES_PER_ELEMENT,me.type=nt,me.version=Le.version,Le.onUploadCallback()}(Fe,ke,Le):Fe.version!==ke.version&&function N(me,Le,ke){a.bindBuffer(ke,me.__webglBuffer),!1===Le.dynamic?a.bufferData(ke,Le.array,a.STATIC_DRAW):-1===Le.updateRange.count?a.bufferSubData(ke,0,Le.array):0===Le.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(a.bufferSubData(ke,Le.updateRange.offset*Le.array.BYTES_PER_ELEMENT,Le.array.subarray(Le.updateRange.offset,Le.updateRange.offset+Le.updateRange.count)),Le.updateRange.count=0),me.version=Le.version}(Fe,ke,Le)}return{getAttributeBuffer:function ie(me){return me.isInterleavedBufferAttribute?h.get(me.data).__webglBuffer:h.get(me).__webglBuffer},getAttributeProperties:function ee(me){return h.get(me.isInterleavedBufferAttribute?me.data:me)},getWireframeAttribute:function fe(me){var Le=h.get(me);if(void 0!==Le.wireframe)return Le.wireframe;var pt,ke=[],Fe=me.index,nt=me.attributes,tt=nt.position;if(null!==Fe)for(var vt=0,Xt=(pt=Fe.array).length;vt<Xt;vt+=3)ke.push(Bt=pt[vt+0],cn=pt[vt+1],cn,sn=pt[vt+2],sn,Bt);else for(vt=0,Xt=(pt=nt.position.array).length/3-1;vt<Xt;vt+=3){var Bt,cn,sn;ke.push(Bt=vt+0,cn=vt+1,cn,sn=vt+2,sn,Bt)}var hn=new fr(new(tt.count>65535?Uint32Array:Uint16Array)(ke),1);return T(hn,a.ELEMENT_ARRAY_BUFFER),Le.wireframe=hn,hn},update:function A(me){var Le=y.get(me);me.geometry.isGeometry&&Le.updateFromObject(me);var ke=Le.index,Fe=Le.attributes;for(var nt in null!==ke&&T(ke,a.ELEMENT_ARRAY_BUFFER),Fe)T(Fe[nt],a.ARRAY_BUFFER);var tt=Le.morphAttributes;for(var nt in tt)for(var Ke=tt[nt],pt=0,vt=Ke.length;pt<vt;pt++)T(Ke[pt],a.ARRAY_BUFFER);return Le}}}function Dv(a,h,g,y,A,T,R){var N=R.memory,ie=typeof WebGL2RenderingContext<"u"&&a instanceof WebGL2RenderingContext;function ee(jt,qt){if(jt.width>qt||jt.height>qt){var Wn=qt/Math.max(jt.width,jt.height),ei=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return ei.width=Math.floor(jt.width*Wn),ei.height=Math.floor(jt.height*Wn),ei.getContext("2d").drawImage(jt,0,0,jt.width,jt.height,0,0,ei.width,ei.height),console.warn("THREE.WebGLRenderer: image is too big ("+jt.width+"x"+jt.height+"). Resized to "+ei.width+"x"+ei.height,jt),ei}return jt}function fe(jt){return xs.isPowerOfTwo(jt.width)&&xs.isPowerOfTwo(jt.height)}function ke(jt){return jt===qa||jt===Ld||jt===cu?a.NEAREST:a.LINEAR}function Fe(jt){var qt=jt.target;qt.removeEventListener("dispose",Fe),function tt(jt){var qt=y.get(jt);if(jt.image&&qt.__image__webglTextureCube)a.deleteTexture(qt.__image__webglTextureCube);else{if(void 0===qt.__webglInit)return;a.deleteTexture(qt.__webglTexture)}y.delete(jt)}(qt),N.textures--}function nt(jt){var qt=jt.target;qt.removeEventListener("dispose",nt),function Ke(jt){var qt=y.get(jt),Wn=y.get(jt.texture);if(jt){if(void 0!==Wn.__webglTexture&&a.deleteTexture(Wn.__webglTexture),jt.depthTexture&&jt.depthTexture.dispose(),jt.isWebGLRenderTargetCube)for(var ei=0;ei<6;ei++)a.deleteFramebuffer(qt.__webglFramebuffer[ei]),qt.__webglDepthbuffer&&a.deleteRenderbuffer(qt.__webglDepthbuffer[ei]);else a.deleteFramebuffer(qt.__webglFramebuffer),qt.__webglDepthbuffer&&a.deleteRenderbuffer(qt.__webglDepthbuffer);y.delete(jt.texture),y.delete(jt)}}(qt),N.textures--}function pt(jt,qt){var Wn=y.get(jt);if(jt.version>0&&Wn.__version!==jt.version){var ei=jt.image;if(void 0===ei)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",jt);else{if(!1!==ei.complete)return void function cn(jt,qt,Wn){void 0===jt.__webglInit&&(jt.__webglInit=!0,qt.addEventListener("dispose",Fe),jt.__webglTexture=a.createTexture(),N.textures++),g.activeTexture(a.TEXTURE0+Wn),g.bindTexture(a.TEXTURE_2D,jt.__webglTexture),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,qt.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,qt.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,qt.unpackAlignment);var ei=ee(qt.image,A.maxTextureSize);(function Le(jt){return jt.wrapS!==lc||jt.wrapT!==lc||jt.minFilter!==qa&&jt.minFilter!==Aa})(qt)&&!1===fe(ei)&&(ei=function me(jt){if(jt instanceof HTMLImageElement||jt instanceof HTMLCanvasElement){var qt=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return qt.width=xs.nearestPowerOfTwo(jt.width),qt.height=xs.nearestPowerOfTwo(jt.height),qt.getContext("2d").drawImage(jt,0,0,qt.width,qt.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+jt.width+"x"+jt.height+"). Resized to "+qt.width+"x"+qt.height,jt),qt}return jt}(ei));var Ii=fe(ei),_i=T(qt.format),fi=T(qt.type);Bt(a.TEXTURE_2D,qt,Ii);var nr,zi=qt.mipmaps;if(qt.isDepthTexture){var qn=a.DEPTH_COMPONENT;if(qt.type===Pd){if(!ie)throw new Error("Float Depth Texture only supported in WebGL2.0");qn=a.DEPTH_COMPONENT32F}else ie&&(qn=a.DEPTH_COMPONENT16);qt.format===it&&qn===a.DEPTH_COMPONENT&&qt.type!==df&&qt.type!==ff&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),qt.type=df,fi=T(qt.type)),qt.format===Ye&&(qn=a.DEPTH_STENCIL,qt.type!==pf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),qt.type=pf,fi=T(qt.type))),g.texImage2D(a.TEXTURE_2D,0,qn,ei.width,ei.height,0,_i,fi,null)}else if(qt.isDataTexture)if(zi.length>0&&Ii){for(var Hn=0,f=zi.length;Hn<f;Hn++)g.texImage2D(a.TEXTURE_2D,Hn,_i,(nr=zi[Hn]).width,nr.height,0,_i,fi,nr.data);qt.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,_i,ei.width,ei.height,0,_i,fi,ei.data);else if(qt.isCompressedTexture)for(Hn=0,f=zi.length;Hn<f;Hn++)nr=zi[Hn],qt.format!==nl&&qt.format!==wc?g.getCompressedTextureFormats().indexOf(_i)>-1?g.compressedTexImage2D(a.TEXTURE_2D,Hn,_i,nr.width,nr.height,0,nr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):g.texImage2D(a.TEXTURE_2D,Hn,_i,nr.width,nr.height,0,_i,fi,nr.data);else if(zi.length>0&&Ii){for(Hn=0,f=zi.length;Hn<f;Hn++)g.texImage2D(a.TEXTURE_2D,Hn,_i,_i,fi,nr=zi[Hn]);qt.generateMipmaps=!1}else g.texImage2D(a.TEXTURE_2D,0,_i,_i,fi,ei);qt.generateMipmaps&&Ii&&a.generateMipmap(a.TEXTURE_2D),jt.__version=qt.version,qt.onUpdate&&qt.onUpdate(qt)}(Wn,jt,qt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",jt)}}g.activeTexture(a.TEXTURE0+qt),g.bindTexture(a.TEXTURE_2D,Wn.__webglTexture)}function Bt(jt,qt,Wn){var ei;if(Wn?(a.texParameteri(jt,a.TEXTURE_WRAP_S,T(qt.wrapS)),a.texParameteri(jt,a.TEXTURE_WRAP_T,T(qt.wrapT)),a.texParameteri(jt,a.TEXTURE_MAG_FILTER,T(qt.magFilter)),a.texParameteri(jt,a.TEXTURE_MIN_FILTER,T(qt.minFilter))):(a.texParameteri(jt,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(jt,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),(qt.wrapS!==lc||qt.wrapT!==lc)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",qt),a.texParameteri(jt,a.TEXTURE_MAG_FILTER,ke(qt.magFilter)),a.texParameteri(jt,a.TEXTURE_MIN_FILTER,ke(qt.minFilter)),qt.minFilter!==qa&&qt.minFilter!==Aa&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",qt)),ei=h.get("EXT_texture_filter_anisotropic")){if(qt.type===Pd&&null===h.get("OES_texture_float_linear")||qt.type===xc&&null===h.get("OES_texture_half_float_linear"))return;(qt.anisotropy>1||y.get(qt).__currentAnisotropy)&&(a.texParameterf(jt,ei.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(qt.anisotropy,A.getMaxAnisotropy())),y.get(qt).__currentAnisotropy=qt.anisotropy)}}function sn(jt,qt,Wn,ei){var Ii=T(qt.texture.format),_i=T(qt.texture.type);g.texImage2D(ei,0,Ii,qt.width,qt.height,0,Ii,_i,null),a.bindFramebuffer(a.FRAMEBUFFER,jt),a.framebufferTexture2D(a.FRAMEBUFFER,Wn,ei,y.get(qt.texture).__webglTexture,0),a.bindFramebuffer(a.FRAMEBUFFER,null)}function en(jt,qt){a.bindRenderbuffer(a.RENDERBUFFER,jt),qt.depthBuffer&&!qt.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,qt.width,qt.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,jt)):qt.depthBuffer&&qt.stencilBuffer?(a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,qt.width,qt.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,jt)):a.renderbufferStorage(a.RENDERBUFFER,a.RGBA4,qt.width,qt.height),a.bindRenderbuffer(a.RENDERBUFFER,null)}this.setTexture2D=pt,this.setTextureCube=function vt(jt,qt){var Wn=y.get(jt);if(6===jt.image.length)if(jt.version>0&&Wn.__version!==jt.version){Wn.__image__webglTextureCube||(jt.addEventListener("dispose",Fe),Wn.__image__webglTextureCube=a.createTexture(),N.textures++),g.activeTexture(a.TEXTURE0+qt),g.bindTexture(a.TEXTURE_CUBE_MAP,Wn.__image__webglTextureCube),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,jt.flipY);for(var ei=jt&&jt.isCompressedTexture,Ii=jt.image[0]&&jt.image[0].isDataTexture,_i=[],fi=0;fi<6;fi++)_i[fi]=ei||Ii?Ii?jt.image[fi].image:jt.image[fi]:ee(jt.image[fi],A.maxCubemapSize);var zi=fe(_i[0]),qn=T(jt.format),Hn=T(jt.type);for(Bt(a.TEXTURE_CUBE_MAP,jt,zi),fi=0;fi<6;fi++)if(ei)for(var f,c=_i[fi].mipmaps,d=0,m=c.length;d<m;d++)f=c[d],jt.format!==nl&&jt.format!==wc?g.getCompressedTextureFormats().indexOf(qn)>-1?g.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+fi,d,qn,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+fi,d,qn,f.width,f.height,0,qn,Hn,f.data);else Ii?g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+fi,0,qn,_i[fi].width,_i[fi].height,0,qn,Hn,_i[fi].data):g.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+fi,0,qn,qn,Hn,_i[fi]);jt.generateMipmaps&&zi&&a.generateMipmap(a.TEXTURE_CUBE_MAP),Wn.__version=jt.version,jt.onUpdate&&jt.onUpdate(jt)}else g.activeTexture(a.TEXTURE0+qt),g.bindTexture(a.TEXTURE_CUBE_MAP,Wn.__image__webglTextureCube)},this.setTextureCubeDynamic=function Xt(jt,qt){g.activeTexture(a.TEXTURE0+qt),g.bindTexture(a.TEXTURE_CUBE_MAP,y.get(jt).__webglTexture)},this.setupRenderTarget=function Ai(jt){var qt=y.get(jt),Wn=y.get(jt.texture);jt.addEventListener("dispose",nt),Wn.__webglTexture=a.createTexture(),N.textures++;var ei=!0===jt.isWebGLRenderTargetCube,Ii=fe(jt);if(ei){qt.__webglFramebuffer=[];for(var _i=0;_i<6;_i++)qt.__webglFramebuffer[_i]=a.createFramebuffer()}else qt.__webglFramebuffer=a.createFramebuffer();if(ei){for(g.bindTexture(a.TEXTURE_CUBE_MAP,Wn.__webglTexture),Bt(a.TEXTURE_CUBE_MAP,jt.texture,Ii),_i=0;_i<6;_i++)sn(qt.__webglFramebuffer[_i],jt,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+_i);jt.texture.generateMipmaps&&Ii&&a.generateMipmap(a.TEXTURE_CUBE_MAP),g.bindTexture(a.TEXTURE_CUBE_MAP,null)}else g.bindTexture(a.TEXTURE_2D,Wn.__webglTexture),Bt(a.TEXTURE_2D,jt.texture,Ii),sn(qt.__webglFramebuffer,jt,a.COLOR_ATTACHMENT0,a.TEXTURE_2D),jt.texture.generateMipmaps&&Ii&&a.generateMipmap(a.TEXTURE_2D),g.bindTexture(a.TEXTURE_2D,null);jt.depthBuffer&&function On(jt){var qt=y.get(jt),Wn=!0===jt.isWebGLRenderTargetCube;if(jt.depthTexture){if(Wn)throw new Error("target.depthTexture not supported in Cube render targets");!function hn(jt,qt){if(qt&&qt.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(a.bindFramebuffer(a.FRAMEBUFFER,jt),!qt.depthTexture||!qt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!y.get(qt.depthTexture).__webglTexture||qt.depthTexture.image.width!==qt.width||qt.depthTexture.image.height!==qt.height)&&(qt.depthTexture.image.width=qt.width,qt.depthTexture.image.height=qt.height,qt.depthTexture.needsUpdate=!0),pt(qt.depthTexture,0);var ei=y.get(qt.depthTexture).__webglTexture;if(qt.depthTexture.format===it)a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,ei,0);else{if(qt.depthTexture.format!==Ye)throw new Error("Unknown depthTexture format");a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,ei,0)}}(qt.__webglFramebuffer,jt)}else if(Wn){qt.__webglDepthbuffer=[];for(var ei=0;ei<6;ei++)a.bindFramebuffer(a.FRAMEBUFFER,qt.__webglFramebuffer[ei]),qt.__webglDepthbuffer[ei]=a.createRenderbuffer(),en(qt.__webglDepthbuffer[ei],jt)}else a.bindFramebuffer(a.FRAMEBUFFER,qt.__webglFramebuffer),qt.__webglDepthbuffer=a.createRenderbuffer(),en(qt.__webglDepthbuffer,jt);a.bindFramebuffer(a.FRAMEBUFFER,null)}(jt)},this.updateRenderTargetMipmap=function ui(jt){var qt=jt.texture;if(qt.generateMipmaps&&fe(jt)&&qt.minFilter!==qa&&qt.minFilter!==Aa){var Wn=jt&&jt.isWebGLRenderTargetCube?a.TEXTURE_CUBE_MAP:a.TEXTURE_2D,ei=y.get(qt).__webglTexture;g.bindTexture(Wn,ei),a.generateMipmap(Wn),g.bindTexture(Wn,null)}}}function U_(){var a={};return{get:function(h){var g=h.uuid,y=a[g];return void 0===y&&(a[g]=y={}),y},delete:function(h){delete a[h.uuid]},clear:function(){a={}}}}function Lv(a,h,g){var R=new function y(){var et=!1,Wt=new jo,Tt=null,gn=new jo;return{setMask:function(Kt){Tt!==Kt&&!et&&(a.colorMask(Kt,Kt,Kt,Kt),Tt=Kt)},setLocked:function(Kt){et=Kt},setClear:function(Kt,ln,Sn,Rn,Jn){!0===Jn&&(Kt*=Rn,ln*=Rn,Sn*=Rn),Wt.set(Kt,ln,Sn,Rn),!1===gn.equals(Wt)&&(a.clearColor(Kt,ln,Sn,Rn),gn.copy(Wt))},reset:function(){et=!1,Tt=null,gn.set(0,0,0,1)}}},N=new function A(){var et=!1,Wt=null,Tt=null,gn=null;return{setTest:function(Kt){Kt?m(a.DEPTH_TEST):_(a.DEPTH_TEST)},setMask:function(Kt){Wt!==Kt&&!et&&(a.depthMask(Kt),Wt=Kt)},setFunc:function(Kt){if(Tt!==Kt){if(Kt)switch(Kt){case Ce:a.depthFunc(a.NEVER);break;case Dt:a.depthFunc(a.ALWAYS);break;case Rt:a.depthFunc(a.LESS);break;case ci:a.depthFunc(a.LEQUAL);break;case $i:a.depthFunc(a.EQUAL);break;case At:a.depthFunc(a.GEQUAL);break;case Pt:a.depthFunc(a.GREATER);break;case un:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}else a.depthFunc(a.LEQUAL);Tt=Kt}},setLocked:function(Kt){et=Kt},setClear:function(Kt){gn!==Kt&&(a.clearDepth(Kt),gn=Kt)},reset:function(){et=!1,Wt=null,Tt=null,gn=null}}},ie=new function T(){var et=!1,Wt=null,Tt=null,gn=null,Kt=null,ln=null,Sn=null,Rn=null,Jn=null;return{setTest:function(En){En?m(a.STENCIL_TEST):_(a.STENCIL_TEST)},setMask:function(En){Wt!==En&&!et&&(a.stencilMask(En),Wt=En)},setFunc:function(En,Yn,li){(Tt!==En||gn!==Yn||Kt!==li)&&(a.stencilFunc(En,Yn,li),Tt=En,gn=Yn,Kt=li)},setOp:function(En,Yn,li){(ln!==En||Sn!==Yn||Rn!==li)&&(a.stencilOp(En,Yn,li),ln=En,Sn=Yn,Rn=li)},setLocked:function(En){et=En},setClear:function(En){Jn!==En&&(a.clearStencil(En),Jn=En)},reset:function(){et=!1,Wt=null,Tt=null,gn=null,Kt=null,ln=null,Sn=null,Rn=null,Jn=null}}},ee=a.getParameter(a.MAX_VERTEX_ATTRIBS),fe=new Uint8Array(ee),me=new Uint8Array(ee),Le=new Uint8Array(ee),ke={},Fe=null,nt=null,tt=null,Ke=null,pt=null,vt=null,Xt=null,Bt=null,cn=!1,sn=null,en=null,hn=null,On=null,Ai=null,ui=null,jt=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),qt=parseFloat(/^WebGL\ ([0-9])/.exec(a.getParameter(a.VERSION))[1]),Wn=parseFloat(qt)>=1,ei=null,Ii={},_i=new jo,fi=new jo;function nr(et,Wt,Tt){var gn=new Uint8Array(4),Kt=a.createTexture();a.bindTexture(et,Kt),a.texParameteri(et,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(et,a.TEXTURE_MAG_FILTER,a.NEAREST);for(var ln=0;ln<Tt;ln++)a.texImage2D(Wt+ln,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,gn);return Kt}var zi={};function m(et){!0!==ke[et]&&(a.enable(et),ke[et]=!0)}function _(et){!1!==ke[et]&&(a.disable(et),ke[et]=!1)}function w(et,Wt,Tt,gn,Kt,ln,Sn,Rn){et!==$?m(a.BLEND):_(a.BLEND),(et!==nt||Rn!==cn)&&(et===ge?Rn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE,a.ONE,a.ONE)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE)):et===Ue?Rn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.ONE_MINUS_SRC_COLOR)):et===Re?Rn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ZERO,a.SRC_COLOR,a.ZERO,a.SRC_ALPHA)):(a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ZERO,a.SRC_COLOR)):Rn?(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)):(a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)),nt=et,cn=Rn),et===rt?(Kt=Kt||Wt,ln=ln||Tt,Sn=Sn||gn,(Wt!==tt||Kt!==vt)&&(a.blendEquationSeparate(g(Wt),g(Kt)),tt=Wt,vt=Kt),(Tt!==Ke||gn!==pt||ln!==Xt||Sn!==Bt)&&(a.blendFuncSeparate(g(Tt),g(gn),g(ln),g(Sn)),Ke=Tt,pt=gn,Xt=ln,Bt=Sn)):(tt=null,Ke=null,pt=null,vt=null,Xt=null,Bt=null)}function G(et){N.setFunc(et)}function Ie(et){sn!==et&&(a.frontFace(et?a.CW:a.CCW),sn=et)}function Ne(et){et!==B?(m(a.CULL_FACE),et!==en&&a.cullFace(et===W?a.BACK:et===P?a.FRONT:a.FRONT_AND_BACK)):_(a.CULL_FACE),en=et}function Lt(et){void 0===et&&(et=a.TEXTURE0+jt-1),ei!==et&&(a.activeTexture(et),ei=et)}return zi[a.TEXTURE_2D]=nr(a.TEXTURE_2D,a.TEXTURE_2D,1),zi[a.TEXTURE_CUBE_MAP]=nr(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:R,depth:N,stencil:ie},init:function qn(){R.setClear(0,0,0,1),N.setClear(1),ie.setClear(0),m(a.DEPTH_TEST),G(ci),Ie(!1),Ne(W),m(a.CULL_FACE),m(a.BLEND),w(ne)},initAttributes:function Hn(){for(var et=0,Wt=fe.length;et<Wt;et++)fe[et]=0},enableAttribute:function f(et){fe[et]=1,0===me[et]&&(a.enableVertexAttribArray(et),me[et]=1),0!==Le[et]&&(h.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(et,0),Le[et]=0)},enableAttributeAndDivisor:function c(et,Wt,Tt){fe[et]=1,0===me[et]&&(a.enableVertexAttribArray(et),me[et]=1),Le[et]!==Wt&&(Tt.vertexAttribDivisorANGLE(et,Wt),Le[et]=Wt)},disableUnusedAttributes:function d(){for(var et=0,Wt=me.length;et!==Wt;++et)me[et]!==fe[et]&&(a.disableVertexAttribArray(et),me[et]=0)},enable:m,disable:_,getCompressedTextureFormats:function b(){if(null===Fe&&(Fe=[],h.get("WEBGL_compressed_texture_pvrtc")||h.get("WEBGL_compressed_texture_s3tc")||h.get("WEBGL_compressed_texture_etc1")))for(var et=a.getParameter(a.COMPRESSED_TEXTURE_FORMATS),Wt=0;Wt<et.length;Wt++)Fe.push(et[Wt]);return Fe},setBlending:w,setColorWrite:function E(et){R.setMask(et)},setDepthTest:function k(et){N.setTest(et)},setDepthWrite:function L(et){N.setMask(et)},setDepthFunc:G,setStencilTest:function K(et){ie.setTest(et)},setStencilWrite:function le(et){ie.setMask(et)},setStencilFunc:function de(et,Wt,Tt){ie.setFunc(et,Wt,Tt)},setStencilOp:function pe(et,Wt,Tt){ie.setOp(et,Wt,Tt)},setFlipSided:Ie,setCullFace:Ne,setLineWidth:function ze(et){et!==hn&&(Wn&&a.lineWidth(et),hn=et)},setPolygonOffset:function Qe(et,Wt,Tt){et?(m(a.POLYGON_OFFSET_FILL),(On!==Wt||Ai!==Tt)&&(a.polygonOffset(Wt,Tt),On=Wt,Ai=Tt)):_(a.POLYGON_OFFSET_FILL)},getScissorTest:function qe(){return ui},setScissorTest:function dt(et){ui=et,et?m(a.SCISSOR_TEST):_(a.SCISSOR_TEST)},activeTexture:Lt,bindTexture:function kt(et,Wt){null===ei&&Lt();var Tt=Ii[ei];void 0===Tt&&(Ii[ei]=Tt={type:void 0,texture:void 0}),(Tt.type!==et||Tt.texture!==Wt)&&(a.bindTexture(et,Wt||zi[et]),Tt.type=et,Tt.texture=Wt)},compressedTexImage2D:function mt(){try{a.compressedTexImage2D.apply(a,arguments)}catch(et){console.error(et)}},texImage2D:function Ft(){try{a.texImage2D.apply(a,arguments)}catch(et){console.error(et)}},scissor:function bt(et){!1===_i.equals(et)&&(a.scissor(et.x,et.y,et.z,et.w),_i.copy(et))},viewport:function Ht(et){!1===fi.equals(et)&&(a.viewport(et.x,et.y,et.z,et.w),fi.copy(et))},reset:function Vt(){for(var et=0;et<me.length;et++)1===me[et]&&(a.disableVertexAttribArray(et),me[et]=0);ke={},Fe=null,ei=null,Ii={},nt=null,sn=null,en=null,R.reset(),N.reset(),ie.reset()}}}function lC(a,h,g){var y;function T(Xt){if("highp"===Xt){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";Xt="mediump"}return"mediump"===Xt&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var R=void 0!==g.precision?g.precision:"highp",N=T(R);N!==R&&(console.warn("THREE.WebGLRenderer:",R,"not supported, using",N,"instead."),R=N);var ie=!0===g.logarithmicDepthBuffer&&!!h.get("EXT_frag_depth"),ee=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),fe=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),me=a.getParameter(a.MAX_TEXTURE_SIZE),Le=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),ke=a.getParameter(a.MAX_VERTEX_ATTRIBS),Fe=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),nt=a.getParameter(a.MAX_VARYING_VECTORS),tt=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),Ke=fe>0,pt=!!h.get("OES_texture_float");return{getMaxAnisotropy:function A(){if(void 0!==y)return y;var Xt=h.get("EXT_texture_filter_anisotropic");return y=null!==Xt?a.getParameter(Xt.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:T,precision:R,logarithmicDepthBuffer:ie,maxTextures:ee,maxVertexTextures:fe,maxTextureSize:me,maxCubemapSize:Le,maxAttributes:ke,maxVertexUniforms:Fe,maxVaryings:nt,maxFragmentUniforms:tt,vertexTextures:Ke,floatFragmentTextures:pt,floatVertexTextures:Ke&&pt}}function Xp(a){var h={};return{get:function(g){if(void 0!==h[g])return h[g];var y;switch(g){case"WEBGL_depth_texture":y=a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":y=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":y=a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":y=a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":y=a.getExtension("WEBGL_compressed_texture_etc1");break;default:y=a.getExtension(g)}return null===y&&console.warn("THREE.WebGLRenderer: "+g+" extension not supported."),h[g]=y,y}}}function ol(){var a=this,h=null,g=0,y=!1,A=!1,T=new ut,R=new It,N={value:null,needsUpdate:!1};function ie(){N.value!==h&&(N.value=h,N.needsUpdate=g>0),a.numPlanes=g,a.numIntersection=0}function ee(fe,me,Le,ke){var Fe=null!==fe?fe.length:0,nt=null;if(0!==Fe){if(nt=N.value,!0!==ke||null===nt){var tt=Le+4*Fe,Ke=me.matrixWorldInverse;R.getNormalMatrix(Ke),(null===nt||nt.length<tt)&&(nt=new Float32Array(tt));for(var pt=0,vt=Le;pt!==Fe;++pt,vt+=4)T.copy(fe[pt]).applyMatrix4(Ke,R),T.normal.toArray(nt,vt),nt[vt+3]=T.constant}N.value=nt,N.needsUpdate=!0}return a.numPlanes=Fe,nt}this.uniform=N,this.numPlanes=0,this.numIntersection=0,this.init=function(fe,me,Le){var ke=0!==fe.length||me||0!==g||y;return y=me,h=ee(fe,Le,0),g=fe.length,ke},this.beginShadows=function(){A=!0,ee(null)},this.endShadows=function(){A=!1,ie()},this.setState=function(fe,me,Le,ke,Fe,nt){if(!y||null===fe||0===fe.length||A&&!Le)A?ee(null):ie();else{var tt=A?0:g,Ke=4*tt,pt=Fe.clippingState||null;N.value=pt,pt=ee(fe,ke,Ke,nt);for(var vt=0;vt!==Ke;++vt)pt[vt]=h[vt];Fe.clippingState=pt,this.numIntersection=me?this.numPlanes:0,this.numPlanes+=tt}}}function Ud(a){console.log("THREE.WebGLRenderer",D);var h=void 0!==(a=a||{}).canvas?a.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),g=void 0!==a.context?a.context:null,y=void 0!==a.alpha&&a.alpha,A=void 0===a.depth||a.depth,T=void 0===a.stencil||a.stencil,R=void 0!==a.antialias&&a.antialias,N=void 0===a.premultipliedAlpha||a.premultipliedAlpha,ie=void 0!==a.preserveDrawingBuffer&&a.preserveDrawingBuffer,ee=[],fe=[],me=-1,Le=[],ke=-1,Fe=new Float32Array(8),nt=[],tt=[];this.domElement=h,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=vn,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var E,Ke=this,pt=null,vt=null,Xt=null,Bt=-1,cn="",sn=null,en=new jo,hn=null,On=new jo,Ai=0,ui=new jr(0),jt=0,qt=h.width,Wn=h.height,ei=1,Ii=new jo(0,0,qt,Wn),_i=!1,fi=new jo(0,0,qt,Wn),nr=new Lo,zi=new ol,qn=!1,Hn=!1,f=new wt,c=new ms,d=new Zt,m=new ms,_=new ms,b={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},w={calls:0,vertices:0,faces:0,points:0};this.info={render:w,memory:{geometries:0,textures:0},programs:null};try{var k={alpha:y,depth:A,stencil:T,antialias:R,premultipliedAlpha:N,preserveDrawingBuffer:ie};if(null===(E=g||h.getContext("webgl",k)||h.getContext("experimental-webgl",k)))throw null!==h.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===E.getShaderPrecisionFormat&&(E.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),h.addEventListener("webglcontextlost",Tt,!1)}catch(Ve){console.error("THREE.WebGLRenderer: "+Ve)}var L=new Xp(E);L.get("WEBGL_depth_texture"),L.get("OES_texture_float"),L.get("OES_texture_float_linear"),L.get("OES_texture_half_float"),L.get("OES_texture_half_float_linear"),L.get("OES_standard_derivatives"),L.get("ANGLE_instanced_arrays"),L.get("OES_element_index_uint")&&(Er.MaxIndex=4294967296);var G=new lC(E,L,a),K=new Lv(E,L,Ei),le=new U_,de=new Dv(E,L,K,le,G,Ei,this.info),pe=new od(E,le,this.info),Ie=new Ny(this,G),Ne=new Va;this.info.programs=Ie.programs;var ze=new Cf(E,L,w),Qe=new uc(E,L,w),qe=new Bd(-1,1,1,-1,0,1),dt=new wl,Lt=new ba(new ra(2,2),new Ba({depthTest:!1,depthWrite:!1,fog:!1})),kt=Mc.cube,mt=new ba(new Nl(5,5,5),new Zc({uniforms:kt.uniforms,vertexShader:kt.vertexShader,fragmentShader:kt.fragmentShader,side:U,depthTest:!1,depthWrite:!1,fog:!1}));function Ft(){return null===vt?ei:1}function bt(){K.init(),K.scissor(en.copy(Ii).multiplyScalar(ei)),K.viewport(On.copy(fi).multiplyScalar(ei)),K.buffers.color.setClear(ui.r,ui.g,ui.b,jt,N)}function Ht(){pt=null,sn=null,cn="",Bt=-1,K.reset()}bt(),this.context=E,this.capabilities=G,this.extensions=L,this.properties=le,this.state=K;var Vt=new Ao(this,b,pe,G);this.shadowMap=Vt;var Ve,et=new V_(this,nt),Wt=new jp(this,tt);function Tt(Ve){Ve.preventDefault(),Ht(),bt(),le.clear()}function gn(Ve){var lt=Ve.target;lt.removeEventListener("dispose",gn),function Kt(Ve){ln(Ve),le.delete(Ve)}(lt)}function ln(Ve){var lt=le.get(Ve).program;Ve.program=void 0,void 0!==lt&&Ie.releaseProgram(lt)}function Rn(Ve,lt){return Math.abs(lt[0])-Math.abs(Ve[0])}function Jn(Ve,lt){return Ve.object.renderOrder!==lt.object.renderOrder?Ve.object.renderOrder-lt.object.renderOrder:Ve.material.program&&lt.material.program&&Ve.material.program!==lt.material.program?Ve.material.program.id-lt.material.program.id:Ve.material.id!==lt.material.id?Ve.material.id-lt.material.id:Ve.z!==lt.z?Ve.z-lt.z:Ve.id-lt.id}function En(Ve,lt){return Ve.object.renderOrder!==lt.object.renderOrder?Ve.object.renderOrder-lt.object.renderOrder:Ve.z!==lt.z?lt.z-Ve.z:Ve.id-lt.id}function Yn(Ve,lt,an,dn,pn){var Zi,rr;an.transparent?(Zi=Le,rr=++ke):(Zi=fe,rr=++me);var ni=Zi[rr];void 0!==ni?(ni.id=Ve.id,ni.object=Ve,ni.geometry=lt,ni.material=an,ni.z=d.z,ni.group=pn):Zi.push(ni={id:Ve.id,object:Ve,geometry:lt,material:an,z:d.z,group:pn})}function pi(Ve){if(!nr.intersectsSphere(Ve))return!1;var lt=zi.numPlanes;if(0===lt)return!0;var an=Ke.clippingPlanes,dn=Ve.center,pn=-Ve.radius,Zi=0;do{if(an[Zi].distanceToPoint(dn)<pn)return!1}while(++Zi!==lt);return!0}function hi(Ve,lt){if(!1!==Ve.visible){if(0!=(Ve.layers.mask&lt.layers.mask))if(Ve.isLight)ee.push(Ve);else if(Ve.isSprite)(!1===Ve.frustumCulled||!0===function Ci(Ve){return f.center.set(0,0,0),f.radius=.7071067811865476,f.applyMatrix4(Ve.matrixWorld),pi(f)}(Ve))&&nt.push(Ve);else if(Ve.isLensFlare)tt.push(Ve);else if(Ve.isImmediateRenderObject)!0===Ke.sortObjects&&(d.setFromMatrixPosition(Ve.matrixWorld),d.applyProjection(c)),Yn(Ve,null,Ve.material,0,null);else if((Ve.isMesh||Ve.isLine||Ve.isPoints)&&(Ve.isSkinnedMesh&&Ve.skeleton.update(),!1===Ve.frustumCulled||!0===function li(Ve){var lt=Ve.geometry;return null===lt.boundingSphere&&lt.computeBoundingSphere(),f.copy(lt.boundingSphere).applyMatrix4(Ve.matrixWorld),pi(f)}(Ve))){var dn=Ve.material;if(!0===dn.visible){!0===Ke.sortObjects&&(d.setFromMatrixPosition(Ve.matrixWorld),d.applyProjection(c));var pn=pe.update(Ve);if(dn.isMultiMaterial)for(var Zi=pn.groups,rr=dn.materials,ni=0,Or=Zi.length;ni<Or;ni++){var Oi=Zi[ni],Ni=rr[Oi.materialIndex];!0===Ni.visible&&Yn(Ve,pn,Ni,0,Oi)}else Yn(Ve,pn,dn,0,null)}}var Ki=Ve.children;for(ni=0,Or=Ki.length;ni<Or;ni++)hi(Ki[ni],lt)}}function Mn(Ve,lt,an,dn){for(var pn=0,Zi=Ve.length;pn<Zi;pn++){var rr=Ve[pn],ni=rr.object,Or=rr.geometry,Oi=void 0===dn?rr.material:dn,Ni=rr.group;if(ni.modelViewMatrix.multiplyMatrices(an.matrixWorldInverse,ni.matrixWorld),ni.normalMatrix.getNormalMatrix(ni.modelViewMatrix),ni.onBeforeRender(Ke,lt,an,Or,Oi,Ni),ni.isImmediateRenderObject){xi(Oi);var Ki=ji(an,lt.fog,Oi,ni);cn="",ni.render(function(eo){Ke.renderBufferImmediate(eo,Ki,Oi)})}else Ke.renderBufferDirect(an,lt.fog,Or,Oi,ni,Ni);ni.onAfterRender(Ke,lt,an,Or,Oi,Ni)}}function xi(Ve){Ve.side===ae?K.disable(E.CULL_FACE):K.enable(E.CULL_FACE),K.setFlipSided(Ve.side===U),!0===Ve.transparent?K.setBlending(Ve.blending,Ve.blendEquation,Ve.blendSrc,Ve.blendDst,Ve.blendEquationAlpha,Ve.blendSrcAlpha,Ve.blendDstAlpha,Ve.premultipliedAlpha):K.setBlending($),K.setDepthFunc(Ve.depthFunc),K.setDepthTest(Ve.depthTest),K.setDepthWrite(Ve.depthWrite),K.setColorWrite(Ve.colorWrite),K.setPolygonOffset(Ve.polygonOffset,Ve.polygonOffsetFactor,Ve.polygonOffsetUnits)}function ji(Ve,lt,an,dn){Ai=0;var pn=le.get(an);qn&&(Hn||Ve!==sn)&&zi.setState(an.clippingPlanes,an.clipIntersection,an.clipShadows,Ve,pn,Ve===sn&&an.id===Bt),!1===an.needsUpdate&&(void 0===pn.program||an.fog&&pn.fog!==lt||an.lights&&pn.lightsHash!==b.hash||void 0!==pn.numClippingPlanes&&(pn.numClippingPlanes!==zi.numPlanes||pn.numIntersection!==zi.numIntersection))&&(an.needsUpdate=!0),an.needsUpdate&&(function ri(Ve,lt,an){var dn=le.get(Ve),pn=Ie.getParameters(Ve,b,lt,zi.numPlanes,zi.numIntersection,an),Zi=Ie.getProgramCode(Ve,pn),rr=dn.program,ni=!0;if(void 0===rr)Ve.addEventListener("dispose",gn);else if(rr.code!==Zi)ln(Ve);else{if(void 0!==pn.shaderID)return;ni=!1}if(ni){if(pn.shaderID){var Or=Mc[pn.shaderID];dn.__webglShader={name:Ve.type,uniforms:il.clone(Or.uniforms),vertexShader:Or.vertexShader,fragmentShader:Or.fragmentShader}}else dn.__webglShader={name:Ve.type,uniforms:Ve.uniforms,vertexShader:Ve.vertexShader,fragmentShader:Ve.fragmentShader};Ve.__webglShader=dn.__webglShader,rr=Ie.acquireProgram(Ve,pn,Zi),dn.program=rr,Ve.program=rr}var Oi=rr.getAttributes();if(Ve.morphTargets){Ve.numSupportedMorphTargets=0;for(var Ni=0;Ni<Ke.maxMorphTargets;Ni++)Oi["morphTarget"+Ni]>=0&&Ve.numSupportedMorphTargets++}if(Ve.morphNormals)for(Ve.numSupportedMorphNormals=0,Ni=0;Ni<Ke.maxMorphNormals;Ni++)Oi["morphNormal"+Ni]>=0&&Ve.numSupportedMorphNormals++;var Ki=dn.__webglShader.uniforms;(!Ve.isShaderMaterial&&!Ve.isRawShaderMaterial||!0===Ve.clipping)&&(dn.numClippingPlanes=zi.numPlanes,dn.numIntersection=zi.numIntersection,Ki.clippingPlanes=zi.uniform),dn.fog=lt,dn.lightsHash=b.hash,Ve.lights&&(Ki.ambientLightColor.value=b.ambient,Ki.directionalLights.value=b.directional,Ki.spotLights.value=b.spot,Ki.rectAreaLights.value=b.rectArea,Ki.pointLights.value=b.point,Ki.hemisphereLights.value=b.hemi,Ki.directionalShadowMap.value=b.directionalShadowMap,Ki.directionalShadowMatrix.value=b.directionalShadowMatrix,Ki.spotShadowMap.value=b.spotShadowMap,Ki.spotShadowMatrix.value=b.spotShadowMatrix,Ki.pointShadowMap.value=b.pointShadowMap,Ki.pointShadowMatrix.value=b.pointShadowMatrix);var eo=dn.program.getUniforms(),ao=Ka.seqWithValue(eo.seq,Ki);dn.uniformsList=ao}(an,lt,dn),an.needsUpdate=!1);var rr=!1,ni=!1,Or=!1,Oi=pn.program,Ni=Oi.getUniforms(),Ki=pn.__webglShader.uniforms;if(Oi.id!==pt&&(E.useProgram(Oi.program),pt=Oi.id,rr=!0,ni=!0,Or=!0),an.id!==Bt&&(Bt=an.id,ni=!0),rr||Ve!==sn){if(Ni.set(E,Ve,"projectionMatrix"),G.logarithmicDepthBuffer&&Ni.setValue(E,"logDepthBufFC",2/(Math.log(Ve.far+1)/Math.LN2)),Ve!==sn&&(sn=Ve,ni=!0,Or=!0),an.isShaderMaterial||an.isMeshPhongMaterial||an.isMeshStandardMaterial||an.envMap){var eo=Ni.map.cameraPosition;void 0!==eo&&eo.setValue(E,d.setFromMatrixPosition(Ve.matrixWorld))}(an.isMeshPhongMaterial||an.isMeshLambertMaterial||an.isMeshBasicMaterial||an.isMeshStandardMaterial||an.isShaderMaterial||an.skinning)&&Ni.setValue(E,"viewMatrix",Ve.matrixWorldInverse),Ni.set(E,Ke,"toneMappingExposure"),Ni.set(E,Ke,"toneMappingWhitePoint")}if(an.skinning){Ni.setOptional(E,dn,"bindMatrix"),Ni.setOptional(E,dn,"bindMatrixInverse");var ao=dn.skeleton;ao&&(G.floatVertexTextures&&ao.useVertexTexture?(Ni.set(E,ao,"boneTexture"),Ni.set(E,ao,"boneTextureWidth"),Ni.set(E,ao,"boneTextureHeight")):Ni.setOptional(E,ao,"boneMatrices"))}return ni&&(an.lights&&function Zr(Ve,lt){Ve.ambientLightColor.needsUpdate=lt,Ve.directionalLights.needsUpdate=lt,Ve.pointLights.needsUpdate=lt,Ve.spotLights.needsUpdate=lt,Ve.rectAreaLights.needsUpdate=lt,Ve.hemisphereLights.needsUpdate=lt}(Ki,Or),lt&&an.fog&&function tr(Ve,lt){Ve.fogColor.value=lt.color,lt.isFog?(Ve.fogNear.value=lt.near,Ve.fogFar.value=lt.far):lt.isFogExp2&&(Ve.fogDensity.value=lt.density)}(Ki,lt),(an.isMeshBasicMaterial||an.isMeshLambertMaterial||an.isMeshPhongMaterial||an.isMeshStandardMaterial||an.isMeshNormalMaterial||an.isMeshDepthMaterial)&&function ir(Ve,lt){var an;if(Ve.opacity.value=lt.opacity,Ve.diffuse.value=lt.color,lt.emissive&&Ve.emissive.value.copy(lt.emissive).multiplyScalar(lt.emissiveIntensity),Ve.map.value=lt.map,Ve.specularMap.value=lt.specularMap,Ve.alphaMap.value=lt.alphaMap,lt.lightMap&&(Ve.lightMap.value=lt.lightMap,Ve.lightMapIntensity.value=lt.lightMapIntensity),lt.aoMap&&(Ve.aoMap.value=lt.aoMap,Ve.aoMapIntensity.value=lt.aoMapIntensity),lt.map?an=lt.map:lt.specularMap?an=lt.specularMap:lt.displacementMap?an=lt.displacementMap:lt.normalMap?an=lt.normalMap:lt.bumpMap?an=lt.bumpMap:lt.roughnessMap?an=lt.roughnessMap:lt.metalnessMap?an=lt.metalnessMap:lt.alphaMap?an=lt.alphaMap:lt.emissiveMap&&(an=lt.emissiveMap),void 0!==an){an.isWebGLRenderTarget&&(an=an.texture);var dn=an.offset,pn=an.repeat;Ve.offsetRepeat.value.set(dn.x,dn.y,pn.x,pn.y)}Ve.envMap.value=lt.envMap,Ve.flipEnvMap.value=lt.envMap&&lt.envMap.isCubeTexture?-1:1,Ve.reflectivity.value=lt.reflectivity,Ve.refractionRatio.value=lt.refractionRatio}(Ki,an),an.isLineBasicMaterial?Nr(Ki,an):an.isLineDashedMaterial?(Nr(Ki,an),function Yr(Ve,lt){Ve.dashSize.value=lt.dashSize,Ve.totalSize.value=lt.dashSize+lt.gapSize,Ve.scale.value=lt.scale}(Ki,an)):an.isPointsMaterial?function pr(Ve,lt){if(Ve.diffuse.value=lt.color,Ve.opacity.value=lt.opacity,Ve.size.value=lt.size*ei,Ve.scale.value=.5*Wn,Ve.map.value=lt.map,null!==lt.map){var an=lt.map.offset,dn=lt.map.repeat;Ve.offsetRepeat.value.set(an.x,an.y,dn.x,dn.y)}}(Ki,an):an.isMeshLambertMaterial?function $r(Ve,lt){lt.emissiveMap&&(Ve.emissiveMap.value=lt.emissiveMap)}(Ki,an):an.isMeshToonMaterial?function yr(Ve,lt){Mi(Ve,lt),lt.gradientMap&&(Ve.gradientMap.value=lt.gradientMap)}(Ki,an):an.isMeshPhongMaterial?Mi(Ki,an):an.isMeshPhysicalMaterial?function Kr(Ve,lt){Ve.clearCoat.value=lt.clearCoat,Ve.clearCoatRoughness.value=lt.clearCoatRoughness,Cr(Ve,lt)}(Ki,an):an.isMeshStandardMaterial?Cr(Ki,an):an.isMeshDepthMaterial?an.displacementMap&&(Ki.displacementMap.value=an.displacementMap,Ki.displacementScale.value=an.displacementScale,Ki.displacementBias.value=an.displacementBias):an.isMeshNormalMaterial&&function Fs(Ve,lt){lt.bumpMap&&(Ve.bumpMap.value=lt.bumpMap,Ve.bumpScale.value=lt.bumpScale),lt.normalMap&&(Ve.normalMap.value=lt.normalMap,Ve.normalScale.value.copy(lt.normalScale)),lt.displacementMap&&(Ve.displacementMap.value=lt.displacementMap,Ve.displacementScale.value=lt.displacementScale,Ve.displacementBias.value=lt.displacementBias)}(Ki,an),void 0!==Ki.ltcMat&&(Ki.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==Ki.ltcMag&&(Ki.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),Ka.upload(E,pn.uniformsList,Ki,Ke)),Ni.set(E,dn,"modelViewMatrix"),Ni.set(E,dn,"normalMatrix"),Ni.setValue(E,"modelMatrix",dn.matrixWorld),Oi}function Nr(Ve,lt){Ve.diffuse.value=lt.color,Ve.opacity.value=lt.opacity}function Mi(Ve,lt){Ve.specular.value=lt.specular,Ve.shininess.value=Math.max(lt.shininess,1e-4),lt.emissiveMap&&(Ve.emissiveMap.value=lt.emissiveMap),lt.bumpMap&&(Ve.bumpMap.value=lt.bumpMap,Ve.bumpScale.value=lt.bumpScale),lt.normalMap&&(Ve.normalMap.value=lt.normalMap,Ve.normalScale.value.copy(lt.normalScale)),lt.displacementMap&&(Ve.displacementMap.value=lt.displacementMap,Ve.displacementScale.value=lt.displacementScale,Ve.displacementBias.value=lt.displacementBias)}function Cr(Ve,lt){Ve.roughness.value=lt.roughness,Ve.metalness.value=lt.metalness,lt.roughnessMap&&(Ve.roughnessMap.value=lt.roughnessMap),lt.metalnessMap&&(Ve.metalnessMap.value=lt.metalnessMap),lt.emissiveMap&&(Ve.emissiveMap.value=lt.emissiveMap),lt.bumpMap&&(Ve.bumpMap.value=lt.bumpMap,Ve.bumpScale.value=lt.bumpScale),lt.normalMap&&(Ve.normalMap.value=lt.normalMap,Ve.normalScale.value.copy(lt.normalScale)),lt.displacementMap&&(Ve.displacementMap.value=lt.displacementMap,Ve.displacementScale.value=lt.displacementScale,Ve.displacementBias.value=lt.displacementBias),lt.envMap&&(Ve.envMapIntensity.value=lt.envMapIntensity)}function Ei(Ve){var lt;if(Ve===th)return E.REPEAT;if(Ve===lc)return E.CLAMP_TO_EDGE;if(Ve===Ah)return E.MIRRORED_REPEAT;if(Ve===qa)return E.NEAREST;if(Ve===Ld)return E.NEAREST_MIPMAP_NEAREST;if(Ve===cu)return E.NEAREST_MIPMAP_LINEAR;if(Ve===Aa)return E.LINEAR;if(Ve===Ih)return E.LINEAR_MIPMAP_NEAREST;if(Ve===Pu)return E.LINEAR_MIPMAP_LINEAR;if(Ve===hf)return E.UNSIGNED_BYTE;if(Ve===Tg)return E.UNSIGNED_SHORT_4_4_4_4;if(Ve===Sh)return E.UNSIGNED_SHORT_5_5_5_1;if(Ve===to)return E.UNSIGNED_SHORT_5_6_5;if(Ve===td)return E.BYTE;if(Ve===dl)return E.SHORT;if(Ve===df)return E.UNSIGNED_SHORT;if(Ve===nh)return E.INT;if(Ve===ff)return E.UNSIGNED_INT;if(Ve===Pd)return E.FLOAT;if(Ve===xc&&null!==(lt=L.get("OES_texture_half_float")))return lt.HALF_FLOAT_OES;if(Ve===fl)return E.ALPHA;if(Ve===wc)return E.RGB;if(Ve===nl)return E.RGBA;if(Ve===jf)return E.LUMINANCE;if(Ve===nd)return E.LUMINANCE_ALPHA;if(Ve===it)return E.DEPTH_COMPONENT;if(Ve===Ye)return E.DEPTH_STENCIL;if(Ve===at)return E.FUNC_ADD;if(Ve===xt)return E.FUNC_SUBTRACT;if(Ve===He)return E.FUNC_REVERSE_SUBTRACT;if(Ve===Ct)return E.ZERO;if(Ve===kn)return E.ONE;if(Ve===Ut)return E.SRC_COLOR;if(Ve===Dn)return E.ONE_MINUS_SRC_COLOR;if(Ve===Jt)return E.SRC_ALPHA;if(Ve===nn)return E.ONE_MINUS_SRC_ALPHA;if(Ve===Ln)return E.DST_ALPHA;if(Ve===xn)return E.ONE_MINUS_DST_ALPHA;if(Ve===bn)return E.DST_COLOR;if(Ve===yn)return E.ONE_MINUS_DST_COLOR;if(Ve===je)return E.SRC_ALPHA_SATURATE;if((Ve===he||Ve===Se||Ve===$e||Ve===_t)&&null!==(lt=L.get("WEBGL_compressed_texture_s3tc"))){if(Ve===he)return lt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(Ve===Se)return lt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(Ve===$e)return lt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(Ve===_t)return lt.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((Ve===zt||Ve===In||Ve===yi||Ve===ti)&&null!==(lt=L.get("WEBGL_compressed_texture_pvrtc"))){if(Ve===zt)return lt.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(Ve===In)return lt.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(Ve===yi)return lt.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(Ve===ti)return lt.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(Ve===di&&null!==(lt=L.get("WEBGL_compressed_texture_etc1")))return lt.COMPRESSED_RGB_ETC1_WEBGL;if((Ve===ft||Ve===gt)&&null!==(lt=L.get("EXT_blend_minmax"))){if(Ve===ft)return lt.MIN_EXT;if(Ve===gt)return lt.MAX_EXT}return Ve===pf&&null!==(lt=L.get("WEBGL_depth_texture"))?lt.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return E},this.getContextAttributes=function(){return E.getContextAttributes()},this.forceContextLoss=function(){L.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return G.getMaxAnisotropy()},this.getPrecision=function(){return G.precision},this.getPixelRatio=function(){return ei},this.setPixelRatio=function(Ve){void 0!==Ve&&(ei=Ve,this.setSize(fi.z,fi.w,!1))},this.getSize=function(){return{width:qt,height:Wn}},this.setSize=function(Ve,lt,an){qt=Ve,Wn=lt,h.width=Ve*ei,h.height=lt*ei,!1!==an&&(h.style.width=Ve+"px",h.style.height=lt+"px"),this.setViewport(0,0,Ve,lt)},this.setViewport=function(Ve,lt,an,dn){K.viewport(fi.set(Ve,lt,an,dn))},this.setScissor=function(Ve,lt,an,dn){K.scissor(Ii.set(Ve,lt,an,dn))},this.setScissorTest=function(Ve){K.setScissorTest(_i=Ve)},this.getClearColor=function(){return ui},this.setClearColor=function(Ve,lt){ui.set(Ve),K.buffers.color.setClear(ui.r,ui.g,ui.b,jt=void 0!==lt?lt:1,N)},this.getClearAlpha=function(){return jt},this.setClearAlpha=function(Ve){K.buffers.color.setClear(ui.r,ui.g,ui.b,jt=Ve,N)},this.clear=function(Ve,lt,an){var dn=0;(void 0===Ve||Ve)&&(dn|=E.COLOR_BUFFER_BIT),(void 0===lt||lt)&&(dn|=E.DEPTH_BUFFER_BIT),(void 0===an||an)&&(dn|=E.STENCIL_BUFFER_BIT),E.clear(dn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(Ve,lt,an,dn){this.setRenderTarget(Ve),this.clear(lt,an,dn)},this.resetGLState=Ht,this.dispose=function(){Le=[],ke=-1,fe=[],me=-1,h.removeEventListener("webglcontextlost",Tt,!1)},this.renderBufferImmediate=function(Ve,lt,an){K.initAttributes();var dn=le.get(Ve);Ve.hasPositions&&!dn.position&&(dn.position=E.createBuffer()),Ve.hasNormals&&!dn.normal&&(dn.normal=E.createBuffer()),Ve.hasUvs&&!dn.uv&&(dn.uv=E.createBuffer()),Ve.hasColors&&!dn.color&&(dn.color=E.createBuffer());var pn=lt.getAttributes();if(Ve.hasPositions&&(E.bindBuffer(E.ARRAY_BUFFER,dn.position),E.bufferData(E.ARRAY_BUFFER,Ve.positionArray,E.DYNAMIC_DRAW),K.enableAttribute(pn.position),E.vertexAttribPointer(pn.position,3,E.FLOAT,!1,0,0)),Ve.hasNormals){if(E.bindBuffer(E.ARRAY_BUFFER,dn.normal),!an.isMeshPhongMaterial&&!an.isMeshStandardMaterial&&!an.isMeshNormalMaterial&&an.shading===xe)for(var Zi=0,rr=3*Ve.count;Zi<rr;Zi+=9){var ni=Ve.normalArray,Or=(ni[Zi+0]+ni[Zi+3]+ni[Zi+6])/3,Oi=(ni[Zi+1]+ni[Zi+4]+ni[Zi+7])/3,Ni=(ni[Zi+2]+ni[Zi+5]+ni[Zi+8])/3;ni[Zi+0]=Or,ni[Zi+1]=Oi,ni[Zi+2]=Ni,ni[Zi+3]=Or,ni[Zi+4]=Oi,ni[Zi+5]=Ni,ni[Zi+6]=Or,ni[Zi+7]=Oi,ni[Zi+8]=Ni}E.bufferData(E.ARRAY_BUFFER,Ve.normalArray,E.DYNAMIC_DRAW),K.enableAttribute(pn.normal),E.vertexAttribPointer(pn.normal,3,E.FLOAT,!1,0,0)}Ve.hasUvs&&an.map&&(E.bindBuffer(E.ARRAY_BUFFER,dn.uv),E.bufferData(E.ARRAY_BUFFER,Ve.uvArray,E.DYNAMIC_DRAW),K.enableAttribute(pn.uv),E.vertexAttribPointer(pn.uv,2,E.FLOAT,!1,0,0)),Ve.hasColors&&an.vertexColors!==re&&(E.bindBuffer(E.ARRAY_BUFFER,dn.color),E.bufferData(E.ARRAY_BUFFER,Ve.colorArray,E.DYNAMIC_DRAW),K.enableAttribute(pn.color),E.vertexAttribPointer(pn.color,3,E.FLOAT,!1,0,0)),K.disableUnusedAttributes(),E.drawArrays(E.TRIANGLES,0,Ve.count),Ve.count=0},this.renderBufferDirect=function(Ve,lt,an,dn,pn,Zi){xi(dn);var rr=ji(Ve,lt,dn,pn),ni=!1,Or=an.id+"_"+rr.id+"_"+dn.wireframe;Or!==cn&&(cn=Or,ni=!0);var Oi=pn.morphTargetInfluences;if(void 0!==Oi){for(var Ni=[],Ki=0,eo=Oi.length;Ki<eo;Ki++)Ni.push([ao=Oi[Ki],Ki]);Ni.sort(Rn),Ni.length>8&&(Ni.length=8);var Fa=an.morphAttributes;for(Ki=0,eo=Ni.length;Ki<eo;Ki++){var ao;if(Fe[Ki]=(ao=Ni[Ki])[0],0!==ao[0]){var So=ao[1];!0===dn.morphTargets&&Fa.position&&an.addAttribute("morphTarget"+Ki,Fa.position[So]),!0===dn.morphNormals&&Fa.normal&&an.addAttribute("morphNormal"+Ki,Fa.normal[So])}else!0===dn.morphTargets&&an.removeAttribute("morphTarget"+Ki),!0===dn.morphNormals&&an.removeAttribute("morphNormal"+Ki)}Ki=Ni.length;for(var Uo=Fe.length;Ki<Uo;Ki++)Fe[Ki]=0;rr.getUniforms().setValue(E,"morphTargetInfluences",Fe),ni=!0}So=an.index;var Ha,Xo=an.attributes.position,Ir=1;!0===dn.wireframe&&(So=pe.getWireframeAttribute(an),Ir=2),null!==So?(Ha=Qe).setIndex(So):Ha=ze,ni&&(function Sn(Ve,lt,an,dn){var pn;if(an&&an.isInstancedBufferGeometry&&null===(pn=L.get("ANGLE_instanced_arrays")))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{void 0===dn&&(dn=0),K.initAttributes();var Zi=an.attributes,rr=lt.getAttributes(),ni=Ve.defaultAttributeValues;for(var Or in rr){var Oi=rr[Or];if(Oi>=0){var Ni=Zi[Or];if(void 0!==Ni){var Ki=Ni.normalized,eo=Ni.itemSize,ao=pe.getAttributeProperties(Ni),Fa=ao.__webglBuffer,Uo=ao.type,So=ao.bytesPerElement;if(Ni.isInterleavedBufferAttribute){var Xo=Ni.data,Ir=Xo.stride,Ha=Ni.offset;Xo&&Xo.isInstancedInterleavedBuffer?(K.enableAttributeAndDivisor(Oi,Xo.meshPerAttribute,pn),void 0===an.maxInstancedCount&&(an.maxInstancedCount=Xo.meshPerAttribute*Xo.count)):K.enableAttribute(Oi),E.bindBuffer(E.ARRAY_BUFFER,Fa),E.vertexAttribPointer(Oi,eo,Uo,Ki,Ir*So,(dn*Ir+Ha)*So)}else Ni.isInstancedBufferAttribute?(K.enableAttributeAndDivisor(Oi,Ni.meshPerAttribute,pn),void 0===an.maxInstancedCount&&(an.maxInstancedCount=Ni.meshPerAttribute*Ni.count)):K.enableAttribute(Oi),E.bindBuffer(E.ARRAY_BUFFER,Fa),E.vertexAttribPointer(Oi,eo,Uo,Ki,0,dn*eo*So)}else if(void 0!==ni){var Hl=ni[Or];if(void 0!==Hl)switch(Hl.length){case 2:E.vertexAttrib2fv(Oi,Hl);break;case 3:E.vertexAttrib3fv(Oi,Hl);break;case 4:E.vertexAttrib4fv(Oi,Hl);break;default:E.vertexAttrib1fv(Oi,Hl)}}}}K.disableUnusedAttributes()}}(dn,rr,an),null!==So&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,pe.getAttributeBuffer(So)));var Hl=0;null!==So?Hl=So.count:void 0!==Xo&&(Hl=Xo.count);var Gl=an.drawRange.start*Ir,Fc=an.drawRange.count*Ir,Cp=null!==Zi?Zi.start*Ir:0,Of=null!==Zi?Zi.count*Ir:1/0,Nc=Math.max(Gl,Cp),ic=Math.min(Hl,Gl+Fc,Cp+Of)-1,Bc=Math.max(0,ic-Nc+1);if(0!==Bc){if(pn.isMesh)if(!0===dn.wireframe)K.setLineWidth(dn.wireframeLinewidth*Ft()),Ha.setMode(E.LINES);else switch(pn.drawMode){case Xa:Ha.setMode(E.TRIANGLES);break;case Ru:Ha.setMode(E.TRIANGLE_STRIP);break;case hs:Ha.setMode(E.TRIANGLE_FAN)}else if(pn.isLine){var bp=dn.linewidth;void 0===bp&&(bp=1),K.setLineWidth(bp*Ft()),Ha.setMode(pn.isLineSegments?E.LINES:E.LINE_STRIP)}else pn.isPoints&&Ha.setMode(E.POINTS);an&&an.isInstancedBufferGeometry?an.maxInstancedCount>0&&Ha.renderInstances(an,Nc,Bc):Ha.render(Nc,Bc)}},this.render=function(Ve,lt,an,dn){if(void 0===lt||!0===lt.isCamera){cn="",Bt=-1,sn=null,!0===Ve.autoUpdate&&Ve.updateMatrixWorld(),null===lt.parent&&lt.updateMatrixWorld(),lt.matrixWorldInverse.getInverse(lt.matrixWorld),c.multiplyMatrices(lt.projectionMatrix,lt.matrixWorldInverse),nr.setFromMatrix(c),ee.length=0,me=-1,ke=-1,nt.length=0,tt.length=0,qn=zi.init(this.clippingPlanes,Hn=this.localClippingEnabled,lt),hi(Ve,lt),fe.length=me+1,Le.length=ke+1,!0===Ke.sortObjects&&(fe.sort(Jn),Le.sort(En)),qn&&zi.beginShadows(),function Ui(Ve){for(var lt=0,an=0,dn=Ve.length;an<dn;an++){var pn=Ve[an];pn.castShadow&&(b.shadows[lt++]=pn)}b.shadows.length=lt}(ee),Vt.render(Ve,lt),function St(Ve,lt){var an,dn,pn,Or,Oi,Ni,Ki,Zi=0,rr=0,ni=0,eo=lt.matrixWorldInverse,ao=0,Fa=0,Uo=0,So=0,Xo=0;for(an=0,dn=Ve.length;an<dn;an++)if(Or=(pn=Ve[an]).color,Oi=pn.intensity,Ni=pn.distance,Ki=pn.shadow&&pn.shadow.map?pn.shadow.map.texture:null,pn.isAmbientLight)Zi+=Or.r*Oi,rr+=Or.g*Oi,ni+=Or.b*Oi;else if(pn.isDirectionalLight)(Ir=Ne.get(pn)).color.copy(pn.color).multiplyScalar(pn.intensity),Ir.direction.setFromMatrixPosition(pn.matrixWorld),d.setFromMatrixPosition(pn.target.matrixWorld),Ir.direction.sub(d),Ir.direction.transformDirection(eo),Ir.shadow=pn.castShadow,pn.castShadow&&(Ir.shadowBias=pn.shadow.bias,Ir.shadowRadius=pn.shadow.radius,Ir.shadowMapSize=pn.shadow.mapSize),b.directionalShadowMap[ao]=Ki,b.directionalShadowMatrix[ao]=pn.shadow.matrix,b.directional[ao++]=Ir;else if(pn.isSpotLight)(Ir=Ne.get(pn)).position.setFromMatrixPosition(pn.matrixWorld),Ir.position.applyMatrix4(eo),Ir.color.copy(Or).multiplyScalar(Oi),Ir.distance=Ni,Ir.direction.setFromMatrixPosition(pn.matrixWorld),d.setFromMatrixPosition(pn.target.matrixWorld),Ir.direction.sub(d),Ir.direction.transformDirection(eo),Ir.coneCos=Math.cos(pn.angle),Ir.penumbraCos=Math.cos(pn.angle*(1-pn.penumbra)),Ir.decay=0===pn.distance?0:pn.decay,Ir.shadow=pn.castShadow,pn.castShadow&&(Ir.shadowBias=pn.shadow.bias,Ir.shadowRadius=pn.shadow.radius,Ir.shadowMapSize=pn.shadow.mapSize),b.spotShadowMap[Uo]=Ki,b.spotShadowMatrix[Uo]=pn.shadow.matrix,b.spot[Uo++]=Ir;else if(pn.isRectAreaLight)(Ir=Ne.get(pn)).color.copy(Or).multiplyScalar(Oi/(pn.width*pn.height)),Ir.position.setFromMatrixPosition(pn.matrixWorld),Ir.position.applyMatrix4(eo),_.identity(),m.copy(pn.matrixWorld),m.premultiply(eo),_.extractRotation(m),Ir.halfWidth.set(.5*pn.width,0,0),Ir.halfHeight.set(0,.5*pn.height,0),Ir.halfWidth.applyMatrix4(_),Ir.halfHeight.applyMatrix4(_),b.rectArea[So++]=Ir;else if(pn.isPointLight)(Ir=Ne.get(pn)).position.setFromMatrixPosition(pn.matrixWorld),Ir.position.applyMatrix4(eo),Ir.color.copy(pn.color).multiplyScalar(pn.intensity),Ir.distance=pn.distance,Ir.decay=0===pn.distance?0:pn.decay,Ir.shadow=pn.castShadow,pn.castShadow&&(Ir.shadowBias=pn.shadow.bias,Ir.shadowRadius=pn.shadow.radius,Ir.shadowMapSize=pn.shadow.mapSize),b.pointShadowMap[Fa]=Ki,void 0===b.pointShadowMatrix[Fa]&&(b.pointShadowMatrix[Fa]=new ms),d.setFromMatrixPosition(pn.matrixWorld).negate(),b.pointShadowMatrix[Fa].identity().setPosition(d),b.point[Fa++]=Ir;else if(pn.isHemisphereLight){var Ir;(Ir=Ne.get(pn)).direction.setFromMatrixPosition(pn.matrixWorld),Ir.direction.transformDirection(eo),Ir.direction.normalize(),Ir.skyColor.copy(pn.color).multiplyScalar(Oi),Ir.groundColor.copy(pn.groundColor).multiplyScalar(Oi),b.hemi[Xo++]=Ir}b.ambient[0]=Zi,b.ambient[1]=rr,b.ambient[2]=ni,b.directional.length=ao,b.spot.length=Uo,b.rectArea.length=So,b.point.length=Fa,b.hemi.length=Xo,b.hash=ao+","+Fa+","+Uo+","+So+","+Xo+","+b.shadows.length}(ee,lt),qn&&zi.endShadows(),w.calls=0,w.vertices=0,w.faces=0,w.points=0,void 0===an&&(an=null),this.setRenderTarget(an);var pn=Ve.background;if(null===pn?K.buffers.color.setClear(ui.r,ui.g,ui.b,jt,N):pn&&pn.isColor&&(K.buffers.color.setClear(pn.r,pn.g,pn.b,1,N),dn=!0),(this.autoClear||dn)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),pn&&pn.isCubeTexture?(dt.projectionMatrix.copy(lt.projectionMatrix),dt.matrixWorld.extractRotation(lt.matrixWorld),dt.matrixWorldInverse.getInverse(dt.matrixWorld),mt.material.uniforms.tCube.value=pn,mt.modelViewMatrix.multiplyMatrices(dt.matrixWorldInverse,mt.matrixWorld),pe.update(mt),Ke.renderBufferDirect(dt,null,mt.geometry,mt.material,mt,null)):pn&&pn.isTexture&&(Lt.material.map=pn,pe.update(Lt),Ke.renderBufferDirect(qe,null,Lt.geometry,Lt.material,Lt,null)),Ve.overrideMaterial){var Zi=Ve.overrideMaterial;Mn(fe,Ve,lt,Zi),Mn(Le,Ve,lt,Zi)}else K.setBlending($),Mn(fe,Ve,lt),Mn(Le,Ve,lt);et.render(Ve,lt),Wt.render(Ve,lt,On),an&&de.updateRenderTargetMipmap(an),K.setDepthTest(!0),K.setDepthWrite(!0),K.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(Ve,lt){K.setCullFace(Ve),K.setFlipSided(lt===q)},this.allocTextureUnit=function $n(){var Ve=Ai;return Ve>=G.maxTextures&&console.warn("WebGLRenderer: trying to use "+Ve+" texture units while this GPU supports only "+G.maxTextures),Ai+=1,Ve},this.setTexture2D=(Ve=!1,function(an,dn){an&&an.isWebGLRenderTarget&&(Ve||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Ve=!0),an=an.texture),de.setTexture2D(an,dn)}),this.setTexture=function(){var Ve=!1;return function(an,dn){Ve||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),Ve=!0),de.setTexture2D(an,dn)}}(),this.setTextureCube=function(){var Ve=!1;return function(an,dn){an&&an.isWebGLRenderTargetCube&&(Ve||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Ve=!0),an=an.texture),an&&an.isCubeTexture||Array.isArray(an.image)&&6===an.image.length?de.setTextureCube(an,dn):de.setTextureCubeDynamic(an,dn)}}(),this.getCurrentRenderTarget=function(){return vt},this.setRenderTarget=function(Ve){vt=Ve,Ve&&void 0===le.get(Ve).__webglFramebuffer&&de.setupRenderTarget(Ve);var an,lt=Ve&&Ve.isWebGLRenderTargetCube;if(Ve){var dn=le.get(Ve);an=lt?dn.__webglFramebuffer[Ve.activeCubeFace]:dn.__webglFramebuffer,en.copy(Ve.scissor),hn=Ve.scissorTest,On.copy(Ve.viewport)}else an=null,en.copy(Ii).multiplyScalar(ei),hn=_i,On.copy(fi).multiplyScalar(ei);if(Xt!==an&&(E.bindFramebuffer(E.FRAMEBUFFER,an),Xt=an),K.scissor(en),K.setScissorTest(hn),K.viewport(On),lt){var pn=le.get(Ve.texture);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+Ve.activeCubeFace,pn.__webglTexture,Ve.activeMipMapLevel)}},this.readRenderTargetPixels=function(Ve,lt,an,dn,pn,Zi){if(!1!==(Ve&&Ve.isWebGLRenderTarget)){var rr=le.get(Ve).__webglFramebuffer;if(rr){var ni=!1;rr!==Xt&&(E.bindFramebuffer(E.FRAMEBUFFER,rr),ni=!0);try{var Or=Ve.texture,Oi=Or.format,Ni=Or.type;if(Oi!==nl&&Ei(Oi)!==E.getParameter(E.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(Ni===hf||Ei(Ni)===E.getParameter(E.IMPLEMENTATION_COLOR_READ_TYPE)||Ni===Pd&&(L.get("OES_texture_float")||L.get("WEBGL_color_buffer_float"))||Ni===xc&&L.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");E.checkFramebufferStatus(E.FRAMEBUFFER)===E.FRAMEBUFFER_COMPLETE?lt>=0&&lt<=Ve.width-dn&&an>=0&&an<=Ve.height-pn&&E.readPixels(lt,an,dn,pn,Ei(Oi),Ei(Ni),Zi):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{ni&&E.bindFramebuffer(E.FRAMEBUFFER,Xt)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}function Oh(a,h){this.name="",this.color=new jr(a),this.density=void 0!==h?h:25e-5}function Lc(a,h,g){this.name="",this.color=new jr(a),this.near=void 0!==h?h:1,this.far=void 0!==g?g:1e3}function Fh(){_r.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function uh(a,h,g,y,A){_r.call(this),this.lensFlares=[],this.positionScreen=new Zt,this.customUpdateCallback=void 0,void 0!==a&&this.add(a,h,g,y,A)}function Fu(a){Ks.call(this),this.type="SpriteMaterial",this.color=new jr(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(a)}function gu(a){_r.call(this),this.type="Sprite",this.material=void 0!==a?a:new Fu}function sa(){_r.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ad(a,h,g){if(this.useVertexTexture=void 0===g||g,this.identityMatrix=new ms,this.bones=(a=a||[]).slice(0),this.useVertexTexture){var y=Math.sqrt(4*this.bones.length);y=xs.nextPowerOfTwo(Math.ceil(y)),y=Math.max(y,4),this.boneTextureWidth=y,this.boneTextureHeight=y,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new es(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,nl,Pd)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===h)this.calculateInverses();else if(this.bones.length===h.length)this.boneInverses=h.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var A=0,T=this.bones.length;A<T;A++)this.boneInverses.push(new ms)}}function Pm(){_r.call(this),this.type="Bone"}function $g(a,h,g){ba.call(this,a,h),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ms,this.bindMatrixInverse=new ms;var y=[];if(this.geometry&&void 0!==this.geometry.bones){for(var A,T,R=0,N=this.geometry.bones.length;R<N;++R)T=this.geometry.bones[R],A=new Pm,y.push(A),A.name=T.name,A.position.fromArray(T.pos),A.quaternion.fromArray(T.rotq),void 0!==T.scl&&A.scale.fromArray(T.scl);for(R=0,N=this.geometry.bones.length;R<N;++R)-1!==(T=this.geometry.bones[R]).parent&&null!==T.parent&&void 0!==y[T.parent]?y[T.parent].add(y[R]):this.add(y[R])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new ad(y,void 0,g),this.matrixWorld)}function al(a){Ks.call(this),this.type="LineBasicMaterial",this.color=new jr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(a)}function mu(a,h,g){if(1===g)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new vo(a,h);_r.call(this),this.type="Line",this.geometry=void 0!==a?a:new Er,this.material=void 0!==h?h:new al({color:16777215*Math.random()})}function vo(a,h){mu.call(this,a,h),this.type="LineSegments"}function Pc(a){Ks.call(this),this.type="PointsMaterial",this.color=new jr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(a)}function js(a,h){_r.call(this),this.type="Points",this.geometry=void 0!==a?a:new Er,this.material=void 0!==h?h:new Pc({color:16777215*Math.random()})}function ap(){_r.call(this),this.type="Group"}function lp(a,h,g,y,A,T,R,N,ie){Wo.call(this,a,h,g,y,A,T,R,N,ie),this.generateMipmaps=!1;var ee=this;!function fe(){requestAnimationFrame(fe),a.readyState>=a.HAVE_CURRENT_DATA&&(ee.needsUpdate=!0)}()}function Rc(a,h,g,y,A,T,R,N,ie,ee,fe,me){Wo.call(this,null,T,R,N,ie,ee,y,A,fe,me),this.image={width:h,height:g},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}function cp(a,h,g,y,A,T,R,N,ie){Wo.call(this,a,h,g,y,A,T,R,N,ie),this.needsUpdate=!0}function qg(a,h,g,y,A,T,R,N,ie,ee){if((ee=void 0!==ee?ee:it)!==it&&ee!==Ye)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===g&&ee===it&&(g=df),void 0===g&&ee===Ye&&(g=pf),Wo.call(this,null,y,A,T,R,N,ee,g,ie),this.image={width:a,height:h},this.magFilter=void 0!==R?R:qa,this.minFilter=void 0!==N?N:qa,this.flipY=!1,this.generateMipmaps=!1}function hh(a){Er.call(this);var h=[0,0],g={};function y(ui,jt){return ui-jt}var A=["a","b","c"];if(a&&a.isGeometry){for(var T=a.vertices,R=a.faces,N=0,ie=new Uint32Array(6*R.length),ee=0,fe=R.length;ee<fe;ee++)for(var me=R[ee],Le=0;Le<3;Le++)h[0]=me[A[Le]],h[1]=me[A[(Le+1)%3]],h.sort(y),void 0===g[ke=h.toString()]&&(ie[2*N]=h[0],ie[2*N+1]=h[1],g[ke]=!0,N++);var Fe=new Float32Array(2*N*3);for(ee=0,fe=N;ee<fe;ee++)for(Le=0;Le<2;Le++){var nt=T[ie[2*ee+Le]];Fe[0+(tt=6*ee+3*Le)]=nt.x,Fe[tt+1]=nt.y,Fe[tt+2]=nt.z}this.addAttribute("position",new fr(Fe,3))}else if(a&&a.isBufferGeometry)if(null!==a.index){var Ke=a.index.array,pt=(T=a.attributes.position,a.groups);N=0,0===pt.length&&a.addGroup(0,Ke.length),ie=new Uint32Array(2*Ke.length);for(var vt=0,Xt=pt.length;vt<Xt;++vt)for(var Bt=pt[vt],cn=Bt.start,en=(ee=cn,cn+Bt.count);ee<en;ee+=3)for(Le=0;Le<3;Le++){var ke;h[0]=Ke[ee+Le],h[1]=Ke[ee+(Le+1)%3],h.sort(y),void 0===g[ke=h.toString()]&&(ie[2*N]=h[0],ie[2*N+1]=h[1],g[ke]=!0,N++)}for(Fe=new Float32Array(2*N*3),ee=0,fe=N;ee<fe;ee++)for(Le=0;Le<2;Le++)Fe[0+(tt=6*ee+3*Le)]=T.getX(hn=ie[2*ee+Le]),Fe[tt+1]=T.getY(hn),Fe[tt+2]=T.getZ(hn);this.addAttribute("position",new fr(Fe,3))}else{var On=(N=(T=a.attributes.position.array).length/3)/3;for(Fe=new Float32Array(2*N*3),ee=0,fe=On;ee<fe;ee++)for(Le=0;Le<3;Le++){var tt,hn,Ai=9*ee+3*Le;Fe[0+(tt=18*ee+6*Le)]=T[Ai],Fe[tt+1]=T[Ai+1],Fe[tt+2]=T[Ai+2],Fe[tt+3]=T[hn=9*ee+(Le+1)%3*3],Fe[tt+4]=T[hn+1],Fe[tt+5]=T[hn+2]}this.addAttribute("position",new fr(Fe,3))}}function Hd(a,h,g){Er.call(this),this.type="ParametricBufferGeometry",this.parameters={func:a,slices:h,stacks:g};var T,R,N,ie,ee,y=[],A=[],fe=h+1;for(T=0;T<=g;T++)for(ee=T/g,R=0;R<=h;R++)N=a(ie=R/h,ee),y.push(N.x,N.y,N.z),A.push(ie,ee);var ke,Fe,nt,me=[];for(T=0;T<g;T++)for(R=0;R<h;R++)Fe=(T+1)*fe+R+1,me.push(T*fe+R,ke=T*fe+R+1,nt=(T+1)*fe+R),me.push(ke,Fe,nt);this.setIndex(new(me.length>65535?Ou:Nd)(me,1)),this.addAttribute("position",new rs(y,3)),this.addAttribute("uv",new rs(A,2)),this.computeVertexNormals()}function Gd(a,h,g){Ts.call(this),this.type="ParametricGeometry",this.parameters={func:a,slices:h,stacks:g},this.fromBufferGeometry(new Hd(a,h,g)),this.mergeVertices()}function Ql(a,h,g,y){Er.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:a,indices:h,radius:g,detail:y},g=g||1;var A=[],T=[];function N(Ke,pt,vt,Xt){var sn,en,Bt=Math.pow(2,Xt),cn=[];for(sn=0;sn<=Bt;sn++){cn[sn]=[];var hn=Ke.clone().lerp(vt,sn/Bt),On=pt.clone().lerp(vt,sn/Bt),Ai=Bt-sn;for(en=0;en<=Ai;en++)cn[sn][en]=0===en&&sn===Bt?hn:hn.clone().lerp(On,en/Ai)}for(sn=0;sn<Bt;sn++)for(en=0;en<2*(Bt-sn)-1;en++){var ui=Math.floor(en/2);en%2==0?(me(cn[sn][ui+1]),me(cn[sn+1][ui]),me(cn[sn][ui])):(me(cn[sn][ui+1]),me(cn[sn+1][ui+1]),me(cn[sn+1][ui]))}}function me(Ke){A.push(Ke.x,Ke.y,Ke.z)}function Le(Ke,pt){var vt=3*Ke;pt.x=a[vt+0],pt.y=a[vt+1],pt.z=a[vt+2]}function Fe(Ke,pt,vt,Xt){Xt<0&&1===Ke.x&&(T[pt]=Ke.x-1),0===vt.x&&0===vt.z&&(T[pt]=Xt/2/Math.PI+.5)}function nt(Ke){return Math.atan2(Ke.z,-Ke.x)}function tt(Ke){return Math.atan2(-Ke.y,Math.sqrt(Ke.x*Ke.x+Ke.z*Ke.z))}(function R(Ke){for(var pt=new Zt,vt=new Zt,Xt=new Zt,Bt=0;Bt<h.length;Bt+=3)Le(h[Bt+0],pt),Le(h[Bt+1],vt),Le(h[Bt+2],Xt),N(pt,vt,Xt,Ke)})(y=y||0),function ie(Ke){for(var pt=new Zt,vt=0;vt<A.length;vt+=3)pt.x=A[vt+0],pt.y=A[vt+1],pt.z=A[vt+2],pt.normalize().multiplyScalar(Ke),A[vt+0]=pt.x,A[vt+1]=pt.y,A[vt+2]=pt.z}(g),function ee(){for(var Ke=new Zt,pt=0;pt<A.length;pt+=3){Ke.x=A[pt+0],Ke.y=A[pt+1],Ke.z=A[pt+2];var vt=nt(Ke)/2/Math.PI+.5,Xt=tt(Ke)/Math.PI+.5;T.push(vt,1-Xt)}(function ke(){for(var Ke=new Zt,pt=new Zt,vt=new Zt,Xt=new Zt,Bt=new Xi,cn=new Xi,sn=new Xi,en=0,hn=0;en<A.length;en+=9,hn+=6){Ke.set(A[en+0],A[en+1],A[en+2]),pt.set(A[en+3],A[en+4],A[en+5]),vt.set(A[en+6],A[en+7],A[en+8]),Bt.set(T[hn+0],T[hn+1]),cn.set(T[hn+2],T[hn+3]),sn.set(T[hn+4],T[hn+5]),Xt.copy(Ke).add(pt).add(vt).divideScalar(3);var On=nt(Xt);Fe(Bt,hn+0,Ke,On),Fe(cn,hn+2,pt,On),Fe(sn,hn+4,vt,On)}})(),function fe(){for(var Ke=0;Ke<T.length;Ke+=6){var pt=T[Ke+0],vt=T[Ke+2],Xt=T[Ke+4],Bt=Math.max(pt,vt,Xt),cn=Math.min(pt,vt,Xt);Bt>.9&&cn<.1&&(pt<.2&&(T[Ke+0]+=1),vt<.2&&(T[Ke+2]+=1),Xt<.2&&(T[Ke+4]+=1))}}()}(),this.addAttribute("position",new rs(A,3)),this.addAttribute("normal",new rs(A.slice(),3)),this.addAttribute("uv",new rs(T,2)),this.normalizeNormals(),this.boundingSphere=new wt(new Zt,g)}function ll(a,h){Ql.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],a,h),this.type="TetrahedronBufferGeometry",this.parameters={radius:a,detail:h}}function Nh(a,h){Ts.call(this),this.type="TetrahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new ll(a,h)),this.mergeVertices()}function Qc(a,h){Ql.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],a,h),this.type="OctahedronBufferGeometry",this.parameters={radius:a,detail:h}}function ld(a,h){Ts.call(this),this.type="OctahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new Qc(a,h)),this.mergeVertices()}function Wd(a,h){var g=(1+Math.sqrt(5))/2;Ql.call(this,[-1,g,0,1,g,0,-1,-g,0,1,-g,0,0,-1,g,0,1,g,0,-1,-g,0,1,-g,g,0,-1,g,0,1,-g,0,-1,-g,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a,h),this.type="IcosahedronBufferGeometry",this.parameters={radius:a,detail:h}}function up(a,h){Ts.call(this),this.type="IcosahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new Wd(a,h)),this.mergeVertices()}function dh(a,h){var g=(1+Math.sqrt(5))/2,y=1/g;Ql.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-y,-g,0,-y,g,0,y,-g,0,y,g,-y,-g,0,-y,g,0,y,-g,0,y,g,0,-g,0,-y,g,0,-y,-g,0,y,g,0,y],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,h),this.type="DodecahedronBufferGeometry",this.parameters={radius:a,detail:h}}function Yp(a,h){Ts.call(this),this.type="DodecahedronGeometry",this.parameters={radius:a,detail:h},this.fromBufferGeometry(new dh(a,h)),this.mergeVertices()}function zo(a,h,g,y){Ts.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:h,radius:g,detail:y},this.fromBufferGeometry(new Ql(a,h,g,y)),this.mergeVertices()}function jd(a,h,g,y,A){Er.call(this),this.type="TubeBufferGeometry",this.parameters={path:a,tubularSegments:h,radius:g,radialSegments:y,closed:A},g=g||1,y=y||8;var T=a.computeFrenetFrames(h=h||64,A=A||!1);this.tangents=T.tangents,this.normals=T.normals,this.binormals=T.binormals;var ee,fe,R=new Zt,N=new Zt,ie=new Xi,me=[],Le=[],ke=[],Fe=[];function tt(vt){var Xt=a.getPointAt(vt/h),Bt=T.normals[vt],cn=T.binormals[vt];for(fe=0;fe<=y;fe++){var sn=fe/y*Math.PI*2,en=Math.sin(sn),hn=-Math.cos(sn);N.x=hn*Bt.x+en*cn.x,N.y=hn*Bt.y+en*cn.y,N.z=hn*Bt.z+en*cn.z,N.normalize(),Le.push(N.x,N.y,N.z),R.x=Xt.x+g*N.x,R.y=Xt.y+g*N.y,R.z=Xt.z+g*N.z,me.push(R.x,R.y,R.z)}}(function nt(){for(ee=0;ee<h;ee++)tt(ee);tt(!1===A?h:0),function pt(){for(ee=0;ee<=h;ee++)for(fe=0;fe<=y;fe++)ie.x=ee/h,ie.y=fe/y,ke.push(ie.x,ie.y)}(),function Ke(){for(fe=1;fe<=h;fe++)for(ee=1;ee<=y;ee++){var Xt=(y+1)*fe+(ee-1),Bt=(y+1)*fe+ee,cn=(y+1)*(fe-1)+ee;Fe.push((y+1)*(fe-1)+(ee-1),Xt,cn),Fe.push(Xt,Bt,cn)}}()})(),this.setIndex(new(Fe.length>65535?Ou:Nd)(Fe,1)),this.addAttribute("position",new rs(me,3)),this.addAttribute("normal",new rs(Le,3)),this.addAttribute("uv",new rs(ke,2))}function Bh(a,h,g,y,A,T){Ts.call(this),this.type="TubeGeometry",this.parameters={path:a,tubularSegments:h,radius:g,radialSegments:y,closed:A},void 0!==T&&console.warn("THREE.TubeGeometry: taper has been removed.");var R=new jd(a,h,g,y,A);this.tangents=R.tangents,this.normals=R.normals,this.binormals=R.binormals,this.fromBufferGeometry(R),this.mergeVertices()}function Za(a,h,g,y,A,T){Er.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:a,tube:h,tubularSegments:g,radialSegments:y,p:A,q:T},a=a||100,h=h||40,g=Math.floor(g)||64,A=A||2,T=T||3;var Le,ke,R=((y=Math.floor(y)||8)+1)*(g+1),N=y*g*2*3,ie=new fr(new(N>65535?Uint32Array:Uint16Array)(N),1),ee=new fr(new Float32Array(3*R),3),fe=new fr(new Float32Array(3*R),3),me=new fr(new Float32Array(2*R),2),Fe=0,nt=0,tt=new Zt,Ke=new Zt,pt=new Xi,vt=new Zt,Xt=new Zt,Bt=new Zt,cn=new Zt,sn=new Zt;for(Le=0;Le<=g;++Le){var en=Le/g*A*Math.PI*2;for(ei(en,A,T,a,vt),ei(en+.01,A,T,a,Xt),cn.subVectors(Xt,vt),sn.addVectors(Xt,vt),Bt.crossVectors(cn,sn),sn.crossVectors(Bt,cn),Bt.normalize(),sn.normalize(),ke=0;ke<=y;++ke){var hn=ke/y*Math.PI*2,On=-h*Math.cos(hn),Ai=h*Math.sin(hn);tt.x=vt.x+(On*sn.x+Ai*Bt.x),tt.y=vt.y+(On*sn.y+Ai*Bt.y),tt.z=vt.z+(On*sn.z+Ai*Bt.z),ee.setXYZ(Fe,tt.x,tt.y,tt.z),Ke.subVectors(tt,vt).normalize(),fe.setXYZ(Fe,Ke.x,Ke.y,Ke.z),pt.x=Le/g,pt.y=ke/y,me.setXY(Fe,pt.x,pt.y),Fe++}}for(ke=1;ke<=g;ke++)for(Le=1;Le<=y;Le++){var jt=(y+1)*ke+(Le-1),qt=(y+1)*ke+Le,Wn=(y+1)*(ke-1)+Le;ie.setX(nt,(y+1)*(ke-1)+(Le-1)),nt++,ie.setX(nt,jt),nt++,ie.setX(nt,Wn),nt++,ie.setX(nt,jt),nt++,ie.setX(nt,qt),nt++,ie.setX(nt,Wn),nt++}function ei(Ii,_i,fi,nr,zi){var qn=Math.cos(Ii),Hn=Math.sin(Ii),f=fi/_i*Ii,c=Math.cos(f);zi.x=nr*(2+c)*.5*qn,zi.y=nr*(2+c)*Hn*.5,zi.z=nr*Math.sin(f)*.5}this.setIndex(ie),this.addAttribute("position",ee),this.addAttribute("normal",fe),this.addAttribute("uv",me)}function cd(a,h,g,y,A,T,R){Ts.call(this),this.type="TorusKnotGeometry",this.parameters={radius:a,tube:h,tubularSegments:g,radialSegments:y,p:A,q:T},void 0!==R&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Za(a,h,g,y,A,T)),this.mergeVertices()}function Nu(a,h,g,y,A){Er.call(this),this.type="TorusBufferGeometry",this.parameters={radius:a,tube:h,radialSegments:g,tubularSegments:y,arc:A},a=a||100,h=h||40,g=Math.floor(g)||8,y=Math.floor(y)||6,A=A||2*Math.PI;var Ke,pt,T=(g+1)*(y+1),R=g*y*2*3,N=new(R>65535?Uint32Array:Uint16Array)(R),ie=new Float32Array(3*T),ee=new Float32Array(3*T),fe=new Float32Array(2*T),me=0,Le=0,ke=0,Fe=new Zt,nt=new Zt,tt=new Zt;for(Ke=0;Ke<=g;Ke++)for(pt=0;pt<=y;pt++){var vt=pt/y*A,Xt=Ke/g*Math.PI*2;nt.x=(a+h*Math.cos(Xt))*Math.cos(vt),nt.y=(a+h*Math.cos(Xt))*Math.sin(vt),nt.z=h*Math.sin(Xt),ie[me]=nt.x,ie[me+1]=nt.y,ie[me+2]=nt.z,Fe.x=a*Math.cos(vt),Fe.y=a*Math.sin(vt),tt.subVectors(nt,Fe).normalize(),ee[me]=tt.x,ee[me+1]=tt.y,ee[me+2]=tt.z,fe[Le]=pt/y,fe[Le+1]=Ke/g,me+=3,Le+=2}for(Ke=1;Ke<=g;Ke++)for(pt=1;pt<=y;pt++){var cn=(y+1)*(Ke-1)+pt-1,sn=(y+1)*(Ke-1)+pt,en=(y+1)*Ke+pt;N[ke]=(y+1)*Ke+pt-1,N[ke+1]=cn,N[ke+2]=en,N[ke+3]=cn,N[ke+4]=sn,N[ke+5]=en,ke+=6}this.setIndex(new fr(N,1)),this.addAttribute("position",new fr(ie,3)),this.addAttribute("normal",new fr(ee,3)),this.addAttribute("uv",new fr(fe,2))}function zh(a,h,g,y,A){Ts.call(this),this.type="TorusGeometry",this.parameters={radius:a,tube:h,radialSegments:g,tubularSegments:y,arc:A},this.fromBufferGeometry(new Nu(a,h,g,y,A))}Oh.prototype.isFogExp2=!0,Oh.prototype.clone=function(){return new Oh(this.color.getHex(),this.density)},Oh.prototype.toJSON=function(a){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Lc.prototype.isFog=!0,Lc.prototype.clone=function(){return new Lc(this.color.getHex(),this.near,this.far)},Lc.prototype.toJSON=function(a){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},(Fh.prototype=Object.create(_r.prototype)).constructor=Fh,Fh.prototype.copy=function(a,h){return _r.prototype.copy.call(this,a,h),null!==a.background&&(this.background=a.background.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this},Fh.prototype.toJSON=function(a){var h=_r.prototype.toJSON.call(this,a);return null!==this.background&&(h.object.background=this.background.toJSON(a)),null!==this.fog&&(h.object.fog=this.fog.toJSON()),h},uh.prototype=Object.assign(Object.create(_r.prototype),{constructor:uh,isLensFlare:!0,copy:function(a){_r.prototype.copy.call(this,a),this.positionScreen.copy(a.positionScreen),this.customUpdateCallback=a.customUpdateCallback;for(var h=0,g=a.lensFlares.length;h<g;h++)this.lensFlares.push(a.lensFlares[h]);return this},add:function(a,h,g,y,A,T){void 0===h&&(h=-1),void 0===g&&(g=0),void 0===T&&(T=1),void 0===A&&(A=new jr(16777215)),void 0===y&&(y=ne),g=Math.min(g,Math.max(0,g)),this.lensFlares.push({texture:a,size:h,distance:g,x:0,y:0,z:0,scale:1,rotation:0,opacity:T,color:A,blending:y})},updateLensFlares:function(){var a,g,h=this.lensFlares.length,y=2*-this.positionScreen.x,A=2*-this.positionScreen.y;for(a=0;a<h;a++)(g=this.lensFlares[a]).x=this.positionScreen.x+y*g.distance,g.y=this.positionScreen.y+A*g.distance,g.wantedRotation=g.x*Math.PI*.25,g.rotation+=.25*(g.wantedRotation-g.rotation)}}),(Fu.prototype=Object.create(Ks.prototype)).constructor=Fu,Fu.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.rotation=a.rotation,this},gu.prototype=Object.assign(Object.create(_r.prototype),{constructor:gu,isSprite:!0,raycast:function(){var a=new Zt;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var A=g.ray.distanceSqToPoint(a);A>this.scale.x*this.scale.y/4||y.push({distance:Math.sqrt(A),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),sa.prototype=Object.assign(Object.create(_r.prototype),{constructor:sa,copy:function(a){_r.prototype.copy.call(this,a,!1);for(var h=a.levels,g=0,y=h.length;g<y;g++){var A=h[g];this.addLevel(A.object.clone(),A.distance)}return this},addLevel:function(a,h){void 0===h&&(h=0),h=Math.abs(h);for(var g=this.levels,y=0;y<g.length&&!(h<g[y].distance);y++);g.splice(y,0,{distance:h,object:a}),this.add(a)},getObjectForDistance:function(a){for(var h=this.levels,g=1,y=h.length;g<y&&!(a<h[g].distance);g++);return h[g-1].object},raycast:function(){var a=new Zt;return function(g,y){a.setFromMatrixPosition(this.matrixWorld);var A=g.ray.origin.distanceTo(a);this.getObjectForDistance(A).raycast(g,y)}}(),update:function(){var a=new Zt,h=new Zt;return function(y){var A=this.levels;if(A.length>1){a.setFromMatrixPosition(y.matrixWorld),h.setFromMatrixPosition(this.matrixWorld);var T=a.distanceTo(h);A[0].object.visible=!0;for(var R=1,N=A.length;R<N&&T>=A[R].distance;R++)A[R-1].object.visible=!1,A[R].object.visible=!0;for(;R<N;R++)A[R].object.visible=!1}}}(),toJSON:function(a){var h=_r.prototype.toJSON.call(this,a);h.object.levels=[];for(var g=this.levels,y=0,A=g.length;y<A;y++){var T=g[y];h.object.levels.push({object:T.object.uuid,distance:T.distance})}return h}}),Object.assign(ad.prototype,{calculateInverses:function(){this.boneInverses=[];for(var a=0,h=this.bones.length;a<h;a++){var g=new ms;this.bones[a]&&g.getInverse(this.bones[a].matrixWorld),this.boneInverses.push(g)}},pose:function(){for(var a,h=0,g=this.bones.length;h<g;h++)(a=this.bones[h])&&a.matrixWorld.getInverse(this.boneInverses[h]);for(h=0,g=this.bones.length;h<g;h++)(a=this.bones[h])&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))},update:function(){var a=new ms;return function(){for(var g=0,y=this.bones.length;g<y;g++)a.multiplyMatrices(this.bones[g]?this.bones[g].matrixWorld:this.identityMatrix,this.boneInverses[g]),a.toArray(this.boneMatrices,16*g);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new ad(this.bones,this.boneInverses,this.useVertexTexture)}}),Pm.prototype=Object.assign(Object.create(_r.prototype),{constructor:Pm,isBone:!0}),$g.prototype=Object.assign(Object.create(ba.prototype),{constructor:$g,isSkinnedMesh:!0,bind:function(a,h){this.skeleton=a,void 0===h&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),h=this.matrixWorld),this.bindMatrix.copy(h),this.bindMatrixInverse.getInverse(h)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var a=0;a<this.geometry.skinWeights.length;a++){var h=this.geometry.skinWeights[a];(g=1/h.lengthManhattan())!=1/0?h.multiplyScalar(g):h.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var y=new jo,A=this.geometry.attributes.skinWeight;for(a=0;a<A.count;a++){var g;y.x=A.getX(a),y.y=A.getY(a),y.z=A.getZ(a),y.w=A.getW(a),(g=1/y.lengthManhattan())!=1/0?y.multiplyScalar(g):y.set(1,0,0,0),A.setXYZW(a,y.x,y.y,y.z,y.w)}}},updateMatrixWorld:function(a){ba.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),(al.prototype=Object.create(Ks.prototype)).constructor=al,al.prototype.isLineBasicMaterial=!0,al.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this},mu.prototype=Object.assign(Object.create(_r.prototype),{constructor:mu,isLine:!0,raycast:function(){var a=new ms,h=new ia,g=new wt;return function(A,T){var R=A.linePrecision,N=R*R,ie=this.geometry,ee=this.matrixWorld;if(null===ie.boundingSphere&&ie.computeBoundingSphere(),g.copy(ie.boundingSphere),g.applyMatrix4(ee),!1!==A.ray.intersectsSphere(g)){a.getInverse(ee),h.copy(A.ray).applyMatrix4(a);var fe=new Zt,me=new Zt,Le=new Zt,ke=new Zt,Fe=this&&this.isLineSegments?2:1;if(ie.isBufferGeometry){var nt=ie.index,Ke=ie.attributes.position.array;if(null!==nt)for(var pt=nt.array,vt=0,Xt=pt.length-1;vt<Xt;vt+=Fe){var cn=pt[vt+1];fe.fromArray(Ke,3*pt[vt]),me.fromArray(Ke,3*cn),h.distanceSqToSegment(fe,me,ke,Le)>N||(ke.applyMatrix4(this.matrixWorld),(en=A.ray.origin.distanceTo(ke))<A.near||en>A.far||T.push({distance:en,point:Le.clone().applyMatrix4(this.matrixWorld),index:vt,face:null,faceIndex:null,object:this}))}else for(vt=0,Xt=Ke.length/3-1;vt<Xt;vt+=Fe)fe.fromArray(Ke,3*vt),me.fromArray(Ke,3*vt+3),h.distanceSqToSegment(fe,me,ke,Le)>N||(ke.applyMatrix4(this.matrixWorld),(en=A.ray.origin.distanceTo(ke))<A.near||en>A.far||T.push({distance:en,point:Le.clone().applyMatrix4(this.matrixWorld),index:vt,face:null,faceIndex:null,object:this}))}else if(ie.isGeometry){var hn=ie.vertices,On=hn.length;for(vt=0;vt<On-1;vt+=Fe){var en;h.distanceSqToSegment(hn[vt],hn[vt+1],ke,Le)>N||(ke.applyMatrix4(this.matrixWorld),(en=A.ray.origin.distanceTo(ke))<A.near||en>A.far||T.push({distance:en,point:Le.clone().applyMatrix4(this.matrixWorld),index:vt,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),vo.prototype=Object.assign(Object.create(mu.prototype),{constructor:vo,isLineSegments:!0}),(Pc.prototype=Object.create(Ks.prototype)).constructor=Pc,Pc.prototype.isPointsMaterial=!0,Pc.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this},js.prototype=Object.assign(Object.create(_r.prototype),{constructor:js,isPoints:!0,raycast:function(){var a=new ms,h=new ia,g=new wt;return function(A,T){var R=this,N=this.geometry,ie=this.matrixWorld,ee=A.params.Points.threshold;if(null===N.boundingSphere&&N.computeBoundingSphere(),g.copy(N.boundingSphere),g.applyMatrix4(ie),!1!==A.ray.intersectsSphere(g)){a.getInverse(ie),h.copy(A.ray).applyMatrix4(a);var fe=ee/((this.scale.x+this.scale.y+this.scale.z)/3),me=fe*fe,Le=new Zt;if(N.isBufferGeometry){var Fe=N.index,tt=N.attributes.position.array;if(null!==Fe)for(var Ke=Fe.array,pt=0,vt=Ke.length;pt<vt;pt++){var Xt=Ke[pt];Le.fromArray(tt,3*Xt),ke(Le,Xt)}else{pt=0;for(var Bt=tt.length/3;pt<Bt;pt++)Le.fromArray(tt,3*pt),ke(Le,pt)}}else{var cn=N.vertices;for(pt=0,Bt=cn.length;pt<Bt;pt++)ke(cn[pt],pt)}}function ke(sn,en){var hn=h.distanceSqToPoint(sn);if(hn<me){var On=h.closestPointToPoint(sn);On.applyMatrix4(ie);var Ai=A.ray.origin.distanceTo(On);if(Ai<A.near||Ai>A.far)return;T.push({distance:Ai,distanceToRay:Math.sqrt(hn),point:On.clone(),index:en,face:null,object:R})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ap.prototype=Object.assign(Object.create(_r.prototype),{constructor:ap}),(lp.prototype=Object.create(Wo.prototype)).constructor=lp,(Rc.prototype=Object.create(Wo.prototype)).constructor=Rc,Rc.prototype.isCompressedTexture=!0,(cp.prototype=Object.create(Wo.prototype)).constructor=cp,(qg.prototype=Object.create(Wo.prototype)).constructor=qg,qg.prototype.isDepthTexture=!0,(hh.prototype=Object.create(Er.prototype)).constructor=hh,(Hd.prototype=Object.create(Er.prototype)).constructor=Hd,(Gd.prototype=Object.create(Ts.prototype)).constructor=Gd,(Ql.prototype=Object.create(Er.prototype)).constructor=Ql,(ll.prototype=Object.create(Ql.prototype)).constructor=ll,(Nh.prototype=Object.create(Ts.prototype)).constructor=Nh,(Qc.prototype=Object.create(Ql.prototype)).constructor=Qc,(ld.prototype=Object.create(Ts.prototype)).constructor=ld,(Wd.prototype=Object.create(Ql.prototype)).constructor=Wd,(up.prototype=Object.create(Ts.prototype)).constructor=up,(dh.prototype=Object.create(Ql.prototype)).constructor=dh,(Yp.prototype=Object.create(Ts.prototype)).constructor=Yp,(zo.prototype=Object.create(Ts.prototype)).constructor=zo,(jd.prototype=Object.create(Er.prototype)).constructor=jd,(Bh.prototype=Object.create(Ts.prototype)).constructor=Bh,(Za.prototype=Object.create(Er.prototype)).constructor=Za,(cd.prototype=Object.create(Ts.prototype)).constructor=cd,(Nu.prototype=Object.create(Er.prototype)).constructor=Nu,(zh.prototype=Object.create(Ts.prototype)).constructor=zh;var Da={area:function(a){for(var h=a.length,g=0,y=h-1,A=0;A<h;y=A++)g+=a[y].x*a[A].y-a[A].x*a[y].y;return.5*g},triangulate:function(){function a(h,g,y,A,T,R){var N,ie,ee,fe,me,Le,ke,Fe,nt,tt,Ke,pt,vt,Xt,Bt;if(((fe=h[R[y]].x)-(ie=h[R[g]].x))*((ke=h[R[A]].y)-(ee=h[R[g]].y))-((me=h[R[y]].y)-ee)*((Le=h[R[A]].x)-ie)<=0)return!1;for(tt=Le-fe,Ke=ke-me,pt=ie-Le,vt=ee-ke,Xt=fe-ie,Bt=me-ee,N=0;N<T;N++)if(nt=h[R[N]].y,!((Fe=h[R[N]].x)===ie&&nt===ee||Fe===fe&&nt===me||Fe===Le&&nt===ke)&&tt*(nt-me)-Ke*(Fe-fe)>=-Number.EPSILON&&pt*(nt-ke)-vt*(Fe-Le)>=-Number.EPSILON&&Xt*(nt-ee)-Bt*(Fe-ie)>=-Number.EPSILON)return!1;return!0}return function(g,y){var A=g.length;if(A<3)return null;var ie,ee,fe,T=[],R=[],N=[];if(Da.area(g)>0)for(ee=0;ee<A;ee++)R[ee]=ee;else for(ee=0;ee<A;ee++)R[ee]=A-1-ee;var me=A,Le=2*me;for(ee=me-1;me>2;){if(Le--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),y?N:T;if(me<=(ie=ee)&&(ie=0),me<=(ee=ie+1)&&(ee=0),me<=(fe=ee+1)&&(fe=0),a(g,ie,ee,fe,me,R)){var tt,Ke;for(T.push([g[R[ie]],g[R[ee]],g[R[fe]]]),N.push([R[ie],R[ee],R[fe]]),tt=ee,Ke=ee+1;Ke<me;tt++,Ke++)R[tt]=R[Ke];Le=2*--me}}return y?N:T}}(),triangulateShape:function(a,h){function g(vt){var Xt=vt.length;Xt>2&&vt[Xt-1].equals(vt[0])&&vt.pop()}function y(vt,Xt,Bt){return vt.x!==Xt.x?vt.x<Xt.x?vt.x<=Bt.x&&Bt.x<=Xt.x:Xt.x<=Bt.x&&Bt.x<=vt.x:vt.y<Xt.y?vt.y<=Bt.y&&Bt.y<=Xt.y:Xt.y<=Bt.y&&Bt.y<=vt.y}function A(vt,Xt,Bt,cn,sn){var en=Xt.x-vt.x,hn=Xt.y-vt.y,On=cn.x-Bt.x,Ai=cn.y-Bt.y,ui=vt.x-Bt.x,jt=vt.y-Bt.y,qt=hn*On-en*Ai,Wn=hn*ui-en*jt;if(Math.abs(qt)>Number.EPSILON){var ei;if(qt>0){if(Wn<0||Wn>qt)return[];if((ei=Ai*ui-On*jt)<0||ei>qt)return[]}else{if(Wn>0||Wn<qt)return[];if((ei=Ai*ui-On*jt)>0||ei<qt)return[]}if(0===ei)return!sn||0!==Wn&&Wn!==qt?[vt]:[];if(ei===qt)return!sn||0!==Wn&&Wn!==qt?[Xt]:[];if(0===Wn)return[Bt];if(Wn===qt)return[cn];var Ii=ei/qt;return[{x:vt.x+Ii*en,y:vt.y+Ii*hn}]}if(0!==Wn||Ai*ui!=On*jt)return[];var nr,zi,qn,Hn,f,c,d,m,_i=0===en&&0===hn,fi=0===On&&0===Ai;return _i&&fi?vt.x!==Bt.x||vt.y!==Bt.y?[]:[vt]:_i?y(Bt,cn,vt)?[vt]:[]:fi?y(vt,Xt,Bt)?[Bt]:[]:(0!==en?(vt.x<Xt.x?(nr=vt,qn=vt.x,zi=Xt,Hn=Xt.x):(nr=Xt,qn=Xt.x,zi=vt,Hn=vt.x),Bt.x<cn.x?(f=Bt,d=Bt.x,c=cn,m=cn.x):(f=cn,d=cn.x,c=Bt,m=Bt.x)):(vt.y<Xt.y?(nr=vt,qn=vt.y,zi=Xt,Hn=Xt.y):(nr=Xt,qn=Xt.y,zi=vt,Hn=vt.y),Bt.y<cn.y?(f=Bt,d=Bt.y,c=cn,m=cn.y):(f=cn,d=cn.y,c=Bt,m=Bt.y)),qn<=d?Hn<d?[]:Hn===d?sn?[]:[f]:Hn<=m?[f,zi]:[f,c]:qn>m?[]:qn===m?sn?[]:[nr]:Hn<=m?[nr,zi]:[nr,c])}function T(vt,Xt,Bt,cn){var sn=Xt.x-vt.x,en=Xt.y-vt.y,hn=Bt.x-vt.x,On=Bt.y-vt.y,Ai=cn.x-vt.x,ui=cn.y-vt.y,jt=sn*On-en*hn,qt=sn*ui-en*Ai;if(Math.abs(jt)>Number.EPSILON){var Wn=Ai*On-ui*hn;return jt>0?qt>=0&&Wn>=0:qt>=0||Wn>=0}return qt>0}g(a),h.forEach(g);for(var N,ie,ee,fe,me,Le,ke={},Fe=a.concat(),nt=0,tt=h.length;nt<tt;nt++)Array.prototype.push.apply(Fe,h[nt]);for(N=0,ie=Fe.length;N<ie;N++)void 0!==ke[me=Fe[N].x+":"+Fe[N].y]&&console.warn("THREE.ShapeUtils: Duplicate point",me,N),ke[me]=N;var Ke=function R(vt,Xt){var cn,Bt=vt.concat();function sn(m,_){var b=Bt.length-1,w=m-1;w<0&&(w=b);var E=m+1;E>b&&(E=0);var k=T(Bt[m],Bt[w],Bt[E],cn[_]);if(!k)return!1;var L=cn.length-1,G=_-1;G<0&&(G=L);var K=_+1;return K>L&&(K=0),!!(k=T(cn[_],cn[G],cn[K],Bt[m]))}function en(m,_){var b,w;for(b=0;b<Bt.length;b++)if(w=b+1,A(m,_,Bt[b],Bt[w%=Bt.length],!0).length>0)return!0;return!1}var hn=[];function On(m,_){var b,w,E,k;for(b=0;b<hn.length;b++)for(w=Xt[hn[b]],E=0;E<w.length;E++)if(k=E+1,A(m,_,w[E],w[k%=w.length],!0).length>0)return!0;return!1}for(var Ai,ui,jt,qt,Wn,ei,_i,fi,nr,zi,Ii=[],qn=0,Hn=Xt.length;qn<Hn;qn++)hn.push(qn);for(var f=0,c=2*hn.length;hn.length>0;){if(--c<0){console.log("Infinite Loop! Holes left:"+hn.length+", Probably Hole outside Shape!");break}for(ui=f;ui<Bt.length;ui++){for(jt=Bt[ui],Ai=-1,qn=0;qn<hn.length;qn++)if(void 0===Ii[ei=jt.x+":"+jt.y+":"+(Wn=hn[qn])]){cn=Xt[Wn];for(var d=0;d<cn.length;d++)if(qt=cn[d],sn(ui,d)&&!en(jt,qt)&&!On(jt,qt)){Ai=d,hn.splice(qn,1),_i=Bt.slice(0,ui+1),fi=Bt.slice(ui),nr=cn.slice(Ai),zi=cn.slice(0,Ai+1),Bt=_i.concat(nr).concat(zi).concat(fi),f=ui;break}if(Ai>=0)break;Ii[ei]=!0}if(Ai>=0)break}}return Bt}(a,h),pt=Da.triangulate(Ke,!1);for(N=0,ie=pt.length;N<ie;N++)for(fe=pt[N],ee=0;ee<3;ee++)void 0!==(Le=ke[me=fe[ee].x+":"+fe[ee].y])&&(fe[ee]=Le);return pt.concat()},isClockWise:function(a){return Da.area(a)<0},b2:function(A,T,R,N){return function a(y,A){var T=1-y;return T*T*A}(A,T)+function h(y,A){return 2*(1-y)*y*A}(A,R)+function g(y,A){return y*y*A}(A,N)},b3:function(T,R,N,ie,ee){return function a(A,T){var R=1-A;return R*R*R*T}(T,R)+function h(A,T){var R=1-A;return 3*R*R*A*T}(T,N)+function g(A,T){return 3*(1-A)*A*A*T}(T,ie)+function y(A,T){return A*A*A*T}(T,ee)}};function Jc(a,h){typeof a>"u"?a=[]:(Ts.call(this),this.type="ExtrudeGeometry",a=Array.isArray(a)?a:[a],this.addShapeList(a,h),this.computeFaceNormals())}function ud(a,h){var g=(h=h||{}).font;if(!1===(g&&g.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ts;var y=g.generateShapes(a,h.size,h.curveSegments);h.amount=void 0!==h.height?h.height:50,void 0===h.bevelThickness&&(h.bevelThickness=10),void 0===h.bevelSize&&(h.bevelSize=8),void 0===h.bevelEnabled&&(h.bevelEnabled=!1),Jc.call(this,y,h),this.type="TextGeometry"}function oa(a,h,g,y,A,T,R){Er.call(this),this.type="SphereBufferGeometry",this.parameters={radius:a,widthSegments:h,heightSegments:g,phiStart:y,phiLength:A,thetaStart:T,thetaLength:R},a=a||50,h=Math.max(3,Math.floor(h)||8),g=Math.max(2,Math.floor(g)||6),y=void 0!==y?y:0,A=void 0!==A?A:2*Math.PI;for(var N=(T=void 0!==T?T:0)+(R=void 0!==R?R:Math.PI),ie=(h+1)*(g+1),ee=new fr(new Float32Array(3*ie),3),fe=new fr(new Float32Array(3*ie),3),me=new fr(new Float32Array(2*ie),2),Le=0,ke=[],Fe=new Zt,nt=0;nt<=g;nt++){for(var tt=[],Ke=nt/g,pt=0;pt<=h;pt++){var vt=pt/h,Xt=-a*Math.cos(y+vt*A)*Math.sin(T+Ke*R),Bt=a*Math.cos(T+Ke*R),cn=a*Math.sin(y+vt*A)*Math.sin(T+Ke*R);Fe.set(Xt,Bt,cn).normalize(),ee.setXYZ(Le,Xt,Bt,cn),fe.setXYZ(Le,Fe.x,Fe.y,Fe.z),me.setXY(Le,vt,1-Ke),tt.push(Le),Le++}ke.push(tt)}var sn=[];for(nt=0;nt<g;nt++)for(pt=0;pt<h;pt++){var hn=ke[nt][pt],On=ke[nt+1][pt],Ai=ke[nt+1][pt+1];(0!==nt||T>0)&&sn.push(ke[nt][pt+1],hn,Ai),(nt!==g-1||N<Math.PI)&&sn.push(hn,On,Ai)}this.setIndex(new(ee.count>65535?Ou:Nd)(sn,1)),this.addAttribute("position",ee),this.addAttribute("normal",fe),this.addAttribute("uv",me),this.boundingSphere=new wt(new Zt,a)}function Vo(a,h,g,y,A,T,R){Ts.call(this),this.type="SphereGeometry",this.parameters={radius:a,widthSegments:h,heightSegments:g,phiStart:y,phiLength:A,thetaStart:T,thetaLength:R},this.fromBufferGeometry(new oa(a,h,g,y,A,T,R))}function Os(a,h,g,y,A,T){Er.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:a,outerRadius:h,thetaSegments:g,phiSegments:y,thetaStart:A,thetaLength:T},a=a||20,h=h||50,A=void 0!==A?A:0,T=void 0!==T?T:2*Math.PI;var Fe,vt,Xt,R=((g=void 0!==g?Math.max(3,g):8)+1)*((y=void 0!==y?Math.max(1,y):1)+1),N=g*y*2*3,ie=new fr(new(N>65535?Uint32Array:Uint16Array)(N),1),ee=new fr(new Float32Array(3*R),3),fe=new fr(new Float32Array(3*R),3),me=new fr(new Float32Array(2*R),2),Le=0,ke=0,nt=a,tt=(h-a)/y,Ke=new Zt,pt=new Xi;for(vt=0;vt<=y;vt++){for(Xt=0;Xt<=g;Xt++)Fe=A+Xt/g*T,Ke.x=nt*Math.cos(Fe),Ke.y=nt*Math.sin(Fe),ee.setXYZ(Le,Ke.x,Ke.y,Ke.z),fe.setXYZ(Le,0,0,1),pt.x=(Ke.x/h+1)/2,pt.y=(Ke.y/h+1)/2,me.setXY(Le,pt.x,pt.y),Le++;nt+=tt}for(vt=0;vt<y;vt++){var Bt=vt*(g+1);for(Xt=0;Xt<g;Xt++){var cn=Fe=Xt+Bt,sn=Fe+g+1,en=Fe+g+2,hn=Fe+1;ie.setX(ke,cn),ke++,ie.setX(ke,sn),ke++,ie.setX(ke,en),ke++,ie.setX(ke,cn),ke++,ie.setX(ke,en),ke++,ie.setX(ke,hn),ke++}}this.setIndex(ie),this.addAttribute("position",ee),this.addAttribute("normal",fe),this.addAttribute("uv",me)}function Qi(a,h,g,y,A,T){Ts.call(this),this.type="RingGeometry",this.parameters={innerRadius:a,outerRadius:h,thetaSegments:g,phiSegments:y,thetaStart:A,thetaLength:T},this.fromBufferGeometry(new Os(a,h,g,y,A,T))}function Rm(a,h,g,y){Ts.call(this),this.type="PlaneGeometry",this.parameters={width:a,height:h,widthSegments:g,heightSegments:y},this.fromBufferGeometry(new ra(a,h,g,y))}function yo(a,h,g,y){Er.call(this),this.type="LatheBufferGeometry",this.parameters={points:a,segments:h,phiStart:g,phiLength:y},h=Math.floor(h)||12,g=g||0,y=y||2*Math.PI,y=xs.clamp(y,0,2*Math.PI);var me,nt,tt,A=(h+1)*a.length,T=h*a.length*2*3,R=new fr(new(T>65535?Uint32Array:Uint16Array)(T),1),N=new fr(new Float32Array(3*A),3),ie=new fr(new Float32Array(2*A),2),ee=0,fe=0,Le=1/h,ke=new Zt,Fe=new Xi;for(nt=0;nt<=h;nt++){var Ke=g+nt*Le*y,pt=Math.sin(Ke),vt=Math.cos(Ke);for(tt=0;tt<=a.length-1;tt++)ke.x=a[tt].x*pt,ke.y=a[tt].y,ke.z=a[tt].x*vt,N.setXYZ(ee,ke.x,ke.y,ke.z),Fe.x=nt/h,Fe.y=tt/(a.length-1),ie.setXY(ee,Fe.x,Fe.y),ee++}for(nt=0;nt<h;nt++)for(tt=0;tt<a.length-1;tt++){var Bt=(me=tt+nt*a.length)+a.length,cn=me+a.length+1,sn=me+1;R.setX(fe,me),fe++,R.setX(fe,Bt),fe++,R.setX(fe,sn),fe++,R.setX(fe,Bt),fe++,R.setX(fe,cn),fe++,R.setX(fe,sn),fe++}if(this.setIndex(R),this.addAttribute("position",N),this.addAttribute("uv",ie),this.computeVertexNormals(),y===2*Math.PI){var en=this.attributes.normal.array,hn=new Zt,On=new Zt,Ai=new Zt;for(me=h*a.length*3,nt=0,tt=0;nt<a.length;nt++,tt+=3)hn.x=en[tt+0],hn.y=en[tt+1],hn.z=en[tt+2],On.x=en[me+tt+0],On.y=en[me+tt+1],On.z=en[me+tt+2],Ai.addVectors(hn,On).normalize(),en[tt+0]=en[me+tt+0]=Ai.x,en[tt+1]=en[me+tt+1]=Ai.y,en[tt+2]=en[me+tt+2]=Ai.z}}function If(a,h,g,y){Ts.call(this),this.type="LatheGeometry",this.parameters={points:a,segments:h,phiStart:g,phiLength:y},this.fromBufferGeometry(new yo(a,h,g,y)),this.mergeVertices()}function Kp(a,h){Er.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:a,curveSegments:h},h=h||12;var g=[],y=[],A=[],T=[],R=0,N=0;if(!1===Array.isArray(a))ee(a);else for(var ie=0;ie<a.length;ie++)ee(a[ie]),this.addGroup(R,N,ie),R+=N,N=0;function ee(fe){var me,Le,ke,Fe=g.length/3,nt=fe.extractPoints(h),tt=nt.shape,Ke=nt.holes;if(!1===Da.isClockWise(tt))for(tt=tt.reverse(),me=0,Le=Ke.length;me<Le;me++)!0===Da.isClockWise(ke=Ke[me])&&(Ke[me]=ke.reverse());var pt=Da.triangulateShape(tt,Ke);for(me=0,Le=Ke.length;me<Le;me++)tt=tt.concat(ke=Ke[me]);for(me=0,Le=tt.length;me<Le;me++){var vt=tt[me];g.push(vt.x,vt.y,0),y.push(0,0,1),A.push(vt.x,vt.y)}for(me=0,Le=pt.length;me<Le;me++){var Xt=pt[me];T.push(Xt[0]+Fe,Xt[1]+Fe,Xt[2]+Fe),N+=3}}this.setIndex(new(T.length>65535?Ou:Nd)(T,1)),this.addAttribute("position",new rs(g,3)),this.addAttribute("normal",new rs(y,3)),this.addAttribute("uv",new rs(A,2))}function Zp(a,h){Ts.call(this),this.type="ShapeGeometry","object"==typeof h&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),h=h.curveSegments),this.parameters={shapes:a,curveSegments:h},this.fromBufferGeometry(new Kp(a,h)),this.mergeVertices()}function vl(a,h){Er.call(this),h=void 0!==h?h:1;var g=Math.cos(xs.DEG2RAD*h),y=[0,0],A={};function T(pt,vt){return pt-vt}var N,R=["a","b","c"];a.isBufferGeometry?(N=new Ts).fromBufferGeometry(a):N=a.clone(),N.mergeVertices(),N.computeFaceNormals();for(var ie=N.vertices,ee=N.faces,fe=0,me=ee.length;fe<me;fe++)for(var Le=ee[fe],ke=0;ke<3;ke++)y[0]=Le[R[ke]],y[1]=Le[R[(ke+1)%3]],y.sort(T),void 0===A[Fe=y.toString()]?A[Fe]={vert1:y[0],vert2:y[1],face1:fe,face2:void 0}:A[Fe].face2=fe;var nt=[];for(var Fe in A){var tt=A[Fe];if(void 0===tt.face2||ee[tt.face1].normal.dot(ee[tt.face2].normal)<=g){var Ke=ie[tt.vert1];nt.push(Ke.x),nt.push(Ke.y),nt.push(Ke.z),nt.push((Ke=ie[tt.vert2]).x),nt.push(Ke.y),nt.push(Ke.z)}}this.addAttribute("position",new rs(nt,3))}function Sf(a,h,g,y,A,T,R,N){Er.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:a,radiusBottom:h,height:g,radialSegments:y,heightSegments:A,openEnded:T,thetaStart:R,thetaLength:N};var ie=this;a=void 0!==a?a:20,h=void 0!==h?h:20,g=void 0!==g?g:100,y=Math.floor(y)||8,A=Math.floor(A)||1,T=void 0!==T&&T,R=void 0!==R?R:0,N=void 0!==N?N:2*Math.PI;var ee=0;!1===T&&(a>0&&ee++,h>0&&ee++);var fe=function Bt(){var hn=(y+1)*(A+1);return!1===T&&(hn+=(y+1)*ee+y*ee),hn}(),me=function cn(){var hn=y*A*2*3;return!1===T&&(hn+=y*ee*3),hn}(),Le=new fr(new(me>65535?Uint32Array:Uint16Array)(me),1),ke=new fr(new Float32Array(3*fe),3),Fe=new fr(new Float32Array(3*fe),3),nt=new fr(new Float32Array(2*fe),2),tt=0,Ke=0,pt=[],vt=g/2,Xt=0;function en(hn){var On,Ai,ui,jt=new Xi,qt=new Zt,Wn=0,ei=!0===hn?a:h,Ii=!0===hn?1:-1;for(Ai=tt,On=1;On<=y;On++)ke.setXYZ(tt,0,vt*Ii,0),Fe.setXYZ(tt,0,Ii,0),jt.x=.5,jt.y=.5,nt.setXY(tt,jt.x,jt.y),tt++;for(ui=tt,On=0;On<=y;On++){var fi=On/y*N+R,nr=Math.cos(fi),zi=Math.sin(fi);qt.x=ei*zi,qt.y=vt*Ii,qt.z=ei*nr,ke.setXYZ(tt,qt.x,qt.y,qt.z),Fe.setXYZ(tt,0,Ii,0),jt.x=.5*nr+.5,jt.y=.5*zi*Ii+.5,nt.setXY(tt,jt.x,jt.y),tt++}for(On=0;On<y;On++){var qn=Ai+On,Hn=ui+On;!0===hn?(Le.setX(Ke,Hn),Ke++,Le.setX(Ke,Hn+1),Ke++,Le.setX(Ke,qn),Ke++):(Le.setX(Ke,Hn+1),Ke++,Le.setX(Ke,Hn),Ke++,Le.setX(Ke,qn),Ke++),Wn+=3}ie.addGroup(Xt,Wn,!0===hn?1:2),Xt+=Wn}(function sn(){var hn,On,Ai=new Zt,ui=new Zt,jt=0,qt=(h-a)/g;for(On=0;On<=A;On++){var Wn=[],ei=On/A,Ii=ei*(h-a)+a;for(hn=0;hn<=y;hn++){var _i=hn/y,fi=_i*N+R,nr=Math.sin(fi),zi=Math.cos(fi);ui.x=Ii*nr,ui.y=-ei*g+vt,ui.z=Ii*zi,ke.setXYZ(tt,ui.x,ui.y,ui.z),Ai.set(nr,qt,zi).normalize(),Fe.setXYZ(tt,Ai.x,Ai.y,Ai.z),nt.setXY(tt,_i,1-ei),Wn.push(tt),tt++}pt.push(Wn)}for(hn=0;hn<y;hn++)for(On=0;On<A;On++){var Hn=pt[On+1][hn],f=pt[On+1][hn+1],c=pt[On][hn+1];Le.setX(Ke,pt[On][hn]),Ke++,Le.setX(Ke,Hn),Ke++,Le.setX(Ke,c),Ke++,Le.setX(Ke,Hn),Ke++,Le.setX(Ke,f),Ke++,Le.setX(Ke,c),Ke++,jt+=6}ie.addGroup(Xt,jt,0),Xt+=jt})(),!1===T&&(a>0&&en(!0),h>0&&en(!1)),this.setIndex(Le),this.addAttribute("position",ke),this.addAttribute("normal",Fe),this.addAttribute("uv",nt)}function Jl(a,h,g,y,A,T,R,N){Ts.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:a,radiusBottom:h,height:g,radialSegments:y,heightSegments:A,openEnded:T,thetaStart:R,thetaLength:N},this.fromBufferGeometry(new Sf(a,h,g,y,A,T,R,N)),this.mergeVertices()}function Qp(a,h,g,y,A,T,R){Jl.call(this,0,a,h,g,y,A,T,R),this.type="ConeGeometry",this.parameters={radius:a,height:h,radialSegments:g,heightSegments:y,openEnded:A,thetaStart:T,thetaLength:R}}function Jp(a,h,g,y,A,T,R){Sf.call(this,0,a,h,g,y,A,T,R),this.type="ConeBufferGeometry",this.parameters={radius:a,height:h,radialSegments:g,heightSegments:y,openEnded:A,thetaStart:T,thetaLength:R}}function La(a,h,g,y){Er.call(this),this.type="CircleBufferGeometry",this.parameters={radius:a,segments:h,thetaStart:g,thetaLength:y},a=a||50,h=void 0!==h?Math.max(3,h):8,g=void 0!==g?g:0,y=void 0!==y?y:2*Math.PI;var A=h+2,T=new Float32Array(3*A),R=new Float32Array(3*A),N=new Float32Array(2*A);R[2]=1,N[0]=.5,N[1]=.5;for(var ie=0,ee=3,fe=2;ie<=h;ie++,ee+=3,fe+=2){var me=g+ie/h*y;T[ee]=a*Math.cos(me),T[ee+1]=a*Math.sin(me),R[ee+2]=1,N[fe]=(T[ee]/a+1)/2,N[fe+1]=(T[ee+1]/a+1)/2}var Le=[];for(ee=1;ee<=h;ee++)Le.push(ee,ee+1,0);this.setIndex(new fr(new Uint16Array(Le),1)),this.addAttribute("position",new fr(T,3)),this.addAttribute("normal",new fr(R,3)),this.addAttribute("uv",new fr(N,2)),this.boundingSphere=new wt(new Zt,a)}function Bl(a,h,g,y){Ts.call(this),this.type="CircleGeometry",this.parameters={radius:a,segments:h,thetaStart:g,thetaLength:y},this.fromBufferGeometry(new La(a,h,g,y))}function Al(a,h,g,y,A,T){Ts.call(this),this.type="BoxGeometry",this.parameters={width:a,height:h,depth:g,widthSegments:y,heightSegments:A,depthSegments:T},this.fromBufferGeometry(new Nl(a,h,g,y,A,T)),this.mergeVertices()}(Jc.prototype=Object.create(Ts.prototype)).constructor=Jc,Jc.prototype.addShapeList=function(a,h){for(var g=a.length,y=0;y<g;y++)this.addShape(a[y],h)},Jc.prototype.addShape=function(a,h){var fe,ke,Fe,nt,tt,g=void 0!==h.amount?h.amount:100,y=void 0!==h.bevelThickness?h.bevelThickness:6,A=void 0!==h.bevelSize?h.bevelSize:y-2,T=void 0!==h.bevelSegments?h.bevelSegments:3,R=void 0===h.bevelEnabled||h.bevelEnabled,N=void 0!==h.curveSegments?h.curveSegments:12,ie=void 0!==h.steps?h.steps:1,ee=h.extrudePath,me=!1,Le=void 0!==h.UVGenerator?h.UVGenerator:Jc.WorldUVGenerator;ee&&(fe=ee.getSpacedPoints(ie),me=!0,R=!1,ke=void 0!==h.frames?h.frames:ee.computeFrenetFrames(ie,!1),Fe=new Zt,nt=new Zt,tt=new Zt),R||(T=0,y=0,A=0);var Ke,pt,vt,Xt=this,Bt=this.vertices.length,cn=a.extractPoints(N),sn=cn.shape,en=cn.holes,hn=!Da.isClockWise(sn);if(hn){for(sn=sn.reverse(),pt=0,vt=en.length;pt<vt;pt++)Da.isClockWise(Ke=en[pt])&&(en[pt]=Ke.reverse());hn=!1}var On=Da.triangulateShape(sn,en),Ai=sn;for(pt=0,vt=en.length;pt<vt;pt++)sn=sn.concat(Ke=en[pt]);function ui(de,pe,Ie){return pe||console.error("THREE.ExtrudeGeometry: vec does not exist"),pe.clone().multiplyScalar(Ie).add(de)}var jt,qt,Wn,ei,Ii,fi,_i=sn.length,nr=On.length;function zi(de,pe,Ie){var Ne,ze,Qe=1,qe=de.x-pe.x,dt=de.y-pe.y,Lt=Ie.x-de.x,kt=Ie.y-de.y,mt=qe*qe+dt*dt;if(Math.abs(qe*kt-dt*Lt)>Number.EPSILON){var bt=Math.sqrt(mt),Ht=Math.sqrt(Lt*Lt+kt*kt),Vt=pe.x-dt/bt,et=pe.y+qe/bt,gn=((Ie.x-kt/Ht-Vt)*kt-(Ie.y+Lt/Ht-et)*Lt)/(qe*kt-dt*Lt),Kt=(Ne=Vt+qe*gn-de.x)*Ne+(ze=et+dt*gn-de.y)*ze;if(Kt<=2)return new Xi(Ne,ze);Qe=Math.sqrt(Kt/2)}else{var ln=!1;qe>Number.EPSILON?Lt>Number.EPSILON&&(ln=!0):qe<-Number.EPSILON?Lt<-Number.EPSILON&&(ln=!0):Math.sign(dt)===Math.sign(kt)&&(ln=!0),ln?(Ne=-dt,ze=qe,Qe=Math.sqrt(mt)):(Ne=qe,ze=dt,Qe=Math.sqrt(mt/2))}return new Xi(Ne/Qe,ze/Qe)}for(var qn=[],Hn=0,f=Ai.length,c=f-1,d=Hn+1;Hn<f;Hn++,c++,d++)c===f&&(c=0),d===f&&(d=0),qn[Hn]=zi(Ai[Hn],Ai[c],Ai[d]);var _,w,m=[],b=qn.concat();for(pt=0,vt=en.length;pt<vt;pt++){for(_=[],c=(f=(Ke=en[pt]).length)-1,d=1+(Hn=0);Hn<f;Hn++,c++,d++)c===f&&(c=0),d===f&&(d=0),_[Hn]=zi(Ke[Hn],Ke[c],Ke[d]);m.push(_),b=b.concat(_)}for(jt=0;jt<T;jt++){for(Wn=jt/T,ei=y*Math.cos(Wn*Math.PI/2),qt=A*Math.sin(Wn*Math.PI/2),Hn=0,f=Ai.length;Hn<f;Hn++)G((Ii=ui(Ai[Hn],qn[Hn],qt)).x,Ii.y,-ei);for(pt=0,vt=en.length;pt<vt;pt++)for(_=m[pt],Hn=0,f=(Ke=en[pt]).length;Hn<f;Hn++)G((Ii=ui(Ke[Hn],_[Hn],qt)).x,Ii.y,-ei)}for(qt=A,Hn=0;Hn<_i;Hn++)Ii=R?ui(sn[Hn],b[Hn],qt):sn[Hn],me?(nt.copy(ke.normals[0]).multiplyScalar(Ii.x),Fe.copy(ke.binormals[0]).multiplyScalar(Ii.y),tt.copy(fe[0]).add(nt).add(Fe),G(tt.x,tt.y,tt.z)):G(Ii.x,Ii.y,0);for(w=1;w<=ie;w++)for(Hn=0;Hn<_i;Hn++)Ii=R?ui(sn[Hn],b[Hn],qt):sn[Hn],me?(nt.copy(ke.normals[w]).multiplyScalar(Ii.x),Fe.copy(ke.binormals[w]).multiplyScalar(Ii.y),tt.copy(fe[w]).add(nt).add(Fe),G(tt.x,tt.y,tt.z)):G(Ii.x,Ii.y,g/ie*w);for(jt=T-1;jt>=0;jt--){for(Wn=jt/T,ei=y*Math.cos(Wn*Math.PI/2),qt=A*Math.sin(Wn*Math.PI/2),Hn=0,f=Ai.length;Hn<f;Hn++)G((Ii=ui(Ai[Hn],qn[Hn],qt)).x,Ii.y,g+ei);for(pt=0,vt=en.length;pt<vt;pt++)for(_=m[pt],Hn=0,f=(Ke=en[pt]).length;Hn<f;Hn++)Ii=ui(Ke[Hn],_[Hn],qt),me?G(Ii.x,Ii.y+fe[ie-1].y,fe[ie-1].x+ei):G(Ii.x,Ii.y,g+ei)}function L(de,pe){var Ie,Ne;for(Hn=de.length;--Hn>=0;){Ie=Hn,(Ne=Hn-1)<0&&(Ne=de.length-1);var ze=0,Qe=ie+2*T;for(ze=0;ze<Qe;ze++){var qe=_i*ze,dt=_i*(ze+1);le(pe+Ie+qe,pe+Ne+qe,pe+Ne+dt,pe+Ie+dt)}}}function G(de,pe,Ie){Xt.vertices.push(new Zt(de,pe,Ie))}function K(de,pe,Ie){Xt.faces.push(new Po(de+=Bt,pe+=Bt,Ie+=Bt,null,null,0));var Ne=Le.generateTopUV(Xt,de,pe,Ie);Xt.faceVertexUvs[0].push(Ne)}function le(de,pe,Ie,Ne,ze,Qe,qe,dt,Lt){Ie+=Bt,Xt.faces.push(new Po(de+=Bt,pe+=Bt,Ne+=Bt,null,null,1)),Xt.faces.push(new Po(pe,Ie,Ne,null,null,1));var kt=Le.generateSideWallUV(Xt,de,pe,Ie,Ne);Xt.faceVertexUvs[0].push([kt[0],kt[1],kt[3]]),Xt.faceVertexUvs[0].push([kt[1],kt[2],kt[3]])}(function E(){if(R){var de=0,pe=_i*de;for(Hn=0;Hn<nr;Hn++)K((fi=On[Hn])[2]+pe,fi[1]+pe,fi[0]+pe);for(pe=_i*(de=ie+2*T),Hn=0;Hn<nr;Hn++)K((fi=On[Hn])[0]+pe,fi[1]+pe,fi[2]+pe)}else{for(Hn=0;Hn<nr;Hn++)K((fi=On[Hn])[2],fi[1],fi[0]);for(Hn=0;Hn<nr;Hn++)K((fi=On[Hn])[0]+_i*ie,fi[1]+_i*ie,fi[2]+_i*ie)}})(),function k(){var de=0;for(L(Ai,de),de+=Ai.length,pt=0,vt=en.length;pt<vt;pt++)L(Ke=en[pt],de),de+=Ke.length}()},Jc.WorldUVGenerator={generateTopUV:function(a,h,g,y){var A=a.vertices,T=A[h],R=A[g],N=A[y];return[new Xi(T.x,T.y),new Xi(R.x,R.y),new Xi(N.x,N.y)]},generateSideWallUV:function(a,h,g,y,A){var T=a.vertices,R=T[h],N=T[g],ie=T[y],ee=T[A];return Math.abs(R.y-N.y)<.01?[new Xi(R.x,1-R.z),new Xi(N.x,1-N.z),new Xi(ie.x,1-ie.z),new Xi(ee.x,1-ee.z)]:[new Xi(R.y,1-R.z),new Xi(N.y,1-N.z),new Xi(ie.y,1-ie.z),new Xi(ee.y,1-ee.z)]}},(ud.prototype=Object.create(Jc.prototype)).constructor=ud,(oa.prototype=Object.create(Er.prototype)).constructor=oa,(Vo.prototype=Object.create(Ts.prototype)).constructor=Vo,(Os.prototype=Object.create(Er.prototype)).constructor=Os,(Qi.prototype=Object.create(Ts.prototype)).constructor=Qi,(Rm.prototype=Object.create(Ts.prototype)).constructor=Rm,(yo.prototype=Object.create(Er.prototype)).constructor=yo,(If.prototype=Object.create(Ts.prototype)).constructor=If,(Kp.prototype=Object.create(Er.prototype)).constructor=Kp,(Zp.prototype=Object.create(Ts.prototype)).constructor=Zp,(vl.prototype=Object.create(Er.prototype)).constructor=vl,(Sf.prototype=Object.create(Er.prototype)).constructor=Sf,(Jl.prototype=Object.create(Ts.prototype)).constructor=Jl,(Qp.prototype=Object.create(Jl.prototype)).constructor=Qp,(Jp.prototype=Object.create(Sf.prototype)).constructor=Jp,(La.prototype=Object.create(Er.prototype)).constructor=La,(Bl.prototype=Object.create(Ts.prototype)).constructor=Bl,(Al.prototype=Object.create(Ts.prototype)).constructor=Al;var Bu=Object.freeze({WireframeGeometry:hh,ParametricGeometry:Gd,ParametricBufferGeometry:Hd,TetrahedronGeometry:Nh,TetrahedronBufferGeometry:ll,OctahedronGeometry:ld,OctahedronBufferGeometry:Qc,IcosahedronGeometry:up,IcosahedronBufferGeometry:Wd,DodecahedronGeometry:Yp,DodecahedronBufferGeometry:dh,PolyhedronGeometry:zo,PolyhedronBufferGeometry:Ql,TubeGeometry:Bh,TubeBufferGeometry:jd,TorusKnotGeometry:cd,TorusKnotBufferGeometry:Za,TorusGeometry:zh,TorusBufferGeometry:Nu,TextGeometry:ud,SphereBufferGeometry:oa,SphereGeometry:Vo,RingGeometry:Qi,RingBufferGeometry:Os,PlaneBufferGeometry:ra,PlaneGeometry:Rm,LatheGeometry:If,LatheBufferGeometry:yo,ShapeGeometry:Zp,ShapeBufferGeometry:Kp,ExtrudeGeometry:Jc,EdgesGeometry:vl,ConeGeometry:Qp,ConeBufferGeometry:Jp,CylinderGeometry:Jl,CylinderBufferGeometry:Sf,CircleBufferGeometry:La,CircleGeometry:Bl,BoxBufferGeometry:Nl,BoxGeometry:Al});function $d(){Zc.call(this,{uniforms:il.merge([as.lights,{opacity:{value:1}}]),vertexShader:$s.shadow_vert,fragmentShader:$s.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(a){this.uniforms.opacity.value=a}}})}function Ua(a){Zc.call(this,a),this.type="RawShaderMaterial"}function vu(a){this.uuid=xs.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(a)?a:[],this.visible=!0}function zu(a){Ks.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new jr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Xi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function Vu(a){zu.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(a)}function Il(a){Ks.call(this),this.type="MeshPhongMaterial",this.color=new jr(16777215),this.specular=new jr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Xi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Je,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function Pa(a){Il.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(a)}function ec(a){Ks.call(this,a),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Xi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function hp(a){Ks.call(this),this.type="MeshLambertMaterial",this.color=new jr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Je,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(a)}function hc(a){Ks.call(this),this.type="LineDashedMaterial",this.color=new jr(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(a)}($d.prototype=Object.create(Zc.prototype)).constructor=$d,$d.prototype.isShadowMaterial=!0,(Ua.prototype=Object.create(Zc.prototype)).constructor=Ua,Ua.prototype.isRawShaderMaterial=!0,vu.prototype={constructor:vu,isMultiMaterial:!0,toJSON:function(a){for(var h={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},g=this.materials,y=0,A=g.length;y<A;y++){var T=g[y].toJSON(a);delete T.metadata,h.materials.push(T)}return h.visible=this.visible,h},clone:function(){for(var a=new this.constructor,h=0;h<this.materials.length;h++)a.materials.push(this.materials[h].clone());return a.visible=this.visible,a}},(zu.prototype=Object.create(Ks.prototype)).constructor=zu,zu.prototype.isMeshStandardMaterial=!0,zu.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(Vu.prototype=Object.create(zu.prototype)).constructor=Vu,Vu.prototype.isMeshPhysicalMaterial=!0,Vu.prototype.copy=function(a){return zu.prototype.copy.call(this,a),this.defines={PHYSICAL:""},this.reflectivity=a.reflectivity,this.clearCoat=a.clearCoat,this.clearCoatRoughness=a.clearCoatRoughness,this},(Il.prototype=Object.create(Ks.prototype)).constructor=Il,Il.prototype.isMeshPhongMaterial=!0,Il.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(Pa.prototype=Object.create(Il.prototype)).constructor=Pa,Pa.prototype.isMeshToonMaterial=!0,Pa.prototype.copy=function(a){return Il.prototype.copy.call(this,a),this.gradientMap=a.gradientMap,this},(ec.prototype=Object.create(Ks.prototype)).constructor=ec,ec.prototype.isMeshNormalMaterial=!0,ec.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(hp.prototype=Object.create(Ks.prototype)).constructor=hp,hp.prototype.isMeshLambertMaterial=!0,hp.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.skinning=a.skinning,this.morphTargets=a.morphTargets,this.morphNormals=a.morphNormals,this},(hc.prototype=Object.create(Ks.prototype)).constructor=hc,hc.prototype.isLineDashedMaterial=!0,hc.prototype.copy=function(a){return Ks.prototype.copy.call(this,a),this.color.copy(a.color),this.linewidth=a.linewidth,this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this};var Pv=Object.freeze({ShadowMaterial:$d,SpriteMaterial:Fu,RawShaderMaterial:Ua,ShaderMaterial:Zc,PointsMaterial:Pc,MultiMaterial:vu,MeshPhysicalMaterial:Vu,MeshStandardMaterial:zu,MeshPhongMaterial:Il,MeshToonMaterial:Pa,MeshNormalMaterial:ec,MeshLambertMaterial:hp,MeshDepthMaterial:mi,MeshBasicMaterial:Ba,LineDashedMaterial:hc,LineBasicMaterial:al,Material:Ks}),yu={enabled:!1,files:{},add:function(a,h){!1!==this.enabled&&(this.files[a]=h)},get:function(a){if(!1!==this.enabled)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};function Sl(a,h,g){var y=this,A=!1,T=0,R=0;this.onStart=void 0,this.onLoad=a,this.onProgress=h,this.onError=g,this.itemStart=function(N){R++,!1===A&&void 0!==y.onStart&&y.onStart(N,T,R),A=!0},this.itemEnd=function(N){T++,void 0!==y.onProgress&&y.onProgress(N,T,R),T===R&&(A=!1,void 0!==y.onLoad&&y.onLoad())},this.itemError=function(N){void 0!==y.onError&&y.onError(N)}}var dc=new Sl;function Io(a){this.manager=void 0!==a?a:dc}function km(a){this.manager=void 0!==a?a:dc,this._parser=null}Object.assign(Io.prototype,{load:function(a,h,g,y){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a);var A=this,T=yu.get(a);if(void 0!==T)return A.manager.itemStart(a),setTimeout(function(){h&&h(T),A.manager.itemEnd(a)},0),T;var N=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(N){var ie=N[1],ee=!!N[2],fe=N[3];fe=window.decodeURIComponent(fe),ee&&(fe=window.atob(fe));try{var me,Le=(this.responseType||"").toLowerCase();switch(Le){case"arraybuffer":case"blob":me=new ArrayBuffer(fe.length);for(var ke=new Uint8Array(me),Fe=0;Fe<fe.length;Fe++)ke[Fe]=fe.charCodeAt(Fe);"blob"===Le&&(me=new Blob([me],{type:ie}));break;case"document":var nt=new DOMParser;me=nt.parseFromString(fe,ie);break;case"json":me=JSON.parse(fe);break;default:me=fe}window.setTimeout(function(){h&&h(me),A.manager.itemEnd(a)},0)}catch(Ke){window.setTimeout(function(){y&&y(Ke),A.manager.itemError(a)},0)}}else{var tt=new XMLHttpRequest;tt.open("GET",a,!0),tt.addEventListener("load",function(Ke){var pt=Ke.target.response;yu.add(a,pt),200===this.status?(h&&h(pt),A.manager.itemEnd(a)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),h&&h(pt),A.manager.itemEnd(a)):(y&&y(Ke),A.manager.itemError(a))},!1),void 0!==g&&tt.addEventListener("progress",function(Ke){g(Ke)},!1),tt.addEventListener("error",function(Ke){y&&y(Ke),A.manager.itemError(a)},!1),void 0!==this.responseType&&(tt.responseType=this.responseType),void 0!==this.withCredentials&&(tt.withCredentials=this.withCredentials),tt.overrideMimeType&&tt.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),tt.send(null)}return A.manager.itemStart(a),tt},setPath:function(a){return this.path=a,this},setResponseType:function(a){return this.responseType=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setMimeType:function(a){return this.mimeType=a,this}}),Object.assign(km.prototype,{load:function(a,h,g,y){var A=this,T=[],R=new Rc;R.image=T;var N=new Io(this.manager);function ie(Le){N.load(a[Le],function(ke){var Fe=A._parser(ke,!0);T[Le]={width:Fe.width,height:Fe.height,format:Fe.format,mipmaps:Fe.mipmaps},6===(ee+=1)&&(1===Fe.mipmapCount&&(R.minFilter=Aa),R.format=Fe.format,R.needsUpdate=!0,h&&h(R))},g,y)}if(N.setPath(this.path),N.setResponseType("arraybuffer"),Array.isArray(a))for(var ee=0,fe=0,me=a.length;fe<me;++fe)ie(fe);else N.load(a,function(Le){var ke=A._parser(Le,!0);if(ke.isCubemap)for(var Fe=ke.mipmaps.length/ke.mipmapCount,nt=0;nt<Fe;nt++){T[nt]={mipmaps:[]};for(var tt=0;tt<ke.mipmapCount;tt++)T[nt].mipmaps.push(ke.mipmaps[nt*ke.mipmapCount+tt]),T[nt].format=ke.format,T[nt].width=ke.width,T[nt].height=ke.height}else R.image.width=ke.width,R.image.height=ke.height,R.mipmaps=ke.mipmaps;1===ke.mipmapCount&&(R.minFilter=Aa),R.format=ke.format,R.needsUpdate=!0,h&&h(R)},g,y);return R},setPath:function(a){return this.path=a,this}});var tc=zl;function zl(a){this.manager=void 0!==a?a:dc,this._parser=null}function Xg(a){this.manager=void 0!==a?a:dc}function Om(a){this.manager=void 0!==a?a:dc}function Vh(a){this.manager=void 0!==a?a:dc}function Js(a,h){_r.call(this),this.type="Light",this.color=new jr(a),this.intensity=void 0!==h?h:1,this.receiveShadow=void 0}function fc(a,h,g){Js.call(this,a,g),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(_r.DefaultUp),this.updateMatrix(),this.groundColor=new jr(h)}function fh(a){this.camera=a,this.bias=0,this.radius=1,this.mapSize=new Xi(512,512),this.map=null,this.matrix=new ms}function dp(){fh.call(this,new wl(50,1,.5,500))}function Uh(a,h,g,y,A,T){Js.call(this,a,h),this.type="SpotLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.target=new _r,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(R){this.intensity=R/Math.PI}}),this.distance=void 0!==g?g:0,this.angle=void 0!==y?y:Math.PI/3,this.penumbra=void 0!==A?A:0,this.decay=void 0!==T?T:1,this.shadow=new dp}function _u(a,h,g,y){Js.call(this,a,h),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(A){this.intensity=A/(4*Math.PI)}}),this.distance=void 0!==g?g:0,this.decay=void 0!==y?y:1,this.shadow=new fh(new wl(90,1,.5,500))}function Ef(a){fh.call(this,new Bd(-5,5,5,-5,.5,500))}function Tf(a,h){Js.call(this,a,h),this.type="DirectionalLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.target=new _r,this.shadow=new Ef}function Yg(a,h){Js.call(this,a,h),this.type="AmbientLight",this.castShadow=void 0}Object.assign(zl.prototype,{load:function(a,h,g,y){var A=this,T=new es,R=new Io(this.manager);return R.setResponseType("arraybuffer"),R.load(a,function(N){var ie=A._parser(N);!ie||(void 0!==ie.image?T.image=ie.image:void 0!==ie.data&&(T.image.width=ie.width,T.image.height=ie.height,T.image.data=ie.data),T.wrapS=void 0!==ie.wrapS?ie.wrapS:lc,T.wrapT=void 0!==ie.wrapT?ie.wrapT:lc,T.magFilter=void 0!==ie.magFilter?ie.magFilter:Aa,T.minFilter=void 0!==ie.minFilter?ie.minFilter:Pu,T.anisotropy=void 0!==ie.anisotropy?ie.anisotropy:1,void 0!==ie.format&&(T.format=ie.format),void 0!==ie.type&&(T.type=ie.type),void 0!==ie.mipmaps&&(T.mipmaps=ie.mipmaps),1===ie.mipmapCount&&(T.minFilter=Aa),T.needsUpdate=!0,h&&h(T,ie))},g,y),T}}),Object.assign(Xg.prototype,{load:function(a,h,g,y){var A=this,T=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(T.onload=function(){T.onload=null,URL.revokeObjectURL(T.src),h&&h(T),A.manager.itemEnd(a)},T.onerror=y,0===a.indexOf("data:"))T.src=a;else if(void 0!==this.crossOrigin)T.crossOrigin=this.crossOrigin,T.src=a;else{var R=new Io;R.setPath(this.path),R.setResponseType("blob"),R.setWithCredentials(this.withCredentials),R.load(a,function(N){T.src=URL.createObjectURL(N)},g,y)}return A.manager.itemStart(a),T},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Om.prototype,{load:function(a,h,g,y){var A=new Rd,T=new Xg(this.manager);T.setCrossOrigin(this.crossOrigin),T.setPath(this.path);var R=0;function N(ee){T.load(a[ee],function(fe){A.images[ee]=fe,6==++R&&(A.needsUpdate=!0,h&&h(A))},void 0,y)}for(var ie=0;ie<a.length;++ie)N(ie);return A},setCrossOrigin:function(a){return this.crossOrigin=a,this},setPath:function(a){return this.path=a,this}}),Object.assign(Vh.prototype,{load:function(a,h,g,y){var A=new Wo,T=new Xg(this.manager);return T.setCrossOrigin(this.crossOrigin),T.setWithCredentials(this.withCredentials),T.setPath(this.path),T.load(a,function(R){var N=a.search(/\.(jpg|jpeg)$/)>0||0===a.search(/^data\:image\/jpeg/);A.format=N?wc:nl,A.image=R,A.needsUpdate=!0,void 0!==h&&h(A)},g,y),A},setCrossOrigin:function(a){return this.crossOrigin=a,this},setWithCredentials:function(a){return this.withCredentials=a,this},setPath:function(a){return this.path=a,this}}),Js.prototype=Object.assign(Object.create(_r.prototype),{constructor:Js,isLight:!0,copy:function(a){return _r.prototype.copy.call(this,a),this.color.copy(a.color),this.intensity=a.intensity,this},toJSON:function(a){var h=_r.prototype.toJSON.call(this,a);return h.object.color=this.color.getHex(),h.object.intensity=this.intensity,void 0!==this.groundColor&&(h.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(h.object.distance=this.distance),void 0!==this.angle&&(h.object.angle=this.angle),void 0!==this.decay&&(h.object.decay=this.decay),void 0!==this.penumbra&&(h.object.penumbra=this.penumbra),void 0!==this.shadow&&(h.object.shadow=this.shadow.toJSON()),h}}),fc.prototype=Object.assign(Object.create(Js.prototype),{constructor:fc,isHemisphereLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}),Object.assign(fh.prototype,{copy:function(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var a={};return 0!==this.bias&&(a.bias=this.bias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}),dp.prototype=Object.assign(Object.create(fh.prototype),{constructor:dp,isSpotLightShadow:!0,update:function(a){var h=2*xs.RAD2DEG*a.angle,g=this.mapSize.width/this.mapSize.height,y=a.distance||500,A=this.camera;(h!==A.fov||g!==A.aspect||y!==A.far)&&(A.fov=h,A.aspect=g,A.far=y,A.updateProjectionMatrix())}}),Uh.prototype=Object.assign(Object.create(Js.prototype),{constructor:Uh,isSpotLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),_u.prototype=Object.assign(Object.create(Js.prototype),{constructor:_u,isPointLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}),Ef.prototype=Object.assign(Object.create(fh.prototype),{constructor:Ef}),Tf.prototype=Object.assign(Object.create(Js.prototype),{constructor:Tf,isDirectionalLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}),Yg.prototype=Object.assign(Object.create(Js.prototype),{constructor:Yg,isAmbientLight:!0});var hd,pc={arraySlice:function(a,h,g){return pc.isTypedArray(a)?new a.constructor(a.subarray(h,g)):a.slice(h,g)},convertArray:function(a,h,g){return!a||!g&&a.constructor===h?a:"number"==typeof h.BYTES_PER_ELEMENT?new h(a):Array.prototype.slice.call(a)},isTypedArray:function(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)},getKeyframeOrder:function(a){for(var g=a.length,y=new Array(g),A=0;A!==g;++A)y[A]=A;return y.sort(function h(T,R){return a[T]-a[R]}),y},sortedArray:function(a,h,g){for(var y=a.length,A=new a.constructor(y),T=0,R=0;R!==y;++T)for(var N=g[T]*h,ie=0;ie!==h;++ie)A[R++]=a[N+ie];return A},flattenJSON:function(a,h,g,y){for(var A=1,T=a[0];void 0!==T&&void 0===T[y];)T=a[A++];if(void 0!==T){var R=T[y];if(void 0!==R)if(Array.isArray(R))do{void 0!==(R=T[y])&&(h.push(T.time),g.push.apply(g,R)),T=a[A++]}while(void 0!==T);else if(void 0!==R.toArray)do{void 0!==(R=T[y])&&(h.push(T.time),R.toArray(g,g.length)),T=a[A++]}while(void 0!==T);else do{void 0!==(R=T[y])&&(h.push(T.time),g.push(R)),T=a[A++]}while(void 0!==T)}}};function El(a,h,g,y){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==y?y:new h.constructor(g),this.sampleValues=h,this.valueSize=g}function Hh(a,h,g,y){El.call(this,a,h,g,y),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function qd(a,h,g,y){El.call(this,a,h,g,y)}function Uu(a,h,g,y){El.call(this,a,h,g,y)}function Xn(a,h,g,y){if(void 0===a)throw new Error("track name is undefined");if(void 0===h||0===h.length)throw new Error("no keyframes in track named "+a);this.name=a,this.times=pc.convertArray(h,this.TimeBufferType),this.values=pc.convertArray(g,this.ValueBufferType),this.setInterpolation(y||this.DefaultInterpolation),this.validate(),this.optimize()}function Mf(a,h,g,y){Xn.call(this,a,h,g,y)}function ha(a,h,g,y){El.call(this,a,h,g,y)}function Xd(a,h,g,y){Xn.call(this,a,h,g,y)}function Cu(a,h,g,y){Xn.call(this,a,h,g,y)}function Fm(a,h,g,y){Xn.call(this,a,h,g,y)}function Kg(a,h,g){Xn.call(this,a,h,g)}function fp(a,h,g,y){Xn.call(this,a,h,g,y)}function Hu(a,h,g,y){Xn.apply(this,arguments)}function Tl(a,h,g){this.name=a,this.tracks=g,this.duration=void 0!==h?h:-1,this.uuid=xs.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Zg(a){this.manager=void 0!==a?a:dc,this.textures={}}function ph(a){this.manager=void 0!==a?a:dc}function eu(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Qg(a){"boolean"==typeof a&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),a=void 0),this.manager=void 0!==a?a:dc,this.withCredentials=!1}function pp(a){this.manager=void 0!==a?a:dc,this.texturePath=""}function Vl(){}function gh(a,h){this.v1=a,this.v2=h}function Jg(){this.curves=[],this.autoClose=!1}function dd(a,h,g,y,A,T,R,N){this.aX=a,this.aY=h,this.xRadius=g,this.yRadius=y,this.aStartAngle=A,this.aEndAngle=T,this.aClockwise=R,this.aRotation=N||0}El.prototype={constructor:El,evaluate:function(a){var h=this.parameterPositions,g=this._cachedIndex,y=h[g],A=h[g-1];e:{t:{var T;n:{i:if(!(a<y)){for(var R=g+2;;){if(void 0===y){if(a<A)break i;return this._cachedIndex=g=h.length,this.afterEnd_(g-1,a,A)}if(g===R)break;if(A=y,a<(y=h[++g]))break t}T=h.length;break n}if(a>=A)break e;var N=h[1];for(a<N&&(g=2,A=N),R=g-2;;){if(void 0===A)return this._cachedIndex=0,this.beforeStart_(0,a,y);if(g===R)break;if(y=A,a>=(A=h[--g-1]))break t}T=g,g=0}for(;g<T;){var ie=g+T>>>1;a<h[ie]?T=ie:g=ie+1}if(y=h[g],void 0===(A=h[g-1]))return this._cachedIndex=0,this.beforeStart_(0,a,y);if(void 0===y)return this._cachedIndex=g=h.length,this.afterEnd_(g-1,A,a)}this._cachedIndex=g,this.intervalChanged_(g,A,y)}return this.interpolate_(g,A,a,y)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(a){for(var h=this.resultBuffer,g=this.sampleValues,y=this.valueSize,A=a*y,T=0;T!==y;++T)h[T]=g[A+T];return h},interpolate_:function(a,h,g,y){throw new Error("call to abstract method")},intervalChanged_:function(a,h,g){}},Object.assign(El.prototype,{beforeStart_:El.prototype.copySampleValue_,afterEnd_:El.prototype.copySampleValue_}),Hh.prototype=Object.assign(Object.create(El.prototype),{constructor:Hh,DefaultSettings_:{endingStart:cs,endingEnd:cs},intervalChanged_:function(a,h,g){var y=this.parameterPositions,A=a-2,T=a+1,R=y[A],N=y[T];if(void 0===R)switch(this.getSettings_().endingStart){case Ia:A=a,R=2*h-g;break;case us:R=h+y[A=y.length-2]-y[A+1];break;default:A=a,R=g}if(void 0===N)switch(this.getSettings_().endingEnd){case Ia:T=a,N=2*g-h;break;case us:T=1,N=g+y[1]-y[0];break;default:T=a-1,N=h}var ie=.5*(g-h),ee=this.valueSize;this._weightPrev=ie/(h-R),this._weightNext=ie/(N-g),this._offsetPrev=A*ee,this._offsetNext=T*ee},interpolate_:function(a,h,g,y){for(var A=this.resultBuffer,T=this.sampleValues,R=this.valueSize,N=a*R,ie=N-R,ee=this._offsetPrev,fe=this._offsetNext,me=this._weightPrev,Le=this._weightNext,ke=(g-h)/(y-h),Fe=ke*ke,nt=Fe*ke,tt=-me*nt+2*me*Fe-me*ke,Ke=(1+me)*nt+(-1.5-2*me)*Fe+(-.5+me)*ke+1,pt=(-1-Le)*nt+(1.5+Le)*Fe+.5*ke,vt=Le*nt-Le*Fe,Xt=0;Xt!==R;++Xt)A[Xt]=tt*T[ee+Xt]+Ke*T[ie+Xt]+pt*T[N+Xt]+vt*T[fe+Xt];return A}}),qd.prototype=Object.assign(Object.create(El.prototype),{constructor:qd,interpolate_:function(a,h,g,y){for(var A=this.resultBuffer,T=this.sampleValues,R=this.valueSize,N=a*R,ie=N-R,ee=(g-h)/(y-h),fe=1-ee,me=0;me!==R;++me)A[me]=T[ie+me]*fe+T[N+me]*ee;return A}}),Uu.prototype=Object.assign(Object.create(El.prototype),{constructor:Uu,interpolate_:function(a,h,g,y){return this.copySampleValue_(a-1)}}),hd={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:bo,InterpolantFactoryMethodDiscrete:function(a){return new Uu(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodLinear:function(a){return new qd(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:function(a){return new Hh(this.times,this.values,this.getValueSize(),a)},setInterpolation:function(a){var h;switch(a){case Gs:h=this.InterpolantFactoryMethodDiscrete;break;case bo:h=this.InterpolantFactoryMethodLinear;break;case xo:h=this.InterpolantFactoryMethodSmooth}if(void 0!==h)this.createInterpolant=h;else{var g="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(g);this.setInterpolation(this.DefaultInterpolation)}console.warn(g)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gs;case this.InterpolantFactoryMethodLinear:return bo;case this.InterpolantFactoryMethodSmooth:return xo}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var h=this.times,g=0,y=h.length;g!==y;++g)h[g]+=a;return this},scale:function(a){if(1!==a)for(var h=this.times,g=0,y=h.length;g!==y;++g)h[g]*=a;return this},trim:function(a,h){for(var g=this.times,y=g.length,A=0,T=y-1;A!==y&&g[A]<a;)++A;for(;-1!==T&&g[T]>h;)--T;if(++T,0!==A||T!==y){A>=T&&(A=(T=Math.max(T,1))-1);var R=this.getValueSize();this.times=pc.arraySlice(g,A,T),this.values=pc.arraySlice(this.values,A*R,T*R)}return this},validate:function(){var a=!0,h=this.getValueSize();h-Math.floor(h)!=0&&(console.error("invalid value size in track",this),a=!1);var g=this.times,y=this.values,A=g.length;0===A&&(console.error("track is empty",this),a=!1);for(var T=null,R=0;R!==A;R++){var N=g[R];if("number"==typeof N&&isNaN(N)){console.error("time is not a valid number",this,R,N),a=!1;break}if(null!==T&&T>N){console.error("out of order keys",this,R,N,T),a=!1;break}T=N}if(void 0!==y&&pc.isTypedArray(y)){R=0;for(var ie=y.length;R!==ie;++R){var ee=y[R];if(isNaN(ee)){console.error("value is not a valid number",this,R,ee),a=!1;break}}}return a},optimize:function(){for(var a=this.times,h=this.values,g=this.getValueSize(),y=this.getInterpolation()===xo,A=1,T=a.length-1,R=1;R<T;++R){var N=!1,ie=a[R];if(ie!==a[R+1]&&(1!==R||ie!==ie[0]))if(y)N=!0;else for(var fe=R*g,me=fe-g,Le=fe+g,ke=0;ke!==g;++ke){var Fe=h[fe+ke];if(Fe!==h[me+ke]||Fe!==h[Le+ke]){N=!0;break}}if(N){if(R!==A){a[A]=a[R];var nt=R*g,tt=A*g;for(ke=0;ke!==g;++ke)h[tt+ke]=h[nt+ke]}++A}}if(T>0){for(a[A]=a[T],nt=T*g,tt=A*g,ke=0;ke!==g;++ke)h[tt+ke]=h[nt+ke];++A}return A!==a.length&&(this.times=pc.arraySlice(a,0,A),this.values=pc.arraySlice(h,0,A*g)),this}},Mf.prototype=Object.assign(Object.create(hd),{constructor:Mf,ValueTypeName:"vector"}),ha.prototype=Object.assign(Object.create(El.prototype),{constructor:ha,interpolate_:function(a,h,g,y){for(var A=this.resultBuffer,T=this.sampleValues,R=this.valueSize,N=a*R,ie=(g-h)/(y-h),ee=N+R;N!==ee;N+=4)kl.slerpFlat(A,0,T,N-R,T,N,ie);return A}}),Xd.prototype=Object.assign(Object.create(hd),{constructor:Xd,ValueTypeName:"quaternion",DefaultInterpolation:bo,InterpolantFactoryMethodLinear:function(a){return new ha(this.times,this.values,this.getValueSize(),a)},InterpolantFactoryMethodSmooth:void 0}),Cu.prototype=Object.assign(Object.create(hd),{constructor:Cu,ValueTypeName:"number"}),Fm.prototype=Object.assign(Object.create(hd),{constructor:Fm,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Gs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Kg.prototype=Object.assign(Object.create(hd),{constructor:Kg,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Gs,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fp.prototype=Object.assign(Object.create(hd),{constructor:fp,ValueTypeName:"color"}),Hu.prototype=hd,hd.constructor=Hu,Object.assign(Hu,{parse:function(a){if(void 0===a.type)throw new Error("track type undefined, can not parse");var h=Hu._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var g=[],y=[];pc.flattenJSON(a.keys,g,y,"value"),a.times=g,a.values=y}return void 0!==h.parse?h.parse(a):new h(a.name,a.times,a.values,a.interpolation)},toJSON:function(a){var g,h=a.constructor;if(void 0!==h.toJSON)g=h.toJSON(a);else{g={name:a.name,times:pc.convertArray(a.times,Array),values:pc.convertArray(a.values,Array)};var y=a.getInterpolation();y!==a.DefaultInterpolation&&(g.interpolation=y)}return g.type=a.ValueTypeName,g},_getTrackTypeForValueTypeName:function(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cu;case"vector":case"vector2":case"vector3":case"vector4":return Mf;case"color":return fp;case"quaternion":return Xd;case"bool":case"boolean":return Kg;case"string":return Fm}throw new Error("Unsupported typeName: "+a)}}),Tl.prototype={constructor:Tl,resetDuration:function(){for(var h=0,g=0,y=this.tracks.length;g!==y;++g){var A=this.tracks[g];h=Math.max(h,A.times[A.times.length-1])}this.duration=h},trim:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this},optimize:function(){for(var a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}},Object.assign(Tl,{parse:function(a){for(var h=[],g=a.tracks,y=1/(a.fps||1),A=0,T=g.length;A!==T;++A)h.push(Hu.parse(g[A]).scale(y));return new Tl(a.name,a.duration,h)},toJSON:function(a){for(var h=[],g=a.tracks,y={name:a.name,duration:a.duration,tracks:h},A=0,T=g.length;A!==T;++A)h.push(Hu.toJSON(g[A]));return y},CreateFromMorphTargetSequence:function(a,h,g,y){for(var A=h.length,T=[],R=0;R<A;R++){var N=[],ie=[];N.push((R+A-1)%A,R,(R+1)%A),ie.push(0,1,0);var ee=pc.getKeyframeOrder(N);N=pc.sortedArray(N,1,ee),ie=pc.sortedArray(ie,1,ee),!y&&0===N[0]&&(N.push(A),ie.push(ie[0])),T.push(new Cu(".morphTargetInfluences["+h[R].name+"]",N,ie).scale(1/g))}return new Tl(a,-1,T)},findByName:function(a,h){var g=a;Array.isArray(a)||(g=a.geometry&&a.geometry.animations||a.animations);for(var A=0;A<g.length;A++)if(g[A].name===h)return g[A];return null},CreateClipsFromMorphTargetSequences:function(a,h,g){for(var y={},A=/^([\w-]*?)([\d]+)$/,T=0,R=a.length;T<R;T++){var N=a[T],ie=N.name.match(A);if(ie&&ie.length>1){var fe=y[ee=ie[1]];fe||(y[ee]=fe=[]),fe.push(N)}}var me=[];for(var ee in y)me.push(Tl.CreateFromMorphTargetSequence(ee,y[ee],h,g));return me},parseAnimation:function(a,h){if(!a)return console.error("  no animation in JSONLoader data"),null;for(var g=function(vt,Xt,Bt,cn,sn){if(0!==Bt.length){var en=[],hn=[];pc.flattenJSON(Bt,en,hn,cn),0!==en.length&&sn.push(new vt(Xt,en,hn))}},y=[],A=a.name||"default",T=a.length||-1,R=a.fps||30,N=a.hierarchy||[],ie=0;ie<N.length;ie++){var ee=N[ie].keys;if(ee&&0!==ee.length)if(ee[0].morphTargets){for(var fe={},me=0;me<ee.length;me++)if(ee[me].morphTargets)for(var Le=0;Le<ee[me].morphTargets.length;Le++)fe[ee[me].morphTargets[Le]]=-1;for(var ke in fe){var Fe=[],nt=[];for(Le=0;Le!==ee[me].morphTargets.length;++Le){var tt=ee[me];Fe.push(tt.time),nt.push(tt.morphTarget===ke?1:0)}y.push(new Cu(".morphTargetInfluence["+ke+"]",Fe,nt))}T=fe.length*(R||1)}else{var Ke=".bones["+h[ie].name+"]";g(Mf,Ke+".position",ee,"pos",y),g(Xd,Ke+".quaternion",ee,"rot",y),g(Mf,Ke+".scale",ee,"scl",y)}}return 0===y.length?null:new Tl(A,T,y)}}),Object.assign(Zg.prototype,{load:function(a,h,g,y){var A=this;new Io(A.manager).load(a,function(R){h(A.parse(JSON.parse(R)))},g,y)},setTextures:function(a){this.textures=a},parse:function(a){var h=this.textures;function g(N){return void 0===h[N]&&console.warn("THREE.MaterialLoader: Undefined texture",N),h[N]}var y=new Pv[a.type];if(void 0!==a.uuid&&(y.uuid=a.uuid),void 0!==a.name&&(y.name=a.name),void 0!==a.color&&y.color.setHex(a.color),void 0!==a.roughness&&(y.roughness=a.roughness),void 0!==a.metalness&&(y.metalness=a.metalness),void 0!==a.emissive&&y.emissive.setHex(a.emissive),void 0!==a.specular&&y.specular.setHex(a.specular),void 0!==a.shininess&&(y.shininess=a.shininess),void 0!==a.clearCoat&&(y.clearCoat=a.clearCoat),void 0!==a.clearCoatRoughness&&(y.clearCoatRoughness=a.clearCoatRoughness),void 0!==a.uniforms&&(y.uniforms=a.uniforms),void 0!==a.vertexShader&&(y.vertexShader=a.vertexShader),void 0!==a.fragmentShader&&(y.fragmentShader=a.fragmentShader),void 0!==a.vertexColors&&(y.vertexColors=a.vertexColors),void 0!==a.fog&&(y.fog=a.fog),void 0!==a.shading&&(y.shading=a.shading),void 0!==a.blending&&(y.blending=a.blending),void 0!==a.side&&(y.side=a.side),void 0!==a.opacity&&(y.opacity=a.opacity),void 0!==a.transparent&&(y.transparent=a.transparent),void 0!==a.alphaTest&&(y.alphaTest=a.alphaTest),void 0!==a.depthTest&&(y.depthTest=a.depthTest),void 0!==a.depthWrite&&(y.depthWrite=a.depthWrite),void 0!==a.colorWrite&&(y.colorWrite=a.colorWrite),void 0!==a.wireframe&&(y.wireframe=a.wireframe),void 0!==a.wireframeLinewidth&&(y.wireframeLinewidth=a.wireframeLinewidth),void 0!==a.wireframeLinecap&&(y.wireframeLinecap=a.wireframeLinecap),void 0!==a.wireframeLinejoin&&(y.wireframeLinejoin=a.wireframeLinejoin),void 0!==a.skinning&&(y.skinning=a.skinning),void 0!==a.morphTargets&&(y.morphTargets=a.morphTargets),void 0!==a.size&&(y.size=a.size),void 0!==a.sizeAttenuation&&(y.sizeAttenuation=a.sizeAttenuation),void 0!==a.map&&(y.map=g(a.map)),void 0!==a.alphaMap&&(y.alphaMap=g(a.alphaMap),y.transparent=!0),void 0!==a.bumpMap&&(y.bumpMap=g(a.bumpMap)),void 0!==a.bumpScale&&(y.bumpScale=a.bumpScale),void 0!==a.normalMap&&(y.normalMap=g(a.normalMap)),void 0!==a.normalScale){var A=a.normalScale;!1===Array.isArray(A)&&(A=[A,A]),y.normalScale=(new Xi).fromArray(A)}if(void 0!==a.displacementMap&&(y.displacementMap=g(a.displacementMap)),void 0!==a.displacementScale&&(y.displacementScale=a.displacementScale),void 0!==a.displacementBias&&(y.displacementBias=a.displacementBias),void 0!==a.roughnessMap&&(y.roughnessMap=g(a.roughnessMap)),void 0!==a.metalnessMap&&(y.metalnessMap=g(a.metalnessMap)),void 0!==a.emissiveMap&&(y.emissiveMap=g(a.emissiveMap)),void 0!==a.emissiveIntensity&&(y.emissiveIntensity=a.emissiveIntensity),void 0!==a.specularMap&&(y.specularMap=g(a.specularMap)),void 0!==a.envMap&&(y.envMap=g(a.envMap)),void 0!==a.reflectivity&&(y.reflectivity=a.reflectivity),void 0!==a.lightMap&&(y.lightMap=g(a.lightMap)),void 0!==a.lightMapIntensity&&(y.lightMapIntensity=a.lightMapIntensity),void 0!==a.aoMap&&(y.aoMap=g(a.aoMap)),void 0!==a.aoMapIntensity&&(y.aoMapIntensity=a.aoMapIntensity),void 0!==a.gradientMap&&(y.gradientMap=g(a.gradientMap)),void 0!==a.materials)for(var T=0,R=a.materials.length;T<R;T++)y.materials.push(this.parse(a.materials[T]));return y}}),Object.assign(ph.prototype,{load:function(a,h,g,y){var A=this;new Io(A.manager).load(a,function(R){h(A.parse(JSON.parse(R)))},g,y)},parse:function(a){var h=new Er,g=a.data.index,y={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};if(void 0!==g){var A=new y[g.type](g.array);h.setIndex(new fr(A,1))}var T=a.data.attributes;for(var R in T){var N=T[R];A=new y[N.type](N.array),h.addAttribute(R,new fr(A,N.itemSize,N.normalized))}var ie=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==ie)for(var ee=0,fe=ie.length;ee!==fe;++ee){var me=ie[ee];h.addGroup(me.start,me.count,me.materialIndex)}var Le=a.data.boundingSphere;if(void 0!==Le){var ke=new Zt;void 0!==Le.center&&ke.fromArray(Le.center),h.boundingSphere=new wt(ke,Le.radius)}return h}}),eu.prototype={constructor:eu,crossOrigin:void 0,extractUrlBase:function(a){var h=a.split("/");return 1===h.length?"./":(h.pop(),h.join("/")+"/")},initMaterials:function(a,h,g){for(var y=[],A=0;A<a.length;++A)y[A]=this.createMaterial(a[A],h,g);return y},createMaterial:function(){var a,h,g;return function(A,T,R){void 0===a&&(a=new jr),void 0===h&&(h=new Vh),void 0===g&&(g=new Zg);var N={};function ie(Le,ke,Fe,nt,tt){var vt,Ke=T+Le,pt=eu.Handlers.get(Ke);null!==pt?vt=pt.load(Ke):(h.setCrossOrigin(R),vt=h.load(Ke)),void 0!==ke&&(vt.repeat.fromArray(ke),1!==ke[0]&&(vt.wrapS=th),1!==ke[1]&&(vt.wrapT=th)),void 0!==Fe&&vt.offset.fromArray(Fe),void 0!==nt&&("repeat"===nt[0]&&(vt.wrapS=th),"mirror"===nt[0]&&(vt.wrapS=Ah),"repeat"===nt[1]&&(vt.wrapT=th),"mirror"===nt[1]&&(vt.wrapT=Ah)),void 0!==tt&&(vt.anisotropy=tt);var Xt=xs.generateUUID();return N[Xt]=vt,Xt}var ee={uuid:xs.generateUUID(),type:"MeshLambertMaterial"};for(var fe in A){var me=A[fe];switch(fe){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"DbgName":ee.name=me;break;case"blending":ee.blending=Pe[me];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",fe,"is no longer supported.");break;case"colorDiffuse":ee.color=a.fromArray(me).getHex();break;case"colorSpecular":ee.specular=a.fromArray(me).getHex();break;case"colorEmissive":ee.emissive=a.fromArray(me).getHex();break;case"specularCoef":ee.shininess=me;break;case"shading":"basic"===me.toLowerCase()&&(ee.type="MeshBasicMaterial"),"phong"===me.toLowerCase()&&(ee.type="MeshPhongMaterial"),"standard"===me.toLowerCase()&&(ee.type="MeshStandardMaterial");break;case"mapDiffuse":ee.map=ie(me,A.mapDiffuseRepeat,A.mapDiffuseOffset,A.mapDiffuseWrap,A.mapDiffuseAnisotropy);break;case"mapEmissive":ee.emissiveMap=ie(me,A.mapEmissiveRepeat,A.mapEmissiveOffset,A.mapEmissiveWrap,A.mapEmissiveAnisotropy);break;case"mapLight":ee.lightMap=ie(me,A.mapLightRepeat,A.mapLightOffset,A.mapLightWrap,A.mapLightAnisotropy);break;case"mapAO":ee.aoMap=ie(me,A.mapAORepeat,A.mapAOOffset,A.mapAOWrap,A.mapAOAnisotropy);break;case"mapBump":ee.bumpMap=ie(me,A.mapBumpRepeat,A.mapBumpOffset,A.mapBumpWrap,A.mapBumpAnisotropy);break;case"mapBumpScale":ee.bumpScale=me;break;case"mapNormal":ee.normalMap=ie(me,A.mapNormalRepeat,A.mapNormalOffset,A.mapNormalWrap,A.mapNormalAnisotropy);break;case"mapNormalFactor":ee.normalScale=[me,me];break;case"mapSpecular":ee.specularMap=ie(me,A.mapSpecularRepeat,A.mapSpecularOffset,A.mapSpecularWrap,A.mapSpecularAnisotropy);break;case"mapMetalness":ee.metalnessMap=ie(me,A.mapMetalnessRepeat,A.mapMetalnessOffset,A.mapMetalnessWrap,A.mapMetalnessAnisotropy);break;case"mapRoughness":ee.roughnessMap=ie(me,A.mapRoughnessRepeat,A.mapRoughnessOffset,A.mapRoughnessWrap,A.mapRoughnessAnisotropy);break;case"mapAlpha":ee.alphaMap=ie(me,A.mapAlphaRepeat,A.mapAlphaOffset,A.mapAlphaWrap,A.mapAlphaAnisotropy);break;case"flipSided":ee.side=U;break;case"doubleSided":ee.side=ae;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),ee.opacity=me;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":ee[fe]=me;break;case"vertexColors":!0===me&&(ee.vertexColors=z),"face"===me&&(ee.vertexColors=ue);break;default:console.error("THREE.Loader.createMaterial: Unsupported",fe,me)}}return"MeshBasicMaterial"===ee.type&&delete ee.emissive,"MeshPhongMaterial"!==ee.type&&delete ee.specular,ee.opacity<1&&(ee.transparent=!0),g.setTextures(N),g.parse(ee)}}()},eu.Handlers={handlers:[],add:function(a,h){this.handlers.push(a,h)},get:function(a){for(var h=this.handlers,g=0,y=h.length;g<y;g+=2){var T=h[g+1];if(h[g].test(a))return T}return null}},Object.assign(Qg.prototype,{load:function(a,h,g,y){var A=this,T=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:eu.prototype.extractUrlBase(a),R=new Io(this.manager);R.setWithCredentials(this.withCredentials),R.load(a,function(N){var ie=JSON.parse(N),ee=ie.metadata;if(void 0!==ee){var fe=ee.type;if(void 0!==fe){if("object"===fe.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.ObjectLoader instead.");if("scene"===fe.toLowerCase())return void console.error("THREE.JSONLoader: "+a+" should be loaded with THREE.SceneLoader instead.")}}var me=A.parse(ie,T);h(me.geometry,me.materials)},g,y)},setTexturePath:function(a){this.texturePath=a},parse:function(a,h){var g=new Ts,y=void 0!==a.scale?1/a.scale:1;if(function A(ee){function fe(m,_){return m&1<<_}var me,Le,ke,Fe,nt,tt,Ke,pt,vt,Xt,Bt,cn,sn,en,hn,On,Ai,ui,jt,qt,Wn,ei,Ii,_i,fi,qn=a.faces,Hn=a.vertices,f=a.normals,c=a.colors,d=0;if(void 0!==a.uvs){for(me=0;me<a.uvs.length;me++)a.uvs[me].length&&d++;for(me=0;me<d;me++)g.faceVertexUvs[me]=[]}for(Fe=0,nt=Hn.length;Fe<nt;)(ui=new Zt).x=Hn[Fe++]*ee,ui.y=Hn[Fe++]*ee,ui.z=Hn[Fe++]*ee,g.vertices.push(ui);for(Fe=0,nt=qn.length;Fe<nt;)if(Bt=fe(Xt=qn[Fe++],0),cn=fe(Xt,1),sn=fe(Xt,3),en=fe(Xt,4),hn=fe(Xt,5),On=fe(Xt,6),Ai=fe(Xt,7),Bt){if((qt=new Po).a=qn[Fe],qt.b=qn[Fe+1],qt.c=qn[Fe+3],(Wn=new Po).a=qn[Fe+1],Wn.b=qn[Fe+2],Wn.c=qn[Fe+3],Fe+=4,cn&&(vt=qn[Fe++],qt.materialIndex=vt,Wn.materialIndex=vt),ke=g.faces.length,sn)for(me=0;me<d;me++)for(_i=a.uvs[me],g.faceVertexUvs[me][ke]=[],g.faceVertexUvs[me][ke+1]=[],Le=0;Le<4;Le++)fi=new Xi(_i[2*(pt=qn[Fe++])],_i[2*pt+1]),2!==Le&&g.faceVertexUvs[me][ke].push(fi),0!==Le&&g.faceVertexUvs[me][ke+1].push(fi);if(en&&(Ke=3*qn[Fe++],qt.normal.set(f[Ke++],f[Ke++],f[Ke]),Wn.normal.copy(qt.normal)),hn)for(me=0;me<4;me++)Ke=3*qn[Fe++],Ii=new Zt(f[Ke++],f[Ke++],f[Ke]),2!==me&&qt.vertexNormals.push(Ii),0!==me&&Wn.vertexNormals.push(Ii);if(On&&(tt=qn[Fe++],qt.color.setHex(ei=c[tt]),Wn.color.setHex(ei)),Ai)for(me=0;me<4;me++)ei=c[tt=qn[Fe++]],2!==me&&qt.vertexColors.push(new jr(ei)),0!==me&&Wn.vertexColors.push(new jr(ei));g.faces.push(qt),g.faces.push(Wn)}else{if((jt=new Po).a=qn[Fe++],jt.b=qn[Fe++],jt.c=qn[Fe++],cn&&(vt=qn[Fe++],jt.materialIndex=vt),ke=g.faces.length,sn)for(me=0;me<d;me++)for(_i=a.uvs[me],g.faceVertexUvs[me][ke]=[],Le=0;Le<3;Le++)fi=new Xi(_i[2*(pt=qn[Fe++])],_i[2*pt+1]),g.faceVertexUvs[me][ke].push(fi);if(en&&(Ke=3*qn[Fe++],jt.normal.set(f[Ke++],f[Ke++],f[Ke])),hn)for(me=0;me<3;me++)Ke=3*qn[Fe++],Ii=new Zt(f[Ke++],f[Ke++],f[Ke]),jt.vertexNormals.push(Ii);if(On&&(tt=qn[Fe++],jt.color.setHex(c[tt])),Ai)for(me=0;me<3;me++)tt=qn[Fe++],jt.vertexColors.push(new jr(c[tt]));g.faces.push(jt)}}(y),function T(){var ee=void 0!==a.influencesPerVertex?a.influencesPerVertex:2;if(a.skinWeights)for(var fe=0,me=a.skinWeights.length;fe<me;fe+=ee)g.skinWeights.push(new jo(a.skinWeights[fe],ee>1?a.skinWeights[fe+1]:0,ee>2?a.skinWeights[fe+2]:0,ee>3?a.skinWeights[fe+3]:0));if(a.skinIndices)for(fe=0,me=a.skinIndices.length;fe<me;fe+=ee)g.skinIndices.push(new jo(a.skinIndices[fe],ee>1?a.skinIndices[fe+1]:0,ee>2?a.skinIndices[fe+2]:0,ee>3?a.skinIndices[fe+3]:0));g.bones=a.bones,g.bones&&g.bones.length>0&&(g.skinWeights.length!==g.skinIndices.length||g.skinIndices.length!==g.vertices.length)&&console.warn("When skinning, number of vertices ("+g.vertices.length+"), skinIndices ("+g.skinIndices.length+"), and skinWeights ("+g.skinWeights.length+") should match.")}(),function R(ee){if(void 0!==a.morphTargets)for(var fe=0,me=a.morphTargets.length;fe<me;fe++){g.morphTargets[fe]={},g.morphTargets[fe].name=a.morphTargets[fe].name,g.morphTargets[fe].vertices=[];for(var Le=g.morphTargets[fe].vertices,ke=a.morphTargets[fe].vertices,Fe=0,nt=ke.length;Fe<nt;Fe+=3){var tt=new Zt;tt.x=ke[Fe]*ee,tt.y=ke[Fe+1]*ee,tt.z=ke[Fe+2]*ee,Le.push(tt)}}if(void 0!==a.morphColors&&a.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var Ke=g.faces,pt=a.morphColors[0].colors;for(fe=0,me=Ke.length;fe<me;fe++)Ke[fe].color.fromArray(pt,3*fe)}}(y),function N(){var ee=[],fe=[];void 0!==a.animation&&fe.push(a.animation),void 0!==a.animations&&(a.animations.length?fe=fe.concat(a.animations):fe.push(a.animations));for(var me=0;me<fe.length;me++){var Le=Tl.parseAnimation(fe[me],g.bones);Le&&ee.push(Le)}if(g.morphTargets){var ke=Tl.CreateClipsFromMorphTargetSequences(g.morphTargets,10);ee=ee.concat(ke)}ee.length>0&&(g.animations=ee)}(),g.computeFaceNormals(),g.computeBoundingSphere(),void 0===a.materials||0===a.materials.length)return{geometry:g};var ie=eu.prototype.initMaterials(a.materials,h,this.crossOrigin);return{geometry:g,materials:ie}}}),Object.assign(pp.prototype,{load:function(a,h,g,y){""===this.texturePath&&(this.texturePath=a.substring(0,a.lastIndexOf("/")+1));var A=this;new Io(A.manager).load(a,function(R){var N=null;try{N=JSON.parse(R)}catch(ee){return void console.error("THREE:ObjectLoader: Can't parse "+a+".",ee.message)}var ie=N.metadata;void 0!==ie&&void 0!==ie.type&&"geometry"!==ie.type.toLowerCase()?A.parse(N,h):console.error("THREE.ObjectLoader: Can't load "+a+". Use THREE.JSONLoader instead.")},g,y)},setTexturePath:function(a){this.texturePath=a},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,h){var g=this.parseGeometries(a.geometries),y=this.parseImages(a.images,function(){void 0!==h&&h(R)}),A=this.parseTextures(a.textures,y),T=this.parseMaterials(a.materials,A),R=this.parseObject(a.object,g,T);return a.animations&&(R.animations=this.parseAnimations(a.animations)),(void 0===a.images||0===a.images.length)&&void 0!==h&&h(R),R},parseGeometries:function(a){var h={};if(void 0!==a)for(var g=new Qg,y=new ph,A=0,T=a.length;A<T;A++){var R,N=a[A];switch(N.type){case"PlaneGeometry":case"PlaneBufferGeometry":R=new Bu[N.type](N.width,N.height,N.widthSegments,N.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":R=new Bu[N.type](N.width,N.height,N.depth,N.widthSegments,N.heightSegments,N.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":R=new Bu[N.type](N.radius,N.segments,N.thetaStart,N.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":R=new Bu[N.type](N.radiusTop,N.radiusBottom,N.height,N.radialSegments,N.heightSegments,N.openEnded,N.thetaStart,N.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":R=new Bu[N.type](N.radius,N.height,N.radialSegments,N.heightSegments,N.openEnded,N.thetaStart,N.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":R=new Bu[N.type](N.radius,N.widthSegments,N.heightSegments,N.phiStart,N.phiLength,N.thetaStart,N.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":R=new Bu[N.type](N.radius,N.detail);break;case"RingGeometry":case"RingBufferGeometry":R=new Bu[N.type](N.innerRadius,N.outerRadius,N.thetaSegments,N.phiSegments,N.thetaStart,N.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":R=new Bu[N.type](N.radius,N.tube,N.radialSegments,N.tubularSegments,N.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":R=new Bu[N.type](N.radius,N.tube,N.tubularSegments,N.radialSegments,N.p,N.q);break;case"LatheGeometry":case"LatheBufferGeometry":R=new Bu[N.type](N.points,N.segments,N.phiStart,N.phiLength);break;case"BufferGeometry":R=y.parse(N);break;case"Geometry":R=g.parse(N.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+N.type+'"');continue}R.uuid=N.uuid,void 0!==N.name&&(R.name=N.name),h[N.uuid]=R}return h},parseMaterials:function(a,h){var g={};if(void 0!==a){var y=new Zg;y.setTextures(h);for(var A=0,T=a.length;A<T;A++){var R=y.parse(a[A]);g[R.uuid]=R}}return g},parseAnimations:function(a){for(var h=[],g=0;g<a.length;g++){var y=Tl.parse(a[g]);h.push(y)}return h},parseImages:function(a,h){var g=this,y={};function A(me){return g.manager.itemStart(me),R.load(me,function(){g.manager.itemEnd(me)},void 0,function(){g.manager.itemError(me)})}if(void 0!==a&&a.length>0){var R=new Xg(new Sl(h));R.setCrossOrigin(this.crossOrigin);for(var N=0,ie=a.length;N<ie;N++){var ee=a[N],fe=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(ee.url)?ee.url:g.texturePath+ee.url;y[ee.uuid]=A(fe)}}return y},parseTextures:function(a,h){function g(ie,ee){return"number"==typeof ie?ie:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ie),ee[ie])}var y={};if(void 0!==a)for(var A=0,T=a.length;A<T;A++){var R=a[A];void 0===R.image&&console.warn('THREE.ObjectLoader: No "image" specified for',R.uuid),void 0===h[R.image]&&console.warn("THREE.ObjectLoader: Undefined image",R.image);var N=new Wo(h[R.image]);N.needsUpdate=!0,N.uuid=R.uuid,void 0!==R.name&&(N.name=R.name),void 0!==R.mapping&&(N.mapping=g(R.mapping,Wf)),void 0!==R.offset&&N.offset.fromArray(R.offset),void 0!==R.repeat&&N.repeat.fromArray(R.repeat),void 0!==R.wrap&&(N.wrapS=g(R.wrap[0],Lu),N.wrapT=g(R.wrap[1],Lu)),void 0!==R.minFilter&&(N.minFilter=g(R.minFilter,ed)),void 0!==R.magFilter&&(N.magFilter=g(R.magFilter,ed)),void 0!==R.anisotropy&&(N.anisotropy=R.anisotropy),void 0!==R.flipY&&(N.flipY=R.flipY),y[R.uuid]=N}return y},parseObject:function(){var a=new ms;return function(g,y,A){var T;function R(Fe){return void 0===y[Fe]&&console.warn("THREE.ObjectLoader: Undefined geometry",Fe),y[Fe]}function N(Fe){if(void 0!==Fe)return void 0===A[Fe]&&console.warn("THREE.ObjectLoader: Undefined material",Fe),A[Fe]}switch(g.type){case"Scene":T=new Fh,void 0!==g.background&&Number.isInteger(g.background)&&(T.background=new jr(g.background)),void 0!==g.fog&&("Fog"===g.fog.type?T.fog=new Lc(g.fog.color,g.fog.near,g.fog.far):"FogExp2"===g.fog.type&&(T.fog=new Oh(g.fog.color,g.fog.density)));break;case"PerspectiveCamera":T=new wl(g.fov,g.aspect,g.near,g.far),void 0!==g.focus&&(T.focus=g.focus),void 0!==g.zoom&&(T.zoom=g.zoom),void 0!==g.filmGauge&&(T.filmGauge=g.filmGauge),void 0!==g.filmOffset&&(T.filmOffset=g.filmOffset),void 0!==g.view&&(T.view=Object.assign({},g.view));break;case"OrthographicCamera":T=new Bd(g.left,g.right,g.top,g.bottom,g.near,g.far);break;case"AmbientLight":T=new Yg(g.color,g.intensity);break;case"DirectionalLight":T=new Tf(g.color,g.intensity);break;case"PointLight":T=new _u(g.color,g.intensity,g.distance,g.decay);break;case"SpotLight":T=new Uh(g.color,g.intensity,g.distance,g.angle,g.penumbra,g.decay);break;case"HemisphereLight":T=new fc(g.color,g.groundColor,g.intensity);break;case"Mesh":var ie=R(g.geometry),ee=N(g.material);T=ie.bones&&ie.bones.length>0?new $g(ie,ee):new ba(ie,ee);break;case"LOD":T=new sa;break;case"Line":T=new mu(R(g.geometry),N(g.material),g.mode);break;case"LineSegments":T=new vo(R(g.geometry),N(g.material));break;case"PointCloud":case"Points":T=new js(R(g.geometry),N(g.material));break;case"Sprite":T=new gu(N(g.material));break;case"Group":T=new ap;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:T=new _r}if(T.uuid=g.uuid,void 0!==g.name&&(T.name=g.name),void 0!==g.matrix?(a.fromArray(g.matrix),a.decompose(T.position,T.quaternion,T.scale)):(void 0!==g.position&&T.position.fromArray(g.position),void 0!==g.rotation&&T.rotation.fromArray(g.rotation),void 0!==g.quaternion&&T.quaternion.fromArray(g.quaternion),void 0!==g.scale&&T.scale.fromArray(g.scale)),void 0!==g.castShadow&&(T.castShadow=g.castShadow),void 0!==g.receiveShadow&&(T.receiveShadow=g.receiveShadow),g.shadow&&(void 0!==g.shadow.bias&&(T.shadow.bias=g.shadow.bias),void 0!==g.shadow.radius&&(T.shadow.radius=g.shadow.radius),void 0!==g.shadow.mapSize&&T.shadow.mapSize.fromArray(g.shadow.mapSize),void 0!==g.shadow.camera&&(T.shadow.camera=this.parseObject(g.shadow.camera))),void 0!==g.visible&&(T.visible=g.visible),void 0!==g.userData&&(T.userData=g.userData),void 0!==g.children)for(var fe in g.children)T.add(this.parseObject(g.children[fe],y,A));if("LOD"===g.type)for(var me=g.levels,Le=0;Le<me.length;Le++){var ke=me[Le];void 0!==(fe=T.getObjectByProperty("uuid",ke.object))&&T.addLevel(fe,ke.distance)}return T}}()}),Vl.prototype={constructor:Vl,getPoint:function(a){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(a){var h=this.getUtoTmapping(a);return this.getPoint(h)},getPoints:function(a){a||(a=5);for(var h=[],g=0;g<=a;g++)h.push(this.getPoint(g/a));return h},getSpacedPoints:function(a){a||(a=5);for(var h=[],g=0;g<=a;g++)h.push(this.getPointAt(g/a));return h},getLength:function(){var a=this.getLengths();return a[a.length-1]},getLengths:function(a){if(a||(a=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var g,A,h=[],y=this.getPoint(0),T=0;for(h.push(0),A=1;A<=a;A++)T+=(g=this.getPoint(A/a)).distanceTo(y),h.push(T),y=g;return this.cacheArcLengths=h,h},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(a,h){var T,g=this.getLengths(),y=0,A=g.length;T=h||a*g[A-1];for(var ie,R=0,N=A-1;R<=N;)if((ie=g[y=Math.floor(R+(N-R)/2)]-T)<0)R=y+1;else{if(!(ie>0)){N=y;break}N=y-1}if(g[y=N]===T)return y/(A-1);var ee=g[y];return(y+(T-ee)/(g[y+1]-ee))/(A-1)},getTangent:function(a){var h=1e-4,g=a-h,y=a+h;g<0&&(g=0),y>1&&(y=1);var A=this.getPoint(g);return this.getPoint(y).clone().sub(A).normalize()},getTangentAt:function(a){var h=this.getUtoTmapping(a);return this.getTangent(h)},computeFrenetFrames:function(a,h){var ie,fe,g=new Zt,y=[],A=[],T=[],R=new Zt,N=new ms;for(ie=0;ie<=a;ie++)y[ie]=this.getTangentAt(ie/a),y[ie].normalize();A[0]=new Zt,T[0]=new Zt;var me=Number.MAX_VALUE,Le=Math.abs(y[0].x),ke=Math.abs(y[0].y),Fe=Math.abs(y[0].z);for(Le<=me&&(me=Le,g.set(1,0,0)),ke<=me&&(me=ke,g.set(0,1,0)),Fe<=me&&g.set(0,0,1),R.crossVectors(y[0],g).normalize(),A[0].crossVectors(y[0],R),T[0].crossVectors(y[0],A[0]),ie=1;ie<=a;ie++)A[ie]=A[ie-1].clone(),T[ie]=T[ie-1].clone(),R.crossVectors(y[ie-1],y[ie]),R.length()>Number.EPSILON&&(R.normalize(),fe=Math.acos(xs.clamp(y[ie-1].dot(y[ie]),-1,1)),A[ie].applyMatrix4(N.makeRotationAxis(R,fe))),T[ie].crossVectors(y[ie],A[ie]);if(!0===h)for(fe=Math.acos(xs.clamp(A[0].dot(A[a]),-1,1)),fe/=a,y[0].dot(R.crossVectors(A[0],A[a]))>0&&(fe=-fe),ie=1;ie<=a;ie++)A[ie].applyMatrix4(N.makeRotationAxis(y[ie],fe*ie)),T[ie].crossVectors(y[ie],A[ie]);return{tangents:y,normals:A,binormals:T}}},Vl.create=function(a,h){return a.prototype=Object.create(Vl.prototype),a.prototype.constructor=a,a.prototype.getPoint=h,a},(gh.prototype=Object.create(Vl.prototype)).constructor=gh,gh.prototype.isLineCurve=!0,gh.prototype.getPoint=function(a){if(1===a)return this.v2.clone();var h=this.v2.clone().sub(this.v1);return h.multiplyScalar(a).add(this.v1),h},gh.prototype.getPointAt=function(a){return this.getPoint(a)},gh.prototype.getTangent=function(a){return this.v2.clone().sub(this.v1).normalize()},Jg.prototype=Object.assign(Object.create(Vl.prototype),{constructor:Jg,add:function(a){this.curves.push(a)},closePath:function(){var a=this.curves[0].getPoint(0),h=this.curves[this.curves.length-1].getPoint(1);a.equals(h)||this.curves.push(new gh(h,a))},getPoint:function(a){for(var h=a*this.getLength(),g=this.getCurveLengths(),y=0;y<g.length;){if(g[y]>=h){var A=g[y]-h,T=this.curves[y],R=T.getLength();return T.getPointAt(0===R?0:1-A/R)}y++}return null},getLength:function(){var a=this.getCurveLengths();return a[a.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],h=0,g=0,y=this.curves.length;g<y;g++)h+=this.curves[g].getLength(),a.push(h);return this.cacheLengths=a,a},getSpacedPoints:function(a){a||(a=40);for(var h=[],g=0;g<=a;g++)h.push(this.getPoint(g/a));return this.autoClose&&h.push(h[0]),h},getPoints:function(a){a=a||12;for(var g,h=[],y=0,A=this.curves;y<A.length;y++)for(var T=A[y],N=T.getPoints(T&&T.isEllipseCurve?2*a:T&&T.isLineCurve?1:T&&T.isSplineCurve?a*T.points.length:a),ie=0;ie<N.length;ie++){var ee=N[ie];g&&g.equals(ee)||(h.push(ee),g=ee)}return this.autoClose&&h.length>1&&!h[h.length-1].equals(h[0])&&h.push(h[0]),h},createPointsGeometry:function(a){var h=this.getPoints(a);return this.createGeometry(h)},createSpacedPointsGeometry:function(a){var h=this.getSpacedPoints(a);return this.createGeometry(h)},createGeometry:function(a){for(var h=new Ts,g=0,y=a.length;g<y;g++){var A=a[g];h.vertices.push(new Zt(A.x,A.y,A.z||0))}return h}}),(dd.prototype=Object.create(Vl.prototype)).constructor=dd,dd.prototype.isEllipseCurve=!0,dd.prototype.getPoint=function(a){for(var h=2*Math.PI,g=this.aEndAngle-this.aStartAngle,y=Math.abs(g)<Number.EPSILON;g<0;)g+=h;for(;g>h;)g-=h;g<Number.EPSILON&&(g=y?0:h),!0===this.aClockwise&&!y&&(g===h?g=-h:g-=h);var A=this.aStartAngle+a*g,T=this.aX+this.xRadius*Math.cos(A),R=this.aY+this.yRadius*Math.sin(A);if(0!==this.aRotation){var N=Math.cos(this.aRotation),ie=Math.sin(this.aRotation),ee=T-this.aX,fe=R-this.aY;T=ee*N-fe*ie+this.aX,R=ee*ie+fe*N+this.aY}return new Xi(T,R)};var nc={tangentQuadraticBezier:function(a,h,g,y){return 2*(1-a)*(g-h)+2*a*(y-g)},tangentCubicBezier:function(a,h,g,y,A){return-3*h*(1-a)*(1-a)+3*g*(1-a)*(1-a)-6*a*g*(1-a)+6*a*y*(1-a)-3*a*a*y+3*a*a*A},tangentSpline:function(a,h,g,y,A){return 6*a*a-6*a+(3*a*a-4*a+1)+(-6*a*a+6*a)+(3*a*a-2*a)},interpolate:function(a,h,g,y,A){var T=.5*(g-a),R=.5*(y-h),N=A*A;return(2*h-2*g+T+R)*(A*N)+(-3*h+3*g-2*T-R)*N+T*A+h}};function bu(a){this.points=void 0===a?[]:a}function Yd(a,h,g,y){this.v0=a,this.v1=h,this.v2=g,this.v3=y}function fd(a,h,g){this.v0=a,this.v1=h,this.v2=g}(bu.prototype=Object.create(Vl.prototype)).constructor=bu,bu.prototype.isSplineCurve=!0,bu.prototype.getPoint=function(a){var h=this.points,g=(h.length-1)*a,y=Math.floor(g),A=g-y,T=h[0===y?y:y-1],R=h[y],N=h[y>h.length-2?h.length-1:y+1],ie=h[y>h.length-3?h.length-1:y+2],ee=nc.interpolate;return new Xi(ee(T.x,R.x,N.x,ie.x,A),ee(T.y,R.y,N.y,ie.y,A))},(Yd.prototype=Object.create(Vl.prototype)).constructor=Yd,Yd.prototype.getPoint=function(a){var h=Da.b3;return new Xi(h(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},Yd.prototype.getTangent=function(a){var h=nc.tangentCubicBezier;return new Xi(h(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},(fd.prototype=Object.create(Vl.prototype)).constructor=fd,fd.prototype.getPoint=function(a){var h=Da.b2;return new Xi(h(a,this.v0.x,this.v1.x,this.v2.x),h(a,this.v0.y,this.v1.y,this.v2.y))},fd.prototype.getTangent=function(a){var h=nc.tangentQuadraticBezier;return new Xi(h(a,this.v0.x,this.v1.x,this.v2.x),h(a,this.v0.y,this.v1.y,this.v2.y)).normalize()};var gp=Object.assign(Object.create(Jg.prototype),{fromPoints:function(a){this.moveTo(a[0].x,a[0].y);for(var h=1,g=a.length;h<g;h++)this.lineTo(a[h].x,a[h].y)},moveTo:function(a,h){this.currentPoint.set(a,h)},lineTo:function(a,h){var g=new gh(this.currentPoint.clone(),new Xi(a,h));this.curves.push(g),this.currentPoint.set(a,h)},quadraticCurveTo:function(a,h,g,y){var A=new fd(this.currentPoint.clone(),new Xi(a,h),new Xi(g,y));this.curves.push(A),this.currentPoint.set(g,y)},bezierCurveTo:function(a,h,g,y,A,T){var R=new Yd(this.currentPoint.clone(),new Xi(a,h),new Xi(g,y),new Xi(A,T));this.curves.push(R),this.currentPoint.set(A,T)},splineThru:function(a){var g=new bu([this.currentPoint.clone()].concat(a));this.curves.push(g),this.currentPoint.copy(a[a.length-1])},arc:function(a,h,g,y,A,T){this.absarc(a+this.currentPoint.x,h+this.currentPoint.y,g,y,A,T)},absarc:function(a,h,g,y,A,T){this.absellipse(a,h,g,g,y,A,T)},ellipse:function(a,h,g,y,A,T,R,N){this.absellipse(a+this.currentPoint.x,h+this.currentPoint.y,g,y,A,T,R,N)},absellipse:function(a,h,g,y,A,T,R,N){var ie=new dd(a,h,g,y,A,T,R,N);if(this.curves.length>0){var ee=ie.getPoint(0);ee.equals(this.currentPoint)||this.lineTo(ee.x,ee.y)}this.curves.push(ie);var fe=ie.getPoint(1);this.currentPoint.copy(fe)}});function Gu(){ss.apply(this,arguments),this.holes=[]}function ss(a){Jg.call(this),this.currentPoint=new Xi,a&&this.fromPoints(a)}function mp(){this.subPaths=[],this.currentPath=null}function em(a){this.data=a}function Kd(a){this.manager=void 0!==a?a:dc}Gu.prototype=Object.assign(Object.create(gp),{constructor:Gu,getPointsHoles:function(a){for(var h=[],g=0,y=this.holes.length;g<y;g++)h[g]=this.holes[g].getPoints(a);return h},extractAllPoints:function(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}},extractPoints:function(a){return this.extractAllPoints(a)}}),ss.prototype=gp,gp.constructor=ss,mp.prototype={moveTo:function(a,h){this.currentPath=new ss,this.subPaths.push(this.currentPath),this.currentPath.moveTo(a,h)},lineTo:function(a,h){this.currentPath.lineTo(a,h)},quadraticCurveTo:function(a,h,g,y){this.currentPath.quadraticCurveTo(a,h,g,y)},bezierCurveTo:function(a,h,g,y,A,T){this.currentPath.bezierCurveTo(a,h,g,y,A,T)},splineThru:function(a){this.currentPath.splineThru(a)},toShapes:function(a,h){function g(Wn){for(var ei=[],Ii=0,_i=Wn.length;Ii<_i;Ii++){var fi=Wn[Ii],nr=new Gu;nr.curves=fi.curves,ei.push(nr)}return ei}function y(Wn,ei){for(var Ii=ei.length,_i=!1,fi=Ii-1,nr=0;nr<Ii;fi=nr++){var zi=ei[fi],qn=ei[nr],Hn=qn.x-zi.x,f=qn.y-zi.y;if(Math.abs(f)>Number.EPSILON){if(f<0&&(zi=ei[nr],Hn=-Hn,qn=ei[fi],f=-f),Wn.y<zi.y||Wn.y>qn.y)continue;if(Wn.y===zi.y){if(Wn.x===zi.x)return!0}else{var c=f*(Wn.x-zi.x)-Hn*(Wn.y-zi.y);if(0===c)return!0;if(c<0)continue;_i=!_i}}else{if(Wn.y!==zi.y)continue;if(qn.x<=Wn.x&&Wn.x<=zi.x||zi.x<=Wn.x&&Wn.x<=qn.x)return!0}}return _i}var A=Da.isClockWise,T=this.subPaths;if(0===T.length)return[];if(!0===h)return g(T);var R,N,ie,ee=[];if(1===T.length)return N=T[0],(ie=new Gu).curves=N.curves,ee.push(ie),ee;var fe=!A(T[0].getPoints());fe=a?!fe:fe;var nt,me=[],Le=[],ke=[],Fe=0;Le[Fe]=void 0,ke[Fe]=[];for(var tt=0,Ke=T.length;tt<Ke;tt++)R=A(nt=(N=T[tt]).getPoints()),(R=a?!R:R)?(!fe&&Le[Fe]&&Fe++,Le[Fe]={s:new Gu,p:nt},Le[Fe].s.curves=N.curves,fe&&Fe++,ke[Fe]=[]):ke[Fe].push({h:N,p:nt[0]});if(!Le[0])return g(T);if(Le.length>1){for(var pt=!1,vt=[],Xt=0,Bt=Le.length;Xt<Bt;Xt++)me[Xt]=[];for(Xt=0,Bt=Le.length;Xt<Bt;Xt++)for(var cn=ke[Xt],sn=0;sn<cn.length;sn++){for(var en=cn[sn],hn=!0,On=0;On<Le.length;On++)y(en.p,Le[On].p)&&(Xt!==On&&vt.push({froms:Xt,tos:On,hole:sn}),hn?(hn=!1,me[On].push(en)):pt=!0);hn&&me[Xt].push(en)}vt.length>0&&(pt||(ke=me))}tt=0;for(var Ai,ui=Le.length;tt<ui;tt++){ee.push(ie=Le[tt].s);for(var jt=0,qt=(Ai=ke[tt]).length;jt<qt;jt++)ie.holes.push(Ai[jt].h)}return ee}},Object.assign(em.prototype,{isFont:!0,generateShapes:function(a,h,g){function A(fe,me,Le){var ke=T.glyphs[fe]||T.glyphs["?"];if(ke){var pt,vt,Xt,Bt,cn,sn,en,hn,On,Ai,ui,Fe=new mp,nt=[],tt=Da.b2,Ke=Da.b3;if(ke.o)for(var jt=ke._cachedOutline||(ke._cachedOutline=ke.o.split(" ")),qt=0,Wn=jt.length;qt<Wn;)switch(jt[qt++]){case"m":pt=jt[qt++]*me+Le,vt=jt[qt++]*me,Fe.moveTo(pt,vt);break;case"l":pt=jt[qt++]*me+Le,vt=jt[qt++]*me,Fe.lineTo(pt,vt);break;case"q":if(Xt=jt[qt++]*me+Le,Bt=jt[qt++]*me,en=jt[qt++]*me+Le,hn=jt[qt++]*me,Fe.quadraticCurveTo(en,hn,Xt,Bt),ui=nt[nt.length-1]){cn=ui.x,sn=ui.y;for(var Ii=1;Ii<=g;Ii++)tt(_i=Ii/g,cn,en,Xt),tt(_i,sn,hn,Bt)}break;case"b":if(Xt=jt[qt++]*me+Le,Bt=jt[qt++]*me,en=jt[qt++]*me+Le,hn=jt[qt++]*me,On=jt[qt++]*me+Le,Ai=jt[qt++]*me,Fe.bezierCurveTo(en,hn,On,Ai,Xt,Bt),ui=nt[nt.length-1])for(cn=ui.x,sn=ui.y,Ii=1;Ii<=g;Ii++){var _i;Ke(_i=Ii/g,cn,en,On,Xt),Ke(_i,sn,hn,Ai,Bt)}}return{offset:ke.ha*me,path:Fe}}}void 0===h&&(h=100),void 0===g&&(g=4);for(var T=this.data,R=function y(fe){for(var me=String(fe).split(""),Le=h/T.resolution,ke=0,Fe=[],nt=0;nt<me.length;nt++){var tt=A(me[nt],Le,ke);ke+=tt.offset,Fe.push(tt.path)}return Fe}(a),N=[],ie=0,ee=R.length;ie<ee;ie++)Array.prototype.push.apply(N,R[ie].toShapes());return N}}),Object.assign(Kd.prototype,{load:function(a,h,g,y){var A=this;new Io(this.manager).load(a,function(R){var N;try{N=JSON.parse(R)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),N=JSON.parse(R.substring(65,R.length-2))}var ie=A.parse(N);h&&h(ie)},g,y)},parse:function(a){return new em(a)}});var Df,vp={getContext:function(){return void 0===Df&&(Df=new(window.AudioContext||window.webkitAudioContext)),Df},setContext:function(a){Df=a}};function eg(a){this.manager=void 0!==a?a:dc}function Ra(a,h,g,y){Js.call(this,a,h),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==g?g:10,this.height=void 0!==y?y:10}function Nm(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new wl,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new wl,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Ul(a,h,g){_r.call(this),this.type="CubeCamera";var y=90,T=new wl(y,1,a,h);T.up.set(0,-1,0),T.lookAt(new Zt(1,0,0)),this.add(T);var R=new wl(y,1,a,h);R.up.set(0,-1,0),R.lookAt(new Zt(-1,0,0)),this.add(R);var N=new wl(y,1,a,h);N.up.set(0,0,1),N.lookAt(new Zt(0,1,0)),this.add(N);var ie=new wl(y,1,a,h);ie.up.set(0,0,-1),ie.lookAt(new Zt(0,-1,0)),this.add(ie);var ee=new wl(y,1,a,h);ee.up.set(0,-1,0),ee.lookAt(new Zt(0,0,1)),this.add(ee);var fe=new wl(y,1,a,h);fe.up.set(0,-1,0),fe.lookAt(new Zt(0,0,-1)),this.add(fe),this.renderTarget=new id(g,g,{format:wc,magFilter:Aa,minFilter:Aa}),this.updateCubeMap=function(Le,ke){null===this.parent&&this.updateMatrixWorld();var Fe=this.renderTarget,nt=Fe.texture.generateMipmaps;Fe.texture.generateMipmaps=!1,Fe.activeCubeFace=0,Le.render(ke,T,Fe),Fe.activeCubeFace=1,Le.render(ke,R,Fe),Fe.activeCubeFace=2,Le.render(ke,N,Fe),Fe.activeCubeFace=3,Le.render(ke,ie,Fe),Fe.activeCubeFace=4,Le.render(ke,ee,Fe),Fe.texture.generateMipmaps=nt,Fe.activeCubeFace=5,Le.render(ke,fe,Fe),Le.setRenderTarget(null)}}function Bm(){_r.call(this),this.type="AudioListener",this.context=vp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function mh(a){_r.call(this),this.type="Audio",this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function tg(a){mh.call(this,a),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function zm(a,h){this.analyser=a.context.createAnalyser(),this.analyser.fftSize=void 0!==h?h:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),a.getOutput().connect(this.analyser)}function kc(a,h,g){this.binding=a,this.valueSize=g;var A,y=Float64Array;switch(h){case"quaternion":A=this._slerp;break;case"string":case"bool":y=Array,A=this._select;break;default:A=this._lerp}this.buffer=new y(4*g),this._mixBufferRegion=A,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function ka(a,h,g){this.path=h,this.parsedPath=g||ka.parseTrackName(h),this.node=ka.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a}function gc(a){this.uuid=xs.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var h={};this._indicesByUUID=h;for(var g=0,y=arguments.length;g!==y;++g)h[arguments[g].uuid]=g;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var A=this;this.stats={objects:{get total(){return A._objects.length},get inUse(){return this.total-A.nCachedObjects_}},get bindingsPerObject(){return A._bindings.length}}}function mc(a,h,g){this._mixer=a,this._clip=h,this._localRoot=g||null;for(var y=h.tracks,A=y.length,T=new Array(A),R={endingStart:cs,endingEnd:cs},N=0;N!==A;++N){var ie=y[N].createInterpolant(null);T[N]=ie,ie.settings=R}this._interpolantSettings=R,this._interpolants=T,this._propertyBindings=new Array(A),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=dr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ng(a){this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Vm(a){"string"==typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=arguments[1]),this.value=a}function Wu(){Er.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Lf(a,h,g,y){this.uuid=xs.generateUUID(),this.data=a,this.itemSize=h,this.offset=g,this.normalized=!0===y}function pd(a,h){this.uuid=xs.generateUUID(),this.array=a,this.stride=h,this.count=void 0!==a?a.length/h:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function vh(a,h,g){pd.call(this,a,h),this.meshPerAttribute=g||1}function Zd(a,h,g){fr.call(this,a,h),this.meshPerAttribute=g||1}function tu(a,h,g,y){this.ray=new ia(a,h),this.near=g||0,this.far=y||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function gd(a,h){return a.distance-h.distance}function yp(a,h,g,y){if(!1!==a.visible&&(a.raycast(h,g),!0===y))for(var A=a.children,T=0,R=A.length;T<R;T++)yp(A[T],h,g,!0)}function Um(a){this.autoStart=void 0===a||a,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function H_(a){this.points=a;var y,A,T,R,N,ie,ee,fe,me,h=[],g={x:0,y:0,z:0};function Le(ke,Fe,nt,tt,Ke,pt,vt){var Xt=.5*(nt-ke),Bt=.5*(tt-Fe);return(2*(Fe-nt)+Xt+Bt)*vt+(-3*(Fe-nt)-2*Xt-Bt)*pt+Xt*Ke+Fe}this.initFromArray=function(ke){this.points=[];for(var Fe=0;Fe<ke.length;Fe++)this.points[Fe]={x:ke[Fe][0],y:ke[Fe][1],z:ke[Fe][2]}},this.getPoint=function(ke){return y=(this.points.length-1)*ke,A=Math.floor(y),T=y-A,h[0]=0===A?A:A-1,h[1]=A,h[2]=A>this.points.length-2?this.points.length-1:A+1,h[3]=A>this.points.length-3?this.points.length-1:A+2,g.x=Le((ie=this.points[h[0]]).x,(ee=this.points[h[1]]).x,(fe=this.points[h[2]]).x,(me=this.points[h[3]]).x,T,R=T*T,N=T*R),g.y=Le(ie.y,ee.y,fe.y,me.y,T,R,N),g.z=Le(ie.z,ee.z,fe.z,me.z,T,R,N),g},this.getControlPointsArray=function(){var ke,Fe,nt=this.points.length,tt=[];for(ke=0;ke<nt;ke++)tt[ke]=[(Fe=this.points[ke]).x,Fe.y,Fe.z];return tt},this.getLength=function(ke){var Fe,nt,tt,Ke,vt=0,Xt=0,Bt=new Zt,cn=new Zt,sn=[],en=0;for(sn[0]=0,ke||(ke=100),tt=this.points.length*ke,Bt.copy(this.points[0]),Fe=1;Fe<tt;Fe++)Ke=this.getPoint(nt=Fe/tt),cn.copy(Ke),en+=cn.distanceTo(Bt),Bt.copy(Ke),(vt=Math.floor((this.points.length-1)*nt))!==Xt&&(sn[vt]=en,Xt=vt);return sn[sn.length]=en,{chunks:sn,total:en}},this.reparametrizeByArcLength=function(ke){var Fe,nt,Ke,pt,Xt,Bt,cn=[],sn=new Zt,en=this.getLength();for(cn.push(sn.copy(this.points[0]).clone()),Fe=1;Fe<this.points.length;Fe++){for(Xt=Math.ceil(ke*(en.chunks[Fe]-en.chunks[Fe-1])/en.total),Ke=(Fe-1)/(this.points.length-1),pt=Fe/(this.points.length-1),nt=1;nt<Xt-1;nt++)Bt=this.getPoint(Ke+nt*(1/Xt)*(pt-Ke)),cn.push(sn.copy(Bt).clone());cn.push(sn.copy(this.points[Fe]).clone())}this.points=cn}}function tm(a,h,g){return this.radius=void 0!==a?a:1,this.phi=void 0!==h?h:0,this.theta=void 0!==g?g:0,this}function yl(a,h,g){return this.radius=void 0!==a?a:1,this.theta=void 0!==h?h:0,this.y=void 0!==g?g:0,this}function aa(a,h){ba.call(this,a,h),this.animationsMap={},this.animationsList=[];var g=this.geometry.morphTargets.length,y="__default";this.createAnimation(y,0,g-1,g/1),this.setAnimationWeight(y,1)}function Pf(a){_r.call(this),this.material=a,this.render=function(h){}}function ig(a,h,g,y){this.object=a,this.size=void 0!==h?h:1;var A=void 0!==g?g:16711680,T=void 0!==y?y:1,R=0,N=this.object.geometry;N&&N.isGeometry?R=3*N.faces.length:N&&N.isBufferGeometry&&(R=N.attributes.normal.count);var ie=new Er,ee=new rs(2*R*3,3);ie.addAttribute("position",ee),vo.call(this,ie,new al({color:A,linewidth:T})),this.matrixAutoUpdate=!1,this.update()}function Gh(a){_r.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;for(var h=new Er,g=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],y=0,A=1;y<32;y++,A++){var R=y/32*Math.PI*2,N=A/32*Math.PI*2;g.push(Math.cos(R),Math.sin(R),1,Math.cos(N),Math.sin(N),1)}h.addAttribute("position",new rs(g,3));var ie=new al({fog:!1});this.cone=new vo(h,ie),this.add(this.cone),this.update()}function Wh(a){this.bones=this.getBoneList(a);for(var h=new Er,g=[],y=[],A=new jr(0,0,1),T=new jr(0,1,0),R=0;R<this.bones.length;R++){var N=this.bones[R];N.parent&&N.parent.isBone&&(g.push(0,0,0),g.push(0,0,0),y.push(A.r,A.g,A.b),y.push(T.r,T.g,T.b))}h.addAttribute("position",new rs(g,3)),h.addAttribute("color",new rs(y,3));var ie=new al({vertexColors:z,depthTest:!1,depthWrite:!1,transparent:!0});vo.call(this,h,ie),this.root=a,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function md(a,h){this.light=a,this.light.updateMatrixWorld();var g=new oa(h,4,2),y=new Ba({wireframe:!0,fog:!1});y.color.copy(this.light.color).multiplyScalar(this.light.intensity),ba.call(this,g,y),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Qd(a){_r.call(this),this.light=a,this.light.updateMatrixWorld();var h=new Ba({color:a.color,fog:!1}),g=new Ba({color:a.color,fog:!1,wireframe:!0}),y=new Er;y.addAttribute("position",new fr(new Float32Array(18),3)),this.add(new ba(y,h)),this.add(new ba(y,g)),this.update()}function vd(a,h){_r.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1;var g=new Qc(h);g.rotateY(.5*Math.PI);var y=new Ba({vertexColors:z,wireframe:!0}),A=g.getAttribute("position"),T=new Float32Array(3*A.count);g.addAttribute("color",new fr(T,3)),this.add(new ba(g,y)),this.update()}function rg(a,h,g,y){a=a||10,h=h||10,g=new jr(void 0!==g?g:4473924),y=new jr(void 0!==y?y:8947848);for(var A=h/2,T=2*a/h,R=[],N=[],ie=0,ee=0,fe=-a;ie<=h;ie++,fe+=T){R.push(-a,0,fe,a,0,fe),R.push(fe,0,-a,fe,0,a);var me=ie===A?g:y;me.toArray(N,ee),me.toArray(N,ee+=3),me.toArray(N,ee+=3),me.toArray(N,ee+=3),ee+=3}var Le=new Er;Le.addAttribute("position",new rs(R,3)),Le.addAttribute("color",new rs(N,3));var ke=new al({vertexColors:z});vo.call(this,Le,ke)}function ju(a,h,g,y,A,T){a=a||10,h=h||16,g=g||8,y=y||64,A=new jr(void 0!==A?A:4473924),T=new jr(void 0!==T?T:8947848);var ie,ee,fe,me,Le,ke,Fe,R=[],N=[];for(me=0;me<=h;me++)fe=me/h*(2*Math.PI),ie=Math.sin(fe)*a,ee=Math.cos(fe)*a,R.push(0,0,0),R.push(ie,0,ee),N.push((Fe=1&me?A:T).r,Fe.g,Fe.b),N.push(Fe.r,Fe.g,Fe.b);for(me=0;me<=g;me++)for(Fe=1&me?A:T,ke=a-a/g*me,Le=0;Le<y;Le++)fe=Le/y*(2*Math.PI),ie=Math.sin(fe)*ke,ee=Math.cos(fe)*ke,R.push(ie,0,ee),N.push(Fe.r,Fe.g,Fe.b),fe=(Le+1)/y*(2*Math.PI),ie=Math.sin(fe)*ke,ee=Math.cos(fe)*ke,R.push(ie,0,ee),N.push(Fe.r,Fe.g,Fe.b);var nt=new Er;nt.addAttribute("position",new rs(R,3)),nt.addAttribute("color",new rs(N,3));var tt=new al({vertexColors:z});vo.call(this,nt,tt)}function jh(a,h,g,y){this.object=a,this.size=void 0!==h?h:1;var A=void 0!==g?g:16776960,T=void 0!==y?y:1,R=0,N=this.object.geometry;N&&N.isGeometry?R=N.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var ie=new Er,ee=new rs(2*R*3,3);ie.addAttribute("position",ee),vo.call(this,ie,new al({color:A,linewidth:T})),this.matrixAutoUpdate=!1,this.update()}function sg(a,h){_r.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,void 0===h&&(h=1);var g=new Er;g.addAttribute("position",new rs([-h,h,0,h,h,0,h,-h,0,-h,-h,0,-h,h,0],3));var y=new al({fog:!1});this.add(new mu(g,y)),(g=new Er).addAttribute("position",new rs([0,0,0,0,0,1],3)),this.add(new mu(g,y)),this.update()}function nm(a){var h=new Er,g=new al({color:16777215,vertexColors:ue}),y=[],A=[],T={},R=new jr(16755200),N=new jr(16711680),ie=new jr(43775),ee=new jr(16777215),fe=new jr(3355443);function me(ke,Fe,nt){Le(ke,nt),Le(Fe,nt)}function Le(ke,Fe){y.push(0,0,0),A.push(Fe.r,Fe.g,Fe.b),void 0===T[ke]&&(T[ke]=[]),T[ke].push(y.length/3-1)}me("n1","n2",R),me("n2","n4",R),me("n4","n3",R),me("n3","n1",R),me("f1","f2",R),me("f2","f4",R),me("f4","f3",R),me("f3","f1",R),me("n1","f1",R),me("n2","f2",R),me("n3","f3",R),me("n4","f4",R),me("p","n1",N),me("p","n2",N),me("p","n3",N),me("p","n4",N),me("u1","u2",ie),me("u2","u3",ie),me("u3","u1",ie),me("c","t",ee),me("p","c",fe),me("cn1","cn2",fe),me("cn3","cn4",fe),me("cf1","cf2",fe),me("cf3","cf4",fe),h.addAttribute("position",new rs(y,3)),h.addAttribute("color",new rs(A,3)),vo.call(this,h,g),this.camera=a,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=T,this.update()}function og(a,h){void 0===h&&(h=16776960);var g=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=new Float32Array(24),A=new Er;A.setIndex(new fr(g,1)),A.addAttribute("position",new fr(y,3)),vo.call(this,A,new al({color:h})),void 0!==a&&this.update(a)}Object.assign(eg.prototype,{load:function(a,h,g,y){var A=new Io(this.manager);A.setResponseType("arraybuffer"),A.load(a,function(T){vp.getContext().decodeAudioData(T,function(N){h(N)})},g,y)}}),Ra.prototype=Object.assign(Object.create(Js.prototype),{constructor:Ra,isRectAreaLight:!0,copy:function(a){return Js.prototype.copy.call(this,a),this.width=a.width,this.height=a.height,this}}),Object.assign(Nm.prototype,{update:function(){var a,h,g,y,A,T,R,N=new ms,ie=new ms;return function(fe){if(a!==this||h!==fe.focus||g!==fe.fov||y!==fe.aspect*this.aspect||A!==fe.near||T!==fe.far||R!==fe.zoom){a=this,h=fe.focus,g=fe.fov,y=fe.aspect*this.aspect,A=fe.near,T=fe.far,R=fe.zoom;var tt,Ke,Le=fe.projectionMatrix.clone(),ke=this.eyeSep/2,Fe=ke*A/h,nt=A*Math.tan(xs.DEG2RAD*g*.5)/R;ie.elements[12]=-ke,N.elements[12]=ke,Le.elements[0]=2*A/((Ke=nt*y+Fe)-(tt=-nt*y+Fe)),Le.elements[8]=(Ke+tt)/(Ke-tt),this.cameraL.projectionMatrix.copy(Le),Le.elements[0]=2*A/((Ke=nt*y-Fe)-(tt=-nt*y-Fe)),Le.elements[8]=(Ke+tt)/(Ke-tt),this.cameraR.projectionMatrix.copy(Le)}this.cameraL.matrixWorld.copy(fe.matrixWorld).multiply(ie),this.cameraR.matrixWorld.copy(fe.matrixWorld).multiply(N)}}()}),(Ul.prototype=Object.create(_r.prototype)).constructor=Ul,Bm.prototype=Object.assign(Object.create(_r.prototype),{constructor:Bm,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(a){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=a,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(a){this.gain.gain.value=a},updateMatrixWorld:function(){var a=new Zt,h=new kl,g=new Zt,y=new Zt;return function(T){_r.prototype.updateMatrixWorld.call(this,T);var R=this.context.listener,N=this.up;this.matrixWorld.decompose(a,h,g),y.set(0,0,-1).applyQuaternion(h),R.positionX?(R.positionX.setValueAtTime(a.x,this.context.currentTime),R.positionY.setValueAtTime(a.y,this.context.currentTime),R.positionZ.setValueAtTime(a.z,this.context.currentTime),R.forwardX.setValueAtTime(y.x,this.context.currentTime),R.forwardY.setValueAtTime(y.y,this.context.currentTime),R.forwardZ.setValueAtTime(y.z,this.context.currentTime),R.upX.setValueAtTime(N.x,this.context.currentTime),R.upY.setValueAtTime(N.y,this.context.currentTime),R.upZ.setValueAtTime(N.z,this.context.currentTime)):(R.setPosition(a.x,a.y,a.z),R.setOrientation(y.x,y.y,y.z,N.x,N.y,N.z))}}()}),mh.prototype=Object.assign(Object.create(_r.prototype),{constructor:mh,getOutput:function(){return this.gain},setNodeSource:function(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this},setBuffer:function(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.onended=this.onEnded.bind(this),a.playbackRate.setValueAtTime(this.playbackRate,this.startTime),a.start(0,this.startTime),this.isPlaying=!0,this.source=a,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var a=1,h=this.filters.length;a<h;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var a=1,h=this.filters.length;a<h;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(a){return a||(a=[]),!0===this.isPlaying?(this.disconnect(),this.filters=a,this.connect()):this.filters=a,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(a){return this.setFilters(a?[a]:[])},setPlaybackRate:function(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(a){return this.gain.gain.value=a,this}}),tg.prototype=Object.assign(Object.create(mh.prototype),{constructor:tg,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(a){this.panner.refDistance=a},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(a){this.panner.rolloffFactor=a},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(a){this.panner.distanceModel=a},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(a){this.panner.maxDistance=a},updateMatrixWorld:function(){var a=new Zt;return function(g){_r.prototype.updateMatrixWorld.call(this,g),a.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(a.x,a.y,a.z)}}()}),Object.assign(zm.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var a=0,h=this.getFrequencyData(),g=0;g<h.length;g++)a+=h[g];return a/h.length}}),kc.prototype={constructor:kc,accumulate:function(a,h){var g=this.buffer,y=this.valueSize,A=a*y+y,T=this.cumulativeWeight;if(0===T){for(var R=0;R!==y;++R)g[A+R]=g[R];T=h}else this._mixBufferRegion(g,A,0,h/(T+=h),y);this.cumulativeWeight=T},apply:function(a){var h=this.valueSize,g=this.buffer,y=a*h+h,A=this.cumulativeWeight,T=this.binding;this.cumulativeWeight=0,A<1&&this._mixBufferRegion(g,y,3*h,1-A,h);for(var N=h,ie=h+h;N!==ie;++N)if(g[N]!==g[N+h]){T.setValue(g,y);break}},saveOriginalState:function(){var h=this.buffer,g=this.valueSize,y=3*g;this.binding.getValue(h,y);for(var A=g,T=y;A!==T;++A)h[A]=h[y+A%g];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(a,h,g,y,A){if(y>=.5)for(var T=0;T!==A;++T)a[h+T]=a[g+T]},_slerp:function(a,h,g,y,A){kl.slerpFlat(a,h,a,h,a,g,y)},_lerp:function(a,h,g,y,A){for(var T=1-y,R=0;R!==A;++R){var N=h+R;a[N]=a[N]*T+a[g+R]*y}}},ka.prototype={constructor:ka,getValue:function(h,g){this.bind(),this.getValue(h,g)},setValue:function(h,g){this.bind(),this.setValue(h,g)},bind:function(){var a=this.node,h=this.parsedPath,g=h.objectName,y=h.propertyName,A=h.propertyIndex;if(a||(a=ka.findNode(this.rootNode,h.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,a){if(g){var T=h.objectIndex;switch(g){case"materials":if(!a.material)return void console.error("  can not bind to material as node does not have a material",this);if(!a.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);a=a.material.materials;break;case"bones":if(!a.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);a=a.skeleton.bones;for(var R=0;R<a.length;R++)if(a[R].name===T){T=R;break}break;default:if(void 0===a[g])return void console.error("  can not bind to objectName of node, undefined",this);a=a[g]}if(void 0!==T){if(void 0===a[T])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,a);a=a[T]}}var N=a[y];if(void 0!==N){var ee=this.Versioning.None;void 0!==a.needsUpdate?(ee=this.Versioning.NeedsUpdate,this.targetObject=a):void 0!==a.matrixWorldNeedsUpdate&&(ee=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=a);var fe=this.BindingType.Direct;if(void 0!==A){if("morphTargetInfluences"===y){if(!a.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!a.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(R=0;R<this.node.geometry.morphTargets.length;R++)if(a.geometry.morphTargets[R].name===A){A=R;break}}fe=this.BindingType.ArrayElement,this.resolvedProperty=N,this.propertyIndex=A}else void 0!==N.fromArray&&void 0!==N.toArray?(fe=this.BindingType.HasFromToArray,this.resolvedProperty=N):void 0!==N.length?(fe=this.BindingType.EntireArray,this.resolvedProperty=N):this.propertyName=y;this.getValue=this.GetterByBindingType[fe],this.setValue=this.SetterByBindingTypeAndVersioning[fe][ee]}else console.error("  trying to update property for track: "+h.nodeName+"."+y+" but it wasn't found.",a)}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(ka.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:ka.prototype.getValue,_setValue_unbound:ka.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(h,g){h[g]=this.node[this.propertyName]},function(h,g){for(var y=this.resolvedProperty,A=0,T=y.length;A!==T;++A)h[g++]=y[A]},function(h,g){h[g]=this.resolvedProperty[this.propertyIndex]},function(h,g){this.resolvedProperty.toArray(h,g)}],SetterByBindingTypeAndVersioning:[[function(h,g){this.node[this.propertyName]=h[g]},function(h,g){this.node[this.propertyName]=h[g],this.targetObject.needsUpdate=!0},function(h,g){this.node[this.propertyName]=h[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(h,g){for(var y=this.resolvedProperty,A=0,T=y.length;A!==T;++A)y[A]=h[g++]},function(h,g){for(var y=this.resolvedProperty,A=0,T=y.length;A!==T;++A)y[A]=h[g++];this.targetObject.needsUpdate=!0},function(h,g){for(var y=this.resolvedProperty,A=0,T=y.length;A!==T;++A)y[A]=h[g++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(h,g){this.resolvedProperty[this.propertyIndex]=h[g]},function(h,g){this.resolvedProperty[this.propertyIndex]=h[g],this.targetObject.needsUpdate=!0},function(h,g){this.resolvedProperty[this.propertyIndex]=h[g],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(h,g){this.resolvedProperty.fromArray(h,g)},function(h,g){this.resolvedProperty.fromArray(h,g),this.targetObject.needsUpdate=!0},function(h,g){this.resolvedProperty.fromArray(h,g),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),(ka.Composite=function(a,h,g){var y=g||ka.parseTrackName(h);this._targetGroup=a,this._bindings=a.subscribe_(h,y)}).prototype={constructor:ka.Composite,getValue:function(a,h){this.bind();var y=this._bindings[this._targetGroup.nCachedObjects_];void 0!==y&&y.getValue(a,h)},setValue:function(a,h){for(var g=this._bindings,y=this._targetGroup.nCachedObjects_,A=g.length;y!==A;++y)g[y].setValue(a,h)},bind:function(){for(var a=this._bindings,h=this._targetGroup.nCachedObjects_,g=a.length;h!==g;++h)a[h].bind()},unbind:function(){for(var a=this._bindings,h=this._targetGroup.nCachedObjects_,g=a.length;h!==g;++h)a[h].unbind()}},ka.create=function(a,h,g){return a&&a.isAnimationObjectGroup?new ka.Composite(a,h,g):new ka(a,h,g)},ka.parseTrackName=function(a){var g=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(a);if(!g)throw new Error("cannot parse trackName at all: "+a);var y={nodeName:g[2],objectName:g[3],objectIndex:g[4],propertyName:g[5],propertyIndex:g[6]};if(null===y.propertyName||0===y.propertyName.length)throw new Error("can not parse propertyName from trackName: "+a);return y},ka.findNode=function(a,h){if(!h||""===h||"root"===h||"."===h||-1===h||h===a.name||h===a.uuid)return a;if(a.skeleton){var y=function(R){for(var N=0;N<R.bones.length;N++){var ie=R.bones[N];if(ie.name===h)return ie}return null}(a.skeleton);if(y)return y}if(a.children){var A=function(R){for(var N=0;N<R.length;N++){var ie=R[N];if(ie.name===h||ie.uuid===h)return ie;var ee=A(ie.children);if(ee)return ee}return null},T=A(a.children);if(T)return T}return null},gc.prototype={constructor:gc,isAnimationObjectGroup:!0,add:function(a){for(var h=this._objects,g=h.length,y=this.nCachedObjects_,A=this._indicesByUUID,T=this._paths,R=this._parsedPaths,N=this._bindings,ie=N.length,ee=0,fe=arguments.length;ee!==fe;++ee){var me=arguments[ee],Le=me.uuid,ke=A[Le],Fe=void 0;if(void 0===ke){ke=g++,A[Le]=ke,h.push(me);for(var nt=0,tt=ie;nt!==tt;++nt)N[nt].push(new ka(me,T[nt],R[nt]))}else if(ke<y){Fe=h[ke];var Ke=--y,pt=h[Ke];for(A[pt.uuid]=ke,h[ke]=pt,A[Le]=Ke,h[Ke]=me,nt=0,tt=ie;nt!==tt;++nt){var vt=N[nt],Xt=vt[Ke],Bt=vt[ke];vt[ke]=Xt,void 0===Bt&&(Bt=new ka(me,T[nt],R[nt])),vt[Ke]=Bt}}else h[ke]!==Fe&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=y},remove:function(a){for(var h=this._objects,g=this.nCachedObjects_,y=this._indicesByUUID,A=this._bindings,T=A.length,R=0,N=arguments.length;R!==N;++R){var ie=arguments[R],ee=ie.uuid,fe=y[ee];if(void 0!==fe&&fe>=g){var me=g++,Le=h[me];y[Le.uuid]=fe,h[fe]=Le,y[ee]=me,h[me]=ie;for(var ke=0,Fe=T;ke!==Fe;++ke){var nt=A[ke],tt=nt[me],Ke=nt[fe];nt[fe]=tt,nt[me]=Ke}}}this.nCachedObjects_=g},uncache:function(a){for(var h=this._objects,g=h.length,y=this.nCachedObjects_,A=this._indicesByUUID,T=this._bindings,R=T.length,N=0,ie=arguments.length;N!==ie;++N){var ee=arguments[N],fe=ee.uuid,me=A[fe];if(void 0!==me)if(delete A[fe],me<y){var Le=--y,ke=h[Le],nt=h[Fe=--g];A[ke.uuid]=me,h[me]=ke,A[nt.uuid]=Le,h[Le]=nt,h.pop();for(var tt=0,Ke=R;tt!==Ke;++tt){var vt=(pt=T[tt])[Le],Xt=pt[Fe];pt[me]=vt,pt[Le]=Xt,pt.pop()}}else{var Fe;for(A[(nt=h[Fe=--g]).uuid]=me,h[me]=nt,h.pop(),tt=0,Ke=R;tt!==Ke;++tt){var pt;(pt=T[tt])[me]=pt[Fe],pt.pop()}}}this.nCachedObjects_=y},subscribe_:function(a,h){var g=this._bindingsIndicesByPath,y=g[a],A=this._bindings;if(void 0!==y)return A[y];var T=this._paths,R=this._parsedPaths,N=this._objects,ee=this.nCachedObjects_,fe=new Array(N.length);g[a]=y=A.length,T.push(a),R.push(h),A.push(fe);for(var me=ee,Le=N.length;me!==Le;++me)fe[me]=new ka(N[me],a,h);return fe},unsubscribe_:function(a){var h=this._bindingsIndicesByPath,g=h[a];if(void 0!==g){var y=this._paths,A=this._parsedPaths,T=this._bindings,R=T.length-1,N=T[R];h[a[R]]=g,T[g]=N,T.pop(),A[g]=A[R],A.pop(),y[g]=y[R],y.pop()}}},mc.prototype={constructor:mc,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(a){return this._startTime=a,this},setLoop:function(a,h){return this.loop=a,this.repetitions=h,this},setEffectiveWeight:function(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(a){return this._scheduleFading(a,0,1)},fadeOut:function(a){return this._scheduleFading(a,1,0)},crossFadeFrom:function(a,h,g){if(a.fadeOut(h),this.fadeIn(h),g){var y=this._clip.duration,A=a._clip.duration,R=y/A;a.warp(1,A/y,h),this.warp(R,1,h)}return this},crossFadeTo:function(a,h,g){return a.crossFadeFrom(this,h,g)},stopFading:function(){var a=this._weightInterpolant;return null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},setEffectiveTimeScale:function(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(a){return this.timeScale=this._clip.duration/a,this.stopWarping()},syncWith:function(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()},halt:function(a){return this.warp(this._effectiveTimeScale,0,a)},warp:function(a,h,g){var y=this._mixer,A=y.time,T=this._timeScaleInterpolant,R=this.timeScale;null===T&&(T=y._lendControlInterpolant(),this._timeScaleInterpolant=T);var N=T.parameterPositions,ie=T.sampleValues;return N[0]=A,N[1]=A+g,ie[0]=a/R,ie[1]=h/R,this},stopWarping:function(){var a=this._timeScaleInterpolant;return null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(a,h,g,y){var A=this._startTime;if(null!==A){var T=(a-A)*g;if(T<0||0===g)return;this._startTime=null,h=g*T}h*=this._updateTimeScale(a);var R=this._updateTime(h),N=this._updateWeight(a);if(N>0)for(var ie=this._interpolants,ee=this._propertyBindings,fe=0,me=ie.length;fe!==me;++fe)ie[fe].evaluate(R),ee[fe].accumulate(y,N)},_updateWeight:function(a){var h=0;if(this.enabled){h=this.weight;var g=this._weightInterpolant;if(null!==g){var y=g.evaluate(a)[0];h*=y,a>g.parameterPositions[1]&&(this.stopFading(),0===y&&(this.enabled=!1))}}return this._effectiveWeight=h,h},_updateTimeScale:function(a){var h=0;if(!this.paused){h=this.timeScale;var g=this._timeScaleInterpolant;null!==g&&(h*=g.evaluate(a)[0],a>g.parameterPositions[1]&&(this.stopWarping(),0===h?this.paused=!0:this.timeScale=h))}return this._effectiveTimeScale=h,h},_updateTime:function(a){var h=this.time+a;if(0===a)return h;var g=this._clip.duration,y=this.loop,A=this._loopCount;if(y===mr){-1===A&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(h>=g)h=g;else{if(!(h<0))break e;h=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:a<0?-1:1})}}else{var T=y===sr;if(-1===A&&(a>=0?(A=0,this._setEndings(!0,0===this.repetitions,T)):this._setEndings(0===this.repetitions,!0,T)),h>=g||h<0){var R=Math.floor(h/g);h-=g*R,A+=Math.abs(R);var N=this.repetitions-A;if(N<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,h=a>0?g:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(0===N){var ie=a<0;this._setEndings(ie,!ie,T)}else this._setEndings(!1,!1,T);this._loopCount=A,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:R})}}if(T&&1==(1&A))return this.time=h,g-h}return this.time=h,h},_setEndings:function(a,h,g){var y=this._interpolantSettings;g?(y.endingStart=Ia,y.endingEnd=Ia):(y.endingStart=a?this.zeroSlopeAtStart?Ia:cs:us,y.endingEnd=h?this.zeroSlopeAtEnd?Ia:cs:us)},_scheduleFading:function(a,h,g){var y=this._mixer,A=y.time,T=this._weightInterpolant;null===T&&(T=y._lendControlInterpolant(),this._weightInterpolant=T);var R=T.parameterPositions,N=T.sampleValues;return R[0]=A,N[0]=h,R[1]=A+a,N[1]=g,this}},Object.assign(ng.prototype,Y.prototype,{clipAction:function(a,h){var g=h||this._root,y=g.uuid,A="string"==typeof a?Tl.findByName(g,a):a,T=null!==A?A.uuid:a,R=this._actionsByClip[T],N=null;if(void 0!==R){var ie=R.actionByRoot[y];if(void 0!==ie)return ie;N=R.knownActions[0],null===A&&(A=N._clip)}if(null===A)return null;var ee=new mc(this,A,h);return this._bindAction(ee,N),this._addInactiveAction(ee,T,y),ee},existingAction:function(a,h){var g=h||this._root,y=g.uuid,A="string"==typeof a?Tl.findByName(g,a):a,R=this._actionsByClip[A?A.uuid:a];return void 0!==R&&R.actionByRoot[y]||null},stopAllAction:function(){var a=this._actions,h=this._nActiveActions,g=this._bindings,y=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var A=0;A!==h;++A)a[A].reset();for(A=0;A!==y;++A)g[A].useCount=0;return this},update:function(a){for(var h=this._actions,g=this._nActiveActions,y=this.time+=a*=this.timeScale,A=Math.sign(a),T=this._accuIndex^=1,R=0;R!==g;++R){var N=h[R];N.enabled&&N._update(y,a,A,T)}var ie=this._bindings,ee=this._nActiveBindings;for(R=0;R!==ee;++R)ie[R].apply(T);return this},getRoot:function(){return this._root},uncacheClip:function(a){var h=this._actions,g=a.uuid,y=this._actionsByClip,A=y[g];if(void 0!==A){for(var T=A.knownActions,R=0,N=T.length;R!==N;++R){var ie=T[R];this._deactivateAction(ie);var ee=ie._cacheIndex,fe=h[h.length-1];ie._cacheIndex=null,ie._byClipCacheIndex=null,fe._cacheIndex=ee,h[ee]=fe,h.pop(),this._removeInactiveBindingsForAction(ie)}delete y[g]}},uncacheRoot:function(a){var h=a.uuid,g=this._actionsByClip;for(var y in g){var T=g[y].actionByRoot[h];void 0!==T&&(this._deactivateAction(T),this._removeInactiveAction(T))}var N=this._bindingsByRootAndName[h];if(void 0!==N)for(var ie in N){var ee=N[ie];ee.restoreOriginalState(),this._removeInactiveBinding(ee)}},uncacheAction:function(a,h){var g=this.existingAction(a,h);null!==g&&(this._deactivateAction(g),this._removeInactiveAction(g))}}),Object.assign(ng.prototype,{_bindAction:function(a,h){var g=a._localRoot||this._root,y=a._clip.tracks,A=y.length,T=a._propertyBindings,R=a._interpolants,N=g.uuid,ie=this._bindingsByRootAndName,ee=ie[N];void 0===ee&&(ie[N]=ee={});for(var fe=0;fe!==A;++fe){var me=y[fe],Le=me.name,ke=ee[Le];if(void 0!==ke)T[fe]=ke;else{if(void 0!==(ke=T[fe])){null===ke._cacheIndex&&(++ke.referenceCount,this._addInactiveBinding(ke,N,Le));continue}++(ke=new kc(ka.create(g,Le,h&&h._propertyBindings[fe].binding.parsedPath),me.ValueTypeName,me.getValueSize())).referenceCount,this._addInactiveBinding(ke,N,Le),T[fe]=ke}R[fe].resultBuffer=ke.buffer}},_activateAction:function(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){var h=(a._localRoot||this._root).uuid,g=a._clip.uuid,y=this._actionsByClip[g];this._bindAction(a,y&&y.knownActions[0]),this._addInactiveAction(a,g,h)}for(var A=a._propertyBindings,T=0,R=A.length;T!==R;++T){var N=A[T];0==N.useCount++&&(this._lendBinding(N),N.saveOriginalState())}this._lendAction(a)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var h=a._propertyBindings,g=0,y=h.length;g!==y;++g){var A=h[g];0==--A.useCount&&(A.restoreOriginalState(),this._takeBackBinding(A))}this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}},_isActiveAction:function(a){var h=a._cacheIndex;return null!==h&&h<this._nActiveActions},_addInactiveAction:function(a,h,g){var y=this._actions,A=this._actionsByClip,T=A[h];if(void 0===T)T={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,A[h]=T;else{var R=T.knownActions;a._byClipCacheIndex=R.length,R.push(a)}a._cacheIndex=y.length,y.push(a),T.actionByRoot[g]=a},_removeInactiveAction:function(a){var h=this._actions,g=h[h.length-1],y=a._cacheIndex;g._cacheIndex=y,h[y]=g,h.pop(),a._cacheIndex=null;var A=a._clip.uuid,T=this._actionsByClip,R=T[A],N=R.knownActions,ie=N[N.length-1],ee=a._byClipCacheIndex;ie._byClipCacheIndex=ee,N[ee]=ie,N.pop(),a._byClipCacheIndex=null,delete R.actionByRoot[(h._localRoot||this._root).uuid],0===N.length&&delete T[A],this._removeInactiveBindingsForAction(a)},_removeInactiveBindingsForAction:function(a){for(var h=a._propertyBindings,g=0,y=h.length;g!==y;++g){var A=h[g];0==--A.referenceCount&&this._removeInactiveBinding(A)}},_lendAction:function(a){var h=this._actions,g=a._cacheIndex,y=this._nActiveActions++,A=h[y];a._cacheIndex=y,h[y]=a,A._cacheIndex=g,h[g]=A},_takeBackAction:function(a){var h=this._actions,g=a._cacheIndex,y=--this._nActiveActions,A=h[y];a._cacheIndex=y,h[y]=a,A._cacheIndex=g,h[g]=A},_addInactiveBinding:function(a,h,g){var y=this._bindingsByRootAndName,A=y[h],T=this._bindings;void 0===A&&(y[h]=A={}),A[g]=a,a._cacheIndex=T.length,T.push(a)},_removeInactiveBinding:function(a){var h=this._bindings,g=a.binding,y=g.rootNode.uuid,A=g.path,T=this._bindingsByRootAndName,R=T[y],N=h[h.length-1],ie=a._cacheIndex;N._cacheIndex=ie,h[ie]=N,h.pop(),delete R[A];e:{for(var ee in R)break e;delete T[y]}},_lendBinding:function(a){var h=this._bindings,g=a._cacheIndex,y=this._nActiveBindings++,A=h[y];a._cacheIndex=y,h[y]=a,A._cacheIndex=g,h[g]=A},_takeBackBinding:function(a){var h=this._bindings,g=a._cacheIndex,y=--this._nActiveBindings,A=h[y];a._cacheIndex=y,h[y]=a,A._cacheIndex=g,h[g]=A},_lendControlInterpolant:function(){var a=this._controlInterpolants,h=this._nActiveControlInterpolants++,g=a[h];return void 0===g&&((g=new qd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=h,a[h]=g),g},_takeBackControlInterpolant:function(a){var h=this._controlInterpolants,g=a.__cacheIndex,y=--this._nActiveControlInterpolants,A=h[y];a.__cacheIndex=y,h[y]=a,A.__cacheIndex=g,h[g]=A},_controlInterpolantsResultBuffer:new Float32Array(1)}),Vm.prototype.clone=function(){return new Vm(void 0===this.value.clone?this.value:this.value.clone())},(Wu.prototype=Object.create(Er.prototype)).constructor=Wu,Wu.prototype.isInstancedBufferGeometry=!0,Wu.prototype.addGroup=function(a,h,g){this.groups.push({start:a,count:h,materialIndex:g})},Wu.prototype.copy=function(a){var h=a.index;null!==h&&this.setIndex(h.clone());var g=a.attributes;for(var y in g)this.addAttribute(y,g[y].clone());for(var T=a.groups,R=0,N=T.length;R<N;R++){var ie=T[R];this.addGroup(ie.start,ie.count,ie.materialIndex)}return this},Lf.prototype={constructor:Lf,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(a,h){return this.data.array[a*this.data.stride+this.offset]=h,this},setY:function(a,h){return this.data.array[a*this.data.stride+this.offset+1]=h,this},setZ:function(a,h){return this.data.array[a*this.data.stride+this.offset+2]=h,this},setW:function(a,h){return this.data.array[a*this.data.stride+this.offset+3]=h,this},getX:function(a){return this.data.array[a*this.data.stride+this.offset]},getY:function(a){return this.data.array[a*this.data.stride+this.offset+1]},getZ:function(a){return this.data.array[a*this.data.stride+this.offset+2]},getW:function(a){return this.data.array[a*this.data.stride+this.offset+3]},setXY:function(a,h,g){return this.data.array[(a=a*this.data.stride+this.offset)+0]=h,this.data.array[a+1]=g,this},setXYZ:function(a,h,g,y){return this.data.array[(a=a*this.data.stride+this.offset)+0]=h,this.data.array[a+1]=g,this.data.array[a+2]=y,this},setXYZW:function(a,h,g,y,A){return this.data.array[(a=a*this.data.stride+this.offset)+0]=h,this.data.array[a+1]=g,this.data.array[a+2]=y,this.data.array[a+3]=A,this}},pd.prototype={constructor:pd,isInterleavedBuffer:!0,set needsUpdate(a){!0===a&&this.version++},setArray:function(a){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==a?a.length/this.stride:0,this.array=a},setDynamic:function(a){return this.dynamic=a,this},copy:function(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.dynamic=a.dynamic,this},copyAt:function(a,h,g){a*=this.stride,g*=h.stride;for(var y=0,A=this.stride;y<A;y++)this.array[a+y]=h.array[g+y];return this},set:function(a,h){return void 0===h&&(h=0),this.array.set(a,h),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(a){return this.onUploadCallback=a,this}},(vh.prototype=Object.create(pd.prototype)).constructor=vh,vh.prototype.isInstancedInterleavedBuffer=!0,vh.prototype.copy=function(a){return pd.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},(Zd.prototype=Object.create(fr.prototype)).constructor=Zd,Zd.prototype.isInstancedBufferAttribute=!0,Zd.prototype.copy=function(a){return fr.prototype.copy.call(this,a),this.meshPerAttribute=a.meshPerAttribute,this},tu.prototype={constructor:tu,linePrecision:1,set:function(a,h){this.ray.set(a,h)},setFromCamera:function(a,h){h&&h.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(h.matrixWorld),this.ray.direction.set(a.x,a.y,.5).unproject(h).sub(this.ray.origin).normalize()):h&&h.isOrthographicCamera?(this.ray.origin.set(a.x,a.y,(h.near+h.far)/(h.near-h.far)).unproject(h),this.ray.direction.set(0,0,-1).transformDirection(h.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,h){var g=[];return yp(a,this,g,h),g.sort(gd),g},intersectObjects:function(a,h){var g=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),g;for(var y=0,A=a.length;y<A;y++)yp(a[y],this,g,h);return g.sort(gd),g}},Um.prototype={constructor:Um,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var a=0;if(this.autoStart&&!this.running&&this.start(),this.running){var h=(performance||Date).now();a=(h-this.oldTime)/1e3,this.oldTime=h,this.elapsedTime+=a}return a}},tm.prototype={constructor:tm,set:function(a,h,g){return this.radius=a,this.phi=h,this.theta=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this},makeSafe:function(){var a=1e-6;return this.phi=Math.max(a,Math.min(Math.PI-a,this.phi)),this},setFromVector3:function(a){return this.radius=a.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a.x,a.z),this.phi=Math.acos(xs.clamp(a.y/this.radius,-1,1))),this}},yl.prototype={constructor:yl,set:function(a,h,g){return this.radius=a,this.theta=h,this.y=g,this},clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.radius=a.radius,this.theta=a.theta,this.y=a.y,this},setFromVector3:function(a){return this.radius=Math.sqrt(a.x*a.x+a.z*a.z),this.theta=Math.atan2(a.x,a.z),this.y=a.y,this}},(aa.prototype=Object.create(ba.prototype)).constructor=aa,aa.prototype.createAnimation=function(a,h,g,y){var A={start:h,end:g,length:g-h+1,fps:y,duration:(g-h)/y,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[a]=A,this.animationsList.push(A)},aa.prototype.autoCreateAnimations=function(a){for(var g,h=/([a-z]+)_?(\d+)/i,y={},A=this.geometry,T=0,R=A.morphTargets.length;T<R;T++){var ie=A.morphTargets[T].name.match(h);ie&&ie.length>1&&(y[ee=ie[1]]||(y[ee]={start:1/0,end:-1/0}),T<(fe=y[ee]).start&&(fe.start=T),T>fe.end&&(fe.end=T),g||(g=ee))}for(var ee in y){var fe;this.createAnimation(ee,(fe=y[ee]).start,fe.end,a)}this.firstAnimation=g},aa.prototype.setAnimationDirectionForward=function(a){var h=this.animationsMap[a];h&&(h.direction=1,h.directionBackwards=!1)},aa.prototype.setAnimationDirectionBackward=function(a){var h=this.animationsMap[a];h&&(h.direction=-1,h.directionBackwards=!0)},aa.prototype.setAnimationFPS=function(a,h){var g=this.animationsMap[a];g&&(g.fps=h,g.duration=(g.end-g.start)/g.fps)},aa.prototype.setAnimationDuration=function(a,h){var g=this.animationsMap[a];g&&(g.duration=h,g.fps=(g.end-g.start)/g.duration)},aa.prototype.setAnimationWeight=function(a,h){var g=this.animationsMap[a];g&&(g.weight=h)},aa.prototype.setAnimationTime=function(a,h){var g=this.animationsMap[a];g&&(g.time=h)},aa.prototype.getAnimationTime=function(a){var h=0,g=this.animationsMap[a];return g&&(h=g.time),h},aa.prototype.getAnimationDuration=function(a){var h=-1,g=this.animationsMap[a];return g&&(h=g.duration),h},aa.prototype.playAnimation=function(a){var h=this.animationsMap[a];h?(h.time=0,h.active=!0):console.warn("THREE.MorphBlendMesh: animation["+a+"] undefined in .playAnimation()")},aa.prototype.stopAnimation=function(a){var h=this.animationsMap[a];h&&(h.active=!1)},aa.prototype.update=function(a){for(var h=0,g=this.animationsList.length;h<g;h++){var y=this.animationsList[h];if(y.active){var A=y.duration/y.length;y.time+=y.direction*a,y.mirroredLoop?(y.time>y.duration||y.time<0)&&(y.direction*=-1,y.time>y.duration&&(y.time=y.duration,y.directionBackwards=!0),y.time<0&&(y.time=0,y.directionBackwards=!1)):(y.time=y.time%y.duration,y.time<0&&(y.time+=y.duration));var T=y.start+xs.clamp(Math.floor(y.time/A),0,y.length-1),R=y.weight;T!==y.currentFrame&&(this.morphTargetInfluences[y.lastFrame]=0,this.morphTargetInfluences[y.currentFrame]=1*R,this.morphTargetInfluences[T]=0,y.lastFrame=y.currentFrame,y.currentFrame=T);var N=y.time%A/A;y.directionBackwards&&(N=1-N),y.currentFrame!==y.lastFrame?(this.morphTargetInfluences[y.currentFrame]=N*R,this.morphTargetInfluences[y.lastFrame]=(1-N)*R):this.morphTargetInfluences[y.currentFrame]=R}}},(Pf.prototype=Object.create(_r.prototype)).constructor=Pf,Pf.prototype.isImmediateRenderObject=!0,(ig.prototype=Object.create(vo.prototype)).constructor=ig,ig.prototype.update=function(){var a=new Zt,h=new Zt,g=new It;return function(){var A=["a","b","c"];this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);var T=this.object.matrixWorld,R=this.geometry.attributes.position,N=this.object.geometry;if(N&&N.isGeometry)for(var ie=N.vertices,ee=N.faces,fe=0,me=0,Le=ee.length;me<Le;me++)for(var ke=ee[me],Fe=0,nt=ke.vertexNormals.length;Fe<nt;Fe++){var Ke=ke.vertexNormals[Fe];a.copy(ie[ke[A[Fe]]]).applyMatrix4(T),h.copy(Ke).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),R.setXYZ(fe,a.x,a.y,a.z),R.setXYZ(fe+=1,h.x,h.y,h.z),fe+=1}else if(N&&N.isBufferGeometry){var pt=N.attributes.position,vt=N.attributes.normal;for(fe=0,Fe=0,nt=pt.count;Fe<nt;Fe++)a.set(pt.getX(Fe),pt.getY(Fe),pt.getZ(Fe)).applyMatrix4(T),h.set(vt.getX(Fe),vt.getY(Fe),vt.getZ(Fe)),h.applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),R.setXYZ(fe,a.x,a.y,a.z),R.setXYZ(fe+=1,h.x,h.y,h.z),fe+=1}return R.needsUpdate=!0,this}}(),(Gh.prototype=Object.create(_r.prototype)).constructor=Gh,Gh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Gh.prototype.update=function(){var a=new Zt,h=new Zt;return function(){var y=this.light.distance?this.light.distance:1e3,A=y*Math.tan(this.light.angle);this.cone.scale.set(A,A,y),a.setFromMatrixPosition(this.light.matrixWorld),h.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(h.sub(a)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),(Wh.prototype=Object.create(vo.prototype)).constructor=Wh,Wh.prototype.getBoneList=function(a){var h=[];a&&a.isBone&&h.push(a);for(var g=0;g<a.children.length;g++)h.push.apply(h,this.getBoneList(a.children[g]));return h},Wh.prototype.update=function(){var a=new Zt,h=new ms,g=new ms;return function(){var A=this.geometry,T=A.getAttribute("position");g.getInverse(this.root.matrixWorld);for(var R=0,N=0;R<this.bones.length;R++){var ie=this.bones[R];ie.parent&&ie.parent.isBone&&(h.multiplyMatrices(g,ie.matrixWorld),a.setFromMatrixPosition(h),T.setXYZ(N,a.x,a.y,a.z),h.multiplyMatrices(g,ie.parent.matrixWorld),a.setFromMatrixPosition(h),T.setXYZ(N+1,a.x,a.y,a.z),N+=2)}A.getAttribute("position").needsUpdate=!0}}(),(md.prototype=Object.create(ba.prototype)).constructor=md,md.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},md.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},(Qd.prototype=Object.create(_r.prototype)).constructor=Qd,Qd.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},Qd.prototype.update=function(){var a=new Zt,h=new Zt;return function(){var y=this.children[0],A=this.children[1];if(this.light.target){a.setFromMatrixPosition(this.light.matrixWorld),h.setFromMatrixPosition(this.light.target.matrixWorld);var T=h.clone().sub(a);y.lookAt(T),A.lookAt(T)}y.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),A.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var R=.5*this.light.width,N=.5*this.light.height,ie=y.geometry.getAttribute("position"),ee=ie.array;ee[0]=R,ee[1]=-N,ee[2]=0,ee[3]=R,ee[4]=N,ee[5]=0,ee[6]=-R,ee[7]=N,ee[8]=0,ee[9]=-R,ee[10]=N,ee[11]=0,ee[12]=-R,ee[13]=-N,ee[14]=0,ee[15]=R,ee[16]=-N,ee[17]=0,ie.needsUpdate=!0}}(),(vd.prototype=Object.create(_r.prototype)).constructor=vd,vd.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},vd.prototype.update=function(){var a=new Zt,h=new jr,g=new jr;return function(){var A=this.children[0],T=A.geometry.getAttribute("color");h.copy(this.light.color).multiplyScalar(this.light.intensity),g.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var R=0,N=T.count;R<N;R++){var ie=R<N/2?h:g;T.setXYZ(R,ie.r,ie.g,ie.b)}A.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()),T.needsUpdate=!0}}(),(rg.prototype=Object.create(vo.prototype)).constructor=rg,(ju.prototype=Object.create(vo.prototype)).constructor=ju,(jh.prototype=Object.create(vo.prototype)).constructor=jh,jh.prototype.update=function(){var a=new Zt,h=new Zt,g=new It;return function(){this.object.updateMatrixWorld(!0),g.getNormalMatrix(this.object.matrixWorld);for(var A=this.object.matrixWorld,T=this.geometry.attributes.position,R=this.object.geometry,N=R.vertices,ie=R.faces,ee=0,fe=0,me=ie.length;fe<me;fe++){var Le=ie[fe],ke=Le.normal;a.copy(N[Le.a]).add(N[Le.b]).add(N[Le.c]).divideScalar(3).applyMatrix4(A),h.copy(ke).applyMatrix3(g).normalize().multiplyScalar(this.size).add(a),T.setXYZ(ee,a.x,a.y,a.z),T.setXYZ(ee+=1,h.x,h.y,h.z),ee+=1}return T.needsUpdate=!0,this}}(),(sg.prototype=Object.create(_r.prototype)).constructor=sg,sg.prototype.dispose=function(){var a=this.children[0],h=this.children[1];a.geometry.dispose(),a.material.dispose(),h.geometry.dispose(),h.material.dispose()},sg.prototype.update=function(){var a=new Zt,h=new Zt,g=new Zt;return function(){a.setFromMatrixPosition(this.light.matrixWorld),h.setFromMatrixPosition(this.light.target.matrixWorld),g.subVectors(h,a);var A=this.children[0],T=this.children[1];A.lookAt(g),A.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),T.lookAt(g),T.scale.z=g.length()}}(),(nm.prototype=Object.create(vo.prototype)).constructor=nm,nm.prototype.update=function(){var a,h,g=new Zt,y=new za;function A(T,R,N,ie){g.set(R,N,ie).unproject(y);var ee=h[T];if(void 0!==ee)for(var fe=a.getAttribute("position"),me=0,Le=ee.length;me<Le;me++)fe.setXYZ(ee[me],g.x,g.y,g.z)}return function(){a=this.geometry,h=this.pointMap,y.projectionMatrix.copy(this.camera.projectionMatrix),A("c",0,0,-1),A("t",0,0,1),A("n1",-1,-1,-1),A("n2",1,-1,-1),A("n3",-1,1,-1),A("n4",1,1,-1),A("f1",-1,-1,1),A("f2",1,-1,1),A("f3",-1,1,1),A("f4",1,1,1),A("u1",.7,1.1,-1),A("u2",-.7,1.1,-1),A("u3",0,2,-1),A("cf1",-1,0,1),A("cf2",1,0,1),A("cf3",0,-1,1),A("cf4",0,1,1),A("cn1",-1,0,-1),A("cn2",1,0,-1),A("cn3",0,-1,-1),A("cn4",0,1,-1),a.getAttribute("position").needsUpdate=!0}}(),(og.prototype=Object.create(vo.prototype)).constructor=og,og.prototype.update=function(){var a=new Es;return function(g){if(g&&g.isBox3?a.copy(g):a.setFromObject(g),!a.isEmpty()){var y=a.min,A=a.max,T=this.geometry.attributes.position,R=T.array;R[0]=A.x,R[1]=A.y,R[2]=A.z,R[3]=y.x,R[4]=A.y,R[5]=A.z,R[6]=y.x,R[7]=y.y,R[8]=A.z,R[9]=A.x,R[10]=y.y,R[11]=A.z,R[12]=A.x,R[13]=A.y,R[14]=y.z,R[15]=y.x,R[16]=A.y,R[17]=y.z,R[18]=y.x,R[19]=y.y,R[20]=y.z,R[21]=A.x,R[22]=y.y,R[23]=y.z,T.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var ag=new Er;ag.addAttribute("position",new rs([0,0,0,0,1,0],3));var Rv=new Sf(0,.5,1,5,1);function Oc(a,h,g,y,A,T){_r.call(this),void 0===y&&(y=16776960),void 0===g&&(g=1),void 0===A&&(A=.2*g),void 0===T&&(T=.2*A),this.position.copy(h),this.line=new mu(ag,new al({color:y})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ba(Rv,new Ba({color:y})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(a),this.setLength(g,A,T)}function Rf(a){var h=[0,0,0,a=a||1,0,0,0,0,0,0,a,0,0,0,0,0,0,a],y=new Er;y.addAttribute("position",new rs(h,3)),y.addAttribute("color",new rs([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var A=new al({vertexColors:z});vo.call(this,y,A)}Rv.translate(0,-.5,0),(Oc.prototype=Object.create(_r.prototype)).constructor=Oc,Oc.prototype.setDirection=function(){var h,a=new Zt;return function(y){y.y>.99999?this.quaternion.set(0,0,0,1):y.y<-.99999?this.quaternion.set(1,0,0,0):(a.set(y.z,0,-y.x).normalize(),h=Math.acos(y.y),this.quaternion.setFromAxisAngle(a,h))}}(),Oc.prototype.setLength=function(a,h,g){void 0===h&&(h=.2*a),void 0===g&&(g=.2*h),this.line.scale.set(1,Math.max(0,a-h),1),this.line.updateMatrix(),this.cone.scale.set(g,h,g),this.cone.position.y=a,this.cone.updateMatrix()},Oc.prototype.setColor=function(a){this.line.material.color.copy(a),this.cone.material.color.copy(a)},(Rf.prototype=Object.create(vo.prototype)).constructor=Rf;var Hm=function(){var a=new Zt,h=new A,g=new A,y=new A;function A(){}return A.prototype.init=function(T,R,N,ie){this.c0=T,this.c1=N,this.c2=-3*T+3*R-2*N-ie,this.c3=2*T-2*R+N+ie},A.prototype.initNonuniformCatmullRom=function(T,R,N,ie,ee,fe,me){var Le=(R-T)/ee-(N-T)/(ee+fe)+(N-R)/fe,ke=(N-R)/fe-(ie-R)/(fe+me)+(ie-N)/me;this.init(R,N,Le*=fe,ke*=fe)},A.prototype.initCatmullRom=function(T,R,N,ie,ee){this.init(R,N,ee*(N-T),ee*(ie-R))},A.prototype.calc=function(T){var R=T*T;return this.c0+this.c1*T+this.c2*R+this.c3*(R*T)},Vl.create(function(T){this.points=T||[],this.closed=!1},function(T){var N,ie,ee,fe,me,Le,ke,Fe,R=this.points;if((fe=R.length)<2&&console.log("duh, you need at least 2 points"),ee=(N=(fe-(this.closed?0:1))*T)-(ie=Math.floor(N)),this.closed?ie+=ie>0?0:(Math.floor(Math.abs(ie)/R.length)+1)*R.length:0===ee&&ie===fe-1&&(ie=fe-2,ee=1),this.closed||ie>0?me=R[(ie-1)%fe]:(a.subVectors(R[0],R[1]).add(R[0]),me=a),Le=R[ie%fe],ke=R[(ie+1)%fe],this.closed||ie+2<fe?Fe=R[(ie+2)%fe]:(a.subVectors(R[fe-1],R[fe-2]).add(R[fe-1]),Fe=a),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var nt="chordal"===this.type?.5:.25,tt=Math.pow(me.distanceToSquared(Le),nt),Ke=Math.pow(Le.distanceToSquared(ke),nt),pt=Math.pow(ke.distanceToSquared(Fe),nt);Ke<1e-4&&(Ke=1),tt<1e-4&&(tt=Ke),pt<1e-4&&(pt=Ke),h.initNonuniformCatmullRom(me.x,Le.x,ke.x,Fe.x,tt,Ke,pt),g.initNonuniformCatmullRom(me.y,Le.y,ke.y,Fe.y,tt,Ke,pt),y.initNonuniformCatmullRom(me.z,Le.z,ke.z,Fe.z,tt,Ke,pt)}else if("catmullrom"===this.type){var vt=void 0!==this.tension?this.tension:.5;h.initCatmullRom(me.x,Le.x,ke.x,Fe.x,vt),g.initCatmullRom(me.y,Le.y,ke.y,Fe.y,vt),y.initCatmullRom(me.z,Le.z,ke.z,Fe.z,vt)}return new Zt(h.calc(ee),g.calc(ee),y.calc(ee))})}(),By=Vl.create(function(a){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===a?[]:a},function(a){var h=this.points,g=(h.length-1)*a,y=Math.floor(g),A=g-y,T=h[0==y?y:y-1],R=h[y],N=h[y>h.length-2?h.length-1:y+1],ie=h[y>h.length-3?h.length-1:y+2],ee=nc.interpolate;return new Zt(ee(T.x,R.x,N.x,ie.x,A),ee(T.y,R.y,N.y,ie.y,A),ee(T.z,R.z,N.z,ie.z,A))}),zy=Vl.create(function(a,h,g,y){this.v0=a,this.v1=h,this.v2=g,this.v3=y},function(a){var h=Da.b3;return new Zt(h(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),h(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),h(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),im=Vl.create(function(a,h,g){this.v0=a,this.v1=h,this.v2=g},function(a){var h=Da.b2;return new Zt(h(a,this.v0.x,this.v1.x,this.v2.x),h(a,this.v0.y,this.v1.y,this.v2.y),h(a,this.v0.z,this.v1.z,this.v2.z))}),cC=Vl.create(function(a,h){this.v1=a,this.v2=h},function(a){if(1===a)return this.v2.clone();var h=new Zt;return h.subVectors(this.v2,this.v1),h.multiplyScalar(a),h.add(this.v1),h});function _p(a,h,g,y,A,T){dd.call(this,a,h,g,g,y,A,T)}(_p.prototype=Object.create(dd.prototype)).constructor=_p;var cl={createMultiMaterialObject:function(a,h){for(var g=new ap,y=0,A=h.length;y<A;y++)g.add(new ba(a,h[y]));return g},detach:function(a,h,g){a.applyMatrix(h.matrixWorld),h.remove(a),g.add(a)},attach:function(a,h,g){var y=new ms;y.getInverse(g.matrixWorld),a.applyMatrix(y),h.remove(a),g.add(a)}};function Gm(a,h,g,y,A,T,R){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Po(a,h,g,A,T,R)}var kf=0,kv=1;function uC(a){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new vu(a)}function Vy(a,h){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new js(a,h)}function Uy(a){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new gu(a)}function G_(a,h){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new js(a,h)}function W_(a){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Pc(a)}function j_(a){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Pc(a)}function Hy(a){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Pc(a)}function Wm(a,h,g){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Zt(a,h,g)}function Ov(a,h){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new fr(a,h).setDynamic(!0)}function xu(a,h){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Rh(a,h)}function $_(a,h){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new gl(a,h)}function da(a,h){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Fd(a,h)}function Oa(a,h){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new op(a,h)}function Fv(a,h){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Nd(a,h)}function $h(a,h){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new _f(a,h)}function Nv(a,h){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ou(a,h)}function Gy(a,h){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new rs(a,h)}function q_(a,h){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Dc(a,h)}function jm(a){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Hm.call(this,a),this.type="catmullrom",this.closed=!0}function Wy(a,h){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new og(a,h)}function X_(a,h){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new vo(new vl(a.geometry),new al({color:void 0!==h?h:16777215}))}function hC(a,h){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new vo(new hh(a.geometry),new al({color:void 0!==h?h:16777215}))}function Jd(a){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Io(a)}jm.prototype=Object.create(Hm.prototype),rg.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(sd.prototype,{center:function(a){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},size:function(a){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(a)}}),Object.assign(Es.prototype,{center:function(a){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(a)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(a){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionSphere:function(a){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)},size:function(a){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(a)}}),Fl.prototype.center=function(a){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(a)},xs.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(It.prototype,{flattenToArrayOffset:function(a,h){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,h)},multiplyVector3:function(a){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),a.applyMatrix3(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},applyToBuffer:function(a,h,g){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),Object.assign(ms.prototype,{extractPosition:function(a){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(a)},flattenToArrayOffset:function(a,h){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(a,h)},getPosition:function(){var a;return function(){return void 0===a&&(a=new Zt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),a.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(a){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(a)},multiplyVector3:function(a){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),a.applyProjection(this)},multiplyVector4:function(a){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},multiplyVector3Array:function(a){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(a)},rotateAxis:function(a){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),a.transformDirection(this)},crossVector:function(a){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),a.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(a,h,g){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(a)}}),ut.prototype.isIntersectionLine=function(a){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(a)},kl.prototype.multiplyVector3=function(a){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),a.applyQuaternion(this)},Object.assign(ia.prototype,{isIntersectionBox:function(a){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(a)},isIntersectionPlane:function(a){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(a)},isIntersectionSphere:function(a){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(a)}}),Object.assign(Gu.prototype,{extrude:function(a){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Jc(this,a)},makeGeometry:function(a){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Zp(this,a)}}),Object.assign(Zt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(a){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,h){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(h,a)}}),Ts.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(_r.prototype,{getChildByName:function(a){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(a)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(a,h){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(h,a)}}),Object.defineProperties(_r.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(a){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=a}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(sa.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),wl.prototype.setLens=function(a,h){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==h&&(this.filmGauge=h),this.setFocalLength(a)},Object.defineProperties(Js.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(a){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=a}},shadowCameraLeft:{set:function(a){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=a}},shadowCameraRight:{set:function(a){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=a}},shadowCameraTop:{set:function(a){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=a}},shadowCameraBottom:{set:function(a){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=a}},shadowCameraNear:{set:function(a){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=a}},shadowCameraFar:{set:function(a){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=a}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(a){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=a}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(a){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=a}},shadowMapHeight:{set:function(a){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=a}}}),Object.defineProperties(fr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Er.prototype,{addIndex:function(a){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(a)},addDrawCall:function(a,h,g){void 0!==g&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(a,h)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Er.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Vm.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Ks.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new jr}}}),Object.defineProperties(Il.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Zc.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(a){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=a}}}),Y.prototype=Object.assign(Object.create({constructor:Y,apply:function(a){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(a,this)}}),Y.prototype),Object.assign(Ud.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(a){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(a)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(Ud.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=a}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=a}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(a){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=a}}}),Object.defineProperties(Ao.prototype,{cullFace:{get:function(){return this.renderReverseSided?P:W},set:function(a){var h=a!==W;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+h+"."),this.renderReverseSided=h}}}),Object.defineProperties(Ac.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=a}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(a){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=a}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=a}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(a){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=a}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(a){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=a}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(a){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=a}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(a){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=a}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(a){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=a}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(a){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=a}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(a){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=a}}}),mh.prototype.load=function(a){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var h=this;return(new eg).load(a,function(y){h.setBuffer(y)}),this},zm.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var rm={merge:function(a,h,g){var y;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),h.isMesh&&(h.matrixAutoUpdate&&h.updateMatrix(),y=h.matrix,h=h.geometry),a.merge(h,y,g)},center:function(a){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),a.center()}},Bv={crossOrigin:void 0,loadTexture:function(a,h,g,y){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var A=new Vh;A.setCrossOrigin(this.crossOrigin);var T=A.load(a,g,void 0,y);return h&&(T.mapping=h),T},loadTextureCube:function(a,h,g,y){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var A=new Om;A.setCrossOrigin(this.crossOrigin);var T=A.load(a,g,void 0,y);return h&&(T.mapping=h),T},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function jy(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(a,h){console.warn("THREE.Projector: .projectVector() is now vector.project()."),a.project(h)},this.unprojectVector=function(a,h){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),a.unproject(h)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function $y(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}},2944:function(Be,be,V){var Y=typeof global<"u"&&global||typeof self<"u"&&self||window,D=Function.prototype.apply;function H(B,W){this._id=B,this._clearFn=W}be.setTimeout=function(){return new H(D.call(setTimeout,Y,arguments),clearTimeout)},be.setInterval=function(){return new H(D.call(setInterval,Y,arguments),clearInterval)},be.clearTimeout=be.clearInterval=function(B){B&&B.close()},H.prototype.unref=H.prototype.ref=function(){},H.prototype.close=function(){this._clearFn.call(Y,this._id)},be.enroll=function(B,W){clearTimeout(B._idleTimeoutId),B._idleTimeout=W},be.unenroll=function(B){clearTimeout(B._idleTimeoutId),B._idleTimeout=-1},be._unrefActive=be.active=function(B){clearTimeout(B._idleTimeoutId);var W=B._idleTimeout;W>=0&&(B._idleTimeoutId=setTimeout(function(){B._onTimeout&&B._onTimeout()},W))},V(6563),be.setImmediate=typeof self<"u"&&self.setImmediate||typeof global<"u"&&global.setImmediate||this&&this.setImmediate,be.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof global<"u"&&global.clearImmediate||this&&this.clearImmediate},9699:Be=>{Be.exports=/[\0-\x1F\x7F-\x9F]/},9127:Be=>{Be.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/},6020:Be=>{Be.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},5450:Be=>{Be.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},9315:(Be,be,V)=>{"use strict";be.Any=V(1129),be.Cc=V(9699),be.Cf=V(9127),be.P=V(6020),be.Z=V(5450)},1129:Be=>{Be.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},3532:Be=>{function V(Y){try{if(!global.localStorage)return!1}catch{return!1}var D=global.localStorage[Y];return null!=D&&"true"===String(D).toLowerCase()}Be.exports=function be(Y,D){if(V("noDeprecation"))return Y;var H=!1;return function B(){if(!H){if(V("throwDeprecation"))throw new Error(D);V("traceDeprecation")?console.trace(D):console.warn(D),H=!0}return Y.apply(this,arguments)}}},4922:function(Be,be){(function(){"use strict";be.stripBOM=function(V){return"\ufeff"===V[0]?V.substring(1):V}}).call(this)},4032:function(Be,be,V){(function(){"use strict";var Y,D,H,B,W,P={}.hasOwnProperty;Y=V(7904),D=V(7067).defaults,B=function(O){return"string"==typeof O&&(O.indexOf("&")>=0||O.indexOf(">")>=0||O.indexOf("<")>=0)},W=function(O){return"<![CDATA["+H(O)+"]]>"},H=function(O){return O.replace("]]>","]]]]><![CDATA[>")},be.Builder=function(){function O(q){var te,J;for(te in this.options={},J=D[.2])!P.call(J,te)||(this.options[te]=J[te]);for(te in q)!P.call(q,te)||(this.options[te]=q[te])}return O.prototype.buildObject=function(q){var te,J,oe,se,Q,U;return te=this.options.attrkey,J=this.options.charkey,1===Object.keys(q).length&&this.options.rootName===D[.2].rootName?q=q[Q=Object.keys(q)[0]]:Q=this.options.rootName,U=this,oe=function(ae,xe){var Oe,re,ue,z,$;if("object"!=typeof xe)U.options.cdata&&B(xe)?ae.raw(W(xe)):ae.txt(xe);else if(Array.isArray(xe)){for(z in xe)if(P.call(xe,z))for($ in re=xe[z])ue=re[$],ae=oe(ae.ele($),ue).up()}else for($ in xe)if(P.call(xe,$))if(re=xe[$],$===te){if("object"==typeof re)for(Oe in re)ae=ae.att(Oe,re[Oe])}else if($===J)ae=U.options.cdata&&B(re)?ae.raw(W(re)):ae.txt(re);else if(Array.isArray(re))for(z in re)!P.call(re,z)||(ae="string"==typeof(ue=re[z])?U.options.cdata&&B(ue)?ae.ele($).raw(W(ue)).up():ae.ele($,ue).up():oe(ae.ele($),ue).up());else"object"==typeof re?ae=oe(ae.ele($),re).up():"string"==typeof re&&U.options.cdata&&B(re)?ae=ae.ele($).raw(W(re)).up():(null==re&&(re=""),ae=ae.ele($,re.toString()).up());return ae},se=Y.create(Q,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),oe(se,q).end(this.options.renderOpts)},O}()}).call(this)},7067:function(Be,be){(function(){be.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},2238:function(Be,be,V){(function(){"use strict";var Y,D,H,B,W,P,O,q,te=function(se,Q){return function(){return se.apply(Q,arguments)}},oe={}.hasOwnProperty;O=V(1503),H=V(9069),Y=V(4922),P=V(3749),q=V(2944).setImmediate,D=V(7067).defaults,B=function(se){return"object"==typeof se&&null!=se&&0===Object.keys(se).length},W=function(se,Q,U){var ae,xe;for(ae=0,xe=se.length;ae<xe;ae++)Q=(0,se[ae])(Q,U);return Q},be.Parser=function(se){function Q(U){var ae,xe;if(this.parseStringPromise=te(this.parseStringPromise,this),this.parseString=te(this.parseString,this),this.reset=te(this.reset,this),this.assignOrPush=te(this.assignOrPush,this),this.processAsync=te(this.processAsync,this),!(this instanceof be.Parser))return new be.Parser(U);for(ae in this.options={},xe=D[.2])!oe.call(xe,ae)||(this.options[ae]=xe[ae]);for(ae in U)!oe.call(U,ae)||(this.options[ae]=U[ae]);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(P.normalize)),this.reset()}return function(se,Q){for(var U in Q)oe.call(Q,U)&&(se[U]=Q[U]);function ae(){this.constructor=se}ae.prototype=Q.prototype,se.prototype=new ae,se.__super__=Q.prototype}(Q,se),Q.prototype.processAsync=function(){var U,ae;try{return this.remaining.length<=this.options.chunkSize?(U=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(U),this.saxParser.close()):(U=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(U),q(this.processAsync))}catch(xe){if(ae=xe,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(ae)}},Q.prototype.assignOrPush=function(U,ae,xe){return ae in U?(U[ae]instanceof Array||(U[ae]=[U[ae]]),U[ae].push(xe)):U[ae]=this.options.explicitArray?[xe]:xe},Q.prototype.reset=function(){var U,ae,xe,Oe,re;return this.removeAllListeners(),this.saxParser=O.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(re=this,function(ue){if(re.saxParser.resume(),!re.saxParser.errThrown)return re.saxParser.errThrown=!0,re.emit("error",ue)}),this.saxParser.onend=function(re){return function(){if(!re.saxParser.ended)return re.saxParser.ended=!0,re.emit("end",re.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,Oe=[],U=this.options.attrkey,ae=this.options.charkey,this.saxParser.onopentag=function(re){return function(ue){var z,$,ne,ge,Ue;if((ne={})[ae]="",!re.options.ignoreAttrs)for(z in Ue=ue.attributes)!oe.call(Ue,z)||(!(U in ne)&&!re.options.mergeAttrs&&(ne[U]={}),$=re.options.attrValueProcessors?W(re.options.attrValueProcessors,ue.attributes[z],z):ue.attributes[z],ge=re.options.attrNameProcessors?W(re.options.attrNameProcessors,z):z,re.options.mergeAttrs?re.assignOrPush(ne,ge,$):ne[U][ge]=$);return ne["#name"]=re.options.tagNameProcessors?W(re.options.tagNameProcessors,ue.name):ue.name,re.options.xmlns&&(ne[re.options.xmlnskey]={uri:ue.uri,local:ue.local}),Oe.push(ne)}}(this),this.saxParser.onclosetag=function(re){return function(){var ue,z,$,ne,ge,Ue,Re,rt,Pe,at;if(Ue=Oe.pop(),ge=Ue["#name"],(!re.options.explicitChildren||!re.options.preserveChildrenOrder)&&delete Ue["#name"],!0===Ue.cdata&&(ue=Ue.cdata,delete Ue.cdata),Pe=Oe[Oe.length-1],Ue[ae].match(/^\s*$/)&&!ue?(z=Ue[ae],delete Ue[ae]):(re.options.trim&&(Ue[ae]=Ue[ae].trim()),re.options.normalize&&(Ue[ae]=Ue[ae].replace(/\s{2,}/g," ").trim()),Ue[ae]=re.options.valueProcessors?W(re.options.valueProcessors,Ue[ae],ge):Ue[ae],1===Object.keys(Ue).length&&ae in Ue&&!re.EXPLICIT_CHARKEY&&(Ue=Ue[ae])),B(Ue)&&(Ue=""!==re.options.emptyTag?re.options.emptyTag:z),null!=re.options.validator&&(at="/"+function(){var xt,He,ft;for(ft=[],xt=0,He=Oe.length;xt<He;xt++)ft.push((ne=Oe[xt])["#name"]);return ft}().concat(ge).join("/"),function(){try{Ue=re.options.validator(at,Pe&&Pe[ge],Ue)}catch(He){return re.emit("error",He)}}()),re.options.explicitChildren&&!re.options.mergeAttrs&&"object"==typeof Ue)if(re.options.preserveChildrenOrder){if(Pe){for($ in Pe[re.options.childkey]=Pe[re.options.childkey]||[],Re={},Ue)!oe.call(Ue,$)||(Re[$]=Ue[$]);Pe[re.options.childkey].push(Re),delete Ue["#name"],1===Object.keys(Ue).length&&ae in Ue&&!re.EXPLICIT_CHARKEY&&(Ue=Ue[ae])}}else ne={},re.options.attrkey in Ue&&(ne[re.options.attrkey]=Ue[re.options.attrkey],delete Ue[re.options.attrkey]),!re.options.charsAsChildren&&re.options.charkey in Ue&&(ne[re.options.charkey]=Ue[re.options.charkey],delete Ue[re.options.charkey]),Object.getOwnPropertyNames(Ue).length>0&&(ne[re.options.childkey]=Ue),Ue=ne;return Oe.length>0?re.assignOrPush(Pe,ge,Ue):(re.options.explicitRoot&&(rt=Ue,(Ue={})[ge]=rt),re.resultObject=Ue,re.saxParser.ended=!0,re.emit("end",re.resultObject))}}(this),xe=function(re){return function(ue){var z,$;if($=Oe[Oe.length-1])return $[ae]+=ue,re.options.explicitChildren&&re.options.preserveChildrenOrder&&re.options.charsAsChildren&&(re.options.includeWhiteChars||""!==ue.replace(/\\n/g,"").trim())&&($[re.options.childkey]=$[re.options.childkey]||[],(z={"#name":"__text__"})[ae]=ue,re.options.normalize&&(z[ae]=z[ae].replace(/\s{2,}/g," ").trim()),$[re.options.childkey].push(z)),$}}(this),this.saxParser.ontext=xe,this.saxParser.oncdata=function(ue){var z;if(z=xe(ue))return z.cdata=!0}},Q.prototype.parseString=function(U,ae){var xe;null!=ae&&"function"==typeof ae&&(this.on("end",function(Oe){return this.reset(),ae(null,Oe)}),this.on("error",function(Oe){return this.reset(),ae(Oe)}));try{return""===(U=U.toString()).trim()?(this.emit("end",null),!0):(U=Y.stripBOM(U),this.options.async?(this.remaining=U,q(this.processAsync),this.saxParser):this.saxParser.write(U).close())}catch(Oe){if(xe=Oe,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",xe),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw xe}},Q.prototype.parseStringPromise=function(U){return new Promise((ae=this,function(xe,Oe){return ae.parseString(U,function(re,ue){return re?Oe(re):xe(ue)})}));var ae},Q}(H),be.parseString=function(se,Q,U){var ae,xe;return null!=U?("function"==typeof U&&(ae=U),"object"==typeof Q&&(xe=Q)):("function"==typeof Q&&(ae=Q),xe={}),new be.Parser(xe).parseString(se,ae)},be.parseStringPromise=function(se,Q){var U;return"object"==typeof Q&&(U=Q),new be.Parser(U).parseStringPromise(se)}}).call(this)},3749:function(Be,be){(function(){"use strict";var V;V=new RegExp(/(?!xmlns)^.*:/),be.normalize=function(Y){return Y.toLowerCase()},be.firstCharLowerCase=function(Y){return Y.charAt(0).toLowerCase()+Y.slice(1)},be.stripPrefix=function(Y){return Y.replace(V,"")},be.parseNumbers=function(Y){return isNaN(Y)||(Y=Y%1==0?parseInt(Y,10):parseFloat(Y)),Y},be.parseBooleans=function(Y){return/^(?:true|false)$/i.test(Y)&&(Y="true"===Y.toLowerCase()),Y}}).call(this)},5452:function(Be,be,V){(function(){"use strict";var Y,D,H,B,P={}.hasOwnProperty;D=V(7067),Y=V(4032),H=V(2238),B=V(3749),be.defaults=D.defaults,be.processors=B,be.ValidationError=function(O){function q(te){this.message=te}return function(O,q){for(var te in q)P.call(q,te)&&(O[te]=q[te]);function J(){this.constructor=O}J.prototype=q.prototype,O.prototype=new J,O.__super__=q.prototype}(q,Error),q}(),be.Builder=Y.Builder,be.Parser=H.Parser,be.parseString=H.parseString,be.parseStringPromise=H.parseStringPromise}).call(this)},599:function(Be){(function(){Be.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},2269:function(Be){(function(){Be.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},3452:function(Be){(function(){var be,V,Y,D,H,B,W,P=[].slice,O={}.hasOwnProperty;be=function(){var q,te,J,oe,se,Q;if(Q=arguments[0],se=2<=arguments.length?P.call(arguments,1):[],H(Object.assign))Object.assign.apply(null,arguments);else for(q=0,J=se.length;q<J;q++)if(null!=(oe=se[q]))for(te in oe)!O.call(oe,te)||(Q[te]=oe[te]);return Q},H=function(q){return!!q&&"[object Function]"===Object.prototype.toString.call(q)},B=function(q){var te;return!!q&&("function"==(te=typeof q)||"object"===te)},Y=function(q){return H(Array.isArray)?Array.isArray(q):"[object Array]"===Object.prototype.toString.call(q)},D=function(q){var te;if(Y(q))return!q.length;for(te in q)if(O.call(q,te))return!1;return!0},W=function(q){var te,J;return B(q)&&(J=Object.getPrototypeOf(q))&&(te=J.constructor)&&"function"==typeof te&&te instanceof te&&Function.prototype.toString.call(te)===Function.prototype.toString.call(Object)},V=function(q){return H(q.valueOf)?q.valueOf():q},Be.exports.assign=be,Be.exports.isFunction=H,Be.exports.isObject=B,Be.exports.isArray=Y,Be.exports.isEmpty=D,Be.exports.isPlainObject=W,Be.exports.getValue=V}).call(this)},6316:function(Be){(function(){Be.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},5968:function(Be,be,V){(function(){var Y;Y=V(2269),V(8563),Be.exports=function(){function B(W,P,O){if(this.parent=W,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==P)throw new Error("Missing attribute name. "+this.debugInfo(P));this.name=this.stringify.name(P),this.value=this.stringify.attValue(O),this.type=Y.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(B.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(B.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(B.prototype,"textContent",{get:function(){return this.value},set:function(W){return this.value=W||""}}),Object.defineProperty(B.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(B.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(B.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(B.prototype,"specified",{get:function(){return!0}}),B.prototype.clone=function(){return Object.create(this)},B.prototype.toString=function(W){return this.options.writer.attribute(this,this.options.writer.filterOptions(W))},B.prototype.debugInfo=function(W){return null==(W=W||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+W+"}, parent: <"+this.parent.name+">"},B.prototype.isEqualNode=function(W){return!(W.namespaceURI!==this.namespaceURI||W.prefix!==this.prefix||W.localName!==this.localName||W.value!==this.value)},B}()}).call(this)},1361:function(Be,be,V){(function(){var Y,H,W={}.hasOwnProperty;Y=V(2269),H=V(2182),Be.exports=function(P){function O(q,te){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=Y.CData,this.value=this.stringify.cdata(te)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.cdata(this,this.options.writer.filterOptions(q))},O}(H)}).call(this)},2182:function(Be,be,V){(function(){var D,B={}.hasOwnProperty;D=V(8563),Be.exports=function(W){function P(O){P.__super__.constructor.call(this,O),this.value=""}return function(W,P){for(var O in P)B.call(P,O)&&(W[O]=P[O]);function q(){this.constructor=W}q.prototype=P.prototype,W.prototype=new q,W.__super__=P.prototype}(P,W),Object.defineProperty(P.prototype,"data",{get:function(){return this.value},set:function(O){return this.value=O||""}}),Object.defineProperty(P.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(P.prototype,"textContent",{get:function(){return this.value},set:function(O){return this.value=O||""}}),P.prototype.clone=function(){return Object.create(this)},P.prototype.substringData=function(O,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.appendData=function(O){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.insertData=function(O,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.deleteData=function(O,q){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.replaceData=function(O,q,te){throw new Error("This DOM method is not implemented."+this.debugInfo())},P.prototype.isEqualNode=function(O){return!(!P.__super__.isEqualNode.apply(this,arguments).isEqualNode(O)||O.data!==this.data)},P}(D)}).call(this)},2516:function(Be,be,V){(function(){var Y,D,W={}.hasOwnProperty;Y=V(2269),D=V(2182),Be.exports=function(P){function O(q,te){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=Y.Comment,this.value=this.stringify.comment(te)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.comment(this,this.options.writer.filterOptions(q))},O}(D)}).call(this)},5806:function(Be,be,V){(function(){var D,H;D=V(9276),H=V(3735),Be.exports=function(){function B(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new D,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(B.prototype,"parameterNames",{get:function(){return new H(Object.keys(this.defaultParams))}}),B.prototype.getParameter=function(W){return this.params.hasOwnProperty(W)?this.params[W]:null},B.prototype.canSetParameter=function(W,P){return!0},B.prototype.setParameter=function(W,P){return null!=P?this.params[W]=P:delete this.params[W]},B}()}).call(this)},9276:function(Be){(function(){Be.exports=function(){function V(){}return V.prototype.handleError=function(Y){throw new Error(Y)},V}()}).call(this)},9906:function(Be){(function(){Be.exports=function(){function V(){}return V.prototype.hasFeature=function(Y,D){return!0},V.prototype.createDocumentType=function(Y,D,H){throw new Error("This DOM method is not implemented.")},V.prototype.createDocument=function(Y,D,H){throw new Error("This DOM method is not implemented.")},V.prototype.createHTMLDocument=function(Y){throw new Error("This DOM method is not implemented.")},V.prototype.getFeature=function(Y,D){throw new Error("This DOM method is not implemented.")},V}()}).call(this)},3735:function(Be){(function(){Be.exports=function(){function V(Y){this.arr=Y||[]}return Object.defineProperty(V.prototype,"length",{get:function(){return this.arr.length}}),V.prototype.item=function(Y){return this.arr[Y]||null},V.prototype.contains=function(Y){return-1!==this.arr.indexOf(Y)},V}()}).call(this)},7274:function(Be,be,V){(function(){var Y,H,W={}.hasOwnProperty;H=V(8563),Y=V(2269),Be.exports=function(P){function O(q,te,J,oe,se,Q){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==J)throw new Error("Missing DTD attribute name. "+this.debugInfo(te));if(!oe)throw new Error("Missing DTD attribute type. "+this.debugInfo(te));if(!se)throw new Error("Missing DTD attribute default. "+this.debugInfo(te));if(0!==se.indexOf("#")&&(se="#"+se),!se.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(te));if(Q&&!se.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(te));this.elementName=this.stringify.name(te),this.type=Y.AttributeDeclaration,this.attributeName=this.stringify.name(J),this.attributeType=this.stringify.dtdAttType(oe),Q&&(this.defaultValue=this.stringify.dtdAttDefault(Q)),this.defaultValueType=se}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.toString=function(q){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(q))},O}(H)}).call(this)},2068:function(Be,be,V){(function(){var Y,H,W={}.hasOwnProperty;H=V(8563),Y=V(2269),Be.exports=function(P){function O(q,te,J){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing DTD element name. "+this.debugInfo());J||(J="(#PCDATA)"),Array.isArray(J)&&(J="("+J.join(",")+")"),this.name=this.stringify.name(te),this.type=Y.ElementDeclaration,this.value=this.stringify.dtdElementValue(J)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.toString=function(q){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(q))},O}(H)}).call(this)},8349:function(Be,be,V){(function(){var Y,H,B,P={}.hasOwnProperty;B=V(3452).isObject,H=V(8563),Y=V(2269),Be.exports=function(O){function q(te,J,oe,se){if(q.__super__.constructor.call(this,te),null==oe)throw new Error("Missing DTD entity name. "+this.debugInfo(oe));if(null==se)throw new Error("Missing DTD entity value. "+this.debugInfo(oe));if(this.pe=!!J,this.name=this.stringify.name(oe),this.type=Y.EntityDeclaration,B(se)){if(!se.pubID&&!se.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(oe));if(se.pubID&&!se.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(oe));if(this.internal=!1,null!=se.pubID&&(this.pubID=this.stringify.dtdPubID(se.pubID)),null!=se.sysID&&(this.sysID=this.stringify.dtdSysID(se.sysID)),null!=se.nData&&(this.nData=this.stringify.dtdNData(se.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(oe))}else this.value=this.stringify.dtdEntityValue(se),this.internal=!0}return function(O,q){for(var te in q)P.call(q,te)&&(O[te]=q[te]);function J(){this.constructor=O}J.prototype=q.prototype,O.prototype=new J,O.__super__=q.prototype}(q,O),Object.defineProperty(q.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(q.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(q.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(q.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(q.prototype,"xmlVersion",{get:function(){return null}}),q.prototype.toString=function(te){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(te))},q}(H)}).call(this)},3087:function(Be,be,V){(function(){var Y,H,W={}.hasOwnProperty;H=V(8563),Y=V(2269),Be.exports=function(P){function O(q,te,J){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing DTD notation name. "+this.debugInfo(te));if(!J.pubID&&!J.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(te));this.name=this.stringify.name(te),this.type=Y.NotationDeclaration,null!=J.pubID&&(this.pubID=this.stringify.dtdPubID(J.pubID)),null!=J.sysID&&(this.sysID=this.stringify.dtdSysID(J.sysID))}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),Object.defineProperty(O.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(O.prototype,"systemId",{get:function(){return this.sysID}}),O.prototype.toString=function(q){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(q))},O}(H)}).call(this)},4789:function(Be,be,V){(function(){var Y,H,B,P={}.hasOwnProperty;B=V(3452).isObject,H=V(8563),Y=V(2269),Be.exports=function(O){function q(te,J,oe,se){var Q;q.__super__.constructor.call(this,te),B(J)&&(J=(Q=J).version,oe=Q.encoding,se=Q.standalone),J||(J="1.0"),this.type=Y.Declaration,this.version=this.stringify.xmlVersion(J),null!=oe&&(this.encoding=this.stringify.xmlEncoding(oe)),null!=se&&(this.standalone=this.stringify.xmlStandalone(se))}return function(O,q){for(var te in q)P.call(q,te)&&(O[te]=q[te]);function J(){this.constructor=O}J.prototype=q.prototype,O.prototype=new J,O.__super__=q.prototype}(q,O),q.prototype.toString=function(te){return this.options.writer.declaration(this,this.options.writer.filterOptions(te))},q}(H)}).call(this)},9195:function(Be,be,V){(function(){var Y,D,H,B,W,O,q,te,oe={}.hasOwnProperty;te=V(3452).isObject,q=V(8563),Y=V(2269),D=V(7274),B=V(8349),H=V(2068),W=V(3087),O=V(5264),Be.exports=function(se){function Q(U,ae,xe){var Oe,re,ue,z,$,ne;if(Q.__super__.constructor.call(this,U),this.type=Y.DocType,U.children)for(re=0,ue=(z=U.children).length;re<ue;re++)if((Oe=z[re]).type===Y.Element){this.name=Oe.name;break}this.documentObject=U,te(ae)&&(ae=($=ae).pubID,xe=$.sysID),null==xe&&(xe=(ne=[ae,xe])[0],ae=ne[1]),null!=ae&&(this.pubID=this.stringify.dtdPubID(ae)),null!=xe&&(this.sysID=this.stringify.dtdSysID(xe))}return function(se,Q){for(var U in Q)oe.call(Q,U)&&(se[U]=Q[U]);function ae(){this.constructor=se}ae.prototype=Q.prototype,se.prototype=new ae,se.__super__=Q.prototype}(Q,se),Object.defineProperty(Q.prototype,"entities",{get:function(){var U,ae,xe,Oe,re;for(Oe={},ae=0,xe=(re=this.children).length;ae<xe;ae++)(U=re[ae]).type===Y.EntityDeclaration&&!U.pe&&(Oe[U.name]=U);return new O(Oe)}}),Object.defineProperty(Q.prototype,"notations",{get:function(){var U,ae,xe,Oe,re;for(Oe={},ae=0,xe=(re=this.children).length;ae<xe;ae++)(U=re[ae]).type===Y.NotationDeclaration&&(Oe[U.name]=U);return new O(Oe)}}),Object.defineProperty(Q.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(Q.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(Q.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Q.prototype.element=function(U,ae){var xe;return xe=new H(this,U,ae),this.children.push(xe),this},Q.prototype.attList=function(U,ae,xe,Oe,re){var ue;return ue=new D(this,U,ae,xe,Oe,re),this.children.push(ue),this},Q.prototype.entity=function(U,ae){var xe;return xe=new B(this,!1,U,ae),this.children.push(xe),this},Q.prototype.pEntity=function(U,ae){var xe;return xe=new B(this,!0,U,ae),this.children.push(xe),this},Q.prototype.notation=function(U,ae){var xe;return xe=new W(this,U,ae),this.children.push(xe),this},Q.prototype.toString=function(U){return this.options.writer.docType(this,this.options.writer.filterOptions(U))},Q.prototype.ele=function(U,ae){return this.element(U,ae)},Q.prototype.att=function(U,ae,xe,Oe,re){return this.attList(U,ae,xe,Oe,re)},Q.prototype.ent=function(U,ae){return this.entity(U,ae)},Q.prototype.pent=function(U,ae){return this.pEntity(U,ae)},Q.prototype.not=function(U,ae){return this.notation(U,ae)},Q.prototype.up=function(){return this.root()||this.documentObject},Q.prototype.isEqualNode=function(U){return!(!Q.__super__.isEqualNode.apply(this,arguments).isEqualNode(U)||U.name!==this.name||U.publicId!==this.publicId||U.systemId!==this.systemId)},Q}(q)}).call(this)},519:function(Be,be,V){(function(){var Y,D,H,W,P,O,q,J={}.hasOwnProperty;q=V(3452).isPlainObject,H=V(9906),D=V(5806),W=V(8563),Y=V(2269),O=V(5041),P=V(4354),Be.exports=function(oe){function se(Q){se.__super__.constructor.call(this,null),this.name="#document",this.type=Y.Document,this.documentURI=null,this.domConfig=new D,Q||(Q={}),Q.writer||(Q.writer=new P),this.options=Q,this.stringify=new O(Q)}return function(oe,se){for(var Q in se)J.call(se,Q)&&(oe[Q]=se[Q]);function U(){this.constructor=oe}U.prototype=se.prototype,oe.prototype=new U,oe.__super__=se.prototype}(se,oe),Object.defineProperty(se.prototype,"implementation",{value:new H}),Object.defineProperty(se.prototype,"doctype",{get:function(){var Q,U,ae,xe;for(U=0,ae=(xe=this.children).length;U<ae;U++)if((Q=xe[U]).type===Y.DocType)return Q;return null}}),Object.defineProperty(se.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(se.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(se.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(se.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===Y.Declaration?this.children[0].encoding:null}}),Object.defineProperty(se.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===Y.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(se.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===Y.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(se.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(se.prototype,"origin",{get:function(){return null}}),Object.defineProperty(se.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(se.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(se.prototype,"contentType",{get:function(){return null}}),se.prototype.end=function(Q){var U;return U={},Q?q(Q)&&(U=Q,Q=this.options.writer):Q=this.options.writer,Q.document(this,Q.filterOptions(U))},se.prototype.toString=function(Q){return this.options.writer.document(this,this.options.writer.filterOptions(Q))},se.prototype.createElement=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createTextNode=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createComment=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createCDATASection=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createProcessingInstruction=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createAttribute=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createEntityReference=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementsByTagName=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.importNode=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createElementNS=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createAttributeNS=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementsByTagNameNS=function(Q,U){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementById=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.adoptNode=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.renameNode=function(Q,U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.getElementsByClassName=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createEvent=function(Q){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createNodeIterator=function(Q,U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},se.prototype.createTreeWalker=function(Q,U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},se}(W)}).call(this)},1105:function(Be,be,V){(function(){var Y,D,H,B,W,P,O,q,te,J,oe,se,U,ae,xe,Oe,re,ue,z,$,ne,ge,Ue,Re={}.hasOwnProperty;Ue=V(3452),ne=Ue.isObject,$=Ue.isFunction,ge=Ue.isPlainObject,z=Ue.getValue,Y=V(2269),se=V(519),U=V(3352),B=V(1361),W=V(2516),xe=V(9942),ue=V(474),ae=V(4666),J=V(4789),oe=V(9195),P=V(7274),q=V(8349),O=V(2068),te=V(3087),H=V(5968),re=V(5041),Oe=V(4354),D=V(6316),Be.exports=function(){function rt(Pe,at,xt){var He;this.name="?xml",this.type=Y.Document,Pe||(Pe={}),He={},Pe.writer?ge(Pe.writer)&&(He=Pe.writer,Pe.writer=new Oe):Pe.writer=new Oe,this.options=Pe,this.writer=Pe.writer,this.writerOptions=this.writer.filterOptions(He),this.stringify=new re(Pe),this.onDataCallback=at||function(){},this.onEndCallback=xt||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return rt.prototype.createChildNode=function(Pe){var xt,He,ft,gt,Ct,kn,Ut;switch(Pe.type){case Y.CData:this.cdata(Pe.value);break;case Y.Comment:this.comment(Pe.value);break;case Y.Element:for(xt in He={},kn=Pe.attribs)!Re.call(kn,xt)||(He[xt]=kn[xt].value);this.node(Pe.name,He);break;case Y.Dummy:this.dummy();break;case Y.Raw:this.raw(Pe.value);break;case Y.Text:this.text(Pe.value);break;case Y.ProcessingInstruction:this.instruction(Pe.target,Pe.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+Pe.constructor.name)}for(gt=0,Ct=(Ut=Pe.children).length;gt<Ct;gt++)this.createChildNode(ft=Ut[gt]),ft.type===Y.Element&&this.up();return this},rt.prototype.dummy=function(){return this},rt.prototype.node=function(Pe,at,xt){var He;if(null==Pe)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(Pe));return this.openCurrent(),Pe=z(Pe),null==at&&(at={}),at=z(at),ne(at)||(xt=(He=[at,xt])[0],at=He[1]),this.currentNode=new U(this,Pe,at),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=xt&&this.text(xt),this},rt.prototype.element=function(Pe,at,xt){var He,ft,gt,Ct,kn,Ut;if(this.currentNode&&this.currentNode.type===Y.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(Pe)||ne(Pe)||$(Pe))for(Ct=this.options.noValidation,this.options.noValidation=!0,(Ut=new se(this.options).element("TEMP_ROOT")).element(Pe),this.options.noValidation=Ct,ft=0,gt=(kn=Ut.children).length;ft<gt;ft++)this.createChildNode(He=kn[ft]),He.type===Y.Element&&this.up();else this.node(Pe,at,xt);return this},rt.prototype.attribute=function(Pe,at){var xt;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(Pe));if(null!=Pe&&(Pe=z(Pe)),ne(Pe))for(xt in Pe)!Re.call(Pe,xt)||this.attribute(xt,Pe[xt]);else $(at)&&(at=at.apply()),this.options.keepNullAttributes&&null==at?this.currentNode.attribs[Pe]=new H(this,Pe,""):null!=at&&(this.currentNode.attribs[Pe]=new H(this,Pe,at));return this},rt.prototype.text=function(Pe){var at;return this.openCurrent(),at=new ue(this,Pe),this.onData(this.writer.text(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.cdata=function(Pe){var at;return this.openCurrent(),at=new B(this,Pe),this.onData(this.writer.cdata(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.comment=function(Pe){var at;return this.openCurrent(),at=new W(this,Pe),this.onData(this.writer.comment(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.raw=function(Pe){var at;return this.openCurrent(),at=new xe(this,Pe),this.onData(this.writer.raw(at,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.instruction=function(Pe,at){var xt,He,gt,Ct;if(this.openCurrent(),null!=Pe&&(Pe=z(Pe)),null!=at&&(at=z(at)),Array.isArray(Pe))for(xt=0,gt=Pe.length;xt<gt;xt++)this.instruction(He=Pe[xt]);else if(ne(Pe))for(He in Pe)!Re.call(Pe,He)||this.instruction(He,Pe[He]);else $(at)&&(at=at.apply()),Ct=new ae(this,Pe,at),this.onData(this.writer.processingInstruction(Ct,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},rt.prototype.declaration=function(Pe,at,xt){var He;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return He=new J(this,Pe,at,xt),this.onData(this.writer.declaration(He,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.doctype=function(Pe,at,xt){if(this.openCurrent(),null==Pe)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new oe(this,at,xt),this.currentNode.rootNodeName=Pe,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},rt.prototype.dtdElement=function(Pe,at){var xt;return this.openCurrent(),xt=new O(this,Pe,at),this.onData(this.writer.dtdElement(xt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.attList=function(Pe,at,xt,He,ft){var gt;return this.openCurrent(),gt=new P(this,Pe,at,xt,He,ft),this.onData(this.writer.dtdAttList(gt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.entity=function(Pe,at){var xt;return this.openCurrent(),xt=new q(this,!1,Pe,at),this.onData(this.writer.dtdEntity(xt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.pEntity=function(Pe,at){var xt;return this.openCurrent(),xt=new q(this,!0,Pe,at),this.onData(this.writer.dtdEntity(xt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.notation=function(Pe,at){var xt;return this.openCurrent(),xt=new te(this,Pe,at),this.onData(this.writer.dtdNotation(xt,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},rt.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},rt.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},rt.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},rt.prototype.openNode=function(Pe){var xt,He,ft;if(!Pe.isOpen){if(!this.root&&0===this.currentLevel&&Pe.type===Y.Element&&(this.root=Pe),xt="",Pe.type===Y.Element){for(He in this.writerOptions.state=D.OpenTag,xt=this.writer.indent(Pe,this.writerOptions,this.currentLevel)+"<"+Pe.name,ft=Pe.attribs)!Re.call(ft,He)||(xt+=this.writer.attribute(ft[He],this.writerOptions,this.currentLevel));xt+=(Pe.children?">":"/>")+this.writer.endline(Pe,this.writerOptions,this.currentLevel),this.writerOptions.state=D.InsideTag}else this.writerOptions.state=D.OpenTag,xt=this.writer.indent(Pe,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+Pe.rootNodeName,Pe.pubID&&Pe.sysID?xt+=' PUBLIC "'+Pe.pubID+'" "'+Pe.sysID+'"':Pe.sysID&&(xt+=' SYSTEM "'+Pe.sysID+'"'),Pe.children?(xt+=" [",this.writerOptions.state=D.InsideTag):(this.writerOptions.state=D.CloseTag,xt+=">"),xt+=this.writer.endline(Pe,this.writerOptions,this.currentLevel);return this.onData(xt,this.currentLevel),Pe.isOpen=!0}},rt.prototype.closeNode=function(Pe){var at;if(!Pe.isClosed)return"",this.writerOptions.state=D.CloseTag,at=Pe.type===Y.Element?this.writer.indent(Pe,this.writerOptions,this.currentLevel)+"</"+Pe.name+">"+this.writer.endline(Pe,this.writerOptions,this.currentLevel):this.writer.indent(Pe,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(Pe,this.writerOptions,this.currentLevel),this.writerOptions.state=D.None,this.onData(at,this.currentLevel),Pe.isClosed=!0},rt.prototype.onData=function(Pe,at){return this.documentStarted=!0,this.onDataCallback(Pe,at+1)},rt.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},rt.prototype.debugInfo=function(Pe){return null==Pe?"":"node: <"+Pe+">"},rt.prototype.ele=function(){return this.element.apply(this,arguments)},rt.prototype.nod=function(Pe,at,xt){return this.node(Pe,at,xt)},rt.prototype.txt=function(Pe){return this.text(Pe)},rt.prototype.dat=function(Pe){return this.cdata(Pe)},rt.prototype.com=function(Pe){return this.comment(Pe)},rt.prototype.ins=function(Pe,at){return this.instruction(Pe,at)},rt.prototype.dec=function(Pe,at,xt){return this.declaration(Pe,at,xt)},rt.prototype.dtd=function(Pe,at,xt){return this.doctype(Pe,at,xt)},rt.prototype.e=function(Pe,at,xt){return this.element(Pe,at,xt)},rt.prototype.n=function(Pe,at,xt){return this.node(Pe,at,xt)},rt.prototype.t=function(Pe){return this.text(Pe)},rt.prototype.d=function(Pe){return this.cdata(Pe)},rt.prototype.c=function(Pe){return this.comment(Pe)},rt.prototype.r=function(Pe){return this.raw(Pe)},rt.prototype.i=function(Pe,at){return this.instruction(Pe,at)},rt.prototype.att=function(){return this.currentNode&&this.currentNode.type===Y.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},rt.prototype.a=function(){return this.currentNode&&this.currentNode.type===Y.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},rt.prototype.ent=function(Pe,at){return this.entity(Pe,at)},rt.prototype.pent=function(Pe,at){return this.pEntity(Pe,at)},rt.prototype.not=function(Pe,at){return this.notation(Pe,at)},rt}()}).call(this)},4173:function(Be,be,V){(function(){var Y,H,W={}.hasOwnProperty;H=V(8563),Y=V(2269),Be.exports=function(P){function O(q){O.__super__.constructor.call(this,q),this.type=Y.Dummy}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return""},O}(H)}).call(this)},3352:function(Be,be,V){(function(){var Y,D,B,W,P,O,q,te,oe={}.hasOwnProperty;te=V(3452),q=te.isObject,O=te.isFunction,P=te.getValue,W=V(8563),Y=V(2269),D=V(5968),B=V(5264),Be.exports=function(se){function Q(U,ae,xe){var Oe,re,ue,z;if(Q.__super__.constructor.call(this,U),null==ae)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(ae),this.type=Y.Element,this.attribs={},this.schemaTypeInfo=null,null!=xe&&this.attribute(xe),U.type===Y.Document&&(this.isRoot=!0,this.documentObject=U,U.rootObject=this,U.children))for(re=0,ue=(z=U.children).length;re<ue;re++)if((Oe=z[re]).type===Y.DocType){Oe.name=this.name;break}}return function(se,Q){for(var U in Q)oe.call(Q,U)&&(se[U]=Q[U]);function ae(){this.constructor=se}ae.prototype=Q.prototype,se.prototype=new ae,se.__super__=Q.prototype}(Q,se),Object.defineProperty(Q.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(Q.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(Q.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(Q.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(Q.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(Q.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(Q.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(Q.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new B(this.attribs)),this.attributeMap}}),Q.prototype.clone=function(){var ae,xe,Oe;for(ae in(xe=Object.create(this)).isRoot&&(xe.documentObject=null),xe.attribs={},Oe=this.attribs)!oe.call(Oe,ae)||(xe.attribs[ae]=Oe[ae].clone());return xe.children=[],this.children.forEach(function(re){var ue;return(ue=re.clone()).parent=xe,xe.children.push(ue)}),xe},Q.prototype.attribute=function(U,ae){var xe;if(null!=U&&(U=P(U)),q(U))for(xe in U)!oe.call(U,xe)||this.attribute(xe,U[xe]);else O(ae)&&(ae=ae.apply()),this.options.keepNullAttributes&&null==ae?this.attribs[U]=new D(this,U,""):null!=ae&&(this.attribs[U]=new D(this,U,ae));return this},Q.prototype.removeAttribute=function(U){var xe,Oe;if(null==U)throw new Error("Missing attribute name. "+this.debugInfo());if(U=P(U),Array.isArray(U))for(xe=0,Oe=U.length;xe<Oe;xe++)delete this.attribs[U[xe]];else delete this.attribs[U];return this},Q.prototype.toString=function(U){return this.options.writer.element(this,this.options.writer.filterOptions(U))},Q.prototype.att=function(U,ae){return this.attribute(U,ae)},Q.prototype.a=function(U,ae){return this.attribute(U,ae)},Q.prototype.getAttribute=function(U){return this.attribs.hasOwnProperty(U)?this.attribs[U].value:null},Q.prototype.setAttribute=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getAttributeNode=function(U){return this.attribs.hasOwnProperty(U)?this.attribs[U]:null},Q.prototype.setAttributeNode=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.removeAttributeNode=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByTagName=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getAttributeNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.setAttributeNS=function(U,ae,xe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.removeAttributeNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getAttributeNodeNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.setAttributeNodeNS=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByTagNameNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.hasAttribute=function(U){return this.attribs.hasOwnProperty(U)},Q.prototype.hasAttributeNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.setIdAttribute=function(U,ae){return this.attribs.hasOwnProperty(U)?this.attribs[U].isId:ae},Q.prototype.setIdAttributeNS=function(U,ae,xe){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.setIdAttributeNode=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByTagName=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByTagNameNS=function(U,ae){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.getElementsByClassName=function(U){throw new Error("This DOM method is not implemented."+this.debugInfo())},Q.prototype.isEqualNode=function(U){var ae,xe,Oe;if(!Q.__super__.isEqualNode.apply(this,arguments).isEqualNode(U)||U.namespaceURI!==this.namespaceURI||U.prefix!==this.prefix||U.localName!==this.localName||U.attribs.length!==this.attribs.length)return!1;for(ae=xe=0,Oe=this.attribs.length-1;0<=Oe?xe<=Oe:xe>=Oe;ae=0<=Oe?++xe:--xe)if(!this.attribs[ae].isEqualNode(U.attribs[ae]))return!1;return!0},Q}(W)}).call(this)},5264:function(Be){(function(){Be.exports=function(){function V(Y){this.nodes=Y}return Object.defineProperty(V.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),V.prototype.clone=function(){return this.nodes=null},V.prototype.getNamedItem=function(Y){return this.nodes[Y]},V.prototype.setNamedItem=function(Y){var D;return D=this.nodes[Y.nodeName],this.nodes[Y.nodeName]=Y,D||null},V.prototype.removeNamedItem=function(Y){var D;return D=this.nodes[Y],delete this.nodes[Y],D||null},V.prototype.item=function(Y){return this.nodes[Object.keys(this.nodes)[Y]]||null},V.prototype.getNamedItemNS=function(Y,D){throw new Error("This DOM method is not implemented.")},V.prototype.setNamedItemNS=function(Y){throw new Error("This DOM method is not implemented.")},V.prototype.removeNamedItemNS=function(Y,D){throw new Error("This DOM method is not implemented.")},V}()}).call(this)},8563:function(Be,be,V){(function(){var Y,D,H,B,W,P,O,q,oe,se,Q,U,ae,xe,Oe,re,ue,z={}.hasOwnProperty;ue=V(3452),re=ue.isObject,Oe=ue.isFunction,xe=ue.isEmpty,ae=ue.getValue,q=null,H=null,B=null,W=null,P=null,Q=null,U=null,se=null,O=null,D=null,oe=null,Y=null,Be.exports=function(){function $(ne){this.parent=ne,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,q||(q=V(3352),H=V(1361),B=V(2516),W=V(4789),P=V(9195),Q=V(9942),U=V(474),se=V(4666),O=V(4173),D=V(2269),oe=V(5112),V(5264),Y=V(599))}return Object.defineProperty($.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty($.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty($.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty($.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty($.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new oe(this.children)),this.childNodeList}}),Object.defineProperty($.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty($.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty($.prototype,"previousSibling",{get:function(){var ne;return ne=this.parent.children.indexOf(this),this.parent.children[ne-1]||null}}),Object.defineProperty($.prototype,"nextSibling",{get:function(){var ne;return ne=this.parent.children.indexOf(this),this.parent.children[ne+1]||null}}),Object.defineProperty($.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty($.prototype,"textContent",{get:function(){var ne,ge,Ue,Re,rt;if(this.nodeType===D.Element||this.nodeType===D.DocumentFragment){for(rt="",ge=0,Ue=(Re=this.children).length;ge<Ue;ge++)(ne=Re[ge]).textContent&&(rt+=ne.textContent);return rt}return null},set:function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),$.prototype.setParent=function(ne){var Ue,Re,rt,Pe;for(this.parent=ne,ne&&(this.options=ne.options,this.stringify=ne.stringify),Pe=[],Ue=0,Re=(rt=this.children).length;Ue<Re;Ue++)Pe.push(rt[Ue].setParent(this));return Pe},$.prototype.element=function(ne,ge,Ue){var Re,Pe,at,xt,He,ft,gt,Ct,kn,Ut;if(He=null,null===ge&&null==Ue&&(ge=(Ct=[{},null])[0],Ue=Ct[1]),null==ge&&(ge={}),ge=ae(ge),re(ge)||(Ue=(kn=[ge,Ue])[0],ge=kn[1]),null!=ne&&(ne=ae(ne)),Array.isArray(ne))for(Pe=0,ft=ne.length;Pe<ft;Pe++)He=this.element(ne[Pe]);else if(Oe(ne))He=this.element(ne.apply());else if(re(ne)){for(xt in ne)if(z.call(ne,xt))if(Oe(Ut=ne[xt])&&(Ut=Ut.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===xt.indexOf(this.stringify.convertAttKey))He=this.attribute(xt.substr(this.stringify.convertAttKey.length),Ut);else if(!this.options.separateArrayItems&&Array.isArray(Ut)&&xe(Ut))He=this.dummy();else if(re(Ut)&&xe(Ut))He=this.element(xt);else if(this.options.keepNullNodes||null!=Ut)if(!this.options.separateArrayItems&&Array.isArray(Ut))for(at=0,gt=Ut.length;at<gt;at++)(Re={})[xt]=Ut[at],He=this.element(Re);else re(Ut)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===xt.indexOf(this.stringify.convertTextKey)?He=this.element(Ut):(He=this.element(xt)).element(Ut):He=this.element(xt,Ut);else He=this.dummy()}else He=this.options.keepNullNodes||null!==Ue?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===ne.indexOf(this.stringify.convertTextKey)?this.text(Ue):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===ne.indexOf(this.stringify.convertCDataKey)?this.cdata(Ue):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===ne.indexOf(this.stringify.convertCommentKey)?this.comment(Ue):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===ne.indexOf(this.stringify.convertRawKey)?this.raw(Ue):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===ne.indexOf(this.stringify.convertPIKey)?this.instruction(ne.substr(this.stringify.convertPIKey.length),Ue):this.node(ne,ge,Ue):this.dummy();if(null==He)throw new Error("Could not create any elements with: "+ne+". "+this.debugInfo());return He},$.prototype.insertBefore=function(ne,ge,Ue){var Re,rt,Pe,at,xt;if(ne?.type)return at=ge,(Pe=ne).setParent(this),at?(rt=children.indexOf(at),xt=children.splice(rt),children.push(Pe),Array.prototype.push.apply(children,xt)):children.push(Pe),Pe;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(ne));return rt=this.parent.children.indexOf(this),xt=this.parent.children.splice(rt),Re=this.parent.element(ne,ge,Ue),Array.prototype.push.apply(this.parent.children,xt),Re},$.prototype.insertAfter=function(ne,ge,Ue){var Re,rt,Pe;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(ne));return rt=this.parent.children.indexOf(this),Pe=this.parent.children.splice(rt+1),Re=this.parent.element(ne,ge,Ue),Array.prototype.push.apply(this.parent.children,Pe),Re},$.prototype.remove=function(){var ne;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return ne=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[ne,ne-ne+1].concat([])),this.parent},$.prototype.node=function(ne,ge,Ue){var Re,rt;return null!=ne&&(ne=ae(ne)),ge||(ge={}),ge=ae(ge),re(ge)||(Ue=(rt=[ge,Ue])[0],ge=rt[1]),Re=new q(this,ne,ge),null!=Ue&&Re.text(Ue),this.children.push(Re),Re},$.prototype.text=function(ne){var ge;return re(ne)&&this.element(ne),ge=new U(this,ne),this.children.push(ge),this},$.prototype.cdata=function(ne){var ge;return ge=new H(this,ne),this.children.push(ge),this},$.prototype.comment=function(ne){var ge;return ge=new B(this,ne),this.children.push(ge),this},$.prototype.commentBefore=function(ne){var Ue,Re;return Ue=this.parent.children.indexOf(this),Re=this.parent.children.splice(Ue),this.parent.comment(ne),Array.prototype.push.apply(this.parent.children,Re),this},$.prototype.commentAfter=function(ne){var Ue,Re;return Ue=this.parent.children.indexOf(this),Re=this.parent.children.splice(Ue+1),this.parent.comment(ne),Array.prototype.push.apply(this.parent.children,Re),this},$.prototype.raw=function(ne){var ge;return ge=new Q(this,ne),this.children.push(ge),this},$.prototype.dummy=function(){return new O(this)},$.prototype.instruction=function(ne,ge){var Ue,rt,Pe,at;if(null!=ne&&(ne=ae(ne)),null!=ge&&(ge=ae(ge)),Array.isArray(ne))for(Pe=0,at=ne.length;Pe<at;Pe++)this.instruction(Ue=ne[Pe]);else if(re(ne))for(Ue in ne)!z.call(ne,Ue)||this.instruction(Ue,ne[Ue]);else Oe(ge)&&(ge=ge.apply()),rt=new se(this,ne,ge),this.children.push(rt);return this},$.prototype.instructionBefore=function(ne,ge){var Re,rt;return Re=this.parent.children.indexOf(this),rt=this.parent.children.splice(Re),this.parent.instruction(ne,ge),Array.prototype.push.apply(this.parent.children,rt),this},$.prototype.instructionAfter=function(ne,ge){var Re,rt;return Re=this.parent.children.indexOf(this),rt=this.parent.children.splice(Re+1),this.parent.instruction(ne,ge),Array.prototype.push.apply(this.parent.children,rt),this},$.prototype.declaration=function(ne,ge,Ue){var Re,rt;return Re=this.document(),rt=new W(Re,ne,ge,Ue),0===Re.children.length?Re.children.unshift(rt):Re.children[0].type===D.Declaration?Re.children[0]=rt:Re.children.unshift(rt),Re.root()||Re},$.prototype.dtd=function(ne,ge){var Re,rt,Pe,at,xt,He,ft,gt,Ct;for(Re=this.document(),rt=new P(Re,ne,ge),Pe=at=0,He=(gt=Re.children).length;at<He;Pe=++at)if(gt[Pe].type===D.DocType)return Re.children[Pe]=rt,rt;for(Pe=xt=0,ft=(Ct=Re.children).length;xt<ft;Pe=++xt)if(Ct[Pe].isRoot)return Re.children.splice(Pe,0,rt),rt;return Re.children.push(rt),rt},$.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},$.prototype.root=function(){var ne;for(ne=this;ne;){if(ne.type===D.Document)return ne.rootObject;if(ne.isRoot)return ne;ne=ne.parent}},$.prototype.document=function(){var ne;for(ne=this;ne;){if(ne.type===D.Document)return ne;ne=ne.parent}},$.prototype.end=function(ne){return this.document().end(ne)},$.prototype.prev=function(){var ne;if((ne=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[ne-1]},$.prototype.next=function(){var ne;if(-1===(ne=this.parent.children.indexOf(this))||ne===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[ne+1]},$.prototype.importDocument=function(ne){var ge;return(ge=ne.root().clone()).parent=this,ge.isRoot=!1,this.children.push(ge),this},$.prototype.debugInfo=function(ne){var ge,Ue;return null!=(ne=ne||this.name)||null!=(ge=this.parent)&&ge.name?null==ne?"parent: <"+this.parent.name+">":null!=(Ue=this.parent)&&Ue.name?"node: <"+ne+">, parent: <"+this.parent.name+">":"node: <"+ne+">":""},$.prototype.ele=function(ne,ge,Ue){return this.element(ne,ge,Ue)},$.prototype.nod=function(ne,ge,Ue){return this.node(ne,ge,Ue)},$.prototype.txt=function(ne){return this.text(ne)},$.prototype.dat=function(ne){return this.cdata(ne)},$.prototype.com=function(ne){return this.comment(ne)},$.prototype.ins=function(ne,ge){return this.instruction(ne,ge)},$.prototype.doc=function(){return this.document()},$.prototype.dec=function(ne,ge,Ue){return this.declaration(ne,ge,Ue)},$.prototype.e=function(ne,ge,Ue){return this.element(ne,ge,Ue)},$.prototype.n=function(ne,ge,Ue){return this.node(ne,ge,Ue)},$.prototype.t=function(ne){return this.text(ne)},$.prototype.d=function(ne){return this.cdata(ne)},$.prototype.c=function(ne){return this.comment(ne)},$.prototype.r=function(ne){return this.raw(ne)},$.prototype.i=function(ne,ge){return this.instruction(ne,ge)},$.prototype.u=function(){return this.up()},$.prototype.importXMLBuilder=function(ne){return this.importDocument(ne)},$.prototype.replaceChild=function(ne,ge){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.removeChild=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.appendChild=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.hasChildNodes=function(){return 0!==this.children.length},$.prototype.cloneNode=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isSupported=function(ne,ge){return!0},$.prototype.hasAttributes=function(){return 0!==this.attribs.length},$.prototype.compareDocumentPosition=function(ne){var Ue;return this===ne?0:this.document()!==ne.document()?(Ue=Y.Disconnected|Y.ImplementationSpecific,Math.random()<.5?Ue|=Y.Preceding:Ue|=Y.Following,Ue):this.isAncestor(ne)?Y.Contains|Y.Preceding:this.isDescendant(ne)?Y.Contains|Y.Following:this.isPreceding(ne)?Y.Preceding:Y.Following},$.prototype.isSameNode=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.lookupPrefix=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isDefaultNamespace=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.lookupNamespaceURI=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.isEqualNode=function(ne){var ge,Ue,Re;if(ne.nodeType!==this.nodeType||ne.children.length!==this.children.length)return!1;for(ge=Ue=0,Re=this.children.length-1;0<=Re?Ue<=Re:Ue>=Re;ge=0<=Re?++Ue:--Ue)if(!this.children[ge].isEqualNode(ne.children[ge]))return!1;return!0},$.prototype.getFeature=function(ne,ge){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.setUserData=function(ne,ge,Ue){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.getUserData=function(ne){throw new Error("This DOM method is not implemented."+this.debugInfo())},$.prototype.contains=function(ne){return!!ne&&(ne===this||this.isDescendant(ne))},$.prototype.isDescendant=function(ne){var ge,Re,rt,Pe;for(Re=0,rt=(Pe=this.children).length;Re<rt;Re++)if(ne===(ge=Pe[Re])||ge.isDescendant(ne))return!0;return!1},$.prototype.isAncestor=function(ne){return ne.isDescendant(this)},$.prototype.isPreceding=function(ne){var ge,Ue;return ge=this.treePosition(ne),Ue=this.treePosition(this),-1!==ge&&-1!==Ue&&ge<Ue},$.prototype.isFollowing=function(ne){var ge,Ue;return ge=this.treePosition(ne),Ue=this.treePosition(this),-1!==ge&&-1!==Ue&&ge>Ue},$.prototype.treePosition=function(ne){var ge,Ue;return Ue=0,ge=!1,this.foreachTreeNode(this.document(),function(Re){if(Ue++,!ge&&Re===ne)return ge=!0}),ge?Ue:-1},$.prototype.foreachTreeNode=function(ne,ge){var Ue,Re,rt,Pe,at;for(ne||(ne=this.document()),Re=0,rt=(Pe=ne.children).length;Re<rt;Re++){if(at=ge(Ue=Pe[Re]))return at;if(at=this.foreachTreeNode(Ue,ge))return at}},$}()}).call(this)},5112:function(Be){(function(){Be.exports=function(){function V(Y){this.nodes=Y}return Object.defineProperty(V.prototype,"length",{get:function(){return this.nodes.length||0}}),V.prototype.clone=function(){return this.nodes=null},V.prototype.item=function(Y){return this.nodes[Y]||null},V}()}).call(this)},4666:function(Be,be,V){(function(){var Y,D,W={}.hasOwnProperty;Y=V(2269),D=V(2182),Be.exports=function(P){function O(q,te,J){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing instruction target. "+this.debugInfo());this.type=Y.ProcessingInstruction,this.target=this.stringify.insTarget(te),this.name=this.target,J&&(this.value=this.stringify.insValue(J))}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(q))},O.prototype.isEqualNode=function(q){return!(!O.__super__.isEqualNode.apply(this,arguments).isEqualNode(q)||q.target!==this.target)},O}(D)}).call(this)},9942:function(Be,be,V){(function(){var Y,D,W={}.hasOwnProperty;Y=V(2269),D=V(8563),Be.exports=function(P){function O(q,te){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing raw text. "+this.debugInfo());this.type=Y.Raw,this.value=this.stringify.raw(te)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.raw(this,this.options.writer.filterOptions(q))},O}(D)}).call(this)},7647:function(Be,be,V){(function(){var Y,D,B,P={}.hasOwnProperty;Y=V(2269),B=V(3576),D=V(6316),Be.exports=function(O){function q(te,J){this.stream=te,q.__super__.constructor.call(this,J)}return function(O,q){for(var te in q)P.call(q,te)&&(O[te]=q[te]);function J(){this.constructor=O}J.prototype=q.prototype,O.prototype=new J,O.__super__=q.prototype}(q,O),q.prototype.endline=function(te,J,oe){return te.isLastRootNode&&J.state===D.CloseTag?"":q.__super__.endline.call(this,te,J,oe)},q.prototype.document=function(te,J){var se,Q,U,ae,xe,Oe,re,ue;for(se=Q=0,ae=(Oe=te.children).length;Q<ae;se=++Q)Oe[se].isLastRootNode=se===te.children.length-1;for(J=this.filterOptions(J),ue=[],U=0,xe=(re=te.children).length;U<xe;U++)ue.push(this.writeChildNode(re[U],J,0));return ue},q.prototype.attribute=function(te,J,oe){return this.stream.write(q.__super__.attribute.call(this,te,J,oe))},q.prototype.cdata=function(te,J,oe){return this.stream.write(q.__super__.cdata.call(this,te,J,oe))},q.prototype.comment=function(te,J,oe){return this.stream.write(q.__super__.comment.call(this,te,J,oe))},q.prototype.declaration=function(te,J,oe){return this.stream.write(q.__super__.declaration.call(this,te,J,oe))},q.prototype.docType=function(te,J,oe){var Q,U,ae;if(oe||(oe=0),this.openNode(te,J,oe),J.state=D.OpenTag,this.stream.write(this.indent(te,J,oe)),this.stream.write("<!DOCTYPE "+te.root().name),te.pubID&&te.sysID?this.stream.write(' PUBLIC "'+te.pubID+'" "'+te.sysID+'"'):te.sysID&&this.stream.write(' SYSTEM "'+te.sysID+'"'),te.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(te,J,oe)),J.state=D.InsideTag,Q=0,U=(ae=te.children).length;Q<U;Q++)this.writeChildNode(ae[Q],J,oe+1);J.state=D.CloseTag,this.stream.write("]")}return J.state=D.CloseTag,this.stream.write(J.spaceBeforeSlash+">"),this.stream.write(this.endline(te,J,oe)),J.state=D.None,this.closeNode(te,J,oe)},q.prototype.element=function(te,J,oe){var U,ae,xe,Oe,re,z,$;for(re in oe||(oe=0),this.openNode(te,J,oe),J.state=D.OpenTag,this.stream.write(this.indent(te,J,oe)+"<"+te.name),z=te.attribs)!P.call(z,re)||this.attribute(z[re],J,oe);if(ae=0===(U=te.children.length)?null:te.children[0],0===U||te.children.every(function(ne){return(ne.type===Y.Text||ne.type===Y.Raw)&&""===ne.value}))J.allowEmpty?(this.stream.write(">"),J.state=D.CloseTag,this.stream.write("</"+te.name+">")):(J.state=D.CloseTag,this.stream.write(J.spaceBeforeSlash+"/>"));else if(!J.pretty||1!==U||ae.type!==Y.Text&&ae.type!==Y.Raw||null==ae.value){for(this.stream.write(">"+this.endline(te,J,oe)),J.state=D.InsideTag,xe=0,Oe=($=te.children).length;xe<Oe;xe++)this.writeChildNode($[xe],J,oe+1);J.state=D.CloseTag,this.stream.write(this.indent(te,J,oe)+"</"+te.name+">")}else this.stream.write(">"),J.state=D.InsideTag,J.suppressPrettyCount++,this.writeChildNode(ae,J,oe+1),J.suppressPrettyCount--,J.state=D.CloseTag,this.stream.write("</"+te.name+">");return this.stream.write(this.endline(te,J,oe)),J.state=D.None,this.closeNode(te,J,oe)},q.prototype.processingInstruction=function(te,J,oe){return this.stream.write(q.__super__.processingInstruction.call(this,te,J,oe))},q.prototype.raw=function(te,J,oe){return this.stream.write(q.__super__.raw.call(this,te,J,oe))},q.prototype.text=function(te,J,oe){return this.stream.write(q.__super__.text.call(this,te,J,oe))},q.prototype.dtdAttList=function(te,J,oe){return this.stream.write(q.__super__.dtdAttList.call(this,te,J,oe))},q.prototype.dtdElement=function(te,J,oe){return this.stream.write(q.__super__.dtdElement.call(this,te,J,oe))},q.prototype.dtdEntity=function(te,J,oe){return this.stream.write(q.__super__.dtdEntity.call(this,te,J,oe))},q.prototype.dtdNotation=function(te,J,oe){return this.stream.write(q.__super__.dtdNotation.call(this,te,J,oe))},q}(B)}).call(this)},4354:function(Be,be,V){(function(){var D,B={}.hasOwnProperty;D=V(3576),Be.exports=function(W){function P(O){P.__super__.constructor.call(this,O)}return function(W,P){for(var O in P)B.call(P,O)&&(W[O]=P[O]);function q(){this.constructor=W}q.prototype=P.prototype,W.prototype=new q,W.__super__=P.prototype}(P,W),P.prototype.document=function(O,q){var J,oe,se,Q;for(q=this.filterOptions(q),se="",J=0,oe=(Q=O.children).length;J<oe;J++)se+=this.writeChildNode(Q[J],q,0);return q.pretty&&se.slice(-q.newline.length)===q.newline&&(se=se.slice(0,-q.newline.length)),se},P}(D)}).call(this)},5041:function(Be){(function(){var V=function(D,H){return function(){return D.apply(H,arguments)}},Y={}.hasOwnProperty;Be.exports=function(){function D(H){var B,W;for(B in this.assertLegalName=V(this.assertLegalName,this),this.assertLegalChar=V(this.assertLegalChar,this),H||(H={}),this.options=H,this.options.version||(this.options.version="1.0"),W=H.stringify||{})!Y.call(W,B)||(this[B]=W[B])}return D.prototype.name=function(H){return this.options.noValidation?H:this.assertLegalName(""+H||"")},D.prototype.text=function(H){return this.options.noValidation?H:this.assertLegalChar(this.textEscape(""+H||""))},D.prototype.cdata=function(H){return this.options.noValidation?H:(H=(H=""+H||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(H))},D.prototype.comment=function(H){if(this.options.noValidation)return H;if((H=""+H||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+H);return this.assertLegalChar(H)},D.prototype.raw=function(H){return this.options.noValidation?H:""+H||""},D.prototype.attValue=function(H){return this.options.noValidation?H:this.assertLegalChar(this.attEscape(H=""+H||""))},D.prototype.insTarget=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.insValue=function(H){if(this.options.noValidation)return H;if((H=""+H||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+H);return this.assertLegalChar(H)},D.prototype.xmlVersion=function(H){if(this.options.noValidation)return H;if(!(H=""+H||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+H);return H},D.prototype.xmlEncoding=function(H){if(this.options.noValidation)return H;if(!(H=""+H||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+H);return this.assertLegalChar(H)},D.prototype.xmlStandalone=function(H){return this.options.noValidation?H:H?"yes":"no"},D.prototype.dtdPubID=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdSysID=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdElementValue=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdAttType=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdAttDefault=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdEntityValue=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.dtdNData=function(H){return this.options.noValidation?H:this.assertLegalChar(""+H||"")},D.prototype.convertAttKey="@",D.prototype.convertPIKey="?",D.prototype.convertTextKey="#text",D.prototype.convertCDataKey="#cdata",D.prototype.convertCommentKey="#comment",D.prototype.convertRawKey="#raw",D.prototype.assertLegalChar=function(H){var W;if(this.options.noValidation)return H;if("1.0"===this.options.version){if(W=H.match(/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/))throw new Error("Invalid character in string: "+H+" at index "+W.index)}else if("1.1"===this.options.version&&(W=H.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/)))throw new Error("Invalid character in string: "+H+" at index "+W.index);return H},D.prototype.assertLegalName=function(H){if(this.options.noValidation)return H;if(this.assertLegalChar(H),!H.match(/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/))throw new Error("Invalid character in name");return H},D.prototype.textEscape=function(H){return this.options.noValidation?H:H.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},D.prototype.attEscape=function(H){return this.options.noValidation?H:H.replace(this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},D}()}).call(this)},474:function(Be,be,V){(function(){var Y,D,W={}.hasOwnProperty;Y=V(2269),D=V(2182),Be.exports=function(P){function O(q,te){if(O.__super__.constructor.call(this,q),null==te)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=Y.Text,this.value=this.stringify.text(te)}return function(P,O){for(var q in O)W.call(O,q)&&(P[q]=O[q]);function te(){this.constructor=P}te.prototype=O.prototype,P.prototype=new te,P.__super__=O.prototype}(O,P),Object.defineProperty(O.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(O.prototype,"wholeText",{get:function(){var q,te,J;for(J="",te=this.previousSibling;te;)J=te.data+J,te=te.previousSibling;for(J+=this.data,q=this.nextSibling;q;)J+=q.data,q=q.nextSibling;return J}}),O.prototype.clone=function(){return Object.create(this)},O.prototype.toString=function(q){return this.options.writer.text(this,this.options.writer.filterOptions(q))},O.prototype.splitText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},O.prototype.replaceWholeText=function(q){throw new Error("This DOM method is not implemented."+this.debugInfo())},O}(D)}).call(this)},3576:function(Be,be,V){(function(){var Y,D,Oe,re={}.hasOwnProperty;Oe=V(3452).assign,Y=V(2269),V(4789),V(9195),V(1361),V(2516),V(3352),V(9942),V(474),V(4666),V(4173),V(7274),V(2068),V(8349),V(3087),D=V(6316),Be.exports=function(){function ue(z){var $,ne,ge;for($ in z||(z={}),this.options=z,ne=z.writer||{})!re.call(ne,$)||(ge=ne[$],this["_"+$]=this[$],this[$]=ge)}return ue.prototype.filterOptions=function(z){var $,ne,ge,Ue,Re,rt,Pe,at;return z||(z={}),z=Oe({},this.options,z),($={writer:this}).pretty=z.pretty||!1,$.allowEmpty=z.allowEmpty||!1,$.indent=null!=(ne=z.indent)?ne:"  ",$.newline=null!=(ge=z.newline)?ge:"\n",$.offset=null!=(Ue=z.offset)?Ue:0,$.dontPrettyTextNodes=null!=(Re=null!=(rt=z.dontPrettyTextNodes)?rt:z.dontprettytextnodes)?Re:0,$.spaceBeforeSlash=null!=(Pe=null!=(at=z.spaceBeforeSlash)?at:z.spacebeforeslash)?Pe:"",!0===$.spaceBeforeSlash&&($.spaceBeforeSlash=" "),$.suppressPrettyCount=0,$.user={},$.state=D.None,$},ue.prototype.indent=function(z,$,ne){var ge;return!$.pretty||$.suppressPrettyCount?"":$.pretty&&(ge=(ne||0)+$.offset+1)>0?new Array(ge).join($.indent):""},ue.prototype.endline=function(z,$,ne){return!$.pretty||$.suppressPrettyCount?"":$.newline},ue.prototype.attribute=function(z,$,ne){var ge;return this.openAttribute(z,$,ne),ge=" "+z.name+'="'+z.value+'"',this.closeAttribute(z,$,ne),ge},ue.prototype.cdata=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<![CDATA[",$.state=D.InsideTag,ge+=z.value,$.state=D.CloseTag,ge+="]]>"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.comment=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"\x3c!-- ",$.state=D.InsideTag,ge+=z.value,$.state=D.CloseTag,ge+=" --\x3e"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.declaration=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<?xml",$.state=D.InsideTag,ge+=' version="'+z.version+'"',null!=z.encoding&&(ge+=' encoding="'+z.encoding+'"'),null!=z.standalone&&(ge+=' standalone="'+z.standalone+'"'),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+"?>",ge+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.docType=function(z,$,ne){var Ue,Re,rt,Pe;if(ne||(ne=0),this.openNode(z,$,ne),$.state=D.OpenTag,rt=this.indent(z,$,ne),rt+="<!DOCTYPE "+z.root().name,z.pubID&&z.sysID?rt+=' PUBLIC "'+z.pubID+'" "'+z.sysID+'"':z.sysID&&(rt+=' SYSTEM "'+z.sysID+'"'),z.children.length>0){for(rt+=" [",rt+=this.endline(z,$,ne),$.state=D.InsideTag,Ue=0,Re=(Pe=z.children).length;Ue<Re;Ue++)rt+=this.writeChildNode(Pe[Ue],$,ne+1);$.state=D.CloseTag,rt+="]"}return $.state=D.CloseTag,rt+=$.spaceBeforeSlash+">",rt+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),rt},ue.prototype.element=function(z,$,ne){var Ue,Re,rt,Pe,at,xt,He,ft,gt,Ct,kn,Ut,Dn;for(ft in ne||(ne=0),gt=!1,Ct="",this.openNode(z,$,ne),$.state=D.OpenTag,Ct+=this.indent(z,$,ne)+"<"+z.name,kn=z.attribs)!re.call(kn,ft)||(Ct+=this.attribute(kn[ft],$,ne));if(rt=0===(Re=z.children.length)?null:z.children[0],0===Re||z.children.every(function(Jt){return(Jt.type===Y.Text||Jt.type===Y.Raw)&&""===Jt.value}))$.allowEmpty?(Ct+=">",$.state=D.CloseTag,Ct+="</"+z.name+">"+this.endline(z,$,ne)):($.state=D.CloseTag,Ct+=$.spaceBeforeSlash+"/>"+this.endline(z,$,ne));else if(!$.pretty||1!==Re||rt.type!==Y.Text&&rt.type!==Y.Raw||null==rt.value){if($.dontPrettyTextNodes)for(Pe=0,xt=(Ut=z.children).length;Pe<xt;Pe++)if(((Ue=Ut[Pe]).type===Y.Text||Ue.type===Y.Raw)&&null!=Ue.value){$.suppressPrettyCount++,gt=!0;break}for(Ct+=">"+this.endline(z,$,ne),$.state=D.InsideTag,at=0,He=(Dn=z.children).length;at<He;at++)Ct+=this.writeChildNode(Ue=Dn[at],$,ne+1);$.state=D.CloseTag,Ct+=this.indent(z,$,ne)+"</"+z.name+">",gt&&$.suppressPrettyCount--,Ct+=this.endline(z,$,ne),$.state=D.None}else Ct+=">",$.state=D.InsideTag,$.suppressPrettyCount++,gt=!0,Ct+=this.writeChildNode(rt,$,ne+1),$.suppressPrettyCount--,gt=!1,$.state=D.CloseTag,Ct+="</"+z.name+">"+this.endline(z,$,ne);return this.closeNode(z,$,ne),Ct},ue.prototype.writeChildNode=function(z,$,ne){switch(z.type){case Y.CData:return this.cdata(z,$,ne);case Y.Comment:return this.comment(z,$,ne);case Y.Element:return this.element(z,$,ne);case Y.Raw:return this.raw(z,$,ne);case Y.Text:return this.text(z,$,ne);case Y.ProcessingInstruction:return this.processingInstruction(z,$,ne);case Y.Dummy:return"";case Y.Declaration:return this.declaration(z,$,ne);case Y.DocType:return this.docType(z,$,ne);case Y.AttributeDeclaration:return this.dtdAttList(z,$,ne);case Y.ElementDeclaration:return this.dtdElement(z,$,ne);case Y.EntityDeclaration:return this.dtdEntity(z,$,ne);case Y.NotationDeclaration:return this.dtdNotation(z,$,ne);default:throw new Error("Unknown XML node type: "+z.constructor.name)}},ue.prototype.processingInstruction=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<?",$.state=D.InsideTag,ge+=z.target,z.value&&(ge+=" "+z.value),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+"?>",ge+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.raw=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne),$.state=D.InsideTag,ge+=z.value,$.state=D.CloseTag,ge+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.text=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne),$.state=D.InsideTag,ge+=z.value,$.state=D.CloseTag,ge+=this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.dtdAttList=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<!ATTLIST",$.state=D.InsideTag,ge+=" "+z.elementName+" "+z.attributeName+" "+z.attributeType,"#DEFAULT"!==z.defaultValueType&&(ge+=" "+z.defaultValueType),z.defaultValue&&(ge+=' "'+z.defaultValue+'"'),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+">"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.dtdElement=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<!ELEMENT",$.state=D.InsideTag,ge+=" "+z.name+" "+z.value,$.state=D.CloseTag,ge+=$.spaceBeforeSlash+">"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.dtdEntity=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<!ENTITY",$.state=D.InsideTag,z.pe&&(ge+=" %"),ge+=" "+z.name,z.value?ge+=' "'+z.value+'"':(z.pubID&&z.sysID?ge+=' PUBLIC "'+z.pubID+'" "'+z.sysID+'"':z.sysID&&(ge+=' SYSTEM "'+z.sysID+'"'),z.nData&&(ge+=" NDATA "+z.nData)),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+">"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.dtdNotation=function(z,$,ne){var ge;return this.openNode(z,$,ne),$.state=D.OpenTag,ge=this.indent(z,$,ne)+"<!NOTATION",$.state=D.InsideTag,ge+=" "+z.name,z.pubID&&z.sysID?ge+=' PUBLIC "'+z.pubID+'" "'+z.sysID+'"':z.pubID?ge+=' PUBLIC "'+z.pubID+'"':z.sysID&&(ge+=' SYSTEM "'+z.sysID+'"'),$.state=D.CloseTag,ge+=$.spaceBeforeSlash+">"+this.endline(z,$,ne),$.state=D.None,this.closeNode(z,$,ne),ge},ue.prototype.openNode=function(z,$,ne){},ue.prototype.closeNode=function(z,$,ne){},ue.prototype.openAttribute=function(z,$,ne){},ue.prototype.closeAttribute=function(z,$,ne){},ue}()}).call(this)},7904:function(Be,be,V){(function(){var Y,D,H,B,W,P,O,q,te,J;J=V(3452),q=J.assign,te=J.isFunction,H=V(9906),B=V(519),W=V(1105),O=V(4354),P=V(7647),Y=V(2269),D=V(6316),Be.exports.create=function(oe,se,Q,U){var ae,xe;if(null==oe)throw new Error("Root element needs a name.");return U=q({},se,Q,U),xe=(ae=new B(U)).element(oe),U.headless||(ae.declaration(U),(null!=U.pubID||null!=U.sysID)&&ae.dtd(U)),xe},Be.exports.begin=function(oe,se,Q){var U;return te(oe)&&(se=(U=[oe,se])[0],Q=U[1],oe={}),se?new W(oe,se,Q):new B(oe)},Be.exports.stringWriter=function(oe){return new O(oe)},Be.exports.streamWriter=function(oe,se){return new P(oe,se)},Be.exports.implementation=new H,Be.exports.nodeType=Y,Be.exports.writerState=D}).call(this)},2361:()=>{},4616:()=>{},5485:Be=>{"use strict";Be.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\u{1d504}","afr":"\u{1d51e}","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1d538}","aopf":"\u{1d552}","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\u{1d49c}","ascr":"\u{1d4b6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\u{1d505}","bfr":"\u{1d51f}","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\u{1d539}","bopf":"\u{1d553}","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\u{1d4b7}","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\u{1d520}","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\u{1d554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\u{1d49e}","cscr":"\u{1d4b8}","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\u{1d507}","dfr":"\u{1d521}","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\u{1d53b}","dopf":"\u{1d555}","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\u{1d49f}","dscr":"\u{1d4b9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1d508}","efr":"\u{1d522}","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1d53c}","eopf":"\u{1d556}","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\u{1d509}","ffr":"\u{1d523}","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\u{1d53d}","fopf":"\u{1d557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\u{1d4bb}","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\u{1d50a}","gfr":"\u{1d524}","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\u{1d53e}","gopf":"\u{1d558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\u{1d4a2}","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\u{1d525}","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\u{1d559}","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1d4bd}","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\u{1d526}","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\u{1d540}","iopf":"\u{1d55a}","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\u{1d4be}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1d50d}","jfr":"\u{1d527}","jmath":"\u0237","Jopf":"\u{1d541}","jopf":"\u{1d55b}","Jscr":"\u{1d4a5}","jscr":"\u{1d4bf}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\u{1d50e}","kfr":"\u{1d528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\u{1d542}","kopf":"\u{1d55c}","Kscr":"\u{1d4a6}","kscr":"\u{1d4c0}","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\u{1d50f}","lfr":"\u{1d529}","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\u{1d543}","lopf":"\u{1d55d}","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\u{1d4c1}","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\u{1d510}","mfr":"\u{1d52a}","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\u{1d544}","mopf":"\u{1d55e}","mp":"\u2213","mscr":"\u{1d4c2}","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1d511}","nfr":"\u{1d52b}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\u{1d55f}","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\u{1d4a9}","nscr":"\u{1d4c3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\u{1d512}","ofr":"\u{1d52c}","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\u{1d546}","oopf":"\u{1d560}","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\u{1d4aa}","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\u{1d513}","pfr":"\u{1d52d}","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\u{1d561}","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\u{1d4ab}","pscr":"\u{1d4c5}","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\u{1d514}","qfr":"\u{1d52e}","qint":"\u2a0c","qopf":"\u{1d562}","Qopf":"\u211a","qprime":"\u2057","Qscr":"\u{1d4ac}","qscr":"\u{1d4c6}","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\u{1d52f}","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\u{1d563}","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\u{1d4c7}","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1d516}","sfr":"\u{1d530}","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\u{1d54a}","sopf":"\u{1d564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\u{1d4ae}","sscr":"\u{1d4c8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\u{1d517}","tfr":"\u{1d531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\u{1d54b}","topf":"\u{1d565}","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\u{1d4af}","tscr":"\u{1d4c9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\u{1d518}","ufr":"\u{1d532}","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1d54c}","uopf":"\u{1d566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\u{1d4b0}","uscr":"\u{1d4ca}","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\u{1d519}","vfr":"\u{1d533}","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\u{1d54d}","vopf":"\u{1d567}","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\u{1d4b1}","vscr":"\u{1d4cb}","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1d51a}","wfr":"\u{1d534}","Wopf":"\u{1d54e}","wopf":"\u{1d568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1d4b2}","wscr":"\u{1d4cc}","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\u{1d51b}","xfr":"\u{1d535}","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\u{1d54f}","xopf":"\u{1d569}","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\u{1d4b3}","xscr":"\u{1d4cd}","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\u{1d51c}","yfr":"\u{1d536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1d550}","yopf":"\u{1d56a}","Yscr":"\u{1d4b4}","yscr":"\u{1d4ce}","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\u{1d537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\u{1d56b}","Zopf":"\u2124","Zscr":"\u{1d4b5}","zscr":"\u{1d4cf}","zwj":"\u200d","zwnj":"\u200c"}')}},Be=>{Be(Be.s=2534)}]);